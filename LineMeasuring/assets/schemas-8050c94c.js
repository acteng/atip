import{S as b,i as w,s as S,aX as T,b as z,c as J,g as k,m as L,l as A,t as d,n as m,q as C,e as $,h as g,N as D,j as v,x as M,p as y,M as U,d as E,az as F,k as B,w as Q,aK as V,aL as X,aM as Y,aN as x,J as H,y as ee,o as te,K as ne,u as oe,I as se,a as re,Q as N,C as K,D as ae,W as le,U as ie,a0 as O,$ as q,V as ce,a4 as ue,a3 as fe,a2 as G,ar as R}from"./index-dda6bd0b.js";import{e as pe,C as de,a as ge,l as j,c}from"./StreetViewController-981dfcd5.js";function me(r){let e,o,t;function n(s){r[2](s)}let l={label:"Basemap",id:"basemap",choices:T()};return r[0]!==void 0&&(l.value=r[0]),e=new pe({props:l}),z.push(()=>J(e,"value",n)),e.$on("change",r[1]),{c(){k(e.$$.fragment)},m(s,i){L(e,s,i),t=!0},p(s,[i]){const a={};!o&&i&1&&(o=!0,a.value=s[0],A(()=>o=!1)),e.$set(a)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){m(e.$$.fragment,s),t=!1},d(s){C(e,s)}}}function _e(r,e,o){let{style:t}=e;function n(){let s=new URLSearchParams(window.location.search);s.set("style",t);let i=`${window.location.pathname}?${s.toString()}${window.location.hash}`;window.location.href=i}function l(s){t=s,o(0,t)}return r.$$set=s=>{"style"in s&&o(0,t=s.style)},[t,n,l]}class De extends b{constructor(e){super(),w(this,e,_e,me,S,{style:0})}}function he(r){let e;return{c(){e=$("span"),g(e,"class","svelte-kzgqtg"),D(e,"background",r[0])},m(o,t){v(o,e,t)},p(o,[t]){t&1&&D(e,"background",o[0])},i:M,o:M,d(o){o&&y(e)}}}function $e(r,e,o){let{color:t}=e;return r.$$set=n=>{"color"in n&&o(0,t=n.color)},[t]}class ve extends b{constructor(e){super(),w(this,e,$e,he,S,{color:0})}}const ye="/atip/LineMeasuring/assets/help-d011708a.svg";function be(r){let e,o;const t=r[1].default,n=V(t,r,r[4],null);return{c(){e=$("div"),n&&n.c(),g(e,"class","govuk-prose")},m(l,s){v(l,e,s),n&&n.m(e,null),o=!0},p(l,s){n&&n.p&&(!o||s&16)&&X(n,t,l,l[4],o?x(t,l[4],s,null):Y(l[4]),null)},i(l){o||(d(n,l),o=!0)},o(l){m(n,l),o=!1},d(l){l&&y(e),n&&n.d(l)}}}function we(r){let e,o,t,n,l,s,i,a,f;function p(u){r[3](u)}let I={title:"Help",$$slots:{default:[be]},$$scope:{ctx:r}};return r[0]!==void 0&&(I.open=r[0]),l=new U({props:I}),z.push(()=>J(l,"open",p)),{c(){e=$("button"),o=$("img"),n=E(),k(l.$$.fragment),F(o.src,t=ye)||g(o,"src",t),g(o,"title","Help"),g(o,"alt","Help"),g(e,"class","svelte-7d9d1l")},m(u,_){v(u,e,_),B(e,o),v(u,n,_),L(l,u,_),i=!0,a||(f=Q(e,"click",r[2]),a=!0)},p(u,[_]){const P={};_&16&&(P.$$scope={dirty:_,ctx:u}),!s&&_&1&&(s=!0,P.open=u[0],A(()=>s=!1)),l.$set(P)},i(u){i||(d(l.$$.fragment,u),i=!0)},o(u){m(l.$$.fragment,u),i=!1},d(u){u&&(y(e),y(n)),C(l,u),a=!1,f()}}}function Se(r,e,o){let{$$slots:t={},$$scope:n}=e,l=!1;const s=()=>o(0,l=!0);function i(a){l=a,o(0,l)}return r.$$set=a=>{"$$scope"in a&&o(4,n=a.$$scope)},[l,t,s,i,n]}class He extends b{constructor(e){super(),w(this,e,Se,we,S,{})}}function W(r,e,o){const t=r.slice();return t[1]=e[o][0],t[2]=e[o][1],t}function Z(r){let e,o,t,n=r[1]+"",l,s,i;return o=new ve({props:{color:r[2]}}),{c(){e=$("li"),k(o.$$.fragment),t=E(),l=oe(n),s=E()},m(a,f){v(a,e,f),L(o,e,null),B(e,t),B(e,l),B(e,s),i=!0},p(a,f){const p={};f&1&&(p.color=a[2]),o.$set(p),(!i||f&1)&&n!==(n=a[1]+"")&&se(l,n)},i(a){i||(d(o.$$.fragment,a),i=!0)},o(a){m(o.$$.fragment,a),i=!1},d(a){a&&y(e),C(o)}}}function ke(r){let e,o,t=H(r[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Z(W(r,t,s));const l=s=>m(n[s],1,1,()=>{n[s]=null});return{c(){e=$("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,i){v(s,e,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);o=!0},p(s,i){if(i&1){t=H(s[0]);let a;for(a=0;a<t.length;a+=1){const f=W(s,t,a);n[a]?(n[a].p(f,i),d(n[a],1)):(n[a]=Z(f),n[a].c(),d(n[a],1),n[a].m(e,null))}for(ee(),a=t.length;a<n.length;a+=1)l(a);te()}},i(s){if(!o){for(let i=0;i<t.length;i+=1)d(n[i]);o=!0}},o(s){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)m(n[i]);o=!1},d(s){s&&y(e),ne(n,s)}}}function Le(r){let e,o;return e=new de({props:{label:"Legend",$$slots:{default:[ke]},$$scope:{ctx:r}}}),{c(){k(e.$$.fragment)},m(t,n){L(e,t,n),o=!0},p(t,[n]){const l={};n&33&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){o||(d(e.$$.fragment,t),o=!0)},o(t){m(e.$$.fragment,t),o=!1},d(t){C(e,t)}}}function Ce(r,e,o){let{rows:t}=e;return r.$$set=n=>{"rows"in n&&o(0,t=n.rows)},[t]}class Oe extends b{constructor(e){super(),w(this,e,Ce,Le,S,{rows:0})}}const Ie="/atip/LineMeasuring/assets/zoom_out_map-b2e1091a.svg";function Be(r){let e,o;return{c(){e=$("img"),F(e.src,o=Ie)||g(e,"src",o),g(e,"alt","Zoom to show entire boundary")},m(t,n){v(t,e,n)},p:M,d(t){t&&y(e)}}}function Pe(r){let e,o;return e=new re({props:{title:"Zoom to show entire boundary",$$slots:{default:[Be]},$$scope:{ctx:r}}}),e.$on("click",r[0]),{c(){k(e.$$.fragment)},m(t,n){L(e,t,n),o=!0},p(t,[n]){const l={};n&8&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){o||(d(e.$$.fragment,t),o=!0)},o(t){m(e.$$.fragment,t),o=!1},d(t){C(e,t)}}}function je(r,e,o){let t;N(r,K,s=>o(2,t=s));let{boundaryGeojson:n}=e;function l(){t.fitBounds(ae(n),{padding:20,animate:!0,duration:500})}return r.$$set=s=>{"boundaryGeojson"in s&&o(1,n=s.boundaryGeojson)},[l,n]}class qe extends b{constructor(e){super(),w(this,e,je,Pe,S,{boundaryGeojson:1})}}let h="interventions";function Me(r,e,o){let t,n;N(r,K,a=>o(1,t=a)),N(r,le,a=>o(2,n=a));let{colorInterventions:l}=e;ie(t,h,n);const s=["!=","hide_while_editing",!0];return O(t,{id:"interventions-points",source:h,filter:["all",ue,s,["!=","endpoint",!0]],color:l,radius:ge}),q(t,{id:"interventions-lines",source:h,filter:["all",fe,s],color:l,width:j}),O(t,{id:"interventions-lines-endpoints",source:h,filter:["==","endpoint",!0],radius:.5*j,opacity:0,strokeColor:c.lineEndpointColor,strokeWidth:2}),ce(t,{id:"interventions-polygons",source:h,filter:["all",G,s],color:l,opacity:.2}),q(t,{id:"interventions-polygon-outlines",source:h,filter:["all",G,s],color:l,opacity:.5,width:.7*j}),r.$$set=a=>{"colorInterventions"in a&&o(0,l=a.colorInterventions)},r.$$.update=()=>{if(r.$$.dirty&6){let a=JSON.parse(JSON.stringify(n)),f=[];for(let p of a.features)if(p.geometry.type=="LineString"&&!p.properties.hide_while_editing)for(let I of[p.geometry.coordinates[0],p.geometry.coordinates[p.geometry.coordinates.length-1]])f.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:I}});a.features=a.features.concat(f),t.getSource(h).setData(a)}},[l,t,n]}class Ge extends b{constructor(e){super(),w(this,e,Me,null,S,{colorInterventions:0})}}function Re(r){return{v1:"Scheme Design",v2:"Experimental Scheme Design",planning:"Development Planning",criticals:"Critical Issues",atf4:"ATF4 Scheme"}[r]}function We(r){return{v1:"an intervention",v2:"an intervention",planning:"a development",criticals:"a critical issue",atf4:"an intervention"}[r]}function Ze(r){return{v1:"interventions",v2:"interventions",planning:"developments",criticals:"critical issues",atf4:"interventions"}[r]}function ze(r){return r=="planning"?R(["get","reference_type",["get","planning"]],{preapp:c.preapp,outline:c.outline,"reserved matters":c["reserved matters"],"local plan":c["local plan"]},"black"):R(["get","intervention_type"],{area:c.area,route:c.route,crossing:c.crossing,other:c.other},"white")}function Je(r){return r=="planning"?[["Preapp",c.preapp],["Outline",c.outline],["Reserved matters",c["reserved matters"]],["Local plan",c["local plan"]]]:[["Areas",c.area],["Routes",c.route],["Crossings",c.crossing],["Other",c.other]]}export{De as B,ve as C,He as H,Ge as I,Oe as L,qe as Z,Ze as a,Re as b,ze as c,Je as d,We as s};
