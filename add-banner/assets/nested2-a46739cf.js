import{S as V,i as Q,s as J,g as C,j as G,aw as me,k as $,a5 as te,p,aS as ls,b as U,c as W,f as T,e as h,m as b,x as xe,n as Y,t as _,o as g,q as k,N as at,O as ft,P as ut,Q as ct,H as _s,b3 as mn,l as w,ak as Se,a7 as ie,a8 as ae,at as et,v,K as B,a6 as Ce,a9 as rn,aa as ss,r as K,ab as rs,ac as os,ad as Ie,ae as is,af as as,b4 as gs,T as gt,b5 as _n,b6 as ds,G as pt,aO as xt,W as ne,I as he,a as tt,aQ as hs,b1 as Qt,a3 as mt,u as on,F as gn,w as Ve,b2 as x,b7 as pe,D as ee,C as ze,Y as le,ar as re,a4 as Wt,V as fs,a$ as Gt,b8 as Et,b9 as it,R as us,ba as bs,bb as ks,aT as ws,aU as en,h as tn,bc as vs,B as ys,L as Ss,d as Cs,E as Ls,M as Ts,y as Ms}from"./index-112be501.js";import{e as dn,u as H,v as Qe,t as Ns,q as qe,M as Ps,h as Ke,k as ot,C as nt,a as se,w as be,R as Os,f as $t,s as Is,n as Rs,S as Ds,B as As,b as Fs,p as hn,g as qs,d as bn,x as kn,c as wn,y as Bt,i as Ut,Z as zs,G as Bs,m as vn}from"./ZoomOutMap-aa616a13.js";import{P as oe}from"./Popup-41ef12d1.js";function js(r){let e;return{c(){e=C("span"),G(e,"class","svelte-kzgqtg"),me(e,"background",r[0])},m(s,t){$(s,e,t)},p(s,[t]){t&1&&me(e,"background",s[0])},i:te,o:te,d(s){s&&p(e)}}}function Hs(r,e,s){let{color:t}=e;return r.$$set=n=>{"color"in n&&s(0,t=n.color)},[t]}class Re extends V{constructor(e){super(),Q(this,e,Hs,js,J,{color:0})}}const Gs="/atip/add-banner/assets/help-d011708a.svg";function Es(r){let e,s;const t=r[1].default,n=at(t,r,r[4],null);return{c(){e=C("div"),n&&n.c(),G(e,"class","govuk-prose")},m(l,o){$(l,e,o),n&&n.m(e,null),s=!0},p(l,o){n&&n.p&&(!s||o&16)&&ft(n,t,l,l[4],s?ct(t,l[4],o,null):ut(l[4]),null)},i(l){s||(_(n,l),s=!0)},o(l){g(n,l),s=!1},d(l){l&&p(e),n&&n.d(l)}}}function Us(r){let e,s,t,n,l,o,u;function a(f){r[3](f)}let i={title:"Help",$$slots:{default:[Es]},$$scope:{ctx:r}};return r[0]!==void 0&&(i.open=r[0]),t=new ls({props:i}),U.push(()=>W(t,"open",a)),{c(){e=C("button"),e.innerHTML=`<img src="${Gs}" title="Help" alt="Help"/>`,s=T(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,s,c),b(t,f,c),l=!0,o||(u=xe(e,"click",r[2]),o=!0)},p(f,[c]){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.open=f[0],Y(()=>n=!1)),t.$set(m)},i(f){l||(_(t.$$.fragment,f),l=!0)},o(f){g(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(s)),k(t,f),o=!1,u()}}}function Ws(r,e,s){let{$$slots:t={},$$scope:n}=e,l=!1;const o=()=>s(0,l=!0);function u(a){l=a,s(0,l)}return r.$$set=a=>{"$$scope"in a&&s(4,n=a.$$scope)},[l,t,o,u,n]}class ce extends V{constructor(e){super(),Q(this,e,Ws,Us,J,{})}}const Ys=r=>({}),yn=r=>({}),Js=r=>({}),Sn=r=>({});function Vs(r){let e,s,t,n,l,o,u,a,i,f,c,m,d;s=new _s({});const S=r[4].sidebar,y=at(S,r,r[3],Sn),L=r[4].main,M=at(L,r,r[3],yn);return{c(){e=C("div"),h(s.$$.fragment),t=T(),n=C("aside"),l=C("div"),y&&y.c(),o=T(),u=C("button"),u.textContent="â†’",i=T(),f=C("main"),M&&M.c(),G(l,"class","sidebar-content content-container svelte-1n0etgd"),G(u,"type","button"),G(u,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(n,"class",a=mn(r[1]?"below-header":"collapsed below-header")+" svelte-1n0etgd"),me(n,"--sidebarWidth",r[0]),G(f,"class","below-header svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(O,D){$(O,e,D),b(s,e,null),w(e,t),w(e,n),w(n,l),y&&y.m(l,null),w(n,o),w(n,u),w(e,i),w(e,f),M&&M.m(f,null),c=!0,m||(d=xe(u,"click",r[2]),m=!0)},p(O,[D]){y&&y.p&&(!c||D&8)&&ft(y,S,O,O[3],c?ct(S,O[3],D,Js):ut(O[3]),Sn),(!c||D&2&&a!==(a=mn(O[1]?"below-header":"collapsed below-header")+" svelte-1n0etgd"))&&G(n,"class",a),(!c||D&1)&&me(n,"--sidebarWidth",O[0]),M&&M.p&&(!c||D&8)&&ft(M,L,O,O[3],c?ct(L,O[3],D,Ys):ut(O[3]),yn)},i(O){c||(_(s.$$.fragment,O),_(y,O),_(M,O),c=!0)},o(O){g(s.$$.fragment,O),g(y,O),g(M,O),c=!1},d(O){O&&p(e),k(s),y&&y.d(O),M&&M.d(O),m=!1,d()}}}function Qs(r,e,s){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:l="25rem"}=e,o=!0;function u(){s(1,o=!o)}return r.$$set=a=>{"sidebarWidth"in a&&s(0,l=a.sidebarWidth),"$$scope"in a&&s(3,n=a.$$scope)},[l,o,u,n,t]}class Ks extends V{constructor(e){super(),Q(this,e,Qs,Vs,J,{sidebarWidth:0})}}function Cn(r,e,s){const t=r.slice();return t[1]=e[s][0],t[2]=e[s][1],t}function Ln(r){let e,s,t,n=r[1]+"",l,o,u;return s=new Re({props:{color:r[2]}}),{c(){e=C("li"),h(s.$$.fragment),t=T(),l=v(n),o=T()},m(a,i){$(a,e,i),b(s,e,null),w(e,t),w(e,l),w(e,o),u=!0},p(a,i){const f={};i&1&&(f.color=a[2]),s.$set(f),(!u||i&1)&&n!==(n=a[1]+"")&&B(l,n)},i(a){u||(_(s.$$.fragment,a),u=!0)},o(a){g(s.$$.fragment,a),u=!1},d(a){a&&p(e),k(s)}}}function Zs(r){let e,s,t=Se(r[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Ln(Cn(r,t,o));const l=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){e=C("ul");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,u){$(o,e,u);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);s=!0},p(o,[u]){if(u&1){t=Se(o[0]);let a;for(a=0;a<t.length;a+=1){const i=Cn(o,t,a);n[a]?(n[a].p(i,u),_(n[a],1)):(n[a]=Ln(i),n[a].c(),_(n[a],1),n[a].m(e,null))}for(ie(),a=t.length;a<n.length;a+=1)l(a);ae()}},i(o){if(!s){for(let u=0;u<t.length;u+=1)_(n[u]);s=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)g(n[u]);s=!1},d(o){o&&p(e),et(n,o)}}}function Xs(r,e,s){let{rows:t}=e;return r.$$set=n=>{"rows"in n&&s(0,t=n.rows)},[t]}class Kt extends V{constructor(e){super(),Q(this,e,Xs,Zs,J,{rows:0})}}function Tn(r){let e=r[0],s,t,n=Mn(r);return{c(){n.c(),s=Ce()},m(l,o){n.m(l,o),$(l,s,o),t=!0},p(l,o){o&1&&J(e,e=l[0])?(ie(),g(n,1,1,te),ae(),n=Mn(l),n.c(),_(n,1),n.m(s.parentNode,s)):n.p(l,o)},i(l){t||(_(n),t=!0)},o(l){g(n),t=!1},d(l){l&&p(s),n.d(l)}}}function Mn(r){let e;const s=r[16].default,t=at(s,r,r[15],null);return{c(){t&&t.c()},m(n,l){t&&t.m(n,l),e=!0},p(n,l){t&&t.p&&(!e||l&32768)&&ft(t,s,n,n[15],e?ct(s,n[15],l,null):ut(n[15]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function xs(r){let e,s,t=r[0]&&Tn(r);return{c(){t&&t.c(),e=Ce()},m(n,l){t&&t.m(n,l),$(n,e,l),s=!0},p(n,[l]){n[0]?t?(t.p(n,l),l&1&&_(t,1)):(t=Tn(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(ie(),g(t,1,1,()=>{t=null}),ae())},i(n){s||(_(t),s=!0)},o(n){g(t),s=!1},d(n){n&&p(e),t&&t.d(n)}}}function er(r,e,s){let t,n,{$$slots:l={},$$scope:o}=e,{id:u=rn("raster-source")}=e,{tiles:a}=e,{tileSize:i=void 0}=e,{bounds:f=null}=e,{scheme:c=null}=e,{attribution:m=null}=e,{minzoom:d=null}=e,{maxzoom:S=null}=e,{volatile:y=null}=e;const{map:L,self:M}=ss();K(r,L,I=>s(14,n=I)),K(r,M,I=>s(0,t=I));let O,D=!0;return rs(()=>{t&&O&&n&&(os(L,t,O),Ie(M,t=null,t),s(12,O=void 0))}),r.$$set=I=>{"id"in I&&s(3,u=I.id),"tiles"in I&&s(4,a=I.tiles),"tileSize"in I&&s(5,i=I.tileSize),"bounds"in I&&s(6,f=I.bounds),"scheme"in I&&s(7,c=I.scheme),"attribution"in I&&s(8,m=I.attribution),"minzoom"in I&&s(9,d=I.minzoom),"maxzoom"in I&&s(10,S=I.maxzoom),"volatile"in I&&s(11,y=I.volatile),"$$scope"in I&&s(15,o=I.$$scope)},r.$$.update=()=>{r.$$.dirty&24569&&n&&t!==u&&(Ie(M,t=u,t),is(n,t,as({type:"raster",tiles:a,tileSize:i,bounds:f,scheme:c,attribution:m,minzoom:d,maxzoom:S,volatile:y}),I=>n&&I===t,()=>{t&&(s(12,O=n==null?void 0:n.getSource(t)),s(13,D=!0))})),r.$$.dirty&16392&&(n==null||n.on("style.load",()=>{s(12,O=n==null?void 0:n.getSource(u))})),r.$$.dirty&12304&&O&&(D?s(13,D=!1):O.setTiles(a))},[t,L,M,u,a,i,f,c,m,d,S,y,O,D,n,o,l]}class tr extends V{constructor(e){super(),Q(this,e,er,xs,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function nr(r){let e;const s=r[16].default,t=at(s,r,r[24],null);return{c(){t&&t.c()},m(n,l){t&&t.m(n,l),e=!0},p(n,l){t&&t.p&&(!e||l&16777216)&&ft(t,s,n,n[24],e?ct(s,n[24],l,null):ut(n[24]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function lr(r){let e,s,t;function n(o){r[17](o)}let l={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[nr]},$$scope:{ctx:r}};return r[0]!==void 0&&(l.hovered=r[0]),e=new gs({props:l}),U.push(()=>W(e,"hovered",n)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(o,u){b(e,o,u),t=!0},p(o,[u]){const a={};u&2&&(a.id=o[1]),u&4&&(a.source=o[2]),u&8&&(a.sourceLayer=o[3]),u&16&&(a.beforeId=o[4]),u&32&&(a.beforeLayerType=o[5]),u&64&&(a.paint=o[6]),u&128&&(a.layout=o[7]),u&256&&(a.filter=o[8]),u&512&&(a.applyToClusters=o[9]),u&1024&&(a.minzoom=o[10]),u&2048&&(a.maxzoom=o[11]),u&4096&&(a.hoverCursor=o[12]),u&8192&&(a.manageHoverState=o[13]),u&16384&&(a.eventsIfTopMost=o[14]),u&32768&&(a.interactive=o[15]),u&16777216&&(a.$$scope={dirty:u,ctx:o}),!s&&u&1&&(s=!0,a.hovered=o[0],Y(()=>s=!1)),e.$set(a)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function sr(r,e,s){let{$$slots:t={},$$scope:n}=e,{id:l=rn("symbol")}=e,{source:o=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:a=void 0}=e,{beforeLayerType:i=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:m=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:S=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:L=void 0}=e,{manageHoverState:M=!1}=e,{hovered:O=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:I=!0}=e;function N(q){O=q,s(0,O)}function R(q){gt.call(this,r,q)}function F(q){gt.call(this,r,q)}function P(q){gt.call(this,r,q)}function z(q){gt.call(this,r,q)}function X(q){gt.call(this,r,q)}function E(q){gt.call(this,r,q)}return r.$$set=q=>{"id"in q&&s(1,l=q.id),"source"in q&&s(2,o=q.source),"sourceLayer"in q&&s(3,u=q.sourceLayer),"beforeId"in q&&s(4,a=q.beforeId),"beforeLayerType"in q&&s(5,i=q.beforeLayerType),"paint"in q&&s(6,f=q.paint),"layout"in q&&s(7,c=q.layout),"filter"in q&&s(8,m=q.filter),"applyToClusters"in q&&s(9,d=q.applyToClusters),"minzoom"in q&&s(10,S=q.minzoom),"maxzoom"in q&&s(11,y=q.maxzoom),"hoverCursor"in q&&s(12,L=q.hoverCursor),"manageHoverState"in q&&s(13,M=q.manageHoverState),"hovered"in q&&s(0,O=q.hovered),"eventsIfTopMost"in q&&s(14,D=q.eventsIfTopMost),"interactive"in q&&s(15,I=q.interactive),"$$scope"in q&&s(24,n=q.$$scope)},[O,l,o,u,a,i,f,c,m,d,S,y,L,M,D,I,t,N,R,F,P,z,X,E,n]}class an extends V{constructor(e){super(),Q(this,e,sr,lr,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Nn(r){let e=r[0],s,t,n=Pn(r);return{c(){n.c(),s=Ce()},m(l,o){n.m(l,o),$(l,s,o),t=!0},p(l,o){o&1&&J(e,e=l[0])?(ie(),g(n,1,1,te),ae(),n=Pn(l),n.c(),_(n,1),n.m(s.parentNode,s)):n.p(l,o)},i(l){t||(_(n),t=!0)},o(l){g(n),t=!1},d(l){l&&p(s),n.d(l)}}}function Pn(r){let e;const s=r[15].default,t=at(s,r,r[14],null);return{c(){t&&t.c()},m(n,l){t&&t.m(n,l),e=!0},p(n,l){t&&t.p&&(!e||l&16384)&&ft(t,s,n,n[14],e?ct(s,n[14],l,null):ut(n[14]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function rr(r){let e,s,t=r[0]&&Nn(r);return{c(){t&&t.c(),e=Ce()},m(n,l){t&&t.m(n,l),$(n,e,l),s=!0},p(n,[l]){n[0]?t?(t.p(n,l),l&1&&_(t,1)):(t=Nn(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(ie(),g(t,1,1,()=>{t=null}),ae())},i(n){s||(_(t),s=!0)},o(n){g(t),s=!1},d(n){n&&p(e),t&&t.d(n)}}}function or(r,e,s){let t,n,{$$slots:l={},$$scope:o}=e,{id:u=rn("vector")}=e,{url:a=null}=e,{tiles:i=null}=e,{promoteId:f=null}=e,{bounds:c=null}=e,{scheme:m=null}=e,{attribution:d=null}=e,{minzoom:S=null}=e,{maxzoom:y=null}=e,{volatile:L=null}=e;if(a&&a.includes("pmtiles://")&&!_n.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let I=new ds;_n.addProtocol("pmtiles",I.tile)}const{map:M,self:O}=ss();K(r,M,I=>s(13,n=I)),K(r,O,I=>s(0,t=I));let D;return rs(()=>{t&&n&&(os(M,t,D),Ie(O,t=null,t),D=void 0)}),r.$$set=I=>{"id"in I&&s(3,u=I.id),"url"in I&&s(4,a=I.url),"tiles"in I&&s(5,i=I.tiles),"promoteId"in I&&s(6,f=I.promoteId),"bounds"in I&&s(7,c=I.bounds),"scheme"in I&&s(8,m=I.scheme),"attribution"in I&&s(9,d=I.attribution),"minzoom"in I&&s(10,S=I.minzoom),"maxzoom"in I&&s(11,y=I.maxzoom),"volatile"in I&&s(12,L=I.volatile),"$$scope"in I&&s(14,o=I.$$scope)},r.$$.update=()=>{r.$$.dirty&16377&&n&&t!==u&&(Ie(O,t=u,t),is(n,t,as({type:"vector",url:a,tiles:i,promoteId:f,bounds:c,scheme:m,attribution:d,minzoom:S,maxzoom:y,volatile:L}),I=>n&&I===t,()=>{t&&(D=n==null?void 0:n.getSource(t))})),r.$$.dirty&8200&&(n==null||n.on("style.load",()=>{D=n==null?void 0:n.getSource(u)}))},[t,M,O,u,a,i,f,c,m,d,S,y,L,n,o,l]}class _e extends V{constructor(e){super(),Q(this,e,or,rr,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function On(r,e,s){const t=r.slice();return t[11]=e[s],t[12]=e,t[13]=s,t}function ir(r){let e,s,t;return s=new tt({props:{$$slots:{default:[fr]},$$scope:{ctx:r}}}),s.$on("click",r[9]),{c(){e=C("div"),h(s.$$.fragment)},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&16384&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function ar(r){let e,s,t,n,l,o,u,a,i,f;s=new tt({props:{$$slots:{default:[ur]},$$scope:{ctx:r}}}),s.$on("click",r[4]);let c=r[2]&&In(r);l=new qe({props:{label:"Help",$$slots:{default:[cr]},$$scope:{ctx:r}}}),u=new hs({}),u.$on("click",r[3]);let m=Se(r[0]),d=[];for(let y=0;y<m.length;y+=1)d[y]=Rn(On(r,m,y));const S=y=>g(d[y],1,1,()=>{d[y]=null});return{c(){e=C("div"),h(s.$$.fragment),t=T(),c&&c.c(),n=T(),h(l.$$.fragment),o=T(),h(u.$$.fragment),a=T();for(let y=0;y<d.length;y+=1)d[y].c();i=Ce()},m(y,L){$(y,e,L),b(s,e,null),$(y,t,L),c&&c.m(y,L),$(y,n,L),b(l,y,L),$(y,o,L),b(u,y,L),$(y,a,L);for(let M=0;M<d.length;M+=1)d[M]&&d[M].m(y,L);$(y,i,L),f=!0},p(y,L){const M={};L&16384&&(M.$$scope={dirty:L,ctx:y}),s.$set(M),y[2]?c?c.p(y,L):(c=In(y),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const O={};if(L&16384&&(O.$$scope={dirty:L,ctx:y}),l.$set(O),L&65){m=Se(y[0]);let D;for(D=0;D<m.length;D+=1){const I=On(y,m,D);d[D]?(d[D].p(I,L),_(d[D],1)):(d[D]=Rn(I),d[D].c(),_(d[D],1),d[D].m(i.parentNode,i))}for(ie(),D=m.length;D<d.length;D+=1)S(D);ae()}},i(y){if(!f){_(s.$$.fragment,y),_(l.$$.fragment,y),_(u.$$.fragment,y);for(let L=0;L<m.length;L+=1)_(d[L]);f=!0}},o(y){g(s.$$.fragment,y),g(l.$$.fragment,y),g(u.$$.fragment,y),d=d.filter(Boolean);for(let L=0;L<d.length;L+=1)g(d[L]);f=!1},d(y){y&&(p(e),p(t),p(n),p(o),p(a),p(i)),k(s),c&&c.d(y),k(l,y),k(u,y),et(d,y)}}}function fr(r){let e;return{c(){e=v("Measure lines")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function ur(r){let e;return{c(){e=v("Stop measuring")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function In(r){let e,s,t=r[2].toFixed(2)+"",n,l;return{c(){e=C("p"),s=v("Length: "),n=v(t),l=v(" meters")},m(o,u){$(o,e,u),w(e,s),w(e,n),w(e,l)},p(o,u){u&4&&t!==(t=o[2].toFixed(2)+"")&&B(n,t)},d(o){o&&p(e)}}}function cr(r){let e;return{c(){e=C("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(s,t){$(s,e,t)},p:te,d(s){s&&p(e)}}}function $r(r){let e,s;return{c(){e=C("span"),s=T(),G(e,"class","dot svelte-1tzt432")},m(t,n){$(t,e,n),$(t,s,n)},p:te,d(t){t&&(p(e),p(s))}}}function Rn(r){let e,s,t;function n(u){r[7](u,r[11],r[12],r[13])}function l(){return r[8](r[13])}let o={draggable:!0,$$slots:{default:[$r]},$$scope:{ctx:r}};return r[11]!==void 0&&(o.lngLat=r[11]),e=new Ps({props:o}),U.push(()=>W(e,"lngLat",n)),e.$on("click",l),{c(){h(e.$$.fragment)},m(u,a){b(e,u,a),t=!0},p(u,a){r=u;const i={};a&16384&&(i.$$scope={dirty:a,ctx:r}),!s&&a&1&&(s=!0,i.lngLat=r[11],Y(()=>s=!1)),e.$set(i)},i(u){t||(_(e.$$.fragment,u),t=!0)},o(u){g(e.$$.fragment,u),t=!1},d(u){k(e,u)}}}function pr(r){let e,s;const t=[H("measurement-line"),{paint:{"line-color":Qe.measuringLine,"line-width":5}}];let n={};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new he({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u={};e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function mr(r){let e,s,t,n,l,o,u;const a=[ar,ir],i=[];function f(c,m){return c[1]?0:1}return e=f(r),s=i[e]=a[e](r),n=new pt({props:{data:r[0].length<2?dn():xt(r[0]),$$slots:{default:[pr]},$$scope:{ctx:r}}}),{c(){s.c(),t=T(),h(n.$$.fragment)},m(c,m){i[e].m(c,m),$(c,t,m),b(n,c,m),l=!0,o||(u=xe(window,"keydown",r[5]),o=!0)},p(c,[m]){let d=e;e=f(c),e===d?i[e].p(c,m):(ie(),g(i[d],1,1,()=>{i[d]=null}),ae(),s=i[e],s?s.p(c,m):(s=i[e]=a[e](c),s.c()),_(s,1),s.m(t.parentNode,t));const S={};m&1&&(S.data=c[0].length<2?dn():xt(c[0])),m&16384&&(S.$$scope={dirty:m,ctx:c}),n.$set(S)},i(c){l||(_(s),_(n.$$.fragment,c),l=!0)},o(c){g(s),g(n.$$.fragment,c),l=!1},d(c){c&&p(t),i[e].d(c),k(n,c),o=!1,u()}}}function _r(r,e,s){let t,n=!1,l=[];function o(S){return S.length<2?null:1e3*Ns(xt(S),{units:"kilometers"})}function u(S){s(0,l=[...l,S.detail.lngLat.toArray()])}function a(){s(1,n=!1),s(0,l=[])}function i(S){n&&S.key==="Escape"&&(S.stopPropagation(),a())}function f(S){l.splice(S,1),s(0,l)}function c(S,y,L,M){L[M]=S,s(0,l)}const m=S=>f(S),d=()=>s(1,n=!0);return r.$$.update=()=>{r.$$.dirty&1&&s(2,t=o(l))},[l,n,t,u,a,i,f,c,m,d]}class gr extends V{constructor(e){super(),Q(this,e,_r,mr,J,{})}}function dr(r){let e=new Map;for(let[t,n]of Object.entries(r.schemes))e.set(t,n);r.features=r.features.filter(t=>hr(t));let s=1;for(let t of r.features){let n=e.get(t.properties.scheme_reference);n.browse&&(t.properties.funding_programme=n.browse.funding_programme,t.properties.current_milestone=n.browse.current_milestone,t.id=s++)}return e}function hr(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}const nn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function br(r){return Ke(["get","intervention_type"],{area:Qe.area,route:Qe.route,crossing:Qe.crossing,other:Qe.other},"white")}function kr(r){return[["Areas",Qe.area],["Routes",Qe.route],["Crossings",Qe.crossing],["Other",Qe.other]]}const Z={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Ae=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function ln(){let[r,e]=cs(nn,Z.funding_programmes);return[Ke(["get","funding_programme"],r,"grey"),e]}function wr(){let r=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,s]=cs(r,Z.current_milestone);return[Ke(["get","current_milestone"],e,"grey"),s]}function cs(r,e){let s=[],t={},n=0;for(let l of r){let o=e[n++%e.length];t[l]=o,s.push([l,o])}return[t,s]}function vr(r){let e,s;return e=new Kt({props:{rows:r[1]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&2&&(l.rows=t[1]),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function yr(r){let e,s,t,n,l;function o(a){r[3](a)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new ot({props:u}),U.push(()=>W(e,"value",o)),e.$on("change",r[2]),n=new qe({props:{label:"Legend",$$slots:{default:[vr]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};!s&&i&1&&(s=!0,f.value=a[0],Y(()=>s=!1)),e.$set(f);const c={};i&66&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}function Sr(r,e,s){let t;K(r,Qt,i=>s(4,t=i));let n="fundingProgramme",[l,o]=ln();function u(){let i;n=="interventionType"?(i=br(),s(1,o=kr())):n=="fundingProgramme"?s(1,[i,o]=ln(),o):n=="currentMilestone"&&s(1,[i,o]=wr(),o),t.setPaintProperty("interventions-points","circle-color",i),t.setPaintProperty("interventions-lines","line-color",i),t.setPaintProperty("interventions-polygons","fill-color",i),t.setPaintProperty("interventions-polygons-outlines","line-color",i)}function a(i){n=i,s(0,n)}return[n,o,u,a]}class Cr extends V{constructor(e){super(),Q(this,e,Sr,yr,J,{})}}const At=mt({type:"FeatureCollection",features:[],schemes:{}}),Yt=mt(new Map),Dn=mt(!0),jt=mt(""),Ht=mt("");function Lr(r){let e;return{c(){e=v("Reset all filters")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Tr(r){let e;return{c(){e=v("Clear")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Mr(r){let e,s,t,n,l,o;return t=new tt({props:{$$slots:{default:[Tr]},$$scope:{ctx:r}}}),t.$on("click",r[19]),{c(){e=C("input"),s=T(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,a){$(u,e,a),Ve(e,r[7]),$(u,s,a),b(t,u,a),n=!0,l||(o=xe(e,"input",r[18]),l=!0)},p(u,a){a&128&&e.value!==u[7]&&Ve(e,u[7]);const i={};a&134217728&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){n||(_(t.$$.fragment,u),n=!0)},o(u){g(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(s)),k(t,u),l=!1,o()}}}function Nr(r){let e;return{c(){e=v("Clear")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Pr(r){let e,s,t,n,l,o;return t=new tt({props:{$$slots:{default:[Nr]},$$scope:{ctx:r}}}),t.$on("click",r[21]),{c(){e=C("input"),s=T(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,a){$(u,e,a),Ve(e,r[6]),$(u,s,a),b(t,u,a),n=!0,l||(o=xe(e,"input",r[20]),l=!0)},p(u,a){a&64&&e.value!==u[6]&&Ve(e,u[6]);const i={};a&134217728&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){n||(_(t.$$.fragment,u),n=!0)},o(u){g(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(s)),k(t,u),l=!1,o()}}}function Or(r){let e,s,t,n,l,o,u,a,i,f,c,m,d,S,y,L,M,O,D,I;e=new tt({props:{$$slots:{default:[Lr]},$$scope:{ctx:r}}}),e.$on("click",r[13]);function N(A){r[14](A)}let R={label:"Authority or region",choices:r[8],emptyOption:!0};r[2]!==void 0&&(R.value=r[2]),t=new ot({props:R}),U.push(()=>W(t,"value",N));function F(A){r[15](A)}let P={label:"Funding programme",choices:r[9],emptyOption:!0};r[3]!==void 0&&(P.value=r[3]),o=new ot({props:P}),U.push(()=>W(o,"value",F));function z(A){r[16](A)}let X={label:"Current milestone",choices:r[10],emptyOption:!0};r[4]!==void 0&&(X.value=r[4]),i=new ot({props:X}),U.push(()=>W(i,"value",z));function E(A){r[17](A)}let q={label:"Sketch source",choices:r[12],emptyOption:!0};return r[5]!==void 0&&(q.value=r[5]),m=new ot({props:q}),U.push(()=>W(m,"value",E)),y=new gn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Mr]},$$scope:{ctx:r}}}),M=new gn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Pr]},$$scope:{ctx:r}}}),D=new Cr({}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment),a=T(),h(i.$$.fragment),c=T(),h(m.$$.fragment),S=T(),h(y.$$.fragment),L=T(),h(M.$$.fragment),O=T(),h(D.$$.fragment)},m(A,j){b(e,A,j),$(A,s,j),b(t,A,j),$(A,l,j),b(o,A,j),$(A,a,j),b(i,A,j),$(A,c,j),b(m,A,j),$(A,S,j),b(y,A,j),$(A,L,j),b(M,A,j),$(A,O,j),b(D,A,j),I=!0},p(A,j){const $e={};j&134217728&&($e.$$scope={dirty:j,ctx:A}),e.$set($e);const Le={};j&256&&(Le.choices=A[8]),!n&&j&4&&(n=!0,Le.value=A[2],Y(()=>n=!1)),t.$set(Le);const Te={};j&512&&(Te.choices=A[9]),!u&&j&8&&(u=!0,Te.value=A[3],Y(()=>u=!1)),o.$set(Te);const ve={};j&1024&&(ve.choices=A[10]),!f&&j&16&&(f=!0,ve.value=A[4],Y(()=>f=!1)),i.$set(ve);const Ne={};!d&&j&32&&(d=!0,Ne.value=A[5],Y(()=>d=!1)),m.$set(Ne);const de={};j&134217856&&(de.$$scope={dirty:j,ctx:A}),y.$set(de);const je={};j&134217792&&(je.$$scope={dirty:j,ctx:A}),M.$set(je)},i(A){I||(_(e.$$.fragment,A),_(t.$$.fragment,A),_(o.$$.fragment,A),_(i.$$.fragment,A),_(m.$$.fragment,A),_(y.$$.fragment,A),_(M.$$.fragment,A),_(D.$$.fragment,A),I=!0)},o(A){g(e.$$.fragment,A),g(t.$$.fragment,A),g(o.$$.fragment,A),g(i.$$.fragment,A),g(m.$$.fragment,A),g(y.$$.fragment,A),g(M.$$.fragment,A),g(D.$$.fragment,A),I=!1},d(A){A&&(p(s),p(l),p(a),p(c),p(S),p(L),p(O)),k(e,A),k(t,A),k(o,A),k(i,A),k(m,A),k(y,A),k(M,A),k(D,A)}}}function Ir(r){let e,s=r[0].size.toLocaleString()+"",t,n,l=r[11].route.toLocaleString()+"",o,u,a=r[11].area.toLocaleString()+"",i,f,c=r[11].crossing.toLocaleString()+"",m,d,S=r[11].other.toLocaleString()+"",y,L,M=An(r[11].totalLength).toFixed(1)+"",O,D;return{c(){e=v("Showing "),t=v(s),n=v(" schemes ("),o=v(l),u=v(`
    routes, `),i=v(a),f=v(` areas,
    `),m=v(c),d=v(" crossings, "),y=v(S),L=v(`
    other, with total LineString length of `),O=v(M),D=v(" miles)")},m(I,N){$(I,e,N),$(I,t,N),$(I,n,N),$(I,o,N),$(I,u,N),$(I,i,N),$(I,f,N),$(I,m,N),$(I,d,N),$(I,y,N),$(I,L,N),$(I,O,N),$(I,D,N)},p(I,N){N&1&&s!==(s=I[0].size.toLocaleString()+"")&&B(t,s),N&2048&&l!==(l=I[11].route.toLocaleString()+"")&&B(o,l),N&2048&&a!==(a=I[11].area.toLocaleString()+"")&&B(i,a),N&2048&&c!==(c=I[11].crossing.toLocaleString()+"")&&B(m,c),N&2048&&S!==(S=I[11].other.toLocaleString()+"")&&B(y,S),N&2048&&M!==(M=An(I[11].totalLength).toFixed(1)+"")&&B(O,M)},d(I){I&&(p(e),p(t),p(n),p(o),p(u),p(i),p(f),p(m),p(d),p(y),p(L),p(O),p(D))}}}function Rr(r){let e,s,t;function n(o){r[22](o)}let l={$$slots:{default:[Ir]},$$scope:{ctx:r}};return r[1]!==void 0&&(l.checked=r[1]),e=new se({props:l}),U.push(()=>W(e,"checked",n)),{c(){h(e.$$.fragment)},m(o,u){b(e,o,u),t=!0},p(o,u){const a={};u&134219777&&(a.$$scope={dirty:u,ctx:o}),!s&&u&2&&(s=!0,a.checked=o[1],Y(()=>s=!1)),e.$set(a)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function Dr(r){let e,s,t,n;return e=new qe({props:{label:"Filters",$$slots:{default:[Or]},$$scope:{ctx:r}}}),t=new nt({props:{small:!0,$$slots:{default:[Rr]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(l,o){b(e,l,o),$(l,s,o),b(t,l,o),n=!0},p(l,[o]){const u={};o&134219772&&(u.$$scope={dirty:o,ctx:l}),e.$set(u);const a={};o&134219779&&(a.$$scope={dirty:o,ctx:l}),t.$set(a)},i(l){n||(_(e.$$.fragment,l),_(t.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),g(t.$$.fragment,l),n=!1},d(l){l&&p(s),k(e,l),k(t,l)}}}function An(r){return r*621371e-9}function Ar(r,e,s){let t,n,l,o;K(r,Ht,j=>s(6,t=j)),K(r,jt,j=>s(7,n=j)),K(r,At,j=>s(23,l=j)),K(r,Yt,j=>s(24,o=j));let{schemesToBeShown:u=new Set}=e,{show:a=!0}=e,i=[],f="",c=[],m=new Set(nn.slice(0,-1)),d="",S=[],y="",L=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],M="",O={area:0,route:0,crossing:0,other:0,totalLength:0};on(()=>{var Te,ve,Ne;let j=new Set,$e=new Set,Le=new Set;for(let de of o.values())(Te=de.browse)!=null&&Te.authority_or_region&&j.add(de.browse.authority_or_region),(ve=de.browse)!=null&&ve.funding_programme&&$e.add(de.browse.funding_programme),(Ne=de.browse)!=null&&Ne.current_milestone&&Le.add(de.browse.current_milestone);s(8,i=Array.from(j.entries())),i.sort(),s(9,c=nn.map(de=>[de,de])),s(10,S=Array.from(Le.entries())),S.sort()});function D(j,$e,Le,Te,ve,Ne){let de=$e.toLowerCase(),je=Le.toLowerCase(),Fe=ue=>{var ge,ye,Me,we,Ft,qt,zt;if(de&&!((ge=ue.properties.name)!=null&&ge.toLowerCase().includes(de))&&!((ye=ue.properties.description)!=null&&ye.toLowerCase().includes(de)))return!1;if(j||je||Te||ve||Ne){let He=o.get(ue.properties.scheme_reference);if(Te&&((Me=He.browse)==null?void 0:Me.authority_or_region)!=Te||ve&&ve!=="Other"&&((we=He.browse)==null?void 0:we.funding_programme)!=ve||ve==="Other"&&m.has(((Ft=He.browse)==null?void 0:Ft.funding_programme)??"")||Ne&&((qt=He.browse)==null?void 0:qt.current_milestone)!=Ne||je&&!He.scheme_reference.toLowerCase().includes(je)&&!(He.scheme_name??"").toLowerCase().includes(je)||j&&j!=="Both"&&j!==((zt=He.browse)==null?void 0:zt.sketch_source))return!1}return!0};s(0,u=new Set(l.features.filter(Fe).map(ue=>ue.properties.scheme_reference))),s(11,O={area:0,route:0,crossing:0,other:0,totalLength:0});let Pe=ue=>{var ge,ye;return!(!u.has(ue.properties.scheme_reference)||de&&!((ge=ue.properties.name)!=null&&ge.toLowerCase().includes(de))&&!((ye=ue.properties.description)!=null&&ye.toLowerCase().includes(de)))};for(let ue of l.features)Pe(ue)?(delete ue.properties.hide_while_editing,s(11,O[ue.properties.intervention_type]++,O),ue.geometry.type=="LineString"&&ue.properties.length_meters&&s(11,O.totalLength+=ue.properties.length_meters,O)):ue.properties.hide_while_editing=!0;At.set(l),s(11,O)}function I(){s(5,M=""),s(2,f=""),s(3,d=""),s(4,y=""),Ie(jt,n="",n),Ie(Ht,t="",t)}function N(j){f=j,s(2,f)}function R(j){d=j,s(3,d)}function F(j){y=j,s(4,y)}function P(j){M=j,s(5,M)}function z(){n=this.value,jt.set(n)}const X=()=>Ie(jt,n="",n);function E(){t=this.value,Ht.set(t)}const q=()=>Ie(Ht,t="",t);function A(j){a=j,s(1,a)}return r.$$set=j=>{"schemesToBeShown"in j&&s(0,u=j.schemesToBeShown),"show"in j&&s(1,a=j.show)},r.$$.update=()=>{r.$$.dirty&252&&D(M,n,t,f,d,y)},[u,a,f,d,y,M,t,n,i,c,S,O,L,I,N,R,F,P,z,X,E,q,A]}class Fr extends V{constructor(e){super(),Q(this,e,Ar,Dr,J,{schemesToBeShown:0,show:1})}}function qr(r){let e;return{c(){e=v(`Open Government License
  `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function zr(r){let e,s,t,n,l;return t=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[qr]},$$scope:{ctx:r}}}),{c(){e=C("p"),s=v("License: "),h(t.$$.fragment),n=v(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(o,u){$(o,e,u),w(e,s),b(t,e,null),w(e,n),l=!0},p(o,[u]){const a={};u&1&&(a.$$scope={dirty:u,ctx:o}),t.$set(a)},i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&p(e),k(t)}}}class De extends V{constructor(e){super(),Q(this,e,null,zr,J,{})}}function Fn(r,e,s){const t=r.slice();return t[2]=e[s],t}function qn(r,e,s){const t=r.slice();return t[5]=e[s],t}function zn(r){let e,s;return{c(){e=C("span"),s=v(`Â 
    `),me(e,"background",r[5]),me(e,"width","100%"),me(e,"border","1px solid black")},m(t,n){$(t,e,n),w(e,s)},p(t,n){n&1&&me(e,"background",t[5])},d(t){t&&p(e)}}}function Bn(r){let e,s=r[2]+"",t;return{c(){e=C("span"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&2&&s!==(s=n[2]+"")&&B(t,s)},d(n){n&&p(e)}}}function Br(r){let e,s,t,n=Se(r[0]),l=[];for(let a=0;a<n.length;a+=1)l[a]=zn(qn(r,n,a));let o=Se(r[1]),u=[];for(let a=0;a<o.length;a+=1)u[a]=Bn(Fn(r,o,a));return{c(){e=C("div");for(let a=0;a<l.length;a+=1)l[a].c();s=T(),t=C("div");for(let a=0;a<u.length;a+=1)u[a].c();me(e,"display","flex"),me(t,"display","flex"),me(t,"justify-content","space-between")},m(a,i){$(a,e,i);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(e,null);$(a,s,i),$(a,t,i);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(a,[i]){if(i&1){n=Se(a[0]);let f;for(f=0;f<n.length;f+=1){const c=qn(a,n,f);l[f]?l[f].p(c,i):(l[f]=zn(c),l[f].c(),l[f].m(e,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=n.length}if(i&2){o=Se(a[1]);let f;for(f=0;f<o.length;f+=1){const c=Fn(a,o,f);u[f]?u[f].p(c,i):(u[f]=Bn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}},i:te,o:te,d(a){a&&(p(e),p(s),p(t)),et(l,a),et(u,a)}}}function jr(r,e,s){let{colorScale:t}=e,{limits:n}=e;return r.$$set=l=>{"colorScale"in l&&s(0,t=l.colorScale),"limits"in l&&s(1,n=l.limits)},[t,n]}class Be extends V{constructor(e){super(),Q(this,e,jr,Br,J,{colorScale:0,limits:1})}}function ke(r){let e=new URLSearchParams(window.location.search).has(r),s=mt(e);return s.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(r,"1"):n.searchParams.delete(r),window.history.replaceState(null,"",n.toString())}),s}function _t(r,e,s,t){let n=e,l=new URLSearchParams(window.location.search).get(r);if(l!=null)try{n=t(l)}catch(u){console.warn(`Parsing URL parameter ${r}=${l} failed, using default value: ${u}`)}let o=mt(n);return o.subscribe(u=>{let a=new URL(window.location.href),i=s(u);i==null?a.searchParams.delete(r):a.searchParams.set(r,i),window.history.replaceState(null,"",a.toString())}),o}function jn(r){const e=r[14].OA21CD;r[15]=e;const s=r[14][r[3].kind];r[16]=s}function Hr(r){let e;return{c(){e=v("Percent of households with a car")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Gr(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Er(r){let e;return{c(){e=v(`ONS Geography
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Ur(r){let e;return{c(){e=v(`Open Government License
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Wr(r){let e,s,t,n,l,o,u,a,i,f,c,m;return t=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Gr]},$$scope:{ctx:r}}}),l=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Er]},$$scope:{ctx:r}}}),f=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ur]},$$scope:{ctx:r}}}),{c(){e=C("p"),s=v("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),n=v(". Output area boundaries from "),h(l.$$.fragment),o=v("."),u=T(),a=C("p"),i=v("License: "),h(f.$$.fragment),c=v(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(d,S){$(d,e,S),w(e,s),b(t,e,null),w(e,n),b(l,e,null),w(e,o),$(d,u,S),$(d,a,S),w(a,i),b(f,a,null),w(a,c),m=!0},p(d,S){const y={};S&131072&&(y.$$scope={dirty:S,ctx:d}),t.$set(y);const L={};S&131072&&(L.$$scope={dirty:S,ctx:d}),l.$set(L);const M={};S&131072&&(M.$$scope={dirty:S,ctx:d}),f.$set(M)},i(d){m||(_(t.$$.fragment,d),_(l.$$.fragment,d),_(f.$$.fragment,d),m=!0)},o(d){g(t.$$.fragment,d),g(l.$$.fragment,d),g(f.$$.fragment,d),m=!1},d(d){d&&(p(e),p(u),p(a)),k(t),k(l),k(f)}}}function Yr(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Wr]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&131072&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Hn(r){let e,s;return e=new Be({props:{colorScale:r[4],limits:st(r[3].kind)}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&8&&(l.limits=st(t[3].kind)),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Jr(r){let e;return{c(){e=v("Average cars per household")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Vr(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Qr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Kr(r){let e;return{c(){e=v(`Open Government License
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Zr(r){let e,s,t,n,l,o,u,a,i,f,c,m,d,S;return l=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Vr]},$$scope:{ctx:r}}}),u=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Qr]},$$scope:{ctx:r}}}),m=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Kr]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,s=T(),t=C("p"),n=v("Car/van availability data is from the 2021 census, via "),h(l.$$.fragment),o=v(". Output area boundaries from "),h(u.$$.fragment),a=v("."),i=T(),f=C("p"),c=v("License: "),h(m.$$.fragment),d=v(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(y,L){$(y,e,L),$(y,s,L),$(y,t,L),w(t,n),b(l,t,null),w(t,o),b(u,t,null),w(t,a),$(y,i,L),$(y,f,L),w(f,c),b(m,f,null),w(f,d),S=!0},p(y,L){const M={};L&131072&&(M.$$scope={dirty:L,ctx:y}),l.$set(M);const O={};L&131072&&(O.$$scope={dirty:L,ctx:y}),u.$set(O);const D={};L&131072&&(D.$$scope={dirty:L,ctx:y}),m.$set(D)},i(y){S||(_(l.$$.fragment,y),_(u.$$.fragment,y),_(m.$$.fragment,y),S=!0)},o(y){g(l.$$.fragment,y),g(u.$$.fragment,y),g(m.$$.fragment,y),S=!1},d(y){y&&(p(e),p(s),p(t),p(i),p(f)),k(l),k(u),k(m)}}}function Xr(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Zr]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&131072&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Gn(r){let e,s;return e=new Be({props:{colorScale:r[4],limits:st(r[3].kind)}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&8&&(l.limits=st(t[3].kind)),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function xr(r){let e;return{c(){e=v("Population density")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function eo(r){let e;return{c(){e=v(`NOMIS TS006
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function to(r){let e;return{c(){e=v(`ONS Geography
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function no(r){let e,s,t,n,l,o,u,a,i;return t=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[eo]},$$scope:{ctx:r}}}),l=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[to]},$$scope:{ctx:r}}}),a=new De({}),{c(){e=C("p"),s=v("Population density data is from the 2021 census, via "),h(t.$$.fragment),n=v(". Output area boundaries from "),h(l.$$.fragment),o=v("."),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,s),b(t,e,null),w(e,n),b(l,e,null),w(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&131072&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const d={};c&131072&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){i||(_(t.$$.fragment,f),_(l.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(t.$$.fragment,f),g(l.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),k(t),k(l),k(a,f)}}}function lo(r){let e,s,t;return s=new ce({props:{$$slots:{default:[no]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&131072&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function En(r){let e,s,t,n;return t=new Be({props:{colorScale:r[4],limits:st(r[3].kind).map(Un)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",s=T(),h(t.$$.fragment)},m(l,o){$(l,e,o),$(l,s,o),b(t,l,o),n=!0},p(l,o){const u={};o&8&&(u.limits=st(l[3].kind).map(Un)),t.$set(u)},i(l){n||(_(t.$$.fragment,l),n=!0)},o(l){g(t.$$.fragment,l),n=!1},d(l){l&&(p(e),p(s)),k(t,l)}}}function so(r){let e,s,t,n=r[16].toLocaleString()+"",l,o,u=r[15]+"",a;return{c(){e=C("p"),s=v("There are "),t=C("b"),l=v(n),o=v(`
          people per square kilometre in `),a=v(u)},m(i,f){$(i,e,f),w(e,s),w(e,t),w(t,l),w(e,o),w(e,a)},p(i,f){f&16392&&n!==(n=i[16].toLocaleString()+"")&&B(l,n),f&16384&&u!==(u=i[15]+"")&&B(a,u)},d(i){i&&p(e)}}}function ro(r){let e,s,t=r[15]+"",n,l,o,u=r[16]+"",a,i;return{c(){e=C("p"),s=v("Households in "),n=v(t),l=v(` have an average of
          `),o=C("b"),a=v(u),i=v(`
          cars`)},m(f,c){$(f,e,c),w(e,s),w(e,n),w(e,l),w(e,o),w(o,a),w(e,i)},p(f,c){c&16384&&t!==(t=f[15]+"")&&B(n,t),c&16392&&u!==(u=f[16]+"")&&B(a,u)},d(f){f&&p(e)}}}function oo(r){let e,s,t=r[16]+"",n,l,o,u=r[15]+"",a,i;return{c(){e=C("p"),s=C("b"),n=v(t),l=v("%"),o=v(`
          of households in `),a=v(u),i=v(" have 1 or more cars")},m(f,c){$(f,e,c),w(e,s),w(s,n),w(s,l),w(e,o),w(e,a),w(e,i)},p(f,c){c&16392&&t!==(t=f[16]+"")&&B(n,t),c&16384&&u!==(u=f[15]+"")&&B(a,u)},d(f){f&&p(e)}}}function io(r){jn(r);let e;function s(l,o){return l[3].kind=="percent_households_with_car"?oo:l[3].kind=="average_cars_per_household"?ro:so}let t=s(r),n=t(r);return{c(){n.c(),e=Ce()},m(l,o){n.m(l,o),$(l,e,o)},p(l,o){jn(l),t===(t=s(l))&&n?n.p(l,o):(n.d(1),n=t(l),n&&(n.c(),n.m(e.parentNode,e)))},d(l){l&&p(e),n.d(l)}}}function ao(r){let e,s;return e=new oe({props:{$$slots:{default:[io,({props:t})=>({14:t}),({props:t})=>t?16384:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&147464&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function fo(r){let e,s,t,n;const l=[H(Ge),{sourceLayer:Ge},{paint:{"fill-color":be(["get",r[3].kind],st(r[3].kind),r[4]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:r[3].kind!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[ao]},$$scope:{ctx:r}};for(let i=0;i<l.length;i+=1)o=ne(o,l[i]);e=new ze({props:o}),e.$on("click",r[6]);const u=[H(`${Ge}-outline`),{sourceLayer:Ge},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3].kind!=""?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ne(a,u[i]);return t=new he({props:a}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,s,f),b(t,i,f),n=!0},p(i,f){const c=f&24?le(l,[f&0&&re(H(Ge)),f&0&&{sourceLayer:Ge},f&24&&{paint:{"fill-color":be(["get",i[3].kind],st(i[3].kind),i[4]),"fill-opacity":ee(.5,.7)}},f&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}},l[4],l[5],l[6]]):{};f&131080&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&8?le(u,[f&0&&re(H(`${Ge}-outline`)),f&0&&{sourceLayer:Ge},u[2],f&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(s),k(e,i),k(t,i)}}}function uo(r){let e,s,t,n,l,o,u,a,i,f,c,m,d,S;function y(P){r[7](P)}let L={$$slots:{right:[Yr],default:[Hr]},$$scope:{ctx:r}};r[0]!==void 0&&(L.checked=r[0]),e=new se({props:L}),U.push(()=>W(e,"checked",y)),e.$on("change",r[8]);let M=r[3].kind=="percent_households_with_car"&&Hn(r);function O(P){r[9](P)}let D={$$slots:{right:[Xr],default:[Jr]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),l=new se({props:D}),U.push(()=>W(l,"checked",O)),l.$on("change",r[10]);let I=r[3].kind=="average_cars_per_household"&&Gn(r);function N(P){r[11](P)}let R={$$slots:{right:[lo],default:[xr]},$$scope:{ctx:r}};r[2]!==void 0&&(R.checked=r[2]),i=new se({props:R}),U.push(()=>W(i,"checked",N)),i.$on("change",r[12]);let F=r[3].kind=="population_density"&&En(r);return d=new _e({props:{url:`pmtiles://${pe()}/v1/${Ge}.pmtiles`,$$slots:{default:[fo]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),M&&M.c(),n=T(),h(l.$$.fragment),u=T(),I&&I.c(),a=T(),h(i.$$.fragment),c=T(),F&&F.c(),m=T(),h(d.$$.fragment)},m(P,z){b(e,P,z),$(P,t,z),M&&M.m(P,z),$(P,n,z),b(l,P,z),$(P,u,z),I&&I.m(P,z),$(P,a,z),b(i,P,z),$(P,c,z),F&&F.m(P,z),$(P,m,z),b(d,P,z),S=!0},p(P,[z]){const X={};z&131072&&(X.$$scope={dirty:z,ctx:P}),!s&&z&1&&(s=!0,X.checked=P[0],Y(()=>s=!1)),e.$set(X),P[3].kind=="percent_households_with_car"?M?(M.p(P,z),z&8&&_(M,1)):(M=Hn(P),M.c(),_(M,1),M.m(n.parentNode,n)):M&&(ie(),g(M,1,1,()=>{M=null}),ae());const E={};z&131072&&(E.$$scope={dirty:z,ctx:P}),!o&&z&2&&(o=!0,E.checked=P[1],Y(()=>o=!1)),l.$set(E),P[3].kind=="average_cars_per_household"?I?(I.p(P,z),z&8&&_(I,1)):(I=Gn(P),I.c(),_(I,1),I.m(a.parentNode,a)):I&&(ie(),g(I,1,1,()=>{I=null}),ae());const q={};z&131072&&(q.$$scope={dirty:z,ctx:P}),!f&&z&4&&(f=!0,q.checked=P[2],Y(()=>f=!1)),i.$set(q),P[3].kind=="population_density"?F?(F.p(P,z),z&8&&_(F,1)):(F=En(P),F.c(),_(F,1),F.m(m.parentNode,m)):F&&(ie(),g(F,1,1,()=>{F=null}),ae());const A={};z&131080&&(A.$$scope={dirty:z,ctx:P}),d.$set(A)},i(P){S||(_(e.$$.fragment,P),_(M),_(l.$$.fragment,P),_(I),_(i.$$.fragment,P),_(F),_(d.$$.fragment,P),S=!0)},o(P){g(e.$$.fragment,P),g(M),g(l.$$.fragment,P),g(I),g(i.$$.fragment,P),g(F),g(d.$$.fragment,P),S=!1},d(P){P&&(p(t),p(n),p(u),p(a),p(c),p(m)),k(e,P),M&&M.d(P),k(l,P),I&&I.d(P),k(i,P),F&&F.d(P),k(d,P)}}}let Ge="census_output_areas";function co(r){return r.show?r.kind:null}function $o(r){return{show:!0,kind:r}}function st(r){return r=="percent_households_with_car"?[0,20,40,60,80,100]:r=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const Un=r=>r.toLocaleString();function po(r,e,s){let t,n=Z.sequential_low_to_high,o=_t(Ge,{show:!1,kind:""},co,$o);K(r,o,M=>s(3,t=M));let u=t.kind=="percent_households_with_car",a=t.kind=="average_cars_per_household",i=t.kind=="population_density";function f(M){let O=M.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${O}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${O}`,"_blank")}function c(M){u=M,s(0,u)}const m=()=>{s(1,a=!1),s(2,i=!1)};function d(M){a=M,s(1,a)}const S=()=>{s(0,u=!1),s(2,i=!1)};function y(M){i=M,s(2,i)}const L=()=>{s(0,u=!1),s(1,a=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(u?(Ie(o,t.show=!0,t),Ie(o,t.kind="percent_households_with_car",t)):a?(Ie(o,t.show=!0,t),Ie(o,t.kind="average_cars_per_household",t)):i?(Ie(o,t.show=!0,t),Ie(o,t.kind="population_density",t)):(Ie(o,t.show=!1,t),Ie(o,t.kind="",t)))},[u,a,i,t,n,o,f,c,m,d,S,y,L]}class mo extends V{constructor(e){super(),Q(this,e,po,uo,J,{})}}function _o(r){let e,s,t;return e=new Re({props:{color:r[1]}}),{c(){h(e.$$.fragment),s=v(`
  Combined authorities`)},m(n,l){b(e,n,l),$(n,s,l),t=!0},p:te,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(s),k(e,n)}}}function go(r){let e;return{c(){e=v(`ONS Geography
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function ho(r){let e,s,t,n,l,o,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[go]},$$scope:{ctx:r}}}),o=new De({}),{c(){e=C("p"),s=v("Data from "),h(t.$$.fragment),n=v(", as of December 2022."),l=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,s),b(t,e,null),w(e,n),$(a,l,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(l)),k(t),k(o,a)}}}function bo(r){let e,s,t;return s=new ce({props:{$$slots:{default:[ho]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function ko(r){let e,s=r[4].name+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&16&&s!==(s=n[4].name+"")&&B(t,s)},d(n){n&&p(e)}}}function wo(r){let e,s;return e=new oe({props:{$$slots:{default:[ko,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&48&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function vo(r){let e,s,t,n;const l=[H(dt),{paint:{"fill-color":r[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[wo]},$$scope:{ctx:r}};for(let i=0;i<l.length;i+=1)o=ne(o,l[i]);e=new ze({props:o}),e.$on("click",So);const u=[H(`${dt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ne(a,u[i]);return t=new he({props:a}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,s,f),b(t,i,f),n=!0},p(i,f){const c=f&3?le(l,[f&0&&re(H(dt)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":ee(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},l[3],l[4],l[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?le(u,[f&0&&re(H(`${dt}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(s),k(e,i),k(t,i)}}}function yo(r){let e,s,t,n,l;function o(a){r[3](a)}let u={$$slots:{right:[bo],default:[_o]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),U.push(()=>W(e,"checked",o)),n=new pt({props:{data:`${pe()}/v1/${dt}.geojson`,$$slots:{default:[vo]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!s&&i&1&&(s=!0,f.checked=a[0],Y(()=>s=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let dt="combined_authorities";function So(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Co(r,e,s){let t,n=Z.combined_authorities,l=ke(dt);K(r,l,u=>s(0,t=u));function o(u){t=u,l.set(t)}return[t,n,l,o]}class Lo extends V{constructor(e){super(),Q(this,e,Co,yo,J,{})}}function To(r){let e;return{c(){e=v("Indices of Multiple Deprivation")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Mo(r){let e;return{c(){e=v(`DLUCH GIS
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function No(r){let e;return{c(){e=v(`here
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Po(r){let e,s,t,n,l,o,u,a,i;return t=new x({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Mo]},$$scope:{ctx:r}}}),l=new x({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[No]},$$scope:{ctx:r}}}),a=new De({}),{c(){e=C("p"),s=v("The 2019 English IMD scores come from "),h(t.$$.fragment),n=v(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(l.$$.fragment),o=v("."),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,s),b(t,e,null),w(e,n),b(l,e,null),w(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const d={};c&64&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){i||(_(t.$$.fragment,f),_(l.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(t.$$.fragment,f),g(l.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),k(t),k(l),k(a,f)}}}function Oo(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Po]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&64&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Wn(r){let e,s;return e=new Be({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p:te,i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Io(r){let e,s=r[5].LSOA11CD+"",t,n,l,o=r[5].score+"",u,a,i,f,c,m=r[5].rank.toLocaleString()+"",d,S;return{c(){e=C("p"),t=v(s),n=v(` has an IMD score of
        `),l=C("b"),u=v(o),a=T(),i=C("p"),f=v("Rank: "),c=C("b"),d=v(m),S=v(`
        / 32,844 LSOAs`)},m(y,L){$(y,e,L),w(e,t),w(e,n),w(e,l),w(l,u),$(y,a,L),$(y,i,L),w(i,f),w(i,c),w(c,d),w(i,S)},p(y,L){L&32&&s!==(s=y[5].LSOA11CD+"")&&B(t,s),L&32&&o!==(o=y[5].score+"")&&B(u,o),L&32&&m!==(m=y[5].rank.toLocaleString()+"")&&B(d,m)},d(y){y&&(p(e),p(a),p(i))}}}function Ro(r){let e,s;return e=new oe({props:{$$slots:{default:[Io,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&96&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Do(r){let e,s,t,n;const l=[H(Ee),{sourceLayer:Ee},{paint:{"fill-color":be(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[Ro]},$$scope:{ctx:r}};for(let i=0;i<l.length;i+=1)o=ne(o,l[i]);e=new ze({props:o});const u=[H(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ne(a,u[i]);return t=new he({props:a}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,s,f),b(t,i,f),n=!0},p(i,f){const c=f&7?le(l,[f&0&&re(H(Ee)),f&0&&{sourceLayer:Ee},f&6&&{paint:{"fill-color":be(["-",10,["get","decile"]],i[2],i[1]),"fill-opacity":ee(.5,.7)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},l[4],l[5]]):{};f&64&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&1?le(u,[f&0&&re(H(`${Ee}-outline`)),f&0&&{sourceLayer:Ee},u[2],f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(s),k(e,i),k(t,i)}}}function Ao(r){let e,s,t,n,l,o;function u(f){r[4](f)}let a={$$slots:{right:[Oo],default:[To]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&Wn(r);return l=new _e({props:{url:`pmtiles://${pe()}/v1/${Ee}.pmtiles`,$$slots:{default:[Do]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0],Y(()=>s=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=Wn(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}let Ee="imd";function Fo(r,e,s){let t,n=Z.sequential_low_to_high,l=[0,2,4,6,8,10],o=ke(Ee);K(r,o,a=>s(0,t=a));function u(a){t=a,o.set(t)}return[t,n,l,o,u]}class qo extends V{constructor(e){super(),Q(this,e,Fo,Ao,J,{})}}function zo(r){let e,s,t;return e=new Re({props:{color:r[1]}}),{c(){h(e.$$.fragment),s=v(`
  Local Authority Districts`)},m(n,l){b(e,n,l),$(n,s,l),t=!0},p:te,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(s),k(e,n)}}}function Bo(r){let e;return{c(){e=v(`ONS Geography
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function jo(r){let e,s,t,n,l,o,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Bo]},$$scope:{ctx:r}}}),o=new De({}),{c(){e=C("p"),s=v("Data from "),h(t.$$.fragment),n=v(", as of January 2024."),l=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,s),b(t,e,null),w(e,n),$(a,l,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(l)),k(t),k(o,a)}}}function Ho(r){let e,s,t;return s=new ce({props:{$$slots:{default:[jo]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Go(r){let e,s=r[4].name+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&16&&s!==(s=n[4].name+"")&&B(t,s)},d(n){n&&p(e)}}}function Eo(r){let e,s;return e=new oe({props:{$$slots:{default:[Go,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&48&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Uo(r){let e,s,t,n;const l=[H(ht),{paint:{"fill-color":r[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Eo]},$$scope:{ctx:r}};for(let i=0;i<l.length;i+=1)o=ne(o,l[i]);e=new ze({props:o}),e.$on("click",Yo);const u=[H(`${ht}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ne(a,u[i]);return t=new he({props:a}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,s,f),b(t,i,f),n=!0},p(i,f){const c=f&3?le(l,[f&0&&re(H(ht)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":ee(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},l[3],l[4],l[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?le(u,[f&0&&re(H(`${ht}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(s),k(e,i),k(t,i)}}}function Wo(r){let e,s,t,n,l;function o(a){r[3](a)}let u={$$slots:{right:[Ho],default:[zo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),U.push(()=>W(e,"checked",o)),n=new pt({props:{data:`${pe()}/v1/${ht}.geojson`,$$slots:{default:[Uo]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!s&&i&1&&(s=!0,f.checked=a[0],Y(()=>s=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let ht="local_authority_districts";function Yo(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Jo(r,e,s){let t,n=Z.local_authority_districts,l=ke(ht);K(r,l,u=>s(0,t=u));function o(u){t=u,l.set(t)}return[t,n,l,o]}class Vo extends V{constructor(e){super(),Q(this,e,Jo,Wo,J,{})}}function Qo(r){let e,s,t;return e=new Re({props:{color:r[1]}}),{c(){h(e.$$.fragment),s=v(`
  Local Planning Authorities`)},m(n,l){b(e,n,l),$(n,s,l),t=!0},p:te,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(s),k(e,n)}}}function Ko(r){let e;return{c(){e=v(`local authority
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Zo(r){let e;return{c(){e=v(`national park authorit
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Xo(r){let e;return{c(){e=v(`development corporation
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function xo(r){let e;return{c(){e=v("this map")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function ei(r){let e;return{c(){e=v(`planning.data.gov.uk
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function ti(r){let e,s,t,n,l,o,u,a,i,f,c,m,d,S,y,L,M,O,D,I,N,R;return t=new x({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ko]},$$scope:{ctx:r}}}),l=new x({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Zo]},$$scope:{ctx:r}}}),u=new x({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Xo]},$$scope:{ctx:r}}}),d=new x({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[xo]},$$scope:{ctx:r}}}),O=new x({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ei]},$$scope:{ctx:r}}}),N=new De({}),{c(){e=C("p"),s=v("LPAs may be a "),h(t.$$.fragment),n=v(", "),h(l.$$.fragment),o=v("y, or "),h(u.$$.fragment),a=v("."),i=T(),f=C("p"),c=C("strong"),m=v(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),S=v(" to get more details."),y=T(),L=C("p"),M=v("Data from ONS Geography via "),h(O.$$.fragment),D=v(", as of November 2022."),I=T(),h(N.$$.fragment)},m(F,P){$(F,e,P),w(e,s),b(t,e,null),w(e,n),b(l,e,null),w(e,o),b(u,e,null),w(e,a),$(F,i,P),$(F,f,P),w(f,c),w(c,m),b(d,c,null),w(c,S),$(F,y,P),$(F,L,P),w(L,M),b(O,L,null),w(L,D),$(F,I,P),b(N,F,P),R=!0},p(F,P){const z={};P&32&&(z.$$scope={dirty:P,ctx:F}),t.$set(z);const X={};P&32&&(X.$$scope={dirty:P,ctx:F}),l.$set(X);const E={};P&32&&(E.$$scope={dirty:P,ctx:F}),u.$set(E);const q={};P&32&&(q.$$scope={dirty:P,ctx:F}),d.$set(q);const A={};P&32&&(A.$$scope={dirty:P,ctx:F}),O.$set(A)},i(F){R||(_(t.$$.fragment,F),_(l.$$.fragment,F),_(u.$$.fragment,F),_(d.$$.fragment,F),_(O.$$.fragment,F),_(N.$$.fragment,F),R=!0)},o(F){g(t.$$.fragment,F),g(l.$$.fragment,F),g(u.$$.fragment,F),g(d.$$.fragment,F),g(O.$$.fragment,F),g(N.$$.fragment,F),R=!1},d(F){F&&(p(e),p(i),p(f),p(y),p(L),p(I)),k(t),k(l),k(u),k(d),k(O),k(N,F)}}}function ni(r){let e,s,t;return s=new ce({props:{$$slots:{default:[ti]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function li(r){let e,s=r[4].name+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&16&&s!==(s=n[4].name+"")&&B(t,s)},d(n){n&&p(e)}}}function si(r){let e,s;return e=new oe({props:{$$slots:{default:[li,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&48&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function ri(r){let e,s,t,n;const l=[H(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[si]},$$scope:{ctx:r}};for(let i=0;i<l.length;i+=1)o=ne(o,l[i]);e=new ze({props:o});const u=[H(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ne(a,u[i]);return t=new he({props:a}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,s,f),b(t,i,f),n=!0},p(i,f){const c=f&3?le(l,[f&0&&re(H(Ue)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"fill-color":i[1],"fill-opacity":ee(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},l[4],l[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?le(u,[f&0&&re(H(`${Ue}-outline`)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(s),k(e,i),k(t,i)}}}function oi(r){let e,s,t,n,l;function o(a){r[3](a)}let u={$$slots:{right:[ni],default:[Qo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),U.push(()=>W(e,"checked",o)),n=new _e({props:{url:`pmtiles://${pe()}/v1/${Ue}.pmtiles`,$$slots:{default:[ri]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!s&&i&1&&(s=!0,f.checked=a[0],Y(()=>s=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Ue="local_planning_authorities";function ii(r,e,s){let t,n=Z.local_planning_authorities,l=ke(Ue);K(r,l,u=>s(0,t=u));function o(u){t=u,l.set(t)}return[t,n,l,o]}class ai extends V{constructor(e){super(),Q(this,e,ii,oi,J,{})}}function fi(r){let e,s,t;return e=new Re({props:{color:r[1]}}),{c(){h(e.$$.fragment),s=v(`
  Parliamentary constituencies`)},m(n,l){b(e,n,l),$(n,s,l),t=!0},p:te,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(s),k(e,n)}}}function ui(r){let e;return{c(){e=v(`Ordnance Survey Boundary-Line
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function ci(r){let e,s,t,n,l,o,u;return t=new x({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ui]},$$scope:{ctx:r}}}),o=new De({}),{c(){e=C("p"),s=v("Data from "),h(t.$$.fragment),n=v(", as of May 2023."),l=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,s),b(t,e,null),w(e,n),$(a,l,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(l)),k(t),k(o,a)}}}function $i(r){let e,s,t;return s=new ce({props:{$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function pi(r){let e,s=r[4].Name+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&16&&s!==(s=n[4].Name+"")&&B(t,s)},d(n){n&&p(e)}}}function mi(r){let e,s;return e=new oe({props:{$$slots:{default:[pi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&48&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function _i(r){let e,s,t,n;const l=[H(We),{sourceLayer:We},{paint:{"fill-color":r[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[mi]},$$scope:{ctx:r}};for(let i=0;i<l.length;i+=1)o=ne(o,l[i]);e=new ze({props:o}),e.$on("click",di);const u=[H(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ne(a,u[i]);return t=new he({props:a}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,s,f),b(t,i,f),n=!0},p(i,f){const c=f&3?le(l,[f&0&&re(H(We)),f&0&&{sourceLayer:We},f&2&&{paint:{"fill-color":i[1],"fill-opacity":ee(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},l[4],l[5],l[6]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?le(u,[f&0&&re(H(`${We}-outline`)),f&0&&{sourceLayer:We},f&2&&{paint:{"line-color":i[1],"line-width":5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(s),k(e,i),k(t,i)}}}function gi(r){let e,s,t,n,l;function o(a){r[3](a)}let u={$$slots:{right:[$i],default:[fi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),U.push(()=>W(e,"checked",o)),n=new _e({props:{url:`pmtiles://${pe()}/v1/${We}.pmtiles`,$$slots:{default:[_i]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!s&&i&1&&(s=!0,f.checked=a[0],Y(()=>s=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let We="parliamentary_constituencies";function di(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function hi(r,e,s){let t,n=Z.parliamentary_constituencies,l=ke(We);K(r,l,u=>s(0,t=u));function o(u){t=u,l.set(t)}return[t,n,l,o]}class bi extends V{constructor(e){super(),Q(this,e,hi,gi,J,{})}}function ki(r){let e;return{c(){e=v("Pollution")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function wi(r){let e;return{c(){e=v(`DEFRA
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function vi(r){let e,s,t,n,l,o,u,a,i;return t=new x({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[wi]},$$scope:{ctx:r}}}),a=new De({}),{c(){e=C("p"),s=v("Most layers show air quality data from "),h(t.$$.fragment),n=v(`. The measurements are annual means, in units of
        Âµgm
        `),l=C("sup"),l.textContent="3",o=v(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,s),b(t,e,null),w(e,n),w(e,l),w(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&4096&&(m.$$scope={dirty:c,ctx:f}),t.$set(m)},i(f){i||(_(t.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(t.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),k(t),k(a,f)}}}function yi(r){let e,s,t;return s=new ce({props:{$$slots:{default:[vi]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&4096&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Yn(r){let e,s,t,n,l=r[3](r[0].pollutant)+"",o,u,a,i,f,c,m,d,S,y,L,M,O;function D(N){r[6](N)}let I={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return r[0].pollutant!==void 0&&(I.value=r[0].pollutant),e=new ot({props:I}),U.push(()=>W(e,"value",D)),{c(){h(e.$$.fragment),t=T(),n=C("p"),o=v(l),u=T(),a=C("div"),i=C("label"),f=v(`Opacity
      `),c=C("input"),m=T(),d=C("img"),G(c,"type","range"),G(c,"min","0"),G(c,"max","100"),Wt(d.src,S=r[4](r[0].pollutant))||G(d,"src",S),G(d,"width",150),G(d,"alt",y=`Legend for ${r[0].pollutant} layer`)},m(N,R){b(e,N,R),$(N,t,R),$(N,n,R),w(n,o),$(N,u,R),$(N,a,R),w(a,i),w(i,f),w(i,c),Ve(c,r[0].opacity),$(N,m,R),$(N,d,R),L=!0,M||(O=[xe(c,"change",r[7]),xe(c,"input",r[7])],M=!0)},p(N,R){const F={};!s&&R&1&&(s=!0,F.value=N[0].pollutant,Y(()=>s=!1)),e.$set(F),(!L||R&1)&&l!==(l=N[3](N[0].pollutant)+"")&&B(o,l),R&1&&Ve(c,N[0].opacity),(!L||R&1&&!Wt(d.src,S=N[4](N[0].pollutant)))&&G(d,"src",S),(!L||R&1&&y!==(y=`Legend for ${N[0].pollutant} layer`))&&G(d,"alt",y)},i(N){L||(_(e.$$.fragment,N),L=!0)},o(N){g(e.$$.fragment,N),L=!1},d(N){N&&(p(t),p(n),p(u),p(a),p(m),p(d)),k(e,N),M=!1,fs(O)}}}function Si(r){let e,s;const t=[H("pollution"),{paint:{"raster-opacity":r[0].opacity/100}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new Os({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&1?le(t,[t[0],{paint:{"raster-opacity":l[0].opacity/100}},{layout:{visibility:l[0].show?"visible":"none"}}]):{};e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function Ci(r){let e,s,t,n,l,o;function u(f){r[5](f)}let a={$$slots:{right:[yi],default:[ki]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0].show&&Yn(r);return l=new tr({props:{tiles:[r[1]],tileSize:256,$$slots:{default:[Si]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&4096&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0].show,Y(()=>s=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=Yn(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&2&&(d.tiles=[f[1]]),c&4097&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}function Li(r){return r.show?`${r.pollutant}/${r.opacity}`:null}function Ti(r){let[e,s]=r.split("/");return{show:!0,pollutant:e,opacity:parseInt(s)}}function Mi(r,e,s){let t,n,l,u=_t("pollution",{show:!1,pollutant:"PM25_viridis",opacity:50},Li,Ti);K(r,u,y=>s(0,l=y));function a(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${l.pollutant}/MapServer/WMSServer`}function i(y){return t[1]}function f(y){let L=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${a()}?bbox={bbox-epsg-3857}&${L}`}function c(y){let L=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${a()}?${L}`}function m(y){r.$$.not_equal(l.show,y)&&(l.show=y,u.set(l))}function d(y){r.$$.not_equal(l.pollutant,y)&&(l.pollutant=y,u.set(l))}function S(){l.opacity=Gt(this.value),u.set(l)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[l.pollutant]),r.$$.dirty&1&&s(1,n=f(l.pollutant))},[l,n,u,i,c,m,d,S]}class Ni extends V{constructor(e){super(),Q(this,e,Mi,Ci,J,{})}}function Pi(r){let e;return{c(){e=v("Road noise")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Oi(r){let e;return{c(){e=v(`DEFRA
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Ii(r){let e,s,t,n,l,o,u,a,i;return l=new x({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Oi]},$$scope:{ctx:r}}}),a=new De({}),{c(){e=C("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,s=T(),t=C("p"),n=v("Data from June 2019, produced by "),h(l.$$.fragment),o=v(". See there for methodology details"),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),$(f,s,c),$(f,t,c),w(t,n),b(l,t,null),w(t,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),l.$set(m)},i(f){i||(_(l.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(l.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(s),p(t),p(u)),k(l),k(a,f)}}}function Ri(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Ii]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Jn(r){let e,s;return e=new Be({props:{colorScale:r[1],limits:["55","65","75",">"]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p:te,i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Di(r){let e,s=r[4].noiseclass+"",t,n,l=Vn(r[4].noiseclass)+"",o,u;return{c(){e=C("p"),t=v(s),n=v(" dB ("),o=v(l),u=v(")")},m(a,i){$(a,e,i),w(e,t),w(e,n),w(e,o),w(e,u)},p(a,i){i&16&&s!==(s=a[4].noiseclass+"")&&B(t,s),i&16&&l!==(l=Vn(a[4].noiseclass)+"")&&B(o,l)},d(a){a&&p(e)}}}function Ai(r){let e,s;return e=new oe({props:{$$slots:{default:[Di,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&48&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Fi(r){let e,s;const t=[H(bt),{sourceLayer:bt},{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":ee(.5,.8)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ai]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new ze({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&3?le(t,[o&0&&re(H(bt)),o&0&&{sourceLayer:bt},o&2&&{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][0],"65.0-69.9":l[1][1],"70.0-74.9":l[1][1],">=75.0":l[1][2]},"red"),"fill-opacity":ee(.5,.8)}},o&1&&{layout:{visibility:l[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function qi(r){let e,s,t,n,l,o;function u(f){r[3](f)}let a={$$slots:{right:[Ri],default:[Pi]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&Jn(r);return l=new _e({props:{url:`pmtiles://${pe()}/v1/${bt}.pmtiles`,$$slots:{default:[Fi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0],Y(()=>s=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=Jn(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}let bt="road_noise";function Vn(r){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[r]}function zi(r,e,s){let t,n=[Z.sequential_low_to_high[0],Z.sequential_low_to_high[2],Z.sequential_low_to_high[4]],l=ke(bt);K(r,l,u=>s(0,t=u));function o(u){t=u,l.set(t)}return[t,n,l,o]}class Bi extends V{constructor(e){super(),Q(this,e,zi,qi,J,{})}}function ji(r){let e,s,t;return e=new Re({props:{color:r[1]}}),{c(){h(e.$$.fragment),s=v(`
  Wards`)},m(n,l){b(e,n,l),$(n,s,l),t=!0},p:te,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(s),k(e,n)}}}function Hi(r){let e;return{c(){e=v(`ONS Geography
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Gi(r){let e,s,t,n,l,o,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),o=new De({}),{c(){e=C("p"),s=v("Data from "),h(t.$$.fragment),n=v(", as of May 2023."),l=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,s),b(t,e,null),w(e,n),$(a,l,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(l)),k(t),k(o,a)}}}function Ei(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Gi]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Ui(r){let e,s=r[4].name+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&16&&s!==(s=n[4].name+"")&&B(t,s)},d(n){n&&p(e)}}}function Wi(r){let e,s;return e=new oe({props:{$$slots:{default:[Ui,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&48&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Yi(r){let e,s,t,n;const l=[H(Ye),{sourceLayer:Ye},{paint:{"fill-color":r[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Wi]},$$scope:{ctx:r}};for(let i=0;i<l.length;i+=1)o=ne(o,l[i]);e=new ze({props:o}),e.$on("click",Vi);const u=[H(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ne(a,u[i]);return t=new he({props:a}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,s,f),b(t,i,f),n=!0},p(i,f){const c=f&3?le(l,[f&0&&re(H(Ye)),f&0&&{sourceLayer:Ye},f&2&&{paint:{"fill-color":i[1],"fill-opacity":ee(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},l[4],l[5],l[6]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?le(u,[f&0&&re(H(`${Ye}-outline`)),f&0&&{sourceLayer:Ye},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(s),k(e,i),k(t,i)}}}function Ji(r){let e,s,t,n,l;function o(a){r[3](a)}let u={$$slots:{right:[Ei],default:[ji]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),U.push(()=>W(e,"checked",o)),n=new _e({props:{url:`pmtiles://${pe()}/v1/${Ye}.pmtiles`,$$slots:{default:[Yi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!s&&i&1&&(s=!0,f.checked=a[0],Y(()=>s=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Ye="wards";function Vi(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Qi(r,e,s){let t,n=Z.wards,l=ke(Ye);K(r,l,u=>s(0,t=u));function o(u){t=u,l.set(t)}return[t,n,l,o]}class Ki extends V{constructor(e){super(),Q(this,e,Qi,Ji,J,{})}}function Zi(r){let e;return{c(){e=v("Open Data Commons Open Database License")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Xi(r){let e,s,t,n;return t=new x({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Zi]},$$scope:{ctx:r}}}),{c(){e=C("p"),s=v("License: "),h(t.$$.fragment)},m(l,o){$(l,e,o),w(e,s),b(t,e,null),n=!0},p(l,[o]){const u={};o&1&&(u.$$scope={dirty:o,ctx:l}),t.$set(u)},i(l){n||(_(t.$$.fragment,l),n=!0)},o(l){g(t.$$.fragment,l),n=!1},d(l){l&&p(e),k(t)}}}class Ze extends V{constructor(e){super(),Q(this,e,null,Xi,J,{})}}function xi(r){let e,s,t;return e=new Re({props:{color:Z.bus_route_with_lane}}),{c(){h(e.$$.fragment),s=v(`
  Bus routes`)},m(n,l){b(e,n,l),$(n,s,l),t=!0},p:te,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(s),k(e,n)}}}function ea(r){let e;return{c(){e=v(`GTFS
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function ta(r){let e,s,t,n,l,o,u,a,i;return l=new x({props:{href:"https://gtfs.org",$$slots:{default:[ea]},$$scope:{ctx:r}}}),a=new Ze({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,s=T(),t=C("p"),n=v("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(l.$$.fragment),o=v(`, and doesn't include which routes are run or the
        frequency of service.`),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),$(f,s,c),$(f,t,c),w(t,n),b(l,t,null),w(t,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),l.$set(m)},i(f){i||(_(l.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(l.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(s),p(t),p(u)),k(l),k(a,f)}}}function na(r){let e,s,t;return s=new ce({props:{$$slots:{default:[ta]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function la(r){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function sa(r){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function ra(r){let e;function s(l,o){return l[3].has_bus_lane?sa:la}let t=s(r),n=t(r);return{c(){n.c(),e=Ce()},m(l,o){n.m(l,o),$(l,e,o)},p(l,o){t!==(t=s(l))&&(n.d(1),n=t(l),n&&(n.c(),n.m(e.parentNode,e)))},d(l){l&&p(e),n.d(l)}}}function oa(r){let e,s;return e=new oe({props:{$$slots:{default:[ra,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&24&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function ia(r){let e,s;const t=[H(kt),{sourceLayer:kt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[oa]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new he({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&1?le(t,[o&0&&re(H(kt)),o&0&&{sourceLayer:kt},t[2],o&1&&{layout:{visibility:l[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function aa(r){let e,s,t,n,l;function o(a){r[2](a)}let u={$$slots:{right:[na],default:[xi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),U.push(()=>W(e,"checked",o)),n=new _e({props:{url:`pmtiles://${pe()}/v1/${kt}.pmtiles`,$$slots:{default:[ia]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!s&&i&1&&(s=!0,f.checked=a[0],Y(()=>s=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let kt="bus_routes";function fa(r,e,s){let t,n=ke(kt);K(r,n,o=>s(0,t=o));function l(o){t=o,n.set(t)}return[t,n,l]}class ua extends V{constructor(e){super(),Q(this,e,fa,aa,J,{})}}function Qn(r){const e=wa(r[9]);r[10]=e[0],r[11]=e[1],r[12]=e[2]}function Kn(r,e,s){const t=r.slice();return t[10]=e[s][0],t[13]=e[s][1],t[14]=e[s][2],t[15]=e,t[16]=s,t}function ca(r){let e;return{c(){e=v("Cycle paths")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function $a(r){let e,s,t,n,l,o,u,a;return u=new Ze({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,s=T(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,n=T(),l=C("p"),l.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,o=T(),h(u.$$.fragment)},m(i,f){$(i,e,f),$(i,s,f),$(i,t,f),$(i,n,f),$(i,l,f),$(i,o,f),b(u,i,f),a=!0},p:te,i(i){a||(_(u.$$.fragment,i),a=!0)},o(i){g(u.$$.fragment,i),a=!1},d(i){i&&(p(e),p(s),p(t),p(n),p(l),p(o)),k(u,i)}}}function pa(r){let e,s,t;return s=new ce({props:{$$slots:{default:[$a]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&131072&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Zn(r){let e,s,t;return s=new nt({props:{$$slots:{default:[_a]},$$scope:{ctx:r}}}),{c(){e=C("div"),h(s.$$.fragment),me(e,"border","1px solid black"),me(e,"padding","8px")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&131073&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function ma(r){let e,s,t=r[13]+"",n,l,o;return e=new Re({props:{color:r[14]}}),{c(){h(e.$$.fragment),s=T(),n=v(t),l=T()},m(u,a){b(e,u,a),$(u,s,a),$(u,n,a),$(u,l,a),o=!0},p:te,i(u){o||(_(e.$$.fragment,u),o=!0)},o(u){g(e.$$.fragment,u),o=!1},d(u){u&&(p(s),p(n),p(l)),k(e,u)}}}function Xn(r){let e,s,t;function n(o){r[5](o,r[10])}let l={$$slots:{default:[ma]},$$scope:{ctx:r}};return r[0][r[10]]!==void 0&&(l.checked=r[0][r[10]]),e=new se({props:l}),U.push(()=>W(e,"checked",n)),{c(){h(e.$$.fragment)},m(o,u){b(e,o,u),t=!0},p(o,u){r=o;const a={};u&131072&&(a.$$scope={dirty:u,ctx:r}),!s&&u&5&&(s=!0,a.checked=r[0][r[10]],Y(()=>s=!1)),e.$set(a)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function _a(r){let e,s,t=Se(r[2]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Xn(Kn(r,t,o));const l=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Ce()},m(o,u){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,u);$(o,e,u),s=!0},p(o,u){if(u&5){t=Se(o[2]);let a;for(a=0;a<t.length;a+=1){const i=Kn(o,t,a);n[a]?(n[a].p(i,u),_(n[a],1)):(n[a]=Xn(i),n[a].c(),_(n[a],1),n[a].m(e.parentNode,e))}for(ie(),a=t.length;a<n.length;a+=1)l(a);ae()}},i(o){if(!s){for(let u=0;u<t.length;u+=1)_(n[u]);s=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)g(n[u]);s=!1},d(o){o&&p(e),et(n,o)}}}function ga(r){Qn(r);let e,s=r[10]+"",t,n,l,o,u,a=r[11]+"",i,f,c,m,d=r[12]+"",S;return{c(){e=C("h2"),t=v(s),n=T(),l=C("p"),o=v("Direction: "),u=C("b"),i=T(),f=C("p"),c=v("Width: "),m=C("b"),S=v(d)},m(y,L){$(y,e,L),w(e,t),$(y,n,L),$(y,l,L),w(l,o),w(l,u),u.innerHTML=a,$(y,i,L),$(y,f,L),w(f,c),w(f,m),w(m,S)},p(y,L){Qn(y),L&512&&s!==(s=y[10]+"")&&B(t,s),L&512&&a!==(a=y[11]+"")&&(u.innerHTML=a),L&512&&d!==(d=y[12]+"")&&B(S,d)},d(y){y&&(p(e),p(n),p(l),p(i),p(f))}}}function da(r){let e,s;return e=new oe({props:{$$slots:{default:[ga,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&131584&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function ha(r){let e,s;const t=[H(wt),{sourceLayer:wt},{paint:{"line-color":Ke(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ae,"line-opacity":ee(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[3](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[da]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new he({props:n}),e.$on("click",va),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&9?le(t,[o&0&&re(H(wt)),o&0&&{sourceLayer:wt},t[2],o&1&&{layout:{visibility:l[0].show?"visible":"none"}},o&9&&{filter:l[3](l[0])},t[5],t[6],t[7]]):{};o&131072&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function ba(r){let e,s,t,n,l,o;function u(f){r[4](f)}let a={$$slots:{right:[pa],default:[ca]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0].show&&Zn(r);return l=new _e({props:{url:`pmtiles://${pe()}/v1/${wt}.pmtiles`,$$slots:{default:[ha]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&131072&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0].show,Y(()=>s=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=Zn(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&131073&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}let wt="cycle_paths";function ka(r){return{show:!0,track:r.includes("track"),lane:r.includes("lane"),shared_use_segregated:r.includes("shared_use_segregated"),shared_use_unsegregated:r.includes("shared_use_unsegregated")}}function wa(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],s={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${s} ${r.direction}`,t]}function va(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function ya(r,e,s){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],l={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function o(m){return m.show?n.filter(d=>m[d]).join(","):null}let u=_t(wt,l,o,ka);K(r,u,m=>s(0,t=m));let a=[["track","Separated tracks",Z.cycle_paths.track],["lane","Unprotected lanes",Z.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]];function i(m){let d=n.filter(S=>m[S]);return["in",["get","kind"],["literal",d]]}function f(m){r.$$.not_equal(t.show,m)&&(t.show=m,u.set(t))}function c(m,d){r.$$.not_equal(t[d],m)&&(t[d]=m,u.set(t))}return[t,u,a,i,f,c]}class Sa extends V{constructor(e){super(),Q(this,e,ya,ba,J,{})}}function Ca(r){let e,s,t;return e=new Re({props:{color:r[1]}}),{c(){h(e.$$.fragment),s=v(`
  Major Road Network`)},m(n,l){b(e,n,l),$(n,s,l),t=!0},p:te,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(s),k(e,n)}}}function La(r){let e;return{c(){e=v(`Major Road Network
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Ta(r){let e,s,t,n,l,o,u;return t=new x({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[La]},$$scope:{ctx:r}}}),o=new De({}),{c(){e=C("p"),s=v("Data from the "),h(t.$$.fragment),n=v(", as of September 2021."),l=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,s),b(t,e,null),w(e,n),$(a,l,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(l)),k(t),k(o,a)}}}function Ma(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Ta]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Na(r){let e,s=(r[4].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&16&&s!==(s=(n[4].name??"Unknown MRN road")+"")&&B(t,s)},d(n){n&&p(e)}}}function Pa(r){let e,s;return e=new oe({props:{$$slots:{default:[Na,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&48&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Oa(r){let e,s;const t=[H(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Pa]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new he({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&3?le(t,[o&0&&re(H(vt)),o&0&&{sourceLayer:vt},t[2],t[3],o&2&&{paint:{"line-color":l[1],"line-width":7,"line-opacity":ee(1,.5)}},o&1&&{layout:{visibility:l[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function Ia(r){let e,s,t,n,l;function o(a){r[3](a)}let u={$$slots:{right:[Ma],default:[Ca]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),U.push(()=>W(e,"checked",o)),n=new _e({props:{url:`pmtiles://${pe()}/v1/${vt}.pmtiles`,$$slots:{default:[Oa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!s&&i&1&&(s=!0,f.checked=a[0],Y(()=>s=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let vt="mrn";function Ra(r,e,s){let t,n=Z.mrn,l=ke(vt);K(r,l,u=>s(0,t=u));function o(u){t=u,l.set(t)}return[t,n,l,o]}class Da extends V{constructor(e){super(),Q(this,e,Ra,Ia,J,{})}}function Aa(r){let e,s,t;return e=new Re({props:{color:r[1]}}),{c(){h(e.$$.fragment),s=v(`
  Strategic Road Network`)},m(n,l){b(e,n,l),$(n,s,l),t=!0},p:te,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(s),k(e,n)}}}function Fa(r){let e;return{c(){e=v(`OS Open Roads
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function qa(r){let e,s,t,n,l,o,u;return t=new x({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Fa]},$$scope:{ctx:r}}}),o=new De({}),{c(){e=C("p"),s=v("Data from "),h(t.$$.fragment),n=v(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),l=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,s),b(t,e,null),w(e,n),$(a,l,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(l)),k(t),k(o,a)}}}function za(r){let e,s,t;return s=new ce({props:{$$slots:{default:[qa]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Ba(r){let e,s=(r[4].name??"Unknown SRN road")+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&16&&s!==(s=(n[4].name??"Unknown SRN road")+"")&&B(t,s)},d(n){n&&p(e)}}}function ja(r){let e,s;return e=new oe({props:{$$slots:{default:[Ba,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&48&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Ha(r){let e,s;const t=[H(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[ja]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new he({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&3?le(t,[o&0&&re(H(yt)),o&0&&{sourceLayer:yt},t[2],t[3],o&2&&{paint:{"line-color":l[1],"line-width":7,"line-opacity":ee(1,.5)}},o&1&&{layout:{visibility:l[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function Ga(r){let e,s,t,n,l;function o(a){r[3](a)}let u={$$slots:{right:[za],default:[Aa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),U.push(()=>W(e,"checked",o)),n=new _e({props:{url:`pmtiles://${pe()}/v1/${yt}.pmtiles`,$$slots:{default:[Ha]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!s&&i&1&&(s=!0,f.checked=a[0],Y(()=>s=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let yt="srn";function Ea(r,e,s){let t,n=Z.srn,l=ke(yt);K(r,l,u=>s(0,t=u));function o(u){t=u,l.set(t)}return[t,n,l,o]}class Ua extends V{constructor(e){super(),Q(this,e,Ea,Ga,J,{})}}function Wa(r){let e,s,t;return e=new Re({props:{color:r[1]}}),{c(){h(e.$$.fragment),s=v(`
  National Cycle Network`)},m(n,l){b(e,n,l),$(n,s,l),t=!0},p:te,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(s),k(e,n)}}}function Ya(r){let e;return{c(){e=v(`National Cycle Network
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Ja(r){let e,s,t,n,l,o,u;return t=new x({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Ya]},$$scope:{ctx:r}}}),o=new De({}),{c(){e=C("p"),s=v("Data from Sustrans about the "),h(t.$$.fragment),n=v(", downloaded on 22/01/2024."),l=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,s),b(t,e,null),w(e,n),$(a,l,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(l)),k(t),k(o,a)}}}function Va(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Ja]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function xn(r){let e,s,t,n=r[4].Desc_+"",l;return{c(){e=C("li"),s=v("Description: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&16&&n!==(n=o[4].Desc_+"")&&B(l,n)},d(o){o&&p(e)}}}function el(r){let e,s,t,n=r[4].Greenway+"",l;return{c(){e=C("li"),s=v("Is greenway: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&16&&n!==(n=o[4].Greenway+"")&&B(l,n)},d(o){o&&p(e)}}}function tl(r){let e,s,t,n=r[4].RouteType+"",l;return{c(){e=C("li"),s=v("Route type: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&16&&n!==(n=o[4].RouteType+"")&&B(l,n)},d(o){o&&p(e)}}}function nl(r){let e,s,t,n=r[4].RouteNo+"",l;return{c(){e=C("li"),s=v("Route number: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&16&&n!==(n=o[4].RouteNo+"")&&B(l,n)},d(o){o&&p(e)}}}function ll(r){let e,s,t,n=r[4].RouteCat+"",l;return{c(){e=C("li"),s=v("Route Category: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&16&&n!==(n=o[4].RouteCat+"")&&B(l,n)},d(o){o&&p(e)}}}function sl(r){let e,s,t,n=r[4].OpenStatus+"",l;return{c(){e=C("li"),s=v("Open Status: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&16&&n!==(n=o[4].OpenStatus+"")&&B(l,n)},d(o){o&&p(e)}}}function rl(r){let e,s,t,n=r[4].Surface+"",l;return{c(){e=C("li"),s=v("Surface: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&16&&n!==(n=o[4].Surface+"")&&B(l,n)},d(o){o&&p(e)}}}function ol(r){let e,s,t,n=r[4].Quality+"",l;return{c(){e=C("li"),s=v("Quality: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&16&&n!==(n=o[4].Quality+"")&&B(l,n)},d(o){o&&p(e)}}}function il(r){let e,s,t,n=r[4].RoadClass+"",l;return{c(){e=C("li"),s=v("Road Class: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&16&&n!==(n=o[4].RoadClass+"")&&B(l,n)},d(o){o&&p(e)}}}function Qa(r){let e,s,t,n,l,o,u,a,i,f=r[4].Desc_&&xn(r),c=r[4].Greenway&&el(r),m=r[4].RouteType&&tl(r),d=r[4].RouteNo&&nl(r),S=r[4].RouteCat&&ll(r),y=r[4].OpenStatus&&sl(r),L=r[4].Surface&&rl(r),M=r[4].Quality&&ol(r),O=r[4].RoadClass&&il(r);return{c(){e=C("ul"),f&&f.c(),s=T(),c&&c.c(),t=T(),m&&m.c(),n=T(),d&&d.c(),l=T(),S&&S.c(),o=T(),y&&y.c(),u=T(),L&&L.c(),a=T(),M&&M.c(),i=T(),O&&O.c()},m(D,I){$(D,e,I),f&&f.m(e,null),w(e,s),c&&c.m(e,null),w(e,t),m&&m.m(e,null),w(e,n),d&&d.m(e,null),w(e,l),S&&S.m(e,null),w(e,o),y&&y.m(e,null),w(e,u),L&&L.m(e,null),w(e,a),M&&M.m(e,null),w(e,i),O&&O.m(e,null)},p(D,I){D[4].Desc_?f?f.p(D,I):(f=xn(D),f.c(),f.m(e,s)):f&&(f.d(1),f=null),D[4].Greenway?c?c.p(D,I):(c=el(D),c.c(),c.m(e,t)):c&&(c.d(1),c=null),D[4].RouteType?m?m.p(D,I):(m=tl(D),m.c(),m.m(e,n)):m&&(m.d(1),m=null),D[4].RouteNo?d?d.p(D,I):(d=nl(D),d.c(),d.m(e,l)):d&&(d.d(1),d=null),D[4].RouteCat?S?S.p(D,I):(S=ll(D),S.c(),S.m(e,o)):S&&(S.d(1),S=null),D[4].OpenStatus?y?y.p(D,I):(y=sl(D),y.c(),y.m(e,u)):y&&(y.d(1),y=null),D[4].Surface?L?L.p(D,I):(L=rl(D),L.c(),L.m(e,a)):L&&(L.d(1),L=null),D[4].Quality?M?M.p(D,I):(M=ol(D),M.c(),M.m(e,i)):M&&(M.d(1),M=null),D[4].RoadClass?O?O.p(D,I):(O=il(D),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},d(D){D&&p(e),f&&f.d(),c&&c.d(),m&&m.d(),d&&d.d(),S&&S.d(),y&&y.d(),L&&L.d(),M&&M.d(),O&&O.d()}}}function Ka(r){let e,s;return e=new oe({props:{$$slots:{default:[Qa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&48&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Za(r){let e,s;const t=[H(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":ee(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Ka]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new he({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&3?le(t,[o&0&&re(H(St)),o&0&&{sourceLayer:St},t[2],t[3],o&2&&{paint:{"line-color":l[1],"line-width":4,"line-opacity":ee(1,.5)}},o&1&&{layout:{visibility:l[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function Xa(r){let e,s,t,n,l;function o(a){r[3](a)}let u={$$slots:{right:[Va],default:[Wa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),U.push(()=>W(e,"checked",o)),n=new _e({props:{url:`pmtiles://${pe()}/v1/${St}.pmtiles`,$$slots:{default:[Za]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!s&&i&1&&(s=!0,f.checked=a[0],Y(()=>s=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let St="national_cycle_network";function xa(r,e,s){let t,n=Z.national_cycle_network,l=ke(St);K(r,l,u=>s(0,t=u));function o(u){t=u,l.set(t)}return[t,n,l,o]}class ef extends V{constructor(e){super(),Q(this,e,xa,Xa,J,{})}}function al(r,e,s){const t=r.slice();return t[6]=e[s][0],t[7]=e[s][1],t[8]=e[s][2],t}function tf(r){let e;return{c(){e=v("OS Pavement widths")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function nf(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function lf(r){let e,s,t,n,l,o,u,a,i,f,c;return i=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,s=T(),t=C("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,n=T(),l=C("p"),l.textContent="Data valid as of 1 January, 2024",o=T(),u=C("p"),a=v(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),h(i.$$.fragment),f=v(".")},m(m,d){$(m,e,d),$(m,s,d),$(m,t,d),$(m,n,d),$(m,l,d),$(m,o,d),$(m,u,d),w(u,a),b(i,u,null),w(u,f),c=!0},p(m,d){const S={};d&2048&&(S.$$scope={dirty:d,ctx:m}),i.$set(S)},i(m){c||(_(i.$$.fragment,m),c=!0)},o(m){g(i.$$.fragment,m),c=!1},d(m){m&&(p(e),p(s),p(t),p(n),p(l),p(o),p(u)),k(i)}}}function sf(r){let e,s,t;return s=new ce({props:{$$slots:{default:[lf]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&2048&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function fl(r){let e,s;return e=new Be({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p:te,i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function rf(r){let e,s,t=Jt(r[5].angle+r[8])+"",n;return{c(){e=C("p"),s=new it(!1),n=v(` side of the road: no pavement
          `),s.a=n},m(l,o){$(l,e,o),s.m(t,e),w(e,n)},p(l,o){o&32&&t!==(t=Jt(l[5].angle+l[8])+"")&&s.p(t)},d(l){l&&p(e)}}}function of(r){let e,s,t=Jt(r[5].angle+r[8])+"",n,l,o=r[6]+"",u,a,i,f=r[7]+"",c,m;return{c(){e=C("p"),s=new it(!1),n=v(` side of the road:
            `),l=C("b"),u=v(o),a=v(`
            m average,
            `),i=C("b"),c=v(f),m=v(`
            m minimum
          `),s.a=n},m(d,S){$(d,e,S),s.m(t,e),w(e,n),w(e,l),w(l,u),w(e,a),w(e,i),w(i,c),w(e,m)},p(d,S){S&32&&t!==(t=Jt(d[5].angle+d[8])+"")&&s.p(t),S&32&&o!==(o=d[6]+"")&&B(u,o),S&32&&f!==(f=d[7]+"")&&B(c,f)},d(d){d&&p(e)}}}function ul(r){let e;function s(l,o){return l[6]?of:rf}let t=s(r),n=t(r);return{c(){n.c(),e=Ce()},m(l,o){n.m(l,o),$(l,e,o)},p(l,o){t===(t=s(l))&&n?n.p(l,o):(n.d(1),n=t(l),n&&(n.c(),n.m(e.parentNode,e)))},d(l){l&&p(e),n.d(l)}}}function af(r){let e,s=Se([[r[5].left_average,r[5].left_minimum,-90],[r[5].right_average,r[5].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=ul(al(r,s,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=Ce()},m(n,l){for(let o=0;o<2;o+=1)t[o]&&t[o].m(n,l);$(n,e,l)},p(n,l){if(l&32){s=Se([[n[5].left_average,n[5].left_minimum,-90],[n[5].right_average,n[5].right_minimum,90]]);let o;for(o=0;o<2;o+=1){const u=al(n,s,o);t[o]?t[o].p(u,l):(t[o]=ul(u),t[o].c(),t[o].m(e.parentNode,e))}for(;o<2;o+=1)t[o].d(1)}},d(n){n&&p(e),et(t,n)}}}function ff(r){let e,s;return e=new oe({props:{openOn:"hover",$$slots:{default:[af,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&2080&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function uf(r){let e,s;const t=[H(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Ae,"line-opacity":ee(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[ff]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new he({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&7?le(t,[o&0&&re(H(Ct)),o&0&&{sourceLayer:Ct},t[2],t[3],o&6&&{paint:{"line-color":be(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],l[2],l[1]),"line-width":Ae,"line-opacity":ee(1,.5)}},o&1&&{layout:{visibility:l[0]?"visible":"none"}}]):{};o&2048&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function cf(r){let e,s,t,n,l,o;function u(f){r[4](f)}let a={$$slots:{right:[sf],default:[tf]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&fl(r);return l=new _e({props:{url:`pmtiles://${Et()}/v1/${Ct}.pmtiles`,$$slots:{default:[uf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0],Y(()=>s=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=fl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&2049&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}let Ct="pavement_widths";function $f(r){let e=Math.floor((r+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function Jt(r){return`${$f(r)} <span style="display: inline-block; rotate: ${r}deg">â¬†</span>`}function pf(r,e,s){let t,n=Z.sequential_low_to_high,l=[0,2,4,6,8,13],o=ke(Ct);K(r,o,a=>s(0,t=a));function u(a){t=a,o.set(t)}return[t,n,l,o,u]}class mf extends V{constructor(e){super(),Q(this,e,pf,cf,J,{})}}function _f(r){let e;return{c(){e=v("Propensity to Cycle Tool")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function gf(r){let e;return{c(){e=v("the PCT website")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function df(r){let e;return{c(){e=v("2017 journal article")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function hf(r){let e,s,t,n,l,o,u,a,i,f,c;return u=new x({props:{href:"https://www.pct.bike",$$slots:{default:[gf]},$$scope:{ctx:r}}}),i=new x({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[df]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,s=T(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,n=T(),l=C("p"),o=v("See "),h(u.$$.fragment),a=v(" and "),h(i.$$.fragment),f=v(" for details on methodology and data sources.")},m(m,d){$(m,e,d),$(m,s,d),$(m,t,d),$(m,n,d),$(m,l,d),w(l,o),b(u,l,null),w(l,a),b(i,l,null),w(l,f),c=!0},p(m,d){const S={};d&1024&&(S.$$scope={dirty:d,ctx:m}),u.$set(S);const y={};d&1024&&(y.$$scope={dirty:d,ctx:m}),i.$set(y)},i(m){c||(_(u.$$.fragment,m),_(i.$$.fragment,m),c=!0)},o(m){g(u.$$.fragment,m),g(i.$$.fragment,m),c=!1},d(m){m&&(p(e),p(s),p(t),p(n),p(l)),k(u),k(i)}}}function bf(r){let e,s,t;return s=new ce({props:{$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&1024&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function cl(r){let e,s,t,n,l,o,u,a;e=new Be({props:{colorScale:r[1],limits:r[2]}});function i(d){r[6](d)}let f={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0].tripPurpose!==void 0&&(f.value=r[0].tripPurpose),t=new us({props:f}),U.push(()=>W(t,"value",i));function c(d){r[7](d)}let m={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[0].scenario!==void 0&&(m.value=r[0].scenario),o=new ot({props:m}),U.push(()=>W(o,"value",c)),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment)},m(d,S){b(e,d,S),$(d,s,S),b(t,d,S),$(d,l,S),b(o,d,S),a=!0},p(d,S){const y={};!n&&S&1&&(n=!0,y.value=d[0].tripPurpose,Y(()=>n=!1)),t.$set(y);const L={};!u&&S&1&&(u=!0,L.value=d[0].scenario,Y(()=>u=!1)),o.$set(L)},i(d){a||(_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),a=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(o.$$.fragment,d),a=!1},d(d){d&&(p(s),p(l)),k(e,d),k(t,d),k(o,d)}}}function kf(r){let e,s=r[4](r[9])+"",t;return{c(){e=new it(!1),t=Ce(),e.a=t},m(n,l){e.m(s,n,l),$(n,t,l)},p(n,l){l&512&&s!==(s=n[4](n[9])+"")&&e.p(s)},d(n){n&&(p(t),e.d())}}}function wf(r){let e,s;return e=new oe({props:{$$slots:{default:[kf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&1536&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function vf(r){let e,s;const t=[H(Xe),{sourceLayer:Xe},{paint:{"line-color":be(["get",r[0].scenario],r[2],r[1]),"line-width":Ae,"line-opacity":ee(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==Xe?"visible":"none"}}];let n={$$slots:{default:[wf]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new he({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&7?le(t,[o&0&&re(H(Xe)),o&0&&{sourceLayer:Xe},o&7&&{paint:{"line-color":be(["get",l[0].scenario],l[2],l[1]),"line-width":Ae,"line-opacity":ee(1,.5)}},o&1&&{layout:{visibility:l[0].show&&l[0].tripPurpose==Xe?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function yf(r){let e,s=r[4](r[9])+"",t;return{c(){e=new it(!1),t=Ce(),e.a=t},m(n,l){e.m(s,n,l),$(n,t,l)},p(n,l){l&512&&s!==(s=n[4](n[9])+"")&&e.p(s)},d(n){n&&(p(t),e.d())}}}function Sf(r){let e,s;return e=new oe({props:{$$slots:{default:[yf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&1536&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Cf(r){let e,s;const t=[H(rt),{sourceLayer:rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get",r[0].scenario],r[2],r[1]),"line-width":Ae,"line-opacity":ee(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==rt?"visible":"none"}}];let n={$$slots:{default:[Sf]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new he({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&7?le(t,[o&0&&re(H(rt)),o&0&&{sourceLayer:rt},t[2],t[3],o&7&&{paint:{"line-color":be(["get",l[0].scenario],l[2],l[1]),"line-width":Ae,"line-opacity":ee(1,.5)}},o&1&&{layout:{visibility:l[0].show&&l[0].tripPurpose==rt?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function Lf(r){let e,s,t,n,l,o,u,a;function i(m){r[5](m)}let f={$$slots:{right:[bf],default:[_f]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new se({props:f}),U.push(()=>W(e,"checked",i));let c=r[0].show&&cl(r);return l=new _e({props:{url:`pmtiles://${pe()}/v1/${Xe}.pmtiles`,$$slots:{default:[vf]},$$scope:{ctx:r}}}),u=new _e({props:{url:`pmtiles://${pe()}/v1/${rt}.pmtiles`,$$slots:{default:[Cf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),c&&c.c(),n=T(),h(l.$$.fragment),o=T(),h(u.$$.fragment)},m(m,d){b(e,m,d),$(m,t,d),c&&c.m(m,d),$(m,n,d),b(l,m,d),$(m,o,d),b(u,m,d),a=!0},p(m,[d]){const S={};d&1024&&(S.$$scope={dirty:d,ctx:m}),!s&&d&1&&(s=!0,S.checked=m[0].show,Y(()=>s=!1)),e.$set(S),m[0].show?c?(c.p(m,d),d&1&&_(c,1)):(c=cl(m),c.c(),_(c,1),c.m(n.parentNode,n)):c&&(ie(),g(c,1,1,()=>{c=null}),ae());const y={};d&1025&&(y.$$scope={dirty:d,ctx:m}),l.$set(y);const L={};d&1025&&(L.$$scope={dirty:d,ctx:m}),u.$set(L)},i(m){a||(_(e.$$.fragment,m),_(c),_(l.$$.fragment,m),_(u.$$.fragment,m),a=!0)},o(m){g(e.$$.fragment,m),g(c),g(l.$$.fragment,m),g(u.$$.fragment,m),a=!1},d(m){m&&(p(t),p(n),p(o)),k(e,m),c&&c.d(m),k(l,m),k(u,m)}}}let Xe="pct_commute",rt="pct_school";function Tf(r){return r.show?`${r.tripPurpose}/${r.scenario}`:null}function Mf(r){let[e,s]=r.split("/");return{show:!0,tripPurpose:e,scenario:s}}function Nf(r,e,s){let t,n=Z.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],u=_t("pct",{show:!1,tripPurpose:Xe,scenario:"baseline"},Tf,Mf);K(r,u,m=>s(0,t=m));function a(m){let d=m.baseline,S=m.gov_target,y=m.go_dutch,L=`<h2>Trip purpose: ${t.tripPurpose==Xe?"commuting":"school"}</h2>`;if(L+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)L+=`<p>Government target (2025): <b>${S.toLocaleString()}</b></p>`,L+=`<p>Go Dutch: <b>${y.toLocaleString()}</b></p>`;else{let M=(S/d).toFixed(1),O=(y/d).toFixed(1);L+=`<p>Government target (2025): ${S.toLocaleString()} (<b>${M}x</b> of baseline)</p>`,L+=`<p>Go Dutch: ${y.toLocaleString()} (<b>${O}x</b> of baseline)</p>`}return L}function i(m){r.$$.not_equal(t.show,m)&&(t.show=m,u.set(t))}function f(m){r.$$.not_equal(t.tripPurpose,m)&&(t.tripPurpose=m,u.set(t))}function c(m){r.$$.not_equal(t.scenario,m)&&(t.scenario=m,u.set(t))}return[t,n,l,u,a,i,f,c]}class Pf extends V{constructor(e){super(),Q(this,e,Nf,Lf,J,{})}}function Of(r){let e;return{c(){e=v("OS Speeds")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function If(r){let e;return{c(){e=v("Basemap")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Rf(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Df(r){let e,s,t,n,l,o,u,a,i,f,c,m;return t=new x({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[If]},$$scope:{ctx:r}}}),f=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Rf]},$$scope:{ctx:r}}}),{c(){e=C("p"),s=v("The average speed data is collected over a six-month period by "),h(t.$$.fragment),n=v(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),l=T(),o=C("p"),o.textContent="Data valid as of 1 September, 2023",u=T(),a=C("p"),i=v(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=v(".")},m(d,S){$(d,e,S),w(e,s),b(t,e,null),w(e,n),$(d,l,S),$(d,o,S),$(d,u,S),$(d,a,S),w(a,i),b(f,a,null),w(a,c),m=!0},p(d,S){const y={};S&512&&(y.$$scope={dirty:S,ctx:d}),t.$set(y);const L={};S&512&&(L.$$scope={dirty:S,ctx:d}),f.$set(L)},i(d){m||(_(t.$$.fragment,d),_(f.$$.fragment,d),m=!0)},o(d){g(t.$$.fragment,d),g(f.$$.fragment,d),m=!1},d(d){d&&(p(e),p(l),p(o),p(u),p(a)),k(t),k(f)}}}function Af(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Df]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&512&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function $l(r){let e,s,t,n,l;e=new Be({props:{colorScale:r[1],limits:r[2]}});function o(a){r[6](a)}let u={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0].kind!==void 0&&(u.value=r[0].kind),t=new us({props:u}),U.push(()=>W(t,"value",o)),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(a,i){b(e,a,i),$(a,s,i),b(t,a,i),l=!0},p(a,i){const f={};!n&&i&1&&(n=!0,f.value=a[0].kind,Y(()=>n=!1)),t.$set(f)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(s),k(e,a),k(t,a)}}}function Ff(r){let e,s,t=r[8].indicative_mph+"",n,l,o,u,a,i=r[8].highest_mph+"",f,c,m=r[4][r[8].highest_description]+"",d,S;return{c(){e=C("p"),s=v("Posted speed limit: "),n=v(t),l=v(" mph"),o=T(),u=C("p"),a=v("Highest average speed: "),f=v(i),c=v(" mph (during "),d=v(m),S=v(")")},m(y,L){$(y,e,L),w(e,s),w(e,n),w(e,l),$(y,o,L),$(y,u,L),w(u,a),w(u,f),w(u,c),w(u,d),w(u,S)},p(y,L){L&256&&t!==(t=y[8].indicative_mph+"")&&B(n,t),L&256&&i!==(i=y[8].highest_mph+"")&&B(f,i),L&256&&m!==(m=y[4][y[8].highest_description]+"")&&B(d,m)},d(y){y&&(p(e),p(o),p(u))}}}function qf(r){let e,s;return e=new oe({props:{$$slots:{default:[Ff,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&768&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function zf(r){let e,s;const t=[H(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get",r[0].kind],r[2],r[1]),"line-width":Ae,"line-opacity":ee(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={$$slots:{default:[qf]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new he({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&7?le(t,[o&0&&re(H(Lt)),o&0&&{sourceLayer:Lt},t[2],t[3],o&7&&{paint:{"line-color":be(["get",l[0].kind],l[2],l[1]),"line-width":Ae,"line-opacity":ee(1,.5)}},o&1&&{layout:{visibility:l[0].show?"visible":"none"}}]):{};o&512&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function Bf(r){let e,s,t,n,l,o;function u(f){r[5](f)}let a={$$slots:{right:[Af],default:[Of]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0].show&&$l(r);return l=new _e({props:{url:`pmtiles://${Et()}/v1/${Lt}.pmtiles`,$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&512&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0].show,Y(()=>s=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=$l(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&513&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}let Lt="road_speeds";function jf(r){return r.show?r.kind:null}function Hf(r){return{show:!0,kind:r}}function Gf(r,e,s){let t,n=Z.sequential_low_to_high,l=[0,20,30,40,50,90],u=_t(Lt,{show:!1,kind:"indicative_mph"},jf,Hf);K(r,u,c=>s(0,t=c));let a={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(c){r.$$.not_equal(t.show,c)&&(t.show=c,u.set(t))}function f(c){r.$$.not_equal(t.kind,c)&&(t.kind=c,u.set(t))}return[t,n,l,u,a,i,f]}class Ef extends V{constructor(e){super(),Q(this,e,Gf,Bf,J,{})}}function Uf(r){let e;return{c(){e=v("OS Road widths")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Wf(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Yf(r){let e,s,t,n,l,o,u,a,i;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Wf]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,s=T(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",n=T(),l=C("p"),o=v(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),a=v(".")},m(f,c){$(f,e,c),$(f,s,c),$(f,t,c),$(f,n,c),$(f,l,c),w(l,o),b(u,l,null),w(l,a),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),u.$set(m)},i(f){i||(_(u.$$.fragment,f),i=!0)},o(f){g(u.$$.fragment,f),i=!1},d(f){f&&(p(e),p(s),p(t),p(n),p(l)),k(u)}}}function Jf(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Yf]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&64&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function pl(r){let e,s;return e=new Be({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p:te,i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Vf(r){let e,s,t,n=r[5].average+"",l,o,u,a,i,f,c=r[5].minimum+"",m,d;return{c(){e=C("p"),s=v("Average width: "),t=C("b"),l=v(n),o=v(`
        meters`),u=T(),a=C("p"),i=v("Minimum width: "),f=C("b"),m=v(c),d=v(`
        meters`)},m(S,y){$(S,e,y),w(e,s),w(e,t),w(t,l),w(e,o),$(S,u,y),$(S,a,y),w(a,i),w(a,f),w(f,m),w(a,d)},p(S,y){y&32&&n!==(n=S[5].average+"")&&B(l,n),y&32&&c!==(c=S[5].minimum+"")&&B(m,c)},d(S){S&&(p(e),p(u),p(a))}}}function Qf(r){let e,s;return e=new oe({props:{$$slots:{default:[Vf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&96&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Kf(r){let e,s;const t=[H(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get","average"],r[2],r[1]),"line-width":Ae,"line-opacity":ee(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Qf]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new he({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&7?le(t,[o&0&&re(H(Tt)),o&0&&{sourceLayer:Tt},t[2],t[3],o&6&&{paint:{"line-color":be(["get","average"],l[2],l[1]),"line-width":Ae,"line-opacity":ee(1,.5)}},o&1&&{layout:{visibility:l[0]?"visible":"none"}}]):{};o&64&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function Zf(r){let e,s,t,n,l,o;function u(f){r[4](f)}let a={$$slots:{right:[Jf],default:[Uf]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&pl(r);return l=new _e({props:{url:`pmtiles://${Et()}/v1/${Tt}.pmtiles`,$$slots:{default:[Kf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0],Y(()=>s=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=pl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}let Tt="road_widths";function Xf(r,e,s){let t,n=Z.sequential_low_to_high,l=[0,5,10,15,20,100],o=ke(Tt);K(r,o,a=>s(0,t=a));function u(a){t=a,o.set(t)}return[t,n,l,o,u]}class xf extends V{constructor(e){super(),Q(this,e,Xf,Zf,J,{})}}function eu(r){let e,s,t;return e=new Re({props:{color:Z.trams}}),{c(){h(e.$$.fragment),s=v(`
  Trams`)},m(n,l){b(e,n,l),$(n,s,l),t=!0},p:te,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(s),k(e,n)}}}function tu(r){let e,s,t,n;return t=new Ze({}),{c(){e=C("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,s=T(),h(t.$$.fragment)},m(l,o){$(l,e,o),$(l,s,o),b(t,l,o),n=!0},p:te,i(l){n||(_(t.$$.fragment,l),n=!0)},o(l){g(t.$$.fragment,l),n=!1},d(l){l&&(p(e),p(s)),k(t,l)}}}function nu(r){let e,s,t;return s=new ce({props:{$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function lu(r){let e,s;const t=[H(Mt),{sourceLayer:Mt},{paint:{"line-color":Z.trams,"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new he({props:n}),e.$on("click",ru),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&1?le(t,[o&0&&re(H(Mt)),o&0&&{sourceLayer:Mt},t[2],o&1&&{layout:{visibility:l[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function su(r){let e,s,t,n,l;function o(a){r[2](a)}let u={$$slots:{right:[nu],default:[eu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),U.push(()=>W(e,"checked",o)),n=new _e({props:{url:`pmtiles://${pe()}/v1/${Mt}.pmtiles`,$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};i&8&&(f.$$scope={dirty:i,ctx:a}),!s&&i&1&&(s=!0,f.checked=a[0],Y(()=>s=!1)),e.$set(f);const c={};i&9&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Mt="trams";function ru(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function ou(r,e,s){let t,n=ke(Mt);K(r,n,o=>s(0,t=o));function l(o){t=o,n.set(t)}return[t,n,l]}class iu extends V{constructor(e){super(),Q(this,e,ou,su,J,{})}}function au(r){let e;return{c(){e=v("Bus stops")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function fu(r){let e;return{c(){e=v(`Bus Open Data Service
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function uu(r){let e,s,t,n,l,o,u,a,i;return t=new x({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[fu]},$$scope:{ctx:r}}}),a=new De({}),{c(){e=C("p"),s=v("Data from the "),h(t.$$.fragment),n=v(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),l=T(),o=C("p"),o.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,s),b(t,e,null),w(e,n),$(f,l,c),$(f,o,c),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),t.$set(m)},i(f){i||(_(t.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(t.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(o),p(u)),k(t),k(a,f)}}}function cu(r){let e,s,t;return s=new ce({props:{$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&64&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function ml(r){let e,s,t,n;return t=new Be({props:{colorScale:r[1],limits:r[2]}}),{c(){e=C("p"),e.textContent="Peak hourly frequency:",s=T(),h(t.$$.fragment)},m(l,o){$(l,e,o),$(l,s,o),b(t,l,o),n=!0},p:te,i(l){n||(_(t.$$.fragment,l),n=!0)},o(l){g(t.$$.fragment,l),n=!1},d(l){l&&(p(e),p(s)),k(t,l)}}}function $u(r){let e,s,t,n=r[5].stop_name+"",l,o,u,a,i,f=r[5].peak+"",c,m,d,S,y,L=r[5].peak_description+"",M,O,D,I,N,R=r[5].total+"",F,P,z=r[5].total_description+"",X,E;return{c(){e=C("p"),s=v("Stop name: "),t=C("b"),l=v(n),o=T(),u=C("p"),a=v("Peak: "),i=C("b"),c=v(f),m=v(`
        buses during the busiest hour of any day`),d=T(),S=C("p"),y=v("The peak hour is "),M=v(L),O=T(),D=C("p"),I=v("Total buses per day: "),N=C("b"),F=v(R),P=v(`
        (for `),X=v(z),E=v(", the busiest day of the week)")},m(q,A){$(q,e,A),w(e,s),w(e,t),w(t,l),$(q,o,A),$(q,u,A),w(u,a),w(u,i),w(i,c),w(u,m),$(q,d,A),$(q,S,A),w(S,y),w(S,M),$(q,O,A),$(q,D,A),w(D,I),w(D,N),w(N,F),w(D,P),w(D,X),w(D,E)},p(q,A){A&32&&n!==(n=q[5].stop_name+"")&&B(l,n),A&32&&f!==(f=q[5].peak+"")&&B(c,f),A&32&&L!==(L=q[5].peak_description+"")&&B(M,L),A&32&&R!==(R=q[5].total+"")&&B(F,R),A&32&&z!==(z=q[5].total_description+"")&&B(X,z)},d(q){q&&(p(e),p(o),p(u),p(d),p(S),p(O),p(D))}}}function pu(r){let e,s;return e=new oe({props:{$$slots:{default:[$u,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&96&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function mu(r){let e,s;const t=[H(Nt),{sourceLayer:Nt},{paint:{"circle-color":be(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[pu]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new $t({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&7?le(t,[o&0&&re(H(Nt)),o&0&&{sourceLayer:Nt},o&6&&{paint:{"circle-color":be(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},o&1&&{layout:{visibility:l[0]?"visible":"none"}},t[4],t[5]]):{};o&64&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function _u(r){let e,s,t,n,l,o;function u(f){r[4](f)}let a={$$slots:{right:[cu],default:[au]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&ml(r);return l=new _e({props:{url:`pmtiles://${pe()}/v1/${Nt}.pmtiles`,$$slots:{default:[mu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0],Y(()=>s=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=ml(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}let Nt="bus_stops";function gu(r,e,s){let t,n=Z.sequential_low_to_high,l=[0,3,10,20,30,100],o=ke(Nt);K(r,o,a=>s(0,t=a));function u(a){t=a,o.set(t)}return[t,n,l,o,u]}class du extends V{constructor(e){super(),Q(this,e,gu,_u,J,{})}}function hu(r){let e;return{c(){e=v("Crossings")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function bu(r){let e;return{c(){e=v("crossing")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function ku(r){let e,s,t,n,l,o,u;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[bu]},$$scope:{ctx:r}}}),o=new Ze({}),{c(){e=C("p"),s=v("This shows "),h(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),l=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,s),b(t,e,null),w(e,n),$(a,l,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(l)),k(t),k(o,a)}}}function wu(r){let e,s,t;return s=new ce({props:{$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function _l(r){let e,s;return e=new Kt({props:{rows:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p:te,i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function vu(r){let e,s=gl(r[4])+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&16&&s!==(s=gl(n[4])+"")&&B(t,s)},d(n){n&&p(e)}}}function yu(r){let e,s;return e=new oe({props:{$$slots:{default:[vu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&48&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Su(r){let e,s;const t=[H(Pt),{sourceLayer:Pt},{paint:{"circle-color":Ke(["get","crossing"],{traffic_signals:Z.signalized_crossing},Z.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[yu]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new $t({props:n}),e.$on("click",Lu),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&1?le(t,[o&0&&re(H(Pt)),o&0&&{sourceLayer:Pt},t[2],o&1&&{layout:{visibility:l[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function Cu(r){let e,s,t,n,l,o;function u(f){r[3](f)}let a={$$slots:{right:[wu],default:[hu]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&_l(r);return l=new _e({props:{url:`pmtiles://${pe()}/v1/${Pt}.pmtiles`,$$slots:{default:[Su]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0],Y(()=>s=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=_l(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}let Pt="crossings";function gl(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Lu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Tu(r,e,s){let t,n=ke(Pt);K(r,n,u=>s(0,t=u));let l=[["Signalized",Z.signalized_crossing],["Other",Z.other_crossing]];function o(u){t=u,n.set(t)}return[t,n,l,o]}class Mu extends V{constructor(e){super(),Q(this,e,Tu,Cu,J,{})}}function Nu(r){let e;return{c(){e=v("Gradients")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Pu(r){let e;return{c(){e=v("OS Terrain 50")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Ou(r){let e,s,t,n,l,o,u,a,i,f,c,m,d;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Pu]},$$scope:{ctx:r}}}),f=new De({}),m=new Ze({}),{c(){e=C("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,s=T(),t=C("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,n=T(),l=C("p"),o=v("This layer is built from "),h(u.$$.fragment),a=v(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),i=T(),h(f.$$.fragment),c=T(),h(m.$$.fragment)},m(S,y){$(S,e,y),$(S,s,y),$(S,t,y),$(S,n,y),$(S,l,y),w(l,o),b(u,l,null),w(l,a),$(S,i,y),b(f,S,y),$(S,c,y),b(m,S,y),d=!0},p(S,y){const L={};y&64&&(L.$$scope={dirty:y,ctx:S}),u.$set(L)},i(S){d||(_(u.$$.fragment,S),_(f.$$.fragment,S),_(m.$$.fragment,S),d=!0)},o(S){g(u.$$.fragment,S),g(f.$$.fragment,S),g(m.$$.fragment,S),d=!1},d(S){S&&(p(e),p(s),p(t),p(n),p(l),p(i),p(c)),k(u),k(f,S),k(m,S)}}}function Iu(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Ou]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&64&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function dl(r){let e,s;return e=new Be({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p:te,i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Ru(r){let e,s,t,n=Math.abs(r[5].gradient)/100+"",l,o;return{c(){e=C("p"),s=v("Gradient: "),t=C("b"),l=v(n),o=v(`
        %`)},m(u,a){$(u,e,a),w(e,s),w(e,t),w(t,l),w(e,o)},p(u,a){a&32&&n!==(n=Math.abs(u[5].gradient)/100+"")&&B(l,n)},d(u){u&&p(e)}}}function Du(r){let e,s;return e=new oe({props:{$$slots:{default:[Ru,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&96&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Au(r){let e,s,t,n;const l=[H(Je),{sourceLayer:Je},{manageHoverState:!0},{paint:{"line-color":be(["/",["abs",["get","gradient"]],100],r[2],r[1]),"line-width":Ae,"line-opacity":ee(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let o={$$slots:{default:[Du]},$$scope:{ctx:r}};for(let i=0;i<l.length;i+=1)o=ne(o,l[i]);e=new he({props:o});const u=[H(Je+"_arrows"),{sourceLayer:Je},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ne(a,u[i]);return t=new an({props:a}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,s,f),b(t,i,f),n=!0},p(i,f){const c=f&7?le(l,[f&0&&re(H(Je)),f&0&&{sourceLayer:Je},l[2],f&6&&{paint:{"line-color":be(["/",["abs",["get","gradient"]],100],i[2],i[1]),"line-width":Ae,"line-opacity":ee(1,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};f&64&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&1?le(u,[f&0&&re(H(Je+"_arrows")),f&0&&{sourceLayer:Je},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(s),k(e,i),k(t,i)}}}function Fu(r){let e,s,t,n,l,o;function u(f){r[4](f)}let a={$$slots:{right:[Iu],default:[Nu]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&dl(r);return l=new _e({props:{url:`pmtiles://${pe()}/v1/${Je}.pmtiles`,$$slots:{default:[Au]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0],Y(()=>s=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=dl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}let Je="gradient";function qu(r,e,s){let t,n=Z.gradient_flat_to_steep,l=[0,3,5,8,10,20,100],o=ke(Je);K(r,o,a=>s(0,t=a));function u(a){t=a,o.set(t)}return[t,n,l,o,u]}class zu extends V{constructor(e){super(),Q(this,e,qu,Fu,J,{})}}function Bu(r){let e,s,t;return{c(){e=C("img"),t=v(`
  Cycle parking`),Wt(e.src,s=bs)||G(e,"src",s),G(e,"alt","a logo representing cycle parking")},m(n,l){$(n,e,l),$(n,t,l)},p:te,d(n){n&&(p(e),p(t))}}}function ju(r){let e;return{c(){e=v("OpenStreetMap")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Hu(r){let e;return{c(){e=v("OpenStreetMap Carto")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Gu(r){let e,s,t,n,l,o,u,a,i,f,c;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[ju]},$$scope:{ctx:r}}}),a=new x({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Hu]},$$scope:{ctx:r}}}),f=new Ze({}),{c(){e=C("p"),s=v("Cycle parking, according to "),h(t.$$.fragment),n=v(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),l=T(),o=C("p"),u=v("Icon from "),h(a.$$.fragment),i=T(),h(f.$$.fragment)},m(m,d){$(m,e,d),w(e,s),b(t,e,null),w(e,n),$(m,l,d),$(m,o,d),w(o,u),b(a,o,null),$(m,i,d),b(f,m,d),c=!0},p(m,d){const S={};d&16&&(S.$$scope={dirty:d,ctx:m}),t.$set(S);const y={};d&16&&(y.$$scope={dirty:d,ctx:m}),a.$set(y)},i(m){c||(_(t.$$.fragment,m),_(a.$$.fragment,m),_(f.$$.fragment,m),c=!0)},o(m){g(t.$$.fragment,m),g(a.$$.fragment,m),g(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(l),p(o),p(i)),k(t),k(a),k(f,m)}}}function Eu(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Uu(r){let e,s,t,n=(r[3].capacity??"unknown")+"",l;return{c(){e=C("p"),s=v("Capacity: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&8&&n!==(n=(o[3].capacity??"unknown")+"")&&B(l,n)},d(o){o&&p(e)}}}function Wu(r){let e,s;return e=new oe({props:{$$slots:{default:[Uu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&24&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Yu(r){let e,s;const t=[H(Ot),{sourceLayer:Ot},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Wu]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new an({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&1?le(t,[o&0&&re(H(Ot)),o&0&&{sourceLayer:Ot},o&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function Ju(r){let e,s,t,n,l;function o(a){r[2](a)}let u={$$slots:{right:[Eu],default:[Bu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),U.push(()=>W(e,"checked",o)),n=new _e({props:{url:`pmtiles://${pe()}/v1/${Ot}.pmtiles`,$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!s&&i&1&&(s=!0,f.checked=a[0],Y(()=>s=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Ot="cycle_parking";function Vu(r,e,s){let t,n=ke(Ot);K(r,n,o=>s(0,t=o));function l(o){t=o,n.set(t)}return[t,n,l]}class Qu extends V{constructor(e){super(),Q(this,e,Vu,Ju,J,{})}}function Ku(r){let e;return{c(){e=v("Education")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Zu(r){let e,s,t,n;return t=new Ze({}),{c(){e=C("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,s=T(),h(t.$$.fragment)},m(l,o){$(l,e,o),$(l,s,o),b(t,l,o),n=!0},p:te,i(l){n||(_(t.$$.fragment,l),n=!0)},o(l){g(t.$$.fragment,l),n=!1},d(l){l&&(p(e),p(s)),k(t,l)}}}function Xu(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Zu]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&2048&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function hl(r){let e,s,t;return s=new nt({props:{$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){e=C("div"),h(s.$$.fragment),me(e,"border","1px solid black"),me(e,"padding","8px")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&2049&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function xu(r){let e,s,t;return e=new Re({props:{color:Z.education.schools}}),{c(){h(e.$$.fragment),s=v(`
        Schools`)},m(n,l){b(e,n,l),$(n,s,l),t=!0},p:te,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(s),k(e,n)}}}function ec(r){let e,s,t;return e=new Re({props:{color:Z.education.colleges}}),{c(){h(e.$$.fragment),s=v(`
        Colleges`)},m(n,l){b(e,n,l),$(n,s,l),t=!0},p:te,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(s),k(e,n)}}}function tc(r){let e,s,t;return e=new Re({props:{color:Z.education.universities}}),{c(){h(e.$$.fragment),s=v(`
        Universities`)},m(n,l){b(e,n,l),$(n,s,l),t=!0},p:te,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(s),k(e,n)}}}function nc(r){let e,s,t,n,l,o,u,a,i;function f(L){r[4](L)}let c={$$slots:{default:[xu]},$$scope:{ctx:r}};r[0].school!==void 0&&(c.checked=r[0].school),e=new se({props:c}),U.push(()=>W(e,"checked",f));function m(L){r[5](L)}let d={$$slots:{default:[ec]},$$scope:{ctx:r}};r[0].college!==void 0&&(d.checked=r[0].college),n=new se({props:d}),U.push(()=>W(n,"checked",m));function S(L){r[6](L)}let y={$$slots:{default:[tc]},$$scope:{ctx:r}};return r[0].university!==void 0&&(y.checked=r[0].university),u=new se({props:y}),U.push(()=>W(u,"checked",S)),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),o=T(),h(u.$$.fragment)},m(L,M){b(e,L,M),$(L,t,M),b(n,L,M),$(L,o,M),b(u,L,M),i=!0},p(L,M){const O={};M&2048&&(O.$$scope={dirty:M,ctx:L}),!s&&M&1&&(s=!0,O.checked=L[0].school,Y(()=>s=!1)),e.$set(O);const D={};M&2048&&(D.$$scope={dirty:M,ctx:L}),!l&&M&1&&(l=!0,D.checked=L[0].college,Y(()=>l=!1)),n.$set(D);const I={};M&2048&&(I.$$scope={dirty:M,ctx:L}),!a&&M&1&&(a=!0,I.checked=L[0].university,Y(()=>a=!1)),u.$set(I)},i(L){i||(_(e.$$.fragment,L),_(n.$$.fragment,L),_(u.$$.fragment,L),i=!0)},o(L){g(e.$$.fragment,L),g(n.$$.fragment,L),g(u.$$.fragment,L),i=!1},d(L){L&&(p(t),p(o)),k(e,L),k(n,L),k(u,L)}}}function lc(r){let e,s=(r[10].name??"Unnamed institution")+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&1024&&s!==(s=(n[10].name??"Unnamed institution")+"")&&B(t,s)},d(n){n&&p(e)}}}function sc(r){let e,s;return e=new oe({props:{$$slots:{default:[lc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&3072&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function rc(r){let e,s;const t=[H(It),{sourceLayer:It},{paint:{"fill-color":Ke(["get","type"],{school:Z.education.schools,college:Z.education.colleges,university:Z.education.universities},"grey"),"fill-opacity":ee(.7,1)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[2](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[sc]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new ze({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&5?le(t,[o&0&&re(H(It)),o&0&&{sourceLayer:It},t[2],o&1&&{layout:{visibility:l[0].show?"visible":"none"}},o&5&&{filter:l[2](l[0])},t[5],t[6]]):{};o&2048&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function oc(r){let e,s,t,n,l,o;function u(f){r[3](f)}let a={$$slots:{right:[Xu],default:[Ku]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0].show&&hl(r);return l=new _e({props:{url:`pmtiles://${pe()}/v1/${It}.pmtiles`,$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0].show,Y(()=>s=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=hl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&2049&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}let It="education";function ic(r){return{show:!0,school:r.includes("school"),college:r.includes("college"),university:r.includes("university")}}function ac(r,e,s){let t,n=["school","college","university"],l={show:!1,school:!0,college:!0,university:!0};function o(d){return d.show?n.filter(S=>d[S]).join(","):null}let u=_t(It,l,o,ic);K(r,u,d=>s(0,t=d));function a(d){let S=n.filter(y=>d[y]);return["in",["get","type"],["literal",S]]}function i(d){r.$$.not_equal(t.show,d)&&(t.show=d,u.set(t))}function f(d){r.$$.not_equal(t.school,d)&&(t.school=d,u.set(t))}function c(d){r.$$.not_equal(t.college,d)&&(t.college=d,u.set(t))}function m(d){r.$$.not_equal(t.university,d)&&(t.university=d,u.set(t))}return[t,u,a,i,f,c,m]}class fc extends V{constructor(e){super(),Q(this,e,ac,oc,J,{})}}function uc(r){let e,s,t,n;return e=new Re({props:{color:r[4]}}),{c(){h(e.$$.fragment),s=T(),t=v(r[2])},m(l,o){b(e,l,o),$(l,s,o),$(l,t,o),n=!0},p(l,o){(!n||o&4)&&B(t,l[2])},i(l){n||(_(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){l&&(p(s),p(t)),k(e,l)}}}function cc(r){let e;const s=r[6].default,t=at(s,r,r[8],null);return{c(){t&&t.c()},m(n,l){t&&t.m(n,l),e=!0},p(n,l){t&&t.p&&(!e||l&256)&&ft(t,s,n,n[8],e?ct(s,n[8],l,null):ut(n[8]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function $c(r){let e,s,t;return s=new ce({props:{$$slots:{default:[cc]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&256&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function pc(r){let e,s=(r[9].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&514&&s!==(s=(n[9].name??`Unnamed ${n[1]}`)+"")&&B(t,s)},d(n){n&&p(e)}}}function mc(r){let e,s;return e=new oe({props:{$$slots:{default:[pc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&770&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function _c(r){let e,s;const t=[H(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":ee(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[mc]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new ze({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&25?le(t,[o&1&&re(H(l[0])),o&1&&{sourceLayer:l[0]},o&16&&{paint:{"fill-color":l[4],"fill-opacity":ee(.7,1)}},o&8&&{layout:{visibility:l[3]?"visible":"none"}},t[4],t[5]]):{};o&258&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function gc(r){let e,s,t,n,l;function o(a){r[7](a)}let u={$$slots:{right:[$c],default:[uc]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new se({props:u}),U.push(()=>W(e,"checked",o)),n=new _e({props:{url:`pmtiles://${pe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};i&260&&(f.$$scope={dirty:i,ctx:a}),!s&&i&8&&(s=!0,f.checked=a[3],Y(()=>s=!1)),e.$set(f);const c={};i&1&&(c.url=`pmtiles://${pe()}/v1/${a[0]}.pmtiles`),i&267&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}function dc(r,e,s){let t,{$$slots:n={},$$scope:l}=e,{name:o}=e,{singularNoun:u}=e,{pluralNoun:a}=e,i=Z[o],f=ke(o);K(r,f,m=>s(3,t=m));function c(m){t=m,f.set(t)}return r.$$set=m=>{"name"in m&&s(0,o=m.name),"singularNoun"in m&&s(1,u=m.singularNoun),"pluralNoun"in m&&s(2,a=m.pluralNoun),"$$scope"in m&&s(8,l=m.$$scope)},[o,u,a,t,i,f,n,c,l]}class $s extends V{constructor(e){super(),Q(this,e,dc,gc,J,{name:0,singularNoun:1,pluralNoun:2})}}function hc(r){let e;return{c(){e=v("hospital")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function bc(r){let e,s,t,n,l,o,u;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[hc]},$$scope:{ctx:r}}}),o=new Ze({}),{c(){e=C("p"),s=v("This shows "),h(t.$$.fragment),n=v(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),l=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,s),b(t,e,null),w(e,n),$(a,l,i),b(o,a,i),u=!0},p(a,i){const f={};i&1&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(l)),k(t),k(o,a)}}}function kc(r){let e,s;return e=new $s({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,[n]){const l={};n&1&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}class wc extends V{constructor(e){super(),Q(this,e,null,kc,J,{})}}function vc(r){let e,s,t;return{c(){e=C("img"),t=v(`
  Railway Stations`),Wt(e.src,s=ks)||G(e,"src",s),G(e,"alt","A logo representing a train")},m(n,l){$(n,e,l),$(n,t,l)},p:te,d(n){n&&(p(e),p(t))}}}function yc(r){let e;return{c(){e=v("railway station")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Sc(r){let e;return{c(){e=v(`National Rail
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Cc(r){let e,s,t,n,l,o,u,a,i,f,c,m;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[yc]},$$scope:{ctx:r}}}),a=new x({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Sc]},$$scope:{ctx:r}}}),c=new Ze({}),{c(){e=C("p"),s=v("This shows "),h(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),l=T(),o=C("p"),u=v("Icon from "),h(a.$$.fragment),i=v(". (Note that not all stations shown are National Rail.)"),f=T(),h(c.$$.fragment)},m(d,S){$(d,e,S),w(e,s),b(t,e,null),w(e,n),$(d,l,S),$(d,o,S),w(o,u),b(a,o,null),w(o,i),$(d,f,S),b(c,d,S),m=!0},p(d,S){const y={};S&16&&(y.$$scope={dirty:S,ctx:d}),t.$set(y);const L={};S&16&&(L.$$scope={dirty:S,ctx:d}),a.$set(L)},i(d){m||(_(t.$$.fragment,d),_(a.$$.fragment,d),_(c.$$.fragment,d),m=!0)},o(d){g(t.$$.fragment,d),g(a.$$.fragment,d),g(c.$$.fragment,d),m=!1},d(d){d&&(p(e),p(l),p(o),p(f)),k(t),k(a),k(c,d)}}}function Lc(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Tc(r){let e,s=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&8&&s!==(s=(n[3].name??"Unnamed railway station")+"")&&B(t,s)},d(n){n&&p(e)}}}function Mc(r){let e,s;return e=new oe({props:{$$slots:{default:[Tc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&24&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Nc(r){let e,s;const t=[H(Vt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Mc]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new an({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&1?le(t,[o&0&&re(H(Vt)),o&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function Pc(r){let e,s,t,n,l;function o(a){r[2](a)}let u={$$slots:{right:[Lc],default:[vc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),U.push(()=>W(e,"checked",o)),n=new pt({props:{data:`${pe()}/v1/${Vt}.geojson`,$$slots:{default:[Nc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!s&&i&1&&(s=!0,f.checked=a[0],Y(()=>s=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Vt="railway_stations";function Oc(r,e,s){let t,n=ke(Vt);K(r,n,o=>s(0,t=o));function l(o){t=o,n.set(t)}return[t,n,l]}class Ic extends V{constructor(e){super(),Q(this,e,Oc,Pc,J,{})}}function Rc(r){let e;return{c(){e=v("sports pitches")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Dc(r){let e;return{c(){e=v("sports centres")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Ac(r){let e,s,t,n,l,o,u,a,i;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Rc]},$$scope:{ctx:r}}}),l=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Dc]},$$scope:{ctx:r}}}),a=new Ze({}),{c(){e=C("p"),s=v("This shows "),h(t.$$.fragment),n=v(" and "),h(l.$$.fragment),o=v(" data from OpenStreetMap (as of 9 August 2023)."),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,s),b(t,e,null),w(e,n),b(l,e,null),w(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){i||(_(t.$$.fragment,f),_(l.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(t.$$.fragment,f),g(l.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),k(t),k(l),k(a,f)}}}function Fc(r){let e,s;return e=new $s({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,[n]){const l={};n&1&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}class qc extends V{constructor(e){super(),Q(this,e,null,Fc,J,{})}}function zc(r){let e;return{c(){e=v("Stats19")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Bc(r){let e;return{c(){e=v("DfT stats19")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function jc(r){let e;return{c(){e=v("documented by DfT")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Hc(r){let e,s,t,n,l,o,u,a,i,f,c,m,d,S,y,L,M,O,D,I,N,R,F;return t=new x({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Bc]},$$scope:{ctx:r}}}),M=new x({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[jc]},$$scope:{ctx:r}}}),R=new De({}),{c(){e=C("p"),s=v("This layer shows collisions recorded in the "),h(t.$$.fragment),n=v(" dataset. Please note these limitations:"),l=T(),o=C("ul"),u=C("li"),u.textContent="Only collisions between 2017 and 2022 are included",a=T(),i=C("li"),i.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=T(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,m=T(),d=C("li"),d.textContent='The "pedestrians" category also include mobility scooters',S=T(),y=C("li"),L=v("All limitations "),h(M.$$.fragment),O=v(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),D=T(),I=C("p"),I.textContent="You can click a point to open the full report, thanks to CycleStreets.",N=T(),h(R.$$.fragment)},m(P,z){$(P,e,z),w(e,s),b(t,e,null),w(e,n),$(P,l,z),$(P,o,z),w(o,u),w(o,a),w(o,i),w(o,f),w(o,c),w(o,m),w(o,d),w(o,S),w(o,y),w(y,L),b(M,y,null),w(y,O),$(P,D,z),$(P,I,z),$(P,N,z),b(R,P,z),F=!0},p(P,z){const X={};z&4194304&&(X.$$scope={dirty:z,ctx:P}),t.$set(X);const E={};z&4194304&&(E.$$scope={dirty:z,ctx:P}),M.$set(E)},i(P){F||(_(t.$$.fragment,P),_(M.$$.fragment,P),_(R.$$.fragment,P),F=!0)},o(P){g(t.$$.fragment,P),g(M.$$.fragment,P),g(R.$$.fragment,P),F=!1},d(P){P&&(p(e),p(l),p(o),p(D),p(I),p(N)),k(t),k(M),k(R,P)}}}function Gc(r){let e,s,t;return s=new ce({props:{$$slots:{default:[Hc]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&4194304&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function bl(r){let e,s,t,n,l,o,u,a,i,f,c,m,d;return s=new nt({props:{small:!0,$$slots:{default:[Jc]},$$scope:{ctx:r}}}),f=new Kt({props:{rows:r[9]}}),{c(){e=C("div"),h(s.$$.fragment),t=T(),n=C("div"),l=v(`Filter years:
      `),o=C("input"),u=v(`
      -
      `),a=C("input"),i=T(),h(f.$$.fragment),G(o,"type","number"),G(o,"min",2017),G(o,"max",2022),G(o,"class","svelte-1ft65rw"),G(a,"type","number"),G(a,"min",2017),G(a,"max",2022),G(a,"class","svelte-1ft65rw"),me(e,"border","1px solid black"),me(e,"padding","8px")},m(S,y){$(S,e,y),b(s,e,null),w(e,t),w(e,n),w(n,l),w(n,o),Ve(o,r[0].minYear),w(n,u),w(n,a),Ve(a,r[0].maxYear),w(e,i),b(f,e,null),c=!0,m||(d=[xe(o,"input",r[15]),xe(a,"input",r[16])],m=!0)},p(S,y){const L={};y&4194305&&(L.$$scope={dirty:y,ctx:S}),s.$set(L),y&1&&Gt(o.value)!==S[0].minYear&&Ve(o,S[0].minYear),y&1&&Gt(a.value)!==S[0].maxYear&&Ve(a,S[0].maxYear)},i(S){c||(_(s.$$.fragment,S),_(f.$$.fragment,S),c=!0)},o(S){g(s.$$.fragment,S),g(f.$$.fragment,S),c=!1},d(S){S&&p(e),k(s),k(f),m=!1,fs(d)}}}function Ec(r){let e;return{c(){e=v("Pedestrians")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Uc(r){let e;return{c(){e=v("Cyclists")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Wc(r){let e;return{c(){e=v("Horse riders")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Yc(r){let e;return{c(){e=v("Other")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Jc(r){let e,s,t,n,l,o,u,a,i,f,c,m;function d(N){r[11](N)}let S={$$slots:{default:[Ec]},$$scope:{ctx:r}};r[0].pedestrians!==void 0&&(S.checked=r[0].pedestrians),e=new se({props:S}),U.push(()=>W(e,"checked",d));function y(N){r[12](N)}let L={$$slots:{default:[Uc]},$$scope:{ctx:r}};r[0].cyclists!==void 0&&(L.checked=r[0].cyclists),n=new se({props:L}),U.push(()=>W(n,"checked",y));function M(N){r[13](N)}let O={$$slots:{default:[Wc]},$$scope:{ctx:r}};r[0].horseRiders!==void 0&&(O.checked=r[0].horseRiders),u=new se({props:O}),U.push(()=>W(u,"checked",M));function D(N){r[14](N)}let I={$$slots:{default:[Yc]},$$scope:{ctx:r}};return r[0].other!==void 0&&(I.checked=r[0].other),f=new se({props:I}),U.push(()=>W(f,"checked",D)),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),o=T(),h(u.$$.fragment),i=T(),h(f.$$.fragment)},m(N,R){b(e,N,R),$(N,t,R),b(n,N,R),$(N,o,R),b(u,N,R),$(N,i,R),b(f,N,R),m=!0},p(N,R){const F={};R&4194304&&(F.$$scope={dirty:R,ctx:N}),!s&&R&1&&(s=!0,F.checked=N[0].pedestrians,Y(()=>s=!1)),e.$set(F);const P={};R&4194304&&(P.$$scope={dirty:R,ctx:N}),!l&&R&1&&(l=!0,P.checked=N[0].cyclists,Y(()=>l=!1)),n.$set(P);const z={};R&4194304&&(z.$$scope={dirty:R,ctx:N}),!a&&R&1&&(a=!0,z.checked=N[0].horseRiders,Y(()=>a=!1)),u.$set(z);const X={};R&4194304&&(X.$$scope={dirty:R,ctx:N}),!c&&R&1&&(c=!0,X.checked=N[0].other,Y(()=>c=!1)),f.$set(X)},i(N){m||(_(e.$$.fragment,N),_(n.$$.fragment,N),_(u.$$.fragment,N),_(f.$$.fragment,N),m=!0)},o(N){g(e.$$.fragment,N),g(n.$$.fragment,N),g(u.$$.fragment,N),g(f.$$.fragment,N),m=!1},d(N){N&&(p(t),p(o),p(i)),k(e,N),k(n,N),k(u,N),k(f,N)}}}function kl(r){let e,s,t,n=r[3][r[21].pedestrian_location]+"",l;return{c(){e=C("p"),s=v("Pedestrian location: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&2097152&&n!==(n=o[3][o[21].pedestrian_location]+"")&&B(l,n)},d(o){o&&p(e)}}}function wl(r){let e,s,t,n=r[4][r[21].pedestrian_movement]+"",l;return{c(){e=C("p"),s=v("Pedestrian movement: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&2097152&&n!==(n=o[4][o[21].pedestrian_movement]+"")&&B(l,n)},d(o){o&&p(e)}}}function Vc(r){let e,s,t,n=r[21].year+"",l,o,u,a,i,f=r[5][r[21].severity]+"",c,m,d,S,y,L=vl(r[21])+"",M,O,D,I,N,R=r[21].pedestrian_location&&kl(r),F=r[21].pedestrian_movement&&wl(r);return{c(){e=C("p"),s=v("Year: "),t=C("b"),l=v(n),o=T(),u=C("p"),a=v("Severity: "),i=C("b"),c=v(f),m=T(),d=C("p"),S=v("Casualties: "),y=C("b"),M=v(L),O=T(),R&&R.c(),D=T(),F&&F.c(),I=T(),N=C("p"),N.textContent="Click to open full report in CycleStreets"},m(P,z){$(P,e,z),w(e,s),w(e,t),w(t,l),$(P,o,z),$(P,u,z),w(u,a),w(u,i),w(i,c),$(P,m,z),$(P,d,z),w(d,S),w(d,y),w(y,M),$(P,O,z),R&&R.m(P,z),$(P,D,z),F&&F.m(P,z),$(P,I,z),$(P,N,z)},p(P,z){z&2097152&&n!==(n=P[21].year+"")&&B(l,n),z&2097152&&f!==(f=P[5][P[21].severity]+"")&&B(c,f),z&2097152&&L!==(L=vl(P[21])+"")&&B(M,L),P[21].pedestrian_location?R?R.p(P,z):(R=kl(P),R.c(),R.m(D.parentNode,D)):R&&(R.d(1),R=null),P[21].pedestrian_movement?F?F.p(P,z):(F=wl(P),F.c(),F.m(I.parentNode,I)):F&&(F.d(1),F=null)},d(P){P&&(p(e),p(o),p(u),p(m),p(d),p(O),p(D),p(I),p(N)),R&&R.d(P),F&&F.d(P)}}}function Qc(r){let e,s;return e=new oe({props:{$$slots:{default:[Vc,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&6291456&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Kc(r){let e,s;const t=[H(Rt),{sourceLayer:Rt},{paint:{"circle-color":be(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[1]},{layout:{visibility:r[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Qc]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new $t({props:n}),e.$on("click",xc),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&451?le(t,[o&0&&re(H(Rt)),o&0&&{sourceLayer:Rt},o&448&&{paint:{"circle-color":be(["get","severity"],[1,2,3],[l[6],l[7],l[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&2&&{filter:l[1]},o&1&&{layout:{visibility:l[0].show?"visible":"none"}},t[5],t[6]]):{};o&4194304&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function Zc(r){let e,s,t,n,l,o;function u(f){r[10](f)}let a={$$slots:{right:[Gc],default:[zc]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0].show&&bl(r);return l=new _e({props:{url:`pmtiles://${pe()}/v1/${Rt}.pmtiles`,$$slots:{default:[Kc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&4194304&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0].show,Y(()=>s=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=bl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&4194307&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}let Rt="stats19";function Xc(r){let[e,s,t]=r.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(s),maxYear:parseInt(t)}}function vl(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function xc(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function e$(r,e,s){let t,n,l=["pedestrians","cyclists","horseRiders","other"],o={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function u(P){return P.show?`${l.filter(X=>P[X]).join(",")}/${P.minYear}/${P.maxYear}`:null}let a=_t(Rt,o,u,Xc);K(r,a,P=>s(0,n=P));function i(P,z,X,E,q,A){let j=["any"];return n.pedestrians&&j.push(["get","pedestrian"]),n.cyclists&&j.push(["get","cyclist"]),n.horseRiders&&j.push(["get","horse_rider"]),n.other&&j.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],j]}let f={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},m={1:"Fatal",2:"Serious",3:"Slight"},d=Z.sequential_low_to_high[4],S=Z.sequential_low_to_high[2],y=Z.sequential_low_to_high[0],L=[["Fatal",d],["Serious",S],["Slight",y]];function M(P){r.$$.not_equal(n.show,P)&&(n.show=P,a.set(n))}function O(P){r.$$.not_equal(n.pedestrians,P)&&(n.pedestrians=P,a.set(n))}function D(P){r.$$.not_equal(n.cyclists,P)&&(n.cyclists=P,a.set(n))}function I(P){r.$$.not_equal(n.horseRiders,P)&&(n.horseRiders=P,a.set(n))}function N(P){r.$$.not_equal(n.other,P)&&(n.other=P,a.set(n))}function R(){n.minYear=Gt(this.value),a.set(n)}function F(){n.maxYear=Gt(this.value),a.set(n)}return r.$$.update=()=>{r.$$.dirty&1&&s(1,t=i(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,a,f,c,m,d,S,y,L,M,O,D,I,N,R,F]}class t$ extends V{constructor(e){super(),Q(this,e,e$,Zc,J,{})}}function n$(r){let e;return{c(){e=v("Vehicle counts")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function l$(r){let e;return{c(){e=v(`DfT road statistics
        `)},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function s$(r){let e;return{c(){e=v("methodology")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function r$(r){let e,s,t,n,l,o,u,a,i,f,c;return t=new x({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[l$]},$$scope:{ctx:r}}}),l=new x({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[s$]},$$scope:{ctx:r}}}),f=new De({}),{c(){e=C("p"),s=v("AADF (annual average daily flow) data from "),h(t.$$.fragment),n=v(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),h(l.$$.fragment),o=v(" for details and caveats about the measurements."),u=T(),a=C("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,i=T(),h(f.$$.fragment)},m(m,d){$(m,e,d),w(e,s),b(t,e,null),w(e,n),b(l,e,null),w(e,o),$(m,u,d),$(m,a,d),$(m,i,d),b(f,m,d),c=!0},p(m,d){const S={};d&128&&(S.$$scope={dirty:d,ctx:m}),t.$set(S);const y={};d&128&&(y.$$scope={dirty:d,ctx:m}),l.$set(y)},i(m){c||(_(t.$$.fragment,m),_(l.$$.fragment,m),_(f.$$.fragment,m),c=!0)},o(m){g(t.$$.fragment,m),g(l.$$.fragment,m),g(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(u),p(a),p(i)),k(t),k(l),k(f,m)}}}function o$(r){let e,s,t;return s=new ce({props:{$$slots:{default:[r$]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&128&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function yl(r){let e,s;return e=new Be({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p:te,i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function i$(r){let e,s=r[6].location+"",t,n,l,o,u=r[6].year+"",a,i,f,c=r[6].motor_vehicles.toLocaleString()+"",m,d,S,y,L=r[6].year+"",M,O,D,I=r[6].pedal_cycles.toLocaleString()+"",N,R,F,P,z,X=r[6].method+"",E;return{c(){e=C("h2"),t=v(s),n=T(),l=C("p"),o=v("Total motor vehicles ("),a=v(u),i=v(` AADF):
        `),f=C("b"),m=v(c),d=T(),S=C("p"),y=v("Total pedal cycles ("),M=v(L),O=v(` AADF):
        `),D=C("b"),N=v(I),R=T(),F=C("p"),P=v("Count method: "),z=C("b"),E=v(X)},m(q,A){$(q,e,A),w(e,t),$(q,n,A),$(q,l,A),w(l,o),w(l,a),w(l,i),w(l,f),w(f,m),$(q,d,A),$(q,S,A),w(S,y),w(S,M),w(S,O),w(S,D),w(D,N),$(q,R,A),$(q,F,A),w(F,P),w(F,z),w(z,E)},p(q,A){A&64&&s!==(s=q[6].location+"")&&B(t,s),A&64&&u!==(u=q[6].year+"")&&B(a,u),A&64&&c!==(c=q[6].motor_vehicles.toLocaleString()+"")&&B(m,c),A&64&&L!==(L=q[6].year+"")&&B(M,L),A&64&&I!==(I=q[6].pedal_cycles.toLocaleString()+"")&&B(N,I),A&64&&X!==(X=q[6].method+"")&&B(E,X)},d(q){q&&(p(e),p(n),p(l),p(d),p(S),p(R),p(F))}}}function a$(r){let e,s;return e=new oe({props:{$$slots:{default:[i$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&192&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function f$(r){let e,s;const t=[H(Dt),{sourceLayer:Dt},{paint:{"circle-color":be(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[a$]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new $t({props:n}),e.$on("click",c$),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&7?le(t,[o&0&&re(H(Dt)),o&0&&{sourceLayer:Dt},o&6&&{paint:{"circle-color":be(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},o&1&&{layout:{visibility:l[0]?"visible":"none"}},t[4],t[5]]):{};o&128&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function u$(r){let e,s,t,n,l,o;function u(f){r[5](f)}let a={$$slots:{right:[o$],default:[n$]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&yl(r);return l=new _e({props:{url:`pmtiles://${pe()}/v1/${Dt}.pmtiles`,$$slots:{default:[f$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&128&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0],Y(()=>s=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=yl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&129&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}let Dt="vehicle_counts";function c$(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function $$(r,e,s){let t,n=Z.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],u=ke(Dt);K(r,u,i=>s(0,t=i));function a(i){t=i,u.set(t)}return[t,n,l,o,u,a]}class p$ extends V{constructor(e){super(),Q(this,e,$$,u$,J,{})}}function Sl(r,e,s){const t=r.slice();return t[6]=e[s],t}function m$(r){let e;return{c(){e=v("Issues & Conflicts")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function _$(r){let e,s,t;return{c(){e=C("p"),e.textContent=`Critical issues and policy conflicts from the Design Assistance Log.
        This is internally collected data.`,s=T(),t=C("p"),t.textContent=`This layer is manually copied from a copy of the DA Log. The data is
        recent as of 10 June 2024.`},m(n,l){$(n,e,l),$(n,s,l),$(n,t,l)},p:te,d(n){n&&(p(e),p(s),p(t))}}}function g$(r){let e,s,t;return s=new ce({props:{$$slots:{default:[_$]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(s.$$.fragment),G(e,"slot","right")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&512&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Cl(r){let e,s;return e=new Kt({props:{rows:r[3]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p:te,i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function d$(r){let e,s=r[5]["Issue ID"]+"",t,n,l=r[5].Code+"",o,u,a,i=r[5]["Issue Stage"]+"",f;return{c(){e=C("h2"),t=v(s),n=v(" - "),o=v(l),u=T(),a=C("p"),f=v(i)},m(c,m){$(c,e,m),w(e,t),w(e,n),w(e,o),$(c,u,m),$(c,a,m),w(a,f)},p(c,m){m&32&&s!==(s=c[5]["Issue ID"]+"")&&B(t,s),m&32&&l!==(l=c[5].Code+"")&&B(o,l),m&32&&i!==(i=c[5]["Issue Stage"]+"")&&B(f,i)},d(c){c&&(p(e),p(u),p(a))}}}function Ll(r){let e,s=r[6]+"",t,n,l,o=r[5][r[6]]+"",u,a;return{c(){e=C("p"),t=v(s),n=v(`:
            `),l=C("b"),u=v(o),a=T()},m(i,f){$(i,e,f),w(e,t),w(e,n),w(e,l),w(l,u),w(e,a)},p(i,f){f&32&&o!==(o=i[5][i[6]]+"")&&B(u,o)},d(i){i&&p(e)}}}function h$(r){let e,s=Se(r[2]),t=[];for(let n=0;n<s.length;n+=1)t[n]=Ll(Sl(r,s,n));return{c(){e=C("div");for(let n=0;n<t.length;n+=1)t[n].c();me(e,"max-width","30vw"),me(e,"max-height","60vh"),me(e,"overflow","auto")},m(n,l){$(n,e,l);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,l){if(l&36){s=Se(n[2]);let o;for(o=0;o<s.length;o+=1){const u=Sl(n,s,o);t[o]?t[o].p(u,l):(t[o]=Ll(u),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=s.length}},d(n){n&&p(e),et(t,n)}}}function b$(r){let e,s,t,n;return e=new oe({props:{openOn:"hover",$$slots:{default:[d$,({props:l})=>({5:l}),({props:l})=>l?32:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[h$,({props:l})=>({5:l}),({props:l})=>l?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(l,o){b(e,l,o),$(l,s,o),b(t,l,o),n=!0},p(l,o){const u={};o&544&&(u.$$scope={dirty:o,ctx:l}),e.$set(u);const a={};o&544&&(a.$$scope={dirty:o,ctx:l}),t.$set(a)},i(l){n||(_(e.$$.fragment,l),_(t.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),g(t.$$.fragment,l),n=!1},d(l){l&&p(s),k(e,l),k(t,l)}}}function k$(r){let e,s;const t=[H(sn),{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[b$]},$$scope:{ctx:r}};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new $t({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&9?le(t,[o&0&&re(H(sn)),o&8&&{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(l[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&1&&{layout:{visibility:l[0]?"visible":"none"}},t[3],t[4]]):{};o&512&&(u.$$scope={dirty:o,ctx:l}),e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function w$(r){let e,s,t,n,l,o;function u(f){r[4](f)}let a={$$slots:{right:[g$],default:[m$]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new se({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&Cl(r);return l=new pt({props:{data:`${Et()}/v1/problems.geojson.gz`,$$slots:{default:[k$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(l.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(l,f,c),o=!0},p(f,[c]){const m={};c&512&&(m.$$scope={dirty:c,ctx:f}),!s&&c&1&&(s=!0,m.checked=f[0],Y(()=>s=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=Cl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),g(i,1,1,()=>{i=null}),ae());const d={};c&513&&(d.$$scope={dirty:c,ctx:f}),l.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(l.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(l.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(l,f)}}}let sn="problems";function v$(r,e,s){let t,n=ke(sn);K(r,n,a=>s(0,t=a));let l=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],o=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function u(a){t=a,n.set(t)}return[t,n,l,o,u]}class y$ extends V{constructor(e){super(),Q(this,e,v$,w$,J,{})}}function S$(r){let e,s,t,n,l,o,u,a;return e=new fc({}),t=new wc({}),l=new qc({}),u=new Ic({}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment),n=T(),h(l.$$.fragment),o=T(),h(u.$$.fragment)},m(i,f){b(e,i,f),$(i,s,f),b(t,i,f),$(i,n,f),b(l,i,f),$(i,o,f),b(u,i,f),a=!0},i(i){a||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(l.$$.fragment,i),_(u.$$.fragment,i),a=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(l.$$.fragment,i),g(u.$$.fragment,i),a=!1},d(i){i&&(p(s),p(n),p(o)),k(e,i),k(t,i),k(l,i),k(u,i)}}}function C$(r){let e,s;return e=new nt({props:{small:!0,$$slots:{default:[S$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&64&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function L$(r){let e,s,t,n,l,o,u,a,i,f,c,m;return e=new Sa({}),t=new ef({}),l=new Da({}),u=new Ua({}),i=new Qu({}),c=new Mu({}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment),n=T(),h(l.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment),f=T(),h(c.$$.fragment)},m(d,S){b(e,d,S),$(d,s,S),b(t,d,S),$(d,n,S),b(l,d,S),$(d,o,S),b(u,d,S),$(d,a,S),b(i,d,S),$(d,f,S),b(c,d,S),m=!0},i(d){m||(_(e.$$.fragment,d),_(t.$$.fragment,d),_(l.$$.fragment,d),_(u.$$.fragment,d),_(i.$$.fragment,d),_(c.$$.fragment,d),m=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(l.$$.fragment,d),g(u.$$.fragment,d),g(i.$$.fragment,d),g(c.$$.fragment,d),m=!1},d(d){d&&(p(s),p(n),p(o),p(a),p(f)),k(e,d),k(t,d),k(l,d),k(u,d),k(i,d),k(c,d)}}}function T$(r){let e,s;return e=new nt({props:{small:!0,$$slots:{default:[L$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&64&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function M$(r){let e,s,t,n,l,o;return e=new ua({}),t=new iu({}),l=new du({}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment),n=T(),h(l.$$.fragment)},m(u,a){b(e,u,a),$(u,s,a),b(t,u,a),$(u,n,a),b(l,u,a),o=!0},i(u){o||(_(e.$$.fragment,u),_(t.$$.fragment,u),_(l.$$.fragment,u),o=!0)},o(u){g(e.$$.fragment,u),g(t.$$.fragment,u),g(l.$$.fragment,u),o=!1},d(u){u&&(p(s),p(n)),k(e,u),k(t,u),k(l,u)}}}function N$(r){let e,s,t,n,l,o,u,a,i,f;return e=new bi({}),t=new Ki({}),l=new Lo({}),u=new Vo({}),i=new ai({}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment),n=T(),h(l.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment)},m(c,m){b(e,c,m),$(c,s,m),b(t,c,m),$(c,n,m),b(l,c,m),$(c,o,m),b(u,c,m),$(c,a,m),b(i,c,m),f=!0},i(c){f||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(l.$$.fragment,c),_(u.$$.fragment,c),_(i.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(l.$$.fragment,c),g(u.$$.fragment,c),g(i.$$.fragment,c),f=!1},d(c){c&&(p(s),p(n),p(o),p(a)),k(e,c),k(t,c),k(l,c),k(u,c),k(i,c)}}}function P$(r){let e,s;return e=new nt({props:{small:!0,$$slots:{default:[N$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&64&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function O$(r){let e,s,t,n;return e=new mo({}),t=new qo({}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(l,o){b(e,l,o),$(l,s,o),b(t,l,o),n=!0},i(l){n||(_(e.$$.fragment,l),_(t.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),g(t.$$.fragment,l),n=!1},d(l){l&&p(s),k(e,l),k(t,l)}}}function I$(r){let e,s;return e=new nt({props:{small:!0,$$slots:{default:[O$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&64&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function R$(r){let e,s,t,n,l,o,u,a;return e=new xf({}),t=new mf({}),l=new Ef({}),u=new y$({}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment),n=T(),h(l.$$.fragment),o=T(),h(u.$$.fragment)},m(i,f){b(e,i,f),$(i,s,f),b(t,i,f),$(i,n,f),b(l,i,f),$(i,o,f),b(u,i,f),a=!0},i(i){a||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(l.$$.fragment,i),_(u.$$.fragment,i),a=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(l.$$.fragment,i),g(u.$$.fragment,i),a=!1},d(i){i&&(p(s),p(n),p(o)),k(e,i),k(t,i),k(l,i),k(u,i)}}}function D$(r){let e,s,t,n,l,o,u,a,i=tn()=="Private (development)",f,c,m,d,S;e=new p$({}),t=new t$({}),l=new Pf({}),u=new zu({});let y=i&&R$();return c=new Ni({}),d=new Bi({}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment),n=T(),h(l.$$.fragment),o=T(),h(u.$$.fragment),a=T(),y&&y.c(),f=T(),h(c.$$.fragment),m=T(),h(d.$$.fragment)},m(L,M){b(e,L,M),$(L,s,M),b(t,L,M),$(L,n,M),b(l,L,M),$(L,o,M),b(u,L,M),$(L,a,M),y&&y.m(L,M),$(L,f,M),b(c,L,M),$(L,m,M),b(d,L,M),S=!0},p:te,i(L){S||(_(e.$$.fragment,L),_(t.$$.fragment,L),_(l.$$.fragment,L),_(u.$$.fragment,L),_(y),_(c.$$.fragment,L),_(d.$$.fragment,L),S=!0)},o(L){g(e.$$.fragment,L),g(t.$$.fragment,L),g(l.$$.fragment,L),g(u.$$.fragment,L),g(y),g(c.$$.fragment,L),g(d.$$.fragment,L),S=!1},d(L){L&&(p(s),p(n),p(o),p(a),p(f),p(m)),k(e,L),k(t,L),k(l,L),k(u,L),y&&y.d(L),k(c,L),k(d,L)}}}function A$(r){let e,s;return e=new nt({props:{small:!0,$$slots:{default:[D$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&64&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function F$(r){let e,s,t,n,l;function o(a){r[5](a)}let u={cfg:r[4],map:r[2]};return r[0]!==void 0&&(u.enabled=r[0]),e=new Ds({props:u}),U.push(()=>W(e,"enabled",o)),n=new gr({}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),l=!0},p(a,i){const f={};i&4&&(f.map=a[2]),!s&&i&1&&(s=!0,f.enabled=a[0],Y(()=>s=!1)),e.$set(f)},i(a){l||(_(e.$$.fragment,a),_(n.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),l=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}function q$(r){let e,s,t,n,l,o,u,a,i,f,c,m,d,S,y,L;return e=new qe({props:{label:"Trip generators",$$slots:{default:[C$]},$$scope:{ctx:r}}}),t=new qe({props:{label:"Existing infrastructure",$$slots:{default:[T$]},$$scope:{ctx:r}}}),l=new qe({props:{label:"Public transport",$$slots:{default:[M$]},$$scope:{ctx:r}}}),u=new qe({props:{label:"Boundaries",$$slots:{default:[P$]},$$scope:{ctx:r}}}),i=new qe({props:{label:"Census",$$slots:{default:[I$]},$$scope:{ctx:r}}}),c=new qe({props:{label:"Other",$$slots:{default:[A$]},$$scope:{ctx:r}}}),d=new qe({props:{label:"Tools",$$slots:{default:[F$]},$$scope:{ctx:r}}}),y=new Is({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment),n=T(),h(l.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment),f=T(),h(c.$$.fragment),m=T(),h(d.$$.fragment),S=T(),h(y.$$.fragment)},m(M,O){b(e,M,O),$(M,s,O),b(t,M,O),$(M,n,O),b(l,M,O),$(M,o,O),b(u,M,O),$(M,a,O),b(i,M,O),$(M,f,O),b(c,M,O),$(M,m,O),b(d,M,O),$(M,S,O),b(y,M,O),L=!0},p(M,O){const D={};O&64&&(D.$$scope={dirty:O,ctx:M}),e.$set(D);const I={};O&64&&(I.$$scope={dirty:O,ctx:M}),t.$set(I);const N={};O&64&&(N.$$scope={dirty:O,ctx:M}),l.$set(N);const R={};O&64&&(R.$$scope={dirty:O,ctx:M}),u.$set(R);const F={};O&64&&(F.$$scope={dirty:O,ctx:M}),i.$set(F);const P={};O&64&&(P.$$scope={dirty:O,ctx:M}),c.$set(P);const z={};O&69&&(z.$$scope={dirty:O,ctx:M}),d.$set(z);const X={};O&2&&(X.disabled=!M[1]),y.$set(X)},i(M){L||(_(e.$$.fragment,M),_(t.$$.fragment,M),_(l.$$.fragment,M),_(u.$$.fragment,M),_(i.$$.fragment,M),_(c.$$.fragment,M),_(d.$$.fragment,M),_(y.$$.fragment,M),L=!0)},o(M){g(e.$$.fragment,M),g(t.$$.fragment,M),g(l.$$.fragment,M),g(u.$$.fragment,M),g(i.$$.fragment,M),g(c.$$.fragment,M),g(d.$$.fragment,M),g(y.$$.fragment,M),L=!1},d(M){M&&(p(s),p(n),p(o),p(a),p(f),p(m),p(S)),k(e,M),k(t,M),k(l,M),k(u,M),k(i,M),k(c,M),k(d,M),k(y,M)}}}function z$(r){let e,s;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let n={};for(let l=0;l<t.length;l+=1)n=ne(n,t[l]);return e=new ze({props:n}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),s=!0},p(l,o){const u=o&2?le(t,[t[0],t[1],{layout:{visibility:l[1]?"none":"visible"}}]):{};e.$set(u)},i(l){s||(_(e.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),s=!1},d(l){k(e,l)}}}function B$(r){let e,s,t,n;return e=new qe({props:{label:"Layers",open:!0,$$slots:{default:[q$]},$$scope:{ctx:r}}}),t=new pt({props:{data:r[3],$$slots:{default:[z$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(l,o){b(e,l,o),$(l,s,o),b(t,l,o),n=!0},p(l,[o]){const u={};o&71&&(u.$$scope={dirty:o,ctx:l}),e.$set(u);const a={};o&66&&(a.$$scope={dirty:o,ctx:l}),t.$set(a)},i(l){n||(_(e.$$.fragment,l),_(t.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),g(t.$$.fragment,l),n=!1},d(l){l&&p(s),k(e,l),k(t,l)}}}function j$(r,e,s){let t,n,l;K(r,Dn,i=>s(1,n=i)),K(r,Qt,i=>s(2,l=i));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},u={getStreetViewRoadLayerNames:i=>Rs(i,ws(en))};function a(i){t=i,s(0,t),s(1,n)}return r.$$.update=()=>{r.$$.dirty&2&&s(0,t=!n),r.$$.dirty&1&&Dn.set(!t)},[t,n,l,o,u,a]}class H$ extends V{constructor(e){super(),Q(this,e,j$,B$,J,{})}}function G$(r){let e;function s(l,o){return l[2]<=100?W$:U$}let t=s(r),n=t(r);return{c(){n.c(),e=Ce()},m(l,o){n.m(l,o),$(l,e,o)},p(l,o){t===(t=s(l))&&n?n.p(l,o):(n.d(1),n=t(l),n&&(n.c(),n.m(e.parentNode,e)))},i:te,o:te,d(l){l&&p(e),n.d(l)}}}function E$(r){let e,s;return e=new tt({props:{$$slots:{default:[Y$]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&64&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function U$(r){let e;return{c(){e=C("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(s,t){$(s,e,t)},p:te,d(s){s&&p(e)}}}function W$(r){let e,s,t;return{c(){e=C("label"),s=v(`Downloading scheme data
      `),t=C("progress"),t.value=r[2],G(t,"class","svelte-q3473n")},m(n,l){$(n,e,l),w(e,s),w(e,t)},p(n,l){l&4&&(t.value=n[2])},d(n){n&&p(e)}}}function Y$(r){let e;return{c(){e=v("Load latest scheme data")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function J$(r){let e,s,t,n;const l=[E$,G$],o=[];function u(a,i){return a[0]?a[1]?1:-1:0}return~(e=u(r))&&(s=o[e]=l[e](r)),{c(){s&&s.c(),t=Ce()},m(a,i){~e&&o[e].m(a,i),$(a,t,i),n=!0},p(a,[i]){let f=e;e=u(a),e===f?~e&&o[e].p(a,i):(s&&(ie(),g(o[f],1,1,()=>{o[f]=null}),ae()),~e?(s=o[e],s?s.p(a,i):(s=o[e]=l[e](a),s.c()),_(s,1),s.m(t.parentNode,t)):s=null)},i(a){n||(_(s),n=!0)},o(a){g(s),n=!1},d(a){a&&p(t),~e&&o[e].d(a)}}}function V$(r,e,s){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),l=!0,o=0;async function u(){let i=await vs(`${Et()}/v1/all_schemes_output.geojson.gz`,c=>{s(2,o=c)});s(2,o=100);let f=new TextDecoder().decode(i);t("all_schemes_output.geojson",f),s(1,l=!1)}on(async()=>{n&&await u()});async function a(){s(0,n=!0),await u()}return r.$$set=i=>{"loadFile"in i&&s(4,t=i.loadFile)},[n,l,o,a,t]}class Q$ extends V{constructor(e){super(),Q(this,e,V$,J$,J,{loadFile:4})}}function Tl(r){var l;let e,s,t=((l=r[0].browse)==null?void 0:l.current_milestone)+"",n;return{c(){e=C("p"),s=v("Current milestone: "),n=v(t)},m(o,u){$(o,e,u),w(e,s),w(e,n)},p(o,u){var a;u&1&&t!==(t=((a=o[0].browse)==null?void 0:a.current_milestone)+"")&&B(n,t)},d(o){o&&p(e)}}}function K$(r){let e;return{c(){e=v("Show on map")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Z$(r){let e;return{c(){e=v("Edit scheme locally")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function X$(r){let e,s,t,n;return e=new tt({props:{$$slots:{default:[K$]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new tt({props:{$$slots:{default:[Z$]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(l,o){b(e,l,o),$(l,s,o),b(t,l,o),n=!0},p(l,o){const u={};o&32&&(u.$$scope={dirty:o,ctx:l}),e.$set(u);const a={};o&32&&(a.$$scope={dirty:o,ctx:l}),t.$set(a)},i(l){n||(_(e.$$.fragment,l),_(t.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),g(t.$$.fragment,l),n=!1},d(l){l&&p(s),k(e,l),k(t,l)}}}function x$(r){var z,X,E,q;let e,s,t=r[0].scheme_reference+"",n,l,o,u,a=((z=r[0].browse)==null?void 0:z.authority_or_region)+"",i,f,c,m,d=((X=r[0].browse)==null?void 0:X.capital_scheme_id)+"",S,y,L,M,O=((E=r[0].browse)==null?void 0:E.funding_programme)+"",D,I,N,R,F,P=((q=r[0].browse)==null?void 0:q.current_milestone)&&Tl(r);return R=new As({props:{$$slots:{default:[X$]},$$scope:{ctx:r}}}),{c(){e=C("p"),s=v("Scheme reference: "),n=v(t),l=T(),o=C("p"),u=v("Authority or region: "),i=v(a),f=T(),c=C("p"),m=v("Capital scheme ID: "),S=v(d),y=T(),L=C("p"),M=v("Funding programme: "),D=v(O),I=T(),P&&P.c(),N=T(),h(R.$$.fragment)},m(A,j){$(A,e,j),w(e,s),w(e,n),$(A,l,j),$(A,o,j),w(o,u),w(o,i),$(A,f,j),$(A,c,j),w(c,m),w(c,S),$(A,y,j),$(A,L,j),w(L,M),w(L,D),$(A,I,j),P&&P.m(A,j),$(A,N,j),b(R,A,j),F=!0},p(A,j){var Le,Te,ve,Ne;(!F||j&1)&&t!==(t=A[0].scheme_reference+"")&&B(n,t),(!F||j&1)&&a!==(a=((Le=A[0].browse)==null?void 0:Le.authority_or_region)+"")&&B(i,a),(!F||j&1)&&d!==(d=((Te=A[0].browse)==null?void 0:Te.capital_scheme_id)+"")&&B(S,d),(!F||j&1)&&O!==(O=((ve=A[0].browse)==null?void 0:ve.funding_programme)+"")&&B(D,O),(Ne=A[0].browse)!=null&&Ne.current_milestone?P?P.p(A,j):(P=Tl(A),P.c(),P.m(N.parentNode,N)):P&&(P.d(1),P=null);const $e={};j&32&&($e.$$scope={dirty:j,ctx:A}),R.$set($e)},i(A){F||(_(R.$$.fragment,A),F=!0)},o(A){g(R.$$.fragment,A),F=!1},d(A){A&&(p(e),p(l),p(o),p(f),p(c),p(y),p(L),p(I),p(N)),P&&P.d(A),k(R,A)}}}function ep(r){let e,s;return e=new qe({props:{label:`${r[0].scheme_name}`,$$slots:{default:[x$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,[n]){const l={};n&1&&(l.label=`${t[0].scheme_name}`),n&33&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function tp(r,e,s){let t,n;K(r,At,a=>s(3,t=a)),K(r,Qt,a=>s(4,n=a));let{scheme:l}=e;function o(){let a={type:"FeatureCollection",features:t.features.filter(i=>i.properties.scheme_reference==l.scheme_reference)};n==null||n.fitBounds(Fs(a),{padding:20,animate:!1})}function u(){var f,c;let a={type:"FeatureCollection",features:t.features.filter(m=>m.properties.scheme_reference==l.scheme_reference)},i=((f=l.browse)==null?void 0:f.authority_or_region)||"unknown authority";ys(i,JSON.stringify(a)),window.open(`scheme.html?authority=${(c=l.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=a=>{"scheme"in a&&s(0,l=a.scheme)},[l,o,u]}class np extends V{constructor(e){super(),Q(this,e,tp,ep,J,{scheme:0})}}function Ml(r){let e,s,t,n=r[0].status+"",l;return{c(){e=C("p"),s=v("Status: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&1&&n!==(n=o[0].status+"")&&B(l,n)},d(o){o&&p(e)}}}function Nl(r){let e,s,t,n=r[0].timescale+"",l;return{c(){e=C("p"),s=v("Timescale: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&1&&n!==(n=o[0].timescale+"")&&B(l,n)},d(o){o&&p(e)}}}function Pl(r){let e,s,t,n=r[0].timescale_year+"",l;return{c(){e=C("p"),s=v("Estimated completion year: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&1&&n!==(n=o[0].timescale_year+"")&&B(l,n)},d(o){o&&p(e)}}}function Ol(r){let e,s,t,n=r[0].year_published+"",l;return{c(){e=C("p"),s=v("Scheme most recently published: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&1&&n!==(n=o[0].year_published+"")&&B(l,n)},d(o){o&&p(e)}}}function Il(r){let e,s,t,n=r[0].year_consulted+"",l;return{c(){e=C("p"),s=v("Scheme most recently consulted on: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&1&&n!==(n=o[0].year_consulted+"")&&B(l,n)},d(o){o&&p(e)}}}function lp(r){let e,s,t,n,l,o=r[0].status&&Ml(r),u=r[0].timescale&&Nl(r),a=r[0].timescale_year&&Pl(r),i=r[0].year_published&&Ol(r),f=r[0].year_consulted&&Il(r);return{c(){o&&o.c(),e=T(),u&&u.c(),s=T(),a&&a.c(),t=T(),i&&i.c(),n=T(),f&&f.c(),l=Ce()},m(c,m){o&&o.m(c,m),$(c,e,m),u&&u.m(c,m),$(c,s,m),a&&a.m(c,m),$(c,t,m),i&&i.m(c,m),$(c,n,m),f&&f.m(c,m),$(c,l,m)},p(c,[m]){c[0].status?o?o.p(c,m):(o=Ml(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[0].timescale?u?u.p(c,m):(u=Nl(c),u.c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null),c[0].timescale_year?a?a.p(c,m):(a=Pl(c),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),c[0].year_published?i?i.p(c,m):(i=Ol(c),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),c[0].year_consulted?f?f.p(c,m):(f=Il(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null)},i:te,o:te,d(c){c&&(p(e),p(s),p(t),p(n),p(l)),o&&o.d(c),u&&u.d(c),a&&a.d(c),i&&i.d(c),f&&f.d(c)}}}function sp(r,e,s){let{props:t}=e;return r.$$set=n=>{"props"in n&&s(0,t=n.props)},[t]}class ps extends V{constructor(e){super(),Q(this,e,sp,lp,J,{props:0})}}function Rl(r){let e,s,t,n=r[0].budget.toLocaleString()+"",l,o;return{c(){e=C("p"),s=v("Cost: "),t=C("b"),l=v(n),o=v(`
    GBP`)},m(u,a){$(u,e,a),w(e,s),w(e,t),w(t,l),w(e,o)},p(u,a){a&1&&n!==(n=u[0].budget.toLocaleString()+"")&&B(l,n)},d(u){u&&p(e)}}}function Dl(r){let e;return{c(){e=C("p"),e.textContent="Development is fully funded"},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Al(r){let e;return{c(){e=C("p"),e.textContent="Construction is fully funded"},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Fl(r){let e,s,t,n;return{c(){e=C("p"),s=v("Funding sources: "),t=C("b"),n=v(r[1])},m(l,o){$(l,e,o),w(e,s),w(e,t),w(t,n)},p(l,o){o&2&&B(n,l[1])},d(l){l&&p(e)}}}function rp(r){let e,s,t,n,l=r[0].budget&&Rl(r),o=r[0].development_funded&&Dl(),u=r[0].construction_funded&&Al(),a=r[1]&&Fl(r);return{c(){l&&l.c(),e=T(),o&&o.c(),s=T(),u&&u.c(),t=T(),a&&a.c(),n=Ce()},m(i,f){l&&l.m(i,f),$(i,e,f),o&&o.m(i,f),$(i,s,f),u&&u.m(i,f),$(i,t,f),a&&a.m(i,f),$(i,n,f)},p(i,[f]){i[0].budget?l?l.p(i,f):(l=Rl(i),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),i[0].development_funded?o||(o=Dl(),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null),i[0].construction_funded?u||(u=Al(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),i[1]?a?a.p(i,f):(a=Fl(i),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:te,o:te,d(i){i&&(p(e),p(s),p(t),p(n)),l&&l.d(i),o&&o.d(i),u&&u.d(i),a&&a.d(i)}}}function op(r){if(!r.funding_sources)return"";let e=[];for(let s of["atf2","atf3","atf4","atf4e","crsts","luf"])r.funding_sources[s]&&e.push(s.toUpperCase());return r.funding_sources.other&&e.push(r.funding_sources.other),e.join(", ")}function ip(r,e,s){let t,{props:n}=e;return r.$$set=l=>{"props"in l&&s(0,n=l.props)},r.$$.update=()=>{r.$$.dirty&1&&s(1,t=op(n))},[n,t]}class ms extends V{constructor(e){super(),Q(this,e,ip,rp,J,{props:0})}}function Zt(r){const e=r.slice(),s=e[1].pipeline;return e[5]=s,e}function Xt(r){const e=r.slice(),s=e[0].pipeline;return e[5]=s,e}function ql(r){let e,s,t,n=hn(r[0].length_meters)+"",l;return{c(){e=C("p"),s=v("Length: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&1&&n!==(n=hn(o[0].length_meters)+"")&&B(l,n)},d(o){o&&p(e)}}}function zl(r){let e,s=lt(r[0].description,r[2])+"";return{c(){e=C("p")},m(t,n){$(t,e,n),e.innerHTML=s},p(t,n){n&5&&s!==(s=lt(t[0].description,t[2])+"")&&(e.innerHTML=s)},d(t){t&&p(e)}}}function Bl(r){let e,s,t,n,l,o,u,a=r[5].atf4_type&&jl(r),i=r[5].accuracy&&Hl(r),f=r[5].is_alternative&&Gl();return n=new ms({props:{props:r[5]}}),o=new ps({props:{props:r[5]}}),{c(){a&&a.c(),e=T(),i&&i.c(),s=T(),f&&f.c(),t=T(),h(n.$$.fragment),l=T(),h(o.$$.fragment)},m(c,m){a&&a.m(c,m),$(c,e,m),i&&i.m(c,m),$(c,s,m),f&&f.m(c,m),$(c,t,m),b(n,c,m),$(c,l,m),b(o,c,m),u=!0},p(c,m){c[5].atf4_type?a?a.p(c,m):(a=jl(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[5].accuracy?i?i.p(c,m):(i=Hl(c),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null),c[5].is_alternative?f||(f=Gl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const d={};m&1&&(d.props=c[5]),n.$set(d);const S={};m&1&&(S.props=c[5]),o.$set(S)},i(c){u||(_(n.$$.fragment,c),_(o.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),u=!1},d(c){c&&(p(e),p(s),p(t),p(l)),a&&a.d(c),i&&i.d(c),f&&f.d(c),k(n,c),k(o,c)}}}function jl(r){let e,s,t,n=r[5].atf4_type+"",l;return{c(){e=C("p"),s=v("ATF4 type: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&1&&n!==(n=o[5].atf4_type+"")&&B(l,n)},d(o){o&&p(e)}}}function Hl(r){let e,s,t,n=r[5].accuracy+"",l;return{c(){e=C("p"),s=v("Accuracy: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&1&&n!==(n=o[5].accuracy+"")&&B(l,n)},d(o){o&&p(e)}}}function Gl(r){let e;return{c(){e=C("p"),e.textContent="Represents an alternative route"},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function El(r){var o;let e,s,t,n=((o=r[1].browse)==null?void 0:o.capital_scheme_id)+"",l;return{c(){e=C("p"),s=v("Capital scheme ID: "),t=C("b"),l=v(n)},m(u,a){$(u,e,a),w(e,s),w(e,t),w(t,l)},p(u,a){var i;a&2&&n!==(n=((i=u[1].browse)==null?void 0:i.capital_scheme_id)+"")&&B(l,n)},d(u){u&&p(e)}}}function Ul(r){var o;let e,s,t,n=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=C("p"),s=v("Current milestone: "),t=C("b"),l=v(n)},m(u,a){$(u,e,a),w(e,s),w(e,t),w(t,l)},p(u,a){var i;a&2&&n!==(n=((i=u[1].browse)==null?void 0:i.current_milestone)+"")&&B(l,n)},d(u){u&&p(e)}}}function Wl(r){let e,s,t,n,l,o,u,a=r[5].scheme_type&&Yl(r),i=r[5].atf4_lead_type&&Jl(r),f=r[5].scheme_description&&Vl(r);return n=new ms({props:{props:r[5]}}),o=new ps({props:{props:r[5]}}),{c(){a&&a.c(),e=T(),i&&i.c(),s=T(),f&&f.c(),t=T(),h(n.$$.fragment),l=T(),h(o.$$.fragment)},m(c,m){a&&a.m(c,m),$(c,e,m),i&&i.m(c,m),$(c,s,m),f&&f.m(c,m),$(c,t,m),b(n,c,m),$(c,l,m),b(o,c,m),u=!0},p(c,m){c[5].scheme_type?a?a.p(c,m):(a=Yl(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[5].atf4_lead_type?i?i.p(c,m):(i=Jl(c),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null),c[5].scheme_description?f?f.p(c,m):(f=Vl(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const d={};m&2&&(d.props=c[5]),n.$set(d);const S={};m&2&&(S.props=c[5]),o.$set(S)},i(c){u||(_(n.$$.fragment,c),_(o.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),u=!1},d(c){c&&(p(e),p(s),p(t),p(l)),a&&a.d(c),i&&i.d(c),f&&f.d(c),k(n,c),k(o,c)}}}function Yl(r){let e,s,t,n=r[5].scheme_type+"",l;return{c(){e=C("p"),s=v("Scheme type: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&2&&n!==(n=o[5].scheme_type+"")&&B(l,n)},d(o){o&&p(e)}}}function Jl(r){let e,s,t,n=r[5].atf4_lead_type+"",l;return{c(){e=C("p"),s=v("ATF4 lead type: "),t=C("b"),l=v(n)},m(o,u){$(o,e,u),w(e,s),w(e,t),w(t,l)},p(o,u){u&2&&n!==(n=o[5].atf4_lead_type+"")&&B(l,n)},d(o){o&&p(e)}}}function Vl(r){let e,s,t=r[5].scheme_description+"",n;return{c(){e=C("p"),s=v("Descripton: "),n=v(t)},m(l,o){$(l,e,o),w(e,s),w(e,n)},p(l,o){o&2&&t!==(t=l[5].scheme_description+"")&&B(n,t)},d(l){l&&p(e)}}}function ap(r){var Ft,qt,zt,He;let e,s,t,n=lt(r[0].name,r[2])+"",l,o=r[0].intervention_type+"",u,a,i,f,c,m,d,S,y,L,M,O=lt(r[1].scheme_name??"",r[3])+"",D,I,N=lt(r[0].scheme_reference,r[3])+"",R,F,P,z,X,E=((Ft=r[1].browse)==null?void 0:Ft.authority_or_region)+"",q,A,j,$e,Le,Te,ve=((qt=r[1].browse)==null?void 0:qt.funding_programme)+"",Ne,de,je,Fe,Pe=r[0].length_meters&&ql(r),ue=r[0].description&&zl(r),ge=r[0].pipeline&&Bl(Xt(r)),ye=((zt=r[1].browse)==null?void 0:zt.capital_scheme_id)&&El(r),Me=((He=r[1].browse)==null?void 0:He.current_milestone)&&Ul(r),we=r[1].pipeline&&Wl(Zt(r));return{c(){e=C("div"),s=C("h2"),t=new it(!1),l=v(" ("),u=v(o),a=v(")"),i=T(),Pe&&Pe.c(),f=T(),ue&&ue.c(),c=T(),ge&&ge.c(),m=T(),d=C("hr"),S=T(),y=C("p"),L=v("Part of scheme: "),M=new it(!1),D=v(" ("),I=new it(!1),R=v(")"),F=T(),P=C("p"),z=v("Authority or region: "),X=C("b"),q=v(E),A=T(),ye&&ye.c(),j=T(),$e=C("p"),Le=v("Funding programme: "),Te=C("b"),Ne=v(ve),de=T(),Me&&Me.c(),je=T(),we&&we.c(),t.a=l,M.a=D,I.a=R,me(e,"max-width","30vw"),me(e,"max-height","60vh"),me(e,"overflow","auto")},m(fe,Oe){$(fe,e,Oe),w(e,s),t.m(n,s),w(s,l),w(s,u),w(s,a),w(e,i),Pe&&Pe.m(e,null),w(e,f),ue&&ue.m(e,null),w(e,c),ge&&ge.m(e,null),w(e,m),w(e,d),w(e,S),w(e,y),w(y,L),M.m(O,y),w(y,D),I.m(N,y),w(y,R),w(e,F),w(e,P),w(P,z),w(P,X),w(X,q),w(e,A),ye&&ye.m(e,null),w(e,j),w(e,$e),w($e,Le),w($e,Te),w(Te,Ne),w(e,de),Me&&Me.m(e,null),w(e,je),we&&we.m(e,null),Fe=!0},p(fe,[Oe]){var un,cn,$n,pn;(!Fe||Oe&5)&&n!==(n=lt(fe[0].name,fe[2])+"")&&t.p(n),(!Fe||Oe&1)&&o!==(o=fe[0].intervention_type+"")&&B(u,o),fe[0].length_meters?Pe?Pe.p(fe,Oe):(Pe=ql(fe),Pe.c(),Pe.m(e,f)):Pe&&(Pe.d(1),Pe=null),fe[0].description?ue?ue.p(fe,Oe):(ue=zl(fe),ue.c(),ue.m(e,c)):ue&&(ue.d(1),ue=null),fe[0].pipeline?ge?(ge.p(Xt(fe),Oe),Oe&1&&_(ge,1)):(ge=Bl(Xt(fe)),ge.c(),_(ge,1),ge.m(e,m)):ge&&(ie(),g(ge,1,1,()=>{ge=null}),ae()),(!Fe||Oe&10)&&O!==(O=lt(fe[1].scheme_name??"",fe[3])+"")&&M.p(O),(!Fe||Oe&9)&&N!==(N=lt(fe[0].scheme_reference,fe[3])+"")&&I.p(N),(!Fe||Oe&2)&&E!==(E=((un=fe[1].browse)==null?void 0:un.authority_or_region)+"")&&B(q,E),(cn=fe[1].browse)!=null&&cn.capital_scheme_id?ye?ye.p(fe,Oe):(ye=El(fe),ye.c(),ye.m(e,j)):ye&&(ye.d(1),ye=null),(!Fe||Oe&2)&&ve!==(ve=(($n=fe[1].browse)==null?void 0:$n.funding_programme)+"")&&B(Ne,ve),(pn=fe[1].browse)!=null&&pn.current_milestone?Me?Me.p(fe,Oe):(Me=Ul(fe),Me.c(),Me.m(e,je)):Me&&(Me.d(1),Me=null),fe[1].pipeline?we?(we.p(Zt(fe),Oe),Oe&2&&_(we,1)):(we=Wl(Zt(fe)),we.c(),_(we,1),we.m(e,null)):we&&(ie(),g(we,1,1,()=>{we=null}),ae())},i(fe){Fe||(_(ge),_(we),Fe=!0)},o(fe){g(ge),g(we),Fe=!1},d(fe){fe&&p(e),Pe&&Pe.d(),ue&&ue.d(),ge&&ge.d(),ye&&ye.d(),Me&&Me.d(),we&&we.d()}}}function lt(r,e){return e?r.replace(new RegExp(e,"gi"),s=>`<mark>${s}</mark>`):r}function fp(r,e,s){let t,n,l,o;K(r,Yt,a=>s(4,n=a)),K(r,jt,a=>s(2,l=a)),K(r,Ht,a=>s(3,o=a));let{props:u}=e;return r.$$set=a=>{"props"in a&&s(0,u=a.props)},r.$$.update=()=>{r.$$.dirty&17&&s(1,t=n.get(u.scheme_reference))},[u,t,l,o,n]}class fn extends V{constructor(e){super(),Q(this,e,fp,ap,J,{props:0})}}function up(r){let e,s=r[6].name+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&64&&s!==(s=n[6].name+"")&&B(t,s)},d(n){n&&p(e)}}}function cp(r){let e,s;return e=new fn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&64&&(l.props=t[6]),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function $p(r){let e,s,t,n;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[up,({props:l})=>({6:l}),({props:l})=>l?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[cp,({props:l})=>({6:l}),({props:l})=>l?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(l,o){b(e,l,o),$(l,s,o),b(t,l,o),n=!0},p(l,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:l}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:l}),t.$set(a)},i(l){n||(_(e.$$.fragment,l),_(t.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),g(t.$$.fragment,l),n=!1},d(l){l&&p(s),k(e,l),k(t,l)}}}function pp(r){let e,s=r[6].name+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&64&&s!==(s=n[6].name+"")&&B(t,s)},d(n){n&&p(e)}}}function mp(r){let e,s;return e=new fn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&64&&(l.props=t[6]),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function _p(r){let e,s,t,n;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[pp,({props:l})=>({6:l}),({props:l})=>l?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[mp,({props:l})=>({6:l}),({props:l})=>l?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(l,o){b(e,l,o),$(l,s,o),b(t,l,o),n=!0},p(l,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:l}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:l}),t.$set(a)},i(l){n||(_(e.$$.fragment,l),_(t.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),g(t.$$.fragment,l),n=!1},d(l){l&&p(s),k(e,l),k(t,l)}}}function gp(r){let e,s=r[6].name+"",t;return{c(){e=C("p"),t=v(s)},m(n,l){$(n,e,l),w(e,t)},p(n,l){l&64&&s!==(s=n[6].name+"")&&B(t,s)},d(n){n&&p(e)}}}function dp(r){let e,s;return e=new fn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&64&&(l.props=t[6]),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function hp(r){let e,s,t,n;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[gp,({props:l})=>({6:l}),({props:l})=>l?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[dp,({props:l})=>({6:l}),({props:l})=>l?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(l,o){b(e,l,o),$(l,s,o),b(t,l,o),n=!0},p(l,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:l}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:l}),t.$set(a)},i(l){n||(_(e.$$.fragment,l),_(t.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),g(t.$$.fragment,l),n=!1},d(l){l&&p(s),k(e,l),k(t,l)}}}function bp(r){let e,s,t,n,l,o,u,a,i,f;const c=[H("interventions-points"),{filter:["all",bn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":kn,"circle-opacity":ee(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let m={$$slots:{default:[$p]},$$scope:{ctx:r}};for(let N=0;N<c.length;N+=1)m=ne(m,c[N]);e=new $t({props:m});const d=[H("interventions-lines"),{filter:["all",wn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Bt,"line-opacity":ee(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let S={$$slots:{default:[_p]},$$scope:{ctx:r}};for(let N=0;N<d.length;N+=1)S=ne(S,d[N]);t=new he({props:S});const y=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Bt,"circle-opacity":0,"circle-stroke-color":Qe.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let L={};for(let N=0;N<y.length;N+=1)L=ne(L,y[N]);l=new $t({props:L});const M=[H("interventions-polygons"),{filter:["all",Ut,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":ee(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let O={$$slots:{default:[hp]},$$scope:{ctx:r}};for(let N=0;N<M.length;N+=1)O=ne(O,M[N]);u=new ze({props:O});const D=[H("interventions-polygons-outlines"),{filter:["all",Ut,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Bt}},{layout:{visibility:r[0]?"visible":"none"}}];let I={};for(let N=0;N<D.length;N+=1)I=ne(I,D[N]);return i=new he({props:I}),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment),n=T(),h(l.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment)},m(N,R){b(e,N,R),$(N,s,R),b(t,N,R),$(N,n,R),b(l,N,R),$(N,o,R),b(u,N,R),$(N,a,R),b(i,N,R),f=!0},p(N,R){const F=R&29?le(c,[c[0],R&24&&{filter:["all",bn,N[3],N[4]]},c[2],c[3],R&4&&{paint:{"circle-color":N[2],"circle-radius":kn,"circle-opacity":ee(1,.5)}},R&1&&{layout:{visibility:N[0]?"visible":"none"}},c[6]]):{};R&128&&(F.$$scope={dirty:R,ctx:N}),e.$set(F);const P=R&13?le(d,[d[0],R&8&&{filter:["all",wn,N[3]]},d[2],d[3],R&4&&{paint:{"line-color":N[2],"line-width":Bt,"line-opacity":ee(1,.5)}},R&1&&{layout:{visibility:N[0]?"visible":"none"}},d[6]]):{};R&128&&(P.$$scope={dirty:R,ctx:N}),t.$set(P);const z=R&1?le(y,[y[0],y[1],y[2],{layout:{visibility:N[0]?"visible":"none"}}]):{};l.$set(z);const X=R&13?le(M,[M[0],R&8&&{filter:["all",Ut,N[3]]},M[2],M[3],R&4&&{paint:{"fill-color":N[2],"fill-opacity":ee(.2,.5)}},R&1&&{layout:{visibility:N[0]?"visible":"none"}},M[6]]):{};R&128&&(X.$$scope={dirty:R,ctx:N}),u.$set(X);const E=R&13?le(D,[D[0],R&8&&{filter:["all",Ut,N[3]]},R&4&&{paint:{"line-color":N[2],"line-opacity":.5,"line-width":.7*Bt}},R&1&&{layout:{visibility:N[0]?"visible":"none"}}]):{};i.$set(E)},i(N){f||(_(e.$$.fragment,N),_(t.$$.fragment,N),_(l.$$.fragment,N),_(u.$$.fragment,N),_(i.$$.fragment,N),f=!0)},o(N){g(e.$$.fragment,N),g(t.$$.fragment,N),g(l.$$.fragment,N),g(u.$$.fragment,N),g(i.$$.fragment,N),f=!1},d(N){N&&(p(s),p(n),p(o),p(a)),k(e,N),k(t,N),k(l,N),k(u,N),k(i,N)}}}function kp(r){let e,s;return e=new pt({props:{data:r[1],$$slots:{default:[bp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,[n]){const l={};n&2&&(l.data=t[1]),n&129&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function wp(r,e,s){let t,n;K(r,At,i=>s(5,n=i));let{showSchemes:l}=e,[o]=ln();const u=["!=",["get","hide_while_editing"],!0],a=["!=",["get","endpoint"],!0];return r.$$set=i=>{"showSchemes"in i&&s(0,l=i.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&s(1,t=qs(n))},[l,t,o,u,a,n]}class vp extends V{constructor(e){super(),Q(this,e,wp,kp,J,{showSchemes:0})}}function Ql(r,e,s){const t=r.slice();return t[15]=e[s],t}function Kl(r,e,s){const t=r.slice();return t[18]=e[s],t}function yp(r){let e,s;return e=new Q$({props:{loadFile:r[8]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p:te,i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Zl(r){let e,s,t,n,l;e=new tt({props:{$$slots:{default:[Sp]},$$scope:{ctx:r}}}),e.$on("click",r[10]);function o(a){r[11](a)}let u={title:"About this scheme data",$$slots:{default:[Cp]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.open=r[3]),t=new ls({props:u}),U.push(()=>W(t,"open",o)),{c(){h(e.$$.fragment),s=T(),h(t.$$.fragment)},m(a,i){b(e,a,i),$(a,s,i),b(t,a,i),l=!0},p(a,i){const f={};i&2097152&&(f.$$scope={dirty:i,ctx:a}),e.$set(f);const c={};i&2097168&&(c.$$scope={dirty:i,ctx:a}),!n&&i&8&&(n=!0,c.open=a[3],Y(()=>n=!1)),t.$set(c)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(s),k(e,a),k(t,a)}}}function Sp(r){let e;return{c(){e=v("About the scheme data")},m(s,t){$(s,e,t)},d(s){s&&p(e)}}}function Xl(r){let e,s,t=r[18]+"",n;return{c(){e=C("li"),s=C("p"),n=v(t)},m(l,o){$(l,e,o),w(e,s),w(s,n)},p(l,o){o&16&&t!==(t=l[18]+"")&&B(n,t)},d(l){l&&p(e)}}}function Cp(r){let e,s,t,n,l=Se(r[4].notes),o=[];for(let u=0;u<l.length;u+=1)o[u]=Xl(Kl(r,l,u));return{c(){e=C("div"),s=C("p"),s.textContent="Please note there are data quality caveats for all scheme data:",t=T(),n=C("ul");for(let u=0;u<o.length;u+=1)o[u].c();G(e,"class","govuk-prose")},m(u,a){$(u,e,a),w(e,s),w(e,t),w(e,n);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(n,null)},p(u,a){if(a&16){l=Se(u[4].notes);let i;for(i=0;i<l.length;i+=1){const f=Kl(u,l,i);o[i]?o[i].p(f,a):(o[i]=Xl(f),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=l.length}},d(u){u&&p(e),et(o,u)}}}function xl(r){let e,s,t,n;function l(a){r[12](a)}function o(a){r[13](a)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new Fr({props:u}),U.push(()=>W(e,"schemesToBeShown",l)),U.push(()=>W(e,"show",o)),{c(){h(e.$$.fragment)},m(a,i){b(e,a,i),n=!0},p(a,i){const f={};!s&&i&2&&(s=!0,f.schemesToBeShown=a[1],Y(()=>s=!1)),!t&&i&4&&(t=!0,f.show=a[2],Y(()=>t=!1)),e.$set(f)},i(a){n||(_(e.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),n=!1},d(a){k(e,a)}}}function es(r){let e,s;return e=new np({props:{scheme:r[15]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,n){const l={};n&128&&(l.scheme=t[15]),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function ts(r){let e=r[1].has(r[15].scheme_reference),s,t,n=e&&es(r);return{c(){n&&n.c(),s=Ce()},m(l,o){n&&n.m(l,o),$(l,s,o),t=!0},p(l,o){o&130&&(e=l[1].has(l[15].scheme_reference)),e?n?(n.p(l,o),o&130&&_(n,1)):(n=es(l),n.c(),_(n,1),n.m(s.parentNode,s)):n&&(ie(),g(n,1,1,()=>{n=null}),ae())},i(l){t||(_(n),t=!0)},o(l){g(n),t=!1},d(l){l&&p(s),n&&n.d(l)}}}function Lp(r){let e,s,t,n,l,o,u,a,i,f,c=tn()=="Private (development)",m,d,S,y,L,M,O,D,I;l=new zs({props:{boundaryGeojson:r[4]}}),i=new Ss({});let N=c&&yp(r),R=r[4].notes&&Zl(r);S=new Cs({props:{label:"Load schemes from GeoJSON",onLoad:r[8]}}),L=new Ls({props:{errorMessage:r[0]}});let F=r[7].size>0&&xl(r),P=Se(r[7].values()),z=[];for(let E=0;E<P.length;E+=1)z[E]=ts(Ql(r,P,E));const X=E=>g(z[E],1,1,()=>{z[E]=null});return{c(){e=C("div"),s=C("div"),t=C("h1"),t.textContent="Browse schemes",n=T(),h(l.$$.fragment),o=T(),u=C("p"),u.textContent=`App version: ${tn()}`,a=T(),h(i.$$.fragment),f=T(),N&&N.c(),m=T(),R&&R.c(),d=T(),h(S.$$.fragment),y=T(),h(L.$$.fragment),M=T(),F&&F.c(),O=T(),D=C("ul");for(let E=0;E<z.length;E+=1)z[E].c();me(s,"display","flex"),me(s,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(E,q){$(E,e,q),w(e,s),w(s,t),w(s,n),b(l,s,null),w(e,o),w(e,u),w(e,a),b(i,e,null),w(e,f),N&&N.m(e,null),w(e,m),R&&R.m(e,null),w(e,d),b(S,e,null),w(e,y),b(L,e,null),w(e,M),F&&F.m(e,null),w(e,O),w(e,D);for(let A=0;A<z.length;A+=1)z[A]&&z[A].m(D,null);I=!0},p(E,q){const A={};q&16&&(A.boundaryGeojson=E[4]),l.$set(A),c&&N.p(E,q),E[4].notes?R?(R.p(E,q),q&16&&_(R,1)):(R=Zl(E),R.c(),_(R,1),R.m(e,d)):R&&(ie(),g(R,1,1,()=>{R=null}),ae());const j={};if(q&1&&(j.errorMessage=E[0]),L.$set(j),E[7].size>0?F?(F.p(E,q),q&128&&_(F,1)):(F=xl(E),F.c(),_(F,1),F.m(e,O)):F&&(ie(),g(F,1,1,()=>{F=null}),ae()),q&130){P=Se(E[7].values());let $e;for($e=0;$e<P.length;$e+=1){const Le=Ql(E,P,$e);z[$e]?(z[$e].p(Le,q),_(z[$e],1)):(z[$e]=ts(Le),z[$e].c(),_(z[$e],1),z[$e].m(D,null))}for(ie(),$e=P.length;$e<z.length;$e+=1)X($e);ae()}},i(E){if(!I){_(l.$$.fragment,E),_(i.$$.fragment,E),_(N),_(R),_(S.$$.fragment,E),_(L.$$.fragment,E),_(F);for(let q=0;q<P.length;q+=1)_(z[q]);I=!0}},o(E){g(l.$$.fragment,E),g(i.$$.fragment,E),g(N),g(R),g(S.$$.fragment,E),g(L.$$.fragment,E),g(F),z=z.filter(Boolean);for(let q=0;q<z.length;q+=1)g(z[q]);I=!1},d(E){E&&p(e),k(l),k(i),N&&N.d(),R&&R.d(),k(S),k(L),F&&F.d(),et(z,E)}}}function ns(r){let e,s,t,n,l;return e=new vp({props:{showSchemes:r[2]}}),n=new H$({}),{c(){h(e.$$.fragment),s=T(),t=C("div"),h(n.$$.fragment),G(t,"class","top-right svelte-u44ed2")},m(o,u){b(e,o,u),$(o,s,u),$(o,t,u),b(n,t,null),l=!0},p(o,u){const a={};u&4&&(a.showSchemes=o[2]),e.$set(a)},i(o){l||(_(e.$$.fragment,o),_(n.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),l=!1},d(o){o&&(p(s),p(t)),k(e,o),k(n)}}}function Tp(r){let e,s,t,n;e=new Bs({});let l=r[6]&&ns(r);return{c(){h(e.$$.fragment),s=T(),l&&l.c(),t=Ce()},m(o,u){b(e,o,u),$(o,s,u),l&&l.m(o,u),$(o,t,u),n=!0},p(o,u){o[6]?l?(l.p(o,u),u&64&&_(l,1)):(l=ns(o),l.c(),_(l,1),l.m(t.parentNode,t)):l&&(ie(),g(l,1,1,()=>{l=null}),ae())},i(o){n||(_(e.$$.fragment,o),_(l),n=!0)},o(o){g(e.$$.fragment,o),g(l),n=!1},d(o){o&&(p(s),p(t)),k(e,o),l&&l.d(o)}}}function Mp(r){let e,s,t;return s=new Ts({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Tp]},$$scope:{ctx:r}}}),{c(){e=C("div"),h(s.$$.fragment),G(e,"slot","main")},m(n,l){$(n,e,l),b(s,e,null),t=!0},p(n,l){const o={};l&32&&(o.style=n[5]),l&2097220&&(o.$$scope={dirty:l,ctx:n}),s.$set(o)},i(n){t||(_(s.$$.fragment,n),t=!0)},o(n){g(s.$$.fragment,n),t=!1},d(n){n&&p(e),k(s)}}}function Np(r){let e,s;return e=new Ks({props:{$$slots:{main:[Mp],sidebar:[Lp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),s=!0},p(t,[n]){const l={};n&2097407&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){s||(_(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){k(e,t)}}}function Pp(r,e,s){let t,n,l,o,u;K(r,At,O=>s(4,t=O)),K(r,Qt,O=>s(9,n=O)),K(r,en,O=>s(5,l=O)),K(r,vn,O=>s(6,o=O)),K(r,Yt,O=>s(7,u=O)),on(()=>{Ms()});const a=new URLSearchParams(window.location.search);en.set(a.get("style")||"dataviz");let i="",f=new Set,c=!0,m=!1;function d(O,D){try{At.set(JSON.parse(D)),Yt.set(dr(t)),s(0,i="")}catch(I){s(0,i=`The file you loaded is broken: ${I}`)}}const S=()=>s(3,m=!0);function y(O){m=O,s(3,m)}function L(O){f=O,s(1,f)}function M(O){c=O,s(2,c)}return r.$$.update=()=>{r.$$.dirty&512&&n&&vn.set(n)},[i,f,c,m,t,l,o,u,d,n,S,y,L,M]}class Op extends V{constructor(e){super(),Q(this,e,Pp,Np,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Op({target:document.getElementById("app")});
