import{S as K,i as X,s as J,e as S,b as F,m as oe,c as d,n as Q,d as h,aU as vr,g as H,h as E,a as L,j as b,p as w,_ as lt,u as B,t as m,q as g,v,Q as rt,T as st,U as ot,V as it,b5 as Hn,o as p,am as he,z as be,r as we,av as Qe,y,P as q,aa as ve,ab as kn,ac as kr,w as Y,ad as yn,ae as yr,af as Ut,ag as Sr,ah as Tr,b6 as Ar,W as Bt,b7 as En,b8 as Fr,G as qt,aP as $n,a0 as ne,N as me,f as Ze,aR as qr,b4 as le,a9 as Ne,b9 as ce,K as te,J as Re,a2 as re,at as se,R as Sn,b1 as Qt,aT as tn,Z as Je,$ as Cr,ba as Kt,bb as Dt,bc as Gr,bd as zr,x as Lr,be as Hr,D as Er,X as mn,b3 as Tn,bf as Br,I as Ur,k as Cn,F as Wr,E as Yr,aV as Jr,aW as _n,A as Vr,L as Qr,M as Zr,B as Kr}from"./index-7c4c4fb6.js";import{e as Bn,s as G,u as Ve,t as Xr,q as tt,M as xr,a as Ye,C as De,v as _e,R as es,k as At,h as Ke,f as Ft,b as ts,p as Un,g as ns,d as Wn,w as Yn,c as Jn,x as Jt,i as en,W as Mr,B as ls,S as rs,n as ss,H as os,Z as is,G as as,m as Vn}from"./ZoomOutMap-2865ea05.js";import{P as fe,A as Ir}from"./Popup-e1fbbfc7.js";function fs(s){let e;return{c(){e=S("span"),F(e,"class","svelte-kzgqtg"),oe(e,"background",s[0])},m(l,t){d(l,e,t)},p(l,[t]){t&1&&oe(e,"background",l[0])},i:Q,o:Q,d(l){l&&h(e)}}}function us(s,e,l){let{color:t}=e;return s.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Se extends K{constructor(e){super(),X(this,e,us,fs,J,{color:0})}}const cs="/atip/add-public-deploy-dev/assets/help-d011708a.svg";function ps(s){let e,l;const t=s[1].default,n=rt(t,s,s[4],null);return{c(){e=S("div"),n&&n.c(),F(e,"class","govuk-prose")},m(r,o){d(r,e,o),n&&n.m(e,null),l=!0},p(r,o){n&&n.p&&(!l||o&16)&&st(n,t,r,r[4],l?it(t,r[4],o,null):ot(r[4]),null)},i(r){l||(m(n,r),l=!0)},o(r){g(n,r),l=!1},d(r){r&&h(e),n&&n.d(r)}}}function $s(s){let e,l,t,n,r,o,f;function i(u){s[3](u)}let a={title:"Help",$$slots:{default:[ps]},$$scope:{ctx:s}};return s[0]!==void 0&&(a.open=s[0]),t=new vr({props:a}),H.push(()=>E(t,"open",i)),{c(){e=S("button"),e.innerHTML=`<img src="${cs}" title="Help" alt="Help"/>`,l=L(),b(t.$$.fragment),F(e,"class","svelte-7d9d1l")},m(u,c){d(u,e,c),d(u,l,c),w(t,u,c),r=!0,o||(f=lt(e,"click",s[2]),o=!0)},p(u,[c]){const $={};c&16&&($.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,$.open=u[0],B(()=>n=!1)),t.$set($)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){g(t.$$.fragment,u),r=!1},d(u){u&&(h(e),h(l)),v(t,u),o=!1,f()}}}function ms(s,e,l){let{$$slots:t={},$$scope:n}=e,r=!1;const o=()=>l(0,r=!0);function f(i){r=i,l(0,r)}return s.$$set=i=>{"$$scope"in i&&l(4,n=i.$$scope)},[r,t,o,f,n]}class _s extends K{constructor(e){super(),X(this,e,ms,$s,J,{})}}const gs=s=>({}),Qn=s=>({}),ds=s=>({}),Zn=s=>({});function hs(s){let e,l,t,n,r,o,f,i,a,u,c;const $=s[4].sidebar,_=rt($,s,s[3],Zn),k=s[4].main,T=rt(k,s,s[3],Qn);return{c(){e=S("div"),l=S("aside"),t=S("div"),_&&_.c(),n=L(),r=S("button"),r.textContent="→",f=L(),i=S("main"),T&&T.c(),F(t,"class","sidebar-content content-container svelte-1n0etgd"),F(r,"type","button"),F(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),F(l,"class",o=Hn(s[1]?"":"collapsed")+" svelte-1n0etgd"),oe(l,"--sidebarWidth",s[0]),F(i,"class","svelte-1n0etgd"),F(e,"class","overall-layout svelte-1n0etgd")},m(C,N){d(C,e,N),p(e,l),p(l,t),_&&_.m(t,null),p(l,n),p(l,r),p(e,f),p(e,i),T&&T.m(i,null),a=!0,u||(c=lt(r,"click",s[2]),u=!0)},p(C,[N]){_&&_.p&&(!a||N&8)&&st(_,$,C,C[3],a?it($,C[3],N,ds):ot(C[3]),Zn),(!a||N&2&&o!==(o=Hn(C[1]?"":"collapsed")+" svelte-1n0etgd"))&&F(l,"class",o),(!a||N&1)&&oe(l,"--sidebarWidth",C[0]),T&&T.p&&(!a||N&8)&&st(T,k,C,C[3],a?it(k,C[3],N,gs):ot(C[3]),Qn)},i(C){a||(m(_,C),m(T,C),a=!0)},o(C){g(_,C),g(T,C),a=!1},d(C){C&&h(e),_&&_.d(C),T&&T.d(C),u=!1,c()}}}function bs(s,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,o=!0;function f(){l(1,o=!o)}return s.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,o,f,n,t]}class ws extends K{constructor(e){super(),X(this,e,bs,hs,J,{sidebarWidth:0})}}function Kn(s,e,l){const t=s.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Xn(s){let e,l,t,n=s[1]+"",r,o,f;return l=new Se({props:{color:s[2]}}),{c(){e=S("li"),b(l.$$.fragment),t=L(),r=y(n),o=L()},m(i,a){d(i,e,a),w(l,e,null),p(e,t),p(e,r),p(e,o),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&q(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){g(l.$$.fragment,i),f=!1},d(i){i&&h(e),v(l)}}}function vs(s){let e,l,t=he(s[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Xn(Kn(s,t,o));const r=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){e=S("ul");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,f){d(o,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(o,[f]){if(f&1){t=he(o[0]);let i;for(i=0;i<t.length;i+=1){const a=Kn(o,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Xn(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(o){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(o){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(o){o&&h(e),Qe(n,o)}}}function ks(s,e,l){let{rows:t}=e;return s.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Xt extends K{constructor(e){super(),X(this,e,ks,vs,J,{rows:0})}}function xn(s){let e=s[0],l,t,n=el(s);return{c(){n.c(),l=ve()},m(r,o){n.m(r,o),d(r,l,o),t=!0},p(r,o){o&1&&J(e,e=r[0])?(be(),g(n,1,1,Q),we(),n=el(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,o)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function el(s){let e;const l=s[16].default,t=rt(l,s,s[15],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&32768)&&st(t,l,n,n[15],e?it(l,n[15],r,null):ot(n[15]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function ys(s){let e,l,t=s[0]&&xn(s);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=xn(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Ss(s,e,l){let t,n,{$$slots:r={},$$scope:o}=e,{id:f=kn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:$=null}=e,{minzoom:_=null}=e,{maxzoom:k=null}=e,{volatile:T=null}=e;const{map:C,self:N}=kr();Y(s,C,M=>l(14,n=M)),Y(s,N,M=>l(0,t=M));let D,P=!0;return yn(()=>{t&&D&&n&&(yr(C,t,D),Ut(N,t=null,t),l(12,D=void 0))}),s.$$set=M=>{"id"in M&&l(3,f=M.id),"tiles"in M&&l(4,i=M.tiles),"tileSize"in M&&l(5,a=M.tileSize),"bounds"in M&&l(6,u=M.bounds),"scheme"in M&&l(7,c=M.scheme),"attribution"in M&&l(8,$=M.attribution),"minzoom"in M&&l(9,_=M.minzoom),"maxzoom"in M&&l(10,k=M.maxzoom),"volatile"in M&&l(11,T=M.volatile),"$$scope"in M&&l(15,o=M.$$scope)},s.$$.update=()=>{s.$$.dirty&24569&&n&&t!==f&&(Ut(N,t=f,t),Sr(n,t,Tr({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:$,minzoom:_,maxzoom:k,volatile:T}),M=>n&&M===t,()=>{t&&(l(12,D=n==null?void 0:n.getSource(t)),l(13,P=!0))})),s.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,D=n==null?void 0:n.getSource(f))})),s.$$.dirty&12304&&D&&(P?l(13,P=!1):D.setTiles(i))},[t,C,N,f,i,a,u,c,$,_,k,T,D,P,n,o,r]}class Ts extends K{constructor(e){super(),X(this,e,Ss,ys,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function Cs(s){let e;const l=s[16].default,t=rt(l,s,s[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&st(t,l,n,n[24],e?it(l,n[24],r,null):ot(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Ls(s){let e,l,t;function n(o){s[17](o)}let r={id:s[1],type:"symbol",source:s[2],sourceLayer:s[3],beforeId:s[4],beforeLayerType:s[5],paint:s[6],layout:s[7],filter:s[8],applyToClusters:s[9],minzoom:s[10],maxzoom:s[11],hoverCursor:s[12],manageHoverState:s[13],eventsIfTopMost:s[14],interactive:s[15],$$slots:{default:[Cs]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.hovered=s[0]),e=new Ar({props:r}),H.push(()=>E(e,"hovered",n)),e.$on("click",s[18]),e.$on("dblclick",s[19]),e.$on("contextmenu",s[20]),e.$on("mouseenter",s[21]),e.$on("mousemove",s[22]),e.$on("mouseleave",s[23]),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,[f]){const i={};f&2&&(i.id=o[1]),f&4&&(i.source=o[2]),f&8&&(i.sourceLayer=o[3]),f&16&&(i.beforeId=o[4]),f&32&&(i.beforeLayerType=o[5]),f&64&&(i.paint=o[6]),f&128&&(i.layout=o[7]),f&256&&(i.filter=o[8]),f&512&&(i.applyToClusters=o[9]),f&1024&&(i.minzoom=o[10]),f&2048&&(i.maxzoom=o[11]),f&4096&&(i.hoverCursor=o[12]),f&8192&&(i.manageHoverState=o[13]),f&16384&&(i.eventsIfTopMost=o[14]),f&32768&&(i.interactive=o[15]),f&16777216&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.hovered=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function Ms(s,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=kn("symbol")}=e,{source:o=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:$=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:N=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:M=!0}=e;function O(A){D=A,l(0,D)}function I(A){Bt.call(this,s,A)}function R(A){Bt.call(this,s,A)}function j(A){Bt.call(this,s,A)}function z(A){Bt.call(this,s,A)}function Z(A){Bt.call(this,s,A)}function ae(A){Bt.call(this,s,A)}return s.$$set=A=>{"id"in A&&l(1,r=A.id),"source"in A&&l(2,o=A.source),"sourceLayer"in A&&l(3,f=A.sourceLayer),"beforeId"in A&&l(4,i=A.beforeId),"beforeLayerType"in A&&l(5,a=A.beforeLayerType),"paint"in A&&l(6,u=A.paint),"layout"in A&&l(7,c=A.layout),"filter"in A&&l(8,$=A.filter),"applyToClusters"in A&&l(9,_=A.applyToClusters),"minzoom"in A&&l(10,k=A.minzoom),"maxzoom"in A&&l(11,T=A.maxzoom),"hoverCursor"in A&&l(12,C=A.hoverCursor),"manageHoverState"in A&&l(13,N=A.manageHoverState),"hovered"in A&&l(0,D=A.hovered),"eventsIfTopMost"in A&&l(14,P=A.eventsIfTopMost),"interactive"in A&&l(15,M=A.interactive),"$$scope"in A&&l(24,n=A.$$scope)},[D,r,o,f,i,a,u,c,$,_,k,T,C,N,P,M,t,O,I,R,j,z,Z,ae,n]}class Ln extends K{constructor(e){super(),X(this,e,Ms,Ls,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function tl(s){let e=s[0],l,t,n=nl(s);return{c(){n.c(),l=ve()},m(r,o){n.m(r,o),d(r,l,o),t=!0},p(r,o){o&1&&J(e,e=r[0])?(be(),g(n,1,1,Q),we(),n=nl(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,o)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function nl(s){let e;const l=s[15].default,t=rt(l,s,s[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&st(t,l,n,n[14],e?it(l,n[14],r,null):ot(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Is(s){let e,l,t=s[0]&&tl(s);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=tl(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Os(s,e,l){let t,n,{$$slots:r={},$$scope:o}=e,{id:f=kn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:$=null}=e,{attribution:_=null}=e,{minzoom:k=null}=e,{maxzoom:T=null}=e,{volatile:C=null}=e;if(i&&i.includes("pmtiles://")&&!En.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let M=new Fr;En.addProtocol("pmtiles",M.tile)}const{map:N,self:D}=kr();Y(s,N,M=>l(13,n=M)),Y(s,D,M=>l(0,t=M));let P;return yn(()=>{t&&n&&(yr(N,t,P),Ut(D,t=null,t),P=void 0)}),s.$$set=M=>{"id"in M&&l(3,f=M.id),"url"in M&&l(4,i=M.url),"tiles"in M&&l(5,a=M.tiles),"promoteId"in M&&l(6,u=M.promoteId),"bounds"in M&&l(7,c=M.bounds),"scheme"in M&&l(8,$=M.scheme),"attribution"in M&&l(9,_=M.attribution),"minzoom"in M&&l(10,k=M.minzoom),"maxzoom"in M&&l(11,T=M.maxzoom),"volatile"in M&&l(12,C=M.volatile),"$$scope"in M&&l(14,o=M.$$scope)},s.$$.update=()=>{s.$$.dirty&16377&&n&&t!==f&&(Ut(D,t=f,t),Sr(n,t,Tr({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:$,attribution:_,minzoom:k,maxzoom:T,volatile:C}),M=>n&&M===t,()=>{t&&(P=n==null?void 0:n.getSource(t))})),s.$$.dirty&8200&&(n==null||n.on("style.load",()=>{P=n==null?void 0:n.getSource(f)}))},[t,N,D,f,i,a,u,c,$,_,k,T,C,n,o,r]}class pe extends K{constructor(e){super(),X(this,e,Os,Is,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function ll(s,e,l){const t=s.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Ns(s){let e,l,t;return l=new Ze({props:{$$slots:{default:[js]},$$scope:{ctx:s}}}),l.$on("click",s[9]),{c(){e=S("div"),b(l.$$.fragment)},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const o={};r&16384&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ps(s){let e,l,t,n,r,o,f,i,a,u;l=new Ze({props:{$$slots:{default:[Rs]},$$scope:{ctx:s}}}),l.$on("click",s[4]);let c=s[2]&&rl(s);r=new tt({props:{label:"Help",$$slots:{default:[Ds]},$$scope:{ctx:s}}}),f=new qr({}),f.$on("click",s[3]);let $=he(s[0]),_=[];for(let T=0;T<$.length;T+=1)_[T]=sl(ll(s,$,T));const k=T=>g(_[T],1,1,()=>{_[T]=null});return{c(){e=S("div"),b(l.$$.fragment),t=L(),c&&c.c(),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L();for(let T=0;T<_.length;T+=1)_[T].c();a=ve()},m(T,C){d(T,e,C),w(l,e,null),d(T,t,C),c&&c.m(T,C),d(T,n,C),w(r,T,C),d(T,o,C),w(f,T,C),d(T,i,C);for(let N=0;N<_.length;N+=1)_[N]&&_[N].m(T,C);d(T,a,C),u=!0},p(T,C){const N={};C&16384&&(N.$$scope={dirty:C,ctx:T}),l.$set(N),T[2]?c?c.p(T,C):(c=rl(T),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const D={};if(C&16384&&(D.$$scope={dirty:C,ctx:T}),r.$set(D),C&65){$=he(T[0]);let P;for(P=0;P<$.length;P+=1){const M=ll(T,$,P);_[P]?(_[P].p(M,C),m(_[P],1)):(_[P]=sl(M),_[P].c(),m(_[P],1),_[P].m(a.parentNode,a))}for(be(),P=$.length;P<_.length;P+=1)k(P);we()}},i(T){if(!u){m(l.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T);for(let C=0;C<$.length;C+=1)m(_[C]);u=!0}},o(T){g(l.$$.fragment,T),g(r.$$.fragment,T),g(f.$$.fragment,T),_=_.filter(Boolean);for(let C=0;C<_.length;C+=1)g(_[C]);u=!1},d(T){T&&(h(e),h(t),h(n),h(o),h(i),h(a)),v(l),c&&c.d(T),v(r,T),v(f,T),Qe(_,T)}}}function js(s){let e;return{c(){e=y("Measure lines")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Rs(s){let e;return{c(){e=y("Stop measuring")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rl(s){let e,l,t=s[2].toFixed(2)+"",n,r;return{c(){e=S("p"),l=y("Length: "),n=y(t),r=y(" meters")},m(o,f){d(o,e,f),p(e,l),p(e,n),p(e,r)},p(o,f){f&4&&t!==(t=o[2].toFixed(2)+"")&&q(n,t)},d(o){o&&h(e)}}}function Ds(s){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function As(s){let e,l;return{c(){e=S("span"),l=L(),F(e,"class","dot svelte-1tzt432")},m(t,n){d(t,e,n),d(t,l,n)},p:Q,d(t){t&&(h(e),h(l))}}}function sl(s){let e,l,t;function n(f){s[7](f,s[11],s[12],s[13])}function r(){return s[8](s[13])}let o={draggable:!0,$$slots:{default:[As]},$$scope:{ctx:s}};return s[11]!==void 0&&(o.lngLat=s[11]),e=new xr({props:o}),H.push(()=>E(e,"lngLat",n)),e.$on("click",r),{c(){b(e.$$.fragment)},m(f,i){w(e,f,i),t=!0},p(f,i){s=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:s}),!l&&i&1&&(l=!0,a.lngLat=s[11],B(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){g(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function Fs(s){let e,l;const t=[G("measurement-line"),{paint:{"line-color":Ve.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function qs(s){let e,l,t,n,r,o,f;const i=[Ps,Ns],a=[];function u(c,$){return c[1]?0:1}return e=u(s),l=a[e]=i[e](s),n=new qt({props:{data:s[0].length<2?Bn():$n(s[0]),$$slots:{default:[Fs]},$$scope:{ctx:s}}}),{c(){l.c(),t=L(),b(n.$$.fragment)},m(c,$){a[e].m(c,$),d(c,t,$),w(n,c,$),r=!0,o||(f=lt(window,"keydown",s[5]),o=!0)},p(c,[$]){let _=e;e=u(c),e===_?a[e].p(c,$):(be(),g(a[_],1,1,()=>{a[_]=null}),we(),l=a[e],l?l.p(c,$):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const k={};$&1&&(k.data=c[0].length<2?Bn():$n(c[0])),$&16384&&(k.$$scope={dirty:$,ctx:c}),n.$set(k)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){g(l),g(n.$$.fragment,c),r=!1},d(c){c&&h(t),a[e].d(c),v(n,c),o=!1,f()}}}function Gs(s,e,l){let t,n=!1,r=[];function o(k){return k.length<2?null:1e3*Xr($n(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),l(0,r)}function c(k,T,C,N){C[N]=k,l(0,r)}const $=k=>u(k),_=()=>l(1,n=!0);return s.$$.update=()=>{s.$$.dirty&1&&l(2,t=o(r))},[r,n,t,f,i,a,u,c,$,_]}class zs extends K{constructor(e){super(),X(this,e,Gs,qs,J,{})}}const x={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},je=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Hs(s){let e;return{c(){e=y(`Open Government License
  `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Es(s){let e,l,t,n,r;return t=new le({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Hs]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("License: "),b(t.$$.fragment),n=y(`. Contains OS data © Crown copyright and database right
  2023.`)},m(o,f){d(o,e,f),p(e,l),w(t,e,null),p(e,n),r=!0},p(o,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:o}),t.$set(i)},i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){g(t.$$.fragment,o),r=!1},d(o){o&&h(e),v(t)}}}class Te extends K{constructor(e){super(),X(this,e,null,Es,J,{})}}function ol(s,e,l){const t=s.slice();return t[2]=e[l],t}function il(s,e,l){const t=s.slice();return t[5]=e[l],t}function al(s){let e,l;return{c(){e=S("span"),l=y(` 
    `),oe(e,"background",s[5]),oe(e,"width","100%"),oe(e,"border","1px solid black")},m(t,n){d(t,e,n),p(e,l)},p(t,n){n&1&&oe(e,"background",t[5])},d(t){t&&h(e)}}}function fl(s){let e,l=s[2]+"",t;return{c(){e=S("span"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&q(t,l)},d(n){n&&h(e)}}}function Bs(s){let e,l,t,n=he(s[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=al(il(s,n,i));let o=he(s[1]),f=[];for(let i=0;i<o.length;i+=1)f[i]=fl(ol(s,o,i));return{c(){e=S("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=S("div");for(let i=0;i<f.length;i+=1)f[i].c();oe(e,"display","flex"),oe(t,"display","flex"),oe(t,"justify-content","space-between")},m(i,a){d(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);d(i,l,a),d(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=he(i[0]);let u;for(u=0;u<n.length;u+=1){const c=il(i,n,u);r[u]?r[u].p(c,a):(r[u]=al(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){o=he(i[1]);let u;for(u=0;u<o.length;u+=1){const c=ol(i,o,u);f[u]?f[u].p(c,a):(f[u]=fl(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=o.length}},i:Q,o:Q,d(i){i&&(h(e),h(l),h(t)),Qe(r,i),Qe(f,i)}}}function Us(s,e,l){let{colorScale:t}=e,{limits:n}=e;return s.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Ae extends K{constructor(e){super(),X(this,e,Us,Bs,J,{colorScale:0,limits:1})}}function $e(s){let e=new URLSearchParams(window.location.search).has(s),l=Ne(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(s,"1"):n.searchParams.delete(s),window.history.replaceState(null,"",n.toString())}),l}function Gt(s,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(s);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${s}=${r} failed, using default value: ${f}`)}let o=Ne(n);return o.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(s):i.searchParams.set(s,a),window.history.replaceState(null,"",i.toString())}),o}let gn=Ne(new Map),Vt=Ne(new Set);const Ws=s=>({}),ul=s=>({}),Ys=s=>({}),cl=s=>({}),Js=s=>({}),pl=s=>({});function Vs(s){let e;return{c(){e=y(s[2])},m(l,t){d(l,e,t)},p(l,t){t&4&&q(e,l[2])},d(l){l&&h(e)}}}function Qs(s){let e,l,t;const n=s[7].icon,r=rt(n,s,s[10],pl);return{c(){r&&r.c(),e=L(),l=y(s[2])},m(o,f){r&&r.m(o,f),d(o,e,f),d(o,l,f),t=!0},p(o,f){r&&r.p&&(!t||f&1024)&&st(r,n,o,o[10],t?it(n,o[10],f,Js):ot(o[10]),pl),(!t||f&4)&&q(l,o[2])},i(o){t||(m(r,o),t=!0)},o(o){g(r,o),t=!1},d(o){o&&(h(e),h(l)),r&&r.d(o)}}}function Zs(s){let e;const l=s[7].help,t=rt(l,s,s[10],cl);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&st(t,l,n,n[10],e?it(l,n[10],r,Ys):ot(n[10]),cl)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Ks(s){let e;return{c(){e=y("X")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Xs(s){let e,l,t,n,r,o,f,i,a;function u($){s[8]($)}let c={$$slots:{default:[Qs]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.checked=s[0]),l=new Ye({props:c}),H.push(()=>E(l,"checked",u)),o=new _s({props:{$$slots:{default:[Zs]},$$scope:{ctx:s}}}),i=new Ze({props:{$$slots:{default:[Ks]},$$scope:{ctx:s}}}),i.$on("click",s[6]),{c(){e=S("div"),b(l.$$.fragment),n=L(),r=S("span"),b(o.$$.fragment),f=L(),b(i.$$.fragment),oe(e,"display","flex"),oe(e,"justify-content","space-between")},m($,_){d($,e,_),w(l,e,null),p(e,n),p(e,r),w(o,r,null),p(r,f),w(i,r,null),a=!0},p($,_){const k={};_&1028&&(k.$$scope={dirty:_,ctx:$}),!t&&_&1&&(t=!0,k.checked=$[0],B(()=>t=!1)),l.$set(k);const T={};_&1024&&(T.$$scope={dirty:_,ctx:$}),o.$set(T);const C={};_&1024&&(C.$$scope={dirty:_,ctx:$}),i.$set(C)},i($){a||(m(l.$$.fragment,$),m(o.$$.fragment,$),m(i.$$.fragment,$),a=!0)},o($){g(l.$$.fragment,$),g(o.$$.fragment,$),g(i.$$.fragment,$),a=!1},d($){$&&h(e),v(l),v(o),v(i)}}}function $l(s){let e;const l=s[7].controls,t=rt(l,s,s[10],ul);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&st(t,l,n,n[10],e?it(l,n[10],r,Ws):ot(n[10]),ul)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function xs(s){let e,l,t,n,r,o;e=new Ye({props:{checked:s[4].has(s[1]),$$slots:{default:[Vs]},$$scope:{ctx:s}}}),e.$on("change",s[5]),n=new De({props:{small:!0,$$slots:{default:[Xs]},$$scope:{ctx:s}}});let f=s[0]&&$l(s);return{c(){b(e.$$.fragment),l=L(),t=S("div"),b(n.$$.fragment),r=L(),f&&f.c()},m(i,a){w(e,i,a),d(i,l,a),d(i,t,a),w(n,t,null),p(t,r),f&&f.m(t,null),s[9](t),o=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=$l(i),f.c(),m(f,1),f.m(t,null)):f&&(be(),g(f,1,1,()=>{f=null}),we())},i(i){o||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),o=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),g(f),o=!1},d(i){i&&(h(l),h(t)),v(e,i),v(n),f&&f.d(),s[9](null)}}}function eo(s,e,l){let t;Y(s,Vt,k=>l(4,t=k));let{$$slots:n={},$$scope:r}=e,{name:o}=e,{title:f}=e,{show:i}=e;i&&(t.add(o),Vt.set(t));let a=null;yn(()=>{gn.update(k=>(k.delete(o),k))});function u(){Vt.update(k=>(k.has(o)?(k.delete(o),l(0,i=!1)):(k.add(o),l(0,i=!0)),k))}function c(){t.delete(o),Vt.set(t),l(0,i=!1)}function $(k){i=k,l(0,i)}function _(k){H[k?"unshift":"push"](()=>{a=k,l(3,a),l(1,o)})}return s.$$set=k=>{"name"in k&&l(1,o=k.name),"title"in k&&l(2,f=k.title),"show"in k&&l(0,i=k.show),"$$scope"in k&&l(10,r=k.$$scope)},s.$$.update=()=>{s.$$.dirty&10&&a&&gn.update(k=>(l(3,a.style.display="none",a),k.set(o,a),k))},[i,o,f,a,t,u,c,n,$,_,r]}class ue extends K{constructor(e){super(),X(this,e,eo,xs,J,{name:1,title:2,show:0})}}function ml(s){const e=s[7].OA21CD;s[8]=e;const l=s[7][s[0].kind];s[9]=l}function to(s){let e,l,t,n,r,o,f;return t=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ro]},$$scope:{ctx:s}}}),r=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[so]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("Population density data is from the 2021 census, via "),b(t.$$.fragment),n=y(". Output area boundaries from "),b(r.$$.fragment),o=y(".")},m(i,a){d(i,e,a),p(e,l),w(t,e,null),p(e,n),w(r,e,null),p(e,o),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function no(s){let e,l,t,n,r,o,f,i,a;return r=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[oo]},$$scope:{ctx:s}}}),f=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[io]},$$scope:{ctx:s}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=S("p"),n=y("Car/van availability data is from the 2021 census, via "),b(r.$$.fragment),o=y(". Output area boundaries from "),b(f.$$.fragment),i=y(".")},m(u,c){d(u,e,c),d(u,l,c),d(u,t,c),p(t,n),w(r,t,null),p(t,o),w(f,t,null),p(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){g(r.$$.fragment,u),g(f.$$.fragment,u),a=!1},d(u){u&&(h(e),h(l),h(t)),v(r),v(f)}}}function lo(s){let e,l,t,n,r,o,f;return t=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ao]},$$scope:{ctx:s}}}),r=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[fo]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),n=y(". Output area boundaries from "),b(r.$$.fragment),o=y(".")},m(i,a){d(i,e,a),p(e,l),w(t,e,null),p(e,n),w(r,e,null),p(e,o),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function ro(s){let e;return{c(){e=y(`NOMIS TS006
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function so(s){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function oo(s){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function io(s){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ao(s){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fo(s){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function uo(s){let e,l,t,n,r,o;const f=[lo,no,to],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(s),t=i[l]=f[l](s),r=new Te({}),{c(){e=S("span"),t.c(),n=L(),b(r.$$.fragment),F(e,"slot","help")},m(u,c){d(u,e,c),i[l].m(e,null),p(e,n),w(r,e,null),o=!0},p(u,c){let $=l;l=a(u),l!==$&&(be(),g(i[$],1,1,()=>{i[$]=null}),we(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){o||(m(t),m(r.$$.fragment,u),o=!0)},o(u){g(t),g(r.$$.fragment,u),o=!1},d(u){u&&h(e),i[l].d(),v(r)}}}function co(s){let e,l,t,n;return t=new Ae({props:{colorScale:s[1],limits:pt(s[0].kind).map(_l)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",l=L(),b(t.$$.fragment)},m(r,o){d(r,e,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&1&&(f.limits=pt(r[0].kind).map(_l)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&(h(e),h(l)),v(t,r)}}}function po(s){let e,l;return e=new Ae({props:{colorScale:s[1],limits:pt(s[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=pt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function $o(s){let e,l;return e=new Ae({props:{colorScale:s[1],limits:pt(s[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=pt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function mo(s){let e,l,t,n,r,o,f;function i(_){s[4](_)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};s[0].kind!==void 0&&(a.value=s[0].kind),l=new Sn({props:a}),H.push(()=>E(l,"value",i));const u=[$o,po,co],c=[];function $(_,k){return _[0].kind=="percent_households_with_car"?0:_[0].kind=="average_cars_per_household"?1:_[0].kind=="population_density"?2:-1}return~(r=$(s))&&(o=c[r]=u[r](s)),{c(){e=S("div"),b(l.$$.fragment),n=L(),o&&o.c(),F(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(_,k){d(_,e,k),w(l,e,null),p(e,n),~r&&c[r].m(e,null),f=!0},p(_,k){const T={};!t&&k&1&&(t=!0,T.value=_[0].kind,B(()=>t=!1)),l.$set(T);let C=r;r=$(_),r===C?~r&&c[r].p(_,k):(o&&(be(),g(c[C],1,1,()=>{c[C]=null}),we()),~r?(o=c[r],o?o.p(_,k):(o=c[r]=u[r](_),o.c()),m(o,1),o.m(e,null)):o=null)},i(_){f||(m(l.$$.fragment,_),m(o),f=!0)},o(_){g(l.$$.fragment,_),g(o),f=!1},d(_){_&&h(e),v(l),~r&&c[r].d()}}}function _o(s){let e,l,t,n=s[9].toLocaleString()+"",r,o,f=s[8]+"",i;return{c(){e=S("p"),l=y("There are "),t=S("b"),r=y(n),o=y(`
          people per square kilometre in `),i=y(f)},m(a,u){d(a,e,u),p(e,l),p(e,t),p(t,r),p(e,o),p(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&q(r,n),u&128&&f!==(f=a[8]+"")&&q(i,f)},d(a){a&&h(e)}}}function go(s){let e,l,t=s[8]+"",n,r,o,f=s[9]+"",i,a;return{c(){e=S("p"),l=y("Households in "),n=y(t),r=y(` have an average of
          `),o=S("b"),i=y(f),a=y(`
          cars`)},m(u,c){d(u,e,c),p(e,l),p(e,n),p(e,r),p(e,o),p(o,i),p(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&q(n,t),c&129&&f!==(f=u[9]+"")&&q(i,f)},d(u){u&&h(e)}}}function ho(s){let e,l,t=s[9]+"",n,r,o,f=s[8]+"",i,a;return{c(){e=S("p"),l=S("b"),n=y(t),r=y("%"),o=y(`
          of households in `),i=y(f),a=y(" have 1 or more cars")},m(u,c){d(u,e,c),p(e,l),p(l,n),p(l,r),p(e,o),p(e,i),p(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&q(n,t),c&128&&f!==(f=u[8]+"")&&q(i,f)},d(u){u&&h(e)}}}function bo(s){ml(s);let e;function l(r,o){return r[0].kind=="percent_households_with_car"?ho:r[0].kind=="average_cars_per_household"?go:_o}let t=l(s),n=t(s);return{c(){n.c(),e=ve()},m(r,o){n.m(r,o),d(r,e,o)},p(r,o){ml(r),t===(t=l(r))&&n?n.p(r,o):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function wo(s){let e,l;return e=new fe({props:{$$slots:{default:[bo,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function vo(s){let e,l,t,n;const r=[G(ze),{sourceLayer:ze},{paint:{"fill-color":_e(["get",s[0].kind],pt(s[0].kind),s[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:s[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[wo]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o}),e.$on("click",s[3]);const f=[G(`${ze}-outline`),{sourceLayer:ze},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:s[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new me({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(G(ze)),u&0&&{sourceLayer:ze},u&3&&{paint:{"fill-color":_e(["get",a[0].kind],pt(a[0].kind),a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?re(f,[u&0&&se(G(`${ze}-outline`)),u&0&&{sourceLayer:ze},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function ko(s){let e,l,t,n,r;function o(i){s[5](i)}let f={name:ze,title:"2021 census",$$slots:{controls:[mo],help:[uo]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${ze}.pmtiles`,$$slots:{default:[vo]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let ze="census_output_areas";function yo(s){return s.show?s.kind:null}function So(s){return{show:!0,kind:s}}function pt(s){return s=="percent_households_with_car"?[0,20,40,60,80,100]:s=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const _l=s=>s.toLocaleString();function To(s,e,l){let t,n=x.sequential_low_to_high,o=Gt(ze,{show:!1,kind:"percent_households_with_car"},yo,So);Y(s,o,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){s.$$.not_equal(t.kind,u)&&(t.kind=u,o.set(t))}function a(u){s.$$.not_equal(t.show,u)&&(t.show=u,o.set(t))}return[t,n,o,f,i,a]}class Co extends K{constructor(e){super(),X(this,e,To,ko,J,{})}}function Lo(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Mo(s){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Io(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Mo]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of December 2022."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Oo(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&q(t,l)},d(n){n&&h(e)}}}function No(s){let e,l;return e=new fe({props:{$$slots:{default:[Oo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Po(s){let e,l,t,n;const r=[G(_t),{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[No]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o}),e.$on("click",Do);const f=[G(`${_t}-outline`),{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new me({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(G(_t)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?re(f,[u&0&&se(G(`${_t}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function jo(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:_t,title:Ro,$$slots:{help:[Io],icon:[Lo]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new qt({props:{data:`${ce()}/v1/${_t}.geojson`,$$slots:{default:[Po]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let _t="combined_authorities",Ro="Combined authorities";function Do(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ao(s,e,l){let t,n=x.combined_authorities,r=$e(_t);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class Fo extends K{constructor(e){super(),X(this,e,Ao,jo,J,{})}}function qo(s){let e;return{c(){e=y(`DLUCH GIS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Go(s){let e;return{c(){e=y(`here
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function zo(s){let e,l,t,n,r,o,f,i,a,u;return n=new le({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[qo]},$$scope:{ctx:s}}}),o=new le({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Go]},$$scope:{ctx:s}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("The 2019 English IMD scores come from "),b(n.$$.fragment),r=y(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),f=y("."),i=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),w(n,l,null),p(l,r),w(o,l,null),p(l,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&64&&(_.$$scope={dirty:$,ctx:c}),n.$set(_);const k={};$&64&&(k.$$scope={dirty:$,ctx:c}),o.$set(k)},i(c){u||(m(n.$$.fragment,c),m(o.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(o),v(a)}}}function Ho(s){let e,l,t;return l=new Ae({props:{colorScale:s[1],limits:["Least deprived","Most deprived"]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Eo(s){let e,l=s[5].LSOA11CD+"",t,n,r,o=s[5].score+"",f,i,a,u,c,$=s[5].rank.toLocaleString()+"",_,k;return{c(){e=S("p"),t=y(l),n=y(` has an IMD score of
        `),r=S("b"),f=y(o),i=L(),a=S("p"),u=y("Rank: "),c=S("b"),_=y($),k=y(`
        / 32,844 LSOAs`)},m(T,C){d(T,e,C),p(e,t),p(e,n),p(e,r),p(r,f),d(T,i,C),d(T,a,C),p(a,u),p(a,c),p(c,_),p(a,k)},p(T,C){C&32&&l!==(l=T[5].LSOA11CD+"")&&q(t,l),C&32&&o!==(o=T[5].score+"")&&q(f,o),C&32&&$!==($=T[5].rank.toLocaleString()+"")&&q(_,$)},d(T){T&&(h(e),h(i),h(a))}}}function Bo(s){let e,l;return e=new fe({props:{$$slots:{default:[Eo,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Uo(s){let e,l,t,n;const r=[G(He),{sourceLayer:He},{paint:{"fill-color":_e(["-",10,["get","decile"]],s[2],s[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[Bo]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o});const f=[G(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new me({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?re(r,[u&0&&se(G(He)),u&0&&{sourceLayer:He},u&6&&{paint:{"fill-color":_e(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?re(f,[u&0&&se(G(`${He}-outline`)),u&0&&{sourceLayer:He},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Wo(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:He,title:Yo,$$slots:{controls:[Ho],help:[zo]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${He}.pmtiles`,$$slots:{default:[Uo]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let He="imd",Yo="Indices of Multiple Deprivation";function Jo(s,e,l){let t,n=x.sequential_low_to_high,r=[0,2,4,6,8,10],o=$e(He);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class Vo extends K{constructor(e){super(),X(this,e,Jo,Wo,J,{})}}function Qo(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Zo(s){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ko(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Zo]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of January 2024."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Xo(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&q(t,l)},d(n){n&&h(e)}}}function xo(s){let e,l;return e=new fe({props:{$$slots:{default:[Xo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ei(s){let e,l,t,n;const r=[G(gt),{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[xo]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o}),e.$on("click",li);const f=[G(`${gt}-outline`),{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new me({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(G(gt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?re(f,[u&0&&se(G(`${gt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function ti(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:gt,title:ni,$$slots:{help:[Ko],icon:[Qo]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new qt({props:{data:`${ce()}/v1/${gt}.geojson`,$$slots:{default:[ei]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let gt="local_authority_districts",ni="Local Authority Districts";function li(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.features[0].properties.LAD23CD}`,"_blank")}function ri(s,e,l){let t,n=x.local_authority_districts,r=$e(gt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class si extends K{constructor(e){super(),X(this,e,ri,ti,J,{})}}function oi(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ii(s){let e;return{c(){e=y(`local authority
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ai(s){let e;return{c(){e=y(`national park authorit
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fi(s){let e;return{c(){e=y(`development corporation
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ui(s){let e;return{c(){e=y("this map")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ci(s){let e;return{c(){e=y(`planning.data.gov.uk
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function pi(s){let e,l,t,n,r,o,f,i,a,u,c,$,_,k,T,C,N,D,P,M,O,I,R;return n=new le({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ii]},$$scope:{ctx:s}}}),o=new le({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ai]},$$scope:{ctx:s}}}),i=new le({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[fi]},$$scope:{ctx:s}}}),k=new le({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ui]},$$scope:{ctx:s}}}),P=new le({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ci]},$$scope:{ctx:s}}}),I=new Te({}),{c(){e=S("span"),l=S("p"),t=y("LPAs may be a "),b(n.$$.fragment),r=y(", "),b(o.$$.fragment),f=y("y, or "),b(i.$$.fragment),a=y("."),u=L(),c=S("p"),$=S("strong"),_=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),b(k.$$.fragment),T=y(" to get more details."),C=L(),N=S("p"),D=y("Data from ONS Geography via "),b(P.$$.fragment),M=y(", as of November 2022."),O=L(),b(I.$$.fragment),F(e,"slot","help")},m(j,z){d(j,e,z),p(e,l),p(l,t),w(n,l,null),p(l,r),w(o,l,null),p(l,f),w(i,l,null),p(l,a),p(e,u),p(e,c),p(c,$),p($,_),w(k,$,null),p($,T),p(e,C),p(e,N),p(N,D),w(P,N,null),p(N,M),p(e,O),w(I,e,null),R=!0},p(j,z){const Z={};z&32&&(Z.$$scope={dirty:z,ctx:j}),n.$set(Z);const ae={};z&32&&(ae.$$scope={dirty:z,ctx:j}),o.$set(ae);const A={};z&32&&(A.$$scope={dirty:z,ctx:j}),i.$set(A);const ee={};z&32&&(ee.$$scope={dirty:z,ctx:j}),k.$set(ee);const V={};z&32&&(V.$$scope={dirty:z,ctx:j}),P.$set(V)},i(j){R||(m(n.$$.fragment,j),m(o.$$.fragment,j),m(i.$$.fragment,j),m(k.$$.fragment,j),m(P.$$.fragment,j),m(I.$$.fragment,j),R=!0)},o(j){g(n.$$.fragment,j),g(o.$$.fragment,j),g(i.$$.fragment,j),g(k.$$.fragment,j),g(P.$$.fragment,j),g(I.$$.fragment,j),R=!1},d(j){j&&h(e),v(n),v(o),v(i),v(k),v(P),v(I)}}}function $i(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&q(t,l)},d(n){n&&h(e)}}}function mi(s){let e,l;return e=new fe({props:{$$slots:{default:[$i,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function _i(s){let e,l,t,n;const r=[G(Ee),{sourceLayer:Ee},{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[mi]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o});const f=[G(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new me({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(G(Ee)),u&0&&{sourceLayer:Ee},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?re(f,[u&0&&se(G(`${Ee}-outline`)),u&0&&{sourceLayer:Ee},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function gi(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:Ee,title:di,$$slots:{help:[pi],icon:[oi]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ee}.pmtiles`,$$slots:{default:[_i]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ee="local_planning_authorities",di="Local Planning Authorities";function hi(s,e,l){let t,n=x.local_planning_authorities,r=$e(Ee);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class bi extends K{constructor(e){super(),X(this,e,hi,gi,J,{})}}function wi(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function vi(s){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ki(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[vi]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2023."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function yi(s){let e,l=s[4].Name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&q(t,l)},d(n){n&&h(e)}}}function Si(s){let e,l;return e=new fe({props:{$$slots:{default:[yi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ti(s){let e,l,t,n;const r=[G(Be),{sourceLayer:Be},{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Si]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o}),e.$on("click",Mi);const f=[G(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":s[1],"line-width":5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new me({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(G(Be)),u&0&&{sourceLayer:Be},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?re(f,[u&0&&se(G(`${Be}-outline`)),u&0&&{sourceLayer:Be},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ci(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:Be,title:Li,$$slots:{help:[ki],icon:[wi]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Be}.pmtiles`,$$slots:{default:[Ti]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Be="parliamentary_constituencies",Li="Parliamentary constituencies";function Mi(s){let e=s.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ii(s,e,l){let t,n=x.parliamentary_constituencies,r=$e(Be);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class Oi extends K{constructor(e){super(),X(this,e,Ii,Ci,J,{})}}function Ni(s){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Pi(s){let e,l,t,n,r,o,f,i,a,u;return n=new le({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ni]},$$scope:{ctx:s}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Most layers show air quality data from "),b(n.$$.fragment),r=y(`. The measurements are annual means, in units of µgm
      `),o=S("sup"),o.textContent="3",f=y(`
      . Note the particulate matter layers are not corrected for natural sources.`),i=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),w(n,l,null),p(l,r),p(l,o),p(l,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&4096&&(_.$$scope={dirty:$,ctx:c}),n.$set(_)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function ji(s){let e,l,t,n,r,o=s[3](s[0].pollutant)+"",f,i,a,u,c,$,_,k,T,C,N,D,P;function M(I){s[5](I)}let O={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return s[0].pollutant!==void 0&&(O.value=s[0].pollutant),l=new At({props:O}),H.push(()=>E(l,"value",M)),{c(){e=S("div"),b(l.$$.fragment),n=L(),r=S("p"),f=y(o),i=L(),a=S("div"),u=S("label"),c=y(`Opacity
        `),$=S("input"),_=L(),k=S("img"),F($,"type","range"),F($,"min","0"),F($,"max","100"),tn(k.src,T=s[4](s[0].pollutant))||F(k,"src",T),F(k,"width",150),F(k,"alt",C=`Legend for ${s[0].pollutant} layer`),F(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(I,R){d(I,e,R),w(l,e,null),p(e,n),p(e,r),p(r,f),p(e,i),p(e,a),p(a,u),p(u,c),p(u,$),Je($,s[0].opacity),p(e,_),p(e,k),N=!0,D||(P=[lt($,"change",s[6]),lt($,"input",s[6])],D=!0)},p(I,R){const j={};!t&&R&1&&(t=!0,j.value=I[0].pollutant,B(()=>t=!1)),l.$set(j),(!N||R&1)&&o!==(o=I[3](I[0].pollutant)+"")&&q(f,o),R&1&&Je($,I[0].opacity),(!N||R&1&&!tn(k.src,T=I[4](I[0].pollutant)))&&F(k,"src",T),(!N||R&1&&C!==(C=`Legend for ${I[0].pollutant} layer`))&&F(k,"alt",C)},i(I){N||(m(l.$$.fragment,I),N=!0)},o(I){g(l.$$.fragment,I),N=!1},d(I){I&&h(e),v(l),D=!1,Cr(P)}}}function Ri(s){let e,l;const t=[G(nn),{paint:{"raster-opacity":s[0].opacity/100}},{layout:{visibility:s[0].show?"visible":"none"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new es({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(G(nn)),o&1&&{paint:{"raster-opacity":r[0].opacity/100}},o&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Di(s){let e,l,t,n,r;function o(i){s[7](i)}let f={name:nn,title:Ai,$$slots:{controls:[ji],help:[Pi]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new Ts({props:{tiles:[s[1]],tileSize:256,$$slots:{default:[Ri]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2&&(c.tiles=[i[1]]),a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let nn="pollution",Ai="Pollution";function Fi(s){return s.show?`${s.pollutant}/${s.opacity}`:null}function qi(s){let[e,l]=s.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function Gi(s,e,l){let t,n,r,f=Gt(nn,{show:!1,pollutant:"PM25_viridis",opacity:50},Fi,qi);Y(s,f,T=>l(0,r=T));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(T){return t[1]}function u(T){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${C}`}function c(T){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${C}`}function $(T){s.$$.not_equal(r.pollutant,T)&&(r.pollutant=T,f.set(r))}function _(){r.opacity=Qt(this.value),f.set(r)}function k(T){s.$$.not_equal(r.show,T)&&(r.show=T,f.set(r))}return s.$$.update=()=>{s.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),s.$$.dirty&1&&l(1,n=u(r.pollutant))},[r,n,f,a,c,$,_,k]}class zi extends K{constructor(e){super(),X(this,e,Gi,Di,J,{})}}function Hi(s){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ei(s){let e,l,t,n,r,o,f,i,a,u;return o=new le({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Hi]},$$scope:{ctx:s}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=S("p"),r=y("Data from June 2019, produced by "),b(o.$$.fragment),f=y(". See there for methodology details"),i=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(e,t),p(e,n),p(n,r),w(o,n,null),p(n,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&32&&(_.$$scope={dirty:$,ctx:c}),o.$set(_)},i(c){u||(m(o.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(o.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(o),v(a)}}}function Bi(s){let e,l,t;return l=new Ae({props:{colorScale:s[1],limits:["55","65","75",">"]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ui(s){let e,l=s[4].noiseclass+"",t,n,r=gl(s[4].noiseclass)+"",o,f;return{c(){e=S("p"),t=y(l),n=y(" dB ("),o=y(r),f=y(")")},m(i,a){d(i,e,a),p(e,t),p(e,n),p(e,o),p(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&q(t,l),a&16&&r!==(r=gl(i[4].noiseclass)+"")&&q(o,r)},d(i){i&&h(e)}}}function Wi(s){let e,l;return e=new fe({props:{$$slots:{default:[Ui,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Yi(s){let e,l;const t=[G(dt),{sourceLayer:dt},{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":s[1][0],"60.0-64.9":s[1][0],"65.0-69.9":s[1][1],"70.0-74.9":s[1][1],">=75.0":s[1][2]},"red"),"fill-opacity":te(.5,.8)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Wi]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&3?re(t,[o&0&&se(G(dt)),o&0&&{sourceLayer:dt},o&2&&{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":te(.5,.8)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ji(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:dt,title:Vi,$$slots:{controls:[Bi],help:[Ei]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${dt}.pmtiles`,$$slots:{default:[Yi]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let dt="road_noise",Vi="Road noise";function gl(s){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[s]}function Qi(s,e,l){let t,n=[x.sequential_low_to_high[0],x.sequential_low_to_high[2],x.sequential_low_to_high[4]],r=$e(dt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class Zi extends K{constructor(e){super(),X(this,e,Qi,Ji,J,{})}}function Ki(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Xi(s){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xi(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Xi]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2023."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function ea(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&q(t,l)},d(n){n&&h(e)}}}function ta(s){let e,l;return e=new fe({props:{$$slots:{default:[ea,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function na(s){let e,l,t,n;const r=[G(Ue),{sourceLayer:Ue},{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[ta]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o}),e.$on("click",sa);const f=[G(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new me({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(G(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?re(f,[u&0&&se(G(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function la(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:Ue,title:ra,$$slots:{help:[xi],icon:[Ki]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ue}.pmtiles`,$$slots:{default:[na]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ue="wards",ra="Wards";function sa(s){let e=encodeURIComponent(s.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function oa(s,e,l){let t,n=x.wards,r=$e(Ue);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class ia extends K{constructor(e){super(),X(this,e,oa,la,J,{})}}function aa(s){let e;return{c(){e=y("Open Data Commons Open Database License")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fa(s){let e,l,t,n;return t=new le({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[aa]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("License: "),b(t.$$.fragment)},m(r,o){d(r,e,o),p(e,l),w(t,e,null),n=!0},p(r,[o]){const f={};o&1&&(f.$$scope={dirty:o,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&h(e),v(t)}}}class Xe extends K{constructor(e){super(),X(this,e,null,fa,J,{})}}function ua(s){let e,l,t;return l=new Se({props:{color:x.bus_route_with_lane}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ca(s){let e;return{c(){e=y(`GTFS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function pa(s){let e,l,t,n,r,o,f,i,a,u;return o=new le({props:{href:"https://gtfs.org",$$slots:{default:[ca]},$$scope:{ctx:s}}}),a=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=S("p"),r=y("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),f=y(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(e,t),p(e,n),p(n,r),w(o,n,null),p(n,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&16&&(_.$$scope={dirty:$,ctx:c}),o.$set(_)},i(c){u||(m(o.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(o.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(o),v(a)}}}function $a(s){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ma(s){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _a(s){let e;function l(r,o){return r[3].has_bus_lane?ma:$a}let t=l(s),n=t(s);return{c(){n.c(),e=ve()},m(r,o){n.m(r,o),d(r,e,o)},p(r,o){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function ga(s){let e,l;return e=new fe({props:{$$slots:{default:[_a,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function da(s){let e,l;const t=[G(ht),{sourceLayer:ht},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],x.bus_route_with_lane,x.bus_route_without_lane],"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ga]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(G(ht)),o&0&&{sourceLayer:ht},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ha(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:ht,title:ba,$$slots:{help:[pa],icon:[ua]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${ht}.pmtiles`,$$slots:{default:[da]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let ht="bus_routes",ba="Bus routes";function wa(s,e,l){let t,n=$e(ht);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class va extends K{constructor(e){super(),X(this,e,wa,ha,J,{})}}function dl(s){const e=Pa(s[9]);s[10]=e[0],s[11]=e[1],s[12]=e[2]}function hl(s,e,l){const t=s.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function ka(s){let e,l,t,n,r,o,f,i,a;return i=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 15 August 2023).`,t=L(),n=S("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),o=S("p"),o.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),b(i.$$.fragment),F(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(e,f),w(i,e,null),a=!0},p:Q,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){g(i.$$.fragment,u),a=!1},d(u){u&&h(e),v(i)}}}function ya(s){let e,l,t=s[13]+"",n,r,o;return e=new Se({props:{color:s[14]}}),{c(){b(e.$$.fragment),l=L(),n=y(t),r=L()},m(f,i){w(e,f,i),d(f,l,i),d(f,n,i),d(f,r,i),o=!0},p:Q,i(f){o||(m(e.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),o=!1},d(f){f&&(h(l),h(n),h(r)),v(e,f)}}}function bl(s){let e,l,t;function n(o){s[4](o,s[10])}let r={$$slots:{default:[ya]},$$scope:{ctx:s}};return s[0][s[10]]!==void 0&&(r.checked=s[0][s[10]]),e=new Ye({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,f){s=o;const i={};f&131072&&(i.$$scope={dirty:f,ctx:s}),!l&&f&5&&(l=!0,i.checked=s[0][s[10]],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function Sa(s){let e,l,t=he(s[2]),n=[];for(let o=0;o<t.length;o+=1)n[o]=bl(hl(s,t,o));const r=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ve()},m(o,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(o,f);d(o,e,f),l=!0},p(o,f){if(f&5){t=he(o[2]);let i;for(i=0;i<t.length;i+=1){const a=hl(o,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=bl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(o){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(o){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(o){o&&h(e),Qe(n,o)}}}function Ta(s){let e,l,t;return l=new De({props:{small:!0,$$slots:{default:[Sa]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const o={};r&131073&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ca(s){dl(s);let e,l=s[10]+"",t,n,r,o,f,i=s[11]+"",a,u,c,$,_=s[12]+"",k;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),o=y("Direction: "),f=S("b"),a=L(),u=S("p"),c=y("Width: "),$=S("b"),k=y(_)},m(T,C){d(T,e,C),p(e,t),d(T,n,C),d(T,r,C),p(r,o),p(r,f),f.innerHTML=i,d(T,a,C),d(T,u,C),p(u,c),p(u,$),p($,k)},p(T,C){dl(T),C&512&&l!==(l=T[10]+"")&&q(t,l),C&512&&i!==(i=T[11]+"")&&(f.innerHTML=i),C&512&&_!==(_=T[12]+"")&&q(k,_)},d(T){T&&(h(e),h(n),h(r),h(a),h(u))}}}function La(s){let e,l;return e=new fe({props:{$$slots:{default:[Ca,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ma(s){let e,l;const t=[G(bt),{sourceLayer:bt},{paint:{"line-color":Ke(["get","kind"],{track:x.cycle_paths.track,lane:x.cycle_paths.lane,shared_use_segregated:x.cycle_paths.shared_use_segregated,shared_use_unsegregated:x.cycle_paths.shared_use_unsegregated},"red"),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show?"visible":"none"}},{filter:s[3](s[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[La]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),e.$on("click",ja),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&9?re(t,[o&0&&se(G(bt)),o&0&&{sourceLayer:bt},t[2],o&1&&{layout:{visibility:r[0].show?"visible":"none"}},o&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};o&131072&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ia(s){let e,l,t,n,r;function o(i){s[5](i)}let f={name:bt,title:Oa,$$slots:{controls:[Ta],help:[ka]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${bt}.pmtiles`,$$slots:{default:[Ma]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let bt="cycle_paths",Oa="Cycle paths";function Na(s){return{show:!0,track:s.includes("track"),lane:s.includes("lane"),shared_use_segregated:s.includes("shared_use_segregated"),shared_use_unsegregated:s.includes("shared_use_unsegregated")}}function Pa(s){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[s.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[s.direction],t=s.width=="unknown"?"unknown":`${s.width} meters`;return[e,`${l} ${s.direction}`,t]}function ja(s){window.open(`http://openstreetmap.org/way/${s.detail.features[0].properties.osm_id}`,"_blank")}function Ra(s,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function o($){return $.show?n.filter(_=>$[_]).join(","):null}let f=Gt(bt,r,o,Na);Y(s,f,$=>l(0,t=$));let i=[["track","Separated tracks",x.cycle_paths.track],["lane","Unprotected lanes",x.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",x.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",x.cycle_paths.shared_use_unsegregated]];function a($){let _=n.filter(k=>$[k]);return["in",["get","kind"],["literal",_]]}function u($,_){s.$$.not_equal(t[_],$)&&(t[_]=$,f.set(t))}function c($){s.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,f,i,a,u,c]}class Da extends K{constructor(e){super(),X(this,e,Ra,Ia,J,{})}}function Aa(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Fa(s){let e;return{c(){e=y(`Major Road Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function qa(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Fa]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),b(n.$$.fragment),r=y(", as of September 2021."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Ga(s){let e,l=(s[4].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&q(t,l)},d(n){n&&h(e)}}}function za(s){let e,l;return e=new fe({props:{$$slots:{default:[Ga,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ha(s){let e,l;const t=[G(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[za]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&3?re(t,[o&0&&se(G(wt)),o&0&&{sourceLayer:wt},t[2],t[3],o&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ea(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:wt,title:Ba,$$slots:{help:[qa],icon:[Aa]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${wt}.pmtiles`,$$slots:{default:[Ha]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let wt="mrn",Ba="Major Road Network";function Ua(s,e,l){let t,n=x.mrn,r=$e(wt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class Wa extends K{constructor(e){super(),X(this,e,Ua,Ea,J,{})}}function Ya(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ja(s){let e;return{c(){e=y(`OS Open Roads
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Va(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Ja]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Qa(s){let e,l=(s[4].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&q(t,l)},d(n){n&&h(e)}}}function Za(s){let e,l;return e=new fe({props:{$$slots:{default:[Qa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ka(s){let e,l;const t=[G(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[Za]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&3?re(t,[o&0&&se(G(vt)),o&0&&{sourceLayer:vt},t[2],t[3],o&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Xa(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:vt,title:xa,$$slots:{help:[Va],icon:[Ya]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${vt}.pmtiles`,$$slots:{default:[Ka]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let vt="srn",xa="Strategic Road Network";function ef(s,e,l){let t,n=x.srn,r=$e(vt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class tf extends K{constructor(e){super(),X(this,e,ef,Xa,J,{})}}function nf(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function lf(s){let e;return{c(){e=y(`National Cycle Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rf(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[lf]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from Sustrans about the "),b(n.$$.fragment),r=y(", downloaded on 22/01/2024."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function wl(s){let e,l,t,n=s[4].Desc_+"",r;return{c(){e=S("li"),l=y("Description: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].Desc_+"")&&q(r,n)},d(o){o&&h(e)}}}function vl(s){let e,l,t,n=s[4].Greenway+"",r;return{c(){e=S("li"),l=y("Is greenway: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].Greenway+"")&&q(r,n)},d(o){o&&h(e)}}}function kl(s){let e,l,t,n=s[4].RouteType+"",r;return{c(){e=S("li"),l=y("Route type: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].RouteType+"")&&q(r,n)},d(o){o&&h(e)}}}function yl(s){let e,l,t,n=s[4].RouteNo+"",r;return{c(){e=S("li"),l=y("Route number: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].RouteNo+"")&&q(r,n)},d(o){o&&h(e)}}}function Sl(s){let e,l,t,n=s[4].RouteCat+"",r;return{c(){e=S("li"),l=y("Route Category: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].RouteCat+"")&&q(r,n)},d(o){o&&h(e)}}}function Tl(s){let e,l,t,n=s[4].OpenStatus+"",r;return{c(){e=S("li"),l=y("Open Status: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].OpenStatus+"")&&q(r,n)},d(o){o&&h(e)}}}function Cl(s){let e,l,t,n=s[4].Surface+"",r;return{c(){e=S("li"),l=y("Surface: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].Surface+"")&&q(r,n)},d(o){o&&h(e)}}}function Ll(s){let e,l,t,n=s[4].Quality+"",r;return{c(){e=S("li"),l=y("Quality: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].Quality+"")&&q(r,n)},d(o){o&&h(e)}}}function Ml(s){let e,l,t,n=s[4].RoadClass+"",r;return{c(){e=S("li"),l=y("Road Class: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].RoadClass+"")&&q(r,n)},d(o){o&&h(e)}}}function sf(s){let e,l,t,n,r,o,f,i,a,u=s[4].Desc_&&wl(s),c=s[4].Greenway&&vl(s),$=s[4].RouteType&&kl(s),_=s[4].RouteNo&&yl(s),k=s[4].RouteCat&&Sl(s),T=s[4].OpenStatus&&Tl(s),C=s[4].Surface&&Cl(s),N=s[4].Quality&&Ll(s),D=s[4].RoadClass&&Ml(s);return{c(){e=S("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),$&&$.c(),n=L(),_&&_.c(),r=L(),k&&k.c(),o=L(),T&&T.c(),f=L(),C&&C.c(),i=L(),N&&N.c(),a=L(),D&&D.c()},m(P,M){d(P,e,M),u&&u.m(e,null),p(e,l),c&&c.m(e,null),p(e,t),$&&$.m(e,null),p(e,n),_&&_.m(e,null),p(e,r),k&&k.m(e,null),p(e,o),T&&T.m(e,null),p(e,f),C&&C.m(e,null),p(e,i),N&&N.m(e,null),p(e,a),D&&D.m(e,null)},p(P,M){P[4].Desc_?u?u.p(P,M):(u=wl(P),u.c(),u.m(e,l)):u&&(u.d(1),u=null),P[4].Greenway?c?c.p(P,M):(c=vl(P),c.c(),c.m(e,t)):c&&(c.d(1),c=null),P[4].RouteType?$?$.p(P,M):($=kl(P),$.c(),$.m(e,n)):$&&($.d(1),$=null),P[4].RouteNo?_?_.p(P,M):(_=yl(P),_.c(),_.m(e,r)):_&&(_.d(1),_=null),P[4].RouteCat?k?k.p(P,M):(k=Sl(P),k.c(),k.m(e,o)):k&&(k.d(1),k=null),P[4].OpenStatus?T?T.p(P,M):(T=Tl(P),T.c(),T.m(e,f)):T&&(T.d(1),T=null),P[4].Surface?C?C.p(P,M):(C=Cl(P),C.c(),C.m(e,i)):C&&(C.d(1),C=null),P[4].Quality?N?N.p(P,M):(N=Ll(P),N.c(),N.m(e,a)):N&&(N.d(1),N=null),P[4].RoadClass?D?D.p(P,M):(D=Ml(P),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(P){P&&h(e),u&&u.d(),c&&c.d(),$&&$.d(),_&&_.d(),k&&k.d(),T&&T.d(),C&&C.d(),N&&N.d(),D&&D.d()}}}function of(s){let e,l;return e=new fe({props:{$$slots:{default:[sf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function af(s){let e,l;const t=[G(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[1],"line-width":4,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[of]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&3?re(t,[o&0&&se(G(kt)),o&0&&{sourceLayer:kt},t[2],t[3],o&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ff(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:kt,title:uf,$$slots:{help:[rf],icon:[nf]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${kt}.pmtiles`,$$slots:{default:[af]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let kt="national_cycle_network",uf="National Cycle Network";function cf(s,e,l){let t,n=x.national_cycle_network,r=$e(kt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class pf extends K{constructor(e){super(),X(this,e,cf,ff,J,{})}}function Il(s,e,l){const t=s.slice();return t[6]=e[l][0],t[7]=e[l][1],t[8]=e[l][2],t}function $f(s){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function mf(s){let e,l,t,n,r,o,f,i,a,u,c,$;return u=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[$f]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=S("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),o=S("p"),o.textContent="Data valid as of 1 January, 2024",f=L(),i=S("p"),a=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(u.$$.fragment),c=y("."),F(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(e,f),p(e,i),p(i,a),w(u,i,null),p(i,c),$=!0},p(_,k){const T={};k&2048&&(T.$$scope={dirty:k,ctx:_}),u.$set(T)},i(_){$||(m(u.$$.fragment,_),$=!0)},o(_){g(u.$$.fragment,_),$=!1},d(_){_&&h(e),v(u)}}}function _f(s){let e,l,t;return l=new Ae({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function gf(s){let e,l,t=ln(s[5].angle+s[8])+"",n;return{c(){e=S("p"),l=new Dt(!1),n=y(` side of the road: no pavement
          `),l.a=n},m(r,o){d(r,e,o),l.m(t,e),p(e,n)},p(r,o){o&32&&t!==(t=ln(r[5].angle+r[8])+"")&&l.p(t)},d(r){r&&h(e)}}}function df(s){let e,l,t=ln(s[5].angle+s[8])+"",n,r,o=s[6]+"",f,i,a,u=s[7]+"",c,$;return{c(){e=S("p"),l=new Dt(!1),n=y(` side of the road:
            `),r=S("b"),f=y(o),i=y(`
            m average,
            `),a=S("b"),c=y(u),$=y(`
            m minimum
          `),l.a=n},m(_,k){d(_,e,k),l.m(t,e),p(e,n),p(e,r),p(r,f),p(e,i),p(e,a),p(a,c),p(e,$)},p(_,k){k&32&&t!==(t=ln(_[5].angle+_[8])+"")&&l.p(t),k&32&&o!==(o=_[6]+"")&&q(f,o),k&32&&u!==(u=_[7]+"")&&q(c,u)},d(_){_&&h(e)}}}function Ol(s){let e;function l(r,o){return r[6]?df:gf}let t=l(s),n=t(s);return{c(){n.c(),e=ve()},m(r,o){n.m(r,o),d(r,e,o)},p(r,o){t===(t=l(r))&&n?n.p(r,o):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function hf(s){let e,l=he([[s[5].left_average,s[5].left_minimum,-90],[s[5].right_average,s[5].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Ol(Il(s,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ve()},m(n,r){for(let o=0;o<2;o+=1)t[o]&&t[o].m(n,r);d(n,e,r)},p(n,r){if(r&32){l=he([[n[5].left_average,n[5].left_minimum,-90],[n[5].right_average,n[5].right_minimum,90]]);let o;for(o=0;o<2;o+=1){const f=Il(n,l,o);t[o]?t[o].p(f,r):(t[o]=Ol(f),t[o].c(),t[o].m(e.parentNode,e))}for(;o<2;o+=1)t[o].d(1)}},d(n){n&&h(e),Qe(t,n)}}}function bf(s){let e,l;return e=new fe({props:{openOn:"hover",$$slots:{default:[hf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&2080&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function wf(s){let e,l;const t=[G(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":_e(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],s[2],s[1]),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[bf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(G(yt)),o&0&&{sourceLayer:yt},t[2],t[3],o&6&&{paint:{"line-color":_e(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":je,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&2048&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function vf(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:yt,title:kf,$$slots:{controls:[_f],help:[mf]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${Kt()}/v1/${yt}.pmtiles`,$$slots:{default:[wf]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&2048&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let yt="pavement_widths",kf="OS Pavement widths";function yf(s){let e=Math.floor((s+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function ln(s){return`${yf(s)} <span style="display: inline-block; rotate: ${s}deg">⬆</span>`}function Sf(s,e,l){let t,n=x.sequential_low_to_high,r=[0,2,4,6,8,13],o=$e(yt);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class Tf extends K{constructor(e){super(),X(this,e,Sf,vf,J,{})}}function Cf(s){let e;return{c(){e=y("the PCT website")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Lf(s){let e;return{c(){e=y("2017 journal article")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Mf(s){let e,l,t,n,r,o,f,i,a,u,c,$;return i=new le({props:{href:"https://www.pct.bike",$$slots:{default:[Cf]},$$scope:{ctx:s}}}),u=new le({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Lf]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=S("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),o=S("p"),f=y("See "),b(i.$$.fragment),a=y(" and "),b(u.$$.fragment),c=y(" for details on methodology and data sources."),F(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(o,f),w(i,o,null),p(o,a),w(u,o,null),p(o,c),$=!0},p(_,k){const T={};k&1024&&(T.$$scope={dirty:k,ctx:_}),i.$set(T);const C={};k&1024&&(C.$$scope={dirty:k,ctx:_}),u.$set(C)},i(_){$||(m(i.$$.fragment,_),m(u.$$.fragment,_),$=!0)},o(_){g(i.$$.fragment,_),g(u.$$.fragment,_),$=!1},d(_){_&&h(e),v(i),v(u)}}}function If(s){let e,l,t,n,r,o,f,i,a;l=new Ae({props:{colorScale:s[1],limits:s[2]}});function u(k){s[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};s[0].tripPurpose!==void 0&&(c.value=s[0].tripPurpose),n=new Sn({props:c}),H.push(()=>E(n,"value",u));function $(k){s[6](k)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return s[0].scenario!==void 0&&(_.value=s[0].scenario),f=new At({props:_}),H.push(()=>E(f,"value",$)),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),o=L(),b(f.$$.fragment),F(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(k,T){d(k,e,T),w(l,e,null),p(e,t),w(n,e,null),p(e,o),w(f,e,null),a=!0},p(k,T){const C={};!r&&T&1&&(r=!0,C.value=k[0].tripPurpose,B(()=>r=!1)),n.$set(C);const N={};!i&&T&1&&(i=!0,N.value=k[0].scenario,B(()=>i=!1)),f.$set(N)},i(k){a||(m(l.$$.fragment,k),m(n.$$.fragment,k),m(f.$$.fragment,k),a=!0)},o(k){g(l.$$.fragment,k),g(n.$$.fragment,k),g(f.$$.fragment,k),a=!1},d(k){k&&h(e),v(l),v(n),v(f)}}}function Of(s){let e,l=s[4](s[9])+"",t;return{c(){e=new Dt(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Nf(s){let e,l;return e=new fe({props:{$$slots:{default:[Of,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Pf(s){let e,l;const t=[G(nt),{sourceLayer:nt},{paint:{"line-color":_e(["get",s[0].scenario],s[2],s[1]),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show&&s[0].tripPurpose==nt?"visible":"none"}}];let n={$$slots:{default:[Nf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(G(nt)),o&0&&{sourceLayer:nt},o&7&&{paint:{"line-color":_e(["get",r[0].scenario],r[2],r[1]),"line-width":je,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==nt?"visible":"none"}}]):{};o&1024&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function jf(s){let e,l=s[4](s[9])+"",t;return{c(){e=new Dt(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Rf(s){let e,l;return e=new fe({props:{$$slots:{default:[jf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Df(s){let e,l;const t=[G(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":_e(["get",s[0].scenario],s[2],s[1]),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show&&s[0].tripPurpose==mt?"visible":"none"}}];let n={$$slots:{default:[Rf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(G(mt)),o&0&&{sourceLayer:mt},t[2],t[3],o&7&&{paint:{"line-color":_e(["get",r[0].scenario],r[2],r[1]),"line-width":je,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==mt?"visible":"none"}}]):{};o&1024&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Af(s){let e,l,t,n,r,o,f;function i(u){s[7](u)}let a={name:Or,title:Ff,$$slots:{controls:[If],help:[Mf]},$$scope:{ctx:s}};return s[0].show!==void 0&&(a.show=s[0].show),e=new ue({props:a}),H.push(()=>E(e,"show",i)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${nt}.pmtiles`,$$slots:{default:[Pf]},$$scope:{ctx:s}}}),o=new pe({props:{url:`pmtiles://${ce()}/v1/${mt}.pmtiles`,$$slots:{default:[Df]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(o.$$.fragment)},m(u,c){w(e,u,c),d(u,t,c),w(n,u,c),d(u,r,c),w(o,u,c),f=!0},p(u,[c]){const $={};c&1025&&($.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,$.show=u[0].show,B(()=>l=!1)),e.$set($);const _={};c&1025&&(_.$$scope={dirty:c,ctx:u}),n.$set(_);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),o.$set(k)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(o.$$.fragment,u),f=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),g(o.$$.fragment,u),f=!1},d(u){u&&(h(t),h(r)),v(e,u),v(n,u),v(o,u)}}}let Or="pct",nt="pct_commute",mt="pct_school",Ff="Propensity to Cycle Tool";function qf(s){return s.show?`${s.tripPurpose}/${s.scenario}`:null}function Gf(s){let[e,l]=s.split("/");return{show:!0,tripPurpose:e,scenario:l}}function zf(s,e,l){let t,n=x.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=Gt(Or,{show:!1,tripPurpose:nt,scenario:"baseline"},qf,Gf);Y(s,f,$=>l(0,t=$));function i($){let _=$.baseline,k=$.gov_target,T=$.go_dutch,C=`<h2>Trip purpose: ${t.tripPurpose==nt?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)C+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let N=(k/_).toFixed(1),D=(T/_).toFixed(1);C+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${N}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return C}function a($){s.$$.not_equal(t.tripPurpose,$)&&(t.tripPurpose=$,f.set(t))}function u($){s.$$.not_equal(t.scenario,$)&&(t.scenario=$,f.set(t))}function c($){s.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,n,r,f,i,a,u,c]}class Hf extends K{constructor(e){super(),X(this,e,zf,Af,J,{})}}function Ef(s){let e;return{c(){e=y("Basemap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bf(s){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Uf(s){let e,l,t,n,r,o,f,i,a,u,c,$,_;return n=new le({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Ef]},$$scope:{ctx:s}}}),c=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Bf]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),t=y("The average speed data is collected over a six-month period by "),b(n.$$.fragment),r=y(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),o=L(),f=S("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=S("p"),u=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(c.$$.fragment),$=y("."),F(e,"slot","help")},m(k,T){d(k,e,T),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(e,i),p(e,a),p(a,u),w(c,a,null),p(a,$),_=!0},p(k,T){const C={};T&512&&(C.$$scope={dirty:T,ctx:k}),n.$set(C);const N={};T&512&&(N.$$scope={dirty:T,ctx:k}),c.$set(N)},i(k){_||(m(n.$$.fragment,k),m(c.$$.fragment,k),_=!0)},o(k){g(n.$$.fragment,k),g(c.$$.fragment,k),_=!1},d(k){k&&h(e),v(n),v(c)}}}function Wf(s){let e,l,t,n,r,o;l=new Ae({props:{colorScale:s[1],limits:s[2]}});function f(a){s[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return s[0].kind!==void 0&&(i.value=s[0].kind),n=new Sn({props:i}),H.push(()=>E(n,"value",f)),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),F(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(a,u){d(a,e,u),w(l,e,null),p(e,t),w(n,e,null),o=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,B(()=>r=!1)),n.$set(c)},i(a){o||(m(l.$$.fragment,a),m(n.$$.fragment,a),o=!0)},o(a){g(l.$$.fragment,a),g(n.$$.fragment,a),o=!1},d(a){a&&h(e),v(l),v(n)}}}function Yf(s){let e,l,t=s[8].indicative_mph+"",n,r,o,f,i,a=s[8].highest_mph+"",u,c,$=s[4][s[8].highest_description]+"",_,k;return{c(){e=S("p"),l=y("Posted speed limit: "),n=y(t),r=y(" mph"),o=L(),f=S("p"),i=y("Highest average speed: "),u=y(a),c=y(" mph (during "),_=y($),k=y(")")},m(T,C){d(T,e,C),p(e,l),p(e,n),p(e,r),d(T,o,C),d(T,f,C),p(f,i),p(f,u),p(f,c),p(f,_),p(f,k)},p(T,C){C&256&&t!==(t=T[8].indicative_mph+"")&&q(n,t),C&256&&a!==(a=T[8].highest_mph+"")&&q(u,a),C&256&&$!==($=T[4][T[8].highest_description]+"")&&q(_,$)},d(T){T&&(h(e),h(o),h(f))}}}function Jf(s){let e,l;return e=new fe({props:{$$slots:{default:[Yf,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Vf(s){let e,l;const t=[G(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":_e(["get",s[0].kind],s[2],s[1]),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show?"visible":"none"}}];let n={$$slots:{default:[Jf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(G(St)),o&0&&{sourceLayer:St},t[2],t[3],o&7&&{paint:{"line-color":_e(["get",r[0].kind],r[2],r[1]),"line-width":je,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};o&512&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Qf(s){let e,l,t,n,r;function o(i){s[6](i)}let f={name:St,title:Zf,$$slots:{controls:[Wf],help:[Uf]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${Kt()}/v1/${St}.pmtiles`,$$slots:{default:[Vf]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let St="road_speeds",Zf="OS Speeds";function Kf(s){return s.show?s.kind:null}function Xf(s){return{show:!0,kind:s}}function xf(s,e,l){let t,n=x.sequential_low_to_high,r=[0,20,30,40,50,90],f=Gt(St,{show:!1,kind:"indicative_mph"},Kf,Xf);Y(s,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){s.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){s.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class eu extends K{constructor(e){super(),X(this,e,xf,Qf,J,{})}}function tu(s){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function nu(s){let e,l,t,n,r,o,f,i,a,u;return i=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[tu]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=S("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),o=S("p"),f=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(i.$$.fragment),a=y("."),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(o,f),w(i,o,null),p(o,a),u=!0},p(c,$){const _={};$&64&&(_.$$scope={dirty:$,ctx:c}),i.$set(_)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){g(i.$$.fragment,c),u=!1},d(c){c&&h(e),v(i)}}}function lu(s){let e,l,t;return l=new Ae({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ru(s){let e,l,t,n=s[5].average+"",r,o,f,i,a,u,c=s[5].minimum+"",$,_;return{c(){e=S("p"),l=y("Average width: "),t=S("b"),r=y(n),o=y(`
        meters`),f=L(),i=S("p"),a=y("Minimum width: "),u=S("b"),$=y(c),_=y(`
        meters`)},m(k,T){d(k,e,T),p(e,l),p(e,t),p(t,r),p(e,o),d(k,f,T),d(k,i,T),p(i,a),p(i,u),p(u,$),p(i,_)},p(k,T){T&32&&n!==(n=k[5].average+"")&&q(r,n),T&32&&c!==(c=k[5].minimum+"")&&q($,c)},d(k){k&&(h(e),h(f),h(i))}}}function su(s){let e,l;return e=new fe({props:{$$slots:{default:[ru,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ou(s){let e,l;const t=[G(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":_e(["get","average"],s[2],s[1]),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[su]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(G(Tt)),o&0&&{sourceLayer:Tt},t[2],t[3],o&6&&{paint:{"line-color":_e(["get","average"],r[2],r[1]),"line-width":je,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&64&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function iu(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:Tt,title:au,$$slots:{controls:[lu],help:[nu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${Kt()}/v1/${Tt}.pmtiles`,$$slots:{default:[ou]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Tt="road_widths",au="OS Road widths";function fu(s,e,l){let t,n=x.sequential_low_to_high,r=[0,5,10,15,20,100],o=$e(Tt);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class uu extends K{constructor(e){super(),X(this,e,fu,iu,J,{})}}function cu(s){let e,l,t;return l=new Se({props:{color:x.trams}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function pu(s){let e,l,t,n,r;return n=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 7 February 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),b(n.$$.fragment),F(e,"slot","help")},m(o,f){d(o,e,f),p(e,l),p(e,t),w(n,e,null),r=!0},p:Q,i(o){r||(m(n.$$.fragment,o),r=!0)},o(o){g(n.$$.fragment,o),r=!1},d(o){o&&h(e),v(n)}}}function $u(s){let e,l;const t=[G(Ct),{sourceLayer:Ct},{paint:{"line-color":x.trams,"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),e.$on("click",gu),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(G(Ct)),o&0&&{sourceLayer:Ct},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function mu(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:Ct,title:_u,$$slots:{help:[pu],icon:[cu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ct}.pmtiles`,$$slots:{default:[$u]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ct="trams",_u="Trams";function gu(s){window.open(`http://openstreetmap.org/way/${s.detail.features[0].properties.osm_id}`,"_blank")}function du(s,e,l){let t,n=$e(Ct);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class hu extends K{constructor(e){super(),X(this,e,du,mu,J,{})}}function bu(s){let e;return{c(){e=y(`Bus Open Data Service
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function wu(s){let e,l,t,n,r,o,f,i,a,u;return n=new le({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[bu]},$$scope:{ctx:s}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),b(n.$$.fragment),r=y(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),o=L(),f=S("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&64&&(_.$$scope={dirty:$,ctx:c}),n.$set(_)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function vu(s){let e,l,t,n,r;return n=new Ae({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("div"),l=S("p"),l.textContent="Peak hourly frequency:",t=L(),b(n.$$.fragment),F(e,"slot","controls")},m(o,f){d(o,e,f),p(e,l),p(e,t),w(n,e,null),r=!0},p:Q,i(o){r||(m(n.$$.fragment,o),r=!0)},o(o){g(n.$$.fragment,o),r=!1},d(o){o&&h(e),v(n)}}}function ku(s){let e,l,t,n=s[5].stop_name+"",r,o,f,i,a,u=s[5].peak+"",c,$,_,k,T,C=s[5].peak_description+"",N,D,P,M,O,I=s[5].total+"",R,j,z=s[5].total_description+"",Z,ae;return{c(){e=S("p"),l=y("Stop name: "),t=S("b"),r=y(n),o=L(),f=S("p"),i=y("Peak: "),a=S("b"),c=y(u),$=y(`
        buses during the busiest hour of any day`),_=L(),k=S("p"),T=y("The peak hour is "),N=y(C),D=L(),P=S("p"),M=y("Total buses per day: "),O=S("b"),R=y(I),j=y(`
        (for `),Z=y(z),ae=y(", the busiest day of the week)")},m(A,ee){d(A,e,ee),p(e,l),p(e,t),p(t,r),d(A,o,ee),d(A,f,ee),p(f,i),p(f,a),p(a,c),p(f,$),d(A,_,ee),d(A,k,ee),p(k,T),p(k,N),d(A,D,ee),d(A,P,ee),p(P,M),p(P,O),p(O,R),p(P,j),p(P,Z),p(P,ae)},p(A,ee){ee&32&&n!==(n=A[5].stop_name+"")&&q(r,n),ee&32&&u!==(u=A[5].peak+"")&&q(c,u),ee&32&&C!==(C=A[5].peak_description+"")&&q(N,C),ee&32&&I!==(I=A[5].total+"")&&q(R,I),ee&32&&z!==(z=A[5].total_description+"")&&q(Z,z)},d(A){A&&(h(e),h(o),h(f),h(_),h(k),h(D),h(P))}}}function yu(s){let e,l;return e=new fe({props:{$$slots:{default:[ku,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Su(s){let e,l;const t=[G(Lt),{sourceLayer:Lt},{paint:{"circle-color":_e(["get","peak"],s[2],s[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[yu]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ft({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(G(Lt)),o&0&&{sourceLayer:Lt},o&6&&{paint:{"circle-color":_e(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&64&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Tu(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:Lt,title:Cu,$$slots:{controls:[vu],help:[wu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Lt}.pmtiles`,$$slots:{default:[Su]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Lt="bus_stops",Cu="Bus stops";function Lu(s,e,l){let t,n=x.sequential_low_to_high,r=[0,3,10,20,30,100],o=$e(Lt);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class Mu extends K{constructor(e){super(),X(this,e,Lu,Tu,J,{})}}function Iu(s){let e;return{c(){e=y("crossing")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ou(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Iu]},$$scope:{ctx:s}}}),f=new Xe({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Nu(s){let e,l,t;return l=new Xt({props:{rows:s[2]}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Pu(s){let e,l=Nl(s[4])+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=Nl(n[4])+"")&&q(t,l)},d(n){n&&h(e)}}}function ju(s){let e,l;return e=new fe({props:{$$slots:{default:[Pu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ru(s){let e,l;const t=[G(Mt),{sourceLayer:Mt},{paint:{"circle-color":Ke(["get","crossing"],{traffic_signals:x.signalized_crossing},x.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:s[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[ju]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ft({props:n}),e.$on("click",Fu),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(G(Mt)),o&0&&{sourceLayer:Mt},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Du(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:Mt,title:Au,$$slots:{controls:[Nu],help:[Ou]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Mt}.pmtiles`,$$slots:{default:[Ru]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Mt="crossings",Au="Crossings";function Nl(s){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[s.crossing]??`Unknown crossing type (${s.crossing})`}function Fu(s){window.open(`http://openstreetmap.org/node/${s.detail.features[0].properties.osm_id}`,"_blank")}function qu(s,e,l){let t,n=$e(Mt);Y(s,n,f=>l(0,t=f));let r=[["Signalized",x.signalized_crossing],["Other",x.other_crossing]];function o(f){t=f,n.set(t)}return[t,n,r,o]}class Gu extends K{constructor(e){super(),X(this,e,qu,Du,J,{})}}function zu(s){let e;return{c(){e=y("OS Terrain 50")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Hu(s){let e,l,t,n,r,o,f,i,a,u,c,$,_,k;return i=new le({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[zu]},$$scope:{ctx:s}}}),c=new Te({}),_=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=S("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),o=S("p"),f=y("This layer is built from "),b(i.$$.fragment),a=y(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),b(c.$$.fragment),$=L(),b(_.$$.fragment),F(e,"slot","help")},m(T,C){d(T,e,C),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(o,f),w(i,o,null),p(o,a),p(e,u),w(c,e,null),p(e,$),w(_,e,null),k=!0},p(T,C){const N={};C&64&&(N.$$scope={dirty:C,ctx:T}),i.$set(N)},i(T){k||(m(i.$$.fragment,T),m(c.$$.fragment,T),m(_.$$.fragment,T),k=!0)},o(T){g(i.$$.fragment,T),g(c.$$.fragment,T),g(_.$$.fragment,T),k=!1},d(T){T&&h(e),v(i),v(c),v(_)}}}function Eu(s){let e,l,t;return l=new Ae({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Bu(s){let e,l,t,n=Math.abs(s[5].gradient)/100+"",r,o;return{c(){e=S("p"),l=y("Gradient: "),t=S("b"),r=y(n),o=y(`
        %`)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(t,r),p(e,o)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&q(r,n)},d(f){f&&h(e)}}}function Uu(s){let e,l;return e=new fe({props:{$$slots:{default:[Bu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Wu(s){let e,l,t,n;const r=[G(We),{sourceLayer:We},{manageHoverState:!0},{paint:{"line-color":_e(["/",["abs",["get","gradient"]],100],s[2],s[1]),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let o={$$slots:{default:[Uu]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new me({props:o});const f=[G(We+"_arrows"),{sourceLayer:We},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new Ln({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?re(r,[u&0&&se(G(We)),u&0&&{sourceLayer:We},r[2],u&6&&{paint:{"line-color":_e(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":je,"line-opacity":te(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?re(f,[u&0&&se(G(We+"_arrows")),u&0&&{sourceLayer:We},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Yu(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:We,title:Ju,$$slots:{controls:[Eu],help:[Hu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${We}.pmtiles`,$$slots:{default:[Wu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let We="gradient",Ju="Gradients";function Vu(s,e,l){let t,n=x.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=$e(We);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class Qu extends K{constructor(e){super(),X(this,e,Vu,Yu,J,{})}}function Zu(s){let e,l;return{c(){e=S("img"),F(e,"slot","icon"),tn(e.src,l=Gr)||F(e,"src",l),F(e,"alt","a logo representing cycle parking")},m(t,n){d(t,e,n)},p:Q,d(t){t&&h(e)}}}function Ku(s){let e;return{c(){e=y("OpenStreetMap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Xu(s){let e;return{c(){e=y("OpenStreetMap Carto")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xu(s){let e,l,t,n,r,o,f,i,a,u,c,$;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Ku]},$$scope:{ctx:s}}}),a=new le({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Xu]},$$scope:{ctx:s}}}),c=new Xe({}),{c(){e=S("span"),l=S("p"),t=y("Cycle parking, according to "),b(n.$$.fragment),r=y(` (as of 9 August 2023). The type of parking, public/private
      access, and whether it's covered are not shown.`),o=L(),f=S("p"),i=y("Icon from "),b(a.$$.fragment),u=L(),b(c.$$.fragment),F(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(f,i),w(a,f,null),p(e,u),w(c,e,null),$=!0},p(_,k){const T={};k&16&&(T.$$scope={dirty:k,ctx:_}),n.$set(T);const C={};k&16&&(C.$$scope={dirty:k,ctx:_}),a.$set(C)},i(_){$||(m(n.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),$=!0)},o(_){g(n.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),$=!1},d(_){_&&h(e),v(n),v(a),v(c)}}}function ec(s){let e,l,t,n=(s[3].capacity??"unknown")+"",r;return{c(){e=S("p"),l=y("Capacity: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&8&&n!==(n=(o[3].capacity??"unknown")+"")&&q(r,n)},d(o){o&&h(e)}}}function tc(s){let e,l;return e=new fe({props:{$$slots:{default:[ec,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function nc(s){let e,l;const t=[G(It),{sourceLayer:It},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[tc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ln({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(G(It)),o&0&&{sourceLayer:It},o&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function lc(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:It,title:rc,$$slots:{help:[xu],icon:[Zu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${It}.pmtiles`,$$slots:{default:[nc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let It="cycle_parking",rc="Cycle parking";function sc(s,e,l){let t,n=$e(It);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class oc extends K{constructor(e){super(),X(this,e,sc,lc,J,{})}}function ic(s){let e,l,t,n,r;return n=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      07 February 2024).`,t=L(),b(n.$$.fragment),F(e,"slot","help")},m(o,f){d(o,e,f),p(e,l),p(e,t),w(n,e,null),r=!0},p:Q,i(o){r||(m(n.$$.fragment,o),r=!0)},o(o){g(n.$$.fragment,o),r=!1},d(o){o&&h(e),v(n)}}}function ac(s){let e,l,t;return e=new Se({props:{color:x.education.schools}}),{c(){b(e.$$.fragment),l=y(`
        Schools`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function fc(s){let e,l,t;return e=new Se({props:{color:x.education.colleges}}),{c(){b(e.$$.fragment),l=y(`
        Colleges`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function uc(s){let e,l,t;return e=new Se({props:{color:x.education.universities}}),{c(){b(e.$$.fragment),l=y(`
        Universities`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function cc(s){let e,l,t,n,r,o,f,i,a;function u(C){s[3](C)}let c={$$slots:{default:[ac]},$$scope:{ctx:s}};s[0].school!==void 0&&(c.checked=s[0].school),e=new Ye({props:c}),H.push(()=>E(e,"checked",u));function $(C){s[4](C)}let _={$$slots:{default:[fc]},$$scope:{ctx:s}};s[0].college!==void 0&&(_.checked=s[0].college),n=new Ye({props:_}),H.push(()=>E(n,"checked",$));function k(C){s[5](C)}let T={$$slots:{default:[uc]},$$scope:{ctx:s}};return s[0].university!==void 0&&(T.checked=s[0].university),f=new Ye({props:T}),H.push(()=>E(f,"checked",k)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),o=L(),b(f.$$.fragment)},m(C,N){w(e,C,N),d(C,t,N),w(n,C,N),d(C,o,N),w(f,C,N),a=!0},p(C,N){const D={};N&2048&&(D.$$scope={dirty:N,ctx:C}),!l&&N&1&&(l=!0,D.checked=C[0].school,B(()=>l=!1)),e.$set(D);const P={};N&2048&&(P.$$scope={dirty:N,ctx:C}),!r&&N&1&&(r=!0,P.checked=C[0].college,B(()=>r=!1)),n.$set(P);const M={};N&2048&&(M.$$scope={dirty:N,ctx:C}),!i&&N&1&&(i=!0,M.checked=C[0].university,B(()=>i=!1)),f.$set(M)},i(C){a||(m(e.$$.fragment,C),m(n.$$.fragment,C),m(f.$$.fragment,C),a=!0)},o(C){g(e.$$.fragment,C),g(n.$$.fragment,C),g(f.$$.fragment,C),a=!1},d(C){C&&(h(t),h(o)),v(e,C),v(n,C),v(f,C)}}}function pc(s){let e,l,t;return l=new De({props:{small:!0,$$slots:{default:[cc]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const o={};r&2049&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function $c(s){let e,l=(s[10].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&q(t,l)},d(n){n&&h(e)}}}function mc(s){let e,l;return e=new fe({props:{$$slots:{default:[$c,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function _c(s){let e,l;const t=[G(Ot),{sourceLayer:Ot},{paint:{"fill-color":Ke(["get","type"],{school:x.education.schools,college:x.education.colleges,university:x.education.universities},"grey"),"fill-opacity":te(.7,1)}},{layout:{visibility:s[0].show?"visible":"none"}},{filter:s[2](s[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[mc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&5?re(t,[o&0&&se(G(Ot)),o&0&&{sourceLayer:Ot},t[2],o&1&&{layout:{visibility:r[0].show?"visible":"none"}},o&5&&{filter:r[2](r[0])},t[5],t[6]]):{};o&2048&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function gc(s){let e,l,t,n,r;function o(i){s[6](i)}let f={name:Ot,title:dc,$$slots:{controls:[pc],help:[ic]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ot}.pmtiles`,$$slots:{default:[_c]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ot="education",dc="Education";function hc(s){return{show:!0,school:s.includes("school"),college:s.includes("college"),university:s.includes("university")}}function bc(s,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function o(_){return _.show?n.filter(k=>_[k]).join(","):null}let f=Gt(Ot,r,o,hc);Y(s,f,_=>l(0,t=_));function i(_){let k=n.filter(T=>_[T]);return["in",["get","type"],["literal",k]]}function a(_){s.$$.not_equal(t.school,_)&&(t.school=_,f.set(t))}function u(_){s.$$.not_equal(t.college,_)&&(t.college=_,f.set(t))}function c(_){s.$$.not_equal(t.university,_)&&(t.university=_,f.set(t))}function $(_){s.$$.not_equal(t.show,_)&&(t.show=_,f.set(t))}return[t,f,i,a,u,c,$]}class wc extends K{constructor(e){super(),X(this,e,bc,gc,J,{})}}function vc(s){let e,l,t;return l=new Se({props:{color:x.hospitals}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function kc(s){let e;return{c(){e=y("hospital")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function yc(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[kc]},$$scope:{ctx:s}}}),f=new Xe({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
      outpatient clinics or individual doctor's offices.`),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Sc(s){let e,l=(s[3].name??"Unnamed hospital")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&q(t,l)},d(n){n&&h(e)}}}function Tc(s){let e,l;return e=new fe({props:{$$slots:{default:[Sc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Cc(s){let e,l;const t=[G(Nt),{sourceLayer:Nt},{paint:{"fill-color":x.hospitals,"fill-opacity":te(.7,1)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Tc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(G(Nt)),o&0&&{sourceLayer:Nt},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Lc(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:Nt,title:Mc,$$slots:{help:[yc],icon:[vc]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Nt}.pmtiles`,$$slots:{default:[Cc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Nt="hospitals",Mc="Hospitals";function Ic(s,e,l){let t,n=$e(Nt);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class Oc extends K{constructor(e){super(),X(this,e,Ic,Lc,J,{})}}function Nc(s){let e,l;return{c(){e=S("img"),F(e,"slot","icon"),tn(e.src,l=zr)||F(e,"src",l),F(e,"alt","A logo representing a train")},m(t,n){d(t,e,n)},p:Q,d(t){t&&h(e)}}}function Pc(s){let e;return{c(){e=y("railway station")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function jc(s){let e;return{c(){e=y(`National Rail
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Rc(s){let e,l,t,n,r,o,f,i,a,u,c,$,_;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Pc]},$$scope:{ctx:s}}}),a=new le({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[jc]},$$scope:{ctx:s}}}),$=new Xe({}),{c(){e=S("div"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),f=S("p"),i=y("Icon from "),b(a.$$.fragment),u=y(". (Note that not all stations shown are National Rail.)"),c=L(),b($.$$.fragment),F(e,"slot","help")},m(k,T){d(k,e,T),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(f,i),w(a,f,null),p(f,u),p(e,c),w($,e,null),_=!0},p(k,T){const C={};T&16&&(C.$$scope={dirty:T,ctx:k}),n.$set(C);const N={};T&16&&(N.$$scope={dirty:T,ctx:k}),a.$set(N)},i(k){_||(m(n.$$.fragment,k),m(a.$$.fragment,k),m($.$$.fragment,k),_=!0)},o(k){g(n.$$.fragment,k),g(a.$$.fragment,k),g($.$$.fragment,k),_=!1},d(k){k&&h(e),v(n),v(a),v($)}}}function Dc(s){let e,l=(s[3].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&q(t,l)},d(n){n&&h(e)}}}function Ac(s){let e,l;return e=new fe({props:{$$slots:{default:[Dc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Fc(s){let e,l;const t=[G(Zt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[Ac]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ln({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(G(Zt)),o&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function qc(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:Zt,title:Gc,$$slots:{help:[Rc],icon:[Nc]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new qt({props:{data:`${ce()}/v1/${Zt}.geojson`,$$slots:{default:[Fc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Zt="railway_stations",Gc="Railway stations";function zc(s,e,l){let t,n=$e(Zt);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class Hc extends K{constructor(e){super(),X(this,e,zc,qc,J,{})}}function Ec(s){let e,l,t;return l=new Se({props:{color:x.sports_spaces}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Bc(s){let e;return{c(){e=y("sports pitches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Uc(s){let e;return{c(){e=y("sports centres")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Wc(s){let e,l,t,n,r,o,f,i,a,u;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Bc]},$$scope:{ctx:s}}}),o=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Uc]},$$scope:{ctx:s}}}),a=new Xe({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" and "),b(o.$$.fragment),f=y(" data from OpenStreetMap (as of 9 August 2023)."),i=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),w(n,l,null),p(l,r),w(o,l,null),p(l,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&16&&(_.$$scope={dirty:$,ctx:c}),n.$set(_);const k={};$&16&&(k.$$scope={dirty:$,ctx:c}),o.$set(k)},i(c){u||(m(n.$$.fragment,c),m(o.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(o),v(a)}}}function Yc(s){let e,l=(s[3].name??"Unnamed sports space")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&q(t,l)},d(n){n&&h(e)}}}function Jc(s){let e,l;return e=new fe({props:{$$slots:{default:[Yc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Vc(s){let e,l;const t=[G(Pt),{sourceLayer:Pt},{paint:{"fill-color":x.sports_spaces,"fill-opacity":te(.7,1)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Jc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(G(Pt)),o&0&&{sourceLayer:Pt},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Qc(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:Pt,title:Zc,$$slots:{help:[Wc],icon:[Ec]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Pt}.pmtiles`,$$slots:{default:[Vc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Pt="sports_spaces",Zc="Sports spaces";function Kc(s,e,l){let t,n=$e(Pt);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class Xc extends K{constructor(e){super(),X(this,e,Kc,Qc,J,{})}}function xc(s){let e;return{c(){e=y("DfT stats19")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ep(s){let e;return{c(){e=y("documented by DfT")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function tp(s){let e,l,t,n,r,o,f,i,a,u,c,$,_,k,T,C,N,D,P,M,O,I,R,j;return n=new le({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[xc]},$$scope:{ctx:s}}}),D=new le({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[ep]},$$scope:{ctx:s}}}),R=new Te({}),{c(){e=S("span"),l=S("p"),t=y("This layer shows collisions recorded in the "),b(n.$$.fragment),r=y(" dataset. Please note these limitations:"),o=L(),f=S("ul"),i=S("li"),i.textContent="Only collisions between 2017 and 2022 are included",a=L(),u=S("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),$=S("li"),$.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,_=L(),k=S("li"),k.textContent='The "pedestrians" category also include mobility scooters',T=L(),C=S("li"),N=y("All limitations "),b(D.$$.fragment),P=y(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),M=L(),O=S("p"),O.textContent="You can click a point to open the full report, thanks to CycleStreets.",I=L(),b(R.$$.fragment),F(e,"slot","help")},m(z,Z){d(z,e,Z),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(f,i),p(f,a),p(f,u),p(f,c),p(f,$),p(f,_),p(f,k),p(f,T),p(f,C),p(C,N),w(D,C,null),p(C,P),p(e,M),p(e,O),p(e,I),w(R,e,null),j=!0},p(z,Z){const ae={};Z&4194304&&(ae.$$scope={dirty:Z,ctx:z}),n.$set(ae);const A={};Z&4194304&&(A.$$scope={dirty:Z,ctx:z}),D.$set(A)},i(z){j||(m(n.$$.fragment,z),m(D.$$.fragment,z),m(R.$$.fragment,z),j=!0)},o(z){g(n.$$.fragment,z),g(D.$$.fragment,z),g(R.$$.fragment,z),j=!1},d(z){z&&h(e),v(n),v(D),v(R)}}}function np(s){let e;return{c(){e=y("Pedestrians")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function lp(s){let e;return{c(){e=y("Cyclists")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rp(s){let e;return{c(){e=y("Horse riders")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function sp(s){let e;return{c(){e=y("Other")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function op(s){let e,l,t,n,r,o,f,i,a,u,c,$;function _(O){s[10](O)}let k={$$slots:{default:[np]},$$scope:{ctx:s}};s[0].pedestrians!==void 0&&(k.checked=s[0].pedestrians),e=new Ye({props:k}),H.push(()=>E(e,"checked",_));function T(O){s[11](O)}let C={$$slots:{default:[lp]},$$scope:{ctx:s}};s[0].cyclists!==void 0&&(C.checked=s[0].cyclists),n=new Ye({props:C}),H.push(()=>E(n,"checked",T));function N(O){s[12](O)}let D={$$slots:{default:[rp]},$$scope:{ctx:s}};s[0].horseRiders!==void 0&&(D.checked=s[0].horseRiders),f=new Ye({props:D}),H.push(()=>E(f,"checked",N));function P(O){s[13](O)}let M={$$slots:{default:[sp]},$$scope:{ctx:s}};return s[0].other!==void 0&&(M.checked=s[0].other),u=new Ye({props:M}),H.push(()=>E(u,"checked",P)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),o=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment)},m(O,I){w(e,O,I),d(O,t,I),w(n,O,I),d(O,o,I),w(f,O,I),d(O,a,I),w(u,O,I),$=!0},p(O,I){const R={};I&4194304&&(R.$$scope={dirty:I,ctx:O}),!l&&I&1&&(l=!0,R.checked=O[0].pedestrians,B(()=>l=!1)),e.$set(R);const j={};I&4194304&&(j.$$scope={dirty:I,ctx:O}),!r&&I&1&&(r=!0,j.checked=O[0].cyclists,B(()=>r=!1)),n.$set(j);const z={};I&4194304&&(z.$$scope={dirty:I,ctx:O}),!i&&I&1&&(i=!0,z.checked=O[0].horseRiders,B(()=>i=!1)),f.$set(z);const Z={};I&4194304&&(Z.$$scope={dirty:I,ctx:O}),!c&&I&1&&(c=!0,Z.checked=O[0].other,B(()=>c=!1)),u.$set(Z)},i(O){$||(m(e.$$.fragment,O),m(n.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),$=!0)},o(O){g(e.$$.fragment,O),g(n.$$.fragment,O),g(f.$$.fragment,O),g(u.$$.fragment,O),$=!1},d(O){O&&(h(t),h(o),h(a)),v(e,O),v(n,O),v(f,O),v(u,O)}}}function ip(s){let e,l,t,n,r,o,f,i,a,u,c,$,_;return l=new De({props:{small:!0,$$slots:{default:[op]},$$scope:{ctx:s}}}),u=new Xt({props:{rows:s[9]}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),n=S("div"),r=y(`Filter years:
      `),o=S("input"),f=y(`
      -
      `),i=S("input"),a=L(),b(u.$$.fragment),F(o,"type","number"),F(o,"min",2017),F(o,"max",2022),F(o,"class","svelte-1ft65rw"),F(i,"type","number"),F(i,"min",2017),F(i,"max",2022),F(i,"class","svelte-1ft65rw"),F(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(k,T){d(k,e,T),w(l,e,null),p(e,t),p(e,n),p(n,r),p(n,o),Je(o,s[0].minYear),p(n,f),p(n,i),Je(i,s[0].maxYear),p(e,a),w(u,e,null),c=!0,$||(_=[lt(o,"input",s[14]),lt(i,"input",s[15])],$=!0)},p(k,T){const C={};T&4194305&&(C.$$scope={dirty:T,ctx:k}),l.$set(C),T&1&&Qt(o.value)!==k[0].minYear&&Je(o,k[0].minYear),T&1&&Qt(i.value)!==k[0].maxYear&&Je(i,k[0].maxYear)},i(k){c||(m(l.$$.fragment,k),m(u.$$.fragment,k),c=!0)},o(k){g(l.$$.fragment,k),g(u.$$.fragment,k),c=!1},d(k){k&&h(e),v(l),v(u),$=!1,Cr(_)}}}function Pl(s){let e,l,t,n=s[3][s[21].pedestrian_location]+"",r;return{c(){e=S("p"),l=y("Pedestrian location: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&2097152&&n!==(n=o[3][o[21].pedestrian_location]+"")&&q(r,n)},d(o){o&&h(e)}}}function jl(s){let e,l,t,n=s[4][s[21].pedestrian_movement]+"",r;return{c(){e=S("p"),l=y("Pedestrian movement: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&2097152&&n!==(n=o[4][o[21].pedestrian_movement]+"")&&q(r,n)},d(o){o&&h(e)}}}function ap(s){let e,l,t,n=s[21].year+"",r,o,f,i,a,u=s[5][s[21].severity]+"",c,$,_,k,T,C=Rl(s[21])+"",N,D,P,M,O,I=s[21].pedestrian_location&&Pl(s),R=s[21].pedestrian_movement&&jl(s);return{c(){e=S("p"),l=y("Year: "),t=S("b"),r=y(n),o=L(),f=S("p"),i=y("Severity: "),a=S("b"),c=y(u),$=L(),_=S("p"),k=y("Casualties: "),T=S("b"),N=y(C),D=L(),I&&I.c(),P=L(),R&&R.c(),M=L(),O=S("p"),O.textContent="Click to open full report in CycleStreets"},m(j,z){d(j,e,z),p(e,l),p(e,t),p(t,r),d(j,o,z),d(j,f,z),p(f,i),p(f,a),p(a,c),d(j,$,z),d(j,_,z),p(_,k),p(_,T),p(T,N),d(j,D,z),I&&I.m(j,z),d(j,P,z),R&&R.m(j,z),d(j,M,z),d(j,O,z)},p(j,z){z&2097152&&n!==(n=j[21].year+"")&&q(r,n),z&2097152&&u!==(u=j[5][j[21].severity]+"")&&q(c,u),z&2097152&&C!==(C=Rl(j[21])+"")&&q(N,C),j[21].pedestrian_location?I?I.p(j,z):(I=Pl(j),I.c(),I.m(P.parentNode,P)):I&&(I.d(1),I=null),j[21].pedestrian_movement?R?R.p(j,z):(R=jl(j),R.c(),R.m(M.parentNode,M)):R&&(R.d(1),R=null)},d(j){j&&(h(e),h(o),h(f),h($),h(_),h(D),h(P),h(M),h(O)),I&&I.d(j),R&&R.d(j)}}}function fp(s){let e,l;return e=new fe({props:{$$slots:{default:[ap,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function up(s){let e,l;const t=[G(jt),{sourceLayer:jt},{paint:{"circle-color":_e(["get","severity"],[1,2,3],[s[6],s[7],s[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:s[1]},{layout:{visibility:s[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[fp]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ft({props:n}),e.$on("click",mp),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&451?re(t,[o&0&&se(G(jt)),o&0&&{sourceLayer:jt},o&448&&{paint:{"circle-color":_e(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&2&&{filter:r[1]},o&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};o&4194304&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function cp(s){let e,l,t,n,r;function o(i){s[16](i)}let f={name:jt,title:pp,$$slots:{controls:[ip],help:[tp]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${jt}.pmtiles`,$$slots:{default:[up]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let jt="stats19",pp="Stats19";function $p(s){let[e,l,t]=s.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Rl(s){let e=[];return s.pedestrian&&e.push("pedestrian"),s.cyclist&&e.push("cyclist"),s.horse_rider&&e.push("horse rider"),s.other&&e.push("other"),e.join(", ")}function mp(s){window.open(`https://www.cyclestreets.net/collisions/reports/${s.detail.features[0].properties.accident_index}`,"_blank")}function _p(s,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],o={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function f(j){return j.show?`${r.filter(Z=>j[Z]).join(",")}/${j.minYear}/${j.maxYear}`:null}let i=Gt(jt,o,f,$p);Y(s,i,j=>l(0,n=j));function a(j,z,Z,ae,A,ee){let V=["any"];return n.pedestrians&&V.push(["get","pedestrian"]),n.cyclists&&V.push(["get","cyclist"]),n.horseRiders&&V.push(["get","horse_rider"]),n.other&&V.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],V]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},$={1:"Fatal",2:"Serious",3:"Slight"},_=x.sequential_low_to_high[4],k=x.sequential_low_to_high[2],T=x.sequential_low_to_high[0],C=[["Fatal",_],["Serious",k],["Slight",T]];function N(j){s.$$.not_equal(n.pedestrians,j)&&(n.pedestrians=j,i.set(n))}function D(j){s.$$.not_equal(n.cyclists,j)&&(n.cyclists=j,i.set(n))}function P(j){s.$$.not_equal(n.horseRiders,j)&&(n.horseRiders=j,i.set(n))}function M(j){s.$$.not_equal(n.other,j)&&(n.other=j,i.set(n))}function O(){n.minYear=Qt(this.value),i.set(n)}function I(){n.maxYear=Qt(this.value),i.set(n)}function R(j){s.$$.not_equal(n.show,j)&&(n.show=j,i.set(n))}return s.$$.update=()=>{s.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,$,_,k,T,C,N,D,P,M,O,I,R]}class gp extends K{constructor(e){super(),X(this,e,_p,cp,J,{})}}function dp(s){let e;return{c(){e=y(`DfT road statistics
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function hp(s){let e;return{c(){e=y("methodology")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function bp(s){let e,l,t,n,r,o,f,i,a,u,c,$;return n=new le({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[dp]},$$scope:{ctx:s}}}),o=new le({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[hp]},$$scope:{ctx:s}}}),c=new Te({}),{c(){e=S("span"),l=S("p"),t=y("AADF (annual average daily flow) data from "),b(n.$$.fragment),r=y(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),b(o.$$.fragment),f=y(" for details and caveats about the measurements."),i=L(),a=S("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),b(c.$$.fragment),F(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(l,t),w(n,l,null),p(l,r),w(o,l,null),p(l,f),p(e,i),p(e,a),p(e,u),w(c,e,null),$=!0},p(_,k){const T={};k&128&&(T.$$scope={dirty:k,ctx:_}),n.$set(T);const C={};k&128&&(C.$$scope={dirty:k,ctx:_}),o.$set(C)},i(_){$||(m(n.$$.fragment,_),m(o.$$.fragment,_),m(c.$$.fragment,_),$=!0)},o(_){g(n.$$.fragment,_),g(o.$$.fragment,_),g(c.$$.fragment,_),$=!1},d(_){_&&h(e),v(n),v(o),v(c)}}}function wp(s){let e,l,t;return l=new Ae({props:{colorScale:s[1],limits:s[3]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function vp(s){let e,l=s[6].location+"",t,n,r,o,f=s[6].year+"",i,a,u,c=s[6].motor_vehicles.toLocaleString()+"",$,_,k,T,C=s[6].year+"",N,D,P,M=s[6].pedal_cycles.toLocaleString()+"",O,I,R,j,z,Z=s[6].method+"",ae;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),o=y("Total motor vehicles ("),i=y(f),a=y(` AADF):
        `),u=S("b"),$=y(c),_=L(),k=S("p"),T=y("Total pedal cycles ("),N=y(C),D=y(` AADF):
        `),P=S("b"),O=y(M),I=L(),R=S("p"),j=y("Count method: "),z=S("b"),ae=y(Z)},m(A,ee){d(A,e,ee),p(e,t),d(A,n,ee),d(A,r,ee),p(r,o),p(r,i),p(r,a),p(r,u),p(u,$),d(A,_,ee),d(A,k,ee),p(k,T),p(k,N),p(k,D),p(k,P),p(P,O),d(A,I,ee),d(A,R,ee),p(R,j),p(R,z),p(z,ae)},p(A,ee){ee&64&&l!==(l=A[6].location+"")&&q(t,l),ee&64&&f!==(f=A[6].year+"")&&q(i,f),ee&64&&c!==(c=A[6].motor_vehicles.toLocaleString()+"")&&q($,c),ee&64&&C!==(C=A[6].year+"")&&q(N,C),ee&64&&M!==(M=A[6].pedal_cycles.toLocaleString()+"")&&q(O,M),ee&64&&Z!==(Z=A[6].method+"")&&q(ae,Z)},d(A){A&&(h(e),h(n),h(r),h(_),h(k),h(I),h(R))}}}function kp(s){let e,l;return e=new fe({props:{$$slots:{default:[vp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function yp(s){let e,l;const t=[G(Rt),{sourceLayer:Rt},{paint:{"circle-color":_e(["get","motor_vehicles"],s[2],s[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:s[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[kp]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ft({props:n}),e.$on("click",Cp),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(G(Rt)),o&0&&{sourceLayer:Rt},o&6&&{paint:{"circle-color":_e(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&128&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Sp(s){let e,l,t,n,r;function o(i){s[5](i)}let f={name:Rt,title:Tp,$$slots:{controls:[wp],help:[bp]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Rt}.pmtiles`,$$slots:{default:[yp]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Rt="vehicle_counts",Tp="Vehicle counts";function Cp(s){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${s.detail.features[0].properties.count_point}`,"_blank")}function Lp(s,e,l){let t,n=x.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],f=$e(Rt);Y(s,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,o,f,i]}class Mp extends K{constructor(e){super(),X(this,e,Lp,Sp,J,{})}}function Dl(s,e,l){const t=s.slice();return t[6]=e[l],t}function Ip(s){let e;return{c(){e=S("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,F(e,"slot","help")},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function Op(s){let e,l,t;return l=new Xt({props:{rows:s[3]}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Np(s){let e,l=s[5]["Issue ID"]+"",t,n,r=s[5].Code+"",o,f,i,a=s[5]["Issue Stage"]+"",u;return{c(){e=S("h2"),t=y(l),n=y(" - "),o=y(r),f=L(),i=S("p"),u=y(a)},m(c,$){d(c,e,$),p(e,t),p(e,n),p(e,o),d(c,f,$),d(c,i,$),p(i,u)},p(c,$){$&32&&l!==(l=c[5]["Issue ID"]+"")&&q(t,l),$&32&&r!==(r=c[5].Code+"")&&q(o,r),$&32&&a!==(a=c[5]["Issue Stage"]+"")&&q(u,a)},d(c){c&&(h(e),h(f),h(i))}}}function Al(s){let e,l=s[6]+"",t,n,r,o=s[5][s[6]]+"",f,i;return{c(){e=S("p"),t=y(l),n=y(`:
            `),r=S("b"),f=y(o),i=L()},m(a,u){d(a,e,u),p(e,t),p(e,n),p(e,r),p(r,f),p(e,i)},p(a,u){u&32&&o!==(o=a[5][a[6]]+"")&&q(f,o)},d(a){a&&h(e)}}}function Pp(s){let e,l=he(s[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Al(Dl(s,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();oe(e,"max-width","30vw"),oe(e,"max-height","60vh"),oe(e,"overflow","auto")},m(n,r){d(n,e,r);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,r){if(r&36){l=he(n[2]);let o;for(o=0;o<l.length;o+=1){const f=Dl(n,l,o);t[o]?t[o].p(f,r):(t[o]=Al(f),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&h(e),Qe(t,n)}}}function jp(s){let e,l,t,n;return e=new fe({props:{openOn:"hover",$$slots:{default:[Np,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:s}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Pp,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&544&&(f.$$scope={dirty:o,ctx:r}),e.$set(f);const i={};o&544&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Rp(s){let e,l;const t=[G(rn),{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(s[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:s[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[jp]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ft({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&9?re(t,[o&0&&se(G(rn)),o&8&&{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};o&512&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Dp(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:rn,title:Ap,$$slots:{controls:[Op],help:[Ip]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new qt({props:{data:`${Kt()}/v1/problems.geojson.gz`,$$slots:{default:[Rp]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let rn="problems",Ap="Issues & Conflicts";function Fp(s,e,l){let t,n=$e(rn);Y(s,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],o=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,o,f]}class qp extends K{constructor(e){super(),X(this,e,Fp,Dp,J,{})}}function Gp(s){let e;function l(r,o){return r[2]<=100?Ep:Hp}let t=l(s),n=t(s);return{c(){n.c(),e=ve()},m(r,o){n.m(r,o),d(r,e,o)},p(r,o){t===(t=l(r))&&n?n.p(r,o):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:Q,o:Q,d(r){r&&h(e),n.d(r)}}}function zp(s){let e,l;return e=new Ze({props:{$$slots:{default:[Bp]},$$scope:{ctx:s}}}),e.$on("click",s[3]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Hp(s){let e;return{c(){e=S("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function Ep(s){let e,l,t;return{c(){e=S("label"),l=y(`Downloading scheme data
      `),t=S("progress"),t.value=s[2],F(t,"class","svelte-q3473n")},m(n,r){d(n,e,r),p(e,l),p(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&h(e)}}}function Bp(s){let e;return{c(){e=y("Load latest scheme data")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Up(s){let e,l,t,n;const r=[zp,Gp],o=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(s))&&(l=o[e]=r[e](s)),{c(){l&&l.c(),t=ve()},m(i,a){~e&&o[e].m(i,a),d(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&o[e].p(i,a):(l&&(be(),g(o[u],1,1,()=>{o[u]=null}),we()),~e?(l=o[e],l?l.p(i,a):(l=o[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){g(l),n=!1},d(i){i&&h(t),~e&&o[e].d(i)}}}function Wp(s,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,o=0;async function f(){let a=await Hr(`${Kt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,o=c)});l(2,o=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}Lr(async()=>{n&&await f()});async function i(){l(0,n=!0),await f()}return s.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,o,i,t]}class Yp extends K{constructor(e){super(),X(this,e,Wp,Up,J,{loadFile:4})}}const sn=Ne({type:"FeatureCollection",features:[],schemes:{}}),dn=Ne(new Map),Fl=Ne(""),ql=Ne(""),hn=Ne({type:"FeatureCollection",features:[],schemes:{}}),bn=Ne(new Map),Gl=Ne(""),zl=Ne("");function Jp(s){let e={type:"FeatureCollection",features:[],schemes:{},notes:s.notes},l=new Map,t={type:"FeatureCollection",features:[],schemes:{},notes:s.notes},n=new Map;for(let[r,o]of Object.entries(s.schemes))o.pipeline?(n.set(r,o),t.schemes[r]=o):(l.set(r,o),e.schemes[r]=o);for(let r of s.features){if(!Vp(r))continue;let o=r.properties.scheme_reference,f=l.has(o),a=(f?l:n).get(o);a.browse&&(r.properties.funding_programme=a.browse.funding_programme,r.properties.current_milestone=a.browse.current_milestone);let u=f?e:t;r.id=u.features.length+1,u.features.push(r)}sn.set(e),dn.set(l),hn.set(t),bn.set(n)}function Vp(s){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(s.properties.id)}let Wt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},wn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function Hl(s,e,l){const t=s.slice();return t[28]=e[l],t[29]=e,t[30]=l,t}function Qp(s){let e;return{c(){e=y("Filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Zp(s){let e;return{c(){e=y("Reset all filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Kp(s){let e,l,t,n,r,o,f,i;e=new mn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[e$]},$$scope:{ctx:s}}});function a(_){s[23](_)}let u={label:"Scheme name or reference",options:on(s[3])};s[0]!==void 0&&(u.value=s[0]),t=new Ir({props:u}),H.push(()=>E(t,"value",a));function c(_){s[24](_)}let $={label:"Authority or region",choices:s[10],emptyOption:!0};return s[4]!==void 0&&($.value=s[4]),o=new At({props:$}),H.push(()=>E(o,"value",c)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),r=L(),b(o.$$.fragment)},m(_,k){w(e,_,k),d(_,l,k),w(t,_,k),d(_,r,k),w(o,_,k),i=!0},p(_,k){const T={};k[0]&2|k[1]&1&&(T.$$scope={dirty:k,ctx:_}),e.$set(T);const C={};k[0]&8&&(C.options=on(_[3])),!n&&k[0]&1&&(n=!0,C.value=_[0],B(()=>n=!1)),t.$set(C);const N={};k[0]&1024&&(N.choices=_[10]),!f&&k[0]&16&&(f=!0,N.value=_[4],B(()=>f=!1)),o.$set(N)},i(_){i||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(o.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),i=!1},d(_){_&&(h(l),h(r)),v(e,_),v(t,_),v(o,_)}}}function Xp(s){let e,l,t,n,r,o,f,i,a,u,c,$,_,k,T,C;t=new mn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[n$]},$$scope:{ctx:s}}});function N(R){s[17](R)}let D={label:"Scheme name or reference",options:on(s[3])};s[0]!==void 0&&(D.value=s[0]),r=new Ir({props:D}),H.push(()=>E(r,"value",N));function P(R){s[18](R)}let M={label:"Authority or region",choices:s[10],emptyOption:!0};s[4]!==void 0&&(M.value=s[4]),i=new At({props:M}),H.push(()=>E(i,"value",P)),$=new mn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[s$]},$$scope:{ctx:s}}});function O(R){s[20](R)}let I={label:"Current milestone",choices:s[11],emptyOption:!0};return s[6]!==void 0&&(I.value=s[6]),k=new At({props:I}),H.push(()=>E(k,"value",O)),{c(){e=S("div"),l=S("div"),b(t.$$.fragment),n=L(),b(r.$$.fragment),f=L(),b(i.$$.fragment),u=L(),c=S("div"),b($.$$.fragment),_=L(),b(k.$$.fragment),F(l,"class","govuk-grid-column-one-half"),F(c,"class","govuk-grid-column-one-half"),F(e,"class","govuk-grid-row")},m(R,j){d(R,e,j),p(e,l),w(t,l,null),p(l,n),w(r,l,null),p(l,f),w(i,l,null),p(e,u),p(e,c),w($,c,null),p(c,_),w(k,c,null),C=!0},p(R,j){const z={};j[0]&2|j[1]&1&&(z.$$scope={dirty:j,ctx:R}),t.$set(z);const Z={};j[0]&8&&(Z.options=on(R[3])),!o&&j[0]&1&&(o=!0,Z.value=R[0],B(()=>o=!1)),r.$set(Z);const ae={};j[0]&1024&&(ae.choices=R[10]),!a&&j[0]&16&&(a=!0,ae.value=R[4],B(()=>a=!1)),i.$set(ae);const A={};j[0]&32|j[1]&1&&(A.$$scope={dirty:j,ctx:R}),$.$set(A);const ee={};!T&&j[0]&64&&(T=!0,ee.value=R[6],B(()=>T=!1)),k.$set(ee)},i(R){C||(m(t.$$.fragment,R),m(r.$$.fragment,R),m(i.$$.fragment,R),m($.$$.fragment,R),m(k.$$.fragment,R),C=!0)},o(R){g(t.$$.fragment,R),g(r.$$.fragment,R),g(i.$$.fragment,R),g($.$$.fragment,R),g(k.$$.fragment,R),C=!1},d(R){R&&h(e),v(t),v(r),v(i),v($),v(k)}}}function xp(s){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function e$(s){let e,l,t,n,r,o;return t=new Ze({props:{$$slots:{default:[xp]},$$scope:{ctx:s}}}),t.$on("click",s[22]),{c(){e=S("input"),l=L(),b(t.$$.fragment),F(e,"type","text"),F(e,"class","govuk-input govuk-input--width-10"),F(e,"id","filterInterventionText")},m(f,i){d(f,e,i),Je(e,s[1]),d(f,l,i),w(t,f,i),n=!0,r||(o=lt(e,"input",s[21]),r=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&Je(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,o()}}}function t$(s){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function n$(s){let e,l,t,n,r,o;return t=new Ze({props:{$$slots:{default:[t$]},$$scope:{ctx:s}}}),t.$on("click",s[16]),{c(){e=S("input"),l=L(),b(t.$$.fragment),F(e,"type","text"),F(e,"class","govuk-input govuk-input--width-10"),F(e,"id","filterInterventionText")},m(f,i){d(f,e,i),Je(e,s[1]),d(f,l,i),w(t,f,i),n=!0,r||(o=lt(e,"input",s[15]),r=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&Je(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,o()}}}function l$(s){let e=s[28]+"",l,t;return{c(){l=y(e),t=L()},m(n,r){d(n,l,r),d(n,t,r)},p:Q,d(n){n&&(h(l),h(t))}}}function El(s){let e,l,t;function n(o){s[19](o,s[28])}let r={$$slots:{default:[l$]},$$scope:{ctx:s}};return s[5][s[28]]!==void 0&&(r.checked=s[5][s[28]]),e=new Ye({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,f){s=o;const i={};f[1]&1&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&32&&(l=!0,i.checked=s[5][s[28]],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function r$(s){let e,l,t=he(Object.keys(Wt)),n=[];for(let o=0;o<t.length;o+=1)n[o]=El(Hl(s,t,o));const r=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ve()},m(o,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(o,f);d(o,e,f),l=!0},p(o,f){if(f[0]&32){t=he(Object.keys(Wt));let i;for(i=0;i<t.length;i+=1){const a=Hl(o,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=El(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(o){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(o){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(o){o&&h(e),Qe(n,o)}}}function s$(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[r$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&1&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function o$(s){let e;return{c(){e=y("Done")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function i$(s){let e,l,t,n,r=s[9].interventions.toLocaleString()+"",o,f,i,a,u=s[8].size.toLocaleString()+"",c,$,_,k,T,C=Bl(s[9].totalLength).toFixed(1)+"",N,D,P,M,O,I,R,j,z,Z;M=new Ze({props:{$$slots:{default:[Zp]},$$scope:{ctx:s}}}),M.$on("click",s[12]);const ae=[Xp,Kp],A=[];function ee(V,U){return V[2]=="ATF"?0:1}return I=ee(s),R=A[I]=ae[I](s),z=new Er({props:{$$slots:{default:[o$]},$$scope:{ctx:s}}}),z.$on("click",s[25]),{c(){e=S("p"),e.textContent="Showing:",l=L(),t=S("ul"),n=S("li"),o=y(r),f=y(" interventions"),i=L(),a=S("li"),c=y(u),$=y(" schemes"),_=L(),k=S("li"),T=y("total route length of "),N=y(C),D=y(" miles"),P=L(),b(M.$$.fragment),O=L(),R.c(),j=L(),b(z.$$.fragment)},m(V,U){d(V,e,U),d(V,l,U),d(V,t,U),p(t,n),p(n,o),p(n,f),p(t,i),p(t,a),p(a,c),p(a,$),p(t,_),p(t,k),p(k,T),p(k,N),p(k,D),d(V,P,U),w(M,V,U),d(V,O,U),A[I].m(V,U),d(V,j,U),w(z,V,U),Z=!0},p(V,U){(!Z||U[0]&512)&&r!==(r=V[9].interventions.toLocaleString()+"")&&q(o,r),(!Z||U[0]&256)&&u!==(u=V[8].size.toLocaleString()+"")&&q(c,u),(!Z||U[0]&512)&&C!==(C=Bl(V[9].totalLength).toFixed(1)+"")&&q(N,C);const Ce={};U[1]&1&&(Ce.$$scope={dirty:U,ctx:V}),M.$set(Ce);let Pe=I;I=ee(V),I===Pe?A[I].p(V,U):(be(),g(A[Pe],1,1,()=>{A[Pe]=null}),we(),R=A[I],R?R.p(V,U):(R=A[I]=ae[I](V),R.c()),m(R,1),R.m(j.parentNode,j));const Fe={};U[1]&1&&(Fe.$$scope={dirty:U,ctx:V}),z.$set(Fe)},i(V){Z||(m(M.$$.fragment,V),m(R),m(z.$$.fragment,V),Z=!0)},o(V){g(M.$$.fragment,V),g(R),g(z.$$.fragment,V),Z=!1},d(V){V&&(h(e),h(l),h(t),h(P),h(O),h(j)),v(M,V),A[I].d(V),v(z,V)}}}function a$(s){let e,l,t,n,r;e=new Ze({props:{$$slots:{default:[Qp]},$$scope:{ctx:s}}}),e.$on("click",s[14]);function o(i){s[26](i)}let f={title:`Filter ${s[2]} schemes`,$$slots:{default:[i$]},$$scope:{ctx:s}};return s[7]!==void 0&&(f.open=s[7]),t=new vr({props:f}),H.push(()=>E(t,"open",o)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){w(e,i,a),d(i,l,a),w(t,i,a),r=!0},p(i,a){const u={};a[1]&1&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a[0]&4&&(c.title=`Filter ${i[2]} schemes`),a[0]&2047|a[1]&1&&(c.$$scope={dirty:a,ctx:i}),!n&&a[0]&128&&(n=!0,c.open=i[7],B(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),r=!1},d(i){i&&h(l),v(e,i),v(t,i)}}}function f$(s){var t;let e=new Set;for(let n of s.values())(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Bl(s){return s*621371e-9}function on(s){let e=[];for(let l of s.values())e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function u$(s,e,l){let t,{source:n}=e,{schemes:r}=e,{schemesGj:o}=e,{filterSchemeText:f}=e,{filterInterventionText:i}=e,a=!1,u=new Set,c={interventions:0,totalLength:0},$=Object.keys(wn).map(U=>[U,U]),_="",k=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0])),T="";function C(U,Ce,Pe,Fe,$t){let W=U.toLowerCase(),xe=Ce.toLowerCase(),zt=de=>{var et,at,Et,Yt;if(W&&!((et=de.properties.name)!=null&&et.toLowerCase().includes(W))&&!((at=de.properties.description)!=null&&at.toLowerCase().includes(W)))return!1;let qe=r.get(de.properties.scheme_reference);return!(Pe&&((Et=qe.browse)==null?void 0:Et.authority_or_region)!=Pe||n=="ATF"&&!Fe[qe.browse.funding_programme]||$t&&((Yt=qe.browse)==null?void 0:Yt.current_milestone)!=$t||xe&&!qe.scheme_reference.toLowerCase().includes(xe)&&!(qe.scheme_name??"").toLowerCase().includes(xe))};l(8,u=new Set(o.features.filter(zt).map(de=>de.properties.scheme_reference))),l(9,c={interventions:0,totalLength:0});let Ht=de=>{var qe,et;return!(!u.has(de.properties.scheme_reference)||W&&!((qe=de.properties.name)!=null&&qe.toLowerCase().includes(W))&&!((et=de.properties.description)!=null&&et.toLowerCase().includes(W)))};for(let de of o.features)Ht(de)?(delete de.properties.hide_while_editing,l(9,c.interventions++,c),de.geometry.type=="LineString"&&de.properties.length_meters&&l(9,c.totalLength+=de.properties.length_meters,c)):de.properties.hide_while_editing=!0;l(13,o),l(9,c)}function N(){l(4,_=""),l(5,k=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0]))),l(6,T=""),l(1,i=""),l(0,f="")}const D=()=>l(7,a=!0);function P(){i=this.value,l(1,i)}const M=()=>l(1,i="");function O(U){f=U,l(0,f)}function I(U){_=U,l(4,_)}function R(U,Ce){s.$$.not_equal(k[Ce],U)&&(k[Ce]=U,l(5,k))}function j(U){T=U,l(6,T)}function z(){i=this.value,l(1,i)}const Z=()=>l(1,i="");function ae(U){f=U,l(0,f)}function A(U){_=U,l(4,_)}const ee=()=>l(7,a=!1);function V(U){a=U,l(7,a)}return s.$$set=U=>{"source"in U&&l(2,n=U.source),"schemes"in U&&l(3,r=U.schemes),"schemesGj"in U&&l(13,o=U.schemesGj),"filterSchemeText"in U&&l(0,f=U.filterSchemeText),"filterInterventionText"in U&&l(1,i=U.filterInterventionText)},s.$$.update=()=>{s.$$.dirty[0]&8&&l(10,t=f$(r)),s.$$.dirty[0]&115&&C(i,f,_,k,T)},[f,i,n,r,_,k,T,a,u,c,t,$,N,o,D,P,M,O,I,R,j,z,Z,ae,A,ee,V]}class Nr extends K{constructor(e){super(),X(this,e,u$,a$,J,{source:2,schemes:3,schemesGj:13,filterSchemeText:0,filterInterventionText:1},null,[-1,-1])}}function Ul(s){let e,l,t,n=s[0].status+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Status",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].status+"")&&q(r,n)},d(o){o&&h(e)}}}function Wl(s){let e,l,t,n=s[0].timescale+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Timescale",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].timescale+"")&&q(r,n)},d(o){o&&h(e)}}}function Yl(s){let e,l,t,n=s[0].timescale_year+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Estimated completion year",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].timescale_year+"")&&q(r,n)},d(o){o&&h(e)}}}function Jl(s){let e,l,t,n=s[0].year_published+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently published",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].year_published+"")&&q(r,n)},d(o){o&&h(e)}}}function Vl(s){let e,l,t,n=s[0].year_consulted+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently consulted on",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].year_consulted+"")&&q(r,n)},d(o){o&&h(e)}}}function c$(s){let e,l,t,n,r,o=s[0].status&&Ul(s),f=s[0].timescale&&Wl(s),i=s[0].timescale_year&&Yl(s),a=s[0].year_published&&Jl(s),u=s[0].year_consulted&&Vl(s);return{c(){o&&o.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=ve()},m(c,$){o&&o.m(c,$),d(c,e,$),f&&f.m(c,$),d(c,l,$),i&&i.m(c,$),d(c,t,$),a&&a.m(c,$),d(c,n,$),u&&u.m(c,$),d(c,r,$)},p(c,[$]){c[0].status?o?o.p(c,$):(o=Ul(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[0].timescale?f?f.p(c,$):(f=Wl(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,$):(i=Yl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,$):(a=Jl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,$):(u=Vl(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:Q,o:Q,d(c){c&&(h(e),h(l),h(t),h(n),h(r)),o&&o.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function p$(s,e,l){let{props:t}=e;return s.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Pr extends K{constructor(e){super(),X(this,e,p$,c$,J,{props:0})}}function Ql(s){let e,l,t,n=s[0].budget.toLocaleString()+"",r,o;return{c(){e=S("p"),l=S("b"),l.textContent="Cost",t=y(`
    : `),r=y(n),o=y(`
    GBP`)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r),p(e,o)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&q(r,n)},d(f){f&&h(e)}}}function Zl(s){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Kl(s){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Xl(s){let e,l,t,n;return{c(){e=S("p"),l=S("b"),l.textContent="Funding sources",t=y(`
    : `),n=y(s[1])},m(r,o){d(r,e,o),p(e,l),p(e,t),p(e,n)},p(r,o){o&2&&q(n,r[1])},d(r){r&&h(e)}}}function $$(s){let e,l,t,n,r=s[0].budget&&Ql(s),o=s[0].development_funded&&Zl(),f=s[0].construction_funded&&Kl(),i=s[1]&&Xl(s);return{c(){r&&r.c(),e=L(),o&&o.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=ve()},m(a,u){r&&r.m(a,u),d(a,e,u),o&&o.m(a,u),d(a,l,u),f&&f.m(a,u),d(a,t,u),i&&i.m(a,u),d(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=Ql(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?o||(o=Zl(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),a[0].construction_funded?f||(f=Kl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=Xl(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:Q,o:Q,d(a){a&&(h(e),h(l),h(t),h(n)),r&&r.d(a),o&&o.d(a),f&&f.d(a),i&&i.d(a)}}}function m$(s){if(!s.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])s.funding_sources[l]&&e.push(l.toUpperCase());return s.funding_sources.other&&e.push(s.funding_sources.other),e.join(", ")}function _$(s,e,l){let t,{props:n}=e;return s.$$set=r=>{"props"in r&&l(0,n=r.props)},s.$$.update=()=>{s.$$.dirty&1&&l(1,t=m$(n))},[n,t]}class jr extends K{constructor(e){super(),X(this,e,_$,$$,J,{props:0})}}function cn(s){const e=s.slice(),l=e[5].pipeline;return e[12]=l,e}function pn(s){const e=s.slice(),l=e[1].pipeline;return e[12]=l,e}function xl(s){let e,l,t,n=Un(s[1].length_meters)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Length",t=y(`
        : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&2&&n!==(n=Un(o[1].length_meters)+"")&&q(r,n)},d(o){o&&h(e)}}}function er(s){let e,l=ct(s[1].description,s[3])+"";return{c(){e=S("p")},m(t,n){d(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=ct(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&h(e)}}}function tr(s){let e,l,t,n,r,o,f,i=s[12].atf4_type&&nr(s),a=s[12].accuracy&&lr(s),u=s[12].is_alternative&&rr();return n=new jr({props:{props:s[12]}}),o=new Pr({props:{props:s[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(o.$$.fragment)},m(c,$){i&&i.m(c,$),d(c,e,$),a&&a.m(c,$),d(c,l,$),u&&u.m(c,$),d(c,t,$),w(n,c,$),d(c,r,$),w(o,c,$),f=!0},p(c,$){c[12].atf4_type?i?i.p(c,$):(i=nr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].accuracy?a?a.p(c,$):(a=lr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].is_alternative?u||(u=rr(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};$&2&&(_.props=c[12]),n.$set(_);const k={};$&2&&(k.props=c[12]),o.$set(k)},i(c){f||(m(n.$$.fragment,c),m(o.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(o,c)}}}function nr(s){let e,l,t,n=s[12].atf4_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 type",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&2&&n!==(n=o[12].atf4_type+"")&&q(r,n)},d(o){o&&h(e)}}}function lr(s){let e,l,t,n=s[12].accuracy+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Accuracy",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&2&&n!==(n=o[12].accuracy+"")&&q(r,n)},d(o){o&&h(e)}}}function rr(s){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function sr(s){var o;let e,l,t,n=((o=s[5].browse)==null?void 0:o.capital_scheme_id)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Capital scheme ID",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&q(r,n)},d(f){f&&h(e)}}}function or(s){var o;let e,l,t,n=((o=s[5].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Current milestone",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&q(r,n)},d(f){f&&h(e)}}}function ir(s){let e,l,t,n,r,o,f,i=s[12].scheme_type&&ar(s),a=s[12].atf4_lead_type&&fr(s),u=s[12].scheme_description&&ur(s);return n=new jr({props:{props:s[12]}}),o=new Pr({props:{props:s[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(o.$$.fragment)},m(c,$){i&&i.m(c,$),d(c,e,$),a&&a.m(c,$),d(c,l,$),u&&u.m(c,$),d(c,t,$),w(n,c,$),d(c,r,$),w(o,c,$),f=!0},p(c,$){c[12].scheme_type?i?i.p(c,$):(i=ar(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].atf4_lead_type?a?a.p(c,$):(a=fr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].scheme_description?u?u.p(c,$):(u=ur(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};$&32&&(_.props=c[12]),n.$set(_);const k={};$&32&&(k.props=c[12]),o.$set(k)},i(c){f||(m(n.$$.fragment,c),m(o.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(o,c)}}}function ar(s){let e,l,t,n=s[12].scheme_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme type",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&32&&n!==(n=o[12].scheme_type+"")&&q(r,n)},d(o){o&&h(e)}}}function fr(s){let e,l,t,n=s[12].atf4_lead_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 lead type",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&32&&n!==(n=o[12].atf4_lead_type+"")&&q(r,n)},d(o){o&&h(e)}}}function ur(s){let e,l,t,n=s[12].scheme_description+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Descripton",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&32&&n!==(n=o[12].scheme_description+"")&&q(r,n)},d(o){o&&h(e)}}}function g$(s){let e;return{c(){e=y("Zoom to show entire scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function d$(s){let e;return{c(){e=y("Edit a copy of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function cr(s){var Nn,Pn,jn,Rn;let e,l,t,n,r,o,f,i=ct(s[1].name,s[3])+"",a,u=s[1].intervention_type+"",c,$,_,k,T,C,N,D,P,M=s[0].toUpperCase()+"",O,I,R,j,z,Z,ae,A=ct(s[5].scheme_name??"",s[2])+"",ee,V,U,Ce,Pe,Fe=ct(s[1].scheme_reference,s[2])+"",$t,W,xe,zt,Ht=((Nn=s[5].browse)==null?void 0:Nn.authority_or_region)+"",de,qe,et,at,Et,Yt,xt=((Pn=s[5].browse)==null?void 0:Pn.funding_programme)+"",an,In,fn,un,ft,On,ut,Ge,Le=s[1].length_meters&&xl(s),Me=s[1].description&&er(s),ke=s[1].pipeline&&tr(pn(s)),Ie=((jn=s[5].browse)==null?void 0:jn.capital_scheme_id)&&sr(s),Oe=((Rn=s[5].browse)==null?void 0:Rn.current_milestone)&&or(s),ye=s[5].pipeline&&ir(cn(s));return ft=new Ze({props:{$$slots:{default:[g$]},$$scope:{ctx:s}}}),ft.$on("click",s[6]),ut=new Ze({props:{$$slots:{default:[d$]},$$scope:{ctx:s}}}),ut.$on("click",s[7]),{c(){e=S("div"),l=S("h2"),l.textContent="Intervention",t=L(),n=S("p"),r=S("b"),r.textContent="Name",o=y(`
      : `),f=new Dt(!1),a=y(" ("),c=y(u),$=y(")"),_=L(),Le&&Le.c(),k=L(),Me&&Me.c(),T=L(),ke&&ke.c(),C=L(),N=S("hr"),D=L(),P=S("h2"),O=y(M),I=y(" Scheme"),R=L(),j=S("p"),z=S("b"),z.textContent="Scheme name",Z=y(`
      : `),ae=new Dt(!1),ee=L(),V=S("p"),U=S("b"),U.textContent="Scheme reference",Ce=y(`
      : `),Pe=new Dt(!1),$t=L(),W=S("p"),xe=S("b"),xe.textContent="Authority or region",zt=y(`
      : `),de=y(Ht),qe=L(),Ie&&Ie.c(),et=L(),at=S("p"),Et=S("b"),Et.textContent="Funding programme",Yt=y(`
      : `),an=y(xt),In=L(),Oe&&Oe.c(),fn=L(),ye&&ye.c(),un=L(),b(ft.$$.fragment),On=L(),b(ut.$$.fragment),f.a=a,ae.a=null,Pe.a=null,oe(e,"max-width","30vw"),oe(e,"max-height","60vh"),oe(e,"overflow","auto")},m(ie,ge){d(ie,e,ge),p(e,l),p(e,t),p(e,n),p(n,r),p(n,o),f.m(i,n),p(n,a),p(n,c),p(n,$),p(e,_),Le&&Le.m(e,null),p(e,k),Me&&Me.m(e,null),p(e,T),ke&&ke.m(e,null),p(e,C),p(e,N),p(e,D),p(e,P),p(P,O),p(P,I),p(e,R),p(e,j),p(j,z),p(j,Z),ae.m(A,j),p(e,ee),p(e,V),p(V,U),p(V,Ce),Pe.m(Fe,V),p(e,$t),p(e,W),p(W,xe),p(W,zt),p(W,de),p(e,qe),Ie&&Ie.m(e,null),p(e,et),p(e,at),p(at,Et),p(at,Yt),p(at,an),p(e,In),Oe&&Oe.m(e,null),p(e,fn),ye&&ye.m(e,null),p(e,un),w(ft,e,null),p(e,On),w(ut,e,null),s[10](e),Ge=!0},p(ie,ge){var Fn,qn,Gn,zn;(!Ge||ge&10)&&i!==(i=ct(ie[1].name,ie[3])+"")&&f.p(i),(!Ge||ge&2)&&u!==(u=ie[1].intervention_type+"")&&q(c,u),ie[1].length_meters?Le?Le.p(ie,ge):(Le=xl(ie),Le.c(),Le.m(e,k)):Le&&(Le.d(1),Le=null),ie[1].description?Me?Me.p(ie,ge):(Me=er(ie),Me.c(),Me.m(e,T)):Me&&(Me.d(1),Me=null),ie[1].pipeline?ke?(ke.p(pn(ie),ge),ge&2&&m(ke,1)):(ke=tr(pn(ie)),ke.c(),m(ke,1),ke.m(e,C)):ke&&(be(),g(ke,1,1,()=>{ke=null}),we()),(!Ge||ge&1)&&M!==(M=ie[0].toUpperCase()+"")&&q(O,M),(!Ge||ge&36)&&A!==(A=ct(ie[5].scheme_name??"",ie[2])+"")&&ae.p(A),(!Ge||ge&6)&&Fe!==(Fe=ct(ie[1].scheme_reference,ie[2])+"")&&Pe.p(Fe),(!Ge||ge&32)&&Ht!==(Ht=((Fn=ie[5].browse)==null?void 0:Fn.authority_or_region)+"")&&q(de,Ht),(qn=ie[5].browse)!=null&&qn.capital_scheme_id?Ie?Ie.p(ie,ge):(Ie=sr(ie),Ie.c(),Ie.m(e,et)):Ie&&(Ie.d(1),Ie=null),(!Ge||ge&32)&&xt!==(xt=((Gn=ie[5].browse)==null?void 0:Gn.funding_programme)+"")&&q(an,xt),(zn=ie[5].browse)!=null&&zn.current_milestone?Oe?Oe.p(ie,ge):(Oe=or(ie),Oe.c(),Oe.m(e,fn)):Oe&&(Oe.d(1),Oe=null),ie[5].pipeline?ye?(ye.p(cn(ie),ge),ge&32&&m(ye,1)):(ye=ir(cn(ie)),ye.c(),m(ye,1),ye.m(e,un)):ye&&(be(),g(ye,1,1,()=>{ye=null}),we());const Dn={};ge&8192&&(Dn.$$scope={dirty:ge,ctx:ie}),ft.$set(Dn);const An={};ge&8192&&(An.$$scope={dirty:ge,ctx:ie}),ut.$set(An)},i(ie){Ge||(m(ke),m(ye),m(ft.$$.fragment,ie),m(ut.$$.fragment,ie),Ge=!0)},o(ie){g(ke),g(ye),g(ft.$$.fragment,ie),g(ut.$$.fragment,ie),Ge=!1},d(ie){ie&&h(e),Le&&Le.d(),Me&&Me.d(),ke&&ke.d(),Ie&&Ie.d(),Oe&&Oe.d(),ye&&ye.d(),v(ft),v(ut),s[10](null)}}}function h$(s){let e=s[1],l,t,n=cr(s);return{c(){n.c(),l=ve()},m(r,o){n.m(r,o),d(r,l,o),t=!0},p(r,[o]){o&2&&J(e,e=r[1])?(be(),g(n,1,1,Q),we(),n=cr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,o)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function ct(s,e){return e?s.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):s}function b$(s,e,l){let t,n;Y(s,Tn,T=>l(11,n=T));let{source:r}=e,{props:o}=e,{schemes:f}=e,{schemesGj:i}=e,{filterSchemeText:a}=e,{filterInterventionText:u}=e,c;Br(()=>{c&&l(4,c.scrollTop=0,c)});function $(){let T={type:"FeatureCollection",features:i.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(ts(T),{padding:20,animate:!1})}function _(){var D,P;let T={type:"FeatureCollection",features:i.features.filter(M=>M.properties.scheme_reference==t.scheme_reference),schemes:{}};T.schemes[t.scheme_reference]=t;let C=((D=t.browse)==null?void 0:D.authority_or_region)||"unknown authority",N=t.pipeline?"pipeline":"v1";N=="pipeline"&&(C+="_pipeline"),Ur(C,JSON.stringify(T)),window.open(`scheme.html?authority=${(P=t.browse)==null?void 0:P.authority_or_region}&schema=${N}`,"_blank")}function k(T){H[T?"unshift":"push"](()=>{c=T,l(4,c)})}return s.$$set=T=>{"source"in T&&l(0,r=T.source),"props"in T&&l(1,o=T.props),"schemes"in T&&l(8,f=T.schemes),"schemesGj"in T&&l(9,i=T.schemesGj),"filterSchemeText"in T&&l(2,a=T.filterSchemeText),"filterInterventionText"in T&&l(3,u=T.filterInterventionText)},s.$$.update=()=>{s.$$.dirty&258&&l(5,t=f.get(o.scheme_reference))},[r,o,a,u,c,t,$,_,f,i,k]}class Mn extends K{constructor(e){super(),X(this,e,b$,h$,J,{source:0,props:1,schemes:8,schemesGj:9,filterSchemeText:2,filterInterventionText:3})}}function w$(s){let e,l=s[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&q(t,l)},d(n){n&&h(e)}}}function v$(s){let e,l;return e=new Mn({props:{source:s[0],props:s[10],schemesGj:s[3],schemes:s[2],filterSchemeText:s[4],filterInterventionText:s[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function k$(s){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[w$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[v$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&3072&&(f.$$scope={dirty:o,ctx:r}),e.$set(f);const i={};o&3133&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function y$(s){let e,l=s[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&q(t,l)},d(n){n&&h(e)}}}function S$(s){let e,l;return e=new Mn({props:{source:s[0],props:s[10],schemesGj:s[3],schemes:s[2],filterSchemeText:s[4],filterInterventionText:s[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function T$(s){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[y$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[S$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&3072&&(f.$$scope={dirty:o,ctx:r}),e.$set(f);const i={};o&3133&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function C$(s){let e,l=s[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&q(t,l)},d(n){n&&h(e)}}}function L$(s){let e,l;return e=new Mn({props:{source:s[0],props:s[10],schemesGj:s[3],schemes:s[2],filterSchemeText:s[4],filterInterventionText:s[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function M$(s){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[C$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[L$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&3072&&(f.$$scope={dirty:o,ctx:r}),e.$set(f);const i={};o&3133&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function I$(s){let e,l,t,n,r,o,f,i,a,u;const c=[G(`${s[0]}-interventions-points`),{filter:["all",Wn,s[8],s[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":s[6],"circle-radius":Yn,"circle-opacity":te(1,.5)}},{layout:{visibility:s[1]?"visible":"none"}},{hoverCursor:"pointer"}];let $={$$slots:{default:[k$]},$$scope:{ctx:s}};for(let O=0;O<c.length;O+=1)$=ne($,c[O]);e=new Ft({props:$});const _=[G(`${s[0]}-interventions-lines`),{filter:["all",Jn,s[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[6],"line-width":Jt,"line-opacity":te(1,.5)}},{layout:{visibility:s[1]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[T$]},$$scope:{ctx:s}};for(let O=0;O<_.length;O+=1)k=ne(k,_[O]);t=new me({props:k});const T=[G(`${s[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Jt,"circle-opacity":0,"circle-stroke-color":Ve.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:s[1]?"visible":"none"}}];let C={};for(let O=0;O<T.length;O+=1)C=ne(C,T[O]);r=new Ft({props:C});const N=[G(`${s[0]}-interventions-polygons`),{filter:["all",en,s[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":s[6],"fill-opacity":te(.2,.5)}},{layout:{visibility:s[1]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[M$]},$$scope:{ctx:s}};for(let O=0;O<N.length;O+=1)D=ne(D,N[O]);f=new Re({props:D});const P=[G(`${s[0]}-interventions-polygons-outlines`),{filter:["all",en,s[8]]},{paint:{"line-color":s[6],"line-opacity":.5,"line-width":.7*Jt}},{layout:{visibility:s[1]?"visible":"none"}}];let M={};for(let O=0;O<P.length;O+=1)M=ne(M,P[O]);return a=new me({props:M}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(O,I){w(e,O,I),d(O,l,I),w(t,O,I),d(O,n,I),w(r,O,I),d(O,o,I),w(f,O,I),d(O,i,I),w(a,O,I),u=!0},p(O,I){const R=I&835?re(c,[I&1&&se(G(`${O[0]}-interventions-points`)),I&768&&{filter:["all",Wn,O[8],O[9]]},c[2],c[3],I&64&&{paint:{"circle-color":O[6],"circle-radius":Yn,"circle-opacity":te(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},c[6]]):{};I&2109&&(R.$$scope={dirty:I,ctx:O}),e.$set(R);const j=I&323?re(_,[I&1&&se(G(`${O[0]}-interventions-lines`)),I&256&&{filter:["all",Jn,O[8]]},_[2],_[3],I&64&&{paint:{"line-color":O[6],"line-width":Jt,"line-opacity":te(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},_[6]]):{};I&2109&&(j.$$scope={dirty:I,ctx:O}),t.$set(j);const z=I&3?re(T,[I&1&&se(G(`${O[0]}-interventions-lines-endpoints`)),T[1],T[2],I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};r.$set(z);const Z=I&323?re(N,[I&1&&se(G(`${O[0]}-interventions-polygons`)),I&256&&{filter:["all",en,O[8]]},N[2],N[3],I&64&&{paint:{"fill-color":O[6],"fill-opacity":te(.2,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},N[6]]):{};I&2109&&(Z.$$scope={dirty:I,ctx:O}),f.$set(Z);const ae=I&323?re(P,[I&1&&se(G(`${O[0]}-interventions-polygons-outlines`)),I&256&&{filter:["all",en,O[8]]},I&64&&{paint:{"line-color":O[6],"line-opacity":.5,"line-width":.7*Jt}},I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};a.$set(ae)},i(O){u||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(r.$$.fragment,O),m(f.$$.fragment,O),m(a.$$.fragment,O),u=!0)},o(O){g(e.$$.fragment,O),g(t.$$.fragment,O),g(r.$$.fragment,O),g(f.$$.fragment,O),g(a.$$.fragment,O),u=!1},d(O){O&&(h(l),h(n),h(o),h(i)),v(e,O),v(t,O),v(r,O),v(f,O),v(a,O)}}}function O$(s){let e,l;return e=new qt({props:{data:s[7],$$slots:{default:[I$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function N$(s,e,l){let t,{source:n}=e,{show:r}=e,{schemes:o}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],$=["!=",["get","endpoint"],!0];return s.$$set=_=>{"source"in _&&l(0,n=_.source),"show"in _&&l(1,r=_.show),"schemes"in _&&l(2,o=_.schemes),"schemesGj"in _&&l(3,f=_.schemesGj),"filterSchemeText"in _&&l(4,i=_.filterSchemeText),"filterInterventionText"in _&&l(5,a=_.filterInterventionText),"color"in _&&l(6,u=_.color)},s.$$.update=()=>{s.$$.dirty&8&&l(7,t=ns(f))},[n,r,o,f,i,a,u,t,c,$]}class pr extends K{constructor(e){super(),X(this,e,N$,O$,J,{source:0,show:1,schemes:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function P$(s){return Ke(["get","intervention_type"],{area:Ve.area,route:Ve.route,crossing:Ve.crossing,other:Ve.other},"white")}function j$(s){return[["Areas",Ve.area],["Routes",Ve.route],["Crossings",Ve.crossing],["Other",Ve.other]]}function $r(s,e,l){const t=s.slice();return t[33]=e[l],t}function mr(s,e,l){const t=s.slice();return t[33]=e[l],t}function R$(s){let e,l;return e=new Yp({props:{loadFile:s[19]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p:Q,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function _r(s){let e,l,t;function n(o){s[25](o)}let r={name:Rr,title:E$,$$slots:{controls:[A$],help:[D$]},$$scope:{ctx:s}};return s[8]!==void 0&&(r.show=s[8]),e=new ue({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,f){const i={};f[0]&7713|f[1]&128&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&256&&(l=!0,i.show=o[8],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function gr(s){let e,l,t=s[33]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,o){d(r,e,o),p(e,l),p(l,n)},p(r,o){o[0]&1024&&t!==(t=r[33]+"")&&q(n,t)},d(r){r&&h(e)}}}function D$(s){let e,l,t,n,r,o,f;t=new Mr({props:{text:"Scheme data caveats"}});let i=he(s[10].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=gr(mr(s,i,u));return{c(){e=S("span"),l=S("p"),b(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),o=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),w(t,l,null),p(l,n),p(e,r),p(e,o);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(o,null);f=!0},p(u,c){if(c[0]&1024){i=he(u[10].notes??[]);let $;for($=0;$<i.length;$+=1){const _=mr(u,i,$);a[$]?a[$].p(_,c):(a[$]=gr(_),a[$].c(),a[$].m(o,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),Qe(a,u)}}}function A$(s){let e,l,t,n,r,o,f,i,a,u,c,$;function _(M){s[20](M)}function k(M){s[21](M)}function T(M){s[22](M)}function C(M){s[23](M)}let N={source:"ATF"};s[10]!==void 0&&(N.schemesGj=s[10]),s[9]!==void 0&&(N.schemes=s[9]),s[11]!==void 0&&(N.filterSchemeText=s[11]),s[12]!==void 0&&(N.filterInterventionText=s[12]),l=new Nr({props:N}),H.push(()=>E(l,"schemesGj",_)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",T)),H.push(()=>E(l,"filterInterventionText",C));function D(M){s[24](M)}let P={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return s[0]!==void 0&&(P.value=s[0]),i=new At({props:P}),H.push(()=>E(i,"value",D)),c=new Xt({props:{rows:s[5]}}),{c(){e=S("div"),b(l.$$.fragment),f=L(),b(i.$$.fragment),u=L(),b(c.$$.fragment),F(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(M,O){d(M,e,O),w(l,e,null),p(e,f),w(i,e,null),p(e,u),w(c,e,null),$=!0},p(M,O){const I={};!t&&O[0]&1024&&(t=!0,I.schemesGj=M[10],B(()=>t=!1)),!n&&O[0]&512&&(n=!0,I.schemes=M[9],B(()=>n=!1)),!r&&O[0]&2048&&(r=!0,I.filterSchemeText=M[11],B(()=>r=!1)),!o&&O[0]&4096&&(o=!0,I.filterInterventionText=M[12],B(()=>o=!1)),l.$set(I);const R={};!a&&O[0]&1&&(a=!0,R.value=M[0],B(()=>a=!1)),i.$set(R);const j={};O[0]&32&&(j.rows=M[5]),c.$set(j)},i(M){$||(m(l.$$.fragment,M),m(i.$$.fragment,M),m(c.$$.fragment,M),$=!0)},o(M){g(l.$$.fragment,M),g(i.$$.fragment,M),g(c.$$.fragment,M),$=!1},d(M){M&&h(e),v(l),v(i),v(c)}}}function dr(s){let e,l,t;function n(o){s[31](o)}let r={name:Dr,title:B$,$$slots:{controls:[q$],help:[F$]},$$scope:{ctx:s}};return s[7]!==void 0&&(r.show=s[7]),e=new ue({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,f){const i={};f[0]&122890|f[1]&128&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&128&&(l=!0,i.show=o[7],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function hr(s){let e,l,t=s[33]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,o){d(r,e,o),p(e,l),p(l,n)},p(r,o){o[0]&16384&&t!==(t=r[33]+"")&&q(n,t)},d(r){r&&h(e)}}}function F$(s){let e,l,t,n,r,o,f;t=new Mr({props:{text:"Scheme data caveats"}});let i=he(s[14].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=hr($r(s,i,u));return{c(){e=S("span"),l=S("p"),b(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),o=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),w(t,l,null),p(l,n),p(e,r),p(e,o);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(o,null);f=!0},p(u,c){if(c[0]&16384){i=he(u[14].notes??[]);let $;for($=0;$<i.length;$+=1){const _=$r(u,i,$);a[$]?a[$].p(_,c):(a[$]=hr(_),a[$].c(),a[$].m(o,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),Qe(a,u)}}}function q$(s){let e,l,t,n,r,o,f,i,a,u,c,$;function _(M){s[26](M)}function k(M){s[27](M)}function T(M){s[28](M)}function C(M){s[29](M)}let N={source:"LCWIP"};s[14]!==void 0&&(N.schemesGj=s[14]),s[13]!==void 0&&(N.schemes=s[13]),s[15]!==void 0&&(N.filterSchemeText=s[15]),s[16]!==void 0&&(N.filterInterventionText=s[16]),l=new Nr({props:N}),H.push(()=>E(l,"schemesGj",_)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",T)),H.push(()=>E(l,"filterInterventionText",C));function D(M){s[30](M)}let P={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return s[1]!==void 0&&(P.value=s[1]),i=new At({props:P}),H.push(()=>E(i,"value",D)),c=new Xt({props:{rows:s[3]}}),{c(){e=S("div"),b(l.$$.fragment),f=L(),b(i.$$.fragment),u=L(),b(c.$$.fragment),F(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(M,O){d(M,e,O),w(l,e,null),p(e,f),w(i,e,null),p(e,u),w(c,e,null),$=!0},p(M,O){const I={};!t&&O[0]&16384&&(t=!0,I.schemesGj=M[14],B(()=>t=!1)),!n&&O[0]&8192&&(n=!0,I.schemes=M[13],B(()=>n=!1)),!r&&O[0]&32768&&(r=!0,I.filterSchemeText=M[15],B(()=>r=!1)),!o&&O[0]&65536&&(o=!0,I.filterInterventionText=M[16],B(()=>o=!1)),l.$set(I);const R={};!a&&O[0]&2&&(a=!0,R.value=M[1],B(()=>a=!1)),i.$set(R);const j={};O[0]&8&&(j.rows=M[3]),c.$set(j)},i(M){$||(m(l.$$.fragment,M),m(i.$$.fragment,M),m(c.$$.fragment,M),$=!0)},o(M){g(l.$$.fragment,M),g(i.$$.fragment,M),g(c.$$.fragment,M),$=!1},d(M){M&&h(e),v(l),v(i),v(c)}}}function G$(s){let e,l,t,n=s[9].size>0&&_r(s),r=s[13].size>0&&dr(s);return{c(){n&&n.c(),e=L(),r&&r.c(),l=ve()},m(o,f){n&&n.m(o,f),d(o,e,f),r&&r.m(o,f),d(o,l,f),t=!0},p(o,f){o[9].size>0?n?(n.p(o,f),f[0]&512&&m(n,1)):(n=_r(o),n.c(),m(n,1),n.m(e.parentNode,e)):n&&(be(),g(n,1,1,()=>{n=null}),we()),o[13].size>0?r?(r.p(o,f),f[0]&8192&&m(r,1)):(r=dr(o),r.c(),m(r,1),r.m(l.parentNode,l)):r&&(be(),g(r,1,1,()=>{r=null}),we())},i(o){t||(m(n),m(r),t=!0)},o(o){g(n),g(r),t=!1},d(o){o&&(h(e),h(l)),n&&n.d(o),r&&r.d(o)}}}function z$(s){let e=Cn()=="Private (development)",l,t,n,r,o,f,i,a=e&&R$(s);return t=new De({props:{small:!0,$$slots:{default:[G$]},$$scope:{ctx:s}}}),r=new Wr({props:{label:"Load schemes from GeoJSON",onLoad:s[19]}}),f=new Yr({props:{errorMessage:s[2]}}),{c(){a&&a.c(),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment)},m(u,c){a&&a.m(u,c),d(u,l,c),w(t,u,c),d(u,n,c),w(r,u,c),d(u,o,c),w(f,u,c),i=!0},p(u,c){e&&a.p(u,c);const $={};c[0]&130987|c[1]&128&&($.$$scope={dirty:c,ctx:u}),t.$set($);const _={};c[0]&4&&(_.errorMessage=u[2]),f.$set(_)},i(u){i||(m(a),m(t.$$.fragment,u),m(r.$$.fragment,u),m(f.$$.fragment,u),i=!0)},o(u){g(a),g(t.$$.fragment,u),g(r.$$.fragment,u),g(f.$$.fragment,u),i=!1},d(u){u&&(h(l),h(n),h(o)),a&&a.d(u),v(t,u),v(r,u),v(f,u)}}}function H$(s){let e,l,t,n,r,o;return e=new tt({props:{label:"Schemes",open:!0,$$slots:{default:[z$]},$$scope:{ctx:s}}}),t=new pr({props:{source:"atf",show:s[8],schemesGj:s[10],schemes:s[9],filterSchemeText:s[11],filterInterventionText:s[12],color:s[6]}}),r=new pr({props:{source:"lcwip",show:s[7],schemesGj:s[14],schemes:s[13],filterSchemeText:s[15],filterInterventionText:s[16],color:s[4]}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,i){w(e,f,i),d(f,l,i),w(t,f,i),d(f,n,i),w(r,f,i),o=!0},p(f,i){const a={};i[0]&130991|i[1]&128&&(a.$$scope={dirty:i,ctx:f}),e.$set(a);const u={};i[0]&256&&(u.show=f[8]),i[0]&1024&&(u.schemesGj=f[10]),i[0]&512&&(u.schemes=f[9]),i[0]&2048&&(u.filterSchemeText=f[11]),i[0]&4096&&(u.filterInterventionText=f[12]),i[0]&64&&(u.color=f[6]),t.$set(u);const c={};i[0]&128&&(c.show=f[7]),i[0]&16384&&(c.schemesGj=f[14]),i[0]&8192&&(c.schemes=f[13]),i[0]&32768&&(c.filterSchemeText=f[15]),i[0]&65536&&(c.filterInterventionText=f[16]),i[0]&16&&(c.color=f[4]),r.$set(c)},i(f){o||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),o=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}let Rr="atf_schemes",E$="ATF schemes",Dr="lcwip_schemes",B$="LCWIP schemes";function U$(s,e,l){let t,n,r,o,f,i,a,u,c,$,_,k,T,C;Y(s,dn,W=>l(9,a=W)),Y(s,sn,W=>l(10,u=W)),Y(s,ql,W=>l(11,c=W)),Y(s,Fl,W=>l(12,$=W)),Y(s,bn,W=>l(13,_=W)),Y(s,hn,W=>l(14,k=W)),Y(s,zl,W=>l(15,T=W)),Y(s,Gl,W=>l(16,C=W));let N="",D=$e(Rr);Y(s,D,W=>l(8,i=W));let P="fundingProgramme",M=$e(Dr);Y(s,M,W=>l(7,f=W));let O="interventionType";function I(W,xe){try{Jp(JSON.parse(xe)),Ut(D,i=!0,i),Ut(M,f=!0,f),l(2,N="")}catch(zt){l(2,N=`The file you loaded is broken: ${zt}`)}}function R(W){return W=="interventionType"?[P$(),j$()]:W=="fundingProgramme"?[Ke(["get","funding_programme"],Wt,"grey"),Object.entries(Wt)]:W=="currentMilestone"?[Ke(["get","current_milestone"],wn,"grey"),Object.entries(wn)]:["red",[]]}function j(W){u=W,sn.set(u)}function z(W){a=W,dn.set(a)}function Z(W){c=W,ql.set(c)}function ae(W){$=W,Fl.set($)}function A(W){P=W,l(0,P)}function ee(W){i=W,D.set(i)}function V(W){k=W,hn.set(k)}function U(W){_=W,bn.set(_)}function Ce(W){T=W,zl.set(T)}function Pe(W){C=W,Gl.set(C)}function Fe(W){O=W,l(1,O)}function $t(W){f=W,M.set(f)}return s.$$.update=()=>{s.$$.dirty[0]&1&&l(6,[t,n]=R(P),t,(l(5,n),l(0,P))),s.$$.dirty[0]&2&&l(4,[r,o]=R(O),r,(l(3,o),l(1,O)))},[P,O,N,o,r,n,t,f,i,a,u,c,$,_,k,T,C,D,M,I,j,z,Z,ae,A,ee,V,U,Ce,Pe,Fe,$t]}class W$ extends K{constructor(e){super(),X(this,e,U$,H$,J,{},null,[-1,-1])}}const br=Ne(!0);let vn=Ne(null);function Y$(s){let e,l,t,n,r,o,f,i;return e=new wc({}),t=new Oc({}),r=new Xc({}),f=new Hc({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,o,u),w(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(o)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function J$(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[Y$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function V$(s){let e,l,t,n,r,o,f,i,a,u,c,$;return e=new Da({}),t=new pf({}),r=new Wa({}),f=new tf({}),a=new oc({}),c=new Gu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),u=L(),b(c.$$.fragment)},m(_,k){w(e,_,k),d(_,l,k),w(t,_,k),d(_,n,k),w(r,_,k),d(_,o,k),w(f,_,k),d(_,i,k),w(a,_,k),d(_,u,k),w(c,_,k),$=!0},i(_){$||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(r.$$.fragment,_),m(f.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),$=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(r.$$.fragment,_),g(f.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),$=!1},d(_){_&&(h(l),h(n),h(o),h(i),h(u)),v(e,_),v(t,_),v(r,_),v(f,_),v(a,_),v(c,_)}}}function Q$(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[V$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Z$(s){let e,l,t,n,r,o;return e=new va({}),t=new hu({}),r=new Mu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,i){w(e,f,i),d(f,l,i),w(t,f,i),d(f,n,i),w(r,f,i),o=!0},i(f){o||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),o=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}function K$(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[Z$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function X$(s){let e,l,t,n,r,o,f,i,a,u;return e=new Oi({}),t=new ia({}),r=new Fo({}),f=new si({}),a=new bi({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(c,$){w(e,c,$),d(c,l,$),w(t,c,$),d(c,n,$),w(r,c,$),d(c,o,$),w(f,c,$),d(c,i,$),w(a,c,$),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(r.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(o),h(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function x$(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[X$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function em(s){let e,l,t,n;return e=new Co({}),t=new Vo({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function tm(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[em]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function nm(s){let e,l,t,n,r,o,f,i;return e=new uu({}),t=new Tf({}),r=new eu({}),f=new qp({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,o,u),w(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(o)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function lm(s){let e,l,t,n,r,o,f,i,a=Cn()=="Private (development)",u,c,$,_,k;e=new Mp({}),t=new gp({}),r=new Hf({}),f=new Qu({});let T=a&&nm();return c=new zi({}),_=new Zi({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L(),T&&T.c(),u=L(),b(c.$$.fragment),$=L(),b(_.$$.fragment)},m(C,N){w(e,C,N),d(C,l,N),w(t,C,N),d(C,n,N),w(r,C,N),d(C,o,N),w(f,C,N),d(C,i,N),T&&T.m(C,N),d(C,u,N),w(c,C,N),d(C,$,N),w(_,C,N),k=!0},p:Q,i(C){k||(m(e.$$.fragment,C),m(t.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C),m(T),m(c.$$.fragment,C),m(_.$$.fragment,C),k=!0)},o(C){g(e.$$.fragment,C),g(t.$$.fragment,C),g(r.$$.fragment,C),g(f.$$.fragment,C),g(T),g(c.$$.fragment,C),g(_.$$.fragment,C),k=!1},d(C){C&&(h(l),h(n),h(o),h(i),h(u),h($)),v(e,C),v(t,C),v(r,C),v(f,C),T&&T.d(C),v(c,C),v(_,C)}}}function rm(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[lm]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function sm(s){let e,l,t,n,r;function o(i){s[6](i)}let f={cfg:s[5],map:s[3]};return s[0]!==void 0&&(f.enabled=s[0]),e=new rs({props:f}),H.push(()=>E(e,"enabled",o)),n=new zs({}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],B(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}function om(s){let e,l;const t=[G("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:s[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&2?re(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function im(s){let e,l,t,n,r,o,f,i,a,u,c,$,_,k,T,C,N,D,P,M,O;return l=new W$({}),n=new tt({props:{label:"Trip generators",$$slots:{default:[J$]},$$scope:{ctx:s}}}),o=new tt({props:{label:"Existing infrastructure",$$slots:{default:[Q$]},$$scope:{ctx:s}}}),i=new tt({props:{label:"Public transport",$$slots:{default:[K$]},$$scope:{ctx:s}}}),u=new tt({props:{label:"Boundaries",$$slots:{default:[x$]},$$scope:{ctx:s}}}),$=new tt({props:{label:"Census",$$slots:{default:[tm]},$$scope:{ctx:s}}}),k=new tt({props:{label:"Other",$$slots:{default:[rm]},$$scope:{ctx:s}}}),C=new tt({props:{label:"Tools",$$slots:{default:[sm]},$$scope:{ctx:s}}}),D=new ls({props:{disabled:!s[1]}}),M=new qt({props:{data:s[4],$$slots:{default:[om]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(o.$$.fragment),f=L(),b(i.$$.fragment),a=L(),b(u.$$.fragment),c=L(),b($.$$.fragment),_=L(),b(k.$$.fragment),T=L(),b(C.$$.fragment),N=L(),b(D.$$.fragment),P=L(),b(M.$$.fragment)},m(I,R){d(I,e,R),w(l,e,null),p(e,t),w(n,e,null),p(e,r),w(o,e,null),p(e,f),w(i,e,null),p(e,a),w(u,e,null),p(e,c),w($,e,null),p(e,_),w(k,e,null),p(e,T),w(C,e,null),p(e,N),w(D,e,null),s[7](e),d(I,P,R),w(M,I,R),O=!0},p(I,[R]){const j={};R&256&&(j.$$scope={dirty:R,ctx:I}),n.$set(j);const z={};R&256&&(z.$$scope={dirty:R,ctx:I}),o.$set(z);const Z={};R&256&&(Z.$$scope={dirty:R,ctx:I}),i.$set(Z);const ae={};R&256&&(ae.$$scope={dirty:R,ctx:I}),u.$set(ae);const A={};R&256&&(A.$$scope={dirty:R,ctx:I}),$.$set(A);const ee={};R&256&&(ee.$$scope={dirty:R,ctx:I}),k.$set(ee);const V={};R&265&&(V.$$scope={dirty:R,ctx:I}),C.$set(V);const U={};R&2&&(U.disabled=!I[1]),D.$set(U);const Ce={};R&258&&(Ce.$$scope={dirty:R,ctx:I}),M.$set(Ce)},i(I){O||(m(l.$$.fragment,I),m(n.$$.fragment,I),m(o.$$.fragment,I),m(i.$$.fragment,I),m(u.$$.fragment,I),m($.$$.fragment,I),m(k.$$.fragment,I),m(C.$$.fragment,I),m(D.$$.fragment,I),m(M.$$.fragment,I),O=!0)},o(I){g(l.$$.fragment,I),g(n.$$.fragment,I),g(o.$$.fragment,I),g(i.$$.fragment,I),g(u.$$.fragment,I),g($.$$.fragment,I),g(k.$$.fragment,I),g(C.$$.fragment,I),g(D.$$.fragment,I),g(M.$$.fragment,I),O=!1},d(I){I&&(h(e),h(P)),v(l),v(n),v(o),v(i),v(u),v($),v(k),v(C),v(D),s[7](null),v(M,I)}}}function am(s,e,l){let t,n,r,o;Y(s,br,c=>l(1,n=c)),Y(s,vn,c=>l(2,r=c)),Y(s,Tn,c=>l(3,o=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>ss(c,Jr(_n))};function a(c){t=c,l(0,t),l(1,n)}function u(c){H[c?"unshift":"push"](()=>{r=c,vn.set(r)})}return s.$$.update=()=>{s.$$.dirty&2&&l(0,t=!n),s.$$.dirty&1&&br.set(!t)},[t,n,r,o,f,i,a,u]}class fm extends K{constructor(e){super(),X(this,e,am,im,J,{})}}function um(s){let e,l,t;return{c(){e=S("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=S("div")},m(n,r){d(n,e,r),d(n,l,r),d(n,t,r),s[3](t)},p:Q,i:Q,o:Q,d(n){n&&(h(e),h(l),h(t)),s[3](null)}}}function cm(s,e,l){if(s){s.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",s.appendChild(n))}}}function pm(s,e,l){let t,n;Y(s,gn,f=>l(1,t=f)),Y(s,Vt,f=>l(2,n=f));let r=null;function o(f){H[f?"unshift":"push"](()=>{r=f,l(0,r)})}return s.$$.update=()=>{s.$$.dirty&7&&cm(r,n,t)},[r,t,n,o]}class $m extends K{constructor(e){super(),X(this,e,pm,um,J,{})}}function mm(s){let e,l,t,n,r,o,f,i,a,u,c,$,_,k,T,C,N;return l=new os({}),n=new Vr({}),f=new Qr({}),k=new is({props:{boundaryGeojson:s[3]}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),o=S("div"),b(f.$$.fragment),i=L(),a=S("p"),a.textContent=`App version: ${Cn()}`,u=L(),c=S("div"),$=S("h1"),$.textContent="Scheme Browser",_=L(),b(k.$$.fragment),T=L(),C=S("div"),oe(o,"border-bottom","1px solid #b1b4b6"),oe(c,"display","flex"),oe(c,"justify-content","space-between"),F(e,"slot","sidebar"),F(e,"class","govuk-prose")},m(D,P){d(D,e,P),w(l,e,null),p(e,t),w(n,e,null),p(e,r),p(e,o),w(f,o,null),p(o,i),p(o,a),p(e,u),p(e,c),p(c,$),p(c,_),w(k,c,null),p(e,T),p(e,C),s[6](C),N=!0},p(D,P){const M={};P&8&&(M.boundaryGeojson=D[3]),k.$set(M)},i(D){N||(m(l.$$.fragment,D),m(n.$$.fragment,D),m(f.$$.fragment,D),m(k.$$.fragment,D),N=!0)},o(D){g(l.$$.fragment,D),g(n.$$.fragment,D),g(f.$$.fragment,D),g(k.$$.fragment,D),N=!1},d(D){D&&h(e),v(l),v(n),v(f),v(k),s[6](null)}}}function wr(s){let e,l;return e=new fm({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function _m(s){let e,l,t,n;e=new as({});let r=s[2]&&wr();return{c(){b(e.$$.fragment),l=L(),r&&r.c(),t=ve()},m(o,f){w(e,o,f),d(o,l,f),r&&r.m(o,f),d(o,t,f),n=!0},p(o,f){o[2]?r?f&4&&m(r,1):(r=wr(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(be(),g(r,1,1,()=>{r=null}),we())},i(o){n||(m(e.$$.fragment,o),m(r),n=!0)},o(o){g(e.$$.fragment,o),g(r),n=!1},d(o){o&&(h(l),h(t)),v(e,o),r&&r.d(o)}}}function gm(s){let e,l,t;return l=new Zr({props:{style:s[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[_m]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","main")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const o={};r&2&&(o.style=n[1]),r&260&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function dm(s){let e,l,t,n,r;return e=new ws({props:{$$slots:{main:[gm],sidebar:[mm]},$$scope:{ctx:s}}}),n=new $m({}),{c(){b(e.$$.fragment),l=L(),t=S("div"),b(n.$$.fragment),F(t,"class","top-right govuk-prose svelte-u44ed2")},m(o,f){w(e,o,f),d(o,l,f),d(o,t,f),w(n,t,null),r=!0},p(o,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:o}),e.$set(i)},i(o){r||(m(e.$$.fragment,o),m(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&(h(l),h(t)),v(e,o),v(n)}}}function hm(s,e,l){let t,n,r,o,f;Y(s,vn,c=>l(4,t=c)),Y(s,Tn,c=>l(5,n=c)),Y(s,_n,c=>l(1,r=c)),Y(s,Vn,c=>l(2,o=c)),Y(s,sn,c=>l(3,f=c)),Lr(()=>{Kr()});const i=new URLSearchParams(window.location.search);_n.set(i.get("style")||"dataviz");let a;function u(c){H[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return s.$$.update=()=>{s.$$.dirty&32&&n&&Vn.set(n),s.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,o,f,t,n,u]}class bm extends K{constructor(e){super(),X(this,e,hm,dm,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new bm({target:document.getElementById("app")});
