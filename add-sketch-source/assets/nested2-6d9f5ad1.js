import{S as Q,i as Z,s as Y,e as C,h as G,a1 as Te,j as $,Y as ne,o as p,aR as ml,b as W,c as V,d as T,g as h,m as b,w as at,l as X,t as m,n as g,p as v,Z as Jt,_ as Kt,$ as Qt,a0 as Zt,a9 as Re,N as $e,O as pe,aU as dt,u as k,k as w,H as z,K as Be,P as An,Q as _l,q as Ce,T as gl,U as dl,V as it,W as hl,X as bl,a$ as Gl,b0 as _t,a6 as jn,b1 as Ul,aQ as Wl,at as ft,ag as In,al as xt,r as Pn,a as ht,F as hn,v as Xe,a_ as x,b2 as ge,b3 as ye,C as K,aj as ee,D as Se,am as te,b4 as ae,G as vt,ad as on,J as vl,aW as Vt,b5 as fn,R as wl,b6 as Ut,E as kl,aL as Vl,b7 as Xl,b8 as Yl,f as bn,ai as Jl,B as Kl,aY as Rn,an as Ql,ao as Bn,ap as zn,aq as nn,aZ as Hn,L as Zl,M as xl,y as eo}from"./index-a1f80f1b.js";import{d as lt,j as $t,C as je,f as Je,h as le,l as q,k as to,S as no,B as ro,c as qn,b as kt,G as lo}from"./StreetViewTool-025c7b91.js";import{a as ze,F as oo}from"./Popup-e28f2963.js";import{P as ue}from"./Popup-b45f3dfa.js";import{R as so,C as ut,Z as io}from"./ZoomOutMap-707bc52c.js";import{L as ao,a as fo}from"./LineMeasureController-612d9398.js";function uo(l){let e;return{c(){e=C("span"),G(e,"class","svelte-kzgqtg"),Te(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Te(e,"background",n[0])},i:ne,o:ne,d(n){n&&p(e)}}}function co(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Oe extends Q{constructor(e){super(),Z(this,e,co,uo,Y,{color:0})}}const $o="/atip/add-sketch-source/assets/help-d011708a.svg";function po(l){let e,n;const t=l[1].default,r=Jt(t,l,l[4],null);return{c(){e=C("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&Kt(r,t,o,o[4],n?Zt(t,o[4],s,null):Qt(o[4]),null)},i(o){n||(m(r,o),n=!0)},o(o){g(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function mo(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[po]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new ml({props:a}),W.push(()=>V(t,"open",i)),{c(){e=C("button"),e.innerHTML=`<img src="${$o}" title="Help" alt="Help"/>`,n=T(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,s||(u=at(e,"click",l[2]),s=!0)},p(f,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,d.open=f[0],X(()=>r=!1)),t.$set(d)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){g(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),s=!1,u()}}}function _o(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class ce extends Q{constructor(e){super(),Z(this,e,_o,mo,Y,{})}}function Gn(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Un(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Oe({props:{color:l[2]}}),{c(){e=C("li"),h(n.$$.fragment),t=T(),o=k(r),s=T()},m(i,a){$(i,e,a),b(n,e,null),w(e,t),w(e,o),w(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&z(o,r)},i(i){u||(m(n.$$.fragment,i),u=!0)},o(i){g(n.$$.fragment,i),u=!1},d(i){i&&p(e),v(n)}}}function go(l){let e,n,t=Re(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Un(Gn(l,t,s));const o=s=>g(r[s],1,1,()=>{r[s]=null});return{c(){e=C("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=Re(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Gn(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Un(a),r[i].c(),m(r[i],1),r[i].m(e,null))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)g(r[u]);n=!1},d(s){s&&p(e),dt(r,s)}}}function ho(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class Mn extends Q{constructor(e){super(),Z(this,e,ho,go,Y,{rows:0})}}function Wn(l){let e=l[0],n,t,r=Vn(l);return{c(){r.c(),n=Be()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),g(r,1,1,ne),pe(),r=Vn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){g(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Vn(l){let e;const n=l[10].default,t=Jt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&Kt(t,n,r,r[9],e?Zt(n,r[9],o,null):Qt(r[9]),null)},i(r){e||(m(t,r),e=!0)},o(r){g(t,r),e=!1},d(r){t&&t.d(r)}}}function bo(l){let e,n,t=l[0]&&Wn(l);return{c(){t&&t.c(),e=Be()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Wn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),g(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){g(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function vo(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=An("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=_l();Ce(l,f,y=>n(8,r=y)),Ce(l,c,y=>n(0,t=y));let d,_=!0;return gl(()=>{t&&d&&r&&(dl(f,t,d),it(c,t=null,t),n(6,d=void 0))}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(it(c,t=u,t),hl(r,t,bl({type:"raster",tiles:i,tileSize:a}),y=>r&&y===t,()=>{t&&(n(6,d=r==null?void 0:r.getSource(t)),n(7,_=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,d=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&d&&(_?n(7,_=!1):d.setTiles(i))},[t,f,c,u,i,a,d,_,r,s,o]}class wo extends Q{constructor(e){super(),Z(this,e,vo,bo,Y,{id:3,tiles:4,tileSize:5})}}function ko(l){let e;const n=l[16].default,t=Jt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&Kt(t,n,r,r[24],e?Zt(n,r[24],o,null):Qt(r[24]),null)},i(r){e||(m(t,r),e=!0)},o(r){g(t,r),e=!1},d(r){t&&t.d(r)}}}function yo(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[ko]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Gl({props:o}),W.push(()=>V(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function So(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=An("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:d=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:O=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:P=!1}=e,{hovered:R=null}=e,{eventsIfTopMost:I=!1}=e,{interactive:M=!0}=e;function L(D){R=D,n(0,R)}function N(D){_t.call(this,l,D)}function E(D){_t.call(this,l,D)}function A(D){_t.call(this,l,D)}function j(D){_t.call(this,l,D)}function U(D){_t.call(this,l,D)}function H(D){_t.call(this,l,D)}return l.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,s=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,i=D.beforeId),"beforeLayerType"in D&&n(5,a=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,d=D.filter),"applyToClusters"in D&&n(9,_=D.applyToClusters),"minzoom"in D&&n(10,y=D.minzoom),"maxzoom"in D&&n(11,O=D.maxzoom),"hoverCursor"in D&&n(12,S=D.hoverCursor),"manageHoverState"in D&&n(13,P=D.manageHoverState),"hovered"in D&&n(0,R=D.hovered),"eventsIfTopMost"in D&&n(14,I=D.eventsIfTopMost),"interactive"in D&&n(15,M=D.interactive),"$$scope"in D&&n(24,r=D.$$scope)},[R,o,s,u,i,a,f,c,d,_,y,O,S,P,I,M,t,L,N,E,A,j,U,H,r]}class un extends Q{constructor(e){super(),Z(this,e,So,yo,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Xn(l){let e=l[0],n,t,r=Yn(l);return{c(){r.c(),n=Be()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),g(r,1,1,ne),pe(),r=Yn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){g(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Yn(l){let e;const n=l[9].default,t=Jt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&Kt(t,n,r,r[8],e?Zt(n,r[8],o,null):Qt(r[8]),null)},i(r){e||(m(t,r),e=!0)},o(r){g(t,r),e=!1},d(r){t&&t.d(r)}}}function Co(l){let e,n,t=l[0]&&Xn(l);return{c(){t&&t.c(),e=Be()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Xn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),g(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){g(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function To(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=An("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!jn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Ul;jn.addProtocol("pmtiles",y.tile)}const{map:c,self:d}=_l();Ce(l,c,y=>n(7,r=y)),Ce(l,d,y=>n(0,t=y));let _;return gl(()=>{t&&r&&(dl(c,t,_),it(d,t=null,t),_=void 0)}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(it(d,t=u,t),hl(r,t,bl({type:"vector",url:i,tiles:a,promoteId:f}),y=>r&&y===t,()=>{t&&(_=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{_=r==null?void 0:r.getSource(u)}))},[t,c,d,u,i,a,f,r,s,o]}class we extends Q{constructor(e){super(),Z(this,e,To,Co,Y,{id:3,url:4,tiles:5,promoteId:6})}}const Oo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ne=Uint8Array,pt=Uint16Array,yl=Uint32Array,Sl=new Ne([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Cl=new Ne([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Lo=new Ne([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tl=function(l,e){for(var n=new pt(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new yl(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},Ol=Tl(Sl,2),Ll=Ol[0],Ao=Ol[1];Ll[28]=258,Ao[258]=28;var Io=Tl(Cl,0),Po=Io[0],vn=new pt(32768);for(var ve=0;ve<32768;++ve){var ot=(ve&43690)>>>1|(ve&21845)<<1;ot=(ot&52428)>>>2|(ot&13107)<<2,ot=(ot&61680)>>>4|(ot&3855)<<4,vn[ve]=((ot&65280)>>>8|(ot&255)<<8)>>>1}var Wt=function(l,e,n){for(var t=l.length,r=0,o=new pt(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new pt(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new pt(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)u[vn[c]>>>i]=a}else for(u=new pt(t),r=0;r<t;++r)l[r]&&(u[r]=vn[s[l[r]-1]++]>>>15-l[r]);return u},en=new Ne(288);for(var ve=0;ve<144;++ve)en[ve]=8;for(var ve=144;ve<256;++ve)en[ve]=9;for(var ve=256;ve<280;++ve)en[ve]=7;for(var ve=280;ve<288;++ve)en[ve]=8;var Al=new Ne(32);for(var ve=0;ve<32;++ve)Al[ve]=5;var Mo=Wt(en,9,1),No=Wt(Al,5,1),cn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},qe=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},$n=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Fo=function(l){return(l+7)/8|0},Nn=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?pt:l.BYTES_PER_ELEMENT==4?yl:Ne)(n-e);return t.set(l.subarray(e,n)),t},Eo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ge=function(l,e,n){var t=new Error(e||Eo[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,Ge),!n)throw t;return t},Do=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Ne(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ne(t*3));var s=function(Ie){var Me=e.length;if(Ie>Me){var De=new Ne(Math.max(Me*2,Ie));De.set(e),e=De}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,d=n.m,_=n.n,y=t*8;do{if(!f){u=qe(l,i,1);var O=qe(l,i+1,3);if(i+=3,O)if(O==1)f=Mo,c=No,d=9,_=5;else if(O==2){var I=qe(l,i,31)+257,M=qe(l,i+10,15)+4,L=I+qe(l,i+5,31)+1;i+=14;for(var N=new Ne(L),E=new Ne(19),A=0;A<M;++A)E[Lo[A]]=qe(l,i+A*3,7);i+=M*3;for(var j=cn(E),U=(1<<j)-1,H=Wt(E,j,1),A=0;A<L;){var D=H[qe(l,i,U)];i+=D&15;var S=D>>>4;if(S<16)N[A++]=S;else{var F=0,B=0;for(S==16?(B=3+qe(l,i,3),i+=2,F=N[A-1]):S==17?(B=3+qe(l,i,7),i+=3):S==18&&(B=11+qe(l,i,127),i+=7);B--;)N[A++]=F}}var ie=N.subarray(0,I),fe=N.subarray(I);d=cn(ie),_=cn(fe),f=Wt(ie,d,1),c=Wt(fe,_,1)}else Ge(1);else{var S=Fo(i)+4,P=l[S-4]|l[S-3]<<8,R=S+P;if(R>t){o&&Ge(0);break}r&&s(a+P),e.set(l.subarray(S,R),a),n.b=a+=P,n.p=i=R*8,n.f=u;continue}if(i>y){o&&Ge(0);break}}r&&s(a+131072);for(var de=(1<<d)-1,ke=(1<<_)-1,he=i;;he=i){var F=f[$n(l,i)&de],se=F>>>4;if(i+=F&15,i>y){o&&Ge(0);break}if(F||Ge(2),se<256)e[a++]=se;else if(se==256){he=i,f=null;break}else{var Le=se-254;if(se>264){var A=se-257,me=Sl[A];Le=qe(l,i,(1<<me)-1)+Ll[A],i+=me}var be=c[$n(l,i)&ke],re=be>>>4;be||Ge(3),i+=be&15;var fe=Po[re];if(re>3){var me=Cl[re];fe+=$n(l,i)&(1<<me)-1,i+=me}if(i>y){o&&Ge(0);break}r&&s(a+131072);for(var Pe=a+Le;a<Pe;a+=4)e[a]=e[a-fe],e[a+1]=e[a+1-fe],e[a+2]=e[a+2-fe],e[a+3]=e[a+3-fe];a=Pe}}n.l=f,n.p=he,n.b=a,n.f=u,f&&(u=1,n.m=d,n.d=c,n.n=_)}while(!u);return a==e.length?e:Nn(e,0,a)},jo=new Ne(0),Ve=function(l,e){return l[e]|l[e+1]<<8},Ue=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},pn=function(l,e){return Ue(l,e)+Ue(l,e+4)*4294967296};function Ro(l,e){return Do(l,e)}var wn=typeof TextDecoder<"u"&&new TextDecoder,Bo=0;try{wn.decode(jo,{stream:!0}),Bo=1}catch{}var zo=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,Nn(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function Il(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(wn)return wn.decode(l);var r=zo(l),o=r[0],s=r[1];return s.length&&Ge(8),o}}var Ho=function(l,e){return e+30+Ve(l,e+26)+Ve(l,e+28)},qo=function(l,e,n){var t=Ve(l,e+28),r=Il(l.subarray(e+46,e+46+t),!(Ve(l,e+8)&2048)),o=e+46+t,s=Ue(l,e+20),u=n&&s==4294967295?Go(l,o):[s,Ue(l,e+24),Ue(l,e+42)],i=u[0],a=u[1],f=u[2];return[Ve(l,e+10),i,a,r,o+Ve(l,e+30)+Ve(l,e+32),f]},Go=function(l,e){for(;Ve(l,e)!=1;e+=4+Ve(l,e+2));return[pn(l,e+12),pn(l,e+4),pn(l,e+20)]};function Uo(l,e){for(var n={},t=l.length-22;Ue(l,t)!=101010256;--t)(!t||l.length-t>65558)&&Ge(13);var r=Ve(l,t+8);if(!r)return{};var o=Ue(l,t+16),s=o==4294967295||r==65535;if(s){var u=Ue(l,t-12);s=Ue(l,u)==101075792,s&&(r=Ue(l,u+32),o=Ue(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=qo(l,o,s),c=f[0],d=f[1],_=f[2],y=f[3],O=f[4],S=f[5],P=Ho(l,S);o=O,(!i||i({name:y,size:d,originalSize:_,compression:c}))&&(c?c==8?n[y]=Ro(l.subarray(P,P+d),new Ne(_)):Ge(14,"unknown compression type "+c):n[y]=Nn(l,P,P+d))}return n}function Wo(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(mn):mn(l)}function mn(l){var e=new Uint8Array(l),n=Uo(e);return Promise.resolve(Vo(n))}function Vo(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=Il(l[r])}return e}function Ye(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&mt(t)===e)return t;n++}}function tn(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&mt(r)===e&&n.push(r),t++}return n}function sn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&mt(r)===e&&n(r,t):n(r,t),t++}}function Xo(l,e,n){var t=[];return sn(l,e,function(r,o){t.push(n(r,o))}),t}var Yo=/.+\:/;function mt(l){return l.tagName.replace(Yo,"")}function Pl(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+mt(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=Pl(l.childNodes[t]),t++;return e+="</"+mt(l)+">",e}function Jo(l){var e=l.documentElement,n=Ye(e,"sheetData"),t=[];return sn(n,"row",function(r){sn(r,"c",function(o){t.push(o)})}),t}function Ko(l,e){return Ye(e,"v")}function Qo(l,e){if(e.firstChild&&mt(e.firstChild)==="is"&&e.firstChild.firstChild&&mt(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Zo(l){var e=l.documentElement,n=Ye(e,"dimension");if(n)return n.getAttribute("ref")}function xo(l){var e=l.documentElement,n=Ye(e,"cellStyleXfs");return n?tn(n,"xf"):[]}function es(l){var e=l.documentElement,n=Ye(e,"cellXfs");return n?tn(n,"xf"):[]}function ts(l){var e=l.documentElement,n=Ye(e,"numFmts");return n?tn(n,"numFmt"):[]}function ns(l){var e=l.documentElement;return Xo(e,"si",function(n){var t=Ye(n,"t");if(t)return t.textContent;var r="";return sn(n,"r",function(o){r+=Ye(o,"t").textContent}),r})}function rs(l){var e=l.documentElement;return Ye(e,"workbookPr")}function ls(l){var e=l.documentElement;return tn(e,"Relationship")}function os(l){var e=l.documentElement,n=Ye(e,"sheets");return tn(n,"sheet")}function ss(l,e){var n=e.createDocument(l),t={},r=rs(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return os(n).forEach(o),t}function is(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=_n(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=_n(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=_n(u);break}};return ls(n).forEach(r),t}function _n(l){return l[0]==="/"?l.slice(1):"xl/"+l}function Jn(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Kn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jn(Object(n),!0).forEach(function(t){as(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function as(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function fs(l,e){if(!l)return{};var n=e.createDocument(l),t=xo(n).map(gn),r=ts(n).map(us).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?Kn(Kn({},t[u.xfId]),gn(u,r)):gn(u,r)};return es(n).map(o)}function us(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function gn(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function cs(l,e){return l?ns(e.createDocument(l)):[]}function Ml(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function $s(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ps(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ps(l,e){if(l){if(typeof l=="string")return Qn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qn(l,e)}}function Qn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ms(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(_s.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&hs(t.numberFormat.template))return!0}}var _s=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],gs=/^\[\$-414\]/,ds=/;@$/;function hs(l){l=l.toLowerCase(),l=l.replace(gs,""),l=l.replace(ds,"");for(var e=l.split(/\W+/),n=$s(e),t;!(t=n()).done;){var r=t.value;if(bs.indexOf(r)<0)return!1}return!0}var bs=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function vs(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=dn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=dn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=dn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=ws(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var d=ms(o(),s,a);d?(l=Zn(l),l=Ml(l,i)):l=(a.parseNumber||Zn)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function ws(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function dn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function Zn(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var ks=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function ys(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function Ss(l){for(var e=0,n=0;n<l.length;)e*=26,e+=ks.indexOf(l[n]),n++;return e}function Nl(l){return l=l.split(/(\d+)/),[parseInt(l[1]),Ss(l[0].trim())]}function Cs(l,e,n,t,r,o,s){var u=Nl(l.getAttribute("r")),i=Ko(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:vs(a,f,{getInlineStringValue:function(){return Qo(e,l)},getInlineStringXml:function(){return Pl(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function Ts(l,e,n,t,r,o){var s=Jo(l);return s.length===0?[]:s.map(function(u){return Cs(u,l,e,n,t,r,o)})}function Os(l,e){return Ps(l)||Is(l,e)||As(l,e)||Ls()}function Ls(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function As(l,e){if(l){if(typeof l=="string")return xn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(l,e)}}function xn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Is(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ps(l){if(Array.isArray(l))return l}function Ms(l){var e=Zo(l);if(e)return e=e.split(":").map(Nl).map(function(n){var t=Os(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Ns(l,e,n,t,r,o){var s=e.createDocument(l),u=Ts(s,e,n,t,r,o),i=Ms(s)||ys(u);return{cells:u,dimensions:i}}function Fs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Es(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Es(l,e){if(l){if(typeof l=="string")return er(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(l,e)}}function er(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ds(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=Fs(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function js(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Rs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rs(l,e){if(l){if(typeof l=="string")return tr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(l,e)}}function tr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Bs(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=js(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function zs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Fl(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hs(l,e){return Us(l)||Gs(l,e)||Fl(l,e)||qs()}function qs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fl(l,e){if(l){if(typeof l=="string")return nr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(l,e)}}function nr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Gs(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Us(l){if(Array.isArray(l))return l}function Ws(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=Hs(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=zs(t),d;!(d=c()).done;){var _=d.value,y=_.row-1,O=_.column-1;O<s&&y<u&&(i[y][O]=_.value)}var S=e.rowMap;if(S)for(var P=0;P<i.length;)S[P]=P,P++;return i=Ds(Bs(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(i=e.transformData(i)),i}function Vs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Xs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xs(l,e){if(l){if(typeof l=="string")return rr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rr(l,e)}}function rr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function lr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Ys(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lr(Object(n),!0).forEach(function(t){Js(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Js(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Ks(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Ys({sheet:1},n));var t=function(d){if(!l[d])throw new Error('"'.concat(d,'" file not found inside the *.xlsx file zip archive'));return l[d]},r=is(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?cs(t(r.sharedStrings),e):[],s=r.styles?fs(t(r.styles),e):{},u=ss(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var d=c.name;return{name:d}});var i=Qs(n.sheet,u.sheets);if(!i||!r.sheets[i])throw Zs(n.sheet,u.sheets);var a=Ns(t(r.sheets[i]),e,o,s,u,n),f=Ws(a,n);return n.properties?{data:f,properties:u}:f}function Qs(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=Vs(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Zs(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function kn(l){"@babel/helpers - typeof";return kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kn(l)}function or(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function xs(l,e,n){return e&&or(l.prototype,e),n&&or(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function ei(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function ti(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&Xt(l,e)}function ni(l){var e=El();return function(){var t=Yt(l),r;if(e){var o=Yt(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return ri(this,r)}}function ri(l,e){if(e&&(kn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return li(l)}function li(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function yn(l){var e=typeof Map=="function"?new Map:void 0;return yn=function(t){if(t===null||!oi(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return ln(t,arguments,Yt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Xt(r,t)},yn(l)}function ln(l,e,n){return El()?ln=Reflect.construct:ln=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&Xt(a,s.prototype),a},ln.apply(null,arguments)}function El(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oi(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function Xt(l,e){return Xt=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},Xt(l,e)}function Yt(l){return Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Yt(l)}var Fe=function(l){ti(n,l);var e=ni(n);function n(t){var r;return ei(this,n),r=e.call(this,"invalid"),r.reason=t,r}return xs(n)}(yn(Error));function si(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new Fe("not_a_number")}if(typeof l!="number")throw new Fe("not_a_number");if(isNaN(l))throw new Fe("invalid_number");if(!isFinite(l))throw new Fe("out_of_bounds");return l}function ii(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new Fe("invalid_number");if(!isFinite(l))throw new Fe("out_of_bounds");return String(l)}throw new Fe("not_a_string")}function ai(l){if(typeof l=="boolean")return l;throw new Fe("not_a_boolean")}function fi(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new Fe("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new Fe("invalid_number");if(!isFinite(l))throw new Fe("out_of_bounds");var t=Ml(l,n);if(isNaN(t.valueOf()))throw new Fe("out_of_bounds");return t}throw new Fe("not_a_date")}function ui(l,e){return pi(l)||$i(l,e)||Dl(l,e)||ci()}function ci(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $i(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function pi(l){if(Array.isArray(l))return l}function Sn(l){"@babel/helpers - typeof";return Sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(l)}function mi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Dl(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dl(l,e){if(l){if(typeof l=="string")return sr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sr(l,e)}}function sr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ir(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function ar(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ir(Object(n),!0).forEach(function(t){_i(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function _i(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var fr={isColumnOriented:!1};function gi(l,e,n){n?n=ar(ar({},fr),n):n=fr;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;vi(e),r&&(l=bi(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=jl(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var d=mi(a),_;!(_=d()).done;){var y=_.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function jl(l,e,n,t,r,o){for(var s={},u=!0,i=function(R){var I=R.column,M=R.value,L=R.error,N=R.reason,E={error:L,row:n+1,column:I,value:M};return N&&(E.reason=N),l[I].type&&(E.type=l[I].type),E},a=[],f=function(){var R=d[c],I=l[R],M=Sn(I.type)==="object"&&!Array.isArray(I.type),L=e[t.indexOf(R)];L===void 0&&(L=null);var N=void 0,E=void 0,A=void 0;if(M)N=jl(I.type,e,n,t,r,o);else if(L===null)N=null;else if(Array.isArray(I.type)){var j=!1,U=hi(L).map(function(D){var F=ur(D,I,o);return F.error&&(N=D,E=F.error,A=F.reason),F.value!==null&&(j=!0),F.value});E||(N=j?U:null)}else{var H=ur(L,I,o);E=H.error,A=H.reason,N=E?L:H.value}!E&&N===null&&(typeof I.required=="function"?a.push({column:R}):I.required===!0&&(E="required")),E?r.push(i({column:R,value:N,error:E,reason:A})):(u&&N!==null&&(u=!1),(N!==null||o.includeNullValues)&&(s[I.prop]=N))},c=0,d=Object.keys(l);c<d.length;c++)f();if(u)return null;for(var _=0,y=a;_<y.length;_++){var O=y[_].column,S=l[O].required(s);S&&r.push(i({column:O,value:null,error:"required"}))}return s}function ur(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=gt(l,e.parse):e.type?t=di(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function gt(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function di(l,e,n){switch(e){case String:return gt(l,ii);case Number:return gt(l,si);case Date:return gt(l,function(t){return fi(t,{properties:n.properties})});case Boolean:return gt(l,ai);default:if(typeof e=="function")return gt(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Rl(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=Rl(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function hi(l){for(var e=[],n=0;n<l.length;){var t=Rl(l,",",n),r=ui(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var bi=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function vi(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function Cn(l){"@babel/helpers - typeof";return Cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cn(l)}function Bl(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;Cn(o)==="object"&&(o=Object.keys(l[r])[0],s=Bl(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var wi=["schema","map"];function cr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function rn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cr(Object(n),!0).forEach(function(t){ki(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ki(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function yi(l,e){if(l==null)return{};var n=Si(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function Si(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function Ci(l,e,n){var t=n.schema,r=n.map,o=yi(n,wi);!t&&r&&(t=Bl(r));var s=Ks(l,e,rn(rn({},o),{},{properties:t||o.properties}));return t?gi(s.data,t,rn(rn({},o),{},{properties:s.properties})):s}function Ti(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Wo(l).then(function(n){return Ci(n,Oo,e)})}function Oi(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>Li(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function Li(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function Ai(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ti(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Wl(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Tn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function Ii(l){return ft(["get","intervention_type"],{area:lt.area,route:lt.route,crossing:lt.crossing,other:lt.other},"white")}function Pi(l){return[["Areas",lt.area],["Routes",lt.route],["Crossings",lt.crossing],["Other",lt.other]]}const J={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},Ee=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function On(){let[l,e]=zl(Tn,J.funding_programmes);return[ft(["get","funding_programme"],l,"grey"),e]}function Mi(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=zl(l,J.current_milestone);return[ft(["get","current_milestone"],e,"grey"),n]}function zl(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Ni(l){let e,n;return e=new Mn({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fi(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new $t({props:u}),W.push(()=>V(e,"value",s)),e.$on("change",l[2]),r=new je({props:{label:"Legend",$$slots:{default:[Ni]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],X(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Ei(l,e,n){let t;Ce(l,In,a=>n(4,t=a));let r="fundingProgramme",[o,s]=On();function u(){let a;r=="interventionType"?(a=Ii(),n(1,s=Pi())):r=="fundingProgramme"?n(1,[a,s]=On(),s):r=="currentMilestone"&&n(1,[a,s]=Mi(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class Di extends Q{constructor(e){super(),Z(this,e,Ei,Fi,Y,{})}}const bt=xt({type:"FeatureCollection",features:[],schemes:{}}),an=xt(new Map),$r=xt(!0),yt=xt(""),St=xt("");function ji(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ri(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bi(l){let e,n,t,r,o,s;return t=new ht({props:{$$slots:{default:[Ri]},$$scope:{ctx:l}}}),t.$on("click",l[19]),{c(){e=C("input"),n=T(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,i){$(u,e,i),Xe(e,l[7]),$(u,n,i),b(t,u,i),r=!0,o||(s=at(e,"input",l[18]),o=!0)},p(u,i){i&128&&e.value!==u[7]&&Xe(e,u[7]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){g(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function zi(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hi(l){let e,n,t,r,o,s;return t=new ht({props:{$$slots:{default:[zi]},$$scope:{ctx:l}}}),t.$on("click",l[21]),{c(){e=C("input"),n=T(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,i){$(u,e,i),Xe(e,l[6]),$(u,n,i),b(t,u,i),r=!0,o||(s=at(e,"input",l[20]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&Xe(e,u[6]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){g(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function qi(l){let e,n,t,r,o,s,u,i,a,f,c,d,_,y,O,S,P,R,I,M;e=new ht({props:{$$slots:{default:[ji]},$$scope:{ctx:l}}}),e.$on("click",l[13]);function L(F){l[14](F)}let N={label:"Sketch source",choices:l[12],emptyOption:!0};l[5]!==void 0&&(N.value=l[5]),t=new $t({props:N}),W.push(()=>V(t,"value",L));function E(F){l[15](F)}let A={label:"Authority or region",choices:l[8],emptyOption:!0};l[2]!==void 0&&(A.value=l[2]),s=new $t({props:A}),W.push(()=>V(s,"value",E));function j(F){l[16](F)}let U={label:"Funding programme",choices:l[9],emptyOption:!0};l[3]!==void 0&&(U.value=l[3]),a=new $t({props:U}),W.push(()=>V(a,"value",j));function H(F){l[17](F)}let D={label:"Current milestone",choices:l[10],emptyOption:!0};return l[4]!==void 0&&(D.value=l[4]),d=new $t({props:D}),W.push(()=>V(d,"value",H)),O=new hn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Bi]},$$scope:{ctx:l}}}),P=new hn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Hi]},$$scope:{ctx:l}}}),I=new Di({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(s.$$.fragment),i=T(),h(a.$$.fragment),c=T(),h(d.$$.fragment),y=T(),h(O.$$.fragment),S=T(),h(P.$$.fragment),R=T(),h(I.$$.fragment)},m(F,B){b(e,F,B),$(F,n,B),b(t,F,B),$(F,o,B),b(s,F,B),$(F,i,B),b(a,F,B),$(F,c,B),b(d,F,B),$(F,y,B),b(O,F,B),$(F,S,B),b(P,F,B),$(F,R,B),b(I,F,B),M=!0},p(F,B){const ie={};B&134217728&&(ie.$$scope={dirty:B,ctx:F}),e.$set(ie);const fe={};!r&&B&32&&(r=!0,fe.value=F[5],X(()=>r=!1)),t.$set(fe);const de={};B&256&&(de.choices=F[8]),!u&&B&4&&(u=!0,de.value=F[2],X(()=>u=!1)),s.$set(de);const ke={};B&512&&(ke.choices=F[9]),!f&&B&8&&(f=!0,ke.value=F[3],X(()=>f=!1)),a.$set(ke);const he={};B&1024&&(he.choices=F[10]),!_&&B&16&&(_=!0,he.value=F[4],X(()=>_=!1)),d.$set(he);const se={};B&134217856&&(se.$$scope={dirty:B,ctx:F}),O.$set(se);const Le={};B&134217792&&(Le.$$scope={dirty:B,ctx:F}),P.$set(Le)},i(F){M||(m(e.$$.fragment,F),m(t.$$.fragment,F),m(s.$$.fragment,F),m(a.$$.fragment,F),m(d.$$.fragment,F),m(O.$$.fragment,F),m(P.$$.fragment,F),m(I.$$.fragment,F),M=!0)},o(F){g(e.$$.fragment,F),g(t.$$.fragment,F),g(s.$$.fragment,F),g(a.$$.fragment,F),g(d.$$.fragment,F),g(O.$$.fragment,F),g(P.$$.fragment,F),g(I.$$.fragment,F),M=!1},d(F){F&&(p(n),p(o),p(i),p(c),p(y),p(S),p(R)),v(e,F),v(t,F),v(s,F),v(a,F),v(d,F),v(O,F),v(P,F),v(I,F)}}}function Gi(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[11].route.toLocaleString()+"",s,u,i=l[11].area.toLocaleString()+"",a,f,c=l[11].crossing.toLocaleString()+"",d,_,y=l[11].other.toLocaleString()+"",O,S,P=pr(l[11].totalLength).toFixed(1)+"",R,I;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),d=k(c),_=k(" crossings, "),O=k(y),S=k(`
    other, with total LineString length of `),R=k(P),I=k(" miles)")},m(M,L){$(M,e,L),$(M,t,L),$(M,r,L),$(M,s,L),$(M,u,L),$(M,a,L),$(M,f,L),$(M,d,L),$(M,_,L),$(M,O,L),$(M,S,L),$(M,R,L),$(M,I,L)},p(M,L){L&1&&n!==(n=M[0].size.toLocaleString()+"")&&z(t,n),L&2048&&o!==(o=M[11].route.toLocaleString()+"")&&z(s,o),L&2048&&i!==(i=M[11].area.toLocaleString()+"")&&z(a,i),L&2048&&c!==(c=M[11].crossing.toLocaleString()+"")&&z(d,c),L&2048&&y!==(y=M[11].other.toLocaleString()+"")&&z(O,y),L&2048&&P!==(P=pr(M[11].totalLength).toFixed(1)+"")&&z(R,P)},d(M){M&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(d),p(_),p(O),p(S),p(R),p(I))}}}function Ui(l){let e,n,t;function r(s){l[22](s)}let o={$$slots:{default:[Gi]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&134219777&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Wi(l){let e,n,t,r;return e=new je({props:{label:"Filters",$$slots:{default:[qi]},$$scope:{ctx:l}}}),t=new Je({props:{small:!0,$$slots:{default:[Ui]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&134219772&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&134219779&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function pr(l){return l*621371e-9}function Vi(l,e,n){let t,r,o,s;Ce(l,St,B=>n(6,t=B)),Ce(l,yt,B=>n(7,r=B)),Ce(l,bt,B=>n(23,o=B)),Ce(l,an,B=>n(24,s=B));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],d=new Set(Tn.slice(0,-1)),_="",y=[],O="",S=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],P="",R={area:0,route:0,crossing:0,other:0,totalLength:0};Pn(()=>{var de,ke,he;let B=new Set,ie=new Set,fe=new Set;for(let se of s.values())(de=se.browse)!=null&&de.authority_or_region&&B.add(se.browse.authority_or_region),(ke=se.browse)!=null&&ke.funding_programme&&ie.add(se.browse.funding_programme),(he=se.browse)!=null&&he.current_milestone&&fe.add(se.browse.current_milestone);n(8,a=Array.from(B.entries())),a.sort(),n(9,c=Tn.map(se=>[se,se])),n(10,y=Array.from(fe.entries())),y.sort()});function I(B,ie,fe,de,ke,he){let se=ie.toLowerCase(),Le=fe.toLowerCase(),me=re=>{var Pe,Ie,Me,De,oe,_e,wt;if(se&&!((Pe=re.properties.name)!=null&&Pe.toLowerCase().includes(se))&&!((Ie=re.properties.description)!=null&&Ie.toLowerCase().includes(se)))return!1;if(B||Le||de||ke||he){let We=s.get(re.properties.scheme_reference);if(de&&((Me=We.browse)==null?void 0:Me.authority_or_region)!=de||ke&&ke!=="Other"&&((De=We.browse)==null?void 0:De.funding_programme)!=ke||ke==="Other"&&d.has(((oe=We.browse)==null?void 0:oe.funding_programme)??"")||he&&((_e=We.browse)==null?void 0:_e.current_milestone)!=he||Le&&!We.scheme_reference.toLowerCase().includes(Le)&&!(We.scheme_name??"").toLowerCase().includes(Le)||B&&B!=="Both"&&B!==((wt=We.browse)==null?void 0:wt.sketch_source))return!1}return!0};n(0,u=new Set(o.features.filter(me).map(re=>re.properties.scheme_reference))),n(11,R={area:0,route:0,crossing:0,other:0,totalLength:0});let be=re=>{var Pe,Ie;return!(!u.has(re.properties.scheme_reference)||se&&!((Pe=re.properties.name)!=null&&Pe.toLowerCase().includes(se))&&!((Ie=re.properties.description)!=null&&Ie.toLowerCase().includes(se)))};for(let re of o.features)be(re)?(delete re.properties.hide_while_editing,n(11,R[re.properties.intervention_type]++,R),re.geometry.type=="LineString"&&re.properties.length_meters&&n(11,R.totalLength+=re.properties.length_meters,R)):re.properties.hide_while_editing=!0;bt.set(o),n(11,R)}function M(){n(5,P=""),n(2,f=""),n(3,_=""),n(4,O=""),it(yt,r="",r),it(St,t="",t)}function L(B){P=B,n(5,P)}function N(B){f=B,n(2,f)}function E(B){_=B,n(3,_)}function A(B){O=B,n(4,O)}function j(){r=this.value,yt.set(r)}const U=()=>it(yt,r="",r);function H(){t=this.value,St.set(t)}const D=()=>it(St,t="",t);function F(B){i=B,n(1,i)}return l.$$set=B=>{"schemesToBeShown"in B&&n(0,u=B.schemesToBeShown),"show"in B&&n(1,i=B.show)},l.$$.update=()=>{l.$$.dirty&252&&I(P,r,t,f,_,O)},[u,i,f,_,O,P,t,r,a,c,y,R,S,M,L,N,E,A,j,U,H,D,F]}class Xi extends Q{constructor(e){super(),Z(this,e,Vi,Wi,Y,{schemesToBeShown:0,show:1})}}function Yi(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ji(l){let e,n,t,r,o;return t=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Yi]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("License: "),h(t.$$.fragment),r=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),w(e,n),b(t,e,null),w(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){g(t.$$.fragment,s),o=!1},d(s){s&&p(e),v(t)}}}class Ae extends Q{constructor(e){super(),Z(this,e,null,Ji,Y,{})}}function mr(l,e,n){const t=l.slice();return t[2]=e[n],t}function _r(l,e,n){const t=l.slice();return t[5]=e[n],t}function gr(l){let e,n;return{c(){e=C("span"),n=k(`
    `),Te(e,"background",l[5]),Te(e,"width","100%"),Te(e,"border","1px solid black")},m(t,r){$(t,e,r),w(e,n)},p(t,r){r&1&&Te(e,"background",t[5])},d(t){t&&p(e)}}}function dr(l){let e,n=l[2]+"",t;return{c(){e=C("span"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&z(t,n)},d(r){r&&p(e)}}}function Ki(l){let e,n,t,r=Re(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=gr(_r(l,r,i));let s=Re(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=dr(mr(l,s,i));return{c(){e=C("div");for(let i=0;i<o.length;i+=1)o[i].c();n=T(),t=C("div");for(let i=0;i<u.length;i+=1)u[i].c();Te(e,"display","flex"),Te(t,"display","flex"),Te(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=Re(i[0]);let f;for(f=0;f<r.length;f+=1){const c=_r(i,r,f);o[f]?o[f].p(c,a):(o[f]=gr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=Re(i[1]);let f;for(f=0;f<s.length;f+=1){const c=mr(i,s,f);u[f]?u[f].p(c,a):(u[f]=dr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:ne,o:ne,d(i){i&&(p(e),p(n),p(t)),dt(o,i),dt(u,i)}}}function Qi(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class He extends Q{constructor(e){super(),Z(this,e,Qi,Ki,Y,{colorScale:0,limits:1})}}function hr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Zi(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xi(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ea(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ta(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function na(l){let e,n,t,r,o,s,u,i,a,f,c,d;return t=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[xi]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ea]},$$scope:{ctx:l}}}),f=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ta]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),u=T(),i=C("p"),a=k("License: "),h(f.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(_,y){$(_,e,y),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(_,u,y),$(_,i,y),w(i,a),b(f,i,null),w(i,c),d=!0},p(_,y){const O={};y&65536&&(O.$$scope={dirty:y,ctx:_}),t.$set(O);const S={};y&65536&&(S.$$scope={dirty:y,ctx:_}),o.$set(S);const P={};y&65536&&(P.$$scope={dirty:y,ctx:_}),f.$set(P)},i(_){d||(m(t.$$.fragment,_),m(o.$$.fragment,_),m(f.$$.fragment,_),d=!0)},o(_){g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),d=!1},d(_){_&&(p(e),p(u),p(i)),v(t),v(o),v(f)}}}function ra(l){let e,n,t;return n=new ce({props:{$$slots:{default:[na]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function br(l){let e,n;return e=new He({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function la(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oa(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sa(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ia(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function aa(l){let e,n,t,r,o,s,u,i,a,f,c,d,_,y;return o=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[oa]},$$scope:{ctx:l}}}),u=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[sa]},$$scope:{ctx:l}}}),d=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ia]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=T(),t=C("p"),r=k("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=k(". Output area boundaries from "),h(u.$$.fragment),i=k("."),a=T(),f=C("p"),c=k("License: "),h(d.$$.fragment),_=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(O,S){$(O,e,S),$(O,n,S),$(O,t,S),w(t,r),b(o,t,null),w(t,s),b(u,t,null),w(t,i),$(O,a,S),$(O,f,S),w(f,c),b(d,f,null),w(f,_),y=!0},p(O,S){const P={};S&65536&&(P.$$scope={dirty:S,ctx:O}),o.$set(P);const R={};S&65536&&(R.$$scope={dirty:S,ctx:O}),u.$set(R);const I={};S&65536&&(I.$$scope={dirty:S,ctx:O}),d.$set(I)},i(O){y||(m(o.$$.fragment,O),m(u.$$.fragment,O),m(d.$$.fragment,O),y=!0)},o(O){g(o.$$.fragment,O),g(u.$$.fragment,O),g(d.$$.fragment,O),y=!1},d(O){O&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(d)}}}function fa(l){let e,n,t;return n=new ce({props:{$$slots:{default:[aa]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function vr(l){let e,n;return e=new He({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ua(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ca(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $a(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pa(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ca]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[$a]},$$scope:{ctx:l}}}),i=new Ae({}),{c(){e=C("p"),n=k("Population density data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),u=T(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function ma(l){let e,n,t;return n=new ce({props:{$$slots:{default:[pa]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function wr(l){let e,n,t,r;return t=new He({props:{colorScale:l[4],limits:l[6]().map(ka)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",n=T(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){g(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function _a(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=C("p"),n=k("There are "),t=C("b"),o=k(r),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){$(a,e,f),w(e,n),w(e,t),w(t,o),w(e,s),w(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&z(o,r),f&8192&&u!==(u=a[14]+"")&&z(i,u)},d(a){a&&p(e)}}}function ga(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=C("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=C("b"),i=k(u),a=k(`
          cars`)},m(f,c){$(f,e,c),w(e,n),w(e,r),w(e,o),w(e,s),w(s,i),w(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&z(r,t),c&8200&&u!==(u=f[15]+"")&&z(i,u)},d(f){f&&p(e)}}}function da(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=C("p"),n=C("b"),r=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){$(f,e,c),w(e,n),w(n,r),w(n,o),w(e,s),w(e,i),w(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&z(r,t),c&8192&&u!==(u=f[14]+"")&&z(i,u)},d(f){f&&p(e)}}}function ha(l){hr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?da:o[3]=="average_cars_per_household"?ga:_a}let t=n(l),r=t(l);return{c(){r.c(),e=Be()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){hr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function ba(l){let e,n;return e=new ue({props:{$$slots:{default:[ha,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function va(l){let e,n,t,r;const o=[q(Qe),{sourceLayer:Qe},{paint:{"fill-color":ye(["get",l[3]],l[6](),l[4]),"fill-opacity":K(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ba]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",l[5]);const u=[q(`${Qe}-outline`),{sourceLayer:Qe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&88?te(o,[f&0&&ae(q(Qe)),f&0&&{sourceLayer:Qe},f&88&&{paint:{"fill-color":ye(["get",a[3]],a[6](),a[4]),"fill-opacity":K(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&8?te(u,[f&0&&ae(q(`${Qe}-outline`)),f&0&&{sourceLayer:Qe},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(d)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function wa(l){let e,n,t,r,o,s,u,i,a,f,c,d,_,y;function O(A){l[7](A)}let S={$$slots:{right:[ra],default:[Zi]},$$scope:{ctx:l}};l[0]!==void 0&&(S.checked=l[0]),e=new le({props:S}),W.push(()=>V(e,"checked",O)),e.$on("change",l[8]);let P=l[3]=="percent_households_with_car"&&br(l);function R(A){l[9](A)}let I={$$slots:{right:[fa],default:[la]},$$scope:{ctx:l}};l[1]!==void 0&&(I.checked=l[1]),o=new le({props:I}),W.push(()=>V(o,"checked",R)),o.$on("change",l[10]);let M=l[3]=="average_cars_per_household"&&vr(l);function L(A){l[11](A)}let N={$$slots:{right:[ma],default:[ua]},$$scope:{ctx:l}};l[2]!==void 0&&(N.checked=l[2]),a=new le({props:N}),W.push(()=>V(a,"checked",L)),a.$on("change",l[12]);let E=l[3]=="population_density"&&wr(l);return _=new we({props:{url:`pmtiles://${ge()}/v1/${Qe}.pmtiles`,$$slots:{default:[va]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),P&&P.c(),r=T(),h(o.$$.fragment),u=T(),M&&M.c(),i=T(),h(a.$$.fragment),c=T(),E&&E.c(),d=T(),h(_.$$.fragment)},m(A,j){b(e,A,j),$(A,t,j),P&&P.m(A,j),$(A,r,j),b(o,A,j),$(A,u,j),M&&M.m(A,j),$(A,i,j),b(a,A,j),$(A,c,j),E&&E.m(A,j),$(A,d,j),b(_,A,j),y=!0},p(A,[j]){const U={};j&65536&&(U.$$scope={dirty:j,ctx:A}),!n&&j&1&&(n=!0,U.checked=A[0],X(()=>n=!1)),e.$set(U),A[3]=="percent_households_with_car"?P?(P.p(A,j),j&8&&m(P,1)):(P=br(A),P.c(),m(P,1),P.m(r.parentNode,r)):P&&($e(),g(P,1,1,()=>{P=null}),pe());const H={};j&65536&&(H.$$scope={dirty:j,ctx:A}),!s&&j&2&&(s=!0,H.checked=A[1],X(()=>s=!1)),o.$set(H),A[3]=="average_cars_per_household"?M?(M.p(A,j),j&8&&m(M,1)):(M=vr(A),M.c(),m(M,1),M.m(i.parentNode,i)):M&&($e(),g(M,1,1,()=>{M=null}),pe());const D={};j&65536&&(D.$$scope={dirty:j,ctx:A}),!f&&j&4&&(f=!0,D.checked=A[2],X(()=>f=!1)),a.$set(D),A[3]=="population_density"?E?(E.p(A,j),j&8&&m(E,1)):(E=wr(A),E.c(),m(E,1),E.m(d.parentNode,d)):E&&($e(),g(E,1,1,()=>{E=null}),pe());const F={};j&65544&&(F.$$scope={dirty:j,ctx:A}),_.$set(F)},i(A){y||(m(e.$$.fragment,A),m(P),m(o.$$.fragment,A),m(M),m(a.$$.fragment,A),m(E),m(_.$$.fragment,A),y=!0)},o(A){g(e.$$.fragment,A),g(P),g(o.$$.fragment,A),g(M),g(a.$$.fragment,A),g(E),g(_.$$.fragment,A),y=!1},d(A){A&&(p(t),p(r),p(u),p(i),p(c),p(d)),v(e,A),P&&P.d(A),v(o,A),M&&M.d(A),v(a,A),E&&E.d(A),v(_,A)}}}let Qe="census_output_areas";const ka=l=>l.toLocaleString();function ya(l,e,n){let t=J.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(S){let P=S.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${P}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${P}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(S){r=S,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function d(S){o=S,n(1,o)}const _=()=>{n(0,r=!1),n(2,s=!1)};function y(S){s=S,n(2,s)}const O=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,d,_,y,O]}class Sa extends Q{constructor(e){super(),Z(this,e,ya,wa,Y,{})}}function Ca(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Ta(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Oa(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Ta]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of December 2022."),o=T(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function La(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Oa]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Aa(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Ia(l){let e,n;return e=new ue({props:{$$slots:{default:[Aa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pa(l){let e,n,t,r;const o=[q(Ct),{paint:{"fill-color":l[1],"fill-opacity":K(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ia]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",Na);const u=[q(`${Ct}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(Ct)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?te(u,[f&0&&ae(q(`${Ct}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ma(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[La],default:[Ca]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new vt({props:{data:`${ge()}/v1/${Ct}.geojson`,$$slots:{default:[Pa]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ct="combined_authorities";function Na(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Fa(l,e,n){let t=J.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ea extends Q{constructor(e){super(),Z(this,e,Fa,Ma,Y,{})}}function Da(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ra(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ba(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[ja]},$$scope:{ctx:l}}}),o=new x({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Ra]},$$scope:{ctx:l}}}),i=new Ae({}),{c(){e=C("p"),n=k("The 2019 English IMD scores come from "),h(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=k("."),u=T(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function za(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Ba]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function kr(l){let e,n;return e=new He({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ha(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,d=l[4].rank.toLocaleString()+"",_,y;return{c(){e=C("p"),t=k(n),r=k(` has an IMD score of
        `),o=C("b"),u=k(s),i=T(),a=C("p"),f=k("Rank: "),c=C("b"),_=k(d),y=k(`
        / 32,844 LSOAs`)},m(O,S){$(O,e,S),w(e,t),w(e,r),w(e,o),w(o,u),$(O,i,S),$(O,a,S),w(a,f),w(a,c),w(c,_),w(a,y)},p(O,S){S&16&&n!==(n=O[4].LSOA11CD+"")&&z(t,n),S&16&&s!==(s=O[4].score+"")&&z(u,s),S&16&&d!==(d=O[4].rank.toLocaleString()+"")&&z(_,d)},d(O){O&&(p(e),p(i),p(a))}}}function qa(l){let e,n;return e=new ue({props:{$$slots:{default:[Ha,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ga(l){let e,n,t,r;const o=[q(Ze),{sourceLayer:Ze},{paint:{"fill-color":ye(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":K(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[qa]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s});const u=[q(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(q(Ze)),f&0&&{sourceLayer:Ze},f&6&&{paint:{"fill-color":ye(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":K(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&1?te(u,[f&0&&ae(q(`${Ze}-outline`)),f&0&&{sourceLayer:Ze},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ua(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[za],default:[Da]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&kr(l);return o=new we({props:{url:`pmtiles://${ge()}/v1/${Ze}.pmtiles`,$$slots:{default:[Ga]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),r=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],X(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=kr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),g(a,1,1,()=>{a=null}),pe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ze="imd";function Wa(l,e,n){let t=J.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Va extends Q{constructor(e){super(),Z(this,e,Wa,Ua,Y,{})}}function Xa(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Ya(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ja(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Ya]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of January 2024."),o=T(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Ka(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Ja]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Qa(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Za(l){let e,n;return e=new ue({props:{$$slots:{default:[Qa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xa(l){let e,n,t,r;const o=[q(Tt),{paint:{"fill-color":l[1],"fill-opacity":K(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Za]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",tf);const u=[q(`${Tt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(Tt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?te(u,[f&0&&ae(q(`${Tt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ef(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Ka],default:[Xa]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new vt({props:{data:`${ge()}/v1/${Tt}.geojson`,$$slots:{default:[xa]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Tt="local_authority_districts";function tf(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function nf(l,e,n){let t=J.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class rf extends Q{constructor(e){super(),Z(this,e,nf,ef,Y,{})}}function lf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function of(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sf(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function af(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ff(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uf(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(l){let e,n,t,r,o,s,u,i,a,f,c,d,_,y,O,S,P,R,I,M,L,N;return t=new x({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[of]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[sf]},$$scope:{ctx:l}}}),u=new x({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[af]},$$scope:{ctx:l}}}),_=new x({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ff]},$$scope:{ctx:l}}}),R=new x({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[uf]},$$scope:{ctx:l}}}),L=new Ae({}),{c(){e=C("p"),n=k("LPAs may be a "),h(t.$$.fragment),r=k(", "),h(o.$$.fragment),s=k("y, or "),h(u.$$.fragment),i=k("."),a=T(),f=C("p"),c=C("strong"),d=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(_.$$.fragment),y=k(" to get more details."),O=T(),S=C("p"),P=k("Data from ONS Geography via "),h(R.$$.fragment),I=k(", as of November 2022."),M=T(),h(L.$$.fragment)},m(E,A){$(E,e,A),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),b(u,e,null),w(e,i),$(E,a,A),$(E,f,A),w(f,c),w(c,d),b(_,c,null),w(c,y),$(E,O,A),$(E,S,A),w(S,P),b(R,S,null),w(S,I),$(E,M,A),b(L,E,A),N=!0},p(E,A){const j={};A&16&&(j.$$scope={dirty:A,ctx:E}),t.$set(j);const U={};A&16&&(U.$$scope={dirty:A,ctx:E}),o.$set(U);const H={};A&16&&(H.$$scope={dirty:A,ctx:E}),u.$set(H);const D={};A&16&&(D.$$scope={dirty:A,ctx:E}),_.$set(D);const F={};A&16&&(F.$$scope={dirty:A,ctx:E}),R.$set(F)},i(E){N||(m(t.$$.fragment,E),m(o.$$.fragment,E),m(u.$$.fragment,E),m(_.$$.fragment,E),m(R.$$.fragment,E),m(L.$$.fragment,E),N=!0)},o(E){g(t.$$.fragment,E),g(o.$$.fragment,E),g(u.$$.fragment,E),g(_.$$.fragment,E),g(R.$$.fragment,E),g(L.$$.fragment,E),N=!1},d(E){E&&(p(e),p(a),p(f),p(O),p(S),p(M)),v(t),v(o),v(u),v(_),v(R),v(L,E)}}}function $f(l){let e,n,t;return n=new ce({props:{$$slots:{default:[cf]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function pf(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function mf(l){let e,n;return e=new ue({props:{$$slots:{default:[pf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _f(l){let e,n,t,r;const o=[q(xe),{sourceLayer:xe},{paint:{"fill-color":l[1],"fill-opacity":K(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[mf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s});const u=[q(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(xe)),f&0&&{sourceLayer:xe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?te(u,[f&0&&ae(q(`${xe}-outline`)),f&0&&{sourceLayer:xe},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function gf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[$f],default:[lf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new we({props:{url:`pmtiles://${ge()}/v1/${xe}.pmtiles`,$$slots:{default:[_f]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let xe="local_planning_authorities";function df(l,e,n){let t=J.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class hf extends Q{constructor(e){super(),Z(this,e,df,gf,Y,{})}}function bf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function vf(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wf(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[vf]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=T(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function kf(l){let e,n,t;return n=new ce({props:{$$slots:{default:[wf]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function yf(l){let e,n=l[3].Name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&z(t,n)},d(r){r&&p(e)}}}function Sf(l){let e,n;return e=new ue({props:{$$slots:{default:[yf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cf(l){let e,n,t,r;const o=[q(et),{sourceLayer:et},{paint:{"fill-color":l[1],"fill-opacity":K(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Sf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",Of);const u=[q(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(et)),f&0&&{sourceLayer:et},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?te(u,[f&0&&ae(q(`${et}-outline`)),f&0&&{sourceLayer:et},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Tf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[kf],default:[bf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new we({props:{url:`pmtiles://${ge()}/v1/${et}.pmtiles`,$$slots:{default:[Cf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let et="parliamentary_constituencies";function Of(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Lf(l,e,n){let t=J.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Af extends Q{constructor(e){super(),Z(this,e,Lf,Tf,Y,{})}}function If(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pf(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mf(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Pf]},$$scope:{ctx:l}}}),i=new Ae({}),{c(){e=C("p"),n=k("Most layers show air quality data from "),h(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        gm
        `),o=C("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=T(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),w(e,o),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),t.$set(d)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(i,f)}}}function Nf(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Mf]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function yr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,d,_,y,O,S,P,R;function I(L){l[7](L)}let M={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return l[0]!==void 0&&(M.value=l[0]),e=new $t({props:M}),W.push(()=>V(e,"value",I)),{c(){h(e.$$.fragment),t=T(),r=C("p"),s=k(o),u=T(),i=C("div"),a=C("label"),f=k(`Opacity
      `),c=C("input"),d=T(),_=C("img"),G(c,"type","range"),G(c,"min","0"),G(c,"max","100"),on(_.src,y=l[5](l[0]))||G(_,"src",y),G(_,"width",150),G(_,"alt",O=`Legend for ${l[0]} layer`)},m(L,N){b(e,L,N),$(L,t,N),$(L,r,N),w(r,s),$(L,u,N),$(L,i,N),w(i,a),w(a,f),w(a,c),Xe(c,l[2]),$(L,d,N),$(L,_,N),S=!0,P||(R=[at(c,"change",l[8]),at(c,"input",l[8])],P=!0)},p(L,N){const E={};!n&&N&1&&(n=!0,E.value=L[0],X(()=>n=!1)),e.$set(E),(!S||N&1)&&o!==(o=L[3](L[0])+"")&&z(s,o),N&4&&Xe(c,L[2]),(!S||N&1&&!on(_.src,y=L[5](L[0])))&&G(_,"src",y),(!S||N&1&&O!==(O=`Legend for ${L[0]} layer`))&&G(_,"alt",O)},i(L){S||(m(e.$$.fragment,L),S=!0)},o(L){g(e.$$.fragment,L),S=!1},d(L){L&&(p(t),p(r),p(u),p(i),p(d),p(_)),v(e,L),P=!1,vl(R)}}}function Ff(l){let e,n;const t=[q("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new so({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ef(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={$$slots:{right:[Nf],default:[If]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[1]&&yr(l);return o=new wo({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Ff]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),r=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],X(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=yr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),g(a,1,1,()=>{a=null}),pe());const _={};c&1&&(_.tiles=[f[4](f[0])]),c&2054&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}function Df(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let O=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${O}`}function f(y){let O=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${O}`}function c(y){r=y,n(1,r)}function d(y){s=y,n(0,s)}function _(){o=Vt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s])},[s,r,o,i,a,f,c,d,_]}class jf extends Q{constructor(e){super(),Z(this,e,Df,Ef,Y,{})}}function Rf(l){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bf(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zf(l){let e,n,t,r,o,s,u,i,a;return o=new x({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Bf]},$$scope:{ctx:l}}}),i=new Ae({}),{c(){e=C("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=T(),t=C("p"),r=k("Data from June 2019, produced by "),h(o.$$.fragment),s=k(". See there for methodology details"),u=T(),h(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),w(t,r),b(o,t,null),w(t,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const d={};c&16&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){g(o.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(i,f)}}}function Hf(l){let e,n,t;return n=new ce({props:{$$slots:{default:[zf]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Sr(l){let e,n;return e=new He({props:{colorScale:l[1],limits:["55","65","75",">"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qf(l){let e,n=l[3].noiseclass+"",t,r,o=Cr(l[3].noiseclass)+"",s,u;return{c(){e=C("p"),t=k(n),r=k(" dB ("),s=k(o),u=k(")")},m(i,a){$(i,e,a),w(e,t),w(e,r),w(e,s),w(e,u)},p(i,a){a&8&&n!==(n=i[3].noiseclass+"")&&z(t,n),a&8&&o!==(o=Cr(i[3].noiseclass)+"")&&z(s,o)},d(i){i&&p(e)}}}function Gf(l){let e,n;return e=new ue({props:{$$slots:{default:[qf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uf(l){let e,n;const t=[q(Ot),{sourceLayer:Ot},{paint:{"fill-color":ft(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][0],"65.0-69.9":l[1][1],"70.0-74.9":l[1][1],">=75.0":l[1][2]},"red"),"fill-opacity":K(.5,.8)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Gf]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ze({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Ot)),s&0&&{sourceLayer:Ot},s&2&&{paint:{"fill-color":ft(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":K(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Wf(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[Hf],default:[Rf]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Sr(l);return o=new we({props:{url:`pmtiles://${ge()}/v1/${Ot}.pmtiles`,$$slots:{default:[Uf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),r=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],X(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Sr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),g(a,1,1,()=>{a=null}),pe());const _={};c&17&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ot="road_noise";function Cr(l){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[l]}function Vf(l,e,n){let t=[J.sequential_low_to_high[0],J.sequential_low_to_high[2],J.sequential_low_to_high[4]],r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Xf extends Q{constructor(e){super(),Z(this,e,Vf,Wf,Y,{})}}function Yf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Wards`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Jf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Kf(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Jf]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=T(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Qf(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Kf]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Zf(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function xf(l){let e,n;return e=new ue({props:{$$slots:{default:[Zf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function eu(l){let e,n,t,r;const o=[q(tt),{sourceLayer:tt},{paint:{"fill-color":l[1],"fill-opacity":K(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[xf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",nu);const u=[q(`${tt}-outline`),{sourceLayer:tt},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(tt)),f&0&&{sourceLayer:tt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?te(u,[f&0&&ae(q(`${tt}-outline`)),f&0&&{sourceLayer:tt},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function tu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Qf],default:[Yf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new we({props:{url:`pmtiles://${ge()}/v1/${tt}.pmtiles`,$$slots:{default:[eu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let tt="wards";function nu(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function ru(l,e,n){let t=J.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class lu extends Q{constructor(e){super(),Z(this,e,ru,tu,Y,{})}}function ou(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function su(l){let e,n,t,r;return t=new x({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[ou]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("License: "),h(t.$$.fragment)},m(o,s){$(o,e,s),w(e,n),b(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){g(t.$$.fragment,o),r=!1},d(o){o&&p(e),v(t)}}}class Ke extends Q{constructor(e){super(),Z(this,e,null,su,Y,{})}}function iu(l){let e,n,t;return e=new Oe({props:{color:J.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function au(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fu(l){let e,n,t,r,o,s,u,i,a;return o=new x({props:{href:"https://gtfs.org",$$slots:{default:[au]},$$scope:{ctx:l}}}),i=new Ke({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=T(),t=C("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=T(),h(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),w(t,r),b(o,t,null),w(t,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const d={};c&8&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){g(o.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(i,f)}}}function uu(l){let e,n,t;return n=new ce({props:{$$slots:{default:[fu]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function cu(l){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $u(l){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pu(l){let e;function n(o,s){return o[2].has_bus_lane?$u:cu}let t=n(l),r=t(l);return{c(){r.c(),e=Be()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function mu(l){let e,n;return e=new ue({props:{$$slots:{default:[pu,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _u(l){let e,n;const t=[q(Lt),{sourceLayer:Lt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],J.bus_route_with_lane,J.bus_route_without_lane],"line-width":5,"line-opacity":K(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[mu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Lt)),s&0&&{sourceLayer:Lt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function gu(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[uu],default:[iu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new we({props:{url:`pmtiles://${ge()}/v1/${Lt}.pmtiles`,$$slots:{default:[_u]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Lt="bus_routes";function du(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class hu extends Q{constructor(e){super(),Z(this,e,du,gu,Y,{})}}function Tr(l){const e=Lu(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function Or(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function bu(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vu(l){let e,n,t,r,o,s,u,i;return u=new Ke({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=T(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=T(),o=C("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=T(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),b(u,a,f),i=!0},p:ne,i(a){i||(m(u.$$.fragment,a),i=!0)},o(a){g(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),v(u,a)}}}function wu(l){let e,n,t;return n=new ce({props:{$$slots:{default:[vu]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Lr(l){let e,n,t;return n=new Je({props:{$$slots:{default:[yu]},$$scope:{ctx:l}}}),{c(){e=C("div"),h(n.$$.fragment),Te(e,"border","1px solid black"),Te(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function ku(l){let e,n,t=l[9]+"",r,o,s;return e=new Oe({props:{color:l[10]}}),{c(){h(e.$$.fragment),n=T(),r=k(t),o=T()},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:ne,i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function Ar(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[ku]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function yu(l){let e,n,t=Re(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Ar(Or(l,t,s));const o=s=>g(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Be()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=Re(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Or(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Ar(a),r[i].c(),m(r[i],1),r[i].m(e.parentNode,e))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)g(r[u]);n=!1},d(s){s&&p(e),dt(r,s)}}}function Su(l){Tr(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,d,_=l[8]+"",y;return{c(){e=C("h2"),t=k(n),r=T(),o=C("p"),s=k("Direction: "),u=C("b"),a=T(),f=C("p"),c=k("Width: "),d=C("b"),y=k(_)},m(O,S){$(O,e,S),w(e,t),$(O,r,S),$(O,o,S),w(o,s),w(o,u),u.innerHTML=i,$(O,a,S),$(O,f,S),w(f,c),w(f,d),w(d,y)},p(O,S){Tr(O),S&32&&n!==(n=O[6]+"")&&z(t,n),S&32&&i!==(i=O[7]+"")&&(u.innerHTML=i),S&32&&_!==(_=O[8]+"")&&z(y,_)},d(O){O&&(p(e),p(r),p(o),p(a),p(f))}}}function Cu(l){let e,n;return e=new ue({props:{$$slots:{default:[Su,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tu(l){let e,n;const t=[q(At),{sourceLayer:At},{paint:{"line-color":ft(["get","kind"],{track:J.cycle_paths.track,lane:J.cycle_paths.lane,shared_use_segregated:J.cycle_paths.shared_use_segregated,shared_use_unsegregated:J.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ee,"line-opacity":K(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Ir(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[Cu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),e.$on("click",Au),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(At)),s&0&&{sourceLayer:At},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Ir(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ou(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[wu],default:[bu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Lr(l);return o=new we({props:{url:`pmtiles://${ge()}/v1/${At}.pmtiles`,$$slots:{default:[Tu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),r=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&8192&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],X(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Lr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),g(a,1,1,()=>{a=null}),pe());const _={};c&8195&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let At="cycle_paths";function Lu(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function Au(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Ir(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function Iu(l,e,n){let t=[["track","Separated tracks",J.cycle_paths.track],["lane","Unprotected lanes",J.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",J.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",J.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class Pu extends Q{constructor(e){super(),Z(this,e,Iu,Ou,Y,{})}}function Mu(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Nu(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fu(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Nu]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=C("p"),n=k("Data from the "),h(t.$$.fragment),r=k(", as of September 2021."),o=T(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Eu(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Fu]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Du(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&z(t,n)},d(r){r&&p(e)}}}function ju(l){let e,n;return e=new ue({props:{$$slots:{default:[Du,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ru(l){let e,n;const t=[q(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":K(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[ju]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(It)),s&0&&{sourceLayer:It},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":K(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Bu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Eu],default:[Mu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new we({props:{url:`pmtiles://${ge()}/v1/${It}.pmtiles`,$$slots:{default:[Ru]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let It="mrn";function zu(l,e,n){let t=J.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Hu extends Q{constructor(e){super(),Z(this,e,zu,Bu,Y,{})}}function qu(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Strategic Road Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Gu(l){let e;return{c(){e=k(`OS Open Roads
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uu(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Gu]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),r=k(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),o=T(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Wu(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Uu]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Vu(l){let e,n=(l[3].name??"Unknown SRN road")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown SRN road")+"")&&z(t,n)},d(r){r&&p(e)}}}function Xu(l){let e,n;return e=new ue({props:{$$slots:{default:[Vu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yu(l){let e,n;const t=[q(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":K(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Xu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Pt)),s&0&&{sourceLayer:Pt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":K(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ju(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Wu],default:[qu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new we({props:{url:`pmtiles://${ge()}/v1/${Pt}.pmtiles`,$$slots:{default:[Yu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Pt="srn";function Ku(l,e,n){let t=J.srn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Qu extends Q{constructor(e){super(),Z(this,e,Ku,Ju,Y,{})}}function Zu(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function xu(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ec(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[xu]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=C("p"),n=k("Data from Sustrans about the "),h(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=T(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function tc(l){let e,n,t;return n=new ce({props:{$$slots:{default:[ec]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Pr(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=C("li"),n=k("Description: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&z(o,r)},d(s){s&&p(e)}}}function Mr(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=C("li"),n=k("Is greenway: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&z(o,r)},d(s){s&&p(e)}}}function Nr(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=C("li"),n=k("Route type: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&z(o,r)},d(s){s&&p(e)}}}function Fr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=C("li"),n=k("Route number: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&z(o,r)},d(s){s&&p(e)}}}function Er(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=C("li"),n=k("Route Category: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&z(o,r)},d(s){s&&p(e)}}}function Dr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=C("li"),n=k("Open Status: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&z(o,r)},d(s){s&&p(e)}}}function jr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=C("li"),n=k("Surface: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&z(o,r)},d(s){s&&p(e)}}}function Rr(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=C("li"),n=k("Quality: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&z(o,r)},d(s){s&&p(e)}}}function Br(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=C("li"),n=k("Road Class: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&z(o,r)},d(s){s&&p(e)}}}function nc(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&Pr(l),c=l[3].Greenway&&Mr(l),d=l[3].RouteType&&Nr(l),_=l[3].RouteNo&&Fr(l),y=l[3].RouteCat&&Er(l),O=l[3].OpenStatus&&Dr(l),S=l[3].Surface&&jr(l),P=l[3].Quality&&Rr(l),R=l[3].RoadClass&&Br(l);return{c(){e=C("ul"),f&&f.c(),n=T(),c&&c.c(),t=T(),d&&d.c(),r=T(),_&&_.c(),o=T(),y&&y.c(),s=T(),O&&O.c(),u=T(),S&&S.c(),i=T(),P&&P.c(),a=T(),R&&R.c()},m(I,M){$(I,e,M),f&&f.m(e,null),w(e,n),c&&c.m(e,null),w(e,t),d&&d.m(e,null),w(e,r),_&&_.m(e,null),w(e,o),y&&y.m(e,null),w(e,s),O&&O.m(e,null),w(e,u),S&&S.m(e,null),w(e,i),P&&P.m(e,null),w(e,a),R&&R.m(e,null)},p(I,M){I[3].Desc_?f?f.p(I,M):(f=Pr(I),f.c(),f.m(e,n)):f&&(f.d(1),f=null),I[3].Greenway?c?c.p(I,M):(c=Mr(I),c.c(),c.m(e,t)):c&&(c.d(1),c=null),I[3].RouteType?d?d.p(I,M):(d=Nr(I),d.c(),d.m(e,r)):d&&(d.d(1),d=null),I[3].RouteNo?_?_.p(I,M):(_=Fr(I),_.c(),_.m(e,o)):_&&(_.d(1),_=null),I[3].RouteCat?y?y.p(I,M):(y=Er(I),y.c(),y.m(e,s)):y&&(y.d(1),y=null),I[3].OpenStatus?O?O.p(I,M):(O=Dr(I),O.c(),O.m(e,u)):O&&(O.d(1),O=null),I[3].Surface?S?S.p(I,M):(S=jr(I),S.c(),S.m(e,i)):S&&(S.d(1),S=null),I[3].Quality?P?P.p(I,M):(P=Rr(I),P.c(),P.m(e,a)):P&&(P.d(1),P=null),I[3].RoadClass?R?R.p(I,M):(R=Br(I),R.c(),R.m(e,null)):R&&(R.d(1),R=null)},d(I){I&&p(e),f&&f.d(),c&&c.d(),d&&d.d(),_&&_.d(),y&&y.d(),O&&O.d(),S&&S.d(),P&&P.d(),R&&R.d()}}}function rc(l){let e,n;return e=new ue({props:{$$slots:{default:[nc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lc(l){let e,n;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":K(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[rc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":K(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function oc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[tc],default:[Zu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new we({props:{url:`pmtiles://${ge()}/v1/${Mt}.pmtiles`,$$slots:{default:[lc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Mt="national_cycle_network";function sc(l,e,n){let t=J.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class ic extends Q{constructor(e){super(),Z(this,e,sc,oc,Y,{})}}function ac(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uc(l){let e,n,t,r,o,s,u,i,a;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[fc]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=T(),t=C("p"),t.textContent="Data valid as of 1 January, 2024",r=T(),o=C("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),u.$set(d)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function cc(l){let e,n,t;return n=new ce({props:{$$slots:{default:[uc]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function zr(l){let e,n;return e=new He({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $c(l){let e,n,t,r=l[4].side+"",o,s,u,i,a,f=l[4].average+"",c,d,_,y,O,S,P=l[4].minimum+"",R,I;return{c(){e=C("p"),n=k("Side of the road: "),t=C("b"),o=k(r),s=T(),u=C("p"),i=k("Average width: "),a=C("b"),c=k(f),d=k(`
        meters`),_=T(),y=C("p"),O=k("Minimum width: "),S=C("b"),R=k(P),I=k(`
        meters`)},m(M,L){$(M,e,L),w(e,n),w(e,t),w(t,o),$(M,s,L),$(M,u,L),w(u,i),w(u,a),w(a,c),w(u,d),$(M,_,L),$(M,y,L),w(y,O),w(y,S),w(S,R),w(y,I)},p(M,L){L&16&&r!==(r=M[4].side+"")&&z(o,r),L&16&&f!==(f=M[4].average+"")&&z(c,f),L&16&&P!==(P=M[4].minimum+"")&&z(R,P)},d(M){M&&(p(e),p(s),p(u),p(_),p(y))}}}function pc(l){let e,n;return e=new ue({props:{$$slots:{default:[$c,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mc(l){let e,n;const t=[q(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get","average"],l[2],l[1]),"line-width":Ee,"line-opacity":K(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[pc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(Nt)),s&0&&{sourceLayer:Nt},t[2],t[3],s&6&&{paint:{"line-color":ye(["get","average"],o[2],o[1]),"line-width":Ee,"line-opacity":K(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _c(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[cc],default:[ac]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&zr(l);return o=new we({props:{url:`pmtiles://${fn()}/v1/${Nt}.pmtiles`,$$slots:{default:[mc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),r=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],X(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=zr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),g(a,1,1,()=>{a=null}),pe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Nt="pavement_widths";function gc(l,e,n){let t=J.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class dc extends Q{constructor(e){super(),Z(this,e,gc,_c,Y,{})}}function hc(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bc(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vc(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wc(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new x({props:{href:"https://www.pct.bike",$$slots:{default:[bc]},$$scope:{ctx:l}}}),a=new x({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[vc]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=T(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=T(),o=C("p"),s=k("See "),h(u.$$.fragment),i=k(" and "),h(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(d,_){$(d,e,_),$(d,n,_),$(d,t,_),$(d,r,_),$(d,o,_),w(o,s),b(u,o,null),w(o,i),b(a,o,null),w(o,f),c=!0},p(d,_){const y={};_&1024&&(y.$$scope={dirty:_,ctx:d}),u.$set(y);const O={};_&1024&&(O.$$scope={dirty:_,ctx:d}),a.$set(O)},i(d){c||(m(u.$$.fragment,d),m(a.$$.fragment,d),c=!0)},o(d){g(u.$$.fragment,d),g(a.$$.fragment,d),c=!1},d(d){d&&(p(e),p(n),p(t),p(r),p(o)),v(u),v(a)}}}function kc(l){let e,n,t;return n=new ce({props:{$$slots:{default:[wc]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Hr(l){let e,n,t,r,o,s,u,i;e=new He({props:{colorScale:l[3],limits:l[4]}});function a(_){l[7](_)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new wl({props:f}),W.push(()=>V(t,"value",a));function c(_){l[8](_)}let d={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(d.value=l[1]),s=new $t({props:d}),W.push(()=>V(s,"value",c)),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(s.$$.fragment)},m(_,y){b(e,_,y),$(_,n,y),b(t,_,y),$(_,o,y),b(s,_,y),i=!0},p(_,y){const O={};!r&&y&1&&(r=!0,O.value=_[0],X(()=>r=!1)),t.$set(O);const S={};!u&&y&2&&(u=!0,S.value=_[1],X(()=>u=!1)),s.$set(S)},i(_){i||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(s.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(s.$$.fragment,_),i=!1},d(_){_&&(p(n),p(o)),v(e,_),v(t,_),v(s,_)}}}function yc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Ut(!1),t=Be(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function Sc(l){let e,n;return e=new ue({props:{$$slots:{default:[yc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cc(l){let e,n;const t=[q(rt),{sourceLayer:rt},{paint:{"line-color":ye(["get",l[1]],l[4],l[3]),"line-width":Ee,"line-opacity":K(1,.5)}},{layout:{visibility:l[2]&&l[0]==rt?"visible":"none"}}];let r={$$slots:{default:[Sc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(q(rt)),s&0&&{sourceLayer:rt},s&26&&{paint:{"line-color":ye(["get",o[1]],o[4],o[3]),"line-width":Ee,"line-opacity":K(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==rt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Tc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Ut(!1),t=Be(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function Oc(l){let e,n;return e=new ue({props:{$$slots:{default:[Tc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lc(l){let e,n;const t=[q(ct),{sourceLayer:ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get",l[1]],l[4],l[3]),"line-width":Ee,"line-opacity":K(1,.5)}},{layout:{visibility:l[2]&&l[0]==ct?"visible":"none"}}];let r={$$slots:{default:[Oc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(q(ct)),s&0&&{sourceLayer:ct},t[2],t[3],s&26&&{paint:{"line-color":ye(["get",o[1]],o[4],o[3]),"line-width":Ee,"line-opacity":K(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ct?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ac(l){let e,n,t,r,o,s,u,i;function a(d){l[6](d)}let f={$$slots:{right:[kc],default:[hc]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),W.push(()=>V(e,"checked",a));let c=l[2]&&Hr(l);return o=new we({props:{url:`pmtiles://${ge()}/v1/${rt}.pmtiles`,$$slots:{default:[Cc]},$$scope:{ctx:l}}}),u=new we({props:{url:`pmtiles://${ge()}/v1/${ct}.pmtiles`,$$slots:{default:[Lc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),c&&c.c(),r=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment)},m(d,_){b(e,d,_),$(d,t,_),c&&c.m(d,_),$(d,r,_),b(o,d,_),$(d,s,_),b(u,d,_),i=!0},p(d,[_]){const y={};_&1024&&(y.$$scope={dirty:_,ctx:d}),!n&&_&4&&(n=!0,y.checked=d[2],X(()=>n=!1)),e.$set(y),d[2]?c?(c.p(d,_),_&4&&m(c,1)):(c=Hr(d),c.c(),m(c,1),c.m(r.parentNode,r)):c&&($e(),g(c,1,1,()=>{c=null}),pe());const O={};_&1031&&(O.$$scope={dirty:_,ctx:d}),o.$set(O);const S={};_&1031&&(S.$$scope={dirty:_,ctx:d}),u.$set(S)},i(d){i||(m(e.$$.fragment,d),m(c),m(o.$$.fragment,d),m(u.$$.fragment,d),i=!0)},o(d){g(e.$$.fragment,d),g(c),g(o.$$.fragment,d),g(u.$$.fragment,d),i=!1},d(d){d&&(p(t),p(r),p(s)),v(e,d),c&&c.d(d),v(o,d),v(u,d)}}}let rt="pct_commute",ct="pct_school";function Ic(l,e,n){let t=J.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=rt,s="baseline",u=!1;function i(d){let _=d.baseline,y=d.gov_target,O=d.go_dutch,S=`<h2>Trip purpose: ${o==rt?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${O.toLocaleString()}</b></p>`;else{let P=(y/_).toFixed(1),R=(O/_).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${P}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${O.toLocaleString()} (<b>${R}x</b> of baseline)</p>`}return S}function a(d){u=d,n(2,u)}function f(d){o=d,n(0,o)}function c(d){s=d,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class Pc extends Q{constructor(e){super(),Z(this,e,Ic,Ac,Y,{})}}function Mc(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nc(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ec(l){let e,n,t,r,o,s,u,i,a,f,c,d;return t=new x({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Nc]},$$scope:{ctx:l}}}),f=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Fc]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("The average speed data is collected over a six-month period by "),h(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=T(),s=C("p"),s.textContent="Data valid as of 1 September, 2023",u=T(),i=C("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=k(".")},m(_,y){$(_,e,y),w(e,n),b(t,e,null),w(e,r),$(_,o,y),$(_,s,y),$(_,u,y),$(_,i,y),w(i,a),b(f,i,null),w(i,c),d=!0},p(_,y){const O={};y&256&&(O.$$scope={dirty:y,ctx:_}),t.$set(O);const S={};y&256&&(S.$$scope={dirty:y,ctx:_}),f.$set(S)},i(_){d||(m(t.$$.fragment,_),m(f.$$.fragment,_),d=!0)},o(_){g(t.$$.fragment,_),g(f.$$.fragment,_),d=!1},d(_){_&&(p(e),p(o),p(s),p(u),p(i)),v(t),v(f)}}}function Dc(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Ec]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function qr(l){let e,n,t,r,o;e=new He({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new wl({props:u}),W.push(()=>V(t,"value",s)),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],X(()=>r=!1)),t.$set(f)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function jc(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,d=l[4][l[7].highest_description]+"",_,y;return{c(){e=C("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=T(),u=C("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),_=k(d),y=k(")")},m(O,S){$(O,e,S),w(e,n),w(e,r),w(e,o),$(O,s,S),$(O,u,S),w(u,i),w(u,f),w(u,c),w(u,_),w(u,y)},p(O,S){S&128&&t!==(t=O[7].indicative_mph+"")&&z(r,t),S&128&&a!==(a=O[7].highest_mph+"")&&z(f,a),S&128&&d!==(d=O[4][O[7].highest_description]+"")&&z(_,d)},d(O){O&&(p(e),p(s),p(u))}}}function Rc(l){let e,n;return e=new ue({props:{$$slots:{default:[jc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bc(l){let e,n;const t=[q(Ft),{sourceLayer:Ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get",l[0]],l[3],l[2]),"line-width":Ee,"line-opacity":K(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[Rc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&15?te(t,[s&0&&ae(q(Ft)),s&0&&{sourceLayer:Ft},t[2],t[3],s&13&&{paint:{"line-color":ye(["get",o[0]],o[3],o[2]),"line-width":Ee,"line-opacity":K(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function zc(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={$$slots:{right:[Dc],default:[Mc]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[1]&&qr(l);return o=new we({props:{url:`pmtiles://${fn()}/v1/${Ft}.pmtiles`,$$slots:{default:[Bc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),r=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&256&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],X(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=qr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),g(a,1,1,()=>{a=null}),pe());const _={};c&259&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ft="road_speeds";function Hc(l,e,n){let t=J.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class qc extends Q{constructor(e){super(),Z(this,e,Hc,zc,Y,{})}}function Gc(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wc(l){let e,n,t,r,o,s,u,i,a;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Uc]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=T(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",r=T(),o=C("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),u.$set(d)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function Vc(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Wc]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Gr(l){let e,n;return e=new He({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xc(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",d,_;return{c(){e=C("p"),n=k("Average width: "),t=C("b"),o=k(r),s=k(`
        meters`),u=T(),i=C("p"),a=k("Minimum width: "),f=C("b"),d=k(c),_=k(`
        meters`)},m(y,O){$(y,e,O),w(e,n),w(e,t),w(t,o),w(e,s),$(y,u,O),$(y,i,O),w(i,a),w(i,f),w(f,d),w(i,_)},p(y,O){O&16&&r!==(r=y[4].average+"")&&z(o,r),O&16&&c!==(c=y[4].minimum+"")&&z(d,c)},d(y){y&&(p(e),p(u),p(i))}}}function Yc(l){let e,n;return e=new ue({props:{$$slots:{default:[Xc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jc(l){let e,n;const t=[q(Et),{sourceLayer:Et},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get","average"],l[2],l[1]),"line-width":Ee,"line-opacity":K(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Yc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(Et)),s&0&&{sourceLayer:Et},t[2],t[3],s&6&&{paint:{"line-color":ye(["get","average"],o[2],o[1]),"line-width":Ee,"line-opacity":K(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Kc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Vc],default:[Gc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Gr(l);return o=new we({props:{url:`pmtiles://${fn()}/v1/${Et}.pmtiles`,$$slots:{default:[Jc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),r=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],X(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Gr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),g(a,1,1,()=>{a=null}),pe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Et="road_widths";function Qc(l,e,n){let t=J.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Zc extends Q{constructor(e){super(),Z(this,e,Qc,Kc,Y,{})}}function xc(l){let e,n,t;return e=new Oe({props:{color:J.trams}}),{c(){h(e.$$.fragment),n=k(`
  Trams`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function e$(l){let e,n,t,r;return t=new Ke({}),{c(){e=C("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=T(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){g(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function t$(l){let e,n,t;return n=new ce({props:{$$slots:{default:[e$]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function n$(l){let e,n;const t=[q(Dt),{sourceLayer:Dt},{paint:{"line-color":J.trams,"line-width":5,"line-opacity":K(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),e.$on("click",l$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function r$(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[t$],default:[xc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new we({props:{url:`pmtiles://${ge()}/v1/${Dt}.pmtiles`,$$slots:{default:[n$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Dt="trams";function l$(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function o$(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class s$ extends Q{constructor(e){super(),Z(this,e,o$,r$,Y,{})}}function i$(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function a$(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function f$(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[a$]},$$scope:{ctx:l}}}),i=new Ae({}),{c(){e=C("p"),n=k("Data from the "),h(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=T(),s=C("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=T(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),$(f,o,c),$(f,s,c),$(f,u,c),b(i,f,c),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),t.$set(d)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),v(t),v(i,f)}}}function u$(l){let e,n,t;return n=new ce({props:{$$slots:{default:[f$]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ur(l){let e,n,t,r;return t=new He({props:{colorScale:l[1],limits:l[2]}}),{c(){e=C("p"),e.textContent="Peak hourly frequency:",n=T(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){g(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function c$(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,d,_,y,O,S=l[4].peak_description+"",P,R,I,M,L,N=l[4].total+"",E,A,j=l[4].total_description+"",U,H;return{c(){e=C("p"),n=k("Stop name: "),t=C("b"),o=k(r),s=T(),u=C("p"),i=k("Peak: "),a=C("b"),c=k(f),d=k(`
        buses during the busiest hour of any day`),_=T(),y=C("p"),O=k("The peak hour is "),P=k(S),R=T(),I=C("p"),M=k("Total buses per day: "),L=C("b"),E=k(N),A=k(`
        (for `),U=k(j),H=k(", the busiest day of the week)")},m(D,F){$(D,e,F),w(e,n),w(e,t),w(t,o),$(D,s,F),$(D,u,F),w(u,i),w(u,a),w(a,c),w(u,d),$(D,_,F),$(D,y,F),w(y,O),w(y,P),$(D,R,F),$(D,I,F),w(I,M),w(I,L),w(L,E),w(I,A),w(I,U),w(I,H)},p(D,F){F&16&&r!==(r=D[4].stop_name+"")&&z(o,r),F&16&&f!==(f=D[4].peak+"")&&z(c,f),F&16&&S!==(S=D[4].peak_description+"")&&z(P,S),F&16&&N!==(N=D[4].total+"")&&z(E,N),F&16&&j!==(j=D[4].total_description+"")&&z(U,j)},d(D){D&&(p(e),p(s),p(u),p(_),p(y),p(R),p(I))}}}function $$(l){let e,n;return e=new ue({props:{$$slots:{default:[c$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function p$(l){let e,n;const t=[q(jt),{sourceLayer:jt},{paint:{"circle-color":ye(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[$$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ut({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(jt)),s&0&&{sourceLayer:jt},s&6&&{paint:{"circle-color":ye(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function m$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[u$],default:[i$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Ur(l);return o=new we({props:{url:`pmtiles://${ge()}/v1/${jt}.pmtiles`,$$slots:{default:[p$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),r=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],X(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Ur(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),g(a,1,1,()=>{a=null}),pe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let jt="bus_stops";function _$(l,e,n){let t=J.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class g$ extends Q{constructor(e){super(),Z(this,e,_$,m$,Y,{})}}function d$(l){let e,n,t;return{c(){e=C("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=at(e,"change",l[5]),n=!0)},p:ne,d(r){r&&p(e),l[7](null),n=!1,t()}}}function Wr(l){let e,n;return e=new Je({props:{small:!0,$$slots:{default:[b$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function h$(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Oe({props:{color:Rt}}),{c(){h(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&z(r,t)},i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function b$(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[h$]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function v$(l){let e,n,t,r,o,s;e=new hn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[d$]},$$scope:{ctx:l}}}),t=new kl({props:{errorMessage:l[3]}});let u=l[2]>0&&Wr(l);return{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),r=T(),u&&u.c(),o=Be()},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&m(u,1)):(u=Wr(i),u.c(),m(u,1),u.m(o.parentNode,o)):u&&($e(),g(u,1,1,()=>{u=null}),pe())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(u),s=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(u),s=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),u&&u.d(i)}}}function w$(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,d,_,y,O=l[10].notes+"",S,P,R,I,M,L,N,E=l[10].id+"",A,j,U,H,D,F=(l[10].inspector??"???")+"",B,ie,fe,de=l[10].submission_time+"",ke,he,se,Le,me,be=l[10].scheme_reference+"",re,Pe,Ie,Me=l[10].current_design_stage+"",De;return{c(){e=C("div"),n=C("h2"),r=k(t),o=T(),s=C("p"),u=C("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=T(),d=C("p"),_=C("u"),_.textContent="Notes",y=k(`
          : `),S=k(O),P=T(),R=C("hr"),I=T(),M=C("p"),L=k("Critical issue ID: "),N=C("b"),A=k(E),j=T(),U=C("p"),H=k("Submitted by "),D=C("b"),B=k(F),ie=k(`
          at
          `),fe=C("b"),ke=k(de),he=T(),se=C("p"),Le=k("For scheme "),me=C("b"),re=k(be),Pe=k(`
          in stage
          `),Ie=C("b"),De=k(Me),Te(e,"max-width","30vw")},m(oe,_e){$(oe,e,_e),w(e,n),w(n,r),w(e,o),w(e,s),w(s,u),w(s,i),w(s,f),w(e,c),w(e,d),w(d,_),w(d,y),w(d,S),w(e,P),w(e,R),w(e,I),w(e,M),w(M,L),w(M,N),w(N,A),w(e,j),w(e,U),w(U,H),w(U,D),w(D,B),w(U,ie),w(U,fe),w(fe,ke),w(e,he),w(e,se),w(se,Le),w(se,me),w(me,re),w(se,Pe),w(se,Ie),w(Ie,De)},p(oe,_e){_e&1024&&t!==(t=oe[10].critical_type+"")&&z(r,t),_e&1024&&a!==(a=oe[10].location_description+"")&&z(f,a),_e&1024&&O!==(O=oe[10].notes+"")&&z(S,O),_e&1024&&E!==(E=oe[10].id+"")&&z(A,E),_e&1024&&F!==(F=(oe[10].inspector??"???")+"")&&z(B,F),_e&1024&&de!==(de=oe[10].submission_time+"")&&z(ke,de),_e&1024&&be!==(be=oe[10].scheme_reference+"")&&z(re,be),_e&1024&&Me!==(Me=oe[10].current_design_stage+"")&&z(De,Me)},d(oe){oe&&p(e)}}}function k$(l){let e,n;return e=new ue({props:{$$slots:{default:[w$,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function y$(l){let e,n,t,r,o,s;const u=[q("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":Rt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let _=0;_<u.length;_+=1)i=ee(i,u[_]);e=new ut({props:i}),e.$on("click",l[6]);const a=[q("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let _=0;_<a.length;_+=1)f=ee(f,a[_]);t=new un({props:f});const c=[q("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Rt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let d={$$slots:{default:[k$]},$$scope:{ctx:l}};for(let _=0;_<c.length;_+=1)d=ee(d,c[_]);return o=new ut({props:d}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),r=T(),h(o.$$.fragment)},m(_,y){b(e,_,y),$(_,n,y),b(t,_,y),$(_,r,y),b(o,_,y),s=!0},p(_,y){const O=y&2?te(u,[u[0],u[1],y&0&&{paint:{"circle-color":Rt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:_[1]?"visible":"none"}},u[4]]):{};e.$set(O);const S=y&2?te(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:_[1]?"visible":"none"}}]):{};t.$set(S);const P=y&2?te(c,[c[0],c[1],c[2],c[3],y&0&&{paint:{"circle-color":Rt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:_[1]?"visible":"none"}}]):{};y&2048&&(P.$$scope={dirty:y,ctx:_}),o.$set(P)},i(_){s||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(o.$$.fragment,_),s=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),s=!1},d(_){_&&(p(n),p(r)),v(e,_),v(t,_),v(o,_)}}}function S$(l){let e,n,t,r;return e=new je({props:{label:"Critical Issues",$$slots:{default:[v$]},$$scope:{ctx:l}}}),t=new vt({props:{id:Hl,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[y$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let Hl="criticals",Rt="red";function C$(l,e,n){let t;Ce(l,In,_=>n(9,t=_));let r,o=!0,s=0,u="",i=Vl();async function a(_){try{n(4,i=await Ai(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}async function f(_){let y=await t.getSource(Hl).getClusterExpansionZoom(_.detail.features[0].properties.cluster_id);t.easeTo({center:_.detail.features[0].geometry.coordinates,zoom:y})}function c(_){W[_?"unshift":"push"](()=>{r=_,n(0,r)})}function d(_){o=_,n(1,o)}return[r,o,s,u,i,a,f,c,d]}class T$ extends Q{constructor(e){super(),Z(this,e,C$,S$,Y,{})}}function O$(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function L$(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function A$(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[L$]},$$scope:{ctx:l}}}),s=new Ke({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=T(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function I$(l){let e,n,t;return n=new ce({props:{$$slots:{default:[A$]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Vr(l){let e,n;return e=new Mn({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function P$(l){let e,n=Xr(l[3])+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=Xr(r[3])+"")&&z(t,n)},d(r){r&&p(e)}}}function M$(l){let e,n;return e=new ue({props:{$$slots:{default:[P$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function N$(l){let e,n;const t=[q(Bt),{sourceLayer:Bt},{paint:{"circle-color":ft(["get","crossing"],{traffic_signals:J.signalized_crossing},J.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[M$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ut({props:r}),e.$on("click",E$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Bt)),s&0&&{sourceLayer:Bt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function F$(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[I$],default:[O$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Vr(l);return o=new we({props:{url:`pmtiles://${ge()}/v1/${Bt}.pmtiles`,$$slots:{default:[N$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),r=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],X(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Vr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),g(a,1,1,()=>{a=null}),pe());const _={};c&17&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Bt="crossings";function Xr(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function E$(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function D$(l,e,n){let t=!1,r=[["Signalized",J.signalized_crossing],["Other",J.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class j$ extends Q{constructor(e){super(),Z(this,e,D$,F$,Y,{})}}function R$(l){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function B$(l){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function z$(l){let e,n,t,r,o,s,u,i,a,f,c,d,_;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[B$]},$$scope:{ctx:l}}}),f=new Ae({}),d=new Ke({}),{c(){e=C("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=T(),t=C("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=T(),o=C("p"),s=k("This layer is built from "),h(u.$$.fragment),i=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=T(),h(f.$$.fragment),c=T(),h(d.$$.fragment)},m(y,O){$(y,e,O),$(y,n,O),$(y,t,O),$(y,r,O),$(y,o,O),w(o,s),b(u,o,null),w(o,i),$(y,a,O),b(f,y,O),$(y,c,O),b(d,y,O),_=!0},p(y,O){const S={};O&32&&(S.$$scope={dirty:O,ctx:y}),u.$set(S)},i(y){_||(m(u.$$.fragment,y),m(f.$$.fragment,y),m(d.$$.fragment,y),_=!0)},o(y){g(u.$$.fragment,y),g(f.$$.fragment,y),g(d.$$.fragment,y),_=!1},d(y){y&&(p(e),p(n),p(t),p(r),p(o),p(a),p(c)),v(u),v(f,y),v(d,y)}}}function H$(l){let e,n,t;return n=new ce({props:{$$slots:{default:[z$]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Yr(l){let e,n;return e=new He({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function q$(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=C("p"),n=k("Gradient: "),t=C("b"),o=k(r),s=k(`
        %`)},m(u,i){$(u,e,i),w(e,n),w(e,t),w(t,o),w(e,s)},p(u,i){i&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&z(o,r)},d(u){u&&p(e)}}}function G$(l){let e,n;return e=new ue({props:{$$slots:{default:[q$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function U$(l){let e,n,t,r;const o=[q(nt),{sourceLayer:nt},{manageHoverState:!0},{paint:{"line-color":ye(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":Ee,"line-opacity":K(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[G$]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Se({props:s});const u=[q(nt+"_arrows"),{sourceLayer:nt},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new un({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(q(nt)),f&0&&{sourceLayer:nt},o[2],f&6&&{paint:{"line-color":ye(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Ee,"line-opacity":K(1,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&1?te(u,[f&0&&ae(q(nt+"_arrows")),f&0&&{sourceLayer:nt},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function W$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[H$],default:[R$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Yr(l);return o=new we({props:{url:`pmtiles://${ge()}/v1/${nt}.pmtiles`,$$slots:{default:[U$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),r=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],X(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Yr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),g(a,1,1,()=>{a=null}),pe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let nt="gradient";function V$(l,e,n){let t=J.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class X$ extends Q{constructor(e){super(),Z(this,e,V$,W$,Y,{})}}function Y$(l){let e,n,t;return{c(){e=C("img"),t=k(`
  Cycle parking`),on(e.src,n=Xl)||G(e,"src",n),G(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function J$(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function K$(l){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Q$(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[J$]},$$scope:{ctx:l}}}),i=new x({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[K$]},$$scope:{ctx:l}}}),f=new Ke({}),{c(){e=C("p"),n=k("Cycle parking, according to "),h(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=T(),s=C("p"),u=k("Icon from "),h(i.$$.fragment),a=T(),h(f.$$.fragment)},m(d,_){$(d,e,_),w(e,n),b(t,e,null),w(e,r),$(d,o,_),$(d,s,_),w(s,u),b(i,s,null),$(d,a,_),b(f,d,_),c=!0},p(d,_){const y={};_&8&&(y.$$scope={dirty:_,ctx:d}),t.$set(y);const O={};_&8&&(O.$$scope={dirty:_,ctx:d}),i.$set(O)},i(d){c||(m(t.$$.fragment,d),m(i.$$.fragment,d),m(f.$$.fragment,d),c=!0)},o(d){g(t.$$.fragment,d),g(i.$$.fragment,d),g(f.$$.fragment,d),c=!1},d(d){d&&(p(e),p(o),p(s),p(a)),v(t),v(i),v(f,d)}}}function Z$(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Q$]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function x$(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=C("p"),n=k("Capacity: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&z(o,r)},d(s){s&&p(e)}}}function ep(l){let e,n;return e=new ue({props:{$$slots:{default:[x$,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tp(l){let e,n;const t=[q(zt),{sourceLayer:zt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[ep]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new un({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(zt)),s&0&&{sourceLayer:zt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function np(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Z$],default:[Y$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new we({props:{url:`pmtiles://${ge()}/v1/${zt}.pmtiles`,$$slots:{default:[tp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let zt="cycle_parking";function rp(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class lp extends Q{constructor(e){super(),Z(this,e,rp,np,Y,{})}}function op(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sp(l){let e,n,t,r;return t=new Ke({}),{c(){e=C("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=T(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){g(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function ip(l){let e,n,t;return n=new ce({props:{$$slots:{default:[sp]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Jr(l){let e,n,t;return n=new Je({props:{$$slots:{default:[cp]},$$scope:{ctx:l}}}),{c(){e=C("div"),h(n.$$.fragment),Te(e,"border","1px solid black"),Te(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function ap(l){let e,n,t;return e=new Oe({props:{color:J.education.schools}}),{c(){h(e.$$.fragment),n=k(`
        Schools`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function fp(l){let e,n,t;return e=new Oe({props:{color:J.education.colleges}}),{c(){h(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function up(l){let e,n,t;return e=new Oe({props:{color:J.education.universities}}),{c(){h(e.$$.fragment),n=k(`
        Universities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function cp(l){let e,n,t,r,o,s,u,i,a;function f(S){l[3](S)}let c={$$slots:{default:[ap]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),W.push(()=>V(e,"checked",f));function d(S){l[4](S)}let _={$$slots:{default:[fp]},$$scope:{ctx:l}};l[1].college!==void 0&&(_.checked=l[1].college),r=new le({props:_}),W.push(()=>V(r,"checked",d));function y(S){l[5](S)}let O={$$slots:{default:[up]},$$scope:{ctx:l}};return l[1].university!==void 0&&(O.checked=l[1].university),u=new le({props:O}),W.push(()=>V(u,"checked",y)),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment),s=T(),h(u.$$.fragment)},m(S,P){b(e,S,P),$(S,t,P),b(r,S,P),$(S,s,P),b(u,S,P),a=!0},p(S,P){const R={};P&128&&(R.$$scope={dirty:P,ctx:S}),!n&&P&2&&(n=!0,R.checked=S[1].school,X(()=>n=!1)),e.$set(R);const I={};P&128&&(I.$$scope={dirty:P,ctx:S}),!o&&P&2&&(o=!0,I.checked=S[1].college,X(()=>o=!1)),r.$set(I);const M={};P&128&&(M.$$scope={dirty:P,ctx:S}),!i&&P&2&&(i=!0,M.checked=S[1].university,X(()=>i=!1)),u.$set(M)},i(S){a||(m(e.$$.fragment,S),m(r.$$.fragment,S),m(u.$$.fragment,S),a=!0)},o(S){g(e.$$.fragment,S),g(r.$$.fragment,S),g(u.$$.fragment,S),a=!1},d(S){S&&(p(t),p(s)),v(e,S),v(r,S),v(u,S)}}}function $p(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&z(t,n)},d(r){r&&p(e)}}}function pp(l){let e,n;return e=new ue({props:{$$slots:{default:[$p,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mp(l){let e,n;const t=[q(Ht),{sourceLayer:Ht},{paint:{"fill-color":ft(["get","type"],{school:J.education.schools,college:J.education.colleges,university:J.education.universities},"grey"),"fill-opacity":K(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Kr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[pp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ze({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Ht)),s&0&&{sourceLayer:Ht},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Kr(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _p(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[ip],default:[op]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Jr(l);return o=new we({props:{url:`pmtiles://${ge()}/v1/${Ht}.pmtiles`,$$slots:{default:[mp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),r=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&128&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],X(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Jr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),g(a,1,1,()=>{a=null}),pe());const _={};c&131&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ht="education";function Kr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function gp(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class dp extends Q{constructor(e){super(),Z(this,e,gp,_p,Y,{})}}function hp(l){let e,n,t,r;return e=new Oe({props:{color:l[4]}}),{c(){h(e.$$.fragment),n=T(),t=k(l[2])},m(o,s){b(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&z(t,o[2])},i(o){r||(m(e.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function bp(l){let e;const n=l[5].default,t=Jt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&Kt(t,n,r,r[7],e?Zt(n,r[7],o,null):Qt(r[7]),null)},i(r){e||(m(t,r),e=!0)},o(r){g(t,r),e=!1},d(r){t&&t.d(r)}}}function vp(l){let e,n,t;return n=new ce({props:{$$slots:{default:[bp]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function wp(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&z(t,n)},d(r){r&&p(e)}}}function kp(l){let e,n;return e=new ue({props:{$$slots:{default:[wp,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yp(l){let e,n;const t=[q(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":K(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[kp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ze({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&25?te(t,[s&1&&ae(q(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":K(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Sp(l){let e,n,t,r,o;function s(i){l[6](i)}let u={$$slots:{right:[vp],default:[hp]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new we({props:{url:`pmtiles://${ge()}/v1/${l[0]}.pmtiles`,$$slots:{default:[yp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],X(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${ge()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Cp(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=J[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class ql extends Q{constructor(e){super(),Z(this,e,Cp,Sp,Y,{name:0,singularNoun:1,pluralNoun:2})}}function Tp(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Op(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Tp]},$$scope:{ctx:l}}}),s=new Ke({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=T(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Lp(l){let e,n;return e=new ql({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Op]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Ap extends Q{constructor(e){super(),Z(this,e,null,Lp,Y,{})}}function Ip(l){let e,n,t;return{c(){e=C("img"),t=k(`
  Railway Stations`),on(e.src,n=Yl)||G(e,"src",n),G(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function Pp(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mp(l){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Np(l){let e,n,t,r,o,s,u,i,a,f,c,d;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Pp]},$$scope:{ctx:l}}}),i=new x({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Mp]},$$scope:{ctx:l}}}),c=new Ke({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=T(),s=C("p"),u=k("Icon from "),h(i.$$.fragment),a=k(". (Note that not all stations shown are National Rail.)"),f=T(),h(c.$$.fragment)},m(_,y){$(_,e,y),w(e,n),b(t,e,null),w(e,r),$(_,o,y),$(_,s,y),w(s,u),b(i,s,null),w(s,a),$(_,f,y),b(c,_,y),d=!0},p(_,y){const O={};y&8&&(O.$$scope={dirty:y,ctx:_}),t.$set(O);const S={};y&8&&(S.$$scope={dirty:y,ctx:_}),i.$set(S)},i(_){d||(m(t.$$.fragment,_),m(i.$$.fragment,_),m(c.$$.fragment,_),d=!0)},o(_){g(t.$$.fragment,_),g(i.$$.fragment,_),g(c.$$.fragment,_),d=!1},d(_){_&&(p(e),p(o),p(s),p(f)),v(t),v(i),v(c,_)}}}function Fp(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Np]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ep(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&z(t,n)},d(r){r&&p(e)}}}function Dp(l){let e,n;return e=new ue({props:{$$slots:{default:[Ep,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jp(l){let e,n;const t=[q(Ln),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Dp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new un({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Ln)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Rp(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Fp],default:[Ip]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new vt({props:{data:`${ge()}/v1/${Ln}.geojson`,$$slots:{default:[jp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ln="railway_stations";function Bp(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class zp extends Q{constructor(e){super(),Z(this,e,Bp,Rp,Y,{})}}function Hp(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qp(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gp(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Hp]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[qp]},$$scope:{ctx:l}}}),i=new Ke({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),r=k(" and "),h(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=T(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function Up(l){let e,n;return e=new ql({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Gp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Wp extends Q{constructor(e){super(),Z(this,e,null,Up,Y,{})}}function Vp(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xp(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yp(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jp(l){let e,n,t,r,o,s,u,i,a,f,c,d,_,y,O,S,P,R,I,M,L,N,E;return t=new x({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Xp]},$$scope:{ctx:l}}}),P=new x({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Yp]},$$scope:{ctx:l}}}),N=new Ae({}),{c(){e=C("p"),n=k("This layer shows collisions recorded in the "),h(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=T(),s=C("ul"),u=C("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=T(),a=C("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=T(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,d=T(),_=C("li"),_.textContent='The "pedestrians" category also include mobility scooters',y=T(),O=C("li"),S=k("All limitations "),h(P.$$.fragment),R=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),I=T(),M=C("p"),M.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=T(),h(N.$$.fragment)},m(A,j){$(A,e,j),w(e,n),b(t,e,null),w(e,r),$(A,o,j),$(A,s,j),w(s,u),w(s,i),w(s,a),w(s,f),w(s,c),w(s,d),w(s,_),w(s,y),w(s,O),w(O,S),b(P,O,null),w(O,R),$(A,I,j),$(A,M,j),$(A,L,j),b(N,A,j),E=!0},p(A,j){const U={};j&16777216&&(U.$$scope={dirty:j,ctx:A}),t.$set(U);const H={};j&16777216&&(H.$$scope={dirty:j,ctx:A}),P.$set(H)},i(A){E||(m(t.$$.fragment,A),m(P.$$.fragment,A),m(N.$$.fragment,A),E=!0)},o(A){g(t.$$.fragment,A),g(P.$$.fragment,A),g(N.$$.fragment,A),E=!1},d(A){A&&(p(e),p(o),p(s),p(I),p(M),p(L)),v(t),v(P),v(N,A)}}}function Kp(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Jp]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Qr(l){let e,n,t,r,o,s,u,i,a,f,c,d,_;return n=new Je({props:{small:!0,$$slots:{default:[tm]},$$scope:{ctx:l}}}),f=new Mn({props:{rows:l[14]}}),{c(){e=C("div"),h(n.$$.fragment),t=T(),r=C("div"),o=k(`Filter years:
      `),s=C("input"),u=k(`
      -
      `),i=C("input"),a=T(),h(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),Te(e,"border","1px solid black"),Te(e,"padding","8px")},m(y,O){$(y,e,O),b(n,e,null),w(e,t),w(e,r),w(r,o),w(r,s),Xe(s,l[4]),w(r,u),w(r,i),Xe(i,l[5]),w(e,a),b(f,e,null),c=!0,d||(_=[at(s,"input",l[20]),at(i,"input",l[21])],d=!0)},p(y,O){const S={};O&16777231&&(S.$$scope={dirty:O,ctx:y}),n.$set(S),O&16&&Vt(s.value)!==y[4]&&Xe(s,y[4]),O&32&&Vt(i.value)!==y[5]&&Xe(i,y[5])},i(y){c||(m(n.$$.fragment,y),m(f.$$.fragment,y),c=!0)},o(y){g(n.$$.fragment,y),g(f.$$.fragment,y),c=!1},d(y){y&&p(e),v(n),v(f),d=!1,vl(_)}}}function Qp(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zp(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xp(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function em(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tm(l){let e,n,t,r,o,s,u,i,a,f,c,d;function _(L){l[16](L)}let y={$$slots:{default:[Qp]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new le({props:y}),W.push(()=>V(e,"checked",_));function O(L){l[17](L)}let S={$$slots:{default:[Zp]},$$scope:{ctx:l}};l[1]!==void 0&&(S.checked=l[1]),r=new le({props:S}),W.push(()=>V(r,"checked",O));function P(L){l[18](L)}let R={$$slots:{default:[xp]},$$scope:{ctx:l}};l[2]!==void 0&&(R.checked=l[2]),u=new le({props:R}),W.push(()=>V(u,"checked",P));function I(L){l[19](L)}let M={$$slots:{default:[em]},$$scope:{ctx:l}};return l[3]!==void 0&&(M.checked=l[3]),f=new le({props:M}),W.push(()=>V(f,"checked",I)),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment),s=T(),h(u.$$.fragment),a=T(),h(f.$$.fragment)},m(L,N){b(e,L,N),$(L,t,N),b(r,L,N),$(L,s,N),b(u,L,N),$(L,a,N),b(f,L,N),d=!0},p(L,N){const E={};N&16777216&&(E.$$scope={dirty:N,ctx:L}),!n&&N&1&&(n=!0,E.checked=L[0],X(()=>n=!1)),e.$set(E);const A={};N&16777216&&(A.$$scope={dirty:N,ctx:L}),!o&&N&2&&(o=!0,A.checked=L[1],X(()=>o=!1)),r.$set(A);const j={};N&16777216&&(j.$$scope={dirty:N,ctx:L}),!i&&N&4&&(i=!0,j.checked=L[2],X(()=>i=!1)),u.$set(j);const U={};N&16777216&&(U.$$scope={dirty:N,ctx:L}),!c&&N&8&&(c=!0,U.checked=L[3],X(()=>c=!1)),f.$set(U)},i(L){d||(m(e.$$.fragment,L),m(r.$$.fragment,L),m(u.$$.fragment,L),m(f.$$.fragment,L),d=!0)},o(L){g(e.$$.fragment,L),g(r.$$.fragment,L),g(u.$$.fragment,L),g(f.$$.fragment,L),d=!1},d(L){L&&(p(t),p(s),p(a)),v(e,L),v(r,L),v(u,L),v(f,L)}}}function Zr(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=C("p"),n=k("Pedestrian location: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&z(o,r)},d(s){s&&p(e)}}}function xr(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=C("p"),n=k("Pedestrian movement: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&z(o,r)},d(s){s&&p(e)}}}function nm(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,d,_,y,O,S=el(l[23])+"",P,R,I,M,L,N=l[23].pedestrian_location&&Zr(l),E=l[23].pedestrian_movement&&xr(l);return{c(){e=C("p"),n=k("Year: "),t=C("b"),o=k(r),s=T(),u=C("p"),i=k("Severity: "),a=C("b"),c=k(f),d=T(),_=C("p"),y=k("Casualties: "),O=C("b"),P=k(S),R=T(),N&&N.c(),I=T(),E&&E.c(),M=T(),L=C("p"),L.textContent="Click to open full report in CycleStreets"},m(A,j){$(A,e,j),w(e,n),w(e,t),w(t,o),$(A,s,j),$(A,u,j),w(u,i),w(u,a),w(a,c),$(A,d,j),$(A,_,j),w(_,y),w(_,O),w(O,P),$(A,R,j),N&&N.m(A,j),$(A,I,j),E&&E.m(A,j),$(A,M,j),$(A,L,j)},p(A,j){j&8388608&&r!==(r=A[23].year+"")&&z(o,r),j&8388608&&f!==(f=A[10][A[23].severity]+"")&&z(c,f),j&8388608&&S!==(S=el(A[23])+"")&&z(P,S),A[23].pedestrian_location?N?N.p(A,j):(N=Zr(A),N.c(),N.m(I.parentNode,I)):N&&(N.d(1),N=null),A[23].pedestrian_movement?E?E.p(A,j):(E=xr(A),E.c(),E.m(M.parentNode,M)):E&&(E.d(1),E=null)},d(A){A&&(p(e),p(s),p(u),p(d),p(_),p(R),p(I),p(M),p(L)),N&&N.d(A),E&&E.d(A)}}}function rm(l){let e,n;return e=new ue({props:{$$slots:{default:[nm,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lm(l){let e,n;const t=[q(qt),{sourceLayer:qt},{paint:{"circle-color":ye(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[rm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ut({props:r}),e.$on("click",sm),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&14528?te(t,[s&0&&ae(q(qt)),s&0&&{sourceLayer:qt},s&14336&&{paint:{"circle-color":ye(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function om(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={$$slots:{right:[Kp],default:[Vp]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[6]&&Qr(l);return o=new we({props:{url:`pmtiles://${ge()}/v1/${qt}.pmtiles`,$$slots:{default:[lm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),r=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&16777216&&(d.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,d.checked=f[6],X(()=>n=!1)),e.$set(d),f[6]?a?(a.p(f,c),c&64&&m(a,1)):(a=Qr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),g(a,1,1,()=>{a=null}),pe());const _={};c&16777408&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let qt="stats19";function el(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function sm(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function im(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(U,H,D,F,B,ie){let fe=["any"];return o&&fe.push(["get","pedestrian"]),s&&fe.push(["get","cyclist"]),u&&fe.push(["get","horse_rider"]),i&&fe.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],fe]}let d={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},_={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},O=J.sequential_low_to_high[4],S=J.sequential_low_to_high[2],P=J.sequential_low_to_high[0],R=[["Fatal",O],["Serious",S],["Slight",P]];function I(U){r=U,n(6,r)}function M(U){o=U,n(0,o)}function L(U){s=U,n(1,s)}function N(U){u=U,n(2,u)}function E(U){i=U,n(3,i)}function A(){a=Vt(this.value),n(4,a)}function j(){f=Vt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,d,_,y,O,S,P,R,I,M,L,N,E,A,j]}class am extends Q{constructor(e){super(),Z(this,e,im,om,Y,{})}}function fm(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function um(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cm(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $m(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new x({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[um]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[cm]},$$scope:{ctx:l}}}),f=new Ae({}),{c(){e=C("p"),n=k("AADF (annual average daily flow) data from "),h(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),h(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=T(),i=C("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=T(),h(f.$$.fragment)},m(d,_){$(d,e,_),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(d,u,_),$(d,i,_),$(d,a,_),b(f,d,_),c=!0},p(d,_){const y={};_&64&&(y.$$scope={dirty:_,ctx:d}),t.$set(y);const O={};_&64&&(O.$$scope={dirty:_,ctx:d}),o.$set(O)},i(d){c||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),c=!0)},o(d){g(t.$$.fragment,d),g(o.$$.fragment,d),g(f.$$.fragment,d),c=!1},d(d){d&&(p(e),p(u),p(i),p(a)),v(t),v(o),v(f,d)}}}function pm(l){let e,n,t;return n=new ce({props:{$$slots:{default:[$m]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function tl(l){let e,n;return e=new He({props:{colorScale:l[1],limits:l[3]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mm(l){let e,n=l[5].location+"",t,r,o,s,u=l[5].year+"",i,a,f,c=l[5].motor_vehicles.toLocaleString()+"",d,_,y,O,S=l[5].year+"",P,R,I,M=l[5].pedal_cycles.toLocaleString()+"",L,N,E,A,j,U=l[5].method+"",H;return{c(){e=C("h2"),t=k(n),r=T(),o=C("p"),s=k("Total motor vehicles ("),i=k(u),a=k(` AADF):
        `),f=C("b"),d=k(c),_=T(),y=C("p"),O=k("Total pedal cycles ("),P=k(S),R=k(` AADF):
        `),I=C("b"),L=k(M),N=T(),E=C("p"),A=k("Count method: "),j=C("b"),H=k(U)},m(D,F){$(D,e,F),w(e,t),$(D,r,F),$(D,o,F),w(o,s),w(o,i),w(o,a),w(o,f),w(f,d),$(D,_,F),$(D,y,F),w(y,O),w(y,P),w(y,R),w(y,I),w(I,L),$(D,N,F),$(D,E,F),w(E,A),w(E,j),w(j,H)},p(D,F){F&32&&n!==(n=D[5].location+"")&&z(t,n),F&32&&u!==(u=D[5].year+"")&&z(i,u),F&32&&c!==(c=D[5].motor_vehicles.toLocaleString()+"")&&z(d,c),F&32&&S!==(S=D[5].year+"")&&z(P,S),F&32&&M!==(M=D[5].pedal_cycles.toLocaleString()+"")&&z(L,M),F&32&&U!==(U=D[5].method+"")&&z(H,U)},d(D){D&&(p(e),p(r),p(o),p(_),p(y),p(N),p(E))}}}function _m(l){let e,n;return e=new ue({props:{$$slots:{default:[mm,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gm(l){let e,n;const t=[q(Gt),{sourceLayer:Gt},{paint:{"circle-color":ye(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[_m]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ut({props:r}),e.$on("click",hm),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(Gt)),s&0&&{sourceLayer:Gt},s&6&&{paint:{"circle-color":ye(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function dm(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={$$slots:{right:[pm],default:[fm]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&tl(l);return o=new we({props:{url:`pmtiles://${ge()}/v1/${Gt}.pmtiles`,$$slots:{default:[gm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),r=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&64&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],X(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=tl(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),g(a,1,1,()=>{a=null}),pe());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Gt="vehicle_counts";function hm(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function bm(l,e,n){let t=J.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class vm extends Q{constructor(e){super(),Z(this,e,bm,dm,Y,{})}}function wm(l){let e,n,t,r,o,s,u,i;return e=new dp({}),t=new Ap({}),o=new Wp({}),u=new zp({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),r=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,r,f),b(o,a,f),$(a,s,f),b(u,a,f),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function km(l){let e,n;return e=new Je({props:{small:!0,$$slots:{default:[wm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ym(l){let e,n,t,r,o,s,u,i,a,f,c,d;return e=new Pu({}),t=new ic({}),o=new Hu({}),u=new Qu({}),a=new lp({}),c=new j$({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),r=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment),i=T(),h(a.$$.fragment),f=T(),h(c.$$.fragment)},m(_,y){b(e,_,y),$(_,n,y),b(t,_,y),$(_,r,y),b(o,_,y),$(_,s,y),b(u,_,y),$(_,i,y),b(a,_,y),$(_,f,y),b(c,_,y),d=!0},i(_){d||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(o.$$.fragment,_),m(u.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),d=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),g(u.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),d=!1},d(_){_&&(p(n),p(r),p(s),p(i),p(f)),v(e,_),v(t,_),v(o,_),v(u,_),v(a,_),v(c,_)}}}function Sm(l){let e,n;return e=new Je({props:{small:!0,$$slots:{default:[ym]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cm(l){let e,n,t,r,o,s;return e=new hu({}),t=new s$({}),o=new g$({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),r=T(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function Tm(l){let e,n,t,r,o,s,u,i,a,f;return e=new Af({}),t=new lu({}),o=new Ea({}),u=new rf({}),a=new hf({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),r=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment),i=T(),h(a.$$.fragment)},m(c,d){b(e,c,d),$(c,n,d),b(t,c,d),$(c,r,d),b(o,c,d),$(c,s,d),b(u,c,d),$(c,i,d),b(a,c,d),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Om(l){let e,n;return e=new Je({props:{small:!0,$$slots:{default:[Tm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lm(l){let e,n,t,r;return e=new Sa({}),t=new Va({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Am(l){let e,n;return e=new Je({props:{small:!0,$$slots:{default:[Lm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Im(l){let e,n,t,r,o,s;return e=new Zc({}),t=new dc({}),o=new qc({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),r=T(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function Pm(l){let e,n,t,r,o,s,u,i,a=bn()=="Private (development)",f,c,d,_,y;e=new vm({}),t=new am({}),o=new Pc({}),u=new X$({});let O=a&&Im();return c=new jf({}),_=new Xf({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),r=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment),i=T(),O&&O.c(),f=T(),h(c.$$.fragment),d=T(),h(_.$$.fragment)},m(S,P){b(e,S,P),$(S,n,P),b(t,S,P),$(S,r,P),b(o,S,P),$(S,s,P),b(u,S,P),$(S,i,P),O&&O.m(S,P),$(S,f,P),b(c,S,P),$(S,d,P),b(_,S,P),y=!0},p:ne,i(S){y||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(o.$$.fragment,S),m(u.$$.fragment,S),m(O),m(c.$$.fragment,S),m(_.$$.fragment,S),y=!0)},o(S){g(e.$$.fragment,S),g(t.$$.fragment,S),g(o.$$.fragment,S),g(u.$$.fragment,S),g(O),g(c.$$.fragment,S),g(_.$$.fragment,S),y=!1},d(S){S&&(p(n),p(r),p(s),p(i),p(f),p(d)),v(e,S),v(t,S),v(o,S),v(u,S),O&&O.d(S),v(c,S),v(_,S)}}}function Mm(l){let e,n;return e=new Je({props:{small:!0,$$slots:{default:[Pm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nm(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new no({props:u}),W.push(()=>V(e,"enabled",s)),r=new ao({}),{c(){h(e.$$.fragment),t=T(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],X(()=>n=!1)),e.$set(f)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Fm(l){let e,n,t,r,o,s,u,i,a,f,c,d,_,y,O,S,P,R;return e=new T$({}),t=new je({props:{label:"Trip generators",$$slots:{default:[km]},$$scope:{ctx:l}}}),o=new je({props:{label:"Existing infrastructure",$$slots:{default:[Sm]},$$scope:{ctx:l}}}),u=new je({props:{label:"Public transit",$$slots:{default:[Cm]},$$scope:{ctx:l}}}),a=new je({props:{label:"Boundaries",$$slots:{default:[Om]},$$scope:{ctx:l}}}),c=new je({props:{label:"Census",$$slots:{default:[Am]},$$scope:{ctx:l}}}),_=new je({props:{label:"Other",$$slots:{default:[Mm]},$$scope:{ctx:l}}}),O=new je({props:{label:"Tools",$$slots:{default:[Nm]},$$scope:{ctx:l}}}),P=new to({props:{disabled:!l[1]}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),r=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment),i=T(),h(a.$$.fragment),f=T(),h(c.$$.fragment),d=T(),h(_.$$.fragment),y=T(),h(O.$$.fragment),S=T(),h(P.$$.fragment)},m(I,M){b(e,I,M),$(I,n,M),b(t,I,M),$(I,r,M),b(o,I,M),$(I,s,M),b(u,I,M),$(I,i,M),b(a,I,M),$(I,f,M),b(c,I,M),$(I,d,M),b(_,I,M),$(I,y,M),b(O,I,M),$(I,S,M),b(P,I,M),R=!0},p(I,M){const L={};M&16&&(L.$$scope={dirty:M,ctx:I}),t.$set(L);const N={};M&16&&(N.$$scope={dirty:M,ctx:I}),o.$set(N);const E={};M&16&&(E.$$scope={dirty:M,ctx:I}),u.$set(E);const A={};M&16&&(A.$$scope={dirty:M,ctx:I}),a.$set(A);const j={};M&16&&(j.$$scope={dirty:M,ctx:I}),c.$set(j);const U={};M&16&&(U.$$scope={dirty:M,ctx:I}),_.$set(U);const H={};M&17&&(H.$$scope={dirty:M,ctx:I}),O.$set(H);const D={};M&2&&(D.disabled=!I[1]),P.$set(D)},i(I){R||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(o.$$.fragment,I),m(u.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(_.$$.fragment,I),m(O.$$.fragment,I),m(P.$$.fragment,I),R=!0)},o(I){g(e.$$.fragment,I),g(t.$$.fragment,I),g(o.$$.fragment,I),g(u.$$.fragment,I),g(a.$$.fragment,I),g(c.$$.fragment,I),g(_.$$.fragment,I),g(O.$$.fragment,I),g(P.$$.fragment,I),R=!1},d(I){I&&(p(n),p(r),p(s),p(i),p(f),p(d),p(y),p(S)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I),v(c,I),v(_,I),v(O,I),v(P,I)}}}function Em(l){let e,n;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ze({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Dm(l){let e,n,t,r;return e=new je({props:{label:"Layers",open:!0,$$slots:{default:[Fm]},$$scope:{ctx:l}}}),t=new vt({props:{data:l[2],$$slots:{default:[Em]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function jm(l,e,n){let t,r;Ce(l,$r,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&$r.set(!t)},[t,r,o,s]}class Rm extends Q{constructor(e){super(),Z(this,e,jm,Dm,Y,{})}}function nl(l){let e;return{c(){e=C("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bm(l){let e,n=l[0]&&nl();return{c(){n&&n.c(),e=Be()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=nl(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(t){t&&p(e),n&&n.d(t)}}}function zm(l,e,n){let{loadFile:t}=e,r=!0;return Pn(async()=>{let s=await(await fetch(`${fn()}/v1/all_schemes_output.geojson.gz`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class Hm extends Q{constructor(e){super(),Z(this,e,zm,Bm,Y,{loadFile:1})}}function rl(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=C("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function qm(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gm(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Um(l){let e,n,t,r;return e=new ht({props:{$$slots:{default:[qm]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new ht({props:{$$slots:{default:[Gm]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Wm(l){var j,U,H,D;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((j=l[0].browse)==null?void 0:j.authority_or_region)+"",a,f,c,d,_=((U=l[0].browse)==null?void 0:U.capital_scheme_id)+"",y,O,S,P,R=((H=l[0].browse)==null?void 0:H.funding_programme)+"",I,M,L,N,E,A=((D=l[0].browse)==null?void 0:D.current_milestone)&&rl(l);return N=new ro({props:{$$slots:{default:[Um]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("Scheme reference: "),r=k(t),o=T(),s=C("p"),u=k("Authority or region: "),a=k(i),f=T(),c=C("p"),d=k("Capital scheme ID: "),y=k(_),O=T(),S=C("p"),P=k("Funding programme: "),I=k(R),M=T(),A&&A.c(),L=T(),h(N.$$.fragment)},m(F,B){$(F,e,B),w(e,n),w(e,r),$(F,o,B),$(F,s,B),w(s,u),w(s,a),$(F,f,B),$(F,c,B),w(c,d),w(c,y),$(F,O,B),$(F,S,B),w(S,P),w(S,I),$(F,M,B),A&&A.m(F,B),$(F,L,B),b(N,F,B),E=!0},p(F,B){var fe,de,ke,he;(!E||B&1)&&t!==(t=F[0].scheme_reference+"")&&z(r,t),(!E||B&1)&&i!==(i=((fe=F[0].browse)==null?void 0:fe.authority_or_region)+"")&&z(a,i),(!E||B&1)&&_!==(_=((de=F[0].browse)==null?void 0:de.capital_scheme_id)+"")&&z(y,_),(!E||B&1)&&R!==(R=((ke=F[0].browse)==null?void 0:ke.funding_programme)+"")&&z(I,R),(he=F[0].browse)!=null&&he.current_milestone?A?A.p(F,B):(A=rl(F),A.c(),A.m(L.parentNode,L)):A&&(A.d(1),A=null);const ie={};B&32&&(ie.$$scope={dirty:B,ctx:F}),N.$set(ie)},i(F){E||(m(N.$$.fragment,F),E=!0)},o(F){g(N.$$.fragment,F),E=!1},d(F){F&&(p(e),p(o),p(s),p(f),p(c),p(O),p(S),p(M),p(L)),A&&A.d(F),v(N,F)}}}function Vm(l){let e,n;return e=new je({props:{label:`${l[0].scheme_name}`,$$slots:{default:[Wm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xm(l,e,n){let t,r;Ce(l,bt,i=>n(3,t=i)),Ce(l,In,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Jl(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(d=>d.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";Kl(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class Ym extends Q{constructor(e){super(),Z(this,e,Xm,Vm,Y,{scheme:0})}}function ll(l){let e,n,t=Rn(l[0].length_meters)+"",r;return{c(){e=C("p"),n=k("Length: "),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(e,r)},p(o,s){s&1&&t!==(t=Rn(o[0].length_meters)+"")&&z(r,t)},d(o){o&&p(e)}}}function ol(l){let e,n=st(l[0].description,l[2])+"";return{c(){e=C("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=st(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function sl(l){var o;let e,n,t=((o=l[1].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=C("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function Jm(l){var Pe,Ie,Me,De;let e,n,t,r=st(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,d,_,y,O,S,P=st(l[1].scheme_name??"",l[3])+"",R,I,M=st(l[0].scheme_reference,l[3])+"",L,N,E,A,j=((Pe=l[1].browse)==null?void 0:Pe.authority_or_region)+"",U,H,D,F,B=((Ie=l[1].browse)==null?void 0:Ie.capital_scheme_id)+"",ie,fe,de,ke,he=((Me=l[1].browse)==null?void 0:Me.funding_programme)+"",se,Le,me=l[0].length_meters&&ll(l),be=l[0].description&&ol(l),re=((De=l[1].browse)==null?void 0:De.current_milestone)&&sl(l);return{c(){e=C("div"),n=C("h2"),t=new Ut(!1),o=k(" ("),u=k(s),i=k(")"),a=T(),me&&me.c(),f=T(),be&&be.c(),c=T(),d=C("hr"),_=T(),y=C("p"),O=k("Part of scheme: "),S=new Ut(!1),R=k(" ("),I=new Ut(!1),L=k(")"),N=T(),E=C("p"),A=k("Authority or region: "),U=k(j),H=T(),D=C("p"),F=k("Capital scheme ID: "),ie=k(B),fe=T(),de=C("p"),ke=k("Funding programme: "),se=k(he),Le=T(),re&&re.c(),t.a=o,S.a=R,I.a=L,Te(e,"max-width","30vw")},m(oe,_e){$(oe,e,_e),w(e,n),t.m(r,n),w(n,o),w(n,u),w(n,i),w(e,a),me&&me.m(e,null),w(e,f),be&&be.m(e,null),w(e,c),w(e,d),w(e,_),w(e,y),w(y,O),S.m(P,y),w(y,R),I.m(M,y),w(y,L),w(e,N),w(e,E),w(E,A),w(E,U),w(e,H),w(e,D),w(D,F),w(D,ie),w(e,fe),w(e,de),w(de,ke),w(de,se),w(e,Le),re&&re.m(e,null)},p(oe,[_e]){var wt,We,En,Dn;_e&5&&r!==(r=st(oe[0].name,oe[2])+"")&&t.p(r),_e&1&&s!==(s=oe[0].intervention_type+"")&&z(u,s),oe[0].length_meters?me?me.p(oe,_e):(me=ll(oe),me.c(),me.m(e,f)):me&&(me.d(1),me=null),oe[0].description?be?be.p(oe,_e):(be=ol(oe),be.c(),be.m(e,c)):be&&(be.d(1),be=null),_e&10&&P!==(P=st(oe[1].scheme_name??"",oe[3])+"")&&S.p(P),_e&9&&M!==(M=st(oe[0].scheme_reference,oe[3])+"")&&I.p(M),_e&2&&j!==(j=((wt=oe[1].browse)==null?void 0:wt.authority_or_region)+"")&&z(U,j),_e&2&&B!==(B=((We=oe[1].browse)==null?void 0:We.capital_scheme_id)+"")&&z(ie,B),_e&2&&he!==(he=((En=oe[1].browse)==null?void 0:En.funding_programme)+"")&&z(se,he),(Dn=oe[1].browse)!=null&&Dn.current_milestone?re?re.p(oe,_e):(re=sl(oe),re.c(),re.m(e,null)):re&&(re.d(1),re=null)},i:ne,o:ne,d(oe){oe&&p(e),me&&me.d(),be&&be.d(),re&&re.d()}}}function st(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function Km(l,e,n){let t,r,o,s;Ce(l,an,i=>n(4,r=i)),Ce(l,yt,i=>n(2,o=i)),Ce(l,St,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class Fn extends Q{constructor(e){super(),Z(this,e,Km,Jm,Y,{props:0})}}function Qm(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Zm(l){let e,n;return e=new Fn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xm(l){let e,n,t,r;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[Qm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Zm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function e_(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function t_(l){let e,n;return e=new Fn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function n_(l){let e,n,t,r;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[e_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[t_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function r_(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function l_(l){let e,n;return e=new Fn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function o_(l){let e,n,t,r;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[r_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[l_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function s_(l){let e,n,t,r,o,s,u,i,a,f;const c=[q("interventions-points"),{filter:["all",Bn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":qn,"circle-opacity":K(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let d={$$slots:{default:[xm]},$$scope:{ctx:l}};for(let L=0;L<c.length;L+=1)d=ee(d,c[L]);e=new ut({props:d});const _=[q("interventions-lines"),{filter:["all",zn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":kt,"line-opacity":K(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[n_]},$$scope:{ctx:l}};for(let L=0;L<_.length;L+=1)y=ee(y,_[L]);t=new Se({props:y});const O=[q("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*kt,"circle-opacity":0,"circle-stroke-color":lt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let S={};for(let L=0;L<O.length;L+=1)S=ee(S,O[L]);o=new ut({props:S});const P=[q("interventions-polygons"),{filter:["all",nn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":K(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let R={$$slots:{default:[o_]},$$scope:{ctx:l}};for(let L=0;L<P.length;L+=1)R=ee(R,P[L]);u=new ze({props:R});const I=[q("interventions-polygons-outlines"),{filter:["all",nn,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*kt}},{layout:{visibility:l[0]?"visible":"none"}}];let M={};for(let L=0;L<I.length;L+=1)M=ee(M,I[L]);return a=new Se({props:M}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),r=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment),i=T(),h(a.$$.fragment)},m(L,N){b(e,L,N),$(L,n,N),b(t,L,N),$(L,r,N),b(o,L,N),$(L,s,N),b(u,L,N),$(L,i,N),b(a,L,N),f=!0},p(L,N){const E=N&29?te(c,[c[0],N&24&&{filter:["all",Bn,L[3],L[4]]},c[2],c[3],N&4&&{paint:{"circle-color":L[2],"circle-radius":qn,"circle-opacity":K(1,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};N&128&&(E.$$scope={dirty:N,ctx:L}),e.$set(E);const A=N&13?te(_,[_[0],N&8&&{filter:["all",zn,L[3]]},_[2],_[3],N&4&&{paint:{"line-color":L[2],"line-width":kt,"line-opacity":K(1,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},_[6]]):{};N&128&&(A.$$scope={dirty:N,ctx:L}),t.$set(A);const j=N&1?te(O,[O[0],O[1],O[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(j);const U=N&13?te(P,[P[0],N&8&&{filter:["all",nn,L[3]]},P[2],P[3],N&4&&{paint:{"fill-color":L[2],"fill-opacity":K(.2,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},P[6]]):{};N&128&&(U.$$scope={dirty:N,ctx:L}),u.$set(U);const H=N&13?te(I,[I[0],N&8&&{filter:["all",nn,L[3]]},N&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*kt}},N&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(H)},i(L){f||(m(e.$$.fragment,L),m(t.$$.fragment,L),m(o.$$.fragment,L),m(u.$$.fragment,L),m(a.$$.fragment,L),f=!0)},o(L){g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(u.$$.fragment,L),g(a.$$.fragment,L),f=!1},d(L){L&&(p(n),p(r),p(s),p(i)),v(e,L),v(t,L),v(o,L),v(u,L),v(a,L)}}}function i_(l){let e,n;return e=new vt({props:{data:l[1],$$slots:{default:[s_]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function a_(l,e,n){let t,r;Ce(l,bt,a=>n(5,r=a));let{showSchemes:o}=e,[s]=On();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=Ql(r))},[o,t,s,u,i,r]}class f_ extends Q{constructor(e){super(),Z(this,e,a_,i_,Y,{showSchemes:0})}}function il(l,e,n){const t=l.slice();return t[13]=e[n],t}function al(l,e,n){const t=l.slice();return t[16]=e[n],t}function u_(l){let e,n;return e=new Hm({props:{loadFile:l[7]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fl(l){let e,n,t,r,o;e=new ht({props:{$$slots:{default:[c_]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[$_]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new ml({props:u}),W.push(()=>V(t,"open",s)),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],X(()=>r=!1)),t.$set(c)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function c_(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ul(l){let e,n,t=l[16]+"",r;return{c(){e=C("li"),n=C("p"),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&z(r,t)},d(o){o&&p(e)}}}function $_(l){let e,n,t,r,o=Re(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=ul(al(l,o,u));return{c(){e=C("div"),n=C("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=T(),r=C("ul");for(let u=0;u<s.length;u+=1)s[u].c();G(e,"class","govuk-prose")},m(u,i){$(u,e,i),w(e,n),w(e,t),w(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=Re(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=al(u,o,a);s[a]?s[a].p(f,i):(s[a]=ul(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),dt(s,u)}}}function cl(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new Xi({props:u}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],X(()=>t=!1)),e.$set(f)},i(i){r||(m(e.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),r=!1},d(i){v(e,i)}}}function $l(l){let e,n;return e=new Ym({props:{scheme:l[13]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&$l(l);return{c(){r&&r.c(),n=Be()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&m(r,1)):(r=$l(o),r.c(),m(r,1),r.m(n.parentNode,n)):r&&($e(),g(r,1,1,()=>{r=null}),pe())},i(o){t||(m(r),t=!0)},o(o){g(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function p_(l){let e,n,t,r,o,s,u,i,a,f,c=bn()=="Private (development)",d,_,y,O,S,P,R,I,M;o=new io({props:{boundaryGeojson:l[4]}}),a=new Zl({});let L=c&&u_(l),N=l[4].notes&&fl(l);y=new oo({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),S=new kl({props:{errorMessage:l[0]}});let E=l[6].size>0&&cl(l),A=Re(l[6].values()),j=[];for(let H=0;H<A.length;H+=1)j[H]=pl(il(l,A,H));const U=H=>g(j[H],1,1,()=>{j[H]=null});return{c(){e=C("div"),n=C("div"),t=C("h1"),t.textContent="Browse schemes",r=T(),h(o.$$.fragment),s=T(),u=C("p"),u.textContent=`App version: ${bn()}`,i=T(),h(a.$$.fragment),f=T(),L&&L.c(),d=T(),N&&N.c(),_=T(),h(y.$$.fragment),O=T(),h(S.$$.fragment),P=T(),E&&E.c(),R=T(),I=C("ul");for(let H=0;H<j.length;H+=1)j[H].c();Te(n,"display","flex"),Te(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(H,D){$(H,e,D),w(e,n),w(n,t),w(n,r),b(o,n,null),w(e,s),w(e,u),w(e,i),b(a,e,null),w(e,f),L&&L.m(e,null),w(e,d),N&&N.m(e,null),w(e,_),b(y,e,null),w(e,O),b(S,e,null),w(e,P),E&&E.m(e,null),w(e,R),w(e,I);for(let F=0;F<j.length;F+=1)j[F]&&j[F].m(I,null);M=!0},p(H,D){const F={};D&16&&(F.boundaryGeojson=H[4]),o.$set(F),c&&L.p(H,D),H[4].notes?N?(N.p(H,D),D&16&&m(N,1)):(N=fl(H),N.c(),m(N,1),N.m(e,_)):N&&($e(),g(N,1,1,()=>{N=null}),pe());const B={};if(D&1&&(B.errorMessage=H[0]),S.$set(B),H[6].size>0?E?(E.p(H,D),D&64&&m(E,1)):(E=cl(H),E.c(),m(E,1),E.m(e,R)):E&&($e(),g(E,1,1,()=>{E=null}),pe()),D&66){A=Re(H[6].values());let ie;for(ie=0;ie<A.length;ie+=1){const fe=il(H,A,ie);j[ie]?(j[ie].p(fe,D),m(j[ie],1)):(j[ie]=pl(fe),j[ie].c(),m(j[ie],1),j[ie].m(I,null))}for($e(),ie=A.length;ie<j.length;ie+=1)U(ie);pe()}},i(H){if(!M){m(o.$$.fragment,H),m(a.$$.fragment,H),m(L),m(N),m(y.$$.fragment,H),m(S.$$.fragment,H),m(E);for(let D=0;D<A.length;D+=1)m(j[D]);M=!0}},o(H){g(o.$$.fragment,H),g(a.$$.fragment,H),g(L),g(N),g(y.$$.fragment,H),g(S.$$.fragment,H),g(E),j=j.filter(Boolean);for(let D=0;D<j.length;D+=1)g(j[D]);M=!1},d(H){H&&p(e),v(o),v(a),L&&L.d(),N&&N.d(),v(y),v(S),E&&E.d(),dt(j,H)}}}function m_(l){let e,n,t,r,o,s,u;return e=new lo({}),t=new f_({props:{showSchemes:l[2]}}),s=new Rm({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),r=T(),o=C("div"),h(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),$(i,o,a),b(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),v(s)}}}function __(l){let e,n,t;return n=new xl({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[m_]},$$scope:{ctx:l}}}),{c(){e=C("div"),h(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function g_(l){let e,n;return e=new fo({props:{$$slots:{main:[__],sidebar:[p_]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function d_(l,e,n){let t,r,o;Ce(l,bt,S=>n(4,t=S)),Ce(l,Hn,S=>n(5,r=S)),Ce(l,an,S=>n(6,o=S)),Pn(()=>{eo()});const s=new URLSearchParams(window.location.search);Hn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(S){try{bt.set(JSON.parse(S)),an.set(Oi(t)),n(0,u="")}catch(P){n(0,u=`The file you loaded is broken: ${P}`)}}const d=()=>n(3,f=!0);function _(S){f=S,n(3,f)}function y(S){i=S,n(1,i)}function O(S){a=S,n(2,a)}return[u,i,a,f,t,r,o,c,d,_,y,O]}class h_ extends Q{constructor(e){super(),Z(this,e,d_,g_,Y,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new h_({target:document.getElementById("app")});
