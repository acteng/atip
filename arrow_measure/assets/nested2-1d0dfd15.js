import{S as Y,i as K,s as J,e as T,j as G,ao as Se,k as $,a7 as ne,p,aU as Xl,b as W,c as V,f as O,h as b,m as v,x as Ze,n as X,t as g,o as d,q as w,O as dt,T as ht,U as bt,V as vt,b2 as Wn,l as h,ab as je,_ as ce,$ as $e,aX as wt,v as k,J as B,Z as Ee,a0 as Dn,a1 as Jl,r as Ae,a2 as Yl,a3 as Kl,a4 as ut,a5 as Zl,a6 as Ql,b3 as Co,Y as St,b4 as Vn,b5 as To,G as yt,aO as kn,aF as yn,P as x,I as Oe,a as ct,aT as Oo,av as $t,aj as En,an as tn,u as jn,F as Sn,w as Ye,b1 as ee,b6 as he,b7 as Le,H as Q,D as qe,W as te,b8 as ae,ag as an,N as xl,aZ as Qt,b9 as cn,R as eo,ba as Kt,E as to,bb as Lo,bc as Ao,g as Cn,al as Io,C as No,a$ as Xn,ap as Po,aq as Jn,ar as Yn,as as ln,b0 as Kn,L as Mo,d as Fo,M as Do,z as Eo}from"./index-aa575436.js";import{l as q,d as Ke,a as jo,f as Zn,h as Re,g as Ro,M as Bo,m as _t,i as xe,j as le,R as zo,C as pt,n as Ho,S as qo,B as Go,c as Qn,b as Lt,Z as Uo,G as Wo}from"./ZoomOutMap-970ac257.js";import{P as fe}from"./Popup-2f846fae.js";function Vo(l){let e;return{c(){e=T("span"),G(e,"class","svelte-kzgqtg"),Se(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Se(e,"background",n[0])},i:ne,o:ne,d(n){n&&p(e)}}}function Xo(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Pe extends Y{constructor(e){super(),K(this,e,Xo,Vo,J,{color:0})}}const Jo="/atip/arrow_measure/assets/help-d011708a.svg";function Yo(l){let e,n;const t=l[1].default,r=dt(t,l,l[4],null);return{c(){e=T("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&ht(r,t,o,o[4],n?vt(t,o[4],s,null):bt(o[4]),null)},i(o){n||(g(r,o),n=!0)},o(o){d(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function Ko(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[Yo]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new Xl({props:a}),W.push(()=>V(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${Jo}" title="Help" alt="Help"/>`,n=O(),b(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),v(t,f,c),o=!0,s||(u=Ze(e,"click",l[2]),s=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,_.open=f[0],X(()=>r=!1)),t.$set(_)},i(f){o||(g(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),w(t,f),s=!1,u()}}}function Zo(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class me extends Y{constructor(e){super(),K(this,e,Zo,Ko,J,{})}}const Qo=l=>({}),xn=l=>({}),xo=l=>({}),er=l=>({});function es(l){let e,n,t,r,o,s,u,i,a,f,c;const _=l[4].sidebar,m=dt(_,l,l[3],er),y=l[4].main,C=dt(y,l,l[3],xn);return{c(){e=T("div"),n=T("aside"),t=T("div"),m&&m.c(),r=O(),o=T("button"),o.textContent="â†’",u=O(),i=T("main"),C&&C.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(o,"type","button"),G(o,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(n,"class",s=Wn(l[1]?"":"collapsed")+" svelte-1n0etgd"),Se(n,"--sidebarWidth",l[0]),G(i,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(S,A){$(S,e,A),h(e,n),h(n,t),m&&m.m(t,null),h(n,r),h(n,o),h(e,u),h(e,i),C&&C.m(i,null),a=!0,f||(c=Ze(o,"click",l[2]),f=!0)},p(S,[A]){m&&m.p&&(!a||A&8)&&ht(m,_,S,S[3],a?vt(_,S[3],A,xo):bt(S[3]),er),(!a||A&2&&s!==(s=Wn(S[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(n,"class",s),(!a||A&1)&&Se(n,"--sidebarWidth",S[0]),C&&C.p&&(!a||A&8)&&ht(C,y,S,S[3],a?vt(y,S[3],A,Qo):bt(S[3]),xn)},i(S){a||(g(m,S),g(C,S),a=!0)},o(S){d(m,S),d(C,S),a=!1},d(S){S&&p(e),m&&m.d(S),C&&C.d(S),f=!1,c()}}}function ts(l,e,n){let{$$slots:t={},$$scope:r}=e,{sidebarWidth:o="25rem"}=e,s=!0;function u(){n(1,s=!s)}return l.$$set=i=>{"sidebarWidth"in i&&n(0,o=i.sidebarWidth),"$$scope"in i&&n(3,r=i.$$scope)},[o,s,u,r,t]}class ns extends Y{constructor(e){super(),K(this,e,ts,es,J,{sidebarWidth:0})}}function tr(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function nr(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Pe({props:{color:l[2]}}),{c(){e=T("li"),b(n.$$.fragment),t=O(),o=k(r),s=O()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&B(o,r)},i(i){u||(g(n.$$.fragment,i),u=!0)},o(i){d(n.$$.fragment,i),u=!1},d(i){i&&p(e),w(n)}}}function rs(l){let e,n,t=je(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=nr(tr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){e=T("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=je(s[0]);let i;for(i=0;i<t.length;i+=1){const a=tr(s,t,i);r[i]?(r[i].p(a,u),g(r[i],1)):(r[i]=nr(a),r[i].c(),g(r[i],1),r[i].m(e,null))}for(ce(),i=t.length;i<r.length;i+=1)o(i);$e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)g(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),wt(r,s)}}}function ls(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class Rn extends Y{constructor(e){super(),K(this,e,ls,rs,J,{rows:0})}}function rr(l){let e=l[0],n,t,r=lr(l);return{c(){r.c(),n=Ee()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?(ce(),d(r,1,1,ne),$e(),r=lr(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function lr(l){let e;const n=l[10].default,t=dt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&ht(t,n,r,r[9],e?vt(n,r[9],o,null):bt(r[9]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function os(l){let e,n,t=l[0]&&rr(l);return{c(){t&&t.c(),e=Ee()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=rr(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function ss(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Dn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=Jl();Ae(l,f,y=>n(8,r=y)),Ae(l,c,y=>n(0,t=y));let _,m=!0;return Yl(()=>{t&&_&&r&&(Kl(f,t,_),ut(c,t=null,t),n(6,_=void 0))}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(ut(c,t=u,t),Zl(r,t,Ql({type:"raster",tiles:i,tileSize:a}),y=>r&&y===t,()=>{t&&(n(6,_=r==null?void 0:r.getSource(t)),n(7,m=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,_=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&_&&(m?n(7,m=!1):_.setTiles(i))},[t,f,c,u,i,a,_,m,r,s,o]}class is extends Y{constructor(e){super(),K(this,e,ss,os,J,{id:3,tiles:4,tileSize:5})}}function as(l){let e;const n=l[16].default,t=dt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&ht(t,n,r,r[24],e?vt(n,r[24],o,null):bt(r[24]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function fs(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[as]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Co({props:o}),W.push(()=>V(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function us(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Dn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:A=!1}=e,{hovered:R=null}=e,{eventsIfTopMost:I=!1}=e,{interactive:P=!0}=e;function L(E){R=E,n(0,R)}function M(E){St.call(this,l,E)}function D(E){St.call(this,l,E)}function N(E){St.call(this,l,E)}function j(E){St.call(this,l,E)}function U(E){St.call(this,l,E)}function H(E){St.call(this,l,E)}return l.$$set=E=>{"id"in E&&n(1,o=E.id),"source"in E&&n(2,s=E.source),"sourceLayer"in E&&n(3,u=E.sourceLayer),"beforeId"in E&&n(4,i=E.beforeId),"beforeLayerType"in E&&n(5,a=E.beforeLayerType),"paint"in E&&n(6,f=E.paint),"layout"in E&&n(7,c=E.layout),"filter"in E&&n(8,_=E.filter),"applyToClusters"in E&&n(9,m=E.applyToClusters),"minzoom"in E&&n(10,y=E.minzoom),"maxzoom"in E&&n(11,C=E.maxzoom),"hoverCursor"in E&&n(12,S=E.hoverCursor),"manageHoverState"in E&&n(13,A=E.manageHoverState),"hovered"in E&&n(0,R=E.hovered),"eventsIfTopMost"in E&&n(14,I=E.eventsIfTopMost),"interactive"in E&&n(15,P=E.interactive),"$$scope"in E&&n(24,r=E.$$scope)},[R,o,s,u,i,a,f,c,_,m,y,C,S,A,I,P,t,L,M,D,N,j,U,H,r]}class $n extends Y{constructor(e){super(),K(this,e,us,fs,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function or(l){let e=l[0],n,t,r=sr(l);return{c(){r.c(),n=Ee()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?(ce(),d(r,1,1,ne),$e(),r=sr(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function sr(l){let e;const n=l[9].default,t=dt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&ht(t,n,r,r[8],e?vt(n,r[8],o,null):bt(r[8]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function cs(l){let e,n,t=l[0]&&or(l);return{c(){t&&t.c(),e=Ee()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=or(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function $s(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Dn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!Vn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new To;Vn.addProtocol("pmtiles",y.tile)}const{map:c,self:_}=Jl();Ae(l,c,y=>n(7,r=y)),Ae(l,_,y=>n(0,t=y));let m;return Yl(()=>{t&&r&&(Kl(c,t,m),ut(_,t=null,t),m=void 0)}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(ut(_,t=u,t),Zl(r,t,Ql({type:"vector",url:i,tiles:a,promoteId:f}),y=>r&&y===t,()=>{t&&(m=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{m=r==null?void 0:r.getSource(u)}))},[t,c,_,u,i,a,f,r,s,o]}class ke extends Y{constructor(e){super(),K(this,e,$s,cs,J,{id:3,url:4,tiles:5,promoteId:6})}}function ir(l,e,n){const t=l.slice();return t[12]=e[n],t[13]=e,t[14]=n,t}function ps(l){let e,n,t;return n=new ct({props:{$$slots:{default:[_s]},$$scope:{ctx:l}}}),n.$on("click",l[10]),{c(){e=T("div"),b(n.$$.fragment)},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32768&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ms(l){let e,n,t,r,o,s,u,i,a,f;n=new ct({props:{$$slots:{default:[gs]},$$scope:{ctx:l}}}),n.$on("click",l[4]);let c=l[2]&&ar(l);o=new Re({props:{label:"Help",$$slots:{default:[ds]},$$scope:{ctx:l}}}),u=new Ro({}),u.$on("click",l[3]);let _=je(l[7](l[0])),m=[];for(let C=0;C<_.length;C+=1)m[C]=fr(ir(l,_,C));const y=C=>d(m[C],1,1,()=>{m[C]=null});return{c(){e=T("div"),b(n.$$.fragment),t=O(),c&&c.c(),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O();for(let C=0;C<m.length;C+=1)m[C].c();a=Ee()},m(C,S){$(C,e,S),v(n,e,null),$(C,t,S),c&&c.m(C,S),$(C,r,S),v(o,C,S),$(C,s,S),v(u,C,S),$(C,i,S);for(let A=0;A<m.length;A+=1)m[A]&&m[A].m(C,S);$(C,a,S),f=!0},p(C,S){const A={};S&32768&&(A.$$scope={dirty:S,ctx:C}),n.$set(A),C[2]?c?c.p(C,S):(c=ar(C),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null);const R={};if(S&32768&&(R.$$scope={dirty:S,ctx:C}),o.$set(R),S&193){_=je(C[7](C[0]));let I;for(I=0;I<_.length;I+=1){const P=ir(C,_,I);m[I]?(m[I].p(P,S),g(m[I],1)):(m[I]=fr(P),m[I].c(),g(m[I],1),m[I].m(a.parentNode,a))}for(ce(),I=_.length;I<m.length;I+=1)y(I);$e()}},i(C){if(!f){g(n.$$.fragment,C),g(o.$$.fragment,C),g(u.$$.fragment,C);for(let S=0;S<_.length;S+=1)g(m[S]);f=!0}},o(C){d(n.$$.fragment,C),d(o.$$.fragment,C),d(u.$$.fragment,C),m=m.filter(Boolean);for(let S=0;S<m.length;S+=1)d(m[S]);f=!1},d(C){C&&(p(e),p(t),p(r),p(s),p(i),p(a)),w(n),c&&c.d(C),w(o,C),w(u,C),wt(m,C)}}}function _s(l){let e;return{c(){e=k("Measure lines")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gs(l){let e;return{c(){e=k("Stop measuring")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ar(l){let e,n,t=l[2].toFixed(2)+"",r,o;return{c(){e=T("p"),n=k("Length: "),r=k(t),o=k(" meters")},m(s,u){$(s,e,u),h(e,n),h(e,r),h(e,o)},p(s,u){u&4&&t!==(t=s[2].toFixed(2)+"")&&B(r,t)},d(s){s&&p(e)}}}function ds(l){let e;return{c(){e=T("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){$(n,e,t)},p:ne,d(n){n&&p(e)}}}function hs(l){let e;return{c(){e=T("span"),e.textContent="â†‘",Se(e,"font-size","50px")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bs(l){let e;return{c(){e=T("span"),G(e,"class","dot svelte-1tzt432")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vs(l){let e;function n(o,s){return o[12]==null?bs:hs}let t=n(l),r=t(l);return{c(){r.c(),e=O()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function fr(l){let e,n,t;function r(u){l[8](u,l[14])}function o(){return l[9](l[14])}let s={draggable:!0,rotation:l[12]??0,$$slots:{default:[vs]},$$scope:{ctx:l}};return l[0][l[14]]!==void 0&&(s.lngLat=l[0][l[14]]),e=new Bo({props:s}),W.push(()=>V(e,"lngLat",r)),e.$on("click",o),{c(){b(e.$$.fragment)},m(u,i){v(e,u,i),t=!0},p(u,i){l=u;const a={};i&1&&(a.rotation=l[12]??0),i&32769&&(a.$$scope={dirty:i,ctx:l}),!n&&i&1&&(n=!0,a.lngLat=l[0][l[14]],X(()=>n=!1)),e.$set(a)},i(u){t||(g(e.$$.fragment,u),t=!0)},o(u){d(e.$$.fragment,u),t=!1},d(u){w(e,u)}}}function ws(l){let e,n;const t=[q("measurement-line"),{paint:{"line-color":Ke.measuringLine,"line-width":5}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u={};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ks(l){let e,n,t,r,o,s,u;const i=[ms,ps],a=[];function f(c,_){return c[1]?0:1}return e=f(l),n=a[e]=i[e](l),r=new yt({props:{data:l[0].length<2?kn():yn(l[0]),$$slots:{default:[ws]},$$scope:{ctx:l}}}),{c(){n.c(),t=O(),b(r.$$.fragment)},m(c,_){a[e].m(c,_),$(c,t,_),v(r,c,_),o=!0,s||(u=Ze(window,"keydown",l[5]),s=!0)},p(c,[_]){let m=e;e=f(c),e===m?a[e].p(c,_):(ce(),d(a[m],1,1,()=>{a[m]=null}),$e(),n=a[e],n?n.p(c,_):(n=a[e]=i[e](c),n.c()),g(n,1),n.m(t.parentNode,t));const y={};_&1&&(y.data=c[0].length<2?kn():yn(c[0])),_&32768&&(y.$$scope={dirty:_,ctx:c}),r.$set(y)},i(c){o||(g(n),g(r.$$.fragment,c),o=!0)},o(c){d(n),d(r.$$.fragment,c),o=!1},d(c){c&&p(t),a[e].d(c),w(r,c),s=!1,u()}}}function ys(l,e,n){let t,r=!1,o=[];function s(C){return C.length<2?null:1e3*jo(yn(C),{units:"kilometers"})}function u(C){n(0,o=[...o,C.detail.lngLat.toArray()])}function i(){n(1,r=!1),n(0,o=[])}function a(C){r&&C.key==="Escape"&&(C.stopPropagation(),i())}function f(C){o.splice(C,1),n(0,o)}function c(C){let S=[];for(let A=0;A<C.length;A++)A==0&&C.length>1?S.push(Zn(C[1],C[0])):A==C.length-1&&C.length>1?S.push(Zn(C[C.length-2],C[A])):S.push(null);return S}function _(C,S){l.$$.not_equal(o[S],C)&&(o[S]=C,n(0,o))}const m=C=>f(C),y=()=>n(1,r=!0);return l.$$.update=()=>{l.$$.dirty&1&&n(2,t=s(o))},[o,r,t,u,i,a,f,c,_,m,y]}class Ss extends Y{constructor(e){super(),K(this,e,ys,ks,J,{})}}const Cs={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Be=Uint8Array,gt=Uint16Array,no=Uint32Array,ro=new Be([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lo=new Be([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ts=new Be([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oo=function(l,e){for(var n=new gt(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new no(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},so=oo(ro,2),io=so[0],Os=so[1];io[28]=258,Os[258]=28;var Ls=oo(lo,0),As=Ls[0],Tn=new gt(32768);for(var we=0;we<32768;++we){var at=(we&43690)>>>1|(we&21845)<<1;at=(at&52428)>>>2|(at&13107)<<2,at=(at&61680)>>>4|(at&3855)<<4,Tn[we]=((at&65280)>>>8|(at&255)<<8)>>>1}var Zt=function(l,e,n){for(var t=l.length,r=0,o=new gt(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new gt(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new gt(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[Tn[c]>>>i]=a}else for(u=new gt(t),r=0;r<t;++r)l[r]&&(u[r]=Tn[s[l[r]-1]++]>>>15-l[r]);return u},nn=new Be(288);for(var we=0;we<144;++we)nn[we]=8;for(var we=144;we<256;++we)nn[we]=9;for(var we=256;we<280;++we)nn[we]=7;for(var we=280;we<288;++we)nn[we]=8;var ao=new Be(32);for(var we=0;we<32;++we)ao[we]=5;var Is=Zt(nn,9,1),Ns=Zt(ao,5,1),pn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},Ue=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},mn=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Ps=function(l){return(l+7)/8|0},Bn=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?gt:l.BYTES_PER_ELEMENT==4?no:Be)(n-e);return t.set(l.subarray(e,n)),t},Ms=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],We=function(l,e,n){var t=new Error(e||Ms[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,We),!n)throw t;return t},Fs=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Be(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Be(t*3));var s=function(ge){var ve=e.length;if(ge>ve){var _e=new Be(Math.max(ve*2,ge));_e.set(e),e=_e}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,_=n.m,m=n.n,y=t*8;do{if(!f){u=Ue(l,i,1);var C=Ue(l,i+1,3);if(i+=3,C)if(C==1)f=Is,c=Ns,_=9,m=5;else if(C==2){var I=Ue(l,i,31)+257,P=Ue(l,i+10,15)+4,L=I+Ue(l,i+5,31)+1;i+=14;for(var M=new Be(L),D=new Be(19),N=0;N<P;++N)D[Ts[N]]=Ue(l,i+N*3,7);i+=P*3;for(var j=pn(D),U=(1<<j)-1,H=Zt(D,j,1),N=0;N<L;){var E=H[Ue(l,i,U)];i+=E&15;var S=E>>>4;if(S<16)M[N++]=S;else{var F=0,z=0;for(S==16?(z=3+Ue(l,i,3),i+=2,F=M[N-1]):S==17?(z=3+Ue(l,i,7),i+=3):S==18&&(z=11+Ue(l,i,127),i+=7);z--;)M[N++]=F}}var oe=M.subarray(0,I),se=M.subarray(I);_=pn(oe),m=pn(se),f=Zt(oe,_,1),c=Zt(se,m,1)}else We(1);else{var S=Ps(i)+4,A=l[S-4]|l[S-3]<<8,R=S+A;if(R>t){o&&We(0);break}r&&s(a+A),e.set(l.subarray(S,R),a),n.b=a+=A,n.p=i=R*8,n.f=u;continue}if(i>y){o&&We(0);break}}r&&s(a+131072);for(var ye=(1<<_)-1,de=(1<<m)-1,Ce=i;;Ce=i){var F=f[mn(l,i)&ye],ie=F>>>4;if(i+=F&15,i>y){o&&We(0);break}if(F||We(2),ie<256)e[a++]=ie;else if(ie==256){Ce=i,f=null;break}else{var Ne=ie-254;if(ie>264){var N=ie-257,Te=ro[N];Ne=Ue(l,i,(1<<Te)-1)+io[N],i+=Te}var be=c[mn(l,i)&de],re=be>>>4;be||We(3),i+=be&15;var se=As[re];if(re>3){var Te=lo[re];se+=mn(l,i)&(1<<Te)-1,i+=Te}if(i>y){o&&We(0);break}r&&s(a+131072);for(var pe=a+Ne;a<pe;a+=4)e[a]=e[a-se],e[a+1]=e[a+1-se],e[a+2]=e[a+2-se],e[a+3]=e[a+3-se];a=pe}}n.l=f,n.p=Ce,n.b=a,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=m)}while(!u);return a==e.length?e:Bn(e,0,a)},Ds=new Be(0),Je=function(l,e){return l[e]|l[e+1]<<8},Ve=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},_n=function(l,e){return Ve(l,e)+Ve(l,e+4)*4294967296};function Es(l,e){return Fs(l,e)}var On=typeof TextDecoder<"u"&&new TextDecoder,js=0;try{On.decode(Ds,{stream:!0}),js=1}catch{}var Rs=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,Bn(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function fo(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(On)return On.decode(l);var r=Rs(l),o=r[0],s=r[1];return s.length&&We(8),o}}var Bs=function(l,e){return e+30+Je(l,e+26)+Je(l,e+28)},zs=function(l,e,n){var t=Je(l,e+28),r=fo(l.subarray(e+46,e+46+t),!(Je(l,e+8)&2048)),o=e+46+t,s=Ve(l,e+20),u=n&&s==4294967295?Hs(l,o):[s,Ve(l,e+24),Ve(l,e+42)],i=u[0],a=u[1],f=u[2];return[Je(l,e+10),i,a,r,o+Je(l,e+30)+Je(l,e+32),f]},Hs=function(l,e){for(;Je(l,e)!=1;e+=4+Je(l,e+2));return[_n(l,e+12),_n(l,e+4),_n(l,e+20)]};function qs(l,e){for(var n={},t=l.length-22;Ve(l,t)!=101010256;--t)(!t||l.length-t>65558)&&We(13);var r=Je(l,t+8);if(!r)return{};var o=Ve(l,t+16),s=o==4294967295||r==65535;if(s){var u=Ve(l,t-12);s=Ve(l,u)==101075792,s&&(r=Ve(l,u+32),o=Ve(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=zs(l,o,s),c=f[0],_=f[1],m=f[2],y=f[3],C=f[4],S=f[5],A=Bs(l,S);o=C,(!i||i({name:y,size:_,originalSize:m,compression:c}))&&(c?c==8?n[y]=Es(l.subarray(A,A+_),new Be(m)):We(14,"unknown compression type "+c):n[y]=Bn(l,A,A+_))}return n}function Gs(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(gn):gn(l)}function gn(l){var e=new Uint8Array(l),n=qs(e);return Promise.resolve(Us(n))}function Us(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=fo(l[r])}return e}function Qe(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&kt(t)===e)return t;n++}}function rn(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&kt(r)===e&&n.push(r),t++}return n}function fn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&kt(r)===e&&n(r,t):n(r,t),t++}}function Ws(l,e,n){var t=[];return fn(l,e,function(r,o){t.push(n(r,o))}),t}var Vs=/.+\:/;function kt(l){return l.tagName.replace(Vs,"")}function uo(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+kt(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=uo(l.childNodes[t]),t++;return e+="</"+kt(l)+">",e}function Xs(l){var e=l.documentElement,n=Qe(e,"sheetData"),t=[];return fn(n,"row",function(r){fn(r,"c",function(o){t.push(o)})}),t}function Js(l,e){return Qe(e,"v")}function Ys(l,e){if(e.firstChild&&kt(e.firstChild)==="is"&&e.firstChild.firstChild&&kt(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Ks(l){var e=l.documentElement,n=Qe(e,"dimension");if(n)return n.getAttribute("ref")}function Zs(l){var e=l.documentElement,n=Qe(e,"cellStyleXfs");return n?rn(n,"xf"):[]}function Qs(l){var e=l.documentElement,n=Qe(e,"cellXfs");return n?rn(n,"xf"):[]}function xs(l){var e=l.documentElement,n=Qe(e,"numFmts");return n?rn(n,"numFmt"):[]}function ei(l){var e=l.documentElement;return Ws(e,"si",function(n){var t=Qe(n,"t");if(t)return t.textContent;var r="";return fn(n,"r",function(o){r+=Qe(o,"t").textContent}),r})}function ti(l){var e=l.documentElement;return Qe(e,"workbookPr")}function ni(l){var e=l.documentElement;return rn(e,"Relationship")}function ri(l){var e=l.documentElement,n=Qe(e,"sheets");return rn(n,"sheet")}function li(l,e){var n=e.createDocument(l),t={},r=ti(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return ri(n).forEach(o),t}function oi(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=dn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=dn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=dn(u);break}};return ni(n).forEach(r),t}function dn(l){return l[0]==="/"?l.slice(1):"xl/"+l}function ur(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function cr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ur(Object(n),!0).forEach(function(t){si(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function si(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ii(l,e){if(!l)return{};var n=e.createDocument(l),t=Zs(n).map(hn),r=xs(n).map(ai).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?cr(cr({},t[u.xfId]),hn(u,r)):hn(u,r)};return Qs(n).map(o)}function ai(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function hn(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function fi(l,e){return l?ei(e.createDocument(l)):[]}function co(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function ui(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ci(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ci(l,e){if(l){if(typeof l=="string")return $r(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $r(l,e)}}function $r(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function $i(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(pi.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&gi(t.numberFormat.template))return!0}}var pi=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],mi=/^\[\$-414\]/,_i=/;@$/;function gi(l){l=l.toLowerCase(),l=l.replace(mi,""),l=l.replace(_i,"");for(var e=l.split(/\W+/),n=ui(e),t;!(t=n()).done;){var r=t.value;if(di.indexOf(r)<0)return!1}return!0}var di=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function hi(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=bn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=bn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=bn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=bi(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var _=$i(o(),s,a);_?(l=pr(l),l=co(l,i)):l=(a.parseNumber||pr)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function bi(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function bn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function pr(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var vi=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function wi(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function ki(l){for(var e=0,n=0;n<l.length;)e*=26,e+=vi.indexOf(l[n]),n++;return e}function $o(l){return l=l.split(/(\d+)/),[parseInt(l[1]),ki(l[0].trim())]}function yi(l,e,n,t,r,o,s){var u=$o(l.getAttribute("r")),i=Js(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:hi(a,f,{getInlineStringValue:function(){return Ys(e,l)},getInlineStringXml:function(){return uo(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function Si(l,e,n,t,r,o){var s=Xs(l);return s.length===0?[]:s.map(function(u){return yi(u,l,e,n,t,r,o)})}function Ci(l,e){return Ai(l)||Li(l,e)||Oi(l,e)||Ti()}function Ti(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oi(l,e){if(l){if(typeof l=="string")return mr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(l,e)}}function mr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Li(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ai(l){if(Array.isArray(l))return l}function Ii(l){var e=Ks(l);if(e)return e=e.split(":").map($o).map(function(n){var t=Ci(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Ni(l,e,n,t,r,o){var s=e.createDocument(l),u=Si(s,e,n,t,r,o),i=Ii(s)||wi(u);return{cells:u,dimensions:i}}function Pi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Mi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mi(l,e){if(l){if(typeof l=="string")return _r(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(l,e)}}function _r(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Fi(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=Pi(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Di(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Ei(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ei(l,e){if(l){if(typeof l=="string")return gr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(l,e)}}function gr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ji(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=Di(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function Ri(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=po(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bi(l,e){return qi(l)||Hi(l,e)||po(l,e)||zi()}function zi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function po(l,e){if(l){if(typeof l=="string")return dr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(l,e)}}function dr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Hi(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function qi(l){if(Array.isArray(l))return l}function Gi(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=Bi(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=Ri(t),_;!(_=c()).done;){var m=_.value,y=m.row-1,C=m.column-1;C<s&&y<u&&(i[y][C]=m.value)}var S=e.rowMap;if(S)for(var A=0;A<i.length;)S[A]=A,A++;return i=Fi(ji(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(i=e.transformData(i)),i}function Ui(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Wi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wi(l,e){if(l){if(typeof l=="string")return hr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hr(l,e)}}function hr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function br(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Vi(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?br(Object(n),!0).forEach(function(t){Xi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Xi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Ji(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Vi({sheet:1},n));var t=function(_){if(!l[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return l[_]},r=oi(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?fi(t(r.sharedStrings),e):[],s=r.styles?ii(t(r.styles),e):{},u=li(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var i=Yi(n.sheet,u.sheets);if(!i||!r.sheets[i])throw Ki(n.sheet,u.sheets);var a=Ni(t(r.sheets[i]),e,o,s,u,n),f=Gi(a,n);return n.properties?{data:f,properties:u}:f}function Yi(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=Ui(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Ki(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Ln(l){"@babel/helpers - typeof";return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(l)}function vr(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Zi(l,e,n){return e&&vr(l.prototype,e),n&&vr(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function Qi(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function xi(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&xt(l,e)}function ea(l){var e=mo();return function(){var t=en(l),r;if(e){var o=en(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return ta(this,r)}}function ta(l,e){if(e&&(Ln(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return na(l)}function na(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function An(l){var e=typeof Map=="function"?new Map:void 0;return An=function(t){if(t===null||!ra(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return sn(t,arguments,en(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),xt(r,t)},An(l)}function sn(l,e,n){return mo()?sn=Reflect.construct:sn=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&xt(a,s.prototype),a},sn.apply(null,arguments)}function mo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ra(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function xt(l,e){return xt=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},xt(l,e)}function en(l){return en=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},en(l)}var ze=function(l){xi(n,l);var e=ea(n);function n(t){var r;return Qi(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Zi(n)}(An(Error));function la(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new ze("not_a_number")}if(typeof l!="number")throw new ze("not_a_number");if(isNaN(l))throw new ze("invalid_number");if(!isFinite(l))throw new ze("out_of_bounds");return l}function oa(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new ze("invalid_number");if(!isFinite(l))throw new ze("out_of_bounds");return String(l)}throw new ze("not_a_string")}function sa(l){if(typeof l=="boolean")return l;throw new ze("not_a_boolean")}function ia(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new ze("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new ze("invalid_number");if(!isFinite(l))throw new ze("out_of_bounds");var t=co(l,n);if(isNaN(t.valueOf()))throw new ze("out_of_bounds");return t}throw new ze("not_a_date")}function aa(l,e){return ca(l)||ua(l,e)||_o(l,e)||fa()}function fa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ua(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ca(l){if(Array.isArray(l))return l}function In(l){"@babel/helpers - typeof";return In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(l)}function $a(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=_o(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _o(l,e){if(l){if(typeof l=="string")return wr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wr(l,e)}}function wr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function kr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function yr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kr(Object(n),!0).forEach(function(t){pa(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function pa(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var Sr={isColumnOriented:!1};function ma(l,e,n){n?n=yr(yr({},Sr),n):n=Sr;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ha(e),r&&(l=da(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=go(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var _=$a(a),m;!(m=_()).done;){var y=m.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function go(l,e,n,t,r,o){for(var s={},u=!0,i=function(R){var I=R.column,P=R.value,L=R.error,M=R.reason,D={error:L,row:n+1,column:I,value:P};return M&&(D.reason=M),l[I].type&&(D.type=l[I].type),D},a=[],f=function(){var R=_[c],I=l[R],P=In(I.type)==="object"&&!Array.isArray(I.type),L=e[t.indexOf(R)];L===void 0&&(L=null);var M=void 0,D=void 0,N=void 0;if(P)M=go(I.type,e,n,t,r,o);else if(L===null)M=null;else if(Array.isArray(I.type)){var j=!1,U=ga(L).map(function(E){var F=Cr(E,I,o);return F.error&&(M=E,D=F.error,N=F.reason),F.value!==null&&(j=!0),F.value});D||(M=j?U:null)}else{var H=Cr(L,I,o);D=H.error,N=H.reason,M=D?L:H.value}!D&&M===null&&(typeof I.required=="function"?a.push({column:R}):I.required===!0&&(D="required")),D?r.push(i({column:R,value:M,error:D,reason:N})):(u&&M!==null&&(u=!1),(M!==null||o.includeNullValues)&&(s[I.prop]=M))},c=0,_=Object.keys(l);c<_.length;c++)f();if(u)return null;for(var m=0,y=a;m<y.length;m++){var C=y[m].column,S=l[C].required(s);S&&r.push(i({column:C,value:null,error:"required"}))}return s}function Cr(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=Ct(l,e.parse):e.type?t=_a(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function Ct(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function _a(l,e,n){switch(e){case String:return Ct(l,oa);case Number:return Ct(l,la);case Date:return Ct(l,function(t){return ia(t,{properties:n.properties})});case Boolean:return Ct(l,sa);default:if(typeof e=="function")return Ct(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function ho(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=ho(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function ga(l){for(var e=[],n=0;n<l.length;){var t=ho(l,",",n),r=aa(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var da=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function ha(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function Nn(l){"@babel/helpers - typeof";return Nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(l)}function bo(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;Nn(o)==="object"&&(o=Object.keys(l[r])[0],s=bo(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var ba=["schema","map"];function Tr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function on(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tr(Object(n),!0).forEach(function(t){va(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function va(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function wa(l,e){if(l==null)return{};var n=ka(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function ka(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function ya(l,e,n){var t=n.schema,r=n.map,o=wa(n,ba);!t&&r&&(t=bo(r));var s=Ji(l,e,on(on({},o),{},{properties:t||o.properties}));return t?ma(s.data,t,on(on({},o),{},{properties:s.properties})):s}function Sa(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Gs(l).then(function(n){return ya(n,Cs,e)})}function Ca(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>Ta(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function Ta(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function Oa(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Sa(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Oo(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Pn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function La(l){return $t(["get","intervention_type"],{area:Ke.area,route:Ke.route,crossing:Ke.crossing,other:Ke.other},"white")}function Aa(l){return[["Areas",Ke.area],["Routes",Ke.route],["Crossings",Ke.crossing],["Other",Ke.other]]}const Z={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},He=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Mn(){let[l,e]=vo(Pn,Z.funding_programmes);return[$t(["get","funding_programme"],l,"grey"),e]}function Ia(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=vo(l,Z.current_milestone);return[$t(["get","current_milestone"],e,"grey"),n]}function vo(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Na(l){let e,n;return e=new Rn({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Pa(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new _t({props:u}),W.push(()=>V(e,"value",s)),e.$on("change",l[2]),r=new Re({props:{label:"Legend",$$slots:{default:[Na]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],X(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function Ma(l,e,n){let t;Ae(l,En,a=>n(4,t=a));let r="fundingProgramme",[o,s]=Mn();function u(){let a;r=="interventionType"?(a=La(),n(1,s=Aa())):r=="fundingProgramme"?n(1,[a,s]=Mn(),s):r=="currentMilestone"&&n(1,[a,s]=Ia(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class Fa extends Y{constructor(e){super(),K(this,e,Ma,Pa,J,{})}}const Tt=tn({type:"FeatureCollection",features:[],schemes:{}}),un=tn(new Map),Or=tn(!0),At=tn(""),It=tn("");function Da(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ea(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(l){let e,n,t,r,o,s;return t=new ct({props:{$$slots:{default:[Ea]},$$scope:{ctx:l}}}),t.$on("click",l[19]),{c(){e=T("input"),n=O(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,i){$(u,e,i),Ye(e,l[7]),$(u,n,i),v(t,u,i),r=!0,o||(s=Ze(e,"input",l[18]),o=!0)},p(u,i){i&128&&e.value!==u[7]&&Ye(e,u[7]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(g(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function Ra(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ba(l){let e,n,t,r,o,s;return t=new ct({props:{$$slots:{default:[Ra]},$$scope:{ctx:l}}}),t.$on("click",l[21]),{c(){e=T("input"),n=O(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,i){$(u,e,i),Ye(e,l[6]),$(u,n,i),v(t,u,i),r=!0,o||(s=Ze(e,"input",l[20]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&Ye(e,u[6]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(g(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function za(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,y,C,S,A,R,I,P;e=new ct({props:{$$slots:{default:[Da]},$$scope:{ctx:l}}}),e.$on("click",l[13]);function L(F){l[14](F)}let M={label:"Authority or region",choices:l[8],emptyOption:!0};l[2]!==void 0&&(M.value=l[2]),t=new _t({props:M}),W.push(()=>V(t,"value",L));function D(F){l[15](F)}let N={label:"Funding programme",choices:l[9],emptyOption:!0};l[3]!==void 0&&(N.value=l[3]),s=new _t({props:N}),W.push(()=>V(s,"value",D));function j(F){l[16](F)}let U={label:"Current milestone",choices:l[10],emptyOption:!0};l[4]!==void 0&&(U.value=l[4]),a=new _t({props:U}),W.push(()=>V(a,"value",j));function H(F){l[17](F)}let E={label:"Sketch source",choices:l[12],emptyOption:!0};return l[5]!==void 0&&(E.value=l[5]),_=new _t({props:E}),W.push(()=>V(_,"value",H)),C=new Sn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[ja]},$$scope:{ctx:l}}}),A=new Sn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Ba]},$$scope:{ctx:l}}}),I=new Fa({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment),i=O(),b(a.$$.fragment),c=O(),b(_.$$.fragment),y=O(),b(C.$$.fragment),S=O(),b(A.$$.fragment),R=O(),b(I.$$.fragment)},m(F,z){v(e,F,z),$(F,n,z),v(t,F,z),$(F,o,z),v(s,F,z),$(F,i,z),v(a,F,z),$(F,c,z),v(_,F,z),$(F,y,z),v(C,F,z),$(F,S,z),v(A,F,z),$(F,R,z),v(I,F,z),P=!0},p(F,z){const oe={};z&134217728&&(oe.$$scope={dirty:z,ctx:F}),e.$set(oe);const se={};z&256&&(se.choices=F[8]),!r&&z&4&&(r=!0,se.value=F[2],X(()=>r=!1)),t.$set(se);const ye={};z&512&&(ye.choices=F[9]),!u&&z&8&&(u=!0,ye.value=F[3],X(()=>u=!1)),s.$set(ye);const de={};z&1024&&(de.choices=F[10]),!f&&z&16&&(f=!0,de.value=F[4],X(()=>f=!1)),a.$set(de);const Ce={};!m&&z&32&&(m=!0,Ce.value=F[5],X(()=>m=!1)),_.$set(Ce);const ie={};z&134217856&&(ie.$$scope={dirty:z,ctx:F}),C.$set(ie);const Ne={};z&134217792&&(Ne.$$scope={dirty:z,ctx:F}),A.$set(Ne)},i(F){P||(g(e.$$.fragment,F),g(t.$$.fragment,F),g(s.$$.fragment,F),g(a.$$.fragment,F),g(_.$$.fragment,F),g(C.$$.fragment,F),g(A.$$.fragment,F),g(I.$$.fragment,F),P=!0)},o(F){d(e.$$.fragment,F),d(t.$$.fragment,F),d(s.$$.fragment,F),d(a.$$.fragment,F),d(_.$$.fragment,F),d(C.$$.fragment,F),d(A.$$.fragment,F),d(I.$$.fragment,F),P=!1},d(F){F&&(p(n),p(o),p(i),p(c),p(y),p(S),p(R)),w(e,F),w(t,F),w(s,F),w(a,F),w(_,F),w(C,F),w(A,F),w(I,F)}}}function Ha(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[11].route.toLocaleString()+"",s,u,i=l[11].area.toLocaleString()+"",a,f,c=l[11].crossing.toLocaleString()+"",_,m,y=l[11].other.toLocaleString()+"",C,S,A=Lr(l[11].totalLength).toFixed(1)+"",R,I;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),_=k(c),m=k(" crossings, "),C=k(y),S=k(`
    other, with total LineString length of `),R=k(A),I=k(" miles)")},m(P,L){$(P,e,L),$(P,t,L),$(P,r,L),$(P,s,L),$(P,u,L),$(P,a,L),$(P,f,L),$(P,_,L),$(P,m,L),$(P,C,L),$(P,S,L),$(P,R,L),$(P,I,L)},p(P,L){L&1&&n!==(n=P[0].size.toLocaleString()+"")&&B(t,n),L&2048&&o!==(o=P[11].route.toLocaleString()+"")&&B(s,o),L&2048&&i!==(i=P[11].area.toLocaleString()+"")&&B(a,i),L&2048&&c!==(c=P[11].crossing.toLocaleString()+"")&&B(_,c),L&2048&&y!==(y=P[11].other.toLocaleString()+"")&&B(C,y),L&2048&&A!==(A=Lr(P[11].totalLength).toFixed(1)+"")&&B(R,A)},d(P){P&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(_),p(m),p(C),p(S),p(R),p(I))}}}function qa(l){let e,n,t;function r(s){l[22](s)}let o={$$slots:{default:[Ha]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&134219777&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ga(l){let e,n,t,r;return e=new Re({props:{label:"Filters",$$slots:{default:[za]},$$scope:{ctx:l}}}),t=new xe({props:{small:!0,$$slots:{default:[qa]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&134219772&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&134219779&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Lr(l){return l*621371e-9}function Ua(l,e,n){let t,r,o,s;Ae(l,It,z=>n(6,t=z)),Ae(l,At,z=>n(7,r=z)),Ae(l,Tt,z=>n(23,o=z)),Ae(l,un,z=>n(24,s=z));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],_=new Set(Pn.slice(0,-1)),m="",y=[],C="",S=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],A="",R={area:0,route:0,crossing:0,other:0,totalLength:0};jn(()=>{var ye,de,Ce;let z=new Set,oe=new Set,se=new Set;for(let ie of s.values())(ye=ie.browse)!=null&&ye.authority_or_region&&z.add(ie.browse.authority_or_region),(de=ie.browse)!=null&&de.funding_programme&&oe.add(ie.browse.funding_programme),(Ce=ie.browse)!=null&&Ce.current_milestone&&se.add(ie.browse.current_milestone);n(8,a=Array.from(z.entries())),a.sort(),n(9,c=Pn.map(ie=>[ie,ie])),n(10,y=Array.from(se.entries())),y.sort()});function I(z,oe,se,ye,de,Ce){let ie=oe.toLowerCase(),Ne=se.toLowerCase(),Te=re=>{var pe,ge,ve,_e,Ie,Me,Ot;if(ie&&!((pe=re.properties.name)!=null&&pe.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))return!1;if(z||Ne||ye||de||Ce){let Xe=s.get(re.properties.scheme_reference);if(ye&&((ve=Xe.browse)==null?void 0:ve.authority_or_region)!=ye||de&&de!=="Other"&&((_e=Xe.browse)==null?void 0:_e.funding_programme)!=de||de==="Other"&&_.has(((Ie=Xe.browse)==null?void 0:Ie.funding_programme)??"")||Ce&&((Me=Xe.browse)==null?void 0:Me.current_milestone)!=Ce||Ne&&!Xe.scheme_reference.toLowerCase().includes(Ne)&&!(Xe.scheme_name??"").toLowerCase().includes(Ne)||z&&z!=="Both"&&z!==((Ot=Xe.browse)==null?void 0:Ot.sketch_source))return!1}return!0};n(0,u=new Set(o.features.filter(Te).map(re=>re.properties.scheme_reference))),n(11,R={area:0,route:0,crossing:0,other:0,totalLength:0});let be=re=>{var pe,ge;return!(!u.has(re.properties.scheme_reference)||ie&&!((pe=re.properties.name)!=null&&pe.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))};for(let re of o.features)be(re)?(delete re.properties.hide_while_editing,n(11,R[re.properties.intervention_type]++,R),re.geometry.type=="LineString"&&re.properties.length_meters&&n(11,R.totalLength+=re.properties.length_meters,R)):re.properties.hide_while_editing=!0;Tt.set(o),n(11,R)}function P(){n(5,A=""),n(2,f=""),n(3,m=""),n(4,C=""),ut(At,r="",r),ut(It,t="",t)}function L(z){f=z,n(2,f)}function M(z){m=z,n(3,m)}function D(z){C=z,n(4,C)}function N(z){A=z,n(5,A)}function j(){r=this.value,At.set(r)}const U=()=>ut(At,r="",r);function H(){t=this.value,It.set(t)}const E=()=>ut(It,t="",t);function F(z){i=z,n(1,i)}return l.$$set=z=>{"schemesToBeShown"in z&&n(0,u=z.schemesToBeShown),"show"in z&&n(1,i=z.show)},l.$$.update=()=>{l.$$.dirty&252&&I(A,r,t,f,m,C)},[u,i,f,m,C,A,t,r,a,c,y,R,S,P,L,M,D,N,j,U,H,E,F]}class Wa extends Y{constructor(e){super(),K(this,e,Ua,Ga,J,{schemesToBeShown:0,show:1})}}function Va(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xa(l){let e,n,t,r,o;return t=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Va]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment),r=k(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),h(e,n),v(t,e,null),h(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(g(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class De extends Y{constructor(e){super(),K(this,e,null,Xa,J,{})}}function Ar(l,e,n){const t=l.slice();return t[2]=e[n],t}function Ir(l,e,n){const t=l.slice();return t[5]=e[n],t}function Nr(l){let e,n;return{c(){e=T("span"),n=k(`Â 
    `),Se(e,"background",l[5]),Se(e,"width","100%"),Se(e,"border","1px solid black")},m(t,r){$(t,e,r),h(e,n)},p(t,r){r&1&&Se(e,"background",t[5])},d(t){t&&p(e)}}}function Pr(l){let e,n=l[2]+"",t;return{c(){e=T("span"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&B(t,n)},d(r){r&&p(e)}}}function Ja(l){let e,n,t,r=je(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=Nr(Ir(l,r,i));let s=je(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=Pr(Ar(l,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=O(),t=T("div");for(let i=0;i<u.length;i+=1)u[i].c();Se(e,"display","flex"),Se(t,"display","flex"),Se(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=je(i[0]);let f;for(f=0;f<r.length;f+=1){const c=Ir(i,r,f);o[f]?o[f].p(c,a):(o[f]=Nr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=je(i[1]);let f;for(f=0;f<s.length;f+=1){const c=Ar(i,s,f);u[f]?u[f].p(c,a):(u[f]=Pr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:ne,o:ne,d(i){i&&(p(e),p(n),p(t)),wt(o,i),wt(u,i)}}}function Ya(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ge extends Y{constructor(e){super(),K(this,e,Ya,Ja,J,{colorScale:0,limits:1})}}function Mr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Ka(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Za(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qa(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ef(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Za]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Qa]},$$scope:{ctx:l}}}),f=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[xa]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=O(),i=T("p"),a=k("License: "),b(f.$$.fragment),c=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(m,u,y),$(m,i,y),h(i,a),v(f,i,null),h(i,c),_=!0},p(m,y){const C={};y&65536&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&65536&&(S.$$scope={dirty:y,ctx:m}),o.$set(S);const A={};y&65536&&(A.$$scope={dirty:y,ctx:m}),f.$set(A)},i(m){_||(g(t.$$.fragment,m),g(o.$$.fragment,m),g(f.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),_=!1},d(m){m&&(p(e),p(u),p(i)),w(t),w(o),w(f)}}}function tf(l){let e,n,t;return n=new me({props:{$$slots:{default:[ef]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Fr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function nf(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sf(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,y;return o=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[rf]},$$scope:{ctx:l}}}),u=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[lf]},$$scope:{ctx:l}}}),_=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[of]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=T("p"),r=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(u.$$.fragment),i=k("."),a=O(),f=T("p"),c=k("License: "),b(_.$$.fragment),m=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(C,S){$(C,e,S),$(C,n,S),$(C,t,S),h(t,r),v(o,t,null),h(t,s),v(u,t,null),h(t,i),$(C,a,S),$(C,f,S),h(f,c),v(_,f,null),h(f,m),y=!0},p(C,S){const A={};S&65536&&(A.$$scope={dirty:S,ctx:C}),o.$set(A);const R={};S&65536&&(R.$$scope={dirty:S,ctx:C}),u.$set(R);const I={};S&65536&&(I.$$scope={dirty:S,ctx:C}),_.$set(I)},i(C){y||(g(o.$$.fragment,C),g(u.$$.fragment,C),g(_.$$.fragment,C),y=!0)},o(C){d(o.$$.fragment,C),d(u.$$.fragment,C),d(_.$$.fragment,C),y=!1},d(C){C&&(p(e),p(n),p(t),p(a),p(f)),w(o),w(u),w(_)}}}function af(l){let e,n,t;return n=new me({props:{$$slots:{default:[sf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Dr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ff(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uf(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[uf]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[cf]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&65536&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function pf(l){let e,n,t;return n=new me({props:{$$slots:{default:[$f]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Er(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[4],limits:l[6]().map(wf)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function mf(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(r),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){$(a,e,f),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&B(o,r),f&8192&&u!==(u=a[14]+"")&&B(i,u)},d(a){a&&p(e)}}}function _f(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=T("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=T("b"),i=k(u),a=k(`
          cars`)},m(f,c){$(f,e,c),h(e,n),h(e,r),h(e,o),h(e,s),h(s,i),h(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(r,t),c&8200&&u!==(u=f[15]+"")&&B(i,u)},d(f){f&&p(e)}}}function gf(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=T("p"),n=T("b"),r=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){$(f,e,c),h(e,n),h(n,r),h(n,o),h(e,s),h(e,i),h(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(r,t),c&8192&&u!==(u=f[14]+"")&&B(i,u)},d(f){f&&p(e)}}}function df(l){Mr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?gf:o[3]=="average_cars_per_household"?_f:mf}let t=n(l),r=t(l);return{c(){r.c(),e=Ee()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){Mr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function hf(l){let e,n;return e=new fe({props:{$$slots:{default:[df,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function bf(l){let e,n,t,r;const o=[q(tt),{sourceLayer:tt},{paint:{"fill-color":Le(["get",l[3]],l[6](),l[4]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[hf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",l[5]);const u=[q(`${tt}-outline`),{sourceLayer:tt},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&88?te(o,[f&0&&ae(q(tt)),f&0&&{sourceLayer:tt},f&88&&{paint:{"fill-color":Le(["get",a[3]],a[6](),a[4]),"fill-opacity":Q(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&8?te(u,[f&0&&ae(q(`${tt}-outline`)),f&0&&{sourceLayer:tt},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function vf(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,y;function C(N){l[7](N)}let S={$$slots:{right:[tf],default:[Ka]},$$scope:{ctx:l}};l[0]!==void 0&&(S.checked=l[0]),e=new le({props:S}),W.push(()=>V(e,"checked",C)),e.$on("change",l[8]);let A=l[3]=="percent_households_with_car"&&Fr(l);function R(N){l[9](N)}let I={$$slots:{right:[af],default:[nf]},$$scope:{ctx:l}};l[1]!==void 0&&(I.checked=l[1]),o=new le({props:I}),W.push(()=>V(o,"checked",R)),o.$on("change",l[10]);let P=l[3]=="average_cars_per_household"&&Dr(l);function L(N){l[11](N)}let M={$$slots:{right:[pf],default:[ff]},$$scope:{ctx:l}};l[2]!==void 0&&(M.checked=l[2]),a=new le({props:M}),W.push(()=>V(a,"checked",L)),a.$on("change",l[12]);let D=l[3]=="population_density"&&Er(l);return m=new ke({props:{url:`pmtiles://${he()}/v1/${tt}.pmtiles`,$$slots:{default:[bf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),A&&A.c(),r=O(),b(o.$$.fragment),u=O(),P&&P.c(),i=O(),b(a.$$.fragment),c=O(),D&&D.c(),_=O(),b(m.$$.fragment)},m(N,j){v(e,N,j),$(N,t,j),A&&A.m(N,j),$(N,r,j),v(o,N,j),$(N,u,j),P&&P.m(N,j),$(N,i,j),v(a,N,j),$(N,c,j),D&&D.m(N,j),$(N,_,j),v(m,N,j),y=!0},p(N,[j]){const U={};j&65536&&(U.$$scope={dirty:j,ctx:N}),!n&&j&1&&(n=!0,U.checked=N[0],X(()=>n=!1)),e.$set(U),N[3]=="percent_households_with_car"?A?(A.p(N,j),j&8&&g(A,1)):(A=Fr(N),A.c(),g(A,1),A.m(r.parentNode,r)):A&&(ce(),d(A,1,1,()=>{A=null}),$e());const H={};j&65536&&(H.$$scope={dirty:j,ctx:N}),!s&&j&2&&(s=!0,H.checked=N[1],X(()=>s=!1)),o.$set(H),N[3]=="average_cars_per_household"?P?(P.p(N,j),j&8&&g(P,1)):(P=Dr(N),P.c(),g(P,1),P.m(i.parentNode,i)):P&&(ce(),d(P,1,1,()=>{P=null}),$e());const E={};j&65536&&(E.$$scope={dirty:j,ctx:N}),!f&&j&4&&(f=!0,E.checked=N[2],X(()=>f=!1)),a.$set(E),N[3]=="population_density"?D?(D.p(N,j),j&8&&g(D,1)):(D=Er(N),D.c(),g(D,1),D.m(_.parentNode,_)):D&&(ce(),d(D,1,1,()=>{D=null}),$e());const F={};j&65544&&(F.$$scope={dirty:j,ctx:N}),m.$set(F)},i(N){y||(g(e.$$.fragment,N),g(A),g(o.$$.fragment,N),g(P),g(a.$$.fragment,N),g(D),g(m.$$.fragment,N),y=!0)},o(N){d(e.$$.fragment,N),d(A),d(o.$$.fragment,N),d(P),d(a.$$.fragment,N),d(D),d(m.$$.fragment,N),y=!1},d(N){N&&(p(t),p(r),p(u),p(i),p(c),p(_)),w(e,N),A&&A.d(N),w(o,N),P&&P.d(N),w(a,N),D&&D.d(N),w(m,N)}}}let tt="census_output_areas";const wf=l=>l.toLocaleString();function kf(l,e,n){let t=Z.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(S){let A=S.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${A}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${A}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(S){r=S,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function _(S){o=S,n(1,o)}const m=()=>{n(0,r=!1),n(2,s=!1)};function y(S){s=S,n(2,s)}const C=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,_,m,y,C]}class yf extends Y{constructor(e){super(),K(this,e,kf,vf,J,{})}}function Sf(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Cf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tf(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Cf]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of December 2022."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Of(l){let e,n,t;return n=new me({props:{$$slots:{default:[Tf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Lf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Af(l){let e,n;return e=new fe({props:{$$slots:{default:[Lf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function If(l){let e,n,t,r;const o=[q(Nt),{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Af]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",Pf);const u=[q(`${Nt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(Nt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&ae(q(`${Nt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Nf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Of],default:[Sf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new yt({props:{data:`${he()}/v1/${Nt}.geojson`,$$slots:{default:[If]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Nt="combined_authorities";function Pf(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Mf(l,e,n){let t=Z.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ff extends Y{constructor(e){super(),K(this,e,Mf,Nf,J,{})}}function Df(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ef(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jf(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rf(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Ef]},$$scope:{ctx:l}}}),o=new ee({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[jf]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function Bf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Rf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function jr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zf(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,_=l[4].rank.toLocaleString()+"",m,y;return{c(){e=T("p"),t=k(n),r=k(` has an IMD score of
        `),o=T("b"),u=k(s),i=O(),a=T("p"),f=k("Rank: "),c=T("b"),m=k(_),y=k(`
        / 32,844 LSOAs`)},m(C,S){$(C,e,S),h(e,t),h(e,r),h(e,o),h(o,u),$(C,i,S),$(C,a,S),h(a,f),h(a,c),h(c,m),h(a,y)},p(C,S){S&16&&n!==(n=C[4].LSOA11CD+"")&&B(t,n),S&16&&s!==(s=C[4].score+"")&&B(u,s),S&16&&_!==(_=C[4].rank.toLocaleString()+"")&&B(m,_)},d(C){C&&(p(e),p(i),p(a))}}}function Hf(l){let e,n;return e=new fe({props:{$$slots:{default:[zf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qf(l){let e,n,t,r;const o=[q(nt),{sourceLayer:nt},{paint:{"fill-color":Le(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Hf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s});const u=[q(`${nt}-outline`),{sourceLayer:nt},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(q(nt)),f&0&&{sourceLayer:nt},f&6&&{paint:{"fill-color":Le(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Q(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?te(u,[f&0&&ae(q(`${nt}-outline`)),f&0&&{sourceLayer:nt},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Gf(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Bf],default:[Df]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&jr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${nt}.pmtiles`,$$slots:{default:[qf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=jr(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let nt="imd";function Uf(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Wf extends Y{constructor(e){super(),K(this,e,Uf,Gf,J,{})}}function Vf(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Xf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jf(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Xf]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of January 2024."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Yf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Jf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Kf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Zf(l){let e,n;return e=new fe({props:{$$slots:{default:[Kf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qf(l){let e,n,t,r;const o=[q(Pt),{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Zf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",eu);const u=[q(`${Pt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(Pt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&ae(q(`${Pt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function xf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Yf],default:[Vf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new yt({props:{data:`${he()}/v1/${Pt}.geojson`,$$slots:{default:[Qf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Pt="local_authority_districts";function eu(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function tu(l,e,n){let t=Z.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class nu extends Y{constructor(e){super(),K(this,e,tu,xf,J,{})}}function ru(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function lu(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ou(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function su(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function au(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fu(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,y,C,S,A,R,I,P,L,M;return t=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[lu]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ou]},$$scope:{ctx:l}}}),u=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[su]},$$scope:{ctx:l}}}),m=new ee({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[iu]},$$scope:{ctx:l}}}),R=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[au]},$$scope:{ctx:l}}}),L=new De({}),{c(){e=T("p"),n=k("LPAs may be a "),b(t.$$.fragment),r=k(", "),b(o.$$.fragment),s=k("y, or "),b(u.$$.fragment),i=k("."),a=O(),f=T("p"),c=T("strong"),_=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(m.$$.fragment),y=k(" to get more details."),C=O(),S=T("p"),A=k("Data from ONS Geography via "),b(R.$$.fragment),I=k(", as of November 2022."),P=O(),b(L.$$.fragment)},m(D,N){$(D,e,N),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),v(u,e,null),h(e,i),$(D,a,N),$(D,f,N),h(f,c),h(c,_),v(m,c,null),h(c,y),$(D,C,N),$(D,S,N),h(S,A),v(R,S,null),h(S,I),$(D,P,N),v(L,D,N),M=!0},p(D,N){const j={};N&16&&(j.$$scope={dirty:N,ctx:D}),t.$set(j);const U={};N&16&&(U.$$scope={dirty:N,ctx:D}),o.$set(U);const H={};N&16&&(H.$$scope={dirty:N,ctx:D}),u.$set(H);const E={};N&16&&(E.$$scope={dirty:N,ctx:D}),m.$set(E);const F={};N&16&&(F.$$scope={dirty:N,ctx:D}),R.$set(F)},i(D){M||(g(t.$$.fragment,D),g(o.$$.fragment,D),g(u.$$.fragment,D),g(m.$$.fragment,D),g(R.$$.fragment,D),g(L.$$.fragment,D),M=!0)},o(D){d(t.$$.fragment,D),d(o.$$.fragment,D),d(u.$$.fragment,D),d(m.$$.fragment,D),d(R.$$.fragment,D),d(L.$$.fragment,D),M=!1},d(D){D&&(p(e),p(a),p(f),p(C),p(S),p(P)),w(t),w(o),w(u),w(m),w(R),w(L,D)}}}function uu(l){let e,n,t;return n=new me({props:{$$slots:{default:[fu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function cu(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function $u(l){let e,n;return e=new fe({props:{$$slots:{default:[cu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pu(l){let e,n,t,r;const o=[q(rt),{sourceLayer:rt},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[$u]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s});const u=[q(`${rt}-outline`),{sourceLayer:rt},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(rt)),f&0&&{sourceLayer:rt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&ae(q(`${rt}-outline`)),f&0&&{sourceLayer:rt},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function mu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[uu],default:[ru]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${rt}.pmtiles`,$$slots:{default:[pu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let rt="local_planning_authorities";function _u(l,e,n){let t=Z.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class gu extends Y{constructor(e){super(),K(this,e,_u,mu,J,{})}}function du(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function hu(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bu(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[hu]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function vu(l){let e,n,t;return n=new me({props:{$$slots:{default:[bu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function wu(l){let e,n=l[3].Name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&B(t,n)},d(r){r&&p(e)}}}function ku(l){let e,n;return e=new fe({props:{$$slots:{default:[wu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function yu(l){let e,n,t,r;const o=[q(lt),{sourceLayer:lt},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ku]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",Cu);const u=[q(`${lt}-outline`),{sourceLayer:lt},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(lt)),f&0&&{sourceLayer:lt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&ae(q(`${lt}-outline`)),f&0&&{sourceLayer:lt},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Su(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[vu],default:[du]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${lt}.pmtiles`,$$slots:{default:[yu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let lt="parliamentary_constituencies";function Cu(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Tu(l,e,n){let t=Z.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ou extends Y{constructor(e){super(),K(this,e,Tu,Su,J,{})}}function Lu(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Au(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Iu(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Au]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        Âµgm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),h(e,o),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){a||(g(t.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(i,f)}}}function Nu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Iu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Rr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,_,m,y,C,S,A,R;function I(L){l[7](L)}let P={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return l[0]!==void 0&&(P.value=l[0]),e=new _t({props:P}),W.push(()=>V(e,"value",I)),{c(){b(e.$$.fragment),t=O(),r=T("p"),s=k(o),u=O(),i=T("div"),a=T("label"),f=k(`Opacity
      `),c=T("input"),_=O(),m=T("img"),G(c,"type","range"),G(c,"min","0"),G(c,"max","100"),an(m.src,y=l[5](l[0]))||G(m,"src",y),G(m,"width",150),G(m,"alt",C=`Legend for ${l[0]} layer`)},m(L,M){v(e,L,M),$(L,t,M),$(L,r,M),h(r,s),$(L,u,M),$(L,i,M),h(i,a),h(a,f),h(a,c),Ye(c,l[2]),$(L,_,M),$(L,m,M),S=!0,A||(R=[Ze(c,"change",l[8]),Ze(c,"input",l[8])],A=!0)},p(L,M){const D={};!n&&M&1&&(n=!0,D.value=L[0],X(()=>n=!1)),e.$set(D),(!S||M&1)&&o!==(o=L[3](L[0])+"")&&B(s,o),M&4&&Ye(c,L[2]),(!S||M&1&&!an(m.src,y=L[5](L[0])))&&G(m,"src",y),(!S||M&1&&C!==(C=`Legend for ${L[0]} layer`))&&G(m,"alt",C)},i(L){S||(g(e.$$.fragment,L),S=!0)},o(L){d(e.$$.fragment,L),S=!1},d(L){L&&(p(t),p(r),p(u),p(i),p(_),p(m)),w(e,L),A=!1,xl(R)}}}function Pu(l){let e,n;const t=[q("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new zo({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Mu(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={$$slots:{right:[Nu],default:[Lu]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[1]&&Rr(l);return o=new is({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Pu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&g(a,1)):(a=Rr(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&1&&(m.tiles=[f[4](f[0])]),c&2054&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}function Fu(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${C}`}function f(y){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${C}`}function c(y){r=y,n(1,r)}function _(y){s=y,n(0,s)}function m(){o=Qt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s])},[s,r,o,i,a,f,c,_,m]}class Du extends Y{constructor(e){super(),K(this,e,Fu,Mu,J,{})}}function Eu(l){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ju(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ru(l){let e,n,t,r,o,s,u,i,a;return o=new ee({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[ju]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=T("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=O(),t=T("p"),r=k("Data from June 2019, produced by "),b(o.$$.fragment),s=k(". See there for methodology details"),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(i,f)}}}function Bu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ru]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Br(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zu(l){let e,n=l[3].noiseclass+"",t,r,o=zr(l[3].noiseclass)+"",s,u;return{c(){e=T("p"),t=k(n),r=k(" dB ("),s=k(o),u=k(")")},m(i,a){$(i,e,a),h(e,t),h(e,r),h(e,s),h(e,u)},p(i,a){a&8&&n!==(n=i[3].noiseclass+"")&&B(t,n),a&8&&o!==(o=zr(i[3].noiseclass)+"")&&B(s,o)},d(i){i&&p(e)}}}function Hu(l){let e,n;return e=new fe({props:{$$slots:{default:[zu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qu(l){let e,n;const t=[q(Mt),{sourceLayer:Mt},{paint:{"fill-color":$t(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][0],"65.0-69.9":l[1][1],"70.0-74.9":l[1][1],">=75.0":l[1][2]},"red"),"fill-opacity":Q(.5,.8)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Hu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Mt)),s&0&&{sourceLayer:Mt},s&2&&{paint:{"fill-color":$t(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":Q(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Gu(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[Bu],default:[Eu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Br(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Mt}.pmtiles`,$$slots:{default:[qu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=Br(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&17&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Mt="road_noise";function zr(l){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[l]}function Uu(l,e,n){let t=[Z.sequential_low_to_high[0],Z.sequential_low_to_high[2],Z.sequential_low_to_high[4]],r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Wu extends Y{constructor(e){super(),K(this,e,Uu,Gu,J,{})}}function Vu(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Xu(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ju(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Xu]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Yu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ju]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Ku(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Zu(l){let e,n;return e=new fe({props:{$$slots:{default:[Ku,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qu(l){let e,n,t,r;const o=[q(ot),{sourceLayer:ot},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Zu]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",ec);const u=[q(`${ot}-outline`),{sourceLayer:ot},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(ot)),f&0&&{sourceLayer:ot},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&ae(q(`${ot}-outline`)),f&0&&{sourceLayer:ot},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function xu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Yu],default:[Vu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${ot}.pmtiles`,$$slots:{default:[Qu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let ot="wards";function ec(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function tc(l,e,n){let t=Z.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class nc extends Y{constructor(e){super(),K(this,e,tc,xu,J,{})}}function rc(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lc(l){let e,n,t,r;return t=new ee({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[rc]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&p(e),w(t)}}}class et extends Y{constructor(e){super(),K(this,e,null,lc,J,{})}}function oc(l){let e,n,t;return e=new Pe({props:{color:Z.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function sc(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ic(l){let e,n,t,r,o,s,u,i,a;return o=new ee({props:{href:"https://gtfs.org",$$slots:{default:[sc]},$$scope:{ctx:l}}}),i=new et({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=T("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(i,f)}}}function ac(l){let e,n,t;return n=new me({props:{$$slots:{default:[ic]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function fc(l){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uc(l){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cc(l){let e;function n(o,s){return o[2].has_bus_lane?uc:fc}let t=n(l),r=t(l);return{c(){r.c(),e=Ee()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function $c(l){let e,n;return e=new fe({props:{$$slots:{default:[cc,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pc(l){let e,n;const t=[q(Ft),{sourceLayer:Ft},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[$c]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Ft)),s&0&&{sourceLayer:Ft},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function mc(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[ac],default:[oc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Ft}.pmtiles`,$$slots:{default:[pc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Ft="bus_routes";function _c(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class gc extends Y{constructor(e){super(),K(this,e,_c,mc,J,{})}}function Hr(l){const e=Tc(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function qr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function dc(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hc(l){let e,n,t,r,o,s,u,i;return u=new et({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=O(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=O(),b(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),v(u,a,f),i=!0},p:ne,i(a){i||(g(u.$$.fragment,a),i=!0)},o(a){d(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),w(u,a)}}}function bc(l){let e,n,t;return n=new me({props:{$$slots:{default:[hc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Gr(l){let e,n,t;return n=new xe({props:{$$slots:{default:[wc]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function vc(l){let e,n,t=l[9]+"",r,o,s;return e=new Pe({props:{color:l[10]}}),{c(){b(e.$$.fragment),n=O(),r=k(t),o=O()},m(u,i){v(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:ne,i(u){s||(g(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function Ur(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[vc]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function wc(l){let e,n,t=je(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Ur(qr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Ee()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=je(s[2]);let i;for(i=0;i<t.length;i+=1){const a=qr(s,t,i);r[i]?(r[i].p(a,u),g(r[i],1)):(r[i]=Ur(a),r[i].c(),g(r[i],1),r[i].m(e.parentNode,e))}for(ce(),i=t.length;i<r.length;i+=1)o(i);$e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)g(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),wt(r,s)}}}function kc(l){Hr(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,_,m=l[8]+"",y;return{c(){e=T("h2"),t=k(n),r=O(),o=T("p"),s=k("Direction: "),u=T("b"),a=O(),f=T("p"),c=k("Width: "),_=T("b"),y=k(m)},m(C,S){$(C,e,S),h(e,t),$(C,r,S),$(C,o,S),h(o,s),h(o,u),u.innerHTML=i,$(C,a,S),$(C,f,S),h(f,c),h(f,_),h(_,y)},p(C,S){Hr(C),S&32&&n!==(n=C[6]+"")&&B(t,n),S&32&&i!==(i=C[7]+"")&&(u.innerHTML=i),S&32&&m!==(m=C[8]+"")&&B(y,m)},d(C){C&&(p(e),p(r),p(o),p(a),p(f))}}}function yc(l){let e,n;return e=new fe({props:{$$slots:{default:[kc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Sc(l){let e,n;const t=[q(Dt),{sourceLayer:Dt},{paint:{"line-color":$t(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Wr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[yc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),e.$on("click",Oc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Wr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Cc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[bc],default:[dc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Gr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Dt}.pmtiles`,$$slots:{default:[Sc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&8192&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=Gr(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&8195&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Dt="cycle_paths";function Tc(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function Oc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Wr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function Lc(l,e,n){let t=[["track","Separated tracks",Z.cycle_paths.track],["lane","Unprotected lanes",Z.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class Ac extends Y{constructor(e){super(),K(this,e,Lc,Cc,J,{})}}function Ic(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Nc(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pc(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Nc]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),r=k(", as of September 2021."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Mc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Pc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Fc(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function Dc(l){let e,n;return e=new fe({props:{$$slots:{default:[Fc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ec(l){let e,n;const t=[q(Et),{sourceLayer:Et},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Dc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Et)),s&0&&{sourceLayer:Et},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function jc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Mc],default:[Ic]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Et}.pmtiles`,$$slots:{default:[Ec]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Et="mrn";function Rc(l,e,n){let t=Z.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Bc extends Y{constructor(e){super(),K(this,e,Rc,jc,J,{})}}function zc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Strategic Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Hc(l){let e;return{c(){e=k(`OS Open Roads
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qc(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Hc]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Gc(l){let e,n,t;return n=new me({props:{$$slots:{default:[qc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Uc(l){let e,n=(l[3].name??"Unknown SRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown SRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function Wc(l){let e,n;return e=new fe({props:{$$slots:{default:[Uc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Vc(l){let e,n;const t=[q(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Wc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Xc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Gc],default:[zc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${jt}.pmtiles`,$$slots:{default:[Vc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let jt="srn";function Jc(l,e,n){let t=Z.srn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Yc extends Y{constructor(e){super(),K(this,e,Jc,Xc,J,{})}}function Kc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Zc(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qc(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Zc]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function xc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Qc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Vr(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&B(o,r)},d(s){s&&p(e)}}}function Xr(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&B(o,r)},d(s){s&&p(e)}}}function Jr(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&B(o,r)},d(s){s&&p(e)}}}function Yr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&B(o,r)},d(s){s&&p(e)}}}function Kr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&B(o,r)},d(s){s&&p(e)}}}function Zr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&B(o,r)},d(s){s&&p(e)}}}function Qr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&B(o,r)},d(s){s&&p(e)}}}function xr(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&B(o,r)},d(s){s&&p(e)}}}function el(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&B(o,r)},d(s){s&&p(e)}}}function e$(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&Vr(l),c=l[3].Greenway&&Xr(l),_=l[3].RouteType&&Jr(l),m=l[3].RouteNo&&Yr(l),y=l[3].RouteCat&&Kr(l),C=l[3].OpenStatus&&Zr(l),S=l[3].Surface&&Qr(l),A=l[3].Quality&&xr(l),R=l[3].RoadClass&&el(l);return{c(){e=T("ul"),f&&f.c(),n=O(),c&&c.c(),t=O(),_&&_.c(),r=O(),m&&m.c(),o=O(),y&&y.c(),s=O(),C&&C.c(),u=O(),S&&S.c(),i=O(),A&&A.c(),a=O(),R&&R.c()},m(I,P){$(I,e,P),f&&f.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),_&&_.m(e,null),h(e,r),m&&m.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),C&&C.m(e,null),h(e,u),S&&S.m(e,null),h(e,i),A&&A.m(e,null),h(e,a),R&&R.m(e,null)},p(I,P){I[3].Desc_?f?f.p(I,P):(f=Vr(I),f.c(),f.m(e,n)):f&&(f.d(1),f=null),I[3].Greenway?c?c.p(I,P):(c=Xr(I),c.c(),c.m(e,t)):c&&(c.d(1),c=null),I[3].RouteType?_?_.p(I,P):(_=Jr(I),_.c(),_.m(e,r)):_&&(_.d(1),_=null),I[3].RouteNo?m?m.p(I,P):(m=Yr(I),m.c(),m.m(e,o)):m&&(m.d(1),m=null),I[3].RouteCat?y?y.p(I,P):(y=Kr(I),y.c(),y.m(e,s)):y&&(y.d(1),y=null),I[3].OpenStatus?C?C.p(I,P):(C=Zr(I),C.c(),C.m(e,u)):C&&(C.d(1),C=null),I[3].Surface?S?S.p(I,P):(S=Qr(I),S.c(),S.m(e,i)):S&&(S.d(1),S=null),I[3].Quality?A?A.p(I,P):(A=xr(I),A.c(),A.m(e,a)):A&&(A.d(1),A=null),I[3].RoadClass?R?R.p(I,P):(R=el(I),R.c(),R.m(e,null)):R&&(R.d(1),R=null)},d(I){I&&p(e),f&&f.d(),c&&c.d(),_&&_.d(),m&&m.d(),y&&y.d(),C&&C.d(),S&&S.d(),A&&A.d(),R&&R.d()}}}function t$(l){let e,n;return e=new fe({props:{$$slots:{default:[e$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function n$(l){let e,n;const t=[q(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[t$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Rt)),s&0&&{sourceLayer:Rt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function r$(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[xc],default:[Kc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Rt}.pmtiles`,$$slots:{default:[n$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Rt="national_cycle_network";function l$(l,e,n){let t=Z.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class o$ extends Y{constructor(e){super(),K(this,e,l$,r$,J,{})}}function s$(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function i$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function a$(l){let e,n,t,r,o,s,u,i,a;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[i$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=O(),t=T("p"),t.textContent="Data valid as of 1 January, 2024",r=O(),o=T("p"),s=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(g(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),w(u)}}}function f$(l){let e,n,t;return n=new me({props:{$$slots:{default:[a$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function tl(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function u$(l){let e,n,t,r=l[4].side+"",o,s,u,i,a,f=l[4].average+"",c,_,m,y,C,S,A=l[4].minimum+"",R,I;return{c(){e=T("p"),n=k("Side of the road: "),t=T("b"),o=k(r),s=O(),u=T("p"),i=k("Average width: "),a=T("b"),c=k(f),_=k(`
        meters`),m=O(),y=T("p"),C=k("Minimum width: "),S=T("b"),R=k(A),I=k(`
        meters`)},m(P,L){$(P,e,L),h(e,n),h(e,t),h(t,o),$(P,s,L),$(P,u,L),h(u,i),h(u,a),h(a,c),h(u,_),$(P,m,L),$(P,y,L),h(y,C),h(y,S),h(S,R),h(y,I)},p(P,L){L&16&&r!==(r=P[4].side+"")&&B(o,r),L&16&&f!==(f=P[4].average+"")&&B(c,f),L&16&&A!==(A=P[4].minimum+"")&&B(R,A)},d(P){P&&(p(e),p(s),p(u),p(m),p(y))}}}function c$(l){let e,n;return e=new fe({props:{$$slots:{default:[u$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $$(l){let e,n;const t=[q(Bt),{sourceLayer:Bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get","average"],l[2],l[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[c$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(Bt)),s&0&&{sourceLayer:Bt},t[2],t[3],s&6&&{paint:{"line-color":Le(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function p$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[f$],default:[s$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&tl(l);return o=new ke({props:{url:`pmtiles://${cn()}/v1/${Bt}.pmtiles`,$$slots:{default:[$$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=tl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Bt="pavement_widths";function m$(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class _$ extends Y{constructor(e){super(),K(this,e,m$,p$,J,{})}}function g$(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function d$(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function h$(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function b$(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new ee({props:{href:"https://www.pct.bike",$$slots:{default:[d$]},$$scope:{ctx:l}}}),a=new ee({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[h$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=O(),o=T("p"),s=k("See "),b(u.$$.fragment),i=k(" and "),b(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(_,m){$(_,e,m),$(_,n,m),$(_,t,m),$(_,r,m),$(_,o,m),h(o,s),v(u,o,null),h(o,i),v(a,o,null),h(o,f),c=!0},p(_,m){const y={};m&1024&&(y.$$scope={dirty:m,ctx:_}),u.$set(y);const C={};m&1024&&(C.$$scope={dirty:m,ctx:_}),a.$set(C)},i(_){c||(g(u.$$.fragment,_),g(a.$$.fragment,_),c=!0)},o(_){d(u.$$.fragment,_),d(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(r),p(o)),w(u),w(a)}}}function v$(l){let e,n,t;return n=new me({props:{$$slots:{default:[b$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function nl(l){let e,n,t,r,o,s,u,i;e=new Ge({props:{colorScale:l[3],limits:l[4]}});function a(m){l[7](m)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new eo({props:f}),W.push(()=>V(t,"value",a));function c(m){l[8](m)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(_.value=l[1]),s=new _t({props:_}),W.push(()=>V(s,"value",c)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,o,y),v(s,m,y),i=!0},p(m,y){const C={};!r&&y&1&&(r=!0,C.value=m[0],X(()=>r=!1)),t.$set(C);const S={};!u&&y&2&&(u=!0,S.value=m[1],X(()=>u=!1)),s.$set(S)},i(m){i||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(s.$$.fragment,m),i=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(s.$$.fragment,m),i=!1},d(m){m&&(p(n),p(o)),w(e,m),w(t,m),w(s,m)}}}function w$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Kt(!1),t=Ee(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function k$(l){let e,n;return e=new fe({props:{$$slots:{default:[w$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function y$(l){let e,n;const t=[q(it),{sourceLayer:it},{paint:{"line-color":Le(["get",l[1]],l[4],l[3]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[2]&&l[0]==it?"visible":"none"}}];let r={$$slots:{default:[k$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(q(it)),s&0&&{sourceLayer:it},s&26&&{paint:{"line-color":Le(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":Q(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==it?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function S$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Kt(!1),t=Ee(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function C$(l){let e,n;return e=new fe({props:{$$slots:{default:[S$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function T$(l){let e,n;const t=[q(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get",l[1]],l[4],l[3]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[2]&&l[0]==mt?"visible":"none"}}];let r={$$slots:{default:[C$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(q(mt)),s&0&&{sourceLayer:mt},t[2],t[3],s&26&&{paint:{"line-color":Le(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":Q(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==mt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function O$(l){let e,n,t,r,o,s,u,i;function a(_){l[6](_)}let f={$$slots:{right:[v$],default:[g$]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),W.push(()=>V(e,"checked",a));let c=l[2]&&nl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${it}.pmtiles`,$$slots:{default:[y$]},$$scope:{ctx:l}}}),u=new ke({props:{url:`pmtiles://${he()}/v1/${mt}.pmtiles`,$$slots:{default:[T$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),c&&c.c(),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment)},m(_,m){v(e,_,m),$(_,t,m),c&&c.m(_,m),$(_,r,m),v(o,_,m),$(_,s,m),v(u,_,m),i=!0},p(_,[m]){const y={};m&1024&&(y.$$scope={dirty:m,ctx:_}),!n&&m&4&&(n=!0,y.checked=_[2],X(()=>n=!1)),e.$set(y),_[2]?c?(c.p(_,m),m&4&&g(c,1)):(c=nl(_),c.c(),g(c,1),c.m(r.parentNode,r)):c&&(ce(),d(c,1,1,()=>{c=null}),$e());const C={};m&1031&&(C.$$scope={dirty:m,ctx:_}),o.$set(C);const S={};m&1031&&(S.$$scope={dirty:m,ctx:_}),u.$set(S)},i(_){i||(g(e.$$.fragment,_),g(c),g(o.$$.fragment,_),g(u.$$.fragment,_),i=!0)},o(_){d(e.$$.fragment,_),d(c),d(o.$$.fragment,_),d(u.$$.fragment,_),i=!1},d(_){_&&(p(t),p(r),p(s)),w(e,_),c&&c.d(_),w(o,_),w(u,_)}}}let it="pct_commute",mt="pct_school";function L$(l,e,n){let t=Z.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=it,s="baseline",u=!1;function i(_){let m=_.baseline,y=_.gov_target,C=_.go_dutch,S=`<h2>Trip purpose: ${o==it?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let A=(y/m).toFixed(1),R=(C/m).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${A}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${R}x</b> of baseline)</p>`}return S}function a(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){s=_,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class A$ extends Y{constructor(e){super(),K(this,e,L$,O$,J,{})}}function I$(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function N$(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function P$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function M$(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new ee({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[N$]},$$scope:{ctx:l}}}),f=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[P$]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",u=O(),i=T("p"),a=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),c=k(".")},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,r),$(m,o,y),$(m,s,y),$(m,u,y),$(m,i,y),h(i,a),v(f,i,null),h(i,c),_=!0},p(m,y){const C={};y&256&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&256&&(S.$$scope={dirty:y,ctx:m}),f.$set(S)},i(m){_||(g(t.$$.fragment,m),g(f.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(f.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(u),p(i)),w(t),w(f)}}}function F$(l){let e,n,t;return n=new me({props:{$$slots:{default:[M$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function rl(l){let e,n,t,r,o;e=new Ge({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new eo({props:u}),W.push(()=>V(t,"value",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],X(()=>r=!1)),t.$set(f)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function D$(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,_=l[4][l[7].highest_description]+"",m,y;return{c(){e=T("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=O(),u=T("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),m=k(_),y=k(")")},m(C,S){$(C,e,S),h(e,n),h(e,r),h(e,o),$(C,s,S),$(C,u,S),h(u,i),h(u,f),h(u,c),h(u,m),h(u,y)},p(C,S){S&128&&t!==(t=C[7].indicative_mph+"")&&B(r,t),S&128&&a!==(a=C[7].highest_mph+"")&&B(f,a),S&128&&_!==(_=C[4][C[7].highest_description]+"")&&B(m,_)},d(C){C&&(p(e),p(s),p(u))}}}function E$(l){let e,n;return e=new fe({props:{$$slots:{default:[D$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function j$(l){let e,n;const t=[q(zt),{sourceLayer:zt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get",l[0]],l[3],l[2]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[E$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&15?te(t,[s&0&&ae(q(zt)),s&0&&{sourceLayer:zt},t[2],t[3],s&13&&{paint:{"line-color":Le(["get",o[0]],o[3],o[2]),"line-width":He,"line-opacity":Q(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function R$(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={$$slots:{right:[F$],default:[I$]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[1]&&rl(l);return o=new ke({props:{url:`pmtiles://${cn()}/v1/${zt}.pmtiles`,$$slots:{default:[j$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&g(a,1)):(a=rl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&259&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let zt="road_speeds";function B$(l,e,n){let t=Z.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class z$ extends Y{constructor(e){super(),K(this,e,B$,R$,J,{})}}function H$(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function q$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function G$(l){let e,n,t,r,o,s,u,i,a;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[q$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",r=O(),o=T("p"),s=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(g(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),w(u)}}}function U$(l){let e,n,t;return n=new me({props:{$$slots:{default:[G$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ll(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function W$(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",_,m;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(r),s=k(`
        meters`),u=O(),i=T("p"),a=k("Minimum width: "),f=T("b"),_=k(c),m=k(`
        meters`)},m(y,C){$(y,e,C),h(e,n),h(e,t),h(t,o),h(e,s),$(y,u,C),$(y,i,C),h(i,a),h(i,f),h(f,_),h(i,m)},p(y,C){C&16&&r!==(r=y[4].average+"")&&B(o,r),C&16&&c!==(c=y[4].minimum+"")&&B(_,c)},d(y){y&&(p(e),p(u),p(i))}}}function V$(l){let e,n;return e=new fe({props:{$$slots:{default:[W$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function X$(l){let e,n;const t=[q(Ht),{sourceLayer:Ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get","average"],l[2],l[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[V$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(Ht)),s&0&&{sourceLayer:Ht},t[2],t[3],s&6&&{paint:{"line-color":Le(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function J$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[U$],default:[H$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&ll(l);return o=new ke({props:{url:`pmtiles://${cn()}/v1/${Ht}.pmtiles`,$$slots:{default:[X$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=ll(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Ht="road_widths";function Y$(l,e,n){let t=Z.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class K$ extends Y{constructor(e){super(),K(this,e,Y$,J$,J,{})}}function Z$(l){let e,n,t;return e=new Pe({props:{color:Z.trams}}),{c(){b(e.$$.fragment),n=k(`
  Trams`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Q$(l){let e,n,t,r;return t=new et({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function x$(l){let e,n,t;return n=new me({props:{$$slots:{default:[Q$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ep(l){let e,n;const t=[q(qt),{sourceLayer:qt},{paint:{"line-color":Z.trams,"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),e.$on("click",np),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(qt)),s&0&&{sourceLayer:qt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function tp(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[x$],default:[Z$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${qt}.pmtiles`,$$slots:{default:[ep]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let qt="trams";function np(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function rp(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class lp extends Y{constructor(e){super(),K(this,e,rp,tp,J,{})}}function op(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sp(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ip(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[sp]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=O(),s=T("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),$(f,o,c),$(f,s,c),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){a||(g(t.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),w(t),w(i,f)}}}function ap(l){let e,n,t;return n=new me({props:{$$slots:{default:[ip]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ol(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function fp(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,_,m,y,C,S=l[4].peak_description+"",A,R,I,P,L,M=l[4].total+"",D,N,j=l[4].total_description+"",U,H;return{c(){e=T("p"),n=k("Stop name: "),t=T("b"),o=k(r),s=O(),u=T("p"),i=k("Peak: "),a=T("b"),c=k(f),_=k(`
        buses during the busiest hour of any day`),m=O(),y=T("p"),C=k("The peak hour is "),A=k(S),R=O(),I=T("p"),P=k("Total buses per day: "),L=T("b"),D=k(M),N=k(`
        (for `),U=k(j),H=k(", the busiest day of the week)")},m(E,F){$(E,e,F),h(e,n),h(e,t),h(t,o),$(E,s,F),$(E,u,F),h(u,i),h(u,a),h(a,c),h(u,_),$(E,m,F),$(E,y,F),h(y,C),h(y,A),$(E,R,F),$(E,I,F),h(I,P),h(I,L),h(L,D),h(I,N),h(I,U),h(I,H)},p(E,F){F&16&&r!==(r=E[4].stop_name+"")&&B(o,r),F&16&&f!==(f=E[4].peak+"")&&B(c,f),F&16&&S!==(S=E[4].peak_description+"")&&B(A,S),F&16&&M!==(M=E[4].total+"")&&B(D,M),F&16&&j!==(j=E[4].total_description+"")&&B(U,j)},d(E){E&&(p(e),p(s),p(u),p(m),p(y),p(R),p(I))}}}function up(l){let e,n;return e=new fe({props:{$$slots:{default:[fp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cp(l){let e,n;const t=[q(Gt),{sourceLayer:Gt},{paint:{"circle-color":Le(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[up]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new pt({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(Gt)),s&0&&{sourceLayer:Gt},s&6&&{paint:{"circle-color":Le(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function $p(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[ap],default:[op]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&ol(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Gt}.pmtiles`,$$slots:{default:[cp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=ol(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Gt="bus_stops";function pp(l,e,n){let t=Z.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class mp extends Y{constructor(e){super(),K(this,e,pp,$p,J,{})}}function _p(l){let e,n,t;return{c(){e=T("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=Ze(e,"change",l[5]),n=!0)},p:ne,d(r){r&&p(e),l[7](null),n=!1,t()}}}function sl(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[dp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gp(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Pe({props:{color:Ut}}),{c(){b(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(u,i){v(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&B(r,t)},i(u){s||(g(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function dp(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[gp]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function hp(l){let e,n,t,r,o,s;e=new Sn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[_p]},$$scope:{ctx:l}}}),t=new to({props:{errorMessage:l[3]}});let u=l[2]>0&&sl(l);return{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),u&&u.c(),o=Ee()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&g(u,1)):(u=sl(i),u.c(),g(u,1),u.m(o.parentNode,o)):u&&(ce(),d(u,1,1,()=>{u=null}),$e())},i(i){s||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(u),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(u),s=!1},d(i){i&&(p(n),p(r),p(o)),w(e,i),w(t,i),u&&u.d(i)}}}function bp(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,_,m,y,C=l[10].notes+"",S,A,R,I,P,L,M,D=l[10].id+"",N,j,U,H,E,F=(l[10].inspector??"???")+"",z,oe,se,ye=l[10].submission_time+"",de,Ce,ie,Ne,Te,be=l[10].scheme_reference+"",re,pe,ge,ve=l[10].current_design_stage+"",_e;return{c(){e=T("div"),n=T("h2"),r=k(t),o=O(),s=T("p"),u=T("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=O(),_=T("p"),m=T("u"),m.textContent="Notes",y=k(`
          : `),S=k(C),A=O(),R=T("hr"),I=O(),P=T("p"),L=k("Critical issue ID: "),M=T("b"),N=k(D),j=O(),U=T("p"),H=k("Submitted by "),E=T("b"),z=k(F),oe=k(`
          at
          `),se=T("b"),de=k(ye),Ce=O(),ie=T("p"),Ne=k("For scheme "),Te=T("b"),re=k(be),pe=k(`
          in stage
          `),ge=T("b"),_e=k(ve),Se(e,"max-width","30vw")},m(Ie,Me){$(Ie,e,Me),h(e,n),h(n,r),h(e,o),h(e,s),h(s,u),h(s,i),h(s,f),h(e,c),h(e,_),h(_,m),h(_,y),h(_,S),h(e,A),h(e,R),h(e,I),h(e,P),h(P,L),h(P,M),h(M,N),h(e,j),h(e,U),h(U,H),h(U,E),h(E,z),h(U,oe),h(U,se),h(se,de),h(e,Ce),h(e,ie),h(ie,Ne),h(ie,Te),h(Te,re),h(ie,pe),h(ie,ge),h(ge,_e)},p(Ie,Me){Me&1024&&t!==(t=Ie[10].critical_type+"")&&B(r,t),Me&1024&&a!==(a=Ie[10].location_description+"")&&B(f,a),Me&1024&&C!==(C=Ie[10].notes+"")&&B(S,C),Me&1024&&D!==(D=Ie[10].id+"")&&B(N,D),Me&1024&&F!==(F=(Ie[10].inspector??"???")+"")&&B(z,F),Me&1024&&ye!==(ye=Ie[10].submission_time+"")&&B(de,ye),Me&1024&&be!==(be=Ie[10].scheme_reference+"")&&B(re,be),Me&1024&&ve!==(ve=Ie[10].current_design_stage+"")&&B(_e,ve)},d(Ie){Ie&&p(e)}}}function vp(l){let e,n;return e=new fe({props:{$$slots:{default:[bp,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function wp(l){let e,n,t,r,o,s;const u=[q("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":Ut,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let m=0;m<u.length;m+=1)i=x(i,u[m]);e=new pt({props:i}),e.$on("click",l[6]);const a=[q("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let m=0;m<a.length;m+=1)f=x(f,a[m]);t=new $n({props:f});const c=[q("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Ut,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let _={$$slots:{default:[vp]},$$scope:{ctx:l}};for(let m=0;m<c.length;m+=1)_=x(_,c[m]);return o=new pt({props:_}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,r,y),v(o,m,y),s=!0},p(m,y){const C=y&2?te(u,[u[0],u[1],y&0&&{paint:{"circle-color":Ut,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:m[1]?"visible":"none"}},u[4]]):{};e.$set(C);const S=y&2?te(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:m[1]?"visible":"none"}}]):{};t.$set(S);const A=y&2?te(c,[c[0],c[1],c[2],c[3],y&0&&{paint:{"circle-color":Ut,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:m[1]?"visible":"none"}}]):{};y&2048&&(A.$$scope={dirty:y,ctx:m}),o.$set(A)},i(m){s||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),s=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),s=!1},d(m){m&&(p(n),p(r)),w(e,m),w(t,m),w(o,m)}}}function kp(l){let e,n,t,r;return e=new Re({props:{label:"Critical Issues",$$slots:{default:[hp]},$$scope:{ctx:l}}}),t=new yt({props:{id:wo,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[wp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let wo="criticals",Ut="red";function yp(l,e,n){let t;Ae(l,En,m=>n(9,t=m));let r,o=!0,s=0,u="",i=kn();async function a(m){try{n(4,i=await Oa(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}async function f(m){let y=await t.getSource(wo).getClusterExpansionZoom(m.detail.features[0].properties.cluster_id);t.easeTo({center:m.detail.features[0].geometry.coordinates,zoom:y})}function c(m){W[m?"unshift":"push"](()=>{r=m,n(0,r)})}function _(m){o=m,n(1,o)}return[r,o,s,u,i,a,f,c,_]}class Sp extends Y{constructor(e){super(),K(this,e,yp,kp,J,{})}}function Cp(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tp(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Op(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Tp]},$$scope:{ctx:l}}}),s=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Lp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Op]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function il(l){let e,n;return e=new Rn({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ap(l){let e,n=al(l[3])+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=al(r[3])+"")&&B(t,n)},d(r){r&&p(e)}}}function Ip(l){let e,n;return e=new fe({props:{$$slots:{default:[Ap,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Np(l){let e,n;const t=[q(Wt),{sourceLayer:Wt},{paint:{"circle-color":$t(["get","crossing"],{traffic_signals:Z.signalized_crossing},Z.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Ip]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new pt({props:r}),e.$on("click",Mp),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Wt)),s&0&&{sourceLayer:Wt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Pp(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[Lp],default:[Cp]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&il(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Wt}.pmtiles`,$$slots:{default:[Np]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=il(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&17&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Wt="crossings";function al(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function Mp(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function Fp(l,e,n){let t=!1,r=[["Signalized",Z.signalized_crossing],["Other",Z.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class Dp extends Y{constructor(e){super(),K(this,e,Fp,Pp,J,{})}}function Ep(l){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jp(l){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rp(l){let e,n,t,r,o,s,u,i,a,f,c,_,m;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[jp]},$$scope:{ctx:l}}}),f=new De({}),_=new et({}),{c(){e=T("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=O(),t=T("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=O(),o=T("p"),s=k("This layer is built from "),b(u.$$.fragment),i=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=O(),b(f.$$.fragment),c=O(),b(_.$$.fragment)},m(y,C){$(y,e,C),$(y,n,C),$(y,t,C),$(y,r,C),$(y,o,C),h(o,s),v(u,o,null),h(o,i),$(y,a,C),v(f,y,C),$(y,c,C),v(_,y,C),m=!0},p(y,C){const S={};C&32&&(S.$$scope={dirty:C,ctx:y}),u.$set(S)},i(y){m||(g(u.$$.fragment,y),g(f.$$.fragment,y),g(_.$$.fragment,y),m=!0)},o(y){d(u.$$.fragment,y),d(f.$$.fragment,y),d(_.$$.fragment,y),m=!1},d(y){y&&(p(e),p(n),p(t),p(r),p(o),p(a),p(c)),w(u),w(f,y),w(_,y)}}}function Bp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Rp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function fl(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zp(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=T("p"),n=k("Gradient: "),t=T("b"),o=k(r),s=k(`
        %`)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,i){i&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&B(o,r)},d(u){u&&p(e)}}}function Hp(l){let e,n;return e=new fe({props:{$$slots:{default:[zp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qp(l){let e,n,t,r;const o=[q(st),{sourceLayer:st},{manageHoverState:!0},{paint:{"line-color":Le(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[Hp]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Oe({props:s});const u=[q(st+"_arrows"),{sourceLayer:st},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new $n({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(q(st)),f&0&&{sourceLayer:st},o[2],f&6&&{paint:{"line-color":Le(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":He,"line-opacity":Q(1,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?te(u,[f&0&&ae(q(st+"_arrows")),f&0&&{sourceLayer:st},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Gp(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Bp],default:[Ep]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&fl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${st}.pmtiles`,$$slots:{default:[qp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=fl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let st="gradient";function Up(l,e,n){let t=Z.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Wp extends Y{constructor(e){super(),K(this,e,Up,Gp,J,{})}}function Vp(l){let e,n,t;return{c(){e=T("img"),t=k(`
  Cycle parking`),an(e.src,n=Lo)||G(e,"src",n),G(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function Xp(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jp(l){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yp(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Xp]},$$scope:{ctx:l}}}),i=new ee({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Jp]},$$scope:{ctx:l}}}),f=new et({}),{c(){e=T("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),s=T("p"),u=k("Icon from "),b(i.$$.fragment),a=O(),b(f.$$.fragment)},m(_,m){$(_,e,m),h(e,n),v(t,e,null),h(e,r),$(_,o,m),$(_,s,m),h(s,u),v(i,s,null),$(_,a,m),v(f,_,m),c=!0},p(_,m){const y={};m&8&&(y.$$scope={dirty:m,ctx:_}),t.$set(y);const C={};m&8&&(C.$$scope={dirty:m,ctx:_}),i.$set(C)},i(_){c||(g(t.$$.fragment,_),g(i.$$.fragment,_),g(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(i.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(o),p(s),p(a)),w(t),w(i),w(f,_)}}}function Kp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Yp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Zp(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&B(o,r)},d(s){s&&p(e)}}}function Qp(l){let e,n;return e=new fe({props:{$$slots:{default:[Zp,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xp(l){let e,n;const t=[q(Vt),{sourceLayer:Vt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Qp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new $n({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Vt)),s&0&&{sourceLayer:Vt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function em(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Kp],default:[Vp]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Vt}.pmtiles`,$$slots:{default:[xp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Vt="cycle_parking";function tm(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class nm extends Y{constructor(e){super(),K(this,e,tm,em,J,{})}}function rm(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lm(l){let e,n,t,r;return t=new et({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function om(l){let e,n,t;return n=new me({props:{$$slots:{default:[lm]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ul(l){let e,n,t;return n=new xe({props:{$$slots:{default:[fm]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function sm(l){let e,n,t;return e=new Pe({props:{color:Z.education.schools}}),{c(){b(e.$$.fragment),n=k(`
        Schools`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function im(l){let e,n,t;return e=new Pe({props:{color:Z.education.colleges}}),{c(){b(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function am(l){let e,n,t;return e=new Pe({props:{color:Z.education.universities}}),{c(){b(e.$$.fragment),n=k(`
        Universities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function fm(l){let e,n,t,r,o,s,u,i,a;function f(S){l[3](S)}let c={$$slots:{default:[sm]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),W.push(()=>V(e,"checked",f));function _(S){l[4](S)}let m={$$slots:{default:[im]},$$scope:{ctx:l}};l[1].college!==void 0&&(m.checked=l[1].college),r=new le({props:m}),W.push(()=>V(r,"checked",_));function y(S){l[5](S)}let C={$$slots:{default:[am]},$$scope:{ctx:l}};return l[1].university!==void 0&&(C.checked=l[1].university),u=new le({props:C}),W.push(()=>V(u,"checked",y)),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment),s=O(),b(u.$$.fragment)},m(S,A){v(e,S,A),$(S,t,A),v(r,S,A),$(S,s,A),v(u,S,A),a=!0},p(S,A){const R={};A&128&&(R.$$scope={dirty:A,ctx:S}),!n&&A&2&&(n=!0,R.checked=S[1].school,X(()=>n=!1)),e.$set(R);const I={};A&128&&(I.$$scope={dirty:A,ctx:S}),!o&&A&2&&(o=!0,I.checked=S[1].college,X(()=>o=!1)),r.$set(I);const P={};A&128&&(P.$$scope={dirty:A,ctx:S}),!i&&A&2&&(i=!0,P.checked=S[1].university,X(()=>i=!1)),u.$set(P)},i(S){a||(g(e.$$.fragment,S),g(r.$$.fragment,S),g(u.$$.fragment,S),a=!0)},o(S){d(e.$$.fragment,S),d(r.$$.fragment,S),d(u.$$.fragment,S),a=!1},d(S){S&&(p(t),p(s)),w(e,S),w(r,S),w(u,S)}}}function um(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&B(t,n)},d(r){r&&p(e)}}}function cm(l){let e,n;return e=new fe({props:{$$slots:{default:[um,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $m(l){let e,n;const t=[q(Xt),{sourceLayer:Xt},{paint:{"fill-color":$t(["get","type"],{school:Z.education.schools,college:Z.education.colleges,university:Z.education.universities},"grey"),"fill-opacity":Q(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:cl(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[cm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Xt)),s&0&&{sourceLayer:Xt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:cl(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function pm(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[om],default:[rm]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&ul(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Xt}.pmtiles`,$$slots:{default:[$m]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&128&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=ul(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&131&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Xt="education";function cl(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function mm(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class _m extends Y{constructor(e){super(),K(this,e,mm,pm,J,{})}}function gm(l){let e,n,t,r;return e=new Pe({props:{color:l[4]}}),{c(){b(e.$$.fragment),n=O(),t=k(l[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&B(t,o[2])},i(o){r||(g(e.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function dm(l){let e;const n=l[5].default,t=dt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&ht(t,n,r,r[7],e?vt(n,r[7],o,null):bt(r[7]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function hm(l){let e,n,t;return n=new me({props:{$$slots:{default:[dm]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function bm(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&B(t,n)},d(r){r&&p(e)}}}function vm(l){let e,n;return e=new fe({props:{$$slots:{default:[bm,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function wm(l){let e,n;const t=[q(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":Q(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[vm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&25?te(t,[s&1&&ae(q(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Q(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function km(l){let e,n,t,r,o;function s(i){l[6](i)}let u={$$slots:{right:[hm],default:[gm]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${l[0]}.pmtiles`,$$slots:{default:[wm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],X(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${he()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function ym(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=Z[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class ko extends Y{constructor(e){super(),K(this,e,ym,km,J,{name:0,singularNoun:1,pluralNoun:2})}}function Sm(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cm(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Sm]},$$scope:{ctx:l}}}),s=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Tm(l){let e,n;return e=new ko({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Cm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Om extends Y{constructor(e){super(),K(this,e,null,Tm,J,{})}}function Lm(l){let e,n,t;return{c(){e=T("img"),t=k(`
  Railway Stations`),an(e.src,n=Ao)||G(e,"src",n),G(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function Am(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Im(l){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nm(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Am]},$$scope:{ctx:l}}}),i=new ee({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Im]},$$scope:{ctx:l}}}),c=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),s=T("p"),u=k("Icon from "),b(i.$$.fragment),a=k(". (Note that not all stations shown are National Rail.)"),f=O(),b(c.$$.fragment)},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,r),$(m,o,y),$(m,s,y),h(s,u),v(i,s,null),h(s,a),$(m,f,y),v(c,m,y),_=!0},p(m,y){const C={};y&8&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&8&&(S.$$scope={dirty:y,ctx:m}),i.$set(S)},i(m){_||(g(t.$$.fragment,m),g(i.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(i.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(f)),w(t),w(i),w(c,m)}}}function Pm(l){let e,n,t;return n=new me({props:{$$slots:{default:[Nm]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Mm(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&B(t,n)},d(r){r&&p(e)}}}function Fm(l){let e,n;return e=new fe({props:{$$slots:{default:[Mm,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Dm(l){let e,n;const t=[q(Fn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Fm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new $n({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Fn)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Em(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Pm],default:[Lm]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new yt({props:{data:`${he()}/v1/${Fn}.geojson`,$$slots:{default:[Dm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Fn="railway_stations";function jm(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Rm extends Y{constructor(e){super(),K(this,e,jm,Em,J,{})}}function Bm(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zm(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hm(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Bm]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[zm]},$$scope:{ctx:l}}}),i=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function qm(l){let e,n;return e=new ko({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Hm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Gm extends Y{constructor(e){super(),K(this,e,null,qm,J,{})}}function Um(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wm(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vm(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xm(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,y,C,S,A,R,I,P,L,M,D;return t=new ee({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Wm]},$$scope:{ctx:l}}}),A=new ee({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Vm]},$$scope:{ctx:l}}}),M=new De({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=O(),s=T("ul"),u=T("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=O(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=O(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,_=O(),m=T("li"),m.textContent='The "pedestrians" category also include mobility scooters',y=O(),C=T("li"),S=k("All limitations "),b(A.$$.fragment),R=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),I=O(),P=T("p"),P.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=O(),b(M.$$.fragment)},m(N,j){$(N,e,j),h(e,n),v(t,e,null),h(e,r),$(N,o,j),$(N,s,j),h(s,u),h(s,i),h(s,a),h(s,f),h(s,c),h(s,_),h(s,m),h(s,y),h(s,C),h(C,S),v(A,C,null),h(C,R),$(N,I,j),$(N,P,j),$(N,L,j),v(M,N,j),D=!0},p(N,j){const U={};j&16777216&&(U.$$scope={dirty:j,ctx:N}),t.$set(U);const H={};j&16777216&&(H.$$scope={dirty:j,ctx:N}),A.$set(H)},i(N){D||(g(t.$$.fragment,N),g(A.$$.fragment,N),g(M.$$.fragment,N),D=!0)},o(N){d(t.$$.fragment,N),d(A.$$.fragment,N),d(M.$$.fragment,N),D=!1},d(N){N&&(p(e),p(o),p(s),p(I),p(P),p(L)),w(t),w(A),w(M,N)}}}function Jm(l){let e,n,t;return n=new me({props:{$$slots:{default:[Xm]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function $l(l){let e,n,t,r,o,s,u,i,a,f,c,_,m;return n=new xe({props:{small:!0,$$slots:{default:[xm]},$$scope:{ctx:l}}}),f=new Rn({props:{rows:l[14]}}),{c(){e=T("div"),b(n.$$.fragment),t=O(),r=T("div"),o=k(`Filter years:
      `),s=T("input"),u=k(`
      -
      `),i=T("input"),a=O(),b(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(y,C){$(y,e,C),v(n,e,null),h(e,t),h(e,r),h(r,o),h(r,s),Ye(s,l[4]),h(r,u),h(r,i),Ye(i,l[5]),h(e,a),v(f,e,null),c=!0,_||(m=[Ze(s,"input",l[20]),Ze(i,"input",l[21])],_=!0)},p(y,C){const S={};C&16777231&&(S.$$scope={dirty:C,ctx:y}),n.$set(S),C&16&&Qt(s.value)!==y[4]&&Ye(s,y[4]),C&32&&Qt(i.value)!==y[5]&&Ye(i,y[5])},i(y){c||(g(n.$$.fragment,y),g(f.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(f.$$.fragment,y),c=!1},d(y){y&&p(e),w(n),w(f),_=!1,xl(m)}}}function Ym(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Km(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zm(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qm(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xm(l){let e,n,t,r,o,s,u,i,a,f,c,_;function m(L){l[16](L)}let y={$$slots:{default:[Ym]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new le({props:y}),W.push(()=>V(e,"checked",m));function C(L){l[17](L)}let S={$$slots:{default:[Km]},$$scope:{ctx:l}};l[1]!==void 0&&(S.checked=l[1]),r=new le({props:S}),W.push(()=>V(r,"checked",C));function A(L){l[18](L)}let R={$$slots:{default:[Zm]},$$scope:{ctx:l}};l[2]!==void 0&&(R.checked=l[2]),u=new le({props:R}),W.push(()=>V(u,"checked",A));function I(L){l[19](L)}let P={$$slots:{default:[Qm]},$$scope:{ctx:l}};return l[3]!==void 0&&(P.checked=l[3]),f=new le({props:P}),W.push(()=>V(f,"checked",I)),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment),s=O(),b(u.$$.fragment),a=O(),b(f.$$.fragment)},m(L,M){v(e,L,M),$(L,t,M),v(r,L,M),$(L,s,M),v(u,L,M),$(L,a,M),v(f,L,M),_=!0},p(L,M){const D={};M&16777216&&(D.$$scope={dirty:M,ctx:L}),!n&&M&1&&(n=!0,D.checked=L[0],X(()=>n=!1)),e.$set(D);const N={};M&16777216&&(N.$$scope={dirty:M,ctx:L}),!o&&M&2&&(o=!0,N.checked=L[1],X(()=>o=!1)),r.$set(N);const j={};M&16777216&&(j.$$scope={dirty:M,ctx:L}),!i&&M&4&&(i=!0,j.checked=L[2],X(()=>i=!1)),u.$set(j);const U={};M&16777216&&(U.$$scope={dirty:M,ctx:L}),!c&&M&8&&(c=!0,U.checked=L[3],X(()=>c=!1)),f.$set(U)},i(L){_||(g(e.$$.fragment,L),g(r.$$.fragment,L),g(u.$$.fragment,L),g(f.$$.fragment,L),_=!0)},o(L){d(e.$$.fragment,L),d(r.$$.fragment,L),d(u.$$.fragment,L),d(f.$$.fragment,L),_=!1},d(L){L&&(p(t),p(s),p(a)),w(e,L),w(r,L),w(u,L),w(f,L)}}}function pl(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&B(o,r)},d(s){s&&p(e)}}}function ml(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&B(o,r)},d(s){s&&p(e)}}}function e_(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,_,m,y,C,S=_l(l[23])+"",A,R,I,P,L,M=l[23].pedestrian_location&&pl(l),D=l[23].pedestrian_movement&&ml(l);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(r),s=O(),u=T("p"),i=k("Severity: "),a=T("b"),c=k(f),_=O(),m=T("p"),y=k("Casualties: "),C=T("b"),A=k(S),R=O(),M&&M.c(),I=O(),D&&D.c(),P=O(),L=T("p"),L.textContent="Click to open full report in CycleStreets"},m(N,j){$(N,e,j),h(e,n),h(e,t),h(t,o),$(N,s,j),$(N,u,j),h(u,i),h(u,a),h(a,c),$(N,_,j),$(N,m,j),h(m,y),h(m,C),h(C,A),$(N,R,j),M&&M.m(N,j),$(N,I,j),D&&D.m(N,j),$(N,P,j),$(N,L,j)},p(N,j){j&8388608&&r!==(r=N[23].year+"")&&B(o,r),j&8388608&&f!==(f=N[10][N[23].severity]+"")&&B(c,f),j&8388608&&S!==(S=_l(N[23])+"")&&B(A,S),N[23].pedestrian_location?M?M.p(N,j):(M=pl(N),M.c(),M.m(I.parentNode,I)):M&&(M.d(1),M=null),N[23].pedestrian_movement?D?D.p(N,j):(D=ml(N),D.c(),D.m(P.parentNode,P)):D&&(D.d(1),D=null)},d(N){N&&(p(e),p(s),p(u),p(_),p(m),p(R),p(I),p(P),p(L)),M&&M.d(N),D&&D.d(N)}}}function t_(l){let e,n;return e=new fe({props:{$$slots:{default:[e_,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function n_(l){let e,n;const t=[q(Jt),{sourceLayer:Jt},{paint:{"circle-color":Le(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[t_]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new pt({props:r}),e.$on("click",l_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&14528?te(t,[s&0&&ae(q(Jt)),s&0&&{sourceLayer:Jt},s&14336&&{paint:{"circle-color":Le(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function r_(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={$$slots:{right:[Jm],default:[Um]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[6]&&$l(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Jt}.pmtiles`,$$slots:{default:[n_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16777216&&(_.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,_.checked=f[6],X(()=>n=!1)),e.$set(_),f[6]?a?(a.p(f,c),c&64&&g(a,1)):(a=$l(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&16777408&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Jt="stats19";function _l(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function l_(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function o_(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(U,H,E,F,z,oe){let se=["any"];return o&&se.push(["get","pedestrian"]),s&&se.push(["get","cyclist"]),u&&se.push(["get","horse_rider"]),i&&se.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],se]}let _={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},m={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},C=Z.sequential_low_to_high[4],S=Z.sequential_low_to_high[2],A=Z.sequential_low_to_high[0],R=[["Fatal",C],["Serious",S],["Slight",A]];function I(U){r=U,n(6,r)}function P(U){o=U,n(0,o)}function L(U){s=U,n(1,s)}function M(U){u=U,n(2,u)}function D(U){i=U,n(3,i)}function N(){a=Qt(this.value),n(4,a)}function j(){f=Qt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,_,m,y,C,S,A,R,I,P,L,M,D,N,j]}class s_ extends Y{constructor(e){super(),K(this,e,o_,r_,J,{})}}function i_(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function a_(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function f_(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function u_(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new ee({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[a_]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[f_]},$$scope:{ctx:l}}}),f=new De({}),{c(){e=T("p"),n=k("AADF (annual average daily flow) data from "),b(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=O(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=O(),b(f.$$.fragment)},m(_,m){$(_,e,m),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(_,u,m),$(_,i,m),$(_,a,m),v(f,_,m),c=!0},p(_,m){const y={};m&64&&(y.$$scope={dirty:m,ctx:_}),t.$set(y);const C={};m&64&&(C.$$scope={dirty:m,ctx:_}),o.$set(C)},i(_){c||(g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(u),p(i),p(a)),w(t),w(o),w(f,_)}}}function c_(l){let e,n,t;return n=new me({props:{$$slots:{default:[u_]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function gl(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[3]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $_(l){let e,n=l[5].location+"",t,r,o,s,u=l[5].year+"",i,a,f,c=l[5].motor_vehicles.toLocaleString()+"",_,m,y,C,S=l[5].year+"",A,R,I,P=l[5].pedal_cycles.toLocaleString()+"",L,M,D,N,j,U=l[5].method+"",H;return{c(){e=T("h2"),t=k(n),r=O(),o=T("p"),s=k("Total motor vehicles ("),i=k(u),a=k(` AADF):
        `),f=T("b"),_=k(c),m=O(),y=T("p"),C=k("Total pedal cycles ("),A=k(S),R=k(` AADF):
        `),I=T("b"),L=k(P),M=O(),D=T("p"),N=k("Count method: "),j=T("b"),H=k(U)},m(E,F){$(E,e,F),h(e,t),$(E,r,F),$(E,o,F),h(o,s),h(o,i),h(o,a),h(o,f),h(f,_),$(E,m,F),$(E,y,F),h(y,C),h(y,A),h(y,R),h(y,I),h(I,L),$(E,M,F),$(E,D,F),h(D,N),h(D,j),h(j,H)},p(E,F){F&32&&n!==(n=E[5].location+"")&&B(t,n),F&32&&u!==(u=E[5].year+"")&&B(i,u),F&32&&c!==(c=E[5].motor_vehicles.toLocaleString()+"")&&B(_,c),F&32&&S!==(S=E[5].year+"")&&B(A,S),F&32&&P!==(P=E[5].pedal_cycles.toLocaleString()+"")&&B(L,P),F&32&&U!==(U=E[5].method+"")&&B(H,U)},d(E){E&&(p(e),p(r),p(o),p(m),p(y),p(M),p(D))}}}function p_(l){let e,n;return e=new fe({props:{$$slots:{default:[$_,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function m_(l){let e,n;const t=[q(Yt),{sourceLayer:Yt},{paint:{"circle-color":Le(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[p_]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new pt({props:r}),e.$on("click",g_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(Yt)),s&0&&{sourceLayer:Yt},s&6&&{paint:{"circle-color":Le(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function __(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={$$slots:{right:[c_],default:[i_]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&gl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Yt}.pmtiles`,$$slots:{default:[m_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=gl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&65&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Yt="vehicle_counts";function g_(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function d_(l,e,n){let t=Z.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class h_ extends Y{constructor(e){super(),K(this,e,d_,__,J,{})}}function b_(l){let e,n,t,r,o,s,u,i;return e=new _m({}),t=new Om({}),o=new Gm({}),u=new Rm({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),$(a,r,f),v(o,a,f),$(a,s,f),v(u,a,f),i=!0},i(a){i||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),w(e,a),w(t,a),w(o,a),w(u,a)}}}function v_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[b_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function w_(l){let e,n,t,r,o,s,u,i,a,f,c,_;return e=new Ac({}),t=new o$({}),o=new Bc({}),u=new Yc({}),a=new nm({}),c=new Dp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(a.$$.fragment),f=O(),b(c.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,r,y),v(o,m,y),$(m,s,y),v(u,m,y),$(m,i,y),v(a,m,y),$(m,f,y),v(c,m,y),_=!0},i(m){_||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),g(u.$$.fragment,m),g(a.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),d(a.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(n),p(r),p(s),p(i),p(f)),w(e,m),w(t,m),w(o,m),w(u,m),w(a,m),w(c,m)}}}function k_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[w_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function y_(l){let e,n,t,r,o,s;return e=new gc({}),t=new lp({}),o=new mp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(u,i){v(e,u,i),$(u,n,i),v(t,u,i),$(u,r,i),v(o,u,i),s=!0},i(u){s||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function S_(l){let e,n,t,r,o,s,u,i,a,f;return e=new Ou({}),t=new nc({}),o=new Ff({}),u=new nu({}),a=new gu({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(a.$$.fragment)},m(c,_){v(e,c,_),$(c,n,_),v(t,c,_),$(c,r,_),v(o,c,_),$(c,s,_),v(u,c,_),$(c,i,_),v(a,c,_),f=!0},i(c){f||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(u,c),w(a,c)}}}function C_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[S_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function T_(l){let e,n,t,r;return e=new yf({}),t=new Wf({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function O_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[T_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function L_(l){let e,n,t,r,o,s;return e=new K$({}),t=new _$({}),o=new z$({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(u,i){v(e,u,i),$(u,n,i),v(t,u,i),$(u,r,i),v(o,u,i),s=!0},i(u){s||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function A_(l){let e,n,t,r,o,s,u,i,a=Cn()=="Private (development)",f,c,_,m,y;e=new h_({}),t=new s_({}),o=new A$({}),u=new Wp({});let C=a&&L_();return c=new Du({}),m=new Wu({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),C&&C.c(),f=O(),b(c.$$.fragment),_=O(),b(m.$$.fragment)},m(S,A){v(e,S,A),$(S,n,A),v(t,S,A),$(S,r,A),v(o,S,A),$(S,s,A),v(u,S,A),$(S,i,A),C&&C.m(S,A),$(S,f,A),v(c,S,A),$(S,_,A),v(m,S,A),y=!0},p:ne,i(S){y||(g(e.$$.fragment,S),g(t.$$.fragment,S),g(o.$$.fragment,S),g(u.$$.fragment,S),g(C),g(c.$$.fragment,S),g(m.$$.fragment,S),y=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(o.$$.fragment,S),d(u.$$.fragment,S),d(C),d(c.$$.fragment,S),d(m.$$.fragment,S),y=!1},d(S){S&&(p(n),p(r),p(s),p(i),p(f),p(_)),w(e,S),w(t,S),w(o,S),w(u,S),C&&C.d(S),w(c,S),w(m,S)}}}function I_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[A_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function N_(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new qo({props:u}),W.push(()=>V(e,"enabled",s)),r=new Ss({}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],X(()=>n=!1)),e.$set(f)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function P_(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,y,C,S,A,R;return e=new Sp({}),t=new Re({props:{label:"Trip generators",$$slots:{default:[v_]},$$scope:{ctx:l}}}),o=new Re({props:{label:"Existing infrastructure",$$slots:{default:[k_]},$$scope:{ctx:l}}}),u=new Re({props:{label:"Public transit",$$slots:{default:[y_]},$$scope:{ctx:l}}}),a=new Re({props:{label:"Boundaries",$$slots:{default:[C_]},$$scope:{ctx:l}}}),c=new Re({props:{label:"Census",$$slots:{default:[O_]},$$scope:{ctx:l}}}),m=new Re({props:{label:"Other",$$slots:{default:[I_]},$$scope:{ctx:l}}}),C=new Re({props:{label:"Tools",$$slots:{default:[N_]},$$scope:{ctx:l}}}),A=new Ho({props:{disabled:!l[1]}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(a.$$.fragment),f=O(),b(c.$$.fragment),_=O(),b(m.$$.fragment),y=O(),b(C.$$.fragment),S=O(),b(A.$$.fragment)},m(I,P){v(e,I,P),$(I,n,P),v(t,I,P),$(I,r,P),v(o,I,P),$(I,s,P),v(u,I,P),$(I,i,P),v(a,I,P),$(I,f,P),v(c,I,P),$(I,_,P),v(m,I,P),$(I,y,P),v(C,I,P),$(I,S,P),v(A,I,P),R=!0},p(I,P){const L={};P&16&&(L.$$scope={dirty:P,ctx:I}),t.$set(L);const M={};P&16&&(M.$$scope={dirty:P,ctx:I}),o.$set(M);const D={};P&16&&(D.$$scope={dirty:P,ctx:I}),u.$set(D);const N={};P&16&&(N.$$scope={dirty:P,ctx:I}),a.$set(N);const j={};P&16&&(j.$$scope={dirty:P,ctx:I}),c.$set(j);const U={};P&16&&(U.$$scope={dirty:P,ctx:I}),m.$set(U);const H={};P&17&&(H.$$scope={dirty:P,ctx:I}),C.$set(H);const E={};P&2&&(E.disabled=!I[1]),A.$set(E)},i(I){R||(g(e.$$.fragment,I),g(t.$$.fragment,I),g(o.$$.fragment,I),g(u.$$.fragment,I),g(a.$$.fragment,I),g(c.$$.fragment,I),g(m.$$.fragment,I),g(C.$$.fragment,I),g(A.$$.fragment,I),R=!0)},o(I){d(e.$$.fragment,I),d(t.$$.fragment,I),d(o.$$.fragment,I),d(u.$$.fragment,I),d(a.$$.fragment,I),d(c.$$.fragment,I),d(m.$$.fragment,I),d(C.$$.fragment,I),d(A.$$.fragment,I),R=!1},d(I){I&&(p(n),p(r),p(s),p(i),p(f),p(_),p(y),p(S)),w(e,I),w(t,I),w(o,I),w(u,I),w(a,I),w(c,I),w(m,I),w(C,I),w(A,I)}}}function M_(l){let e,n;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function F_(l){let e,n,t,r;return e=new Re({props:{label:"Layers",open:!0,$$slots:{default:[P_]},$$scope:{ctx:l}}}),t=new yt({props:{data:l[2],$$slots:{default:[M_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function D_(l,e,n){let t,r;Ae(l,Or,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&Or.set(!t)},[t,r,o,s]}class E_ extends Y{constructor(e){super(),K(this,e,D_,F_,J,{})}}function dl(l){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function j_(l){let e,n=l[0]&&dl();return{c(){n&&n.c(),e=Ee()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=dl(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(t){t&&p(e),n&&n.d(t)}}}function R_(l,e,n){let{loadFile:t}=e,r=!0;return jn(async()=>{let s=await(await fetch(`${cn()}/v1/all_schemes_output.geojson.gz`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class B_ extends Y{constructor(e){super(),K(this,e,R_,j_,J,{loadFile:1})}}function hl(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),h(e,n),h(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&B(r,t)},d(s){s&&p(e)}}}function z_(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function H_(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function q_(l){let e,n,t,r;return e=new ct({props:{$$slots:{default:[z_]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new ct({props:{$$slots:{default:[H_]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function G_(l){var j,U,H,E;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((j=l[0].browse)==null?void 0:j.authority_or_region)+"",a,f,c,_,m=((U=l[0].browse)==null?void 0:U.capital_scheme_id)+"",y,C,S,A,R=((H=l[0].browse)==null?void 0:H.funding_programme)+"",I,P,L,M,D,N=((E=l[0].browse)==null?void 0:E.current_milestone)&&hl(l);return M=new Go({props:{$$slots:{default:[q_]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Scheme reference: "),r=k(t),o=O(),s=T("p"),u=k("Authority or region: "),a=k(i),f=O(),c=T("p"),_=k("Capital scheme ID: "),y=k(m),C=O(),S=T("p"),A=k("Funding programme: "),I=k(R),P=O(),N&&N.c(),L=O(),b(M.$$.fragment)},m(F,z){$(F,e,z),h(e,n),h(e,r),$(F,o,z),$(F,s,z),h(s,u),h(s,a),$(F,f,z),$(F,c,z),h(c,_),h(c,y),$(F,C,z),$(F,S,z),h(S,A),h(S,I),$(F,P,z),N&&N.m(F,z),$(F,L,z),v(M,F,z),D=!0},p(F,z){var se,ye,de,Ce;(!D||z&1)&&t!==(t=F[0].scheme_reference+"")&&B(r,t),(!D||z&1)&&i!==(i=((se=F[0].browse)==null?void 0:se.authority_or_region)+"")&&B(a,i),(!D||z&1)&&m!==(m=((ye=F[0].browse)==null?void 0:ye.capital_scheme_id)+"")&&B(y,m),(!D||z&1)&&R!==(R=((de=F[0].browse)==null?void 0:de.funding_programme)+"")&&B(I,R),(Ce=F[0].browse)!=null&&Ce.current_milestone?N?N.p(F,z):(N=hl(F),N.c(),N.m(L.parentNode,L)):N&&(N.d(1),N=null);const oe={};z&32&&(oe.$$scope={dirty:z,ctx:F}),M.$set(oe)},i(F){D||(g(M.$$.fragment,F),D=!0)},o(F){d(M.$$.fragment,F),D=!1},d(F){F&&(p(e),p(o),p(s),p(f),p(c),p(C),p(S),p(P),p(L)),N&&N.d(F),w(M,F)}}}function U_(l){let e,n;return e=new Re({props:{label:`${l[0].scheme_name}`,$$slots:{default:[G_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function W_(l,e,n){let t,r;Ae(l,Tt,i=>n(3,t=i)),Ae(l,En,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Io(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";No(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class V_ extends Y{constructor(e){super(),K(this,e,W_,U_,J,{scheme:0})}}function bl(l){let e,n,t,r=l[0].status+"",o;return{c(){e=T("p"),n=k("Status: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].status+"")&&B(o,r)},d(s){s&&p(e)}}}function vl(l){let e,n,t,r=l[0].timescale+"",o;return{c(){e=T("p"),n=k("Timescale: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale+"")&&B(o,r)},d(s){s&&p(e)}}}function wl(l){let e,n,t,r=l[0].timescale_year+"",o;return{c(){e=T("p"),n=k("Estimated completion year: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale_year+"")&&B(o,r)},d(s){s&&p(e)}}}function kl(l){let e,n,t,r=l[0].year_published+"",o;return{c(){e=T("p"),n=k("Scheme most recently published: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_published+"")&&B(o,r)},d(s){s&&p(e)}}}function yl(l){let e,n,t,r=l[0].year_consulted+"",o;return{c(){e=T("p"),n=k("Scheme most recently consulted on: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_consulted+"")&&B(o,r)},d(s){s&&p(e)}}}function X_(l){let e,n,t,r,o,s=l[0].status&&bl(l),u=l[0].timescale&&vl(l),i=l[0].timescale_year&&wl(l),a=l[0].year_published&&kl(l),f=l[0].year_consulted&&yl(l);return{c(){s&&s.c(),e=O(),u&&u.c(),n=O(),i&&i.c(),t=O(),a&&a.c(),r=O(),f&&f.c(),o=Ee()},m(c,_){s&&s.m(c,_),$(c,e,_),u&&u.m(c,_),$(c,n,_),i&&i.m(c,_),$(c,t,_),a&&a.m(c,_),$(c,r,_),f&&f.m(c,_),$(c,o,_)},p(c,[_]){c[0].status?s?s.p(c,_):(s=bl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?u?u.p(c,_):(u=vl(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),c[0].timescale_year?i?i.p(c,_):(i=wl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,_):(a=kl(c),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null),c[0].year_consulted?f?f.p(c,_):(f=yl(c),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i:ne,o:ne,d(c){c&&(p(e),p(n),p(t),p(r),p(o)),s&&s.d(c),u&&u.d(c),i&&i.d(c),a&&a.d(c),f&&f.d(c)}}}function J_(l,e,n){let{props:t}=e;return l.$$set=r=>{"props"in r&&n(0,t=r.props)},[t]}class yo extends Y{constructor(e){super(),K(this,e,J_,X_,J,{props:0})}}function Sl(l){let e,n,t,r=l[0].budget.toLocaleString()+"",o,s;return{c(){e=T("p"),n=k("Cost: "),t=T("b"),o=k(r),s=k(`
    GBP`)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,i){i&1&&r!==(r=u[0].budget.toLocaleString()+"")&&B(o,r)},d(u){u&&p(e)}}}function Cl(l){let e;return{c(){e=T("p"),e.textContent="Development is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tl(l){let e;return{c(){e=T("p"),e.textContent="Construction is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ol(l){let e,n,t,r;return{c(){e=T("p"),n=k("Funding sources: "),t=T("b"),r=k(l[1])},m(o,s){$(o,e,s),h(e,n),h(e,t),h(t,r)},p(o,s){s&2&&B(r,o[1])},d(o){o&&p(e)}}}function Y_(l){let e,n,t,r,o=l[0].budget&&Sl(l),s=l[0].development_funded&&Cl(),u=l[0].construction_funded&&Tl(),i=l[1]&&Ol(l);return{c(){o&&o.c(),e=O(),s&&s.c(),n=O(),u&&u.c(),t=O(),i&&i.c(),r=Ee()},m(a,f){o&&o.m(a,f),$(a,e,f),s&&s.m(a,f),$(a,n,f),u&&u.m(a,f),$(a,t,f),i&&i.m(a,f),$(a,r,f)},p(a,[f]){a[0].budget?o?o.p(a,f):(o=Sl(a),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),a[0].development_funded?s||(s=Cl(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),a[0].construction_funded?u||(u=Tl(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),a[1]?i?i.p(a,f):(i=Ol(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i:ne,o:ne,d(a){a&&(p(e),p(n),p(t),p(r)),o&&o.d(a),s&&s.d(a),u&&u.d(a),i&&i.d(a)}}}function K_(l){if(!l.funding_sources)return"";let e=[];for(let n of["atf2","atf3","atf4","atf4e","crsts","luf"])l.funding_sources[n]&&e.push(n.toUpperCase());return l.funding_sources.other&&e.push(l.funding_sources.other),e.join(", ")}function Z_(l,e,n){let t,{props:r}=e;return l.$$set=o=>{"props"in o&&n(0,r=o.props)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=K_(r))},[r,t]}class So extends Y{constructor(e){super(),K(this,e,Z_,Y_,J,{props:0})}}function vn(l){const e=l.slice(),n=e[1].pipeline;return e[5]=n,e}function wn(l){const e=l.slice(),n=e[0].pipeline;return e[5]=n,e}function Ll(l){let e,n,t,r=Xn(l[0].length_meters)+"",o;return{c(){e=T("p"),n=k("Length: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=Xn(s[0].length_meters)+"")&&B(o,r)},d(s){s&&p(e)}}}function Al(l){let e,n=ft(l[0].description,l[2])+"";return{c(){e=T("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=ft(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Il(l){let e,n,t,r,o,s,u,i=l[5].atf4_type&&Nl(l),a=l[5].accuracy&&Pl(l),f=l[5].is_alternative&&Ml();return r=new So({props:{props:l[5]}}),s=new yo({props:{props:l[5]}}),{c(){i&&i.c(),e=O(),a&&a.c(),n=O(),f&&f.c(),t=O(),b(r.$$.fragment),o=O(),b(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),v(r,c,_),$(c,o,_),v(s,c,_),u=!0},p(c,_){c[5].atf4_type?i?i.p(c,_):(i=Nl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].accuracy?a?a.p(c,_):(a=Pl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].is_alternative?f||(f=Ml(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const m={};_&1&&(m.props=c[5]),r.$set(m);const y={};_&1&&(y.props=c[5]),s.$set(y)},i(c){u||(g(r.$$.fragment,c),g(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function Nl(l){let e,n,t,r=l[5].atf4_type+"",o;return{c(){e=T("p"),n=k("ATF4 type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].atf4_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Pl(l){let e,n,t,r=l[5].accuracy+"",o;return{c(){e=T("p"),n=k("Accuracy: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].accuracy+"")&&B(o,r)},d(s){s&&p(e)}}}function Ml(l){let e;return{c(){e=T("p"),e.textContent="Represents an alternative route"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.capital_scheme_id)+"",o;return{c(){e=T("p"),n=k("Capital scheme ID: "),t=T("b"),o=k(r)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o)},p(u,i){var a;i&2&&r!==(r=((a=u[1].browse)==null?void 0:a.capital_scheme_id)+"")&&B(o,r)},d(u){u&&p(e)}}}function Dl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.current_milestone)+"",o;return{c(){e=T("p"),n=k("Current milestone: "),t=T("b"),o=k(r)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o)},p(u,i){var a;i&2&&r!==(r=((a=u[1].browse)==null?void 0:a.current_milestone)+"")&&B(o,r)},d(u){u&&p(e)}}}function El(l){let e,n,t,r,o,s,u,i=l[5].scheme_type&&jl(l),a=l[5].atf4_lead_type&&Rl(l),f=l[5].scheme_description&&Bl(l);return r=new So({props:{props:l[5]}}),s=new yo({props:{props:l[5]}}),{c(){i&&i.c(),e=O(),a&&a.c(),n=O(),f&&f.c(),t=O(),b(r.$$.fragment),o=O(),b(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),v(r,c,_),$(c,o,_),v(s,c,_),u=!0},p(c,_){c[5].scheme_type?i?i.p(c,_):(i=jl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].atf4_lead_type?a?a.p(c,_):(a=Rl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].scheme_description?f?f.p(c,_):(f=Bl(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const m={};_&2&&(m.props=c[5]),r.$set(m);const y={};_&2&&(y.props=c[5]),s.$set(y)},i(c){u||(g(r.$$.fragment,c),g(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function jl(l){let e,n,t,r=l[5].scheme_type+"",o;return{c(){e=T("p"),n=k("Scheme type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].scheme_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Rl(l){let e,n,t,r=l[5].atf4_lead_type+"",o;return{c(){e=T("p"),n=k("ATF4 lead type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].atf4_lead_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Bl(l){let e,n,t=l[5].scheme_description+"",r;return{c(){e=T("p"),n=k("Descripton: "),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,r)},p(o,s){s&2&&t!==(t=o[5].scheme_description+"")&&B(r,t)},d(o){o&&p(e)}}}function Q_(l){var Ie,Me,Ot,Xe;let e,n,t,r=ft(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,_,m,y,C,S,A,R=ft(l[1].scheme_name??"",l[3])+"",I,P,L=ft(l[0].scheme_reference,l[3])+"",M,D,N,j,U,H=((Ie=l[1].browse)==null?void 0:Ie.authority_or_region)+"",E,F,z,oe,se,ye,de=((Me=l[1].browse)==null?void 0:Me.funding_programme)+"",Ce,ie,Ne,Te,be=l[0].length_meters&&Ll(l),re=l[0].description&&Al(l),pe=l[0].pipeline&&Il(wn(l)),ge=((Ot=l[1].browse)==null?void 0:Ot.capital_scheme_id)&&Fl(l),ve=((Xe=l[1].browse)==null?void 0:Xe.current_milestone)&&Dl(l),_e=l[1].pipeline&&El(vn(l));return{c(){e=T("div"),n=T("h2"),t=new Kt(!1),o=k(" ("),u=k(s),i=k(")"),a=O(),be&&be.c(),f=O(),re&&re.c(),c=O(),pe&&pe.c(),_=O(),m=T("hr"),y=O(),C=T("p"),S=k("Part of scheme: "),A=new Kt(!1),I=k(" ("),P=new Kt(!1),M=k(")"),D=O(),N=T("p"),j=k("Authority or region: "),U=T("b"),E=k(H),F=O(),ge&&ge.c(),z=O(),oe=T("p"),se=k("Funding programme: "),ye=T("b"),Ce=k(de),ie=O(),ve&&ve.c(),Ne=O(),_e&&_e.c(),t.a=o,A.a=I,P.a=M,Se(e,"max-width","30vw"),Se(e,"max-height","60vh"),Se(e,"overflow","auto")},m(ue,Fe){$(ue,e,Fe),h(e,n),t.m(r,n),h(n,o),h(n,u),h(n,i),h(e,a),be&&be.m(e,null),h(e,f),re&&re.m(e,null),h(e,c),pe&&pe.m(e,null),h(e,_),h(e,m),h(e,y),h(e,C),h(C,S),A.m(R,C),h(C,I),P.m(L,C),h(C,M),h(e,D),h(e,N),h(N,j),h(N,U),h(U,E),h(e,F),ge&&ge.m(e,null),h(e,z),h(e,oe),h(oe,se),h(oe,ye),h(ye,Ce),h(e,ie),ve&&ve.m(e,null),h(e,Ne),_e&&_e.m(e,null),Te=!0},p(ue,[Fe]){var Hn,qn,Gn,Un;(!Te||Fe&5)&&r!==(r=ft(ue[0].name,ue[2])+"")&&t.p(r),(!Te||Fe&1)&&s!==(s=ue[0].intervention_type+"")&&B(u,s),ue[0].length_meters?be?be.p(ue,Fe):(be=Ll(ue),be.c(),be.m(e,f)):be&&(be.d(1),be=null),ue[0].description?re?re.p(ue,Fe):(re=Al(ue),re.c(),re.m(e,c)):re&&(re.d(1),re=null),ue[0].pipeline?pe?(pe.p(wn(ue),Fe),Fe&1&&g(pe,1)):(pe=Il(wn(ue)),pe.c(),g(pe,1),pe.m(e,_)):pe&&(ce(),d(pe,1,1,()=>{pe=null}),$e()),(!Te||Fe&10)&&R!==(R=ft(ue[1].scheme_name??"",ue[3])+"")&&A.p(R),(!Te||Fe&9)&&L!==(L=ft(ue[0].scheme_reference,ue[3])+"")&&P.p(L),(!Te||Fe&2)&&H!==(H=((Hn=ue[1].browse)==null?void 0:Hn.authority_or_region)+"")&&B(E,H),(qn=ue[1].browse)!=null&&qn.capital_scheme_id?ge?ge.p(ue,Fe):(ge=Fl(ue),ge.c(),ge.m(e,z)):ge&&(ge.d(1),ge=null),(!Te||Fe&2)&&de!==(de=((Gn=ue[1].browse)==null?void 0:Gn.funding_programme)+"")&&B(Ce,de),(Un=ue[1].browse)!=null&&Un.current_milestone?ve?ve.p(ue,Fe):(ve=Dl(ue),ve.c(),ve.m(e,Ne)):ve&&(ve.d(1),ve=null),ue[1].pipeline?_e?(_e.p(vn(ue),Fe),Fe&2&&g(_e,1)):(_e=El(vn(ue)),_e.c(),g(_e,1),_e.m(e,null)):_e&&(ce(),d(_e,1,1,()=>{_e=null}),$e())},i(ue){Te||(g(pe),g(_e),Te=!0)},o(ue){d(pe),d(_e),Te=!1},d(ue){ue&&p(e),be&&be.d(),re&&re.d(),pe&&pe.d(),ge&&ge.d(),ve&&ve.d(),_e&&_e.d()}}}function ft(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function x_(l,e,n){let t,r,o,s;Ae(l,un,i=>n(4,r=i)),Ae(l,At,i=>n(2,o=i)),Ae(l,It,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class zn extends Y{constructor(e){super(),K(this,e,x_,Q_,J,{props:0})}}function eg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function tg(l){let e,n;return e=new zn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ng(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[eg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[tg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function rg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function lg(l){let e,n;return e=new zn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function og(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[rg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[lg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function sg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function ig(l){let e,n;return e=new zn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ag(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[sg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[ig,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function fg(l){let e,n,t,r,o,s,u,i,a,f;const c=[q("interventions-points"),{filter:["all",Jn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":Qn,"circle-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let _={$$slots:{default:[ng]},$$scope:{ctx:l}};for(let L=0;L<c.length;L+=1)_=x(_,c[L]);e=new pt({props:_});const m=[q("interventions-lines"),{filter:["all",Yn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":Lt,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[og]},$$scope:{ctx:l}};for(let L=0;L<m.length;L+=1)y=x(y,m[L]);t=new Oe({props:y});const C=[q("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Lt,"circle-opacity":0,"circle-stroke-color":Ke.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let S={};for(let L=0;L<C.length;L+=1)S=x(S,C[L]);o=new pt({props:S});const A=[q("interventions-polygons"),{filter:["all",ln,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":Q(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let R={$$slots:{default:[ag]},$$scope:{ctx:l}};for(let L=0;L<A.length;L+=1)R=x(R,A[L]);u=new qe({props:R});const I=[q("interventions-polygons-outlines"),{filter:["all",ln,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*Lt}},{layout:{visibility:l[0]?"visible":"none"}}];let P={};for(let L=0;L<I.length;L+=1)P=x(P,I[L]);return a=new Oe({props:P}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(a.$$.fragment)},m(L,M){v(e,L,M),$(L,n,M),v(t,L,M),$(L,r,M),v(o,L,M),$(L,s,M),v(u,L,M),$(L,i,M),v(a,L,M),f=!0},p(L,M){const D=M&29?te(c,[c[0],M&24&&{filter:["all",Jn,L[3],L[4]]},c[2],c[3],M&4&&{paint:{"circle-color":L[2],"circle-radius":Qn,"circle-opacity":Q(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};M&128&&(D.$$scope={dirty:M,ctx:L}),e.$set(D);const N=M&13?te(m,[m[0],M&8&&{filter:["all",Yn,L[3]]},m[2],m[3],M&4&&{paint:{"line-color":L[2],"line-width":Lt,"line-opacity":Q(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},m[6]]):{};M&128&&(N.$$scope={dirty:M,ctx:L}),t.$set(N);const j=M&1?te(C,[C[0],C[1],C[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(j);const U=M&13?te(A,[A[0],M&8&&{filter:["all",ln,L[3]]},A[2],A[3],M&4&&{paint:{"fill-color":L[2],"fill-opacity":Q(.2,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},A[6]]):{};M&128&&(U.$$scope={dirty:M,ctx:L}),u.$set(U);const H=M&13?te(I,[I[0],M&8&&{filter:["all",ln,L[3]]},M&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*Lt}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(H)},i(L){f||(g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(u.$$.fragment,L),g(a.$$.fragment,L),f=!0)},o(L){d(e.$$.fragment,L),d(t.$$.fragment,L),d(o.$$.fragment,L),d(u.$$.fragment,L),d(a.$$.fragment,L),f=!1},d(L){L&&(p(n),p(r),p(s),p(i)),w(e,L),w(t,L),w(o,L),w(u,L),w(a,L)}}}function ug(l){let e,n;return e=new yt({props:{data:l[1],$$slots:{default:[fg]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cg(l,e,n){let t,r;Ae(l,Tt,a=>n(5,r=a));let{showSchemes:o}=e,[s]=Mn();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=Po(r))},[o,t,s,u,i,r]}class $g extends Y{constructor(e){super(),K(this,e,cg,ug,J,{showSchemes:0})}}function zl(l,e,n){const t=l.slice();return t[13]=e[n],t}function Hl(l,e,n){const t=l.slice();return t[16]=e[n],t}function pg(l){let e,n;return e=new B_({props:{loadFile:l[7]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ql(l){let e,n,t,r,o;e=new ct({props:{$$slots:{default:[mg]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[_g]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new Xl({props:u}),W.push(()=>V(t,"open",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],X(()=>r=!1)),t.$set(c)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function mg(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gl(l){let e,n,t=l[16]+"",r;return{c(){e=T("li"),n=T("p"),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&B(r,t)},d(o){o&&p(e)}}}function _g(l){let e,n,t,r,o=je(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=Gl(Hl(l,o,u));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=O(),r=T("ul");for(let u=0;u<s.length;u+=1)s[u].c();G(e,"class","govuk-prose")},m(u,i){$(u,e,i),h(e,n),h(e,t),h(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=je(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=Hl(u,o,a);s[a]?s[a].p(f,i):(s[a]=Gl(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),wt(s,u)}}}function Ul(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new Wa({props:u}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],X(()=>t=!1)),e.$set(f)},i(i){r||(g(e.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),r=!1},d(i){w(e,i)}}}function Wl(l){let e,n;return e=new V_({props:{scheme:l[13]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Vl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&Wl(l);return{c(){r&&r.c(),n=Ee()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&g(r,1)):(r=Wl(o),r.c(),g(r,1),r.m(n.parentNode,n)):r&&(ce(),d(r,1,1,()=>{r=null}),$e())},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function gg(l){let e,n,t,r,o,s,u,i,a,f,c=Cn()=="Private (development)",_,m,y,C,S,A,R,I,P;o=new Uo({props:{boundaryGeojson:l[4]}}),a=new Mo({});let L=c&&pg(l),M=l[4].notes&&ql(l);y=new Fo({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),S=new to({props:{errorMessage:l[0]}});let D=l[6].size>0&&Ul(l),N=je(l[6].values()),j=[];for(let H=0;H<N.length;H+=1)j[H]=Vl(zl(l,N,H));const U=H=>d(j[H],1,1,()=>{j[H]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",r=O(),b(o.$$.fragment),s=O(),u=T("p"),u.textContent=`App version: ${Cn()}`,i=O(),b(a.$$.fragment),f=O(),L&&L.c(),_=O(),M&&M.c(),m=O(),b(y.$$.fragment),C=O(),b(S.$$.fragment),A=O(),D&&D.c(),R=O(),I=T("ul");for(let H=0;H<j.length;H+=1)j[H].c();Se(n,"display","flex"),Se(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(H,E){$(H,e,E),h(e,n),h(n,t),h(n,r),v(o,n,null),h(e,s),h(e,u),h(e,i),v(a,e,null),h(e,f),L&&L.m(e,null),h(e,_),M&&M.m(e,null),h(e,m),v(y,e,null),h(e,C),v(S,e,null),h(e,A),D&&D.m(e,null),h(e,R),h(e,I);for(let F=0;F<j.length;F+=1)j[F]&&j[F].m(I,null);P=!0},p(H,E){const F={};E&16&&(F.boundaryGeojson=H[4]),o.$set(F),c&&L.p(H,E),H[4].notes?M?(M.p(H,E),E&16&&g(M,1)):(M=ql(H),M.c(),g(M,1),M.m(e,m)):M&&(ce(),d(M,1,1,()=>{M=null}),$e());const z={};if(E&1&&(z.errorMessage=H[0]),S.$set(z),H[6].size>0?D?(D.p(H,E),E&64&&g(D,1)):(D=Ul(H),D.c(),g(D,1),D.m(e,R)):D&&(ce(),d(D,1,1,()=>{D=null}),$e()),E&66){N=je(H[6].values());let oe;for(oe=0;oe<N.length;oe+=1){const se=zl(H,N,oe);j[oe]?(j[oe].p(se,E),g(j[oe],1)):(j[oe]=Vl(se),j[oe].c(),g(j[oe],1),j[oe].m(I,null))}for(ce(),oe=N.length;oe<j.length;oe+=1)U(oe);$e()}},i(H){if(!P){g(o.$$.fragment,H),g(a.$$.fragment,H),g(L),g(M),g(y.$$.fragment,H),g(S.$$.fragment,H),g(D);for(let E=0;E<N.length;E+=1)g(j[E]);P=!0}},o(H){d(o.$$.fragment,H),d(a.$$.fragment,H),d(L),d(M),d(y.$$.fragment,H),d(S.$$.fragment,H),d(D),j=j.filter(Boolean);for(let E=0;E<j.length;E+=1)d(j[E]);P=!1},d(H){H&&p(e),w(o),w(a),L&&L.d(),M&&M.d(),w(y),w(S),D&&D.d(),wt(j,H)}}}function dg(l){let e,n,t,r,o,s,u;return e=new Wo({}),t=new $g({props:{showSchemes:l[2]}}),s=new E_({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),o=T("div"),b(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,r,a),$(i,o,a),v(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),w(e,i),w(t,i),w(s)}}}function hg(l){let e,n,t;return n=new Do({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[dg]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function bg(l){let e,n;return e=new ns({props:{$$slots:{main:[hg],sidebar:[gg]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vg(l,e,n){let t,r,o;Ae(l,Tt,S=>n(4,t=S)),Ae(l,Kn,S=>n(5,r=S)),Ae(l,un,S=>n(6,o=S)),jn(()=>{Eo()});const s=new URLSearchParams(window.location.search);Kn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(S){try{Tt.set(JSON.parse(S)),un.set(Ca(t)),n(0,u="")}catch(A){n(0,u=`The file you loaded is broken: ${A}`)}}const _=()=>n(3,f=!0);function m(S){f=S,n(3,f)}function y(S){i=S,n(1,i)}function C(S){a=S,n(2,a)}return[u,i,a,f,t,r,o,c,_,m,y,C]}class wg extends Y{constructor(e){super(),K(this,e,vg,bg,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new wg({target:document.getElementById("app")});
