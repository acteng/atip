var Ct=Object.defineProperty;var vt=(o,e,t)=>e in o?Ct(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var qe=(o,e,t)=>(vt(o,typeof e!="symbol"?e+"":e,t),t);import{S as W,i as Q,s as N,e as we,d as J,f as H,q as he,j as R,P as de,ai as ht,G as Le,H as ze,I as Oe,J as Te,t as A,h as v,av as We,N as wt,aw as je,D as Ee,A as _e,v as ke,aq as Ze,x as D,E as Se,F as ve,r as Pe,u as He,c as ie,m as le,w as Re,k as re,a3 as ne,ak as ge,ax as St,aj as Ye,a8 as Je,a1 as Mt,at as Lt,a2 as zt,a as Ce,ay as Ot,o as yt,az as Tt,l as Et,g as Xe,am as It,ah as xe,ad as Bt}from"./stores-65128d20.js";import{c as bt,b as Pt,E as Gt}from"./index-72ea991c.js";const Ht=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Rt(o){let e;return{c(){e=we("div"),e.innerHTML=`<p class="govuk-phase-banner__content"><strong class="govuk-tag govuk-phase-banner__content__tag">Alpha</strong> <span class="govuk-phase-banner__text">This is a new service. Contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      with any feedback.</span></p>`,J(e,"class","govuk-phase-banner")},m(t,n){H(t,e,n)},p:he,i:he,o:he,d(t){t&&R(e)}}}class Jo extends W{constructor(e){super(),Q(this,e,null,Rt,N,{})}}const Fe=de(""),Ne=de(null);async function Ft(o){let e=ht(Ne);if(!o||!e)return"Google (attributions loading)";let[t,n]=e,l=o.getBounds(),i=`https://tile.googleapis.com/tile/v1/viewport?session=${n}&key=${t}&zoom=${Math.floor(o.getZoom())}&north=${l.getNorth()}&south=${l.getSouth()}&east=${l.getEast()}&west=${l.getWest()}`;return(await(await fetch(i)).json()).copyright}function Xo(){let o=[];return bt()=="Private (development)"&&(o=o.concat([["google","Google satellite"],["Road","OS Road"],["Light","OS Light"],["Outdoor","OS Outdoor"],["bluesky","Bluesky Satellite (12.5cm)"]])),o.concat([["streets","MapTiler Streets"],["hybrid","MapTiler Satellite"],["dataviz","MapTiler Dataviz"],["uk-openzoomstack-light","OS Open Zoomstack"]])}async function pe(o){if(Ne.set(null),o=="streets"||o=="hybrid"||o=="dataviz"||o=="uk-openzoomstack-light")return Fe.set("&copy; MapTiler &copy; OpenStreetMap contributors"),`https://api.maptiler.com/maps/${o}/style.json?key=MZEJTanw3WpxRvt7qDfo`;let t=await(await fetch(`${Pt()}/api_keys.json`)).json(),n,l;if(o=="google"){let i=t.google,r=await Dt(i);n=`https://tile.googleapis.com/v1/2dtiles/{z}/{x}/{y}?session=${r}&key=${i}`,l="Google (attributions loading)",Ne.set([i,r])}else o=="bluesky"?(n=`https://ogc.apps.midgard.airbusds-cint.com/apgb/wmts/rest/apgb:AP-12CM5-GB-LATEST/default/EPSG-3857/EPSG:3857:{z}/{y}/{x}?GUID=${t.bluesky}&format=image/png&TRANSPARENT=FALSE,`,l="Bluesky"):(n=`https://api.os.uk/maps/raster/v1/zxy/${o}_3857/{z}/{x}/{y}.png?key=${t.ordnance_survey}`,l="Contains OS data &copy; Crown copyright and database rights 2023");return Fe.set(l),{version:8,sources:{"raster-tiles":{type:"raster",tiles:[n],tileSize:256,attribution:l}},layers:[{id:"raster-basemap",type:"raster",source:"raster-tiles"}],glyphs:"https://api.maptiler.com/fonts/{fontstack}/{range}.pbf?key=MZEJTanw3WpxRvt7qDfo"}}async function Dt(o){try{let t=await(await fetch(`https://tile.googleapis.com/v1/createSession?key=${o}`,{method:"POST",body:JSON.stringify({mapType:"satellite",language:"en-GB",region:"GB"})})).json();return"session"in t?t.session:(console.error(`Couldn't get Google tile session key: ${JSON.stringify(t)}`),"")}catch(e){return console.error(`Couldn't get Google tile session key: ${e}`),""}}function Zt(o){let e,t;const n=o[2].default,l=Le(n,o,o[1],null);return{c(){e=we("a"),l&&l.c(),J(e,"href",o[0]),J(e,"target","_blank"),J(e,"rel","noreferrer")},m(i,r){H(i,e,r),l&&l.m(e,null),t=!0},p(i,[r]){l&&l.p&&(!t||r&2)&&ze(l,n,i,i[1],t?Te(n,i[1],r,null):Oe(i[1]),null),(!t||r&1)&&J(e,"href",i[0])},i(i){t||(A(l,i),t=!0)},o(i){v(l,i),t=!1},d(i){i&&R(e),l&&l.d(i)}}}function Ut(o,e,t){let{$$slots:n={},$$scope:l}=e,{href:i}=e;return o.$$set=r=>{"href"in r&&t(0,i=r.href),"$$scope"in r&&t(1,l=r.$$scope)},[i,l,n]}class xo extends W{constructor(e){super(),Q(this,e,Ut,Zt,N,{href:0})}}let jt=Date.now();function Ue(o){return`${o}-${jt++}`}const Qe=Symbol.for("svelte-maplibre");function Ie(){return wt(Qe)}function Nt(o){let e=new WeakMap;return t=>{var r;let n=e.get(t.originalEvent);if(n!==void 0)return n;let i=(r=t.target.queryRenderedFeatures(t.point).find(f=>{var u;return(u=o.get(f.layer.id))==null?void 0:u.interactive}))==null?void 0:r.layer.id;return e.set(t.originalEvent,i),i}}function Wt(){let o=new Map;return We(Qe,{map:de(null),source:je(null),layer:je(null),popupTarget:je(null),cluster:de(),loadedImages:de(new Set),minzoom:de(0),maxzoom:de(24),layerEvent:de(null),layerInfo:o,eventTopMost:Nt(o),markerClickManager:new qt})}function $e(o){return{subscribe:o.subscribe}}function Ke({key:o,setPopupTarget:e=!1,setCluster:t=!1,setMouseEvent:n=!1}){let l=Ie(),i=de(null),r=$e(i),f={...l,[o]:$e(i)};if(e&&(f.popupTarget=r),n){let u=de(null);f.layerEvent=u,l.layerEvent=u}return t&&(f.cluster=de()),We(Qe,f),{...l,self:i}}function Qt(){return Ke({key:"source",setCluster:!0})}function Kt(o=!0){return Ke({key:"layer",setPopupTarget:o,setMouseEvent:o})}function po(){return Ke({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function Vt(o){return"layerType"in o&&o.layerType==="deckgl"}class qt{constructor(){qe(this,"_handlers",new Set)}add(e){this._handlers.add(e)}remove(e){this._handlers.delete(e)}handleClick(e){for(const t of this._handlers)t(e)}}function et(o){let e;return t=>{if(t)for(let n in t){let l=e==null?void 0:e[n],i=t[n];l!==i&&o(n,i,l)}else if(e)for(let n in e)o(n,void 0,e[n]);e=t}}function Yt(o,...e){let t=[o];for(let n of e)if(n)Array.isArray(n)&&n[0]===o?t.push(...n.slice(1)):t.push(n);else continue;if(t.length!==1)return t.length===2?t[1]:t}function Jt(o){return o===!0?["has","point_count"]:o===!1?["!",["has","point_count"]]:void 0}function $o(o,e){return["case",["boolean",["feature-state","hover"],!1],e,o]}var De=Xt;function Xt(o){var e,t,n;if(o){if(Array.isArray(o)){for(e=[],t=o.length,n=0;n<t;n++){var l=o[n];l!=null&&e.push(l)}return e}if(typeof o=="object"){e={};var i=Object.keys(o);for(t=i.length,n=0;n<t;n++){var r=i[n],f=o[r];f!=null&&(e[r]=f)}return e}}}function tt(o){let e=o[0],t,n,l=ot(o);return{c(){l.c(),t=Ee()},m(i,r){l.m(i,r),H(i,t,r),n=!0},p(i,r){r[0]&1&&N(e,e=i[0])?(_e(),v(l,1,1,he),ke(),l=ot(i),l.c(),A(l,1),l.m(t.parentNode,t)):l.p(i,r)},i(i){n||(A(l),n=!0)},o(i){v(l),n=!1},d(i){i&&R(t),l.d(i)}}}function ot(o){let e;const t=o[36].default,n=Le(t,o,o[35],null);return{c(){n&&n.c()},m(l,i){n&&n.m(l,i),e=!0},p(l,i){n&&n.p&&(!e||i[1]&16)&&ze(n,t,l,l[35],e?Te(t,l[35],i,null):Oe(l[35]),null)},i(l){e||(A(n,l),e=!0)},o(l){v(n,l),e=!1},d(l){n&&n.d(l)}}}function xt(o){let e,t,n=o[0]&&tt(o);return{c(){n&&n.c(),e=Ee()},m(l,i){n&&n.m(l,i),H(l,e,i),t=!0},p(l,i){l[0]?n?(n.p(l,i),i[0]&1&&A(n,1)):(n=tt(l),n.c(),A(n,1),n.m(e.parentNode,e)):n&&(_e(),v(n,1,1,()=>{n=null}),ke())},i(l){t||(A(n),t=!0)},o(l){v(n),t=!1},d(l){l&&R(e),n&&n.d(l)}}}function pt(o,e,t){let n,l,i,r,f,u,m,a,c,_,S,h,{$$slots:C={},$$scope:b}=e,{id:L=Ue("layer")}=e,{source:P=void 0}=e,{sourceLayer:I=void 0}=e,{beforeId:Z=void 0}=e,{beforeLayerType:G=void 0}=e,{type:E}=e,{paint:B=void 0}=e,{layout:k=void 0}=e,{filter:T=void 0}=e,{applyToClusters:K=void 0}=e,{minzoom:d=void 0}=e,{maxzoom:ye=void 0}=e,{manageHoverState:X=!1}=e,{hovered:p=null}=e,{interactive:$=!0}=e,{hoverCursor:ee=void 0}=e,{eventsIfTopMost:fe=!1}=e;const w=Ze(),{map:ue,source:V,self:Ae,minzoom:se,maxzoom:q,eventTopMost:U,layerInfo:be}=Kt();D(o,ue,y=>t(31,c=y)),D(o,V,y=>t(32,_=y)),D(o,Ae,y=>t(0,a=y)),D(o,se,y=>t(34,h=y)),D(o,q,y=>t(33,S=y)),Se(()=>{a&&c&&(be.delete(a),c==null||c.removeLayer(a))});let O;function j(y){var g,x;if(!$||!a||!c||fe&&U(y)!==a)return;let z=y.features??[],me=(x=(g=z[0])==null?void 0:g.properties)==null?void 0:x.cluster_id,Y={event:y,map:c,clusterId:me,layer:a,source:f,features:z};w(y.type,Y)}function ae(y){var g,x;if(!$||!a||!c||fe&&U(y)!==a)return;ee&&(c.getCanvas().style.cursor=ee);let z=y.features??[];t(6,p=z[0]??null);let me=(x=(g=z[0])==null?void 0:g.properties)==null?void 0:x.cluster_id;w("mouseenter",{event:y,map:c,clusterId:me,layer:a,source:f,features:z})}function ce(y){var g,x,s;if(!$||!c)return;if(fe&&U(y)!==a){t(6,p=null),X&&O!==void 0&&(c==null||c.setFeatureState({source:f,sourceLayer:I,id:O},{hover:!1}),O=void 0);return}c.getCanvas().style.cursor=ee;let z=y.features??[],me=(x=(g=z[0])==null?void 0:g.properties)==null?void 0:x.cluster_id,Y=(s=z[0])==null?void 0:s.id;Y!==O&&(X&&(O!==void 0&&(c==null||c.setFeatureState({source:f,id:O,sourceLayer:I},{hover:!1})),c==null||c.setFeatureState({source:f,id:Y,sourceLayer:I},{hover:!0})),O=Y,t(6,p=z[0]??null)),w("mousemove",{event:y,map:c,clusterId:me,layer:a,source:f,features:z})}function Me(y){if(!(!$||!a||!c)){if(ee&&(c.getCanvas().style.cursor=""),t(6,p=null),X&&O!==void 0){const z={source:f,id:O,sourceLayer:I};c==null||c.setFeatureState(z,{hover:!1}),O=void 0}w("mouseleave",{map:c,layer:a,source:f})}}let te=!0;function oe(y){c&&(c.off("click",y,j),c.off("dblclick",y,j),c.off("contextmenu",y,j),c.off("mouseenter",y,ae),c.off("mousemove",y,ce),c.off("mouseleave",y,Me))}return Se(()=>{c&&a&&oe(a)}),o.$$set=y=>{"id"in y&&t(7,L=y.id),"source"in y&&t(8,P=y.source),"sourceLayer"in y&&t(9,I=y.sourceLayer),"beforeId"in y&&t(10,Z=y.beforeId),"beforeLayerType"in y&&t(11,G=y.beforeLayerType),"type"in y&&t(12,E=y.type),"paint"in y&&t(13,B=y.paint),"layout"in y&&t(14,k=y.layout),"filter"in y&&t(15,T=y.filter),"applyToClusters"in y&&t(16,K=y.applyToClusters),"minzoom"in y&&t(17,d=y.minzoom),"maxzoom"in y&&t(18,ye=y.maxzoom),"manageHoverState"in y&&t(19,X=y.manageHoverState),"hovered"in y&&t(6,p=y.hovered),"interactive"in y&&t(20,$=y.interactive),"hoverCursor"in y&&t(21,ee=y.hoverCursor),"eventsIfTopMost"in y&&t(22,fe=y.eventsIfTopMost),"$$scope"in y&&t(35,b=y.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&65536&&t(30,n=Jt(K)),o.$$.dirty[0]&1073774592&&t(24,l=Yt("all",n,T)),o.$$.dirty[0]&131072|o.$$.dirty[1]&8&&t(26,i=d??h),o.$$.dirty[0]&262144|o.$$.dirty[1]&4&&t(25,r=ye??S),o.$$.dirty[0]&256|o.$$.dirty[1]&2&&t(29,f=P||_),o.$$.dirty[0]&654343809|o.$$.dirty[1]&1&&c&&a!==L&&f){a&&(oe(a),be.delete(a));let y=Z;if(!Z&&G){let z=c.getStyle().layers,me=typeof G=="function"?G:g=>g.type===G,Y=z==null?void 0:z.find(me);Y&&(y=Y.id)}ve(Ae,a=L,a),c.addLayer(De({id:a,type:E,source:f,"source-layer":I,filter:l,paint:B,layout:k,minzoom:i,maxzoom:r}),y),t(23,te=!0),c.on("click",a,j),c.on("dblclick",a,j),c.on("contextmenu",a,j),c.on("mouseenter",a,ae),c.on("mousemove",a,ce),c.on("mouseleave",a,Me)}o.$$.dirty[0]&1048577&&a&&be.set(a,{interactive:$}),o.$$.dirty[0]&1|o.$$.dirty[1]&1&&t(28,u=a?et((y,z)=>{c!=null&&c.style._loaded?c.setPaintProperty(a,y,z):c==null||c.once("styledata",()=>c==null?void 0:c.setPaintProperty(a,y,z))}):void 0),o.$$.dirty[0]&1|o.$$.dirty[1]&1&&t(27,m=a?et((y,z)=>{c!=null&&c.style._loaded?c.setLayoutProperty(a,y,z):c==null||c.once("styledata",()=>c==null?void 0:c.setLayoutProperty(a,y,z))}):void 0),o.$$.dirty[0]&268443648&&(u==null||u(B)),o.$$.dirty[0]&134234112&&(m==null||m(k)),o.$$.dirty[0]&100663297|o.$$.dirty[1]&1&&a&&(c==null||c.setLayerZoomRange(a,i,r)),o.$$.dirty[0]&25165825|o.$$.dirty[1]&1&&a&&(te?t(23,te=!1):c==null||c.setFilter(a,l))},[a,ue,V,Ae,se,q,p,L,P,I,Z,G,E,B,k,T,K,d,ye,X,$,ee,fe,te,l,r,i,m,u,f,n,c,_,S,h,b,C]}class _t extends W{constructor(e){super(),Q(this,e,pt,xt,N,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,interactive:20,hoverCursor:21,eventsIfTopMost:22},null,[-1,-1])}}function $t(o){let e;const t=o[15].default,n=Le(t,o,o[23],null);return{c(){n&&n.c()},m(l,i){n&&n.m(l,i),e=!0},p(l,i){n&&n.p&&(!e||i&8388608)&&ze(n,t,l,l[23],e?Te(t,l[23],i,null):Oe(l[23]),null)},i(l){e||(A(n,l),e=!0)},o(l){v(n,l),e=!1},d(l){n&&n.d(l)}}}function eo(o){let e,t,n;function l(r){o[16](r)}let i={id:o[1],type:"fill",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],minzoom:o[9],maxzoom:o[10],hoverCursor:o[11],manageHoverState:o[12],eventsIfTopMost:o[13],interactive:o[14],$$slots:{default:[$t]},$$scope:{ctx:o}};return o[0]!==void 0&&(i.hovered=o[0]),e=new _t({props:i}),Pe.push(()=>He(e,"hovered",l)),e.$on("click",o[17]),e.$on("dblclick",o[18]),e.$on("contextmenu",o[19]),e.$on("mouseenter",o[20]),e.$on("mousemove",o[21]),e.$on("mouseleave",o[22]),{c(){ie(e.$$.fragment)},m(r,f){le(e,r,f),n=!0},p(r,[f]){const u={};f&2&&(u.id=r[1]),f&4&&(u.source=r[2]),f&8&&(u.sourceLayer=r[3]),f&16&&(u.beforeId=r[4]),f&32&&(u.beforeLayerType=r[5]),f&64&&(u.paint=r[6]),f&128&&(u.layout=r[7]),f&256&&(u.filter=r[8]),f&512&&(u.minzoom=r[9]),f&1024&&(u.maxzoom=r[10]),f&2048&&(u.hoverCursor=r[11]),f&4096&&(u.manageHoverState=r[12]),f&8192&&(u.eventsIfTopMost=r[13]),f&16384&&(u.interactive=r[14]),f&8388608&&(u.$$scope={dirty:f,ctx:r}),!t&&f&1&&(t=!0,u.hovered=r[0],Re(()=>t=!1)),e.$set(u)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){re(e,r)}}}function to(o,e,t){let{$$slots:n={},$$scope:l}=e,{id:i=Ue("fill")}=e,{source:r=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:m=void 0}=e,{paint:a}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{minzoom:S=void 0}=e,{maxzoom:h=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:b=!1}=e,{hovered:L=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:I=!0}=e;function Z(d){L=d,t(0,L)}function G(d){ne.call(this,o,d)}function E(d){ne.call(this,o,d)}function B(d){ne.call(this,o,d)}function k(d){ne.call(this,o,d)}function T(d){ne.call(this,o,d)}function K(d){ne.call(this,o,d)}return o.$$set=d=>{"id"in d&&t(1,i=d.id),"source"in d&&t(2,r=d.source),"sourceLayer"in d&&t(3,f=d.sourceLayer),"beforeId"in d&&t(4,u=d.beforeId),"beforeLayerType"in d&&t(5,m=d.beforeLayerType),"paint"in d&&t(6,a=d.paint),"layout"in d&&t(7,c=d.layout),"filter"in d&&t(8,_=d.filter),"minzoom"in d&&t(9,S=d.minzoom),"maxzoom"in d&&t(10,h=d.maxzoom),"hoverCursor"in d&&t(11,C=d.hoverCursor),"manageHoverState"in d&&t(12,b=d.manageHoverState),"hovered"in d&&t(0,L=d.hovered),"eventsIfTopMost"in d&&t(13,P=d.eventsIfTopMost),"interactive"in d&&t(14,I=d.interactive),"$$scope"in d&&t(23,l=d.$$scope)},[L,i,r,f,u,m,a,c,_,S,h,C,b,P,I,n,Z,G,E,B,k,T,K,l]}class en extends W{constructor(e){super(),Q(this,e,to,eo,N,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function oo(o,e,t){let n;const{map:l}=Ie();D(o,l,u=>t(4,n=u));let{position:i="top-left"}=e,{container:r=void 0}=e,f=null;return Se(()=>{n!=null&&n.loaded()&&f&&n.removeControl(f)}),o.$$set=u=>{"position"in u&&t(1,i=u.position),"container"in u&&t(2,r=u.container)},o.$$.update=()=>{if(o.$$.dirty&30&&n&&!f){let u;typeof r=="string"?u=document.querySelector(r)??void 0:u=r,t(3,f=new ge.FullscreenControl({container:u})),n.addControl(f,i)}},[l,i,r,f,n]}class no extends W{constructor(e){super(),Q(this,e,oo,null,N,{position:1,container:2})}}function io(o,e,t,n,l){let i=!1;o.getSource(e)&&(i=!0,o.removeSource(e));const r=()=>{n(e)&&(o.addSource(e,t),l())};if(i){const f=()=>{e&&(o.getSource(e)?setTimeout(f,1):r())};f()}else r()}function lo(o,e,t){St().then(()=>{let n=ht(o);if(!n)return;n.getSource(e)===t&&n.removeSource(e)})}function nt(o){let e=o[0],t,n,l=it(o);return{c(){l.c(),t=Ee()},m(i,r){l.m(i,r),H(i,t,r),n=!0},p(i,r){r&1&&N(e,e=i[0])?(_e(),v(l,1,1,he),ke(),l=it(i),l.c(),A(l,1),l.m(t.parentNode,t)):l.p(i,r)},i(i){n||(A(l),n=!0)},o(i){v(l),n=!1},d(i){i&&R(t),l.d(i)}}}function it(o){let e;const t=o[19].default,n=Le(t,o,o[18],null);return{c(){n&&n.c()},m(l,i){n&&n.m(l,i),e=!0},p(l,i){n&&n.p&&(!e||i&262144)&&ze(n,t,l,l[18],e?Te(t,l[18],i,null):Oe(l[18]),null)},i(l){e||(A(n,l),e=!0)},o(l){v(n,l),e=!1},d(l){n&&n.d(l)}}}function ro(o){let e,t,n=o[0]&&nt(o);return{c(){n&&n.c(),e=Ee()},m(l,i){n&&n.m(l,i),H(l,e,i),t=!0},p(l,[i]){l[0]?n?(n.p(l,i),i&1&&A(n,1)):(n=nt(l),n.c(),A(n,1),n.m(e.parentNode,e)):n&&(_e(),v(n,1,1,()=>{n=null}),ke())},i(l){t||(A(n),t=!0)},o(l){v(n),t=!1},d(l){l&&R(e),n&&n.d(l)}}}function fo(o,e,t){let n,l,i,{$$slots:r={},$$scope:f}=e,{id:u=Ue("geojson")}=e,{data:m}=e,{generateId:a=!1}=e,{promoteId:c=void 0}=e,{filter:_=void 0}=e,{lineMetrics:S=void 0}=e,{cluster:h=void 0}=e,{maxzoom:C=void 0}=e,{attribution:b=void 0}=e,{buffer:L=void 0}=e,{tolerance:P=void 0}=e;const{map:I,cluster:Z,self:G}=Qt();D(o,I,k=>t(17,l=k)),D(o,Z,k=>t(20,i=k)),D(o,G,k=>t(0,n=k));let E,B=!0;return Se(()=>{n&&E&&l&&(lo(I,n,E),ve(G,n=null,n),t(15,E=void 0))}),o.$$set=k=>{"id"in k&&t(4,u=k.id),"data"in k&&t(5,m=k.data),"generateId"in k&&t(6,a=k.generateId),"promoteId"in k&&t(7,c=k.promoteId),"filter"in k&&t(8,_=k.filter),"lineMetrics"in k&&t(9,S=k.lineMetrics),"cluster"in k&&t(10,h=k.cluster),"maxzoom"in k&&t(11,C=k.maxzoom),"attribution"in k&&t(12,b=k.attribution),"buffer"in k&&t(13,L=k.buffer),"tolerance"in k&&t(14,P=k.tolerance),"$$scope"in k&&t(18,f=k.$$scope)},o.$$.update=()=>{o.$$.dirty&1024&&ve(Z,i=h,i),o.$$.dirty&196593&&l&&n!==u&&(ve(G,n=u,n),io(l,n,De({type:"geojson",data:m,filter:_,lineMetrics:S,generateId:a,promoteId:c,cluster:!!h,clusterMinPoints:h==null?void 0:h.minPoints,clusterMaxZoom:h==null?void 0:h.maxZoom,clusterRadius:h==null?void 0:h.radius,clusterProperties:h==null?void 0:h.properties,maxzoom:C,attribution:b,buffer:L,tolerance:P}),k=>l&&k===n,()=>{n&&(t(15,E=l==null?void 0:l.getSource(n)),t(16,B=!0))})),o.$$.dirty&131088&&(l==null||l.on("style.load",()=>{t(15,E=l==null?void 0:l.getSource(u))})),o.$$.dirty&98336&&E&&(B?t(16,B=!1):E.setData(m)),o.$$.dirty&33792&&(E==null||E.setClusterOptions(De({cluster:!!h,clusterMaxZoom:h==null?void 0:h.maxZoom,clusterRadius:h==null?void 0:h.radius})))},[n,I,Z,G,u,m,a,c,_,S,h,C,b,L,P,E,B,l,f,r]}class tn extends W{constructor(e){super(),Q(this,e,fo,ro,N,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10,maxzoom:11,attribution:12,buffer:13,tolerance:14})}}function uo(o,e,t){let n;const{map:l}=Ie();D(o,l,_=>t(8,n=_));let{position:i="top-left"}=e,{positionOptions:r=void 0}=e,{fitBoundsOptions:f=void 0}=e,{trackUserLocation:u=!1}=e,{showAccuracyCircle:m=!0}=e,{showUserLocation:a=!0}=e,{control:c=null}=e;return Se(()=>{n!=null&&n.loaded()&&c&&n.removeControl(c)}),o.$$set=_=>{"position"in _&&t(2,i=_.position),"positionOptions"in _&&t(3,r=_.positionOptions),"fitBoundsOptions"in _&&t(4,f=_.fitBoundsOptions),"trackUserLocation"in _&&t(5,u=_.trackUserLocation),"showAccuracyCircle"in _&&t(6,m=_.showAccuracyCircle),"showUserLocation"in _&&t(7,a=_.showUserLocation),"control"in _&&t(1,c=_.control)},o.$$.update=()=>{o.$$.dirty&510&&n&&!c&&(t(1,c=new ge.GeolocateControl({positionOptions:r,fitBoundsOptions:f,trackUserLocation:u,showAccuracyCircle:m,showUserLocation:a})),n.addControl(c,i))},[l,c,i,r,f,u,m,a,n]}class so extends W{constructor(e){super(),Q(this,e,uo,null,N,{position:2,positionOptions:3,fitBoundsOptions:4,trackUserLocation:5,showAccuracyCircle:6,showUserLocation:7,control:1})}}function ao(o){let e;const t=o[15].default,n=Le(t,o,o[23],null);return{c(){n&&n.c()},m(l,i){n&&n.m(l,i),e=!0},p(l,i){n&&n.p&&(!e||i&8388608)&&ze(n,t,l,l[23],e?Te(t,l[23],i,null):Oe(l[23]),null)},i(l){e||(A(n,l),e=!0)},o(l){v(n,l),e=!1},d(l){n&&n.d(l)}}}function co(o){let e,t,n;function l(r){o[16](r)}let i={id:o[1],type:"line",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],minzoom:o[9],maxzoom:o[10],hoverCursor:o[11],manageHoverState:o[12],eventsIfTopMost:o[13],interactive:o[14],$$slots:{default:[ao]},$$scope:{ctx:o}};return o[0]!==void 0&&(i.hovered=o[0]),e=new _t({props:i}),Pe.push(()=>He(e,"hovered",l)),e.$on("click",o[17]),e.$on("dblclick",o[18]),e.$on("contextmenu",o[19]),e.$on("mouseenter",o[20]),e.$on("mousemove",o[21]),e.$on("mouseleave",o[22]),{c(){ie(e.$$.fragment)},m(r,f){le(e,r,f),n=!0},p(r,[f]){const u={};f&2&&(u.id=r[1]),f&4&&(u.source=r[2]),f&8&&(u.sourceLayer=r[3]),f&16&&(u.beforeId=r[4]),f&32&&(u.beforeLayerType=r[5]),f&64&&(u.paint=r[6]),f&128&&(u.layout=r[7]),f&256&&(u.filter=r[8]),f&512&&(u.minzoom=r[9]),f&1024&&(u.maxzoom=r[10]),f&2048&&(u.hoverCursor=r[11]),f&4096&&(u.manageHoverState=r[12]),f&8192&&(u.eventsIfTopMost=r[13]),f&16384&&(u.interactive=r[14]),f&8388608&&(u.$$scope={dirty:f,ctx:r}),!t&&f&1&&(t=!0,u.hovered=r[0],Re(()=>t=!1)),e.$set(u)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){v(e.$$.fragment,r),n=!1},d(r){re(e,r)}}}function mo(o,e,t){let{$$slots:n={},$$scope:l}=e,{id:i=Ue("line")}=e,{source:r=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:m=void 0}=e,{paint:a}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{minzoom:S=void 0}=e,{maxzoom:h=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:b=!1}=e,{hovered:L=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:I=!0}=e;function Z(d){L=d,t(0,L)}function G(d){ne.call(this,o,d)}function E(d){ne.call(this,o,d)}function B(d){ne.call(this,o,d)}function k(d){ne.call(this,o,d)}function T(d){ne.call(this,o,d)}function K(d){ne.call(this,o,d)}return o.$$set=d=>{"id"in d&&t(1,i=d.id),"source"in d&&t(2,r=d.source),"sourceLayer"in d&&t(3,f=d.sourceLayer),"beforeId"in d&&t(4,u=d.beforeId),"beforeLayerType"in d&&t(5,m=d.beforeLayerType),"paint"in d&&t(6,a=d.paint),"layout"in d&&t(7,c=d.layout),"filter"in d&&t(8,_=d.filter),"minzoom"in d&&t(9,S=d.minzoom),"maxzoom"in d&&t(10,h=d.maxzoom),"hoverCursor"in d&&t(11,C=d.hoverCursor),"manageHoverState"in d&&t(12,b=d.manageHoverState),"hovered"in d&&t(0,L=d.hovered),"eventsIfTopMost"in d&&t(13,P=d.eventsIfTopMost),"interactive"in d&&t(14,I=d.interactive),"$$scope"in d&&t(23,l=d.$$scope)},[L,i,r,f,u,m,a,c,_,S,h,C,b,P,I,n,Z,G,E,B,k,T,K,l]}class on extends W{constructor(e){super(),Q(this,e,mo,co,N,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function go(o,e,t){let n;const l=Ze();let{layer:i=void 0}=e;const{map:r}=Ie();D(o,r,a=>t(2,n=a));function f(a){l(a.type,{...a,map:r})}const u=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],m=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return Se(()=>{if(n)if(i)for(const a of u)n.off(a,i,f);else for(const a of m)n.off(a,f)}),o.$$set=a=>{"layer"in a&&t(1,i=a.layer)},o.$$.update=()=>{if(o.$$.dirty&6&&n)if(i)for(const a of u)n.on(a,i,f);else for(const a of m)n.on(a,f)},[r,i,n]}class ho extends W{constructor(e){super(),Q(this,e,go,null,N,{layer:1})}}function yo(o){let e=o.getCenter(),t=Math.round(o.getZoom()*100)/100,n=Math.ceil((t*Math.LN2+Math.log(512/360/.5))/Math.LN10),l=Math.pow(10,n),i=Math.round(e.lat*l)/l,r=Math.round(e.lng*l)/l,f=`${t}/${i}/${r}`,u=o.getBearing(),m=o.getPitch();return(u||m)&&(f+=`/${Math.round(u*10)/10}`),m&&(f+=`/${Math.round(m)}`),`#${f}`}function bo(o){return o.replace("#","").split("/").map(parseFloat)}var Be=Ve;function Ve(o,e){return o===e||o!==o&&e!==e?!0:typeof o!=typeof e||{}.toString.call(o)!={}.toString.call(e)||o!==Object(o)||!o?!1:Array.isArray(o)?lt(o,e):{}.toString.call(o)=="[object Set]"?lt(Array.from(o),Array.from(e)):{}.toString.call(o)=="[object Object]"?ko(o,e):_o(o,e)}function _o(o,e){return o.toString()===e.toString()}function lt(o,e){var t=o.length;if(t!=e.length)return!1;for(var n=0;n<t;n++)if(!Ve(o[n],e[n]))return!1;return!0}function ko(o,e){var t=Object.keys(o),n=t.length;if(n!=Object.keys(e).length)return!1;for(var l=0;l<n;l++){var i=t[l];if(!(e.hasOwnProperty(i)&&Ve(o[i],e[i])))return!1}return!0}function Ao(o,e,t){let n;const{map:l}=Ie();D(o,l,a=>t(6,n=a));let{position:i="top-left"}=e,{showCompass:r=!0}=e,{showZoom:f=!0}=e,{visualizePitch:u=!1}=e,m=null;return Se(()=>{n!=null&&n.loaded()&&m&&n.removeControl(m)}),o.$$set=a=>{"position"in a&&t(1,i=a.position),"showCompass"in a&&t(2,r=a.showCompass),"showZoom"in a&&t(3,f=a.showZoom),"visualizePitch"in a&&t(4,u=a.visualizePitch)},o.$$.update=()=>{o.$$.dirty&126&&n&&!m&&(t(5,m=new ge.NavigationControl({showCompass:r,showZoom:f,visualizePitch:u})),n.addControl(m,i))},[l,i,r,f,u,m,n]}class kt extends W{constructor(e){super(),Q(this,e,Ao,null,N,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function Co(o,e,t){let n;const{map:l}=Ie();D(o,l,m=>t(5,n=m));let{position:i="bottom-left"}=e,{maxWidth:r=void 0}=e,{unit:f="metric"}=e,u=null;return Se(()=>{n!=null&&n.loaded()&&u&&n.removeControl(u)}),o.$$set=m=>{"position"in m&&t(1,i=m.position),"maxWidth"in m&&t(2,r=m.maxWidth),"unit"in m&&t(3,f=m.unit)},o.$$.update=()=>{o.$$.dirty&62&&n&&!u&&(t(4,u=new ge.ScaleControl({maxWidth:r,unit:f})),n.addControl(u,i))},[l,i,r,f,u,n]}class At extends W{constructor(e){super(),Q(this,e,Co,null,N,{position:1,maxWidth:2,unit:3})}}const{window:vo}=Ht,wo=o=>({map:o[0]&16,loadedImages:o[0]&32,allImagesLoaded:o[0]&64}),rt=o=>({map:o[4],loadedImages:o[5],allImagesLoaded:o[6]});function ft(o){let e,t,n=o[3]&&ut(o);const l=o[46].default,i=Le(l,o,o[45],rt);return{c(){n&&n.c(),e=Ce(),i&&i.c()},m(r,f){n&&n.m(r,f),H(r,e,f),i&&i.m(r,f),t=!0},p(r,f){r[3]?n?(n.p(r,f),f[0]&8&&A(n,1)):(n=ut(r),n.c(),A(n,1),n.m(e.parentNode,e)):n&&(_e(),v(n,1,1,()=>{n=null}),ke()),i&&i.p&&(!t||f[0]&112|f[1]&16384)&&ze(i,l,r,r[45],t?Te(l,r[45],f,wo):Oe(r[45]),rt)},i(r){t||(A(n),A(i,r),t=!0)},o(r){v(n),v(i,r),t=!1},d(r){r&&R(e),n&&n.d(r),i&&i.d(r)}}}function ut(o){let e,t,n,l,i,r,f,u;return e=new kt({props:{position:o[7]}}),n=new so({props:{position:o[7],fitBoundsOptions:{maxZoom:12}}}),i=new no({props:{position:o[7]}}),f=new At({props:{position:o[7]}}),{c(){ie(e.$$.fragment),t=Ce(),ie(n.$$.fragment),l=Ce(),ie(i.$$.fragment),r=Ce(),ie(f.$$.fragment)},m(m,a){le(e,m,a),H(m,t,a),le(n,m,a),H(m,l,a),le(i,m,a),H(m,r,a),le(f,m,a),u=!0},p(m,a){const c={};a[0]&128&&(c.position=m[7]),e.$set(c);const _={};a[0]&128&&(_.position=m[7]),n.$set(_);const S={};a[0]&128&&(S.position=m[7]),i.$set(S);const h={};a[0]&128&&(h.position=m[7]),f.$set(h)},i(m){u||(A(e.$$.fragment,m),A(n.$$.fragment,m),A(i.$$.fragment,m),A(f.$$.fragment,m),u=!0)},o(m){v(e.$$.fragment,m),v(n.$$.fragment,m),v(i.$$.fragment,m),v(f.$$.fragment,m),u=!1},d(m){m&&(R(t),R(l),R(r)),re(e,m),re(n,m),re(i,m),re(f,m)}}}function So(o){let e,t,n,l,i,r=o[4]&&o[0]&&ft(o);return{c(){e=we("div"),r&&r.c(),J(e,"class",t=Ye(o[2])+" svelte-p00lfq"),J(e,"data-testid","map-container"),Je(e,"expand-map",!o[2])},m(f,u){H(f,e,u),r&&r.m(e,null),o[47](e),n=!0,l||(i=[Mt(vo,"hashchange",o[11]),Lt(o[10].call(null,e))],l=!0)},p(f,u){f[4]&&f[0]?r?(r.p(f,u),u[0]&17&&A(r,1)):(r=ft(f),r.c(),A(r,1),r.m(e,null)):r&&(_e(),v(r,1,1,()=>{r=null}),ke()),(!n||u[0]&4&&t!==(t=Ye(f[2])+" svelte-p00lfq"))&&J(e,"class",t),(!n||u[0]&4)&&Je(e,"expand-map",!f[2])},i(f){n||(A(r),n=!0)},o(f){v(r),n=!1},d(f){f&&R(e),r&&r.d(),o[47](null),l=!1,zt(i)}}}function Mo(o,e,t){let n,l,i,r,{$$slots:f={},$$scope:u}=e,{map:m=null}=e,{mapContainer:a=void 0}=e,{class:c=void 0}=e,{style:_}=e,{diffStyleUpdates:S=!1}=e,{center:h=void 0}=e,{zoom:C=void 0}=e,{pitch:b=0}=e,{bearing:L=0}=e,{bounds:P=void 0}=e,{hash:I=!1}=e,{updateHash:Z=s=>{window.history.replaceState(window.history.state,"",s)}}=e,{loaded:G=!1}=e,{minZoom:E=0}=e,{maxZoom:B=22}=e,{minPitch:k=0}=e,{maxPitch:T=60}=e,{renderWorldCopies:K=void 0}=e,{dragPan:d=void 0}=e,{dragRotate:ye=void 0}=e,{pitchWithRotate:X=void 0}=e,{antialias:p=void 0}=e,{zoomOnDoubleClick:$=!0}=e,{locale:ee=void 0}=e,{interactive:fe=!0}=e,{attributionControl:w=!0}=e,{cooperativeGestures:ue=!1}=e,{preserveDrawingBuffer:V=!1}=e,{maxBounds:Ae=void 0}=e,{images:se=[]}=e,{standardControls:q=!1}=e,{filterLayers:U=void 0}=e,{transformRequest:be=void 0}=e;const O=Ze(),{map:j,loadedImages:ae}=Wt();D(o,j,s=>t(4,i=s)),D(o,ae,s=>t(5,r=s));let ce=new Set;async function Me(s,M=!1){if(i&&!(!i.loaded()&&!M))if("url"in s){ce.add(s.id);try{let F=await i.loadImage(s.url);i==null||i.addImage(s.id,F.data,s.options),r.add(s.id),ae.set(r)}catch(F){O("error",F)}finally{ce.delete(s.id)}}else i.addImage(s.id,s.data,s.options),r.add(s.id),ae.set(r)}let te,oe,y,z;function me(s){return g(),ve(j,i=new ge.Map(De({container:s,style:_,locale:ee,center:h,zoom:C,pitch:b,bearing:L,minZoom:E,maxZoom:B,minPitch:k,maxPitch:T,renderWorldCopies:K,dragPan:d,dragRotate:ye,pitchWithRotate:X,antialias:p,interactive:fe,preserveDrawingBuffer:V,maxBounds:Ae,bounds:P,attributionControl:w,transformRequest:be,cooperativeGestures:ue})),i),i.on("load",M=>{M.target.getContainer().setAttribute("data-testid","map"),M.target.getCanvas().setAttribute("data-testid","map-canvas"),t(0,G=!0),O("load",i)}),i.on("error",M=>O("error",{...M,map:i})),i.on("movestart",M=>O("movestart",{...M,map:i})),i.on("moveend",M=>{if(t(12,h=M.target.getCenter()),t(13,C=M.target.getZoom()),t(14,b=M.target.getPitch()),t(15,L=M.target.getBearing()),t(16,P=M.target.getBounds()),O("moveend",{...M,map:i}),I){let F=new URL(window.location.href.replace(/(#.+)?$/,yo(i)));Z(F)}}),i.on("click",M=>O("click",{...M,map:i})),i.on("dblclick",M=>O("dblclick",{...M,map:i})),i.on("contextmenu",M=>O("contextmenu",{...M,map:i})),i.on("zoomstart",M=>O("zoomstart",{...M,map:i})),i.on("zoom",M=>{O("zoom",{...M,map:i})}),i.on("zoomend",M=>{O("zoomend",{...M,map:i})}),i.on("style.load",()=>{if(i){const M=i.getStyle();if(t(42,te=M.layers.map(F=>F.id)),t(43,oe=Object.keys(M.sources)),z)for(const[F,Ge]of Object.entries(z))i.addSource(F,Ge);if(y)for(const F of y)i.addLayer(F);for(const F of se)Me(F,!0)}}),i.on("styledata",M=>{if(i&&U){const F=i.getStyle().layers;if(F)for(let Ge of F)U(Ge)||i.setLayoutProperty(Ge.id,"visibility","none")}O("styledata",{...M,map:i})}),{destroy(){t(0,G=!1),i==null||i.remove(),ve(j,i=null,i)}}}let Y=_;function g(){if(I){let s=bo(window.location.hash);s.length>=3&&(t(13,C=s[0]),t(12,h=[s[2],s[1]])),s.length==5&&(t(15,L=s[3]),t(14,b=s[4]))}}function x(s){Pe[s?"unshift":"push"](()=>{a=s,t(1,a)})}return o.$$set=s=>{"map"in s&&t(17,m=s.map),"mapContainer"in s&&t(1,a=s.mapContainer),"class"in s&&t(2,c=s.class),"style"in s&&t(18,_=s.style),"diffStyleUpdates"in s&&t(19,S=s.diffStyleUpdates),"center"in s&&t(12,h=s.center),"zoom"in s&&t(13,C=s.zoom),"pitch"in s&&t(14,b=s.pitch),"bearing"in s&&t(15,L=s.bearing),"bounds"in s&&t(16,P=s.bounds),"hash"in s&&t(20,I=s.hash),"updateHash"in s&&t(21,Z=s.updateHash),"loaded"in s&&t(0,G=s.loaded),"minZoom"in s&&t(22,E=s.minZoom),"maxZoom"in s&&t(23,B=s.maxZoom),"minPitch"in s&&t(24,k=s.minPitch),"maxPitch"in s&&t(25,T=s.maxPitch),"renderWorldCopies"in s&&t(26,K=s.renderWorldCopies),"dragPan"in s&&t(27,d=s.dragPan),"dragRotate"in s&&t(28,ye=s.dragRotate),"pitchWithRotate"in s&&t(29,X=s.pitchWithRotate),"antialias"in s&&t(30,p=s.antialias),"zoomOnDoubleClick"in s&&t(31,$=s.zoomOnDoubleClick),"locale"in s&&t(32,ee=s.locale),"interactive"in s&&t(33,fe=s.interactive),"attributionControl"in s&&t(34,w=s.attributionControl),"cooperativeGestures"in s&&t(35,ue=s.cooperativeGestures),"preserveDrawingBuffer"in s&&t(36,V=s.preserveDrawingBuffer),"maxBounds"in s&&t(37,Ae=s.maxBounds),"images"in s&&t(38,se=s.images),"standardControls"in s&&t(3,q=s.standardControls),"filterLayers"in s&&t(39,U=s.filterLayers),"transformRequest"in s&&t(40,be=s.transformRequest),"$$scope"in s&&t(45,u=s.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&8&&t(7,n=typeof q=="boolean"?void 0:q),o.$$.dirty[0]&16&&t(17,m=i),o.$$.dirty[0]&786448|o.$$.dirty[1]&14336&&i&&!Be(_,Y)){const s=i.getStyle();if(te&&(y=s.layers.filter(M=>!te.includes(M.id))),oe){const M=Object.keys(s.sources).filter(F=>!oe.includes(F));z={};for(const F of M)z[F]=s.sources[F]}t(44,Y=_),i.setStyle(_,{diff:S}),ve(ae,r=new Set,r),t(41,ce=new Set)}if(o.$$.dirty[0]&49|o.$$.dirty[1]&1152&&G&&i!=null&&i.loaded())for(let s of se)!r.has(s.id)&&!ce.has(s.id)&&!i.hasImage(s.id)&&Me(s);if(o.$$.dirty[0]&32|o.$$.dirty[1]&128&&t(6,l=se.every(s=>r.has(s.id))),o.$$.dirty[0]&61456&&i){let s={};h!=null&&!Be(h,i==null?void 0:i.getCenter())&&(s.center=h),C!=null&&!Be(C,i==null?void 0:i.getZoom())&&(s.zoom=C),L!=null&&!Be(L,i==null?void 0:i.getBearing())&&(s.bearing=L),b!=null&&!Be(b,i==null?void 0:i.getPitch())&&(s.pitch=b),Object.keys(s).length&&i.easeTo(s)}o.$$.dirty[0]&65552&&P&&!Be(P,i==null?void 0:i.getBounds())&&(i==null||i.fitBounds(P)),o.$$.dirty[0]&16|o.$$.dirty[1]&1&&($?i==null||i.doubleClickZoom.enable():i==null||i.doubleClickZoom.disable())},[G,a,c,q,i,r,l,n,j,ae,me,g,h,C,b,L,P,m,_,S,I,Z,E,B,k,T,K,d,ye,X,p,$,ee,fe,w,ue,V,Ae,se,U,be,ce,te,oe,Y,u,f,x]}class Lo extends W{constructor(e){super(),Q(this,e,Mo,So,N,{map:17,mapContainer:1,class:2,style:18,diffStyleUpdates:19,center:12,zoom:13,pitch:14,bearing:15,bounds:16,hash:20,updateHash:21,loaded:0,minZoom:22,maxZoom:23,minPitch:24,maxPitch:25,renderWorldCopies:26,dragPan:27,dragRotate:28,pitchWithRotate:29,antialias:30,zoomOnDoubleClick:31,locale:32,interactive:33,attributionControl:34,cooperativeGestures:35,preserveDrawingBuffer:36,maxBounds:37,images:38,standardControls:3,filterLayers:39,transformRequest:40},null,[-1,-1])}}const zo=o=>({features:o[0]&16,data:o[0]&16,map:o[0]&4,close:o[0]&1}),st=o=>{var e;return{features:o[4],data:((e=o[4])==null?void 0:e[0])??null,map:o[2],close:o[31]}};function at(o){var l;let e,t,n=(((l=o[4])==null?void 0:l.length)||o[3]instanceof ge.Marker)&&ct(o);return{c(){e=we("div"),n&&n.c()},m(i,r){H(i,e,r),n&&n.m(e,null),o[32](e),t=!0},p(i,r){var f;(f=i[4])!=null&&f.length||i[3]instanceof ge.Marker?n?(n.p(i,r),r[0]&24&&A(n,1)):(n=ct(i),n.c(),A(n,1),n.m(e,null)):n&&(_e(),v(n,1,1,()=>{n=null}),ke())},i(i){t||(A(n),t=!0)},o(i){v(n),t=!1},d(i){i&&R(e),n&&n.d(),o[32](null)}}}function ct(o){let e;const t=o[30].default,n=Le(t,o,o[29],st);return{c(){n&&n.c()},m(l,i){n&&n.m(l,i),e=!0},p(l,i){n&&n.p&&(!e||i[0]&536870933)&&ze(n,t,l,l[29],e?Te(t,l[29],i,zo):Oe(l[29]),st)},i(l){e||(A(n,l),e=!0)},o(l){v(n,l),e=!1},d(l){n&&n.d(l)}}}function Oo(o){let e,t,n=o[9].default&&at(o);return{c(){n&&n.c(),e=Ee()},m(l,i){n&&n.m(l,i),H(l,e,i),t=!0},p(l,i){l[9].default?n?(n.p(l,i),i[0]&512&&A(n,1)):(n=at(l),n.c(),A(n,1),n.m(e.parentNode,e)):n&&(_e(),v(n,1,1,()=>{n=null}),ke())},i(l){t||(A(n),t=!0)},o(l){v(n),t=!1},d(l){l&&R(e),n&&n.d(l)}}}function To(o,e,t){let n,l,i,r,f,u,{$$slots:m={},$$scope:a}=e;const c=Ot(m);let{closeButton:_=void 0}=e,{closeOnClickOutside:S=!0}=e,{closeOnClickInside:h=!1}=e,{closeOnMove:C=!1}=e,{openOn:b="click"}=e,{openIfTopMost:L=!0}=e,{focusAfterOpen:P=!0}=e,{anchor:I=void 0}=e,{offset:Z=void 0}=e,{popupClass:G=void 0}=e,{maxWidth:E=void 0}=e,{lngLat:B=void 0}=e,{html:k=void 0}=e,{open:T=!1}=e;const K=Ze(),{map:d,popupTarget:ye,layerEvent:X,layer:p,eventTopMost:$,markerClickManager:ee}=Ie();D(o,d,g=>t(2,i=g)),D(o,ye,g=>t(3,f=g)),D(o,X,g=>t(28,r=g)),D(o,p,g=>t(35,u=g));const fe=["click","dblclick","contextmenu"];let w,ue=!1,V;function Ae(){if(!w)return;let g=w.getElement();!g||g===V||(V=g,b==="hover"&&(V.style.pointerEvents="none"),V.addEventListener("mouseenter",()=>{t(24,ue=!0)},{passive:!0}),V.addEventListener("mouseleave",()=>{t(24,ue=!1)},{passive:!0}),V.addEventListener("click",()=>{h&&t(0,T=!1)},{passive:!0}))}yt(()=>{if(i)return i.on("click",oe),i.on("contextmenu",oe),ee.add(y),typeof f=="string"&&(i.on("click",f,O),i.on("dblclick",f,O),i.on("contextmenu",f,O),i.on("mousemove",f,te),i.on("mouseleave",f,Me),i.on("touchstart",f,ae),i.on("touchend",f,ce)),()=>{i!=null&&i.loaded()&&(w==null||w.remove(),i.off("click",oe),i.off("contextmenu",oe),ee.remove(y),f instanceof ge.Marker?f.getPopup()===w&&f.setPopup(void 0):typeof f=="string"&&(i.off("click",f,O),i.off("dblclick",f,O),i.off("contextmenu",f,O),i.off("mousemove",f,te),i.off("mouseleave",f,Me),i.off("touchstart",f,ae),i.off("touchend",f,ce)))}});function se(g){return L?!("marker"in g)&&!Vt(g)&&$(g)!==u:!1}let q=null,U="normal";function be(g){"layerType"in g&&g.layerType==="deckgl"?(t(10,B=g.coordinate),t(4,q=g.object?[g.object]:null)):(t(10,B=g.lngLat),t(4,q=g.features??[]))}function O(g){g.type!==b||se(g)||(be(g),setTimeout(()=>t(0,T=!0)))}let j=null;function ae(g){j=g.point}function ce(g){if(!j||b!=="hover")return;let x=j.dist(g.point);j=null,x<3&&(t(10,B=g.lngLat),t(4,q=g.features??[]),w.isOpen()?t(25,U="justOpened"):(t(25,U="opening"),t(0,T=!0)))}function Me(g){b!=="hover"||j||U!=="normal"||(t(0,T=!1),t(4,q=null))}function te(g){if(!(b!=="hover"||j||U!=="normal")){if(se(g)){t(0,T=!1),t(4,q=null);return}t(0,T=!0),t(4,q=g.features??[]),t(10,B=g.lngLat)}}function oe(g){if(U==="justOpened"){t(25,U="normal");return}if(!S)return;let x=[V,f instanceof ge.Marker?f==null?void 0:f.getElement():null];T&&w.isOpen()&&!x.some(s=>s==null?void 0:s.contains(g.originalEvent.target))&&(g.type==="contextmenu"&&b==="contextmenu"||g.type!=="contextmenu")&&t(0,T=!1)}function y(g){S&&T&&w.isOpen()&&g.marker!==f&&t(0,T=!1)}Se(()=>{i&&(w!=null&&w.isOpen())&&w.remove()});let z;const me=()=>t(0,T=!1);function Y(g){Pe[g?"unshift":"push"](()=>{z=g,t(1,z)})}return o.$$set=g=>{"closeButton"in g&&t(11,_=g.closeButton),"closeOnClickOutside"in g&&t(12,S=g.closeOnClickOutside),"closeOnClickInside"in g&&t(13,h=g.closeOnClickInside),"closeOnMove"in g&&t(14,C=g.closeOnMove),"openOn"in g&&t(15,b=g.openOn),"openIfTopMost"in g&&t(16,L=g.openIfTopMost),"focusAfterOpen"in g&&t(17,P=g.focusAfterOpen),"anchor"in g&&t(18,I=g.anchor),"offset"in g&&t(19,Z=g.offset),"popupClass"in g&&t(20,G=g.popupClass),"maxWidth"in g&&t(21,E=g.maxWidth),"lngLat"in g&&t(10,B=g.lngLat),"html"in g&&t(22,k=g.html),"open"in g&&t(0,T=g.open),"$$scope"in g&&t(29,a=g.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&14336&&t(27,n=_??(!S&&!h)),o.$$.dirty[0]&146685952&&(w||(t(23,w=new ge.Popup({closeButton:n,closeOnClick:!1,closeOnMove:C,focusAfterOpen:P,maxWidth:E,className:G,anchor:I,offset:Z})),V=w.getElement(),w.on("open",()=>{t(0,T=!0),Ae(),K("open",w)}),w.on("close",()=>{t(0,T=!1),K("close",w)}),w.on("hover",()=>{K("hover",w)}))),o.$$.dirty[0]&8421384&&w&&f instanceof ge.Marker&&(b==="click"?f.setPopup(w):f.getPopup()===w&&f.setPopup(void 0)),o.$$.dirty[0]&268468224&&fe.includes(b)&&(r==null?void 0:r.type)===b&&(O(r),ve(X,r=null,r)),o.$$.dirty[0]&268468224&&t(26,l=b==="hover"&&((r==null?void 0:r.type)==="mousemove"||(r==null?void 0:r.type)==="mouseenter")),o.$$.dirty[0]&352354304&&b==="hover"&&X&&(l&&r&&be(r),t(0,T=(l||ue)??!1)),o.$$.dirty[0]&12582914&&(z?w.setDOMContent(z):k&&w.setHTML(k)),o.$$.dirty[0]&8389632&&B&&w.setLngLat(B),o.$$.dirty[0]&41943045&&i){let g=w.isOpen();T&&!g?(w.addTo(i),U==="opening"&&t(25,U="justOpened")):!T&&g&&w.remove()}},[T,z,i,f,q,d,ye,X,p,c,B,_,S,h,C,b,L,P,I,Z,G,E,k,w,ue,U,l,n,r,a,m,me,Y]}class nn extends W{constructor(e){super(),Q(this,e,To,Oo,N,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}function Eo(o){let e,t,n,l;const i=[Bo,Io],r=[];function f(u,m){return u[0]?0:1}return e=f(o),t=r[e]=i[e](o),{c(){t.c(),n=Ee()},m(u,m){r[e].m(u,m),H(u,n,m),l=!0},p(u,m){t.p(u,m)},i(u){l||(A(t),l=!0)},o(u){v(t),l=!1},d(u){u&&R(n),r[e].d(u)}}}function Io(o){let e,t;return e=new Gt({props:{errorMessage:"You shouldn't be able to view this app without being logged in!"}}),{c(){ie(e.$$.fragment)},m(n,l){le(e,n,l),t=!0},p:he,i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){v(e.$$.fragment,n),t=!1},d(n){re(e,n)}}}function Bo(o){let e;return{c(){e=we("p"),e.textContent=`Logged in as ${o[0]}`},m(t,n){H(t,e,n)},p:he,i:he,o:he,d(t){t&&R(e)}}}function Po(o){let e=bt()=="Private (development)",t,n,l=e&&Eo(o);return{c(){l&&l.c(),t=Ee()},m(i,r){l&&l.m(i,r),H(i,t,r),n=!0},p(i,[r]){e&&l.p(i,r)},i(i){n||(A(l),n=!0)},o(i){v(l),n=!1},d(i){i&&R(t),l&&l.d(i)}}}function Go(o){return[Tt.get("email")]}class ln extends W{constructor(e){super(),Q(this,e,Go,Po,N,{})}}const Ho="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAQAAAC1QeVaAAAAAmJLR0QA/4ePzL8AAACgSURBVBjTY2D4D4cvGHoY2BlQwH8U2I4pCQKsDHFg3VglGRjEgazvmJLlQNjIcAnIOobbztcM5piSHUBYzxDNwMfAgMtOGKjHJpnJ8IwhhcGFYREDM6ZkCMMqoPHXGC4zBKEa5cPwBKioAAiXMIQz/GZ4yuCFkHzC4MjgxPCNoZaBjeE+kOXEcB0h+RjIdWG4AGU7w9lg4A0UesBgj8oGAP6nSFElh0b7AAAAAElFTkSuQmCC",Ro="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAm0lEQVRIS+2U0Q2AIAxEYQM30Q3UDXQy3UhHkE0cweuHHxKTXpuQaALJ/cE9eoXGUHjFwv6hAtSEPxFRh2su0Ayd6pWzDUwFO8700AGNVggDaGAqkNYDYQBStBvCAtwQC8AF8QA2kORlJWjQmm4BSB9M5lIyC3CZswC3OQu4PxqVef7TmYikoSs0aQ19GyMMwDp+HvsrQI3v/xFduXoiGbi1DtQAAAAASUVORK5CYII=",Fo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAJCAYAAAACTR1pAAAACXBIWXMAAANVAAADaAEorMqLAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAPtJREFUKJF9kT1LwwAURc+NAQsdtFYHa8HBSAcHJ0HBUVz0n7i4ObkoKAV/gYObm5ubu7OKFMQPECFuoQgWRJtch9aSYvSO770D53Flm58kM401BdkesAJcYw4m4scz8kf9qGBGe3ZuNcuCHcEmcGv7qBo/nWKnAzCpR8+/yMGWUWAcU0L6wn4DOgAhcFHEGEoBLGAqoK7te6Eb406h6vv0/NRnyBawDYyATzKFzcmXu9chmaQeHfesVDZeFGqAU0QrMy3BR5FRCKz31FxGGrMdIrpATVD98/0hVSlo16INB9oFLyEuldKsxA/n/4O59DvdB5YNVzKH+U6/AaiZavkY71DDAAAAAElFTkSuQmCC",Do="/atip/assets/google_on_non_white_hdpi-368415f0.png";function Zo(o){let e,t,n,l;return{c(){e=we("div"),t=new It(!1),n=Et(` |
  `),l=we("a"),l.textContent="MapLibre",t.a=n,J(l,"href","https://maplibre.org/"),J(l,"target","_blank"),J(e,"class","svelte-1yeu1m4")},m(i,r){H(i,e,r),t.m(o[0],e),Xe(e,n),Xe(e,l)},p(i,[r]){r&1&&t.p(i[0])},i:he,o:he,d(i){i&&R(e)}}}function Uo(o,e,t){let{attribution:n}=e;return o.$$set=l=>{"attribution"in l&&t(0,n=l.attribution)},[n]}class jo extends W{constructor(e){super(),Q(this,e,Uo,Zo,N,{attribution:0})}}function mt(o){let e,t,n,l;function i(u){o[9](u)}function r(u){o[10](u)}let f={style:o[4],bounds:o[0],hash:!0,images:[{id:"chevron",url:Ro},{id:"cycle_parking",url:Ho},{id:"railway_station",url:Fo}],attributionControl:!1,$$slots:{default:[No]},$$scope:{ctx:o}};return o[3]!==void 0&&(f.loaded=o[3]),o[2]!==void 0&&(f.map=o[2]),e=new Lo({props:f}),Pe.push(()=>He(e,"loaded",i)),Pe.push(()=>He(e,"map",r)),e.$on("error",Qo),{c(){ie(e.$$.fragment)},m(u,m){le(e,u,m),l=!0},p(u,m){const a={};m&16&&(a.style=u[4]),m&1&&(a.bounds=u[0]),m&2146&&(a.$$scope={dirty:m,ctx:u}),!t&&m&8&&(t=!0,a.loaded=u[3],Re(()=>t=!1)),!n&&m&4&&(n=!0,a.map=u[2],Re(()=>n=!1)),e.$set(a)},i(u){l||(A(e.$$.fragment,u),l=!0)},o(u){v(e.$$.fragment,u),l=!1},d(u){re(e,u)}}}function dt(o){let e,t,n,l,i,r,f,u,m,a;e=new ho({}),e.$on("zoomend",o[7]),e.$on("moveend",o[7]),n=new jo({props:{attribution:o[6]}}),i=new At({}),f=new kt({props:{position:"bottom-left",visualizePitch:!0}});let c=o[1]=="google"&&gt();const _=o[8].default,S=Le(_,o,o[11],null);return{c(){ie(e.$$.fragment),t=Ce(),ie(n.$$.fragment),l=Ce(),ie(i.$$.fragment),r=Ce(),ie(f.$$.fragment),u=Ce(),c&&c.c(),m=Ce(),S&&S.c()},m(h,C){le(e,h,C),H(h,t,C),le(n,h,C),H(h,l,C),le(i,h,C),H(h,r,C),le(f,h,C),H(h,u,C),c&&c.m(h,C),H(h,m,C),S&&S.m(h,C),a=!0},p(h,C){const b={};C&64&&(b.attribution=h[6]),n.$set(b),h[1]=="google"?c||(c=gt(),c.c(),c.m(m.parentNode,m)):c&&(c.d(1),c=null),S&&S.p&&(!a||C&2048)&&ze(S,_,h,h[11],a?Te(_,h[11],C,null):Oe(h[11]),null)},i(h){a||(A(e.$$.fragment,h),A(n.$$.fragment,h),A(i.$$.fragment,h),A(f.$$.fragment,h),A(S,h),a=!0)},o(h){v(e.$$.fragment,h),v(n.$$.fragment,h),v(i.$$.fragment,h),v(f.$$.fragment,h),v(S,h),a=!1},d(h){h&&(R(t),R(l),R(r),R(u),R(m)),re(e,h),re(n,h),re(i,h),re(f,h),c&&c.d(h),S&&S.d(h)}}}function gt(o){let e,t;return{c(){e=we("img"),Bt(e.src,t=Do)||J(e,"src",t),J(e,"alt","Google logo"),J(e,"class","svelte-81xaz8")},m(n,l){H(n,e,l)},d(n){n&&R(e)}}}function No(o){let e,t,n=o[5]&&dt(o);return{c(){n&&n.c(),e=Ee()},m(l,i){n&&n.m(l,i),H(l,e,i),t=!0},p(l,i){l[5]?n?(n.p(l,i),i&32&&A(n,1)):(n=dt(l),n.c(),A(n,1),n.m(e.parentNode,e)):n&&(_e(),v(n,1,1,()=>{n=null}),ke())},i(l){t||(A(n),t=!0)},o(l){v(n),t=!1},d(l){l&&R(e),n&&n.d(l)}}}function Wo(o){let e,t,n=o[4]&&mt(o);return{c(){e=we("div"),n&&n.c(),J(e,"class","map svelte-81xaz8")},m(l,i){H(l,e,i),n&&n.m(e,null),t=!0},p(l,[i]){l[4]?n?(n.p(l,i),i&16&&A(n,1)):(n=mt(l),n.c(),A(n,1),n.m(e,null)):n&&(_e(),v(n,1,1,()=>{n=null}),ke())},i(l){t||(A(n),t=!0)},o(l){v(n),t=!1},d(l){l&&R(e),n&&n.d()}}}function Qo(o){console.error(`MapLibre error: ${o.detail.error}`)}function Ko(o,e,t){let n,l;D(o,xe,b=>t(5,n=b)),D(o,Fe,b=>t(6,l=b));let{$$slots:i={},$$scope:r}=e,{style:f}=e,{startBounds:u=void 0}=e,m=null,a,c=!1;We("setCamera",!window.location.hash),window.location.hash&&(u=void 0),yt(async()=>{t(4,m=await pe(f))});async function _(b){t(4,m=await pe(f));let L=new URL(window.location.href);L.searchParams.set("style",b),window.history.replaceState(null,"",L.toString())}async function S(){f=="google"&&n&&ve(Fe,l=await Ft(n),l)}function h(b){c=b,t(3,c)}function C(b){a=b,t(2,a)}return o.$$set=b=>{"style"in b&&t(1,f=b.style),"startBounds"in b&&t(0,u=b.startBounds),"$$scope"in b&&t(11,r=b.$$scope)},o.$$.update=()=>{o.$$.dirty&12&&c&&xe.set(a),o.$$.dirty&2&&_(f)},[u,f,a,c,m,n,l,S,i,h,C,r]}class rn extends W{constructor(e){super(),Q(this,e,Ko,Wo,N,{style:1,startBounds:0})}}export{Jo as A,xo as E,en as F,tn as G,ln as L,rn as M,nn as P,on as a,io as b,De as c,ho as d,_t as e,Ro as f,Ue as g,$o as h,Ho as i,Fo as j,Xo as k,po as l,Ht as m,lo as r,Qt as u};
