import{S as te,i as ne,s as le,J as Ce,e as z,t as ge,a as Y,d,f as v,g as T,A as ze,K as Ie,L as Pe,M as Be,h as L,j as I,k as p,aK as Yt,r as Re,u as We,c as X,G as Ue,m as x,w as Fe,l as $,x as Te,ay as st,aL as me,q as V,af as be,aa as Z,ab as Ze,N as he,av as ee,aB as Ve,a9 as rt,aM as pt,C as we,v as ve,aN as Lt,H as Tt,aO as Xt,az as xt,o as $t,aP as en,aC as zt,b as ot,aQ as at,aR as et,ae as tn,I as ft,ac as ut}from"./index-817a5f11.js";import{S as nn,M as ln}from"./Modal-d68d1d1a.js";import{l as sn,d as rn,g as on,m as an,f as fn}from"./MapLibreMap-1e9732d4.js";import{e as ct,u as un,o as cn}from"./files-a783db60.js";import{R as dn}from"./Radio-dce651f6.js";import{S as St}from"./SecondaryButton-453a661d.js";function mn(l){let e,t,n,i,s,r,o;const c=l[3].default,u=Ce(c,l,l[2],null);return{c(){e=z("details"),t=z("summary"),n=z("span"),i=ge(l[0]),s=Y(),r=z("div"),u&&u.c(),d(n,"class","govuk-details__summary-text"),d(t,"class","govuk-details__summary"),d(r,"class","govuk-details__text"),e.open=l[1],d(e,"class","govuk-details"),d(e,"data-module","govuk-details")},m(a,m){v(a,e,m),T(e,t),T(t,n),T(n,i),T(e,s),T(e,r),u&&u.m(r,null),o=!0},p(a,[m]){(!o||m&1)&&ze(i,a[0]),u&&u.p&&(!o||m&4)&&Ie(u,c,a,a[2],o?Be(c,a[2],m,null):Pe(a[2]),null),(!o||m&2)&&(e.open=a[1])},i(a){o||(L(u,a),o=!0)},o(a){I(u,a),o=!1},d(a){a&&p(e),u&&u.d(a)}}}function gn(l,e,t){let{$$slots:n={},$$scope:i}=e,{label:s}=e,{open:r=!1}=e;return l.$$set=o=>{"label"in o&&t(0,s=o.label),"open"in o&&t(1,r=o.open),"$$scope"in o&&t(2,i=o.$$scope)},[s,r,i,n]}class _n extends te{constructor(e){super(),ne(this,e,gn,mn,le,{label:0,open:1})}}const zl=["==",["geometry-type"],"Polygon"],Sl=["==",["geometry-type"],"LineString"],Ml=["==",["geometry-type"],"Point"];function Cl(){return{type:"FeatureCollection",features:[]}}function Il(l,e,t){let n=["match",l];for(let[i,s]of Object.entries(e))n.push(i),n.push(s);return n.push(t),n}function Pl(l){return Yt(l)}function Bl(l){var t,n;let e={type:"FeatureCollection",features:[]};for(let i of l.features)if(e.features.push(i),i.geometry.type=="LineString"&&!((t=i.properties)!=null&&t.hide_while_editing))for(let s of[i.geometry.coordinates[0],i.geometry.coordinates[i.geometry.coordinates.length-1]])e.features.push({type:"Feature",properties:{endpoint:!0,scheme_reference:(n=i.properties)==null?void 0:n.scheme_reference},geometry:{type:"Point",coordinates:s}});return e}function dt(l){let e;return{c(){e=z("p"),e.innerHTML=`Google <a href="https://cloud.google.com/maps-platform/terms/" target="_blank">Terms of Use</a>
    and
    <a href="https://www.google.com/policies/privacy/" target="_blank">Privacy Policy</a>`},m(t,n){v(t,e,n)},d(t){t&&p(e)}}}function hn(l){let e,t,n,i,s;function r(u){l[2](u)}let o={label:"Basemap",choices:sn(),disabled:l[0]};l[1]!==void 0&&(o.value=l[1]),e=new nn({props:o}),Re.push(()=>We(e,"value",r));let c=l[1]=="google"&&dt();return{c(){X(e.$$.fragment),n=Y(),c&&c.c(),i=Ue()},m(u,a){x(e,u,a),v(u,n,a),c&&c.m(u,a),v(u,i,a),s=!0},p(u,[a]){const m={};a&1&&(m.disabled=u[0]),!t&&a&2&&(t=!0,m.value=u[1],Fe(()=>t=!1)),e.$set(m),u[1]=="google"?c||(c=dt(),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},i(u){s||(L(e.$$.fragment,u),s=!0)},o(u){I(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(i)),$(e,u),c&&c.d(u)}}}function bn(l,e,t){let n;Te(l,st,r=>t(1,n=r));let{disabled:i=!1}=e;function s(r){n=r,st.set(n)}return l.$$set=r=>{"disabled"in r&&t(0,i=r.disabled)},[i,n,s]}class Rl extends te{constructor(e){super(),ne(this,e,bn,hn,le,{disabled:0})}}function yn(l){let e,t;return{c(){e=me("svg"),t=me("path"),d(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),d(e,"viewBox","0 0 14 14"),d(e,"width","13"),d(e,"height","13"),d(e,"class","svelte-en2qvf")},m(n,i){v(n,e,i),T(e,t)},p:V,i:V,o:V,d(n){n&&p(e)}}}class Mt extends te{constructor(e){super(),ne(this,e,null,yn,le,{})}}function kn(l){let e,t;return{c(){e=me("svg"),t=me("path"),d(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),d(e,"viewBox","0 0 30 30"),d(e,"fill","none"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"class","svelte-d2loi5")},m(n,i){v(n,e,i),T(e,t)},p:V,i:V,o:V,d(n){n&&p(e)}}}class Ct extends te{constructor(e){super(),ne(this,e,null,kn,le,{})}}function wn(l){let e,t;return{c(){e=z("img"),ee(e.src,t=l[3]+"area.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){v(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"area.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function vn(l){let e,t;return{c(){e=z("img"),ee(e.src,t=l[3]+"reverse.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){v(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"reverse.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function pn(l){let e,t;return{c(){e=z("img"),ee(e.src,t=l[3]+"poi.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){v(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"poi.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function Ln(l){let e,t;return{c(){e=z("img"),ee(e.src,t=l[3]+"postal_code.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){v(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"postal_code.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function Tn(l){let e,t;return{c(){e=z("img"),ee(e.src,t=l[3]+"street.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){v(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"street.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function zn(l){let e,t;return{c(){e=z("img"),ee(e.src,t=l[3]+"road.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){v(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"road.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function Sn(l){let e,t;return{c(){e=z("img"),ee(e.src,t=l[3]+"housenumber.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){v(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"housenumber.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function Mn(l){let e,t,n,i;return{c(){e=z("img"),ee(e.src,t=l[5])||d(e,"src",t),d(e,"alt",l[4]),d(e,"class","svelte-ltkwvy")},m(s,r){v(s,e,r),n||(i=Z(e,"error",l[14]),n=!0)},p(s,r){r&32&&!ee(e.src,t=s[5])&&d(e,"src",t),r&16&&d(e,"alt",s[4])},d(s){s&&p(e),n=!1,i()}}}function mt(l){let e,t;return{c(){e=z("span"),t=ge(l[6]),d(e,"class","secondary svelte-ltkwvy")},m(n,i){v(n,e,i),T(e,t)},p(n,i){i&64&&ze(t,n[6])},d(n){n&&p(e)}}}function Cn(l){let e,t,n,i,s,r,o,c,u,a=(l[7]?l[0].place_name:l[0].place_name.replace(/,.*/,""))+"",m,w,R=l[2]==="always"||l[2]!=="never"&&!l[0].address&&!l[0].id.startsWith("road.")&&!l[0].id.startsWith("address.")&&!l[0].id.startsWith("postal_code.")&&(!l[0].id.startsWith("poi.")||!l[5])&&!l[7],U,W,h=(l[7]?"":l[0].place_name.replace(/[^,]*,?\s*/,""))+"",M,A,E;function P(b,H){return H&1&&(t=null),H&1&&(n=null),H&1&&(i=null),H&1&&(s=null),b[5]?Mn:b[0].address?Sn:(t==null&&(t=!!b[0].id.startsWith("road.")),t?zn:(n==null&&(n=!!b[0].id.startsWith("address.")),n?Tn:(i==null&&(i=!!b[0].id.startsWith("postal_code.")),i?Ln:(s==null&&(s=!!b[0].id.startsWith("poi.")),s?pn:b[7]?vn:wn))))}let D=P(l,-1),O=D(l),g=R&&mt(l);return{c(){e=z("li"),O.c(),r=Y(),o=z("span"),c=z("span"),u=z("span"),m=ge(a),w=Y(),g&&g.c(),U=Y(),W=z("span"),M=ge(h),d(u,"class","primary svelte-ltkwvy"),d(c,"class","svelte-ltkwvy"),d(W,"class","line2 svelte-ltkwvy"),d(o,"class","texts svelte-ltkwvy"),d(e,"tabindex","0"),d(e,"data-selected",l[1]),d(e,"class","svelte-ltkwvy"),be(e,"selected",l[1])},m(b,H){v(b,e,H),O.m(e,null),T(e,r),T(e,o),T(o,c),T(c,u),T(u,m),T(c,w),g&&g.m(c,null),T(o,U),T(o,W),T(W,M),A||(E=[Z(e,"mouseenter",l[12]),Z(e,"focus",l[13])],A=!0)},p(b,[H]){D===(D=P(b,H))&&O?O.p(b,H):(O.d(1),O=D(b),O&&(O.c(),O.m(e,r))),H&1&&a!==(a=(b[7]?b[0].place_name:b[0].place_name.replace(/,.*/,""))+"")&&ze(m,a),H&37&&(R=b[2]==="always"||b[2]!=="never"&&!b[0].address&&!b[0].id.startsWith("road.")&&!b[0].id.startsWith("address.")&&!b[0].id.startsWith("postal_code.")&&(!b[0].id.startsWith("poi.")||!b[5])&&!b[7]),R?g?g.p(b,H):(g=mt(b),g.c(),g.m(c,null)):g&&(g.d(1),g=null),H&1&&h!==(h=(b[7]?"":b[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&ze(M,h),H&2&&d(e,"data-selected",b[1]),H&2&&be(e,"selected",b[1])},i:V,o:V,d(b){b&&p(e),O.d(),g&&g.d(),A=!1,Ze(E)}}}function In(l,e,t){var E;let n,i,{feature:s}=e,{selected:r=!1}=e,{showPlaceType:o}=e,{missingIconsCache:c}=e,{iconsBaseUrl:u}=e;const a=(E=s.properties)==null?void 0:E.categories;let m,w,R=0,U=s.place_type[0]==="reverse";function W(){w&&c.add(w),t(10,R++,R)}function h(P){he.call(this,l,P)}function M(P){he.call(this,l,P)}const A=()=>W();return l.$$set=P=>{"feature"in P&&t(0,s=P.feature),"selected"in P&&t(1,r=P.selected),"showPlaceType"in P&&t(2,o=P.showPlaceType),"missingIconsCache"in P&&t(9,c=P.missingIconsCache),"iconsBaseUrl"in P&&t(3,u=P.iconsBaseUrl)},l.$$.update=()=>{var P,D,O,g;if(l.$$.dirty&3640)do t(11,n--,n),t(4,m=a==null?void 0:a[n]),t(5,w=m?u+m.replace(/ /g,"_")+".svg":void 0);while(n>-1&&(!w||c.has(w)));l.$$.dirty&1&&t(6,i=((D=(P=s.properties)==null?void 0:P.categories)==null?void 0:D.join(", "))??((g=(O=s.properties)==null?void 0:O.place_type_name)==null?void 0:g[0])??s.place_type[0])},t(11,n=(a==null?void 0:a.length)??0),[s,r,o,u,m,w,i,U,W,c,R,n,h,M,A]}class Pn extends te{constructor(e){super(),ne(this,e,In,Cn,le,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function Bn(l){let e;return{c(){e=z("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',d(e,"class","svelte-7cmwmc")},m(t,n){v(t,e,n)},p:V,i:V,o:V,d(t){t&&p(e)}}}class Rn extends te{constructor(e){super(),ne(this,e,null,Bn,le,{})}}function Un(l){let e,t;return{c(){e=me("svg"),t=me("path"),d(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),d(e,"viewBox","0 0 60.006 21.412"),d(e,"width","14"),d(e,"height","20"),d(e,"class","svelte-en2qvf")},m(n,i){v(n,e,i),T(e,t)},p:V,i:V,o:V,d(n){n&&p(e)}}}class En extends te{constructor(e){super(),ne(this,e,null,Un,le,{})}}function An(l){let e,t,n;return{c(){e=me("svg"),t=me("circle"),n=me("path"),d(t,"cx","4.789"),d(t,"cy","4.787"),d(t,"r","3.85"),d(t,"class","svelte-1aq105l"),d(n,"d","M12.063 12.063 7.635 7.635"),d(n,"class","svelte-1aq105l"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","13"),d(e,"height","13"),d(e,"viewBox","0 0 13 13"),d(e,"class","svelte-1aq105l")},m(i,s){v(i,e,s),T(e,t),T(e,n)},p:V,i:V,o:V,d(i){i&&p(e)}}}class On extends te{constructor(e){super(),ne(this,e,null,An,le,{})}}function Hn(l,e,t){const n=e[1],i=e[0],s=n-i;return l===n&&t?l:((l-i)%s+s)%s+i}function gt(l){const e=[...l];return e[2]<e[0]&&(Math.abs((e[0]+e[2]+360)/2)>Math.abs((e[0]-360+e[2])/2)?e[0]-=360:e[2]+=360),e}let Me;async function jn(l,e,t){const n=l==null?void 0:l.getCenterAndZoom();for(const i of e??[])if(!(n&&(i.minZoom!=null&&i.minZoom>n[0]||i.maxZoom!=null&&i.maxZoom<n[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(Me&&i.cachedLocationExpiry&&Me.time+i.cachedLocationExpiry>Date.now()){if(!Me.coords)break e;return Me.coords}let s;try{return s=await new Promise((r,o)=>{t.signal.addEventListener("abort",()=>{o(Error("aborted"))}),navigator.geolocation.getCurrentPosition(c=>{r([c.coords.longitude,c.coords.latitude].map(u=>u.toFixed(6)).join(","))},c=>{o(c)},i)}),s}catch{}finally{i.cachedLocationExpiry&&(Me={time:Date.now(),coords:s})}if(t.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(n&&i.type==="map-center")return n[1].toFixed(6)+","+n[2].toFixed(6)}}function _t(l,e,t){const n=l.slice();return n[84]=e[t],n[86]=t,n}function ht(l){let e,t;return e=new Rn({}),{c(){X(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function bt(l){let e,t,n,i,s;return t=new En({}),{c(){e=z("button"),X(t.$$.fragment),d(e,"type","button"),d(e,"title",l[9]),d(e,"class","svelte-bz0zu3"),be(e,"active",l[0])},m(r,o){v(r,e,o),x(t,e,null),n=!0,i||(s=Z(e,"click",l[69]),i=!0)},p(r,o){(!n||o[0]&512)&&d(e,"title",r[9]),(!n||o[0]&1)&&be(e,"active",r[0])},i(r){n||(L(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){r&&p(e),$(t),i=!1,s()}}}function Vn(l){let e,t=[],n=new Map,i,s,r,o=ct(l[14]);const c=u=>u[84].id+(u[84].address?","+u[84].address:"");for(let u=0;u<o.length;u+=1){let a=_t(l,o,u),m=c(a);n.set(m,t[u]=yt(m,a))}return{c(){e=z("ul");for(let u=0;u<t.length;u+=1)t[u].c();d(e,"class","options svelte-bz0zu3")},m(u,a){v(u,e,a);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);i=!0,s||(r=[Z(e,"mouseleave",l[73]),Z(e,"blur",l[74])],s=!0)},p(u,a){a[0]&17880064&&(o=ct(u[14]),we(),t=un(t,a,c,1,u,o,n,e,cn,yt,null,_t),ve())},i(u){if(!i){for(let a=0;a<o.length;a+=1)L(t[a]);i=!0}},o(u){for(let a=0;a<t.length;a+=1)I(t[a]);i=!1},d(u){u&&p(e);for(let a=0;a<t.length;a+=1)t[a].d();s=!1,Ze(r)}}}function Wn(l){let e,t,n,i,s,r;return t=new Ct({}),{c(){e=z("div"),X(t.$$.fragment),n=Y(),i=z("div"),s=ge(l[7]),d(i,"class","svelte-bz0zu3"),d(e,"class","no-results svelte-bz0zu3")},m(o,c){v(o,e,c),x(t,e,null),T(e,n),T(e,i),T(i,s),r=!0},p(o,c){(!r||c[0]&128)&&ze(s,o[7])},i(o){r||(L(t.$$.fragment,o),r=!0)},o(o){I(t.$$.fragment,o),r=!1},d(o){o&&p(e),$(t)}}}function Fn(l){let e="",t;return{c(){t=ge(e)},m(n,i){v(n,t,i)},p:V,i:V,o:V,d(n){n&&p(t)}}}function Zn(l){let e,t,n,i,s,r,o,c,u,a,m;return t=new Ct({}),c=new Mt({}),{c(){e=z("div"),X(t.$$.fragment),n=Y(),i=z("div"),s=ge(l[6]),r=Y(),o=z("button"),X(c.$$.fragment),d(i,"class","svelte-bz0zu3"),d(o,"class","svelte-bz0zu3"),d(e,"class","error svelte-bz0zu3")},m(w,R){v(w,e,R),x(t,e,null),T(e,n),T(e,i),T(i,s),T(e,r),T(e,o),x(c,o,null),u=!0,a||(m=Z(o,"click",l[70]),a=!0)},p(w,R){(!u||R[0]&64)&&ze(s,w[6])},i(w){u||(L(t.$$.fragment,w),L(c.$$.fragment,w),u=!0)},o(w){I(t.$$.fragment,w),I(c.$$.fragment,w),u=!1},d(w){w&&p(e),$(t),$(c),a=!1,m()}}}function yt(l,e){let t,n,i;function s(){return e[71](e[86])}function r(){return e[72](e[84])}return n=new Pn({props:{feature:e[84],showPlaceType:e[10],selected:e[15]===e[86],missingIconsCache:e[20],iconsBaseUrl:e[12]}}),n.$on("mouseenter",s),n.$on("focus",r),{key:l,first:null,c(){t=Ue(),X(n.$$.fragment),this.first=t},m(o,c){v(o,t,c),x(n,o,c),i=!0},p(o,c){e=o;const u={};c[0]&16384&&(u.feature=e[84]),c[0]&1024&&(u.showPlaceType=e[10]),c[0]&49152&&(u.selected=e[15]===e[86]),c[0]&4096&&(u.iconsBaseUrl=e[12]),n.$set(u)},i(o){i||(L(n.$$.fragment,o),i=!0)},o(o){I(n.$$.fragment,o),i=!1},d(o){o&&p(t),$(n,o)}}}function Dn(l){let e,t,n,i,s,r,o,c,u,a,m,w,R,U,W,h,M,A,E,P,D,O=!1;s=new On({}),m=new Mt({});let g=l[19]&&ht(),b=l[5]==="button"&&bt(l);const H=l[61].default,J=Ce(H,l,l[60],null),G=[Zn,Fn,Wn,Vn],_=[];function ye(y,j){var re,de;return y[18]?0:y[16]?((re=y[14])==null?void 0:re.length)===0?2:y[16]&&((de=y[14])!=null&&de.length)?3:-1:1}return~(h=ye(l))&&(M=_[h]=G[h](l)),{c(){e=Y(),t=z("form"),n=z("div"),i=z("button"),X(s.$$.fragment),r=Y(),o=z("input"),c=Y(),u=z("div"),a=z("button"),X(m.$$.fragment),w=Y(),g&&g.c(),R=Y(),b&&b.c(),U=Y(),J&&J.c(),W=Y(),M&&M.c(),d(i,"class","search-button svelte-bz0zu3"),d(i,"type","button"),d(o,"placeholder",l[8]),d(o,"aria-label",l[8]),d(o,"class","svelte-bz0zu3"),d(a,"type","button"),d(a,"title",l[3]),d(a,"class","svelte-bz0zu3"),d(u,"class","clear-button-container svelte-bz0zu3"),be(u,"displayable",l[1]!==""),d(n,"class","input-group svelte-bz0zu3"),d(t,"tabindex","0"),d(t,"class",A=Ve(l[2])+" svelte-bz0zu3"),be(t,"can-collapse",l[4]&&l[1]==="")},m(y,j){v(y,e,j),v(y,t,j),T(t,n),T(n,i),x(s,i,null),T(n,r),T(n,o),l[63](o),rt(o,l[1]),T(n,c),T(n,u),T(u,a),x(m,a,null),T(u,w),g&&g.m(u,null),T(n,R),b&&b.m(n,null),T(n,U),J&&J.m(n,null),T(t,W),~h&&_[h].m(t,null),E=!0,P||(D=[Z(i,"click",l[62]),Z(o,"input",l[64]),Z(o,"focus",l[65]),Z(o,"blur",l[66]),Z(o,"keydown",l[22]),Z(o,"input",l[67]),Z(a,"click",l[68]),Z(t,"submit",pt(l[21]))],P=!0)},p(y,j){(!E||j[0]&256)&&d(o,"placeholder",y[8]),(!E||j[0]&256)&&d(o,"aria-label",y[8]),j[0]&2&&o.value!==y[1]&&rt(o,y[1]),(!E||j[0]&8)&&d(a,"title",y[3]),y[19]?g?j[0]&524288&&L(g,1):(g=ht(),g.c(),L(g,1),g.m(u,null)):g&&(we(),I(g,1,1,()=>{g=null}),ve()),(!E||j[0]&2)&&be(u,"displayable",y[1]!==""),y[5]==="button"?b?(b.p(y,j),j[0]&32&&L(b,1)):(b=bt(y),b.c(),L(b,1),b.m(n,U)):b&&(we(),I(b,1,1,()=>{b=null}),ve()),J&&J.p&&(!E||j[1]&536870912)&&Ie(J,H,y,y[60],E?Be(H,y[60],j,null):Pe(y[60]),null);let re=h;h=ye(y),h===re?~h&&_[h].p(y,j):(M&&(we(),I(_[re],1,1,()=>{_[re]=null}),ve()),~h?(M=_[h],M?M.p(y,j):(M=_[h]=G[h](y),M.c()),L(M,1),M.m(t,null)):M=null),(!E||j[0]&4&&A!==(A=Ve(y[2])+" svelte-bz0zu3"))&&d(t,"class",A),(!E||j[0]&22)&&be(t,"can-collapse",y[4]&&y[1]==="")},i(y){E||(L(O),L(s.$$.fragment,y),L(m.$$.fragment,y),L(g),L(b),L(J,y),L(M),E=!0)},o(y){I(O),I(s.$$.fragment,y),I(m.$$.fragment,y),I(g),I(b),I(J,y),I(M),E=!1},d(y){y&&(p(e),p(t)),$(s),l[63](null),$(m),g&&g.d(),b&&b.d(),J&&J.d(y),~h&&_[h].d(),P=!1,Ze(D)}}}function qn(l,e,t){let n,i,{$$slots:s={},$$scope:r}=e;const o={continental_marine:4,country:4,major_landform:8,region:5,subregion:6,county:7,joint_municipality:8,joint_submunicipality:9,municipality:10,municipal_district:11,locality:12,neighbourhood:13,place:14,postal_code:14,road:16,poi:17,address:18,"poi.peak":15,"poi.shop":18,"poi.cafe":18,"poi.restaurant":18,"poi.aerodrome":13};let{class:c=void 0}=e,{apiKey:u}=e,{bbox:a=void 0}=e,{clearButtonTitle:m="clear"}=e,{clearOnBlur:w=!1}=e,{collapsed:R=!1}=e,{country:U=void 0}=e,{debounceSearch:W=200}=e,{enableReverse:h="never"}=e,{errorMessage:M="Something went wrongâ€¦"}=e,{filter:A=()=>!0}=e,{flyTo:E=!0}=e,{fuzzyMatch:P=!0}=e,{language:D=void 0}=e,{limit:O=void 0}=e,{mapController:g=void 0}=e,{minLength:b=2}=e,{noResultsMessage:H="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:J="Search"}=e,{proximity:G=[{type:"server-geolocation"}]}=e,{reverseActive:_=h==="always"}=e,{reverseButtonTitle:ye="toggle reverse geocoding"}=e,{searchValue:y=""}=e,{pickedResultStyle:j="full-geometry"}=e,{showPlaceType:re="if-needed"}=e,{showResultsWhileTyping:de=!0}=e,{selectFirst:k=!0}=e,{flyToSelected:oe=!1}=e,{markerOnSelected:ae=!0}=e,{types:ie=void 0}=e,{exhaustiveReverseGeocoding:De=!1}=e,{excludeTypes:Ee=!1}=e,{zoom:Ae=o}=e,{apiUrl:qe="https://api.maptiler.com/geocoding"}=e,{fetchParameters:Ge={}}=e,{iconsBaseUrl:tt="https://cdn.maptiler.com/maptiler-geocoding-control/v2.0.1/icons/"}=e,{adjustUrlQuery:Ke=()=>{}}=e;function It(){fe.focus()}function Pt(){fe.blur()}function nt(f,q=!0,Q=!1){t(1,y=f),q?(t(15,F=-1),it()):(Ye(!Q,Q),setTimeout(()=>{fe.focus(),fe.select()}))}function Bt(){t(14,B=void 0),t(56,S=void 0),t(15,F=-1)}function Rt(){t(55,K=[]),t(56,S=void 0)}let pe=!1,B,K,S,lt="",fe,F=-1,ue,Oe=[],ke,Le,He,Ne;const Ut=new Set,_e=Lt();Tt(()=>{g&&(g.setEventHandler(void 0),g.indicateReverse(!1),g.setSelectedMarker(-1),g.setFeatures(void 0,void 0,!1))});function it(f){if(Le&&(clearTimeout(Le),Le=void 0),F>-1&&B)t(56,S=B[F]),t(1,y=S.place_type[0]==="reverse"?S.place_name:S.place_name.replace(/,.*/,"")),t(18,ue=void 0),t(55,K=void 0),t(15,F=-1);else if(y){const q=f||!Qe(y);Je(y,{exact:!0}).then(()=>{t(55,K=B),t(56,S=void 0),q&&Et()}).catch(Q=>t(18,ue=Q))}}function Qe(f){try{return Xt(f,6)}catch{return!1}}async function Je(f,{byId:q=!1,exact:Q=!1}={}){t(18,ue=void 0),ke==null||ke.abort();const se=new AbortController;t(19,ke=se);try{const C=Qe(f),N=new URLSearchParams;if(D!==void 0&&N.set("language",Array.isArray(D)?D.join(","):D??""),ie&&N.set("types",ie.join(",")),Ee&&N.set("excludeTypes",String(Ee)),a&&N.set("bbox",a.map(je=>je.toFixed(6)).join(",")),U&&N.set("country",Array.isArray(U)?U.join(","):U),!q&&!C){const je=await jn(g,G,se);je&&N.set("proximity",je),(Q||!de)&&N.set("autocomplete","false"),N.set("fuzzyMatch",String(P))}O!==void 0&&(De||!C||(ie==null?void 0:ie.length)===1)&&N.set("limit",String(O)),N.set("key",u),Ke(N);const ce=qe+"/"+encodeURIComponent(C?C.decimalLongitude+","+C.decimalLatitude:f)+".json?"+N.toString();if(ce===lt){q?(t(14,B=void 0),t(56,S=Oe[0])):t(14,B=Oe);return}lt=ce;const xe=await fetch(ce,{signal:se.signal,...Ge});if(!xe.ok)throw new Error(await xe.text());const $e=await xe.json();_e("response",{url:ce,featureCollection:$e}),q?(t(14,B=void 0),t(56,S=$e.features[0]),Oe=[S]):(t(14,B=$e.features.filter(A)),C&&B.unshift({type:"Feature",properties:{},id:"reverse_"+C.decimalLongitude+"_"+C.decimalLatitude,text:C.decimalLatitude+", "+C.decimalLongitude,place_name:C.decimalLatitude+", "+C.decimalLongitude,place_type:["reverse"],center:[C.decimalLongitude,C.decimalLatitude],bbox:[C.decimalLongitude,C.decimalLatitude,C.decimalLongitude,C.decimalLatitude],geometry:{type:"Point",coordinates:[C.decimalLongitude,C.decimalLatitude]}}),Oe=B,C&&fe.focus())}catch(C){if(C&&typeof C=="object"&&"name"in C&&C.name==="AbortError")return;throw C}finally{se===ke&&t(19,ke=void 0)}}function Et(){var se;if(!(K!=null&&K.length)||!E)return;const f=[180,90,-180,-90],q=!K.some(C=>!C.matching_text);let Q;for(const C of K){const N=Se(C);if(Q=Q===void 0?N:N===void 0?Q:Math.max(Q,N),q||!C.matching_text)for(const ce of[0,1,2,3])f[ce]=Math[ce<2?"min":"max"](f[ce],((se=C.bbox)==null?void 0:se[ce])??C.center[ce%2])}g&&K.length>0&&(S&&f[0]===f[2]&&f[1]===f[3]?g.flyTo(S.center,Se(S)):g.fitBounds(gt(f),50,Q))}function Se(f){var Q;if(!f.bbox||f.bbox[0]!==f.bbox[2]&&f.bbox[1]!==f.bbox[3])return;const q=f.id.replace(/\..*/,"");return(Array.isArray((Q=f.properties)==null?void 0:Q.categories)?f.properties.categories.reduce((se,C)=>{const N=Ae[q+"."+C];return se===void 0?N:N===void 0?se:Math.max(se,N)},void 0):void 0)??Ae[q]}function At(f){t(0,_=h==="always"),t(14,B=void 0),t(56,S=void 0),t(15,F=-1),nt(f[1].toFixed(6)+", "+Hn(f[0],[-180,180],!0).toFixed(6),!1,!0)}function Ot(f){if(!B)return;let q=f.key==="ArrowDown"?1:f.key==="ArrowUp"?-1:0;q&&(F===(k?0:-1)&&q===-1&&t(15,F=B.length),t(15,F+=q),F>=B.length&&t(15,F=-1),F<0&&k&&t(15,F=0),f.preventDefault())}function Ye(f=!0,q=!1){if(t(18,ue=void 0),de||q){if(Le&&clearTimeout(Le),y.length<b)return;const Q=y;Le=window.setTimeout(()=>{Je(Q).catch(se=>t(18,ue=se))},f?W:0)}else t(14,B=void 0),t(18,ue=void 0)}function Xe(f){t(56,S=f),t(1,y=f.place_name),t(15,F=-1)}const Ht=()=>fe.focus();function jt(f){Re[f?"unshift":"push"](()=>{fe=f,t(17,fe)})}function Vt(){y=this.value,t(1,y),t(13,pe),t(28,w)}const Wt=()=>t(13,pe=!0),Ft=()=>t(13,pe=!1),Zt=()=>Ye(),Dt=()=>{t(1,y=""),fe.focus()},qt=()=>t(0,_=!_),Gt=()=>t(18,ue=void 0),Kt=f=>t(15,F=f),Nt=f=>Xe(f),Qt=()=>{k||t(15,F=-1)},Jt=()=>{};return l.$$set=f=>{"class"in f&&t(2,c=f.class),"apiKey"in f&&t(26,u=f.apiKey),"bbox"in f&&t(27,a=f.bbox),"clearButtonTitle"in f&&t(3,m=f.clearButtonTitle),"clearOnBlur"in f&&t(28,w=f.clearOnBlur),"collapsed"in f&&t(4,R=f.collapsed),"country"in f&&t(29,U=f.country),"debounceSearch"in f&&t(30,W=f.debounceSearch),"enableReverse"in f&&t(5,h=f.enableReverse),"errorMessage"in f&&t(6,M=f.errorMessage),"filter"in f&&t(31,A=f.filter),"flyTo"in f&&t(32,E=f.flyTo),"fuzzyMatch"in f&&t(33,P=f.fuzzyMatch),"language"in f&&t(34,D=f.language),"limit"in f&&t(35,O=f.limit),"mapController"in f&&t(36,g=f.mapController),"minLength"in f&&t(37,b=f.minLength),"noResultsMessage"in f&&t(7,H=f.noResultsMessage),"placeholder"in f&&t(8,J=f.placeholder),"proximity"in f&&t(38,G=f.proximity),"reverseActive"in f&&t(0,_=f.reverseActive),"reverseButtonTitle"in f&&t(9,ye=f.reverseButtonTitle),"searchValue"in f&&t(1,y=f.searchValue),"pickedResultStyle"in f&&t(39,j=f.pickedResultStyle),"showPlaceType"in f&&t(10,re=f.showPlaceType),"showResultsWhileTyping"in f&&t(40,de=f.showResultsWhileTyping),"selectFirst"in f&&t(11,k=f.selectFirst),"flyToSelected"in f&&t(41,oe=f.flyToSelected),"markerOnSelected"in f&&t(42,ae=f.markerOnSelected),"types"in f&&t(43,ie=f.types),"exhaustiveReverseGeocoding"in f&&t(44,De=f.exhaustiveReverseGeocoding),"excludeTypes"in f&&t(45,Ee=f.excludeTypes),"zoom"in f&&t(46,Ae=f.zoom),"apiUrl"in f&&t(47,qe=f.apiUrl),"fetchParameters"in f&&t(48,Ge=f.fetchParameters),"iconsBaseUrl"in f&&t(12,tt=f.iconsBaseUrl),"adjustUrlQuery"in f&&t(49,Ke=f.adjustUrlQuery),"$$scope"in f&&t(60,r=f.$$scope)},l.$$.update=()=>{if(l.$$.dirty[0]&32&&t(0,_=h==="always"),l.$$.dirty[0]&268443648&&setTimeout(()=>{t(16,He=pe),w&&!pe&&t(1,y="")}),l.$$.dirty[0]&16386|l.$$.dirty[1]&64&&y.length<b&&(t(56,S=void 0),t(14,B=void 0),t(18,ue=void 0),t(55,K=B)),l.$$.dirty[1]&33554688&&j!=="marker-only"&&S&&!S.address&&S.geometry.type==="Point"&&S.place_type[0]!=="reverse"&&Je(S.id,{byId:!0}).catch(f=>t(18,ue=f)),l.$$.dirty[1]&100663330&&(g&&S&&S.id!==Ne&&E&&(!S.bbox||S.bbox[0]===S.bbox[2]&&S.bbox[1]===S.bbox[3]?g.flyTo(S.center,Se(S)):g.fitBounds(gt(S.bbox),50,Se(S)),t(14,B=void 0),t(55,K=void 0),t(15,F=-1)),t(57,Ne=S==null?void 0:S.id)),l.$$.dirty[0]&18432&&k&&B!=null&&B.length&&t(15,F=0),l.$$.dirty[0]&2&&t(15,F=-1),l.$$.dirty[0]&16384|l.$$.dirty[1]&16777216&&K!==B&&t(55,K=void 0),l.$$.dirty[0]&81921|l.$$.dirty[1]&16777248&&g&&g.setEventHandler(f=>{switch(f.type){case"mapClick":_&&At(f.coordinates);break;case"markerClick":{const q=B==null?void 0:B.find(Q=>Q.id===f.id);q&&Xe(q)}break;case"markerMouseEnter":K&&t(15,F=He?(B==null?void 0:B.findIndex(q=>q.id===f.id))??-1:-1);break;case"markerMouseLeave":K&&t(15,F=-1);break}}),l.$$.dirty[0]&49152&&t(58,i=B==null?void 0:B[F]),l.$$.dirty[1]&134218786&&g&&i&&E&&oe&&g.flyTo(i.center,Se(i)),l.$$.dirty[1]&256&&t(59,n=j==="full-geometry-including-polygon-center-marker"),l.$$.dirty[1]&268437536&&(ae||g==null||g.setFeatures(void 0,void 0,n)),l.$$.dirty[1]&419432480&&g&&ae&&!K&&(g.setFeatures(i?[i]:void 0,void 0,n),g.setSelectedMarker(i?0:-1)),l.$$.dirty[1]&318767136&&g&&g.setFeatures(K,S,n),l.$$.dirty[0]&32768|l.$$.dirty[1]&16777248&&K&&g&&g.setSelectedMarker(F),l.$$.dirty[0]&2|l.$$.dirty[1]&32&&g){const f=Qe(y);g.setReverseMarker(f?[f.decimalLongitude,f.decimalLatitude]:void 0)}l.$$.dirty[1]&134217728&&_e("select",{feature:i}),l.$$.dirty[1]&33554432&&_e("pick",{feature:S}),l.$$.dirty[0]&81920&&_e("optionsvisibilitychange",{optionsVisible:He&&!!B}),l.$$.dirty[0]&16384&&_e("featureslisted",{features:B}),l.$$.dirty[1]&16777216&&_e("featuresmarked",{features:K}),l.$$.dirty[0]&1&&_e("reversetoggle",{reverse:_}),l.$$.dirty[0]&2&&_e("querychange",{query:y}),l.$$.dirty[0]&1|l.$$.dirty[1]&32&&g&&g.indicateReverse(_)},[_,y,c,m,R,h,M,H,J,ye,re,k,tt,pe,B,F,He,fe,ue,ke,Ut,it,Ot,Ye,Xe,o,u,a,w,U,W,A,E,P,D,O,g,b,G,j,de,oe,ae,ie,De,Ee,Ae,qe,Ge,Ke,It,Pt,nt,Bt,Rt,K,S,Ne,i,n,r,s,Ht,jt,Vt,Wt,Ft,Zt,Dt,qt,Gt,Kt,Nt,Qt,Jt]}class Gn extends te{constructor(e){super(),ne(this,e,qn,Dn,le,{ZOOM_DEFAULTS:25,class:2,apiKey:26,bbox:27,clearButtonTitle:3,clearOnBlur:28,collapsed:4,country:29,debounceSearch:30,enableReverse:5,errorMessage:6,filter:31,flyTo:32,fuzzyMatch:33,language:34,limit:35,mapController:36,minLength:37,noResultsMessage:7,placeholder:8,proximity:38,reverseActive:0,reverseButtonTitle:9,searchValue:1,pickedResultStyle:39,showPlaceType:10,showResultsWhileTyping:40,selectFirst:11,flyToSelected:41,markerOnSelected:42,types:43,exhaustiveReverseGeocoding:44,excludeTypes:45,zoom:46,apiUrl:47,fetchParameters:48,iconsBaseUrl:12,adjustUrlQuery:49,focus:50,blur:51,setQuery:52,clearList:53,clearMap:54},null,[-1,-1,-1])}get ZOOM_DEFAULTS(){return this.$$.ctx[25]}get focus(){return this.$$.ctx[50]}get blur(){return this.$$.ctx[51]}get setQuery(){return this.$$.ctx[52]}get clearList(){return this.$$.ctx[53]}get clearMap(){return this.$$.ctx[54]}}function kt(l){let e,t,n,i;return t=new Gn({props:{mapController:l[1],apiKey:{}.VITE_MAPTILER_API_KEY,country:"gb",proximity:[{type:"map-center"}]}}),{c(){e=z("div"),X(t.$$.fragment),d(e,"class",n=Ve(l[0])+" svelte-189syb7")},m(s,r){v(s,e,r),x(t,e,null),i=!0},p(s,r){const o={};r&2&&(o.mapController=s[1]),t.$set(o),(!i||r&1&&n!==(n=Ve(s[0])+" svelte-189syb7"))&&d(e,"class",n)},i(s){i||(L(t.$$.fragment,s),i=!0)},o(s){I(t.$$.fragment,s),i=!1},d(s){s&&p(e),$(t)}}}function Kn(l){let e,t,n=l[1]&&kt(l);return{c(){n&&n.c(),e=Ue()},m(i,s){n&&n.m(i,s),v(i,e,s),t=!0},p(i,[s]){i[1]?n?(n.p(i,s),s&2&&L(n,1)):(n=kt(i),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(we(),I(n,1,1,()=>{n=null}),ve())},i(i){t||(L(n),t=!0)},o(i){I(n),t=!1},d(i){i&&p(e),n&&n.d(i)}}}function Nn(l,e,t){let n;Te(l,xt,r=>t(2,n=r));let{position:i="top-left"}=e,s;return $t(()=>{t(1,s=en(n,zt,!0,!0,{duration:1e3},{duration:1e3}))}),l.$$set=r=>{"position"in r&&t(0,i=r.position)},[i,s]}class Ul extends te{constructor(e){super(),ne(this,e,Nn,Kn,le,{position:0})}}function Qn(l){let e;const t=l[16].default,n=Ce(t,l,l[24],null);return{c(){n&&n.c()},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&16777216)&&Ie(n,t,i,i[24],e?Be(t,i[24],s,null):Pe(i[24]),null)},i(i){e||(L(n,i),e=!0)},o(i){I(n,i),e=!1},d(i){n&&n.d(i)}}}function Jn(l){let e,t,n;function i(r){l[17](r)}let s={id:l[1],type:"circle",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[Qn]},$$scope:{ctx:l}};return l[0]!==void 0&&(s.hovered=l[0]),e=new rn({props:s}),Re.push(()=>We(e,"hovered",i)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){X(e.$$.fragment)},m(r,o){x(e,r,o),n=!0},p(r,[o]){const c={};o&2&&(c.id=r[1]),o&4&&(c.source=r[2]),o&8&&(c.sourceLayer=r[3]),o&16&&(c.beforeId=r[4]),o&32&&(c.beforeLayerType=r[5]),o&64&&(c.paint=r[6]),o&128&&(c.layout=r[7]),o&256&&(c.filter=r[8]),o&512&&(c.applyToClusters=r[9]),o&1024&&(c.minzoom=r[10]),o&2048&&(c.maxzoom=r[11]),o&4096&&(c.hoverCursor=r[12]),o&8192&&(c.manageHoverState=r[13]),o&16384&&(c.eventsIfTopMost=r[14]),o&32768&&(c.interactive=r[15]),o&16777216&&(c.$$scope={dirty:o,ctx:r}),!t&&o&1&&(t=!0,c.hovered=r[0],Fe(()=>t=!1)),e.$set(c)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function Yn(l,e,t){let{$$slots:n={},$$scope:i}=e,{id:s=on("circle")}=e,{source:r=void 0}=e,{sourceLayer:o=void 0}=e,{beforeId:c=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:a}=e,{layout:m=void 0}=e,{filter:w=void 0}=e,{applyToClusters:R=void 0}=e,{minzoom:U=void 0}=e,{maxzoom:W=void 0}=e,{hoverCursor:h=void 0}=e,{manageHoverState:M=!1}=e,{hovered:A=null}=e,{eventsIfTopMost:E=!1}=e,{interactive:P=!0}=e;function D(_){A=_,t(0,A)}function O(_){he.call(this,l,_)}function g(_){he.call(this,l,_)}function b(_){he.call(this,l,_)}function H(_){he.call(this,l,_)}function J(_){he.call(this,l,_)}function G(_){he.call(this,l,_)}return l.$$set=_=>{"id"in _&&t(1,s=_.id),"source"in _&&t(2,r=_.source),"sourceLayer"in _&&t(3,o=_.sourceLayer),"beforeId"in _&&t(4,c=_.beforeId),"beforeLayerType"in _&&t(5,u=_.beforeLayerType),"paint"in _&&t(6,a=_.paint),"layout"in _&&t(7,m=_.layout),"filter"in _&&t(8,w=_.filter),"applyToClusters"in _&&t(9,R=_.applyToClusters),"minzoom"in _&&t(10,U=_.minzoom),"maxzoom"in _&&t(11,W=_.maxzoom),"hoverCursor"in _&&t(12,h=_.hoverCursor),"manageHoverState"in _&&t(13,M=_.manageHoverState),"hovered"in _&&t(0,A=_.hovered),"eventsIfTopMost"in _&&t(14,E=_.eventsIfTopMost),"interactive"in _&&t(15,P=_.interactive),"$$scope"in _&&t(24,i=_.$$scope)},[A,s,r,o,c,u,a,m,w,R,U,W,h,M,E,P,n,D,O,g,b,H,J,G,i]}class El extends te{constructor(e){super(),ne(this,e,Yn,Jn,le,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}const Xn=l=>({marker:l&8}),wt=l=>({marker:l[3]});function xn(l){let e,t,n,i,s,r,o;const c=l[19].default,u=Ce(c,l,l[18],wt);return{c(){e=z("div"),u&&u.c(),d(e,"tabindex",t=l[1]?0:void 0),d(e,"role",n=l[1]?"button":void 0),ot(e,"z-index",l[2])},m(a,m){v(a,e,m),u&&u.m(e,null),s=!0,r||(o=[at(l[7].call(null,e)),at(i=$n.call(null,e,l[0])),Z(e,"click",et(l[20])),Z(e,"dblclick",et(l[21])),Z(e,"contextmenu",et(pt(l[22]))),Z(e,"mouseenter",l[23]),Z(e,"mouseleave",l[24]),Z(e,"mousemove",l[25]),Z(e,"keydown",l[8])],r=!0)},p(a,[m]){u&&u.p&&(!s||m&262152)&&Ie(u,c,a,a[18],s?Be(c,a[18],m,Xn):Pe(a[18]),wt),(!s||m&2&&t!==(t=a[1]?0:void 0))&&d(e,"tabindex",t),(!s||m&2&&n!==(n=a[1]?"button":void 0))&&d(e,"role",n),i&&tn(i.update)&&m&1&&i.update.call(null,a[0]),m&4&&ot(e,"z-index",a[2])},i(a){s||(L(u,a),s=!0)},o(a){I(u,a),s=!1},d(a){a&&p(e),u&&u.d(a),r=!1,Ze(o)}}}function $n(l,e){const t=l.className;function n(i){i?l.className=`${t} ${i}`:l.className=t}return n(e),{update:n}}function el(l,e,t){let n,i,s,{$$slots:r={},$$scope:o}=e,{marker:c=void 0}=e,{lngLat:u}=e,{class:a=void 0}=e,{interactive:m=!0}=e,{asButton:w=!1}=e,{draggable:R=!1}=e,{feature:U=null}=e,{offset:W=void 0}=e,{zIndex:h=void 0}=e,{rotation:M=0}=e,{opacity:A=1}=e;const E=Lt(),{map:P,layerEvent:D,self:O,markerClickManager:g}=an();Te(l,P,k=>t(27,s=k)),Te(l,D,k=>t(26,n=k)),Te(l,O,k=>t(3,i=k));function b(k){ft(O,i=new zt.Marker({element:k,rotation:M,draggable:R,offset:W,opacity:A.toString()}).setLngLat(u).addTo(s),i),t(11,c=i);const oe=()=>G("dragstart"),ae=()=>{H(),G("drag")},ie=()=>{H(),G("dragend")};return R&&(i.on("dragstart",oe),i.on("drag",ae),i.on("dragend",ie)),{destroy(){R&&(i==null||i.off("dragstart",oe),i==null||i.off("drag",ae),i==null||i.off("dragend",ie)),t(11,c=void 0),i==null||i.remove()}}}function H(){let k=i==null?void 0:i.getLngLat();k&&(Array.isArray(u)?t(10,u=[k.lng,k.lat]):u&&"lon"in u?t(10,u={lon:k.lng,lat:k.lat}):t(10,u=k))}function J(k){k.key===" "&&(k.preventDefault(),k.stopPropagation(),G("click"))}function G(k){if(!m)return;let oe=i==null?void 0:i.getLngLat();if(!oe)return;const ae=[oe.lng,oe.lat];let ie={map:s,marker:i,lngLat:ae,features:[{type:"Feature",properties:(U==null?void 0:U.properties)??{},geometry:{type:"Point",coordinates:ae}}]};(k==="click"||k==="contextmenu")&&g.handleClick(ie),ft(D,n={...ie,layerType:"marker",type:k},n),E(k,ie)}const _=()=>G("click"),ye=()=>G("dblclick"),y=()=>{G("contextmenu")},j=()=>{G("mouseenter")},re=()=>{G("mouseleave")},de=()=>G("mousemove");return l.$$set=k=>{"marker"in k&&t(11,c=k.marker),"lngLat"in k&&t(10,u=k.lngLat),"class"in k&&t(0,a=k.class),"interactive"in k&&t(12,m=k.interactive),"asButton"in k&&t(1,w=k.asButton),"draggable"in k&&t(13,R=k.draggable),"feature"in k&&t(14,U=k.feature),"offset"in k&&t(15,W=k.offset),"zIndex"in k&&t(2,h=k.zIndex),"rotation"in k&&t(16,M=k.rotation),"opacity"in k&&t(17,A=k.opacity),"$$scope"in k&&t(18,o=k.$$scope)},l.$$.update=()=>{l.$$.dirty&1032&&(i==null||i.setLngLat(u)),l.$$.dirty&32776&&(i==null||i.setOffset(W??[0,0])),l.$$.dirty&65544&&(i==null||i.setRotation(M)),l.$$.dirty&131080&&(i==null||i.setOpacity(A.toString()))},[a,w,h,i,P,D,O,b,J,G,u,c,m,R,U,W,M,A,o,r,_,ye,y,j,re,de]}class Al extends te{constructor(e){super(),ne(this,e,el,xn,le,{marker:11,lngLat:10,class:0,interactive:12,asButton:1,draggable:13,feature:14,offset:15,zIndex:2,rotation:16,opacity:17})}}const tl="/atip/assets/help-d011708a.svg";function nl(l){let e,t;const n=l[1].default,i=Ce(n,l,l[4],null);return{c(){e=z("div"),i&&i.c(),d(e,"class","govuk-prose")},m(s,r){v(s,e,r),i&&i.m(e,null),t=!0},p(s,r){i&&i.p&&(!t||r&16)&&Ie(i,n,s,s[4],t?Be(n,s[4],r,null):Pe(s[4]),null)},i(s){t||(L(i,s),t=!0)},o(s){I(i,s),t=!1},d(s){s&&p(e),i&&i.d(s)}}}function ll(l){let e,t,n,i,s,r,o;function c(a){l[3](a)}let u={title:"Help",$$slots:{default:[nl]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.open=l[0]),n=new ln({props:u}),Re.push(()=>We(n,"open",c)),{c(){e=z("button"),e.innerHTML=`<img src="${tl}" title="Help" alt="Help"/>`,t=Y(),X(n.$$.fragment),d(e,"class","svelte-gb6dzm")},m(a,m){v(a,e,m),v(a,t,m),x(n,a,m),s=!0,r||(o=Z(e,"click",l[2]),r=!0)},p(a,[m]){const w={};m&16&&(w.$$scope={dirty:m,ctx:a}),!i&&m&1&&(i=!0,w.open=a[0],Fe(()=>i=!1)),n.$set(w)},i(a){s||(L(n.$$.fragment,a),s=!0)},o(a){I(n.$$.fragment,a),s=!1},d(a){a&&(p(e),p(t)),$(n,a),r=!1,o()}}}function il(l,e,t){let{$$slots:n={},$$scope:i}=e,s=!1;const r=()=>t(0,s=!0);function o(c){s=c,t(0,s)}return l.$$set=c=>{"$$scope"in c&&t(4,i=c.$$scope)},[s,n,r,o,i]}class Ol extends te{constructor(e){super(),ne(this,e,il,ll,le,{})}}function sl(l){let e;return{c(){e=z("ul"),e.innerHTML=`<li><b>Click</b>
    on the map to open a new tab with a 3rd-party imagery provider</li> <li>Press <b>Escape</b>
    to exit this mode</li> <li>Cursor by <a href="https://icon-icons.com/icon/screenshot-cursor-camera/100181" target="_blank" rel="noreferrer">Luc Chaissac</a></li>`},m(t,n){v(t,e,n)},p:V,i:V,o:V,d(t){t&&p(e)}}}class rl extends te{constructor(e){super(),ne(this,e,null,sl,le,{})}}const ol="/atip/assets/camera_cursor-824d29b6.svg",{window:al}=fn;function vt(l){let e,t,n,i;const s=[ul,fl],r=[];function o(c,u){return c[0]?0:1}return e=o(l),t=r[e]=s[e](l),{c(){t.c(),n=Ue()},m(c,u){r[e].m(c,u),v(c,n,u),i=!0},p(c,u){let a=e;e=o(c),e===a?r[e].p(c,u):(we(),I(r[a],1,1,()=>{r[a]=null}),ve(),t=r[e],t?t.p(c,u):(t=r[e]=s[e](c),t.c()),L(t,1),t.m(n.parentNode,n))},i(c){i||(L(t),i=!0)},o(c){I(t),i=!1},d(c){c&&p(n),r[e].d(c)}}}function fl(l){let e,t;return e=new St({props:{$$slots:{default:[cl]},$$scope:{ctx:l}}}),e.$on("click",l[8]),{c(){X(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const s={};i&8192&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function ul(l){let e,t,n,i,s,r,o;e=new St({props:{$$slots:{default:[dl]},$$scope:{ctx:l}}}),e.$on("click",l[6]);function c(a){l[7](a)}let u={label:"Source",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return l[2].streetViewImagery!==void 0&&(u.value=l[2].streetViewImagery),n=new dn({props:u}),Re.push(()=>We(n,"value",c)),r=new _n({props:{label:"Help",$$slots:{default:[ml]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment),t=Y(),X(n.$$.fragment),s=Y(),X(r.$$.fragment)},m(a,m){x(e,a,m),v(a,t,m),x(n,a,m),v(a,s,m),x(r,a,m),o=!0},p(a,m){const w={};m&8192&&(w.$$scope={dirty:m,ctx:a}),e.$set(w);const R={};!i&&m&4&&(i=!0,R.value=a[2].streetViewImagery,Fe(()=>i=!1)),n.$set(R);const U={};m&8192&&(U.$$scope={dirty:m,ctx:a}),r.$set(U)},i(a){o||(L(e.$$.fragment,a),L(n.$$.fragment,a),L(r.$$.fragment,a),o=!0)},o(a){I(e.$$.fragment,a),I(n.$$.fragment,a),I(r.$$.fragment,a),o=!1},d(a){a&&(p(t),p(s)),$(e,a),$(n,a),$(r,a)}}}function cl(l){let e;return{c(){e=ge("Enable Street View")},m(t,n){v(t,e,n)},d(t){t&&p(e)}}}function dl(l){let e;return{c(){e=ge("Disable Street View")},m(t,n){v(t,e,n)},d(t){t&&p(e)}}}function ml(l){let e,t;return e=new rl({}),{c(){X(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function gl(l){let e,t,n,i,s=l[1]&&vt(l);return{c(){s&&s.c(),e=Ue()},m(r,o){s&&s.m(r,o),v(r,e,o),t=!0,n||(i=Z(al,"keydown",l[3]),n=!0)},p(r,[o]){r[1]?s?(s.p(r,o),o&2&&L(s,1)):(s=vt(r),s.c(),L(s,1),s.m(e.parentNode,e)):s&&(we(),I(s,1,1,()=>{s=null}),ve())},i(r){t||(L(s),t=!0)},o(r){I(s),t=!1},d(r){r&&p(e),s&&s.d(r),n=!1,i()}}}function _l(l,e,t){let n;Te(l,ut,h=>t(2,n=h));let{cfg:i}=e,{map:s}=e,{enabled:r}=e,{showControls:o=!0}=e,c=[];function u(){if(s){s.on("click",m),s.getCanvas().style.cursor=`url(${ol}), auto`;for(let h of i.getStreetViewRoadLayerNames(s))c.push([h,s.getPaintProperty(h,"line-color")]),s.setPaintProperty(h,"line-color","cyan")}}function a(){if(s){s.off("click",m),s.getCanvas().style.cursor="inherit";for(let[h,M]of c)s.setPaintProperty(h,"line-color",M);c=[]}}Tt(a);function m(h){if(!r)return;let M=h.lngLat.lng,A=h.lngLat.lat;n.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${A},${M}&cbp=11,0,0,0,0`,"_blank"):n.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${A}~${M}&style=x`,"_blank")}function w(h){r&&h.key=="Escape"&&(h.stopPropagation(),t(0,r=!1))}const R=()=>t(0,r=!1);function U(h){l.$$.not_equal(n.streetViewImagery,h)&&(n.streetViewImagery=h,ut.set(n))}const W=()=>t(0,r=!0);return l.$$set=h=>{"cfg"in h&&t(4,i=h.cfg),"map"in h&&t(5,s=h.map),"enabled"in h&&t(0,r=h.enabled),"showControls"in h&&t(1,o=h.showControls)},l.$$.update=()=>{l.$$.dirty&1&&(r?u():a())},[r,o,n,w,i,s,R,U,W]}class Hl extends te{constructor(e){super(),ne(this,e,_l,gl,le,{cfg:4,map:5,enabled:0,showControls:1})}}const hl="/atip/assets/warning-81bba3f6.svg";function bl(l){let e,t;return{c(){e=z("img"),ee(e.src,t=hl)||d(e,"src",t),d(e,"title",l[0]),d(e,"alt",l[0])},m(n,i){v(n,e,i)},p(n,[i]){i&1&&d(e,"title",n[0]),i&1&&d(e,"alt",n[0])},i:V,o:V,d(n){n&&p(e)}}}function yl(l,e,t){let{text:n}=e;return l.$$set=i=>{"text"in i&&t(0,n=i.text)},[n]}class jl extends te{constructor(e){super(),ne(this,e,yl,bl,le,{text:0})}}export{Rl as B,El as C,Ul as G,Ol as H,Al as M,Hl as S,jl as W,Sl as a,Pl as b,Ml as c,Bl as d,Cl as e,Il as f,rl as g,_n as h,zl as i};
