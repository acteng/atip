import{K as Qt,e as lt,B as Jt,C as Xt,M as Yt,S as kt,R as xt}from"./files-e70a050d.js";import{S as x,i as $,s as ee,G as Ce,e as I,l as me,a as N,d,f as p,g as M,z as pe,H as Se,I as Me,J as Ie,t as T,h as B,j as C,r as Re,u as je,c as Q,D as Ue,m as J,w as Ze,k as X,x as ze,aj as it,at as de,q as D,af as he,a3 as G,a4 as Fe,a5 as le,ag as Y,b as Te,ao as Ve,a2 as ot,au as $t,A as be,v as ke,av as wt,E as vt,aw as en,ak as tn,o as nn,ax as ln,ap as Lt,ay as rt,az as xe,a8 as on,F as st,a6 as at}from"./stores-0d326517.js";import{S as rn}from"./colors-79782d72.js";import{k as sn,e as Tt,g as zt,l as an,m as fn}from"./MapLibreMap-5a61915c.js";function un(l){let e,t,n,i,o,r,s;const u=l[3].default,f=Ce(u,l,l[2],null);return{c(){e=I("details"),t=I("summary"),n=I("span"),i=me(l[0]),o=N(),r=I("div"),f&&f.c(),d(n,"class","govuk-details__summary-text"),d(t,"class","govuk-details__summary"),d(r,"class","govuk-details__text"),e.open=l[1],d(e,"class","govuk-details"),d(e,"data-module","govuk-details")},m(a,g){p(a,e,g),M(e,t),M(t,n),M(n,i),M(e,o),M(e,r),f&&f.m(r,null),s=!0},p(a,[g]){(!s||g&1)&&pe(i,a[0]),f&&f.p&&(!s||g&4)&&Se(f,u,a,a[2],s?Ie(u,a[2],g,null):Me(a[2]),null),(!s||g&2)&&(e.open=a[1])},i(a){s||(T(f,a),s=!0)},o(a){B(f,a),s=!1},d(a){a&&C(e),f&&f.d(a)}}}function cn(l,e,t){let{$$slots:n={},$$scope:i}=e,{label:o}=e,{open:r=!1}=e;return l.$$set=s=>{"label"in s&&t(0,o=s.label),"open"in s&&t(1,r=s.open),"$$scope"in s&&t(2,i=s.$$scope)},[o,r,i,n]}class dn extends x{constructor(e){super(),$(this,e,cn,un,ee,{label:0,open:1})}}const Tl=["==",["geometry-type"],"Polygon"],zl=["==",["geometry-type"],"LineString"],pl=["==",["geometry-type"],"Point"];function Cl(){return{type:"FeatureCollection",features:[]}}function Sl(l,e,t){let n=["match",l];for(let[i,o]of Object.entries(e))n.push(i),n.push(o);return n.push(t),n}function Ml(l){return Qt(l)}function Il(l){var t,n;let e={type:"FeatureCollection",features:[]};for(let i of l.features)if(e.features.push(i),i.geometry.type=="LineString"&&!((t=i.properties)!=null&&t.hide_while_editing))for(let o of[i.geometry.coordinates[0],i.geometry.coordinates[i.geometry.coordinates.length-1]])e.features.push({type:"Feature",properties:{endpoint:!0,scheme_reference:(n=i.properties)==null?void 0:n.scheme_reference},geometry:{type:"Point",coordinates:o}});return e}function ft(l){let e;return{c(){e=I("p"),e.innerHTML=`Google <a href="https://cloud.google.com/maps-platform/terms/" target="_blank">Terms of Use</a>
    and
    <a href="https://www.google.com/policies/privacy/" target="_blank">Privacy Policy</a>`},m(t,n){p(t,e,n)},d(t){t&&C(e)}}}function mn(l){let e,t,n,i,o;function r(f){l[2](f)}let s={label:"Basemap",choices:sn(),disabled:l[0]};l[1]!==void 0&&(s.value=l[1]),e=new rn({props:s}),Re.push(()=>je(e,"value",r));let u=l[1]=="google"&&ft();return{c(){Q(e.$$.fragment),n=N(),u&&u.c(),i=Ue()},m(f,a){J(e,f,a),p(f,n,a),u&&u.m(f,a),p(f,i,a),o=!0},p(f,[a]){const g={};a&1&&(g.disabled=f[0]),!t&&a&2&&(t=!0,g.value=f[1],Ze(()=>t=!1)),e.$set(g),f[1]=="google"?u||(u=ft(),u.c(),u.m(i.parentNode,i)):u&&(u.d(1),u=null)},i(f){o||(T(e.$$.fragment,f),o=!0)},o(f){B(e.$$.fragment,f),o=!1},d(f){f&&(C(n),C(i)),X(e,f),u&&u.d(f)}}}function gn(l,e,t){let n;ze(l,it,r=>t(1,n=r));let{disabled:i=!1}=e;function o(r){n=r,it.set(n)}return l.$$set=r=>{"disabled"in r&&t(0,i=r.disabled)},[i,n,o]}class Bl extends x{constructor(e){super(),$(this,e,gn,mn,ee,{disabled:0})}}function _n(l){let e,t;return{c(){e=de("svg"),t=de("path"),d(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),d(e,"viewBox","0 0 14 14"),d(e,"width","13"),d(e,"height","13"),d(e,"class","svelte-en2qvf")},m(n,i){p(n,e,i),M(e,t)},p:D,i:D,o:D,d(n){n&&C(e)}}}class pt extends x{constructor(e){super(),$(this,e,null,_n,ee,{})}}function hn(l){let e,t;return{c(){e=de("svg"),t=de("path"),d(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),d(e,"viewBox","0 0 30 30"),d(e,"fill","none"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"class","svelte-d2loi5")},m(n,i){p(n,e,i),M(e,t)},p:D,i:D,o:D,d(n){n&&C(e)}}}class Ct extends x{constructor(e){super(),$(this,e,null,hn,ee,{})}}function yn(l){let e,t;return{c(){e=I("img"),Y(e.src,t=l[3]+"area.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){p(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"area.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&C(e)}}}function bn(l){let e,t;return{c(){e=I("img"),Y(e.src,t=l[3]+"reverse.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){p(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"reverse.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&C(e)}}}function kn(l){let e,t;return{c(){e=I("img"),Y(e.src,t=l[3]+"poi.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){p(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"poi.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&C(e)}}}function wn(l){let e,t;return{c(){e=I("img"),Y(e.src,t=l[3]+"postal_code.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){p(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"postal_code.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&C(e)}}}function vn(l){let e,t;return{c(){e=I("img"),Y(e.src,t=l[3]+"street.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){p(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"street.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&C(e)}}}function Ln(l){let e,t;return{c(){e=I("img"),Y(e.src,t=l[3]+"road.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){p(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"road.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&C(e)}}}function Tn(l){let e,t;return{c(){e=I("img"),Y(e.src,t=l[3]+"housenumber.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){p(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"housenumber.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&C(e)}}}function zn(l){let e,t,n,i;return{c(){e=I("img"),Y(e.src,t=l[5])||d(e,"src",t),d(e,"alt",l[4]),d(e,"class","svelte-ltkwvy")},m(o,r){p(o,e,r),n||(i=G(e,"error",l[14]),n=!0)},p(o,r){r&32&&!Y(e.src,t=o[5])&&d(e,"src",t),r&16&&d(e,"alt",o[4])},d(o){o&&C(e),n=!1,i()}}}function ut(l){let e,t;return{c(){e=I("span"),t=me(l[6]),d(e,"class","secondary svelte-ltkwvy")},m(n,i){p(n,e,i),M(e,t)},p(n,i){i&64&&pe(t,n[6])},d(n){n&&C(e)}}}function pn(l){var A,V;let e,t,n,i,o,r,s,u,f=(l[7]?l[0].place_name:l[0].place_name.replace(/,.*/,""))+"",a,g,k=l[2]==="always"||l[2]&&!l[0].address&&((A=l[0].properties)==null?void 0:A.kind)!=="road"&&((V=l[0].properties)==null?void 0:V.kind)!=="road_relation"&&!l[0].id.startsWith("address.")&&!l[0].id.startsWith("postal_code.")&&(!l[0].id.startsWith("poi.")||!l[5])&&!l[7],U,W,Z=(l[7]?"":l[0].place_name.replace(/[^,]*,?\s*/,""))+"",h,z,j;function _(v,w){var ne,m;return w&1&&(t=null),w&1&&(n=null),w&1&&(i=null),v[5]?zn:v[0].address?Tn:((ne=v[0].properties)==null?void 0:ne.kind)==="road"||((m=v[0].properties)==null?void 0:m.kind)==="road_relation"?Ln:(t==null&&(t=!!v[0].id.startsWith("address.")),t?vn:(n==null&&(n=!!v[0].id.startsWith("postal_code.")),n?wn:(i==null&&(i=!!v[0].id.startsWith("poi.")),i?kn:v[7]?bn:yn)))}let S=_(l,-1),y=S(l),H=k&&ut(l);return{c(){e=I("li"),y.c(),o=N(),r=I("span"),s=I("span"),u=I("span"),a=me(f),g=N(),H&&H.c(),U=N(),W=I("span"),h=me(Z),d(u,"class","primary svelte-ltkwvy"),d(s,"class","svelte-ltkwvy"),d(W,"class","line2 svelte-ltkwvy"),d(r,"class","texts svelte-ltkwvy"),d(e,"tabindex","0"),d(e,"data-selected",l[1]),d(e,"class","svelte-ltkwvy"),he(e,"selected",l[1])},m(v,w){p(v,e,w),y.m(e,null),M(e,o),M(e,r),M(r,s),M(s,u),M(u,a),M(s,g),H&&H.m(s,null),M(r,U),M(r,W),M(W,h),z||(j=[G(e,"mouseenter",l[12]),G(e,"focus",l[13])],z=!0)},p(v,[w]){var ne,m;S===(S=_(v,w))&&y?y.p(v,w):(y.d(1),y=S(v),y&&(y.c(),y.m(e,o))),w&1&&f!==(f=(v[7]?v[0].place_name:v[0].place_name.replace(/,.*/,""))+"")&&pe(a,f),w&37&&(k=v[2]==="always"||v[2]&&!v[0].address&&((ne=v[0].properties)==null?void 0:ne.kind)!=="road"&&((m=v[0].properties)==null?void 0:m.kind)!=="road_relation"&&!v[0].id.startsWith("address.")&&!v[0].id.startsWith("postal_code.")&&(!v[0].id.startsWith("poi.")||!v[5])&&!v[7]),k?H?H.p(v,w):(H=ut(v),H.c(),H.m(s,null)):H&&(H.d(1),H=null),w&1&&Z!==(Z=(v[7]?"":v[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&pe(h,Z),w&2&&d(e,"data-selected",v[1]),w&2&&he(e,"selected",v[1])},i:D,o:D,d(v){v&&C(e),y.d(),H&&H.d(),z=!1,Fe(j)}}}function Cn(l,e,t){var _;let n,i,{feature:o}=e,{selected:r=!1}=e,{showPlaceType:s}=e,{missingIconsCache:u}=e,{iconsBaseUrl:f}=e;const a=(_=o.properties)==null?void 0:_.categories;let g,k,U=0,W=o.place_type[0]==="reverse";function Z(S){k&&u.add(k),t(10,U++,U)}function h(S){le.call(this,l,S)}function z(S){le.call(this,l,S)}const j=S=>Z(S.currentTarget);return l.$$set=S=>{"feature"in S&&t(0,o=S.feature),"selected"in S&&t(1,r=S.selected),"showPlaceType"in S&&t(2,s=S.showPlaceType),"missingIconsCache"in S&&t(9,u=S.missingIconsCache),"iconsBaseUrl"in S&&t(3,f=S.iconsBaseUrl)},l.$$.update=()=>{var S,y,H,A;if(l.$$.dirty&3640)do t(11,n--,n),t(4,g=a==null?void 0:a[n]),t(5,k=g?f+g.replace(/ /g,"_")+".svg":void 0);while(n>-1&&(!k||u.has(k)));l.$$.dirty&1&&t(6,i=o.id.startsWith("poi.")?(y=(S=o.properties)==null?void 0:S.categories)==null?void 0:y.join(", "):((A=(H=o.properties)==null?void 0:H.place_type_name)==null?void 0:A[0])??o.place_type[0])},t(11,n=(a==null?void 0:a.length)??0),[o,r,s,f,g,k,i,W,Z,u,U,n,h,z,j]}class Sn extends x{constructor(e){super(),$(this,e,Cn,pn,ee,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function Mn(l){let e;return{c(){e=I("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',d(e,"class","svelte-7cmwmc")},m(t,n){p(t,e,n)},p:D,i:D,o:D,d(t){t&&C(e)}}}class In extends x{constructor(e){super(),$(this,e,null,Mn,ee,{})}}function Bn(l){let e,t;return{c(){e=de("svg"),t=de("path"),d(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),d(e,"viewBox","0 0 60.006 21.412"),d(e,"width","14"),d(e,"height","20"),d(e,"class","svelte-en2qvf")},m(n,i){p(n,e,i),M(e,t)},p:D,i:D,o:D,d(n){n&&C(e)}}}class Pn extends x{constructor(e){super(),$(this,e,null,Bn,ee,{})}}function Rn(l){let e,t,n;return{c(){e=de("svg"),t=de("circle"),n=de("path"),d(t,"cx","4.789"),d(t,"cy","4.787"),d(t,"r","3.85"),Te(t,"stroke-width","1.875"),Te(t,"fill","none"),d(n,"d","M12.063 12.063 7.635 7.635"),Te(n,"stroke-width","1.875"),Te(n,"stroke-linecap","round"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","13"),d(e,"height","13"),d(e,"viewBox","0 0 13 13"),d(e,"class","svelte-1bpbt60")},m(i,o){p(i,e,o),M(e,t),M(e,n)},p:D,i:D,o:D,d(i){i&&C(e)}}}class Un extends x{constructor(e){super(),$(this,e,null,Rn,ee,{})}}function En(l,e,t){const n=e[1],i=e[0],o=n-i;return l===n&&t?l:((l-i)%o+o)%o+i}function ct(l){const e=[...l];return e[2]<e[0]&&(e[2]+=360),e}let Pe;async function Wn(l,e,t){const n=l==null?void 0:l.getCenterAndZoom();for(const i of e??[])if(!(n&&(i.minZoom!=null&&i.minZoom>n[0]||i.maxZoom!=null&&i.maxZoom<n[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(Pe&&i.cachedLocationExpiry&&Pe.time+i.cachedLocationExpiry>Date.now()){if(!Pe.coords)break e;return Pe.coords}let o;try{return o=await new Promise((r,s)=>{t.signal.addEventListener("abort",()=>{s(Error("aborted"))}),navigator.geolocation.getCurrentPosition(u=>{r([u.coords.longitude,u.coords.latitude].map(f=>f.toFixed(6)).join(","))},u=>{s(u)},i)}),o}catch{}finally{i.cachedLocationExpiry&&(Pe={time:Date.now(),coords:o})}if(t.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(n&&i.type==="map-center")return n[1].toFixed(6)+","+n[2].toFixed(6)}}function dt(l,e,t){const n=l.slice();return n[81]=e[t],n[83]=t,n}function mt(l){let e,t;return e=new In({}),{c(){Q(e.$$.fragment)},m(n,i){J(e,n,i),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function gt(l){let e,t,n,i,o;return t=new Pn({}),{c(){e=I("button"),Q(t.$$.fragment),d(e,"type","button"),d(e,"title",l[9]),d(e,"class","svelte-zh3kmv"),he(e,"active",l[0])},m(r,s){p(r,e,s),J(t,e,null),n=!0,i||(o=G(e,"click",l[67]),i=!0)},p(r,s){(!n||s[0]&512)&&d(e,"title",r[9]),(!n||s[0]&1)&&he(e,"active",r[0])},i(r){n||(T(t.$$.fragment,r),n=!0)},o(r){B(t.$$.fragment,r),n=!1},d(r){r&&C(e),X(t),i=!1,o()}}}function Hn(l){let e,t=[],n=new Map,i,o,r,s=lt(l[14]);const u=f=>f[81].id+(f[81].address?","+f[81].address:"");for(let f=0;f<s.length;f+=1){let a=dt(l,s,f),g=u(a);n.set(g,t[f]=_t(g,a))}return{c(){e=I("ul");for(let f=0;f<t.length;f+=1)t[f].c();d(e,"class","svelte-zh3kmv")},m(f,a){p(f,e,a);for(let g=0;g<t.length;g+=1)t[g]&&t[g].m(e,null);i=!0,o||(r=[G(e,"mouseleave",l[71]),G(e,"blur",l[72])],o=!0)},p(f,a){a[0]&17880064&&(s=lt(f[14]),be(),t=Jt(t,a,u,1,f,s,n,e,Xt,_t,null,dt),ke())},i(f){if(!i){for(let a=0;a<s.length;a+=1)T(t[a]);i=!0}},o(f){for(let a=0;a<t.length;a+=1)B(t[a]);i=!1},d(f){f&&C(e);for(let a=0;a<t.length;a+=1)t[a].d();o=!1,Fe(r)}}}function An(l){let e,t,n,i,o,r;return t=new Ct({}),{c(){e=I("div"),Q(t.$$.fragment),n=N(),i=I("div"),o=me(l[7]),d(i,"class","svelte-zh3kmv"),d(e,"class","no-results svelte-zh3kmv")},m(s,u){p(s,e,u),J(t,e,null),M(e,n),M(e,i),M(i,o),r=!0},p(s,u){(!r||u[0]&128)&&pe(o,s[7])},i(s){r||(T(t.$$.fragment,s),r=!0)},o(s){B(t.$$.fragment,s),r=!1},d(s){s&&C(e),X(t)}}}function Vn(l){let e="",t;return{c(){t=me(e)},m(n,i){p(n,t,i)},p:D,i:D,o:D,d(n){n&&C(t)}}}function jn(l){let e,t,n,i,o,r,s,u,f,a,g;return t=new Ct({}),u=new pt({}),{c(){e=I("div"),Q(t.$$.fragment),n=N(),i=I("div"),o=me(l[6]),r=N(),s=I("button"),Q(u.$$.fragment),d(i,"class","svelte-zh3kmv"),d(s,"class","svelte-zh3kmv"),d(e,"class","error svelte-zh3kmv")},m(k,U){p(k,e,U),J(t,e,null),M(e,n),M(e,i),M(i,o),M(e,r),M(e,s),J(u,s,null),f=!0,a||(g=G(s,"click",l[68]),a=!0)},p(k,U){(!f||U[0]&64)&&pe(o,k[6])},i(k){f||(T(t.$$.fragment,k),T(u.$$.fragment,k),f=!0)},o(k){B(t.$$.fragment,k),B(u.$$.fragment,k),f=!1},d(k){k&&C(e),X(t),X(u),a=!1,g()}}}function _t(l,e){let t,n,i;function o(){return e[69](e[83])}function r(){return e[70](e[81])}return n=new Sn({props:{feature:e[81],showPlaceType:e[10],selected:e[15]===e[83],missingIconsCache:e[20],iconsBaseUrl:e[12]}}),n.$on("mouseenter",o),n.$on("focus",r),{key:l,first:null,c(){t=Ue(),Q(n.$$.fragment),this.first=t},m(s,u){p(s,t,u),J(n,s,u),i=!0},p(s,u){e=s;const f={};u[0]&16384&&(f.feature=e[81]),u[0]&1024&&(f.showPlaceType=e[10]),u[0]&49152&&(f.selected=e[15]===e[83]),u[0]&4096&&(f.iconsBaseUrl=e[12]),n.$set(f)},i(s){i||(T(n.$$.fragment,s),i=!0)},o(s){B(n.$$.fragment,s),i=!1},d(s){s&&C(t),X(n,s)}}}function Zn(l){let e,t,n,i,o,r,s,u,f,a,g,k,U,W,Z,h,z,j,_,S,y,H=!1;o=new Un({}),g=new pt({});let A=l[19]&&mt(),V=l[5]===!0&&gt(l);const v=l[59].default,w=Ce(v,l,l[58],null),ne=[jn,Vn,An,Hn],m=[];function ge(L,F){var te,b;return L[18]?0:L[16]?((te=L[14])==null?void 0:te.length)===0?2:L[16]&&((b=L[14])!=null&&b.length)?3:-1:1}return~(h=ge(l))&&(z=m[h]=ne[h](l)),{c(){e=N(),t=I("form"),n=I("div"),i=I("button"),Q(o.$$.fragment),r=N(),s=I("input"),u=N(),f=I("div"),a=I("button"),Q(g.$$.fragment),k=N(),A&&A.c(),U=N(),V&&V.c(),W=N(),w&&w.c(),Z=N(),z&&z.c(),d(i,"class","search-button svelte-zh3kmv"),d(i,"type","button"),d(s,"placeholder",l[8]),d(s,"aria-label",l[8]),d(s,"class","svelte-zh3kmv"),d(a,"type","button"),d(a,"title",l[3]),d(a,"class","svelte-zh3kmv"),d(f,"class","clear-button-container svelte-zh3kmv"),he(f,"displayable",l[1]!==""),d(n,"class","input-group svelte-zh3kmv"),d(t,"tabindex","0"),d(t,"class",j=Ve(l[2])+" svelte-zh3kmv"),he(t,"can-collapse",l[4]&&l[1]==="")},m(L,F){p(L,e,F),p(L,t,F),M(t,n),M(n,i),J(o,i,null),M(n,r),M(n,s),l[61](s),ot(s,l[1]),M(n,u),M(n,f),M(f,a),J(g,a,null),M(f,k),A&&A.m(f,null),M(n,U),V&&V.m(n,null),M(n,W),w&&w.m(n,null),M(t,Z),~h&&m[h].m(t,null),_=!0,S||(y=[G(i,"click",l[60]),G(s,"input",l[62]),G(s,"focus",l[63]),G(s,"blur",l[64]),G(s,"keydown",l[22]),G(s,"input",l[65]),G(a,"click",l[66]),G(t,"submit",$t(l[21]))],S=!0)},p(L,F){(!_||F[0]&256)&&d(s,"placeholder",L[8]),(!_||F[0]&256)&&d(s,"aria-label",L[8]),F[0]&2&&s.value!==L[1]&&ot(s,L[1]),(!_||F[0]&8)&&d(a,"title",L[3]),L[19]?A?F[0]&524288&&T(A,1):(A=mt(),A.c(),T(A,1),A.m(f,null)):A&&(be(),B(A,1,1,()=>{A=null}),ke()),(!_||F[0]&2)&&he(f,"displayable",L[1]!==""),L[5]===!0?V?(V.p(L,F),F[0]&32&&T(V,1)):(V=gt(L),V.c(),T(V,1),V.m(n,W)):V&&(be(),B(V,1,1,()=>{V=null}),ke()),w&&w.p&&(!_||F[1]&134217728)&&Se(w,v,L,L[58],_?Ie(v,L[58],F,null):Me(L[58]),null);let te=h;h=ge(L),h===te?~h&&m[h].p(L,F):(z&&(be(),B(m[te],1,1,()=>{m[te]=null}),ke()),~h?(z=m[h],z?z.p(L,F):(z=m[h]=ne[h](L),z.c()),T(z,1),z.m(t,null)):z=null),(!_||F[0]&4&&j!==(j=Ve(L[2])+" svelte-zh3kmv"))&&d(t,"class",j),(!_||F[0]&22)&&he(t,"can-collapse",L[4]&&L[1]==="")},i(L){_||(T(H),T(o.$$.fragment,L),T(g.$$.fragment,L),T(A),T(V),T(w,L),T(z),_=!0)},o(L){B(H),B(o.$$.fragment,L),B(g.$$.fragment,L),B(A),B(V),B(w,L),B(z),_=!1},d(L){L&&(C(e),C(t)),X(o),l[61](null),X(g),A&&A.d(),V&&V.d(),w&&w.d(L),~h&&m[h].d(),S=!1,Fe(y)}}}function Fn(l,e,t){let n,{$$slots:i={},$$scope:o}=e,{class:r=void 0}=e,{apiKey:s}=e,{bbox:u=void 0}=e,{clearButtonTitle:f="clear"}=e,{clearOnBlur:a=!1}=e,{collapsed:g=!1}=e,{country:k=void 0}=e,{debounceSearch:U=200}=e,{enableReverse:W=!1}=e,{errorMessage:Z="Something went wrong…"}=e,{filter:h=()=>!0}=e,{flyTo:z=!0}=e,{fuzzyMatch:j=!0}=e,{language:_=void 0}=e,{limit:S=void 0}=e,{mapController:y=void 0}=e,{minLength:H=2}=e,{noResultsMessage:A="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:V="Search"}=e,{proximity:v=[{type:"server-geolocation"}]}=e,{reverseActive:w=W==="always"}=e,{reverseButtonTitle:ne="toggle reverse geocoding"}=e,{searchValue:m=""}=e,{showFullGeometry:ge=!0}=e,{showPlaceType:L="ifNeeded"}=e,{showResultsWhileTyping:F=!0}=e,{selectFirst:te=!0}=e,{flyToSelected:b=!1}=e,{markerOnSelected:ae=!0}=e,{types:ie=void 0}=e,{excludeTypes:fe=!1}=e,{zoom:Be=16}=e,{maxZoom:we=18}=e,{apiUrl:De="https://api.maptiler.com/geocoding"}=e,{fetchParameters:Oe={}}=e,{iconsBaseUrl:$e="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.3/icons/"}=e,{adjustUrlQuery:Ge=c=>{}}=e;function St(){ue.focus()}function Mt(){ue.blur()}function et(c,K=!0,oe=!1){t(1,m=c),K?(t(15,O=-1),nt()):(Qe(!oe,oe),setTimeout(()=>{ue.focus(),ue.select()}))}function It(){t(14,R=void 0),t(55,P=void 0),t(15,O=-1)}function Bt(){t(54,q=[]),t(55,P=void 0)}let ve=!1,R,q,P,tt="",ue,O=-1,ce,Ee=[],ye,Le,We,qe;const Pt=new Set,_e=wt();vt(()=>{y&&(y.setEventHandler(void 0),y.indicateReverse(!1),y.setSelectedMarker(-1),y.setMarkers(void 0,void 0))});function nt(c){if(Le&&(clearTimeout(Le),Le=void 0),O>-1&&R)t(55,P=R[O]),t(1,m=P.place_type[0]==="reverse"?P.place_name:P.place_name.replace(/,.*/,"")),t(18,ce=void 0),t(54,q=void 0),t(15,O=-1);else if(m){const K=c||!Ke(m);Ne(m,{exact:!0}).then(()=>{t(54,q=R),t(55,P=void 0),K&&Rt()}).catch(oe=>t(18,ce=oe))}}function Ke(c){try{return en(c,6)}catch{return!1}}async function Ne(c,{byId:K=!1,exact:oe=!1}={}){t(18,ce=void 0),ye==null||ye.abort();const re=new AbortController;t(19,ye=re);try{const E=Ke(c),se=new URLSearchParams;if(_!==void 0&&se.set("language",Array.isArray(_)?_.join(","):_??""),ie&&se.set("types",ie.join(",")),fe&&se.set("excludeTypes",String(fe)),u&&se.set("bbox",u.map(Ae=>Ae.toFixed(6)).join(",")),k&&se.set("country",Array.isArray(k)?k.join(","):k),!K&&!E){const Ae=await Wn(y,v,re);Ae&&se.set("proximity",Ae),(oe||!F)&&se.set("autocomplete","false"),se.set("fuzzyMatch",String(j))}S!==void 0&&(!E||(ie==null?void 0:ie.length)===1)&&se.set("limit",String(S)),se.set("key",s),Ge(se);const He=De+"/"+encodeURIComponent(E?E.decimalLongitude+","+E.decimalLatitude:c)+".json?"+se.toString();if(He===tt){K?(t(14,R=void 0),t(55,P=Ee[0])):t(14,R=Ee);return}tt=He;const Xe=await fetch(He,{signal:re.signal,...Oe});if(!Xe.ok)throw new Error(await Xe.text());const Ye=await Xe.json();_e("response",{url:He,featureCollection:Ye}),K?(t(14,R=void 0),t(55,P=Ye.features[0]),Ee=[P]):(t(14,R=Ye.features.filter(h)),E&&R.unshift({type:"Feature",properties:{},id:"reverse_"+E.decimalLongitude+"_"+E.decimalLatitude,text:E.decimalLatitude+", "+E.decimalLongitude,place_name:E.decimalLatitude+", "+E.decimalLongitude,place_type:["reverse"],center:[E.decimalLongitude,E.decimalLatitude],bbox:[E.decimalLongitude,E.decimalLatitude,E.decimalLongitude,E.decimalLatitude],geometry:{type:"Point",coordinates:[E.decimalLongitude,E.decimalLatitude]}}),Ee=R,E&&ue.focus())}catch(E){if(E&&typeof E=="object"&&"name"in E&&E.name==="AbortError")return;throw E}finally{re===ye&&t(19,ye=void 0)}}function Rt(){var oe;if(!(q!=null&&q.length)||!z)return;const c=[180,90,-180,-90],K=!q.some(re=>!re.matching_text);for(const re of q)if(K||!re.matching_text)for(const E of[0,1,2,3])c[E]=Math[E<2?"min":"max"](c[E],((oe=re.bbox)==null?void 0:oe[E])??re.center[E%2]);y&&q.length>0&&(P&&c[0]===c[2]&&c[1]===c[3]?y.flyTo(P.center,Be):y.fitBounds(ct(c),50,we))}function Ut(c){t(0,w=W==="always"),t(14,R=void 0),t(55,P=void 0),t(15,O=-1),et(c[1].toFixed(6)+", "+En(c[0],[-180,180],!0).toFixed(6),!1,!0)}function Et(c){if(!R)return;let K=c.key==="ArrowDown"?1:c.key==="ArrowUp"?-1:0;K&&(O===(te?0:-1)&&K===-1&&t(15,O=R.length),t(15,O+=K),O>=R.length&&t(15,O=-1),O<0&&te&&t(15,O=0),c.preventDefault())}function Qe(c=!0,K=!1){if(t(18,ce=void 0),F||K){if(Le&&clearTimeout(Le),m.length<H)return;const oe=m;Le=window.setTimeout(()=>{Ne(oe).catch(re=>t(18,ce=re))},c?U:0)}else t(14,R=void 0),t(18,ce=void 0)}function Je(c){t(55,P=c),t(1,m=c.place_name),t(15,O=-1)}const Wt=()=>ue.focus();function Ht(c){Re[c?"unshift":"push"](()=>{ue=c,t(17,ue)})}function At(){m=this.value,t(1,m),t(13,ve),t(27,a)}const Vt=()=>t(13,ve=!0),jt=()=>t(13,ve=!1),Zt=()=>Qe(),Ft=()=>{t(1,m=""),ue.focus()},Dt=()=>t(0,w=!w),Ot=()=>t(18,ce=void 0),Gt=c=>t(15,O=c),qt=c=>Je(c),Kt=()=>{te||t(15,O=-1)},Nt=()=>{};return l.$$set=c=>{"class"in c&&t(2,r=c.class),"apiKey"in c&&t(25,s=c.apiKey),"bbox"in c&&t(26,u=c.bbox),"clearButtonTitle"in c&&t(3,f=c.clearButtonTitle),"clearOnBlur"in c&&t(27,a=c.clearOnBlur),"collapsed"in c&&t(4,g=c.collapsed),"country"in c&&t(28,k=c.country),"debounceSearch"in c&&t(29,U=c.debounceSearch),"enableReverse"in c&&t(5,W=c.enableReverse),"errorMessage"in c&&t(6,Z=c.errorMessage),"filter"in c&&t(30,h=c.filter),"flyTo"in c&&t(31,z=c.flyTo),"fuzzyMatch"in c&&t(32,j=c.fuzzyMatch),"language"in c&&t(33,_=c.language),"limit"in c&&t(34,S=c.limit),"mapController"in c&&t(35,y=c.mapController),"minLength"in c&&t(36,H=c.minLength),"noResultsMessage"in c&&t(7,A=c.noResultsMessage),"placeholder"in c&&t(8,V=c.placeholder),"proximity"in c&&t(37,v=c.proximity),"reverseActive"in c&&t(0,w=c.reverseActive),"reverseButtonTitle"in c&&t(9,ne=c.reverseButtonTitle),"searchValue"in c&&t(1,m=c.searchValue),"showFullGeometry"in c&&t(38,ge=c.showFullGeometry),"showPlaceType"in c&&t(10,L=c.showPlaceType),"showResultsWhileTyping"in c&&t(39,F=c.showResultsWhileTyping),"selectFirst"in c&&t(11,te=c.selectFirst),"flyToSelected"in c&&t(40,b=c.flyToSelected),"markerOnSelected"in c&&t(41,ae=c.markerOnSelected),"types"in c&&t(42,ie=c.types),"excludeTypes"in c&&t(43,fe=c.excludeTypes),"zoom"in c&&t(44,Be=c.zoom),"maxZoom"in c&&t(45,we=c.maxZoom),"apiUrl"in c&&t(46,De=c.apiUrl),"fetchParameters"in c&&t(47,Oe=c.fetchParameters),"iconsBaseUrl"in c&&t(12,$e=c.iconsBaseUrl),"adjustUrlQuery"in c&&t(48,Ge=c.adjustUrlQuery),"$$scope"in c&&t(58,o=c.$$scope)},l.$$.update=()=>{if(l.$$.dirty[0]&134225920&&setTimeout(()=>{t(16,We=ve),a&&!ve&&t(1,m="")}),l.$$.dirty[0]&16386|l.$$.dirty[1]&32&&m.length<H&&(t(55,P=void 0),t(14,R=void 0),t(18,ce=void 0),t(54,q=R)),l.$$.dirty[1]&16777344&&ge&&P&&!P.address&&P.geometry.type==="Point"&&P.place_type[0]!=="reverse"&&Ne(P.id,{byId:!0}).catch(c=>t(18,ce=c)),l.$$.dirty[1]&50356241&&(y&&P&&P.id!==qe&&z&&(!P.bbox||P.bbox[0]===P.bbox[2]&&P.bbox[1]===P.bbox[3]?y.flyTo(P.center,P.id.startsWith("poi.")||P.id.startsWith("address.")?we:Be):y.fitBounds(ct(P.bbox),50,we),t(14,R=void 0),t(54,q=void 0),t(15,O=-1)),t(56,qe=P==null?void 0:P.id)),l.$$.dirty[0]&18432&&te&&R!=null&&R.length&&t(15,O=0),l.$$.dirty[0]&2050&&(te||t(15,O=-1)),l.$$.dirty[0]&16384|l.$$.dirty[1]&8388608&&q!==R&&t(54,q=void 0),l.$$.dirty[0]&81921|l.$$.dirty[1]&8388624&&y&&y.setEventHandler(c=>{switch(c.type){case"mapClick":w&&Ut(c.coordinates);break;case"markerClick":{const K=R==null?void 0:R.find(oe=>oe.id===c.id);K&&Je(K)}break;case"markerMouseEnter":q&&t(15,O=We?(R==null?void 0:R.findIndex(K=>K.id===c.id))??-1:-1);break;case"markerMouseLeave":q&&t(15,O=-1);break}}),l.$$.dirty[0]&49152&&t(57,n=R==null?void 0:R[O]),l.$$.dirty[1]&67133969&&y&&n&&z&&b&&y.flyTo(n.center,n.id.startsWith("poi.")||n.id.startsWith("address.")?we:Be),l.$$.dirty[1]&1040&&(ae||y==null||y.setMarkers(void 0,void 0)),l.$$.dirty[1]&75498512&&y&&ae&&!q&&(y.setMarkers(n?[n]:void 0,void 0),y.setSelectedMarker(n?0:-1)),l.$$.dirty[1]&25165840&&y&&y.setMarkers(q,P),l.$$.dirty[0]&32768|l.$$.dirty[1]&8388624&&q&&y&&y.setSelectedMarker(O),l.$$.dirty[0]&2|l.$$.dirty[1]&16&&y){const c=Ke(m);y.setReverseMarker(c?[c.decimalLongitude,c.decimalLatitude]:void 0)}l.$$.dirty[1]&67108864&&_e("select",n),l.$$.dirty[1]&16777216&&_e("pick",P),l.$$.dirty[0]&81920&&_e("optionsVisibilityChange",We&&!!R),l.$$.dirty[0]&16384&&_e("featuresListed",R),l.$$.dirty[1]&8388608&&_e("featuresMarked",q),l.$$.dirty[0]&1&&_e("reverseToggle",w),l.$$.dirty[0]&2&&_e("queryChange",m),l.$$.dirty[0]&1|l.$$.dirty[1]&16&&y&&y.indicateReverse(w)},[w,m,r,f,g,W,Z,A,V,ne,L,te,$e,ve,R,O,We,ue,ce,ye,Pt,nt,Et,Qe,Je,s,u,a,k,U,h,z,j,_,S,y,H,v,ge,F,b,ae,ie,fe,Be,we,De,Oe,Ge,St,Mt,et,It,Bt,q,P,qe,n,o,i,Wt,Ht,At,Vt,jt,Zt,Ft,Dt,Ot,Gt,qt,Kt,Nt]}class Dn extends x{constructor(e){super(),$(this,e,Fn,Zn,ee,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}}function ht(l){let e,t,n,i;return t=new Dn({props:{mapController:l[1],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){e=I("div"),Q(t.$$.fragment),d(e,"class",n=Ve(l[0])+" svelte-189syb7")},m(o,r){p(o,e,r),J(t,e,null),i=!0},p(o,r){const s={};r&2&&(s.mapController=o[1]),t.$set(s),(!i||r&1&&n!==(n=Ve(o[0])+" svelte-189syb7"))&&d(e,"class",n)},i(o){i||(T(t.$$.fragment,o),i=!0)},o(o){B(t.$$.fragment,o),i=!1},d(o){o&&C(e),X(t)}}}function On(l){let e,t,n=l[1]&&ht(l);return{c(){n&&n.c(),e=Ue()},m(i,o){n&&n.m(i,o),p(i,e,o),t=!0},p(i,[o]){i[1]?n?(n.p(i,o),o&2&&T(n,1)):(n=ht(i),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(be(),B(n,1,1,()=>{n=null}),ke())},i(i){t||(T(n),t=!0)},o(i){B(n),t=!1},d(i){i&&C(e),n&&n.d(i)}}}function Gn(l,e,t){let n;ze(l,tn,r=>t(2,n=r));let{position:i="top-left"}=e,o;return nn(()=>{t(1,o=ln(n,Lt))}),l.$$set=r=>{"position"in r&&t(0,i=r.position)},[i,o]}class Pl extends x{constructor(e){super(),$(this,e,Gn,On,ee,{position:0})}}function qn(l){let e;const t=l[16].default,n=Ce(t,l,l[24],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&16777216)&&Se(n,t,i,i[24],e?Ie(t,i[24],o,null):Me(i[24]),null)},i(i){e||(T(n,i),e=!0)},o(i){B(n,i),e=!1},d(i){n&&n.d(i)}}}function Kn(l){let e,t,n;function i(r){l[17](r)}let o={id:l[1],type:"circle",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[qn]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Tt({props:o}),Re.push(()=>je(e,"hovered",i)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){Q(e.$$.fragment)},m(r,s){J(e,r,s),n=!0},p(r,[s]){const u={};s&2&&(u.id=r[1]),s&4&&(u.source=r[2]),s&8&&(u.sourceLayer=r[3]),s&16&&(u.beforeId=r[4]),s&32&&(u.beforeLayerType=r[5]),s&64&&(u.paint=r[6]),s&128&&(u.layout=r[7]),s&256&&(u.filter=r[8]),s&512&&(u.applyToClusters=r[9]),s&1024&&(u.minzoom=r[10]),s&2048&&(u.maxzoom=r[11]),s&4096&&(u.hoverCursor=r[12]),s&8192&&(u.manageHoverState=r[13]),s&16384&&(u.eventsIfTopMost=r[14]),s&32768&&(u.interactive=r[15]),s&16777216&&(u.$$scope={dirty:s,ctx:r}),!t&&s&1&&(t=!0,u.hovered=r[0],Ze(()=>t=!1)),e.$set(u)},i(r){n||(T(e.$$.fragment,r),n=!0)},o(r){B(e.$$.fragment,r),n=!1},d(r){X(e,r)}}}function Nn(l,e,t){let{$$slots:n={},$$scope:i}=e,{id:o=zt("circle")}=e,{source:r=void 0}=e,{sourceLayer:s=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:a}=e,{layout:g=void 0}=e,{filter:k=void 0}=e,{applyToClusters:U=void 0}=e,{minzoom:W=void 0}=e,{maxzoom:Z=void 0}=e,{hoverCursor:h=void 0}=e,{manageHoverState:z=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:_=!1}=e,{interactive:S=!0}=e;function y(m){j=m,t(0,j)}function H(m){le.call(this,l,m)}function A(m){le.call(this,l,m)}function V(m){le.call(this,l,m)}function v(m){le.call(this,l,m)}function w(m){le.call(this,l,m)}function ne(m){le.call(this,l,m)}return l.$$set=m=>{"id"in m&&t(1,o=m.id),"source"in m&&t(2,r=m.source),"sourceLayer"in m&&t(3,s=m.sourceLayer),"beforeId"in m&&t(4,u=m.beforeId),"beforeLayerType"in m&&t(5,f=m.beforeLayerType),"paint"in m&&t(6,a=m.paint),"layout"in m&&t(7,g=m.layout),"filter"in m&&t(8,k=m.filter),"applyToClusters"in m&&t(9,U=m.applyToClusters),"minzoom"in m&&t(10,W=m.minzoom),"maxzoom"in m&&t(11,Z=m.maxzoom),"hoverCursor"in m&&t(12,h=m.hoverCursor),"manageHoverState"in m&&t(13,z=m.manageHoverState),"hovered"in m&&t(0,j=m.hovered),"eventsIfTopMost"in m&&t(14,_=m.eventsIfTopMost),"interactive"in m&&t(15,S=m.interactive),"$$scope"in m&&t(24,i=m.$$scope)},[j,o,r,s,u,f,a,g,k,U,W,Z,h,z,_,S,n,y,H,A,V,v,w,ne,i]}class Rl extends x{constructor(e){super(),$(this,e,Nn,Kn,ee,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}const Qn=l=>({marker:l&8}),yt=l=>({marker:l[3]});function Jn(l){let e,t,n,i,o,r,s;const u=l[19].default,f=Ce(u,l,l[18],yt);return{c(){e=I("div"),f&&f.c(),d(e,"tabindex",t=l[1]?0:void 0),d(e,"role",n=l[1]?"button":void 0),Te(e,"z-index",l[2])},m(a,g){p(a,e,g),f&&f.m(e,null),o=!0,r||(s=[rt(l[7].call(null,e)),rt(i=Xn.call(null,e,l[0])),G(e,"click",xe(l[20])),G(e,"dblclick",xe(l[21])),G(e,"contextmenu",xe(l[22])),G(e,"mouseenter",l[23]),G(e,"mouseleave",l[24]),G(e,"mousemove",l[25]),G(e,"keydown",l[8])],r=!0)},p(a,[g]){f&&f.p&&(!o||g&262152)&&Se(f,u,a,a[18],o?Ie(u,a[18],g,Qn):Me(a[18]),yt),(!o||g&2&&t!==(t=a[1]?0:void 0))&&d(e,"tabindex",t),(!o||g&2&&n!==(n=a[1]?"button":void 0))&&d(e,"role",n),i&&on(i.update)&&g&1&&i.update.call(null,a[0]),g&4&&Te(e,"z-index",a[2])},i(a){o||(T(f,a),o=!0)},o(a){B(f,a),o=!1},d(a){a&&C(e),f&&f.d(a),r=!1,Fe(s)}}}function Xn(l,e){const t=l.className;function n(i){i?l.className=`${t} ${i}`:l.className=t}return n(e),{update:n}}function Yn(l,e,t){let n,i,o,{$$slots:r={},$$scope:s}=e,{marker:u=void 0}=e,{lngLat:f}=e,{class:a=void 0}=e,{interactive:g=!0}=e,{asButton:k=!1}=e,{draggable:U=!1}=e,{feature:W=null}=e,{offset:Z=void 0}=e,{zIndex:h=void 0}=e,{rotation:z=0}=e,{opacity:j=1}=e;const _=wt(),{map:S,layerEvent:y,self:H}=an();ze(l,S,b=>t(27,o=b)),ze(l,y,b=>t(26,n=b)),ze(l,H,b=>t(3,i=b));function A(b){st(H,i=new Lt.Marker({element:b,rotation:z,draggable:U,offset:Z,opacity:j.toString()}).setLngLat(f).addTo(o),i),t(11,u=i);const ae=()=>w("dragstart"),ie=()=>{V(),w("drag")},fe=()=>{V(),w("dragend")};return U&&(i.on("dragstart",ae),i.on("drag",ie),i.on("dragend",fe)),{destroy(){U&&(i==null||i.off("dragstart",ae),i==null||i.off("drag",ie),i==null||i.off("dragend",fe)),t(11,u=void 0),i==null||i.remove()}}}function V(){let b=i==null?void 0:i.getLngLat();b&&(Array.isArray(f)?t(10,f=[b.lng,b.lat]):f&&"lon"in f?t(10,f={lon:b.lng,lat:b.lat}):t(10,f=b))}function v(b){b.key===" "&&(b.preventDefault(),b.stopPropagation(),w("click"))}function w(b){if(!g)return;let ae=i==null?void 0:i.getLngLat();if(!ae)return;const ie=[ae.lng,ae.lat];let fe={map:o,marker:i,lngLat:ie,features:[{type:"Feature",properties:(W==null?void 0:W.properties)??{},geometry:{type:"Point",coordinates:ie}}]};st(y,n={...fe,layerType:"marker",type:b},n),_(b,fe)}const ne=()=>w("click"),m=()=>w("dblclick"),ge=()=>w("contextmenu"),L=b=>{w("mouseenter")},F=()=>{w("mouseleave")},te=()=>w("mousemove");return l.$$set=b=>{"marker"in b&&t(11,u=b.marker),"lngLat"in b&&t(10,f=b.lngLat),"class"in b&&t(0,a=b.class),"interactive"in b&&t(12,g=b.interactive),"asButton"in b&&t(1,k=b.asButton),"draggable"in b&&t(13,U=b.draggable),"feature"in b&&t(14,W=b.feature),"offset"in b&&t(15,Z=b.offset),"zIndex"in b&&t(2,h=b.zIndex),"rotation"in b&&t(16,z=b.rotation),"opacity"in b&&t(17,j=b.opacity),"$$scope"in b&&t(18,s=b.$$scope)},l.$$.update=()=>{l.$$.dirty&1032&&(i==null||i.setLngLat(f)),l.$$.dirty&32776&&(i==null||i.setOffset(Z??[0,0])),l.$$.dirty&65544&&(i==null||i.setRotation(z)),l.$$.dirty&131080&&(i==null||i.setOpacity(j.toString()))},[a,k,h,i,S,y,H,A,v,w,f,u,g,U,W,Z,z,j,s,r,ne,m,ge,L,F,te]}class Ul extends x{constructor(e){super(),$(this,e,Yn,Jn,ee,{marker:11,lngLat:10,class:0,interactive:12,asButton:1,draggable:13,feature:14,offset:15,zIndex:2,rotation:16,opacity:17})}}function xn(l){let e;const t=l[8].default,n=Ce(t,l,l[15],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&32768)&&Se(n,t,i,i[15],e?Ie(t,i[15],o,null):Me(i[15]),null)},i(i){e||(T(n,i),e=!0)},o(i){B(n,i),e=!1},d(i){n&&n.d(i)}}}function $n(l){let e,t;return e=new Tt({props:{id:l[0],type:"raster",source:l[1],beforeId:l[2],beforeLayerType:l[3],paint:l[4],layout:l[5],minzoom:l[6],maxzoom:l[7],$$slots:{default:[xn]},$$scope:{ctx:l}}}),e.$on("click",l[9]),e.$on("dblclick",l[10]),e.$on("contextmenu",l[11]),e.$on("mouseenter",l[12]),e.$on("mousemove",l[13]),e.$on("mouseleave",l[14]),{c(){Q(e.$$.fragment)},m(n,i){J(e,n,i),t=!0},p(n,[i]){const o={};i&1&&(o.id=n[0]),i&2&&(o.source=n[1]),i&4&&(o.beforeId=n[2]),i&8&&(o.beforeLayerType=n[3]),i&16&&(o.paint=n[4]),i&32&&(o.layout=n[5]),i&64&&(o.minzoom=n[6]),i&128&&(o.maxzoom=n[7]),i&32768&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function el(l,e,t){let{$$slots:n={},$$scope:i}=e,{id:o=zt("raster-layer")}=e,{source:r=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:f}=e,{layout:a=void 0}=e,{minzoom:g=void 0}=e,{maxzoom:k=void 0}=e;function U(_){le.call(this,l,_)}function W(_){le.call(this,l,_)}function Z(_){le.call(this,l,_)}function h(_){le.call(this,l,_)}function z(_){le.call(this,l,_)}function j(_){le.call(this,l,_)}return l.$$set=_=>{"id"in _&&t(0,o=_.id),"source"in _&&t(1,r=_.source),"beforeId"in _&&t(2,s=_.beforeId),"beforeLayerType"in _&&t(3,u=_.beforeLayerType),"paint"in _&&t(4,f=_.paint),"layout"in _&&t(5,a=_.layout),"minzoom"in _&&t(6,g=_.minzoom),"maxzoom"in _&&t(7,k=_.maxzoom),"$$scope"in _&&t(15,i=_.$$scope)},[o,r,s,u,f,a,g,k,n,U,W,Z,h,z,j,i]}class El extends x{constructor(e){super(),$(this,e,el,$n,ee,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}const tl="/atip/assets/help-d011708a.svg";function nl(l){let e,t;const n=l[1].default,i=Ce(n,l,l[4],null);return{c(){e=I("div"),i&&i.c(),d(e,"class","govuk-prose")},m(o,r){p(o,e,r),i&&i.m(e,null),t=!0},p(o,r){i&&i.p&&(!t||r&16)&&Se(i,n,o,o[4],t?Ie(n,o[4],r,null):Me(o[4]),null)},i(o){t||(T(i,o),t=!0)},o(o){B(i,o),t=!1},d(o){o&&C(e),i&&i.d(o)}}}function ll(l){let e,t,n,i,o,r,s;function u(a){l[3](a)}let f={title:"Help",$$slots:{default:[nl]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.open=l[0]),n=new Yt({props:f}),Re.push(()=>je(n,"open",u)),{c(){e=I("button"),e.innerHTML=`<img src="${tl}" title="Help" alt="Help"/>`,t=N(),Q(n.$$.fragment),d(e,"class","svelte-gb6dzm")},m(a,g){p(a,e,g),p(a,t,g),J(n,a,g),o=!0,r||(s=G(e,"click",l[2]),r=!0)},p(a,[g]){const k={};g&16&&(k.$$scope={dirty:g,ctx:a}),!i&&g&1&&(i=!0,k.open=a[0],Ze(()=>i=!1)),n.$set(k)},i(a){o||(T(n.$$.fragment,a),o=!0)},o(a){B(n.$$.fragment,a),o=!1},d(a){a&&(C(e),C(t)),X(n,a),r=!1,s()}}}function il(l,e,t){let{$$slots:n={},$$scope:i}=e,o=!1;const r=()=>t(0,o=!0);function s(u){o=u,t(0,o)}return l.$$set=u=>{"$$scope"in u&&t(4,i=u.$$scope)},[o,n,r,s,i]}class Wl extends x{constructor(e){super(),$(this,e,il,ll,ee,{})}}function ol(l){let e;return{c(){e=I("ul"),e.innerHTML=`<li><b>Click</b>
    on the map to open a new tab with a 3rd-party imagery provider</li> <li>Press <b>Escape</b>
    to exit this mode</li> <li>Cursor by <a href="https://icon-icons.com/icon/screenshot-cursor-camera/100181" target="_blank" rel="noreferrer">Luc Chaissac</a></li>`},m(t,n){p(t,e,n)},p:D,i:D,o:D,d(t){t&&C(e)}}}class rl extends x{constructor(e){super(),$(this,e,null,ol,ee,{})}}const sl="/atip/assets/camera_cursor-824d29b6.svg",{window:al}=fn;function bt(l){let e,t,n,i;const o=[ul,fl],r=[];function s(u,f){return u[0]?0:1}return e=s(l),t=r[e]=o[e](l),{c(){t.c(),n=Ue()},m(u,f){r[e].m(u,f),p(u,n,f),i=!0},p(u,f){let a=e;e=s(u),e===a?r[e].p(u,f):(be(),B(r[a],1,1,()=>{r[a]=null}),ke(),t=r[e],t?t.p(u,f):(t=r[e]=o[e](u),t.c()),T(t,1),t.m(n.parentNode,n))},i(u){i||(T(t),i=!0)},o(u){B(t),i=!1},d(u){u&&C(n),r[e].d(u)}}}function fl(l){let e,t;return e=new kt({props:{$$slots:{default:[cl]},$$scope:{ctx:l}}}),e.$on("click",l[8]),{c(){Q(e.$$.fragment)},m(n,i){J(e,n,i),t=!0},p(n,i){const o={};i&8192&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function ul(l){let e,t,n,i,o,r,s;e=new kt({props:{$$slots:{default:[dl]},$$scope:{ctx:l}}}),e.$on("click",l[6]);function u(a){l[7](a)}let f={label:"Source",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return l[2].streetViewImagery!==void 0&&(f.value=l[2].streetViewImagery),n=new xt({props:f}),Re.push(()=>je(n,"value",u)),r=new dn({props:{label:"Help",$$slots:{default:[ml]},$$scope:{ctx:l}}}),{c(){Q(e.$$.fragment),t=N(),Q(n.$$.fragment),o=N(),Q(r.$$.fragment)},m(a,g){J(e,a,g),p(a,t,g),J(n,a,g),p(a,o,g),J(r,a,g),s=!0},p(a,g){const k={};g&8192&&(k.$$scope={dirty:g,ctx:a}),e.$set(k);const U={};!i&&g&4&&(i=!0,U.value=a[2].streetViewImagery,Ze(()=>i=!1)),n.$set(U);const W={};g&8192&&(W.$$scope={dirty:g,ctx:a}),r.$set(W)},i(a){s||(T(e.$$.fragment,a),T(n.$$.fragment,a),T(r.$$.fragment,a),s=!0)},o(a){B(e.$$.fragment,a),B(n.$$.fragment,a),B(r.$$.fragment,a),s=!1},d(a){a&&(C(t),C(o)),X(e,a),X(n,a),X(r,a)}}}function cl(l){let e;return{c(){e=me("Enable Street View")},m(t,n){p(t,e,n)},d(t){t&&C(e)}}}function dl(l){let e;return{c(){e=me("Disable Street View")},m(t,n){p(t,e,n)},d(t){t&&C(e)}}}function ml(l){let e,t;return e=new rl({}),{c(){Q(e.$$.fragment)},m(n,i){J(e,n,i),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function gl(l){let e,t,n,i,o=l[1]&&bt(l);return{c(){o&&o.c(),e=Ue()},m(r,s){o&&o.m(r,s),p(r,e,s),t=!0,n||(i=G(al,"keydown",l[3]),n=!0)},p(r,[s]){r[1]?o?(o.p(r,s),s&2&&T(o,1)):(o=bt(r),o.c(),T(o,1),o.m(e.parentNode,e)):o&&(be(),B(o,1,1,()=>{o=null}),ke())},i(r){t||(T(o),t=!0)},o(r){B(o),t=!1},d(r){r&&C(e),o&&o.d(r),n=!1,i()}}}function _l(l,e,t){let n;ze(l,at,h=>t(2,n=h));let{cfg:i}=e,{map:o}=e,{enabled:r}=e,{showControls:s=!0}=e,u=[];function f(){if(o){o.on("click",g),o.getCanvas().style.cursor=`url(${sl}), auto`;for(let h of i.getStreetViewRoadLayerNames(o))u.push([h,o.getPaintProperty(h,"line-color")]),o.setPaintProperty(h,"line-color","cyan")}}function a(){if(o){o.off("click",g),o.getCanvas().style.cursor="inherit";for(let[h,z]of u)o.setPaintProperty(h,"line-color",z);u=[]}}vt(a);function g(h){if(!r)return;let z=h.lngLat.lng,j=h.lngLat.lat;n.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${j},${z}&cbp=11,0,0,0,0`,"_blank"):n.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${j}~${z}&style=x`,"_blank")}function k(h){r&&h.key=="Escape"&&(h.stopPropagation(),t(0,r=!1))}const U=()=>t(0,r=!1);function W(h){l.$$.not_equal(n.streetViewImagery,h)&&(n.streetViewImagery=h,at.set(n))}const Z=()=>t(0,r=!0);return l.$$set=h=>{"cfg"in h&&t(4,i=h.cfg),"map"in h&&t(5,o=h.map),"enabled"in h&&t(0,r=h.enabled),"showControls"in h&&t(1,s=h.showControls)},l.$$.update=()=>{l.$$.dirty&1&&(r?f():a())},[r,s,n,k,i,o,U,W,Z]}class Hl extends x{constructor(e){super(),$(this,e,_l,gl,ee,{cfg:4,map:5,enabled:0,showControls:1})}}const hl="/atip/assets/warning-81bba3f6.svg";function yl(l){let e,t;return{c(){e=I("img"),Y(e.src,t=hl)||d(e,"src",t),d(e,"title",l[0]),d(e,"alt",l[0])},m(n,i){p(n,e,i)},p(n,[i]){i&1&&d(e,"title",n[0]),i&1&&d(e,"alt",n[0])},i:D,o:D,d(n){n&&C(e)}}}function bl(l,e,t){let{text:n}=e;return l.$$set=i=>{"text"in i&&t(0,n=i.text)},[n]}class Al extends x{constructor(e){super(),$(this,e,bl,yl,ee,{text:0})}}export{Bl as B,Rl as C,Pl as G,Wl as H,Ul as M,El as R,Hl as S,Al as W,zl as a,Ml as b,pl as c,Il as d,Cl as e,Sl as f,rl as g,dn as h,Tl as i};
