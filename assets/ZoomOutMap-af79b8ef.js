import{S as X,i as x,s as $,O as _e,e as L,j as c,k as S,T as he,U as ge,V as be,t as T,o as C,p as I,l as k,f as F,a8 as Re,x as Y,N as Ze,bi as en,K as Ct,Y as ne,v as oe,J as pe,F as tn,h as G,m as H,q,E as nn,ah as Fe,Z as Ue,bj as ln,bk as ft,b0 as sn,bl as on,w as Ee,as as rn,ap as He,bm as an,b as qe,c as nt,n as lt,r as Se,b5 as ct,bn as ce,a7 as N,bo as de,am as te,b7 as Ge,bp as un,_ as ve,$ as we,ac as St,a2 as it,bq as fn,ai as cn,aj as mn,u as dn,br as _n,ae as hn,aC as mt,aD as Ae,bs as gn,bt as bn,b9 as It,a0 as Bt,af as yn,b6 as kn,b1 as dt,al as vn,bu as wn,a as st,R as pn,ar as Ln}from"./index-9a8ca39d.js";function Tn(l){let e,t;const n=l[1].default,i=_e(n,l,l[0],null);return{c(){e=L("div"),i&&i.c(),c(e,"class","govuk-button-group")},m(s,o){S(s,e,o),i&&i.m(e,null),t=!0},p(s,[o]){i&&i.p&&(!t||o&1)&&he(i,n,s,s[0],t?be(n,s[0],o,null):ge(s[0]),null)},i(s){t||(T(i,s),t=!0)},o(s){C(i,s),t=!1},d(s){s&&I(e),i&&i.d(s)}}}function Mn(l,e,t){let{$$slots:n={},$$scope:i}=e;return l.$$set=s=>{"$$scope"in s&&t(0,i=s.$$scope)},[i,n]}class Jl extends X{constructor(e){super(),x(this,e,Mn,Tn,$,{})}}function zn(l){let e,t,n;const i=l[3].default,s=_e(i,l,l[2],null);return{c(){e=L("fieldset"),t=L("div"),s&&s.c(),c(t,"class",l[0]),c(t,"data-module","govuk-checkboxes"),c(e,"class","govuk-fieldset")},m(o,r){S(o,e,r),k(e,t),s&&s.m(t,null),n=!0},p(o,[r]){s&&s.p&&(!n||r&4)&&he(s,i,o,o[2],n?be(i,o[2],r,null):ge(o[2]),null)},i(o){n||(T(s,o),n=!0)},o(o){C(s,o),n=!1},d(o){o&&I(e),s&&s.d(o)}}}function Cn(l,e,t){let{$$slots:n={},$$scope:i}=e,{small:s=!1}=e,o=s?"govuk-checkboxes--small":"govuk-checkboxes";return l.$$set=r=>{"small"in r&&t(1,s=r.small),"$$scope"in r&&t(2,i=r.$$scope)},[o,s,i,n]}class Yl extends X{constructor(e){super(),x(this,e,Cn,zn,$,{small:1})}}const Sn=l=>({}),_t=l=>({});function In(l){let e,t,n,i,s,o,r,u,m;const a=l[5].default,d=_e(a,l,l[4],null),h=l[5].right,y=_e(h,l,l[4],_t);return{c(){e=L("div"),t=L("input"),n=F(),i=L("label"),d&&d.c(),s=F(),o=L("span"),y&&y.c(),c(t,"type","checkbox"),c(t,"class","govuk-checkboxes__input"),c(t,"id",l[3]),c(i,"class","govuk-label govuk-checkboxes__label"),c(i,"for",l[3]),c(i,"title",l[1]),Re(o,"float","right"),c(e,"class","govuk-checkboxes__item"),c(e,"style",l[2])},m(g,v){S(g,e,v),k(e,t),t.checked=l[0],k(e,n),k(e,i),d&&d.m(i,null),k(e,s),k(e,o),y&&y.m(o,null),r=!0,u||(m=[Y(t,"change",l[7]),Y(t,"change",l[6])],u=!0)},p(g,[v]){v&1&&(t.checked=g[0]),d&&d.p&&(!r||v&16)&&he(d,a,g,g[4],r?be(a,g[4],v,null):ge(g[4]),null),(!r||v&2)&&c(i,"title",g[1]),y&&y.p&&(!r||v&16)&&he(y,h,g,g[4],r?be(h,g[4],v,Sn):ge(g[4]),_t)},i(g){r||(T(d,g),T(y,g),r=!0)},o(g){C(d,g),C(y,g),r=!1},d(g){g&&I(e),d&&d.d(g),y&&y.d(g),u=!1,Ze(m)}}}function Bn(l,e,t){let{$$slots:n={},$$scope:i}=e;const s=en(n);let{checked:o}=e,{hint:r=null}=e,m=s.right!==void 0?"float: none":"",a=Ct();function d(y){ne.call(this,l,y)}function h(){o=this.checked,t(0,o)}return l.$$set=y=>{"checked"in y&&t(0,o=y.checked),"hint"in y&&t(1,r=y.hint),"$$scope"in y&&t(4,i=y.$$scope)},[o,r,m,a,i,n,d,h]}class Xl extends X{constructor(e){super(),x(this,e,Bn,In,$,{checked:0,hint:1})}}function Rn(l){let e,t,n,i,s,o,r;const u=l[3].default,m=_e(u,l,l[2],null);return{c(){e=L("details"),t=L("summary"),n=L("span"),i=oe(l[0]),s=F(),o=L("div"),m&&m.c(),c(n,"class","govuk-details__summary-text"),c(t,"class","govuk-details__summary"),c(o,"class","govuk-details__text"),e.open=l[1],c(e,"class","govuk-details"),c(e,"data-module","govuk-details")},m(a,d){S(a,e,d),k(e,t),k(t,n),k(n,i),k(e,s),k(e,o),m&&m.m(o,null),r=!0},p(a,[d]){(!r||d&1)&&pe(i,a[0]),m&&m.p&&(!r||d&4)&&he(m,u,a,a[2],r?be(u,a[2],d,null):ge(a[2]),null),(!r||d&2)&&(e.open=a[1])},i(a){r||(T(m,a),r=!0)},o(a){C(m,a),r=!1},d(a){a&&I(e),m&&m.d(a)}}}function En(l,e,t){let{$$slots:n={},$$scope:i}=e,{label:s}=e,{open:o=!1}=e;return l.$$set=r=>{"label"in r&&t(0,s=r.label),"open"in r&&t(1,o=r.open),"$$scope"in r&&t(2,i=r.$$scope)},[s,o,i,n]}class Zn extends X{constructor(e){super(),x(this,e,En,Rn,$,{label:0,open:1})}}function ht(l,e,t){const n=l.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function gt(l){let e;return{c(){e=L("option"),e.__value="",Ee(e,e.__value)},m(t,n){S(t,e,n)},d(t){t&&I(e)}}}function bt(l){let e,t=l[10]+"",n,i;return{c(){e=L("option"),n=oe(t),e.__value=i=l[9],Ee(e,e.__value)},m(s,o){S(s,e,o),k(e,n)},p(s,o){o&4&&t!==(t=s[10]+"")&&pe(n,t),o&4&&i!==(i=s[9])&&(e.__value=i,Ee(e,e.__value))},d(s){s&&I(e)}}}function Un(l){let e,t,n,i,s,o,r;e=new nn({props:{errorMessage:l[5]}});let u=l[3]&&gt(),m=Fe(l[2]),a=[];for(let d=0;d<m.length;d+=1)a[d]=bt(ht(l,m,d));return{c(){G(e.$$.fragment),t=F(),n=L("select"),u&&u.c(),i=Ue();for(let d=0;d<a.length;d+=1)a[d].c();c(n,"class","govuk-select"),c(n,"id",l[6]),n.disabled=l[4],l[0]===void 0&&ln(()=>l[8].call(n))},m(d,h){H(e,d,h),S(d,t,h),S(d,n,h),u&&u.m(n,null),k(n,i);for(let y=0;y<a.length;y+=1)a[y]&&a[y].m(n,null);ft(n,l[0],!0),s=!0,o||(r=[Y(n,"change",l[8]),Y(n,"change",l[7])],o=!0)},p(d,h){const y={};if(h&32&&(y.errorMessage=d[5]),e.$set(y),d[3]?u||(u=gt(),u.c(),u.m(n,i)):u&&(u.d(1),u=null),h&4){m=Fe(d[2]);let g;for(g=0;g<m.length;g+=1){const v=ht(d,m,g);a[g]?a[g].p(v,h):(a[g]=bt(v),a[g].c(),a[g].m(n,null))}for(;g<a.length;g+=1)a[g].d(1);a.length=m.length}(!s||h&16)&&(n.disabled=d[4]),h&5&&ft(n,d[0])},i(d){s||(T(e.$$.fragment,d),s=!0)},o(d){C(e.$$.fragment,d),s=!1},d(d){d&&(I(t),I(n)),q(e,d),u&&u.d(),sn(a,d),o=!1,Ze(r)}}}function Pn(l){let e,t;return e=new tn({props:{label:l[1],id:l[6],$$slots:{default:[Un]},$$scope:{ctx:l}}}),{c(){G(e.$$.fragment)},m(n,i){H(e,n,i),t=!0},p(n,[i]){const s={};i&2&&(s.label=n[1]),i&8253&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function jn(l,e,t){let{label:n}=e,{choices:i}=e,{emptyOption:s=!1}=e,{disabled:o=!1}=e,{errorMessage:r=""}=e,{value:u}=e,m=Ct();function a(h){ne.call(this,l,h)}function d(){u=on(this),t(0,u),t(2,i)}return l.$$set=h=>{"label"in h&&t(1,n=h.label),"choices"in h&&t(2,i=h.choices),"emptyOption"in h&&t(3,s=h.emptyOption),"disabled"in h&&t(4,o=h.disabled),"errorMessage"in h&&t(5,r=h.errorMessage),"value"in h&&t(0,u=h.value)},[u,n,i,s,o,r,m,a,d]}class Wn extends X{constructor(e){super(),x(this,e,jn,Pn,$,{label:1,choices:2,emptyOption:3,disabled:4,errorMessage:5,value:0})}}function xl(l){return{id:l,beforeId:Vn(l)}}function Vn(l){let e=rn(He);if(!e){console.warn(`getBeforeId(${l}) called before map is ready. Z-ordering may be incorrect.`);return}let t,n=!1;for(let i=yt.length-1;i>=0;i--){let s=yt[i];if(s==l){n=!0;break}e.getLayer(s)&&(t=s)}if(!n)throw new Error(`Layer ID ${l} not defined in layerZorder`);return t}let p=l=>l,ee=l=>l,On=l=>l,Dn=l=>l,An=l=>l,Fn=l=>l,Gn=l=>l;const yt=[Gn("raster-basemap"),p("parliamentary_constituencies"),p("parliamentary_constituencies-outline"),p("wards"),p("wards-outline"),p("combined_authorities"),p("combined_authorities-outline"),p("local_authority_districts"),p("local_authority_districts-outline"),p("local_planning_authorities"),p("local_planning_authorities-outline"),p("census_output_areas"),p("census_output_areas-outline"),p("imd"),p("imd-outline"),p("pollution"),p("road_noise"),p("mrn"),p("srn"),p("bus_routes"),p("trams"),p("national_cycle_network"),p("cycle_paths"),p("pct_commute"),p("pct_school"),p("road_widths"),p("road_speeds"),p("pavement_widths"),p("gradient"),p("gradient_arrows"),p("education"),p("hospitals"),p("sports_spaces"),p("railway_stations"),p("cycle_parking"),p("crossings"),p("vehicle_counts"),p("stats19"),p("bus_stops"),ee("interventions-coverage-polygons-outlines"),ee(p("interventions-polygons")),ee(p("interventions-polygons-outlines")),ee("hover-polygons"),ee("hover-lines"),ee(p("interventions-lines")),ee(p("interventions-lines-endpoints")),ee("hover-points"),ee(p("interventions-points")),p("criticals-clusters"),p("criticals-counts"),p("criticals-points"),ee("edit-polygon-fill"),ee("edit-polygon-lines"),ee("edit-polygon-vertices"),ee("draw-split-route"),ee("route-points"),ee("route-lines"),ee("route-polygons"),On("road_label"),Fn(Dn(An("Road labels"))),ee("boundary"),p("measurement-line"),ee("georeferenced-image"),p("cover-interactive-layers")];function Hn(l){let e,t,n;function i(o){l[2](o)}let s={label:"Basemap",choices:an(),disabled:l[0]};return l[1]!==void 0&&(s.value=l[1]),e=new Wn({props:s}),qe.push(()=>nt(e,"value",i)),{c(){G(e.$$.fragment)},m(o,r){H(e,o,r),n=!0},p(o,[r]){const u={};r&1&&(u.disabled=o[0]),!t&&r&2&&(t=!0,u.value=o[1],lt(()=>t=!1)),e.$set(u)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){q(e,o)}}}function qn(l,e,t){let n;Se(l,ct,o=>t(1,n=o));let{disabled:i=!1}=e;function s(o){n=o,ct.set(n)}return l.$$set=o=>{"disabled"in o&&t(0,i=o.disabled)},[i,n,s]}class $l extends X{constructor(e){super(),x(this,e,qn,Hn,$,{disabled:0})}}function Nn(l){let e,t;return{c(){e=ce("svg"),t=ce("path"),c(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),c(e,"viewBox","0 0 14 14"),c(e,"width","13"),c(e,"height","13"),c(e,"class","svelte-en2qvf")},m(n,i){S(n,e,i),k(e,t)},p:N,i:N,o:N,d(n){n&&I(e)}}}class Rt extends X{constructor(e){super(),x(this,e,null,Nn,$,{})}}function Kn(l){let e,t;return{c(){e=ce("svg"),t=ce("path"),c(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),c(e,"viewBox","0 0 30 30"),c(e,"fill","none"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"class","svelte-d2loi5")},m(n,i){S(n,e,i),k(e,t)},p:N,i:N,o:N,d(n){n&&I(e)}}}class Et extends X{constructor(e){super(),x(this,e,null,Kn,$,{})}}function Qn(l){let e,t;return{c(){e=L("img"),te(e.src,t=l[3]+"area.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){S(n,e,i)},p(n,i){i&8&&!te(e.src,t=n[3]+"area.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function Jn(l){let e,t;return{c(){e=L("img"),te(e.src,t=l[3]+"reverse.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){S(n,e,i)},p(n,i){i&8&&!te(e.src,t=n[3]+"reverse.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function Yn(l){let e,t;return{c(){e=L("img"),te(e.src,t=l[3]+"poi.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){S(n,e,i)},p(n,i){i&8&&!te(e.src,t=n[3]+"poi.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function Xn(l){let e,t;return{c(){e=L("img"),te(e.src,t=l[3]+"postal_code.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){S(n,e,i)},p(n,i){i&8&&!te(e.src,t=n[3]+"postal_code.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function xn(l){let e,t;return{c(){e=L("img"),te(e.src,t=l[3]+"street.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){S(n,e,i)},p(n,i){i&8&&!te(e.src,t=n[3]+"street.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function $n(l){let e,t;return{c(){e=L("img"),te(e.src,t=l[3]+"road.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){S(n,e,i)},p(n,i){i&8&&!te(e.src,t=n[3]+"road.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function el(l){let e,t;return{c(){e=L("img"),te(e.src,t=l[3]+"housenumber.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){S(n,e,i)},p(n,i){i&8&&!te(e.src,t=n[3]+"housenumber.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function tl(l){let e,t,n,i;return{c(){e=L("img"),te(e.src,t=l[5])||c(e,"src",t),c(e,"alt",l[4]),c(e,"class","svelte-ltkwvy")},m(s,o){S(s,e,o),n||(i=Y(e,"error",l[14]),n=!0)},p(s,o){o&32&&!te(e.src,t=s[5])&&c(e,"src",t),o&16&&c(e,"alt",s[4])},d(s){s&&I(e),n=!1,i()}}}function kt(l){let e,t;return{c(){e=L("span"),t=oe(l[6]),c(e,"class","secondary svelte-ltkwvy")},m(n,i){S(n,e,i),k(e,t)},p(n,i){i&64&&pe(t,n[6])},d(n){n&&I(e)}}}function nl(l){var W,O;let e,t,n,i,s,o,r,u,m=(l[7]?l[0].place_name:l[0].place_name.replace(/,.*/,""))+"",a,d,h=l[2]==="always"||l[2]&&!l[0].address&&((W=l[0].properties)==null?void 0:W.kind)!=="road"&&((O=l[0].properties)==null?void 0:O.kind)!=="road_relation"&&!l[0].id.startsWith("address.")&&!l[0].id.startsWith("postal_code.")&&(!l[0].id.startsWith("poi.")||!l[5])&&!l[7],y,g,v=(l[7]?"":l[0].place_name.replace(/[^,]*,?\s*/,""))+"",Z,U,K;function b(M,R){var ie,_;return R&1&&(t=null),R&1&&(n=null),R&1&&(i=null),M[5]?tl:M[0].address?el:((ie=M[0].properties)==null?void 0:ie.kind)==="road"||((_=M[0].properties)==null?void 0:_.kind)==="road_relation"?$n:(t==null&&(t=!!M[0].id.startsWith("address.")),t?xn:(n==null&&(n=!!M[0].id.startsWith("postal_code.")),n?Xn:(i==null&&(i=!!M[0].id.startsWith("poi.")),i?Yn:M[7]?Jn:Qn)))}let B=b(l,-1),w=B(l),V=h&&kt(l);return{c(){e=L("li"),w.c(),s=F(),o=L("span"),r=L("span"),u=L("span"),a=oe(m),d=F(),V&&V.c(),y=F(),g=L("span"),Z=oe(v),c(u,"class","primary svelte-ltkwvy"),c(r,"class","svelte-ltkwvy"),c(g,"class","line2 svelte-ltkwvy"),c(o,"class","texts svelte-ltkwvy"),c(e,"tabindex","0"),c(e,"data-selected",l[1]),c(e,"class","svelte-ltkwvy"),de(e,"selected",l[1])},m(M,R){S(M,e,R),w.m(e,null),k(e,s),k(e,o),k(o,r),k(r,u),k(u,a),k(r,d),V&&V.m(r,null),k(o,y),k(o,g),k(g,Z),U||(K=[Y(e,"mouseenter",l[12]),Y(e,"focus",l[13])],U=!0)},p(M,[R]){var ie,_;B===(B=b(M,R))&&w?w.p(M,R):(w.d(1),w=B(M),w&&(w.c(),w.m(e,s))),R&1&&m!==(m=(M[7]?M[0].place_name:M[0].place_name.replace(/,.*/,""))+"")&&pe(a,m),R&37&&(h=M[2]==="always"||M[2]&&!M[0].address&&((ie=M[0].properties)==null?void 0:ie.kind)!=="road"&&((_=M[0].properties)==null?void 0:_.kind)!=="road_relation"&&!M[0].id.startsWith("address.")&&!M[0].id.startsWith("postal_code.")&&(!M[0].id.startsWith("poi.")||!M[5])&&!M[7]),h?V?V.p(M,R):(V=kt(M),V.c(),V.m(r,null)):V&&(V.d(1),V=null),R&1&&v!==(v=(M[7]?"":M[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&pe(Z,v),R&2&&c(e,"data-selected",M[1]),R&2&&de(e,"selected",M[1])},i:N,o:N,d(M){M&&I(e),w.d(),V&&V.d(),U=!1,Ze(K)}}}function ll(l,e,t){var b;let n,i,{feature:s}=e,{selected:o=!1}=e,{showPlaceType:r}=e,{missingIconsCache:u}=e,{iconsBaseUrl:m}=e;const a=(b=s.properties)==null?void 0:b.categories;let d,h,y=0,g=s.place_type[0]==="reverse";function v(B){h&&u.add(h),t(10,y++,y)}function Z(B){ne.call(this,l,B)}function U(B){ne.call(this,l,B)}const K=B=>v(B.currentTarget);return l.$$set=B=>{"feature"in B&&t(0,s=B.feature),"selected"in B&&t(1,o=B.selected),"showPlaceType"in B&&t(2,r=B.showPlaceType),"missingIconsCache"in B&&t(9,u=B.missingIconsCache),"iconsBaseUrl"in B&&t(3,m=B.iconsBaseUrl)},l.$$.update=()=>{var B,w,V,W;if(l.$$.dirty&3640)do t(11,n--,n),t(4,d=a==null?void 0:a[n]),t(5,h=d?m+d.replace(/ /g,"_")+".svg":void 0);while(n>-1&&(!h||u.has(h)));l.$$.dirty&1&&t(6,i=s.id.startsWith("poi.")?(w=(B=s.properties)==null?void 0:B.categories)==null?void 0:w.join(", "):((W=(V=s.properties)==null?void 0:V.place_type_name)==null?void 0:W[0])??s.place_type[0])},t(11,n=(a==null?void 0:a.length)??0),[s,o,r,m,d,h,i,g,v,u,y,n,Z,U,K]}class il extends X{constructor(e){super(),x(this,e,ll,nl,$,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function sl(l){let e;return{c(){e=L("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',c(e,"class","svelte-7cmwmc")},m(t,n){S(t,e,n)},p:N,i:N,o:N,d(t){t&&I(e)}}}class ol extends X{constructor(e){super(),x(this,e,null,sl,$,{})}}function rl(l){let e,t;return{c(){e=ce("svg"),t=ce("path"),c(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),c(e,"viewBox","0 0 60.006 21.412"),c(e,"width","14"),c(e,"height","20"),c(e,"class","svelte-en2qvf")},m(n,i){S(n,e,i),k(e,t)},p:N,i:N,o:N,d(n){n&&I(e)}}}class al extends X{constructor(e){super(),x(this,e,null,rl,$,{})}}function ul(l){let e,t,n;return{c(){e=ce("svg"),t=ce("circle"),n=ce("path"),c(t,"cx","4.789"),c(t,"cy","4.787"),c(t,"r","3.85"),Re(t,"stroke-width","1.875"),Re(t,"fill","none"),c(n,"d","M12.063 12.063 7.635 7.635"),Re(n,"stroke-width","1.875"),Re(n,"stroke-linecap","round"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","13"),c(e,"height","13"),c(e,"viewBox","0 0 13 13"),c(e,"class","svelte-1bpbt60")},m(i,s){S(i,e,s),k(e,t),k(e,n)},p:N,i:N,o:N,d(i){i&&I(e)}}}class fl extends X{constructor(e){super(),x(this,e,null,ul,$,{})}}function cl(l,e,t){const n=e[1],i=e[0],s=n-i;return l===n&&t?l:((l-i)%s+s)%s+i}function vt(l){const e=[...l];return e[2]<e[0]&&(e[2]+=360),e}let Be;async function ml(l,e,t){const n=l==null?void 0:l.getCenterAndZoom();for(const i of e??[])if(!(n&&(i.minZoom!=null&&i.minZoom>n[0]||i.maxZoom!=null&&i.maxZoom<n[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(Be&&i.cachedLocationExpiry&&Be.time+i.cachedLocationExpiry>Date.now()){if(!Be.coords)break e;return Be.coords}let s;try{return s=await new Promise((o,r)=>{t.signal.addEventListener("abort",()=>{r(Error("aborted"))}),navigator.geolocation.getCurrentPosition(u=>{o([u.coords.longitude,u.coords.latitude].map(m=>m.toFixed(6)).join(","))},u=>{r(u)},i)}),s}catch{}finally{i.cachedLocationExpiry&&(Be={time:Date.now(),coords:s})}if(t.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(n&&i.type==="map-center")return n[1].toFixed(6)+","+n[2].toFixed(6)}}function wt(l,e,t){const n=l.slice();return n[81]=e[t],n[83]=t,n}function pt(l){let e,t;return e=new ol({}),{c(){G(e.$$.fragment)},m(n,i){H(e,n,i),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function Lt(l){let e,t,n,i,s;return t=new al({}),{c(){e=L("button"),G(t.$$.fragment),c(e,"type","button"),c(e,"title",l[9]),c(e,"class","svelte-zh3kmv"),de(e,"active",l[0])},m(o,r){S(o,e,r),H(t,e,null),n=!0,i||(s=Y(e,"click",l[67]),i=!0)},p(o,r){(!n||r[0]&512)&&c(e,"title",o[9]),(!n||r[0]&1)&&de(e,"active",o[0])},i(o){n||(T(t.$$.fragment,o),n=!0)},o(o){C(t.$$.fragment,o),n=!1},d(o){o&&I(e),q(t),i=!1,s()}}}function dl(l){let e,t=[],n=new Map,i,s,o,r=Fe(l[14]);const u=m=>m[81].id+(m[81].address?","+m[81].address:"");for(let m=0;m<r.length;m+=1){let a=wt(l,r,m),d=u(a);n.set(d,t[m]=Tt(d,a))}return{c(){e=L("ul");for(let m=0;m<t.length;m+=1)t[m].c();c(e,"class","svelte-zh3kmv")},m(m,a){S(m,e,a);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);i=!0,s||(o=[Y(e,"mouseleave",l[71]),Y(e,"blur",l[72])],s=!0)},p(m,a){a[0]&17880064&&(r=Fe(m[14]),ve(),t=cn(t,a,u,1,m,r,n,e,mn,Tt,null,wt),we())},i(m){if(!i){for(let a=0;a<r.length;a+=1)T(t[a]);i=!0}},o(m){for(let a=0;a<t.length;a+=1)C(t[a]);i=!1},d(m){m&&I(e);for(let a=0;a<t.length;a+=1)t[a].d();s=!1,Ze(o)}}}function _l(l){let e,t,n,i,s,o;return t=new Et({}),{c(){e=L("div"),G(t.$$.fragment),n=F(),i=L("div"),s=oe(l[7]),c(i,"class","svelte-zh3kmv"),c(e,"class","no-results svelte-zh3kmv")},m(r,u){S(r,e,u),H(t,e,null),k(e,n),k(e,i),k(i,s),o=!0},p(r,u){(!o||u[0]&128)&&pe(s,r[7])},i(r){o||(T(t.$$.fragment,r),o=!0)},o(r){C(t.$$.fragment,r),o=!1},d(r){r&&I(e),q(t)}}}function hl(l){let e="",t;return{c(){t=oe(e)},m(n,i){S(n,t,i)},p:N,i:N,o:N,d(n){n&&I(t)}}}function gl(l){let e,t,n,i,s,o,r,u,m,a,d;return t=new Et({}),u=new Rt({}),{c(){e=L("div"),G(t.$$.fragment),n=F(),i=L("div"),s=oe(l[6]),o=F(),r=L("button"),G(u.$$.fragment),c(i,"class","svelte-zh3kmv"),c(r,"class","svelte-zh3kmv"),c(e,"class","error svelte-zh3kmv")},m(h,y){S(h,e,y),H(t,e,null),k(e,n),k(e,i),k(i,s),k(e,o),k(e,r),H(u,r,null),m=!0,a||(d=Y(r,"click",l[68]),a=!0)},p(h,y){(!m||y[0]&64)&&pe(s,h[6])},i(h){m||(T(t.$$.fragment,h),T(u.$$.fragment,h),m=!0)},o(h){C(t.$$.fragment,h),C(u.$$.fragment,h),m=!1},d(h){h&&I(e),q(t),q(u),a=!1,d()}}}function Tt(l,e){let t,n,i;function s(){return e[69](e[83])}function o(){return e[70](e[81])}return n=new il({props:{feature:e[81],showPlaceType:e[10],selected:e[15]===e[83],missingIconsCache:e[20],iconsBaseUrl:e[12]}}),n.$on("mouseenter",s),n.$on("focus",o),{key:l,first:null,c(){t=Ue(),G(n.$$.fragment),this.first=t},m(r,u){S(r,t,u),H(n,r,u),i=!0},p(r,u){e=r;const m={};u[0]&16384&&(m.feature=e[81]),u[0]&1024&&(m.showPlaceType=e[10]),u[0]&49152&&(m.selected=e[15]===e[83]),u[0]&4096&&(m.iconsBaseUrl=e[12]),n.$set(m)},i(r){i||(T(n.$$.fragment,r),i=!0)},o(r){C(n.$$.fragment,r),i=!1},d(r){r&&I(t),q(n,r)}}}function bl(l){let e,t,n,i,s,o,r,u,m,a,d,h,y,g,v,Z,U,K,b,B,w,V=!1;s=new fl({}),d=new Rt({});let W=l[19]&&pt(),O=l[5]===!0&&Lt(l);const M=l[59].default,R=_e(M,l,l[58],null),ie=[gl,hl,_l,dl],_=[];function Le(z,A){var le,Te;return z[18]?0:z[16]?((le=z[14])==null?void 0:le.length)===0?2:z[16]&&((Te=z[14])!=null&&Te.length)?3:-1:1}return~(Z=Le(l))&&(U=_[Z]=ie[Z](l)),{c(){e=F(),t=L("form"),n=L("div"),i=L("button"),G(s.$$.fragment),o=F(),r=L("input"),u=F(),m=L("div"),a=L("button"),G(d.$$.fragment),h=F(),W&&W.c(),y=F(),O&&O.c(),g=F(),R&&R.c(),v=F(),U&&U.c(),c(i,"class","search-button svelte-zh3kmv"),c(i,"type","button"),c(r,"placeholder",l[8]),c(r,"aria-label",l[8]),c(r,"class","svelte-zh3kmv"),c(a,"type","button"),c(a,"title",l[3]),c(a,"class","svelte-zh3kmv"),c(m,"class","clear-button-container svelte-zh3kmv"),de(m,"displayable",l[1]!==""),c(n,"class","input-group svelte-zh3kmv"),c(t,"tabindex","0"),c(t,"class",K=Ge(l[2])+" svelte-zh3kmv"),de(t,"can-collapse",l[4]&&l[1]==="")},m(z,A){S(z,e,A),S(z,t,A),k(t,n),k(n,i),H(s,i,null),k(n,o),k(n,r),l[61](r),Ee(r,l[1]),k(n,u),k(n,m),k(m,a),H(d,a,null),k(m,h),W&&W.m(m,null),k(n,y),O&&O.m(n,null),k(n,g),R&&R.m(n,null),k(t,v),~Z&&_[Z].m(t,null),b=!0,B||(w=[Y(i,"click",l[60]),Y(r,"input",l[62]),Y(r,"focus",l[63]),Y(r,"blur",l[64]),Y(r,"keydown",l[22]),Y(r,"input",l[65]),Y(a,"click",l[66]),Y(t,"submit",un(l[21]))],B=!0)},p(z,A){(!b||A[0]&256)&&c(r,"placeholder",z[8]),(!b||A[0]&256)&&c(r,"aria-label",z[8]),A[0]&2&&r.value!==z[1]&&Ee(r,z[1]),(!b||A[0]&8)&&c(a,"title",z[3]),z[19]?W?A[0]&524288&&T(W,1):(W=pt(),W.c(),T(W,1),W.m(m,null)):W&&(ve(),C(W,1,1,()=>{W=null}),we()),(!b||A[0]&2)&&de(m,"displayable",z[1]!==""),z[5]===!0?O?(O.p(z,A),A[0]&32&&T(O,1)):(O=Lt(z),O.c(),T(O,1),O.m(n,g)):O&&(ve(),C(O,1,1,()=>{O=null}),we()),R&&R.p&&(!b||A[1]&134217728)&&he(R,M,z,z[58],b?be(M,z[58],A,null):ge(z[58]),null);let le=Z;Z=Le(z),Z===le?~Z&&_[Z].p(z,A):(U&&(ve(),C(_[le],1,1,()=>{_[le]=null}),we()),~Z?(U=_[Z],U?U.p(z,A):(U=_[Z]=ie[Z](z),U.c()),T(U,1),U.m(t,null)):U=null),(!b||A[0]&4&&K!==(K=Ge(z[2])+" svelte-zh3kmv"))&&c(t,"class",K),(!b||A[0]&22)&&de(t,"can-collapse",z[4]&&z[1]==="")},i(z){b||(T(V),T(s.$$.fragment,z),T(d.$$.fragment,z),T(W),T(O),T(R,z),T(U),b=!0)},o(z){C(V),C(s.$$.fragment,z),C(d.$$.fragment,z),C(W),C(O),C(R,z),C(U),b=!1},d(z){z&&(I(e),I(t)),q(s),l[61](null),q(d),W&&W.d(),O&&O.d(),R&&R.d(z),~Z&&_[Z].d(),B=!1,Ze(w)}}}function yl(l,e,t){let n,{$$slots:i={},$$scope:s}=e,{class:o=void 0}=e,{apiKey:r}=e,{bbox:u=void 0}=e,{clearButtonTitle:m="clear"}=e,{clearOnBlur:a=!1}=e,{collapsed:d=!1}=e,{country:h=void 0}=e,{debounceSearch:y=200}=e,{enableReverse:g=!1}=e,{errorMessage:v="Something went wrong…"}=e,{filter:Z=()=>!0}=e,{flyTo:U=!0}=e,{fuzzyMatch:K=!0}=e,{language:b=void 0}=e,{limit:B=void 0}=e,{mapController:w=void 0}=e,{minLength:V=2}=e,{noResultsMessage:W="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:O="Search"}=e,{proximity:M=[{type:"server-geolocation"}]}=e,{reverseActive:R=g==="always"}=e,{reverseButtonTitle:ie="toggle reverse geocoding"}=e,{searchValue:_=""}=e,{showFullGeometry:Le=!0}=e,{showPlaceType:z="ifNeeded"}=e,{showResultsWhileTyping:A=!0}=e,{selectFirst:le=!0}=e,{flyToSelected:Te=!1}=e,{markerOnSelected:Pe=!0}=e,{types:ye=void 0}=e,{excludeTypes:je=!1}=e,{zoom:Ie=16}=e,{maxZoom:Me=18}=e,{apiUrl:Ne="https://api.maptiler.com/geocoding"}=e,{fetchParameters:Ke={}}=e,{iconsBaseUrl:ot="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.2/icons/"}=e,{adjustUrlQuery:Qe=f=>{}}=e;function Zt(){re.focus()}function Ut(){re.blur()}function rt(f,J=!0){t(1,_=f),J?(t(15,D=-1),ut()):(xe(),setTimeout(()=>{re.focus(),re.select()}))}function Pt(){t(14,P=void 0),t(55,E=void 0),t(15,D=-1)}function jt(){t(54,Q=[]),t(55,E=void 0)}let ze=!1,P,Q,E,at="",re,D=-1,ae,We=[],ke,Ce,Ve,Je;const Wt=new Set,me=St();it(()=>{w&&(w.setEventHandler(void 0),w.indicateReverse(!1),w.setSelectedMarker(-1),w.setMarkers(void 0,void 0))});function ut(f){if(Ce&&(clearTimeout(Ce),Ce=void 0),D>-1&&P)t(55,E=P[D]),t(1,_=E.place_type[0]==="reverse"?E.place_name:E.place_name.replace(/,.*/,"")),t(18,ae=void 0),t(54,Q=void 0),t(15,D=-1);else if(_){const J=f||!Ye(_);Xe(_,{exact:!0}).then(()=>{t(54,Q=P),t(55,E=void 0),J&&Vt()}).catch(ue=>t(18,ae=ue))}}function Ye(f){try{return fn(f,6)}catch{return!1}}async function Xe(f,{byId:J=!1,exact:ue=!1}={}){t(18,ae=void 0),ke==null||ke.abort();const fe=new AbortController;t(19,ke=fe);try{const j=Ye(f),se=new URLSearchParams;if(b!==void 0&&se.set("language",Array.isArray(b)?b.join(","):b??""),ye&&se.set("types",ye.join(",")),je&&se.set("excludeTypes",String(je)),u&&se.set("bbox",u.map(De=>De.toFixed(6)).join(",")),h&&se.set("country",Array.isArray(h)?h.join(","):h),!J&&!j){const De=await ml(w,M,fe);De&&se.set("proximity",De),(ue||!A)&&se.set("autocomplete","false"),se.set("fuzzyMatch",String(K))}B!==void 0&&(!j||(ye==null?void 0:ye.length)===1)&&se.set("limit",String(B)),se.set("key",r),Qe(se);const Oe=Ne+"/"+encodeURIComponent(j?j.decimalLongitude+","+j.decimalLatitude:f)+".json?"+se.toString();if(Oe===at){J?(t(14,P=void 0),t(55,E=We[0])):t(14,P=We);return}at=Oe;const et=await fetch(Oe,{signal:fe.signal,...Ke});if(!et.ok)throw new Error(await et.text());const tt=await et.json();me("response",{url:Oe,featureCollection:tt}),J?(t(14,P=void 0),t(55,E=tt.features[0]),We=[E]):(t(14,P=tt.features.filter(Z)),j&&P.unshift({type:"Feature",properties:{},id:"reverse_"+j.decimalLongitude+"_"+j.decimalLatitude,text:j.decimalLatitude+", "+j.decimalLongitude,place_name:j.decimalLatitude+", "+j.decimalLongitude,place_type:["reverse"],center:[j.decimalLongitude,j.decimalLatitude],bbox:[j.decimalLongitude,j.decimalLatitude,j.decimalLongitude,j.decimalLatitude],geometry:{type:"Point",coordinates:[j.decimalLongitude,j.decimalLatitude]}}),We=P,j&&re.focus())}catch(j){if(j&&typeof j=="object"&&"name"in j&&j.name==="AbortError")return;throw j}finally{fe===ke&&t(19,ke=void 0)}}function Vt(){var ue;if(!(Q!=null&&Q.length)||!U)return;const f=[180,90,-180,-90],J=!Q.some(fe=>!fe.matching_text);for(const fe of Q)if(J||!fe.matching_text)for(const j of[0,1,2,3])f[j]=Math[j<2?"min":"max"](f[j],((ue=fe.bbox)==null?void 0:ue[j])??fe.center[j%2]);w&&Q.length>0&&(E&&f[0]===f[2]&&f[1]===f[3]?w.flyTo(E.center,Ie):w.fitBounds(vt(f),50,Me))}function Ot(f){t(0,R=g==="always"),t(14,P=void 0),t(55,E=void 0),t(15,D=-1),rt(f[1].toFixed(6)+", "+cl(f[0],[-180,180],!0).toFixed(6),!1)}function Dt(f){if(!P)return;let J=f.key==="ArrowDown"?1:f.key==="ArrowUp"?-1:0;J&&(D===(le?0:-1)&&J===-1&&t(15,D=P.length),t(15,D+=J),D>=P.length&&t(15,D=-1),D<0&&le&&t(15,D=0),f.preventDefault())}function xe(f=!0){if(t(18,ae=void 0),A){if(Ce&&clearTimeout(Ce),_.length<V)return;const J=_;Ce=window.setTimeout(()=>{Xe(J).catch(ue=>t(18,ae=ue))},f?y:0)}else t(14,P=void 0),t(18,ae=void 0)}function $e(f){t(55,E=f),t(1,_=f.place_name),t(15,D=-1)}const At=()=>re.focus();function Ft(f){qe[f?"unshift":"push"](()=>{re=f,t(17,re)})}function Gt(){_=this.value,t(1,_),t(13,ze),t(27,a)}const Ht=()=>t(13,ze=!0),qt=()=>t(13,ze=!1),Nt=()=>xe(),Kt=()=>{t(1,_=""),re.focus()},Qt=()=>t(0,R=!R),Jt=()=>t(18,ae=void 0),Yt=f=>t(15,D=f),Xt=f=>$e(f),xt=()=>{le||t(15,D=-1)},$t=()=>{};return l.$$set=f=>{"class"in f&&t(2,o=f.class),"apiKey"in f&&t(25,r=f.apiKey),"bbox"in f&&t(26,u=f.bbox),"clearButtonTitle"in f&&t(3,m=f.clearButtonTitle),"clearOnBlur"in f&&t(27,a=f.clearOnBlur),"collapsed"in f&&t(4,d=f.collapsed),"country"in f&&t(28,h=f.country),"debounceSearch"in f&&t(29,y=f.debounceSearch),"enableReverse"in f&&t(5,g=f.enableReverse),"errorMessage"in f&&t(6,v=f.errorMessage),"filter"in f&&t(30,Z=f.filter),"flyTo"in f&&t(31,U=f.flyTo),"fuzzyMatch"in f&&t(32,K=f.fuzzyMatch),"language"in f&&t(33,b=f.language),"limit"in f&&t(34,B=f.limit),"mapController"in f&&t(35,w=f.mapController),"minLength"in f&&t(36,V=f.minLength),"noResultsMessage"in f&&t(7,W=f.noResultsMessage),"placeholder"in f&&t(8,O=f.placeholder),"proximity"in f&&t(37,M=f.proximity),"reverseActive"in f&&t(0,R=f.reverseActive),"reverseButtonTitle"in f&&t(9,ie=f.reverseButtonTitle),"searchValue"in f&&t(1,_=f.searchValue),"showFullGeometry"in f&&t(38,Le=f.showFullGeometry),"showPlaceType"in f&&t(10,z=f.showPlaceType),"showResultsWhileTyping"in f&&t(39,A=f.showResultsWhileTyping),"selectFirst"in f&&t(11,le=f.selectFirst),"flyToSelected"in f&&t(40,Te=f.flyToSelected),"markerOnSelected"in f&&t(41,Pe=f.markerOnSelected),"types"in f&&t(42,ye=f.types),"excludeTypes"in f&&t(43,je=f.excludeTypes),"zoom"in f&&t(44,Ie=f.zoom),"maxZoom"in f&&t(45,Me=f.maxZoom),"apiUrl"in f&&t(46,Ne=f.apiUrl),"fetchParameters"in f&&t(47,Ke=f.fetchParameters),"iconsBaseUrl"in f&&t(12,ot=f.iconsBaseUrl),"adjustUrlQuery"in f&&t(48,Qe=f.adjustUrlQuery),"$$scope"in f&&t(58,s=f.$$scope)},l.$$.update=()=>{if(l.$$.dirty[0]&134225920&&setTimeout(()=>{t(16,Ve=ze),a&&!ze&&t(1,_="")}),l.$$.dirty[0]&16386|l.$$.dirty[1]&32&&_.length<V&&(t(55,E=void 0),t(14,P=void 0),t(18,ae=void 0),t(54,Q=P)),l.$$.dirty[1]&16777344&&Le&&E&&!E.address&&E.geometry.type==="Point"&&E.place_type[0]!=="reverse"&&Xe(E.id,{byId:!0}).catch(f=>t(18,ae=f)),l.$$.dirty[1]&50356241&&(w&&E&&E.id!==Je&&U&&(!E.bbox||E.bbox[0]===E.bbox[2]&&E.bbox[1]===E.bbox[3]?w.flyTo(E.center,E.id.startsWith("poi.")||E.id.startsWith("address.")?Me:Ie):w.fitBounds(vt(E.bbox),50,Me),t(14,P=void 0),t(54,Q=void 0),t(15,D=-1)),t(56,Je=E==null?void 0:E.id)),l.$$.dirty[0]&18432&&le&&P!=null&&P.length&&t(15,D=0),l.$$.dirty[0]&2050&&(le||t(15,D=-1)),l.$$.dirty[0]&16384|l.$$.dirty[1]&8388608&&Q!==P&&t(54,Q=void 0),l.$$.dirty[0]&81921|l.$$.dirty[1]&8388624&&w&&w.setEventHandler(f=>{switch(f.type){case"mapClick":R&&Ot(f.coordinates);break;case"markerClick":{const J=P==null?void 0:P.find(ue=>ue.id===f.id);J&&$e(J)}break;case"markerMouseEnter":Q&&t(15,D=Ve?(P==null?void 0:P.findIndex(J=>J.id===f.id))??-1:-1);break;case"markerMouseLeave":Q&&t(15,D=-1);break}}),l.$$.dirty[0]&49152&&t(57,n=P==null?void 0:P[D]),l.$$.dirty[1]&67133969&&w&&n&&U&&Te&&w.flyTo(n.center,n.id.startsWith("poi.")||n.id.startsWith("address.")?Me:Ie),l.$$.dirty[1]&1040&&(Pe||w==null||w.setMarkers(void 0,void 0)),l.$$.dirty[1]&75498512&&w&&Pe&&!Q&&(w.setMarkers(n?[n]:void 0,void 0),w.setSelectedMarker(n?0:-1)),l.$$.dirty[1]&25165840&&w&&w.setMarkers(Q,E),l.$$.dirty[0]&32768|l.$$.dirty[1]&8388624&&Q&&w&&w.setSelectedMarker(D),l.$$.dirty[0]&2|l.$$.dirty[1]&16&&w){const f=Ye(_);w.setReverseMarker(f?[f.decimalLongitude,f.decimalLatitude]:void 0)}l.$$.dirty[1]&67108864&&me("select",n),l.$$.dirty[1]&16777216&&me("pick",E),l.$$.dirty[0]&81920&&me("optionsVisibilityChange",Ve&&!!P),l.$$.dirty[0]&16384&&me("featuresListed",P),l.$$.dirty[1]&8388608&&me("featuresMarked",Q),l.$$.dirty[0]&1&&me("reverseToggle",R),l.$$.dirty[0]&2&&me("queryChange",_),l.$$.dirty[0]&1|l.$$.dirty[1]&16&&w&&w.indicateReverse(R)},[R,_,o,m,d,g,v,W,O,ie,z,le,ot,ze,P,D,Ve,re,ae,ke,Wt,ut,Dt,xe,$e,r,u,a,h,y,Z,U,K,b,B,w,V,M,Le,A,Te,Pe,ye,je,Ie,Me,Ne,Ke,Qe,Zt,Ut,rt,Pt,jt,Q,E,Je,n,s,i,At,Ft,Gt,Ht,qt,Nt,Kt,Qt,Jt,Yt,Xt,xt,$t]}class kl extends X{constructor(e){super(),x(this,e,yl,bl,$,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}}function Mt(l){let e,t,n,i;return t=new kl({props:{mapController:l[1],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){e=L("div"),G(t.$$.fragment),c(e,"class",n=Ge(l[0])+" svelte-189syb7")},m(s,o){S(s,e,o),H(t,e,null),i=!0},p(s,o){const r={};o&2&&(r.mapController=s[1]),t.$set(r),(!i||o&1&&n!==(n=Ge(s[0])+" svelte-189syb7"))&&c(e,"class",n)},i(s){i||(T(t.$$.fragment,s),i=!0)},o(s){C(t.$$.fragment,s),i=!1},d(s){s&&I(e),q(t)}}}function vl(l){let e,t,n=l[1]&&Mt(l);return{c(){n&&n.c(),e=Ue()},m(i,s){n&&n.m(i,s),S(i,e,s),t=!0},p(i,[s]){i[1]?n?(n.p(i,s),s&2&&T(n,1)):(n=Mt(i),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(ve(),C(n,1,1,()=>{n=null}),we())},i(i){t||(T(n),t=!0)},o(i){C(n),t=!1},d(i){i&&I(e),n&&n.d(i)}}}function wl(l,e,t){let n;Se(l,He,o=>t(2,n=o));let{position:i="top-left"}=e,s;return dn(()=>{t(1,s=_n(n,hn))}),l.$$set=o=>{"position"in o&&t(0,i=o.position)},[i,s]}class ei extends X{constructor(e){super(),x(this,e,wl,vl,$,{position:0})}}function pl(l,e,t){t===void 0&&(t={});var n=mt(l),i=mt(e),s=Ae(i[1]-n[1]),o=Ae(i[0]-n[0]),r=Ae(n[1]),u=Ae(i[1]),m=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(r)*Math.cos(u);return gn(2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m)),t.units)}function ti(l,e){return e===void 0&&(e={}),bn(l,function(t,n){var i=n.geometry.coordinates;return t+pl(i[0],i[1],e)},0)}const Ll={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",hovering:"black",lineEndpointColor:"black",streetview:"blue",measuringLine:"cyan"},ni=10,li=10;function ii(){return Tl(["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"])}function Tl(l){return l[Math.floor(Math.random()*l.length)]}function Ml(l){let e;const t=l[16].default,n=_e(t,l,l[24],null);return{c(){n&&n.c()},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&16777216)&&he(n,t,i,i[24],e?be(t,i[24],s,null):ge(i[24]),null)},i(i){e||(T(n,i),e=!0)},o(i){C(n,i),e=!1},d(i){n&&n.d(i)}}}function zl(l){let e,t,n;function i(o){l[17](o)}let s={id:l[1],type:"circle",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[Ml]},$$scope:{ctx:l}};return l[0]!==void 0&&(s.hovered=l[0]),e=new It({props:s}),qe.push(()=>nt(e,"hovered",i)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){G(e.$$.fragment)},m(o,r){H(e,o,r),n=!0},p(o,[r]){const u={};r&2&&(u.id=o[1]),r&4&&(u.source=o[2]),r&8&&(u.sourceLayer=o[3]),r&16&&(u.beforeId=o[4]),r&32&&(u.beforeLayerType=o[5]),r&64&&(u.paint=o[6]),r&128&&(u.layout=o[7]),r&256&&(u.filter=o[8]),r&512&&(u.applyToClusters=o[9]),r&1024&&(u.minzoom=o[10]),r&2048&&(u.maxzoom=o[11]),r&4096&&(u.hoverCursor=o[12]),r&8192&&(u.manageHoverState=o[13]),r&16384&&(u.eventsIfTopMost=o[14]),r&32768&&(u.interactive=o[15]),r&16777216&&(u.$$scope={dirty:r,ctx:o}),!t&&r&1&&(t=!0,u.hovered=o[0],lt(()=>t=!1)),e.$set(u)},i(o){n||(T(e.$$.fragment,o),n=!0)},o(o){C(e.$$.fragment,o),n=!1},d(o){q(e,o)}}}function Cl(l,e,t){let{$$slots:n={},$$scope:i}=e,{id:s=Bt("circle")}=e,{source:o=void 0}=e,{sourceLayer:r=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:m=void 0}=e,{paint:a}=e,{layout:d=void 0}=e,{filter:h=void 0}=e,{applyToClusters:y=void 0}=e,{minzoom:g=void 0}=e,{maxzoom:v=void 0}=e,{hoverCursor:Z=void 0}=e,{manageHoverState:U=!1}=e,{hovered:K=null}=e,{eventsIfTopMost:b=!1}=e,{interactive:B=!0}=e;function w(_){K=_,t(0,K)}function V(_){ne.call(this,l,_)}function W(_){ne.call(this,l,_)}function O(_){ne.call(this,l,_)}function M(_){ne.call(this,l,_)}function R(_){ne.call(this,l,_)}function ie(_){ne.call(this,l,_)}return l.$$set=_=>{"id"in _&&t(1,s=_.id),"source"in _&&t(2,o=_.source),"sourceLayer"in _&&t(3,r=_.sourceLayer),"beforeId"in _&&t(4,u=_.beforeId),"beforeLayerType"in _&&t(5,m=_.beforeLayerType),"paint"in _&&t(6,a=_.paint),"layout"in _&&t(7,d=_.layout),"filter"in _&&t(8,h=_.filter),"applyToClusters"in _&&t(9,y=_.applyToClusters),"minzoom"in _&&t(10,g=_.minzoom),"maxzoom"in _&&t(11,v=_.maxzoom),"hoverCursor"in _&&t(12,Z=_.hoverCursor),"manageHoverState"in _&&t(13,U=_.manageHoverState),"hovered"in _&&t(0,K=_.hovered),"eventsIfTopMost"in _&&t(14,b=_.eventsIfTopMost),"interactive"in _&&t(15,B=_.interactive),"$$scope"in _&&t(24,i=_.$$scope)},[K,s,o,r,u,m,a,d,h,y,g,v,Z,U,b,B,n,w,V,W,O,M,R,ie,i]}class si extends X{constructor(e){super(),x(this,e,Cl,zl,$,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Sl(l,e,t){let n;const i=St();let{layer:s=void 0}=e;const{map:o}=yn();Se(l,o,a=>t(2,n=a));function r(a){i(a.type,{...a,map:o})}const u=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],m=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return it(()=>{if(n)if(s)for(const a of u)n.off(a,s,r);else for(const a of m)n.off(a,r)}),l.$$set=a=>{"layer"in a&&t(1,s=a.layer)},l.$$.update=()=>{if(l.$$.dirty&6&&n)if(s)for(const a of u)n.on(a,s,r);else for(const a of m)n.on(a,r)},[o,s,n]}class oi extends X{constructor(e){super(),x(this,e,Sl,null,$,{layer:1})}}function Il(l){let e;const t=l[8].default,n=_e(t,l,l[15],null);return{c(){n&&n.c()},m(i,s){n&&n.m(i,s),e=!0},p(i,s){n&&n.p&&(!e||s&32768)&&he(n,t,i,i[15],e?be(t,i[15],s,null):ge(i[15]),null)},i(i){e||(T(n,i),e=!0)},o(i){C(n,i),e=!1},d(i){n&&n.d(i)}}}function Bl(l){let e,t;return e=new It({props:{id:l[0],type:"raster",source:l[1],beforeId:l[2],beforeLayerType:l[3],paint:l[4],layout:l[5],minzoom:l[6],maxzoom:l[7],$$slots:{default:[Il]},$$scope:{ctx:l}}}),e.$on("click",l[9]),e.$on("dblclick",l[10]),e.$on("contextmenu",l[11]),e.$on("mouseenter",l[12]),e.$on("mousemove",l[13]),e.$on("mouseleave",l[14]),{c(){G(e.$$.fragment)},m(n,i){H(e,n,i),t=!0},p(n,[i]){const s={};i&1&&(s.id=n[0]),i&2&&(s.source=n[1]),i&4&&(s.beforeId=n[2]),i&8&&(s.beforeLayerType=n[3]),i&16&&(s.paint=n[4]),i&32&&(s.layout=n[5]),i&64&&(s.minzoom=n[6]),i&128&&(s.maxzoom=n[7]),i&32768&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function Rl(l,e,t){let{$$slots:n={},$$scope:i}=e,{id:s=Bt("raster-layer")}=e,{source:o=void 0}=e,{beforeId:r=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:m}=e,{layout:a=void 0}=e,{minzoom:d=void 0}=e,{maxzoom:h=void 0}=e;function y(b){ne.call(this,l,b)}function g(b){ne.call(this,l,b)}function v(b){ne.call(this,l,b)}function Z(b){ne.call(this,l,b)}function U(b){ne.call(this,l,b)}function K(b){ne.call(this,l,b)}return l.$$set=b=>{"id"in b&&t(0,s=b.id),"source"in b&&t(1,o=b.source),"beforeId"in b&&t(2,r=b.beforeId),"beforeLayerType"in b&&t(3,u=b.beforeLayerType),"paint"in b&&t(4,m=b.paint),"layout"in b&&t(5,a=b.layout),"minzoom"in b&&t(6,d=b.minzoom),"maxzoom"in b&&t(7,h=b.maxzoom),"$$scope"in b&&t(15,i=b.$$scope)},[s,o,r,u,m,a,d,h,n,y,g,v,Z,U,K,i]}class ri extends X{constructor(e){super(),x(this,e,Rl,Bl,$,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}function El(l){let e;return{c(){e=oe("Luc Chaissac")},m(t,n){S(t,e,n)},d(t){t&&I(e)}}}function Zl(l){let e,t,n,i,s,o,r,u,m;return u=new kn({props:{href:"https://icon-icons.com/icon/screenshot-cursor-camera/100181",$$slots:{default:[El]},$$scope:{ctx:l}}}),{c(){e=L("ul"),t=L("li"),t.innerHTML=`<b>Click</b>
    on the map to open a new tab with a 3rd-party imagery provider`,n=F(),i=L("li"),i.innerHTML=`Press <b>Escape</b>
    to exit this mode`,s=F(),o=L("li"),r=oe("Cursor by "),G(u.$$.fragment)},m(a,d){S(a,e,d),k(e,t),k(e,n),k(e,i),k(e,s),k(e,o),k(o,r),H(u,o,null),m=!0},p(a,[d]){const h={};d&1&&(h.$$scope={dirty:d,ctx:a}),u.$set(h)},i(a){m||(T(u.$$.fragment,a),m=!0)},o(a){C(u.$$.fragment,a),m=!1},d(a){a&&I(e),q(u)}}}class Ul extends X{constructor(e){super(),x(this,e,null,Zl,$,{})}}const Pl="/atip/assets/camera_cursor-824d29b6.svg",{window:jl}=vn;function zt(l){let e,t,n,i;const s=[Vl,Wl],o=[];function r(u,m){return u[0]?0:1}return e=r(l),t=o[e]=s[e](l),{c(){t.c(),n=Ue()},m(u,m){o[e].m(u,m),S(u,n,m),i=!0},p(u,m){let a=e;e=r(u),e===a?o[e].p(u,m):(ve(),C(o[a],1,1,()=>{o[a]=null}),we(),t=o[e],t?t.p(u,m):(t=o[e]=s[e](u),t.c()),T(t,1),t.m(n.parentNode,n))},i(u){i||(T(t),i=!0)},o(u){C(t),i=!1},d(u){u&&I(n),o[e].d(u)}}}function Wl(l){let e,t;return e=new st({props:{$$slots:{default:[Ol]},$$scope:{ctx:l}}}),e.$on("click",l[6]),{c(){G(e.$$.fragment)},m(n,i){H(e,n,i),t=!0},p(n,i){const s={};i&4096&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function Vl(l){let e,t,n,i,s,o,r;e=new st({props:{$$slots:{default:[Dl]},$$scope:{ctx:l}}}),e.$on("click",l[4]);function u(a){l[5](a)}let m={legend:"Source",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return l[2].streetViewImagery!==void 0&&(m.value=l[2].streetViewImagery),n=new pn({props:m}),qe.push(()=>nt(n,"value",u)),o=new Zn({props:{label:"Help",$$slots:{default:[Al]},$$scope:{ctx:l}}}),{c(){G(e.$$.fragment),t=F(),G(n.$$.fragment),s=F(),G(o.$$.fragment)},m(a,d){H(e,a,d),S(a,t,d),H(n,a,d),S(a,s,d),H(o,a,d),r=!0},p(a,d){const h={};d&4096&&(h.$$scope={dirty:d,ctx:a}),e.$set(h);const y={};!i&&d&4&&(i=!0,y.value=a[2].streetViewImagery,lt(()=>i=!1)),n.$set(y);const g={};d&4096&&(g.$$scope={dirty:d,ctx:a}),o.$set(g)},i(a){r||(T(e.$$.fragment,a),T(n.$$.fragment,a),T(o.$$.fragment,a),r=!0)},o(a){C(e.$$.fragment,a),C(n.$$.fragment,a),C(o.$$.fragment,a),r=!1},d(a){a&&(I(t),I(s)),q(e,a),q(n,a),q(o,a)}}}function Ol(l){let e;return{c(){e=oe("Enable Street View")},m(t,n){S(t,e,n)},d(t){t&&I(e)}}}function Dl(l){let e;return{c(){e=oe("Disable Street View")},m(t,n){S(t,e,n)},d(t){t&&I(e)}}}function Al(l){let e,t;return e=new Ul({}),{c(){G(e.$$.fragment)},m(n,i){H(e,n,i),t=!0},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function Fl(l){let e,t,n,i,s=l[1]&&zt(l);return{c(){s&&s.c(),e=Ue()},m(o,r){s&&s.m(o,r),S(o,e,r),t=!0,n||(i=Y(jl,"keydown",l[3]),n=!0)},p(o,[r]){o[1]?s?(s.p(o,r),r&2&&T(s,1)):(s=zt(o),s.c(),T(s,1),s.m(e.parentNode,e)):s&&(ve(),C(s,1,1,()=>{s=null}),we())},i(o){t||(T(s),t=!0)},o(o){C(s),t=!1},d(o){o&&I(e),s&&s.d(o),n=!1,i()}}}function Gl(l,e,t){let n,i;Se(l,dt,v=>t(2,n=v)),Se(l,He,v=>t(8,i=v));let{enabled:s}=e,{showControls:o=!0}=e,r=[];function u(){i.on("click",a),i.getCanvas().style.cursor=`url(${Pl}), auto`,r=wn();for(let v of r)v.setProperty(i,"line-color",Ll.streetview)}function m(){if(i){i.off("click",a),i.getCanvas().style.cursor="inherit";for(let v of r)v.returnToDefaultPaintValues(i);r=[]}}it(m);function a(v){if(!s)return;let Z=v.lngLat.lng,U=v.lngLat.lat;n.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${U},${Z}&cbp=11,0,0,0,0`,"_blank"):n.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${U}~${Z}&style=x`,"_blank")}function d(v){s&&v.key=="Escape"&&(v.stopPropagation(),t(0,s=!1))}const h=()=>t(0,s=!1);function y(v){l.$$.not_equal(n.streetViewImagery,v)&&(n.streetViewImagery=v,dt.set(n))}const g=()=>t(0,s=!0);return l.$$set=v=>{"enabled"in v&&t(0,s=v.enabled),"showControls"in v&&t(1,o=v.showControls)},l.$$.update=()=>{l.$$.dirty&1&&(s?u():m())},[s,o,n,d,h,y,g]}class ai extends X{constructor(e){super(),x(this,e,Gl,Fl,$,{enabled:0,showControls:1})}}const Hl="/atip/assets/zoom_out_map-b2e1091a.svg";function ql(l){let e,t;return{c(){e=L("img"),te(e.src,t=Hl)||c(e,"src",t),c(e,"alt","Zoom to show entire boundary")},m(n,i){S(n,e,i)},p:N,d(n){n&&I(e)}}}function Nl(l){let e,t;return e=new st({props:{title:"Zoom to show entire boundary",$$slots:{default:[ql]},$$scope:{ctx:l}}}),e.$on("click",l[0]),{c(){G(e.$$.fragment)},m(n,i){H(e,n,i),t=!0},p(n,[i]){const s={};i&8&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(T(e.$$.fragment,n),t=!0)},o(n){C(e.$$.fragment,n),t=!1},d(n){q(e,n)}}}function Kl(l,e,t){let n;Se(l,He,o=>t(2,n=o));let{boundaryGeojson:i}=e;function s(){let o=Ln(i);Number.isFinite(o[0])&&n.fitBounds(o,{padding:20,animate:!0,duration:500})}return l.$$set=o=>{"boundaryGeojson"in o&&t(1,i=o.boundaryGeojson)},[s,i]}class ui extends X{constructor(e){super(),x(this,e,Kl,Nl,$,{boundaryGeojson:1})}}export{Jl as B,si as C,ei as G,oi as M,ri as R,ai as S,ui as Z,ti as a,li as b,ni as c,Ll as d,pl as e,Zn as f,Yl as g,Xl as h,Ul as i,Wn as j,$l as k,xl as l,ii as r};
