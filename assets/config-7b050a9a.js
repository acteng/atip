import{S as we,p as pe,a as de,C as rt,M as st,g as lt,b as ut,t as ot,r as Me}from"./Modal-20527c27.js";import{S as J,i as D,s as H,c as N,m as O,h as d,j as b,l as F,a as M,e as R,d as B,f as $,a8 as Q,a9 as re,k as v,t as G,g as E,A as fe,aa as Ke,ab as ft,r as T,u as I,G as ne,w as A,x as ge,af as Oe,C as x,v as ee,q as ce,T as he,y as Xe,E as le,H as at,aA as oe,ay as pt}from"./index-f5a610d5.js";import{a as ae,v as ue,E as be,R as se}from"./Radio-e367f492.js";import{S as _e,B as ct}from"./SecondaryButton-0335e6e5.js";import{e as $e}from"./files-de14d72c.js";import{W as _t}from"./WarningButton-48eeb88a.js";function Pe(t){let e,i,n=ve(t[0])+"",s;return{c(){e=R("div"),i=G("Â£"),s=G(n),B(e,"class","govuk-hint")},m(o,r){$(o,e,r),E(e,i),E(e,s)},p(o,r){r&1&&n!==(n=ve(o[0])+"")&&fe(s,n)},d(o){o&&v(e)}}}function mt(t){let e;return{c(){e=G("multiply by 1 million")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function dt(t){let e,i,n,s,o,r,u,l,f;e=new be({props:{errorMessage:Ue(t[2])}});let a=t[0]!=null&&Pe(t);return r=new _e({props:{disabled:t[0]==null||t[0]>1e3,$$slots:{default:[mt]},$$scope:{ctx:t}}}),r.$on("click",t[4]),{c(){N(e.$$.fragment),i=M(),a&&a.c(),n=M(),s=R("input"),o=M(),N(r.$$.fragment),B(s,"type","text"),B(s,"inputmode","numeric"),B(s,"class","govuk-input govuk-input--width-10"),B(s,"id",t[3])},m(c,p){O(e,c,p),$(c,i,p),a&&a.m(c,p),$(c,n,p),$(c,s,p),Q(s,t[2]),$(c,o,p),O(r,c,p),u=!0,l||(f=re(s,"input",t[5]),l=!0)},p(c,p){const w={};p&4&&(w.errorMessage=Ue(c[2])),e.$set(w),c[0]!=null?a?a.p(c,p):(a=Pe(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),p&4&&s.value!==c[2]&&Q(s,c[2]);const C={};p&1&&(C.disabled=c[0]==null||c[0]>1e3),p&128&&(C.$$scope={dirty:p,ctx:c}),r.$set(C)},i(c){u||(d(e.$$.fragment,c),d(r.$$.fragment,c),u=!0)},o(c){b(e.$$.fragment,c),b(r.$$.fragment,c),u=!1},d(c){c&&(v(i),v(n),v(s),v(o)),F(e,c),a&&a.d(c),F(r,c),l=!1,f()}}}function gt(t){let e,i;return e=new ae({props:{label:t[1],id:t[3],$$slots:{default:[dt]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(n,s){O(e,n,s),i=!0},p(n,[s]){const o={};s&2&&(o.label=n[1]),s&133&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function Ye(t){if(t!="")return parseFloat(t.replaceAll(",",""))}function Ue(t){let e=Ye(t);return e==null?"":isNaN(e)?"Please enter a valid number":e<0?"Please enter a positive number":""}function ve(t){return t.toLocaleString()}function ht(t,e,i){let{label:n}=e,{value:s}=e,o=ue(),r=s==null?"":ve(s);function u(a){i(0,s=Ye(a))}function l(){i(2,r=ve(s*1e6))}function f(){r=this.value,i(2,r)}return t.$$set=a=>{"label"in a&&i(1,n=a.label),"value"in a&&i(0,s=a.value)},t.$$.update=()=>{t.$$.dirty&4&&u(r)},[s,n,r,o,l,f]}class bt extends J{constructor(e){super(),D(this,e,ht,gt,H,{label:1,value:0})}}function $t(t){let e,i,n,s,o,r,u;return e=new be({props:{errorMessage:t[5](t[2])}}),{c(){N(e.$$.fragment),i=M(),n=R("input"),B(n,"type","text"),B(n,"inputmode","numeric"),B(n,"class",s=`govuk-input govuk-input--width-${t[1]}`),B(n,"id",t[3])},m(l,f){O(e,l,f),$(l,i,f),$(l,n,f),Q(n,t[2]),o=!0,r||(u=[re(n,"input",t[9]),re(n,"change",t[4])],r=!0)},p(l,f){const a={};f&4&&(a.errorMessage=l[5](l[2])),e.$set(a),(!o||f&2&&s!==(s=`govuk-input govuk-input--width-${l[1]}`))&&B(n,"class",s),f&4&&n.value!==l[2]&&Q(n,l[2])},i(l){o||(d(e.$$.fragment,l),o=!0)},o(l){b(e.$$.fragment,l),o=!1},d(l){l&&(v(i),v(n)),F(e,l),r=!1,Ke(u)}}}function vt(t){let e,i;return e=new ae({props:{label:t[0],id:t[3],$$slots:{default:[$t]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(n,s){O(e,n,s),i=!0},p(n,[s]){const o={};s&1&&(o.label=n[0]),s&1030&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function kt(t,e,i){let{label:n}=e,{value:s}=e,{width:o}=e,{min:r=void 0}=e,{max:u=void 0}=e,l=s==null?void 0:s.toString(),f=ue();function a(){i(6,s=l==null?void 0:parseInt(l,10))}function c(w){if(w==""||w==null)return"";if(w.includes("."))return"Please enter a number without decimals";let C=Number(w);return isNaN(C)?"Please enter a valid number":r!=null&&C<r?`Please enter a number that's at least ${r};`:u!=null&&C>u?`Please enter a number that's at most ${u};`:""}function p(){l=this.value,i(2,l)}return t.$$set=w=>{"label"in w&&i(0,n=w.label),"value"in w&&i(6,s=w.value),"width"in w&&i(1,o=w.width),"min"in w&&i(7,r=w.min),"max"in w&&i(8,u=w.max)},[n,o,l,f,a,c,s,r,u,p]}class Ne extends J{constructor(e){super(),D(this,e,kt,vt,H,{label:0,value:6,width:1,min:7,max:8})}}function Te(t){let e,i;return{c(){e=R("div"),i=G(t[2]),B(e,"class","govuk-hint")},m(n,s){$(n,e,s),E(e,i)},p(n,s){s&4&&fe(i,n[2])},d(n){n&&v(e)}}}function wt(t){let e,i,n,s,o,r,u;e=new be({props:{errorMessage:t[4]}});let l=t[2]&&Te(t);return{c(){N(e.$$.fragment),i=M(),l&&l.c(),n=M(),s=R("textarea"),B(s,"class","govuk-textarea"),B(s,"id",t[5]),B(s,"rows",t[3])},m(f,a){O(e,f,a),$(f,i,a),l&&l.m(f,a),$(f,n,a),$(f,s,a),Q(s,t[0]),o=!0,r||(u=re(s,"input",t[6]),r=!0)},p(f,a){const c={};a&16&&(c.errorMessage=f[4]),e.$set(c),f[2]?l?l.p(f,a):(l=Te(f),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),(!o||a&8)&&B(s,"rows",f[3]),a&1&&Q(s,f[0])},i(f){o||(d(e.$$.fragment,f),o=!0)},o(f){b(e.$$.fragment,f),o=!1},d(f){f&&(v(i),v(n),v(s)),F(e,f),l&&l.d(f),r=!1,u()}}}function yt(t){let e,i;return e=new ae({props:{label:t[1],id:t[5],$$slots:{default:[wt]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(n,s){O(e,n,s),i=!0},p(n,[s]){const o={};s&2&&(o.label=n[1]),s&157&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function St(t,e,i){let{label:n}=e,{hint:s=""}=e,{value:o}=e,{rows:r=5}=e,{errorMessage:u=""}=e,l=ue();function f(){o=this.value,i(0,o)}return t.$$set=a=>{"label"in a&&i(1,n=a.label),"hint"in a&&i(2,s=a.hint),"value"in a&&i(0,o=a.value),"rows"in a&&i(3,r=a.rows),"errorMessage"in a&&i(4,u=a.errorMessage)},[o,n,s,r,u,l,f]}class ye extends J{constructor(e){super(),D(this,e,St,yt,H,{label:1,hint:2,value:0,rows:3,errorMessage:4})}}function jt(t){let e,i,n,s,o,r;return e=new be({props:{errorMessage:t[2]}}),{c(){N(e.$$.fragment),i=M(),n=R("input"),B(n,"type","text"),B(n,"class","govuk-input"),B(n,"id",t[3])},m(u,l){O(e,u,l),$(u,i,l),$(u,n,l),Q(n,t[0]),s=!0,o||(r=[re(n,"input",t[6]),re(n,"change",t[5])],o=!0)},p(u,l){const f={};l&4&&(f.errorMessage=u[2]),e.$set(f),l&1&&n.value!==u[0]&&Q(n,u[0])},i(u){s||(d(e.$$.fragment,u),s=!0)},o(u){b(e.$$.fragment,u),s=!1},d(u){u&&(v(i),v(n)),F(e,u),o=!1,Ke(r)}}}function qt(t){let e,i;return e=new ae({props:{label:t[1],id:t[3],$$slots:{default:[jt]},$$scope:{ctx:t}}}),{c(){N(e.$$.fragment)},m(n,s){O(e,n,s),i=!0},p(n,[s]){const o={};s&2&&(o.label=n[1]),s&133&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function Nt(t,e,i){let n,{label:s}=e,{value:o}=e,{required:r=!1}=e,u=ue();function l(a){ft.call(this,t,a)}function f(){o=this.value,i(0,o)}return t.$$set=a=>{"label"in a&&i(1,s=a.label),"value"in a&&i(0,o=a.value),"required"in a&&i(4,r=a.required)},t.$$.update=()=>{t.$$.dirty&17&&i(2,n=r&&(o==null||o=="")?"Required":"")},[o,s,n,u,r,l,f]}class Fe extends J{constructor(e){super(),D(this,e,Nt,qt,H,{label:1,value:0,required:4})}}function Ie(t){let e,i;return e=new _e({props:{disabled:!t[2],$$slots:{default:[Ot]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){N(e.$$.fragment)},m(n,s){O(e,n,s),i=!0},p(n,s){const o={};s&4&&(o.disabled=!n[2]),s&4096&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function Ot(t){let e;return{c(){e=G("Auto-fill")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function Ft(t){let e,i,n,s,o,r,u=t[0].length_meters&&Ie(t);return{c(){e=R("input"),i=M(),u&&u.c(),n=ne(),B(e,"type","text"),B(e,"class","govuk-input"),B(e,"id",t[5])},m(l,f){$(l,e,f),Q(e,t[0].name),$(l,i,f),u&&u.m(l,f),$(l,n,f),s=!0,o||(r=re(e,"input",t[6]),o=!0)},p(l,f){f&1&&e.value!==l[0].name&&Q(e,l[0].name),l[0].length_meters?u?(u.p(l,f),f&1&&d(u,1)):(u=Ie(l),u.c(),d(u,1),u.m(n.parentNode,n)):u&&(x(),b(u,1,1,()=>{u=null}),ee())},i(l){s||(d(u),s=!0)},o(l){b(u),s=!1},d(l){l&&(v(e),v(i),v(n)),u&&u.d(l),o=!1,r()}}}function Ae(t){let e,i,n=pe(t[0].length_meters)+"",s;return{c(){e=R("p"),i=G("Length: "),s=G(n)},m(o,r){$(o,e,r),E(e,i),E(e,s)},p(o,r){r&1&&n!==(n=pe(o[0].length_meters)+"")&&fe(s,n)},d(o){o&&v(e)}}}function Ct(t){let e,i,n,s,o,r,u,l,f,a,c,p,w;e=new ae({props:{label:"Name",id:t[5],$$slots:{default:[Ft]},$$scope:{ctx:t}}});function C(q){t[9](q)}let P={label:"Scheme",choices:Object.values(t[3].schemes).map(t[8])};t[0].scheme_reference!==void 0&&(P.value=t[0].scheme_reference),n=new we({props:P}),T.push(()=>I(n,"value",C));function k(q){t[10](q)}let m={label:"Type",choices:[["area","Area"],["route","Route"],["crossing","Crossing"],["other","Other"]],inlineSmall:!0,required:!0};t[0].intervention_type!==void 0&&(m.value=t[0].intervention_type),r=new se({props:m}),T.push(()=>I(r,"value",k));function _(q){t[11](q)}let g={label:"Description"};t[0].description!==void 0&&(g.value=t[0].description),f=new ye({props:g}),T.push(()=>I(f,"value",_));let U=t[0].length_meters&&Ae(t);return{c(){N(e.$$.fragment),i=M(),N(n.$$.fragment),o=M(),N(r.$$.fragment),l=M(),N(f.$$.fragment),c=M(),U&&U.c(),p=ne()},m(q,L){O(e,q,L),$(q,i,L),O(n,q,L),$(q,o,L),O(r,q,L),$(q,l,L),O(f,q,L),$(q,c,L),U&&U.m(q,L),$(q,p,L),w=!0},p(q,[L]){const S={};L&4101&&(S.$$scope={dirty:L,ctx:q}),e.$set(S);const Z={};L&8&&(Z.choices=Object.values(q[3].schemes).map(q[8])),!s&&L&1&&(s=!0,Z.value=q[0].scheme_reference,A(()=>s=!1)),n.$set(Z);const z={};!u&&L&1&&(u=!0,z.value=q[0].intervention_type,A(()=>u=!1)),r.$set(z);const K={};!a&&L&1&&(a=!0,K.value=q[0].description,A(()=>a=!1)),f.$set(K),q[0].length_meters?U?U.p(q,L):(U=Ae(q),U.c(),U.m(p.parentNode,p)):U&&(U.d(1),U=null)},i(q){w||(d(e.$$.fragment,q),d(n.$$.fragment,q),d(r.$$.fragment,q),d(f.$$.fragment,q),w=!0)},o(q){b(e.$$.fragment,q),b(n.$$.fragment,q),b(r.$$.fragment,q),b(f.$$.fragment,q),w=!1},d(q){q&&(v(i),v(o),v(l),v(c),v(p)),F(e,q),F(n,q),F(r,q),F(f,q),U&&U.d(q)}}}function Mt(t,e,i){let n,s,o=ce,r=()=>(o(),o=he(u,m=>i(3,s=m)),u);ge(t,Oe,m=>i(2,n=m)),t.$$.on_destroy.push(()=>o());let{gjSchemes:u}=e;r();let{props:l}=e;function f(){try{i(0,l.name=n.inner.routeNameForWaypoints(l.waypoints),l)}catch(m){window.alert(`Couldn't auto-name route: ${m}`)}}let a=ue();function c(){l.name=this.value,i(0,l)}const p=()=>f(),w=m=>[m.scheme_reference,Se(m)];function C(m){t.$$.not_equal(l.scheme_reference,m)&&(l.scheme_reference=m,i(0,l))}function P(m){t.$$.not_equal(l.intervention_type,m)&&(l.intervention_type=m,i(0,l))}function k(m){t.$$.not_equal(l.description,m)&&(l.description=m,i(0,l))}return t.$$set=m=>{"gjSchemes"in m&&r(i(1,u=m.gjSchemes)),"props"in m&&i(0,l=m.props)},[l,u,n,s,f,a,c,p,w,C,P,k]}class Pt extends J{constructor(e){super(),D(this,e,Mt,Ct,H,{gjSchemes:1,props:0})}}function Le(t){let e,i;return e=new _e({props:{disabled:!t[2],$$slots:{default:[Ut]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){N(e.$$.fragment)},m(n,s){O(e,n,s),i=!0},p(n,s){const o={};s&4&&(o.disabled=!n[2]),s&16384&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function Ut(t){let e;return{c(){e=G("Auto-fill")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function Tt(t){let e,i,n,s,o,r,u=t[0].length_meters&&Le(t);return{c(){e=R("input"),i=M(),u&&u.c(),n=ne(),B(e,"type","text"),B(e,"class","govuk-input"),B(e,"id",t[5])},m(l,f){$(l,e,f),Q(e,t[0].name),$(l,i,f),u&&u.m(l,f),$(l,n,f),s=!0,o||(r=re(e,"input",t[6]),o=!0)},p(l,f){f&1&&e.value!==l[0].name&&Q(e,l[0].name),l[0].length_meters?u?(u.p(l,f),f&1&&d(u,1)):(u=Le(l),u.c(),d(u,1),u.m(n.parentNode,n)):u&&(x(),b(u,1,1,()=>{u=null}),ee())},i(l){s||(d(u),s=!0)},o(l){b(u),s=!1},d(l){l&&(v(e),v(i),v(n)),u&&u.d(l),o=!1,r()}}}function Be(t){let e,i,n,s,o,r,u,l,f;function a(k){t[10](k)}let c={label:"Type",choices:[["area","Area"],["route","Route"],["crossing","Crossing"],["modal filter","Modal Filter"],["junction treatment","Junction Treatment"],["other","Other"]]};t[0].v2.intervention_type!==void 0&&(c.value=t[0].v2.intervention_type),e=new se({props:c}),T.push(()=>I(e,"value",a));function p(k){t[11](k)}let w={label:"Intended uses",choices:[["cycling","Only cycling"],["walking_wheeling","Only walking and wheeling"],["all","Cyclists, walking, and wheeling"]]};t[0].v2.intended_uses!==void 0&&(w.value=t[0].v2.intended_uses),s=new se({props:w}),T.push(()=>I(s,"value",p));function C(k){t[12](k)}let P={label:"What infrastructure are you mapping?",choices:[["new","Something completely new"],["improvement","Improvements to something already existing"],["existing","Something existing with no changes planned"]],inlineSmall:!0};return t[0].v2.work_type!==void 0&&(P.value=t[0].v2.work_type),u=new se({props:P}),T.push(()=>I(u,"value",C)),{c(){N(e.$$.fragment),n=M(),N(s.$$.fragment),r=M(),N(u.$$.fragment)},m(k,m){O(e,k,m),$(k,n,m),O(s,k,m),$(k,r,m),O(u,k,m),f=!0},p(k,m){const _={};!i&&m&1&&(i=!0,_.value=k[0].v2.intervention_type,A(()=>i=!1)),e.$set(_);const g={};!o&&m&1&&(o=!0,g.value=k[0].v2.intended_uses,A(()=>o=!1)),s.$set(g);const U={};!l&&m&1&&(l=!0,U.value=k[0].v2.work_type,A(()=>l=!1)),u.$set(U)},i(k){f||(d(e.$$.fragment,k),d(s.$$.fragment,k),d(u.$$.fragment,k),f=!0)},o(k){b(e.$$.fragment,k),b(s.$$.fragment,k),b(u.$$.fragment,k),f=!1},d(k){k&&(v(n),v(r)),F(e,k),F(s,k),F(u,k)}}}function Ee(t){let e,i,n=pe(t[0].length_meters)+"",s;return{c(){e=R("p"),i=G("Length: "),s=G(n)},m(o,r){$(o,e,r),E(e,i),E(e,s)},p(o,r){r&1&&n!==(n=pe(o[0].length_meters)+"")&&fe(s,n)},d(o){o&&v(e)}}}function It(t){let e,i,n,s,o,r,u,l,f,a,c;e=new ae({props:{label:"Name",id:t[5],$$slots:{default:[Tt]},$$scope:{ctx:t}}});function p(_){t[9](_)}let w={label:"Scheme",choices:Object.values(t[3].schemes).map(t[8])};t[0].scheme_reference!==void 0&&(w.value=t[0].scheme_reference),n=new we({props:w}),T.push(()=>I(n,"value",p));let C=t[0].v2&&Be(t);function P(_){t[13](_)}let k={label:"Description"};t[0].description!==void 0&&(k.value=t[0].description),u=new ye({props:k}),T.push(()=>I(u,"value",P));let m=t[0].length_meters&&Ee(t);return{c(){N(e.$$.fragment),i=M(),N(n.$$.fragment),o=M(),C&&C.c(),r=M(),N(u.$$.fragment),f=M(),m&&m.c(),a=ne()},m(_,g){O(e,_,g),$(_,i,g),O(n,_,g),$(_,o,g),C&&C.m(_,g),$(_,r,g),O(u,_,g),$(_,f,g),m&&m.m(_,g),$(_,a,g),c=!0},p(_,[g]){const U={};g&16389&&(U.$$scope={dirty:g,ctx:_}),e.$set(U);const q={};g&8&&(q.choices=Object.values(_[3].schemes).map(_[8])),!s&&g&1&&(s=!0,q.value=_[0].scheme_reference,A(()=>s=!1)),n.$set(q),_[0].v2?C?(C.p(_,g),g&1&&d(C,1)):(C=Be(_),C.c(),d(C,1),C.m(r.parentNode,r)):C&&(x(),b(C,1,1,()=>{C=null}),ee());const L={};!l&&g&1&&(l=!0,L.value=_[0].description,A(()=>l=!1)),u.$set(L),_[0].length_meters?m?m.p(_,g):(m=Ee(_),m.c(),m.m(a.parentNode,a)):m&&(m.d(1),m=null)},i(_){c||(d(e.$$.fragment,_),d(n.$$.fragment,_),d(C),d(u.$$.fragment,_),c=!0)},o(_){b(e.$$.fragment,_),b(n.$$.fragment,_),b(C),b(u.$$.fragment,_),c=!1},d(_){_&&(v(i),v(o),v(r),v(f),v(a)),F(e,_),F(n,_),C&&C.d(_),F(u,_),m&&m.d(_)}}}function At(t,e,i){let n,s,o=ce,r=()=>(o(),o=he(u,g=>i(3,s=g)),u);ge(t,Oe,g=>i(2,n=g)),t.$$.on_destroy.push(()=>o());let{gjSchemes:u}=e;r();let{props:l}=e;l.v2||(l.v2={intervention_type:"",intended_uses:"",work_type:""});function f(){try{i(0,l.name=n.inner.routeNameForWaypoints(l.waypoints),l)}catch(g){window.alert(`Couldn't auto-name route: ${g}`)}}let a=ue();function c(){l.name=this.value,i(0,l)}const p=()=>f(),w=g=>[g.scheme_reference,Se(g)];function C(g){t.$$.not_equal(l.scheme_reference,g)&&(l.scheme_reference=g,i(0,l))}function P(g){t.$$.not_equal(l.v2.intervention_type,g)&&(l.v2.intervention_type=g,i(0,l))}function k(g){t.$$.not_equal(l.v2.intended_uses,g)&&(l.v2.intended_uses=g,i(0,l))}function m(g){t.$$.not_equal(l.v2.work_type,g)&&(l.v2.work_type=g,i(0,l))}function _(g){t.$$.not_equal(l.description,g)&&(l.description=g,i(0,l))}return t.$$set=g=>{"gjSchemes"in g&&r(i(1,u=g.gjSchemes)),"props"in g&&i(0,l=g.props)},[l,u,n,s,f,a,c,p,w,C,P,k,m,_]}class Lt extends J{constructor(e){super(),D(this,e,At,It,H,{gjSchemes:1,props:0})}}function We(t,e,i){const n=t.slice();return n[9]=e[i],n[10]=e,n[11]=i,n}function Bt(t){let e;return{c(){e=G("Is the development fully funded?")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function Et(t){let e;return{c(){e=G("Is the construction fully funded?")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function Wt(t){let e,i,n;function s(r){t[6](r,t[9])}let o={$$slots:{default:[Rt]},$$scope:{ctx:t}};return t[0].funding_sources[t[9]]!==void 0&&(o.checked=t[0].funding_sources[t[9]]),e=new de({props:o}),T.push(()=>I(e,"checked",s)),{c(){N(e.$$.fragment)},m(r,u){O(e,r,u),n=!0},p(r,u){t=r;const l={};u&4096&&(l.$$scope={dirty:u,ctx:t}),!i&&u&3&&(i=!0,l.checked=t[0].funding_sources[t[9]],A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function Rt(t){let e=t[9].toUpperCase()+"",i,n;return{c(){i=G(e),n=M()},m(s,o){$(s,i,o),$(s,n,o)},p:ce,d(s){s&&(v(i),v(n))}}}function Re(t){let e,i,n=t[9]!="other"&&Wt(t);return{c(){n&&n.c(),e=ne()},m(s,o){n&&n.m(s,o),$(s,e,o),i=!0},p(s,o){s[9]!="other"&&n.p(s,o)},i(s){i||(d(n),i=!0)},o(s){b(n),i=!1},d(s){s&&v(e),n&&n.d(s)}}}function Gt(t){let e,i,n=$e(t[1]),s=[];for(let r=0;r<n.length;r+=1)s[r]=Re(We(t,n,r));const o=r=>b(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=ne()},m(r,u){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(r,u);$(r,e,u),i=!0},p(r,u){if(u&3){n=$e(r[1]);let l;for(l=0;l<n.length;l+=1){const f=We(r,n,l);s[l]?(s[l].p(f,u),d(s[l],1)):(s[l]=Re(f),s[l].c(),d(s[l],1),s[l].m(e.parentNode,e))}for(x(),l=n.length;l<s.length;l+=1)o(l);ee()}},i(r){if(!i){for(let u=0;u<n.length;u+=1)d(s[u]);i=!0}},o(r){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)b(s[u]);i=!1},d(r){r&&v(e),Xe(s,r)}}}function Jt(t){let e,i,n,s,o,r,u,l,f,a,c,p,w,C,P,k,m,_,g;function U(h){t[3](h)}let q={label:"Cost (GBP)"};t[0].budget!==void 0&&(q.value=t[0].budget),s=new bt({props:q}),T.push(()=>I(s,"value",U));function L(h){t[4](h)}let S={$$slots:{default:[Bt]},$$scope:{ctx:t}};t[0].development_funded!==void 0&&(S.checked=t[0].development_funded),u=new de({props:S}),T.push(()=>I(u,"checked",L));function Z(h){t[5](h)}let z={$$slots:{default:[Et]},$$scope:{ctx:t}};t[0].construction_funded!==void 0&&(z.checked=t[0].construction_funded),a=new de({props:z}),T.push(()=>I(a,"checked",Z)),P=new rt({props:{$$slots:{default:[Gt]},$$scope:{ctx:t}}});function K(h){t[7](h)}let te={label:"Other funding sources"};return t[0].funding_sources.other!==void 0&&(te.value=t[0].funding_sources.other),m=new Fe({props:te}),T.push(()=>I(m,"value",K)),{c(){e=R("fieldset"),i=R("legend"),i.textContent="Budget",n=M(),N(s.$$.fragment),r=M(),N(u.$$.fragment),f=M(),N(a.$$.fragment),p=M(),w=R("p"),w.textContent="Funding sources",C=M(),N(P.$$.fragment),k=M(),N(m.$$.fragment),B(i,"class","govuk-fieldset__legend"),B(e,"class","govuk-fieldset svelte-1bxyfcq")},m(h,y){$(h,e,y),E(e,i),E(e,n),O(s,e,null),E(e,r),O(u,e,null),E(e,f),O(a,e,null),E(e,p),E(e,w),E(e,C),O(P,e,null),E(e,k),O(m,e,null),g=!0},p(h,[y]){const j={};!o&&y&1&&(o=!0,j.value=h[0].budget,A(()=>o=!1)),s.$set(j);const W={};y&4096&&(W.$$scope={dirty:y,ctx:h}),!l&&y&1&&(l=!0,W.checked=h[0].development_funded,A(()=>l=!1)),u.$set(W);const V={};y&4096&&(V.$$scope={dirty:y,ctx:h}),!c&&y&1&&(c=!0,V.checked=h[0].construction_funded,A(()=>c=!1)),a.$set(V);const X={};y&4097&&(X.$$scope={dirty:y,ctx:h}),P.$set(X);const Y={};!_&&y&1&&(_=!0,Y.value=h[0].funding_sources.other,A(()=>_=!1)),m.$set(Y)},i(h){g||(d(s.$$.fragment,h),d(u.$$.fragment,h),d(a.$$.fragment,h),d(P.$$.fragment,h),d(m.$$.fragment,h),g=!0)},o(h){b(s.$$.fragment,h),b(u.$$.fragment,h),b(a.$$.fragment,h),b(P.$$.fragment,h),b(m.$$.fragment,h),g=!1},d(h){h&&v(e),F(s),F(u),F(a),F(P),F(m)}}}function Dt(t,e,i){let{data:n}=e,{onUpdate:s}=e;function o(p){s()}let r=["atf2","atf3","atf4","atf4e","crsts","luf"];function u(p){t.$$.not_equal(n.budget,p)&&(n.budget=p,i(0,n))}function l(p){t.$$.not_equal(n.development_funded,p)&&(n.development_funded=p,i(0,n))}function f(p){t.$$.not_equal(n.construction_funded,p)&&(n.construction_funded=p,i(0,n))}function a(p,w){t.$$.not_equal(n.funding_sources[w],p)&&(n.funding_sources[w]=p,i(0,n))}function c(p){t.$$.not_equal(n.funding_sources.other,p)&&(n.funding_sources.other=p,i(0,n))}return t.$$set=p=>{"data"in p&&i(0,n=p.data),"onUpdate"in p&&i(2,s=p.onUpdate)},t.$$.update=()=>{t.$$.dirty&1&&o()},[n,r,s,u,l,f,a,c]}class xe extends J{constructor(e){super(),D(this,e,Dt,Jt,H,{data:0,onUpdate:2})}}function Ht(t){let e,i,n;function s(r){t[2](r)}let o={label:t[1],choices:[ie("New segregated cycling facility"),ie("New junction treatment"),ie("New permanent footway"),["New shared use facilities","New shared use (walking and cycling) facilities"],["Improvements to existing route","Improvements to make an existing walking/cycle route safer"],["Area-wide traffic management","Area-wide traffic management (including by TROs - both permanent and experimental)"],["Bus priority measures","Bus priority measures that also enable active travel (for example, bus gates)"],["Secure cycle parking","Provision of secure cycle parking facilities"],ie("New road crossings"),ie("Restriction or reduction of car parking availability"),ie("School streets"),ie("Quiet mixed traffic streets"),ie("Traffic free routes"),ie("Not specified in LCWIP")],emptyOption:!0};return t[0]!==void 0&&(o.value=t[0]),e=new we({props:o}),T.push(()=>I(e,"value",s)),{c(){N(e.$$.fragment)},m(r,u){O(e,r,u),n=!0},p(r,[u]){const l={};u&2&&(l.label=r[1]),!i&&u&1&&(i=!0,l.value=r[0],A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function ie(t){return[t,t]}function Vt(t,e,i){let{label:n}=e,{value:s}=e;function o(r){s=r,i(0,s)}return t.$$set=r=>{"label"in r&&i(1,n=r.label),"value"in r&&i(0,s=r.value)},[s,n,o]}class et extends J{constructor(e){super(),D(this,e,Vt,Ht,H,{label:1,value:0})}}function Qt(t){let e,i,n,s,o,r,u,l,f,a,c,p,w,C,P,k,m,_;function g(y){t[3](y)}let U={label:"Status",choices:[["","Unknown"],["aspiration","Aspiration"],["planned","Planned"],["in development","In development"],["in construction","In construction"],["completed","Completed"]],inlineSmall:!0,required:t[1]};t[0].status!==void 0&&(U.value=t[0].status),s=new se({props:U}),T.push(()=>I(s,"value",g));function q(y){t[4](y)}let L={label:"Timescale",choices:[["","Unknown"],["short","Short (1-3 years)"],["medium","Medium (3-6 years)"],["long","Long (6-10 years)"]],inlineSmall:!0,required:t[1]};t[0].timescale!==void 0&&(L.value=t[0].timescale),u=new se({props:L}),T.push(()=>I(u,"value",q));function S(y){t[5](y)}let Z={label:"Estimated completion year (if known)",width:4,min:2010,max:2100};t[0].timescale_year!==void 0&&(Z.value=t[0].timescale_year),a=new Ne({props:Z}),T.push(()=>I(a,"value",S));function z(y){t[6](y)}let K={label:"What year was this scheme most recently published?",width:4,min:2010,max:2100};t[0].year_published!==void 0&&(K.value=t[0].year_published),w=new Ne({props:K}),T.push(()=>I(w,"value",z));function te(y){t[7](y)}let h={label:"What year was this scheme most recently consulted on?",width:4,min:2010,max:2100};return t[0].year_consulted!==void 0&&(h.value=t[0].year_consulted),k=new Ne({props:h}),T.push(()=>I(k,"value",te)),{c(){e=R("fieldset"),i=R("legend"),i.textContent="Timing and status",n=M(),N(s.$$.fragment),r=M(),N(u.$$.fragment),f=M(),N(a.$$.fragment),p=M(),N(w.$$.fragment),P=M(),N(k.$$.fragment),B(i,"class","govuk-fieldset__legend"),B(e,"class","govuk-fieldset svelte-1bxyfcq")},m(y,j){$(y,e,j),E(e,i),E(e,n),O(s,e,null),E(e,r),O(u,e,null),E(e,f),O(a,e,null),E(e,p),O(w,e,null),E(e,P),O(k,e,null),_=!0},p(y,[j]){const W={};j&2&&(W.required=y[1]),!o&&j&1&&(o=!0,W.value=y[0].status,A(()=>o=!1)),s.$set(W);const V={};j&2&&(V.required=y[1]),!l&&j&1&&(l=!0,V.value=y[0].timescale,A(()=>l=!1)),u.$set(V);const X={};!c&&j&1&&(c=!0,X.value=y[0].timescale_year,A(()=>c=!1)),a.$set(X);const Y={};!C&&j&1&&(C=!0,Y.value=y[0].year_published,A(()=>C=!1)),w.$set(Y);const me={};!m&&j&1&&(m=!0,me.value=y[0].year_consulted,A(()=>m=!1)),k.$set(me)},i(y){_||(d(s.$$.fragment,y),d(u.$$.fragment,y),d(a.$$.fragment,y),d(w.$$.fragment,y),d(k.$$.fragment,y),_=!0)},o(y){b(s.$$.fragment,y),b(u.$$.fragment,y),b(a.$$.fragment,y),b(w.$$.fragment,y),b(k.$$.fragment,y),_=!1},d(y){y&&v(e),F(s),F(u),F(a),F(w),F(k)}}}function zt(t,e,i){let{data:n}=e,{required:s}=e,{onUpdate:o}=e;function r(p){o()}function u(p){t.$$.not_equal(n.status,p)&&(n.status=p,i(0,n))}function l(p){t.$$.not_equal(n.timescale,p)&&(n.timescale=p,i(0,n))}function f(p){t.$$.not_equal(n.timescale_year,p)&&(n.timescale_year=p,i(0,n))}function a(p){t.$$.not_equal(n.year_published,p)&&(n.year_published=p,i(0,n))}function c(p){t.$$.not_equal(n.year_consulted,p)&&(n.year_consulted=p,i(0,n))}return t.$$set=p=>{"data"in p&&i(0,n=p.data),"required"in p&&i(1,s=p.required),"onUpdate"in p&&i(2,o=p.onUpdate)},t.$$.update=()=>{t.$$.dirty&1&&r()},[n,s,o,u,l,f,a,c]}class tt extends J{constructor(e){super(),D(this,e,zt,Qt,H,{data:0,required:1,onUpdate:2})}}function Ge(t){let e,i;return e=new _e({props:{disabled:!t[2],$$slots:{default:[Zt]},$$scope:{ctx:t}}}),e.$on("click",t[8]),{c(){N(e.$$.fragment)},m(n,s){O(e,n,s),i=!0},p(n,s){const o={};s&4&&(o.disabled=!n[2]),s&262144&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function Zt(t){let e;return{c(){e=G("Auto-fill with street names")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function Kt(t){let e,i,n,s,o,r,u,l,f=t[0].length_meters&&Ge(t);return{c(){e=R("div"),e.textContent="Use the name from the LCWIP if possible",i=M(),n=R("input"),s=M(),f&&f.c(),o=ne(),B(e,"class","govuk-hint"),B(n,"type","text"),B(n,"class","govuk-input"),B(n,"id",t[6])},m(a,c){$(a,e,c),$(a,i,c),$(a,n,c),Q(n,t[0].name),$(a,s,c),f&&f.m(a,c),$(a,o,c),r=!0,u||(l=re(n,"input",t[7]),u=!0)},p(a,c){c&1&&n.value!==a[0].name&&Q(n,a[0].name),a[0].length_meters?f?(f.p(a,c),c&1&&d(f,1)):(f=Ge(a),f.c(),d(f,1),f.m(o.parentNode,o)):f&&(x(),b(f,1,1,()=>{f=null}),ee())},i(a){r||(d(f),r=!0)},o(a){b(f),r=!1},d(a){a&&(v(e),v(i),v(n),v(s),v(o)),f&&f.d(a),u=!1,l()}}}function Je(t){let e,i,n=pe(t[0].length_meters)+"",s;return{c(){e=R("p"),i=G("Length: "),s=G(n)},m(o,r){$(o,e,r),E(e,i),E(e,s)},p(o,r){r&1&&n!==(n=pe(o[0].length_meters)+"")&&fe(s,n)},d(o){o&&v(e)}}}function De(t){let e,i,n,s,o,r,u,l,f,a,c,p,w,C,P,k;function m(h){t[12](h)}let _={label:"Type"};t[0].pipeline.atf4_type!==void 0&&(_.value=t[0].pipeline.atf4_type),e=new et({props:_}),T.push(()=>I(e,"value",m));function g(h){t[13](h)}let U={label:"Accuracy of mapped data",choices:[["high","High"],["medium","Medium"],["low","Low"]],required:!0,inlineSmall:!0};t[0].pipeline.accuracy!==void 0&&(U.value=t[0].pipeline.accuracy),s=new se({props:U}),T.push(()=>I(s,"value",g));function q(h){t[14](h)}let L={$$slots:{default:[Xt]},$$scope:{ctx:t}};t[0].pipeline.is_alternative!==void 0&&(L.checked=t[0].pipeline.is_alternative),u=new de({props:L}),T.push(()=>I(u,"checked",q));let S=t[4]&&t[0].is_coverage_polygon!==void 0&&He(t);function Z(h){t[16](h)}let z={required:!1,onUpdate:en};t[0].pipeline!==void 0&&(z.data=t[0].pipeline),c=new tt({props:z}),T.push(()=>I(c,"data",Z));function K(h){t[17](h)}let te={onUpdate:tn};return t[0].pipeline!==void 0&&(te.data=t[0].pipeline),C=new xe({props:te}),T.push(()=>I(C,"data",K)),{c(){N(e.$$.fragment),n=M(),N(s.$$.fragment),r=M(),N(u.$$.fragment),f=M(),S&&S.c(),a=M(),N(c.$$.fragment),w=M(),N(C.$$.fragment)},m(h,y){O(e,h,y),$(h,n,y),O(s,h,y),$(h,r,y),O(u,h,y),$(h,f,y),S&&S.m(h,y),$(h,a,y),O(c,h,y),$(h,w,y),O(C,h,y),k=!0},p(h,y){const j={};!i&&y&1&&(i=!0,j.value=h[0].pipeline.atf4_type,A(()=>i=!1)),e.$set(j);const W={};!o&&y&1&&(o=!0,W.value=h[0].pipeline.accuracy,A(()=>o=!1)),s.$set(W);const V={};y&262144&&(V.$$scope={dirty:y,ctx:h}),!l&&y&1&&(l=!0,V.checked=h[0].pipeline.is_alternative,A(()=>l=!1)),u.$set(V),h[4]&&h[0].is_coverage_polygon!==void 0?S?(S.p(h,y),y&1&&d(S,1)):(S=He(h),S.c(),d(S,1),S.m(a.parentNode,a)):S&&(x(),b(S,1,1,()=>{S=null}),ee());const X={};!p&&y&1&&(p=!0,X.data=h[0].pipeline,A(()=>p=!1)),c.$set(X);const Y={};!P&&y&1&&(P=!0,Y.data=h[0].pipeline,A(()=>P=!1)),C.$set(Y)},i(h){k||(d(e.$$.fragment,h),d(s.$$.fragment,h),d(u.$$.fragment,h),d(S),d(c.$$.fragment,h),d(C.$$.fragment,h),k=!0)},o(h){b(e.$$.fragment,h),b(s.$$.fragment,h),b(u.$$.fragment,h),b(S),b(c.$$.fragment,h),b(C.$$.fragment,h),k=!1},d(h){h&&(v(n),v(r),v(f),v(a),v(w)),F(e,h),F(s,h),F(u,h),S&&S.d(h),F(c,h),F(C,h)}}}function Xt(t){let e;return{c(){e=G("Is this an alternative route and not the default option?")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function He(t){let e,i,n;function s(r){t[15](r)}let o={$$slots:{default:[Yt]},$$scope:{ctx:t}};return t[0].is_coverage_polygon!==void 0&&(o.checked=t[0].is_coverage_polygon),e=new de({props:o}),T.push(()=>I(e,"checked",s)),{c(){N(e.$$.fragment)},m(r,u){O(e,r,u),n=!0},p(r,u){const l={};u&262144&&(l.$$scope={dirty:u,ctx:r}),!i&&u&1&&(i=!0,l.checked=r[0].is_coverage_polygon,A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function Yt(t){let e;return{c(){e=G(`Does this polygon show the coverage of the scheme? (All area considered
      while making the scheme)`)},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function xt(t){let e,i,n,s,o,r,u,l,f,a,c;e=new ae({props:{label:"Name",id:t[6],$$slots:{default:[Kt]},$$scope:{ctx:t}}});function p(_){t[10](_)}let w={label:"Scheme",choices:Object.values(t[3].schemes).map(t[9])};t[0].scheme_reference!==void 0&&(w.value=t[0].scheme_reference),n=new we({props:w}),T.push(()=>I(n,"value",p));function C(_){t[11](_)}let P={label:"Description"};t[0].description!==void 0&&(P.value=t[0].description),r=new ye({props:P}),T.push(()=>I(r,"value",C));let k=t[0].length_meters&&Je(t),m=t[0].pipeline&&De(t);return{c(){N(e.$$.fragment),i=M(),N(n.$$.fragment),o=M(),N(r.$$.fragment),l=M(),k&&k.c(),f=M(),m&&m.c(),a=ne()},m(_,g){O(e,_,g),$(_,i,g),O(n,_,g),$(_,o,g),O(r,_,g),$(_,l,g),k&&k.m(_,g),$(_,f,g),m&&m.m(_,g),$(_,a,g),c=!0},p(_,[g]){const U={};g&262149&&(U.$$scope={dirty:g,ctx:_}),e.$set(U);const q={};g&8&&(q.choices=Object.values(_[3].schemes).map(_[9])),!s&&g&1&&(s=!0,q.value=_[0].scheme_reference,A(()=>s=!1)),n.$set(q);const L={};!u&&g&1&&(u=!0,L.value=_[0].description,A(()=>u=!1)),r.$set(L),_[0].length_meters?k?k.p(_,g):(k=Je(_),k.c(),k.m(f.parentNode,f)):k&&(k.d(1),k=null),_[0].pipeline?m?(m.p(_,g),g&1&&d(m,1)):(m=De(_),m.c(),d(m,1),m.m(a.parentNode,a)):m&&(x(),b(m,1,1,()=>{m=null}),ee())},i(_){c||(d(e.$$.fragment,_),d(n.$$.fragment,_),d(r.$$.fragment,_),d(m),c=!0)},o(_){b(e.$$.fragment,_),b(n.$$.fragment,_),b(r.$$.fragment,_),b(m),c=!1},d(_){_&&(v(i),v(o),v(l),v(f),v(a)),F(e,_),F(n,_),F(r,_),k&&k.d(_),m&&m.d(_)}}}const en=()=>{},tn=()=>{};function nn(t,e,i){let n,s,o=ce,r=()=>(o(),o=he(u,S=>i(3,s=S)),u);ge(t,Oe,S=>i(2,n=S)),t.$$.on_destroy.push(()=>o());let{gjSchemes:u}=e;r();let{props:l}=e;l.pipeline||(l.pipeline={atf4_type:"",accuracy:"",is_alternative:!1,development_funded:!1,construction_funded:!1,funding_sources:ke(),status:"",timescale:""}),l.is_coverage_polygon||(l.is_coverage_polygon=!1);const f=(s.features.filter(S=>S.properties.is_coverage_polygon).length==0||l.is_coverage_polygon===!0)&&l.intervention_type==="area";function a(){try{i(0,l.name=n.inner.routeNameForWaypoints(l.waypoints),l)}catch(S){window.alert(`Couldn't auto-name route: ${S}`)}}let c=ue();function p(){l.name=this.value,i(0,l)}const w=()=>a(),C=S=>[S.scheme_reference,Se(S)];function P(S){t.$$.not_equal(l.scheme_reference,S)&&(l.scheme_reference=S,i(0,l))}function k(S){t.$$.not_equal(l.description,S)&&(l.description=S,i(0,l))}function m(S){t.$$.not_equal(l.pipeline.atf4_type,S)&&(l.pipeline.atf4_type=S,i(0,l))}function _(S){t.$$.not_equal(l.pipeline.accuracy,S)&&(l.pipeline.accuracy=S,i(0,l))}function g(S){t.$$.not_equal(l.pipeline.is_alternative,S)&&(l.pipeline.is_alternative=S,i(0,l))}function U(S){t.$$.not_equal(l.is_coverage_polygon,S)&&(l.is_coverage_polygon=S,i(0,l))}function q(S){t.$$.not_equal(l.pipeline,S)&&(l.pipeline=S,i(0,l))}function L(S){t.$$.not_equal(l.pipeline,S)&&(l.pipeline=S,i(0,l))}return t.$$set=S=>{"gjSchemes"in S&&r(i(1,u=S.gjSchemes)),"props"in S&&i(0,l=S.props)},[l,u,n,s,f,a,c,p,w,C,P,k,m,_,g,U,q,L]}class rn extends J{constructor(e){super(),D(this,e,nn,xt,H,{gjSchemes:1,props:0})}}function Ve(t,e,i){const n=t.slice();return n[7]=e[i][0],n[8]=e[i][1],n}function Qe(t){let e,i;return e=new _e({props:{$$slots:{default:[sn]},$$scope:{ctx:t}}}),e.$on("click",t[4]),{c(){N(e.$$.fragment)},m(n,s){O(e,n,s),i=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function sn(t){let e;return{c(){e=G("Handle extra GeoJSON properties")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function ze(t){let e,i,n=t[7]+"",s,o,r=JSON.stringify(t[8])+"",u,l;return{c(){e=R("li"),i=R("b"),s=G(n),o=G(`
        = `),u=G(r),l=M()},m(f,a){$(f,e,a),E(e,i),E(i,s),E(e,o),E(e,u),E(e,l)},p(f,a){a&2&&n!==(n=f[7]+"")&&fe(s,n),a&2&&r!==(r=JSON.stringify(f[8])+"")&&fe(u,r)},d(f){f&&v(e)}}}function ln(t){let e;return{c(){e=G("Remove these properties")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function un(t){let e;return{c(){e=G("Cancel")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function on(t){let e,i,n,s;return e=new _t({props:{$$slots:{default:[ln]},$$scope:{ctx:t}}}),e.$on("click",t[2]),n=new _e({props:{$$slots:{default:[un]},$$scope:{ctx:t}}}),n.$on("click",t[5]),{c(){N(e.$$.fragment),i=M(),N(n.$$.fragment)},m(o,r){O(e,o,r),$(o,i,r),O(n,o,r),s=!0},p(o,r){const u={};r&2048&&(u.$$scope={dirty:r,ctx:o}),e.$set(u);const l={};r&2048&&(l.$$scope={dirty:r,ctx:o}),n.$set(l)},i(o){s||(d(e.$$.fragment,o),d(n.$$.fragment,o),s=!0)},o(o){b(e.$$.fragment,o),b(n.$$.fragment,o),s=!1},d(o){o&&v(i),F(e,o),F(n,o)}}}function fn(t){let e,i,n,s,o,r,u=$e(Object.entries(t[1])),l=[];for(let f=0;f<u.length;f+=1)l[f]=ze(Ve(t,u,f));return o=new ct({props:{$$slots:{default:[on]},$$scope:{ctx:t}}}),{c(){e=R("p"),e.textContent="The unexpected properties:",i=M(),n=R("ul");for(let f=0;f<l.length;f+=1)l[f].c();s=M(),N(o.$$.fragment)},m(f,a){$(f,e,a),$(f,i,a),$(f,n,a);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(n,null);$(f,s,a),O(o,f,a),r=!0},p(f,a){if(a&2){u=$e(Object.entries(f[1]));let p;for(p=0;p<u.length;p+=1){const w=Ve(f,u,p);l[p]?l[p].p(w,a):(l[p]=ze(w),l[p].c(),l[p].m(n,null))}for(;p<l.length;p+=1)l[p].d(1);l.length=u.length}const c={};a&2049&&(c.$$scope={dirty:a,ctx:f}),o.$set(c)},i(f){r||(d(o.$$.fragment,f),r=!0)},o(f){b(o.$$.fragment,f),r=!1},d(f){f&&(v(e),v(i),v(n),v(s)),Xe(l,f),F(o,f)}}}function an(t){let e=Object.entries(t[1]).length>0,i,n,s,o,r=e&&Qe(t);function u(f){t[6](f)}let l={title:"This imported GeoJSON feature has unexpected properties",$$slots:{default:[fn]},$$scope:{ctx:t}};return t[0]!==void 0&&(l.open=t[0]),n=new st({props:l}),T.push(()=>I(n,"open",u)),{c(){r&&r.c(),i=M(),N(n.$$.fragment)},m(f,a){r&&r.m(f,a),$(f,i,a),O(n,f,a),o=!0},p(f,[a]){a&2&&(e=Object.entries(f[1]).length>0),e?r?(r.p(f,a),a&2&&d(r,1)):(r=Qe(f),r.c(),d(r,1),r.m(i.parentNode,i)):r&&(x(),b(r,1,1,()=>{r=null}),ee());const c={};a&2051&&(c.$$scope={dirty:a,ctx:f}),!s&&a&1&&(s=!0,c.open=f[0],A(()=>s=!1)),n.$set(c)},i(f){o||(d(r),d(n.$$.fragment,f),o=!0)},o(f){b(r),b(n.$$.fragment,f),o=!1},d(f){f&&v(i),r&&r.d(f),F(n,f)}}}function pn(t,e,i){let n,{props:s}=e,o=!1;function r(){i(0,o=!1);for(let a of Object.keys(n))delete s[a];i(3,s)}const u=()=>i(0,o=!0),l=()=>i(0,o=!1);function f(a){o=a,i(0,o)}return t.$$set=a=>{"props"in a&&i(3,s=a.props)},t.$$.update=()=>{t.$$.dirty&8&&i(1,n=it(s))},[o,n,r,s,u,l,f]}class cn extends J{constructor(e){super(),D(this,e,pn,an,H,{props:3})}}function Ze(t){let e,i,n;function s(r){t[5](r)}let o={};return t[0]!==void 0&&(o.props=t[0]),e=new cn({props:o}),T.push(()=>I(e,"props",s)),{c(){N(e.$$.fragment)},m(r,u){O(e,r,u),n=!0},p(r,u){const l={};!i&&u&1&&(i=!0,l.props=r[0],A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function _n(t){let e,i,n;function s(r){t[8](r)}let o={gjSchemes:t[1]};return t[0]!==void 0&&(o.props=t[0]),e=new Lt({props:o}),T.push(()=>I(e,"props",s)),{c(){N(e.$$.fragment)},m(r,u){O(e,r,u),n=!0},p(r,u){const l={};u&2&&(l.gjSchemes=r[1]),!i&&u&1&&(i=!0,l.props=r[0],A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function mn(t){let e,i,n;function s(r){t[7](r)}let o={gjSchemes:t[1]};return t[0]!==void 0&&(o.props=t[0]),e=new rn({props:o}),T.push(()=>I(e,"props",s)),{c(){N(e.$$.fragment)},m(r,u){O(e,r,u),n=!0},p(r,u){const l={};u&2&&(l.gjSchemes=r[1]),!i&&u&1&&(i=!0,l.props=r[0],A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function dn(t){let e,i,n;function s(r){t[6](r)}let o={gjSchemes:t[1]};return t[0]!==void 0&&(o.props=t[0]),e=new Pt({props:o}),T.push(()=>I(e,"props",s)),{c(){N(e.$$.fragment)},m(r,u){O(e,r,u),n=!0},p(r,u){const l={};u&2&&(l.gjSchemes=r[1]),!i&&u&1&&(i=!0,l.props=r[0],A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function gn(t){let e,i,n,s,o,r=t[2]!=null&&Ze(t);const u=[dn,mn,_n],l=[];function f(a,c){return a[3]=="v1"?0:a[3]=="pipeline"?1:a[3]=="v2"?2:-1}return~(i=f(t))&&(n=l[i]=u[i](t)),{c(){r&&r.c(),e=M(),n&&n.c(),s=ne()},m(a,c){r&&r.m(a,c),$(a,e,c),~i&&l[i].m(a,c),$(a,s,c),o=!0},p(a,[c]){a[2]!=null?r?(r.p(a,c),c&4&&d(r,1)):(r=Ze(a),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(x(),b(r,1,1,()=>{r=null}),ee());let p=i;i=f(a),i===p?~i&&l[i].p(a,c):(n&&(x(),b(l[p],1,1,()=>{l[p]=null}),ee()),~i?(n=l[i],n?n.p(a,c):(n=l[i]=u[i](a),n.c()),d(n,1),n.m(s.parentNode,s)):n=null)},i(a){o||(d(r),d(n),o=!0)},o(a){b(r),b(n),o=!1},d(a){a&&(v(e),v(s)),r&&r.d(a),~i&&l[i].d(a)}}}function hn(t,e,i){let n;ge(t,le,p=>i(3,n=p));let{cfg:s}=e,{gjSchemes:o}=e,{id:r}=e,{props:u}=e;u.name||(u.name=""),u.description||(u.description="");function l(p){u=p,i(0,u)}function f(p){u=p,i(0,u)}function a(p){u=p,i(0,u)}function c(p){u=p,i(0,u)}return t.$$set=p=>{"cfg"in p&&i(4,s=p.cfg),"gjSchemes"in p&&i(1,o=p.gjSchemes),"id"in p&&i(2,r=p.id),"props"in p&&i(0,u=p.props)},[u,o,r,n,s,l,f,a,c]}class bn extends J{constructor(e){super(),D(this,e,hn,gn,H,{cfg:4,gjSchemes:1,id:2,props:0})}}function $n(t){let e,i,n;function s(r){t[3](r)}let o={label:"Scheme name",required:!0};return t[2].schemes[t[1]].scheme_name!==void 0&&(o.value=t[2].schemes[t[1]].scheme_name),e=new Fe({props:o}),T.push(()=>I(e,"value",s)),{c(){N(e.$$.fragment)},m(r,u){O(e,r,u),n=!0},p(r,[u]){const l={};!i&&u&6&&(i=!0,l.value=r[2].schemes[r[1]].scheme_name,A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){F(e,r)}}}function vn(t,e,i){let n,s=ce,o=()=>(s(),s=he(r,f=>i(2,n=f)),r);t.$$.on_destroy.push(()=>s());let{gjSchemes:r}=e;o();let{scheme_reference:u}=e;function l(f){t.$$.not_equal(n.schemes[u].scheme_name,f)&&(n.schemes[u].scheme_name=f,r.set(n))}return t.$$set=f=>{"gjSchemes"in f&&o(i(0,r=f.gjSchemes)),"scheme_reference"in f&&i(1,u=f.scheme_reference)},[r,u,n,l]}class kn extends J{constructor(e){super(),D(this,e,vn,$n,H,{gjSchemes:0,scheme_reference:1})}}function wn(t){let e,i,n,s,o,r,u,l,f,a,c,p,w,C,P,k,m,_,g,U,q;e=new be({props:{errorMessage:t[4]}});function L(j){t[6](j)}let S={label:"Scheme name",required:!0};t[5].schemes[t[1]].scheme_name!==void 0&&(S.value=t[5].schemes[t[1]].scheme_name),n=new Fe({props:S}),T.push(()=>I(n,"value",L));function Z(j){t[7](j)}let z={label:"Scheme type",choices:[["cycling route","Cycling route"],["walking route","Walking route"],["shared-use route","Shared-use route"],["cycling and walking route","Cycling and walking route, not shared use"],["area-based scheme","Area-based scheme"],["intersection","Intersection/junction scheme"]],inlineSmall:!0,required:!0};t[2].scheme_type!==void 0&&(z.value=t[2].scheme_type),f=new se({props:z}),T.push(()=>I(f,"value",Z));function K(j){t[8](j)}let te={label:"Type of the main intervention"};t[2].atf4_lead_type!==void 0&&(te.value=t[2].atf4_lead_type),p=new et({props:te}),T.push(()=>I(p,"value",K));function h(j){t[9](j)}let y={label:"Scheme description (150 words max)"};return t[2].scheme_description!==void 0&&(y.value=t[2].scheme_description),P=new ye({props:y}),T.push(()=>I(P,"value",h)),_=new tt({props:{data:t[2],required:!0,onUpdate:t[10]}}),U=new xe({props:{data:t[2],onUpdate:t[11]}}),{c(){N(e.$$.fragment),i=M(),N(n.$$.fragment),o=M(),r=R("fieldset"),u=R("legend"),u.textContent="Basic information",l=M(),N(f.$$.fragment),c=M(),N(p.$$.fragment),C=M(),N(P.$$.fragment),m=M(),N(_.$$.fragment),g=M(),N(U.$$.fragment),B(u,"class","govuk-fieldset__legend"),B(r,"class","govuk-fieldset svelte-1bxyfcq")},m(j,W){O(e,j,W),$(j,i,W),O(n,j,W),$(j,o,W),$(j,r,W),E(r,u),E(r,l),O(f,r,null),E(r,c),O(p,r,null),E(r,C),O(P,r,null),$(j,m,W),O(_,j,W),$(j,g,W),O(U,j,W),q=!0},p(j,[W]){const V={};W&16&&(V.errorMessage=j[4]),e.$set(V);const X={};!s&&W&34&&(s=!0,X.value=j[5].schemes[j[1]].scheme_name,A(()=>s=!1)),n.$set(X);const Y={};!a&&W&4&&(a=!0,Y.value=j[2].scheme_type,A(()=>a=!1)),f.$set(Y);const me={};!w&&W&4&&(w=!0,me.value=j[2].atf4_lead_type,A(()=>w=!1)),p.$set(me);const Ce={};!k&&W&4&&(k=!0,Ce.value=j[2].scheme_description,A(()=>k=!1)),P.$set(Ce);const je={};W&4&&(je.data=j[2]),W&8&&(je.onUpdate=j[10]),_.$set(je);const qe={};W&4&&(qe.data=j[2]),W&8&&(qe.onUpdate=j[11]),U.$set(qe)},i(j){q||(d(e.$$.fragment,j),d(n.$$.fragment,j),d(f.$$.fragment,j),d(p.$$.fragment,j),d(P.$$.fragment,j),d(_.$$.fragment,j),d(U.$$.fragment,j),q=!0)},o(j){b(e.$$.fragment,j),b(n.$$.fragment,j),b(f.$$.fragment,j),b(p.$$.fragment,j),b(P.$$.fragment,j),b(_.$$.fragment,j),b(U.$$.fragment,j),q=!1},d(j){j&&(v(i),v(o),v(r),v(m),v(g)),F(e,j),F(n,j),F(f),F(p),F(P),F(_,j),F(U,j)}}}function yn(t,e,i){let n,s,o=ce,r=()=>(o(),o=he(u,_=>i(5,s=_)),u);t.$$.on_destroy.push(()=>o());let{gjSchemes:u}=e;r();let{scheme_reference:l}=e,f=s.schemes[l].pipeline,a=0;at(()=>{u.update(_=>(Object.hasOwn(_.schemes,l)&&(_.schemes[l].pipeline=f),_))});function c(_,g){return f.scheme_type&&f.status&&f.timescale?"":"Missing some required data"}function p(_){t.$$.not_equal(s.schemes[l].scheme_name,_)&&(s.schemes[l].scheme_name=_,u.set(s))}function w(_){t.$$.not_equal(f.scheme_type,_)&&(f.scheme_type=_,i(2,f))}function C(_){t.$$.not_equal(f.atf4_lead_type,_)&&(f.atf4_lead_type=_,i(2,f))}function P(_){t.$$.not_equal(f.scheme_description,_)&&(f.scheme_description=_,i(2,f))}const k=()=>i(3,a++,a),m=()=>i(3,a++,a);return t.$$set=_=>{"gjSchemes"in _&&r(i(0,u=_.gjSchemes)),"scheme_reference"in _&&i(1,l=_.scheme_reference)},t.$$.update=()=>{t.$$.dirty&12&&i(4,n=c())},[u,l,f,a,n,s,p,w,C,P,k,m]}class Sn extends J{constructor(e){super(),D(this,e,yn,wn,H,{gjSchemes:0,scheme_reference:1})}}function jn(t){let e,i;return e=new kn({props:{gjSchemes:t[0],scheme_reference:t[1]}}),{c(){N(e.$$.fragment)},m(n,s){O(e,n,s),i=!0},p(n,s){const o={};s&1&&(o.gjSchemes=n[0]),s&2&&(o.scheme_reference=n[1]),e.$set(o)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function qn(t){let e,i;return e=new Sn({props:{gjSchemes:t[0],scheme_reference:t[1]}}),{c(){N(e.$$.fragment)},m(n,s){O(e,n,s),i=!0},p(n,s){const o={};s&1&&(o.gjSchemes=n[0]),s&2&&(o.scheme_reference=n[1]),e.$set(o)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){b(e.$$.fragment,n),i=!1},d(n){F(e,n)}}}function Nn(t){let e,i,n,s;const o=[qn,jn],r=[];function u(l,f){return l[2]=="pipeline"?0:1}return e=u(t),i=r[e]=o[e](t),{c(){i.c(),n=ne()},m(l,f){r[e].m(l,f),$(l,n,f),s=!0},p(l,[f]){let a=e;e=u(l),e===a?r[e].p(l,f):(x(),b(r[a],1,1,()=>{r[a]=null}),ee(),i=r[e],i?i.p(l,f):(i=r[e]=o[e](l),i.c()),d(i,1),i.m(n.parentNode,n))},i(l){s||(d(i),s=!0)},o(l){b(i),s=!1},d(l){l&&v(n),r[e].d(l)}}}function On(t,e,i){let n;ge(t,le,r=>i(2,n=r));let{gjSchemes:s}=e,{scheme_reference:o}=e;return t.$$set=r=>{"gjSchemes"in r&&i(0,s=r.gjSchemes),"scheme_reference"in r&&i(1,o=r.scheme_reference)},[s,o,n]}class Fn extends J{constructor(e){super(),D(this,e,On,Nn,H,{gjSchemes:0,scheme_reference:1})}}let Wn={interventionName:Pn,schemeName:Se,backfill:Cn,initializeEmptyScheme:Mn,interventionWarning:Un,editFeatureForm:bn,editSchemeForm:Fn,newPointFeature:t=>{t.properties.intervention_type="other"},newPolygonFeature:t=>{t.properties.intervention_type="area",t.properties.is_coverage_polygon=!1,delete t.properties.route_name,delete t.properties.full_path},newLineStringFeature:t=>{t.properties.intervention_type="route",t.properties.route_name&&!t.properties.name&&oe(le)!="pipeline"&&(t.properties.name=t.properties.route_name),delete t.properties.route_name,delete t.properties.full_path},updateFeature:(t,e)=>{e.properties.route_name&&!t.properties.name&&oe(le)!="pipeline"&&(t.properties.name=e.properties.route_name)},getStreetViewRoadLayerNames:t=>lt(t,oe(pt)),layerZorder:ut};function Cn(t){var n,s,o,r,u,l,f,a;let e=oe(le),i=1;for(let c of t.features)c.properties||(c.properties={name:"",scheme_reference:"",description:"",intervention_type:"other",is_coverage_polygon:!1}),(e=="pipeline"||e=="v2")&&!c.properties.intervention_type&&(c.properties.intervention_type=new Map([["LineString","route"],["Polygon","area"]]).get(c.geometry.type)??"other"),c.geometry.type=="LineString"&&!c.properties.length_meters&&(c.properties.length_meters=ot(c,{units:"kilometers"})*1e3),c.id=i++;if(!t.schemes){let c=ue();t.schemes={},t.schemes[c]={scheme_reference:c,color:Me()},t.scheme_name&&(t.schemes[c].scheme_name=t.scheme_name,delete t.scheme_name),t.pipeline&&(t.schemes[c].pipeline=t.pipeline,delete t.pipeline);for(let p of t.features)p.properties.scheme_reference=c}for(let c of Object.values(t.schemes)){let p=c;if(p.color??(p.color=Me()),e=="pipeline"){p.pipeline??(p.pipeline=nt()),(n=p.pipeline).development_funded??(n.development_funded=!1),(s=p.pipeline).construction_funded??(s.construction_funded=!1),(o=p.pipeline).funding_sources??(o.funding_sources=ke()),delete p.pipeline.budget_funded,delete p.pipeline.budget_unfunded,delete p.pipeline.funding_source,delete p.pipeline.funded;for(let w of t.features)w.properties.pipeline&&((r=w.properties.pipeline).development_funded??(r.development_funded=!1),(u=w.properties.pipeline).construction_funded??(u.construction_funded=!1),(l=w.properties.pipeline).funding_sources??(l.funding_sources=ke()),(f=w.properties.pipeline).status??(f.status=""),(a=w.properties.pipeline).timescale??(a.timescale=""))}else e=="v2"&&(p.v2={})}return t}function Mn(t){let e=t,i=oe(le);return i=="pipeline"?e.pipeline=nt():i=="v2"&&(e.v2={}),e}function nt(){return{scheme_type:"",atf4_lead_type:"",scheme_description:"",status:"",timescale:"",development_funded:!1,construction_funded:!1,funding_sources:ke()}}function ke(){return{atf2:!1,atf3:!1,atf4:!1,atf4e:!1,crsts:!1,luf:!1,other:""}}function Pn(t){if(t.properties.name)return t.properties.name;var e=t.properties.intervention_type;return e=="other"&&(t.geometry.type=="Point"?e="point":t.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function Se(t){return t.scheme_name??"Untitled scheme"}function Un(t){var n;let e=oe(le);if(!t.name)return"No name";if(!new Set(["route","area","crossing","other"]).has(t.intervention_type))return"No intervention type";if(e=="pipeline"&&!((n=t.pipeline)!=null&&n.accuracy))return"Accuracy not specified";let i=it(t);return Object.entries(i).length>0?`Extra GeoJSON properties: ${Object.keys(i).join(", ")}`:null}function it(t){let e=oe(le),i=JSON.parse(JSON.stringify(t));for(let n of["name","description","intervention_type","length_meters","waypoints","hide_while_editing","is_coverage_polygon","scheme_reference"])delete i[n];if(e=="pipeline"&&i.pipeline){for(let n of["atf4_type","accuracy","is_alternative","budget","development_funded","construction_funded","funding_sources","status","timescale","timescale_year","year_published","year_consulted"])delete i.pipeline[n];Object.entries(i.pipeline).length==0&&delete i.pipeline}if(e=="v2"&&i.v2){for(let n of["intervention_type","intended_uses","work_type"])delete i.v2[n];Object.entries(i.v2).length==0&&delete i.v2}return i}export{Cn as b,Wn as c};
