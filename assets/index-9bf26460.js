import{S as h,i as y,s as v,e as _,h as S,an as x,j as $,x as L,p as b,g as k,m as M,t as g,n as d,q as P,ax as E,y as B,o as J,ay as j,d as G,u as W,k as w,I as z,a as Y,N as A,C as R,av as Q,D as X,T as H,P as K,Z as I,Y as F,Q as U,a1 as V,a0 as ee,$ as O,ao as q,a7 as m,aX as te,aY as ne}from"./index-8ad111d9.js";import{C as re,a as oe,l as C,c}from"./StreetViewController-f4c307ff.js";function ae(e){let t;return{c(){t=_("span"),S(t,"class","svelte-kzgqtg"),x(t,"background",e[0])},m(o,n){$(o,t,n)},p(o,[n]){n&1&&x(t,"background",o[0])},i:L,o:L,d(o){o&&b(t)}}}function ie(e,t,o){let{color:n}=t;return e.$$set=r=>{"color"in r&&o(0,n=r.color)},[n]}class se extends h{constructor(t){super(),y(this,t,ie,ae,v,{color:0})}}function N(e,t,o){const n=e.slice();return n[1]=t[o][0],n[2]=t[o][1],n}function T(e){let t,o,n,r=e[1]+"",s,i,l;return o=new se({props:{color:e[2]}}),{c(){t=_("li"),k(o.$$.fragment),n=G(),s=W(r),i=G()},m(a,u){$(a,t,u),M(o,t,null),w(t,n),w(t,s),w(t,i),l=!0},p(a,u){const f={};u&1&&(f.color=a[2]),o.$set(f),(!l||u&1)&&r!==(r=a[1]+"")&&z(s,r)},i(a){l||(g(o.$$.fragment,a),l=!0)},o(a){d(o.$$.fragment,a),l=!1},d(a){a&&b(t),P(o)}}}function le(e){let t,o,n=E(e[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=T(N(e,n,i));const s=i=>d(r[i],1,1,()=>{r[i]=null});return{c(){t=_("ul");for(let i=0;i<r.length;i+=1)r[i].c()},m(i,l){$(i,t,l);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(t,null);o=!0},p(i,l){if(l&1){n=E(i[0]);let a;for(a=0;a<n.length;a+=1){const u=N(i,n,a);r[a]?(r[a].p(u,l),g(r[a],1)):(r[a]=T(u),r[a].c(),g(r[a],1),r[a].m(t,null))}for(B(),a=n.length;a<r.length;a+=1)s(a);J()}},i(i){if(!o){for(let l=0;l<n.length;l+=1)g(r[l]);o=!0}},o(i){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)d(r[l]);o=!1},d(i){i&&b(t),j(r,i)}}}function ce(e){let t,o;return t=new re({props:{label:"Legend",$$slots:{default:[le]},$$scope:{ctx:e}}}),{c(){k(t.$$.fragment)},m(n,r){M(t,n,r),o=!0},p(n,[r]){const s={};r&33&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){o||(g(t.$$.fragment,n),o=!0)},o(n){d(t.$$.fragment,n),o=!1},d(n){P(t,n)}}}function ue(e,t,o){let{rows:n}=t;return e.$$set=r=>{"rows"in r&&o(0,n=r.rows)},[n]}class _e extends h{constructor(t){super(),y(this,t,ue,ce,v,{rows:0})}}const fe="/atip/assets/zoom_out_map-b2e1091a.svg";function pe(e){let t,o;return{c(){t=_("img"),Q(t.src,o=fe)||S(t,"src",o),S(t,"alt","Zoom to show entire boundary")},m(n,r){$(n,t,r)},p:L,d(n){n&&b(t)}}}function ge(e){let t,o;return t=new Y({props:{title:"Zoom to show entire boundary",$$slots:{default:[pe]},$$scope:{ctx:e}}}),t.$on("click",e[0]),{c(){k(t.$$.fragment)},m(n,r){M(t,n,r),o=!0},p(n,[r]){const s={};r&8&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){o||(g(t.$$.fragment,n),o=!0)},o(n){d(t.$$.fragment,n),o=!1},d(n){P(t,n)}}}function de(e,t,o){let n;A(e,R,i=>o(2,n=i));let{boundaryGeojson:r}=t;function s(){n.fitBounds(X(r),{padding:20,animate:!0,duration:500})}return e.$$set=i=>{"boundaryGeojson"in i&&o(1,r=i.boundaryGeojson)},[s,r]}class $e extends h{constructor(t){super(),y(this,t,de,ge,v,{boundaryGeojson:1})}}let p="interventions";function me(e,t,o){let n,r;A(e,R,a=>o(1,n=a)),A(e,H,a=>o(2,r=a));let{colorInterventions:s}=t;K(n,p,r);const i=["!=","hide_while_editing",!0];return I(n,{id:"interventions-points",source:p,filter:["all",V,i,["!=","endpoint",!0]],color:s,radius:oe}),F(n,{id:"interventions-lines",source:p,filter:["all",ee,i],color:s,width:C}),I(n,{id:"interventions-lines-endpoints",source:p,filter:["==","endpoint",!0],radius:.5*C,opacity:0,strokeColor:c.lineEndpointColor,strokeWidth:2}),U(n,{id:"interventions-polygons",source:p,filter:["all",O,i],color:s,opacity:.2}),F(n,{id:"interventions-polygon-outlines",source:p,filter:["all",O,i],color:s,opacity:.5,width:.7*C}),e.$$set=a=>{"colorInterventions"in a&&o(0,s=a.colorInterventions)},e.$$.update=()=>{if(e.$$.dirty&6){let a=JSON.parse(JSON.stringify(r)),u=[];for(let f of a.features)if(f.geometry.type=="LineString"&&!f.properties.hide_while_editing)for(let Z of[f.geometry.coordinates[0],f.geometry.coordinates[f.geometry.coordinates.length-1]])u.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:Z}});a.features=a.features.concat(u),n.getSource(p).setData(a)}},[s,n,r]}class be extends h{constructor(t){super(),y(this,t,me,null,v,{colorInterventions:0})}}function we(e){return{v1:"Scheme Design",v2:"Experimental Scheme Design",planning:"Development Planning",criticals:"Critical Issues",atf4:"ATF4 Scheme"}[e]}function Ce(e){return{v1:"an intervention",v2:"an intervention",planning:"a development",criticals:"a critical issue",atf4:"an intervention"}[e]}function Se(e){return{v1:"interventions",v2:"interventions",planning:"developments",criticals:"critical issues",atf4:"interventions"}[e]}function Le(e){return e=="planning"?q(["get","reference_type",["get","planning"]],{preapp:c.preapp,outline:c.outline,"reserved matters":c["reserved matters"],"local plan":c["local plan"]},"black"):q(["get","intervention_type"],{area:c.area,route:c.route,crossing:c.crossing,other:c.other},"white")}function Ae(e){return e=="planning"?[["Preapp",c.preapp],["Outline",c.outline],["Reserved matters",c["reserved matters"]],["Local plan",c["local plan"]]]:[["Areas",c.area],["Routes",c.route],["Crossings",c.crossing],["Other",c.other]]}function D(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function ke(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Me(e,t){return e.type==="FeatureCollection"?"FeatureCollection":e.type==="GeometryCollection"?"GeometryCollection":e.type==="Feature"&&e.geometry!==null?e.geometry.type:e.type}function he(e,t,o){o===void 0&&(o={});var n=D(e),r=D(t),s=m(r[1]-n[1]),i=m(r[0]-n[0]),l=m(n[1]),a=m(r[1]),u=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(l)*Math.cos(a);return te(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),o.units)}function Pe(e,t){return t===void 0&&(t={}),ne(e,function(o,n){var r=n.geometry.coordinates;return o+he(r[0],r[1],t)},0)}export{se as C,be as I,_e as L,$e as Z,ke as a,Me as b,Se as c,he as d,we as e,Le as f,D as g,Ae as h,Pe as l,Ce as s};
