import{S as N,i as P,s as R,A as U,b as O,a as V,e as d,c as A,t as Z,d as z,f,g as T,h as o,j as M,m as G,l as B,k as H,n as K,o as Q,p as I,q as X,r as Y,u as x,v as tt,w as et}from"./authorities-9df6d6c4.js";function nt(n){let e,c,k,l,v,g,C,m,u,E,S,j,p,i,h,L,q,b,a,_,r,s,w,$,D;function W(t){n[8](t)}let F={};return n[1]!==void 0&&(F.open=n[1]),r=new U({props:F}),O.push(()=>V(r,"open",W,n[1])),{c(){e=d("div"),c=d("h1"),c.textContent="Welcome to ATIP v1",k=A(),l=d("button"),l.textContent="About",v=A(),g=d("p"),g.textContent="Select Transport Authority or Local Authority District:",C=A(),m=d("div"),u=d("input"),E=A(),S=d("datalist"),j=A(),p=d("button"),i=Z("Start"),L=A(),q=d("p"),q.textContent="Or pick a Transport Authority on the map",b=A(),a=d("div"),_=A(),z(r.$$.fragment),f(l,"type","button"),f(l,"class","svelte-ynp6gq"),f(u,"data-testid","transport-authority"),f(u,"list","authorities-list"),f(S,"id","authorities-list"),f(p,"type","button"),p.disabled=h=!n[3],f(p,"class","svelte-ynp6gq"),f(e,"class","left svelte-ynp6gq"),f(a,"id","map"),f(a,"class","svelte-ynp6gq")},m(t,y){T(t,e,y),o(e,c),o(e,k),o(e,l),o(e,v),o(e,g),o(e,C),o(e,m),o(m,u),M(u,n[0]),o(m,E),o(m,S),n[7](S),o(m,j),o(m,p),o(p,i),o(e,L),o(e,q),T(t,b,y),T(t,a,y),T(t,_,y),G(r,t,y),w=!0,$||(D=[B(l,"click",n[5]),B(u,"input",n[6]),B(p,"click",n[4])],$=!0)},p(t,[y]){y&1&&u.value!==t[0]&&M(u,t[0]),(!w||y&8&&h!==(h=!t[3]))&&(p.disabled=h);const J={};!s&&y&2&&(s=!0,J.open=t[1],H(()=>s=!1)),r.$set(J)},i(t){w||(K(r.$$.fragment,t),w=!0)},o(t){Q(r.$$.fragment,t),w=!1},d(t){t&&I(e),n[7](null),t&&I(b),t&&I(a),t&&I(_),X(r,t),$=!1,Y(D)}}}function at(n,e,c){let k,l=!1,v,g,C=new Set;async function m(){let i="boundary",h="boundary-layer";const q=await(await fetch(x)).text(),b=JSON.parse(q);for(let s of b.features){let w=document.createElement("option");w.value=s.properties.name,g.appendChild(w),C.add(s.properties.name)}b.features=b.features.filter(s=>s.properties.level=="TA");let a=new tt.Map({container:"map",style:"https://api.maptiler.com/maps/streets/style.json?key=MZEJTanw3WpxRvt7qDfo"}),_=null;function r(){_!==null&&a.setFeatureState({source:i,id:_},{hover:!1})}a.on("load",function(){a.fitBounds(et(b),{padding:20,animate:!1}),a.addSource(i,{type:"geojson",data:b,generateId:!0}),a.addLayer({id:h,source:i,type:"fill",paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.8,.4]}}),a.on("mousemove",h,s=>{s.features.length>0&&(r(),_=s.features[0].id,a.setFeatureState({source:i,id:_},{hover:!0}))}),a.on("mouseleave",h,()=>{r(),_=null}),a.on("click",h,function(s){window.location.href=`scheme.html?authority=${s.features[0].properties.name}`})})}m();function u(){window.location.href=`scheme.html?authority=${v}`}const E=()=>c(1,l=!l);function S(){v=this.value,c(0,v)}function j(i){O[i?"unshift":"push"](()=>{g=i,c(2,g)})}function p(i){l=i,c(1,l)}return n.$$.update=()=>{n.$$.dirty&1&&c(3,k=C.has(v))},[v,l,g,k,u,E,S,j,p]}class ot extends N{constructor(e){super(),P(this,e,at,nt,R,{})}}new ot({target:document.getElementById("app")});
