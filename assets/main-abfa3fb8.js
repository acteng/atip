import{S as Z,i as G,s as K,A as Q,b as V,a as R,e as l,c as p,t as X,d as Y,f as c,g as O,h as n,j as P,m as x,l as D,k as tt,n as et,o as nt,p as $,q as ot,r as at,u as st,v as lt,w as it}from"./authorities-657a4482.js";function rt(s){let t,f,A,i,b,y,S,E,j,I,L,k,T,a,r,B,g,m,o,h,v,u,w,F,C,N,_,U,q,z,H;function W(e){s[8](e)}let J={};return s[1]!==void 0&&(J.open=s[1]),_=new Q({props:J}),V.push(()=>R(_,"open",W,s[1])),{c(){t=l("div"),f=l("h1"),f.textContent="Welcome to ATIP v1",A=p(),i=l("button"),i.textContent="About",b=p(),y=l("br"),S=p(),E=l("br"),j=p(),I=l("br"),L=p(),k=l("p"),k.textContent="Select Transport Authority or Local Authority District:",T=p(),a=l("div"),r=l("input"),B=p(),g=l("datalist"),m=p(),o=l("button"),h=X("Start"),u=p(),w=l("p"),w.textContent="Or pick a Transport Authority on the map",F=p(),C=l("div"),N=p(),Y(_.$$.fragment),c(i,"type","button"),c(i,"class","svelte-ynp6gq"),c(r,"list","authorities-list"),c(g,"id","authorities-list"),c(o,"type","button"),o.disabled=v=!s[3],c(o,"class","svelte-ynp6gq"),c(t,"class","left svelte-ynp6gq"),c(C,"id","map"),c(C,"class","svelte-ynp6gq")},m(e,d){O(e,t,d),n(t,f),n(t,A),n(t,i),n(t,b),n(t,y),n(t,S),n(t,E),n(t,j),n(t,I),n(t,L),n(t,k),n(t,T),n(t,a),n(a,r),P(r,s[0]),n(a,B),n(a,g),s[7](g),n(a,m),n(a,o),n(o,h),n(t,u),n(t,w),O(e,F,d),O(e,C,d),O(e,N,d),x(_,e,d),q=!0,z||(H=[D(i,"click",s[5]),D(r,"input",s[6]),D(o,"click",s[4])],z=!0)},p(e,[d]){d&1&&r.value!==e[0]&&P(r,e[0]),(!q||d&8&&v!==(v=!e[3]))&&(o.disabled=v);const M={};!U&&d&2&&(U=!0,M.open=e[1],tt(()=>U=!1)),_.$set(M)},i(e){q||(et(_.$$.fragment,e),q=!0)},o(e){nt(_.$$.fragment,e),q=!1},d(e){e&&$(t),s[7](null),e&&$(F),e&&$(C),e&&$(N),ot(_,e),z=!1,at(H)}}}function ut(s,t,f){let A,i=!1,b,y,S=new Set;async function E(){let a="boundary",r="boundary-layer";const g=await(await fetch(st)).text(),m=JSON.parse(g);for(let u of m.features){let w=document.createElement("option");w.value=u.properties.name,y.appendChild(w),S.add(u.properties.name)}m.features=m.features.filter(u=>u.properties.level=="TA");let o=new lt.Map({container:"map",style:"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}),h=null;function v(){h!==null&&o.setFeatureState({source:a,id:h},{hover:!1})}o.on("load",function(){o.fitBounds(it(m),{padding:20,animate:!1}),o.addSource(a,{type:"geojson",data:m,generateId:!0}),o.addLayer({id:r,source:a,type:"fill",paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.8,.4]}}),o.on("mousemove",r,u=>{u.features.length>0&&(v(),h=u.features[0].id,o.setFeatureState({source:a,id:h},{hover:!0}))}),o.on("mouseleave",r,()=>{v(),h=null}),o.on("click",r,function(u){window.location.href=`scheme.html?authority=${u.features[0].properties.name}`})})}E();function j(){window.location.href=`scheme.html?authority=${b}`}const I=()=>f(1,i=!i);function L(){b=this.value,f(0,b)}function k(a){V[a?"unshift":"push"](()=>{y=a,f(2,y)})}function T(a){i=a,f(1,i)}return s.$$.update=()=>{s.$$.dirty&1&&f(3,A=S.has(b))},[b,i,y,A,j,I,L,k,T]}class pt extends Z{constructor(t){super(),G(this,t,ut,rt,K,{})}}new pt({target:document.getElementById("app")});
