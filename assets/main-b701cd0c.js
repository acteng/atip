import{S as Z,i as G,s as K,A as Q,b as V,a as R,e as i,c as p,t as X,d as Y,f as d,g as O,h as n,j as P,m as x,l as D,k as tt,n as et,o as nt,p as $,q as at,r as ot,u as st,v as lt,w as it}from"./authorities-657a4482.js";function rt(s){let t,f,A,r,b,y,S,E,j,I,L,k,T,o,l,B,g,m,a,h,v,u,w,F,C,N,_,U,q,z,H;function W(e){s[8](e)}let J={};return s[1]!==void 0&&(J.open=s[1]),_=new Q({props:J}),V.push(()=>R(_,"open",W,s[1])),{c(){t=i("div"),f=i("h1"),f.textContent="Welcome to ATIP v1",A=p(),r=i("button"),r.textContent="About",b=p(),y=i("br"),S=p(),E=i("br"),j=p(),I=i("br"),L=p(),k=i("p"),k.textContent="Select Transport Authority or Local Authority District:",T=p(),o=i("div"),l=i("input"),B=p(),g=i("datalist"),m=p(),a=i("button"),h=X("Start"),u=p(),w=i("p"),w.textContent="Or pick a Transport Authority on the map",F=p(),C=i("div"),N=p(),Y(_.$$.fragment),d(r,"type","button"),d(r,"class","svelte-ynp6gq"),d(l,"data-testid","transport-authority"),d(l,"list","authorities-list"),d(g,"id","authorities-list"),d(a,"type","button"),a.disabled=v=!s[3],d(a,"class","svelte-ynp6gq"),d(t,"class","left svelte-ynp6gq"),d(C,"id","map"),d(C,"class","svelte-ynp6gq")},m(e,c){O(e,t,c),n(t,f),n(t,A),n(t,r),n(t,b),n(t,y),n(t,S),n(t,E),n(t,j),n(t,I),n(t,L),n(t,k),n(t,T),n(t,o),n(o,l),P(l,s[0]),n(o,B),n(o,g),s[7](g),n(o,m),n(o,a),n(a,h),n(t,u),n(t,w),O(e,F,c),O(e,C,c),O(e,N,c),x(_,e,c),q=!0,z||(H=[D(r,"click",s[5]),D(l,"input",s[6]),D(a,"click",s[4])],z=!0)},p(e,[c]){c&1&&l.value!==e[0]&&P(l,e[0]),(!q||c&8&&v!==(v=!e[3]))&&(a.disabled=v);const M={};!U&&c&2&&(U=!0,M.open=e[1],tt(()=>U=!1)),_.$set(M)},i(e){q||(et(_.$$.fragment,e),q=!0)},o(e){nt(_.$$.fragment,e),q=!1},d(e){e&&$(t),s[7](null),e&&$(F),e&&$(C),e&&$(N),at(_,e),z=!1,ot(H)}}}function ut(s,t,f){let A,r=!1,b,y,S=new Set;async function E(){let o="boundary",l="boundary-layer";const g=await(await fetch(st)).text(),m=JSON.parse(g);for(let u of m.features){let w=document.createElement("option");w.value=u.properties.name,y.appendChild(w),S.add(u.properties.name)}m.features=m.features.filter(u=>u.properties.level=="TA");let a=new lt.Map({container:"map",style:"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}),h=null;function v(){h!==null&&a.setFeatureState({source:o,id:h},{hover:!1})}a.on("load",function(){a.fitBounds(it(m),{padding:20,animate:!1}),a.addSource(o,{type:"geojson",data:m,generateId:!0}),a.addLayer({id:l,source:o,type:"fill",paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.8,.4]}}),a.on("mousemove",l,u=>{u.features.length>0&&(v(),h=u.features[0].id,a.setFeatureState({source:o,id:h},{hover:!0}))}),a.on("mouseleave",l,()=>{v(),h=null}),a.on("click",l,function(u){window.location.href=`scheme.html?authority=${u.features[0].properties.name}`})})}E();function j(){window.location.href=`scheme.html?authority=${b}`}const I=()=>f(1,r=!r);function L(){b=this.value,f(0,b)}function k(o){V[o?"unshift":"push"](()=>{y=o,f(2,y)})}function T(o){r=o,f(1,r)}return s.$$.update=()=>{s.$$.dirty&1&&f(3,A=S.has(b))},[b,r,y,A,j,I,L,k,T]}class pt extends Z{constructor(t){super(),G(this,t,ut,rt,K,{})}}new pt({target:document.getElementById("app")});
