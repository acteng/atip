import{S as M,i as P,s as W,A as Z,b as N,a as x,e as u,c as p,d as G,f as c,g as T,h as n,m as K,l as H,j as Q,t as R,k as V,n as O,o as X,r as Y,p as tt,q as et,u as nt}from"./authorities-dc873587.js";function ot(s){let t,d,m,l,h,k,C,S,q,L,j,o,_,g,E,f,a,i,A,r,v,w,$,b,B,I,F,U;function J(e){s[7](e)}let z={};return s[0]!==void 0&&(z.open=s[0]),b=new Z({props:z}),N.push(()=>x(b,"open",J,s[0])),{c(){t=u("div"),d=u("h1"),d.textContent="Welcome to ATIP v1",m=p(),l=u("button"),l.textContent="About",h=p(),k=u("br"),C=p(),S=u("br"),q=p(),L=u("br"),j=p(),o=u("p"),o.textContent="Select Transport Authority or Local Authority District:",_=p(),g=u("input"),E=p(),f=u("datalist"),a=p(),i=u("button"),i.textContent="Start",A=p(),r=u("p"),r.textContent="Or pick a Transport Authority on the map",v=p(),w=u("div"),$=p(),G(b.$$.fragment),c(l,"type","button"),c(l,"class","svelte-ynp6gq"),c(g,"list","authorities-list"),c(f,"id","authorities-list"),c(i,"type","button"),c(i,"class","svelte-ynp6gq"),c(t,"class","left svelte-ynp6gq"),c(w,"id","map"),c(w,"class","svelte-ynp6gq")},m(e,y){T(e,t,y),n(t,d),n(t,m),n(t,l),n(t,h),n(t,k),n(t,C),n(t,S),n(t,q),n(t,L),n(t,j),n(t,o),n(t,_),n(t,g),s[5](g),n(t,E),n(t,f),s[6](f),n(t,a),n(t,i),n(t,A),n(t,r),T(e,v,y),T(e,w,y),T(e,$,y),K(b,e,y),I=!0,F||(U=[H(l,"click",s[4]),H(i,"click",s[3])],F=!0)},p(e,[y]){const D={};!B&&y&1&&(B=!0,D.open=e[0],Q(()=>B=!1)),b.$set(D)},i(e){I||(R(b.$$.fragment,e),I=!0)},o(e){V(b.$$.fragment,e),I=!1},d(e){e&&O(t),s[5](null),s[6](null),e&&O(v),e&&O(w),e&&O($),X(b,e),F=!1,Y(U)}}}function st(s,t,d){let m=!1,l,h;async function k(){let o="boundary",_="boundary-layer";const E=await(await fetch(tt)).text(),f=JSON.parse(E);for(let r of f.features){let v=document.createElement("option");v.value=r.properties.name,h.appendChild(v)}f.features=f.features.filter(r=>r.properties.level=="TA");let a=new et.Map({container:"map",style:"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}),i=null;function A(){i!==null&&a.setFeatureState({source:o,id:i},{hover:!1})}a.on("load",function(){a.fitBounds(nt(f),{padding:20,animate:!1}),a.addSource(o,{type:"geojson",data:f,generateId:!0}),a.addLayer({id:_,source:o,type:"fill",paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.8,.4]}}),a.on("mousemove",_,r=>{r.features.length>0&&(A(),i=r.features[0].id,a.setFeatureState({source:o,id:i},{hover:!0}))}),a.on("mouseleave",_,()=>{A(),i=null}),a.on("click",_,function(r){window.location.href=`scheme.html?authority=${r.features[0].properties.name}`})})}k();function C(){l.value&&(window.location.href=`scheme.html?authority=${l.value}`)}const S=()=>d(0,m=!m);function q(o){N[o?"unshift":"push"](()=>{l=o,d(1,l)})}function L(o){N[o?"unshift":"push"](()=>{h=o,d(2,h)})}function j(o){m=o,d(0,m)}return[m,l,h,C,S,q,L,j]}class lt extends M{constructor(t){super(),P(this,t,st,ot,W,{})}}new lt({target:document.getElementById("app")});
