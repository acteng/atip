import{S as Q,i as R,s as X,A as Y,b as G,a as x,e as a,c as d,t as tt,d as et,f as m,g as I,h as n,j as V,m as nt,l as H,k as lt,n as ot,o as st,p as j,q as at,r as it,u as rt,v as ut,w as pt,x as ft}from"./authorities-a13ab4cc.js";function Z(s){let t;return{c(){t=a("span"),t.textContent="Warning! Invalid input, please use an entry from the suggested list.",rt(t,"color","red")},m(i,v){I(i,t,v)},d(i){i&&j(t)}}}function dt(s){let t,i,v,u,b,g,k,L,T,O,$,S,B,l,p,F,A,_,o,h,w,f,C,N,U,q,W,y,z,E,D,J,r=!s[3]&&Z();function K(e){s[8](e)}let M={};return s[1]!==void 0&&(M.open=s[1]),y=new Y({props:M}),G.push(()=>x(y,"open",K,s[1])),{c(){t=a("div"),i=a("h1"),i.textContent="Welcome to ATIP v1",v=d(),u=a("button"),u.textContent="About",b=d(),g=a("br"),k=d(),L=a("br"),T=d(),O=a("br"),$=d(),S=a("p"),S.textContent="Select Transport Authority or Local Authority District:",B=d(),l=a("div"),p=a("input"),F=d(),A=a("datalist"),_=d(),o=a("button"),h=tt("Start"),f=d(),r&&r.c(),C=d(),N=a("p"),N.textContent="Or pick a Transport Authority on the map",U=d(),q=a("div"),W=d(),et(y.$$.fragment),m(u,"type","button"),m(u,"class","svelte-ynp6gq"),m(p,"list","authorities-list"),m(A,"id","authorities-list"),m(o,"type","button"),o.disabled=w=!s[3],m(o,"class","svelte-ynp6gq"),m(t,"class","left svelte-ynp6gq"),m(q,"id","map"),m(q,"class","svelte-ynp6gq")},m(e,c){I(e,t,c),n(t,i),n(t,v),n(t,u),n(t,b),n(t,g),n(t,k),n(t,L),n(t,T),n(t,O),n(t,$),n(t,S),n(t,B),n(t,l),n(l,p),V(p,s[0]),n(l,F),n(l,A),s[7](A),n(l,_),n(l,o),n(o,h),n(l,f),r&&r.m(l,null),n(t,C),n(t,N),I(e,U,c),I(e,q,c),I(e,W,c),nt(y,e,c),E=!0,D||(J=[H(u,"click",s[5]),H(p,"input",s[6]),H(o,"click",s[4])],D=!0)},p(e,[c]){c&1&&p.value!==e[0]&&V(p,e[0]),(!E||c&8&&w!==(w=!e[3]))&&(o.disabled=w),e[3]?r&&(r.d(1),r=null):r||(r=Z(),r.c(),r.m(l,null));const P={};!z&&c&2&&(z=!0,P.open=e[1],lt(()=>z=!1)),y.$set(P)},i(e){E||(ot(y.$$.fragment,e),E=!0)},o(e){st(y.$$.fragment,e),E=!1},d(e){e&&j(t),s[7](null),r&&r.d(),e&&j(U),e&&j(q),e&&j(W),at(y,e),D=!1,it(J)}}}function ct(s,t,i){let v,u=!1,b,g,k=new Set;async function L(){let l="boundary",p="boundary-layer";const A=await(await fetch(ut)).text(),_=JSON.parse(A);for(let f of _.features){let C=document.createElement("option");C.value=f.properties.name,g.appendChild(C),k.add(f.properties.name)}_.features=_.features.filter(f=>f.properties.level=="TA");let o=new pt.Map({container:"map",style:"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL"}),h=null;function w(){h!==null&&o.setFeatureState({source:l,id:h},{hover:!1})}o.on("load",function(){o.fitBounds(ft(_),{padding:20,animate:!1}),o.addSource(l,{type:"geojson",data:_,generateId:!0}),o.addLayer({id:p,source:l,type:"fill",paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.8,.4]}}),o.on("mousemove",p,f=>{f.features.length>0&&(w(),h=f.features[0].id,o.setFeatureState({source:l,id:h},{hover:!0}))}),o.on("mouseleave",p,()=>{w(),h=null}),o.on("click",p,function(f){window.location.href=`scheme.html?authority=${f.features[0].properties.name}`})})}L();function T(){window.location.href=`scheme.html?authority=${b}`}const O=()=>i(1,u=!u);function $(){b=this.value,i(0,b)}function S(l){G[l?"unshift":"push"](()=>{g=l,i(2,g)})}function B(l){u=l,i(1,u)}return s.$$.update=()=>{s.$$.dirty&1&&i(3,v=k.has(b))},[b,u,g,v,T,O,$,S,B]}class mt extends Q{constructor(t){super(),R(this,t,ct,dt,X,{})}}new mt({target:document.getElementById("app")});
