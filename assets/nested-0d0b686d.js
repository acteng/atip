var ha=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var Pn=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var _t=(n,e,t)=>(ha(n,e,"access private method"),t);import{S as Ae,i as Fe,s as Ne,v as de,w as it,f as X,x as Ht,g as T,h as B,y as ot,z as He,n as O,B as Ie,C as Ke,D as ye,E as je,F as gr,G as se,e as q,H as qe,I as k,l as ne,r as dt,J as ul,K as ir,c as K,t as J,L as tt,k as H,M as nt,N as pa,d as pe,m as ge,o as me,O as ga,P as mr,Q as _n,R as st,T as ut,U as ft,V as ct,W as ma,X as ln,Y as an,Z as ki,_ as xt,b as Qe,$ as fl,a0 as io,a1 as va,a2 as vn,a3 as ba,a as Ct,j as Mt,a4 as ai,a5 as cl,a6 as $i,a7 as ro,u as dl,p as _a,a8 as Ln,a9 as hl,aa as oo,A as ya}from"./authorities-dc873587.js";function lo(n){let e,t;return{c(){e=it("title"),t=ye(n[1])},m(i,o){T(i,e,o),B(e,t)},p(i,o){o&2&&je(t,i[1])},d(i){i&&O(e)}}}function wa(n){let e,t,i=n[1]&&lo(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let a=0;a<o.length;a+=1)l=de(l,o[a]);return{c(){e=it("svg"),i&&i.c(),t=it("path"),X(t,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),Ht(e,l)},m(a,u){T(a,e,u),i&&i.m(e,null),B(e,t)},p(a,[u]){a[1]?i?i.p(a,u):(i=lo(a),i.c(),i.m(e,t)):i&&(i.d(1),i=null),Ht(e,l=ot(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:a[0]},u&1&&{height:a[0]},u&4&&a[2],u&8&&a[3]]))},i:He,o:He,d(a){a&&O(e),i&&i.d()}}}function Sa(n,e,t){let i,o;const l=["size","title"];let a=Ie(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=de(de({},e),Ke(f))),t(3,a=Ie(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ke(e),[u,c,o,a,i]}class ka extends Ae{constructor(e){super(),Fe(this,e,Sa,wa,Ne,{size:0,title:1})}}const vr=ka;function ao(n,e,t){const i=n.slice();return i[2]=e[t].width,i}function Ea(n){let e,t,i,o,l=[n[4],{style:t="width: "+n[2]+";"+n[4].style}],a={};for(let u=0;u<l.length;u+=1)a=de(a,l[u]);return{c(){e=q("p"),qe(e,a),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",n[0])},m(u,c){T(u,e,c),i||(o=[ne(e,"click",n[12]),ne(e,"mouseover",n[13]),ne(e,"mouseenter",n[14]),ne(e,"mouseleave",n[15])],i=!0)},p(u,c){qe(e,a=ot(l,[c&16&&u[4],c&20&&t!==(t="width: "+u[2]+";"+u[4].style)&&{style:t}])),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",u[0])},d(u){u&&O(e),i=!1,dt(o)}}}function xa(n){let e,t,i,o=n[3],l=[];for(let c=0;c<o.length;c+=1)l[c]=so(ao(n,o,c));let a=[n[4]],u={};for(let c=0;c<a.length;c+=1)u=de(u,a[c]);return{c(){e=q("div");for(let c=0;c<l.length;c+=1)l[c].c();qe(e,u)},m(c,f){T(c,e,f);for(let h=0;h<l.length;h+=1)l[h].m(e,null);t||(i=[ne(e,"click",n[8]),ne(e,"mouseover",n[9]),ne(e,"mouseenter",n[10]),ne(e,"mouseleave",n[11])],t=!0)},p(c,f){if(f&9){o=c[3];let h;for(h=0;h<o.length;h+=1){const m=ao(c,o,h);l[h]?l[h].p(m,f):(l[h]=so(m),l[h].c(),l[h].m(e,null))}for(;h<l.length;h+=1)l[h].d(1);l.length=o.length}qe(e,u=ot(a,[f&16&&c[4]]))},d(c){c&&O(e),ul(l,c),t=!1,dt(i)}}}function so(n){let e;return{c(){e=q("p"),ir(e,"width",n[2]),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",n[0])},m(t,i){T(t,e,i)},p(t,i){i&8&&ir(e,"width",t[2]),i&1&&k(e,"bx--skeleton__heading",t[0])},d(t){t&&O(e)}}}function Ca(n){let e;function t(l,a){return l[1]?xa:Ea}let i=t(n),o=i(n);return{c(){o.c(),e=gr()},m(l,a){o.m(l,a),T(l,e,a)},p(l,[a]){i===(i=t(l))&&o?o.p(l,a):(o.d(1),o=i(l),o&&(o.c(),o.m(e.parentNode,e)))},i:He,o:He,d(l){o.d(l),l&&O(e)}}}function Ma(n,e,t){let i,o,l;const a=["lines","heading","paragraph","width"];let u=Ie(e,a),{lines:c=3}=e,{heading:f=!1}=e,{paragraph:h=!1}=e,{width:m="100%"}=e;const b=[.973,.153,.567];function p(F){se.call(this,n,F)}function v(F){se.call(this,n,F)}function M(F){se.call(this,n,F)}function P(F){se.call(this,n,F)}function U(F){se.call(this,n,F)}function L(F){se.call(this,n,F)}function I(F){se.call(this,n,F)}function N(F){se.call(this,n,F)}return n.$$set=F=>{e=de(de({},e),Ke(F)),t(4,u=Ie(e,a)),"lines"in F&&t(5,c=F.lines),"heading"in F&&t(0,f=F.heading),"paragraph"in F&&t(1,h=F.paragraph),"width"in F&&t(2,m=F.width)},n.$$.update=()=>{if(n.$$.dirty&4&&t(7,o=parseInt(m,10)),n.$$.dirty&4&&t(6,l=m.includes("px")),n.$$.dirty&238&&h)for(let F=0;F<c;F++){const R=l?o-75:0,be=l?o:75,G=Math.floor(b[F%3]*(be-R+1))+R+"px";t(3,i=[...i,{width:l?G:`calc(${m} - ${G})`}])}},t(3,i=[]),[f,h,m,i,u,c,l,o,p,v,M,P,U,L,I,N]}class Ia extends Ae{constructor(e){super(),Fe(this,e,Ma,Ca,Ne,{lines:5,heading:0,paragraph:1,width:2})}}const An=Ia;function uo(n,e,t){const i=n.slice();return i[9]=e[t],i}function fo(n){let e,t,i,o,l,a,u,c,f,h,m,b,p;return i=new vr({props:{class:"bx--accordion__arrow"}}),l=new An({props:{class:"bx--accordion__title"}}),c=new An({props:{width:"90%"}}),h=new An({props:{width:"80%"}}),b=new An({props:{width:"95%"}}),{c(){e=q("li"),t=q("span"),pe(i.$$.fragment),o=K(),pe(l.$$.fragment),a=K(),u=q("div"),pe(c.$$.fragment),f=K(),pe(h.$$.fragment),m=K(),pe(b.$$.fragment),k(t,"bx--accordion__heading",!0),k(u,"bx--accordion__content",!0),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",!0)},m(v,M){T(v,e,M),B(e,t),ge(i,t,null),B(t,o),ge(l,t,null),B(e,a),B(e,u),ge(c,u,null),B(u,f),ge(h,u,null),B(u,m),ge(b,u,null),p=!0},i(v){p||(J(i.$$.fragment,v),J(l.$$.fragment,v),J(c.$$.fragment,v),J(h.$$.fragment,v),J(b.$$.fragment,v),p=!0)},o(v){H(i.$$.fragment,v),H(l.$$.fragment,v),H(c.$$.fragment,v),H(h.$$.fragment,v),H(b.$$.fragment,v),p=!1},d(v){v&&O(e),me(i),me(l),me(c),me(h),me(b)}}}function co(n,e){let t,i,o,l,a,u,c;return o=new vr({props:{class:"bx--accordion__arrow"}}),a=new An({props:{class:"bx--accordion__title"}}),{key:n,first:null,c(){t=q("li"),i=q("span"),pe(o.$$.fragment),l=K(),pe(a.$$.fragment),u=K(),k(i,"bx--accordion__heading",!0),k(t,"bx--accordion__item",!0),this.first=t},m(f,h){T(f,t,h),B(t,i),ge(o,i,null),B(i,l),ge(a,i,null),B(t,u),c=!0},p(f,h){},i(f){c||(J(o.$$.fragment,f),J(a.$$.fragment,f),c=!0)},o(f){H(o.$$.fragment,f),H(a.$$.fragment,f),c=!1},d(f){f&&O(t),me(o),me(a)}}}function Pa(n){let e,t,i=[],o=new Map,l,a,u,c=n[3]&&fo(),f=Array.from({length:n[3]?n[0]-1:n[0]},ho);const h=p=>p[9];for(let p=0;p<f.length;p+=1){let v=uo(n,f,p),M=h(v);o.set(M,i[p]=co(M))}let m=[n[4]],b={};for(let p=0;p<m.length;p+=1)b=de(b,m[p]);return{c(){e=q("ul"),c&&c.c(),t=K();for(let p=0;p<i.length;p+=1)i[p].c();qe(e,b),k(e,"bx--skeleton",!0),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",n[1]==="start"),k(e,"bx--accordion--end",n[1]==="end"),k(e,"bx--accordion--sm",n[2]==="sm"),k(e,"bx--accordion--xl",n[2]==="xl")},m(p,v){T(p,e,v),c&&c.m(e,null),B(e,t);for(let M=0;M<i.length;M+=1)i[M].m(e,null);l=!0,a||(u=[ne(e,"click",n[5]),ne(e,"mouseover",n[6]),ne(e,"mouseenter",n[7]),ne(e,"mouseleave",n[8])],a=!0)},p(p,[v]){p[3]?c?v&8&&J(c,1):(c=fo(),c.c(),J(c,1),c.m(e,t)):c&&(tt(),H(c,1,1,()=>{c=null}),nt()),v&9&&(f=Array.from({length:p[3]?p[0]-1:p[0]},ho),tt(),i=pa(i,v,h,1,p,f,o,e,ga,co,null,uo),nt()),qe(e,b=ot(m,[v&16&&p[4]])),k(e,"bx--skeleton",!0),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",p[1]==="start"),k(e,"bx--accordion--end",p[1]==="end"),k(e,"bx--accordion--sm",p[2]==="sm"),k(e,"bx--accordion--xl",p[2]==="xl")},i(p){if(!l){J(c);for(let v=0;v<f.length;v+=1)J(i[v]);l=!0}},o(p){H(c);for(let v=0;v<i.length;v+=1)H(i[v]);l=!1},d(p){p&&O(e),c&&c.d();for(let v=0;v<i.length;v+=1)i[v].d();a=!1,dt(u)}}}const ho=(n,e)=>e;function La(n,e,t){const i=["count","align","size","open"];let o=Ie(e,i),{count:l=4}=e,{align:a="end"}=e,{size:u=void 0}=e,{open:c=!0}=e;function f(p){se.call(this,n,p)}function h(p){se.call(this,n,p)}function m(p){se.call(this,n,p)}function b(p){se.call(this,n,p)}return n.$$set=p=>{e=de(de({},e),Ke(p)),t(4,o=Ie(e,i)),"count"in p&&t(0,l=p.count),"align"in p&&t(1,a=p.align),"size"in p&&t(2,u=p.size),"open"in p&&t(3,c=p.open)},[l,a,u,c,o,f,h,m,b]}class Ta extends Ae{constructor(e){super(),Fe(this,e,La,Pa,Ne,{count:0,align:1,size:2,open:3})}}const Oa=Ta;function Aa(n){let e,t,i,o;const l=n[6].default,a=st(l,n,n[5],null);let u=[n[3]],c={};for(let f=0;f<u.length;f+=1)c=de(c,u[f]);return{c(){e=q("ul"),a&&a.c(),qe(e,c),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",n[0]==="start"),k(e,"bx--accordion--end",n[0]==="end"),k(e,"bx--accordion--sm",n[1]==="sm"),k(e,"bx--accordion--xl",n[1]==="xl")},m(f,h){T(f,e,h),a&&a.m(e,null),t=!0,i||(o=[ne(e,"click",n[7]),ne(e,"mouseover",n[8]),ne(e,"mouseenter",n[9]),ne(e,"mouseleave",n[10])],i=!0)},p(f,h){a&&a.p&&(!t||h&32)&&ut(a,l,f,f[5],t?ct(l,f[5],h,null):ft(f[5]),null),qe(e,c=ot(u,[h&8&&f[3]])),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",f[0]==="start"),k(e,"bx--accordion--end",f[0]==="end"),k(e,"bx--accordion--sm",f[1]==="sm"),k(e,"bx--accordion--xl",f[1]==="xl")},i(f){t||(J(a,f),t=!0)},o(f){H(a,f),t=!1},d(f){f&&O(e),a&&a.d(f),i=!1,dt(o)}}}function Fa(n){let e,t;const i=[n[3],{align:n[0]},{size:n[1]}];let o={};for(let l=0;l<i.length;l+=1)o=de(o,i[l]);return e=new Oa({props:o}),e.$on("click",n[11]),e.$on("mouseover",n[12]),e.$on("mouseenter",n[13]),e.$on("mouseleave",n[14]),{c(){pe(e.$$.fragment)},m(l,a){ge(e,l,a),t=!0},p(l,a){const u=a&11?ot(i,[a&8&&ma(l[3]),a&1&&{align:l[0]},a&2&&{size:l[1]}]):{};e.$set(u)},i(l){t||(J(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){me(e,l)}}}function Na(n){let e,t,i,o;const l=[Fa,Aa],a=[];function u(c,f){return c[2]?0:1}return e=u(n),t=a[e]=l[e](n),{c(){t.c(),i=gr()},m(c,f){a[e].m(c,f),T(c,i,f),o=!0},p(c,[f]){let h=e;e=u(c),e===h?a[e].p(c,f):(tt(),H(a[h],1,1,()=>{a[h]=null}),nt(),t=a[e],t?t.p(c,f):(t=a[e]=l[e](c),t.c()),J(t,1),t.m(i.parentNode,i))},i(c){o||(J(t),o=!0)},o(c){H(t),o=!1},d(c){a[e].d(c),c&&O(i)}}}function Ra(n,e,t){const i=["align","size","disabled","skeleton"];let o=Ie(e,i),{$$slots:l={},$$scope:a}=e,{align:u="end"}=e,{size:c=void 0}=e,{disabled:f=!1}=e,{skeleton:h=!1}=e;const m=_n(f);mr("Accordion",{disableItems:m});function b(N){se.call(this,n,N)}function p(N){se.call(this,n,N)}function v(N){se.call(this,n,N)}function M(N){se.call(this,n,N)}function P(N){se.call(this,n,N)}function U(N){se.call(this,n,N)}function L(N){se.call(this,n,N)}function I(N){se.call(this,n,N)}return n.$$set=N=>{e=de(de({},e),Ke(N)),t(3,o=Ie(e,i)),"align"in N&&t(0,u=N.align),"size"in N&&t(1,c=N.size),"disabled"in N&&t(4,f=N.disabled),"skeleton"in N&&t(2,h=N.skeleton),"$$scope"in N&&t(5,a=N.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&m.set(f)},[u,c,h,o,f,a,l,b,p,v,M,P,U,L,I]}class Da extends Ae{constructor(e){super(),Fe(this,e,Ra,Na,Ne,{align:0,size:1,disabled:4,skeleton:2})}}const ja=Da,za=n=>({}),po=n=>({});function Ba(n){let e;return{c(){e=ye(n[2])},m(t,i){T(t,e,i)},p(t,i){i&4&&je(e,t[2])},d(t){t&&O(e)}}}function Ua(n){let e,t,i,o,l,a,u,c,f,h;i=new vr({props:{class:"bx--accordion__arrow","aria-label":n[3]}});const m=n[7].title,b=st(m,n,n[6],po),p=b||Ba(n),v=n[7].default,M=st(v,n,n[6],null);let P=[n[5]],U={};for(let L=0;L<P.length;L+=1)U=de(U,P[L]);return{c(){e=q("li"),t=q("button"),pe(i.$$.fragment),o=K(),l=q("div"),p&&p.c(),a=K(),u=q("div"),M&&M.c(),k(l,"bx--accordion__title",!0),X(t,"type","button"),X(t,"title",n[3]),X(t,"aria-expanded",n[0]),t.disabled=n[1],k(t,"bx--accordion__heading",!0),k(u,"bx--accordion__content",!0),qe(e,U),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",n[0]),k(e,"bx--accordion__item--disabled",n[1]),k(e,"bx--accordion__item--expanding",n[4]==="expanding"),k(e,"bx--accordion__item--collapsing",n[4]==="collapsing")},m(L,I){T(L,e,I),B(e,t),ge(i,t,null),B(t,o),B(t,l),p&&p.m(l,null),B(e,a),B(e,u),M&&M.m(u,null),c=!0,f||(h=[ne(t,"click",n[9]),ne(t,"click",n[14]),ne(t,"mouseover",n[10]),ne(t,"mouseenter",n[11]),ne(t,"mouseleave",n[12]),ne(t,"keydown",n[13]),ne(t,"keydown",n[15]),ne(e,"animationend",n[8]),ne(e,"animationend",n[16])],f=!0)},p(L,[I]){const N={};I&8&&(N["aria-label"]=L[3]),i.$set(N),b?b.p&&(!c||I&64)&&ut(b,m,L,L[6],c?ct(m,L[6],I,za):ft(L[6]),po):p&&p.p&&(!c||I&4)&&p.p(L,c?I:-1),(!c||I&8)&&X(t,"title",L[3]),(!c||I&1)&&X(t,"aria-expanded",L[0]),(!c||I&2)&&(t.disabled=L[1]),M&&M.p&&(!c||I&64)&&ut(M,v,L,L[6],c?ct(v,L[6],I,null):ft(L[6]),null),qe(e,U=ot(P,[I&32&&L[5]])),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",L[0]),k(e,"bx--accordion__item--disabled",L[1]),k(e,"bx--accordion__item--expanding",L[4]==="expanding"),k(e,"bx--accordion__item--collapsing",L[4]==="collapsing")},i(L){c||(J(i.$$.fragment,L),J(p,L),J(M,L),c=!0)},o(L){H(i.$$.fragment,L),H(p,L),H(M,L),c=!1},d(L){L&&O(e),me(i),p&&p.d(L),M&&M.d(L),f=!1,dt(h)}}}function Ga(n,e,t){const i=["title","open","disabled","iconDescription"];let o=Ie(e,i),{$$slots:l={},$$scope:a}=e,{title:u="title"}=e,{open:c=!1}=e,{disabled:f=!1}=e,{iconDescription:h="Expand/Collapse"}=e,m=f;const p=ln("Accordion").disableItems.subscribe(G=>{!G&&m||t(1,f=G)});let v;an(()=>()=>{p()});function M(G){se.call(this,n,G)}function P(G){se.call(this,n,G)}function U(G){se.call(this,n,G)}function L(G){se.call(this,n,G)}function I(G){se.call(this,n,G)}function N(G){se.call(this,n,G)}const F=()=>{t(0,c=!c),t(4,v=c?"expanding":"collapsing")},R=({key:G})=>{c&&G==="Escape"&&t(0,c=!1)},be=()=>{t(4,v=void 0)};return n.$$set=G=>{e=de(de({},e),Ke(G)),t(5,o=Ie(e,i)),"title"in G&&t(2,u=G.title),"open"in G&&t(0,c=G.open),"disabled"in G&&t(1,f=G.disabled),"iconDescription"in G&&t(3,h=G.iconDescription),"$$scope"in G&&t(6,a=G.$$scope)},[c,f,u,h,v,o,a,l,M,P,U,L,I,N,F,R,be]}class Va extends Ae{constructor(e){super(),Fe(this,e,Ga,Ua,Ne,{title:2,open:0,disabled:1,iconDescription:3})}}const Ja=Va;function go(n){let e,t;return{c(){e=it("title"),t=ye(n[1])},m(i,o){T(i,e,o),B(e,t)},p(i,o){o&2&&je(t,i[1])},d(i){i&&O(e)}}}function qa(n){let e,t,i,o=n[1]&&go(n),l=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],a={};for(let u=0;u<l.length;u+=1)a=de(a,l[u]);return{c(){e=it("svg"),o&&o.c(),t=it("path"),i=it("path"),X(t,"d","M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14C30,8.3,23.7,2,16,2z M14.9,8h2.2v11h-2.2V8z M16,25	c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22c0.8,0,1.5,0.7,1.5,1.5S16.8,25,16,25z"),X(i,"fill","none"),X(i,"d","M17.5,23.5c0,0.8-0.7,1.5-1.5,1.5c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22	C16.8,22,17.5,22.7,17.5,23.5z M17.1,8h-2.2v11h2.2V8z"),X(i,"data-icon-path","inner-path"),X(i,"opacity","0"),Ht(e,a)},m(u,c){T(u,e,c),o&&o.m(e,null),B(e,t),B(e,i)},p(u,[c]){u[1]?o?o.p(u,c):(o=go(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null),Ht(e,a=ot(l,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},c&1&&{width:u[0]},c&1&&{height:u[0]},c&4&&u[2],c&8&&u[3]]))},i:He,o:He,d(u){u&&O(e),o&&o.d()}}}function Wa(n,e,t){let i,o;const l=["size","title"];let a=Ie(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=de(de({},e),Ke(f))),t(3,a=Ie(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ke(e),[u,c,o,a,i]}class Ya extends Ae{constructor(e){super(),Fe(this,e,Wa,qa,Ne,{size:0,title:1})}}const pl=Ya;function mo(n){let e,t;return{c(){e=it("title"),t=ye(n[1])},m(i,o){T(i,e,o),B(e,t)},p(i,o){o&2&&je(t,i[1])},d(i){i&&O(e)}}}function Ha(n){let e,t,i,o,l=n[1]&&mo(n),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],u={};for(let c=0;c<a.length;c+=1)u=de(u,a[c]);return{c(){e=it("svg"),l&&l.c(),t=it("path"),i=it("path"),o=it("path"),X(t,"fill","none"),X(t,"d","M16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Zm-1.125-5h2.25V12h-2.25Z"),X(t,"data-icon-path","inner-path"),X(i,"d","M16.002,6.1714h-.004L4.6487,27.9966,4.6506,28H27.3494l.0019-.0034ZM14.875,12h2.25v9h-2.25ZM16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Z"),X(o,"d","M29,30H3a1,1,0,0,1-.8872-1.4614l13-25a1,1,0,0,1,1.7744,0l13,25A1,1,0,0,1,29,30ZM4.6507,28H27.3493l.002-.0033L16.002,6.1714h-.004L4.6487,27.9967Z"),Ht(e,u)},m(c,f){T(c,e,f),l&&l.m(e,null),B(e,t),B(e,i),B(e,o)},p(c,[f]){c[1]?l?l.p(c,f):(l=mo(c),l.c(),l.m(e,t)):l&&(l.d(1),l=null),Ht(e,u=ot(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},f&1&&{width:c[0]},f&1&&{height:c[0]},f&4&&c[2],f&8&&c[3]]))},i:He,o:He,d(c){c&&O(e),l&&l.d()}}}function Za(n,e,t){let i,o;const l=["size","title"];let a=Ie(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=de(de({},e),Ke(f))),t(3,a=Ie(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ke(e),[u,c,o,a,i]}class Ka extends Ae{constructor(e){super(),Fe(this,e,Za,Ha,Ne,{size:0,title:1})}}const Qa=Ka,Xa=n=>({}),vo=n=>({});function bo(n){let e,t;const i=n[16].labelText,o=st(i,n,n[15],vo),l=o||$a(n);return{c(){e=q("span"),l&&l.c(),k(e,"bx--visually-hidden",n[7])},m(a,u){T(a,e,u),l&&l.m(e,null),t=!0},p(a,u){o?o.p&&(!t||u&32768)&&ut(o,i,a,a[15],t?ct(i,a[15],u,Xa):ft(a[15]),vo):l&&l.p&&(!t||u&64)&&l.p(a,t?u:-1),(!t||u&128)&&k(e,"bx--visually-hidden",a[7])},i(a){t||(J(l,a),t=!0)},o(a){H(l,a),t=!1},d(a){a&&O(e),l&&l.d(a)}}}function $a(n){let e;return{c(){e=ye(n[6])},m(t,i){T(t,e,i)},p(t,i){i&64&&je(e,t[6])},d(t){t&&O(e)}}}function es(n){let e,t,i,o,l,a,u,c,f,h=(n[6]||n[13].labelText)&&bo(n),m=[n[12]],b={};for(let p=0;p<m.length;p+=1)b=de(b,m[p]);return{c(){e=q("div"),t=q("input"),i=K(),o=q("label"),l=q("span"),a=K(),h&&h.c(),X(t,"type","radio"),X(t,"id",n[8]),X(t,"name",n[9]),t.checked=n[0],t.disabled=n[3],t.required=n[4],t.value=n[2],k(t,"bx--radio-button",!0),k(l,"bx--radio-button__appearance",!0),X(o,"for",n[8]),k(o,"bx--radio-button__label",!0),qe(e,b),k(e,"bx--radio-button-wrapper",!0),k(e,"bx--radio-button-wrapper--label-left",n[5]==="left")},m(p,v){T(p,e,v),B(e,t),n[18](t),B(e,i),B(e,o),B(o,l),B(o,a),h&&h.m(o,null),u=!0,c||(f=[ne(t,"change",n[17]),ne(t,"change",n[19])],c=!0)},p(p,[v]){(!u||v&256)&&X(t,"id",p[8]),(!u||v&512)&&X(t,"name",p[9]),(!u||v&1)&&(t.checked=p[0]),(!u||v&8)&&(t.disabled=p[3]),(!u||v&16)&&(t.required=p[4]),(!u||v&4)&&(t.value=p[2]),p[6]||p[13].labelText?h?(h.p(p,v),v&8256&&J(h,1)):(h=bo(p),h.c(),J(h,1),h.m(o,null)):h&&(tt(),H(h,1,1,()=>{h=null}),nt()),(!u||v&256)&&X(o,"for",p[8]),qe(e,b=ot(m,[v&4096&&p[12]])),k(e,"bx--radio-button-wrapper",!0),k(e,"bx--radio-button-wrapper--label-left",p[5]==="left")},i(p){u||(J(h),u=!0)},o(p){H(h),u=!1},d(p){p&&O(e),n[18](null),h&&h.d(),c=!1,dt(f)}}}function ts(n,e,t){const i=["value","checked","disabled","required","labelPosition","labelText","hideLabel","id","name","ref"];let o=Ie(e,i),l,{$$slots:a={},$$scope:u}=e;const c=ki(a);let{value:f=""}=e,{checked:h=!1}=e,{disabled:m=!1}=e,{required:b=!1}=e,{labelPosition:p="right"}=e,{labelText:v=""}=e,{hideLabel:M=!1}=e,{id:P="ccs-"+Math.random().toString(36)}=e,{name:U=""}=e,{ref:L=null}=e;const I=ln("RadioButtonGroup"),N=I?I.selectedValue:_n(h?f:void 0);xt(n,N,G=>t(14,l=G)),I&&I.add({id:P,checked:h,disabled:m,value:f});function F(G){se.call(this,n,G)}function R(G){Qe[G?"unshift":"push"](()=>{L=G,t(1,L)})}const be=()=>{I&&I.update(f)};return n.$$set=G=>{e=de(de({},e),Ke(G)),t(12,o=Ie(e,i)),"value"in G&&t(2,f=G.value),"checked"in G&&t(0,h=G.checked),"disabled"in G&&t(3,m=G.disabled),"required"in G&&t(4,b=G.required),"labelPosition"in G&&t(5,p=G.labelPosition),"labelText"in G&&t(6,v=G.labelText),"hideLabel"in G&&t(7,M=G.hideLabel),"id"in G&&t(8,P=G.id),"name"in G&&t(9,U=G.name),"ref"in G&&t(1,L=G.ref),"$$scope"in G&&t(15,u=G.$$scope)},n.$$.update=()=>{n.$$.dirty&16388&&t(0,h=l===f)},[h,L,f,m,b,p,v,M,P,U,I,N,o,c,l,u,a,F,R,be]}class ns extends Ae{constructor(e){super(),Fe(this,e,ts,es,Ne,{value:2,checked:0,disabled:3,required:4,labelPosition:5,labelText:6,hideLabel:7,id:8,name:9,ref:1})}}const si=ns;function _o(n){let e,t;return{c(){e=it("title"),t=ye(n[1])},m(i,o){T(i,e,o),B(e,t)},p(i,o){o&2&&je(t,i[1])},d(i){i&&O(e)}}}function is(n){let e,t,i=n[1]&&_o(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let a=0;a<o.length;a+=1)l=de(l,o[a]);return{c(){e=it("svg"),i&&i.c(),t=it("path"),X(t,"d","M30 28.6L3.4 2 2 3.4l10.1 10.1L4 21.6V28h6.4l8.1-8.1L28.6 30 30 28.6zM9.6 26H6v-3.6l7.5-7.5 3.6 3.6L9.6 26zM29.4 6.2L29.4 6.2l-3.6-3.6c-.8-.8-2-.8-2.8 0l0 0 0 0-8 8 1.4 1.4L20 8.4l3.6 3.6L20 15.6l1.4 1.4 8-8C30.2 8.2 30.2 7 29.4 6.2L29.4 6.2zM25 10.6L21.4 7l3-3L28 7.6 25 10.6z"),Ht(e,l)},m(a,u){T(a,e,u),i&&i.m(e,null),B(e,t)},p(a,[u]){a[1]?i?i.p(a,u):(i=_o(a),i.c(),i.m(e,t)):i&&(i.d(1),i=null),Ht(e,l=ot(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:a[0]},u&1&&{height:a[0]},u&4&&a[2],u&8&&a[3]]))},i:He,o:He,d(a){a&&O(e),i&&i.d()}}}function rs(n,e,t){let i,o;const l=["size","title"];let a=Ie(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=de(de({},e),Ke(f))),t(3,a=Ie(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ke(e),[u,c,o,a,i]}class os extends Ae{constructor(e){super(),Fe(this,e,rs,is,Ne,{size:0,title:1})}}const ls=os;function as(n){let e,t,i,o;const l=n[5].default,a=st(l,n,n[4],null);let u=[n[3]],c={};for(let f=0;f<u.length;f+=1)c=de(c,u[f]);return{c(){e=q("ol"),a&&a.c(),qe(e,c),k(e,"bx--list--ordered",!n[1]),k(e,"bx--list--ordered--native",n[1]),k(e,"bx--list--nested",n[0]),k(e,"bx--list--expressive",n[2])},m(f,h){T(f,e,h),a&&a.m(e,null),t=!0,i||(o=[ne(e,"click",n[6]),ne(e,"mouseover",n[7]),ne(e,"mouseenter",n[8]),ne(e,"mouseleave",n[9])],i=!0)},p(f,[h]){a&&a.p&&(!t||h&16)&&ut(a,l,f,f[4],t?ct(l,f[4],h,null):ft(f[4]),null),qe(e,c=ot(u,[h&8&&f[3]])),k(e,"bx--list--ordered",!f[1]),k(e,"bx--list--ordered--native",f[1]),k(e,"bx--list--nested",f[0]),k(e,"bx--list--expressive",f[2])},i(f){t||(J(a,f),t=!0)},o(f){H(a,f),t=!1},d(f){f&&O(e),a&&a.d(f),i=!1,dt(o)}}}function ss(n,e,t){const i=["nested","native","expressive"];let o=Ie(e,i),{$$slots:l={},$$scope:a}=e,{nested:u=!1}=e,{native:c=!1}=e,{expressive:f=!1}=e;function h(v){se.call(this,n,v)}function m(v){se.call(this,n,v)}function b(v){se.call(this,n,v)}function p(v){se.call(this,n,v)}return n.$$set=v=>{e=de(de({},e),Ke(v)),t(3,o=Ie(e,i)),"nested"in v&&t(0,u=v.nested),"native"in v&&t(1,c=v.native),"expressive"in v&&t(2,f=v.expressive),"$$scope"in v&&t(4,a=v.$$scope)},[u,c,f,o,a,l,h,m,b,p]}class us extends Ae{constructor(e){super(),Fe(this,e,ss,as,Ne,{nested:0,native:1,expressive:2})}}const fs=us,cs=n=>({}),yo=n=>({});function wo(n){let e,t;const i=n[11].legendText,o=st(i,n,n[10],yo),l=o||ds(n);return{c(){e=q("legend"),l&&l.c(),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[2])},m(a,u){T(a,e,u),l&&l.m(e,null),t=!0},p(a,u){o?o.p&&(!t||u&1024)&&ut(o,i,a,a[10],t?ct(i,a[10],u,cs):ft(a[10]),yo):l&&l.p&&(!t||u&2)&&l.p(a,t?u:-1),(!t||u&4)&&k(e,"bx--visually-hidden",a[2])},i(a){t||(J(l,a),t=!0)},o(a){H(l,a),t=!1},d(a){a&&O(e),l&&l.d(a)}}}function ds(n){let e;return{c(){e=ye(n[1])},m(t,i){T(t,e,i)},p(t,i){i&2&&je(e,t[1])},d(t){t&&O(e)}}}function hs(n){let e,t,i,o,l,a,u=(n[1]||n[8].legendText)&&wo(n);const c=n[11].default,f=st(c,n,n[10],null);let h=[{id:n[5]},n[7]],m={};for(let b=0;b<h.length;b+=1)m=de(m,h[b]);return{c(){e=q("div"),t=q("fieldset"),u&&u.c(),i=K(),f&&f.c(),t.disabled=n[0],k(t,"bx--radio-button-group",!0),k(t,"bx--radio-button-group--vertical",n[4]==="vertical"),k(t,"bx--radio-button-group--label-left",n[3]==="left"),k(t,"bx--radio-button-group--label-right",n[3]==="right"),qe(e,m),k(e,"bx--form-item",!0)},m(b,p){T(b,e,p),B(e,t),u&&u.m(t,null),B(t,i),f&&f.m(t,null),o=!0,l||(a=[ne(e,"click",n[12]),ne(e,"mouseover",n[13]),ne(e,"mouseenter",n[14]),ne(e,"mouseleave",n[15])],l=!0)},p(b,[p]){b[1]||b[8].legendText?u?(u.p(b,p),p&258&&J(u,1)):(u=wo(b),u.c(),J(u,1),u.m(t,i)):u&&(tt(),H(u,1,1,()=>{u=null}),nt()),f&&f.p&&(!o||p&1024)&&ut(f,c,b,b[10],o?ct(c,b[10],p,null):ft(b[10]),null),(!o||p&1)&&(t.disabled=b[0]),(!o||p&16)&&k(t,"bx--radio-button-group--vertical",b[4]==="vertical"),(!o||p&8)&&k(t,"bx--radio-button-group--label-left",b[3]==="left"),(!o||p&8)&&k(t,"bx--radio-button-group--label-right",b[3]==="right"),qe(e,m=ot(h,[(!o||p&32)&&{id:b[5]},p&128&&b[7]])),k(e,"bx--form-item",!0)},i(b){o||(J(u),J(f,b),o=!0)},o(b){H(u),H(f,b),o=!1},d(b){b&&O(e),u&&u.d(),f&&f.d(b),l=!1,dt(a)}}}function ps(n,e,t){const i=["selected","disabled","legendText","hideLegend","labelPosition","orientation","id"];let o=Ie(e,i),l,{$$slots:a={},$$scope:u}=e;const c=ki(a);let{selected:f=void 0}=e,{disabled:h=!1}=e,{legendText:m=""}=e,{hideLegend:b=!1}=e,{labelPosition:p="right"}=e,{orientation:v="horizontal"}=e,{id:M=void 0}=e;const P=fl(),U=_n(f);xt(n,U,R=>t(16,l=R)),mr("RadioButtonGroup",{selectedValue:U,add:({checked:R,value:be})=>{R&&U.set(be)},update:R=>{t(9,f=R)}}),an(()=>{io(U,l=f,l)}),va(()=>{io(U,l=f,l)}),U.subscribe(R=>{t(9,f=R),P("change",R)});function L(R){se.call(this,n,R)}function I(R){se.call(this,n,R)}function N(R){se.call(this,n,R)}function F(R){se.call(this,n,R)}return n.$$set=R=>{e=de(de({},e),Ke(R)),t(7,o=Ie(e,i)),"selected"in R&&t(9,f=R.selected),"disabled"in R&&t(0,h=R.disabled),"legendText"in R&&t(1,m=R.legendText),"hideLegend"in R&&t(2,b=R.hideLegend),"labelPosition"in R&&t(3,p=R.labelPosition),"orientation"in R&&t(4,v=R.orientation),"id"in R&&t(5,M=R.id),"$$scope"in R&&t(10,u=R.$$scope)},[h,m,b,p,v,M,U,o,c,f,u,a,L,I,N,F]}class gs extends Ae{constructor(e){super(),Fe(this,e,ps,hs,Ne,{selected:9,disabled:0,legendText:1,hideLegend:2,labelPosition:3,orientation:4,id:5})}}const ms=gs,vs=n=>({}),So=n=>({});function ko(n){let e,t,i,o;const l=n[20].labelText,a=st(l,n,n[19],So),u=a||bs(n);let c=n[5]&&Eo(n);return{c(){e=q("div"),t=q("label"),u&&u.c(),i=K(),c&&c.c(),X(t,"for",n[14]),k(t,"bx--label",!0),k(t,"bx--visually-hidden",n[11]),k(t,"bx--label--disabled",n[7]),k(e,"bx--text-area__label-wrapper",!0)},m(f,h){T(f,e,h),B(e,t),u&&u.m(t,null),B(e,i),c&&c.m(e,null),o=!0},p(f,h){a?a.p&&(!o||h[0]&524288)&&ut(a,l,f,f[19],o?ct(l,f[19],h,vs):ft(f[19]),So):u&&u.p&&(!o||h[0]&1024)&&u.p(f,o?h:[-1,-1]),(!o||h[0]&16384)&&X(t,"for",f[14]),(!o||h[0]&2048)&&k(t,"bx--visually-hidden",f[11]),(!o||h[0]&128)&&k(t,"bx--label--disabled",f[7]),f[5]?c?c.p(f,h):(c=Eo(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(f){o||(J(u,f),o=!0)},o(f){H(u,f),o=!1},d(f){f&&O(e),u&&u.d(f),c&&c.d()}}}function bs(n){let e;return{c(){e=ye(n[10])},m(t,i){T(t,e,i)},p(t,i){i[0]&1024&&je(e,t[10])},d(t){t&&O(e)}}}function Eo(n){let e,t=n[0].length+"",i,o,l;return{c(){e=q("div"),i=ye(t),o=ye("/"),l=ye(n[5]),k(e,"bx--label",!0),k(e,"bx--label--disabled",n[7])},m(a,u){T(a,e,u),B(e,i),B(e,o),B(e,l)},p(a,u){u[0]&1&&t!==(t=a[0].length+"")&&je(i,t),u[0]&32&&je(l,a[5]),u[0]&128&&k(e,"bx--label--disabled",a[7])},d(a){a&&O(e)}}}function xo(n){let e,t;return e=new pl({props:{class:"bx--text-area__invalid-icon"}}),{c(){pe(e.$$.fragment)},m(i,o){ge(e,i,o),t=!0},i(i){t||(J(e.$$.fragment,i),t=!0)},o(i){H(e.$$.fragment,i),t=!1},d(i){me(e,i)}}}function Co(n){let e,t;return{c(){e=q("div"),t=ye(n[9]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[7])},m(i,o){T(i,e,o),B(e,t)},p(i,o){o[0]&512&&je(t,i[9]),o[0]&128&&k(e,"bx--form__helper-text--disabled",i[7])},d(i){i&&O(e)}}}function Mo(n){let e,t;return{c(){e=q("div"),t=ye(n[13]),X(e,"id",n[16]),k(e,"bx--form-requirement",!0)},m(i,o){T(i,e,o),B(e,t)},p(i,o){o[0]&8192&&je(t,i[13]),o[0]&65536&&X(e,"id",i[16])},d(i){i&&O(e)}}}function _s(n){let e,t,i,o,l,a,u,c,f,h,m,b,p,v,M=(n[10]||n[17].labelText)&&!n[11]&&ko(n),P=n[12]&&xo(),U=[{"aria-invalid":a=n[12]||void 0},{"aria-describedby":u=n[12]?n[16]:void 0},{disabled:n[7]},{id:n[14]},{name:n[15]},{cols:n[3]},{rows:n[4]},{placeholder:n[2]},{readOnly:n[8]},{maxlength:c=n[5]??void 0},n[18]],L={};for(let F=0;F<U.length;F+=1)L=de(L,U[F]);let I=!n[12]&&n[9]&&Co(n),N=n[12]&&Mo(n);return{c(){e=q("div"),M&&M.c(),t=K(),i=q("div"),P&&P.c(),o=K(),l=q("textarea"),h=K(),I&&I.c(),m=K(),N&&N.c(),qe(l,L),k(l,"bx--text-area",!0),k(l,"bx--text-area--light",n[6]),k(l,"bx--text-area--invalid",n[12]),X(i,"data-invalid",f=n[12]||void 0),k(i,"bx--text-area__wrapper",!0),k(e,"bx--form-item",!0)},m(F,R){T(F,e,R),M&&M.m(e,null),B(e,t),B(e,i),P&&P.m(i,null),B(i,o),B(i,l),l.autofocus&&l.focus(),n[32](l),vn(l,n[0]),B(e,h),I&&I.m(e,null),B(e,m),N&&N.m(e,null),b=!0,p||(v=[ne(l,"input",n[33]),ne(l,"change",n[25]),ne(l,"input",n[26]),ne(l,"keydown",n[27]),ne(l,"keyup",n[28]),ne(l,"focus",n[29]),ne(l,"blur",n[30]),ne(l,"paste",n[31]),ne(e,"click",n[21]),ne(e,"mouseover",n[22]),ne(e,"mouseenter",n[23]),ne(e,"mouseleave",n[24])],p=!0)},p(F,R){(F[10]||F[17].labelText)&&!F[11]?M?(M.p(F,R),R[0]&134144&&J(M,1)):(M=ko(F),M.c(),J(M,1),M.m(e,t)):M&&(tt(),H(M,1,1,()=>{M=null}),nt()),F[12]?P?R[0]&4096&&J(P,1):(P=xo(),P.c(),J(P,1),P.m(i,o)):P&&(tt(),H(P,1,1,()=>{P=null}),nt()),qe(l,L=ot(U,[(!b||R[0]&4096&&a!==(a=F[12]||void 0))&&{"aria-invalid":a},(!b||R[0]&69632&&u!==(u=F[12]?F[16]:void 0))&&{"aria-describedby":u},(!b||R[0]&128)&&{disabled:F[7]},(!b||R[0]&16384)&&{id:F[14]},(!b||R[0]&32768)&&{name:F[15]},(!b||R[0]&8)&&{cols:F[3]},(!b||R[0]&16)&&{rows:F[4]},(!b||R[0]&4)&&{placeholder:F[2]},(!b||R[0]&256)&&{readOnly:F[8]},(!b||R[0]&32&&c!==(c=F[5]??void 0))&&{maxlength:c},R[0]&262144&&F[18]])),R[0]&1&&vn(l,F[0]),k(l,"bx--text-area",!0),k(l,"bx--text-area--light",F[6]),k(l,"bx--text-area--invalid",F[12]),(!b||R[0]&4096&&f!==(f=F[12]||void 0))&&X(i,"data-invalid",f),!F[12]&&F[9]?I?I.p(F,R):(I=Co(F),I.c(),I.m(e,m)):I&&(I.d(1),I=null),F[12]?N?N.p(F,R):(N=Mo(F),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},i(F){b||(J(M),J(P),b=!0)},o(F){H(M),H(P),b=!1},d(F){F&&O(e),M&&M.d(),P&&P.d(),n[32](null),I&&I.d(),N&&N.d(),p=!1,dt(v)}}}function ys(n,e,t){let i;const o=["value","placeholder","cols","rows","maxCount","light","disabled","readonly","helperText","labelText","hideLabel","invalid","invalidText","id","name","ref"];let l=Ie(e,o),{$$slots:a={},$$scope:u}=e;const c=ki(a);let{value:f=""}=e,{placeholder:h=""}=e,{cols:m=50}=e,{rows:b=4}=e,{maxCount:p=void 0}=e,{light:v=!1}=e,{disabled:M=!1}=e,{readonly:P=!1}=e,{helperText:U=""}=e,{labelText:L=""}=e,{hideLabel:I=!1}=e,{invalid:N=!1}=e,{invalidText:F=""}=e,{id:R="ccs-"+Math.random().toString(36)}=e,{name:be=void 0}=e,{ref:G=null}=e;function fe(x){se.call(this,n,x)}function ae(x){se.call(this,n,x)}function D(x){se.call(this,n,x)}function $(x){se.call(this,n,x)}function j(x){se.call(this,n,x)}function ie(x){se.call(this,n,x)}function Pe(x){se.call(this,n,x)}function Oe(x){se.call(this,n,x)}function Re(x){se.call(this,n,x)}function Ge(x){se.call(this,n,x)}function Ve(x){se.call(this,n,x)}function ue(x){Qe[x?"unshift":"push"](()=>{G=x,t(1,G)})}function ze(){f=this.value,t(0,f)}return n.$$set=x=>{e=de(de({},e),Ke(x)),t(18,l=Ie(e,o)),"value"in x&&t(0,f=x.value),"placeholder"in x&&t(2,h=x.placeholder),"cols"in x&&t(3,m=x.cols),"rows"in x&&t(4,b=x.rows),"maxCount"in x&&t(5,p=x.maxCount),"light"in x&&t(6,v=x.light),"disabled"in x&&t(7,M=x.disabled),"readonly"in x&&t(8,P=x.readonly),"helperText"in x&&t(9,U=x.helperText),"labelText"in x&&t(10,L=x.labelText),"hideLabel"in x&&t(11,I=x.hideLabel),"invalid"in x&&t(12,N=x.invalid),"invalidText"in x&&t(13,F=x.invalidText),"id"in x&&t(14,R=x.id),"name"in x&&t(15,be=x.name),"ref"in x&&t(1,G=x.ref),"$$scope"in x&&t(19,u=x.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&t(16,i=`error-${R}`)},[f,G,h,m,b,p,v,M,P,U,L,I,N,F,R,be,i,c,l,u,a,fe,ae,D,$,j,ie,Pe,Oe,Re,Ge,Ve,ue,ze]}class ws extends Ae{constructor(e){super(),Fe(this,e,ys,_s,Ne,{value:0,placeholder:2,cols:3,rows:4,maxCount:5,light:6,disabled:7,readonly:8,helperText:9,labelText:10,hideLabel:11,invalid:12,invalidText:13,id:14,name:15,ref:1},null,[-1,-1])}}const Ss=ws,ks=n=>({}),Io=n=>({}),Es=n=>({}),Po=n=>({});function Lo(n){let e,t,i,o=n[9]&&To(n),l=!n[20]&&n[6]&&Oo(n);return{c(){e=q("div"),o&&o.c(),t=K(),l&&l.c(),k(e,"bx--text-input__label-helper-wrapper",!0)},m(a,u){T(a,e,u),o&&o.m(e,null),B(e,t),l&&l.m(e,null),i=!0},p(a,u){a[9]?o?(o.p(a,u),u[0]&512&&J(o,1)):(o=To(a),o.c(),J(o,1),o.m(e,t)):o&&(tt(),H(o,1,1,()=>{o=null}),nt()),!a[20]&&a[6]?l?l.p(a,u):(l=Oo(a),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(a){i||(J(o),i=!0)},o(a){H(o),i=!1},d(a){a&&O(e),o&&o.d(),l&&l.d()}}}function To(n){let e,t;const i=n[26].labelText,o=st(i,n,n[25],Po),l=o||xs(n);return{c(){e=q("label"),l&&l.c(),X(e,"for",n[7]),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[10]),k(e,"bx--label--disabled",n[5]),k(e,"bx--label--inline",n[16]),k(e,"bx--label--inline--sm",n[2]==="sm"),k(e,"bx--label--inline--xl",n[2]==="xl")},m(a,u){T(a,e,u),l&&l.m(e,null),t=!0},p(a,u){o?o.p&&(!t||u[0]&33554432)&&ut(o,i,a,a[25],t?ct(i,a[25],u,Es):ft(a[25]),Po):l&&l.p&&(!t||u[0]&512)&&l.p(a,t?u:[-1,-1]),(!t||u[0]&128)&&X(e,"for",a[7]),(!t||u[0]&1024)&&k(e,"bx--visually-hidden",a[10]),(!t||u[0]&32)&&k(e,"bx--label--disabled",a[5]),(!t||u[0]&65536)&&k(e,"bx--label--inline",a[16]),(!t||u[0]&4)&&k(e,"bx--label--inline--sm",a[2]==="sm"),(!t||u[0]&4)&&k(e,"bx--label--inline--xl",a[2]==="xl")},i(a){t||(J(l,a),t=!0)},o(a){H(l,a),t=!1},d(a){a&&O(e),l&&l.d(a)}}}function xs(n){let e;return{c(){e=ye(n[9])},m(t,i){T(t,e,i)},p(t,i){i[0]&512&&je(e,t[9])},d(t){t&&O(e)}}}function Oo(n){let e,t;return{c(){e=q("div"),t=ye(n[6]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[5]),k(e,"bx--form__helper-text--inline",n[16])},m(i,o){T(i,e,o),B(e,t)},p(i,o){o[0]&64&&je(t,i[6]),o[0]&32&&k(e,"bx--form__helper-text--disabled",i[5]),o[0]&65536&&k(e,"bx--form__helper-text--inline",i[16])},d(i){i&&O(e)}}}function Ao(n){let e,t;const i=n[26].labelText,o=st(i,n,n[25],Io),l=o||Cs(n);return{c(){e=q("label"),l&&l.c(),X(e,"for",n[7]),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[10]),k(e,"bx--label--disabled",n[5]),k(e,"bx--label--inline",n[16]),k(e,"bx--label--inline-sm",n[16]&&n[2]==="sm"),k(e,"bx--label--inline-xl",n[16]&&n[2]==="xl")},m(a,u){T(a,e,u),l&&l.m(e,null),t=!0},p(a,u){o?o.p&&(!t||u[0]&33554432)&&ut(o,i,a,a[25],t?ct(i,a[25],u,ks):ft(a[25]),Io):l&&l.p&&(!t||u[0]&512)&&l.p(a,t?u:[-1,-1]),(!t||u[0]&128)&&X(e,"for",a[7]),(!t||u[0]&1024)&&k(e,"bx--visually-hidden",a[10]),(!t||u[0]&32)&&k(e,"bx--label--disabled",a[5]),(!t||u[0]&65536)&&k(e,"bx--label--inline",a[16]),(!t||u[0]&65540)&&k(e,"bx--label--inline-sm",a[16]&&a[2]==="sm"),(!t||u[0]&65540)&&k(e,"bx--label--inline-xl",a[16]&&a[2]==="xl")},i(a){t||(J(l,a),t=!0)},o(a){H(l,a),t=!1},d(a){a&&O(e),l&&l.d(a)}}}function Cs(n){let e;return{c(){e=ye(n[9])},m(t,i){T(t,e,i)},p(t,i){i[0]&512&&je(e,t[9])},d(t){t&&O(e)}}}function Fo(n){let e,t;return e=new pl({props:{class:"bx--text-input__invalid-icon"}}),{c(){pe(e.$$.fragment)},m(i,o){ge(e,i,o),t=!0},i(i){t||(J(e.$$.fragment,i),t=!0)},o(i){H(e.$$.fragment,i),t=!1},d(i){me(e,i)}}}function No(n){let e,t;return e=new Qa({props:{class:`bx--text-input__invalid-icon
            bx--text-input__invalid-icon--warning`}}),{c(){pe(e.$$.fragment)},m(i,o){ge(e,i,o),t=!0},i(i){t||(J(e.$$.fragment,i),t=!0)},o(i){H(e.$$.fragment,i),t=!1},d(i){me(e,i)}}}function Ro(n){let e,t;return e=new ls({props:{class:"bx--text-input__readonly-icon"}}),{c(){pe(e.$$.fragment)},m(i,o){ge(e,i,o),t=!0},i(i){t||(J(e.$$.fragment,i),t=!0)},o(i){H(e.$$.fragment,i),t=!1},d(i){me(e,i)}}}function Do(n){let e;return{c(){e=q("hr"),k(e,"bx--text-input__divider",!0)},m(t,i){T(t,e,i)},d(t){t&&O(e)}}}function jo(n){let e,t;return{c(){e=q("div"),t=ye(n[12]),X(e,"id",n[19]),k(e,"bx--form-requirement",!0)},m(i,o){T(i,e,o),B(e,t)},p(i,o){o[0]&4096&&je(t,i[12]),o[0]&524288&&X(e,"id",i[19])},d(i){i&&O(e)}}}function zo(n){let e,t;return{c(){e=q("div"),t=ye(n[14]),X(e,"id",n[18]),k(e,"bx--form-requirement",!0)},m(i,o){T(i,e,o),B(e,t)},p(i,o){o[0]&16384&&je(t,i[14]),o[0]&262144&&X(e,"id",i[18])},d(i){i&&O(e)}}}function Bo(n){let e,t;return{c(){e=q("div"),t=ye(n[6]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[5]),k(e,"bx--form__helper-text--inline",n[16])},m(i,o){T(i,e,o),B(e,t)},p(i,o){o[0]&64&&je(t,i[6]),o[0]&32&&k(e,"bx--form__helper-text--disabled",i[5]),o[0]&65536&&k(e,"bx--form__helper-text--inline",i[16])},d(i){i&&O(e)}}}function Uo(n){let e,t;return{c(){e=q("div"),t=ye(n[12]),X(e,"id",n[19]),k(e,"bx--form-requirement",!0)},m(i,o){T(i,e,o),B(e,t)},p(i,o){o[0]&4096&&je(t,i[12]),o[0]&524288&&X(e,"id",i[19])},d(i){i&&O(e)}}}function Go(n){let e,t;return{c(){e=q("div"),t=ye(n[14]),X(e,"id",n[18]),k(e,"bx--form-requirement",!0)},m(i,o){T(i,e,o),B(e,t)},p(i,o){o[0]&16384&&je(t,i[14]),o[0]&262144&&X(e,"id",i[18])},d(i){i&&O(e)}}}function Ms(n){let e,t,i,o,l,a,u,c,f,h,m,b,p,v,M,P,U,L,I,N,F,R,be,G,fe=n[16]&&Lo(n),ae=!n[16]&&(n[9]||n[24].labelText)&&Ao(n),D=n[11]&&Fo(),$=!n[11]&&n[13]&&No(),j=n[17]&&Ro(),ie=[{"data-invalid":h=n[11]||void 0},{"aria-invalid":m=n[11]||void 0},{"data-warn":b=n[13]||void 0},{"aria-describedby":p=n[11]?n[19]:n[13]?n[18]:void 0},{disabled:n[5]},{id:n[7]},{name:n[8]},{placeholder:n[3]},{required:n[15]},{readOnly:n[17]},n[23]],Pe={};for(let x=0;x<ie.length;x+=1)Pe=de(Pe,ie[x]);let Oe=n[20]&&Do(),Re=n[20]&&!n[16]&&n[11]&&jo(n),Ge=n[20]&&!n[16]&&n[13]&&zo(n),Ve=!n[11]&&!n[13]&&!n[20]&&!n[16]&&n[6]&&Bo(n),ue=!n[20]&&n[11]&&Uo(n),ze=!n[20]&&!n[11]&&n[13]&&Go(n);return{c(){e=q("div"),fe&&fe.c(),t=K(),ae&&ae.c(),i=K(),o=q("div"),l=q("div"),D&&D.c(),a=K(),$&&$.c(),u=K(),j&&j.c(),c=K(),f=q("input"),v=K(),Oe&&Oe.c(),M=K(),Re&&Re.c(),P=K(),Ge&&Ge.c(),I=K(),Ve&&Ve.c(),N=K(),ue&&ue.c(),F=K(),ze&&ze.c(),qe(f,Pe),k(f,"bx--text-input",!0),k(f,"bx--text-input--light",n[4]),k(f,"bx--text-input--invalid",n[11]),k(f,"bx--text-input--warn",n[13]),k(f,"bx--text-input--sm",n[2]==="sm"),k(f,"bx--text-input--xl",n[2]==="xl"),X(l,"data-invalid",U=n[11]||void 0),X(l,"data-warn",L=n[13]||void 0),k(l,"bx--text-input__field-wrapper",!0),k(l,"bx--text-input__field-wrapper--warning",!n[11]&&n[13]),k(o,"bx--text-input__field-outer-wrapper",!0),k(o,"bx--text-input__field-outer-wrapper--inline",n[16]),k(e,"bx--form-item",!0),k(e,"bx--text-input-wrapper",!0),k(e,"bx--text-input-wrapper--inline",n[16]),k(e,"bx--text-input-wrapper--light",n[4]),k(e,"bx--text-input-wrapper--readonly",n[17])},m(x,ve){T(x,e,ve),fe&&fe.m(e,null),B(e,t),ae&&ae.m(e,null),B(e,i),B(e,o),B(o,l),D&&D.m(l,null),B(l,a),$&&$.m(l,null),B(l,u),j&&j.m(l,null),B(l,c),B(l,f),f.autofocus&&f.focus(),n[36](f),vn(f,n[0]),B(l,v),Oe&&Oe.m(l,null),B(l,M),Re&&Re.m(l,null),B(l,P),Ge&&Ge.m(l,null),B(o,I),Ve&&Ve.m(o,null),B(o,N),ue&&ue.m(o,null),B(o,F),ze&&ze.m(o,null),R=!0,be||(G=[ne(f,"input",n[37]),ne(f,"change",n[22]),ne(f,"input",n[21]),ne(f,"keydown",n[31]),ne(f,"keyup",n[32]),ne(f,"focus",n[33]),ne(f,"blur",n[34]),ne(f,"paste",n[35]),ne(e,"click",n[27]),ne(e,"mouseover",n[28]),ne(e,"mouseenter",n[29]),ne(e,"mouseleave",n[30])],be=!0)},p(x,ve){x[16]?fe?(fe.p(x,ve),ve[0]&65536&&J(fe,1)):(fe=Lo(x),fe.c(),J(fe,1),fe.m(e,t)):fe&&(tt(),H(fe,1,1,()=>{fe=null}),nt()),!x[16]&&(x[9]||x[24].labelText)?ae?(ae.p(x,ve),ve[0]&16843264&&J(ae,1)):(ae=Ao(x),ae.c(),J(ae,1),ae.m(e,i)):ae&&(tt(),H(ae,1,1,()=>{ae=null}),nt()),x[11]?D?ve[0]&2048&&J(D,1):(D=Fo(),D.c(),J(D,1),D.m(l,a)):D&&(tt(),H(D,1,1,()=>{D=null}),nt()),!x[11]&&x[13]?$?ve[0]&10240&&J($,1):($=No(),$.c(),J($,1),$.m(l,u)):$&&(tt(),H($,1,1,()=>{$=null}),nt()),x[17]?j?ve[0]&131072&&J(j,1):(j=Ro(),j.c(),J(j,1),j.m(l,c)):j&&(tt(),H(j,1,1,()=>{j=null}),nt()),qe(f,Pe=ot(ie,[(!R||ve[0]&2048&&h!==(h=x[11]||void 0))&&{"data-invalid":h},(!R||ve[0]&2048&&m!==(m=x[11]||void 0))&&{"aria-invalid":m},(!R||ve[0]&8192&&b!==(b=x[13]||void 0))&&{"data-warn":b},(!R||ve[0]&796672&&p!==(p=x[11]?x[19]:x[13]?x[18]:void 0))&&{"aria-describedby":p},(!R||ve[0]&32)&&{disabled:x[5]},(!R||ve[0]&128)&&{id:x[7]},(!R||ve[0]&256)&&{name:x[8]},(!R||ve[0]&8)&&{placeholder:x[3]},(!R||ve[0]&32768)&&{required:x[15]},(!R||ve[0]&131072)&&{readOnly:x[17]},ve[0]&8388608&&x[23]])),ve[0]&1&&f.value!==x[0]&&vn(f,x[0]),k(f,"bx--text-input",!0),k(f,"bx--text-input--light",x[4]),k(f,"bx--text-input--invalid",x[11]),k(f,"bx--text-input--warn",x[13]),k(f,"bx--text-input--sm",x[2]==="sm"),k(f,"bx--text-input--xl",x[2]==="xl"),x[20]?Oe||(Oe=Do(),Oe.c(),Oe.m(l,M)):Oe&&(Oe.d(1),Oe=null),x[20]&&!x[16]&&x[11]?Re?Re.p(x,ve):(Re=jo(x),Re.c(),Re.m(l,P)):Re&&(Re.d(1),Re=null),x[20]&&!x[16]&&x[13]?Ge?Ge.p(x,ve):(Ge=zo(x),Ge.c(),Ge.m(l,null)):Ge&&(Ge.d(1),Ge=null),(!R||ve[0]&2048&&U!==(U=x[11]||void 0))&&X(l,"data-invalid",U),(!R||ve[0]&8192&&L!==(L=x[13]||void 0))&&X(l,"data-warn",L),(!R||ve[0]&10240)&&k(l,"bx--text-input__field-wrapper--warning",!x[11]&&x[13]),!x[11]&&!x[13]&&!x[20]&&!x[16]&&x[6]?Ve?Ve.p(x,ve):(Ve=Bo(x),Ve.c(),Ve.m(o,N)):Ve&&(Ve.d(1),Ve=null),!x[20]&&x[11]?ue?ue.p(x,ve):(ue=Uo(x),ue.c(),ue.m(o,F)):ue&&(ue.d(1),ue=null),!x[20]&&!x[11]&&x[13]?ze?ze.p(x,ve):(ze=Go(x),ze.c(),ze.m(o,null)):ze&&(ze.d(1),ze=null),(!R||ve[0]&65536)&&k(o,"bx--text-input__field-outer-wrapper--inline",x[16]),(!R||ve[0]&65536)&&k(e,"bx--text-input-wrapper--inline",x[16]),(!R||ve[0]&16)&&k(e,"bx--text-input-wrapper--light",x[4]),(!R||ve[0]&131072)&&k(e,"bx--text-input-wrapper--readonly",x[17])},i(x){R||(J(fe),J(ae),J(D),J($),J(j),R=!0)},o(x){H(fe),H(ae),H(D),H($),H(j),R=!1},d(x){x&&O(e),fe&&fe.d(),ae&&ae.d(),D&&D.d(),$&&$.d(),j&&j.d(),n[36](null),Oe&&Oe.d(),Re&&Re.d(),Ge&&Ge.d(),Ve&&Ve.d(),ue&&ue.d(),ze&&ze.d(),be=!1,dt(G)}}}function Is(n,e,t){let i,o,l;const a=["size","value","placeholder","light","disabled","helperText","id","name","labelText","hideLabel","invalid","invalidText","warn","warnText","ref","required","inline","readonly"];let u=Ie(e,a),{$$slots:c={},$$scope:f}=e;const h=ki(c);let{size:m=void 0}=e,{value:b=""}=e,{placeholder:p=""}=e,{light:v=!1}=e,{disabled:M=!1}=e,{helperText:P=""}=e,{id:U="ccs-"+Math.random().toString(36)}=e,{name:L=void 0}=e,{labelText:I=""}=e,{hideLabel:N=!1}=e,{invalid:F=!1}=e,{invalidText:R=""}=e,{warn:be=!1}=e,{warnText:G=""}=e,{ref:fe=null}=e,{required:ae=!1}=e,{inline:D=!1}=e,{readonly:$=!1}=e;const j=ln("Form"),ie=fl();function Pe(ee){return u.type!=="number"?ee:ee!=""?Number(ee):null}const Oe=ee=>{t(0,b=Pe(ee.target.value)),ie("input",b)},Re=ee=>{ie("change",Pe(ee.target.value))};function Ge(ee){se.call(this,n,ee)}function Ve(ee){se.call(this,n,ee)}function ue(ee){se.call(this,n,ee)}function ze(ee){se.call(this,n,ee)}function x(ee){se.call(this,n,ee)}function ve(ee){se.call(this,n,ee)}function xi(ee){se.call(this,n,ee)}function Ci(ee){se.call(this,n,ee)}function Mi(ee){se.call(this,n,ee)}function Ii(ee){Qe[ee?"unshift":"push"](()=>{fe=ee,t(1,fe)})}function Pi(){b=this.value,t(0,b)}return n.$$set=ee=>{e=de(de({},e),Ke(ee)),t(23,u=Ie(e,a)),"size"in ee&&t(2,m=ee.size),"value"in ee&&t(0,b=ee.value),"placeholder"in ee&&t(3,p=ee.placeholder),"light"in ee&&t(4,v=ee.light),"disabled"in ee&&t(5,M=ee.disabled),"helperText"in ee&&t(6,P=ee.helperText),"id"in ee&&t(7,U=ee.id),"name"in ee&&t(8,L=ee.name),"labelText"in ee&&t(9,I=ee.labelText),"hideLabel"in ee&&t(10,N=ee.hideLabel),"invalid"in ee&&t(11,F=ee.invalid),"invalidText"in ee&&t(12,R=ee.invalidText),"warn"in ee&&t(13,be=ee.warn),"warnText"in ee&&t(14,G=ee.warnText),"ref"in ee&&t(1,fe=ee.ref),"required"in ee&&t(15,ae=ee.required),"inline"in ee&&t(16,D=ee.inline),"readonly"in ee&&t(17,$=ee.readonly),"$$scope"in ee&&t(25,f=ee.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&128&&t(19,o=`error-${U}`),n.$$.dirty[0]&128&&t(18,l=`warn-${U}`)},t(20,i=!!j&&j.isFluid),[b,fe,m,p,v,M,P,U,L,I,N,F,R,be,G,ae,D,$,l,o,i,Oe,Re,u,h,f,c,Ge,Ve,ue,ze,x,ve,xi,Ci,Mi,Ii,Pi]}class Ps extends Ae{constructor(e){super(),Fe(this,e,Is,Ms,Ne,{size:2,value:0,placeholder:3,light:4,disabled:5,helperText:6,id:7,name:8,labelText:9,hideLabel:10,invalid:11,invalidText:12,warn:13,warnText:14,ref:1,required:15,inline:16,readonly:17},null,[-1,-1])}}const Ls=Ps;function Ts(n){let e;return{c(){e=ye(`Click one of the draw icons to the top right of the map (the icons allow
      you to draw points, lines, polygons or routes)`)},m(t,i){T(t,e,i)},d(t){t&&O(e)}}}function Os(n){let e;return{c(){e=ye(`Draw the intervention on the map, clicking the original point or 'Finish
      snapping' for the Polygon and Route tools respectively`)},m(t,i){T(t,e,i)},d(t){t&&O(e)}}}function As(n){let e;return{c(){e=ye("Fill in the details that appear (Intervention type, name, description)")},m(t,i){T(t,e,i)},d(t){t&&O(e)}}}function Fs(n){let e;return{c(){e=ye(`Click the "Save" button or "Delete" button to save or remove the
      intervention`)},m(t,i){T(t,e,i)},d(t){t&&O(e)}}}function Ns(n){let e,t,i,o,l,a,u,c;return e=new ai({props:{$$slots:{default:[Ts]},$$scope:{ctx:n}}}),i=new ai({props:{$$slots:{default:[Os]},$$scope:{ctx:n}}}),l=new ai({props:{$$slots:{default:[As]},$$scope:{ctx:n}}}),u=new ai({props:{$$slots:{default:[Fs]},$$scope:{ctx:n}}}),{c(){pe(e.$$.fragment),t=K(),pe(i.$$.fragment),o=K(),pe(l.$$.fragment),a=K(),pe(u.$$.fragment)},m(f,h){ge(e,f,h),T(f,t,h),ge(i,f,h),T(f,o,h),ge(l,f,h),T(f,a,h),ge(u,f,h),c=!0},p(f,h){const m={};h&4&&(m.$$scope={dirty:h,ctx:f}),e.$set(m);const b={};h&4&&(b.$$scope={dirty:h,ctx:f}),i.$set(b);const p={};h&4&&(p.$$scope={dirty:h,ctx:f}),l.$set(p);const v={};h&4&&(v.$$scope={dirty:h,ctx:f}),u.$set(v)},i(f){c||(J(e.$$.fragment,f),J(i.$$.fragment,f),J(l.$$.fragment,f),J(u.$$.fragment,f),c=!0)},o(f){H(e.$$.fragment,f),H(i.$$.fragment,f),H(l.$$.fragment,f),H(u.$$.fragment,f),c=!1},d(f){me(e,f),f&&O(t),me(i,f),f&&O(o),me(l,f),f&&O(a),me(u,f)}}}function Rs(n){let e,t,i,o,l,a,u,c,f,h,m,b,p,v,M,P,U,L,I,N,F,R,be,G,fe,ae;return l=new fs({props:{$$slots:{default:[Ns]},$$scope:{ctx:n}}}),{c(){e=q("p"),e.textContent="For each intervention:",t=K(),i=q("br"),o=K(),pe(l.$$.fragment),a=K(),u=q("br"),c=K(),f=q("p"),f.textContent=`Repeat the steps above for each substantial infrastructure intervention in
    the scheme.`,h=K(),m=q("br"),b=K(),p=q("p"),p.textContent=`To make further edits to attribute data, or to delete an intervention, click
    on its name in the left hand panel or its geometry in the map.`,v=K(),M=q("br"),P=K(),U=q("p"),U.textContent=`Click the "Export to GeoJSON" button to download the dataset representing
    the scheme, which can be made up of one or more intervention, as a GeoJSON
    file. After saving the file, you can delete the interventions, change the
    scheme name, and start a new set of interventions representing a new scheme.`,L=K(),I=q("br"),N=K(),F=q("p"),F.textContent=`To load a GeoJSON file that you have already saved from the tool, click the
    "Load from GeoJSON" button and select the file.`,R=K(),be=q("br"),G=K(),fe=q("p"),fe.innerHTML=`Note: the <strong>Route tool</strong> works by calculating routes between
    start and end points using the existing transport network according to
    OpenStreetMap. Use it by clicking on the location where you would like the
    route to start and then clicking on the location where you would like the
    route to end on the map. The route will be calculated and drawn on the map.
    After you click &quot;Finish snapping&quot; you can edit the route by dragging
    individual points. This can be useful for representing links that are not
    part of the existing transport network, such as a new bridge or path.
    However,
    <strong>you cannot add or remove points</strong> with the Route tool. If the
    planned route intervention you would like to sketch as part of a scheme contains
    one or more new links (for example containing new bridges or paths between cul-de-sacs),
    you may want to use the Line tool instead.`},m(D,$){T(D,e,$),T(D,t,$),T(D,i,$),T(D,o,$),ge(l,D,$),T(D,a,$),T(D,u,$),T(D,c,$),T(D,f,$),T(D,h,$),T(D,m,$),T(D,b,$),T(D,p,$),T(D,v,$),T(D,M,$),T(D,P,$),T(D,U,$),T(D,L,$),T(D,I,$),T(D,N,$),T(D,F,$),T(D,R,$),T(D,be,$),T(D,G,$),T(D,fe,$),ae=!0},p(D,$){const j={};$&4&&(j.$$scope={dirty:$,ctx:D}),l.$set(j)},i(D){ae||(J(l.$$.fragment,D),ae=!0)},o(D){H(l.$$.fragment,D),ae=!1},d(D){D&&O(e),D&&O(t),D&&O(i),D&&O(o),me(l,D),D&&O(a),D&&O(u),D&&O(c),D&&O(f),D&&O(h),D&&O(m),D&&O(b),D&&O(p),D&&O(v),D&&O(M),D&&O(P),D&&O(U),D&&O(L),D&&O(I),D&&O(N),D&&O(F),D&&O(R),D&&O(be),D&&O(G),D&&O(fe)}}}function Ds(n){let e,t,i;function o(a){n[1](a)}let l={passiveModal:!0,modalHeading:"Instructions",$$slots:{default:[Rs]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.open=n[0]),e=new ba({props:l}),Qe.push(()=>Ct(e,"open",o,n[0])),{c(){pe(e.$$.fragment)},m(a,u){ge(e,a,u),i=!0},p(a,[u]){const c={};u&4&&(c.$$scope={dirty:u,ctx:a}),!t&&u&1&&(t=!0,c.open=a[0],Mt(()=>t=!1)),e.$set(c)},i(a){i||(J(e.$$.fragment,a),i=!0)},o(a){H(e.$$.fragment,a),i=!1},d(a){me(e,a)}}}function js(n,e,t){let{open:i}=e;function o(l){i=l,t(0,i)}return n.$$set=l=>{"open"in l&&t(0,i=l.open)},[i,o]}class zs extends Ae{constructor(e){super(),Fe(this,e,js,Ds,Ne,{open:0})}}function Vo(n){let e;const t=n[3].default,i=st(t,n,n[2],null);return{c(){i&&i.c()},m(o,l){i&&i.m(o,l),e=!0},p(o,l){i&&i.p&&(!e||l&4)&&ut(i,t,o,o[2],e?ct(t,o[2],l,null):ft(o[2]),null)},i(o){e||(J(i,o),e=!0)},o(o){H(i,o),e=!1},d(o){i&&i.d(o)}}}function Bs(n){let e,t,i=n[1]&&Vo(n);return{c(){e=q("div"),i&&i.c(),X(e,"class","map svelte-12dpf1u")},m(o,l){T(o,e,l),i&&i.m(e,null),n[4](e),t=!0},p(o,[l]){o[1]?i?(i.p(o,l),l&2&&J(i,1)):(i=Vo(o),i.c(),J(i,1),i.m(e,null)):i&&(tt(),H(i,1,1,()=>{i=null}),nt())},i(o){t||(J(i),t=!0)},o(o){H(i),t=!1},d(o){o&&O(e),i&&i.d(),n[4](null)}}}function Us(n,e,t){let{$$slots:i={},$$scope:o}=e,l,a,u=!1,c=!window.location.hash;mr("map",{getMap:()=>l,setCamera:c}),an(()=>{l=new $i.Map({container:a,style:"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",hash:!0}),l.addControl(new $i.ScaleControl),l.addControl(new $i.NavigationControl,"bottom-right"),l.on("load",()=>{t(1,u=!0)}),new ResizeObserver(()=>{l.resize()}).observe(a)}),cl(()=>{l.remove()});function f(h){Qe[h?"unshift":"push"](()=>{a=h,t(0,a)})}return n.$$set=h=>{"$$scope"in h&&t(2,o=h.$$scope)},[a,u,o,i,f]}class Gs extends Ae{constructor(e){super(),Fe(this,e,Us,Bs,Ne,{})}}const Vs=n=>({}),Jo=n=>({}),Js=n=>({}),qo=n=>({}),qs=n=>({}),Wo=n=>({});function Ws(n){let e,t,i,o,l,a,u,c,f,h,m,b;const p=n[3].nav,v=st(p,n,n[2],Wo),M=n[3].sidebar,P=st(M,n,n[2],qo),U=n[3].main,L=st(U,n,n[2],Jo);return{c(){e=q("aside"),t=q("div"),i=q("nav"),v&&v.c(),o=K(),P&&P.c(),l=K(),a=q("div"),a.textContent="→",c=K(),f=q("main"),L&&L.c(),X(i,"class","svelte-19nerxn"),X(t,"class","sidebar-content content-container svelte-19nerxn"),X(a,"class","sidebar-toggle rounded-rect svelte-19nerxn"),X(e,"class",u=ro(n[0]?"":"collapsed")+" svelte-19nerxn"),X(f,"class","svelte-19nerxn")},m(I,N){T(I,e,N),B(e,t),B(t,i),v&&v.m(i,null),B(t,o),P&&P.m(t,null),B(e,l),B(e,a),T(I,c,N),T(I,f,N),L&&L.m(f,null),h=!0,m||(b=ne(a,"click",n[1]),m=!0)},p(I,[N]){v&&v.p&&(!h||N&4)&&ut(v,p,I,I[2],h?ct(p,I[2],N,qs):ft(I[2]),Wo),P&&P.p&&(!h||N&4)&&ut(P,M,I,I[2],h?ct(M,I[2],N,Js):ft(I[2]),qo),(!h||N&1&&u!==(u=ro(I[0]?"":"collapsed")+" svelte-19nerxn"))&&X(e,"class",u),L&&L.p&&(!h||N&4)&&ut(L,U,I,I[2],h?ct(U,I[2],N,Vs):ft(I[2]),Jo)},i(I){h||(J(v,I),J(P,I),J(L,I),h=!0)},o(I){H(v,I),H(P,I),H(L,I),h=!1},d(I){I&&O(e),v&&v.d(I),P&&P.d(I),I&&O(c),I&&O(f),L&&L.d(I),m=!1,b()}}}function Ys(n,e,t){let{$$slots:i={},$$scope:o}=e,l=!0;function a(){t(0,l=!l)}return n.$$set=u=>{"$$scope"in u&&t(2,o=u.$$scope)},[l,a,o,i]}class Hs extends Ae{constructor(e){super(),Fe(this,e,Ys,Ws,Ne,{})}}function gl(n,e,t){t===void 0&&(t={});var i={type:"Feature"};return(t.id===0||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function Zs(n,e,t){t===void 0&&(t={});for(var i=0,o=n;i<o.length;i++){var l=o[i];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<l[l.length-1].length;a++)if(l[l.length-1][a]!==l[0][a])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:n};return gl(u,e,t)}function Ks(n,e,t){t===void 0&&(t={});var i={type:"MultiPolygon",coordinates:n};return gl(i,e,t)}/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Qs(n,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(f){return function(h){return c([f,h])}}function c(f){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(l=f[0]&2?o.return:f[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,f[1])).done)return l;switch(o=0,l&&(f=[f[0]&2,l.value]),f[0]){case 0:case 1:l=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,o=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!l||f[1]>l[0]&&f[1]<l[3])){t.label=f[1];break}if(f[0]===6&&t.label<l[1]){t.label=l[1],l=f;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(f);break}l[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],o=0}finally{i=l=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Zt=function(){function n(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return n}();function Xs(n,e){return n>e?1:n<e?-1:0}function qt(n,e,t){for(var i=new Zt(null,null),o=i,l=i;;){var a=t(n,e.key);if(a<0){if(e.left===null)break;if(t(n,e.left.key)<0){var u=e.left;if(e.left=u.right,u.right=e,e=u,e.left===null)break}l.left=e,l=e,e=e.left}else if(a>0){if(e.right===null)break;if(t(n,e.right.key)>0){var u=e.right;if(e.right=u.left,u.left=e,e=u,e.right===null)break}o.right=e,o=e,e=e.right}else break}return o.right=e.left,l.left=e.right,e.left=i.right,e.right=i.left,e}function er(n,e,t,i){var o=new Zt(n,e);if(t===null)return o.left=o.right=null,o;t=qt(n,t,i);var l=i(n,t.key);return l<0?(o.left=t.left,o.right=t,t.left=null):l>=0&&(o.right=t.right,o.left=t,t.right=null),o}function Yo(n,e,t){var i=null,o=null;if(e){e=qt(n,e,t);var l=t(e.key,n);l===0?(i=e.left,o=e.right):l<0?(o=e.right,e.right=null,i=e):(i=e.left,e.left=null,o=e)}return{left:i,right:o}}function $s(n,e,t){return e===null?n:(n===null||(e=qt(n.key,e,t),e.left=n),e)}function rr(n,e,t,i,o){if(n){i(""+e+(t?"└── ":"├── ")+o(n)+`
`);var l=e+(t?"    ":"│   ");n.left&&rr(n.left,l,!1,i,o),n.right&&rr(n.right,l,!0,i,o)}}var br=function(){function n(e){e===void 0&&(e=Xs),this._root=null,this._size=0,this._comparator=e}return n.prototype.insert=function(e,t){return this._size++,this._root=er(e,t,this._root,this._comparator)},n.prototype.add=function(e,t){var i=new Zt(e,t);this._root===null&&(i.left=i.right=null,this._size++,this._root=i);var o=this._comparator,l=qt(e,this._root,o),a=o(e,l.key);return a===0?this._root=l:(a<0?(i.left=l.left,i.right=l,l.left=null):a>0&&(i.right=l.right,i.left=l,l.right=null),this._size++,this._root=i),this._root},n.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},n.prototype._remove=function(e,t,i){var o;if(t===null)return null;t=qt(e,t,i);var l=i(e,t.key);return l===0?(t.left===null?o=t.right:(o=qt(e,t.left,i),o.right=t.right),this._size--,o):t},n.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=qt(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},n.prototype.findStatic=function(e){for(var t=this._root,i=this._comparator;t;){var o=i(e,t.key);if(o===0)return t;o<0?t=t.left:t=t.right}return null},n.prototype.find=function(e){return this._root&&(this._root=qt(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},n.prototype.contains=function(e){for(var t=this._root,i=this._comparator;t;){var o=i(e,t.key);if(o===0)return!0;o<0?t=t.left:t=t.right}return!1},n.prototype.forEach=function(e,t){for(var i=this._root,o=[],l=!1;!l;)i!==null?(o.push(i),i=i.left):o.length!==0?(i=o.pop(),e.call(t,i),i=i.right):l=!0;return this},n.prototype.range=function(e,t,i,o){for(var l=[],a=this._comparator,u=this._root,c;l.length!==0||u;)if(u)l.push(u),u=u.left;else{if(u=l.pop(),c=a(u.key,t),c>0)break;if(a(u.key,e)>=0&&i.call(o,u))return this;u=u.right}return this},n.prototype.keys=function(){var e=[];return this.forEach(function(t){var i=t.key;return e.push(i)}),e},n.prototype.values=function(){var e=[];return this.forEach(function(t){var i=t.data;return e.push(i)}),e},n.prototype.min=function(){return this._root?this.minNode(this._root).key:null},n.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},n.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},n.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},n.prototype.at=function(e){for(var t=this._root,i=!1,o=0,l=[];!i;)if(t)l.push(t),t=t.left;else if(l.length>0){if(t=l.pop(),o===e)return t;o++,t=t.right}else i=!0;return null},n.prototype.next=function(e){var t=this._root,i=null;if(e.right){for(i=e.right;i.left;)i=i.left;return i}for(var o=this._comparator;t;){var l=o(e.key,t.key);if(l===0)break;l<0?(i=t,t=t.left):t=t.right}return i},n.prototype.prev=function(e){var t=this._root,i=null;if(e.left!==null){for(i=e.left;i.right;)i=i.right;return i}for(var o=this._comparator;t;){var l=o(e.key,t.key);if(l===0)break;l<0?t=t.left:(i=t,t=t.right)}return i},n.prototype.clear=function(){return this._root=null,this._size=0,this},n.prototype.toList=function(){return tu(this._root)},n.prototype.load=function(e,t,i){t===void 0&&(t=[]),i===void 0&&(i=!1);var o=e.length,l=this._comparator;if(i&&ar(e,t,0,o-1,l),this._root===null)this._root=or(e,t,0,o),this._size=o;else{var a=nu(this.toList(),eu(e,t),l);o=this._size+o,this._root=lr({head:a},0,o)}return this},n.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){e===void 0&&(e=function(i){return String(i.key)});var t=[];return rr(this._root,"",!0,function(i){return t.push(i)},e),t.join("")},n.prototype.update=function(e,t,i){var o=this._comparator,l=Yo(e,this._root,o),a=l.left,u=l.right;o(e,t)<0?u=er(t,i,u,o):a=er(t,i,a,o),this._root=$s(a,u,o)},n.prototype.split=function(e){return Yo(e,this._root,this._comparator)},n.prototype[Symbol.iterator]=function(){var e;return Qs(this,function(t){switch(t.label){case 0:e=this.minNode(),t.label=1;case 1:return e?[4,e]:[3,3];case 2:return t.sent(),e=this.next(e),[3,1];case 3:return[2]}})},n}();function or(n,e,t,i){var o=i-t;if(o>0){var l=t+Math.floor(o/2),a=n[l],u=e[l],c=new Zt(a,u);return c.left=or(n,e,t,l),c.right=or(n,e,l+1,i),c}return null}function eu(n,e){for(var t=new Zt(null,null),i=t,o=0;o<n.length;o++)i=i.next=new Zt(n[o],e[o]);return i.next=null,t.next}function tu(n){for(var e=n,t=[],i=!1,o=new Zt(null,null),l=o;!i;)e?(t.push(e),e=e.left):t.length>0?(e=l=l.next=t.pop(),e=e.right):i=!0;return l.next=null,o.next}function lr(n,e,t){var i=t-e;if(i>0){var o=e+Math.floor(i/2),l=lr(n,e,o),a=n.head;return a.left=l,n.head=n.head.next,a.right=lr(n,o+1,t),a}return null}function nu(n,e,t){for(var i=new Zt(null,null),o=i,l=n,a=e;l!==null&&a!==null;)t(l.key,a.key)<0?(o.next=l,l=l.next):(o.next=a,a=a.next),o=o.next;return l!==null?o.next=l:a!==null&&(o.next=a),i.next}function ar(n,e,t,i,o){if(!(t>=i)){for(var l=n[t+i>>1],a=t-1,u=i+1;;){do a++;while(o(n[a],l)<0);do u--;while(o(n[u],l)>0);if(a>=u)break;var c=n[a];n[a]=n[u],n[u]=c,c=e[a],e[a]=e[u],e[u]=c}ar(n,e,t,u,o),ar(n,e,u+1,i,o)}}function gt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ho(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function rt(n,e,t){return e&&Ho(n.prototype,e),t&&Ho(n,t),n}var Tn=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},sr=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var i=e.ll.x<t.ll.x?t.ll.x:e.ll.x,o=e.ur.x<t.ur.x?e.ur.x:t.ur.x,l=e.ll.y<t.ll.y?t.ll.y:e.ll.y,a=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:i,y:l},ur:{x:o,y:a}}},Yt=Number.EPSILON;Yt===void 0&&(Yt=Math.pow(2,-52));var iu=Yt*Yt,ur=function(e,t){if(-Yt<e&&e<Yt&&-Yt<t&&t<Yt)return 0;var i=e-t;return i*i<iu*e*t?0:e<t?-1:1},ru=function(){function n(){gt(this,n),this.reset()}return rt(n,[{key:"reset",value:function(){this.xRounder=new Zo,this.yRounder=new Zo}},{key:"round",value:function(t,i){return{x:this.xRounder.round(t),y:this.yRounder.round(i)}}}]),n}(),Zo=function(){function n(){gt(this,n),this.tree=new br,this.round(0)}return rt(n,[{key:"round",value:function(t){var i=this.tree.add(t),o=this.tree.prev(i);if(o!==null&&ur(i.key,o.key)===0)return this.tree.remove(t),o.key;var l=this.tree.next(i);return l!==null&&ur(i.key,l.key)===0?(this.tree.remove(t),l.key):t}}]),n}(),jn=new ru,Fn=function(e,t){return e.x*t.y-e.y*t.x},ml=function(e,t){return e.x*t.x+e.y*t.y},Ko=function(e,t,i){var o={x:t.x-e.x,y:t.y-e.y},l={x:i.x-e.x,y:i.y-e.y},a=Fn(o,l);return ur(a,0)},pi=function(e){return Math.sqrt(ml(e,e))},ou=function(e,t,i){var o={x:t.x-e.x,y:t.y-e.y},l={x:i.x-e.x,y:i.y-e.y};return Fn(l,o)/pi(l)/pi(o)},lu=function(e,t,i){var o={x:t.x-e.x,y:t.y-e.y},l={x:i.x-e.x,y:i.y-e.y};return ml(l,o)/pi(l)/pi(o)},Qo=function(e,t,i){return t.y===0?null:{x:e.x+t.x/t.y*(i-e.y),y:i}},Xo=function(e,t,i){return t.x===0?null:{x:i,y:e.y+t.y/t.x*(i-e.x)}},au=function(e,t,i,o){if(t.x===0)return Xo(i,o,e.x);if(o.x===0)return Xo(e,t,i.x);if(t.y===0)return Qo(i,o,e.y);if(o.y===0)return Qo(e,t,i.y);var l=Fn(t,o);if(l==0)return null;var a={x:i.x-e.x,y:i.y-e.y},u=Fn(a,t)/l,c=Fn(a,o)/l,f=e.x+c*t.x,h=i.x+u*o.x,m=e.y+c*t.y,b=i.y+u*o.y,p=(f+h)/2,v=(m+b)/2;return{x:p,y:v}},Et=function(){rt(n,null,[{key:"compare",value:function(t,i){var o=n.comparePoints(t.point,i.point);return o!==0?o:(t.point!==i.point&&t.link(i),t.isLeft!==i.isLeft?t.isLeft?1:-1:gi.compare(t.segment,i.segment))}},{key:"comparePoints",value:function(t,i){return t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0}}]);function n(e,t){gt(this,n),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}return rt(n,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var i=t.point.events,o=0,l=i.length;o<l;o++){var a=i[o];this.point.events.push(a),a.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,i=0;i<t;i++){var o=this.point.events[i];if(o.segment.consumedBy===void 0)for(var l=i+1;l<t;l++){var a=this.point.events[l];a.consumedBy===void 0&&o.otherSE.point.events===a.otherSE.point.events&&o.segment.consume(a.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],i=0,o=this.point.events.length;i<o;i++){var l=this.point.events[i];l!==this&&!l.segment.ringOut&&l.segment.isInResult()&&t.push(l)}return t}},{key:"getLeftmostComparator",value:function(t){var i=this,o=new Map,l=function(u){var c=u.otherSE;o.set(u,{sine:ou(i.point,t.point,c.point),cosine:lu(i.point,t.point,c.point)})};return function(a,u){o.has(a)||l(a),o.has(u)||l(u);var c=o.get(a),f=c.sine,h=c.cosine,m=o.get(u),b=m.sine,p=m.cosine;return f>=0&&b>=0?h<p?1:h>p?-1:0:f<0&&b<0?h<p?-1:h>p?1:0:b<f?-1:b>f?1:0}}}]),n}(),su=0,gi=function(){rt(n,null,[{key:"compare",value:function(t,i){var o=t.leftSE.point.x,l=i.leftSE.point.x,a=t.rightSE.point.x,u=i.rightSE.point.x;if(u<o)return 1;if(a<l)return-1;var c=t.leftSE.point.y,f=i.leftSE.point.y,h=t.rightSE.point.y,m=i.rightSE.point.y;if(o<l){if(f<c&&f<h)return 1;if(f>c&&f>h)return-1;var b=t.comparePoint(i.leftSE.point);if(b<0)return 1;if(b>0)return-1;var p=i.comparePoint(t.rightSE.point);return p!==0?p:-1}if(o>l){if(c<f&&c<m)return-1;if(c>f&&c>m)return 1;var v=i.comparePoint(t.leftSE.point);if(v!==0)return v;var M=t.comparePoint(i.rightSE.point);return M<0?1:M>0?-1:1}if(c<f)return-1;if(c>f)return 1;if(a<u){var P=i.comparePoint(t.rightSE.point);if(P!==0)return P}if(a>u){var U=t.comparePoint(i.rightSE.point);if(U<0)return 1;if(U>0)return-1}if(a!==u){var L=h-c,I=a-o,N=m-f,F=u-l;if(L>I&&N<F)return 1;if(L<I&&N>F)return-1}return a>u?1:a<u||h<m?-1:h>m?1:t.id<i.id?-1:t.id>i.id?1:0}}]);function n(e,t,i,o){gt(this,n),this.id=++su,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=i,this.windings=o}return rt(n,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,i=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<i?t:i},ur:{x:this.rightSE.point.x,y:t>i?t:i}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var i=this.leftSE.point,o=this.rightSE.point,l=this.vector();if(i.x===o.x)return t.x===i.x?0:t.x<i.x?1:-1;var a=(t.y-i.y)/l.y,u=i.x+a*l.x;if(t.x===u)return 0;var c=(t.x-i.x)/l.x,f=i.y+c*l.y;return t.y===f?0:t.y<f?-1:1}},{key:"getIntersection",value:function(t){var i=this.bbox(),o=t.bbox(),l=sr(i,o);if(l===null)return null;var a=this.leftSE.point,u=this.rightSE.point,c=t.leftSE.point,f=t.rightSE.point,h=Tn(i,c)&&this.comparePoint(c)===0,m=Tn(o,a)&&t.comparePoint(a)===0,b=Tn(i,f)&&this.comparePoint(f)===0,p=Tn(o,u)&&t.comparePoint(u)===0;if(m&&h)return p&&!b?u:!p&&b?f:null;if(m)return b&&a.x===f.x&&a.y===f.y?null:a;if(h)return p&&u.x===c.x&&u.y===c.y?null:c;if(p&&b)return null;if(p)return u;if(b)return f;var v=au(a,this.vector(),c,t.vector());return v===null||!Tn(l,v)?null:jn.round(v.x,v.y)}},{key:"split",value:function(t){var i=[],o=t.events!==void 0,l=new Et(t,!0),a=new Et(t,!1),u=this.rightSE;this.replaceRightSE(a),i.push(a),i.push(l);var c=new n(l,u,this.rings.slice(),this.windings.slice());return Et.comparePoints(c.leftSE.point,c.rightSE.point)>0&&c.swapEvents(),Et.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),o&&(l.checkForConsuming(),a.checkForConsuming()),i}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var i=0,o=this.windings.length;i<o;i++)this.windings[i]*=-1}},{key:"consume",value:function(t){for(var i=this,o=t;i.consumedBy;)i=i.consumedBy;for(;o.consumedBy;)o=o.consumedBy;var l=n.compare(i,o);if(l!==0){if(l>0){var a=i;i=o,o=a}if(i.prev===o){var u=i;i=o,o=u}for(var c=0,f=o.rings.length;c<f;c++){var h=o.rings[c],m=o.windings[c],b=i.rings.indexOf(h);b===-1?(i.rings.push(h),i.windings.push(m)):i.windings[b]+=m}o.rings=null,o.windings=null,o.consumedBy=i,o.leftSE.consumedBy=i.leftSE,o.rightSE.consumedBy=i.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var i=this._afterState.rings,o=this._afterState.windings,l=this._afterState.multiPolys,a=0,u=this.rings.length;a<u;a++){var c=this.rings[a],f=this.windings[a],h=i.indexOf(c);h===-1?(i.push(c),o.push(f)):o[h]+=f}for(var m=[],b=[],p=0,v=i.length;p<v;p++)if(o[p]!==0){var M=i[p],P=M.poly;if(b.indexOf(P)===-1)if(M.isExterior)m.push(P);else{b.indexOf(P)===-1&&b.push(P);var U=m.indexOf(M.poly);U!==-1&&m.splice(U,1)}}for(var L=0,I=m.length;L<I;L++){var N=m[L].multiPoly;l.indexOf(N)===-1&&l.push(N)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,i=this.afterState().multiPolys;switch(yt.type){case"union":{var o=t.length===0,l=i.length===0;this._isInResult=o!==l;break}case"intersection":{var a,u;t.length<i.length?(a=t.length,u=i.length):(a=i.length,u=t.length),this._isInResult=u===yt.numMultiPolys&&a<u;break}case"xor":{var c=Math.abs(t.length-i.length);this._isInResult=c%2===1;break}case"difference":{var f=function(m){return m.length===1&&m[0].isSubject};this._isInResult=f(t)!==f(i);break}default:throw new Error("Unrecognized operation type found ".concat(yt.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,i,o){var l,a,u,c=Et.comparePoints(t,i);if(c<0)l=t,a=i,u=1;else if(c>0)l=i,a=t,u=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var f=new Et(l,!0),h=new Et(a,!1);return new n(f,h,[o],[u])}}]),n}(),$o=function(){function n(e,t,i){if(gt(this,n),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=i,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=jn.round(e[0][0],e[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var l=o,a=1,u=e.length;a<u;a++){if(typeof e[a][0]!="number"||typeof e[a][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=jn.round(e[a][0],e[a][1]);c.x===l.x&&c.y===l.y||(this.segments.push(gi.fromRing(l,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),l=c)}(o.x!==l.x||o.y!==l.y)&&this.segments.push(gi.fromRing(l,o,this))}return rt(n,[{key:"getSweepEvents",value:function(){for(var t=[],i=0,o=this.segments.length;i<o;i++){var l=this.segments[i];t.push(l.leftSE),t.push(l.rightSE)}return t}}]),n}(),uu=function(){function n(e,t){if(gt(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new $o(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=e.length;i<o;i++){var l=new $o(e[i],this,!1);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.interiorRings.push(l)}this.multiPoly=t}return rt(n,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),i=0,o=this.interiorRings.length;i<o;i++)for(var l=this.interiorRings[i].getSweepEvents(),a=0,u=l.length;a<u;a++)t.push(l[a]);return t}}]),n}(),el=function(){function n(e,t){if(gt(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=e.length;i<o;i++){var l=new uu(e[i],this);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.polys.push(l)}this.isSubject=t}return rt(n,[{key:"getSweepEvents",value:function(){for(var t=[],i=0,o=this.polys.length;i<o;i++)for(var l=this.polys[i].getSweepEvents(),a=0,u=l.length;a<u;a++)t.push(l[a]);return t}}]),n}(),fu=function(){rt(n,null,[{key:"factory",value:function(t){for(var i=[],o=0,l=t.length;o<l;o++){var a=t[o];if(!(!a.isInResult()||a.ringOut)){for(var u=null,c=a.leftSE,f=a.rightSE,h=[c],m=c.point,b=[];u=c,c=f,h.push(c),c.point!==m;)for(;;){var p=c.getAvailableLinkedEvents();if(p.length===0){var v=h[0].point,M=h[h.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(v.x,",")+" ".concat(v.y,"]. Last matching segment found ends at")+" [".concat(M.x,", ").concat(M.y,"]."))}if(p.length===1){f=p[0].otherSE;break}for(var P=null,U=0,L=b.length;U<L;U++)if(b[U].point===c.point){P=U;break}if(P!==null){var I=b.splice(P)[0],N=h.splice(I.index);N.unshift(N[0].otherSE),i.push(new n(N.reverse()));continue}b.push({index:h.length,point:c.point});var F=c.getLeftmostComparator(u);f=p.sort(F)[0].otherSE;break}i.push(new n(h))}}return i}}]);function n(e){gt(this,n),this.events=e;for(var t=0,i=e.length;t<i;t++)e[t].segment.ringOut=this;this.poly=null}return rt(n,[{key:"getGeom",value:function(){for(var t=this.events[0].point,i=[t],o=1,l=this.events.length-1;o<l;o++){var a=this.events[o].point,u=this.events[o+1].point;Ko(a,t,u)!==0&&(i.push(a),t=a)}if(i.length===1)return null;var c=i[0],f=i[1];Ko(c,t,f)===0&&i.shift(),i.push(i[0]);for(var h=this.isExteriorRing()?1:-1,m=this.isExteriorRing()?0:i.length-1,b=this.isExteriorRing()?i.length:-1,p=[],v=m;v!=b;v+=h)p.push([i[v].x,i[v].y]);return p}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],i=1,o=this.events.length;i<o;i++){var l=this.events[i];Et.compare(t,l)>0&&(t=l)}for(var a=t.segment.prevInResult(),u=a?a.prevInResult():null;;){if(!a)return null;if(!u)return a.ringOut;if(u.ringOut!==a.ringOut)return u.ringOut.enclosingRing()!==a.ringOut?a.ringOut:a.ringOut.enclosingRing();a=u.prevInResult(),u=a?a.prevInResult():null}}}]),n}(),tl=function(){function n(e){gt(this,n),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return rt(n,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var i=0,o=this.interiorRings.length;i<o;i++){var l=this.interiorRings[i].getGeom();l!==null&&t.push(l)}return t}}]),n}(),cu=function(){function n(e){gt(this,n),this.rings=e,this.polys=this._composePolys(e)}return rt(n,[{key:"getGeom",value:function(){for(var t=[],i=0,o=this.polys.length;i<o;i++){var l=this.polys[i].getGeom();l!==null&&t.push(l)}return t}},{key:"_composePolys",value:function(t){for(var i=[],o=0,l=t.length;o<l;o++){var a=t[o];if(!a.poly)if(a.isExteriorRing())i.push(new tl(a));else{var u=a.enclosingRing();u.poly||i.push(new tl(u)),u.poly.addInterior(a)}}return i}}]),n}(),du=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gi.compare;gt(this,n),this.queue=e,this.tree=new br(t),this.segments=[]}return rt(n,[{key:"process",value:function(t){var i=t.segment,o=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(i),o;var l=t.isLeft?this.tree.insert(i):this.tree.find(i);if(!l)throw new Error("Unable to find segment #".concat(i.id," ")+"[".concat(i.leftSE.point.x,", ").concat(i.leftSE.point.y,"] -> ")+"[".concat(i.rightSE.point.x,", ").concat(i.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var a=l,u=l,c=void 0,f=void 0;c===void 0;)a=this.tree.prev(a),a===null?c=null:a.key.consumedBy===void 0&&(c=a.key);for(;f===void 0;)u=this.tree.next(u),u===null?f=null:u.key.consumedBy===void 0&&(f=u.key);if(t.isLeft){var h=null;if(c){var m=c.getIntersection(i);if(m!==null&&(i.isAnEndpoint(m)||(h=m),!c.isAnEndpoint(m)))for(var b=this._splitSafely(c,m),p=0,v=b.length;p<v;p++)o.push(b[p])}var M=null;if(f){var P=f.getIntersection(i);if(P!==null&&(i.isAnEndpoint(P)||(M=P),!f.isAnEndpoint(P)))for(var U=this._splitSafely(f,P),L=0,I=U.length;L<I;L++)o.push(U[L])}if(h!==null||M!==null){var N=null;if(h===null)N=M;else if(M===null)N=h;else{var F=Et.comparePoints(h,M);N=F<=0?h:M}this.queue.remove(i.rightSE),o.push(i.rightSE);for(var R=i.split(N),be=0,G=R.length;be<G;be++)o.push(R[be])}o.length>0?(this.tree.remove(i),o.push(t)):(this.segments.push(i),i.prev=c)}else{if(c&&f){var fe=c.getIntersection(f);if(fe!==null){if(!c.isAnEndpoint(fe))for(var ae=this._splitSafely(c,fe),D=0,$=ae.length;D<$;D++)o.push(ae[D]);if(!f.isAnEndpoint(fe))for(var j=this._splitSafely(f,fe),ie=0,Pe=j.length;ie<Pe;ie++)o.push(j[ie])}}this.tree.remove(i)}return o}},{key:"_splitSafely",value:function(t,i){this.tree.remove(t);var o=t.rightSE;this.queue.remove(o);var l=t.split(i);return l.push(o),t.consumedBy===void 0&&this.tree.insert(t),l}}]),n}(),nl=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,hu=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,pu=function(){function n(){gt(this,n)}return rt(n,[{key:"run",value:function(t,i,o){yt.type=t,jn.reset();for(var l=[new el(i,!0)],a=0,u=o.length;a<u;a++)l.push(new el(o[a],!1));if(yt.numMultiPolys=l.length,yt.type==="difference")for(var c=l[0],f=1;f<l.length;)sr(l[f].bbox,c.bbox)!==null?f++:l.splice(f,1);if(yt.type==="intersection"){for(var h=0,m=l.length;h<m;h++)for(var b=l[h],p=h+1,v=l.length;p<v;p++)if(sr(b.bbox,l[p].bbox)===null)return[]}for(var M=new br(Et.compare),P=0,U=l.length;P<U;P++)for(var L=l[P].getSweepEvents(),I=0,N=L.length;I<N;I++)if(M.insert(L[I]),M.size>nl)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var F=new du(M),R=M.size,be=M.pop();be;){var G=be.key;if(M.size===R){var fe=G.segment;throw new Error("Unable to pop() ".concat(G.isLeft?"left":"right"," SweepEvent ")+"[".concat(G.point.x,", ").concat(G.point.y,"] from segment #").concat(fe.id," ")+"[".concat(fe.leftSE.point.x,", ").concat(fe.leftSE.point.y,"] -> ")+"[".concat(fe.rightSE.point.x,", ").concat(fe.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(M.size>nl)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(F.segments.length>hu)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var ae=F.process(G),D=0,$=ae.length;D<$;D++){var j=ae[D];j.consumedBy===void 0&&M.insert(j)}R=M.size,be=M.pop()}jn.reset();var ie=fu.factory(F.segments),Pe=new cu(ie);return Pe.getGeom()}}]),n}(),yt=new pu,gu=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return yt.run("union",e,i)},mu=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return yt.run("intersection",e,i)},vu=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return yt.run("xor",e,i)},bu=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return yt.run("difference",e,i)},fi={union:gu,intersection:mu,xor:vu,difference:bu};function _u(n,e){var t=wu(e),i=null;return n.type==="FeatureCollection"?i=yu(n):i=vl(fi.union(n.geometry.coordinates)),i.geometry.coordinates.forEach(function(o){t.geometry.coordinates.push(o[0])}),t}function yu(n){var e=n.features.length===2?fi.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):fi.union.apply(fi,n.features.map(function(t){return t.geometry.coordinates}));return vl(e)}function vl(n){return Ks(n)}function wu(n){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],t=n&&n.geometry.coordinates||e;return Zs(t)}const Su={"line-cap":"round","line-join":"round"},mi=["==","$type","Polygon"],_r=["==","$type","LineString"],vi=["==","$type","Point"];function bi(n,e,t=1){return{type:"line",layout:Su,paint:{"line-color":n,"line-width":e,"line-opacity":t}}}function Ei(n,e){return{type:"fill",paint:{"fill-color":n,"fill-opacity":e}}}function _i(n,e,t=1){return{type:"circle",paint:{"circle-radius":e,"circle-color":n,"circle-opacity":t}}}function ku(n,e,t){let{authorityName:i}=e;const{getMap:o,setCamera:l}=ln("map");an(async()=>{const u=await a(i),c=o();l&&c.fitBounds(dl(u),{padding:20,animate:!1}),c.addSource("boundary",{type:"geojson",data:_u(u)}),c.addLayer({id:"boundary",source:"boundary",...Ei("black",.5)})});async function a(u){const f=await(await fetch(_a)).text(),h=JSON.parse(f);return h.features=h.features.filter(m=>m.properties.name==u),h}return n.$$set=u=>{"authorityName"in u&&t(0,i=u.authorityName)},[i]}class Eu extends Ae{constructor(e){super(),Fe(this,e,ku,null,Ne,{authorityName:0})}}var fr={},xu={get exports(){return fr},set exports(n){fr=n}};(function(n,e){(function(t,i){n.exports=i()})(Ln,function(){var t=function(r,s){var d={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},g={on:function(_,w,V){if(d[_]===void 0)throw new Error("Invalid event type: "+_);d[_].push({selector:w,fn:V})},render:function(_){s.store.featureChanged(_)}},S=function(_,w){for(var V=d[_],z=V.length;z--;){var Z=V[z];if(Z.selector(w)){Z.fn.call(g,w)||s.store.render(),s.ui.updateMapClasses();break}}};return r.start.call(g),{render:r.render,stop:function(){r.stop&&r.stop()},trash:function(){r.trash&&(r.trash(),s.store.render())},combineFeatures:function(){r.combineFeatures&&r.combineFeatures()},uncombineFeatures:function(){r.uncombineFeatures&&r.uncombineFeatures()},drag:function(_){S("drag",_)},click:function(_){S("click",_)},mousemove:function(_){S("mousemove",_)},mousedown:function(_){S("mousedown",_)},mouseup:function(_){S("mouseup",_)},mouseout:function(_){S("mouseout",_)},keydown:function(_){S("keydown",_)},keyup:function(_){S("keyup",_)},touchstart:function(_){S("touchstart",_)},touchmove:function(_){S("touchmove",_)},touchend:function(_){S("touchend",_)},tap:function(_){S("tap",_)}}},i=6378137;function o(r){var s=0;if(r&&r.length>0){s+=Math.abs(l(r[0]));for(var d=1;d<r.length;d++)s-=Math.abs(l(r[d]))}return s}function l(r){var s,d,g,S,_,w,V=0,z=r.length;if(z>2){for(w=0;w<z;w++)w===z-2?(g=z-2,S=z-1,_=0):w===z-1?(g=z-1,S=0,_=1):(g=w,S=w+1,_=w+2),s=r[g],d=r[S],V+=(a(r[_][0])-a(s[0]))*Math.sin(a(d[1]));V=V*i*i/2}return V}function a(r){return r*Math.PI/180}var u={geometry:function r(s){var d,g=0;switch(s.type){case"Polygon":return o(s.coordinates);case"MultiPolygon":for(d=0;d<s.coordinates.length;d++)g+=o(s.coordinates[d]);return g;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(d=0;d<s.geometries.length;d++)g+=r(s.geometries[d]);return g}},ring:l},c="mapboxgl-ctrl",f="mapbox-gl-draw_ctrl-draw-btn",h="mapbox-gl-draw_line",m="mapbox-gl-draw_polygon",b="mapbox-gl-draw_point",p="mapbox-gl-draw_trash",v="mapbox-gl-draw_combine",M="mapbox-gl-draw_uncombine",P="mapboxgl-ctrl-group",U="active",L="mapbox-gl-draw_boxselect",I="mapbox-gl-draw-hot",N="mapbox-gl-draw-cold",F="add",R="move",be="drag",G="pointer",fe="none",ae={POLYGON:"polygon",LINE:"line_string",POINT:"point"},D="Feature",$="Polygon",j="LineString",ie="Point",Pe="FeatureCollection",Oe="Multi",Re="MultiPoint",Ge="MultiLineString",Ve="MultiPolygon",ue={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},ze="draw.create",x="draw.delete",ve="draw.update",xi="draw.selectionchange",Ci="draw.modechange",Mi="draw.actionable",Ii="draw.render",Pi="draw.combine",ee="draw.uncombine",kl="move",El="change_coordinates",Kt="feature",Li="midpoint",yn="vertex",It="true",Rt="false",xl=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],wr={Point:0,LineString:1,Polygon:2};function Cl(r,s){var d=wr[r.geometry.type]-wr[s.geometry.type];return d===0&&r.geometry.type===$?r.area-s.area:d}function mt(r){if(this._items={},this._nums={},this._length=r?r.length:0,r)for(var s=0,d=r.length;s<d;s++)this.add(r[s]),r[s]!==void 0&&(typeof r[s]=="string"?this._items[r[s]]=s:this._nums[r[s]]=s)}mt.prototype.add=function(r){return this.has(r)||(this._length++,typeof r=="string"?this._items[r]=this._length:this._nums[r]=this._length),this},mt.prototype.delete=function(r){return this.has(r)===!1||(this._length--,delete this._items[r],delete this._nums[r]),this},mt.prototype.has=function(r){return(typeof r=="string"||typeof r=="number")&&(this._items[r]!==void 0||this._nums[r]!==void 0)},mt.prototype.values=function(){var r=this,s=[];return Object.keys(this._items).forEach(function(d){s.push({k:d,v:r._items[d]})}),Object.keys(this._nums).forEach(function(d){s.push({k:JSON.parse(d),v:r._nums[d]})}),s.sort(function(d,g){return d.v-g.v}).map(function(d){return d.k})},mt.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Ml=[Kt,Li,yn],wn={click:function(r,s,d){return Sr(r,s,d,d.options.clickBuffer)},touch:function(r,s,d){return Sr(r,s,d,d.options.touchBuffer)}};function Sr(r,s,d,g){if(d.map===null)return[];var S=r?function(Z,E){return E===void 0&&(E=0),[[Z.point.x-E,Z.point.y-E],[Z.point.x+E,Z.point.y+E]]}(r,g):s,_={};d.options.styles&&(_.layers=d.options.styles.map(function(Z){return Z.id}));var w=d.map.queryRenderedFeatures(S,_).filter(function(Z){return Ml.indexOf(Z.properties.meta)!==-1}),V=new mt,z=[];return w.forEach(function(Z){var E=Z.properties.id;V.has(E)||(V.add(E),z.push(Z))}),function(Z){return Z.map(function(E){return E.geometry.type===$&&(E.area=u.geometry({type:D,property:{},geometry:E.geometry})),E}).sort(Cl).map(function(E){return delete E.area,E})}(z)}function Ti(r,s){var d=wn.click(r,null,s),g={mouse:fe};return d[0]&&(g.mouse=d[0].properties.active===It?R:G,g.feature=d[0].properties.meta),s.events.currentModeName().indexOf("draw")!==-1&&(g.mouse=F),s.ui.queueMapClasses(g),s.ui.updateMapClasses(),d[0]}function kr(r,s){var d=r.x-s.x,g=r.y-s.y;return Math.sqrt(d*d+g*g)}function Er(r,s,d){d===void 0&&(d={});var g=d.fineTolerance!=null?d.fineTolerance:4,S=d.grossTolerance!=null?d.grossTolerance:12,_=d.interval!=null?d.interval:500;r.point=r.point||s.point,r.time=r.time||s.time;var w=kr(r.point,s.point);return w<g||w<S&&s.time-r.time<_}function xr(r,s,d){d===void 0&&(d={});var g=d.tolerance!=null?d.tolerance:25,S=d.interval!=null?d.interval:250;return r.point=r.point||s.point,r.time=r.time||s.time,kr(r.point,s.point)<g&&s.time-r.time<S}function Oi(r,s){return r(s={exports:{}},s.exports),s.exports}var Ai=Oi(function(r){var s=r.exports=function(d,g){if(g||(g=16),d===void 0&&(d=128),d<=0)return"0";for(var S=Math.log(Math.pow(2,d))/Math.log(g),_=2;S===1/0;_*=2)S=Math.log(Math.pow(2,d/_))/Math.log(g)*_;var w=S-Math.floor(S),V="";for(_=0;_<Math.floor(S);_++)V=Math.floor(Math.random()*g).toString(g)+V;if(w){var z=Math.pow(g,w);V=Math.floor(Math.random()*z).toString(g)+V}var Z=parseInt(V,g);return Z!==1/0&&Z>=Math.pow(2,d)?s(d,g):V};s.rack=function(d,g,S){var _=function(V){var z=0;do{if(z++>10){if(!S)throw new Error("too many ID collisions, use more bits");d+=S}var Z=s(d,g)}while(Object.hasOwnProperty.call(w,Z));return w[Z]=V,Z},w=_.hats={};return _.get=function(V){return _.hats[V]},_.set=function(V,z){return _.hats[V]=z,_},_.bits=d||128,_.base=g||16,_}}),Xe=function(r,s){this.ctx=r,this.properties=s.properties||{},this.coordinates=s.geometry.coordinates,this.id=s.id||Ai(),this.type=s.geometry.type};Xe.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Xe.prototype.incomingCoords=function(r){this.setCoordinates(r)},Xe.prototype.setCoordinates=function(r){this.coordinates=r,this.changed()},Xe.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Xe.prototype.setProperty=function(r,s){this.properties[r]=s},Xe.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:D,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Xe.prototype.internal=function(r){var s={id:this.id,meta:Kt,"meta:type":this.type,active:Rt,mode:r};if(this.ctx.options.userProperties)for(var d in this.properties)s["user_"+d]=this.properties[d];return{type:D,properties:s,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Qt=function(r,s){Xe.call(this,r,s)};(Qt.prototype=Object.create(Xe.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Qt.prototype.updateCoordinate=function(r,s,d){this.coordinates=arguments.length===3?[s,d]:[r,s],this.changed()},Qt.prototype.getCoordinate=function(){return this.getCoordinates()};var Pt=function(r,s){Xe.call(this,r,s)};(Pt.prototype=Object.create(Xe.prototype)).isValid=function(){return this.coordinates.length>1},Pt.prototype.addCoordinate=function(r,s,d){this.changed();var g=parseInt(r,10);this.coordinates.splice(g,0,[s,d])},Pt.prototype.getCoordinate=function(r){var s=parseInt(r,10);return JSON.parse(JSON.stringify(this.coordinates[s]))},Pt.prototype.removeCoordinate=function(r){this.changed(),this.coordinates.splice(parseInt(r,10),1)},Pt.prototype.updateCoordinate=function(r,s,d){var g=parseInt(r,10);this.coordinates[g]=[s,d],this.changed()};var ht=function(r,s){Xe.call(this,r,s),this.coordinates=this.coordinates.map(function(d){return d.slice(0,-1)})};(ht.prototype=Object.create(Xe.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(r){return r.length>2})},ht.prototype.incomingCoords=function(r){this.coordinates=r.map(function(s){return s.slice(0,-1)}),this.changed()},ht.prototype.setCoordinates=function(r){this.coordinates=r,this.changed()},ht.prototype.addCoordinate=function(r,s,d){this.changed();var g=r.split(".").map(function(S){return parseInt(S,10)});this.coordinates[g[0]].splice(g[1],0,[s,d])},ht.prototype.removeCoordinate=function(r){this.changed();var s=r.split(".").map(function(g){return parseInt(g,10)}),d=this.coordinates[s[0]];d&&(d.splice(s[1],1),d.length<3&&this.coordinates.splice(s[0],1))},ht.prototype.getCoordinate=function(r){var s=r.split(".").map(function(g){return parseInt(g,10)}),d=this.coordinates[s[0]];return JSON.parse(JSON.stringify(d[s[1]]))},ht.prototype.getCoordinates=function(){return this.coordinates.map(function(r){return r.concat([r[0]])})},ht.prototype.updateCoordinate=function(r,s,d){this.changed();var g=r.split("."),S=parseInt(g[0],10),_=parseInt(g[1],10);this.coordinates[S]===void 0&&(this.coordinates[S]=[]),this.coordinates[S][_]=[s,d]};var Il={MultiPoint:Qt,MultiLineString:Pt,MultiPolygon:ht},Vn=function(r,s,d,g,S){var _=d.split("."),w=parseInt(_[0],10),V=_[1]?_.slice(1).join("."):null;return r[w][s](V,g,S)},lt=function(r,s){if(Xe.call(this,r,s),delete this.coordinates,this.model=Il[s.geometry.type],this.model===void 0)throw new TypeError(s.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(s.geometry.coordinates)};function he(r){this.map=r.map,this.drawConfig=JSON.parse(JSON.stringify(r.options||{})),this._ctx=r}(lt.prototype=Object.create(Xe.prototype))._coordinatesToFeatures=function(r){var s=this,d=this.model.bind(this);return r.map(function(g){return new d(s.ctx,{id:Ai(),type:D,properties:{},geometry:{coordinates:g,type:s.type.replace("Multi","")}})})},lt.prototype.isValid=function(){return this.features.every(function(r){return r.isValid()})},lt.prototype.setCoordinates=function(r){this.features=this._coordinatesToFeatures(r),this.changed()},lt.prototype.getCoordinate=function(r){return Vn(this.features,"getCoordinate",r)},lt.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(r){return r.type===$?r.getCoordinates():r.coordinates})))},lt.prototype.updateCoordinate=function(r,s,d){Vn(this.features,"updateCoordinate",r,s,d),this.changed()},lt.prototype.addCoordinate=function(r,s,d){Vn(this.features,"addCoordinate",r,s,d),this.changed()},lt.prototype.removeCoordinate=function(r){Vn(this.features,"removeCoordinate",r),this.changed()},lt.prototype.getFeatures=function(){return this.features},he.prototype.setSelected=function(r){return this._ctx.store.setSelected(r)},he.prototype.setSelectedCoordinates=function(r){var s=this;this._ctx.store.setSelectedCoordinates(r),r.reduce(function(d,g){return d[g.feature_id]===void 0&&(d[g.feature_id]=!0,s._ctx.store.get(g.feature_id).changed()),d},{})},he.prototype.getSelected=function(){return this._ctx.store.getSelected()},he.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},he.prototype.isSelected=function(r){return this._ctx.store.isSelected(r)},he.prototype.getFeature=function(r){return this._ctx.store.get(r)},he.prototype.select=function(r){return this._ctx.store.select(r)},he.prototype.deselect=function(r){return this._ctx.store.deselect(r)},he.prototype.deleteFeature=function(r,s){return s===void 0&&(s={}),this._ctx.store.delete(r,s)},he.prototype.addFeature=function(r){return this._ctx.store.add(r)},he.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},he.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},he.prototype.setActionableState=function(r){r===void 0&&(r={});var s={trash:r.trash||!1,combineFeatures:r.combineFeatures||!1,uncombineFeatures:r.uncombineFeatures||!1};return this._ctx.events.actionable(s)},he.prototype.changeMode=function(r,s,d){return s===void 0&&(s={}),d===void 0&&(d={}),this._ctx.events.changeMode(r,s,d)},he.prototype.updateUIClasses=function(r){return this._ctx.ui.queueMapClasses(r)},he.prototype.activateUIButton=function(r){return this._ctx.ui.setActiveButton(r)},he.prototype.featuresAt=function(r,s,d){if(d===void 0&&(d="click"),d!=="click"&&d!=="touch")throw new Error("invalid buffer type");return wn[d](r,s,this._ctx)},he.prototype.newFeature=function(r){var s=r.geometry.type;return s===ie?new Qt(this._ctx,r):s===j?new Pt(this._ctx,r):s===$?new ht(this._ctx,r):new lt(this._ctx,r)},he.prototype.isInstanceOf=function(r,s){if(r===ie)return s instanceof Qt;if(r===j)return s instanceof Pt;if(r===$)return s instanceof ht;if(r==="MultiFeature")return s instanceof lt;throw new Error("Unknown feature class: "+r)},he.prototype.doRender=function(r){return this._ctx.store.featureChanged(r)},he.prototype.onSetup=function(){},he.prototype.onDrag=function(){},he.prototype.onClick=function(){},he.prototype.onMouseMove=function(){},he.prototype.onMouseDown=function(){},he.prototype.onMouseUp=function(){},he.prototype.onMouseOut=function(){},he.prototype.onKeyUp=function(){},he.prototype.onKeyDown=function(){},he.prototype.onTouchStart=function(){},he.prototype.onTouchMove=function(){},he.prototype.onTouchEnd=function(){},he.prototype.onTap=function(){},he.prototype.onStop=function(){},he.prototype.onTrash=function(){},he.prototype.onCombineFeature=function(){},he.prototype.onUncombineFeature=function(){},he.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Cr={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Pl=Object.keys(Cr);function Ll(r){var s=Object.keys(r);return function(d,g){g===void 0&&(g={});var S={},_=s.reduce(function(w,V){return w[V]=r[V],w},new he(d));return{start:function(){var w=this;S=_.onSetup(g),Pl.forEach(function(V){var z,Z=Cr[V],E=function(){return!1};r[Z]&&(E=function(){return!0}),w.on(V,E,(z=Z,function(W){return _[z](S,W)}))})},stop:function(){_.onStop(S)},trash:function(){_.onTrash(S)},combineFeatures:function(){_.onCombineFeatures(S)},uncombineFeatures:function(){_.onUncombineFeatures(S)},render:function(w,V){_.toDisplayFeatures(S,w,V)}}}}function Jn(r){return[].concat(r).filter(function(s){return s!==void 0})}function Tl(){var r=this;if(!(r.ctx.map&&r.ctx.map.getSource(I)!==void 0))return z();var s=r.ctx.events.currentModeName();r.ctx.ui.queueMapClasses({mode:s});var d=[],g=[];r.isDirty?g=r.getAllIds():(d=r.getChangedIds().filter(function(Z){return r.get(Z)!==void 0}),g=r.sources.hot.filter(function(Z){return Z.properties.id&&d.indexOf(Z.properties.id)===-1&&r.get(Z.properties.id)!==void 0}).map(function(Z){return Z.properties.id})),r.sources.hot=[];var S=r.sources.cold.length;r.sources.cold=r.isDirty?[]:r.sources.cold.filter(function(Z){var E=Z.properties.id||Z.properties.parent;return d.indexOf(E)===-1});var _=S!==r.sources.cold.length||g.length>0;function w(Z,E){var W=r.get(Z).internal(s);r.ctx.events.currentModeRender(W,function(Q){r.sources[E].push(Q)})}if(d.forEach(function(Z){return w(Z,"hot")}),g.forEach(function(Z){return w(Z,"cold")}),_&&r.ctx.map.getSource(N).setData({type:Pe,features:r.sources.cold}),r.ctx.map.getSource(I).setData({type:Pe,features:r.sources.hot}),r._emitSelectionChange&&(r.ctx.map.fire(xi,{features:r.getSelected().map(function(Z){return Z.toGeoJSON()}),points:r.getSelectedCoordinates().map(function(Z){return{type:D,properties:{},geometry:{type:ie,coordinates:Z.coordinates}}})}),r._emitSelectionChange=!1),r._deletedFeaturesToEmit.length){var V=r._deletedFeaturesToEmit.map(function(Z){return Z.toGeoJSON()});r._deletedFeaturesToEmit=[],r.ctx.map.fire(x,{features:V})}function z(){r.isDirty=!1,r.clearChangedIds()}z(),r.ctx.map.fire(Ii,{})}function Le(r){var s,d=this;this._features={},this._featureIds=new mt,this._selectedFeatureIds=new mt,this._selectedCoordinates=[],this._changedFeatureIds=new mt,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=r,this.sources={hot:[],cold:[]},this.render=function(){s||(s=requestAnimationFrame(function(){s=null,Tl.call(d)}))},this.isDirty=!1}function Mr(r,s){var d=r._selectedCoordinates.filter(function(g){return r._selectedFeatureIds.has(g.feature_id)});r._selectedCoordinates.length===d.length||s.silent||(r._emitSelectionChange=!0),r._selectedCoordinates=d}Le.prototype.createRenderBatch=function(){var r=this,s=this.render,d=0;return this.render=function(){d++},function(){r.render=s,d>0&&r.render()}},Le.prototype.setDirty=function(){return this.isDirty=!0,this},Le.prototype.featureChanged=function(r){return this._changedFeatureIds.add(r),this},Le.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Le.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Le.prototype.getAllIds=function(){return this._featureIds.values()},Le.prototype.add=function(r){return this.featureChanged(r.id),this._features[r.id]=r,this._featureIds.add(r.id),this},Le.prototype.delete=function(r,s){var d=this;return s===void 0&&(s={}),Jn(r).forEach(function(g){d._featureIds.has(g)&&(d._featureIds.delete(g),d._selectedFeatureIds.delete(g),s.silent||d._deletedFeaturesToEmit.indexOf(d._features[g])===-1&&d._deletedFeaturesToEmit.push(d._features[g]),delete d._features[g],d.isDirty=!0)}),Mr(this,s),this},Le.prototype.get=function(r){return this._features[r]},Le.prototype.getAll=function(){var r=this;return Object.keys(this._features).map(function(s){return r._features[s]})},Le.prototype.select=function(r,s){var d=this;return s===void 0&&(s={}),Jn(r).forEach(function(g){d._selectedFeatureIds.has(g)||(d._selectedFeatureIds.add(g),d._changedFeatureIds.add(g),s.silent||(d._emitSelectionChange=!0))}),this},Le.prototype.deselect=function(r,s){var d=this;return s===void 0&&(s={}),Jn(r).forEach(function(g){d._selectedFeatureIds.has(g)&&(d._selectedFeatureIds.delete(g),d._changedFeatureIds.add(g),s.silent||(d._emitSelectionChange=!0))}),Mr(this,s),this},Le.prototype.clearSelected=function(r){return r===void 0&&(r={}),this.deselect(this._selectedFeatureIds.values(),{silent:r.silent}),this},Le.prototype.setSelected=function(r,s){var d=this;return s===void 0&&(s={}),r=Jn(r),this.deselect(this._selectedFeatureIds.values().filter(function(g){return r.indexOf(g)===-1}),{silent:s.silent}),this.select(r.filter(function(g){return!d._selectedFeatureIds.has(g)}),{silent:s.silent}),this},Le.prototype.setSelectedCoordinates=function(r){return this._selectedCoordinates=r,this._emitSelectionChange=!0,this},Le.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Le.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Le.prototype.getSelected=function(){var r=this;return this._selectedFeatureIds.values().map(function(s){return r.get(s)})},Le.prototype.getSelectedCoordinates=function(){var r=this;return this._selectedCoordinates.map(function(s){return{coordinates:r.get(s.feature_id).getCoordinate(s.coord_path)}})},Le.prototype.isSelected=function(r){return this._selectedFeatureIds.has(r)},Le.prototype.setFeatureProperty=function(r,s,d){this.get(r).setProperty(s,d),this.featureChanged(r)},Le.prototype.storeMapConfig=function(){var r=this;xl.forEach(function(s){r.ctx.map[s]&&(r._mapInitialConfig[s]=r.ctx.map[s].isEnabled())})},Le.prototype.restoreMapConfig=function(){var r=this;Object.keys(this._mapInitialConfig).forEach(function(s){r._mapInitialConfig[s]?r.ctx.map[s].enable():r.ctx.map[s].disable()})},Le.prototype.getInitialConfigValue=function(r){return this._mapInitialConfig[r]===void 0||this._mapInitialConfig[r]};var Dt=function(){for(var r=arguments,s={},d=0;d<arguments.length;d++){var g=r[d];for(var S in g)Ol.call(g,S)&&(s[S]=g[S])}return s},Ol=Object.prototype.hasOwnProperty,Al=["mode","feature","mouse"];function Fl(r){var s=null,d=null,g={onRemove:function(){return r.map.off("load",g.connect),clearInterval(d),g.removeLayers(),r.store.restoreMapConfig(),r.ui.removeButtons(),r.events.removeEventListeners(),r.ui.clearMapClasses(),r.map=null,r.container=null,r.store=null,s&&s.parentNode&&s.parentNode.removeChild(s),s=null,this},connect:function(){r.map.off("load",g.connect),clearInterval(d),g.addLayers(),r.store.storeMapConfig(),r.events.addEventListeners()},onAdd:function(S){var _=S.fire;return S.fire=function(w,V){var z=arguments;return _.length===1&&arguments.length!==1&&(z=[Dt({},{type:w},V)]),_.apply(S,z)},r.map=S,r.events=function(w){var V=Object.keys(w.options.modes).reduce(function(A,te){return A[te]=Ll(w.options.modes[te]),A},{}),z={},Z={},E={},W=null,Q=null;E.drag=function(A,te){te({point:A.point,time:new Date().getTime()})?(w.ui.queueMapClasses({mouse:be}),Q.drag(A)):A.originalEvent.stopPropagation()},E.mousedrag=function(A){E.drag(A,function(te){return!Er(z,te)})},E.touchdrag=function(A){E.drag(A,function(te){return!xr(Z,te)})},E.mousemove=function(A){if((A.originalEvent.buttons!==void 0?A.originalEvent.buttons:A.originalEvent.which)===1)return E.mousedrag(A);var te=Ti(A,w);A.featureTarget=te,Q.mousemove(A)},E.mousedown=function(A){z={time:new Date().getTime(),point:A.point};var te=Ti(A,w);A.featureTarget=te,Q.mousedown(A)},E.mouseup=function(A){var te=Ti(A,w);A.featureTarget=te,Er(z,{point:A.point,time:new Date().getTime()})?Q.click(A):Q.mouseup(A)},E.mouseout=function(A){Q.mouseout(A)},E.touchstart=function(A){if(A.originalEvent.preventDefault(),w.options.touchEnabled){Z={time:new Date().getTime(),point:A.point};var te=wn.touch(A,null,w)[0];A.featureTarget=te,Q.touchstart(A)}},E.touchmove=function(A){if(A.originalEvent.preventDefault(),w.options.touchEnabled)return Q.touchmove(A),E.touchdrag(A)},E.touchend=function(A){if(A.originalEvent.preventDefault(),w.options.touchEnabled){var te=wn.touch(A,null,w)[0];A.featureTarget=te,xr(Z,{time:new Date().getTime(),point:A.point})?Q.tap(A):Q.touchend(A)}};var re=function(A){return!(A===8||A===46||A>=48&&A<=57)};function ce(A,te,ke){ke===void 0&&(ke={}),Q.stop();var Se=V[A];if(Se===void 0)throw new Error(A+" is not valid");W=A;var De=Se(w,te);Q=t(De,w),ke.silent||w.map.fire(Ci,{mode:A}),w.store.setDirty(),w.store.render()}E.keydown=function(A){(A.srcElement||A.target).classList[0]==="mapboxgl-canvas"&&(A.keyCode!==8&&A.keyCode!==46||!w.options.controls.trash?re(A.keyCode)?Q.keydown(A):A.keyCode===49&&w.options.controls.point?ce(ue.DRAW_POINT):A.keyCode===50&&w.options.controls.line_string?ce(ue.DRAW_LINE_STRING):A.keyCode===51&&w.options.controls.polygon&&ce(ue.DRAW_POLYGON):(A.preventDefault(),Q.trash()))},E.keyup=function(A){re(A.keyCode)&&Q.keyup(A)},E.zoomend=function(){w.store.changeZoom()},E.data=function(A){if(A.dataType==="style"){var te=w.setup,ke=w.map,Se=w.options,De=w.store;Se.styles.some(function(oe){return ke.getLayer(oe.id)})||(te.addLayers(),De.setDirty(),De.render())}};var Ue={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){W=w.options.defaultMode,Q=t(V[W](w),w)},changeMode:ce,actionable:function(A){var te=!1;Object.keys(A).forEach(function(ke){if(Ue[ke]===void 0)throw new Error("Invalid action type");Ue[ke]!==A[ke]&&(te=!0),Ue[ke]=A[ke]}),te&&w.map.fire(Mi,{actions:Ue})},currentModeName:function(){return W},currentModeRender:function(A,te){return Q.render(A,te)},fire:function(A,te){E[A]&&E[A](te)},addEventListeners:function(){w.map.on("mousemove",E.mousemove),w.map.on("mousedown",E.mousedown),w.map.on("mouseup",E.mouseup),w.map.on("data",E.data),w.map.on("touchmove",E.touchmove),w.map.on("touchstart",E.touchstart),w.map.on("touchend",E.touchend),w.container.addEventListener("mouseout",E.mouseout),w.options.keybindings&&(w.container.addEventListener("keydown",E.keydown),w.container.addEventListener("keyup",E.keyup))},removeEventListeners:function(){w.map.off("mousemove",E.mousemove),w.map.off("mousedown",E.mousedown),w.map.off("mouseup",E.mouseup),w.map.off("data",E.data),w.map.off("touchmove",E.touchmove),w.map.off("touchstart",E.touchstart),w.map.off("touchend",E.touchend),w.container.removeEventListener("mouseout",E.mouseout),w.options.keybindings&&(w.container.removeEventListener("keydown",E.keydown),w.container.removeEventListener("keyup",E.keyup))},trash:function(A){Q.trash(A)},combineFeatures:function(){Q.combineFeatures()},uncombineFeatures:function(){Q.uncombineFeatures()},getMode:function(){return W}}}(r),r.ui=function(w){var V={},z=null,Z={mode:null,feature:null,mouse:null},E={mode:null,feature:null,mouse:null};function W(A){E=Dt(E,A)}function Q(){var A,te;if(w.container){var ke=[],Se=[];Al.forEach(function(De){E[De]!==Z[De]&&(ke.push(De+"-"+Z[De]),E[De]!==null&&Se.push(De+"-"+E[De]))}),ke.length>0&&(A=w.container.classList).remove.apply(A,ke),Se.length>0&&(te=w.container.classList).add.apply(te,Se),Z=Dt(Z,E)}}function re(A,te){te===void 0&&(te={});var ke=document.createElement("button");return ke.className=f+" "+te.className,ke.setAttribute("title",te.title),te.container.appendChild(ke),ke.addEventListener("click",function(Se){if(Se.preventDefault(),Se.stopPropagation(),Se.target===z)return ce(),void te.onDeactivate();Ue(A),te.onActivate()},!0),ke}function ce(){z&&(z.classList.remove(U),z=null)}function Ue(A){ce();var te=V[A];te&&te&&A!=="trash"&&(te.classList.add(U),z=te)}return{setActiveButton:Ue,queueMapClasses:W,updateMapClasses:Q,clearMapClasses:function(){W({mode:null,feature:null,mouse:null}),Q()},addButtons:function(){var A=w.options.controls,te=document.createElement("div");return te.className=P+" "+c,A&&(A[ae.LINE]&&(V[ae.LINE]=re(ae.LINE,{container:te,className:h,title:"LineString tool "+(w.options.keybindings?"(l)":""),onActivate:function(){return w.events.changeMode(ue.DRAW_LINE_STRING)},onDeactivate:function(){return w.events.trash()}})),A[ae.POLYGON]&&(V[ae.POLYGON]=re(ae.POLYGON,{container:te,className:m,title:"Polygon tool "+(w.options.keybindings?"(p)":""),onActivate:function(){return w.events.changeMode(ue.DRAW_POLYGON)},onDeactivate:function(){return w.events.trash()}})),A[ae.POINT]&&(V[ae.POINT]=re(ae.POINT,{container:te,className:b,title:"Marker tool "+(w.options.keybindings?"(m)":""),onActivate:function(){return w.events.changeMode(ue.DRAW_POINT)},onDeactivate:function(){return w.events.trash()}})),A.trash&&(V.trash=re("trash",{container:te,className:p,title:"Delete",onActivate:function(){w.events.trash()}})),A.combine_features&&(V.combine_features=re("combineFeatures",{container:te,className:v,title:"Combine",onActivate:function(){w.events.combineFeatures()}})),A.uncombine_features&&(V.uncombine_features=re("uncombineFeatures",{container:te,className:M,title:"Uncombine",onActivate:function(){w.events.uncombineFeatures()}}))),te},removeButtons:function(){Object.keys(V).forEach(function(A){var te=V[A];te.parentNode&&te.parentNode.removeChild(te),delete V[A]})}}}(r),r.container=S.getContainer(),r.store=new Le(r),s=r.ui.addButtons(),r.options.boxSelect&&(S.boxZoom.disable(),S.dragPan.disable(),S.dragPan.enable()),S.loaded()?g.connect():(S.on("load",g.connect),d=setInterval(function(){S.loaded()&&g.connect()},16)),r.events.start(),s},addLayers:function(){r.map.addSource(N,{data:{type:Pe,features:[]},type:"geojson"}),r.map.addSource(I,{data:{type:Pe,features:[]},type:"geojson"}),r.options.styles.forEach(function(S){r.map.addLayer(S)}),r.store.setDirty(!0),r.store.render()},removeLayers:function(){r.options.styles.forEach(function(S){r.map.getLayer(S.id)&&r.map.removeLayer(S.id)}),r.map.getSource(N)&&r.map.removeSource(N),r.map.getSource(I)&&r.map.removeSource(I)}};return r.setup=g,g}function Fi(r){return function(s){var d=s.featureTarget;return!!d&&!!d.properties&&d.properties.meta===r}}function sn(r){return!!r.featureTarget&&!!r.featureTarget.properties&&r.featureTarget.properties.active===It&&r.featureTarget.properties.meta===Kt}function Ir(r){return!!r.featureTarget&&!!r.featureTarget.properties&&r.featureTarget.properties.active===Rt&&r.featureTarget.properties.meta===Kt}function Ni(r){return r.featureTarget===void 0}function qn(r){var s=r.featureTarget;return!!s&&!!s.properties&&s.properties.meta===yn}function Ri(r){return!!r.originalEvent&&r.originalEvent.shiftKey===!0}function Di(r){return r.keyCode===27}function ji(r){return r.keyCode===13}var Nl=un;function un(r,s){this.x=r,this.y=s}function zi(r,s){var d=s.getBoundingClientRect();return new Nl(r.clientX-d.left-(s.clientLeft||0),r.clientY-d.top-(s.clientTop||0))}function Sn(r,s,d,g){return{type:D,properties:{meta:yn,parent:r,coord_path:d,active:g?It:Rt},geometry:{type:ie,coordinates:s}}}function Bi(r,s,d){s===void 0&&(s={}),d===void 0&&(d=null);var g,S=r.geometry,_=S.type,w=S.coordinates,V=r.properties&&r.properties.id,z=[];function Z(W,Q){var re="",ce=null;W.forEach(function(Ue,A){var te=Q!=null?Q+"."+A:String(A),ke=Sn(V,Ue,te,E(te));if(s.midpoints&&ce){var Se=function(oe,en,zt){var we=en.geometry.coordinates,vt=zt.geometry.coordinates;if(we[1]>85||we[1]<-85||vt[1]>85||vt[1]<-85)return null;var at={lng:(we[0]+vt[0])/2,lat:(we[1]+vt[1])/2};return{type:D,properties:{meta:Li,parent:oe,lng:at.lng,lat:at.lat,coord_path:zt.properties.coord_path},geometry:{type:ie,coordinates:[at.lng,at.lat]}}}(V,ce,ke);Se&&z.push(Se)}ce=ke;var De=JSON.stringify(Ue);re!==De&&z.push(ke),A===0&&(re=De)})}function E(W){return!!s.selectedPaths&&s.selectedPaths.indexOf(W)!==-1}return _===ie?z.push(Sn(V,w,d,E(d))):_===$?w.forEach(function(W,Q){Z(W,d!==null?d+"."+Q:String(Q))}):_===j?Z(w,d):_.indexOf(Oe)===0&&(g=_.replace(Oe,""),w.forEach(function(W,Q){var re={type:D,properties:r.properties,geometry:{type:g,coordinates:W}};z=z.concat(Bi(re,s,Q))})),z}un.prototype={clone:function(){return new un(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,s){return this.clone()._rotateAround(r,s)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var s=r.x-this.x,d=r.y-this.y;return s*s+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,s){return Math.atan2(this.x*s-this.y*r,this.x*r+this.y*s)},_matMult:function(r){var s=r[0]*this.x+r[1]*this.y,d=r[2]*this.x+r[3]*this.y;return this.x=s,this.y=d,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var s=Math.cos(r),d=Math.sin(r),g=s*this.x-d*this.y,S=d*this.x+s*this.y;return this.x=g,this.y=S,this},_rotateAround:function(r,s){var d=Math.cos(r),g=Math.sin(r),S=s.x+d*(this.x-s.x)-g*(this.y-s.y),_=s.y+g*(this.x-s.x)+d*(this.y-s.y);return this.x=S,this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},un.convert=function(r){return r instanceof un?r:Array.isArray(r)?new un(r[0],r[1]):r};var fn=function(r){setTimeout(function(){r.map&&r.map.doubleClickZoom&&r._ctx&&r._ctx.store&&r._ctx.store.getInitialConfigValue&&r._ctx.store.getInitialConfigValue("doubleClickZoom")&&r.map.doubleClickZoom.enable()},0)},Wn=function(r){setTimeout(function(){r.map&&r.map.doubleClickZoom&&r.map.doubleClickZoom.disable()},0)},Pr=function(r){if(!r||!r.type)return null;var s=Rl[r.type];if(!s)return null;if(s==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:r}]};if(s==="feature")return{type:"FeatureCollection",features:[r]};if(s==="featurecollection")return r},Rl={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Yn(r){switch(r&&r.type||null){case"FeatureCollection":return r.features=r.features.reduce(function(s,d){return s.concat(Yn(d))},[]),r;case"Feature":return r.geometry?Yn(r.geometry).map(function(s){var d={type:"Feature",properties:JSON.parse(JSON.stringify(r.properties)),geometry:s};return r.id!==void 0&&(d.id=r.id),d}):[r];case"MultiPoint":return r.coordinates.map(function(s){return{type:"Point",coordinates:s}});case"MultiPolygon":return r.coordinates.map(function(s){return{type:"Polygon",coordinates:s}});case"MultiLineString":return r.coordinates.map(function(s){return{type:"LineString",coordinates:s}});case"GeometryCollection":return r.geometries.map(Yn).reduce(function(s,d){return s.concat(d)},[]);case"Point":case"Polygon":case"LineString":return[r]}}var Dl=function(r){if(!r)return[];var s=Yn(Pr(r)),d=[];return s.features.forEach(function(g){g.geometry&&(d=d.concat(function S(_){return Array.isArray(_)&&_.length&&typeof _[0]=="number"?[_]:_.reduce(function(w,V){return Array.isArray(V)&&Array.isArray(V[0])?w.concat(S(V)):(w.push(V),w)},[])}(g.geometry.coordinates)))}),d},jl=Oi(function(r){var s=r.exports=function(E){return new d(E)};function d(E){this.value=E}function g(E,W,Q){var re=[],ce=[],Ue=!0;return function A(te){var ke=Q?S(te):te,Se={},De=!0,oe={node:ke,node_:te,path:[].concat(re),parent:ce[ce.length-1],parents:ce,key:re.slice(-1)[0],isRoot:re.length===0,level:re.length,circular:null,update:function(we,vt){oe.isRoot||(oe.parent.node[oe.key]=we),oe.node=we,vt&&(De=!1)},delete:function(we){delete oe.parent.node[oe.key],we&&(De=!1)},remove:function(we){V(oe.parent.node)?oe.parent.node.splice(oe.key,1):delete oe.parent.node[oe.key],we&&(De=!1)},keys:null,before:function(we){Se.before=we},after:function(we){Se.after=we},pre:function(we){Se.pre=we},post:function(we){Se.post=we},stop:function(){Ue=!1},block:function(){De=!1}};if(!Ue)return oe;function en(){if(typeof oe.node=="object"&&oe.node!==null){oe.keys&&oe.node_===oe.node||(oe.keys=_(oe.node)),oe.isLeaf=oe.keys.length==0;for(var we=0;we<ce.length;we++)if(ce[we].node_===te){oe.circular=ce[we];break}}else oe.isLeaf=!0,oe.keys=null;oe.notLeaf=!oe.isLeaf,oe.notRoot=!oe.isRoot}en();var zt=W.call(oe,oe.node);return zt!==void 0&&oe.update&&oe.update(zt),Se.before&&Se.before.call(oe,oe.node),De&&(typeof oe.node!="object"||oe.node===null||oe.circular||(ce.push(oe),en(),z(oe.keys,function(we,vt){re.push(we),Se.pre&&Se.pre.call(oe,oe.node[we],we);var at=A(oe.node[we]);Q&&Z.call(oe.node,we)&&(oe.node[we]=at.node),at.isLast=vt==oe.keys.length-1,at.isFirst=vt==0,Se.post&&Se.post.call(oe,at),re.pop()}),ce.pop()),Se.after&&Se.after.call(oe,oe.node)),oe}(E).node}function S(E){if(typeof E=="object"&&E!==null){var W;if(V(E))W=[];else if(w(E)==="[object Date]")W=new Date(E.getTime?E.getTime():E);else if(function(ce){return w(ce)==="[object RegExp]"}(E))W=new RegExp(E);else if(function(ce){return w(ce)==="[object Error]"}(E))W={message:E.message};else if(function(ce){return w(ce)==="[object Boolean]"}(E))W=new Boolean(E);else if(function(ce){return w(ce)==="[object Number]"}(E))W=new Number(E);else if(function(ce){return w(ce)==="[object String]"}(E))W=new String(E);else if(Object.create&&Object.getPrototypeOf)W=Object.create(Object.getPrototypeOf(E));else if(E.constructor===Object)W={};else{var Q=E.constructor&&E.constructor.prototype||E.__proto__||{},re=function(){};re.prototype=Q,W=new re}return z(_(E),function(ce){W[ce]=E[ce]}),W}return E}d.prototype.get=function(E){for(var W=this.value,Q=0;Q<E.length;Q++){var re=E[Q];if(!W||!Z.call(W,re)){W=void 0;break}W=W[re]}return W},d.prototype.has=function(E){for(var W=this.value,Q=0;Q<E.length;Q++){var re=E[Q];if(!W||!Z.call(W,re))return!1;W=W[re]}return!0},d.prototype.set=function(E,W){for(var Q=this.value,re=0;re<E.length-1;re++){var ce=E[re];Z.call(Q,ce)||(Q[ce]={}),Q=Q[ce]}return Q[E[re]]=W,W},d.prototype.map=function(E){return g(this.value,E,!0)},d.prototype.forEach=function(E){return this.value=g(this.value,E,!1),this.value},d.prototype.reduce=function(E,W){var Q=arguments.length===1,re=Q?this.value:W;return this.forEach(function(ce){this.isRoot&&Q||(re=E.call(this,re,ce))}),re},d.prototype.paths=function(){var E=[];return this.forEach(function(W){E.push(this.path)}),E},d.prototype.nodes=function(){var E=[];return this.forEach(function(W){E.push(this.node)}),E},d.prototype.clone=function(){var E=[],W=[];return function Q(re){for(var ce=0;ce<E.length;ce++)if(E[ce]===re)return W[ce];if(typeof re=="object"&&re!==null){var Ue=S(re);return E.push(re),W.push(Ue),z(_(re),function(A){Ue[A]=Q(re[A])}),E.pop(),W.pop(),Ue}return re}(this.value)};var _=Object.keys||function(E){var W=[];for(var Q in E)W.push(Q);return W};function w(E){return Object.prototype.toString.call(E)}var V=Array.isArray||function(E){return Object.prototype.toString.call(E)==="[object Array]"},z=function(E,W){if(E.forEach)return E.forEach(W);for(var Q=0;Q<E.length;Q++)W(E[Q],Q,E)};z(_(d.prototype),function(E){s[E]=function(W){var Q=[].slice.call(arguments,1),re=new d(W);return re[E].apply(re,Q)}});var Z=Object.hasOwnProperty||function(E,W){return W in E}}),zl=$e;function $e(r){if(!(this instanceof $e))return new $e(r);this._bbox=r||[1/0,1/0,-1/0,-1/0],this._valid=!!r}$e.prototype.include=function(r){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],r[0]),this._bbox[1]=Math.min(this._bbox[1],r[1]),this._bbox[2]=Math.max(this._bbox[2],r[0]),this._bbox[3]=Math.max(this._bbox[3],r[1]),this},$e.prototype.equals=function(r){var s;return s=r instanceof $e?r.bbox():r,this._bbox[0]==s[0]&&this._bbox[1]==s[1]&&this._bbox[2]==s[2]&&this._bbox[3]==s[3]},$e.prototype.center=function(r){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},$e.prototype.union=function(r){var s;return this._valid=!0,s=r instanceof $e?r.bbox():r,this._bbox[0]=Math.min(this._bbox[0],s[0]),this._bbox[1]=Math.min(this._bbox[1],s[1]),this._bbox[2]=Math.max(this._bbox[2],s[2]),this._bbox[3]=Math.max(this._bbox[3],s[3]),this},$e.prototype.bbox=function(){return this._valid?this._bbox:null},$e.prototype.contains=function(r){if(!r)return this._fastContains();if(!this._valid)return null;var s=r[0],d=r[1];return this._bbox[0]<=s&&this._bbox[1]<=d&&this._bbox[2]>=s&&this._bbox[3]>=d},$e.prototype.intersect=function(r){return this._valid?(s=r instanceof $e?r.bbox():r,!(this._bbox[0]>s[2]||this._bbox[2]<s[0]||this._bbox[3]<s[1]||this._bbox[1]>s[3])):null;var s},$e.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var r="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",r)},$e.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Lr={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Bl=Object.keys(Lr),Ui=function(r){return Gi(r).bbox()};function Gi(r){for(var s=zl(),d=Dl(r),g=0;g<d.length;g++)s.include(d[g]);return s}Ui.polygon=function(r){return Gi(r).polygon()},Ui.bboxify=function(r){return jl(r).map(function(s){s&&Bl.some(function(d){return!!s[d]&&Lr[d].indexOf(s.type)!==-1})&&(s.bbox=Gi(s).bbox(),this.update(s))})};function Tr(r,s){var d=-90,g=90,S=-90,_=90,w=270,V=-270;r.forEach(function(Z){var E=Ui(Z),W=E[1],Q=E[3],re=E[0],ce=E[2];W>d&&(d=W),Q<g&&(g=Q),Q>S&&(S=Q),W<_&&(_=W),re<w&&(w=re),ce>V&&(V=ce)});var z=s;return d+z.lat>85&&(z.lat=85-d),S+z.lat>90&&(z.lat=90-S),g+z.lat<-85&&(z.lat=-85-g),_+z.lat<-90&&(z.lat=-90-_),w+z.lng<=-270&&(z.lng+=360*Math.ceil(Math.abs(z.lng)/360)),V+z.lng>=270&&(z.lng-=360*Math.ceil(Math.abs(z.lng)/360)),z}function Or(r,s){var d=Tr(r.map(function(g){return g.toGeoJSON()}),s);r.forEach(function(g){var S,_=g.getCoordinates(),w=function(z){var Z={lng:z[0]+d.lng,lat:z[1]+d.lat};return[Z.lng,Z.lat]},V=function(z){return z.map(function(Z){return w(Z)})};g.type===ie?S=w(_):g.type===j||g.type===Re?S=_.map(w):g.type===$||g.type===Ge?S=_.map(V):g.type===Ve&&(S=_.map(function(z){return z.map(function(Z){return V(Z)})})),g.incomingCoords(S)})}var Ze={onSetup:function(r){var s=this,d={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:r.featureIds||[]};return this.setSelected(d.initiallySelectedFeatureIds.filter(function(g){return s.getFeature(g)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),d},fireUpdate:function(){this.map.fire(ve,{action:kl,features:this.getSelected().map(function(r){return r.toGeoJSON()})})},fireActionable:function(){var r=this,s=this.getSelected(),d=s.filter(function(V){return r.isInstanceOf("MultiFeature",V)}),g=!1;if(s.length>1){g=!0;var S=s[0].type.replace("Multi","");s.forEach(function(V){V.type.replace("Multi","")!==S&&(g=!1)})}var _=d.length>0,w=s.length>0;this.setActionableState({combineFeatures:g,uncombineFeatures:_,trash:w})},getUniqueIds:function(r){return r.length?r.map(function(s){return s.properties.id}).filter(function(s){return s!==void 0}).reduce(function(s,d){return s.add(d),s},new mt).values():[]},stopExtendedInteractions:function(r){r.boxSelectElement&&(r.boxSelectElement.parentNode&&r.boxSelectElement.parentNode.removeChild(r.boxSelectElement),r.boxSelectElement=null),this.map.dragPan.enable(),r.boxSelecting=!1,r.canBoxSelect=!1,r.dragMoving=!1,r.canDragMove=!1},onStop:function(){fn(this)},onMouseMove:function(r){return this.stopExtendedInteractions(r),!0},onMouseOut:function(r){return!r.dragMoving||this.fireUpdate()}};Ze.onTap=Ze.onClick=function(r,s){return Ni(s)?this.clickAnywhere(r,s):Fi(yn)(s)?this.clickOnVertex(r,s):function(d){return!!d.featureTarget&&!!d.featureTarget.properties&&d.featureTarget.properties.meta===Kt}(s)?this.clickOnFeature(r,s):void 0},Ze.clickAnywhere=function(r){var s=this,d=this.getSelectedIds();d.length&&(this.clearSelectedFeatures(),d.forEach(function(g){return s.doRender(g)})),fn(this),this.stopExtendedInteractions(r)},Ze.clickOnVertex=function(r,s){this.changeMode(ue.DIRECT_SELECT,{featureId:s.featureTarget.properties.parent,coordPath:s.featureTarget.properties.coord_path,startPos:s.lngLat}),this.updateUIClasses({mouse:R})},Ze.startOnActiveFeature=function(r,s){this.stopExtendedInteractions(r),this.map.dragPan.disable(),this.doRender(s.featureTarget.properties.id),r.canDragMove=!0,r.dragMoveLocation=s.lngLat},Ze.clickOnFeature=function(r,s){var d=this;Wn(this),this.stopExtendedInteractions(r);var g=Ri(s),S=this.getSelectedIds(),_=s.featureTarget.properties.id,w=this.isSelected(_);if(!g&&w&&this.getFeature(_).type!==ie)return this.changeMode(ue.DIRECT_SELECT,{featureId:_});w&&g?(this.deselect(_),this.updateUIClasses({mouse:G}),S.length===1&&fn(this)):!w&&g?(this.select(_),this.updateUIClasses({mouse:R})):w||g||(S.forEach(function(V){return d.doRender(V)}),this.setSelected(_),this.updateUIClasses({mouse:R})),this.doRender(_)},Ze.onMouseDown=function(r,s){return sn(s)?this.startOnActiveFeature(r,s):this.drawConfig.boxSelect&&function(d){return!!d.originalEvent&&!!d.originalEvent.shiftKey&&d.originalEvent.button===0}(s)?this.startBoxSelect(r,s):void 0},Ze.startBoxSelect=function(r,s){this.stopExtendedInteractions(r),this.map.dragPan.disable(),r.boxSelectStartLocation=zi(s.originalEvent,this.map.getContainer()),r.canBoxSelect=!0},Ze.onTouchStart=function(r,s){if(sn(s))return this.startOnActiveFeature(r,s)},Ze.onDrag=function(r,s){return r.canDragMove?this.dragMove(r,s):this.drawConfig.boxSelect&&r.canBoxSelect?this.whileBoxSelect(r,s):void 0},Ze.whileBoxSelect=function(r,s){r.boxSelecting=!0,this.updateUIClasses({mouse:F}),r.boxSelectElement||(r.boxSelectElement=document.createElement("div"),r.boxSelectElement.classList.add(L),this.map.getContainer().appendChild(r.boxSelectElement));var d=zi(s.originalEvent,this.map.getContainer()),g=Math.min(r.boxSelectStartLocation.x,d.x),S=Math.max(r.boxSelectStartLocation.x,d.x),_=Math.min(r.boxSelectStartLocation.y,d.y),w=Math.max(r.boxSelectStartLocation.y,d.y),V="translate("+g+"px, "+_+"px)";r.boxSelectElement.style.transform=V,r.boxSelectElement.style.WebkitTransform=V,r.boxSelectElement.style.width=S-g+"px",r.boxSelectElement.style.height=w-_+"px"},Ze.dragMove=function(r,s){r.dragMoving=!0,s.originalEvent.stopPropagation();var d={lng:s.lngLat.lng-r.dragMoveLocation.lng,lat:s.lngLat.lat-r.dragMoveLocation.lat};Or(this.getSelected(),d),r.dragMoveLocation=s.lngLat},Ze.onMouseUp=function(r,s){var d=this;if(r.dragMoving)this.fireUpdate();else if(r.boxSelecting){var g=[r.boxSelectStartLocation,zi(s.originalEvent,this.map.getContainer())],S=this.featuresAt(null,g,"click"),_=this.getUniqueIds(S).filter(function(w){return!d.isSelected(w)});_.length&&(this.select(_),_.forEach(function(w){return d.doRender(w)}),this.updateUIClasses({mouse:R}))}this.stopExtendedInteractions(r)},Ze.toDisplayFeatures=function(r,s,d){s.properties.active=this.isSelected(s.properties.id)?It:Rt,d(s),this.fireActionable(),s.properties.active===It&&s.geometry.type!==ie&&Bi(s).forEach(d)},Ze.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Ze.onCombineFeatures=function(){var r=this.getSelected();if(!(r.length===0||r.length<2)){for(var s=[],d=[],g=r[0].type.replace("Multi",""),S=0;S<r.length;S++){var _=r[S];if(_.type.replace("Multi","")!==g)return;_.type.includes("Multi")?_.getCoordinates().forEach(function(V){s.push(V)}):s.push(_.getCoordinates()),d.push(_.toGeoJSON())}if(d.length>1){var w=this.newFeature({type:D,properties:d[0].properties,geometry:{type:"Multi"+g,coordinates:s}});this.addFeature(w),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([w.id]),this.map.fire(Pi,{createdFeatures:[w.toGeoJSON()],deletedFeatures:d})}this.fireActionable()}},Ze.onUncombineFeatures=function(){var r=this,s=this.getSelected();if(s.length!==0){for(var d=[],g=[],S=function(w){var V=s[w];r.isInstanceOf("MultiFeature",V)&&(V.getFeatures().forEach(function(z){r.addFeature(z),z.properties=V.properties,d.push(z.toGeoJSON()),r.select([z.id])}),r.deleteFeature(V.id,{silent:!0}),g.push(V.toGeoJSON()))},_=0;_<s.length;_++)S(_);d.length>1&&this.map.fire(ee,{createdFeatures:d,deletedFeatures:g}),this.fireActionable()}};var Ar=Fi(yn),Ul=Fi(Li),jt={fireUpdate:function(){this.map.fire(ve,{action:El,features:this.getSelected().map(function(r){return r.toGeoJSON()})})},fireActionable:function(r){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:r.selectedCoordPaths.length>0})},startDragging:function(r,s){this.map.dragPan.disable(),r.canDragMove=!0,r.dragMoveLocation=s.lngLat},stopDragging:function(r){this.map.dragPan.enable(),r.dragMoving=!1,r.canDragMove=!1,r.dragMoveLocation=null},onVertex:function(r,s){this.startDragging(r,s);var d=s.featureTarget.properties,g=r.selectedCoordPaths.indexOf(d.coord_path);Ri(s)||g!==-1?Ri(s)&&g===-1&&r.selectedCoordPaths.push(d.coord_path):r.selectedCoordPaths=[d.coord_path];var S=this.pathsToCoordinates(r.featureId,r.selectedCoordPaths);this.setSelectedCoordinates(S)},onMidpoint:function(r,s){this.startDragging(r,s);var d=s.featureTarget.properties;r.feature.addCoordinate(d.coord_path,d.lng,d.lat),this.fireUpdate(),r.selectedCoordPaths=[d.coord_path]},pathsToCoordinates:function(r,s){return s.map(function(d){return{feature_id:r,coord_path:d}})},onFeature:function(r,s){r.selectedCoordPaths.length===0?this.startDragging(r,s):this.stopDragging(r)},dragFeature:function(r,s,d){Or(this.getSelected(),d),r.dragMoveLocation=s.lngLat},dragVertex:function(r,s,d){for(var g=r.selectedCoordPaths.map(function(V){return r.feature.getCoordinate(V)}),S=Tr(g.map(function(V){return{type:D,properties:{},geometry:{type:ie,coordinates:V}}}),d),_=0;_<g.length;_++){var w=g[_];r.feature.updateCoordinate(r.selectedCoordPaths[_],w[0]+S.lng,w[1]+S.lat)}},clickNoTarget:function(){this.changeMode(ue.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(ue.SIMPLE_SELECT)},clickActiveFeature:function(r){r.selectedCoordPaths=[],this.clearSelectedCoordinates(),r.feature.changed()},onSetup:function(r){var s=r.featureId,d=this.getFeature(s);if(!d)throw new Error("You must provide a featureId to enter direct_select mode");if(d.type===ie)throw new TypeError("direct_select mode doesn't handle point features");var g={featureId:s,feature:d,dragMoveLocation:r.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:r.coordPath?[r.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(s,g.selectedCoordPaths)),this.setSelected(s),Wn(this),this.setActionableState({trash:!0}),g},onStop:function(){fn(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(r,s,d){r.featureId===s.properties.id?(s.properties.active=It,d(s),Bi(s,{map:this.map,midpoints:!0,selectedPaths:r.selectedCoordPaths}).forEach(d)):(s.properties.active=Rt,d(s)),this.fireActionable(r)},onTrash:function(r){r.selectedCoordPaths.sort(function(s,d){return d.localeCompare(s,"en",{numeric:!0})}).forEach(function(s){return r.feature.removeCoordinate(s)}),this.fireUpdate(),r.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(r),r.feature.isValid()===!1&&(this.deleteFeature([r.featureId]),this.changeMode(ue.SIMPLE_SELECT,{}))},onMouseMove:function(r,s){var d=sn(s),g=Ar(s),S=r.selectedCoordPaths.length===0;return d&&S||g&&!S?this.updateUIClasses({mouse:R}):this.updateUIClasses({mouse:fe}),this.stopDragging(r),!0},onMouseOut:function(r){return r.dragMoving&&this.fireUpdate(),!0}};jt.onTouchStart=jt.onMouseDown=function(r,s){return Ar(s)?this.onVertex(r,s):sn(s)?this.onFeature(r,s):Ul(s)?this.onMidpoint(r,s):void 0},jt.onDrag=function(r,s){if(r.canDragMove===!0){r.dragMoving=!0,s.originalEvent.stopPropagation();var d={lng:s.lngLat.lng-r.dragMoveLocation.lng,lat:s.lngLat.lat-r.dragMoveLocation.lat};r.selectedCoordPaths.length>0?this.dragVertex(r,s,d):this.dragFeature(r,s,d),r.dragMoveLocation=s.lngLat}},jt.onClick=function(r,s){return Ni(s)?this.clickNoTarget(r,s):sn(s)?this.clickActiveFeature(r,s):Ir(s)?this.clickInactive(r,s):void this.stopDragging(r)},jt.onTap=function(r,s){return Ni(s)?this.clickNoTarget(r,s):sn(s)?this.clickActiveFeature(r,s):Ir(s)?this.clickInactive(r,s):void 0},jt.onTouchEnd=jt.onMouseUp=function(r){r.dragMoving&&this.fireUpdate(),this.stopDragging(r)};var wt={};function Vi(r,s){return!!r.lngLat&&r.lngLat.lng===s[0]&&r.lngLat.lat===s[1]}wt.onSetup=function(){var r=this.newFeature({type:D,properties:{},geometry:{type:ie,coordinates:[]}});return this.addFeature(r),this.clearSelectedFeatures(),this.updateUIClasses({mouse:F}),this.activateUIButton(ae.POINT),this.setActionableState({trash:!0}),{point:r}},wt.stopDrawingAndRemove=function(r){this.deleteFeature([r.point.id],{silent:!0}),this.changeMode(ue.SIMPLE_SELECT)},wt.onTap=wt.onClick=function(r,s){this.updateUIClasses({mouse:R}),r.point.updateCoordinate("",s.lngLat.lng,s.lngLat.lat),this.map.fire(ze,{features:[r.point.toGeoJSON()]}),this.changeMode(ue.SIMPLE_SELECT,{featureIds:[r.point.id]})},wt.onStop=function(r){this.activateUIButton(),r.point.getCoordinate().length||this.deleteFeature([r.point.id],{silent:!0})},wt.toDisplayFeatures=function(r,s,d){var g=s.properties.id===r.point.id;if(s.properties.active=g?It:Rt,!g)return d(s)},wt.onTrash=wt.stopDrawingAndRemove,wt.onKeyUp=function(r,s){if(Di(s)||ji(s))return this.stopDrawingAndRemove(r,s)};var Xt={onSetup:function(){var r=this.newFeature({type:D,properties:{},geometry:{type:$,coordinates:[[]]}});return this.addFeature(r),this.clearSelectedFeatures(),Wn(this),this.updateUIClasses({mouse:F}),this.activateUIButton(ae.POLYGON),this.setActionableState({trash:!0}),{polygon:r,currentVertexPosition:0}},clickAnywhere:function(r,s){if(r.currentVertexPosition>0&&Vi(s,r.polygon.coordinates[0][r.currentVertexPosition-1]))return this.changeMode(ue.SIMPLE_SELECT,{featureIds:[r.polygon.id]});this.updateUIClasses({mouse:F}),r.polygon.updateCoordinate("0."+r.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),r.currentVertexPosition++,r.polygon.updateCoordinate("0."+r.currentVertexPosition,s.lngLat.lng,s.lngLat.lat)},clickOnVertex:function(r){return this.changeMode(ue.SIMPLE_SELECT,{featureIds:[r.polygon.id]})},onMouseMove:function(r,s){r.polygon.updateCoordinate("0."+r.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),qn(s)&&this.updateUIClasses({mouse:G})}};Xt.onTap=Xt.onClick=function(r,s){return qn(s)?this.clickOnVertex(r,s):this.clickAnywhere(r,s)},Xt.onKeyUp=function(r,s){Di(s)?(this.deleteFeature([r.polygon.id],{silent:!0}),this.changeMode(ue.SIMPLE_SELECT)):ji(s)&&this.changeMode(ue.SIMPLE_SELECT,{featureIds:[r.polygon.id]})},Xt.onStop=function(r){this.updateUIClasses({mouse:fe}),fn(this),this.activateUIButton(),this.getFeature(r.polygon.id)!==void 0&&(r.polygon.removeCoordinate("0."+r.currentVertexPosition),r.polygon.isValid()?this.map.fire(ze,{features:[r.polygon.toGeoJSON()]}):(this.deleteFeature([r.polygon.id],{silent:!0}),this.changeMode(ue.SIMPLE_SELECT,{},{silent:!0})))},Xt.toDisplayFeatures=function(r,s,d){var g=s.properties.id===r.polygon.id;if(s.properties.active=g?It:Rt,!g)return d(s);if(s.geometry.coordinates.length!==0){var S=s.geometry.coordinates[0].length;if(!(S<3)){if(s.properties.meta=Kt,d(Sn(r.polygon.id,s.geometry.coordinates[0][0],"0.0",!1)),S>3){var _=s.geometry.coordinates[0].length-3;d(Sn(r.polygon.id,s.geometry.coordinates[0][_],"0."+_,!1))}if(S<=4){var w=[[s.geometry.coordinates[0][0][0],s.geometry.coordinates[0][0][1]],[s.geometry.coordinates[0][1][0],s.geometry.coordinates[0][1][1]]];if(d({type:D,properties:s.properties,geometry:{coordinates:w,type:j}}),S===3)return}return d(s)}}},Xt.onTrash=function(r){this.deleteFeature([r.polygon.id],{silent:!0}),this.changeMode(ue.SIMPLE_SELECT)};var $t={onSetup:function(r){var s,d,g=(r=r||{}).featureId,S="forward";if(g){if(!(s=this.getFeature(g)))throw new Error("Could not find a feature with the provided featureId");var _=r.from;if(_&&_.type==="Feature"&&_.geometry&&_.geometry.type==="Point"&&(_=_.geometry),_&&_.type==="Point"&&_.coordinates&&_.coordinates.length===2&&(_=_.coordinates),!_||!Array.isArray(_))throw new Error("Please use the `from` property to indicate which point to continue the line from");var w=s.coordinates.length-1;if(s.coordinates[w][0]===_[0]&&s.coordinates[w][1]===_[1])d=w+1,s.addCoordinate.apply(s,[d].concat(s.coordinates[w]));else{if(s.coordinates[0][0]!==_[0]||s.coordinates[0][1]!==_[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");S="backwards",d=0,s.addCoordinate.apply(s,[d].concat(s.coordinates[0]))}}else s=this.newFeature({type:D,properties:{},geometry:{type:j,coordinates:[]}}),d=0,this.addFeature(s);return this.clearSelectedFeatures(),Wn(this),this.updateUIClasses({mouse:F}),this.activateUIButton(ae.LINE),this.setActionableState({trash:!0}),{line:s,currentVertexPosition:d,direction:S}},clickAnywhere:function(r,s){if(r.currentVertexPosition>0&&Vi(s,r.line.coordinates[r.currentVertexPosition-1])||r.direction==="backwards"&&Vi(s,r.line.coordinates[r.currentVertexPosition+1]))return this.changeMode(ue.SIMPLE_SELECT,{featureIds:[r.line.id]});this.updateUIClasses({mouse:F}),r.line.updateCoordinate(r.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),r.direction==="forward"?(r.currentVertexPosition++,r.line.updateCoordinate(r.currentVertexPosition,s.lngLat.lng,s.lngLat.lat)):r.line.addCoordinate(0,s.lngLat.lng,s.lngLat.lat)},clickOnVertex:function(r){return this.changeMode(ue.SIMPLE_SELECT,{featureIds:[r.line.id]})},onMouseMove:function(r,s){r.line.updateCoordinate(r.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),qn(s)&&this.updateUIClasses({mouse:G})}};$t.onTap=$t.onClick=function(r,s){if(qn(s))return this.clickOnVertex(r,s);this.clickAnywhere(r,s)},$t.onKeyUp=function(r,s){ji(s)?this.changeMode(ue.SIMPLE_SELECT,{featureIds:[r.line.id]}):Di(s)&&(this.deleteFeature([r.line.id],{silent:!0}),this.changeMode(ue.SIMPLE_SELECT))},$t.onStop=function(r){fn(this),this.activateUIButton(),this.getFeature(r.line.id)!==void 0&&(r.line.removeCoordinate(""+r.currentVertexPosition),r.line.isValid()?this.map.fire(ze,{features:[r.line.toGeoJSON()]}):(this.deleteFeature([r.line.id],{silent:!0}),this.changeMode(ue.SIMPLE_SELECT,{},{silent:!0})))},$t.onTrash=function(r){this.deleteFeature([r.line.id],{silent:!0}),this.changeMode(ue.SIMPLE_SELECT)},$t.toDisplayFeatures=function(r,s,d){var g=s.properties.id===r.line.id;if(s.properties.active=g?It:Rt,!g)return d(s);s.geometry.coordinates.length<2||(s.properties.meta=Kt,d(Sn(r.line.id,s.geometry.coordinates[r.direction==="forward"?s.geometry.coordinates.length-2:1],""+(r.direction==="forward"?s.geometry.coordinates.length-2:1),!1)),d(s))};var Fr={simple_select:Ze,direct_select:jt,draw_point:wt,draw_polygon:Xt,draw_line_string:$t},Gl={defaultMode:ue.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:Fr,controls:{},userProperties:!1},Vl={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Jl={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Nr(r,s){return r.map(function(d){return d.source?d:Dt(d,{id:d.id+"."+s,source:s==="hot"?I:N})})}var ql=Oi(function(r,s){var d="[object Arguments]",g="[object Map]",S="[object Object]",_="[object Set]",w=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,z={};z["[object Float32Array]"]=z["[object Float64Array]"]=z["[object Int8Array]"]=z["[object Int16Array]"]=z["[object Int32Array]"]=z["[object Uint8Array]"]=z["[object Uint8ClampedArray]"]=z["[object Uint16Array]"]=z["[object Uint32Array]"]=!0,z[d]=z["[object Array]"]=z["[object ArrayBuffer]"]=z["[object Boolean]"]=z["[object DataView]"]=z["[object Date]"]=z["[object Error]"]=z["[object Function]"]=z[g]=z["[object Number]"]=z[S]=z["[object RegExp]"]=z[_]=z["[object String]"]=z["[object WeakMap]"]=!1;var Z=typeof Ln=="object"&&Ln&&Ln.Object===Object&&Ln,E=typeof self=="object"&&self&&self.Object===Object&&self,W=Z||E||Function("return this")(),Q=s&&!s.nodeType&&s,re=Q&&r&&!r.nodeType&&r,ce=re&&re.exports===Q,Ue=ce&&Z.process,A=function(){try{return Ue&&Ue.binding&&Ue.binding("util")}catch{}}(),te=A&&A.isTypedArray;function ke(y,C){for(var Y=-1,le=y==null?0:y.length;++Y<le;)if(C(y[Y],Y,y))return!0;return!1}function Se(y){var C=-1,Y=Array(y.size);return y.forEach(function(le,Te){Y[++C]=[Te,le]}),Y}function De(y){var C=-1,Y=Array(y.size);return y.forEach(function(le){Y[++C]=le}),Y}var oe,en,zt,we=Array.prototype,vt=Function.prototype,at=Object.prototype,Ji=W["__core-js_shared__"],Dr=vt.toString,St=at.hasOwnProperty,jr=(oe=/[^.]+$/.exec(Ji&&Ji.keys&&Ji.keys.IE_PROTO||""))?"Symbol(src)_1."+oe:"",zr=at.toString,Zl=RegExp("^"+Dr.call(St).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Br=ce?W.Buffer:void 0,Hn=W.Symbol,Ur=W.Uint8Array,Gr=at.propertyIsEnumerable,Kl=we.splice,tn=Hn?Hn.toStringTag:void 0,Vr=Object.getOwnPropertySymbols,Ql=Br?Br.isBuffer:void 0,Xl=(en=Object.keys,zt=Object,function(y){return en(zt(y))}),qi=cn(W,"DataView"),kn=cn(W,"Map"),Wi=cn(W,"Promise"),Yi=cn(W,"Set"),Hi=cn(W,"WeakMap"),En=cn(Object,"create"),$l=on(qi),ea=on(kn),ta=on(Wi),na=on(Yi),ia=on(Hi),Jr=Hn?Hn.prototype:void 0,Zi=Jr?Jr.valueOf:void 0;function nn(y){var C=-1,Y=y==null?0:y.length;for(this.clear();++C<Y;){var le=y[C];this.set(le[0],le[1])}}function Lt(y){var C=-1,Y=y==null?0:y.length;for(this.clear();++C<Y;){var le=y[C];this.set(le[0],le[1])}}function rn(y){var C=-1,Y=y==null?0:y.length;for(this.clear();++C<Y;){var le=y[C];this.set(le[0],le[1])}}function Zn(y){var C=-1,Y=y==null?0:y.length;for(this.__data__=new rn;++C<Y;)this.add(y[C])}function Bt(y){var C=this.__data__=new Lt(y);this.size=C.size}function ra(y,C){var Y=Xn(y),le=!Y&&ua(y),Te=!Y&&!le&&Ki(y),_e=!Y&&!le&&!Te&&$r(y),Be=Y||le||Te||_e,Je=Be?function(Ye,kt){for(var Tt=-1,et=Array(Ye);++Tt<Ye;)et[Tt]=kt(Tt);return et}(y.length,String):[],bt=Je.length;for(var We in y)!C&&!St.call(y,We)||Be&&(We=="length"||Te&&(We=="offset"||We=="parent")||_e&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||sa(We,bt))||Je.push(We);return Je}function Kn(y,C){for(var Y=y.length;Y--;)if(Zr(y[Y][0],C))return Y;return-1}function xn(y){return y==null?y===void 0?"[object Undefined]":"[object Null]":tn&&tn in Object(y)?function(C){var Y=St.call(C,tn),le=C[tn];try{C[tn]=void 0;var Te=!0}catch{}var _e=zr.call(C);return Te&&(Y?C[tn]=le:delete C[tn]),_e}(y):function(C){return zr.call(C)}(y)}function qr(y){return Cn(y)&&xn(y)==d}function Wr(y,C,Y,le,Te){return y===C||(y==null||C==null||!Cn(y)&&!Cn(C)?y!=y&&C!=C:function(_e,Be,Je,bt,We,Ye){var kt=Xn(_e),Tt=Xn(Be),et=kt?"[object Array]":Ut(_e),Ot=Tt?"[object Array]":Ut(Be),dn=(et=et==d?S:et)==S,$n=(Ot=Ot==d?S:Ot)==S,hn=et==Ot;if(hn&&Ki(_e)){if(!Ki(Be))return!1;kt=!0,dn=!1}if(hn&&!dn)return Ye||(Ye=new Bt),kt||$r(_e)?Yr(_e,Be,Je,bt,We,Ye):function(xe,Ee,ei,Gt,Qi,pt,At){switch(ei){case"[object DataView]":if(xe.byteLength!=Ee.byteLength||xe.byteOffset!=Ee.byteOffset)return!1;xe=xe.buffer,Ee=Ee.buffer;case"[object ArrayBuffer]":return!(xe.byteLength!=Ee.byteLength||!pt(new Ur(xe),new Ur(Ee)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Zr(+xe,+Ee);case"[object Error]":return xe.name==Ee.name&&xe.message==Ee.message;case"[object RegExp]":case"[object String]":return xe==Ee+"";case g:var Vt=Se;case _:var In=1&Gt;if(Vt||(Vt=De),xe.size!=Ee.size&&!In)return!1;var ti=At.get(xe);if(ti)return ti==Ee;Gt|=2,At.set(xe,Ee);var pn=Yr(Vt(xe),Vt(Ee),Gt,Qi,pt,At);return At.delete(xe),pn;case"[object Symbol]":if(Zi)return Zi.call(xe)==Zi.call(Ee)}return!1}(_e,Be,et,Je,bt,We,Ye);if(!(1&Je)){var Mn=dn&&St.call(_e,"__wrapped__"),eo=$n&&St.call(Be,"__wrapped__");if(Mn||eo){var ca=Mn?_e.value():_e,da=eo?Be.value():Be;return Ye||(Ye=new Bt),We(ca,da,Je,bt,Ye)}}return hn?(Ye||(Ye=new Bt),function(xe,Ee,ei,Gt,Qi,pt){var At=1&ei,Vt=Hr(xe),In=Vt.length,ti=Hr(Ee).length;if(In!=ti&&!At)return!1;for(var pn=In;pn--;){var Jt=Vt[pn];if(!(At?Jt in Ee:St.call(Ee,Jt)))return!1}var to=pt.get(xe);if(to&&pt.get(Ee))return to==Ee;var ni=!0;pt.set(xe,Ee),pt.set(Ee,xe);for(var Xi=At;++pn<In;){Jt=Vt[pn];var ii=xe[Jt],ri=Ee[Jt];if(Gt)var no=At?Gt(ri,ii,Jt,Ee,xe,pt):Gt(ii,ri,Jt,xe,Ee,pt);if(!(no===void 0?ii===ri||Qi(ii,ri,ei,Gt,pt):no)){ni=!1;break}Xi||(Xi=Jt=="constructor")}if(ni&&!Xi){var oi=xe.constructor,li=Ee.constructor;oi==li||!("constructor"in xe)||!("constructor"in Ee)||typeof oi=="function"&&oi instanceof oi&&typeof li=="function"&&li instanceof li||(ni=!1)}return pt.delete(xe),pt.delete(Ee),ni}(_e,Be,Je,bt,We,Ye)):!1}(y,C,Y,le,Wr,Te))}function oa(y){return!(!Xr(y)||function(C){return!!jr&&jr in C}(y))&&(Kr(y)?Zl:w).test(on(y))}function la(y){if(Y=(C=y)&&C.constructor,le=typeof Y=="function"&&Y.prototype||at,C!==le)return Xl(y);var C,Y,le,Te=[];for(var _e in Object(y))St.call(y,_e)&&_e!="constructor"&&Te.push(_e);return Te}function Yr(y,C,Y,le,Te,_e){var Be=1&Y,Je=y.length,bt=C.length;if(Je!=bt&&!(Be&&bt>Je))return!1;var We=_e.get(y);if(We&&_e.get(C))return We==C;var Ye=-1,kt=!0,Tt=2&Y?new Zn:void 0;for(_e.set(y,C),_e.set(C,y);++Ye<Je;){var et=y[Ye],Ot=C[Ye];if(le)var dn=Be?le(Ot,et,Ye,C,y,_e):le(et,Ot,Ye,y,C,_e);if(dn!==void 0){if(dn)continue;kt=!1;break}if(Tt){if(!ke(C,function($n,hn){if(Mn=hn,!Tt.has(Mn)&&(et===$n||Te(et,$n,Y,le,_e)))return Tt.push(hn);var Mn})){kt=!1;break}}else if(et!==Ot&&!Te(et,Ot,Y,le,_e)){kt=!1;break}}return _e.delete(y),_e.delete(C),kt}function Hr(y){return function(C,Y,le){var Te=Y(C);return Xn(C)?Te:function(_e,Be){for(var Je=-1,bt=Be.length,We=_e.length;++Je<bt;)_e[We+Je]=Be[Je];return _e}(Te,le(C))}(y,fa,aa)}function Qn(y,C){var Y,le,Te=y.__data__;return((le=typeof(Y=C))=="string"||le=="number"||le=="symbol"||le=="boolean"?Y!=="__proto__":Y===null)?Te[typeof C=="string"?"string":"hash"]:Te.map}function cn(y,C){var Y=function(le,Te){return le==null?void 0:le[Te]}(y,C);return oa(Y)?Y:void 0}nn.prototype.clear=function(){this.__data__=En?En(null):{},this.size=0},nn.prototype.delete=function(y){var C=this.has(y)&&delete this.__data__[y];return this.size-=C?1:0,C},nn.prototype.get=function(y){var C=this.__data__;if(En){var Y=C[y];return Y==="__lodash_hash_undefined__"?void 0:Y}return St.call(C,y)?C[y]:void 0},nn.prototype.has=function(y){var C=this.__data__;return En?C[y]!==void 0:St.call(C,y)},nn.prototype.set=function(y,C){var Y=this.__data__;return this.size+=this.has(y)?0:1,Y[y]=En&&C===void 0?"__lodash_hash_undefined__":C,this},Lt.prototype.clear=function(){this.__data__=[],this.size=0},Lt.prototype.delete=function(y){var C=this.__data__,Y=Kn(C,y);return!(Y<0)&&(Y==C.length-1?C.pop():Kl.call(C,Y,1),--this.size,!0)},Lt.prototype.get=function(y){var C=this.__data__,Y=Kn(C,y);return Y<0?void 0:C[Y][1]},Lt.prototype.has=function(y){return Kn(this.__data__,y)>-1},Lt.prototype.set=function(y,C){var Y=this.__data__,le=Kn(Y,y);return le<0?(++this.size,Y.push([y,C])):Y[le][1]=C,this},rn.prototype.clear=function(){this.size=0,this.__data__={hash:new nn,map:new(kn||Lt),string:new nn}},rn.prototype.delete=function(y){var C=Qn(this,y).delete(y);return this.size-=C?1:0,C},rn.prototype.get=function(y){return Qn(this,y).get(y)},rn.prototype.has=function(y){return Qn(this,y).has(y)},rn.prototype.set=function(y,C){var Y=Qn(this,y),le=Y.size;return Y.set(y,C),this.size+=Y.size==le?0:1,this},Zn.prototype.add=Zn.prototype.push=function(y){return this.__data__.set(y,"__lodash_hash_undefined__"),this},Zn.prototype.has=function(y){return this.__data__.has(y)},Bt.prototype.clear=function(){this.__data__=new Lt,this.size=0},Bt.prototype.delete=function(y){var C=this.__data__,Y=C.delete(y);return this.size=C.size,Y},Bt.prototype.get=function(y){return this.__data__.get(y)},Bt.prototype.has=function(y){return this.__data__.has(y)},Bt.prototype.set=function(y,C){var Y=this.__data__;if(Y instanceof Lt){var le=Y.__data__;if(!kn||le.length<199)return le.push([y,C]),this.size=++Y.size,this;Y=this.__data__=new rn(le)}return Y.set(y,C),this.size=Y.size,this};var aa=Vr?function(y){return y==null?[]:(y=Object(y),function(C,Y){for(var le=-1,Te=C==null?0:C.length,_e=0,Be=[];++le<Te;){var Je=C[le];Y(Je,le,C)&&(Be[_e++]=Je)}return Be}(Vr(y),function(C){return Gr.call(y,C)}))}:function(){return[]},Ut=xn;function sa(y,C){return!!(C=C??9007199254740991)&&(typeof y=="number"||V.test(y))&&y>-1&&y%1==0&&y<C}function on(y){if(y!=null){try{return Dr.call(y)}catch{}try{return y+""}catch{}}return""}function Zr(y,C){return y===C||y!=y&&C!=C}(qi&&Ut(new qi(new ArrayBuffer(1)))!="[object DataView]"||kn&&Ut(new kn)!=g||Wi&&Ut(Wi.resolve())!="[object Promise]"||Yi&&Ut(new Yi)!=_||Hi&&Ut(new Hi)!="[object WeakMap]")&&(Ut=function(y){var C=xn(y),Y=C==S?y.constructor:void 0,le=Y?on(Y):"";if(le)switch(le){case $l:return"[object DataView]";case ea:return g;case ta:return"[object Promise]";case na:return _;case ia:return"[object WeakMap]"}return C});var ua=qr(function(){return arguments}())?qr:function(y){return Cn(y)&&St.call(y,"callee")&&!Gr.call(y,"callee")},Xn=Array.isArray,Ki=Ql||function(){return!1};function Kr(y){if(!Xr(y))return!1;var C=xn(y);return C=="[object Function]"||C=="[object GeneratorFunction]"||C=="[object AsyncFunction]"||C=="[object Proxy]"}function Qr(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=9007199254740991}function Xr(y){var C=typeof y;return y!=null&&(C=="object"||C=="function")}function Cn(y){return y!=null&&typeof y=="object"}var $r=te?function(y){return function(C){return y(C)}}(te):function(y){return Cn(y)&&Qr(y.length)&&!!z[xn(y)]};function fa(y){return(C=y)!=null&&Qr(C.length)&&!Kr(C)?ra(y):la(y);var C}r.exports=function(y,C){return Wr(y,C)}}),Wl={Polygon:ht,LineString:Pt,Point:Qt,MultiPolygon:lt,MultiLineString:lt,MultiPoint:lt};function Yl(r,s){return s.modes=ue,s.getFeatureIdsAt=function(d){return wn.click({point:d},null,r).map(function(g){return g.properties.id})},s.getSelectedIds=function(){return r.store.getSelectedIds()},s.getSelected=function(){return{type:Pe,features:r.store.getSelectedIds().map(function(d){return r.store.get(d)}).map(function(d){return d.toGeoJSON()})}},s.getSelectedPoints=function(){return{type:Pe,features:r.store.getSelectedCoordinates().map(function(d){return{type:D,properties:{},geometry:{type:ie,coordinates:d.coordinates}}})}},s.set=function(d){if(d.type===void 0||d.type!==Pe||!Array.isArray(d.features))throw new Error("Invalid FeatureCollection");var g=r.store.createRenderBatch(),S=r.store.getAllIds().slice(),_=s.add(d),w=new mt(_);return(S=S.filter(function(V){return!w.has(V)})).length&&s.delete(S),g(),_},s.add=function(d){var g=JSON.parse(JSON.stringify(Pr(d))).features.map(function(S){if(S.id=S.id||Ai(),S.geometry===null)throw new Error("Invalid geometry: null");if(r.store.get(S.id)===void 0||r.store.get(S.id).type!==S.geometry.type){var _=Wl[S.geometry.type];if(_===void 0)throw new Error("Invalid geometry type: "+S.geometry.type+".");var w=new _(r,S);r.store.add(w)}else{var V=r.store.get(S.id);V.properties=S.properties,ql(V.getCoordinates(),S.geometry.coordinates)||V.incomingCoords(S.geometry.coordinates)}return S.id});return r.store.render(),g},s.get=function(d){var g=r.store.get(d);if(g)return g.toGeoJSON()},s.getAll=function(){return{type:Pe,features:r.store.getAll().map(function(d){return d.toGeoJSON()})}},s.delete=function(d){return r.store.delete(d,{silent:!0}),s.getMode()!==ue.DIRECT_SELECT||r.store.getSelectedIds().length?r.store.render():r.events.changeMode(ue.SIMPLE_SELECT,void 0,{silent:!0}),s},s.deleteAll=function(){return r.store.delete(r.store.getAllIds(),{silent:!0}),s.getMode()===ue.DIRECT_SELECT?r.events.changeMode(ue.SIMPLE_SELECT,void 0,{silent:!0}):r.store.render(),s},s.changeMode=function(d,g){return g===void 0&&(g={}),d===ue.SIMPLE_SELECT&&s.getMode()===ue.SIMPLE_SELECT?(S=g.featureIds||[],_=r.store.getSelectedIds(),S.length===_.length&&JSON.stringify(S.map(function(w){return w}).sort())===JSON.stringify(_.map(function(w){return w}).sort())||(r.store.setSelected(g.featureIds,{silent:!0}),r.store.render()),s):(d===ue.DIRECT_SELECT&&s.getMode()===ue.DIRECT_SELECT&&g.featureId===r.store.getSelectedIds()[0]||r.events.changeMode(d,g,{silent:!0}),s);var S,_},s.getMode=function(){return r.events.getMode()},s.trash=function(){return r.events.trash({silent:!0}),s},s.combineFeatures=function(){return r.events.combineFeatures({silent:!0}),s},s.uncombineFeatures=function(){return r.events.uncombineFeatures({silent:!0}),s},s.setFeatureProperty=function(d,g,S){return r.store.setFeatureProperty(d,g,S),s},s}var Hl=function(r,s){var d={options:r=function(S){S===void 0&&(S={});var _=Dt(S);return S.controls||(_.controls={}),S.displayControlsDefault===!1?_.controls=Dt(Jl,S.controls):_.controls=Dt(Vl,S.controls),(_=Dt(Gl,_)).styles=Nr(_.styles,"cold").concat(Nr(_.styles,"hot")),_}(r)};s=Yl(d,s),d.api=s;var g=Fl(d);return s.onAdd=g.onAdd,s.onRemove=g.onRemove,s.types=ae,s.options=r,s};function Rr(r){Hl(r,this)}return Rr.modes=Fr,Rr})})(xu);const il=fr;let Ce;const bl=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});bl.decode();let ci=new Uint8Array;function Nn(){return ci.byteLength===0&&(ci=new Uint8Array(Ce.memory.buffer)),ci}function Rn(n,e){return bl.decode(Nn().subarray(n,n+e))}const Nt=new Array(32).fill(void 0);Nt.push(void 0,null,!0,!1);let Dn=Nt.length;function rl(n){Dn===Nt.length&&Nt.push(Nt.length+1);const e=Dn;return Dn=Nt[e],Nt[e]=n,e}function cr(n){return Nt[n]}function Cu(n){n<36||(Nt[n]=Dn,Dn=n)}function _l(n){const e=cr(n);return Cu(n),e}let zn=0;function Mu(n,e){const t=e(n.length*1);return Nn().set(n,t/1),zn=n.length,t}let di=new Int32Array;function Ft(){return di.byteLength===0&&(di=new Int32Array(Ce.memory.buffer)),di}const hi=new TextEncoder("utf-8"),Iu=typeof hi.encodeInto=="function"?function(n,e){return hi.encodeInto(n,e)}:function(n,e){const t=hi.encode(n);return e.set(t),{read:n.length,written:t.length}};function Pu(n,e,t){if(t===void 0){const u=hi.encode(n),c=e(u.length);return Nn().subarray(c,c+u.length).set(u),zn=u.length,c}let i=n.length,o=e(i);const l=Nn();let a=0;for(;a<i;a++){const u=n.charCodeAt(a);if(u>127)break;l[o+a]=u}if(a!==i){a!==0&&(n=n.slice(a)),o=t(o,i,i=a+n.length*3);const u=Nn().subarray(o+a,o+i),c=Iu(n,u);a+=c.written}return zn=a,o}class yi{static __wrap(e){const t=Object.create(yi.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();Ce.__wbg_jsroutesnapper_free(e)}constructor(e){try{const l=Ce.__wbindgen_add_to_stack_pointer(-16),a=Mu(e,Ce.__wbindgen_malloc),u=zn;Ce.jsroutesnapper_new(l,a,u);var t=Ft()[l/4+0],i=Ft()[l/4+1],o=Ft()[l/4+2];if(o)throw _l(i);return yi.__wrap(t)}finally{Ce.__wbindgen_add_to_stack_pointer(16)}}toFinalFeature(){try{const i=Ce.__wbindgen_add_to_stack_pointer(-16);Ce.jsroutesnapper_toFinalFeature(i,this.ptr);var e=Ft()[i/4+0],t=Ft()[i/4+1];let o;return e!==0&&(o=Rn(e,t).slice(),Ce.__wbindgen_free(e,t*1)),o}finally{Ce.__wbindgen_add_to_stack_pointer(16)}}renderGeojson(){try{const i=Ce.__wbindgen_add_to_stack_pointer(-16);Ce.jsroutesnapper_renderGeojson(i,this.ptr);var e=Ft()[i/4+0],t=Ft()[i/4+1];return Rn(e,t)}finally{Ce.__wbindgen_add_to_stack_pointer(16),Ce.__wbindgen_free(e,t)}}setSnapMode(e){Ce.jsroutesnapper_setSnapMode(this.ptr,e)}onMouseMove(e,t,i){return Ce.jsroutesnapper_onMouseMove(this.ptr,e,t,i)!==0}onClick(){Ce.jsroutesnapper_onClick(this.ptr)}onDragStart(){return Ce.jsroutesnapper_onDragStart(this.ptr)!==0}onMouseUp(){return Ce.jsroutesnapper_onMouseUp(this.ptr)!==0}clearState(){Ce.jsroutesnapper_clearState(this.ptr)}}async function Lu(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(i){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i);else throw i}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function Tu(){const n={};return n.wbg={},n.wbg.__wbindgen_string_new=function(e,t){const i=Rn(e,t);return rl(i)},n.wbg.__wbindgen_object_drop_ref=function(e){_l(e)},n.wbg.__wbg_log_4b5638ad60bdc54a=function(e){console.log(cr(e))},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return rl(e)},n.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const i=cr(t).stack,o=Pu(i,Ce.__wbindgen_malloc,Ce.__wbindgen_realloc),l=zn;Ft()[e/4+1]=l,Ft()[e/4+0]=o},n.wbg.__wbg_error_f851667af71bcfc6=function(e,t){try{console.error(Rn(e,t))}finally{Ce.__wbindgen_free(e,t)}},n.wbg.__wbindgen_throw=function(e,t){throw new Error(Rn(e,t))},n}function Ou(n,e){return Ce=n.exports,yl.__wbindgen_wasm_module=e,di=new Int32Array,ci=new Uint8Array,Ce}async function yl(n){typeof n>"u"&&(n="/atip/assets/route_snapper_bg.wasm");const e=Tu();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:i}=await Lu(await n,e);return Ou(t,i)}var Un,dr,Si,wl,Gn,hr,Wt,mn;class Au{constructor(e,t,i){Pn(this,Un);Pn(this,Si);Pn(this,Gn);Pn(this,Wt);this.controlDiv=i,this.map=e,console.time("Deserialize and setup JsRouteSnapper"),this.inner=new yi(t),console.timeEnd("Deserialize and setup JsRouteSnapper"),console.log("JsRouteSnapper ready, waiting for idle event"),this.active=!1,this.map.once("idle",()=>{console.log("JsRouteSnapper now usable"),this.map.addSource("route-snapper",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:"route-points",type:"circle",source:"route-snapper",paint:{"circle-radius":["match",["get","type"],"unimportant",10/2,10],"circle-color":["match",["get","type"],"hovered","green","important","red","black"]},filter:["in","$type","Point"]}),this.map.addLayer({id:"route-lines",type:"line",source:"route-snapper",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"black","line-width":2.5},filter:["in","$type","LineString"]}),this.map.on("mousemove",a=>{if(!this.active)return;const u={x:a.point.x-30,y:a.point.y},c=this.map.unproject(a.point).distanceTo(this.map.unproject(u));this.inner.onMouseMove(a.lngLat.lng,a.lngLat.lat,c)&&_t(this,Wt,mn).call(this)}),this.map.on("click",()=>{this.active&&(this.inner.onClick(),_t(this,Wt,mn).call(this))}),this.map.on("dragstart",a=>{this.active&&this.inner.onDragStart()&&this.map.dragPan.disable()}),this.map.on("mouseup",a=>{this.active&&this.inner.onMouseUp()&&this.map.dragPan.enable()}),document.addEventListener("keypress",a=>{this.active&&a.key=="Enter"&&(a.preventDefault(),_t(this,Gn,hr).call(this))}),document.addEventListener("keydown",a=>{this.active&&a.key=="Shift"&&(a.preventDefault(),this.inner.setSnapMode(!1),_t(this,Wt,mn).call(this))}),document.addEventListener("keyup",a=>{this.active&&a.key=="Shift"&&(a.preventDefault(),this.inner.setSnapMode(!0),_t(this,Wt,mn).call(this))}),_t(this,Un,dr).call(this)})}isActive(){return this.active}tearDown(){this.map.removeLayer("route-points"),this.map.removeLayer("route-lines"),this.map.removeSource("route-snapper")}}Un=new WeakSet,dr=function(){this.active=!1,this.inner.clearState(),_t(this,Wt,mn).call(this),this.controlDiv.innerHTML="";var e=document.createElement("button");e.innerText="Route tool",e.type="button",e.onclick=()=>{_t(this,Si,wl).call(this)},this.controlDiv.appendChild(e)},Si=new WeakSet,wl=function(){this.active=!0,this.controlDiv.dispatchEvent(new CustomEvent("activate")),this.controlDiv.innerHTML="";var e=document.createElement("button");e.type="button",e.innerText="Finish route",e.onclick=()=>{_t(this,Gn,hr).call(this)},this.controlDiv.appendChild(e);const t=document.createElement("ul");t.innerHTML="<li><b>Click</b> green points on the transport network</br>to create snapped routes</li><li>Hold <b>Shift</b> to draw a point anywhere</li><li><b>Click and drag</b> any point to move it</li><li><b>Click</b> a red waypoint to delete it</li><li>Press <b>Enter</b> to finish route</li>",this.controlDiv.appendChild(t)},Gn=new WeakSet,hr=function(){const e=this.inner.toFinalFeature();e?this.controlDiv.dispatchEvent(new CustomEvent("new-route",{detail:JSON.parse(e)})):this.controlDiv.dispatchEvent(new CustomEvent("no-new-route")),_t(this,Un,dr).call(this)},Wt=new WeakSet,mn=function(){this.map.getSource("route-snapper").setData(JSON.parse(this.inner.renderGeojson()))};async function Fu(n,e){const t=await fetch(n),i=t.body.getReader(),o=t.headers.get("Content-Length");let l=0,a=[];for(;;){const{done:f,value:h}=await i.read();if(f)break;a.push(h),l+=h.length;const m=100*l/o;e.style=`background: linear-gradient(to right, red ${m}%, transparent 0);`}let u=new Uint8Array(l),c=0;for(let f of a)u.set(f,c),c+=f.length;return u}const Me=_n(bn()),Bn=_n(null),pr=_n(null);function bn(){return{type:"FeatureCollection",features:[]}}const yr=hl(Me,n=>{let e=n.features.find(t=>t.properties.editing);return e?e.id:null});function Nu(n){Me.update(e=>{for(let t of e.features)t.id==n?t.properties.editing=!0:delete t.properties.editing;return e})}function Sl(){Me.update(n=>(n.features.forEach(e=>{delete e.properties.editing}),n))}function Ru(n){let e,t,i,o;return{c(){e=q("div"),e.textContent="Add intervention",t=K(),i=q("div"),o=q("div"),o.textContent="Route tool loading...",X(e,"class","header svelte-15ile5d"),X(i,"class","route-container svelte-15ile5d")},m(l,a){T(l,e,a),T(l,t,a),T(l,i,a),B(i,o),n[3](o),n[4](i)},p:He,i:He,o:He,d(l){l&&O(e),l&&O(t),l&&O(i),n[3](null),n[4](null)}}}const ui="black",ol=7,ll=10;function Du(n,e,t){let i;xt(n,Me,M=>t(8,i=M));const{getMap:o}=ln("map"),l=[{id:"base-points",filter:["all",vi,["==","meta","feature"]],..._i(ui,ol)},{id:"draggable-points",filter:["all",vi,["!=","meta","feature"]],..._i("blue",1.5*ol)},{id:"base-line",filter:_r,...bi(ui,ll)},{id:"base-polygon-fill",filter:mi,...Ei(ui,.1)},{id:"base-polygon-outline",filter:mi,...bi(ui,ll/2)}];let{url:a}=e,u,c,f,h;an(async()=>{const M=o();f=new il({displayControlsDefault:!1,controls:{point:!0,polygon:!0},modes:Object.assign({static:b},il.modes),styles:l}),M.addControl(f),await m(M),M.on("draw.create",P=>{const U=P.features[0];U.geometry.type=="Polygon"?U.properties.intervention_type="area":U.properties.intervention_type="other",Me.update(L=>(L.features.push(U),L))}),M.on("draw.update",P=>{const U=P.features[0];Me.update(L=>{const I=L.features.find(N=>N.id==U.id);return I.geometry=U.geometry,L})}),M.on("draw.selectionchange",P=>{P.features.length==1&&(!h||!h.isActive())?Nu(P.features[0].id):P.features.length==0&&Sl()}),Me.subscribe(P=>{f.set(P)}),M.on("mousemove",P=>{var U=null;if(h&&!h.isActive()){const L=f.getFeatureIdsAt(P.point);L.length>0&&(U=L[0]),pr.set(U)}}),M.on("mouseout",()=>{pr.set(null)}),yr.subscribe(P=>{if(P){let U=i.features.find(L=>L.id==P);U.geometry.type!="Point"&&f.changeMode("direct_select",{featureId:U.id})}})}),cl(()=>{o().removeControl(f),h.tearDown()});async function m(M){await yl(),console.log(`Grabbing ${a}`);try{const P=await Fu(a,c);h=new Au(M,P,u)}catch(P){console.log(`Route tool broke: ${P}`),t(0,u.innerHTML="Failed to load",u)}u.addEventListener("activate",()=>{f.changeMode("static")}),u.addEventListener("no-new-route",()=>{f.changeMode("simple_select")}),u.addEventListener("new-route",P=>{const U=P.detail,L=f.add(U);U.id=L[0],U.properties.intervention_type="route",Me.update(I=>(I.features.push(U),I)),f.changeMode("direct_select",{featureId:U.id})})}let b={};b.onSetup=function(){return this.setActionableState(),{}},b.toDisplayFeatures=function(M,P,U){U(P)};function p(M){Qe[M?"unshift":"push"](()=>{c=M,t(1,c)})}function v(M){Qe[M?"unshift":"push"](()=>{u=M,t(0,u)})}return n.$$set=M=>{"url"in M&&t(2,a=M.url)},[u,c,a,p,v]}class ju extends Ae{constructor(e){super(),Fe(this,e,Du,Ru,Ne,{url:2})}}function zu(n){let e,t,i,o,l,a,u,c;return e=new si({props:{labelText:"Area",value:"area"}}),i=new si({props:{labelText:"Route",value:"route"}}),l=new si({props:{labelText:"Crossing",value:"crossing"}}),u=new si({props:{labelText:"Other",value:"other"}}),{c(){pe(e.$$.fragment),t=K(),pe(i.$$.fragment),o=K(),pe(l.$$.fragment),a=K(),pe(u.$$.fragment)},m(f,h){ge(e,f,h),T(f,t,h),ge(i,f,h),T(f,o,h),ge(l,f,h),T(f,a,h),ge(u,f,h),c=!0},p:He,i(f){c||(J(e.$$.fragment,f),J(i.$$.fragment,f),J(l.$$.fragment,f),J(u.$$.fragment,f),c=!0)},o(f){H(e.$$.fragment,f),H(i.$$.fragment,f),H(l.$$.fragment,f),H(u.$$.fragment,f),c=!1},d(f){me(e,f),f&&O(t),me(i,f),f&&O(o),me(l,f),f&&O(a),me(u,f)}}}function Bu(n){let e,t,i,o,l,a,u,c,f,h,m,b,p,v,M,P,U,L,I,N,F,R;function be(j){n[5](j)}let G={labelText:"Name"};n[0]!==void 0&&(G.value=n[0]),e=new Ls({props:G}),Qe.push(()=>Ct(e,"value",be,n[0]));function fe(j){n[6](j)}let ae={$$slots:{default:[zu]},$$scope:{ctx:n}};n[1]!==void 0&&(ae.selected=n[1]),a=new ms({props:ae}),Qe.push(()=>Ct(a,"selected",fe,n[1]));function D(j){n[7](j)}let $={labelText:"Description"};return n[2]!==void 0&&($.value=n[2]),m=new Ss({props:$}),Qe.push(()=>Ct(m,"value",D,n[2])),{c(){pe(e.$$.fragment),i=K(),o=q("br"),l=K(),pe(a.$$.fragment),c=K(),f=q("br"),h=K(),pe(m.$$.fragment),p=K(),v=q("br"),M=K(),P=q("div"),U=q("button"),U.textContent="Delete",L=K(),I=q("button"),I.textContent="Save",X(U,"type","button"),X(I,"type","button"),ir(I,"float","right")},m(j,ie){ge(e,j,ie),T(j,i,ie),T(j,o,ie),T(j,l,ie),ge(a,j,ie),T(j,c,ie),T(j,f,ie),T(j,h,ie),ge(m,j,ie),T(j,p,ie),T(j,v,ie),T(j,M,ie),T(j,P,ie),B(P,U),B(P,L),B(P,I),N=!0,F||(R=[ne(U,"click",n[3]),ne(I,"click",Sl)],F=!0)},p(j,[ie]){const Pe={};!t&&ie&1&&(t=!0,Pe.value=j[0],Mt(()=>t=!1)),e.$set(Pe);const Oe={};ie&256&&(Oe.$$scope={dirty:ie,ctx:j}),!u&&ie&2&&(u=!0,Oe.selected=j[1],Mt(()=>u=!1)),a.$set(Oe);const Re={};!b&&ie&4&&(b=!0,Re.value=j[2],Mt(()=>b=!1)),m.$set(Re)},i(j){N||(J(e.$$.fragment,j),J(a.$$.fragment,j),J(m.$$.fragment,j),N=!0)},o(j){H(e.$$.fragment,j),H(a.$$.fragment,j),H(m.$$.fragment,j),N=!1},d(j){me(e,j),j&&O(i),j&&O(o),j&&O(l),me(a,j),j&&O(c),j&&O(f),j&&O(h),me(m,j),j&&O(p),j&&O(v),j&&O(M),j&&O(P),F=!1,dt(R)}}}function Uu(n,e,t){let{id:i}=e,{name:o}=e,{intervention_type:l}=e,{description:a}=e;function u(){Me.update(m=>(m.features=m.features.filter(b=>b.id!=i),m))}function c(m){o=m,t(0,o)}function f(m){l=m,t(1,l)}function h(m){a=m,t(2,a)}return n.$$set=m=>{"id"in m&&t(4,i=m.id),"name"in m&&t(0,o=m.name),"intervention_type"in m&&t(1,l=m.intervention_type),"description"in m&&t(2,a=m.description)},[o,l,a,u,i,c,f,h]}class Gu extends Ae{constructor(e){super(),Fe(this,e,Uu,Bu,Ne,{id:4,name:0,intervention_type:1,description:2})}}function al(n,e,t){const i=n.slice();return i[10]=e[t],i[11]=e,i[12]=t,i}function Vu(n){let e,t,i,o,l,a;function u(m){n[5](m,n[10])}function c(m){n[6](m,n[10])}function f(m){n[7](m,n[10])}let h={id:n[10].id};return n[10].properties.name!==void 0&&(h.name=n[10].properties.name),n[10].properties.intervention_type!==void 0&&(h.intervention_type=n[10].properties.intervention_type),n[10].properties.description!==void 0&&(h.description=n[10].properties.description),e=new Gu({props:h}),Qe.push(()=>Ct(e,"name",u,n[10].properties.name)),Qe.push(()=>Ct(e,"intervention_type",c,n[10].properties.intervention_type)),Qe.push(()=>Ct(e,"description",f,n[10].properties.description)),{c(){pe(e.$$.fragment),l=K()},m(m,b){ge(e,m,b),T(m,l,b),a=!0},p(m,b){n=m;const p={};b&1&&(p.id=n[10].id),!t&&b&1&&(t=!0,p.name=n[10].properties.name,Mt(()=>t=!1)),!i&&b&1&&(i=!0,p.intervention_type=n[10].properties.intervention_type,Mt(()=>i=!1)),!o&&b&1&&(o=!0,p.description=n[10].properties.description,Mt(()=>o=!1)),e.$set(p)},i(m){a||(J(e.$$.fragment,m),a=!0)},o(m){H(e.$$.fragment,m),a=!1},d(m){me(e,m),m&&O(l)}}}function Ju(n){let e=n[12]+1+"",t,i,o=wi(n[10])+"",l;return{c(){t=ye(e),i=ye(") "),l=ye(o)},m(a,u){T(a,t,u),T(a,i,u),T(a,l,u)},p(a,u){u&1&&o!==(o=wi(a[10])+"")&&je(l,o)},d(a){a&&O(t),a&&O(i),a&&O(l)}}}function qu(n){let e,t=n[12]+1+"",i,o,l=wi(n[10])+"",a;return{c(){e=q("strong"),i=ye(t),o=ye(") "),a=ye(l)},m(u,c){T(u,e,c),B(e,i),B(e,o),B(e,a)},p(u,c){c&1&&l!==(l=wi(u[10])+"")&&je(a,l)},d(u){u&&O(e)}}}function Wu(n){let e;function t(l,a){return l[10].id==l[1]?qu:Ju}let i=t(n),o=i(n);return{c(){o.c(),e=K()},m(l,a){o.m(l,a),T(l,e,a)},p(l,a){i===(i=t(l))&&o?o.p(l,a):(o.d(1),o=i(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){o.d(l),l&&O(e)}}}function sl(n){let e,t,i;function o(a){n[8](a,n[10])}let l={$$slots:{title:[Wu],default:[Vu]},$$scope:{ctx:n}};return n[10].properties.editing!==void 0&&(l.open=n[10].properties.editing),e=new Ja({props:l}),Qe.push(()=>Ct(e,"open",o,n[10].properties.editing)),e.$on("click",function(){oo(n[3](n[10].id))&&n[3](n[10].id).apply(this,arguments)}),e.$on("mouseenter",function(){oo(Bn.set(n[10].id))&&Bn.set(n[10].id).apply(this,arguments)}),e.$on("mouseleave",n[2]),{c(){pe(e.$$.fragment)},m(a,u){ge(e,a,u),i=!0},p(a,u){n=a;const c={};u&8195&&(c.$$scope={dirty:u,ctx:n}),!t&&u&1&&(t=!0,c.open=n[10].properties.editing,Mt(()=>t=!1)),e.$set(c)},i(a){i||(J(e.$$.fragment,a),i=!0)},o(a){H(e.$$.fragment,a),i=!1},d(a){me(e,a)}}}function Yu(n){let e,t,i=n[0].features,o=[];for(let a=0;a<i.length;a+=1)o[a]=sl(al(n,i,a));const l=a=>H(o[a],1,1,()=>{o[a]=null});return{c(){for(let a=0;a<o.length;a+=1)o[a].c();e=gr()},m(a,u){for(let c=0;c<o.length;c+=1)o[c].m(a,u);T(a,e,u),t=!0},p(a,u){if(u&15){i=a[0].features;let c;for(c=0;c<i.length;c+=1){const f=al(a,i,c);o[c]?(o[c].p(f,u),J(o[c],1)):(o[c]=sl(f),o[c].c(),J(o[c],1),o[c].m(e.parentNode,e))}for(tt(),c=i.length;c<o.length;c+=1)l(c);nt()}},i(a){if(!t){for(let u=0;u<i.length;u+=1)J(o[u]);t=!0}},o(a){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)H(o[u]);t=!1},d(a){ul(o,a),a&&O(e)}}}function Hu(n){let e,t,i,o;return e=new ja({props:{$$slots:{default:[Yu]},$$scope:{ctx:n}}}),{c(){pe(e.$$.fragment)},m(l,a){ge(e,l,a),t=!0,i||(o=ne(window,"keydown",n[4]),i=!0)},p(l,[a]){const u={};a&8195&&(u.$$scope={dirty:a,ctx:l}),e.$set(u)},i(l){t||(J(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){me(e,l),i=!1,o()}}}function wi(n){if(n.properties.name)return n.properties.name;var e=n.properties.intervention_type;return e=="other"&&(n.geometry.type=="Point"?e="point":n.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function Zu(n,e,t){let i,o,l;xt(n,yr,p=>t(9,i=p)),xt(n,Me,p=>t(0,o=p)),xt(n,pr,p=>t(1,l=p));function a(){Bn.set(null)}function u(p){for(let v of o.features)if(v.properties.editing&&v.id!=p){delete v.properties.editing;return}}function c(p){const v=i;if(p.key=="Delete"){const M=p.originalTarget.tagName;if(M!="CANVAS"&&M!="BODY")return;p.preventDefault(),Me.update(P=>(P.features=P.features.filter(U=>U.id!=v),P))}}function f(p,v){n.$$.not_equal(v.properties.name,p)&&(v.properties.name=p,Me.set(o))}function h(p,v){n.$$.not_equal(v.properties.intervention_type,p)&&(v.properties.intervention_type=p,Me.set(o))}function m(p,v){n.$$.not_equal(v.properties.description,p)&&(v.properties.description=p,Me.set(o))}function b(p,v){n.$$.not_equal(v.properties.editing,p)&&(v.properties.editing=p,Me.set(o))}return[o,l,a,u,c,f,h,m,b]}class Ku extends Ae{constructor(e){super(),Fe(this,e,Zu,Hu,Ne,{})}}function Qu(n){let e,t,i,o,l,a,u,c,f,h,m,b,p,v,M,P,U,L,I,N=n[0].features.length+"",F,R,be,G,fe,ae,D,$;return{c(){e=q("div"),t=q("label"),i=ye(`Scheme name:
    `),o=q("input"),l=K(),a=q("br"),u=K(),c=q("div"),f=q("label"),h=q("input"),m=K(),b=q("button"),b.textContent="Load from GeoJSON",p=K(),v=q("button"),v.textContent="Export to GeoJSON",M=K(),P=q("br"),U=K(),L=q("div"),I=q("span"),F=ye(N),R=ye(" interventions"),be=K(),G=q("button"),fe=ye("Clear all"),X(o,"type","text"),X(h,"type","file"),X(h,"id","load_geojson"),X(h,"class","svelte-lhyd1e"),X(b,"type","button"),X(b,"onclick","document.getElementById('load_geojson').click();"),X(v,"type","button"),X(v,"class","align-right svelte-lhyd1e"),X(G,"type","button"),X(G,"class","align-right svelte-lhyd1e"),G.disabled=ae=n[0].features.length==0},m(j,ie){T(j,e,ie),B(e,t),B(t,i),B(t,o),vn(o,n[0].scheme_name),T(j,l,ie),T(j,a,ie),T(j,u,ie),T(j,c,ie),B(c,f),B(f,h),B(f,m),B(f,b),B(c,p),B(c,v),T(j,M,ie),T(j,P,ie),T(j,U,ie),T(j,L,ie),B(L,I),B(I,F),B(I,R),B(L,be),B(L,G),B(G,fe),D||($=[ne(o,"input",n[5]),ne(h,"change",n[3]),ne(v,"click",n[2]),ne(G,"click",n[1])],D=!0)},p(j,[ie]){ie&1&&o.value!==j[0].scheme_name&&vn(o,j[0].scheme_name),ie&1&&N!==(N=j[0].features.length+"")&&je(F,N),ie&1&&ae!==(ae=j[0].features.length==0)&&(G.disabled=ae)},i:He,o:He,d(j){j&&O(e),j&&O(l),j&&O(a),j&&O(u),j&&O(c),j&&O(M),j&&O(P),j&&O(U),j&&O(L),D=!1,dt($)}}}function Xu(n,e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(e)),t.setAttribute("download",n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function $u(n,e,t){let i;xt(n,Me,m=>t(0,i=m));let{authorityName:o}=e,l=window.localStorage.getItem(o);if(l)try{Me.set(JSON.parse(l))}catch(m){console.log(`Failed to load from local storage: ${m}`)}Me.subscribe(()=>window.localStorage.setItem(o,JSON.stringify(u()))),Me.update(m=>(m.authority=o,m));function a(){confirm("Do you want to clear the current scheme? (You should save it first!)")&&Me.set(bn())}function u(){const m=JSON.parse(JSON.stringify(i));for(let b of m.features)delete b.properties.editing;return m}function c(){let m=u();var b=o;m.scheme_name&&(b+="_"+m.scheme_name),b+=".txt",Xu(b,JSON.stringify(m,null,"  "))}function f(m){const b=new FileReader;b.onload=p=>{try{Me.set(JSON.parse(p.target.result))}catch(v){console.log(`Couldn't load from a file: ${v}`),window.alert(`Couldn't load scheme from a file: ${v}`)}},b.readAsText(m.target.files[0])}function h(){i.scheme_name=this.value,Me.set(i)}return n.$$set=m=>{"authorityName"in m&&t(4,o=m.authorityName)},[i,a,c,f,o,h]}class ef extends Ae{constructor(e){super(),Fe(this,e,$u,Qu,Ne,{authorityName:4})}}let gn="hover",tr="yellow",tf=10,nf=7;function rf(n,e,t){let i,o;xt(n,Me,u=>t(1,i=u));const{getMap:l}=ln("map"),a=hl(Me,u=>u.features.some(c=>c.properties.editing));return xt(n,a,u=>t(2,o=u)),an(()=>{const u=l();u.addSource(gn,{type:"geojson",data:bn()}),u.addLayer({id:"hover-polygons",source:gn,filter:mi,...Ei(tr,.5)}),u.addLayer({id:"hover-lines",source:gn,filter:_r,...bi(tr,1.5*tf,1)}),u.addLayer({id:"hover-points",source:gn,filter:vi,..._i(tr,1.5*nf,.5)}),a.subscribe(c=>{c&&Bn.set(null)}),Bn.subscribe(c=>{c&&!o?u.getSource(gn).setData(i.features.find(f=>f.id==c)):u.getSource(gn).setData(bn())})}),[a]}class of extends Ae{constructor(e){super(),Fe(this,e,rf,null,Ne,{})}}let On="editing",nr="red",lf=10,af=7;function sf(n,e,t){let i;xt(n,Me,l=>t(0,i=l));const{getMap:o}=ln("map");return an(()=>{const l=o();l.addSource(On,{type:"geojson",data:bn()}),l.addLayer({id:"editing-polygons",source:On,filter:mi,...Ei(nr,.5)}),l.addLayer({id:"editing-lines",source:On,filter:_r,...bi(nr,1.5*lf)}),l.addLayer({id:"editing-points",source:On,filter:vi,..._i(nr,1.5*af)}),Me.subscribe(a=>{l.getSource(On).setData(a.features.find(u=>u.properties.editing)||bn())}),yr.subscribe(a=>{if(a){let u=i.features.find(c=>c.id==a);u.geometry.type=="Point"?l.flyTo({center:u.geometry.coordinates}):l.fitBounds(dl(u),{padding:200,animate:!0,duration:500})}})}),[]}class uf extends Ae{constructor(e){super(),Fe(this,e,sf,null,Ne,{})}}function ff(n){let e,t,i,o,l,a,u,c;return{c(){e=q("div"),t=q("button"),t.textContent="Home",i=K(),o=q("button"),o.textContent="About",l=K(),a=q("button"),a.textContent="Instructions",X(t,"type","button"),X(t,"onclick","window.open('index.html');"),X(o,"type","button"),X(a,"type","button"),X(e,"slot","nav")},m(f,h){T(f,e,h),B(e,t),B(e,i),B(e,o),B(e,l),B(e,a),u||(c=[ne(o,"click",n[4]),ne(a,"click",n[5])],u=!0)},p:He,d(f){f&&O(e),u=!1,dt(c)}}}function cf(n){let e,t,i,o,l,a,u,c,f;return o=new ef({props:{authorityName:n[2]}}),c=new Ku({}),{c(){e=q("div"),t=q("h1"),t.textContent=`${n[2]}`,i=K(),pe(o.$$.fragment),l=K(),a=q("br"),u=K(),pe(c.$$.fragment),X(e,"slot","sidebar")},m(h,m){T(h,e,m),B(e,t),B(e,i),ge(o,e,null),B(e,l),B(e,a),B(e,u),ge(c,e,null),f=!0},p:He,i(h){f||(J(o.$$.fragment,h),J(c.$$.fragment,h),f=!0)},o(h){H(o.$$.fragment,h),H(c.$$.fragment,h),f=!1},d(h){h&&O(e),me(o),me(c)}}}function df(n){let e,t,i,o,l,a,u,c;return e=new Eu({props:{authorityName:n[2]}}),i=new ju({props:{url:n[3]}}),l=new of({}),u=new uf({}),{c(){pe(e.$$.fragment),t=K(),pe(i.$$.fragment),o=K(),pe(l.$$.fragment),a=K(),pe(u.$$.fragment)},m(f,h){ge(e,f,h),T(f,t,h),ge(i,f,h),T(f,o,h),ge(l,f,h),T(f,a,h),ge(u,f,h),c=!0},p:He,i(f){c||(J(e.$$.fragment,f),J(i.$$.fragment,f),J(l.$$.fragment,f),J(u.$$.fragment,f),c=!0)},o(f){H(e.$$.fragment,f),H(i.$$.fragment,f),H(l.$$.fragment,f),H(u.$$.fragment,f),c=!1},d(f){me(e,f),f&&O(t),me(i,f),f&&O(o),me(l,f),f&&O(a),me(u,f)}}}function hf(n){let e,t,i;return t=new Gs({props:{$$slots:{default:[df]},$$scope:{ctx:n}}}),{c(){e=q("div"),pe(t.$$.fragment),X(e,"slot","main")},m(o,l){T(o,e,l),ge(t,e,null),i=!0},p(o,l){const a={};l&512&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){i||(J(t.$$.fragment,o),i=!0)},o(o){H(t.$$.fragment,o),i=!1},d(o){o&&O(e),me(t)}}}function pf(n){let e,t,i,o,l,a,u,c;e=new Hs({props:{$$slots:{main:[hf],sidebar:[cf],nav:[ff]},$$scope:{ctx:n}}});function f(p){n[6](p)}let h={};n[0]!==void 0&&(h.open=n[0]),i=new ya({props:h}),Qe.push(()=>Ct(i,"open",f,n[0]));function m(p){n[7](p)}let b={};return n[1]!==void 0&&(b.open=n[1]),a=new zs({props:b}),Qe.push(()=>Ct(a,"open",m,n[1])),{c(){pe(e.$$.fragment),t=K(),pe(i.$$.fragment),l=K(),pe(a.$$.fragment)},m(p,v){ge(e,p,v),T(p,t,v),ge(i,p,v),T(p,l,v),ge(a,p,v),c=!0},p(p,[v]){const M={};v&512&&(M.$$scope={dirty:v,ctx:p}),e.$set(M);const P={};!o&&v&1&&(o=!0,P.open=p[0],Mt(()=>o=!1)),i.$set(P);const U={};!u&&v&2&&(u=!0,U.open=p[1],Mt(()=>u=!1)),a.$set(U)},i(p){c||(J(e.$$.fragment,p),J(i.$$.fragment,p),J(a.$$.fragment,p),c=!0)},o(p){H(e.$$.fragment,p),H(i.$$.fragment,p),H(a.$$.fragment,p),c=!1},d(p){me(e,p),p&&O(t),me(i,p),p&&O(l),me(a,p)}}}function gf(n,e,t){let i=!1,o=!1,a=new URLSearchParams(window.location.search).get("authority"),u=`https://atip.uk/route-snappers/${a}.bin`;function c(){t(0,i=!i),t(1,o=!1)}function f(){t(1,o=!o),t(0,i=!1)}function h(b){i=b,t(0,i)}function m(b){o=b,t(1,o)}return[i,o,a,u,c,f,h,m]}class mf extends Ae{constructor(e){super(),Fe(this,e,gf,pf,Ne,{})}}new mf({target:document.getElementById("app")});
