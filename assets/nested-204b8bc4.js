var El=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var Sn=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var mt=(n,e,t)=>(El(n,e,"access private method"),t);import{S as Me,i as Pe,s as Ne,v as ce,w as nt,f as K,x as zt,g as L,h as B,y as rt,z as He,n as M,B as Te,C as Xe,D as ve,E as Re,F as sr,G as ie,e as V,H as Ve,I as T,l as $,r as ft,J as ua,K as Zi,c as Z,t as G,L as et,k as H,M as tt,N as Sl,d as de,m as he,o as pe,O as wl,P as ur,Q as dn,R as at,T as lt,U as st,V as ut,W as Tl,X as Kt,Y as Qt,Z as Ci,_ as St,b as Ke,$ as fa,a0 as io,a1 as kl,a2 as fn,a3 as Cl,a as wt,j as Tt,a4 as fi,a5 as ca,a6 as Yi,a7 as ro,u as da,p as Il,a8 as wn,a9 as Ol,aa as ha,ab as oo,A as xl}from"./authorities-f2f16330.js";function ao(n){let e,t;return{c(){e=nt("title"),t=ve(n[1])},m(i,o){L(i,e,o),B(e,t)},p(i,o){o&2&&Re(t,i[1])},d(i){i&&M(e)}}}function Ll(n){let e,t,i=n[1]&&ao(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],a={};for(let l=0;l<o.length;l+=1)a=ce(a,o[l]);return{c(){e=nt("svg"),i&&i.c(),t=nt("path"),K(t,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),zt(e,a)},m(l,u){L(l,e,u),i&&i.m(e,null),B(e,t)},p(l,[u]){l[1]?i?i.p(l,u):(i=ao(l),i.c(),i.m(e,t)):i&&(i.d(1),i=null),zt(e,a=rt(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:l[0]},u&1&&{height:l[0]},u&4&&l[2],u&8&&l[3]]))},i:He,o:He,d(l){l&&M(e),i&&i.d()}}}function Ml(n,e,t){let i,o;const a=["size","title"];let l=Te(e,a),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=ce(ce({},e),Xe(f))),t(3,l=Te(e,a)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[u,c,o,l,i]}class Pl extends Me{constructor(e){super(),Pe(this,e,Ml,Ll,Ne,{size:0,title:1})}}const fr=Pl;function lo(n,e,t){const i=n.slice();return i[2]=e[t].width,i}function Nl(n){let e,t,i,o,a=[n[4],{style:t="width: "+n[2]+";"+n[4].style}],l={};for(let u=0;u<a.length;u+=1)l=ce(l,a[u]);return{c(){e=V("p"),Ve(e,l),T(e,"bx--skeleton__text",!0),T(e,"bx--skeleton__heading",n[0])},m(u,c){L(u,e,c),i||(o=[$(e,"click",n[12]),$(e,"mouseover",n[13]),$(e,"mouseenter",n[14]),$(e,"mouseleave",n[15])],i=!0)},p(u,c){Ve(e,l=rt(a,[c&16&&u[4],c&20&&t!==(t="width: "+u[2]+";"+u[4].style)&&{style:t}])),T(e,"bx--skeleton__text",!0),T(e,"bx--skeleton__heading",u[0])},d(u){u&&M(e),i=!1,ft(o)}}}function Al(n){let e,t,i,o=n[3],a=[];for(let c=0;c<o.length;c+=1)a[c]=so(lo(n,o,c));let l=[n[4]],u={};for(let c=0;c<l.length;c+=1)u=ce(u,l[c]);return{c(){e=V("div");for(let c=0;c<a.length;c+=1)a[c].c();Ve(e,u)},m(c,f){L(c,e,f);for(let h=0;h<a.length;h+=1)a[h].m(e,null);t||(i=[$(e,"click",n[8]),$(e,"mouseover",n[9]),$(e,"mouseenter",n[10]),$(e,"mouseleave",n[11])],t=!0)},p(c,f){if(f&9){o=c[3];let h;for(h=0;h<o.length;h+=1){const y=lo(c,o,h);a[h]?a[h].p(y,f):(a[h]=so(y),a[h].c(),a[h].m(e,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=o.length}Ve(e,u=rt(l,[f&16&&c[4]]))},d(c){c&&M(e),ua(a,c),t=!1,ft(i)}}}function so(n){let e;return{c(){e=V("p"),Zi(e,"width",n[2]),T(e,"bx--skeleton__text",!0),T(e,"bx--skeleton__heading",n[0])},m(t,i){L(t,e,i)},p(t,i){i&8&&Zi(e,"width",t[2]),i&1&&T(e,"bx--skeleton__heading",t[0])},d(t){t&&M(e)}}}function Rl(n){let e;function t(a,l){return a[1]?Al:Nl}let i=t(n),o=i(n);return{c(){o.c(),e=sr()},m(a,l){o.m(a,l),L(a,e,l)},p(a,[l]){i===(i=t(a))&&o?o.p(a,l):(o.d(1),o=i(a),o&&(o.c(),o.m(e.parentNode,e)))},i:He,o:He,d(a){o.d(a),a&&M(e)}}}function Fl(n,e,t){let i,o,a;const l=["lines","heading","paragraph","width"];let u=Te(e,l),{lines:c=3}=e,{heading:f=!1}=e,{paragraph:h=!1}=e,{width:y="100%"}=e;const b=[.973,.153,.567];function p(N){ie.call(this,n,N)}function m(N){ie.call(this,n,N)}function w(N){ie.call(this,n,N)}function x(N){ie.call(this,n,N)}function j(N){ie.call(this,n,N)}function I(N){ie.call(this,n,N)}function C(N){ie.call(this,n,N)}function A(N){ie.call(this,n,N)}return n.$$set=N=>{e=ce(ce({},e),Xe(N)),t(4,u=Te(e,l)),"lines"in N&&t(5,c=N.lines),"heading"in N&&t(0,f=N.heading),"paragraph"in N&&t(1,h=N.paragraph),"width"in N&&t(2,y=N.width)},n.$$.update=()=>{if(n.$$.dirty&4&&t(7,o=parseInt(y,10)),n.$$.dirty&4&&t(6,a=y.includes("px")),n.$$.dirty&238&&h)for(let N=0;N<c;N++){const F=a?o-75:0,ge=a?o:75,z=Math.floor(b[N%3]*(ge-F+1))+F+"px";t(3,i=[...i,{width:a?z:`calc(${y} - ${z})`}])}},t(3,i=[]),[f,h,y,i,u,c,a,o,p,m,w,x,j,I,C,A]}class Dl extends Me{constructor(e){super(),Pe(this,e,Fl,Rl,Ne,{lines:5,heading:0,paragraph:1,width:2})}}const Cn=Dl;function uo(n,e,t){const i=n.slice();return i[9]=e[t],i}function fo(n){let e,t,i,o,a,l,u,c,f,h,y,b,p;return i=new fr({props:{class:"bx--accordion__arrow"}}),a=new Cn({props:{class:"bx--accordion__title"}}),c=new Cn({props:{width:"90%"}}),h=new Cn({props:{width:"80%"}}),b=new Cn({props:{width:"95%"}}),{c(){e=V("li"),t=V("span"),de(i.$$.fragment),o=Z(),de(a.$$.fragment),l=Z(),u=V("div"),de(c.$$.fragment),f=Z(),de(h.$$.fragment),y=Z(),de(b.$$.fragment),T(t,"bx--accordion__heading",!0),T(u,"bx--accordion__content",!0),T(e,"bx--accordion__item",!0),T(e,"bx--accordion__item--active",!0)},m(m,w){L(m,e,w),B(e,t),he(i,t,null),B(t,o),he(a,t,null),B(e,l),B(e,u),he(c,u,null),B(u,f),he(h,u,null),B(u,y),he(b,u,null),p=!0},i(m){p||(G(i.$$.fragment,m),G(a.$$.fragment,m),G(c.$$.fragment,m),G(h.$$.fragment,m),G(b.$$.fragment,m),p=!0)},o(m){H(i.$$.fragment,m),H(a.$$.fragment,m),H(c.$$.fragment,m),H(h.$$.fragment,m),H(b.$$.fragment,m),p=!1},d(m){m&&M(e),pe(i),pe(a),pe(c),pe(h),pe(b)}}}function co(n,e){let t,i,o,a,l,u,c;return o=new fr({props:{class:"bx--accordion__arrow"}}),l=new Cn({props:{class:"bx--accordion__title"}}),{key:n,first:null,c(){t=V("li"),i=V("span"),de(o.$$.fragment),a=Z(),de(l.$$.fragment),u=Z(),T(i,"bx--accordion__heading",!0),T(t,"bx--accordion__item",!0),this.first=t},m(f,h){L(f,t,h),B(t,i),he(o,i,null),B(i,a),he(l,i,null),B(t,u),c=!0},p(f,h){},i(f){c||(G(o.$$.fragment,f),G(l.$$.fragment,f),c=!0)},o(f){H(o.$$.fragment,f),H(l.$$.fragment,f),c=!1},d(f){f&&M(t),pe(o),pe(l)}}}function Ul(n){let e,t,i=[],o=new Map,a,l,u,c=n[3]&&fo(),f=Array.from({length:n[3]?n[0]-1:n[0]},ho);const h=p=>p[9];for(let p=0;p<f.length;p+=1){let m=uo(n,f,p),w=h(m);o.set(w,i[p]=co(w))}let y=[n[4]],b={};for(let p=0;p<y.length;p+=1)b=ce(b,y[p]);return{c(){e=V("ul"),c&&c.c(),t=Z();for(let p=0;p<i.length;p+=1)i[p].c();Ve(e,b),T(e,"bx--skeleton",!0),T(e,"bx--accordion",!0),T(e,"bx--accordion--start",n[1]==="start"),T(e,"bx--accordion--end",n[1]==="end"),T(e,"bx--accordion--sm",n[2]==="sm"),T(e,"bx--accordion--xl",n[2]==="xl")},m(p,m){L(p,e,m),c&&c.m(e,null),B(e,t);for(let w=0;w<i.length;w+=1)i[w].m(e,null);a=!0,l||(u=[$(e,"click",n[5]),$(e,"mouseover",n[6]),$(e,"mouseenter",n[7]),$(e,"mouseleave",n[8])],l=!0)},p(p,[m]){p[3]?c?m&8&&G(c,1):(c=fo(),c.c(),G(c,1),c.m(e,t)):c&&(et(),H(c,1,1,()=>{c=null}),tt()),m&9&&(f=Array.from({length:p[3]?p[0]-1:p[0]},ho),et(),i=Sl(i,m,h,1,p,f,o,e,wl,co,null,uo),tt()),Ve(e,b=rt(y,[m&16&&p[4]])),T(e,"bx--skeleton",!0),T(e,"bx--accordion",!0),T(e,"bx--accordion--start",p[1]==="start"),T(e,"bx--accordion--end",p[1]==="end"),T(e,"bx--accordion--sm",p[2]==="sm"),T(e,"bx--accordion--xl",p[2]==="xl")},i(p){if(!a){G(c);for(let m=0;m<f.length;m+=1)G(i[m]);a=!0}},o(p){H(c);for(let m=0;m<i.length;m+=1)H(i[m]);a=!1},d(p){p&&M(e),c&&c.d();for(let m=0;m<i.length;m+=1)i[m].d();l=!1,ft(u)}}}const ho=(n,e)=>e;function jl(n,e,t){const i=["count","align","size","open"];let o=Te(e,i),{count:a=4}=e,{align:l="end"}=e,{size:u=void 0}=e,{open:c=!0}=e;function f(p){ie.call(this,n,p)}function h(p){ie.call(this,n,p)}function y(p){ie.call(this,n,p)}function b(p){ie.call(this,n,p)}return n.$$set=p=>{e=ce(ce({},e),Xe(p)),t(4,o=Te(e,i)),"count"in p&&t(0,a=p.count),"align"in p&&t(1,l=p.align),"size"in p&&t(2,u=p.size),"open"in p&&t(3,c=p.open)},[a,l,u,c,o,f,h,y,b]}class Bl extends Me{constructor(e){super(),Pe(this,e,jl,Ul,Ne,{count:0,align:1,size:2,open:3})}}const zl=Bl;function Gl(n){let e,t,i,o;const a=n[6].default,l=at(a,n,n[5],null);let u=[n[3]],c={};for(let f=0;f<u.length;f+=1)c=ce(c,u[f]);return{c(){e=V("ul"),l&&l.c(),Ve(e,c),T(e,"bx--accordion",!0),T(e,"bx--accordion--start",n[0]==="start"),T(e,"bx--accordion--end",n[0]==="end"),T(e,"bx--accordion--sm",n[1]==="sm"),T(e,"bx--accordion--xl",n[1]==="xl")},m(f,h){L(f,e,h),l&&l.m(e,null),t=!0,i||(o=[$(e,"click",n[7]),$(e,"mouseover",n[8]),$(e,"mouseenter",n[9]),$(e,"mouseleave",n[10])],i=!0)},p(f,h){l&&l.p&&(!t||h&32)&&lt(l,a,f,f[5],t?ut(a,f[5],h,null):st(f[5]),null),Ve(e,c=rt(u,[h&8&&f[3]])),T(e,"bx--accordion",!0),T(e,"bx--accordion--start",f[0]==="start"),T(e,"bx--accordion--end",f[0]==="end"),T(e,"bx--accordion--sm",f[1]==="sm"),T(e,"bx--accordion--xl",f[1]==="xl")},i(f){t||(G(l,f),t=!0)},o(f){H(l,f),t=!1},d(f){f&&M(e),l&&l.d(f),i=!1,ft(o)}}}function Vl(n){let e,t;const i=[n[3],{align:n[0]},{size:n[1]}];let o={};for(let a=0;a<i.length;a+=1)o=ce(o,i[a]);return e=new zl({props:o}),e.$on("click",n[11]),e.$on("mouseover",n[12]),e.$on("mouseenter",n[13]),e.$on("mouseleave",n[14]),{c(){de(e.$$.fragment)},m(a,l){he(e,a,l),t=!0},p(a,l){const u=l&11?rt(i,[l&8&&Tl(a[3]),l&1&&{align:a[0]},l&2&&{size:a[1]}]):{};e.$set(u)},i(a){t||(G(e.$$.fragment,a),t=!0)},o(a){H(e.$$.fragment,a),t=!1},d(a){pe(e,a)}}}function Jl(n){let e,t,i,o;const a=[Vl,Gl],l=[];function u(c,f){return c[2]?0:1}return e=u(n),t=l[e]=a[e](n),{c(){t.c(),i=sr()},m(c,f){l[e].m(c,f),L(c,i,f),o=!0},p(c,[f]){let h=e;e=u(c),e===h?l[e].p(c,f):(et(),H(l[h],1,1,()=>{l[h]=null}),tt(),t=l[e],t?t.p(c,f):(t=l[e]=a[e](c),t.c()),G(t,1),t.m(i.parentNode,i))},i(c){o||(G(t),o=!0)},o(c){H(t),o=!1},d(c){l[e].d(c),c&&M(i)}}}function ql(n,e,t){const i=["align","size","disabled","skeleton"];let o=Te(e,i),{$$slots:a={},$$scope:l}=e,{align:u="end"}=e,{size:c=void 0}=e,{disabled:f=!1}=e,{skeleton:h=!1}=e;const y=dn(f);ur("Accordion",{disableItems:y});function b(A){ie.call(this,n,A)}function p(A){ie.call(this,n,A)}function m(A){ie.call(this,n,A)}function w(A){ie.call(this,n,A)}function x(A){ie.call(this,n,A)}function j(A){ie.call(this,n,A)}function I(A){ie.call(this,n,A)}function C(A){ie.call(this,n,A)}return n.$$set=A=>{e=ce(ce({},e),Xe(A)),t(3,o=Te(e,i)),"align"in A&&t(0,u=A.align),"size"in A&&t(1,c=A.size),"disabled"in A&&t(4,f=A.disabled),"skeleton"in A&&t(2,h=A.skeleton),"$$scope"in A&&t(5,l=A.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&y.set(f)},[u,c,h,o,f,l,a,b,p,m,w,x,j,I,C]}class Yl extends Me{constructor(e){super(),Pe(this,e,ql,Jl,Ne,{align:0,size:1,disabled:4,skeleton:2})}}const Hl=Yl,Wl=n=>({}),po=n=>({});function Xl(n){let e;return{c(){e=ve(n[2])},m(t,i){L(t,e,i)},p(t,i){i&4&&Re(e,t[2])},d(t){t&&M(e)}}}function Zl(n){let e,t,i,o,a,l,u,c,f,h;i=new fr({props:{class:"bx--accordion__arrow","aria-label":n[3]}});const y=n[7].title,b=at(y,n,n[6],po),p=b||Xl(n),m=n[7].default,w=at(m,n,n[6],null);let x=[n[5]],j={};for(let I=0;I<x.length;I+=1)j=ce(j,x[I]);return{c(){e=V("li"),t=V("button"),de(i.$$.fragment),o=Z(),a=V("div"),p&&p.c(),l=Z(),u=V("div"),w&&w.c(),T(a,"bx--accordion__title",!0),K(t,"type","button"),K(t,"title",n[3]),K(t,"aria-expanded",n[0]),t.disabled=n[1],T(t,"bx--accordion__heading",!0),T(u,"bx--accordion__content",!0),Ve(e,j),T(e,"bx--accordion__item",!0),T(e,"bx--accordion__item--active",n[0]),T(e,"bx--accordion__item--disabled",n[1]),T(e,"bx--accordion__item--expanding",n[4]==="expanding"),T(e,"bx--accordion__item--collapsing",n[4]==="collapsing")},m(I,C){L(I,e,C),B(e,t),he(i,t,null),B(t,o),B(t,a),p&&p.m(a,null),B(e,l),B(e,u),w&&w.m(u,null),c=!0,f||(h=[$(t,"click",n[9]),$(t,"click",n[14]),$(t,"mouseover",n[10]),$(t,"mouseenter",n[11]),$(t,"mouseleave",n[12]),$(t,"keydown",n[13]),$(t,"keydown",n[15]),$(e,"animationend",n[8]),$(e,"animationend",n[16])],f=!0)},p(I,[C]){const A={};C&8&&(A["aria-label"]=I[3]),i.$set(A),b?b.p&&(!c||C&64)&&lt(b,y,I,I[6],c?ut(y,I[6],C,Wl):st(I[6]),po):p&&p.p&&(!c||C&4)&&p.p(I,c?C:-1),(!c||C&8)&&K(t,"title",I[3]),(!c||C&1)&&K(t,"aria-expanded",I[0]),(!c||C&2)&&(t.disabled=I[1]),w&&w.p&&(!c||C&64)&&lt(w,m,I,I[6],c?ut(m,I[6],C,null):st(I[6]),null),Ve(e,j=rt(x,[C&32&&I[5]])),T(e,"bx--accordion__item",!0),T(e,"bx--accordion__item--active",I[0]),T(e,"bx--accordion__item--disabled",I[1]),T(e,"bx--accordion__item--expanding",I[4]==="expanding"),T(e,"bx--accordion__item--collapsing",I[4]==="collapsing")},i(I){c||(G(i.$$.fragment,I),G(p,I),G(w,I),c=!0)},o(I){H(i.$$.fragment,I),H(p,I),H(w,I),c=!1},d(I){I&&M(e),pe(i),p&&p.d(I),w&&w.d(I),f=!1,ft(h)}}}function Kl(n,e,t){const i=["title","open","disabled","iconDescription"];let o=Te(e,i),{$$slots:a={},$$scope:l}=e,{title:u="title"}=e,{open:c=!1}=e,{disabled:f=!1}=e,{iconDescription:h="Expand/Collapse"}=e,y=f;const p=Kt("Accordion").disableItems.subscribe(z=>{!z&&y||t(1,f=z)});let m;Qt(()=>()=>{p()});function w(z){ie.call(this,n,z)}function x(z){ie.call(this,n,z)}function j(z){ie.call(this,n,z)}function I(z){ie.call(this,n,z)}function C(z){ie.call(this,n,z)}function A(z){ie.call(this,n,z)}const N=()=>{t(0,c=!c),t(4,m=c?"expanding":"collapsing")},F=({key:z})=>{c&&z==="Escape"&&t(0,c=!1)},ge=()=>{t(4,m=void 0)};return n.$$set=z=>{e=ce(ce({},e),Xe(z)),t(5,o=Te(e,i)),"title"in z&&t(2,u=z.title),"open"in z&&t(0,c=z.open),"disabled"in z&&t(1,f=z.disabled),"iconDescription"in z&&t(3,h=z.iconDescription),"$$scope"in z&&t(6,l=z.$$scope)},[c,f,u,h,m,o,l,a,w,x,j,I,C,A,N,F,ge]}class Ql extends Me{constructor(e){super(),Pe(this,e,Kl,Zl,Ne,{title:2,open:0,disabled:1,iconDescription:3})}}const $l=Ql;function go(n){let e,t;return{c(){e=nt("title"),t=ve(n[1])},m(i,o){L(i,e,o),B(e,t)},p(i,o){o&2&&Re(t,i[1])},d(i){i&&M(e)}}}function es(n){let e,t,i,o=n[1]&&go(n),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let u=0;u<a.length;u+=1)l=ce(l,a[u]);return{c(){e=nt("svg"),o&&o.c(),t=nt("path"),i=nt("path"),K(t,"d","M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14C30,8.3,23.7,2,16,2z M14.9,8h2.2v11h-2.2V8z M16,25	c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22c0.8,0,1.5,0.7,1.5,1.5S16.8,25,16,25z"),K(i,"fill","none"),K(i,"d","M17.5,23.5c0,0.8-0.7,1.5-1.5,1.5c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22	C16.8,22,17.5,22.7,17.5,23.5z M17.1,8h-2.2v11h2.2V8z"),K(i,"data-icon-path","inner-path"),K(i,"opacity","0"),zt(e,l)},m(u,c){L(u,e,c),o&&o.m(e,null),B(e,t),B(e,i)},p(u,[c]){u[1]?o?o.p(u,c):(o=go(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null),zt(e,l=rt(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},c&1&&{width:u[0]},c&1&&{height:u[0]},c&4&&u[2],c&8&&u[3]]))},i:He,o:He,d(u){u&&M(e),o&&o.d()}}}function ts(n,e,t){let i,o;const a=["size","title"];let l=Te(e,a),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=ce(ce({},e),Xe(f))),t(3,l=Te(e,a)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[u,c,o,l,i]}class ns extends Me{constructor(e){super(),Pe(this,e,ts,es,Ne,{size:0,title:1})}}const pa=ns;function mo(n){let e,t;return{c(){e=nt("title"),t=ve(n[1])},m(i,o){L(i,e,o),B(e,t)},p(i,o){o&2&&Re(t,i[1])},d(i){i&&M(e)}}}function is(n){let e,t,i,o,a=n[1]&&mo(n),l=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],u={};for(let c=0;c<l.length;c+=1)u=ce(u,l[c]);return{c(){e=nt("svg"),a&&a.c(),t=nt("path"),i=nt("path"),o=nt("path"),K(t,"fill","none"),K(t,"d","M16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Zm-1.125-5h2.25V12h-2.25Z"),K(t,"data-icon-path","inner-path"),K(i,"d","M16.002,6.1714h-.004L4.6487,27.9966,4.6506,28H27.3494l.0019-.0034ZM14.875,12h2.25v9h-2.25ZM16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Z"),K(o,"d","M29,30H3a1,1,0,0,1-.8872-1.4614l13-25a1,1,0,0,1,1.7744,0l13,25A1,1,0,0,1,29,30ZM4.6507,28H27.3493l.002-.0033L16.002,6.1714h-.004L4.6487,27.9967Z"),zt(e,u)},m(c,f){L(c,e,f),a&&a.m(e,null),B(e,t),B(e,i),B(e,o)},p(c,[f]){c[1]?a?a.p(c,f):(a=mo(c),a.c(),a.m(e,t)):a&&(a.d(1),a=null),zt(e,u=rt(l,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},f&1&&{width:c[0]},f&1&&{height:c[0]},f&4&&c[2],f&8&&c[3]]))},i:He,o:He,d(c){c&&M(e),a&&a.d()}}}function rs(n,e,t){let i,o;const a=["size","title"];let l=Te(e,a),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=ce(ce({},e),Xe(f))),t(3,l=Te(e,a)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[u,c,o,l,i]}class os extends Me{constructor(e){super(),Pe(this,e,rs,is,Ne,{size:0,title:1})}}const as=os,ls=n=>({}),vo=n=>({});function bo(n){let e,t;const i=n[16].labelText,o=at(i,n,n[15],vo),a=o||ss(n);return{c(){e=V("span"),a&&a.c(),T(e,"bx--visually-hidden",n[7])},m(l,u){L(l,e,u),a&&a.m(e,null),t=!0},p(l,u){o?o.p&&(!t||u&32768)&&lt(o,i,l,l[15],t?ut(i,l[15],u,ls):st(l[15]),vo):a&&a.p&&(!t||u&64)&&a.p(l,t?u:-1),(!t||u&128)&&T(e,"bx--visually-hidden",l[7])},i(l){t||(G(a,l),t=!0)},o(l){H(a,l),t=!1},d(l){l&&M(e),a&&a.d(l)}}}function ss(n){let e;return{c(){e=ve(n[6])},m(t,i){L(t,e,i)},p(t,i){i&64&&Re(e,t[6])},d(t){t&&M(e)}}}function us(n){let e,t,i,o,a,l,u,c,f,h=(n[6]||n[13].labelText)&&bo(n),y=[n[12]],b={};for(let p=0;p<y.length;p+=1)b=ce(b,y[p]);return{c(){e=V("div"),t=V("input"),i=Z(),o=V("label"),a=V("span"),l=Z(),h&&h.c(),K(t,"type","radio"),K(t,"id",n[8]),K(t,"name",n[9]),t.checked=n[0],t.disabled=n[3],t.required=n[4],t.value=n[2],T(t,"bx--radio-button",!0),T(a,"bx--radio-button__appearance",!0),K(o,"for",n[8]),T(o,"bx--radio-button__label",!0),Ve(e,b),T(e,"bx--radio-button-wrapper",!0),T(e,"bx--radio-button-wrapper--label-left",n[5]==="left")},m(p,m){L(p,e,m),B(e,t),n[18](t),B(e,i),B(e,o),B(o,a),B(o,l),h&&h.m(o,null),u=!0,c||(f=[$(t,"change",n[17]),$(t,"change",n[19])],c=!0)},p(p,[m]){(!u||m&256)&&K(t,"id",p[8]),(!u||m&512)&&K(t,"name",p[9]),(!u||m&1)&&(t.checked=p[0]),(!u||m&8)&&(t.disabled=p[3]),(!u||m&16)&&(t.required=p[4]),(!u||m&4)&&(t.value=p[2]),p[6]||p[13].labelText?h?(h.p(p,m),m&8256&&G(h,1)):(h=bo(p),h.c(),G(h,1),h.m(o,null)):h&&(et(),H(h,1,1,()=>{h=null}),tt()),(!u||m&256)&&K(o,"for",p[8]),Ve(e,b=rt(y,[m&4096&&p[12]])),T(e,"bx--radio-button-wrapper",!0),T(e,"bx--radio-button-wrapper--label-left",p[5]==="left")},i(p){u||(G(h),u=!0)},o(p){H(h),u=!1},d(p){p&&M(e),n[18](null),h&&h.d(),c=!1,ft(f)}}}function fs(n,e,t){const i=["value","checked","disabled","required","labelPosition","labelText","hideLabel","id","name","ref"];let o=Te(e,i),a,{$$slots:l={},$$scope:u}=e;const c=Ci(l);let{value:f=""}=e,{checked:h=!1}=e,{disabled:y=!1}=e,{required:b=!1}=e,{labelPosition:p="right"}=e,{labelText:m=""}=e,{hideLabel:w=!1}=e,{id:x="ccs-"+Math.random().toString(36)}=e,{name:j=""}=e,{ref:I=null}=e;const C=Kt("RadioButtonGroup"),A=C?C.selectedValue:dn(h?f:void 0);St(n,A,z=>t(14,a=z)),C&&C.add({id:x,checked:h,disabled:y,value:f});function N(z){ie.call(this,n,z)}function F(z){Ke[z?"unshift":"push"](()=>{I=z,t(1,I)})}const ge=()=>{C&&C.update(f)};return n.$$set=z=>{e=ce(ce({},e),Xe(z)),t(12,o=Te(e,i)),"value"in z&&t(2,f=z.value),"checked"in z&&t(0,h=z.checked),"disabled"in z&&t(3,y=z.disabled),"required"in z&&t(4,b=z.required),"labelPosition"in z&&t(5,p=z.labelPosition),"labelText"in z&&t(6,m=z.labelText),"hideLabel"in z&&t(7,w=z.hideLabel),"id"in z&&t(8,x=z.id),"name"in z&&t(9,j=z.name),"ref"in z&&t(1,I=z.ref),"$$scope"in z&&t(15,u=z.$$scope)},n.$$.update=()=>{n.$$.dirty&16388&&t(0,h=a===f)},[h,I,f,y,b,p,m,w,x,j,C,A,o,c,a,u,l,N,F,ge]}class cs extends Me{constructor(e){super(),Pe(this,e,fs,us,Ne,{value:2,checked:0,disabled:3,required:4,labelPosition:5,labelText:6,hideLabel:7,id:8,name:9,ref:1})}}const ci=cs;function _o(n){let e,t;return{c(){e=nt("title"),t=ve(n[1])},m(i,o){L(i,e,o),B(e,t)},p(i,o){o&2&&Re(t,i[1])},d(i){i&&M(e)}}}function ds(n){let e,t,i=n[1]&&_o(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],a={};for(let l=0;l<o.length;l+=1)a=ce(a,o[l]);return{c(){e=nt("svg"),i&&i.c(),t=nt("path"),K(t,"d","M30 28.6L3.4 2 2 3.4l10.1 10.1L4 21.6V28h6.4l8.1-8.1L28.6 30 30 28.6zM9.6 26H6v-3.6l7.5-7.5 3.6 3.6L9.6 26zM29.4 6.2L29.4 6.2l-3.6-3.6c-.8-.8-2-.8-2.8 0l0 0 0 0-8 8 1.4 1.4L20 8.4l3.6 3.6L20 15.6l1.4 1.4 8-8C30.2 8.2 30.2 7 29.4 6.2L29.4 6.2zM25 10.6L21.4 7l3-3L28 7.6 25 10.6z"),zt(e,a)},m(l,u){L(l,e,u),i&&i.m(e,null),B(e,t)},p(l,[u]){l[1]?i?i.p(l,u):(i=_o(l),i.c(),i.m(e,t)):i&&(i.d(1),i=null),zt(e,a=rt(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:l[0]},u&1&&{height:l[0]},u&4&&l[2],u&8&&l[3]]))},i:He,o:He,d(l){l&&M(e),i&&i.d()}}}function hs(n,e,t){let i,o;const a=["size","title"];let l=Te(e,a),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=ce(ce({},e),Xe(f))),t(3,l=Te(e,a)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[u,c,o,l,i]}class ps extends Me{constructor(e){super(),Pe(this,e,hs,ds,Ne,{size:0,title:1})}}const gs=ps;function ms(n){let e,t,i,o;const a=n[5].default,l=at(a,n,n[4],null);let u=[n[3]],c={};for(let f=0;f<u.length;f+=1)c=ce(c,u[f]);return{c(){e=V("ol"),l&&l.c(),Ve(e,c),T(e,"bx--list--ordered",!n[1]),T(e,"bx--list--ordered--native",n[1]),T(e,"bx--list--nested",n[0]),T(e,"bx--list--expressive",n[2])},m(f,h){L(f,e,h),l&&l.m(e,null),t=!0,i||(o=[$(e,"click",n[6]),$(e,"mouseover",n[7]),$(e,"mouseenter",n[8]),$(e,"mouseleave",n[9])],i=!0)},p(f,[h]){l&&l.p&&(!t||h&16)&&lt(l,a,f,f[4],t?ut(a,f[4],h,null):st(f[4]),null),Ve(e,c=rt(u,[h&8&&f[3]])),T(e,"bx--list--ordered",!f[1]),T(e,"bx--list--ordered--native",f[1]),T(e,"bx--list--nested",f[0]),T(e,"bx--list--expressive",f[2])},i(f){t||(G(l,f),t=!0)},o(f){H(l,f),t=!1},d(f){f&&M(e),l&&l.d(f),i=!1,ft(o)}}}function vs(n,e,t){const i=["nested","native","expressive"];let o=Te(e,i),{$$slots:a={},$$scope:l}=e,{nested:u=!1}=e,{native:c=!1}=e,{expressive:f=!1}=e;function h(m){ie.call(this,n,m)}function y(m){ie.call(this,n,m)}function b(m){ie.call(this,n,m)}function p(m){ie.call(this,n,m)}return n.$$set=m=>{e=ce(ce({},e),Xe(m)),t(3,o=Te(e,i)),"nested"in m&&t(0,u=m.nested),"native"in m&&t(1,c=m.native),"expressive"in m&&t(2,f=m.expressive),"$$scope"in m&&t(4,l=m.$$scope)},[u,c,f,o,l,a,h,y,b,p]}class bs extends Me{constructor(e){super(),Pe(this,e,vs,ms,Ne,{nested:0,native:1,expressive:2})}}const _s=bs,ys=n=>({}),yo=n=>({});function Eo(n){let e,t;const i=n[11].legendText,o=at(i,n,n[10],yo),a=o||Es(n);return{c(){e=V("legend"),a&&a.c(),T(e,"bx--label",!0),T(e,"bx--visually-hidden",n[2])},m(l,u){L(l,e,u),a&&a.m(e,null),t=!0},p(l,u){o?o.p&&(!t||u&1024)&&lt(o,i,l,l[10],t?ut(i,l[10],u,ys):st(l[10]),yo):a&&a.p&&(!t||u&2)&&a.p(l,t?u:-1),(!t||u&4)&&T(e,"bx--visually-hidden",l[2])},i(l){t||(G(a,l),t=!0)},o(l){H(a,l),t=!1},d(l){l&&M(e),a&&a.d(l)}}}function Es(n){let e;return{c(){e=ve(n[1])},m(t,i){L(t,e,i)},p(t,i){i&2&&Re(e,t[1])},d(t){t&&M(e)}}}function Ss(n){let e,t,i,o,a,l,u=(n[1]||n[8].legendText)&&Eo(n);const c=n[11].default,f=at(c,n,n[10],null);let h=[{id:n[5]},n[7]],y={};for(let b=0;b<h.length;b+=1)y=ce(y,h[b]);return{c(){e=V("div"),t=V("fieldset"),u&&u.c(),i=Z(),f&&f.c(),t.disabled=n[0],T(t,"bx--radio-button-group",!0),T(t,"bx--radio-button-group--vertical",n[4]==="vertical"),T(t,"bx--radio-button-group--label-left",n[3]==="left"),T(t,"bx--radio-button-group--label-right",n[3]==="right"),Ve(e,y),T(e,"bx--form-item",!0)},m(b,p){L(b,e,p),B(e,t),u&&u.m(t,null),B(t,i),f&&f.m(t,null),o=!0,a||(l=[$(e,"click",n[12]),$(e,"mouseover",n[13]),$(e,"mouseenter",n[14]),$(e,"mouseleave",n[15])],a=!0)},p(b,[p]){b[1]||b[8].legendText?u?(u.p(b,p),p&258&&G(u,1)):(u=Eo(b),u.c(),G(u,1),u.m(t,i)):u&&(et(),H(u,1,1,()=>{u=null}),tt()),f&&f.p&&(!o||p&1024)&&lt(f,c,b,b[10],o?ut(c,b[10],p,null):st(b[10]),null),(!o||p&1)&&(t.disabled=b[0]),(!o||p&16)&&T(t,"bx--radio-button-group--vertical",b[4]==="vertical"),(!o||p&8)&&T(t,"bx--radio-button-group--label-left",b[3]==="left"),(!o||p&8)&&T(t,"bx--radio-button-group--label-right",b[3]==="right"),Ve(e,y=rt(h,[(!o||p&32)&&{id:b[5]},p&128&&b[7]])),T(e,"bx--form-item",!0)},i(b){o||(G(u),G(f,b),o=!0)},o(b){H(u),H(f,b),o=!1},d(b){b&&M(e),u&&u.d(),f&&f.d(b),a=!1,ft(l)}}}function ws(n,e,t){const i=["selected","disabled","legendText","hideLegend","labelPosition","orientation","id"];let o=Te(e,i),a,{$$slots:l={},$$scope:u}=e;const c=Ci(l);let{selected:f=void 0}=e,{disabled:h=!1}=e,{legendText:y=""}=e,{hideLegend:b=!1}=e,{labelPosition:p="right"}=e,{orientation:m="horizontal"}=e,{id:w=void 0}=e;const x=fa(),j=dn(f);St(n,j,F=>t(16,a=F)),ur("RadioButtonGroup",{selectedValue:j,add:({checked:F,value:ge})=>{F&&j.set(ge)},update:F=>{t(9,f=F)}}),Qt(()=>{io(j,a=f,a)}),kl(()=>{io(j,a=f,a)}),j.subscribe(F=>{t(9,f=F),x("change",F)});function I(F){ie.call(this,n,F)}function C(F){ie.call(this,n,F)}function A(F){ie.call(this,n,F)}function N(F){ie.call(this,n,F)}return n.$$set=F=>{e=ce(ce({},e),Xe(F)),t(7,o=Te(e,i)),"selected"in F&&t(9,f=F.selected),"disabled"in F&&t(0,h=F.disabled),"legendText"in F&&t(1,y=F.legendText),"hideLegend"in F&&t(2,b=F.hideLegend),"labelPosition"in F&&t(3,p=F.labelPosition),"orientation"in F&&t(4,m=F.orientation),"id"in F&&t(5,w=F.id),"$$scope"in F&&t(10,u=F.$$scope)},[h,y,b,p,m,w,j,o,c,f,u,l,I,C,A,N]}class Ts extends Me{constructor(e){super(),Pe(this,e,ws,Ss,Ne,{selected:9,disabled:0,legendText:1,hideLegend:2,labelPosition:3,orientation:4,id:5})}}const ks=Ts,Cs=n=>({}),So=n=>({});function wo(n){let e,t,i,o;const a=n[20].labelText,l=at(a,n,n[19],So),u=l||Is(n);let c=n[5]&&To(n);return{c(){e=V("div"),t=V("label"),u&&u.c(),i=Z(),c&&c.c(),K(t,"for",n[14]),T(t,"bx--label",!0),T(t,"bx--visually-hidden",n[11]),T(t,"bx--label--disabled",n[7]),T(e,"bx--text-area__label-wrapper",!0)},m(f,h){L(f,e,h),B(e,t),u&&u.m(t,null),B(e,i),c&&c.m(e,null),o=!0},p(f,h){l?l.p&&(!o||h[0]&524288)&&lt(l,a,f,f[19],o?ut(a,f[19],h,Cs):st(f[19]),So):u&&u.p&&(!o||h[0]&1024)&&u.p(f,o?h:[-1,-1]),(!o||h[0]&16384)&&K(t,"for",f[14]),(!o||h[0]&2048)&&T(t,"bx--visually-hidden",f[11]),(!o||h[0]&128)&&T(t,"bx--label--disabled",f[7]),f[5]?c?c.p(f,h):(c=To(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(f){o||(G(u,f),o=!0)},o(f){H(u,f),o=!1},d(f){f&&M(e),u&&u.d(f),c&&c.d()}}}function Is(n){let e;return{c(){e=ve(n[10])},m(t,i){L(t,e,i)},p(t,i){i[0]&1024&&Re(e,t[10])},d(t){t&&M(e)}}}function To(n){let e,t=n[0].length+"",i,o,a;return{c(){e=V("div"),i=ve(t),o=ve("/"),a=ve(n[5]),T(e,"bx--label",!0),T(e,"bx--label--disabled",n[7])},m(l,u){L(l,e,u),B(e,i),B(e,o),B(e,a)},p(l,u){u[0]&1&&t!==(t=l[0].length+"")&&Re(i,t),u[0]&32&&Re(a,l[5]),u[0]&128&&T(e,"bx--label--disabled",l[7])},d(l){l&&M(e)}}}function ko(n){let e,t;return e=new pa({props:{class:"bx--text-area__invalid-icon"}}),{c(){de(e.$$.fragment)},m(i,o){he(e,i,o),t=!0},i(i){t||(G(e.$$.fragment,i),t=!0)},o(i){H(e.$$.fragment,i),t=!1},d(i){pe(e,i)}}}function Co(n){let e,t;return{c(){e=V("div"),t=ve(n[9]),T(e,"bx--form__helper-text",!0),T(e,"bx--form__helper-text--disabled",n[7])},m(i,o){L(i,e,o),B(e,t)},p(i,o){o[0]&512&&Re(t,i[9]),o[0]&128&&T(e,"bx--form__helper-text--disabled",i[7])},d(i){i&&M(e)}}}function Io(n){let e,t;return{c(){e=V("div"),t=ve(n[13]),K(e,"id",n[16]),T(e,"bx--form-requirement",!0)},m(i,o){L(i,e,o),B(e,t)},p(i,o){o[0]&8192&&Re(t,i[13]),o[0]&65536&&K(e,"id",i[16])},d(i){i&&M(e)}}}function Os(n){let e,t,i,o,a,l,u,c,f,h,y,b,p,m,w=(n[10]||n[17].labelText)&&!n[11]&&wo(n),x=n[12]&&ko(),j=[{"aria-invalid":l=n[12]||void 0},{"aria-describedby":u=n[12]?n[16]:void 0},{disabled:n[7]},{id:n[14]},{name:n[15]},{cols:n[3]},{rows:n[4]},{placeholder:n[2]},{readOnly:n[8]},{maxlength:c=n[5]??void 0},n[18]],I={};for(let N=0;N<j.length;N+=1)I=ce(I,j[N]);let C=!n[12]&&n[9]&&Co(n),A=n[12]&&Io(n);return{c(){e=V("div"),w&&w.c(),t=Z(),i=V("div"),x&&x.c(),o=Z(),a=V("textarea"),h=Z(),C&&C.c(),y=Z(),A&&A.c(),Ve(a,I),T(a,"bx--text-area",!0),T(a,"bx--text-area--light",n[6]),T(a,"bx--text-area--invalid",n[12]),K(i,"data-invalid",f=n[12]||void 0),T(i,"bx--text-area__wrapper",!0),T(e,"bx--form-item",!0)},m(N,F){L(N,e,F),w&&w.m(e,null),B(e,t),B(e,i),x&&x.m(i,null),B(i,o),B(i,a),a.autofocus&&a.focus(),n[32](a),fn(a,n[0]),B(e,h),C&&C.m(e,null),B(e,y),A&&A.m(e,null),b=!0,p||(m=[$(a,"input",n[33]),$(a,"change",n[25]),$(a,"input",n[26]),$(a,"keydown",n[27]),$(a,"keyup",n[28]),$(a,"focus",n[29]),$(a,"blur",n[30]),$(a,"paste",n[31]),$(e,"click",n[21]),$(e,"mouseover",n[22]),$(e,"mouseenter",n[23]),$(e,"mouseleave",n[24])],p=!0)},p(N,F){(N[10]||N[17].labelText)&&!N[11]?w?(w.p(N,F),F[0]&134144&&G(w,1)):(w=wo(N),w.c(),G(w,1),w.m(e,t)):w&&(et(),H(w,1,1,()=>{w=null}),tt()),N[12]?x?F[0]&4096&&G(x,1):(x=ko(),x.c(),G(x,1),x.m(i,o)):x&&(et(),H(x,1,1,()=>{x=null}),tt()),Ve(a,I=rt(j,[(!b||F[0]&4096&&l!==(l=N[12]||void 0))&&{"aria-invalid":l},(!b||F[0]&69632&&u!==(u=N[12]?N[16]:void 0))&&{"aria-describedby":u},(!b||F[0]&128)&&{disabled:N[7]},(!b||F[0]&16384)&&{id:N[14]},(!b||F[0]&32768)&&{name:N[15]},(!b||F[0]&8)&&{cols:N[3]},(!b||F[0]&16)&&{rows:N[4]},(!b||F[0]&4)&&{placeholder:N[2]},(!b||F[0]&256)&&{readOnly:N[8]},(!b||F[0]&32&&c!==(c=N[5]??void 0))&&{maxlength:c},F[0]&262144&&N[18]])),F[0]&1&&fn(a,N[0]),T(a,"bx--text-area",!0),T(a,"bx--text-area--light",N[6]),T(a,"bx--text-area--invalid",N[12]),(!b||F[0]&4096&&f!==(f=N[12]||void 0))&&K(i,"data-invalid",f),!N[12]&&N[9]?C?C.p(N,F):(C=Co(N),C.c(),C.m(e,y)):C&&(C.d(1),C=null),N[12]?A?A.p(N,F):(A=Io(N),A.c(),A.m(e,null)):A&&(A.d(1),A=null)},i(N){b||(G(w),G(x),b=!0)},o(N){H(w),H(x),b=!1},d(N){N&&M(e),w&&w.d(),x&&x.d(),n[32](null),C&&C.d(),A&&A.d(),p=!1,ft(m)}}}function xs(n,e,t){let i;const o=["value","placeholder","cols","rows","maxCount","light","disabled","readonly","helperText","labelText","hideLabel","invalid","invalidText","id","name","ref"];let a=Te(e,o),{$$slots:l={},$$scope:u}=e;const c=Ci(l);let{value:f=""}=e,{placeholder:h=""}=e,{cols:y=50}=e,{rows:b=4}=e,{maxCount:p=void 0}=e,{light:m=!1}=e,{disabled:w=!1}=e,{readonly:x=!1}=e,{helperText:j=""}=e,{labelText:I=""}=e,{hideLabel:C=!1}=e,{invalid:A=!1}=e,{invalidText:N=""}=e,{id:F="ccs-"+Math.random().toString(36)}=e,{name:ge=void 0}=e,{ref:z=null}=e;function oe(k){ie.call(this,n,k)}function le(k){ie.call(this,n,k)}function D(k){ie.call(this,n,k)}function te(k){ie.call(this,n,k)}function R(k){ie.call(this,n,k)}function re(k){ie.call(this,n,k)}function je(k){ie.call(this,n,k)}function ke(k){ie.call(this,n,k)}function Ce(k){ie.call(this,n,k)}function Fe(k){ie.call(this,n,k)}function Le(k){ie.call(this,n,k)}function De(k){Ke[k?"unshift":"push"](()=>{z=k,t(1,z)})}function be(){f=this.value,t(0,f)}return n.$$set=k=>{e=ce(ce({},e),Xe(k)),t(18,a=Te(e,o)),"value"in k&&t(0,f=k.value),"placeholder"in k&&t(2,h=k.placeholder),"cols"in k&&t(3,y=k.cols),"rows"in k&&t(4,b=k.rows),"maxCount"in k&&t(5,p=k.maxCount),"light"in k&&t(6,m=k.light),"disabled"in k&&t(7,w=k.disabled),"readonly"in k&&t(8,x=k.readonly),"helperText"in k&&t(9,j=k.helperText),"labelText"in k&&t(10,I=k.labelText),"hideLabel"in k&&t(11,C=k.hideLabel),"invalid"in k&&t(12,A=k.invalid),"invalidText"in k&&t(13,N=k.invalidText),"id"in k&&t(14,F=k.id),"name"in k&&t(15,ge=k.name),"ref"in k&&t(1,z=k.ref),"$$scope"in k&&t(19,u=k.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&t(16,i=`error-${F}`)},[f,z,h,y,b,p,m,w,x,j,I,C,A,N,F,ge,i,c,a,u,l,oe,le,D,te,R,re,je,ke,Ce,Fe,Le,De,be]}class Ls extends Me{constructor(e){super(),Pe(this,e,xs,Os,Ne,{value:0,placeholder:2,cols:3,rows:4,maxCount:5,light:6,disabled:7,readonly:8,helperText:9,labelText:10,hideLabel:11,invalid:12,invalidText:13,id:14,name:15,ref:1},null,[-1,-1])}}const Ms=Ls,Ps=n=>({}),Oo=n=>({}),Ns=n=>({}),xo=n=>({});function Lo(n){let e,t,i,o=n[9]&&Mo(n),a=!n[20]&&n[6]&&Po(n);return{c(){e=V("div"),o&&o.c(),t=Z(),a&&a.c(),T(e,"bx--text-input__label-helper-wrapper",!0)},m(l,u){L(l,e,u),o&&o.m(e,null),B(e,t),a&&a.m(e,null),i=!0},p(l,u){l[9]?o?(o.p(l,u),u[0]&512&&G(o,1)):(o=Mo(l),o.c(),G(o,1),o.m(e,t)):o&&(et(),H(o,1,1,()=>{o=null}),tt()),!l[20]&&l[6]?a?a.p(l,u):(a=Po(l),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(l){i||(G(o),i=!0)},o(l){H(o),i=!1},d(l){l&&M(e),o&&o.d(),a&&a.d()}}}function Mo(n){let e,t;const i=n[26].labelText,o=at(i,n,n[25],xo),a=o||As(n);return{c(){e=V("label"),a&&a.c(),K(e,"for",n[7]),T(e,"bx--label",!0),T(e,"bx--visually-hidden",n[10]),T(e,"bx--label--disabled",n[5]),T(e,"bx--label--inline",n[16]),T(e,"bx--label--inline--sm",n[2]==="sm"),T(e,"bx--label--inline--xl",n[2]==="xl")},m(l,u){L(l,e,u),a&&a.m(e,null),t=!0},p(l,u){o?o.p&&(!t||u[0]&33554432)&&lt(o,i,l,l[25],t?ut(i,l[25],u,Ns):st(l[25]),xo):a&&a.p&&(!t||u[0]&512)&&a.p(l,t?u:[-1,-1]),(!t||u[0]&128)&&K(e,"for",l[7]),(!t||u[0]&1024)&&T(e,"bx--visually-hidden",l[10]),(!t||u[0]&32)&&T(e,"bx--label--disabled",l[5]),(!t||u[0]&65536)&&T(e,"bx--label--inline",l[16]),(!t||u[0]&4)&&T(e,"bx--label--inline--sm",l[2]==="sm"),(!t||u[0]&4)&&T(e,"bx--label--inline--xl",l[2]==="xl")},i(l){t||(G(a,l),t=!0)},o(l){H(a,l),t=!1},d(l){l&&M(e),a&&a.d(l)}}}function As(n){let e;return{c(){e=ve(n[9])},m(t,i){L(t,e,i)},p(t,i){i[0]&512&&Re(e,t[9])},d(t){t&&M(e)}}}function Po(n){let e,t;return{c(){e=V("div"),t=ve(n[6]),T(e,"bx--form__helper-text",!0),T(e,"bx--form__helper-text--disabled",n[5]),T(e,"bx--form__helper-text--inline",n[16])},m(i,o){L(i,e,o),B(e,t)},p(i,o){o[0]&64&&Re(t,i[6]),o[0]&32&&T(e,"bx--form__helper-text--disabled",i[5]),o[0]&65536&&T(e,"bx--form__helper-text--inline",i[16])},d(i){i&&M(e)}}}function No(n){let e,t;const i=n[26].labelText,o=at(i,n,n[25],Oo),a=o||Rs(n);return{c(){e=V("label"),a&&a.c(),K(e,"for",n[7]),T(e,"bx--label",!0),T(e,"bx--visually-hidden",n[10]),T(e,"bx--label--disabled",n[5]),T(e,"bx--label--inline",n[16]),T(e,"bx--label--inline-sm",n[16]&&n[2]==="sm"),T(e,"bx--label--inline-xl",n[16]&&n[2]==="xl")},m(l,u){L(l,e,u),a&&a.m(e,null),t=!0},p(l,u){o?o.p&&(!t||u[0]&33554432)&&lt(o,i,l,l[25],t?ut(i,l[25],u,Ps):st(l[25]),Oo):a&&a.p&&(!t||u[0]&512)&&a.p(l,t?u:[-1,-1]),(!t||u[0]&128)&&K(e,"for",l[7]),(!t||u[0]&1024)&&T(e,"bx--visually-hidden",l[10]),(!t||u[0]&32)&&T(e,"bx--label--disabled",l[5]),(!t||u[0]&65536)&&T(e,"bx--label--inline",l[16]),(!t||u[0]&65540)&&T(e,"bx--label--inline-sm",l[16]&&l[2]==="sm"),(!t||u[0]&65540)&&T(e,"bx--label--inline-xl",l[16]&&l[2]==="xl")},i(l){t||(G(a,l),t=!0)},o(l){H(a,l),t=!1},d(l){l&&M(e),a&&a.d(l)}}}function Rs(n){let e;return{c(){e=ve(n[9])},m(t,i){L(t,e,i)},p(t,i){i[0]&512&&Re(e,t[9])},d(t){t&&M(e)}}}function Ao(n){let e,t;return e=new pa({props:{class:"bx--text-input__invalid-icon"}}),{c(){de(e.$$.fragment)},m(i,o){he(e,i,o),t=!0},i(i){t||(G(e.$$.fragment,i),t=!0)},o(i){H(e.$$.fragment,i),t=!1},d(i){pe(e,i)}}}function Ro(n){let e,t;return e=new as({props:{class:`bx--text-input__invalid-icon
            bx--text-input__invalid-icon--warning`}}),{c(){de(e.$$.fragment)},m(i,o){he(e,i,o),t=!0},i(i){t||(G(e.$$.fragment,i),t=!0)},o(i){H(e.$$.fragment,i),t=!1},d(i){pe(e,i)}}}function Fo(n){let e,t;return e=new gs({props:{class:"bx--text-input__readonly-icon"}}),{c(){de(e.$$.fragment)},m(i,o){he(e,i,o),t=!0},i(i){t||(G(e.$$.fragment,i),t=!0)},o(i){H(e.$$.fragment,i),t=!1},d(i){pe(e,i)}}}function Do(n){let e;return{c(){e=V("hr"),T(e,"bx--text-input__divider",!0)},m(t,i){L(t,e,i)},d(t){t&&M(e)}}}function Uo(n){let e,t;return{c(){e=V("div"),t=ve(n[12]),K(e,"id",n[19]),T(e,"bx--form-requirement",!0)},m(i,o){L(i,e,o),B(e,t)},p(i,o){o[0]&4096&&Re(t,i[12]),o[0]&524288&&K(e,"id",i[19])},d(i){i&&M(e)}}}function jo(n){let e,t;return{c(){e=V("div"),t=ve(n[14]),K(e,"id",n[18]),T(e,"bx--form-requirement",!0)},m(i,o){L(i,e,o),B(e,t)},p(i,o){o[0]&16384&&Re(t,i[14]),o[0]&262144&&K(e,"id",i[18])},d(i){i&&M(e)}}}function Bo(n){let e,t;return{c(){e=V("div"),t=ve(n[6]),T(e,"bx--form__helper-text",!0),T(e,"bx--form__helper-text--disabled",n[5]),T(e,"bx--form__helper-text--inline",n[16])},m(i,o){L(i,e,o),B(e,t)},p(i,o){o[0]&64&&Re(t,i[6]),o[0]&32&&T(e,"bx--form__helper-text--disabled",i[5]),o[0]&65536&&T(e,"bx--form__helper-text--inline",i[16])},d(i){i&&M(e)}}}function zo(n){let e,t;return{c(){e=V("div"),t=ve(n[12]),K(e,"id",n[19]),T(e,"bx--form-requirement",!0)},m(i,o){L(i,e,o),B(e,t)},p(i,o){o[0]&4096&&Re(t,i[12]),o[0]&524288&&K(e,"id",i[19])},d(i){i&&M(e)}}}function Go(n){let e,t;return{c(){e=V("div"),t=ve(n[14]),K(e,"id",n[18]),T(e,"bx--form-requirement",!0)},m(i,o){L(i,e,o),B(e,t)},p(i,o){o[0]&16384&&Re(t,i[14]),o[0]&262144&&K(e,"id",i[18])},d(i){i&&M(e)}}}function Fs(n){let e,t,i,o,a,l,u,c,f,h,y,b,p,m,w,x,j,I,C,A,N,F,ge,z,oe=n[16]&&Lo(n),le=!n[16]&&(n[9]||n[24].labelText)&&No(n),D=n[11]&&Ao(),te=!n[11]&&n[13]&&Ro(),R=n[17]&&Fo(),re=[{"data-invalid":h=n[11]||void 0},{"aria-invalid":y=n[11]||void 0},{"data-warn":b=n[13]||void 0},{"aria-describedby":p=n[11]?n[19]:n[13]?n[18]:void 0},{disabled:n[5]},{id:n[7]},{name:n[8]},{placeholder:n[3]},{required:n[15]},{readOnly:n[17]},n[23]],je={};for(let k=0;k<re.length;k+=1)je=ce(je,re[k]);let ke=n[20]&&Do(),Ce=n[20]&&!n[16]&&n[11]&&Uo(n),Fe=n[20]&&!n[16]&&n[13]&&jo(n),Le=!n[11]&&!n[13]&&!n[20]&&!n[16]&&n[6]&&Bo(n),De=!n[20]&&n[11]&&zo(n),be=!n[20]&&!n[11]&&n[13]&&Go(n);return{c(){e=V("div"),oe&&oe.c(),t=Z(),le&&le.c(),i=Z(),o=V("div"),a=V("div"),D&&D.c(),l=Z(),te&&te.c(),u=Z(),R&&R.c(),c=Z(),f=V("input"),m=Z(),ke&&ke.c(),w=Z(),Ce&&Ce.c(),x=Z(),Fe&&Fe.c(),C=Z(),Le&&Le.c(),A=Z(),De&&De.c(),N=Z(),be&&be.c(),Ve(f,je),T(f,"bx--text-input",!0),T(f,"bx--text-input--light",n[4]),T(f,"bx--text-input--invalid",n[11]),T(f,"bx--text-input--warn",n[13]),T(f,"bx--text-input--sm",n[2]==="sm"),T(f,"bx--text-input--xl",n[2]==="xl"),K(a,"data-invalid",j=n[11]||void 0),K(a,"data-warn",I=n[13]||void 0),T(a,"bx--text-input__field-wrapper",!0),T(a,"bx--text-input__field-wrapper--warning",!n[11]&&n[13]),T(o,"bx--text-input__field-outer-wrapper",!0),T(o,"bx--text-input__field-outer-wrapper--inline",n[16]),T(e,"bx--form-item",!0),T(e,"bx--text-input-wrapper",!0),T(e,"bx--text-input-wrapper--inline",n[16]),T(e,"bx--text-input-wrapper--light",n[4]),T(e,"bx--text-input-wrapper--readonly",n[17])},m(k,se){L(k,e,se),oe&&oe.m(e,null),B(e,t),le&&le.m(e,null),B(e,i),B(e,o),B(o,a),D&&D.m(a,null),B(a,l),te&&te.m(a,null),B(a,u),R&&R.m(a,null),B(a,c),B(a,f),f.autofocus&&f.focus(),n[36](f),fn(f,n[0]),B(a,m),ke&&ke.m(a,null),B(a,w),Ce&&Ce.m(a,null),B(a,x),Fe&&Fe.m(a,null),B(o,C),Le&&Le.m(o,null),B(o,A),De&&De.m(o,null),B(o,N),be&&be.m(o,null),F=!0,ge||(z=[$(f,"input",n[37]),$(f,"change",n[22]),$(f,"input",n[21]),$(f,"keydown",n[31]),$(f,"keyup",n[32]),$(f,"focus",n[33]),$(f,"blur",n[34]),$(f,"paste",n[35]),$(e,"click",n[27]),$(e,"mouseover",n[28]),$(e,"mouseenter",n[29]),$(e,"mouseleave",n[30])],ge=!0)},p(k,se){k[16]?oe?(oe.p(k,se),se[0]&65536&&G(oe,1)):(oe=Lo(k),oe.c(),G(oe,1),oe.m(e,t)):oe&&(et(),H(oe,1,1,()=>{oe=null}),tt()),!k[16]&&(k[9]||k[24].labelText)?le?(le.p(k,se),se[0]&16843264&&G(le,1)):(le=No(k),le.c(),G(le,1),le.m(e,i)):le&&(et(),H(le,1,1,()=>{le=null}),tt()),k[11]?D?se[0]&2048&&G(D,1):(D=Ao(),D.c(),G(D,1),D.m(a,l)):D&&(et(),H(D,1,1,()=>{D=null}),tt()),!k[11]&&k[13]?te?se[0]&10240&&G(te,1):(te=Ro(),te.c(),G(te,1),te.m(a,u)):te&&(et(),H(te,1,1,()=>{te=null}),tt()),k[17]?R?se[0]&131072&&G(R,1):(R=Fo(),R.c(),G(R,1),R.m(a,c)):R&&(et(),H(R,1,1,()=>{R=null}),tt()),Ve(f,je=rt(re,[(!F||se[0]&2048&&h!==(h=k[11]||void 0))&&{"data-invalid":h},(!F||se[0]&2048&&y!==(y=k[11]||void 0))&&{"aria-invalid":y},(!F||se[0]&8192&&b!==(b=k[13]||void 0))&&{"data-warn":b},(!F||se[0]&796672&&p!==(p=k[11]?k[19]:k[13]?k[18]:void 0))&&{"aria-describedby":p},(!F||se[0]&32)&&{disabled:k[5]},(!F||se[0]&128)&&{id:k[7]},(!F||se[0]&256)&&{name:k[8]},(!F||se[0]&8)&&{placeholder:k[3]},(!F||se[0]&32768)&&{required:k[15]},(!F||se[0]&131072)&&{readOnly:k[17]},se[0]&8388608&&k[23]])),se[0]&1&&f.value!==k[0]&&fn(f,k[0]),T(f,"bx--text-input",!0),T(f,"bx--text-input--light",k[4]),T(f,"bx--text-input--invalid",k[11]),T(f,"bx--text-input--warn",k[13]),T(f,"bx--text-input--sm",k[2]==="sm"),T(f,"bx--text-input--xl",k[2]==="xl"),k[20]?ke||(ke=Do(),ke.c(),ke.m(a,w)):ke&&(ke.d(1),ke=null),k[20]&&!k[16]&&k[11]?Ce?Ce.p(k,se):(Ce=Uo(k),Ce.c(),Ce.m(a,x)):Ce&&(Ce.d(1),Ce=null),k[20]&&!k[16]&&k[13]?Fe?Fe.p(k,se):(Fe=jo(k),Fe.c(),Fe.m(a,null)):Fe&&(Fe.d(1),Fe=null),(!F||se[0]&2048&&j!==(j=k[11]||void 0))&&K(a,"data-invalid",j),(!F||se[0]&8192&&I!==(I=k[13]||void 0))&&K(a,"data-warn",I),(!F||se[0]&10240)&&T(a,"bx--text-input__field-wrapper--warning",!k[11]&&k[13]),!k[11]&&!k[13]&&!k[20]&&!k[16]&&k[6]?Le?Le.p(k,se):(Le=Bo(k),Le.c(),Le.m(o,A)):Le&&(Le.d(1),Le=null),!k[20]&&k[11]?De?De.p(k,se):(De=zo(k),De.c(),De.m(o,N)):De&&(De.d(1),De=null),!k[20]&&!k[11]&&k[13]?be?be.p(k,se):(be=Go(k),be.c(),be.m(o,null)):be&&(be.d(1),be=null),(!F||se[0]&65536)&&T(o,"bx--text-input__field-outer-wrapper--inline",k[16]),(!F||se[0]&65536)&&T(e,"bx--text-input-wrapper--inline",k[16]),(!F||se[0]&16)&&T(e,"bx--text-input-wrapper--light",k[4]),(!F||se[0]&131072)&&T(e,"bx--text-input-wrapper--readonly",k[17])},i(k){F||(G(oe),G(le),G(D),G(te),G(R),F=!0)},o(k){H(oe),H(le),H(D),H(te),H(R),F=!1},d(k){k&&M(e),oe&&oe.d(),le&&le.d(),D&&D.d(),te&&te.d(),R&&R.d(),n[36](null),ke&&ke.d(),Ce&&Ce.d(),Fe&&Fe.d(),Le&&Le.d(),De&&De.d(),be&&be.d(),ge=!1,ft(z)}}}function Ds(n,e,t){let i,o,a;const l=["size","value","placeholder","light","disabled","helperText","id","name","labelText","hideLabel","invalid","invalidText","warn","warnText","ref","required","inline","readonly"];let u=Te(e,l),{$$slots:c={},$$scope:f}=e;const h=Ci(c);let{size:y=void 0}=e,{value:b=""}=e,{placeholder:p=""}=e,{light:m=!1}=e,{disabled:w=!1}=e,{helperText:x=""}=e,{id:j="ccs-"+Math.random().toString(36)}=e,{name:I=void 0}=e,{labelText:C=""}=e,{hideLabel:A=!1}=e,{invalid:N=!1}=e,{invalidText:F=""}=e,{warn:ge=!1}=e,{warnText:z=""}=e,{ref:oe=null}=e,{required:le=!1}=e,{inline:D=!1}=e,{readonly:te=!1}=e;const R=Kt("Form"),re=fa();function je(Q){return u.type!=="number"?Q:Q!=""?Number(Q):null}const ke=Q=>{t(0,b=je(Q.target.value)),re("input",b)},Ce=Q=>{re("change",je(Q.target.value))};function Fe(Q){ie.call(this,n,Q)}function Le(Q){ie.call(this,n,Q)}function De(Q){ie.call(this,n,Q)}function be(Q){ie.call(this,n,Q)}function k(Q){ie.call(this,n,Q)}function se(Q){ie.call(this,n,Q)}function ot(Q){ie.call(this,n,Q)}function Oi(Q){ie.call(this,n,Q)}function $t(Q){ie.call(this,n,Q)}function Ze(Q){Ke[Q?"unshift":"push"](()=>{oe=Q,t(1,oe)})}function fe(){b=this.value,t(0,b)}return n.$$set=Q=>{e=ce(ce({},e),Xe(Q)),t(23,u=Te(e,l)),"size"in Q&&t(2,y=Q.size),"value"in Q&&t(0,b=Q.value),"placeholder"in Q&&t(3,p=Q.placeholder),"light"in Q&&t(4,m=Q.light),"disabled"in Q&&t(5,w=Q.disabled),"helperText"in Q&&t(6,x=Q.helperText),"id"in Q&&t(7,j=Q.id),"name"in Q&&t(8,I=Q.name),"labelText"in Q&&t(9,C=Q.labelText),"hideLabel"in Q&&t(10,A=Q.hideLabel),"invalid"in Q&&t(11,N=Q.invalid),"invalidText"in Q&&t(12,F=Q.invalidText),"warn"in Q&&t(13,ge=Q.warn),"warnText"in Q&&t(14,z=Q.warnText),"ref"in Q&&t(1,oe=Q.ref),"required"in Q&&t(15,le=Q.required),"inline"in Q&&t(16,D=Q.inline),"readonly"in Q&&t(17,te=Q.readonly),"$$scope"in Q&&t(25,f=Q.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&128&&t(19,o=`error-${j}`),n.$$.dirty[0]&128&&t(18,a=`warn-${j}`)},t(20,i=!!R&&R.isFluid),[b,oe,y,p,m,w,x,j,I,C,A,N,F,ge,z,le,D,te,a,o,i,ke,Ce,u,h,f,c,Fe,Le,De,be,k,se,ot,Oi,$t,Ze,fe]}class Us extends Me{constructor(e){super(),Pe(this,e,Ds,Fs,Ne,{size:2,value:0,placeholder:3,light:4,disabled:5,helperText:6,id:7,name:8,labelText:9,hideLabel:10,invalid:11,invalidText:12,warn:13,warnText:14,ref:1,required:15,inline:16,readonly:17},null,[-1,-1])}}const js=Us;function Bs(n){let e;return{c(){e=ve(`Click one of the draw icons to the top right of the map (the icons allow
      you to draw points, lines, polygons or routes)`)},m(t,i){L(t,e,i)},d(t){t&&M(e)}}}function zs(n){let e;return{c(){e=ve(`Draw the intervention on the map, clicking the original point or 'Finish
      snapping' for the Polygon and Route tools respectively`)},m(t,i){L(t,e,i)},d(t){t&&M(e)}}}function Gs(n){let e;return{c(){e=ve("Fill in the details that appear (Intervention type, name, description)")},m(t,i){L(t,e,i)},d(t){t&&M(e)}}}function Vs(n){let e;return{c(){e=ve(`Click the "Save" button or "Delete" button to save or remove the
      intervention`)},m(t,i){L(t,e,i)},d(t){t&&M(e)}}}function Js(n){let e,t,i,o,a,l,u,c;return e=new fi({props:{$$slots:{default:[Bs]},$$scope:{ctx:n}}}),i=new fi({props:{$$slots:{default:[zs]},$$scope:{ctx:n}}}),a=new fi({props:{$$slots:{default:[Gs]},$$scope:{ctx:n}}}),u=new fi({props:{$$slots:{default:[Vs]},$$scope:{ctx:n}}}),{c(){de(e.$$.fragment),t=Z(),de(i.$$.fragment),o=Z(),de(a.$$.fragment),l=Z(),de(u.$$.fragment)},m(f,h){he(e,f,h),L(f,t,h),he(i,f,h),L(f,o,h),he(a,f,h),L(f,l,h),he(u,f,h),c=!0},p(f,h){const y={};h&4&&(y.$$scope={dirty:h,ctx:f}),e.$set(y);const b={};h&4&&(b.$$scope={dirty:h,ctx:f}),i.$set(b);const p={};h&4&&(p.$$scope={dirty:h,ctx:f}),a.$set(p);const m={};h&4&&(m.$$scope={dirty:h,ctx:f}),u.$set(m)},i(f){c||(G(e.$$.fragment,f),G(i.$$.fragment,f),G(a.$$.fragment,f),G(u.$$.fragment,f),c=!0)},o(f){H(e.$$.fragment,f),H(i.$$.fragment,f),H(a.$$.fragment,f),H(u.$$.fragment,f),c=!1},d(f){pe(e,f),f&&M(t),pe(i,f),f&&M(o),pe(a,f),f&&M(l),pe(u,f)}}}function qs(n){let e,t,i,o,a,l,u,c,f,h,y,b,p,m,w,x,j,I,C,A,N,F,ge,z,oe,le;return a=new _s({props:{$$slots:{default:[Js]},$$scope:{ctx:n}}}),{c(){e=V("p"),e.textContent="For each intervention:",t=Z(),i=V("br"),o=Z(),de(a.$$.fragment),l=Z(),u=V("br"),c=Z(),f=V("p"),f.textContent=`Repeat the steps above for each substantial infrastructure intervention in
    the scheme.`,h=Z(),y=V("br"),b=Z(),p=V("p"),p.textContent=`To make further edits to attribute data, or to delete an intervention, click
    on its name in the left hand panel or its geometry in the map.`,m=Z(),w=V("br"),x=Z(),j=V("p"),j.textContent=`Click the "Export to GeoJSON" button to download the dataset representing
    the scheme, which can be made up of one or more intervention, as a GeoJSON
    file. After saving the file, you can delete the interventions, change the
    scheme name, and start a new set of interventions representing a new scheme.`,I=Z(),C=V("br"),A=Z(),N=V("p"),N.textContent=`To load a GeoJSON file that you have already saved from the tool, click the
    "Load from GeoJSON" button and select the file.`,F=Z(),ge=V("br"),z=Z(),oe=V("p"),oe.innerHTML=`Note: the <strong>Route tool</strong> works by calculating routes between
    start and end points using the existing transport network according to
    OpenStreetMap. Use it by clicking on the location where you would like the
    route to start and then clicking on the location where you would like the
    route to end on the map. The route will be calculated and drawn on the map.
    After you click &quot;Finish snapping&quot; you can edit the route by dragging
    individual points. This can be useful for representing links that are not
    part of the existing transport network, such as a new bridge or path.
    However,
    <strong>you cannot add or remove points</strong> with the Route tool. If the
    planned route intervention you would like to sketch as part of a scheme contains
    one or more new links (for example containing new bridges or paths between cul-de-sacs),
    you may want to use the Line tool instead.`},m(D,te){L(D,e,te),L(D,t,te),L(D,i,te),L(D,o,te),he(a,D,te),L(D,l,te),L(D,u,te),L(D,c,te),L(D,f,te),L(D,h,te),L(D,y,te),L(D,b,te),L(D,p,te),L(D,m,te),L(D,w,te),L(D,x,te),L(D,j,te),L(D,I,te),L(D,C,te),L(D,A,te),L(D,N,te),L(D,F,te),L(D,ge,te),L(D,z,te),L(D,oe,te),le=!0},p(D,te){const R={};te&4&&(R.$$scope={dirty:te,ctx:D}),a.$set(R)},i(D){le||(G(a.$$.fragment,D),le=!0)},o(D){H(a.$$.fragment,D),le=!1},d(D){D&&M(e),D&&M(t),D&&M(i),D&&M(o),pe(a,D),D&&M(l),D&&M(u),D&&M(c),D&&M(f),D&&M(h),D&&M(y),D&&M(b),D&&M(p),D&&M(m),D&&M(w),D&&M(x),D&&M(j),D&&M(I),D&&M(C),D&&M(A),D&&M(N),D&&M(F),D&&M(ge),D&&M(z),D&&M(oe)}}}function Ys(n){let e,t,i;function o(l){n[1](l)}let a={passiveModal:!0,modalHeading:"Instructions",$$slots:{default:[qs]},$$scope:{ctx:n}};return n[0]!==void 0&&(a.open=n[0]),e=new Cl({props:a}),Ke.push(()=>wt(e,"open",o,n[0])),{c(){de(e.$$.fragment)},m(l,u){he(e,l,u),i=!0},p(l,[u]){const c={};u&4&&(c.$$scope={dirty:u,ctx:l}),!t&&u&1&&(t=!0,c.open=l[0],Tt(()=>t=!1)),e.$set(c)},i(l){i||(G(e.$$.fragment,l),i=!0)},o(l){H(e.$$.fragment,l),i=!1},d(l){pe(e,l)}}}function Hs(n,e,t){let{open:i}=e;function o(a){i=a,t(0,i)}return n.$$set=a=>{"open"in a&&t(0,i=a.open)},[i,o]}class Ws extends Me{constructor(e){super(),Pe(this,e,Hs,Ys,Ne,{open:0})}}function Vo(n){let e;const t=n[3].default,i=at(t,n,n[2],null);return{c(){i&&i.c()},m(o,a){i&&i.m(o,a),e=!0},p(o,a){i&&i.p&&(!e||a&4)&&lt(i,t,o,o[2],e?ut(t,o[2],a,null):st(o[2]),null)},i(o){e||(G(i,o),e=!0)},o(o){H(i,o),e=!1},d(o){i&&i.d(o)}}}function Xs(n){let e,t,i=n[1]&&Vo(n);return{c(){e=V("div"),i&&i.c(),K(e,"class","map svelte-12dpf1u")},m(o,a){L(o,e,a),i&&i.m(e,null),n[4](e),t=!0},p(o,[a]){o[1]?i?(i.p(o,a),a&2&&G(i,1)):(i=Vo(o),i.c(),G(i,1),i.m(e,null)):i&&(et(),H(i,1,1,()=>{i=null}),tt())},i(o){t||(G(i),t=!0)},o(o){H(i),t=!1},d(o){o&&M(e),i&&i.d(),n[4](null)}}}function Zs(n,e,t){let{$$slots:i={},$$scope:o}=e,a,l,u=!1,c=!window.location.hash;ur("map",{getMap:()=>a,setCamera:c}),Qt(()=>{a=new Yi.Map({container:l,style:"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",hash:!0}),a.addControl(new Yi.ScaleControl),a.addControl(new Yi.NavigationControl,"bottom-right"),a.on("load",()=>{t(1,u=!0)}),new ResizeObserver(()=>{a.resize()}).observe(l)}),ca(()=>{a.remove()});function f(h){Ke[h?"unshift":"push"](()=>{l=h,t(0,l)})}return n.$$set=h=>{"$$scope"in h&&t(2,o=h.$$scope)},[l,u,o,i,f]}class Ks extends Me{constructor(e){super(),Pe(this,e,Zs,Xs,Ne,{})}}const Qs=n=>({}),Jo=n=>({}),$s=n=>({}),qo=n=>({}),eu=n=>({}),Yo=n=>({});function tu(n){let e,t,i,o,a,l,u,c,f,h,y,b;const p=n[3].nav,m=at(p,n,n[2],Yo),w=n[3].sidebar,x=at(w,n,n[2],qo),j=n[3].main,I=at(j,n,n[2],Jo);return{c(){e=V("aside"),t=V("div"),i=V("nav"),m&&m.c(),o=Z(),x&&x.c(),a=Z(),l=V("div"),l.textContent="→",c=Z(),f=V("main"),I&&I.c(),K(i,"class","svelte-19nerxn"),K(t,"class","sidebar-content content-container svelte-19nerxn"),K(l,"class","sidebar-toggle rounded-rect svelte-19nerxn"),K(e,"class",u=ro(n[0]?"":"collapsed")+" svelte-19nerxn"),K(f,"class","svelte-19nerxn")},m(C,A){L(C,e,A),B(e,t),B(t,i),m&&m.m(i,null),B(t,o),x&&x.m(t,null),B(e,a),B(e,l),L(C,c,A),L(C,f,A),I&&I.m(f,null),h=!0,y||(b=$(l,"click",n[1]),y=!0)},p(C,[A]){m&&m.p&&(!h||A&4)&&lt(m,p,C,C[2],h?ut(p,C[2],A,eu):st(C[2]),Yo),x&&x.p&&(!h||A&4)&&lt(x,w,C,C[2],h?ut(w,C[2],A,$s):st(C[2]),qo),(!h||A&1&&u!==(u=ro(C[0]?"":"collapsed")+" svelte-19nerxn"))&&K(e,"class",u),I&&I.p&&(!h||A&4)&&lt(I,j,C,C[2],h?ut(j,C[2],A,Qs):st(C[2]),Jo)},i(C){h||(G(m,C),G(x,C),G(I,C),h=!0)},o(C){H(m,C),H(x,C),H(I,C),h=!1},d(C){C&&M(e),m&&m.d(C),x&&x.d(C),C&&M(c),C&&M(f),I&&I.d(C),y=!1,b()}}}function nu(n,e,t){let{$$slots:i={},$$scope:o}=e,a=!0;function l(){t(0,a=!a)}return n.$$set=u=>{"$$scope"in u&&t(2,o=u.$$scope)},[a,l,o,i]}class iu extends Me{constructor(e){super(),Pe(this,e,nu,tu,Ne,{})}}function ga(n,e,t){t===void 0&&(t={});var i={type:"Feature"};return(t.id===0||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function ru(n,e,t){t===void 0&&(t={});for(var i=0,o=n;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<a[a.length-1].length;l++)if(a[a.length-1][l]!==a[0][l])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:n};return ga(u,e,t)}function ou(n,e,t){t===void 0&&(t={});var i={type:"MultiPolygon",coordinates:n};return ga(i,e,t)}/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function au(n,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,o,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(f){return function(h){return c([f,h])}}function c(f){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(a=f[0]&2?o.return:f[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,f[1])).done)return a;switch(o=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,o=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){t.label=f[1];break}if(f[0]===6&&t.label<a[1]){t.label=a[1],a=f;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(f);break}a[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],o=0}finally{i=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Gt=function(){function n(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return n}();function lu(n,e){return n>e?1:n<e?-1:0}function Ut(n,e,t){for(var i=new Gt(null,null),o=i,a=i;;){var l=t(n,e.key);if(l<0){if(e.left===null)break;if(t(n,e.left.key)<0){var u=e.left;if(e.left=u.right,u.right=e,e=u,e.left===null)break}a.left=e,a=e,e=e.left}else if(l>0){if(e.right===null)break;if(t(n,e.right.key)>0){var u=e.right;if(e.right=u.left,u.left=e,e=u,e.right===null)break}o.right=e,o=e,e=e.right}else break}return o.right=e.left,a.left=e.right,e.left=i.right,e.right=i.left,e}function Hi(n,e,t,i){var o=new Gt(n,e);if(t===null)return o.left=o.right=null,o;t=Ut(n,t,i);var a=i(n,t.key);return a<0?(o.left=t.left,o.right=t,t.left=null):a>=0&&(o.right=t.right,o.left=t,t.right=null),o}function Ho(n,e,t){var i=null,o=null;if(e){e=Ut(n,e,t);var a=t(e.key,n);a===0?(i=e.left,o=e.right):a<0?(o=e.right,e.right=null,i=e):(i=e.left,e.left=null,o=e)}return{left:i,right:o}}function su(n,e,t){return e===null?n:(n===null||(e=Ut(n.key,e,t),e.left=n),e)}function Ki(n,e,t,i,o){if(n){i(""+e+(t?"└── ":"├── ")+o(n)+`
`);var a=e+(t?"    ":"│   ");n.left&&Ki(n.left,a,!1,i,o),n.right&&Ki(n.right,a,!0,i,o)}}var cr=function(){function n(e){e===void 0&&(e=lu),this._root=null,this._size=0,this._comparator=e}return n.prototype.insert=function(e,t){return this._size++,this._root=Hi(e,t,this._root,this._comparator)},n.prototype.add=function(e,t){var i=new Gt(e,t);this._root===null&&(i.left=i.right=null,this._size++,this._root=i);var o=this._comparator,a=Ut(e,this._root,o),l=o(e,a.key);return l===0?this._root=a:(l<0?(i.left=a.left,i.right=a,a.left=null):l>0&&(i.right=a.right,i.left=a,a.right=null),this._size++,this._root=i),this._root},n.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},n.prototype._remove=function(e,t,i){var o;if(t===null)return null;t=Ut(e,t,i);var a=i(e,t.key);return a===0?(t.left===null?o=t.right:(o=Ut(e,t.left,i),o.right=t.right),this._size--,o):t},n.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=Ut(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},n.prototype.findStatic=function(e){for(var t=this._root,i=this._comparator;t;){var o=i(e,t.key);if(o===0)return t;o<0?t=t.left:t=t.right}return null},n.prototype.find=function(e){return this._root&&(this._root=Ut(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},n.prototype.contains=function(e){for(var t=this._root,i=this._comparator;t;){var o=i(e,t.key);if(o===0)return!0;o<0?t=t.left:t=t.right}return!1},n.prototype.forEach=function(e,t){for(var i=this._root,o=[],a=!1;!a;)i!==null?(o.push(i),i=i.left):o.length!==0?(i=o.pop(),e.call(t,i),i=i.right):a=!0;return this},n.prototype.range=function(e,t,i,o){for(var a=[],l=this._comparator,u=this._root,c;a.length!==0||u;)if(u)a.push(u),u=u.left;else{if(u=a.pop(),c=l(u.key,t),c>0)break;if(l(u.key,e)>=0&&i.call(o,u))return this;u=u.right}return this},n.prototype.keys=function(){var e=[];return this.forEach(function(t){var i=t.key;return e.push(i)}),e},n.prototype.values=function(){var e=[];return this.forEach(function(t){var i=t.data;return e.push(i)}),e},n.prototype.min=function(){return this._root?this.minNode(this._root).key:null},n.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},n.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},n.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},n.prototype.at=function(e){for(var t=this._root,i=!1,o=0,a=[];!i;)if(t)a.push(t),t=t.left;else if(a.length>0){if(t=a.pop(),o===e)return t;o++,t=t.right}else i=!0;return null},n.prototype.next=function(e){var t=this._root,i=null;if(e.right){for(i=e.right;i.left;)i=i.left;return i}for(var o=this._comparator;t;){var a=o(e.key,t.key);if(a===0)break;a<0?(i=t,t=t.left):t=t.right}return i},n.prototype.prev=function(e){var t=this._root,i=null;if(e.left!==null){for(i=e.left;i.right;)i=i.right;return i}for(var o=this._comparator;t;){var a=o(e.key,t.key);if(a===0)break;a<0?t=t.left:(i=t,t=t.right)}return i},n.prototype.clear=function(){return this._root=null,this._size=0,this},n.prototype.toList=function(){return fu(this._root)},n.prototype.load=function(e,t,i){t===void 0&&(t=[]),i===void 0&&(i=!1);var o=e.length,a=this._comparator;if(i&&er(e,t,0,o-1,a),this._root===null)this._root=Qi(e,t,0,o),this._size=o;else{var l=cu(this.toList(),uu(e,t),a);o=this._size+o,this._root=$i({head:l},0,o)}return this},n.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){e===void 0&&(e=function(i){return String(i.key)});var t=[];return Ki(this._root,"",!0,function(i){return t.push(i)},e),t.join("")},n.prototype.update=function(e,t,i){var o=this._comparator,a=Ho(e,this._root,o),l=a.left,u=a.right;o(e,t)<0?u=Hi(t,i,u,o):l=Hi(t,i,l,o),this._root=su(l,u,o)},n.prototype.split=function(e){return Ho(e,this._root,this._comparator)},n.prototype[Symbol.iterator]=function(){var e;return au(this,function(t){switch(t.label){case 0:e=this.minNode(),t.label=1;case 1:return e?[4,e]:[3,3];case 2:return t.sent(),e=this.next(e),[3,1];case 3:return[2]}})},n}();function Qi(n,e,t,i){var o=i-t;if(o>0){var a=t+Math.floor(o/2),l=n[a],u=e[a],c=new Gt(l,u);return c.left=Qi(n,e,t,a),c.right=Qi(n,e,a+1,i),c}return null}function uu(n,e){for(var t=new Gt(null,null),i=t,o=0;o<n.length;o++)i=i.next=new Gt(n[o],e[o]);return i.next=null,t.next}function fu(n){for(var e=n,t=[],i=!1,o=new Gt(null,null),a=o;!i;)e?(t.push(e),e=e.left):t.length>0?(e=a=a.next=t.pop(),e=e.right):i=!0;return a.next=null,o.next}function $i(n,e,t){var i=t-e;if(i>0){var o=e+Math.floor(i/2),a=$i(n,e,o),l=n.head;return l.left=a,n.head=n.head.next,l.right=$i(n,o+1,t),l}return null}function cu(n,e,t){for(var i=new Gt(null,null),o=i,a=n,l=e;a!==null&&l!==null;)t(a.key,l.key)<0?(o.next=a,a=a.next):(o.next=l,l=l.next),o=o.next;return a!==null?o.next=a:l!==null&&(o.next=l),i.next}function er(n,e,t,i,o){if(!(t>=i)){for(var a=n[t+i>>1],l=t-1,u=i+1;;){do l++;while(o(n[l],a)<0);do u--;while(o(n[u],a)>0);if(l>=u)break;var c=n[l];n[l]=n[u],n[u]=c,c=e[l],e[l]=e[u],e[u]=c}er(n,e,t,u,o),er(n,e,u+1,i,o)}}function ht(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Wo(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function it(n,e,t){return e&&Wo(n.prototype,e),t&&Wo(n,t),n}var Tn=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},tr=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var i=e.ll.x<t.ll.x?t.ll.x:e.ll.x,o=e.ur.x<t.ur.x?e.ur.x:t.ur.x,a=e.ll.y<t.ll.y?t.ll.y:e.ll.y,l=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:i,y:a},ur:{x:o,y:l}}},Bt=Number.EPSILON;Bt===void 0&&(Bt=Math.pow(2,-52));var du=Bt*Bt,nr=function(e,t){if(-Bt<e&&e<Bt&&-Bt<t&&t<Bt)return 0;var i=e-t;return i*i<du*e*t?0:e<t?-1:1},hu=function(){function n(){ht(this,n),this.reset()}return it(n,[{key:"reset",value:function(){this.xRounder=new Xo,this.yRounder=new Xo}},{key:"round",value:function(t,i){return{x:this.xRounder.round(t),y:this.yRounder.round(i)}}}]),n}(),Xo=function(){function n(){ht(this,n),this.tree=new cr,this.round(0)}return it(n,[{key:"round",value:function(t){var i=this.tree.add(t),o=this.tree.prev(i);if(o!==null&&nr(i.key,o.key)===0)return this.tree.remove(t),o.key;var a=this.tree.next(i);return a!==null&&nr(i.key,a.key)===0?(this.tree.remove(t),a.key):t}}]),n}(),Mn=new hu,In=function(e,t){return e.x*t.y-e.y*t.x},ma=function(e,t){return e.x*t.x+e.y*t.y},Zo=function(e,t,i){var o={x:t.x-e.x,y:t.y-e.y},a={x:i.x-e.x,y:i.y-e.y},l=In(o,a);return nr(l,0)},vi=function(e){return Math.sqrt(ma(e,e))},pu=function(e,t,i){var o={x:t.x-e.x,y:t.y-e.y},a={x:i.x-e.x,y:i.y-e.y};return In(a,o)/vi(a)/vi(o)},gu=function(e,t,i){var o={x:t.x-e.x,y:t.y-e.y},a={x:i.x-e.x,y:i.y-e.y};return ma(a,o)/vi(a)/vi(o)},Ko=function(e,t,i){return t.y===0?null:{x:e.x+t.x/t.y*(i-e.y),y:i}},Qo=function(e,t,i){return t.x===0?null:{x:i,y:e.y+t.y/t.x*(i-e.x)}},mu=function(e,t,i,o){if(t.x===0)return Qo(i,o,e.x);if(o.x===0)return Qo(e,t,i.x);if(t.y===0)return Ko(i,o,e.y);if(o.y===0)return Ko(e,t,i.y);var a=In(t,o);if(a==0)return null;var l={x:i.x-e.x,y:i.y-e.y},u=In(l,t)/a,c=In(l,o)/a,f=e.x+c*t.x,h=i.x+u*o.x,y=e.y+c*t.y,b=i.y+u*o.y,p=(f+h)/2,m=(y+b)/2;return{x:p,y:m}},Et=function(){it(n,null,[{key:"compare",value:function(t,i){var o=n.comparePoints(t.point,i.point);return o!==0?o:(t.point!==i.point&&t.link(i),t.isLeft!==i.isLeft?t.isLeft?1:-1:bi.compare(t.segment,i.segment))}},{key:"comparePoints",value:function(t,i){return t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0}}]);function n(e,t){ht(this,n),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}return it(n,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var i=t.point.events,o=0,a=i.length;o<a;o++){var l=i[o];this.point.events.push(l),l.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,i=0;i<t;i++){var o=this.point.events[i];if(o.segment.consumedBy===void 0)for(var a=i+1;a<t;a++){var l=this.point.events[a];l.consumedBy===void 0&&o.otherSE.point.events===l.otherSE.point.events&&o.segment.consume(l.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],i=0,o=this.point.events.length;i<o;i++){var a=this.point.events[i];a!==this&&!a.segment.ringOut&&a.segment.isInResult()&&t.push(a)}return t}},{key:"getLeftmostComparator",value:function(t){var i=this,o=new Map,a=function(u){var c=u.otherSE;o.set(u,{sine:pu(i.point,t.point,c.point),cosine:gu(i.point,t.point,c.point)})};return function(l,u){o.has(l)||a(l),o.has(u)||a(u);var c=o.get(l),f=c.sine,h=c.cosine,y=o.get(u),b=y.sine,p=y.cosine;return f>=0&&b>=0?h<p?1:h>p?-1:0:f<0&&b<0?h<p?-1:h>p?1:0:b<f?-1:b>f?1:0}}}]),n}(),vu=0,bi=function(){it(n,null,[{key:"compare",value:function(t,i){var o=t.leftSE.point.x,a=i.leftSE.point.x,l=t.rightSE.point.x,u=i.rightSE.point.x;if(u<o)return 1;if(l<a)return-1;var c=t.leftSE.point.y,f=i.leftSE.point.y,h=t.rightSE.point.y,y=i.rightSE.point.y;if(o<a){if(f<c&&f<h)return 1;if(f>c&&f>h)return-1;var b=t.comparePoint(i.leftSE.point);if(b<0)return 1;if(b>0)return-1;var p=i.comparePoint(t.rightSE.point);return p!==0?p:-1}if(o>a){if(c<f&&c<y)return-1;if(c>f&&c>y)return 1;var m=i.comparePoint(t.leftSE.point);if(m!==0)return m;var w=t.comparePoint(i.rightSE.point);return w<0?1:w>0?-1:1}if(c<f)return-1;if(c>f)return 1;if(l<u){var x=i.comparePoint(t.rightSE.point);if(x!==0)return x}if(l>u){var j=t.comparePoint(i.rightSE.point);if(j<0)return 1;if(j>0)return-1}if(l!==u){var I=h-c,C=l-o,A=y-f,N=u-a;if(I>C&&A<N)return 1;if(I<C&&A>N)return-1}return l>u?1:l<u||h<y?-1:h>y?1:t.id<i.id?-1:t.id>i.id?1:0}}]);function n(e,t,i,o){ht(this,n),this.id=++vu,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=i,this.windings=o}return it(n,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,i=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<i?t:i},ur:{x:this.rightSE.point.x,y:t>i?t:i}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var i=this.leftSE.point,o=this.rightSE.point,a=this.vector();if(i.x===o.x)return t.x===i.x?0:t.x<i.x?1:-1;var l=(t.y-i.y)/a.y,u=i.x+l*a.x;if(t.x===u)return 0;var c=(t.x-i.x)/a.x,f=i.y+c*a.y;return t.y===f?0:t.y<f?-1:1}},{key:"getIntersection",value:function(t){var i=this.bbox(),o=t.bbox(),a=tr(i,o);if(a===null)return null;var l=this.leftSE.point,u=this.rightSE.point,c=t.leftSE.point,f=t.rightSE.point,h=Tn(i,c)&&this.comparePoint(c)===0,y=Tn(o,l)&&t.comparePoint(l)===0,b=Tn(i,f)&&this.comparePoint(f)===0,p=Tn(o,u)&&t.comparePoint(u)===0;if(y&&h)return p&&!b?u:!p&&b?f:null;if(y)return b&&l.x===f.x&&l.y===f.y?null:l;if(h)return p&&u.x===c.x&&u.y===c.y?null:c;if(p&&b)return null;if(p)return u;if(b)return f;var m=mu(l,this.vector(),c,t.vector());return m===null||!Tn(a,m)?null:Mn.round(m.x,m.y)}},{key:"split",value:function(t){var i=[],o=t.events!==void 0,a=new Et(t,!0),l=new Et(t,!1),u=this.rightSE;this.replaceRightSE(l),i.push(l),i.push(a);var c=new n(a,u,this.rings.slice(),this.windings.slice());return Et.comparePoints(c.leftSE.point,c.rightSE.point)>0&&c.swapEvents(),Et.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),o&&(a.checkForConsuming(),l.checkForConsuming()),i}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var i=0,o=this.windings.length;i<o;i++)this.windings[i]*=-1}},{key:"consume",value:function(t){for(var i=this,o=t;i.consumedBy;)i=i.consumedBy;for(;o.consumedBy;)o=o.consumedBy;var a=n.compare(i,o);if(a!==0){if(a>0){var l=i;i=o,o=l}if(i.prev===o){var u=i;i=o,o=u}for(var c=0,f=o.rings.length;c<f;c++){var h=o.rings[c],y=o.windings[c],b=i.rings.indexOf(h);b===-1?(i.rings.push(h),i.windings.push(y)):i.windings[b]+=y}o.rings=null,o.windings=null,o.consumedBy=i,o.leftSE.consumedBy=i.leftSE,o.rightSE.consumedBy=i.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var i=this._afterState.rings,o=this._afterState.windings,a=this._afterState.multiPolys,l=0,u=this.rings.length;l<u;l++){var c=this.rings[l],f=this.windings[l],h=i.indexOf(c);h===-1?(i.push(c),o.push(f)):o[h]+=f}for(var y=[],b=[],p=0,m=i.length;p<m;p++)if(o[p]!==0){var w=i[p],x=w.poly;if(b.indexOf(x)===-1)if(w.isExterior)y.push(x);else{b.indexOf(x)===-1&&b.push(x);var j=y.indexOf(w.poly);j!==-1&&y.splice(j,1)}}for(var I=0,C=y.length;I<C;I++){var A=y[I].multiPoly;a.indexOf(A)===-1&&a.push(A)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,i=this.afterState().multiPolys;switch(vt.type){case"union":{var o=t.length===0,a=i.length===0;this._isInResult=o!==a;break}case"intersection":{var l,u;t.length<i.length?(l=t.length,u=i.length):(l=i.length,u=t.length),this._isInResult=u===vt.numMultiPolys&&l<u;break}case"xor":{var c=Math.abs(t.length-i.length);this._isInResult=c%2===1;break}case"difference":{var f=function(y){return y.length===1&&y[0].isSubject};this._isInResult=f(t)!==f(i);break}default:throw new Error("Unrecognized operation type found ".concat(vt.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,i,o){var a,l,u,c=Et.comparePoints(t,i);if(c<0)a=t,l=i,u=1;else if(c>0)a=i,l=t,u=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var f=new Et(a,!0),h=new Et(l,!1);return new n(f,h,[o],[u])}}]),n}(),$o=function(){function n(e,t,i){if(ht(this,n),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=i,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=Mn.round(e[0][0],e[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var a=o,l=1,u=e.length;l<u;l++){if(typeof e[l][0]!="number"||typeof e[l][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=Mn.round(e[l][0],e[l][1]);c.x===a.x&&c.y===a.y||(this.segments.push(bi.fromRing(a,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),a=c)}(o.x!==a.x||o.y!==a.y)&&this.segments.push(bi.fromRing(a,o,this))}return it(n,[{key:"getSweepEvents",value:function(){for(var t=[],i=0,o=this.segments.length;i<o;i++){var a=this.segments[i];t.push(a.leftSE),t.push(a.rightSE)}return t}}]),n}(),bu=function(){function n(e,t){if(ht(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new $o(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=e.length;i<o;i++){var a=new $o(e[i],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=t}return it(n,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),i=0,o=this.interiorRings.length;i<o;i++)for(var a=this.interiorRings[i].getSweepEvents(),l=0,u=a.length;l<u;l++)t.push(a[l]);return t}}]),n}(),ea=function(){function n(e,t){if(ht(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=e.length;i<o;i++){var a=new bu(e[i],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=t}return it(n,[{key:"getSweepEvents",value:function(){for(var t=[],i=0,o=this.polys.length;i<o;i++)for(var a=this.polys[i].getSweepEvents(),l=0,u=a.length;l<u;l++)t.push(a[l]);return t}}]),n}(),_u=function(){it(n,null,[{key:"factory",value:function(t){for(var i=[],o=0,a=t.length;o<a;o++){var l=t[o];if(!(!l.isInResult()||l.ringOut)){for(var u=null,c=l.leftSE,f=l.rightSE,h=[c],y=c.point,b=[];u=c,c=f,h.push(c),c.point!==y;)for(;;){var p=c.getAvailableLinkedEvents();if(p.length===0){var m=h[0].point,w=h[h.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(m.x,",")+" ".concat(m.y,"]. Last matching segment found ends at")+" [".concat(w.x,", ").concat(w.y,"]."))}if(p.length===1){f=p[0].otherSE;break}for(var x=null,j=0,I=b.length;j<I;j++)if(b[j].point===c.point){x=j;break}if(x!==null){var C=b.splice(x)[0],A=h.splice(C.index);A.unshift(A[0].otherSE),i.push(new n(A.reverse()));continue}b.push({index:h.length,point:c.point});var N=c.getLeftmostComparator(u);f=p.sort(N)[0].otherSE;break}i.push(new n(h))}}return i}}]);function n(e){ht(this,n),this.events=e;for(var t=0,i=e.length;t<i;t++)e[t].segment.ringOut=this;this.poly=null}return it(n,[{key:"getGeom",value:function(){for(var t=this.events[0].point,i=[t],o=1,a=this.events.length-1;o<a;o++){var l=this.events[o].point,u=this.events[o+1].point;Zo(l,t,u)!==0&&(i.push(l),t=l)}if(i.length===1)return null;var c=i[0],f=i[1];Zo(c,t,f)===0&&i.shift(),i.push(i[0]);for(var h=this.isExteriorRing()?1:-1,y=this.isExteriorRing()?0:i.length-1,b=this.isExteriorRing()?i.length:-1,p=[],m=y;m!=b;m+=h)p.push([i[m].x,i[m].y]);return p}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],i=1,o=this.events.length;i<o;i++){var a=this.events[i];Et.compare(t,a)>0&&(t=a)}for(var l=t.segment.prevInResult(),u=l?l.prevInResult():null;;){if(!l)return null;if(!u)return l.ringOut;if(u.ringOut!==l.ringOut)return u.ringOut.enclosingRing()!==l.ringOut?l.ringOut:l.ringOut.enclosingRing();l=u.prevInResult(),u=l?l.prevInResult():null}}}]),n}(),ta=function(){function n(e){ht(this,n),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return it(n,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var i=0,o=this.interiorRings.length;i<o;i++){var a=this.interiorRings[i].getGeom();a!==null&&t.push(a)}return t}}]),n}(),yu=function(){function n(e){ht(this,n),this.rings=e,this.polys=this._composePolys(e)}return it(n,[{key:"getGeom",value:function(){for(var t=[],i=0,o=this.polys.length;i<o;i++){var a=this.polys[i].getGeom();a!==null&&t.push(a)}return t}},{key:"_composePolys",value:function(t){for(var i=[],o=0,a=t.length;o<a;o++){var l=t[o];if(!l.poly)if(l.isExteriorRing())i.push(new ta(l));else{var u=l.enclosingRing();u.poly||i.push(new ta(u)),u.poly.addInterior(l)}}return i}}]),n}(),Eu=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bi.compare;ht(this,n),this.queue=e,this.tree=new cr(t),this.segments=[]}return it(n,[{key:"process",value:function(t){var i=t.segment,o=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(i),o;var a=t.isLeft?this.tree.insert(i):this.tree.find(i);if(!a)throw new Error("Unable to find segment #".concat(i.id," ")+"[".concat(i.leftSE.point.x,", ").concat(i.leftSE.point.y,"] -> ")+"[".concat(i.rightSE.point.x,", ").concat(i.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var l=a,u=a,c=void 0,f=void 0;c===void 0;)l=this.tree.prev(l),l===null?c=null:l.key.consumedBy===void 0&&(c=l.key);for(;f===void 0;)u=this.tree.next(u),u===null?f=null:u.key.consumedBy===void 0&&(f=u.key);if(t.isLeft){var h=null;if(c){var y=c.getIntersection(i);if(y!==null&&(i.isAnEndpoint(y)||(h=y),!c.isAnEndpoint(y)))for(var b=this._splitSafely(c,y),p=0,m=b.length;p<m;p++)o.push(b[p])}var w=null;if(f){var x=f.getIntersection(i);if(x!==null&&(i.isAnEndpoint(x)||(w=x),!f.isAnEndpoint(x)))for(var j=this._splitSafely(f,x),I=0,C=j.length;I<C;I++)o.push(j[I])}if(h!==null||w!==null){var A=null;if(h===null)A=w;else if(w===null)A=h;else{var N=Et.comparePoints(h,w);A=N<=0?h:w}this.queue.remove(i.rightSE),o.push(i.rightSE);for(var F=i.split(A),ge=0,z=F.length;ge<z;ge++)o.push(F[ge])}o.length>0?(this.tree.remove(i),o.push(t)):(this.segments.push(i),i.prev=c)}else{if(c&&f){var oe=c.getIntersection(f);if(oe!==null){if(!c.isAnEndpoint(oe))for(var le=this._splitSafely(c,oe),D=0,te=le.length;D<te;D++)o.push(le[D]);if(!f.isAnEndpoint(oe))for(var R=this._splitSafely(f,oe),re=0,je=R.length;re<je;re++)o.push(R[re])}}this.tree.remove(i)}return o}},{key:"_splitSafely",value:function(t,i){this.tree.remove(t);var o=t.rightSE;this.queue.remove(o);var a=t.split(i);return a.push(o),t.consumedBy===void 0&&this.tree.insert(t),a}}]),n}(),na=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Su=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,wu=function(){function n(){ht(this,n)}return it(n,[{key:"run",value:function(t,i,o){vt.type=t,Mn.reset();for(var a=[new ea(i,!0)],l=0,u=o.length;l<u;l++)a.push(new ea(o[l],!1));if(vt.numMultiPolys=a.length,vt.type==="difference")for(var c=a[0],f=1;f<a.length;)tr(a[f].bbox,c.bbox)!==null?f++:a.splice(f,1);if(vt.type==="intersection"){for(var h=0,y=a.length;h<y;h++)for(var b=a[h],p=h+1,m=a.length;p<m;p++)if(tr(b.bbox,a[p].bbox)===null)return[]}for(var w=new cr(Et.compare),x=0,j=a.length;x<j;x++)for(var I=a[x].getSweepEvents(),C=0,A=I.length;C<A;C++)if(w.insert(I[C]),w.size>na)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var N=new Eu(w),F=w.size,ge=w.pop();ge;){var z=ge.key;if(w.size===F){var oe=z.segment;throw new Error("Unable to pop() ".concat(z.isLeft?"left":"right"," SweepEvent ")+"[".concat(z.point.x,", ").concat(z.point.y,"] from segment #").concat(oe.id," ")+"[".concat(oe.leftSE.point.x,", ").concat(oe.leftSE.point.y,"] -> ")+"[".concat(oe.rightSE.point.x,", ").concat(oe.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(w.size>na)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(N.segments.length>Su)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var le=N.process(z),D=0,te=le.length;D<te;D++){var R=le[D];R.consumedBy===void 0&&w.insert(R)}F=w.size,ge=w.pop()}Mn.reset();var re=_u.factory(N.segments),je=new yu(re);return je.getGeom()}}]),n}(),vt=new wu,Tu=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return vt.run("union",e,i)},ku=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return vt.run("intersection",e,i)},Cu=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return vt.run("xor",e,i)},Iu=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return vt.run("difference",e,i)},hi={union:Tu,intersection:ku,xor:Cu,difference:Iu};function Ou(n,e){var t=Lu(e),i=null;return n.type==="FeatureCollection"?i=xu(n):i=va(hi.union(n.geometry.coordinates)),i.geometry.coordinates.forEach(function(o){t.geometry.coordinates.push(o[0])}),t}function xu(n){var e=n.features.length===2?hi.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):hi.union.apply(hi,n.features.map(function(t){return t.geometry.coordinates}));return va(e)}function va(n){return ou(n)}function Lu(n){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],t=n&&n.geometry.coordinates||e;return ru(t)}const Mu={"line-cap":"round","line-join":"round"},_i=["==","$type","Polygon"],dr=["==","$type","LineString"],yi=["==","$type","Point"];function Ei(n,e,t=1){return{type:"line",layout:Mu,paint:{"line-color":n,"line-width":e,"line-opacity":t}}}function Ii(n,e){return{type:"fill",paint:{"fill-color":n,"fill-opacity":e}}}function Si(n,e,t=1){return{type:"circle",paint:{"circle-radius":e,"circle-color":n,"circle-opacity":t}}}function Pu(n,e,t){let{authorityName:i}=e;const{getMap:o,setCamera:a}=Kt("map");Qt(async()=>{const u=await l(i),c=o();a&&c.fitBounds(da(u),{padding:20,animate:!1}),c.addSource("boundary",{type:"geojson",data:Ou(u)}),c.addLayer({id:"boundary",source:"boundary",...Ii("black",.5)})});async function l(u){const f=await(await fetch(Il)).text(),h=JSON.parse(f);return h.features=h.features.filter(y=>y.properties.name==u),h}return n.$$set=u=>{"authorityName"in u&&t(0,i=u.authorityName)},[i]}class Nu extends Me{constructor(e){super(),Pe(this,e,Pu,null,Ne,{authorityName:0})}}var ir={},Au={get exports(){return ir},set exports(n){ir=n}};(function(n,e){(function(t,i){n.exports=i()})(wn,function(){var t=function(r,s){var d={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},g={on:function(_,E,U){if(d[_]===void 0)throw new Error("Invalid event type: "+_);d[_].push({selector:E,fn:U})},render:function(_){s.store.featureChanged(_)}},v=function(_,E){for(var U=d[_],J=U.length;J--;){var X=U[J];if(X.selector(E)){X.fn.call(g,E)||s.store.render(),s.ui.updateMapClasses();break}}};return r.start.call(g),{render:r.render,stop:function(){r.stop&&r.stop()},trash:function(){r.trash&&(r.trash(),s.store.render())},combineFeatures:function(){r.combineFeatures&&r.combineFeatures()},uncombineFeatures:function(){r.uncombineFeatures&&r.uncombineFeatures()},drag:function(_){v("drag",_)},click:function(_){v("click",_)},mousemove:function(_){v("mousemove",_)},mousedown:function(_){v("mousedown",_)},mouseup:function(_){v("mouseup",_)},mouseout:function(_){v("mouseout",_)},keydown:function(_){v("keydown",_)},keyup:function(_){v("keyup",_)},touchstart:function(_){v("touchstart",_)},touchmove:function(_){v("touchmove",_)},touchend:function(_){v("touchend",_)},tap:function(_){v("tap",_)}}};function i(r){if(r.__esModule)return r;var s=r.default;if(typeof s=="function"){var d=function g(){if(this instanceof g){var v=[null];v.push.apply(v,arguments);var _=Function.bind.apply(s,v);return new _}return s.apply(this,arguments)};d.prototype=s.prototype}else d={};return Object.defineProperty(d,"__esModule",{value:!0}),Object.keys(r).forEach(function(g){var v=Object.getOwnPropertyDescriptor(r,g);Object.defineProperty(d,g,v.get?v:{enumerable:!0,get:function(){return r[g]}})}),d}var o={},a={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},l=a;function u(r){var s=0;if(r&&r.length>0){s+=Math.abs(c(r[0]));for(var d=1;d<r.length;d++)s-=Math.abs(c(r[d]))}return s}function c(r){var s,d,g,v,_,E,U=0,J=r.length;if(J>2){for(E=0;E<J;E++)E===J-2?(g=J-2,v=J-1,_=0):E===J-1?(g=J-1,v=0,_=1):(g=E,v=E+1,_=E+2),s=r[g],d=r[v],U+=(f(r[_][0])-f(s[0]))*Math.sin(f(d[1]));U=U*l.RADIUS*l.RADIUS/2}return U}function f(r){return r*Math.PI/180}o.geometry=function r(s){var d,g=0;switch(s.type){case"Polygon":return u(s.coordinates);case"MultiPolygon":for(d=0;d<s.coordinates.length;d++)g+=u(s.coordinates[d]);return g;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(d=0;d<s.geometries.length;d++)g+=r(s.geometries[d]);return g}},o.ring=c;var h={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},y={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},b={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},p={POLYGON:"polygon",LINE:"line_string",POINT:"point"},m={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},w={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},x={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},j={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},I={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},C={ACTIVE:"true",INACTIVE:"false"},A=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],N=-85,F=Object.freeze({__proto__:null,classes:h,sources:y,cursors:b,types:p,geojsonTypes:m,modes:w,events:x,updateActions:j,meta:I,activeStates:C,interactions:A,LAT_MIN:-90,LAT_RENDERED_MIN:N,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),ge={Point:0,LineString:1,MultiLineString:1,Polygon:2};function z(r,s){var d=ge[r.geometry.type]-ge[s.geometry.type];return d===0&&r.geometry.type===m.POLYGON?r.area-s.area:d}function oe(r){return r.map(function(s){return s.geometry.type===m.POLYGON&&(s.area=o.geometry({type:m.FEATURE,property:{},geometry:s.geometry})),s}).sort(z).map(function(s){return delete s.area,s})}function le(r,s){return s===void 0&&(s=0),[[r.point.x-s,r.point.y-s],[r.point.x+s,r.point.y+s]]}function D(r){if(this._items={},this._nums={},this._length=r?r.length:0,r)for(var s=0,d=r.length;s<d;s++)this.add(r[s]),r[s]!==void 0&&(typeof r[s]=="string"?this._items[r[s]]=s:this._nums[r[s]]=s)}D.prototype.add=function(r){return this.has(r)||(this._length++,typeof r=="string"?this._items[r]=this._length:this._nums[r]=this._length),this},D.prototype.delete=function(r){return this.has(r)===!1||(this._length--,delete this._items[r],delete this._nums[r]),this},D.prototype.has=function(r){return(typeof r=="string"||typeof r=="number")&&(this._items[r]!==void 0||this._nums[r]!==void 0)},D.prototype.values=function(){var r=this,s=[];return Object.keys(this._items).forEach(function(d){s.push({k:d,v:r._items[d]})}),Object.keys(this._nums).forEach(function(d){s.push({k:JSON.parse(d),v:r._nums[d]})}),s.sort(function(d,g){return d.v-g.v}).map(function(d){return d.k})},D.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var te=[I.FEATURE,I.MIDPOINT,I.VERTEX],R={click:function(r,s,d){return re(r,s,d,d.options.clickBuffer)},touch:function(r,s,d){return re(r,s,d,d.options.touchBuffer)}};function re(r,s,d,g){if(d.map===null)return[];var v=r?le(r,g):s,_={};d.options.styles&&(_.layers=d.options.styles.map(function(X){return X.id}));var E=d.map.queryRenderedFeatures(v,_).filter(function(X){return te.indexOf(X.properties.meta)!==-1}),U=new D,J=[];return E.forEach(function(X){var W=X.properties.id;U.has(W)||(U.add(W),J.push(X))}),oe(J)}function je(r,s){var d=R.click(r,null,s),g={mouse:b.NONE};return d[0]&&(g.mouse=d[0].properties.active===C.ACTIVE?b.MOVE:b.POINTER,g.feature=d[0].properties.meta),s.events.currentModeName().indexOf("draw")!==-1&&(g.mouse=b.ADD),s.ui.queueMapClasses(g),s.ui.updateMapClasses(),d[0]}function ke(r,s){var d=r.x-s.x,g=r.y-s.y;return Math.sqrt(d*d+g*g)}function Ce(r,s,d){d===void 0&&(d={});var g=d.fineTolerance!=null?d.fineTolerance:4,v=d.grossTolerance!=null?d.grossTolerance:12,_=d.interval!=null?d.interval:500;r.point=r.point||s.point,r.time=r.time||s.time;var E=ke(r.point,s.point);return E<g||E<v&&s.time-r.time<_}function Fe(r,s,d){d===void 0&&(d={});var g=d.tolerance!=null?d.tolerance:25,v=d.interval!=null?d.interval:250;return r.point=r.point||s.point,r.time=r.time||s.time,ke(r.point,s.point)<g&&s.time-r.time<v}var Le={},De={get exports(){return Le},set exports(r){Le=r}}.exports=function(r,s){if(s||(s=16),r===void 0&&(r=128),r<=0)return"0";for(var d=Math.log(Math.pow(2,r))/Math.log(s),g=2;d===1/0;g*=2)d=Math.log(Math.pow(2,r/g))/Math.log(s)*g;var v=d-Math.floor(d),_="";for(g=0;g<Math.floor(d);g++)_=Math.floor(Math.random()*s).toString(s)+_;if(v){var E=Math.pow(s,v);_=Math.floor(Math.random()*E).toString(s)+_}var U=parseInt(_,s);return U!==1/0&&U>=Math.pow(2,r)?De(r,s):_};De.rack=function(r,s,d){var g=function(_){var E=0;do{if(E++>10){if(!d)throw new Error("too many ID collisions, use more bits");r+=d}var U=De(r,s)}while(Object.hasOwnProperty.call(v,U));return v[U]=_,U},v=g.hats={};return g.get=function(_){return g.hats[_]},g.set=function(_,E){return g.hats[_]=E,g},g.bits=r||128,g.base=s||16,g};var be=function(r,s){this.ctx=r,this.properties=s.properties||{},this.coordinates=s.geometry.coordinates,this.id=s.id||Le(),this.type=s.geometry.type};be.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},be.prototype.incomingCoords=function(r){this.setCoordinates(r)},be.prototype.setCoordinates=function(r){this.coordinates=r,this.changed()},be.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},be.prototype.setProperty=function(r,s){this.properties[r]=s},be.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:m.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},be.prototype.internal=function(r){var s={id:this.id,meta:I.FEATURE,"meta:type":this.type,active:C.INACTIVE,mode:r};if(this.ctx.options.userProperties)for(var d in this.properties)s["user_"+d]=this.properties[d];return{type:m.FEATURE,properties:s,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var k=function(r,s){be.call(this,r,s)};(k.prototype=Object.create(be.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},k.prototype.updateCoordinate=function(r,s,d){this.coordinates=arguments.length===3?[s,d]:[r,s],this.changed()},k.prototype.getCoordinate=function(){return this.getCoordinates()};var se=function(r,s){be.call(this,r,s)};(se.prototype=Object.create(be.prototype)).isValid=function(){return this.coordinates.length>1},se.prototype.addCoordinate=function(r,s,d){this.changed();var g=parseInt(r,10);this.coordinates.splice(g,0,[s,d])},se.prototype.getCoordinate=function(r){var s=parseInt(r,10);return JSON.parse(JSON.stringify(this.coordinates[s]))},se.prototype.removeCoordinate=function(r){this.changed(),this.coordinates.splice(parseInt(r,10),1)},se.prototype.updateCoordinate=function(r,s,d){var g=parseInt(r,10);this.coordinates[g]=[s,d],this.changed()};var ot=function(r,s){be.call(this,r,s),this.coordinates=this.coordinates.map(function(d){return d.slice(0,-1)})};(ot.prototype=Object.create(be.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(r){return r.length>2})},ot.prototype.incomingCoords=function(r){this.coordinates=r.map(function(s){return s.slice(0,-1)}),this.changed()},ot.prototype.setCoordinates=function(r){this.coordinates=r,this.changed()},ot.prototype.addCoordinate=function(r,s,d){this.changed();var g=r.split(".").map(function(v){return parseInt(v,10)});this.coordinates[g[0]].splice(g[1],0,[s,d])},ot.prototype.removeCoordinate=function(r){this.changed();var s=r.split(".").map(function(g){return parseInt(g,10)}),d=this.coordinates[s[0]];d&&(d.splice(s[1],1),d.length<3&&this.coordinates.splice(s[0],1))},ot.prototype.getCoordinate=function(r){var s=r.split(".").map(function(g){return parseInt(g,10)}),d=this.coordinates[s[0]];return JSON.parse(JSON.stringify(d[s[1]]))},ot.prototype.getCoordinates=function(){return this.coordinates.map(function(r){return r.concat([r[0]])})},ot.prototype.updateCoordinate=function(r,s,d){this.changed();var g=r.split("."),v=parseInt(g[0],10),_=parseInt(g[1],10);this.coordinates[v]===void 0&&(this.coordinates[v]=[]),this.coordinates[v][_]=[s,d]};var Oi={MultiPoint:k,MultiLineString:se,MultiPolygon:ot},$t=function(r,s,d,g,v){var _=d.split("."),E=parseInt(_[0],10),U=_[1]?_.slice(1).join("."):null;return r[E][s](U,g,v)},Ze=function(r,s){if(be.call(this,r,s),delete this.coordinates,this.model=Oi[s.geometry.type],this.model===void 0)throw new TypeError(s.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(s.geometry.coordinates)};function fe(r){this.map=r.map,this.drawConfig=JSON.parse(JSON.stringify(r.options||{})),this._ctx=r}(Ze.prototype=Object.create(be.prototype))._coordinatesToFeatures=function(r){var s=this,d=this.model.bind(this);return r.map(function(g){return new d(s.ctx,{id:Le(),type:m.FEATURE,properties:{},geometry:{coordinates:g,type:s.type.replace("Multi","")}})})},Ze.prototype.isValid=function(){return this.features.every(function(r){return r.isValid()})},Ze.prototype.setCoordinates=function(r){this.features=this._coordinatesToFeatures(r),this.changed()},Ze.prototype.getCoordinate=function(r){return $t(this.features,"getCoordinate",r)},Ze.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(r){return r.type===m.POLYGON?r.getCoordinates():r.coordinates})))},Ze.prototype.updateCoordinate=function(r,s,d){$t(this.features,"updateCoordinate",r,s,d),this.changed()},Ze.prototype.addCoordinate=function(r,s,d){$t(this.features,"addCoordinate",r,s,d),this.changed()},Ze.prototype.removeCoordinate=function(r){$t(this.features,"removeCoordinate",r),this.changed()},Ze.prototype.getFeatures=function(){return this.features},fe.prototype.setSelected=function(r){return this._ctx.store.setSelected(r)},fe.prototype.setSelectedCoordinates=function(r){var s=this;this._ctx.store.setSelectedCoordinates(r),r.reduce(function(d,g){return d[g.feature_id]===void 0&&(d[g.feature_id]=!0,s._ctx.store.get(g.feature_id).changed()),d},{})},fe.prototype.getSelected=function(){return this._ctx.store.getSelected()},fe.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},fe.prototype.isSelected=function(r){return this._ctx.store.isSelected(r)},fe.prototype.getFeature=function(r){return this._ctx.store.get(r)},fe.prototype.select=function(r){return this._ctx.store.select(r)},fe.prototype.deselect=function(r){return this._ctx.store.deselect(r)},fe.prototype.deleteFeature=function(r,s){return s===void 0&&(s={}),this._ctx.store.delete(r,s)},fe.prototype.addFeature=function(r){return this._ctx.store.add(r)},fe.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},fe.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},fe.prototype.setActionableState=function(r){r===void 0&&(r={});var s={trash:r.trash||!1,combineFeatures:r.combineFeatures||!1,uncombineFeatures:r.uncombineFeatures||!1};return this._ctx.events.actionable(s)},fe.prototype.changeMode=function(r,s,d){return s===void 0&&(s={}),d===void 0&&(d={}),this._ctx.events.changeMode(r,s,d)},fe.prototype.updateUIClasses=function(r){return this._ctx.ui.queueMapClasses(r)},fe.prototype.activateUIButton=function(r){return this._ctx.ui.setActiveButton(r)},fe.prototype.featuresAt=function(r,s,d){if(d===void 0&&(d="click"),d!=="click"&&d!=="touch")throw new Error("invalid buffer type");return R[d](r,s,this._ctx)},fe.prototype.newFeature=function(r){var s=r.geometry.type;return s===m.POINT?new k(this._ctx,r):s===m.LINE_STRING?new se(this._ctx,r):s===m.POLYGON?new ot(this._ctx,r):new Ze(this._ctx,r)},fe.prototype.isInstanceOf=function(r,s){if(r===m.POINT)return s instanceof k;if(r===m.LINE_STRING)return s instanceof se;if(r===m.POLYGON)return s instanceof ot;if(r==="MultiFeature")return s instanceof Ze;throw new Error("Unknown feature class: "+r)},fe.prototype.doRender=function(r){return this._ctx.store.featureChanged(r)},fe.prototype.onSetup=function(){},fe.prototype.onDrag=function(){},fe.prototype.onClick=function(){},fe.prototype.onMouseMove=function(){},fe.prototype.onMouseDown=function(){},fe.prototype.onMouseUp=function(){},fe.prototype.onMouseOut=function(){},fe.prototype.onKeyUp=function(){},fe.prototype.onKeyDown=function(){},fe.prototype.onTouchStart=function(){},fe.prototype.onTouchMove=function(){},fe.prototype.onTouchEnd=function(){},fe.prototype.onTap=function(){},fe.prototype.onStop=function(){},fe.prototype.onTrash=function(){},fe.prototype.onCombineFeature=function(){},fe.prototype.onUncombineFeature=function(){},fe.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Q={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},wa=Object.keys(Q);function Ta(r){var s=Object.keys(r);return function(d,g){g===void 0&&(g={});var v={},_=s.reduce(function(E,U){return E[U]=r[U],E},new fe(d));return{start:function(){var E=this;v=_.onSetup(g),wa.forEach(function(U){var J,X=Q[U],W=function(){return!1};r[X]&&(W=function(){return!0}),E.on(U,W,(J=X,function(q){return _[J](v,q)}))})},stop:function(){_.onStop(v)},trash:function(){_.onTrash(v)},combineFeatures:function(){_.onCombineFeatures(v)},uncombineFeatures:function(){_.onUncombineFeatures(v)},render:function(E,U){_.toDisplayFeatures(v,E,U)}}}}function hn(r){return[].concat(r).filter(function(s){return s!==void 0})}function ka(){var r=this;if(!(r.ctx.map&&r.ctx.map.getSource(y.HOT)!==void 0))return J();var s=r.ctx.events.currentModeName();r.ctx.ui.queueMapClasses({mode:s});var d=[],g=[];r.isDirty?g=r.getAllIds():(d=r.getChangedIds().filter(function(X){return r.get(X)!==void 0}),g=r.sources.hot.filter(function(X){return X.properties.id&&d.indexOf(X.properties.id)===-1&&r.get(X.properties.id)!==void 0}).map(function(X){return X.properties.id})),r.sources.hot=[];var v=r.sources.cold.length;r.sources.cold=r.isDirty?[]:r.sources.cold.filter(function(X){var W=X.properties.id||X.properties.parent;return d.indexOf(W)===-1});var _=v!==r.sources.cold.length||g.length>0;function E(X,W){var q=r.get(X).internal(s);r.ctx.events.currentModeRender(q,function(ae){r.sources[W].push(ae)})}if(d.forEach(function(X){return E(X,"hot")}),g.forEach(function(X){return E(X,"cold")}),_&&r.ctx.map.getSource(y.COLD).setData({type:m.FEATURE_COLLECTION,features:r.sources.cold}),r.ctx.map.getSource(y.HOT).setData({type:m.FEATURE_COLLECTION,features:r.sources.hot}),r._emitSelectionChange&&(r.ctx.map.fire(x.SELECTION_CHANGE,{features:r.getSelected().map(function(X){return X.toGeoJSON()}),points:r.getSelectedCoordinates().map(function(X){return{type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:X.coordinates}}})}),r._emitSelectionChange=!1),r._deletedFeaturesToEmit.length){var U=r._deletedFeaturesToEmit.map(function(X){return X.toGeoJSON()});r._deletedFeaturesToEmit=[],r.ctx.map.fire(x.DELETE,{features:U})}function J(){r.isDirty=!1,r.clearChangedIds()}J(),r.ctx.map.fire(x.RENDER,{})}function Ie(r){var s,d=this;this._features={},this._featureIds=new D,this._selectedFeatureIds=new D,this._selectedCoordinates=[],this._changedFeatureIds=new D,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=r,this.sources={hot:[],cold:[]},this.render=function(){s||(s=requestAnimationFrame(function(){s=null,ka.call(d)}))},this.isDirty=!1}function pr(r,s){var d=r._selectedCoordinates.filter(function(g){return r._selectedFeatureIds.has(g.feature_id)});r._selectedCoordinates.length===d.length||s.silent||(r._emitSelectionChange=!0),r._selectedCoordinates=d}Ie.prototype.createRenderBatch=function(){var r=this,s=this.render,d=0;return this.render=function(){d++},function(){r.render=s,d>0&&r.render()}},Ie.prototype.setDirty=function(){return this.isDirty=!0,this},Ie.prototype.featureChanged=function(r){return this._changedFeatureIds.add(r),this},Ie.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Ie.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Ie.prototype.getAllIds=function(){return this._featureIds.values()},Ie.prototype.add=function(r){return this.featureChanged(r.id),this._features[r.id]=r,this._featureIds.add(r.id),this},Ie.prototype.delete=function(r,s){var d=this;return s===void 0&&(s={}),hn(r).forEach(function(g){d._featureIds.has(g)&&(d._featureIds.delete(g),d._selectedFeatureIds.delete(g),s.silent||d._deletedFeaturesToEmit.indexOf(d._features[g])===-1&&d._deletedFeaturesToEmit.push(d._features[g]),delete d._features[g],d.isDirty=!0)}),pr(this,s),this},Ie.prototype.get=function(r){return this._features[r]},Ie.prototype.getAll=function(){var r=this;return Object.keys(this._features).map(function(s){return r._features[s]})},Ie.prototype.select=function(r,s){var d=this;return s===void 0&&(s={}),hn(r).forEach(function(g){d._selectedFeatureIds.has(g)||(d._selectedFeatureIds.add(g),d._changedFeatureIds.add(g),s.silent||(d._emitSelectionChange=!0))}),this},Ie.prototype.deselect=function(r,s){var d=this;return s===void 0&&(s={}),hn(r).forEach(function(g){d._selectedFeatureIds.has(g)&&(d._selectedFeatureIds.delete(g),d._changedFeatureIds.add(g),s.silent||(d._emitSelectionChange=!0))}),pr(this,s),this},Ie.prototype.clearSelected=function(r){return r===void 0&&(r={}),this.deselect(this._selectedFeatureIds.values(),{silent:r.silent}),this},Ie.prototype.setSelected=function(r,s){var d=this;return s===void 0&&(s={}),r=hn(r),this.deselect(this._selectedFeatureIds.values().filter(function(g){return r.indexOf(g)===-1}),{silent:s.silent}),this.select(r.filter(function(g){return!d._selectedFeatureIds.has(g)}),{silent:s.silent}),this},Ie.prototype.setSelectedCoordinates=function(r){return this._selectedCoordinates=r,this._emitSelectionChange=!0,this},Ie.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Ie.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Ie.prototype.getSelected=function(){var r=this;return this._selectedFeatureIds.values().map(function(s){return r.get(s)})},Ie.prototype.getSelectedCoordinates=function(){var r=this;return this._selectedCoordinates.map(function(s){return{coordinates:r.get(s.feature_id).getCoordinate(s.coord_path)}})},Ie.prototype.isSelected=function(r){return this._selectedFeatureIds.has(r)},Ie.prototype.setFeatureProperty=function(r,s,d){this.get(r).setProperty(s,d),this.featureChanged(r)},Ie.prototype.storeMapConfig=function(){var r=this;A.forEach(function(s){r.ctx.map[s]&&(r._mapInitialConfig[s]=r.ctx.map[s].isEnabled())})},Ie.prototype.restoreMapConfig=function(){var r=this;Object.keys(this._mapInitialConfig).forEach(function(s){r._mapInitialConfig[s]?r.ctx.map[s].enable():r.ctx.map[s].disable()})},Ie.prototype.getInitialConfigValue=function(r){return this._mapInitialConfig[r]===void 0||this._mapInitialConfig[r]};var Pt=function(){for(var r=arguments,s={},d=0;d<arguments.length;d++){var g=r[d];for(var v in g)Ca.call(g,v)&&(s[v]=g[v])}return s},Ca=Object.prototype.hasOwnProperty,Ia=["mode","feature","mouse"];function Oa(r){var s=null,d=null,g={onRemove:function(){return r.map.off("load",g.connect),clearInterval(d),g.removeLayers(),r.store.restoreMapConfig(),r.ui.removeButtons(),r.events.removeEventListeners(),r.ui.clearMapClasses(),r.map=null,r.container=null,r.store=null,s&&s.parentNode&&s.parentNode.removeChild(s),s=null,this},connect:function(){r.map.off("load",g.connect),clearInterval(d),g.addLayers(),r.store.storeMapConfig(),r.events.addEventListeners()},onAdd:function(v){var _=v.fire;return v.fire=function(E,U){var J=arguments;return _.length===1&&arguments.length!==1&&(J=[Pt({},{type:E},U)]),_.apply(v,J)},r.map=v,r.events=function(E){var U=Object.keys(E.options.modes).reduce(function(P,ee){return P[ee]=Ta(E.options.modes[ee]),P},{}),J={},X={},W={},q=null,ae=null;W.drag=function(P,ee){ee({point:P.point,time:new Date().getTime()})?(E.ui.queueMapClasses({mouse:b.DRAG}),ae.drag(P)):P.originalEvent.stopPropagation()},W.mousedrag=function(P){W.drag(P,function(ee){return!Ce(J,ee)})},W.touchdrag=function(P){W.drag(P,function(ee){return!Fe(X,ee)})},W.mousemove=function(P){if((P.originalEvent.buttons!==void 0?P.originalEvent.buttons:P.originalEvent.which)===1)return W.mousedrag(P);var ee=je(P,E);P.featureTarget=ee,ae.mousemove(P)},W.mousedown=function(P){J={time:new Date().getTime(),point:P.point};var ee=je(P,E);P.featureTarget=ee,ae.mousedown(P)},W.mouseup=function(P){var ee=je(P,E);P.featureTarget=ee,Ce(J,{point:P.point,time:new Date().getTime()})?ae.click(P):ae.mouseup(P)},W.mouseout=function(P){ae.mouseout(P)},W.touchstart=function(P){if(E.options.touchEnabled){X={time:new Date().getTime(),point:P.point};var ee=R.touch(P,null,E)[0];P.featureTarget=ee,ae.touchstart(P)}},W.touchmove=function(P){if(E.options.touchEnabled)return ae.touchmove(P),W.touchdrag(P)},W.touchend=function(P){if(E.options.touchEnabled){var ee=R.touch(P,null,E)[0];P.featureTarget=ee,Fe(X,{time:new Date().getTime(),point:P.point})?ae.tap(P):ae.touchend(P)}};var Ae=function(P){return!(P===8||P===46||P>=48&&P<=57)};function ue(P,ee,_e){_e===void 0&&(_e={}),ae.stop();var We=U[P];if(We===void 0)throw new Error(P+" is not valid");q=P;var ze=We(E,ee);ae=t(ze,E),_e.silent||E.map.fire(x.MODE_CHANGE,{mode:P}),E.store.setDirty(),E.store.render()}W.keydown=function(P){(P.srcElement||P.target).classList[0]==="mapboxgl-canvas"&&(P.keyCode!==8&&P.keyCode!==46||!E.options.controls.trash?Ae(P.keyCode)?ae.keydown(P):P.keyCode===49&&E.options.controls.point?ue(w.DRAW_POINT):P.keyCode===50&&E.options.controls.line_string?ue(w.DRAW_LINE_STRING):P.keyCode===51&&E.options.controls.polygon&&ue(w.DRAW_POLYGON):(P.preventDefault(),ae.trash()))},W.keyup=function(P){Ae(P.keyCode)&&ae.keyup(P)},W.zoomend=function(){E.store.changeZoom()},W.data=function(P){if(P.dataType==="style"){var ee=E.setup,_e=E.map,We=E.options,ze=E.store;We.styles.some(function(Ri){return _e.getLayer(Ri.id)})||(ee.addLayers(),ze.setDirty(),ze.render())}};var Be={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){q=E.options.defaultMode,ae=t(U[q](E),E)},changeMode:ue,actionable:function(P){var ee=!1;Object.keys(P).forEach(function(_e){if(Be[_e]===void 0)throw new Error("Invalid action type");Be[_e]!==P[_e]&&(ee=!0),Be[_e]=P[_e]}),ee&&E.map.fire(x.ACTIONABLE,{actions:Be})},currentModeName:function(){return q},currentModeRender:function(P,ee){return ae.render(P,ee)},fire:function(P,ee){W[P]&&W[P](ee)},addEventListeners:function(){E.map.on("mousemove",W.mousemove),E.map.on("mousedown",W.mousedown),E.map.on("mouseup",W.mouseup),E.map.on("data",W.data),E.map.on("touchmove",W.touchmove,{passive:!0}),E.map.on("touchstart",W.touchstart,{passive:!0}),E.map.on("touchend",W.touchend,{passive:!0}),E.container.addEventListener("mouseout",W.mouseout),E.options.keybindings&&(E.container.addEventListener("keydown",W.keydown),E.container.addEventListener("keyup",W.keyup))},removeEventListeners:function(){E.map.off("mousemove",W.mousemove),E.map.off("mousedown",W.mousedown),E.map.off("mouseup",W.mouseup),E.map.off("data",W.data),E.map.off("touchmove",W.touchmove),E.map.off("touchstart",W.touchstart),E.map.off("touchend",W.touchend),E.container.removeEventListener("mouseout",W.mouseout),E.options.keybindings&&(E.container.removeEventListener("keydown",W.keydown),E.container.removeEventListener("keyup",W.keyup))},trash:function(P){ae.trash(P)},combineFeatures:function(){ae.combineFeatures()},uncombineFeatures:function(){ae.uncombineFeatures()},getMode:function(){return q}}}(r),r.ui=function(E){var U={},J=null,X={mode:null,feature:null,mouse:null},W={mode:null,feature:null,mouse:null};function q(P){W=Pt(W,P)}function ae(){var P,ee;if(E.container){var _e=[],We=[];Ia.forEach(function(ze){W[ze]!==X[ze]&&(_e.push(ze+"-"+X[ze]),W[ze]!==null&&We.push(ze+"-"+W[ze]))}),_e.length>0&&(P=E.container.classList).remove.apply(P,_e),We.length>0&&(ee=E.container.classList).add.apply(ee,We),X=Pt(X,W)}}function Ae(P,ee){ee===void 0&&(ee={});var _e=document.createElement("button");return _e.className=h.CONTROL_BUTTON+" "+ee.className,_e.setAttribute("title",ee.title),ee.container.appendChild(_e),_e.addEventListener("click",function(We){if(We.preventDefault(),We.stopPropagation(),We.target===J)return ue(),void ee.onDeactivate();Be(P),ee.onActivate()},!0),_e}function ue(){J&&(J.classList.remove(h.ACTIVE_BUTTON),J=null)}function Be(P){ue();var ee=U[P];ee&&ee&&P!=="trash"&&(ee.classList.add(h.ACTIVE_BUTTON),J=ee)}return{setActiveButton:Be,queueMapClasses:q,updateMapClasses:ae,clearMapClasses:function(){q({mode:null,feature:null,mouse:null}),ae()},addButtons:function(){var P=E.options.controls,ee=document.createElement("div");return ee.className=h.CONTROL_GROUP+" "+h.CONTROL_BASE,P&&(P[p.LINE]&&(U[p.LINE]=Ae(p.LINE,{container:ee,className:h.CONTROL_BUTTON_LINE,title:"LineString tool "+(E.options.keybindings?"(l)":""),onActivate:function(){return E.events.changeMode(w.DRAW_LINE_STRING)},onDeactivate:function(){return E.events.trash()}})),P[p.POLYGON]&&(U[p.POLYGON]=Ae(p.POLYGON,{container:ee,className:h.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(E.options.keybindings?"(p)":""),onActivate:function(){return E.events.changeMode(w.DRAW_POLYGON)},onDeactivate:function(){return E.events.trash()}})),P[p.POINT]&&(U[p.POINT]=Ae(p.POINT,{container:ee,className:h.CONTROL_BUTTON_POINT,title:"Marker tool "+(E.options.keybindings?"(m)":""),onActivate:function(){return E.events.changeMode(w.DRAW_POINT)},onDeactivate:function(){return E.events.trash()}})),P.trash&&(U.trash=Ae("trash",{container:ee,className:h.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){E.events.trash()}})),P.combine_features&&(U.combine_features=Ae("combineFeatures",{container:ee,className:h.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){E.events.combineFeatures()}})),P.uncombine_features&&(U.uncombine_features=Ae("uncombineFeatures",{container:ee,className:h.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){E.events.uncombineFeatures()}}))),ee},removeButtons:function(){Object.keys(U).forEach(function(P){var ee=U[P];ee.parentNode&&ee.parentNode.removeChild(ee),delete U[P]})}}}(r),r.container=v.getContainer(),r.store=new Ie(r),s=r.ui.addButtons(),r.options.boxSelect&&(v.boxZoom.disable(),v.dragPan.disable(),v.dragPan.enable()),v.loaded()?g.connect():(v.on("load",g.connect),d=setInterval(function(){v.loaded()&&g.connect()},16)),r.events.start(),s},addLayers:function(){r.map.addSource(y.COLD,{data:{type:m.FEATURE_COLLECTION,features:[]},type:"geojson"}),r.map.addSource(y.HOT,{data:{type:m.FEATURE_COLLECTION,features:[]},type:"geojson"}),r.options.styles.forEach(function(v){r.map.addLayer(v)}),r.store.setDirty(!0),r.store.render()},removeLayers:function(){r.options.styles.forEach(function(v){r.map.getLayer(v.id)&&r.map.removeLayer(v.id)}),r.map.getSource(y.COLD)&&r.map.removeSource(y.COLD),r.map.getSource(y.HOT)&&r.map.removeSource(y.HOT)}};return r.setup=g,g}var gr=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Fn(r){return function(s){var d=s.featureTarget;return!!d&&!!d.properties&&d.properties.meta===r}}function mr(r){return!!r.originalEvent&&!!r.originalEvent.shiftKey&&r.originalEvent.button===0}function Vt(r){return!!r.featureTarget&&!!r.featureTarget.properties&&r.featureTarget.properties.active===C.ACTIVE&&r.featureTarget.properties.meta===I.FEATURE}function xi(r){return!!r.featureTarget&&!!r.featureTarget.properties&&r.featureTarget.properties.active===C.INACTIVE&&r.featureTarget.properties.meta===I.FEATURE}function Dn(r){return r.featureTarget===void 0}function vr(r){return!!r.featureTarget&&!!r.featureTarget.properties&&r.featureTarget.properties.meta===I.FEATURE}function pn(r){var s=r.featureTarget;return!!s&&!!s.properties&&s.properties.meta===I.VERTEX}function Un(r){return!!r.originalEvent&&r.originalEvent.shiftKey===!0}function jn(r){return r.keyCode===27}function Bn(r){return r.keyCode===13}var xa=Object.freeze({__proto__:null,isOfMetaType:Fn,isShiftMousedown:mr,isActiveFeature:Vt,isInactiveFeature:xi,noTarget:Dn,isFeature:vr,isVertex:pn,isShiftDown:Un,isEscapeKey:jn,isEnterKey:Bn,isTrue:function(){return!0}}),La=en;function en(r,s){this.x=r,this.y=s}function Li(r,s){var d=s.getBoundingClientRect();return new La(r.clientX-d.left-(s.clientLeft||0),r.clientY-d.top-(s.clientTop||0))}function tn(r,s,d,g){return{type:m.FEATURE,properties:{meta:I.VERTEX,parent:r,coord_path:d,active:g?C.ACTIVE:C.INACTIVE},geometry:{type:m.POINT,coordinates:s}}}function br(r,s,d){var g=s.geometry.coordinates,v=d.geometry.coordinates;if(g[1]>85||g[1]<N||v[1]>85||v[1]<N)return null;var _={lng:(g[0]+v[0])/2,lat:(g[1]+v[1])/2};return{type:m.FEATURE,properties:{meta:I.MIDPOINT,parent:r,lng:_.lng,lat:_.lat,coord_path:d.properties.coord_path},geometry:{type:m.POINT,coordinates:[_.lng,_.lat]}}}function zn(r,s,d){s===void 0&&(s={}),d===void 0&&(d=null);var g,v=r.geometry,_=v.type,E=v.coordinates,U=r.properties&&r.properties.id,J=[];function X(q,ae){var Ae="",ue=null;q.forEach(function(Be,P){var ee=ae!=null?ae+"."+P:String(P),_e=tn(U,Be,ee,W(ee));if(s.midpoints&&ue){var We=br(U,ue,_e);We&&J.push(We)}ue=_e;var ze=JSON.stringify(Be);Ae!==ze&&J.push(_e),P===0&&(Ae=ze)})}function W(q){return!!s.selectedPaths&&s.selectedPaths.indexOf(q)!==-1}return _===m.POINT?J.push(tn(U,E,d,W(d))):_===m.POLYGON?E.forEach(function(q,ae){X(q,d!==null?d+"."+ae:String(ae))}):_===m.LINE_STRING?X(E,d):_.indexOf(m.MULTI_PREFIX)===0&&(g=_.replace(m.MULTI_PREFIX,""),E.forEach(function(q,ae){var Ae={type:m.FEATURE,properties:r.properties,geometry:{type:g,coordinates:q}};J=J.concat(zn(Ae,s,ae))})),J}en.prototype={clone:function(){return new en(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,s){return this.clone()._rotateAround(r,s)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var s=r.x-this.x,d=r.y-this.y;return s*s+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,s){return Math.atan2(this.x*s-this.y*r,this.x*r+this.y*s)},_matMult:function(r){var s=r[0]*this.x+r[1]*this.y,d=r[2]*this.x+r[3]*this.y;return this.x=s,this.y=d,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var s=Math.cos(r),d=Math.sin(r),g=s*this.x-d*this.y,v=d*this.x+s*this.y;return this.x=g,this.y=v,this},_rotateAround:function(r,s){var d=Math.cos(r),g=Math.sin(r),v=s.x+d*(this.x-s.x)-g*(this.y-s.y),_=s.y+g*(this.x-s.x)+d*(this.y-s.y);return this.x=v,this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},en.convert=function(r){return r instanceof en?r:Array.isArray(r)?new en(r[0],r[1]):r};var pt={enable:function(r){setTimeout(function(){r.map&&r.map.doubleClickZoom&&r._ctx&&r._ctx.store&&r._ctx.store.getInitialConfigValue&&r._ctx.store.getInitialConfigValue("doubleClickZoom")&&r.map.doubleClickZoom.enable()},0)},disable:function(r){setTimeout(function(){r.map&&r.map.doubleClickZoom&&r.map.doubleClickZoom.disable()},0)}},gn={},Ma={get exports(){return gn},set exports(r){gn=r}},_r=function(r){if(!r||!r.type)return null;var s=Pa[r.type];if(!s)return null;if(s==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:r}]};if(s==="feature")return{type:"FeatureCollection",features:[r]};if(s==="featurecollection")return r},Pa={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Na=Object.freeze({__proto__:null,default:function r(s){switch(s&&s.type||null){case"FeatureCollection":return s.features=s.features.reduce(function(d,g){return d.concat(r(g))},[]),s;case"Feature":return s.geometry?r(s.geometry).map(function(d){var g={type:"Feature",properties:JSON.parse(JSON.stringify(s.properties)),geometry:d};return s.id!==void 0&&(g.id=s.id),g}):[s];case"MultiPoint":return s.coordinates.map(function(d){return{type:"Point",coordinates:d}});case"MultiPolygon":return s.coordinates.map(function(d){return{type:"Polygon",coordinates:d}});case"MultiLineString":return s.coordinates.map(function(d){return{type:"LineString",coordinates:d}});case"GeometryCollection":return s.geometries.map(r).reduce(function(d,g){return d.concat(g)},[]);case"Point":case"Polygon":case"LineString":return[s]}}}),Aa=_r,Gn=i(Na),Ra=function(r){return function s(d){return Array.isArray(d)&&d.length&&typeof d[0]=="number"?[d]:d.reduce(function(g,v){return Array.isArray(v)&&Array.isArray(v[0])?g.concat(s(v)):(g.push(v),g)},[])}(r)};Gn instanceof Function||(Gn=Gn.default);var Mi={},Fa={get exports(){return Mi},set exports(r){Mi=r}}.exports=function(r){return new ct(r)};function ct(r){this.value=r}function yr(r,s,d){var g=[],v=[],_=!0;return function E(U){var J=d?Er(U):U,X={},W=!0,q={node:J,node_:U,path:[].concat(g),parent:v[v.length-1],parents:v,key:g.slice(-1)[0],isRoot:g.length===0,level:g.length,circular:null,update:function(ue,Be){q.isRoot||(q.parent.node[q.key]=ue),q.node=ue,Be&&(W=!1)},delete:function(ue){delete q.parent.node[q.key],ue&&(W=!1)},remove:function(ue){Sr(q.parent.node)?q.parent.node.splice(q.key,1):delete q.parent.node[q.key],ue&&(W=!1)},keys:null,before:function(ue){X.before=ue},after:function(ue){X.after=ue},pre:function(ue){X.pre=ue},post:function(ue){X.post=ue},stop:function(){_=!1},block:function(){W=!1}};if(!_)return q;function ae(){if(typeof q.node=="object"&&q.node!==null){q.keys&&q.node_===q.node||(q.keys=Vn(q.node)),q.isLeaf=q.keys.length==0;for(var ue=0;ue<v.length;ue++)if(v[ue].node_===U){q.circular=v[ue];break}}else q.isLeaf=!0,q.keys=null;q.notLeaf=!q.isLeaf,q.notRoot=!q.isRoot}ae();var Ae=s.call(q,q.node);return Ae!==void 0&&q.update&&q.update(Ae),X.before&&X.before.call(q,q.node),W&&(typeof q.node!="object"||q.node===null||q.circular||(v.push(q),ae(),Jn(q.keys,function(ue,Be){g.push(ue),X.pre&&X.pre.call(q,q.node[ue],ue);var P=E(q.node[ue]);d&&qn.call(q.node,ue)&&(q.node[ue]=P.node),P.isLast=Be==q.keys.length-1,P.isFirst=Be==0,X.post&&X.post.call(q,P),g.pop()}),v.pop()),X.after&&X.after.call(q,q.node)),q}(r).node}function Er(r){if(typeof r=="object"&&r!==null){var s;if(Sr(r))s=[];else if(nn(r)==="[object Date]")s=new Date(r.getTime?r.getTime():r);else if(function(v){return nn(v)==="[object RegExp]"}(r))s=new RegExp(r);else if(function(v){return nn(v)==="[object Error]"}(r))s={message:r.message};else if(function(v){return nn(v)==="[object Boolean]"}(r))s=new Boolean(r);else if(function(v){return nn(v)==="[object Number]"}(r))s=new Number(r);else if(function(v){return nn(v)==="[object String]"}(r))s=new String(r);else if(Object.create&&Object.getPrototypeOf)s=Object.create(Object.getPrototypeOf(r));else if(r.constructor===Object)s={};else{var d=r.constructor&&r.constructor.prototype||r.__proto__||{},g=function(){};g.prototype=d,s=new g}return Jn(Vn(r),function(v){s[v]=r[v]}),s}return r}ct.prototype.get=function(r){for(var s=this.value,d=0;d<r.length;d++){var g=r[d];if(!s||!qn.call(s,g)){s=void 0;break}s=s[g]}return s},ct.prototype.has=function(r){for(var s=this.value,d=0;d<r.length;d++){var g=r[d];if(!s||!qn.call(s,g))return!1;s=s[g]}return!0},ct.prototype.set=function(r,s){for(var d=this.value,g=0;g<r.length-1;g++){var v=r[g];qn.call(d,v)||(d[v]={}),d=d[v]}return d[r[g]]=s,s},ct.prototype.map=function(r){return yr(this.value,r,!0)},ct.prototype.forEach=function(r){return this.value=yr(this.value,r,!1),this.value},ct.prototype.reduce=function(r,s){var d=arguments.length===1,g=d?this.value:s;return this.forEach(function(v){this.isRoot&&d||(g=r.call(this,g,v))}),g},ct.prototype.paths=function(){var r=[];return this.forEach(function(s){r.push(this.path)}),r},ct.prototype.nodes=function(){var r=[];return this.forEach(function(s){r.push(this.node)}),r},ct.prototype.clone=function(){var r=[],s=[];return function d(g){for(var v=0;v<r.length;v++)if(r[v]===g)return s[v];if(typeof g=="object"&&g!==null){var _=Er(g);return r.push(g),s.push(_),Jn(Vn(g),function(E){_[E]=d(g[E])}),r.pop(),s.pop(),_}return g}(this.value)};var Vn=Object.keys||function(r){var s=[];for(var d in r)s.push(d);return s};function nn(r){return Object.prototype.toString.call(r)}var Sr=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"},Jn=function(r,s){if(r.forEach)return r.forEach(s);for(var d=0;d<r.length;d++)s(r[d],d,r)};Jn(Vn(ct.prototype),function(r){Fa[r]=function(s){var d=[].slice.call(arguments,1),g=new ct(s);return g[r].apply(g,d)}});var qn=Object.hasOwnProperty||function(r,s){return s in r},Da=Qe;function Qe(r){if(!(this instanceof Qe))return new Qe(r);this._bbox=r||[1/0,1/0,-1/0,-1/0],this._valid=!!r}Qe.prototype.include=function(r){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],r[0]),this._bbox[1]=Math.min(this._bbox[1],r[1]),this._bbox[2]=Math.max(this._bbox[2],r[0]),this._bbox[3]=Math.max(this._bbox[3],r[1]),this},Qe.prototype.equals=function(r){var s;return s=r instanceof Qe?r.bbox():r,this._bbox[0]==s[0]&&this._bbox[1]==s[1]&&this._bbox[2]==s[2]&&this._bbox[3]==s[3]},Qe.prototype.center=function(r){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Qe.prototype.union=function(r){var s;return this._valid=!0,s=r instanceof Qe?r.bbox():r,this._bbox[0]=Math.min(this._bbox[0],s[0]),this._bbox[1]=Math.min(this._bbox[1],s[1]),this._bbox[2]=Math.max(this._bbox[2],s[2]),this._bbox[3]=Math.max(this._bbox[3],s[3]),this},Qe.prototype.bbox=function(){return this._valid?this._bbox:null},Qe.prototype.contains=function(r){if(!r)return this._fastContains();if(!this._valid)return null;var s=r[0],d=r[1];return this._bbox[0]<=s&&this._bbox[1]<=d&&this._bbox[2]>=s&&this._bbox[3]>=d},Qe.prototype.intersect=function(r){return this._valid?(s=r instanceof Qe?r.bbox():r,!(this._bbox[0]>s[2]||this._bbox[2]<s[0]||this._bbox[3]<s[1]||this._bbox[1]>s[3])):null;var s},Qe.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var r="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",r)},Qe.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Ua=function(r){if(!r)return[];var s=Gn(Aa(r)),d=[];return s.features.forEach(function(g){g.geometry&&(d=d.concat(Ra(g.geometry.coordinates)))}),d},ja=Mi,Ba=Da,wr={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},za=Object.keys(wr);function Pi(r){for(var s=Ba(),d=Ua(r),g=0;g<d.length;g++)s.include(d[g]);return s}Ma.exports=function(r){return Pi(r).bbox()},gn.polygon=function(r){return Pi(r).polygon()},gn.bboxify=function(r){return ja(r).map(function(s){s&&za.some(function(d){return!!s[d]&&wr[d].indexOf(s.type)!==-1})&&(s.bbox=Pi(s).bbox(),this.update(s))})};var Yn=-90;function Ni(r,s){var d=Yn,g=90,v=Yn,_=90,E=270,U=-270;r.forEach(function(X){var W=gn(X),q=W[1],ae=W[3],Ae=W[0],ue=W[2];q>d&&(d=q),ae<g&&(g=ae),ae>v&&(v=ae),q<_&&(_=q),Ae<E&&(E=Ae),ue>U&&(U=ue)});var J=s;return d+J.lat>85&&(J.lat=85-d),v+J.lat>90&&(J.lat=90-v),g+J.lat<-85&&(J.lat=-85-g),_+J.lat<Yn&&(J.lat=Yn-_),E+J.lng<=-270&&(J.lng+=360*Math.ceil(Math.abs(J.lng)/360)),U+J.lng>=270&&(J.lng-=360*Math.ceil(Math.abs(J.lng)/360)),J}function Ai(r,s){var d=Ni(r.map(function(g){return g.toGeoJSON()}),s);r.forEach(function(g){var v,_=g.getCoordinates(),E=function(J){var X={lng:J[0]+d.lng,lat:J[1]+d.lat};return[X.lng,X.lat]},U=function(J){return J.map(function(X){return E(X)})};g.type===m.POINT?v=E(_):g.type===m.LINE_STRING||g.type===m.MULTI_POINT?v=_.map(E):g.type===m.POLYGON||g.type===m.MULTI_LINE_STRING?v=_.map(U):g.type===m.MULTI_POLYGON&&(v=_.map(function(J){return J.map(function(X){return U(X)})})),g.incomingCoords(v)})}var Je={onSetup:function(r){var s=this,d={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:r.featureIds||[]};return this.setSelected(d.initiallySelectedFeatureIds.filter(function(g){return s.getFeature(g)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),d},fireUpdate:function(){this.map.fire(x.UPDATE,{action:j.MOVE,features:this.getSelected().map(function(r){return r.toGeoJSON()})})},fireActionable:function(){var r=this,s=this.getSelected(),d=s.filter(function(U){return r.isInstanceOf("MultiFeature",U)}),g=!1;if(s.length>1){g=!0;var v=s[0].type.replace("Multi","");s.forEach(function(U){U.type.replace("Multi","")!==v&&(g=!1)})}var _=d.length>0,E=s.length>0;this.setActionableState({combineFeatures:g,uncombineFeatures:_,trash:E})},getUniqueIds:function(r){return r.length?r.map(function(s){return s.properties.id}).filter(function(s){return s!==void 0}).reduce(function(s,d){return s.add(d),s},new D).values():[]},stopExtendedInteractions:function(r){r.boxSelectElement&&(r.boxSelectElement.parentNode&&r.boxSelectElement.parentNode.removeChild(r.boxSelectElement),r.boxSelectElement=null),this.map.dragPan.enable(),r.boxSelecting=!1,r.canBoxSelect=!1,r.dragMoving=!1,r.canDragMove=!1},onStop:function(){pt.enable(this)},onMouseMove:function(r){return this.stopExtendedInteractions(r),!0},onMouseOut:function(r){return!r.dragMoving||this.fireUpdate()}};Je.onTap=Je.onClick=function(r,s){return Dn(s)?this.clickAnywhere(r,s):Fn(I.VERTEX)(s)?this.clickOnVertex(r,s):vr(s)?this.clickOnFeature(r,s):void 0},Je.clickAnywhere=function(r){var s=this,d=this.getSelectedIds();d.length&&(this.clearSelectedFeatures(),d.forEach(function(g){return s.doRender(g)})),pt.enable(this),this.stopExtendedInteractions(r)},Je.clickOnVertex=function(r,s){this.changeMode(w.DIRECT_SELECT,{featureId:s.featureTarget.properties.parent,coordPath:s.featureTarget.properties.coord_path,startPos:s.lngLat}),this.updateUIClasses({mouse:b.MOVE})},Je.startOnActiveFeature=function(r,s){this.stopExtendedInteractions(r),this.map.dragPan.disable(),this.doRender(s.featureTarget.properties.id),r.canDragMove=!0,r.dragMoveLocation=s.lngLat},Je.clickOnFeature=function(r,s){var d=this;pt.disable(this),this.stopExtendedInteractions(r);var g=Un(s),v=this.getSelectedIds(),_=s.featureTarget.properties.id,E=this.isSelected(_);if(!g&&E&&this.getFeature(_).type!==m.POINT)return this.changeMode(w.DIRECT_SELECT,{featureId:_});E&&g?(this.deselect(_),this.updateUIClasses({mouse:b.POINTER}),v.length===1&&pt.enable(this)):!E&&g?(this.select(_),this.updateUIClasses({mouse:b.MOVE})):E||g||(v.forEach(function(U){return d.doRender(U)}),this.setSelected(_),this.updateUIClasses({mouse:b.MOVE})),this.doRender(_)},Je.onMouseDown=function(r,s){return Vt(s)?this.startOnActiveFeature(r,s):this.drawConfig.boxSelect&&mr(s)?this.startBoxSelect(r,s):void 0},Je.startBoxSelect=function(r,s){this.stopExtendedInteractions(r),this.map.dragPan.disable(),r.boxSelectStartLocation=Li(s.originalEvent,this.map.getContainer()),r.canBoxSelect=!0},Je.onTouchStart=function(r,s){if(Vt(s))return this.startOnActiveFeature(r,s)},Je.onDrag=function(r,s){return r.canDragMove?this.dragMove(r,s):this.drawConfig.boxSelect&&r.canBoxSelect?this.whileBoxSelect(r,s):void 0},Je.whileBoxSelect=function(r,s){r.boxSelecting=!0,this.updateUIClasses({mouse:b.ADD}),r.boxSelectElement||(r.boxSelectElement=document.createElement("div"),r.boxSelectElement.classList.add(h.BOX_SELECT),this.map.getContainer().appendChild(r.boxSelectElement));var d=Li(s.originalEvent,this.map.getContainer()),g=Math.min(r.boxSelectStartLocation.x,d.x),v=Math.max(r.boxSelectStartLocation.x,d.x),_=Math.min(r.boxSelectStartLocation.y,d.y),E=Math.max(r.boxSelectStartLocation.y,d.y),U="translate("+g+"px, "+_+"px)";r.boxSelectElement.style.transform=U,r.boxSelectElement.style.WebkitTransform=U,r.boxSelectElement.style.width=v-g+"px",r.boxSelectElement.style.height=E-_+"px"},Je.dragMove=function(r,s){r.dragMoving=!0,s.originalEvent.stopPropagation();var d={lng:s.lngLat.lng-r.dragMoveLocation.lng,lat:s.lngLat.lat-r.dragMoveLocation.lat};Ai(this.getSelected(),d),r.dragMoveLocation=s.lngLat},Je.onTouchEnd=Je.onMouseUp=function(r,s){var d=this;if(r.dragMoving)this.fireUpdate();else if(r.boxSelecting){var g=[r.boxSelectStartLocation,Li(s.originalEvent,this.map.getContainer())],v=this.featuresAt(null,g,"click"),_=this.getUniqueIds(v).filter(function(E){return!d.isSelected(E)});_.length&&(this.select(_),_.forEach(function(E){return d.doRender(E)}),this.updateUIClasses({mouse:b.MOVE}))}this.stopExtendedInteractions(r)},Je.toDisplayFeatures=function(r,s,d){s.properties.active=this.isSelected(s.properties.id)?C.ACTIVE:C.INACTIVE,d(s),this.fireActionable(),s.properties.active===C.ACTIVE&&s.geometry.type!==m.POINT&&zn(s).forEach(d)},Je.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Je.onCombineFeatures=function(){var r=this.getSelected();if(!(r.length===0||r.length<2)){for(var s=[],d=[],g=r[0].type.replace("Multi",""),v=0;v<r.length;v++){var _=r[v];if(_.type.replace("Multi","")!==g)return;_.type.includes("Multi")?_.getCoordinates().forEach(function(U){s.push(U)}):s.push(_.getCoordinates()),d.push(_.toGeoJSON())}if(d.length>1){var E=this.newFeature({type:m.FEATURE,properties:d[0].properties,geometry:{type:"Multi"+g,coordinates:s}});this.addFeature(E),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([E.id]),this.map.fire(x.COMBINE_FEATURES,{createdFeatures:[E.toGeoJSON()],deletedFeatures:d})}this.fireActionable()}},Je.onUncombineFeatures=function(){var r=this,s=this.getSelected();if(s.length!==0){for(var d=[],g=[],v=function(E){var U=s[E];r.isInstanceOf("MultiFeature",U)&&(U.getFeatures().forEach(function(J){r.addFeature(J),J.properties=U.properties,d.push(J.toGeoJSON()),r.select([J.id])}),r.deleteFeature(U.id,{silent:!0}),g.push(U.toGeoJSON()))},_=0;_<s.length;_++)v(_);d.length>1&&this.map.fire(x.UNCOMBINE_FEATURES,{createdFeatures:d,deletedFeatures:g}),this.fireActionable()}};var Tr=Fn(I.VERTEX),Ga=Fn(I.MIDPOINT),Nt={fireUpdate:function(){this.map.fire(x.UPDATE,{action:j.CHANGE_COORDINATES,features:this.getSelected().map(function(r){return r.toGeoJSON()})})},fireActionable:function(r){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:r.selectedCoordPaths.length>0})},startDragging:function(r,s){this.map.dragPan.disable(),r.canDragMove=!0,r.dragMoveLocation=s.lngLat},stopDragging:function(r){this.map.dragPan.enable(),r.dragMoving=!1,r.canDragMove=!1,r.dragMoveLocation=null},onVertex:function(r,s){this.startDragging(r,s);var d=s.featureTarget.properties,g=r.selectedCoordPaths.indexOf(d.coord_path);Un(s)||g!==-1?Un(s)&&g===-1&&r.selectedCoordPaths.push(d.coord_path):r.selectedCoordPaths=[d.coord_path];var v=this.pathsToCoordinates(r.featureId,r.selectedCoordPaths);this.setSelectedCoordinates(v)},onMidpoint:function(r,s){this.startDragging(r,s);var d=s.featureTarget.properties;r.feature.addCoordinate(d.coord_path,d.lng,d.lat),this.fireUpdate(),r.selectedCoordPaths=[d.coord_path]},pathsToCoordinates:function(r,s){return s.map(function(d){return{feature_id:r,coord_path:d}})},onFeature:function(r,s){r.selectedCoordPaths.length===0?this.startDragging(r,s):this.stopDragging(r)},dragFeature:function(r,s,d){Ai(this.getSelected(),d),r.dragMoveLocation=s.lngLat},dragVertex:function(r,s,d){for(var g=r.selectedCoordPaths.map(function(U){return r.feature.getCoordinate(U)}),v=Ni(g.map(function(U){return{type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:U}}}),d),_=0;_<g.length;_++){var E=g[_];r.feature.updateCoordinate(r.selectedCoordPaths[_],E[0]+v.lng,E[1]+v.lat)}},clickNoTarget:function(){this.changeMode(w.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(w.SIMPLE_SELECT)},clickActiveFeature:function(r){r.selectedCoordPaths=[],this.clearSelectedCoordinates(),r.feature.changed()},onSetup:function(r){var s=r.featureId,d=this.getFeature(s);if(!d)throw new Error("You must provide a featureId to enter direct_select mode");if(d.type===m.POINT)throw new TypeError("direct_select mode doesn't handle point features");var g={featureId:s,feature:d,dragMoveLocation:r.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:r.coordPath?[r.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(s,g.selectedCoordPaths)),this.setSelected(s),pt.disable(this),this.setActionableState({trash:!0}),g},onStop:function(){pt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(r,s,d){r.featureId===s.properties.id?(s.properties.active=C.ACTIVE,d(s),zn(s,{map:this.map,midpoints:!0,selectedPaths:r.selectedCoordPaths}).forEach(d)):(s.properties.active=C.INACTIVE,d(s)),this.fireActionable(r)},onTrash:function(r){r.selectedCoordPaths.sort(function(s,d){return d.localeCompare(s,"en",{numeric:!0})}).forEach(function(s){return r.feature.removeCoordinate(s)}),this.fireUpdate(),r.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(r),r.feature.isValid()===!1&&(this.deleteFeature([r.featureId]),this.changeMode(w.SIMPLE_SELECT,{}))},onMouseMove:function(r,s){var d=Vt(s),g=Tr(s),v=r.selectedCoordPaths.length===0;return d&&v||g&&!v?this.updateUIClasses({mouse:b.MOVE}):this.updateUIClasses({mouse:b.NONE}),this.stopDragging(r),!0},onMouseOut:function(r){return r.dragMoving&&this.fireUpdate(),!0}};Nt.onTouchStart=Nt.onMouseDown=function(r,s){return Tr(s)?this.onVertex(r,s):Vt(s)?this.onFeature(r,s):Ga(s)?this.onMidpoint(r,s):void 0},Nt.onDrag=function(r,s){if(r.canDragMove===!0){r.dragMoving=!0,s.originalEvent.stopPropagation();var d={lng:s.lngLat.lng-r.dragMoveLocation.lng,lat:s.lngLat.lat-r.dragMoveLocation.lat};r.selectedCoordPaths.length>0?this.dragVertex(r,s,d):this.dragFeature(r,s,d),r.dragMoveLocation=s.lngLat}},Nt.onClick=function(r,s){return Dn(s)?this.clickNoTarget(r,s):Vt(s)?this.clickActiveFeature(r,s):xi(s)?this.clickInactive(r,s):void this.stopDragging(r)},Nt.onTap=function(r,s){return Dn(s)?this.clickNoTarget(r,s):Vt(s)?this.clickActiveFeature(r,s):xi(s)?this.clickInactive(r,s):void 0},Nt.onTouchEnd=Nt.onMouseUp=function(r){r.dragMoving&&this.fireUpdate(),this.stopDragging(r)};var bt={};function Hn(r,s){return!!r.lngLat&&r.lngLat.lng===s[0]&&r.lngLat.lat===s[1]}bt.onSetup=function(){var r=this.newFeature({type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:[]}});return this.addFeature(r),this.clearSelectedFeatures(),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(p.POINT),this.setActionableState({trash:!0}),{point:r}},bt.stopDrawingAndRemove=function(r){this.deleteFeature([r.point.id],{silent:!0}),this.changeMode(w.SIMPLE_SELECT)},bt.onTap=bt.onClick=function(r,s){this.updateUIClasses({mouse:b.MOVE}),r.point.updateCoordinate("",s.lngLat.lng,s.lngLat.lat),this.map.fire(x.CREATE,{features:[r.point.toGeoJSON()]}),this.changeMode(w.SIMPLE_SELECT,{featureIds:[r.point.id]})},bt.onStop=function(r){this.activateUIButton(),r.point.getCoordinate().length||this.deleteFeature([r.point.id],{silent:!0})},bt.toDisplayFeatures=function(r,s,d){var g=s.properties.id===r.point.id;if(s.properties.active=g?C.ACTIVE:C.INACTIVE,!g)return d(s)},bt.onTrash=bt.stopDrawingAndRemove,bt.onKeyUp=function(r,s){if(jn(s)||Bn(s))return this.stopDrawingAndRemove(r,s)};var Jt={onSetup:function(){var r=this.newFeature({type:m.FEATURE,properties:{},geometry:{type:m.POLYGON,coordinates:[[]]}});return this.addFeature(r),this.clearSelectedFeatures(),pt.disable(this),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(p.POLYGON),this.setActionableState({trash:!0}),{polygon:r,currentVertexPosition:0}},clickAnywhere:function(r,s){if(r.currentVertexPosition>0&&Hn(s,r.polygon.coordinates[0][r.currentVertexPosition-1]))return this.changeMode(w.SIMPLE_SELECT,{featureIds:[r.polygon.id]});this.updateUIClasses({mouse:b.ADD}),r.polygon.updateCoordinate("0."+r.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),r.currentVertexPosition++,r.polygon.updateCoordinate("0."+r.currentVertexPosition,s.lngLat.lng,s.lngLat.lat)},clickOnVertex:function(r){return this.changeMode(w.SIMPLE_SELECT,{featureIds:[r.polygon.id]})},onMouseMove:function(r,s){r.polygon.updateCoordinate("0."+r.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),pn(s)&&this.updateUIClasses({mouse:b.POINTER})}};Jt.onTap=Jt.onClick=function(r,s){return pn(s)?this.clickOnVertex(r,s):this.clickAnywhere(r,s)},Jt.onKeyUp=function(r,s){jn(s)?(this.deleteFeature([r.polygon.id],{silent:!0}),this.changeMode(w.SIMPLE_SELECT)):Bn(s)&&this.changeMode(w.SIMPLE_SELECT,{featureIds:[r.polygon.id]})},Jt.onStop=function(r){this.updateUIClasses({mouse:b.NONE}),pt.enable(this),this.activateUIButton(),this.getFeature(r.polygon.id)!==void 0&&(r.polygon.removeCoordinate("0."+r.currentVertexPosition),r.polygon.isValid()?this.map.fire(x.CREATE,{features:[r.polygon.toGeoJSON()]}):(this.deleteFeature([r.polygon.id],{silent:!0}),this.changeMode(w.SIMPLE_SELECT,{},{silent:!0})))},Jt.toDisplayFeatures=function(r,s,d){var g=s.properties.id===r.polygon.id;if(s.properties.active=g?C.ACTIVE:C.INACTIVE,!g)return d(s);if(s.geometry.coordinates.length!==0){var v=s.geometry.coordinates[0].length;if(!(v<3)){if(s.properties.meta=I.FEATURE,d(tn(r.polygon.id,s.geometry.coordinates[0][0],"0.0",!1)),v>3){var _=s.geometry.coordinates[0].length-3;d(tn(r.polygon.id,s.geometry.coordinates[0][_],"0."+_,!1))}if(v<=4){var E=[[s.geometry.coordinates[0][0][0],s.geometry.coordinates[0][0][1]],[s.geometry.coordinates[0][1][0],s.geometry.coordinates[0][1][1]]];if(d({type:m.FEATURE,properties:s.properties,geometry:{coordinates:E,type:m.LINE_STRING}}),v===3)return}return d(s)}}},Jt.onTrash=function(r){this.deleteFeature([r.polygon.id],{silent:!0}),this.changeMode(w.SIMPLE_SELECT)};var qt={onSetup:function(r){var s,d,g=(r=r||{}).featureId,v="forward";if(g){if(!(s=this.getFeature(g)))throw new Error("Could not find a feature with the provided featureId");var _=r.from;if(_&&_.type==="Feature"&&_.geometry&&_.geometry.type==="Point"&&(_=_.geometry),_&&_.type==="Point"&&_.coordinates&&_.coordinates.length===2&&(_=_.coordinates),!_||!Array.isArray(_))throw new Error("Please use the `from` property to indicate which point to continue the line from");var E=s.coordinates.length-1;if(s.coordinates[E][0]===_[0]&&s.coordinates[E][1]===_[1])d=E+1,s.addCoordinate.apply(s,[d].concat(s.coordinates[E]));else{if(s.coordinates[0][0]!==_[0]||s.coordinates[0][1]!==_[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");v="backwards",d=0,s.addCoordinate.apply(s,[d].concat(s.coordinates[0]))}}else s=this.newFeature({type:m.FEATURE,properties:{},geometry:{type:m.LINE_STRING,coordinates:[]}}),d=0,this.addFeature(s);return this.clearSelectedFeatures(),pt.disable(this),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(p.LINE),this.setActionableState({trash:!0}),{line:s,currentVertexPosition:d,direction:v}},clickAnywhere:function(r,s){if(r.currentVertexPosition>0&&Hn(s,r.line.coordinates[r.currentVertexPosition-1])||r.direction==="backwards"&&Hn(s,r.line.coordinates[r.currentVertexPosition+1]))return this.changeMode(w.SIMPLE_SELECT,{featureIds:[r.line.id]});this.updateUIClasses({mouse:b.ADD}),r.line.updateCoordinate(r.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),r.direction==="forward"?(r.currentVertexPosition++,r.line.updateCoordinate(r.currentVertexPosition,s.lngLat.lng,s.lngLat.lat)):r.line.addCoordinate(0,s.lngLat.lng,s.lngLat.lat)},clickOnVertex:function(r){return this.changeMode(w.SIMPLE_SELECT,{featureIds:[r.line.id]})},onMouseMove:function(r,s){r.line.updateCoordinate(r.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),pn(s)&&this.updateUIClasses({mouse:b.POINTER})}};qt.onTap=qt.onClick=function(r,s){if(pn(s))return this.clickOnVertex(r,s);this.clickAnywhere(r,s)},qt.onKeyUp=function(r,s){Bn(s)?this.changeMode(w.SIMPLE_SELECT,{featureIds:[r.line.id]}):jn(s)&&(this.deleteFeature([r.line.id],{silent:!0}),this.changeMode(w.SIMPLE_SELECT))},qt.onStop=function(r){pt.enable(this),this.activateUIButton(),this.getFeature(r.line.id)!==void 0&&(r.line.removeCoordinate(""+r.currentVertexPosition),r.line.isValid()?this.map.fire(x.CREATE,{features:[r.line.toGeoJSON()]}):(this.deleteFeature([r.line.id],{silent:!0}),this.changeMode(w.SIMPLE_SELECT,{},{silent:!0})))},qt.onTrash=function(r){this.deleteFeature([r.line.id],{silent:!0}),this.changeMode(w.SIMPLE_SELECT)},qt.toDisplayFeatures=function(r,s,d){var g=s.properties.id===r.line.id;if(s.properties.active=g?C.ACTIVE:C.INACTIVE,!g)return d(s);s.geometry.coordinates.length<2||(s.properties.meta=I.FEATURE,d(tn(r.line.id,s.geometry.coordinates[r.direction==="forward"?s.geometry.coordinates.length-2:1],""+(r.direction==="forward"?s.geometry.coordinates.length-2:1),!1)),d(s))};var kr={simple_select:Je,direct_select:Nt,draw_point:bt,draw_polygon:Jt,draw_line_string:qt},Va={defaultMode:w.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:gr,modes:kr,controls:{},userProperties:!1},Ja={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},qa={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Cr(r,s){return r.map(function(d){return d.source?d:Pt(d,{id:d.id+"."+s,source:s==="hot"?y.HOT:y.COLD})})}var Wn={};(function(r,s){var d="__lodash_hash_undefined__",g=9007199254740991,v="[object Arguments]",_="[object Array]",E="[object Boolean]",U="[object Date]",J="[object Error]",X="[object Function]",W="[object Map]",q="[object Number]",ae="[object Object]",Ae="[object Promise]",ue="[object RegExp]",Be="[object Set]",P="[object String]",ee="[object Symbol]",_e="[object WeakMap]",We="[object ArrayBuffer]",ze="[object DataView]",Ri=/^\[object .+?Constructor\]$/,Za=/^(?:0|[1-9]\d*)$/,Oe={};Oe["[object Float32Array]"]=Oe["[object Float64Array]"]=Oe["[object Int8Array]"]=Oe["[object Int16Array]"]=Oe["[object Int32Array]"]=Oe["[object Uint8Array]"]=Oe["[object Uint8ClampedArray]"]=Oe["[object Uint16Array]"]=Oe["[object Uint32Array]"]=!0,Oe[v]=Oe[_]=Oe[We]=Oe[E]=Oe[ze]=Oe[U]=Oe[J]=Oe[X]=Oe[W]=Oe[q]=Oe[ae]=Oe[ue]=Oe[Be]=Oe[P]=Oe[_e]=!1;var Or=typeof wn=="object"&&wn&&wn.Object===Object&&wn,Ka=typeof self=="object"&&self&&self.Object===Object&&self,kt=Or||Ka||Function("return this")(),xr=s&&!s.nodeType&&s,Lr=xr&&r&&!r.nodeType&&r,Mr=Lr&&Lr.exports===xr,Fi=Mr&&Or.process,Pr=function(){try{return Fi&&Fi.binding&&Fi.binding("util")}catch{}}(),Nr=Pr&&Pr.isTypedArray;function Qa(S,O){for(var Y=-1,ne=S==null?0:S.length;++Y<ne;)if(O(S[Y],Y,S))return!0;return!1}function $a(S){var O=-1,Y=Array(S.size);return S.forEach(function(ne,xe){Y[++O]=[xe,ne]}),Y}function el(S){var O=-1,Y=Array(S.size);return S.forEach(function(ne){Y[++O]=ne}),Y}var Ar,Rr,Fr,tl=Array.prototype,nl=Function.prototype,Zn=Object.prototype,Di=kt["__core-js_shared__"],Dr=nl.toString,_t=Zn.hasOwnProperty,Ur=(Ar=/[^.]+$/.exec(Di&&Di.keys&&Di.keys.IE_PROTO||""))?"Symbol(src)_1."+Ar:"",jr=Zn.toString,il=RegExp("^"+Dr.call(_t).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Br=Mr?kt.Buffer:void 0,Kn=kt.Symbol,zr=kt.Uint8Array,Gr=Zn.propertyIsEnumerable,rl=tl.splice,Yt=Kn?Kn.toStringTag:void 0,Vr=Object.getOwnPropertySymbols,ol=Br?Br.isBuffer:void 0,al=(Rr=Object.keys,Fr=Object,function(S){return Rr(Fr(S))}),Ui=rn(kt,"DataView"),mn=rn(kt,"Map"),ji=rn(kt,"Promise"),Bi=rn(kt,"Set"),zi=rn(kt,"WeakMap"),vn=rn(Object,"create"),ll=Xt(Ui),sl=Xt(mn),ul=Xt(ji),fl=Xt(Bi),cl=Xt(zi),Jr=Kn?Kn.prototype:void 0,Gi=Jr?Jr.valueOf:void 0;function Ht(S){var O=-1,Y=S==null?0:S.length;for(this.clear();++O<Y;){var ne=S[O];this.set(ne[0],ne[1])}}function Ct(S){var O=-1,Y=S==null?0:S.length;for(this.clear();++O<Y;){var ne=S[O];this.set(ne[0],ne[1])}}function Wt(S){var O=-1,Y=S==null?0:S.length;for(this.clear();++O<Y;){var ne=S[O];this.set(ne[0],ne[1])}}function Qn(S){var O=-1,Y=S==null?0:S.length;for(this.__data__=new Wt;++O<Y;)this.add(S[O])}function At(S){var O=this.__data__=new Ct(S);this.size=O.size}function dl(S,O){var Y=ti(S),ne=!Y&&vl(S),xe=!Y&&!ne&&Vi(S),me=!Y&&!ne&&!xe&&$r(S),Ue=Y||ne||xe||me,Ge=Ue?function(Ye,yt){for(var It=-1,$e=Array(Ye);++It<Ye;)$e[It]=yt(It);return $e}(S.length,String):[],gt=Ge.length;for(var qe in S)!O&&!_t.call(S,qe)||Ue&&(qe=="length"||xe&&(qe=="offset"||qe=="parent")||me&&(qe=="buffer"||qe=="byteLength"||qe=="byteOffset")||ml(qe,gt))||Ge.push(qe);return Ge}function $n(S,O){for(var Y=S.length;Y--;)if(Xr(S[Y][0],O))return Y;return-1}function bn(S){return S==null?S===void 0?"[object Undefined]":"[object Null]":Yt&&Yt in Object(S)?function(O){var Y=_t.call(O,Yt),ne=O[Yt];try{O[Yt]=void 0;var xe=!0}catch{}var me=jr.call(O);return xe&&(Y?O[Yt]=ne:delete O[Yt]),me}(S):function(O){return jr.call(O)}(S)}function qr(S){return _n(S)&&bn(S)==v}function Yr(S,O,Y,ne,xe){return S===O||(S==null||O==null||!_n(S)&&!_n(O)?S!=S&&O!=O:function(me,Ue,Ge,gt,qe,Ye){var yt=ti(me),It=ti(Ue),$e=yt?_:Rt(me),Ot=It?_:Rt(Ue),on=($e=$e==v?ae:$e)==ae,ni=(Ot=Ot==v?ae:Ot)==ae,an=$e==Ot;if(an&&Vi(me)){if(!Vi(Ue))return!1;yt=!0,on=!1}if(an&&!on)return Ye||(Ye=new At),yt||$r(me)?Hr(me,Ue,Ge,gt,qe,Ye):function(Ee,ye,ii,Ft,Ji,dt,xt){switch(ii){case ze:if(Ee.byteLength!=ye.byteLength||Ee.byteOffset!=ye.byteOffset)return!1;Ee=Ee.buffer,ye=ye.buffer;case We:return!(Ee.byteLength!=ye.byteLength||!dt(new zr(Ee),new zr(ye)));case E:case U:case q:return Xr(+Ee,+ye);case J:return Ee.name==ye.name&&Ee.message==ye.message;case ue:case P:return Ee==ye+"";case W:var Dt=$a;case Be:var En=1&Ft;if(Dt||(Dt=el),Ee.size!=ye.size&&!En)return!1;var ri=xt.get(Ee);if(ri)return ri==ye;Ft|=2,xt.set(Ee,ye);var ln=Hr(Dt(Ee),Dt(ye),Ft,Ji,dt,xt);return xt.delete(Ee),ln;case ee:if(Gi)return Gi.call(Ee)==Gi.call(ye)}return!1}(me,Ue,$e,Ge,gt,qe,Ye);if(!(1&Ge)){var yn=on&&_t.call(me,"__wrapped__"),eo=ni&&_t.call(Ue,"__wrapped__");if(yn||eo){var _l=yn?me.value():me,yl=eo?Ue.value():Ue;return Ye||(Ye=new At),qe(_l,yl,Ge,gt,Ye)}}return an?(Ye||(Ye=new At),function(Ee,ye,ii,Ft,Ji,dt){var xt=1&ii,Dt=Wr(Ee),En=Dt.length,ri=Wr(ye).length;if(En!=ri&&!xt)return!1;for(var ln=En;ln--;){var Zt=Dt[ln];if(!(xt?Zt in ye:_t.call(ye,Zt)))return!1}var to=dt.get(Ee);if(to&&dt.get(ye))return to==ye;var oi=!0;dt.set(Ee,ye),dt.set(ye,Ee);for(var qi=xt;++ln<En;){var ai=Ee[Zt=Dt[ln]],li=ye[Zt];if(Ft)var no=xt?Ft(li,ai,Zt,ye,Ee,dt):Ft(ai,li,Zt,Ee,ye,dt);if(!(no===void 0?ai===li||Ji(ai,li,ii,Ft,dt):no)){oi=!1;break}qi||(qi=Zt=="constructor")}if(oi&&!qi){var si=Ee.constructor,ui=ye.constructor;si==ui||!("constructor"in Ee)||!("constructor"in ye)||typeof si=="function"&&si instanceof si&&typeof ui=="function"&&ui instanceof ui||(oi=!1)}return dt.delete(Ee),dt.delete(ye),oi}(me,Ue,Ge,gt,qe,Ye)):!1}(S,O,Y,ne,Yr,xe))}function hl(S){return!(!Qr(S)||function(O){return!!Ur&&Ur in O}(S))&&(Zr(S)?il:Ri).test(Xt(S))}function pl(S){if(Y=(O=S)&&O.constructor,ne=typeof Y=="function"&&Y.prototype||Zn,O!==ne)return al(S);var O,Y,ne,xe=[];for(var me in Object(S))_t.call(S,me)&&me!="constructor"&&xe.push(me);return xe}function Hr(S,O,Y,ne,xe,me){var Ue=1&Y,Ge=S.length,gt=O.length;if(Ge!=gt&&!(Ue&&gt>Ge))return!1;var qe=me.get(S);if(qe&&me.get(O))return qe==O;var Ye=-1,yt=!0,It=2&Y?new Qn:void 0;for(me.set(S,O),me.set(O,S);++Ye<Ge;){var $e=S[Ye],Ot=O[Ye];if(ne)var on=Ue?ne(Ot,$e,Ye,O,S,me):ne($e,Ot,Ye,S,O,me);if(on!==void 0){if(on)continue;yt=!1;break}if(It){if(!Qa(O,function(ni,an){if(yn=an,!It.has(yn)&&($e===ni||xe($e,ni,Y,ne,me)))return It.push(an);var yn})){yt=!1;break}}else if($e!==Ot&&!xe($e,Ot,Y,ne,me)){yt=!1;break}}return me.delete(S),me.delete(O),yt}function Wr(S){return function(O,Y,ne){var xe=Y(O);return ti(O)?xe:function(me,Ue){for(var Ge=-1,gt=Ue.length,qe=me.length;++Ge<gt;)me[qe+Ge]=Ue[Ge];return me}(xe,ne(O))}(S,bl,gl)}function ei(S,O){var Y,ne,xe=S.__data__;return((ne=typeof(Y=O))=="string"||ne=="number"||ne=="symbol"||ne=="boolean"?Y!=="__proto__":Y===null)?xe[typeof O=="string"?"string":"hash"]:xe.map}function rn(S,O){var Y=function(ne,xe){return ne==null?void 0:ne[xe]}(S,O);return hl(Y)?Y:void 0}Ht.prototype.clear=function(){this.__data__=vn?vn(null):{},this.size=0},Ht.prototype.delete=function(S){var O=this.has(S)&&delete this.__data__[S];return this.size-=O?1:0,O},Ht.prototype.get=function(S){var O=this.__data__;if(vn){var Y=O[S];return Y===d?void 0:Y}return _t.call(O,S)?O[S]:void 0},Ht.prototype.has=function(S){var O=this.__data__;return vn?O[S]!==void 0:_t.call(O,S)},Ht.prototype.set=function(S,O){var Y=this.__data__;return this.size+=this.has(S)?0:1,Y[S]=vn&&O===void 0?d:O,this},Ct.prototype.clear=function(){this.__data__=[],this.size=0},Ct.prototype.delete=function(S){var O=this.__data__,Y=$n(O,S);return!(Y<0)&&(Y==O.length-1?O.pop():rl.call(O,Y,1),--this.size,!0)},Ct.prototype.get=function(S){var O=this.__data__,Y=$n(O,S);return Y<0?void 0:O[Y][1]},Ct.prototype.has=function(S){return $n(this.__data__,S)>-1},Ct.prototype.set=function(S,O){var Y=this.__data__,ne=$n(Y,S);return ne<0?(++this.size,Y.push([S,O])):Y[ne][1]=O,this},Wt.prototype.clear=function(){this.size=0,this.__data__={hash:new Ht,map:new(mn||Ct),string:new Ht}},Wt.prototype.delete=function(S){var O=ei(this,S).delete(S);return this.size-=O?1:0,O},Wt.prototype.get=function(S){return ei(this,S).get(S)},Wt.prototype.has=function(S){return ei(this,S).has(S)},Wt.prototype.set=function(S,O){var Y=ei(this,S),ne=Y.size;return Y.set(S,O),this.size+=Y.size==ne?0:1,this},Qn.prototype.add=Qn.prototype.push=function(S){return this.__data__.set(S,d),this},Qn.prototype.has=function(S){return this.__data__.has(S)},At.prototype.clear=function(){this.__data__=new Ct,this.size=0},At.prototype.delete=function(S){var O=this.__data__,Y=O.delete(S);return this.size=O.size,Y},At.prototype.get=function(S){return this.__data__.get(S)},At.prototype.has=function(S){return this.__data__.has(S)},At.prototype.set=function(S,O){var Y=this.__data__;if(Y instanceof Ct){var ne=Y.__data__;if(!mn||ne.length<199)return ne.push([S,O]),this.size=++Y.size,this;Y=this.__data__=new Wt(ne)}return Y.set(S,O),this.size=Y.size,this};var gl=Vr?function(S){return S==null?[]:(S=Object(S),function(O,Y){for(var ne=-1,xe=O==null?0:O.length,me=0,Ue=[];++ne<xe;){var Ge=O[ne];Y(Ge,ne,O)&&(Ue[me++]=Ge)}return Ue}(Vr(S),function(O){return Gr.call(S,O)}))}:function(){return[]},Rt=bn;function ml(S,O){return!!(O=O??g)&&(typeof S=="number"||Za.test(S))&&S>-1&&S%1==0&&S<O}function Xt(S){if(S!=null){try{return Dr.call(S)}catch{}try{return S+""}catch{}}return""}function Xr(S,O){return S===O||S!=S&&O!=O}(Ui&&Rt(new Ui(new ArrayBuffer(1)))!=ze||mn&&Rt(new mn)!=W||ji&&Rt(ji.resolve())!=Ae||Bi&&Rt(new Bi)!=Be||zi&&Rt(new zi)!=_e)&&(Rt=function(S){var O=bn(S),Y=O==ae?S.constructor:void 0,ne=Y?Xt(Y):"";if(ne)switch(ne){case ll:return ze;case sl:return W;case ul:return Ae;case fl:return Be;case cl:return _e}return O});var vl=qr(function(){return arguments}())?qr:function(S){return _n(S)&&_t.call(S,"callee")&&!Gr.call(S,"callee")},ti=Array.isArray,Vi=ol||function(){return!1};function Zr(S){if(!Qr(S))return!1;var O=bn(S);return O==X||O=="[object GeneratorFunction]"||O=="[object AsyncFunction]"||O=="[object Proxy]"}function Kr(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=g}function Qr(S){var O=typeof S;return S!=null&&(O=="object"||O=="function")}function _n(S){return S!=null&&typeof S=="object"}var $r=Nr?function(S){return function(O){return S(O)}}(Nr):function(S){return _n(S)&&Kr(S.length)&&!!Oe[bn(S)]};function bl(S){return(O=S)!=null&&Kr(O.length)&&!Zr(O)?dl(S):pl(S);var O}r.exports=function(S,O){return Yr(S,O)}})({get exports(){return Wn},set exports(r){Wn=r}},Wn);var Ya=Wn;function Ir(r,s){return r.length===s.length&&JSON.stringify(r.map(function(d){return d}).sort())===JSON.stringify(s.map(function(d){return d}).sort())}var Ha={Polygon:ot,LineString:se,Point:k,MultiPolygon:Ze,MultiLineString:Ze,MultiPoint:Ze},Wa=Object.freeze({__proto__:null,CommonSelectors:xa,constrainFeatureMovement:Ni,createMidPoint:br,createSupplementaryPoints:zn,createVertex:tn,doubleClickZoom:pt,euclideanDistance:ke,featuresAt:R,getFeatureAtAndSetCursors:je,isClick:Ce,isEventAtCoordinates:Hn,isTap:Fe,mapEventToBoundingBox:le,ModeHandler:t,moveFeatures:Ai,sortFeatures:oe,stringSetsAreEqual:Ir,StringSet:D,theme:gr,toDenseArray:hn}),Xa=function(r,s){var d={options:r=function(v){v===void 0&&(v={});var _=Pt(v);return v.controls||(_.controls={}),v.displayControlsDefault===!1?_.controls=Pt(qa,v.controls):_.controls=Pt(Ja,v.controls),(_=Pt(Va,_)).styles=Cr(_.styles,"cold").concat(Cr(_.styles,"hot")),_}(r)};s=function(v,_){return _.modes=w,_.getFeatureIdsAt=function(E){return R.click({point:E},null,v).map(function(U){return U.properties.id})},_.getSelectedIds=function(){return v.store.getSelectedIds()},_.getSelected=function(){return{type:m.FEATURE_COLLECTION,features:v.store.getSelectedIds().map(function(E){return v.store.get(E)}).map(function(E){return E.toGeoJSON()})}},_.getSelectedPoints=function(){return{type:m.FEATURE_COLLECTION,features:v.store.getSelectedCoordinates().map(function(E){return{type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:E.coordinates}}})}},_.set=function(E){if(E.type===void 0||E.type!==m.FEATURE_COLLECTION||!Array.isArray(E.features))throw new Error("Invalid FeatureCollection");var U=v.store.createRenderBatch(),J=v.store.getAllIds().slice(),X=_.add(E),W=new D(X);return(J=J.filter(function(q){return!W.has(q)})).length&&_.delete(J),U(),X},_.add=function(E){var U=JSON.parse(JSON.stringify(_r(E))).features.map(function(J){if(J.id=J.id||Le(),J.geometry===null)throw new Error("Invalid geometry: null");if(v.store.get(J.id)===void 0||v.store.get(J.id).type!==J.geometry.type){var X=Ha[J.geometry.type];if(X===void 0)throw new Error("Invalid geometry type: "+J.geometry.type+".");var W=new X(v,J);v.store.add(W)}else{var q=v.store.get(J.id);q.properties=J.properties,Ya(q.getCoordinates(),J.geometry.coordinates)||q.incomingCoords(J.geometry.coordinates)}return J.id});return v.store.render(),U},_.get=function(E){var U=v.store.get(E);if(U)return U.toGeoJSON()},_.getAll=function(){return{type:m.FEATURE_COLLECTION,features:v.store.getAll().map(function(E){return E.toGeoJSON()})}},_.delete=function(E){return v.store.delete(E,{silent:!0}),_.getMode()!==w.DIRECT_SELECT||v.store.getSelectedIds().length?v.store.render():v.events.changeMode(w.SIMPLE_SELECT,void 0,{silent:!0}),_},_.deleteAll=function(){return v.store.delete(v.store.getAllIds(),{silent:!0}),_.getMode()===w.DIRECT_SELECT?v.events.changeMode(w.SIMPLE_SELECT,void 0,{silent:!0}):v.store.render(),_},_.changeMode=function(E,U){return U===void 0&&(U={}),E===w.SIMPLE_SELECT&&_.getMode()===w.SIMPLE_SELECT?(Ir(U.featureIds||[],v.store.getSelectedIds())||(v.store.setSelected(U.featureIds,{silent:!0}),v.store.render()),_):(E===w.DIRECT_SELECT&&_.getMode()===w.DIRECT_SELECT&&U.featureId===v.store.getSelectedIds()[0]||v.events.changeMode(E,U,{silent:!0}),_)},_.getMode=function(){return v.events.getMode()},_.trash=function(){return v.events.trash({silent:!0}),_},_.combineFeatures=function(){return v.events.combineFeatures({silent:!0}),_},_.uncombineFeatures=function(){return v.events.uncombineFeatures({silent:!0}),_},_.setFeatureProperty=function(E,U,J){return v.store.setFeatureProperty(E,U,J),_},_}(d,s),d.api=s;var g=Oa(d);return s.onAdd=g.onAdd,s.onRemove=g.onRemove,s.types=p,s.options=r,s};function Xn(r){Xa(r,this)}return Xn.modes=kr,Xn.constants=F,Xn.lib=Wa,Xn})})(Au);const ia=Ol(ir);let Se;const ba=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});ba.decode();let pi=new Uint8Array;function On(){return pi.byteLength===0&&(pi=new Uint8Array(Se.memory.buffer)),pi}function xn(n,e){return ba.decode(On().subarray(n,n+e))}const Mt=new Array(32).fill(void 0);Mt.push(void 0,null,!0,!1);let Ln=Mt.length;function ra(n){Ln===Mt.length&&Mt.push(Mt.length+1);const e=Ln;return Ln=Mt[e],Mt[e]=n,e}function rr(n){return Mt[n]}function Ru(n){n<36||(Mt[n]=Ln,Ln=n)}function _a(n){const e=rr(n);return Ru(n),e}let Pn=0;function Fu(n,e){const t=e(n.length*1);return On().set(n,t/1),Pn=n.length,t}let gi=new Int32Array;function Lt(){return gi.byteLength===0&&(gi=new Int32Array(Se.memory.buffer)),gi}const mi=new TextEncoder("utf-8"),Du=typeof mi.encodeInto=="function"?function(n,e){return mi.encodeInto(n,e)}:function(n,e){const t=mi.encode(n);return e.set(t),{read:n.length,written:t.length}};function Uu(n,e,t){if(t===void 0){const u=mi.encode(n),c=e(u.length);return On().subarray(c,c+u.length).set(u),Pn=u.length,c}let i=n.length,o=e(i);const a=On();let l=0;for(;l<i;l++){const u=n.charCodeAt(l);if(u>127)break;a[o+l]=u}if(l!==i){l!==0&&(n=n.slice(l)),o=t(o,i,i=l+n.length*3);const u=On().subarray(o+l,o+i),c=Du(n,u);l+=c.written}return Pn=l,o}class wi{static __wrap(e){const t=Object.create(wi.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();Se.__wbg_jsroutesnapper_free(e)}constructor(e){try{const a=Se.__wbindgen_add_to_stack_pointer(-16),l=Fu(e,Se.__wbindgen_malloc),u=Pn;Se.jsroutesnapper_new(a,l,u);var t=Lt()[a/4+0],i=Lt()[a/4+1],o=Lt()[a/4+2];if(o)throw _a(i);return wi.__wrap(t)}finally{Se.__wbindgen_add_to_stack_pointer(16)}}toFinalFeature(){try{const i=Se.__wbindgen_add_to_stack_pointer(-16);Se.jsroutesnapper_toFinalFeature(i,this.ptr);var e=Lt()[i/4+0],t=Lt()[i/4+1];let o;return e!==0&&(o=xn(e,t).slice(),Se.__wbindgen_free(e,t*1)),o}finally{Se.__wbindgen_add_to_stack_pointer(16)}}renderGeojson(){try{const i=Se.__wbindgen_add_to_stack_pointer(-16);Se.jsroutesnapper_renderGeojson(i,this.ptr);var e=Lt()[i/4+0],t=Lt()[i/4+1];return xn(e,t)}finally{Se.__wbindgen_add_to_stack_pointer(16),Se.__wbindgen_free(e,t)}}setSnapMode(e){Se.jsroutesnapper_setSnapMode(this.ptr,e)}onMouseMove(e,t,i){return Se.jsroutesnapper_onMouseMove(this.ptr,e,t,i)!==0}onClick(){Se.jsroutesnapper_onClick(this.ptr)}onDragStart(){return Se.jsroutesnapper_onDragStart(this.ptr)!==0}onMouseUp(){return Se.jsroutesnapper_onMouseUp(this.ptr)!==0}clearState(){Se.jsroutesnapper_clearState(this.ptr)}}async function ju(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(i){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i);else throw i}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function Bu(){const n={};return n.wbg={},n.wbg.__wbindgen_string_new=function(e,t){const i=xn(e,t);return ra(i)},n.wbg.__wbindgen_object_drop_ref=function(e){_a(e)},n.wbg.__wbg_log_4b5638ad60bdc54a=function(e){console.log(rr(e))},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return ra(e)},n.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const i=rr(t).stack,o=Uu(i,Se.__wbindgen_malloc,Se.__wbindgen_realloc),a=Pn;Lt()[e/4+1]=a,Lt()[e/4+0]=o},n.wbg.__wbg_error_f851667af71bcfc6=function(e,t){try{console.error(xn(e,t))}finally{Se.__wbindgen_free(e,t)}},n.wbg.__wbindgen_throw=function(e,t){throw new Error(xn(e,t))},n}function zu(n,e){return Se=n.exports,ya.__wbindgen_wasm_module=e,gi=new Int32Array,pi=new Uint8Array,Se}async function ya(n){typeof n>"u"&&(n="/atip/assets/route_snapper_bg.wasm");const e=Bu();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:i}=await ju(await n,e);return zu(t,i)}var An,or,ki,Ea,Rn,ar,jt,un;class Gu{constructor(e,t,i){Sn(this,An);Sn(this,ki);Sn(this,Rn);Sn(this,jt);this.controlDiv=i,this.map=e,console.time("Deserialize and setup JsRouteSnapper"),this.inner=new wi(t),console.timeEnd("Deserialize and setup JsRouteSnapper"),console.log("JsRouteSnapper ready, waiting for idle event"),this.active=!1,this.map.once("idle",()=>{console.log("JsRouteSnapper now usable"),this.map.addSource("route-snapper",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:"route-points",type:"circle",source:"route-snapper",paint:{"circle-radius":["match",["get","type"],"unimportant",10/2,10],"circle-color":["match",["get","type"],"hovered","green","important","red","black"]},filter:["in","$type","Point"]}),this.map.addLayer({id:"route-lines",type:"line",source:"route-snapper",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"black","line-width":2.5},filter:["in","$type","LineString"]}),this.map.on("mousemove",l=>{if(!this.active)return;const u={x:l.point.x-30,y:l.point.y},c=this.map.unproject(l.point).distanceTo(this.map.unproject(u));this.inner.onMouseMove(l.lngLat.lng,l.lngLat.lat,c)&&mt(this,jt,un).call(this)}),this.map.on("click",()=>{this.active&&(this.inner.onClick(),mt(this,jt,un).call(this))}),this.map.on("dragstart",l=>{this.active&&this.inner.onDragStart()&&this.map.dragPan.disable()}),this.map.on("mouseup",l=>{this.active&&this.inner.onMouseUp()&&this.map.dragPan.enable()}),document.addEventListener("keypress",l=>{this.active&&l.key=="Enter"&&(l.preventDefault(),mt(this,Rn,ar).call(this))}),document.addEventListener("keydown",l=>{this.active&&l.key=="Shift"&&(l.preventDefault(),this.inner.setSnapMode(!1),mt(this,jt,un).call(this))}),document.addEventListener("keyup",l=>{this.active&&l.key=="Shift"&&(l.preventDefault(),this.inner.setSnapMode(!0),mt(this,jt,un).call(this))}),mt(this,An,or).call(this)})}isActive(){return this.active}tearDown(){this.map.removeLayer("route-points"),this.map.removeLayer("route-lines"),this.map.removeSource("route-snapper")}}An=new WeakSet,or=function(){this.active=!1,this.inner.clearState(),mt(this,jt,un).call(this),this.controlDiv.innerHTML="";var e=document.createElement("button");e.innerText="Route tool",e.type="button",e.onclick=()=>{mt(this,ki,Ea).call(this)},this.controlDiv.appendChild(e)},ki=new WeakSet,Ea=function(){this.active=!0,this.controlDiv.dispatchEvent(new CustomEvent("activate")),this.controlDiv.innerHTML="";var e=document.createElement("button");e.type="button",e.innerText="Finish route",e.onclick=()=>{mt(this,Rn,ar).call(this)},this.controlDiv.appendChild(e);const t=document.createElement("ul");t.innerHTML="<li><b>Click</b> green points on the transport network</br>to create snapped routes</li><li>Hold <b>Shift</b> to draw a point anywhere</li><li><b>Click and drag</b> any point to move it</li><li><b>Click</b> a red waypoint to delete it</li><li>Press <b>Enter</b> to finish route</li>",this.controlDiv.appendChild(t)},Rn=new WeakSet,ar=function(){const e=this.inner.toFinalFeature();e?this.controlDiv.dispatchEvent(new CustomEvent("new-route",{detail:JSON.parse(e)})):this.controlDiv.dispatchEvent(new CustomEvent("no-new-route")),mt(this,An,or).call(this)},jt=new WeakSet,un=function(){this.map.getSource("route-snapper").setData(JSON.parse(this.inner.renderGeojson()))};async function Vu(n,e){const t=await fetch(n),i=t.body.getReader(),o=t.headers.get("Content-Length");let a=0,l=[];for(;;){const{done:f,value:h}=await i.read();if(f)break;l.push(h),a+=h.length;const y=100*a/o;e.style=`background: linear-gradient(to right, red ${y}%, transparent 0);`}let u=new Uint8Array(a),c=0;for(let f of l)u.set(f,c),c+=f.length;return u}const we=dn(cn()),Nn=dn(null),lr=dn(null);function cn(){return{type:"FeatureCollection",features:[]}}const hr=ha(we,n=>{let e=n.features.find(t=>t.properties.editing);return e?e.id:null});function Ju(n){we.update(e=>{for(let t of e.features)t.id==n?t.properties.editing=!0:delete t.properties.editing;return e})}function Sa(){we.update(n=>(n.features.forEach(e=>{delete e.properties.editing}),n))}function qu(n){let e,t,i,o;return{c(){e=V("div"),e.textContent="Add intervention",t=Z(),i=V("div"),o=V("div"),o.textContent="Route tool loading...",K(e,"class","header svelte-15ile5d"),K(i,"class","route-container svelte-15ile5d")},m(a,l){L(a,e,l),L(a,t,l),L(a,i,l),B(i,o),n[3](o),n[4](i)},p:He,i:He,o:He,d(a){a&&M(e),a&&M(t),a&&M(i),n[3](null),n[4](null)}}}const di="black",oa=7,aa=10;function Yu(n,e,t){let i;St(n,we,w=>t(8,i=w));const{getMap:o}=Kt("map"),a=[{id:"base-points",filter:["all",yi,["==","meta","feature"]],...Si(di,oa)},{id:"draggable-points",filter:["all",yi,["!=","meta","feature"]],...Si("blue",1.5*oa)},{id:"base-line",filter:dr,...Ei(di,aa)},{id:"base-polygon-fill",filter:_i,...Ii(di,.1)},{id:"base-polygon-outline",filter:_i,...Ei(di,aa/2)}];let{url:l}=e,u,c,f,h;Qt(async()=>{const w=o();f=new ia({displayControlsDefault:!1,controls:{point:!0,polygon:!0},modes:Object.assign({static:b},ia.modes),styles:a}),w.addControl(f),await y(w),w.on("draw.create",x=>{const j=x.features[0];j.geometry.type=="Polygon"?j.properties.intervention_type="area":j.properties.intervention_type="other",we.update(I=>(I.features.push(j),I))}),w.on("draw.update",x=>{const j=x.features[0];we.update(I=>{const C=I.features.find(A=>A.id==j.id);return C.geometry=j.geometry,I})}),w.on("draw.selectionchange",x=>{x.features.length==1&&(!h||!h.isActive())?Ju(x.features[0].id):x.features.length==0&&Sa()}),we.subscribe(x=>{f.set(x)}),w.on("mousemove",x=>{var j=null;if(h&&!h.isActive()){const I=f.getFeatureIdsAt(x.point);I.length>0&&(j=I[0]),lr.set(j)}}),w.on("mouseout",()=>{lr.set(null)}),hr.subscribe(x=>{if(x){let j=i.features.find(I=>I.id==x);j.geometry.type!="Point"&&f.changeMode("direct_select",{featureId:j.id})}})}),ca(()=>{o().removeControl(f),h.tearDown()});async function y(w){await ya(),console.log(`Grabbing ${l}`);try{const x=await Vu(l,c);h=new Gu(w,x,u)}catch(x){console.log(`Route tool broke: ${x}`),t(0,u.innerHTML="Failed to load",u)}u.addEventListener("activate",()=>{f.changeMode("static")}),u.addEventListener("no-new-route",()=>{f.changeMode("simple_select")}),u.addEventListener("new-route",x=>{const j=x.detail,I=f.add(j);j.id=I[0],j.properties.intervention_type="route",we.update(C=>(C.features.push(j),C)),f.changeMode("direct_select",{featureId:j.id})})}let b={};b.onSetup=function(){return this.setActionableState(),{}},b.toDisplayFeatures=function(w,x,j){j(x)};function p(w){Ke[w?"unshift":"push"](()=>{c=w,t(1,c)})}function m(w){Ke[w?"unshift":"push"](()=>{u=w,t(0,u)})}return n.$$set=w=>{"url"in w&&t(2,l=w.url)},[u,c,l,p,m]}class Hu extends Me{constructor(e){super(),Pe(this,e,Yu,qu,Ne,{url:2})}}function Wu(n){let e,t,i,o,a,l,u,c;return e=new ci({props:{labelText:"Area",value:"area"}}),i=new ci({props:{labelText:"Route",value:"route"}}),a=new ci({props:{labelText:"Crossing",value:"crossing"}}),u=new ci({props:{labelText:"Other",value:"other"}}),{c(){de(e.$$.fragment),t=Z(),de(i.$$.fragment),o=Z(),de(a.$$.fragment),l=Z(),de(u.$$.fragment)},m(f,h){he(e,f,h),L(f,t,h),he(i,f,h),L(f,o,h),he(a,f,h),L(f,l,h),he(u,f,h),c=!0},p:He,i(f){c||(G(e.$$.fragment,f),G(i.$$.fragment,f),G(a.$$.fragment,f),G(u.$$.fragment,f),c=!0)},o(f){H(e.$$.fragment,f),H(i.$$.fragment,f),H(a.$$.fragment,f),H(u.$$.fragment,f),c=!1},d(f){pe(e,f),f&&M(t),pe(i,f),f&&M(o),pe(a,f),f&&M(l),pe(u,f)}}}function Xu(n){let e,t,i,o,a,l,u,c,f,h,y,b,p,m,w,x,j,I,C,A,N,F;function ge(R){n[5](R)}let z={labelText:"Name"};n[0]!==void 0&&(z.value=n[0]),e=new js({props:z}),Ke.push(()=>wt(e,"value",ge,n[0]));function oe(R){n[6](R)}let le={$$slots:{default:[Wu]},$$scope:{ctx:n}};n[1]!==void 0&&(le.selected=n[1]),l=new ks({props:le}),Ke.push(()=>wt(l,"selected",oe,n[1]));function D(R){n[7](R)}let te={labelText:"Description"};return n[2]!==void 0&&(te.value=n[2]),y=new Ms({props:te}),Ke.push(()=>wt(y,"value",D,n[2])),{c(){de(e.$$.fragment),i=Z(),o=V("br"),a=Z(),de(l.$$.fragment),c=Z(),f=V("br"),h=Z(),de(y.$$.fragment),p=Z(),m=V("br"),w=Z(),x=V("div"),j=V("button"),j.textContent="Delete",I=Z(),C=V("button"),C.textContent="Save",K(j,"type","button"),K(C,"type","button"),Zi(C,"float","right")},m(R,re){he(e,R,re),L(R,i,re),L(R,o,re),L(R,a,re),he(l,R,re),L(R,c,re),L(R,f,re),L(R,h,re),he(y,R,re),L(R,p,re),L(R,m,re),L(R,w,re),L(R,x,re),B(x,j),B(x,I),B(x,C),A=!0,N||(F=[$(j,"click",n[3]),$(C,"click",Sa)],N=!0)},p(R,[re]){const je={};!t&&re&1&&(t=!0,je.value=R[0],Tt(()=>t=!1)),e.$set(je);const ke={};re&256&&(ke.$$scope={dirty:re,ctx:R}),!u&&re&2&&(u=!0,ke.selected=R[1],Tt(()=>u=!1)),l.$set(ke);const Ce={};!b&&re&4&&(b=!0,Ce.value=R[2],Tt(()=>b=!1)),y.$set(Ce)},i(R){A||(G(e.$$.fragment,R),G(l.$$.fragment,R),G(y.$$.fragment,R),A=!0)},o(R){H(e.$$.fragment,R),H(l.$$.fragment,R),H(y.$$.fragment,R),A=!1},d(R){pe(e,R),R&&M(i),R&&M(o),R&&M(a),pe(l,R),R&&M(c),R&&M(f),R&&M(h),pe(y,R),R&&M(p),R&&M(m),R&&M(w),R&&M(x),N=!1,ft(F)}}}function Zu(n,e,t){let{id:i}=e,{name:o}=e,{intervention_type:a}=e,{description:l}=e;function u(){we.update(y=>(y.features=y.features.filter(b=>b.id!=i),y))}function c(y){o=y,t(0,o)}function f(y){a=y,t(1,a)}function h(y){l=y,t(2,l)}return n.$$set=y=>{"id"in y&&t(4,i=y.id),"name"in y&&t(0,o=y.name),"intervention_type"in y&&t(1,a=y.intervention_type),"description"in y&&t(2,l=y.description)},[o,a,l,u,i,c,f,h]}class Ku extends Me{constructor(e){super(),Pe(this,e,Zu,Xu,Ne,{id:4,name:0,intervention_type:1,description:2})}}function la(n,e,t){const i=n.slice();return i[10]=e[t],i[11]=e,i[12]=t,i}function Qu(n){let e,t,i,o,a,l;function u(y){n[5](y,n[10])}function c(y){n[6](y,n[10])}function f(y){n[7](y,n[10])}let h={id:n[10].id};return n[10].properties.name!==void 0&&(h.name=n[10].properties.name),n[10].properties.intervention_type!==void 0&&(h.intervention_type=n[10].properties.intervention_type),n[10].properties.description!==void 0&&(h.description=n[10].properties.description),e=new Ku({props:h}),Ke.push(()=>wt(e,"name",u,n[10].properties.name)),Ke.push(()=>wt(e,"intervention_type",c,n[10].properties.intervention_type)),Ke.push(()=>wt(e,"description",f,n[10].properties.description)),{c(){de(e.$$.fragment),a=Z()},m(y,b){he(e,y,b),L(y,a,b),l=!0},p(y,b){n=y;const p={};b&1&&(p.id=n[10].id),!t&&b&1&&(t=!0,p.name=n[10].properties.name,Tt(()=>t=!1)),!i&&b&1&&(i=!0,p.intervention_type=n[10].properties.intervention_type,Tt(()=>i=!1)),!o&&b&1&&(o=!0,p.description=n[10].properties.description,Tt(()=>o=!1)),e.$set(p)},i(y){l||(G(e.$$.fragment,y),l=!0)},o(y){H(e.$$.fragment,y),l=!1},d(y){pe(e,y),y&&M(a)}}}function $u(n){let e=n[12]+1+"",t,i,o=Ti(n[10])+"",a;return{c(){t=ve(e),i=ve(") "),a=ve(o)},m(l,u){L(l,t,u),L(l,i,u),L(l,a,u)},p(l,u){u&1&&o!==(o=Ti(l[10])+"")&&Re(a,o)},d(l){l&&M(t),l&&M(i),l&&M(a)}}}function ef(n){let e,t=n[12]+1+"",i,o,a=Ti(n[10])+"",l;return{c(){e=V("strong"),i=ve(t),o=ve(") "),l=ve(a)},m(u,c){L(u,e,c),B(e,i),B(e,o),B(e,l)},p(u,c){c&1&&a!==(a=Ti(u[10])+"")&&Re(l,a)},d(u){u&&M(e)}}}function tf(n){let e;function t(a,l){return a[10].id==a[1]?ef:$u}let i=t(n),o=i(n);return{c(){o.c(),e=Z()},m(a,l){o.m(a,l),L(a,e,l)},p(a,l){i===(i=t(a))&&o?o.p(a,l):(o.d(1),o=i(a),o&&(o.c(),o.m(e.parentNode,e)))},d(a){o.d(a),a&&M(e)}}}function sa(n){let e,t,i;function o(l){n[8](l,n[10])}let a={$$slots:{title:[tf],default:[Qu]},$$scope:{ctx:n}};return n[10].properties.editing!==void 0&&(a.open=n[10].properties.editing),e=new $l({props:a}),Ke.push(()=>wt(e,"open",o,n[10].properties.editing)),e.$on("click",function(){oo(n[3](n[10].id))&&n[3](n[10].id).apply(this,arguments)}),e.$on("mouseenter",function(){oo(Nn.set(n[10].id))&&Nn.set(n[10].id).apply(this,arguments)}),e.$on("mouseleave",n[2]),{c(){de(e.$$.fragment)},m(l,u){he(e,l,u),i=!0},p(l,u){n=l;const c={};u&8195&&(c.$$scope={dirty:u,ctx:n}),!t&&u&1&&(t=!0,c.open=n[10].properties.editing,Tt(()=>t=!1)),e.$set(c)},i(l){i||(G(e.$$.fragment,l),i=!0)},o(l){H(e.$$.fragment,l),i=!1},d(l){pe(e,l)}}}function nf(n){let e,t,i=n[0].features,o=[];for(let l=0;l<i.length;l+=1)o[l]=sa(la(n,i,l));const a=l=>H(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=sr()},m(l,u){for(let c=0;c<o.length;c+=1)o[c].m(l,u);L(l,e,u),t=!0},p(l,u){if(u&15){i=l[0].features;let c;for(c=0;c<i.length;c+=1){const f=la(l,i,c);o[c]?(o[c].p(f,u),G(o[c],1)):(o[c]=sa(f),o[c].c(),G(o[c],1),o[c].m(e.parentNode,e))}for(et(),c=i.length;c<o.length;c+=1)a(c);tt()}},i(l){if(!t){for(let u=0;u<i.length;u+=1)G(o[u]);t=!0}},o(l){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)H(o[u]);t=!1},d(l){ua(o,l),l&&M(e)}}}function rf(n){let e,t,i,o;return e=new Hl({props:{$$slots:{default:[nf]},$$scope:{ctx:n}}}),{c(){de(e.$$.fragment)},m(a,l){he(e,a,l),t=!0,i||(o=$(window,"keydown",n[4]),i=!0)},p(a,[l]){const u={};l&8195&&(u.$$scope={dirty:l,ctx:a}),e.$set(u)},i(a){t||(G(e.$$.fragment,a),t=!0)},o(a){H(e.$$.fragment,a),t=!1},d(a){pe(e,a),i=!1,o()}}}function Ti(n){if(n.properties.name)return n.properties.name;var e=n.properties.intervention_type;return e=="other"&&(n.geometry.type=="Point"?e="point":n.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function of(n,e,t){let i,o,a;St(n,hr,p=>t(9,i=p)),St(n,we,p=>t(0,o=p)),St(n,lr,p=>t(1,a=p));function l(){Nn.set(null)}function u(p){for(let m of o.features)if(m.properties.editing&&m.id!=p){delete m.properties.editing;return}}function c(p){const m=i;if(p.key=="Delete"){const w=p.originalTarget.tagName;if(w!="CANVAS"&&w!="BODY")return;p.preventDefault(),we.update(x=>(x.features=x.features.filter(j=>j.id!=m),x))}}function f(p,m){n.$$.not_equal(m.properties.name,p)&&(m.properties.name=p,we.set(o))}function h(p,m){n.$$.not_equal(m.properties.intervention_type,p)&&(m.properties.intervention_type=p,we.set(o))}function y(p,m){n.$$.not_equal(m.properties.description,p)&&(m.properties.description=p,we.set(o))}function b(p,m){n.$$.not_equal(m.properties.editing,p)&&(m.properties.editing=p,we.set(o))}return[o,a,l,u,c,f,h,y,b]}class af extends Me{constructor(e){super(),Pe(this,e,of,rf,Ne,{})}}function lf(n){let e,t,i,o,a,l,u,c,f,h,y,b,p,m,w,x,j,I,C,A=n[0].features.length+"",N,F,ge,z,oe,le,D,te;return{c(){e=V("div"),t=V("label"),i=ve(`Scheme name:
    `),o=V("input"),a=Z(),l=V("br"),u=Z(),c=V("div"),f=V("label"),h=V("input"),y=Z(),b=V("button"),b.textContent="Load from GeoJSON",p=Z(),m=V("button"),m.textContent="Export to GeoJSON",w=Z(),x=V("br"),j=Z(),I=V("div"),C=V("span"),N=ve(A),F=ve(" interventions"),ge=Z(),z=V("button"),oe=ve("Clear all"),K(o,"type","text"),K(h,"type","file"),K(h,"id","load_geojson"),K(h,"class","svelte-lhyd1e"),K(b,"type","button"),K(b,"onclick","document.getElementById('load_geojson').click();"),K(m,"type","button"),K(m,"class","align-right svelte-lhyd1e"),K(z,"type","button"),K(z,"class","align-right svelte-lhyd1e"),z.disabled=le=n[0].features.length==0},m(R,re){L(R,e,re),B(e,t),B(t,i),B(t,o),fn(o,n[0].scheme_name),L(R,a,re),L(R,l,re),L(R,u,re),L(R,c,re),B(c,f),B(f,h),B(f,y),B(f,b),B(c,p),B(c,m),L(R,w,re),L(R,x,re),L(R,j,re),L(R,I,re),B(I,C),B(C,N),B(C,F),B(I,ge),B(I,z),B(z,oe),D||(te=[$(o,"input",n[5]),$(h,"change",n[3]),$(m,"click",n[2]),$(z,"click",n[1])],D=!0)},p(R,[re]){re&1&&o.value!==R[0].scheme_name&&fn(o,R[0].scheme_name),re&1&&A!==(A=R[0].features.length+"")&&Re(N,A),re&1&&le!==(le=R[0].features.length==0)&&(z.disabled=le)},i:He,o:He,d(R){R&&M(e),R&&M(a),R&&M(l),R&&M(u),R&&M(c),R&&M(w),R&&M(x),R&&M(j),R&&M(I),D=!1,ft(te)}}}function sf(n,e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(e)),t.setAttribute("download",n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function uf(n){return n.hasOwnProperty("origin")?n.origin.startsWith("atip-"):n.hasOwnProperty("authority")}function ff(n,e,t){let i;St(n,we,y=>t(0,i=y));let{authorityName:o}=e,a=window.localStorage.getItem(o);if(a)try{we.set(JSON.parse(a))}catch(y){console.log(`Failed to load from local storage: ${y}`)}we.subscribe(()=>window.localStorage.setItem(o,JSON.stringify(u()))),we.update(y=>(y.authority=o,y.origin="atip-v1",y));function l(){confirm("Do you want to clear the current scheme? (You should save it first!)")&&we.set(cn())}function u(){const y=JSON.parse(JSON.stringify(i));for(let b of y.features)delete b.properties.editing;return y}function c(){let y=u();var b=o;y.scheme_name&&(b+="_"+y.scheme_name),b+=".txt",sf(b,JSON.stringify(y,null,"  "))}function f(y){const b=new FileReader;b.onload=p=>{try{let m=JSON.parse(p.target.result);uf(m)?we.set(m):window.alert("Non-ATIP based geojson uploaded. Please try again with an ATIP generated file.")}catch(m){window.alert(`Couldn't load scheme from a file: ${m}`)}},b.readAsText(y.target.files[0])}function h(){i.scheme_name=this.value,we.set(i)}return n.$$set=y=>{"authorityName"in y&&t(4,o=y.authorityName)},[i,l,c,f,o,h]}class cf extends Me{constructor(e){super(),Pe(this,e,ff,lf,Ne,{authorityName:4})}}let sn="hover",Wi="yellow",df=10,hf=7;function pf(n,e,t){let i,o;St(n,we,u=>t(1,i=u));const{getMap:a}=Kt("map"),l=ha(we,u=>u.features.some(c=>c.properties.editing));return St(n,l,u=>t(2,o=u)),Qt(()=>{const u=a();u.addSource(sn,{type:"geojson",data:cn()}),u.addLayer({id:"hover-polygons",source:sn,filter:_i,...Ii(Wi,.5)}),u.addLayer({id:"hover-lines",source:sn,filter:dr,...Ei(Wi,1.5*df,1)}),u.addLayer({id:"hover-points",source:sn,filter:yi,...Si(Wi,1.5*hf,.5)}),l.subscribe(c=>{c&&Nn.set(null)}),Nn.subscribe(c=>{c&&!o?u.getSource(sn).setData(i.features.find(f=>f.id==c)):u.getSource(sn).setData(cn())})}),[l]}class gf extends Me{constructor(e){super(),Pe(this,e,pf,null,Ne,{})}}let kn="editing",Xi="red",mf=10,vf=7;function bf(n,e,t){let i;St(n,we,a=>t(0,i=a));const{getMap:o}=Kt("map");return Qt(()=>{const a=o();a.addSource(kn,{type:"geojson",data:cn()}),a.addLayer({id:"editing-polygons",source:kn,filter:_i,...Ii(Xi,.5)}),a.addLayer({id:"editing-lines",source:kn,filter:dr,...Ei(Xi,1.5*mf)}),a.addLayer({id:"editing-points",source:kn,filter:yi,...Si(Xi,1.5*vf)}),we.subscribe(l=>{a.getSource(kn).setData(l.features.find(u=>u.properties.editing)||cn())}),hr.subscribe(l=>{if(l){let u=i.features.find(c=>c.id==l);u.geometry.type=="Point"?a.flyTo({center:u.geometry.coordinates}):a.fitBounds(da(u),{padding:200,animate:!0,duration:500})}})}),[]}class _f extends Me{constructor(e){super(),Pe(this,e,bf,null,Ne,{})}}function yf(n){let e,t,i,o,a,l,u,c;return{c(){e=V("div"),t=V("button"),t.textContent="Home",i=Z(),o=V("button"),o.textContent="About",a=Z(),l=V("button"),l.textContent="Instructions",K(t,"type","button"),K(t,"onclick","window.open('index.html');"),K(o,"type","button"),K(l,"type","button"),K(e,"slot","nav")},m(f,h){L(f,e,h),B(e,t),B(e,i),B(e,o),B(e,a),B(e,l),u||(c=[$(o,"click",n[4]),$(l,"click",n[5])],u=!0)},p:He,d(f){f&&M(e),u=!1,ft(c)}}}function Ef(n){let e,t,i,o,a,l,u,c,f;return o=new cf({props:{authorityName:n[2]}}),c=new af({}),{c(){e=V("div"),t=V("h1"),t.textContent=`${n[2]}`,i=Z(),de(o.$$.fragment),a=Z(),l=V("br"),u=Z(),de(c.$$.fragment),K(e,"slot","sidebar")},m(h,y){L(h,e,y),B(e,t),B(e,i),he(o,e,null),B(e,a),B(e,l),B(e,u),he(c,e,null),f=!0},p:He,i(h){f||(G(o.$$.fragment,h),G(c.$$.fragment,h),f=!0)},o(h){H(o.$$.fragment,h),H(c.$$.fragment,h),f=!1},d(h){h&&M(e),pe(o),pe(c)}}}function Sf(n){let e,t,i,o,a,l,u,c;return e=new Nu({props:{authorityName:n[2]}}),i=new Hu({props:{url:n[3]}}),a=new gf({}),u=new _f({}),{c(){de(e.$$.fragment),t=Z(),de(i.$$.fragment),o=Z(),de(a.$$.fragment),l=Z(),de(u.$$.fragment)},m(f,h){he(e,f,h),L(f,t,h),he(i,f,h),L(f,o,h),he(a,f,h),L(f,l,h),he(u,f,h),c=!0},p:He,i(f){c||(G(e.$$.fragment,f),G(i.$$.fragment,f),G(a.$$.fragment,f),G(u.$$.fragment,f),c=!0)},o(f){H(e.$$.fragment,f),H(i.$$.fragment,f),H(a.$$.fragment,f),H(u.$$.fragment,f),c=!1},d(f){pe(e,f),f&&M(t),pe(i,f),f&&M(o),pe(a,f),f&&M(l),pe(u,f)}}}function wf(n){let e,t,i;return t=new Ks({props:{$$slots:{default:[Sf]},$$scope:{ctx:n}}}),{c(){e=V("div"),de(t.$$.fragment),K(e,"slot","main")},m(o,a){L(o,e,a),he(t,e,null),i=!0},p(o,a){const l={};a&512&&(l.$$scope={dirty:a,ctx:o}),t.$set(l)},i(o){i||(G(t.$$.fragment,o),i=!0)},o(o){H(t.$$.fragment,o),i=!1},d(o){o&&M(e),pe(t)}}}function Tf(n){let e,t,i,o,a,l,u,c;e=new iu({props:{$$slots:{main:[wf],sidebar:[Ef],nav:[yf]},$$scope:{ctx:n}}});function f(p){n[6](p)}let h={};n[0]!==void 0&&(h.open=n[0]),i=new xl({props:h}),Ke.push(()=>wt(i,"open",f,n[0]));function y(p){n[7](p)}let b={};return n[1]!==void 0&&(b.open=n[1]),l=new Ws({props:b}),Ke.push(()=>wt(l,"open",y,n[1])),{c(){de(e.$$.fragment),t=Z(),de(i.$$.fragment),a=Z(),de(l.$$.fragment)},m(p,m){he(e,p,m),L(p,t,m),he(i,p,m),L(p,a,m),he(l,p,m),c=!0},p(p,[m]){const w={};m&512&&(w.$$scope={dirty:m,ctx:p}),e.$set(w);const x={};!o&&m&1&&(o=!0,x.open=p[0],Tt(()=>o=!1)),i.$set(x);const j={};!u&&m&2&&(u=!0,j.open=p[1],Tt(()=>u=!1)),l.$set(j)},i(p){c||(G(e.$$.fragment,p),G(i.$$.fragment,p),G(l.$$.fragment,p),c=!0)},o(p){H(e.$$.fragment,p),H(i.$$.fragment,p),H(l.$$.fragment,p),c=!1},d(p){pe(e,p),p&&M(t),pe(i,p),p&&M(a),pe(l,p)}}}function kf(n,e,t){let i=!1,o=!1,l=new URLSearchParams(window.location.search).get("authority"),u=`https://atip.uk/route-snappers/${l}.bin`;function c(){t(0,i=!i),t(1,o=!1)}function f(){t(1,o=!o),t(0,i=!1)}function h(b){i=b,t(0,i)}function y(b){o=b,t(1,o)}return[i,o,l,u,c,f,h,y]}class Cf extends Me{constructor(e){super(),Pe(this,e,kf,Tf,Ne,{})}}new Cf({target:document.getElementById("app")});
