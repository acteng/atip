var Or=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var rt=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var me=(n,e,t)=>(Or(n,e,"access private method"),t);import{S as oe,i as le,s as se,x as Q,y as Ee,f as I,z as tt,g as x,h as P,B as Pe,C as re,p as T,D as ue,E as ye,t as V,F as fe,G as it,H as J,e as L,I as ge,J as k,l as q,r as xe,K as Ir,L as lt,c as O,n as C,M as ke,o as F,N as Se,O as cr,P as dr,d as j,m as W,q as H,Q as Cn,R as ut,T as Le,U as Ae,V as Re,W as Ce,X as Nr,Y as Kt,Z as Ot,_ as $t,$ as ve,b as he,a0 as hr,a1 as Zn,a2 as Br,j as gt,a3 as Fr,a as Be,k as Fe,a4 as Bt,a5 as zr,a6 as Dr,a7 as an,a8 as On,a9 as Qn,w as In,aa as Kn,ab as Gr,ac as qr,ad as $n,ae as Yr,af as Xr,ag as mr,A as Jr,u as Ur}from"./authorities-aed2cc96.js";function ei(n){let e,t;return{c(){e=Ee("title"),t=V(n[1])},m(i,r){x(i,e,r),P(e,t)},p(i,r){r&2&&fe(t,i[1])},d(i){i&&T(e)}}}function jr(n){let e,t,i=n[1]&&ei(n),r=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],o={};for(let l=0;l<r.length;l+=1)o=Q(o,r[l]);return{c(){e=Ee("svg"),i&&i.c(),t=Ee("path"),I(t,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),tt(e,o)},m(l,s){x(l,e,s),i&&i.m(e,null),P(e,t)},p(l,[s]){l[1]?i?i.p(l,s):(i=ei(l),i.c(),i.m(e,t)):i&&(i.d(1),i=null),tt(e,o=Pe(r,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:l[0]},s&1&&{height:l[0]},s&4&&l[2],s&8&&l[3]]))},i:re,o:re,d(l){l&&T(e),i&&i.d()}}}function Wr(n,e,t){let i,r;const o=["size","title"];let l=ue(e,o),{size:s=16}=e,{title:a=void 0}=e;return n.$$set=u=>{t(5,e=Q(Q({},e),ye(u))),t(3,l=ue(e,o)),"size"in u&&t(0,s=u.size),"title"in u&&t(1,a=u.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||a),t(2,r={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ye(e),[s,a,r,l,i]}class Hr extends oe{constructor(e){super(),le(this,e,Wr,jr,se,{size:0,title:1})}}const Nn=Hr;function ti(n,e,t){const i=n.slice();return i[2]=e[t].width,i}function Vr(n){let e,t,i,r,o=[n[4],{style:t="width: "+n[2]+";"+n[4].style}],l={};for(let s=0;s<o.length;s+=1)l=Q(l,o[s]);return{c(){e=L("p"),ge(e,l),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",n[0])},m(s,a){x(s,e,a),i||(r=[q(e,"click",n[12]),q(e,"mouseover",n[13]),q(e,"mouseenter",n[14]),q(e,"mouseleave",n[15])],i=!0)},p(s,a){ge(e,l=Pe(o,[a&16&&s[4],a&20&&t!==(t="width: "+s[2]+";"+s[4].style)&&{style:t}])),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",s[0])},d(s){s&&T(e),i=!1,xe(r)}}}function Zr(n){let e,t,i,r=n[3],o=[];for(let a=0;a<r.length;a+=1)o[a]=ni(ti(n,r,a));let l=[n[4]],s={};for(let a=0;a<l.length;a+=1)s=Q(s,l[a]);return{c(){e=L("div");for(let a=0;a<o.length;a+=1)o[a].c();ge(e,s)},m(a,u){x(a,e,u);for(let c=0;c<o.length;c+=1)o[c].m(e,null);t||(i=[q(e,"click",n[8]),q(e,"mouseover",n[9]),q(e,"mouseenter",n[10]),q(e,"mouseleave",n[11])],t=!0)},p(a,u){if(u&9){r=a[3];let c;for(c=0;c<r.length;c+=1){const p=ti(a,r,c);o[c]?o[c].p(p,u):(o[c]=ni(p),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}ge(e,s=Pe(l,[u&16&&a[4]]))},d(a){a&&T(e),Ir(o,a),t=!1,xe(i)}}}function ni(n){let e;return{c(){e=L("p"),lt(e,"width",n[2]),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",n[0])},m(t,i){x(t,e,i)},p(t,i){i&8&&lt(e,"width",t[2]),i&1&&k(e,"bx--skeleton__heading",t[0])},d(t){t&&T(e)}}}function Qr(n){let e;function t(o,l){return o[1]?Zr:Vr}let i=t(n),r=i(n);return{c(){r.c(),e=it()},m(o,l){r.m(o,l),x(o,e,l)},p(o,[l]){i===(i=t(o))&&r?r.p(o,l):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},i:re,o:re,d(o){r.d(o),o&&T(e)}}}function Kr(n,e,t){let i,r,o;const l=["lines","heading","paragraph","width"];let s=ue(e,l),{lines:a=3}=e,{heading:u=!1}=e,{paragraph:c=!1}=e,{width:p="100%"}=e;const m=[.973,.153,.567];function f(_){J.call(this,n,_)}function d(_){J.call(this,n,_)}function v(_){J.call(this,n,_)}function E(_){J.call(this,n,_)}function A(_){J.call(this,n,_)}function h(_){J.call(this,n,_)}function g(_){J.call(this,n,_)}function b(_){J.call(this,n,_)}return n.$$set=_=>{e=Q(Q({},e),ye(_)),t(4,s=ue(e,l)),"lines"in _&&t(5,a=_.lines),"heading"in _&&t(0,u=_.heading),"paragraph"in _&&t(1,c=_.paragraph),"width"in _&&t(2,p=_.width)},n.$$.update=()=>{if(n.$$.dirty&4&&t(7,r=parseInt(p,10)),n.$$.dirty&4&&t(6,o=p.includes("px")),n.$$.dirty&238&&c)for(let _=0;_<a;_++){const y=o?r-75:0,R=o?r:75,M=Math.floor(m[_%3]*(R-y+1))+y+"px";t(3,i=[...i,{width:o?M:`calc(${p} - ${M})`}])}},t(3,i=[]),[u,c,p,i,s,a,o,r,f,d,v,E,A,h,g,b]}class $r extends oe{constructor(e){super(),le(this,e,Kr,Qr,se,{lines:5,heading:0,paragraph:1,width:2})}}const kt=$r;function ii(n,e,t){const i=n.slice();return i[9]=e[t],i}function ri(n){let e,t,i,r,o,l,s,a,u,c,p,m,f;return i=new Nn({props:{class:"bx--accordion__arrow"}}),o=new kt({props:{class:"bx--accordion__title"}}),a=new kt({props:{width:"90%"}}),c=new kt({props:{width:"80%"}}),m=new kt({props:{width:"95%"}}),{c(){e=L("li"),t=L("span"),j(i.$$.fragment),r=O(),j(o.$$.fragment),l=O(),s=L("div"),j(a.$$.fragment),u=O(),j(c.$$.fragment),p=O(),j(m.$$.fragment),k(t,"bx--accordion__heading",!0),k(s,"bx--accordion__content",!0),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",!0)},m(d,v){x(d,e,v),P(e,t),W(i,t,null),P(t,r),W(o,t,null),P(e,l),P(e,s),W(a,s,null),P(s,u),W(c,s,null),P(s,p),W(m,s,null),f=!0},i(d){f||(C(i.$$.fragment,d),C(o.$$.fragment,d),C(a.$$.fragment,d),C(c.$$.fragment,d),C(m.$$.fragment,d),f=!0)},o(d){F(i.$$.fragment,d),F(o.$$.fragment,d),F(a.$$.fragment,d),F(c.$$.fragment,d),F(m.$$.fragment,d),f=!1},d(d){d&&T(e),H(i),H(o),H(a),H(c),H(m)}}}function oi(n,e){let t,i,r,o,l,s,a;return r=new Nn({props:{class:"bx--accordion__arrow"}}),l=new kt({props:{class:"bx--accordion__title"}}),{key:n,first:null,c(){t=L("li"),i=L("span"),j(r.$$.fragment),o=O(),j(l.$$.fragment),s=O(),k(i,"bx--accordion__heading",!0),k(t,"bx--accordion__item",!0),this.first=t},m(u,c){x(u,t,c),P(t,i),W(r,i,null),P(i,o),W(l,i,null),P(t,s),a=!0},p(u,c){},i(u){a||(C(r.$$.fragment,u),C(l.$$.fragment,u),a=!0)},o(u){F(r.$$.fragment,u),F(l.$$.fragment,u),a=!1},d(u){u&&T(t),H(r),H(l)}}}function eo(n){let e,t,i=[],r=new Map,o,l,s,a=n[3]&&ri(),u=Array.from({length:n[3]?n[0]-1:n[0]},li);const c=f=>f[9];for(let f=0;f<u.length;f+=1){let d=ii(n,u,f),v=c(d);r.set(v,i[f]=oi(v))}let p=[n[4]],m={};for(let f=0;f<p.length;f+=1)m=Q(m,p[f]);return{c(){e=L("ul"),a&&a.c(),t=O();for(let f=0;f<i.length;f+=1)i[f].c();ge(e,m),k(e,"bx--skeleton",!0),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",n[1]==="start"),k(e,"bx--accordion--end",n[1]==="end"),k(e,"bx--accordion--sm",n[2]==="sm"),k(e,"bx--accordion--xl",n[2]==="xl")},m(f,d){x(f,e,d),a&&a.m(e,null),P(e,t);for(let v=0;v<i.length;v+=1)i[v].m(e,null);o=!0,l||(s=[q(e,"click",n[5]),q(e,"mouseover",n[6]),q(e,"mouseenter",n[7]),q(e,"mouseleave",n[8])],l=!0)},p(f,[d]){f[3]?a?d&8&&C(a,1):(a=ri(),a.c(),C(a,1),a.m(e,t)):a&&(ke(),F(a,1,1,()=>{a=null}),Se()),d&9&&(u=Array.from({length:f[3]?f[0]-1:f[0]},li),ke(),i=cr(i,d,c,1,f,u,r,e,dr,oi,null,ii),Se()),ge(e,m=Pe(p,[d&16&&f[4]])),k(e,"bx--skeleton",!0),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",f[1]==="start"),k(e,"bx--accordion--end",f[1]==="end"),k(e,"bx--accordion--sm",f[2]==="sm"),k(e,"bx--accordion--xl",f[2]==="xl")},i(f){if(!o){C(a);for(let d=0;d<u.length;d+=1)C(i[d]);o=!0}},o(f){F(a);for(let d=0;d<i.length;d+=1)F(i[d]);o=!1},d(f){f&&T(e),a&&a.d();for(let d=0;d<i.length;d+=1)i[d].d();l=!1,xe(s)}}}const li=(n,e)=>e;function to(n,e,t){const i=["count","align","size","open"];let r=ue(e,i),{count:o=4}=e,{align:l="end"}=e,{size:s=void 0}=e,{open:a=!0}=e;function u(f){J.call(this,n,f)}function c(f){J.call(this,n,f)}function p(f){J.call(this,n,f)}function m(f){J.call(this,n,f)}return n.$$set=f=>{e=Q(Q({},e),ye(f)),t(4,r=ue(e,i)),"count"in f&&t(0,o=f.count),"align"in f&&t(1,l=f.align),"size"in f&&t(2,s=f.size),"open"in f&&t(3,a=f.open)},[o,l,s,a,r,u,c,p,m]}class no extends oe{constructor(e){super(),le(this,e,to,eo,se,{count:0,align:1,size:2,open:3})}}const io=no;function ro(n){let e,t,i,r;const o=n[6].default,l=Le(o,n,n[5],null);let s=[n[3]],a={};for(let u=0;u<s.length;u+=1)a=Q(a,s[u]);return{c(){e=L("ul"),l&&l.c(),ge(e,a),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",n[0]==="start"),k(e,"bx--accordion--end",n[0]==="end"),k(e,"bx--accordion--sm",n[1]==="sm"),k(e,"bx--accordion--xl",n[1]==="xl")},m(u,c){x(u,e,c),l&&l.m(e,null),t=!0,i||(r=[q(e,"click",n[7]),q(e,"mouseover",n[8]),q(e,"mouseenter",n[9]),q(e,"mouseleave",n[10])],i=!0)},p(u,c){l&&l.p&&(!t||c&32)&&Ae(l,o,u,u[5],t?Ce(o,u[5],c,null):Re(u[5]),null),ge(e,a=Pe(s,[c&8&&u[3]])),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",u[0]==="start"),k(e,"bx--accordion--end",u[0]==="end"),k(e,"bx--accordion--sm",u[1]==="sm"),k(e,"bx--accordion--xl",u[1]==="xl")},i(u){t||(C(l,u),t=!0)},o(u){F(l,u),t=!1},d(u){u&&T(e),l&&l.d(u),i=!1,xe(r)}}}function oo(n){let e,t;const i=[n[3],{align:n[0]},{size:n[1]}];let r={};for(let o=0;o<i.length;o+=1)r=Q(r,i[o]);return e=new io({props:r}),e.$on("click",n[11]),e.$on("mouseover",n[12]),e.$on("mouseenter",n[13]),e.$on("mouseleave",n[14]),{c(){j(e.$$.fragment)},m(o,l){W(e,o,l),t=!0},p(o,l){const s=l&11?Pe(i,[l&8&&Nr(o[3]),l&1&&{align:o[0]},l&2&&{size:o[1]}]):{};e.$set(s)},i(o){t||(C(e.$$.fragment,o),t=!0)},o(o){F(e.$$.fragment,o),t=!1},d(o){H(e,o)}}}function lo(n){let e,t,i,r;const o=[oo,ro],l=[];function s(a,u){return a[2]?0:1}return e=s(n),t=l[e]=o[e](n),{c(){t.c(),i=it()},m(a,u){l[e].m(a,u),x(a,i,u),r=!0},p(a,[u]){let c=e;e=s(a),e===c?l[e].p(a,u):(ke(),F(l[c],1,1,()=>{l[c]=null}),Se(),t=l[e],t?t.p(a,u):(t=l[e]=o[e](a),t.c()),C(t,1),t.m(i.parentNode,i))},i(a){r||(C(t),r=!0)},o(a){F(t),r=!1},d(a){l[e].d(a),a&&T(i)}}}function so(n,e,t){const i=["align","size","disabled","skeleton"];let r=ue(e,i),{$$slots:o={},$$scope:l}=e,{align:s="end"}=e,{size:a=void 0}=e,{disabled:u=!1}=e,{skeleton:c=!1}=e;const p=ut(u);Cn("Accordion",{disableItems:p});function m(b){J.call(this,n,b)}function f(b){J.call(this,n,b)}function d(b){J.call(this,n,b)}function v(b){J.call(this,n,b)}function E(b){J.call(this,n,b)}function A(b){J.call(this,n,b)}function h(b){J.call(this,n,b)}function g(b){J.call(this,n,b)}return n.$$set=b=>{e=Q(Q({},e),ye(b)),t(3,r=ue(e,i)),"align"in b&&t(0,s=b.align),"size"in b&&t(1,a=b.size),"disabled"in b&&t(4,u=b.disabled),"skeleton"in b&&t(2,c=b.skeleton),"$$scope"in b&&t(5,l=b.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&p.set(u)},[s,a,c,r,u,l,o,m,f,d,v,E,A,h,g]}class ao extends oe{constructor(e){super(),le(this,e,so,lo,se,{align:0,size:1,disabled:4,skeleton:2})}}const uo=ao,fo=n=>({}),si=n=>({});function co(n){let e;return{c(){e=V(n[2])},m(t,i){x(t,e,i)},p(t,i){i&4&&fe(e,t[2])},d(t){t&&T(e)}}}function ho(n){let e,t,i,r,o,l,s,a,u,c;i=new Nn({props:{class:"bx--accordion__arrow","aria-label":n[3]}});const p=n[7].title,m=Le(p,n,n[6],si),f=m||co(n),d=n[7].default,v=Le(d,n,n[6],null);let E=[n[5]],A={};for(let h=0;h<E.length;h+=1)A=Q(A,E[h]);return{c(){e=L("li"),t=L("button"),j(i.$$.fragment),r=O(),o=L("div"),f&&f.c(),l=O(),s=L("div"),v&&v.c(),k(o,"bx--accordion__title",!0),I(t,"type","button"),I(t,"title",n[3]),I(t,"aria-expanded",n[0]),t.disabled=n[1],k(t,"bx--accordion__heading",!0),k(s,"bx--accordion__content",!0),ge(e,A),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",n[0]),k(e,"bx--accordion__item--disabled",n[1]),k(e,"bx--accordion__item--expanding",n[4]==="expanding"),k(e,"bx--accordion__item--collapsing",n[4]==="collapsing")},m(h,g){x(h,e,g),P(e,t),W(i,t,null),P(t,r),P(t,o),f&&f.m(o,null),P(e,l),P(e,s),v&&v.m(s,null),a=!0,u||(c=[q(t,"click",n[9]),q(t,"click",n[14]),q(t,"mouseover",n[10]),q(t,"mouseenter",n[11]),q(t,"mouseleave",n[12]),q(t,"keydown",n[13]),q(t,"keydown",n[15]),q(e,"animationend",n[8]),q(e,"animationend",n[16])],u=!0)},p(h,[g]){const b={};g&8&&(b["aria-label"]=h[3]),i.$set(b),m?m.p&&(!a||g&64)&&Ae(m,p,h,h[6],a?Ce(p,h[6],g,fo):Re(h[6]),si):f&&f.p&&(!a||g&4)&&f.p(h,a?g:-1),(!a||g&8)&&I(t,"title",h[3]),(!a||g&1)&&I(t,"aria-expanded",h[0]),(!a||g&2)&&(t.disabled=h[1]),v&&v.p&&(!a||g&64)&&Ae(v,d,h,h[6],a?Ce(d,h[6],g,null):Re(h[6]),null),ge(e,A=Pe(E,[g&32&&h[5]])),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",h[0]),k(e,"bx--accordion__item--disabled",h[1]),k(e,"bx--accordion__item--expanding",h[4]==="expanding"),k(e,"bx--accordion__item--collapsing",h[4]==="collapsing")},i(h){a||(C(i.$$.fragment,h),C(f,h),C(v,h),a=!0)},o(h){F(i.$$.fragment,h),F(f,h),F(v,h),a=!1},d(h){h&&T(e),H(i),f&&f.d(h),v&&v.d(h),u=!1,xe(c)}}}function mo(n,e,t){const i=["title","open","disabled","iconDescription"];let r=ue(e,i),{$$slots:o={},$$scope:l}=e,{title:s="title"}=e,{open:a=!1}=e,{disabled:u=!1}=e,{iconDescription:c="Expand/Collapse"}=e,p=u;const f=Kt("Accordion").disableItems.subscribe(M=>{!M&&p||t(1,u=M)});let d;Ot(()=>()=>{f()});function v(M){J.call(this,n,M)}function E(M){J.call(this,n,M)}function A(M){J.call(this,n,M)}function h(M){J.call(this,n,M)}function g(M){J.call(this,n,M)}function b(M){J.call(this,n,M)}const _=()=>{t(0,a=!a),t(4,d=a?"expanding":"collapsing")},y=({key:M})=>{a&&M==="Escape"&&t(0,a=!1)},R=()=>{t(4,d=void 0)};return n.$$set=M=>{e=Q(Q({},e),ye(M)),t(5,r=ue(e,i)),"title"in M&&t(2,s=M.title),"open"in M&&t(0,a=M.open),"disabled"in M&&t(1,u=M.disabled),"iconDescription"in M&&t(3,c=M.iconDescription),"$$scope"in M&&t(6,l=M.$$scope)},[a,u,s,c,d,r,l,o,v,E,A,h,g,b,_,y,R]}class go extends oe{constructor(e){super(),le(this,e,mo,ho,se,{title:2,open:0,disabled:1,iconDescription:3})}}const po=go;function ai(n){let e,t;return{c(){e=Ee("title"),t=V(n[1])},m(i,r){x(i,e,r),P(e,t)},p(i,r){r&2&&fe(t,i[1])},d(i){i&&T(e)}}}function bo(n){let e,t,i,r=n[1]&&ai(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let s=0;s<o.length;s+=1)l=Q(l,o[s]);return{c(){e=Ee("svg"),r&&r.c(),t=Ee("path"),i=Ee("path"),I(t,"d","M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14C30,8.3,23.7,2,16,2z M14.9,8h2.2v11h-2.2V8z M16,25	c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22c0.8,0,1.5,0.7,1.5,1.5S16.8,25,16,25z"),I(i,"fill","none"),I(i,"d","M17.5,23.5c0,0.8-0.7,1.5-1.5,1.5c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22	C16.8,22,17.5,22.7,17.5,23.5z M17.1,8h-2.2v11h2.2V8z"),I(i,"data-icon-path","inner-path"),I(i,"opacity","0"),tt(e,l)},m(s,a){x(s,e,a),r&&r.m(e,null),P(e,t),P(e,i)},p(s,[a]){s[1]?r?r.p(s,a):(r=ai(s),r.c(),r.m(e,t)):r&&(r.d(1),r=null),tt(e,l=Pe(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:s[0]},a&1&&{height:s[0]},a&4&&s[2],a&8&&s[3]]))},i:re,o:re,d(s){s&&T(e),r&&r.d()}}}function vo(n,e,t){let i,r;const o=["size","title"];let l=ue(e,o),{size:s=16}=e,{title:a=void 0}=e;return n.$$set=u=>{t(5,e=Q(Q({},e),ye(u))),t(3,l=ue(e,o)),"size"in u&&t(0,s=u.size),"title"in u&&t(1,a=u.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||a),t(2,r={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ye(e),[s,a,r,l,i]}class _o extends oe{constructor(e){super(),le(this,e,vo,bo,se,{size:0,title:1})}}const gr=_o;function ui(n){let e,t;return{c(){e=Ee("title"),t=V(n[1])},m(i,r){x(i,e,r),P(e,t)},p(i,r){r&2&&fe(t,i[1])},d(i){i&&T(e)}}}function yo(n){let e,t,i,r,o=n[1]&&ui(n),l=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],s={};for(let a=0;a<l.length;a+=1)s=Q(s,l[a]);return{c(){e=Ee("svg"),o&&o.c(),t=Ee("path"),i=Ee("path"),r=Ee("path"),I(t,"fill","none"),I(t,"d","M16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Zm-1.125-5h2.25V12h-2.25Z"),I(t,"data-icon-path","inner-path"),I(i,"d","M16.002,6.1714h-.004L4.6487,27.9966,4.6506,28H27.3494l.0019-.0034ZM14.875,12h2.25v9h-2.25ZM16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Z"),I(r,"d","M29,30H3a1,1,0,0,1-.8872-1.4614l13-25a1,1,0,0,1,1.7744,0l13,25A1,1,0,0,1,29,30ZM4.6507,28H27.3493l.002-.0033L16.002,6.1714h-.004L4.6487,27.9967Z"),tt(e,s)},m(a,u){x(a,e,u),o&&o.m(e,null),P(e,t),P(e,i),P(e,r)},p(a,[u]){a[1]?o?o.p(a,u):(o=ui(a),o.c(),o.m(e,t)):o&&(o.d(1),o=null),tt(e,s=Pe(l,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:a[0]},u&1&&{height:a[0]},u&4&&a[2],u&8&&a[3]]))},i:re,o:re,d(a){a&&T(e),o&&o.d()}}}function wo(n,e,t){let i,r;const o=["size","title"];let l=ue(e,o),{size:s=16}=e,{title:a=void 0}=e;return n.$$set=u=>{t(5,e=Q(Q({},e),ye(u))),t(3,l=ue(e,o)),"size"in u&&t(0,s=u.size),"title"in u&&t(1,a=u.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||a),t(2,r={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ye(e),[s,a,r,l,i]}class ko extends oe{constructor(e){super(),le(this,e,wo,yo,se,{size:0,title:1})}}const So=ko,Eo=n=>({}),fi=n=>({});function ci(n){let e,t;const i=n[16].labelText,r=Le(i,n,n[15],fi),o=r||Mo(n);return{c(){e=L("span"),o&&o.c(),k(e,"bx--visually-hidden",n[7])},m(l,s){x(l,e,s),o&&o.m(e,null),t=!0},p(l,s){r?r.p&&(!t||s&32768)&&Ae(r,i,l,l[15],t?Ce(i,l[15],s,Eo):Re(l[15]),fi):o&&o.p&&(!t||s&64)&&o.p(l,t?s:-1),(!t||s&128)&&k(e,"bx--visually-hidden",l[7])},i(l){t||(C(o,l),t=!0)},o(l){F(o,l),t=!1},d(l){l&&T(e),o&&o.d(l)}}}function Mo(n){let e;return{c(){e=V(n[6])},m(t,i){x(t,e,i)},p(t,i){i&64&&fe(e,t[6])},d(t){t&&T(e)}}}function Po(n){let e,t,i,r,o,l,s,a,u,c=(n[6]||n[13].labelText)&&ci(n),p=[n[12]],m={};for(let f=0;f<p.length;f+=1)m=Q(m,p[f]);return{c(){e=L("div"),t=L("input"),i=O(),r=L("label"),o=L("span"),l=O(),c&&c.c(),I(t,"type","radio"),I(t,"id",n[8]),I(t,"name",n[9]),t.checked=n[0],t.disabled=n[3],t.required=n[4],t.value=n[2],k(t,"bx--radio-button",!0),k(o,"bx--radio-button__appearance",!0),I(r,"for",n[8]),k(r,"bx--radio-button__label",!0),ge(e,m),k(e,"bx--radio-button-wrapper",!0),k(e,"bx--radio-button-wrapper--label-left",n[5]==="left")},m(f,d){x(f,e,d),P(e,t),n[18](t),P(e,i),P(e,r),P(r,o),P(r,l),c&&c.m(r,null),s=!0,a||(u=[q(t,"change",n[17]),q(t,"change",n[19])],a=!0)},p(f,[d]){(!s||d&256)&&I(t,"id",f[8]),(!s||d&512)&&I(t,"name",f[9]),(!s||d&1)&&(t.checked=f[0]),(!s||d&8)&&(t.disabled=f[3]),(!s||d&16)&&(t.required=f[4]),(!s||d&4)&&(t.value=f[2]),f[6]||f[13].labelText?c?(c.p(f,d),d&8256&&C(c,1)):(c=ci(f),c.c(),C(c,1),c.m(r,null)):c&&(ke(),F(c,1,1,()=>{c=null}),Se()),(!s||d&256)&&I(r,"for",f[8]),ge(e,m=Pe(p,[d&4096&&f[12]])),k(e,"bx--radio-button-wrapper",!0),k(e,"bx--radio-button-wrapper--label-left",f[5]==="left")},i(f){s||(C(c),s=!0)},o(f){F(c),s=!1},d(f){f&&T(e),n[18](null),c&&c.d(),a=!1,xe(u)}}}function xo(n,e,t){const i=["value","checked","disabled","required","labelPosition","labelText","hideLabel","id","name","ref"];let r=ue(e,i),o,{$$slots:l={},$$scope:s}=e;const a=$t(l);let{value:u=""}=e,{checked:c=!1}=e,{disabled:p=!1}=e,{required:m=!1}=e,{labelPosition:f="right"}=e,{labelText:d=""}=e,{hideLabel:v=!1}=e,{id:E="ccs-"+Math.random().toString(36)}=e,{name:A=""}=e,{ref:h=null}=e;const g=Kt("RadioButtonGroup"),b=g?g.selectedValue:ut(c?u:void 0);ve(n,b,M=>t(14,o=M)),g&&g.add({id:E,checked:c,disabled:p,value:u});function _(M){J.call(this,n,M)}function y(M){he[M?"unshift":"push"](()=>{h=M,t(1,h)})}const R=()=>{g&&g.update(u)};return n.$$set=M=>{e=Q(Q({},e),ye(M)),t(12,r=ue(e,i)),"value"in M&&t(2,u=M.value),"checked"in M&&t(0,c=M.checked),"disabled"in M&&t(3,p=M.disabled),"required"in M&&t(4,m=M.required),"labelPosition"in M&&t(5,f=M.labelPosition),"labelText"in M&&t(6,d=M.labelText),"hideLabel"in M&&t(7,v=M.hideLabel),"id"in M&&t(8,E=M.id),"name"in M&&t(9,A=M.name),"ref"in M&&t(1,h=M.ref),"$$scope"in M&&t(15,s=M.$$scope)},n.$$.update=()=>{n.$$.dirty&16388&&t(0,c=o===u)},[c,h,u,p,m,f,d,v,E,A,g,b,r,a,o,s,l,_,y,R]}class To extends oe{constructor(e){super(),le(this,e,xo,Po,se,{value:2,checked:0,disabled:3,required:4,labelPosition:5,labelText:6,hideLabel:7,id:8,name:9,ref:1})}}const Ft=To;function di(n){let e,t;return{c(){e=Ee("title"),t=V(n[1])},m(i,r){x(i,e,r),P(e,t)},p(i,r){r&2&&fe(t,i[1])},d(i){i&&T(e)}}}function Lo(n){let e,t,i=n[1]&&di(n),r=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],o={};for(let l=0;l<r.length;l+=1)o=Q(o,r[l]);return{c(){e=Ee("svg"),i&&i.c(),t=Ee("path"),I(t,"d","M30 28.6L3.4 2 2 3.4l10.1 10.1L4 21.6V28h6.4l8.1-8.1L28.6 30 30 28.6zM9.6 26H6v-3.6l7.5-7.5 3.6 3.6L9.6 26zM29.4 6.2L29.4 6.2l-3.6-3.6c-.8-.8-2-.8-2.8 0l0 0 0 0-8 8 1.4 1.4L20 8.4l3.6 3.6L20 15.6l1.4 1.4 8-8C30.2 8.2 30.2 7 29.4 6.2L29.4 6.2zM25 10.6L21.4 7l3-3L28 7.6 25 10.6z"),tt(e,o)},m(l,s){x(l,e,s),i&&i.m(e,null),P(e,t)},p(l,[s]){l[1]?i?i.p(l,s):(i=di(l),i.c(),i.m(e,t)):i&&(i.d(1),i=null),tt(e,o=Pe(r,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:l[0]},s&1&&{height:l[0]},s&4&&l[2],s&8&&l[3]]))},i:re,o:re,d(l){l&&T(e),i&&i.d()}}}function Ao(n,e,t){let i,r;const o=["size","title"];let l=ue(e,o),{size:s=16}=e,{title:a=void 0}=e;return n.$$set=u=>{t(5,e=Q(Q({},e),ye(u))),t(3,l=ue(e,o)),"size"in u&&t(0,s=u.size),"title"in u&&t(1,a=u.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||a),t(2,r={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ye(e),[s,a,r,l,i]}class Ro extends oe{constructor(e){super(),le(this,e,Ao,Lo,se,{size:0,title:1})}}const Co=Ro;function Oo(n){let e,t,i,r;const o=n[5].default,l=Le(o,n,n[4],null);let s=[n[3]],a={};for(let u=0;u<s.length;u+=1)a=Q(a,s[u]);return{c(){e=L("ol"),l&&l.c(),ge(e,a),k(e,"bx--list--ordered",!n[1]),k(e,"bx--list--ordered--native",n[1]),k(e,"bx--list--nested",n[0]),k(e,"bx--list--expressive",n[2])},m(u,c){x(u,e,c),l&&l.m(e,null),t=!0,i||(r=[q(e,"click",n[6]),q(e,"mouseover",n[7]),q(e,"mouseenter",n[8]),q(e,"mouseleave",n[9])],i=!0)},p(u,[c]){l&&l.p&&(!t||c&16)&&Ae(l,o,u,u[4],t?Ce(o,u[4],c,null):Re(u[4]),null),ge(e,a=Pe(s,[c&8&&u[3]])),k(e,"bx--list--ordered",!u[1]),k(e,"bx--list--ordered--native",u[1]),k(e,"bx--list--nested",u[0]),k(e,"bx--list--expressive",u[2])},i(u){t||(C(l,u),t=!0)},o(u){F(l,u),t=!1},d(u){u&&T(e),l&&l.d(u),i=!1,xe(r)}}}function Io(n,e,t){const i=["nested","native","expressive"];let r=ue(e,i),{$$slots:o={},$$scope:l}=e,{nested:s=!1}=e,{native:a=!1}=e,{expressive:u=!1}=e;function c(d){J.call(this,n,d)}function p(d){J.call(this,n,d)}function m(d){J.call(this,n,d)}function f(d){J.call(this,n,d)}return n.$$set=d=>{e=Q(Q({},e),ye(d)),t(3,r=ue(e,i)),"nested"in d&&t(0,s=d.nested),"native"in d&&t(1,a=d.native),"expressive"in d&&t(2,u=d.expressive),"$$scope"in d&&t(4,l=d.$$scope)},[s,a,u,r,l,o,c,p,m,f]}class No extends oe{constructor(e){super(),le(this,e,Io,Oo,se,{nested:0,native:1,expressive:2})}}const Bo=No,Fo=n=>({}),hi=n=>({});function mi(n){let e,t;const i=n[11].legendText,r=Le(i,n,n[10],hi),o=r||zo(n);return{c(){e=L("legend"),o&&o.c(),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[2])},m(l,s){x(l,e,s),o&&o.m(e,null),t=!0},p(l,s){r?r.p&&(!t||s&1024)&&Ae(r,i,l,l[10],t?Ce(i,l[10],s,Fo):Re(l[10]),hi):o&&o.p&&(!t||s&2)&&o.p(l,t?s:-1),(!t||s&4)&&k(e,"bx--visually-hidden",l[2])},i(l){t||(C(o,l),t=!0)},o(l){F(o,l),t=!1},d(l){l&&T(e),o&&o.d(l)}}}function zo(n){let e;return{c(){e=V(n[1])},m(t,i){x(t,e,i)},p(t,i){i&2&&fe(e,t[1])},d(t){t&&T(e)}}}function Do(n){let e,t,i,r,o,l,s=(n[1]||n[8].legendText)&&mi(n);const a=n[11].default,u=Le(a,n,n[10],null);let c=[{id:n[5]},n[7]],p={};for(let m=0;m<c.length;m+=1)p=Q(p,c[m]);return{c(){e=L("div"),t=L("fieldset"),s&&s.c(),i=O(),u&&u.c(),t.disabled=n[0],k(t,"bx--radio-button-group",!0),k(t,"bx--radio-button-group--vertical",n[4]==="vertical"),k(t,"bx--radio-button-group--label-left",n[3]==="left"),k(t,"bx--radio-button-group--label-right",n[3]==="right"),ge(e,p),k(e,"bx--form-item",!0)},m(m,f){x(m,e,f),P(e,t),s&&s.m(t,null),P(t,i),u&&u.m(t,null),r=!0,o||(l=[q(e,"click",n[12]),q(e,"mouseover",n[13]),q(e,"mouseenter",n[14]),q(e,"mouseleave",n[15])],o=!0)},p(m,[f]){m[1]||m[8].legendText?s?(s.p(m,f),f&258&&C(s,1)):(s=mi(m),s.c(),C(s,1),s.m(t,i)):s&&(ke(),F(s,1,1,()=>{s=null}),Se()),u&&u.p&&(!r||f&1024)&&Ae(u,a,m,m[10],r?Ce(a,m[10],f,null):Re(m[10]),null),(!r||f&1)&&(t.disabled=m[0]),(!r||f&16)&&k(t,"bx--radio-button-group--vertical",m[4]==="vertical"),(!r||f&8)&&k(t,"bx--radio-button-group--label-left",m[3]==="left"),(!r||f&8)&&k(t,"bx--radio-button-group--label-right",m[3]==="right"),ge(e,p=Pe(c,[(!r||f&32)&&{id:m[5]},f&128&&m[7]])),k(e,"bx--form-item",!0)},i(m){r||(C(s),C(u,m),r=!0)},o(m){F(s),F(u,m),r=!1},d(m){m&&T(e),s&&s.d(),u&&u.d(m),o=!1,xe(l)}}}function Go(n,e,t){const i=["selected","disabled","legendText","hideLegend","labelPosition","orientation","id"];let r=ue(e,i),o,{$$slots:l={},$$scope:s}=e;const a=$t(l);let{selected:u=void 0}=e,{disabled:c=!1}=e,{legendText:p=""}=e,{hideLegend:m=!1}=e,{labelPosition:f="right"}=e,{orientation:d="horizontal"}=e,{id:v=void 0}=e;const E=hr(),A=ut(u);ve(n,A,y=>t(16,o=y)),Cn("RadioButtonGroup",{selectedValue:A,add:({checked:y,value:R})=>{y&&A.set(R)},update:y=>{t(9,u=y)}}),Ot(()=>{Zn(A,o=u,o)}),Br(()=>{Zn(A,o=u,o)}),A.subscribe(y=>{t(9,u=y),E("change",y)});function h(y){J.call(this,n,y)}function g(y){J.call(this,n,y)}function b(y){J.call(this,n,y)}function _(y){J.call(this,n,y)}return n.$$set=y=>{e=Q(Q({},e),ye(y)),t(7,r=ue(e,i)),"selected"in y&&t(9,u=y.selected),"disabled"in y&&t(0,c=y.disabled),"legendText"in y&&t(1,p=y.legendText),"hideLegend"in y&&t(2,m=y.hideLegend),"labelPosition"in y&&t(3,f=y.labelPosition),"orientation"in y&&t(4,d=y.orientation),"id"in y&&t(5,v=y.id),"$$scope"in y&&t(10,s=y.$$scope)},[c,p,m,f,d,v,A,r,a,u,s,l,h,g,b,_]}class qo extends oe{constructor(e){super(),le(this,e,Go,Do,se,{selected:9,disabled:0,legendText:1,hideLegend:2,labelPosition:3,orientation:4,id:5})}}const Yo=qo,Xo=n=>({}),gi=n=>({});function pi(n){let e,t,i,r;const o=n[20].labelText,l=Le(o,n,n[19],gi),s=l||Jo(n);let a=n[5]&&bi(n);return{c(){e=L("div"),t=L("label"),s&&s.c(),i=O(),a&&a.c(),I(t,"for",n[14]),k(t,"bx--label",!0),k(t,"bx--visually-hidden",n[11]),k(t,"bx--label--disabled",n[7]),k(e,"bx--text-area__label-wrapper",!0)},m(u,c){x(u,e,c),P(e,t),s&&s.m(t,null),P(e,i),a&&a.m(e,null),r=!0},p(u,c){l?l.p&&(!r||c[0]&524288)&&Ae(l,o,u,u[19],r?Ce(o,u[19],c,Xo):Re(u[19]),gi):s&&s.p&&(!r||c[0]&1024)&&s.p(u,r?c:[-1,-1]),(!r||c[0]&16384)&&I(t,"for",u[14]),(!r||c[0]&2048)&&k(t,"bx--visually-hidden",u[11]),(!r||c[0]&128)&&k(t,"bx--label--disabled",u[7]),u[5]?a?a.p(u,c):(a=bi(u),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(u){r||(C(s,u),r=!0)},o(u){F(s,u),r=!1},d(u){u&&T(e),s&&s.d(u),a&&a.d()}}}function Jo(n){let e;return{c(){e=V(n[10])},m(t,i){x(t,e,i)},p(t,i){i[0]&1024&&fe(e,t[10])},d(t){t&&T(e)}}}function bi(n){let e,t=n[0].length+"",i,r,o;return{c(){e=L("div"),i=V(t),r=V("/"),o=V(n[5]),k(e,"bx--label",!0),k(e,"bx--label--disabled",n[7])},m(l,s){x(l,e,s),P(e,i),P(e,r),P(e,o)},p(l,s){s[0]&1&&t!==(t=l[0].length+"")&&fe(i,t),s[0]&32&&fe(o,l[5]),s[0]&128&&k(e,"bx--label--disabled",l[7])},d(l){l&&T(e)}}}function vi(n){let e,t;return e=new gr({props:{class:"bx--text-area__invalid-icon"}}),{c(){j(e.$$.fragment)},m(i,r){W(e,i,r),t=!0},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){H(e,i)}}}function _i(n){let e,t;return{c(){e=L("div"),t=V(n[9]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[7])},m(i,r){x(i,e,r),P(e,t)},p(i,r){r[0]&512&&fe(t,i[9]),r[0]&128&&k(e,"bx--form__helper-text--disabled",i[7])},d(i){i&&T(e)}}}function yi(n){let e,t;return{c(){e=L("div"),t=V(n[13]),I(e,"id",n[16]),k(e,"bx--form-requirement",!0)},m(i,r){x(i,e,r),P(e,t)},p(i,r){r[0]&8192&&fe(t,i[13]),r[0]&65536&&I(e,"id",i[16])},d(i){i&&T(e)}}}function Uo(n){let e,t,i,r,o,l,s,a,u,c,p,m,f,d,v=(n[10]||n[17].labelText)&&!n[11]&&pi(n),E=n[12]&&vi(),A=[{"aria-invalid":l=n[12]||void 0},{"aria-describedby":s=n[12]?n[16]:void 0},{disabled:n[7]},{id:n[14]},{name:n[15]},{cols:n[3]},{rows:n[4]},{placeholder:n[2]},{readOnly:n[8]},{maxlength:a=n[5]??void 0},n[18]],h={};for(let _=0;_<A.length;_+=1)h=Q(h,A[_]);let g=!n[12]&&n[9]&&_i(n),b=n[12]&&yi(n);return{c(){e=L("div"),v&&v.c(),t=O(),i=L("div"),E&&E.c(),r=O(),o=L("textarea"),c=O(),g&&g.c(),p=O(),b&&b.c(),ge(o,h),k(o,"bx--text-area",!0),k(o,"bx--text-area--light",n[6]),k(o,"bx--text-area--invalid",n[12]),I(i,"data-invalid",u=n[12]||void 0),k(i,"bx--text-area__wrapper",!0),k(e,"bx--form-item",!0)},m(_,y){x(_,e,y),v&&v.m(e,null),P(e,t),P(e,i),E&&E.m(i,null),P(i,r),P(i,o),o.autofocus&&o.focus(),n[32](o),gt(o,n[0]),P(e,c),g&&g.m(e,null),P(e,p),b&&b.m(e,null),m=!0,f||(d=[q(o,"input",n[33]),q(o,"change",n[25]),q(o,"input",n[26]),q(o,"keydown",n[27]),q(o,"keyup",n[28]),q(o,"focus",n[29]),q(o,"blur",n[30]),q(o,"paste",n[31]),q(e,"click",n[21]),q(e,"mouseover",n[22]),q(e,"mouseenter",n[23]),q(e,"mouseleave",n[24])],f=!0)},p(_,y){(_[10]||_[17].labelText)&&!_[11]?v?(v.p(_,y),y[0]&134144&&C(v,1)):(v=pi(_),v.c(),C(v,1),v.m(e,t)):v&&(ke(),F(v,1,1,()=>{v=null}),Se()),_[12]?E?y[0]&4096&&C(E,1):(E=vi(),E.c(),C(E,1),E.m(i,r)):E&&(ke(),F(E,1,1,()=>{E=null}),Se()),ge(o,h=Pe(A,[(!m||y[0]&4096&&l!==(l=_[12]||void 0))&&{"aria-invalid":l},(!m||y[0]&69632&&s!==(s=_[12]?_[16]:void 0))&&{"aria-describedby":s},(!m||y[0]&128)&&{disabled:_[7]},(!m||y[0]&16384)&&{id:_[14]},(!m||y[0]&32768)&&{name:_[15]},(!m||y[0]&8)&&{cols:_[3]},(!m||y[0]&16)&&{rows:_[4]},(!m||y[0]&4)&&{placeholder:_[2]},(!m||y[0]&256)&&{readOnly:_[8]},(!m||y[0]&32&&a!==(a=_[5]??void 0))&&{maxlength:a},y[0]&262144&&_[18]])),y[0]&1&&gt(o,_[0]),k(o,"bx--text-area",!0),k(o,"bx--text-area--light",_[6]),k(o,"bx--text-area--invalid",_[12]),(!m||y[0]&4096&&u!==(u=_[12]||void 0))&&I(i,"data-invalid",u),!_[12]&&_[9]?g?g.p(_,y):(g=_i(_),g.c(),g.m(e,p)):g&&(g.d(1),g=null),_[12]?b?b.p(_,y):(b=yi(_),b.c(),b.m(e,null)):b&&(b.d(1),b=null)},i(_){m||(C(v),C(E),m=!0)},o(_){F(v),F(E),m=!1},d(_){_&&T(e),v&&v.d(),E&&E.d(),n[32](null),g&&g.d(),b&&b.d(),f=!1,xe(d)}}}function jo(n,e,t){let i;const r=["value","placeholder","cols","rows","maxCount","light","disabled","readonly","helperText","labelText","hideLabel","invalid","invalidText","id","name","ref"];let o=ue(e,r),{$$slots:l={},$$scope:s}=e;const a=$t(l);let{value:u=""}=e,{placeholder:c=""}=e,{cols:p=50}=e,{rows:m=4}=e,{maxCount:f=void 0}=e,{light:d=!1}=e,{disabled:v=!1}=e,{readonly:E=!1}=e,{helperText:A=""}=e,{labelText:h=""}=e,{hideLabel:g=!1}=e,{invalid:b=!1}=e,{invalidText:_=""}=e,{id:y="ccs-"+Math.random().toString(36)}=e,{name:R=void 0}=e,{ref:M=null}=e;function N(S){J.call(this,n,S)}function D(S){J.call(this,n,S)}function w(S){J.call(this,n,S)}function z(S){J.call(this,n,S)}function B(S){J.call(this,n,S)}function Y(S){J.call(this,n,S)}function G(S){J.call(this,n,S)}function U(S){J.call(this,n,S)}function $(S){J.call(this,n,S)}function ie(S){J.call(this,n,S)}function ae(S){J.call(this,n,S)}function ce(S){he[S?"unshift":"push"](()=>{M=S,t(1,M)})}function Z(){u=this.value,t(0,u)}return n.$$set=S=>{e=Q(Q({},e),ye(S)),t(18,o=ue(e,r)),"value"in S&&t(0,u=S.value),"placeholder"in S&&t(2,c=S.placeholder),"cols"in S&&t(3,p=S.cols),"rows"in S&&t(4,m=S.rows),"maxCount"in S&&t(5,f=S.maxCount),"light"in S&&t(6,d=S.light),"disabled"in S&&t(7,v=S.disabled),"readonly"in S&&t(8,E=S.readonly),"helperText"in S&&t(9,A=S.helperText),"labelText"in S&&t(10,h=S.labelText),"hideLabel"in S&&t(11,g=S.hideLabel),"invalid"in S&&t(12,b=S.invalid),"invalidText"in S&&t(13,_=S.invalidText),"id"in S&&t(14,y=S.id),"name"in S&&t(15,R=S.name),"ref"in S&&t(1,M=S.ref),"$$scope"in S&&t(19,s=S.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&t(16,i=`error-${y}`)},[u,M,c,p,m,f,d,v,E,A,h,g,b,_,y,R,i,a,o,s,l,N,D,w,z,B,Y,G,U,$,ie,ae,ce,Z]}class Wo extends oe{constructor(e){super(),le(this,e,jo,Uo,se,{value:0,placeholder:2,cols:3,rows:4,maxCount:5,light:6,disabled:7,readonly:8,helperText:9,labelText:10,hideLabel:11,invalid:12,invalidText:13,id:14,name:15,ref:1},null,[-1,-1])}}const Ho=Wo,Vo=n=>({}),wi=n=>({}),Zo=n=>({}),ki=n=>({});function Si(n){let e,t,i,r=n[9]&&Ei(n),o=!n[20]&&n[6]&&Mi(n);return{c(){e=L("div"),r&&r.c(),t=O(),o&&o.c(),k(e,"bx--text-input__label-helper-wrapper",!0)},m(l,s){x(l,e,s),r&&r.m(e,null),P(e,t),o&&o.m(e,null),i=!0},p(l,s){l[9]?r?(r.p(l,s),s[0]&512&&C(r,1)):(r=Ei(l),r.c(),C(r,1),r.m(e,t)):r&&(ke(),F(r,1,1,()=>{r=null}),Se()),!l[20]&&l[6]?o?o.p(l,s):(o=Mi(l),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(l){i||(C(r),i=!0)},o(l){F(r),i=!1},d(l){l&&T(e),r&&r.d(),o&&o.d()}}}function Ei(n){let e,t;const i=n[26].labelText,r=Le(i,n,n[25],ki),o=r||Qo(n);return{c(){e=L("label"),o&&o.c(),I(e,"for",n[7]),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[10]),k(e,"bx--label--disabled",n[5]),k(e,"bx--label--inline",n[16]),k(e,"bx--label--inline--sm",n[2]==="sm"),k(e,"bx--label--inline--xl",n[2]==="xl")},m(l,s){x(l,e,s),o&&o.m(e,null),t=!0},p(l,s){r?r.p&&(!t||s[0]&33554432)&&Ae(r,i,l,l[25],t?Ce(i,l[25],s,Zo):Re(l[25]),ki):o&&o.p&&(!t||s[0]&512)&&o.p(l,t?s:[-1,-1]),(!t||s[0]&128)&&I(e,"for",l[7]),(!t||s[0]&1024)&&k(e,"bx--visually-hidden",l[10]),(!t||s[0]&32)&&k(e,"bx--label--disabled",l[5]),(!t||s[0]&65536)&&k(e,"bx--label--inline",l[16]),(!t||s[0]&4)&&k(e,"bx--label--inline--sm",l[2]==="sm"),(!t||s[0]&4)&&k(e,"bx--label--inline--xl",l[2]==="xl")},i(l){t||(C(o,l),t=!0)},o(l){F(o,l),t=!1},d(l){l&&T(e),o&&o.d(l)}}}function Qo(n){let e;return{c(){e=V(n[9])},m(t,i){x(t,e,i)},p(t,i){i[0]&512&&fe(e,t[9])},d(t){t&&T(e)}}}function Mi(n){let e,t;return{c(){e=L("div"),t=V(n[6]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[5]),k(e,"bx--form__helper-text--inline",n[16])},m(i,r){x(i,e,r),P(e,t)},p(i,r){r[0]&64&&fe(t,i[6]),r[0]&32&&k(e,"bx--form__helper-text--disabled",i[5]),r[0]&65536&&k(e,"bx--form__helper-text--inline",i[16])},d(i){i&&T(e)}}}function Pi(n){let e,t;const i=n[26].labelText,r=Le(i,n,n[25],wi),o=r||Ko(n);return{c(){e=L("label"),o&&o.c(),I(e,"for",n[7]),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[10]),k(e,"bx--label--disabled",n[5]),k(e,"bx--label--inline",n[16]),k(e,"bx--label--inline-sm",n[16]&&n[2]==="sm"),k(e,"bx--label--inline-xl",n[16]&&n[2]==="xl")},m(l,s){x(l,e,s),o&&o.m(e,null),t=!0},p(l,s){r?r.p&&(!t||s[0]&33554432)&&Ae(r,i,l,l[25],t?Ce(i,l[25],s,Vo):Re(l[25]),wi):o&&o.p&&(!t||s[0]&512)&&o.p(l,t?s:[-1,-1]),(!t||s[0]&128)&&I(e,"for",l[7]),(!t||s[0]&1024)&&k(e,"bx--visually-hidden",l[10]),(!t||s[0]&32)&&k(e,"bx--label--disabled",l[5]),(!t||s[0]&65536)&&k(e,"bx--label--inline",l[16]),(!t||s[0]&65540)&&k(e,"bx--label--inline-sm",l[16]&&l[2]==="sm"),(!t||s[0]&65540)&&k(e,"bx--label--inline-xl",l[16]&&l[2]==="xl")},i(l){t||(C(o,l),t=!0)},o(l){F(o,l),t=!1},d(l){l&&T(e),o&&o.d(l)}}}function Ko(n){let e;return{c(){e=V(n[9])},m(t,i){x(t,e,i)},p(t,i){i[0]&512&&fe(e,t[9])},d(t){t&&T(e)}}}function xi(n){let e,t;return e=new gr({props:{class:"bx--text-input__invalid-icon"}}),{c(){j(e.$$.fragment)},m(i,r){W(e,i,r),t=!0},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){H(e,i)}}}function Ti(n){let e,t;return e=new So({props:{class:`bx--text-input__invalid-icon
            bx--text-input__invalid-icon--warning`}}),{c(){j(e.$$.fragment)},m(i,r){W(e,i,r),t=!0},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){H(e,i)}}}function Li(n){let e,t;return e=new Co({props:{class:"bx--text-input__readonly-icon"}}),{c(){j(e.$$.fragment)},m(i,r){W(e,i,r),t=!0},i(i){t||(C(e.$$.fragment,i),t=!0)},o(i){F(e.$$.fragment,i),t=!1},d(i){H(e,i)}}}function Ai(n){let e;return{c(){e=L("hr"),k(e,"bx--text-input__divider",!0)},m(t,i){x(t,e,i)},d(t){t&&T(e)}}}function Ri(n){let e,t;return{c(){e=L("div"),t=V(n[12]),I(e,"id",n[19]),k(e,"bx--form-requirement",!0)},m(i,r){x(i,e,r),P(e,t)},p(i,r){r[0]&4096&&fe(t,i[12]),r[0]&524288&&I(e,"id",i[19])},d(i){i&&T(e)}}}function Ci(n){let e,t;return{c(){e=L("div"),t=V(n[14]),I(e,"id",n[18]),k(e,"bx--form-requirement",!0)},m(i,r){x(i,e,r),P(e,t)},p(i,r){r[0]&16384&&fe(t,i[14]),r[0]&262144&&I(e,"id",i[18])},d(i){i&&T(e)}}}function Oi(n){let e,t;return{c(){e=L("div"),t=V(n[6]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[5]),k(e,"bx--form__helper-text--inline",n[16])},m(i,r){x(i,e,r),P(e,t)},p(i,r){r[0]&64&&fe(t,i[6]),r[0]&32&&k(e,"bx--form__helper-text--disabled",i[5]),r[0]&65536&&k(e,"bx--form__helper-text--inline",i[16])},d(i){i&&T(e)}}}function Ii(n){let e,t;return{c(){e=L("div"),t=V(n[12]),I(e,"id",n[19]),k(e,"bx--form-requirement",!0)},m(i,r){x(i,e,r),P(e,t)},p(i,r){r[0]&4096&&fe(t,i[12]),r[0]&524288&&I(e,"id",i[19])},d(i){i&&T(e)}}}function Ni(n){let e,t;return{c(){e=L("div"),t=V(n[14]),I(e,"id",n[18]),k(e,"bx--form-requirement",!0)},m(i,r){x(i,e,r),P(e,t)},p(i,r){r[0]&16384&&fe(t,i[14]),r[0]&262144&&I(e,"id",i[18])},d(i){i&&T(e)}}}function $o(n){let e,t,i,r,o,l,s,a,u,c,p,m,f,d,v,E,A,h,g,b,_,y,R,M,N=n[16]&&Si(n),D=!n[16]&&(n[9]||n[24].labelText)&&Pi(n),w=n[11]&&xi(),z=!n[11]&&n[13]&&Ti(),B=n[17]&&Li(),Y=[{"data-invalid":c=n[11]||void 0},{"aria-invalid":p=n[11]||void 0},{"data-warn":m=n[13]||void 0},{"aria-describedby":f=n[11]?n[19]:n[13]?n[18]:void 0},{disabled:n[5]},{id:n[7]},{name:n[8]},{placeholder:n[3]},{required:n[15]},{readOnly:n[17]},n[23]],G={};for(let S=0;S<Y.length;S+=1)G=Q(G,Y[S]);let U=n[20]&&Ai(),$=n[20]&&!n[16]&&n[11]&&Ri(n),ie=n[20]&&!n[16]&&n[13]&&Ci(n),ae=!n[11]&&!n[13]&&!n[20]&&!n[16]&&n[6]&&Oi(n),ce=!n[20]&&n[11]&&Ii(n),Z=!n[20]&&!n[11]&&n[13]&&Ni(n);return{c(){e=L("div"),N&&N.c(),t=O(),D&&D.c(),i=O(),r=L("div"),o=L("div"),w&&w.c(),l=O(),z&&z.c(),s=O(),B&&B.c(),a=O(),u=L("input"),d=O(),U&&U.c(),v=O(),$&&$.c(),E=O(),ie&&ie.c(),g=O(),ae&&ae.c(),b=O(),ce&&ce.c(),_=O(),Z&&Z.c(),ge(u,G),k(u,"bx--text-input",!0),k(u,"bx--text-input--light",n[4]),k(u,"bx--text-input--invalid",n[11]),k(u,"bx--text-input--warn",n[13]),k(u,"bx--text-input--sm",n[2]==="sm"),k(u,"bx--text-input--xl",n[2]==="xl"),I(o,"data-invalid",A=n[11]||void 0),I(o,"data-warn",h=n[13]||void 0),k(o,"bx--text-input__field-wrapper",!0),k(o,"bx--text-input__field-wrapper--warning",!n[11]&&n[13]),k(r,"bx--text-input__field-outer-wrapper",!0),k(r,"bx--text-input__field-outer-wrapper--inline",n[16]),k(e,"bx--form-item",!0),k(e,"bx--text-input-wrapper",!0),k(e,"bx--text-input-wrapper--inline",n[16]),k(e,"bx--text-input-wrapper--light",n[4]),k(e,"bx--text-input-wrapper--readonly",n[17])},m(S,ee){x(S,e,ee),N&&N.m(e,null),P(e,t),D&&D.m(e,null),P(e,i),P(e,r),P(r,o),w&&w.m(o,null),P(o,l),z&&z.m(o,null),P(o,s),B&&B.m(o,null),P(o,a),P(o,u),u.autofocus&&u.focus(),n[36](u),gt(u,n[0]),P(o,d),U&&U.m(o,null),P(o,v),$&&$.m(o,null),P(o,E),ie&&ie.m(o,null),P(r,g),ae&&ae.m(r,null),P(r,b),ce&&ce.m(r,null),P(r,_),Z&&Z.m(r,null),y=!0,R||(M=[q(u,"input",n[37]),q(u,"change",n[22]),q(u,"input",n[21]),q(u,"keydown",n[31]),q(u,"keyup",n[32]),q(u,"focus",n[33]),q(u,"blur",n[34]),q(u,"paste",n[35]),q(e,"click",n[27]),q(e,"mouseover",n[28]),q(e,"mouseenter",n[29]),q(e,"mouseleave",n[30])],R=!0)},p(S,ee){S[16]?N?(N.p(S,ee),ee[0]&65536&&C(N,1)):(N=Si(S),N.c(),C(N,1),N.m(e,t)):N&&(ke(),F(N,1,1,()=>{N=null}),Se()),!S[16]&&(S[9]||S[24].labelText)?D?(D.p(S,ee),ee[0]&16843264&&C(D,1)):(D=Pi(S),D.c(),C(D,1),D.m(e,i)):D&&(ke(),F(D,1,1,()=>{D=null}),Se()),S[11]?w?ee[0]&2048&&C(w,1):(w=xi(),w.c(),C(w,1),w.m(o,l)):w&&(ke(),F(w,1,1,()=>{w=null}),Se()),!S[11]&&S[13]?z?ee[0]&10240&&C(z,1):(z=Ti(),z.c(),C(z,1),z.m(o,s)):z&&(ke(),F(z,1,1,()=>{z=null}),Se()),S[17]?B?ee[0]&131072&&C(B,1):(B=Li(),B.c(),C(B,1),B.m(o,a)):B&&(ke(),F(B,1,1,()=>{B=null}),Se()),ge(u,G=Pe(Y,[(!y||ee[0]&2048&&c!==(c=S[11]||void 0))&&{"data-invalid":c},(!y||ee[0]&2048&&p!==(p=S[11]||void 0))&&{"aria-invalid":p},(!y||ee[0]&8192&&m!==(m=S[13]||void 0))&&{"data-warn":m},(!y||ee[0]&796672&&f!==(f=S[11]?S[19]:S[13]?S[18]:void 0))&&{"aria-describedby":f},(!y||ee[0]&32)&&{disabled:S[5]},(!y||ee[0]&128)&&{id:S[7]},(!y||ee[0]&256)&&{name:S[8]},(!y||ee[0]&8)&&{placeholder:S[3]},(!y||ee[0]&32768)&&{required:S[15]},(!y||ee[0]&131072)&&{readOnly:S[17]},ee[0]&8388608&&S[23]])),ee[0]&1&&u.value!==S[0]&&gt(u,S[0]),k(u,"bx--text-input",!0),k(u,"bx--text-input--light",S[4]),k(u,"bx--text-input--invalid",S[11]),k(u,"bx--text-input--warn",S[13]),k(u,"bx--text-input--sm",S[2]==="sm"),k(u,"bx--text-input--xl",S[2]==="xl"),S[20]?U||(U=Ai(),U.c(),U.m(o,v)):U&&(U.d(1),U=null),S[20]&&!S[16]&&S[11]?$?$.p(S,ee):($=Ri(S),$.c(),$.m(o,E)):$&&($.d(1),$=null),S[20]&&!S[16]&&S[13]?ie?ie.p(S,ee):(ie=Ci(S),ie.c(),ie.m(o,null)):ie&&(ie.d(1),ie=null),(!y||ee[0]&2048&&A!==(A=S[11]||void 0))&&I(o,"data-invalid",A),(!y||ee[0]&8192&&h!==(h=S[13]||void 0))&&I(o,"data-warn",h),(!y||ee[0]&10240)&&k(o,"bx--text-input__field-wrapper--warning",!S[11]&&S[13]),!S[11]&&!S[13]&&!S[20]&&!S[16]&&S[6]?ae?ae.p(S,ee):(ae=Oi(S),ae.c(),ae.m(r,b)):ae&&(ae.d(1),ae=null),!S[20]&&S[11]?ce?ce.p(S,ee):(ce=Ii(S),ce.c(),ce.m(r,_)):ce&&(ce.d(1),ce=null),!S[20]&&!S[11]&&S[13]?Z?Z.p(S,ee):(Z=Ni(S),Z.c(),Z.m(r,null)):Z&&(Z.d(1),Z=null),(!y||ee[0]&65536)&&k(r,"bx--text-input__field-outer-wrapper--inline",S[16]),(!y||ee[0]&65536)&&k(e,"bx--text-input-wrapper--inline",S[16]),(!y||ee[0]&16)&&k(e,"bx--text-input-wrapper--light",S[4]),(!y||ee[0]&131072)&&k(e,"bx--text-input-wrapper--readonly",S[17])},i(S){y||(C(N),C(D),C(w),C(z),C(B),y=!0)},o(S){F(N),F(D),F(w),F(z),F(B),y=!1},d(S){S&&T(e),N&&N.d(),D&&D.d(),w&&w.d(),z&&z.d(),B&&B.d(),n[36](null),U&&U.d(),$&&$.d(),ie&&ie.d(),ae&&ae.d(),ce&&ce.d(),Z&&Z.d(),R=!1,xe(M)}}}function el(n,e,t){let i,r,o;const l=["size","value","placeholder","light","disabled","helperText","id","name","labelText","hideLabel","invalid","invalidText","warn","warnText","ref","required","inline","readonly"];let s=ue(e,l),{$$slots:a={},$$scope:u}=e;const c=$t(a);let{size:p=void 0}=e,{value:m=""}=e,{placeholder:f=""}=e,{light:d=!1}=e,{disabled:v=!1}=e,{helperText:E=""}=e,{id:A="ccs-"+Math.random().toString(36)}=e,{name:h=void 0}=e,{labelText:g=""}=e,{hideLabel:b=!1}=e,{invalid:_=!1}=e,{invalidText:y=""}=e,{warn:R=!1}=e,{warnText:M=""}=e,{ref:N=null}=e,{required:D=!1}=e,{inline:w=!1}=e,{readonly:z=!1}=e;const B=Kt("Form"),Y=hr();function G(X){return s.type!=="number"?X:X!=""?Number(X):null}const U=X=>{t(0,m=G(X.target.value)),Y("input",m)},$=X=>{Y("change",G(X.target.value))};function ie(X){J.call(this,n,X)}function ae(X){J.call(this,n,X)}function ce(X){J.call(this,n,X)}function Z(X){J.call(this,n,X)}function S(X){J.call(this,n,X)}function ee(X){J.call(this,n,X)}function ln(X){J.call(this,n,X)}function sn(X){J.call(this,n,X)}function vt(X){J.call(this,n,X)}function ne(X){he[X?"unshift":"push"](()=>{N=X,t(1,N)})}function _e(){m=this.value,t(0,m)}return n.$$set=X=>{e=Q(Q({},e),ye(X)),t(23,s=ue(e,l)),"size"in X&&t(2,p=X.size),"value"in X&&t(0,m=X.value),"placeholder"in X&&t(3,f=X.placeholder),"light"in X&&t(4,d=X.light),"disabled"in X&&t(5,v=X.disabled),"helperText"in X&&t(6,E=X.helperText),"id"in X&&t(7,A=X.id),"name"in X&&t(8,h=X.name),"labelText"in X&&t(9,g=X.labelText),"hideLabel"in X&&t(10,b=X.hideLabel),"invalid"in X&&t(11,_=X.invalid),"invalidText"in X&&t(12,y=X.invalidText),"warn"in X&&t(13,R=X.warn),"warnText"in X&&t(14,M=X.warnText),"ref"in X&&t(1,N=X.ref),"required"in X&&t(15,D=X.required),"inline"in X&&t(16,w=X.inline),"readonly"in X&&t(17,z=X.readonly),"$$scope"in X&&t(25,u=X.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&128&&t(19,r=`error-${A}`),n.$$.dirty[0]&128&&t(18,o=`warn-${A}`)},t(20,i=!!B&&B.isFluid),[m,N,p,f,d,v,E,A,h,g,b,_,y,R,M,D,w,z,o,r,i,U,$,s,c,u,a,ie,ae,ce,Z,S,ee,ln,sn,vt,ne,_e]}class tl extends oe{constructor(e){super(),le(this,e,el,$o,se,{size:2,value:0,placeholder:3,light:4,disabled:5,helperText:6,id:7,name:8,labelText:9,hideLabel:10,invalid:11,invalidText:12,warn:13,warnText:14,ref:1,required:15,inline:16,readonly:17},null,[-1,-1])}}const nl=tl;function il(n){let e;return{c(){e=V(`Click one of the draw icons to the top right of the map (the icons allow
      you to draw points, lines, polygons or routes)`)},m(t,i){x(t,e,i)},d(t){t&&T(e)}}}function rl(n){let e;return{c(){e=V(`Draw the intervention on the map, clicking the original point or 'Finish
      snapping' for the Polygon and Route tools respectively`)},m(t,i){x(t,e,i)},d(t){t&&T(e)}}}function ol(n){let e;return{c(){e=V("Fill in the details that appear (Intervention type, name, description)")},m(t,i){x(t,e,i)},d(t){t&&T(e)}}}function ll(n){let e;return{c(){e=V(`Click the "Save" button or "Delete" button to save or remove the
      intervention`)},m(t,i){x(t,e,i)},d(t){t&&T(e)}}}function sl(n){let e,t,i,r,o,l,s,a;return e=new Bt({props:{$$slots:{default:[il]},$$scope:{ctx:n}}}),i=new Bt({props:{$$slots:{default:[rl]},$$scope:{ctx:n}}}),o=new Bt({props:{$$slots:{default:[ol]},$$scope:{ctx:n}}}),s=new Bt({props:{$$slots:{default:[ll]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment),t=O(),j(i.$$.fragment),r=O(),j(o.$$.fragment),l=O(),j(s.$$.fragment)},m(u,c){W(e,u,c),x(u,t,c),W(i,u,c),x(u,r,c),W(o,u,c),x(u,l,c),W(s,u,c),a=!0},p(u,c){const p={};c&4&&(p.$$scope={dirty:c,ctx:u}),e.$set(p);const m={};c&4&&(m.$$scope={dirty:c,ctx:u}),i.$set(m);const f={};c&4&&(f.$$scope={dirty:c,ctx:u}),o.$set(f);const d={};c&4&&(d.$$scope={dirty:c,ctx:u}),s.$set(d)},i(u){a||(C(e.$$.fragment,u),C(i.$$.fragment,u),C(o.$$.fragment,u),C(s.$$.fragment,u),a=!0)},o(u){F(e.$$.fragment,u),F(i.$$.fragment,u),F(o.$$.fragment,u),F(s.$$.fragment,u),a=!1},d(u){H(e,u),u&&T(t),H(i,u),u&&T(r),H(o,u),u&&T(l),H(s,u)}}}function al(n){let e,t,i,r,o,l,s,a,u,c,p,m,f,d,v,E,A,h,g,b,_,y,R,M,N,D;return o=new Bo({props:{$$slots:{default:[sl]},$$scope:{ctx:n}}}),{c(){e=L("p"),e.textContent="For each intervention:",t=O(),i=L("br"),r=O(),j(o.$$.fragment),l=O(),s=L("br"),a=O(),u=L("p"),u.textContent=`Repeat the steps above for each substantial infrastructure intervention in
    the scheme.`,c=O(),p=L("br"),m=O(),f=L("p"),f.textContent=`To make further edits to attribute data, or to delete an intervention, click
    on its name in the left hand panel or its geometry in the map.`,d=O(),v=L("br"),E=O(),A=L("p"),A.textContent=`Click the "Export to GeoJSON" button to download the dataset representing
    the scheme, which can be made up of one or more intervention, as a GeoJSON
    file. After saving the file, you can delete the interventions, change the
    scheme name, and start a new set of interventions representing a new scheme.`,h=O(),g=L("br"),b=O(),_=L("p"),_.textContent=`To load a GeoJSON file that you have already saved from the tool, click the
    "Load from GeoJSON" button and select the file.`,y=O(),R=L("br"),M=O(),N=L("p"),N.innerHTML=`Note: the <strong>Route tool</strong> works by calculating routes between
    start and end points using the existing transport network according to
    OpenStreetMap. Use it by clicking on the location where you would like the
    route to start and then clicking on the location where you would like the
    route to end on the map. The route will be calculated and drawn on the map.
    After you click &quot;Finish snapping&quot; you can edit the route by dragging
    individual points. This can be useful for representing links that are not
    part of the existing transport network, such as a new bridge or path.
    However,
    <strong>you cannot add or remove points</strong> with the Route tool. If the
    planned route intervention you would like to sketch as part of a scheme contains
    one or more new links (for example containing new bridges or paths between cul-de-sacs),
    you may want to use the Line tool instead.`},m(w,z){x(w,e,z),x(w,t,z),x(w,i,z),x(w,r,z),W(o,w,z),x(w,l,z),x(w,s,z),x(w,a,z),x(w,u,z),x(w,c,z),x(w,p,z),x(w,m,z),x(w,f,z),x(w,d,z),x(w,v,z),x(w,E,z),x(w,A,z),x(w,h,z),x(w,g,z),x(w,b,z),x(w,_,z),x(w,y,z),x(w,R,z),x(w,M,z),x(w,N,z),D=!0},p(w,z){const B={};z&4&&(B.$$scope={dirty:z,ctx:w}),o.$set(B)},i(w){D||(C(o.$$.fragment,w),D=!0)},o(w){F(o.$$.fragment,w),D=!1},d(w){w&&T(e),w&&T(t),w&&T(i),w&&T(r),H(o,w),w&&T(l),w&&T(s),w&&T(a),w&&T(u),w&&T(c),w&&T(p),w&&T(m),w&&T(f),w&&T(d),w&&T(v),w&&T(E),w&&T(A),w&&T(h),w&&T(g),w&&T(b),w&&T(_),w&&T(y),w&&T(R),w&&T(M),w&&T(N)}}}function ul(n){let e,t,i;function r(l){n[1](l)}let o={passiveModal:!0,modalHeading:"Instructions",$$slots:{default:[al]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.open=n[0]),e=new Fr({props:o}),he.push(()=>Be(e,"open",r,n[0])),{c(){j(e.$$.fragment)},m(l,s){W(e,l,s),i=!0},p(l,[s]){const a={};s&4&&(a.$$scope={dirty:s,ctx:l}),!t&&s&1&&(t=!0,a.open=l[0],Fe(()=>t=!1)),e.$set(a)},i(l){i||(C(e.$$.fragment,l),i=!0)},o(l){F(e.$$.fragment,l),i=!1},d(l){H(e,l)}}}function fl(n,e,t){let{open:i}=e;function r(o){i=o,t(0,i)}return n.$$set=o=>{"open"in o&&t(0,i=o.open)},[i,r]}class cl extends oe{constructor(e){super(),le(this,e,fl,ul,se,{open:0})}}const He=ut(null),de=ut(st()),Ge=ut(null),hn=ut(null);function st(){return{type:"FeatureCollection",features:[]}}const en=zr(de,n=>{let e=n.features.find(t=>t.properties.editing);return e?e.id:null});function et(n){Dr(en)!=n&&(de.update(e=>{for(let t of e.features)t.id==n?t.properties.editing=!0:delete t.properties.editing;return e}),Ge.set(n))}function Bn(n){let e=new Set;for(let i of n.features)e.add(i.id);let t=e.size+1;for(;e.has(t);)t++;return t}function Bi(n){let e;const t=n[4].default,i=Le(t,n,n[3],null);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o&8)&&Ae(i,t,r,r[3],e?Ce(t,r[3],o,null):Re(r[3]),null)},i(r){e||(C(i,r),e=!0)},o(r){F(i,r),e=!1},d(r){i&&i.d(r)}}}function dl(n){let e,t,i=n[1]&&Bi(n);return{c(){e=L("div"),i&&i.c(),I(e,"class","map svelte-12dpf1u")},m(r,o){x(r,e,o),i&&i.m(e,null),n[5](e),t=!0},p(r,[o]){r[1]?i?(i.p(r,o),o&2&&C(i,1)):(i=Bi(r),i.c(),C(i,1),i.m(e,null)):i&&(ke(),F(i,1,1,()=>{i=null}),Se())},i(r){t||(C(i),t=!0)},o(r){F(i),t=!1},d(r){r&&T(e),i&&i.d(),n[5](null)}}}function hl(n,e,t){let{$$slots:i={},$$scope:r}=e,{style:o}=e,l,s,a=!1;Cn("setCamera",!window.location.hash),Ot(()=>{l=new an.Map({container:s,style:`https://api.maptiler.com/maps/${o}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),l.addControl(new an.ScaleControl),l.addControl(new an.NavigationControl({visualizePitch:!0}),"bottom-right"),l.on("load",()=>{t(1,a=!0),He.set(l)}),new ResizeObserver(()=>{l.resize()}).observe(s)}),On(()=>{l.remove()});function u(c){he[c?"unshift":"push"](()=>{s=c,t(0,s)})}return n.$$set=c=>{"style"in c&&t(2,o=c.style),"$$scope"in c&&t(3,r=c.$$scope)},[s,a,o,r,i,u]}class ml extends oe{constructor(e){super(),le(this,e,hl,dl,se,{style:2})}}const gl=n=>({}),Fi=n=>({}),pl=n=>({}),zi=n=>({}),bl=n=>({}),Di=n=>({});function vl(n){let e,t,i,r,o,l,s,a,u,c,p,m;const f=n[3].nav,d=Le(f,n,n[2],Di),v=n[3].sidebar,E=Le(v,n,n[2],zi),A=n[3].main,h=Le(A,n,n[2],Fi);return{c(){e=L("aside"),t=L("div"),i=L("nav"),d&&d.c(),r=O(),E&&E.c(),o=O(),l=L("div"),l.textContent="",a=O(),u=L("main"),h&&h.c(),I(i,"class","svelte-19nerxn"),I(t,"class","sidebar-content content-container svelte-19nerxn"),I(l,"class","sidebar-toggle rounded-rect svelte-19nerxn"),I(e,"class",s=Qn(n[0]?"":"collapsed")+" svelte-19nerxn"),I(u,"class","svelte-19nerxn")},m(g,b){x(g,e,b),P(e,t),P(t,i),d&&d.m(i,null),P(t,r),E&&E.m(t,null),P(e,o),P(e,l),x(g,a,b),x(g,u,b),h&&h.m(u,null),c=!0,p||(m=q(l,"click",n[1]),p=!0)},p(g,[b]){d&&d.p&&(!c||b&4)&&Ae(d,f,g,g[2],c?Ce(f,g[2],b,bl):Re(g[2]),Di),E&&E.p&&(!c||b&4)&&Ae(E,v,g,g[2],c?Ce(v,g[2],b,pl):Re(g[2]),zi),(!c||b&1&&s!==(s=Qn(g[0]?"":"collapsed")+" svelte-19nerxn"))&&I(e,"class",s),h&&h.p&&(!c||b&4)&&Ae(h,A,g,g[2],c?Ce(A,g[2],b,gl):Re(g[2]),Fi)},i(g){c||(C(d,g),C(E,g),C(h,g),c=!0)},o(g){F(d,g),F(E,g),F(h,g),c=!1},d(g){g&&T(e),d&&d.d(g),E&&E.d(g),g&&T(a),g&&T(u),h&&h.d(g),p=!1,m()}}}function _l(n,e,t){let{$$slots:i={},$$scope:r}=e,o=!0;function l(){t(0,o=!o)}return n.$$set=s=>{"$$scope"in s&&t(2,r=s.$$scope)},[o,l,r,i]}class yl extends oe{constructor(e){super(),le(this,e,_l,vl,se,{})}}var we=63710088e-1,Fn={centimeters:we*100,centimetres:we*100,degrees:we/111325,feet:we*3.28084,inches:we*39.37,kilometers:we/1e3,kilometres:we/1e3,meters:we,metres:we,miles:we/1609.344,millimeters:we*1e3,millimetres:we*1e3,nauticalmiles:we/1852,radians:1,yards:we*1.0936},wl={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/we,yards:1.0936133},mn={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function ze(n,e,t){t===void 0&&(t={});var i={type:"Feature"};return(t.id===0||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function kl(n,e,t){switch(n){case"Point":return Te(e).geometry;case"LineString":return Ie(e).geometry;case"Polygon":return tn(e).geometry;case"MultiPoint":return br(e).geometry;case"MultiLineString":return pr(e).geometry;case"MultiPolygon":return zn(e).geometry;default:throw new Error(n+" is invalid")}}function Te(n,e,t){if(t===void 0&&(t={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Jt(n[0])||!Jt(n[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:n};return ze(i,e,t)}function Sl(n,e,t){return t===void 0&&(t={}),at(n.map(function(i){return Te(i,e)}),t)}function tn(n,e,t){t===void 0&&(t={});for(var i=0,r=n;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<o[o.length-1].length;l++)if(o[o.length-1][l]!==o[0][l])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:n};return ze(s,e,t)}function El(n,e,t){return t===void 0&&(t={}),at(n.map(function(i){return tn(i,e)}),t)}function Ie(n,e,t){if(t===void 0&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:n};return ze(i,e,t)}function Ml(n,e,t){return t===void 0&&(t={}),at(n.map(function(i){return Ie(i,e)}),t)}function at(n,e){e===void 0&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function pr(n,e,t){t===void 0&&(t={});var i={type:"MultiLineString",coordinates:n};return ze(i,e,t)}function br(n,e,t){t===void 0&&(t={});var i={type:"MultiPoint",coordinates:n};return ze(i,e,t)}function zn(n,e,t){t===void 0&&(t={});var i={type:"MultiPolygon",coordinates:n};return ze(i,e,t)}function Pl(n,e,t){t===void 0&&(t={});var i={type:"GeometryCollection",geometries:n};return ze(i,e,t)}function xl(n,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(n*t)/t}function Dn(n,e){e===void 0&&(e="kilometers");var t=Fn[e];if(!t)throw new Error(e+" units is invalid");return n*t}function nn(n,e){e===void 0&&(e="kilometers");var t=Fn[e];if(!t)throw new Error(e+" units is invalid");return n/t}function Tl(n,e){return Pt(nn(n,e))}function Ll(n){var e=n%360;return e<0&&(e+=360),e}function Pt(n){var e=n%(2*Math.PI);return e*180/Math.PI}function Ne(n){var e=n%360;return e*Math.PI/180}function Al(n,e,t){if(e===void 0&&(e="kilometers"),t===void 0&&(t="kilometers"),!(n>=0))throw new Error("length must be a positive number");return Dn(nn(n,e),t)}function Rl(n,e,t){if(e===void 0&&(e="meters"),t===void 0&&(t="kilometers"),!(n>=0))throw new Error("area must be a positive number");var i=mn[e];if(!i)throw new Error("invalid original units");var r=mn[t];if(!r)throw new Error("invalid final units");return n/i*r}function Jt(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function Gn(n){return!!n&&n.constructor===Object}function Cl(n){if(!n)throw new Error("bbox is required");if(!Array.isArray(n))throw new Error("bbox must be an Array");if(n.length!==4&&n.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");n.forEach(function(e){if(!Jt(e))throw new Error("bbox must only contain numbers")})}function Ol(n){if(!n)throw new Error("id is required");if(["string","number"].indexOf(typeof n)===-1)throw new Error("id must be a number or a string")}const Il=Object.freeze(Object.defineProperty({__proto__:null,earthRadius:we,factors:Fn,unitsFactors:wl,areaFactors:mn,feature:ze,geometry:kl,point:Te,points:Sl,polygon:tn,polygons:El,lineString:Ie,lineStrings:Ml,featureCollection:at,multiLineString:pr,multiPoint:br,multiPolygon:zn,geometryCollection:Pl,round:xl,radiansToLength:Dn,lengthToRadians:nn,lengthToDegrees:Tl,bearingToAzimuth:Ll,radiansToDegrees:Pt,degreesToRadians:Ne,convertLength:Al,convertArea:Rl,isNumber:Jt,isObject:Gn,validateBBox:Cl,validateId:Ol},Symbol.toStringTag,{value:"Module"}));/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Nl(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,l;return l={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function s(u){return function(c){return a([u,c])}}function a(u){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,r&&(o=u[0]&2?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,r=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],r=0}finally{i=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var nt=function(){function n(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return n}();function Bl(n,e){return n>e?1:n<e?-1:0}function Qe(n,e,t){for(var i=new nt(null,null),r=i,o=i;;){var l=t(n,e.key);if(l<0){if(e.left===null)break;if(t(n,e.left.key)<0){var s=e.left;if(e.left=s.right,s.right=e,e=s,e.left===null)break}o.left=e,o=e,e=e.left}else if(l>0){if(e.right===null)break;if(t(n,e.right.key)>0){var s=e.right;if(e.right=s.left,s.left=e,e=s,e.right===null)break}r.right=e,r=e,e=e.right}else break}return r.right=e.left,o.left=e.right,e.left=i.right,e.right=i.left,e}function un(n,e,t,i){var r=new nt(n,e);if(t===null)return r.left=r.right=null,r;t=Qe(n,t,i);var o=i(n,t.key);return o<0?(r.left=t.left,r.right=t,t.left=null):o>=0&&(r.right=t.right,r.left=t,t.right=null),r}function Gi(n,e,t){var i=null,r=null;if(e){e=Qe(n,e,t);var o=t(e.key,n);o===0?(i=e.left,r=e.right):o<0?(r=e.right,e.right=null,i=e):(i=e.left,e.left=null,r=e)}return{left:i,right:r}}function Fl(n,e,t){return e===null?n:(n===null||(e=Qe(n.key,e,t),e.left=n),e)}function gn(n,e,t,i,r){if(n){i(""+e+(t?" ":" ")+r(n)+`
`);var o=e+(t?"    ":"   ");n.left&&gn(n.left,o,!1,i,r),n.right&&gn(n.right,o,!0,i,r)}}var qn=function(){function n(e){e===void 0&&(e=Bl),this._root=null,this._size=0,this._comparator=e}return n.prototype.insert=function(e,t){return this._size++,this._root=un(e,t,this._root,this._comparator)},n.prototype.add=function(e,t){var i=new nt(e,t);this._root===null&&(i.left=i.right=null,this._size++,this._root=i);var r=this._comparator,o=Qe(e,this._root,r),l=r(e,o.key);return l===0?this._root=o:(l<0?(i.left=o.left,i.right=o,o.left=null):l>0&&(i.right=o.right,i.left=o,o.right=null),this._size++,this._root=i),this._root},n.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},n.prototype._remove=function(e,t,i){var r;if(t===null)return null;t=Qe(e,t,i);var o=i(e,t.key);return o===0?(t.left===null?r=t.right:(r=Qe(e,t.left,i),r.right=t.right),this._size--,r):t},n.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=Qe(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},n.prototype.findStatic=function(e){for(var t=this._root,i=this._comparator;t;){var r=i(e,t.key);if(r===0)return t;r<0?t=t.left:t=t.right}return null},n.prototype.find=function(e){return this._root&&(this._root=Qe(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},n.prototype.contains=function(e){for(var t=this._root,i=this._comparator;t;){var r=i(e,t.key);if(r===0)return!0;r<0?t=t.left:t=t.right}return!1},n.prototype.forEach=function(e,t){for(var i=this._root,r=[],o=!1;!o;)i!==null?(r.push(i),i=i.left):r.length!==0?(i=r.pop(),e.call(t,i),i=i.right):o=!0;return this},n.prototype.range=function(e,t,i,r){for(var o=[],l=this._comparator,s=this._root,a;o.length!==0||s;)if(s)o.push(s),s=s.left;else{if(s=o.pop(),a=l(s.key,t),a>0)break;if(l(s.key,e)>=0&&i.call(r,s))return this;s=s.right}return this},n.prototype.keys=function(){var e=[];return this.forEach(function(t){var i=t.key;return e.push(i)}),e},n.prototype.values=function(){var e=[];return this.forEach(function(t){var i=t.data;return e.push(i)}),e},n.prototype.min=function(){return this._root?this.minNode(this._root).key:null},n.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},n.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},n.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},n.prototype.at=function(e){for(var t=this._root,i=!1,r=0,o=[];!i;)if(t)o.push(t),t=t.left;else if(o.length>0){if(t=o.pop(),r===e)return t;r++,t=t.right}else i=!0;return null},n.prototype.next=function(e){var t=this._root,i=null;if(e.right){for(i=e.right;i.left;)i=i.left;return i}for(var r=this._comparator;t;){var o=r(e.key,t.key);if(o===0)break;o<0?(i=t,t=t.left):t=t.right}return i},n.prototype.prev=function(e){var t=this._root,i=null;if(e.left!==null){for(i=e.left;i.right;)i=i.right;return i}for(var r=this._comparator;t;){var o=r(e.key,t.key);if(o===0)break;o<0?t=t.left:(i=t,t=t.right)}return i},n.prototype.clear=function(){return this._root=null,this._size=0,this},n.prototype.toList=function(){return Dl(this._root)},n.prototype.load=function(e,t,i){t===void 0&&(t=[]),i===void 0&&(i=!1);var r=e.length,o=this._comparator;if(i&&vn(e,t,0,r-1,o),this._root===null)this._root=pn(e,t,0,r),this._size=r;else{var l=Gl(this.toList(),zl(e,t),o);r=this._size+r,this._root=bn({head:l},0,r)}return this},n.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){e===void 0&&(e=function(i){return String(i.key)});var t=[];return gn(this._root,"",!0,function(i){return t.push(i)},e),t.join("")},n.prototype.update=function(e,t,i){var r=this._comparator,o=Gi(e,this._root,r),l=o.left,s=o.right;r(e,t)<0?s=un(t,i,s,r):l=un(t,i,l,r),this._root=Fl(l,s,r)},n.prototype.split=function(e){return Gi(e,this._root,this._comparator)},n.prototype[Symbol.iterator]=function(){var e;return Nl(this,function(t){switch(t.label){case 0:e=this.minNode(),t.label=1;case 1:return e?[4,e]:[3,3];case 2:return t.sent(),e=this.next(e),[3,1];case 3:return[2]}})},n}();function pn(n,e,t,i){var r=i-t;if(r>0){var o=t+Math.floor(r/2),l=n[o],s=e[o],a=new nt(l,s);return a.left=pn(n,e,t,o),a.right=pn(n,e,o+1,i),a}return null}function zl(n,e){for(var t=new nt(null,null),i=t,r=0;r<n.length;r++)i=i.next=new nt(n[r],e[r]);return i.next=null,t.next}function Dl(n){for(var e=n,t=[],i=!1,r=new nt(null,null),o=r;!i;)e?(t.push(e),e=e.left):t.length>0?(e=o=o.next=t.pop(),e=e.right):i=!0;return o.next=null,r.next}function bn(n,e,t){var i=t-e;if(i>0){var r=e+Math.floor(i/2),o=bn(n,e,r),l=n.head;return l.left=o,n.head=n.head.next,l.right=bn(n,r+1,t),l}return null}function Gl(n,e,t){for(var i=new nt(null,null),r=i,o=n,l=e;o!==null&&l!==null;)t(o.key,l.key)<0?(r.next=o,o=o.next):(r.next=l,l=l.next),r=r.next;return o!==null?r.next=o:l!==null&&(r.next=l),i.next}function vn(n,e,t,i,r){if(!(t>=i)){for(var o=n[t+i>>1],l=t-1,s=i+1;;){do l++;while(r(n[l],o)<0);do s--;while(r(n[s],o)>0);if(l>=s)break;var a=n[l];n[l]=n[s],n[s]=a,a=e[l],e[l]=e[s],e[s]=a}vn(n,e,t,s,r),vn(n,e,s+1,i,r)}}function De(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function qi(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function Me(n,e,t){return e&&qi(n.prototype,e),t&&qi(n,t),n}var yt=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},_n=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var i=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x,o=e.ll.y<t.ll.y?t.ll.y:e.ll.y,l=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:i,y:o},ur:{x:r,y:l}}},Ke=Number.EPSILON;Ke===void 0&&(Ke=Math.pow(2,-52));var ql=Ke*Ke,yn=function(e,t){if(-Ke<e&&e<Ke&&-Ke<t&&t<Ke)return 0;var i=e-t;return i*i<ql*e*t?0:e<t?-1:1},Yl=function(){function n(){De(this,n),this.reset()}return Me(n,[{key:"reset",value:function(){this.xRounder=new Yi,this.yRounder=new Yi}},{key:"round",value:function(t,i){return{x:this.xRounder.round(t),y:this.yRounder.round(i)}}}]),n}(),Yi=function(){function n(){De(this,n),this.tree=new qn,this.round(0)}return Me(n,[{key:"round",value:function(t){var i=this.tree.add(t),r=this.tree.prev(i);if(r!==null&&yn(i.key,r.key)===0)return this.tree.remove(t),r.key;var o=this.tree.next(i);return o!==null&&yn(i.key,o.key)===0?(this.tree.remove(t),o.key):t}}]),n}(),xt=new Yl,St=function(e,t){return e.x*t.y-e.y*t.x},vr=function(e,t){return e.x*t.x+e.y*t.y},Xi=function(e,t,i){var r={x:t.x-e.x,y:t.y-e.y},o={x:i.x-e.x,y:i.y-e.y},l=St(r,o);return yn(l,0)},Ut=function(e){return Math.sqrt(vr(e,e))},Xl=function(e,t,i){var r={x:t.x-e.x,y:t.y-e.y},o={x:i.x-e.x,y:i.y-e.y};return St(o,r)/Ut(o)/Ut(r)},Jl=function(e,t,i){var r={x:t.x-e.x,y:t.y-e.y},o={x:i.x-e.x,y:i.y-e.y};return vr(o,r)/Ut(o)/Ut(r)},Ji=function(e,t,i){return t.y===0?null:{x:e.x+t.x/t.y*(i-e.y),y:i}},Ui=function(e,t,i){return t.x===0?null:{x:i,y:e.y+t.y/t.x*(i-e.x)}},Ul=function(e,t,i,r){if(t.x===0)return Ui(i,r,e.x);if(r.x===0)return Ui(e,t,i.x);if(t.y===0)return Ji(i,r,e.y);if(r.y===0)return Ji(e,t,i.y);var o=St(t,r);if(o==0)return null;var l={x:i.x-e.x,y:i.y-e.y},s=St(l,t)/o,a=St(l,r)/o,u=e.x+a*t.x,c=i.x+s*r.x,p=e.y+a*t.y,m=i.y+s*r.y,f=(u+c)/2,d=(p+m)/2;return{x:f,y:d}},Je=function(){Me(n,null,[{key:"compare",value:function(t,i){var r=n.comparePoints(t.point,i.point);return r!==0?r:(t.point!==i.point&&t.link(i),t.isLeft!==i.isLeft?t.isLeft?1:-1:jt.compare(t.segment,i.segment))}},{key:"comparePoints",value:function(t,i){return t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0}}]);function n(e,t){De(this,n),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}return Me(n,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var i=t.point.events,r=0,o=i.length;r<o;r++){var l=i[r];this.point.events.push(l),l.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,i=0;i<t;i++){var r=this.point.events[i];if(r.segment.consumedBy===void 0)for(var o=i+1;o<t;o++){var l=this.point.events[o];l.consumedBy===void 0&&r.otherSE.point.events===l.otherSE.point.events&&r.segment.consume(l.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],i=0,r=this.point.events.length;i<r;i++){var o=this.point.events[i];o!==this&&!o.segment.ringOut&&o.segment.isInResult()&&t.push(o)}return t}},{key:"getLeftmostComparator",value:function(t){var i=this,r=new Map,o=function(s){var a=s.otherSE;r.set(s,{sine:Xl(i.point,t.point,a.point),cosine:Jl(i.point,t.point,a.point)})};return function(l,s){r.has(l)||o(l),r.has(s)||o(s);var a=r.get(l),u=a.sine,c=a.cosine,p=r.get(s),m=p.sine,f=p.cosine;return u>=0&&m>=0?c<f?1:c>f?-1:0:u<0&&m<0?c<f?-1:c>f?1:0:m<u?-1:m>u?1:0}}}]),n}(),jl=0,jt=function(){Me(n,null,[{key:"compare",value:function(t,i){var r=t.leftSE.point.x,o=i.leftSE.point.x,l=t.rightSE.point.x,s=i.rightSE.point.x;if(s<r)return 1;if(l<o)return-1;var a=t.leftSE.point.y,u=i.leftSE.point.y,c=t.rightSE.point.y,p=i.rightSE.point.y;if(r<o){if(u<a&&u<c)return 1;if(u>a&&u>c)return-1;var m=t.comparePoint(i.leftSE.point);if(m<0)return 1;if(m>0)return-1;var f=i.comparePoint(t.rightSE.point);return f!==0?f:-1}if(r>o){if(a<u&&a<p)return-1;if(a>u&&a>p)return 1;var d=i.comparePoint(t.leftSE.point);if(d!==0)return d;var v=t.comparePoint(i.rightSE.point);return v<0?1:v>0?-1:1}if(a<u)return-1;if(a>u)return 1;if(l<s){var E=i.comparePoint(t.rightSE.point);if(E!==0)return E}if(l>s){var A=t.comparePoint(i.rightSE.point);if(A<0)return 1;if(A>0)return-1}if(l!==s){var h=c-a,g=l-r,b=p-u,_=s-o;if(h>g&&b<_)return 1;if(h<g&&b>_)return-1}return l>s?1:l<s||c<p?-1:c>p?1:t.id<i.id?-1:t.id>i.id?1:0}}]);function n(e,t,i,r){De(this,n),this.id=++jl,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=i,this.windings=r}return Me(n,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,i=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<i?t:i},ur:{x:this.rightSE.point.x,y:t>i?t:i}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var i=this.leftSE.point,r=this.rightSE.point,o=this.vector();if(i.x===r.x)return t.x===i.x?0:t.x<i.x?1:-1;var l=(t.y-i.y)/o.y,s=i.x+l*o.x;if(t.x===s)return 0;var a=(t.x-i.x)/o.x,u=i.y+a*o.y;return t.y===u?0:t.y<u?-1:1}},{key:"getIntersection",value:function(t){var i=this.bbox(),r=t.bbox(),o=_n(i,r);if(o===null)return null;var l=this.leftSE.point,s=this.rightSE.point,a=t.leftSE.point,u=t.rightSE.point,c=yt(i,a)&&this.comparePoint(a)===0,p=yt(r,l)&&t.comparePoint(l)===0,m=yt(i,u)&&this.comparePoint(u)===0,f=yt(r,s)&&t.comparePoint(s)===0;if(p&&c)return f&&!m?s:!f&&m?u:null;if(p)return m&&l.x===u.x&&l.y===u.y?null:l;if(c)return f&&s.x===a.x&&s.y===a.y?null:a;if(f&&m)return null;if(f)return s;if(m)return u;var d=Ul(l,this.vector(),a,t.vector());return d===null||!yt(o,d)?null:xt.round(d.x,d.y)}},{key:"split",value:function(t){var i=[],r=t.events!==void 0,o=new Je(t,!0),l=new Je(t,!1),s=this.rightSE;this.replaceRightSE(l),i.push(l),i.push(o);var a=new n(o,s,this.rings.slice(),this.windings.slice());return Je.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Je.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(o.checkForConsuming(),l.checkForConsuming()),i}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var i=0,r=this.windings.length;i<r;i++)this.windings[i]*=-1}},{key:"consume",value:function(t){for(var i=this,r=t;i.consumedBy;)i=i.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var o=n.compare(i,r);if(o!==0){if(o>0){var l=i;i=r,r=l}if(i.prev===r){var s=i;i=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var c=r.rings[a],p=r.windings[a],m=i.rings.indexOf(c);m===-1?(i.rings.push(c),i.windings.push(p)):i.windings[m]+=p}r.rings=null,r.windings=null,r.consumedBy=i,r.leftSE.consumedBy=i.leftSE,r.rightSE.consumedBy=i.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var i=this._afterState.rings,r=this._afterState.windings,o=this._afterState.multiPolys,l=0,s=this.rings.length;l<s;l++){var a=this.rings[l],u=this.windings[l],c=i.indexOf(a);c===-1?(i.push(a),r.push(u)):r[c]+=u}for(var p=[],m=[],f=0,d=i.length;f<d;f++)if(r[f]!==0){var v=i[f],E=v.poly;if(m.indexOf(E)===-1)if(v.isExterior)p.push(E);else{m.indexOf(E)===-1&&m.push(E);var A=p.indexOf(v.poly);A!==-1&&p.splice(A,1)}}for(var h=0,g=p.length;h<g;h++){var b=p[h].multiPoly;o.indexOf(b)===-1&&o.push(b)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,i=this.afterState().multiPolys;switch(qe.type){case"union":{var r=t.length===0,o=i.length===0;this._isInResult=r!==o;break}case"intersection":{var l,s;t.length<i.length?(l=t.length,s=i.length):(l=i.length,s=t.length),this._isInResult=s===qe.numMultiPolys&&l<s;break}case"xor":{var a=Math.abs(t.length-i.length);this._isInResult=a%2===1;break}case"difference":{var u=function(p){return p.length===1&&p[0].isSubject};this._isInResult=u(t)!==u(i);break}default:throw new Error("Unrecognized operation type found ".concat(qe.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,i,r){var o,l,s,a=Je.comparePoints(t,i);if(a<0)o=t,l=i,s=1;else if(a>0)o=i,l=t,s=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var u=new Je(o,!0),c=new Je(l,!1);return new n(u,c,[r],[s])}}]),n}(),ji=function(){function n(e,t,i){if(De(this,n),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=i,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var r=xt.round(e[0][0],e[0][1]);this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};for(var o=r,l=1,s=e.length;l<s;l++){if(typeof e[l][0]!="number"||typeof e[l][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var a=xt.round(e[l][0],e[l][1]);a.x===o.x&&a.y===o.y||(this.segments.push(jt.fromRing(o,a,this)),a.x<this.bbox.ll.x&&(this.bbox.ll.x=a.x),a.y<this.bbox.ll.y&&(this.bbox.ll.y=a.y),a.x>this.bbox.ur.x&&(this.bbox.ur.x=a.x),a.y>this.bbox.ur.y&&(this.bbox.ur.y=a.y),o=a)}(r.x!==o.x||r.y!==o.y)&&this.segments.push(jt.fromRing(o,r,this))}return Me(n,[{key:"getSweepEvents",value:function(){for(var t=[],i=0,r=this.segments.length;i<r;i++){var o=this.segments[i];t.push(o.leftSE),t.push(o.rightSE)}return t}}]),n}(),Wl=function(){function n(e,t){if(De(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new ji(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,r=e.length;i<r;i++){var o=new ji(e[i],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=t}return Me(n,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),i=0,r=this.interiorRings.length;i<r;i++)for(var o=this.interiorRings[i].getSweepEvents(),l=0,s=o.length;l<s;l++)t.push(o[l]);return t}}]),n}(),Wi=function(){function n(e,t){if(De(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,r=e.length;i<r;i++){var o=new Wl(e[i],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=t}return Me(n,[{key:"getSweepEvents",value:function(){for(var t=[],i=0,r=this.polys.length;i<r;i++)for(var o=this.polys[i].getSweepEvents(),l=0,s=o.length;l<s;l++)t.push(o[l]);return t}}]),n}(),Hl=function(){Me(n,null,[{key:"factory",value:function(t){for(var i=[],r=0,o=t.length;r<o;r++){var l=t[r];if(!(!l.isInResult()||l.ringOut)){for(var s=null,a=l.leftSE,u=l.rightSE,c=[a],p=a.point,m=[];s=a,a=u,c.push(a),a.point!==p;)for(;;){var f=a.getAvailableLinkedEvents();if(f.length===0){var d=c[0].point,v=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(v.x,", ").concat(v.y,"]."))}if(f.length===1){u=f[0].otherSE;break}for(var E=null,A=0,h=m.length;A<h;A++)if(m[A].point===a.point){E=A;break}if(E!==null){var g=m.splice(E)[0],b=c.splice(g.index);b.unshift(b[0].otherSE),i.push(new n(b.reverse()));continue}m.push({index:c.length,point:a.point});var _=a.getLeftmostComparator(s);u=f.sort(_)[0].otherSE;break}i.push(new n(c))}}return i}}]);function n(e){De(this,n),this.events=e;for(var t=0,i=e.length;t<i;t++)e[t].segment.ringOut=this;this.poly=null}return Me(n,[{key:"getGeom",value:function(){for(var t=this.events[0].point,i=[t],r=1,o=this.events.length-1;r<o;r++){var l=this.events[r].point,s=this.events[r+1].point;Xi(l,t,s)!==0&&(i.push(l),t=l)}if(i.length===1)return null;var a=i[0],u=i[1];Xi(a,t,u)===0&&i.shift(),i.push(i[0]);for(var c=this.isExteriorRing()?1:-1,p=this.isExteriorRing()?0:i.length-1,m=this.isExteriorRing()?i.length:-1,f=[],d=p;d!=m;d+=c)f.push([i[d].x,i[d].y]);return f}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],i=1,r=this.events.length;i<r;i++){var o=this.events[i];Je.compare(t,o)>0&&(t=o)}for(var l=t.segment.prevInResult(),s=l?l.prevInResult():null;;){if(!l)return null;if(!s)return l.ringOut;if(s.ringOut!==l.ringOut)return s.ringOut.enclosingRing()!==l.ringOut?l.ringOut:l.ringOut.enclosingRing();l=s.prevInResult(),s=l?l.prevInResult():null}}}]),n}(),Hi=function(){function n(e){De(this,n),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return Me(n,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var i=0,r=this.interiorRings.length;i<r;i++){var o=this.interiorRings[i].getGeom();o!==null&&t.push(o)}return t}}]),n}(),Vl=function(){function n(e){De(this,n),this.rings=e,this.polys=this._composePolys(e)}return Me(n,[{key:"getGeom",value:function(){for(var t=[],i=0,r=this.polys.length;i<r;i++){var o=this.polys[i].getGeom();o!==null&&t.push(o)}return t}},{key:"_composePolys",value:function(t){for(var i=[],r=0,o=t.length;r<o;r++){var l=t[r];if(!l.poly)if(l.isExteriorRing())i.push(new Hi(l));else{var s=l.enclosingRing();s.poly||i.push(new Hi(s)),s.poly.addInterior(l)}}return i}}]),n}(),Zl=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jt.compare;De(this,n),this.queue=e,this.tree=new qn(t),this.segments=[]}return Me(n,[{key:"process",value:function(t){var i=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(i),r;var o=t.isLeft?this.tree.insert(i):this.tree.find(i);if(!o)throw new Error("Unable to find segment #".concat(i.id," ")+"[".concat(i.leftSE.point.x,", ").concat(i.leftSE.point.y,"] -> ")+"[".concat(i.rightSE.point.x,", ").concat(i.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var l=o,s=o,a=void 0,u=void 0;a===void 0;)l=this.tree.prev(l),l===null?a=null:l.key.consumedBy===void 0&&(a=l.key);for(;u===void 0;)s=this.tree.next(s),s===null?u=null:s.key.consumedBy===void 0&&(u=s.key);if(t.isLeft){var c=null;if(a){var p=a.getIntersection(i);if(p!==null&&(i.isAnEndpoint(p)||(c=p),!a.isAnEndpoint(p)))for(var m=this._splitSafely(a,p),f=0,d=m.length;f<d;f++)r.push(m[f])}var v=null;if(u){var E=u.getIntersection(i);if(E!==null&&(i.isAnEndpoint(E)||(v=E),!u.isAnEndpoint(E)))for(var A=this._splitSafely(u,E),h=0,g=A.length;h<g;h++)r.push(A[h])}if(c!==null||v!==null){var b=null;if(c===null)b=v;else if(v===null)b=c;else{var _=Je.comparePoints(c,v);b=_<=0?c:v}this.queue.remove(i.rightSE),r.push(i.rightSE);for(var y=i.split(b),R=0,M=y.length;R<M;R++)r.push(y[R])}r.length>0?(this.tree.remove(i),r.push(t)):(this.segments.push(i),i.prev=a)}else{if(a&&u){var N=a.getIntersection(u);if(N!==null){if(!a.isAnEndpoint(N))for(var D=this._splitSafely(a,N),w=0,z=D.length;w<z;w++)r.push(D[w]);if(!u.isAnEndpoint(N))for(var B=this._splitSafely(u,N),Y=0,G=B.length;Y<G;Y++)r.push(B[Y])}}this.tree.remove(i)}return r}},{key:"_splitSafely",value:function(t,i){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var o=t.split(i);return o.push(r),t.consumedBy===void 0&&this.tree.insert(t),o}}]),n}(),Vi=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ql=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Kl=function(){function n(){De(this,n)}return Me(n,[{key:"run",value:function(t,i,r){qe.type=t,xt.reset();for(var o=[new Wi(i,!0)],l=0,s=r.length;l<s;l++)o.push(new Wi(r[l],!1));if(qe.numMultiPolys=o.length,qe.type==="difference")for(var a=o[0],u=1;u<o.length;)_n(o[u].bbox,a.bbox)!==null?u++:o.splice(u,1);if(qe.type==="intersection"){for(var c=0,p=o.length;c<p;c++)for(var m=o[c],f=c+1,d=o.length;f<d;f++)if(_n(m.bbox,o[f].bbox)===null)return[]}for(var v=new qn(Je.compare),E=0,A=o.length;E<A;E++)for(var h=o[E].getSweepEvents(),g=0,b=h.length;g<b;g++)if(v.insert(h[g]),v.size>Vi)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new Zl(v),y=v.size,R=v.pop();R;){var M=R.key;if(v.size===y){var N=M.segment;throw new Error("Unable to pop() ".concat(M.isLeft?"left":"right"," SweepEvent ")+"[".concat(M.point.x,", ").concat(M.point.y,"] from segment #").concat(N.id," ")+"[".concat(N.leftSE.point.x,", ").concat(N.leftSE.point.y,"] -> ")+"[".concat(N.rightSE.point.x,", ").concat(N.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(v.size>Vi)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>Ql)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var D=_.process(M),w=0,z=D.length;w<z;w++){var B=D[w];B.consumedBy===void 0&&v.insert(B)}y=v.size,R=v.pop()}xt.reset();var Y=Hl.factory(_.segments),G=new Vl(Y);return G.getGeom()}}]),n}(),qe=new Kl,$l=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return qe.run("union",e,i)},es=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return qe.run("intersection",e,i)},ts=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return qe.run("xor",e,i)},ns=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return qe.run("difference",e,i)},Dt={union:$l,intersection:es,xor:ts,difference:ns};function is(n,e){var t=os(e),i=null;return n.type==="FeatureCollection"?i=rs(n):i=_r(Dt.union(n.geometry.coordinates)),i.geometry.coordinates.forEach(function(r){t.geometry.coordinates.push(r[0])}),t}function rs(n){var e=n.features.length===2?Dt.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):Dt.union.apply(Dt,n.features.map(function(t){return t.geometry.coordinates}));return _r(e)}function _r(n){return zn(n)}function os(n){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],t=n&&n.geometry.coordinates||e;return tn(t)}const ls={"line-cap":"round","line-join":"round"},Yn=["==","$type","Polygon"],Xn=["==","$type","LineString"],Jn=["==","$type","Point"];function Wt(n,e,t=1){return{type:"line",layout:ls,paint:{"line-color":n,"line-width":e,"line-opacity":t}}}function Un(n,e){return{type:"fill",paint:{"fill-color":n,"fill-opacity":e}}}function rn(n,e,t=1){return{type:"circle",paint:{"circle-radius":e,"circle-color":n,"circle-opacity":t}}}function It(n,e,t){if(n.getSource(e)){let i=[];for(let r of n.getStyle().layers)r.source==e&&i.push(r.id);for(let r of i)n.removeLayer(r);n.removeSource(e)}n.addSource(e,t)}function Ye(n,e,t=null){n.getLayer(e.id)&&n.removeLayer(e.id),t&&!n.getLayer(t)&&(t=null),n.addLayer(e,t)}function ss(n,e,t){let i;ve(n,He,l=>t(1,i=l));let{boundaryGeojson:r}=e;return Kt("setCamera")&&i.fitBounds(In(r),{padding:20,animate:!1}),It(i,"boundary",{type:"geojson",data:is(r)}),Ye(i,{id:"boundary",source:"boundary",...Un("black",.5)}),n.$$set=l=>{"boundaryGeojson"in l&&t(0,r=l.boundaryGeojson)},[r]}class as extends oe{constructor(e){super(),le(this,e,ss,null,se,{boundaryGeojson:0})}}function us(n){let e,t,i,r,o,l,s,a;return e=new Ft({props:{labelText:"Area",value:"area"}}),i=new Ft({props:{labelText:"Route",value:"route"}}),o=new Ft({props:{labelText:"Crossing",value:"crossing"}}),s=new Ft({props:{labelText:"Other",value:"other"}}),{c(){j(e.$$.fragment),t=O(),j(i.$$.fragment),r=O(),j(o.$$.fragment),l=O(),j(s.$$.fragment)},m(u,c){W(e,u,c),x(u,t,c),W(i,u,c),x(u,r,c),W(o,u,c),x(u,l,c),W(s,u,c),a=!0},p:re,i(u){a||(C(e.$$.fragment,u),C(i.$$.fragment,u),C(o.$$.fragment,u),C(s.$$.fragment,u),a=!0)},o(u){F(e.$$.fragment,u),F(i.$$.fragment,u),F(o.$$.fragment,u),F(s.$$.fragment,u),a=!1},d(u){H(e,u),u&&T(t),H(i,u),u&&T(r),H(o,u),u&&T(l),H(s,u)}}}function Zi(n){let e,t,i=Qi(n[3])+"",r,o,l;return{c(){e=L("p"),t=V("Length: "),r=V(i),o=O(),l=L("br")},m(s,a){x(s,e,a),P(e,t),P(e,r),x(s,o,a),x(s,l,a)},p(s,a){a&8&&i!==(i=Qi(s[3])+"")&&fe(r,i)},d(s){s&&T(e),s&&T(o),s&&T(l)}}}function fs(n){let e,t,i,r,o,l,s,a,u,c,p,m,f,d,v,E,A,h,g,b,_,y,R;function M(G){n[7](G)}let N={labelText:"Name"};n[0]!==void 0&&(N.value=n[0]),e=new nl({props:N}),he.push(()=>Be(e,"value",M,n[0]));function D(G){n[8](G)}let w={$$slots:{default:[us]},$$scope:{ctx:n}};n[1]!==void 0&&(w.selected=n[1]),l=new Yo({props:w}),he.push(()=>Be(l,"selected",D,n[1]));function z(G){n[9](G)}let B={labelText:"Description"};n[2]!==void 0&&(B.value=n[2]),p=new Ho({props:B}),he.push(()=>Be(p,"value",z,n[2]));let Y=n[3]&&Zi(n);return{c(){j(e.$$.fragment),i=O(),r=L("br"),o=O(),j(l.$$.fragment),a=O(),u=L("br"),c=O(),j(p.$$.fragment),f=O(),d=L("br"),v=O(),Y&&Y.c(),E=O(),A=L("div"),h=L("button"),h.textContent="Delete",g=O(),b=L("button"),b.textContent="Save",I(h,"type","button"),I(b,"type","button"),lt(b,"float","right")},m(G,U){W(e,G,U),x(G,i,U),x(G,r,U),x(G,o,U),W(l,G,U),x(G,a,U),x(G,u,U),x(G,c,U),W(p,G,U),x(G,f,U),x(G,d,U),x(G,v,U),Y&&Y.m(G,U),x(G,E,U),x(G,A,U),P(A,h),P(A,g),P(A,b),n[11](A),_=!0,y||(R=[q(h,"click",n[5]),q(b,"click",n[10])],y=!0)},p(G,[U]){const $={};!t&&U&1&&(t=!0,$.value=G[0],Fe(()=>t=!1)),e.$set($);const ie={};U&4096&&(ie.$$scope={dirty:U,ctx:G}),!s&&U&2&&(s=!0,ie.selected=G[1],Fe(()=>s=!1)),l.$set(ie);const ae={};!m&&U&4&&(m=!0,ae.value=G[2],Fe(()=>m=!1)),p.$set(ae),G[3]?Y?Y.p(G,U):(Y=Zi(G),Y.c(),Y.m(E.parentNode,E)):Y&&(Y.d(1),Y=null)},i(G){_||(C(e.$$.fragment,G),C(l.$$.fragment,G),C(p.$$.fragment,G),_=!0)},o(G){F(e.$$.fragment,G),F(l.$$.fragment,G),F(p.$$.fragment,G),_=!1},d(G){H(e,G),G&&T(i),G&&T(r),G&&T(o),H(l,G),G&&T(a),G&&T(u),G&&T(c),H(p,G),G&&T(f),G&&T(d),G&&T(v),Y&&Y.d(G),G&&T(E),G&&T(A),n[11](null),y=!1,xe(R)}}}function Qi(n){return n<1e3?Math.round(n)+" m":(n/1e3).toFixed(1)+"km"}function cs(n,e,t){let{id:i}=e,{name:r}=e,{intervention_type:o}=e,{description:l}=e,{length_meters:s}=e,a;en.subscribe(v=>{i==v&&setTimeout(()=>a==null?void 0:a.scrollIntoView({behavior:"smooth"}),1)});function u(){de.update(v=>(v.features=v.features.filter(E=>E.id!=i),v)),et(null)}function c(v){r=v,t(0,r)}function p(v){o=v,t(1,o)}function m(v){l=v,t(2,l)}const f=()=>et(null);function d(v){he[v?"unshift":"push"](()=>{a=v,t(4,a)})}return n.$$set=v=>{"id"in v&&t(6,i=v.id),"name"in v&&t(0,r=v.name),"intervention_type"in v&&t(1,o=v.intervention_type),"description"in v&&t(2,l=v.description),"length_meters"in v&&t(3,s=v.length_meters)},[r,o,l,s,a,u,i,c,p,m,f,d]}class ds extends oe{constructor(e){super(),le(this,e,cs,fs,se,{id:6,name:0,intervention_type:1,description:2,length_meters:3})}}function Ki(n,e,t){const i=n.slice();return i[10]=e[t],i[11]=e,i[12]=t,i}function hs(n){let e,t,i,r,o,l;function s(p){n[5](p,n[10])}function a(p){n[6](p,n[10])}function u(p){n[7](p,n[10])}let c={id:n[10].id,length_meters:n[10].properties.length_meters};return n[10].properties.name!==void 0&&(c.name=n[10].properties.name),n[10].properties.intervention_type!==void 0&&(c.intervention_type=n[10].properties.intervention_type),n[10].properties.description!==void 0&&(c.description=n[10].properties.description),e=new ds({props:c}),he.push(()=>Be(e,"name",s,n[10].properties.name)),he.push(()=>Be(e,"intervention_type",a,n[10].properties.intervention_type)),he.push(()=>Be(e,"description",u,n[10].properties.description)),{c(){j(e.$$.fragment),o=O()},m(p,m){W(e,p,m),x(p,o,m),l=!0},p(p,m){n=p;const f={};m&1&&(f.id=n[10].id),m&1&&(f.length_meters=n[10].properties.length_meters),!t&&m&1&&(t=!0,f.name=n[10].properties.name,Fe(()=>t=!1)),!i&&m&1&&(i=!0,f.intervention_type=n[10].properties.intervention_type,Fe(()=>i=!1)),!r&&m&1&&(r=!0,f.description=n[10].properties.description,Fe(()=>r=!1)),e.$set(f)},i(p){l||(C(e.$$.fragment,p),l=!0)},o(p){F(e.$$.fragment,p),l=!1},d(p){H(e,p),p&&T(o)}}}function ms(n){let e=n[12]+1+"",t,i,r=Ht(n[10])+"",o;return{c(){t=V(e),i=V(") "),o=V(r)},m(l,s){x(l,t,s),x(l,i,s),x(l,o,s)},p(l,s){s&1&&e!==(e=l[12]+1+"")&&fe(t,e),s&1&&r!==(r=Ht(l[10])+"")&&fe(o,r)},d(l){l&&T(t),l&&T(i),l&&T(o)}}}function gs(n){let e,t=n[12]+1+"",i,r,o=Ht(n[10])+"",l;return{c(){e=L("strong"),i=V(t),r=V(") "),l=V(o)},m(s,a){x(s,e,a),P(e,i),P(e,r),P(e,l)},p(s,a){a&1&&t!==(t=s[12]+1+"")&&fe(i,t),a&1&&o!==(o=Ht(s[10])+"")&&fe(l,o)},d(s){s&&T(e)}}}function ps(n){let e;function t(o,l){return o[10].id==o[1]?gs:ms}let i=t(n),r=i(n);return{c(){r.c(),e=O()},m(o,l){r.m(o,l),x(o,e,l)},p(o,l){i===(i=t(o))&&r?r.p(o,l):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){r.d(o),o&&T(e)}}}function $i(n,e){let t,i,r,o;function l(a){e[8](a,e[10])}let s={$$slots:{title:[ps],default:[hs]},$$scope:{ctx:e}};return e[10].properties.editing!==void 0&&(s.open=e[10].properties.editing),i=new po({props:s}),he.push(()=>Be(i,"open",l,e[10].properties.editing)),i.$on("click",function(){Kn(e[3](e[10].id))&&e[3](e[10].id).apply(this,arguments)}),i.$on("mouseenter",function(){Kn(e[2](e[10].id))&&e[2](e[10].id).apply(this,arguments)}),i.$on("mouseleave",e[2](null)),{key:n,first:null,c(){t=it(),j(i.$$.fragment),this.first=t},m(a,u){x(a,t,u),W(i,a,u),o=!0},p(a,u){e=a;const c={};u&8195&&(c.$$scope={dirty:u,ctx:e}),!r&&u&1&&(r=!0,c.open=e[10].properties.editing,Fe(()=>r=!1)),i.$set(c)},i(a){o||(C(i.$$.fragment,a),o=!0)},o(a){F(i.$$.fragment,a),o=!1},d(a){a&&T(t),H(i,a)}}}function bs(n){let e=[],t=new Map,i,r,o=n[0].features;const l=s=>s[10].id;for(let s=0;s<o.length;s+=1){let a=Ki(n,o,s),u=l(a);t.set(u,e[s]=$i(u,a))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();i=it()},m(s,a){for(let u=0;u<e.length;u+=1)e[u].m(s,a);x(s,i,a),r=!0},p(s,a){a&15&&(o=s[0].features,ke(),e=cr(e,a,l,1,s,o,t,i.parentNode,dr,$i,i,Ki),Se())},i(s){if(!r){for(let a=0;a<o.length;a+=1)C(e[a]);r=!0}},o(s){for(let a=0;a<e.length;a+=1)F(e[a]);r=!1},d(s){for(let a=0;a<e.length;a+=1)e[a].d(s);s&&T(i)}}}function vs(n){let e,t,i,r;return e=new uo({props:{$$slots:{default:[bs]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment)},m(o,l){W(e,o,l),t=!0,i||(r=q(window,"keydown",n[4]),i=!0)},p(o,[l]){const s={};l&8195&&(s.$$scope={dirty:l,ctx:o}),e.$set(s)},i(o){t||(C(e.$$.fragment,o),t=!0)},o(o){F(e.$$.fragment,o),t=!1},d(o){H(e,o),i=!1,r()}}}function Ht(n){if(n.properties.name)return n.properties.name;var e=n.properties.intervention_type;return e=="other"&&(n.geometry.type=="Point"?e="point":n.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function _s(n,e,t){let i,r,o;ve(n,en,f=>t(9,i=f)),ve(n,de,f=>t(0,r=f)),ve(n,Ge,f=>t(1,o=f));function l(f){i==null&&Ge.set(f)}function s(f){console.log(`Clicked ${f} from the sidebar; going to edit-attribute`),hn.set(null),hn.set(f);for(let d of r.features)d.properties.editing&&d.id!=f&&delete d.properties.editing;Ge.set(f)}function a(f){const d=i;if(f.key=="Delete"){const v=f.originalTarget.tagName;if(v!="CANVAS"&&v!="BODY")return;f.preventDefault(),de.update(E=>(E.features=E.features.filter(A=>A.id!=d),E))}}function u(f,d){n.$$.not_equal(d.properties.name,f)&&(d.properties.name=f,de.set(r))}function c(f,d){n.$$.not_equal(d.properties.intervention_type,f)&&(d.properties.intervention_type=f,de.set(r))}function p(f,d){n.$$.not_equal(d.properties.description,f)&&(d.properties.description=f,de.set(r))}function m(f,d){n.$$.not_equal(d.properties.editing,f)&&(d.properties.editing=f,de.set(r))}return[r,o,l,s,a,u,c,p,m]}class ys extends oe{constructor(e){super(),le(this,e,_s,vs,se,{})}}function Tt(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function pt(n){if(Array.isArray(n))return n;if(n.type==="Feature"){if(n.geometry!==null)return n.geometry.coordinates}else if(n.coordinates)return n.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function dt(n,e,t){t===void 0&&(t={});var i=Tt(n),r=Tt(e),o=Ne(r[1]-i[1]),l=Ne(r[0]-i[0]),s=Ne(i[1]),a=Ne(r[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(s)*Math.cos(a);return Dn(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),t.units)}function Nt(n,e,t){if(n!==null)for(var i,r,o,l,s,a,u,c=0,p=0,m,f=n.type,d=f==="FeatureCollection",v=f==="Feature",E=d?n.features.length:1,A=0;A<E;A++){u=d?n.features[A].geometry:v?n.geometry:n,m=u?u.type==="GeometryCollection":!1,s=m?u.geometries.length:1;for(var h=0;h<s;h++){var g=0,b=0;if(l=m?u.geometries[h]:u,l!==null){a=l.coordinates;var _=l.type;switch(c=t&&(_==="Polygon"||_==="MultiPolygon")?1:0,_){case null:break;case"Point":if(e(a,p,A,g,b)===!1)return!1;p++,g++;break;case"LineString":case"MultiPoint":for(i=0;i<a.length;i++){if(e(a[i],p,A,g,b)===!1)return!1;p++,_==="MultiPoint"&&g++}_==="LineString"&&g++;break;case"Polygon":case"MultiLineString":for(i=0;i<a.length;i++){for(r=0;r<a[i].length-c;r++){if(e(a[i][r],p,A,g,b)===!1)return!1;p++}_==="MultiLineString"&&g++,_==="Polygon"&&b++}_==="Polygon"&&g++;break;case"MultiPolygon":for(i=0;i<a.length;i++){for(b=0,r=0;r<a[i].length;r++){for(o=0;o<a[i][r].length-c;o++){if(e(a[i][r][o],p,A,g,b)===!1)return!1;p++}b++}g++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(Nt(l.geometries[i],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ws(n,e,t,i){var r=t;return Nt(n,function(o,l,s,a,u){l===0&&t===void 0?r=o:r=e(r,o,l,s,a,u)},i),r}function yr(n,e){var t;switch(n.type){case"FeatureCollection":for(t=0;t<n.features.length&&e(n.features[t].properties,t)!==!1;t++);break;case"Feature":e(n.properties,0);break}}function ks(n,e,t){var i=t;return yr(n,function(r,o){o===0&&t===void 0?i=r:i=e(i,r,o)}),i}function Vt(n,e){if(n.type==="Feature")e(n,0);else if(n.type==="FeatureCollection")for(var t=0;t<n.features.length&&e(n.features[t],t)!==!1;t++);}function Ss(n,e,t){var i=t;return Vt(n,function(r,o){o===0&&t===void 0?i=r:i=e(i,r,o)}),i}function Es(n){var e=[];return Nt(n,function(t){e.push(t)}),e}function jn(n,e){var t,i,r,o,l,s,a,u,c,p,m=0,f=n.type==="FeatureCollection",d=n.type==="Feature",v=f?n.features.length:1;for(t=0;t<v;t++){for(s=f?n.features[t].geometry:d?n.geometry:n,u=f?n.features[t].properties:d?n.properties:{},c=f?n.features[t].bbox:d?n.bbox:void 0,p=f?n.features[t].id:d?n.id:void 0,a=s?s.type==="GeometryCollection":!1,l=a?s.geometries.length:1,r=0;r<l;r++){if(o=a?s.geometries[r]:s,o===null){if(e(null,m,u,c,p)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,m,u,c,p)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<o.geometries.length;i++)if(e(o.geometries[i],m,u,c,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}m++}}function Ms(n,e,t){var i=t;return jn(n,function(r,o,l,s,a){o===0&&t===void 0?i=r:i=e(i,r,o,l,s,a)}),i}function bt(n,e){jn(n,function(t,i,r,o,l){var s=t===null?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return e(ze(t,r,{bbox:o,id:l}),i,0)===!1?!1:void 0}var a;switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon";break}for(var u=0;u<t.coordinates.length;u++){var c=t.coordinates[u],p={type:a,coordinates:c};if(e(ze(p,r),i,u)===!1)return!1}})}function Ps(n,e,t){var i=t;return bt(n,function(r,o,l){o===0&&l===0&&t===void 0?i=r:i=e(i,r,o,l)}),i}function wr(n,e){bt(n,function(t,i,r){var o=0;if(t.geometry){var l=t.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var s,a=0,u=0,c=0;if(Nt(t,function(p,m,f,d,v){if(s===void 0||i>a||d>u||v>c){s=p,a=i,u=d,c=v,o=0;return}var E=Ie([s,p],t.properties);if(e(E,i,r,v,o)===!1)return!1;o++,s=p})===!1)return!1}}})}function kr(n,e,t){var i=t,r=!1;return wr(n,function(o,l,s,a,u){r===!1&&t===void 0?i=o:i=e(i,o,l,s,a,u),r=!0}),i}function Sr(n,e){if(!n)throw new Error("geojson is required");bt(n,function(t,i,r){if(t.geometry!==null){var o=t.geometry.type,l=t.geometry.coordinates;switch(o){case"LineString":if(e(t,i,r,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<l.length;s++)if(e(Ie(l[s],t.properties),i,r,s)===!1)return!1;break}}})}function xs(n,e,t){var i=t;return Sr(n,function(r,o,l,s){o===0&&t===void 0?i=r:i=e(i,r,o,l,s)}),i}function Ts(n,e){if(e=e||{},!Gn(e))throw new Error("options is invalid");var t=e.featureIndex||0,i=e.multiFeatureIndex||0,r=e.geometryIndex||0,o=e.segmentIndex||0,l=e.properties,s;switch(n.type){case"FeatureCollection":t<0&&(t=n.features.length+t),l=l||n.features[t].properties,s=n.features[t].geometry;break;case"Feature":l=l||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var a=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=a.length+o-1),Ie([a[o],a[o+1]],l,e);case"Polygon":return r<0&&(r=a.length+r),o<0&&(o=a[r].length+o-1),Ie([a[r][o],a[r][o+1]],l,e);case"MultiLineString":return i<0&&(i=a.length+i),o<0&&(o=a[i].length+o-1),Ie([a[i][o],a[i][o+1]],l,e);case"MultiPolygon":return i<0&&(i=a.length+i),r<0&&(r=a[i].length+r),o<0&&(o=a[i][r].length-o-1),Ie([a[i][r][o],a[i][r][o+1]],l,e)}throw new Error("geojson is invalid")}function Ls(n,e){if(e=e||{},!Gn(e))throw new Error("options is invalid");var t=e.featureIndex||0,i=e.multiFeatureIndex||0,r=e.geometryIndex||0,o=e.coordIndex||0,l=e.properties,s;switch(n.type){case"FeatureCollection":t<0&&(t=n.features.length+t),l=l||n.features[t].properties,s=n.features[t].geometry;break;case"Feature":l=l||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var a=s.coordinates;switch(s.type){case"Point":return Te(a,l,e);case"MultiPoint":return i<0&&(i=a.length+i),Te(a[i],l,e);case"LineString":return o<0&&(o=a.length+o),Te(a[o],l,e);case"Polygon":return r<0&&(r=a.length+r),o<0&&(o=a[r].length+o),Te(a[r][o],l,e);case"MultiLineString":return i<0&&(i=a.length+i),o<0&&(o=a[i].length+o),Te(a[i][o],l,e);case"MultiPolygon":return i<0&&(i=a.length+i),r<0&&(r=a[i].length+r),o<0&&(o=a[i][r].length-o),Te(a[i][r][o],l,e)}throw new Error("geojson is invalid")}const As=Object.freeze(Object.defineProperty({__proto__:null,coordAll:Es,coordEach:Nt,coordReduce:ws,featureEach:Vt,featureReduce:Ss,findPoint:Ls,findSegment:Ts,flattenEach:bt,flattenReduce:Ps,geomEach:jn,geomReduce:Ms,lineEach:Sr,lineReduce:xs,propEach:yr,propReduce:ks,segmentEach:wr,segmentReduce:kr},Symbol.toStringTag,{value:"Module"}));function Rs(n,e){return e===void 0&&(e={}),kr(n,function(t,i){var r=i.geometry.coordinates;return t+dt(r[0],r[1],e)},0)}function Cs(n){let e,t,i,r,o,l,s,a,u,c,p,m,f,d,v,E,A,h,g,b=n[0].features.length+"",_,y,R,M,N,D,w,z;return{c(){e=L("div"),t=L("label"),i=V(`Scheme name:
    `),r=L("input"),o=O(),l=L("br"),s=O(),a=L("div"),u=L("label"),c=L("input"),p=O(),m=L("button"),m.textContent="Load from GeoJSON",f=O(),d=L("button"),d.textContent="Export to GeoJSON",v=O(),E=L("br"),A=O(),h=L("div"),g=L("span"),_=V(b),y=V(" interventions"),R=O(),M=L("button"),N=V("Clear all"),I(r,"type","text"),I(c,"type","file"),I(c,"id","load_geojson"),I(c,"class","svelte-lhyd1e"),I(m,"type","button"),I(m,"onclick","document.getElementById('load_geojson').click();"),I(d,"type","button"),I(d,"class","align-right svelte-lhyd1e"),I(M,"type","button"),I(M,"class","align-right svelte-lhyd1e"),M.disabled=D=n[0].features.length==0},m(B,Y){x(B,e,Y),P(e,t),P(t,i),P(t,r),gt(r,n[0].scheme_name),x(B,o,Y),x(B,l,Y),x(B,s,Y),x(B,a,Y),P(a,u),P(u,c),P(u,p),P(u,m),P(a,f),P(a,d),x(B,v,Y),x(B,E,Y),x(B,A,Y),x(B,h,Y),P(h,g),P(g,_),P(g,y),P(h,R),P(h,M),P(M,N),w||(z=[q(r,"input",n[5]),q(c,"change",n[3]),q(d,"click",n[2]),q(M,"click",n[1])],w=!0)},p(B,[Y]){Y&1&&r.value!==B[0].scheme_name&&gt(r,B[0].scheme_name),Y&1&&b!==(b=B[0].features.length+"")&&fe(_,b),Y&1&&D!==(D=B[0].features.length==0)&&(M.disabled=D)},i:re,o:re,d(B){B&&T(e),B&&T(o),B&&T(l),B&&T(s),B&&T(a),B&&T(v),B&&T(E),B&&T(A),B&&T(h),w=!1,xe(z)}}}function Os(n,e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(e)),t.setAttribute("download",n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Is(n,e,t){let i;ve(n,de,m=>t(0,i=m));let{authorityName:r}=e,o=window.localStorage.getItem(r);if(o)try{de.set(c(JSON.parse(o)))}catch(m){console.log(`Failed to load from local storage: ${m}`)}function l(){confirm("Do you want to clear the current scheme? (You should save it first!)")&&de.update(m=>(delete m.scheme_name,m.features=[],m))}function s(){const m=JSON.parse(JSON.stringify(i));for(let f of m.features)delete f.properties.editing,delete f.properties.hide_while_editing;return m}function a(){let m=s();var f=r;m.authority=r,m.origin="atip-v1",m.scheme_name&&(f+="_"+m.scheme_name),f+=".txt",Os(f,JSON.stringify(m,null,"  "))}function u(m){const f=new FileReader;f.onload=d=>{try{de.set(c(JSON.parse(d.target.result)))}catch(v){window.alert(`Couldn't load scheme from a file: ${v}`)}},f.readAsText(m.target.files[0])}function c(m){let f=1;for(let d of m.features)d.geometry.type=="LineString"&&!d.properties.length_meters&&(d.properties.length_meters=Rs(d.geometry,{units:"kilometers"})*1e3),d.id=f++;return m}function p(){i.scheme_name=this.value,de.set(i)}return n.$$set=m=>{"authorityName"in m&&t(4,r=m.authorityName)},n.$$.update=()=>{n.$$.dirty&17&&i&&(console.log("GJ changed, saving to local storage"),window.localStorage.setItem(r,JSON.stringify(s())))},[i,l,a,u,r,p]}class Ns extends oe{constructor(e){super(),le(this,e,Is,Cs,se,{authorityName:4})}}const Bs="/atip/assets/zoom_out_map-b2e1091a.svg";function Fs(n){let e,t,i,r,o;return{c(){e=L("button"),t=L("img"),Gr(t.src,i=Bs)||I(t,"src",i),I(t,"alt","Zoom to show entire boundary"),I(e,"type","button"),I(e,"title","Zoom to show entire boundary"),I(e,"class","svelte-qzjsqo")},m(l,s){x(l,e,s),P(e,t),r||(o=q(e,"click",n[0]),r=!0)},p:re,i:re,o:re,d(l){l&&T(e),r=!1,o()}}}function zs(n,e,t){let i;ve(n,He,l=>t(2,i=l));let{boundaryGeojson:r}=e;function o(){i.fitBounds(In(r),{padding:20,animate:!0,duration:500})}return n.$$set=l=>{"boundaryGeojson"in l&&t(1,r=l.boundaryGeojson)},[o,r]}class Ds extends oe{constructor(e){super(),le(this,e,zs,Fs,se,{boundaryGeojson:1})}}function Gs(n){let e,t,i,r,o,l,s;return{c(){e=L("div"),t=V(`Basemap:
  `),i=L("select"),r=L("option"),r.textContent="Streets",o=L("option"),o.textContent="Satellite",r.__value="streets",r.value=r.__value,o.__value="hybrid",o.value=o.__value,n[0]===void 0&&qr(()=>n[2].call(i)),I(e,"class","svelte-1tbnm6i")},m(a,u){x(a,e,u),P(e,t),P(e,i),P(i,r),P(i,o),$n(i,n[0]),l||(s=[q(i,"change",n[2]),q(i,"change",n[1])],l=!0)},p(a,[u]){u&1&&$n(i,a[0])},i:re,o:re,d(a){a&&T(e),l=!1,xe(s)}}}function qs(n,e,t){let{style:i}=e;function r(){let l=new URLSearchParams(window.location.search);l.set("style",i);let s=`${window.location.pathname}?${l.toString()}${window.location.hash}`;window.location.href=s}function o(){i=Yr(this),t(0,i)}return n.$$set=l=>{"style"in l&&t(0,i=l.style)},[i,r,o]}class Ys extends oe{constructor(e){super(),le(this,e,qs,Gs,se,{style:0})}}const Oe={area:"#e41a1c",route:"#377eb8",crossing:"#4daf4a",other:"#984ea3",hovering:"black"},on=10,wn=10;function Xs(n){let e,t,i,r,o,l,s,a,u,c,p,m,f,d,v,E,A,h,g;return{c(){e=L("div"),t=L("h1"),t.textContent="Interventions",i=O(),r=L("ul"),o=L("li"),l=L("span"),s=V("Areas"),a=O(),u=L("li"),c=L("span"),p=V("Routes"),m=O(),f=L("li"),d=L("span"),v=V("Crossings"),E=O(),A=L("li"),h=L("span"),g=V("Other"),I(t,"class","svelte-p551i1"),I(l,"class","svelte-p551i1"),lt(l,"background",Oe.area),I(c,"class","svelte-p551i1"),lt(c,"background",Oe.route),I(d,"class","svelte-p551i1"),lt(d,"background",Oe.crossing),I(h,"class","svelte-p551i1"),lt(h,"background",Oe.other),I(e,"class","svelte-p551i1")},m(b,_){x(b,e,_),P(e,t),P(e,i),P(e,r),P(r,o),P(o,l),P(o,s),P(r,a),P(r,u),P(u,c),P(u,p),P(r,m),P(r,f),P(f,d),P(f,v),P(r,E),P(r,A),P(A,h),P(A,g)},p:re,i:re,o:re,d(b){b&&T(e)}}}class Js extends oe{constructor(e){super(),le(this,e,null,Xs,se,{})}}let wt="interventions";function Us(n,e,t){let i,r;ve(n,He,s=>t(0,i=s)),ve(n,de,s=>t(1,r=s)),It(i,wt,{type:"geojson",data:r});const o=["match",["get","intervention_type"],"area",Oe.area,"route",Oe.route,"crossing",Oe.crossing,"other",Oe.other,"white"],l=["!=","hide_while_editing",!0];return Ye(i,{id:"interventions-points",source:wt,filter:["all",Jn,l],...rn(o,on)}),Ye(i,{id:"interventions-lines",source:wt,filter:["all",Xn,l],...Wt(o,wn)}),Ye(i,{id:"interventions-polygons",source:wt,filter:["all",Yn,l],...Un(o,.5)},"hover-polygons"),n.$$.update=()=>{n.$$.dirty&3&&i.getSource(wt).setData(r)},[i,r]}class js extends oe{constructor(e){super(),le(this,e,Us,null,se,{})}}let ft="hover";function Ws(n,e,t){let i,r;return ve(n,He,o=>t(0,i=o)),ve(n,de,o=>t(1,r=o)),It(i,ft,{type:"geojson",data:st()}),Ye(i,{id:"hover-polygons",source:ft,filter:Yn,...Wt(Oe.hovering,.5*wn,1)}),Ye(i,{id:"hover-lines",source:ft,filter:Xn,...Wt(Oe.hovering,1.5*wn,1)},"interventions-lines"),Ye(i,{id:"hover-points",source:ft,filter:Jn,...rn(Oe.hovering,1.5*on,1)},"interventions-points"),Ge.subscribe(o=>{o!=null?i.getSource(ft).setData(r.features.find(l=>l.id==o)):i.getSource(ft).setData(st())}),[]}class Hs extends oe{constructor(e){super(),le(this,e,Ws,null,se,{})}}var Lt,kn;class Vs{constructor(e){rt(this,Lt);this.map=e,this.active=!1,this.eventListeners=[],this.cursor=null,e.on("mousemove",t=>{this.active&&(this.cursor=Zs(t.lngLat.toArray()),me(this,Lt,kn).call(this))}),e.on("click",t=>{if(this.active&&this.cursor){for(let i of this.eventListeners)i(this.cursor);this.stop()}}),this.source="edit-point-mode",It(e,this.source,{type:"geojson",data:st()}),Ye(e,{id:"edit-point-mode",source:this.source,...rn(Oe.hovering,on,1)})}addEventListener(e){this.eventListeners.push(e)}tearDown(){this.map.removeLayer("edit-point-mode"),this.map.removeSource(this.source)}start(){this.active=!0}stop(){this.cursor=null,this.active=!1,me(this,Lt,kn).call(this)}}Lt=new WeakSet,kn=function(){let e=st();this.cursor&&e.features.push(this.cursor),this.map.getSource(this.source).setData(e)};function Zs(n){return{type:"Feature",properties:{},geometry:{type:"Point",coordinates:n}}}function Er(n,e,t){if(t===void 0&&(t={}),t.final===!0)return Qs(n,e);var i=Tt(n),r=Tt(e),o=Ne(i[0]),l=Ne(r[0]),s=Ne(i[1]),a=Ne(r[1]),u=Math.sin(l-o)*Math.cos(a),c=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(l-o);return Pt(Math.atan2(u,c))}function Qs(n,e){var t=Er(e,n);return t=(t+180)%360,t}function er(n,e,t,i){i===void 0&&(i={});var r=Tt(n),o=Ne(r[0]),l=Ne(r[1]),s=Ne(t),a=nn(e,i.units),u=Math.asin(Math.sin(l)*Math.cos(a)+Math.cos(l)*Math.sin(a)*Math.cos(s)),c=o+Math.atan2(Math.sin(s)*Math.sin(a)*Math.cos(l),Math.cos(a)-Math.sin(l)*Math.sin(u)),p=Pt(c),m=Pt(u);return Te([p,m],i.properties)}function tr(n){if(!n)throw new Error("geojson is required");var e=[];return bt(n,function(t){Ks(t,e)}),at(e)}function Ks(n,e){var t=[],i=n.geometry;if(i!==null){switch(i.type){case"Polygon":t=pt(i);break;case"LineString":t=[pt(i)]}t.forEach(function(r){var o=$s(r,n.properties);o.forEach(function(l){l.id=e.length,e.push(l)})})}}function $s(n,e){var t=[];return n.reduce(function(i,r){var o=Ie([i,r],e);return o.bbox=ea(i,r),t.push(o),r}),t}function ea(n,e){var t=n[0],i=n[1],r=e[0],o=e[1],l=t<r?t:r,s=i<o?i:o,a=t>r?t:r,u=i>o?i:o;return[l,s,a,u]}var Zt={},ta={get exports(){return Zt},set exports(n){Zt=n}},Sn={},na={get exports(){return Sn},set exports(n){Sn=n}};(function(n,e){(function(t,i){n.exports=i()})(Xr,function(){function t(h,g,b,_,y){(function R(M,N,D,w,z){for(;w>D;){if(w-D>600){var B=w-D+1,Y=N-D+1,G=Math.log(B),U=.5*Math.exp(2*G/3),$=.5*Math.sqrt(G*U*(B-U)/B)*(Y-B/2<0?-1:1),ie=Math.max(D,Math.floor(N-Y*U/B+$)),ae=Math.min(w,Math.floor(N+(B-Y)*U/B+$));R(M,N,ie,ae,z)}var ce=M[N],Z=D,S=w;for(i(M,D,N),z(M[w],ce)>0&&i(M,D,w);Z<S;){for(i(M,Z,S),Z++,S--;z(M[Z],ce)<0;)Z++;for(;z(M[S],ce)>0;)S--}z(M[D],ce)===0?i(M,D,S):i(M,++S,w),S<=N&&(D=S+1),N<=S&&(w=S-1)}})(h,g,b||0,_||h.length-1,y||r)}function i(h,g,b){var _=h[g];h[g]=h[b],h[b]=_}function r(h,g){return h<g?-1:h>g?1:0}var o=function(h){h===void 0&&(h=9),this._maxEntries=Math.max(4,h),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(h,g,b){if(!b)return g.indexOf(h);for(var _=0;_<g.length;_++)if(b(h,g[_]))return _;return-1}function s(h,g){a(h,0,h.children.length,g,h)}function a(h,g,b,_,y){y||(y=E(null)),y.minX=1/0,y.minY=1/0,y.maxX=-1/0,y.maxY=-1/0;for(var R=g;R<b;R++){var M=h.children[R];u(y,h.leaf?_(M):M)}return y}function u(h,g){return h.minX=Math.min(h.minX,g.minX),h.minY=Math.min(h.minY,g.minY),h.maxX=Math.max(h.maxX,g.maxX),h.maxY=Math.max(h.maxY,g.maxY),h}function c(h,g){return h.minX-g.minX}function p(h,g){return h.minY-g.minY}function m(h){return(h.maxX-h.minX)*(h.maxY-h.minY)}function f(h){return h.maxX-h.minX+(h.maxY-h.minY)}function d(h,g){return h.minX<=g.minX&&h.minY<=g.minY&&g.maxX<=h.maxX&&g.maxY<=h.maxY}function v(h,g){return g.minX<=h.maxX&&g.minY<=h.maxY&&g.maxX>=h.minX&&g.maxY>=h.minY}function E(h){return{children:h,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function A(h,g,b,_,y){for(var R=[g,b];R.length;)if(!((b=R.pop())-(g=R.pop())<=_)){var M=g+Math.ceil((b-g)/_/2)*_;t(h,M,g,b,y),R.push(g,M,M,b)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(h){var g=this.data,b=[];if(!v(h,g))return b;for(var _=this.toBBox,y=[];g;){for(var R=0;R<g.children.length;R++){var M=g.children[R],N=g.leaf?_(M):M;v(h,N)&&(g.leaf?b.push(M):d(h,N)?this._all(M,b):y.push(M))}g=y.pop()}return b},o.prototype.collides=function(h){var g=this.data;if(!v(h,g))return!1;for(var b=[];g;){for(var _=0;_<g.children.length;_++){var y=g.children[_],R=g.leaf?this.toBBox(y):y;if(v(h,R)){if(g.leaf||d(h,R))return!0;b.push(y)}}g=b.pop()}return!1},o.prototype.load=function(h){if(!h||!h.length)return this;if(h.length<this._minEntries){for(var g=0;g<h.length;g++)this.insert(h[g]);return this}var b=this._build(h.slice(),0,h.length-1,0);if(this.data.children.length)if(this.data.height===b.height)this._splitRoot(this.data,b);else{if(this.data.height<b.height){var _=this.data;this.data=b,b=_}this._insert(b,this.data.height-b.height-1,!0)}else this.data=b;return this},o.prototype.insert=function(h){return h&&this._insert(h,this.data.height-1),this},o.prototype.clear=function(){return this.data=E([]),this},o.prototype.remove=function(h,g){if(!h)return this;for(var b,_,y,R=this.data,M=this.toBBox(h),N=[],D=[];R||N.length;){if(R||(R=N.pop(),_=N[N.length-1],b=D.pop(),y=!0),R.leaf){var w=l(h,R.children,g);if(w!==-1)return R.children.splice(w,1),N.push(R),this._condense(N),this}y||R.leaf||!d(R,M)?_?(b++,R=_.children[b],y=!1):R=null:(N.push(R),D.push(b),b=0,_=R,R=R.children[0])}return this},o.prototype.toBBox=function(h){return h},o.prototype.compareMinX=function(h,g){return h.minX-g.minX},o.prototype.compareMinY=function(h,g){return h.minY-g.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(h){return this.data=h,this},o.prototype._all=function(h,g){for(var b=[];h;)h.leaf?g.push.apply(g,h.children):b.push.apply(b,h.children),h=b.pop();return g},o.prototype._build=function(h,g,b,_){var y,R=b-g+1,M=this._maxEntries;if(R<=M)return s(y=E(h.slice(g,b+1)),this.toBBox),y;_||(_=Math.ceil(Math.log(R)/Math.log(M)),M=Math.ceil(R/Math.pow(M,_-1))),(y=E([])).leaf=!1,y.height=_;var N=Math.ceil(R/M),D=N*Math.ceil(Math.sqrt(M));A(h,g,b,D,this.compareMinX);for(var w=g;w<=b;w+=D){var z=Math.min(w+D-1,b);A(h,w,z,N,this.compareMinY);for(var B=w;B<=z;B+=N){var Y=Math.min(B+N-1,z);y.children.push(this._build(h,B,Y,_-1))}}return s(y,this.toBBox),y},o.prototype._chooseSubtree=function(h,g,b,_){for(;_.push(g),!g.leaf&&_.length-1!==b;){for(var y=1/0,R=1/0,M=void 0,N=0;N<g.children.length;N++){var D=g.children[N],w=m(D),z=(B=h,Y=D,(Math.max(Y.maxX,B.maxX)-Math.min(Y.minX,B.minX))*(Math.max(Y.maxY,B.maxY)-Math.min(Y.minY,B.minY))-w);z<R?(R=z,y=w<y?w:y,M=D):z===R&&w<y&&(y=w,M=D)}g=M||g.children[0]}var B,Y;return g},o.prototype._insert=function(h,g,b){var _=b?h:this.toBBox(h),y=[],R=this._chooseSubtree(_,this.data,g,y);for(R.children.push(h),u(R,_);g>=0&&y[g].children.length>this._maxEntries;)this._split(y,g),g--;this._adjustParentBBoxes(_,y,g)},o.prototype._split=function(h,g){var b=h[g],_=b.children.length,y=this._minEntries;this._chooseSplitAxis(b,y,_);var R=this._chooseSplitIndex(b,y,_),M=E(b.children.splice(R,b.children.length-R));M.height=b.height,M.leaf=b.leaf,s(b,this.toBBox),s(M,this.toBBox),g?h[g-1].children.push(M):this._splitRoot(b,M)},o.prototype._splitRoot=function(h,g){this.data=E([h,g]),this.data.height=h.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(h,g,b){for(var _,y,R,M,N,D,w,z=1/0,B=1/0,Y=g;Y<=b-g;Y++){var G=a(h,0,Y,this.toBBox),U=a(h,Y,b,this.toBBox),$=(y=G,R=U,M=void 0,N=void 0,D=void 0,w=void 0,M=Math.max(y.minX,R.minX),N=Math.max(y.minY,R.minY),D=Math.min(y.maxX,R.maxX),w=Math.min(y.maxY,R.maxY),Math.max(0,D-M)*Math.max(0,w-N)),ie=m(G)+m(U);$<z?(z=$,_=Y,B=ie<B?ie:B):$===z&&ie<B&&(B=ie,_=Y)}return _||b-g},o.prototype._chooseSplitAxis=function(h,g,b){var _=h.leaf?this.compareMinX:c,y=h.leaf?this.compareMinY:p;this._allDistMargin(h,g,b,_)<this._allDistMargin(h,g,b,y)&&h.children.sort(_)},o.prototype._allDistMargin=function(h,g,b,_){h.children.sort(_);for(var y=this.toBBox,R=a(h,0,g,y),M=a(h,b-g,b,y),N=f(R)+f(M),D=g;D<b-g;D++){var w=h.children[D];u(R,h.leaf?y(w):w),N+=f(R)}for(var z=b-g-1;z>=g;z--){var B=h.children[z];u(M,h.leaf?y(B):B),N+=f(M)}return N},o.prototype._adjustParentBBoxes=function(h,g,b){for(var _=b;_>=0;_--)u(g[_],h)},o.prototype._condense=function(h){for(var g=h.length-1,b=void 0;g>=0;g--)h[g].children.length===0?g>0?(b=h[g-1].children).splice(b.indexOf(h[g]),1):this.clear():s(h[g],this.toBBox)},o})})(na);const ia=mr(Il),Mr=mr(As);var Wn={};Object.defineProperty(Wn,"__esModule",{value:!0});var ra=Mr;function En(n){var e=[1/0,1/0,-1/0,-1/0];return ra.coordEach(n,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}En.default=En;Wn.default=En;var Xe=Sn,Pr=ia,xr=Mr,ct=Wn.default,oa=xr.featureEach;xr.coordEach;Pr.polygon;var nr=Pr.featureCollection;function Tr(n){var e=new Xe(n);return e.insert=function(t){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:ct(t),Xe.prototype.insert.call(this,t)},e.load=function(t){var i=[];return Array.isArray(t)?t.forEach(function(r){if(r.type!=="Feature")throw new Error("invalid features");r.bbox=r.bbox?r.bbox:ct(r),i.push(r)}):oa(t,function(r){if(r.type!=="Feature")throw new Error("invalid features");r.bbox=r.bbox?r.bbox:ct(r),i.push(r)}),Xe.prototype.load.call(this,i)},e.remove=function(t,i){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:ct(t),Xe.prototype.remove.call(this,t,i)},e.clear=function(){return Xe.prototype.clear.call(this)},e.search=function(t){var i=Xe.prototype.search.call(this,this.toBBox(t));return nr(i)},e.collides=function(t){return Xe.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=Xe.prototype.all.call(this);return nr(t)},e.toJSON=function(){return Xe.prototype.toJSON.call(this)},e.fromJSON=function(t){return Xe.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var i;if(t.bbox)i=t.bbox;else if(Array.isArray(t)&&t.length===4)i=t;else if(Array.isArray(t)&&t.length===6)i=[t[0],t[1],t[3],t[4]];else if(t.type==="Feature")i=ct(t);else if(t.type==="FeatureCollection")i=ct(t);else throw new Error("invalid geojson");return{minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}},e}ta.exports=Tr;Zt.default=Tr;function la(n,e){var t={},i=[];if(n.type==="LineString"&&(n=ze(n)),e.type==="LineString"&&(e=ze(e)),n.type==="Feature"&&e.type==="Feature"&&n.geometry!==null&&e.geometry!==null&&n.geometry.type==="LineString"&&e.geometry.type==="LineString"&&n.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var r=ir(n,e);return r&&i.push(r),at(i)}var o=Zt();return o.load(tr(e)),Vt(tr(n),function(l){Vt(o.search(l),function(s){var a=ir(l,s);if(a){var u=pt(a).join(",");t[u]||(t[u]=!0,i.push(a))}})}),at(i)}function ir(n,e){var t=pt(n),i=pt(e);if(t.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(i.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=t[0][0],o=t[0][1],l=t[1][0],s=t[1][1],a=i[0][0],u=i[0][1],c=i[1][0],p=i[1][1],m=(p-u)*(l-r)-(c-a)*(s-o),f=(c-a)*(o-u)-(p-u)*(r-a),d=(l-r)*(o-u)-(s-o)*(r-a);if(m===0)return f===0&&d===0,null;var v=f/m,E=d/m;if(v>=0&&v<=1&&E>=0&&E<=1){var A=r+v*(l-r),h=o+v*(s-o);return Te([A,h])}return null}function sa(n,e,t){t===void 0&&(t={});var i=Te([1/0,1/0],{dist:1/0}),r=0;return bt(n,function(o){for(var l=pt(o),s=0;s<l.length-1;s++){var a=Te(l[s]);a.properties.dist=dt(e,a,t);var u=Te(l[s+1]);u.properties.dist=dt(e,u,t);var c=dt(a,u,t),p=Math.max(a.properties.dist,u.properties.dist),m=Er(a,u),f=er(e,p,m+90,t),d=er(e,p,m-90,t),v=la(Ie([f.geometry.coordinates,d.geometry.coordinates]),Ie([a.geometry.coordinates,u.geometry.coordinates])),E=null;v.features.length>0&&(E=v.features[0],E.properties.dist=dt(e,E,t),E.properties.location=r+dt(a,E,t)),a.properties.dist<i.properties.dist&&(i=a,i.properties.index=s,i.properties.location=r),u.properties.dist<i.properties.dist&&(i=u,i.properties.index=s+1,i.properties.location=r+c),E&&E.properties.dist<i.properties.dist&&(i=E,i.properties.index=s),r+=c}}),i}var je,ot,At,Mn,Rt,Pn;class aa{constructor(e){rt(this,je);rt(this,At);rt(this,Rt);this.map=e,this.active=!1,this.eventListeners=[],this.points=[],this.cursor=null,this.hoverPolyon=!1,this.hoverPoint=null,this.dragging=!1,this.dragFrom=null,e.on("mousemove",t=>{if(this.active&&!this.dragging)me(this,At,Mn).call(this,t);else if(this.active&&this.dragging){if(this.hoverPolyon){let i=this.dragFrom[0]-t.lngLat.lng,r=this.dragFrom[1]-t.lngLat.lat;for(let o of this.points)o[0]-=i,o[1]-=r}else this.points[this.hoverPoint]=t.lngLat.toArray();this.dragFrom=t.lngLat.toArray(),me(this,je,ot).call(this)}}),e.on("click",t=>{if(this.active&&this.cursor){let i=[];if(or(this.points).forEach((r,o)=>{i.push([o+1,sa(r,this.cursor).properties.dist])}),i.sort((r,o)=>r[1]-o[1]),i.length>0){let r=i[0][0];this.points.splice(r,0,this.cursor.geometry.coordinates),this.hoverPoint=r}else this.points.push(this.cursor.geometry.coordinates),this.hoverPoint=this.points.length-1;me(this,je,ot).call(this)}else this.active&&this.hoverPoint!=null&&(this.points.splice(this.hoverPoint,1),this.hoverPoint=null,me(this,je,ot).call(this),me(this,At,Mn).call(this,t))}),e.on("mousedown",t=>{this.active&&!this.dragging&&(this.hoverPolyon||this.hoverPoint!=null)&&(t.preventDefault(),this.cursor=null,this.dragging=!0,this.dragFrom=t.lngLat.toArray())}),e.on("mouseup",t=>{this.active&&this.dragging&&(this.dragging=!1,this.dragFrom=null)}),document.addEventListener("keypress",t=>{if(this.active&&t.key=="Enter"){t.preventDefault();let i=me(this,Rt,Pn).call(this);if(i)for(let r of this.eventListeners)r(i);this.stop()}}),this.source="edit-polygon-mode",It(e,this.source,{type:"geojson",data:st()}),Ye(e,{id:"edit-polygon-fill",source:this.source,filter:Yn,...Un("red",["case",["boolean",["get","hover"],"false"],1,.5])}),Ye(e,{id:"edit-polygon-lines",source:this.source,filter:Xn,...Wt("black",8,.5)}),Ye(e,{id:"edit-polygon-vertices",source:this.source,filter:Jn,...rn(Oe.hovering,on,["case",["boolean",["get","hover"],"false"],1,.5])})}addEventListener(e){this.eventListeners.push(e)}tearDown(){this.map.removeLayer("edit-polygon-vertices"),this.map.removeLayer("edit-polygon-fill"),this.map.removeLayer("edit-polygon-lines"),this.map.removeSource(this.source)}startNew(){this.active=!0}editExisting(e){this.active=!0,this.points=e.geometry.coordinates[0],this.points.pop(),me(this,je,ot).call(this)}stop(){this.points=[],this.cursor=null,this.active=!1,this.hoverPolyon=!1,this.hoverPoint=null,this.dragging=!1,this.dragFrom=null,me(this,je,ot).call(this)}}je=new WeakSet,ot=function(){let e=st();this.points.forEach((i,r)=>{let o=rr(i);o.properties.hover=this.hoverPoint==r,o.properties.idx=r,e.features.push(o)}),this.cursor&&e.features.push(this.cursor),e.features=e.features.concat(or(this.points));let t=me(this,Rt,Pn).call(this);t&&(t.properties.hover=this.hoverPolyon,e.features.push(t)),this.map.getSource(this.source).setData(e)},At=new WeakSet,Mn=function(e){this.cursor=null,this.hoverPolyon=!1,this.hoverPoint=null;for(let t of this.map.queryRenderedFeatures(e.point,{layers:["edit-polygon-fill","edit-polygon-vertices"]}))if(t.geometry.type=="Polygon"){this.hoverPolyon=!0;break}else if(t.geometry.type=="Point"&&t.properties.hasOwnProperty("idx")){this.hoverPoint=t.properties.idx;break}!this.hoverPolyon&&this.hoverPoint==null&&(this.cursor=rr(e.lngLat.toArray())),me(this,je,ot).call(this)},Rt=new WeakSet,Pn=function(){if(this.points.length<3)return null;let e={type:"Feature",geometry:{type:"Polygon",coordinates:[JSON.parse(JSON.stringify(this.points))]},properties:{}};return e.geometry.coordinates[0].push(e.geometry.coordinates[0][0]),e};function rr(n){return{type:"Feature",properties:{},geometry:{type:"Point",coordinates:n}}}function or(n){let e=[];for(let t=0;t<n.length-1;t++)e.push({type:"Feature",geometry:{type:"LineString",coordinates:[n[t],n[t+1]]}});return n.length>=3&&e.push({type:"Feature",geometry:{type:"LineString",coordinates:[n[n.length-1],n[0]]}}),e}function lr(n){let e;return{c(){e=L("p"),e.textContent="Click an intervention to fill out its attributes"},m(t,i){x(t,e,i)},d(t){t&&T(e)}}}function ua(n){let e,t=n[0]==ht&&lr();return{c(){t&&t.c(),e=it()},m(i,r){t&&t.m(i,r),x(i,e,r)},p(i,[r]){i[0]==ht?t||(t=lr(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:re,o:re,d(i){t&&t.d(i),i&&T(e)}}}const ht="edit-attribute";function Lr(){}function fa(n,e,t){let i,r,o;ve(n,He,u=>t(4,i=u)),ve(n,de,u=>t(5,r=u)),ve(n,en,u=>t(6,o=u));let{mode:l}=e,{changeMode:s}=e;function a(){et(null)}return i.on("mousemove",u=>{if(l==ht&&o==null){let p=i.queryRenderedFeatures(u.point,{layers:["interventions-points","interventions-lines","interventions-polygons"]});var c=null;p.length>0&&(c=p[0].id),Ge.set(c)}}),i.on("mouseout",()=>{l==ht&&o==null&&Ge.set(null)}),i.on("click",u=>{if(l==ht){let c=i.queryRenderedFeatures(u.point,{layers:["interventions-points","interventions-lines","interventions-polygons"]});c.length>0?et(c[0].id):et(null)}}),hn.subscribe(u=>{if(u){let c=r.features.find(p=>p.id==u);c.geometry.type=="Point"?i.flyTo({center:c.geometry.coordinates}):i.fitBounds(In(c),{padding:200,animate:!0,duration:500}),s(ht)}}),n.$$set=u=>{"mode"in u&&t(0,l=u.mode),"changeMode"in u&&t(1,s=u.changeMode)},[l,s,Lr,a]}class ca extends oe{constructor(e){super(),le(this,e,fa,ua,se,{mode:0,changeMode:1,start:2,stop:3})}get start(){return Lr}get stop(){return this.$$.ctx[3]}}function sr(n){let e;return{c(){e=L("p"),e.textContent="Click an intervention to edit its geometry"},m(t,i){x(t,e,i)},d(t){t&&T(e)}}}function da(n){let e,t=n[0]==Ze&&sr();return{c(){t&&t.c(),e=it()},m(i,r){t&&t.m(i,r),x(i,e,r)},p(i,[r]){i[0]==Ze?t||(t=sr(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:re,o:re,d(i){t&&t.d(i),i&&T(e)}}}const Ze="edit-geometry";function Ar(){}function ha(n,e,t){let i;ve(n,He,m=>t(8,i=m));let{mode:r}=e,{routeSnapper:o}=e,{snapTool:l}=e,{pointTool:s}=e,{polygonTool:a}=e;function u(){c&&(o.stop(),s.stop(),a.stop(),de.update(m=>{let f=m.features.find(d=>d.id==c);return delete f.properties.hide_while_editing,m})),c=null,Ge.set(null)}let c=null;i.on("mousemove",m=>{if(r==Ze&&c==null){let d=i.queryRenderedFeatures(m.point,{layers:["interventions-points","interventions-lines","interventions-polygons"]});var f=null;d.length>0&&(f=d[0].id),Ge.set(f)}}),i.on("mouseout",()=>{r==Ze&&c==null&&Ge.set(null)}),i.on("click",m=>{if(r==Ze&&c==null){let f=i.queryRenderedFeatures(m.point,{layers:["interventions-points","interventions-lines","interventions-polygons"]});f.length>0&&p(f[0].id)}}),l.addEventListener("new-route",m=>{if(r==Ze){const f=m.detail;de.update(d=>{let v=d.features.find(E=>E.id==c);return v.properties.length_meters=f.properties.length_meters,v.properties.waypoints=f.properties.waypoints,delete v.properties.hide_while_editing,v.geometry=f.geometry,d}),c=null}}),l.addEventListener("no-new-route",()=>{r==Ze&&(de.update(m=>{let f=m.features.find(d=>d.id==c);return delete f.properties.hide_while_editing,m}),c=null)});for(let m of[s,a])m.addEventListener(f=>{r==Ze&&(de.update(d=>{let v=d.features.find(E=>E.id==c);return v.geometry=f.geometry,delete v.properties.hide_while_editing,d}),c=null)});function p(m){Ge.set(null);let f;de.update(d=>(f=d.features.find(v=>v.id==m),f.properties.hide_while_editing=!0,d)),c=m,f.geometry.type=="LineString"?o.editExisting(f):f.geometry.type=="Polygon"?a.editExisting(f):f.geometry.type=="Point"&&s.start()}return n.$$set=m=>{"mode"in m&&t(0,r=m.mode),"routeSnapper"in m&&t(1,o=m.routeSnapper),"snapTool"in m&&t(2,l=m.snapTool),"pointTool"in m&&t(3,s=m.pointTool),"polygonTool"in m&&t(4,a=m.polygonTool)},[r,o,l,s,a,Ar,u]}class ma extends oe{constructor(e){super(),le(this,e,ha,da,se,{mode:0,routeSnapper:1,snapTool:2,pointTool:3,polygonTool:4,start:5,stop:6})}get start(){return Ar}get stop(){return this.$$.ctx[6]}}let K;const Rr=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Rr.decode();let Gt=new Uint8Array;function Et(){return Gt.byteLength===0&&(Gt=new Uint8Array(K.memory.buffer)),Gt}function mt(n,e){return Rr.decode(Et().subarray(n,n+e))}const We=new Array(32).fill(void 0);We.push(void 0,null,!0,!1);let Mt=We.length;function pe(n){Mt===We.length&&We.push(We.length+1);const e=Mt;return Mt=We[e],We[e]=n,e}function te(n){return We[n]}function ga(n){n<36||(We[n]=Mt,Mt=n)}function xn(n){const e=te(n);return ga(n),e}function fn(n){return n==null}let qt=new Float64Array;function pa(){return qt.byteLength===0&&(qt=new Float64Array(K.memory.buffer)),qt}let Yt=new Int32Array;function be(){return Yt.byteLength===0&&(Yt=new Int32Array(K.memory.buffer)),Yt}let $e=0;const Xt=new TextEncoder("utf-8"),ba=typeof Xt.encodeInto=="function"?function(n,e){return Xt.encodeInto(n,e)}:function(n,e){const t=Xt.encode(n);return e.set(t),{read:n.length,written:t.length}};function zt(n,e,t){if(t===void 0){const s=Xt.encode(n),a=e(s.length);return Et().subarray(a,a+s.length).set(s),$e=s.length,a}let i=n.length,r=e(i);const o=Et();let l=0;for(;l<i;l++){const s=n.charCodeAt(l);if(s>127)break;o[r+l]=s}if(l!==i){l!==0&&(n=n.slice(l)),r=t(r,i,i=l+n.length*3);const s=Et().subarray(r+l,r+i),a=ba(n,s);l+=a.written}return $e=l,r}function Tn(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const r=n.description;return r==null?"Symbol":`Symbol(${r})`}if(e=="function"){const r=n.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(n)){const r=n.length;let o="[";r>0&&(o+=Tn(n[0]));for(let l=1;l<r;l++)o+=", "+Tn(n[l]);return o+="]",o}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let i;if(t.length>1)i=t[1];else return toString.call(n);if(i=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:i}function va(n,e){const t=e(n.length*1);return Et().set(n,t/1),$e=n.length,t}function cn(n,e){try{return n.apply(this,e)}catch(t){K.__wbindgen_exn_store(pe(t))}}class Qt{static __wrap(e){const t=Object.create(Qt.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();K.__wbg_jsroutesnapper_free(e)}constructor(e){try{const o=K.__wbindgen_add_to_stack_pointer(-16),l=va(e,K.__wbindgen_malloc),s=$e;K.jsroutesnapper_new(o,l,s);var t=be()[o/4+0],i=be()[o/4+1],r=be()[o/4+2];if(r)throw xn(i);return Qt.__wrap(t)}finally{K.__wbindgen_add_to_stack_pointer(16)}}setConfig(e){K.jsroutesnapper_setConfig(this.ptr,pe(e))}toFinalFeature(){try{const i=K.__wbindgen_add_to_stack_pointer(-16);K.jsroutesnapper_toFinalFeature(i,this.ptr);var e=be()[i/4+0],t=be()[i/4+1];let r;return e!==0&&(r=mt(e,t).slice(),K.__wbindgen_free(e,t*1)),r}finally{K.__wbindgen_add_to_stack_pointer(16)}}renderGeojson(){try{const i=K.__wbindgen_add_to_stack_pointer(-16);K.jsroutesnapper_renderGeojson(i,this.ptr);var e=be()[i/4+0],t=be()[i/4+1];return mt(e,t)}finally{K.__wbindgen_add_to_stack_pointer(16),K.__wbindgen_free(e,t)}}setSnapMode(e){K.jsroutesnapper_setSnapMode(this.ptr,e)}onMouseMove(e,t,i){return K.jsroutesnapper_onMouseMove(this.ptr,e,t,i)!==0}onClick(){K.jsroutesnapper_onClick(this.ptr)}onDragStart(){return K.jsroutesnapper_onDragStart(this.ptr)!==0}onMouseUp(){return K.jsroutesnapper_onMouseUp(this.ptr)!==0}clearState(){K.jsroutesnapper_clearState(this.ptr)}editExisting(e){try{const r=K.__wbindgen_add_to_stack_pointer(-16);K.jsroutesnapper_editExisting(r,this.ptr,pe(e));var t=be()[r/4+0],i=be()[r/4+1];if(i)throw xn(t)}finally{K.__wbindgen_add_to_stack_pointer(16)}}}async function _a(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(i){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i);else throw i}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function ya(){const n={};return n.wbg={},n.wbg.__wbindgen_string_new=function(e,t){const i=mt(e,t);return pe(i)},n.wbg.__wbindgen_object_drop_ref=function(e){xn(e)},n.wbg.__wbindgen_boolean_get=function(e){const t=te(e);return typeof t=="boolean"?t?1:0:2},n.wbg.__wbindgen_error_new=function(e,t){const i=new Error(mt(e,t));return pe(i)},n.wbg.__wbindgen_is_object=function(e){const t=te(e);return typeof t=="object"&&t!==null},n.wbg.__wbindgen_is_undefined=function(e){return te(e)===void 0},n.wbg.__wbindgen_in=function(e,t){return te(e)in te(t)},n.wbg.__wbindgen_number_get=function(e,t){const i=te(t),r=typeof i=="number"?i:void 0;pa()[e/8+1]=fn(r)?0:r,be()[e/4+0]=!fn(r)},n.wbg.__wbindgen_jsval_loose_eq=function(e,t){return te(e)==te(t)},n.wbg.__wbindgen_string_get=function(e,t){const i=te(t),r=typeof i=="string"?i:void 0;var o=fn(r)?0:zt(r,K.__wbindgen_malloc,K.__wbindgen_realloc),l=$e;be()[e/4+1]=l,be()[e/4+0]=o},n.wbg.__wbg_String_91fba7ded13ba54c=function(e,t){const i=String(te(t)),r=zt(i,K.__wbindgen_malloc,K.__wbindgen_realloc),o=$e;be()[e/4+1]=o,be()[e/4+0]=r},n.wbg.__wbindgen_object_clone_ref=function(e){const t=te(e);return pe(t)},n.wbg.__wbg_getwithrefkey_15c62c2b8546208d=function(e,t){const i=te(e)[te(t)];return pe(i)},n.wbg.__wbg_log_4b5638ad60bdc54a=function(e){console.log(te(e))},n.wbg.__wbg_get_57245cc7d7c7619d=function(e,t){const i=te(e)[t>>>0];return pe(i)},n.wbg.__wbg_length_6e3bbe7c8bd4dbd8=function(e){return te(e).length},n.wbg.__wbindgen_is_function=function(e){return typeof te(e)=="function"},n.wbg.__wbg_next_579e583d33566a86=function(e){const t=te(e).next;return pe(t)},n.wbg.__wbg_next_aaef7c8aa5e212ac=function(){return cn(function(e){const t=te(e).next();return pe(t)},arguments)},n.wbg.__wbg_done_1b73b0672e15f234=function(e){return te(e).done},n.wbg.__wbg_value_1ccc36bc03462d71=function(e){const t=te(e).value;return pe(t)},n.wbg.__wbg_iterator_6f9d4f28845f426c=function(){return pe(Symbol.iterator)},n.wbg.__wbg_get_765201544a2b6869=function(){return cn(function(e,t){const i=Reflect.get(te(e),te(t));return pe(i)},arguments)},n.wbg.__wbg_call_97ae9d8645dc388b=function(){return cn(function(e,t){const i=te(e).call(te(t));return pe(i)},arguments)},n.wbg.__wbg_isArray_27c46c67f498e15d=function(e){return Array.isArray(te(e))},n.wbg.__wbg_instanceof_ArrayBuffer_e5e48f4762c5610b=function(e){let t;try{t=te(e)instanceof ArrayBuffer}catch{t=!1}return t},n.wbg.__wbg_buffer_3f3d764d4747d564=function(e){const t=te(e).buffer;return pe(t)},n.wbg.__wbg_new_8c3f0052272a457a=function(e){const t=new Uint8Array(te(e));return pe(t)},n.wbg.__wbg_set_83db9690f9353e79=function(e,t,i){te(e).set(te(t),i>>>0)},n.wbg.__wbg_length_9e1ae1900cb0fbd5=function(e){return te(e).length},n.wbg.__wbg_instanceof_Uint8Array_971eeda69eb75003=function(e){let t;try{t=te(e)instanceof Uint8Array}catch{t=!1}return t},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return pe(e)},n.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const i=te(t).stack,r=zt(i,K.__wbindgen_malloc,K.__wbindgen_realloc),o=$e;be()[e/4+1]=o,be()[e/4+0]=r},n.wbg.__wbg_error_f851667af71bcfc6=function(e,t){try{console.error(mt(e,t))}finally{K.__wbindgen_free(e,t)}},n.wbg.__wbindgen_debug_string=function(e,t){const i=Tn(te(t)),r=zt(i,K.__wbindgen_malloc,K.__wbindgen_realloc),o=$e;be()[e/4+1]=o,be()[e/4+0]=r},n.wbg.__wbindgen_throw=function(e,t){throw new Error(mt(e,t))},n.wbg.__wbindgen_memory=function(){const e=K.memory;return pe(e)},n}function wa(n,e){return K=n.exports,Cr.__wbindgen_wasm_module=e,qt=new Float64Array,Yt=new Int32Array,Gt=new Uint8Array,K}async function Cr(n){typeof n>"u"&&(n="/atip/assets/route_snapper_bg.wasm");const e=ya();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:i}=await _a(await n,e);return wa(t,i)}var Ct,Ln,Ue,Ve;class ka{constructor(e,t,i){rt(this,Ct);rt(this,Ue);this.controlDiv=i,this.map=e,console.time("Deserialize and setup JsRouteSnapper"),this.inner=new Qt(t),console.timeEnd("Deserialize and setup JsRouteSnapper"),console.log("JsRouteSnapper ready, waiting for idle event"),this.active=!1,this.loaded=!1,this.map.once("idle",()=>{console.log("JsRouteSnapper now usable"),this.map.addSource("route-snapper",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:"route-points",type:"circle",source:"route-snapper",paint:{"circle-radius":["match",["get","type"],"unimportant",10/2,10],"circle-color":["match",["get","type"],"hovered","green","important","red","black"]},filter:["in","$type","Point"]}),this.map.addLayer({id:"route-lines",type:"line",source:"route-snapper",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"black","line-width":2.5},filter:["in","$type","LineString"]}),this.loaded=!0,this.map.on("mousemove",l=>{if(!this.active)return;const s={x:l.point.x-30,y:l.point.y},a=this.map.unproject(l.point).distanceTo(this.map.unproject(s));this.inner.onMouseMove(l.lngLat.lng,l.lngLat.lat,a)&&me(this,Ue,Ve).call(this)}),this.map.on("click",()=>{this.active&&(this.inner.onClick(),me(this,Ue,Ve).call(this))}),this.map.on("dragstart",l=>{this.active&&this.inner.onDragStart()&&this.map.dragPan.disable()}),this.map.on("mouseup",l=>{this.active&&this.inner.onMouseUp()&&this.map.dragPan.enable()}),document.addEventListener("keypress",l=>{this.active&&l.key=="Enter"&&(l.preventDefault(),me(this,Ct,Ln).call(this))}),document.addEventListener("keydown",l=>{this.active&&l.key=="Shift"&&(l.preventDefault(),this.inner.setSnapMode(!1),me(this,Ue,Ve).call(this))}),document.addEventListener("keyup",l=>{this.active&&l.key=="Shift"&&(l.preventDefault(),this.inner.setSnapMode(!0),me(this,Ue,Ve).call(this))}),this.stop()})}isActive(){return this.active}tearDown(){this.loaded&&(this.map.removeLayer("route-points"),this.map.removeLayer("route-lines"),this.map.removeSource("route-snapper"))}editExisting(e){if(!this.loaded){console.error("editExisting called before the map idle event received. Not starting tool.");return}e.properties.waypoints||(e.properties.waypoints=[{lon:e.geometry.coordinates[0][0],lat:e.geometry.coordinates[0][1],snapped:!0},{lon:e.geometry.coordinates[e.geometry.coordinates.length-1][0],lat:e.geometry.coordinates[e.geometry.coordinates.length-1][1],snapped:!0}]),this.start(),this.inner.editExisting(e.properties.waypoints),me(this,Ue,Ve).call(this)}stop(){if(!this.loaded)return;this.active=!1,this.inner.clearState(),me(this,Ue,Ve).call(this),this.controlDiv.innerHTML="";let e=document.createElement("button");e.innerText="Route tool",e.type="button",e.onclick=()=>{this.controlDiv.dispatchEvent(new CustomEvent("activate")),this.start()},this.controlDiv.appendChild(e)}start(){if(this.active)return;this.active=!0;let e=document.createElement("button");e.type="button",e.innerText="Finish route",e.onclick=()=>{me(this,Ct,Ln).call(this)};let t=document.createElement("button");t.type="button",t.innerText="Cancel",t.onclick=()=>{this.controlDiv.dispatchEvent(new CustomEvent("no-new-route")),this.stop()},this.controlDiv.innerHTML="";let i=document.createElement("div");i.style="display: flex; justify-content: space-evenly;",i.appendChild(e),i.appendChild(t),this.controlDiv.appendChild(i);let r=document.createElement("input");r.type="checkbox",r.id="avoidDoublingBack",r.onclick=()=>{this.inner.setConfig({avoid_doubling_back:r.checked}),me(this,Ue,Ve).call(this)};let o=document.createElement("label");o.innerText="Avoid doubling back",o.for=r.id;let l=document.createElement("div");l.appendChild(r),l.appendChild(o),this.controlDiv.append(l);const s=document.createElement("ul");s.innerHTML="<li><b>Click</b> green points on the transport network</br>to create snapped routes</li><li>Hold <b>Shift</b> to draw a point anywhere</li><li><b>Click and drag</b> any point to move it</li><li><b>Click</b> a red waypoint to delete it</li><li>Press <b>Enter</b> to finish route</li>",this.controlDiv.appendChild(s)}}Ct=new WeakSet,Ln=function(){const e=this.inner.toFinalFeature();e?this.controlDiv.dispatchEvent(new CustomEvent("new-route",{detail:JSON.parse(e)})):this.controlDiv.dispatchEvent(new CustomEvent("no-new-route")),this.stop()},Ue=new WeakSet,Ve=function(){this.loaded&&this.map.getSource("route-snapper").setData(JSON.parse(this.inner.renderGeojson()))};async function Sa(n,e){const t=await fetch(n),i=t.body.getReader(),r=t.headers.get("Content-Length");let o=0,l=[];for(;;){const{done:u,value:c}=await i.read();if(u)break;l.push(c),o+=c.length;const p=100*o/r;e.style=`background: linear-gradient(to right, red ${p}%, transparent 0);`}let s=new Uint8Array(o),a=0;for(let u of l)s.set(u,a),a+=u.length;return s}function Ea(n){let e,t;return{c(){e=L("div"),t=L("div"),t.textContent="Route tool loading..."},m(i,r){x(i,e,r),P(e,t),n[8](t),n[9](e)},p:re,i:re,o:re,d(i){i&&T(e),n[8](null),n[9](null)}}}const dn="route";function Ma(n,e,t){let i;ve(n,He,d=>t(10,i=d));let{mode:r}=e,{changeMode:o}=e,{url:l}=e,{snapTool:s}=e,a,{routeSnapper:u}=e;function c(){u.isActive()||u.start()}function p(){u==null||u.stop()}Ot(async()=>{await Cr(),console.log(`Grabbing ${l}`);try{const d=await Sa(l,a);t(2,u=new ka(i,d,s))}catch(d){console.log(`Route tool broke: ${d}`),t(0,s.innerHTML="Failed to load",s)}s.addEventListener("activate",()=>{o(dn)}),s.addEventListener("no-new-route",()=>{r==dn&&o("edit-attribute")}),s.addEventListener("new-route",d=>{if(r==dn){const v=d.detail;de.update(E=>(v.id=Bn(E),v.properties.intervention_type="route",E.features.push(v),E)),o("edit-attribute"),et(v.id)}})}),On(()=>{u==null||u.tearDown()});function m(d){he[d?"unshift":"push"](()=>{a=d,t(1,a)})}function f(d){he[d?"unshift":"push"](()=>{s=d,t(0,s)})}return n.$$set=d=>{"mode"in d&&t(3,r=d.mode),"changeMode"in d&&t(4,o=d.changeMode),"url"in d&&t(5,l=d.url),"snapTool"in d&&t(0,s=d.snapTool),"routeSnapper"in d&&t(2,u=d.routeSnapper)},[s,a,u,r,o,l,c,p,m,f]}class Pa extends oe{constructor(e){super(),le(this,e,Ma,Ea,se,{mode:3,changeMode:4,url:5,snapTool:0,routeSnapper:2,start:6,stop:7})}get start(){return this.$$.ctx[6]}get stop(){return this.$$.ctx[7]}}function ar(n){let e;return{c(){e=L("p"),e.textContent="Click to add a new point"},m(t,i){x(t,e,i)},d(t){t&&T(e)}}}function xa(n){let e,t=n[0]==An&&ar();return{c(){t&&t.c(),e=it()},m(i,r){t&&t.m(i,r),x(i,e,r)},p(i,[r]){i[0]==An?t||(t=ar(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:re,o:re,d(i){t&&t.d(i),i&&T(e)}}}const An="point";function Ta(n,e,t){let{mode:i}=e,{changeMode:r}=e,{pointTool:o}=e;function l(){o.start()}function s(){o.stop()}return o.addEventListener(a=>{i==An&&(de.update(u=>(a.id=Bn(u),a.properties.intervention_type="other",u.features.push(a),u)),r("edit-attribute"),et(a.id))}),n.$$set=a=>{"mode"in a&&t(0,i=a.mode),"changeMode"in a&&t(1,r=a.changeMode),"pointTool"in a&&t(2,o=a.pointTool)},[i,r,o,l,s]}class La extends oe{constructor(e){super(),le(this,e,Ta,xa,se,{mode:0,changeMode:1,pointTool:2,start:3,stop:4})}get start(){return this.$$.ctx[3]}get stop(){return this.$$.ctx[4]}}function ur(n){let e;return{c(){e=L("p"),e.innerHTML="Click the map to add a vertex, or click a vertex to delete it. Press <strong>Enter</strong> to finish. Drag a vertex or the polygon to move."},m(t,i){x(t,e,i)},d(t){t&&T(e)}}}function Aa(n){let e,t=n[0]==Rn&&ur();return{c(){t&&t.c(),e=it()},m(i,r){t&&t.m(i,r),x(i,e,r)},p(i,[r]){i[0]==Rn?t||(t=ur(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:re,o:re,d(i){t&&t.d(i),i&&T(e)}}}const Rn="polygon";function Ra(n,e,t){let{mode:i}=e,{changeMode:r}=e,{polygonTool:o}=e;function l(){o.startNew()}function s(){o.stop()}return o.addEventListener(a=>{i==Rn&&(de.update(u=>(a.id=Bn(u),a.properties.intervention_type="area",u.features.push(a),u)),r("edit-attribute"),et(a.id))}),n.$$set=a=>{"mode"in a&&t(0,i=a.mode),"changeMode"in a&&t(1,r=a.changeMode),"polygonTool"in a&&t(2,o=a.polygonTool)},[i,r,o,l,s]}class Ca extends oe{constructor(e){super(),le(this,e,Ra,Aa,se,{mode:0,changeMode:1,polygonTool:2,start:3,stop:4})}get start(){return this.$$.ctx[3]}get stop(){return this.$$.ctx[4]}}function fr(n){let e,t,i={mode:n[3],routeSnapper:n[1],snapTool:n[2],pointTool:n[9],polygonTool:n[10]};return e=new ma({props:i}),n[15](e),{c(){j(e.$$.fragment)},m(r,o){W(e,r,o),t=!0},p(r,o){const l={};o&8&&(l.mode=r[3]),o&2&&(l.routeSnapper=r[1]),o&4&&(l.snapTool=r[2]),e.$set(l)},i(r){t||(C(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){n[15](null),H(e,r)}}}function Oa(n){let e,t,i,r,o,l,s,a,u,c,p,m,f,d,v,E,A,h,g,b,_,y,R,M,N,D,w,z,B,Y,G,U,$,ie,ae,ce={mode:n[3],changeMode:n[11]};s=new ca({props:ce}),n[13](s);let Z=n[1]&&n[2]&&fr(n),S={mode:n[3],changeMode:n[11],pointTool:n[9]};b=new La({props:S}),n[17](b);let ee={mode:n[3],changeMode:n[11],polygonTool:n[10]};w=new Ca({props:ee}),n[19](w);function ln(ne){n[21](ne)}function sn(ne){n[22](ne)}let vt={mode:n[3],changeMode:n[11],url:n[0]};return n[1]!==void 0&&(vt.routeSnapper=n[1]),n[2]!==void 0&&(vt.snapTool=n[2]),Y=new Pa({props:vt}),n[20](Y),he.push(()=>Be(Y,"routeSnapper",ln,n[1])),he.push(()=>Be(Y,"snapTool",sn,n[2])),{c(){e=L("div"),t=L("div"),i=L("button"),r=V("Edit attributes"),l=O(),j(s.$$.fragment),a=O(),u=L("div"),c=L("button"),p=V("Edit geometry"),f=O(),Z&&Z.c(),d=O(),v=L("div"),E=L("button"),A=V("New point"),g=O(),j(b.$$.fragment),_=O(),y=L("div"),R=L("button"),M=V("New polygon"),D=O(),j(w.$$.fragment),z=O(),B=L("div"),j(Y.$$.fragment),I(i,"type","button"),i.disabled=o=n[3]=="edit-attribute",I(i,"class","svelte-cej5os"),I(c,"type","button"),c.disabled=m=n[3]=="edit-geometry",I(c,"class","svelte-cej5os"),I(E,"type","button"),E.disabled=h=n[3]=="point",I(E,"class","svelte-cej5os"),I(R,"type","button"),R.disabled=N=n[3]=="polygon",I(R,"class","svelte-cej5os"),I(e,"class","toolbox svelte-cej5os")},m(ne,_e){x(ne,e,_e),P(e,t),P(t,i),P(i,r),P(t,l),W(s,t,null),P(e,a),P(e,u),P(u,c),P(c,p),P(u,f),Z&&Z.m(u,null),P(e,d),P(e,v),P(v,E),P(E,A),P(v,g),W(b,v,null),P(e,_),P(e,y),P(y,R),P(R,M),P(y,D),W(w,y,null),P(e,z),P(e,B),W(Y,B,null),$=!0,ie||(ae=[q(i,"click",n[12]),q(c,"click",n[14]),q(E,"click",n[16]),q(R,"click",n[18])],ie=!0)},p(ne,[_e]){(!$||_e&8&&o!==(o=ne[3]=="edit-attribute"))&&(i.disabled=o);const X={};_e&8&&(X.mode=ne[3]),s.$set(X),(!$||_e&8&&m!==(m=ne[3]=="edit-geometry"))&&(c.disabled=m),ne[1]&&ne[2]?Z?(Z.p(ne,_e),_e&6&&C(Z,1)):(Z=fr(ne),Z.c(),C(Z,1),Z.m(u,null)):Z&&(ke(),F(Z,1,1,()=>{Z=null}),Se()),(!$||_e&8&&h!==(h=ne[3]=="point"))&&(E.disabled=h);const Hn={};_e&8&&(Hn.mode=ne[3]),b.$set(Hn),(!$||_e&8&&N!==(N=ne[3]=="polygon"))&&(R.disabled=N);const Vn={};_e&8&&(Vn.mode=ne[3]),w.$set(Vn);const _t={};_e&8&&(_t.mode=ne[3]),_e&1&&(_t.url=ne[0]),!G&&_e&2&&(G=!0,_t.routeSnapper=ne[1],Fe(()=>G=!1)),!U&&_e&4&&(U=!0,_t.snapTool=ne[2],Fe(()=>U=!1)),Y.$set(_t)},i(ne){$||(C(s.$$.fragment,ne),C(Z),C(b.$$.fragment,ne),C(w.$$.fragment,ne),C(Y.$$.fragment,ne),$=!0)},o(ne){F(s.$$.fragment,ne),F(Z),F(b.$$.fragment,ne),F(w.$$.fragment,ne),F(Y.$$.fragment,ne),$=!1},d(ne){ne&&T(e),n[13](null),H(s),Z&&Z.d(),n[17](null),H(b),n[19](null),H(w),n[20](null),H(Y),ie=!1,xe(ae)}}}function Ia(n,e,t){let i;ve(n,He,w=>t(23,i=w));let{routeUrl:r}=e,o,l,s=new Vs(i),a=new aa(i),u="edit-attribute",c,p,m,f,d;function v(w){let z={"edit-attribute":c,"edit-geometry":p,route:m,point:f,polygon:d};if(u==w){console.log(`Mode is already ${u}, not changing`);return}console.log(`Stopping old mode ${u}`),z[u].stop(),t(3,u=w),console.log(`Starting new mode ${u}`),z[u].start()}On(()=>{s==null||s.tearDown(),a==null||a.tearDown()});const E=()=>v("edit-attribute");function A(w){he[w?"unshift":"push"](()=>{c=w,t(4,c)})}const h=()=>v("edit-geometry");function g(w){he[w?"unshift":"push"](()=>{p=w,t(5,p)})}const b=()=>v("point");function _(w){he[w?"unshift":"push"](()=>{f=w,t(7,f)})}const y=()=>v("polygon");function R(w){he[w?"unshift":"push"](()=>{d=w,t(8,d)})}function M(w){he[w?"unshift":"push"](()=>{m=w,t(6,m)})}function N(w){o=w,t(1,o)}function D(w){l=w,t(2,l)}return n.$$set=w=>{"routeUrl"in w&&t(0,r=w.routeUrl)},[r,o,l,u,c,p,m,f,d,s,a,v,E,A,h,g,b,_,y,R,M,N,D]}class Na extends oe{constructor(e){super(),le(this,e,Ia,Oa,se,{routeUrl:0})}}function Ba(n){let e,t,i,r,o,l,s,a;return{c(){e=L("div"),t=L("button"),t.textContent="Home",i=O(),r=L("button"),r.textContent="About",o=O(),l=L("button"),l.textContent="Instructions",I(t,"type","button"),I(t,"onclick","window.open('index.html');"),I(r,"type","button"),I(l,"type","button"),I(e,"slot","nav")},m(u,c){x(u,e,c),P(e,t),P(e,i),P(e,r),P(e,o),P(e,l),s||(a=[q(r,"click",n[6]),q(l,"click",n[7])],s=!0)},p:re,d(u){u&&T(e),s=!1,xe(a)}}}function Fa(n){let e,t,i,r,o,l,s,a,u,c,p,m;return o=new Ds({props:{boundaryGeojson:n[3]}}),s=new Ns({props:{authorityName:n[4]}}),p=new ys({}),{c(){e=L("div"),t=L("h1"),i=V(n[4]),r=O(),j(o.$$.fragment),l=O(),j(s.$$.fragment),a=O(),u=L("br"),c=O(),j(p.$$.fragment),I(e,"slot","sidebar")},m(f,d){x(f,e,d),P(e,t),P(t,i),P(t,r),W(o,t,null),P(e,l),W(s,e,null),P(e,a),P(e,u),P(e,c),W(p,e,null),m=!0},p(f,d){const v={};d&8&&(v.boundaryGeojson=f[3]),o.$set(v)},i(f){m||(C(o.$$.fragment,f),C(s.$$.fragment,f),C(p.$$.fragment,f),m=!0)},o(f){F(o.$$.fragment,f),F(s.$$.fragment,f),F(p.$$.fragment,f),m=!1},d(f){f&&T(e),H(o),H(s),H(p)}}}function za(n){let e,t,i,r,o,l,s,a,u,c,p,m;return e=new as({props:{boundaryGeojson:n[3]}}),i=new js({}),o=new Hs({}),s=new Na({props:{routeUrl:n[2]}}),u=new Ys({props:{style:n[5]}}),p=new Js({}),{c(){j(e.$$.fragment),t=O(),j(i.$$.fragment),r=O(),j(o.$$.fragment),l=O(),j(s.$$.fragment),a=O(),j(u.$$.fragment),c=O(),j(p.$$.fragment)},m(f,d){W(e,f,d),x(f,t,d),W(i,f,d),x(f,r,d),W(o,f,d),x(f,l,d),W(s,f,d),x(f,a,d),W(u,f,d),x(f,c,d),W(p,f,d),m=!0},p(f,d){const v={};d&8&&(v.boundaryGeojson=f[3]),e.$set(v);const E={};d&4&&(E.routeUrl=f[2]),s.$set(E)},i(f){m||(C(e.$$.fragment,f),C(i.$$.fragment,f),C(o.$$.fragment,f),C(s.$$.fragment,f),C(u.$$.fragment,f),C(p.$$.fragment,f),m=!0)},o(f){F(e.$$.fragment,f),F(i.$$.fragment,f),F(o.$$.fragment,f),F(s.$$.fragment,f),F(u.$$.fragment,f),F(p.$$.fragment,f),m=!1},d(f){H(e,f),f&&T(t),H(i,f),f&&T(r),H(o,f),f&&T(l),H(s,f),f&&T(a),H(u,f),f&&T(c),H(p,f)}}}function Da(n){let e,t,i;return t=new ml({props:{style:n[5],$$slots:{default:[za]},$$scope:{ctx:n}}}),{c(){e=L("div"),j(t.$$.fragment),I(e,"slot","main")},m(r,o){x(r,e,o),W(t,e,null),i=!0},p(r,o){const l={};o&8204&&(l.$$scope={dirty:o,ctx:r}),t.$set(l)},i(r){i||(C(t.$$.fragment,r),i=!0)},o(r){F(t.$$.fragment,r),i=!1},d(r){r&&T(e),H(t)}}}function Ga(n){let e,t,i,r,o,l,s,a;e=new yl({props:{$$slots:{main:[Da],sidebar:[Fa],nav:[Ba]},$$scope:{ctx:n}}});function u(f){n[8](f)}let c={};n[0]!==void 0&&(c.open=n[0]),i=new Jr({props:c}),he.push(()=>Be(i,"open",u,n[0]));function p(f){n[9](f)}let m={};return n[1]!==void 0&&(m.open=n[1]),l=new cl({props:m}),he.push(()=>Be(l,"open",p,n[1])),{c(){j(e.$$.fragment),t=O(),j(i.$$.fragment),o=O(),j(l.$$.fragment)},m(f,d){W(e,f,d),x(f,t,d),W(i,f,d),x(f,o,d),W(l,f,d),a=!0},p(f,[d]){const v={};d&8204&&(v.$$scope={dirty:d,ctx:f}),e.$set(v);const E={};!r&&d&1&&(r=!0,E.open=f[0],Fe(()=>r=!1)),i.$set(E);const A={};!s&&d&2&&(s=!0,A.open=f[1],Fe(()=>s=!1)),l.$set(A)},i(f){a||(C(e.$$.fragment,f),C(i.$$.fragment,f),C(l.$$.fragment,f),a=!0)},o(f){F(e.$$.fragment,f),F(i.$$.fragment,f),F(l.$$.fragment,f),a=!1},d(f){H(e,f),f&&T(t),H(i,f),f&&T(o),H(l,f)}}}function qa(n,e,t){let i=!1,r=!1,o=window.location.hostname.includes("atip.uk");const l=new URLSearchParams(window.location.search);let s=l.get("authority"),a=l.get("style")||"streets";var u=`https://atip.uk/route-snappers/${s}.bin`;o||(u=`https://atip.uk/route-snappers-dev/${s}.bin`);function c(){t(0,i=!i),t(1,r=!1)}function p(){t(1,r=!r),t(0,i=!1)}let m;Ot(async()=>{t(3,m=await f())});async function f(){const A=await(await fetch(Ur)).text(),h=JSON.parse(A);return h.features=h.features.filter(g=>g.properties.name==s),h}function d(E){i=E,t(0,i)}function v(E){r=E,t(1,r)}return[i,r,u,m,s,a,c,p,d,v]}class Ya extends oe{constructor(e){super(),le(this,e,qa,Ga,se,{})}}new Ya({target:document.getElementById("app")});
