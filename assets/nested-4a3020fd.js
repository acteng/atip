var ka=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var kn=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var gt=(n,e,t)=>(ka(n,e,"access private method"),t);import{S as Pe,i as Ae,s as Ne,x as ce,y as it,f as K,z as qt,g as L,h as B,B as lt,C as Xe,p as M,D as Se,E as Ze,t as ve,F as Fe,G as hi,H as re,e as V,I as qe,J as T,l as $,r as dt,K as hl,L as ti,c as Z,n as G,M as nt,o as H,N as rt,O as Ca,d as de,m as he,q as pe,P as Ia,Q as pi,R as gn,T as st,U as ut,V as ft,W as ct,X as xa,Y as tn,Z as nn,_ as Lr,$ as Tt,b as $e,a0 as pl,a1 as so,a2 as Oa,j as pn,a3 as La,a as kt,k as Ct,a4 as dr,a5 as gl,a6 as Zr,a7 as uo,w as ml,u as Ma,a8 as Cn,a9 as Pa,aa as bl,ab as fo,A as Aa}from"./authorities-657a4482.js";function co(n){let e,t;return{c(){e=it("title"),t=ve(n[1])},m(r,o){L(r,e,o),B(e,t)},p(r,o){o&2&&Fe(t,r[1])},d(r){r&&M(e)}}}function Na(n){let e,t,r=n[1]&&co(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let a=0;a<o.length;a+=1)l=ce(l,o[a]);return{c(){e=it("svg"),r&&r.c(),t=it("path"),K(t,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),qt(e,l)},m(a,u){L(a,e,u),r&&r.m(e,null),B(e,t)},p(a,[u]){a[1]?r?r.p(a,u):(r=co(a),r.c(),r.m(e,t)):r&&(r.d(1),r=null),qt(e,l=lt(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:a[0]},u&1&&{height:a[0]},u&4&&a[2],u&8&&a[3]]))},i:Xe,o:Xe,d(a){a&&M(e),r&&r.d()}}}function Ra(n,e,t){let r,o;const l=["size","title"];let a=Se(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=ce(ce({},e),Ze(f))),t(3,a=Se(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ze(e),[u,c,o,a,r]}class Fa extends Pe{constructor(e){super(),Ae(this,e,Ra,Na,Ne,{size:0,title:1})}}const gi=Fa;function ho(n,e,t){const r=n.slice();return r[2]=e[t].width,r}function Da(n){let e,t,r,o,l=[n[4],{style:t="width: "+n[2]+";"+n[4].style}],a={};for(let u=0;u<l.length;u+=1)a=ce(a,l[u]);return{c(){e=V("p"),qe(e,a),T(e,"bx--skeleton__text",!0),T(e,"bx--skeleton__heading",n[0])},m(u,c){L(u,e,c),r||(o=[$(e,"click",n[12]),$(e,"mouseover",n[13]),$(e,"mouseenter",n[14]),$(e,"mouseleave",n[15])],r=!0)},p(u,c){qe(e,a=lt(l,[c&16&&u[4],c&20&&t!==(t="width: "+u[2]+";"+u[4].style)&&{style:t}])),T(e,"bx--skeleton__text",!0),T(e,"bx--skeleton__heading",u[0])},d(u){u&&M(e),r=!1,dt(o)}}}function Ua(n){let e,t,r,o=n[3],l=[];for(let c=0;c<o.length;c+=1)l[c]=po(ho(n,o,c));let a=[n[4]],u={};for(let c=0;c<a.length;c+=1)u=ce(u,a[c]);return{c(){e=V("div");for(let c=0;c<l.length;c+=1)l[c].c();qe(e,u)},m(c,f){L(c,e,f);for(let h=0;h<l.length;h+=1)l[h].m(e,null);t||(r=[$(e,"click",n[8]),$(e,"mouseover",n[9]),$(e,"mouseenter",n[10]),$(e,"mouseleave",n[11])],t=!0)},p(c,f){if(f&9){o=c[3];let h;for(h=0;h<o.length;h+=1){const v=ho(c,o,h);l[h]?l[h].p(v,f):(l[h]=po(v),l[h].c(),l[h].m(e,null))}for(;h<l.length;h+=1)l[h].d(1);l.length=o.length}qe(e,u=lt(a,[f&16&&c[4]]))},d(c){c&&M(e),hl(l,c),t=!1,dt(r)}}}function po(n){let e;return{c(){e=V("p"),ti(e,"width",n[2]),T(e,"bx--skeleton__text",!0),T(e,"bx--skeleton__heading",n[0])},m(t,r){L(t,e,r)},p(t,r){r&8&&ti(e,"width",t[2]),r&1&&T(e,"bx--skeleton__heading",t[0])},d(t){t&&M(e)}}}function ja(n){let e;function t(l,a){return l[1]?Ua:Da}let r=t(n),o=r(n);return{c(){o.c(),e=hi()},m(l,a){o.m(l,a),L(l,e,a)},p(l,[a]){r===(r=t(l))&&o?o.p(l,a):(o.d(1),o=r(l),o&&(o.c(),o.m(e.parentNode,e)))},i:Xe,o:Xe,d(l){o.d(l),l&&M(e)}}}function Ba(n,e,t){let r,o,l;const a=["lines","heading","paragraph","width"];let u=Se(e,a),{lines:c=3}=e,{heading:f=!1}=e,{paragraph:h=!1}=e,{width:v="100%"}=e;const y=[.973,.153,.567];function p(A){re.call(this,n,A)}function m(A){re.call(this,n,A)}function S(A){re.call(this,n,A)}function O(A){re.call(this,n,A)}function j(A){re.call(this,n,A)}function I(A){re.call(this,n,A)}function C(A){re.call(this,n,A)}function N(A){re.call(this,n,A)}return n.$$set=A=>{e=ce(ce({},e),Ze(A)),t(4,u=Se(e,a)),"lines"in A&&t(5,c=A.lines),"heading"in A&&t(0,f=A.heading),"paragraph"in A&&t(1,h=A.paragraph),"width"in A&&t(2,v=A.width)},n.$$.update=()=>{if(n.$$.dirty&4&&t(7,o=parseInt(v,10)),n.$$.dirty&4&&t(6,l=v.includes("px")),n.$$.dirty&238&&h)for(let A=0;A<c;A++){const F=l?o-75:0,ge=l?o:75,z=Math.floor(y[A%3]*(ge-F+1))+F+"px";t(3,r=[...r,{width:l?z:`calc(${v} - ${z})`}])}},t(3,r=[]),[f,h,v,r,u,c,l,o,p,m,S,O,j,I,C,N]}class za extends Pe{constructor(e){super(),Ae(this,e,Ba,ja,Ne,{lines:5,heading:0,paragraph:1,width:2})}}const On=za;function go(n,e,t){const r=n.slice();return r[9]=e[t],r}function mo(n){let e,t,r,o,l,a,u,c,f,h,v,y,p;return r=new gi({props:{class:"bx--accordion__arrow"}}),l=new On({props:{class:"bx--accordion__title"}}),c=new On({props:{width:"90%"}}),h=new On({props:{width:"80%"}}),y=new On({props:{width:"95%"}}),{c(){e=V("li"),t=V("span"),de(r.$$.fragment),o=Z(),de(l.$$.fragment),a=Z(),u=V("div"),de(c.$$.fragment),f=Z(),de(h.$$.fragment),v=Z(),de(y.$$.fragment),T(t,"bx--accordion__heading",!0),T(u,"bx--accordion__content",!0),T(e,"bx--accordion__item",!0),T(e,"bx--accordion__item--active",!0)},m(m,S){L(m,e,S),B(e,t),he(r,t,null),B(t,o),he(l,t,null),B(e,a),B(e,u),he(c,u,null),B(u,f),he(h,u,null),B(u,v),he(y,u,null),p=!0},i(m){p||(G(r.$$.fragment,m),G(l.$$.fragment,m),G(c.$$.fragment,m),G(h.$$.fragment,m),G(y.$$.fragment,m),p=!0)},o(m){H(r.$$.fragment,m),H(l.$$.fragment,m),H(c.$$.fragment,m),H(h.$$.fragment,m),H(y.$$.fragment,m),p=!1},d(m){m&&M(e),pe(r),pe(l),pe(c),pe(h),pe(y)}}}function bo(n,e){let t,r,o,l,a,u,c;return o=new gi({props:{class:"bx--accordion__arrow"}}),a=new On({props:{class:"bx--accordion__title"}}),{key:n,first:null,c(){t=V("li"),r=V("span"),de(o.$$.fragment),l=Z(),de(a.$$.fragment),u=Z(),T(r,"bx--accordion__heading",!0),T(t,"bx--accordion__item",!0),this.first=t},m(f,h){L(f,t,h),B(t,r),he(o,r,null),B(r,l),he(a,r,null),B(t,u),c=!0},p(f,h){},i(f){c||(G(o.$$.fragment,f),G(a.$$.fragment,f),c=!0)},o(f){H(o.$$.fragment,f),H(a.$$.fragment,f),c=!1},d(f){f&&M(t),pe(o),pe(a)}}}function Ga(n){let e,t,r=[],o=new Map,l,a,u,c=n[3]&&mo(),f=Array.from({length:n[3]?n[0]-1:n[0]},vo);const h=p=>p[9];for(let p=0;p<f.length;p+=1){let m=go(n,f,p),S=h(m);o.set(S,r[p]=bo(S))}let v=[n[4]],y={};for(let p=0;p<v.length;p+=1)y=ce(y,v[p]);return{c(){e=V("ul"),c&&c.c(),t=Z();for(let p=0;p<r.length;p+=1)r[p].c();qe(e,y),T(e,"bx--skeleton",!0),T(e,"bx--accordion",!0),T(e,"bx--accordion--start",n[1]==="start"),T(e,"bx--accordion--end",n[1]==="end"),T(e,"bx--accordion--sm",n[2]==="sm"),T(e,"bx--accordion--xl",n[2]==="xl")},m(p,m){L(p,e,m),c&&c.m(e,null),B(e,t);for(let S=0;S<r.length;S+=1)r[S].m(e,null);l=!0,a||(u=[$(e,"click",n[5]),$(e,"mouseover",n[6]),$(e,"mouseenter",n[7]),$(e,"mouseleave",n[8])],a=!0)},p(p,[m]){p[3]?c?m&8&&G(c,1):(c=mo(),c.c(),G(c,1),c.m(e,t)):c&&(nt(),H(c,1,1,()=>{c=null}),rt()),m&9&&(f=Array.from({length:p[3]?p[0]-1:p[0]},vo),nt(),r=Ca(r,m,h,1,p,f,o,e,Ia,bo,null,go),rt()),qe(e,y=lt(v,[m&16&&p[4]])),T(e,"bx--skeleton",!0),T(e,"bx--accordion",!0),T(e,"bx--accordion--start",p[1]==="start"),T(e,"bx--accordion--end",p[1]==="end"),T(e,"bx--accordion--sm",p[2]==="sm"),T(e,"bx--accordion--xl",p[2]==="xl")},i(p){if(!l){G(c);for(let m=0;m<f.length;m+=1)G(r[m]);l=!0}},o(p){H(c);for(let m=0;m<r.length;m+=1)H(r[m]);l=!1},d(p){p&&M(e),c&&c.d();for(let m=0;m<r.length;m+=1)r[m].d();a=!1,dt(u)}}}const vo=(n,e)=>e;function Va(n,e,t){const r=["count","align","size","open"];let o=Se(e,r),{count:l=4}=e,{align:a="end"}=e,{size:u=void 0}=e,{open:c=!0}=e;function f(p){re.call(this,n,p)}function h(p){re.call(this,n,p)}function v(p){re.call(this,n,p)}function y(p){re.call(this,n,p)}return n.$$set=p=>{e=ce(ce({},e),Ze(p)),t(4,o=Se(e,r)),"count"in p&&t(0,l=p.count),"align"in p&&t(1,a=p.align),"size"in p&&t(2,u=p.size),"open"in p&&t(3,c=p.open)},[l,a,u,c,o,f,h,v,y]}class qa extends Pe{constructor(e){super(),Ae(this,e,Va,Ga,Ne,{count:0,align:1,size:2,open:3})}}const Ja=qa;function Ya(n){let e,t,r,o;const l=n[6].default,a=st(l,n,n[5],null);let u=[n[3]],c={};for(let f=0;f<u.length;f+=1)c=ce(c,u[f]);return{c(){e=V("ul"),a&&a.c(),qe(e,c),T(e,"bx--accordion",!0),T(e,"bx--accordion--start",n[0]==="start"),T(e,"bx--accordion--end",n[0]==="end"),T(e,"bx--accordion--sm",n[1]==="sm"),T(e,"bx--accordion--xl",n[1]==="xl")},m(f,h){L(f,e,h),a&&a.m(e,null),t=!0,r||(o=[$(e,"click",n[7]),$(e,"mouseover",n[8]),$(e,"mouseenter",n[9]),$(e,"mouseleave",n[10])],r=!0)},p(f,h){a&&a.p&&(!t||h&32)&&ut(a,l,f,f[5],t?ct(l,f[5],h,null):ft(f[5]),null),qe(e,c=lt(u,[h&8&&f[3]])),T(e,"bx--accordion",!0),T(e,"bx--accordion--start",f[0]==="start"),T(e,"bx--accordion--end",f[0]==="end"),T(e,"bx--accordion--sm",f[1]==="sm"),T(e,"bx--accordion--xl",f[1]==="xl")},i(f){t||(G(a,f),t=!0)},o(f){H(a,f),t=!1},d(f){f&&M(e),a&&a.d(f),r=!1,dt(o)}}}function Ha(n){let e,t;const r=[n[3],{align:n[0]},{size:n[1]}];let o={};for(let l=0;l<r.length;l+=1)o=ce(o,r[l]);return e=new Ja({props:o}),e.$on("click",n[11]),e.$on("mouseover",n[12]),e.$on("mouseenter",n[13]),e.$on("mouseleave",n[14]),{c(){de(e.$$.fragment)},m(l,a){he(e,l,a),t=!0},p(l,a){const u=a&11?lt(r,[a&8&&xa(l[3]),a&1&&{align:l[0]},a&2&&{size:l[1]}]):{};e.$set(u)},i(l){t||(G(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){pe(e,l)}}}function Wa(n){let e,t,r,o;const l=[Ha,Ya],a=[];function u(c,f){return c[2]?0:1}return e=u(n),t=a[e]=l[e](n),{c(){t.c(),r=hi()},m(c,f){a[e].m(c,f),L(c,r,f),o=!0},p(c,[f]){let h=e;e=u(c),e===h?a[e].p(c,f):(nt(),H(a[h],1,1,()=>{a[h]=null}),rt(),t=a[e],t?t.p(c,f):(t=a[e]=l[e](c),t.c()),G(t,1),t.m(r.parentNode,r))},i(c){o||(G(t),o=!0)},o(c){H(t),o=!1},d(c){a[e].d(c),c&&M(r)}}}function Xa(n,e,t){const r=["align","size","disabled","skeleton"];let o=Se(e,r),{$$slots:l={},$$scope:a}=e,{align:u="end"}=e,{size:c=void 0}=e,{disabled:f=!1}=e,{skeleton:h=!1}=e;const v=gn(f);pi("Accordion",{disableItems:v});function y(N){re.call(this,n,N)}function p(N){re.call(this,n,N)}function m(N){re.call(this,n,N)}function S(N){re.call(this,n,N)}function O(N){re.call(this,n,N)}function j(N){re.call(this,n,N)}function I(N){re.call(this,n,N)}function C(N){re.call(this,n,N)}return n.$$set=N=>{e=ce(ce({},e),Ze(N)),t(3,o=Se(e,r)),"align"in N&&t(0,u=N.align),"size"in N&&t(1,c=N.size),"disabled"in N&&t(4,f=N.disabled),"skeleton"in N&&t(2,h=N.skeleton),"$$scope"in N&&t(5,a=N.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&v.set(f)},[u,c,h,o,f,a,l,y,p,m,S,O,j,I,C]}class Za extends Pe{constructor(e){super(),Ae(this,e,Xa,Wa,Ne,{align:0,size:1,disabled:4,skeleton:2})}}const Ka=Za,Qa=n=>({}),_o=n=>({});function $a(n){let e;return{c(){e=ve(n[2])},m(t,r){L(t,e,r)},p(t,r){r&4&&Fe(e,t[2])},d(t){t&&M(e)}}}function es(n){let e,t,r,o,l,a,u,c,f,h;r=new gi({props:{class:"bx--accordion__arrow","aria-label":n[3]}});const v=n[7].title,y=st(v,n,n[6],_o),p=y||$a(n),m=n[7].default,S=st(m,n,n[6],null);let O=[n[5]],j={};for(let I=0;I<O.length;I+=1)j=ce(j,O[I]);return{c(){e=V("li"),t=V("button"),de(r.$$.fragment),o=Z(),l=V("div"),p&&p.c(),a=Z(),u=V("div"),S&&S.c(),T(l,"bx--accordion__title",!0),K(t,"type","button"),K(t,"title",n[3]),K(t,"aria-expanded",n[0]),t.disabled=n[1],T(t,"bx--accordion__heading",!0),T(u,"bx--accordion__content",!0),qe(e,j),T(e,"bx--accordion__item",!0),T(e,"bx--accordion__item--active",n[0]),T(e,"bx--accordion__item--disabled",n[1]),T(e,"bx--accordion__item--expanding",n[4]==="expanding"),T(e,"bx--accordion__item--collapsing",n[4]==="collapsing")},m(I,C){L(I,e,C),B(e,t),he(r,t,null),B(t,o),B(t,l),p&&p.m(l,null),B(e,a),B(e,u),S&&S.m(u,null),c=!0,f||(h=[$(t,"click",n[9]),$(t,"click",n[14]),$(t,"mouseover",n[10]),$(t,"mouseenter",n[11]),$(t,"mouseleave",n[12]),$(t,"keydown",n[13]),$(t,"keydown",n[15]),$(e,"animationend",n[8]),$(e,"animationend",n[16])],f=!0)},p(I,[C]){const N={};C&8&&(N["aria-label"]=I[3]),r.$set(N),y?y.p&&(!c||C&64)&&ut(y,v,I,I[6],c?ct(v,I[6],C,Qa):ft(I[6]),_o):p&&p.p&&(!c||C&4)&&p.p(I,c?C:-1),(!c||C&8)&&K(t,"title",I[3]),(!c||C&1)&&K(t,"aria-expanded",I[0]),(!c||C&2)&&(t.disabled=I[1]),S&&S.p&&(!c||C&64)&&ut(S,m,I,I[6],c?ct(m,I[6],C,null):ft(I[6]),null),qe(e,j=lt(O,[C&32&&I[5]])),T(e,"bx--accordion__item",!0),T(e,"bx--accordion__item--active",I[0]),T(e,"bx--accordion__item--disabled",I[1]),T(e,"bx--accordion__item--expanding",I[4]==="expanding"),T(e,"bx--accordion__item--collapsing",I[4]==="collapsing")},i(I){c||(G(r.$$.fragment,I),G(p,I),G(S,I),c=!0)},o(I){H(r.$$.fragment,I),H(p,I),H(S,I),c=!1},d(I){I&&M(e),pe(r),p&&p.d(I),S&&S.d(I),f=!1,dt(h)}}}function ts(n,e,t){const r=["title","open","disabled","iconDescription"];let o=Se(e,r),{$$slots:l={},$$scope:a}=e,{title:u="title"}=e,{open:c=!1}=e,{disabled:f=!1}=e,{iconDescription:h="Expand/Collapse"}=e,v=f;const p=tn("Accordion").disableItems.subscribe(z=>{!z&&v||t(1,f=z)});let m;nn(()=>()=>{p()});function S(z){re.call(this,n,z)}function O(z){re.call(this,n,z)}function j(z){re.call(this,n,z)}function I(z){re.call(this,n,z)}function C(z){re.call(this,n,z)}function N(z){re.call(this,n,z)}const A=()=>{t(0,c=!c),t(4,m=c?"expanding":"collapsing")},F=({key:z})=>{c&&z==="Escape"&&t(0,c=!1)},ge=()=>{t(4,m=void 0)};return n.$$set=z=>{e=ce(ce({},e),Ze(z)),t(5,o=Se(e,r)),"title"in z&&t(2,u=z.title),"open"in z&&t(0,c=z.open),"disabled"in z&&t(1,f=z.disabled),"iconDescription"in z&&t(3,h=z.iconDescription),"$$scope"in z&&t(6,a=z.$$scope)},[c,f,u,h,m,o,a,l,S,O,j,I,C,N,A,F,ge]}class ns extends Pe{constructor(e){super(),Ae(this,e,ts,es,Ne,{title:2,open:0,disabled:1,iconDescription:3})}}const rs=ns;function yo(n){let e,t;return{c(){e=it("title"),t=ve(n[1])},m(r,o){L(r,e,o),B(e,t)},p(r,o){o&2&&Fe(t,r[1])},d(r){r&&M(e)}}}function is(n){let e,t,r,o=n[1]&&yo(n),l=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],a={};for(let u=0;u<l.length;u+=1)a=ce(a,l[u]);return{c(){e=it("svg"),o&&o.c(),t=it("path"),r=it("path"),K(t,"d","M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14C30,8.3,23.7,2,16,2z M14.9,8h2.2v11h-2.2V8z M16,25	c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22c0.8,0,1.5,0.7,1.5,1.5S16.8,25,16,25z"),K(r,"fill","none"),K(r,"d","M17.5,23.5c0,0.8-0.7,1.5-1.5,1.5c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22	C16.8,22,17.5,22.7,17.5,23.5z M17.1,8h-2.2v11h2.2V8z"),K(r,"data-icon-path","inner-path"),K(r,"opacity","0"),qt(e,a)},m(u,c){L(u,e,c),o&&o.m(e,null),B(e,t),B(e,r)},p(u,[c]){u[1]?o?o.p(u,c):(o=yo(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null),qt(e,a=lt(l,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},c&1&&{width:u[0]},c&1&&{height:u[0]},c&4&&u[2],c&8&&u[3]]))},i:Xe,o:Xe,d(u){u&&M(e),o&&o.d()}}}function os(n,e,t){let r,o;const l=["size","title"];let a=Se(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=ce(ce({},e),Ze(f))),t(3,a=Se(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ze(e),[u,c,o,a,r]}class ls extends Pe{constructor(e){super(),Ae(this,e,os,is,Ne,{size:0,title:1})}}const vl=ls;function Eo(n){let e,t;return{c(){e=it("title"),t=ve(n[1])},m(r,o){L(r,e,o),B(e,t)},p(r,o){o&2&&Fe(t,r[1])},d(r){r&&M(e)}}}function as(n){let e,t,r,o,l=n[1]&&Eo(n),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],u={};for(let c=0;c<a.length;c+=1)u=ce(u,a[c]);return{c(){e=it("svg"),l&&l.c(),t=it("path"),r=it("path"),o=it("path"),K(t,"fill","none"),K(t,"d","M16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Zm-1.125-5h2.25V12h-2.25Z"),K(t,"data-icon-path","inner-path"),K(r,"d","M16.002,6.1714h-.004L4.6487,27.9966,4.6506,28H27.3494l.0019-.0034ZM14.875,12h2.25v9h-2.25ZM16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Z"),K(o,"d","M29,30H3a1,1,0,0,1-.8872-1.4614l13-25a1,1,0,0,1,1.7744,0l13,25A1,1,0,0,1,29,30ZM4.6507,28H27.3493l.002-.0033L16.002,6.1714h-.004L4.6487,27.9967Z"),qt(e,u)},m(c,f){L(c,e,f),l&&l.m(e,null),B(e,t),B(e,r),B(e,o)},p(c,[f]){c[1]?l?l.p(c,f):(l=Eo(c),l.c(),l.m(e,t)):l&&(l.d(1),l=null),qt(e,u=lt(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},f&1&&{width:c[0]},f&1&&{height:c[0]},f&4&&c[2],f&8&&c[3]]))},i:Xe,o:Xe,d(c){c&&M(e),l&&l.d()}}}function ss(n,e,t){let r,o;const l=["size","title"];let a=Se(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=ce(ce({},e),Ze(f))),t(3,a=Se(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ze(e),[u,c,o,a,r]}class us extends Pe{constructor(e){super(),Ae(this,e,ss,as,Ne,{size:0,title:1})}}const fs=us,cs=n=>({}),wo=n=>({});function So(n){let e,t;const r=n[16].labelText,o=st(r,n,n[15],wo),l=o||ds(n);return{c(){e=V("span"),l&&l.c(),T(e,"bx--visually-hidden",n[7])},m(a,u){L(a,e,u),l&&l.m(e,null),t=!0},p(a,u){o?o.p&&(!t||u&32768)&&ut(o,r,a,a[15],t?ct(r,a[15],u,cs):ft(a[15]),wo):l&&l.p&&(!t||u&64)&&l.p(a,t?u:-1),(!t||u&128)&&T(e,"bx--visually-hidden",a[7])},i(a){t||(G(l,a),t=!0)},o(a){H(l,a),t=!1},d(a){a&&M(e),l&&l.d(a)}}}function ds(n){let e;return{c(){e=ve(n[6])},m(t,r){L(t,e,r)},p(t,r){r&64&&Fe(e,t[6])},d(t){t&&M(e)}}}function hs(n){let e,t,r,o,l,a,u,c,f,h=(n[6]||n[13].labelText)&&So(n),v=[n[12]],y={};for(let p=0;p<v.length;p+=1)y=ce(y,v[p]);return{c(){e=V("div"),t=V("input"),r=Z(),o=V("label"),l=V("span"),a=Z(),h&&h.c(),K(t,"type","radio"),K(t,"id",n[8]),K(t,"name",n[9]),t.checked=n[0],t.disabled=n[3],t.required=n[4],t.value=n[2],T(t,"bx--radio-button",!0),T(l,"bx--radio-button__appearance",!0),K(o,"for",n[8]),T(o,"bx--radio-button__label",!0),qe(e,y),T(e,"bx--radio-button-wrapper",!0),T(e,"bx--radio-button-wrapper--label-left",n[5]==="left")},m(p,m){L(p,e,m),B(e,t),n[18](t),B(e,r),B(e,o),B(o,l),B(o,a),h&&h.m(o,null),u=!0,c||(f=[$(t,"change",n[17]),$(t,"change",n[19])],c=!0)},p(p,[m]){(!u||m&256)&&K(t,"id",p[8]),(!u||m&512)&&K(t,"name",p[9]),(!u||m&1)&&(t.checked=p[0]),(!u||m&8)&&(t.disabled=p[3]),(!u||m&16)&&(t.required=p[4]),(!u||m&4)&&(t.value=p[2]),p[6]||p[13].labelText?h?(h.p(p,m),m&8256&&G(h,1)):(h=So(p),h.c(),G(h,1),h.m(o,null)):h&&(nt(),H(h,1,1,()=>{h=null}),rt()),(!u||m&256)&&K(o,"for",p[8]),qe(e,y=lt(v,[m&4096&&p[12]])),T(e,"bx--radio-button-wrapper",!0),T(e,"bx--radio-button-wrapper--label-left",p[5]==="left")},i(p){u||(G(h),u=!0)},o(p){H(h),u=!1},d(p){p&&M(e),n[18](null),h&&h.d(),c=!1,dt(f)}}}function ps(n,e,t){const r=["value","checked","disabled","required","labelPosition","labelText","hideLabel","id","name","ref"];let o=Se(e,r),l,{$$slots:a={},$$scope:u}=e;const c=Lr(a);let{value:f=""}=e,{checked:h=!1}=e,{disabled:v=!1}=e,{required:y=!1}=e,{labelPosition:p="right"}=e,{labelText:m=""}=e,{hideLabel:S=!1}=e,{id:O="ccs-"+Math.random().toString(36)}=e,{name:j=""}=e,{ref:I=null}=e;const C=tn("RadioButtonGroup"),N=C?C.selectedValue:gn(h?f:void 0);Tt(n,N,z=>t(14,l=z)),C&&C.add({id:O,checked:h,disabled:v,value:f});function A(z){re.call(this,n,z)}function F(z){$e[z?"unshift":"push"](()=>{I=z,t(1,I)})}const ge=()=>{C&&C.update(f)};return n.$$set=z=>{e=ce(ce({},e),Ze(z)),t(12,o=Se(e,r)),"value"in z&&t(2,f=z.value),"checked"in z&&t(0,h=z.checked),"disabled"in z&&t(3,v=z.disabled),"required"in z&&t(4,y=z.required),"labelPosition"in z&&t(5,p=z.labelPosition),"labelText"in z&&t(6,m=z.labelText),"hideLabel"in z&&t(7,S=z.hideLabel),"id"in z&&t(8,O=z.id),"name"in z&&t(9,j=z.name),"ref"in z&&t(1,I=z.ref),"$$scope"in z&&t(15,u=z.$$scope)},n.$$.update=()=>{n.$$.dirty&16388&&t(0,h=l===f)},[h,I,f,v,y,p,m,S,O,j,C,N,o,c,l,u,a,A,F,ge]}class gs extends Pe{constructor(e){super(),Ae(this,e,ps,hs,Ne,{value:2,checked:0,disabled:3,required:4,labelPosition:5,labelText:6,hideLabel:7,id:8,name:9,ref:1})}}const hr=gs;function To(n){let e,t;return{c(){e=it("title"),t=ve(n[1])},m(r,o){L(r,e,o),B(e,t)},p(r,o){o&2&&Fe(t,r[1])},d(r){r&&M(e)}}}function ms(n){let e,t,r=n[1]&&To(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let a=0;a<o.length;a+=1)l=ce(l,o[a]);return{c(){e=it("svg"),r&&r.c(),t=it("path"),K(t,"d","M30 28.6L3.4 2 2 3.4l10.1 10.1L4 21.6V28h6.4l8.1-8.1L28.6 30 30 28.6zM9.6 26H6v-3.6l7.5-7.5 3.6 3.6L9.6 26zM29.4 6.2L29.4 6.2l-3.6-3.6c-.8-.8-2-.8-2.8 0l0 0 0 0-8 8 1.4 1.4L20 8.4l3.6 3.6L20 15.6l1.4 1.4 8-8C30.2 8.2 30.2 7 29.4 6.2L29.4 6.2zM25 10.6L21.4 7l3-3L28 7.6 25 10.6z"),qt(e,l)},m(a,u){L(a,e,u),r&&r.m(e,null),B(e,t)},p(a,[u]){a[1]?r?r.p(a,u):(r=To(a),r.c(),r.m(e,t)):r&&(r.d(1),r=null),qt(e,l=lt(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:a[0]},u&1&&{height:a[0]},u&4&&a[2],u&8&&a[3]]))},i:Xe,o:Xe,d(a){a&&M(e),r&&r.d()}}}function bs(n,e,t){let r,o;const l=["size","title"];let a=Se(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=ce(ce({},e),Ze(f))),t(3,a=Se(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Ze(e),[u,c,o,a,r]}class vs extends Pe{constructor(e){super(),Ae(this,e,bs,ms,Ne,{size:0,title:1})}}const _s=vs;function ys(n){let e,t,r,o;const l=n[5].default,a=st(l,n,n[4],null);let u=[n[3]],c={};for(let f=0;f<u.length;f+=1)c=ce(c,u[f]);return{c(){e=V("ol"),a&&a.c(),qe(e,c),T(e,"bx--list--ordered",!n[1]),T(e,"bx--list--ordered--native",n[1]),T(e,"bx--list--nested",n[0]),T(e,"bx--list--expressive",n[2])},m(f,h){L(f,e,h),a&&a.m(e,null),t=!0,r||(o=[$(e,"click",n[6]),$(e,"mouseover",n[7]),$(e,"mouseenter",n[8]),$(e,"mouseleave",n[9])],r=!0)},p(f,[h]){a&&a.p&&(!t||h&16)&&ut(a,l,f,f[4],t?ct(l,f[4],h,null):ft(f[4]),null),qe(e,c=lt(u,[h&8&&f[3]])),T(e,"bx--list--ordered",!f[1]),T(e,"bx--list--ordered--native",f[1]),T(e,"bx--list--nested",f[0]),T(e,"bx--list--expressive",f[2])},i(f){t||(G(a,f),t=!0)},o(f){H(a,f),t=!1},d(f){f&&M(e),a&&a.d(f),r=!1,dt(o)}}}function Es(n,e,t){const r=["nested","native","expressive"];let o=Se(e,r),{$$slots:l={},$$scope:a}=e,{nested:u=!1}=e,{native:c=!1}=e,{expressive:f=!1}=e;function h(m){re.call(this,n,m)}function v(m){re.call(this,n,m)}function y(m){re.call(this,n,m)}function p(m){re.call(this,n,m)}return n.$$set=m=>{e=ce(ce({},e),Ze(m)),t(3,o=Se(e,r)),"nested"in m&&t(0,u=m.nested),"native"in m&&t(1,c=m.native),"expressive"in m&&t(2,f=m.expressive),"$$scope"in m&&t(4,a=m.$$scope)},[u,c,f,o,a,l,h,v,y,p]}class ws extends Pe{constructor(e){super(),Ae(this,e,Es,ys,Ne,{nested:0,native:1,expressive:2})}}const Ss=ws,Ts=n=>({}),ko=n=>({});function Co(n){let e,t;const r=n[11].legendText,o=st(r,n,n[10],ko),l=o||ks(n);return{c(){e=V("legend"),l&&l.c(),T(e,"bx--label",!0),T(e,"bx--visually-hidden",n[2])},m(a,u){L(a,e,u),l&&l.m(e,null),t=!0},p(a,u){o?o.p&&(!t||u&1024)&&ut(o,r,a,a[10],t?ct(r,a[10],u,Ts):ft(a[10]),ko):l&&l.p&&(!t||u&2)&&l.p(a,t?u:-1),(!t||u&4)&&T(e,"bx--visually-hidden",a[2])},i(a){t||(G(l,a),t=!0)},o(a){H(l,a),t=!1},d(a){a&&M(e),l&&l.d(a)}}}function ks(n){let e;return{c(){e=ve(n[1])},m(t,r){L(t,e,r)},p(t,r){r&2&&Fe(e,t[1])},d(t){t&&M(e)}}}function Cs(n){let e,t,r,o,l,a,u=(n[1]||n[8].legendText)&&Co(n);const c=n[11].default,f=st(c,n,n[10],null);let h=[{id:n[5]},n[7]],v={};for(let y=0;y<h.length;y+=1)v=ce(v,h[y]);return{c(){e=V("div"),t=V("fieldset"),u&&u.c(),r=Z(),f&&f.c(),t.disabled=n[0],T(t,"bx--radio-button-group",!0),T(t,"bx--radio-button-group--vertical",n[4]==="vertical"),T(t,"bx--radio-button-group--label-left",n[3]==="left"),T(t,"bx--radio-button-group--label-right",n[3]==="right"),qe(e,v),T(e,"bx--form-item",!0)},m(y,p){L(y,e,p),B(e,t),u&&u.m(t,null),B(t,r),f&&f.m(t,null),o=!0,l||(a=[$(e,"click",n[12]),$(e,"mouseover",n[13]),$(e,"mouseenter",n[14]),$(e,"mouseleave",n[15])],l=!0)},p(y,[p]){y[1]||y[8].legendText?u?(u.p(y,p),p&258&&G(u,1)):(u=Co(y),u.c(),G(u,1),u.m(t,r)):u&&(nt(),H(u,1,1,()=>{u=null}),rt()),f&&f.p&&(!o||p&1024)&&ut(f,c,y,y[10],o?ct(c,y[10],p,null):ft(y[10]),null),(!o||p&1)&&(t.disabled=y[0]),(!o||p&16)&&T(t,"bx--radio-button-group--vertical",y[4]==="vertical"),(!o||p&8)&&T(t,"bx--radio-button-group--label-left",y[3]==="left"),(!o||p&8)&&T(t,"bx--radio-button-group--label-right",y[3]==="right"),qe(e,v=lt(h,[(!o||p&32)&&{id:y[5]},p&128&&y[7]])),T(e,"bx--form-item",!0)},i(y){o||(G(u),G(f,y),o=!0)},o(y){H(u),H(f,y),o=!1},d(y){y&&M(e),u&&u.d(),f&&f.d(y),l=!1,dt(a)}}}function Is(n,e,t){const r=["selected","disabled","legendText","hideLegend","labelPosition","orientation","id"];let o=Se(e,r),l,{$$slots:a={},$$scope:u}=e;const c=Lr(a);let{selected:f=void 0}=e,{disabled:h=!1}=e,{legendText:v=""}=e,{hideLegend:y=!1}=e,{labelPosition:p="right"}=e,{orientation:m="horizontal"}=e,{id:S=void 0}=e;const O=pl(),j=gn(f);Tt(n,j,F=>t(16,l=F)),pi("RadioButtonGroup",{selectedValue:j,add:({checked:F,value:ge})=>{F&&j.set(ge)},update:F=>{t(9,f=F)}}),nn(()=>{so(j,l=f,l)}),Oa(()=>{so(j,l=f,l)}),j.subscribe(F=>{t(9,f=F),O("change",F)});function I(F){re.call(this,n,F)}function C(F){re.call(this,n,F)}function N(F){re.call(this,n,F)}function A(F){re.call(this,n,F)}return n.$$set=F=>{e=ce(ce({},e),Ze(F)),t(7,o=Se(e,r)),"selected"in F&&t(9,f=F.selected),"disabled"in F&&t(0,h=F.disabled),"legendText"in F&&t(1,v=F.legendText),"hideLegend"in F&&t(2,y=F.hideLegend),"labelPosition"in F&&t(3,p=F.labelPosition),"orientation"in F&&t(4,m=F.orientation),"id"in F&&t(5,S=F.id),"$$scope"in F&&t(10,u=F.$$scope)},[h,v,y,p,m,S,j,o,c,f,u,a,I,C,N,A]}class xs extends Pe{constructor(e){super(),Ae(this,e,Is,Cs,Ne,{selected:9,disabled:0,legendText:1,hideLegend:2,labelPosition:3,orientation:4,id:5})}}const Os=xs,Ls=n=>({}),Io=n=>({});function xo(n){let e,t,r,o;const l=n[20].labelText,a=st(l,n,n[19],Io),u=a||Ms(n);let c=n[5]&&Oo(n);return{c(){e=V("div"),t=V("label"),u&&u.c(),r=Z(),c&&c.c(),K(t,"for",n[14]),T(t,"bx--label",!0),T(t,"bx--visually-hidden",n[11]),T(t,"bx--label--disabled",n[7]),T(e,"bx--text-area__label-wrapper",!0)},m(f,h){L(f,e,h),B(e,t),u&&u.m(t,null),B(e,r),c&&c.m(e,null),o=!0},p(f,h){a?a.p&&(!o||h[0]&524288)&&ut(a,l,f,f[19],o?ct(l,f[19],h,Ls):ft(f[19]),Io):u&&u.p&&(!o||h[0]&1024)&&u.p(f,o?h:[-1,-1]),(!o||h[0]&16384)&&K(t,"for",f[14]),(!o||h[0]&2048)&&T(t,"bx--visually-hidden",f[11]),(!o||h[0]&128)&&T(t,"bx--label--disabled",f[7]),f[5]?c?c.p(f,h):(c=Oo(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(f){o||(G(u,f),o=!0)},o(f){H(u,f),o=!1},d(f){f&&M(e),u&&u.d(f),c&&c.d()}}}function Ms(n){let e;return{c(){e=ve(n[10])},m(t,r){L(t,e,r)},p(t,r){r[0]&1024&&Fe(e,t[10])},d(t){t&&M(e)}}}function Oo(n){let e,t=n[0].length+"",r,o,l;return{c(){e=V("div"),r=ve(t),o=ve("/"),l=ve(n[5]),T(e,"bx--label",!0),T(e,"bx--label--disabled",n[7])},m(a,u){L(a,e,u),B(e,r),B(e,o),B(e,l)},p(a,u){u[0]&1&&t!==(t=a[0].length+"")&&Fe(r,t),u[0]&32&&Fe(l,a[5]),u[0]&128&&T(e,"bx--label--disabled",a[7])},d(a){a&&M(e)}}}function Lo(n){let e,t;return e=new vl({props:{class:"bx--text-area__invalid-icon"}}),{c(){de(e.$$.fragment)},m(r,o){he(e,r,o),t=!0},i(r){t||(G(e.$$.fragment,r),t=!0)},o(r){H(e.$$.fragment,r),t=!1},d(r){pe(e,r)}}}function Mo(n){let e,t;return{c(){e=V("div"),t=ve(n[9]),T(e,"bx--form__helper-text",!0),T(e,"bx--form__helper-text--disabled",n[7])},m(r,o){L(r,e,o),B(e,t)},p(r,o){o[0]&512&&Fe(t,r[9]),o[0]&128&&T(e,"bx--form__helper-text--disabled",r[7])},d(r){r&&M(e)}}}function Po(n){let e,t;return{c(){e=V("div"),t=ve(n[13]),K(e,"id",n[16]),T(e,"bx--form-requirement",!0)},m(r,o){L(r,e,o),B(e,t)},p(r,o){o[0]&8192&&Fe(t,r[13]),o[0]&65536&&K(e,"id",r[16])},d(r){r&&M(e)}}}function Ps(n){let e,t,r,o,l,a,u,c,f,h,v,y,p,m,S=(n[10]||n[17].labelText)&&!n[11]&&xo(n),O=n[12]&&Lo(),j=[{"aria-invalid":a=n[12]||void 0},{"aria-describedby":u=n[12]?n[16]:void 0},{disabled:n[7]},{id:n[14]},{name:n[15]},{cols:n[3]},{rows:n[4]},{placeholder:n[2]},{readOnly:n[8]},{maxlength:c=n[5]??void 0},n[18]],I={};for(let A=0;A<j.length;A+=1)I=ce(I,j[A]);let C=!n[12]&&n[9]&&Mo(n),N=n[12]&&Po(n);return{c(){e=V("div"),S&&S.c(),t=Z(),r=V("div"),O&&O.c(),o=Z(),l=V("textarea"),h=Z(),C&&C.c(),v=Z(),N&&N.c(),qe(l,I),T(l,"bx--text-area",!0),T(l,"bx--text-area--light",n[6]),T(l,"bx--text-area--invalid",n[12]),K(r,"data-invalid",f=n[12]||void 0),T(r,"bx--text-area__wrapper",!0),T(e,"bx--form-item",!0)},m(A,F){L(A,e,F),S&&S.m(e,null),B(e,t),B(e,r),O&&O.m(r,null),B(r,o),B(r,l),l.autofocus&&l.focus(),n[32](l),pn(l,n[0]),B(e,h),C&&C.m(e,null),B(e,v),N&&N.m(e,null),y=!0,p||(m=[$(l,"input",n[33]),$(l,"change",n[25]),$(l,"input",n[26]),$(l,"keydown",n[27]),$(l,"keyup",n[28]),$(l,"focus",n[29]),$(l,"blur",n[30]),$(l,"paste",n[31]),$(e,"click",n[21]),$(e,"mouseover",n[22]),$(e,"mouseenter",n[23]),$(e,"mouseleave",n[24])],p=!0)},p(A,F){(A[10]||A[17].labelText)&&!A[11]?S?(S.p(A,F),F[0]&134144&&G(S,1)):(S=xo(A),S.c(),G(S,1),S.m(e,t)):S&&(nt(),H(S,1,1,()=>{S=null}),rt()),A[12]?O?F[0]&4096&&G(O,1):(O=Lo(),O.c(),G(O,1),O.m(r,o)):O&&(nt(),H(O,1,1,()=>{O=null}),rt()),qe(l,I=lt(j,[(!y||F[0]&4096&&a!==(a=A[12]||void 0))&&{"aria-invalid":a},(!y||F[0]&69632&&u!==(u=A[12]?A[16]:void 0))&&{"aria-describedby":u},(!y||F[0]&128)&&{disabled:A[7]},(!y||F[0]&16384)&&{id:A[14]},(!y||F[0]&32768)&&{name:A[15]},(!y||F[0]&8)&&{cols:A[3]},(!y||F[0]&16)&&{rows:A[4]},(!y||F[0]&4)&&{placeholder:A[2]},(!y||F[0]&256)&&{readOnly:A[8]},(!y||F[0]&32&&c!==(c=A[5]??void 0))&&{maxlength:c},F[0]&262144&&A[18]])),F[0]&1&&pn(l,A[0]),T(l,"bx--text-area",!0),T(l,"bx--text-area--light",A[6]),T(l,"bx--text-area--invalid",A[12]),(!y||F[0]&4096&&f!==(f=A[12]||void 0))&&K(r,"data-invalid",f),!A[12]&&A[9]?C?C.p(A,F):(C=Mo(A),C.c(),C.m(e,v)):C&&(C.d(1),C=null),A[12]?N?N.p(A,F):(N=Po(A),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},i(A){y||(G(S),G(O),y=!0)},o(A){H(S),H(O),y=!1},d(A){A&&M(e),S&&S.d(),O&&O.d(),n[32](null),C&&C.d(),N&&N.d(),p=!1,dt(m)}}}function As(n,e,t){let r;const o=["value","placeholder","cols","rows","maxCount","light","disabled","readonly","helperText","labelText","hideLabel","invalid","invalidText","id","name","ref"];let l=Se(e,o),{$$slots:a={},$$scope:u}=e;const c=Lr(a);let{value:f=""}=e,{placeholder:h=""}=e,{cols:v=50}=e,{rows:y=4}=e,{maxCount:p=void 0}=e,{light:m=!1}=e,{disabled:S=!1}=e,{readonly:O=!1}=e,{helperText:j=""}=e,{labelText:I=""}=e,{hideLabel:C=!1}=e,{invalid:N=!1}=e,{invalidText:A=""}=e,{id:F="ccs-"+Math.random().toString(36)}=e,{name:ge=void 0}=e,{ref:z=null}=e;function oe(k){re.call(this,n,k)}function ae(k){re.call(this,n,k)}function D(k){re.call(this,n,k)}function te(k){re.call(this,n,k)}function R(k){re.call(this,n,k)}function ie(k){re.call(this,n,k)}function Be(k){re.call(this,n,k)}function Te(k){re.call(this,n,k)}function ke(k){re.call(this,n,k)}function De(k){re.call(this,n,k)}function Le(k){re.call(this,n,k)}function Ue(k){$e[k?"unshift":"push"](()=>{z=k,t(1,z)})}function _e(){f=this.value,t(0,f)}return n.$$set=k=>{e=ce(ce({},e),Ze(k)),t(18,l=Se(e,o)),"value"in k&&t(0,f=k.value),"placeholder"in k&&t(2,h=k.placeholder),"cols"in k&&t(3,v=k.cols),"rows"in k&&t(4,y=k.rows),"maxCount"in k&&t(5,p=k.maxCount),"light"in k&&t(6,m=k.light),"disabled"in k&&t(7,S=k.disabled),"readonly"in k&&t(8,O=k.readonly),"helperText"in k&&t(9,j=k.helperText),"labelText"in k&&t(10,I=k.labelText),"hideLabel"in k&&t(11,C=k.hideLabel),"invalid"in k&&t(12,N=k.invalid),"invalidText"in k&&t(13,A=k.invalidText),"id"in k&&t(14,F=k.id),"name"in k&&t(15,ge=k.name),"ref"in k&&t(1,z=k.ref),"$$scope"in k&&t(19,u=k.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&t(16,r=`error-${F}`)},[f,z,h,v,y,p,m,S,O,j,I,C,N,A,F,ge,r,c,l,u,a,oe,ae,D,te,R,ie,Be,Te,ke,De,Le,Ue,_e]}class Ns extends Pe{constructor(e){super(),Ae(this,e,As,Ps,Ne,{value:0,placeholder:2,cols:3,rows:4,maxCount:5,light:6,disabled:7,readonly:8,helperText:9,labelText:10,hideLabel:11,invalid:12,invalidText:13,id:14,name:15,ref:1},null,[-1,-1])}}const Rs=Ns,Fs=n=>({}),Ao=n=>({}),Ds=n=>({}),No=n=>({});function Ro(n){let e,t,r,o=n[9]&&Fo(n),l=!n[20]&&n[6]&&Do(n);return{c(){e=V("div"),o&&o.c(),t=Z(),l&&l.c(),T(e,"bx--text-input__label-helper-wrapper",!0)},m(a,u){L(a,e,u),o&&o.m(e,null),B(e,t),l&&l.m(e,null),r=!0},p(a,u){a[9]?o?(o.p(a,u),u[0]&512&&G(o,1)):(o=Fo(a),o.c(),G(o,1),o.m(e,t)):o&&(nt(),H(o,1,1,()=>{o=null}),rt()),!a[20]&&a[6]?l?l.p(a,u):(l=Do(a),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(a){r||(G(o),r=!0)},o(a){H(o),r=!1},d(a){a&&M(e),o&&o.d(),l&&l.d()}}}function Fo(n){let e,t;const r=n[26].labelText,o=st(r,n,n[25],No),l=o||Us(n);return{c(){e=V("label"),l&&l.c(),K(e,"for",n[7]),T(e,"bx--label",!0),T(e,"bx--visually-hidden",n[10]),T(e,"bx--label--disabled",n[5]),T(e,"bx--label--inline",n[16]),T(e,"bx--label--inline--sm",n[2]==="sm"),T(e,"bx--label--inline--xl",n[2]==="xl")},m(a,u){L(a,e,u),l&&l.m(e,null),t=!0},p(a,u){o?o.p&&(!t||u[0]&33554432)&&ut(o,r,a,a[25],t?ct(r,a[25],u,Ds):ft(a[25]),No):l&&l.p&&(!t||u[0]&512)&&l.p(a,t?u:[-1,-1]),(!t||u[0]&128)&&K(e,"for",a[7]),(!t||u[0]&1024)&&T(e,"bx--visually-hidden",a[10]),(!t||u[0]&32)&&T(e,"bx--label--disabled",a[5]),(!t||u[0]&65536)&&T(e,"bx--label--inline",a[16]),(!t||u[0]&4)&&T(e,"bx--label--inline--sm",a[2]==="sm"),(!t||u[0]&4)&&T(e,"bx--label--inline--xl",a[2]==="xl")},i(a){t||(G(l,a),t=!0)},o(a){H(l,a),t=!1},d(a){a&&M(e),l&&l.d(a)}}}function Us(n){let e;return{c(){e=ve(n[9])},m(t,r){L(t,e,r)},p(t,r){r[0]&512&&Fe(e,t[9])},d(t){t&&M(e)}}}function Do(n){let e,t;return{c(){e=V("div"),t=ve(n[6]),T(e,"bx--form__helper-text",!0),T(e,"bx--form__helper-text--disabled",n[5]),T(e,"bx--form__helper-text--inline",n[16])},m(r,o){L(r,e,o),B(e,t)},p(r,o){o[0]&64&&Fe(t,r[6]),o[0]&32&&T(e,"bx--form__helper-text--disabled",r[5]),o[0]&65536&&T(e,"bx--form__helper-text--inline",r[16])},d(r){r&&M(e)}}}function Uo(n){let e,t;const r=n[26].labelText,o=st(r,n,n[25],Ao),l=o||js(n);return{c(){e=V("label"),l&&l.c(),K(e,"for",n[7]),T(e,"bx--label",!0),T(e,"bx--visually-hidden",n[10]),T(e,"bx--label--disabled",n[5]),T(e,"bx--label--inline",n[16]),T(e,"bx--label--inline-sm",n[16]&&n[2]==="sm"),T(e,"bx--label--inline-xl",n[16]&&n[2]==="xl")},m(a,u){L(a,e,u),l&&l.m(e,null),t=!0},p(a,u){o?o.p&&(!t||u[0]&33554432)&&ut(o,r,a,a[25],t?ct(r,a[25],u,Fs):ft(a[25]),Ao):l&&l.p&&(!t||u[0]&512)&&l.p(a,t?u:[-1,-1]),(!t||u[0]&128)&&K(e,"for",a[7]),(!t||u[0]&1024)&&T(e,"bx--visually-hidden",a[10]),(!t||u[0]&32)&&T(e,"bx--label--disabled",a[5]),(!t||u[0]&65536)&&T(e,"bx--label--inline",a[16]),(!t||u[0]&65540)&&T(e,"bx--label--inline-sm",a[16]&&a[2]==="sm"),(!t||u[0]&65540)&&T(e,"bx--label--inline-xl",a[16]&&a[2]==="xl")},i(a){t||(G(l,a),t=!0)},o(a){H(l,a),t=!1},d(a){a&&M(e),l&&l.d(a)}}}function js(n){let e;return{c(){e=ve(n[9])},m(t,r){L(t,e,r)},p(t,r){r[0]&512&&Fe(e,t[9])},d(t){t&&M(e)}}}function jo(n){let e,t;return e=new vl({props:{class:"bx--text-input__invalid-icon"}}),{c(){de(e.$$.fragment)},m(r,o){he(e,r,o),t=!0},i(r){t||(G(e.$$.fragment,r),t=!0)},o(r){H(e.$$.fragment,r),t=!1},d(r){pe(e,r)}}}function Bo(n){let e,t;return e=new fs({props:{class:`bx--text-input__invalid-icon
            bx--text-input__invalid-icon--warning`}}),{c(){de(e.$$.fragment)},m(r,o){he(e,r,o),t=!0},i(r){t||(G(e.$$.fragment,r),t=!0)},o(r){H(e.$$.fragment,r),t=!1},d(r){pe(e,r)}}}function zo(n){let e,t;return e=new _s({props:{class:"bx--text-input__readonly-icon"}}),{c(){de(e.$$.fragment)},m(r,o){he(e,r,o),t=!0},i(r){t||(G(e.$$.fragment,r),t=!0)},o(r){H(e.$$.fragment,r),t=!1},d(r){pe(e,r)}}}function Go(n){let e;return{c(){e=V("hr"),T(e,"bx--text-input__divider",!0)},m(t,r){L(t,e,r)},d(t){t&&M(e)}}}function Vo(n){let e,t;return{c(){e=V("div"),t=ve(n[12]),K(e,"id",n[19]),T(e,"bx--form-requirement",!0)},m(r,o){L(r,e,o),B(e,t)},p(r,o){o[0]&4096&&Fe(t,r[12]),o[0]&524288&&K(e,"id",r[19])},d(r){r&&M(e)}}}function qo(n){let e,t;return{c(){e=V("div"),t=ve(n[14]),K(e,"id",n[18]),T(e,"bx--form-requirement",!0)},m(r,o){L(r,e,o),B(e,t)},p(r,o){o[0]&16384&&Fe(t,r[14]),o[0]&262144&&K(e,"id",r[18])},d(r){r&&M(e)}}}function Jo(n){let e,t;return{c(){e=V("div"),t=ve(n[6]),T(e,"bx--form__helper-text",!0),T(e,"bx--form__helper-text--disabled",n[5]),T(e,"bx--form__helper-text--inline",n[16])},m(r,o){L(r,e,o),B(e,t)},p(r,o){o[0]&64&&Fe(t,r[6]),o[0]&32&&T(e,"bx--form__helper-text--disabled",r[5]),o[0]&65536&&T(e,"bx--form__helper-text--inline",r[16])},d(r){r&&M(e)}}}function Yo(n){let e,t;return{c(){e=V("div"),t=ve(n[12]),K(e,"id",n[19]),T(e,"bx--form-requirement",!0)},m(r,o){L(r,e,o),B(e,t)},p(r,o){o[0]&4096&&Fe(t,r[12]),o[0]&524288&&K(e,"id",r[19])},d(r){r&&M(e)}}}function Ho(n){let e,t;return{c(){e=V("div"),t=ve(n[14]),K(e,"id",n[18]),T(e,"bx--form-requirement",!0)},m(r,o){L(r,e,o),B(e,t)},p(r,o){o[0]&16384&&Fe(t,r[14]),o[0]&262144&&K(e,"id",r[18])},d(r){r&&M(e)}}}function Bs(n){let e,t,r,o,l,a,u,c,f,h,v,y,p,m,S,O,j,I,C,N,A,F,ge,z,oe=n[16]&&Ro(n),ae=!n[16]&&(n[9]||n[24].labelText)&&Uo(n),D=n[11]&&jo(),te=!n[11]&&n[13]&&Bo(),R=n[17]&&zo(),ie=[{"data-invalid":h=n[11]||void 0},{"aria-invalid":v=n[11]||void 0},{"data-warn":y=n[13]||void 0},{"aria-describedby":p=n[11]?n[19]:n[13]?n[18]:void 0},{disabled:n[5]},{id:n[7]},{name:n[8]},{placeholder:n[3]},{required:n[15]},{readOnly:n[17]},n[23]],Be={};for(let k=0;k<ie.length;k+=1)Be=ce(Be,ie[k]);let Te=n[20]&&Go(),ke=n[20]&&!n[16]&&n[11]&&Vo(n),De=n[20]&&!n[16]&&n[13]&&qo(n),Le=!n[11]&&!n[13]&&!n[20]&&!n[16]&&n[6]&&Jo(n),Ue=!n[20]&&n[11]&&Yo(n),_e=!n[20]&&!n[11]&&n[13]&&Ho(n);return{c(){e=V("div"),oe&&oe.c(),t=Z(),ae&&ae.c(),r=Z(),o=V("div"),l=V("div"),D&&D.c(),a=Z(),te&&te.c(),u=Z(),R&&R.c(),c=Z(),f=V("input"),m=Z(),Te&&Te.c(),S=Z(),ke&&ke.c(),O=Z(),De&&De.c(),C=Z(),Le&&Le.c(),N=Z(),Ue&&Ue.c(),A=Z(),_e&&_e.c(),qe(f,Be),T(f,"bx--text-input",!0),T(f,"bx--text-input--light",n[4]),T(f,"bx--text-input--invalid",n[11]),T(f,"bx--text-input--warn",n[13]),T(f,"bx--text-input--sm",n[2]==="sm"),T(f,"bx--text-input--xl",n[2]==="xl"),K(l,"data-invalid",j=n[11]||void 0),K(l,"data-warn",I=n[13]||void 0),T(l,"bx--text-input__field-wrapper",!0),T(l,"bx--text-input__field-wrapper--warning",!n[11]&&n[13]),T(o,"bx--text-input__field-outer-wrapper",!0),T(o,"bx--text-input__field-outer-wrapper--inline",n[16]),T(e,"bx--form-item",!0),T(e,"bx--text-input-wrapper",!0),T(e,"bx--text-input-wrapper--inline",n[16]),T(e,"bx--text-input-wrapper--light",n[4]),T(e,"bx--text-input-wrapper--readonly",n[17])},m(k,se){L(k,e,se),oe&&oe.m(e,null),B(e,t),ae&&ae.m(e,null),B(e,r),B(e,o),B(o,l),D&&D.m(l,null),B(l,a),te&&te.m(l,null),B(l,u),R&&R.m(l,null),B(l,c),B(l,f),f.autofocus&&f.focus(),n[36](f),pn(f,n[0]),B(l,m),Te&&Te.m(l,null),B(l,S),ke&&ke.m(l,null),B(l,O),De&&De.m(l,null),B(o,C),Le&&Le.m(o,null),B(o,N),Ue&&Ue.m(o,null),B(o,A),_e&&_e.m(o,null),F=!0,ge||(z=[$(f,"input",n[37]),$(f,"change",n[22]),$(f,"input",n[21]),$(f,"keydown",n[31]),$(f,"keyup",n[32]),$(f,"focus",n[33]),$(f,"blur",n[34]),$(f,"paste",n[35]),$(e,"click",n[27]),$(e,"mouseover",n[28]),$(e,"mouseenter",n[29]),$(e,"mouseleave",n[30])],ge=!0)},p(k,se){k[16]?oe?(oe.p(k,se),se[0]&65536&&G(oe,1)):(oe=Ro(k),oe.c(),G(oe,1),oe.m(e,t)):oe&&(nt(),H(oe,1,1,()=>{oe=null}),rt()),!k[16]&&(k[9]||k[24].labelText)?ae?(ae.p(k,se),se[0]&16843264&&G(ae,1)):(ae=Uo(k),ae.c(),G(ae,1),ae.m(e,r)):ae&&(nt(),H(ae,1,1,()=>{ae=null}),rt()),k[11]?D?se[0]&2048&&G(D,1):(D=jo(),D.c(),G(D,1),D.m(l,a)):D&&(nt(),H(D,1,1,()=>{D=null}),rt()),!k[11]&&k[13]?te?se[0]&10240&&G(te,1):(te=Bo(),te.c(),G(te,1),te.m(l,u)):te&&(nt(),H(te,1,1,()=>{te=null}),rt()),k[17]?R?se[0]&131072&&G(R,1):(R=zo(),R.c(),G(R,1),R.m(l,c)):R&&(nt(),H(R,1,1,()=>{R=null}),rt()),qe(f,Be=lt(ie,[(!F||se[0]&2048&&h!==(h=k[11]||void 0))&&{"data-invalid":h},(!F||se[0]&2048&&v!==(v=k[11]||void 0))&&{"aria-invalid":v},(!F||se[0]&8192&&y!==(y=k[13]||void 0))&&{"data-warn":y},(!F||se[0]&796672&&p!==(p=k[11]?k[19]:k[13]?k[18]:void 0))&&{"aria-describedby":p},(!F||se[0]&32)&&{disabled:k[5]},(!F||se[0]&128)&&{id:k[7]},(!F||se[0]&256)&&{name:k[8]},(!F||se[0]&8)&&{placeholder:k[3]},(!F||se[0]&32768)&&{required:k[15]},(!F||se[0]&131072)&&{readOnly:k[17]},se[0]&8388608&&k[23]])),se[0]&1&&f.value!==k[0]&&pn(f,k[0]),T(f,"bx--text-input",!0),T(f,"bx--text-input--light",k[4]),T(f,"bx--text-input--invalid",k[11]),T(f,"bx--text-input--warn",k[13]),T(f,"bx--text-input--sm",k[2]==="sm"),T(f,"bx--text-input--xl",k[2]==="xl"),k[20]?Te||(Te=Go(),Te.c(),Te.m(l,S)):Te&&(Te.d(1),Te=null),k[20]&&!k[16]&&k[11]?ke?ke.p(k,se):(ke=Vo(k),ke.c(),ke.m(l,O)):ke&&(ke.d(1),ke=null),k[20]&&!k[16]&&k[13]?De?De.p(k,se):(De=qo(k),De.c(),De.m(l,null)):De&&(De.d(1),De=null),(!F||se[0]&2048&&j!==(j=k[11]||void 0))&&K(l,"data-invalid",j),(!F||se[0]&8192&&I!==(I=k[13]||void 0))&&K(l,"data-warn",I),(!F||se[0]&10240)&&T(l,"bx--text-input__field-wrapper--warning",!k[11]&&k[13]),!k[11]&&!k[13]&&!k[20]&&!k[16]&&k[6]?Le?Le.p(k,se):(Le=Jo(k),Le.c(),Le.m(o,N)):Le&&(Le.d(1),Le=null),!k[20]&&k[11]?Ue?Ue.p(k,se):(Ue=Yo(k),Ue.c(),Ue.m(o,A)):Ue&&(Ue.d(1),Ue=null),!k[20]&&!k[11]&&k[13]?_e?_e.p(k,se):(_e=Ho(k),_e.c(),_e.m(o,null)):_e&&(_e.d(1),_e=null),(!F||se[0]&65536)&&T(o,"bx--text-input__field-outer-wrapper--inline",k[16]),(!F||se[0]&65536)&&T(e,"bx--text-input-wrapper--inline",k[16]),(!F||se[0]&16)&&T(e,"bx--text-input-wrapper--light",k[4]),(!F||se[0]&131072)&&T(e,"bx--text-input-wrapper--readonly",k[17])},i(k){F||(G(oe),G(ae),G(D),G(te),G(R),F=!0)},o(k){H(oe),H(ae),H(D),H(te),H(R),F=!1},d(k){k&&M(e),oe&&oe.d(),ae&&ae.d(),D&&D.d(),te&&te.d(),R&&R.d(),n[36](null),Te&&Te.d(),ke&&ke.d(),De&&De.d(),Le&&Le.d(),Ue&&Ue.d(),_e&&_e.d(),ge=!1,dt(z)}}}function zs(n,e,t){let r,o,l;const a=["size","value","placeholder","light","disabled","helperText","id","name","labelText","hideLabel","invalid","invalidText","warn","warnText","ref","required","inline","readonly"];let u=Se(e,a),{$$slots:c={},$$scope:f}=e;const h=Lr(c);let{size:v=void 0}=e,{value:y=""}=e,{placeholder:p=""}=e,{light:m=!1}=e,{disabled:S=!1}=e,{helperText:O=""}=e,{id:j="ccs-"+Math.random().toString(36)}=e,{name:I=void 0}=e,{labelText:C=""}=e,{hideLabel:N=!1}=e,{invalid:A=!1}=e,{invalidText:F=""}=e,{warn:ge=!1}=e,{warnText:z=""}=e,{ref:oe=null}=e,{required:ae=!1}=e,{inline:D=!1}=e,{readonly:te=!1}=e;const R=tn("Form"),ie=pl();function Be(Q){return u.type!=="number"?Q:Q!=""?Number(Q):null}const Te=Q=>{t(0,y=Be(Q.target.value)),ie("input",y)},ke=Q=>{ie("change",Be(Q.target.value))};function De(Q){re.call(this,n,Q)}function Le(Q){re.call(this,n,Q)}function Ue(Q){re.call(this,n,Q)}function _e(Q){re.call(this,n,Q)}function k(Q){re.call(this,n,Q)}function se(Q){re.call(this,n,Q)}function at(Q){re.call(this,n,Q)}function Pr(Q){re.call(this,n,Q)}function rn(Q){re.call(this,n,Q)}function Ke(Q){$e[Q?"unshift":"push"](()=>{oe=Q,t(1,oe)})}function fe(){y=this.value,t(0,y)}return n.$$set=Q=>{e=ce(ce({},e),Ze(Q)),t(23,u=Se(e,a)),"size"in Q&&t(2,v=Q.size),"value"in Q&&t(0,y=Q.value),"placeholder"in Q&&t(3,p=Q.placeholder),"light"in Q&&t(4,m=Q.light),"disabled"in Q&&t(5,S=Q.disabled),"helperText"in Q&&t(6,O=Q.helperText),"id"in Q&&t(7,j=Q.id),"name"in Q&&t(8,I=Q.name),"labelText"in Q&&t(9,C=Q.labelText),"hideLabel"in Q&&t(10,N=Q.hideLabel),"invalid"in Q&&t(11,A=Q.invalid),"invalidText"in Q&&t(12,F=Q.invalidText),"warn"in Q&&t(13,ge=Q.warn),"warnText"in Q&&t(14,z=Q.warnText),"ref"in Q&&t(1,oe=Q.ref),"required"in Q&&t(15,ae=Q.required),"inline"in Q&&t(16,D=Q.inline),"readonly"in Q&&t(17,te=Q.readonly),"$$scope"in Q&&t(25,f=Q.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&128&&t(19,o=`error-${j}`),n.$$.dirty[0]&128&&t(18,l=`warn-${j}`)},t(20,r=!!R&&R.isFluid),[y,oe,v,p,m,S,O,j,I,C,N,A,F,ge,z,ae,D,te,l,o,r,Te,ke,u,h,f,c,De,Le,Ue,_e,k,se,at,Pr,rn,Ke,fe]}class Gs extends Pe{constructor(e){super(),Ae(this,e,zs,Bs,Ne,{size:2,value:0,placeholder:3,light:4,disabled:5,helperText:6,id:7,name:8,labelText:9,hideLabel:10,invalid:11,invalidText:12,warn:13,warnText:14,ref:1,required:15,inline:16,readonly:17},null,[-1,-1])}}const Vs=Gs;function qs(n){let e;return{c(){e=ve(`Click one of the draw icons to the top right of the map (the icons allow
      you to draw points, lines, polygons or routes)`)},m(t,r){L(t,e,r)},d(t){t&&M(e)}}}function Js(n){let e;return{c(){e=ve(`Draw the intervention on the map, clicking the original point or 'Finish
      snapping' for the Polygon and Route tools respectively`)},m(t,r){L(t,e,r)},d(t){t&&M(e)}}}function Ys(n){let e;return{c(){e=ve("Fill in the details that appear (Intervention type, name, description)")},m(t,r){L(t,e,r)},d(t){t&&M(e)}}}function Hs(n){let e;return{c(){e=ve(`Click the "Save" button or "Delete" button to save or remove the
      intervention`)},m(t,r){L(t,e,r)},d(t){t&&M(e)}}}function Ws(n){let e,t,r,o,l,a,u,c;return e=new dr({props:{$$slots:{default:[qs]},$$scope:{ctx:n}}}),r=new dr({props:{$$slots:{default:[Js]},$$scope:{ctx:n}}}),l=new dr({props:{$$slots:{default:[Ys]},$$scope:{ctx:n}}}),u=new dr({props:{$$slots:{default:[Hs]},$$scope:{ctx:n}}}),{c(){de(e.$$.fragment),t=Z(),de(r.$$.fragment),o=Z(),de(l.$$.fragment),a=Z(),de(u.$$.fragment)},m(f,h){he(e,f,h),L(f,t,h),he(r,f,h),L(f,o,h),he(l,f,h),L(f,a,h),he(u,f,h),c=!0},p(f,h){const v={};h&4&&(v.$$scope={dirty:h,ctx:f}),e.$set(v);const y={};h&4&&(y.$$scope={dirty:h,ctx:f}),r.$set(y);const p={};h&4&&(p.$$scope={dirty:h,ctx:f}),l.$set(p);const m={};h&4&&(m.$$scope={dirty:h,ctx:f}),u.$set(m)},i(f){c||(G(e.$$.fragment,f),G(r.$$.fragment,f),G(l.$$.fragment,f),G(u.$$.fragment,f),c=!0)},o(f){H(e.$$.fragment,f),H(r.$$.fragment,f),H(l.$$.fragment,f),H(u.$$.fragment,f),c=!1},d(f){pe(e,f),f&&M(t),pe(r,f),f&&M(o),pe(l,f),f&&M(a),pe(u,f)}}}function Xs(n){let e,t,r,o,l,a,u,c,f,h,v,y,p,m,S,O,j,I,C,N,A,F,ge,z,oe,ae;return l=new Ss({props:{$$slots:{default:[Ws]},$$scope:{ctx:n}}}),{c(){e=V("p"),e.textContent="For each intervention:",t=Z(),r=V("br"),o=Z(),de(l.$$.fragment),a=Z(),u=V("br"),c=Z(),f=V("p"),f.textContent=`Repeat the steps above for each substantial infrastructure intervention in
    the scheme.`,h=Z(),v=V("br"),y=Z(),p=V("p"),p.textContent=`To make further edits to attribute data, or to delete an intervention, click
    on its name in the left hand panel or its geometry in the map.`,m=Z(),S=V("br"),O=Z(),j=V("p"),j.textContent=`Click the "Export to GeoJSON" button to download the dataset representing
    the scheme, which can be made up of one or more intervention, as a GeoJSON
    file. After saving the file, you can delete the interventions, change the
    scheme name, and start a new set of interventions representing a new scheme.`,I=Z(),C=V("br"),N=Z(),A=V("p"),A.textContent=`To load a GeoJSON file that you have already saved from the tool, click the
    "Load from GeoJSON" button and select the file.`,F=Z(),ge=V("br"),z=Z(),oe=V("p"),oe.innerHTML=`Note: the <strong>Route tool</strong> works by calculating routes between
    start and end points using the existing transport network according to
    OpenStreetMap. Use it by clicking on the location where you would like the
    route to start and then clicking on the location where you would like the
    route to end on the map. The route will be calculated and drawn on the map.
    After you click &quot;Finish snapping&quot; you can edit the route by dragging
    individual points. This can be useful for representing links that are not
    part of the existing transport network, such as a new bridge or path.
    However,
    <strong>you cannot add or remove points</strong> with the Route tool. If the
    planned route intervention you would like to sketch as part of a scheme contains
    one or more new links (for example containing new bridges or paths between cul-de-sacs),
    you may want to use the Line tool instead.`},m(D,te){L(D,e,te),L(D,t,te),L(D,r,te),L(D,o,te),he(l,D,te),L(D,a,te),L(D,u,te),L(D,c,te),L(D,f,te),L(D,h,te),L(D,v,te),L(D,y,te),L(D,p,te),L(D,m,te),L(D,S,te),L(D,O,te),L(D,j,te),L(D,I,te),L(D,C,te),L(D,N,te),L(D,A,te),L(D,F,te),L(D,ge,te),L(D,z,te),L(D,oe,te),ae=!0},p(D,te){const R={};te&4&&(R.$$scope={dirty:te,ctx:D}),l.$set(R)},i(D){ae||(G(l.$$.fragment,D),ae=!0)},o(D){H(l.$$.fragment,D),ae=!1},d(D){D&&M(e),D&&M(t),D&&M(r),D&&M(o),pe(l,D),D&&M(a),D&&M(u),D&&M(c),D&&M(f),D&&M(h),D&&M(v),D&&M(y),D&&M(p),D&&M(m),D&&M(S),D&&M(O),D&&M(j),D&&M(I),D&&M(C),D&&M(N),D&&M(A),D&&M(F),D&&M(ge),D&&M(z),D&&M(oe)}}}function Zs(n){let e,t,r;function o(a){n[1](a)}let l={passiveModal:!0,modalHeading:"Instructions",$$slots:{default:[Xs]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.open=n[0]),e=new La({props:l}),$e.push(()=>kt(e,"open",o,n[0])),{c(){de(e.$$.fragment)},m(a,u){he(e,a,u),r=!0},p(a,[u]){const c={};u&4&&(c.$$scope={dirty:u,ctx:a}),!t&&u&1&&(t=!0,c.open=a[0],Ct(()=>t=!1)),e.$set(c)},i(a){r||(G(e.$$.fragment,a),r=!0)},o(a){H(e.$$.fragment,a),r=!1},d(a){pe(e,a)}}}function Ks(n,e,t){let{open:r}=e;function o(l){r=l,t(0,r)}return n.$$set=l=>{"open"in l&&t(0,r=l.open)},[r,o]}class Qs extends Pe{constructor(e){super(),Ae(this,e,Ks,Zs,Ne,{open:0})}}function Wo(n){let e;const t=n[3].default,r=st(t,n,n[2],null);return{c(){r&&r.c()},m(o,l){r&&r.m(o,l),e=!0},p(o,l){r&&r.p&&(!e||l&4)&&ut(r,t,o,o[2],e?ct(t,o[2],l,null):ft(o[2]),null)},i(o){e||(G(r,o),e=!0)},o(o){H(r,o),e=!1},d(o){r&&r.d(o)}}}function $s(n){let e,t,r=n[1]&&Wo(n);return{c(){e=V("div"),r&&r.c(),K(e,"class","map svelte-12dpf1u")},m(o,l){L(o,e,l),r&&r.m(e,null),n[4](e),t=!0},p(o,[l]){o[1]?r?(r.p(o,l),l&2&&G(r,1)):(r=Wo(o),r.c(),G(r,1),r.m(e,null)):r&&(nt(),H(r,1,1,()=>{r=null}),rt())},i(o){t||(G(r),t=!0)},o(o){H(r),t=!1},d(o){o&&M(e),r&&r.d(),n[4](null)}}}function eu(n,e,t){let{$$slots:r={},$$scope:o}=e,l,a,u=!1,c=!window.location.hash;pi("map",{getMap:()=>l,setCamera:c}),nn(()=>{l=new Zr.Map({container:a,style:"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",hash:!0}),l.addControl(new Zr.ScaleControl),l.addControl(new Zr.NavigationControl,"bottom-right"),l.on("load",()=>{t(1,u=!0)}),new ResizeObserver(()=>{l.resize()}).observe(a)}),gl(()=>{l.remove()});function f(h){$e[h?"unshift":"push"](()=>{a=h,t(0,a)})}return n.$$set=h=>{"$$scope"in h&&t(2,o=h.$$scope)},[a,u,o,r,f]}class tu extends Pe{constructor(e){super(),Ae(this,e,eu,$s,Ne,{})}}const nu=n=>({}),Xo=n=>({}),ru=n=>({}),Zo=n=>({}),iu=n=>({}),Ko=n=>({});function ou(n){let e,t,r,o,l,a,u,c,f,h,v,y;const p=n[3].nav,m=st(p,n,n[2],Ko),S=n[3].sidebar,O=st(S,n,n[2],Zo),j=n[3].main,I=st(j,n,n[2],Xo);return{c(){e=V("aside"),t=V("div"),r=V("nav"),m&&m.c(),o=Z(),O&&O.c(),l=Z(),a=V("div"),a.textContent="→",c=Z(),f=V("main"),I&&I.c(),K(r,"class","svelte-19nerxn"),K(t,"class","sidebar-content content-container svelte-19nerxn"),K(a,"class","sidebar-toggle rounded-rect svelte-19nerxn"),K(e,"class",u=uo(n[0]?"":"collapsed")+" svelte-19nerxn"),K(f,"class","svelte-19nerxn")},m(C,N){L(C,e,N),B(e,t),B(t,r),m&&m.m(r,null),B(t,o),O&&O.m(t,null),B(e,l),B(e,a),L(C,c,N),L(C,f,N),I&&I.m(f,null),h=!0,v||(y=$(a,"click",n[1]),v=!0)},p(C,[N]){m&&m.p&&(!h||N&4)&&ut(m,p,C,C[2],h?ct(p,C[2],N,iu):ft(C[2]),Ko),O&&O.p&&(!h||N&4)&&ut(O,S,C,C[2],h?ct(S,C[2],N,ru):ft(C[2]),Zo),(!h||N&1&&u!==(u=uo(C[0]?"":"collapsed")+" svelte-19nerxn"))&&K(e,"class",u),I&&I.p&&(!h||N&4)&&ut(I,j,C,C[2],h?ct(j,C[2],N,nu):ft(C[2]),Xo)},i(C){h||(G(m,C),G(O,C),G(I,C),h=!0)},o(C){H(m,C),H(O,C),H(I,C),h=!1},d(C){C&&M(e),m&&m.d(C),O&&O.d(C),C&&M(c),C&&M(f),I&&I.d(C),v=!1,y()}}}function lu(n,e,t){let{$$slots:r={},$$scope:o}=e,l=!0;function a(){t(0,l=!l)}return n.$$set=u=>{"$$scope"in u&&t(2,o=u.$$scope)},[l,a,o,r]}class au extends Pe{constructor(e){super(),Ae(this,e,lu,ou,Ne,{})}}function _l(n,e,t){t===void 0&&(t={});var r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=e||{},r.geometry=n,r}function su(n,e,t){t===void 0&&(t={});for(var r=0,o=n;r<o.length;r++){var l=o[r];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<l[l.length-1].length;a++)if(l[l.length-1][a]!==l[0][a])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:n};return _l(u,e,t)}function uu(n,e,t){t===void 0&&(t={});var r={type:"MultiPolygon",coordinates:n};return _l(r,e,t)}/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function fu(n,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(f){return function(h){return c([f,h])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(l=f[0]&2?o.return:f[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,f[1])).done)return l;switch(o=0,l&&(f=[f[0]&2,l.value]),f[0]){case 0:case 1:l=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,o=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!l||f[1]>l[0]&&f[1]<l[3])){t.label=f[1];break}if(f[0]===6&&t.label<l[1]){t.label=l[1],l=f;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(f);break}l[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(h){f=[6,h],o=0}finally{r=l=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Jt=function(){function n(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return n}();function cu(n,e){return n>e?1:n<e?-1:0}function zt(n,e,t){for(var r=new Jt(null,null),o=r,l=r;;){var a=t(n,e.key);if(a<0){if(e.left===null)break;if(t(n,e.left.key)<0){var u=e.left;if(e.left=u.right,u.right=e,e=u,e.left===null)break}l.left=e,l=e,e=e.left}else if(a>0){if(e.right===null)break;if(t(n,e.right.key)>0){var u=e.right;if(e.right=u.left,u.left=e,e=u,e.right===null)break}o.right=e,o=e,e=e.right}else break}return o.right=e.left,l.left=e.right,e.left=r.right,e.right=r.left,e}function Kr(n,e,t,r){var o=new Jt(n,e);if(t===null)return o.left=o.right=null,o;t=zt(n,t,r);var l=r(n,t.key);return l<0?(o.left=t.left,o.right=t,t.left=null):l>=0&&(o.right=t.right,o.left=t,t.right=null),o}function Qo(n,e,t){var r=null,o=null;if(e){e=zt(n,e,t);var l=t(e.key,n);l===0?(r=e.left,o=e.right):l<0?(o=e.right,e.right=null,r=e):(r=e.left,e.left=null,o=e)}return{left:r,right:o}}function du(n,e,t){return e===null?n:(n===null||(e=zt(n.key,e,t),e.left=n),e)}function ni(n,e,t,r,o){if(n){r(""+e+(t?"└── ":"├── ")+o(n)+`
`);var l=e+(t?"    ":"│   ");n.left&&ni(n.left,l,!1,r,o),n.right&&ni(n.right,l,!0,r,o)}}var mi=function(){function n(e){e===void 0&&(e=cu),this._root=null,this._size=0,this._comparator=e}return n.prototype.insert=function(e,t){return this._size++,this._root=Kr(e,t,this._root,this._comparator)},n.prototype.add=function(e,t){var r=new Jt(e,t);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var o=this._comparator,l=zt(e,this._root,o),a=o(e,l.key);return a===0?this._root=l:(a<0?(r.left=l.left,r.right=l,l.left=null):a>0&&(r.right=l.right,r.left=l,l.right=null),this._size++,this._root=r),this._root},n.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},n.prototype._remove=function(e,t,r){var o;if(t===null)return null;t=zt(e,t,r);var l=r(e,t.key);return l===0?(t.left===null?o=t.right:(o=zt(e,t.left,r),o.right=t.right),this._size--,o):t},n.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=zt(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},n.prototype.findStatic=function(e){for(var t=this._root,r=this._comparator;t;){var o=r(e,t.key);if(o===0)return t;o<0?t=t.left:t=t.right}return null},n.prototype.find=function(e){return this._root&&(this._root=zt(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},n.prototype.contains=function(e){for(var t=this._root,r=this._comparator;t;){var o=r(e,t.key);if(o===0)return!0;o<0?t=t.left:t=t.right}return!1},n.prototype.forEach=function(e,t){for(var r=this._root,o=[],l=!1;!l;)r!==null?(o.push(r),r=r.left):o.length!==0?(r=o.pop(),e.call(t,r),r=r.right):l=!0;return this},n.prototype.range=function(e,t,r,o){for(var l=[],a=this._comparator,u=this._root,c;l.length!==0||u;)if(u)l.push(u),u=u.left;else{if(u=l.pop(),c=a(u.key,t),c>0)break;if(a(u.key,e)>=0&&r.call(o,u))return this;u=u.right}return this},n.prototype.keys=function(){var e=[];return this.forEach(function(t){var r=t.key;return e.push(r)}),e},n.prototype.values=function(){var e=[];return this.forEach(function(t){var r=t.data;return e.push(r)}),e},n.prototype.min=function(){return this._root?this.minNode(this._root).key:null},n.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},n.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},n.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},n.prototype.at=function(e){for(var t=this._root,r=!1,o=0,l=[];!r;)if(t)l.push(t),t=t.left;else if(l.length>0){if(t=l.pop(),o===e)return t;o++,t=t.right}else r=!0;return null},n.prototype.next=function(e){var t=this._root,r=null;if(e.right){for(r=e.right;r.left;)r=r.left;return r}for(var o=this._comparator;t;){var l=o(e.key,t.key);if(l===0)break;l<0?(r=t,t=t.left):t=t.right}return r},n.prototype.prev=function(e){var t=this._root,r=null;if(e.left!==null){for(r=e.left;r.right;)r=r.right;return r}for(var o=this._comparator;t;){var l=o(e.key,t.key);if(l===0)break;l<0?t=t.left:(r=t,t=t.right)}return r},n.prototype.clear=function(){return this._root=null,this._size=0,this},n.prototype.toList=function(){return pu(this._root)},n.prototype.load=function(e,t,r){t===void 0&&(t=[]),r===void 0&&(r=!1);var o=e.length,l=this._comparator;if(r&&oi(e,t,0,o-1,l),this._root===null)this._root=ri(e,t,0,o),this._size=o;else{var a=gu(this.toList(),hu(e,t),l);o=this._size+o,this._root=ii({head:a},0,o)}return this},n.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){e===void 0&&(e=function(r){return String(r.key)});var t=[];return ni(this._root,"",!0,function(r){return t.push(r)},e),t.join("")},n.prototype.update=function(e,t,r){var o=this._comparator,l=Qo(e,this._root,o),a=l.left,u=l.right;o(e,t)<0?u=Kr(t,r,u,o):a=Kr(t,r,a,o),this._root=du(a,u,o)},n.prototype.split=function(e){return Qo(e,this._root,this._comparator)},n.prototype[Symbol.iterator]=function(){var e;return fu(this,function(t){switch(t.label){case 0:e=this.minNode(),t.label=1;case 1:return e?[4,e]:[3,3];case 2:return t.sent(),e=this.next(e),[3,1];case 3:return[2]}})},n}();function ri(n,e,t,r){var o=r-t;if(o>0){var l=t+Math.floor(o/2),a=n[l],u=e[l],c=new Jt(a,u);return c.left=ri(n,e,t,l),c.right=ri(n,e,l+1,r),c}return null}function hu(n,e){for(var t=new Jt(null,null),r=t,o=0;o<n.length;o++)r=r.next=new Jt(n[o],e[o]);return r.next=null,t.next}function pu(n){for(var e=n,t=[],r=!1,o=new Jt(null,null),l=o;!r;)e?(t.push(e),e=e.left):t.length>0?(e=l=l.next=t.pop(),e=e.right):r=!0;return l.next=null,o.next}function ii(n,e,t){var r=t-e;if(r>0){var o=e+Math.floor(r/2),l=ii(n,e,o),a=n.head;return a.left=l,n.head=n.head.next,a.right=ii(n,o+1,t),a}return null}function gu(n,e,t){for(var r=new Jt(null,null),o=r,l=n,a=e;l!==null&&a!==null;)t(l.key,a.key)<0?(o.next=l,l=l.next):(o.next=a,a=a.next),o=o.next;return l!==null?o.next=l:a!==null&&(o.next=a),r.next}function oi(n,e,t,r,o){if(!(t>=r)){for(var l=n[t+r>>1],a=t-1,u=r+1;;){do a++;while(o(n[a],l)<0);do u--;while(o(n[u],l)>0);if(a>=u)break;var c=n[a];n[a]=n[u],n[u]=c,c=e[a],e[a]=e[u],e[u]=c}oi(n,e,t,u,o),oi(n,e,u+1,r,o)}}function mt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function $o(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function ot(n,e,t){return e&&$o(n.prototype,e),t&&$o(n,t),n}var In=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},li=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var r=e.ll.x<t.ll.x?t.ll.x:e.ll.x,o=e.ur.x<t.ur.x?e.ur.x:t.ur.x,l=e.ll.y<t.ll.y?t.ll.y:e.ll.y,a=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:r,y:l},ur:{x:o,y:a}}},Gt=Number.EPSILON;Gt===void 0&&(Gt=Math.pow(2,-52));var mu=Gt*Gt,ai=function(e,t){if(-Gt<e&&e<Gt&&-Gt<t&&t<Gt)return 0;var r=e-t;return r*r<mu*e*t?0:e<t?-1:1},bu=function(){function n(){mt(this,n),this.reset()}return ot(n,[{key:"reset",value:function(){this.xRounder=new el,this.yRounder=new el}},{key:"round",value:function(t,r){return{x:this.xRounder.round(t),y:this.yRounder.round(r)}}}]),n}(),el=function(){function n(){mt(this,n),this.tree=new mi,this.round(0)}return ot(n,[{key:"round",value:function(t){var r=this.tree.add(t),o=this.tree.prev(r);if(o!==null&&ai(r.key,o.key)===0)return this.tree.remove(t),o.key;var l=this.tree.next(r);return l!==null&&ai(r.key,l.key)===0?(this.tree.remove(t),l.key):t}}]),n}(),An=new bu,Ln=function(e,t){return e.x*t.y-e.y*t.x},yl=function(e,t){return e.x*t.x+e.y*t.y},tl=function(e,t,r){var o={x:t.x-e.x,y:t.y-e.y},l={x:r.x-e.x,y:r.y-e.y},a=Ln(o,l);return ai(a,0)},Er=function(e){return Math.sqrt(yl(e,e))},vu=function(e,t,r){var o={x:t.x-e.x,y:t.y-e.y},l={x:r.x-e.x,y:r.y-e.y};return Ln(l,o)/Er(l)/Er(o)},_u=function(e,t,r){var o={x:t.x-e.x,y:t.y-e.y},l={x:r.x-e.x,y:r.y-e.y};return yl(l,o)/Er(l)/Er(o)},nl=function(e,t,r){return t.y===0?null:{x:e.x+t.x/t.y*(r-e.y),y:r}},rl=function(e,t,r){return t.x===0?null:{x:r,y:e.y+t.y/t.x*(r-e.x)}},yu=function(e,t,r,o){if(t.x===0)return rl(r,o,e.x);if(o.x===0)return rl(e,t,r.x);if(t.y===0)return nl(r,o,e.y);if(o.y===0)return nl(e,t,r.y);var l=Ln(t,o);if(l==0)return null;var a={x:r.x-e.x,y:r.y-e.y},u=Ln(a,t)/l,c=Ln(a,o)/l,f=e.x+c*t.x,h=r.x+u*o.x,v=e.y+c*t.y,y=r.y+u*o.y,p=(f+h)/2,m=(v+y)/2;return{x:p,y:m}},St=function(){ot(n,null,[{key:"compare",value:function(t,r){var o=n.comparePoints(t.point,r.point);return o!==0?o:(t.point!==r.point&&t.link(r),t.isLeft!==r.isLeft?t.isLeft?1:-1:wr.compare(t.segment,r.segment))}},{key:"comparePoints",value:function(t,r){return t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0}}]);function n(e,t){mt(this,n),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}return ot(n,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var r=t.point.events,o=0,l=r.length;o<l;o++){var a=r[o];this.point.events.push(a),a.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,r=0;r<t;r++){var o=this.point.events[r];if(o.segment.consumedBy===void 0)for(var l=r+1;l<t;l++){var a=this.point.events[l];a.consumedBy===void 0&&o.otherSE.point.events===a.otherSE.point.events&&o.segment.consume(a.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],r=0,o=this.point.events.length;r<o;r++){var l=this.point.events[r];l!==this&&!l.segment.ringOut&&l.segment.isInResult()&&t.push(l)}return t}},{key:"getLeftmostComparator",value:function(t){var r=this,o=new Map,l=function(u){var c=u.otherSE;o.set(u,{sine:vu(r.point,t.point,c.point),cosine:_u(r.point,t.point,c.point)})};return function(a,u){o.has(a)||l(a),o.has(u)||l(u);var c=o.get(a),f=c.sine,h=c.cosine,v=o.get(u),y=v.sine,p=v.cosine;return f>=0&&y>=0?h<p?1:h>p?-1:0:f<0&&y<0?h<p?-1:h>p?1:0:y<f?-1:y>f?1:0}}}]),n}(),Eu=0,wr=function(){ot(n,null,[{key:"compare",value:function(t,r){var o=t.leftSE.point.x,l=r.leftSE.point.x,a=t.rightSE.point.x,u=r.rightSE.point.x;if(u<o)return 1;if(a<l)return-1;var c=t.leftSE.point.y,f=r.leftSE.point.y,h=t.rightSE.point.y,v=r.rightSE.point.y;if(o<l){if(f<c&&f<h)return 1;if(f>c&&f>h)return-1;var y=t.comparePoint(r.leftSE.point);if(y<0)return 1;if(y>0)return-1;var p=r.comparePoint(t.rightSE.point);return p!==0?p:-1}if(o>l){if(c<f&&c<v)return-1;if(c>f&&c>v)return 1;var m=r.comparePoint(t.leftSE.point);if(m!==0)return m;var S=t.comparePoint(r.rightSE.point);return S<0?1:S>0?-1:1}if(c<f)return-1;if(c>f)return 1;if(a<u){var O=r.comparePoint(t.rightSE.point);if(O!==0)return O}if(a>u){var j=t.comparePoint(r.rightSE.point);if(j<0)return 1;if(j>0)return-1}if(a!==u){var I=h-c,C=a-o,N=v-f,A=u-l;if(I>C&&N<A)return 1;if(I<C&&N>A)return-1}return a>u?1:a<u||h<v?-1:h>v?1:t.id<r.id?-1:t.id>r.id?1:0}}]);function n(e,t,r,o){mt(this,n),this.id=++Eu,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=r,this.windings=o}return ot(n,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,r=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<r?t:r},ur:{x:this.rightSE.point.x,y:t>r?t:r}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var r=this.leftSE.point,o=this.rightSE.point,l=this.vector();if(r.x===o.x)return t.x===r.x?0:t.x<r.x?1:-1;var a=(t.y-r.y)/l.y,u=r.x+a*l.x;if(t.x===u)return 0;var c=(t.x-r.x)/l.x,f=r.y+c*l.y;return t.y===f?0:t.y<f?-1:1}},{key:"getIntersection",value:function(t){var r=this.bbox(),o=t.bbox(),l=li(r,o);if(l===null)return null;var a=this.leftSE.point,u=this.rightSE.point,c=t.leftSE.point,f=t.rightSE.point,h=In(r,c)&&this.comparePoint(c)===0,v=In(o,a)&&t.comparePoint(a)===0,y=In(r,f)&&this.comparePoint(f)===0,p=In(o,u)&&t.comparePoint(u)===0;if(v&&h)return p&&!y?u:!p&&y?f:null;if(v)return y&&a.x===f.x&&a.y===f.y?null:a;if(h)return p&&u.x===c.x&&u.y===c.y?null:c;if(p&&y)return null;if(p)return u;if(y)return f;var m=yu(a,this.vector(),c,t.vector());return m===null||!In(l,m)?null:An.round(m.x,m.y)}},{key:"split",value:function(t){var r=[],o=t.events!==void 0,l=new St(t,!0),a=new St(t,!1),u=this.rightSE;this.replaceRightSE(a),r.push(a),r.push(l);var c=new n(l,u,this.rings.slice(),this.windings.slice());return St.comparePoints(c.leftSE.point,c.rightSE.point)>0&&c.swapEvents(),St.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),o&&(l.checkForConsuming(),a.checkForConsuming()),r}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var r=0,o=this.windings.length;r<o;r++)this.windings[r]*=-1}},{key:"consume",value:function(t){for(var r=this,o=t;r.consumedBy;)r=r.consumedBy;for(;o.consumedBy;)o=o.consumedBy;var l=n.compare(r,o);if(l!==0){if(l>0){var a=r;r=o,o=a}if(r.prev===o){var u=r;r=o,o=u}for(var c=0,f=o.rings.length;c<f;c++){var h=o.rings[c],v=o.windings[c],y=r.rings.indexOf(h);y===-1?(r.rings.push(h),r.windings.push(v)):r.windings[y]+=v}o.rings=null,o.windings=null,o.consumedBy=r,o.leftSE.consumedBy=r.leftSE,o.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var r=this._afterState.rings,o=this._afterState.windings,l=this._afterState.multiPolys,a=0,u=this.rings.length;a<u;a++){var c=this.rings[a],f=this.windings[a],h=r.indexOf(c);h===-1?(r.push(c),o.push(f)):o[h]+=f}for(var v=[],y=[],p=0,m=r.length;p<m;p++)if(o[p]!==0){var S=r[p],O=S.poly;if(y.indexOf(O)===-1)if(S.isExterior)v.push(O);else{y.indexOf(O)===-1&&y.push(O);var j=v.indexOf(S.poly);j!==-1&&v.splice(j,1)}}for(var I=0,C=v.length;I<C;I++){var N=v[I].multiPoly;l.indexOf(N)===-1&&l.push(N)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch(_t.type){case"union":{var o=t.length===0,l=r.length===0;this._isInResult=o!==l;break}case"intersection":{var a,u;t.length<r.length?(a=t.length,u=r.length):(a=r.length,u=t.length),this._isInResult=u===_t.numMultiPolys&&a<u;break}case"xor":{var c=Math.abs(t.length-r.length);this._isInResult=c%2===1;break}case"difference":{var f=function(v){return v.length===1&&v[0].isSubject};this._isInResult=f(t)!==f(r);break}default:throw new Error("Unrecognized operation type found ".concat(_t.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,r,o){var l,a,u,c=St.comparePoints(t,r);if(c<0)l=t,a=r,u=1;else if(c>0)l=r,a=t,u=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var f=new St(l,!0),h=new St(a,!1);return new n(f,h,[o],[u])}}]),n}(),il=function(){function n(e,t,r){if(mt(this,n),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=r,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=An.round(e[0][0],e[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var l=o,a=1,u=e.length;a<u;a++){if(typeof e[a][0]!="number"||typeof e[a][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=An.round(e[a][0],e[a][1]);c.x===l.x&&c.y===l.y||(this.segments.push(wr.fromRing(l,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),l=c)}(o.x!==l.x||o.y!==l.y)&&this.segments.push(wr.fromRing(l,o,this))}return ot(n,[{key:"getSweepEvents",value:function(){for(var t=[],r=0,o=this.segments.length;r<o;r++){var l=this.segments[r];t.push(l.leftSE),t.push(l.rightSE)}return t}}]),n}(),wu=function(){function n(e,t){if(mt(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new il(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,o=e.length;r<o;r++){var l=new il(e[r],this,!1);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.interiorRings.push(l)}this.multiPoly=t}return ot(n,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),r=0,o=this.interiorRings.length;r<o;r++)for(var l=this.interiorRings[r].getSweepEvents(),a=0,u=l.length;a<u;a++)t.push(l[a]);return t}}]),n}(),ol=function(){function n(e,t){if(mt(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,o=e.length;r<o;r++){var l=new wu(e[r],this);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.polys.push(l)}this.isSubject=t}return ot(n,[{key:"getSweepEvents",value:function(){for(var t=[],r=0,o=this.polys.length;r<o;r++)for(var l=this.polys[r].getSweepEvents(),a=0,u=l.length;a<u;a++)t.push(l[a]);return t}}]),n}(),Su=function(){ot(n,null,[{key:"factory",value:function(t){for(var r=[],o=0,l=t.length;o<l;o++){var a=t[o];if(!(!a.isInResult()||a.ringOut)){for(var u=null,c=a.leftSE,f=a.rightSE,h=[c],v=c.point,y=[];u=c,c=f,h.push(c),c.point!==v;)for(;;){var p=c.getAvailableLinkedEvents();if(p.length===0){var m=h[0].point,S=h[h.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(m.x,",")+" ".concat(m.y,"]. Last matching segment found ends at")+" [".concat(S.x,", ").concat(S.y,"]."))}if(p.length===1){f=p[0].otherSE;break}for(var O=null,j=0,I=y.length;j<I;j++)if(y[j].point===c.point){O=j;break}if(O!==null){var C=y.splice(O)[0],N=h.splice(C.index);N.unshift(N[0].otherSE),r.push(new n(N.reverse()));continue}y.push({index:h.length,point:c.point});var A=c.getLeftmostComparator(u);f=p.sort(A)[0].otherSE;break}r.push(new n(h))}}return r}}]);function n(e){mt(this,n),this.events=e;for(var t=0,r=e.length;t<r;t++)e[t].segment.ringOut=this;this.poly=null}return ot(n,[{key:"getGeom",value:function(){for(var t=this.events[0].point,r=[t],o=1,l=this.events.length-1;o<l;o++){var a=this.events[o].point,u=this.events[o+1].point;tl(a,t,u)!==0&&(r.push(a),t=a)}if(r.length===1)return null;var c=r[0],f=r[1];tl(c,t,f)===0&&r.shift(),r.push(r[0]);for(var h=this.isExteriorRing()?1:-1,v=this.isExteriorRing()?0:r.length-1,y=this.isExteriorRing()?r.length:-1,p=[],m=v;m!=y;m+=h)p.push([r[m].x,r[m].y]);return p}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],r=1,o=this.events.length;r<o;r++){var l=this.events[r];St.compare(t,l)>0&&(t=l)}for(var a=t.segment.prevInResult(),u=a?a.prevInResult():null;;){if(!a)return null;if(!u)return a.ringOut;if(u.ringOut!==a.ringOut)return u.ringOut.enclosingRing()!==a.ringOut?a.ringOut:a.ringOut.enclosingRing();a=u.prevInResult(),u=a?a.prevInResult():null}}}]),n}(),ll=function(){function n(e){mt(this,n),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return ot(n,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var r=0,o=this.interiorRings.length;r<o;r++){var l=this.interiorRings[r].getGeom();l!==null&&t.push(l)}return t}}]),n}(),Tu=function(){function n(e){mt(this,n),this.rings=e,this.polys=this._composePolys(e)}return ot(n,[{key:"getGeom",value:function(){for(var t=[],r=0,o=this.polys.length;r<o;r++){var l=this.polys[r].getGeom();l!==null&&t.push(l)}return t}},{key:"_composePolys",value:function(t){for(var r=[],o=0,l=t.length;o<l;o++){var a=t[o];if(!a.poly)if(a.isExteriorRing())r.push(new ll(a));else{var u=a.enclosingRing();u.poly||r.push(new ll(u)),u.poly.addInterior(a)}}return r}}]),n}(),ku=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wr.compare;mt(this,n),this.queue=e,this.tree=new mi(t),this.segments=[]}return ot(n,[{key:"process",value:function(t){var r=t.segment,o=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(r),o;var l=t.isLeft?this.tree.insert(r):this.tree.find(r);if(!l)throw new Error("Unable to find segment #".concat(r.id," ")+"[".concat(r.leftSE.point.x,", ").concat(r.leftSE.point.y,"] -> ")+"[".concat(r.rightSE.point.x,", ").concat(r.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var a=l,u=l,c=void 0,f=void 0;c===void 0;)a=this.tree.prev(a),a===null?c=null:a.key.consumedBy===void 0&&(c=a.key);for(;f===void 0;)u=this.tree.next(u),u===null?f=null:u.key.consumedBy===void 0&&(f=u.key);if(t.isLeft){var h=null;if(c){var v=c.getIntersection(r);if(v!==null&&(r.isAnEndpoint(v)||(h=v),!c.isAnEndpoint(v)))for(var y=this._splitSafely(c,v),p=0,m=y.length;p<m;p++)o.push(y[p])}var S=null;if(f){var O=f.getIntersection(r);if(O!==null&&(r.isAnEndpoint(O)||(S=O),!f.isAnEndpoint(O)))for(var j=this._splitSafely(f,O),I=0,C=j.length;I<C;I++)o.push(j[I])}if(h!==null||S!==null){var N=null;if(h===null)N=S;else if(S===null)N=h;else{var A=St.comparePoints(h,S);N=A<=0?h:S}this.queue.remove(r.rightSE),o.push(r.rightSE);for(var F=r.split(N),ge=0,z=F.length;ge<z;ge++)o.push(F[ge])}o.length>0?(this.tree.remove(r),o.push(t)):(this.segments.push(r),r.prev=c)}else{if(c&&f){var oe=c.getIntersection(f);if(oe!==null){if(!c.isAnEndpoint(oe))for(var ae=this._splitSafely(c,oe),D=0,te=ae.length;D<te;D++)o.push(ae[D]);if(!f.isAnEndpoint(oe))for(var R=this._splitSafely(f,oe),ie=0,Be=R.length;ie<Be;ie++)o.push(R[ie])}}this.tree.remove(r)}return o}},{key:"_splitSafely",value:function(t,r){this.tree.remove(t);var o=t.rightSE;this.queue.remove(o);var l=t.split(r);return l.push(o),t.consumedBy===void 0&&this.tree.insert(t),l}}]),n}(),al=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Cu=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Iu=function(){function n(){mt(this,n)}return ot(n,[{key:"run",value:function(t,r,o){_t.type=t,An.reset();for(var l=[new ol(r,!0)],a=0,u=o.length;a<u;a++)l.push(new ol(o[a],!1));if(_t.numMultiPolys=l.length,_t.type==="difference")for(var c=l[0],f=1;f<l.length;)li(l[f].bbox,c.bbox)!==null?f++:l.splice(f,1);if(_t.type==="intersection"){for(var h=0,v=l.length;h<v;h++)for(var y=l[h],p=h+1,m=l.length;p<m;p++)if(li(y.bbox,l[p].bbox)===null)return[]}for(var S=new mi(St.compare),O=0,j=l.length;O<j;O++)for(var I=l[O].getSweepEvents(),C=0,N=I.length;C<N;C++)if(S.insert(I[C]),S.size>al)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var A=new ku(S),F=S.size,ge=S.pop();ge;){var z=ge.key;if(S.size===F){var oe=z.segment;throw new Error("Unable to pop() ".concat(z.isLeft?"left":"right"," SweepEvent ")+"[".concat(z.point.x,", ").concat(z.point.y,"] from segment #").concat(oe.id," ")+"[".concat(oe.leftSE.point.x,", ").concat(oe.leftSE.point.y,"] -> ")+"[".concat(oe.rightSE.point.x,", ").concat(oe.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(S.size>al)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(A.segments.length>Cu)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var ae=A.process(z),D=0,te=ae.length;D<te;D++){var R=ae[D];R.consumedBy===void 0&&S.insert(R)}F=S.size,ge=S.pop()}An.reset();var ie=Su.factory(A.segments),Be=new Tu(ie);return Be.getGeom()}}]),n}(),_t=new Iu,xu=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return _t.run("union",e,r)},Ou=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return _t.run("intersection",e,r)},Lu=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return _t.run("xor",e,r)},Mu=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return _t.run("difference",e,r)},mr={union:xu,intersection:Ou,xor:Lu,difference:Mu};function Pu(n,e){var t=Nu(e),r=null;return n.type==="FeatureCollection"?r=Au(n):r=El(mr.union(n.geometry.coordinates)),r.geometry.coordinates.forEach(function(o){t.geometry.coordinates.push(o[0])}),t}function Au(n){var e=n.features.length===2?mr.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):mr.union.apply(mr,n.features.map(function(t){return t.geometry.coordinates}));return El(e)}function El(n){return uu(n)}function Nu(n){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],t=n&&n.geometry.coordinates||e;return su(t)}const Ru={"line-cap":"round","line-join":"round"},Sr=["==","$type","Polygon"],bi=["==","$type","LineString"],Tr=["==","$type","Point"];function kr(n,e,t=1){return{type:"line",layout:Ru,paint:{"line-color":n,"line-width":e,"line-opacity":t}}}function Mr(n,e){return{type:"fill",paint:{"fill-color":n,"fill-opacity":e}}}function Cr(n,e,t=1){return{type:"circle",paint:{"circle-radius":e,"circle-color":n,"circle-opacity":t}}}function Fu(n,e,t){let{authorityName:r}=e;const{getMap:o,setCamera:l}=tn("map");nn(async()=>{const u=await a(r),c=o();l&&c.fitBounds(ml(u),{padding:20,animate:!1}),c.addSource("boundary",{type:"geojson",data:Pu(u)}),c.addLayer({id:"boundary",source:"boundary",...Mr("black",.5)})});async function a(u){const f=await(await fetch(Ma)).text(),h=JSON.parse(f);return h.features=h.features.filter(v=>v.properties.name==u),h}return n.$$set=u=>{"authorityName"in u&&t(0,r=u.authorityName)},[r]}class Du extends Pe{constructor(e){super(),Ae(this,e,Fu,null,Ne,{authorityName:0})}}var si={},Uu={get exports(){return si},set exports(n){si=n}};(function(n,e){(function(t,r){n.exports=r()})(Cn,function(){var t=function(i,s){var d={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},g={on:function(_,E,U){if(d[_]===void 0)throw new Error("Invalid event type: "+_);d[_].push({selector:E,fn:U})},render:function(_){s.store.featureChanged(_)}},b=function(_,E){for(var U=d[_],q=U.length;q--;){var X=U[q];if(X.selector(E)){X.fn.call(g,E)||s.store.render(),s.ui.updateMapClasses();break}}};return i.start.call(g),{render:i.render,stop:function(){i.stop&&i.stop()},trash:function(){i.trash&&(i.trash(),s.store.render())},combineFeatures:function(){i.combineFeatures&&i.combineFeatures()},uncombineFeatures:function(){i.uncombineFeatures&&i.uncombineFeatures()},drag:function(_){b("drag",_)},click:function(_){b("click",_)},mousemove:function(_){b("mousemove",_)},mousedown:function(_){b("mousedown",_)},mouseup:function(_){b("mouseup",_)},mouseout:function(_){b("mouseout",_)},keydown:function(_){b("keydown",_)},keyup:function(_){b("keyup",_)},touchstart:function(_){b("touchstart",_)},touchmove:function(_){b("touchmove",_)},touchend:function(_){b("touchend",_)},tap:function(_){b("tap",_)}}};function r(i){if(i.__esModule)return i;var s=i.default;if(typeof s=="function"){var d=function g(){if(this instanceof g){var b=[null];b.push.apply(b,arguments);var _=Function.bind.apply(s,b);return new _}return s.apply(this,arguments)};d.prototype=s.prototype}else d={};return Object.defineProperty(d,"__esModule",{value:!0}),Object.keys(i).forEach(function(g){var b=Object.getOwnPropertyDescriptor(i,g);Object.defineProperty(d,g,b.get?b:{enumerable:!0,get:function(){return i[g]}})}),d}var o={},l={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},a=l;function u(i){var s=0;if(i&&i.length>0){s+=Math.abs(c(i[0]));for(var d=1;d<i.length;d++)s-=Math.abs(c(i[d]))}return s}function c(i){var s,d,g,b,_,E,U=0,q=i.length;if(q>2){for(E=0;E<q;E++)E===q-2?(g=q-2,b=q-1,_=0):E===q-1?(g=q-1,b=0,_=1):(g=E,b=E+1,_=E+2),s=i[g],d=i[b],U+=(f(i[_][0])-f(s[0]))*Math.sin(f(d[1]));U=U*a.RADIUS*a.RADIUS/2}return U}function f(i){return i*Math.PI/180}o.geometry=function i(s){var d,g=0;switch(s.type){case"Polygon":return u(s.coordinates);case"MultiPolygon":for(d=0;d<s.coordinates.length;d++)g+=u(s.coordinates[d]);return g;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(d=0;d<s.geometries.length;d++)g+=i(s.geometries[d]);return g}},o.ring=c;var h={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},v={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},y={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},p={POLYGON:"polygon",LINE:"line_string",POINT:"point"},m={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},S={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},O={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},j={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},I={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},C={ACTIVE:"true",INACTIVE:"false"},N=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],A=-85,F=Object.freeze({__proto__:null,classes:h,sources:v,cursors:y,types:p,geojsonTypes:m,modes:S,events:O,updateActions:j,meta:I,activeStates:C,interactions:N,LAT_MIN:-90,LAT_RENDERED_MIN:A,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),ge={Point:0,LineString:1,MultiLineString:1,Polygon:2};function z(i,s){var d=ge[i.geometry.type]-ge[s.geometry.type];return d===0&&i.geometry.type===m.POLYGON?i.area-s.area:d}function oe(i){return i.map(function(s){return s.geometry.type===m.POLYGON&&(s.area=o.geometry({type:m.FEATURE,property:{},geometry:s.geometry})),s}).sort(z).map(function(s){return delete s.area,s})}function ae(i,s){return s===void 0&&(s=0),[[i.point.x-s,i.point.y-s],[i.point.x+s,i.point.y+s]]}function D(i){if(this._items={},this._nums={},this._length=i?i.length:0,i)for(var s=0,d=i.length;s<d;s++)this.add(i[s]),i[s]!==void 0&&(typeof i[s]=="string"?this._items[i[s]]=s:this._nums[i[s]]=s)}D.prototype.add=function(i){return this.has(i)||(this._length++,typeof i=="string"?this._items[i]=this._length:this._nums[i]=this._length),this},D.prototype.delete=function(i){return this.has(i)===!1||(this._length--,delete this._items[i],delete this._nums[i]),this},D.prototype.has=function(i){return(typeof i=="string"||typeof i=="number")&&(this._items[i]!==void 0||this._nums[i]!==void 0)},D.prototype.values=function(){var i=this,s=[];return Object.keys(this._items).forEach(function(d){s.push({k:d,v:i._items[d]})}),Object.keys(this._nums).forEach(function(d){s.push({k:JSON.parse(d),v:i._nums[d]})}),s.sort(function(d,g){return d.v-g.v}).map(function(d){return d.k})},D.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var te=[I.FEATURE,I.MIDPOINT,I.VERTEX],R={click:function(i,s,d){return ie(i,s,d,d.options.clickBuffer)},touch:function(i,s,d){return ie(i,s,d,d.options.touchBuffer)}};function ie(i,s,d,g){if(d.map===null)return[];var b=i?ae(i,g):s,_={};d.options.styles&&(_.layers=d.options.styles.map(function(X){return X.id}));var E=d.map.queryRenderedFeatures(b,_).filter(function(X){return te.indexOf(X.properties.meta)!==-1}),U=new D,q=[];return E.forEach(function(X){var W=X.properties.id;U.has(W)||(U.add(W),q.push(X))}),oe(q)}function Be(i,s){var d=R.click(i,null,s),g={mouse:y.NONE};return d[0]&&(g.mouse=d[0].properties.active===C.ACTIVE?y.MOVE:y.POINTER,g.feature=d[0].properties.meta),s.events.currentModeName().indexOf("draw")!==-1&&(g.mouse=y.ADD),s.ui.queueMapClasses(g),s.ui.updateMapClasses(),d[0]}function Te(i,s){var d=i.x-s.x,g=i.y-s.y;return Math.sqrt(d*d+g*g)}function ke(i,s,d){d===void 0&&(d={});var g=d.fineTolerance!=null?d.fineTolerance:4,b=d.grossTolerance!=null?d.grossTolerance:12,_=d.interval!=null?d.interval:500;i.point=i.point||s.point,i.time=i.time||s.time;var E=Te(i.point,s.point);return E<g||E<b&&s.time-i.time<_}function De(i,s,d){d===void 0&&(d={});var g=d.tolerance!=null?d.tolerance:25,b=d.interval!=null?d.interval:250;return i.point=i.point||s.point,i.time=i.time||s.time,Te(i.point,s.point)<g&&s.time-i.time<b}var Le={},Ue={get exports(){return Le},set exports(i){Le=i}}.exports=function(i,s){if(s||(s=16),i===void 0&&(i=128),i<=0)return"0";for(var d=Math.log(Math.pow(2,i))/Math.log(s),g=2;d===1/0;g*=2)d=Math.log(Math.pow(2,i/g))/Math.log(s)*g;var b=d-Math.floor(d),_="";for(g=0;g<Math.floor(d);g++)_=Math.floor(Math.random()*s).toString(s)+_;if(b){var E=Math.pow(s,b);_=Math.floor(Math.random()*E).toString(s)+_}var U=parseInt(_,s);return U!==1/0&&U>=Math.pow(2,i)?Ue(i,s):_};Ue.rack=function(i,s,d){var g=function(_){var E=0;do{if(E++>10){if(!d)throw new Error("too many ID collisions, use more bits");i+=d}var U=Ue(i,s)}while(Object.hasOwnProperty.call(b,U));return b[U]=_,U},b=g.hats={};return g.get=function(_){return g.hats[_]},g.set=function(_,E){return g.hats[_]=E,g},g.bits=i||128,g.base=s||16,g};var _e=function(i,s){this.ctx=i,this.properties=s.properties||{},this.coordinates=s.geometry.coordinates,this.id=s.id||Le(),this.type=s.geometry.type};_e.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},_e.prototype.incomingCoords=function(i){this.setCoordinates(i)},_e.prototype.setCoordinates=function(i){this.coordinates=i,this.changed()},_e.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},_e.prototype.setProperty=function(i,s){this.properties[i]=s},_e.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:m.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},_e.prototype.internal=function(i){var s={id:this.id,meta:I.FEATURE,"meta:type":this.type,active:C.INACTIVE,mode:i};if(this.ctx.options.userProperties)for(var d in this.properties)s["user_"+d]=this.properties[d];return{type:m.FEATURE,properties:s,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var k=function(i,s){_e.call(this,i,s)};(k.prototype=Object.create(_e.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},k.prototype.updateCoordinate=function(i,s,d){this.coordinates=arguments.length===3?[s,d]:[i,s],this.changed()},k.prototype.getCoordinate=function(){return this.getCoordinates()};var se=function(i,s){_e.call(this,i,s)};(se.prototype=Object.create(_e.prototype)).isValid=function(){return this.coordinates.length>1},se.prototype.addCoordinate=function(i,s,d){this.changed();var g=parseInt(i,10);this.coordinates.splice(g,0,[s,d])},se.prototype.getCoordinate=function(i){var s=parseInt(i,10);return JSON.parse(JSON.stringify(this.coordinates[s]))},se.prototype.removeCoordinate=function(i){this.changed(),this.coordinates.splice(parseInt(i,10),1)},se.prototype.updateCoordinate=function(i,s,d){var g=parseInt(i,10);this.coordinates[g]=[s,d],this.changed()};var at=function(i,s){_e.call(this,i,s),this.coordinates=this.coordinates.map(function(d){return d.slice(0,-1)})};(at.prototype=Object.create(_e.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(i){return i.length>2})},at.prototype.incomingCoords=function(i){this.coordinates=i.map(function(s){return s.slice(0,-1)}),this.changed()},at.prototype.setCoordinates=function(i){this.coordinates=i,this.changed()},at.prototype.addCoordinate=function(i,s,d){this.changed();var g=i.split(".").map(function(b){return parseInt(b,10)});this.coordinates[g[0]].splice(g[1],0,[s,d])},at.prototype.removeCoordinate=function(i){this.changed();var s=i.split(".").map(function(g){return parseInt(g,10)}),d=this.coordinates[s[0]];d&&(d.splice(s[1],1),d.length<3&&this.coordinates.splice(s[0],1))},at.prototype.getCoordinate=function(i){var s=i.split(".").map(function(g){return parseInt(g,10)}),d=this.coordinates[s[0]];return JSON.parse(JSON.stringify(d[s[1]]))},at.prototype.getCoordinates=function(){return this.coordinates.map(function(i){return i.concat([i[0]])})},at.prototype.updateCoordinate=function(i,s,d){this.changed();var g=i.split("."),b=parseInt(g[0],10),_=parseInt(g[1],10);this.coordinates[b]===void 0&&(this.coordinates[b]=[]),this.coordinates[b][_]=[s,d]};var Pr={MultiPoint:k,MultiLineString:se,MultiPolygon:at},rn=function(i,s,d,g,b){var _=d.split("."),E=parseInt(_[0],10),U=_[1]?_.slice(1).join("."):null;return i[E][s](U,g,b)},Ke=function(i,s){if(_e.call(this,i,s),delete this.coordinates,this.model=Pr[s.geometry.type],this.model===void 0)throw new TypeError(s.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(s.geometry.coordinates)};function fe(i){this.map=i.map,this.drawConfig=JSON.parse(JSON.stringify(i.options||{})),this._ctx=i}(Ke.prototype=Object.create(_e.prototype))._coordinatesToFeatures=function(i){var s=this,d=this.model.bind(this);return i.map(function(g){return new d(s.ctx,{id:Le(),type:m.FEATURE,properties:{},geometry:{coordinates:g,type:s.type.replace("Multi","")}})})},Ke.prototype.isValid=function(){return this.features.every(function(i){return i.isValid()})},Ke.prototype.setCoordinates=function(i){this.features=this._coordinatesToFeatures(i),this.changed()},Ke.prototype.getCoordinate=function(i){return rn(this.features,"getCoordinate",i)},Ke.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(i){return i.type===m.POLYGON?i.getCoordinates():i.coordinates})))},Ke.prototype.updateCoordinate=function(i,s,d){rn(this.features,"updateCoordinate",i,s,d),this.changed()},Ke.prototype.addCoordinate=function(i,s,d){rn(this.features,"addCoordinate",i,s,d),this.changed()},Ke.prototype.removeCoordinate=function(i){rn(this.features,"removeCoordinate",i),this.changed()},Ke.prototype.getFeatures=function(){return this.features},fe.prototype.setSelected=function(i){return this._ctx.store.setSelected(i)},fe.prototype.setSelectedCoordinates=function(i){var s=this;this._ctx.store.setSelectedCoordinates(i),i.reduce(function(d,g){return d[g.feature_id]===void 0&&(d[g.feature_id]=!0,s._ctx.store.get(g.feature_id).changed()),d},{})},fe.prototype.getSelected=function(){return this._ctx.store.getSelected()},fe.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},fe.prototype.isSelected=function(i){return this._ctx.store.isSelected(i)},fe.prototype.getFeature=function(i){return this._ctx.store.get(i)},fe.prototype.select=function(i){return this._ctx.store.select(i)},fe.prototype.deselect=function(i){return this._ctx.store.deselect(i)},fe.prototype.deleteFeature=function(i,s){return s===void 0&&(s={}),this._ctx.store.delete(i,s)},fe.prototype.addFeature=function(i){return this._ctx.store.add(i)},fe.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},fe.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},fe.prototype.setActionableState=function(i){i===void 0&&(i={});var s={trash:i.trash||!1,combineFeatures:i.combineFeatures||!1,uncombineFeatures:i.uncombineFeatures||!1};return this._ctx.events.actionable(s)},fe.prototype.changeMode=function(i,s,d){return s===void 0&&(s={}),d===void 0&&(d={}),this._ctx.events.changeMode(i,s,d)},fe.prototype.updateUIClasses=function(i){return this._ctx.ui.queueMapClasses(i)},fe.prototype.activateUIButton=function(i){return this._ctx.ui.setActiveButton(i)},fe.prototype.featuresAt=function(i,s,d){if(d===void 0&&(d="click"),d!=="click"&&d!=="touch")throw new Error("invalid buffer type");return R[d](i,s,this._ctx)},fe.prototype.newFeature=function(i){var s=i.geometry.type;return s===m.POINT?new k(this._ctx,i):s===m.LINE_STRING?new se(this._ctx,i):s===m.POLYGON?new at(this._ctx,i):new Ke(this._ctx,i)},fe.prototype.isInstanceOf=function(i,s){if(i===m.POINT)return s instanceof k;if(i===m.LINE_STRING)return s instanceof se;if(i===m.POLYGON)return s instanceof at;if(i==="MultiFeature")return s instanceof Ke;throw new Error("Unknown feature class: "+i)},fe.prototype.doRender=function(i){return this._ctx.store.featureChanged(i)},fe.prototype.onSetup=function(){},fe.prototype.onDrag=function(){},fe.prototype.onClick=function(){},fe.prototype.onMouseMove=function(){},fe.prototype.onMouseDown=function(){},fe.prototype.onMouseUp=function(){},fe.prototype.onMouseOut=function(){},fe.prototype.onKeyUp=function(){},fe.prototype.onKeyDown=function(){},fe.prototype.onTouchStart=function(){},fe.prototype.onTouchMove=function(){},fe.prototype.onTouchEnd=function(){},fe.prototype.onTap=function(){},fe.prototype.onStop=function(){},fe.prototype.onTrash=function(){},fe.prototype.onCombineFeature=function(){},fe.prototype.onUncombineFeature=function(){},fe.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Q={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Il=Object.keys(Q);function xl(i){var s=Object.keys(i);return function(d,g){g===void 0&&(g={});var b={},_=s.reduce(function(E,U){return E[U]=i[U],E},new fe(d));return{start:function(){var E=this;b=_.onSetup(g),Il.forEach(function(U){var q,X=Q[U],W=function(){return!1};i[X]&&(W=function(){return!0}),E.on(U,W,(q=X,function(J){return _[q](b,J)}))})},stop:function(){_.onStop(b)},trash:function(){_.onTrash(b)},combineFeatures:function(){_.onCombineFeatures(b)},uncombineFeatures:function(){_.onUncombineFeatures(b)},render:function(E,U){_.toDisplayFeatures(b,E,U)}}}}function mn(i){return[].concat(i).filter(function(s){return s!==void 0})}function Ol(){var i=this;if(!(i.ctx.map&&i.ctx.map.getSource(v.HOT)!==void 0))return q();var s=i.ctx.events.currentModeName();i.ctx.ui.queueMapClasses({mode:s});var d=[],g=[];i.isDirty?g=i.getAllIds():(d=i.getChangedIds().filter(function(X){return i.get(X)!==void 0}),g=i.sources.hot.filter(function(X){return X.properties.id&&d.indexOf(X.properties.id)===-1&&i.get(X.properties.id)!==void 0}).map(function(X){return X.properties.id})),i.sources.hot=[];var b=i.sources.cold.length;i.sources.cold=i.isDirty?[]:i.sources.cold.filter(function(X){var W=X.properties.id||X.properties.parent;return d.indexOf(W)===-1});var _=b!==i.sources.cold.length||g.length>0;function E(X,W){var J=i.get(X).internal(s);i.ctx.events.currentModeRender(J,function(le){i.sources[W].push(le)})}if(d.forEach(function(X){return E(X,"hot")}),g.forEach(function(X){return E(X,"cold")}),_&&i.ctx.map.getSource(v.COLD).setData({type:m.FEATURE_COLLECTION,features:i.sources.cold}),i.ctx.map.getSource(v.HOT).setData({type:m.FEATURE_COLLECTION,features:i.sources.hot}),i._emitSelectionChange&&(i.ctx.map.fire(O.SELECTION_CHANGE,{features:i.getSelected().map(function(X){return X.toGeoJSON()}),points:i.getSelectedCoordinates().map(function(X){return{type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:X.coordinates}}})}),i._emitSelectionChange=!1),i._deletedFeaturesToEmit.length){var U=i._deletedFeaturesToEmit.map(function(X){return X.toGeoJSON()});i._deletedFeaturesToEmit=[],i.ctx.map.fire(O.DELETE,{features:U})}function q(){i.isDirty=!1,i.clearChangedIds()}q(),i.ctx.map.fire(O.RENDER,{})}function Ce(i){var s,d=this;this._features={},this._featureIds=new D,this._selectedFeatureIds=new D,this._selectedCoordinates=[],this._changedFeatureIds=new D,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=i,this.sources={hot:[],cold:[]},this.render=function(){s||(s=requestAnimationFrame(function(){s=null,Ol.call(d)}))},this.isDirty=!1}function _i(i,s){var d=i._selectedCoordinates.filter(function(g){return i._selectedFeatureIds.has(g.feature_id)});i._selectedCoordinates.length===d.length||s.silent||(i._emitSelectionChange=!0),i._selectedCoordinates=d}Ce.prototype.createRenderBatch=function(){var i=this,s=this.render,d=0;return this.render=function(){d++},function(){i.render=s,d>0&&i.render()}},Ce.prototype.setDirty=function(){return this.isDirty=!0,this},Ce.prototype.featureChanged=function(i){return this._changedFeatureIds.add(i),this},Ce.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Ce.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Ce.prototype.getAllIds=function(){return this._featureIds.values()},Ce.prototype.add=function(i){return this.featureChanged(i.id),this._features[i.id]=i,this._featureIds.add(i.id),this},Ce.prototype.delete=function(i,s){var d=this;return s===void 0&&(s={}),mn(i).forEach(function(g){d._featureIds.has(g)&&(d._featureIds.delete(g),d._selectedFeatureIds.delete(g),s.silent||d._deletedFeaturesToEmit.indexOf(d._features[g])===-1&&d._deletedFeaturesToEmit.push(d._features[g]),delete d._features[g],d.isDirty=!0)}),_i(this,s),this},Ce.prototype.get=function(i){return this._features[i]},Ce.prototype.getAll=function(){var i=this;return Object.keys(this._features).map(function(s){return i._features[s]})},Ce.prototype.select=function(i,s){var d=this;return s===void 0&&(s={}),mn(i).forEach(function(g){d._selectedFeatureIds.has(g)||(d._selectedFeatureIds.add(g),d._changedFeatureIds.add(g),s.silent||(d._emitSelectionChange=!0))}),this},Ce.prototype.deselect=function(i,s){var d=this;return s===void 0&&(s={}),mn(i).forEach(function(g){d._selectedFeatureIds.has(g)&&(d._selectedFeatureIds.delete(g),d._changedFeatureIds.add(g),s.silent||(d._emitSelectionChange=!0))}),_i(this,s),this},Ce.prototype.clearSelected=function(i){return i===void 0&&(i={}),this.deselect(this._selectedFeatureIds.values(),{silent:i.silent}),this},Ce.prototype.setSelected=function(i,s){var d=this;return s===void 0&&(s={}),i=mn(i),this.deselect(this._selectedFeatureIds.values().filter(function(g){return i.indexOf(g)===-1}),{silent:s.silent}),this.select(i.filter(function(g){return!d._selectedFeatureIds.has(g)}),{silent:s.silent}),this},Ce.prototype.setSelectedCoordinates=function(i){return this._selectedCoordinates=i,this._emitSelectionChange=!0,this},Ce.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Ce.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Ce.prototype.getSelected=function(){var i=this;return this._selectedFeatureIds.values().map(function(s){return i.get(s)})},Ce.prototype.getSelectedCoordinates=function(){var i=this;return this._selectedCoordinates.map(function(s){return{coordinates:i.get(s.feature_id).getCoordinate(s.coord_path)}})},Ce.prototype.isSelected=function(i){return this._selectedFeatureIds.has(i)},Ce.prototype.setFeatureProperty=function(i,s,d){this.get(i).setProperty(s,d),this.featureChanged(i)},Ce.prototype.storeMapConfig=function(){var i=this;N.forEach(function(s){i.ctx.map[s]&&(i._mapInitialConfig[s]=i.ctx.map[s].isEnabled())})},Ce.prototype.restoreMapConfig=function(){var i=this;Object.keys(this._mapInitialConfig).forEach(function(s){i._mapInitialConfig[s]?i.ctx.map[s].enable():i.ctx.map[s].disable()})},Ce.prototype.getInitialConfigValue=function(i){return this._mapInitialConfig[i]===void 0||this._mapInitialConfig[i]};var Rt=function(){for(var i=arguments,s={},d=0;d<arguments.length;d++){var g=i[d];for(var b in g)Ll.call(g,b)&&(s[b]=g[b])}return s},Ll=Object.prototype.hasOwnProperty,Ml=["mode","feature","mouse"];function Pl(i){var s=null,d=null,g={onRemove:function(){return i.map.off("load",g.connect),clearInterval(d),g.removeLayers(),i.store.restoreMapConfig(),i.ui.removeButtons(),i.events.removeEventListeners(),i.ui.clearMapClasses(),i.map=null,i.container=null,i.store=null,s&&s.parentNode&&s.parentNode.removeChild(s),s=null,this},connect:function(){i.map.off("load",g.connect),clearInterval(d),g.addLayers(),i.store.storeMapConfig(),i.events.addEventListeners()},onAdd:function(b){var _=b.fire;return b.fire=function(E,U){var q=arguments;return _.length===1&&arguments.length!==1&&(q=[Rt({},{type:E},U)]),_.apply(b,q)},i.map=b,i.events=function(E){var U=Object.keys(E.options.modes).reduce(function(P,ee){return P[ee]=xl(E.options.modes[ee]),P},{}),q={},X={},W={},J=null,le=null;W.drag=function(P,ee){ee({point:P.point,time:new Date().getTime()})?(E.ui.queueMapClasses({mouse:y.DRAG}),le.drag(P)):P.originalEvent.stopPropagation()},W.mousedrag=function(P){W.drag(P,function(ee){return!ke(q,ee)})},W.touchdrag=function(P){W.drag(P,function(ee){return!De(X,ee)})},W.mousemove=function(P){if((P.originalEvent.buttons!==void 0?P.originalEvent.buttons:P.originalEvent.which)===1)return W.mousedrag(P);var ee=Be(P,E);P.featureTarget=ee,le.mousemove(P)},W.mousedown=function(P){q={time:new Date().getTime(),point:P.point};var ee=Be(P,E);P.featureTarget=ee,le.mousedown(P)},W.mouseup=function(P){var ee=Be(P,E);P.featureTarget=ee,ke(q,{point:P.point,time:new Date().getTime()})?le.click(P):le.mouseup(P)},W.mouseout=function(P){le.mouseout(P)},W.touchstart=function(P){if(E.options.touchEnabled){X={time:new Date().getTime(),point:P.point};var ee=R.touch(P,null,E)[0];P.featureTarget=ee,le.touchstart(P)}},W.touchmove=function(P){if(E.options.touchEnabled)return le.touchmove(P),W.touchdrag(P)},W.touchend=function(P){if(E.options.touchEnabled){var ee=R.touch(P,null,E)[0];P.featureTarget=ee,De(X,{time:new Date().getTime(),point:P.point})?le.tap(P):le.touchend(P)}};var Re=function(P){return!(P===8||P===46||P>=48&&P<=57)};function ue(P,ee,ye){ye===void 0&&(ye={}),le.stop();var We=U[P];if(We===void 0)throw new Error(P+" is not valid");J=P;var Ge=We(E,ee);le=t(Ge,E),ye.silent||E.map.fire(O.MODE_CHANGE,{mode:P}),E.store.setDirty(),E.store.render()}W.keydown=function(P){(P.srcElement||P.target).classList[0]==="mapboxgl-canvas"&&(P.keyCode!==8&&P.keyCode!==46||!E.options.controls.trash?Re(P.keyCode)?le.keydown(P):P.keyCode===49&&E.options.controls.point?ue(S.DRAW_POINT):P.keyCode===50&&E.options.controls.line_string?ue(S.DRAW_LINE_STRING):P.keyCode===51&&E.options.controls.polygon&&ue(S.DRAW_POLYGON):(P.preventDefault(),le.trash()))},W.keyup=function(P){Re(P.keyCode)&&le.keyup(P)},W.zoomend=function(){E.store.changeZoom()},W.data=function(P){if(P.dataType==="style"){var ee=E.setup,ye=E.map,We=E.options,Ge=E.store;We.styles.some(function(jr){return ye.getLayer(jr.id)})||(ee.addLayers(),Ge.setDirty(),Ge.render())}};var ze={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){J=E.options.defaultMode,le=t(U[J](E),E)},changeMode:ue,actionable:function(P){var ee=!1;Object.keys(P).forEach(function(ye){if(ze[ye]===void 0)throw new Error("Invalid action type");ze[ye]!==P[ye]&&(ee=!0),ze[ye]=P[ye]}),ee&&E.map.fire(O.ACTIONABLE,{actions:ze})},currentModeName:function(){return J},currentModeRender:function(P,ee){return le.render(P,ee)},fire:function(P,ee){W[P]&&W[P](ee)},addEventListeners:function(){E.map.on("mousemove",W.mousemove),E.map.on("mousedown",W.mousedown),E.map.on("mouseup",W.mouseup),E.map.on("data",W.data),E.map.on("touchmove",W.touchmove,{passive:!0}),E.map.on("touchstart",W.touchstart,{passive:!0}),E.map.on("touchend",W.touchend,{passive:!0}),E.container.addEventListener("mouseout",W.mouseout),E.options.keybindings&&(E.container.addEventListener("keydown",W.keydown),E.container.addEventListener("keyup",W.keyup))},removeEventListeners:function(){E.map.off("mousemove",W.mousemove),E.map.off("mousedown",W.mousedown),E.map.off("mouseup",W.mouseup),E.map.off("data",W.data),E.map.off("touchmove",W.touchmove),E.map.off("touchstart",W.touchstart),E.map.off("touchend",W.touchend),E.container.removeEventListener("mouseout",W.mouseout),E.options.keybindings&&(E.container.removeEventListener("keydown",W.keydown),E.container.removeEventListener("keyup",W.keyup))},trash:function(P){le.trash(P)},combineFeatures:function(){le.combineFeatures()},uncombineFeatures:function(){le.uncombineFeatures()},getMode:function(){return J}}}(i),i.ui=function(E){var U={},q=null,X={mode:null,feature:null,mouse:null},W={mode:null,feature:null,mouse:null};function J(P){W=Rt(W,P)}function le(){var P,ee;if(E.container){var ye=[],We=[];Ml.forEach(function(Ge){W[Ge]!==X[Ge]&&(ye.push(Ge+"-"+X[Ge]),W[Ge]!==null&&We.push(Ge+"-"+W[Ge]))}),ye.length>0&&(P=E.container.classList).remove.apply(P,ye),We.length>0&&(ee=E.container.classList).add.apply(ee,We),X=Rt(X,W)}}function Re(P,ee){ee===void 0&&(ee={});var ye=document.createElement("button");return ye.className=h.CONTROL_BUTTON+" "+ee.className,ye.setAttribute("title",ee.title),ee.container.appendChild(ye),ye.addEventListener("click",function(We){if(We.preventDefault(),We.stopPropagation(),We.target===q)return ue(),void ee.onDeactivate();ze(P),ee.onActivate()},!0),ye}function ue(){q&&(q.classList.remove(h.ACTIVE_BUTTON),q=null)}function ze(P){ue();var ee=U[P];ee&&ee&&P!=="trash"&&(ee.classList.add(h.ACTIVE_BUTTON),q=ee)}return{setActiveButton:ze,queueMapClasses:J,updateMapClasses:le,clearMapClasses:function(){J({mode:null,feature:null,mouse:null}),le()},addButtons:function(){var P=E.options.controls,ee=document.createElement("div");return ee.className=h.CONTROL_GROUP+" "+h.CONTROL_BASE,P&&(P[p.LINE]&&(U[p.LINE]=Re(p.LINE,{container:ee,className:h.CONTROL_BUTTON_LINE,title:"LineString tool "+(E.options.keybindings?"(l)":""),onActivate:function(){return E.events.changeMode(S.DRAW_LINE_STRING)},onDeactivate:function(){return E.events.trash()}})),P[p.POLYGON]&&(U[p.POLYGON]=Re(p.POLYGON,{container:ee,className:h.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(E.options.keybindings?"(p)":""),onActivate:function(){return E.events.changeMode(S.DRAW_POLYGON)},onDeactivate:function(){return E.events.trash()}})),P[p.POINT]&&(U[p.POINT]=Re(p.POINT,{container:ee,className:h.CONTROL_BUTTON_POINT,title:"Marker tool "+(E.options.keybindings?"(m)":""),onActivate:function(){return E.events.changeMode(S.DRAW_POINT)},onDeactivate:function(){return E.events.trash()}})),P.trash&&(U.trash=Re("trash",{container:ee,className:h.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){E.events.trash()}})),P.combine_features&&(U.combine_features=Re("combineFeatures",{container:ee,className:h.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){E.events.combineFeatures()}})),P.uncombine_features&&(U.uncombine_features=Re("uncombineFeatures",{container:ee,className:h.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){E.events.uncombineFeatures()}}))),ee},removeButtons:function(){Object.keys(U).forEach(function(P){var ee=U[P];ee.parentNode&&ee.parentNode.removeChild(ee),delete U[P]})}}}(i),i.container=b.getContainer(),i.store=new Ce(i),s=i.ui.addButtons(),i.options.boxSelect&&(b.boxZoom.disable(),b.dragPan.disable(),b.dragPan.enable()),b.loaded()?g.connect():(b.on("load",g.connect),d=setInterval(function(){b.loaded()&&g.connect()},16)),i.events.start(),s},addLayers:function(){i.map.addSource(v.COLD,{data:{type:m.FEATURE_COLLECTION,features:[]},type:"geojson"}),i.map.addSource(v.HOT,{data:{type:m.FEATURE_COLLECTION,features:[]},type:"geojson"}),i.options.styles.forEach(function(b){i.map.addLayer(b)}),i.store.setDirty(!0),i.store.render()},removeLayers:function(){i.options.styles.forEach(function(b){i.map.getLayer(b.id)&&i.map.removeLayer(b.id)}),i.map.getSource(v.COLD)&&i.map.removeSource(v.COLD),i.map.getSource(v.HOT)&&i.map.removeSource(v.HOT)}};return i.setup=g,g}var yi=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Un(i){return function(s){var d=s.featureTarget;return!!d&&!!d.properties&&d.properties.meta===i}}function Ei(i){return!!i.originalEvent&&!!i.originalEvent.shiftKey&&i.originalEvent.button===0}function Yt(i){return!!i.featureTarget&&!!i.featureTarget.properties&&i.featureTarget.properties.active===C.ACTIVE&&i.featureTarget.properties.meta===I.FEATURE}function Ar(i){return!!i.featureTarget&&!!i.featureTarget.properties&&i.featureTarget.properties.active===C.INACTIVE&&i.featureTarget.properties.meta===I.FEATURE}function jn(i){return i.featureTarget===void 0}function wi(i){return!!i.featureTarget&&!!i.featureTarget.properties&&i.featureTarget.properties.meta===I.FEATURE}function bn(i){var s=i.featureTarget;return!!s&&!!s.properties&&s.properties.meta===I.VERTEX}function Bn(i){return!!i.originalEvent&&i.originalEvent.shiftKey===!0}function zn(i){return i.keyCode===27}function Gn(i){return i.keyCode===13}var Al=Object.freeze({__proto__:null,isOfMetaType:Un,isShiftMousedown:Ei,isActiveFeature:Yt,isInactiveFeature:Ar,noTarget:jn,isFeature:wi,isVertex:bn,isShiftDown:Bn,isEscapeKey:zn,isEnterKey:Gn,isTrue:function(){return!0}}),Nl=on;function on(i,s){this.x=i,this.y=s}function Nr(i,s){var d=s.getBoundingClientRect();return new Nl(i.clientX-d.left-(s.clientLeft||0),i.clientY-d.top-(s.clientTop||0))}function ln(i,s,d,g){return{type:m.FEATURE,properties:{meta:I.VERTEX,parent:i,coord_path:d,active:g?C.ACTIVE:C.INACTIVE},geometry:{type:m.POINT,coordinates:s}}}function Si(i,s,d){var g=s.geometry.coordinates,b=d.geometry.coordinates;if(g[1]>85||g[1]<A||b[1]>85||b[1]<A)return null;var _={lng:(g[0]+b[0])/2,lat:(g[1]+b[1])/2};return{type:m.FEATURE,properties:{meta:I.MIDPOINT,parent:i,lng:_.lng,lat:_.lat,coord_path:d.properties.coord_path},geometry:{type:m.POINT,coordinates:[_.lng,_.lat]}}}function Vn(i,s,d){s===void 0&&(s={}),d===void 0&&(d=null);var g,b=i.geometry,_=b.type,E=b.coordinates,U=i.properties&&i.properties.id,q=[];function X(J,le){var Re="",ue=null;J.forEach(function(ze,P){var ee=le!=null?le+"."+P:String(P),ye=ln(U,ze,ee,W(ee));if(s.midpoints&&ue){var We=Si(U,ue,ye);We&&q.push(We)}ue=ye;var Ge=JSON.stringify(ze);Re!==Ge&&q.push(ye),P===0&&(Re=Ge)})}function W(J){return!!s.selectedPaths&&s.selectedPaths.indexOf(J)!==-1}return _===m.POINT?q.push(ln(U,E,d,W(d))):_===m.POLYGON?E.forEach(function(J,le){X(J,d!==null?d+"."+le:String(le))}):_===m.LINE_STRING?X(E,d):_.indexOf(m.MULTI_PREFIX)===0&&(g=_.replace(m.MULTI_PREFIX,""),E.forEach(function(J,le){var Re={type:m.FEATURE,properties:i.properties,geometry:{type:g,coordinates:J}};q=q.concat(Vn(Re,s,le))})),q}on.prototype={clone:function(){return new on(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,s){return this.clone()._rotateAround(i,s)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var s=i.x-this.x,d=i.y-this.y;return s*s+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,s){return Math.atan2(this.x*s-this.y*i,this.x*i+this.y*s)},_matMult:function(i){var s=i[0]*this.x+i[1]*this.y,d=i[2]*this.x+i[3]*this.y;return this.x=s,this.y=d,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var s=Math.cos(i),d=Math.sin(i),g=s*this.x-d*this.y,b=d*this.x+s*this.y;return this.x=g,this.y=b,this},_rotateAround:function(i,s){var d=Math.cos(i),g=Math.sin(i),b=s.x+d*(this.x-s.x)-g*(this.y-s.y),_=s.y+g*(this.x-s.x)+d*(this.y-s.y);return this.x=b,this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},on.convert=function(i){return i instanceof on?i:Array.isArray(i)?new on(i[0],i[1]):i};var bt={enable:function(i){setTimeout(function(){i.map&&i.map.doubleClickZoom&&i._ctx&&i._ctx.store&&i._ctx.store.getInitialConfigValue&&i._ctx.store.getInitialConfigValue("doubleClickZoom")&&i.map.doubleClickZoom.enable()},0)},disable:function(i){setTimeout(function(){i.map&&i.map.doubleClickZoom&&i.map.doubleClickZoom.disable()},0)}},vn={},Rl={get exports(){return vn},set exports(i){vn=i}},Ti=function(i){if(!i||!i.type)return null;var s=Fl[i.type];if(!s)return null;if(s==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:i}]};if(s==="feature")return{type:"FeatureCollection",features:[i]};if(s==="featurecollection")return i},Fl={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Dl=Object.freeze({__proto__:null,default:function i(s){switch(s&&s.type||null){case"FeatureCollection":return s.features=s.features.reduce(function(d,g){return d.concat(i(g))},[]),s;case"Feature":return s.geometry?i(s.geometry).map(function(d){var g={type:"Feature",properties:JSON.parse(JSON.stringify(s.properties)),geometry:d};return s.id!==void 0&&(g.id=s.id),g}):[s];case"MultiPoint":return s.coordinates.map(function(d){return{type:"Point",coordinates:d}});case"MultiPolygon":return s.coordinates.map(function(d){return{type:"Polygon",coordinates:d}});case"MultiLineString":return s.coordinates.map(function(d){return{type:"LineString",coordinates:d}});case"GeometryCollection":return s.geometries.map(i).reduce(function(d,g){return d.concat(g)},[]);case"Point":case"Polygon":case"LineString":return[s]}}}),Ul=Ti,qn=r(Dl),jl=function(i){return function s(d){return Array.isArray(d)&&d.length&&typeof d[0]=="number"?[d]:d.reduce(function(g,b){return Array.isArray(b)&&Array.isArray(b[0])?g.concat(s(b)):(g.push(b),g)},[])}(i)};qn instanceof Function||(qn=qn.default);var Rr={},Bl={get exports(){return Rr},set exports(i){Rr=i}}.exports=function(i){return new ht(i)};function ht(i){this.value=i}function ki(i,s,d){var g=[],b=[],_=!0;return function E(U){var q=d?Ci(U):U,X={},W=!0,J={node:q,node_:U,path:[].concat(g),parent:b[b.length-1],parents:b,key:g.slice(-1)[0],isRoot:g.length===0,level:g.length,circular:null,update:function(ue,ze){J.isRoot||(J.parent.node[J.key]=ue),J.node=ue,ze&&(W=!1)},delete:function(ue){delete J.parent.node[J.key],ue&&(W=!1)},remove:function(ue){Ii(J.parent.node)?J.parent.node.splice(J.key,1):delete J.parent.node[J.key],ue&&(W=!1)},keys:null,before:function(ue){X.before=ue},after:function(ue){X.after=ue},pre:function(ue){X.pre=ue},post:function(ue){X.post=ue},stop:function(){_=!1},block:function(){W=!1}};if(!_)return J;function le(){if(typeof J.node=="object"&&J.node!==null){J.keys&&J.node_===J.node||(J.keys=Jn(J.node)),J.isLeaf=J.keys.length==0;for(var ue=0;ue<b.length;ue++)if(b[ue].node_===U){J.circular=b[ue];break}}else J.isLeaf=!0,J.keys=null;J.notLeaf=!J.isLeaf,J.notRoot=!J.isRoot}le();var Re=s.call(J,J.node);return Re!==void 0&&J.update&&J.update(Re),X.before&&X.before.call(J,J.node),W&&(typeof J.node!="object"||J.node===null||J.circular||(b.push(J),le(),Yn(J.keys,function(ue,ze){g.push(ue),X.pre&&X.pre.call(J,J.node[ue],ue);var P=E(J.node[ue]);d&&Hn.call(J.node,ue)&&(J.node[ue]=P.node),P.isLast=ze==J.keys.length-1,P.isFirst=ze==0,X.post&&X.post.call(J,P),g.pop()}),b.pop()),X.after&&X.after.call(J,J.node)),J}(i).node}function Ci(i){if(typeof i=="object"&&i!==null){var s;if(Ii(i))s=[];else if(an(i)==="[object Date]")s=new Date(i.getTime?i.getTime():i);else if(function(b){return an(b)==="[object RegExp]"}(i))s=new RegExp(i);else if(function(b){return an(b)==="[object Error]"}(i))s={message:i.message};else if(function(b){return an(b)==="[object Boolean]"}(i))s=new Boolean(i);else if(function(b){return an(b)==="[object Number]"}(i))s=new Number(i);else if(function(b){return an(b)==="[object String]"}(i))s=new String(i);else if(Object.create&&Object.getPrototypeOf)s=Object.create(Object.getPrototypeOf(i));else if(i.constructor===Object)s={};else{var d=i.constructor&&i.constructor.prototype||i.__proto__||{},g=function(){};g.prototype=d,s=new g}return Yn(Jn(i),function(b){s[b]=i[b]}),s}return i}ht.prototype.get=function(i){for(var s=this.value,d=0;d<i.length;d++){var g=i[d];if(!s||!Hn.call(s,g)){s=void 0;break}s=s[g]}return s},ht.prototype.has=function(i){for(var s=this.value,d=0;d<i.length;d++){var g=i[d];if(!s||!Hn.call(s,g))return!1;s=s[g]}return!0},ht.prototype.set=function(i,s){for(var d=this.value,g=0;g<i.length-1;g++){var b=i[g];Hn.call(d,b)||(d[b]={}),d=d[b]}return d[i[g]]=s,s},ht.prototype.map=function(i){return ki(this.value,i,!0)},ht.prototype.forEach=function(i){return this.value=ki(this.value,i,!1),this.value},ht.prototype.reduce=function(i,s){var d=arguments.length===1,g=d?this.value:s;return this.forEach(function(b){this.isRoot&&d||(g=i.call(this,g,b))}),g},ht.prototype.paths=function(){var i=[];return this.forEach(function(s){i.push(this.path)}),i},ht.prototype.nodes=function(){var i=[];return this.forEach(function(s){i.push(this.node)}),i},ht.prototype.clone=function(){var i=[],s=[];return function d(g){for(var b=0;b<i.length;b++)if(i[b]===g)return s[b];if(typeof g=="object"&&g!==null){var _=Ci(g);return i.push(g),s.push(_),Yn(Jn(g),function(E){_[E]=d(g[E])}),i.pop(),s.pop(),_}return g}(this.value)};var Jn=Object.keys||function(i){var s=[];for(var d in i)s.push(d);return s};function an(i){return Object.prototype.toString.call(i)}var Ii=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"},Yn=function(i,s){if(i.forEach)return i.forEach(s);for(var d=0;d<i.length;d++)s(i[d],d,i)};Yn(Jn(ht.prototype),function(i){Bl[i]=function(s){var d=[].slice.call(arguments,1),g=new ht(s);return g[i].apply(g,d)}});var Hn=Object.hasOwnProperty||function(i,s){return s in i},zl=et;function et(i){if(!(this instanceof et))return new et(i);this._bbox=i||[1/0,1/0,-1/0,-1/0],this._valid=!!i}et.prototype.include=function(i){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],i[0]),this._bbox[1]=Math.min(this._bbox[1],i[1]),this._bbox[2]=Math.max(this._bbox[2],i[0]),this._bbox[3]=Math.max(this._bbox[3],i[1]),this},et.prototype.equals=function(i){var s;return s=i instanceof et?i.bbox():i,this._bbox[0]==s[0]&&this._bbox[1]==s[1]&&this._bbox[2]==s[2]&&this._bbox[3]==s[3]},et.prototype.center=function(i){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},et.prototype.union=function(i){var s;return this._valid=!0,s=i instanceof et?i.bbox():i,this._bbox[0]=Math.min(this._bbox[0],s[0]),this._bbox[1]=Math.min(this._bbox[1],s[1]),this._bbox[2]=Math.max(this._bbox[2],s[2]),this._bbox[3]=Math.max(this._bbox[3],s[3]),this},et.prototype.bbox=function(){return this._valid?this._bbox:null},et.prototype.contains=function(i){if(!i)return this._fastContains();if(!this._valid)return null;var s=i[0],d=i[1];return this._bbox[0]<=s&&this._bbox[1]<=d&&this._bbox[2]>=s&&this._bbox[3]>=d},et.prototype.intersect=function(i){return this._valid?(s=i instanceof et?i.bbox():i,!(this._bbox[0]>s[2]||this._bbox[2]<s[0]||this._bbox[3]<s[1]||this._bbox[1]>s[3])):null;var s},et.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var i="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",i)},et.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Gl=function(i){if(!i)return[];var s=qn(Ul(i)),d=[];return s.features.forEach(function(g){g.geometry&&(d=d.concat(jl(g.geometry.coordinates)))}),d},Vl=Rr,ql=zl,xi={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Jl=Object.keys(xi);function Fr(i){for(var s=ql(),d=Gl(i),g=0;g<d.length;g++)s.include(d[g]);return s}Rl.exports=function(i){return Fr(i).bbox()},vn.polygon=function(i){return Fr(i).polygon()},vn.bboxify=function(i){return Vl(i).map(function(s){s&&Jl.some(function(d){return!!s[d]&&xi[d].indexOf(s.type)!==-1})&&(s.bbox=Fr(s).bbox(),this.update(s))})};var Wn=-90;function Dr(i,s){var d=Wn,g=90,b=Wn,_=90,E=270,U=-270;i.forEach(function(X){var W=vn(X),J=W[1],le=W[3],Re=W[0],ue=W[2];J>d&&(d=J),le<g&&(g=le),le>b&&(b=le),J<_&&(_=J),Re<E&&(E=Re),ue>U&&(U=ue)});var q=s;return d+q.lat>85&&(q.lat=85-d),b+q.lat>90&&(q.lat=90-b),g+q.lat<-85&&(q.lat=-85-g),_+q.lat<Wn&&(q.lat=Wn-_),E+q.lng<=-270&&(q.lng+=360*Math.ceil(Math.abs(q.lng)/360)),U+q.lng>=270&&(q.lng-=360*Math.ceil(Math.abs(q.lng)/360)),q}function Ur(i,s){var d=Dr(i.map(function(g){return g.toGeoJSON()}),s);i.forEach(function(g){var b,_=g.getCoordinates(),E=function(q){var X={lng:q[0]+d.lng,lat:q[1]+d.lat};return[X.lng,X.lat]},U=function(q){return q.map(function(X){return E(X)})};g.type===m.POINT?b=E(_):g.type===m.LINE_STRING||g.type===m.MULTI_POINT?b=_.map(E):g.type===m.POLYGON||g.type===m.MULTI_LINE_STRING?b=_.map(U):g.type===m.MULTI_POLYGON&&(b=_.map(function(q){return q.map(function(X){return U(X)})})),g.incomingCoords(b)})}var Je={onSetup:function(i){var s=this,d={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:i.featureIds||[]};return this.setSelected(d.initiallySelectedFeatureIds.filter(function(g){return s.getFeature(g)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),d},fireUpdate:function(){this.map.fire(O.UPDATE,{action:j.MOVE,features:this.getSelected().map(function(i){return i.toGeoJSON()})})},fireActionable:function(){var i=this,s=this.getSelected(),d=s.filter(function(U){return i.isInstanceOf("MultiFeature",U)}),g=!1;if(s.length>1){g=!0;var b=s[0].type.replace("Multi","");s.forEach(function(U){U.type.replace("Multi","")!==b&&(g=!1)})}var _=d.length>0,E=s.length>0;this.setActionableState({combineFeatures:g,uncombineFeatures:_,trash:E})},getUniqueIds:function(i){return i.length?i.map(function(s){return s.properties.id}).filter(function(s){return s!==void 0}).reduce(function(s,d){return s.add(d),s},new D).values():[]},stopExtendedInteractions:function(i){i.boxSelectElement&&(i.boxSelectElement.parentNode&&i.boxSelectElement.parentNode.removeChild(i.boxSelectElement),i.boxSelectElement=null),this.map.dragPan.enable(),i.boxSelecting=!1,i.canBoxSelect=!1,i.dragMoving=!1,i.canDragMove=!1},onStop:function(){bt.enable(this)},onMouseMove:function(i){return this.stopExtendedInteractions(i),!0},onMouseOut:function(i){return!i.dragMoving||this.fireUpdate()}};Je.onTap=Je.onClick=function(i,s){return jn(s)?this.clickAnywhere(i,s):Un(I.VERTEX)(s)?this.clickOnVertex(i,s):wi(s)?this.clickOnFeature(i,s):void 0},Je.clickAnywhere=function(i){var s=this,d=this.getSelectedIds();d.length&&(this.clearSelectedFeatures(),d.forEach(function(g){return s.doRender(g)})),bt.enable(this),this.stopExtendedInteractions(i)},Je.clickOnVertex=function(i,s){this.changeMode(S.DIRECT_SELECT,{featureId:s.featureTarget.properties.parent,coordPath:s.featureTarget.properties.coord_path,startPos:s.lngLat}),this.updateUIClasses({mouse:y.MOVE})},Je.startOnActiveFeature=function(i,s){this.stopExtendedInteractions(i),this.map.dragPan.disable(),this.doRender(s.featureTarget.properties.id),i.canDragMove=!0,i.dragMoveLocation=s.lngLat},Je.clickOnFeature=function(i,s){var d=this;bt.disable(this),this.stopExtendedInteractions(i);var g=Bn(s),b=this.getSelectedIds(),_=s.featureTarget.properties.id,E=this.isSelected(_);if(!g&&E&&this.getFeature(_).type!==m.POINT)return this.changeMode(S.DIRECT_SELECT,{featureId:_});E&&g?(this.deselect(_),this.updateUIClasses({mouse:y.POINTER}),b.length===1&&bt.enable(this)):!E&&g?(this.select(_),this.updateUIClasses({mouse:y.MOVE})):E||g||(b.forEach(function(U){return d.doRender(U)}),this.setSelected(_),this.updateUIClasses({mouse:y.MOVE})),this.doRender(_)},Je.onMouseDown=function(i,s){return Yt(s)?this.startOnActiveFeature(i,s):this.drawConfig.boxSelect&&Ei(s)?this.startBoxSelect(i,s):void 0},Je.startBoxSelect=function(i,s){this.stopExtendedInteractions(i),this.map.dragPan.disable(),i.boxSelectStartLocation=Nr(s.originalEvent,this.map.getContainer()),i.canBoxSelect=!0},Je.onTouchStart=function(i,s){if(Yt(s))return this.startOnActiveFeature(i,s)},Je.onDrag=function(i,s){return i.canDragMove?this.dragMove(i,s):this.drawConfig.boxSelect&&i.canBoxSelect?this.whileBoxSelect(i,s):void 0},Je.whileBoxSelect=function(i,s){i.boxSelecting=!0,this.updateUIClasses({mouse:y.ADD}),i.boxSelectElement||(i.boxSelectElement=document.createElement("div"),i.boxSelectElement.classList.add(h.BOX_SELECT),this.map.getContainer().appendChild(i.boxSelectElement));var d=Nr(s.originalEvent,this.map.getContainer()),g=Math.min(i.boxSelectStartLocation.x,d.x),b=Math.max(i.boxSelectStartLocation.x,d.x),_=Math.min(i.boxSelectStartLocation.y,d.y),E=Math.max(i.boxSelectStartLocation.y,d.y),U="translate("+g+"px, "+_+"px)";i.boxSelectElement.style.transform=U,i.boxSelectElement.style.WebkitTransform=U,i.boxSelectElement.style.width=b-g+"px",i.boxSelectElement.style.height=E-_+"px"},Je.dragMove=function(i,s){i.dragMoving=!0,s.originalEvent.stopPropagation();var d={lng:s.lngLat.lng-i.dragMoveLocation.lng,lat:s.lngLat.lat-i.dragMoveLocation.lat};Ur(this.getSelected(),d),i.dragMoveLocation=s.lngLat},Je.onTouchEnd=Je.onMouseUp=function(i,s){var d=this;if(i.dragMoving)this.fireUpdate();else if(i.boxSelecting){var g=[i.boxSelectStartLocation,Nr(s.originalEvent,this.map.getContainer())],b=this.featuresAt(null,g,"click"),_=this.getUniqueIds(b).filter(function(E){return!d.isSelected(E)});_.length&&(this.select(_),_.forEach(function(E){return d.doRender(E)}),this.updateUIClasses({mouse:y.MOVE}))}this.stopExtendedInteractions(i)},Je.toDisplayFeatures=function(i,s,d){s.properties.active=this.isSelected(s.properties.id)?C.ACTIVE:C.INACTIVE,d(s),this.fireActionable(),s.properties.active===C.ACTIVE&&s.geometry.type!==m.POINT&&Vn(s).forEach(d)},Je.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Je.onCombineFeatures=function(){var i=this.getSelected();if(!(i.length===0||i.length<2)){for(var s=[],d=[],g=i[0].type.replace("Multi",""),b=0;b<i.length;b++){var _=i[b];if(_.type.replace("Multi","")!==g)return;_.type.includes("Multi")?_.getCoordinates().forEach(function(U){s.push(U)}):s.push(_.getCoordinates()),d.push(_.toGeoJSON())}if(d.length>1){var E=this.newFeature({type:m.FEATURE,properties:d[0].properties,geometry:{type:"Multi"+g,coordinates:s}});this.addFeature(E),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([E.id]),this.map.fire(O.COMBINE_FEATURES,{createdFeatures:[E.toGeoJSON()],deletedFeatures:d})}this.fireActionable()}},Je.onUncombineFeatures=function(){var i=this,s=this.getSelected();if(s.length!==0){for(var d=[],g=[],b=function(E){var U=s[E];i.isInstanceOf("MultiFeature",U)&&(U.getFeatures().forEach(function(q){i.addFeature(q),q.properties=U.properties,d.push(q.toGeoJSON()),i.select([q.id])}),i.deleteFeature(U.id,{silent:!0}),g.push(U.toGeoJSON()))},_=0;_<s.length;_++)b(_);d.length>1&&this.map.fire(O.UNCOMBINE_FEATURES,{createdFeatures:d,deletedFeatures:g}),this.fireActionable()}};var Oi=Un(I.VERTEX),Yl=Un(I.MIDPOINT),Ft={fireUpdate:function(){this.map.fire(O.UPDATE,{action:j.CHANGE_COORDINATES,features:this.getSelected().map(function(i){return i.toGeoJSON()})})},fireActionable:function(i){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:i.selectedCoordPaths.length>0})},startDragging:function(i,s){this.map.dragPan.disable(),i.canDragMove=!0,i.dragMoveLocation=s.lngLat},stopDragging:function(i){this.map.dragPan.enable(),i.dragMoving=!1,i.canDragMove=!1,i.dragMoveLocation=null},onVertex:function(i,s){this.startDragging(i,s);var d=s.featureTarget.properties,g=i.selectedCoordPaths.indexOf(d.coord_path);Bn(s)||g!==-1?Bn(s)&&g===-1&&i.selectedCoordPaths.push(d.coord_path):i.selectedCoordPaths=[d.coord_path];var b=this.pathsToCoordinates(i.featureId,i.selectedCoordPaths);this.setSelectedCoordinates(b)},onMidpoint:function(i,s){this.startDragging(i,s);var d=s.featureTarget.properties;i.feature.addCoordinate(d.coord_path,d.lng,d.lat),this.fireUpdate(),i.selectedCoordPaths=[d.coord_path]},pathsToCoordinates:function(i,s){return s.map(function(d){return{feature_id:i,coord_path:d}})},onFeature:function(i,s){i.selectedCoordPaths.length===0?this.startDragging(i,s):this.stopDragging(i)},dragFeature:function(i,s,d){Ur(this.getSelected(),d),i.dragMoveLocation=s.lngLat},dragVertex:function(i,s,d){for(var g=i.selectedCoordPaths.map(function(U){return i.feature.getCoordinate(U)}),b=Dr(g.map(function(U){return{type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:U}}}),d),_=0;_<g.length;_++){var E=g[_];i.feature.updateCoordinate(i.selectedCoordPaths[_],E[0]+b.lng,E[1]+b.lat)}},clickNoTarget:function(){this.changeMode(S.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(S.SIMPLE_SELECT)},clickActiveFeature:function(i){i.selectedCoordPaths=[],this.clearSelectedCoordinates(),i.feature.changed()},onSetup:function(i){var s=i.featureId,d=this.getFeature(s);if(!d)throw new Error("You must provide a featureId to enter direct_select mode");if(d.type===m.POINT)throw new TypeError("direct_select mode doesn't handle point features");var g={featureId:s,feature:d,dragMoveLocation:i.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:i.coordPath?[i.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(s,g.selectedCoordPaths)),this.setSelected(s),bt.disable(this),this.setActionableState({trash:!0}),g},onStop:function(){bt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(i,s,d){i.featureId===s.properties.id?(s.properties.active=C.ACTIVE,d(s),Vn(s,{map:this.map,midpoints:!0,selectedPaths:i.selectedCoordPaths}).forEach(d)):(s.properties.active=C.INACTIVE,d(s)),this.fireActionable(i)},onTrash:function(i){i.selectedCoordPaths.sort(function(s,d){return d.localeCompare(s,"en",{numeric:!0})}).forEach(function(s){return i.feature.removeCoordinate(s)}),this.fireUpdate(),i.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(i),i.feature.isValid()===!1&&(this.deleteFeature([i.featureId]),this.changeMode(S.SIMPLE_SELECT,{}))},onMouseMove:function(i,s){var d=Yt(s),g=Oi(s),b=i.selectedCoordPaths.length===0;return d&&b||g&&!b?this.updateUIClasses({mouse:y.MOVE}):this.updateUIClasses({mouse:y.NONE}),this.stopDragging(i),!0},onMouseOut:function(i){return i.dragMoving&&this.fireUpdate(),!0}};Ft.onTouchStart=Ft.onMouseDown=function(i,s){return Oi(s)?this.onVertex(i,s):Yt(s)?this.onFeature(i,s):Yl(s)?this.onMidpoint(i,s):void 0},Ft.onDrag=function(i,s){if(i.canDragMove===!0){i.dragMoving=!0,s.originalEvent.stopPropagation();var d={lng:s.lngLat.lng-i.dragMoveLocation.lng,lat:s.lngLat.lat-i.dragMoveLocation.lat};i.selectedCoordPaths.length>0?this.dragVertex(i,s,d):this.dragFeature(i,s,d),i.dragMoveLocation=s.lngLat}},Ft.onClick=function(i,s){return jn(s)?this.clickNoTarget(i,s):Yt(s)?this.clickActiveFeature(i,s):Ar(s)?this.clickInactive(i,s):void this.stopDragging(i)},Ft.onTap=function(i,s){return jn(s)?this.clickNoTarget(i,s):Yt(s)?this.clickActiveFeature(i,s):Ar(s)?this.clickInactive(i,s):void 0},Ft.onTouchEnd=Ft.onMouseUp=function(i){i.dragMoving&&this.fireUpdate(),this.stopDragging(i)};var yt={};function Xn(i,s){return!!i.lngLat&&i.lngLat.lng===s[0]&&i.lngLat.lat===s[1]}yt.onSetup=function(){var i=this.newFeature({type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:[]}});return this.addFeature(i),this.clearSelectedFeatures(),this.updateUIClasses({mouse:y.ADD}),this.activateUIButton(p.POINT),this.setActionableState({trash:!0}),{point:i}},yt.stopDrawingAndRemove=function(i){this.deleteFeature([i.point.id],{silent:!0}),this.changeMode(S.SIMPLE_SELECT)},yt.onTap=yt.onClick=function(i,s){this.updateUIClasses({mouse:y.MOVE}),i.point.updateCoordinate("",s.lngLat.lng,s.lngLat.lat),this.map.fire(O.CREATE,{features:[i.point.toGeoJSON()]}),this.changeMode(S.SIMPLE_SELECT,{featureIds:[i.point.id]})},yt.onStop=function(i){this.activateUIButton(),i.point.getCoordinate().length||this.deleteFeature([i.point.id],{silent:!0})},yt.toDisplayFeatures=function(i,s,d){var g=s.properties.id===i.point.id;if(s.properties.active=g?C.ACTIVE:C.INACTIVE,!g)return d(s)},yt.onTrash=yt.stopDrawingAndRemove,yt.onKeyUp=function(i,s){if(zn(s)||Gn(s))return this.stopDrawingAndRemove(i,s)};var Ht={onSetup:function(){var i=this.newFeature({type:m.FEATURE,properties:{},geometry:{type:m.POLYGON,coordinates:[[]]}});return this.addFeature(i),this.clearSelectedFeatures(),bt.disable(this),this.updateUIClasses({mouse:y.ADD}),this.activateUIButton(p.POLYGON),this.setActionableState({trash:!0}),{polygon:i,currentVertexPosition:0}},clickAnywhere:function(i,s){if(i.currentVertexPosition>0&&Xn(s,i.polygon.coordinates[0][i.currentVertexPosition-1]))return this.changeMode(S.SIMPLE_SELECT,{featureIds:[i.polygon.id]});this.updateUIClasses({mouse:y.ADD}),i.polygon.updateCoordinate("0."+i.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),i.currentVertexPosition++,i.polygon.updateCoordinate("0."+i.currentVertexPosition,s.lngLat.lng,s.lngLat.lat)},clickOnVertex:function(i){return this.changeMode(S.SIMPLE_SELECT,{featureIds:[i.polygon.id]})},onMouseMove:function(i,s){i.polygon.updateCoordinate("0."+i.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),bn(s)&&this.updateUIClasses({mouse:y.POINTER})}};Ht.onTap=Ht.onClick=function(i,s){return bn(s)?this.clickOnVertex(i,s):this.clickAnywhere(i,s)},Ht.onKeyUp=function(i,s){zn(s)?(this.deleteFeature([i.polygon.id],{silent:!0}),this.changeMode(S.SIMPLE_SELECT)):Gn(s)&&this.changeMode(S.SIMPLE_SELECT,{featureIds:[i.polygon.id]})},Ht.onStop=function(i){this.updateUIClasses({mouse:y.NONE}),bt.enable(this),this.activateUIButton(),this.getFeature(i.polygon.id)!==void 0&&(i.polygon.removeCoordinate("0."+i.currentVertexPosition),i.polygon.isValid()?this.map.fire(O.CREATE,{features:[i.polygon.toGeoJSON()]}):(this.deleteFeature([i.polygon.id],{silent:!0}),this.changeMode(S.SIMPLE_SELECT,{},{silent:!0})))},Ht.toDisplayFeatures=function(i,s,d){var g=s.properties.id===i.polygon.id;if(s.properties.active=g?C.ACTIVE:C.INACTIVE,!g)return d(s);if(s.geometry.coordinates.length!==0){var b=s.geometry.coordinates[0].length;if(!(b<3)){if(s.properties.meta=I.FEATURE,d(ln(i.polygon.id,s.geometry.coordinates[0][0],"0.0",!1)),b>3){var _=s.geometry.coordinates[0].length-3;d(ln(i.polygon.id,s.geometry.coordinates[0][_],"0."+_,!1))}if(b<=4){var E=[[s.geometry.coordinates[0][0][0],s.geometry.coordinates[0][0][1]],[s.geometry.coordinates[0][1][0],s.geometry.coordinates[0][1][1]]];if(d({type:m.FEATURE,properties:s.properties,geometry:{coordinates:E,type:m.LINE_STRING}}),b===3)return}return d(s)}}},Ht.onTrash=function(i){this.deleteFeature([i.polygon.id],{silent:!0}),this.changeMode(S.SIMPLE_SELECT)};var Wt={onSetup:function(i){var s,d,g=(i=i||{}).featureId,b="forward";if(g){if(!(s=this.getFeature(g)))throw new Error("Could not find a feature with the provided featureId");var _=i.from;if(_&&_.type==="Feature"&&_.geometry&&_.geometry.type==="Point"&&(_=_.geometry),_&&_.type==="Point"&&_.coordinates&&_.coordinates.length===2&&(_=_.coordinates),!_||!Array.isArray(_))throw new Error("Please use the `from` property to indicate which point to continue the line from");var E=s.coordinates.length-1;if(s.coordinates[E][0]===_[0]&&s.coordinates[E][1]===_[1])d=E+1,s.addCoordinate.apply(s,[d].concat(s.coordinates[E]));else{if(s.coordinates[0][0]!==_[0]||s.coordinates[0][1]!==_[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");b="backwards",d=0,s.addCoordinate.apply(s,[d].concat(s.coordinates[0]))}}else s=this.newFeature({type:m.FEATURE,properties:{},geometry:{type:m.LINE_STRING,coordinates:[]}}),d=0,this.addFeature(s);return this.clearSelectedFeatures(),bt.disable(this),this.updateUIClasses({mouse:y.ADD}),this.activateUIButton(p.LINE),this.setActionableState({trash:!0}),{line:s,currentVertexPosition:d,direction:b}},clickAnywhere:function(i,s){if(i.currentVertexPosition>0&&Xn(s,i.line.coordinates[i.currentVertexPosition-1])||i.direction==="backwards"&&Xn(s,i.line.coordinates[i.currentVertexPosition+1]))return this.changeMode(S.SIMPLE_SELECT,{featureIds:[i.line.id]});this.updateUIClasses({mouse:y.ADD}),i.line.updateCoordinate(i.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),i.direction==="forward"?(i.currentVertexPosition++,i.line.updateCoordinate(i.currentVertexPosition,s.lngLat.lng,s.lngLat.lat)):i.line.addCoordinate(0,s.lngLat.lng,s.lngLat.lat)},clickOnVertex:function(i){return this.changeMode(S.SIMPLE_SELECT,{featureIds:[i.line.id]})},onMouseMove:function(i,s){i.line.updateCoordinate(i.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),bn(s)&&this.updateUIClasses({mouse:y.POINTER})}};Wt.onTap=Wt.onClick=function(i,s){if(bn(s))return this.clickOnVertex(i,s);this.clickAnywhere(i,s)},Wt.onKeyUp=function(i,s){Gn(s)?this.changeMode(S.SIMPLE_SELECT,{featureIds:[i.line.id]}):zn(s)&&(this.deleteFeature([i.line.id],{silent:!0}),this.changeMode(S.SIMPLE_SELECT))},Wt.onStop=function(i){bt.enable(this),this.activateUIButton(),this.getFeature(i.line.id)!==void 0&&(i.line.removeCoordinate(""+i.currentVertexPosition),i.line.isValid()?this.map.fire(O.CREATE,{features:[i.line.toGeoJSON()]}):(this.deleteFeature([i.line.id],{silent:!0}),this.changeMode(S.SIMPLE_SELECT,{},{silent:!0})))},Wt.onTrash=function(i){this.deleteFeature([i.line.id],{silent:!0}),this.changeMode(S.SIMPLE_SELECT)},Wt.toDisplayFeatures=function(i,s,d){var g=s.properties.id===i.line.id;if(s.properties.active=g?C.ACTIVE:C.INACTIVE,!g)return d(s);s.geometry.coordinates.length<2||(s.properties.meta=I.FEATURE,d(ln(i.line.id,s.geometry.coordinates[i.direction==="forward"?s.geometry.coordinates.length-2:1],""+(i.direction==="forward"?s.geometry.coordinates.length-2:1),!1)),d(s))};var Li={simple_select:Je,direct_select:Ft,draw_point:yt,draw_polygon:Ht,draw_line_string:Wt},Hl={defaultMode:S.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:yi,modes:Li,controls:{},userProperties:!1},Wl={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Xl={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Mi(i,s){return i.map(function(d){return d.source?d:Rt(d,{id:d.id+"."+s,source:s==="hot"?v.HOT:v.COLD})})}var Zn={};(function(i,s){var d="__lodash_hash_undefined__",g=9007199254740991,b="[object Arguments]",_="[object Array]",E="[object Boolean]",U="[object Date]",q="[object Error]",X="[object Function]",W="[object Map]",J="[object Number]",le="[object Object]",Re="[object Promise]",ue="[object RegExp]",ze="[object Set]",P="[object String]",ee="[object Symbol]",ye="[object WeakMap]",We="[object ArrayBuffer]",Ge="[object DataView]",jr=/^\[object .+?Constructor\]$/,ea=/^(?:0|[1-9]\d*)$/,Ie={};Ie["[object Float32Array]"]=Ie["[object Float64Array]"]=Ie["[object Int8Array]"]=Ie["[object Int16Array]"]=Ie["[object Int32Array]"]=Ie["[object Uint8Array]"]=Ie["[object Uint8ClampedArray]"]=Ie["[object Uint16Array]"]=Ie["[object Uint32Array]"]=!0,Ie[b]=Ie[_]=Ie[We]=Ie[E]=Ie[Ge]=Ie[U]=Ie[q]=Ie[X]=Ie[W]=Ie[J]=Ie[le]=Ie[ue]=Ie[ze]=Ie[P]=Ie[ye]=!1;var Ai=typeof Cn=="object"&&Cn&&Cn.Object===Object&&Cn,ta=typeof self=="object"&&self&&self.Object===Object&&self,It=Ai||ta||Function("return this")(),Ni=s&&!s.nodeType&&s,Ri=Ni&&i&&!i.nodeType&&i,Fi=Ri&&Ri.exports===Ni,Br=Fi&&Ai.process,Di=function(){try{return Br&&Br.binding&&Br.binding("util")}catch{}}(),Ui=Di&&Di.isTypedArray;function na(w,x){for(var Y=-1,ne=w==null?0:w.length;++Y<ne;)if(x(w[Y],Y,w))return!0;return!1}function ra(w){var x=-1,Y=Array(w.size);return w.forEach(function(ne,xe){Y[++x]=[xe,ne]}),Y}function ia(w){var x=-1,Y=Array(w.size);return w.forEach(function(ne){Y[++x]=ne}),Y}var ji,Bi,zi,oa=Array.prototype,la=Function.prototype,Qn=Object.prototype,zr=It["__core-js_shared__"],Gi=la.toString,Et=Qn.hasOwnProperty,Vi=(ji=/[^.]+$/.exec(zr&&zr.keys&&zr.keys.IE_PROTO||""))?"Symbol(src)_1."+ji:"",qi=Qn.toString,aa=RegExp("^"+Gi.call(Et).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ji=Fi?It.Buffer:void 0,$n=It.Symbol,Yi=It.Uint8Array,Hi=Qn.propertyIsEnumerable,sa=oa.splice,Xt=$n?$n.toStringTag:void 0,Wi=Object.getOwnPropertySymbols,ua=Ji?Ji.isBuffer:void 0,fa=(Bi=Object.keys,zi=Object,function(w){return Bi(zi(w))}),Gr=sn(It,"DataView"),_n=sn(It,"Map"),Vr=sn(It,"Promise"),qr=sn(It,"Set"),Jr=sn(It,"WeakMap"),yn=sn(Object,"create"),ca=Qt(Gr),da=Qt(_n),ha=Qt(Vr),pa=Qt(qr),ga=Qt(Jr),Xi=$n?$n.prototype:void 0,Yr=Xi?Xi.valueOf:void 0;function Zt(w){var x=-1,Y=w==null?0:w.length;for(this.clear();++x<Y;){var ne=w[x];this.set(ne[0],ne[1])}}function xt(w){var x=-1,Y=w==null?0:w.length;for(this.clear();++x<Y;){var ne=w[x];this.set(ne[0],ne[1])}}function Kt(w){var x=-1,Y=w==null?0:w.length;for(this.clear();++x<Y;){var ne=w[x];this.set(ne[0],ne[1])}}function er(w){var x=-1,Y=w==null?0:w.length;for(this.__data__=new Kt;++x<Y;)this.add(w[x])}function Dt(w){var x=this.__data__=new xt(w);this.size=x.size}function ma(w,x){var Y=rr(w),ne=!Y&&Ea(w),xe=!Y&&!ne&&Hr(w),me=!Y&&!ne&&!xe&&io(w),je=Y||ne||xe||me,Ve=je?function(He,wt){for(var Ot=-1,tt=Array(He);++Ot<He;)tt[Ot]=wt(Ot);return tt}(w.length,String):[],vt=Ve.length;for(var Ye in w)!x&&!Et.call(w,Ye)||je&&(Ye=="length"||xe&&(Ye=="offset"||Ye=="parent")||me&&(Ye=="buffer"||Ye=="byteLength"||Ye=="byteOffset")||ya(Ye,vt))||Ve.push(Ye);return Ve}function tr(w,x){for(var Y=w.length;Y--;)if(eo(w[Y][0],x))return Y;return-1}function En(w){return w==null?w===void 0?"[object Undefined]":"[object Null]":Xt&&Xt in Object(w)?function(x){var Y=Et.call(x,Xt),ne=x[Xt];try{x[Xt]=void 0;var xe=!0}catch{}var me=qi.call(x);return xe&&(Y?x[Xt]=ne:delete x[Xt]),me}(w):function(x){return qi.call(x)}(w)}function Zi(w){return wn(w)&&En(w)==b}function Ki(w,x,Y,ne,xe){return w===x||(w==null||x==null||!wn(w)&&!wn(x)?w!=w&&x!=x:function(me,je,Ve,vt,Ye,He){var wt=rr(me),Ot=rr(je),tt=wt?_:Ut(me),Lt=Ot?_:Ut(je),un=(tt=tt==b?le:tt)==le,ir=(Lt=Lt==b?le:Lt)==le,fn=tt==Lt;if(fn&&Hr(me)){if(!Hr(je))return!1;wt=!0,un=!1}if(fn&&!un)return He||(He=new Dt),wt||io(me)?Qi(me,je,Ve,vt,Ye,He):function(we,Ee,or,jt,Wr,pt,Mt){switch(or){case Ge:if(we.byteLength!=Ee.byteLength||we.byteOffset!=Ee.byteOffset)return!1;we=we.buffer,Ee=Ee.buffer;case We:return!(we.byteLength!=Ee.byteLength||!pt(new Yi(we),new Yi(Ee)));case E:case U:case J:return eo(+we,+Ee);case q:return we.name==Ee.name&&we.message==Ee.message;case ue:case P:return we==Ee+"";case W:var Bt=ra;case ze:var Tn=1&jt;if(Bt||(Bt=ia),we.size!=Ee.size&&!Tn)return!1;var lr=Mt.get(we);if(lr)return lr==Ee;jt|=2,Mt.set(we,Ee);var cn=Qi(Bt(we),Bt(Ee),jt,Wr,pt,Mt);return Mt.delete(we),cn;case ee:if(Yr)return Yr.call(we)==Yr.call(Ee)}return!1}(me,je,tt,Ve,vt,Ye,He);if(!(1&Ve)){var Sn=un&&Et.call(me,"__wrapped__"),oo=ir&&Et.call(je,"__wrapped__");if(Sn||oo){var Sa=Sn?me.value():me,Ta=oo?je.value():je;return He||(He=new Dt),Ye(Sa,Ta,Ve,vt,He)}}return fn?(He||(He=new Dt),function(we,Ee,or,jt,Wr,pt){var Mt=1&or,Bt=$i(we),Tn=Bt.length,lr=$i(Ee).length;if(Tn!=lr&&!Mt)return!1;for(var cn=Tn;cn--;){var $t=Bt[cn];if(!(Mt?$t in Ee:Et.call(Ee,$t)))return!1}var lo=pt.get(we);if(lo&&pt.get(Ee))return lo==Ee;var ar=!0;pt.set(we,Ee),pt.set(Ee,we);for(var Xr=Mt;++cn<Tn;){var sr=we[$t=Bt[cn]],ur=Ee[$t];if(jt)var ao=Mt?jt(ur,sr,$t,Ee,we,pt):jt(sr,ur,$t,we,Ee,pt);if(!(ao===void 0?sr===ur||Wr(sr,ur,or,jt,pt):ao)){ar=!1;break}Xr||(Xr=$t=="constructor")}if(ar&&!Xr){var fr=we.constructor,cr=Ee.constructor;fr==cr||!("constructor"in we)||!("constructor"in Ee)||typeof fr=="function"&&fr instanceof fr&&typeof cr=="function"&&cr instanceof cr||(ar=!1)}return pt.delete(we),pt.delete(Ee),ar}(me,je,Ve,vt,Ye,He)):!1}(w,x,Y,ne,Ki,xe))}function ba(w){return!(!ro(w)||function(x){return!!Vi&&Vi in x}(w))&&(to(w)?aa:jr).test(Qt(w))}function va(w){if(Y=(x=w)&&x.constructor,ne=typeof Y=="function"&&Y.prototype||Qn,x!==ne)return fa(w);var x,Y,ne,xe=[];for(var me in Object(w))Et.call(w,me)&&me!="constructor"&&xe.push(me);return xe}function Qi(w,x,Y,ne,xe,me){var je=1&Y,Ve=w.length,vt=x.length;if(Ve!=vt&&!(je&&vt>Ve))return!1;var Ye=me.get(w);if(Ye&&me.get(x))return Ye==x;var He=-1,wt=!0,Ot=2&Y?new er:void 0;for(me.set(w,x),me.set(x,w);++He<Ve;){var tt=w[He],Lt=x[He];if(ne)var un=je?ne(Lt,tt,He,x,w,me):ne(tt,Lt,He,w,x,me);if(un!==void 0){if(un)continue;wt=!1;break}if(Ot){if(!na(x,function(ir,fn){if(Sn=fn,!Ot.has(Sn)&&(tt===ir||xe(tt,ir,Y,ne,me)))return Ot.push(fn);var Sn})){wt=!1;break}}else if(tt!==Lt&&!xe(tt,Lt,Y,ne,me)){wt=!1;break}}return me.delete(w),me.delete(x),wt}function $i(w){return function(x,Y,ne){var xe=Y(x);return rr(x)?xe:function(me,je){for(var Ve=-1,vt=je.length,Ye=me.length;++Ve<vt;)me[Ye+Ve]=je[Ve];return me}(xe,ne(x))}(w,wa,_a)}function nr(w,x){var Y,ne,xe=w.__data__;return((ne=typeof(Y=x))=="string"||ne=="number"||ne=="symbol"||ne=="boolean"?Y!=="__proto__":Y===null)?xe[typeof x=="string"?"string":"hash"]:xe.map}function sn(w,x){var Y=function(ne,xe){return ne==null?void 0:ne[xe]}(w,x);return ba(Y)?Y:void 0}Zt.prototype.clear=function(){this.__data__=yn?yn(null):{},this.size=0},Zt.prototype.delete=function(w){var x=this.has(w)&&delete this.__data__[w];return this.size-=x?1:0,x},Zt.prototype.get=function(w){var x=this.__data__;if(yn){var Y=x[w];return Y===d?void 0:Y}return Et.call(x,w)?x[w]:void 0},Zt.prototype.has=function(w){var x=this.__data__;return yn?x[w]!==void 0:Et.call(x,w)},Zt.prototype.set=function(w,x){var Y=this.__data__;return this.size+=this.has(w)?0:1,Y[w]=yn&&x===void 0?d:x,this},xt.prototype.clear=function(){this.__data__=[],this.size=0},xt.prototype.delete=function(w){var x=this.__data__,Y=tr(x,w);return!(Y<0)&&(Y==x.length-1?x.pop():sa.call(x,Y,1),--this.size,!0)},xt.prototype.get=function(w){var x=this.__data__,Y=tr(x,w);return Y<0?void 0:x[Y][1]},xt.prototype.has=function(w){return tr(this.__data__,w)>-1},xt.prototype.set=function(w,x){var Y=this.__data__,ne=tr(Y,w);return ne<0?(++this.size,Y.push([w,x])):Y[ne][1]=x,this},Kt.prototype.clear=function(){this.size=0,this.__data__={hash:new Zt,map:new(_n||xt),string:new Zt}},Kt.prototype.delete=function(w){var x=nr(this,w).delete(w);return this.size-=x?1:0,x},Kt.prototype.get=function(w){return nr(this,w).get(w)},Kt.prototype.has=function(w){return nr(this,w).has(w)},Kt.prototype.set=function(w,x){var Y=nr(this,w),ne=Y.size;return Y.set(w,x),this.size+=Y.size==ne?0:1,this},er.prototype.add=er.prototype.push=function(w){return this.__data__.set(w,d),this},er.prototype.has=function(w){return this.__data__.has(w)},Dt.prototype.clear=function(){this.__data__=new xt,this.size=0},Dt.prototype.delete=function(w){var x=this.__data__,Y=x.delete(w);return this.size=x.size,Y},Dt.prototype.get=function(w){return this.__data__.get(w)},Dt.prototype.has=function(w){return this.__data__.has(w)},Dt.prototype.set=function(w,x){var Y=this.__data__;if(Y instanceof xt){var ne=Y.__data__;if(!_n||ne.length<199)return ne.push([w,x]),this.size=++Y.size,this;Y=this.__data__=new Kt(ne)}return Y.set(w,x),this.size=Y.size,this};var _a=Wi?function(w){return w==null?[]:(w=Object(w),function(x,Y){for(var ne=-1,xe=x==null?0:x.length,me=0,je=[];++ne<xe;){var Ve=x[ne];Y(Ve,ne,x)&&(je[me++]=Ve)}return je}(Wi(w),function(x){return Hi.call(w,x)}))}:function(){return[]},Ut=En;function ya(w,x){return!!(x=x??g)&&(typeof w=="number"||ea.test(w))&&w>-1&&w%1==0&&w<x}function Qt(w){if(w!=null){try{return Gi.call(w)}catch{}try{return w+""}catch{}}return""}function eo(w,x){return w===x||w!=w&&x!=x}(Gr&&Ut(new Gr(new ArrayBuffer(1)))!=Ge||_n&&Ut(new _n)!=W||Vr&&Ut(Vr.resolve())!=Re||qr&&Ut(new qr)!=ze||Jr&&Ut(new Jr)!=ye)&&(Ut=function(w){var x=En(w),Y=x==le?w.constructor:void 0,ne=Y?Qt(Y):"";if(ne)switch(ne){case ca:return Ge;case da:return W;case ha:return Re;case pa:return ze;case ga:return ye}return x});var Ea=Zi(function(){return arguments}())?Zi:function(w){return wn(w)&&Et.call(w,"callee")&&!Hi.call(w,"callee")},rr=Array.isArray,Hr=ua||function(){return!1};function to(w){if(!ro(w))return!1;var x=En(w);return x==X||x=="[object GeneratorFunction]"||x=="[object AsyncFunction]"||x=="[object Proxy]"}function no(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=g}function ro(w){var x=typeof w;return w!=null&&(x=="object"||x=="function")}function wn(w){return w!=null&&typeof w=="object"}var io=Ui?function(w){return function(x){return w(x)}}(Ui):function(w){return wn(w)&&no(w.length)&&!!Ie[En(w)]};function wa(w){return(x=w)!=null&&no(x.length)&&!to(x)?ma(w):va(w);var x}i.exports=function(w,x){return Ki(w,x)}})({get exports(){return Zn},set exports(i){Zn=i}},Zn);var Zl=Zn;function Pi(i,s){return i.length===s.length&&JSON.stringify(i.map(function(d){return d}).sort())===JSON.stringify(s.map(function(d){return d}).sort())}var Kl={Polygon:at,LineString:se,Point:k,MultiPolygon:Ke,MultiLineString:Ke,MultiPoint:Ke},Ql=Object.freeze({__proto__:null,CommonSelectors:Al,constrainFeatureMovement:Dr,createMidPoint:Si,createSupplementaryPoints:Vn,createVertex:ln,doubleClickZoom:bt,euclideanDistance:Te,featuresAt:R,getFeatureAtAndSetCursors:Be,isClick:ke,isEventAtCoordinates:Xn,isTap:De,mapEventToBoundingBox:ae,ModeHandler:t,moveFeatures:Ur,sortFeatures:oe,stringSetsAreEqual:Pi,StringSet:D,theme:yi,toDenseArray:mn}),$l=function(i,s){var d={options:i=function(b){b===void 0&&(b={});var _=Rt(b);return b.controls||(_.controls={}),b.displayControlsDefault===!1?_.controls=Rt(Xl,b.controls):_.controls=Rt(Wl,b.controls),(_=Rt(Hl,_)).styles=Mi(_.styles,"cold").concat(Mi(_.styles,"hot")),_}(i)};s=function(b,_){return _.modes=S,_.getFeatureIdsAt=function(E){return R.click({point:E},null,b).map(function(U){return U.properties.id})},_.getSelectedIds=function(){return b.store.getSelectedIds()},_.getSelected=function(){return{type:m.FEATURE_COLLECTION,features:b.store.getSelectedIds().map(function(E){return b.store.get(E)}).map(function(E){return E.toGeoJSON()})}},_.getSelectedPoints=function(){return{type:m.FEATURE_COLLECTION,features:b.store.getSelectedCoordinates().map(function(E){return{type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:E.coordinates}}})}},_.set=function(E){if(E.type===void 0||E.type!==m.FEATURE_COLLECTION||!Array.isArray(E.features))throw new Error("Invalid FeatureCollection");var U=b.store.createRenderBatch(),q=b.store.getAllIds().slice(),X=_.add(E),W=new D(X);return(q=q.filter(function(J){return!W.has(J)})).length&&_.delete(q),U(),X},_.add=function(E){var U=JSON.parse(JSON.stringify(Ti(E))).features.map(function(q){if(q.id=q.id||Le(),q.geometry===null)throw new Error("Invalid geometry: null");if(b.store.get(q.id)===void 0||b.store.get(q.id).type!==q.geometry.type){var X=Kl[q.geometry.type];if(X===void 0)throw new Error("Invalid geometry type: "+q.geometry.type+".");var W=new X(b,q);b.store.add(W)}else{var J=b.store.get(q.id);J.properties=q.properties,Zl(J.getCoordinates(),q.geometry.coordinates)||J.incomingCoords(q.geometry.coordinates)}return q.id});return b.store.render(),U},_.get=function(E){var U=b.store.get(E);if(U)return U.toGeoJSON()},_.getAll=function(){return{type:m.FEATURE_COLLECTION,features:b.store.getAll().map(function(E){return E.toGeoJSON()})}},_.delete=function(E){return b.store.delete(E,{silent:!0}),_.getMode()!==S.DIRECT_SELECT||b.store.getSelectedIds().length?b.store.render():b.events.changeMode(S.SIMPLE_SELECT,void 0,{silent:!0}),_},_.deleteAll=function(){return b.store.delete(b.store.getAllIds(),{silent:!0}),_.getMode()===S.DIRECT_SELECT?b.events.changeMode(S.SIMPLE_SELECT,void 0,{silent:!0}):b.store.render(),_},_.changeMode=function(E,U){return U===void 0&&(U={}),E===S.SIMPLE_SELECT&&_.getMode()===S.SIMPLE_SELECT?(Pi(U.featureIds||[],b.store.getSelectedIds())||(b.store.setSelected(U.featureIds,{silent:!0}),b.store.render()),_):(E===S.DIRECT_SELECT&&_.getMode()===S.DIRECT_SELECT&&U.featureId===b.store.getSelectedIds()[0]||b.events.changeMode(E,U,{silent:!0}),_)},_.getMode=function(){return b.events.getMode()},_.trash=function(){return b.events.trash({silent:!0}),_},_.combineFeatures=function(){return b.events.combineFeatures({silent:!0}),_},_.uncombineFeatures=function(){return b.events.uncombineFeatures({silent:!0}),_},_.setFeatureProperty=function(E,U,q){return b.store.setFeatureProperty(E,U,q),_},_}(d,s),d.api=s;var g=Pl(d);return s.onAdd=g.onAdd,s.onRemove=g.onRemove,s.types=p,s.options=i,s};function Kn(i){$l(i,this)}return Kn.modes=Li,Kn.constants=F,Kn.lib=Ql,Kn})})(Uu);const sl=Pa(si);let be;const wl=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});wl.decode();let br=new Uint8Array;function Mn(){return br.byteLength===0&&(br=new Uint8Array(be.memory.buffer)),br}function hn(n,e){return wl.decode(Mn().subarray(n,n+e))}const Nt=new Array(32).fill(void 0);Nt.push(void 0,null,!0,!1);let Pn=Nt.length;function Pt(n){Pn===Nt.length&&Nt.push(Nt.length+1);const e=Pn;return Pn=Nt[e],Nt[e]=n,e}function Me(n){return Nt[n]}function ju(n){n<36||(Nt[n]=Pn,Pn=n)}function Sl(n){const e=Me(n);return ju(n),e}function Qr(n){return n==null}let vr=new Float64Array;function Bu(){return vr.byteLength===0&&(vr=new Float64Array(be.memory.buffer)),vr}let _r=new Int32Array;function Qe(){return _r.byteLength===0&&(_r=new Int32Array(be.memory.buffer)),_r}let Vt=0;const yr=new TextEncoder("utf-8"),zu=typeof yr.encodeInto=="function"?function(n,e){return yr.encodeInto(n,e)}:function(n,e){const t=yr.encode(n);return e.set(t),{read:n.length,written:t.length}};function pr(n,e,t){if(t===void 0){const u=yr.encode(n),c=e(u.length);return Mn().subarray(c,c+u.length).set(u),Vt=u.length,c}let r=n.length,o=e(r);const l=Mn();let a=0;for(;a<r;a++){const u=n.charCodeAt(a);if(u>127)break;l[o+a]=u}if(a!==r){a!==0&&(n=n.slice(a)),o=t(o,r,r=a+n.length*3);const u=Mn().subarray(o+a,o+r),c=zu(n,u);a+=c.written}return Vt=a,o}function ui(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const o=n.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=n.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(n)){const o=n.length;let l="[";o>0&&(l+=ui(n[0]));for(let a=1;a<o;a++)l+=", "+ui(n[a]);return l+="]",l}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}function Gu(n,e){const t=e(n.length*1);return Mn().set(n,t/1),Vt=n.length,t}class Ir{static __wrap(e){const t=Object.create(Ir.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();be.__wbg_jsroutesnapper_free(e)}constructor(e){try{const l=be.__wbindgen_add_to_stack_pointer(-16),a=Gu(e,be.__wbindgen_malloc),u=Vt;be.jsroutesnapper_new(l,a,u);var t=Qe()[l/4+0],r=Qe()[l/4+1],o=Qe()[l/4+2];if(o)throw Sl(r);return Ir.__wrap(t)}finally{be.__wbindgen_add_to_stack_pointer(16)}}setConfig(e){be.jsroutesnapper_setConfig(this.ptr,Pt(e))}toFinalFeature(){try{const r=be.__wbindgen_add_to_stack_pointer(-16);be.jsroutesnapper_toFinalFeature(r,this.ptr);var e=Qe()[r/4+0],t=Qe()[r/4+1];let o;return e!==0&&(o=hn(e,t).slice(),be.__wbindgen_free(e,t*1)),o}finally{be.__wbindgen_add_to_stack_pointer(16)}}renderGeojson(){try{const r=be.__wbindgen_add_to_stack_pointer(-16);be.jsroutesnapper_renderGeojson(r,this.ptr);var e=Qe()[r/4+0],t=Qe()[r/4+1];return hn(e,t)}finally{be.__wbindgen_add_to_stack_pointer(16),be.__wbindgen_free(e,t)}}setSnapMode(e){be.jsroutesnapper_setSnapMode(this.ptr,e)}onMouseMove(e,t,r){return be.jsroutesnapper_onMouseMove(this.ptr,e,t,r)!==0}onClick(){be.jsroutesnapper_onClick(this.ptr)}onDragStart(){return be.jsroutesnapper_onDragStart(this.ptr)!==0}onMouseUp(){return be.jsroutesnapper_onMouseUp(this.ptr)!==0}clearState(){be.jsroutesnapper_clearState(this.ptr)}}async function Vu(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function qu(){const n={};return n.wbg={},n.wbg.__wbindgen_string_new=function(e,t){const r=hn(e,t);return Pt(r)},n.wbg.__wbindgen_is_object=function(e){const t=Me(e);return typeof t=="object"&&t!==null},n.wbg.__wbindgen_is_undefined=function(e){return Me(e)===void 0},n.wbg.__wbindgen_in=function(e,t){return Me(e)in Me(t)},n.wbg.__wbindgen_object_drop_ref=function(e){Sl(e)},n.wbg.__wbindgen_boolean_get=function(e){const t=Me(e);return typeof t=="boolean"?t?1:0:2},n.wbg.__wbindgen_error_new=function(e,t){const r=new Error(hn(e,t));return Pt(r)},n.wbg.__wbindgen_jsval_loose_eq=function(e,t){return Me(e)==Me(t)},n.wbg.__wbindgen_number_get=function(e,t){const r=Me(t),o=typeof r=="number"?r:void 0;Bu()[e/8+1]=Qr(o)?0:o,Qe()[e/4+0]=!Qr(o)},n.wbg.__wbindgen_string_get=function(e,t){const r=Me(t),o=typeof r=="string"?r:void 0;var l=Qr(o)?0:pr(o,be.__wbindgen_malloc,be.__wbindgen_realloc),a=Vt;Qe()[e/4+1]=a,Qe()[e/4+0]=l},n.wbg.__wbg_String_91fba7ded13ba54c=function(e,t){const r=String(Me(t)),o=pr(r,be.__wbindgen_malloc,be.__wbindgen_realloc),l=Vt;Qe()[e/4+1]=l,Qe()[e/4+0]=o},n.wbg.__wbindgen_object_clone_ref=function(e){const t=Me(e);return Pt(t)},n.wbg.__wbg_getwithrefkey_15c62c2b8546208d=function(e,t){const r=Me(e)[Me(t)];return Pt(r)},n.wbg.__wbg_log_4b5638ad60bdc54a=function(e){console.log(Me(e))},n.wbg.__wbg_instanceof_ArrayBuffer_e5e48f4762c5610b=function(e){let t;try{t=Me(e)instanceof ArrayBuffer}catch{t=!1}return t},n.wbg.__wbg_buffer_3f3d764d4747d564=function(e){const t=Me(e).buffer;return Pt(t)},n.wbg.__wbg_new_8c3f0052272a457a=function(e){const t=new Uint8Array(Me(e));return Pt(t)},n.wbg.__wbg_set_83db9690f9353e79=function(e,t,r){Me(e).set(Me(t),r>>>0)},n.wbg.__wbg_length_9e1ae1900cb0fbd5=function(e){return Me(e).length},n.wbg.__wbg_instanceof_Uint8Array_971eeda69eb75003=function(e){let t;try{t=Me(e)instanceof Uint8Array}catch{t=!1}return t},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return Pt(e)},n.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const r=Me(t).stack,o=pr(r,be.__wbindgen_malloc,be.__wbindgen_realloc),l=Vt;Qe()[e/4+1]=l,Qe()[e/4+0]=o},n.wbg.__wbg_error_f851667af71bcfc6=function(e,t){try{console.error(hn(e,t))}finally{be.__wbindgen_free(e,t)}},n.wbg.__wbindgen_debug_string=function(e,t){const r=ui(Me(t)),o=pr(r,be.__wbindgen_malloc,be.__wbindgen_realloc),l=Vt;Qe()[e/4+1]=l,Qe()[e/4+0]=o},n.wbg.__wbindgen_throw=function(e,t){throw new Error(hn(e,t))},n.wbg.__wbindgen_memory=function(){const e=be.memory;return Pt(e)},n}function Ju(n,e){return be=n.exports,Tl.__wbindgen_wasm_module=e,vr=new Float64Array,_r=new Int32Array,br=new Uint8Array,be}async function Tl(n){typeof n>"u"&&(n="/atip/assets/route_snapper_bg.wasm");const e=qu();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:r}=await Vu(await n,e);return Ju(t,r)}var Fn,fi,Or,kl,Dn,ci,At,en;class Yu{constructor(e,t,r){kn(this,Fn);kn(this,Or);kn(this,Dn);kn(this,At);this.controlDiv=r,this.map=e,console.time("Deserialize and setup JsRouteSnapper"),this.inner=new Ir(t),console.timeEnd("Deserialize and setup JsRouteSnapper"),console.log("JsRouteSnapper ready, waiting for idle event"),this.active=!1,this.map.once("idle",()=>{console.log("JsRouteSnapper now usable"),this.map.addSource("route-snapper",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:"route-points",type:"circle",source:"route-snapper",paint:{"circle-radius":["match",["get","type"],"unimportant",10/2,10],"circle-color":["match",["get","type"],"hovered","green","important","red","black"]},filter:["in","$type","Point"]}),this.map.addLayer({id:"route-lines",type:"line",source:"route-snapper",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"black","line-width":2.5},filter:["in","$type","LineString"]}),this.map.on("mousemove",a=>{if(!this.active)return;const u={x:a.point.x-30,y:a.point.y},c=this.map.unproject(a.point).distanceTo(this.map.unproject(u));this.inner.onMouseMove(a.lngLat.lng,a.lngLat.lat,c)&&gt(this,At,en).call(this)}),this.map.on("click",()=>{this.active&&(this.inner.onClick(),gt(this,At,en).call(this))}),this.map.on("dragstart",a=>{this.active&&this.inner.onDragStart()&&this.map.dragPan.disable()}),this.map.on("mouseup",a=>{this.active&&this.inner.onMouseUp()&&this.map.dragPan.enable()}),document.addEventListener("keypress",a=>{this.active&&a.key=="Enter"&&(a.preventDefault(),gt(this,Dn,ci).call(this))}),document.addEventListener("keydown",a=>{this.active&&a.key=="Shift"&&(a.preventDefault(),this.inner.setSnapMode(!1),gt(this,At,en).call(this))}),document.addEventListener("keyup",a=>{this.active&&a.key=="Shift"&&(a.preventDefault(),this.inner.setSnapMode(!0),gt(this,At,en).call(this))}),gt(this,Fn,fi).call(this)})}isActive(){return this.active}tearDown(){this.map.removeLayer("route-points"),this.map.removeLayer("route-lines"),this.map.removeSource("route-snapper")}}Fn=new WeakSet,fi=function(){this.active=!1,this.inner.clearState(),gt(this,At,en).call(this),this.controlDiv.innerHTML="";let e=document.createElement("button");e.innerText="Route tool",e.type="button",e.onclick=()=>{gt(this,Or,kl).call(this)},this.controlDiv.appendChild(e)},Or=new WeakSet,kl=function(){this.active=!0,this.controlDiv.dispatchEvent(new CustomEvent("activate")),this.controlDiv.innerHTML="";let e=document.createElement("button");e.type="button",e.innerText="Finish route",e.onclick=()=>{gt(this,Dn,ci).call(this)},this.controlDiv.appendChild(e);let t=document.createElement("input");t.type="checkbox",t.id="avoidDoublingBack",t.onclick=()=>{this.inner.setConfig({avoid_doubling_back:t.checked}),gt(this,At,en).call(this)};let r=document.createElement("label");r.innerText="Avoid doubling back",r.for=t.id;let o=document.createElement("div");o.appendChild(t),o.appendChild(r),this.controlDiv.append(o);const l=document.createElement("ul");l.innerHTML="<li><b>Click</b> green points on the transport network</br>to create snapped routes</li><li>Hold <b>Shift</b> to draw a point anywhere</li><li><b>Click and drag</b> any point to move it</li><li><b>Click</b> a red waypoint to delete it</li><li>Press <b>Enter</b> to finish route</li>",this.controlDiv.appendChild(l)},Dn=new WeakSet,ci=function(){const e=this.inner.toFinalFeature();e?this.controlDiv.dispatchEvent(new CustomEvent("new-route",{detail:JSON.parse(e)})):this.controlDiv.dispatchEvent(new CustomEvent("no-new-route")),gt(this,Fn,fi).call(this)},At=new WeakSet,en=function(){this.map.getSource("route-snapper").setData(JSON.parse(this.inner.renderGeojson()))};async function Hu(n,e){const t=await fetch(n),r=t.body.getReader(),o=t.headers.get("Content-Length");let l=0,a=[];for(;;){const{done:f,value:h}=await r.read();if(f)break;a.push(h),l+=h.length;const v=100*l/o;e.style=`background: linear-gradient(to right, red ${v}%, transparent 0);`}let u=new Uint8Array(l),c=0;for(let f of a)u.set(f,c),c+=f.length;return u}const Oe=gn(Rn()),Nn=gn(null),di=gn(null);function Rn(){return{type:"FeatureCollection",features:[]}}const vi=bl(Oe,n=>{let e=n.features.find(t=>t.properties.editing);return e?e.id:null});function Wu(n){Oe.update(e=>{for(let t of e.features)t.id==n?t.properties.editing=!0:delete t.properties.editing;return e})}function Cl(){Oe.update(n=>(n.features.forEach(e=>{delete e.properties.editing}),n))}function Xu(n){let e,t,r,o;return{c(){e=V("div"),e.textContent="Add intervention",t=Z(),r=V("div"),o=V("div"),o.textContent="Route tool loading...",K(e,"class","header svelte-15ile5d"),K(r,"class","route-container svelte-15ile5d")},m(l,a){L(l,e,a),L(l,t,a),L(l,r,a),B(r,o),n[3](o),n[4](r)},p:Xe,i:Xe,o:Xe,d(l){l&&M(e),l&&M(t),l&&M(r),n[3](null),n[4](null)}}}const gr="black",ul=7,fl=10;function Zu(n,e,t){let r;Tt(n,Oe,S=>t(8,r=S));const{getMap:o}=tn("map"),l=[{id:"base-points",filter:["all",Tr,["==","meta","feature"]],...Cr(gr,ul)},{id:"draggable-points",filter:["all",Tr,["!=","meta","feature"]],...Cr("blue",1.5*ul)},{id:"base-line",filter:bi,...kr(gr,fl)},{id:"base-polygon-fill",filter:Sr,...Mr(gr,.1)},{id:"base-polygon-outline",filter:Sr,...kr(gr,fl/2)}];let{url:a}=e,u,c,f,h;nn(async()=>{const S=o();f=new sl({displayControlsDefault:!1,controls:{point:!0,polygon:!0},modes:Object.assign({static:y},sl.modes),styles:l}),S.addControl(f),await v(S),S.on("draw.create",O=>{const j=O.features[0];j.geometry.type=="Polygon"?j.properties.intervention_type="area":j.properties.intervention_type="other",Oe.update(I=>(I.features.push(j),I))}),S.on("draw.update",O=>{const j=O.features[0];Oe.update(I=>{const C=I.features.find(N=>N.id==j.id);return C.geometry=j.geometry,I})}),S.on("draw.selectionchange",O=>{O.features.length==1&&(!h||!h.isActive())?Wu(O.features[0].id):O.features.length==0&&Cl()}),Oe.subscribe(O=>{f.set(O)}),S.on("mousemove",O=>{var j=null;if(h&&!h.isActive()){const I=f.getFeatureIdsAt(O.point);I.length>0&&(j=I[0]),di.set(j)}}),S.on("mouseout",()=>{di.set(null)}),vi.subscribe(O=>{if(O){let j=r.features.find(I=>I.id==O);j.geometry.type!="Point"&&f.changeMode("direct_select",{featureId:j.id})}})}),gl(()=>{o().removeControl(f),h.tearDown()});async function v(S){await Tl(),console.log(`Grabbing ${a}`);try{const O=await Hu(a,c);h=new Yu(S,O,u)}catch(O){console.log(`Route tool broke: ${O}`),t(0,u.innerHTML="Failed to load",u)}u.addEventListener("activate",()=>{f.changeMode("static")}),u.addEventListener("no-new-route",()=>{f.changeMode("simple_select")}),u.addEventListener("new-route",O=>{const j=O.detail,I=f.add(j);j.id=I[0],j.properties.intervention_type="route",Oe.update(C=>(C.features.push(j),C)),f.changeMode("direct_select",{featureId:j.id})})}let y={};y.onSetup=function(){return this.setActionableState(),{}},y.toDisplayFeatures=function(S,O,j){j(O)};function p(S){$e[S?"unshift":"push"](()=>{c=S,t(1,c)})}function m(S){$e[S?"unshift":"push"](()=>{u=S,t(0,u)})}return n.$$set=S=>{"url"in S&&t(2,a=S.url)},[u,c,a,p,m]}class Ku extends Pe{constructor(e){super(),Ae(this,e,Zu,Xu,Ne,{url:2})}}function Qu(n){let e,t,r,o,l,a,u,c;return e=new hr({props:{labelText:"Area",value:"area"}}),r=new hr({props:{labelText:"Route",value:"route"}}),l=new hr({props:{labelText:"Crossing",value:"crossing"}}),u=new hr({props:{labelText:"Other",value:"other"}}),{c(){de(e.$$.fragment),t=Z(),de(r.$$.fragment),o=Z(),de(l.$$.fragment),a=Z(),de(u.$$.fragment)},m(f,h){he(e,f,h),L(f,t,h),he(r,f,h),L(f,o,h),he(l,f,h),L(f,a,h),he(u,f,h),c=!0},p:Xe,i(f){c||(G(e.$$.fragment,f),G(r.$$.fragment,f),G(l.$$.fragment,f),G(u.$$.fragment,f),c=!0)},o(f){H(e.$$.fragment,f),H(r.$$.fragment,f),H(l.$$.fragment,f),H(u.$$.fragment,f),c=!1},d(f){pe(e,f),f&&M(t),pe(r,f),f&&M(o),pe(l,f),f&&M(a),pe(u,f)}}}function $u(n){let e,t,r,o,l,a,u,c,f,h,v,y,p,m,S,O,j,I,C,N,A,F;function ge(R){n[5](R)}let z={labelText:"Name"};n[0]!==void 0&&(z.value=n[0]),e=new Vs({props:z}),$e.push(()=>kt(e,"value",ge,n[0]));function oe(R){n[6](R)}let ae={$$slots:{default:[Qu]},$$scope:{ctx:n}};n[1]!==void 0&&(ae.selected=n[1]),a=new Os({props:ae}),$e.push(()=>kt(a,"selected",oe,n[1]));function D(R){n[7](R)}let te={labelText:"Description"};return n[2]!==void 0&&(te.value=n[2]),v=new Rs({props:te}),$e.push(()=>kt(v,"value",D,n[2])),{c(){de(e.$$.fragment),r=Z(),o=V("br"),l=Z(),de(a.$$.fragment),c=Z(),f=V("br"),h=Z(),de(v.$$.fragment),p=Z(),m=V("br"),S=Z(),O=V("div"),j=V("button"),j.textContent="Delete",I=Z(),C=V("button"),C.textContent="Save",K(j,"type","button"),K(C,"type","button"),ti(C,"float","right")},m(R,ie){he(e,R,ie),L(R,r,ie),L(R,o,ie),L(R,l,ie),he(a,R,ie),L(R,c,ie),L(R,f,ie),L(R,h,ie),he(v,R,ie),L(R,p,ie),L(R,m,ie),L(R,S,ie),L(R,O,ie),B(O,j),B(O,I),B(O,C),N=!0,A||(F=[$(j,"click",n[3]),$(C,"click",Cl)],A=!0)},p(R,[ie]){const Be={};!t&&ie&1&&(t=!0,Be.value=R[0],Ct(()=>t=!1)),e.$set(Be);const Te={};ie&256&&(Te.$$scope={dirty:ie,ctx:R}),!u&&ie&2&&(u=!0,Te.selected=R[1],Ct(()=>u=!1)),a.$set(Te);const ke={};!y&&ie&4&&(y=!0,ke.value=R[2],Ct(()=>y=!1)),v.$set(ke)},i(R){N||(G(e.$$.fragment,R),G(a.$$.fragment,R),G(v.$$.fragment,R),N=!0)},o(R){H(e.$$.fragment,R),H(a.$$.fragment,R),H(v.$$.fragment,R),N=!1},d(R){pe(e,R),R&&M(r),R&&M(o),R&&M(l),pe(a,R),R&&M(c),R&&M(f),R&&M(h),pe(v,R),R&&M(p),R&&M(m),R&&M(S),R&&M(O),A=!1,dt(F)}}}function ef(n,e,t){let{id:r}=e,{name:o}=e,{intervention_type:l}=e,{description:a}=e;function u(){Oe.update(v=>(v.features=v.features.filter(y=>y.id!=r),v))}function c(v){o=v,t(0,o)}function f(v){l=v,t(1,l)}function h(v){a=v,t(2,a)}return n.$$set=v=>{"id"in v&&t(4,r=v.id),"name"in v&&t(0,o=v.name),"intervention_type"in v&&t(1,l=v.intervention_type),"description"in v&&t(2,a=v.description)},[o,l,a,u,r,c,f,h]}class tf extends Pe{constructor(e){super(),Ae(this,e,ef,$u,Ne,{id:4,name:0,intervention_type:1,description:2})}}function cl(n,e,t){const r=n.slice();return r[10]=e[t],r[11]=e,r[12]=t,r}function nf(n){let e,t,r,o,l,a;function u(v){n[5](v,n[10])}function c(v){n[6](v,n[10])}function f(v){n[7](v,n[10])}let h={id:n[10].id};return n[10].properties.name!==void 0&&(h.name=n[10].properties.name),n[10].properties.intervention_type!==void 0&&(h.intervention_type=n[10].properties.intervention_type),n[10].properties.description!==void 0&&(h.description=n[10].properties.description),e=new tf({props:h}),$e.push(()=>kt(e,"name",u,n[10].properties.name)),$e.push(()=>kt(e,"intervention_type",c,n[10].properties.intervention_type)),$e.push(()=>kt(e,"description",f,n[10].properties.description)),{c(){de(e.$$.fragment),l=Z()},m(v,y){he(e,v,y),L(v,l,y),a=!0},p(v,y){n=v;const p={};y&1&&(p.id=n[10].id),!t&&y&1&&(t=!0,p.name=n[10].properties.name,Ct(()=>t=!1)),!r&&y&1&&(r=!0,p.intervention_type=n[10].properties.intervention_type,Ct(()=>r=!1)),!o&&y&1&&(o=!0,p.description=n[10].properties.description,Ct(()=>o=!1)),e.$set(p)},i(v){a||(G(e.$$.fragment,v),a=!0)},o(v){H(e.$$.fragment,v),a=!1},d(v){pe(e,v),v&&M(l)}}}function rf(n){let e=n[12]+1+"",t,r,o=xr(n[10])+"",l;return{c(){t=ve(e),r=ve(") "),l=ve(o)},m(a,u){L(a,t,u),L(a,r,u),L(a,l,u)},p(a,u){u&1&&o!==(o=xr(a[10])+"")&&Fe(l,o)},d(a){a&&M(t),a&&M(r),a&&M(l)}}}function of(n){let e,t=n[12]+1+"",r,o,l=xr(n[10])+"",a;return{c(){e=V("strong"),r=ve(t),o=ve(") "),a=ve(l)},m(u,c){L(u,e,c),B(e,r),B(e,o),B(e,a)},p(u,c){c&1&&l!==(l=xr(u[10])+"")&&Fe(a,l)},d(u){u&&M(e)}}}function lf(n){let e;function t(l,a){return l[10].id==l[1]?of:rf}let r=t(n),o=r(n);return{c(){o.c(),e=Z()},m(l,a){o.m(l,a),L(l,e,a)},p(l,a){r===(r=t(l))&&o?o.p(l,a):(o.d(1),o=r(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){o.d(l),l&&M(e)}}}function dl(n){let e,t,r;function o(a){n[8](a,n[10])}let l={$$slots:{title:[lf],default:[nf]},$$scope:{ctx:n}};return n[10].properties.editing!==void 0&&(l.open=n[10].properties.editing),e=new rs({props:l}),$e.push(()=>kt(e,"open",o,n[10].properties.editing)),e.$on("click",function(){fo(n[3](n[10].id))&&n[3](n[10].id).apply(this,arguments)}),e.$on("mouseenter",function(){fo(Nn.set(n[10].id))&&Nn.set(n[10].id).apply(this,arguments)}),e.$on("mouseleave",n[2]),{c(){de(e.$$.fragment)},m(a,u){he(e,a,u),r=!0},p(a,u){n=a;const c={};u&8195&&(c.$$scope={dirty:u,ctx:n}),!t&&u&1&&(t=!0,c.open=n[10].properties.editing,Ct(()=>t=!1)),e.$set(c)},i(a){r||(G(e.$$.fragment,a),r=!0)},o(a){H(e.$$.fragment,a),r=!1},d(a){pe(e,a)}}}function af(n){let e,t,r=n[0].features,o=[];for(let a=0;a<r.length;a+=1)o[a]=dl(cl(n,r,a));const l=a=>H(o[a],1,1,()=>{o[a]=null});return{c(){for(let a=0;a<o.length;a+=1)o[a].c();e=hi()},m(a,u){for(let c=0;c<o.length;c+=1)o[c].m(a,u);L(a,e,u),t=!0},p(a,u){if(u&15){r=a[0].features;let c;for(c=0;c<r.length;c+=1){const f=cl(a,r,c);o[c]?(o[c].p(f,u),G(o[c],1)):(o[c]=dl(f),o[c].c(),G(o[c],1),o[c].m(e.parentNode,e))}for(nt(),c=r.length;c<o.length;c+=1)l(c);rt()}},i(a){if(!t){for(let u=0;u<r.length;u+=1)G(o[u]);t=!0}},o(a){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)H(o[u]);t=!1},d(a){hl(o,a),a&&M(e)}}}function sf(n){let e,t,r,o;return e=new Ka({props:{$$slots:{default:[af]},$$scope:{ctx:n}}}),{c(){de(e.$$.fragment)},m(l,a){he(e,l,a),t=!0,r||(o=$(window,"keydown",n[4]),r=!0)},p(l,[a]){const u={};a&8195&&(u.$$scope={dirty:a,ctx:l}),e.$set(u)},i(l){t||(G(e.$$.fragment,l),t=!0)},o(l){H(e.$$.fragment,l),t=!1},d(l){pe(e,l),r=!1,o()}}}function xr(n){if(n.properties.name)return n.properties.name;var e=n.properties.intervention_type;return e=="other"&&(n.geometry.type=="Point"?e="point":n.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function uf(n,e,t){let r,o,l;Tt(n,vi,p=>t(9,r=p)),Tt(n,Oe,p=>t(0,o=p)),Tt(n,di,p=>t(1,l=p));function a(){Nn.set(null)}function u(p){for(let m of o.features)if(m.properties.editing&&m.id!=p){delete m.properties.editing;return}}function c(p){const m=r;if(p.key=="Delete"){const S=p.originalTarget.tagName;if(S!="CANVAS"&&S!="BODY")return;p.preventDefault(),Oe.update(O=>(O.features=O.features.filter(j=>j.id!=m),O))}}function f(p,m){n.$$.not_equal(m.properties.name,p)&&(m.properties.name=p,Oe.set(o))}function h(p,m){n.$$.not_equal(m.properties.intervention_type,p)&&(m.properties.intervention_type=p,Oe.set(o))}function v(p,m){n.$$.not_equal(m.properties.description,p)&&(m.properties.description=p,Oe.set(o))}function y(p,m){n.$$.not_equal(m.properties.editing,p)&&(m.properties.editing=p,Oe.set(o))}return[o,l,a,u,c,f,h,v,y]}class ff extends Pe{constructor(e){super(),Ae(this,e,uf,sf,Ne,{})}}function cf(n){let e,t,r,o,l,a,u,c,f,h,v,y,p,m,S,O,j,I,C,N=n[0].features.length+"",A,F,ge,z,oe,ae,D,te;return{c(){e=V("div"),t=V("label"),r=ve(`Scheme name:
    `),o=V("input"),l=Z(),a=V("br"),u=Z(),c=V("div"),f=V("label"),h=V("input"),v=Z(),y=V("button"),y.textContent="Load from GeoJSON",p=Z(),m=V("button"),m.textContent="Export to GeoJSON",S=Z(),O=V("br"),j=Z(),I=V("div"),C=V("span"),A=ve(N),F=ve(" interventions"),ge=Z(),z=V("button"),oe=ve("Clear all"),K(o,"type","text"),K(h,"type","file"),K(h,"id","load_geojson"),K(h,"class","svelte-lhyd1e"),K(y,"type","button"),K(y,"onclick","document.getElementById('load_geojson').click();"),K(m,"type","button"),K(m,"class","align-right svelte-lhyd1e"),K(z,"type","button"),K(z,"class","align-right svelte-lhyd1e"),z.disabled=ae=n[0].features.length==0},m(R,ie){L(R,e,ie),B(e,t),B(t,r),B(t,o),pn(o,n[0].scheme_name),L(R,l,ie),L(R,a,ie),L(R,u,ie),L(R,c,ie),B(c,f),B(f,h),B(f,v),B(f,y),B(c,p),B(c,m),L(R,S,ie),L(R,O,ie),L(R,j,ie),L(R,I,ie),B(I,C),B(C,A),B(C,F),B(I,ge),B(I,z),B(z,oe),D||(te=[$(o,"input",n[5]),$(h,"change",n[3]),$(m,"click",n[2]),$(z,"click",n[1])],D=!0)},p(R,[ie]){ie&1&&o.value!==R[0].scheme_name&&pn(o,R[0].scheme_name),ie&1&&N!==(N=R[0].features.length+"")&&Fe(A,N),ie&1&&ae!==(ae=R[0].features.length==0)&&(z.disabled=ae)},i:Xe,o:Xe,d(R){R&&M(e),R&&M(l),R&&M(a),R&&M(u),R&&M(c),R&&M(S),R&&M(O),R&&M(j),R&&M(I),D=!1,dt(te)}}}function df(n,e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(e)),t.setAttribute("download",n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function hf(n,e,t){let r;Tt(n,Oe,v=>t(0,r=v));let{authorityName:o}=e,l=window.localStorage.getItem(o);if(l)try{Oe.set(JSON.parse(l))}catch(v){console.log(`Failed to load from local storage: ${v}`)}Oe.subscribe(()=>window.localStorage.setItem(o,JSON.stringify(u())));function a(){confirm("Do you want to clear the current scheme? (You should save it first!)")&&Oe.update(v=>(delete v.scheme_name,v.features=[],v))}function u(){const v=JSON.parse(JSON.stringify(r));for(let y of v.features)delete y.properties.editing;return v}function c(){let v=u();var y=o;v.authority=o,v.origin="atip-v1",v.scheme_name&&(y+="_"+v.scheme_name),y+=".txt",df(y,JSON.stringify(v,null,"  "))}function f(v){const y=new FileReader;y.onload=p=>{try{Oe.set(JSON.parse(p.target.result))}catch(m){window.alert(`Couldn't load scheme from a file: ${m}`)}},y.readAsText(v.target.files[0])}function h(){r.scheme_name=this.value,Oe.set(r)}return n.$$set=v=>{"authorityName"in v&&t(4,o=v.authorityName)},[r,a,c,f,o,h]}class pf extends Pe{constructor(e){super(),Ae(this,e,hf,cf,Ne,{authorityName:4})}}let dn="hover",$r="yellow",gf=10,mf=7;function bf(n,e,t){let r,o;Tt(n,Oe,u=>t(1,r=u));const{getMap:l}=tn("map"),a=bl(Oe,u=>u.features.some(c=>c.properties.editing));return Tt(n,a,u=>t(2,o=u)),nn(()=>{const u=l();u.addSource(dn,{type:"geojson",data:Rn()}),u.addLayer({id:"hover-polygons",source:dn,filter:Sr,...Mr($r,.5)}),u.addLayer({id:"hover-lines",source:dn,filter:bi,...kr($r,1.5*gf,1)}),u.addLayer({id:"hover-points",source:dn,filter:Tr,...Cr($r,1.5*mf,.5)}),a.subscribe(c=>{c&&Nn.set(null)}),Nn.subscribe(c=>{c&&!o?u.getSource(dn).setData(r.features.find(f=>f.id==c)):u.getSource(dn).setData(Rn())})}),[a]}class vf extends Pe{constructor(e){super(),Ae(this,e,bf,null,Ne,{})}}let xn="editing",ei="red",_f=10,yf=7;function Ef(n,e,t){let r;Tt(n,Oe,l=>t(0,r=l));const{getMap:o}=tn("map");return nn(()=>{const l=o();l.addSource(xn,{type:"geojson",data:Rn()}),l.addLayer({id:"editing-polygons",source:xn,filter:Sr,...Mr(ei,.5)}),l.addLayer({id:"editing-lines",source:xn,filter:bi,...kr(ei,1.5*_f)}),l.addLayer({id:"editing-points",source:xn,filter:Tr,...Cr(ei,1.5*yf)}),Oe.subscribe(a=>{l.getSource(xn).setData(a.features.find(u=>u.properties.editing)||Rn())}),vi.subscribe(a=>{if(a){let u=r.features.find(c=>c.id==a);u.geometry.type=="Point"?l.flyTo({center:u.geometry.coordinates}):l.fitBounds(ml(u),{padding:200,animate:!0,duration:500})}})}),[]}class wf extends Pe{constructor(e){super(),Ae(this,e,Ef,null,Ne,{})}}function Sf(n){let e,t,r,o,l,a,u,c;return{c(){e=V("div"),t=V("button"),t.textContent="Home",r=Z(),o=V("button"),o.textContent="About",l=Z(),a=V("button"),a.textContent="Instructions",K(t,"type","button"),K(t,"onclick","window.open('index.html');"),K(o,"type","button"),K(a,"type","button"),K(e,"slot","nav")},m(f,h){L(f,e,h),B(e,t),B(e,r),B(e,o),B(e,l),B(e,a),u||(c=[$(o,"click",n[4]),$(a,"click",n[5])],u=!0)},p:Xe,d(f){f&&M(e),u=!1,dt(c)}}}function Tf(n){let e,t,r,o,l,a,u,c,f;return o=new pf({props:{authorityName:n[3]}}),c=new ff({}),{c(){e=V("div"),t=V("h1"),t.textContent=`${n[3]}`,r=Z(),de(o.$$.fragment),l=Z(),a=V("br"),u=Z(),de(c.$$.fragment),K(e,"slot","sidebar")},m(h,v){L(h,e,v),B(e,t),B(e,r),he(o,e,null),B(e,l),B(e,a),B(e,u),he(c,e,null),f=!0},p:Xe,i(h){f||(G(o.$$.fragment,h),G(c.$$.fragment,h),f=!0)},o(h){H(o.$$.fragment,h),H(c.$$.fragment,h),f=!1},d(h){h&&M(e),pe(o),pe(c)}}}function kf(n){let e,t,r,o,l,a,u,c;return e=new Du({props:{authorityName:n[3]}}),r=new Ku({props:{url:n[2]}}),l=new vf({}),u=new wf({}),{c(){de(e.$$.fragment),t=Z(),de(r.$$.fragment),o=Z(),de(l.$$.fragment),a=Z(),de(u.$$.fragment)},m(f,h){he(e,f,h),L(f,t,h),he(r,f,h),L(f,o,h),he(l,f,h),L(f,a,h),he(u,f,h),c=!0},p(f,h){const v={};h&4&&(v.url=f[2]),r.$set(v)},i(f){c||(G(e.$$.fragment,f),G(r.$$.fragment,f),G(l.$$.fragment,f),G(u.$$.fragment,f),c=!0)},o(f){H(e.$$.fragment,f),H(r.$$.fragment,f),H(l.$$.fragment,f),H(u.$$.fragment,f),c=!1},d(f){pe(e,f),f&&M(t),pe(r,f),f&&M(o),pe(l,f),f&&M(a),pe(u,f)}}}function Cf(n){let e,t,r;return t=new tu({props:{$$slots:{default:[kf]},$$scope:{ctx:n}}}),{c(){e=V("div"),de(t.$$.fragment),K(e,"slot","main")},m(o,l){L(o,e,l),he(t,e,null),r=!0},p(o,l){const a={};l&1028&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){r||(G(t.$$.fragment,o),r=!0)},o(o){H(t.$$.fragment,o),r=!1},d(o){o&&M(e),pe(t)}}}function If(n){let e,t,r,o,l,a,u,c;e=new au({props:{$$slots:{main:[Cf],sidebar:[Tf],nav:[Sf]},$$scope:{ctx:n}}});function f(p){n[6](p)}let h={};n[0]!==void 0&&(h.open=n[0]),r=new Aa({props:h}),$e.push(()=>kt(r,"open",f,n[0]));function v(p){n[7](p)}let y={};return n[1]!==void 0&&(y.open=n[1]),a=new Qs({props:y}),$e.push(()=>kt(a,"open",v,n[1])),{c(){de(e.$$.fragment),t=Z(),de(r.$$.fragment),l=Z(),de(a.$$.fragment)},m(p,m){he(e,p,m),L(p,t,m),he(r,p,m),L(p,l,m),he(a,p,m),c=!0},p(p,[m]){const S={};m&1028&&(S.$$scope={dirty:m,ctx:p}),e.$set(S);const O={};!o&&m&1&&(o=!0,O.open=p[0],Ct(()=>o=!1)),r.$set(O);const j={};!u&&m&2&&(u=!0,j.open=p[1],Ct(()=>u=!1)),a.$set(j)},i(p){c||(G(e.$$.fragment,p),G(r.$$.fragment,p),G(a.$$.fragment,p),c=!0)},o(p){H(e.$$.fragment,p),H(r.$$.fragment,p),H(a.$$.fragment,p),c=!1},d(p){pe(e,p),p&&M(t),pe(r,p),p&&M(l),pe(a,p)}}}function xf(n,e,t){let r=!1,o=!1,l=window.location.hostname.includes("atip.uk"),u=new URLSearchParams(window.location.search).get("authority");var c=`https://atip.uk/route-snappers/${u}.bin`;l||(c=`https://atip.uk/route-snappers-dev/${u}.bin`);function f(){t(0,r=!r),t(1,o=!1)}function h(){t(1,o=!o),t(0,r=!1)}function v(p){r=p,t(0,r)}function y(p){o=p,t(1,o)}return[r,o,c,u,f,h,v,y]}class Of extends Pe{constructor(e){super(),Ae(this,e,xf,If,Ne,{})}}new Of({target:document.getElementById("app")});
