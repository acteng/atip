var Bs=(t,e,o)=>{if(!e.has(t))throw TypeError("Cannot "+o)};var Pn=(t,e,o)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,o)};var mt=(t,e,o)=>(Bs(t,e,"access private method"),o);import{b as ii,g as Br,a as Rs,c as Fn}from"./authorities-0797988d.js";function Me(){}function ye(t,e){for(const o in e)t[o]=e[o];return t}function Rr(t){return t()}function or(){return Object.create(null)}function qe(t){t.forEach(Rr)}function Bn(t){return typeof t=="function"}function Ne(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function zs(t){return Object.keys(t).length===0}function bi(t,...e){if(t==null)return Me;const o=t.subscribe(...e);return o.unsubscribe?()=>o.unsubscribe():o}function Us(t){let e;return bi(t,o=>e=o)(),e}function Ft(t,e,o){t.$$.on_destroy.push(bi(e,o))}function it(t,e,o,i){if(t){const a=zr(t,e,o,i);return t[0](a)}}function zr(t,e,o,i){return t[1]&&i?ye(o.ctx.slice(),t[1](i(e))):o.ctx}function rt(t,e,o,i){if(t[2]&&i){const a=t[2](i(o));if(e.dirty===void 0)return a;if(typeof a=="object"){const l=[],s=Math.max(e.dirty.length,a.length);for(let c=0;c<s;c+=1)l[c]=e.dirty[c]|a[c];return l}return e.dirty|a}return e.dirty}function st(t,e,o,i,a,l){if(a){const s=zr(e,o,i,l);t.p(s,a)}}function at(t){if(t.ctx.length>32){const e=[],o=t.ctx.length/32;for(let i=0;i<o;i++)e[i]=-1;return e}return-1}function ft(t){const e={};for(const o in t)o[0]!=="$"&&(e[o]=t[o]);return e}function Ye(t,e){const o={};e=new Set(e);for(const i in t)!e.has(i)&&i[0]!=="$"&&(o[i]=t[i]);return o}function Js(t){const e={};for(const o in t)e[o]=!0;return e}function ir(t){return t??""}function Gs(t,e,o){return t.set(o),e}function N(t,e){t.appendChild(e)}function A(t,e,o){t.insertBefore(e,o||null)}function O(t){t.parentNode&&t.parentNode.removeChild(t)}function Eo(t,e){for(let o=0;o<t.length;o+=1)t[o]&&t[o].d(e)}function D(t){return document.createElement(t)}function hn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Fe(t){return document.createTextNode(t)}function ee(){return Fe(" ")}function gn(){return Fe("")}function Q(t,e,o,i){return t.addEventListener(e,o,i),()=>t.removeEventListener(e,o,i)}function H(t,e,o){o==null?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o)}function Je(t,e){const o=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i==="style"?t.style.cssText=e[i]:i==="__value"?t.value=t[i]=e[i]:o[i]&&o[i].set?t[i]=e[i]:H(t,i,e[i])}function bo(t,e){for(const o in e)H(t,o,e[o])}function Vs(t){return Array.from(t.childNodes)}function lt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function pn(t,e){t.value=e??""}function li(t,e,o,i){o===null?t.style.removeProperty(e):t.style.setProperty(e,o,i?"important":"")}function F(t,e,o){t.classList[o?"add":"remove"](e)}function Ws(t,e,{bubbles:o=!1,cancelable:i=!1}={}){const a=document.createEvent("CustomEvent");return a.initCustomEvent(t,o,i,e),a}function yo(t,e){return new t(e)}let Rn;function jn(t){Rn=t}function _n(){if(!Rn)throw new Error("Function called outside component initialization");return Rn}function en(t){_n().$$.on_mount.push(t)}function qs(t){_n().$$.after_update.push(t)}function Hs(t){_n().$$.on_destroy.push(t)}function Ys(){const t=_n();return(e,o,{cancelable:i=!1}={})=>{const a=t.$$.callbacks[e];if(a){const l=Ws(e,o,{cancelable:i});return a.slice().forEach(s=>{s.call(t,l)}),!l.defaultPrevented}return!0}}function Ur(t,e){return _n().$$.context.set(t,e),e}function bn(t){return _n().$$.context.get(t)}function ae(t,e){const o=t.$$.callbacks[e.type];o&&o.slice().forEach(i=>i.call(this,e))}const Tn=[],We=[],po=[],ui=[],Ks=Promise.resolve();let ci=!1;function Zs(){ci||(ci=!0,Ks.then(Jr))}function fi(t){po.push(t)}function Jt(t){ui.push(t)}const ri=new Set;let co=0;function Jr(){const t=Rn;do{for(;co<Tn.length;){const e=Tn[co];co++,jn(e),Xs(e.$$)}for(jn(null),Tn.length=0,co=0;We.length;)We.pop()();for(let e=0;e<po.length;e+=1){const o=po[e];ri.has(o)||(ri.add(o),o())}po.length=0}while(Tn.length);for(;ui.length;)ui.pop()();ci=!1,ri.clear(),jn(t)}function Xs(t){if(t.fragment!==null){t.update(),qe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(fi)}}const ho=new Set;let $t;function et(){$t={r:0,c:[],p:$t}}function tt(){$t.r||qe($t.c),$t=$t.p}function U(t,e){t&&t.i&&(ho.delete(t),t.i(e))}function Y(t,e,o,i){if(t&&t.o){if(ho.has(t))return;ho.add(t),$t.c.push(()=>{ho.delete(t),i&&(o&&t.d(1),i())}),t.o(e)}else i&&i()}function Qs(t,e){Y(t,1,1,()=>{e.delete(t.key)})}function $s(t,e,o,i,a,l,s,c,f,d,h,w){let E=t.length,m=l.length,p=E;const S={};for(;p--;)S[t[p].key]=p;const W=[],te=new Map,I=new Map;for(p=m;p--;){const $=w(a,l,p),de=o($);let z=s.get(de);z?i&&z.p($,e):(z=d(de,$),z.c()),te.set(de,W[p]=z),de in S&&I.set(de,Math.abs(p-S[de]))}const x=new Set,V=new Set;function J($){U($,1),$.m(c,h),s.set($.key,$),h=$.first,m--}for(;E&&m;){const $=W[m-1],de=t[E-1],z=$.key,ve=de.key;$===de?(h=$.first,E--,m--):te.has(ve)?!s.has(z)||x.has(z)?J($):V.has(ve)?E--:I.get(z)>I.get(ve)?(V.add(z),J($)):(x.add(ve),E--):(f(de,s),E--)}for(;E--;){const $=t[E];te.has($.key)||f($,s)}for(;m;)J(W[m-1]);return W}function nt(t,e){const o={},i={},a={$$scope:1};let l=t.length;for(;l--;){const s=t[l],c=e[l];if(c){for(const f in s)f in c||(i[f]=1);for(const f in c)a[f]||(o[f]=c[f],a[f]=1);t[l]=c}else for(const f in s)a[f]=1}for(const s in i)s in o||(o[s]=void 0);return o}function Gr(t){return typeof t=="object"&&t!==null?t:{}}function Gt(t,e,o,i){const a=t.$$.props[e];a!==void 0&&(t.$$.bound[a]=o,i===void 0&&o(t.$$.ctx[a]))}function ge(t){t&&t.c()}function he(t,e,o,i){const{fragment:a,after_update:l}=t.$$;a&&a.m(e,o),i||fi(()=>{const s=t.$$.on_mount.map(Rr).filter(Bn);t.$$.on_destroy?t.$$.on_destroy.push(...s):qe(s),t.$$.on_mount=[]}),l.forEach(fi)}function me(t,e){const o=t.$$;o.fragment!==null&&(qe(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}function ea(t,e){t.$$.dirty[0]===-1&&(Tn.push(t),Zs(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Re(t,e,o,i,a,l,s,c=[-1]){const f=Rn;jn(t);const d=t.$$={fragment:null,ctx:[],props:l,update:Me,not_equal:a,bound:or(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:or(),dirty:c,skip_bound:!1,root:e.target||f.$$.root};s&&s(d.root);let h=!1;if(d.ctx=o?o(t,e.props||{},(w,E,...m)=>{const p=m.length?m[0]:E;return d.ctx&&a(d.ctx[w],d.ctx[w]=p)&&(!d.skip_bound&&d.bound[w]&&d.bound[w](p),h&&ea(t,w)),E}):[],d.update(),h=!0,qe(d.before_update),d.fragment=i?i(d.ctx):!1,e.target){if(e.hydrate){const w=Vs(e.target);d.fragment&&d.fragment.l(w),w.forEach(O)}else d.fragment&&d.fragment.c();e.intro&&U(t.$$.fragment),he(t,e.target,e.anchor,e.customElement),Jr()}jn(f)}class ze{$destroy(){me(this,1),this.$destroy=Me}$on(e,o){if(!Bn(o))return Me;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(o),()=>{const a=i.indexOf(o);a!==-1&&i.splice(a,1)}}$set(e){this.$$set&&!zs(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const cn=[];function ta(t,e){return{subscribe:tn(t,e).subscribe}}function tn(t,e=Me){let o;const i=new Set;function a(c){if(Ne(t,c)&&(t=c,o)){const f=!cn.length;for(const d of i)d[1](),cn.push(d,t);if(f){for(let d=0;d<cn.length;d+=2)cn[d][0](cn[d+1]);cn.length=0}}}function l(c){a(c(t))}function s(c,f=Me){const d=[c,f];return i.add(d),i.size===1&&(o=e(a)||Me),c(t),()=>{i.delete(d),i.size===0&&(o(),o=null)}}return{set:a,update:l,subscribe:s}}function Vr(t,e,o){const i=!Array.isArray(t),a=i?[t]:t,l=e.length<2;return ta(o,s=>{let c=!1;const f=[];let d=0,h=Me;const w=()=>{if(d)return;h();const m=e(i?f[0]:f,s);l?s(m):h=Bn(m)?m:Me},E=a.map((m,p)=>bi(m,S=>{f[p]=S,d&=~(1<<p),c&&w()},()=>{d|=1<<p}));return c=!0,w(),function(){qe(E),h()}})}function rr(t){let e,o;return{c(){e=hn("title"),o=Fe(t[1])},m(i,a){A(i,e,a),N(e,o)},p(i,a){a&2&&lt(o,i[1])},d(i){i&&O(e)}}}function na(t){let e,o,i=t[1]&&rr(t),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],l={};for(let s=0;s<a.length;s+=1)l=ye(l,a[s]);return{c(){e=hn("svg"),i&&i.c(),o=hn("path"),H(o,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),bo(e,l)},m(s,c){A(s,e,c),i&&i.m(e,null),N(e,o)},p(s,[c]){s[1]?i?i.p(s,c):(i=rr(s),i.c(),i.m(e,o)):i&&(i.d(1),i=null),bo(e,l=nt(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},c&1&&{width:s[0]},c&1&&{height:s[0]},c&4&&s[2],c&8&&s[3]]))},i:Me,o:Me,d(s){s&&O(e),i&&i.d()}}}function oa(t,e,o){let i,a;const l=["size","title"];let s=Ye(e,l),{size:c=16}=e,{title:f=void 0}=e;return t.$$set=d=>{o(5,e=ye(ye({},e),ft(d))),o(3,s=Ye(e,l)),"size"in d&&o(0,c=d.size),"title"in d&&o(1,f=d.title)},t.$$.update=()=>{o(4,i=e["aria-label"]||e["aria-labelledby"]||f),o(2,a={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ft(e),[c,f,a,s,i]}class ia extends ze{constructor(e){super(),Re(this,e,oa,na,Ne,{size:0,title:1})}}const yi=ia;function sr(t,e,o){const i=t.slice();return i[2]=e[o].width,i}function ra(t){let e,o,i,a,l=[t[4],{style:o="width: "+t[2]+";"+t[4].style}],s={};for(let c=0;c<l.length;c+=1)s=ye(s,l[c]);return{c(){e=D("p"),Je(e,s),F(e,"bx--skeleton__text",!0),F(e,"bx--skeleton__heading",t[0])},m(c,f){A(c,e,f),i||(a=[Q(e,"click",t[12]),Q(e,"mouseover",t[13]),Q(e,"mouseenter",t[14]),Q(e,"mouseleave",t[15])],i=!0)},p(c,f){Je(e,s=nt(l,[f&16&&c[4],f&20&&o!==(o="width: "+c[2]+";"+c[4].style)&&{style:o}])),F(e,"bx--skeleton__text",!0),F(e,"bx--skeleton__heading",c[0])},d(c){c&&O(e),i=!1,qe(a)}}}function sa(t){let e,o,i,a=t[3],l=[];for(let f=0;f<a.length;f+=1)l[f]=ar(sr(t,a,f));let s=[t[4]],c={};for(let f=0;f<s.length;f+=1)c=ye(c,s[f]);return{c(){e=D("div");for(let f=0;f<l.length;f+=1)l[f].c();Je(e,c)},m(f,d){A(f,e,d);for(let h=0;h<l.length;h+=1)l[h].m(e,null);o||(i=[Q(e,"click",t[8]),Q(e,"mouseover",t[9]),Q(e,"mouseenter",t[10]),Q(e,"mouseleave",t[11])],o=!0)},p(f,d){if(d&9){a=f[3];let h;for(h=0;h<a.length;h+=1){const w=sr(f,a,h);l[h]?l[h].p(w,d):(l[h]=ar(w),l[h].c(),l[h].m(e,null))}for(;h<l.length;h+=1)l[h].d(1);l.length=a.length}Je(e,c=nt(s,[d&16&&f[4]]))},d(f){f&&O(e),Eo(l,f),o=!1,qe(i)}}}function ar(t){let e;return{c(){e=D("p"),li(e,"width",t[2]),F(e,"bx--skeleton__text",!0),F(e,"bx--skeleton__heading",t[0])},m(o,i){A(o,e,i)},p(o,i){i&8&&li(e,"width",o[2]),i&1&&F(e,"bx--skeleton__heading",o[0])},d(o){o&&O(e)}}}function aa(t){let e;function o(l,s){return l[1]?sa:ra}let i=o(t),a=i(t);return{c(){a.c(),e=gn()},m(l,s){a.m(l,s),A(l,e,s)},p(l,[s]){i===(i=o(l))&&a?a.p(l,s):(a.d(1),a=i(l),a&&(a.c(),a.m(e.parentNode,e)))},i:Me,o:Me,d(l){a.d(l),l&&O(e)}}}function la(t,e,o){let i,a,l;const s=["lines","heading","paragraph","width"];let c=Ye(e,s),{lines:f=3}=e,{heading:d=!1}=e,{paragraph:h=!1}=e,{width:w="100%"}=e;const E=[.973,.153,.567];function m(J){ae.call(this,t,J)}function p(J){ae.call(this,t,J)}function S(J){ae.call(this,t,J)}function W(J){ae.call(this,t,J)}function te(J){ae.call(this,t,J)}function I(J){ae.call(this,t,J)}function x(J){ae.call(this,t,J)}function V(J){ae.call(this,t,J)}return t.$$set=J=>{e=ye(ye({},e),ft(J)),o(4,c=Ye(e,s)),"lines"in J&&o(5,f=J.lines),"heading"in J&&o(0,d=J.heading),"paragraph"in J&&o(1,h=J.paragraph),"width"in J&&o(2,w=J.width)},t.$$.update=()=>{if(t.$$.dirty&4&&o(7,a=parseInt(w,10)),t.$$.dirty&4&&o(6,l=w.includes("px")),t.$$.dirty&238&&h)for(let J=0;J<f;J++){const $=l?a-75:0,de=l?a:75,z=Math.floor(E[J%3]*(de-$+1))+$+"px";o(3,i=[...i,{width:l?z:`calc(${w} - ${z})`}])}},o(3,i=[]),[d,h,w,i,c,f,l,a,m,p,S,W,te,I,x,V]}class ua extends ze{constructor(e){super(),Re(this,e,la,aa,Ne,{lines:5,heading:0,paragraph:1,width:2})}}const An=ua;function lr(t,e,o){const i=t.slice();return i[9]=e[o],i}function ur(t){let e,o,i,a,l,s,c,f,d,h,w,E,m;return i=new yi({props:{class:"bx--accordion__arrow"}}),l=new An({props:{class:"bx--accordion__title"}}),f=new An({props:{width:"90%"}}),h=new An({props:{width:"80%"}}),E=new An({props:{width:"95%"}}),{c(){e=D("li"),o=D("span"),ge(i.$$.fragment),a=ee(),ge(l.$$.fragment),s=ee(),c=D("div"),ge(f.$$.fragment),d=ee(),ge(h.$$.fragment),w=ee(),ge(E.$$.fragment),F(o,"bx--accordion__heading",!0),F(c,"bx--accordion__content",!0),F(e,"bx--accordion__item",!0),F(e,"bx--accordion__item--active",!0)},m(p,S){A(p,e,S),N(e,o),he(i,o,null),N(o,a),he(l,o,null),N(e,s),N(e,c),he(f,c,null),N(c,d),he(h,c,null),N(c,w),he(E,c,null),m=!0},i(p){m||(U(i.$$.fragment,p),U(l.$$.fragment,p),U(f.$$.fragment,p),U(h.$$.fragment,p),U(E.$$.fragment,p),m=!0)},o(p){Y(i.$$.fragment,p),Y(l.$$.fragment,p),Y(f.$$.fragment,p),Y(h.$$.fragment,p),Y(E.$$.fragment,p),m=!1},d(p){p&&O(e),me(i),me(l),me(f),me(h),me(E)}}}function cr(t,e){let o,i,a,l,s,c,f;return a=new yi({props:{class:"bx--accordion__arrow"}}),s=new An({props:{class:"bx--accordion__title"}}),{key:t,first:null,c(){o=D("li"),i=D("span"),ge(a.$$.fragment),l=ee(),ge(s.$$.fragment),c=ee(),F(i,"bx--accordion__heading",!0),F(o,"bx--accordion__item",!0),this.first=o},m(d,h){A(d,o,h),N(o,i),he(a,i,null),N(i,l),he(s,i,null),N(o,c),f=!0},p(d,h){},i(d){f||(U(a.$$.fragment,d),U(s.$$.fragment,d),f=!0)},o(d){Y(a.$$.fragment,d),Y(s.$$.fragment,d),f=!1},d(d){d&&O(o),me(a),me(s)}}}function ca(t){let e,o,i=[],a=new Map,l,s,c,f=t[3]&&ur(),d=Array.from({length:t[3]?t[0]-1:t[0]},fr);const h=m=>m[9];for(let m=0;m<d.length;m+=1){let p=lr(t,d,m),S=h(p);a.set(S,i[m]=cr(S))}let w=[t[4]],E={};for(let m=0;m<w.length;m+=1)E=ye(E,w[m]);return{c(){e=D("ul"),f&&f.c(),o=ee();for(let m=0;m<i.length;m+=1)i[m].c();Je(e,E),F(e,"bx--skeleton",!0),F(e,"bx--accordion",!0),F(e,"bx--accordion--start",t[1]==="start"),F(e,"bx--accordion--end",t[1]==="end"),F(e,"bx--accordion--sm",t[2]==="sm"),F(e,"bx--accordion--xl",t[2]==="xl")},m(m,p){A(m,e,p),f&&f.m(e,null),N(e,o);for(let S=0;S<i.length;S+=1)i[S].m(e,null);l=!0,s||(c=[Q(e,"click",t[5]),Q(e,"mouseover",t[6]),Q(e,"mouseenter",t[7]),Q(e,"mouseleave",t[8])],s=!0)},p(m,[p]){m[3]?f?p&8&&U(f,1):(f=ur(),f.c(),U(f,1),f.m(e,o)):f&&(et(),Y(f,1,1,()=>{f=null}),tt()),p&9&&(d=Array.from({length:m[3]?m[0]-1:m[0]},fr),et(),i=$s(i,p,h,1,m,d,a,e,Qs,cr,null,lr),tt()),Je(e,E=nt(w,[p&16&&m[4]])),F(e,"bx--skeleton",!0),F(e,"bx--accordion",!0),F(e,"bx--accordion--start",m[1]==="start"),F(e,"bx--accordion--end",m[1]==="end"),F(e,"bx--accordion--sm",m[2]==="sm"),F(e,"bx--accordion--xl",m[2]==="xl")},i(m){if(!l){U(f);for(let p=0;p<d.length;p+=1)U(i[p]);l=!0}},o(m){Y(f);for(let p=0;p<i.length;p+=1)Y(i[p]);l=!1},d(m){m&&O(e),f&&f.d();for(let p=0;p<i.length;p+=1)i[p].d();s=!1,qe(c)}}}const fr=(t,e)=>e;function fa(t,e,o){const i=["count","align","size","open"];let a=Ye(e,i),{count:l=4}=e,{align:s="end"}=e,{size:c=void 0}=e,{open:f=!0}=e;function d(m){ae.call(this,t,m)}function h(m){ae.call(this,t,m)}function w(m){ae.call(this,t,m)}function E(m){ae.call(this,t,m)}return t.$$set=m=>{e=ye(ye({},e),ft(m)),o(4,a=Ye(e,i)),"count"in m&&o(0,l=m.count),"align"in m&&o(1,s=m.align),"size"in m&&o(2,c=m.size),"open"in m&&o(3,f=m.open)},[l,s,c,f,a,d,h,w,E]}class da extends ze{constructor(e){super(),Re(this,e,fa,ca,Ne,{count:0,align:1,size:2,open:3})}}const pa=da;function ha(t){let e,o,i,a;const l=t[6].default,s=it(l,t,t[5],null);let c=[t[3]],f={};for(let d=0;d<c.length;d+=1)f=ye(f,c[d]);return{c(){e=D("ul"),s&&s.c(),Je(e,f),F(e,"bx--accordion",!0),F(e,"bx--accordion--start",t[0]==="start"),F(e,"bx--accordion--end",t[0]==="end"),F(e,"bx--accordion--sm",t[1]==="sm"),F(e,"bx--accordion--xl",t[1]==="xl")},m(d,h){A(d,e,h),s&&s.m(e,null),o=!0,i||(a=[Q(e,"click",t[7]),Q(e,"mouseover",t[8]),Q(e,"mouseenter",t[9]),Q(e,"mouseleave",t[10])],i=!0)},p(d,h){s&&s.p&&(!o||h&32)&&st(s,l,d,d[5],o?rt(l,d[5],h,null):at(d[5]),null),Je(e,f=nt(c,[h&8&&d[3]])),F(e,"bx--accordion",!0),F(e,"bx--accordion--start",d[0]==="start"),F(e,"bx--accordion--end",d[0]==="end"),F(e,"bx--accordion--sm",d[1]==="sm"),F(e,"bx--accordion--xl",d[1]==="xl")},i(d){o||(U(s,d),o=!0)},o(d){Y(s,d),o=!1},d(d){d&&O(e),s&&s.d(d),i=!1,qe(a)}}}function ma(t){let e,o;const i=[t[3],{align:t[0]},{size:t[1]}];let a={};for(let l=0;l<i.length;l+=1)a=ye(a,i[l]);return e=new pa({props:a}),e.$on("click",t[11]),e.$on("mouseover",t[12]),e.$on("mouseenter",t[13]),e.$on("mouseleave",t[14]),{c(){ge(e.$$.fragment)},m(l,s){he(e,l,s),o=!0},p(l,s){const c=s&11?nt(i,[s&8&&Gr(l[3]),s&1&&{align:l[0]},s&2&&{size:l[1]}]):{};e.$set(c)},i(l){o||(U(e.$$.fragment,l),o=!0)},o(l){Y(e.$$.fragment,l),o=!1},d(l){me(e,l)}}}function ga(t){let e,o,i,a;const l=[ma,ha],s=[];function c(f,d){return f[2]?0:1}return e=c(t),o=s[e]=l[e](t),{c(){o.c(),i=gn()},m(f,d){s[e].m(f,d),A(f,i,d),a=!0},p(f,[d]){let h=e;e=c(f),e===h?s[e].p(f,d):(et(),Y(s[h],1,1,()=>{s[h]=null}),tt(),o=s[e],o?o.p(f,d):(o=s[e]=l[e](f),o.c()),U(o,1),o.m(i.parentNode,i))},i(f){a||(U(o),a=!0)},o(f){Y(o),a=!1},d(f){s[e].d(f),f&&O(i)}}}function _a(t,e,o){const i=["align","size","disabled","skeleton"];let a=Ye(e,i),{$$slots:l={},$$scope:s}=e,{align:c="end"}=e,{size:f=void 0}=e,{disabled:d=!1}=e,{skeleton:h=!1}=e;const w=tn(d);Ur("Accordion",{disableItems:w});function E(V){ae.call(this,t,V)}function m(V){ae.call(this,t,V)}function p(V){ae.call(this,t,V)}function S(V){ae.call(this,t,V)}function W(V){ae.call(this,t,V)}function te(V){ae.call(this,t,V)}function I(V){ae.call(this,t,V)}function x(V){ae.call(this,t,V)}return t.$$set=V=>{e=ye(ye({},e),ft(V)),o(3,a=Ye(e,i)),"align"in V&&o(0,c=V.align),"size"in V&&o(1,f=V.size),"disabled"in V&&o(4,d=V.disabled),"skeleton"in V&&o(2,h=V.skeleton),"$$scope"in V&&o(5,s=V.$$scope)},t.$$.update=()=>{t.$$.dirty&16&&w.set(d)},[c,f,h,a,d,s,l,E,m,p,S,W,te,I,x]}class ba extends ze{constructor(e){super(),Re(this,e,_a,ga,Ne,{align:0,size:1,disabled:4,skeleton:2})}}const ya=ba,va=t=>({}),dr=t=>({});function ka(t){let e;return{c(){e=Fe(t[2])},m(o,i){A(o,e,i)},p(o,i){i&4&&lt(e,o[2])},d(o){o&&O(e)}}}function wa(t){let e,o,i,a,l,s,c,f,d,h;i=new yi({props:{class:"bx--accordion__arrow","aria-label":t[3]}});const w=t[7].title,E=it(w,t,t[6],dr),m=E||ka(t),p=t[7].default,S=it(p,t,t[6],null);let W=[t[5]],te={};for(let I=0;I<W.length;I+=1)te=ye(te,W[I]);return{c(){e=D("li"),o=D("button"),ge(i.$$.fragment),a=ee(),l=D("div"),m&&m.c(),s=ee(),c=D("div"),S&&S.c(),F(l,"bx--accordion__title",!0),H(o,"type","button"),H(o,"title",t[3]),H(o,"aria-expanded",t[0]),o.disabled=t[1],F(o,"bx--accordion__heading",!0),F(c,"bx--accordion__content",!0),Je(e,te),F(e,"bx--accordion__item",!0),F(e,"bx--accordion__item--active",t[0]),F(e,"bx--accordion__item--disabled",t[1]),F(e,"bx--accordion__item--expanding",t[4]==="expanding"),F(e,"bx--accordion__item--collapsing",t[4]==="collapsing")},m(I,x){A(I,e,x),N(e,o),he(i,o,null),N(o,a),N(o,l),m&&m.m(l,null),N(e,s),N(e,c),S&&S.m(c,null),f=!0,d||(h=[Q(o,"click",t[9]),Q(o,"click",t[14]),Q(o,"mouseover",t[10]),Q(o,"mouseenter",t[11]),Q(o,"mouseleave",t[12]),Q(o,"keydown",t[13]),Q(o,"keydown",t[15]),Q(e,"animationend",t[8]),Q(e,"animationend",t[16])],d=!0)},p(I,[x]){const V={};x&8&&(V["aria-label"]=I[3]),i.$set(V),E?E.p&&(!f||x&64)&&st(E,w,I,I[6],f?rt(w,I[6],x,va):at(I[6]),dr):m&&m.p&&(!f||x&4)&&m.p(I,f?x:-1),(!f||x&8)&&H(o,"title",I[3]),(!f||x&1)&&H(o,"aria-expanded",I[0]),(!f||x&2)&&(o.disabled=I[1]),S&&S.p&&(!f||x&64)&&st(S,p,I,I[6],f?rt(p,I[6],x,null):at(I[6]),null),Je(e,te=nt(W,[x&32&&I[5]])),F(e,"bx--accordion__item",!0),F(e,"bx--accordion__item--active",I[0]),F(e,"bx--accordion__item--disabled",I[1]),F(e,"bx--accordion__item--expanding",I[4]==="expanding"),F(e,"bx--accordion__item--collapsing",I[4]==="collapsing")},i(I){f||(U(i.$$.fragment,I),U(m,I),U(S,I),f=!0)},o(I){Y(i.$$.fragment,I),Y(m,I),Y(S,I),f=!1},d(I){I&&O(e),me(i),m&&m.d(I),S&&S.d(I),d=!1,qe(h)}}}function Sa(t,e,o){const i=["title","open","disabled","iconDescription"];let a=Ye(e,i),{$$slots:l={},$$scope:s}=e,{title:c="title"}=e,{open:f=!1}=e,{disabled:d=!1}=e,{iconDescription:h="Expand/Collapse"}=e,w=d;const m=bn("Accordion").disableItems.subscribe(z=>{!z&&w||o(1,d=z)});let p;en(()=>()=>{m()});function S(z){ae.call(this,t,z)}function W(z){ae.call(this,t,z)}function te(z){ae.call(this,t,z)}function I(z){ae.call(this,t,z)}function x(z){ae.call(this,t,z)}function V(z){ae.call(this,t,z)}const J=()=>{o(0,f=!f),o(4,p=f?"expanding":"collapsing")},$=({key:z})=>{f&&z==="Escape"&&o(0,f=!1)},de=()=>{o(4,p=void 0)};return t.$$set=z=>{e=ye(ye({},e),ft(z)),o(5,a=Ye(e,i)),"title"in z&&o(2,c=z.title),"open"in z&&o(0,f=z.open),"disabled"in z&&o(1,d=z.disabled),"iconDescription"in z&&o(3,h=z.iconDescription),"$$scope"in z&&o(6,s=z.$$scope)},[f,d,c,h,p,a,s,l,S,W,te,I,x,V,J,$,de]}class Ca extends ze{constructor(e){super(),Re(this,e,Sa,wa,Ne,{title:2,open:0,disabled:1,iconDescription:3})}}const Ma=Ca;function Ea(t){let e,o,i,a=[t[2]],l={};for(let s=0;s<a.length;s+=1)l=ye(l,a[s]);return{c(){e=D("div"),Je(e,l),F(e,"bx--skeleton",!0),F(e,"bx--btn",!0),F(e,"bx--btn--field",t[1]==="field"),F(e,"bx--btn--sm",t[1]==="small"),F(e,"bx--btn--lg",t[1]==="lg"),F(e,"bx--btn--xl",t[1]==="xl")},m(s,c){A(s,e,c),o||(i=[Q(e,"click",t[7]),Q(e,"mouseover",t[8]),Q(e,"mouseenter",t[9]),Q(e,"mouseleave",t[10])],o=!0)},p(s,c){Je(e,l=nt(a,[c&4&&s[2]])),F(e,"bx--skeleton",!0),F(e,"bx--btn",!0),F(e,"bx--btn--field",s[1]==="field"),F(e,"bx--btn--sm",s[1]==="small"),F(e,"bx--btn--lg",s[1]==="lg"),F(e,"bx--btn--xl",s[1]==="xl")},d(s){s&&O(e),o=!1,qe(i)}}}function La(t){let e,o="",i,a,l,s,c=[{href:t[0]},{rel:a=t[2].target==="_blank"?"noopener noreferrer":void 0},{role:"button"},t[2]],f={};for(let d=0;d<c.length;d+=1)f=ye(f,c[d]);return{c(){e=D("a"),i=Fe(o),Je(e,f),F(e,"bx--skeleton",!0),F(e,"bx--btn",!0),F(e,"bx--btn--field",t[1]==="field"),F(e,"bx--btn--sm",t[1]==="small"),F(e,"bx--btn--lg",t[1]==="lg"),F(e,"bx--btn--xl",t[1]==="xl")},m(d,h){A(d,e,h),N(e,i),l||(s=[Q(e,"click",t[3]),Q(e,"mouseover",t[4]),Q(e,"mouseenter",t[5]),Q(e,"mouseleave",t[6])],l=!0)},p(d,h){Je(e,f=nt(c,[h&1&&{href:d[0]},h&4&&a!==(a=d[2].target==="_blank"?"noopener noreferrer":void 0)&&{rel:a},{role:"button"},h&4&&d[2]])),F(e,"bx--skeleton",!0),F(e,"bx--btn",!0),F(e,"bx--btn--field",d[1]==="field"),F(e,"bx--btn--sm",d[1]==="small"),F(e,"bx--btn--lg",d[1]==="lg"),F(e,"bx--btn--xl",d[1]==="xl")},d(d){d&&O(e),l=!1,qe(s)}}}function Ia(t){let e;function o(l,s){return l[0]?La:Ea}let i=o(t),a=i(t);return{c(){a.c(),e=gn()},m(l,s){a.m(l,s),A(l,e,s)},p(l,[s]){i===(i=o(l))&&a?a.p(l,s):(a.d(1),a=i(l),a&&(a.c(),a.m(e.parentNode,e)))},i:Me,o:Me,d(l){a.d(l),l&&O(e)}}}function Pa(t,e,o){const i=["href","size"];let a=Ye(e,i),{href:l=void 0}=e,{size:s="default"}=e;function c(S){ae.call(this,t,S)}function f(S){ae.call(this,t,S)}function d(S){ae.call(this,t,S)}function h(S){ae.call(this,t,S)}function w(S){ae.call(this,t,S)}function E(S){ae.call(this,t,S)}function m(S){ae.call(this,t,S)}function p(S){ae.call(this,t,S)}return t.$$set=S=>{e=ye(ye({},e),ft(S)),o(2,a=Ye(e,i)),"href"in S&&o(0,l=S.href),"size"in S&&o(1,s=S.size)},[l,s,a,c,f,d,h,w,E,m,p]}class Fa extends ze{constructor(e){super(),Re(this,e,Pa,Ia,Ne,{href:0,size:1})}}const Oa=Fa,Ta=t=>({props:t[0]&512}),pr=t=>({props:t[9]});function Aa(t){let e,o,i,a,l,s,c=t[8]&&hr(t);const f=t[19].default,d=it(f,t,t[18],null);var h=t[2];function w(p){return{props:{"aria-hidden":"true",class:"bx--btn__icon",style:p[8]?"margin-left: 0":void 0,"aria-label":p[3]}}}h&&(i=yo(h,w(t)));let E=[t[9]],m={};for(let p=0;p<E.length;p+=1)m=ye(m,E[p]);return{c(){e=D("button"),c&&c.c(),o=ee(),d&&d.c(),i&&ge(i.$$.fragment),Je(e,m)},m(p,S){A(p,e,S),c&&c.m(e,null),N(e,o),d&&d.m(e,null),i&&he(i,e,null),e.autofocus&&e.focus(),t[33](e),a=!0,l||(s=[Q(e,"click",t[24]),Q(e,"mouseover",t[25]),Q(e,"mouseenter",t[26]),Q(e,"mouseleave",t[27])],l=!0)},p(p,S){p[8]?c?c.p(p,S):(c=hr(p),c.c(),c.m(e,o)):c&&(c.d(1),c=null),d&&d.p&&(!a||S[0]&262144)&&st(d,f,p,p[18],a?rt(f,p[18],S,null):at(p[18]),null);const W={};if(S[0]&256&&(W.style=p[8]?"margin-left: 0":void 0),S[0]&8&&(W["aria-label"]=p[3]),h!==(h=p[2])){if(i){et();const te=i;Y(te.$$.fragment,1,0,()=>{me(te,1)}),tt()}h?(i=yo(h,w(p)),ge(i.$$.fragment),U(i.$$.fragment,1),he(i,e,null)):i=null}else h&&i.$set(W);Je(e,m=nt(E,[S[0]&512&&p[9]]))},i(p){a||(U(d,p),i&&U(i.$$.fragment,p),a=!0)},o(p){Y(d,p),i&&Y(i.$$.fragment,p),a=!1},d(p){p&&O(e),c&&c.d(),d&&d.d(p),i&&me(i),t[33](null),l=!1,qe(s)}}}function ja(t){let e,o,i,a,l,s,c=t[8]&&mr(t);const f=t[19].default,d=it(f,t,t[18],null);var h=t[2];function w(p){return{props:{"aria-hidden":"true",class:"bx--btn__icon","aria-label":p[3]}}}h&&(i=yo(h,w(t)));let E=[t[9]],m={};for(let p=0;p<E.length;p+=1)m=ye(m,E[p]);return{c(){e=D("a"),c&&c.c(),o=ee(),d&&d.c(),i&&ge(i.$$.fragment),Je(e,m)},m(p,S){A(p,e,S),c&&c.m(e,null),N(e,o),d&&d.m(e,null),i&&he(i,e,null),t[32](e),a=!0,l||(s=[Q(e,"click",t[20]),Q(e,"mouseover",t[21]),Q(e,"mouseenter",t[22]),Q(e,"mouseleave",t[23])],l=!0)},p(p,S){p[8]?c?c.p(p,S):(c=mr(p),c.c(),c.m(e,o)):c&&(c.d(1),c=null),d&&d.p&&(!a||S[0]&262144)&&st(d,f,p,p[18],a?rt(f,p[18],S,null):at(p[18]),null);const W={};if(S[0]&8&&(W["aria-label"]=p[3]),h!==(h=p[2])){if(i){et();const te=i;Y(te.$$.fragment,1,0,()=>{me(te,1)}),tt()}h?(i=yo(h,w(p)),ge(i.$$.fragment),U(i.$$.fragment,1),he(i,e,null)):i=null}else h&&i.$set(W);Je(e,m=nt(E,[S[0]&512&&p[9]]))},i(p){a||(U(d,p),i&&U(i.$$.fragment,p),a=!0)},o(p){Y(d,p),i&&Y(i.$$.fragment,p),a=!1},d(p){p&&O(e),c&&c.d(),d&&d.d(p),i&&me(i),t[32](null),l=!1,qe(s)}}}function xa(t){let e;const o=t[19].default,i=it(o,t,t[18],pr);return{c(){i&&i.c()},m(a,l){i&&i.m(a,l),e=!0},p(a,l){i&&i.p&&(!e||l[0]&262656)&&st(i,o,a,a[18],e?rt(o,a[18],l,Ta):at(a[18]),pr)},i(a){e||(U(i,a),e=!0)},o(a){Y(i,a),e=!1},d(a){i&&i.d(a)}}}function Da(t){let e,o;const i=[{href:t[7]},{size:t[1]},t[10],{style:t[8]&&"width: 3rem;"}];let a={};for(let l=0;l<i.length;l+=1)a=ye(a,i[l]);return e=new Oa({props:a}),e.$on("click",t[28]),e.$on("mouseover",t[29]),e.$on("mouseenter",t[30]),e.$on("mouseleave",t[31]),{c(){ge(e.$$.fragment)},m(l,s){he(e,l,s),o=!0},p(l,s){const c=s[0]&1410?nt(i,[s[0]&128&&{href:l[7]},s[0]&2&&{size:l[1]},s[0]&1024&&Gr(l[10]),s[0]&256&&{style:l[8]&&"width: 3rem;"}]):{};e.$set(c)},i(l){o||(U(e.$$.fragment,l),o=!0)},o(l){Y(e.$$.fragment,l),o=!1},d(l){me(e,l)}}}function hr(t){let e,o;return{c(){e=D("span"),o=Fe(t[3]),F(e,"bx--assistive-text",!0)},m(i,a){A(i,e,a),N(e,o)},p(i,a){a[0]&8&&lt(o,i[3])},d(i){i&&O(e)}}}function mr(t){let e,o;return{c(){e=D("span"),o=Fe(t[3]),F(e,"bx--assistive-text",!0)},m(i,a){A(i,e,a),N(e,o)},p(i,a){a[0]&8&&lt(o,i[3])},d(i){i&&O(e)}}}function Na(t){let e,o,i,a;const l=[Da,xa,ja,Aa],s=[];function c(f,d){return f[5]?0:f[4]?1:f[7]&&!f[6]?2:3}return e=c(t),o=s[e]=l[e](t),{c(){o.c(),i=gn()},m(f,d){s[e].m(f,d),A(f,i,d),a=!0},p(f,d){let h=e;e=c(f),e===h?s[e].p(f,d):(et(),Y(s[h],1,1,()=>{s[h]=null}),tt(),o=s[e],o?o.p(f,d):(o=s[e]=l[e](f),o.c()),U(o,1),o.m(i.parentNode,i))},i(f){a||(U(o),a=!0)},o(f){Y(o),a=!1},d(f){s[e].d(f),f&&O(i)}}}function Ba(t,e,o){let i,a;const l=["kind","size","expressive","isSelected","icon","iconDescription","tooltipAlignment","tooltipPosition","as","skeleton","disabled","href","tabindex","type","ref"];let s=Ye(e,l),{$$slots:c={},$$scope:f}=e;const d=Js(c);let{kind:h="primary"}=e,{size:w="default"}=e,{expressive:E=!1}=e,{isSelected:m=!1}=e,{icon:p=void 0}=e,{iconDescription:S=void 0}=e,{tooltipAlignment:W="center"}=e,{tooltipPosition:te="bottom"}=e,{as:I=!1}=e,{skeleton:x=!1}=e,{disabled:V=!1}=e,{href:J=void 0}=e,{tabindex:$="0"}=e,{type:de="button"}=e,{ref:z=null}=e;const ve=bn("ComposedModal");function le(Z){ae.call(this,t,Z)}function _e(Z){ae.call(this,t,Z)}function ke(Z){ae.call(this,t,Z)}function re(Z){ae.call(this,t,Z)}function se(Z){ae.call(this,t,Z)}function je(Z){ae.call(this,t,Z)}function Le(Z){ae.call(this,t,Z)}function M(Z){ae.call(this,t,Z)}function X(Z){ae.call(this,t,Z)}function Oe(Z){ae.call(this,t,Z)}function ce(Z){ae.call(this,t,Z)}function gt(Z){ae.call(this,t,Z)}function yn(Z){We[Z?"unshift":"push"](()=>{z=Z,o(0,z)})}function kt(Z){We[Z?"unshift":"push"](()=>{z=Z,o(0,z)})}return t.$$set=Z=>{e=ye(ye({},e),ft(Z)),o(10,s=Ye(e,l)),"kind"in Z&&o(11,h=Z.kind),"size"in Z&&o(1,w=Z.size),"expressive"in Z&&o(12,E=Z.expressive),"isSelected"in Z&&o(13,m=Z.isSelected),"icon"in Z&&o(2,p=Z.icon),"iconDescription"in Z&&o(3,S=Z.iconDescription),"tooltipAlignment"in Z&&o(14,W=Z.tooltipAlignment),"tooltipPosition"in Z&&o(15,te=Z.tooltipPosition),"as"in Z&&o(4,I=Z.as),"skeleton"in Z&&o(5,x=Z.skeleton),"disabled"in Z&&o(6,V=Z.disabled),"href"in Z&&o(7,J=Z.href),"tabindex"in Z&&o(16,$=Z.tabindex),"type"in Z&&o(17,de=Z.type),"ref"in Z&&o(0,z=Z.ref),"$$scope"in Z&&o(18,f=Z.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&1&&ve&&z&&ve.declareRef(z),t.$$.dirty[0]&4&&o(8,i=p&&!d.default),o(9,a={type:J&&!V?void 0:de,tabindex:$,disabled:V===!0?!0:void 0,href:J,"aria-pressed":i&&h==="ghost"&&!J?m:void 0,...s,class:["bx--btn",E&&"bx--btn--expressive",(w==="small"&&!E||w==="sm"&&!E||w==="small"&&!E)&&"bx--btn--sm",w==="field"&&!E||w==="md"&&!E&&"bx--btn--md",w==="field"&&"bx--btn--field",w==="small"&&"bx--btn--sm",w==="lg"&&"bx--btn--lg",w==="xl"&&"bx--btn--xl",h&&`bx--btn--${h}`,V&&"bx--btn--disabled",i&&"bx--btn--icon-only",i&&"bx--tooltip__trigger",i&&"bx--tooltip--a11y",i&&te&&`bx--btn--icon-only--${te}`,i&&W&&`bx--tooltip--align-${W}`,i&&m&&h==="ghost"&&"bx--btn--selected",s.class].filter(Boolean).join(" ")})},[z,w,p,S,I,x,V,J,i,a,s,h,E,m,W,te,$,de,f,c,le,_e,ke,re,se,je,Le,M,X,Oe,ce,gt,yn,kt]}class Ra extends ze{constructor(e){super(),Re(this,e,Ba,Na,Ne,{kind:11,size:1,expressive:12,isSelected:13,icon:2,iconDescription:3,tooltipAlignment:14,tooltipPosition:15,as:4,skeleton:5,disabled:6,href:7,tabindex:16,type:17,ref:0},null,[-1,-1])}}const vi=Ra;function gr(t){let e,o;return{c(){e=hn("title"),o=Fe(t[1])},m(i,a){A(i,e,a),N(e,o)},p(i,a){a&2&&lt(o,i[1])},d(i){i&&O(e)}}}function za(t){let e,o,i=t[1]&&gr(t),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:t[0]},{height:t[0]},t[2],t[3]],l={};for(let s=0;s<a.length;s+=1)l=ye(l,a[s]);return{c(){e=hn("svg"),i&&i.c(),o=hn("path"),H(o,"d","M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"),bo(e,l)},m(s,c){A(s,e,c),i&&i.m(e,null),N(e,o)},p(s,[c]){s[1]?i?i.p(s,c):(i=gr(s),i.c(),i.m(e,o)):i&&(i.d(1),i=null),bo(e,l=nt(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},c&1&&{width:s[0]},c&1&&{height:s[0]},c&4&&s[2],c&8&&s[3]]))},i:Me,o:Me,d(s){s&&O(e),i&&i.d()}}}function Ua(t,e,o){let i,a;const l=["size","title"];let s=Ye(e,l),{size:c=16}=e,{title:f=void 0}=e;return t.$$set=d=>{o(5,e=ye(ye({},e),ft(d))),o(3,s=Ye(e,l)),"size"in d&&o(0,c=d.size),"title"in d&&o(1,f=d.title)},t.$$.update=()=>{o(4,i=e["aria-label"]||e["aria-labelledby"]||f),o(2,a={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=ft(e),[c,f,a,s,i]}class Ja extends ze{constructor(e){super(),Re(this,e,Ua,za,Ne,{size:0,title:1})}}const Wr=Ja,di=new Set,qr=tn(0),_r=()=>qr.set([...di].filter(t=>Us(t)).length),Ga=t=>en(()=>{di.add(t);const e=t.subscribe(_r);return()=>{e(),di.delete(t),_r()}});qr.subscribe(t=>{typeof document<"u"&&document.body.classList.toggle("bx--body--with-modal-open",t>0)});function br(t,e,o){const i=t.slice();return i[55]=e[o],i}const Va=t=>({}),yr=t=>({}),Wa=t=>({}),vr=t=>({});function kr(t){let e,o,i,a,l;return o=new Wr({props:{size:20,class:"bx--modal-close__icon","aria-hidden":"true"}}),{c(){e=D("button"),ge(o.$$.fragment),H(e,"type","button"),H(e,"aria-label",t[8]),F(e,"bx--modal-close",!0)},m(s,c){A(s,e,c),he(o,e,null),t[37](e),i=!0,a||(l=Q(e,"click",t[38]),a=!0)},p(s,c){(!i||c[0]&256)&&H(e,"aria-label",s[8])},i(s){i||(U(o.$$.fragment,s),i=!0)},o(s){Y(o.$$.fragment,s),i=!1},d(s){s&&O(e),me(o),t[37](null),a=!1,l()}}}function wr(t){let e,o;const i=t[31].label,a=it(i,t,t[50],vr),l=a||qa(t);return{c(){e=D("h2"),l&&l.c(),H(e,"id",t[25]),F(e,"bx--modal-header__label",!0)},m(s,c){A(s,e,c),l&&l.m(e,null),o=!0},p(s,c){a?a.p&&(!o||c[1]&524288)&&st(a,i,s,s[50],o?rt(i,s[50],c,Wa):at(s[50]),vr):l&&l.p&&(!o||c[0]&128)&&l.p(s,o?c:[-1,-1]),(!o||c[0]&33554432)&&H(e,"id",s[25])},i(s){o||(U(l,s),o=!0)},o(s){Y(l,s),o=!1},d(s){s&&O(e),l&&l.d(s)}}}function qa(t){let e;return{c(){e=Fe(t[7])},m(o,i){A(o,e,i)},p(o,i){i[0]&128&&lt(e,o[7])},d(o){o&&O(e)}}}function Ha(t){let e;return{c(){e=Fe(t[6])},m(o,i){A(o,e,i)},p(o,i){i[0]&64&&lt(e,o[6])},d(o){o&&O(e)}}}function Sr(t){let e,o,i,a,l;return o=new Wr({props:{size:20,class:"bx--modal-close__icon","aria-hidden":"true"}}),{c(){e=D("button"),ge(o.$$.fragment),H(e,"type","button"),H(e,"aria-label",t[8]),F(e,"bx--modal-close",!0)},m(s,c){A(s,e,c),he(o,e,null),t[39](e),i=!0,a||(l=Q(e,"click",t[40]),a=!0)},p(s,c){(!i||c[0]&256)&&H(e,"aria-label",s[8])},i(s){i||(U(o.$$.fragment,s),i=!0)},o(s){Y(o.$$.fragment,s),i=!1},d(s){s&&O(e),me(o),t[39](null),a=!1,l()}}}function Cr(t){let e;return{c(){e=D("div"),F(e,"bx--modal-content--overflow-indicator",!0)},m(o,i){A(o,e,i)},d(o){o&&O(e)}}}function Mr(t){let e,o,i,a,l,s;const c=[Ka,Ya],f=[];function d(h,w){return h[16].length>0?0:h[15]?1:-1}return~(o=d(t))&&(i=f[o]=c[o](t)),l=new vi({props:{kind:t[3]?"danger":"primary",disabled:t[12],icon:t[13],$$slots:{default:[Qa]},$$scope:{ctx:t}}}),l.$on("click",t[43]),{c(){e=D("div"),i&&i.c(),a=ee(),ge(l.$$.fragment),F(e,"bx--modal-footer",!0),F(e,"bx--modal-footer--three-button",t[16].length===2)},m(h,w){A(h,e,w),~o&&f[o].m(e,null),N(e,a),he(l,e,null),s=!0},p(h,w){let E=o;o=d(h),o===E?~o&&f[o].p(h,w):(i&&(et(),Y(f[E],1,1,()=>{f[E]=null}),tt()),~o?(i=f[o],i?i.p(h,w):(i=f[o]=c[o](h),i.c()),U(i,1),i.m(e,a)):i=null);const m={};w[0]&8&&(m.kind=h[3]?"danger":"primary"),w[0]&4096&&(m.disabled=h[12]),w[0]&8192&&(m.icon=h[13]),w[0]&2048|w[1]&524288&&(m.$$scope={dirty:w,ctx:h}),l.$set(m),(!s||w[0]&65536)&&F(e,"bx--modal-footer--three-button",h[16].length===2)},i(h){s||(U(i),U(l.$$.fragment,h),s=!0)},o(h){Y(i),Y(l.$$.fragment,h),s=!1},d(h){h&&O(e),~o&&f[o].d(),me(l)}}}function Ya(t){let e,o;return e=new vi({props:{kind:"secondary",$$slots:{default:[Za]},$$scope:{ctx:t}}}),e.$on("click",t[42]),{c(){ge(e.$$.fragment)},m(i,a){he(e,i,a),o=!0},p(i,a){const l={};a[0]&32768|a[1]&524288&&(l.$$scope={dirty:a,ctx:i}),e.$set(l)},i(i){o||(U(e.$$.fragment,i),o=!0)},o(i){Y(e.$$.fragment,i),o=!1},d(i){me(e,i)}}}function Ka(t){let e,o,i=t[16],a=[];for(let s=0;s<i.length;s+=1)a[s]=Er(br(t,i,s));const l=s=>Y(a[s],1,1,()=>{a[s]=null});return{c(){for(let s=0;s<a.length;s+=1)a[s].c();e=gn()},m(s,c){for(let f=0;f<a.length;f+=1)a[f].m(s,c);A(s,e,c),o=!0},p(s,c){if(c[0]&67174400){i=s[16];let f;for(f=0;f<i.length;f+=1){const d=br(s,i,f);a[f]?(a[f].p(d,c),U(a[f],1)):(a[f]=Er(d),a[f].c(),U(a[f],1),a[f].m(e.parentNode,e))}for(et(),f=i.length;f<a.length;f+=1)l(f);tt()}},i(s){if(!o){for(let c=0;c<i.length;c+=1)U(a[c]);o=!0}},o(s){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)Y(a[c]);o=!1},d(s){Eo(a,s),s&&O(e)}}}function Za(t){let e;return{c(){e=Fe(t[15])},m(o,i){A(o,e,i)},p(o,i){i[0]&32768&&lt(e,o[15])},d(o){o&&O(e)}}}function Xa(t){let e=t[55].text+"",o,i;return{c(){o=Fe(e),i=ee()},m(a,l){A(a,o,l),A(a,i,l)},p(a,l){l[0]&65536&&e!==(e=a[55].text+"")&&lt(o,e)},d(a){a&&O(o),a&&O(i)}}}function Er(t){let e,o;function i(){return t[41](t[55])}return e=new vi({props:{kind:"secondary",$$slots:{default:[Xa]},$$scope:{ctx:t}}}),e.$on("click",i),{c(){ge(e.$$.fragment)},m(a,l){he(e,a,l),o=!0},p(a,l){t=a;const s={};l[0]&65536|l[1]&524288&&(s.$$scope={dirty:l,ctx:t}),e.$set(s)},i(a){o||(U(e.$$.fragment,a),o=!0)},o(a){Y(e.$$.fragment,a),o=!1},d(a){me(e,a)}}}function Qa(t){let e;return{c(){e=Fe(t[11])},m(o,i){A(o,e,i)},p(o,i){i[0]&2048&&lt(e,o[11])},d(o){o&&O(e)}}}function $a(t){let e,o,i,a,l,s,c,f,d,h,w,E,m,p,S,W,te,I,x,V,J=t[5]&&kr(t),$=t[7]&&wr(t);const de=t[31].heading,z=it(de,t,t[50],yr),ve=z||Ha(t);let le=!t[5]&&Sr(t);const _e=t[31].default,ke=it(_e,t,t[50],null);let re=t[10]&&Cr(),se=!t[5]&&Mr(t),je=[{role:"presentation"},{id:t[18]},t[28]],Le={};for(let M=0;M<je.length;M+=1)Le=ye(Le,je[M]);return{c(){e=D("div"),o=D("div"),i=D("div"),J&&J.c(),a=ee(),$&&$.c(),l=ee(),s=D("h3"),ve&&ve.c(),c=ee(),le&&le.c(),f=ee(),d=D("div"),ke&&ke.c(),p=ee(),re&&re.c(),S=ee(),se&&se.c(),H(s,"id",t[24]),F(s,"bx--modal-header__heading",!0),F(i,"bx--modal-header",!0),H(d,"id",t[23]),H(d,"tabindex",h=t[10]?"0":void 0),H(d,"role",w=t[10]?"region":void 0),H(d,"aria-label",E=t[10]?t[22]:void 0),H(d,"aria-labelledby",m=t[7]?t[25]:t[24]),F(d,"bx--modal-content",!0),F(d,"bx--modal-content--with-form",t[9]),F(d,"bx--modal-scroll-content",t[10]),H(o,"tabindex","-1"),H(o,"role",W=t[4]?t[5]?"alert":"alertdialog":"dialog"),H(o,"aria-describedby",te=t[4]&&!t[5]?t[23]:void 0),H(o,"aria-modal","true"),H(o,"aria-label",t[22]),F(o,"bx--modal-container",!0),F(o,"bx--modal-container--xs",t[2]==="xs"),F(o,"bx--modal-container--sm",t[2]==="sm"),F(o,"bx--modal-container--lg",t[2]==="lg"),Je(e,Le),F(e,"bx--modal",!0),F(e,"bx--modal-tall",!t[5]),F(e,"is-visible",t[0]),F(e,"bx--modal--danger",t[3])},m(M,X){A(M,e,X),N(e,o),N(o,i),J&&J.m(i,null),N(i,a),$&&$.m(i,null),N(i,l),N(i,s),ve&&ve.m(s,null),N(i,c),le&&le.m(i,null),N(o,f),N(o,d),ke&&ke.m(d,null),N(o,p),re&&re.m(o,null),N(o,S),se&&se.m(o,null),t[44](o),t[46](e),I=!0,x||(V=[Q(o,"click",t[45]),Q(e,"keydown",t[32]),Q(e,"keydown",t[47]),Q(e,"click",t[33]),Q(e,"click",t[48]),Q(e,"mouseover",t[34]),Q(e,"mouseenter",t[35]),Q(e,"mouseleave",t[36]),Q(e,"transitionend",t[49])],x=!0)},p(M,X){M[5]?J?(J.p(M,X),X[0]&32&&U(J,1)):(J=kr(M),J.c(),U(J,1),J.m(i,a)):J&&(et(),Y(J,1,1,()=>{J=null}),tt()),M[7]?$?($.p(M,X),X[0]&128&&U($,1)):($=wr(M),$.c(),U($,1),$.m(i,l)):$&&(et(),Y($,1,1,()=>{$=null}),tt()),z?z.p&&(!I||X[1]&524288)&&st(z,de,M,M[50],I?rt(de,M[50],X,Va):at(M[50]),yr):ve&&ve.p&&(!I||X[0]&64)&&ve.p(M,I?X:[-1,-1]),(!I||X[0]&16777216)&&H(s,"id",M[24]),M[5]?le&&(et(),Y(le,1,1,()=>{le=null}),tt()):le?(le.p(M,X),X[0]&32&&U(le,1)):(le=Sr(M),le.c(),U(le,1),le.m(i,null)),ke&&ke.p&&(!I||X[1]&524288)&&st(ke,_e,M,M[50],I?rt(_e,M[50],X,null):at(M[50]),null),(!I||X[0]&8388608)&&H(d,"id",M[23]),(!I||X[0]&1024&&h!==(h=M[10]?"0":void 0))&&H(d,"tabindex",h),(!I||X[0]&1024&&w!==(w=M[10]?"region":void 0))&&H(d,"role",w),(!I||X[0]&4195328&&E!==(E=M[10]?M[22]:void 0))&&H(d,"aria-label",E),(!I||X[0]&50331776&&m!==(m=M[7]?M[25]:M[24]))&&H(d,"aria-labelledby",m),(!I||X[0]&512)&&F(d,"bx--modal-content--with-form",M[9]),(!I||X[0]&1024)&&F(d,"bx--modal-scroll-content",M[10]),M[10]?re||(re=Cr(),re.c(),re.m(o,S)):re&&(re.d(1),re=null),M[5]?se&&(et(),Y(se,1,1,()=>{se=null}),tt()):se?(se.p(M,X),X[0]&32&&U(se,1)):(se=Mr(M),se.c(),U(se,1),se.m(o,null)),(!I||X[0]&48&&W!==(W=M[4]?M[5]?"alert":"alertdialog":"dialog"))&&H(o,"role",W),(!I||X[0]&8388656&&te!==(te=M[4]&&!M[5]?M[23]:void 0))&&H(o,"aria-describedby",te),(!I||X[0]&4194304)&&H(o,"aria-label",M[22]),(!I||X[0]&4)&&F(o,"bx--modal-container--xs",M[2]==="xs"),(!I||X[0]&4)&&F(o,"bx--modal-container--sm",M[2]==="sm"),(!I||X[0]&4)&&F(o,"bx--modal-container--lg",M[2]==="lg"),Je(e,Le=nt(je,[{role:"presentation"},(!I||X[0]&262144)&&{id:M[18]},X[0]&268435456&&M[28]])),F(e,"bx--modal",!0),F(e,"bx--modal-tall",!M[5]),F(e,"is-visible",M[0]),F(e,"bx--modal--danger",M[3])},i(M){I||(U(J),U($),U(ve,M),U(le),U(ke,M),U(se),I=!0)},o(M){Y(J),Y($),Y(ve,M),Y(le),Y(ke,M),Y(se),I=!1},d(M){M&&O(e),J&&J.d(),$&&$.d(),ve&&ve.d(M),le&&le.d(),ke&&ke.d(M),re&&re.d(),se&&se.d(),t[44](null),t[46](null),x=!1,qe(V)}}}function el(t,e,o){let i,a,l,s;const c=["size","open","danger","alert","passiveModal","modalHeading","modalLabel","modalAriaLabel","iconDescription","hasForm","hasScrollingContent","primaryButtonText","primaryButtonDisabled","primaryButtonIcon","shouldSubmitOnEnter","secondaryButtonText","secondaryButtons","selectorPrimaryFocus","preventCloseOnClickOutside","id","ref"];let f=Ye(e,c),d,{$$slots:h={},$$scope:w}=e,{size:E=void 0}=e,{open:m=!1}=e,{danger:p=!1}=e,{alert:S=!1}=e,{passiveModal:W=!1}=e,{modalHeading:te=void 0}=e,{modalLabel:I=void 0}=e,{modalAriaLabel:x=void 0}=e,{iconDescription:V="Close the modal"}=e,{hasForm:J=!1}=e,{hasScrollingContent:$=!1}=e,{primaryButtonText:de=""}=e,{primaryButtonDisabled:z=!1}=e,{primaryButtonIcon:ve=void 0}=e,{shouldSubmitOnEnter:le=!0}=e,{secondaryButtonText:_e=""}=e,{secondaryButtons:ke=[]}=e,{selectorPrimaryFocus:re="[data-modal-primary-focus]"}=e,{preventCloseOnClickOutside:se=!1}=e,{id:je="ccs-"+Math.random().toString(36)}=e,{ref:Le=null}=e;const M=Ys();let X=null,Oe=null,ce=!1,gt=!1;function yn(j){((j||Oe).querySelector(re)||X).focus()}const kt=tn(m);Ft(t,kt,j=>o(52,d=j)),Ga(kt),qs(()=>{ce?m||(ce=!1,M("close")):m&&(ce=!0,yn(),M("open"))});function Z(j){ae.call(this,t,j)}function Lo(j){ae.call(this,t,j)}function Io(j){ae.call(this,t,j)}function Po(j){ae.call(this,t,j)}function Fo(j){ae.call(this,t,j)}function Oo(j){We[j?"unshift":"push"](()=>{X=j,o(19,X)})}const To=()=>{o(0,m=!1)};function Ao(j){We[j?"unshift":"push"](()=>{X=j,o(19,X)})}const wt=()=>{o(0,m=!1)},vn=j=>{M("click:button--secondary",{text:j.text})},Vt=()=>{M("click:button--secondary",{text:_e})},dt=()=>{M("submit"),M("click:button--primary")};function _t(j){We[j?"unshift":"push"](()=>{Oe=j,o(20,Oe)})}const jo=()=>{o(21,gt=!0)};function Wn(j){We[j?"unshift":"push"](()=>{Le=j,o(1,Le)})}const xo=j=>{if(m)if(j.key==="Escape")o(0,m=!1);else if(j.key==="Tab"){const kn=`
  a[href], area[href], input:not([disabled]):not([tabindex='-1']),
  button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']),
  textarea:not([disabled]):not([tabindex='-1']),
  iframe, object, embed, *[tabindex]:not([tabindex='-1']):not([disabled]), *[contenteditable=true]
`,Ot=Array.from(Le.querySelectorAll(kn));let Tt=Ot.indexOf(document.activeElement);Tt===-1&&j.shiftKey&&(Tt=0),Tt+=Ot.length+(j.shiftKey?-1:1),Tt%=Ot.length,Ot[Tt].focus(),j.preventDefault()}else le&&j.key==="Enter"&&!z&&(M("submit"),M("click:button--primary"))},ot=()=>{!gt&&!se&&o(0,m=!1),o(21,gt=!1)},Do=j=>{j.propertyName==="transform"&&M("transitionend",{open:m})};return t.$$set=j=>{o(54,e=ye(ye({},e),ft(j))),o(28,f=Ye(e,c)),"size"in j&&o(2,E=j.size),"open"in j&&o(0,m=j.open),"danger"in j&&o(3,p=j.danger),"alert"in j&&o(4,S=j.alert),"passiveModal"in j&&o(5,W=j.passiveModal),"modalHeading"in j&&o(6,te=j.modalHeading),"modalLabel"in j&&o(7,I=j.modalLabel),"modalAriaLabel"in j&&o(29,x=j.modalAriaLabel),"iconDescription"in j&&o(8,V=j.iconDescription),"hasForm"in j&&o(9,J=j.hasForm),"hasScrollingContent"in j&&o(10,$=j.hasScrollingContent),"primaryButtonText"in j&&o(11,de=j.primaryButtonText),"primaryButtonDisabled"in j&&o(12,z=j.primaryButtonDisabled),"primaryButtonIcon"in j&&o(13,ve=j.primaryButtonIcon),"shouldSubmitOnEnter"in j&&o(14,le=j.shouldSubmitOnEnter),"secondaryButtonText"in j&&o(15,_e=j.secondaryButtonText),"secondaryButtons"in j&&o(16,ke=j.secondaryButtons),"selectorPrimaryFocus"in j&&o(30,re=j.selectorPrimaryFocus),"preventCloseOnClickOutside"in j&&o(17,se=j.preventCloseOnClickOutside),"id"in j&&o(18,je=j.id),"ref"in j&&o(1,Le=j.ref),"$$scope"in j&&o(50,w=j.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&1&&Gs(kt,d=m,d),t.$$.dirty[0]&262144&&o(25,i=`bx--modal-header__label--modal-${je}`),t.$$.dirty[0]&262144&&o(24,a=`bx--modal-header__heading--modal-${je}`),t.$$.dirty[0]&262144&&o(23,l=`bx--modal-body--${je}`),o(22,s=I||e["aria-label"]||x||te)},e=ft(e),[m,Le,E,p,S,W,te,I,V,J,$,de,z,ve,le,_e,ke,se,je,X,Oe,gt,s,l,a,i,M,kt,f,x,re,h,Z,Lo,Io,Po,Fo,Oo,To,Ao,wt,vn,Vt,dt,_t,jo,Wn,xo,ot,Do,w]}class tl extends ze{constructor(e){super(),Re(this,e,el,$a,Ne,{size:2,open:0,danger:3,alert:4,passiveModal:5,modalHeading:6,modalLabel:7,modalAriaLabel:29,iconDescription:8,hasForm:9,hasScrollingContent:10,primaryButtonText:11,primaryButtonDisabled:12,primaryButtonIcon:13,shouldSubmitOnEnter:14,secondaryButtonText:15,secondaryButtons:16,selectorPrimaryFocus:30,preventCloseOnClickOutside:17,id:18,ref:1},null,[-1,-1])}}const Hr=tl;function nl(t){let e,o,i,a,l;return{c(){e=D("p"),e.innerHTML=`ATIP v1 is an
    <a href="https://github.com/acteng/atip" target="_blank">open source project</a>
    developed by:`,o=ee(),i=D("ul"),i.innerHTML=`<li><a href="https://dcarlino.org" target="_blank">Dustin Carlino</a>: lead
      developer</li> 
    <li><a href="https://www.linkedin.com/in/madison-wang-841977bb/" target="_blank">Madison Wang</a>: UX design</li> 
    <li><a href="https://github.com/BudgieInWA" target="_blank">Ben Ritter</a>:
      CSS consulting</li>`,a=ee(),l=D("p"),l.innerHTML=`ATIP builds on
    <a href="https://www.openstreetmap.org/about" target="_blank">OpenStreetMap</a>
    contributors,
    <a href="https://maplibre.org/" target="_blank">MapLibre</a>,
    <a href="https://georust.org/" target="_blank">GeoRust</a>, and other open
    source projects.`},m(s,c){A(s,e,c),A(s,o,c),A(s,i,c),A(s,a,c),A(s,l,c)},p:Me,d(s){s&&O(e),s&&O(o),s&&O(i),s&&O(a),s&&O(l)}}}function ol(t){let e,o,i;function a(s){t[1](s)}let l={passiveModal:!0,modalHeading:"About ATIP",$$slots:{default:[nl]},$$scope:{ctx:t}};return t[0]!==void 0&&(l.open=t[0]),e=new Hr({props:l}),We.push(()=>Gt(e,"open",a,t[0])),{c(){ge(e.$$.fragment)},m(s,c){he(e,s,c),i=!0},p(s,[c]){const f={};c&4&&(f.$$scope={dirty:c,ctx:s}),!o&&c&1&&(o=!0,f.open=s[0],Jt(()=>o=!1)),e.$set(f)},i(s){i||(U(e.$$.fragment,s),i=!0)},o(s){Y(e.$$.fragment,s),i=!1},d(s){me(e,s)}}}function il(t,e,o){let{open:i}=e;function a(l){i=l,o(0,i)}return t.$$set=l=>{"open"in l&&o(0,i=l.open)},[i,a]}class rl extends ze{constructor(e){super(),Re(this,e,il,ol,Ne,{open:0})}}function sl(t){let e,o,i,a,l,s,c,f,d,h,w,E,m;return{c(){e=D("p"),e.textContent="For each intervention:",o=ee(),i=D("ol"),i.innerHTML=`<li>Click one of the draw icons to the top right of the map (the icons allow
      you to draw points, lines, polygons or routes)</li> 
    <li>Draw the intervention on the map, clicking the original point or &#39;Finish
      snapping&#39; for the Polygon and Route tools respectively</li> 
    <li>Fill in the details that appear (Intervention type, name, description)</li> 
    <li>Click the &quot;Save&quot; button or &quot;Delete&quot; button to save or remove the
      intervention</li>`,a=ee(),l=D("p"),l.textContent=`Repeat the steps above for each substantial infrastructure intervention in
    the scheme.`,s=ee(),c=D("p"),c.textContent=`To make further edits to attribute data, or to delete an intervention, click
    on its name in the left hand panel or its geometry in the map.`,f=ee(),d=D("p"),d.textContent=`Click the "Export to GeoJSON" button to download the dataset representing
    the scheme, which can be made up of one or more intervention, as a GeoJSON
    file. After saving the file, you can delete the interventions, change the
    scheme name, and start a new set of interventions representing a new scheme.`,h=ee(),w=D("p"),w.textContent=`To load a GeoJSON file that you have already saved from the tool, click the
    "Load from GeoJSON" button and select the file.`,E=ee(),m=D("p"),m.innerHTML=`Note: the <strong>Route tool</strong> works by calculating routes between
    start and end points using the existing transport network according to
    OpenStreetMap. Use it by clicking on the location where you would like the
    route to start and then clicking on the location where you would like the
    route to end on the map. The route will be calculated and drawn on the map.
    After you click &quot;Finish snapping&quot; you can edit the route by dragging
    individual points. This can be useful for representing links that are not
    part of the existing transport network, such as a new bridge or path.
    However,
    <strong>you cannot add or remove points</strong> with the Route tool. If the
    planned route intervention you would like to sketch as part of a scheme contains
    one or more new links (for example containing new bridges or paths between cul-de-sacs),
    you may want to use the Line tool instead.`},m(p,S){A(p,e,S),A(p,o,S),A(p,i,S),A(p,a,S),A(p,l,S),A(p,s,S),A(p,c,S),A(p,f,S),A(p,d,S),A(p,h,S),A(p,w,S),A(p,E,S),A(p,m,S)},p:Me,d(p){p&&O(e),p&&O(o),p&&O(i),p&&O(a),p&&O(l),p&&O(s),p&&O(c),p&&O(f),p&&O(d),p&&O(h),p&&O(w),p&&O(E),p&&O(m)}}}function al(t){let e,o,i;function a(s){t[1](s)}let l={passiveModal:!0,modalHeading:"Instructions",$$slots:{default:[sl]},$$scope:{ctx:t}};return t[0]!==void 0&&(l.open=t[0]),e=new Hr({props:l}),We.push(()=>Gt(e,"open",a,t[0])),{c(){ge(e.$$.fragment)},m(s,c){he(e,s,c),i=!0},p(s,[c]){const f={};c&4&&(f.$$scope={dirty:c,ctx:s}),!o&&c&1&&(o=!0,f.open=s[0],Jt(()=>o=!1)),e.$set(f)},i(s){i||(U(e.$$.fragment,s),i=!0)},o(s){Y(e.$$.fragment,s),i=!1},d(s){me(e,s)}}}function ll(t,e,o){let{open:i}=e;function a(l){i=l,o(0,i)}return t.$$set=l=>{"open"in l&&o(0,i=l.open)},[i,a]}class ul extends ze{constructor(e){super(),Re(this,e,ll,al,Ne,{open:0})}}function Lr(t){let e;const o=t[3].default,i=it(o,t,t[2],null);return{c(){i&&i.c()},m(a,l){i&&i.m(a,l),e=!0},p(a,l){i&&i.p&&(!e||l&4)&&st(i,o,a,a[2],e?rt(o,a[2],l,null):at(a[2]),null)},i(a){e||(U(i,a),e=!0)},o(a){Y(i,a),e=!1},d(a){i&&i.d(a)}}}function cl(t){let e,o,i=t[1]&&Lr(t);return{c(){e=D("div"),i&&i.c(),H(e,"class","map svelte-12dpf1u")},m(a,l){A(a,e,l),i&&i.m(e,null),t[4](e),o=!0},p(a,[l]){a[1]?i?(i.p(a,l),l&2&&U(i,1)):(i=Lr(a),i.c(),U(i,1),i.m(e,null)):i&&(et(),Y(i,1,1,()=>{i=null}),tt())},i(a){o||(U(i),o=!0)},o(a){Y(i),o=!1},d(a){a&&O(e),i&&i.d(),t[4](null)}}}function fl(t,e,o){let{$$slots:i={},$$scope:a}=e,l,s,c=!1,f=!window.location.hash;Ur("map",{getMap:()=>l,setCamera:f}),en(()=>{l=new ii.Map({container:s,style:"https://api.maptiler.com/maps/streets/style.json?key=get_your_own_OpIi9ZULNHzrESv6T2vL",hash:!0}),l.addControl(new ii.ScaleControl),l.addControl(new ii.NavigationControl,"bottom-right"),l.on("load",()=>{o(1,c=!0)}),new ResizeObserver(w=>{l.resize()}).observe(s)}),Hs(()=>{l.remove()});function d(h){We[h?"unshift":"push"](()=>{s=h,o(0,s)})}return t.$$set=h=>{"$$scope"in h&&o(2,a=h.$$scope)},[s,c,a,i,d]}class dl extends ze{constructor(e){super(),Re(this,e,fl,cl,Ne,{})}}const pl=t=>({}),Ir=t=>({}),hl=t=>({}),Pr=t=>({}),ml=t=>({}),Fr=t=>({});function gl(t){let e,o,i,a,l,s,c,f,d,h,w,E;const m=t[3].nav,p=it(m,t,t[2],Fr),S=t[3].sidebar,W=it(S,t,t[2],Pr),te=t[3].main,I=it(te,t,t[2],Ir);return{c(){e=D("aside"),o=D("div"),i=D("nav"),p&&p.c(),a=ee(),W&&W.c(),l=ee(),s=D("div"),s.textContent="→",f=ee(),d=D("main"),I&&I.c(),H(i,"class","svelte-19nerxn"),H(o,"class","sidebar-content content-container svelte-19nerxn"),H(s,"class","sidebar-toggle rounded-rect svelte-19nerxn"),H(e,"class",c=ir(t[0]?"":"collapsed")+" svelte-19nerxn"),H(d,"class","svelte-19nerxn")},m(x,V){A(x,e,V),N(e,o),N(o,i),p&&p.m(i,null),N(o,a),W&&W.m(o,null),N(e,l),N(e,s),A(x,f,V),A(x,d,V),I&&I.m(d,null),h=!0,w||(E=Q(s,"click",t[1]),w=!0)},p(x,[V]){p&&p.p&&(!h||V&4)&&st(p,m,x,x[2],h?rt(m,x[2],V,ml):at(x[2]),Fr),W&&W.p&&(!h||V&4)&&st(W,S,x,x[2],h?rt(S,x[2],V,hl):at(x[2]),Pr),(!h||V&1&&c!==(c=ir(x[0]?"":"collapsed")+" svelte-19nerxn"))&&H(e,"class",c),I&&I.p&&(!h||V&4)&&st(I,te,x,x[2],h?rt(te,x[2],V,pl):at(x[2]),Ir)},i(x){h||(U(p,x),U(W,x),U(I,x),h=!0)},o(x){Y(p,x),Y(W,x),Y(I,x),h=!1},d(x){x&&O(e),p&&p.d(x),W&&W.d(x),x&&O(f),x&&O(d),I&&I.d(x),w=!1,E()}}}function _l(t,e,o){let{$$slots:i={},$$scope:a}=e,l=!0;function s(){o(0,l=!l)}return t.$$set=c=>{"$$scope"in c&&o(2,a=c.$$scope)},[l,s,a,i]}class bl extends ze{constructor(e){super(),Re(this,e,_l,gl,Ne,{})}}const yl={"line-cap":"round","line-join":"round"},vo=["==","$type","Polygon"],ki=["==","$type","LineString"],ko=["==","$type","Point"];function zn(t,e,o=1){return{type:"line",layout:yl,paint:{"line-color":t,"line-width":e,"line-opacity":o}}}function wi(t,e){return{type:"fill",paint:{"fill-color":t,"fill-opacity":e}}}function wo(t,e,o=1){return{type:"circle",paint:{"circle-radius":e,"circle-color":t,"circle-opacity":o}}}function vl(t,e,o){let{authorityName:i}=e;const{getMap:a,setCamera:l}=bn("map");en(async()=>{const c=await s(i),f=a();l&&f.fitBounds(Br(c),{padding:20,animate:!1}),f.addSource("boundary",{type:"geojson",data:c}),f.addLayer({id:"boundary",source:"boundary",...zn("black",3,.5)})});async function s(c){const d=await(await fetch(Rs)).text(),h=JSON.parse(d);return h.features=h.features.filter(w=>w.properties.name==c),h}return t.$$set=c=>{"authorityName"in c&&o(0,i=c.authorityName)},[i]}class kl extends ze{constructor(e){super(),Re(this,e,vl,null,Ne,{authorityName:0})}}var pi={},wl={get exports(){return pi},set exports(t){pi=t}};(function(t,e){(function(o,i){t.exports=i()})(Fn,function(){var o=function(n,r){var u={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},g={on:function(_,y,T){if(u[_]===void 0)throw new Error("Invalid event type: "+_);u[_].push({selector:y,fn:T})},render:function(_){r.store.featureChanged(_)}},v=function(_,y){for(var T=u[_],P=T.length;P--;){var G=T[P];if(G.selector(y)){G.fn.call(g,y)||r.store.render(),r.ui.updateMapClasses();break}}};return n.start.call(g),{render:n.render,stop:function(){n.stop&&n.stop()},trash:function(){n.trash&&(n.trash(),r.store.render())},combineFeatures:function(){n.combineFeatures&&n.combineFeatures()},uncombineFeatures:function(){n.uncombineFeatures&&n.uncombineFeatures()},drag:function(_){v("drag",_)},click:function(_){v("click",_)},mousemove:function(_){v("mousemove",_)},mousedown:function(_){v("mousedown",_)},mouseup:function(_){v("mouseup",_)},mouseout:function(_){v("mouseout",_)},keydown:function(_){v("keydown",_)},keyup:function(_){v("keyup",_)},touchstart:function(_){v("touchstart",_)},touchmove:function(_){v("touchmove",_)},touchend:function(_){v("touchend",_)},tap:function(_){v("tap",_)}}},i=6378137;function a(n){var r=0;if(n&&n.length>0){r+=Math.abs(l(n[0]));for(var u=1;u<n.length;u++)r-=Math.abs(l(n[u]))}return r}function l(n){var r,u,g,v,_,y,T=0,P=n.length;if(P>2){for(y=0;y<P;y++)y===P-2?(g=P-2,v=P-1,_=0):y===P-1?(g=P-1,v=0,_=1):(g=y,v=y+1,_=y+2),r=n[g],u=n[v],T+=(s(n[_][0])-s(r[0]))*Math.sin(s(u[1]));T=T*i*i/2}return T}function s(n){return n*Math.PI/180}var c={geometry:function n(r){var u,g=0;switch(r.type){case"Polygon":return a(r.coordinates);case"MultiPolygon":for(u=0;u<r.coordinates.length;u++)g+=a(r.coordinates[u]);return g;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(u=0;u<r.geometries.length;u++)g+=n(r.geometries[u]);return g}},ring:l},f="mapboxgl-ctrl",d="mapbox-gl-draw_ctrl-draw-btn",h="mapbox-gl-draw_line",w="mapbox-gl-draw_polygon",E="mapbox-gl-draw_point",m="mapbox-gl-draw_trash",p="mapbox-gl-draw_combine",S="mapbox-gl-draw_uncombine",W="mapboxgl-ctrl-group",te="active",I="mapbox-gl-draw_boxselect",x="mapbox-gl-draw-hot",V="mapbox-gl-draw-cold",J="add",$="move",de="drag",z="pointer",ve="none",le={POLYGON:"polygon",LINE:"line_string",POINT:"point"},_e="Feature",ke="Polygon",re="LineString",se="Point",je="FeatureCollection",Le="Multi",M="MultiPoint",X="MultiLineString",Oe="MultiPolygon",ce={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},gt="draw.create",yn="draw.delete",kt="draw.update",Z="draw.selectionchange",Lo="draw.modechange",Io="draw.actionable",Po="draw.render",Fo="draw.combine",Oo="draw.uncombine",To="move",Ao="change_coordinates",wt="feature",vn="midpoint",Vt="vertex",dt="true",_t="false",jo=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],Wn={Point:0,LineString:1,Polygon:2};function xo(n,r){var u=Wn[n.geometry.type]-Wn[r.geometry.type];return u===0&&n.geometry.type===ke?n.area-r.area:u}function ot(n){if(this._items={},this._nums={},this._length=n?n.length:0,n)for(var r=0,u=n.length;r<u;r++)this.add(n[r]),n[r]!==void 0&&(typeof n[r]=="string"?this._items[n[r]]=r:this._nums[n[r]]=r)}ot.prototype.add=function(n){return this.has(n)||(this._length++,typeof n=="string"?this._items[n]=this._length:this._nums[n]=this._length),this},ot.prototype.delete=function(n){return this.has(n)===!1||(this._length--,delete this._items[n],delete this._nums[n]),this},ot.prototype.has=function(n){return(typeof n=="string"||typeof n=="number")&&(this._items[n]!==void 0||this._nums[n]!==void 0)},ot.prototype.values=function(){var n=this,r=[];return Object.keys(this._items).forEach(function(u){r.push({k:u,v:n._items[u]})}),Object.keys(this._nums).forEach(function(u){r.push({k:JSON.parse(u),v:n._nums[u]})}),r.sort(function(u,g){return u.v-g.v}).map(function(u){return u.k})},ot.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Do=[wt,vn,Vt],j={click:function(n,r,u){return kn(n,r,u,u.options.clickBuffer)},touch:function(n,r,u){return kn(n,r,u,u.options.touchBuffer)}};function kn(n,r,u,g){if(u.map===null)return[];var v=n?function(G,k){return k===void 0&&(k=0),[[G.point.x-k,G.point.y-k],[G.point.x+k,G.point.y+k]]}(n,g):r,_={};u.options.styles&&(_.layers=u.options.styles.map(function(G){return G.id}));var y=u.map.queryRenderedFeatures(v,_).filter(function(G){return Do.indexOf(G.properties.meta)!==-1}),T=new ot,P=[];return y.forEach(function(G){var k=G.properties.id;T.has(k)||(T.add(k),P.push(G))}),function(G){return G.map(function(k){return k.geometry.type===ke&&(k.area=c.geometry({type:_e,property:{},geometry:k.geometry})),k}).sort(xo).map(function(k){return delete k.area,k})}(P)}function Ot(n,r){var u=j.click(n,null,r),g={mouse:ve};return u[0]&&(g.mouse=u[0].properties.active===dt?$:z,g.feature=u[0].properties.meta),r.events.currentModeName().indexOf("draw")!==-1&&(g.mouse=J),r.ui.queueMapClasses(g),r.ui.updateMapClasses(),u[0]}function Tt(n,r){var u=n.x-r.x,g=n.y-r.y;return Math.sqrt(u*u+g*g)}function Ci(n,r,u){u===void 0&&(u={});var g=u.fineTolerance!=null?u.fineTolerance:4,v=u.grossTolerance!=null?u.grossTolerance:12,_=u.interval!=null?u.interval:500;n.point=n.point||r.point,n.time=n.time||r.time;var y=Tt(n.point,r.point);return y<g||y<v&&r.time-n.time<_}function Mi(n,r,u){u===void 0&&(u={});var g=u.tolerance!=null?u.tolerance:25,v=u.interval!=null?u.interval:250;return n.point=n.point||r.point,n.time=n.time||r.time,Tt(n.point,r.point)<g&&r.time-n.time<v}function No(n,r){return n(r={exports:{}},r.exports),r.exports}var Bo=No(function(n){var r=n.exports=function(u,g){if(g||(g=16),u===void 0&&(u=128),u<=0)return"0";for(var v=Math.log(Math.pow(2,u))/Math.log(g),_=2;v===1/0;_*=2)v=Math.log(Math.pow(2,u/_))/Math.log(g)*_;var y=v-Math.floor(v),T="";for(_=0;_<Math.floor(v);_++)T=Math.floor(Math.random()*g).toString(g)+T;if(y){var P=Math.pow(g,y);T=Math.floor(Math.random()*P).toString(g)+T}var G=parseInt(T,g);return G!==1/0&&G>=Math.pow(2,u)?r(u,g):T};r.rack=function(u,g,v){var _=function(T){var P=0;do{if(P++>10){if(!v)throw new Error("too many ID collisions, use more bits");u+=v}var G=r(u,g)}while(Object.hasOwnProperty.call(y,G));return y[G]=T,G},y=_.hats={};return _.get=function(T){return _.hats[T]},_.set=function(T,P){return _.hats[T]=P,_},_.bits=u||128,_.base=g||16,_}}),Ke=function(n,r){this.ctx=n,this.properties=r.properties||{},this.coordinates=r.geometry.coordinates,this.id=r.id||Bo(),this.type=r.geometry.type};Ke.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Ke.prototype.incomingCoords=function(n){this.setCoordinates(n)},Ke.prototype.setCoordinates=function(n){this.coordinates=n,this.changed()},Ke.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Ke.prototype.setProperty=function(n,r){this.properties[n]=r},Ke.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:_e,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Ke.prototype.internal=function(n){var r={id:this.id,meta:wt,"meta:type":this.type,active:_t,mode:n};if(this.ctx.options.userProperties)for(var u in this.properties)r["user_"+u]=this.properties[u];return{type:_e,properties:r,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Wt=function(n,r){Ke.call(this,n,r)};(Wt.prototype=Object.create(Ke.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Wt.prototype.updateCoordinate=function(n,r,u){this.coordinates=arguments.length===3?[r,u]:[n,r],this.changed()},Wt.prototype.getCoordinate=function(){return this.getCoordinates()};var St=function(n,r){Ke.call(this,n,r)};(St.prototype=Object.create(Ke.prototype)).isValid=function(){return this.coordinates.length>1},St.prototype.addCoordinate=function(n,r,u){this.changed();var g=parseInt(n,10);this.coordinates.splice(g,0,[r,u])},St.prototype.getCoordinate=function(n){var r=parseInt(n,10);return JSON.parse(JSON.stringify(this.coordinates[r]))},St.prototype.removeCoordinate=function(n){this.changed(),this.coordinates.splice(parseInt(n,10),1)},St.prototype.updateCoordinate=function(n,r,u){var g=parseInt(n,10);this.coordinates[g]=[r,u],this.changed()};var ut=function(n,r){Ke.call(this,n,r),this.coordinates=this.coordinates.map(function(u){return u.slice(0,-1)})};(ut.prototype=Object.create(Ke.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(n){return n.length>2})},ut.prototype.incomingCoords=function(n){this.coordinates=n.map(function(r){return r.slice(0,-1)}),this.changed()},ut.prototype.setCoordinates=function(n){this.coordinates=n,this.changed()},ut.prototype.addCoordinate=function(n,r,u){this.changed();var g=n.split(".").map(function(v){return parseInt(v,10)});this.coordinates[g[0]].splice(g[1],0,[r,u])},ut.prototype.removeCoordinate=function(n){this.changed();var r=n.split(".").map(function(g){return parseInt(g,10)}),u=this.coordinates[r[0]];u&&(u.splice(r[1],1),u.length<3&&this.coordinates.splice(r[0],1))},ut.prototype.getCoordinate=function(n){var r=n.split(".").map(function(g){return parseInt(g,10)}),u=this.coordinates[r[0]];return JSON.parse(JSON.stringify(u[r[1]]))},ut.prototype.getCoordinates=function(){return this.coordinates.map(function(n){return n.concat([n[0]])})},ut.prototype.updateCoordinate=function(n,r,u){this.changed();var g=n.split("."),v=parseInt(g[0],10),_=parseInt(g[1],10);this.coordinates[v]===void 0&&(this.coordinates[v]=[]),this.coordinates[v][_]=[r,u]};var $r={MultiPoint:Wt,MultiLineString:St,MultiPolygon:ut},qn=function(n,r,u,g,v){var _=u.split("."),y=parseInt(_[0],10),T=_[1]?_.slice(1).join("."):null;return n[y][r](T,g,v)},Qe=function(n,r){if(Ke.call(this,n,r),delete this.coordinates,this.model=$r[r.geometry.type],this.model===void 0)throw new TypeError(r.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(r.geometry.coordinates)};function fe(n){this.map=n.map,this.drawConfig=JSON.parse(JSON.stringify(n.options||{})),this._ctx=n}(Qe.prototype=Object.create(Ke.prototype))._coordinatesToFeatures=function(n){var r=this,u=this.model.bind(this);return n.map(function(g){return new u(r.ctx,{id:Bo(),type:_e,properties:{},geometry:{coordinates:g,type:r.type.replace("Multi","")}})})},Qe.prototype.isValid=function(){return this.features.every(function(n){return n.isValid()})},Qe.prototype.setCoordinates=function(n){this.features=this._coordinatesToFeatures(n),this.changed()},Qe.prototype.getCoordinate=function(n){return qn(this.features,"getCoordinate",n)},Qe.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(n){return n.type===ke?n.getCoordinates():n.coordinates})))},Qe.prototype.updateCoordinate=function(n,r,u){qn(this.features,"updateCoordinate",n,r,u),this.changed()},Qe.prototype.addCoordinate=function(n,r,u){qn(this.features,"addCoordinate",n,r,u),this.changed()},Qe.prototype.removeCoordinate=function(n){qn(this.features,"removeCoordinate",n),this.changed()},Qe.prototype.getFeatures=function(){return this.features},fe.prototype.setSelected=function(n){return this._ctx.store.setSelected(n)},fe.prototype.setSelectedCoordinates=function(n){var r=this;this._ctx.store.setSelectedCoordinates(n),n.reduce(function(u,g){return u[g.feature_id]===void 0&&(u[g.feature_id]=!0,r._ctx.store.get(g.feature_id).changed()),u},{})},fe.prototype.getSelected=function(){return this._ctx.store.getSelected()},fe.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},fe.prototype.isSelected=function(n){return this._ctx.store.isSelected(n)},fe.prototype.getFeature=function(n){return this._ctx.store.get(n)},fe.prototype.select=function(n){return this._ctx.store.select(n)},fe.prototype.deselect=function(n){return this._ctx.store.deselect(n)},fe.prototype.deleteFeature=function(n,r){return r===void 0&&(r={}),this._ctx.store.delete(n,r)},fe.prototype.addFeature=function(n){return this._ctx.store.add(n)},fe.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},fe.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},fe.prototype.setActionableState=function(n){n===void 0&&(n={});var r={trash:n.trash||!1,combineFeatures:n.combineFeatures||!1,uncombineFeatures:n.uncombineFeatures||!1};return this._ctx.events.actionable(r)},fe.prototype.changeMode=function(n,r,u){return r===void 0&&(r={}),u===void 0&&(u={}),this._ctx.events.changeMode(n,r,u)},fe.prototype.updateUIClasses=function(n){return this._ctx.ui.queueMapClasses(n)},fe.prototype.activateUIButton=function(n){return this._ctx.ui.setActiveButton(n)},fe.prototype.featuresAt=function(n,r,u){if(u===void 0&&(u="click"),u!=="click"&&u!=="touch")throw new Error("invalid buffer type");return j[u](n,r,this._ctx)},fe.prototype.newFeature=function(n){var r=n.geometry.type;return r===se?new Wt(this._ctx,n):r===re?new St(this._ctx,n):r===ke?new ut(this._ctx,n):new Qe(this._ctx,n)},fe.prototype.isInstanceOf=function(n,r){if(n===se)return r instanceof Wt;if(n===re)return r instanceof St;if(n===ke)return r instanceof ut;if(n==="MultiFeature")return r instanceof Qe;throw new Error("Unknown feature class: "+n)},fe.prototype.doRender=function(n){return this._ctx.store.featureChanged(n)},fe.prototype.onSetup=function(){},fe.prototype.onDrag=function(){},fe.prototype.onClick=function(){},fe.prototype.onMouseMove=function(){},fe.prototype.onMouseDown=function(){},fe.prototype.onMouseUp=function(){},fe.prototype.onMouseOut=function(){},fe.prototype.onKeyUp=function(){},fe.prototype.onKeyDown=function(){},fe.prototype.onTouchStart=function(){},fe.prototype.onTouchMove=function(){},fe.prototype.onTouchEnd=function(){},fe.prototype.onTap=function(){},fe.prototype.onStop=function(){},fe.prototype.onTrash=function(){},fe.prototype.onCombineFeature=function(){},fe.prototype.onUncombineFeature=function(){},fe.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Ei={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},es=Object.keys(Ei);function ts(n){var r=Object.keys(n);return function(u,g){g===void 0&&(g={});var v={},_=r.reduce(function(y,T){return y[T]=n[T],y},new fe(u));return{start:function(){var y=this;v=_.onSetup(g),es.forEach(function(T){var P,G=Ei[T],k=function(){return!1};n[G]&&(k=function(){return!0}),y.on(T,k,(P=G,function(B){return _[P](v,B)}))})},stop:function(){_.onStop(v)},trash:function(){_.onTrash(v)},combineFeatures:function(){_.onCombineFeatures(v)},uncombineFeatures:function(){_.onUncombineFeatures(v)},render:function(y,T){_.toDisplayFeatures(v,y,T)}}}}function Hn(n){return[].concat(n).filter(function(r){return r!==void 0})}function ns(){var n=this;if(!(n.ctx.map&&n.ctx.map.getSource(x)!==void 0))return P();var r=n.ctx.events.currentModeName();n.ctx.ui.queueMapClasses({mode:r});var u=[],g=[];n.isDirty?g=n.getAllIds():(u=n.getChangedIds().filter(function(G){return n.get(G)!==void 0}),g=n.sources.hot.filter(function(G){return G.properties.id&&u.indexOf(G.properties.id)===-1&&n.get(G.properties.id)!==void 0}).map(function(G){return G.properties.id})),n.sources.hot=[];var v=n.sources.cold.length;n.sources.cold=n.isDirty?[]:n.sources.cold.filter(function(G){var k=G.properties.id||G.properties.parent;return u.indexOf(k)===-1});var _=v!==n.sources.cold.length||g.length>0;function y(G,k){var B=n.get(G).internal(r);n.ctx.events.currentModeRender(B,function(q){n.sources[k].push(q)})}if(u.forEach(function(G){return y(G,"hot")}),g.forEach(function(G){return y(G,"cold")}),_&&n.ctx.map.getSource(V).setData({type:je,features:n.sources.cold}),n.ctx.map.getSource(x).setData({type:je,features:n.sources.hot}),n._emitSelectionChange&&(n.ctx.map.fire(Z,{features:n.getSelected().map(function(G){return G.toGeoJSON()}),points:n.getSelectedCoordinates().map(function(G){return{type:_e,properties:{},geometry:{type:se,coordinates:G.coordinates}}})}),n._emitSelectionChange=!1),n._deletedFeaturesToEmit.length){var T=n._deletedFeaturesToEmit.map(function(G){return G.toGeoJSON()});n._deletedFeaturesToEmit=[],n.ctx.map.fire(yn,{features:T})}function P(){n.isDirty=!1,n.clearChangedIds()}P(),n.ctx.map.fire(Po,{})}function Te(n){var r,u=this;this._features={},this._featureIds=new ot,this._selectedFeatureIds=new ot,this._selectedCoordinates=[],this._changedFeatureIds=new ot,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=n,this.sources={hot:[],cold:[]},this.render=function(){r||(r=requestAnimationFrame(function(){r=null,ns.call(u)}))},this.isDirty=!1}function Li(n,r){var u=n._selectedCoordinates.filter(function(g){return n._selectedFeatureIds.has(g.feature_id)});n._selectedCoordinates.length===u.length||r.silent||(n._emitSelectionChange=!0),n._selectedCoordinates=u}Te.prototype.createRenderBatch=function(){var n=this,r=this.render,u=0;return this.render=function(){u++},function(){n.render=r,u>0&&n.render()}},Te.prototype.setDirty=function(){return this.isDirty=!0,this},Te.prototype.featureChanged=function(n){return this._changedFeatureIds.add(n),this},Te.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Te.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Te.prototype.getAllIds=function(){return this._featureIds.values()},Te.prototype.add=function(n){return this.featureChanged(n.id),this._features[n.id]=n,this._featureIds.add(n.id),this},Te.prototype.delete=function(n,r){var u=this;return r===void 0&&(r={}),Hn(n).forEach(function(g){u._featureIds.has(g)&&(u._featureIds.delete(g),u._selectedFeatureIds.delete(g),r.silent||u._deletedFeaturesToEmit.indexOf(u._features[g])===-1&&u._deletedFeaturesToEmit.push(u._features[g]),delete u._features[g],u.isDirty=!0)}),Li(this,r),this},Te.prototype.get=function(n){return this._features[n]},Te.prototype.getAll=function(){var n=this;return Object.keys(this._features).map(function(r){return n._features[r]})},Te.prototype.select=function(n,r){var u=this;return r===void 0&&(r={}),Hn(n).forEach(function(g){u._selectedFeatureIds.has(g)||(u._selectedFeatureIds.add(g),u._changedFeatureIds.add(g),r.silent||(u._emitSelectionChange=!0))}),this},Te.prototype.deselect=function(n,r){var u=this;return r===void 0&&(r={}),Hn(n).forEach(function(g){u._selectedFeatureIds.has(g)&&(u._selectedFeatureIds.delete(g),u._changedFeatureIds.add(g),r.silent||(u._emitSelectionChange=!0))}),Li(this,r),this},Te.prototype.clearSelected=function(n){return n===void 0&&(n={}),this.deselect(this._selectedFeatureIds.values(),{silent:n.silent}),this},Te.prototype.setSelected=function(n,r){var u=this;return r===void 0&&(r={}),n=Hn(n),this.deselect(this._selectedFeatureIds.values().filter(function(g){return n.indexOf(g)===-1}),{silent:r.silent}),this.select(n.filter(function(g){return!u._selectedFeatureIds.has(g)}),{silent:r.silent}),this},Te.prototype.setSelectedCoordinates=function(n){return this._selectedCoordinates=n,this._emitSelectionChange=!0,this},Te.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Te.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Te.prototype.getSelected=function(){var n=this;return this._selectedFeatureIds.values().map(function(r){return n.get(r)})},Te.prototype.getSelectedCoordinates=function(){var n=this;return this._selectedCoordinates.map(function(r){return{coordinates:n.get(r.feature_id).getCoordinate(r.coord_path)}})},Te.prototype.isSelected=function(n){return this._selectedFeatureIds.has(n)},Te.prototype.setFeatureProperty=function(n,r,u){this.get(n).setProperty(r,u),this.featureChanged(n)},Te.prototype.storeMapConfig=function(){var n=this;jo.forEach(function(r){n.ctx.map[r]&&(n._mapInitialConfig[r]=n.ctx.map[r].isEnabled())})},Te.prototype.restoreMapConfig=function(){var n=this;Object.keys(this._mapInitialConfig).forEach(function(r){n._mapInitialConfig[r]?n.ctx.map[r].enable():n.ctx.map[r].disable()})},Te.prototype.getInitialConfigValue=function(n){return this._mapInitialConfig[n]===void 0||this._mapInitialConfig[n]};var At=function(){for(var n=arguments,r={},u=0;u<arguments.length;u++){var g=n[u];for(var v in g)os.call(g,v)&&(r[v]=g[v])}return r},os=Object.prototype.hasOwnProperty,is=["mode","feature","mouse"];function rs(n){var r=null,u=null,g={onRemove:function(){return n.map.off("load",g.connect),clearInterval(u),g.removeLayers(),n.store.restoreMapConfig(),n.ui.removeButtons(),n.events.removeEventListeners(),n.ui.clearMapClasses(),n.map=null,n.container=null,n.store=null,r&&r.parentNode&&r.parentNode.removeChild(r),r=null,this},connect:function(){n.map.off("load",g.connect),clearInterval(u),g.addLayers(),n.store.storeMapConfig(),n.events.addEventListeners()},onAdd:function(v){var _=v.fire;return v.fire=function(y,T){var P=arguments;return _.length===1&&arguments.length!==1&&(P=[At({},{type:y},T)]),_.apply(v,P)},n.map=v,n.events=function(y){var T=Object.keys(y.options.modes).reduce(function(L,K){return L[K]=ts(y.options.modes[K]),L},{}),P={},G={},k={},B=null,q=null;k.drag=function(L,K){K({point:L.point,time:new Date().getTime()})?(y.ui.queueMapClasses({mouse:de}),q.drag(L)):L.originalEvent.stopPropagation()},k.mousedrag=function(L){k.drag(L,function(K){return!Ci(P,K)})},k.touchdrag=function(L){k.drag(L,function(K){return!Mi(G,K)})},k.mousemove=function(L){if((L.originalEvent.buttons!==void 0?L.originalEvent.buttons:L.originalEvent.which)===1)return k.mousedrag(L);var K=Ot(L,y);L.featureTarget=K,q.mousemove(L)},k.mousedown=function(L){P={time:new Date().getTime(),point:L.point};var K=Ot(L,y);L.featureTarget=K,q.mousedown(L)},k.mouseup=function(L){var K=Ot(L,y);L.featureTarget=K,Ci(P,{point:L.point,time:new Date().getTime()})?q.click(L):q.mouseup(L)},k.mouseout=function(L){q.mouseout(L)},k.touchstart=function(L){if(L.originalEvent.preventDefault(),y.options.touchEnabled){G={time:new Date().getTime(),point:L.point};var K=j.touch(L,null,y)[0];L.featureTarget=K,q.touchstart(L)}},k.touchmove=function(L){if(L.originalEvent.preventDefault(),y.options.touchEnabled)return q.touchmove(L),k.touchdrag(L)},k.touchend=function(L){if(L.originalEvent.preventDefault(),y.options.touchEnabled){var K=j.touch(L,null,y)[0];L.featureTarget=K,Mi(G,{time:new Date().getTime(),point:L.point})?q.tap(L):q.touchend(L)}};var ne=function(L){return!(L===8||L===46||L>=48&&L<=57)};function ue(L,K,Se){Se===void 0&&(Se={}),q.stop();var we=T[L];if(we===void 0)throw new Error(L+" is not valid");B=L;var xe=we(y,K);q=o(xe,y),Se.silent||y.map.fire(Lo,{mode:L}),y.store.setDirty(),y.store.render()}k.keydown=function(L){(L.srcElement||L.target).classList[0]==="mapboxgl-canvas"&&(L.keyCode!==8&&L.keyCode!==46||!y.options.controls.trash?ne(L.keyCode)?q.keydown(L):L.keyCode===49&&y.options.controls.point?ue(ce.DRAW_POINT):L.keyCode===50&&y.options.controls.line_string?ue(ce.DRAW_LINE_STRING):L.keyCode===51&&y.options.controls.polygon&&ue(ce.DRAW_POLYGON):(L.preventDefault(),q.trash()))},k.keyup=function(L){ne(L.keyCode)&&q.keyup(L)},k.zoomend=function(){y.store.changeZoom()},k.data=function(L){if(L.dataType==="style"){var K=y.setup,Se=y.map,we=y.options,xe=y.store;we.styles.some(function(oe){return Se.getLayer(oe.id)})||(K.addLayers(),xe.setDirty(),xe.render())}};var Be={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){B=y.options.defaultMode,q=o(T[B](y),y)},changeMode:ue,actionable:function(L){var K=!1;Object.keys(L).forEach(function(Se){if(Be[Se]===void 0)throw new Error("Invalid action type");Be[Se]!==L[Se]&&(K=!0),Be[Se]=L[Se]}),K&&y.map.fire(Io,{actions:Be})},currentModeName:function(){return B},currentModeRender:function(L,K){return q.render(L,K)},fire:function(L,K){k[L]&&k[L](K)},addEventListeners:function(){y.map.on("mousemove",k.mousemove),y.map.on("mousedown",k.mousedown),y.map.on("mouseup",k.mouseup),y.map.on("data",k.data),y.map.on("touchmove",k.touchmove),y.map.on("touchstart",k.touchstart),y.map.on("touchend",k.touchend),y.container.addEventListener("mouseout",k.mouseout),y.options.keybindings&&(y.container.addEventListener("keydown",k.keydown),y.container.addEventListener("keyup",k.keyup))},removeEventListeners:function(){y.map.off("mousemove",k.mousemove),y.map.off("mousedown",k.mousedown),y.map.off("mouseup",k.mouseup),y.map.off("data",k.data),y.map.off("touchmove",k.touchmove),y.map.off("touchstart",k.touchstart),y.map.off("touchend",k.touchend),y.container.removeEventListener("mouseout",k.mouseout),y.options.keybindings&&(y.container.removeEventListener("keydown",k.keydown),y.container.removeEventListener("keyup",k.keyup))},trash:function(L){q.trash(L)},combineFeatures:function(){q.combineFeatures()},uncombineFeatures:function(){q.uncombineFeatures()},getMode:function(){return B}}}(n),n.ui=function(y){var T={},P=null,G={mode:null,feature:null,mouse:null},k={mode:null,feature:null,mouse:null};function B(L){k=At(k,L)}function q(){var L,K;if(y.container){var Se=[],we=[];is.forEach(function(xe){k[xe]!==G[xe]&&(Se.push(xe+"-"+G[xe]),k[xe]!==null&&we.push(xe+"-"+k[xe]))}),Se.length>0&&(L=y.container.classList).remove.apply(L,Se),we.length>0&&(K=y.container.classList).add.apply(K,we),G=At(G,k)}}function ne(L,K){K===void 0&&(K={});var Se=document.createElement("button");return Se.className=d+" "+K.className,Se.setAttribute("title",K.title),K.container.appendChild(Se),Se.addEventListener("click",function(we){if(we.preventDefault(),we.stopPropagation(),we.target===P)return ue(),void K.onDeactivate();Be(L),K.onActivate()},!0),Se}function ue(){P&&(P.classList.remove(te),P=null)}function Be(L){ue();var K=T[L];K&&K&&L!=="trash"&&(K.classList.add(te),P=K)}return{setActiveButton:Be,queueMapClasses:B,updateMapClasses:q,clearMapClasses:function(){B({mode:null,feature:null,mouse:null}),q()},addButtons:function(){var L=y.options.controls,K=document.createElement("div");return K.className=W+" "+f,L&&(L[le.LINE]&&(T[le.LINE]=ne(le.LINE,{container:K,className:h,title:"LineString tool "+(y.options.keybindings?"(l)":""),onActivate:function(){return y.events.changeMode(ce.DRAW_LINE_STRING)},onDeactivate:function(){return y.events.trash()}})),L[le.POLYGON]&&(T[le.POLYGON]=ne(le.POLYGON,{container:K,className:w,title:"Polygon tool "+(y.options.keybindings?"(p)":""),onActivate:function(){return y.events.changeMode(ce.DRAW_POLYGON)},onDeactivate:function(){return y.events.trash()}})),L[le.POINT]&&(T[le.POINT]=ne(le.POINT,{container:K,className:E,title:"Marker tool "+(y.options.keybindings?"(m)":""),onActivate:function(){return y.events.changeMode(ce.DRAW_POINT)},onDeactivate:function(){return y.events.trash()}})),L.trash&&(T.trash=ne("trash",{container:K,className:m,title:"Delete",onActivate:function(){y.events.trash()}})),L.combine_features&&(T.combine_features=ne("combineFeatures",{container:K,className:p,title:"Combine",onActivate:function(){y.events.combineFeatures()}})),L.uncombine_features&&(T.uncombine_features=ne("uncombineFeatures",{container:K,className:S,title:"Uncombine",onActivate:function(){y.events.uncombineFeatures()}}))),K},removeButtons:function(){Object.keys(T).forEach(function(L){var K=T[L];K.parentNode&&K.parentNode.removeChild(K),delete T[L]})}}}(n),n.container=v.getContainer(),n.store=new Te(n),r=n.ui.addButtons(),n.options.boxSelect&&(v.boxZoom.disable(),v.dragPan.disable(),v.dragPan.enable()),v.loaded()?g.connect():(v.on("load",g.connect),u=setInterval(function(){v.loaded()&&g.connect()},16)),n.events.start(),r},addLayers:function(){n.map.addSource(V,{data:{type:je,features:[]},type:"geojson"}),n.map.addSource(x,{data:{type:je,features:[]},type:"geojson"}),n.options.styles.forEach(function(v){n.map.addLayer(v)}),n.store.setDirty(!0),n.store.render()},removeLayers:function(){n.options.styles.forEach(function(v){n.map.getLayer(v.id)&&n.map.removeLayer(v.id)}),n.map.getSource(V)&&n.map.removeSource(V),n.map.getSource(x)&&n.map.removeSource(x)}};return n.setup=g,g}function Ro(n){return function(r){var u=r.featureTarget;return!!u&&!!u.properties&&u.properties.meta===n}}function nn(n){return!!n.featureTarget&&!!n.featureTarget.properties&&n.featureTarget.properties.active===dt&&n.featureTarget.properties.meta===wt}function Ii(n){return!!n.featureTarget&&!!n.featureTarget.properties&&n.featureTarget.properties.active===_t&&n.featureTarget.properties.meta===wt}function zo(n){return n.featureTarget===void 0}function Yn(n){var r=n.featureTarget;return!!r&&!!r.properties&&r.properties.meta===Vt}function Uo(n){return!!n.originalEvent&&n.originalEvent.shiftKey===!0}function Jo(n){return n.keyCode===27}function Go(n){return n.keyCode===13}var ss=on;function on(n,r){this.x=n,this.y=r}function Vo(n,r){var u=r.getBoundingClientRect();return new ss(n.clientX-u.left-(r.clientLeft||0),n.clientY-u.top-(r.clientTop||0))}function wn(n,r,u,g){return{type:_e,properties:{meta:Vt,parent:n,coord_path:u,active:g?dt:_t},geometry:{type:se,coordinates:r}}}function Wo(n,r,u){r===void 0&&(r={}),u===void 0&&(u=null);var g,v=n.geometry,_=v.type,y=v.coordinates,T=n.properties&&n.properties.id,P=[];function G(B,q){var ne="",ue=null;B.forEach(function(Be,L){var K=q!=null?q+"."+L:String(L),Se=wn(T,Be,K,k(K));if(r.midpoints&&ue){var we=function(oe,Yt,xt){var be=Yt.geometry.coordinates,pt=xt.geometry.coordinates;if(be[1]>85||be[1]<-85||pt[1]>85||pt[1]<-85)return null;var $e={lng:(be[0]+pt[0])/2,lat:(be[1]+pt[1])/2};return{type:_e,properties:{meta:vn,parent:oe,lng:$e.lng,lat:$e.lat,coord_path:xt.properties.coord_path},geometry:{type:se,coordinates:[$e.lng,$e.lat]}}}(T,ue,Se);we&&P.push(we)}ue=Se;var xe=JSON.stringify(Be);ne!==xe&&P.push(Se),L===0&&(ne=xe)})}function k(B){return!!r.selectedPaths&&r.selectedPaths.indexOf(B)!==-1}return _===se?P.push(wn(T,y,u,k(u))):_===ke?y.forEach(function(B,q){G(B,u!==null?u+"."+q:String(q))}):_===re?G(y,u):_.indexOf(Le)===0&&(g=_.replace(Le,""),y.forEach(function(B,q){var ne={type:_e,properties:n.properties,geometry:{type:g,coordinates:B}};P=P.concat(Wo(ne,r,q))})),P}on.prototype={clone:function(){return new on(this.x,this.y)},add:function(n){return this.clone()._add(n)},sub:function(n){return this.clone()._sub(n)},multByPoint:function(n){return this.clone()._multByPoint(n)},divByPoint:function(n){return this.clone()._divByPoint(n)},mult:function(n){return this.clone()._mult(n)},div:function(n){return this.clone()._div(n)},rotate:function(n){return this.clone()._rotate(n)},rotateAround:function(n,r){return this.clone()._rotateAround(n,r)},matMult:function(n){return this.clone()._matMult(n)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(n){return this.x===n.x&&this.y===n.y},dist:function(n){return Math.sqrt(this.distSqr(n))},distSqr:function(n){var r=n.x-this.x,u=n.y-this.y;return r*r+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith:function(n){return this.angleWithSep(n.x,n.y)},angleWithSep:function(n,r){return Math.atan2(this.x*r-this.y*n,this.x*n+this.y*r)},_matMult:function(n){var r=n[0]*this.x+n[1]*this.y,u=n[2]*this.x+n[3]*this.y;return this.x=r,this.y=u,this},_add:function(n){return this.x+=n.x,this.y+=n.y,this},_sub:function(n){return this.x-=n.x,this.y-=n.y,this},_mult:function(n){return this.x*=n,this.y*=n,this},_div:function(n){return this.x/=n,this.y/=n,this},_multByPoint:function(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint:function(n){return this.x/=n.x,this.y/=n.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var n=this.y;return this.y=this.x,this.x=-n,this},_rotate:function(n){var r=Math.cos(n),u=Math.sin(n),g=r*this.x-u*this.y,v=u*this.x+r*this.y;return this.x=g,this.y=v,this},_rotateAround:function(n,r){var u=Math.cos(n),g=Math.sin(n),v=r.x+u*(this.x-r.x)-g*(this.y-r.y),_=r.y+g*(this.x-r.x)+u*(this.y-r.y);return this.x=v,this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},on.convert=function(n){return n instanceof on?n:Array.isArray(n)?new on(n[0],n[1]):n};var rn=function(n){setTimeout(function(){n.map&&n.map.doubleClickZoom&&n._ctx&&n._ctx.store&&n._ctx.store.getInitialConfigValue&&n._ctx.store.getInitialConfigValue("doubleClickZoom")&&n.map.doubleClickZoom.enable()},0)},Kn=function(n){setTimeout(function(){n.map&&n.map.doubleClickZoom&&n.map.doubleClickZoom.disable()},0)},Pi=function(n){if(!n||!n.type)return null;var r=as[n.type];if(!r)return null;if(r==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:n}]};if(r==="feature")return{type:"FeatureCollection",features:[n]};if(r==="featurecollection")return n},as={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Zn(n){switch(n&&n.type||null){case"FeatureCollection":return n.features=n.features.reduce(function(r,u){return r.concat(Zn(u))},[]),n;case"Feature":return n.geometry?Zn(n.geometry).map(function(r){var u={type:"Feature",properties:JSON.parse(JSON.stringify(n.properties)),geometry:r};return n.id!==void 0&&(u.id=n.id),u}):[n];case"MultiPoint":return n.coordinates.map(function(r){return{type:"Point",coordinates:r}});case"MultiPolygon":return n.coordinates.map(function(r){return{type:"Polygon",coordinates:r}});case"MultiLineString":return n.coordinates.map(function(r){return{type:"LineString",coordinates:r}});case"GeometryCollection":return n.geometries.map(Zn).reduce(function(r,u){return r.concat(u)},[]);case"Point":case"Polygon":case"LineString":return[n]}}var ls=function(n){if(!n)return[];var r=Zn(Pi(n)),u=[];return r.features.forEach(function(g){g.geometry&&(u=u.concat(function v(_){return Array.isArray(_)&&_.length&&typeof _[0]=="number"?[_]:_.reduce(function(y,T){return Array.isArray(T)&&Array.isArray(T[0])?y.concat(v(T)):(y.push(T),y)},[])}(g.geometry.coordinates)))}),u},us=No(function(n){var r=n.exports=function(k){return new u(k)};function u(k){this.value=k}function g(k,B,q){var ne=[],ue=[],Be=!0;return function L(K){var Se=q?v(K):K,we={},xe=!0,oe={node:Se,node_:K,path:[].concat(ne),parent:ue[ue.length-1],parents:ue,key:ne.slice(-1)[0],isRoot:ne.length===0,level:ne.length,circular:null,update:function(be,pt){oe.isRoot||(oe.parent.node[oe.key]=be),oe.node=be,pt&&(xe=!1)},delete:function(be){delete oe.parent.node[oe.key],be&&(xe=!1)},remove:function(be){T(oe.parent.node)?oe.parent.node.splice(oe.key,1):delete oe.parent.node[oe.key],be&&(xe=!1)},keys:null,before:function(be){we.before=be},after:function(be){we.after=be},pre:function(be){we.pre=be},post:function(be){we.post=be},stop:function(){Be=!1},block:function(){xe=!1}};if(!Be)return oe;function Yt(){if(typeof oe.node=="object"&&oe.node!==null){oe.keys&&oe.node_===oe.node||(oe.keys=_(oe.node)),oe.isLeaf=oe.keys.length==0;for(var be=0;be<ue.length;be++)if(ue[be].node_===K){oe.circular=ue[be];break}}else oe.isLeaf=!0,oe.keys=null;oe.notLeaf=!oe.isLeaf,oe.notRoot=!oe.isRoot}Yt();var xt=B.call(oe,oe.node);return xt!==void 0&&oe.update&&oe.update(xt),we.before&&we.before.call(oe,oe.node),xe&&(typeof oe.node!="object"||oe.node===null||oe.circular||(ue.push(oe),Yt(),P(oe.keys,function(be,pt){ne.push(be),we.pre&&we.pre.call(oe,oe.node[be],be);var $e=L(oe.node[be]);q&&G.call(oe.node,be)&&(oe.node[be]=$e.node),$e.isLast=pt==oe.keys.length-1,$e.isFirst=pt==0,we.post&&we.post.call(oe,$e),ne.pop()}),ue.pop()),we.after&&we.after.call(oe,oe.node)),oe}(k).node}function v(k){if(typeof k=="object"&&k!==null){var B;if(T(k))B=[];else if(y(k)==="[object Date]")B=new Date(k.getTime?k.getTime():k);else if(function(ue){return y(ue)==="[object RegExp]"}(k))B=new RegExp(k);else if(function(ue){return y(ue)==="[object Error]"}(k))B={message:k.message};else if(function(ue){return y(ue)==="[object Boolean]"}(k))B=new Boolean(k);else if(function(ue){return y(ue)==="[object Number]"}(k))B=new Number(k);else if(function(ue){return y(ue)==="[object String]"}(k))B=new String(k);else if(Object.create&&Object.getPrototypeOf)B=Object.create(Object.getPrototypeOf(k));else if(k.constructor===Object)B={};else{var q=k.constructor&&k.constructor.prototype||k.__proto__||{},ne=function(){};ne.prototype=q,B=new ne}return P(_(k),function(ue){B[ue]=k[ue]}),B}return k}u.prototype.get=function(k){for(var B=this.value,q=0;q<k.length;q++){var ne=k[q];if(!B||!G.call(B,ne)){B=void 0;break}B=B[ne]}return B},u.prototype.has=function(k){for(var B=this.value,q=0;q<k.length;q++){var ne=k[q];if(!B||!G.call(B,ne))return!1;B=B[ne]}return!0},u.prototype.set=function(k,B){for(var q=this.value,ne=0;ne<k.length-1;ne++){var ue=k[ne];G.call(q,ue)||(q[ue]={}),q=q[ue]}return q[k[ne]]=B,B},u.prototype.map=function(k){return g(this.value,k,!0)},u.prototype.forEach=function(k){return this.value=g(this.value,k,!1),this.value},u.prototype.reduce=function(k,B){var q=arguments.length===1,ne=q?this.value:B;return this.forEach(function(ue){this.isRoot&&q||(ne=k.call(this,ne,ue))}),ne},u.prototype.paths=function(){var k=[];return this.forEach(function(B){k.push(this.path)}),k},u.prototype.nodes=function(){var k=[];return this.forEach(function(B){k.push(this.node)}),k},u.prototype.clone=function(){var k=[],B=[];return function q(ne){for(var ue=0;ue<k.length;ue++)if(k[ue]===ne)return B[ue];if(typeof ne=="object"&&ne!==null){var Be=v(ne);return k.push(ne),B.push(Be),P(_(ne),function(L){Be[L]=q(ne[L])}),k.pop(),B.pop(),Be}return ne}(this.value)};var _=Object.keys||function(k){var B=[];for(var q in k)B.push(q);return B};function y(k){return Object.prototype.toString.call(k)}var T=Array.isArray||function(k){return Object.prototype.toString.call(k)==="[object Array]"},P=function(k,B){if(k.forEach)return k.forEach(B);for(var q=0;q<k.length;q++)B(k[q],q,k)};P(_(u.prototype),function(k){r[k]=function(B){var q=[].slice.call(arguments,1),ne=new u(B);return ne[k].apply(ne,q)}});var G=Object.hasOwnProperty||function(k,B){return B in k}}),cs=Ze;function Ze(n){if(!(this instanceof Ze))return new Ze(n);this._bbox=n||[1/0,1/0,-1/0,-1/0],this._valid=!!n}Ze.prototype.include=function(n){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],n[0]),this._bbox[1]=Math.min(this._bbox[1],n[1]),this._bbox[2]=Math.max(this._bbox[2],n[0]),this._bbox[3]=Math.max(this._bbox[3],n[1]),this},Ze.prototype.equals=function(n){var r;return r=n instanceof Ze?n.bbox():n,this._bbox[0]==r[0]&&this._bbox[1]==r[1]&&this._bbox[2]==r[2]&&this._bbox[3]==r[3]},Ze.prototype.center=function(n){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},Ze.prototype.union=function(n){var r;return this._valid=!0,r=n instanceof Ze?n.bbox():n,this._bbox[0]=Math.min(this._bbox[0],r[0]),this._bbox[1]=Math.min(this._bbox[1],r[1]),this._bbox[2]=Math.max(this._bbox[2],r[2]),this._bbox[3]=Math.max(this._bbox[3],r[3]),this},Ze.prototype.bbox=function(){return this._valid?this._bbox:null},Ze.prototype.contains=function(n){if(!n)return this._fastContains();if(!this._valid)return null;var r=n[0],u=n[1];return this._bbox[0]<=r&&this._bbox[1]<=u&&this._bbox[2]>=r&&this._bbox[3]>=u},Ze.prototype.intersect=function(n){return this._valid?(r=n instanceof Ze?n.bbox():n,!(this._bbox[0]>r[2]||this._bbox[2]<r[0]||this._bbox[3]<r[1]||this._bbox[1]>r[3])):null;var r},Ze.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var n="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",n)},Ze.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Fi={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},fs=Object.keys(Fi),qo=function(n){return Ho(n).bbox()};function Ho(n){for(var r=cs(),u=ls(n),g=0;g<u.length;g++)r.include(u[g]);return r}qo.polygon=function(n){return Ho(n).polygon()},qo.bboxify=function(n){return us(n).map(function(r){r&&fs.some(function(u){return!!r[u]&&Fi[u].indexOf(r.type)!==-1})&&(r.bbox=Ho(r).bbox(),this.update(r))})};function Oi(n,r){var u=-90,g=90,v=-90,_=90,y=270,T=-270;n.forEach(function(G){var k=qo(G),B=k[1],q=k[3],ne=k[0],ue=k[2];B>u&&(u=B),q<g&&(g=q),q>v&&(v=q),B<_&&(_=B),ne<y&&(y=ne),ue>T&&(T=ue)});var P=r;return u+P.lat>85&&(P.lat=85-u),v+P.lat>90&&(P.lat=90-v),g+P.lat<-85&&(P.lat=-85-g),_+P.lat<-90&&(P.lat=-90-_),y+P.lng<=-270&&(P.lng+=360*Math.ceil(Math.abs(P.lng)/360)),T+P.lng>=270&&(P.lng-=360*Math.ceil(Math.abs(P.lng)/360)),P}function Ti(n,r){var u=Oi(n.map(function(g){return g.toGeoJSON()}),r);n.forEach(function(g){var v,_=g.getCoordinates(),y=function(P){var G={lng:P[0]+u.lng,lat:P[1]+u.lat};return[G.lng,G.lat]},T=function(P){return P.map(function(G){return y(G)})};g.type===se?v=y(_):g.type===re||g.type===M?v=_.map(y):g.type===ke||g.type===X?v=_.map(T):g.type===Oe&&(v=_.map(function(P){return P.map(function(G){return T(G)})})),g.incomingCoords(v)})}var He={onSetup:function(n){var r=this,u={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:n.featureIds||[]};return this.setSelected(u.initiallySelectedFeatureIds.filter(function(g){return r.getFeature(g)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),u},fireUpdate:function(){this.map.fire(kt,{action:To,features:this.getSelected().map(function(n){return n.toGeoJSON()})})},fireActionable:function(){var n=this,r=this.getSelected(),u=r.filter(function(T){return n.isInstanceOf("MultiFeature",T)}),g=!1;if(r.length>1){g=!0;var v=r[0].type.replace("Multi","");r.forEach(function(T){T.type.replace("Multi","")!==v&&(g=!1)})}var _=u.length>0,y=r.length>0;this.setActionableState({combineFeatures:g,uncombineFeatures:_,trash:y})},getUniqueIds:function(n){return n.length?n.map(function(r){return r.properties.id}).filter(function(r){return r!==void 0}).reduce(function(r,u){return r.add(u),r},new ot).values():[]},stopExtendedInteractions:function(n){n.boxSelectElement&&(n.boxSelectElement.parentNode&&n.boxSelectElement.parentNode.removeChild(n.boxSelectElement),n.boxSelectElement=null),this.map.dragPan.enable(),n.boxSelecting=!1,n.canBoxSelect=!1,n.dragMoving=!1,n.canDragMove=!1},onStop:function(){rn(this)},onMouseMove:function(n){return this.stopExtendedInteractions(n),!0},onMouseOut:function(n){return!n.dragMoving||this.fireUpdate()}};He.onTap=He.onClick=function(n,r){return zo(r)?this.clickAnywhere(n,r):Ro(Vt)(r)?this.clickOnVertex(n,r):function(u){return!!u.featureTarget&&!!u.featureTarget.properties&&u.featureTarget.properties.meta===wt}(r)?this.clickOnFeature(n,r):void 0},He.clickAnywhere=function(n){var r=this,u=this.getSelectedIds();u.length&&(this.clearSelectedFeatures(),u.forEach(function(g){return r.doRender(g)})),rn(this),this.stopExtendedInteractions(n)},He.clickOnVertex=function(n,r){this.changeMode(ce.DIRECT_SELECT,{featureId:r.featureTarget.properties.parent,coordPath:r.featureTarget.properties.coord_path,startPos:r.lngLat}),this.updateUIClasses({mouse:$})},He.startOnActiveFeature=function(n,r){this.stopExtendedInteractions(n),this.map.dragPan.disable(),this.doRender(r.featureTarget.properties.id),n.canDragMove=!0,n.dragMoveLocation=r.lngLat},He.clickOnFeature=function(n,r){var u=this;Kn(this),this.stopExtendedInteractions(n);var g=Uo(r),v=this.getSelectedIds(),_=r.featureTarget.properties.id,y=this.isSelected(_);if(!g&&y&&this.getFeature(_).type!==se)return this.changeMode(ce.DIRECT_SELECT,{featureId:_});y&&g?(this.deselect(_),this.updateUIClasses({mouse:z}),v.length===1&&rn(this)):!y&&g?(this.select(_),this.updateUIClasses({mouse:$})):y||g||(v.forEach(function(T){return u.doRender(T)}),this.setSelected(_),this.updateUIClasses({mouse:$})),this.doRender(_)},He.onMouseDown=function(n,r){return nn(r)?this.startOnActiveFeature(n,r):this.drawConfig.boxSelect&&function(u){return!!u.originalEvent&&!!u.originalEvent.shiftKey&&u.originalEvent.button===0}(r)?this.startBoxSelect(n,r):void 0},He.startBoxSelect=function(n,r){this.stopExtendedInteractions(n),this.map.dragPan.disable(),n.boxSelectStartLocation=Vo(r.originalEvent,this.map.getContainer()),n.canBoxSelect=!0},He.onTouchStart=function(n,r){if(nn(r))return this.startOnActiveFeature(n,r)},He.onDrag=function(n,r){return n.canDragMove?this.dragMove(n,r):this.drawConfig.boxSelect&&n.canBoxSelect?this.whileBoxSelect(n,r):void 0},He.whileBoxSelect=function(n,r){n.boxSelecting=!0,this.updateUIClasses({mouse:J}),n.boxSelectElement||(n.boxSelectElement=document.createElement("div"),n.boxSelectElement.classList.add(I),this.map.getContainer().appendChild(n.boxSelectElement));var u=Vo(r.originalEvent,this.map.getContainer()),g=Math.min(n.boxSelectStartLocation.x,u.x),v=Math.max(n.boxSelectStartLocation.x,u.x),_=Math.min(n.boxSelectStartLocation.y,u.y),y=Math.max(n.boxSelectStartLocation.y,u.y),T="translate("+g+"px, "+_+"px)";n.boxSelectElement.style.transform=T,n.boxSelectElement.style.WebkitTransform=T,n.boxSelectElement.style.width=v-g+"px",n.boxSelectElement.style.height=y-_+"px"},He.dragMove=function(n,r){n.dragMoving=!0,r.originalEvent.stopPropagation();var u={lng:r.lngLat.lng-n.dragMoveLocation.lng,lat:r.lngLat.lat-n.dragMoveLocation.lat};Ti(this.getSelected(),u),n.dragMoveLocation=r.lngLat},He.onMouseUp=function(n,r){var u=this;if(n.dragMoving)this.fireUpdate();else if(n.boxSelecting){var g=[n.boxSelectStartLocation,Vo(r.originalEvent,this.map.getContainer())],v=this.featuresAt(null,g,"click"),_=this.getUniqueIds(v).filter(function(y){return!u.isSelected(y)});_.length&&(this.select(_),_.forEach(function(y){return u.doRender(y)}),this.updateUIClasses({mouse:$}))}this.stopExtendedInteractions(n)},He.toDisplayFeatures=function(n,r,u){r.properties.active=this.isSelected(r.properties.id)?dt:_t,u(r),this.fireActionable(),r.properties.active===dt&&r.geometry.type!==se&&Wo(r).forEach(u)},He.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},He.onCombineFeatures=function(){var n=this.getSelected();if(!(n.length===0||n.length<2)){for(var r=[],u=[],g=n[0].type.replace("Multi",""),v=0;v<n.length;v++){var _=n[v];if(_.type.replace("Multi","")!==g)return;_.type.includes("Multi")?_.getCoordinates().forEach(function(T){r.push(T)}):r.push(_.getCoordinates()),u.push(_.toGeoJSON())}if(u.length>1){var y=this.newFeature({type:_e,properties:u[0].properties,geometry:{type:"Multi"+g,coordinates:r}});this.addFeature(y),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([y.id]),this.map.fire(Fo,{createdFeatures:[y.toGeoJSON()],deletedFeatures:u})}this.fireActionable()}},He.onUncombineFeatures=function(){var n=this,r=this.getSelected();if(r.length!==0){for(var u=[],g=[],v=function(y){var T=r[y];n.isInstanceOf("MultiFeature",T)&&(T.getFeatures().forEach(function(P){n.addFeature(P),P.properties=T.properties,u.push(P.toGeoJSON()),n.select([P.id])}),n.deleteFeature(T.id,{silent:!0}),g.push(T.toGeoJSON()))},_=0;_<r.length;_++)v(_);u.length>1&&this.map.fire(Oo,{createdFeatures:u,deletedFeatures:g}),this.fireActionable()}};var Ai=Ro(Vt),ds=Ro(vn),jt={fireUpdate:function(){this.map.fire(kt,{action:Ao,features:this.getSelected().map(function(n){return n.toGeoJSON()})})},fireActionable:function(n){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:n.selectedCoordPaths.length>0})},startDragging:function(n,r){this.map.dragPan.disable(),n.canDragMove=!0,n.dragMoveLocation=r.lngLat},stopDragging:function(n){this.map.dragPan.enable(),n.dragMoving=!1,n.canDragMove=!1,n.dragMoveLocation=null},onVertex:function(n,r){this.startDragging(n,r);var u=r.featureTarget.properties,g=n.selectedCoordPaths.indexOf(u.coord_path);Uo(r)||g!==-1?Uo(r)&&g===-1&&n.selectedCoordPaths.push(u.coord_path):n.selectedCoordPaths=[u.coord_path];var v=this.pathsToCoordinates(n.featureId,n.selectedCoordPaths);this.setSelectedCoordinates(v)},onMidpoint:function(n,r){this.startDragging(n,r);var u=r.featureTarget.properties;n.feature.addCoordinate(u.coord_path,u.lng,u.lat),this.fireUpdate(),n.selectedCoordPaths=[u.coord_path]},pathsToCoordinates:function(n,r){return r.map(function(u){return{feature_id:n,coord_path:u}})},onFeature:function(n,r){n.selectedCoordPaths.length===0?this.startDragging(n,r):this.stopDragging(n)},dragFeature:function(n,r,u){Ti(this.getSelected(),u),n.dragMoveLocation=r.lngLat},dragVertex:function(n,r,u){for(var g=n.selectedCoordPaths.map(function(T){return n.feature.getCoordinate(T)}),v=Oi(g.map(function(T){return{type:_e,properties:{},geometry:{type:se,coordinates:T}}}),u),_=0;_<g.length;_++){var y=g[_];n.feature.updateCoordinate(n.selectedCoordPaths[_],y[0]+v.lng,y[1]+v.lat)}},clickNoTarget:function(){this.changeMode(ce.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(ce.SIMPLE_SELECT)},clickActiveFeature:function(n){n.selectedCoordPaths=[],this.clearSelectedCoordinates(),n.feature.changed()},onSetup:function(n){var r=n.featureId,u=this.getFeature(r);if(!u)throw new Error("You must provide a featureId to enter direct_select mode");if(u.type===se)throw new TypeError("direct_select mode doesn't handle point features");var g={featureId:r,feature:u,dragMoveLocation:n.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:n.coordPath?[n.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(r,g.selectedCoordPaths)),this.setSelected(r),Kn(this),this.setActionableState({trash:!0}),g},onStop:function(){rn(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(n,r,u){n.featureId===r.properties.id?(r.properties.active=dt,u(r),Wo(r,{map:this.map,midpoints:!0,selectedPaths:n.selectedCoordPaths}).forEach(u)):(r.properties.active=_t,u(r)),this.fireActionable(n)},onTrash:function(n){n.selectedCoordPaths.sort(function(r,u){return u.localeCompare(r,"en",{numeric:!0})}).forEach(function(r){return n.feature.removeCoordinate(r)}),this.fireUpdate(),n.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(n),n.feature.isValid()===!1&&(this.deleteFeature([n.featureId]),this.changeMode(ce.SIMPLE_SELECT,{}))},onMouseMove:function(n,r){var u=nn(r),g=Ai(r),v=n.selectedCoordPaths.length===0;return u&&v||g&&!v?this.updateUIClasses({mouse:$}):this.updateUIClasses({mouse:ve}),this.stopDragging(n),!0},onMouseOut:function(n){return n.dragMoving&&this.fireUpdate(),!0}};jt.onTouchStart=jt.onMouseDown=function(n,r){return Ai(r)?this.onVertex(n,r):nn(r)?this.onFeature(n,r):ds(r)?this.onMidpoint(n,r):void 0},jt.onDrag=function(n,r){if(n.canDragMove===!0){n.dragMoving=!0,r.originalEvent.stopPropagation();var u={lng:r.lngLat.lng-n.dragMoveLocation.lng,lat:r.lngLat.lat-n.dragMoveLocation.lat};n.selectedCoordPaths.length>0?this.dragVertex(n,r,u):this.dragFeature(n,r,u),n.dragMoveLocation=r.lngLat}},jt.onClick=function(n,r){return zo(r)?this.clickNoTarget(n,r):nn(r)?this.clickActiveFeature(n,r):Ii(r)?this.clickInactive(n,r):void this.stopDragging(n)},jt.onTap=function(n,r){return zo(r)?this.clickNoTarget(n,r):nn(r)?this.clickActiveFeature(n,r):Ii(r)?this.clickInactive(n,r):void 0},jt.onTouchEnd=jt.onMouseUp=function(n){n.dragMoving&&this.fireUpdate(),this.stopDragging(n)};var bt={};function Yo(n,r){return!!n.lngLat&&n.lngLat.lng===r[0]&&n.lngLat.lat===r[1]}bt.onSetup=function(){var n=this.newFeature({type:_e,properties:{},geometry:{type:se,coordinates:[]}});return this.addFeature(n),this.clearSelectedFeatures(),this.updateUIClasses({mouse:J}),this.activateUIButton(le.POINT),this.setActionableState({trash:!0}),{point:n}},bt.stopDrawingAndRemove=function(n){this.deleteFeature([n.point.id],{silent:!0}),this.changeMode(ce.SIMPLE_SELECT)},bt.onTap=bt.onClick=function(n,r){this.updateUIClasses({mouse:$}),n.point.updateCoordinate("",r.lngLat.lng,r.lngLat.lat),this.map.fire(gt,{features:[n.point.toGeoJSON()]}),this.changeMode(ce.SIMPLE_SELECT,{featureIds:[n.point.id]})},bt.onStop=function(n){this.activateUIButton(),n.point.getCoordinate().length||this.deleteFeature([n.point.id],{silent:!0})},bt.toDisplayFeatures=function(n,r,u){var g=r.properties.id===n.point.id;if(r.properties.active=g?dt:_t,!g)return u(r)},bt.onTrash=bt.stopDrawingAndRemove,bt.onKeyUp=function(n,r){if(Jo(r)||Go(r))return this.stopDrawingAndRemove(n,r)};var qt={onSetup:function(){var n=this.newFeature({type:_e,properties:{},geometry:{type:ke,coordinates:[[]]}});return this.addFeature(n),this.clearSelectedFeatures(),Kn(this),this.updateUIClasses({mouse:J}),this.activateUIButton(le.POLYGON),this.setActionableState({trash:!0}),{polygon:n,currentVertexPosition:0}},clickAnywhere:function(n,r){if(n.currentVertexPosition>0&&Yo(r,n.polygon.coordinates[0][n.currentVertexPosition-1]))return this.changeMode(ce.SIMPLE_SELECT,{featureIds:[n.polygon.id]});this.updateUIClasses({mouse:J}),n.polygon.updateCoordinate("0."+n.currentVertexPosition,r.lngLat.lng,r.lngLat.lat),n.currentVertexPosition++,n.polygon.updateCoordinate("0."+n.currentVertexPosition,r.lngLat.lng,r.lngLat.lat)},clickOnVertex:function(n){return this.changeMode(ce.SIMPLE_SELECT,{featureIds:[n.polygon.id]})},onMouseMove:function(n,r){n.polygon.updateCoordinate("0."+n.currentVertexPosition,r.lngLat.lng,r.lngLat.lat),Yn(r)&&this.updateUIClasses({mouse:z})}};qt.onTap=qt.onClick=function(n,r){return Yn(r)?this.clickOnVertex(n,r):this.clickAnywhere(n,r)},qt.onKeyUp=function(n,r){Jo(r)?(this.deleteFeature([n.polygon.id],{silent:!0}),this.changeMode(ce.SIMPLE_SELECT)):Go(r)&&this.changeMode(ce.SIMPLE_SELECT,{featureIds:[n.polygon.id]})},qt.onStop=function(n){this.updateUIClasses({mouse:ve}),rn(this),this.activateUIButton(),this.getFeature(n.polygon.id)!==void 0&&(n.polygon.removeCoordinate("0."+n.currentVertexPosition),n.polygon.isValid()?this.map.fire(gt,{features:[n.polygon.toGeoJSON()]}):(this.deleteFeature([n.polygon.id],{silent:!0}),this.changeMode(ce.SIMPLE_SELECT,{},{silent:!0})))},qt.toDisplayFeatures=function(n,r,u){var g=r.properties.id===n.polygon.id;if(r.properties.active=g?dt:_t,!g)return u(r);if(r.geometry.coordinates.length!==0){var v=r.geometry.coordinates[0].length;if(!(v<3)){if(r.properties.meta=wt,u(wn(n.polygon.id,r.geometry.coordinates[0][0],"0.0",!1)),v>3){var _=r.geometry.coordinates[0].length-3;u(wn(n.polygon.id,r.geometry.coordinates[0][_],"0."+_,!1))}if(v<=4){var y=[[r.geometry.coordinates[0][0][0],r.geometry.coordinates[0][0][1]],[r.geometry.coordinates[0][1][0],r.geometry.coordinates[0][1][1]]];if(u({type:_e,properties:r.properties,geometry:{coordinates:y,type:re}}),v===3)return}return u(r)}}},qt.onTrash=function(n){this.deleteFeature([n.polygon.id],{silent:!0}),this.changeMode(ce.SIMPLE_SELECT)};var Ht={onSetup:function(n){var r,u,g=(n=n||{}).featureId,v="forward";if(g){if(!(r=this.getFeature(g)))throw new Error("Could not find a feature with the provided featureId");var _=n.from;if(_&&_.type==="Feature"&&_.geometry&&_.geometry.type==="Point"&&(_=_.geometry),_&&_.type==="Point"&&_.coordinates&&_.coordinates.length===2&&(_=_.coordinates),!_||!Array.isArray(_))throw new Error("Please use the `from` property to indicate which point to continue the line from");var y=r.coordinates.length-1;if(r.coordinates[y][0]===_[0]&&r.coordinates[y][1]===_[1])u=y+1,r.addCoordinate.apply(r,[u].concat(r.coordinates[y]));else{if(r.coordinates[0][0]!==_[0]||r.coordinates[0][1]!==_[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");v="backwards",u=0,r.addCoordinate.apply(r,[u].concat(r.coordinates[0]))}}else r=this.newFeature({type:_e,properties:{},geometry:{type:re,coordinates:[]}}),u=0,this.addFeature(r);return this.clearSelectedFeatures(),Kn(this),this.updateUIClasses({mouse:J}),this.activateUIButton(le.LINE),this.setActionableState({trash:!0}),{line:r,currentVertexPosition:u,direction:v}},clickAnywhere:function(n,r){if(n.currentVertexPosition>0&&Yo(r,n.line.coordinates[n.currentVertexPosition-1])||n.direction==="backwards"&&Yo(r,n.line.coordinates[n.currentVertexPosition+1]))return this.changeMode(ce.SIMPLE_SELECT,{featureIds:[n.line.id]});this.updateUIClasses({mouse:J}),n.line.updateCoordinate(n.currentVertexPosition,r.lngLat.lng,r.lngLat.lat),n.direction==="forward"?(n.currentVertexPosition++,n.line.updateCoordinate(n.currentVertexPosition,r.lngLat.lng,r.lngLat.lat)):n.line.addCoordinate(0,r.lngLat.lng,r.lngLat.lat)},clickOnVertex:function(n){return this.changeMode(ce.SIMPLE_SELECT,{featureIds:[n.line.id]})},onMouseMove:function(n,r){n.line.updateCoordinate(n.currentVertexPosition,r.lngLat.lng,r.lngLat.lat),Yn(r)&&this.updateUIClasses({mouse:z})}};Ht.onTap=Ht.onClick=function(n,r){if(Yn(r))return this.clickOnVertex(n,r);this.clickAnywhere(n,r)},Ht.onKeyUp=function(n,r){Go(r)?this.changeMode(ce.SIMPLE_SELECT,{featureIds:[n.line.id]}):Jo(r)&&(this.deleteFeature([n.line.id],{silent:!0}),this.changeMode(ce.SIMPLE_SELECT))},Ht.onStop=function(n){rn(this),this.activateUIButton(),this.getFeature(n.line.id)!==void 0&&(n.line.removeCoordinate(""+n.currentVertexPosition),n.line.isValid()?this.map.fire(gt,{features:[n.line.toGeoJSON()]}):(this.deleteFeature([n.line.id],{silent:!0}),this.changeMode(ce.SIMPLE_SELECT,{},{silent:!0})))},Ht.onTrash=function(n){this.deleteFeature([n.line.id],{silent:!0}),this.changeMode(ce.SIMPLE_SELECT)},Ht.toDisplayFeatures=function(n,r,u){var g=r.properties.id===n.line.id;if(r.properties.active=g?dt:_t,!g)return u(r);r.geometry.coordinates.length<2||(r.properties.meta=wt,u(wn(n.line.id,r.geometry.coordinates[n.direction==="forward"?r.geometry.coordinates.length-2:1],""+(n.direction==="forward"?r.geometry.coordinates.length-2:1),!1)),u(r))};var ji={simple_select:He,direct_select:jt,draw_point:bt,draw_polygon:qt,draw_line_string:Ht},ps={defaultMode:ce.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}],modes:ji,controls:{},userProperties:!1},hs={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},ms={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function xi(n,r){return n.map(function(u){return u.source?u:At(u,{id:u.id+"."+r,source:r==="hot"?x:V})})}var gs=No(function(n,r){var u="[object Arguments]",g="[object Map]",v="[object Object]",_="[object Set]",y=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,P={};P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P[u]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object Boolean]"]=P["[object DataView]"]=P["[object Date]"]=P["[object Error]"]=P["[object Function]"]=P[g]=P["[object Number]"]=P[v]=P["[object RegExp]"]=P[_]=P["[object String]"]=P["[object WeakMap]"]=!1;var G=typeof Fn=="object"&&Fn&&Fn.Object===Object&&Fn,k=typeof self=="object"&&self&&self.Object===Object&&self,B=G||k||Function("return this")(),q=r&&!r.nodeType&&r,ne=q&&n&&!n.nodeType&&n,ue=ne&&ne.exports===q,Be=ue&&G.process,L=function(){try{return Be&&Be.binding&&Be.binding("util")}catch{}}(),K=L&&L.isTypedArray;function Se(b,C){for(var R=-1,ie=b==null?0:b.length;++R<ie;)if(C(b[R],R,b))return!0;return!1}function we(b){var C=-1,R=Array(b.size);return b.forEach(function(ie,Ae){R[++C]=[Ae,ie]}),R}function xe(b){var C=-1,R=Array(b.size);return b.forEach(function(ie){R[++C]=ie}),R}var oe,Yt,xt,be=Array.prototype,pt=Function.prototype,$e=Object.prototype,Ko=B["__core-js_shared__"],Ni=pt.toString,yt=$e.hasOwnProperty,Bi=(oe=/[^.]+$/.exec(Ko&&Ko.keys&&Ko.keys.IE_PROTO||""))?"Symbol(src)_1."+oe:"",Ri=$e.toString,vs=RegExp("^"+Ni.call(yt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zi=ue?B.Buffer:void 0,Xn=B.Symbol,Ui=B.Uint8Array,Ji=$e.propertyIsEnumerable,ks=be.splice,Kt=Xn?Xn.toStringTag:void 0,Gi=Object.getOwnPropertySymbols,ws=zi?zi.isBuffer:void 0,Ss=(Yt=Object.keys,xt=Object,function(b){return Yt(xt(b))}),Zo=sn(B,"DataView"),Sn=sn(B,"Map"),Xo=sn(B,"Promise"),Qo=sn(B,"Set"),$o=sn(B,"WeakMap"),Cn=sn(Object,"create"),Cs=Qt(Zo),Ms=Qt(Sn),Es=Qt(Xo),Ls=Qt(Qo),Is=Qt($o),Vi=Xn?Xn.prototype:void 0,ei=Vi?Vi.valueOf:void 0;function Zt(b){var C=-1,R=b==null?0:b.length;for(this.clear();++C<R;){var ie=b[C];this.set(ie[0],ie[1])}}function Ct(b){var C=-1,R=b==null?0:b.length;for(this.clear();++C<R;){var ie=b[C];this.set(ie[0],ie[1])}}function Xt(b){var C=-1,R=b==null?0:b.length;for(this.clear();++C<R;){var ie=b[C];this.set(ie[0],ie[1])}}function Qn(b){var C=-1,R=b==null?0:b.length;for(this.__data__=new Xt;++C<R;)this.add(b[C])}function Dt(b){var C=this.__data__=new Ct(b);this.size=C.size}function Ps(b,C){var R=to(b),ie=!R&&js(b),Ae=!R&&!ie&&ti(b),pe=!R&&!ie&&!Ae&&$i(b),De=R||ie||Ae||pe,Ue=De?function(Ve,vt){for(var Mt=-1,Xe=Array(Ve);++Mt<Ve;)Xe[Mt]=vt(Mt);return Xe}(b.length,String):[],ht=Ue.length;for(var Ge in b)!C&&!yt.call(b,Ge)||De&&(Ge=="length"||Ae&&(Ge=="offset"||Ge=="parent")||pe&&(Ge=="buffer"||Ge=="byteLength"||Ge=="byteOffset")||As(Ge,ht))||Ue.push(Ge);return Ue}function $n(b,C){for(var R=b.length;R--;)if(Ki(b[R][0],C))return R;return-1}function Mn(b){return b==null?b===void 0?"[object Undefined]":"[object Null]":Kt&&Kt in Object(b)?function(C){var R=yt.call(C,Kt),ie=C[Kt];try{C[Kt]=void 0;var Ae=!0}catch{}var pe=Ri.call(C);return Ae&&(R?C[Kt]=ie:delete C[Kt]),pe}(b):function(C){return Ri.call(C)}(b)}function Wi(b){return En(b)&&Mn(b)==u}function qi(b,C,R,ie,Ae){return b===C||(b==null||C==null||!En(b)&&!En(C)?b!=b&&C!=C:function(pe,De,Ue,ht,Ge,Ve){var vt=to(pe),Mt=to(De),Xe=vt?"[object Array]":Nt(pe),Et=Mt?"[object Array]":Nt(De),an=(Xe=Xe==u?v:Xe)==v,no=(Et=Et==u?v:Et)==v,ln=Xe==Et;if(ln&&ti(pe)){if(!ti(De))return!1;vt=!0,an=!1}if(ln&&!an)return Ve||(Ve=new Dt),vt||$i(pe)?Hi(pe,De,Ue,ht,Ge,Ve):function(Ee,Ce,oo,Bt,ni,ct,Lt){switch(oo){case"[object DataView]":if(Ee.byteLength!=Ce.byteLength||Ee.byteOffset!=Ce.byteOffset)return!1;Ee=Ee.buffer,Ce=Ce.buffer;case"[object ArrayBuffer]":return!(Ee.byteLength!=Ce.byteLength||!ct(new Ui(Ee),new Ui(Ce)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ki(+Ee,+Ce);case"[object Error]":return Ee.name==Ce.name&&Ee.message==Ce.message;case"[object RegExp]":case"[object String]":return Ee==Ce+"";case g:var Rt=we;case _:var In=1&Bt;if(Rt||(Rt=xe),Ee.size!=Ce.size&&!In)return!1;var io=Lt.get(Ee);if(io)return io==Ce;Bt|=2,Lt.set(Ee,Ce);var un=Hi(Rt(Ee),Rt(Ce),Bt,ni,ct,Lt);return Lt.delete(Ee),un;case"[object Symbol]":if(ei)return ei.call(Ee)==ei.call(Ce)}return!1}(pe,De,Xe,Ue,ht,Ge,Ve);if(!(1&Ue)){var Ln=an&&yt.call(pe,"__wrapped__"),er=no&&yt.call(De,"__wrapped__");if(Ln||er){var Ds=Ln?pe.value():pe,Ns=er?De.value():De;return Ve||(Ve=new Dt),Ge(Ds,Ns,Ue,ht,Ve)}}return ln?(Ve||(Ve=new Dt),function(Ee,Ce,oo,Bt,ni,ct){var Lt=1&oo,Rt=Yi(Ee),In=Rt.length,io=Yi(Ce).length;if(In!=io&&!Lt)return!1;for(var un=In;un--;){var zt=Rt[un];if(!(Lt?zt in Ce:yt.call(Ce,zt)))return!1}var tr=ct.get(Ee);if(tr&&ct.get(Ce))return tr==Ce;var ro=!0;ct.set(Ee,Ce),ct.set(Ce,Ee);for(var oi=Lt;++un<In;){zt=Rt[un];var so=Ee[zt],ao=Ce[zt];if(Bt)var nr=Lt?Bt(ao,so,zt,Ce,Ee,ct):Bt(so,ao,zt,Ee,Ce,ct);if(!(nr===void 0?so===ao||ni(so,ao,oo,Bt,ct):nr)){ro=!1;break}oi||(oi=zt=="constructor")}if(ro&&!oi){var lo=Ee.constructor,uo=Ce.constructor;lo==uo||!("constructor"in Ee)||!("constructor"in Ce)||typeof lo=="function"&&lo instanceof lo&&typeof uo=="function"&&uo instanceof uo||(ro=!1)}return ct.delete(Ee),ct.delete(Ce),ro}(pe,De,Ue,ht,Ge,Ve)):!1}(b,C,R,ie,qi,Ae))}function Fs(b){return!(!Qi(b)||function(C){return!!Bi&&Bi in C}(b))&&(Zi(b)?vs:y).test(Qt(b))}function Os(b){if(R=(C=b)&&C.constructor,ie=typeof R=="function"&&R.prototype||$e,C!==ie)return Ss(b);var C,R,ie,Ae=[];for(var pe in Object(b))yt.call(b,pe)&&pe!="constructor"&&Ae.push(pe);return Ae}function Hi(b,C,R,ie,Ae,pe){var De=1&R,Ue=b.length,ht=C.length;if(Ue!=ht&&!(De&&ht>Ue))return!1;var Ge=pe.get(b);if(Ge&&pe.get(C))return Ge==C;var Ve=-1,vt=!0,Mt=2&R?new Qn:void 0;for(pe.set(b,C),pe.set(C,b);++Ve<Ue;){var Xe=b[Ve],Et=C[Ve];if(ie)var an=De?ie(Et,Xe,Ve,C,b,pe):ie(Xe,Et,Ve,b,C,pe);if(an!==void 0){if(an)continue;vt=!1;break}if(Mt){if(!Se(C,function(no,ln){if(Ln=ln,!Mt.has(Ln)&&(Xe===no||Ae(Xe,no,R,ie,pe)))return Mt.push(ln);var Ln})){vt=!1;break}}else if(Xe!==Et&&!Ae(Xe,Et,R,ie,pe)){vt=!1;break}}return pe.delete(b),pe.delete(C),vt}function Yi(b){return function(C,R,ie){var Ae=R(C);return to(C)?Ae:function(pe,De){for(var Ue=-1,ht=De.length,Ge=pe.length;++Ue<ht;)pe[Ge+Ue]=De[Ue];return pe}(Ae,ie(C))}(b,xs,Ts)}function eo(b,C){var R,ie,Ae=b.__data__;return((ie=typeof(R=C))=="string"||ie=="number"||ie=="symbol"||ie=="boolean"?R!=="__proto__":R===null)?Ae[typeof C=="string"?"string":"hash"]:Ae.map}function sn(b,C){var R=function(ie,Ae){return ie==null?void 0:ie[Ae]}(b,C);return Fs(R)?R:void 0}Zt.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},Zt.prototype.delete=function(b){var C=this.has(b)&&delete this.__data__[b];return this.size-=C?1:0,C},Zt.prototype.get=function(b){var C=this.__data__;if(Cn){var R=C[b];return R==="__lodash_hash_undefined__"?void 0:R}return yt.call(C,b)?C[b]:void 0},Zt.prototype.has=function(b){var C=this.__data__;return Cn?C[b]!==void 0:yt.call(C,b)},Zt.prototype.set=function(b,C){var R=this.__data__;return this.size+=this.has(b)?0:1,R[b]=Cn&&C===void 0?"__lodash_hash_undefined__":C,this},Ct.prototype.clear=function(){this.__data__=[],this.size=0},Ct.prototype.delete=function(b){var C=this.__data__,R=$n(C,b);return!(R<0)&&(R==C.length-1?C.pop():ks.call(C,R,1),--this.size,!0)},Ct.prototype.get=function(b){var C=this.__data__,R=$n(C,b);return R<0?void 0:C[R][1]},Ct.prototype.has=function(b){return $n(this.__data__,b)>-1},Ct.prototype.set=function(b,C){var R=this.__data__,ie=$n(R,b);return ie<0?(++this.size,R.push([b,C])):R[ie][1]=C,this},Xt.prototype.clear=function(){this.size=0,this.__data__={hash:new Zt,map:new(Sn||Ct),string:new Zt}},Xt.prototype.delete=function(b){var C=eo(this,b).delete(b);return this.size-=C?1:0,C},Xt.prototype.get=function(b){return eo(this,b).get(b)},Xt.prototype.has=function(b){return eo(this,b).has(b)},Xt.prototype.set=function(b,C){var R=eo(this,b),ie=R.size;return R.set(b,C),this.size+=R.size==ie?0:1,this},Qn.prototype.add=Qn.prototype.push=function(b){return this.__data__.set(b,"__lodash_hash_undefined__"),this},Qn.prototype.has=function(b){return this.__data__.has(b)},Dt.prototype.clear=function(){this.__data__=new Ct,this.size=0},Dt.prototype.delete=function(b){var C=this.__data__,R=C.delete(b);return this.size=C.size,R},Dt.prototype.get=function(b){return this.__data__.get(b)},Dt.prototype.has=function(b){return this.__data__.has(b)},Dt.prototype.set=function(b,C){var R=this.__data__;if(R instanceof Ct){var ie=R.__data__;if(!Sn||ie.length<199)return ie.push([b,C]),this.size=++R.size,this;R=this.__data__=new Xt(ie)}return R.set(b,C),this.size=R.size,this};var Ts=Gi?function(b){return b==null?[]:(b=Object(b),function(C,R){for(var ie=-1,Ae=C==null?0:C.length,pe=0,De=[];++ie<Ae;){var Ue=C[ie];R(Ue,ie,C)&&(De[pe++]=Ue)}return De}(Gi(b),function(C){return Ji.call(b,C)}))}:function(){return[]},Nt=Mn;function As(b,C){return!!(C=C??9007199254740991)&&(typeof b=="number"||T.test(b))&&b>-1&&b%1==0&&b<C}function Qt(b){if(b!=null){try{return Ni.call(b)}catch{}try{return b+""}catch{}}return""}function Ki(b,C){return b===C||b!=b&&C!=C}(Zo&&Nt(new Zo(new ArrayBuffer(1)))!="[object DataView]"||Sn&&Nt(new Sn)!=g||Xo&&Nt(Xo.resolve())!="[object Promise]"||Qo&&Nt(new Qo)!=_||$o&&Nt(new $o)!="[object WeakMap]")&&(Nt=function(b){var C=Mn(b),R=C==v?b.constructor:void 0,ie=R?Qt(R):"";if(ie)switch(ie){case Cs:return"[object DataView]";case Ms:return g;case Es:return"[object Promise]";case Ls:return _;case Is:return"[object WeakMap]"}return C});var js=Wi(function(){return arguments}())?Wi:function(b){return En(b)&&yt.call(b,"callee")&&!Ji.call(b,"callee")},to=Array.isArray,ti=ws||function(){return!1};function Zi(b){if(!Qi(b))return!1;var C=Mn(b);return C=="[object Function]"||C=="[object GeneratorFunction]"||C=="[object AsyncFunction]"||C=="[object Proxy]"}function Xi(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=9007199254740991}function Qi(b){var C=typeof b;return b!=null&&(C=="object"||C=="function")}function En(b){return b!=null&&typeof b=="object"}var $i=K?function(b){return function(C){return b(C)}}(K):function(b){return En(b)&&Xi(b.length)&&!!P[Mn(b)]};function xs(b){return(C=b)!=null&&Xi(C.length)&&!Zi(C)?Ps(b):Os(b);var C}n.exports=function(b,C){return qi(b,C)}}),_s={Polygon:ut,LineString:St,Point:Wt,MultiPolygon:Qe,MultiLineString:Qe,MultiPoint:Qe};function bs(n,r){return r.modes=ce,r.getFeatureIdsAt=function(u){return j.click({point:u},null,n).map(function(g){return g.properties.id})},r.getSelectedIds=function(){return n.store.getSelectedIds()},r.getSelected=function(){return{type:je,features:n.store.getSelectedIds().map(function(u){return n.store.get(u)}).map(function(u){return u.toGeoJSON()})}},r.getSelectedPoints=function(){return{type:je,features:n.store.getSelectedCoordinates().map(function(u){return{type:_e,properties:{},geometry:{type:se,coordinates:u.coordinates}}})}},r.set=function(u){if(u.type===void 0||u.type!==je||!Array.isArray(u.features))throw new Error("Invalid FeatureCollection");var g=n.store.createRenderBatch(),v=n.store.getAllIds().slice(),_=r.add(u),y=new ot(_);return(v=v.filter(function(T){return!y.has(T)})).length&&r.delete(v),g(),_},r.add=function(u){var g=JSON.parse(JSON.stringify(Pi(u))).features.map(function(v){if(v.id=v.id||Bo(),v.geometry===null)throw new Error("Invalid geometry: null");if(n.store.get(v.id)===void 0||n.store.get(v.id).type!==v.geometry.type){var _=_s[v.geometry.type];if(_===void 0)throw new Error("Invalid geometry type: "+v.geometry.type+".");var y=new _(n,v);n.store.add(y)}else{var T=n.store.get(v.id);T.properties=v.properties,gs(T.getCoordinates(),v.geometry.coordinates)||T.incomingCoords(v.geometry.coordinates)}return v.id});return n.store.render(),g},r.get=function(u){var g=n.store.get(u);if(g)return g.toGeoJSON()},r.getAll=function(){return{type:je,features:n.store.getAll().map(function(u){return u.toGeoJSON()})}},r.delete=function(u){return n.store.delete(u,{silent:!0}),r.getMode()!==ce.DIRECT_SELECT||n.store.getSelectedIds().length?n.store.render():n.events.changeMode(ce.SIMPLE_SELECT,void 0,{silent:!0}),r},r.deleteAll=function(){return n.store.delete(n.store.getAllIds(),{silent:!0}),r.getMode()===ce.DIRECT_SELECT?n.events.changeMode(ce.SIMPLE_SELECT,void 0,{silent:!0}):n.store.render(),r},r.changeMode=function(u,g){return g===void 0&&(g={}),u===ce.SIMPLE_SELECT&&r.getMode()===ce.SIMPLE_SELECT?(v=g.featureIds||[],_=n.store.getSelectedIds(),v.length===_.length&&JSON.stringify(v.map(function(y){return y}).sort())===JSON.stringify(_.map(function(y){return y}).sort())||(n.store.setSelected(g.featureIds,{silent:!0}),n.store.render()),r):(u===ce.DIRECT_SELECT&&r.getMode()===ce.DIRECT_SELECT&&g.featureId===n.store.getSelectedIds()[0]||n.events.changeMode(u,g,{silent:!0}),r);var v,_},r.getMode=function(){return n.events.getMode()},r.trash=function(){return n.events.trash({silent:!0}),r},r.combineFeatures=function(){return n.events.combineFeatures({silent:!0}),r},r.uncombineFeatures=function(){return n.events.uncombineFeatures({silent:!0}),r},r.setFeatureProperty=function(u,g,v){return n.store.setFeatureProperty(u,g,v),r},r}var ys=function(n,r){var u={options:n=function(v){v===void 0&&(v={});var _=At(v);return v.controls||(_.controls={}),v.displayControlsDefault===!1?_.controls=At(ms,v.controls):_.controls=At(hs,v.controls),(_=At(ps,_)).styles=xi(_.styles,"cold").concat(xi(_.styles,"hot")),_}(n)};r=bs(u,r),u.api=r;var g=rs(u);return r.onAdd=g.onAdd,r.onRemove=g.onRemove,r.types=le,r.options=n,r};function Di(n){ys(n,this)}return Di.modes=ji,Di})})(wl);const Sl=pi;let Ie;const Yr=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Yr.decode();let mo=new Uint8Array;function xn(){return mo.byteLength===0&&(mo=new Uint8Array(Ie.memory.buffer)),mo}function Dn(t,e){return Yr.decode(xn().subarray(t,t+e))}const Pt=new Array(32).fill(void 0);Pt.push(void 0,null,!0,!1);let Nn=Pt.length;function Or(t){Nn===Pt.length&&Pt.push(Pt.length+1);const e=Nn;return Nn=Pt[e],Pt[e]=t,e}function hi(t){return Pt[t]}function Cl(t){t<36||(Pt[t]=Nn,Nn=t)}function Kr(t){const e=hi(t);return Cl(t),e}let Un=0;function Ml(t,e){const o=e(t.length*1);return xn().set(t,o/1),Un=t.length,o}let go=new Int32Array;function It(){return go.byteLength===0&&(go=new Int32Array(Ie.memory.buffer)),go}const _o=new TextEncoder("utf-8"),El=typeof _o.encodeInto=="function"?function(t,e){return _o.encodeInto(t,e)}:function(t,e){const o=_o.encode(t);return e.set(o),{read:t.length,written:o.length}};function Ll(t,e,o){if(o===void 0){const c=_o.encode(t),f=e(c.length);return xn().subarray(f,f+c.length).set(c),Un=c.length,f}let i=t.length,a=e(i);const l=xn();let s=0;for(;s<i;s++){const c=t.charCodeAt(s);if(c>127)break;l[a+s]=c}if(s!==i){s!==0&&(t=t.slice(s)),a=o(a,i,i=s+t.length*3);const c=xn().subarray(a+s,a+i),f=El(t,c);s+=f.written}return Un=s,a}class So{static __wrap(e){const o=Object.create(So.prototype);return o.ptr=e,o}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();Ie.__wbg_jsroutesnapper_free(e)}constructor(e){try{const l=Ie.__wbindgen_add_to_stack_pointer(-16),s=Ml(e,Ie.__wbindgen_malloc),c=Un;Ie.jsroutesnapper_new(l,s,c);var o=It()[l/4+0],i=It()[l/4+1],a=It()[l/4+2];if(a)throw Kr(i);return So.__wrap(o)}finally{Ie.__wbindgen_add_to_stack_pointer(16)}}toFinalFeature(){try{const i=Ie.__wbindgen_add_to_stack_pointer(-16);Ie.jsroutesnapper_toFinalFeature(i,this.ptr);var e=It()[i/4+0],o=It()[i/4+1];let a;return e!==0&&(a=Dn(e,o).slice(),Ie.__wbindgen_free(e,o*1)),a}finally{Ie.__wbindgen_add_to_stack_pointer(16)}}renderGeojson(){try{const i=Ie.__wbindgen_add_to_stack_pointer(-16);Ie.jsroutesnapper_renderGeojson(i,this.ptr);var e=It()[i/4+0],o=It()[i/4+1];return Dn(e,o)}finally{Ie.__wbindgen_add_to_stack_pointer(16),Ie.__wbindgen_free(e,o)}}setSnapMode(e){Ie.jsroutesnapper_setSnapMode(this.ptr,e)}onMouseMove(e,o,i){return Ie.jsroutesnapper_onMouseMove(this.ptr,e,o,i)!==0}onClick(){Ie.jsroutesnapper_onClick(this.ptr)}onDragStart(){return Ie.jsroutesnapper_onDragStart(this.ptr)!==0}onMouseUp(){return Ie.jsroutesnapper_onMouseUp(this.ptr)!==0}clearState(){Ie.jsroutesnapper_clearState(this.ptr)}}async function Il(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(i){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i);else throw i}const o=await t.arrayBuffer();return await WebAssembly.instantiate(o,e)}else{const o=await WebAssembly.instantiate(t,e);return o instanceof WebAssembly.Instance?{instance:o,module:t}:o}}function Pl(){const t={};return t.wbg={},t.wbg.__wbindgen_string_new=function(e,o){const i=Dn(e,o);return Or(i)},t.wbg.__wbindgen_object_drop_ref=function(e){Kr(e)},t.wbg.__wbg_log_4b5638ad60bdc54a=function(e){console.log(hi(e))},t.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return Or(e)},t.wbg.__wbg_stack_658279fe44541cf6=function(e,o){const i=hi(o).stack,a=Ll(i,Ie.__wbindgen_malloc,Ie.__wbindgen_realloc),l=Un;It()[e/4+1]=l,It()[e/4+0]=a},t.wbg.__wbg_error_f851667af71bcfc6=function(e,o){try{console.error(Dn(e,o))}finally{Ie.__wbindgen_free(e,o)}},t.wbg.__wbindgen_throw=function(e,o){throw new Error(Dn(e,o))},t}function Fl(t,e){return Ie=t.exports,Zr.__wbindgen_wasm_module=e,go=new Int32Array,mo=new Uint8Array,Ie}async function Zr(t){typeof t>"u"&&(t="/atip/assets/route_snapper_bg.wasm");const e=Pl();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:o,module:i}=await Il(await t,e);return Fl(o,i)}var Gn,mi,Mo,Xr,Vn,gi,Ut,dn;class Ol{constructor(e,o,i){Pn(this,Gn);Pn(this,Mo);Pn(this,Vn);Pn(this,Ut);this.controlDiv=i,this.map=e,console.time("Deserialize and setup JsRouteSnapper"),this.inner=new So(o),console.timeEnd("Deserialize and setup JsRouteSnapper"),console.log("JsRouteSnapper ready, waiting for idle event"),this.active=!1,this.map.once("idle",()=>{console.log("JsRouteSnapper now usable"),this.map.addSource("route-snapper",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:"route-points",type:"circle",source:"route-snapper",paint:{"circle-radius":10,"circle-color":["match",["get","type"],"hovered","green","important","red","black"],"circle-opacity":["match",["get","type"],"unimportant",0,1],"circle-stroke-width":["match",["get","type"],"unimportant",2,0],"circle-stroke-color":"black"},filter:["in","$type","Point"]}),this.map.addLayer({id:"route-lines",type:"line",source:"route-snapper",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"black","line-width":2.5},filter:["in","$type","LineString"]}),this.map.on("mousemove",l=>{if(!this.active)return;const s={x:l.point.x-10,y:l.point.y},c=this.map.unproject(l.point).distanceTo(this.map.unproject(s));this.inner.onMouseMove(l.lngLat.lng,l.lngLat.lat,c)&&mt(this,Ut,dn).call(this)}),this.map.on("click",()=>{this.active&&(this.inner.onClick(),mt(this,Ut,dn).call(this))}),this.map.on("dragstart",l=>{this.active&&this.inner.onDragStart()&&this.map.dragPan.disable()}),this.map.on("mouseup",l=>{this.active&&this.inner.onMouseUp()&&this.map.dragPan.enable()}),document.addEventListener("keypress",l=>{this.active&&l.key=="Enter"&&(l.preventDefault(),mt(this,Vn,gi).call(this))}),document.addEventListener("keydown",l=>{this.active&&l.key=="Shift"&&(l.preventDefault(),this.inner.setSnapMode(!1),mt(this,Ut,dn).call(this))}),document.addEventListener("keyup",l=>{this.active&&l.key=="Shift"&&(l.preventDefault(),this.inner.setSnapMode(!0),mt(this,Ut,dn).call(this))}),mt(this,Gn,mi).call(this)})}}Gn=new WeakSet,mi=function(){this.active=!1,this.inner.clearState(),mt(this,Ut,dn).call(this),this.controlDiv.innerHTML="";var e=document.createElement("button");e.innerText="Route tool",e.type="button",e.onclick=()=>{mt(this,Mo,Xr).call(this)},this.controlDiv.appendChild(e)},Mo=new WeakSet,Xr=function(){this.active=!0,this.controlDiv.innerHTML="";var e=document.createElement("button");e.type="button",e.innerText="Finish route",e.onclick=()=>{mt(this,Vn,gi).call(this)},this.controlDiv.appendChild(e);const o=document.createElement("ul");o.innerHTML="<li><b>Click</b> green points on the transport network</br>to create snapped routes</li><li>Hold <b>Shift</b> to draw a point anywhere</li><li><b>Click and drag</b> any point to move it</li><li><b>Click</b> a red waypoint to delete it</li><li>Press <b>Enter</b> to finish route</li>",this.controlDiv.appendChild(o)},Vn=new WeakSet,gi=function(){const e=this.inner.toFinalFeature();e&&this.controlDiv.dispatchEvent(new CustomEvent("new-route",{detail:JSON.parse(e)})),mt(this,Gn,mi).call(this)},Ut=new WeakSet,dn=function(){this.map.getSource("route-snapper").setData(JSON.parse(this.inner.renderGeojson()))};async function Tl(t,e){const o=await fetch(t),i=o.body.getReader(),a=o.headers.get("Content-Length"),l=document.getElementById(e);let s=0,c=[];for(;;){const{done:h,value:w}=await i.read();if(h)break;c.push(w),s+=w.length;const E=100*s/a;l.style=`background: linear-gradient(to right, red ${E}%, transparent 0);`}let f=new Uint8Array(s),d=0;for(let h of c)f.set(h,d),d+=h.length;return f}const Pe=tn(mn()),Jn=tn(null),_i=tn(null);function mn(){return{type:"FeatureCollection",features:[]}}const Si=Vr(Pe,t=>{let e=t.features.find(o=>o.properties.editing);return e?e.id:null});function Al(t){Pe.update(e=>{for(let o of e.features)o.id==t?o.properties.editing=!0:delete o.properties.editing;return e})}function Qr(){Pe.update(t=>(t.features.forEach(e=>{delete e.properties.editing}),t))}function jl(t){let e,o;return{c(){e=D("div"),o=D("div"),o.textContent="Route tool loading...",H(o,"id","TODO"),H(e,"class","overlay-topright svelte-fq8kgl")},m(i,a){A(i,e,a),N(e,o),t[3](o),t[4](e)},p:Me,i:Me,o:Me,d(i){i&&O(e),t[3](null),t[4](null)}}}const fo="black",Tr=7,Ar=10;function xl(t,e,o){let i;Ft(t,Pe,m=>o(7,i=m));const{getMap:a}=bn("map"),l=[{id:"base-points",filter:["all",ko,["==","meta","feature"]],...wo(fo,Tr)},{id:"draggable-points",filter:["all",ko,["!=","meta","feature"]],...wo("blue",1.5*Tr)},{id:"base-line",filter:ki,...zn(fo,Ar)},{id:"base-polygon-fill",filter:vo,...wi(fo,.1)},{id:"base-polygon-outline",filter:vo,...zn(fo,Ar/2)}];let{url:s}=e,c,f,d;en(async()=>{const m=a();d=new Sl({displayControlsDefault:!1,controls:{point:!0,polygon:!0},styles:l}),m.addControl(d),await h(m),m.on("draw.create",p=>{const S=p.features[0];S.geometry.type=="Polygon"?S.properties.intervention_type="area":S.properties.intervention_type="other",Pe.update(W=>(W.features.push(S),W))}),m.on("draw.update",p=>{const S=p.features[0];Pe.update(W=>{const te=W.features.find(I=>I.id==S.id);return te.geometry=S.geometry,W})}),m.on("draw.selectionchange",p=>{p.features.length==1?Al(p.features[0].id):p.features.length==0&&Qr()}),Pe.subscribe(p=>{d.set(p)}),m.on("mousemove",p=>{var S=null;const W=d.getFeatureIdsAt(p.point);W.length>0&&(S=W[0]),_i.set(S)}),m.on("mouseout",()=>{_i.set(null)}),Si.subscribe(p=>{if(p){let S=i.features.find(W=>W.id==p);S.geometry.type!="Point"&&d.changeMode("direct_select",{featureId:S.id})}})});async function h(m){await Zr(),console.log(`Grabbing ${s}`);try{const p=await Tl(s,f.id);let S=new Ol(m,p,c)}catch(p){console.log(`Route tool broke: ${p}`),o(0,c.innerHTML="Failed to load",c)}c.addEventListener("new-route",p=>{const S=p.detail,W=d.add(S);S.id=W[0],S.properties.intervention_type="route",Pe.update(te=>(te.features.push(S),te)),d.changeMode("direct_select",{featureId:S.id})})}function w(m){We[m?"unshift":"push"](()=>{f=m,o(1,f)})}function E(m){We[m?"unshift":"push"](()=>{c=m,o(0,c)})}return t.$$set=m=>{"url"in m&&o(2,s=m.url)},[c,f,s,w,E]}class Dl extends ze{constructor(e){super(),Re(this,e,xl,jl,Ne,{url:2})}}function jr(t,e,o){const i=t.slice();return i[9]=e[o],i}function xr(t){let e,o,i,a,l=Bl(t[9])+"",s,c,f,d;return{c(){e=D("label"),o=D("input"),a=ee(),s=Fe(l),c=ee(),H(o,"type","radio"),H(o,"name",i="type_"+t[3]),o.__value=t[9],o.value=o.__value,t[7][0].push(o)},m(h,w){A(h,e,w),N(e,o),o.checked=o.__value===t[1],N(e,a),N(e,s),N(e,c),f||(d=Q(o,"change",t[6]),f=!0)},p(h,w){w&8&&i!==(i="type_"+h[3])&&H(o,"name",i),w&2&&(o.checked=o.__value===h[1])},d(h){h&&O(e),t[7][0].splice(t[7][0].indexOf(o),1),f=!1,d()}}}function Nl(t){let e,o,i,a,l,s,c,f,d,h,w,E,m,p,S,W,te,I,x,V,J,$,de,z,ve,le,_e,ke,re,se,je=["area","route","crossing","other"],Le=[];for(let M=0;M<4;M+=1)Le[M]=xr(jr(t,je,M));return{c(){e=D("br"),o=ee(),i=D("label"),a=Fe("Name"),l=D("br"),s=ee(),c=D("input"),f=ee(),d=D("br"),h=ee(),w=D("div");for(let M=0;M<4;M+=1)Le[M].c();E=ee(),m=D("br"),p=ee(),S=D("label"),W=Fe("Description"),te=D("br"),I=ee(),x=D("textarea"),V=ee(),J=D("br"),$=ee(),de=D("div"),z=D("button"),z.textContent="Delete",ve=ee(),le=D("button"),le.textContent="Save",_e=ee(),ke=D("br"),H(c,"type","text"),H(c,"size","30"),H(w,"class","radio svelte-szj8gd"),H(x,"rows","3"),H(x,"cols","30"),H(x,"class","svelte-szj8gd"),H(z,"type","button"),H(le,"type","button"),li(le,"float","right")},m(M,X){A(M,e,X),A(M,o,X),A(M,i,X),N(i,a),N(i,l),N(i,s),N(i,c),pn(c,t[0]),A(M,f,X),A(M,d,X),A(M,h,X),A(M,w,X);for(let Oe=0;Oe<4;Oe+=1)Le[Oe].m(w,null);A(M,E,X),A(M,m,X),A(M,p,X),A(M,S,X),N(S,W),N(S,te),N(S,I),N(S,x),pn(x,t[2]),A(M,V,X),A(M,J,X),A(M,$,X),A(M,de,X),N(de,z),N(de,ve),N(de,le),A(M,_e,X),A(M,ke,X),re||(se=[Q(c,"input",t[5]),Q(x,"input",t[8]),Q(z,"click",t[4]),Q(le,"click",Qr)],re=!0)},p(M,[X]){if(X&1&&c.value!==M[0]&&pn(c,M[0]),X&10){je=["area","route","crossing","other"];let Oe;for(Oe=0;Oe<4;Oe+=1){const ce=jr(M,je,Oe);Le[Oe]?Le[Oe].p(ce,X):(Le[Oe]=xr(ce),Le[Oe].c(),Le[Oe].m(w,null))}for(;Oe<4;Oe+=1)Le[Oe].d(1)}X&4&&pn(x,M[2])},i:Me,o:Me,d(M){M&&O(e),M&&O(o),M&&O(i),M&&O(f),M&&O(d),M&&O(h),M&&O(w),Eo(Le,M),M&&O(E),M&&O(m),M&&O(p),M&&O(S),M&&O(V),M&&O(J),M&&O($),M&&O(de),M&&O(_e),M&&O(ke),re=!1,qe(se)}}}function Bl(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Rl(t,e,o){let{id:i}=e,{name:a}=e,{intervention_type:l}=e,{description:s}=e;function c(){Pe.update(E=>(E.features=E.features.filter(m=>m.id!=i),E))}const f=[[]];function d(){a=this.value,o(0,a)}function h(){l=this.__value,o(1,l)}function w(){s=this.value,o(2,s)}return t.$$set=E=>{"id"in E&&o(3,i=E.id),"name"in E&&o(0,a=E.name),"intervention_type"in E&&o(1,l=E.intervention_type),"description"in E&&o(2,s=E.description)},[a,l,s,i,c,d,h,f,w]}class zl extends ze{constructor(e){super(),Re(this,e,Rl,Nl,Ne,{id:3,name:0,intervention_type:1,description:2})}}function Dr(t,e,o){const i=t.slice();return i[10]=e[o],i[11]=e,i[12]=o,i}function Ul(t){let e,o,i,a,l,s;function c(w){t[5](w,t[10])}function f(w){t[6](w,t[10])}function d(w){t[7](w,t[10])}let h={id:t[10].id};return t[10].properties.name!==void 0&&(h.name=t[10].properties.name),t[10].properties.intervention_type!==void 0&&(h.intervention_type=t[10].properties.intervention_type),t[10].properties.description!==void 0&&(h.description=t[10].properties.description),e=new zl({props:h}),We.push(()=>Gt(e,"name",c,t[10].properties.name)),We.push(()=>Gt(e,"intervention_type",f,t[10].properties.intervention_type)),We.push(()=>Gt(e,"description",d,t[10].properties.description)),{c(){ge(e.$$.fragment),l=ee()},m(w,E){he(e,w,E),A(w,l,E),s=!0},p(w,E){t=w;const m={};E&1&&(m.id=t[10].id),!o&&E&1&&(o=!0,m.name=t[10].properties.name,Jt(()=>o=!1)),!i&&E&1&&(i=!0,m.intervention_type=t[10].properties.intervention_type,Jt(()=>i=!1)),!a&&E&1&&(a=!0,m.description=t[10].properties.description,Jt(()=>a=!1)),e.$set(m)},i(w){s||(U(e.$$.fragment,w),s=!0)},o(w){Y(e.$$.fragment,w),s=!1},d(w){me(e,w),w&&O(l)}}}function Jl(t){let e=t[12]+1+"",o,i,a=Co(t[10])+"",l;return{c(){o=Fe(e),i=Fe(") "),l=Fe(a)},m(s,c){A(s,o,c),A(s,i,c),A(s,l,c)},p(s,c){c&1&&a!==(a=Co(s[10])+"")&&lt(l,a)},d(s){s&&O(o),s&&O(i),s&&O(l)}}}function Gl(t){let e,o=t[12]+1+"",i,a,l=Co(t[10])+"",s;return{c(){e=D("strong"),i=Fe(o),a=Fe(") "),s=Fe(l)},m(c,f){A(c,e,f),N(e,i),N(e,a),N(e,s)},p(c,f){f&1&&l!==(l=Co(c[10])+"")&&lt(s,l)},d(c){c&&O(e)}}}function Vl(t){let e;function o(l,s){return l[10].id==l[1]?Gl:Jl}let i=o(t),a=i(t);return{c(){a.c(),e=ee()},m(l,s){a.m(l,s),A(l,e,s)},p(l,s){i===(i=o(l))&&a?a.p(l,s):(a.d(1),a=i(l),a&&(a.c(),a.m(e.parentNode,e)))},d(l){a.d(l),l&&O(e)}}}function Nr(t){let e,o,i;function a(s){t[8](s,t[10])}let l={$$slots:{title:[Vl],default:[Ul]},$$scope:{ctx:t}};return t[10].properties.editing!==void 0&&(l.open=t[10].properties.editing),e=new Ma({props:l}),We.push(()=>Gt(e,"open",a,t[10].properties.editing)),e.$on("click",function(){Bn(t[3](t[10].id))&&t[3](t[10].id).apply(this,arguments)}),e.$on("mouseenter",function(){Bn(Jn.set(t[10].id))&&Jn.set(t[10].id).apply(this,arguments)}),e.$on("mouseleave",t[2]),{c(){ge(e.$$.fragment)},m(s,c){he(e,s,c),i=!0},p(s,c){t=s;const f={};c&8195&&(f.$$scope={dirty:c,ctx:t}),!o&&c&1&&(o=!0,f.open=t[10].properties.editing,Jt(()=>o=!1)),e.$set(f)},i(s){i||(U(e.$$.fragment,s),i=!0)},o(s){Y(e.$$.fragment,s),i=!1},d(s){me(e,s)}}}function Wl(t){let e,o,i=t[0].features,a=[];for(let s=0;s<i.length;s+=1)a[s]=Nr(Dr(t,i,s));const l=s=>Y(a[s],1,1,()=>{a[s]=null});return{c(){for(let s=0;s<a.length;s+=1)a[s].c();e=gn()},m(s,c){for(let f=0;f<a.length;f+=1)a[f].m(s,c);A(s,e,c),o=!0},p(s,c){if(c&15){i=s[0].features;let f;for(f=0;f<i.length;f+=1){const d=Dr(s,i,f);a[f]?(a[f].p(d,c),U(a[f],1)):(a[f]=Nr(d),a[f].c(),U(a[f],1),a[f].m(e.parentNode,e))}for(et(),f=i.length;f<a.length;f+=1)l(f);tt()}},i(s){if(!o){for(let c=0;c<i.length;c+=1)U(a[c]);o=!0}},o(s){a=a.filter(Boolean);for(let c=0;c<a.length;c+=1)Y(a[c]);o=!1},d(s){Eo(a,s),s&&O(e)}}}function ql(t){let e,o,i,a;return e=new ya({props:{$$slots:{default:[Wl]},$$scope:{ctx:t}}}),{c(){ge(e.$$.fragment)},m(l,s){he(e,l,s),o=!0,i||(a=Q(window,"keydown",t[4]),i=!0)},p(l,[s]){const c={};s&8195&&(c.$$scope={dirty:s,ctx:l}),e.$set(c)},i(l){o||(U(e.$$.fragment,l),o=!0)},o(l){Y(e.$$.fragment,l),o=!1},d(l){me(e,l),i=!1,a()}}}function Co(t){if(t.properties.name)return t.properties.name;var e=t.properties.intervention_type;return e=="other"&&(t.geometry.type=="Point"?e="point":t.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function Hl(t,e,o){let i,a,l;Ft(t,Si,m=>o(9,i=m)),Ft(t,Pe,m=>o(0,a=m)),Ft(t,_i,m=>o(1,l=m));function s(){Jn.set(null)}function c(m){for(let p of a.features)if(p.properties.editing&&p.id!=m){delete p.properties.editing;return}}function f(m){const p=i;if(m.key=="Delete"){const S=m.originalTarget.tagName;if(S!="CANVAS"&&S!="BODY")return;m.preventDefault(),Pe.update(W=>(W.features=W.features.filter(te=>te.id!=p),W))}}function d(m,p){t.$$.not_equal(p.properties.name,m)&&(p.properties.name=m,Pe.set(a))}function h(m,p){t.$$.not_equal(p.properties.intervention_type,m)&&(p.properties.intervention_type=m,Pe.set(a))}function w(m,p){t.$$.not_equal(p.properties.description,m)&&(p.properties.description=m,Pe.set(a))}function E(m,p){t.$$.not_equal(p.properties.editing,m)&&(p.properties.editing=m,Pe.set(a))}return[a,l,s,c,f,d,h,w,E]}class Yl extends ze{constructor(e){super(),Re(this,e,Hl,ql,Ne,{})}}function Kl(t){let e,o,i,a,l,s,c,f,d,h,w,E,m,p,S,W,te,I,x,V=t[0].features.length+"",J,$,de,z,ve,le,_e,ke;return{c(){e=D("div"),o=D("label"),i=Fe(`Scheme name:
    `),a=D("input"),l=ee(),s=D("br"),c=ee(),f=D("div"),d=D("label"),h=D("input"),w=ee(),E=D("button"),E.textContent="Load from GeoJSON",m=ee(),p=D("button"),p.textContent="Export to GeoJSON",S=ee(),W=D("br"),te=ee(),I=D("div"),x=D("span"),J=Fe(V),$=Fe(" interventions"),de=ee(),z=D("button"),ve=Fe("Clear all"),H(a,"type","text"),H(h,"type","file"),H(h,"id","load_geojson"),H(h,"class","svelte-lhyd1e"),H(E,"type","button"),H(E,"onclick","document.getElementById('load_geojson').click();"),H(p,"type","button"),H(p,"class","align-right svelte-lhyd1e"),H(z,"type","button"),H(z,"class","align-right svelte-lhyd1e"),z.disabled=le=t[0].features.length==0},m(re,se){A(re,e,se),N(e,o),N(o,i),N(o,a),pn(a,t[0].scheme_name),A(re,l,se),A(re,s,se),A(re,c,se),A(re,f,se),N(f,d),N(d,h),N(d,w),N(d,E),N(f,m),N(f,p),A(re,S,se),A(re,W,se),A(re,te,se),A(re,I,se),N(I,x),N(x,J),N(x,$),N(I,de),N(I,z),N(z,ve),_e||(ke=[Q(a,"input",t[5]),Q(h,"change",t[3]),Q(p,"click",t[2]),Q(z,"click",t[1])],_e=!0)},p(re,[se]){se&1&&a.value!==re[0].scheme_name&&pn(a,re[0].scheme_name),se&1&&V!==(V=re[0].features.length+"")&&lt(J,V),se&1&&le!==(le=re[0].features.length==0)&&(z.disabled=le)},i:Me,o:Me,d(re){re&&O(e),re&&O(l),re&&O(s),re&&O(c),re&&O(f),re&&O(S),re&&O(W),re&&O(te),re&&O(I),_e=!1,qe(ke)}}}function Zl(t,e){var o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(e)),o.setAttribute("download",t),document.body.appendChild(o),o.click(),document.body.removeChild(o)}function Xl(t,e,o){let i;Ft(t,Pe,h=>o(0,i=h));let{authorityName:a}=e,l=window.localStorage.getItem(a);if(l)try{Pe.set(JSON.parse(l))}catch(h){console.log(`Failed to load from local storage: ${h}`)}Pe.subscribe(h=>window.localStorage.setItem(a,JSON.stringify(h))),Pe.update(h=>(h.authority=a,h));function s(){confirm("Do you want to clear the current scheme? (You should save it first!)")&&Pe.set(mn())}function c(){const h=i;var w=a;h.scheme_name&&(w+="_"+h.scheme_name),w+=".geojson",Zl(w,JSON.stringify(h,null,"  "))}function f(h){const w=new FileReader;w.onload=E=>{try{Pe.set(JSON.parse(E.target.result))}catch(m){console.log(`Couldn't load from a file: ${m}`),window.alert(`Couldn't load scheme from a file: ${m}`)}},w.readAsText(h.target.files[0])}function d(){i.scheme_name=this.value,Pe.set(i)}return t.$$set=h=>{"authorityName"in h&&o(4,a=h.authorityName)},[i,s,c,f,a,d]}class Ql extends ze{constructor(e){super(),Re(this,e,Xl,Kl,Ne,{authorityName:4})}}let fn="hover",si="yellow",$l=10,eu=7;function tu(t,e,o){let i,a;Ft(t,Pe,c=>o(1,i=c));const{getMap:l}=bn("map"),s=Vr(Pe,c=>c.features.some(f=>f.properties.editing));return Ft(t,s,c=>o(2,a=c)),en(()=>{const c=l();c.addSource(fn,{type:"geojson",data:mn()}),c.addLayer({id:"hover-polygons",source:fn,filter:vo,...wi(si,.5)}),c.addLayer({id:"hover-lines",source:fn,filter:ki,...zn(si,1.5*$l,1)}),c.addLayer({id:"hover-points",source:fn,filter:ko,...wo(si,1.5*eu,.5)}),s.subscribe(f=>{f&&Jn.set(null)}),Jn.subscribe(f=>{f&&!a?c.getSource(fn).setData(i.features.find(d=>d.id==f)):c.getSource(fn).setData(mn())})}),[s]}class nu extends ze{constructor(e){super(),Re(this,e,tu,null,Ne,{})}}let On="editing",ai="red",ou=10,iu=7;function ru(t,e,o){let i;Ft(t,Pe,l=>o(0,i=l));const{getMap:a}=bn("map");return en(()=>{const l=a();l.addSource(On,{type:"geojson",data:mn()}),l.addLayer({id:"editing-polygons",source:On,filter:vo,...wi(ai,.5)}),l.addLayer({id:"editing-lines",source:On,filter:ki,...zn(ai,1.5*ou)}),l.addLayer({id:"editing-points",source:On,filter:ko,...wo(ai,1.5*iu)}),Pe.subscribe(s=>{l.getSource(On).setData(s.features.find(c=>c.properties.editing)||mn())}),Si.subscribe(s=>{if(s){let c=i.features.find(f=>f.id==s);c.geometry.type=="Point"?l.flyTo({center:c.geometry.coordinates}):l.fitBounds(Br(c),{padding:200,animate:!0,duration:500})}})}),[]}class su extends ze{constructor(e){super(),Re(this,e,ru,null,Ne,{})}}function au(t){let e,o,i,a,l,s,c,f;return{c(){e=D("div"),o=D("button"),o.textContent="Home",i=ee(),a=D("button"),a.textContent="About",l=ee(),s=D("button"),s.textContent="Instructions",H(o,"type","button"),H(o,"onclick","window.open('index.html');"),H(a,"type","button"),H(s,"type","button"),H(e,"slot","nav")},m(d,h){A(d,e,h),N(e,o),N(e,i),N(e,a),N(e,l),N(e,s),c||(f=[Q(a,"click",t[4]),Q(s,"click",t[5])],c=!0)},p:Me,d(d){d&&O(e),c=!1,qe(f)}}}function lu(t){let e,o,i,a,l,s,c,f,d;return a=new Ql({props:{authorityName:t[2]}}),f=new Yl({}),{c(){e=D("div"),o=D("h1"),o.textContent=`${t[2]}`,i=ee(),ge(a.$$.fragment),l=ee(),s=D("br"),c=ee(),ge(f.$$.fragment),H(e,"slot","sidebar")},m(h,w){A(h,e,w),N(e,o),N(e,i),he(a,e,null),N(e,l),N(e,s),N(e,c),he(f,e,null),d=!0},p:Me,i(h){d||(U(a.$$.fragment,h),U(f.$$.fragment,h),d=!0)},o(h){Y(a.$$.fragment,h),Y(f.$$.fragment,h),d=!1},d(h){h&&O(e),me(a),me(f)}}}function uu(t){let e,o,i,a,l,s,c,f;return e=new kl({props:{authorityName:t[2]}}),i=new Dl({props:{url:t[3]}}),l=new nu({}),c=new su({}),{c(){ge(e.$$.fragment),o=ee(),ge(i.$$.fragment),a=ee(),ge(l.$$.fragment),s=ee(),ge(c.$$.fragment)},m(d,h){he(e,d,h),A(d,o,h),he(i,d,h),A(d,a,h),he(l,d,h),A(d,s,h),he(c,d,h),f=!0},p:Me,i(d){f||(U(e.$$.fragment,d),U(i.$$.fragment,d),U(l.$$.fragment,d),U(c.$$.fragment,d),f=!0)},o(d){Y(e.$$.fragment,d),Y(i.$$.fragment,d),Y(l.$$.fragment,d),Y(c.$$.fragment,d),f=!1},d(d){me(e,d),d&&O(o),me(i,d),d&&O(a),me(l,d),d&&O(s),me(c,d)}}}function cu(t){let e,o,i;return o=new dl({props:{$$slots:{default:[uu]},$$scope:{ctx:t}}}),{c(){e=D("div"),ge(o.$$.fragment),H(e,"slot","main")},m(a,l){A(a,e,l),he(o,e,null),i=!0},p(a,l){const s={};l&512&&(s.$$scope={dirty:l,ctx:a}),o.$set(s)},i(a){i||(U(o.$$.fragment,a),i=!0)},o(a){Y(o.$$.fragment,a),i=!1},d(a){a&&O(e),me(o)}}}function fu(t){let e,o,i,a,l,s,c,f;e=new bl({props:{$$slots:{main:[cu],sidebar:[lu],nav:[au]},$$scope:{ctx:t}}});function d(m){t[6](m)}let h={};t[0]!==void 0&&(h.open=t[0]),i=new rl({props:h}),We.push(()=>Gt(i,"open",d,t[0]));function w(m){t[7](m)}let E={};return t[1]!==void 0&&(E.open=t[1]),s=new ul({props:E}),We.push(()=>Gt(s,"open",w,t[1])),{c(){ge(e.$$.fragment),o=ee(),ge(i.$$.fragment),l=ee(),ge(s.$$.fragment)},m(m,p){he(e,m,p),A(m,o,p),he(i,m,p),A(m,l,p),he(s,m,p),f=!0},p(m,[p]){const S={};p&512&&(S.$$scope={dirty:p,ctx:m}),e.$set(S);const W={};!a&&p&1&&(a=!0,W.open=m[0],Jt(()=>a=!1)),i.$set(W);const te={};!c&&p&2&&(c=!0,te.open=m[1],Jt(()=>c=!1)),s.$set(te)},i(m){f||(U(e.$$.fragment,m),U(i.$$.fragment,m),U(s.$$.fragment,m),f=!0)},o(m){Y(e.$$.fragment,m),Y(i.$$.fragment,m),Y(s.$$.fragment,m),f=!1},d(m){me(e,m),m&&O(o),me(i,m),m&&O(l),me(s,m)}}}function du(t,e,o){let i=!1,a=!1,s=new URLSearchParams(window.location.search).get("authority"),c=`https://play.abstreet.org/route-snappers/${s}.bin`;function f(){o(0,i=!i),o(1,a=!1)}function d(){o(1,a=!a),o(0,i=!1)}function h(E){i=E,o(0,i)}function w(E){a=E,o(1,a)}return[i,a,s,c,f,d,h,w]}class pu extends ze{constructor(e){super(),Re(this,e,du,fu,Ne,{})}}new pu({target:document.getElementById("app")});
