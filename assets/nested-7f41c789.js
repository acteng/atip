var eo=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var ct=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var me=(n,e,t)=>(eo(n,e,"access private method"),t);import{S as ie,i as re,s as oe,x as Q,y as Pe,f as I,z as ut,g as P,h as S,B as Te,C as ne,p as L,D as ce,E as we,t as H,F as de,G as et,H as J,e as T,I as be,J as k,l as Y,r as Ae,K as to,L as ht,c as N,n as R,M as Se,o as z,N as Ee,O as Pr,P as Lr,d as W,m as j,q as V,Q as Jn,R as mt,T as Re,U as Oe,V as Ne,W as Ie,X as no,Y as an,Z as qt,_ as un,$ as ge,b as he,a0 as xr,a1 as ui,a2 as io,j as kt,a3 as ro,a as ze,k as De,a4 as Xt,a5 as oo,a6 as lo,a7 as bn,a8 as Un,a9 as fi,w as Wn,aa as ci,ab as so,ac as ao,ad as di,ae as uo,af as fo,ag as jn,A as co,u as ho}from"./authorities-aed2cc96.js";function hi(n){let e,t;return{c(){e=Pe("title"),t=H(n[1])},m(i,r){P(i,e,r),S(e,t)},p(i,r){r&2&&de(t,i[1])},d(i){i&&L(e)}}}function mo(n){let e,t,i=n[1]&&hi(n),r=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],o={};for(let l=0;l<r.length;l+=1)o=Q(o,r[l]);return{c(){e=Pe("svg"),i&&i.c(),t=Pe("path"),I(t,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),ut(e,o)},m(l,s){P(l,e,s),i&&i.m(e,null),S(e,t)},p(l,[s]){l[1]?i?i.p(l,s):(i=hi(l),i.c(),i.m(e,t)):i&&(i.d(1),i=null),ut(e,o=Te(r,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:l[0]},s&1&&{height:l[0]},s&4&&l[2],s&8&&l[3]]))},i:ne,o:ne,d(l){l&&L(e),i&&i.d()}}}function po(n,e,t){let i,r;const o=["size","title"];let l=ce(e,o),{size:s=16}=e,{title:a=void 0}=e;return n.$$set=u=>{t(5,e=Q(Q({},e),we(u))),t(3,l=ce(e,o)),"size"in u&&t(0,s=u.size),"title"in u&&t(1,a=u.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||a),t(2,r={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[s,a,r,l,i]}class go extends ie{constructor(e){super(),re(this,e,po,mo,oe,{size:0,title:1})}}const Vn=go;function mi(n,e,t){const i=n.slice();return i[2]=e[t].width,i}function bo(n){let e,t,i,r,o=[n[4],{style:t="width: "+n[2]+";"+n[4].style}],l={};for(let s=0;s<o.length;s+=1)l=Q(l,o[s]);return{c(){e=T("p"),be(e,l),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",n[0])},m(s,a){P(s,e,a),i||(r=[Y(e,"click",n[12]),Y(e,"mouseover",n[13]),Y(e,"mouseenter",n[14]),Y(e,"mouseleave",n[15])],i=!0)},p(s,a){be(e,l=Te(o,[a&16&&s[4],a&20&&t!==(t="width: "+s[2]+";"+s[4].style)&&{style:t}])),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",s[0])},d(s){s&&L(e),i=!1,Ae(r)}}}function vo(n){let e,t,i,r=n[3],o=[];for(let a=0;a<r.length;a+=1)o[a]=pi(mi(n,r,a));let l=[n[4]],s={};for(let a=0;a<l.length;a+=1)s=Q(s,l[a]);return{c(){e=T("div");for(let a=0;a<o.length;a+=1)o[a].c();be(e,s)},m(a,u){P(a,e,u);for(let c=0;c<o.length;c+=1)o[c].m(e,null);t||(i=[Y(e,"click",n[8]),Y(e,"mouseover",n[9]),Y(e,"mouseenter",n[10]),Y(e,"mouseleave",n[11])],t=!0)},p(a,u){if(u&9){r=a[3];let c;for(c=0;c<r.length;c+=1){const g=mi(a,r,c);o[c]?o[c].p(g,u):(o[c]=pi(g),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}be(e,s=Te(l,[u&16&&a[4]]))},d(a){a&&L(e),to(o,a),t=!1,Ae(i)}}}function pi(n){let e;return{c(){e=T("p"),ht(e,"width",n[2]),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",n[0])},m(t,i){P(t,e,i)},p(t,i){i&8&&ht(e,"width",t[2]),i&1&&k(e,"bx--skeleton__heading",t[0])},d(t){t&&L(e)}}}function _o(n){let e;function t(o,l){return o[1]?vo:bo}let i=t(n),r=i(n);return{c(){r.c(),e=et()},m(o,l){r.m(o,l),P(o,e,l)},p(o,[l]){i===(i=t(o))&&r?r.p(o,l):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},i:ne,o:ne,d(o){r.d(o),o&&L(e)}}}function yo(n,e,t){let i,r,o;const l=["lines","heading","paragraph","width"];let s=ce(e,l),{lines:a=3}=e,{heading:u=!1}=e,{paragraph:c=!1}=e,{width:g="100%"}=e;const h=[.973,.153,.567];function f(_){J.call(this,n,_)}function d(_){J.call(this,n,_)}function b(_){J.call(this,n,_)}function w(_){J.call(this,n,_)}function A(_){J.call(this,n,_)}function m(_){J.call(this,n,_)}function p(_){J.call(this,n,_)}function v(_){J.call(this,n,_)}return n.$$set=_=>{e=Q(Q({},e),we(_)),t(4,s=ce(e,l)),"lines"in _&&t(5,a=_.lines),"heading"in _&&t(0,u=_.heading),"paragraph"in _&&t(1,c=_.paragraph),"width"in _&&t(2,g=_.width)},n.$$.update=()=>{if(n.$$.dirty&4&&t(7,r=parseInt(g,10)),n.$$.dirty&4&&t(6,o=g.includes("px")),n.$$.dirty&238&&c)for(let _=0;_<a;_++){const y=o?r-75:0,C=o?r:75,M=Math.floor(h[_%3]*(C-y+1))+y+"px";t(3,i=[...i,{width:o?M:`calc(${g} - ${M})`}])}},t(3,i=[]),[u,c,g,i,s,a,o,r,f,d,b,w,A,m,p,v]}class wo extends ie{constructor(e){super(),re(this,e,yo,_o,oe,{lines:5,heading:0,paragraph:1,width:2})}}const Tt=wo;function gi(n,e,t){const i=n.slice();return i[9]=e[t],i}function bi(n){let e,t,i,r,o,l,s,a,u,c,g,h,f;return i=new Vn({props:{class:"bx--accordion__arrow"}}),o=new Tt({props:{class:"bx--accordion__title"}}),a=new Tt({props:{width:"90%"}}),c=new Tt({props:{width:"80%"}}),h=new Tt({props:{width:"95%"}}),{c(){e=T("li"),t=T("span"),W(i.$$.fragment),r=N(),W(o.$$.fragment),l=N(),s=T("div"),W(a.$$.fragment),u=N(),W(c.$$.fragment),g=N(),W(h.$$.fragment),k(t,"bx--accordion__heading",!0),k(s,"bx--accordion__content",!0),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",!0)},m(d,b){P(d,e,b),S(e,t),j(i,t,null),S(t,r),j(o,t,null),S(e,l),S(e,s),j(a,s,null),S(s,u),j(c,s,null),S(s,g),j(h,s,null),f=!0},i(d){f||(R(i.$$.fragment,d),R(o.$$.fragment,d),R(a.$$.fragment,d),R(c.$$.fragment,d),R(h.$$.fragment,d),f=!0)},o(d){z(i.$$.fragment,d),z(o.$$.fragment,d),z(a.$$.fragment,d),z(c.$$.fragment,d),z(h.$$.fragment,d),f=!1},d(d){d&&L(e),V(i),V(o),V(a),V(c),V(h)}}}function vi(n,e){let t,i,r,o,l,s,a;return r=new Vn({props:{class:"bx--accordion__arrow"}}),l=new Tt({props:{class:"bx--accordion__title"}}),{key:n,first:null,c(){t=T("li"),i=T("span"),W(r.$$.fragment),o=N(),W(l.$$.fragment),s=N(),k(i,"bx--accordion__heading",!0),k(t,"bx--accordion__item",!0),this.first=t},m(u,c){P(u,t,c),S(t,i),j(r,i,null),S(i,o),j(l,i,null),S(t,s),a=!0},p(u,c){},i(u){a||(R(r.$$.fragment,u),R(l.$$.fragment,u),a=!0)},o(u){z(r.$$.fragment,u),z(l.$$.fragment,u),a=!1},d(u){u&&L(t),V(r),V(l)}}}function ko(n){let e,t,i=[],r=new Map,o,l,s,a=n[3]&&bi(),u=Array.from({length:n[3]?n[0]-1:n[0]},_i);const c=f=>f[9];for(let f=0;f<u.length;f+=1){let d=gi(n,u,f),b=c(d);r.set(b,i[f]=vi(b))}let g=[n[4]],h={};for(let f=0;f<g.length;f+=1)h=Q(h,g[f]);return{c(){e=T("ul"),a&&a.c(),t=N();for(let f=0;f<i.length;f+=1)i[f].c();be(e,h),k(e,"bx--skeleton",!0),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",n[1]==="start"),k(e,"bx--accordion--end",n[1]==="end"),k(e,"bx--accordion--sm",n[2]==="sm"),k(e,"bx--accordion--xl",n[2]==="xl")},m(f,d){P(f,e,d),a&&a.m(e,null),S(e,t);for(let b=0;b<i.length;b+=1)i[b].m(e,null);o=!0,l||(s=[Y(e,"click",n[5]),Y(e,"mouseover",n[6]),Y(e,"mouseenter",n[7]),Y(e,"mouseleave",n[8])],l=!0)},p(f,[d]){f[3]?a?d&8&&R(a,1):(a=bi(),a.c(),R(a,1),a.m(e,t)):a&&(Se(),z(a,1,1,()=>{a=null}),Ee()),d&9&&(u=Array.from({length:f[3]?f[0]-1:f[0]},_i),Se(),i=Pr(i,d,c,1,f,u,r,e,Lr,vi,null,gi),Ee()),be(e,h=Te(g,[d&16&&f[4]])),k(e,"bx--skeleton",!0),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",f[1]==="start"),k(e,"bx--accordion--end",f[1]==="end"),k(e,"bx--accordion--sm",f[2]==="sm"),k(e,"bx--accordion--xl",f[2]==="xl")},i(f){if(!o){R(a);for(let d=0;d<u.length;d+=1)R(i[d]);o=!0}},o(f){z(a);for(let d=0;d<i.length;d+=1)z(i[d]);o=!1},d(f){f&&L(e),a&&a.d();for(let d=0;d<i.length;d+=1)i[d].d();l=!1,Ae(s)}}}const _i=(n,e)=>e;function So(n,e,t){const i=["count","align","size","open"];let r=ce(e,i),{count:o=4}=e,{align:l="end"}=e,{size:s=void 0}=e,{open:a=!0}=e;function u(f){J.call(this,n,f)}function c(f){J.call(this,n,f)}function g(f){J.call(this,n,f)}function h(f){J.call(this,n,f)}return n.$$set=f=>{e=Q(Q({},e),we(f)),t(4,r=ce(e,i)),"count"in f&&t(0,o=f.count),"align"in f&&t(1,l=f.align),"size"in f&&t(2,s=f.size),"open"in f&&t(3,a=f.open)},[o,l,s,a,r,u,c,g,h]}class Eo extends ie{constructor(e){super(),re(this,e,So,ko,oe,{count:0,align:1,size:2,open:3})}}const Mo=Eo;function Po(n){let e,t,i,r;const o=n[6].default,l=Re(o,n,n[5],null);let s=[n[3]],a={};for(let u=0;u<s.length;u+=1)a=Q(a,s[u]);return{c(){e=T("ul"),l&&l.c(),be(e,a),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",n[0]==="start"),k(e,"bx--accordion--end",n[0]==="end"),k(e,"bx--accordion--sm",n[1]==="sm"),k(e,"bx--accordion--xl",n[1]==="xl")},m(u,c){P(u,e,c),l&&l.m(e,null),t=!0,i||(r=[Y(e,"click",n[7]),Y(e,"mouseover",n[8]),Y(e,"mouseenter",n[9]),Y(e,"mouseleave",n[10])],i=!0)},p(u,c){l&&l.p&&(!t||c&32)&&Oe(l,o,u,u[5],t?Ie(o,u[5],c,null):Ne(u[5]),null),be(e,a=Te(s,[c&8&&u[3]])),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",u[0]==="start"),k(e,"bx--accordion--end",u[0]==="end"),k(e,"bx--accordion--sm",u[1]==="sm"),k(e,"bx--accordion--xl",u[1]==="xl")},i(u){t||(R(l,u),t=!0)},o(u){z(l,u),t=!1},d(u){u&&L(e),l&&l.d(u),i=!1,Ae(r)}}}function Lo(n){let e,t;const i=[n[3],{align:n[0]},{size:n[1]}];let r={};for(let o=0;o<i.length;o+=1)r=Q(r,i[o]);return e=new Mo({props:r}),e.$on("click",n[11]),e.$on("mouseover",n[12]),e.$on("mouseenter",n[13]),e.$on("mouseleave",n[14]),{c(){W(e.$$.fragment)},m(o,l){j(e,o,l),t=!0},p(o,l){const s=l&11?Te(i,[l&8&&no(o[3]),l&1&&{align:o[0]},l&2&&{size:o[1]}]):{};e.$set(s)},i(o){t||(R(e.$$.fragment,o),t=!0)},o(o){z(e.$$.fragment,o),t=!1},d(o){V(e,o)}}}function xo(n){let e,t,i,r;const o=[Lo,Po],l=[];function s(a,u){return a[2]?0:1}return e=s(n),t=l[e]=o[e](n),{c(){t.c(),i=et()},m(a,u){l[e].m(a,u),P(a,i,u),r=!0},p(a,[u]){let c=e;e=s(a),e===c?l[e].p(a,u):(Se(),z(l[c],1,1,()=>{l[c]=null}),Ee(),t=l[e],t?t.p(a,u):(t=l[e]=o[e](a),t.c()),R(t,1),t.m(i.parentNode,i))},i(a){r||(R(t),r=!0)},o(a){z(t),r=!1},d(a){l[e].d(a),a&&L(i)}}}function To(n,e,t){const i=["align","size","disabled","skeleton"];let r=ce(e,i),{$$slots:o={},$$scope:l}=e,{align:s="end"}=e,{size:a=void 0}=e,{disabled:u=!1}=e,{skeleton:c=!1}=e;const g=mt(u);Jn("Accordion",{disableItems:g});function h(v){J.call(this,n,v)}function f(v){J.call(this,n,v)}function d(v){J.call(this,n,v)}function b(v){J.call(this,n,v)}function w(v){J.call(this,n,v)}function A(v){J.call(this,n,v)}function m(v){J.call(this,n,v)}function p(v){J.call(this,n,v)}return n.$$set=v=>{e=Q(Q({},e),we(v)),t(3,r=ce(e,i)),"align"in v&&t(0,s=v.align),"size"in v&&t(1,a=v.size),"disabled"in v&&t(4,u=v.disabled),"skeleton"in v&&t(2,c=v.skeleton),"$$scope"in v&&t(5,l=v.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&g.set(u)},[s,a,c,r,u,l,o,h,f,d,b,w,A,m,p]}class Ao extends ie{constructor(e){super(),re(this,e,To,xo,oe,{align:0,size:1,disabled:4,skeleton:2})}}const Co=Ao,Ro=n=>({}),yi=n=>({});function Oo(n){let e;return{c(){e=H(n[2])},m(t,i){P(t,e,i)},p(t,i){i&4&&de(e,t[2])},d(t){t&&L(e)}}}function No(n){let e,t,i,r,o,l,s,a,u,c;i=new Vn({props:{class:"bx--accordion__arrow","aria-label":n[3]}});const g=n[7].title,h=Re(g,n,n[6],yi),f=h||Oo(n),d=n[7].default,b=Re(d,n,n[6],null);let w=[n[5]],A={};for(let m=0;m<w.length;m+=1)A=Q(A,w[m]);return{c(){e=T("li"),t=T("button"),W(i.$$.fragment),r=N(),o=T("div"),f&&f.c(),l=N(),s=T("div"),b&&b.c(),k(o,"bx--accordion__title",!0),I(t,"type","button"),I(t,"title",n[3]),I(t,"aria-expanded",n[0]),t.disabled=n[1],k(t,"bx--accordion__heading",!0),k(s,"bx--accordion__content",!0),be(e,A),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",n[0]),k(e,"bx--accordion__item--disabled",n[1]),k(e,"bx--accordion__item--expanding",n[4]==="expanding"),k(e,"bx--accordion__item--collapsing",n[4]==="collapsing")},m(m,p){P(m,e,p),S(e,t),j(i,t,null),S(t,r),S(t,o),f&&f.m(o,null),S(e,l),S(e,s),b&&b.m(s,null),a=!0,u||(c=[Y(t,"click",n[9]),Y(t,"click",n[14]),Y(t,"mouseover",n[10]),Y(t,"mouseenter",n[11]),Y(t,"mouseleave",n[12]),Y(t,"keydown",n[13]),Y(t,"keydown",n[15]),Y(e,"animationend",n[8]),Y(e,"animationend",n[16])],u=!0)},p(m,[p]){const v={};p&8&&(v["aria-label"]=m[3]),i.$set(v),h?h.p&&(!a||p&64)&&Oe(h,g,m,m[6],a?Ie(g,m[6],p,Ro):Ne(m[6]),yi):f&&f.p&&(!a||p&4)&&f.p(m,a?p:-1),(!a||p&8)&&I(t,"title",m[3]),(!a||p&1)&&I(t,"aria-expanded",m[0]),(!a||p&2)&&(t.disabled=m[1]),b&&b.p&&(!a||p&64)&&Oe(b,d,m,m[6],a?Ie(d,m[6],p,null):Ne(m[6]),null),be(e,A=Te(w,[p&32&&m[5]])),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",m[0]),k(e,"bx--accordion__item--disabled",m[1]),k(e,"bx--accordion__item--expanding",m[4]==="expanding"),k(e,"bx--accordion__item--collapsing",m[4]==="collapsing")},i(m){a||(R(i.$$.fragment,m),R(f,m),R(b,m),a=!0)},o(m){z(i.$$.fragment,m),z(f,m),z(b,m),a=!1},d(m){m&&L(e),V(i),f&&f.d(m),b&&b.d(m),u=!1,Ae(c)}}}function Io(n,e,t){const i=["title","open","disabled","iconDescription"];let r=ce(e,i),{$$slots:o={},$$scope:l}=e,{title:s="title"}=e,{open:a=!1}=e,{disabled:u=!1}=e,{iconDescription:c="Expand/Collapse"}=e,g=u;const f=an("Accordion").disableItems.subscribe(M=>{!M&&g||t(1,u=M)});let d;qt(()=>()=>{f()});function b(M){J.call(this,n,M)}function w(M){J.call(this,n,M)}function A(M){J.call(this,n,M)}function m(M){J.call(this,n,M)}function p(M){J.call(this,n,M)}function v(M){J.call(this,n,M)}const _=()=>{t(0,a=!a),t(4,d=a?"expanding":"collapsing")},y=({key:M})=>{a&&M==="Escape"&&t(0,a=!1)},C=()=>{t(4,d=void 0)};return n.$$set=M=>{e=Q(Q({},e),we(M)),t(5,r=ce(e,i)),"title"in M&&t(2,s=M.title),"open"in M&&t(0,a=M.open),"disabled"in M&&t(1,u=M.disabled),"iconDescription"in M&&t(3,c=M.iconDescription),"$$scope"in M&&t(6,l=M.$$scope)},[a,u,s,c,d,r,l,o,b,w,A,m,p,v,_,y,C]}class Fo extends ie{constructor(e){super(),re(this,e,Io,No,oe,{title:2,open:0,disabled:1,iconDescription:3})}}const Bo=Fo;function wi(n){let e,t;return{c(){e=Pe("title"),t=H(n[1])},m(i,r){P(i,e,r),S(e,t)},p(i,r){r&2&&de(t,i[1])},d(i){i&&L(e)}}}function zo(n){let e,t,i,r=n[1]&&wi(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let s=0;s<o.length;s+=1)l=Q(l,o[s]);return{c(){e=Pe("svg"),r&&r.c(),t=Pe("path"),i=Pe("path"),I(t,"d","M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14C30,8.3,23.7,2,16,2z M14.9,8h2.2v11h-2.2V8z M16,25	c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22c0.8,0,1.5,0.7,1.5,1.5S16.8,25,16,25z"),I(i,"fill","none"),I(i,"d","M17.5,23.5c0,0.8-0.7,1.5-1.5,1.5c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22	C16.8,22,17.5,22.7,17.5,23.5z M17.1,8h-2.2v11h2.2V8z"),I(i,"data-icon-path","inner-path"),I(i,"opacity","0"),ut(e,l)},m(s,a){P(s,e,a),r&&r.m(e,null),S(e,t),S(e,i)},p(s,[a]){s[1]?r?r.p(s,a):(r=wi(s),r.c(),r.m(e,t)):r&&(r.d(1),r=null),ut(e,l=Te(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},a&1&&{width:s[0]},a&1&&{height:s[0]},a&4&&s[2],a&8&&s[3]]))},i:ne,o:ne,d(s){s&&L(e),r&&r.d()}}}function Do(n,e,t){let i,r;const o=["size","title"];let l=ce(e,o),{size:s=16}=e,{title:a=void 0}=e;return n.$$set=u=>{t(5,e=Q(Q({},e),we(u))),t(3,l=ce(e,o)),"size"in u&&t(0,s=u.size),"title"in u&&t(1,a=u.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||a),t(2,r={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[s,a,r,l,i]}class qo extends ie{constructor(e){super(),re(this,e,Do,zo,oe,{size:0,title:1})}}const Tr=qo;function ki(n){let e,t;return{c(){e=Pe("title"),t=H(n[1])},m(i,r){P(i,e,r),S(e,t)},p(i,r){r&2&&de(t,i[1])},d(i){i&&L(e)}}}function Go(n){let e,t,i,r,o=n[1]&&ki(n),l=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],s={};for(let a=0;a<l.length;a+=1)s=Q(s,l[a]);return{c(){e=Pe("svg"),o&&o.c(),t=Pe("path"),i=Pe("path"),r=Pe("path"),I(t,"fill","none"),I(t,"d","M16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Zm-1.125-5h2.25V12h-2.25Z"),I(t,"data-icon-path","inner-path"),I(i,"d","M16.002,6.1714h-.004L4.6487,27.9966,4.6506,28H27.3494l.0019-.0034ZM14.875,12h2.25v9h-2.25ZM16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Z"),I(r,"d","M29,30H3a1,1,0,0,1-.8872-1.4614l13-25a1,1,0,0,1,1.7744,0l13,25A1,1,0,0,1,29,30ZM4.6507,28H27.3493l.002-.0033L16.002,6.1714h-.004L4.6487,27.9967Z"),ut(e,s)},m(a,u){P(a,e,u),o&&o.m(e,null),S(e,t),S(e,i),S(e,r)},p(a,[u]){a[1]?o?o.p(a,u):(o=ki(a),o.c(),o.m(e,t)):o&&(o.d(1),o=null),ut(e,s=Te(l,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:a[0]},u&1&&{height:a[0]},u&4&&a[2],u&8&&a[3]]))},i:ne,o:ne,d(a){a&&L(e),o&&o.d()}}}function Yo(n,e,t){let i,r;const o=["size","title"];let l=ce(e,o),{size:s=16}=e,{title:a=void 0}=e;return n.$$set=u=>{t(5,e=Q(Q({},e),we(u))),t(3,l=ce(e,o)),"size"in u&&t(0,s=u.size),"title"in u&&t(1,a=u.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||a),t(2,r={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[s,a,r,l,i]}class Xo extends ie{constructor(e){super(),re(this,e,Yo,Go,oe,{size:0,title:1})}}const Jo=Xo,Uo=n=>({}),Si=n=>({});function Ei(n){let e,t;const i=n[16].labelText,r=Re(i,n,n[15],Si),o=r||Wo(n);return{c(){e=T("span"),o&&o.c(),k(e,"bx--visually-hidden",n[7])},m(l,s){P(l,e,s),o&&o.m(e,null),t=!0},p(l,s){r?r.p&&(!t||s&32768)&&Oe(r,i,l,l[15],t?Ie(i,l[15],s,Uo):Ne(l[15]),Si):o&&o.p&&(!t||s&64)&&o.p(l,t?s:-1),(!t||s&128)&&k(e,"bx--visually-hidden",l[7])},i(l){t||(R(o,l),t=!0)},o(l){z(o,l),t=!1},d(l){l&&L(e),o&&o.d(l)}}}function Wo(n){let e;return{c(){e=H(n[6])},m(t,i){P(t,e,i)},p(t,i){i&64&&de(e,t[6])},d(t){t&&L(e)}}}function jo(n){let e,t,i,r,o,l,s,a,u,c=(n[6]||n[13].labelText)&&Ei(n),g=[n[12]],h={};for(let f=0;f<g.length;f+=1)h=Q(h,g[f]);return{c(){e=T("div"),t=T("input"),i=N(),r=T("label"),o=T("span"),l=N(),c&&c.c(),I(t,"type","radio"),I(t,"id",n[8]),I(t,"name",n[9]),t.checked=n[0],t.disabled=n[3],t.required=n[4],t.value=n[2],k(t,"bx--radio-button",!0),k(o,"bx--radio-button__appearance",!0),I(r,"for",n[8]),k(r,"bx--radio-button__label",!0),be(e,h),k(e,"bx--radio-button-wrapper",!0),k(e,"bx--radio-button-wrapper--label-left",n[5]==="left")},m(f,d){P(f,e,d),S(e,t),n[18](t),S(e,i),S(e,r),S(r,o),S(r,l),c&&c.m(r,null),s=!0,a||(u=[Y(t,"change",n[17]),Y(t,"change",n[19])],a=!0)},p(f,[d]){(!s||d&256)&&I(t,"id",f[8]),(!s||d&512)&&I(t,"name",f[9]),(!s||d&1)&&(t.checked=f[0]),(!s||d&8)&&(t.disabled=f[3]),(!s||d&16)&&(t.required=f[4]),(!s||d&4)&&(t.value=f[2]),f[6]||f[13].labelText?c?(c.p(f,d),d&8256&&R(c,1)):(c=Ei(f),c.c(),R(c,1),c.m(r,null)):c&&(Se(),z(c,1,1,()=>{c=null}),Ee()),(!s||d&256)&&I(r,"for",f[8]),be(e,h=Te(g,[d&4096&&f[12]])),k(e,"bx--radio-button-wrapper",!0),k(e,"bx--radio-button-wrapper--label-left",f[5]==="left")},i(f){s||(R(c),s=!0)},o(f){z(c),s=!1},d(f){f&&L(e),n[18](null),c&&c.d(),a=!1,Ae(u)}}}function Vo(n,e,t){const i=["value","checked","disabled","required","labelPosition","labelText","hideLabel","id","name","ref"];let r=ce(e,i),o,{$$slots:l={},$$scope:s}=e;const a=un(l);let{value:u=""}=e,{checked:c=!1}=e,{disabled:g=!1}=e,{required:h=!1}=e,{labelPosition:f="right"}=e,{labelText:d=""}=e,{hideLabel:b=!1}=e,{id:w="ccs-"+Math.random().toString(36)}=e,{name:A=""}=e,{ref:m=null}=e;const p=an("RadioButtonGroup"),v=p?p.selectedValue:mt(c?u:void 0);ge(n,v,M=>t(14,o=M)),p&&p.add({id:w,checked:c,disabled:g,value:u});function _(M){J.call(this,n,M)}function y(M){he[M?"unshift":"push"](()=>{m=M,t(1,m)})}const C=()=>{p&&p.update(u)};return n.$$set=M=>{e=Q(Q({},e),we(M)),t(12,r=ce(e,i)),"value"in M&&t(2,u=M.value),"checked"in M&&t(0,c=M.checked),"disabled"in M&&t(3,g=M.disabled),"required"in M&&t(4,h=M.required),"labelPosition"in M&&t(5,f=M.labelPosition),"labelText"in M&&t(6,d=M.labelText),"hideLabel"in M&&t(7,b=M.hideLabel),"id"in M&&t(8,w=M.id),"name"in M&&t(9,A=M.name),"ref"in M&&t(1,m=M.ref),"$$scope"in M&&t(15,s=M.$$scope)},n.$$.update=()=>{n.$$.dirty&16388&&t(0,c=o===u)},[c,m,u,g,h,f,d,b,w,A,p,v,r,a,o,s,l,_,y,C]}class Ho extends ie{constructor(e){super(),re(this,e,Vo,jo,oe,{value:2,checked:0,disabled:3,required:4,labelPosition:5,labelText:6,hideLabel:7,id:8,name:9,ref:1})}}const Jt=Ho;function Mi(n){let e,t;return{c(){e=Pe("title"),t=H(n[1])},m(i,r){P(i,e,r),S(e,t)},p(i,r){r&2&&de(t,i[1])},d(i){i&&L(e)}}}function Zo(n){let e,t,i=n[1]&&Mi(n),r=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],o={};for(let l=0;l<r.length;l+=1)o=Q(o,r[l]);return{c(){e=Pe("svg"),i&&i.c(),t=Pe("path"),I(t,"d","M30 28.6L3.4 2 2 3.4l10.1 10.1L4 21.6V28h6.4l8.1-8.1L28.6 30 30 28.6zM9.6 26H6v-3.6l7.5-7.5 3.6 3.6L9.6 26zM29.4 6.2L29.4 6.2l-3.6-3.6c-.8-.8-2-.8-2.8 0l0 0 0 0-8 8 1.4 1.4L20 8.4l3.6 3.6L20 15.6l1.4 1.4 8-8C30.2 8.2 30.2 7 29.4 6.2L29.4 6.2zM25 10.6L21.4 7l3-3L28 7.6 25 10.6z"),ut(e,o)},m(l,s){P(l,e,s),i&&i.m(e,null),S(e,t)},p(l,[s]){l[1]?i?i.p(l,s):(i=Mi(l),i.c(),i.m(e,t)):i&&(i.d(1),i=null),ut(e,o=Te(r,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},s&1&&{width:l[0]},s&1&&{height:l[0]},s&4&&l[2],s&8&&l[3]]))},i:ne,o:ne,d(l){l&&L(e),i&&i.d()}}}function Qo(n,e,t){let i,r;const o=["size","title"];let l=ce(e,o),{size:s=16}=e,{title:a=void 0}=e;return n.$$set=u=>{t(5,e=Q(Q({},e),we(u))),t(3,l=ce(e,o)),"size"in u&&t(0,s=u.size),"title"in u&&t(1,a=u.title)},n.$$.update=()=>{t(4,i=e["aria-label"]||e["aria-labelledby"]||a),t(2,r={"aria-hidden":i?void 0:!0,role:i?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=we(e),[s,a,r,l,i]}class Ko extends ie{constructor(e){super(),re(this,e,Qo,Zo,oe,{size:0,title:1})}}const $o=Ko;function el(n){let e,t,i,r;const o=n[5].default,l=Re(o,n,n[4],null);let s=[n[3]],a={};for(let u=0;u<s.length;u+=1)a=Q(a,s[u]);return{c(){e=T("ol"),l&&l.c(),be(e,a),k(e,"bx--list--ordered",!n[1]),k(e,"bx--list--ordered--native",n[1]),k(e,"bx--list--nested",n[0]),k(e,"bx--list--expressive",n[2])},m(u,c){P(u,e,c),l&&l.m(e,null),t=!0,i||(r=[Y(e,"click",n[6]),Y(e,"mouseover",n[7]),Y(e,"mouseenter",n[8]),Y(e,"mouseleave",n[9])],i=!0)},p(u,[c]){l&&l.p&&(!t||c&16)&&Oe(l,o,u,u[4],t?Ie(o,u[4],c,null):Ne(u[4]),null),be(e,a=Te(s,[c&8&&u[3]])),k(e,"bx--list--ordered",!u[1]),k(e,"bx--list--ordered--native",u[1]),k(e,"bx--list--nested",u[0]),k(e,"bx--list--expressive",u[2])},i(u){t||(R(l,u),t=!0)},o(u){z(l,u),t=!1},d(u){u&&L(e),l&&l.d(u),i=!1,Ae(r)}}}function tl(n,e,t){const i=["nested","native","expressive"];let r=ce(e,i),{$$slots:o={},$$scope:l}=e,{nested:s=!1}=e,{native:a=!1}=e,{expressive:u=!1}=e;function c(d){J.call(this,n,d)}function g(d){J.call(this,n,d)}function h(d){J.call(this,n,d)}function f(d){J.call(this,n,d)}return n.$$set=d=>{e=Q(Q({},e),we(d)),t(3,r=ce(e,i)),"nested"in d&&t(0,s=d.nested),"native"in d&&t(1,a=d.native),"expressive"in d&&t(2,u=d.expressive),"$$scope"in d&&t(4,l=d.$$scope)},[s,a,u,r,l,o,c,g,h,f]}class nl extends ie{constructor(e){super(),re(this,e,tl,el,oe,{nested:0,native:1,expressive:2})}}const il=nl,rl=n=>({}),Pi=n=>({});function Li(n){let e,t;const i=n[11].legendText,r=Re(i,n,n[10],Pi),o=r||ol(n);return{c(){e=T("legend"),o&&o.c(),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[2])},m(l,s){P(l,e,s),o&&o.m(e,null),t=!0},p(l,s){r?r.p&&(!t||s&1024)&&Oe(r,i,l,l[10],t?Ie(i,l[10],s,rl):Ne(l[10]),Pi):o&&o.p&&(!t||s&2)&&o.p(l,t?s:-1),(!t||s&4)&&k(e,"bx--visually-hidden",l[2])},i(l){t||(R(o,l),t=!0)},o(l){z(o,l),t=!1},d(l){l&&L(e),o&&o.d(l)}}}function ol(n){let e;return{c(){e=H(n[1])},m(t,i){P(t,e,i)},p(t,i){i&2&&de(e,t[1])},d(t){t&&L(e)}}}function ll(n){let e,t,i,r,o,l,s=(n[1]||n[8].legendText)&&Li(n);const a=n[11].default,u=Re(a,n,n[10],null);let c=[{id:n[5]},n[7]],g={};for(let h=0;h<c.length;h+=1)g=Q(g,c[h]);return{c(){e=T("div"),t=T("fieldset"),s&&s.c(),i=N(),u&&u.c(),t.disabled=n[0],k(t,"bx--radio-button-group",!0),k(t,"bx--radio-button-group--vertical",n[4]==="vertical"),k(t,"bx--radio-button-group--label-left",n[3]==="left"),k(t,"bx--radio-button-group--label-right",n[3]==="right"),be(e,g),k(e,"bx--form-item",!0)},m(h,f){P(h,e,f),S(e,t),s&&s.m(t,null),S(t,i),u&&u.m(t,null),r=!0,o||(l=[Y(e,"click",n[12]),Y(e,"mouseover",n[13]),Y(e,"mouseenter",n[14]),Y(e,"mouseleave",n[15])],o=!0)},p(h,[f]){h[1]||h[8].legendText?s?(s.p(h,f),f&258&&R(s,1)):(s=Li(h),s.c(),R(s,1),s.m(t,i)):s&&(Se(),z(s,1,1,()=>{s=null}),Ee()),u&&u.p&&(!r||f&1024)&&Oe(u,a,h,h[10],r?Ie(a,h[10],f,null):Ne(h[10]),null),(!r||f&1)&&(t.disabled=h[0]),(!r||f&16)&&k(t,"bx--radio-button-group--vertical",h[4]==="vertical"),(!r||f&8)&&k(t,"bx--radio-button-group--label-left",h[3]==="left"),(!r||f&8)&&k(t,"bx--radio-button-group--label-right",h[3]==="right"),be(e,g=Te(c,[(!r||f&32)&&{id:h[5]},f&128&&h[7]])),k(e,"bx--form-item",!0)},i(h){r||(R(s),R(u,h),r=!0)},o(h){z(s),z(u,h),r=!1},d(h){h&&L(e),s&&s.d(),u&&u.d(h),o=!1,Ae(l)}}}function sl(n,e,t){const i=["selected","disabled","legendText","hideLegend","labelPosition","orientation","id"];let r=ce(e,i),o,{$$slots:l={},$$scope:s}=e;const a=un(l);let{selected:u=void 0}=e,{disabled:c=!1}=e,{legendText:g=""}=e,{hideLegend:h=!1}=e,{labelPosition:f="right"}=e,{orientation:d="horizontal"}=e,{id:b=void 0}=e;const w=xr(),A=mt(u);ge(n,A,y=>t(16,o=y)),Jn("RadioButtonGroup",{selectedValue:A,add:({checked:y,value:C})=>{y&&A.set(C)},update:y=>{t(9,u=y)}}),qt(()=>{ui(A,o=u,o)}),io(()=>{ui(A,o=u,o)}),A.subscribe(y=>{t(9,u=y),w("change",y)});function m(y){J.call(this,n,y)}function p(y){J.call(this,n,y)}function v(y){J.call(this,n,y)}function _(y){J.call(this,n,y)}return n.$$set=y=>{e=Q(Q({},e),we(y)),t(7,r=ce(e,i)),"selected"in y&&t(9,u=y.selected),"disabled"in y&&t(0,c=y.disabled),"legendText"in y&&t(1,g=y.legendText),"hideLegend"in y&&t(2,h=y.hideLegend),"labelPosition"in y&&t(3,f=y.labelPosition),"orientation"in y&&t(4,d=y.orientation),"id"in y&&t(5,b=y.id),"$$scope"in y&&t(10,s=y.$$scope)},[c,g,h,f,d,b,A,r,a,u,s,l,m,p,v,_]}class al extends ie{constructor(e){super(),re(this,e,sl,ll,oe,{selected:9,disabled:0,legendText:1,hideLegend:2,labelPosition:3,orientation:4,id:5})}}const ul=al,fl=n=>({}),xi=n=>({});function Ti(n){let e,t,i,r;const o=n[20].labelText,l=Re(o,n,n[19],xi),s=l||cl(n);let a=n[5]&&Ai(n);return{c(){e=T("div"),t=T("label"),s&&s.c(),i=N(),a&&a.c(),I(t,"for",n[14]),k(t,"bx--label",!0),k(t,"bx--visually-hidden",n[11]),k(t,"bx--label--disabled",n[7]),k(e,"bx--text-area__label-wrapper",!0)},m(u,c){P(u,e,c),S(e,t),s&&s.m(t,null),S(e,i),a&&a.m(e,null),r=!0},p(u,c){l?l.p&&(!r||c[0]&524288)&&Oe(l,o,u,u[19],r?Ie(o,u[19],c,fl):Ne(u[19]),xi):s&&s.p&&(!r||c[0]&1024)&&s.p(u,r?c:[-1,-1]),(!r||c[0]&16384)&&I(t,"for",u[14]),(!r||c[0]&2048)&&k(t,"bx--visually-hidden",u[11]),(!r||c[0]&128)&&k(t,"bx--label--disabled",u[7]),u[5]?a?a.p(u,c):(a=Ai(u),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(u){r||(R(s,u),r=!0)},o(u){z(s,u),r=!1},d(u){u&&L(e),s&&s.d(u),a&&a.d()}}}function cl(n){let e;return{c(){e=H(n[10])},m(t,i){P(t,e,i)},p(t,i){i[0]&1024&&de(e,t[10])},d(t){t&&L(e)}}}function Ai(n){let e,t=n[0].length+"",i,r,o;return{c(){e=T("div"),i=H(t),r=H("/"),o=H(n[5]),k(e,"bx--label",!0),k(e,"bx--label--disabled",n[7])},m(l,s){P(l,e,s),S(e,i),S(e,r),S(e,o)},p(l,s){s[0]&1&&t!==(t=l[0].length+"")&&de(i,t),s[0]&32&&de(o,l[5]),s[0]&128&&k(e,"bx--label--disabled",l[7])},d(l){l&&L(e)}}}function Ci(n){let e,t;return e=new Tr({props:{class:"bx--text-area__invalid-icon"}}),{c(){W(e.$$.fragment)},m(i,r){j(e,i,r),t=!0},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){z(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Ri(n){let e,t;return{c(){e=T("div"),t=H(n[9]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[7])},m(i,r){P(i,e,r),S(e,t)},p(i,r){r[0]&512&&de(t,i[9]),r[0]&128&&k(e,"bx--form__helper-text--disabled",i[7])},d(i){i&&L(e)}}}function Oi(n){let e,t;return{c(){e=T("div"),t=H(n[13]),I(e,"id",n[16]),k(e,"bx--form-requirement",!0)},m(i,r){P(i,e,r),S(e,t)},p(i,r){r[0]&8192&&de(t,i[13]),r[0]&65536&&I(e,"id",i[16])},d(i){i&&L(e)}}}function dl(n){let e,t,i,r,o,l,s,a,u,c,g,h,f,d,b=(n[10]||n[17].labelText)&&!n[11]&&Ti(n),w=n[12]&&Ci(),A=[{"aria-invalid":l=n[12]||void 0},{"aria-describedby":s=n[12]?n[16]:void 0},{disabled:n[7]},{id:n[14]},{name:n[15]},{cols:n[3]},{rows:n[4]},{placeholder:n[2]},{readOnly:n[8]},{maxlength:a=n[5]??void 0},n[18]],m={};for(let _=0;_<A.length;_+=1)m=Q(m,A[_]);let p=!n[12]&&n[9]&&Ri(n),v=n[12]&&Oi(n);return{c(){e=T("div"),b&&b.c(),t=N(),i=T("div"),w&&w.c(),r=N(),o=T("textarea"),c=N(),p&&p.c(),g=N(),v&&v.c(),be(o,m),k(o,"bx--text-area",!0),k(o,"bx--text-area--light",n[6]),k(o,"bx--text-area--invalid",n[12]),I(i,"data-invalid",u=n[12]||void 0),k(i,"bx--text-area__wrapper",!0),k(e,"bx--form-item",!0)},m(_,y){P(_,e,y),b&&b.m(e,null),S(e,t),S(e,i),w&&w.m(i,null),S(i,r),S(i,o),o.autofocus&&o.focus(),n[32](o),kt(o,n[0]),S(e,c),p&&p.m(e,null),S(e,g),v&&v.m(e,null),h=!0,f||(d=[Y(o,"input",n[33]),Y(o,"change",n[25]),Y(o,"input",n[26]),Y(o,"keydown",n[27]),Y(o,"keyup",n[28]),Y(o,"focus",n[29]),Y(o,"blur",n[30]),Y(o,"paste",n[31]),Y(e,"click",n[21]),Y(e,"mouseover",n[22]),Y(e,"mouseenter",n[23]),Y(e,"mouseleave",n[24])],f=!0)},p(_,y){(_[10]||_[17].labelText)&&!_[11]?b?(b.p(_,y),y[0]&134144&&R(b,1)):(b=Ti(_),b.c(),R(b,1),b.m(e,t)):b&&(Se(),z(b,1,1,()=>{b=null}),Ee()),_[12]?w?y[0]&4096&&R(w,1):(w=Ci(),w.c(),R(w,1),w.m(i,r)):w&&(Se(),z(w,1,1,()=>{w=null}),Ee()),be(o,m=Te(A,[(!h||y[0]&4096&&l!==(l=_[12]||void 0))&&{"aria-invalid":l},(!h||y[0]&69632&&s!==(s=_[12]?_[16]:void 0))&&{"aria-describedby":s},(!h||y[0]&128)&&{disabled:_[7]},(!h||y[0]&16384)&&{id:_[14]},(!h||y[0]&32768)&&{name:_[15]},(!h||y[0]&8)&&{cols:_[3]},(!h||y[0]&16)&&{rows:_[4]},(!h||y[0]&4)&&{placeholder:_[2]},(!h||y[0]&256)&&{readOnly:_[8]},(!h||y[0]&32&&a!==(a=_[5]??void 0))&&{maxlength:a},y[0]&262144&&_[18]])),y[0]&1&&kt(o,_[0]),k(o,"bx--text-area",!0),k(o,"bx--text-area--light",_[6]),k(o,"bx--text-area--invalid",_[12]),(!h||y[0]&4096&&u!==(u=_[12]||void 0))&&I(i,"data-invalid",u),!_[12]&&_[9]?p?p.p(_,y):(p=Ri(_),p.c(),p.m(e,g)):p&&(p.d(1),p=null),_[12]?v?v.p(_,y):(v=Oi(_),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},i(_){h||(R(b),R(w),h=!0)},o(_){z(b),z(w),h=!1},d(_){_&&L(e),b&&b.d(),w&&w.d(),n[32](null),p&&p.d(),v&&v.d(),f=!1,Ae(d)}}}function hl(n,e,t){let i;const r=["value","placeholder","cols","rows","maxCount","light","disabled","readonly","helperText","labelText","hideLabel","invalid","invalidText","id","name","ref"];let o=ce(e,r),{$$slots:l={},$$scope:s}=e;const a=un(l);let{value:u=""}=e,{placeholder:c=""}=e,{cols:g=50}=e,{rows:h=4}=e,{maxCount:f=void 0}=e,{light:d=!1}=e,{disabled:b=!1}=e,{readonly:w=!1}=e,{helperText:A=""}=e,{labelText:m=""}=e,{hideLabel:p=!1}=e,{invalid:v=!1}=e,{invalidText:_=""}=e,{id:y="ccs-"+Math.random().toString(36)}=e,{name:C=void 0}=e,{ref:M=null}=e;function B(E){J.call(this,n,E)}function G(E){J.call(this,n,E)}function x(E){J.call(this,n,E)}function D(E){J.call(this,n,E)}function F(E){J.call(this,n,E)}function O(E){J.call(this,n,E)}function q(E){J.call(this,n,E)}function U(E){J.call(this,n,E)}function se(E){J.call(this,n,E)}function te(E){J.call(this,n,E)}function le(E){J.call(this,n,E)}function fe(E){he[E?"unshift":"push"](()=>{M=E,t(1,M)})}function ae(){u=this.value,t(0,u)}return n.$$set=E=>{e=Q(Q({},e),we(E)),t(18,o=ce(e,r)),"value"in E&&t(0,u=E.value),"placeholder"in E&&t(2,c=E.placeholder),"cols"in E&&t(3,g=E.cols),"rows"in E&&t(4,h=E.rows),"maxCount"in E&&t(5,f=E.maxCount),"light"in E&&t(6,d=E.light),"disabled"in E&&t(7,b=E.disabled),"readonly"in E&&t(8,w=E.readonly),"helperText"in E&&t(9,A=E.helperText),"labelText"in E&&t(10,m=E.labelText),"hideLabel"in E&&t(11,p=E.hideLabel),"invalid"in E&&t(12,v=E.invalid),"invalidText"in E&&t(13,_=E.invalidText),"id"in E&&t(14,y=E.id),"name"in E&&t(15,C=E.name),"ref"in E&&t(1,M=E.ref),"$$scope"in E&&t(19,s=E.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&t(16,i=`error-${y}`)},[u,M,c,g,h,f,d,b,w,A,m,p,v,_,y,C,i,a,o,s,l,B,G,x,D,F,O,q,U,se,te,le,fe,ae]}class ml extends ie{constructor(e){super(),re(this,e,hl,dl,oe,{value:0,placeholder:2,cols:3,rows:4,maxCount:5,light:6,disabled:7,readonly:8,helperText:9,labelText:10,hideLabel:11,invalid:12,invalidText:13,id:14,name:15,ref:1},null,[-1,-1])}}const pl=ml,gl=n=>({}),Ni=n=>({}),bl=n=>({}),Ii=n=>({});function Fi(n){let e,t,i,r=n[9]&&Bi(n),o=!n[20]&&n[6]&&zi(n);return{c(){e=T("div"),r&&r.c(),t=N(),o&&o.c(),k(e,"bx--text-input__label-helper-wrapper",!0)},m(l,s){P(l,e,s),r&&r.m(e,null),S(e,t),o&&o.m(e,null),i=!0},p(l,s){l[9]?r?(r.p(l,s),s[0]&512&&R(r,1)):(r=Bi(l),r.c(),R(r,1),r.m(e,t)):r&&(Se(),z(r,1,1,()=>{r=null}),Ee()),!l[20]&&l[6]?o?o.p(l,s):(o=zi(l),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i(l){i||(R(r),i=!0)},o(l){z(r),i=!1},d(l){l&&L(e),r&&r.d(),o&&o.d()}}}function Bi(n){let e,t;const i=n[26].labelText,r=Re(i,n,n[25],Ii),o=r||vl(n);return{c(){e=T("label"),o&&o.c(),I(e,"for",n[7]),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[10]),k(e,"bx--label--disabled",n[5]),k(e,"bx--label--inline",n[16]),k(e,"bx--label--inline--sm",n[2]==="sm"),k(e,"bx--label--inline--xl",n[2]==="xl")},m(l,s){P(l,e,s),o&&o.m(e,null),t=!0},p(l,s){r?r.p&&(!t||s[0]&33554432)&&Oe(r,i,l,l[25],t?Ie(i,l[25],s,bl):Ne(l[25]),Ii):o&&o.p&&(!t||s[0]&512)&&o.p(l,t?s:[-1,-1]),(!t||s[0]&128)&&I(e,"for",l[7]),(!t||s[0]&1024)&&k(e,"bx--visually-hidden",l[10]),(!t||s[0]&32)&&k(e,"bx--label--disabled",l[5]),(!t||s[0]&65536)&&k(e,"bx--label--inline",l[16]),(!t||s[0]&4)&&k(e,"bx--label--inline--sm",l[2]==="sm"),(!t||s[0]&4)&&k(e,"bx--label--inline--xl",l[2]==="xl")},i(l){t||(R(o,l),t=!0)},o(l){z(o,l),t=!1},d(l){l&&L(e),o&&o.d(l)}}}function vl(n){let e;return{c(){e=H(n[9])},m(t,i){P(t,e,i)},p(t,i){i[0]&512&&de(e,t[9])},d(t){t&&L(e)}}}function zi(n){let e,t;return{c(){e=T("div"),t=H(n[6]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[5]),k(e,"bx--form__helper-text--inline",n[16])},m(i,r){P(i,e,r),S(e,t)},p(i,r){r[0]&64&&de(t,i[6]),r[0]&32&&k(e,"bx--form__helper-text--disabled",i[5]),r[0]&65536&&k(e,"bx--form__helper-text--inline",i[16])},d(i){i&&L(e)}}}function Di(n){let e,t;const i=n[26].labelText,r=Re(i,n,n[25],Ni),o=r||_l(n);return{c(){e=T("label"),o&&o.c(),I(e,"for",n[7]),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[10]),k(e,"bx--label--disabled",n[5]),k(e,"bx--label--inline",n[16]),k(e,"bx--label--inline-sm",n[16]&&n[2]==="sm"),k(e,"bx--label--inline-xl",n[16]&&n[2]==="xl")},m(l,s){P(l,e,s),o&&o.m(e,null),t=!0},p(l,s){r?r.p&&(!t||s[0]&33554432)&&Oe(r,i,l,l[25],t?Ie(i,l[25],s,gl):Ne(l[25]),Ni):o&&o.p&&(!t||s[0]&512)&&o.p(l,t?s:[-1,-1]),(!t||s[0]&128)&&I(e,"for",l[7]),(!t||s[0]&1024)&&k(e,"bx--visually-hidden",l[10]),(!t||s[0]&32)&&k(e,"bx--label--disabled",l[5]),(!t||s[0]&65536)&&k(e,"bx--label--inline",l[16]),(!t||s[0]&65540)&&k(e,"bx--label--inline-sm",l[16]&&l[2]==="sm"),(!t||s[0]&65540)&&k(e,"bx--label--inline-xl",l[16]&&l[2]==="xl")},i(l){t||(R(o,l),t=!0)},o(l){z(o,l),t=!1},d(l){l&&L(e),o&&o.d(l)}}}function _l(n){let e;return{c(){e=H(n[9])},m(t,i){P(t,e,i)},p(t,i){i[0]&512&&de(e,t[9])},d(t){t&&L(e)}}}function qi(n){let e,t;return e=new Tr({props:{class:"bx--text-input__invalid-icon"}}),{c(){W(e.$$.fragment)},m(i,r){j(e,i,r),t=!0},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){z(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Gi(n){let e,t;return e=new Jo({props:{class:`bx--text-input__invalid-icon
            bx--text-input__invalid-icon--warning`}}),{c(){W(e.$$.fragment)},m(i,r){j(e,i,r),t=!0},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){z(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Yi(n){let e,t;return e=new $o({props:{class:"bx--text-input__readonly-icon"}}),{c(){W(e.$$.fragment)},m(i,r){j(e,i,r),t=!0},i(i){t||(R(e.$$.fragment,i),t=!0)},o(i){z(e.$$.fragment,i),t=!1},d(i){V(e,i)}}}function Xi(n){let e;return{c(){e=T("hr"),k(e,"bx--text-input__divider",!0)},m(t,i){P(t,e,i)},d(t){t&&L(e)}}}function Ji(n){let e,t;return{c(){e=T("div"),t=H(n[12]),I(e,"id",n[19]),k(e,"bx--form-requirement",!0)},m(i,r){P(i,e,r),S(e,t)},p(i,r){r[0]&4096&&de(t,i[12]),r[0]&524288&&I(e,"id",i[19])},d(i){i&&L(e)}}}function Ui(n){let e,t;return{c(){e=T("div"),t=H(n[14]),I(e,"id",n[18]),k(e,"bx--form-requirement",!0)},m(i,r){P(i,e,r),S(e,t)},p(i,r){r[0]&16384&&de(t,i[14]),r[0]&262144&&I(e,"id",i[18])},d(i){i&&L(e)}}}function Wi(n){let e,t;return{c(){e=T("div"),t=H(n[6]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[5]),k(e,"bx--form__helper-text--inline",n[16])},m(i,r){P(i,e,r),S(e,t)},p(i,r){r[0]&64&&de(t,i[6]),r[0]&32&&k(e,"bx--form__helper-text--disabled",i[5]),r[0]&65536&&k(e,"bx--form__helper-text--inline",i[16])},d(i){i&&L(e)}}}function ji(n){let e,t;return{c(){e=T("div"),t=H(n[12]),I(e,"id",n[19]),k(e,"bx--form-requirement",!0)},m(i,r){P(i,e,r),S(e,t)},p(i,r){r[0]&4096&&de(t,i[12]),r[0]&524288&&I(e,"id",i[19])},d(i){i&&L(e)}}}function Vi(n){let e,t;return{c(){e=T("div"),t=H(n[14]),I(e,"id",n[18]),k(e,"bx--form-requirement",!0)},m(i,r){P(i,e,r),S(e,t)},p(i,r){r[0]&16384&&de(t,i[14]),r[0]&262144&&I(e,"id",i[18])},d(i){i&&L(e)}}}function yl(n){let e,t,i,r,o,l,s,a,u,c,g,h,f,d,b,w,A,m,p,v,_,y,C,M,B=n[16]&&Fi(n),G=!n[16]&&(n[9]||n[24].labelText)&&Di(n),x=n[11]&&qi(),D=!n[11]&&n[13]&&Gi(),F=n[17]&&Yi(),O=[{"data-invalid":c=n[11]||void 0},{"aria-invalid":g=n[11]||void 0},{"data-warn":h=n[13]||void 0},{"aria-describedby":f=n[11]?n[19]:n[13]?n[18]:void 0},{disabled:n[5]},{id:n[7]},{name:n[8]},{placeholder:n[3]},{required:n[15]},{readOnly:n[17]},n[23]],q={};for(let E=0;E<O.length;E+=1)q=Q(q,O[E]);let U=n[20]&&Xi(),se=n[20]&&!n[16]&&n[11]&&Ji(n),te=n[20]&&!n[16]&&n[13]&&Ui(n),le=!n[11]&&!n[13]&&!n[20]&&!n[16]&&n[6]&&Wi(n),fe=!n[20]&&n[11]&&ji(n),ae=!n[20]&&!n[11]&&n[13]&&Vi(n);return{c(){e=T("div"),B&&B.c(),t=N(),G&&G.c(),i=N(),r=T("div"),o=T("div"),x&&x.c(),l=N(),D&&D.c(),s=N(),F&&F.c(),a=N(),u=T("input"),d=N(),U&&U.c(),b=N(),se&&se.c(),w=N(),te&&te.c(),p=N(),le&&le.c(),v=N(),fe&&fe.c(),_=N(),ae&&ae.c(),be(u,q),k(u,"bx--text-input",!0),k(u,"bx--text-input--light",n[4]),k(u,"bx--text-input--invalid",n[11]),k(u,"bx--text-input--warn",n[13]),k(u,"bx--text-input--sm",n[2]==="sm"),k(u,"bx--text-input--xl",n[2]==="xl"),I(o,"data-invalid",A=n[11]||void 0),I(o,"data-warn",m=n[13]||void 0),k(o,"bx--text-input__field-wrapper",!0),k(o,"bx--text-input__field-wrapper--warning",!n[11]&&n[13]),k(r,"bx--text-input__field-outer-wrapper",!0),k(r,"bx--text-input__field-outer-wrapper--inline",n[16]),k(e,"bx--form-item",!0),k(e,"bx--text-input-wrapper",!0),k(e,"bx--text-input-wrapper--inline",n[16]),k(e,"bx--text-input-wrapper--light",n[4]),k(e,"bx--text-input-wrapper--readonly",n[17])},m(E,Z){P(E,e,Z),B&&B.m(e,null),S(e,t),G&&G.m(e,null),S(e,i),S(e,r),S(r,o),x&&x.m(o,null),S(o,l),D&&D.m(o,null),S(o,s),F&&F.m(o,null),S(o,a),S(o,u),u.autofocus&&u.focus(),n[36](u),kt(u,n[0]),S(o,d),U&&U.m(o,null),S(o,b),se&&se.m(o,null),S(o,w),te&&te.m(o,null),S(r,p),le&&le.m(r,null),S(r,v),fe&&fe.m(r,null),S(r,_),ae&&ae.m(r,null),y=!0,C||(M=[Y(u,"input",n[37]),Y(u,"change",n[22]),Y(u,"input",n[21]),Y(u,"keydown",n[31]),Y(u,"keyup",n[32]),Y(u,"focus",n[33]),Y(u,"blur",n[34]),Y(u,"paste",n[35]),Y(e,"click",n[27]),Y(e,"mouseover",n[28]),Y(e,"mouseenter",n[29]),Y(e,"mouseleave",n[30])],C=!0)},p(E,Z){E[16]?B?(B.p(E,Z),Z[0]&65536&&R(B,1)):(B=Fi(E),B.c(),R(B,1),B.m(e,t)):B&&(Se(),z(B,1,1,()=>{B=null}),Ee()),!E[16]&&(E[9]||E[24].labelText)?G?(G.p(E,Z),Z[0]&16843264&&R(G,1)):(G=Di(E),G.c(),R(G,1),G.m(e,i)):G&&(Se(),z(G,1,1,()=>{G=null}),Ee()),E[11]?x?Z[0]&2048&&R(x,1):(x=qi(),x.c(),R(x,1),x.m(o,l)):x&&(Se(),z(x,1,1,()=>{x=null}),Ee()),!E[11]&&E[13]?D?Z[0]&10240&&R(D,1):(D=Gi(),D.c(),R(D,1),D.m(o,s)):D&&(Se(),z(D,1,1,()=>{D=null}),Ee()),E[17]?F?Z[0]&131072&&R(F,1):(F=Yi(),F.c(),R(F,1),F.m(o,a)):F&&(Se(),z(F,1,1,()=>{F=null}),Ee()),be(u,q=Te(O,[(!y||Z[0]&2048&&c!==(c=E[11]||void 0))&&{"data-invalid":c},(!y||Z[0]&2048&&g!==(g=E[11]||void 0))&&{"aria-invalid":g},(!y||Z[0]&8192&&h!==(h=E[13]||void 0))&&{"data-warn":h},(!y||Z[0]&796672&&f!==(f=E[11]?E[19]:E[13]?E[18]:void 0))&&{"aria-describedby":f},(!y||Z[0]&32)&&{disabled:E[5]},(!y||Z[0]&128)&&{id:E[7]},(!y||Z[0]&256)&&{name:E[8]},(!y||Z[0]&8)&&{placeholder:E[3]},(!y||Z[0]&32768)&&{required:E[15]},(!y||Z[0]&131072)&&{readOnly:E[17]},Z[0]&8388608&&E[23]])),Z[0]&1&&u.value!==E[0]&&kt(u,E[0]),k(u,"bx--text-input",!0),k(u,"bx--text-input--light",E[4]),k(u,"bx--text-input--invalid",E[11]),k(u,"bx--text-input--warn",E[13]),k(u,"bx--text-input--sm",E[2]==="sm"),k(u,"bx--text-input--xl",E[2]==="xl"),E[20]?U||(U=Xi(),U.c(),U.m(o,b)):U&&(U.d(1),U=null),E[20]&&!E[16]&&E[11]?se?se.p(E,Z):(se=Ji(E),se.c(),se.m(o,w)):se&&(se.d(1),se=null),E[20]&&!E[16]&&E[13]?te?te.p(E,Z):(te=Ui(E),te.c(),te.m(o,null)):te&&(te.d(1),te=null),(!y||Z[0]&2048&&A!==(A=E[11]||void 0))&&I(o,"data-invalid",A),(!y||Z[0]&8192&&m!==(m=E[13]||void 0))&&I(o,"data-warn",m),(!y||Z[0]&10240)&&k(o,"bx--text-input__field-wrapper--warning",!E[11]&&E[13]),!E[11]&&!E[13]&&!E[20]&&!E[16]&&E[6]?le?le.p(E,Z):(le=Wi(E),le.c(),le.m(r,v)):le&&(le.d(1),le=null),!E[20]&&E[11]?fe?fe.p(E,Z):(fe=ji(E),fe.c(),fe.m(r,_)):fe&&(fe.d(1),fe=null),!E[20]&&!E[11]&&E[13]?ae?ae.p(E,Z):(ae=Vi(E),ae.c(),ae.m(r,null)):ae&&(ae.d(1),ae=null),(!y||Z[0]&65536)&&k(r,"bx--text-input__field-outer-wrapper--inline",E[16]),(!y||Z[0]&65536)&&k(e,"bx--text-input-wrapper--inline",E[16]),(!y||Z[0]&16)&&k(e,"bx--text-input-wrapper--light",E[4]),(!y||Z[0]&131072)&&k(e,"bx--text-input-wrapper--readonly",E[17])},i(E){y||(R(B),R(G),R(x),R(D),R(F),y=!0)},o(E){z(B),z(G),z(x),z(D),z(F),y=!1},d(E){E&&L(e),B&&B.d(),G&&G.d(),x&&x.d(),D&&D.d(),F&&F.d(),n[36](null),U&&U.d(),se&&se.d(),te&&te.d(),le&&le.d(),fe&&fe.d(),ae&&ae.d(),C=!1,Ae(M)}}}function wl(n,e,t){let i,r,o;const l=["size","value","placeholder","light","disabled","helperText","id","name","labelText","hideLabel","invalid","invalidText","warn","warnText","ref","required","inline","readonly"];let s=ce(e,l),{$$slots:a={},$$scope:u}=e;const c=un(a);let{size:g=void 0}=e,{value:h=""}=e,{placeholder:f=""}=e,{light:d=!1}=e,{disabled:b=!1}=e,{helperText:w=""}=e,{id:A="ccs-"+Math.random().toString(36)}=e,{name:m=void 0}=e,{labelText:p=""}=e,{hideLabel:v=!1}=e,{invalid:_=!1}=e,{invalidText:y=""}=e,{warn:C=!1}=e,{warnText:M=""}=e,{ref:B=null}=e,{required:G=!1}=e,{inline:x=!1}=e,{readonly:D=!1}=e;const F=an("Form"),O=xr();function q(X){return s.type!=="number"?X:X!=""?Number(X):null}const U=X=>{t(0,h=q(X.target.value)),O("input",h)},se=X=>{O("change",q(X.target.value))};function te(X){J.call(this,n,X)}function le(X){J.call(this,n,X)}function fe(X){J.call(this,n,X)}function ae(X){J.call(this,n,X)}function E(X){J.call(this,n,X)}function Z(X){J.call(this,n,X)}function Xe(X){J.call(this,n,X)}function Pt(X){J.call(this,n,X)}function Yt(X){J.call(this,n,X)}function pn(X){he[X?"unshift":"push"](()=>{B=X,t(1,B)})}function pe(){h=this.value,t(0,h)}return n.$$set=X=>{e=Q(Q({},e),we(X)),t(23,s=ce(e,l)),"size"in X&&t(2,g=X.size),"value"in X&&t(0,h=X.value),"placeholder"in X&&t(3,f=X.placeholder),"light"in X&&t(4,d=X.light),"disabled"in X&&t(5,b=X.disabled),"helperText"in X&&t(6,w=X.helperText),"id"in X&&t(7,A=X.id),"name"in X&&t(8,m=X.name),"labelText"in X&&t(9,p=X.labelText),"hideLabel"in X&&t(10,v=X.hideLabel),"invalid"in X&&t(11,_=X.invalid),"invalidText"in X&&t(12,y=X.invalidText),"warn"in X&&t(13,C=X.warn),"warnText"in X&&t(14,M=X.warnText),"ref"in X&&t(1,B=X.ref),"required"in X&&t(15,G=X.required),"inline"in X&&t(16,x=X.inline),"readonly"in X&&t(17,D=X.readonly),"$$scope"in X&&t(25,u=X.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&128&&t(19,r=`error-${A}`),n.$$.dirty[0]&128&&t(18,o=`warn-${A}`)},t(20,i=!!F&&F.isFluid),[h,B,g,f,d,b,w,A,m,p,v,_,y,C,M,G,x,D,o,r,i,U,se,s,c,u,a,te,le,fe,ae,E,Z,Xe,Pt,Yt,pn,pe]}class kl extends ie{constructor(e){super(),re(this,e,wl,yl,oe,{size:2,value:0,placeholder:3,light:4,disabled:5,helperText:6,id:7,name:8,labelText:9,hideLabel:10,invalid:11,invalidText:12,warn:13,warnText:14,ref:1,required:15,inline:16,readonly:17},null,[-1,-1])}}const Sl=kl;function El(n){let e;return{c(){e=H(`Click one of the draw icons to the top right of the map (the icons allow
      you to draw points, lines, polygons or routes)`)},m(t,i){P(t,e,i)},d(t){t&&L(e)}}}function Ml(n){let e;return{c(){e=H(`Draw the intervention on the map, clicking the original point or 'Finish
      snapping' for the Polygon and Route tools respectively`)},m(t,i){P(t,e,i)},d(t){t&&L(e)}}}function Pl(n){let e;return{c(){e=H("Fill in the details that appear (Intervention type, name, description)")},m(t,i){P(t,e,i)},d(t){t&&L(e)}}}function Ll(n){let e;return{c(){e=H(`Click the "Save" button or "Delete" button to save or remove the
      intervention`)},m(t,i){P(t,e,i)},d(t){t&&L(e)}}}function xl(n){let e,t,i,r,o,l,s,a;return e=new Xt({props:{$$slots:{default:[El]},$$scope:{ctx:n}}}),i=new Xt({props:{$$slots:{default:[Ml]},$$scope:{ctx:n}}}),o=new Xt({props:{$$slots:{default:[Pl]},$$scope:{ctx:n}}}),s=new Xt({props:{$$slots:{default:[Ll]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment),t=N(),W(i.$$.fragment),r=N(),W(o.$$.fragment),l=N(),W(s.$$.fragment)},m(u,c){j(e,u,c),P(u,t,c),j(i,u,c),P(u,r,c),j(o,u,c),P(u,l,c),j(s,u,c),a=!0},p(u,c){const g={};c&4&&(g.$$scope={dirty:c,ctx:u}),e.$set(g);const h={};c&4&&(h.$$scope={dirty:c,ctx:u}),i.$set(h);const f={};c&4&&(f.$$scope={dirty:c,ctx:u}),o.$set(f);const d={};c&4&&(d.$$scope={dirty:c,ctx:u}),s.$set(d)},i(u){a||(R(e.$$.fragment,u),R(i.$$.fragment,u),R(o.$$.fragment,u),R(s.$$.fragment,u),a=!0)},o(u){z(e.$$.fragment,u),z(i.$$.fragment,u),z(o.$$.fragment,u),z(s.$$.fragment,u),a=!1},d(u){V(e,u),u&&L(t),V(i,u),u&&L(r),V(o,u),u&&L(l),V(s,u)}}}function Tl(n){let e,t,i,r,o,l,s,a,u,c,g,h,f,d,b,w,A,m,p,v,_,y,C,M,B,G;return o=new il({props:{$$slots:{default:[xl]},$$scope:{ctx:n}}}),{c(){e=T("p"),e.textContent="For each intervention:",t=N(),i=T("br"),r=N(),W(o.$$.fragment),l=N(),s=T("br"),a=N(),u=T("p"),u.textContent=`Repeat the steps above for each substantial infrastructure intervention in
    the scheme.`,c=N(),g=T("br"),h=N(),f=T("p"),f.textContent=`To make further edits to attribute data, or to delete an intervention, click
    on its name in the left hand panel or its geometry in the map.`,d=N(),b=T("br"),w=N(),A=T("p"),A.textContent=`Click the "Export to GeoJSON" button to download the dataset representing
    the scheme, which can be made up of one or more intervention, as a GeoJSON
    file. After saving the file, you can delete the interventions, change the
    scheme name, and start a new set of interventions representing a new scheme.`,m=N(),p=T("br"),v=N(),_=T("p"),_.textContent=`To load a GeoJSON file that you have already saved from the tool, click the
    "Load from GeoJSON" button and select the file.`,y=N(),C=T("br"),M=N(),B=T("p"),B.innerHTML=`Note: the <strong>Route tool</strong> works by calculating routes between
    start and end points using the existing transport network according to
    OpenStreetMap. Use it by clicking on the location where you would like the
    route to start and then clicking on the location where you would like the
    route to end on the map. The route will be calculated and drawn on the map.
    After you click &quot;Finish snapping&quot; you can edit the route by dragging
    individual points. This can be useful for representing links that are not
    part of the existing transport network, such as a new bridge or path.
    However,
    <strong>you cannot add or remove points</strong> with the Route tool. If the
    planned route intervention you would like to sketch as part of a scheme contains
    one or more new links (for example containing new bridges or paths between cul-de-sacs),
    you may want to use the Line tool instead.`},m(x,D){P(x,e,D),P(x,t,D),P(x,i,D),P(x,r,D),j(o,x,D),P(x,l,D),P(x,s,D),P(x,a,D),P(x,u,D),P(x,c,D),P(x,g,D),P(x,h,D),P(x,f,D),P(x,d,D),P(x,b,D),P(x,w,D),P(x,A,D),P(x,m,D),P(x,p,D),P(x,v,D),P(x,_,D),P(x,y,D),P(x,C,D),P(x,M,D),P(x,B,D),G=!0},p(x,D){const F={};D&4&&(F.$$scope={dirty:D,ctx:x}),o.$set(F)},i(x){G||(R(o.$$.fragment,x),G=!0)},o(x){z(o.$$.fragment,x),G=!1},d(x){x&&L(e),x&&L(t),x&&L(i),x&&L(r),V(o,x),x&&L(l),x&&L(s),x&&L(a),x&&L(u),x&&L(c),x&&L(g),x&&L(h),x&&L(f),x&&L(d),x&&L(b),x&&L(w),x&&L(A),x&&L(m),x&&L(p),x&&L(v),x&&L(_),x&&L(y),x&&L(C),x&&L(M),x&&L(B)}}}function Al(n){let e,t,i;function r(l){n[1](l)}let o={passiveModal:!0,modalHeading:"Instructions",$$slots:{default:[Tl]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.open=n[0]),e=new ro({props:o}),he.push(()=>ze(e,"open",r,n[0])),{c(){W(e.$$.fragment)},m(l,s){j(e,l,s),i=!0},p(l,[s]){const a={};s&4&&(a.$$scope={dirty:s,ctx:l}),!t&&s&1&&(t=!0,a.open=l[0],De(()=>t=!1)),e.$set(a)},i(l){i||(R(e.$$.fragment,l),i=!0)},o(l){z(e.$$.fragment,l),i=!1},d(l){V(e,l)}}}function Cl(n,e,t){let{open:i}=e;function r(o){i=o,t(0,i)}return n.$$set=o=>{"open"in o&&t(0,i=o.open)},[i,r]}class Rl extends ie{constructor(e){super(),re(this,e,Cl,Al,oe,{open:0})}}const Ze=mt(null),ue=mt($e()),Je=mt(null),En=mt(null);function $e(){return{type:"FeatureCollection",features:[]}}const fn=oo(ue,n=>{let e=n.features.find(t=>t.properties.editing);return e?e.id:null});function st(n){lo(fn)!=n&&(ue.update(e=>{for(let t of e.features)t.id==n?t.properties.editing=!0:delete t.properties.editing;return e}),Je.set(n))}function cn(n){let e=new Set;for(let i of n.features)e.add(i.id);let t=e.size+1;for(;e.has(t);)t++;return t}function Hi(n){let e;const t=n[4].default,i=Re(t,n,n[3],null);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o&8)&&Oe(i,t,r,r[3],e?Ie(t,r[3],o,null):Ne(r[3]),null)},i(r){e||(R(i,r),e=!0)},o(r){z(i,r),e=!1},d(r){i&&i.d(r)}}}function Ol(n){let e,t,i=n[1]&&Hi(n);return{c(){e=T("div"),i&&i.c(),I(e,"class","map svelte-12dpf1u")},m(r,o){P(r,e,o),i&&i.m(e,null),n[5](e),t=!0},p(r,[o]){r[1]?i?(i.p(r,o),o&2&&R(i,1)):(i=Hi(r),i.c(),R(i,1),i.m(e,null)):i&&(Se(),z(i,1,1,()=>{i=null}),Ee())},i(r){t||(R(i),t=!0)},o(r){z(i),t=!1},d(r){r&&L(e),i&&i.d(),n[5](null)}}}function Nl(n,e,t){let{$$slots:i={},$$scope:r}=e,{style:o}=e,l,s,a=!1;Jn("setCamera",!window.location.hash),qt(()=>{l=new bn.Map({container:s,style:`https://api.maptiler.com/maps/${o}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),l.addControl(new bn.ScaleControl),l.addControl(new bn.NavigationControl({visualizePitch:!0}),"bottom-right"),l.on("load",()=>{t(1,a=!0),Ze.set(l)}),new ResizeObserver(()=>{l.resize()}).observe(s)}),Un(()=>{l.remove()});function u(c){he[c?"unshift":"push"](()=>{s=c,t(0,s)})}return n.$$set=c=>{"style"in c&&t(2,o=c.style),"$$scope"in c&&t(3,r=c.$$scope)},[s,a,o,r,i,u]}class Il extends ie{constructor(e){super(),re(this,e,Nl,Ol,oe,{style:2})}}const Fl=n=>({}),Zi=n=>({}),Bl=n=>({}),Qi=n=>({}),zl=n=>({}),Ki=n=>({});function Dl(n){let e,t,i,r,o,l,s,a,u,c,g,h;const f=n[3].nav,d=Re(f,n,n[2],Ki),b=n[3].sidebar,w=Re(b,n,n[2],Qi),A=n[3].main,m=Re(A,n,n[2],Zi);return{c(){e=T("aside"),t=T("div"),i=T("nav"),d&&d.c(),r=N(),w&&w.c(),o=N(),l=T("div"),l.textContent="→",a=N(),u=T("main"),m&&m.c(),I(i,"class","svelte-19nerxn"),I(t,"class","sidebar-content content-container svelte-19nerxn"),I(l,"class","sidebar-toggle rounded-rect svelte-19nerxn"),I(e,"class",s=fi(n[0]?"":"collapsed")+" svelte-19nerxn"),I(u,"class","svelte-19nerxn")},m(p,v){P(p,e,v),S(e,t),S(t,i),d&&d.m(i,null),S(t,r),w&&w.m(t,null),S(e,o),S(e,l),P(p,a,v),P(p,u,v),m&&m.m(u,null),c=!0,g||(h=Y(l,"click",n[1]),g=!0)},p(p,[v]){d&&d.p&&(!c||v&4)&&Oe(d,f,p,p[2],c?Ie(f,p[2],v,zl):Ne(p[2]),Ki),w&&w.p&&(!c||v&4)&&Oe(w,b,p,p[2],c?Ie(b,p[2],v,Bl):Ne(p[2]),Qi),(!c||v&1&&s!==(s=fi(p[0]?"":"collapsed")+" svelte-19nerxn"))&&I(e,"class",s),m&&m.p&&(!c||v&4)&&Oe(m,A,p,p[2],c?Ie(A,p[2],v,Fl):Ne(p[2]),Zi)},i(p){c||(R(d,p),R(w,p),R(m,p),c=!0)},o(p){z(d,p),z(w,p),z(m,p),c=!1},d(p){p&&L(e),d&&d.d(p),w&&w.d(p),p&&L(a),p&&L(u),m&&m.d(p),g=!1,h()}}}function ql(n,e,t){let{$$slots:i={},$$scope:r}=e,o=!0;function l(){t(0,o=!o)}return n.$$set=s=>{"$$scope"in s&&t(2,r=s.$$scope)},[o,l,r,i]}class Gl extends ie{constructor(e){super(),re(this,e,ql,Dl,oe,{})}}var ke=63710088e-1,Hn={centimeters:ke*100,centimetres:ke*100,degrees:ke/111325,feet:ke*3.28084,inches:ke*39.37,kilometers:ke/1e3,kilometres:ke/1e3,meters:ke,metres:ke,miles:ke/1609.344,millimeters:ke*1e3,millimetres:ke*1e3,nauticalmiles:ke/1852,radians:1,yards:ke*1.0936},Yl={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ke,yards:1.0936133},Mn={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Ge(n,e,t){t===void 0&&(t={});var i={type:"Feature"};return(t.id===0||t.id)&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.properties=e||{},i.geometry=n,i}function Xl(n,e,t){switch(n){case"Point":return Me(e).geometry;case"LineString":return Le(e).geometry;case"Polygon":return dn(e).geometry;case"MultiPoint":return Cr(e).geometry;case"MultiLineString":return Ar(e).geometry;case"MultiPolygon":return Zn(e).geometry;default:throw new Error(n+" is invalid")}}function Me(n,e,t){if(t===void 0&&(t={}),!n)throw new Error("coordinates is required");if(!Array.isArray(n))throw new Error("coordinates must be an Array");if(n.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Kt(n[0])||!Kt(n[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:n};return Ge(i,e,t)}function Jl(n,e,t){return t===void 0&&(t={}),qe(n.map(function(i){return Me(i,e)}),t)}function dn(n,e,t){t===void 0&&(t={});for(var i=0,r=n;i<r.length;i++){var o=r[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<o[o.length-1].length;l++)if(o[o.length-1][l]!==o[0][l])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:n};return Ge(s,e,t)}function Ul(n,e,t){return t===void 0&&(t={}),qe(n.map(function(i){return dn(i,e)}),t)}function Le(n,e,t){if(t===void 0&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:n};return Ge(i,e,t)}function Wl(n,e,t){return t===void 0&&(t={}),qe(n.map(function(i){return Le(i,e)}),t)}function qe(n,e){e===void 0&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function Ar(n,e,t){t===void 0&&(t={});var i={type:"MultiLineString",coordinates:n};return Ge(i,e,t)}function Cr(n,e,t){t===void 0&&(t={});var i={type:"MultiPoint",coordinates:n};return Ge(i,e,t)}function Zn(n,e,t){t===void 0&&(t={});var i={type:"MultiPolygon",coordinates:n};return Ge(i,e,t)}function jl(n,e,t){t===void 0&&(t={});var i={type:"GeometryCollection",geometries:n};return Ge(i,e,t)}function Vl(n,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var t=Math.pow(10,e||0);return Math.round(n*t)/t}function Qn(n,e){e===void 0&&(e="kilometers");var t=Hn[e];if(!t)throw new Error(e+" units is invalid");return n*t}function hn(n,e){e===void 0&&(e="kilometers");var t=Hn[e];if(!t)throw new Error(e+" units is invalid");return n/t}function Hl(n,e){return Ot(hn(n,e))}function Zl(n){var e=n%360;return e<0&&(e+=360),e}function Ot(n){var e=n%(2*Math.PI);return e*180/Math.PI}function Be(n){var e=n%360;return e*Math.PI/180}function Ql(n,e,t){if(e===void 0&&(e="kilometers"),t===void 0&&(t="kilometers"),!(n>=0))throw new Error("length must be a positive number");return Qn(hn(n,e),t)}function Kl(n,e,t){if(e===void 0&&(e="meters"),t===void 0&&(t="kilometers"),!(n>=0))throw new Error("area must be a positive number");var i=Mn[e];if(!i)throw new Error("invalid original units");var r=Mn[t];if(!r)throw new Error("invalid final units");return n/i*r}function Kt(n){return!isNaN(n)&&n!==null&&!Array.isArray(n)}function Kn(n){return!!n&&n.constructor===Object}function $l(n){if(!n)throw new Error("bbox is required");if(!Array.isArray(n))throw new Error("bbox must be an Array");if(n.length!==4&&n.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");n.forEach(function(e){if(!Kt(e))throw new Error("bbox must only contain numbers")})}function es(n){if(!n)throw new Error("id is required");if(["string","number"].indexOf(typeof n)===-1)throw new Error("id must be a number or a string")}const ts=Object.freeze(Object.defineProperty({__proto__:null,earthRadius:ke,factors:Hn,unitsFactors:Yl,areaFactors:Mn,feature:Ge,geometry:Xl,point:Me,points:Jl,polygon:dn,polygons:Ul,lineString:Le,lineStrings:Wl,featureCollection:qe,multiLineString:Ar,multiPoint:Cr,multiPolygon:Zn,geometryCollection:jl,round:Vl,radiansToLength:Qn,lengthToRadians:hn,lengthToDegrees:Hl,bearingToAzimuth:Zl,radiansToDegrees:Ot,degreesToRadians:Be,convertLength:Ql,convertArea:Kl,isNumber:Kt,isObject:Kn,validateBBox:$l,validateId:es},Symbol.toStringTag,{value:"Module"}));/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ns(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,l;return l={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function s(u){return function(c){return a([u,c])}}function a(u){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,r&&(o=u[0]&2?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,r=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(c){u=[6,c],r=0}finally{i=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var ft=function(){function n(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return n}();function is(n,e){return n>e?1:n<e?-1:0}function it(n,e,t){for(var i=new ft(null,null),r=i,o=i;;){var l=t(n,e.key);if(l<0){if(e.left===null)break;if(t(n,e.left.key)<0){var s=e.left;if(e.left=s.right,s.right=e,e=s,e.left===null)break}o.left=e,o=e,e=e.left}else if(l>0){if(e.right===null)break;if(t(n,e.right.key)>0){var s=e.right;if(e.right=s.left,s.left=e,e=s,e.right===null)break}r.right=e,r=e,e=e.right}else break}return r.right=e.left,o.left=e.right,e.left=i.right,e.right=i.left,e}function vn(n,e,t,i){var r=new ft(n,e);if(t===null)return r.left=r.right=null,r;t=it(n,t,i);var o=i(n,t.key);return o<0?(r.left=t.left,r.right=t,t.left=null):o>=0&&(r.right=t.right,r.left=t,t.right=null),r}function $i(n,e,t){var i=null,r=null;if(e){e=it(n,e,t);var o=t(e.key,n);o===0?(i=e.left,r=e.right):o<0?(r=e.right,e.right=null,i=e):(i=e.left,e.left=null,r=e)}return{left:i,right:r}}function rs(n,e,t){return e===null?n:(n===null||(e=it(n.key,e,t),e.left=n),e)}function Pn(n,e,t,i,r){if(n){i(""+e+(t?"└── ":"├── ")+r(n)+`
`);var o=e+(t?"    ":"│   ");n.left&&Pn(n.left,o,!1,i,r),n.right&&Pn(n.right,o,!0,i,r)}}var $n=function(){function n(e){e===void 0&&(e=is),this._root=null,this._size=0,this._comparator=e}return n.prototype.insert=function(e,t){return this._size++,this._root=vn(e,t,this._root,this._comparator)},n.prototype.add=function(e,t){var i=new ft(e,t);this._root===null&&(i.left=i.right=null,this._size++,this._root=i);var r=this._comparator,o=it(e,this._root,r),l=r(e,o.key);return l===0?this._root=o:(l<0?(i.left=o.left,i.right=o,o.left=null):l>0&&(i.right=o.right,i.left=o,o.right=null),this._size++,this._root=i),this._root},n.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},n.prototype._remove=function(e,t,i){var r;if(t===null)return null;t=it(e,t,i);var o=i(e,t.key);return o===0?(t.left===null?r=t.right:(r=it(e,t.left,i),r.right=t.right),this._size--,r):t},n.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=it(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},n.prototype.findStatic=function(e){for(var t=this._root,i=this._comparator;t;){var r=i(e,t.key);if(r===0)return t;r<0?t=t.left:t=t.right}return null},n.prototype.find=function(e){return this._root&&(this._root=it(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},n.prototype.contains=function(e){for(var t=this._root,i=this._comparator;t;){var r=i(e,t.key);if(r===0)return!0;r<0?t=t.left:t=t.right}return!1},n.prototype.forEach=function(e,t){for(var i=this._root,r=[],o=!1;!o;)i!==null?(r.push(i),i=i.left):r.length!==0?(i=r.pop(),e.call(t,i),i=i.right):o=!0;return this},n.prototype.range=function(e,t,i,r){for(var o=[],l=this._comparator,s=this._root,a;o.length!==0||s;)if(s)o.push(s),s=s.left;else{if(s=o.pop(),a=l(s.key,t),a>0)break;if(l(s.key,e)>=0&&i.call(r,s))return this;s=s.right}return this},n.prototype.keys=function(){var e=[];return this.forEach(function(t){var i=t.key;return e.push(i)}),e},n.prototype.values=function(){var e=[];return this.forEach(function(t){var i=t.data;return e.push(i)}),e},n.prototype.min=function(){return this._root?this.minNode(this._root).key:null},n.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},n.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},n.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},n.prototype.at=function(e){for(var t=this._root,i=!1,r=0,o=[];!i;)if(t)o.push(t),t=t.left;else if(o.length>0){if(t=o.pop(),r===e)return t;r++,t=t.right}else i=!0;return null},n.prototype.next=function(e){var t=this._root,i=null;if(e.right){for(i=e.right;i.left;)i=i.left;return i}for(var r=this._comparator;t;){var o=r(e.key,t.key);if(o===0)break;o<0?(i=t,t=t.left):t=t.right}return i},n.prototype.prev=function(e){var t=this._root,i=null;if(e.left!==null){for(i=e.left;i.right;)i=i.right;return i}for(var r=this._comparator;t;){var o=r(e.key,t.key);if(o===0)break;o<0?t=t.left:(i=t,t=t.right)}return i},n.prototype.clear=function(){return this._root=null,this._size=0,this},n.prototype.toList=function(){return ls(this._root)},n.prototype.load=function(e,t,i){t===void 0&&(t=[]),i===void 0&&(i=!1);var r=e.length,o=this._comparator;if(i&&Tn(e,t,0,r-1,o),this._root===null)this._root=Ln(e,t,0,r),this._size=r;else{var l=ss(this.toList(),os(e,t),o);r=this._size+r,this._root=xn({head:l},0,r)}return this},n.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){e===void 0&&(e=function(i){return String(i.key)});var t=[];return Pn(this._root,"",!0,function(i){return t.push(i)},e),t.join("")},n.prototype.update=function(e,t,i){var r=this._comparator,o=$i(e,this._root,r),l=o.left,s=o.right;r(e,t)<0?s=vn(t,i,s,r):l=vn(t,i,l,r),this._root=rs(l,s,r)},n.prototype.split=function(e){return $i(e,this._root,this._comparator)},n.prototype[Symbol.iterator]=function(){var e;return ns(this,function(t){switch(t.label){case 0:e=this.minNode(),t.label=1;case 1:return e?[4,e]:[3,3];case 2:return t.sent(),e=this.next(e),[3,1];case 3:return[2]}})},n}();function Ln(n,e,t,i){var r=i-t;if(r>0){var o=t+Math.floor(r/2),l=n[o],s=e[o],a=new ft(l,s);return a.left=Ln(n,e,t,o),a.right=Ln(n,e,o+1,i),a}return null}function os(n,e){for(var t=new ft(null,null),i=t,r=0;r<n.length;r++)i=i.next=new ft(n[r],e[r]);return i.next=null,t.next}function ls(n){for(var e=n,t=[],i=!1,r=new ft(null,null),o=r;!i;)e?(t.push(e),e=e.left):t.length>0?(e=o=o.next=t.pop(),e=e.right):i=!0;return o.next=null,r.next}function xn(n,e,t){var i=t-e;if(i>0){var r=e+Math.floor(i/2),o=xn(n,e,r),l=n.head;return l.left=o,n.head=n.head.next,l.right=xn(n,r+1,t),l}return null}function ss(n,e,t){for(var i=new ft(null,null),r=i,o=n,l=e;o!==null&&l!==null;)t(o.key,l.key)<0?(r.next=o,o=o.next):(r.next=l,l=l.next),r=r.next;return o!==null?r.next=o:l!==null&&(r.next=l),i.next}function Tn(n,e,t,i,r){if(!(t>=i)){for(var o=n[t+i>>1],l=t-1,s=i+1;;){do l++;while(r(n[l],o)<0);do s--;while(r(n[s],o)>0);if(l>=s)break;var a=n[l];n[l]=n[s],n[s]=a,a=e[l],e[l]=e[s],e[s]=a}Tn(n,e,t,s,r),Tn(n,e,s+1,i,r)}}function Ye(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function er(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function xe(n,e,t){return e&&er(n.prototype,e),t&&er(n,t),n}var xt=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},An=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var i=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x,o=e.ll.y<t.ll.y?t.ll.y:e.ll.y,l=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:i,y:o},ur:{x:r,y:l}}},ot=Number.EPSILON;ot===void 0&&(ot=Math.pow(2,-52));var as=ot*ot,Cn=function(e,t){if(-ot<e&&e<ot&&-ot<t&&t<ot)return 0;var i=e-t;return i*i<as*e*t?0:e<t?-1:1},us=function(){function n(){Ye(this,n),this.reset()}return xe(n,[{key:"reset",value:function(){this.xRounder=new tr,this.yRounder=new tr}},{key:"round",value:function(t,i){return{x:this.xRounder.round(t),y:this.yRounder.round(i)}}}]),n}(),tr=function(){function n(){Ye(this,n),this.tree=new $n,this.round(0)}return xe(n,[{key:"round",value:function(t){var i=this.tree.add(t),r=this.tree.prev(i);if(r!==null&&Cn(i.key,r.key)===0)return this.tree.remove(t),r.key;var o=this.tree.next(i);return o!==null&&Cn(i.key,o.key)===0?(this.tree.remove(t),o.key):t}}]),n}(),Nt=new us,At=function(e,t){return e.x*t.y-e.y*t.x},Rr=function(e,t){return e.x*t.x+e.y*t.y},nr=function(e,t,i){var r={x:t.x-e.x,y:t.y-e.y},o={x:i.x-e.x,y:i.y-e.y},l=At(r,o);return Cn(l,0)},$t=function(e){return Math.sqrt(Rr(e,e))},fs=function(e,t,i){var r={x:t.x-e.x,y:t.y-e.y},o={x:i.x-e.x,y:i.y-e.y};return At(o,r)/$t(o)/$t(r)},cs=function(e,t,i){var r={x:t.x-e.x,y:t.y-e.y},o={x:i.x-e.x,y:i.y-e.y};return Rr(o,r)/$t(o)/$t(r)},ir=function(e,t,i){return t.y===0?null:{x:e.x+t.x/t.y*(i-e.y),y:i}},rr=function(e,t,i){return t.x===0?null:{x:i,y:e.y+t.y/t.x*(i-e.x)}},ds=function(e,t,i,r){if(t.x===0)return rr(i,r,e.x);if(r.x===0)return rr(e,t,i.x);if(t.y===0)return ir(i,r,e.y);if(r.y===0)return ir(e,t,i.y);var o=At(t,r);if(o==0)return null;var l={x:i.x-e.x,y:i.y-e.y},s=At(l,t)/o,a=At(l,r)/o,u=e.x+a*t.x,c=i.x+s*r.x,g=e.y+a*t.y,h=i.y+s*r.y,f=(u+c)/2,d=(g+h)/2;return{x:f,y:d}},je=function(){xe(n,null,[{key:"compare",value:function(t,i){var r=n.comparePoints(t.point,i.point);return r!==0?r:(t.point!==i.point&&t.link(i),t.isLeft!==i.isLeft?t.isLeft?1:-1:en.compare(t.segment,i.segment))}},{key:"comparePoints",value:function(t,i){return t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0}}]);function n(e,t){Ye(this,n),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}return xe(n,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var i=t.point.events,r=0,o=i.length;r<o;r++){var l=i[r];this.point.events.push(l),l.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,i=0;i<t;i++){var r=this.point.events[i];if(r.segment.consumedBy===void 0)for(var o=i+1;o<t;o++){var l=this.point.events[o];l.consumedBy===void 0&&r.otherSE.point.events===l.otherSE.point.events&&r.segment.consume(l.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],i=0,r=this.point.events.length;i<r;i++){var o=this.point.events[i];o!==this&&!o.segment.ringOut&&o.segment.isInResult()&&t.push(o)}return t}},{key:"getLeftmostComparator",value:function(t){var i=this,r=new Map,o=function(s){var a=s.otherSE;r.set(s,{sine:fs(i.point,t.point,a.point),cosine:cs(i.point,t.point,a.point)})};return function(l,s){r.has(l)||o(l),r.has(s)||o(s);var a=r.get(l),u=a.sine,c=a.cosine,g=r.get(s),h=g.sine,f=g.cosine;return u>=0&&h>=0?c<f?1:c>f?-1:0:u<0&&h<0?c<f?-1:c>f?1:0:h<u?-1:h>u?1:0}}}]),n}(),hs=0,en=function(){xe(n,null,[{key:"compare",value:function(t,i){var r=t.leftSE.point.x,o=i.leftSE.point.x,l=t.rightSE.point.x,s=i.rightSE.point.x;if(s<r)return 1;if(l<o)return-1;var a=t.leftSE.point.y,u=i.leftSE.point.y,c=t.rightSE.point.y,g=i.rightSE.point.y;if(r<o){if(u<a&&u<c)return 1;if(u>a&&u>c)return-1;var h=t.comparePoint(i.leftSE.point);if(h<0)return 1;if(h>0)return-1;var f=i.comparePoint(t.rightSE.point);return f!==0?f:-1}if(r>o){if(a<u&&a<g)return-1;if(a>u&&a>g)return 1;var d=i.comparePoint(t.leftSE.point);if(d!==0)return d;var b=t.comparePoint(i.rightSE.point);return b<0?1:b>0?-1:1}if(a<u)return-1;if(a>u)return 1;if(l<s){var w=i.comparePoint(t.rightSE.point);if(w!==0)return w}if(l>s){var A=t.comparePoint(i.rightSE.point);if(A<0)return 1;if(A>0)return-1}if(l!==s){var m=c-a,p=l-r,v=g-u,_=s-o;if(m>p&&v<_)return 1;if(m<p&&v>_)return-1}return l>s?1:l<s||c<g?-1:c>g?1:t.id<i.id?-1:t.id>i.id?1:0}}]);function n(e,t,i,r){Ye(this,n),this.id=++hs,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=i,this.windings=r}return xe(n,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,i=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<i?t:i},ur:{x:this.rightSE.point.x,y:t>i?t:i}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var i=this.leftSE.point,r=this.rightSE.point,o=this.vector();if(i.x===r.x)return t.x===i.x?0:t.x<i.x?1:-1;var l=(t.y-i.y)/o.y,s=i.x+l*o.x;if(t.x===s)return 0;var a=(t.x-i.x)/o.x,u=i.y+a*o.y;return t.y===u?0:t.y<u?-1:1}},{key:"getIntersection",value:function(t){var i=this.bbox(),r=t.bbox(),o=An(i,r);if(o===null)return null;var l=this.leftSE.point,s=this.rightSE.point,a=t.leftSE.point,u=t.rightSE.point,c=xt(i,a)&&this.comparePoint(a)===0,g=xt(r,l)&&t.comparePoint(l)===0,h=xt(i,u)&&this.comparePoint(u)===0,f=xt(r,s)&&t.comparePoint(s)===0;if(g&&c)return f&&!h?s:!f&&h?u:null;if(g)return h&&l.x===u.x&&l.y===u.y?null:l;if(c)return f&&s.x===a.x&&s.y===a.y?null:a;if(f&&h)return null;if(f)return s;if(h)return u;var d=ds(l,this.vector(),a,t.vector());return d===null||!xt(o,d)?null:Nt.round(d.x,d.y)}},{key:"split",value:function(t){var i=[],r=t.events!==void 0,o=new je(t,!0),l=new je(t,!1),s=this.rightSE;this.replaceRightSE(l),i.push(l),i.push(o);var a=new n(o,s,this.rings.slice(),this.windings.slice());return je.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),je.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(o.checkForConsuming(),l.checkForConsuming()),i}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var i=0,r=this.windings.length;i<r;i++)this.windings[i]*=-1}},{key:"consume",value:function(t){for(var i=this,r=t;i.consumedBy;)i=i.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var o=n.compare(i,r);if(o!==0){if(o>0){var l=i;i=r,r=l}if(i.prev===r){var s=i;i=r,r=s}for(var a=0,u=r.rings.length;a<u;a++){var c=r.rings[a],g=r.windings[a],h=i.rings.indexOf(c);h===-1?(i.rings.push(c),i.windings.push(g)):i.windings[h]+=g}r.rings=null,r.windings=null,r.consumedBy=i,r.leftSE.consumedBy=i.leftSE,r.rightSE.consumedBy=i.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var i=this._afterState.rings,r=this._afterState.windings,o=this._afterState.multiPolys,l=0,s=this.rings.length;l<s;l++){var a=this.rings[l],u=this.windings[l],c=i.indexOf(a);c===-1?(i.push(a),r.push(u)):r[c]+=u}for(var g=[],h=[],f=0,d=i.length;f<d;f++)if(r[f]!==0){var b=i[f],w=b.poly;if(h.indexOf(w)===-1)if(b.isExterior)g.push(w);else{h.indexOf(w)===-1&&h.push(w);var A=g.indexOf(b.poly);A!==-1&&g.splice(A,1)}}for(var m=0,p=g.length;m<p;m++){var v=g[m].multiPoly;o.indexOf(v)===-1&&o.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,i=this.afterState().multiPolys;switch(Ue.type){case"union":{var r=t.length===0,o=i.length===0;this._isInResult=r!==o;break}case"intersection":{var l,s;t.length<i.length?(l=t.length,s=i.length):(l=i.length,s=t.length),this._isInResult=s===Ue.numMultiPolys&&l<s;break}case"xor":{var a=Math.abs(t.length-i.length);this._isInResult=a%2===1;break}case"difference":{var u=function(g){return g.length===1&&g[0].isSubject};this._isInResult=u(t)!==u(i);break}default:throw new Error("Unrecognized operation type found ".concat(Ue.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,i,r){var o,l,s,a=je.comparePoints(t,i);if(a<0)o=t,l=i,s=1;else if(a>0)o=i,l=t,s=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var u=new je(o,!0),c=new je(l,!1);return new n(u,c,[r],[s])}}]),n}(),or=function(){function n(e,t,i){if(Ye(this,n),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=i,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var r=Nt.round(e[0][0],e[0][1]);this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};for(var o=r,l=1,s=e.length;l<s;l++){if(typeof e[l][0]!="number"||typeof e[l][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var a=Nt.round(e[l][0],e[l][1]);a.x===o.x&&a.y===o.y||(this.segments.push(en.fromRing(o,a,this)),a.x<this.bbox.ll.x&&(this.bbox.ll.x=a.x),a.y<this.bbox.ll.y&&(this.bbox.ll.y=a.y),a.x>this.bbox.ur.x&&(this.bbox.ur.x=a.x),a.y>this.bbox.ur.y&&(this.bbox.ur.y=a.y),o=a)}(r.x!==o.x||r.y!==o.y)&&this.segments.push(en.fromRing(o,r,this))}return xe(n,[{key:"getSweepEvents",value:function(){for(var t=[],i=0,r=this.segments.length;i<r;i++){var o=this.segments[i];t.push(o.leftSE),t.push(o.rightSE)}return t}}]),n}(),ms=function(){function n(e,t){if(Ye(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new or(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,r=e.length;i<r;i++){var o=new or(e[i],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=t}return xe(n,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),i=0,r=this.interiorRings.length;i<r;i++)for(var o=this.interiorRings[i].getSweepEvents(),l=0,s=o.length;l<s;l++)t.push(o[l]);return t}}]),n}(),lr=function(){function n(e,t){if(Ye(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,r=e.length;i<r;i++){var o=new ms(e[i],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=t}return xe(n,[{key:"getSweepEvents",value:function(){for(var t=[],i=0,r=this.polys.length;i<r;i++)for(var o=this.polys[i].getSweepEvents(),l=0,s=o.length;l<s;l++)t.push(o[l]);return t}}]),n}(),ps=function(){xe(n,null,[{key:"factory",value:function(t){for(var i=[],r=0,o=t.length;r<o;r++){var l=t[r];if(!(!l.isInResult()||l.ringOut)){for(var s=null,a=l.leftSE,u=l.rightSE,c=[a],g=a.point,h=[];s=a,a=u,c.push(a),a.point!==g;)for(;;){var f=a.getAvailableLinkedEvents();if(f.length===0){var d=c[0].point,b=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(b.x,", ").concat(b.y,"]."))}if(f.length===1){u=f[0].otherSE;break}for(var w=null,A=0,m=h.length;A<m;A++)if(h[A].point===a.point){w=A;break}if(w!==null){var p=h.splice(w)[0],v=c.splice(p.index);v.unshift(v[0].otherSE),i.push(new n(v.reverse()));continue}h.push({index:c.length,point:a.point});var _=a.getLeftmostComparator(s);u=f.sort(_)[0].otherSE;break}i.push(new n(c))}}return i}}]);function n(e){Ye(this,n),this.events=e;for(var t=0,i=e.length;t<i;t++)e[t].segment.ringOut=this;this.poly=null}return xe(n,[{key:"getGeom",value:function(){for(var t=this.events[0].point,i=[t],r=1,o=this.events.length-1;r<o;r++){var l=this.events[r].point,s=this.events[r+1].point;nr(l,t,s)!==0&&(i.push(l),t=l)}if(i.length===1)return null;var a=i[0],u=i[1];nr(a,t,u)===0&&i.shift(),i.push(i[0]);for(var c=this.isExteriorRing()?1:-1,g=this.isExteriorRing()?0:i.length-1,h=this.isExteriorRing()?i.length:-1,f=[],d=g;d!=h;d+=c)f.push([i[d].x,i[d].y]);return f}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],i=1,r=this.events.length;i<r;i++){var o=this.events[i];je.compare(t,o)>0&&(t=o)}for(var l=t.segment.prevInResult(),s=l?l.prevInResult():null;;){if(!l)return null;if(!s)return l.ringOut;if(s.ringOut!==l.ringOut)return s.ringOut.enclosingRing()!==l.ringOut?l.ringOut:l.ringOut.enclosingRing();l=s.prevInResult(),s=l?l.prevInResult():null}}}]),n}(),sr=function(){function n(e){Ye(this,n),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return xe(n,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var i=0,r=this.interiorRings.length;i<r;i++){var o=this.interiorRings[i].getGeom();o!==null&&t.push(o)}return t}}]),n}(),gs=function(){function n(e){Ye(this,n),this.rings=e,this.polys=this._composePolys(e)}return xe(n,[{key:"getGeom",value:function(){for(var t=[],i=0,r=this.polys.length;i<r;i++){var o=this.polys[i].getGeom();o!==null&&t.push(o)}return t}},{key:"_composePolys",value:function(t){for(var i=[],r=0,o=t.length;r<o;r++){var l=t[r];if(!l.poly)if(l.isExteriorRing())i.push(new sr(l));else{var s=l.enclosingRing();s.poly||i.push(new sr(s)),s.poly.addInterior(l)}}return i}}]),n}(),bs=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:en.compare;Ye(this,n),this.queue=e,this.tree=new $n(t),this.segments=[]}return xe(n,[{key:"process",value:function(t){var i=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(i),r;var o=t.isLeft?this.tree.insert(i):this.tree.find(i);if(!o)throw new Error("Unable to find segment #".concat(i.id," ")+"[".concat(i.leftSE.point.x,", ").concat(i.leftSE.point.y,"] -> ")+"[".concat(i.rightSE.point.x,", ").concat(i.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var l=o,s=o,a=void 0,u=void 0;a===void 0;)l=this.tree.prev(l),l===null?a=null:l.key.consumedBy===void 0&&(a=l.key);for(;u===void 0;)s=this.tree.next(s),s===null?u=null:s.key.consumedBy===void 0&&(u=s.key);if(t.isLeft){var c=null;if(a){var g=a.getIntersection(i);if(g!==null&&(i.isAnEndpoint(g)||(c=g),!a.isAnEndpoint(g)))for(var h=this._splitSafely(a,g),f=0,d=h.length;f<d;f++)r.push(h[f])}var b=null;if(u){var w=u.getIntersection(i);if(w!==null&&(i.isAnEndpoint(w)||(b=w),!u.isAnEndpoint(w)))for(var A=this._splitSafely(u,w),m=0,p=A.length;m<p;m++)r.push(A[m])}if(c!==null||b!==null){var v=null;if(c===null)v=b;else if(b===null)v=c;else{var _=je.comparePoints(c,b);v=_<=0?c:b}this.queue.remove(i.rightSE),r.push(i.rightSE);for(var y=i.split(v),C=0,M=y.length;C<M;C++)r.push(y[C])}r.length>0?(this.tree.remove(i),r.push(t)):(this.segments.push(i),i.prev=a)}else{if(a&&u){var B=a.getIntersection(u);if(B!==null){if(!a.isAnEndpoint(B))for(var G=this._splitSafely(a,B),x=0,D=G.length;x<D;x++)r.push(G[x]);if(!u.isAnEndpoint(B))for(var F=this._splitSafely(u,B),O=0,q=F.length;O<q;O++)r.push(F[O])}}this.tree.remove(i)}return r}},{key:"_splitSafely",value:function(t,i){this.tree.remove(t);var r=t.rightSE;this.queue.remove(r);var o=t.split(i);return o.push(r),t.consumedBy===void 0&&this.tree.insert(t),o}}]),n}(),ar=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,vs=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,_s=function(){function n(){Ye(this,n)}return xe(n,[{key:"run",value:function(t,i,r){Ue.type=t,Nt.reset();for(var o=[new lr(i,!0)],l=0,s=r.length;l<s;l++)o.push(new lr(r[l],!1));if(Ue.numMultiPolys=o.length,Ue.type==="difference")for(var a=o[0],u=1;u<o.length;)An(o[u].bbox,a.bbox)!==null?u++:o.splice(u,1);if(Ue.type==="intersection"){for(var c=0,g=o.length;c<g;c++)for(var h=o[c],f=c+1,d=o.length;f<d;f++)if(An(h.bbox,o[f].bbox)===null)return[]}for(var b=new $n(je.compare),w=0,A=o.length;w<A;w++)for(var m=o[w].getSweepEvents(),p=0,v=m.length;p<v;p++)if(b.insert(m[p]),b.size>ar)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var _=new bs(b),y=b.size,C=b.pop();C;){var M=C.key;if(b.size===y){var B=M.segment;throw new Error("Unable to pop() ".concat(M.isLeft?"left":"right"," SweepEvent ")+"[".concat(M.point.x,", ").concat(M.point.y,"] from segment #").concat(B.id," ")+"[".concat(B.leftSE.point.x,", ").concat(B.leftSE.point.y,"] -> ")+"[".concat(B.rightSE.point.x,", ").concat(B.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(b.size>ar)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(_.segments.length>vs)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var G=_.process(M),x=0,D=G.length;x<D;x++){var F=G[x];F.consumedBy===void 0&&b.insert(F)}y=b.size,C=b.pop()}Nt.reset();var O=ps.factory(_.segments),q=new gs(O);return q.getGeom()}}]),n}(),Ue=new _s,ys=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return Ue.run("union",e,i)},ws=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return Ue.run("intersection",e,i)},ks=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return Ue.run("xor",e,i)},Ss=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return Ue.run("difference",e,i)},Wt={union:ys,intersection:ws,xor:ks,difference:Ss};function Es(n,e){var t=Ps(e),i=null;return n.type==="FeatureCollection"?i=Ms(n):i=Or(Wt.union(n.geometry.coordinates)),i.geometry.coordinates.forEach(function(r){t.geometry.coordinates.push(r[0])}),t}function Ms(n){var e=n.features.length===2?Wt.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):Wt.union.apply(Wt,n.features.map(function(t){return t.geometry.coordinates}));return Or(e)}function Or(n){return Zn(n)}function Ps(n){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],t=n&&n.geometry.coordinates||e;return dn(t)}const Ls={"line-cap":"round","line-join":"round"},ei=["==","$type","Polygon"],ti=["==","$type","LineString"],ni=["==","$type","Point"];function tn(n,e,t=1){return{type:"line",layout:Ls,paint:{"line-color":n,"line-width":e,"line-opacity":t}}}function ii(n,e){return{type:"fill",paint:{"fill-color":n,"fill-opacity":e}}}function Gt(n,e,t=1){return{type:"circle",paint:{"circle-radius":e,"circle-color":n,"circle-opacity":t}}}function Mt(n,e,t){if(n.getSource(e)){let i=[];for(let r of n.getStyle().layers)r.source==e&&i.push(r.id);for(let r of i)n.removeLayer(r);n.removeSource(e)}n.addSource(e,t)}function Fe(n,e,t=null){n.getLayer(e.id)&&n.removeLayer(e.id),t&&!n.getLayer(t)&&(t=null),n.addLayer(e,t)}function xs(n,e,t){let i;ge(n,Ze,l=>t(1,i=l));let{boundaryGeojson:r}=e;return an("setCamera")&&i.fitBounds(Wn(r),{padding:20,animate:!1}),Mt(i,"boundary",{type:"geojson",data:Es(r)}),Fe(i,{id:"boundary",source:"boundary",...ii("black",.5)}),n.$$set=l=>{"boundaryGeojson"in l&&t(0,r=l.boundaryGeojson)},[r]}class Ts extends ie{constructor(e){super(),re(this,e,xs,null,oe,{boundaryGeojson:0})}}function As(n){let e,t,i,r,o,l,s,a;return e=new Jt({props:{labelText:"Area",value:"area"}}),i=new Jt({props:{labelText:"Route",value:"route"}}),o=new Jt({props:{labelText:"Crossing",value:"crossing"}}),s=new Jt({props:{labelText:"Other",value:"other"}}),{c(){W(e.$$.fragment),t=N(),W(i.$$.fragment),r=N(),W(o.$$.fragment),l=N(),W(s.$$.fragment)},m(u,c){j(e,u,c),P(u,t,c),j(i,u,c),P(u,r,c),j(o,u,c),P(u,l,c),j(s,u,c),a=!0},p:ne,i(u){a||(R(e.$$.fragment,u),R(i.$$.fragment,u),R(o.$$.fragment,u),R(s.$$.fragment,u),a=!0)},o(u){z(e.$$.fragment,u),z(i.$$.fragment,u),z(o.$$.fragment,u),z(s.$$.fragment,u),a=!1},d(u){V(e,u),u&&L(t),V(i,u),u&&L(r),V(o,u),u&&L(l),V(s,u)}}}function ur(n){let e,t,i=fr(n[3])+"",r,o,l;return{c(){e=T("p"),t=H("Length: "),r=H(i),o=N(),l=T("br")},m(s,a){P(s,e,a),S(e,t),S(e,r),P(s,o,a),P(s,l,a)},p(s,a){a&8&&i!==(i=fr(s[3])+"")&&de(r,i)},d(s){s&&L(e),s&&L(o),s&&L(l)}}}function Cs(n){let e,t,i,r,o,l,s,a,u,c,g,h,f,d,b,w,A,m,p,v,_,y,C;function M(q){n[7](q)}let B={labelText:"Name"};n[0]!==void 0&&(B.value=n[0]),e=new Sl({props:B}),he.push(()=>ze(e,"value",M,n[0]));function G(q){n[8](q)}let x={$$slots:{default:[As]},$$scope:{ctx:n}};n[1]!==void 0&&(x.selected=n[1]),l=new ul({props:x}),he.push(()=>ze(l,"selected",G,n[1]));function D(q){n[9](q)}let F={labelText:"Description"};n[2]!==void 0&&(F.value=n[2]),g=new pl({props:F}),he.push(()=>ze(g,"value",D,n[2]));let O=n[3]&&ur(n);return{c(){W(e.$$.fragment),i=N(),r=T("br"),o=N(),W(l.$$.fragment),a=N(),u=T("br"),c=N(),W(g.$$.fragment),f=N(),d=T("br"),b=N(),O&&O.c(),w=N(),A=T("div"),m=T("button"),m.textContent="Delete",p=N(),v=T("button"),v.textContent="Save",I(m,"type","button"),I(v,"type","button"),ht(v,"float","right")},m(q,U){j(e,q,U),P(q,i,U),P(q,r,U),P(q,o,U),j(l,q,U),P(q,a,U),P(q,u,U),P(q,c,U),j(g,q,U),P(q,f,U),P(q,d,U),P(q,b,U),O&&O.m(q,U),P(q,w,U),P(q,A,U),S(A,m),S(A,p),S(A,v),n[11](A),_=!0,y||(C=[Y(m,"click",n[5]),Y(v,"click",n[10])],y=!0)},p(q,[U]){const se={};!t&&U&1&&(t=!0,se.value=q[0],De(()=>t=!1)),e.$set(se);const te={};U&4096&&(te.$$scope={dirty:U,ctx:q}),!s&&U&2&&(s=!0,te.selected=q[1],De(()=>s=!1)),l.$set(te);const le={};!h&&U&4&&(h=!0,le.value=q[2],De(()=>h=!1)),g.$set(le),q[3]?O?O.p(q,U):(O=ur(q),O.c(),O.m(w.parentNode,w)):O&&(O.d(1),O=null)},i(q){_||(R(e.$$.fragment,q),R(l.$$.fragment,q),R(g.$$.fragment,q),_=!0)},o(q){z(e.$$.fragment,q),z(l.$$.fragment,q),z(g.$$.fragment,q),_=!1},d(q){V(e,q),q&&L(i),q&&L(r),q&&L(o),V(l,q),q&&L(a),q&&L(u),q&&L(c),V(g,q),q&&L(f),q&&L(d),q&&L(b),O&&O.d(q),q&&L(w),q&&L(A),n[11](null),y=!1,Ae(C)}}}function fr(n){return n<1e3?Math.round(n)+" m":(n/1e3).toFixed(1)+"km"}function Rs(n,e,t){let{id:i}=e,{name:r}=e,{intervention_type:o}=e,{description:l}=e,{length_meters:s}=e,a;fn.subscribe(b=>{i==b&&setTimeout(()=>a==null?void 0:a.scrollIntoView({behavior:"smooth"}),1)});function u(){ue.update(b=>(b.features=b.features.filter(w=>w.id!=i),b)),st(null)}function c(b){r=b,t(0,r)}function g(b){o=b,t(1,o)}function h(b){l=b,t(2,l)}const f=()=>st(null);function d(b){he[b?"unshift":"push"](()=>{a=b,t(4,a)})}return n.$$set=b=>{"id"in b&&t(6,i=b.id),"name"in b&&t(0,r=b.name),"intervention_type"in b&&t(1,o=b.intervention_type),"description"in b&&t(2,l=b.description),"length_meters"in b&&t(3,s=b.length_meters)},[r,o,l,s,a,u,i,c,g,h,f,d]}class Os extends ie{constructor(e){super(),re(this,e,Rs,Cs,oe,{id:6,name:0,intervention_type:1,description:2,length_meters:3})}}function cr(n,e,t){const i=n.slice();return i[10]=e[t],i[11]=e,i[12]=t,i}function Ns(n){let e,t,i,r,o,l;function s(g){n[5](g,n[10])}function a(g){n[6](g,n[10])}function u(g){n[7](g,n[10])}let c={id:n[10].id,length_meters:n[10].properties.length_meters};return n[10].properties.name!==void 0&&(c.name=n[10].properties.name),n[10].properties.intervention_type!==void 0&&(c.intervention_type=n[10].properties.intervention_type),n[10].properties.description!==void 0&&(c.description=n[10].properties.description),e=new Os({props:c}),he.push(()=>ze(e,"name",s,n[10].properties.name)),he.push(()=>ze(e,"intervention_type",a,n[10].properties.intervention_type)),he.push(()=>ze(e,"description",u,n[10].properties.description)),{c(){W(e.$$.fragment),o=N()},m(g,h){j(e,g,h),P(g,o,h),l=!0},p(g,h){n=g;const f={};h&1&&(f.id=n[10].id),h&1&&(f.length_meters=n[10].properties.length_meters),!t&&h&1&&(t=!0,f.name=n[10].properties.name,De(()=>t=!1)),!i&&h&1&&(i=!0,f.intervention_type=n[10].properties.intervention_type,De(()=>i=!1)),!r&&h&1&&(r=!0,f.description=n[10].properties.description,De(()=>r=!1)),e.$set(f)},i(g){l||(R(e.$$.fragment,g),l=!0)},o(g){z(e.$$.fragment,g),l=!1},d(g){V(e,g),g&&L(o)}}}function Is(n){let e=n[12]+1+"",t,i,r=nn(n[10])+"",o;return{c(){t=H(e),i=H(") "),o=H(r)},m(l,s){P(l,t,s),P(l,i,s),P(l,o,s)},p(l,s){s&1&&e!==(e=l[12]+1+"")&&de(t,e),s&1&&r!==(r=nn(l[10])+"")&&de(o,r)},d(l){l&&L(t),l&&L(i),l&&L(o)}}}function Fs(n){let e,t=n[12]+1+"",i,r,o=nn(n[10])+"",l;return{c(){e=T("strong"),i=H(t),r=H(") "),l=H(o)},m(s,a){P(s,e,a),S(e,i),S(e,r),S(e,l)},p(s,a){a&1&&t!==(t=s[12]+1+"")&&de(i,t),a&1&&o!==(o=nn(s[10])+"")&&de(l,o)},d(s){s&&L(e)}}}function Bs(n){let e;function t(o,l){return o[10].id==o[1]?Fs:Is}let i=t(n),r=i(n);return{c(){r.c(),e=N()},m(o,l){r.m(o,l),P(o,e,l)},p(o,l){i===(i=t(o))&&r?r.p(o,l):(r.d(1),r=i(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){r.d(o),o&&L(e)}}}function dr(n,e){let t,i,r,o;function l(a){e[8](a,e[10])}let s={$$slots:{title:[Bs],default:[Ns]},$$scope:{ctx:e}};return e[10].properties.editing!==void 0&&(s.open=e[10].properties.editing),i=new Bo({props:s}),he.push(()=>ze(i,"open",l,e[10].properties.editing)),i.$on("click",function(){ci(e[3](e[10].id))&&e[3](e[10].id).apply(this,arguments)}),i.$on("mouseenter",function(){ci(e[2](e[10].id))&&e[2](e[10].id).apply(this,arguments)}),i.$on("mouseleave",e[2](null)),{key:n,first:null,c(){t=et(),W(i.$$.fragment),this.first=t},m(a,u){P(a,t,u),j(i,a,u),o=!0},p(a,u){e=a;const c={};u&8195&&(c.$$scope={dirty:u,ctx:e}),!r&&u&1&&(r=!0,c.open=e[10].properties.editing,De(()=>r=!1)),i.$set(c)},i(a){o||(R(i.$$.fragment,a),o=!0)},o(a){z(i.$$.fragment,a),o=!1},d(a){a&&L(t),V(i,a)}}}function zs(n){let e=[],t=new Map,i,r,o=n[0].features;const l=s=>s[10].id;for(let s=0;s<o.length;s+=1){let a=cr(n,o,s),u=l(a);t.set(u,e[s]=dr(u,a))}return{c(){for(let s=0;s<e.length;s+=1)e[s].c();i=et()},m(s,a){for(let u=0;u<e.length;u+=1)e[u].m(s,a);P(s,i,a),r=!0},p(s,a){a&15&&(o=s[0].features,Se(),e=Pr(e,a,l,1,s,o,t,i.parentNode,Lr,dr,i,cr),Ee())},i(s){if(!r){for(let a=0;a<o.length;a+=1)R(e[a]);r=!0}},o(s){for(let a=0;a<e.length;a+=1)z(e[a]);r=!1},d(s){for(let a=0;a<e.length;a+=1)e[a].d(s);s&&L(i)}}}function Ds(n){let e,t,i,r;return e=new Co({props:{$$slots:{default:[zs]},$$scope:{ctx:n}}}),{c(){W(e.$$.fragment)},m(o,l){j(e,o,l),t=!0,i||(r=Y(window,"keydown",n[4]),i=!0)},p(o,[l]){const s={};l&8195&&(s.$$scope={dirty:l,ctx:o}),e.$set(s)},i(o){t||(R(e.$$.fragment,o),t=!0)},o(o){z(e.$$.fragment,o),t=!1},d(o){V(e,o),i=!1,r()}}}function nn(n){if(n.properties.name)return n.properties.name;var e=n.properties.intervention_type;return e=="other"&&(n.geometry.type=="Point"?e="point":n.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function qs(n,e,t){let i,r,o;ge(n,fn,f=>t(9,i=f)),ge(n,ue,f=>t(0,r=f)),ge(n,Je,f=>t(1,o=f));function l(f){i==null&&Je.set(f)}function s(f){console.log(`Clicked ${f} from the sidebar; going to edit-attribute`),En.set(null),En.set(f);for(let d of r.features)d.properties.editing&&d.id!=f&&delete d.properties.editing;Je.set(f)}function a(f){const d=i;if(f.key=="Delete"){const b=f.originalTarget.tagName;if(b!="CANVAS"&&b!="BODY")return;f.preventDefault(),ue.update(w=>(w.features=w.features.filter(A=>A.id!=d),w))}}function u(f,d){n.$$.not_equal(d.properties.name,f)&&(d.properties.name=f,ue.set(r))}function c(f,d){n.$$.not_equal(d.properties.intervention_type,f)&&(d.properties.intervention_type=f,ue.set(r))}function g(f,d){n.$$.not_equal(d.properties.description,f)&&(d.properties.description=f,ue.set(r))}function h(f,d){n.$$.not_equal(d.properties.editing,f)&&(d.properties.editing=f,ue.set(r))}return[r,o,l,s,a,u,c,g,h]}class Gs extends ie{constructor(e){super(),re(this,e,qs,Ds,oe,{})}}function at(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function He(n){if(Array.isArray(n))return n;if(n.type==="Feature"){if(n.geometry!==null)return n.geometry.coordinates}else if(n.coordinates)return n.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Rn(n,e){return n.type==="FeatureCollection"?"FeatureCollection":n.type==="GeometryCollection"?"GeometryCollection":n.type==="Feature"&&n.geometry!==null?n.geometry.type:n.type}function rt(n,e,t){t===void 0&&(t={});var i=at(n),r=at(e),o=Be(r[1]-i[1]),l=Be(r[0]-i[0]),s=Be(i[1]),a=Be(r[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(s)*Math.cos(a);return Qn(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),t.units)}function pt(n,e,t){if(n!==null)for(var i,r,o,l,s,a,u,c=0,g=0,h,f=n.type,d=f==="FeatureCollection",b=f==="Feature",w=d?n.features.length:1,A=0;A<w;A++){u=d?n.features[A].geometry:b?n.geometry:n,h=u?u.type==="GeometryCollection":!1,s=h?u.geometries.length:1;for(var m=0;m<s;m++){var p=0,v=0;if(l=h?u.geometries[m]:u,l!==null){a=l.coordinates;var _=l.type;switch(c=t&&(_==="Polygon"||_==="MultiPolygon")?1:0,_){case null:break;case"Point":if(e(a,g,A,p,v)===!1)return!1;g++,p++;break;case"LineString":case"MultiPoint":for(i=0;i<a.length;i++){if(e(a[i],g,A,p,v)===!1)return!1;g++,_==="MultiPoint"&&p++}_==="LineString"&&p++;break;case"Polygon":case"MultiLineString":for(i=0;i<a.length;i++){for(r=0;r<a[i].length-c;r++){if(e(a[i][r],g,A,p,v)===!1)return!1;g++}_==="MultiLineString"&&p++,_==="Polygon"&&v++}_==="Polygon"&&p++;break;case"MultiPolygon":for(i=0;i<a.length;i++){for(v=0,r=0;r<a[i].length;r++){for(o=0;o<a[i][r].length-c;o++){if(e(a[i][r][o],g,A,p,v)===!1)return!1;g++}v++}p++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(pt(l.geometries[i],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ys(n,e,t,i){var r=t;return pt(n,function(o,l,s,a,u){l===0&&t===void 0?r=o:r=e(r,o,l,s,a,u)},i),r}function Nr(n,e){var t;switch(n.type){case"FeatureCollection":for(t=0;t<n.features.length&&e(n.features[t].properties,t)!==!1;t++);break;case"Feature":e(n.properties,0);break}}function Xs(n,e,t){var i=t;return Nr(n,function(r,o){o===0&&t===void 0?i=r:i=e(i,r,o)}),i}function St(n,e){if(n.type==="Feature")e(n,0);else if(n.type==="FeatureCollection")for(var t=0;t<n.features.length&&e(n.features[t],t)!==!1;t++);}function Ir(n,e,t){var i=t;return St(n,function(r,o){o===0&&t===void 0?i=r:i=e(i,r,o)}),i}function Js(n){var e=[];return pt(n,function(t){e.push(t)}),e}function ri(n,e){var t,i,r,o,l,s,a,u,c,g,h=0,f=n.type==="FeatureCollection",d=n.type==="Feature",b=f?n.features.length:1;for(t=0;t<b;t++){for(s=f?n.features[t].geometry:d?n.geometry:n,u=f?n.features[t].properties:d?n.properties:{},c=f?n.features[t].bbox:d?n.bbox:void 0,g=f?n.features[t].id:d?n.id:void 0,a=s?s.type==="GeometryCollection":!1,l=a?s.geometries.length:1,r=0;r<l;r++){if(o=a?s.geometries[r]:s,o===null){if(e(null,h,u,c,g)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(o,h,u,c,g)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<o.geometries.length;i++)if(e(o.geometries[i],h,u,c,g)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function Us(n,e,t){var i=t;return ri(n,function(r,o,l,s,a){o===0&&t===void 0?i=r:i=e(i,r,o,l,s,a)}),i}function gt(n,e){ri(n,function(t,i,r,o,l){var s=t===null?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return e(Ge(t,r,{bbox:o,id:l}),i,0)===!1?!1:void 0}var a;switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon";break}for(var u=0;u<t.coordinates.length;u++){var c=t.coordinates[u],g={type:a,coordinates:c};if(e(Ge(g,r),i,u)===!1)return!1}})}function Ws(n,e,t){var i=t;return gt(n,function(r,o,l){o===0&&l===0&&t===void 0?i=r:i=e(i,r,o,l)}),i}function Fr(n,e){gt(n,function(t,i,r){var o=0;if(t.geometry){var l=t.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var s,a=0,u=0,c=0;if(pt(t,function(g,h,f,d,b){if(s===void 0||i>a||d>u||b>c){s=g,a=i,u=d,c=b,o=0;return}var w=Le([s,g],t.properties);if(e(w,i,r,b,o)===!1)return!1;o++,s=g})===!1)return!1}}})}function Br(n,e,t){var i=t,r=!1;return Fr(n,function(o,l,s,a,u){r===!1&&t===void 0?i=o:i=e(i,o,l,s,a,u),r=!0}),i}function zr(n,e){if(!n)throw new Error("geojson is required");gt(n,function(t,i,r){if(t.geometry!==null){var o=t.geometry.type,l=t.geometry.coordinates;switch(o){case"LineString":if(e(t,i,r,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<l.length;s++)if(e(Le(l[s],t.properties),i,r,s)===!1)return!1;break}}})}function js(n,e,t){var i=t;return zr(n,function(r,o,l,s){o===0&&t===void 0?i=r:i=e(i,r,o,l,s)}),i}function Vs(n,e){if(e=e||{},!Kn(e))throw new Error("options is invalid");var t=e.featureIndex||0,i=e.multiFeatureIndex||0,r=e.geometryIndex||0,o=e.segmentIndex||0,l=e.properties,s;switch(n.type){case"FeatureCollection":t<0&&(t=n.features.length+t),l=l||n.features[t].properties,s=n.features[t].geometry;break;case"Feature":l=l||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var a=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return o<0&&(o=a.length+o-1),Le([a[o],a[o+1]],l,e);case"Polygon":return r<0&&(r=a.length+r),o<0&&(o=a[r].length+o-1),Le([a[r][o],a[r][o+1]],l,e);case"MultiLineString":return i<0&&(i=a.length+i),o<0&&(o=a[i].length+o-1),Le([a[i][o],a[i][o+1]],l,e);case"MultiPolygon":return i<0&&(i=a.length+i),r<0&&(r=a[i].length+r),o<0&&(o=a[i][r].length-o-1),Le([a[i][r][o],a[i][r][o+1]],l,e)}throw new Error("geojson is invalid")}function Hs(n,e){if(e=e||{},!Kn(e))throw new Error("options is invalid");var t=e.featureIndex||0,i=e.multiFeatureIndex||0,r=e.geometryIndex||0,o=e.coordIndex||0,l=e.properties,s;switch(n.type){case"FeatureCollection":t<0&&(t=n.features.length+t),l=l||n.features[t].properties,s=n.features[t].geometry;break;case"Feature":l=l||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var a=s.coordinates;switch(s.type){case"Point":return Me(a,l,e);case"MultiPoint":return i<0&&(i=a.length+i),Me(a[i],l,e);case"LineString":return o<0&&(o=a.length+o),Me(a[o],l,e);case"Polygon":return r<0&&(r=a.length+r),o<0&&(o=a[r].length+o),Me(a[r][o],l,e);case"MultiLineString":return i<0&&(i=a.length+i),o<0&&(o=a[i].length+o),Me(a[i][o],l,e);case"MultiPolygon":return i<0&&(i=a.length+i),r<0&&(r=a[i].length+r),o<0&&(o=a[i][r].length-o),Me(a[i][r][o],l,e)}throw new Error("geojson is invalid")}const Zs=Object.freeze(Object.defineProperty({__proto__:null,coordAll:Js,coordEach:pt,coordReduce:Ys,featureEach:St,featureReduce:Ir,findPoint:Hs,findSegment:Vs,flattenEach:gt,flattenReduce:Ws,geomEach:ri,geomReduce:Us,lineEach:zr,lineReduce:js,propEach:Nr,propReduce:Xs,segmentEach:Fr,segmentReduce:Br},Symbol.toStringTag,{value:"Module"}));function jt(n,e){return e===void 0&&(e={}),Br(n,function(t,i){var r=i.geometry.coordinates;return t+rt(r[0],r[1],e)},0)}function Qs(n){let e,t,i,r,o,l,s,a,u,c,g,h,f,d,b,w,A,m,p,v=n[0].features.length+"",_,y,C,M,B,G,x,D;return{c(){e=T("div"),t=T("label"),i=H(`Scheme name:
    `),r=T("input"),o=N(),l=T("br"),s=N(),a=T("div"),u=T("label"),c=T("input"),g=N(),h=T("button"),h.textContent="Load from GeoJSON",f=N(),d=T("button"),d.textContent="Export to GeoJSON",b=N(),w=T("br"),A=N(),m=T("div"),p=T("span"),_=H(v),y=H(" interventions"),C=N(),M=T("button"),B=H("Clear all"),I(r,"type","text"),I(c,"type","file"),I(c,"id","load_geojson"),I(c,"class","svelte-lhyd1e"),I(h,"type","button"),I(h,"onclick","document.getElementById('load_geojson').click();"),I(d,"type","button"),I(d,"class","align-right svelte-lhyd1e"),I(M,"type","button"),I(M,"class","align-right svelte-lhyd1e"),M.disabled=G=n[0].features.length==0},m(F,O){P(F,e,O),S(e,t),S(t,i),S(t,r),kt(r,n[0].scheme_name),P(F,o,O),P(F,l,O),P(F,s,O),P(F,a,O),S(a,u),S(u,c),S(u,g),S(u,h),S(a,f),S(a,d),P(F,b,O),P(F,w,O),P(F,A,O),P(F,m,O),S(m,p),S(p,_),S(p,y),S(m,C),S(m,M),S(M,B),x||(D=[Y(r,"input",n[5]),Y(c,"change",n[3]),Y(d,"click",n[2]),Y(M,"click",n[1])],x=!0)},p(F,[O]){O&1&&r.value!==F[0].scheme_name&&kt(r,F[0].scheme_name),O&1&&v!==(v=F[0].features.length+"")&&de(_,v),O&1&&G!==(G=F[0].features.length==0)&&(M.disabled=G)},i:ne,o:ne,d(F){F&&L(e),F&&L(o),F&&L(l),F&&L(s),F&&L(a),F&&L(b),F&&L(w),F&&L(A),F&&L(m),x=!1,Ae(D)}}}function Ks(n,e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(e)),t.setAttribute("download",n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function $s(n,e,t){let i;ge(n,ue,h=>t(0,i=h));let{authorityName:r}=e,o=window.localStorage.getItem(r);if(o)try{ue.set(c(JSON.parse(o)))}catch(h){console.log(`Failed to load from local storage: ${h}`)}function l(){confirm("Do you want to clear the current scheme? (You should save it first!)")&&ue.update(h=>(delete h.scheme_name,h.features=[],h))}function s(){const h=JSON.parse(JSON.stringify(i));for(let f of h.features)delete f.properties.editing,delete f.properties.hide_while_editing;return h}function a(){let h=s();var f=r;h.authority=r,h.origin="atip-v1",h.scheme_name&&(f+="_"+h.scheme_name),f+=".txt",Ks(f,JSON.stringify(h,null,"  "))}function u(h){const f=new FileReader;f.onload=d=>{try{ue.set(c(JSON.parse(d.target.result)))}catch(b){window.alert(`Couldn't load scheme from a file: ${b}`)}},f.readAsText(h.target.files[0])}function c(h){let f=1;for(let d of h.features)d.geometry.type=="LineString"&&!d.properties.length_meters&&(d.properties.length_meters=jt(d.geometry,{units:"kilometers"})*1e3),d.id=f++;return h}function g(){i.scheme_name=this.value,ue.set(i)}return n.$$set=h=>{"authorityName"in h&&t(4,r=h.authorityName)},n.$$.update=()=>{n.$$.dirty&17&&i&&(console.log("GJ changed, saving to local storage"),window.localStorage.setItem(r,JSON.stringify(s())))},[i,l,a,u,r,g]}class ea extends ie{constructor(e){super(),re(this,e,$s,Qs,oe,{authorityName:4})}}const ta="/atip/assets/zoom_out_map-b2e1091a.svg";function na(n){let e,t,i,r,o;return{c(){e=T("button"),t=T("img"),so(t.src,i=ta)||I(t,"src",i),I(t,"alt","Zoom to show entire boundary"),I(e,"type","button"),I(e,"title","Zoom to show entire boundary"),I(e,"class","svelte-qzjsqo")},m(l,s){P(l,e,s),S(e,t),r||(o=Y(e,"click",n[0]),r=!0)},p:ne,i:ne,o:ne,d(l){l&&L(e),r=!1,o()}}}function ia(n,e,t){let i;ge(n,Ze,l=>t(2,i=l));let{boundaryGeojson:r}=e;function o(){i.fitBounds(Wn(r),{padding:20,animate:!0,duration:500})}return n.$$set=l=>{"boundaryGeojson"in l&&t(1,r=l.boundaryGeojson)},[o,r]}class ra extends ie{constructor(e){super(),re(this,e,ia,na,oe,{boundaryGeojson:1})}}function oa(n){let e,t,i,r,o,l,s;return{c(){e=T("div"),t=H(`Basemap:
  `),i=T("select"),r=T("option"),r.textContent="Streets",o=T("option"),o.textContent="Satellite",r.__value="streets",r.value=r.__value,o.__value="hybrid",o.value=o.__value,n[0]===void 0&&ao(()=>n[2].call(i)),I(e,"class","svelte-1tbnm6i")},m(a,u){P(a,e,u),S(e,t),S(e,i),S(i,r),S(i,o),di(i,n[0]),l||(s=[Y(i,"change",n[2]),Y(i,"change",n[1])],l=!0)},p(a,[u]){u&1&&di(i,a[0])},i:ne,o:ne,d(a){a&&L(e),l=!1,Ae(s)}}}function la(n,e,t){let{style:i}=e;function r(){let l=new URLSearchParams(window.location.search);l.set("style",i);let s=`${window.location.pathname}?${l.toString()}${window.location.hash}`;window.location.href=s}function o(){i=uo(this),t(0,i)}return n.$$set=l=>{"style"in l&&t(0,i=l.style)},[i,r,o]}class sa extends ie{constructor(e){super(),re(this,e,la,oa,oe,{style:0})}}const Ce={area:"#e41a1c",route:"#377eb8",crossing:"#4daf4a",other:"#984ea3",hovering:"black",lineEndpointColor:"black"},mn=10,rn=10;function aa(n){let e,t,i,r,o,l,s,a,u,c,g,h,f,d,b,w,A,m,p;return{c(){e=T("div"),t=T("h1"),t.textContent="Interventions",i=N(),r=T("ul"),o=T("li"),l=T("span"),s=H("Areas"),a=N(),u=T("li"),c=T("span"),g=H("Routes"),h=N(),f=T("li"),d=T("span"),b=H("Crossings"),w=N(),A=T("li"),m=T("span"),p=H("Other"),I(t,"class","svelte-p551i1"),I(l,"class","svelte-p551i1"),ht(l,"background",Ce.area),I(c,"class","svelte-p551i1"),ht(c,"background",Ce.route),I(d,"class","svelte-p551i1"),ht(d,"background",Ce.crossing),I(m,"class","svelte-p551i1"),ht(m,"background",Ce.other),I(e,"class","svelte-p551i1")},m(v,_){P(v,e,_),S(e,t),S(e,i),S(e,r),S(r,o),S(o,l),S(o,s),S(r,a),S(r,u),S(u,c),S(u,g),S(r,h),S(r,f),S(f,d),S(f,b),S(r,w),S(r,A),S(A,m),S(A,p)},p:ne,i:ne,o:ne,d(v){v&&L(e)}}}class ua extends ie{constructor(e){super(),re(this,e,null,aa,oe,{})}}let bt="interventions";function fa(n,e,t){let i,r;ge(n,Ze,a=>t(0,i=a)),ge(n,ue,a=>t(1,r=a)),Mt(i,bt,{type:"geojson",data:r});const o=["match",["get","intervention_type"],"area",Ce.area,"route",Ce.route,"crossing",Ce.crossing,"other",Ce.other,"white"],l=["!=","hide_while_editing",!0];return Fe(i,{id:"interventions-points",source:bt,filter:["all",ni,l,["!=","endpoint",!0]],...Gt(o,mn)}),Fe(i,{id:"interventions-lines",source:bt,filter:["all",ti,l],...tn(o,rn)},"route-lines"),Fe(i,{id:"interventions-lines-endpoints",source:bt,filter:["==","endpoint",!0],type:"circle",paint:{"circle-radius":.5*rn,"circle-opacity":0,"circle-stroke-color":Ce.lineEndpointColor,"circle-stroke-width":2}}),Fe(i,{id:"interventions-polygons",source:bt,filter:["all",ei,l],...ii(o,.5)},"hover-polygons"),n.$$.update=()=>{if(n.$$.dirty&3){let a=JSON.parse(JSON.stringify(r)),u=[];for(let c of a.features)if(c.geometry.type=="LineString")for(let g of[c.geometry.coordinates[0],c.geometry.coordinates[c.geometry.coordinates.length-1]])u.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:g}});a.features=a.features.concat(u),i.getSource(bt).setData(a)}},[i,r]}class ca extends ie{constructor(e){super(),re(this,e,fa,null,oe,{})}}let vt="hover";function da(n,e,t){let i,r;return ge(n,Ze,o=>t(0,i=o)),ge(n,ue,o=>t(1,r=o)),Mt(i,vt,{type:"geojson",data:$e()}),Fe(i,{id:"hover-polygons",source:vt,filter:ei,...tn(Ce.hovering,.5*rn,1)}),Fe(i,{id:"hover-lines",source:vt,filter:ti,...tn(Ce.hovering,1.5*rn,1)},"interventions-lines"),Fe(i,{id:"hover-points",source:vt,filter:ni,...Gt(Ce.hovering,1.5*mn,1)},"interventions-points"),Je.subscribe(o=>{o!=null?i.getSource(vt).setData(r.features.find(l=>l.id==o)):i.getSource(vt).setData($e())}),[]}class ha extends ie{constructor(e){super(),re(this,e,da,null,oe,{})}}var Ft,On;class ma{constructor(e){ct(this,Ft);this.map=e,this.active=!1,this.eventListeners=[],this.cursor=null,e.on("mousemove",t=>{this.active&&(this.cursor=pa(t.lngLat.toArray()),me(this,Ft,On).call(this))}),e.on("click",t=>{if(this.active&&this.cursor){for(let i of this.eventListeners)i(this.cursor);this.stop()}}),this.source="edit-point-mode",Mt(e,this.source,{type:"geojson",data:$e()}),Fe(e,{id:"edit-point-mode",source:this.source,...Gt(Ce.hovering,mn,1)})}addEventListener(e){this.eventListeners.push(e)}tearDown(){this.map.removeLayer("edit-point-mode"),this.map.removeSource(this.source)}start(){this.active=!0}stop(){this.cursor=null,this.active=!1,me(this,Ft,On).call(this)}}Ft=new WeakSet,On=function(){let e=$e();this.cursor&&e.features.push(this.cursor),this.map.getSource(this.source).setData(e)};function pa(n){return{type:"Feature",properties:{},geometry:{type:"Point",coordinates:n}}}function Dr(n,e,t){if(t===void 0&&(t={}),t.final===!0)return ga(n,e);var i=at(n),r=at(e),o=Be(i[0]),l=Be(r[0]),s=Be(i[1]),a=Be(r[1]),u=Math.sin(l-o)*Math.cos(a),c=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(l-o);return Ot(Math.atan2(u,c))}function ga(n,e){var t=Dr(e,n);return t=(t+180)%360,t}function hr(n,e,t,i){i===void 0&&(i={});var r=at(n),o=Be(r[0]),l=Be(r[1]),s=Be(t),a=hn(e,i.units),u=Math.asin(Math.sin(l)*Math.cos(a)+Math.cos(l)*Math.sin(a)*Math.cos(s)),c=o+Math.atan2(Math.sin(s)*Math.sin(a)*Math.cos(l),Math.cos(a)-Math.sin(l)*Math.sin(u)),g=Ot(c),h=Ot(u);return Me([g,h],i.properties)}function Nn(n){if(!n)throw new Error("geojson is required");var e=[];return gt(n,function(t){ba(t,e)}),qe(e)}function ba(n,e){var t=[],i=n.geometry;if(i!==null){switch(i.type){case"Polygon":t=He(i);break;case"LineString":t=[He(i)]}t.forEach(function(r){var o=va(r,n.properties);o.forEach(function(l){l.id=e.length,e.push(l)})})}}function va(n,e){var t=[];return n.reduce(function(i,r){var o=Le([i,r],e);return o.bbox=_a(i,r),t.push(o),r}),t}function _a(n,e){var t=n[0],i=n[1],r=e[0],o=e[1],l=t<r?t:r,s=i<o?i:o,a=t>r?t:r,u=i>o?i:o;return[l,s,a,u]}var Et={},ya={get exports(){return Et},set exports(n){Et=n}},In={},wa={get exports(){return In},set exports(n){In=n}};(function(n,e){(function(t,i){n.exports=i()})(fo,function(){function t(m,p,v,_,y){(function C(M,B,G,x,D){for(;x>G;){if(x-G>600){var F=x-G+1,O=B-G+1,q=Math.log(F),U=.5*Math.exp(2*q/3),se=.5*Math.sqrt(q*U*(F-U)/F)*(O-F/2<0?-1:1),te=Math.max(G,Math.floor(B-O*U/F+se)),le=Math.min(x,Math.floor(B+(F-O)*U/F+se));C(M,B,te,le,D)}var fe=M[B],ae=G,E=x;for(i(M,G,B),D(M[x],fe)>0&&i(M,G,x);ae<E;){for(i(M,ae,E),ae++,E--;D(M[ae],fe)<0;)ae++;for(;D(M[E],fe)>0;)E--}D(M[G],fe)===0?i(M,G,E):i(M,++E,x),E<=B&&(G=E+1),B<=E&&(x=E-1)}})(m,p,v||0,_||m.length-1,y||r)}function i(m,p,v){var _=m[p];m[p]=m[v],m[v]=_}function r(m,p){return m<p?-1:m>p?1:0}var o=function(m){m===void 0&&(m=9),this._maxEntries=Math.max(4,m),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(m,p,v){if(!v)return p.indexOf(m);for(var _=0;_<p.length;_++)if(v(m,p[_]))return _;return-1}function s(m,p){a(m,0,m.children.length,p,m)}function a(m,p,v,_,y){y||(y=w(null)),y.minX=1/0,y.minY=1/0,y.maxX=-1/0,y.maxY=-1/0;for(var C=p;C<v;C++){var M=m.children[C];u(y,m.leaf?_(M):M)}return y}function u(m,p){return m.minX=Math.min(m.minX,p.minX),m.minY=Math.min(m.minY,p.minY),m.maxX=Math.max(m.maxX,p.maxX),m.maxY=Math.max(m.maxY,p.maxY),m}function c(m,p){return m.minX-p.minX}function g(m,p){return m.minY-p.minY}function h(m){return(m.maxX-m.minX)*(m.maxY-m.minY)}function f(m){return m.maxX-m.minX+(m.maxY-m.minY)}function d(m,p){return m.minX<=p.minX&&m.minY<=p.minY&&p.maxX<=m.maxX&&p.maxY<=m.maxY}function b(m,p){return p.minX<=m.maxX&&p.minY<=m.maxY&&p.maxX>=m.minX&&p.maxY>=m.minY}function w(m){return{children:m,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function A(m,p,v,_,y){for(var C=[p,v];C.length;)if(!((v=C.pop())-(p=C.pop())<=_)){var M=p+Math.ceil((v-p)/_/2)*_;t(m,M,p,v,y),C.push(p,M,M,v)}}return o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(m){var p=this.data,v=[];if(!b(m,p))return v;for(var _=this.toBBox,y=[];p;){for(var C=0;C<p.children.length;C++){var M=p.children[C],B=p.leaf?_(M):M;b(m,B)&&(p.leaf?v.push(M):d(m,B)?this._all(M,v):y.push(M))}p=y.pop()}return v},o.prototype.collides=function(m){var p=this.data;if(!b(m,p))return!1;for(var v=[];p;){for(var _=0;_<p.children.length;_++){var y=p.children[_],C=p.leaf?this.toBBox(y):y;if(b(m,C)){if(p.leaf||d(m,C))return!0;v.push(y)}}p=v.pop()}return!1},o.prototype.load=function(m){if(!m||!m.length)return this;if(m.length<this._minEntries){for(var p=0;p<m.length;p++)this.insert(m[p]);return this}var v=this._build(m.slice(),0,m.length-1,0);if(this.data.children.length)if(this.data.height===v.height)this._splitRoot(this.data,v);else{if(this.data.height<v.height){var _=this.data;this.data=v,v=_}this._insert(v,this.data.height-v.height-1,!0)}else this.data=v;return this},o.prototype.insert=function(m){return m&&this._insert(m,this.data.height-1),this},o.prototype.clear=function(){return this.data=w([]),this},o.prototype.remove=function(m,p){if(!m)return this;for(var v,_,y,C=this.data,M=this.toBBox(m),B=[],G=[];C||B.length;){if(C||(C=B.pop(),_=B[B.length-1],v=G.pop(),y=!0),C.leaf){var x=l(m,C.children,p);if(x!==-1)return C.children.splice(x,1),B.push(C),this._condense(B),this}y||C.leaf||!d(C,M)?_?(v++,C=_.children[v],y=!1):C=null:(B.push(C),G.push(v),v=0,_=C,C=C.children[0])}return this},o.prototype.toBBox=function(m){return m},o.prototype.compareMinX=function(m,p){return m.minX-p.minX},o.prototype.compareMinY=function(m,p){return m.minY-p.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(m){return this.data=m,this},o.prototype._all=function(m,p){for(var v=[];m;)m.leaf?p.push.apply(p,m.children):v.push.apply(v,m.children),m=v.pop();return p},o.prototype._build=function(m,p,v,_){var y,C=v-p+1,M=this._maxEntries;if(C<=M)return s(y=w(m.slice(p,v+1)),this.toBBox),y;_||(_=Math.ceil(Math.log(C)/Math.log(M)),M=Math.ceil(C/Math.pow(M,_-1))),(y=w([])).leaf=!1,y.height=_;var B=Math.ceil(C/M),G=B*Math.ceil(Math.sqrt(M));A(m,p,v,G,this.compareMinX);for(var x=p;x<=v;x+=G){var D=Math.min(x+G-1,v);A(m,x,D,B,this.compareMinY);for(var F=x;F<=D;F+=B){var O=Math.min(F+B-1,D);y.children.push(this._build(m,F,O,_-1))}}return s(y,this.toBBox),y},o.prototype._chooseSubtree=function(m,p,v,_){for(;_.push(p),!p.leaf&&_.length-1!==v;){for(var y=1/0,C=1/0,M=void 0,B=0;B<p.children.length;B++){var G=p.children[B],x=h(G),D=(F=m,O=G,(Math.max(O.maxX,F.maxX)-Math.min(O.minX,F.minX))*(Math.max(O.maxY,F.maxY)-Math.min(O.minY,F.minY))-x);D<C?(C=D,y=x<y?x:y,M=G):D===C&&x<y&&(y=x,M=G)}p=M||p.children[0]}var F,O;return p},o.prototype._insert=function(m,p,v){var _=v?m:this.toBBox(m),y=[],C=this._chooseSubtree(_,this.data,p,y);for(C.children.push(m),u(C,_);p>=0&&y[p].children.length>this._maxEntries;)this._split(y,p),p--;this._adjustParentBBoxes(_,y,p)},o.prototype._split=function(m,p){var v=m[p],_=v.children.length,y=this._minEntries;this._chooseSplitAxis(v,y,_);var C=this._chooseSplitIndex(v,y,_),M=w(v.children.splice(C,v.children.length-C));M.height=v.height,M.leaf=v.leaf,s(v,this.toBBox),s(M,this.toBBox),p?m[p-1].children.push(M):this._splitRoot(v,M)},o.prototype._splitRoot=function(m,p){this.data=w([m,p]),this.data.height=m.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(m,p,v){for(var _,y,C,M,B,G,x,D=1/0,F=1/0,O=p;O<=v-p;O++){var q=a(m,0,O,this.toBBox),U=a(m,O,v,this.toBBox),se=(y=q,C=U,M=void 0,B=void 0,G=void 0,x=void 0,M=Math.max(y.minX,C.minX),B=Math.max(y.minY,C.minY),G=Math.min(y.maxX,C.maxX),x=Math.min(y.maxY,C.maxY),Math.max(0,G-M)*Math.max(0,x-B)),te=h(q)+h(U);se<D?(D=se,_=O,F=te<F?te:F):se===D&&te<F&&(F=te,_=O)}return _||v-p},o.prototype._chooseSplitAxis=function(m,p,v){var _=m.leaf?this.compareMinX:c,y=m.leaf?this.compareMinY:g;this._allDistMargin(m,p,v,_)<this._allDistMargin(m,p,v,y)&&m.children.sort(_)},o.prototype._allDistMargin=function(m,p,v,_){m.children.sort(_);for(var y=this.toBBox,C=a(m,0,p,y),M=a(m,v-p,v,y),B=f(C)+f(M),G=p;G<v-p;G++){var x=m.children[G];u(C,m.leaf?y(x):x),B+=f(C)}for(var D=v-p-1;D>=p;D--){var F=m.children[D];u(M,m.leaf?y(F):F),B+=f(M)}return B},o.prototype._adjustParentBBoxes=function(m,p,v){for(var _=v;_>=0;_--)u(p[_],m)},o.prototype._condense=function(m){for(var p=m.length-1,v=void 0;p>=0;p--)m[p].children.length===0?p>0?(v=m[p-1].children).splice(v.indexOf(m[p]),1):this.clear():s(m[p],this.toBBox)},o})})(wa);const ka=jn(ts),Sa=jn(Zs);function on(n){var e=[1/0,1/0,-1/0,-1/0];return pt(n,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}on.default=on;const Ea=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"})),Ma=jn(Ea);var We=In,qr=ka,Gr=Sa,_t=Ma.default,Pa=Gr.featureEach;Gr.coordEach;qr.polygon;var mr=qr.featureCollection;function Yr(n){var e=new We(n);return e.insert=function(t){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:_t(t),We.prototype.insert.call(this,t)},e.load=function(t){var i=[];return Array.isArray(t)?t.forEach(function(r){if(r.type!=="Feature")throw new Error("invalid features");r.bbox=r.bbox?r.bbox:_t(r),i.push(r)}):Pa(t,function(r){if(r.type!=="Feature")throw new Error("invalid features");r.bbox=r.bbox?r.bbox:_t(r),i.push(r)}),We.prototype.load.call(this,i)},e.remove=function(t,i){if(t.type!=="Feature")throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:_t(t),We.prototype.remove.call(this,t,i)},e.clear=function(){return We.prototype.clear.call(this)},e.search=function(t){var i=We.prototype.search.call(this,this.toBBox(t));return mr(i)},e.collides=function(t){return We.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=We.prototype.all.call(this);return mr(t)},e.toJSON=function(){return We.prototype.toJSON.call(this)},e.fromJSON=function(t){return We.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var i;if(t.bbox)i=t.bbox;else if(Array.isArray(t)&&t.length===4)i=t;else if(Array.isArray(t)&&t.length===6)i=[t[0],t[1],t[3],t[4]];else if(t.type==="Feature")i=_t(t);else if(t.type==="FeatureCollection")i=_t(t);else throw new Error("invalid geojson");return{minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}},e}ya.exports=Yr;Et.default=Yr;function Xr(n,e){var t={},i=[];if(n.type==="LineString"&&(n=Ge(n)),e.type==="LineString"&&(e=Ge(e)),n.type==="Feature"&&e.type==="Feature"&&n.geometry!==null&&e.geometry!==null&&n.geometry.type==="LineString"&&e.geometry.type==="LineString"&&n.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var r=pr(n,e);return r&&i.push(r),qe(i)}var o=Et();return o.load(Nn(e)),St(Nn(n),function(l){St(o.search(l),function(s){var a=pr(l,s);if(a){var u=He(a).join(",");t[u]||(t[u]=!0,i.push(a))}})}),qe(i)}function pr(n,e){var t=He(n),i=He(e);if(t.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(i.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=t[0][0],o=t[0][1],l=t[1][0],s=t[1][1],a=i[0][0],u=i[0][1],c=i[1][0],g=i[1][1],h=(g-u)*(l-r)-(c-a)*(s-o),f=(c-a)*(o-u)-(g-u)*(r-a),d=(l-r)*(o-u)-(s-o)*(r-a);if(h===0)return f===0&&d===0,null;var b=f/h,w=d/h;if(b>=0&&b<=1&&w>=0&&w<=1){var A=r+b*(l-r),m=o+b*(s-o);return Me([A,m])}return null}function It(n,e,t){t===void 0&&(t={});var i=Me([1/0,1/0],{dist:1/0}),r=0;return gt(n,function(o){for(var l=He(o),s=0;s<l.length-1;s++){var a=Me(l[s]);a.properties.dist=rt(e,a,t);var u=Me(l[s+1]);u.properties.dist=rt(e,u,t);var c=rt(a,u,t),g=Math.max(a.properties.dist,u.properties.dist),h=Dr(a,u),f=hr(e,g,h+90,t),d=hr(e,g,h-90,t),b=Xr(Le([f.geometry.coordinates,d.geometry.coordinates]),Le([a.geometry.coordinates,u.geometry.coordinates])),w=null;b.features.length>0&&(w=b.features[0],w.properties.dist=rt(e,w,t),w.properties.location=r+rt(a,w,t)),a.properties.dist<i.properties.dist&&(i=a,i.properties.index=s,i.properties.location=r),u.properties.dist<i.properties.dist&&(i=u,i.properties.index=s+1,i.properties.location=r+c),w&&w.properties.dist<i.properties.dist&&(i=w,i.properties.index=s),r+=c}}),i}var Qe,dt,Bt,Fn,zt,Bn;class La{constructor(e){ct(this,Qe);ct(this,Bt);ct(this,zt);this.map=e,this.active=!1,this.eventListeners=[],this.points=[],this.cursor=null,this.hoverPolyon=!1,this.hoverPoint=null,this.dragging=!1,this.dragFrom=null,e.on("mousemove",t=>{if(this.active&&!this.dragging)me(this,Bt,Fn).call(this,t);else if(this.active&&this.dragging){if(this.hoverPolyon){let i=this.dragFrom[0]-t.lngLat.lng,r=this.dragFrom[1]-t.lngLat.lat;for(let o of this.points)o[0]-=i,o[1]-=r}else this.points[this.hoverPoint]=t.lngLat.toArray();this.dragFrom=t.lngLat.toArray(),me(this,Qe,dt).call(this)}}),e.on("click",t=>{if(this.active&&this.cursor){let i=[];if(br(this.points).forEach((r,o)=>{i.push([o+1,It(r,this.cursor).properties.dist])}),i.sort((r,o)=>r[1]-o[1]),i.length>0){let r=i[0][0];this.points.splice(r,0,this.cursor.geometry.coordinates),this.hoverPoint=r}else this.points.push(this.cursor.geometry.coordinates),this.hoverPoint=this.points.length-1;me(this,Qe,dt).call(this)}else this.active&&this.hoverPoint!=null&&(this.points.splice(this.hoverPoint,1),this.hoverPoint=null,me(this,Qe,dt).call(this),me(this,Bt,Fn).call(this,t))}),e.on("mousedown",t=>{this.active&&!this.dragging&&(this.hoverPolyon||this.hoverPoint!=null)&&(t.preventDefault(),this.cursor=null,this.dragging=!0,this.dragFrom=t.lngLat.toArray())}),e.on("mouseup",t=>{this.active&&this.dragging&&(this.dragging=!1,this.dragFrom=null)}),document.addEventListener("keypress",t=>{if(this.active&&t.key=="Enter"){t.preventDefault();let i=me(this,zt,Bn).call(this);if(i)for(let r of this.eventListeners)r(i);this.stop()}}),this.source="edit-polygon-mode",Mt(e,this.source,{type:"geojson",data:$e()}),Fe(e,{id:"edit-polygon-fill",source:this.source,filter:ei,...ii("red",["case",["boolean",["get","hover"],"false"],1,.5])}),Fe(e,{id:"edit-polygon-lines",source:this.source,filter:ti,...tn("black",8,.5)}),Fe(e,{id:"edit-polygon-vertices",source:this.source,filter:ni,...Gt(Ce.hovering,mn,["case",["boolean",["get","hover"],"false"],1,.5])})}addEventListener(e){this.eventListeners.push(e)}tearDown(){this.map.removeLayer("edit-polygon-vertices"),this.map.removeLayer("edit-polygon-fill"),this.map.removeLayer("edit-polygon-lines"),this.map.removeSource(this.source)}startNew(){this.active=!0}editExisting(e){this.active=!0,this.points=e.geometry.coordinates[0],this.points.pop(),me(this,Qe,dt).call(this)}stop(){this.points=[],this.cursor=null,this.active=!1,this.hoverPolyon=!1,this.hoverPoint=null,this.dragging=!1,this.dragFrom=null,me(this,Qe,dt).call(this)}}Qe=new WeakSet,dt=function(){let e=$e();this.points.forEach((i,r)=>{let o=gr(i);o.properties.hover=this.hoverPoint==r,o.properties.idx=r,e.features.push(o)}),this.cursor&&e.features.push(this.cursor),e.features=e.features.concat(br(this.points));let t=me(this,zt,Bn).call(this);t&&(t.properties.hover=this.hoverPolyon,e.features.push(t)),this.map.getSource(this.source).setData(e)},Bt=new WeakSet,Fn=function(e){this.cursor=null,this.hoverPolyon=!1,this.hoverPoint=null;for(let t of this.map.queryRenderedFeatures(e.point,{layers:["edit-polygon-fill","edit-polygon-vertices"]}))if(t.geometry.type=="Polygon"){this.hoverPolyon=!0;break}else if(t.geometry.type=="Point"&&t.properties.hasOwnProperty("idx")){this.hoverPoint=t.properties.idx;break}!this.hoverPolyon&&this.hoverPoint==null&&(this.cursor=gr(e.lngLat.toArray())),me(this,Qe,dt).call(this)},zt=new WeakSet,Bn=function(){if(this.points.length<3)return null;let e={type:"Feature",geometry:{type:"Polygon",coordinates:[JSON.parse(JSON.stringify(this.points))]},properties:{}};return e.geometry.coordinates[0].push(e.geometry.coordinates[0][0]),e};function gr(n){return{type:"Feature",properties:{},geometry:{type:"Point",coordinates:n}}}function br(n){let e=[];for(let t=0;t<n.length-1;t++)e.push({type:"Feature",geometry:{type:"LineString",coordinates:[n[t],n[t+1]]}});return n.length>=3&&e.push({type:"Feature",geometry:{type:"LineString",coordinates:[n[n.length-1],n[0]]}}),e}function vr(n){let e;return{c(){e=T("p"),e.textContent="Click an intervention to fill out its attributes"},m(t,i){P(t,e,i)},d(t){t&&L(e)}}}function xa(n){let e,t=n[0]==yt&&vr();return{c(){t&&t.c(),e=et()},m(i,r){t&&t.m(i,r),P(i,e,r)},p(i,[r]){i[0]==yt?t||(t=vr(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ne,o:ne,d(i){t&&t.d(i),i&&L(e)}}}const yt="edit-attribute";function Jr(){}function Ta(n,e,t){let i,r,o;ge(n,Ze,u=>t(4,i=u)),ge(n,ue,u=>t(5,r=u)),ge(n,fn,u=>t(6,o=u));let{mode:l}=e,{changeMode:s}=e;function a(){st(null)}return i.on("mousemove",u=>{if(l==yt&&o==null){let g=i.queryRenderedFeatures(u.point,{layers:["interventions-points","interventions-lines","interventions-polygons"]});var c=null;g.length>0&&(c=g[0].id),Je.set(c)}}),i.on("mouseout",()=>{l==yt&&o==null&&Je.set(null)}),i.on("click",u=>{if(l==yt){let c=i.queryRenderedFeatures(u.point,{layers:["interventions-points","interventions-lines","interventions-polygons"]});c.length>0?st(c[0].id):st(null)}}),En.subscribe(u=>{if(u){let c=r.features.find(g=>g.id==u);c.geometry.type=="Point"?i.flyTo({center:c.geometry.coordinates}):i.fitBounds(Wn(c),{padding:200,animate:!0,duration:500}),s(yt)}}),n.$$set=u=>{"mode"in u&&t(0,l=u.mode),"changeMode"in u&&t(1,s=u.changeMode)},[l,s,Jr,a]}class Aa extends ie{constructor(e){super(),re(this,e,Ta,xa,oe,{mode:0,changeMode:1,start:2,stop:3})}get start(){return Jr}get stop(){return this.$$.ctx[3]}}function _r(n){let e;return{c(){e=T("p"),e.textContent="Click an intervention to edit its geometry"},m(t,i){P(t,e,i)},d(t){t&&L(e)}}}function Ca(n){let e,t=n[0]==nt&&_r();return{c(){t&&t.c(),e=et()},m(i,r){t&&t.m(i,r),P(i,e,r)},p(i,[r]){i[0]==nt?t||(t=_r(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ne,o:ne,d(i){t&&t.d(i),i&&L(e)}}}const nt="edit-geometry";function Ur(){}function Ra(n,e,t){let i;ge(n,Ze,h=>t(8,i=h));let{mode:r}=e,{routeSnapper:o}=e,{snapTool:l}=e,{pointTool:s}=e,{polygonTool:a}=e;function u(){c&&(o.stop(),s.stop(),a.stop(),ue.update(h=>{let f=h.features.find(d=>d.id==c);return delete f.properties.hide_while_editing,h})),c=null,Je.set(null)}let c=null;i.on("mousemove",h=>{if(r==nt&&c==null){let d=i.queryRenderedFeatures(h.point,{layers:["interventions-points","interventions-lines","interventions-polygons"]});var f=null;d.length>0&&(f=d[0].id),Je.set(f)}}),i.on("mouseout",()=>{r==nt&&c==null&&Je.set(null)}),i.on("click",h=>{if(r==nt&&c==null){let f=i.queryRenderedFeatures(h.point,{layers:["interventions-points","interventions-lines","interventions-polygons"]});f.length>0&&g(f[0].id)}}),l.addEventListener("new-route",h=>{if(r==nt){const f=h.detail;ue.update(d=>{let b=d.features.find(w=>w.id==c);return b.properties.length_meters=f.properties.length_meters,b.properties.waypoints=f.properties.waypoints,delete b.properties.hide_while_editing,b.geometry=f.geometry,d}),c=null}}),l.addEventListener("no-new-route",()=>{r==nt&&(ue.update(h=>{let f=h.features.find(d=>d.id==c);return delete f.properties.hide_while_editing,h}),c=null)});for(let h of[s,a])h.addEventListener(f=>{r==nt&&(ue.update(d=>{let b=d.features.find(w=>w.id==c);return b.geometry=f.geometry,delete b.properties.hide_while_editing,d}),c=null)});function g(h){Je.set(null);let f;ue.update(d=>(f=d.features.find(b=>b.id==h),f.properties.hide_while_editing=!0,d)),c=h,f.geometry.type=="LineString"?o.editExisting(f):f.geometry.type=="Polygon"?a.editExisting(f):f.geometry.type=="Point"&&s.start()}return n.$$set=h=>{"mode"in h&&t(0,r=h.mode),"routeSnapper"in h&&t(1,o=h.routeSnapper),"snapTool"in h&&t(2,l=h.snapTool),"pointTool"in h&&t(3,s=h.pointTool),"polygonTool"in h&&t(4,a=h.polygonTool)},[r,o,l,s,a,Ur,u]}class Oa extends ie{constructor(e){super(),re(this,e,Ra,Ca,oe,{mode:0,routeSnapper:1,snapTool:2,pointTool:3,polygonTool:4,start:5,stop:6})}get start(){return Ur}get stop(){return this.$$.ctx[6]}}let K;const Wr=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Wr.decode();let Vt=new Uint8Array;function Ct(){return Vt.byteLength===0&&(Vt=new Uint8Array(K.memory.buffer)),Vt}function wt(n,e){return Wr.decode(Ct().subarray(n,n+e))}const Ke=new Array(32).fill(void 0);Ke.push(void 0,null,!0,!1);let Rt=Ke.length;function ve(n){Rt===Ke.length&&Ke.push(Ke.length+1);const e=Rt;return Rt=Ke[e],Ke[e]=n,e}function ee(n){return Ke[n]}function Na(n){n<36||(Ke[n]=Rt,Rt=n)}function zn(n){const e=ee(n);return Na(n),e}function _n(n){return n==null}let Ht=new Float64Array;function Ia(){return Ht.byteLength===0&&(Ht=new Float64Array(K.memory.buffer)),Ht}let Zt=new Int32Array;function _e(){return Zt.byteLength===0&&(Zt=new Int32Array(K.memory.buffer)),Zt}let lt=0;const Qt=new TextEncoder("utf-8"),Fa=typeof Qt.encodeInto=="function"?function(n,e){return Qt.encodeInto(n,e)}:function(n,e){const t=Qt.encode(n);return e.set(t),{read:n.length,written:t.length}};function Ut(n,e,t){if(t===void 0){const s=Qt.encode(n),a=e(s.length);return Ct().subarray(a,a+s.length).set(s),lt=s.length,a}let i=n.length,r=e(i);const o=Ct();let l=0;for(;l<i;l++){const s=n.charCodeAt(l);if(s>127)break;o[r+l]=s}if(l!==i){l!==0&&(n=n.slice(l)),r=t(r,i,i=l+n.length*3);const s=Ct().subarray(r+l,r+i),a=Fa(n,s);l+=a.written}return lt=l,r}function Dn(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const r=n.description;return r==null?"Symbol":`Symbol(${r})`}if(e=="function"){const r=n.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(n)){const r=n.length;let o="[";r>0&&(o+=Dn(n[0]));for(let l=1;l<r;l++)o+=", "+Dn(n[l]);return o+="]",o}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let i;if(t.length>1)i=t[1];else return toString.call(n);if(i=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:i}function Ba(n,e){const t=e(n.length*1);return Ct().set(n,t/1),lt=n.length,t}function yn(n,e){try{return n.apply(this,e)}catch(t){K.__wbindgen_exn_store(ve(t))}}class ln{static __wrap(e){const t=Object.create(ln.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();K.__wbg_jsroutesnapper_free(e)}constructor(e){try{const o=K.__wbindgen_add_to_stack_pointer(-16),l=Ba(e,K.__wbindgen_malloc),s=lt;K.jsroutesnapper_new(o,l,s);var t=_e()[o/4+0],i=_e()[o/4+1],r=_e()[o/4+2];if(r)throw zn(i);return ln.__wrap(t)}finally{K.__wbindgen_add_to_stack_pointer(16)}}setConfig(e){K.jsroutesnapper_setConfig(this.ptr,ve(e))}toFinalFeature(){try{const i=K.__wbindgen_add_to_stack_pointer(-16);K.jsroutesnapper_toFinalFeature(i,this.ptr);var e=_e()[i/4+0],t=_e()[i/4+1];let r;return e!==0&&(r=wt(e,t).slice(),K.__wbindgen_free(e,t*1)),r}finally{K.__wbindgen_add_to_stack_pointer(16)}}renderGeojson(){try{const i=K.__wbindgen_add_to_stack_pointer(-16);K.jsroutesnapper_renderGeojson(i,this.ptr);var e=_e()[i/4+0],t=_e()[i/4+1];return wt(e,t)}finally{K.__wbindgen_add_to_stack_pointer(16),K.__wbindgen_free(e,t)}}setSnapMode(e){K.jsroutesnapper_setSnapMode(this.ptr,e)}onMouseMove(e,t,i){return K.jsroutesnapper_onMouseMove(this.ptr,e,t,i)!==0}onClick(){K.jsroutesnapper_onClick(this.ptr)}onDragStart(){return K.jsroutesnapper_onDragStart(this.ptr)!==0}onMouseUp(){return K.jsroutesnapper_onMouseUp(this.ptr)!==0}clearState(){K.jsroutesnapper_clearState(this.ptr)}editExisting(e){try{const r=K.__wbindgen_add_to_stack_pointer(-16);K.jsroutesnapper_editExisting(r,this.ptr,ve(e));var t=_e()[r/4+0],i=_e()[r/4+1];if(i)throw zn(t)}finally{K.__wbindgen_add_to_stack_pointer(16)}}}async function za(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(i){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i);else throw i}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function Da(){const n={};return n.wbg={},n.wbg.__wbindgen_string_new=function(e,t){const i=wt(e,t);return ve(i)},n.wbg.__wbindgen_object_drop_ref=function(e){zn(e)},n.wbg.__wbindgen_boolean_get=function(e){const t=ee(e);return typeof t=="boolean"?t?1:0:2},n.wbg.__wbindgen_error_new=function(e,t){const i=new Error(wt(e,t));return ve(i)},n.wbg.__wbindgen_is_object=function(e){const t=ee(e);return typeof t=="object"&&t!==null},n.wbg.__wbindgen_is_undefined=function(e){return ee(e)===void 0},n.wbg.__wbindgen_in=function(e,t){return ee(e)in ee(t)},n.wbg.__wbindgen_number_get=function(e,t){const i=ee(t),r=typeof i=="number"?i:void 0;Ia()[e/8+1]=_n(r)?0:r,_e()[e/4+0]=!_n(r)},n.wbg.__wbindgen_jsval_loose_eq=function(e,t){return ee(e)==ee(t)},n.wbg.__wbindgen_string_get=function(e,t){const i=ee(t),r=typeof i=="string"?i:void 0;var o=_n(r)?0:Ut(r,K.__wbindgen_malloc,K.__wbindgen_realloc),l=lt;_e()[e/4+1]=l,_e()[e/4+0]=o},n.wbg.__wbg_String_91fba7ded13ba54c=function(e,t){const i=String(ee(t)),r=Ut(i,K.__wbindgen_malloc,K.__wbindgen_realloc),o=lt;_e()[e/4+1]=o,_e()[e/4+0]=r},n.wbg.__wbindgen_object_clone_ref=function(e){const t=ee(e);return ve(t)},n.wbg.__wbg_getwithrefkey_15c62c2b8546208d=function(e,t){const i=ee(e)[ee(t)];return ve(i)},n.wbg.__wbg_log_4b5638ad60bdc54a=function(e){console.log(ee(e))},n.wbg.__wbg_get_57245cc7d7c7619d=function(e,t){const i=ee(e)[t>>>0];return ve(i)},n.wbg.__wbg_length_6e3bbe7c8bd4dbd8=function(e){return ee(e).length},n.wbg.__wbindgen_is_function=function(e){return typeof ee(e)=="function"},n.wbg.__wbg_next_579e583d33566a86=function(e){const t=ee(e).next;return ve(t)},n.wbg.__wbg_next_aaef7c8aa5e212ac=function(){return yn(function(e){const t=ee(e).next();return ve(t)},arguments)},n.wbg.__wbg_done_1b73b0672e15f234=function(e){return ee(e).done},n.wbg.__wbg_value_1ccc36bc03462d71=function(e){const t=ee(e).value;return ve(t)},n.wbg.__wbg_iterator_6f9d4f28845f426c=function(){return ve(Symbol.iterator)},n.wbg.__wbg_get_765201544a2b6869=function(){return yn(function(e,t){const i=Reflect.get(ee(e),ee(t));return ve(i)},arguments)},n.wbg.__wbg_call_97ae9d8645dc388b=function(){return yn(function(e,t){const i=ee(e).call(ee(t));return ve(i)},arguments)},n.wbg.__wbg_isArray_27c46c67f498e15d=function(e){return Array.isArray(ee(e))},n.wbg.__wbg_instanceof_ArrayBuffer_e5e48f4762c5610b=function(e){let t;try{t=ee(e)instanceof ArrayBuffer}catch{t=!1}return t},n.wbg.__wbg_buffer_3f3d764d4747d564=function(e){const t=ee(e).buffer;return ve(t)},n.wbg.__wbg_new_8c3f0052272a457a=function(e){const t=new Uint8Array(ee(e));return ve(t)},n.wbg.__wbg_set_83db9690f9353e79=function(e,t,i){ee(e).set(ee(t),i>>>0)},n.wbg.__wbg_length_9e1ae1900cb0fbd5=function(e){return ee(e).length},n.wbg.__wbg_instanceof_Uint8Array_971eeda69eb75003=function(e){let t;try{t=ee(e)instanceof Uint8Array}catch{t=!1}return t},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return ve(e)},n.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const i=ee(t).stack,r=Ut(i,K.__wbindgen_malloc,K.__wbindgen_realloc),o=lt;_e()[e/4+1]=o,_e()[e/4+0]=r},n.wbg.__wbg_error_f851667af71bcfc6=function(e,t){try{console.error(wt(e,t))}finally{K.__wbindgen_free(e,t)}},n.wbg.__wbindgen_debug_string=function(e,t){const i=Dn(ee(t)),r=Ut(i,K.__wbindgen_malloc,K.__wbindgen_realloc),o=lt;_e()[e/4+1]=o,_e()[e/4+0]=r},n.wbg.__wbindgen_throw=function(e,t){throw new Error(wt(e,t))},n.wbg.__wbindgen_memory=function(){const e=K.memory;return ve(e)},n}function qa(n,e){return K=n.exports,jr.__wbindgen_wasm_module=e,Ht=new Float64Array,Zt=new Int32Array,Vt=new Uint8Array,K}async function jr(n){typeof n>"u"&&(n="/atip/assets/route_snapper_bg.wasm");const e=Da();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:i}=await za(await n,e);return qa(t,i)}var Dt,qn,Ve,tt;class Ga{constructor(e,t,i){ct(this,Dt);ct(this,Ve);this.controlDiv=i,this.map=e,console.time("Deserialize and setup JsRouteSnapper"),this.inner=new ln(t),console.timeEnd("Deserialize and setup JsRouteSnapper"),console.log("JsRouteSnapper ready, waiting for idle event"),this.active=!1,this.loaded=!1,this.map.once("idle",()=>{console.log("JsRouteSnapper now usable"),this.map.addSource("route-snapper",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:"route-points",type:"circle",source:"route-snapper",paint:{"circle-radius":["match",["get","type"],"unimportant",10/2,10],"circle-color":["match",["get","type"],"hovered","green","important","red","black"]},filter:["in","$type","Point"]}),this.map.addLayer({id:"route-lines",type:"line",source:"route-snapper",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"black","line-width":2.5},filter:["in","$type","LineString"]}),this.loaded=!0,this.map.on("mousemove",l=>{if(!this.active)return;const s={x:l.point.x-30,y:l.point.y},a=this.map.unproject(l.point).distanceTo(this.map.unproject(s));this.inner.onMouseMove(l.lngLat.lng,l.lngLat.lat,a)&&me(this,Ve,tt).call(this)}),this.map.on("click",()=>{this.active&&(this.inner.onClick(),me(this,Ve,tt).call(this))}),this.map.on("dragstart",l=>{this.active&&this.inner.onDragStart()&&this.map.dragPan.disable()}),this.map.on("mouseup",l=>{this.active&&this.inner.onMouseUp()&&this.map.dragPan.enable()}),document.addEventListener("keypress",l=>{this.active&&l.key=="Enter"&&(l.preventDefault(),me(this,Dt,qn).call(this))}),document.addEventListener("keydown",l=>{this.active&&l.key=="Shift"&&(l.preventDefault(),this.inner.setSnapMode(!1),me(this,Ve,tt).call(this))}),document.addEventListener("keyup",l=>{this.active&&l.key=="Shift"&&(l.preventDefault(),this.inner.setSnapMode(!0),me(this,Ve,tt).call(this))}),this.stop()})}isActive(){return this.active}tearDown(){this.loaded&&(this.map.removeLayer("route-points"),this.map.removeLayer("route-lines"),this.map.removeSource("route-snapper"))}editExisting(e){if(!this.loaded){console.error("editExisting called before the map idle event received. Not starting tool.");return}e.properties.waypoints||(e.properties.waypoints=[{lon:e.geometry.coordinates[0][0],lat:e.geometry.coordinates[0][1],snapped:!0},{lon:e.geometry.coordinates[e.geometry.coordinates.length-1][0],lat:e.geometry.coordinates[e.geometry.coordinates.length-1][1],snapped:!0}]),this.start(),this.inner.editExisting(e.properties.waypoints),me(this,Ve,tt).call(this)}stop(){if(!this.loaded)return;this.active=!1,this.inner.clearState(),me(this,Ve,tt).call(this),this.controlDiv.innerHTML="";let e=document.createElement("button");e.innerText="Route tool",e.type="button",e.onclick=()=>{this.controlDiv.dispatchEvent(new CustomEvent("activate")),this.start()},this.controlDiv.appendChild(e)}start(){if(this.active)return;this.active=!0;let e=document.createElement("button");e.type="button",e.innerText="Finish route",e.onclick=()=>{me(this,Dt,qn).call(this)};let t=document.createElement("button");t.type="button",t.innerText="Cancel",t.onclick=()=>{this.controlDiv.dispatchEvent(new CustomEvent("no-new-route")),this.stop()},this.controlDiv.innerHTML="";let i=document.createElement("div");i.style="display: flex; justify-content: space-evenly;",i.appendChild(e),i.appendChild(t),this.controlDiv.appendChild(i);let r=document.createElement("input");r.type="checkbox",r.id="avoidDoublingBack",r.onclick=()=>{this.inner.setConfig({avoid_doubling_back:r.checked}),me(this,Ve,tt).call(this)};let o=document.createElement("label");o.innerText="Avoid doubling back",o.for=r.id;let l=document.createElement("div");l.appendChild(r),l.appendChild(o),this.controlDiv.append(l);const s=document.createElement("ul");s.innerHTML="<li><b>Click</b> green points on the transport network</br>to create snapped routes</li><li>Hold <b>Shift</b> to draw a point anywhere</li><li><b>Click and drag</b> any point to move it</li><li><b>Click</b> a red waypoint to delete it</li><li>Press <b>Enter</b> to finish route</li>",this.controlDiv.appendChild(s)}}Dt=new WeakSet,qn=function(){const e=this.inner.toFinalFeature();e?this.controlDiv.dispatchEvent(new CustomEvent("new-route",{detail:JSON.parse(e)})):this.controlDiv.dispatchEvent(new CustomEvent("no-new-route")),this.stop()},Ve=new WeakSet,tt=function(){this.loaded&&this.map.getSource("route-snapper").setData(JSON.parse(this.inner.renderGeojson()))};async function Ya(n,e){const t=await fetch(n),i=t.body.getReader(),r=t.headers.get("Content-Length");let o=0,l=[];for(;;){const{done:u,value:c}=await i.read();if(u)break;l.push(c),o+=c.length;const g=100*o/r;e.style=`background: linear-gradient(to right, red ${g}%, transparent 0);`}let s=new Uint8Array(o),a=0;for(let u of l)s.set(u,a),a+=u.length;return s}function Xa(n){let e,t;return{c(){e=T("div"),t=T("div"),t.textContent="Route tool loading..."},m(i,r){P(i,e,r),S(e,t),n[8](t),n[9](e)},p:ne,i:ne,o:ne,d(i){i&&L(e),n[8](null),n[9](null)}}}const wn="route";function Ja(n,e,t){let i;ge(n,Ze,d=>t(10,i=d));let{mode:r}=e,{changeMode:o}=e,{url:l}=e,{snapTool:s}=e,a,{routeSnapper:u}=e;function c(){u.isActive()||u.start()}function g(){u==null||u.stop()}qt(async()=>{await jr(),console.log(`Grabbing ${l}`);try{const d=await Ya(l,a);t(2,u=new Ga(i,d,s))}catch(d){console.log(`Route tool broke: ${d}`),t(0,s.innerHTML="Failed to load",s)}s.addEventListener("activate",()=>{o(wn)}),s.addEventListener("no-new-route",()=>{r==wn&&o("edit-attribute")}),s.addEventListener("new-route",d=>{if(r==wn){const b=d.detail;ue.update(w=>(b.id=cn(w),b.properties.intervention_type="route",w.features.push(b),w)),o("edit-attribute"),st(b.id)}})}),Un(()=>{u==null||u.tearDown()});function h(d){he[d?"unshift":"push"](()=>{a=d,t(1,a)})}function f(d){he[d?"unshift":"push"](()=>{s=d,t(0,s)})}return n.$$set=d=>{"mode"in d&&t(3,r=d.mode),"changeMode"in d&&t(4,o=d.changeMode),"url"in d&&t(5,l=d.url),"snapTool"in d&&t(0,s=d.snapTool),"routeSnapper"in d&&t(2,u=d.routeSnapper)},[s,a,u,r,o,l,c,g,h,f]}class Ua extends ie{constructor(e){super(),re(this,e,Ja,Xa,oe,{mode:3,changeMode:4,url:5,snapTool:0,routeSnapper:2,start:6,stop:7})}get start(){return this.$$.ctx[6]}get stop(){return this.$$.ctx[7]}}function yr(n){let e;return{c(){e=T("p"),e.textContent="Click to add a new point"},m(t,i){P(t,e,i)},d(t){t&&L(e)}}}function Wa(n){let e,t=n[0]==Gn&&yr();return{c(){t&&t.c(),e=et()},m(i,r){t&&t.m(i,r),P(i,e,r)},p(i,[r]){i[0]==Gn?t||(t=yr(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ne,o:ne,d(i){t&&t.d(i),i&&L(e)}}}const Gn="point";function ja(n,e,t){let{mode:i}=e,{changeMode:r}=e,{pointTool:o}=e;function l(){o.start()}function s(){o.stop()}return o.addEventListener(a=>{i==Gn&&(ue.update(u=>(a.id=cn(u),a.properties.intervention_type="other",u.features.push(a),u)),r("edit-attribute"),st(a.id))}),n.$$set=a=>{"mode"in a&&t(0,i=a.mode),"changeMode"in a&&t(1,r=a.changeMode),"pointTool"in a&&t(2,o=a.pointTool)},[i,r,o,l,s]}class Va extends ie{constructor(e){super(),re(this,e,ja,Wa,oe,{mode:0,changeMode:1,pointTool:2,start:3,stop:4})}get start(){return this.$$.ctx[3]}get stop(){return this.$$.ctx[4]}}function wr(n){let e;return{c(){e=T("p"),e.innerHTML="Click the map to add a vertex, or click a vertex to delete it. Press <strong>Enter</strong> to finish. Drag a vertex or the polygon to move."},m(t,i){P(t,e,i)},d(t){t&&L(e)}}}function Ha(n){let e,t=n[0]==Yn&&wr();return{c(){t&&t.c(),e=et()},m(i,r){t&&t.m(i,r),P(i,e,r)},p(i,[r]){i[0]==Yn?t||(t=wr(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ne,o:ne,d(i){t&&t.d(i),i&&L(e)}}}const Yn="polygon";function Za(n,e,t){let{mode:i}=e,{changeMode:r}=e,{polygonTool:o}=e;function l(){o.startNew()}function s(){o.stop()}return o.addEventListener(a=>{i==Yn&&(ue.update(u=>(a.id=cn(u),a.properties.intervention_type="area",u.features.push(a),u)),r("edit-attribute"),st(a.id))}),n.$$set=a=>{"mode"in a&&t(0,i=a.mode),"changeMode"in a&&t(1,r=a.changeMode),"polygonTool"in a&&t(2,o=a.polygonTool)},[i,r,o,l,s]}class Qa extends ie{constructor(e){super(),re(this,e,Za,Ha,oe,{mode:0,changeMode:1,polygonTool:2,start:3,stop:4})}get start(){return this.$$.ctx[3]}get stop(){return this.$$.ctx[4]}}function Ka(n){var e=n[0],t=n[1],i=n[2],r=n[3],o=rt(n.slice(0,2),[i,t]),l=rt(n.slice(0,2),[e,r]);if(o>=l){var s=(t+r)/2;return[e,s-(i-e)/2,i,s+(i-e)/2]}else{var a=(e+i)/2;return[a-(r-t)/2,t,a+(r-t)/2,r]}}function $a(n,e){e===void 0&&(e={});var t=e.precision,i=e.coordinates,r=e.mutate;if(t=t==null||isNaN(t)?6:t,i=i==null||isNaN(i)?3:i,!n)throw new Error("<geojson> is required");if(typeof t!="number")throw new Error("<precision> must be a number");if(typeof i!="number")throw new Error("<coordinates> must be a number");(r===!1||r===void 0)&&(n=JSON.parse(JSON.stringify(n)));var o=Math.pow(10,t);return pt(n,function(l){eu(l,o,i)}),n}function eu(n,e,t){n.length>t&&n.splice(t,n.length);for(var i=0;i<n.length;i++)n[i]=Math.round(n[i]*e)/e;return n}function tu(n,e){if(!n)throw new Error("line is required");if(!e)throw new Error("splitter is required");var t=Rn(n),i=Rn(e);if(t!=="LineString")throw new Error("line must be LineString");if(i==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(i==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var r=$a(e,{precision:7});switch(i){case"Point":return Xn(n,r);case"MultiPoint":return kr(n,r);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return kr(n,Xr(n,r))}}function kr(n,e){var t=[],i=Et();return gt(e,function(r){if(t.forEach(function(s,a){s.id=a}),!t.length)t=Xn(n,r).features,t.forEach(function(s){s.bbox||(s.bbox=Ka(on(s)))}),i.load(qe(t));else{var o=i.search(r);if(o.features.length){var l=Vr(r,o);t=t.filter(function(s){return s.id!==l.id}),i.remove(l),St(Xn(l,r),function(s){t.push(s),i.insert(s)})}}}),qe(t)}function Xn(n,e){var t=[],i=He(n)[0],r=He(n)[n.geometry.coordinates.length-1];if(kn(i,at(e))||kn(r,at(e)))return qe([n]);var o=Et(),l=Nn(n);o.load(l);var s=o.search(e);if(!s.features.length)return qe([n]);var a=Vr(e,s),u=[i],c=Ir(l,function(g,h,f){var d=He(h)[1],b=at(e);return f===a.id?(g.push(b),t.push(Le(g)),kn(b,d)?[b]:[b,d]):(g.push(d),g)},u);return c.length>1&&t.push(Le(c)),qe(t)}function Vr(n,e){if(!e.features.length)throw new Error("lines must contain features");if(e.features.length===1)return e.features[0];var t,i=1/0;return St(e,function(r){var o=It(r,n),l=o.properties.dist;l<i&&(t=r,i=l)}),t}function kn(n,e){return n[0]===e[0]&&n[1]===e[1]}function nu(n,e,t){var i=He(t);if(Rn(t)!=="LineString")throw new Error("line must be a LineString");var r=It(t,n),o=It(t,e),l;r.properties.index<=o.properties.index?l=[r,o]:l=[o,r];for(var s=[l[0].geometry.coordinates],a=l[0].properties.index+1;a<l[1].properties.index+1;a++)s.push(i[a]);return s.push(l[1].geometry.coordinates),Le(s,t.properties)}function Sr(n){let e;return{c(){e=T("p"),e.textContent="Click near a route to split it, or click on the map to cancel"},m(t,i){P(t,e,i)},d(t){t&&L(e)}}}function iu(n){let e,t=n[0]==sn&&Sr();return{c(){t&&t.c(),e=et()},m(i,r){t&&t.m(i,r),P(i,e,r)},p(i,[r]){i[0]==sn?t||(t=Sr(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:ne,o:ne,d(i){t&&t.d(i),i&&L(e)}}}const sn="split-route",ru=10,ou=30;let Sn="split-route";function Hr(){}function Er(n,e){return{type:"Feature",properties:{snapped:e},geometry:{type:"Point",coordinates:n}}}function lu(n,e,t){let i,r;ge(n,Ze,h=>t(5,i=h)),ge(n,ue,h=>t(7,r=h));let{mode:o}=e,{changeMode:l}=e;function s(){t(4,a=null),u=null}let a=null,u=null;i.on("mousemove",h=>{if(o!=sn)return;t(4,a=Er(h.lngLat.toArray(),!1)),u=null;const f={x:h.point.x-ou,y:h.point.y},d=i.unproject(h.point).distanceTo(i.unproject(f))/1e3;let b=[];for(let[w,A]of r.features.entries())if(A.geometry.type=="LineString"){let m=It(A.geometry,a,{units:"kilometers"});m.properties.dist<=d&&b.push([w,m.geometry.coordinates,m.properties.dist])}b.sort((w,A)=>w[2]-A[2]),b.length>0&&(t(4,a=Er(b[0][1],!0)),u=b[0][0])}),i.on("click",h=>{if(o==sn){if(u!=null){let f=tu(r.features[u],a);if(f.features.length==2){let d=f.features[0],b=f.features[1];ue.update(w=>(d.id=w.features[u].id,b.id=cn(w),d.properties=JSON.parse(JSON.stringify(w.features[u].properties)),b.properties=JSON.parse(JSON.stringify(d.properties)),c(w.features[u],d,b,a),w.features.splice(u,1,d,b),w))}}l("edit-attribute")}}),Mt(i,Sn,{type:"geojson",data:$e()}),Fe(i,{id:"draw-split-route",source:Sn,...Gt("black",ru,["case",["==",["get","snapped"],!0],1,.5])});function c(h,f,d,b){f.properties.length_meters=jt(f.geometry,{units:"kilometers"})*1e3,d.properties.length_meters=jt(d.geometry,{units:"kilometers"})*1e3,f.properties.waypoints=[],d.properties.waypoints=[];let w=g(h,b),A=!0,m=0;for(let p of h.properties.waypoints){let v=g(h,Me([p.lon,p.lat]));if(A)if(v<w)f.properties.waypoints.push(p);else{let _=p.snapped&&h.properties.waypoints[m-1].snapped;f.properties.waypoints.push({lon:b.geometry.coordinates[0],lat:b.geometry.coordinates[1],snapped:_}),A=!1,d.properties.waypoints.push({lon:b.geometry.coordinates[0],lat:b.geometry.coordinates[1],snapped:_}),d.properties.waypoints.push(p)}else d.properties.waypoints.push(p);m++}}function g(h,f){let d=h.geometry.coordinates[0],b=nu(d,f,h);return jt(b.geometry,{units:"kilometers"})*1e3}return n.$$set=h=>{"mode"in h&&t(0,o=h.mode),"changeMode"in h&&t(1,l=h.changeMode)},n.$$.update=()=>{if(n.$$.dirty&48){let h=$e();a&&h.features.push(a),i.getSource(Sn).setData(h)}},[o,l,Hr,s,a,i]}class su extends ie{constructor(e){super(),re(this,e,lu,iu,oe,{mode:0,changeMode:1,start:2,stop:3})}get start(){return Hr}get stop(){return this.$$.ctx[3]}}function Mr(n){let e,t,i={mode:n[3],routeSnapper:n[1],snapTool:n[2],pointTool:n[10],polygonTool:n[11]};return e=new Oa({props:i}),n[16](e),{c(){W(e.$$.fragment)},m(r,o){j(e,r,o),t=!0},p(r,o){const l={};o&8&&(l.mode=r[3]),o&2&&(l.routeSnapper=r[1]),o&4&&(l.snapTool=r[2]),e.$set(l)},i(r){t||(R(e.$$.fragment,r),t=!0)},o(r){z(e.$$.fragment,r),t=!1},d(r){n[16](null),V(e,r)}}}function au(n){let e,t,i,r,o,l,s,a,u,c,g,h,f,d,b,w,A,m,p,v,_,y,C,M,B,G,x,D,F,O,q,U,se,te,le,fe,ae,E,Z,Xe,Pt,Yt,pn={mode:n[3],changeMode:n[12]};s=new Aa({props:pn}),n[14](s);let pe=n[1]&&n[2]&&Mr(n),X={mode:n[3],changeMode:n[12],pointTool:n[10]};v=new Va({props:X}),n[18](v);let Zr={mode:n[3],changeMode:n[12],polygonTool:n[11]};x=new Qa({props:Zr}),n[20](x);function Qr($){n[22]($)}function Kr($){n[23]($)}let gn={mode:n[3],changeMode:n[12],url:n[0]};n[1]!==void 0&&(gn.routeSnapper=n[1]),n[2]!==void 0&&(gn.snapTool=n[2]),O=new Ua({props:gn}),n[21](O),he.push(()=>ze(O,"routeSnapper",Qr,n[1])),he.push(()=>ze(O,"snapTool",Kr,n[2]));let $r={mode:n[3],changeMode:n[12]};return Z=new su({props:$r}),n[25](Z),{c(){e=T("div"),t=T("div"),i=T("button"),r=H("Edit attributes"),l=N(),W(s.$$.fragment),a=N(),u=T("div"),c=T("button"),g=H("Edit geometry"),f=N(),pe&&pe.c(),d=N(),b=T("div"),w=T("button"),A=H("New point"),p=N(),W(v.$$.fragment),_=N(),y=T("div"),C=T("button"),M=H("New polygon"),G=N(),W(x.$$.fragment),D=N(),F=T("div"),W(O.$$.fragment),se=N(),te=T("div"),le=T("button"),fe=H("Split route"),E=N(),W(Z.$$.fragment),I(i,"type","button"),i.disabled=o=n[3]=="edit-attribute",I(i,"class","svelte-cej5os"),I(c,"type","button"),c.disabled=h=n[3]=="edit-geometry",I(c,"class","svelte-cej5os"),I(w,"type","button"),w.disabled=m=n[3]=="point",I(w,"class","svelte-cej5os"),I(C,"type","button"),C.disabled=B=n[3]=="polygon",I(C,"class","svelte-cej5os"),I(le,"type","button"),le.disabled=ae=n[3]=="split-route",I(le,"class","svelte-cej5os"),I(e,"class","toolbox svelte-cej5os")},m($,ye){P($,e,ye),S(e,t),S(t,i),S(i,r),S(t,l),j(s,t,null),S(e,a),S(e,u),S(u,c),S(c,g),S(u,f),pe&&pe.m(u,null),S(e,d),S(e,b),S(b,w),S(w,A),S(b,p),j(v,b,null),S(e,_),S(e,y),S(y,C),S(C,M),S(y,G),j(x,y,null),S(e,D),S(e,F),j(O,F,null),S(e,se),S(e,te),S(te,le),S(le,fe),S(te,E),j(Z,te,null),Xe=!0,Pt||(Yt=[Y(i,"click",n[13]),Y(c,"click",n[15]),Y(w,"click",n[17]),Y(C,"click",n[19]),Y(le,"click",n[24])],Pt=!0)},p($,[ye]){(!Xe||ye&8&&o!==(o=$[3]=="edit-attribute"))&&(i.disabled=o);const oi={};ye&8&&(oi.mode=$[3]),s.$set(oi),(!Xe||ye&8&&h!==(h=$[3]=="edit-geometry"))&&(c.disabled=h),$[1]&&$[2]?pe?(pe.p($,ye),ye&6&&R(pe,1)):(pe=Mr($),pe.c(),R(pe,1),pe.m(u,null)):pe&&(Se(),z(pe,1,1,()=>{pe=null}),Ee()),(!Xe||ye&8&&m!==(m=$[3]=="point"))&&(w.disabled=m);const li={};ye&8&&(li.mode=$[3]),v.$set(li),(!Xe||ye&8&&B!==(B=$[3]=="polygon"))&&(C.disabled=B);const si={};ye&8&&(si.mode=$[3]),x.$set(si);const Lt={};ye&8&&(Lt.mode=$[3]),ye&1&&(Lt.url=$[0]),!q&&ye&2&&(q=!0,Lt.routeSnapper=$[1],De(()=>q=!1)),!U&&ye&4&&(U=!0,Lt.snapTool=$[2],De(()=>U=!1)),O.$set(Lt),(!Xe||ye&8&&ae!==(ae=$[3]=="split-route"))&&(le.disabled=ae);const ai={};ye&8&&(ai.mode=$[3]),Z.$set(ai)},i($){Xe||(R(s.$$.fragment,$),R(pe),R(v.$$.fragment,$),R(x.$$.fragment,$),R(O.$$.fragment,$),R(Z.$$.fragment,$),Xe=!0)},o($){z(s.$$.fragment,$),z(pe),z(v.$$.fragment,$),z(x.$$.fragment,$),z(O.$$.fragment,$),z(Z.$$.fragment,$),Xe=!1},d($){$&&L(e),n[14](null),V(s),pe&&pe.d(),n[18](null),V(v),n[20](null),V(x),n[21](null),V(O),n[25](null),V(Z),Pt=!1,Ae(Yt)}}}function uu(n,e,t){let i;ge(n,Ze,O=>t(26,i=O));let{routeUrl:r}=e,o,l,s=new ma(i),a=new La(i),u="edit-attribute",c,g,h,f,d,b;function w(O){let q={"edit-attribute":c,"edit-geometry":g,route:h,point:f,polygon:d,"split-route":b};if(u==O){console.log(`Mode is already ${u}, not changing`);return}console.log(`Stopping old mode ${u}`),q[u].stop(),t(3,u=O),console.log(`Starting new mode ${u}`),q[u].start()}Un(()=>{s==null||s.tearDown(),a==null||a.tearDown()});const A=()=>w("edit-attribute");function m(O){he[O?"unshift":"push"](()=>{c=O,t(4,c)})}const p=()=>w("edit-geometry");function v(O){he[O?"unshift":"push"](()=>{g=O,t(5,g)})}const _=()=>w("point");function y(O){he[O?"unshift":"push"](()=>{f=O,t(7,f)})}const C=()=>w("polygon");function M(O){he[O?"unshift":"push"](()=>{d=O,t(8,d)})}function B(O){he[O?"unshift":"push"](()=>{h=O,t(6,h)})}function G(O){o=O,t(1,o)}function x(O){l=O,t(2,l)}const D=()=>w("split-route");function F(O){he[O?"unshift":"push"](()=>{b=O,t(9,b)})}return n.$$set=O=>{"routeUrl"in O&&t(0,r=O.routeUrl)},[r,o,l,u,c,g,h,f,d,b,s,a,w,A,m,p,v,_,y,C,M,B,G,x,D,F]}class fu extends ie{constructor(e){super(),re(this,e,uu,au,oe,{routeUrl:0})}}function cu(n){let e,t,i,r,o,l,s,a;return{c(){e=T("div"),t=T("button"),t.textContent="Home",i=N(),r=T("button"),r.textContent="About",o=N(),l=T("button"),l.textContent="Instructions",I(t,"type","button"),I(t,"onclick","window.open('index.html');"),I(r,"type","button"),I(l,"type","button"),I(e,"slot","nav")},m(u,c){P(u,e,c),S(e,t),S(e,i),S(e,r),S(e,o),S(e,l),s||(a=[Y(r,"click",n[6]),Y(l,"click",n[7])],s=!0)},p:ne,d(u){u&&L(e),s=!1,Ae(a)}}}function du(n){let e,t,i,r,o,l,s,a,u,c,g,h;return o=new ra({props:{boundaryGeojson:n[3]}}),s=new ea({props:{authorityName:n[4]}}),g=new Gs({}),{c(){e=T("div"),t=T("h1"),i=H(n[4]),r=N(),W(o.$$.fragment),l=N(),W(s.$$.fragment),a=N(),u=T("br"),c=N(),W(g.$$.fragment),I(e,"slot","sidebar")},m(f,d){P(f,e,d),S(e,t),S(t,i),S(t,r),j(o,t,null),S(e,l),j(s,e,null),S(e,a),S(e,u),S(e,c),j(g,e,null),h=!0},p(f,d){const b={};d&8&&(b.boundaryGeojson=f[3]),o.$set(b)},i(f){h||(R(o.$$.fragment,f),R(s.$$.fragment,f),R(g.$$.fragment,f),h=!0)},o(f){z(o.$$.fragment,f),z(s.$$.fragment,f),z(g.$$.fragment,f),h=!1},d(f){f&&L(e),V(o),V(s),V(g)}}}function hu(n){let e,t,i,r,o,l,s,a,u,c,g,h;return e=new Ts({props:{boundaryGeojson:n[3]}}),i=new ca({}),o=new ha({}),s=new fu({props:{routeUrl:n[2]}}),u=new sa({props:{style:n[5]}}),g=new ua({}),{c(){W(e.$$.fragment),t=N(),W(i.$$.fragment),r=N(),W(o.$$.fragment),l=N(),W(s.$$.fragment),a=N(),W(u.$$.fragment),c=N(),W(g.$$.fragment)},m(f,d){j(e,f,d),P(f,t,d),j(i,f,d),P(f,r,d),j(o,f,d),P(f,l,d),j(s,f,d),P(f,a,d),j(u,f,d),P(f,c,d),j(g,f,d),h=!0},p(f,d){const b={};d&8&&(b.boundaryGeojson=f[3]),e.$set(b);const w={};d&4&&(w.routeUrl=f[2]),s.$set(w)},i(f){h||(R(e.$$.fragment,f),R(i.$$.fragment,f),R(o.$$.fragment,f),R(s.$$.fragment,f),R(u.$$.fragment,f),R(g.$$.fragment,f),h=!0)},o(f){z(e.$$.fragment,f),z(i.$$.fragment,f),z(o.$$.fragment,f),z(s.$$.fragment,f),z(u.$$.fragment,f),z(g.$$.fragment,f),h=!1},d(f){V(e,f),f&&L(t),V(i,f),f&&L(r),V(o,f),f&&L(l),V(s,f),f&&L(a),V(u,f),f&&L(c),V(g,f)}}}function mu(n){let e,t,i;return t=new Il({props:{style:n[5],$$slots:{default:[hu]},$$scope:{ctx:n}}}),{c(){e=T("div"),W(t.$$.fragment),I(e,"slot","main")},m(r,o){P(r,e,o),j(t,e,null),i=!0},p(r,o){const l={};o&8204&&(l.$$scope={dirty:o,ctx:r}),t.$set(l)},i(r){i||(R(t.$$.fragment,r),i=!0)},o(r){z(t.$$.fragment,r),i=!1},d(r){r&&L(e),V(t)}}}function pu(n){let e,t,i,r,o,l,s,a;e=new Gl({props:{$$slots:{main:[mu],sidebar:[du],nav:[cu]},$$scope:{ctx:n}}});function u(f){n[8](f)}let c={};n[0]!==void 0&&(c.open=n[0]),i=new co({props:c}),he.push(()=>ze(i,"open",u,n[0]));function g(f){n[9](f)}let h={};return n[1]!==void 0&&(h.open=n[1]),l=new Rl({props:h}),he.push(()=>ze(l,"open",g,n[1])),{c(){W(e.$$.fragment),t=N(),W(i.$$.fragment),o=N(),W(l.$$.fragment)},m(f,d){j(e,f,d),P(f,t,d),j(i,f,d),P(f,o,d),j(l,f,d),a=!0},p(f,[d]){const b={};d&8204&&(b.$$scope={dirty:d,ctx:f}),e.$set(b);const w={};!r&&d&1&&(r=!0,w.open=f[0],De(()=>r=!1)),i.$set(w);const A={};!s&&d&2&&(s=!0,A.open=f[1],De(()=>s=!1)),l.$set(A)},i(f){a||(R(e.$$.fragment,f),R(i.$$.fragment,f),R(l.$$.fragment,f),a=!0)},o(f){z(e.$$.fragment,f),z(i.$$.fragment,f),z(l.$$.fragment,f),a=!1},d(f){V(e,f),f&&L(t),V(i,f),f&&L(o),V(l,f)}}}function gu(n,e,t){let i=!1,r=!1,o=window.location.hostname.includes("atip.uk");const l=new URLSearchParams(window.location.search);let s=l.get("authority"),a=l.get("style")||"streets";var u=`https://atip.uk/route-snappers/${s}.bin`;o||(u=`https://atip.uk/route-snappers-dev/${s}.bin`);function c(){t(0,i=!i),t(1,r=!1)}function g(){t(1,r=!r),t(0,i=!1)}let h;qt(async()=>{t(3,h=await f())});async function f(){const A=await(await fetch(ho)).text(),m=JSON.parse(A);return m.features=m.features.filter(p=>p.properties.name==s),m}function d(w){i=w,t(0,i)}function b(w){r=w,t(1,r)}return[i,r,u,h,s,a,c,g,d,b]}class bu extends ie{constructor(e){super(),re(this,e,gu,pu,oe,{})}}new bu({target:document.getElementById("app")});
