var Aa=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var Cn=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var bt=(n,e,t)=>(Aa(n,e,"access private method"),t);import{S as Ie,i as Le,s as Me,x as me,y as it,f as Z,z as Jt,g as M,h as R,B as at,C as Ge,p as x,D as Oe,E as Xe,t as be,F as De,G as bi,H as ie,e as B,I as Je,J as k,l as Q,r as pt,K as wl,L as oi,c as H,n as z,M as nt,o as J,N as rt,O as Na,d as he,m as pe,q as ge,P as Ra,Q as vi,R as rn,T as ft,U as ct,V as dt,W as ht,X as Fa,Y as Ar,Z as Ht,_ as Nr,$ as ot,b as $e,a0 as Sl,a1 as po,a2 as Da,j as gn,a3 as Ua,a as Ct,k as Ot,a4 as pr,a5 as kl,a6 as ei,a7 as Tl,a8 as go,w as _i,a9 as On,aa as ja,ab as mo,ac as Ba,ad as Ga,ae as bo,af as za,A as Va,u as qa}from"./authorities-b1752fb8.js";function vo(n){let e,t;return{c(){e=it("title"),t=be(n[1])},m(r,o){M(r,e,o),R(e,t)},p(r,o){o&2&&De(t,r[1])},d(r){r&&x(e)}}}function Ja(n){let e,t,r=n[1]&&vo(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let a=0;a<o.length;a+=1)l=me(l,o[a]);return{c(){e=it("svg"),r&&r.c(),t=it("path"),Z(t,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),Jt(e,l)},m(a,u){M(a,e,u),r&&r.m(e,null),R(e,t)},p(a,[u]){a[1]?r?r.p(a,u):(r=vo(a),r.c(),r.m(e,t)):r&&(r.d(1),r=null),Jt(e,l=at(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:a[0]},u&1&&{height:a[0]},u&4&&a[2],u&8&&a[3]]))},i:Ge,o:Ge,d(a){a&&x(e),r&&r.d()}}}function Ya(n,e,t){let r,o;const l=["size","title"];let a=Oe(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=me(me({},e),Xe(f))),t(3,a=Oe(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[u,c,o,a,r]}class Ha extends Ie{constructor(e){super(),Le(this,e,Ya,Ja,Me,{size:0,title:1})}}const yi=Ha;function _o(n,e,t){const r=n.slice();return r[2]=e[t].width,r}function Wa(n){let e,t,r,o,l=[n[4],{style:t="width: "+n[2]+";"+n[4].style}],a={};for(let u=0;u<l.length;u+=1)a=me(a,l[u]);return{c(){e=B("p"),Je(e,a),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",n[0])},m(u,c){M(u,e,c),r||(o=[Q(e,"click",n[12]),Q(e,"mouseover",n[13]),Q(e,"mouseenter",n[14]),Q(e,"mouseleave",n[15])],r=!0)},p(u,c){Je(e,a=at(l,[c&16&&u[4],c&20&&t!==(t="width: "+u[2]+";"+u[4].style)&&{style:t}])),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",u[0])},d(u){u&&x(e),r=!1,pt(o)}}}function Za(n){let e,t,r,o=n[3],l=[];for(let c=0;c<o.length;c+=1)l[c]=yo(_o(n,o,c));let a=[n[4]],u={};for(let c=0;c<a.length;c+=1)u=me(u,a[c]);return{c(){e=B("div");for(let c=0;c<l.length;c+=1)l[c].c();Je(e,u)},m(c,f){M(c,e,f);for(let p=0;p<l.length;p+=1)l[p].m(e,null);t||(r=[Q(e,"click",n[8]),Q(e,"mouseover",n[9]),Q(e,"mouseenter",n[10]),Q(e,"mouseleave",n[11])],t=!0)},p(c,f){if(f&9){o=c[3];let p;for(p=0;p<o.length;p+=1){const v=_o(c,o,p);l[p]?l[p].p(v,f):(l[p]=yo(v),l[p].c(),l[p].m(e,null))}for(;p<l.length;p+=1)l[p].d(1);l.length=o.length}Je(e,u=at(a,[f&16&&c[4]]))},d(c){c&&x(e),wl(l,c),t=!1,pt(r)}}}function yo(n){let e;return{c(){e=B("p"),oi(e,"width",n[2]),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",n[0])},m(t,r){M(t,e,r)},p(t,r){r&8&&oi(e,"width",t[2]),r&1&&k(e,"bx--skeleton__heading",t[0])},d(t){t&&x(e)}}}function Xa(n){let e;function t(l,a){return l[1]?Za:Wa}let r=t(n),o=r(n);return{c(){o.c(),e=bi()},m(l,a){o.m(l,a),M(l,e,a)},p(l,[a]){r===(r=t(l))&&o?o.p(l,a):(o.d(1),o=r(l),o&&(o.c(),o.m(e.parentNode,e)))},i:Ge,o:Ge,d(l){o.d(l),l&&x(e)}}}function Ka(n,e,t){let r,o,l;const a=["lines","heading","paragraph","width"];let u=Oe(e,a),{lines:c=3}=e,{heading:f=!1}=e,{paragraph:p=!1}=e,{width:v="100%"}=e;const g=[.973,.153,.567];function h(P){ie.call(this,n,P)}function m(P){ie.call(this,n,P)}function E(P){ie.call(this,n,P)}function O(P){ie.call(this,n,P)}function F(P){ie.call(this,n,P)}function I(P){ie.call(this,n,P)}function C(P){ie.call(this,n,P)}function A(P){ie.call(this,n,P)}return n.$$set=P=>{e=me(me({},e),Xe(P)),t(4,u=Oe(e,a)),"lines"in P&&t(5,c=P.lines),"heading"in P&&t(0,f=P.heading),"paragraph"in P&&t(1,p=P.paragraph),"width"in P&&t(2,v=P.width)},n.$$.update=()=>{if(n.$$.dirty&4&&t(7,o=parseInt(v,10)),n.$$.dirty&4&&t(6,l=v.includes("px")),n.$$.dirty&238&&p)for(let P=0;P<c;P++){const D=l?o-75:0,ve=l?o:75,G=Math.floor(g[P%3]*(ve-D+1))+D+"px";t(3,r=[...r,{width:l?G:`calc(${v} - ${G})`}])}},t(3,r=[]),[f,p,v,r,u,c,l,o,h,m,E,O,F,I,C,A]}class Qa extends Ie{constructor(e){super(),Le(this,e,Ka,Xa,Me,{lines:5,heading:0,paragraph:1,width:2})}}const Mn=Qa;function Eo(n,e,t){const r=n.slice();return r[9]=e[t],r}function wo(n){let e,t,r,o,l,a,u,c,f,p,v,g,h;return r=new yi({props:{class:"bx--accordion__arrow"}}),l=new Mn({props:{class:"bx--accordion__title"}}),c=new Mn({props:{width:"90%"}}),p=new Mn({props:{width:"80%"}}),g=new Mn({props:{width:"95%"}}),{c(){e=B("li"),t=B("span"),he(r.$$.fragment),o=H(),he(l.$$.fragment),a=H(),u=B("div"),he(c.$$.fragment),f=H(),he(p.$$.fragment),v=H(),he(g.$$.fragment),k(t,"bx--accordion__heading",!0),k(u,"bx--accordion__content",!0),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",!0)},m(m,E){M(m,e,E),R(e,t),pe(r,t,null),R(t,o),pe(l,t,null),R(e,a),R(e,u),pe(c,u,null),R(u,f),pe(p,u,null),R(u,v),pe(g,u,null),h=!0},i(m){h||(z(r.$$.fragment,m),z(l.$$.fragment,m),z(c.$$.fragment,m),z(p.$$.fragment,m),z(g.$$.fragment,m),h=!0)},o(m){J(r.$$.fragment,m),J(l.$$.fragment,m),J(c.$$.fragment,m),J(p.$$.fragment,m),J(g.$$.fragment,m),h=!1},d(m){m&&x(e),ge(r),ge(l),ge(c),ge(p),ge(g)}}}function So(n,e){let t,r,o,l,a,u,c;return o=new yi({props:{class:"bx--accordion__arrow"}}),a=new Mn({props:{class:"bx--accordion__title"}}),{key:n,first:null,c(){t=B("li"),r=B("span"),he(o.$$.fragment),l=H(),he(a.$$.fragment),u=H(),k(r,"bx--accordion__heading",!0),k(t,"bx--accordion__item",!0),this.first=t},m(f,p){M(f,t,p),R(t,r),pe(o,r,null),R(r,l),pe(a,r,null),R(t,u),c=!0},p(f,p){},i(f){c||(z(o.$$.fragment,f),z(a.$$.fragment,f),c=!0)},o(f){J(o.$$.fragment,f),J(a.$$.fragment,f),c=!1},d(f){f&&x(t),ge(o),ge(a)}}}function $a(n){let e,t,r=[],o=new Map,l,a,u,c=n[3]&&wo(),f=Array.from({length:n[3]?n[0]-1:n[0]},ko);const p=h=>h[9];for(let h=0;h<f.length;h+=1){let m=Eo(n,f,h),E=p(m);o.set(E,r[h]=So(E))}let v=[n[4]],g={};for(let h=0;h<v.length;h+=1)g=me(g,v[h]);return{c(){e=B("ul"),c&&c.c(),t=H();for(let h=0;h<r.length;h+=1)r[h].c();Je(e,g),k(e,"bx--skeleton",!0),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",n[1]==="start"),k(e,"bx--accordion--end",n[1]==="end"),k(e,"bx--accordion--sm",n[2]==="sm"),k(e,"bx--accordion--xl",n[2]==="xl")},m(h,m){M(h,e,m),c&&c.m(e,null),R(e,t);for(let E=0;E<r.length;E+=1)r[E].m(e,null);l=!0,a||(u=[Q(e,"click",n[5]),Q(e,"mouseover",n[6]),Q(e,"mouseenter",n[7]),Q(e,"mouseleave",n[8])],a=!0)},p(h,[m]){h[3]?c?m&8&&z(c,1):(c=wo(),c.c(),z(c,1),c.m(e,t)):c&&(nt(),J(c,1,1,()=>{c=null}),rt()),m&9&&(f=Array.from({length:h[3]?h[0]-1:h[0]},ko),nt(),r=Na(r,m,p,1,h,f,o,e,Ra,So,null,Eo),rt()),Je(e,g=at(v,[m&16&&h[4]])),k(e,"bx--skeleton",!0),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",h[1]==="start"),k(e,"bx--accordion--end",h[1]==="end"),k(e,"bx--accordion--sm",h[2]==="sm"),k(e,"bx--accordion--xl",h[2]==="xl")},i(h){if(!l){z(c);for(let m=0;m<f.length;m+=1)z(r[m]);l=!0}},o(h){J(c);for(let m=0;m<r.length;m+=1)J(r[m]);l=!1},d(h){h&&x(e),c&&c.d();for(let m=0;m<r.length;m+=1)r[m].d();a=!1,pt(u)}}}const ko=(n,e)=>e;function es(n,e,t){const r=["count","align","size","open"];let o=Oe(e,r),{count:l=4}=e,{align:a="end"}=e,{size:u=void 0}=e,{open:c=!0}=e;function f(h){ie.call(this,n,h)}function p(h){ie.call(this,n,h)}function v(h){ie.call(this,n,h)}function g(h){ie.call(this,n,h)}return n.$$set=h=>{e=me(me({},e),Xe(h)),t(4,o=Oe(e,r)),"count"in h&&t(0,l=h.count),"align"in h&&t(1,a=h.align),"size"in h&&t(2,u=h.size),"open"in h&&t(3,c=h.open)},[l,a,u,c,o,f,p,v,g]}class ts extends Ie{constructor(e){super(),Le(this,e,es,$a,Me,{count:0,align:1,size:2,open:3})}}const ns=ts;function rs(n){let e,t,r,o;const l=n[6].default,a=ft(l,n,n[5],null);let u=[n[3]],c={};for(let f=0;f<u.length;f+=1)c=me(c,u[f]);return{c(){e=B("ul"),a&&a.c(),Je(e,c),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",n[0]==="start"),k(e,"bx--accordion--end",n[0]==="end"),k(e,"bx--accordion--sm",n[1]==="sm"),k(e,"bx--accordion--xl",n[1]==="xl")},m(f,p){M(f,e,p),a&&a.m(e,null),t=!0,r||(o=[Q(e,"click",n[7]),Q(e,"mouseover",n[8]),Q(e,"mouseenter",n[9]),Q(e,"mouseleave",n[10])],r=!0)},p(f,p){a&&a.p&&(!t||p&32)&&ct(a,l,f,f[5],t?ht(l,f[5],p,null):dt(f[5]),null),Je(e,c=at(u,[p&8&&f[3]])),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",f[0]==="start"),k(e,"bx--accordion--end",f[0]==="end"),k(e,"bx--accordion--sm",f[1]==="sm"),k(e,"bx--accordion--xl",f[1]==="xl")},i(f){t||(z(a,f),t=!0)},o(f){J(a,f),t=!1},d(f){f&&x(e),a&&a.d(f),r=!1,pt(o)}}}function is(n){let e,t;const r=[n[3],{align:n[0]},{size:n[1]}];let o={};for(let l=0;l<r.length;l+=1)o=me(o,r[l]);return e=new ns({props:o}),e.$on("click",n[11]),e.$on("mouseover",n[12]),e.$on("mouseenter",n[13]),e.$on("mouseleave",n[14]),{c(){he(e.$$.fragment)},m(l,a){pe(e,l,a),t=!0},p(l,a){const u=a&11?at(r,[a&8&&Fa(l[3]),a&1&&{align:l[0]},a&2&&{size:l[1]}]):{};e.$set(u)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){J(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function os(n){let e,t,r,o;const l=[is,rs],a=[];function u(c,f){return c[2]?0:1}return e=u(n),t=a[e]=l[e](n),{c(){t.c(),r=bi()},m(c,f){a[e].m(c,f),M(c,r,f),o=!0},p(c,[f]){let p=e;e=u(c),e===p?a[e].p(c,f):(nt(),J(a[p],1,1,()=>{a[p]=null}),rt(),t=a[e],t?t.p(c,f):(t=a[e]=l[e](c),t.c()),z(t,1),t.m(r.parentNode,r))},i(c){o||(z(t),o=!0)},o(c){J(t),o=!1},d(c){a[e].d(c),c&&x(r)}}}function ls(n,e,t){const r=["align","size","disabled","skeleton"];let o=Oe(e,r),{$$slots:l={},$$scope:a}=e,{align:u="end"}=e,{size:c=void 0}=e,{disabled:f=!1}=e,{skeleton:p=!1}=e;const v=rn(f);vi("Accordion",{disableItems:v});function g(A){ie.call(this,n,A)}function h(A){ie.call(this,n,A)}function m(A){ie.call(this,n,A)}function E(A){ie.call(this,n,A)}function O(A){ie.call(this,n,A)}function F(A){ie.call(this,n,A)}function I(A){ie.call(this,n,A)}function C(A){ie.call(this,n,A)}return n.$$set=A=>{e=me(me({},e),Xe(A)),t(3,o=Oe(e,r)),"align"in A&&t(0,u=A.align),"size"in A&&t(1,c=A.size),"disabled"in A&&t(4,f=A.disabled),"skeleton"in A&&t(2,p=A.skeleton),"$$scope"in A&&t(5,a=A.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&v.set(f)},[u,c,p,o,f,a,l,g,h,m,E,O,F,I,C]}class as extends Ie{constructor(e){super(),Le(this,e,ls,os,Me,{align:0,size:1,disabled:4,skeleton:2})}}const ss=as,us=n=>({}),To=n=>({});function fs(n){let e;return{c(){e=be(n[2])},m(t,r){M(t,e,r)},p(t,r){r&4&&De(e,t[2])},d(t){t&&x(e)}}}function cs(n){let e,t,r,o,l,a,u,c,f,p;r=new yi({props:{class:"bx--accordion__arrow","aria-label":n[3]}});const v=n[7].title,g=ft(v,n,n[6],To),h=g||fs(n),m=n[7].default,E=ft(m,n,n[6],null);let O=[n[5]],F={};for(let I=0;I<O.length;I+=1)F=me(F,O[I]);return{c(){e=B("li"),t=B("button"),he(r.$$.fragment),o=H(),l=B("div"),h&&h.c(),a=H(),u=B("div"),E&&E.c(),k(l,"bx--accordion__title",!0),Z(t,"type","button"),Z(t,"title",n[3]),Z(t,"aria-expanded",n[0]),t.disabled=n[1],k(t,"bx--accordion__heading",!0),k(u,"bx--accordion__content",!0),Je(e,F),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",n[0]),k(e,"bx--accordion__item--disabled",n[1]),k(e,"bx--accordion__item--expanding",n[4]==="expanding"),k(e,"bx--accordion__item--collapsing",n[4]==="collapsing")},m(I,C){M(I,e,C),R(e,t),pe(r,t,null),R(t,o),R(t,l),h&&h.m(l,null),R(e,a),R(e,u),E&&E.m(u,null),c=!0,f||(p=[Q(t,"click",n[9]),Q(t,"click",n[14]),Q(t,"mouseover",n[10]),Q(t,"mouseenter",n[11]),Q(t,"mouseleave",n[12]),Q(t,"keydown",n[13]),Q(t,"keydown",n[15]),Q(e,"animationend",n[8]),Q(e,"animationend",n[16])],f=!0)},p(I,[C]){const A={};C&8&&(A["aria-label"]=I[3]),r.$set(A),g?g.p&&(!c||C&64)&&ct(g,v,I,I[6],c?ht(v,I[6],C,us):dt(I[6]),To):h&&h.p&&(!c||C&4)&&h.p(I,c?C:-1),(!c||C&8)&&Z(t,"title",I[3]),(!c||C&1)&&Z(t,"aria-expanded",I[0]),(!c||C&2)&&(t.disabled=I[1]),E&&E.p&&(!c||C&64)&&ct(E,m,I,I[6],c?ht(m,I[6],C,null):dt(I[6]),null),Je(e,F=at(O,[C&32&&I[5]])),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",I[0]),k(e,"bx--accordion__item--disabled",I[1]),k(e,"bx--accordion__item--expanding",I[4]==="expanding"),k(e,"bx--accordion__item--collapsing",I[4]==="collapsing")},i(I){c||(z(r.$$.fragment,I),z(h,I),z(E,I),c=!0)},o(I){J(r.$$.fragment,I),J(h,I),J(E,I),c=!1},d(I){I&&x(e),ge(r),h&&h.d(I),E&&E.d(I),f=!1,pt(p)}}}function ds(n,e,t){const r=["title","open","disabled","iconDescription"];let o=Oe(e,r),{$$slots:l={},$$scope:a}=e,{title:u="title"}=e,{open:c=!1}=e,{disabled:f=!1}=e,{iconDescription:p="Expand/Collapse"}=e,v=f;const h=Ar("Accordion").disableItems.subscribe(G=>{!G&&v||t(1,f=G)});let m;Ht(()=>()=>{h()});function E(G){ie.call(this,n,G)}function O(G){ie.call(this,n,G)}function F(G){ie.call(this,n,G)}function I(G){ie.call(this,n,G)}function C(G){ie.call(this,n,G)}function A(G){ie.call(this,n,G)}const P=()=>{t(0,c=!c),t(4,m=c?"expanding":"collapsing")},D=({key:G})=>{c&&G==="Escape"&&t(0,c=!1)},ve=()=>{t(4,m=void 0)};return n.$$set=G=>{e=me(me({},e),Xe(G)),t(5,o=Oe(e,r)),"title"in G&&t(2,u=G.title),"open"in G&&t(0,c=G.open),"disabled"in G&&t(1,f=G.disabled),"iconDescription"in G&&t(3,p=G.iconDescription),"$$scope"in G&&t(6,a=G.$$scope)},[c,f,u,p,m,o,a,l,E,O,F,I,C,A,P,D,ve]}class hs extends Ie{constructor(e){super(),Le(this,e,ds,cs,Me,{title:2,open:0,disabled:1,iconDescription:3})}}const ps=hs;function Co(n){let e,t;return{c(){e=it("title"),t=be(n[1])},m(r,o){M(r,e,o),R(e,t)},p(r,o){o&2&&De(t,r[1])},d(r){r&&x(e)}}}function gs(n){let e,t,r,o=n[1]&&Co(n),l=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],a={};for(let u=0;u<l.length;u+=1)a=me(a,l[u]);return{c(){e=it("svg"),o&&o.c(),t=it("path"),r=it("path"),Z(t,"d","M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14C30,8.3,23.7,2,16,2z M14.9,8h2.2v11h-2.2V8z M16,25	c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22c0.8,0,1.5,0.7,1.5,1.5S16.8,25,16,25z"),Z(r,"fill","none"),Z(r,"d","M17.5,23.5c0,0.8-0.7,1.5-1.5,1.5c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22	C16.8,22,17.5,22.7,17.5,23.5z M17.1,8h-2.2v11h2.2V8z"),Z(r,"data-icon-path","inner-path"),Z(r,"opacity","0"),Jt(e,a)},m(u,c){M(u,e,c),o&&o.m(e,null),R(e,t),R(e,r)},p(u,[c]){u[1]?o?o.p(u,c):(o=Co(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null),Jt(e,a=at(l,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},c&1&&{width:u[0]},c&1&&{height:u[0]},c&4&&u[2],c&8&&u[3]]))},i:Ge,o:Ge,d(u){u&&x(e),o&&o.d()}}}function ms(n,e,t){let r,o;const l=["size","title"];let a=Oe(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=me(me({},e),Xe(f))),t(3,a=Oe(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[u,c,o,a,r]}class bs extends Ie{constructor(e){super(),Le(this,e,ms,gs,Me,{size:0,title:1})}}const Cl=bs;function Oo(n){let e,t;return{c(){e=it("title"),t=be(n[1])},m(r,o){M(r,e,o),R(e,t)},p(r,o){o&2&&De(t,r[1])},d(r){r&&x(e)}}}function vs(n){let e,t,r,o,l=n[1]&&Oo(n),a=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],u={};for(let c=0;c<a.length;c+=1)u=me(u,a[c]);return{c(){e=it("svg"),l&&l.c(),t=it("path"),r=it("path"),o=it("path"),Z(t,"fill","none"),Z(t,"d","M16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Zm-1.125-5h2.25V12h-2.25Z"),Z(t,"data-icon-path","inner-path"),Z(r,"d","M16.002,6.1714h-.004L4.6487,27.9966,4.6506,28H27.3494l.0019-.0034ZM14.875,12h2.25v9h-2.25ZM16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Z"),Z(o,"d","M29,30H3a1,1,0,0,1-.8872-1.4614l13-25a1,1,0,0,1,1.7744,0l13,25A1,1,0,0,1,29,30ZM4.6507,28H27.3493l.002-.0033L16.002,6.1714h-.004L4.6487,27.9967Z"),Jt(e,u)},m(c,f){M(c,e,f),l&&l.m(e,null),R(e,t),R(e,r),R(e,o)},p(c,[f]){c[1]?l?l.p(c,f):(l=Oo(c),l.c(),l.m(e,t)):l&&(l.d(1),l=null),Jt(e,u=at(a,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},f&1&&{width:c[0]},f&1&&{height:c[0]},f&4&&c[2],f&8&&c[3]]))},i:Ge,o:Ge,d(c){c&&x(e),l&&l.d()}}}function _s(n,e,t){let r,o;const l=["size","title"];let a=Oe(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=me(me({},e),Xe(f))),t(3,a=Oe(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[u,c,o,a,r]}class ys extends Ie{constructor(e){super(),Le(this,e,_s,vs,Me,{size:0,title:1})}}const Es=ys,ws=n=>({}),Io=n=>({});function Lo(n){let e,t;const r=n[16].labelText,o=ft(r,n,n[15],Io),l=o||Ss(n);return{c(){e=B("span"),l&&l.c(),k(e,"bx--visually-hidden",n[7])},m(a,u){M(a,e,u),l&&l.m(e,null),t=!0},p(a,u){o?o.p&&(!t||u&32768)&&ct(o,r,a,a[15],t?ht(r,a[15],u,ws):dt(a[15]),Io):l&&l.p&&(!t||u&64)&&l.p(a,t?u:-1),(!t||u&128)&&k(e,"bx--visually-hidden",a[7])},i(a){t||(z(l,a),t=!0)},o(a){J(l,a),t=!1},d(a){a&&x(e),l&&l.d(a)}}}function Ss(n){let e;return{c(){e=be(n[6])},m(t,r){M(t,e,r)},p(t,r){r&64&&De(e,t[6])},d(t){t&&x(e)}}}function ks(n){let e,t,r,o,l,a,u,c,f,p=(n[6]||n[13].labelText)&&Lo(n),v=[n[12]],g={};for(let h=0;h<v.length;h+=1)g=me(g,v[h]);return{c(){e=B("div"),t=B("input"),r=H(),o=B("label"),l=B("span"),a=H(),p&&p.c(),Z(t,"type","radio"),Z(t,"id",n[8]),Z(t,"name",n[9]),t.checked=n[0],t.disabled=n[3],t.required=n[4],t.value=n[2],k(t,"bx--radio-button",!0),k(l,"bx--radio-button__appearance",!0),Z(o,"for",n[8]),k(o,"bx--radio-button__label",!0),Je(e,g),k(e,"bx--radio-button-wrapper",!0),k(e,"bx--radio-button-wrapper--label-left",n[5]==="left")},m(h,m){M(h,e,m),R(e,t),n[18](t),R(e,r),R(e,o),R(o,l),R(o,a),p&&p.m(o,null),u=!0,c||(f=[Q(t,"change",n[17]),Q(t,"change",n[19])],c=!0)},p(h,[m]){(!u||m&256)&&Z(t,"id",h[8]),(!u||m&512)&&Z(t,"name",h[9]),(!u||m&1)&&(t.checked=h[0]),(!u||m&8)&&(t.disabled=h[3]),(!u||m&16)&&(t.required=h[4]),(!u||m&4)&&(t.value=h[2]),h[6]||h[13].labelText?p?(p.p(h,m),m&8256&&z(p,1)):(p=Lo(h),p.c(),z(p,1),p.m(o,null)):p&&(nt(),J(p,1,1,()=>{p=null}),rt()),(!u||m&256)&&Z(o,"for",h[8]),Je(e,g=at(v,[m&4096&&h[12]])),k(e,"bx--radio-button-wrapper",!0),k(e,"bx--radio-button-wrapper--label-left",h[5]==="left")},i(h){u||(z(p),u=!0)},o(h){J(p),u=!1},d(h){h&&x(e),n[18](null),p&&p.d(),c=!1,pt(f)}}}function Ts(n,e,t){const r=["value","checked","disabled","required","labelPosition","labelText","hideLabel","id","name","ref"];let o=Oe(e,r),l,{$$slots:a={},$$scope:u}=e;const c=Nr(a);let{value:f=""}=e,{checked:p=!1}=e,{disabled:v=!1}=e,{required:g=!1}=e,{labelPosition:h="right"}=e,{labelText:m=""}=e,{hideLabel:E=!1}=e,{id:O="ccs-"+Math.random().toString(36)}=e,{name:F=""}=e,{ref:I=null}=e;const C=Ar("RadioButtonGroup"),A=C?C.selectedValue:rn(p?f:void 0);ot(n,A,G=>t(14,l=G)),C&&C.add({id:O,checked:p,disabled:v,value:f});function P(G){ie.call(this,n,G)}function D(G){$e[G?"unshift":"push"](()=>{I=G,t(1,I)})}const ve=()=>{C&&C.update(f)};return n.$$set=G=>{e=me(me({},e),Xe(G)),t(12,o=Oe(e,r)),"value"in G&&t(2,f=G.value),"checked"in G&&t(0,p=G.checked),"disabled"in G&&t(3,v=G.disabled),"required"in G&&t(4,g=G.required),"labelPosition"in G&&t(5,h=G.labelPosition),"labelText"in G&&t(6,m=G.labelText),"hideLabel"in G&&t(7,E=G.hideLabel),"id"in G&&t(8,O=G.id),"name"in G&&t(9,F=G.name),"ref"in G&&t(1,I=G.ref),"$$scope"in G&&t(15,u=G.$$scope)},n.$$.update=()=>{n.$$.dirty&16388&&t(0,p=l===f)},[p,I,f,v,g,h,m,E,O,F,C,A,o,c,l,u,a,P,D,ve]}class Cs extends Ie{constructor(e){super(),Le(this,e,Ts,ks,Me,{value:2,checked:0,disabled:3,required:4,labelPosition:5,labelText:6,hideLabel:7,id:8,name:9,ref:1})}}const gr=Cs;function Mo(n){let e,t;return{c(){e=it("title"),t=be(n[1])},m(r,o){M(r,e,o),R(e,t)},p(r,o){o&2&&De(t,r[1])},d(r){r&&x(e)}}}function Os(n){let e,t,r=n[1]&&Mo(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let a=0;a<o.length;a+=1)l=me(l,o[a]);return{c(){e=it("svg"),r&&r.c(),t=it("path"),Z(t,"d","M30 28.6L3.4 2 2 3.4l10.1 10.1L4 21.6V28h6.4l8.1-8.1L28.6 30 30 28.6zM9.6 26H6v-3.6l7.5-7.5 3.6 3.6L9.6 26zM29.4 6.2L29.4 6.2l-3.6-3.6c-.8-.8-2-.8-2.8 0l0 0 0 0-8 8 1.4 1.4L20 8.4l3.6 3.6L20 15.6l1.4 1.4 8-8C30.2 8.2 30.2 7 29.4 6.2L29.4 6.2zM25 10.6L21.4 7l3-3L28 7.6 25 10.6z"),Jt(e,l)},m(a,u){M(a,e,u),r&&r.m(e,null),R(e,t)},p(a,[u]){a[1]?r?r.p(a,u):(r=Mo(a),r.c(),r.m(e,t)):r&&(r.d(1),r=null),Jt(e,l=at(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:a[0]},u&1&&{height:a[0]},u&4&&a[2],u&8&&a[3]]))},i:Ge,o:Ge,d(a){a&&x(e),r&&r.d()}}}function Is(n,e,t){let r,o;const l=["size","title"];let a=Oe(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=me(me({},e),Xe(f))),t(3,a=Oe(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[u,c,o,a,r]}class Ls extends Ie{constructor(e){super(),Le(this,e,Is,Os,Me,{size:0,title:1})}}const Ms=Ls;function xs(n){let e,t,r,o;const l=n[5].default,a=ft(l,n,n[4],null);let u=[n[3]],c={};for(let f=0;f<u.length;f+=1)c=me(c,u[f]);return{c(){e=B("ol"),a&&a.c(),Je(e,c),k(e,"bx--list--ordered",!n[1]),k(e,"bx--list--ordered--native",n[1]),k(e,"bx--list--nested",n[0]),k(e,"bx--list--expressive",n[2])},m(f,p){M(f,e,p),a&&a.m(e,null),t=!0,r||(o=[Q(e,"click",n[6]),Q(e,"mouseover",n[7]),Q(e,"mouseenter",n[8]),Q(e,"mouseleave",n[9])],r=!0)},p(f,[p]){a&&a.p&&(!t||p&16)&&ct(a,l,f,f[4],t?ht(l,f[4],p,null):dt(f[4]),null),Je(e,c=at(u,[p&8&&f[3]])),k(e,"bx--list--ordered",!f[1]),k(e,"bx--list--ordered--native",f[1]),k(e,"bx--list--nested",f[0]),k(e,"bx--list--expressive",f[2])},i(f){t||(z(a,f),t=!0)},o(f){J(a,f),t=!1},d(f){f&&x(e),a&&a.d(f),r=!1,pt(o)}}}function Ps(n,e,t){const r=["nested","native","expressive"];let o=Oe(e,r),{$$slots:l={},$$scope:a}=e,{nested:u=!1}=e,{native:c=!1}=e,{expressive:f=!1}=e;function p(m){ie.call(this,n,m)}function v(m){ie.call(this,n,m)}function g(m){ie.call(this,n,m)}function h(m){ie.call(this,n,m)}return n.$$set=m=>{e=me(me({},e),Xe(m)),t(3,o=Oe(e,r)),"nested"in m&&t(0,u=m.nested),"native"in m&&t(1,c=m.native),"expressive"in m&&t(2,f=m.expressive),"$$scope"in m&&t(4,a=m.$$scope)},[u,c,f,o,a,l,p,v,g,h]}class As extends Ie{constructor(e){super(),Le(this,e,Ps,xs,Me,{nested:0,native:1,expressive:2})}}const Ns=As,Rs=n=>({}),xo=n=>({});function Po(n){let e,t;const r=n[11].legendText,o=ft(r,n,n[10],xo),l=o||Fs(n);return{c(){e=B("legend"),l&&l.c(),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[2])},m(a,u){M(a,e,u),l&&l.m(e,null),t=!0},p(a,u){o?o.p&&(!t||u&1024)&&ct(o,r,a,a[10],t?ht(r,a[10],u,Rs):dt(a[10]),xo):l&&l.p&&(!t||u&2)&&l.p(a,t?u:-1),(!t||u&4)&&k(e,"bx--visually-hidden",a[2])},i(a){t||(z(l,a),t=!0)},o(a){J(l,a),t=!1},d(a){a&&x(e),l&&l.d(a)}}}function Fs(n){let e;return{c(){e=be(n[1])},m(t,r){M(t,e,r)},p(t,r){r&2&&De(e,t[1])},d(t){t&&x(e)}}}function Ds(n){let e,t,r,o,l,a,u=(n[1]||n[8].legendText)&&Po(n);const c=n[11].default,f=ft(c,n,n[10],null);let p=[{id:n[5]},n[7]],v={};for(let g=0;g<p.length;g+=1)v=me(v,p[g]);return{c(){e=B("div"),t=B("fieldset"),u&&u.c(),r=H(),f&&f.c(),t.disabled=n[0],k(t,"bx--radio-button-group",!0),k(t,"bx--radio-button-group--vertical",n[4]==="vertical"),k(t,"bx--radio-button-group--label-left",n[3]==="left"),k(t,"bx--radio-button-group--label-right",n[3]==="right"),Je(e,v),k(e,"bx--form-item",!0)},m(g,h){M(g,e,h),R(e,t),u&&u.m(t,null),R(t,r),f&&f.m(t,null),o=!0,l||(a=[Q(e,"click",n[12]),Q(e,"mouseover",n[13]),Q(e,"mouseenter",n[14]),Q(e,"mouseleave",n[15])],l=!0)},p(g,[h]){g[1]||g[8].legendText?u?(u.p(g,h),h&258&&z(u,1)):(u=Po(g),u.c(),z(u,1),u.m(t,r)):u&&(nt(),J(u,1,1,()=>{u=null}),rt()),f&&f.p&&(!o||h&1024)&&ct(f,c,g,g[10],o?ht(c,g[10],h,null):dt(g[10]),null),(!o||h&1)&&(t.disabled=g[0]),(!o||h&16)&&k(t,"bx--radio-button-group--vertical",g[4]==="vertical"),(!o||h&8)&&k(t,"bx--radio-button-group--label-left",g[3]==="left"),(!o||h&8)&&k(t,"bx--radio-button-group--label-right",g[3]==="right"),Je(e,v=at(p,[(!o||h&32)&&{id:g[5]},h&128&&g[7]])),k(e,"bx--form-item",!0)},i(g){o||(z(u),z(f,g),o=!0)},o(g){J(u),J(f,g),o=!1},d(g){g&&x(e),u&&u.d(),f&&f.d(g),l=!1,pt(a)}}}function Us(n,e,t){const r=["selected","disabled","legendText","hideLegend","labelPosition","orientation","id"];let o=Oe(e,r),l,{$$slots:a={},$$scope:u}=e;const c=Nr(a);let{selected:f=void 0}=e,{disabled:p=!1}=e,{legendText:v=""}=e,{hideLegend:g=!1}=e,{labelPosition:h="right"}=e,{orientation:m="horizontal"}=e,{id:E=void 0}=e;const O=Sl(),F=rn(f);ot(n,F,D=>t(16,l=D)),vi("RadioButtonGroup",{selectedValue:F,add:({checked:D,value:ve})=>{D&&F.set(ve)},update:D=>{t(9,f=D)}}),Ht(()=>{po(F,l=f,l)}),Da(()=>{po(F,l=f,l)}),F.subscribe(D=>{t(9,f=D),O("change",D)});function I(D){ie.call(this,n,D)}function C(D){ie.call(this,n,D)}function A(D){ie.call(this,n,D)}function P(D){ie.call(this,n,D)}return n.$$set=D=>{e=me(me({},e),Xe(D)),t(7,o=Oe(e,r)),"selected"in D&&t(9,f=D.selected),"disabled"in D&&t(0,p=D.disabled),"legendText"in D&&t(1,v=D.legendText),"hideLegend"in D&&t(2,g=D.hideLegend),"labelPosition"in D&&t(3,h=D.labelPosition),"orientation"in D&&t(4,m=D.orientation),"id"in D&&t(5,E=D.id),"$$scope"in D&&t(10,u=D.$$scope)},[p,v,g,h,m,E,F,o,c,f,u,a,I,C,A,P]}class js extends Ie{constructor(e){super(),Le(this,e,Us,Ds,Me,{selected:9,disabled:0,legendText:1,hideLegend:2,labelPosition:3,orientation:4,id:5})}}const Bs=js,Gs=n=>({}),Ao=n=>({});function No(n){let e,t,r,o;const l=n[20].labelText,a=ft(l,n,n[19],Ao),u=a||zs(n);let c=n[5]&&Ro(n);return{c(){e=B("div"),t=B("label"),u&&u.c(),r=H(),c&&c.c(),Z(t,"for",n[14]),k(t,"bx--label",!0),k(t,"bx--visually-hidden",n[11]),k(t,"bx--label--disabled",n[7]),k(e,"bx--text-area__label-wrapper",!0)},m(f,p){M(f,e,p),R(e,t),u&&u.m(t,null),R(e,r),c&&c.m(e,null),o=!0},p(f,p){a?a.p&&(!o||p[0]&524288)&&ct(a,l,f,f[19],o?ht(l,f[19],p,Gs):dt(f[19]),Ao):u&&u.p&&(!o||p[0]&1024)&&u.p(f,o?p:[-1,-1]),(!o||p[0]&16384)&&Z(t,"for",f[14]),(!o||p[0]&2048)&&k(t,"bx--visually-hidden",f[11]),(!o||p[0]&128)&&k(t,"bx--label--disabled",f[7]),f[5]?c?c.p(f,p):(c=Ro(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(f){o||(z(u,f),o=!0)},o(f){J(u,f),o=!1},d(f){f&&x(e),u&&u.d(f),c&&c.d()}}}function zs(n){let e;return{c(){e=be(n[10])},m(t,r){M(t,e,r)},p(t,r){r[0]&1024&&De(e,t[10])},d(t){t&&x(e)}}}function Ro(n){let e,t=n[0].length+"",r,o,l;return{c(){e=B("div"),r=be(t),o=be("/"),l=be(n[5]),k(e,"bx--label",!0),k(e,"bx--label--disabled",n[7])},m(a,u){M(a,e,u),R(e,r),R(e,o),R(e,l)},p(a,u){u[0]&1&&t!==(t=a[0].length+"")&&De(r,t),u[0]&32&&De(l,a[5]),u[0]&128&&k(e,"bx--label--disabled",a[7])},d(a){a&&x(e)}}}function Fo(n){let e,t;return e=new Cl({props:{class:"bx--text-area__invalid-icon"}}),{c(){he(e.$$.fragment)},m(r,o){pe(e,r,o),t=!0},i(r){t||(z(e.$$.fragment,r),t=!0)},o(r){J(e.$$.fragment,r),t=!1},d(r){ge(e,r)}}}function Do(n){let e,t;return{c(){e=B("div"),t=be(n[9]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[7])},m(r,o){M(r,e,o),R(e,t)},p(r,o){o[0]&512&&De(t,r[9]),o[0]&128&&k(e,"bx--form__helper-text--disabled",r[7])},d(r){r&&x(e)}}}function Uo(n){let e,t;return{c(){e=B("div"),t=be(n[13]),Z(e,"id",n[16]),k(e,"bx--form-requirement",!0)},m(r,o){M(r,e,o),R(e,t)},p(r,o){o[0]&8192&&De(t,r[13]),o[0]&65536&&Z(e,"id",r[16])},d(r){r&&x(e)}}}function Vs(n){let e,t,r,o,l,a,u,c,f,p,v,g,h,m,E=(n[10]||n[17].labelText)&&!n[11]&&No(n),O=n[12]&&Fo(),F=[{"aria-invalid":a=n[12]||void 0},{"aria-describedby":u=n[12]?n[16]:void 0},{disabled:n[7]},{id:n[14]},{name:n[15]},{cols:n[3]},{rows:n[4]},{placeholder:n[2]},{readOnly:n[8]},{maxlength:c=n[5]??void 0},n[18]],I={};for(let P=0;P<F.length;P+=1)I=me(I,F[P]);let C=!n[12]&&n[9]&&Do(n),A=n[12]&&Uo(n);return{c(){e=B("div"),E&&E.c(),t=H(),r=B("div"),O&&O.c(),o=H(),l=B("textarea"),p=H(),C&&C.c(),v=H(),A&&A.c(),Je(l,I),k(l,"bx--text-area",!0),k(l,"bx--text-area--light",n[6]),k(l,"bx--text-area--invalid",n[12]),Z(r,"data-invalid",f=n[12]||void 0),k(r,"bx--text-area__wrapper",!0),k(e,"bx--form-item",!0)},m(P,D){M(P,e,D),E&&E.m(e,null),R(e,t),R(e,r),O&&O.m(r,null),R(r,o),R(r,l),l.autofocus&&l.focus(),n[32](l),gn(l,n[0]),R(e,p),C&&C.m(e,null),R(e,v),A&&A.m(e,null),g=!0,h||(m=[Q(l,"input",n[33]),Q(l,"change",n[25]),Q(l,"input",n[26]),Q(l,"keydown",n[27]),Q(l,"keyup",n[28]),Q(l,"focus",n[29]),Q(l,"blur",n[30]),Q(l,"paste",n[31]),Q(e,"click",n[21]),Q(e,"mouseover",n[22]),Q(e,"mouseenter",n[23]),Q(e,"mouseleave",n[24])],h=!0)},p(P,D){(P[10]||P[17].labelText)&&!P[11]?E?(E.p(P,D),D[0]&134144&&z(E,1)):(E=No(P),E.c(),z(E,1),E.m(e,t)):E&&(nt(),J(E,1,1,()=>{E=null}),rt()),P[12]?O?D[0]&4096&&z(O,1):(O=Fo(),O.c(),z(O,1),O.m(r,o)):O&&(nt(),J(O,1,1,()=>{O=null}),rt()),Je(l,I=at(F,[(!g||D[0]&4096&&a!==(a=P[12]||void 0))&&{"aria-invalid":a},(!g||D[0]&69632&&u!==(u=P[12]?P[16]:void 0))&&{"aria-describedby":u},(!g||D[0]&128)&&{disabled:P[7]},(!g||D[0]&16384)&&{id:P[14]},(!g||D[0]&32768)&&{name:P[15]},(!g||D[0]&8)&&{cols:P[3]},(!g||D[0]&16)&&{rows:P[4]},(!g||D[0]&4)&&{placeholder:P[2]},(!g||D[0]&256)&&{readOnly:P[8]},(!g||D[0]&32&&c!==(c=P[5]??void 0))&&{maxlength:c},D[0]&262144&&P[18]])),D[0]&1&&gn(l,P[0]),k(l,"bx--text-area",!0),k(l,"bx--text-area--light",P[6]),k(l,"bx--text-area--invalid",P[12]),(!g||D[0]&4096&&f!==(f=P[12]||void 0))&&Z(r,"data-invalid",f),!P[12]&&P[9]?C?C.p(P,D):(C=Do(P),C.c(),C.m(e,v)):C&&(C.d(1),C=null),P[12]?A?A.p(P,D):(A=Uo(P),A.c(),A.m(e,null)):A&&(A.d(1),A=null)},i(P){g||(z(E),z(O),g=!0)},o(P){J(E),J(O),g=!1},d(P){P&&x(e),E&&E.d(),O&&O.d(),n[32](null),C&&C.d(),A&&A.d(),h=!1,pt(m)}}}function qs(n,e,t){let r;const o=["value","placeholder","cols","rows","maxCount","light","disabled","readonly","helperText","labelText","hideLabel","invalid","invalidText","id","name","ref"];let l=Oe(e,o),{$$slots:a={},$$scope:u}=e;const c=Nr(a);let{value:f=""}=e,{placeholder:p=""}=e,{cols:v=50}=e,{rows:g=4}=e,{maxCount:h=void 0}=e,{light:m=!1}=e,{disabled:E=!1}=e,{readonly:O=!1}=e,{helperText:F=""}=e,{labelText:I=""}=e,{hideLabel:C=!1}=e,{invalid:A=!1}=e,{invalidText:P=""}=e,{id:D="ccs-"+Math.random().toString(36)}=e,{name:ve=void 0}=e,{ref:G=null}=e;function oe(T){ie.call(this,n,T)}function ue(T){ie.call(this,n,T)}function U(T){ie.call(this,n,T)}function ne(T){ie.call(this,n,T)}function ee(T){ie.call(this,n,T)}function ae(T){ie.call(this,n,T)}function K(T){ie.call(this,n,T)}function fe(T){ie.call(this,n,T)}function xe(T){ie.call(this,n,T)}function Ce(T){ie.call(this,n,T)}function ke(T){ie.call(this,n,T)}function je(T){$e[T?"unshift":"push"](()=>{G=T,t(1,G)})}function Ee(){f=this.value,t(0,f)}return n.$$set=T=>{e=me(me({},e),Xe(T)),t(18,l=Oe(e,o)),"value"in T&&t(0,f=T.value),"placeholder"in T&&t(2,p=T.placeholder),"cols"in T&&t(3,v=T.cols),"rows"in T&&t(4,g=T.rows),"maxCount"in T&&t(5,h=T.maxCount),"light"in T&&t(6,m=T.light),"disabled"in T&&t(7,E=T.disabled),"readonly"in T&&t(8,O=T.readonly),"helperText"in T&&t(9,F=T.helperText),"labelText"in T&&t(10,I=T.labelText),"hideLabel"in T&&t(11,C=T.hideLabel),"invalid"in T&&t(12,A=T.invalid),"invalidText"in T&&t(13,P=T.invalidText),"id"in T&&t(14,D=T.id),"name"in T&&t(15,ve=T.name),"ref"in T&&t(1,G=T.ref),"$$scope"in T&&t(19,u=T.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&t(16,r=`error-${D}`)},[f,G,p,v,g,h,m,E,O,F,I,C,A,P,D,ve,r,c,l,u,a,oe,ue,U,ne,ee,ae,K,fe,xe,Ce,ke,je,Ee]}class Js extends Ie{constructor(e){super(),Le(this,e,qs,Vs,Me,{value:0,placeholder:2,cols:3,rows:4,maxCount:5,light:6,disabled:7,readonly:8,helperText:9,labelText:10,hideLabel:11,invalid:12,invalidText:13,id:14,name:15,ref:1},null,[-1,-1])}}const Ys=Js,Hs=n=>({}),jo=n=>({}),Ws=n=>({}),Bo=n=>({});function Go(n){let e,t,r,o=n[9]&&zo(n),l=!n[20]&&n[6]&&Vo(n);return{c(){e=B("div"),o&&o.c(),t=H(),l&&l.c(),k(e,"bx--text-input__label-helper-wrapper",!0)},m(a,u){M(a,e,u),o&&o.m(e,null),R(e,t),l&&l.m(e,null),r=!0},p(a,u){a[9]?o?(o.p(a,u),u[0]&512&&z(o,1)):(o=zo(a),o.c(),z(o,1),o.m(e,t)):o&&(nt(),J(o,1,1,()=>{o=null}),rt()),!a[20]&&a[6]?l?l.p(a,u):(l=Vo(a),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(a){r||(z(o),r=!0)},o(a){J(o),r=!1},d(a){a&&x(e),o&&o.d(),l&&l.d()}}}function zo(n){let e,t;const r=n[26].labelText,o=ft(r,n,n[25],Bo),l=o||Zs(n);return{c(){e=B("label"),l&&l.c(),Z(e,"for",n[7]),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[10]),k(e,"bx--label--disabled",n[5]),k(e,"bx--label--inline",n[16]),k(e,"bx--label--inline--sm",n[2]==="sm"),k(e,"bx--label--inline--xl",n[2]==="xl")},m(a,u){M(a,e,u),l&&l.m(e,null),t=!0},p(a,u){o?o.p&&(!t||u[0]&33554432)&&ct(o,r,a,a[25],t?ht(r,a[25],u,Ws):dt(a[25]),Bo):l&&l.p&&(!t||u[0]&512)&&l.p(a,t?u:[-1,-1]),(!t||u[0]&128)&&Z(e,"for",a[7]),(!t||u[0]&1024)&&k(e,"bx--visually-hidden",a[10]),(!t||u[0]&32)&&k(e,"bx--label--disabled",a[5]),(!t||u[0]&65536)&&k(e,"bx--label--inline",a[16]),(!t||u[0]&4)&&k(e,"bx--label--inline--sm",a[2]==="sm"),(!t||u[0]&4)&&k(e,"bx--label--inline--xl",a[2]==="xl")},i(a){t||(z(l,a),t=!0)},o(a){J(l,a),t=!1},d(a){a&&x(e),l&&l.d(a)}}}function Zs(n){let e;return{c(){e=be(n[9])},m(t,r){M(t,e,r)},p(t,r){r[0]&512&&De(e,t[9])},d(t){t&&x(e)}}}function Vo(n){let e,t;return{c(){e=B("div"),t=be(n[6]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[5]),k(e,"bx--form__helper-text--inline",n[16])},m(r,o){M(r,e,o),R(e,t)},p(r,o){o[0]&64&&De(t,r[6]),o[0]&32&&k(e,"bx--form__helper-text--disabled",r[5]),o[0]&65536&&k(e,"bx--form__helper-text--inline",r[16])},d(r){r&&x(e)}}}function qo(n){let e,t;const r=n[26].labelText,o=ft(r,n,n[25],jo),l=o||Xs(n);return{c(){e=B("label"),l&&l.c(),Z(e,"for",n[7]),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[10]),k(e,"bx--label--disabled",n[5]),k(e,"bx--label--inline",n[16]),k(e,"bx--label--inline-sm",n[16]&&n[2]==="sm"),k(e,"bx--label--inline-xl",n[16]&&n[2]==="xl")},m(a,u){M(a,e,u),l&&l.m(e,null),t=!0},p(a,u){o?o.p&&(!t||u[0]&33554432)&&ct(o,r,a,a[25],t?ht(r,a[25],u,Hs):dt(a[25]),jo):l&&l.p&&(!t||u[0]&512)&&l.p(a,t?u:[-1,-1]),(!t||u[0]&128)&&Z(e,"for",a[7]),(!t||u[0]&1024)&&k(e,"bx--visually-hidden",a[10]),(!t||u[0]&32)&&k(e,"bx--label--disabled",a[5]),(!t||u[0]&65536)&&k(e,"bx--label--inline",a[16]),(!t||u[0]&65540)&&k(e,"bx--label--inline-sm",a[16]&&a[2]==="sm"),(!t||u[0]&65540)&&k(e,"bx--label--inline-xl",a[16]&&a[2]==="xl")},i(a){t||(z(l,a),t=!0)},o(a){J(l,a),t=!1},d(a){a&&x(e),l&&l.d(a)}}}function Xs(n){let e;return{c(){e=be(n[9])},m(t,r){M(t,e,r)},p(t,r){r[0]&512&&De(e,t[9])},d(t){t&&x(e)}}}function Jo(n){let e,t;return e=new Cl({props:{class:"bx--text-input__invalid-icon"}}),{c(){he(e.$$.fragment)},m(r,o){pe(e,r,o),t=!0},i(r){t||(z(e.$$.fragment,r),t=!0)},o(r){J(e.$$.fragment,r),t=!1},d(r){ge(e,r)}}}function Yo(n){let e,t;return e=new Es({props:{class:`bx--text-input__invalid-icon
            bx--text-input__invalid-icon--warning`}}),{c(){he(e.$$.fragment)},m(r,o){pe(e,r,o),t=!0},i(r){t||(z(e.$$.fragment,r),t=!0)},o(r){J(e.$$.fragment,r),t=!1},d(r){ge(e,r)}}}function Ho(n){let e,t;return e=new Ms({props:{class:"bx--text-input__readonly-icon"}}),{c(){he(e.$$.fragment)},m(r,o){pe(e,r,o),t=!0},i(r){t||(z(e.$$.fragment,r),t=!0)},o(r){J(e.$$.fragment,r),t=!1},d(r){ge(e,r)}}}function Wo(n){let e;return{c(){e=B("hr"),k(e,"bx--text-input__divider",!0)},m(t,r){M(t,e,r)},d(t){t&&x(e)}}}function Zo(n){let e,t;return{c(){e=B("div"),t=be(n[12]),Z(e,"id",n[19]),k(e,"bx--form-requirement",!0)},m(r,o){M(r,e,o),R(e,t)},p(r,o){o[0]&4096&&De(t,r[12]),o[0]&524288&&Z(e,"id",r[19])},d(r){r&&x(e)}}}function Xo(n){let e,t;return{c(){e=B("div"),t=be(n[14]),Z(e,"id",n[18]),k(e,"bx--form-requirement",!0)},m(r,o){M(r,e,o),R(e,t)},p(r,o){o[0]&16384&&De(t,r[14]),o[0]&262144&&Z(e,"id",r[18])},d(r){r&&x(e)}}}function Ko(n){let e,t;return{c(){e=B("div"),t=be(n[6]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[5]),k(e,"bx--form__helper-text--inline",n[16])},m(r,o){M(r,e,o),R(e,t)},p(r,o){o[0]&64&&De(t,r[6]),o[0]&32&&k(e,"bx--form__helper-text--disabled",r[5]),o[0]&65536&&k(e,"bx--form__helper-text--inline",r[16])},d(r){r&&x(e)}}}function Qo(n){let e,t;return{c(){e=B("div"),t=be(n[12]),Z(e,"id",n[19]),k(e,"bx--form-requirement",!0)},m(r,o){M(r,e,o),R(e,t)},p(r,o){o[0]&4096&&De(t,r[12]),o[0]&524288&&Z(e,"id",r[19])},d(r){r&&x(e)}}}function $o(n){let e,t;return{c(){e=B("div"),t=be(n[14]),Z(e,"id",n[18]),k(e,"bx--form-requirement",!0)},m(r,o){M(r,e,o),R(e,t)},p(r,o){o[0]&16384&&De(t,r[14]),o[0]&262144&&Z(e,"id",r[18])},d(r){r&&x(e)}}}function Ks(n){let e,t,r,o,l,a,u,c,f,p,v,g,h,m,E,O,F,I,C,A,P,D,ve,G,oe=n[16]&&Go(n),ue=!n[16]&&(n[9]||n[24].labelText)&&qo(n),U=n[11]&&Jo(),ne=!n[11]&&n[13]&&Yo(),ee=n[17]&&Ho(),ae=[{"data-invalid":p=n[11]||void 0},{"aria-invalid":v=n[11]||void 0},{"data-warn":g=n[13]||void 0},{"aria-describedby":h=n[11]?n[19]:n[13]?n[18]:void 0},{disabled:n[5]},{id:n[7]},{name:n[8]},{placeholder:n[3]},{required:n[15]},{readOnly:n[17]},n[23]],K={};for(let T=0;T<ae.length;T+=1)K=me(K,ae[T]);let fe=n[20]&&Wo(),xe=n[20]&&!n[16]&&n[11]&&Zo(n),Ce=n[20]&&!n[16]&&n[13]&&Xo(n),ke=!n[11]&&!n[13]&&!n[20]&&!n[16]&&n[6]&&Ko(n),je=!n[20]&&n[11]&&Qo(n),Ee=!n[20]&&!n[11]&&n[13]&&$o(n);return{c(){e=B("div"),oe&&oe.c(),t=H(),ue&&ue.c(),r=H(),o=B("div"),l=B("div"),U&&U.c(),a=H(),ne&&ne.c(),u=H(),ee&&ee.c(),c=H(),f=B("input"),m=H(),fe&&fe.c(),E=H(),xe&&xe.c(),O=H(),Ce&&Ce.c(),C=H(),ke&&ke.c(),A=H(),je&&je.c(),P=H(),Ee&&Ee.c(),Je(f,K),k(f,"bx--text-input",!0),k(f,"bx--text-input--light",n[4]),k(f,"bx--text-input--invalid",n[11]),k(f,"bx--text-input--warn",n[13]),k(f,"bx--text-input--sm",n[2]==="sm"),k(f,"bx--text-input--xl",n[2]==="xl"),Z(l,"data-invalid",F=n[11]||void 0),Z(l,"data-warn",I=n[13]||void 0),k(l,"bx--text-input__field-wrapper",!0),k(l,"bx--text-input__field-wrapper--warning",!n[11]&&n[13]),k(o,"bx--text-input__field-outer-wrapper",!0),k(o,"bx--text-input__field-outer-wrapper--inline",n[16]),k(e,"bx--form-item",!0),k(e,"bx--text-input-wrapper",!0),k(e,"bx--text-input-wrapper--inline",n[16]),k(e,"bx--text-input-wrapper--light",n[4]),k(e,"bx--text-input-wrapper--readonly",n[17])},m(T,se){M(T,e,se),oe&&oe.m(e,null),R(e,t),ue&&ue.m(e,null),R(e,r),R(e,o),R(o,l),U&&U.m(l,null),R(l,a),ne&&ne.m(l,null),R(l,u),ee&&ee.m(l,null),R(l,c),R(l,f),f.autofocus&&f.focus(),n[36](f),gn(f,n[0]),R(l,m),fe&&fe.m(l,null),R(l,E),xe&&xe.m(l,null),R(l,O),Ce&&Ce.m(l,null),R(o,C),ke&&ke.m(o,null),R(o,A),je&&je.m(o,null),R(o,P),Ee&&Ee.m(o,null),D=!0,ve||(G=[Q(f,"input",n[37]),Q(f,"change",n[22]),Q(f,"input",n[21]),Q(f,"keydown",n[31]),Q(f,"keyup",n[32]),Q(f,"focus",n[33]),Q(f,"blur",n[34]),Q(f,"paste",n[35]),Q(e,"click",n[27]),Q(e,"mouseover",n[28]),Q(e,"mouseenter",n[29]),Q(e,"mouseleave",n[30])],ve=!0)},p(T,se){T[16]?oe?(oe.p(T,se),se[0]&65536&&z(oe,1)):(oe=Go(T),oe.c(),z(oe,1),oe.m(e,t)):oe&&(nt(),J(oe,1,1,()=>{oe=null}),rt()),!T[16]&&(T[9]||T[24].labelText)?ue?(ue.p(T,se),se[0]&16843264&&z(ue,1)):(ue=qo(T),ue.c(),z(ue,1),ue.m(e,r)):ue&&(nt(),J(ue,1,1,()=>{ue=null}),rt()),T[11]?U?se[0]&2048&&z(U,1):(U=Jo(),U.c(),z(U,1),U.m(l,a)):U&&(nt(),J(U,1,1,()=>{U=null}),rt()),!T[11]&&T[13]?ne?se[0]&10240&&z(ne,1):(ne=Yo(),ne.c(),z(ne,1),ne.m(l,u)):ne&&(nt(),J(ne,1,1,()=>{ne=null}),rt()),T[17]?ee?se[0]&131072&&z(ee,1):(ee=Ho(),ee.c(),z(ee,1),ee.m(l,c)):ee&&(nt(),J(ee,1,1,()=>{ee=null}),rt()),Je(f,K=at(ae,[(!D||se[0]&2048&&p!==(p=T[11]||void 0))&&{"data-invalid":p},(!D||se[0]&2048&&v!==(v=T[11]||void 0))&&{"aria-invalid":v},(!D||se[0]&8192&&g!==(g=T[13]||void 0))&&{"data-warn":g},(!D||se[0]&796672&&h!==(h=T[11]?T[19]:T[13]?T[18]:void 0))&&{"aria-describedby":h},(!D||se[0]&32)&&{disabled:T[5]},(!D||se[0]&128)&&{id:T[7]},(!D||se[0]&256)&&{name:T[8]},(!D||se[0]&8)&&{placeholder:T[3]},(!D||se[0]&32768)&&{required:T[15]},(!D||se[0]&131072)&&{readOnly:T[17]},se[0]&8388608&&T[23]])),se[0]&1&&f.value!==T[0]&&gn(f,T[0]),k(f,"bx--text-input",!0),k(f,"bx--text-input--light",T[4]),k(f,"bx--text-input--invalid",T[11]),k(f,"bx--text-input--warn",T[13]),k(f,"bx--text-input--sm",T[2]==="sm"),k(f,"bx--text-input--xl",T[2]==="xl"),T[20]?fe||(fe=Wo(),fe.c(),fe.m(l,E)):fe&&(fe.d(1),fe=null),T[20]&&!T[16]&&T[11]?xe?xe.p(T,se):(xe=Zo(T),xe.c(),xe.m(l,O)):xe&&(xe.d(1),xe=null),T[20]&&!T[16]&&T[13]?Ce?Ce.p(T,se):(Ce=Xo(T),Ce.c(),Ce.m(l,null)):Ce&&(Ce.d(1),Ce=null),(!D||se[0]&2048&&F!==(F=T[11]||void 0))&&Z(l,"data-invalid",F),(!D||se[0]&8192&&I!==(I=T[13]||void 0))&&Z(l,"data-warn",I),(!D||se[0]&10240)&&k(l,"bx--text-input__field-wrapper--warning",!T[11]&&T[13]),!T[11]&&!T[13]&&!T[20]&&!T[16]&&T[6]?ke?ke.p(T,se):(ke=Ko(T),ke.c(),ke.m(o,A)):ke&&(ke.d(1),ke=null),!T[20]&&T[11]?je?je.p(T,se):(je=Qo(T),je.c(),je.m(o,P)):je&&(je.d(1),je=null),!T[20]&&!T[11]&&T[13]?Ee?Ee.p(T,se):(Ee=$o(T),Ee.c(),Ee.m(o,null)):Ee&&(Ee.d(1),Ee=null),(!D||se[0]&65536)&&k(o,"bx--text-input__field-outer-wrapper--inline",T[16]),(!D||se[0]&65536)&&k(e,"bx--text-input-wrapper--inline",T[16]),(!D||se[0]&16)&&k(e,"bx--text-input-wrapper--light",T[4]),(!D||se[0]&131072)&&k(e,"bx--text-input-wrapper--readonly",T[17])},i(T){D||(z(oe),z(ue),z(U),z(ne),z(ee),D=!0)},o(T){J(oe),J(ue),J(U),J(ne),J(ee),D=!1},d(T){T&&x(e),oe&&oe.d(),ue&&ue.d(),U&&U.d(),ne&&ne.d(),ee&&ee.d(),n[36](null),fe&&fe.d(),xe&&xe.d(),Ce&&Ce.d(),ke&&ke.d(),je&&je.d(),Ee&&Ee.d(),ve=!1,pt(G)}}}function Qs(n,e,t){let r,o,l;const a=["size","value","placeholder","light","disabled","helperText","id","name","labelText","hideLabel","invalid","invalidText","warn","warnText","ref","required","inline","readonly"];let u=Oe(e,a),{$$slots:c={},$$scope:f}=e;const p=Nr(c);let{size:v=void 0}=e,{value:g=""}=e,{placeholder:h=""}=e,{light:m=!1}=e,{disabled:E=!1}=e,{helperText:O=""}=e,{id:F="ccs-"+Math.random().toString(36)}=e,{name:I=void 0}=e,{labelText:C=""}=e,{hideLabel:A=!1}=e,{invalid:P=!1}=e,{invalidText:D=""}=e,{warn:ve=!1}=e,{warnText:G=""}=e,{ref:oe=null}=e,{required:ue=!1}=e,{inline:U=!1}=e,{readonly:ne=!1}=e;const ee=Ar("Form"),ae=Sl();function K($){return u.type!=="number"?$:$!=""?Number($):null}const fe=$=>{t(0,g=K($.target.value)),ae("input",g)},xe=$=>{ae("change",K($.target.value))};function Ce($){ie.call(this,n,$)}function ke($){ie.call(this,n,$)}function je($){ie.call(this,n,$)}function Ee($){ie.call(this,n,$)}function T($){ie.call(this,n,$)}function se($){ie.call(this,n,$)}function st($){ie.call(this,n,$)}function Fr($){ie.call(this,n,$)}function on($){ie.call(this,n,$)}function Ke($){$e[$?"unshift":"push"](()=>{oe=$,t(1,oe)})}function de(){g=this.value,t(0,g)}return n.$$set=$=>{e=me(me({},e),Xe($)),t(23,u=Oe(e,a)),"size"in $&&t(2,v=$.size),"value"in $&&t(0,g=$.value),"placeholder"in $&&t(3,h=$.placeholder),"light"in $&&t(4,m=$.light),"disabled"in $&&t(5,E=$.disabled),"helperText"in $&&t(6,O=$.helperText),"id"in $&&t(7,F=$.id),"name"in $&&t(8,I=$.name),"labelText"in $&&t(9,C=$.labelText),"hideLabel"in $&&t(10,A=$.hideLabel),"invalid"in $&&t(11,P=$.invalid),"invalidText"in $&&t(12,D=$.invalidText),"warn"in $&&t(13,ve=$.warn),"warnText"in $&&t(14,G=$.warnText),"ref"in $&&t(1,oe=$.ref),"required"in $&&t(15,ue=$.required),"inline"in $&&t(16,U=$.inline),"readonly"in $&&t(17,ne=$.readonly),"$$scope"in $&&t(25,f=$.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&128&&t(19,o=`error-${F}`),n.$$.dirty[0]&128&&t(18,l=`warn-${F}`)},t(20,r=!!ee&&ee.isFluid),[g,oe,v,h,m,E,O,F,I,C,A,P,D,ve,G,ue,U,ne,l,o,r,fe,xe,u,p,f,c,Ce,ke,je,Ee,T,se,st,Fr,on,Ke,de]}class $s extends Ie{constructor(e){super(),Le(this,e,Qs,Ks,Me,{size:2,value:0,placeholder:3,light:4,disabled:5,helperText:6,id:7,name:8,labelText:9,hideLabel:10,invalid:11,invalidText:12,warn:13,warnText:14,ref:1,required:15,inline:16,readonly:17},null,[-1,-1])}}const eu=$s;function tu(n){let e;return{c(){e=be(`Click one of the draw icons to the top right of the map (the icons allow
      you to draw points, lines, polygons or routes)`)},m(t,r){M(t,e,r)},d(t){t&&x(e)}}}function nu(n){let e;return{c(){e=be(`Draw the intervention on the map, clicking the original point or 'Finish
      snapping' for the Polygon and Route tools respectively`)},m(t,r){M(t,e,r)},d(t){t&&x(e)}}}function ru(n){let e;return{c(){e=be("Fill in the details that appear (Intervention type, name, description)")},m(t,r){M(t,e,r)},d(t){t&&x(e)}}}function iu(n){let e;return{c(){e=be(`Click the "Save" button or "Delete" button to save or remove the
      intervention`)},m(t,r){M(t,e,r)},d(t){t&&x(e)}}}function ou(n){let e,t,r,o,l,a,u,c;return e=new pr({props:{$$slots:{default:[tu]},$$scope:{ctx:n}}}),r=new pr({props:{$$slots:{default:[nu]},$$scope:{ctx:n}}}),l=new pr({props:{$$slots:{default:[ru]},$$scope:{ctx:n}}}),u=new pr({props:{$$slots:{default:[iu]},$$scope:{ctx:n}}}),{c(){he(e.$$.fragment),t=H(),he(r.$$.fragment),o=H(),he(l.$$.fragment),a=H(),he(u.$$.fragment)},m(f,p){pe(e,f,p),M(f,t,p),pe(r,f,p),M(f,o,p),pe(l,f,p),M(f,a,p),pe(u,f,p),c=!0},p(f,p){const v={};p&4&&(v.$$scope={dirty:p,ctx:f}),e.$set(v);const g={};p&4&&(g.$$scope={dirty:p,ctx:f}),r.$set(g);const h={};p&4&&(h.$$scope={dirty:p,ctx:f}),l.$set(h);const m={};p&4&&(m.$$scope={dirty:p,ctx:f}),u.$set(m)},i(f){c||(z(e.$$.fragment,f),z(r.$$.fragment,f),z(l.$$.fragment,f),z(u.$$.fragment,f),c=!0)},o(f){J(e.$$.fragment,f),J(r.$$.fragment,f),J(l.$$.fragment,f),J(u.$$.fragment,f),c=!1},d(f){ge(e,f),f&&x(t),ge(r,f),f&&x(o),ge(l,f),f&&x(a),ge(u,f)}}}function lu(n){let e,t,r,o,l,a,u,c,f,p,v,g,h,m,E,O,F,I,C,A,P,D,ve,G,oe,ue;return l=new Ns({props:{$$slots:{default:[ou]},$$scope:{ctx:n}}}),{c(){e=B("p"),e.textContent="For each intervention:",t=H(),r=B("br"),o=H(),he(l.$$.fragment),a=H(),u=B("br"),c=H(),f=B("p"),f.textContent=`Repeat the steps above for each substantial infrastructure intervention in
    the scheme.`,p=H(),v=B("br"),g=H(),h=B("p"),h.textContent=`To make further edits to attribute data, or to delete an intervention, click
    on its name in the left hand panel or its geometry in the map.`,m=H(),E=B("br"),O=H(),F=B("p"),F.textContent=`Click the "Export to GeoJSON" button to download the dataset representing
    the scheme, which can be made up of one or more intervention, as a GeoJSON
    file. After saving the file, you can delete the interventions, change the
    scheme name, and start a new set of interventions representing a new scheme.`,I=H(),C=B("br"),A=H(),P=B("p"),P.textContent=`To load a GeoJSON file that you have already saved from the tool, click the
    "Load from GeoJSON" button and select the file.`,D=H(),ve=B("br"),G=H(),oe=B("p"),oe.innerHTML=`Note: the <strong>Route tool</strong> works by calculating routes between
    start and end points using the existing transport network according to
    OpenStreetMap. Use it by clicking on the location where you would like the
    route to start and then clicking on the location where you would like the
    route to end on the map. The route will be calculated and drawn on the map.
    After you click &quot;Finish snapping&quot; you can edit the route by dragging
    individual points. This can be useful for representing links that are not
    part of the existing transport network, such as a new bridge or path.
    However,
    <strong>you cannot add or remove points</strong> with the Route tool. If the
    planned route intervention you would like to sketch as part of a scheme contains
    one or more new links (for example containing new bridges or paths between cul-de-sacs),
    you may want to use the Line tool instead.`},m(U,ne){M(U,e,ne),M(U,t,ne),M(U,r,ne),M(U,o,ne),pe(l,U,ne),M(U,a,ne),M(U,u,ne),M(U,c,ne),M(U,f,ne),M(U,p,ne),M(U,v,ne),M(U,g,ne),M(U,h,ne),M(U,m,ne),M(U,E,ne),M(U,O,ne),M(U,F,ne),M(U,I,ne),M(U,C,ne),M(U,A,ne),M(U,P,ne),M(U,D,ne),M(U,ve,ne),M(U,G,ne),M(U,oe,ne),ue=!0},p(U,ne){const ee={};ne&4&&(ee.$$scope={dirty:ne,ctx:U}),l.$set(ee)},i(U){ue||(z(l.$$.fragment,U),ue=!0)},o(U){J(l.$$.fragment,U),ue=!1},d(U){U&&x(e),U&&x(t),U&&x(r),U&&x(o),ge(l,U),U&&x(a),U&&x(u),U&&x(c),U&&x(f),U&&x(p),U&&x(v),U&&x(g),U&&x(h),U&&x(m),U&&x(E),U&&x(O),U&&x(F),U&&x(I),U&&x(C),U&&x(A),U&&x(P),U&&x(D),U&&x(ve),U&&x(G),U&&x(oe)}}}function au(n){let e,t,r;function o(a){n[1](a)}let l={passiveModal:!0,modalHeading:"Instructions",$$slots:{default:[lu]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.open=n[0]),e=new Ua({props:l}),$e.push(()=>Ct(e,"open",o,n[0])),{c(){he(e.$$.fragment)},m(a,u){pe(e,a,u),r=!0},p(a,[u]){const c={};u&4&&(c.$$scope={dirty:u,ctx:a}),!t&&u&1&&(t=!0,c.open=a[0],Ot(()=>t=!1)),e.$set(c)},i(a){r||(z(e.$$.fragment,a),r=!0)},o(a){J(e.$$.fragment,a),r=!1},d(a){ge(e,a)}}}function su(n,e,t){let{open:r}=e;function o(l){r=l,t(0,r)}return n.$$set=l=>{"open"in l&&t(0,r=l.open)},[r,o]}class uu extends Ie{constructor(e){super(),Le(this,e,su,au,Me,{open:0})}}const mn=rn(null),Re=rn(Rn()),Nn=rn(null),li=rn(null);function Rn(){return{type:"FeatureCollection",features:[]}}const Ei=kl(Re,n=>{let e=n.features.find(t=>t.properties.editing);return e?e.id:null});function fu(n){Re.update(e=>{for(let t of e.features)t.id==n?t.properties.editing=!0:delete t.properties.editing;return e})}function Ol(){Re.update(n=>(n.features.forEach(e=>{delete e.properties.editing}),n))}function el(n){let e;const t=n[4].default,r=ft(t,n,n[3],null);return{c(){r&&r.c()},m(o,l){r&&r.m(o,l),e=!0},p(o,l){r&&r.p&&(!e||l&8)&&ct(r,t,o,o[3],e?ht(t,o[3],l,null):dt(o[3]),null)},i(o){e||(z(r,o),e=!0)},o(o){J(r,o),e=!1},d(o){r&&r.d(o)}}}function cu(n){let e,t,r=n[1]&&el(n);return{c(){e=B("div"),r&&r.c(),Z(e,"class","map svelte-12dpf1u")},m(o,l){M(o,e,l),r&&r.m(e,null),n[5](e),t=!0},p(o,[l]){o[1]?r?(r.p(o,l),l&2&&z(r,1)):(r=el(o),r.c(),z(r,1),r.m(e,null)):r&&(nt(),J(r,1,1,()=>{r=null}),rt())},i(o){t||(z(r),t=!0)},o(o){J(r),t=!1},d(o){o&&x(e),r&&r.d(),n[5](null)}}}function du(n,e,t){let{$$slots:r={},$$scope:o}=e,{style:l}=e,a,u,c=!1;vi("setCamera",!window.location.hash),Ht(()=>{a=new ei.Map({container:u,style:`https://api.maptiler.com/maps/${l}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),a.addControl(new ei.ScaleControl),a.addControl(new ei.NavigationControl({visualizePitch:!0}),"bottom-right"),a.on("load",()=>{t(1,c=!0),mn.set(a)}),new ResizeObserver(()=>{a.resize()}).observe(u)}),Tl(()=>{a.remove()});function f(p){$e[p?"unshift":"push"](()=>{u=p,t(0,u)})}return n.$$set=p=>{"style"in p&&t(2,l=p.style),"$$scope"in p&&t(3,o=p.$$scope)},[u,c,l,o,r,f]}class hu extends Ie{constructor(e){super(),Le(this,e,du,cu,Me,{style:2})}}const pu=n=>({}),tl=n=>({}),gu=n=>({}),nl=n=>({}),mu=n=>({}),rl=n=>({});function bu(n){let e,t,r,o,l,a,u,c,f,p,v,g;const h=n[3].nav,m=ft(h,n,n[2],rl),E=n[3].sidebar,O=ft(E,n,n[2],nl),F=n[3].main,I=ft(F,n,n[2],tl);return{c(){e=B("aside"),t=B("div"),r=B("nav"),m&&m.c(),o=H(),O&&O.c(),l=H(),a=B("div"),a.textContent="",c=H(),f=B("main"),I&&I.c(),Z(r,"class","svelte-19nerxn"),Z(t,"class","sidebar-content content-container svelte-19nerxn"),Z(a,"class","sidebar-toggle rounded-rect svelte-19nerxn"),Z(e,"class",u=go(n[0]?"":"collapsed")+" svelte-19nerxn"),Z(f,"class","svelte-19nerxn")},m(C,A){M(C,e,A),R(e,t),R(t,r),m&&m.m(r,null),R(t,o),O&&O.m(t,null),R(e,l),R(e,a),M(C,c,A),M(C,f,A),I&&I.m(f,null),p=!0,v||(g=Q(a,"click",n[1]),v=!0)},p(C,[A]){m&&m.p&&(!p||A&4)&&ct(m,h,C,C[2],p?ht(h,C[2],A,mu):dt(C[2]),rl),O&&O.p&&(!p||A&4)&&ct(O,E,C,C[2],p?ht(E,C[2],A,gu):dt(C[2]),nl),(!p||A&1&&u!==(u=go(C[0]?"":"collapsed")+" svelte-19nerxn"))&&Z(e,"class",u),I&&I.p&&(!p||A&4)&&ct(I,F,C,C[2],p?ht(F,C[2],A,pu):dt(C[2]),tl)},i(C){p||(z(m,C),z(O,C),z(I,C),p=!0)},o(C){J(m,C),J(O,C),J(I,C),p=!1},d(C){C&&x(e),m&&m.d(C),O&&O.d(C),C&&x(c),C&&x(f),I&&I.d(C),v=!1,g()}}}function vu(n,e,t){let{$$slots:r={},$$scope:o}=e,l=!0;function a(){t(0,l=!l)}return n.$$set=u=>{"$$scope"in u&&t(2,o=u.$$scope)},[l,a,o,r]}class _u extends Ie{constructor(e){super(),Le(this,e,vu,bu,Me,{})}}var ut=63710088e-1,yu={centimeters:ut*100,centimetres:ut*100,degrees:ut/111325,feet:ut*3.28084,inches:ut*39.37,kilometers:ut/1e3,kilometres:ut/1e3,meters:ut,metres:ut,miles:ut/1609.344,millimeters:ut*1e3,millimetres:ut*1e3,nauticalmiles:ut/1852,radians:1,yards:ut*1.0936};function Fn(n,e,t){t===void 0&&(t={});var r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=e||{},r.geometry=n,r}function Eu(n,e,t){t===void 0&&(t={});for(var r=0,o=n;r<o.length;r++){var l=o[r];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<l[l.length-1].length;a++)if(l[l.length-1][a]!==l[0][a])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:n};return Fn(u,e,t)}function wu(n,e,t){if(t===void 0&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:n};return Fn(r,e,t)}function Su(n,e,t){t===void 0&&(t={});var r={type:"MultiPolygon",coordinates:n};return Fn(r,e,t)}function ku(n,e){e===void 0&&(e="kilometers");var t=yu[e];if(!t)throw new Error(e+" units is invalid");return n*t}function mr(n){var e=n%360;return e*Math.PI/180}/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Tu(n,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(f){return function(p){return c([f,p])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(l=f[0]&2?o.return:f[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,f[1])).done)return l;switch(o=0,l&&(f=[f[0]&2,l.value]),f[0]){case 0:case 1:l=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,o=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!l||f[1]>l[0]&&f[1]<l[3])){t.label=f[1];break}if(f[0]===6&&t.label<l[1]){t.label=l[1],l=f;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(f);break}l[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(p){f=[6,p],o=0}finally{r=l=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Yt=function(){function n(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return n}();function Cu(n,e){return n>e?1:n<e?-1:0}function zt(n,e,t){for(var r=new Yt(null,null),o=r,l=r;;){var a=t(n,e.key);if(a<0){if(e.left===null)break;if(t(n,e.left.key)<0){var u=e.left;if(e.left=u.right,u.right=e,e=u,e.left===null)break}l.left=e,l=e,e=e.left}else if(a>0){if(e.right===null)break;if(t(n,e.right.key)>0){var u=e.right;if(e.right=u.left,u.left=e,e=u,e.right===null)break}o.right=e,o=e,e=e.right}else break}return o.right=e.left,l.left=e.right,e.left=r.right,e.right=r.left,e}function ti(n,e,t,r){var o=new Yt(n,e);if(t===null)return o.left=o.right=null,o;t=zt(n,t,r);var l=r(n,t.key);return l<0?(o.left=t.left,o.right=t,t.left=null):l>=0&&(o.right=t.right,o.left=t,t.right=null),o}function il(n,e,t){var r=null,o=null;if(e){e=zt(n,e,t);var l=t(e.key,n);l===0?(r=e.left,o=e.right):l<0?(o=e.right,e.right=null,r=e):(r=e.left,e.left=null,o=e)}return{left:r,right:o}}function Ou(n,e,t){return e===null?n:(n===null||(e=zt(n.key,e,t),e.left=n),e)}function ai(n,e,t,r,o){if(n){r(""+e+(t?" ":" ")+o(n)+`
`);var l=e+(t?"    ":"   ");n.left&&ai(n.left,l,!1,r,o),n.right&&ai(n.right,l,!0,r,o)}}var wi=function(){function n(e){e===void 0&&(e=Cu),this._root=null,this._size=0,this._comparator=e}return n.prototype.insert=function(e,t){return this._size++,this._root=ti(e,t,this._root,this._comparator)},n.prototype.add=function(e,t){var r=new Yt(e,t);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var o=this._comparator,l=zt(e,this._root,o),a=o(e,l.key);return a===0?this._root=l:(a<0?(r.left=l.left,r.right=l,l.left=null):a>0&&(r.right=l.right,r.left=l,l.right=null),this._size++,this._root=r),this._root},n.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},n.prototype._remove=function(e,t,r){var o;if(t===null)return null;t=zt(e,t,r);var l=r(e,t.key);return l===0?(t.left===null?o=t.right:(o=zt(e,t.left,r),o.right=t.right),this._size--,o):t},n.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=zt(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},n.prototype.findStatic=function(e){for(var t=this._root,r=this._comparator;t;){var o=r(e,t.key);if(o===0)return t;o<0?t=t.left:t=t.right}return null},n.prototype.find=function(e){return this._root&&(this._root=zt(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},n.prototype.contains=function(e){for(var t=this._root,r=this._comparator;t;){var o=r(e,t.key);if(o===0)return!0;o<0?t=t.left:t=t.right}return!1},n.prototype.forEach=function(e,t){for(var r=this._root,o=[],l=!1;!l;)r!==null?(o.push(r),r=r.left):o.length!==0?(r=o.pop(),e.call(t,r),r=r.right):l=!0;return this},n.prototype.range=function(e,t,r,o){for(var l=[],a=this._comparator,u=this._root,c;l.length!==0||u;)if(u)l.push(u),u=u.left;else{if(u=l.pop(),c=a(u.key,t),c>0)break;if(a(u.key,e)>=0&&r.call(o,u))return this;u=u.right}return this},n.prototype.keys=function(){var e=[];return this.forEach(function(t){var r=t.key;return e.push(r)}),e},n.prototype.values=function(){var e=[];return this.forEach(function(t){var r=t.data;return e.push(r)}),e},n.prototype.min=function(){return this._root?this.minNode(this._root).key:null},n.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},n.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},n.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},n.prototype.at=function(e){for(var t=this._root,r=!1,o=0,l=[];!r;)if(t)l.push(t),t=t.left;else if(l.length>0){if(t=l.pop(),o===e)return t;o++,t=t.right}else r=!0;return null},n.prototype.next=function(e){var t=this._root,r=null;if(e.right){for(r=e.right;r.left;)r=r.left;return r}for(var o=this._comparator;t;){var l=o(e.key,t.key);if(l===0)break;l<0?(r=t,t=t.left):t=t.right}return r},n.prototype.prev=function(e){var t=this._root,r=null;if(e.left!==null){for(r=e.left;r.right;)r=r.right;return r}for(var o=this._comparator;t;){var l=o(e.key,t.key);if(l===0)break;l<0?t=t.left:(r=t,t=t.right)}return r},n.prototype.clear=function(){return this._root=null,this._size=0,this},n.prototype.toList=function(){return Lu(this._root)},n.prototype.load=function(e,t,r){t===void 0&&(t=[]),r===void 0&&(r=!1);var o=e.length,l=this._comparator;if(r&&fi(e,t,0,o-1,l),this._root===null)this._root=si(e,t,0,o),this._size=o;else{var a=Mu(this.toList(),Iu(e,t),l);o=this._size+o,this._root=ui({head:a},0,o)}return this},n.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){e===void 0&&(e=function(r){return String(r.key)});var t=[];return ai(this._root,"",!0,function(r){return t.push(r)},e),t.join("")},n.prototype.update=function(e,t,r){var o=this._comparator,l=il(e,this._root,o),a=l.left,u=l.right;o(e,t)<0?u=ti(t,r,u,o):a=ti(t,r,a,o),this._root=Ou(a,u,o)},n.prototype.split=function(e){return il(e,this._root,this._comparator)},n.prototype[Symbol.iterator]=function(){var e;return Tu(this,function(t){switch(t.label){case 0:e=this.minNode(),t.label=1;case 1:return e?[4,e]:[3,3];case 2:return t.sent(),e=this.next(e),[3,1];case 3:return[2]}})},n}();function si(n,e,t,r){var o=r-t;if(o>0){var l=t+Math.floor(o/2),a=n[l],u=e[l],c=new Yt(a,u);return c.left=si(n,e,t,l),c.right=si(n,e,l+1,r),c}return null}function Iu(n,e){for(var t=new Yt(null,null),r=t,o=0;o<n.length;o++)r=r.next=new Yt(n[o],e[o]);return r.next=null,t.next}function Lu(n){for(var e=n,t=[],r=!1,o=new Yt(null,null),l=o;!r;)e?(t.push(e),e=e.left):t.length>0?(e=l=l.next=t.pop(),e=e.right):r=!0;return l.next=null,o.next}function ui(n,e,t){var r=t-e;if(r>0){var o=e+Math.floor(r/2),l=ui(n,e,o),a=n.head;return a.left=l,n.head=n.head.next,a.right=ui(n,o+1,t),a}return null}function Mu(n,e,t){for(var r=new Yt(null,null),o=r,l=n,a=e;l!==null&&a!==null;)t(l.key,a.key)<0?(o.next=l,l=l.next):(o.next=a,a=a.next),o=o.next;return l!==null?o.next=l:a!==null&&(o.next=a),r.next}function fi(n,e,t,r,o){if(!(t>=r)){for(var l=n[t+r>>1],a=t-1,u=r+1;;){do a++;while(o(n[a],l)<0);do u--;while(o(n[u],l)>0);if(a>=u)break;var c=n[a];n[a]=n[u],n[u]=c,c=e[a],e[a]=e[u],e[u]=c}fi(n,e,t,u,o),fi(n,e,u+1,r,o)}}function vt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function ol(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function lt(n,e,t){return e&&ol(n.prototype,e),t&&ol(n,t),n}var In=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},ci=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var r=e.ll.x<t.ll.x?t.ll.x:e.ll.x,o=e.ur.x<t.ur.x?e.ur.x:t.ur.x,l=e.ll.y<t.ll.y?t.ll.y:e.ll.y,a=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:r,y:l},ur:{x:o,y:a}}},Vt=Number.EPSILON;Vt===void 0&&(Vt=Math.pow(2,-52));var xu=Vt*Vt,di=function(e,t){if(-Vt<e&&e<Vt&&-Vt<t&&t<Vt)return 0;var r=e-t;return r*r<xu*e*t?0:e<t?-1:1},Pu=function(){function n(){vt(this,n),this.reset()}return lt(n,[{key:"reset",value:function(){this.xRounder=new ll,this.yRounder=new ll}},{key:"round",value:function(t,r){return{x:this.xRounder.round(t),y:this.yRounder.round(r)}}}]),n}(),ll=function(){function n(){vt(this,n),this.tree=new wi,this.round(0)}return lt(n,[{key:"round",value:function(t){var r=this.tree.add(t),o=this.tree.prev(r);if(o!==null&&di(r.key,o.key)===0)return this.tree.remove(t),o.key;var l=this.tree.next(r);return l!==null&&di(r.key,l.key)===0?(this.tree.remove(t),l.key):t}}]),n}(),Dn=new Pu,xn=function(e,t){return e.x*t.y-e.y*t.x},Il=function(e,t){return e.x*t.x+e.y*t.y},al=function(e,t,r){var o={x:t.x-e.x,y:t.y-e.y},l={x:r.x-e.x,y:r.y-e.y},a=xn(o,l);return di(a,0)},kr=function(e){return Math.sqrt(Il(e,e))},Au=function(e,t,r){var o={x:t.x-e.x,y:t.y-e.y},l={x:r.x-e.x,y:r.y-e.y};return xn(l,o)/kr(l)/kr(o)},Nu=function(e,t,r){var o={x:t.x-e.x,y:t.y-e.y},l={x:r.x-e.x,y:r.y-e.y};return Il(l,o)/kr(l)/kr(o)},sl=function(e,t,r){return t.y===0?null:{x:e.x+t.x/t.y*(r-e.y),y:r}},ul=function(e,t,r){return t.x===0?null:{x:r,y:e.y+t.y/t.x*(r-e.x)}},Ru=function(e,t,r,o){if(t.x===0)return ul(r,o,e.x);if(o.x===0)return ul(e,t,r.x);if(t.y===0)return sl(r,o,e.y);if(o.y===0)return sl(e,t,r.y);var l=xn(t,o);if(l==0)return null;var a={x:r.x-e.x,y:r.y-e.y},u=xn(a,t)/l,c=xn(a,o)/l,f=e.x+c*t.x,p=r.x+u*o.x,v=e.y+c*t.y,g=r.y+u*o.y,h=(f+p)/2,m=(v+g)/2;return{x:h,y:m}},Tt=function(){lt(n,null,[{key:"compare",value:function(t,r){var o=n.comparePoints(t.point,r.point);return o!==0?o:(t.point!==r.point&&t.link(r),t.isLeft!==r.isLeft?t.isLeft?1:-1:Tr.compare(t.segment,r.segment))}},{key:"comparePoints",value:function(t,r){return t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0}}]);function n(e,t){vt(this,n),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}return lt(n,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var r=t.point.events,o=0,l=r.length;o<l;o++){var a=r[o];this.point.events.push(a),a.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,r=0;r<t;r++){var o=this.point.events[r];if(o.segment.consumedBy===void 0)for(var l=r+1;l<t;l++){var a=this.point.events[l];a.consumedBy===void 0&&o.otherSE.point.events===a.otherSE.point.events&&o.segment.consume(a.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],r=0,o=this.point.events.length;r<o;r++){var l=this.point.events[r];l!==this&&!l.segment.ringOut&&l.segment.isInResult()&&t.push(l)}return t}},{key:"getLeftmostComparator",value:function(t){var r=this,o=new Map,l=function(u){var c=u.otherSE;o.set(u,{sine:Au(r.point,t.point,c.point),cosine:Nu(r.point,t.point,c.point)})};return function(a,u){o.has(a)||l(a),o.has(u)||l(u);var c=o.get(a),f=c.sine,p=c.cosine,v=o.get(u),g=v.sine,h=v.cosine;return f>=0&&g>=0?p<h?1:p>h?-1:0:f<0&&g<0?p<h?-1:p>h?1:0:g<f?-1:g>f?1:0}}}]),n}(),Fu=0,Tr=function(){lt(n,null,[{key:"compare",value:function(t,r){var o=t.leftSE.point.x,l=r.leftSE.point.x,a=t.rightSE.point.x,u=r.rightSE.point.x;if(u<o)return 1;if(a<l)return-1;var c=t.leftSE.point.y,f=r.leftSE.point.y,p=t.rightSE.point.y,v=r.rightSE.point.y;if(o<l){if(f<c&&f<p)return 1;if(f>c&&f>p)return-1;var g=t.comparePoint(r.leftSE.point);if(g<0)return 1;if(g>0)return-1;var h=r.comparePoint(t.rightSE.point);return h!==0?h:-1}if(o>l){if(c<f&&c<v)return-1;if(c>f&&c>v)return 1;var m=r.comparePoint(t.leftSE.point);if(m!==0)return m;var E=t.comparePoint(r.rightSE.point);return E<0?1:E>0?-1:1}if(c<f)return-1;if(c>f)return 1;if(a<u){var O=r.comparePoint(t.rightSE.point);if(O!==0)return O}if(a>u){var F=t.comparePoint(r.rightSE.point);if(F<0)return 1;if(F>0)return-1}if(a!==u){var I=p-c,C=a-o,A=v-f,P=u-l;if(I>C&&A<P)return 1;if(I<C&&A>P)return-1}return a>u?1:a<u||p<v?-1:p>v?1:t.id<r.id?-1:t.id>r.id?1:0}}]);function n(e,t,r,o){vt(this,n),this.id=++Fu,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=r,this.windings=o}return lt(n,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,r=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<r?t:r},ur:{x:this.rightSE.point.x,y:t>r?t:r}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var r=this.leftSE.point,o=this.rightSE.point,l=this.vector();if(r.x===o.x)return t.x===r.x?0:t.x<r.x?1:-1;var a=(t.y-r.y)/l.y,u=r.x+a*l.x;if(t.x===u)return 0;var c=(t.x-r.x)/l.x,f=r.y+c*l.y;return t.y===f?0:t.y<f?-1:1}},{key:"getIntersection",value:function(t){var r=this.bbox(),o=t.bbox(),l=ci(r,o);if(l===null)return null;var a=this.leftSE.point,u=this.rightSE.point,c=t.leftSE.point,f=t.rightSE.point,p=In(r,c)&&this.comparePoint(c)===0,v=In(o,a)&&t.comparePoint(a)===0,g=In(r,f)&&this.comparePoint(f)===0,h=In(o,u)&&t.comparePoint(u)===0;if(v&&p)return h&&!g?u:!h&&g?f:null;if(v)return g&&a.x===f.x&&a.y===f.y?null:a;if(p)return h&&u.x===c.x&&u.y===c.y?null:c;if(h&&g)return null;if(h)return u;if(g)return f;var m=Ru(a,this.vector(),c,t.vector());return m===null||!In(l,m)?null:Dn.round(m.x,m.y)}},{key:"split",value:function(t){var r=[],o=t.events!==void 0,l=new Tt(t,!0),a=new Tt(t,!1),u=this.rightSE;this.replaceRightSE(a),r.push(a),r.push(l);var c=new n(l,u,this.rings.slice(),this.windings.slice());return Tt.comparePoints(c.leftSE.point,c.rightSE.point)>0&&c.swapEvents(),Tt.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),o&&(l.checkForConsuming(),a.checkForConsuming()),r}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var r=0,o=this.windings.length;r<o;r++)this.windings[r]*=-1}},{key:"consume",value:function(t){for(var r=this,o=t;r.consumedBy;)r=r.consumedBy;for(;o.consumedBy;)o=o.consumedBy;var l=n.compare(r,o);if(l!==0){if(l>0){var a=r;r=o,o=a}if(r.prev===o){var u=r;r=o,o=u}for(var c=0,f=o.rings.length;c<f;c++){var p=o.rings[c],v=o.windings[c],g=r.rings.indexOf(p);g===-1?(r.rings.push(p),r.windings.push(v)):r.windings[g]+=v}o.rings=null,o.windings=null,o.consumedBy=r,o.leftSE.consumedBy=r.leftSE,o.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var r=this._afterState.rings,o=this._afterState.windings,l=this._afterState.multiPolys,a=0,u=this.rings.length;a<u;a++){var c=this.rings[a],f=this.windings[a],p=r.indexOf(c);p===-1?(r.push(c),o.push(f)):o[p]+=f}for(var v=[],g=[],h=0,m=r.length;h<m;h++)if(o[h]!==0){var E=r[h],O=E.poly;if(g.indexOf(O)===-1)if(E.isExterior)v.push(O);else{g.indexOf(O)===-1&&g.push(O);var F=v.indexOf(E.poly);F!==-1&&v.splice(F,1)}}for(var I=0,C=v.length;I<C;I++){var A=v[I].multiPoly;l.indexOf(A)===-1&&l.push(A)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch(Et.type){case"union":{var o=t.length===0,l=r.length===0;this._isInResult=o!==l;break}case"intersection":{var a,u;t.length<r.length?(a=t.length,u=r.length):(a=r.length,u=t.length),this._isInResult=u===Et.numMultiPolys&&a<u;break}case"xor":{var c=Math.abs(t.length-r.length);this._isInResult=c%2===1;break}case"difference":{var f=function(v){return v.length===1&&v[0].isSubject};this._isInResult=f(t)!==f(r);break}default:throw new Error("Unrecognized operation type found ".concat(Et.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,r,o){var l,a,u,c=Tt.comparePoints(t,r);if(c<0)l=t,a=r,u=1;else if(c>0)l=r,a=t,u=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var f=new Tt(l,!0),p=new Tt(a,!1);return new n(f,p,[o],[u])}}]),n}(),fl=function(){function n(e,t,r){if(vt(this,n),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=r,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=Dn.round(e[0][0],e[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var l=o,a=1,u=e.length;a<u;a++){if(typeof e[a][0]!="number"||typeof e[a][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=Dn.round(e[a][0],e[a][1]);c.x===l.x&&c.y===l.y||(this.segments.push(Tr.fromRing(l,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),l=c)}(o.x!==l.x||o.y!==l.y)&&this.segments.push(Tr.fromRing(l,o,this))}return lt(n,[{key:"getSweepEvents",value:function(){for(var t=[],r=0,o=this.segments.length;r<o;r++){var l=this.segments[r];t.push(l.leftSE),t.push(l.rightSE)}return t}}]),n}(),Du=function(){function n(e,t){if(vt(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new fl(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,o=e.length;r<o;r++){var l=new fl(e[r],this,!1);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.interiorRings.push(l)}this.multiPoly=t}return lt(n,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),r=0,o=this.interiorRings.length;r<o;r++)for(var l=this.interiorRings[r].getSweepEvents(),a=0,u=l.length;a<u;a++)t.push(l[a]);return t}}]),n}(),cl=function(){function n(e,t){if(vt(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,o=e.length;r<o;r++){var l=new Du(e[r],this);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.polys.push(l)}this.isSubject=t}return lt(n,[{key:"getSweepEvents",value:function(){for(var t=[],r=0,o=this.polys.length;r<o;r++)for(var l=this.polys[r].getSweepEvents(),a=0,u=l.length;a<u;a++)t.push(l[a]);return t}}]),n}(),Uu=function(){lt(n,null,[{key:"factory",value:function(t){for(var r=[],o=0,l=t.length;o<l;o++){var a=t[o];if(!(!a.isInResult()||a.ringOut)){for(var u=null,c=a.leftSE,f=a.rightSE,p=[c],v=c.point,g=[];u=c,c=f,p.push(c),c.point!==v;)for(;;){var h=c.getAvailableLinkedEvents();if(h.length===0){var m=p[0].point,E=p[p.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(m.x,",")+" ".concat(m.y,"]. Last matching segment found ends at")+" [".concat(E.x,", ").concat(E.y,"]."))}if(h.length===1){f=h[0].otherSE;break}for(var O=null,F=0,I=g.length;F<I;F++)if(g[F].point===c.point){O=F;break}if(O!==null){var C=g.splice(O)[0],A=p.splice(C.index);A.unshift(A[0].otherSE),r.push(new n(A.reverse()));continue}g.push({index:p.length,point:c.point});var P=c.getLeftmostComparator(u);f=h.sort(P)[0].otherSE;break}r.push(new n(p))}}return r}}]);function n(e){vt(this,n),this.events=e;for(var t=0,r=e.length;t<r;t++)e[t].segment.ringOut=this;this.poly=null}return lt(n,[{key:"getGeom",value:function(){for(var t=this.events[0].point,r=[t],o=1,l=this.events.length-1;o<l;o++){var a=this.events[o].point,u=this.events[o+1].point;al(a,t,u)!==0&&(r.push(a),t=a)}if(r.length===1)return null;var c=r[0],f=r[1];al(c,t,f)===0&&r.shift(),r.push(r[0]);for(var p=this.isExteriorRing()?1:-1,v=this.isExteriorRing()?0:r.length-1,g=this.isExteriorRing()?r.length:-1,h=[],m=v;m!=g;m+=p)h.push([r[m].x,r[m].y]);return h}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],r=1,o=this.events.length;r<o;r++){var l=this.events[r];Tt.compare(t,l)>0&&(t=l)}for(var a=t.segment.prevInResult(),u=a?a.prevInResult():null;;){if(!a)return null;if(!u)return a.ringOut;if(u.ringOut!==a.ringOut)return u.ringOut.enclosingRing()!==a.ringOut?a.ringOut:a.ringOut.enclosingRing();a=u.prevInResult(),u=a?a.prevInResult():null}}}]),n}(),dl=function(){function n(e){vt(this,n),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return lt(n,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var r=0,o=this.interiorRings.length;r<o;r++){var l=this.interiorRings[r].getGeom();l!==null&&t.push(l)}return t}}]),n}(),ju=function(){function n(e){vt(this,n),this.rings=e,this.polys=this._composePolys(e)}return lt(n,[{key:"getGeom",value:function(){for(var t=[],r=0,o=this.polys.length;r<o;r++){var l=this.polys[r].getGeom();l!==null&&t.push(l)}return t}},{key:"_composePolys",value:function(t){for(var r=[],o=0,l=t.length;o<l;o++){var a=t[o];if(!a.poly)if(a.isExteriorRing())r.push(new dl(a));else{var u=a.enclosingRing();u.poly||r.push(new dl(u)),u.poly.addInterior(a)}}return r}}]),n}(),Bu=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tr.compare;vt(this,n),this.queue=e,this.tree=new wi(t),this.segments=[]}return lt(n,[{key:"process",value:function(t){var r=t.segment,o=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(r),o;var l=t.isLeft?this.tree.insert(r):this.tree.find(r);if(!l)throw new Error("Unable to find segment #".concat(r.id," ")+"[".concat(r.leftSE.point.x,", ").concat(r.leftSE.point.y,"] -> ")+"[".concat(r.rightSE.point.x,", ").concat(r.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var a=l,u=l,c=void 0,f=void 0;c===void 0;)a=this.tree.prev(a),a===null?c=null:a.key.consumedBy===void 0&&(c=a.key);for(;f===void 0;)u=this.tree.next(u),u===null?f=null:u.key.consumedBy===void 0&&(f=u.key);if(t.isLeft){var p=null;if(c){var v=c.getIntersection(r);if(v!==null&&(r.isAnEndpoint(v)||(p=v),!c.isAnEndpoint(v)))for(var g=this._splitSafely(c,v),h=0,m=g.length;h<m;h++)o.push(g[h])}var E=null;if(f){var O=f.getIntersection(r);if(O!==null&&(r.isAnEndpoint(O)||(E=O),!f.isAnEndpoint(O)))for(var F=this._splitSafely(f,O),I=0,C=F.length;I<C;I++)o.push(F[I])}if(p!==null||E!==null){var A=null;if(p===null)A=E;else if(E===null)A=p;else{var P=Tt.comparePoints(p,E);A=P<=0?p:E}this.queue.remove(r.rightSE),o.push(r.rightSE);for(var D=r.split(A),ve=0,G=D.length;ve<G;ve++)o.push(D[ve])}o.length>0?(this.tree.remove(r),o.push(t)):(this.segments.push(r),r.prev=c)}else{if(c&&f){var oe=c.getIntersection(f);if(oe!==null){if(!c.isAnEndpoint(oe))for(var ue=this._splitSafely(c,oe),U=0,ne=ue.length;U<ne;U++)o.push(ue[U]);if(!f.isAnEndpoint(oe))for(var ee=this._splitSafely(f,oe),ae=0,K=ee.length;ae<K;ae++)o.push(ee[ae])}}this.tree.remove(r)}return o}},{key:"_splitSafely",value:function(t,r){this.tree.remove(t);var o=t.rightSE;this.queue.remove(o);var l=t.split(r);return l.push(o),t.consumedBy===void 0&&this.tree.insert(t),l}}]),n}(),hl=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Gu=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,zu=function(){function n(){vt(this,n)}return lt(n,[{key:"run",value:function(t,r,o){Et.type=t,Dn.reset();for(var l=[new cl(r,!0)],a=0,u=o.length;a<u;a++)l.push(new cl(o[a],!1));if(Et.numMultiPolys=l.length,Et.type==="difference")for(var c=l[0],f=1;f<l.length;)ci(l[f].bbox,c.bbox)!==null?f++:l.splice(f,1);if(Et.type==="intersection"){for(var p=0,v=l.length;p<v;p++)for(var g=l[p],h=p+1,m=l.length;h<m;h++)if(ci(g.bbox,l[h].bbox)===null)return[]}for(var E=new wi(Tt.compare),O=0,F=l.length;O<F;O++)for(var I=l[O].getSweepEvents(),C=0,A=I.length;C<A;C++)if(E.insert(I[C]),E.size>hl)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var P=new Bu(E),D=E.size,ve=E.pop();ve;){var G=ve.key;if(E.size===D){var oe=G.segment;throw new Error("Unable to pop() ".concat(G.isLeft?"left":"right"," SweepEvent ")+"[".concat(G.point.x,", ").concat(G.point.y,"] from segment #").concat(oe.id," ")+"[".concat(oe.leftSE.point.x,", ").concat(oe.leftSE.point.y,"] -> ")+"[".concat(oe.rightSE.point.x,", ").concat(oe.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(E.size>hl)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(P.segments.length>Gu)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var ue=P.process(G),U=0,ne=ue.length;U<ne;U++){var ee=ue[U];ee.consumedBy===void 0&&E.insert(ee)}D=E.size,ve=E.pop()}Dn.reset();var ae=Uu.factory(P.segments),K=new ju(ae);return K.getGeom()}}]),n}(),Et=new zu,Vu=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Et.run("union",e,r)},qu=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Et.run("intersection",e,r)},Ju=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Et.run("xor",e,r)},Yu=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Et.run("difference",e,r)},_r={union:Vu,intersection:qu,xor:Ju,difference:Yu};function Hu(n,e){var t=Zu(e),r=null;return n.type==="FeatureCollection"?r=Wu(n):r=Ll(_r.union(n.geometry.coordinates)),r.geometry.coordinates.forEach(function(o){t.geometry.coordinates.push(o[0])}),t}function Wu(n){var e=n.features.length===2?_r.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):_r.union.apply(_r,n.features.map(function(t){return t.geometry.coordinates}));return Ll(e)}function Ll(n){return Su(n)}function Zu(n){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],t=n&&n.geometry.coordinates||e;return Eu(t)}const Xu={"line-cap":"round","line-join":"round"},Cr=["==","$type","Polygon"],Si=["==","$type","LineString"],Or=["==","$type","Point"];function Ir(n,e,t=1){return{type:"line",layout:Xu,paint:{"line-color":n,"line-width":e,"line-opacity":t}}}function Rr(n,e){return{type:"fill",paint:{"fill-color":n,"fill-opacity":e}}}function Lr(n,e,t=1){return{type:"circle",paint:{"circle-radius":e,"circle-color":n,"circle-opacity":t}}}function Ku(n,e,t){let r;ot(n,mn,a=>t(1,r=a));let{boundaryGeojson:o}=e;const l=Ar("setCamera");return Ht(()=>{l&&r.fitBounds(_i(o),{padding:20,animate:!1}),r.addSource("boundary",{type:"geojson",data:Hu(o)}),r.addLayer({id:"boundary",source:"boundary",...Rr("black",.5)})}),n.$$set=a=>{"boundaryGeojson"in a&&t(0,o=a.boundaryGeojson)},[o]}class Qu extends Ie{constructor(e){super(),Le(this,e,Ku,null,Me,{boundaryGeojson:0})}}var hi={},$u={get exports(){return hi},set exports(n){hi=n}};(function(n,e){(function(t,r){n.exports=r()})(On,function(){var t=function(i,s){var d={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},b={on:function(y,w,j){if(d[y]===void 0)throw new Error("Invalid event type: "+y);d[y].push({selector:w,fn:j})},render:function(y){s.store.featureChanged(y)}},_=function(y,w){for(var j=d[y],V=j.length;V--;){var X=j[V];if(X.selector(w)){X.fn.call(b,w)||s.store.render(),s.ui.updateMapClasses();break}}};return i.start.call(b),{render:i.render,stop:function(){i.stop&&i.stop()},trash:function(){i.trash&&(i.trash(),s.store.render())},combineFeatures:function(){i.combineFeatures&&i.combineFeatures()},uncombineFeatures:function(){i.uncombineFeatures&&i.uncombineFeatures()},drag:function(y){_("drag",y)},click:function(y){_("click",y)},mousemove:function(y){_("mousemove",y)},mousedown:function(y){_("mousedown",y)},mouseup:function(y){_("mouseup",y)},mouseout:function(y){_("mouseout",y)},keydown:function(y){_("keydown",y)},keyup:function(y){_("keyup",y)},touchstart:function(y){_("touchstart",y)},touchmove:function(y){_("touchmove",y)},touchend:function(y){_("touchend",y)},tap:function(y){_("tap",y)}}};function r(i){if(i.__esModule)return i;var s=i.default;if(typeof s=="function"){var d=function b(){if(this instanceof b){var _=[null];_.push.apply(_,arguments);var y=Function.bind.apply(s,_);return new y}return s.apply(this,arguments)};d.prototype=s.prototype}else d={};return Object.defineProperty(d,"__esModule",{value:!0}),Object.keys(i).forEach(function(b){var _=Object.getOwnPropertyDescriptor(i,b);Object.defineProperty(d,b,_.get?_:{enumerable:!0,get:function(){return i[b]}})}),d}var o={},l={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},a=l;function u(i){var s=0;if(i&&i.length>0){s+=Math.abs(c(i[0]));for(var d=1;d<i.length;d++)s-=Math.abs(c(i[d]))}return s}function c(i){var s,d,b,_,y,w,j=0,V=i.length;if(V>2){for(w=0;w<V;w++)w===V-2?(b=V-2,_=V-1,y=0):w===V-1?(b=V-1,_=0,y=1):(b=w,_=w+1,y=w+2),s=i[b],d=i[_],j+=(f(i[y][0])-f(s[0]))*Math.sin(f(d[1]));j=j*a.RADIUS*a.RADIUS/2}return j}function f(i){return i*Math.PI/180}o.geometry=function i(s){var d,b=0;switch(s.type){case"Polygon":return u(s.coordinates);case"MultiPolygon":for(d=0;d<s.coordinates.length;d++)b+=u(s.coordinates[d]);return b;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(d=0;d<s.geometries.length;d++)b+=i(s.geometries[d]);return b}},o.ring=c;var p={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},v={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},g={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},h={POLYGON:"polygon",LINE:"line_string",POINT:"point"},m={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},E={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},O={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},F={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},I={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},C={ACTIVE:"true",INACTIVE:"false"},A=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],P=-85,D=Object.freeze({__proto__:null,classes:p,sources:v,cursors:g,types:h,geojsonTypes:m,modes:E,events:O,updateActions:F,meta:I,activeStates:C,interactions:A,LAT_MIN:-90,LAT_RENDERED_MIN:P,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),ve={Point:0,LineString:1,MultiLineString:1,Polygon:2};function G(i,s){var d=ve[i.geometry.type]-ve[s.geometry.type];return d===0&&i.geometry.type===m.POLYGON?i.area-s.area:d}function oe(i){return i.map(function(s){return s.geometry.type===m.POLYGON&&(s.area=o.geometry({type:m.FEATURE,property:{},geometry:s.geometry})),s}).sort(G).map(function(s){return delete s.area,s})}function ue(i,s){return s===void 0&&(s=0),[[i.point.x-s,i.point.y-s],[i.point.x+s,i.point.y+s]]}function U(i){if(this._items={},this._nums={},this._length=i?i.length:0,i)for(var s=0,d=i.length;s<d;s++)this.add(i[s]),i[s]!==void 0&&(typeof i[s]=="string"?this._items[i[s]]=s:this._nums[i[s]]=s)}U.prototype.add=function(i){return this.has(i)||(this._length++,typeof i=="string"?this._items[i]=this._length:this._nums[i]=this._length),this},U.prototype.delete=function(i){return this.has(i)===!1||(this._length--,delete this._items[i],delete this._nums[i]),this},U.prototype.has=function(i){return(typeof i=="string"||typeof i=="number")&&(this._items[i]!==void 0||this._nums[i]!==void 0)},U.prototype.values=function(){var i=this,s=[];return Object.keys(this._items).forEach(function(d){s.push({k:d,v:i._items[d]})}),Object.keys(this._nums).forEach(function(d){s.push({k:JSON.parse(d),v:i._nums[d]})}),s.sort(function(d,b){return d.v-b.v}).map(function(d){return d.k})},U.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ne=[I.FEATURE,I.MIDPOINT,I.VERTEX],ee={click:function(i,s,d){return ae(i,s,d,d.options.clickBuffer)},touch:function(i,s,d){return ae(i,s,d,d.options.touchBuffer)}};function ae(i,s,d,b){if(d.map===null)return[];var _=i?ue(i,b):s,y={};d.options.styles&&(y.layers=d.options.styles.map(function(X){return X.id}));var w=d.map.queryRenderedFeatures(_,y).filter(function(X){return ne.indexOf(X.properties.meta)!==-1}),j=new U,V=[];return w.forEach(function(X){var W=X.properties.id;j.has(W)||(j.add(W),V.push(X))}),oe(V)}function K(i,s){var d=ee.click(i,null,s),b={mouse:g.NONE};return d[0]&&(b.mouse=d[0].properties.active===C.ACTIVE?g.MOVE:g.POINTER,b.feature=d[0].properties.meta),s.events.currentModeName().indexOf("draw")!==-1&&(b.mouse=g.ADD),s.ui.queueMapClasses(b),s.ui.updateMapClasses(),d[0]}function fe(i,s){var d=i.x-s.x,b=i.y-s.y;return Math.sqrt(d*d+b*b)}function xe(i,s,d){d===void 0&&(d={});var b=d.fineTolerance!=null?d.fineTolerance:4,_=d.grossTolerance!=null?d.grossTolerance:12,y=d.interval!=null?d.interval:500;i.point=i.point||s.point,i.time=i.time||s.time;var w=fe(i.point,s.point);return w<b||w<_&&s.time-i.time<y}function Ce(i,s,d){d===void 0&&(d={});var b=d.tolerance!=null?d.tolerance:25,_=d.interval!=null?d.interval:250;return i.point=i.point||s.point,i.time=i.time||s.time,fe(i.point,s.point)<b&&s.time-i.time<_}var ke={},je={get exports(){return ke},set exports(i){ke=i}}.exports=function(i,s){if(s||(s=16),i===void 0&&(i=128),i<=0)return"0";for(var d=Math.log(Math.pow(2,i))/Math.log(s),b=2;d===1/0;b*=2)d=Math.log(Math.pow(2,i/b))/Math.log(s)*b;var _=d-Math.floor(d),y="";for(b=0;b<Math.floor(d);b++)y=Math.floor(Math.random()*s).toString(s)+y;if(_){var w=Math.pow(s,_);y=Math.floor(Math.random()*w).toString(s)+y}var j=parseInt(y,s);return j!==1/0&&j>=Math.pow(2,i)?je(i,s):y};je.rack=function(i,s,d){var b=function(y){var w=0;do{if(w++>10){if(!d)throw new Error("too many ID collisions, use more bits");i+=d}var j=je(i,s)}while(Object.hasOwnProperty.call(_,j));return _[j]=y,j},_=b.hats={};return b.get=function(y){return b.hats[y]},b.set=function(y,w){return b.hats[y]=w,b},b.bits=i||128,b.base=s||16,b};var Ee=function(i,s){this.ctx=i,this.properties=s.properties||{},this.coordinates=s.geometry.coordinates,this.id=s.id||ke(),this.type=s.geometry.type};Ee.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Ee.prototype.incomingCoords=function(i){this.setCoordinates(i)},Ee.prototype.setCoordinates=function(i){this.coordinates=i,this.changed()},Ee.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Ee.prototype.setProperty=function(i,s){this.properties[i]=s},Ee.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:m.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Ee.prototype.internal=function(i){var s={id:this.id,meta:I.FEATURE,"meta:type":this.type,active:C.INACTIVE,mode:i};if(this.ctx.options.userProperties)for(var d in this.properties)s["user_"+d]=this.properties[d];return{type:m.FEATURE,properties:s,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var T=function(i,s){Ee.call(this,i,s)};(T.prototype=Object.create(Ee.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},T.prototype.updateCoordinate=function(i,s,d){this.coordinates=arguments.length===3?[s,d]:[i,s],this.changed()},T.prototype.getCoordinate=function(){return this.getCoordinates()};var se=function(i,s){Ee.call(this,i,s)};(se.prototype=Object.create(Ee.prototype)).isValid=function(){return this.coordinates.length>1},se.prototype.addCoordinate=function(i,s,d){this.changed();var b=parseInt(i,10);this.coordinates.splice(b,0,[s,d])},se.prototype.getCoordinate=function(i){var s=parseInt(i,10);return JSON.parse(JSON.stringify(this.coordinates[s]))},se.prototype.removeCoordinate=function(i){this.changed(),this.coordinates.splice(parseInt(i,10),1)},se.prototype.updateCoordinate=function(i,s,d){var b=parseInt(i,10);this.coordinates[b]=[s,d],this.changed()};var st=function(i,s){Ee.call(this,i,s),this.coordinates=this.coordinates.map(function(d){return d.slice(0,-1)})};(st.prototype=Object.create(Ee.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(i){return i.length>2})},st.prototype.incomingCoords=function(i){this.coordinates=i.map(function(s){return s.slice(0,-1)}),this.changed()},st.prototype.setCoordinates=function(i){this.coordinates=i,this.changed()},st.prototype.addCoordinate=function(i,s,d){this.changed();var b=i.split(".").map(function(_){return parseInt(_,10)});this.coordinates[b[0]].splice(b[1],0,[s,d])},st.prototype.removeCoordinate=function(i){this.changed();var s=i.split(".").map(function(b){return parseInt(b,10)}),d=this.coordinates[s[0]];d&&(d.splice(s[1],1),d.length<3&&this.coordinates.splice(s[0],1))},st.prototype.getCoordinate=function(i){var s=i.split(".").map(function(b){return parseInt(b,10)}),d=this.coordinates[s[0]];return JSON.parse(JSON.stringify(d[s[1]]))},st.prototype.getCoordinates=function(){return this.coordinates.map(function(i){return i.concat([i[0]])})},st.prototype.updateCoordinate=function(i,s,d){this.changed();var b=i.split("."),_=parseInt(b[0],10),y=parseInt(b[1],10);this.coordinates[_]===void 0&&(this.coordinates[_]=[]),this.coordinates[_][y]=[s,d]};var Fr={MultiPoint:T,MultiLineString:se,MultiPolygon:st},on=function(i,s,d,b,_){var y=d.split("."),w=parseInt(y[0],10),j=y[1]?y.slice(1).join("."):null;return i[w][s](j,b,_)},Ke=function(i,s){if(Ee.call(this,i,s),delete this.coordinates,this.model=Fr[s.geometry.type],this.model===void 0)throw new TypeError(s.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(s.geometry.coordinates)};function de(i){this.map=i.map,this.drawConfig=JSON.parse(JSON.stringify(i.options||{})),this._ctx=i}(Ke.prototype=Object.create(Ee.prototype))._coordinatesToFeatures=function(i){var s=this,d=this.model.bind(this);return i.map(function(b){return new d(s.ctx,{id:ke(),type:m.FEATURE,properties:{},geometry:{coordinates:b,type:s.type.replace("Multi","")}})})},Ke.prototype.isValid=function(){return this.features.every(function(i){return i.isValid()})},Ke.prototype.setCoordinates=function(i){this.features=this._coordinatesToFeatures(i),this.changed()},Ke.prototype.getCoordinate=function(i){return on(this.features,"getCoordinate",i)},Ke.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(i){return i.type===m.POLYGON?i.getCoordinates():i.coordinates})))},Ke.prototype.updateCoordinate=function(i,s,d){on(this.features,"updateCoordinate",i,s,d),this.changed()},Ke.prototype.addCoordinate=function(i,s,d){on(this.features,"addCoordinate",i,s,d),this.changed()},Ke.prototype.removeCoordinate=function(i){on(this.features,"removeCoordinate",i),this.changed()},Ke.prototype.getFeatures=function(){return this.features},de.prototype.setSelected=function(i){return this._ctx.store.setSelected(i)},de.prototype.setSelectedCoordinates=function(i){var s=this;this._ctx.store.setSelectedCoordinates(i),i.reduce(function(d,b){return d[b.feature_id]===void 0&&(d[b.feature_id]=!0,s._ctx.store.get(b.feature_id).changed()),d},{})},de.prototype.getSelected=function(){return this._ctx.store.getSelected()},de.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},de.prototype.isSelected=function(i){return this._ctx.store.isSelected(i)},de.prototype.getFeature=function(i){return this._ctx.store.get(i)},de.prototype.select=function(i){return this._ctx.store.select(i)},de.prototype.deselect=function(i){return this._ctx.store.deselect(i)},de.prototype.deleteFeature=function(i,s){return s===void 0&&(s={}),this._ctx.store.delete(i,s)},de.prototype.addFeature=function(i){return this._ctx.store.add(i)},de.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},de.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},de.prototype.setActionableState=function(i){i===void 0&&(i={});var s={trash:i.trash||!1,combineFeatures:i.combineFeatures||!1,uncombineFeatures:i.uncombineFeatures||!1};return this._ctx.events.actionable(s)},de.prototype.changeMode=function(i,s,d){return s===void 0&&(s={}),d===void 0&&(d={}),this._ctx.events.changeMode(i,s,d)},de.prototype.updateUIClasses=function(i){return this._ctx.ui.queueMapClasses(i)},de.prototype.activateUIButton=function(i){return this._ctx.ui.setActiveButton(i)},de.prototype.featuresAt=function(i,s,d){if(d===void 0&&(d="click"),d!=="click"&&d!=="touch")throw new Error("invalid buffer type");return ee[d](i,s,this._ctx)},de.prototype.newFeature=function(i){var s=i.geometry.type;return s===m.POINT?new T(this._ctx,i):s===m.LINE_STRING?new se(this._ctx,i):s===m.POLYGON?new st(this._ctx,i):new Ke(this._ctx,i)},de.prototype.isInstanceOf=function(i,s){if(i===m.POINT)return s instanceof T;if(i===m.LINE_STRING)return s instanceof se;if(i===m.POLYGON)return s instanceof st;if(i==="MultiFeature")return s instanceof Ke;throw new Error("Unknown feature class: "+i)},de.prototype.doRender=function(i){return this._ctx.store.featureChanged(i)},de.prototype.onSetup=function(){},de.prototype.onDrag=function(){},de.prototype.onClick=function(){},de.prototype.onMouseMove=function(){},de.prototype.onMouseDown=function(){},de.prototype.onMouseUp=function(){},de.prototype.onMouseOut=function(){},de.prototype.onKeyUp=function(){},de.prototype.onKeyDown=function(){},de.prototype.onTouchStart=function(){},de.prototype.onTouchMove=function(){},de.prototype.onTouchEnd=function(){},de.prototype.onTap=function(){},de.prototype.onStop=function(){},de.prototype.onTrash=function(){},de.prototype.onCombineFeature=function(){},de.prototype.onUncombineFeature=function(){},de.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var $={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Rl=Object.keys($);function Fl(i){var s=Object.keys(i);return function(d,b){b===void 0&&(b={});var _={},y=s.reduce(function(w,j){return w[j]=i[j],w},new de(d));return{start:function(){var w=this;_=y.onSetup(b),Rl.forEach(function(j){var V,X=$[j],W=function(){return!1};i[X]&&(W=function(){return!0}),w.on(j,W,(V=X,function(q){return y[V](_,q)}))})},stop:function(){y.onStop(_)},trash:function(){y.onTrash(_)},combineFeatures:function(){y.onCombineFeatures(_)},uncombineFeatures:function(){y.onUncombineFeatures(_)},render:function(w,j){y.toDisplayFeatures(_,w,j)}}}}function bn(i){return[].concat(i).filter(function(s){return s!==void 0})}function Dl(){var i=this;if(!(i.ctx.map&&i.ctx.map.getSource(v.HOT)!==void 0))return V();var s=i.ctx.events.currentModeName();i.ctx.ui.queueMapClasses({mode:s});var d=[],b=[];i.isDirty?b=i.getAllIds():(d=i.getChangedIds().filter(function(X){return i.get(X)!==void 0}),b=i.sources.hot.filter(function(X){return X.properties.id&&d.indexOf(X.properties.id)===-1&&i.get(X.properties.id)!==void 0}).map(function(X){return X.properties.id})),i.sources.hot=[];var _=i.sources.cold.length;i.sources.cold=i.isDirty?[]:i.sources.cold.filter(function(X){var W=X.properties.id||X.properties.parent;return d.indexOf(W)===-1});var y=_!==i.sources.cold.length||b.length>0;function w(X,W){var q=i.get(X).internal(s);i.ctx.events.currentModeRender(q,function(le){i.sources[W].push(le)})}if(d.forEach(function(X){return w(X,"hot")}),b.forEach(function(X){return w(X,"cold")}),y&&i.ctx.map.getSource(v.COLD).setData({type:m.FEATURE_COLLECTION,features:i.sources.cold}),i.ctx.map.getSource(v.HOT).setData({type:m.FEATURE_COLLECTION,features:i.sources.hot}),i._emitSelectionChange&&(i.ctx.map.fire(O.SELECTION_CHANGE,{features:i.getSelected().map(function(X){return X.toGeoJSON()}),points:i.getSelectedCoordinates().map(function(X){return{type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:X.coordinates}}})}),i._emitSelectionChange=!1),i._deletedFeaturesToEmit.length){var j=i._deletedFeaturesToEmit.map(function(X){return X.toGeoJSON()});i._deletedFeaturesToEmit=[],i.ctx.map.fire(O.DELETE,{features:j})}function V(){i.isDirty=!1,i.clearChangedIds()}V(),i.ctx.map.fire(O.RENDER,{})}function Pe(i){var s,d=this;this._features={},this._featureIds=new U,this._selectedFeatureIds=new U,this._selectedCoordinates=[],this._changedFeatureIds=new U,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=i,this.sources={hot:[],cold:[]},this.render=function(){s||(s=requestAnimationFrame(function(){s=null,Dl.call(d)}))},this.isDirty=!1}function ki(i,s){var d=i._selectedCoordinates.filter(function(b){return i._selectedFeatureIds.has(b.feature_id)});i._selectedCoordinates.length===d.length||s.silent||(i._emitSelectionChange=!0),i._selectedCoordinates=d}Pe.prototype.createRenderBatch=function(){var i=this,s=this.render,d=0;return this.render=function(){d++},function(){i.render=s,d>0&&i.render()}},Pe.prototype.setDirty=function(){return this.isDirty=!0,this},Pe.prototype.featureChanged=function(i){return this._changedFeatureIds.add(i),this},Pe.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Pe.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Pe.prototype.getAllIds=function(){return this._featureIds.values()},Pe.prototype.add=function(i){return this.featureChanged(i.id),this._features[i.id]=i,this._featureIds.add(i.id),this},Pe.prototype.delete=function(i,s){var d=this;return s===void 0&&(s={}),bn(i).forEach(function(b){d._featureIds.has(b)&&(d._featureIds.delete(b),d._selectedFeatureIds.delete(b),s.silent||d._deletedFeaturesToEmit.indexOf(d._features[b])===-1&&d._deletedFeaturesToEmit.push(d._features[b]),delete d._features[b],d.isDirty=!0)}),ki(this,s),this},Pe.prototype.get=function(i){return this._features[i]},Pe.prototype.getAll=function(){var i=this;return Object.keys(this._features).map(function(s){return i._features[s]})},Pe.prototype.select=function(i,s){var d=this;return s===void 0&&(s={}),bn(i).forEach(function(b){d._selectedFeatureIds.has(b)||(d._selectedFeatureIds.add(b),d._changedFeatureIds.add(b),s.silent||(d._emitSelectionChange=!0))}),this},Pe.prototype.deselect=function(i,s){var d=this;return s===void 0&&(s={}),bn(i).forEach(function(b){d._selectedFeatureIds.has(b)&&(d._selectedFeatureIds.delete(b),d._changedFeatureIds.add(b),s.silent||(d._emitSelectionChange=!0))}),ki(this,s),this},Pe.prototype.clearSelected=function(i){return i===void 0&&(i={}),this.deselect(this._selectedFeatureIds.values(),{silent:i.silent}),this},Pe.prototype.setSelected=function(i,s){var d=this;return s===void 0&&(s={}),i=bn(i),this.deselect(this._selectedFeatureIds.values().filter(function(b){return i.indexOf(b)===-1}),{silent:s.silent}),this.select(i.filter(function(b){return!d._selectedFeatureIds.has(b)}),{silent:s.silent}),this},Pe.prototype.setSelectedCoordinates=function(i){return this._selectedCoordinates=i,this._emitSelectionChange=!0,this},Pe.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Pe.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Pe.prototype.getSelected=function(){var i=this;return this._selectedFeatureIds.values().map(function(s){return i.get(s)})},Pe.prototype.getSelectedCoordinates=function(){var i=this;return this._selectedCoordinates.map(function(s){return{coordinates:i.get(s.feature_id).getCoordinate(s.coord_path)}})},Pe.prototype.isSelected=function(i){return this._selectedFeatureIds.has(i)},Pe.prototype.setFeatureProperty=function(i,s,d){this.get(i).setProperty(s,d),this.featureChanged(i)},Pe.prototype.storeMapConfig=function(){var i=this;A.forEach(function(s){i.ctx.map[s]&&(i._mapInitialConfig[s]=i.ctx.map[s].isEnabled())})},Pe.prototype.restoreMapConfig=function(){var i=this;Object.keys(this._mapInitialConfig).forEach(function(s){i._mapInitialConfig[s]?i.ctx.map[s].enable():i.ctx.map[s].disable()})},Pe.prototype.getInitialConfigValue=function(i){return this._mapInitialConfig[i]===void 0||this._mapInitialConfig[i]};var Ft=function(){for(var i=arguments,s={},d=0;d<arguments.length;d++){var b=i[d];for(var _ in b)Ul.call(b,_)&&(s[_]=b[_])}return s},Ul=Object.prototype.hasOwnProperty,jl=["mode","feature","mouse"];function Bl(i){var s=null,d=null,b={onRemove:function(){return i.map.off("load",b.connect),clearInterval(d),b.removeLayers(),i.store.restoreMapConfig(),i.ui.removeButtons(),i.events.removeEventListeners(),i.ui.clearMapClasses(),i.map=null,i.container=null,i.store=null,s&&s.parentNode&&s.parentNode.removeChild(s),s=null,this},connect:function(){i.map.off("load",b.connect),clearInterval(d),b.addLayers(),i.store.storeMapConfig(),i.events.addEventListeners()},onAdd:function(_){var y=_.fire;return _.fire=function(w,j){var V=arguments;return y.length===1&&arguments.length!==1&&(V=[Ft({},{type:w},j)]),y.apply(_,V)},i.map=_,i.events=function(w){var j=Object.keys(w.options.modes).reduce(function(N,te){return N[te]=Fl(w.options.modes[te]),N},{}),V={},X={},W={},q=null,le=null;W.drag=function(N,te){te({point:N.point,time:new Date().getTime()})?(w.ui.queueMapClasses({mouse:g.DRAG}),le.drag(N)):N.originalEvent.stopPropagation()},W.mousedrag=function(N){W.drag(N,function(te){return!xe(V,te)})},W.touchdrag=function(N){W.drag(N,function(te){return!Ce(X,te)})},W.mousemove=function(N){if((N.originalEvent.buttons!==void 0?N.originalEvent.buttons:N.originalEvent.which)===1)return W.mousedrag(N);var te=K(N,w);N.featureTarget=te,le.mousemove(N)},W.mousedown=function(N){V={time:new Date().getTime(),point:N.point};var te=K(N,w);N.featureTarget=te,le.mousedown(N)},W.mouseup=function(N){var te=K(N,w);N.featureTarget=te,xe(V,{point:N.point,time:new Date().getTime()})?le.click(N):le.mouseup(N)},W.mouseout=function(N){le.mouseout(N)},W.touchstart=function(N){if(w.options.touchEnabled){X={time:new Date().getTime(),point:N.point};var te=ee.touch(N,null,w)[0];N.featureTarget=te,le.touchstart(N)}},W.touchmove=function(N){if(w.options.touchEnabled)return le.touchmove(N),W.touchdrag(N)},W.touchend=function(N){if(w.options.touchEnabled){var te=ee.touch(N,null,w)[0];N.featureTarget=te,Ce(X,{time:new Date().getTime(),point:N.point})?le.tap(N):le.touchend(N)}};var Ue=function(N){return!(N===8||N===46||N>=48&&N<=57)};function ce(N,te,we){we===void 0&&(we={}),le.stop();var Ze=j[N];if(Ze===void 0)throw new Error(N+" is not valid");q=N;var Ve=Ze(w,te);le=t(Ve,w),we.silent||w.map.fire(O.MODE_CHANGE,{mode:N}),w.store.setDirty(),w.store.render()}W.keydown=function(N){(N.srcElement||N.target).classList[0]==="mapboxgl-canvas"&&(N.keyCode!==8&&N.keyCode!==46||!w.options.controls.trash?Ue(N.keyCode)?le.keydown(N):N.keyCode===49&&w.options.controls.point?ce(E.DRAW_POINT):N.keyCode===50&&w.options.controls.line_string?ce(E.DRAW_LINE_STRING):N.keyCode===51&&w.options.controls.polygon&&ce(E.DRAW_POLYGON):(N.preventDefault(),le.trash()))},W.keyup=function(N){Ue(N.keyCode)&&le.keyup(N)},W.zoomend=function(){w.store.changeZoom()},W.data=function(N){if(N.dataType==="style"){var te=w.setup,we=w.map,Ze=w.options,Ve=w.store;Ze.styles.some(function(Vr){return we.getLayer(Vr.id)})||(te.addLayers(),Ve.setDirty(),Ve.render())}};var ze={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){q=w.options.defaultMode,le=t(j[q](w),w)},changeMode:ce,actionable:function(N){var te=!1;Object.keys(N).forEach(function(we){if(ze[we]===void 0)throw new Error("Invalid action type");ze[we]!==N[we]&&(te=!0),ze[we]=N[we]}),te&&w.map.fire(O.ACTIONABLE,{actions:ze})},currentModeName:function(){return q},currentModeRender:function(N,te){return le.render(N,te)},fire:function(N,te){W[N]&&W[N](te)},addEventListeners:function(){w.map.on("mousemove",W.mousemove),w.map.on("mousedown",W.mousedown),w.map.on("mouseup",W.mouseup),w.map.on("data",W.data),w.map.on("touchmove",W.touchmove,{passive:!0}),w.map.on("touchstart",W.touchstart,{passive:!0}),w.map.on("touchend",W.touchend,{passive:!0}),w.container.addEventListener("mouseout",W.mouseout),w.options.keybindings&&(w.container.addEventListener("keydown",W.keydown),w.container.addEventListener("keyup",W.keyup))},removeEventListeners:function(){w.map.off("mousemove",W.mousemove),w.map.off("mousedown",W.mousedown),w.map.off("mouseup",W.mouseup),w.map.off("data",W.data),w.map.off("touchmove",W.touchmove),w.map.off("touchstart",W.touchstart),w.map.off("touchend",W.touchend),w.container.removeEventListener("mouseout",W.mouseout),w.options.keybindings&&(w.container.removeEventListener("keydown",W.keydown),w.container.removeEventListener("keyup",W.keyup))},trash:function(N){le.trash(N)},combineFeatures:function(){le.combineFeatures()},uncombineFeatures:function(){le.uncombineFeatures()},getMode:function(){return q}}}(i),i.ui=function(w){var j={},V=null,X={mode:null,feature:null,mouse:null},W={mode:null,feature:null,mouse:null};function q(N){W=Ft(W,N)}function le(){var N,te;if(w.container){var we=[],Ze=[];jl.forEach(function(Ve){W[Ve]!==X[Ve]&&(we.push(Ve+"-"+X[Ve]),W[Ve]!==null&&Ze.push(Ve+"-"+W[Ve]))}),we.length>0&&(N=w.container.classList).remove.apply(N,we),Ze.length>0&&(te=w.container.classList).add.apply(te,Ze),X=Ft(X,W)}}function Ue(N,te){te===void 0&&(te={});var we=document.createElement("button");return we.className=p.CONTROL_BUTTON+" "+te.className,we.setAttribute("title",te.title),te.container.appendChild(we),we.addEventListener("click",function(Ze){if(Ze.preventDefault(),Ze.stopPropagation(),Ze.target===V)return ce(),void te.onDeactivate();ze(N),te.onActivate()},!0),we}function ce(){V&&(V.classList.remove(p.ACTIVE_BUTTON),V=null)}function ze(N){ce();var te=j[N];te&&te&&N!=="trash"&&(te.classList.add(p.ACTIVE_BUTTON),V=te)}return{setActiveButton:ze,queueMapClasses:q,updateMapClasses:le,clearMapClasses:function(){q({mode:null,feature:null,mouse:null}),le()},addButtons:function(){var N=w.options.controls,te=document.createElement("div");return te.className=p.CONTROL_GROUP+" "+p.CONTROL_BASE,N&&(N[h.LINE]&&(j[h.LINE]=Ue(h.LINE,{container:te,className:p.CONTROL_BUTTON_LINE,title:"LineString tool "+(w.options.keybindings?"(l)":""),onActivate:function(){return w.events.changeMode(E.DRAW_LINE_STRING)},onDeactivate:function(){return w.events.trash()}})),N[h.POLYGON]&&(j[h.POLYGON]=Ue(h.POLYGON,{container:te,className:p.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(w.options.keybindings?"(p)":""),onActivate:function(){return w.events.changeMode(E.DRAW_POLYGON)},onDeactivate:function(){return w.events.trash()}})),N[h.POINT]&&(j[h.POINT]=Ue(h.POINT,{container:te,className:p.CONTROL_BUTTON_POINT,title:"Marker tool "+(w.options.keybindings?"(m)":""),onActivate:function(){return w.events.changeMode(E.DRAW_POINT)},onDeactivate:function(){return w.events.trash()}})),N.trash&&(j.trash=Ue("trash",{container:te,className:p.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){w.events.trash()}})),N.combine_features&&(j.combine_features=Ue("combineFeatures",{container:te,className:p.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){w.events.combineFeatures()}})),N.uncombine_features&&(j.uncombine_features=Ue("uncombineFeatures",{container:te,className:p.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){w.events.uncombineFeatures()}}))),te},removeButtons:function(){Object.keys(j).forEach(function(N){var te=j[N];te.parentNode&&te.parentNode.removeChild(te),delete j[N]})}}}(i),i.container=_.getContainer(),i.store=new Pe(i),s=i.ui.addButtons(),i.options.boxSelect&&(_.boxZoom.disable(),_.dragPan.disable(),_.dragPan.enable()),_.loaded()?b.connect():(_.on("load",b.connect),d=setInterval(function(){_.loaded()&&b.connect()},16)),i.events.start(),s},addLayers:function(){i.map.addSource(v.COLD,{data:{type:m.FEATURE_COLLECTION,features:[]},type:"geojson"}),i.map.addSource(v.HOT,{data:{type:m.FEATURE_COLLECTION,features:[]},type:"geojson"}),i.options.styles.forEach(function(_){i.map.addLayer(_)}),i.store.setDirty(!0),i.store.render()},removeLayers:function(){i.options.styles.forEach(function(_){i.map.getLayer(_.id)&&i.map.removeLayer(_.id)}),i.map.getSource(v.COLD)&&i.map.removeSource(v.COLD),i.map.getSource(v.HOT)&&i.map.removeSource(v.HOT)}};return i.setup=b,b}var Ti=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Bn(i){return function(s){var d=s.featureTarget;return!!d&&!!d.properties&&d.properties.meta===i}}function Ci(i){return!!i.originalEvent&&!!i.originalEvent.shiftKey&&i.originalEvent.button===0}function Wt(i){return!!i.featureTarget&&!!i.featureTarget.properties&&i.featureTarget.properties.active===C.ACTIVE&&i.featureTarget.properties.meta===I.FEATURE}function Dr(i){return!!i.featureTarget&&!!i.featureTarget.properties&&i.featureTarget.properties.active===C.INACTIVE&&i.featureTarget.properties.meta===I.FEATURE}function Gn(i){return i.featureTarget===void 0}function Oi(i){return!!i.featureTarget&&!!i.featureTarget.properties&&i.featureTarget.properties.meta===I.FEATURE}function vn(i){var s=i.featureTarget;return!!s&&!!s.properties&&s.properties.meta===I.VERTEX}function zn(i){return!!i.originalEvent&&i.originalEvent.shiftKey===!0}function Vn(i){return i.keyCode===27}function qn(i){return i.keyCode===13}var Gl=Object.freeze({__proto__:null,isOfMetaType:Bn,isShiftMousedown:Ci,isActiveFeature:Wt,isInactiveFeature:Dr,noTarget:Gn,isFeature:Oi,isVertex:vn,isShiftDown:zn,isEscapeKey:Vn,isEnterKey:qn,isTrue:function(){return!0}}),zl=ln;function ln(i,s){this.x=i,this.y=s}function Ur(i,s){var d=s.getBoundingClientRect();return new zl(i.clientX-d.left-(s.clientLeft||0),i.clientY-d.top-(s.clientTop||0))}function an(i,s,d,b){return{type:m.FEATURE,properties:{meta:I.VERTEX,parent:i,coord_path:d,active:b?C.ACTIVE:C.INACTIVE},geometry:{type:m.POINT,coordinates:s}}}function Ii(i,s,d){var b=s.geometry.coordinates,_=d.geometry.coordinates;if(b[1]>85||b[1]<P||_[1]>85||_[1]<P)return null;var y={lng:(b[0]+_[0])/2,lat:(b[1]+_[1])/2};return{type:m.FEATURE,properties:{meta:I.MIDPOINT,parent:i,lng:y.lng,lat:y.lat,coord_path:d.properties.coord_path},geometry:{type:m.POINT,coordinates:[y.lng,y.lat]}}}function Jn(i,s,d){s===void 0&&(s={}),d===void 0&&(d=null);var b,_=i.geometry,y=_.type,w=_.coordinates,j=i.properties&&i.properties.id,V=[];function X(q,le){var Ue="",ce=null;q.forEach(function(ze,N){var te=le!=null?le+"."+N:String(N),we=an(j,ze,te,W(te));if(s.midpoints&&ce){var Ze=Ii(j,ce,we);Ze&&V.push(Ze)}ce=we;var Ve=JSON.stringify(ze);Ue!==Ve&&V.push(we),N===0&&(Ue=Ve)})}function W(q){return!!s.selectedPaths&&s.selectedPaths.indexOf(q)!==-1}return y===m.POINT?V.push(an(j,w,d,W(d))):y===m.POLYGON?w.forEach(function(q,le){X(q,d!==null?d+"."+le:String(le))}):y===m.LINE_STRING?X(w,d):y.indexOf(m.MULTI_PREFIX)===0&&(b=y.replace(m.MULTI_PREFIX,""),w.forEach(function(q,le){var Ue={type:m.FEATURE,properties:i.properties,geometry:{type:b,coordinates:q}};V=V.concat(Jn(Ue,s,le))})),V}ln.prototype={clone:function(){return new ln(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,s){return this.clone()._rotateAround(i,s)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var s=i.x-this.x,d=i.y-this.y;return s*s+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,s){return Math.atan2(this.x*s-this.y*i,this.x*i+this.y*s)},_matMult:function(i){var s=i[0]*this.x+i[1]*this.y,d=i[2]*this.x+i[3]*this.y;return this.x=s,this.y=d,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var s=Math.cos(i),d=Math.sin(i),b=s*this.x-d*this.y,_=d*this.x+s*this.y;return this.x=b,this.y=_,this},_rotateAround:function(i,s){var d=Math.cos(i),b=Math.sin(i),_=s.x+d*(this.x-s.x)-b*(this.y-s.y),y=s.y+b*(this.x-s.x)+d*(this.y-s.y);return this.x=_,this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},ln.convert=function(i){return i instanceof ln?i:Array.isArray(i)?new ln(i[0],i[1]):i};var _t={enable:function(i){setTimeout(function(){i.map&&i.map.doubleClickZoom&&i._ctx&&i._ctx.store&&i._ctx.store.getInitialConfigValue&&i._ctx.store.getInitialConfigValue("doubleClickZoom")&&i.map.doubleClickZoom.enable()},0)},disable:function(i){setTimeout(function(){i.map&&i.map.doubleClickZoom&&i.map.doubleClickZoom.disable()},0)}},_n={},Vl={get exports(){return _n},set exports(i){_n=i}},Li=function(i){if(!i||!i.type)return null;var s=ql[i.type];if(!s)return null;if(s==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:i}]};if(s==="feature")return{type:"FeatureCollection",features:[i]};if(s==="featurecollection")return i},ql={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Jl=Object.freeze({__proto__:null,default:function i(s){switch(s&&s.type||null){case"FeatureCollection":return s.features=s.features.reduce(function(d,b){return d.concat(i(b))},[]),s;case"Feature":return s.geometry?i(s.geometry).map(function(d){var b={type:"Feature",properties:JSON.parse(JSON.stringify(s.properties)),geometry:d};return s.id!==void 0&&(b.id=s.id),b}):[s];case"MultiPoint":return s.coordinates.map(function(d){return{type:"Point",coordinates:d}});case"MultiPolygon":return s.coordinates.map(function(d){return{type:"Polygon",coordinates:d}});case"MultiLineString":return s.coordinates.map(function(d){return{type:"LineString",coordinates:d}});case"GeometryCollection":return s.geometries.map(i).reduce(function(d,b){return d.concat(b)},[]);case"Point":case"Polygon":case"LineString":return[s]}}}),Yl=Li,Yn=r(Jl),Hl=function(i){return function s(d){return Array.isArray(d)&&d.length&&typeof d[0]=="number"?[d]:d.reduce(function(b,_){return Array.isArray(_)&&Array.isArray(_[0])?b.concat(s(_)):(b.push(_),b)},[])}(i)};Yn instanceof Function||(Yn=Yn.default);var jr={},Wl={get exports(){return jr},set exports(i){jr=i}}.exports=function(i){return new gt(i)};function gt(i){this.value=i}function Mi(i,s,d){var b=[],_=[],y=!0;return function w(j){var V=d?xi(j):j,X={},W=!0,q={node:V,node_:j,path:[].concat(b),parent:_[_.length-1],parents:_,key:b.slice(-1)[0],isRoot:b.length===0,level:b.length,circular:null,update:function(ce,ze){q.isRoot||(q.parent.node[q.key]=ce),q.node=ce,ze&&(W=!1)},delete:function(ce){delete q.parent.node[q.key],ce&&(W=!1)},remove:function(ce){Pi(q.parent.node)?q.parent.node.splice(q.key,1):delete q.parent.node[q.key],ce&&(W=!1)},keys:null,before:function(ce){X.before=ce},after:function(ce){X.after=ce},pre:function(ce){X.pre=ce},post:function(ce){X.post=ce},stop:function(){y=!1},block:function(){W=!1}};if(!y)return q;function le(){if(typeof q.node=="object"&&q.node!==null){q.keys&&q.node_===q.node||(q.keys=Hn(q.node)),q.isLeaf=q.keys.length==0;for(var ce=0;ce<_.length;ce++)if(_[ce].node_===j){q.circular=_[ce];break}}else q.isLeaf=!0,q.keys=null;q.notLeaf=!q.isLeaf,q.notRoot=!q.isRoot}le();var Ue=s.call(q,q.node);return Ue!==void 0&&q.update&&q.update(Ue),X.before&&X.before.call(q,q.node),W&&(typeof q.node!="object"||q.node===null||q.circular||(_.push(q),le(),Wn(q.keys,function(ce,ze){b.push(ce),X.pre&&X.pre.call(q,q.node[ce],ce);var N=w(q.node[ce]);d&&Zn.call(q.node,ce)&&(q.node[ce]=N.node),N.isLast=ze==q.keys.length-1,N.isFirst=ze==0,X.post&&X.post.call(q,N),b.pop()}),_.pop()),X.after&&X.after.call(q,q.node)),q}(i).node}function xi(i){if(typeof i=="object"&&i!==null){var s;if(Pi(i))s=[];else if(sn(i)==="[object Date]")s=new Date(i.getTime?i.getTime():i);else if(function(_){return sn(_)==="[object RegExp]"}(i))s=new RegExp(i);else if(function(_){return sn(_)==="[object Error]"}(i))s={message:i.message};else if(function(_){return sn(_)==="[object Boolean]"}(i))s=new Boolean(i);else if(function(_){return sn(_)==="[object Number]"}(i))s=new Number(i);else if(function(_){return sn(_)==="[object String]"}(i))s=new String(i);else if(Object.create&&Object.getPrototypeOf)s=Object.create(Object.getPrototypeOf(i));else if(i.constructor===Object)s={};else{var d=i.constructor&&i.constructor.prototype||i.__proto__||{},b=function(){};b.prototype=d,s=new b}return Wn(Hn(i),function(_){s[_]=i[_]}),s}return i}gt.prototype.get=function(i){for(var s=this.value,d=0;d<i.length;d++){var b=i[d];if(!s||!Zn.call(s,b)){s=void 0;break}s=s[b]}return s},gt.prototype.has=function(i){for(var s=this.value,d=0;d<i.length;d++){var b=i[d];if(!s||!Zn.call(s,b))return!1;s=s[b]}return!0},gt.prototype.set=function(i,s){for(var d=this.value,b=0;b<i.length-1;b++){var _=i[b];Zn.call(d,_)||(d[_]={}),d=d[_]}return d[i[b]]=s,s},gt.prototype.map=function(i){return Mi(this.value,i,!0)},gt.prototype.forEach=function(i){return this.value=Mi(this.value,i,!1),this.value},gt.prototype.reduce=function(i,s){var d=arguments.length===1,b=d?this.value:s;return this.forEach(function(_){this.isRoot&&d||(b=i.call(this,b,_))}),b},gt.prototype.paths=function(){var i=[];return this.forEach(function(s){i.push(this.path)}),i},gt.prototype.nodes=function(){var i=[];return this.forEach(function(s){i.push(this.node)}),i},gt.prototype.clone=function(){var i=[],s=[];return function d(b){for(var _=0;_<i.length;_++)if(i[_]===b)return s[_];if(typeof b=="object"&&b!==null){var y=xi(b);return i.push(b),s.push(y),Wn(Hn(b),function(w){y[w]=d(b[w])}),i.pop(),s.pop(),y}return b}(this.value)};var Hn=Object.keys||function(i){var s=[];for(var d in i)s.push(d);return s};function sn(i){return Object.prototype.toString.call(i)}var Pi=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"},Wn=function(i,s){if(i.forEach)return i.forEach(s);for(var d=0;d<i.length;d++)s(i[d],d,i)};Wn(Hn(gt.prototype),function(i){Wl[i]=function(s){var d=[].slice.call(arguments,1),b=new gt(s);return b[i].apply(b,d)}});var Zn=Object.hasOwnProperty||function(i,s){return s in i},Zl=et;function et(i){if(!(this instanceof et))return new et(i);this._bbox=i||[1/0,1/0,-1/0,-1/0],this._valid=!!i}et.prototype.include=function(i){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],i[0]),this._bbox[1]=Math.min(this._bbox[1],i[1]),this._bbox[2]=Math.max(this._bbox[2],i[0]),this._bbox[3]=Math.max(this._bbox[3],i[1]),this},et.prototype.equals=function(i){var s;return s=i instanceof et?i.bbox():i,this._bbox[0]==s[0]&&this._bbox[1]==s[1]&&this._bbox[2]==s[2]&&this._bbox[3]==s[3]},et.prototype.center=function(i){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},et.prototype.union=function(i){var s;return this._valid=!0,s=i instanceof et?i.bbox():i,this._bbox[0]=Math.min(this._bbox[0],s[0]),this._bbox[1]=Math.min(this._bbox[1],s[1]),this._bbox[2]=Math.max(this._bbox[2],s[2]),this._bbox[3]=Math.max(this._bbox[3],s[3]),this},et.prototype.bbox=function(){return this._valid?this._bbox:null},et.prototype.contains=function(i){if(!i)return this._fastContains();if(!this._valid)return null;var s=i[0],d=i[1];return this._bbox[0]<=s&&this._bbox[1]<=d&&this._bbox[2]>=s&&this._bbox[3]>=d},et.prototype.intersect=function(i){return this._valid?(s=i instanceof et?i.bbox():i,!(this._bbox[0]>s[2]||this._bbox[2]<s[0]||this._bbox[3]<s[1]||this._bbox[1]>s[3])):null;var s},et.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var i="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",i)},et.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Xl=function(i){if(!i)return[];var s=Yn(Yl(i)),d=[];return s.features.forEach(function(b){b.geometry&&(d=d.concat(Hl(b.geometry.coordinates)))}),d},Kl=jr,Ql=Zl,Ai={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},$l=Object.keys(Ai);function Br(i){for(var s=Ql(),d=Xl(i),b=0;b<d.length;b++)s.include(d[b]);return s}Vl.exports=function(i){return Br(i).bbox()},_n.polygon=function(i){return Br(i).polygon()},_n.bboxify=function(i){return Kl(i).map(function(s){s&&$l.some(function(d){return!!s[d]&&Ai[d].indexOf(s.type)!==-1})&&(s.bbox=Br(s).bbox(),this.update(s))})};var Xn=-90;function Gr(i,s){var d=Xn,b=90,_=Xn,y=90,w=270,j=-270;i.forEach(function(X){var W=_n(X),q=W[1],le=W[3],Ue=W[0],ce=W[2];q>d&&(d=q),le<b&&(b=le),le>_&&(_=le),q<y&&(y=q),Ue<w&&(w=Ue),ce>j&&(j=ce)});var V=s;return d+V.lat>85&&(V.lat=85-d),_+V.lat>90&&(V.lat=90-_),b+V.lat<-85&&(V.lat=-85-b),y+V.lat<Xn&&(V.lat=Xn-y),w+V.lng<=-270&&(V.lng+=360*Math.ceil(Math.abs(V.lng)/360)),j+V.lng>=270&&(V.lng-=360*Math.ceil(Math.abs(V.lng)/360)),V}function zr(i,s){var d=Gr(i.map(function(b){return b.toGeoJSON()}),s);i.forEach(function(b){var _,y=b.getCoordinates(),w=function(V){var X={lng:V[0]+d.lng,lat:V[1]+d.lat};return[X.lng,X.lat]},j=function(V){return V.map(function(X){return w(X)})};b.type===m.POINT?_=w(y):b.type===m.LINE_STRING||b.type===m.MULTI_POINT?_=y.map(w):b.type===m.POLYGON||b.type===m.MULTI_LINE_STRING?_=y.map(j):b.type===m.MULTI_POLYGON&&(_=y.map(function(V){return V.map(function(X){return j(X)})})),b.incomingCoords(_)})}var Ye={onSetup:function(i){var s=this,d={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:i.featureIds||[]};return this.setSelected(d.initiallySelectedFeatureIds.filter(function(b){return s.getFeature(b)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),d},fireUpdate:function(){this.map.fire(O.UPDATE,{action:F.MOVE,features:this.getSelected().map(function(i){return i.toGeoJSON()})})},fireActionable:function(){var i=this,s=this.getSelected(),d=s.filter(function(j){return i.isInstanceOf("MultiFeature",j)}),b=!1;if(s.length>1){b=!0;var _=s[0].type.replace("Multi","");s.forEach(function(j){j.type.replace("Multi","")!==_&&(b=!1)})}var y=d.length>0,w=s.length>0;this.setActionableState({combineFeatures:b,uncombineFeatures:y,trash:w})},getUniqueIds:function(i){return i.length?i.map(function(s){return s.properties.id}).filter(function(s){return s!==void 0}).reduce(function(s,d){return s.add(d),s},new U).values():[]},stopExtendedInteractions:function(i){i.boxSelectElement&&(i.boxSelectElement.parentNode&&i.boxSelectElement.parentNode.removeChild(i.boxSelectElement),i.boxSelectElement=null),this.map.dragPan.enable(),i.boxSelecting=!1,i.canBoxSelect=!1,i.dragMoving=!1,i.canDragMove=!1},onStop:function(){_t.enable(this)},onMouseMove:function(i){return this.stopExtendedInteractions(i),!0},onMouseOut:function(i){return!i.dragMoving||this.fireUpdate()}};Ye.onTap=Ye.onClick=function(i,s){return Gn(s)?this.clickAnywhere(i,s):Bn(I.VERTEX)(s)?this.clickOnVertex(i,s):Oi(s)?this.clickOnFeature(i,s):void 0},Ye.clickAnywhere=function(i){var s=this,d=this.getSelectedIds();d.length&&(this.clearSelectedFeatures(),d.forEach(function(b){return s.doRender(b)})),_t.enable(this),this.stopExtendedInteractions(i)},Ye.clickOnVertex=function(i,s){this.changeMode(E.DIRECT_SELECT,{featureId:s.featureTarget.properties.parent,coordPath:s.featureTarget.properties.coord_path,startPos:s.lngLat}),this.updateUIClasses({mouse:g.MOVE})},Ye.startOnActiveFeature=function(i,s){this.stopExtendedInteractions(i),this.map.dragPan.disable(),this.doRender(s.featureTarget.properties.id),i.canDragMove=!0,i.dragMoveLocation=s.lngLat},Ye.clickOnFeature=function(i,s){var d=this;_t.disable(this),this.stopExtendedInteractions(i);var b=zn(s),_=this.getSelectedIds(),y=s.featureTarget.properties.id,w=this.isSelected(y);if(!b&&w&&this.getFeature(y).type!==m.POINT)return this.changeMode(E.DIRECT_SELECT,{featureId:y});w&&b?(this.deselect(y),this.updateUIClasses({mouse:g.POINTER}),_.length===1&&_t.enable(this)):!w&&b?(this.select(y),this.updateUIClasses({mouse:g.MOVE})):w||b||(_.forEach(function(j){return d.doRender(j)}),this.setSelected(y),this.updateUIClasses({mouse:g.MOVE})),this.doRender(y)},Ye.onMouseDown=function(i,s){return Wt(s)?this.startOnActiveFeature(i,s):this.drawConfig.boxSelect&&Ci(s)?this.startBoxSelect(i,s):void 0},Ye.startBoxSelect=function(i,s){this.stopExtendedInteractions(i),this.map.dragPan.disable(),i.boxSelectStartLocation=Ur(s.originalEvent,this.map.getContainer()),i.canBoxSelect=!0},Ye.onTouchStart=function(i,s){if(Wt(s))return this.startOnActiveFeature(i,s)},Ye.onDrag=function(i,s){return i.canDragMove?this.dragMove(i,s):this.drawConfig.boxSelect&&i.canBoxSelect?this.whileBoxSelect(i,s):void 0},Ye.whileBoxSelect=function(i,s){i.boxSelecting=!0,this.updateUIClasses({mouse:g.ADD}),i.boxSelectElement||(i.boxSelectElement=document.createElement("div"),i.boxSelectElement.classList.add(p.BOX_SELECT),this.map.getContainer().appendChild(i.boxSelectElement));var d=Ur(s.originalEvent,this.map.getContainer()),b=Math.min(i.boxSelectStartLocation.x,d.x),_=Math.max(i.boxSelectStartLocation.x,d.x),y=Math.min(i.boxSelectStartLocation.y,d.y),w=Math.max(i.boxSelectStartLocation.y,d.y),j="translate("+b+"px, "+y+"px)";i.boxSelectElement.style.transform=j,i.boxSelectElement.style.WebkitTransform=j,i.boxSelectElement.style.width=_-b+"px",i.boxSelectElement.style.height=w-y+"px"},Ye.dragMove=function(i,s){i.dragMoving=!0,s.originalEvent.stopPropagation();var d={lng:s.lngLat.lng-i.dragMoveLocation.lng,lat:s.lngLat.lat-i.dragMoveLocation.lat};zr(this.getSelected(),d),i.dragMoveLocation=s.lngLat},Ye.onTouchEnd=Ye.onMouseUp=function(i,s){var d=this;if(i.dragMoving)this.fireUpdate();else if(i.boxSelecting){var b=[i.boxSelectStartLocation,Ur(s.originalEvent,this.map.getContainer())],_=this.featuresAt(null,b,"click"),y=this.getUniqueIds(_).filter(function(w){return!d.isSelected(w)});y.length&&(this.select(y),y.forEach(function(w){return d.doRender(w)}),this.updateUIClasses({mouse:g.MOVE}))}this.stopExtendedInteractions(i)},Ye.toDisplayFeatures=function(i,s,d){s.properties.active=this.isSelected(s.properties.id)?C.ACTIVE:C.INACTIVE,d(s),this.fireActionable(),s.properties.active===C.ACTIVE&&s.geometry.type!==m.POINT&&Jn(s).forEach(d)},Ye.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Ye.onCombineFeatures=function(){var i=this.getSelected();if(!(i.length===0||i.length<2)){for(var s=[],d=[],b=i[0].type.replace("Multi",""),_=0;_<i.length;_++){var y=i[_];if(y.type.replace("Multi","")!==b)return;y.type.includes("Multi")?y.getCoordinates().forEach(function(j){s.push(j)}):s.push(y.getCoordinates()),d.push(y.toGeoJSON())}if(d.length>1){var w=this.newFeature({type:m.FEATURE,properties:d[0].properties,geometry:{type:"Multi"+b,coordinates:s}});this.addFeature(w),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([w.id]),this.map.fire(O.COMBINE_FEATURES,{createdFeatures:[w.toGeoJSON()],deletedFeatures:d})}this.fireActionable()}},Ye.onUncombineFeatures=function(){var i=this,s=this.getSelected();if(s.length!==0){for(var d=[],b=[],_=function(w){var j=s[w];i.isInstanceOf("MultiFeature",j)&&(j.getFeatures().forEach(function(V){i.addFeature(V),V.properties=j.properties,d.push(V.toGeoJSON()),i.select([V.id])}),i.deleteFeature(j.id,{silent:!0}),b.push(j.toGeoJSON()))},y=0;y<s.length;y++)_(y);d.length>1&&this.map.fire(O.UNCOMBINE_FEATURES,{createdFeatures:d,deletedFeatures:b}),this.fireActionable()}};var Ni=Bn(I.VERTEX),ea=Bn(I.MIDPOINT),Dt={fireUpdate:function(){this.map.fire(O.UPDATE,{action:F.CHANGE_COORDINATES,features:this.getSelected().map(function(i){return i.toGeoJSON()})})},fireActionable:function(i){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:i.selectedCoordPaths.length>0})},startDragging:function(i,s){this.map.dragPan.disable(),i.canDragMove=!0,i.dragMoveLocation=s.lngLat},stopDragging:function(i){this.map.dragPan.enable(),i.dragMoving=!1,i.canDragMove=!1,i.dragMoveLocation=null},onVertex:function(i,s){this.startDragging(i,s);var d=s.featureTarget.properties,b=i.selectedCoordPaths.indexOf(d.coord_path);zn(s)||b!==-1?zn(s)&&b===-1&&i.selectedCoordPaths.push(d.coord_path):i.selectedCoordPaths=[d.coord_path];var _=this.pathsToCoordinates(i.featureId,i.selectedCoordPaths);this.setSelectedCoordinates(_)},onMidpoint:function(i,s){this.startDragging(i,s);var d=s.featureTarget.properties;i.feature.addCoordinate(d.coord_path,d.lng,d.lat),this.fireUpdate(),i.selectedCoordPaths=[d.coord_path]},pathsToCoordinates:function(i,s){return s.map(function(d){return{feature_id:i,coord_path:d}})},onFeature:function(i,s){i.selectedCoordPaths.length===0?this.startDragging(i,s):this.stopDragging(i)},dragFeature:function(i,s,d){zr(this.getSelected(),d),i.dragMoveLocation=s.lngLat},dragVertex:function(i,s,d){for(var b=i.selectedCoordPaths.map(function(j){return i.feature.getCoordinate(j)}),_=Gr(b.map(function(j){return{type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:j}}}),d),y=0;y<b.length;y++){var w=b[y];i.feature.updateCoordinate(i.selectedCoordPaths[y],w[0]+_.lng,w[1]+_.lat)}},clickNoTarget:function(){this.changeMode(E.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(E.SIMPLE_SELECT)},clickActiveFeature:function(i){i.selectedCoordPaths=[],this.clearSelectedCoordinates(),i.feature.changed()},onSetup:function(i){var s=i.featureId,d=this.getFeature(s);if(!d)throw new Error("You must provide a featureId to enter direct_select mode");if(d.type===m.POINT)throw new TypeError("direct_select mode doesn't handle point features");var b={featureId:s,feature:d,dragMoveLocation:i.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:i.coordPath?[i.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(s,b.selectedCoordPaths)),this.setSelected(s),_t.disable(this),this.setActionableState({trash:!0}),b},onStop:function(){_t.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(i,s,d){i.featureId===s.properties.id?(s.properties.active=C.ACTIVE,d(s),Jn(s,{map:this.map,midpoints:!0,selectedPaths:i.selectedCoordPaths}).forEach(d)):(s.properties.active=C.INACTIVE,d(s)),this.fireActionable(i)},onTrash:function(i){i.selectedCoordPaths.sort(function(s,d){return d.localeCompare(s,"en",{numeric:!0})}).forEach(function(s){return i.feature.removeCoordinate(s)}),this.fireUpdate(),i.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(i),i.feature.isValid()===!1&&(this.deleteFeature([i.featureId]),this.changeMode(E.SIMPLE_SELECT,{}))},onMouseMove:function(i,s){var d=Wt(s),b=Ni(s),_=i.selectedCoordPaths.length===0;return d&&_||b&&!_?this.updateUIClasses({mouse:g.MOVE}):this.updateUIClasses({mouse:g.NONE}),this.stopDragging(i),!0},onMouseOut:function(i){return i.dragMoving&&this.fireUpdate(),!0}};Dt.onTouchStart=Dt.onMouseDown=function(i,s){return Ni(s)?this.onVertex(i,s):Wt(s)?this.onFeature(i,s):ea(s)?this.onMidpoint(i,s):void 0},Dt.onDrag=function(i,s){if(i.canDragMove===!0){i.dragMoving=!0,s.originalEvent.stopPropagation();var d={lng:s.lngLat.lng-i.dragMoveLocation.lng,lat:s.lngLat.lat-i.dragMoveLocation.lat};i.selectedCoordPaths.length>0?this.dragVertex(i,s,d):this.dragFeature(i,s,d),i.dragMoveLocation=s.lngLat}},Dt.onClick=function(i,s){return Gn(s)?this.clickNoTarget(i,s):Wt(s)?this.clickActiveFeature(i,s):Dr(s)?this.clickInactive(i,s):void this.stopDragging(i)},Dt.onTap=function(i,s){return Gn(s)?this.clickNoTarget(i,s):Wt(s)?this.clickActiveFeature(i,s):Dr(s)?this.clickInactive(i,s):void 0},Dt.onTouchEnd=Dt.onMouseUp=function(i){i.dragMoving&&this.fireUpdate(),this.stopDragging(i)};var wt={};function Kn(i,s){return!!i.lngLat&&i.lngLat.lng===s[0]&&i.lngLat.lat===s[1]}wt.onSetup=function(){var i=this.newFeature({type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:[]}});return this.addFeature(i),this.clearSelectedFeatures(),this.updateUIClasses({mouse:g.ADD}),this.activateUIButton(h.POINT),this.setActionableState({trash:!0}),{point:i}},wt.stopDrawingAndRemove=function(i){this.deleteFeature([i.point.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT)},wt.onTap=wt.onClick=function(i,s){this.updateUIClasses({mouse:g.MOVE}),i.point.updateCoordinate("",s.lngLat.lng,s.lngLat.lat),this.map.fire(O.CREATE,{features:[i.point.toGeoJSON()]}),this.changeMode(E.SIMPLE_SELECT,{featureIds:[i.point.id]})},wt.onStop=function(i){this.activateUIButton(),i.point.getCoordinate().length||this.deleteFeature([i.point.id],{silent:!0})},wt.toDisplayFeatures=function(i,s,d){var b=s.properties.id===i.point.id;if(s.properties.active=b?C.ACTIVE:C.INACTIVE,!b)return d(s)},wt.onTrash=wt.stopDrawingAndRemove,wt.onKeyUp=function(i,s){if(Vn(s)||qn(s))return this.stopDrawingAndRemove(i,s)};var Zt={onSetup:function(){var i=this.newFeature({type:m.FEATURE,properties:{},geometry:{type:m.POLYGON,coordinates:[[]]}});return this.addFeature(i),this.clearSelectedFeatures(),_t.disable(this),this.updateUIClasses({mouse:g.ADD}),this.activateUIButton(h.POLYGON),this.setActionableState({trash:!0}),{polygon:i,currentVertexPosition:0}},clickAnywhere:function(i,s){if(i.currentVertexPosition>0&&Kn(s,i.polygon.coordinates[0][i.currentVertexPosition-1]))return this.changeMode(E.SIMPLE_SELECT,{featureIds:[i.polygon.id]});this.updateUIClasses({mouse:g.ADD}),i.polygon.updateCoordinate("0."+i.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),i.currentVertexPosition++,i.polygon.updateCoordinate("0."+i.currentVertexPosition,s.lngLat.lng,s.lngLat.lat)},clickOnVertex:function(i){return this.changeMode(E.SIMPLE_SELECT,{featureIds:[i.polygon.id]})},onMouseMove:function(i,s){i.polygon.updateCoordinate("0."+i.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),vn(s)&&this.updateUIClasses({mouse:g.POINTER})}};Zt.onTap=Zt.onClick=function(i,s){return vn(s)?this.clickOnVertex(i,s):this.clickAnywhere(i,s)},Zt.onKeyUp=function(i,s){Vn(s)?(this.deleteFeature([i.polygon.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT)):qn(s)&&this.changeMode(E.SIMPLE_SELECT,{featureIds:[i.polygon.id]})},Zt.onStop=function(i){this.updateUIClasses({mouse:g.NONE}),_t.enable(this),this.activateUIButton(),this.getFeature(i.polygon.id)!==void 0&&(i.polygon.removeCoordinate("0."+i.currentVertexPosition),i.polygon.isValid()?this.map.fire(O.CREATE,{features:[i.polygon.toGeoJSON()]}):(this.deleteFeature([i.polygon.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT,{},{silent:!0})))},Zt.toDisplayFeatures=function(i,s,d){var b=s.properties.id===i.polygon.id;if(s.properties.active=b?C.ACTIVE:C.INACTIVE,!b)return d(s);if(s.geometry.coordinates.length!==0){var _=s.geometry.coordinates[0].length;if(!(_<3)){if(s.properties.meta=I.FEATURE,d(an(i.polygon.id,s.geometry.coordinates[0][0],"0.0",!1)),_>3){var y=s.geometry.coordinates[0].length-3;d(an(i.polygon.id,s.geometry.coordinates[0][y],"0."+y,!1))}if(_<=4){var w=[[s.geometry.coordinates[0][0][0],s.geometry.coordinates[0][0][1]],[s.geometry.coordinates[0][1][0],s.geometry.coordinates[0][1][1]]];if(d({type:m.FEATURE,properties:s.properties,geometry:{coordinates:w,type:m.LINE_STRING}}),_===3)return}return d(s)}}},Zt.onTrash=function(i){this.deleteFeature([i.polygon.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT)};var Xt={onSetup:function(i){var s,d,b=(i=i||{}).featureId,_="forward";if(b){if(!(s=this.getFeature(b)))throw new Error("Could not find a feature with the provided featureId");var y=i.from;if(y&&y.type==="Feature"&&y.geometry&&y.geometry.type==="Point"&&(y=y.geometry),y&&y.type==="Point"&&y.coordinates&&y.coordinates.length===2&&(y=y.coordinates),!y||!Array.isArray(y))throw new Error("Please use the `from` property to indicate which point to continue the line from");var w=s.coordinates.length-1;if(s.coordinates[w][0]===y[0]&&s.coordinates[w][1]===y[1])d=w+1,s.addCoordinate.apply(s,[d].concat(s.coordinates[w]));else{if(s.coordinates[0][0]!==y[0]||s.coordinates[0][1]!==y[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");_="backwards",d=0,s.addCoordinate.apply(s,[d].concat(s.coordinates[0]))}}else s=this.newFeature({type:m.FEATURE,properties:{},geometry:{type:m.LINE_STRING,coordinates:[]}}),d=0,this.addFeature(s);return this.clearSelectedFeatures(),_t.disable(this),this.updateUIClasses({mouse:g.ADD}),this.activateUIButton(h.LINE),this.setActionableState({trash:!0}),{line:s,currentVertexPosition:d,direction:_}},clickAnywhere:function(i,s){if(i.currentVertexPosition>0&&Kn(s,i.line.coordinates[i.currentVertexPosition-1])||i.direction==="backwards"&&Kn(s,i.line.coordinates[i.currentVertexPosition+1]))return this.changeMode(E.SIMPLE_SELECT,{featureIds:[i.line.id]});this.updateUIClasses({mouse:g.ADD}),i.line.updateCoordinate(i.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),i.direction==="forward"?(i.currentVertexPosition++,i.line.updateCoordinate(i.currentVertexPosition,s.lngLat.lng,s.lngLat.lat)):i.line.addCoordinate(0,s.lngLat.lng,s.lngLat.lat)},clickOnVertex:function(i){return this.changeMode(E.SIMPLE_SELECT,{featureIds:[i.line.id]})},onMouseMove:function(i,s){i.line.updateCoordinate(i.currentVertexPosition,s.lngLat.lng,s.lngLat.lat),vn(s)&&this.updateUIClasses({mouse:g.POINTER})}};Xt.onTap=Xt.onClick=function(i,s){if(vn(s))return this.clickOnVertex(i,s);this.clickAnywhere(i,s)},Xt.onKeyUp=function(i,s){qn(s)?this.changeMode(E.SIMPLE_SELECT,{featureIds:[i.line.id]}):Vn(s)&&(this.deleteFeature([i.line.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT))},Xt.onStop=function(i){_t.enable(this),this.activateUIButton(),this.getFeature(i.line.id)!==void 0&&(i.line.removeCoordinate(""+i.currentVertexPosition),i.line.isValid()?this.map.fire(O.CREATE,{features:[i.line.toGeoJSON()]}):(this.deleteFeature([i.line.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT,{},{silent:!0})))},Xt.onTrash=function(i){this.deleteFeature([i.line.id],{silent:!0}),this.changeMode(E.SIMPLE_SELECT)},Xt.toDisplayFeatures=function(i,s,d){var b=s.properties.id===i.line.id;if(s.properties.active=b?C.ACTIVE:C.INACTIVE,!b)return d(s);s.geometry.coordinates.length<2||(s.properties.meta=I.FEATURE,d(an(i.line.id,s.geometry.coordinates[i.direction==="forward"?s.geometry.coordinates.length-2:1],""+(i.direction==="forward"?s.geometry.coordinates.length-2:1),!1)),d(s))};var Ri={simple_select:Ye,direct_select:Dt,draw_point:wt,draw_polygon:Zt,draw_line_string:Xt},ta={defaultMode:E.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Ti,modes:Ri,controls:{},userProperties:!1},na={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},ra={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Fi(i,s){return i.map(function(d){return d.source?d:Ft(d,{id:d.id+"."+s,source:s==="hot"?v.HOT:v.COLD})})}var Qn={};(function(i,s){var d="__lodash_hash_undefined__",b=9007199254740991,_="[object Arguments]",y="[object Array]",w="[object Boolean]",j="[object Date]",V="[object Error]",X="[object Function]",W="[object Map]",q="[object Number]",le="[object Object]",Ue="[object Promise]",ce="[object RegExp]",ze="[object Set]",N="[object String]",te="[object Symbol]",we="[object WeakMap]",Ze="[object ArrayBuffer]",Ve="[object DataView]",Vr=/^\[object .+?Constructor\]$/,sa=/^(?:0|[1-9]\d*)$/,Ae={};Ae["[object Float32Array]"]=Ae["[object Float64Array]"]=Ae["[object Int8Array]"]=Ae["[object Int16Array]"]=Ae["[object Int32Array]"]=Ae["[object Uint8Array]"]=Ae["[object Uint8ClampedArray]"]=Ae["[object Uint16Array]"]=Ae["[object Uint32Array]"]=!0,Ae[_]=Ae[y]=Ae[Ze]=Ae[w]=Ae[Ve]=Ae[j]=Ae[V]=Ae[X]=Ae[W]=Ae[q]=Ae[le]=Ae[ce]=Ae[ze]=Ae[N]=Ae[we]=!1;var Ui=typeof On=="object"&&On&&On.Object===Object&&On,ua=typeof self=="object"&&self&&self.Object===Object&&self,It=Ui||ua||Function("return this")(),ji=s&&!s.nodeType&&s,Bi=ji&&i&&!i.nodeType&&i,Gi=Bi&&Bi.exports===ji,qr=Gi&&Ui.process,zi=function(){try{return qr&&qr.binding&&qr.binding("util")}catch{}}(),Vi=zi&&zi.isTypedArray;function fa(S,L){for(var Y=-1,re=S==null?0:S.length;++Y<re;)if(L(S[Y],Y,S))return!0;return!1}function ca(S){var L=-1,Y=Array(S.size);return S.forEach(function(re,Ne){Y[++L]=[Ne,re]}),Y}function da(S){var L=-1,Y=Array(S.size);return S.forEach(function(re){Y[++L]=re}),Y}var qi,Ji,Yi,ha=Array.prototype,pa=Function.prototype,er=Object.prototype,Jr=It["__core-js_shared__"],Hi=pa.toString,St=er.hasOwnProperty,Wi=(qi=/[^.]+$/.exec(Jr&&Jr.keys&&Jr.keys.IE_PROTO||""))?"Symbol(src)_1."+qi:"",Zi=er.toString,ga=RegExp("^"+Hi.call(St).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xi=Gi?It.Buffer:void 0,tr=It.Symbol,Ki=It.Uint8Array,Qi=er.propertyIsEnumerable,ma=ha.splice,Kt=tr?tr.toStringTag:void 0,$i=Object.getOwnPropertySymbols,ba=Xi?Xi.isBuffer:void 0,va=(Ji=Object.keys,Yi=Object,function(S){return Ji(Yi(S))}),Yr=un(It,"DataView"),yn=un(It,"Map"),Hr=un(It,"Promise"),Wr=un(It,"Set"),Zr=un(It,"WeakMap"),En=un(Object,"create"),_a=en(Yr),ya=en(yn),Ea=en(Hr),wa=en(Wr),Sa=en(Zr),eo=tr?tr.prototype:void 0,Xr=eo?eo.valueOf:void 0;function Qt(S){var L=-1,Y=S==null?0:S.length;for(this.clear();++L<Y;){var re=S[L];this.set(re[0],re[1])}}function Lt(S){var L=-1,Y=S==null?0:S.length;for(this.clear();++L<Y;){var re=S[L];this.set(re[0],re[1])}}function $t(S){var L=-1,Y=S==null?0:S.length;for(this.clear();++L<Y;){var re=S[L];this.set(re[0],re[1])}}function nr(S){var L=-1,Y=S==null?0:S.length;for(this.__data__=new $t;++L<Y;)this.add(S[L])}function Ut(S){var L=this.__data__=new Lt(S);this.size=L.size}function ka(S,L){var Y=or(S),re=!Y&&La(S),Ne=!Y&&!re&&Kr(S),_e=!Y&&!re&&!Ne&&uo(S),Be=Y||re||Ne||_e,qe=Be?function(We,kt){for(var Mt=-1,tt=Array(We);++Mt<We;)tt[Mt]=kt(Mt);return tt}(S.length,String):[],yt=qe.length;for(var He in S)!L&&!St.call(S,He)||Be&&(He=="length"||Ne&&(He=="offset"||He=="parent")||_e&&(He=="buffer"||He=="byteLength"||He=="byteOffset")||Ia(He,yt))||qe.push(He);return qe}function rr(S,L){for(var Y=S.length;Y--;)if(oo(S[Y][0],L))return Y;return-1}function wn(S){return S==null?S===void 0?"[object Undefined]":"[object Null]":Kt&&Kt in Object(S)?function(L){var Y=St.call(L,Kt),re=L[Kt];try{L[Kt]=void 0;var Ne=!0}catch{}var _e=Zi.call(L);return Ne&&(Y?L[Kt]=re:delete L[Kt]),_e}(S):function(L){return Zi.call(L)}(S)}function to(S){return Sn(S)&&wn(S)==_}function no(S,L,Y,re,Ne){return S===L||(S==null||L==null||!Sn(S)&&!Sn(L)?S!=S&&L!=L:function(_e,Be,qe,yt,He,We){var kt=or(_e),Mt=or(Be),tt=kt?y:jt(_e),xt=Mt?y:jt(Be),fn=(tt=tt==_?le:tt)==le,lr=(xt=xt==_?le:xt)==le,cn=tt==xt;if(cn&&Kr(_e)){if(!Kr(Be))return!1;kt=!0,fn=!1}if(cn&&!fn)return We||(We=new Ut),kt||uo(_e)?ro(_e,Be,qe,yt,He,We):function(Te,Se,ar,Bt,Qr,mt,Pt){switch(ar){case Ve:if(Te.byteLength!=Se.byteLength||Te.byteOffset!=Se.byteOffset)return!1;Te=Te.buffer,Se=Se.buffer;case Ze:return!(Te.byteLength!=Se.byteLength||!mt(new Ki(Te),new Ki(Se)));case w:case j:case q:return oo(+Te,+Se);case V:return Te.name==Se.name&&Te.message==Se.message;case ce:case N:return Te==Se+"";case W:var Gt=ca;case ze:var Tn=1&Bt;if(Gt||(Gt=da),Te.size!=Se.size&&!Tn)return!1;var sr=Pt.get(Te);if(sr)return sr==Se;Bt|=2,Pt.set(Te,Se);var dn=ro(Gt(Te),Gt(Se),Bt,Qr,mt,Pt);return Pt.delete(Te),dn;case te:if(Xr)return Xr.call(Te)==Xr.call(Se)}return!1}(_e,Be,tt,qe,yt,He,We);if(!(1&qe)){var kn=fn&&St.call(_e,"__wrapped__"),fo=lr&&St.call(Be,"__wrapped__");if(kn||fo){var xa=kn?_e.value():_e,Pa=fo?Be.value():Be;return We||(We=new Ut),He(xa,Pa,qe,yt,We)}}return cn?(We||(We=new Ut),function(Te,Se,ar,Bt,Qr,mt){var Pt=1&ar,Gt=io(Te),Tn=Gt.length,sr=io(Se).length;if(Tn!=sr&&!Pt)return!1;for(var dn=Tn;dn--;){var tn=Gt[dn];if(!(Pt?tn in Se:St.call(Se,tn)))return!1}var co=mt.get(Te);if(co&&mt.get(Se))return co==Se;var ur=!0;mt.set(Te,Se),mt.set(Se,Te);for(var $r=Pt;++dn<Tn;){var fr=Te[tn=Gt[dn]],cr=Se[tn];if(Bt)var ho=Pt?Bt(cr,fr,tn,Se,Te,mt):Bt(fr,cr,tn,Te,Se,mt);if(!(ho===void 0?fr===cr||Qr(fr,cr,ar,Bt,mt):ho)){ur=!1;break}$r||($r=tn=="constructor")}if(ur&&!$r){var dr=Te.constructor,hr=Se.constructor;dr==hr||!("constructor"in Te)||!("constructor"in Se)||typeof dr=="function"&&dr instanceof dr&&typeof hr=="function"&&hr instanceof hr||(ur=!1)}return mt.delete(Te),mt.delete(Se),ur}(_e,Be,qe,yt,He,We)):!1}(S,L,Y,re,no,Ne))}function Ta(S){return!(!so(S)||function(L){return!!Wi&&Wi in L}(S))&&(lo(S)?ga:Vr).test(en(S))}function Ca(S){if(Y=(L=S)&&L.constructor,re=typeof Y=="function"&&Y.prototype||er,L!==re)return va(S);var L,Y,re,Ne=[];for(var _e in Object(S))St.call(S,_e)&&_e!="constructor"&&Ne.push(_e);return Ne}function ro(S,L,Y,re,Ne,_e){var Be=1&Y,qe=S.length,yt=L.length;if(qe!=yt&&!(Be&&yt>qe))return!1;var He=_e.get(S);if(He&&_e.get(L))return He==L;var We=-1,kt=!0,Mt=2&Y?new nr:void 0;for(_e.set(S,L),_e.set(L,S);++We<qe;){var tt=S[We],xt=L[We];if(re)var fn=Be?re(xt,tt,We,L,S,_e):re(tt,xt,We,S,L,_e);if(fn!==void 0){if(fn)continue;kt=!1;break}if(Mt){if(!fa(L,function(lr,cn){if(kn=cn,!Mt.has(kn)&&(tt===lr||Ne(tt,lr,Y,re,_e)))return Mt.push(cn);var kn})){kt=!1;break}}else if(tt!==xt&&!Ne(tt,xt,Y,re,_e)){kt=!1;break}}return _e.delete(S),_e.delete(L),kt}function io(S){return function(L,Y,re){var Ne=Y(L);return or(L)?Ne:function(_e,Be){for(var qe=-1,yt=Be.length,He=_e.length;++qe<yt;)_e[He+qe]=Be[qe];return _e}(Ne,re(L))}(S,Ma,Oa)}function ir(S,L){var Y,re,Ne=S.__data__;return((re=typeof(Y=L))=="string"||re=="number"||re=="symbol"||re=="boolean"?Y!=="__proto__":Y===null)?Ne[typeof L=="string"?"string":"hash"]:Ne.map}function un(S,L){var Y=function(re,Ne){return re==null?void 0:re[Ne]}(S,L);return Ta(Y)?Y:void 0}Qt.prototype.clear=function(){this.__data__=En?En(null):{},this.size=0},Qt.prototype.delete=function(S){var L=this.has(S)&&delete this.__data__[S];return this.size-=L?1:0,L},Qt.prototype.get=function(S){var L=this.__data__;if(En){var Y=L[S];return Y===d?void 0:Y}return St.call(L,S)?L[S]:void 0},Qt.prototype.has=function(S){var L=this.__data__;return En?L[S]!==void 0:St.call(L,S)},Qt.prototype.set=function(S,L){var Y=this.__data__;return this.size+=this.has(S)?0:1,Y[S]=En&&L===void 0?d:L,this},Lt.prototype.clear=function(){this.__data__=[],this.size=0},Lt.prototype.delete=function(S){var L=this.__data__,Y=rr(L,S);return!(Y<0)&&(Y==L.length-1?L.pop():ma.call(L,Y,1),--this.size,!0)},Lt.prototype.get=function(S){var L=this.__data__,Y=rr(L,S);return Y<0?void 0:L[Y][1]},Lt.prototype.has=function(S){return rr(this.__data__,S)>-1},Lt.prototype.set=function(S,L){var Y=this.__data__,re=rr(Y,S);return re<0?(++this.size,Y.push([S,L])):Y[re][1]=L,this},$t.prototype.clear=function(){this.size=0,this.__data__={hash:new Qt,map:new(yn||Lt),string:new Qt}},$t.prototype.delete=function(S){var L=ir(this,S).delete(S);return this.size-=L?1:0,L},$t.prototype.get=function(S){return ir(this,S).get(S)},$t.prototype.has=function(S){return ir(this,S).has(S)},$t.prototype.set=function(S,L){var Y=ir(this,S),re=Y.size;return Y.set(S,L),this.size+=Y.size==re?0:1,this},nr.prototype.add=nr.prototype.push=function(S){return this.__data__.set(S,d),this},nr.prototype.has=function(S){return this.__data__.has(S)},Ut.prototype.clear=function(){this.__data__=new Lt,this.size=0},Ut.prototype.delete=function(S){var L=this.__data__,Y=L.delete(S);return this.size=L.size,Y},Ut.prototype.get=function(S){return this.__data__.get(S)},Ut.prototype.has=function(S){return this.__data__.has(S)},Ut.prototype.set=function(S,L){var Y=this.__data__;if(Y instanceof Lt){var re=Y.__data__;if(!yn||re.length<199)return re.push([S,L]),this.size=++Y.size,this;Y=this.__data__=new $t(re)}return Y.set(S,L),this.size=Y.size,this};var Oa=$i?function(S){return S==null?[]:(S=Object(S),function(L,Y){for(var re=-1,Ne=L==null?0:L.length,_e=0,Be=[];++re<Ne;){var qe=L[re];Y(qe,re,L)&&(Be[_e++]=qe)}return Be}($i(S),function(L){return Qi.call(S,L)}))}:function(){return[]},jt=wn;function Ia(S,L){return!!(L=L??b)&&(typeof S=="number"||sa.test(S))&&S>-1&&S%1==0&&S<L}function en(S){if(S!=null){try{return Hi.call(S)}catch{}try{return S+""}catch{}}return""}function oo(S,L){return S===L||S!=S&&L!=L}(Yr&&jt(new Yr(new ArrayBuffer(1)))!=Ve||yn&&jt(new yn)!=W||Hr&&jt(Hr.resolve())!=Ue||Wr&&jt(new Wr)!=ze||Zr&&jt(new Zr)!=we)&&(jt=function(S){var L=wn(S),Y=L==le?S.constructor:void 0,re=Y?en(Y):"";if(re)switch(re){case _a:return Ve;case ya:return W;case Ea:return Ue;case wa:return ze;case Sa:return we}return L});var La=to(function(){return arguments}())?to:function(S){return Sn(S)&&St.call(S,"callee")&&!Qi.call(S,"callee")},or=Array.isArray,Kr=ba||function(){return!1};function lo(S){if(!so(S))return!1;var L=wn(S);return L==X||L=="[object GeneratorFunction]"||L=="[object AsyncFunction]"||L=="[object Proxy]"}function ao(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=b}function so(S){var L=typeof S;return S!=null&&(L=="object"||L=="function")}function Sn(S){return S!=null&&typeof S=="object"}var uo=Vi?function(S){return function(L){return S(L)}}(Vi):function(S){return Sn(S)&&ao(S.length)&&!!Ae[wn(S)]};function Ma(S){return(L=S)!=null&&ao(L.length)&&!lo(L)?ka(S):Ca(S);var L}i.exports=function(S,L){return no(S,L)}})({get exports(){return Qn},set exports(i){Qn=i}},Qn);var ia=Qn;function Di(i,s){return i.length===s.length&&JSON.stringify(i.map(function(d){return d}).sort())===JSON.stringify(s.map(function(d){return d}).sort())}var oa={Polygon:st,LineString:se,Point:T,MultiPolygon:Ke,MultiLineString:Ke,MultiPoint:Ke},la=Object.freeze({__proto__:null,CommonSelectors:Gl,constrainFeatureMovement:Gr,createMidPoint:Ii,createSupplementaryPoints:Jn,createVertex:an,doubleClickZoom:_t,euclideanDistance:fe,featuresAt:ee,getFeatureAtAndSetCursors:K,isClick:xe,isEventAtCoordinates:Kn,isTap:Ce,mapEventToBoundingBox:ue,ModeHandler:t,moveFeatures:zr,sortFeatures:oe,stringSetsAreEqual:Di,StringSet:U,theme:Ti,toDenseArray:bn}),aa=function(i,s){var d={options:i=function(_){_===void 0&&(_={});var y=Ft(_);return _.controls||(y.controls={}),_.displayControlsDefault===!1?y.controls=Ft(ra,_.controls):y.controls=Ft(na,_.controls),(y=Ft(ta,y)).styles=Fi(y.styles,"cold").concat(Fi(y.styles,"hot")),y}(i)};s=function(_,y){return y.modes=E,y.getFeatureIdsAt=function(w){return ee.click({point:w},null,_).map(function(j){return j.properties.id})},y.getSelectedIds=function(){return _.store.getSelectedIds()},y.getSelected=function(){return{type:m.FEATURE_COLLECTION,features:_.store.getSelectedIds().map(function(w){return _.store.get(w)}).map(function(w){return w.toGeoJSON()})}},y.getSelectedPoints=function(){return{type:m.FEATURE_COLLECTION,features:_.store.getSelectedCoordinates().map(function(w){return{type:m.FEATURE,properties:{},geometry:{type:m.POINT,coordinates:w.coordinates}}})}},y.set=function(w){if(w.type===void 0||w.type!==m.FEATURE_COLLECTION||!Array.isArray(w.features))throw new Error("Invalid FeatureCollection");var j=_.store.createRenderBatch(),V=_.store.getAllIds().slice(),X=y.add(w),W=new U(X);return(V=V.filter(function(q){return!W.has(q)})).length&&y.delete(V),j(),X},y.add=function(w){var j=JSON.parse(JSON.stringify(Li(w))).features.map(function(V){if(V.id=V.id||ke(),V.geometry===null)throw new Error("Invalid geometry: null");if(_.store.get(V.id)===void 0||_.store.get(V.id).type!==V.geometry.type){var X=oa[V.geometry.type];if(X===void 0)throw new Error("Invalid geometry type: "+V.geometry.type+".");var W=new X(_,V);_.store.add(W)}else{var q=_.store.get(V.id);q.properties=V.properties,ia(q.getCoordinates(),V.geometry.coordinates)||q.incomingCoords(V.geometry.coordinates)}return V.id});return _.store.render(),j},y.get=function(w){var j=_.store.get(w);if(j)return j.toGeoJSON()},y.getAll=function(){return{type:m.FEATURE_COLLECTION,features:_.store.getAll().map(function(w){return w.toGeoJSON()})}},y.delete=function(w){return _.store.delete(w,{silent:!0}),y.getMode()!==E.DIRECT_SELECT||_.store.getSelectedIds().length?_.store.render():_.events.changeMode(E.SIMPLE_SELECT,void 0,{silent:!0}),y},y.deleteAll=function(){return _.store.delete(_.store.getAllIds(),{silent:!0}),y.getMode()===E.DIRECT_SELECT?_.events.changeMode(E.SIMPLE_SELECT,void 0,{silent:!0}):_.store.render(),y},y.changeMode=function(w,j){return j===void 0&&(j={}),w===E.SIMPLE_SELECT&&y.getMode()===E.SIMPLE_SELECT?(Di(j.featureIds||[],_.store.getSelectedIds())||(_.store.setSelected(j.featureIds,{silent:!0}),_.store.render()),y):(w===E.DIRECT_SELECT&&y.getMode()===E.DIRECT_SELECT&&j.featureId===_.store.getSelectedIds()[0]||_.events.changeMode(w,j,{silent:!0}),y)},y.getMode=function(){return _.events.getMode()},y.trash=function(){return _.events.trash({silent:!0}),y},y.combineFeatures=function(){return _.events.combineFeatures({silent:!0}),y},y.uncombineFeatures=function(){return _.events.uncombineFeatures({silent:!0}),y},y.setFeatureProperty=function(w,j,V){return _.store.setFeatureProperty(w,j,V),y},y}(d,s),d.api=s;var b=Bl(d);return s.onAdd=b.onAdd,s.onRemove=b.onRemove,s.types=h,s.options=i,s};function $n(i){aa(i,this)}return $n.modes=Ri,$n.constants=D,$n.lib=la,$n})})($u);const pl=ja(hi);let ye;const Ml=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Ml.decode();let yr=new Uint8Array;function Pn(){return yr.byteLength===0&&(yr=new Uint8Array(ye.memory.buffer)),yr}function pn(n,e){return Ml.decode(Pn().subarray(n,n+e))}const Rt=new Array(32).fill(void 0);Rt.push(void 0,null,!0,!1);let An=Rt.length;function At(n){An===Rt.length&&Rt.push(Rt.length+1);const e=An;return An=Rt[e],Rt[e]=n,e}function Fe(n){return Rt[n]}function ef(n){n<36||(Rt[n]=An,An=n)}function xl(n){const e=Fe(n);return ef(n),e}function ni(n){return n==null}let Er=new Float64Array;function tf(){return Er.byteLength===0&&(Er=new Float64Array(ye.memory.buffer)),Er}let wr=new Int32Array;function Qe(){return wr.byteLength===0&&(wr=new Int32Array(ye.memory.buffer)),wr}let qt=0;const Sr=new TextEncoder("utf-8"),nf=typeof Sr.encodeInto=="function"?function(n,e){return Sr.encodeInto(n,e)}:function(n,e){const t=Sr.encode(n);return e.set(t),{read:n.length,written:t.length}};function br(n,e,t){if(t===void 0){const u=Sr.encode(n),c=e(u.length);return Pn().subarray(c,c+u.length).set(u),qt=u.length,c}let r=n.length,o=e(r);const l=Pn();let a=0;for(;a<r;a++){const u=n.charCodeAt(a);if(u>127)break;l[o+a]=u}if(a!==r){a!==0&&(n=n.slice(a)),o=t(o,r,r=a+n.length*3);const u=Pn().subarray(o+a,o+r),c=nf(n,u);a+=c.written}return qt=a,o}function pi(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const o=n.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=n.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(n)){const o=n.length;let l="[";o>0&&(l+=pi(n[0]));for(let a=1;a<o;a++)l+=", "+pi(n[a]);return l+="]",l}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}function rf(n,e){const t=e(n.length*1);return Pn().set(n,t/1),qt=n.length,t}class Mr{static __wrap(e){const t=Object.create(Mr.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();ye.__wbg_jsroutesnapper_free(e)}constructor(e){try{const l=ye.__wbindgen_add_to_stack_pointer(-16),a=rf(e,ye.__wbindgen_malloc),u=qt;ye.jsroutesnapper_new(l,a,u);var t=Qe()[l/4+0],r=Qe()[l/4+1],o=Qe()[l/4+2];if(o)throw xl(r);return Mr.__wrap(t)}finally{ye.__wbindgen_add_to_stack_pointer(16)}}setConfig(e){ye.jsroutesnapper_setConfig(this.ptr,At(e))}toFinalFeature(){try{const r=ye.__wbindgen_add_to_stack_pointer(-16);ye.jsroutesnapper_toFinalFeature(r,this.ptr);var e=Qe()[r/4+0],t=Qe()[r/4+1];let o;return e!==0&&(o=pn(e,t).slice(),ye.__wbindgen_free(e,t*1)),o}finally{ye.__wbindgen_add_to_stack_pointer(16)}}renderGeojson(){try{const r=ye.__wbindgen_add_to_stack_pointer(-16);ye.jsroutesnapper_renderGeojson(r,this.ptr);var e=Qe()[r/4+0],t=Qe()[r/4+1];return pn(e,t)}finally{ye.__wbindgen_add_to_stack_pointer(16),ye.__wbindgen_free(e,t)}}setSnapMode(e){ye.jsroutesnapper_setSnapMode(this.ptr,e)}onMouseMove(e,t,r){return ye.jsroutesnapper_onMouseMove(this.ptr,e,t,r)!==0}onClick(){ye.jsroutesnapper_onClick(this.ptr)}onDragStart(){return ye.jsroutesnapper_onDragStart(this.ptr)!==0}onMouseUp(){return ye.jsroutesnapper_onMouseUp(this.ptr)!==0}clearState(){ye.jsroutesnapper_clearState(this.ptr)}}async function of(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function lf(){const n={};return n.wbg={},n.wbg.__wbindgen_string_new=function(e,t){const r=pn(e,t);return At(r)},n.wbg.__wbindgen_is_object=function(e){const t=Fe(e);return typeof t=="object"&&t!==null},n.wbg.__wbindgen_is_undefined=function(e){return Fe(e)===void 0},n.wbg.__wbindgen_in=function(e,t){return Fe(e)in Fe(t)},n.wbg.__wbindgen_object_drop_ref=function(e){xl(e)},n.wbg.__wbindgen_boolean_get=function(e){const t=Fe(e);return typeof t=="boolean"?t?1:0:2},n.wbg.__wbindgen_error_new=function(e,t){const r=new Error(pn(e,t));return At(r)},n.wbg.__wbindgen_jsval_loose_eq=function(e,t){return Fe(e)==Fe(t)},n.wbg.__wbindgen_number_get=function(e,t){const r=Fe(t),o=typeof r=="number"?r:void 0;tf()[e/8+1]=ni(o)?0:o,Qe()[e/4+0]=!ni(o)},n.wbg.__wbindgen_string_get=function(e,t){const r=Fe(t),o=typeof r=="string"?r:void 0;var l=ni(o)?0:br(o,ye.__wbindgen_malloc,ye.__wbindgen_realloc),a=qt;Qe()[e/4+1]=a,Qe()[e/4+0]=l},n.wbg.__wbg_String_91fba7ded13ba54c=function(e,t){const r=String(Fe(t)),o=br(r,ye.__wbindgen_malloc,ye.__wbindgen_realloc),l=qt;Qe()[e/4+1]=l,Qe()[e/4+0]=o},n.wbg.__wbindgen_object_clone_ref=function(e){const t=Fe(e);return At(t)},n.wbg.__wbg_getwithrefkey_15c62c2b8546208d=function(e,t){const r=Fe(e)[Fe(t)];return At(r)},n.wbg.__wbg_log_4b5638ad60bdc54a=function(e){console.log(Fe(e))},n.wbg.__wbg_instanceof_ArrayBuffer_e5e48f4762c5610b=function(e){let t;try{t=Fe(e)instanceof ArrayBuffer}catch{t=!1}return t},n.wbg.__wbg_buffer_3f3d764d4747d564=function(e){const t=Fe(e).buffer;return At(t)},n.wbg.__wbg_new_8c3f0052272a457a=function(e){const t=new Uint8Array(Fe(e));return At(t)},n.wbg.__wbg_set_83db9690f9353e79=function(e,t,r){Fe(e).set(Fe(t),r>>>0)},n.wbg.__wbg_length_9e1ae1900cb0fbd5=function(e){return Fe(e).length},n.wbg.__wbg_instanceof_Uint8Array_971eeda69eb75003=function(e){let t;try{t=Fe(e)instanceof Uint8Array}catch{t=!1}return t},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return At(e)},n.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const r=Fe(t).stack,o=br(r,ye.__wbindgen_malloc,ye.__wbindgen_realloc),l=qt;Qe()[e/4+1]=l,Qe()[e/4+0]=o},n.wbg.__wbg_error_f851667af71bcfc6=function(e,t){try{console.error(pn(e,t))}finally{ye.__wbindgen_free(e,t)}},n.wbg.__wbindgen_debug_string=function(e,t){const r=pi(Fe(t)),o=br(r,ye.__wbindgen_malloc,ye.__wbindgen_realloc),l=qt;Qe()[e/4+1]=l,Qe()[e/4+0]=o},n.wbg.__wbindgen_throw=function(e,t){throw new Error(pn(e,t))},n.wbg.__wbindgen_memory=function(){const e=ye.memory;return At(e)},n}function af(n,e){return ye=n.exports,Pl.__wbindgen_wasm_module=e,Er=new Float64Array,wr=new Int32Array,yr=new Uint8Array,ye}async function Pl(n){typeof n>"u"&&(n="/atip/assets/route_snapper_bg.wasm");const e=lf();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:r}=await of(await n,e);return af(t,r)}var Un,gi,Pr,Al,jn,mi,Nt,nn;class sf{constructor(e,t,r){Cn(this,Un);Cn(this,Pr);Cn(this,jn);Cn(this,Nt);this.controlDiv=r,this.map=e,console.time("Deserialize and setup JsRouteSnapper"),this.inner=new Mr(t),console.timeEnd("Deserialize and setup JsRouteSnapper"),console.log("JsRouteSnapper ready, waiting for idle event"),this.active=!1,this.map.once("idle",()=>{console.log("JsRouteSnapper now usable"),this.map.addSource("route-snapper",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:"route-points",type:"circle",source:"route-snapper",paint:{"circle-radius":["match",["get","type"],"unimportant",10/2,10],"circle-color":["match",["get","type"],"hovered","green","important","red","black"]},filter:["in","$type","Point"]}),this.map.addLayer({id:"route-lines",type:"line",source:"route-snapper",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"black","line-width":2.5},filter:["in","$type","LineString"]}),this.map.on("mousemove",a=>{if(!this.active)return;const u={x:a.point.x-30,y:a.point.y},c=this.map.unproject(a.point).distanceTo(this.map.unproject(u));this.inner.onMouseMove(a.lngLat.lng,a.lngLat.lat,c)&&bt(this,Nt,nn).call(this)}),this.map.on("click",()=>{this.active&&(this.inner.onClick(),bt(this,Nt,nn).call(this))}),this.map.on("dragstart",a=>{this.active&&this.inner.onDragStart()&&this.map.dragPan.disable()}),this.map.on("mouseup",a=>{this.active&&this.inner.onMouseUp()&&this.map.dragPan.enable()}),document.addEventListener("keypress",a=>{this.active&&a.key=="Enter"&&(a.preventDefault(),bt(this,jn,mi).call(this))}),document.addEventListener("keydown",a=>{this.active&&a.key=="Shift"&&(a.preventDefault(),this.inner.setSnapMode(!1),bt(this,Nt,nn).call(this))}),document.addEventListener("keyup",a=>{this.active&&a.key=="Shift"&&(a.preventDefault(),this.inner.setSnapMode(!0),bt(this,Nt,nn).call(this))}),bt(this,Un,gi).call(this)})}isActive(){return this.active}tearDown(){this.map.removeLayer("route-points"),this.map.removeLayer("route-lines"),this.map.removeSource("route-snapper")}}Un=new WeakSet,gi=function(){this.active=!1,this.inner.clearState(),bt(this,Nt,nn).call(this),this.controlDiv.innerHTML="";let e=document.createElement("button");e.innerText="Route tool",e.type="button",e.onclick=()=>{bt(this,Pr,Al).call(this)},this.controlDiv.appendChild(e)},Pr=new WeakSet,Al=function(){this.active=!0,this.controlDiv.dispatchEvent(new CustomEvent("activate")),this.controlDiv.innerHTML="";let e=document.createElement("button");e.type="button",e.innerText="Finish route",e.onclick=()=>{bt(this,jn,mi).call(this)},this.controlDiv.appendChild(e);let t=document.createElement("input");t.type="checkbox",t.id="avoidDoublingBack",t.onclick=()=>{this.inner.setConfig({avoid_doubling_back:t.checked}),bt(this,Nt,nn).call(this)};let r=document.createElement("label");r.innerText="Avoid doubling back",r.for=t.id;let o=document.createElement("div");o.appendChild(t),o.appendChild(r),this.controlDiv.append(o);const l=document.createElement("ul");l.innerHTML="<li><b>Click</b> green points on the transport network</br>to create snapped routes</li><li>Hold <b>Shift</b> to draw a point anywhere</li><li><b>Click and drag</b> any point to move it</li><li><b>Click</b> a red waypoint to delete it</li><li>Press <b>Enter</b> to finish route</li>",this.controlDiv.appendChild(l)},jn=new WeakSet,mi=function(){const e=this.inner.toFinalFeature();e?this.controlDiv.dispatchEvent(new CustomEvent("new-route",{detail:JSON.parse(e)})):this.controlDiv.dispatchEvent(new CustomEvent("no-new-route")),bt(this,Un,gi).call(this)},Nt=new WeakSet,nn=function(){this.map.getSource("route-snapper").setData(JSON.parse(this.inner.renderGeojson()))};async function uf(n,e){const t=await fetch(n),r=t.body.getReader(),o=t.headers.get("Content-Length");let l=0,a=[];for(;;){const{done:f,value:p}=await r.read();if(f)break;a.push(p),l+=p.length;const v=100*l/o;e.style=`background: linear-gradient(to right, red ${v}%, transparent 0);`}let u=new Uint8Array(l),c=0;for(let f of a)u.set(f,c),c+=f.length;return u}function ff(n){let e,t,r,o;return{c(){e=B("div"),e.textContent="Add intervention",t=H(),r=B("div"),o=B("div"),o.textContent="Route tool loading...",Z(e,"class","header svelte-15ile5d"),Z(r,"class","route-container svelte-15ile5d")},m(l,a){M(l,e,a),M(l,t,a),M(l,r,a),R(r,o),n[3](o),n[4](r)},p:Ge,i:Ge,o:Ge,d(l){l&&x(e),l&&x(t),l&&x(r),n[3](null),n[4](null)}}}const vr="black",gl=7,ml=10;function cf(n,e,t){let r,o;ot(n,mn,E=>t(8,r=E)),ot(n,Re,E=>t(9,o=E));const l=[{id:"base-points",filter:["all",Or,["==","meta","feature"]],...Lr(vr,gl)},{id:"draggable-points",filter:["all",Or,["!=","meta","feature"]],...Lr("blue",1.5*gl)},{id:"base-line",filter:Si,...Ir(vr,ml)},{id:"base-polygon-fill",filter:Cr,...Rr(vr,.1)},{id:"base-polygon-outline",filter:Cr,...Ir(vr,ml/2)}];let{url:a}=e,u,c,f,p;Ht(async()=>{f=new pl({displayControlsDefault:!1,controls:{point:!0,polygon:!0},modes:Object.assign({static:g},pl.modes),styles:l}),r.addControl(f),await v(r),r.on("draw.create",E=>{const O=E.features[0];O.geometry.type=="Polygon"?O.properties.intervention_type="area":O.properties.intervention_type="other",Re.update(F=>(F.features.push(O),F))}),r.on("draw.update",E=>{const O=E.features[0];Re.update(F=>{const I=F.features.find(C=>C.id==O.id);return I.geometry=O.geometry,F})}),r.on("draw.selectionchange",E=>{E.features.length==1&&(!p||!p.isActive())?fu(E.features[0].id):E.features.length==0&&Ol()}),Re.subscribe(E=>{f.set(E)}),r.on("mousemove",E=>{var O=null;if(p&&!p.isActive()){const F=f.getFeatureIdsAt(E.point);F.length>0&&(O=F[0]),li.set(O)}}),r.on("mouseout",()=>{li.set(null)}),Ei.subscribe(E=>{if(E){let O=o.features.find(F=>F.id==E);O.geometry.type!="Point"&&f.changeMode("direct_select",{featureId:O.id})}})}),Tl(()=>{r.removeControl(f),p.tearDown()});async function v(E){await Pl(),console.log(`Grabbing ${a}`);try{const O=await uf(a,c);p=new sf(E,O,u)}catch(O){console.log(`Route tool broke: ${O}`),t(0,u.innerHTML="Failed to load",u)}u.addEventListener("activate",()=>{f.changeMode("static")}),u.addEventListener("no-new-route",()=>{f.changeMode("simple_select")}),u.addEventListener("new-route",O=>{const F=O.detail,I=f.add(F);F.id=I[0],F.properties.intervention_type="route",Re.update(C=>(C.features.push(F),C)),f.changeMode("direct_select",{featureId:F.id})})}let g={};g.onSetup=function(){return this.setActionableState(),{}},g.toDisplayFeatures=function(E,O,F){F(O)};function h(E){$e[E?"unshift":"push"](()=>{c=E,t(1,c)})}function m(E){$e[E?"unshift":"push"](()=>{u=E,t(0,u)})}return n.$$set=E=>{"url"in E&&t(2,a=E.url)},[u,c,a,h,m]}class df extends Ie{constructor(e){super(),Le(this,e,cf,ff,Me,{url:2})}}function hf(n){let e,t,r,o,l,a,u,c;return e=new gr({props:{labelText:"Area",value:"area"}}),r=new gr({props:{labelText:"Route",value:"route"}}),l=new gr({props:{labelText:"Crossing",value:"crossing"}}),u=new gr({props:{labelText:"Other",value:"other"}}),{c(){he(e.$$.fragment),t=H(),he(r.$$.fragment),o=H(),he(l.$$.fragment),a=H(),he(u.$$.fragment)},m(f,p){pe(e,f,p),M(f,t,p),pe(r,f,p),M(f,o,p),pe(l,f,p),M(f,a,p),pe(u,f,p),c=!0},p:Ge,i(f){c||(z(e.$$.fragment,f),z(r.$$.fragment,f),z(l.$$.fragment,f),z(u.$$.fragment,f),c=!0)},o(f){J(e.$$.fragment,f),J(r.$$.fragment,f),J(l.$$.fragment,f),J(u.$$.fragment,f),c=!1},d(f){ge(e,f),f&&x(t),ge(r,f),f&&x(o),ge(l,f),f&&x(a),ge(u,f)}}}function bl(n){let e,t,r=vl(n[3])+"",o,l,a;return{c(){e=B("p"),t=be("Length: "),o=be(r),l=H(),a=B("br")},m(u,c){M(u,e,c),R(e,t),R(e,o),M(u,l,c),M(u,a,c)},p(u,c){c&8&&r!==(r=vl(u[3])+"")&&De(o,r)},d(u){u&&x(e),u&&x(l),u&&x(a)}}}function pf(n){let e,t,r,o,l,a,u,c,f,p,v,g,h,m,E,O,F,I,C,A,P,D,ve;function G(K){n[6](K)}let oe={labelText:"Name"};n[0]!==void 0&&(oe.value=n[0]),e=new eu({props:oe}),$e.push(()=>Ct(e,"value",G,n[0]));function ue(K){n[7](K)}let U={$$slots:{default:[hf]},$$scope:{ctx:n}};n[1]!==void 0&&(U.selected=n[1]),a=new Bs({props:U}),$e.push(()=>Ct(a,"selected",ue,n[1]));function ne(K){n[8](K)}let ee={labelText:"Description"};n[2]!==void 0&&(ee.value=n[2]),v=new Ys({props:ee}),$e.push(()=>Ct(v,"value",ne,n[2]));let ae=n[3]&&bl(n);return{c(){he(e.$$.fragment),r=H(),o=B("br"),l=H(),he(a.$$.fragment),c=H(),f=B("br"),p=H(),he(v.$$.fragment),h=H(),m=B("br"),E=H(),ae&&ae.c(),O=H(),F=B("div"),I=B("button"),I.textContent="Delete",C=H(),A=B("button"),A.textContent="Save",Z(I,"type","button"),Z(A,"type","button"),oi(A,"float","right")},m(K,fe){pe(e,K,fe),M(K,r,fe),M(K,o,fe),M(K,l,fe),pe(a,K,fe),M(K,c,fe),M(K,f,fe),M(K,p,fe),pe(v,K,fe),M(K,h,fe),M(K,m,fe),M(K,E,fe),ae&&ae.m(K,fe),M(K,O,fe),M(K,F,fe),R(F,I),R(F,C),R(F,A),P=!0,D||(ve=[Q(I,"click",n[4]),Q(A,"click",Ol)],D=!0)},p(K,[fe]){const xe={};!t&&fe&1&&(t=!0,xe.value=K[0],Ot(()=>t=!1)),e.$set(xe);const Ce={};fe&512&&(Ce.$$scope={dirty:fe,ctx:K}),!u&&fe&2&&(u=!0,Ce.selected=K[1],Ot(()=>u=!1)),a.$set(Ce);const ke={};!g&&fe&4&&(g=!0,ke.value=K[2],Ot(()=>g=!1)),v.$set(ke),K[3]?ae?ae.p(K,fe):(ae=bl(K),ae.c(),ae.m(O.parentNode,O)):ae&&(ae.d(1),ae=null)},i(K){P||(z(e.$$.fragment,K),z(a.$$.fragment,K),z(v.$$.fragment,K),P=!0)},o(K){J(e.$$.fragment,K),J(a.$$.fragment,K),J(v.$$.fragment,K),P=!1},d(K){ge(e,K),K&&x(r),K&&x(o),K&&x(l),ge(a,K),K&&x(c),K&&x(f),K&&x(p),ge(v,K),K&&x(h),K&&x(m),K&&x(E),ae&&ae.d(K),K&&x(O),K&&x(F),D=!1,pt(ve)}}}function vl(n){return n<1e3?Math.round(n)+" m":(n/1e3).toFixed(1)+"km"}function gf(n,e,t){let{id:r}=e,{name:o}=e,{intervention_type:l}=e,{description:a}=e,{length_meters:u}=e;function c(){Re.update(g=>(g.features=g.features.filter(h=>h.id!=r),g))}function f(g){o=g,t(0,o)}function p(g){l=g,t(1,l)}function v(g){a=g,t(2,a)}return n.$$set=g=>{"id"in g&&t(5,r=g.id),"name"in g&&t(0,o=g.name),"intervention_type"in g&&t(1,l=g.intervention_type),"description"in g&&t(2,a=g.description),"length_meters"in g&&t(3,u=g.length_meters)},[o,l,a,u,c,r,f,p,v]}class mf extends Ie{constructor(e){super(),Le(this,e,gf,pf,Me,{id:5,name:0,intervention_type:1,description:2,length_meters:3})}}function _l(n,e,t){const r=n.slice();return r[10]=e[t],r[11]=e,r[12]=t,r}function bf(n){let e,t,r,o,l,a;function u(v){n[5](v,n[10])}function c(v){n[6](v,n[10])}function f(v){n[7](v,n[10])}let p={id:n[10].id,length_meters:n[10].properties.length_meters};return n[10].properties.name!==void 0&&(p.name=n[10].properties.name),n[10].properties.intervention_type!==void 0&&(p.intervention_type=n[10].properties.intervention_type),n[10].properties.description!==void 0&&(p.description=n[10].properties.description),e=new mf({props:p}),$e.push(()=>Ct(e,"name",u,n[10].properties.name)),$e.push(()=>Ct(e,"intervention_type",c,n[10].properties.intervention_type)),$e.push(()=>Ct(e,"description",f,n[10].properties.description)),{c(){he(e.$$.fragment),l=H()},m(v,g){pe(e,v,g),M(v,l,g),a=!0},p(v,g){n=v;const h={};g&1&&(h.id=n[10].id),g&1&&(h.length_meters=n[10].properties.length_meters),!t&&g&1&&(t=!0,h.name=n[10].properties.name,Ot(()=>t=!1)),!r&&g&1&&(r=!0,h.intervention_type=n[10].properties.intervention_type,Ot(()=>r=!1)),!o&&g&1&&(o=!0,h.description=n[10].properties.description,Ot(()=>o=!1)),e.$set(h)},i(v){a||(z(e.$$.fragment,v),a=!0)},o(v){J(e.$$.fragment,v),a=!1},d(v){ge(e,v),v&&x(l)}}}function vf(n){let e=n[12]+1+"",t,r,o=xr(n[10])+"",l;return{c(){t=be(e),r=be(") "),l=be(o)},m(a,u){M(a,t,u),M(a,r,u),M(a,l,u)},p(a,u){u&1&&o!==(o=xr(a[10])+"")&&De(l,o)},d(a){a&&x(t),a&&x(r),a&&x(l)}}}function _f(n){let e,t=n[12]+1+"",r,o,l=xr(n[10])+"",a;return{c(){e=B("strong"),r=be(t),o=be(") "),a=be(l)},m(u,c){M(u,e,c),R(e,r),R(e,o),R(e,a)},p(u,c){c&1&&l!==(l=xr(u[10])+"")&&De(a,l)},d(u){u&&x(e)}}}function yf(n){let e;function t(l,a){return l[10].id==l[1]?_f:vf}let r=t(n),o=r(n);return{c(){o.c(),e=H()},m(l,a){o.m(l,a),M(l,e,a)},p(l,a){r===(r=t(l))&&o?o.p(l,a):(o.d(1),o=r(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){o.d(l),l&&x(e)}}}function yl(n){let e,t,r;function o(a){n[8](a,n[10])}let l={$$slots:{title:[yf],default:[bf]},$$scope:{ctx:n}};return n[10].properties.editing!==void 0&&(l.open=n[10].properties.editing),e=new ps({props:l}),$e.push(()=>Ct(e,"open",o,n[10].properties.editing)),e.$on("click",function(){mo(n[3](n[10].id))&&n[3](n[10].id).apply(this,arguments)}),e.$on("mouseenter",function(){mo(Nn.set(n[10].id))&&Nn.set(n[10].id).apply(this,arguments)}),e.$on("mouseleave",n[2]),{c(){he(e.$$.fragment)},m(a,u){pe(e,a,u),r=!0},p(a,u){n=a;const c={};u&8195&&(c.$$scope={dirty:u,ctx:n}),!t&&u&1&&(t=!0,c.open=n[10].properties.editing,Ot(()=>t=!1)),e.$set(c)},i(a){r||(z(e.$$.fragment,a),r=!0)},o(a){J(e.$$.fragment,a),r=!1},d(a){ge(e,a)}}}function Ef(n){let e,t,r=n[0].features,o=[];for(let a=0;a<r.length;a+=1)o[a]=yl(_l(n,r,a));const l=a=>J(o[a],1,1,()=>{o[a]=null});return{c(){for(let a=0;a<o.length;a+=1)o[a].c();e=bi()},m(a,u){for(let c=0;c<o.length;c+=1)o[c].m(a,u);M(a,e,u),t=!0},p(a,u){if(u&15){r=a[0].features;let c;for(c=0;c<r.length;c+=1){const f=_l(a,r,c);o[c]?(o[c].p(f,u),z(o[c],1)):(o[c]=yl(f),o[c].c(),z(o[c],1),o[c].m(e.parentNode,e))}for(nt(),c=r.length;c<o.length;c+=1)l(c);rt()}},i(a){if(!t){for(let u=0;u<r.length;u+=1)z(o[u]);t=!0}},o(a){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)J(o[u]);t=!1},d(a){wl(o,a),a&&x(e)}}}function wf(n){let e,t,r,o;return e=new ss({props:{$$slots:{default:[Ef]},$$scope:{ctx:n}}}),{c(){he(e.$$.fragment)},m(l,a){pe(e,l,a),t=!0,r||(o=Q(window,"keydown",n[4]),r=!0)},p(l,[a]){const u={};a&8195&&(u.$$scope={dirty:a,ctx:l}),e.$set(u)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){J(e.$$.fragment,l),t=!1},d(l){ge(e,l),r=!1,o()}}}function xr(n){if(n.properties.name)return n.properties.name;var e=n.properties.intervention_type;return e=="other"&&(n.geometry.type=="Point"?e="point":n.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function Sf(n,e,t){let r,o,l;ot(n,Ei,h=>t(9,r=h)),ot(n,Re,h=>t(0,o=h)),ot(n,li,h=>t(1,l=h));function a(){Nn.set(null)}function u(h){for(let m of o.features)if(m.properties.editing&&m.id!=h){delete m.properties.editing;return}}function c(h){const m=r;if(h.key=="Delete"){const E=h.originalTarget.tagName;if(E!="CANVAS"&&E!="BODY")return;h.preventDefault(),Re.update(O=>(O.features=O.features.filter(F=>F.id!=m),O))}}function f(h,m){n.$$.not_equal(m.properties.name,h)&&(m.properties.name=h,Re.set(o))}function p(h,m){n.$$.not_equal(m.properties.intervention_type,h)&&(m.properties.intervention_type=h,Re.set(o))}function v(h,m){n.$$.not_equal(m.properties.description,h)&&(m.properties.description=h,Re.set(o))}function g(h,m){n.$$.not_equal(m.properties.editing,h)&&(m.properties.editing=h,Re.set(o))}return[o,l,a,u,c,f,p,v,g]}class kf extends Ie{constructor(e){super(),Le(this,e,Sf,wf,Me,{})}}function El(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Tf(n,e,t){t===void 0&&(t={});var r=El(n),o=El(e),l=mr(o[1]-r[1]),a=mr(o[0]-r[0]),u=mr(r[1]),c=mr(o[1]),f=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(c);return ku(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),t.units)}function Nl(n,e,t){if(n!==null)for(var r,o,l,a,u,c,f,p=0,v=0,g,h=n.type,m=h==="FeatureCollection",E=h==="Feature",O=m?n.features.length:1,F=0;F<O;F++){f=m?n.features[F].geometry:E?n.geometry:n,g=f?f.type==="GeometryCollection":!1,u=g?f.geometries.length:1;for(var I=0;I<u;I++){var C=0,A=0;if(a=g?f.geometries[I]:f,a!==null){c=a.coordinates;var P=a.type;switch(p=t&&(P==="Polygon"||P==="MultiPolygon")?1:0,P){case null:break;case"Point":if(e(c,v,F,C,A)===!1)return!1;v++,C++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(e(c[r],v,F,C,A)===!1)return!1;v++,P==="MultiPoint"&&C++}P==="LineString"&&C++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-p;o++){if(e(c[r][o],v,F,C,A)===!1)return!1;v++}P==="MultiLineString"&&C++,P==="Polygon"&&A++}P==="Polygon"&&C++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(A=0,o=0;o<c[r].length;o++){for(l=0;l<c[r][o].length-p;l++){if(e(c[r][o][l],v,F,C,A)===!1)return!1;v++}A++}C++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(Nl(a.geometries[r],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Cf(n,e){var t,r,o,l,a,u,c,f,p,v,g=0,h=n.type==="FeatureCollection",m=n.type==="Feature",E=h?n.features.length:1;for(t=0;t<E;t++){for(u=h?n.features[t].geometry:m?n.geometry:n,f=h?n.features[t].properties:m?n.properties:{},p=h?n.features[t].bbox:m?n.bbox:void 0,v=h?n.features[t].id:m?n.id:void 0,c=u?u.type==="GeometryCollection":!1,a=c?u.geometries.length:1,o=0;o<a;o++){if(l=c?u.geometries[o]:u,l===null){if(e(null,g,f,p,v)===!1)return!1;continue}switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(l,g,f,p,v)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<l.geometries.length;r++)if(e(l.geometries[r],g,f,p,v)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}g++}}function Of(n,e){Cf(n,function(t,r,o,l,a){var u=t===null?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return e(Fn(t,o,{bbox:l,id:a}),r,0)===!1?!1:void 0}var c;switch(u){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon";break}for(var f=0;f<t.coordinates.length;f++){var p=t.coordinates[f],v={type:c,coordinates:p};if(e(Fn(v,o),r,f)===!1)return!1}})}function If(n,e){Of(n,function(t,r,o){var l=0;if(t.geometry){var a=t.geometry.type;if(!(a==="Point"||a==="MultiPoint")){var u,c=0,f=0,p=0;if(Nl(t,function(v,g,h,m,E){if(u===void 0||r>c||m>f||E>p){u=v,c=r,f=m,p=E,l=0;return}var O=wu([u,v],t.properties);if(e(O,r,o,E,l)===!1)return!1;l++,u=v})===!1)return!1}}})}function Lf(n,e,t){var r=t,o=!1;return If(n,function(l,a,u,c,f){o===!1&&t===void 0?r=l:r=e(r,l,a,u,c,f),o=!0}),r}function Mf(n,e){return e===void 0&&(e={}),Lf(n,function(t,r){var o=r.geometry.coordinates;return t+Tf(o[0],o[1],e)},0)}function xf(n){let e,t,r,o,l,a,u,c,f,p,v,g,h,m,E,O,F,I,C,A=n[0].features.length+"",P,D,ve,G,oe,ue,U,ne;return{c(){e=B("div"),t=B("label"),r=be(`Scheme name:
    `),o=B("input"),l=H(),a=B("br"),u=H(),c=B("div"),f=B("label"),p=B("input"),v=H(),g=B("button"),g.textContent="Load from GeoJSON",h=H(),m=B("button"),m.textContent="Export to GeoJSON",E=H(),O=B("br"),F=H(),I=B("div"),C=B("span"),P=be(A),D=be(" interventions"),ve=H(),G=B("button"),oe=be("Clear all"),Z(o,"type","text"),Z(p,"type","file"),Z(p,"id","load_geojson"),Z(p,"class","svelte-lhyd1e"),Z(g,"type","button"),Z(g,"onclick","document.getElementById('load_geojson').click();"),Z(m,"type","button"),Z(m,"class","align-right svelte-lhyd1e"),Z(G,"type","button"),Z(G,"class","align-right svelte-lhyd1e"),G.disabled=ue=n[0].features.length==0},m(ee,ae){M(ee,e,ae),R(e,t),R(t,r),R(t,o),gn(o,n[0].scheme_name),M(ee,l,ae),M(ee,a,ae),M(ee,u,ae),M(ee,c,ae),R(c,f),R(f,p),R(f,v),R(f,g),R(c,h),R(c,m),M(ee,E,ae),M(ee,O,ae),M(ee,F,ae),M(ee,I,ae),R(I,C),R(C,P),R(C,D),R(I,ve),R(I,G),R(G,oe),U||(ne=[Q(o,"input",n[5]),Q(p,"change",n[3]),Q(m,"click",n[2]),Q(G,"click",n[1])],U=!0)},p(ee,[ae]){ae&1&&o.value!==ee[0].scheme_name&&gn(o,ee[0].scheme_name),ae&1&&A!==(A=ee[0].features.length+"")&&De(P,A),ae&1&&ue!==(ue=ee[0].features.length==0)&&(G.disabled=ue)},i:Ge,o:Ge,d(ee){ee&&x(e),ee&&x(l),ee&&x(a),ee&&x(u),ee&&x(c),ee&&x(E),ee&&x(O),ee&&x(F),ee&&x(I),U=!1,pt(ne)}}}function Pf(n,e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(e)),t.setAttribute("download",n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Af(n,e,t){let r;ot(n,Re,g=>t(0,r=g));let{authorityName:o}=e,l=window.localStorage.getItem(o);if(l)try{Re.set(p(JSON.parse(l)))}catch(g){console.log(`Failed to load from local storage: ${g}`)}Re.subscribe(()=>window.localStorage.setItem(o,JSON.stringify(u())));function a(){confirm("Do you want to clear the current scheme? (You should save it first!)")&&Re.update(g=>(delete g.scheme_name,g.features=[],g))}function u(){const g=JSON.parse(JSON.stringify(r));for(let h of g.features)delete h.properties.editing;return g}function c(){let g=u();var h=o;g.authority=o,g.origin="atip-v1",g.scheme_name&&(h+="_"+g.scheme_name),h+=".txt",Pf(h,JSON.stringify(g,null,"  "))}function f(g){const h=new FileReader;h.onload=m=>{try{Re.set(p(JSON.parse(m.target.result)))}catch(E){window.alert(`Couldn't load scheme from a file: ${E}`)}},h.readAsText(g.target.files[0])}function p(g){for(let h of g.features)h.geometry.type=="LineString"&&!h.properties.length_meters&&(h.properties.length_meters=Mf(h.geometry,{units:"kilometers"})*1e3);return g}function v(){r.scheme_name=this.value,Re.set(r)}return n.$$set=g=>{"authorityName"in g&&t(4,o=g.authorityName)},[r,a,c,f,o,v]}class Nf extends Ie{constructor(e){super(),Le(this,e,Af,xf,Me,{authorityName:4})}}let hn="hover",ri="yellow",Rf=10,Ff=7;function Df(n,e,t){let r,o,l;ot(n,mn,u=>t(1,r=u)),ot(n,Re,u=>t(2,o=u));const a=kl(Re,u=>u.features.some(c=>c.properties.editing));return ot(n,a,u=>t(3,l=u)),Ht(()=>{r.addSource(hn,{type:"geojson",data:Rn()}),r.addLayer({id:"hover-polygons",source:hn,filter:Cr,...Rr(ri,.5)}),r.addLayer({id:"hover-lines",source:hn,filter:Si,...Ir(ri,1.5*Rf,1)}),r.addLayer({id:"hover-points",source:hn,filter:Or,...Lr(ri,1.5*Ff,.5)}),a.subscribe(u=>{u&&Nn.set(null)}),Nn.subscribe(u=>{u&&!l?r.getSource(hn).setData(o.features.find(c=>c.id==u)):r.getSource(hn).setData(Rn())})}),[a]}class Uf extends Ie{constructor(e){super(),Le(this,e,Df,null,Me,{})}}let Ln="editing",ii="red",jf=10,Bf=7;function Gf(n,e,t){let r,o;return ot(n,mn,l=>t(0,r=l)),ot(n,Re,l=>t(1,o=l)),Ht(()=>{r.addSource(Ln,{type:"geojson",data:Rn()}),r.addLayer({id:"editing-polygons",source:Ln,filter:Cr,...Rr(ii,.5)}),r.addLayer({id:"editing-lines",source:Ln,filter:Si,...Ir(ii,1.5*jf)}),r.addLayer({id:"editing-points",source:Ln,filter:Or,...Lr(ii,1.5*Bf)}),Re.subscribe(l=>{r.getSource(Ln).setData(l.features.find(a=>a.properties.editing)||Rn())}),Ei.subscribe(l=>{if(l){let a=o.features.find(u=>u.id==l);a.geometry.type=="Point"?r.flyTo({center:a.geometry.coordinates}):r.fitBounds(_i(a),{padding:200,animate:!0,duration:500})}})}),[]}class zf extends Ie{constructor(e){super(),Le(this,e,Gf,null,Me,{})}}const Vf="/atip/assets/zoom_out_map-b2e1091a.svg";function qf(n){let e,t,r,o,l;return{c(){e=B("button"),t=B("img"),Ba(t.src,r=Vf)||Z(t,"src",r),Z(t,"alt","Zoom to show entire boundary"),Z(e,"type","button"),Z(e,"title","Zoom to show entire boundary"),Z(e,"class","svelte-qzjsqo")},m(a,u){M(a,e,u),R(e,t),o||(l=Q(e,"click",n[0]),o=!0)},p:Ge,i:Ge,o:Ge,d(a){a&&x(e),o=!1,l()}}}function Jf(n,e,t){let r;ot(n,mn,a=>t(2,r=a));let{boundaryGeojson:o}=e;function l(){r.fitBounds(_i(o),{padding:20,animate:!0,duration:500})}return n.$$set=a=>{"boundaryGeojson"in a&&t(1,o=a.boundaryGeojson)},[l,o]}class Yf extends Ie{constructor(e){super(),Le(this,e,Jf,qf,Me,{boundaryGeojson:1})}}function Hf(n){let e,t,r,o,l,a,u;return{c(){e=B("div"),t=be(`Basemap:
  `),r=B("select"),o=B("option"),o.textContent="Streets",l=B("option"),l.textContent="Satellite",o.__value="streets",o.value=o.__value,l.__value="hybrid",l.value=l.__value,n[0]===void 0&&Ga(()=>n[2].call(r)),Z(e,"class","svelte-1tbnm6i")},m(c,f){M(c,e,f),R(e,t),R(e,r),R(r,o),R(r,l),bo(r,n[0]),a||(u=[Q(r,"change",n[2]),Q(r,"change",n[1])],a=!0)},p(c,[f]){f&1&&bo(r,c[0])},i:Ge,o:Ge,d(c){c&&x(e),a=!1,pt(u)}}}function Wf(n,e,t){let{style:r}=e;function o(){let a=new URLSearchParams(window.location.search);a.set("style",r);let u=`${window.location.pathname}?${a.toString()}${window.location.hash}`;window.location.href=u}function l(){r=za(this),t(0,r)}return n.$$set=a=>{"style"in a&&t(0,r=a.style)},[r,o,l]}class Zf extends Ie{constructor(e){super(),Le(this,e,Wf,Hf,Me,{style:0})}}function Xf(n){let e,t,r,o,l,a,u,c;return{c(){e=B("div"),t=B("button"),t.textContent="Home",r=H(),o=B("button"),o.textContent="About",l=H(),a=B("button"),a.textContent="Instructions",Z(t,"type","button"),Z(t,"onclick","window.open('index.html');"),Z(o,"type","button"),Z(a,"type","button"),Z(e,"slot","nav")},m(f,p){M(f,e,p),R(e,t),R(e,r),R(e,o),R(e,l),R(e,a),u||(c=[Q(o,"click",n[6]),Q(a,"click",n[7])],u=!0)},p:Ge,d(f){f&&x(e),u=!1,pt(c)}}}function Kf(n){let e,t,r,o,l,a,u,c,f,p,v,g;return l=new Yf({props:{boundaryGeojson:n[3]}}),u=new Nf({props:{authorityName:n[4]}}),v=new kf({}),{c(){e=B("div"),t=B("h1"),r=be(n[4]),o=H(),he(l.$$.fragment),a=H(),he(u.$$.fragment),c=H(),f=B("br"),p=H(),he(v.$$.fragment),Z(e,"slot","sidebar")},m(h,m){M(h,e,m),R(e,t),R(t,r),R(t,o),pe(l,t,null),R(e,a),pe(u,e,null),R(e,c),R(e,f),R(e,p),pe(v,e,null),g=!0},p(h,m){const E={};m&8&&(E.boundaryGeojson=h[3]),l.$set(E)},i(h){g||(z(l.$$.fragment,h),z(u.$$.fragment,h),z(v.$$.fragment,h),g=!0)},o(h){J(l.$$.fragment,h),J(u.$$.fragment,h),J(v.$$.fragment,h),g=!1},d(h){h&&x(e),ge(l),ge(u),ge(v)}}}function Qf(n){let e,t,r,o,l,a,u,c,f,p;return e=new Qu({props:{boundaryGeojson:n[3]}}),r=new df({props:{url:n[2]}}),l=new Uf({}),u=new zf({}),f=new Zf({props:{style:n[5]}}),{c(){he(e.$$.fragment),t=H(),he(r.$$.fragment),o=H(),he(l.$$.fragment),a=H(),he(u.$$.fragment),c=H(),he(f.$$.fragment)},m(v,g){pe(e,v,g),M(v,t,g),pe(r,v,g),M(v,o,g),pe(l,v,g),M(v,a,g),pe(u,v,g),M(v,c,g),pe(f,v,g),p=!0},p(v,g){const h={};g&8&&(h.boundaryGeojson=v[3]),e.$set(h);const m={};g&4&&(m.url=v[2]),r.$set(m)},i(v){p||(z(e.$$.fragment,v),z(r.$$.fragment,v),z(l.$$.fragment,v),z(u.$$.fragment,v),z(f.$$.fragment,v),p=!0)},o(v){J(e.$$.fragment,v),J(r.$$.fragment,v),J(l.$$.fragment,v),J(u.$$.fragment,v),J(f.$$.fragment,v),p=!1},d(v){ge(e,v),v&&x(t),ge(r,v),v&&x(o),ge(l,v),v&&x(a),ge(u,v),v&&x(c),ge(f,v)}}}function $f(n){let e,t,r;return t=new hu({props:{style:n[5],$$slots:{default:[Qf]},$$scope:{ctx:n}}}),{c(){e=B("div"),he(t.$$.fragment),Z(e,"slot","main")},m(o,l){M(o,e,l),pe(t,e,null),r=!0},p(o,l){const a={};l&8204&&(a.$$scope={dirty:l,ctx:o}),t.$set(a)},i(o){r||(z(t.$$.fragment,o),r=!0)},o(o){J(t.$$.fragment,o),r=!1},d(o){o&&x(e),ge(t)}}}function ec(n){let e,t,r,o,l,a,u,c;e=new _u({props:{$$slots:{main:[$f],sidebar:[Kf],nav:[Xf]},$$scope:{ctx:n}}});function f(h){n[8](h)}let p={};n[0]!==void 0&&(p.open=n[0]),r=new Va({props:p}),$e.push(()=>Ct(r,"open",f,n[0]));function v(h){n[9](h)}let g={};return n[1]!==void 0&&(g.open=n[1]),a=new uu({props:g}),$e.push(()=>Ct(a,"open",v,n[1])),{c(){he(e.$$.fragment),t=H(),he(r.$$.fragment),l=H(),he(a.$$.fragment)},m(h,m){pe(e,h,m),M(h,t,m),pe(r,h,m),M(h,l,m),pe(a,h,m),c=!0},p(h,[m]){const E={};m&8204&&(E.$$scope={dirty:m,ctx:h}),e.$set(E);const O={};!o&&m&1&&(o=!0,O.open=h[0],Ot(()=>o=!1)),r.$set(O);const F={};!u&&m&2&&(u=!0,F.open=h[1],Ot(()=>u=!1)),a.$set(F)},i(h){c||(z(e.$$.fragment,h),z(r.$$.fragment,h),z(a.$$.fragment,h),c=!0)},o(h){J(e.$$.fragment,h),J(r.$$.fragment,h),J(a.$$.fragment,h),c=!1},d(h){ge(e,h),h&&x(t),ge(r,h),h&&x(l),ge(a,h)}}}function tc(n,e,t){let r=!1,o=!1,l=window.location.hostname.includes("atip.uk");const a=new URLSearchParams(window.location.search);let u=a.get("authority"),c=a.get("style")||"streets";var f=`https://atip.uk/route-snappers/${u}.bin`;l||(f=`https://atip.uk/route-snappers-dev/${u}.bin`);function p(){t(0,r=!r),t(1,o=!1)}function v(){t(1,o=!o),t(0,r=!1)}let g;Ht(async()=>{t(3,g=await h())});async function h(){const F=await(await fetch(qa)).text(),I=JSON.parse(F);return I.features=I.features.filter(C=>C.properties.name==u),I}function m(O){r=O,t(0,r)}function E(O){o=O,t(1,o)}return[r,o,f,g,u,c,p,v,m,E]}class nc extends Ie{constructor(e){super(),Le(this,e,tc,ec,Me,{})}}new nc({target:document.getElementById("app")});
