import{S as U,i as q,s as z,e as A,h as H,K as he,j as p,a8 as te,o as m,aY as Ur,b as V,c as X,d as C,g as h,m as b,w as Ot,l as K,t as $,n as g,p as v,J as _t,O as gt,P as dt,Q as ht,a3 as je,Z as ie,_ as ae,a_ as Ct,u as w,k as y,H as B,ba as gr,a1 as Ut,bb as we,Y as ke,bc as dr,q as Re,a0 as hr,bd as br,W as Rt,be as vr,bf as wr,X as mn,bg as qr,f as ln,aQ as Wr,ar as on,am as De,y as sn,r as an,F as kr,a as Zt,v as Bt,b9 as W,bh as fe,bi as pe,C as Y,ad as Z,D as ue,aq as Q,bj as ne,G as Pt,I as Vr,b0 as Xr,a7 as _n,R as yr,bk as fn,bl as un,E as Sr,at as Kr,aj as Gt,bm as gn,ac as Jr,b3 as dn,ah as Yr,ai as hn,ak as bn,al as yt,an as Et,b8 as vn,L as Zr,M as Qr,z as xr}from"./index-28194bc3.js";import{C as Te,d as At,a as Mt,b as le,l as R,e as el,S as tl,B as nl,G as rl}from"./StreetViewTool-e23311db.js";import{a as Ge,F as ll}from"./Popup-c8e85dbd.js";import{P as oe}from"./Popup-26071a31.js";import{C as Ve,Z as ol}from"./ZoomOutMap-901a99ee.js";import{L as sl,a as il}from"./LineMeasureController-6d61d689.js";function al(r){let e;return{c(){e=A("span"),H(e,"class","svelte-kzgqtg"),he(e,"background",r[0])},m(n,t){p(n,e,t)},p(n,[t]){t&1&&he(e,"background",n[0])},i:te,o:te,d(n){n&&m(e)}}}function fl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class me extends U{constructor(e){super(),q(this,e,fl,al,z,{color:0})}}const ul="/atip/assets/help-d011708a.svg";function cl(r){let e,n;const t=r[1].default,l=_t(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),H(e,"class","govuk-prose")},m(o,i){p(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&gt(l,t,o,o[4],n?ht(t,o[4],i,null):dt(o[4]),null)},i(o){n||($(l,o),n=!0)},o(o){g(l,o),n=!1},d(o){o&&m(e),l&&l.d(o)}}}function $l(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[cl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Ur({props:a}),V.push(()=>X(t,"open",s)),{c(){e=A("button"),e.innerHTML=`<img src="${ul}" title="Help" alt="Help"/>`,n=C(),h(t.$$.fragment),H(e,"class","svelte-7d9d1l")},m(f,c){p(f,e,c),p(f,n,c),b(t,f,c),o=!0,i||(u=Ot(e,"click",r[2]),i=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,_.open=f[0],K(()=>l=!1)),t.$set(_)},i(f){o||($(t.$$.fragment,f),o=!0)},o(f){g(t.$$.fragment,f),o=!1},d(f){f&&(m(e),m(n)),v(t,f),i=!1,u()}}}function pl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class se extends U{constructor(e){super(),q(this,e,pl,$l,z,{})}}function wn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function kn(r){let e,n,t,l=r[1]+"",o,i,u;return n=new me({props:{color:r[2]}}),{c(){e=A("li"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){p(s,e,a),b(n,e,null),y(e,t),y(e,o),y(e,i),u=!0},p(s,a){const f={};a&1&&(f.color=s[2]),n.$set(f),(!u||a&1)&&l!==(l=s[1]+"")&&B(o,l)},i(s){u||($(n.$$.fragment,s),u=!0)},o(s){g(n.$$.fragment,s),u=!1},d(s){s&&m(e),v(n)}}}function ml(r){let e,n,t=je(r[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=kn(wn(r,t,i));const o=i=>g(l[i],1,1,()=>{l[i]=null});return{c(){e=A("ul");for(let i=0;i<l.length;i+=1)l[i].c()},m(i,u){p(i,e,u);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);n=!0},p(i,u){if(u&1){t=je(i[0]);let s;for(s=0;s<t.length;s+=1){const a=wn(i,t,s);l[s]?(l[s].p(a,u),$(l[s],1)):(l[s]=kn(a),l[s].c(),$(l[s],1),l[s].m(e,null))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)$(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(i){i&&m(e),Ct(l,i)}}}function _l(r){let e,n;return e=new Te({props:{label:"Legend",$$slots:{default:[ml]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class dl extends U{constructor(e){super(),q(this,e,gl,_l,z,{rows:0})}}function hl(r){let e;const n=r[8].default,t=_t(n,r,r[15],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&32768)&&gt(t,n,l,l[15],e?ht(n,l[15],o,null):dt(l[15]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function bl(r){let e,n;return e=new gr({props:{id:r[0],type:"raster",source:r[1],beforeId:r[2],beforeLayerType:r[3],paint:r[4],layout:r[5],minzoom:r[6],maxzoom:r[7],$$slots:{default:[hl]},$$scope:{ctx:r}}}),e.$on("click",r[9]),e.$on("dblclick",r[10]),e.$on("contextmenu",r[11]),e.$on("mouseenter",r[12]),e.$on("mousemove",r[13]),e.$on("mouseleave",r[14]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.id=t[0]),l&2&&(o.source=t[1]),l&4&&(o.beforeId=t[2]),l&8&&(o.beforeLayerType=t[3]),l&16&&(o.paint=t[4]),l&32&&(o.layout=t[5]),l&64&&(o.minzoom=t[6]),l&128&&(o.maxzoom=t[7]),l&32768&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=Ut("raster-layer")}=e,{source:i=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:s=void 0}=e,{paint:a}=e,{layout:f=void 0}=e,{minzoom:c=void 0}=e,{maxzoom:_=void 0}=e;function d(E){we.call(this,r,E)}function k(E){we.call(this,r,E)}function T(E){we.call(this,r,E)}function O(E){we.call(this,r,E)}function S(E){we.call(this,r,E)}function P(E){we.call(this,r,E)}return r.$$set=E=>{"id"in E&&n(0,o=E.id),"source"in E&&n(1,i=E.source),"beforeId"in E&&n(2,u=E.beforeId),"beforeLayerType"in E&&n(3,s=E.beforeLayerType),"paint"in E&&n(4,a=E.paint),"layout"in E&&n(5,f=E.layout),"minzoom"in E&&n(6,c=E.minzoom),"maxzoom"in E&&n(7,_=E.maxzoom),"$$scope"in E&&n(15,l=E.$$scope)},[o,i,u,s,a,f,c,_,t,d,k,T,O,S,P,l]}class wl extends U{constructor(e){super(),q(this,e,vl,bl,z,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}function yn(r){let e=r[0],n,t,l=Sn(r);return{c(){l.c(),n=ke()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&z(e,e=o[0])?(ie(),g(l,1,1,te),ae(),l=Sn(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l.d(o)}}}function Sn(r){let e;const n=r[10].default,t=_t(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&gt(t,n,l,l[9],e?ht(n,l[9],o,null):dt(l[9]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function kl(r){let e,n,t=r[0]&&yn(r);return{c(){t&&t.c(),e=ke()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=yn(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),g(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){g(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function yl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=Ut("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=dr();Re(r,f,k=>n(8,l=k)),Re(r,c,k=>n(0,t=k));let _,d=!0;return hr(()=>{t&&_&&l&&(br(f,t,_),Rt(c,t=null,t),n(6,_=void 0))}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"tiles"in k&&n(4,s=k.tiles),"tileSize"in k&&n(5,a=k.tileSize),"$$scope"in k&&n(9,i=k.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Rt(c,t=u,t),vr(l,t,wr({type:"raster",tiles:s,tileSize:a}),k=>l&&k===t,()=>{t&&(n(6,_=l==null?void 0:l.getSource(t)),n(7,d=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,_=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&_&&(d?n(7,d=!1):_.setTiles(s))},[t,f,c,u,s,a,_,d,l,i,o]}class Sl extends U{constructor(e){super(),q(this,e,yl,kl,z,{id:3,tiles:4,tileSize:5})}}function Tl(r){let e;const n=r[16].default,t=_t(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&gt(t,n,l,l[24],e?ht(n,l[24],o,null):dt(l[24]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Ol(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Tl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new gr({props:o}),V.push(()=>X(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],K(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Cl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=Ut("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:O=void 0}=e,{manageHoverState:S=!1}=e,{hovered:P=null}=e,{eventsIfTopMost:E=!1}=e,{interactive:N=!0}=e;function L(D){P=D,n(0,P)}function F(D){we.call(this,r,D)}function M(D){we.call(this,r,D)}function I(D){we.call(this,r,D)}function j(D){we.call(this,r,D)}function G(D){we.call(this,r,D)}function x(D){we.call(this,r,D)}return r.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,i=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,s=D.beforeId),"beforeLayerType"in D&&n(5,a=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,_=D.filter),"applyToClusters"in D&&n(9,d=D.applyToClusters),"minzoom"in D&&n(10,k=D.minzoom),"maxzoom"in D&&n(11,T=D.maxzoom),"hoverCursor"in D&&n(12,O=D.hoverCursor),"manageHoverState"in D&&n(13,S=D.manageHoverState),"hovered"in D&&n(0,P=D.hovered),"eventsIfTopMost"in D&&n(14,E=D.eventsIfTopMost),"interactive"in D&&n(15,N=D.interactive),"$$scope"in D&&n(24,l=D.$$scope)},[P,o,i,u,s,a,f,c,_,d,k,T,O,S,E,N,t,L,F,M,I,j,G,x,l]}class Al extends U{constructor(e){super(),q(this,e,Cl,Ol,z,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Tn(r){let e=r[0],n,t,l=On(r);return{c(){l.c(),n=ke()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&z(e,e=o[0])?(ie(),g(l,1,1,te),ae(),l=On(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l.d(o)}}}function On(r){let e;const n=r[9].default,t=_t(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&gt(t,n,l,l[8],e?ht(n,l[8],o,null):dt(l[8]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Ll(r){let e,n,t=r[0]&&Tn(r);return{c(){t&&t.c(),e=ke()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=Tn(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),g(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){g(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function Il(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=Ut("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!mn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let k=new qr;mn.addProtocol("pmtiles",k.tile)}const{map:c,self:_}=dr();Re(r,c,k=>n(7,l=k)),Re(r,_,k=>n(0,t=k));let d;return hr(()=>{t&&l&&(br(c,t,d),Rt(_,t=null,t),d=void 0)}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"url"in k&&n(4,s=k.url),"tiles"in k&&n(5,a=k.tiles),"promoteId"in k&&n(6,f=k.promoteId),"$$scope"in k&&n(8,i=k.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Rt(_,t=u,t),vr(l,t,wr({type:"vector",url:s,tiles:a,promoteId:f}),k=>l&&k===t,()=>{t&&(d=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{d=l==null?void 0:l.getSource(u)}))},[t,c,_,u,s,a,f,l,i,o]}class ce extends U{constructor(e){super(),q(this,e,Il,Ll,z,{id:3,url:4,tiles:5,promoteId:6})}}function Pl(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ml(r){let e,n,t=r[0]=="Private (development)"&&Pl();return{c(){t&&t.c(),e=C(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),p(l,e,o),p(l,n,o)},p:te,d(l){l&&(m(e),m(n)),t&&t.d(l)}}}function jl(r){let e,n,t,l,o,i;return o=new se({props:{$$slots:{default:[Ml]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=C(),h(o.$$.fragment)},m(u,s){p(u,e,s),y(e,n),y(e,t),y(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||($(o.$$.fragment,u),i=!0)},o(u){g(o.$$.fragment,u),i=!1},d(u){u&&m(e),v(o)}}}function Fl(r){return[ln()]}class El extends U{constructor(e){super(),q(this,e,Fl,jl,z,{})}}const Nl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var ge=Uint8Array,Qe=Uint16Array,Tr=Uint32Array,Or=new ge([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Cr=new ge([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Dl=new ge([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ar=function(r,e){for(var n=new Qe(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Tr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Lr=Ar(Or,2),Ir=Lr[0],Rl=Lr[1];Ir[28]=258,Rl[258]=28;var Bl=Ar(Cr,0),Gl=Bl[0],Qt=new Qe(32768);for(var re=0;re<32768;++re){var Ue=(re&43690)>>>1|(re&21845)<<1;Ue=(Ue&52428)>>>2|(Ue&13107)<<2,Ue=(Ue&61680)>>>4|(Ue&3855)<<4,Qt[re]=((Ue&65280)>>>8|(Ue&255)<<8)>>>1}var Tt=function(r,e,n){for(var t=r.length,l=0,o=new Qe(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Qe(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Qe(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[Qt[c]>>>s]=a}else for(u=new Qe(t),l=0;l<t;++l)r[l]&&(u[l]=Qt[i[r[l]-1]++]>>>15-r[l]);return u},jt=new ge(288);for(var re=0;re<144;++re)jt[re]=8;for(var re=144;re<256;++re)jt[re]=9;for(var re=256;re<280;++re)jt[re]=7;for(var re=280;re<288;++re)jt[re]=8;var Pr=new ge(32);for(var re=0;re<32;++re)Pr[re]=5;var zl=Tt(jt,9,1),Hl=Tt(Pr,5,1),qt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},ye=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Wt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Ul=function(r){return(r+7)/8|0},cn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Qe:r.BYTES_PER_ELEMENT==4?Tr:ge)(n-e);return t.set(r.subarray(e,n)),t},ql=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Se=function(r,e,n){var t=new Error(e||ql[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Se),!n)throw t;return t},Wl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new ge(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new ge(t*3));var i=function(nt){var Je=e.length;if(nt>Je){var rt=new ge(Math.max(Je*2,nt));rt.set(e),e=rt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,_=n.m,d=n.n,k=t*8;do{if(!f){u=ye(r,s,1);var T=ye(r,s+1,3);if(s+=3,T)if(T==1)f=zl,c=Hl,_=9,d=5;else if(T==2){var E=ye(r,s,31)+257,N=ye(r,s+10,15)+4,L=E+ye(r,s+5,31)+1;s+=14;for(var F=new ge(L),M=new ge(19),I=0;I<N;++I)M[Dl[I]]=ye(r,s+I*3,7);s+=N*3;for(var j=qt(M),G=(1<<j)-1,x=Tt(M,j,1),I=0;I<L;){var D=x[ye(r,s,G)];s+=D&15;var O=D>>>4;if(O<16)F[I++]=O;else{var J=0,$e=0;for(O==16?($e=3+ye(r,s,3),s+=2,J=F[I-1]):O==17?($e=3+ye(r,s,7),s+=3):O==18&&($e=11+ye(r,s,127),s+=7);$e--;)F[I++]=J}}var bt=F.subarray(0,E),be=F.subarray(E);_=qt(bt),d=qt(be),f=Tt(bt,_,1),c=Tt(be,d,1)}else Se(1);else{var O=Ul(s)+4,S=r[O-4]|r[O-3]<<8,P=O+S;if(P>t){o&&Se(0);break}l&&i(a+S),e.set(r.subarray(O,P),a),n.b=a+=S,n.p=s=P*8,n.f=u;continue}if(s>k){o&&Se(0);break}}l&&i(a+131072);for(var et=(1<<_)-1,vt=(1<<d)-1,tt=s;;tt=s){var J=f[Wt(r,s)&et],_e=J>>>4;if(s+=J&15,s>k){o&&Se(0);break}if(J||Se(2),_e<256)e[a++]=_e;else if(_e==256){tt=s,f=null;break}else{var wt=_e-254;if(_e>264){var I=_e-257,Ne=Or[I];wt=ye(r,s,(1<<Ne)-1)+Ir[I],s+=Ne}var He=c[Wt(r,s)&vt],Ke=He>>>4;He||Se(3),s+=He&15;var be=Gl[Ke];if(Ke>3){var Ne=Cr[Ke];be+=Wt(r,s)&(1<<Ne)-1,s+=Ne}if(s>k){o&&Se(0);break}l&&i(a+131072);for(var kt=a+wt;a<kt;a+=4)e[a]=e[a-be],e[a+1]=e[a+1-be],e[a+2]=e[a+2-be],e[a+3]=e[a+3-be];a=kt}}n.l=f,n.p=tt,n.b=a,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=d)}while(!u);return a==e.length?e:cn(e,0,a)},Vl=new ge(0),Me=function(r,e){return r[e]|r[e+1]<<8},Oe=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Vt=function(r,e){return Oe(r,e)+Oe(r,e+4)*4294967296};function Xl(r,e){return Wl(r,e)}var xt=typeof TextDecoder<"u"&&new TextDecoder,Kl=0;try{xt.decode(Vl,{stream:!0}),Kl=1}catch{}var Jl=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,cn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Mr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(xt)return xt.decode(r);var l=Jl(r),o=l[0],i=l[1];return i.length&&Se(8),o}}var Yl=function(r,e){return e+30+Me(r,e+26)+Me(r,e+28)},Zl=function(r,e,n){var t=Me(r,e+28),l=Mr(r.subarray(e+46,e+46+t),!(Me(r,e+8)&2048)),o=e+46+t,i=Oe(r,e+20),u=n&&i==4294967295?Ql(r,o):[i,Oe(r,e+24),Oe(r,e+42)],s=u[0],a=u[1],f=u[2];return[Me(r,e+10),s,a,l,o+Me(r,e+30)+Me(r,e+32),f]},Ql=function(r,e){for(;Me(r,e)!=1;e+=4+Me(r,e+2));return[Vt(r,e+12),Vt(r,e+4),Vt(r,e+20)]};function xl(r,e){for(var n={},t=r.length-22;Oe(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Se(13);var l=Me(r,t+8);if(!l)return{};var o=Oe(r,t+16),i=o==4294967295||l==65535;if(i){var u=Oe(r,t-12);i=Oe(r,u)==101075792,i&&(l=Oe(r,u+32),o=Oe(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=Zl(r,o,i),c=f[0],_=f[1],d=f[2],k=f[3],T=f[4],O=f[5],S=Yl(r,O);o=T,(!s||s({name:k,size:_,originalSize:d,compression:c}))&&(c?c==8?n[k]=Xl(r.subarray(S,S+_),new ge(d)):Se(14,"unknown compression type "+c):n[k]=cn(r,S,S+_))}return n}function eo(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Xt):Xt(r)}function Xt(r){var e=new Uint8Array(r),n=xl(e);return Promise.resolve(to(n))}function to(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Mr(r[l])}return e}function Fe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&xe(t)===e)return t;n++}}function Ft(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&xe(l)===e&&n.push(l),t++}return n}function zt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&xe(l)===e&&n(l,t):n(l,t),t++}}function no(r,e,n){var t=[];return zt(r,e,function(l,o){t.push(n(l,o))}),t}var ro=/.+\:/;function xe(r){return r.tagName.replace(ro,"")}function jr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+xe(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=jr(r.childNodes[t]),t++;return e+="</"+xe(r)+">",e}function lo(r){var e=r.documentElement,n=Fe(e,"sheetData"),t=[];return zt(n,"row",function(l){zt(l,"c",function(o){t.push(o)})}),t}function oo(r,e){return Fe(e,"v")}function so(r,e){if(e.firstChild&&xe(e.firstChild)==="is"&&e.firstChild.firstChild&&xe(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function io(r){var e=r.documentElement,n=Fe(e,"dimension");if(n)return n.getAttribute("ref")}function ao(r){var e=r.documentElement,n=Fe(e,"cellStyleXfs");return n?Ft(n,"xf"):[]}function fo(r){var e=r.documentElement,n=Fe(e,"cellXfs");return n?Ft(n,"xf"):[]}function uo(r){var e=r.documentElement,n=Fe(e,"numFmts");return n?Ft(n,"numFmt"):[]}function co(r){var e=r.documentElement;return no(e,"si",function(n){var t=Fe(n,"t");if(t)return t.textContent;var l="";return zt(n,"r",function(o){l+=Fe(o,"t").textContent}),l})}function $o(r){var e=r.documentElement;return Fe(e,"workbookPr")}function po(r){var e=r.documentElement;return Ft(e,"Relationship")}function mo(r){var e=r.documentElement,n=Fe(e,"sheets");return Ft(n,"sheet")}function _o(r,e){var n=e.createDocument(r),t={},l=$o(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return mo(n).forEach(o),t}function go(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Kt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Kt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Kt(u);break}};return po(n).forEach(l),t}function Kt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Cn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function An(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cn(Object(n),!0).forEach(function(t){ho(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ho(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function bo(r,e){if(!r)return{};var n=e.createDocument(r),t=ao(n).map(Jt),l=uo(n).map(vo).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?An(An({},t[u.xfId]),Jt(u,l)):Jt(u,l)};return fo(n).map(o)}function vo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Jt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function wo(r,e){return r?co(e.createDocument(r)):[]}function Fr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function ko(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=yo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yo(r,e){if(r){if(typeof r=="string")return Ln(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(r,e)}}function Ln(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function So(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(To.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&Ao(l.numberFormat.template))return!0}}var To=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Oo=/^\[\$-414\]/,Co=/;@$/;function Ao(r){r=r.toLowerCase(),r=r.replace(Oo,""),r=r.replace(Co,"");for(var e=r.split(/\W+/),n=ko(e),t;!(t=n()).done;){var l=t.value;if(Lo.indexOf(l)<0)return!1}return!0}var Lo=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Io(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Yt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Yt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Yt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Po(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var _=Number(r);if(isNaN(_))throw new Error('Invalid "numeric" cell value: '.concat(r));r=_,So(r,o(),i,a)&&(r=Fr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Po(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Yt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Mo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function jo(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function Fo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Mo.indexOf(r[n]),n++;return e}function Er(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Fo(r[0].trim())]}function Eo(r,e,n,t,l,o,i){var u=Er(r.getAttribute("r")),s=oo(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:Io(a,f,{getInlineStringValue:function(){return so(e,r)},getInlineStringXml:function(){return jr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function No(r,e,n,t,l,o){var i=lo(r);return i.length===0?[]:i.map(function(u){return Eo(u,r,e,n,t,l,o)})}function Do(r,e){return zo(r)||Go(r,e)||Bo(r,e)||Ro()}function Ro(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bo(r,e){if(r){if(typeof r=="string")return In(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(r,e)}}function In(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Go(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function zo(r){if(Array.isArray(r))return r}function Ho(r){var e=io(r);if(e)return e=e.split(":").map(Er).map(function(n){var t=Do(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Uo(r,e,n,t,l,o){var i=e.createDocument(r),u=No(i,e,n,t,l,o),s=Ho(i)||jo(u);return{cells:u,dimensions:s}}function qo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Wo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wo(r,e){if(r){if(typeof r=="string")return Pn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(r,e)}}function Pn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Vo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=qo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Xo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ko(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ko(r,e){if(r){if(typeof r=="string")return Mn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(r,e)}}function Mn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Jo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Xo(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Yo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Nr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zo(r,e){return es(r)||xo(r,e)||Nr(r,e)||Qo()}function Qo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nr(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function xo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function es(r){if(Array.isArray(r))return r}function ts(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Zo(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=Yo(t),_;!(_=c()).done;){var d=_.value,k=d.row-1,T=d.column-1;T<i&&k<u&&(s[k][T]=d.value)}var O=e.rowMap;if(O)for(var S=0;S<s.length;)O[S]=S,S++;return s=Vo(Jo(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:O}),e.transformData&&(s=e.transformData(s)),s}function ns(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=rs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rs(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function En(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function ls(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?En(Object(n),!0).forEach(function(t){os(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function os(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ss(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=ls({sheet:1},n));var t=function(_){if(!r[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return r[_]},l=go(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?wo(t(l.sharedStrings),e):[],i=l.styles?bo(t(l.styles),e):{},u=_o(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var s=is(n.sheet,u.sheets);if(!s||!l.sheets[s])throw as(n.sheet,u.sheets);var a=Uo(t(l.sheets[s]),e,o,i,u,n),f=ts(a,n);return n.properties?{data:f,properties:u}:f}function is(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=ns(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function as(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function en(r){"@babel/helpers - typeof";return en=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(r)}function Nn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function fs(r,e,n){return e&&Nn(r.prototype,e),n&&Nn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function us(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function cs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Lt(r,e)}function $s(r){var e=Dr();return function(){var t=It(r),l;if(e){var o=It(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return ps(this,l)}}function ps(r,e){if(e&&(en(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ms(r)}function ms(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function tn(r){var e=typeof Map=="function"?new Map:void 0;return tn=function(t){if(t===null||!_s(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Dt(t,arguments,It(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Lt(l,t)},tn(r)}function Dt(r,e,n){return Dr()?Dt=Reflect.construct:Dt=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Lt(a,i.prototype),a},Dt.apply(null,arguments)}function Dr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _s(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Lt(r,e){return Lt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Lt(r,e)}function It(r){return It=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},It(r)}var de=function(r){cs(n,r);var e=$s(n);function n(t){var l;return us(this,n),l=e.call(this,"invalid"),l.reason=t,l}return fs(n)}(tn(Error));function gs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new de("not_a_number")}if(typeof r!="number")throw new de("not_a_number");if(isNaN(r))throw new de("invalid_number");if(!isFinite(r))throw new de("out_of_bounds");return r}function ds(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new de("invalid_number");if(!isFinite(r))throw new de("out_of_bounds");return String(r)}throw new de("not_a_string")}function hs(r){if(typeof r=="boolean")return r;throw new de("not_a_boolean")}function bs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new de("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new de("invalid_number");if(!isFinite(r))throw new de("out_of_bounds");var t=Fr(r,n);if(isNaN(t.valueOf()))throw new de("out_of_bounds");return t}throw new de("not_a_date")}function vs(r,e){return ys(r)||ks(r,e)||Rr(r,e)||ws()}function ws(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ks(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ys(r){if(Array.isArray(r))return r}function nn(r){"@babel/helpers - typeof";return nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(r)}function Ss(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Rr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rr(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Rn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Bn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(t){Ts(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ts(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Gn={isColumnOriented:!1};function Os(r,e,n){n?n=Bn(Bn({},Gn),n):n=Gn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;Is(e),l&&(r=Ls(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Br(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var _=Ss(a),d;!(d=_()).done;){var k=d.value;k.row=o[k.row-1]+1}return{rows:s,errors:a}}function Br(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var _=f[a],d=r[_],k=nn(d.type)==="object"&&!Array.isArray(d.type),T=e[t.indexOf(_)];T===void 0&&(T=null);var O=void 0,S=void 0,P=void 0;if(k)O=Br(d.type,e,n,t,l,o);else if(T===null)O=null;else if(Array.isArray(d.type)){var E=!1,N=As(T).map(function(F){var M=zn(F,d,o);return M.error&&(O=F,S=M.error,P=M.reason),M.value!==null&&(E=!0),M.value});S||(O=E?N:null)}else{var L=zn(T,d,o);S=L.error,P=L.reason,O=S?T:L.value}!S&&O===null&&d.required&&(S="required"),S?(S={error:S,row:n+1,column:_,value:O},P&&(S.reason=P),d.type&&(S.type=d.type),l.push(S)):(u&&O!==null&&(u=!1),(O!==null||o.includeNullValues)&&(i[d.prop]=O))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function zn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=lt(r,e.parse):e.type?t=Cs(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function lt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Cs(r,e,n){switch(e){case String:return lt(r,ds);case Number:return lt(r,gs);case Date:return lt(r,function(t){return bs(t,{properties:n.properties})});case Boolean:return lt(r,hs);default:if(typeof e=="function")return lt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Gr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Gr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function As(r){for(var e=[],n=0;n<r.length;){var t=Gr(r,",",n),l=vs(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var Ls=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Is(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function rn(r){"@babel/helpers - typeof";return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(r)}function zr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;rn(o)==="object"&&(o=Object.keys(r[l])[0],i=zr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var Ps=["schema","map"];function Hn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Nt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hn(Object(n),!0).forEach(function(t){Ms(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ms(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function js(r,e){if(r==null)return{};var n=Fs(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Fs(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Es(r,e,n){var t=n.schema,l=n.map,o=js(n,Ps);!t&&l&&(t=zr(l));var i=ss(r,e,Nt(Nt({},o),{},{properties:t||o.properties}));return t?Os(i.data,t,Nt(Nt({},o),{},{properties:i.properties})):i}function Ns(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return eo(r).then(function(n){return Es(n,Nl,e)})}function Ds(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>Rs(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(l.browse.num_features=l.browse.num_features!==void 0?l.browse.num_features+1:1,t.properties.funding_programme=l.funding_programme,t.id=n++)}return e}function Rs(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Bs(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ns(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Wr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function Hr(r){return on(["get","intervention_type"],{area:De.area,route:De.route,crossing:De.crossing,other:De.other},"white")}function Un(r){return[["Areas",De.area],["Routes",De.route],["Crossings",De.crossing],["Other",De.other]]}const ee={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Be=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Gs(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new At({props:u}),V.push(()=>X(e,"value",i)),e.$on("change",r[2]),l=new dl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],K(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function zs(r,e,n){let t;Re(r,sn,s=>n(4,t=s));let l="interventionType",o=Un();function i(){let s;l=="interventionType"?(s=Hr(),n(1,o=Un())):(s=on(["get","funding_programme"],{ATF2:ee.atf2,ATF3:ee.atf3,ATF4:ee.atf4},"grey"),n(1,o=[["ATF2",ee.atf2],["ATF3",ee.atf3],["ATF4",ee.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class Hs extends U{constructor(e){super(),q(this,e,zs,Gs,z,{})}}function Us(r){let e;return{c(){e=w("Clear")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function qs(r){let e,n,t,l,o,i;return t=new Zt({props:{$$slots:{default:[Us]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=A("input"),n=C(),h(t.$$.fragment),H(e,"type","text"),H(e,"class","govuk-input govuk-input--width-10"),H(e,"id","filterText")},m(u,s){p(u,e,s),Bt(e,r[0]),p(u,n,s),b(t,u,s),l=!0,o||(i=Ot(e,"input",r[12]),o=!0)},p(u,s){s&1&&e.value!==u[0]&&Bt(e,u[0]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||($(t.$$.fragment,u),l=!0)},o(u){g(t.$$.fragment,u),l=!1},d(u){u&&(m(e),m(n)),v(t,u),o=!1,i()}}}function Ws(r){let e,n,t,l,o,i,u,s,a,f;function c(T){r[10](T)}let _={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&(_.value=r[3]),e=new At({props:_}),V.push(()=>X(e,"value",c));function d(T){r[11](T)}let k={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(k.value=r[4]),l=new At({props:k}),V.push(()=>X(l,"value",d)),u=new kr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[qs]},$$scope:{ctx:r}}}),a=new Hs({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(T,O){b(e,T,O),p(T,t,O),b(l,T,O),p(T,i,O),b(u,T,O),p(T,s,O),b(a,T,O),f=!0},p(T,O){const S={};O&32&&(S.choices=T[5]),!n&&O&8&&(n=!0,S.value=T[3],K(()=>n=!1)),e.$set(S);const P={};O&64&&(P.choices=T[6]),!o&&O&16&&(o=!0,P.value=T[4],K(()=>o=!1)),l.$set(P);const E={};O&65537&&(E.$$scope={dirty:O,ctx:T}),u.$set(E)},i(T){f||($(e.$$.fragment,T),$(l.$$.fragment,T),$(u.$$.fragment,T),$(a.$$.fragment,T),f=!0)},o(T){g(e.$$.fragment,T),g(l.$$.fragment,T),g(u.$$.fragment,T),g(a.$$.fragment,T),f=!1},d(T){T&&(m(t),m(i),m(s)),v(e,T),v(l,T),v(u,T),v(a,T)}}}function Vs(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",_,d,k=r[7].other.toLocaleString()+"",T,O;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),_=w(c),d=w(" crossings, "),T=w(k),O=w(`
    other)`)},m(S,P){p(S,e,P),p(S,t,P),p(S,l,P),p(S,i,P),p(S,u,P),p(S,a,P),p(S,f,P),p(S,_,P),p(S,d,P),p(S,T,P),p(S,O,P)},p(S,P){P&2&&n!==(n=S[1].size.toLocaleString()+"")&&B(t,n),P&128&&o!==(o=S[7].route.toLocaleString()+"")&&B(i,o),P&128&&s!==(s=S[7].area.toLocaleString()+"")&&B(a,s),P&128&&c!==(c=S[7].crossing.toLocaleString()+"")&&B(_,c),P&128&&k!==(k=S[7].other.toLocaleString()+"")&&B(T,k)},d(S){S&&(m(e),m(t),m(l),m(i),m(u),m(a),m(f),m(_),m(d),m(T),m(O))}}}function Xs(r){let e,n,t;function l(i){r[14](i)}let o={id:"show-schemes",$$slots:{default:[Vs]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new le({props:o}),V.push(()=>X(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65666&&(s.$$scope={dirty:u,ctx:i}),!n&&u&4&&(n=!0,s.checked=i[2],K(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ks(r){let e,n,t,l;return e=new Te({props:{label:"Filters",$$slots:{default:[Ws]},$$scope:{ctx:r}}}),t=new Mt({props:{small:!0,$$slots:{default:[Xs]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65657&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65670&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Js(r,e,n){let{schemesGj:t}=e,{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,{show:u=!0}=e,s=[],a="",f=[],c="",_={area:0,route:0,crossing:0,other:0};an(()=>{var L,F;let E=new Set,N=new Set;for(let M of l.values())(L=M.browse)!=null&&L.authority_or_region&&E.add(M.browse.authority_or_region),(F=M.browse)!=null&&F.funding_programme&&N.add(M.browse.funding_programme);n(5,s=Array.from(E.entries())),s.sort(),n(6,f=Array.from(N.entries())),f.sort()});function d(E,N,L){let F=E.toLowerCase(),M=j=>{var G,x,D,J;if(F&&!((G=j.properties.name)!=null&&G.toLowerCase().includes(F))&&!((x=j.properties.description)!=null&&x.toLowerCase().includes(F)))return!1;if(N||L){let $e=l.get(j.properties.scheme_reference);if(N&&((D=$e.browse)==null?void 0:D.authority_or_region)!=N||L&&((J=$e.browse)==null?void 0:J.funding_programme)!=L)return!1}return!0};n(1,o=new Set(t.features.filter(M).map(j=>j.properties.scheme_reference))),n(7,_={area:0,route:0,crossing:0,other:0});let I=j=>{var G,x;return!(!o.has(j.properties.scheme_reference)||F&&!((G=j.properties.name)!=null&&G.toLowerCase().includes(F))&&!((x=j.properties.description)!=null&&x.toLowerCase().includes(F)))};for(let j of t.features)I(j)?(delete j.properties.hide_while_editing,n(7,_[j.properties.intervention_type]++,_)):j.properties.hide_while_editing=!0;n(8,t),n(7,_)}function k(E){a=E,n(3,a)}function T(E){c=E,n(4,c)}function O(){i=this.value,n(0,i)}const S=()=>n(0,i="");function P(E){u=E,n(2,u)}return r.$$set=E=>{"schemesGj"in E&&n(8,t=E.schemesGj),"schemes"in E&&n(9,l=E.schemes),"schemesToBeShown"in E&&n(1,o=E.schemesToBeShown),"filterText"in E&&n(0,i=E.filterText),"show"in E&&n(2,u=E.show)},r.$$.update=()=>{r.$$.dirty&25&&d(i,a,c)},[i,o,u,a,c,s,f,_,t,l,k,T,O,S,P]}class Ys extends U{constructor(e){super(),q(this,e,Js,Ks,z,{schemesGj:8,schemes:9,schemesToBeShown:1,filterText:0,show:2})}}function Zs(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qs(r){let e,n,t,l,o;return t=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Zs]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,u){p(i,e,u),y(e,n),b(t,e,null),y(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||($(t.$$.fragment,i),o=!0)},o(i){g(t.$$.fragment,i),o=!1},d(i){i&&m(e),v(t)}}}class Ee extends U{constructor(e){super(),q(this,e,null,Qs,z,{})}}function qn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Wn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Vn(r){let e,n;return{c(){e=A("span"),n=w(` 
    `),he(e,"background",r[5]),he(e,"width","100%"),he(e,"border","1px solid black")},m(t,l){p(t,e,l),y(e,n)},p(t,l){l&1&&he(e,"background",t[5])},d(t){t&&m(e)}}}function Xn(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&B(t,n)},d(l){l&&m(e)}}}function xs(r){let e,n,t,l=je(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Vn(Wn(r,l,s));let i=je(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Xn(qn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=C(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();he(e,"display","flex"),he(t,"display","flex"),he(t,"justify-content","space-between")},m(s,a){p(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);p(s,n,a),p(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=je(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Wn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Vn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=je(s[1]);let f;for(f=0;f<i.length;f+=1){const c=qn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Xn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:te,o:te,d(s){s&&(m(e),m(n),m(t)),Ct(o,s),Ct(u,s)}}}function ei(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class ze extends U{constructor(e){super(),q(this,e,ei,xs,z,{colorScale:0,limits:1})}}function Kn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function ti(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ni(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ri(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function li(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function oi(r){let e,n,t,l,o,i,u,s,a,f,c,_;return t=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ni]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ri]},$$scope:{ctx:r}}}),f=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[li]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),s=A("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(d,k){p(d,e,k),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(d,u,k),p(d,s,k),y(s,a),b(f,s,null),y(s,c),_=!0},p(d,k){const T={};k&65536&&(T.$$scope={dirty:k,ctx:d}),t.$set(T);const O={};k&65536&&(O.$$scope={dirty:k,ctx:d}),o.$set(O);const S={};k&65536&&(S.$$scope={dirty:k,ctx:d}),f.$set(S)},i(d){_||($(t.$$.fragment,d),$(o.$$.fragment,d),$(f.$$.fragment,d),_=!0)},o(d){g(t.$$.fragment,d),g(o.$$.fragment,d),g(f.$$.fragment,d),_=!1},d(d){d&&(m(e),m(u),m(s)),v(t),v(o),v(f)}}}function si(r){let e,n,t;return n=new se({props:{$$slots:{default:[oi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Jn(r){let e,n;return e=new ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ii(r){let e;return{c(){e=w("Average cars per household")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ai(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ui(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ci(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,k;return o=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ai]},$$scope:{ctx:r}}}),u=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[fi]},$$scope:{ctx:r}}}),_=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ui]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=C(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=w("License: "),h(_.$$.fragment),d=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(T,O){p(T,e,O),p(T,n,O),p(T,t,O),y(t,l),b(o,t,null),y(t,i),b(u,t,null),y(t,s),p(T,a,O),p(T,f,O),y(f,c),b(_,f,null),y(f,d),k=!0},p(T,O){const S={};O&65536&&(S.$$scope={dirty:O,ctx:T}),o.$set(S);const P={};O&65536&&(P.$$scope={dirty:O,ctx:T}),u.$set(P);const E={};O&65536&&(E.$$scope={dirty:O,ctx:T}),_.$set(E)},i(T){k||($(o.$$.fragment,T),$(u.$$.fragment,T),$(_.$$.fragment,T),k=!0)},o(T){g(o.$$.fragment,T),g(u.$$.fragment,T),g(_.$$.fragment,T),k=!1},d(T){T&&(m(e),m(n),m(t),m(a),m(f)),v(o),v(u),v(_)}}}function $i(r){let e,n,t;return n=new se({props:{$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Yn(r){let e,n;return e=new ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pi(r){let e;return{c(){e=w("Population density")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function mi(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function _i(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function gi(r){let e,n,t,l,o,i,u,s,a;return t=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[mi]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[_i]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function di(r){let e,n,t;return n=new se({props:{$$slots:{default:[gi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Zn(r){let e,n,t,l;return t=new ze({props:{colorScale:r[4],limits:r[6]().map(Ti)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=C(),h(t.$$.fragment)},m(o,i){p(o,e,i),p(o,n,i),b(t,o,i),l=!0},p:te,i(o){l||($(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),v(t,o)}}}function hi(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){p(a,e,f),y(e,n),y(e,t),y(t,o),y(e,i),y(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&B(o,l),f&8192&&u!==(u=a[14]+"")&&B(s,u)},d(a){a&&m(e)}}}function bi(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=A("b"),s=w(u),a=w(`
          cars`)},m(f,c){p(f,e,c),y(e,n),y(e,l),y(e,o),y(e,i),y(i,s),y(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(l,t),c&8200&&u!==(u=f[15]+"")&&B(s,u)},d(f){f&&m(e)}}}function vi(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){p(f,e,c),y(e,n),y(n,l),y(n,o),y(e,i),y(e,s),y(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(l,t),c&8192&&u!==(u=f[14]+"")&&B(s,u)},d(f){f&&m(e)}}}function wi(r){Kn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?vi:o[3]=="average_cars_per_household"?bi:hi}let t=n(r),l=t(r);return{c(){l.c(),e=ke()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){Kn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function ki(r){let e,n;return e=new oe({props:{$$slots:{default:[wi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yi(r){let e,n,t,l;const o=[R(Ye),{sourceLayer:Ye},{paint:{"fill-color":pe(["get",r[3]],r[6](),r[4]),"fill-opacity":Y(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ki]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Ge({props:i}),e.$on("click",r[5]);const u=[R(`${Ye}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Q(o,[f&0&&ne(R(Ye)),f&0&&{sourceLayer:Ye},f&88&&{paint:{"fill-color":pe(["get",a[3]],a[6](),a[4]),"fill-opacity":Y(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&8?Q(u,[f&0&&ne(R(`${Ye}-outline`)),u[1],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Si(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,k;function T(I){r[7](I)}let O={id:"percent_households_with_car",$$slots:{right:[si],default:[ti]},$$scope:{ctx:r}};r[0]!==void 0&&(O.checked=r[0]),e=new le({props:O}),V.push(()=>X(e,"checked",T)),e.$on("change",r[8]);let S=r[3]=="percent_households_with_car"&&Jn(r);function P(I){r[9](I)}let E={id:"average_cars_per_household",$$slots:{right:[$i],default:[ii]},$$scope:{ctx:r}};r[1]!==void 0&&(E.checked=r[1]),o=new le({props:E}),V.push(()=>X(o,"checked",P)),o.$on("change",r[10]);let N=r[3]=="average_cars_per_household"&&Yn(r);function L(I){r[11](I)}let F={id:"population_density",$$slots:{right:[di],default:[pi]},$$scope:{ctx:r}};r[2]!==void 0&&(F.checked=r[2]),a=new le({props:F}),V.push(()=>X(a,"checked",L)),a.$on("change",r[12]);let M=r[3]=="population_density"&&Zn(r);return d=new ce({props:{url:`pmtiles://${fe()}/v1/${Ye}.pmtiles`,$$slots:{default:[yi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),S&&S.c(),l=C(),h(o.$$.fragment),u=C(),N&&N.c(),s=C(),h(a.$$.fragment),c=C(),M&&M.c(),_=C(),h(d.$$.fragment)},m(I,j){b(e,I,j),p(I,t,j),S&&S.m(I,j),p(I,l,j),b(o,I,j),p(I,u,j),N&&N.m(I,j),p(I,s,j),b(a,I,j),p(I,c,j),M&&M.m(I,j),p(I,_,j),b(d,I,j),k=!0},p(I,[j]){const G={};j&65536&&(G.$$scope={dirty:j,ctx:I}),!n&&j&1&&(n=!0,G.checked=I[0],K(()=>n=!1)),e.$set(G),I[3]=="percent_households_with_car"?S?(S.p(I,j),j&8&&$(S,1)):(S=Jn(I),S.c(),$(S,1),S.m(l.parentNode,l)):S&&(ie(),g(S,1,1,()=>{S=null}),ae());const x={};j&65536&&(x.$$scope={dirty:j,ctx:I}),!i&&j&2&&(i=!0,x.checked=I[1],K(()=>i=!1)),o.$set(x),I[3]=="average_cars_per_household"?N?(N.p(I,j),j&8&&$(N,1)):(N=Yn(I),N.c(),$(N,1),N.m(s.parentNode,s)):N&&(ie(),g(N,1,1,()=>{N=null}),ae());const D={};j&65536&&(D.$$scope={dirty:j,ctx:I}),!f&&j&4&&(f=!0,D.checked=I[2],K(()=>f=!1)),a.$set(D),I[3]=="population_density"?M?(M.p(I,j),j&8&&$(M,1)):(M=Zn(I),M.c(),$(M,1),M.m(_.parentNode,_)):M&&(ie(),g(M,1,1,()=>{M=null}),ae());const J={};j&65544&&(J.$$scope={dirty:j,ctx:I}),d.$set(J)},i(I){k||($(e.$$.fragment,I),$(S),$(o.$$.fragment,I),$(N),$(a.$$.fragment,I),$(M),$(d.$$.fragment,I),k=!0)},o(I){g(e.$$.fragment,I),g(S),g(o.$$.fragment,I),g(N),g(a.$$.fragment,I),g(M),g(d.$$.fragment,I),k=!1},d(I){I&&(m(t),m(l),m(u),m(s),m(c),m(_)),v(e,I),S&&S.d(I),v(o,I),N&&N.d(I),v(a,I),M&&M.d(I),v(d,I)}}}let Ye="census_output_areas";const Ti=r=>r.toLocaleString();function Oi(r,e,n){let t=ee.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(O){let S=O.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${S}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${S}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(O){l=O,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function _(O){o=O,n(1,o)}const d=()=>{n(0,l=!1),n(2,i=!1)};function k(O){i=O,n(2,i)}const T=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,_,d,k,T]}class Ci extends U{constructor(e){super(),q(this,e,Oi,Si,z,{})}}function Ai(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Li(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ii(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Li]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Pi(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ii]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Mi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function ji(r){let e,n;return e=new oe({props:{$$slots:{default:[Mi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fi(r){let e,n,t,l;const o=[R(ot),{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ji]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Ge({props:i}),e.$on("click",Ni);const u=[R(`${ot}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(ot)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?Q(u,[f&0&&ne(R(`${ot}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Ei(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ot,$$slots:{right:[Pi],default:[Ai]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new Pt({props:{data:`${fe()}/v1/${ot}.geojson`,$$slots:{default:[Fi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ot="combined_authorities";function Ni(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Di(r,e,n){let t=ee.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ri extends U{constructor(e){super(),q(this,e,Di,Ei,z,{})}}function Bi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Gi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function zi(r){let e;return{c(){e=w(`here
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hi(r){let e,n,t,l,o,i,u,s,a;return t=new W({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Gi]},$$scope:{ctx:r}}}),o=new W({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[zi]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function Ui(r){let e,n,t;return n=new se({props:{$$slots:{default:[Hi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Qn(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qi(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,_=r[4].rank.toLocaleString()+"",d,k;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(i),s=C(),a=A("p"),f=w("Rank: "),c=A("b"),d=w(_),k=w(`
        / 32,844 LSOAs`)},m(T,O){p(T,e,O),y(e,t),y(e,l),y(e,o),y(o,u),p(T,s,O),p(T,a,O),y(a,f),y(a,c),y(c,d),y(a,k)},p(T,O){O&16&&n!==(n=T[4].LSOA11CD+"")&&B(t,n),O&16&&i!==(i=T[4].score+"")&&B(u,i),O&16&&_!==(_=T[4].rank.toLocaleString()+"")&&B(d,_)},d(T){T&&(m(e),m(s),m(a))}}}function Wi(r){let e,n;return e=new oe({props:{$$slots:{default:[qi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vi(r){let e,n,t,l;const o=[R(qe),{sourceLayer:qe},{paint:{"fill-color":pe(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Y(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Wi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Ge({props:i});const u=[R(`${qe}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Q(o,[f&0&&ne(R(qe)),f&0&&{sourceLayer:qe},f&6&&{paint:{"fill-color":pe(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Y(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?Q(u,[f&0&&ne(R(`${qe}-outline`)),u[1],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Xi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:qe,$$slots:{right:[Ui],default:[Bi]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&Qn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${qe}.pmtiles`,$$slots:{default:[Vi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=Qn(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let qe="imd";function Ki(r,e,n){let t=ee.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Ji extends U{constructor(e){super(),q(this,e,Ki,Xi,z,{})}}function Yi(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Zi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qi(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Zi]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function xi(r){let e,n,t;return n=new se({props:{$$slots:{default:[Qi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ea(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function ta(r){let e,n;return e=new oe({props:{$$slots:{default:[ea,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function na(r){let e,n,t,l;const o=[R(st),{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ta]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Ge({props:i}),e.$on("click",la);const u=[R(`${st}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(st)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?Q(u,[f&0&&ne(R(`${st}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function ra(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:st,$$slots:{right:[xi],default:[Yi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new Pt({props:{data:`${fe()}/v1/${st}.geojson`,$$slots:{default:[na]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let st="local_authority_districts";function la(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function oa(r,e,n){let t=ee.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class sa extends U{constructor(e){super(),q(this,e,oa,ra,z,{})}}function ia(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function aa(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fa(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ua(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ca(r){let e;return{c(){e=w("this map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function $a(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function pa(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,k,T,O,S,P,E,N,L,F;return t=new W({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[aa]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[fa]},$$scope:{ctx:r}}}),u=new W({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ua]},$$scope:{ctx:r}}}),d=new W({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ca]},$$scope:{ctx:r}}}),P=new W({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[$a]},$$scope:{ctx:r}}}),L=new Ee({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=A("strong"),_=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),k=w(" to get more details."),T=C(),O=A("p"),S=w("Data from ONS Geography via "),h(P.$$.fragment),E=w(", as of November 2022."),N=C(),h(L.$$.fragment)},m(M,I){p(M,e,I),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),b(u,e,null),y(e,s),p(M,a,I),p(M,f,I),y(f,c),y(c,_),b(d,c,null),y(c,k),p(M,T,I),p(M,O,I),y(O,S),b(P,O,null),y(O,E),p(M,N,I),b(L,M,I),F=!0},p(M,I){const j={};I&16&&(j.$$scope={dirty:I,ctx:M}),t.$set(j);const G={};I&16&&(G.$$scope={dirty:I,ctx:M}),o.$set(G);const x={};I&16&&(x.$$scope={dirty:I,ctx:M}),u.$set(x);const D={};I&16&&(D.$$scope={dirty:I,ctx:M}),d.$set(D);const J={};I&16&&(J.$$scope={dirty:I,ctx:M}),P.$set(J)},i(M){F||($(t.$$.fragment,M),$(o.$$.fragment,M),$(u.$$.fragment,M),$(d.$$.fragment,M),$(P.$$.fragment,M),$(L.$$.fragment,M),F=!0)},o(M){g(t.$$.fragment,M),g(o.$$.fragment,M),g(u.$$.fragment,M),g(d.$$.fragment,M),g(P.$$.fragment,M),g(L.$$.fragment,M),F=!1},d(M){M&&(m(e),m(a),m(f),m(T),m(O),m(N)),v(t),v(o),v(u),v(d),v(P),v(L,M)}}}function ma(r){let e,n,t;return n=new se({props:{$$slots:{default:[pa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function _a(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function ga(r){let e,n;return e=new oe({props:{$$slots:{default:[_a,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function da(r){let e,n,t,l;const o=[R(Ae),{sourceLayer:Ae},{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[ga]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Ge({props:i});const u=[R(`${Ae}-outline`),{sourceLayer:Ae},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(Ae)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?Q(u,[f&0&&ne(R(`${Ae}-outline`)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function ha(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ae,$$slots:{right:[ma],default:[ia]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ae}.pmtiles`,$$slots:{default:[da]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ae="local_planning_authorities";function ba(r,e,n){let t=ee.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class va extends U{constructor(e){super(),q(this,e,ba,ha,z,{})}}function wa(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function ka(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ya(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ka]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Sa(r){let e,n,t;return n=new se({props:{$$slots:{default:[ya]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Ta(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&B(t,n)},d(l){l&&m(e)}}}function Oa(r){let e,n;return e=new oe({props:{$$slots:{default:[Ta,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ca(r){let e,n,t,l;const o=[R(Le),{sourceLayer:Le},{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Oa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Ge({props:i}),e.$on("click",La);const u=[R(`${Le}-outline`),{sourceLayer:Le},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(Le)),f&0&&{sourceLayer:Le},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?Q(u,[f&0&&ne(R(`${Le}-outline`)),f&0&&{sourceLayer:Le},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Aa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Le,$$slots:{right:[Sa],default:[wa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Le}.pmtiles`,$$slots:{default:[Ca]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Le="parliamentary_constituencies";function La(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ia(r,e,n){let t=ee.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Pa extends U{constructor(e){super(),q(this,e,Ia,Aa,z,{})}}function Ma(r){let e;return{c(){e=w("Pollution")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ja(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Fa(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ea(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Na(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,k,T,O;return t=new W({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[ja]},$$scope:{ctx:r}}}),f=new W({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Fa]},$$scope:{ctx:r}}}),_=new W({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Ea]},$$scope:{ctx:r}}}),T=new Ee({}),{c(){e=A("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        µgm
        `),o=A("sup"),o.textContent="3",i=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=C(),s=A("p"),a=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(_.$$.fragment),d=w("."),k=C(),h(T.$$.fragment)},m(S,P){p(S,e,P),y(e,n),b(t,e,null),y(e,l),y(e,o),y(e,i),p(S,u,P),p(S,s,P),y(s,a),b(f,s,null),y(s,c),b(_,s,null),y(s,d),p(S,k,P),b(T,S,P),O=!0},p(S,P){const E={};P&2048&&(E.$$scope={dirty:P,ctx:S}),t.$set(E);const N={};P&2048&&(N.$$scope={dirty:P,ctx:S}),f.$set(N);const L={};P&2048&&(L.$$scope={dirty:P,ctx:S}),_.$set(L)},i(S){O||($(t.$$.fragment,S),$(f.$$.fragment,S),$(_.$$.fragment,S),$(T.$$.fragment,S),O=!0)},o(S){g(t.$$.fragment,S),g(f.$$.fragment,S),g(_.$$.fragment,S),g(T.$$.fragment,S),O=!1},d(S){S&&(m(e),m(u),m(s),m(k)),v(t),v(f),v(_),v(T,S)}}}function Da(r){let e,n,t;return n=new se({props:{$$slots:{default:[Na]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function xn(r){let e,n,t,l,o=r[3](r[0])+"",i,u,s,a,f,c,_,d,k,T,O,S,P;function E(I){r[7](I)}let N={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(N.value=r[0]),e=new At({props:N}),V.push(()=>X(e,"value",E));const L=[Ba,Ra],F=[];function M(I,j){return I[0]=="Noise"?0:1}return d=M(r),k=F[d]=L[d](r),{c(){h(e.$$.fragment),t=C(),l=A("p"),i=w(o),u=C(),s=A("div"),a=A("label"),f=w(`Opacity
      `),c=A("input"),_=C(),k.c(),T=ke(),H(c,"type","range"),H(c,"min","0"),H(c,"max","100")},m(I,j){b(e,I,j),p(I,t,j),p(I,l,j),y(l,i),p(I,u,j),p(I,s,j),y(s,a),y(a,f),y(a,c),Bt(c,r[2]),p(I,_,j),F[d].m(I,j),p(I,T,j),O=!0,S||(P=[Ot(c,"change",r[8]),Ot(c,"input",r[8])],S=!0)},p(I,j){const G={};!n&&j&1&&(n=!0,G.value=I[0],K(()=>n=!1)),e.$set(G),(!O||j&1)&&o!==(o=I[3](I[0])+"")&&B(i,o),j&4&&Bt(c,I[2]);let x=d;d=M(I),d===x?F[d].p(I,j):(ie(),g(F[x],1,1,()=>{F[x]=null}),ae(),k=F[d],k?k.p(I,j):(k=F[d]=L[d](I),k.c()),$(k,1),k.m(T.parentNode,T))},i(I){O||($(e.$$.fragment,I),$(k),O=!0)},o(I){g(e.$$.fragment,I),g(k),O=!1},d(I){I&&(m(t),m(l),m(u),m(s),m(_),m(T)),v(e,I),F[d].d(I),S=!1,Vr(P)}}}function Ra(r){let e,n,t;return{c(){e=A("img"),_n(e.src,n=r[5](r[0]))||H(e,"src",n),H(e,"width",150),H(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){p(l,e,o)},p(l,o){o&1&&!_n(e.src,n=l[5](l[0]))&&H(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&H(e,"alt",t)},i:te,o:te,d(l){l&&m(e)}}}function Ba(r){let e,n;return e=new ze({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ga(r){let e,n;const t=[R("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new wl({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&6?Q(t,[t[0],i&4&&{paint:{"raster-opacity":o[2]/100}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function za(r){let e,n,t,l,o,i;function u(f){r[6](f)}let s={id:"pollution",$$slots:{right:[Da],default:[Ma]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[1]&&xn(r);return o=new Sl({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Ga]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],K(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&$(a,1)):(a=xn(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&1&&(d.tiles=[f[4](f[0])]),c&2054&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}function Ha(r,e,n){let t,l=!1,o=50,i="PM25_viridis";function u(){return i=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${i}/MapServer/WMSServer`}function s(k){return t[1]}function a(k){let T=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${T}`}function f(k){let T=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${T}`}function c(k){l=k,n(1,l)}function _(k){i=k,n(0,i)}function d(){o=Xr(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[i])},[i,l,o,s,a,f,c,_,d]}class Ua extends U{constructor(e){super(),q(this,e,Ha,za,z,{})}}function qa(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Wa(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Va(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Wa]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Xa(r){let e,n,t;return n=new se({props:{$$slots:{default:[Va]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Ka(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function Ja(r){let e,n;return e=new oe({props:{$$slots:{default:[Ka,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ya(r){let e,n,t,l;const o=[R(Ie),{sourceLayer:Ie},{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ja]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Ge({props:i}),e.$on("click",Qa);const u=[R(`${Ie}-outline`),{sourceLayer:Ie},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(Ie)),f&0&&{sourceLayer:Ie},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?Q(u,[f&0&&ne(R(`${Ie}-outline`)),f&0&&{sourceLayer:Ie},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Za(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ie,$$slots:{right:[Xa],default:[qa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ie}.pmtiles`,$$slots:{default:[Ya]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ie="wards";function Qa(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function xa(r,e,n){let t=ee.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ef extends U{constructor(e){super(),q(this,e,xa,Za,z,{})}}function tf(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function nf(r){let e,n,t,l;return t=new W({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){p(o,e,i),y(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||($(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&m(e),v(t)}}}class Xe extends U{constructor(e){super(),q(this,e,null,nf,z,{})}}function rf(r){let e,n,t;return e=new me({props:{color:ee.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function lf(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function of(r){let e,n,t,l,o,i,u,s,a;return o=new W({props:{href:"https://gtfs.org",$$slots:{default:[lf]},$$scope:{ctx:r}}}),s=new Xe({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=C(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),y(t,l),b(o,t,null),y(t,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||($(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(u)),v(o),v(s,f)}}}function sf(r){let e,n,t;return n=new se({props:{$$slots:{default:[of]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function af(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ff(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function uf(r){let e;function n(o,i){return o[2].has_bus_lane?ff:af}let t=n(r),l=t(r);return{c(){l.c(),e=ke()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function cf(r){let e,n;return e=new oe({props:{$$slots:{default:[uf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $f(r){let e,n;const t=[R(it),{sourceLayer:it},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ee.bus_route_with_lane,ee.bus_route_without_lane],"line-width":5,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[cf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Q(t,[i&0&&ne(R(it)),i&0&&{sourceLayer:it},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function pf(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:it,$$slots:{right:[sf],default:[rf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${it}.pmtiles`,$$slots:{default:[$f]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let it="bus_routes";function mf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class _f extends U{constructor(e){super(),q(this,e,mf,pf,z,{})}}function er(r){const e=yf(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function tr(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function gf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function df(r){let e,n,t,l,o,i,u,s;return u=new Xe({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=C(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=C(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=C(),h(u.$$.fragment)},m(a,f){p(a,e,f),p(a,n,f),p(a,t,f),p(a,l,f),p(a,o,f),p(a,i,f),b(u,a,f),s=!0},p:te,i(a){s||($(u.$$.fragment,a),s=!0)},o(a){g(u.$$.fragment,a),s=!1},d(a){a&&(m(e),m(n),m(t),m(l),m(o),m(i)),v(u,a)}}}function hf(r){let e,n,t;return n=new se({props:{$$slots:{default:[df]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function nr(r){let e,n,t=je(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=rr(tr(r,t,i));const o=i=>g(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=ke()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);p(i,e,u),n=!0},p(i,u){if(u&2){t=je(i[1]);let s;for(s=0;s<t.length;s+=1){const a=tr(i,t,s);l[s]?(l[s].p(a,u),$(l[s],1)):(l[s]=rr(a),l[s].c(),$(l[s],1),l[s].m(e.parentNode,e))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)$(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(i){i&&m(e),Ct(l,i)}}}function rr(r){let e,n,t,l=r[7]+"",o,i,u;return n=new me({props:{color:r[8]}}),{c(){e=A("div"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){p(s,e,a),b(n,e,null),y(e,t),y(e,o),y(e,i),u=!0},p:te,i(s){u||($(n.$$.fragment,s),u=!0)},o(s){g(n.$$.fragment,s),u=!1},d(s){s&&m(e),v(n)}}}function bf(r){er(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,_,d=r[6]+"",k;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Direction: "),u=A("b"),a=C(),f=A("p"),c=w("Width: "),_=A("b"),k=w(d)},m(T,O){p(T,e,O),y(e,t),p(T,l,O),p(T,o,O),y(o,i),y(o,u),u.innerHTML=s,p(T,a,O),p(T,f,O),y(f,c),y(f,_),y(_,k)},p(T,O){er(T),O&8&&n!==(n=T[4]+"")&&B(t,n),O&8&&s!==(s=T[5]+"")&&(u.innerHTML=s),O&8&&d!==(d=T[6]+"")&&B(k,d)},d(T){T&&(m(e),m(l),m(o),m(a),m(f))}}}function vf(r){let e,n;return e=new oe({props:{$$slots:{default:[bf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wf(r){let e,n;const t=[R(at),{sourceLayer:at},{paint:{"line-color":on(["get","kind"],{track:ee.cycle_paths.track,lane:ee.cycle_paths.lane,shared_use_segregated:ee.cycle_paths.shared_use_segregated,shared_use_unsegregated:ee.cycle_paths.shared_use_unsegregated},"red"),"line-width":Be,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[vf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),e.$on("click",Sf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Q(t,[i&0&&ne(R(at)),i&0&&{sourceLayer:at},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function kf(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:at,$$slots:{right:[hf],default:[gf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&nr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${at}.pmtiles`,$$slots:{default:[wf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=nr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&2049&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let at="cycle_paths";function yf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Sf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Tf(r,e,n){let t=[["Separated tracks",ee.cycle_paths.track],["Unprotected lanes",ee.cycle_paths.lane],["Shared-use (segregated)",ee.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",ee.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Of extends U{constructor(e){super(),q(this,e,Tf,kf,z,{})}}function Cf(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Af(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Lf(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Af]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function If(r){let e,n,t;return n=new se({props:{$$slots:{default:[Lf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Pf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&B(t,n)},d(l){l&&m(e)}}}function Mf(r){let e,n;return e=new oe({props:{$$slots:{default:[Pf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jf(r){let e,n;const t=[R(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Mf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&ne(R(ft)),i&0&&{sourceLayer:ft},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Y(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ff(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ft,$$slots:{right:[If],default:[Cf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${ft}.pmtiles`,$$slots:{default:[jf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ft="mrn";function Ef(r,e,n){let t=ee.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Nf extends U{constructor(e){super(),q(this,e,Ef,Ff,z,{})}}function Df(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Rf(r){let e;return{c(){e=w("the PCT website")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Bf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Gf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new W({props:{href:"https://www.pct.bike",$$slots:{default:[Rf]},$$scope:{ctx:r}}}),a=new W({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=C(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=C(),o=A("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(_,d){p(_,e,d),p(_,n,d),p(_,t,d),p(_,l,d),p(_,o,d),y(o,i),b(u,o,null),y(o,s),b(a,o,null),y(o,f),c=!0},p(_,d){const k={};d&1024&&(k.$$scope={dirty:d,ctx:_}),u.$set(k);const T={};d&1024&&(T.$$scope={dirty:d,ctx:_}),a.$set(T)},i(_){c||($(u.$$.fragment,_),$(a.$$.fragment,_),c=!0)},o(_){g(u.$$.fragment,_),g(a.$$.fragment,_),c=!1},d(_){_&&(m(e),m(n),m(t),m(l),m(o)),v(u),v(a)}}}function zf(r){let e,n,t;return n=new se({props:{$$slots:{default:[Gf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function lr(r){let e,n,t,l,o,i,u,s;e=new ze({props:{colorScale:r[3],limits:r[4]}});function a(d){r[7](d)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new yr({props:f}),V.push(()=>X(t,"value",a));function c(d){r[8](d)}let _={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(_.value=r[1]),i=new At({props:_}),V.push(()=>X(i,"value",c)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),o=C(),h(i.$$.fragment)},m(d,k){b(e,d,k),p(d,n,k),b(t,d,k),p(d,o,k),b(i,d,k),s=!0},p(d,k){const T={};!l&&k&1&&(l=!0,T.value=d[0],K(()=>l=!1)),t.$set(T);const O={};!u&&k&2&&(u=!0,O.value=d[1],K(()=>u=!1)),i.$set(O)},i(d){s||($(e.$$.fragment,d),$(t.$$.fragment,d),$(i.$$.fragment,d),s=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(i.$$.fragment,d),s=!1},d(d){d&&(m(n),m(o)),v(e,d),v(t,d),v(i,d)}}}function Hf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new fn(!1),t=ke(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Uf(r){let e,n;return e=new oe({props:{$$slots:{default:[Hf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qf(r){let e,n;const t=[R(Pe),{sourceLayer:Pe},{paint:{"line-color":pe(["get",r[1]],r[4],r[3]),"line-width":Be,"line-opacity":Y(1,.5)}},{layout:{visibility:r[2]&&r[0]==Pe?"visible":"none"}}];let l={$$slots:{default:[Uf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Q(t,[i&0&&ne(R(Pe)),i&0&&{sourceLayer:Pe},i&26&&{paint:{"line-color":pe(["get",o[1]],o[4],o[3]),"line-width":Be,"line-opacity":Y(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Pe?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Wf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new fn(!1),t=ke(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Vf(r){let e,n;return e=new oe({props:{$$slots:{default:[Wf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xf(r){let e,n;const t=[R(Ze),{sourceLayer:Ze},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":pe(["get",r[1]],r[4],r[3]),"line-width":Be,"line-opacity":Y(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ze?"visible":"none"}}];let l={$$slots:{default:[Vf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Q(t,[i&0&&ne(R(Ze)),i&0&&{sourceLayer:Ze},t[2],t[3],i&26&&{paint:{"line-color":pe(["get",o[1]],o[4],o[3]),"line-width":Be,"line-opacity":Y(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ze?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Kf(r){let e,n,t,l,o,i,u,s;function a(_){r[6](_)}let f={id:Pe,$$slots:{right:[zf],default:[Df]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new le({props:f}),V.push(()=>X(e,"checked",a));let c=r[2]&&lr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Pe}.pmtiles`,$$slots:{default:[qf]},$$scope:{ctx:r}}}),u=new ce({props:{url:`pmtiles://${fe()}/v1/${Ze}.pmtiles`,$$slots:{default:[Xf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),c&&c.c(),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(_,d){b(e,_,d),p(_,t,d),c&&c.m(_,d),p(_,l,d),b(o,_,d),p(_,i,d),b(u,_,d),s=!0},p(_,[d]){const k={};d&1024&&(k.$$scope={dirty:d,ctx:_}),!n&&d&4&&(n=!0,k.checked=_[2],K(()=>n=!1)),e.$set(k),_[2]?c?(c.p(_,d),d&4&&$(c,1)):(c=lr(_),c.c(),$(c,1),c.m(l.parentNode,l)):c&&(ie(),g(c,1,1,()=>{c=null}),ae());const T={};d&1031&&(T.$$scope={dirty:d,ctx:_}),o.$set(T);const O={};d&1031&&(O.$$scope={dirty:d,ctx:_}),u.$set(O)},i(_){s||($(e.$$.fragment,_),$(c),$(o.$$.fragment,_),$(u.$$.fragment,_),s=!0)},o(_){g(e.$$.fragment,_),g(c),g(o.$$.fragment,_),g(u.$$.fragment,_),s=!1},d(_){_&&(m(t),m(l),m(i)),v(e,_),c&&c.d(_),v(o,_),v(u,_)}}}let Pe="pct_commute",Ze="pct_school";function Jf(r,e,n){let t=ee.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Pe,i="baseline",u=!1;function s(_){let d=_.baseline,k=_.gov_target,T=_.go_dutch,O=`<h2>Trip purpose: ${o==Pe?"commuting":"school"}</h2>`;if(O+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)O+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,O+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let S=(k/d).toFixed(1),P=(T/d).toFixed(1);O+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${S}x</b> of baseline)</p>`,O+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${P}x</b> of baseline)</p>`}return O}function a(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){i=_,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class Yf extends U{constructor(e){super(),q(this,e,Jf,Kf,z,{})}}function Zf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qf(r){let e;return{c(){e=w("Basemap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function eu(r){let e,n,t,l,o,i,u,s,a,f,c,_;return t=new W({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Qf]},$$scope:{ctx:r}}}),f=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=C(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=C(),s=A("p"),a=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(d,k){p(d,e,k),y(e,n),b(t,e,null),y(e,l),p(d,o,k),p(d,i,k),p(d,u,k),p(d,s,k),y(s,a),b(f,s,null),y(s,c),_=!0},p(d,k){const T={};k&256&&(T.$$scope={dirty:k,ctx:d}),t.$set(T);const O={};k&256&&(O.$$scope={dirty:k,ctx:d}),f.$set(O)},i(d){_||($(t.$$.fragment,d),$(f.$$.fragment,d),_=!0)},o(d){g(t.$$.fragment,d),g(f.$$.fragment,d),_=!1},d(d){d&&(m(e),m(o),m(i),m(u),m(s)),v(t),v(f)}}}function tu(r){let e,n,t;return n=new se({props:{$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function or(r){let e,n,t,l,o;e=new ze({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new yr({props:u}),V.push(()=>X(t,"value",i)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],K(()=>l=!1)),t.$set(f)},i(s){o||($(e.$$.fragment,s),$(t.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),o=!1},d(s){s&&m(n),v(e,s),v(t,s)}}}function nu(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,_=r[4][r[7].highest_description]+"",d,k;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=C(),u=A("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),d=w(_),k=w(")")},m(T,O){p(T,e,O),y(e,n),y(e,l),y(e,o),p(T,i,O),p(T,u,O),y(u,s),y(u,f),y(u,c),y(u,d),y(u,k)},p(T,O){O&128&&t!==(t=T[7].indicative_mph+"")&&B(l,t),O&128&&a!==(a=T[7].highest_mph+"")&&B(f,a),O&128&&_!==(_=T[4][T[7].highest_description]+"")&&B(d,_)},d(T){T&&(m(e),m(i),m(u))}}}function ru(r){let e,n;return e=new oe({props:{$$slots:{default:[nu,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lu(r){let e,n;const t=[R(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":pe(["get",r[0]],r[3],r[2]),"line-width":Be,"line-opacity":Y(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[ru]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Q(t,[i&0&&ne(R(ut)),i&0&&{sourceLayer:ut},t[2],t[3],i&13&&{paint:{"line-color":pe(["get",o[0]],o[3],o[2]),"line-width":Be,"line-opacity":Y(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ou(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ut,$$slots:{right:[tu],default:[Zf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[1]&&or(r);return o=new ce({props:{url:`pmtiles://${un()}/v1/${ut}.pmtiles`,$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],K(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&$(a,1)):(a=or(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="road_speeds";function su(r,e,n){let t=ee.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class iu extends U{constructor(e){super(),q(this,e,su,ou,z,{})}}function au(r){let e;return{c(){e=w("OS Road widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function uu(r){let e,n,t,l,o,i,u,s,a;return u=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[fu]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=C(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=C(),o=A("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),p(f,l,c),p(f,o,c),y(o,i),b(u,o,null),y(o,s),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||($(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(l),m(o)),v(u)}}}function cu(r){let e,n,t;return n=new se({props:{$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function sr(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $u(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",_,d;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),i=w(`
        meters`),u=C(),s=A("p"),a=w("Minimum width: "),f=A("b"),_=w(c),d=w(`
        meters`)},m(k,T){p(k,e,T),y(e,n),y(e,t),y(t,o),y(e,i),p(k,u,T),p(k,s,T),y(s,a),y(s,f),y(f,_),y(s,d)},p(k,T){T&16&&l!==(l=k[4].average+"")&&B(o,l),T&16&&c!==(c=k[4].minimum+"")&&B(_,c)},d(k){k&&(m(e),m(u),m(s))}}}function pu(r){let e,n;return e=new oe({props:{$$slots:{default:[$u,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mu(r){let e,n;const t=[R(ct),{sourceLayer:ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":pe(["get","average"],r[2],r[1]),"line-width":Be,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[pu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Q(t,[i&0&&ne(R(ct)),i&0&&{sourceLayer:ct},t[2],t[3],i&6&&{paint:{"line-color":pe(["get","average"],o[2],o[1]),"line-width":Be,"line-opacity":Y(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _u(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ct,$$slots:{right:[cu],default:[au]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&sr(r);return o=new ce({props:{url:`pmtiles://${un()}/v1/${ct}.pmtiles`,$$slots:{default:[mu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=sr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ct="road_widths";function gu(r,e,n){let t=ee.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class du extends U{constructor(e){super(),q(this,e,gu,_u,z,{})}}function hu(r){let e,n,t;return{c(){e=A("input"),H(e,"class","govuk-file-upload"),H(e,"id","load-criticals"),H(e,"type","file")},m(l,o){p(l,e,o),r[7](e),n||(t=Ot(e,"change",r[5]),n=!0)},p:te,d(l){l&&m(e),r[7](null),n=!1,t()}}}function ir(r){let e,n;return e=new Mt({props:{small:!0,$$slots:{default:[vu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bu(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new me({props:{color:St}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),p(u,n,s),p(u,l,s),p(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&B(l,t)},i(u){i||($(e.$$.fragment,u),i=!0)},o(u){g(e.$$.fragment,u),i=!1},d(u){u&&(m(n),m(l),m(o)),v(e,u)}}}function vu(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[bu]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),V.push(()=>X(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],K(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function wu(r){let e,n,t,l,o,i;e=new kr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[hu]},$$scope:{ctx:r}}}),t=new Sr({props:{errorMessage:r[3]}});let u=r[2]>0&&ir(r);return{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),u&&u.c(),o=ke()},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),u&&u.m(s,a),p(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&$(u,1)):(u=ir(s),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(ie(),g(u,1,1,()=>{u=null}),ae())},i(s){i||($(e.$$.fragment,s),$(t.$$.fragment,s),$(u),i=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(u),i=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),u&&u.d(s)}}}function ku(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,_,d,k,T=r[10].notes+"",O,S,P,E,N,L,F,M=r[10].id+"",I,j,G,x,D,J=(r[10].inspector??"???")+"",$e,bt,be,et=r[10].submission_time+"",vt,tt,_e,wt,Ne,He=r[10].scheme_reference+"",Ke,kt,nt,Je=r[10].current_design_stage+"",rt;return{c(){e=A("div"),n=A("h2"),l=w(t),o=C(),i=A("p"),u=A("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=C(),_=A("p"),d=A("u"),d.textContent="Notes",k=w(`
          : `),O=w(T),S=C(),P=A("hr"),E=C(),N=A("p"),L=w("Critical issue ID: "),F=A("b"),I=w(M),j=C(),G=A("p"),x=w("Submitted by "),D=A("b"),$e=w(J),bt=w(`
          at
          `),be=A("b"),vt=w(et),tt=C(),_e=A("p"),wt=w("For scheme "),Ne=A("b"),Ke=w(He),kt=w(`
          in stage
          `),nt=A("b"),rt=w(Je),he(e,"max-width","30vw")},m(ve,Ce){p(ve,e,Ce),y(e,n),y(n,l),y(e,o),y(e,i),y(i,u),y(i,s),y(i,f),y(e,c),y(e,_),y(_,d),y(_,k),y(_,O),y(e,S),y(e,P),y(e,E),y(e,N),y(N,L),y(N,F),y(F,I),y(e,j),y(e,G),y(G,x),y(G,D),y(D,$e),y(G,bt),y(G,be),y(be,vt),y(e,tt),y(e,_e),y(_e,wt),y(_e,Ne),y(Ne,Ke),y(_e,kt),y(_e,nt),y(nt,rt)},p(ve,Ce){Ce&1024&&t!==(t=ve[10].critical_type+"")&&B(l,t),Ce&1024&&a!==(a=ve[10].location_description+"")&&B(f,a),Ce&1024&&T!==(T=ve[10].notes+"")&&B(O,T),Ce&1024&&M!==(M=ve[10].id+"")&&B(I,M),Ce&1024&&J!==(J=(ve[10].inspector??"???")+"")&&B($e,J),Ce&1024&&et!==(et=ve[10].submission_time+"")&&B(vt,et),Ce&1024&&He!==(He=ve[10].scheme_reference+"")&&B(Ke,He),Ce&1024&&Je!==(Je=ve[10].current_design_stage+"")&&B(rt,Je)},d(ve){ve&&m(e)}}}function yu(r){let e,n;return e=new oe({props:{$$slots:{default:[ku,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Su(r){let e,n,t,l,o,i;const u=[R(`${We}-clusters`),{applyToClusters:!0},{paint:{"circle-color":St,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let d=0;d<u.length;d+=1)s=Z(s,u[d]);e=new Ve({props:s}),e.$on("click",r[6]);const a=[R(`${We}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=Z(f,a[d]);t=new Al({props:f});const c=[R(`${We}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":St,"circle-opacity":Y(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let _={$$slots:{default:[yu]},$$scope:{ctx:r}};for(let d=0;d<c.length;d+=1)_=Z(_,c[d]);return o=new Ve({props:_}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment)},m(d,k){b(e,d,k),p(d,n,k),b(t,d,k),p(d,l,k),b(o,d,k),i=!0},p(d,k){const T=k&2?Q(u,[k&0&&ne(R(`${We}-clusters`)),u[1],k&0&&{paint:{"circle-color":St,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},k&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(T);const O=k&2?Q(a,[k&0&&ne(R(`${We}-counts`)),a[1],k&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(O);const S=k&2?Q(c,[k&0&&ne(R(`${We}-points`)),c[1],c[2],c[3],k&0&&{paint:{"circle-color":St,"circle-opacity":Y(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},k&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};k&2048&&(S.$$scope={dirty:k,ctx:d}),o.$set(S)},i(d){i||($(e.$$.fragment,d),$(t.$$.fragment,d),$(o.$$.fragment,d),i=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(o.$$.fragment,d),i=!1},d(d){d&&(m(n),m(l)),v(e,d),v(t,d),v(o,d)}}}function Tu(r){let e,n,t,l;return e=new Te({props:{label:"Critical Issues",$$slots:{default:[wu]},$$scope:{ctx:r}}}),t=new Pt({props:{id:We,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Su]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}let We="criticals",St="red";function Ou(r,e,n){let t;Re(r,sn,d=>n(9,t=d));let l,o=!0,i=0,u="",s=Kr();async function a(d){try{n(4,s=await Bs(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(k){n(3,u=`The file you loaded is broken: ${k}`)}}function f(d){t.getSource(We).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id,(k,T)=>{k||t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:T})})}function c(d){V[d?"unshift":"push"](()=>{l=d,n(0,l)})}function _(d){o=d,n(1,o)}return[l,o,i,u,s,a,f,c,_]}class Cu extends U{constructor(e){super(),q(this,e,Ou,Tu,z,{})}}function Au(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Lu(r){let e;return{c(){e=w("crossing")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Iu(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Lu]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Pu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Iu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Mu(r){let e,n=ar(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=ar(l[3])+"")&&B(t,n)},d(l){l&&m(e)}}}function ju(r){let e,n;return e=new oe({props:{$$slots:{default:[Mu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fu(r){let e,n;const t=[R($t),{sourceLayer:$t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[ju]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ve({props:l}),e.$on("click",Nu),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&ne(R($t)),i&0&&{sourceLayer:$t},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Eu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:$t,$$slots:{right:[Pu],default:[Au]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${$t}.pmtiles`,$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let $t="crossings";function ar(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Nu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Du(r,e,n){let t=ee.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ru extends U{constructor(e){super(),q(this,e,Du,Eu,z,{})}}function Bu(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Gu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function zu(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Gu]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Hu(r){let e,n,t;return n=new se({props:{$$slots:{default:[zu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Uu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(i,u){p(i,e,u),y(e,n),y(e,t),y(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&B(o,l)},d(i){i&&m(e)}}}function qu(r){let e,n;return e=new oe({props:{$$slots:{default:[Uu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wu(r){let e,n;const t=[R(pt),{sourceLayer:pt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&ne(R(pt)),i&0&&{sourceLayer:pt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Vu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:pt,$$slots:{right:[Hu],default:[Bu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${pt}.pmtiles`,$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let pt="cycle_parking";function Xu(r,e,n){let t=ee.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ku extends U{constructor(e){super(),q(this,e,Xu,Vu,z,{})}}function Ju(r){let e,n,t,l;return e=new me({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=C(),t=w(r[2])},m(o,i){b(e,o,i),p(o,n,i),p(o,t,i),l=!0},p(o,i){(!l||i&4)&&B(t,o[2])},i(o){l||($(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){o&&(m(n),m(t)),v(e,o)}}}function Yu(r){let e;const n=r[5].default,t=_t(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&gt(t,n,l,l[7],e?ht(n,l[7],o,null):dt(l[7]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Zu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Qu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&B(t,n)},d(l){l&&m(e)}}}function xu(r){let e,n;return e=new oe({props:{$$slots:{default:[Qu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ec(r){let e,n;const t=[R(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Y(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[xu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ge({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Q(t,[i&1&&ne(R(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":Y(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function tc(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[Zu],default:[Ju]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[ec]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],K(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${fe()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function nc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=ee[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class $n extends U{constructor(e){super(),q(this,e,nc,tc,z,{name:0,singularNoun:1,pluralNoun:2})}}function rc(r){let e;return{c(){e=w("hospital")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function lc(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[rc]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function oc(r){let e,n;return e=new $n({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class sc extends U{constructor(e){super(),q(this,e,null,oc,z,{})}}function ic(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function ac(r){let e;return{c(){e=w("railway station")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fc(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[ac]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function uc(r){let e,n,t;return n=new se({props:{$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function cc(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&B(t,n)},d(l){l&&m(e)}}}function $c(r){let e,n;return e=new oe({props:{$$slots:{default:[cc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pc(r){let e,n;const t=[R(Ht),{paint:{"circle-color":r[1],"circle-radius":Gt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[$c]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&ne(R(Ht)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Gt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function mc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ht,$$slots:{right:[uc],default:[ic]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new Pt({props:{data:`${fe()}/v1/${Ht}.geojson`,$$slots:{default:[pc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ht="railway_stations";function _c(r,e,n){let t=ee.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class gc extends U{constructor(e){super(),q(this,e,_c,mc,z,{})}}function dc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function hc(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[dc]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function bc(r){let e,n;return e=new $n({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class vc extends U{constructor(e){super(),q(this,e,null,bc,z,{})}}function wc(r){let e;return{c(){e=w("sports pitches")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function kc(r){let e;return{c(){e=w("sports centres")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function yc(r){let e,n,t,l,o,i,u,s,a;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[wc]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[kc]},$$scope:{ctx:r}}}),s=new Xe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function Sc(r){let e,n;return e=new $n({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[yc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Tc extends U{constructor(e){super(),q(this,e,null,Sc,z,{})}}function Oc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Cc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ac(r){let e;return{c(){e=w("methodology")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Lc(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new W({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),f=new Ee({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=C(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=C(),h(f.$$.fragment)},m(_,d){p(_,e,d),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(_,u,d),p(_,s,d),p(_,a,d),b(f,_,d),c=!0},p(_,d){const k={};d&64&&(k.$$scope={dirty:d,ctx:_}),t.$set(k);const T={};d&64&&(T.$$scope={dirty:d,ctx:_}),o.$set(T)},i(_){c||($(t.$$.fragment,_),$(o.$$.fragment,_),$(f.$$.fragment,_),c=!0)},o(_){g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),c=!1},d(_){_&&(m(e),m(u),m(s),m(a)),v(t),v(o),v(f,_)}}}function Ic(r){let e,n,t;return n=new se({props:{$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function fr(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,_,d,k=r[5].pedal_cycles_2022.toLocaleString()+"",T,O,S,P,E,N=r[5].method+"",L;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(s),f=C(),c=A("p"),_=w("Total pedal cycles (2022 AADF): "),d=A("b"),T=w(k),O=C(),S=A("p"),P=w("Count method: "),E=A("b"),L=w(N)},m(F,M){p(F,e,M),y(e,t),p(F,l,M),p(F,o,M),y(o,i),y(o,u),y(u,a),p(F,f,M),p(F,c,M),y(c,_),y(c,d),y(d,T),p(F,O,M),p(F,S,M),y(S,P),y(S,E),y(E,L)},p(F,M){M&32&&n!==(n=F[5].location+"")&&B(t,n),M&32&&s!==(s=F[5].motor_vehicles_2022.toLocaleString()+"")&&B(a,s),M&32&&k!==(k=F[5].pedal_cycles_2022.toLocaleString()+"")&&B(T,k),M&32&&N!==(N=F[5].method+"")&&B(L,N)},d(F){F&&(m(e),m(l),m(o),m(f),m(c),m(O),m(S))}}}function Mc(r){let e,n;return e=new oe({props:{$$slots:{default:[Pc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jc(r){let e,n;const t=[R(mt),{sourceLayer:mt},{paint:{"circle-color":pe(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Mc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ve({props:l}),e.$on("click",Ec),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Q(t,[i&0&&ne(R(mt)),i&0&&{sourceLayer:mt},i&6&&{paint:{"circle-color":pe(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Fc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:mt,$$slots:{right:[Ic],default:[Oc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&fr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${mt}.pmtiles`,$$slots:{default:[jc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=fr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let mt="vehicle_counts";function Ec(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Nc(r,e,n){let t=ee.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class Dc extends U{constructor(e){super(),q(this,e,Nc,Fc,z,{})}}function Rc(r){let e,n,t,l,o,i,u,s;return e=new vc({}),t=new sc({}),o=new Tc({}),u=new gc({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),p(a,l,f),b(o,a,f),p(a,i,f),b(u,a,f),s=!0},i(a){s||($(e.$$.fragment,a),$(t.$$.fragment,a),$(o.$$.fragment,a),$(u.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),s=!1},d(a){a&&(m(n),m(l),m(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Bc(r){let e,n;return e=new Mt({props:{small:!0,$$slots:{default:[Rc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Of({}),t=new Nf({}),o=new _f({}),u=new Ku({}),a=new Ru({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,_){b(e,c,_),p(c,n,_),b(t,c,_),p(c,l,_),b(o,c,_),p(c,i,_),b(u,c,_),p(c,s,_),b(a,c,_),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function zc(r){let e,n;return e=new Mt({props:{small:!0,$$slots:{default:[Gc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Pa({}),t=new ef({}),o=new Ri({}),u=new sa({}),a=new va({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,_){b(e,c,_),p(c,n,_),b(t,c,_),p(c,l,_),b(o,c,_),p(c,i,_),b(u,c,_),p(c,s,_),b(a,c,_),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Uc(r){let e,n;return e=new Mt({props:{small:!0,$$slots:{default:[Hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qc(r){let e,n,t,l;return e=new Ci({}),t=new Ji({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Wc(r){let e,n,t,l;return e=new du({}),t=new iu({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Vc(r){let e,n,t,l,o=ln()=="Private (development)",i,u,s;e=new Dc({}),t=new Yf({});let a=o&&Wc();return u=new Ua({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),a&&a.c(),i=C(),h(u.$$.fragment)},m(f,c){b(e,f,c),p(f,n,c),b(t,f,c),p(f,l,c),a&&a.m(f,c),p(f,i,c),b(u,f,c),s=!0},p:te,i(f){s||($(e.$$.fragment,f),$(t.$$.fragment,f),$(a),$(u.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(a),g(u.$$.fragment,f),s=!1},d(f){f&&(m(n),m(l),m(i)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function Xc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new tl({props:u}),V.push(()=>X(e,"enabled",i)),l=new sl({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],K(()=>n=!1)),e.$set(f)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Kc(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,k,T,O;return e=new Cu({}),t=new Te({props:{label:"Trip generators",$$slots:{default:[Bc]},$$scope:{ctx:r}}}),o=new Te({props:{label:"Existing infrastructure",$$slots:{default:[zc]},$$scope:{ctx:r}}}),u=new Te({props:{label:"Boundaries",$$slots:{default:[Uc]},$$scope:{ctx:r}}}),a=new Te({props:{label:"Census",$$slots:{default:[qc]},$$scope:{ctx:r}}}),c=new Te({props:{label:"Other",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),d=new Te({props:{label:"Tools",$$slots:{default:[Xc]},$$scope:{ctx:r}}}),T=new el({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),h(c.$$.fragment),_=C(),h(d.$$.fragment),k=C(),h(T.$$.fragment)},m(S,P){b(e,S,P),p(S,n,P),b(t,S,P),p(S,l,P),b(o,S,P),p(S,i,P),b(u,S,P),p(S,s,P),b(a,S,P),p(S,f,P),b(c,S,P),p(S,_,P),b(d,S,P),p(S,k,P),b(T,S,P),O=!0},p(S,P){const E={};P&8&&(E.$$scope={dirty:P,ctx:S}),t.$set(E);const N={};P&8&&(N.$$scope={dirty:P,ctx:S}),o.$set(N);const L={};P&8&&(L.$$scope={dirty:P,ctx:S}),u.$set(L);const F={};P&8&&(F.$$scope={dirty:P,ctx:S}),a.$set(F);const M={};P&8&&(M.$$scope={dirty:P,ctx:S}),c.$set(M);const I={};P&9&&(I.$$scope={dirty:P,ctx:S}),d.$set(I);const j={};P&2&&(j.disabled=!S[1]),T.$set(j)},i(S){O||($(e.$$.fragment,S),$(t.$$.fragment,S),$(o.$$.fragment,S),$(u.$$.fragment,S),$(a.$$.fragment,S),$(c.$$.fragment,S),$(d.$$.fragment,S),$(T.$$.fragment,S),O=!0)},o(S){g(e.$$.fragment,S),g(t.$$.fragment,S),g(o.$$.fragment,S),g(u.$$.fragment,S),g(a.$$.fragment,S),g(c.$$.fragment,S),g(d.$$.fragment,S),g(T.$$.fragment,S),O=!1},d(S){S&&(m(n),m(l),m(i),m(s),m(f),m(_),m(k)),v(e,S),v(t,S),v(o,S),v(u,S),v(a,S),v(c,S),v(d,S),v(T,S)}}}function Jc(r){let e,n;return e=new Te({props:{label:"Layers",open:!0,$$slots:{default:[Kc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yc(r,e,n){let t,l;Re(r,gn,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&gn.set(!t)},[t,l,o]}class Zc extends U{constructor(e){super(),q(this,e,Yc,Jc,z,{})}}function Qc(r,e,n){let{loadFile:t}=e;return an(async()=>{let o=await(await fetch(`${un()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class xc extends U{constructor(e){super(),q(this,e,Qc,null,z,{loadFile:0})}}function e$(r){let e;return{c(){e=w("Show on map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function t$(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function n$(r){let e,n,t,l;return e=new Zt({props:{$$slots:{default:[e$]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Zt({props:{$$slots:{default:[t$]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&32&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function r$(r){var P,E,N;let e,n,t=((P=r[0].browse)==null?void 0:P.authority_or_region)+"",l,o,i,u,s=((E=r[0].browse)==null?void 0:E.capital_scheme_id)+"",a,f,c,_,d=((N=r[0].browse)==null?void 0:N.funding_programme)+"",k,T,O,S;return O=new nl({props:{$$slots:{default:[n$]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=C(),i=A("p"),u=w("Capital scheme ID: "),a=w(s),f=C(),c=A("p"),_=w("Funding programme: "),k=w(d),T=C(),h(O.$$.fragment)},m(L,F){p(L,e,F),y(e,n),y(e,l),p(L,o,F),p(L,i,F),y(i,u),y(i,a),p(L,f,F),p(L,c,F),y(c,_),y(c,k),p(L,T,F),b(O,L,F),S=!0},p(L,F){var I,j,G;(!S||F&1)&&t!==(t=((I=L[0].browse)==null?void 0:I.authority_or_region)+"")&&B(l,t),(!S||F&1)&&s!==(s=((j=L[0].browse)==null?void 0:j.capital_scheme_id)+"")&&B(a,s),(!S||F&1)&&d!==(d=((G=L[0].browse)==null?void 0:G.funding_programme)+"")&&B(k,d);const M={};F&32&&(M.$$scope={dirty:F,ctx:L}),O.$set(M)},i(L){S||($(O.$$.fragment,L),S=!0)},o(L){g(O.$$.fragment,L),S=!1},d(L){L&&(m(e),m(o),m(i),m(f),m(c),m(T)),v(O,L)}}}function l$(r){var t;let e,n;return e=new Te({props:{label:`${r[0].scheme_reference}: ${(t=r[0].browse)==null?void 0:t.num_features} features`,$$slots:{default:[r$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),n=!0},p(l,[o]){var u;const i={};o&1&&(i.label=`${l[0].scheme_reference}: ${(u=l[0].browse)==null?void 0:u.num_features} features`),o&33&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function o$(r,e,n){let t;Re(r,sn,s=>n(4,t=s));let{schemesGj:l}=e,{scheme:o}=e;function i(){let s={type:"FeatureCollection",features:l.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(Jr(s),{padding:20,animate:!1})}function u(){var f,c;let s={type:"FeatureCollection",features:l.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(s)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=s=>{"schemesGj"in s&&n(3,l=s.schemesGj),"scheme"in s&&n(0,o=s.scheme)},[o,i,u,l]}class s$ extends U{constructor(e){super(),q(this,e,o$,l$,z,{schemesGj:3,scheme:0})}}function ur(r){let e,n,t=dn(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,i){p(o,e,i),y(e,n),y(e,l)},p(o,i){i&1&&t!==(t=dn(o[0].length_meters)+"")&&B(l,t)},d(o){o&&m(e)}}}function cr(r){let e,n=r[1](r[0].description)+"";return{c(){e=A("p")},m(t,l){p(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&m(e)}}}function i$(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,_=r[0].scheme_reference+"",d,k,T,O=r[0].length_meters&&ur(r),S=r[0].description&&cr(r);return{c(){e=A("div"),n=A("h2"),t=new fn(!1),o=w(" ("),u=w(i),s=w(")"),a=C(),f=A("p"),c=w("Scheme reference: "),d=w(_),k=C(),O&&O.c(),T=C(),S&&S.c(),t.a=o,he(e,"max-width","30vw")},m(P,E){p(P,e,E),y(e,n),t.m(l,n),y(n,o),y(n,u),y(n,s),y(e,a),y(e,f),y(f,c),y(f,d),y(e,k),O&&O.m(e,null),y(e,T),S&&S.m(e,null)},p(P,[E]){E&1&&l!==(l=P[1](P[0].name)+"")&&t.p(l),E&1&&i!==(i=P[0].intervention_type+"")&&B(u,i),E&1&&_!==(_=P[0].scheme_reference+"")&&B(d,_),P[0].length_meters?O?O.p(P,E):(O=ur(P),O.c(),O.m(e,T)):O&&(O.d(1),O=null),P[0].description?S?S.p(P,E):(S=cr(P),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:te,o:te,d(P){P&&m(e),O&&O.d(),S&&S.d()}}}function a$(r,e,n){let{props:t}=e,{filterText:l}=e;function o(i){return l?i.replace(new RegExp(l,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,l=i.filterText)},[t,o,l]}class pn extends U{constructor(e){super(),q(this,e,a$,i$,z,{props:0,filterText:2})}}function f$(r){let e,n;return e=new pn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function u$(r){let e,n;return e=new oe({props:{$$slots:{default:[f$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function c$(r){let e,n;return e=new pn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $$(r){let e,n;return e=new oe({props:{$$slots:{default:[c$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function p$(r){let e,n;return e=new pn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function m$(r){let e,n;return e=new oe({props:{$$slots:{default:[p$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _$(r){let e,n,t,l,o,i,u,s,a,f;const c=[R("interventions-points"),{filter:["all",hn,r[4],r[5]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[3],"circle-radius":Gt,"circle-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let _={$$slots:{default:[u$]},$$scope:{ctx:r}};for(let L=0;L<c.length;L+=1)_=Z(_,c[L]);e=new Ve({props:_});const d=[R("interventions-lines"),{filter:["all",bn,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[3],"line-width":yt,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let k={$$slots:{default:[$$]},$$scope:{ctx:r}};for(let L=0;L<d.length;L+=1)k=Z(k,d[L]);t=new ue({props:k});const T=[R("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*yt,"circle-opacity":0,"circle-stroke-color":De.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let O={};for(let L=0;L<T.length;L+=1)O=Z(O,T[L]);o=new Ve({props:O});const S=[R("interventions-polygons"),{filter:["all",Et,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[3],"fill-opacity":Y(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let P={$$slots:{default:[m$]},$$scope:{ctx:r}};for(let L=0;L<S.length;L+=1)P=Z(P,S[L]);u=new Ge({props:P});const E=[R("interventions-polygons-outlines"),{filter:["all",Et,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*yt}},{layout:{visibility:r[0]?"visible":"none"}}];let N={};for(let L=0;L<E.length;L+=1)N=Z(N,E[L]);return a=new ue({props:N}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(L,F){b(e,L,F),p(L,n,F),b(t,L,F),p(L,l,F),b(o,L,F),p(L,i,F),b(u,L,F),p(L,s,F),b(a,L,F),f=!0},p(L,F){const M=F&57?Q(c,[c[0],F&48&&{filter:["all",hn,L[4],L[5]]},c[2],c[3],F&8&&{paint:{"circle-color":L[3],"circle-radius":Gt,"circle-opacity":Y(1,.5)}},F&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};F&258&&(M.$$scope={dirty:F,ctx:L}),e.$set(M);const I=F&25?Q(d,[d[0],F&16&&{filter:["all",bn,L[4]]},d[2],d[3],F&8&&{paint:{"line-color":L[3],"line-width":yt,"line-opacity":Y(1,.5)}},F&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};F&258&&(I.$$scope={dirty:F,ctx:L}),t.$set(I);const j=F&1?Q(T,[T[0],T[1],T[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(j);const G=F&25?Q(S,[S[0],F&16&&{filter:["all",Et,L[4]]},S[2],S[3],F&8&&{paint:{"fill-color":L[3],"fill-opacity":Y(.2,.5)}},F&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};F&258&&(G.$$scope={dirty:F,ctx:L}),u.$set(G);const x=F&25?Q(E,[E[0],F&16&&{filter:["all",Et,L[4]]},F&8&&{paint:{"line-color":L[3],"line-opacity":.5,"line-width":.7*yt}},F&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(x)},i(L){f||($(e.$$.fragment,L),$(t.$$.fragment,L),$(o.$$.fragment,L),$(u.$$.fragment,L),$(a.$$.fragment,L),f=!0)},o(L){g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(u.$$.fragment,L),g(a.$$.fragment,L),f=!1},d(L){L&&(m(n),m(l),m(i),m(s)),v(e,L),v(t,L),v(o,L),v(u,L),v(a,L)}}}function g$(r){let e,n;return e=new Pt({props:{data:r[2],$$slots:{default:[_$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function d$(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,{filterText:i}=e,u=Hr();const s=["!=","hide_while_editing",!0],a=["!=","endpoint",!0];return r.$$set=f=>{"schemesGj"in f&&n(6,l=f.schemesGj),"showSchemes"in f&&n(0,o=f.showSchemes),"filterText"in f&&n(1,i=f.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Yr(l))},[o,i,t,u,s,a,l]}class h$ extends U{constructor(e){super(),q(this,e,d$,g$,z,{schemesGj:6,showSchemes:0,filterText:1})}}function $r(r,e,n){const t=r.slice();return t[13]=e[n],t}function b$(r){let e,n;return e=new xc({props:{loadFile:r[7]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pr(r){let e,n,t,l,o,i;function u(_){r[8](_)}function s(_){r[9](_)}function a(_){r[10](_)}function f(_){r[11](_)}let c={schemes:r[2]};return r[1]!==void 0&&(c.schemesGj=r[1]),r[3]!==void 0&&(c.schemesToBeShown=r[3]),r[4]!==void 0&&(c.filterText=r[4]),r[5]!==void 0&&(c.show=r[5]),e=new Ys({props:c}),V.push(()=>X(e,"schemesGj",u)),V.push(()=>X(e,"schemesToBeShown",s)),V.push(()=>X(e,"filterText",a)),V.push(()=>X(e,"show",f)),{c(){h(e.$$.fragment)},m(_,d){b(e,_,d),i=!0},p(_,d){const k={};d&4&&(k.schemes=_[2]),!n&&d&2&&(n=!0,k.schemesGj=_[1],K(()=>n=!1)),!t&&d&8&&(t=!0,k.schemesToBeShown=_[3],K(()=>t=!1)),!l&&d&16&&(l=!0,k.filterText=_[4],K(()=>l=!1)),!o&&d&32&&(o=!0,k.show=_[5],K(()=>o=!1)),e.$set(k)},i(_){i||($(e.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),i=!1},d(_){v(e,_)}}}function mr(r){let e,n;return e=new s$({props:{schemesGj:r[1],scheme:r[13]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[13]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _r(r){let e=r[3].has(r[13].scheme_reference),n,t,l=e&&mr(r);return{c(){l&&l.c(),n=ke()},m(o,i){l&&l.m(o,i),p(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[13].scheme_reference)),e?l?(l.p(o,i),i&12&&$(l,1)):(l=mr(o),l.c(),$(l,1),l.m(n.parentNode,n)):l&&(ie(),g(l,1,1,()=>{l=null}),ae())},i(o){t||($(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l&&l.d(o)}}}function v$(r){let e,n,t,l,o,i,u,s,a,f,c=ln()=="Private (development)",_,d,k,T,O,S,P,E;o=new ol({props:{boundaryGeojson:r[1]}}),u=new El({}),a=new Zr({});let N=c&&b$(r);d=new ll({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),T=new Sr({props:{errorMessage:r[0]}});let L=r[2].size>0&&pr(r),F=je(r[2].values()),M=[];for(let j=0;j<F.length;j+=1)M[j]=_r($r(r,F,j));const I=j=>g(M[j],1,1,()=>{M[j]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),N&&N.c(),_=C(),h(d.$$.fragment),k=C(),h(T.$$.fragment),O=C(),L&&L.c(),S=C(),P=A("ul");for(let j=0;j<M.length;j+=1)M[j].c();he(n,"display","flex"),he(n,"justify-content","space-between"),H(e,"slot","sidebar"),H(e,"class","govuk-prose")},m(j,G){p(j,e,G),y(e,n),y(n,t),y(n,l),b(o,n,null),y(e,i),b(u,e,null),y(e,s),b(a,e,null),y(e,f),N&&N.m(e,null),y(e,_),b(d,e,null),y(e,k),b(T,e,null),y(e,O),L&&L.m(e,null),y(e,S),y(e,P);for(let x=0;x<M.length;x+=1)M[x]&&M[x].m(P,null);E=!0},p(j,G){const x={};G&2&&(x.boundaryGeojson=j[1]),o.$set(x),c&&N.p(j,G);const D={};if(G&1&&(D.errorMessage=j[0]),T.$set(D),j[2].size>0?L?(L.p(j,G),G&4&&$(L,1)):(L=pr(j),L.c(),$(L,1),L.m(e,S)):L&&(ie(),g(L,1,1,()=>{L=null}),ae()),G&14){F=je(j[2].values());let J;for(J=0;J<F.length;J+=1){const $e=$r(j,F,J);M[J]?(M[J].p($e,G),$(M[J],1)):(M[J]=_r($e),M[J].c(),$(M[J],1),M[J].m(P,null))}for(ie(),J=F.length;J<M.length;J+=1)I(J);ae()}},i(j){if(!E){$(o.$$.fragment,j),$(u.$$.fragment,j),$(a.$$.fragment,j),$(N),$(d.$$.fragment,j),$(T.$$.fragment,j),$(L);for(let G=0;G<F.length;G+=1)$(M[G]);E=!0}},o(j){g(o.$$.fragment,j),g(u.$$.fragment,j),g(a.$$.fragment,j),g(N),g(d.$$.fragment,j),g(T.$$.fragment,j),g(L),M=M.filter(Boolean);for(let G=0;G<M.length;G+=1)g(M[G]);E=!1},d(j){j&&m(e),v(o),v(u),v(a),N&&N.d(),v(d),v(T),L&&L.d(),Ct(M,j)}}}function w$(r){let e,n,t,l,o,i,u;return e=new rl({}),t=new h$({props:{schemesGj:r[1],filterText:r[4],showSchemes:r[5]}}),i=new Zc({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),o=A("div"),h(i.$$.fragment),H(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),p(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&2&&(f.schemesGj=s[1]),a&16&&(f.filterText=s[4]),a&32&&(f.showSchemes=s[5]),t.$set(f)},i(s){u||($(e.$$.fragment,s),$(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),v(i)}}}function k$(r){let e,n,t;return n=new Qr({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[w$]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),H(e,"slot","main")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.style=l[6]),o&65586&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function y$(r){let e,n;return e=new il({props:{$$slots:{main:[k$],sidebar:[v$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&65663&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function S$(r,e,n){let t;Re(r,vn,O=>n(6,t=O)),an(()=>{xr()});const l=new URLSearchParams(window.location.search);vn.set(l.get("style")||"dataviz");let o="",i={type:"FeatureCollection",features:[],schemes:{}},u=new Map,s=new Set,a="",f=!0;function c(O){try{n(1,i=JSON.parse(O)),n(2,u=Ds(i)),n(0,o="")}catch(S){n(0,o=`The file you loaded is broken: ${S}`)}}function _(O){i=O,n(1,i)}function d(O){s=O,n(3,s)}function k(O){a=O,n(4,a)}function T(O){f=O,n(5,f)}return[o,i,u,s,a,f,t,c,_,d,k,T]}class T$ extends U{constructor(e){super(),q(this,e,S$,y$,z,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new T$({target:document.getElementById("app")});
