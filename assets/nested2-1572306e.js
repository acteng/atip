import{S as J,i as K,s as X,e as T,j as U,ao as Te,k as $,a7 as re,p,aU as Kl,b as W,c as Y,f as O,h as b,m as v,x as ot,n as V,t as g,o as d,q as w,O as wt,T as kt,U as yt,V as St,b3 as Jn,l as h,ab as je,_ as ce,$ as $e,aX as pt,v as k,J as z,Z as Ne,a0 as zn,a1 as Zl,r as x,a2 as Ql,a3 as xl,a4 as Re,a5 as eo,a6 as to,b4 as Lo,Y as At,b5 as Kn,b6 as Ao,G as Tt,aO as On,aF as Ln,P as ee,I as Le,a as ut,aT as Po,av as mt,aj as qn,an as Ot,u as Bn,F as An,w as rt,b2 as te,b7 as be,b8 as Ae,H as Q,D as Ge,W as ne,b9 as ae,ag as cn,N as no,aZ as nn,ba as gn,bb as vt,R as ro,E as lo,bc as Io,bd as No,g as Pn,a$ as Mo,al as Do,C as Fo,b0 as Zn,ap as Eo,aq as Qn,ar as xn,as as an,b1 as er,L as Ro,d as jo,M as zo,z as qo}from"./index-ea911efa.js";import{l as H,d as lt,a as Bo,g as qe,f as Ho,M as Uo,k as ht,h as it,i as oe,R as Go,C as _t,m as Wo,S as Yo,B as Vo,c as tr,b as Zt,Z as Xo,G as Jo}from"./ZoomOutMap-ea9874e3.js";import{P as fe}from"./Popup-16cafb05.js";function Ko(r){let e;return{c(){e=T("span"),U(e,"class","svelte-kzgqtg"),Te(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Te(e,"background",n[0])},i:re,o:re,d(n){n&&p(e)}}}function Zo(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class De extends J{constructor(e){super(),K(this,e,Zo,Ko,X,{color:0})}}const Qo="/atip/assets/help-d011708a.svg";function xo(r){let e,n;const t=r[1].default,l=wt(t,r,r[4],null);return{c(){e=T("div"),l&&l.c(),U(e,"class","govuk-prose")},m(o,s){$(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&kt(l,t,o,o[4],n?St(t,o[4],s,null):yt(o[4]),null)},i(o){n||(g(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function es(r){let e,n,t,l,o,s,f;function i(u){r[3](u)}let a={title:"Help",$$slots:{default:[xo]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Kl({props:a}),W.push(()=>Y(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${Qo}" title="Help" alt="Help"/>`,n=O(),b(t.$$.fragment),U(e,"class","svelte-7d9d1l")},m(u,c){$(u,e,c),$(u,n,c),v(t,u,c),o=!0,s||(f=ot(e,"click",r[2]),s=!0)},p(u,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,_.open=u[0],V(()=>l=!1)),t.$set(_)},i(u){o||(g(t.$$.fragment,u),o=!0)},o(u){d(t.$$.fragment,u),o=!1},d(u){u&&(p(e),p(n)),w(t,u),s=!1,f()}}}function ts(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function f(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,f,l]}class _e extends J{constructor(e){super(),K(this,e,ts,es,X,{})}}const ns=r=>({}),nr=r=>({}),rs=r=>({}),rr=r=>({});function ls(r){let e,n,t,l,o,s,f,i,a,u,c;const _=r[4].sidebar,m=wt(_,r,r[3],rr),S=r[4].main,C=wt(S,r,r[3],nr);return{c(){e=T("div"),n=T("aside"),t=T("div"),m&&m.c(),l=O(),o=T("button"),o.textContent="â†’",f=O(),i=T("main"),C&&C.c(),U(t,"class","sidebar-content content-container svelte-1n0etgd"),U(o,"type","button"),U(o,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),U(n,"class",s=Jn(r[1]?"":"collapsed")+" svelte-1n0etgd"),Te(n,"--sidebarWidth",r[0]),U(i,"class","svelte-1n0etgd"),U(e,"class","overall-layout svelte-1n0etgd")},m(y,I){$(y,e,I),h(e,n),h(n,t),m&&m.m(t,null),h(n,l),h(n,o),h(e,f),h(e,i),C&&C.m(i,null),a=!0,u||(c=ot(o,"click",r[2]),u=!0)},p(y,[I]){m&&m.p&&(!a||I&8)&&kt(m,_,y,y[3],a?St(_,y[3],I,rs):yt(y[3]),rr),(!a||I&2&&s!==(s=Jn(y[1]?"":"collapsed")+" svelte-1n0etgd"))&&U(n,"class",s),(!a||I&1)&&Te(n,"--sidebarWidth",y[0]),C&&C.p&&(!a||I&8)&&kt(C,S,y,y[3],a?St(S,y[3],I,ns):yt(y[3]),nr)},i(y){a||(g(m,y),g(C,y),a=!0)},o(y){d(m,y),d(C,y),a=!1},d(y){y&&p(e),m&&m.d(y),C&&C.d(y),u=!1,c()}}}function os(r,e,n){let{$$slots:t={},$$scope:l}=e,{sidebarWidth:o="25rem"}=e,s=!0;function f(){n(1,s=!s)}return r.$$set=i=>{"sidebarWidth"in i&&n(0,o=i.sidebarWidth),"$$scope"in i&&n(3,l=i.$$scope)},[o,s,f,l,t]}class ss extends J{constructor(e){super(),K(this,e,os,ls,X,{sidebarWidth:0})}}function lr(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function or(r){let e,n,t,l=r[1]+"",o,s,f;return n=new De({props:{color:r[2]}}),{c(){e=T("li"),b(n.$$.fragment),t=O(),o=k(l),s=O()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),n.$set(u),(!f||a&1)&&l!==(l=i[1]+"")&&z(o,l)},i(i){f||(g(n.$$.fragment,i),f=!0)},o(i){d(n.$$.fragment,i),f=!1},d(i){i&&p(e),w(n)}}}function is(r){let e,n,t=je(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=or(lr(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){e=T("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,f){$(s,e,f);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[f]){if(f&1){t=je(s[0]);let i;for(i=0;i<t.length;i+=1){const a=lr(s,t,i);l[i]?(l[i].p(a,f),g(l[i],1)):(l[i]=or(a),l[i].c(),g(l[i],1),l[i].m(e,null))}for(ce(),i=t.length;i<l.length;i+=1)o(i);$e()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)g(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)d(l[f]);n=!1},d(s){s&&p(e),pt(l,s)}}}function as(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class Hn extends J{constructor(e){super(),K(this,e,as,is,X,{rows:0})}}function sr(r){let e=r[0],n,t,l=ir(r);return{c(){l.c(),n=Ne()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&X(e,e=o[0])?(ce(),d(l,1,1,re),$e(),l=ir(o),l.c(),g(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(g(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function ir(r){let e;const n=r[16].default,t=wt(n,r,r[15],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&32768)&&kt(t,n,l,l[15],e?St(n,l[15],o,null):yt(l[15]),null)},i(l){e||(g(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function fs(r){let e,n,t=r[0]&&sr(r);return{c(){t&&t.c(),e=Ne()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&g(t,1)):(t=sr(l),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(l){n||(g(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function us(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=zn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:_=null}=e,{minzoom:m=null}=e,{maxzoom:S=null}=e,{volatile:C=null}=e;const{map:y,self:I}=Zl();x(r,y,A=>n(14,l=A)),x(r,I,A=>n(0,t=A));let E,N=!0;return Ql(()=>{t&&E&&l&&(xl(y,t,E),Re(I,t=null,t),n(12,E=void 0))}),r.$$set=A=>{"id"in A&&n(3,f=A.id),"tiles"in A&&n(4,i=A.tiles),"tileSize"in A&&n(5,a=A.tileSize),"bounds"in A&&n(6,u=A.bounds),"scheme"in A&&n(7,c=A.scheme),"attribution"in A&&n(8,_=A.attribution),"minzoom"in A&&n(9,m=A.minzoom),"maxzoom"in A&&n(10,S=A.maxzoom),"volatile"in A&&n(11,C=A.volatile),"$$scope"in A&&n(15,s=A.$$scope)},r.$$.update=()=>{r.$$.dirty&24569&&l&&t!==f&&(Re(I,t=f,t),eo(l,t,to({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:_,minzoom:m,maxzoom:S,volatile:C}),A=>l&&A===t,()=>{t&&(n(12,E=l==null?void 0:l.getSource(t)),n(13,N=!0))})),r.$$.dirty&16392&&(l==null||l.on("style.load",()=>{n(12,E=l==null?void 0:l.getSource(f))})),r.$$.dirty&12304&&E&&(N?n(13,N=!1):E.setTiles(i))},[t,y,I,f,i,a,u,c,_,m,S,C,E,N,l,s,o]}class cs extends J{constructor(e){super(),K(this,e,us,fs,X,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function $s(r){let e;const n=r[16].default,t=wt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&kt(t,n,l,l[24],e?St(n,l[24],o,null):yt(l[24]),null)},i(l){e||(g(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function ps(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[$s]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Lo({props:o}),W.push(()=>Y(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,i.hovered=s[0],V(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function ms(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=zn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:S=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:y=void 0}=e,{manageHoverState:I=!1}=e,{hovered:E=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:A=!0}=e;function L(R){E=R,n(0,E)}function M(R){At.call(this,r,R)}function F(R){At.call(this,r,R)}function P(R){At.call(this,r,R)}function j(R){At.call(this,r,R)}function G(R){At.call(this,r,R)}function B(R){At.call(this,r,R)}return r.$$set=R=>{"id"in R&&n(1,o=R.id),"source"in R&&n(2,s=R.source),"sourceLayer"in R&&n(3,f=R.sourceLayer),"beforeId"in R&&n(4,i=R.beforeId),"beforeLayerType"in R&&n(5,a=R.beforeLayerType),"paint"in R&&n(6,u=R.paint),"layout"in R&&n(7,c=R.layout),"filter"in R&&n(8,_=R.filter),"applyToClusters"in R&&n(9,m=R.applyToClusters),"minzoom"in R&&n(10,S=R.minzoom),"maxzoom"in R&&n(11,C=R.maxzoom),"hoverCursor"in R&&n(12,y=R.hoverCursor),"manageHoverState"in R&&n(13,I=R.manageHoverState),"hovered"in R&&n(0,E=R.hovered),"eventsIfTopMost"in R&&n(14,N=R.eventsIfTopMost),"interactive"in R&&n(15,A=R.interactive),"$$scope"in R&&n(24,l=R.$$scope)},[E,o,s,f,i,a,u,c,_,m,S,C,y,I,N,A,t,L,M,F,P,j,G,B,l]}class dn extends J{constructor(e){super(),K(this,e,ms,ps,X,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function ar(r){let e=r[0],n,t,l=fr(r);return{c(){l.c(),n=Ne()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&X(e,e=o[0])?(ce(),d(l,1,1,re),$e(),l=fr(o),l.c(),g(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(g(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function fr(r){let e;const n=r[15].default,t=wt(n,r,r[14],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16384)&&kt(t,n,l,l[14],e?St(n,l[14],o,null):yt(l[14]),null)},i(l){e||(g(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function _s(r){let e,n,t=r[0]&&ar(r);return{c(){t&&t.c(),e=Ne()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&g(t,1)):(t=ar(l),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(l){n||(g(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function gs(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=zn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:_=null}=e,{attribution:m=null}=e,{minzoom:S=null}=e,{maxzoom:C=null}=e,{volatile:y=null}=e;if(i&&i.includes("pmtiles://")&&!Kn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let A=new Ao;Kn.addProtocol("pmtiles",A.tile)}const{map:I,self:E}=Zl();x(r,I,A=>n(13,l=A)),x(r,E,A=>n(0,t=A));let N;return Ql(()=>{t&&l&&(xl(I,t,N),Re(E,t=null,t),N=void 0)}),r.$$set=A=>{"id"in A&&n(3,f=A.id),"url"in A&&n(4,i=A.url),"tiles"in A&&n(5,a=A.tiles),"promoteId"in A&&n(6,u=A.promoteId),"bounds"in A&&n(7,c=A.bounds),"scheme"in A&&n(8,_=A.scheme),"attribution"in A&&n(9,m=A.attribution),"minzoom"in A&&n(10,S=A.minzoom),"maxzoom"in A&&n(11,C=A.maxzoom),"volatile"in A&&n(12,y=A.volatile),"$$scope"in A&&n(14,s=A.$$scope)},r.$$.update=()=>{r.$$.dirty&16377&&l&&t!==f&&(Re(E,t=f,t),eo(l,t,to({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:_,attribution:m,minzoom:S,maxzoom:C,volatile:y}),A=>l&&A===t,()=>{t&&(N=l==null?void 0:l.getSource(t))})),r.$$.dirty&8200&&(l==null||l.on("style.load",()=>{N=l==null?void 0:l.getSource(f)}))},[t,I,E,f,i,a,u,c,_,m,S,C,y,l,s,o]}class ye extends J{constructor(e){super(),K(this,e,gs,_s,X,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function ur(r,e,n){const t=r.slice();return t[11]=e[n],t[12]=e,t[13]=n,t}function ds(r){let e,n,t;return n=new ut({props:{$$slots:{default:[bs]},$$scope:{ctx:r}}}),n.$on("click",r[9]),{c(){e=T("div"),b(n.$$.fragment)},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16384&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function hs(r){let e,n,t,l,o,s,f,i,a,u;n=new ut({props:{$$slots:{default:[vs]},$$scope:{ctx:r}}}),n.$on("click",r[4]);let c=r[2]&&cr(r);o=new qe({props:{label:"Help",$$slots:{default:[ws]},$$scope:{ctx:r}}}),f=new Ho({}),f.$on("click",r[3]);let _=je(r[0]),m=[];for(let C=0;C<_.length;C+=1)m[C]=$r(ur(r,_,C));const S=C=>d(m[C],1,1,()=>{m[C]=null});return{c(){e=T("div"),b(n.$$.fragment),t=O(),c&&c.c(),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O();for(let C=0;C<m.length;C+=1)m[C].c();a=Ne()},m(C,y){$(C,e,y),v(n,e,null),$(C,t,y),c&&c.m(C,y),$(C,l,y),v(o,C,y),$(C,s,y),v(f,C,y),$(C,i,y);for(let I=0;I<m.length;I+=1)m[I]&&m[I].m(C,y);$(C,a,y),u=!0},p(C,y){const I={};y&16384&&(I.$$scope={dirty:y,ctx:C}),n.$set(I),C[2]?c?c.p(C,y):(c=cr(C),c.c(),c.m(l.parentNode,l)):c&&(c.d(1),c=null);const E={};if(y&16384&&(E.$$scope={dirty:y,ctx:C}),o.$set(E),y&65){_=je(C[0]);let N;for(N=0;N<_.length;N+=1){const A=ur(C,_,N);m[N]?(m[N].p(A,y),g(m[N],1)):(m[N]=$r(A),m[N].c(),g(m[N],1),m[N].m(a.parentNode,a))}for(ce(),N=_.length;N<m.length;N+=1)S(N);$e()}},i(C){if(!u){g(n.$$.fragment,C),g(o.$$.fragment,C),g(f.$$.fragment,C);for(let y=0;y<_.length;y+=1)g(m[y]);u=!0}},o(C){d(n.$$.fragment,C),d(o.$$.fragment,C),d(f.$$.fragment,C),m=m.filter(Boolean);for(let y=0;y<m.length;y+=1)d(m[y]);u=!1},d(C){C&&(p(e),p(t),p(l),p(s),p(i),p(a)),w(n),c&&c.d(C),w(o,C),w(f,C),pt(m,C)}}}function bs(r){let e;return{c(){e=k("Measure lines")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vs(r){let e;return{c(){e=k("Stop measuring")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cr(r){let e,n,t=r[2].toFixed(2)+"",l,o;return{c(){e=T("p"),n=k("Length: "),l=k(t),o=k(" meters")},m(s,f){$(s,e,f),h(e,n),h(e,l),h(e,o)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&z(l,t)},d(s){s&&p(e)}}}function ws(r){let e;return{c(){e=T("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){$(n,e,t)},p:re,d(n){n&&p(e)}}}function ks(r){let e,n;return{c(){e=T("span"),n=O(),U(e,"class","dot svelte-1tzt432")},m(t,l){$(t,e,l),$(t,n,l)},p:re,d(t){t&&(p(e),p(n))}}}function $r(r){let e,n,t;function l(f){r[7](f,r[11],r[12],r[13])}function o(){return r[8](r[13])}let s={draggable:!0,$$slots:{default:[ks]},$$scope:{ctx:r}};return r[11]!==void 0&&(s.lngLat=r[11]),e=new Uo({props:s}),W.push(()=>Y(e,"lngLat",l)),e.$on("click",o),{c(){b(e.$$.fragment)},m(f,i){v(e,f,i),t=!0},p(f,i){r=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:r}),!n&&i&1&&(n=!0,a.lngLat=r[11],V(()=>n=!1)),e.$set(a)},i(f){t||(g(e.$$.fragment,f),t=!0)},o(f){d(e.$$.fragment,f),t=!1},d(f){w(e,f)}}}function ys(r){let e,n;const t=[H("measurement-line"),{paint:{"line-color":lt.measuringLine,"line-width":5}}];let l={};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f={};e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Ss(r){let e,n,t,l,o,s,f;const i=[hs,ds],a=[];function u(c,_){return c[1]?0:1}return e=u(r),n=a[e]=i[e](r),l=new Tt({props:{data:r[0].length<2?On():Ln(r[0]),$$slots:{default:[ys]},$$scope:{ctx:r}}}),{c(){n.c(),t=O(),b(l.$$.fragment)},m(c,_){a[e].m(c,_),$(c,t,_),v(l,c,_),o=!0,s||(f=ot(window,"keydown",r[5]),s=!0)},p(c,[_]){let m=e;e=u(c),e===m?a[e].p(c,_):(ce(),d(a[m],1,1,()=>{a[m]=null}),$e(),n=a[e],n?n.p(c,_):(n=a[e]=i[e](c),n.c()),g(n,1),n.m(t.parentNode,t));const S={};_&1&&(S.data=c[0].length<2?On():Ln(c[0])),_&16384&&(S.$$scope={dirty:_,ctx:c}),l.$set(S)},i(c){o||(g(n),g(l.$$.fragment,c),o=!0)},o(c){d(n),d(l.$$.fragment,c),o=!1},d(c){c&&p(t),a[e].d(c),w(l,c),s=!1,f()}}}function Cs(r,e,n){let t,l=!1,o=[];function s(S){return S.length<2?null:1e3*Bo(Ln(S),{units:"kilometers"})}function f(S){n(0,o=[...o,S.detail.lngLat.toArray()])}function i(){n(1,l=!1),n(0,o=[])}function a(S){l&&S.key==="Escape"&&(S.stopPropagation(),i())}function u(S){o.splice(S,1),n(0,o)}function c(S,C,y,I){y[I]=S,n(0,o)}const _=S=>u(S),m=()=>n(1,l=!0);return r.$$.update=()=>{r.$$.dirty&1&&n(2,t=s(o))},[o,l,t,f,i,a,u,c,_,m]}class Ts extends J{constructor(e){super(),K(this,e,Cs,Ss,X,{})}}const Os={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Be=Uint8Array,bt=Uint16Array,oo=Uint32Array,so=new Be([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),io=new Be([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ls=new Be([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ao=function(r,e){for(var n=new bt(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new oo(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},fo=ao(so,2),uo=fo[0],As=fo[1];uo[28]=258,As[258]=28;var Ps=ao(io,0),Is=Ps[0],In=new bt(32768);for(var ke=0;ke<32768;++ke){var ct=(ke&43690)>>>1|(ke&21845)<<1;ct=(ct&52428)>>>2|(ct&13107)<<2,ct=(ct&61680)>>>4|(ct&3855)<<4,In[ke]=((ct&65280)>>>8|(ct&255)<<8)>>>1}var tn=function(r,e,n){for(var t=r.length,l=0,o=new bt(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new bt(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var f;if(n){f=new bt(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],u=e-r[l],c=s[r[l]-1]++<<u,_=c|(1<<u)-1;c<=_;++c)f[In[c]>>>i]=a}else for(f=new bt(t),l=0;l<t;++l)r[l]&&(f[l]=In[s[r[l]-1]++]>>>15-r[l]);return f},on=new Be(288);for(var ke=0;ke<144;++ke)on[ke]=8;for(var ke=144;ke<256;++ke)on[ke]=9;for(var ke=256;ke<280;++ke)on[ke]=7;for(var ke=280;ke<288;++ke)on[ke]=8;var co=new Be(32);for(var ke=0;ke<32;++ke)co[ke]=5;var Ns=tn(on,9,1),Ms=tn(co,5,1),hn=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Ye=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},bn=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Ds=function(r){return(r+7)/8|0},Un=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?bt:r.BYTES_PER_ELEMENT==4?oo:Be)(n-e);return t.set(r.subarray(e,n)),t},Fs=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ve=function(r,e,n){var t=new Error(e||Fs[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Ve),!n)throw t;return t},Es=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Be(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Be(t*3));var s=function(de){var we=e.length;if(de>we){var ge=new Be(Math.max(we*2,de));ge.set(e),e=ge}},f=n.f||0,i=n.p||0,a=n.b||0,u=n.l,c=n.d,_=n.m,m=n.n,S=t*8;do{if(!u){f=Ye(r,i,1);var C=Ye(r,i+1,3);if(i+=3,C)if(C==1)u=Ns,c=Ms,_=9,m=5;else if(C==2){var N=Ye(r,i,31)+257,A=Ye(r,i+10,15)+4,L=N+Ye(r,i+5,31)+1;i+=14;for(var M=new Be(L),F=new Be(19),P=0;P<A;++P)F[Ls[P]]=Ye(r,i+P*3,7);i+=A*3;for(var j=hn(F),G=(1<<j)-1,B=tn(F,j,1),P=0;P<L;){var R=B[Ye(r,i,G)];i+=R&15;var y=R>>>4;if(y<16)M[P++]=y;else{var D=0,q=0;for(y==16?(q=3+Ye(r,i,3),i+=2,D=M[P-1]):y==17?(q=3+Ye(r,i,7),i+=3):y==18&&(q=11+Ye(r,i,127),i+=7);q--;)M[P++]=D}}var se=M.subarray(0,N),pe=M.subarray(N);_=hn(se),m=hn(pe),u=tn(se,_,1),c=tn(pe,m,1)}else Ve(1);else{var y=Ds(i)+4,I=r[y-4]|r[y-3]<<8,E=y+I;if(E>t){o&&Ve(0);break}l&&s(a+I),e.set(r.subarray(y,E),a),n.b=a+=I,n.p=i=E*8,n.f=f;continue}if(i>S){o&&Ve(0);break}}l&&s(a+131072);for(var Se=(1<<_)-1,he=(1<<m)-1,Ce=i;;Ce=i){var D=u[bn(r,i)&Se],ie=D>>>4;if(i+=D&15,i>S){o&&Ve(0);break}if(D||Ve(2),ie<256)e[a++]=ie;else if(ie==256){Ce=i,u=null;break}else{var Me=ie-254;if(ie>264){var P=ie-257,Oe=so[P];Me=Ye(r,i,(1<<Oe)-1)+uo[P],i+=Oe}var ve=c[bn(r,i)&he],le=ve>>>4;ve||Ve(3),i+=ve&15;var pe=Is[le];if(le>3){var Oe=io[le];pe+=bn(r,i)&(1<<Oe)-1,i+=Oe}if(i>S){o&&Ve(0);break}l&&s(a+131072);for(var me=a+Me;a<me;a+=4)e[a]=e[a-pe],e[a+1]=e[a+1-pe],e[a+2]=e[a+2-pe],e[a+3]=e[a+3-pe];a=me}}n.l=u,n.p=Ce,n.b=a,n.f=f,u&&(f=1,n.m=_,n.d=c,n.n=m)}while(!f);return a==e.length?e:Un(e,0,a)},Rs=new Be(0),nt=function(r,e){return r[e]|r[e+1]<<8},Xe=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},vn=function(r,e){return Xe(r,e)+Xe(r,e+4)*4294967296};function js(r,e){return Es(r,e)}var Nn=typeof TextDecoder<"u"&&new TextDecoder,zs=0;try{Nn.decode(Rs,{stream:!0}),zs=1}catch{}var qs=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,Un(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function $o(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(Nn)return Nn.decode(r);var l=qs(r),o=l[0],s=l[1];return s.length&&Ve(8),o}}var Bs=function(r,e){return e+30+nt(r,e+26)+nt(r,e+28)},Hs=function(r,e,n){var t=nt(r,e+28),l=$o(r.subarray(e+46,e+46+t),!(nt(r,e+8)&2048)),o=e+46+t,s=Xe(r,e+20),f=n&&s==4294967295?Us(r,o):[s,Xe(r,e+24),Xe(r,e+42)],i=f[0],a=f[1],u=f[2];return[nt(r,e+10),i,a,l,o+nt(r,e+30)+nt(r,e+32),u]},Us=function(r,e){for(;nt(r,e)!=1;e+=4+nt(r,e+2));return[vn(r,e+12),vn(r,e+4),vn(r,e+20)]};function Gs(r,e){for(var n={},t=r.length-22;Xe(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Ve(13);var l=nt(r,t+8);if(!l)return{};var o=Xe(r,t+16),s=o==4294967295||l==65535;if(s){var f=Xe(r,t-12);s=Xe(r,f)==101075792,s&&(l=Xe(r,f+32),o=Xe(r,f+48))}for(var i=e&&e.filter,a=0;a<l;++a){var u=Hs(r,o,s),c=u[0],_=u[1],m=u[2],S=u[3],C=u[4],y=u[5],I=Bs(r,y);o=C,(!i||i({name:S,size:_,originalSize:m,compression:c}))&&(c?c==8?n[S]=js(r.subarray(I,I+_),new Be(m)):Ve(14,"unknown compression type "+c):n[S]=Un(r,I,I+_))}return n}function Ws(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(wn):wn(r)}function wn(r){var e=new Uint8Array(r),n=Gs(e);return Promise.resolve(Ys(n))}function Ys(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=$o(r[l])}return e}function st(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Ct(t)===e)return t;n++}}function sn(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Ct(l)===e&&n.push(l),t++}return n}function $n(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Ct(l)===e&&n(l,t):n(l,t),t++}}function Vs(r,e,n){var t=[];return $n(r,e,function(l,o){t.push(n(l,o))}),t}var Xs=/.+\:/;function Ct(r){return r.tagName.replace(Xs,"")}function po(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Ct(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=po(r.childNodes[t]),t++;return e+="</"+Ct(r)+">",e}function Js(r){var e=r.documentElement,n=st(e,"sheetData"),t=[];return $n(n,"row",function(l){$n(l,"c",function(o){t.push(o)})}),t}function Ks(r,e){return st(e,"v")}function Zs(r,e){if(e.firstChild&&Ct(e.firstChild)==="is"&&e.firstChild.firstChild&&Ct(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Qs(r){var e=r.documentElement,n=st(e,"dimension");if(n)return n.getAttribute("ref")}function xs(r){var e=r.documentElement,n=st(e,"cellStyleXfs");return n?sn(n,"xf"):[]}function ei(r){var e=r.documentElement,n=st(e,"cellXfs");return n?sn(n,"xf"):[]}function ti(r){var e=r.documentElement,n=st(e,"numFmts");return n?sn(n,"numFmt"):[]}function ni(r){var e=r.documentElement;return Vs(e,"si",function(n){var t=st(n,"t");if(t)return t.textContent;var l="";return $n(n,"r",function(o){l+=st(o,"t").textContent}),l})}function ri(r){var e=r.documentElement;return st(e,"workbookPr")}function li(r){var e=r.documentElement;return sn(e,"Relationship")}function oi(r){var e=r.documentElement,n=st(e,"sheets");return sn(n,"sheet")}function si(r,e){var n=e.createDocument(r),t={},l=ri(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(f){f.getAttribute("name")&&t.sheets.push({id:f.getAttribute("sheetId"),name:f.getAttribute("name"),relationId:f.getAttribute("r:id")})};return oi(n).forEach(o),t}function ii(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var f=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=kn(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=kn(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=kn(f);break}};return li(n).forEach(l),t}function kn(r){return r[0]==="/"?r.slice(1):"xl/"+r}function pr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function mr(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pr(Object(n),!0).forEach(function(t){ai(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ai(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function fi(r,e){if(!r)return{};var n=e.createDocument(r),t=xs(n).map(yn),l=ti(n).map(ui).reduce(function(s,f){return s[f.id]=f,s},[]),o=function(f){return f.hasAttribute("xfId")?mr(mr({},t[f.xfId]),yn(f,l)):yn(f,l)};return ei(n).map(o)}function ui(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function yn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function ci(r,e){return r?ni(e.createDocument(r)):[]}function mo(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function $i(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=pi(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pi(r,e){if(r){if(typeof r=="string")return _r(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(r,e)}}function _r(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function mi(r,e,n){if(r){var t=e[r];if(!t)throw new Error("Cell style not found: ".concat(r));if(!t.numberFormat)return!1;if(_i.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&hi(t.numberFormat.template))return!0}}var _i=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],gi=/^\[\$-414\]/,di=/;@$/;function hi(r){r=r.toLowerCase(),r=r.replace(gi,""),r=r.replace(di,"");for(var e=r.split(/\W+/),n=$i(e),t;!(t=n()).done;){var l=t.value;if(bi.indexOf(l)<0)return!1}return!0}var bi=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function vi(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,f=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Sn(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Sn(r,a);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=f.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=f[u],r=Sn(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=wi(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var _=mi(o(),s,a);_?(r=gr(r),r=mo(r,i)):r=(a.parseNumber||gr)(r);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function wi(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Sn(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}function gr(r){var e=Number(r);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(r));return e}var ki=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function yi(r){var e=function(a,u){return a-u},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],f=t[t.length-1];return[{row:l,column:s},{row:o,column:f}]}function Si(r){for(var e=0,n=0;n<r.length;)e*=26,e+=ki.indexOf(r[n]),n++;return e}function _o(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Si(r[0].trim())]}function Ci(r,e,n,t,l,o,s){var f=_o(r.getAttribute("r")),i=Ks(e,r),a=i&&i.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:f[0],column:f[1],value:vi(a,u,{getInlineStringValue:function(){return Zs(e,r)},getInlineStringXml:function(){return po(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function Ti(r,e,n,t,l,o){var s=Js(r);return s.length===0?[]:s.map(function(f){return Ci(f,r,e,n,t,l,o)})}function Oi(r,e){return Ii(r)||Pi(r,e)||Ai(r,e)||Li()}function Li(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ai(r,e){if(r){if(typeof r=="string")return dr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(r,e)}}function dr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Pi(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Ii(r){if(Array.isArray(r))return r}function Ni(r){var e=Qs(r);if(e)return e=e.split(":").map(_o).map(function(n){var t=Oi(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Mi(r,e,n,t,l,o){var s=e.createDocument(r),f=Ti(s,e,n,t,l,o),i=Ni(s)||yi(f);return{cells:f,dimensions:i}}function Di(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Fi(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fi(r,e){if(r){if(typeof r=="string")return hr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hr(r,e)}}function hr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ei(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var f=!0,i=Di(r[s]),a;!(a=i()).done;){var u=a.value;if(l(u)!==null){f=!1;break}}if(f)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function Ri(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ji(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ji(r,e){if(r){if(typeof r=="string")return br(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return br(r,e)}}function br(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function zi(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,f=Ri(r),i;!(i=f()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var u=0;u<r.length;)r[u].splice(o,1),u++;else if(l)break;o--}return r}function qi(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=go(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bi(r,e){return Gi(r)||Ui(r,e)||go(r,e)||Hi()}function Hi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function go(r,e){if(r){if(typeof r=="string")return vr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vr(r,e)}}function vr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ui(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Gi(r){if(Array.isArray(r))return r}function Wi(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Bi(n,2);l[0];for(var o=l[1],s=o.column,f=o.row,i=new Array(f),a=0;a<f;){i[a]=new Array(s);for(var u=0;u<s;)i[a][u]=null,u++;a++}for(var c=qi(t),_;!(_=c()).done;){var m=_.value,S=m.row-1,C=m.column-1;C<s&&S<f&&(i[S][C]=m.value)}var y=e.rowMap;if(y)for(var I=0;I<i.length;)y[I]=I,I++;return i=Ei(zi(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:y}),e.transformData&&(i=e.transformData(i)),i}function Yi(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Vi(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vi(r,e){if(r){if(typeof r=="string")return wr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wr(r,e)}}function wr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function kr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Xi(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kr(Object(n),!0).forEach(function(t){Ji(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ji(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ki(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Xi({sheet:1},n));var t=function(_){if(!r[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return r[_]},l=ii(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?ci(t(l.sharedStrings),e):[],s=l.styles?fi(t(l.styles),e):{},f=si(t("xl/workbook.xml"),e);if(n.getSheets)return f.sheets.map(function(c){var _=c.name;return{name:_}});var i=Zi(n.sheet,f.sheets);if(!i||!l.sheets[i])throw Qi(n.sheet,f.sheets);var a=Mi(t(l.sheets[i]),e,o,s,f,n),u=Wi(a,n);return n.properties?{data:u,properties:f}:u}function Zi(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Yi(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Qi(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Mn(r){"@babel/helpers - typeof";return Mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn(r)}function yr(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function xi(r,e,n){return e&&yr(r.prototype,e),n&&yr(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function ea(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ta(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&rn(r,e)}function na(r){var e=ho();return function(){var t=ln(r),l;if(e){var o=ln(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return ra(this,l)}}function ra(r,e){if(e&&(Mn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return la(r)}function la(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Dn(r){var e=typeof Map=="function"?new Map:void 0;return Dn=function(t){if(t===null||!oa(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return un(t,arguments,ln(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),rn(l,t)},Dn(r)}function un(r,e,n){return ho()?un=Reflect.construct:un=function(l,o,s){var f=[null];f.push.apply(f,o);var i=Function.bind.apply(l,f),a=new i;return s&&rn(a,s.prototype),a},un.apply(null,arguments)}function ho(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oa(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function rn(r,e){return rn=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},rn(r,e)}function ln(r){return ln=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ln(r)}var He=function(r){ta(n,r);var e=na(n);function n(t){var l;return ea(this,n),l=e.call(this,"invalid"),l.reason=t,l}return xi(n)}(Dn(Error));function sa(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new He("not_a_number")}if(typeof r!="number")throw new He("not_a_number");if(isNaN(r))throw new He("invalid_number");if(!isFinite(r))throw new He("out_of_bounds");return r}function ia(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new He("invalid_number");if(!isFinite(r))throw new He("out_of_bounds");return String(r)}throw new He("not_a_string")}function aa(r){if(typeof r=="boolean")return r;throw new He("not_a_boolean")}function fa(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new He("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new He("invalid_number");if(!isFinite(r))throw new He("out_of_bounds");var t=mo(r,n);if(isNaN(t.valueOf()))throw new He("out_of_bounds");return t}throw new He("not_a_date")}function ua(r,e){return pa(r)||$a(r,e)||bo(r,e)||ca()}function ca(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $a(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function pa(r){if(Array.isArray(r))return r}function Fn(r){"@babel/helpers - typeof";return Fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fn(r)}function ma(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=bo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bo(r,e){if(r){if(typeof r=="string")return Sr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sr(r,e)}}function Sr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Cr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Tr(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cr(Object(n),!0).forEach(function(t){_a(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function _a(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Or={isColumnOriented:!1};function ga(r,e,n){n?n=Tr(Tr({},Or),n):n=Or;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;va(e),l&&(r=ba(r));for(var f=r[0],i=[],a=[],u=1;u<r.length;u++){var c=vo(e,r[u],u,f,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var _=ma(a),m;!(m=_()).done;){var S=m.value;S.row=o[S.row-1]+1}return{rows:i,errors:a}}function vo(r,e,n,t,l,o){for(var s={},f=!0,i=function(E){var N=E.column,A=E.value,L=E.error,M=E.reason,F={error:L,row:n+1,column:N,value:A};return M&&(F.reason=M),r[N].type&&(F.type=r[N].type),F},a=[],u=function(){var E=_[c],N=r[E],A=Fn(N.type)==="object"&&!Array.isArray(N.type),L=e[t.indexOf(E)];L===void 0&&(L=null);var M=void 0,F=void 0,P=void 0;if(A)M=vo(N.type,e,n,t,l,o);else if(L===null)M=null;else if(Array.isArray(N.type)){var j=!1,G=ha(L).map(function(R){var D=Lr(R,N,o);return D.error&&(M=R,F=D.error,P=D.reason),D.value!==null&&(j=!0),D.value});F||(M=j?G:null)}else{var B=Lr(L,N,o);F=B.error,P=B.reason,M=F?L:B.value}!F&&M===null&&(typeof N.required=="function"?a.push({column:E}):N.required===!0&&(F="required")),F?l.push(i({column:E,value:M,error:F,reason:P})):(f&&M!==null&&(f=!1),(M!==null||o.includeNullValues)&&(s[N.prop]=M))},c=0,_=Object.keys(r);c<_.length;c++)u();if(f)return null;for(var m=0,S=a;m<S.length;m++){var C=S[m].column,y=r[C].required(s);y&&l.push(i({column:C,value:null,error:"required"}))}return s}function Lr(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=Pt(r,e.parse):e.type?t=da(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function Pt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function da(r,e,n){switch(e){case String:return Pt(r,ia);case Number:return Pt(r,sa);case Date:return Pt(r,function(t){return fa(t,{properties:n.properties})});case Boolean:return Pt(r,aa);default:if(typeof e=="function")return Pt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function wo(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=wo(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function ha(r){for(var e=[],n=0;n<r.length;){var t=wo(r,",",n),l=ua(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var ba=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function va(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function En(r){"@babel/helpers - typeof";return En=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(r)}function ko(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;En(o)==="object"&&(o=Object.keys(r[l])[0],s=ko(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var wa=["schema","map"];function Ar(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function fn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ar(Object(n),!0).forEach(function(t){ka(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ka(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ya(r,e){if(r==null)return{};var n=Sa(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Sa(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Ca(r,e,n){var t=n.schema,l=n.map,o=ya(n,wa);!t&&l&&(t=ko(l));var s=Ki(r,e,fn(fn({},o),{},{properties:t||o.properties}));return t?ga(s.data,t,fn(fn({},o),{},{properties:s.properties})):s}function Ta(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ws(r).then(function(n){return Ca(n,Os,e)})}function Oa(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>La(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function La(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Aa(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ta(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Po(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Rn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function Pa(r){return mt(["get","intervention_type"],{area:lt.area,route:lt.route,crossing:lt.crossing,other:lt.other},"white")}function Ia(r){return[["Areas",lt.area],["Routes",lt.route],["Crossings",lt.crossing],["Other",lt.other]]}const Z={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},Ue=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function jn(){let[r,e]=yo(Rn,Z.funding_programmes);return[mt(["get","funding_programme"],r,"grey"),e]}function Na(){let r=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=yo(r,Z.current_milestone);return[mt(["get","current_milestone"],e,"grey"),n]}function yo(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Ma(r){let e,n;return e=new Hn({props:{rows:r[1]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Da(r){let e,n,t,l,o;function s(i){r[3](i)}let f={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(f.value=r[0]),e=new ht({props:f}),W.push(()=>Y(e,"value",s)),e.$on("change",r[2]),l=new qe({props:{label:"Legend",$$slots:{default:[Ma]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};!n&&a&1&&(n=!0,u.value=i[0],V(()=>n=!1)),e.$set(u);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function Fa(r,e,n){let t;x(r,qn,a=>n(4,t=a));let l="fundingProgramme",[o,s]=jn();function f(){let a;l=="interventionType"?(a=Pa(),n(1,s=Ia())):l=="fundingProgramme"?n(1,[a,s]=jn(),s):l=="currentMilestone"&&n(1,[a,s]=Na(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){l=a,n(0,l)}return[l,s,f,i]}class Ea extends J{constructor(e){super(),K(this,e,Fa,Da,X,{})}}const Jt=Ot({type:"FeatureCollection",features:[],schemes:{}}),pn=Ot(new Map),Pr=Ot(!0),Qt=Ot(""),xt=Ot("");function Ra(r){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function za(r){let e,n,t,l,o,s;return t=new ut({props:{$$slots:{default:[ja]},$$scope:{ctx:r}}}),t.$on("click",r[19]),{c(){e=T("input"),n=O(),b(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterInterventionText")},m(f,i){$(f,e,i),rt(e,r[7]),$(f,n,i),v(t,f,i),l=!0,o||(s=ot(e,"input",r[18]),o=!0)},p(f,i){i&128&&e.value!==f[7]&&rt(e,f[7]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(g(t.$$.fragment,f),l=!0)},o(f){d(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function qa(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ba(r){let e,n,t,l,o,s;return t=new ut({props:{$$slots:{default:[qa]},$$scope:{ctx:r}}}),t.$on("click",r[21]),{c(){e=T("input"),n=O(),b(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterSchemeText")},m(f,i){$(f,e,i),rt(e,r[6]),$(f,n,i),v(t,f,i),l=!0,o||(s=ot(e,"input",r[20]),o=!0)},p(f,i){i&64&&e.value!==f[6]&&rt(e,f[6]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(g(t.$$.fragment,f),l=!0)},o(f){d(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function Ha(r){let e,n,t,l,o,s,f,i,a,u,c,_,m,S,C,y,I,E,N,A;e=new ut({props:{$$slots:{default:[Ra]},$$scope:{ctx:r}}}),e.$on("click",r[13]);function L(D){r[14](D)}let M={label:"Authority or region",choices:r[8],emptyOption:!0};r[2]!==void 0&&(M.value=r[2]),t=new ht({props:M}),W.push(()=>Y(t,"value",L));function F(D){r[15](D)}let P={label:"Funding programme",choices:r[9],emptyOption:!0};r[3]!==void 0&&(P.value=r[3]),s=new ht({props:P}),W.push(()=>Y(s,"value",F));function j(D){r[16](D)}let G={label:"Current milestone",choices:r[10],emptyOption:!0};r[4]!==void 0&&(G.value=r[4]),a=new ht({props:G}),W.push(()=>Y(a,"value",j));function B(D){r[17](D)}let R={label:"Sketch source",choices:r[12],emptyOption:!0};return r[5]!==void 0&&(R.value=r[5]),_=new ht({props:R}),W.push(()=>Y(_,"value",B)),C=new An({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[za]},$$scope:{ctx:r}}}),I=new An({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Ba]},$$scope:{ctx:r}}}),N=new Ea({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment),i=O(),b(a.$$.fragment),c=O(),b(_.$$.fragment),S=O(),b(C.$$.fragment),y=O(),b(I.$$.fragment),E=O(),b(N.$$.fragment)},m(D,q){v(e,D,q),$(D,n,q),v(t,D,q),$(D,o,q),v(s,D,q),$(D,i,q),v(a,D,q),$(D,c,q),v(_,D,q),$(D,S,q),v(C,D,q),$(D,y,q),v(I,D,q),$(D,E,q),v(N,D,q),A=!0},p(D,q){const se={};q&134217728&&(se.$$scope={dirty:q,ctx:D}),e.$set(se);const pe={};q&256&&(pe.choices=D[8]),!l&&q&4&&(l=!0,pe.value=D[2],V(()=>l=!1)),t.$set(pe);const Se={};q&512&&(Se.choices=D[9]),!f&&q&8&&(f=!0,Se.value=D[3],V(()=>f=!1)),s.$set(Se);const he={};q&1024&&(he.choices=D[10]),!u&&q&16&&(u=!0,he.value=D[4],V(()=>u=!1)),a.$set(he);const Ce={};!m&&q&32&&(m=!0,Ce.value=D[5],V(()=>m=!1)),_.$set(Ce);const ie={};q&134217856&&(ie.$$scope={dirty:q,ctx:D}),C.$set(ie);const Me={};q&134217792&&(Me.$$scope={dirty:q,ctx:D}),I.$set(Me)},i(D){A||(g(e.$$.fragment,D),g(t.$$.fragment,D),g(s.$$.fragment,D),g(a.$$.fragment,D),g(_.$$.fragment,D),g(C.$$.fragment,D),g(I.$$.fragment,D),g(N.$$.fragment,D),A=!0)},o(D){d(e.$$.fragment,D),d(t.$$.fragment,D),d(s.$$.fragment,D),d(a.$$.fragment,D),d(_.$$.fragment,D),d(C.$$.fragment,D),d(I.$$.fragment,D),d(N.$$.fragment,D),A=!1},d(D){D&&(p(n),p(o),p(i),p(c),p(S),p(y),p(E)),w(e,D),w(t,D),w(s,D),w(a,D),w(_,D),w(C,D),w(I,D),w(N,D)}}}function Ua(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[11].route.toLocaleString()+"",s,f,i=r[11].area.toLocaleString()+"",a,u,c=r[11].crossing.toLocaleString()+"",_,m,S=r[11].other.toLocaleString()+"",C,y,I=Ir(r[11].totalLength).toFixed(1)+"",E,N;return{c(){e=k("Showing "),t=k(n),l=k(" schemes ("),s=k(o),f=k(`
    routes, `),a=k(i),u=k(` areas,
    `),_=k(c),m=k(" crossings, "),C=k(S),y=k(`
    other, with total LineString length of `),E=k(I),N=k(" miles)")},m(A,L){$(A,e,L),$(A,t,L),$(A,l,L),$(A,s,L),$(A,f,L),$(A,a,L),$(A,u,L),$(A,_,L),$(A,m,L),$(A,C,L),$(A,y,L),$(A,E,L),$(A,N,L)},p(A,L){L&1&&n!==(n=A[0].size.toLocaleString()+"")&&z(t,n),L&2048&&o!==(o=A[11].route.toLocaleString()+"")&&z(s,o),L&2048&&i!==(i=A[11].area.toLocaleString()+"")&&z(a,i),L&2048&&c!==(c=A[11].crossing.toLocaleString()+"")&&z(_,c),L&2048&&S!==(S=A[11].other.toLocaleString()+"")&&z(C,S),L&2048&&I!==(I=Ir(A[11].totalLength).toFixed(1)+"")&&z(E,I)},d(A){A&&(p(e),p(t),p(l),p(s),p(f),p(a),p(u),p(_),p(m),p(C),p(y),p(E),p(N))}}}function Ga(r){let e,n,t;function l(s){r[22](s)}let o={$$slots:{default:[Ua]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new oe({props:o}),W.push(()=>Y(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&134219777&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Wa(r){let e,n,t,l;return e=new qe({props:{label:"Filters",$$slots:{default:[Ha]},$$scope:{ctx:r}}}),t=new it({props:{small:!0,$$slots:{default:[Ga]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&134219772&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&134219779&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Ir(r){return r*621371e-9}function Ya(r,e,n){let t,l,o,s;x(r,xt,q=>n(6,t=q)),x(r,Qt,q=>n(7,l=q)),x(r,Jt,q=>n(23,o=q)),x(r,pn,q=>n(24,s=q));let{schemesToBeShown:f=new Set}=e,{show:i=!0}=e,a=[],u="",c=[],_=new Set(Rn.slice(0,-1)),m="",S=[],C="",y=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],I="",E={area:0,route:0,crossing:0,other:0,totalLength:0};Bn(()=>{var Se,he,Ce;let q=new Set,se=new Set,pe=new Set;for(let ie of s.values())(Se=ie.browse)!=null&&Se.authority_or_region&&q.add(ie.browse.authority_or_region),(he=ie.browse)!=null&&he.funding_programme&&se.add(ie.browse.funding_programme),(Ce=ie.browse)!=null&&Ce.current_milestone&&pe.add(ie.browse.current_milestone);n(8,a=Array.from(q.entries())),a.sort(),n(9,c=Rn.map(ie=>[ie,ie])),n(10,S=Array.from(pe.entries())),S.sort()});function N(q,se,pe,Se,he,Ce){let ie=se.toLowerCase(),Me=pe.toLowerCase(),Oe=le=>{var me,de,we,ge,Ie,Fe,Kt;if(ie&&!((me=le.properties.name)!=null&&me.toLowerCase().includes(ie))&&!((de=le.properties.description)!=null&&de.toLowerCase().includes(ie)))return!1;if(q||Me||Se||he||Ce){let Je=s.get(le.properties.scheme_reference);if(Se&&((we=Je.browse)==null?void 0:we.authority_or_region)!=Se||he&&he!=="Other"&&((ge=Je.browse)==null?void 0:ge.funding_programme)!=he||he==="Other"&&_.has(((Ie=Je.browse)==null?void 0:Ie.funding_programme)??"")||Ce&&((Fe=Je.browse)==null?void 0:Fe.current_milestone)!=Ce||Me&&!Je.scheme_reference.toLowerCase().includes(Me)&&!(Je.scheme_name??"").toLowerCase().includes(Me)||q&&q!=="Both"&&q!==((Kt=Je.browse)==null?void 0:Kt.sketch_source))return!1}return!0};n(0,f=new Set(o.features.filter(Oe).map(le=>le.properties.scheme_reference))),n(11,E={area:0,route:0,crossing:0,other:0,totalLength:0});let ve=le=>{var me,de;return!(!f.has(le.properties.scheme_reference)||ie&&!((me=le.properties.name)!=null&&me.toLowerCase().includes(ie))&&!((de=le.properties.description)!=null&&de.toLowerCase().includes(ie)))};for(let le of o.features)ve(le)?(delete le.properties.hide_while_editing,n(11,E[le.properties.intervention_type]++,E),le.geometry.type=="LineString"&&le.properties.length_meters&&n(11,E.totalLength+=le.properties.length_meters,E)):le.properties.hide_while_editing=!0;Jt.set(o),n(11,E)}function A(){n(5,I=""),n(2,u=""),n(3,m=""),n(4,C=""),Re(Qt,l="",l),Re(xt,t="",t)}function L(q){u=q,n(2,u)}function M(q){m=q,n(3,m)}function F(q){C=q,n(4,C)}function P(q){I=q,n(5,I)}function j(){l=this.value,Qt.set(l)}const G=()=>Re(Qt,l="",l);function B(){t=this.value,xt.set(t)}const R=()=>Re(xt,t="",t);function D(q){i=q,n(1,i)}return r.$$set=q=>{"schemesToBeShown"in q&&n(0,f=q.schemesToBeShown),"show"in q&&n(1,i=q.show)},r.$$.update=()=>{r.$$.dirty&252&&N(I,l,t,u,m,C)},[f,i,u,m,C,I,t,l,a,c,S,E,y,A,L,M,F,P,j,G,B,R,D]}class Va extends J{constructor(e){super(),K(this,e,Ya,Wa,X,{schemesToBeShown:0,show:1})}}function Xa(r){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ja(r){let e,n,t,l,o;return t=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment),l=k(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,f){$(s,e,f),h(e,n),v(t,e,null),h(e,l),o=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){o||(g(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class ze extends J{constructor(e){super(),K(this,e,null,Ja,X,{})}}function Nr(r,e,n){const t=r.slice();return t[2]=e[n],t}function Mr(r,e,n){const t=r.slice();return t[5]=e[n],t}function Dr(r){let e,n;return{c(){e=T("span"),n=k(`Â 
    `),Te(e,"background",r[5]),Te(e,"width","100%"),Te(e,"border","1px solid black")},m(t,l){$(t,e,l),h(e,n)},p(t,l){l&1&&Te(e,"background",t[5])},d(t){t&&p(e)}}}function Fr(r){let e,n=r[2]+"",t;return{c(){e=T("span"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&z(t,n)},d(l){l&&p(e)}}}function Ka(r){let e,n,t,l=je(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=Dr(Mr(r,l,i));let s=je(r[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=Fr(Nr(r,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=O(),t=T("div");for(let i=0;i<f.length;i+=1)f[i].c();Te(e,"display","flex"),Te(t,"display","flex"),Te(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);$(i,n,a),$(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){l=je(i[0]);let u;for(u=0;u<l.length;u+=1){const c=Mr(i,l,u);o[u]?o[u].p(c,a):(o[u]=Dr(c),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}if(a&2){s=je(i[1]);let u;for(u=0;u<s.length;u+=1){const c=Nr(i,s,u);f[u]?f[u].p(c,a):(f[u]=Fr(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:re,o:re,d(i){i&&(p(e),p(n),p(t)),pt(o,i),pt(f,i)}}}function Za(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class We extends J{constructor(e){super(),K(this,e,Za,Ka,X,{colorScale:0,limits:1})}}function Pe(r){let e=new URLSearchParams(window.location.search).has(r),n=Ot(e);return n.subscribe(t=>{let l=new URL(window.location.href);t?l.searchParams.set(r,"1"):l.searchParams.delete(r),window.history.replaceState(null,"",l.toString())}),n}function Lt(r,e,n,t){let l=e,o=new URLSearchParams(window.location.search).get(r);if(o!=null)try{l=t(o)}catch(f){console.warn(`Parsing URL parameter ${r}=${o} failed, using default value: ${f}`)}let s=Ot(l);return s.subscribe(f=>{let i=new URL(window.location.href),a=n(f);a==null?i.searchParams.delete(r):i.searchParams.set(r,a),window.history.replaceState(null,"",i.toString())}),s}function Er(r){const e=r[14].OA21CD;r[15]=e;const n=r[14][r[3].kind];r[16]=n}function Qa(r){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ef(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tf(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nf(r){let e,n,t,l,o,s,f,i,a,u,c,_;return t=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[xa]},$$scope:{ctx:r}}}),o=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ef]},$$scope:{ctx:r}}}),u=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=O(),i=T("p"),a=k("License: "),b(u.$$.fragment),c=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(m,S){$(m,e,S),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(m,f,S),$(m,i,S),h(i,a),v(u,i,null),h(i,c),_=!0},p(m,S){const C={};S&131072&&(C.$$scope={dirty:S,ctx:m}),t.$set(C);const y={};S&131072&&(y.$$scope={dirty:S,ctx:m}),o.$set(y);const I={};S&131072&&(I.$$scope={dirty:S,ctx:m}),u.$set(I)},i(m){_||(g(t.$$.fragment,m),g(o.$$.fragment,m),g(u.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),_=!1},d(m){m&&(p(e),p(f),p(i)),w(t),w(o),w(u)}}}function rf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&131072&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Rr(r){let e,n;return e=new We({props:{colorScale:r[4],limits:gt(r[3].kind)}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.limits=gt(t[3].kind)),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function lf(r){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sf(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function af(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ff(r){let e,n,t,l,o,s,f,i,a,u,c,_,m,S;return o=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[of]},$$scope:{ctx:r}}}),f=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[sf]},$$scope:{ctx:r}}}),_=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[af]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=T("p"),l=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(f.$$.fragment),i=k("."),a=O(),u=T("p"),c=k("License: "),b(_.$$.fragment),m=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(C,y){$(C,e,y),$(C,n,y),$(C,t,y),h(t,l),v(o,t,null),h(t,s),v(f,t,null),h(t,i),$(C,a,y),$(C,u,y),h(u,c),v(_,u,null),h(u,m),S=!0},p(C,y){const I={};y&131072&&(I.$$scope={dirty:y,ctx:C}),o.$set(I);const E={};y&131072&&(E.$$scope={dirty:y,ctx:C}),f.$set(E);const N={};y&131072&&(N.$$scope={dirty:y,ctx:C}),_.$set(N)},i(C){S||(g(o.$$.fragment,C),g(f.$$.fragment,C),g(_.$$.fragment,C),S=!0)},o(C){d(o.$$.fragment,C),d(f.$$.fragment,C),d(_.$$.fragment,C),S=!1},d(C){C&&(p(e),p(n),p(t),p(a),p(u)),w(o),w(f),w(_)}}}function uf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[ff]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&131072&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function jr(r){let e,n;return e=new We({props:{colorScale:r[4],limits:gt(r[3].kind)}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.limits=gt(t[3].kind)),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cf(r){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(r){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pf(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mf(r){let e,n,t,l,o,s,f,i,a;return t=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[$f]},$$scope:{ctx:r}}}),o=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[pf]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&131072&&(_.$$scope={dirty:c,ctx:u}),t.$set(_);const m={};c&131072&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function _f(r){let e,n,t;return n=new _e({props:{$$slots:{default:[mf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&131072&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function zr(r){let e,n,t,l;return t=new We({props:{colorScale:r[4],limits:gt(r[3].kind).map(qr)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&8&&(f.limits=gt(o[3].kind).map(qr)),t.$set(f)},i(o){l||(g(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function gf(r){let e,n,t,l=r[16].toLocaleString()+"",o,s,f=r[15]+"",i;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(l),s=k(`
          people per square kilometre in `),i=k(f)},m(a,u){$(a,e,u),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,u){u&16392&&l!==(l=a[16].toLocaleString()+"")&&z(o,l),u&16384&&f!==(f=a[15]+"")&&z(i,f)},d(a){a&&p(e)}}}function df(r){let e,n,t=r[15]+"",l,o,s,f=r[16]+"",i,a;return{c(){e=T("p"),n=k("Households in "),l=k(t),o=k(` have an average of
          `),s=T("b"),i=k(f),a=k(`
          cars`)},m(u,c){$(u,e,c),h(e,n),h(e,l),h(e,o),h(e,s),h(s,i),h(e,a)},p(u,c){c&16384&&t!==(t=u[15]+"")&&z(l,t),c&16392&&f!==(f=u[16]+"")&&z(i,f)},d(u){u&&p(e)}}}function hf(r){let e,n,t=r[16]+"",l,o,s,f=r[15]+"",i,a;return{c(){e=T("p"),n=T("b"),l=k(t),o=k("%"),s=k(`
          of households in `),i=k(f),a=k(" have 1 or more cars")},m(u,c){$(u,e,c),h(e,n),h(n,l),h(n,o),h(e,s),h(e,i),h(e,a)},p(u,c){c&16392&&t!==(t=u[16]+"")&&z(l,t),c&16384&&f!==(f=u[15]+"")&&z(i,f)},d(u){u&&p(e)}}}function bf(r){Er(r);let e;function n(o,s){return o[3].kind=="percent_households_with_car"?hf:o[3].kind=="average_cars_per_household"?df:gf}let t=n(r),l=t(r);return{c(){l.c(),e=Ne()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){Er(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function vf(r){let e,n;return e=new fe({props:{$$slots:{default:[bf,({props:t})=>({14:t}),({props:t})=>t?16384:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&147464&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function wf(r){let e,n,t,l;const o=[H(Ke),{sourceLayer:Ke},{paint:{"fill-color":Ae(["get",r[3].kind],gt(r[3].kind),r[4]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:r[3].kind!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[vf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",r[6]);const f=[H(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3].kind!=""?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&24?ne(o,[u&0&&ae(H(Ke)),u&0&&{sourceLayer:Ke},u&24&&{paint:{"fill-color":Ae(["get",a[3].kind],gt(a[3].kind),a[4]),"fill-opacity":Q(.5,.7)}},u&8&&{layout:{visibility:a[3].kind!=""?"visible":"none"}},o[4],o[5],o[6]]):{};u&131080&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&8?ne(f,[u&0&&ae(H(`${Ke}-outline`)),u&0&&{sourceLayer:Ke},f[2],u&8&&{layout:{visibility:a[3].kind!=""?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function kf(r){let e,n,t,l,o,s,f,i,a,u,c,_,m,S;function C(P){r[7](P)}let y={$$slots:{right:[rf],default:[Qa]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new oe({props:y}),W.push(()=>Y(e,"checked",C)),e.$on("change",r[8]);let I=r[3].kind=="percent_households_with_car"&&Rr(r);function E(P){r[9](P)}let N={$$slots:{right:[uf],default:[lf]},$$scope:{ctx:r}};r[1]!==void 0&&(N.checked=r[1]),o=new oe({props:N}),W.push(()=>Y(o,"checked",E)),o.$on("change",r[10]);let A=r[3].kind=="average_cars_per_household"&&jr(r);function L(P){r[11](P)}let M={$$slots:{right:[_f],default:[cf]},$$scope:{ctx:r}};r[2]!==void 0&&(M.checked=r[2]),a=new oe({props:M}),W.push(()=>Y(a,"checked",L)),a.$on("change",r[12]);let F=r[3].kind=="population_density"&&zr(r);return m=new ye({props:{url:`pmtiles://${be()}/v1/${Ke}.pmtiles`,$$slots:{default:[wf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),I&&I.c(),l=O(),b(o.$$.fragment),f=O(),A&&A.c(),i=O(),b(a.$$.fragment),c=O(),F&&F.c(),_=O(),b(m.$$.fragment)},m(P,j){v(e,P,j),$(P,t,j),I&&I.m(P,j),$(P,l,j),v(o,P,j),$(P,f,j),A&&A.m(P,j),$(P,i,j),v(a,P,j),$(P,c,j),F&&F.m(P,j),$(P,_,j),v(m,P,j),S=!0},p(P,[j]){const G={};j&131072&&(G.$$scope={dirty:j,ctx:P}),!n&&j&1&&(n=!0,G.checked=P[0],V(()=>n=!1)),e.$set(G),P[3].kind=="percent_households_with_car"?I?(I.p(P,j),j&8&&g(I,1)):(I=Rr(P),I.c(),g(I,1),I.m(l.parentNode,l)):I&&(ce(),d(I,1,1,()=>{I=null}),$e());const B={};j&131072&&(B.$$scope={dirty:j,ctx:P}),!s&&j&2&&(s=!0,B.checked=P[1],V(()=>s=!1)),o.$set(B),P[3].kind=="average_cars_per_household"?A?(A.p(P,j),j&8&&g(A,1)):(A=jr(P),A.c(),g(A,1),A.m(i.parentNode,i)):A&&(ce(),d(A,1,1,()=>{A=null}),$e());const R={};j&131072&&(R.$$scope={dirty:j,ctx:P}),!u&&j&4&&(u=!0,R.checked=P[2],V(()=>u=!1)),a.$set(R),P[3].kind=="population_density"?F?(F.p(P,j),j&8&&g(F,1)):(F=zr(P),F.c(),g(F,1),F.m(_.parentNode,_)):F&&(ce(),d(F,1,1,()=>{F=null}),$e());const D={};j&131080&&(D.$$scope={dirty:j,ctx:P}),m.$set(D)},i(P){S||(g(e.$$.fragment,P),g(I),g(o.$$.fragment,P),g(A),g(a.$$.fragment,P),g(F),g(m.$$.fragment,P),S=!0)},o(P){d(e.$$.fragment,P),d(I),d(o.$$.fragment,P),d(A),d(a.$$.fragment,P),d(F),d(m.$$.fragment,P),S=!1},d(P){P&&(p(t),p(l),p(f),p(i),p(c),p(_)),w(e,P),I&&I.d(P),w(o,P),A&&A.d(P),w(a,P),F&&F.d(P),w(m,P)}}}let Ke="census_output_areas";function yf(r){return r.show?r.kind:null}function Sf(r){return{show:!0,kind:r}}function gt(r){return r=="percent_households_with_car"?[0,20,40,60,80,100]:r=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const qr=r=>r.toLocaleString();function Cf(r,e,n){let t,l=Z.sequential_low_to_high,s=Lt(Ke,{show:!1,kind:""},yf,Sf);x(r,s,I=>n(3,t=I));let f=t.kind=="percent_households_with_car",i=t.kind=="average_cars_per_household",a=t.kind=="population_density";function u(I){let E=I.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${E}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${E}`,"_blank")}function c(I){f=I,n(0,f)}const _=()=>{n(1,i=!1),n(2,a=!1)};function m(I){i=I,n(1,i)}const S=()=>{n(0,f=!1),n(2,a=!1)};function C(I){a=I,n(2,a)}const y=()=>{n(0,f=!1),n(1,i=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(f?(Re(s,t.show=!0,t),Re(s,t.kind="percent_households_with_car",t)):i?(Re(s,t.show=!0,t),Re(s,t.kind="average_cars_per_household",t)):a?(Re(s,t.show=!0,t),Re(s,t.kind="population_density",t)):(Re(s,t.show=!1,t),Re(s,t.kind="",t)))},[f,i,a,t,l,s,u,c,_,m,S,C,y]}class Tf extends J{constructor(e){super(),K(this,e,Cf,kf,X,{})}}function Of(r){let e,n,t;return e=new De({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Lf(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Af(r){let e,n,t,l,o,s,f;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Lf]},$$scope:{ctx:r}}}),s=new ze({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of December 2022."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Pf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Af]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function If(r){let e,n=r[4].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=l[4].name+"")&&z(t,n)},d(l){l&&p(e)}}}function Nf(r){let e,n;return e=new fe({props:{$$slots:{default:[If,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Mf(r){let e,n,t,l;const o=[H(It),{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Nf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",Ff);const f=[H(`${It}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ne(o,[u&0&&ae(H(It)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&3?ne(f,[u&0&&ae(H(`${It}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Df(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[Pf],default:[Of]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>Y(e,"checked",s)),l=new Tt({props:{data:`${be()}/v1/${It}.geojson`,$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let It="combined_authorities";function Ff(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ef(r,e,n){let t,l=Z.combined_authorities,o=Pe(It);x(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class Rf extends J{constructor(e){super(),K(this,e,Ef,Df,X,{})}}function jf(r){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zf(r){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qf(r){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bf(r){let e,n,t,l,o,s,f,i,a;return t=new te({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[zf]},$$scope:{ctx:r}}}),o=new te({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[qf]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),l=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),t.$set(_);const m={};c&64&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function Hf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Br(r){let e,n;return e=new We({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Uf(r){let e,n=r[5].LSOA11CD+"",t,l,o,s=r[5].score+"",f,i,a,u,c,_=r[5].rank.toLocaleString()+"",m,S;return{c(){e=T("p"),t=k(n),l=k(` has an IMD score of
        `),o=T("b"),f=k(s),i=O(),a=T("p"),u=k("Rank: "),c=T("b"),m=k(_),S=k(`
        / 32,844 LSOAs`)},m(C,y){$(C,e,y),h(e,t),h(e,l),h(e,o),h(o,f),$(C,i,y),$(C,a,y),h(a,u),h(a,c),h(c,m),h(a,S)},p(C,y){y&32&&n!==(n=C[5].LSOA11CD+"")&&z(t,n),y&32&&s!==(s=C[5].score+"")&&z(f,s),y&32&&_!==(_=C[5].rank.toLocaleString()+"")&&z(m,_)},d(C){C&&(p(e),p(i),p(a))}}}function Gf(r){let e,n;return e=new fe({props:{$$slots:{default:[Uf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Wf(r){let e,n,t,l;const o=[H(Ze),{sourceLayer:Ze},{paint:{"fill-color":Ae(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Gf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s});const f=[H(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&7?ne(o,[u&0&&ae(H(Ze)),u&0&&{sourceLayer:Ze},u&6&&{paint:{"fill-color":Ae(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Q(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&1?ne(f,[u&0&&ae(H(`${Ze}-outline`)),u&0&&{sourceLayer:Ze},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Yf(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={$$slots:{right:[Hf],default:[jf]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>Y(e,"checked",f));let a=r[0]&&Br(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Ze}.pmtiles`,$$slots:{default:[Wf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],V(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=Br(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&65&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Ze="imd";function Vf(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,2,4,6,8,10],s=Pe(Ze);x(r,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,o,s,f]}class Xf extends J{constructor(e){super(),K(this,e,Vf,Yf,X,{})}}function Jf(r){let e,n,t;return e=new De({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Kf(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zf(r){let e,n,t,l,o,s,f;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Kf]},$$scope:{ctx:r}}}),s=new ze({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of January 2024."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Qf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Zf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function xf(r){let e,n=r[4].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=l[4].name+"")&&z(t,n)},d(l){l&&p(e)}}}function eu(r){let e,n;return e=new fe({props:{$$slots:{default:[xf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function tu(r){let e,n,t,l;const o=[H(Nt),{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[eu]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",ru);const f=[H(`${Nt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ne(o,[u&0&&ae(H(Nt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&3?ne(f,[u&0&&ae(H(`${Nt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function nu(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[Qf],default:[Jf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>Y(e,"checked",s)),l=new Tt({props:{data:`${be()}/v1/${Nt}.geojson`,$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Nt="local_authority_districts";function ru(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function lu(r,e,n){let t,l=Z.local_authority_districts,o=Pe(Nt);x(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class ou extends J{constructor(e){super(),K(this,e,lu,nu,X,{})}}function su(r){let e,n,t;return e=new De({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function iu(r){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function au(r){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fu(r){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uu(r){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cu(r){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $u(r){let e,n,t,l,o,s,f,i,a,u,c,_,m,S,C,y,I,E,N,A,L,M;return t=new te({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[iu]},$$scope:{ctx:r}}}),o=new te({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[au]},$$scope:{ctx:r}}}),f=new te({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[fu]},$$scope:{ctx:r}}}),m=new te({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[uu]},$$scope:{ctx:r}}}),E=new te({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[cu]},$$scope:{ctx:r}}}),L=new ze({}),{c(){e=T("p"),n=k("LPAs may be a "),b(t.$$.fragment),l=k(", "),b(o.$$.fragment),s=k("y, or "),b(f.$$.fragment),i=k("."),a=O(),u=T("p"),c=T("strong"),_=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(m.$$.fragment),S=k(" to get more details."),C=O(),y=T("p"),I=k("Data from ONS Geography via "),b(E.$$.fragment),N=k(", as of November 2022."),A=O(),b(L.$$.fragment)},m(F,P){$(F,e,P),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),v(f,e,null),h(e,i),$(F,a,P),$(F,u,P),h(u,c),h(c,_),v(m,c,null),h(c,S),$(F,C,P),$(F,y,P),h(y,I),v(E,y,null),h(y,N),$(F,A,P),v(L,F,P),M=!0},p(F,P){const j={};P&32&&(j.$$scope={dirty:P,ctx:F}),t.$set(j);const G={};P&32&&(G.$$scope={dirty:P,ctx:F}),o.$set(G);const B={};P&32&&(B.$$scope={dirty:P,ctx:F}),f.$set(B);const R={};P&32&&(R.$$scope={dirty:P,ctx:F}),m.$set(R);const D={};P&32&&(D.$$scope={dirty:P,ctx:F}),E.$set(D)},i(F){M||(g(t.$$.fragment,F),g(o.$$.fragment,F),g(f.$$.fragment,F),g(m.$$.fragment,F),g(E.$$.fragment,F),g(L.$$.fragment,F),M=!0)},o(F){d(t.$$.fragment,F),d(o.$$.fragment,F),d(f.$$.fragment,F),d(m.$$.fragment,F),d(E.$$.fragment,F),d(L.$$.fragment,F),M=!1},d(F){F&&(p(e),p(a),p(u),p(C),p(y),p(A)),w(t),w(o),w(f),w(m),w(E),w(L,F)}}}function pu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[$u]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function mu(r){let e,n=r[4].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=l[4].name+"")&&z(t,n)},d(l){l&&p(e)}}}function _u(r){let e,n;return e=new fe({props:{$$slots:{default:[mu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gu(r){let e,n,t,l;const o=[H(Qe),{sourceLayer:Qe},{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[_u]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s});const f=[H(`${Qe}-outline`),{sourceLayer:Qe},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ne(o,[u&0&&ae(H(Qe)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&3?ne(f,[u&0&&ae(H(`${Qe}-outline`)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function du(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[pu],default:[su]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>Y(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Qe}.pmtiles`,$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Qe="local_planning_authorities";function hu(r,e,n){let t,l=Z.local_planning_authorities,o=Pe(Qe);x(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class bu extends J{constructor(e){super(),K(this,e,hu,du,X,{})}}function vu(r){let e,n,t;return e=new De({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function wu(r){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ku(r){let e,n,t,l,o,s,f;return t=new te({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[wu]},$$scope:{ctx:r}}}),s=new ze({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function yu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Su(r){let e,n=r[4].Name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=l[4].Name+"")&&z(t,n)},d(l){l&&p(e)}}}function Cu(r){let e,n;return e=new fe({props:{$$slots:{default:[Su,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Tu(r){let e,n,t,l;const o=[H(xe),{sourceLayer:xe},{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Cu]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",Lu);const f=[H(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ne(o,[u&0&&ae(H(xe)),u&0&&{sourceLayer:xe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&3?ne(f,[u&0&&ae(H(`${xe}-outline`)),u&0&&{sourceLayer:xe},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Ou(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[yu],default:[vu]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>Y(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${xe}.pmtiles`,$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let xe="parliamentary_constituencies";function Lu(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Au(r,e,n){let t,l=Z.parliamentary_constituencies,o=Pe(xe);x(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class Pu extends J{constructor(e){super(),K(this,e,Au,Ou,X,{})}}function Iu(r){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nu(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mu(r){let e,n,t,l,o,s,f,i,a;return t=new te({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Nu]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),l=k(`. The measurements are annual means, in units of
        Âµgm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),h(e,o),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&4096&&(_.$$scope={dirty:c,ctx:u}),t.$set(_)},i(u){a||(g(t.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(i,u)}}}function Du(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&4096&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Hr(r){let e,n,t,l,o=r[3](r[0].pollutant)+"",s,f,i,a,u,c,_,m,S,C,y,I,E;function N(L){r[6](L)}let A={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return r[0].pollutant!==void 0&&(A.value=r[0].pollutant),e=new ht({props:A}),W.push(()=>Y(e,"value",N)),{c(){b(e.$$.fragment),t=O(),l=T("p"),s=k(o),f=O(),i=T("div"),a=T("label"),u=k(`Opacity
      `),c=T("input"),_=O(),m=T("img"),U(c,"type","range"),U(c,"min","0"),U(c,"max","100"),cn(m.src,S=r[4](r[0].pollutant))||U(m,"src",S),U(m,"width",150),U(m,"alt",C=`Legend for ${r[0].pollutant} layer`)},m(L,M){v(e,L,M),$(L,t,M),$(L,l,M),h(l,s),$(L,f,M),$(L,i,M),h(i,a),h(a,u),h(a,c),rt(c,r[0].opacity),$(L,_,M),$(L,m,M),y=!0,I||(E=[ot(c,"change",r[7]),ot(c,"input",r[7])],I=!0)},p(L,M){const F={};!n&&M&1&&(n=!0,F.value=L[0].pollutant,V(()=>n=!1)),e.$set(F),(!y||M&1)&&o!==(o=L[3](L[0].pollutant)+"")&&z(s,o),M&1&&rt(c,L[0].opacity),(!y||M&1&&!cn(m.src,S=L[4](L[0].pollutant)))&&U(m,"src",S),(!y||M&1&&C!==(C=`Legend for ${L[0].pollutant} layer`))&&U(m,"alt",C)},i(L){y||(g(e.$$.fragment,L),y=!0)},o(L){d(e.$$.fragment,L),y=!1},d(L){L&&(p(t),p(l),p(f),p(i),p(_),p(m)),w(e,L),I=!1,no(E)}}}function Fu(r){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":r[0].opacity/100}},{layout:{visibility:r[0].show?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Go({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[t[0],{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}]):{};e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Eu(r){let e,n,t,l,o,s;function f(u){r[5](u)}let i={$$slots:{right:[Du],default:[Iu]},$$scope:{ctx:r}};r[0].show!==void 0&&(i.checked=r[0].show),e=new oe({props:i}),W.push(()=>Y(e,"checked",f));let a=r[0].show&&Hr(r);return o=new cs({props:{tiles:[r[1]],tileSize:256,$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&4096&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0].show,V(()=>n=!1)),e.$set(_),u[0].show?a?(a.p(u,c),c&1&&g(a,1)):(a=Hr(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&2&&(m.tiles=[u[1]]),c&4097&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}function Ru(r){return r.show?`${r.pollutant}/${r.opacity}`:null}function ju(r){let[e,n]=r.split("/");return{show:!0,pollutant:e,opacity:parseInt(n)}}function zu(r,e,n){let t,l,o,f=Lt("pollution",{show:!1,pollutant:"PM25_viridis",opacity:50},Ru,ju);x(r,f,C=>n(0,o=C));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${o.pollutant}/MapServer/WMSServer`}function a(C){return t[1]}function u(C){let y=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${y}`}function c(C){let y=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${y}`}function _(C){r.$$.not_equal(o.show,C)&&(o.show=C,f.set(o))}function m(C){r.$$.not_equal(o.pollutant,C)&&(o.pollutant=C,f.set(o))}function S(){o.opacity=nn(this.value),f.set(o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[o.pollutant]),r.$$.dirty&1&&n(1,l=u(o.pollutant))},[o,l,f,a,c,_,m,S]}class qu extends J{constructor(e){super(),K(this,e,zu,Eu,X,{})}}function Bu(r){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hu(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uu(r){let e,n,t,l,o,s,f,i,a;return o=new te({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Hu]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=T("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=O(),t=T("p"),l=k("Data from June 2019, produced by "),b(o.$$.fragment),s=k(". See there for methodology details"),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),h(t,l),v(o,t,null),h(t,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){a||(g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(f)),w(o),w(i,u)}}}function Gu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Ur(r){let e,n;return e=new We({props:{colorScale:r[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Wu(r){let e,n=r[4].noiseclass+"",t,l,o=Gr(r[4].noiseclass)+"",s,f;return{c(){e=T("p"),t=k(n),l=k(" dB ("),s=k(o),f=k(")")},m(i,a){$(i,e,a),h(e,t),h(e,l),h(e,s),h(e,f)},p(i,a){a&16&&n!==(n=i[4].noiseclass+"")&&z(t,n),a&16&&o!==(o=Gr(i[4].noiseclass)+"")&&z(s,o)},d(i){i&&p(e)}}}function Yu(r){let e,n;return e=new fe({props:{$$slots:{default:[Wu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Vu(r){let e,n;const t=[H(Mt),{sourceLayer:Mt},{paint:{"fill-color":mt(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":Q(.5,.8)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Yu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Ge({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&ae(H(Mt)),s&0&&{sourceLayer:Mt},s&2&&{paint:{"fill-color":mt(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":Q(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Xu(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={$$slots:{right:[Gu],default:[Bu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>Y(e,"checked",f));let a=r[0]&&Ur(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Mt}.pmtiles`,$$slots:{default:[Vu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],V(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=Ur(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Mt="road_noise";function Gr(r){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[r]}function Ju(r,e,n){let t,l=[Z.sequential_low_to_high[0],Z.sequential_low_to_high[2],Z.sequential_low_to_high[4]],o=Pe(Mt);x(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class Ku extends J{constructor(e){super(),K(this,e,Ju,Xu,X,{})}}function Zu(r){let e,n,t;return e=new De({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Qu(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xu(r){let e,n,t,l,o,s,f;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Qu]},$$scope:{ctx:r}}}),s=new ze({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function ec(r){let e,n,t;return n=new _e({props:{$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function tc(r){let e,n=r[4].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=l[4].name+"")&&z(t,n)},d(l){l&&p(e)}}}function nc(r){let e,n;return e=new fe({props:{$$slots:{default:[tc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rc(r){let e,n,t,l;const o=[H(et),{sourceLayer:et},{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[nc]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",oc);const f=[H(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ne(o,[u&0&&ae(H(et)),u&0&&{sourceLayer:et},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&3?ne(f,[u&0&&ae(H(`${et}-outline`)),u&0&&{sourceLayer:et},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function lc(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[ec],default:[Zu]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>Y(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${et}.pmtiles`,$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let et="wards";function oc(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function sc(r,e,n){let t,l=Z.wards,o=Pe(et);x(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class ic extends J{constructor(e){super(),K(this,e,sc,lc,X,{})}}function ac(r){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fc(r){let e,n,t,l;return t=new te({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[ac]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),l=!0},p(o,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:o}),t.$set(f)},i(o){l||(g(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&p(e),w(t)}}}class at extends J{constructor(e){super(),K(this,e,null,fc,X,{})}}function uc(r){let e,n,t;return e=new De({props:{color:Z.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function cc(r){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $c(r){let e,n,t,l,o,s,f,i,a;return o=new te({props:{href:"https://gtfs.org",$$slots:{default:[cc]},$$scope:{ctx:r}}}),i=new at({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=T("p"),l=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),h(t,l),v(o,t,null),h(t,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&16&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){a||(g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(f)),w(o),w(i,u)}}}function pc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function mc(r){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _c(r){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gc(r){let e;function n(o,s){return o[3].has_bus_lane?_c:mc}let t=n(r),l=t(r);return{c(){l.c(),e=Ne()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function dc(r){let e,n;return e=new fe({props:{$$slots:{default:[gc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function hc(r){let e,n;const t=[H(Dt),{sourceLayer:Dt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[dc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&ae(H(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function bc(r){let e,n,t,l,o;function s(i){r[2](i)}let f={$$slots:{right:[pc],default:[uc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>Y(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Dt}.pmtiles`,$$slots:{default:[hc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Dt="bus_routes";function vc(r,e,n){let t,l=Pe(Dt);x(r,l,s=>n(0,t=s));function o(s){t=s,l.set(t)}return[t,l,o]}class wc extends J{constructor(e){super(),K(this,e,vc,bc,X,{})}}function Wr(r){const e=Nc(r[9]);r[10]=e[0],r[11]=e[1],r[12]=e[2]}function Yr(r,e,n){const t=r.slice();return t[10]=e[n][0],t[13]=e[n][1],t[14]=e[n][2],t[15]=e,t[16]=n,t}function kc(r){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yc(r){let e,n,t,l,o,s,f,i;return f=new at({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=O(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=O(),b(f.$$.fragment)},m(a,u){$(a,e,u),$(a,n,u),$(a,t,u),$(a,l,u),$(a,o,u),$(a,s,u),v(f,a,u),i=!0},p:re,i(a){i||(g(f.$$.fragment,a),i=!0)},o(a){d(f.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(s)),w(f,a)}}}function Sc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[yc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&131072&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Vr(r){let e,n,t;return n=new it({props:{$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(n.$$.fragment),Te(e,"border","1px solid black"),Te(e,"padding","8px")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&131073&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Cc(r){let e,n,t=r[13]+"",l,o,s;return e=new De({props:{color:r[14]}}),{c(){b(e.$$.fragment),n=O(),l=k(t),o=O()},m(f,i){v(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p:re,i(f){s||(g(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),w(e,f)}}}function Xr(r){let e,n,t;function l(s){r[5](s,r[10])}let o={$$slots:{default:[Cc]},$$scope:{ctx:r}};return r[0][r[10]]!==void 0&&(o.checked=r[0][r[10]]),e=new oe({props:o}),W.push(()=>Y(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){r=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:r}),!n&&f&5&&(n=!0,i.checked=r[0][r[10]],V(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Tc(r){let e,n,t=je(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Xr(Yr(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Ne()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);$(s,e,f),n=!0},p(s,f){if(f&5){t=je(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Yr(s,t,i);l[i]?(l[i].p(a,f),g(l[i],1)):(l[i]=Xr(a),l[i].c(),g(l[i],1),l[i].m(e.parentNode,e))}for(ce(),i=t.length;i<l.length;i+=1)o(i);$e()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)g(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)d(l[f]);n=!1},d(s){s&&p(e),pt(l,s)}}}function Oc(r){Wr(r);let e,n=r[10]+"",t,l,o,s,f,i=r[11]+"",a,u,c,_,m=r[12]+"",S;return{c(){e=T("h2"),t=k(n),l=O(),o=T("p"),s=k("Direction: "),f=T("b"),a=O(),u=T("p"),c=k("Width: "),_=T("b"),S=k(m)},m(C,y){$(C,e,y),h(e,t),$(C,l,y),$(C,o,y),h(o,s),h(o,f),f.innerHTML=i,$(C,a,y),$(C,u,y),h(u,c),h(u,_),h(_,S)},p(C,y){Wr(C),y&512&&n!==(n=C[10]+"")&&z(t,n),y&512&&i!==(i=C[11]+"")&&(f.innerHTML=i),y&512&&m!==(m=C[12]+"")&&z(S,m)},d(C){C&&(p(e),p(l),p(o),p(a),p(u))}}}function Lc(r){let e,n;return e=new fe({props:{$$slots:{default:[Oc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&131584&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ac(r){let e,n;const t=[H(Ft),{sourceLayer:Ft},{paint:{"line-color":mt(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ue,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[3](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Lc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Le({props:l}),e.$on("click",Mc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&9?ne(t,[s&0&&ae(H(Ft)),s&0&&{sourceLayer:Ft},t[2],s&1&&{layout:{visibility:o[0].show?"visible":"none"}},s&9&&{filter:o[3](o[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Pc(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={$$slots:{right:[Sc],default:[kc]},$$scope:{ctx:r}};r[0].show!==void 0&&(i.checked=r[0].show),e=new oe({props:i}),W.push(()=>Y(e,"checked",f));let a=r[0].show&&Vr(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Ft}.pmtiles`,$$slots:{default:[Ac]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&131072&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0].show,V(()=>n=!1)),e.$set(_),u[0].show?a?(a.p(u,c),c&1&&g(a,1)):(a=Vr(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&131073&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Ft="cycle_paths";function Ic(r){return{show:!0,track:r.includes("track"),lane:r.includes("lane"),shared_use_segregated:r.includes("shared_use_segregated"),shared_use_unsegregated:r.includes("shared_use_unsegregated")}}function Nc(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Mc(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Dc(r,e,n){let t,l=["track","lane","shared_use_segregated","shared_use_unsegregated"],o={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(_){return _.show?l.filter(m=>_[m]).join(","):null}let f=Lt(Ft,o,s,Ic);x(r,f,_=>n(0,t=_));let i=[["track","Separated tracks",Z.cycle_paths.track],["lane","Unprotected lanes",Z.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]];function a(_){let m=l.filter(S=>_[S]);return["in",["get","kind"],["literal",m]]}function u(_){r.$$.not_equal(t.show,_)&&(t.show=_,f.set(t))}function c(_,m){r.$$.not_equal(t[m],_)&&(t[m]=_,f.set(t))}return[t,f,i,a,u,c]}class Fc extends J{constructor(e){super(),K(this,e,Dc,Pc,X,{})}}function Ec(r){let e,n,t;return e=new De({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Rc(r){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jc(r){let e,n,t,l,o,s,f;return t=new te({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Rc]},$$scope:{ctx:r}}}),s=new ze({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),l=k(", as of September 2021."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function zc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[jc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function qc(r){let e,n=(r[4].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=(l[4].name??"Unknown MRN road")+"")&&z(t,n)},d(l){l&&p(e)}}}function Bc(r){let e,n;return e=new fe({props:{$$slots:{default:[qc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hc(r){let e,n;const t=[H(Et),{sourceLayer:Et},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Bc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&ae(H(Et)),s&0&&{sourceLayer:Et},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Uc(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[zc],default:[Ec]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>Y(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Et}.pmtiles`,$$slots:{default:[Hc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Et="mrn";function Gc(r,e,n){let t,l=Z.mrn,o=Pe(Et);x(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class Wc extends J{constructor(e){super(),K(this,e,Gc,Uc,X,{})}}function Yc(r){let e,n,t;return e=new De({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Strategic Road Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Vc(r){let e;return{c(){e=k(`OS Open Roads
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xc(r){let e,n,t,l,o,s,f;return t=new te({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),s=new ze({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Jc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Xc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Kc(r){let e,n=(r[4].name??"Unknown SRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=(l[4].name??"Unknown SRN road")+"")&&z(t,n)},d(l){l&&p(e)}}}function Zc(r){let e,n;return e=new fe({props:{$$slots:{default:[Kc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qc(r){let e,n;const t=[H(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Zc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&ae(H(Rt)),s&0&&{sourceLayer:Rt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function xc(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[Jc],default:[Yc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>Y(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Rt}.pmtiles`,$$slots:{default:[Qc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Rt="srn";function e$(r,e,n){let t,l=Z.srn,o=Pe(Rt);x(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class t$ extends J{constructor(e){super(),K(this,e,e$,xc,X,{})}}function n$(r){let e,n,t;return e=new De({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function r$(r){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function l$(r){let e,n,t,l,o,s,f;return t=new te({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[r$]},$$scope:{ctx:r}}}),s=new ze({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),l=k(", downloaded on 22/01/2024."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function o$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[l$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Jr(r){let e,n,t,l=r[4].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].Desc_+"")&&z(o,l)},d(s){s&&p(e)}}}function Kr(r){let e,n,t,l=r[4].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].Greenway+"")&&z(o,l)},d(s){s&&p(e)}}}function Zr(r){let e,n,t,l=r[4].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].RouteType+"")&&z(o,l)},d(s){s&&p(e)}}}function Qr(r){let e,n,t,l=r[4].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].RouteNo+"")&&z(o,l)},d(s){s&&p(e)}}}function xr(r){let e,n,t,l=r[4].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].RouteCat+"")&&z(o,l)},d(s){s&&p(e)}}}function el(r){let e,n,t,l=r[4].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].OpenStatus+"")&&z(o,l)},d(s){s&&p(e)}}}function tl(r){let e,n,t,l=r[4].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].Surface+"")&&z(o,l)},d(s){s&&p(e)}}}function nl(r){let e,n,t,l=r[4].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].Quality+"")&&z(o,l)},d(s){s&&p(e)}}}function rl(r){let e,n,t,l=r[4].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].RoadClass+"")&&z(o,l)},d(s){s&&p(e)}}}function s$(r){let e,n,t,l,o,s,f,i,a,u=r[4].Desc_&&Jr(r),c=r[4].Greenway&&Kr(r),_=r[4].RouteType&&Zr(r),m=r[4].RouteNo&&Qr(r),S=r[4].RouteCat&&xr(r),C=r[4].OpenStatus&&el(r),y=r[4].Surface&&tl(r),I=r[4].Quality&&nl(r),E=r[4].RoadClass&&rl(r);return{c(){e=T("ul"),u&&u.c(),n=O(),c&&c.c(),t=O(),_&&_.c(),l=O(),m&&m.c(),o=O(),S&&S.c(),s=O(),C&&C.c(),f=O(),y&&y.c(),i=O(),I&&I.c(),a=O(),E&&E.c()},m(N,A){$(N,e,A),u&&u.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),_&&_.m(e,null),h(e,l),m&&m.m(e,null),h(e,o),S&&S.m(e,null),h(e,s),C&&C.m(e,null),h(e,f),y&&y.m(e,null),h(e,i),I&&I.m(e,null),h(e,a),E&&E.m(e,null)},p(N,A){N[4].Desc_?u?u.p(N,A):(u=Jr(N),u.c(),u.m(e,n)):u&&(u.d(1),u=null),N[4].Greenway?c?c.p(N,A):(c=Kr(N),c.c(),c.m(e,t)):c&&(c.d(1),c=null),N[4].RouteType?_?_.p(N,A):(_=Zr(N),_.c(),_.m(e,l)):_&&(_.d(1),_=null),N[4].RouteNo?m?m.p(N,A):(m=Qr(N),m.c(),m.m(e,o)):m&&(m.d(1),m=null),N[4].RouteCat?S?S.p(N,A):(S=xr(N),S.c(),S.m(e,s)):S&&(S.d(1),S=null),N[4].OpenStatus?C?C.p(N,A):(C=el(N),C.c(),C.m(e,f)):C&&(C.d(1),C=null),N[4].Surface?y?y.p(N,A):(y=tl(N),y.c(),y.m(e,i)):y&&(y.d(1),y=null),N[4].Quality?I?I.p(N,A):(I=nl(N),I.c(),I.m(e,a)):I&&(I.d(1),I=null),N[4].RoadClass?E?E.p(N,A):(E=rl(N),E.c(),E.m(e,null)):E&&(E.d(1),E=null)},d(N){N&&p(e),u&&u.d(),c&&c.d(),_&&_.d(),m&&m.d(),S&&S.d(),C&&C.d(),y&&y.d(),I&&I.d(),E&&E.d()}}}function i$(r){let e,n;return e=new fe({props:{$$slots:{default:[s$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function a$(r){let e,n;const t=[H(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[i$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&ae(H(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function f$(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[o$],default:[n$]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>Y(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${jt}.pmtiles`,$$slots:{default:[a$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let jt="national_cycle_network";function u$(r,e,n){let t,l=Z.national_cycle_network,o=Pe(jt);x(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class c$ extends J{constructor(e){super(),K(this,e,u$,f$,X,{})}}function ll(r,e,n){const t=r.slice();return t[6]=e[n][0],t[7]=e[n][1],t[8]=e[n][2],t}function $$(r){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function p$(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function m$(r){let e,n,t,l,o,s,f,i,a,u,c;return a=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[p$]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,n=O(),t=T("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,l=O(),o=T("p"),o.textContent="Data valid as of 1 January, 2024",s=O(),f=T("p"),i=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(a.$$.fragment),u=k(".")},m(_,m){$(_,e,m),$(_,n,m),$(_,t,m),$(_,l,m),$(_,o,m),$(_,s,m),$(_,f,m),h(f,i),v(a,f,null),h(f,u),c=!0},p(_,m){const S={};m&2048&&(S.$$scope={dirty:m,ctx:_}),a.$set(S)},i(_){c||(g(a.$$.fragment,_),c=!0)},o(_){d(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(l),p(o),p(s),p(f)),w(a)}}}function _$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[m$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function ol(r){let e,n;return e=new We({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function g$(r){let e,n,t=mn(r[5].angle+r[8])+"",l;return{c(){e=T("p"),n=new vt(!1),l=k(` side of the road: no pavement
          `),n.a=l},m(o,s){$(o,e,s),n.m(t,e),h(e,l)},p(o,s){s&32&&t!==(t=mn(o[5].angle+o[8])+"")&&n.p(t)},d(o){o&&p(e)}}}function d$(r){let e,n,t=mn(r[5].angle+r[8])+"",l,o,s=r[6]+"",f,i,a,u=r[7]+"",c,_;return{c(){e=T("p"),n=new vt(!1),l=k(` side of the road:
            `),o=T("b"),f=k(s),i=k(`
            m average,
            `),a=T("b"),c=k(u),_=k(`
            m minimum
          `),n.a=l},m(m,S){$(m,e,S),n.m(t,e),h(e,l),h(e,o),h(o,f),h(e,i),h(e,a),h(a,c),h(e,_)},p(m,S){S&32&&t!==(t=mn(m[5].angle+m[8])+"")&&n.p(t),S&32&&s!==(s=m[6]+"")&&z(f,s),S&32&&u!==(u=m[7]+"")&&z(c,u)},d(m){m&&p(e)}}}function sl(r){let e;function n(o,s){return o[6]?d$:g$}let t=n(r),l=t(r);return{c(){l.c(),e=Ne()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function h$(r){let e,n=je([[r[5].left_average,r[5].left_minimum,-90],[r[5].right_average,r[5].right_minimum,90]]),t=[];for(let l=0;l<2;l+=1)t[l]=sl(ll(r,n,l));return{c(){for(let l=0;l<2;l+=1)t[l].c();e=Ne()},m(l,o){for(let s=0;s<2;s+=1)t[s]&&t[s].m(l,o);$(l,e,o)},p(l,o){if(o&32){n=je([[l[5].left_average,l[5].left_minimum,-90],[l[5].right_average,l[5].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=ll(l,n,s);t[s]?t[s].p(f,o):(t[s]=sl(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(l){l&&p(e),pt(t,l)}}}function b$(r){let e,n;return e=new fe({props:{openOn:"hover",$$slots:{default:[h$,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2080&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function v$(r){let e,n;const t=[H(zt),{sourceLayer:zt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Ue,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[b$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&ae(H(zt)),s&0&&{sourceLayer:zt},t[2],t[3],s&6&&{paint:{"line-color":Ae(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":Ue,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&2048&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function w$(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={$$slots:{right:[_$],default:[$$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>Y(e,"checked",f));let a=r[0]&&ol(r);return o=new ye({props:{url:`pmtiles://${gn()}/v1/${zt}.pmtiles`,$$slots:{default:[v$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],V(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=ol(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&2049&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let zt="pavement_widths";function k$(r){let e=Math.floor((r+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function mn(r){return`${k$(r)} <span style="display: inline-block; rotate: ${r}deg">â¬†</span>`}function y$(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,2,4,6,8,13],s=Pe(zt);x(r,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,o,s,f]}class S$ extends J{constructor(e){super(),K(this,e,y$,w$,X,{})}}function C$(r){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function T$(r){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function O$(r){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function L$(r){let e,n,t,l,o,s,f,i,a,u,c;return f=new te({props:{href:"https://www.pct.bike",$$slots:{default:[T$]},$$scope:{ctx:r}}}),a=new te({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[O$]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=O(),o=T("p"),s=k("See "),b(f.$$.fragment),i=k(" and "),b(a.$$.fragment),u=k(" for details on methodology and data sources.")},m(_,m){$(_,e,m),$(_,n,m),$(_,t,m),$(_,l,m),$(_,o,m),h(o,s),v(f,o,null),h(o,i),v(a,o,null),h(o,u),c=!0},p(_,m){const S={};m&1024&&(S.$$scope={dirty:m,ctx:_}),f.$set(S);const C={};m&1024&&(C.$$scope={dirty:m,ctx:_}),a.$set(C)},i(_){c||(g(f.$$.fragment,_),g(a.$$.fragment,_),c=!0)},o(_){d(f.$$.fragment,_),d(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(l),p(o)),w(f),w(a)}}}function A$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[L$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function il(r){let e,n,t,l,o,s,f,i;e=new We({props:{colorScale:r[1],limits:r[2]}});function a(m){r[6](m)}let u={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0].tripPurpose!==void 0&&(u.value=r[0].tripPurpose),t=new ro({props:u}),W.push(()=>Y(t,"value",a));function c(m){r[7](m)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[0].scenario!==void 0&&(_.value=r[0].scenario),s=new ht({props:_}),W.push(()=>Y(s,"value",c)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment)},m(m,S){v(e,m,S),$(m,n,S),v(t,m,S),$(m,o,S),v(s,m,S),i=!0},p(m,S){const C={};!l&&S&1&&(l=!0,C.value=m[0].tripPurpose,V(()=>l=!1)),t.$set(C);const y={};!f&&S&1&&(f=!0,y.value=m[0].scenario,V(()=>f=!1)),s.$set(y)},i(m){i||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(s.$$.fragment,m),i=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(s.$$.fragment,m),i=!1},d(m){m&&(p(n),p(o)),w(e,m),w(t,m),w(s,m)}}}function P$(r){let e,n=r[4](r[9])+"",t;return{c(){e=new vt(!1),t=Ne(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[4](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function I$(r){let e,n;return e=new fe({props:{$$slots:{default:[P$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function N$(r){let e,n;const t=[H(ft),{sourceLayer:ft},{paint:{"line-color":Ae(["get",r[0].scenario],r[2],r[1]),"line-width":Ue,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==ft?"visible":"none"}}];let l={$$slots:{default:[I$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&ae(H(ft)),s&0&&{sourceLayer:ft},s&7&&{paint:{"line-color":Ae(["get",o[0].scenario],o[2],o[1]),"line-width":Ue,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0].show&&o[0].tripPurpose==ft?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function M$(r){let e,n=r[4](r[9])+"",t;return{c(){e=new vt(!1),t=Ne(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[4](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function D$(r){let e,n;return e=new fe({props:{$$slots:{default:[M$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function F$(r){let e,n;const t=[H(dt),{sourceLayer:dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["get",r[0].scenario],r[2],r[1]),"line-width":Ue,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==dt?"visible":"none"}}];let l={$$slots:{default:[D$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&ae(H(dt)),s&0&&{sourceLayer:dt},t[2],t[3],s&7&&{paint:{"line-color":Ae(["get",o[0].scenario],o[2],o[1]),"line-width":Ue,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0].show&&o[0].tripPurpose==dt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function E$(r){let e,n,t,l,o,s,f,i;function a(_){r[5](_)}let u={$$slots:{right:[A$],default:[C$]},$$scope:{ctx:r}};r[0].show!==void 0&&(u.checked=r[0].show),e=new oe({props:u}),W.push(()=>Y(e,"checked",a));let c=r[0].show&&il(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${ft}.pmtiles`,$$slots:{default:[N$]},$$scope:{ctx:r}}}),f=new ye({props:{url:`pmtiles://${be()}/v1/${dt}.pmtiles`,$$slots:{default:[F$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),c&&c.c(),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment)},m(_,m){v(e,_,m),$(_,t,m),c&&c.m(_,m),$(_,l,m),v(o,_,m),$(_,s,m),v(f,_,m),i=!0},p(_,[m]){const S={};m&1024&&(S.$$scope={dirty:m,ctx:_}),!n&&m&1&&(n=!0,S.checked=_[0].show,V(()=>n=!1)),e.$set(S),_[0].show?c?(c.p(_,m),m&1&&g(c,1)):(c=il(_),c.c(),g(c,1),c.m(l.parentNode,l)):c&&(ce(),d(c,1,1,()=>{c=null}),$e());const C={};m&1025&&(C.$$scope={dirty:m,ctx:_}),o.$set(C);const y={};m&1025&&(y.$$scope={dirty:m,ctx:_}),f.$set(y)},i(_){i||(g(e.$$.fragment,_),g(c),g(o.$$.fragment,_),g(f.$$.fragment,_),i=!0)},o(_){d(e.$$.fragment,_),d(c),d(o.$$.fragment,_),d(f.$$.fragment,_),i=!1},d(_){_&&(p(t),p(l),p(s)),w(e,_),c&&c.d(_),w(o,_),w(f,_)}}}let ft="pct_commute",dt="pct_school";function R$(r){return r.show?`${r.tripPurpose}/${r.scenario}`:null}function j$(r){let[e,n]=r.split("/");return{show:!0,tripPurpose:e,scenario:n}}function z$(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,50,100,500,1e3,2e3],f=Lt("pct",{show:!1,tripPurpose:ft,scenario:"baseline"},R$,j$);x(r,f,_=>n(0,t=_));function i(_){let m=_.baseline,S=_.gov_target,C=_.go_dutch,y=`<h2>Trip purpose: ${t.tripPurpose==ft?"commuting":"school"}</h2>`;if(y+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)y+=`<p>Government target (2025): <b>${S.toLocaleString()}</b></p>`,y+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let I=(S/m).toFixed(1),E=(C/m).toFixed(1);y+=`<p>Government target (2025): ${S.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,y+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${E}x</b> of baseline)</p>`}return y}function a(_){r.$$.not_equal(t.show,_)&&(t.show=_,f.set(t))}function u(_){r.$$.not_equal(t.tripPurpose,_)&&(t.tripPurpose=_,f.set(t))}function c(_){r.$$.not_equal(t.scenario,_)&&(t.scenario=_,f.set(t))}return[t,l,o,f,i,a,u,c]}class q$ extends J{constructor(e){super(),K(this,e,z$,E$,X,{})}}function B$(r){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function H$(r){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function U$(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function G$(r){let e,n,t,l,o,s,f,i,a,u,c,_;return t=new te({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[H$]},$$scope:{ctx:r}}}),u=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[U$]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),l=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",f=O(),i=T("p"),a=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),c=k(".")},m(m,S){$(m,e,S),h(e,n),v(t,e,null),h(e,l),$(m,o,S),$(m,s,S),$(m,f,S),$(m,i,S),h(i,a),v(u,i,null),h(i,c),_=!0},p(m,S){const C={};S&512&&(C.$$scope={dirty:S,ctx:m}),t.$set(C);const y={};S&512&&(y.$$scope={dirty:S,ctx:m}),u.$set(y)},i(m){_||(g(t.$$.fragment,m),g(u.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(u.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(f),p(i)),w(t),w(u)}}}function W$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[G$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&512&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function al(r){let e,n,t,l,o;e=new We({props:{colorScale:r[1],limits:r[2]}});function s(i){r[6](i)}let f={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0].kind!==void 0&&(f.value=r[0].kind),t=new ro({props:f}),W.push(()=>Y(t,"value",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const u={};!l&&a&1&&(l=!0,u.value=i[0].kind,V(()=>l=!1)),t.$set(u)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Y$(r){let e,n,t=r[8].indicative_mph+"",l,o,s,f,i,a=r[8].highest_mph+"",u,c,_=r[4][r[8].highest_description]+"",m,S;return{c(){e=T("p"),n=k("Posted speed limit: "),l=k(t),o=k(" mph"),s=O(),f=T("p"),i=k("Highest average speed: "),u=k(a),c=k(" mph (during "),m=k(_),S=k(")")},m(C,y){$(C,e,y),h(e,n),h(e,l),h(e,o),$(C,s,y),$(C,f,y),h(f,i),h(f,u),h(f,c),h(f,m),h(f,S)},p(C,y){y&256&&t!==(t=C[8].indicative_mph+"")&&z(l,t),y&256&&a!==(a=C[8].highest_mph+"")&&z(u,a),y&256&&_!==(_=C[4][C[8].highest_description]+"")&&z(m,_)},d(C){C&&(p(e),p(s),p(f))}}}function V$(r){let e,n;return e=new fe({props:{$$slots:{default:[Y$,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&768&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function X$(r){let e,n;const t=[H(qt),{sourceLayer:qt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["get",r[0].kind],r[2],r[1]),"line-width":Ue,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}}];let l={$$slots:{default:[V$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&ae(H(qt)),s&0&&{sourceLayer:qt},t[2],t[3],s&7&&{paint:{"line-color":Ae(["get",o[0].kind],o[2],o[1]),"line-width":Ue,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function J$(r){let e,n,t,l,o,s;function f(u){r[5](u)}let i={$$slots:{right:[W$],default:[B$]},$$scope:{ctx:r}};r[0].show!==void 0&&(i.checked=r[0].show),e=new oe({props:i}),W.push(()=>Y(e,"checked",f));let a=r[0].show&&al(r);return o=new ye({props:{url:`pmtiles://${gn()}/v1/${qt}.pmtiles`,$$slots:{default:[X$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&512&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0].show,V(()=>n=!1)),e.$set(_),u[0].show?a?(a.p(u,c),c&1&&g(a,1)):(a=al(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&513&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let qt="road_speeds";function K$(r){return r.show?r.kind:null}function Z$(r){return{show:!0,kind:r}}function Q$(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,20,30,40,50,90],f=Lt(qt,{show:!1,kind:"indicative_mph"},K$,Z$);x(r,f,c=>n(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){r.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}function u(c){r.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}return[t,l,o,f,i,a,u]}class x$ extends J{constructor(e){super(),K(this,e,Q$,J$,X,{})}}function ep(r){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tp(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function np(r){let e,n,t,l,o,s,f,i,a;return f=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[tp]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",l=O(),o=T("p"),s=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),h(o,s),v(f,o,null),h(o,i),a=!0},p(u,c){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),f.$set(_)},i(u){a||(g(f.$$.fragment,u),a=!0)},o(u){d(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),w(f)}}}function rp(r){let e,n,t;return n=new _e({props:{$$slots:{default:[np]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function fl(r){let e,n;return e=new We({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function lp(r){let e,n,t,l=r[5].average+"",o,s,f,i,a,u,c=r[5].minimum+"",_,m;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(l),s=k(`
        meters`),f=O(),i=T("p"),a=k("Minimum width: "),u=T("b"),_=k(c),m=k(`
        meters`)},m(S,C){$(S,e,C),h(e,n),h(e,t),h(t,o),h(e,s),$(S,f,C),$(S,i,C),h(i,a),h(i,u),h(u,_),h(i,m)},p(S,C){C&32&&l!==(l=S[5].average+"")&&z(o,l),C&32&&c!==(c=S[5].minimum+"")&&z(_,c)},d(S){S&&(p(e),p(f),p(i))}}}function op(r){let e,n;return e=new fe({props:{$$slots:{default:[lp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function sp(r){let e,n;const t=[H(Bt),{sourceLayer:Bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["get","average"],r[2],r[1]),"line-width":Ue,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[op]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&ae(H(Bt)),s&0&&{sourceLayer:Bt},t[2],t[3],s&6&&{paint:{"line-color":Ae(["get","average"],o[2],o[1]),"line-width":Ue,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ip(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={$$slots:{right:[rp],default:[ep]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>Y(e,"checked",f));let a=r[0]&&fl(r);return o=new ye({props:{url:`pmtiles://${gn()}/v1/${Bt}.pmtiles`,$$slots:{default:[sp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],V(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=fl(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&65&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Bt="road_widths";function ap(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,5,10,15,20,100],s=Pe(Bt);x(r,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,o,s,f]}class fp extends J{constructor(e){super(),K(this,e,ap,ip,X,{})}}function up(r){let e,n,t;return e=new De({props:{color:Z.trams}}),{c(){b(e.$$.fragment),n=k(`
  Trams`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function cp(r){let e,n,t,l;return t=new at({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:re,i(o){l||(g(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function $p(r){let e,n,t;return n=new _e({props:{$$slots:{default:[cp]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function pp(r){let e,n;const t=[H(Ht),{sourceLayer:Ht},{paint:{"line-color":Z.trams,"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Le({props:l}),e.$on("click",_p),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&ae(H(Ht)),s&0&&{sourceLayer:Ht},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function mp(r){let e,n,t,l,o;function s(i){r[2](i)}let f={$$slots:{right:[$p],default:[up]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>Y(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Ht}.pmtiles`,$$slots:{default:[pp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ht="trams";function _p(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function gp(r,e,n){let t,l=Pe(Ht);x(r,l,s=>n(0,t=s));function o(s){t=s,l.set(t)}return[t,l,o]}class dp extends J{constructor(e){super(),K(this,e,gp,mp,X,{})}}function hp(r){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bp(r){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vp(r){let e,n,t,l,o,s,f,i,a;return t=new te({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[bp]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),l=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=O(),s=T("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),$(u,o,c),$(u,s,c),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),t.$set(_)},i(u){a||(g(t.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(o),p(s),p(f)),w(t),w(i,u)}}}function wp(r){let e,n,t;return n=new _e({props:{$$slots:{default:[vp]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function ul(r){let e,n,t,l;return t=new We({props:{colorScale:r[1],limits:r[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:re,i(o){l||(g(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function kp(r){let e,n,t,l=r[5].stop_name+"",o,s,f,i,a,u=r[5].peak+"",c,_,m,S,C,y=r[5].peak_description+"",I,E,N,A,L,M=r[5].total+"",F,P,j=r[5].total_description+"",G,B;return{c(){e=T("p"),n=k("Stop name: "),t=T("b"),o=k(l),s=O(),f=T("p"),i=k("Peak: "),a=T("b"),c=k(u),_=k(`
        buses during the busiest hour of any day`),m=O(),S=T("p"),C=k("The peak hour is "),I=k(y),E=O(),N=T("p"),A=k("Total buses per day: "),L=T("b"),F=k(M),P=k(`
        (for `),G=k(j),B=k(", the busiest day of the week)")},m(R,D){$(R,e,D),h(e,n),h(e,t),h(t,o),$(R,s,D),$(R,f,D),h(f,i),h(f,a),h(a,c),h(f,_),$(R,m,D),$(R,S,D),h(S,C),h(S,I),$(R,E,D),$(R,N,D),h(N,A),h(N,L),h(L,F),h(N,P),h(N,G),h(N,B)},p(R,D){D&32&&l!==(l=R[5].stop_name+"")&&z(o,l),D&32&&u!==(u=R[5].peak+"")&&z(c,u),D&32&&y!==(y=R[5].peak_description+"")&&z(I,y),D&32&&M!==(M=R[5].total+"")&&z(F,M),D&32&&j!==(j=R[5].total_description+"")&&z(G,j)},d(R){R&&(p(e),p(s),p(f),p(m),p(S),p(E),p(N))}}}function yp(r){let e,n;return e=new fe({props:{$$slots:{default:[kp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Sp(r){let e,n;const t=[H(Ut),{sourceLayer:Ut},{paint:{"circle-color":Ae(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[yp]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new _t({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&ae(H(Ut)),s&0&&{sourceLayer:Ut},s&6&&{paint:{"circle-color":Ae(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Cp(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={$$slots:{right:[wp],default:[hp]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>Y(e,"checked",f));let a=r[0]&&ul(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Ut}.pmtiles`,$$slots:{default:[Sp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],V(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=ul(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&65&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Ut="bus_stops";function Tp(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,3,10,20,30,100],s=Pe(Ut);x(r,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,o,s,f]}class Op extends J{constructor(e){super(),K(this,e,Tp,Cp,X,{})}}function Lp(r){let e,n,t;return{c(){e=T("input"),U(e,"class","govuk-file-upload"),U(e,"id","load-criticals"),U(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=ot(e,"change",r[5]),n=!0)},p:re,d(l){l&&p(e),r[7](null),n=!1,t()}}}function cl(r){let e,n;return e=new it({props:{small:!0,$$slots:{default:[Pp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ap(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new De({props:{color:en}}),{c(){b(e.$$.fragment),n=k(`
        Show `),l=k(t),o=k(" issues")},m(f,i){v(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p(f,i){(!s||i&4)&&t!==(t=f[2].toLocaleString()+"")&&z(l,t)},i(f){s||(g(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),w(e,f)}}}function Pp(r){let e,n,t;function l(s){r[8](s)}let o={$$slots:{default:[Ap]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new oe({props:o}),W.push(()=>Y(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&2052&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ip(r){let e,n,t,l,o,s;e=new An({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Lp]},$$scope:{ctx:r}}}),t=new lo({props:{errorMessage:r[3]}});let f=r[2]>0&&cl(r);return{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),f&&f.c(),o=Ne()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),f&&f.m(i,a),$(i,o,a),s=!0},p(i,a){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?f?(f.p(i,a),a&4&&g(f,1)):(f=cl(i),f.c(),g(f,1),f.m(o.parentNode,o)):f&&(ce(),d(f,1,1,()=>{f=null}),$e())},i(i){s||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(f),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(f),s=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),f&&f.d(i)}}}function Np(r){let e,n,t=r[10].critical_type+"",l,o,s,f,i,a=r[10].location_description+"",u,c,_,m,S,C=r[10].notes+"",y,I,E,N,A,L,M,F=r[10].id+"",P,j,G,B,R,D=(r[10].inspector??"???")+"",q,se,pe,Se=r[10].submission_time+"",he,Ce,ie,Me,Oe,ve=r[10].scheme_reference+"",le,me,de,we=r[10].current_design_stage+"",ge;return{c(){e=T("div"),n=T("h2"),l=k(t),o=O(),s=T("p"),f=T("u"),f.textContent="Location",i=k(`
          : `),u=k(a),c=O(),_=T("p"),m=T("u"),m.textContent="Notes",S=k(`
          : `),y=k(C),I=O(),E=T("hr"),N=O(),A=T("p"),L=k("Critical issue ID: "),M=T("b"),P=k(F),j=O(),G=T("p"),B=k("Submitted by "),R=T("b"),q=k(D),se=k(`
          at
          `),pe=T("b"),he=k(Se),Ce=O(),ie=T("p"),Me=k("For scheme "),Oe=T("b"),le=k(ve),me=k(`
          in stage
          `),de=T("b"),ge=k(we),Te(e,"max-width","30vw")},m(Ie,Fe){$(Ie,e,Fe),h(e,n),h(n,l),h(e,o),h(e,s),h(s,f),h(s,i),h(s,u),h(e,c),h(e,_),h(_,m),h(_,S),h(_,y),h(e,I),h(e,E),h(e,N),h(e,A),h(A,L),h(A,M),h(M,P),h(e,j),h(e,G),h(G,B),h(G,R),h(R,q),h(G,se),h(G,pe),h(pe,he),h(e,Ce),h(e,ie),h(ie,Me),h(ie,Oe),h(Oe,le),h(ie,me),h(ie,de),h(de,ge)},p(Ie,Fe){Fe&1024&&t!==(t=Ie[10].critical_type+"")&&z(l,t),Fe&1024&&a!==(a=Ie[10].location_description+"")&&z(u,a),Fe&1024&&C!==(C=Ie[10].notes+"")&&z(y,C),Fe&1024&&F!==(F=Ie[10].id+"")&&z(P,F),Fe&1024&&D!==(D=(Ie[10].inspector??"???")+"")&&z(q,D),Fe&1024&&Se!==(Se=Ie[10].submission_time+"")&&z(he,Se),Fe&1024&&ve!==(ve=Ie[10].scheme_reference+"")&&z(le,ve),Fe&1024&&we!==(we=Ie[10].current_design_stage+"")&&z(ge,we)},d(Ie){Ie&&p(e)}}}function Mp(r){let e,n;return e=new fe({props:{$$slots:{default:[Np,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Dp(r){let e,n,t,l,o,s;const f=[H("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":en,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let m=0;m<f.length;m+=1)i=ee(i,f[m]);e=new _t({props:i}),e.$on("click",r[6]);const a=[H("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let u={};for(let m=0;m<a.length;m+=1)u=ee(u,a[m]);t=new dn({props:u});const c=[H("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":en,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let _={$$slots:{default:[Mp]},$$scope:{ctx:r}};for(let m=0;m<c.length;m+=1)_=ee(_,c[m]);return o=new _t({props:_}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment)},m(m,S){v(e,m,S),$(m,n,S),v(t,m,S),$(m,l,S),v(o,m,S),s=!0},p(m,S){const C=S&2?ne(f,[f[0],f[1],S&0&&{paint:{"circle-color":en,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},S&2&&{layout:{visibility:m[1]?"visible":"none"}},f[4]]):{};e.$set(C);const y=S&2?ne(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:m[1]?"visible":"none"}}]):{};t.$set(y);const I=S&2?ne(c,[c[0],c[1],c[2],c[3],S&0&&{paint:{"circle-color":en,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},S&2&&{layout:{visibility:m[1]?"visible":"none"}}]):{};S&2048&&(I.$$scope={dirty:S,ctx:m}),o.$set(I)},i(m){s||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),s=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),s=!1},d(m){m&&(p(n),p(l)),w(e,m),w(t,m),w(o,m)}}}function Fp(r){let e,n,t,l;return e=new qe({props:{label:"Critical Issues",$$slots:{default:[Ip]},$$scope:{ctx:r}}}),t=new Tt({props:{id:So,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Dp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&2063&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let So="criticals",en="red";function Ep(r,e,n){let t;x(r,qn,m=>n(9,t=m));let l,o=!0,s=0,f="",i=On();async function a(m){try{n(4,i=await Aa(l.files[0])),n(2,s=i.features.length),n(3,f="")}catch(S){n(3,f=`The file you loaded is broken: ${S}`)}}async function u(m){let S=await t.getSource(So).getClusterExpansionZoom(m.detail.features[0].properties.cluster_id);t.easeTo({center:m.detail.features[0].geometry.coordinates,zoom:S})}function c(m){W[m?"unshift":"push"](()=>{l=m,n(0,l)})}function _(m){o=m,n(1,o)}return[l,o,s,f,i,a,u,c,_]}class Rp extends J{constructor(e){super(),K(this,e,Ep,Fp,X,{})}}function jp(r){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zp(r){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qp(r){let e,n,t,l,o,s,f;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[zp]},$$scope:{ctx:r}}}),s=new at({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Bp(r){let e,n,t;return n=new _e({props:{$$slots:{default:[qp]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function $l(r){let e,n;return e=new Hn({props:{rows:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hp(r){let e,n=pl(r[4])+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=pl(l[4])+"")&&z(t,n)},d(l){l&&p(e)}}}function Up(r){let e,n;return e=new fe({props:{$$slots:{default:[Hp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gp(r){let e,n;const t=[H(Gt),{sourceLayer:Gt},{paint:{"circle-color":mt(["get","crossing"],{traffic_signals:Z.signalized_crossing},Z.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Up]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new _t({props:l}),e.$on("click",Yp),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&ae(H(Gt)),s&0&&{sourceLayer:Gt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Wp(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={$$slots:{right:[Bp],default:[jp]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>Y(e,"checked",f));let a=r[0]&&$l(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Gt}.pmtiles`,$$slots:{default:[Gp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],V(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=$l(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Gt="crossings";function pl(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Yp(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Vp(r,e,n){let t,l=Pe(Gt);x(r,l,f=>n(0,t=f));let o=[["Signalized",Z.signalized_crossing],["Other",Z.other_crossing]];function s(f){t=f,l.set(t)}return[t,l,o,s]}class Xp extends J{constructor(e){super(),K(this,e,Vp,Wp,X,{})}}function Jp(r){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Kp(r){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zp(r){let e,n,t,l,o,s,f,i,a,u,c,_,m;return f=new te({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Kp]},$$scope:{ctx:r}}}),u=new ze({}),_=new at({}),{c(){e=T("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=O(),t=T("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,l=O(),o=T("p"),s=k("This layer is built from "),b(f.$$.fragment),i=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=O(),b(u.$$.fragment),c=O(),b(_.$$.fragment)},m(S,C){$(S,e,C),$(S,n,C),$(S,t,C),$(S,l,C),$(S,o,C),h(o,s),v(f,o,null),h(o,i),$(S,a,C),v(u,S,C),$(S,c,C),v(_,S,C),m=!0},p(S,C){const y={};C&64&&(y.$$scope={dirty:C,ctx:S}),f.$set(y)},i(S){m||(g(f.$$.fragment,S),g(u.$$.fragment,S),g(_.$$.fragment,S),m=!0)},o(S){d(f.$$.fragment,S),d(u.$$.fragment,S),d(_.$$.fragment,S),m=!1},d(S){S&&(p(e),p(n),p(t),p(l),p(o),p(a),p(c)),w(f),w(u,S),w(_,S)}}}function Qp(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Zp]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function ml(r){let e,n;return e=new We({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xp(r){let e,n,t,l=Math.abs(r[5].gradient)/100+"",o,s;return{c(){e=T("p"),n=k("Gradient: "),t=T("b"),o=k(l),s=k(`
        %`)},m(f,i){$(f,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(f,i){i&32&&l!==(l=Math.abs(f[5].gradient)/100+"")&&z(o,l)},d(f){f&&p(e)}}}function em(r){let e,n;return e=new fe({props:{$$slots:{default:[xp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function tm(r){let e,n,t,l;const o=[H(tt),{sourceLayer:tt},{manageHoverState:!0},{paint:{"line-color":Ae(["/",["abs",["get","gradient"]],100],r[2],r[1]),"line-width":Ue,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let s={$$slots:{default:[em]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Le({props:s});const f=[H(tt+"_arrows"),{sourceLayer:tt},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new dn({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&7?ne(o,[u&0&&ae(H(tt)),u&0&&{sourceLayer:tt},o[2],u&6&&{paint:{"line-color":Ae(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Ue,"line-opacity":Q(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&1?ne(f,[u&0&&ae(H(tt+"_arrows")),u&0&&{sourceLayer:tt},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function nm(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={$$slots:{right:[Qp],default:[Jp]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>Y(e,"checked",f));let a=r[0]&&ml(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${tt}.pmtiles`,$$slots:{default:[tm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],V(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=ml(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&65&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let tt="gradient";function rm(r,e,n){let t,l=Z.gradient_flat_to_steep,o=[0,3,5,8,10,20,100],s=Pe(tt);x(r,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,o,s,f]}class lm extends J{constructor(e){super(),K(this,e,rm,nm,X,{})}}function om(r){let e,n,t;return{c(){e=T("img"),t=k(`
  Cycle parking`),cn(e.src,n=Io)||U(e,"src",n),U(e,"alt","a logo representing cycle parking")},m(l,o){$(l,e,o),$(l,t,o)},p:re,d(l){l&&(p(e),p(t))}}}function sm(r){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function im(r){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function am(r){let e,n,t,l,o,s,f,i,a,u,c;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[sm]},$$scope:{ctx:r}}}),i=new te({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[im]},$$scope:{ctx:r}}}),u=new at({}),{c(){e=T("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),l=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),s=T("p"),f=k("Icon from "),b(i.$$.fragment),a=O(),b(u.$$.fragment)},m(_,m){$(_,e,m),h(e,n),v(t,e,null),h(e,l),$(_,o,m),$(_,s,m),h(s,f),v(i,s,null),$(_,a,m),v(u,_,m),c=!0},p(_,m){const S={};m&16&&(S.$$scope={dirty:m,ctx:_}),t.$set(S);const C={};m&16&&(C.$$scope={dirty:m,ctx:_}),i.$set(C)},i(_){c||(g(t.$$.fragment,_),g(i.$$.fragment,_),g(u.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(i.$$.fragment,_),d(u.$$.fragment,_),c=!1},d(_){_&&(p(e),p(o),p(s),p(a)),w(t),w(i),w(u,_)}}}function fm(r){let e,n,t;return n=new _e({props:{$$slots:{default:[am]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function um(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=(s[3].capacity??"unknown")+"")&&z(o,l)},d(s){s&&p(e)}}}function cm(r){let e,n;return e=new fe({props:{$$slots:{default:[um,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $m(r){let e,n;const t=[H(Wt),{sourceLayer:Wt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[cm]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new dn({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&ae(H(Wt)),s&0&&{sourceLayer:Wt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function pm(r){let e,n,t,l,o;function s(i){r[2](i)}let f={$$slots:{right:[fm],default:[om]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>Y(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Wt}.pmtiles`,$$slots:{default:[$m]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Wt="cycle_parking";function mm(r,e,n){let t,l=Pe(Wt);x(r,l,s=>n(0,t=s));function o(s){t=s,l.set(t)}return[t,l,o]}class _m extends J{constructor(e){super(),K(this,e,mm,pm,X,{})}}function gm(r){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function dm(r){let e,n,t,l;return t=new at({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:re,i(o){l||(g(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function hm(r){let e,n,t;return n=new _e({props:{$$slots:{default:[dm]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function _l(r){let e,n,t;return n=new it({props:{$$slots:{default:[km]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(n.$$.fragment),Te(e,"border","1px solid black"),Te(e,"padding","8px")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2049&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function bm(r){let e,n,t;return e=new De({props:{color:Z.education.schools}}),{c(){b(e.$$.fragment),n=k(`
        Schools`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function vm(r){let e,n,t;return e=new De({props:{color:Z.education.colleges}}),{c(){b(e.$$.fragment),n=k(`
        Colleges`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function wm(r){let e,n,t;return e=new De({props:{color:Z.education.universities}}),{c(){b(e.$$.fragment),n=k(`
        Universities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function km(r){let e,n,t,l,o,s,f,i,a;function u(y){r[4](y)}let c={$$slots:{default:[bm]},$$scope:{ctx:r}};r[0].school!==void 0&&(c.checked=r[0].school),e=new oe({props:c}),W.push(()=>Y(e,"checked",u));function _(y){r[5](y)}let m={$$slots:{default:[vm]},$$scope:{ctx:r}};r[0].college!==void 0&&(m.checked=r[0].college),l=new oe({props:m}),W.push(()=>Y(l,"checked",_));function S(y){r[6](y)}let C={$$slots:{default:[wm]},$$scope:{ctx:r}};return r[0].university!==void 0&&(C.checked=r[0].university),f=new oe({props:C}),W.push(()=>Y(f,"checked",S)),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment),s=O(),b(f.$$.fragment)},m(y,I){v(e,y,I),$(y,t,I),v(l,y,I),$(y,s,I),v(f,y,I),a=!0},p(y,I){const E={};I&2048&&(E.$$scope={dirty:I,ctx:y}),!n&&I&1&&(n=!0,E.checked=y[0].school,V(()=>n=!1)),e.$set(E);const N={};I&2048&&(N.$$scope={dirty:I,ctx:y}),!o&&I&1&&(o=!0,N.checked=y[0].college,V(()=>o=!1)),l.$set(N);const A={};I&2048&&(A.$$scope={dirty:I,ctx:y}),!i&&I&1&&(i=!0,A.checked=y[0].university,V(()=>i=!1)),f.$set(A)},i(y){a||(g(e.$$.fragment,y),g(l.$$.fragment,y),g(f.$$.fragment,y),a=!0)},o(y){d(e.$$.fragment,y),d(l.$$.fragment,y),d(f.$$.fragment,y),a=!1},d(y){y&&(p(t),p(s)),w(e,y),w(l,y),w(f,y)}}}function ym(r){let e,n=(r[10].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&1024&&n!==(n=(l[10].name??"Unnamed institution")+"")&&z(t,n)},d(l){l&&p(e)}}}function Sm(r){let e,n;return e=new fe({props:{$$slots:{default:[ym,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Cm(r){let e,n;const t=[H(Yt),{sourceLayer:Yt},{paint:{"fill-color":mt(["get","type"],{school:Z.education.schools,college:Z.education.colleges,university:Z.education.universities},"grey"),"fill-opacity":Q(.7,1)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[2](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Sm]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Ge({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&5?ne(t,[s&0&&ae(H(Yt)),s&0&&{sourceLayer:Yt},t[2],s&1&&{layout:{visibility:o[0].show?"visible":"none"}},s&5&&{filter:o[2](o[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Tm(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={$$slots:{right:[hm],default:[gm]},$$scope:{ctx:r}};r[0].show!==void 0&&(i.checked=r[0].show),e=new oe({props:i}),W.push(()=>Y(e,"checked",f));let a=r[0].show&&_l(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Yt}.pmtiles`,$$slots:{default:[Cm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0].show,V(()=>n=!1)),e.$set(_),u[0].show?a?(a.p(u,c),c&1&&g(a,1)):(a=_l(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&2049&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Yt="education";function Om(r){return{show:!0,school:r.includes("school"),college:r.includes("college"),university:r.includes("university")}}function Lm(r,e,n){let t,l=["school","college","university"],o={show:!1,school:!0,college:!0,university:!0};function s(m){return m.show?l.filter(S=>m[S]).join(","):null}let f=Lt(Yt,o,s,Om);x(r,f,m=>n(0,t=m));function i(m){let S=l.filter(C=>m[C]);return["in",["get","type"],["literal",S]]}function a(m){r.$$.not_equal(t.show,m)&&(t.show=m,f.set(t))}function u(m){r.$$.not_equal(t.school,m)&&(t.school=m,f.set(t))}function c(m){r.$$.not_equal(t.college,m)&&(t.college=m,f.set(t))}function _(m){r.$$.not_equal(t.university,m)&&(t.university=m,f.set(t))}return[t,f,i,a,u,c,_]}class Am extends J{constructor(e){super(),K(this,e,Lm,Tm,X,{})}}function Pm(r){let e,n,t,l;return e=new De({props:{color:r[4]}}),{c(){b(e.$$.fragment),n=O(),t=k(r[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),l=!0},p(o,s){(!l||s&4)&&z(t,o[2])},i(o){l||(g(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function Im(r){let e;const n=r[6].default,t=wt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&kt(t,n,l,l[8],e?St(n,l[8],o,null):yt(l[8]),null)},i(l){e||(g(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Nm(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Im]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Mm(r){let e,n=(r[9].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&514&&n!==(n=(l[9].name??`Unnamed ${l[1]}`)+"")&&z(t,n)},d(l){l&&p(e)}}}function Dm(r){let e,n;return e=new fe({props:{$$slots:{default:[Mm,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&770&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Fm(r){let e,n;const t=[H(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Q(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Dm]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Ge({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&25?ne(t,[s&1&&ae(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Q(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&258&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Em(r){let e,n,t,l,o;function s(i){r[7](i)}let f={$$slots:{right:[Nm],default:[Pm]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.checked=r[3]),e=new oe({props:f}),W.push(()=>Y(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Fm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&260&&(u.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,u.checked=i[3],V(()=>n=!1)),e.$set(u);const c={};a&1&&(c.url=`pmtiles://${be()}/v1/${i[0]}.pmtiles`),a&267&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function Rm(r,e,n){let t,{$$slots:l={},$$scope:o}=e,{name:s}=e,{singularNoun:f}=e,{pluralNoun:i}=e,a=Z[s],u=Pe(s);x(r,u,_=>n(3,t=_));function c(_){t=_,u.set(t)}return r.$$set=_=>{"name"in _&&n(0,s=_.name),"singularNoun"in _&&n(1,f=_.singularNoun),"pluralNoun"in _&&n(2,i=_.pluralNoun),"$$scope"in _&&n(8,o=_.$$scope)},[s,f,i,t,a,u,l,c,o]}class Co extends J{constructor(e){super(),K(this,e,Rm,Em,X,{name:0,singularNoun:1,pluralNoun:2})}}function jm(r){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zm(r){let e,n,t,l,o,s,f;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[jm]},$$scope:{ctx:r}}}),s=new at({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function qm(r){let e,n;return e=new Co({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[zm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Bm extends J{constructor(e){super(),K(this,e,null,qm,X,{})}}function Hm(r){let e,n,t;return{c(){e=T("img"),t=k(`
  Railway Stations`),cn(e.src,n=No)||U(e,"src",n),U(e,"alt","A logo representing a train")},m(l,o){$(l,e,o),$(l,t,o)},p:re,d(l){l&&(p(e),p(t))}}}function Um(r){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gm(r){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wm(r){let e,n,t,l,o,s,f,i,a,u,c,_;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Um]},$$scope:{ctx:r}}}),i=new te({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Gm]},$$scope:{ctx:r}}}),c=new at({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),s=T("p"),f=k("Icon from "),b(i.$$.fragment),a=k(". (Note that not all stations shown are National Rail.)"),u=O(),b(c.$$.fragment)},m(m,S){$(m,e,S),h(e,n),v(t,e,null),h(e,l),$(m,o,S),$(m,s,S),h(s,f),v(i,s,null),h(s,a),$(m,u,S),v(c,m,S),_=!0},p(m,S){const C={};S&16&&(C.$$scope={dirty:S,ctx:m}),t.$set(C);const y={};S&16&&(y.$$scope={dirty:S,ctx:m}),i.$set(y)},i(m){_||(g(t.$$.fragment,m),g(i.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(i.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(u)),w(t),w(i),w(c,m)}}}function Ym(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Wm]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Vm(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&z(t,n)},d(l){l&&p(e)}}}function Xm(r){let e,n;return e=new fe({props:{$$slots:{default:[Vm,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jm(r){let e,n;const t=[H(_n),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Xm]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new dn({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&ae(H(_n)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Km(r){let e,n,t,l,o;function s(i){r[2](i)}let f={$$slots:{right:[Ym],default:[Hm]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>Y(e,"checked",s)),l=new Tt({props:{data:`${be()}/v1/${_n}.geojson`,$$slots:{default:[Jm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let _n="railway_stations";function Zm(r,e,n){let t,l=Pe(_n);x(r,l,s=>n(0,t=s));function o(s){t=s,l.set(t)}return[t,l,o]}class Qm extends J{constructor(e){super(),K(this,e,Zm,Km,X,{})}}function xm(r){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function e_(r){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function t_(r){let e,n,t,l,o,s,f,i,a;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[xm]},$$scope:{ctx:r}}}),o=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[e_]},$$scope:{ctx:r}}}),i=new at({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:u}),t.$set(_);const m={};c&1&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function n_(r){let e,n;return e=new Co({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[t_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class r_ extends J{constructor(e){super(),K(this,e,null,n_,X,{})}}function l_(r){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function o_(r){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function s_(r){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function i_(r){let e,n,t,l,o,s,f,i,a,u,c,_,m,S,C,y,I,E,N,A,L,M,F;return t=new te({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[o_]},$$scope:{ctx:r}}}),I=new te({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[s_]},$$scope:{ctx:r}}}),M=new ze({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),l=k(" dataset. Please note these limitations:"),o=O(),s=T("ul"),f=T("li"),f.textContent="Only collisions between 2017 and 2022 are included",i=O(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,u=O(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,_=O(),m=T("li"),m.textContent='The "pedestrians" category also include mobility scooters',S=O(),C=T("li"),y=k("All limitations "),b(I.$$.fragment),E=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),N=O(),A=T("p"),A.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=O(),b(M.$$.fragment)},m(P,j){$(P,e,j),h(e,n),v(t,e,null),h(e,l),$(P,o,j),$(P,s,j),h(s,f),h(s,i),h(s,a),h(s,u),h(s,c),h(s,_),h(s,m),h(s,S),h(s,C),h(C,y),v(I,C,null),h(C,E),$(P,N,j),$(P,A,j),$(P,L,j),v(M,P,j),F=!0},p(P,j){const G={};j&4194304&&(G.$$scope={dirty:j,ctx:P}),t.$set(G);const B={};j&4194304&&(B.$$scope={dirty:j,ctx:P}),I.$set(B)},i(P){F||(g(t.$$.fragment,P),g(I.$$.fragment,P),g(M.$$.fragment,P),F=!0)},o(P){d(t.$$.fragment,P),d(I.$$.fragment,P),d(M.$$.fragment,P),F=!1},d(P){P&&(p(e),p(o),p(s),p(N),p(A),p(L)),w(t),w(I),w(M,P)}}}function a_(r){let e,n,t;return n=new _e({props:{$$slots:{default:[i_]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&4194304&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function gl(r){let e,n,t,l,o,s,f,i,a,u,c,_,m;return n=new it({props:{small:!0,$$slots:{default:[p_]},$$scope:{ctx:r}}}),u=new Hn({props:{rows:r[9]}}),{c(){e=T("div"),b(n.$$.fragment),t=O(),l=T("div"),o=k(`Filter years:
      `),s=T("input"),f=k(`
      -
      `),i=T("input"),a=O(),b(u.$$.fragment),U(s,"type","number"),U(s,"min",2017),U(s,"max",2022),U(s,"class","svelte-1ft65rw"),U(i,"type","number"),U(i,"min",2017),U(i,"max",2022),U(i,"class","svelte-1ft65rw"),Te(e,"border","1px solid black"),Te(e,"padding","8px")},m(S,C){$(S,e,C),v(n,e,null),h(e,t),h(e,l),h(l,o),h(l,s),rt(s,r[0].minYear),h(l,f),h(l,i),rt(i,r[0].maxYear),h(e,a),v(u,e,null),c=!0,_||(m=[ot(s,"input",r[15]),ot(i,"input",r[16])],_=!0)},p(S,C){const y={};C&4194305&&(y.$$scope={dirty:C,ctx:S}),n.$set(y),C&1&&nn(s.value)!==S[0].minYear&&rt(s,S[0].minYear),C&1&&nn(i.value)!==S[0].maxYear&&rt(i,S[0].maxYear)},i(S){c||(g(n.$$.fragment,S),g(u.$$.fragment,S),c=!0)},o(S){d(n.$$.fragment,S),d(u.$$.fragment,S),c=!1},d(S){S&&p(e),w(n),w(u),_=!1,no(m)}}}function f_(r){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function u_(r){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function c_(r){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $_(r){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function p_(r){let e,n,t,l,o,s,f,i,a,u,c,_;function m(L){r[11](L)}let S={$$slots:{default:[f_]},$$scope:{ctx:r}};r[0].pedestrians!==void 0&&(S.checked=r[0].pedestrians),e=new oe({props:S}),W.push(()=>Y(e,"checked",m));function C(L){r[12](L)}let y={$$slots:{default:[u_]},$$scope:{ctx:r}};r[0].cyclists!==void 0&&(y.checked=r[0].cyclists),l=new oe({props:y}),W.push(()=>Y(l,"checked",C));function I(L){r[13](L)}let E={$$slots:{default:[c_]},$$scope:{ctx:r}};r[0].horseRiders!==void 0&&(E.checked=r[0].horseRiders),f=new oe({props:E}),W.push(()=>Y(f,"checked",I));function N(L){r[14](L)}let A={$$slots:{default:[$_]},$$scope:{ctx:r}};return r[0].other!==void 0&&(A.checked=r[0].other),u=new oe({props:A}),W.push(()=>Y(u,"checked",N)),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment),s=O(),b(f.$$.fragment),a=O(),b(u.$$.fragment)},m(L,M){v(e,L,M),$(L,t,M),v(l,L,M),$(L,s,M),v(f,L,M),$(L,a,M),v(u,L,M),_=!0},p(L,M){const F={};M&4194304&&(F.$$scope={dirty:M,ctx:L}),!n&&M&1&&(n=!0,F.checked=L[0].pedestrians,V(()=>n=!1)),e.$set(F);const P={};M&4194304&&(P.$$scope={dirty:M,ctx:L}),!o&&M&1&&(o=!0,P.checked=L[0].cyclists,V(()=>o=!1)),l.$set(P);const j={};M&4194304&&(j.$$scope={dirty:M,ctx:L}),!i&&M&1&&(i=!0,j.checked=L[0].horseRiders,V(()=>i=!1)),f.$set(j);const G={};M&4194304&&(G.$$scope={dirty:M,ctx:L}),!c&&M&1&&(c=!0,G.checked=L[0].other,V(()=>c=!1)),u.$set(G)},i(L){_||(g(e.$$.fragment,L),g(l.$$.fragment,L),g(f.$$.fragment,L),g(u.$$.fragment,L),_=!0)},o(L){d(e.$$.fragment,L),d(l.$$.fragment,L),d(f.$$.fragment,L),d(u.$$.fragment,L),_=!1},d(L){L&&(p(t),p(s),p(a)),w(e,L),w(l,L),w(f,L),w(u,L)}}}function dl(r){let e,n,t,l=r[3][r[21].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&2097152&&l!==(l=s[3][s[21].pedestrian_location]+"")&&z(o,l)},d(s){s&&p(e)}}}function hl(r){let e,n,t,l=r[4][r[21].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&2097152&&l!==(l=s[4][s[21].pedestrian_movement]+"")&&z(o,l)},d(s){s&&p(e)}}}function m_(r){let e,n,t,l=r[21].year+"",o,s,f,i,a,u=r[5][r[21].severity]+"",c,_,m,S,C,y=bl(r[21])+"",I,E,N,A,L,M=r[21].pedestrian_location&&dl(r),F=r[21].pedestrian_movement&&hl(r);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(l),s=O(),f=T("p"),i=k("Severity: "),a=T("b"),c=k(u),_=O(),m=T("p"),S=k("Casualties: "),C=T("b"),I=k(y),E=O(),M&&M.c(),N=O(),F&&F.c(),A=O(),L=T("p"),L.textContent="Click to open full report in CycleStreets"},m(P,j){$(P,e,j),h(e,n),h(e,t),h(t,o),$(P,s,j),$(P,f,j),h(f,i),h(f,a),h(a,c),$(P,_,j),$(P,m,j),h(m,S),h(m,C),h(C,I),$(P,E,j),M&&M.m(P,j),$(P,N,j),F&&F.m(P,j),$(P,A,j),$(P,L,j)},p(P,j){j&2097152&&l!==(l=P[21].year+"")&&z(o,l),j&2097152&&u!==(u=P[5][P[21].severity]+"")&&z(c,u),j&2097152&&y!==(y=bl(P[21])+"")&&z(I,y),P[21].pedestrian_location?M?M.p(P,j):(M=dl(P),M.c(),M.m(N.parentNode,N)):M&&(M.d(1),M=null),P[21].pedestrian_movement?F?F.p(P,j):(F=hl(P),F.c(),F.m(A.parentNode,A)):F&&(F.d(1),F=null)},d(P){P&&(p(e),p(s),p(f),p(_),p(m),p(E),p(N),p(A),p(L)),M&&M.d(P),F&&F.d(P)}}}function __(r){let e,n;return e=new fe({props:{$$slots:{default:[m_,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&6291456&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function g_(r){let e,n;const t=[H(Vt),{sourceLayer:Vt},{paint:{"circle-color":Ae(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[1]},{layout:{visibility:r[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[__]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new _t({props:l}),e.$on("click",b_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&451?ne(t,[s&0&&ae(H(Vt)),s&0&&{sourceLayer:Vt},s&448&&{paint:{"circle-color":Ae(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:o[1]},s&1&&{layout:{visibility:o[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function d_(r){let e,n,t,l,o,s;function f(u){r[10](u)}let i={$$slots:{right:[a_],default:[l_]},$$scope:{ctx:r}};r[0].show!==void 0&&(i.checked=r[0].show),e=new oe({props:i}),W.push(()=>Y(e,"checked",f));let a=r[0].show&&gl(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Vt}.pmtiles`,$$slots:{default:[g_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&4194304&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0].show,V(()=>n=!1)),e.$set(_),u[0].show?a?(a.p(u,c),c&1&&g(a,1)):(a=gl(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&4194307&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Vt="stats19";function h_(r){let[e,n,t]=r.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(n),maxYear:parseInt(t)}}function bl(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function b_(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function v_(r,e,n){let t,l,o=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function f(P){return P.show?`${o.filter(G=>P[G]).join(",")}/${P.minYear}/${P.maxYear}`:null}let i=Lt(Vt,s,f,h_);x(r,i,P=>n(0,l=P));function a(P,j,G,B,R,D){let q=["any"];return l.pedestrians&&q.push(["get","pedestrian"]),l.cyclists&&q.push(["get","cyclist"]),l.horseRiders&&q.push(["get","horse_rider"]),l.other&&q.push(["get","other"]),["all",[">=",["get","year"],l.minYear],["<=",["get","year"],l.maxYear],q]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},_={1:"Fatal",2:"Serious",3:"Slight"},m=Z.sequential_low_to_high[4],S=Z.sequential_low_to_high[2],C=Z.sequential_low_to_high[0],y=[["Fatal",m],["Serious",S],["Slight",C]];function I(P){r.$$.not_equal(l.show,P)&&(l.show=P,i.set(l))}function E(P){r.$$.not_equal(l.pedestrians,P)&&(l.pedestrians=P,i.set(l))}function N(P){r.$$.not_equal(l.cyclists,P)&&(l.cyclists=P,i.set(l))}function A(P){r.$$.not_equal(l.horseRiders,P)&&(l.horseRiders=P,i.set(l))}function L(P){r.$$.not_equal(l.other,P)&&(l.other=P,i.set(l))}function M(){l.minYear=nn(this.value),i.set(l)}function F(){l.maxYear=nn(this.value),i.set(l)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t=a(l.minYear,l.maxYear,l.pedestrians,l.cyclists,l.horseRiders,l.other))},[l,t,i,u,c,_,m,S,C,y,I,E,N,A,L,M,F]}class w_ extends J{constructor(e){super(),K(this,e,v_,d_,X,{})}}function k_(r){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function y_(r){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function S_(r){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function C_(r){let e,n,t,l,o,s,f,i,a,u,c;return t=new te({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[y_]},$$scope:{ctx:r}}}),o=new te({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[S_]},$$scope:{ctx:r}}}),u=new ze({}),{c(){e=T("p"),n=k("AADF (annual average daily flow) data from "),b(t.$$.fragment),l=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),f=O(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=O(),b(u.$$.fragment)},m(_,m){$(_,e,m),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(_,f,m),$(_,i,m),$(_,a,m),v(u,_,m),c=!0},p(_,m){const S={};m&128&&(S.$$scope={dirty:m,ctx:_}),t.$set(S);const C={};m&128&&(C.$$scope={dirty:m,ctx:_}),o.$set(C)},i(_){c||(g(t.$$.fragment,_),g(o.$$.fragment,_),g(u.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(u.$$.fragment,_),c=!1},d(_){_&&(p(e),p(f),p(i),p(a)),w(t),w(o),w(u,_)}}}function T_(r){let e,n,t;return n=new _e({props:{$$slots:{default:[C_]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function vl(r){let e,n;return e=new We({props:{colorScale:r[1],limits:r[3]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function O_(r){let e,n=r[6].location+"",t,l,o,s,f=r[6].year+"",i,a,u,c=r[6].motor_vehicles.toLocaleString()+"",_,m,S,C,y=r[6].year+"",I,E,N,A=r[6].pedal_cycles.toLocaleString()+"",L,M,F,P,j,G=r[6].method+"",B;return{c(){e=T("h2"),t=k(n),l=O(),o=T("p"),s=k("Total motor vehicles ("),i=k(f),a=k(` AADF):
        `),u=T("b"),_=k(c),m=O(),S=T("p"),C=k("Total pedal cycles ("),I=k(y),E=k(` AADF):
        `),N=T("b"),L=k(A),M=O(),F=T("p"),P=k("Count method: "),j=T("b"),B=k(G)},m(R,D){$(R,e,D),h(e,t),$(R,l,D),$(R,o,D),h(o,s),h(o,i),h(o,a),h(o,u),h(u,_),$(R,m,D),$(R,S,D),h(S,C),h(S,I),h(S,E),h(S,N),h(N,L),$(R,M,D),$(R,F,D),h(F,P),h(F,j),h(j,B)},p(R,D){D&64&&n!==(n=R[6].location+"")&&z(t,n),D&64&&f!==(f=R[6].year+"")&&z(i,f),D&64&&c!==(c=R[6].motor_vehicles.toLocaleString()+"")&&z(_,c),D&64&&y!==(y=R[6].year+"")&&z(I,y),D&64&&A!==(A=R[6].pedal_cycles.toLocaleString()+"")&&z(L,A),D&64&&G!==(G=R[6].method+"")&&z(B,G)},d(R){R&&(p(e),p(l),p(o),p(m),p(S),p(M),p(F))}}}function L_(r){let e,n;return e=new fe({props:{$$slots:{default:[O_,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&192&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function A_(r){let e,n;const t=[H(Xt),{sourceLayer:Xt},{paint:{"circle-color":Ae(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[L_]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new _t({props:l}),e.$on("click",I_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&ae(H(Xt)),s&0&&{sourceLayer:Xt},s&6&&{paint:{"circle-color":Ae(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function P_(r){let e,n,t,l,o,s;function f(u){r[5](u)}let i={$$slots:{right:[T_],default:[k_]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>Y(e,"checked",f));let a=r[0]&&vl(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Xt}.pmtiles`,$$slots:{default:[A_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&128&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],V(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=vl(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&129&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Xt="vehicle_counts";function I_(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function N_(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,4e4,8e4,12e4,16e4,205e3],s=["","40k","80k","120k","160k",""],f=Pe(Xt);x(r,f,a=>n(0,t=a));function i(a){t=a,f.set(t)}return[t,l,o,s,f,i]}class M_ extends J{constructor(e){super(),K(this,e,N_,P_,X,{})}}function D_(r){let e,n,t,l,o,s,f,i;return e=new Am({}),t=new Bm({}),o=new r_({}),f=new Qm({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),$(a,l,u),v(o,a,u),$(a,s,u),v(f,a,u),i=!0},i(a){i||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(p(n),p(l),p(s)),w(e,a),w(t,a),w(o,a),w(f,a)}}}function F_(r){let e,n;return e=new it({props:{small:!0,$$slots:{default:[D_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function E_(r){let e,n,t,l,o,s,f,i,a,u,c,_;return e=new Fc({}),t=new c$({}),o=new Wc({}),f=new t$({}),a=new _m({}),c=new Xp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment),u=O(),b(c.$$.fragment)},m(m,S){v(e,m,S),$(m,n,S),v(t,m,S),$(m,l,S),v(o,m,S),$(m,s,S),v(f,m,S),$(m,i,S),v(a,m,S),$(m,u,S),v(c,m,S),_=!0},i(m){_||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),g(f.$$.fragment,m),g(a.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),d(a.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(n),p(l),p(s),p(i),p(u)),w(e,m),w(t,m),w(o,m),w(f,m),w(a,m),w(c,m)}}}function R_(r){let e,n;return e=new it({props:{small:!0,$$slots:{default:[E_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function j_(r){let e,n,t,l,o,s;return e=new wc({}),t=new dp({}),o=new Op({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment)},m(f,i){v(e,f,i),$(f,n,i),v(t,f,i),$(f,l,i),v(o,f,i),s=!0},i(f){s||(g(e.$$.fragment,f),g(t.$$.fragment,f),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l)),w(e,f),w(t,f),w(o,f)}}}function z_(r){let e,n,t,l,o,s,f,i,a,u;return e=new Pu({}),t=new ic({}),o=new Rf({}),f=new ou({}),a=new bu({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment)},m(c,_){v(e,c,_),$(c,n,_),v(t,c,_),$(c,l,_),v(o,c,_),$(c,s,_),v(f,c,_),$(c,i,_),v(a,c,_),u=!0},i(c){u||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(f.$$.fragment,c),d(a.$$.fragment,c),u=!1},d(c){c&&(p(n),p(l),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(f,c),w(a,c)}}}function q_(r){let e,n;return e=new it({props:{small:!0,$$slots:{default:[z_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function B_(r){let e,n,t,l;return e=new Tf({}),t=new Xf({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function H_(r){let e,n;return e=new it({props:{small:!0,$$slots:{default:[B_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function U_(r){let e,n,t,l,o,s;return e=new fp({}),t=new S$({}),o=new x$({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment)},m(f,i){v(e,f,i),$(f,n,i),v(t,f,i),$(f,l,i),v(o,f,i),s=!0},i(f){s||(g(e.$$.fragment,f),g(t.$$.fragment,f),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l)),w(e,f),w(t,f),w(o,f)}}}function G_(r){let e,n,t,l,o,s,f,i,a=Pn()=="Private (development)",u,c,_,m,S;e=new M_({}),t=new w_({}),o=new q$({}),f=new lm({});let C=a&&U_();return c=new qu({}),m=new Ku({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),C&&C.c(),u=O(),b(c.$$.fragment),_=O(),b(m.$$.fragment)},m(y,I){v(e,y,I),$(y,n,I),v(t,y,I),$(y,l,I),v(o,y,I),$(y,s,I),v(f,y,I),$(y,i,I),C&&C.m(y,I),$(y,u,I),v(c,y,I),$(y,_,I),v(m,y,I),S=!0},p:re,i(y){S||(g(e.$$.fragment,y),g(t.$$.fragment,y),g(o.$$.fragment,y),g(f.$$.fragment,y),g(C),g(c.$$.fragment,y),g(m.$$.fragment,y),S=!0)},o(y){d(e.$$.fragment,y),d(t.$$.fragment,y),d(o.$$.fragment,y),d(f.$$.fragment,y),d(C),d(c.$$.fragment,y),d(m.$$.fragment,y),S=!1},d(y){y&&(p(n),p(l),p(s),p(i),p(u),p(_)),w(e,y),w(t,y),w(o,y),w(f,y),C&&C.d(y),w(c,y),w(m,y)}}}function W_(r){let e,n;return e=new it({props:{small:!0,$$slots:{default:[G_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Y_(r){let e,n,t,l,o;function s(i){r[3](i)}let f={};return r[0]!==void 0&&(f.enabled=r[0]),e=new Yo({props:f}),W.push(()=>Y(e,"enabled",s)),l=new Ts({}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,a){const u={};!n&&a&1&&(n=!0,u.enabled=i[0],V(()=>n=!1)),e.$set(u)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function V_(r){let e,n,t,l,o,s,f,i,a,u,c,_,m,S,C,y,I,E;return e=new Rp({}),t=new qe({props:{label:"Trip generators",$$slots:{default:[F_]},$$scope:{ctx:r}}}),o=new qe({props:{label:"Existing infrastructure",$$slots:{default:[R_]},$$scope:{ctx:r}}}),f=new qe({props:{label:"Public transit",$$slots:{default:[j_]},$$scope:{ctx:r}}}),a=new qe({props:{label:"Boundaries",$$slots:{default:[q_]},$$scope:{ctx:r}}}),c=new qe({props:{label:"Census",$$slots:{default:[H_]},$$scope:{ctx:r}}}),m=new qe({props:{label:"Other",$$slots:{default:[W_]},$$scope:{ctx:r}}}),C=new qe({props:{label:"Tools",$$slots:{default:[Y_]},$$scope:{ctx:r}}}),I=new Wo({props:{disabled:!r[1]}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment),u=O(),b(c.$$.fragment),_=O(),b(m.$$.fragment),S=O(),b(C.$$.fragment),y=O(),b(I.$$.fragment)},m(N,A){v(e,N,A),$(N,n,A),v(t,N,A),$(N,l,A),v(o,N,A),$(N,s,A),v(f,N,A),$(N,i,A),v(a,N,A),$(N,u,A),v(c,N,A),$(N,_,A),v(m,N,A),$(N,S,A),v(C,N,A),$(N,y,A),v(I,N,A),E=!0},p(N,A){const L={};A&16&&(L.$$scope={dirty:A,ctx:N}),t.$set(L);const M={};A&16&&(M.$$scope={dirty:A,ctx:N}),o.$set(M);const F={};A&16&&(F.$$scope={dirty:A,ctx:N}),f.$set(F);const P={};A&16&&(P.$$scope={dirty:A,ctx:N}),a.$set(P);const j={};A&16&&(j.$$scope={dirty:A,ctx:N}),c.$set(j);const G={};A&16&&(G.$$scope={dirty:A,ctx:N}),m.$set(G);const B={};A&17&&(B.$$scope={dirty:A,ctx:N}),C.$set(B);const R={};A&2&&(R.disabled=!N[1]),I.$set(R)},i(N){E||(g(e.$$.fragment,N),g(t.$$.fragment,N),g(o.$$.fragment,N),g(f.$$.fragment,N),g(a.$$.fragment,N),g(c.$$.fragment,N),g(m.$$.fragment,N),g(C.$$.fragment,N),g(I.$$.fragment,N),E=!0)},o(N){d(e.$$.fragment,N),d(t.$$.fragment,N),d(o.$$.fragment,N),d(f.$$.fragment,N),d(a.$$.fragment,N),d(c.$$.fragment,N),d(m.$$.fragment,N),d(C.$$.fragment,N),d(I.$$.fragment,N),E=!1},d(N){N&&(p(n),p(l),p(s),p(i),p(u),p(_),p(S),p(y)),w(e,N),w(t,N),w(o,N),w(f,N),w(a,N),w(c,N),w(m,N),w(C,N),w(I,N)}}}function X_(r){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Ge({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&2?ne(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function J_(r){let e,n,t,l;return e=new qe({props:{label:"Layers",open:!0,$$slots:{default:[V_]},$$scope:{ctx:r}}}),t=new Tt({props:{data:r[2],$$slots:{default:[X_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&19&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function K_(r,e,n){let t,l;x(r,Pr,f=>n(1,l=f));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(f){t=f,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&Pr.set(!t)},[t,l,o,s]}class Z_ extends J{constructor(e){super(),K(this,e,K_,J_,X,{})}}function Q_(r){let e;function n(o,s){return o[2]<=100?tg:eg}let t=n(r),l=t(r);return{c(){l.c(),e=Ne()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},i:re,o:re,d(o){o&&p(e),l.d(o)}}}function x_(r){let e,n;return e=new ut({props:{$$slots:{default:[ng]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function eg(r){let e;return{c(){e=T("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(n,t){$(n,e,t)},p:re,d(n){n&&p(e)}}}function tg(r){let e,n,t;return{c(){e=T("label"),n=k(`Downloading scheme data
      `),t=T("progress"),t.value=r[2],U(t,"class","svelte-q3473n")},m(l,o){$(l,e,o),h(e,n),h(e,t)},p(l,o){o&4&&(t.value=l[2])},d(l){l&&p(e)}}}function ng(r){let e;return{c(){e=k("Load latest scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rg(r){let e,n,t,l;const o=[x_,Q_],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(r))&&(n=s[e]=o[e](r)),{c(){n&&n.c(),t=Ne()},m(i,a){~e&&s[e].m(i,a),$(i,t,a),l=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(n&&(ce(),d(s[u],1,1,()=>{s[u]=null}),$e()),~e?(n=s[e],n?n.p(i,a):(n=s[e]=o[e](i),n.c()),g(n,1),n.m(t.parentNode,t)):n=null)},i(i){l||(g(n),l=!0)},o(i){d(n),l=!1},d(i){i&&p(t),~e&&s[e].d(i)}}}function lg(r,e,n){let{loadFile:t}=e,l=!new URLSearchParams(window.location.search).has("disable_schemes"),o=!0,s=0;async function f(){let a=await Mo(`${gn()}/v1/all_schemes_output.geojson.gz`,c=>{n(2,s=c)});n(2,s=100);let u=new TextDecoder().decode(a);t(u),n(1,o=!1)}Bn(async()=>{l&&await f()});async function i(){n(0,l=!0),await f()}return r.$$set=a=>{"loadFile"in a&&n(4,t=a.loadFile)},[l,o,s,i,t]}class og extends J{constructor(e){super(),K(this,e,lg,rg,X,{loadFile:4})}}function wl(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=T("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),h(e,n),h(e,l)},p(s,f){var i;f&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&z(l,t)},d(s){s&&p(e)}}}function sg(r){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ig(r){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ag(r){let e,n,t,l;return e=new ut({props:{$$slots:{default:[sg]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new ut({props:{$$slots:{default:[ig]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function fg(r){var j,G,B,R;let e,n,t=r[0].scheme_reference+"",l,o,s,f,i=((j=r[0].browse)==null?void 0:j.authority_or_region)+"",a,u,c,_,m=((G=r[0].browse)==null?void 0:G.capital_scheme_id)+"",S,C,y,I,E=((B=r[0].browse)==null?void 0:B.funding_programme)+"",N,A,L,M,F,P=((R=r[0].browse)==null?void 0:R.current_milestone)&&wl(r);return M=new Vo({props:{$$slots:{default:[ag]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("Scheme reference: "),l=k(t),o=O(),s=T("p"),f=k("Authority or region: "),a=k(i),u=O(),c=T("p"),_=k("Capital scheme ID: "),S=k(m),C=O(),y=T("p"),I=k("Funding programme: "),N=k(E),A=O(),P&&P.c(),L=O(),b(M.$$.fragment)},m(D,q){$(D,e,q),h(e,n),h(e,l),$(D,o,q),$(D,s,q),h(s,f),h(s,a),$(D,u,q),$(D,c,q),h(c,_),h(c,S),$(D,C,q),$(D,y,q),h(y,I),h(y,N),$(D,A,q),P&&P.m(D,q),$(D,L,q),v(M,D,q),F=!0},p(D,q){var pe,Se,he,Ce;(!F||q&1)&&t!==(t=D[0].scheme_reference+"")&&z(l,t),(!F||q&1)&&i!==(i=((pe=D[0].browse)==null?void 0:pe.authority_or_region)+"")&&z(a,i),(!F||q&1)&&m!==(m=((Se=D[0].browse)==null?void 0:Se.capital_scheme_id)+"")&&z(S,m),(!F||q&1)&&E!==(E=((he=D[0].browse)==null?void 0:he.funding_programme)+"")&&z(N,E),(Ce=D[0].browse)!=null&&Ce.current_milestone?P?P.p(D,q):(P=wl(D),P.c(),P.m(L.parentNode,L)):P&&(P.d(1),P=null);const se={};q&32&&(se.$$scope={dirty:q,ctx:D}),M.$set(se)},i(D){F||(g(M.$$.fragment,D),F=!0)},o(D){d(M.$$.fragment,D),F=!1},d(D){D&&(p(e),p(o),p(s),p(u),p(c),p(C),p(y),p(A),p(L)),P&&P.d(D),w(M,D)}}}function ug(r){let e,n;return e=new qe({props:{label:`${r[0].scheme_name}`,$$slots:{default:[fg]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_name}`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cg(r,e,n){let t,l;x(r,Jt,i=>n(3,t=i)),x(r,qn,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(Do(i),{padding:20,animate:!1})}function f(){var u,c;let i={type:"FeatureCollection",features:t.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},a=((u=o.browse)==null?void 0:u.authority_or_region)||"unknown authority";Fo(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,f]}class $g extends J{constructor(e){super(),K(this,e,cg,ug,X,{scheme:0})}}function kl(r){let e,n,t,l=r[0].status+"",o;return{c(){e=T("p"),n=k("Status: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[0].status+"")&&z(o,l)},d(s){s&&p(e)}}}function yl(r){let e,n,t,l=r[0].timescale+"",o;return{c(){e=T("p"),n=k("Timescale: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[0].timescale+"")&&z(o,l)},d(s){s&&p(e)}}}function Sl(r){let e,n,t,l=r[0].timescale_year+"",o;return{c(){e=T("p"),n=k("Estimated completion year: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[0].timescale_year+"")&&z(o,l)},d(s){s&&p(e)}}}function Cl(r){let e,n,t,l=r[0].year_published+"",o;return{c(){e=T("p"),n=k("Scheme most recently published: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[0].year_published+"")&&z(o,l)},d(s){s&&p(e)}}}function Tl(r){let e,n,t,l=r[0].year_consulted+"",o;return{c(){e=T("p"),n=k("Scheme most recently consulted on: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[0].year_consulted+"")&&z(o,l)},d(s){s&&p(e)}}}function pg(r){let e,n,t,l,o,s=r[0].status&&kl(r),f=r[0].timescale&&yl(r),i=r[0].timescale_year&&Sl(r),a=r[0].year_published&&Cl(r),u=r[0].year_consulted&&Tl(r);return{c(){s&&s.c(),e=O(),f&&f.c(),n=O(),i&&i.c(),t=O(),a&&a.c(),l=O(),u&&u.c(),o=Ne()},m(c,_){s&&s.m(c,_),$(c,e,_),f&&f.m(c,_),$(c,n,_),i&&i.m(c,_),$(c,t,_),a&&a.m(c,_),$(c,l,_),u&&u.m(c,_),$(c,o,_)},p(c,[_]){c[0].status?s?s.p(c,_):(s=kl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,_):(f=yl(c),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,_):(i=Sl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,_):(a=Cl(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,_):(u=Tl(c),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i:re,o:re,d(c){c&&(p(e),p(n),p(t),p(l),p(o)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function mg(r,e,n){let{props:t}=e;return r.$$set=l=>{"props"in l&&n(0,t=l.props)},[t]}class To extends J{constructor(e){super(),K(this,e,mg,pg,X,{props:0})}}function Ol(r){let e,n,t,l=r[0].budget.toLocaleString()+"",o,s;return{c(){e=T("p"),n=k("Cost: "),t=T("b"),o=k(l),s=k(`
    GBP`)},m(f,i){$(f,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(f,i){i&1&&l!==(l=f[0].budget.toLocaleString()+"")&&z(o,l)},d(f){f&&p(e)}}}function Ll(r){let e;return{c(){e=T("p"),e.textContent="Development is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Al(r){let e;return{c(){e=T("p"),e.textContent="Construction is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pl(r){let e,n,t,l;return{c(){e=T("p"),n=k("Funding sources: "),t=T("b"),l=k(r[1])},m(o,s){$(o,e,s),h(e,n),h(e,t),h(t,l)},p(o,s){s&2&&z(l,o[1])},d(o){o&&p(e)}}}function _g(r){let e,n,t,l,o=r[0].budget&&Ol(r),s=r[0].development_funded&&Ll(),f=r[0].construction_funded&&Al(),i=r[1]&&Pl(r);return{c(){o&&o.c(),e=O(),s&&s.c(),n=O(),f&&f.c(),t=O(),i&&i.c(),l=Ne()},m(a,u){o&&o.m(a,u),$(a,e,u),s&&s.m(a,u),$(a,n,u),f&&f.m(a,u),$(a,t,u),i&&i.m(a,u),$(a,l,u)},p(a,[u]){a[0].budget?o?o.p(a,u):(o=Ol(a),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),a[0].development_funded?s||(s=Ll(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=Al(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=Pl(a),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},i:re,o:re,d(a){a&&(p(e),p(n),p(t),p(l)),o&&o.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function gg(r){if(!r.funding_sources)return"";let e=[];for(let n of["atf2","atf3","atf4","atf4e","crsts","luf"])r.funding_sources[n]&&e.push(n.toUpperCase());return r.funding_sources.other&&e.push(r.funding_sources.other),e.join(", ")}function dg(r,e,n){let t,{props:l}=e;return r.$$set=o=>{"props"in o&&n(0,l=o.props)},r.$$.update=()=>{r.$$.dirty&1&&n(1,t=gg(l))},[l,t]}class Oo extends J{constructor(e){super(),K(this,e,dg,_g,X,{props:0})}}function Cn(r){const e=r.slice(),n=e[1].pipeline;return e[5]=n,e}function Tn(r){const e=r.slice(),n=e[0].pipeline;return e[5]=n,e}function Il(r){let e,n,t,l=Zn(r[0].length_meters)+"",o;return{c(){e=T("p"),n=k("Length: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=Zn(s[0].length_meters)+"")&&z(o,l)},d(s){s&&p(e)}}}function Nl(r){let e,n=$t(r[0].description,r[2])+"";return{c(){e=T("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&5&&n!==(n=$t(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Ml(r){let e,n,t,l,o,s,f,i=r[5].atf4_type&&Dl(r),a=r[5].accuracy&&Fl(r),u=r[5].is_alternative&&El();return l=new Oo({props:{props:r[5]}}),s=new To({props:{props:r[5]}}),{c(){i&&i.c(),e=O(),a&&a.c(),n=O(),u&&u.c(),t=O(),b(l.$$.fragment),o=O(),b(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),u&&u.m(c,_),$(c,t,_),v(l,c,_),$(c,o,_),v(s,c,_),f=!0},p(c,_){c[5].atf4_type?i?i.p(c,_):(i=Dl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].accuracy?a?a.p(c,_):(a=Fl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].is_alternative?u||(u=El(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const m={};_&1&&(m.props=c[5]),l.$set(m);const S={};_&1&&(S.props=c[5]),s.$set(S)},i(c){f||(g(l.$$.fragment,c),g(s.$$.fragment,c),f=!0)},o(c){d(l.$$.fragment,c),d(s.$$.fragment,c),f=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),u&&u.d(c),w(l,c),w(s,c)}}}function Dl(r){let e,n,t,l=r[5].atf4_type+"",o;return{c(){e=T("p"),n=k("ATF4 type: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[5].atf4_type+"")&&z(o,l)},d(s){s&&p(e)}}}function Fl(r){let e,n,t,l=r[5].accuracy+"",o;return{c(){e=T("p"),n=k("Accuracy: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[5].accuracy+"")&&z(o,l)},d(s){s&&p(e)}}}function El(r){let e;return{c(){e=T("p"),e.textContent="Represents an alternative route"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rl(r){var s;let e,n,t,l=((s=r[1].browse)==null?void 0:s.capital_scheme_id)+"",o;return{c(){e=T("p"),n=k("Capital scheme ID: "),t=T("b"),o=k(l)},m(f,i){$(f,e,i),h(e,n),h(e,t),h(t,o)},p(f,i){var a;i&2&&l!==(l=((a=f[1].browse)==null?void 0:a.capital_scheme_id)+"")&&z(o,l)},d(f){f&&p(e)}}}function jl(r){var s;let e,n,t,l=((s=r[1].browse)==null?void 0:s.current_milestone)+"",o;return{c(){e=T("p"),n=k("Current milestone: "),t=T("b"),o=k(l)},m(f,i){$(f,e,i),h(e,n),h(e,t),h(t,o)},p(f,i){var a;i&2&&l!==(l=((a=f[1].browse)==null?void 0:a.current_milestone)+"")&&z(o,l)},d(f){f&&p(e)}}}function zl(r){let e,n,t,l,o,s,f,i=r[5].scheme_type&&ql(r),a=r[5].atf4_lead_type&&Bl(r),u=r[5].scheme_description&&Hl(r);return l=new Oo({props:{props:r[5]}}),s=new To({props:{props:r[5]}}),{c(){i&&i.c(),e=O(),a&&a.c(),n=O(),u&&u.c(),t=O(),b(l.$$.fragment),o=O(),b(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),u&&u.m(c,_),$(c,t,_),v(l,c,_),$(c,o,_),v(s,c,_),f=!0},p(c,_){c[5].scheme_type?i?i.p(c,_):(i=ql(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].atf4_lead_type?a?a.p(c,_):(a=Bl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].scheme_description?u?u.p(c,_):(u=Hl(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const m={};_&2&&(m.props=c[5]),l.$set(m);const S={};_&2&&(S.props=c[5]),s.$set(S)},i(c){f||(g(l.$$.fragment,c),g(s.$$.fragment,c),f=!0)},o(c){d(l.$$.fragment,c),d(s.$$.fragment,c),f=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),u&&u.d(c),w(l,c),w(s,c)}}}function ql(r){let e,n,t,l=r[5].scheme_type+"",o;return{c(){e=T("p"),n=k("Scheme type: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&2&&l!==(l=s[5].scheme_type+"")&&z(o,l)},d(s){s&&p(e)}}}function Bl(r){let e,n,t,l=r[5].atf4_lead_type+"",o;return{c(){e=T("p"),n=k("ATF4 lead type: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&2&&l!==(l=s[5].atf4_lead_type+"")&&z(o,l)},d(s){s&&p(e)}}}function Hl(r){let e,n,t=r[5].scheme_description+"",l;return{c(){e=T("p"),n=k("Descripton: "),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,l)},p(o,s){s&2&&t!==(t=o[5].scheme_description+"")&&z(l,t)},d(o){o&&p(e)}}}function hg(r){var Ie,Fe,Kt,Je;let e,n,t,l=$t(r[0].name,r[2])+"",o,s=r[0].intervention_type+"",f,i,a,u,c,_,m,S,C,y,I,E=$t(r[1].scheme_name??"",r[3])+"",N,A,L=$t(r[0].scheme_reference,r[3])+"",M,F,P,j,G,B=((Ie=r[1].browse)==null?void 0:Ie.authority_or_region)+"",R,D,q,se,pe,Se,he=((Fe=r[1].browse)==null?void 0:Fe.funding_programme)+"",Ce,ie,Me,Oe,ve=r[0].length_meters&&Il(r),le=r[0].description&&Nl(r),me=r[0].pipeline&&Ml(Tn(r)),de=((Kt=r[1].browse)==null?void 0:Kt.capital_scheme_id)&&Rl(r),we=((Je=r[1].browse)==null?void 0:Je.current_milestone)&&jl(r),ge=r[1].pipeline&&zl(Cn(r));return{c(){e=T("div"),n=T("h2"),t=new vt(!1),o=k(" ("),f=k(s),i=k(")"),a=O(),ve&&ve.c(),u=O(),le&&le.c(),c=O(),me&&me.c(),_=O(),m=T("hr"),S=O(),C=T("p"),y=k("Part of scheme: "),I=new vt(!1),N=k(" ("),A=new vt(!1),M=k(")"),F=O(),P=T("p"),j=k("Authority or region: "),G=T("b"),R=k(B),D=O(),de&&de.c(),q=O(),se=T("p"),pe=k("Funding programme: "),Se=T("b"),Ce=k(he),ie=O(),we&&we.c(),Me=O(),ge&&ge.c(),t.a=o,I.a=N,A.a=M,Te(e,"max-width","30vw"),Te(e,"max-height","60vh"),Te(e,"overflow","auto")},m(ue,Ee){$(ue,e,Ee),h(e,n),t.m(l,n),h(n,o),h(n,f),h(n,i),h(e,a),ve&&ve.m(e,null),h(e,u),le&&le.m(e,null),h(e,c),me&&me.m(e,null),h(e,_),h(e,m),h(e,S),h(e,C),h(C,y),I.m(E,C),h(C,N),A.m(L,C),h(C,M),h(e,F),h(e,P),h(P,j),h(P,G),h(G,R),h(e,D),de&&de.m(e,null),h(e,q),h(e,se),h(se,pe),h(se,Se),h(Se,Ce),h(e,ie),we&&we.m(e,null),h(e,Me),ge&&ge.m(e,null),Oe=!0},p(ue,[Ee]){var Wn,Yn,Vn,Xn;(!Oe||Ee&5)&&l!==(l=$t(ue[0].name,ue[2])+"")&&t.p(l),(!Oe||Ee&1)&&s!==(s=ue[0].intervention_type+"")&&z(f,s),ue[0].length_meters?ve?ve.p(ue,Ee):(ve=Il(ue),ve.c(),ve.m(e,u)):ve&&(ve.d(1),ve=null),ue[0].description?le?le.p(ue,Ee):(le=Nl(ue),le.c(),le.m(e,c)):le&&(le.d(1),le=null),ue[0].pipeline?me?(me.p(Tn(ue),Ee),Ee&1&&g(me,1)):(me=Ml(Tn(ue)),me.c(),g(me,1),me.m(e,_)):me&&(ce(),d(me,1,1,()=>{me=null}),$e()),(!Oe||Ee&10)&&E!==(E=$t(ue[1].scheme_name??"",ue[3])+"")&&I.p(E),(!Oe||Ee&9)&&L!==(L=$t(ue[0].scheme_reference,ue[3])+"")&&A.p(L),(!Oe||Ee&2)&&B!==(B=((Wn=ue[1].browse)==null?void 0:Wn.authority_or_region)+"")&&z(R,B),(Yn=ue[1].browse)!=null&&Yn.capital_scheme_id?de?de.p(ue,Ee):(de=Rl(ue),de.c(),de.m(e,q)):de&&(de.d(1),de=null),(!Oe||Ee&2)&&he!==(he=((Vn=ue[1].browse)==null?void 0:Vn.funding_programme)+"")&&z(Ce,he),(Xn=ue[1].browse)!=null&&Xn.current_milestone?we?we.p(ue,Ee):(we=jl(ue),we.c(),we.m(e,Me)):we&&(we.d(1),we=null),ue[1].pipeline?ge?(ge.p(Cn(ue),Ee),Ee&2&&g(ge,1)):(ge=zl(Cn(ue)),ge.c(),g(ge,1),ge.m(e,null)):ge&&(ce(),d(ge,1,1,()=>{ge=null}),$e())},i(ue){Oe||(g(me),g(ge),Oe=!0)},o(ue){d(me),d(ge),Oe=!1},d(ue){ue&&p(e),ve&&ve.d(),le&&le.d(),me&&me.d(),de&&de.d(),we&&we.d(),ge&&ge.d()}}}function $t(r,e){return e?r.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):r}function bg(r,e,n){let t,l,o,s;x(r,pn,i=>n(4,l=i)),x(r,Qt,i=>n(2,o=i)),x(r,xt,i=>n(3,s=i));let{props:f}=e;return r.$$set=i=>{"props"in i&&n(0,f=i.props)},r.$$.update=()=>{r.$$.dirty&17&&n(1,t=l.get(f.scheme_reference))},[f,t,o,s,l]}class Gn extends J{constructor(e){super(),K(this,e,bg,hg,X,{props:0})}}function vg(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&z(t,n)},d(l){l&&p(e)}}}function wg(r){let e,n;return e=new Gn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function kg(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[vg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[wg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function yg(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&z(t,n)},d(l){l&&p(e)}}}function Sg(r){let e,n;return e=new Gn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Cg(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[yg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Sg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Tg(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&z(t,n)},d(l){l&&p(e)}}}function Og(r){let e,n;return e=new Gn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Lg(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Tg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Og,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Ag(r){let e,n,t,l,o,s,f,i,a,u;const c=[H("interventions-points"),{filter:["all",Qn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":tr,"circle-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let _={$$slots:{default:[kg]},$$scope:{ctx:r}};for(let L=0;L<c.length;L+=1)_=ee(_,c[L]);e=new _t({props:_});const m=[H("interventions-lines"),{filter:["all",xn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Zt,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let S={$$slots:{default:[Cg]},$$scope:{ctx:r}};for(let L=0;L<m.length;L+=1)S=ee(S,m[L]);t=new Le({props:S});const C=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Zt,"circle-opacity":0,"circle-stroke-color":lt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let y={};for(let L=0;L<C.length;L+=1)y=ee(y,C[L]);o=new _t({props:y});const I=[H("interventions-polygons"),{filter:["all",an,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":Q(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let E={$$slots:{default:[Lg]},$$scope:{ctx:r}};for(let L=0;L<I.length;L+=1)E=ee(E,I[L]);f=new Ge({props:E});const N=[H("interventions-polygons-outlines"),{filter:["all",an,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Zt}},{layout:{visibility:r[0]?"visible":"none"}}];let A={};for(let L=0;L<N.length;L+=1)A=ee(A,N[L]);return a=new Le({props:A}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment)},m(L,M){v(e,L,M),$(L,n,M),v(t,L,M),$(L,l,M),v(o,L,M),$(L,s,M),v(f,L,M),$(L,i,M),v(a,L,M),u=!0},p(L,M){const F=M&29?ne(c,[c[0],M&24&&{filter:["all",Qn,L[3],L[4]]},c[2],c[3],M&4&&{paint:{"circle-color":L[2],"circle-radius":tr,"circle-opacity":Q(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};M&128&&(F.$$scope={dirty:M,ctx:L}),e.$set(F);const P=M&13?ne(m,[m[0],M&8&&{filter:["all",xn,L[3]]},m[2],m[3],M&4&&{paint:{"line-color":L[2],"line-width":Zt,"line-opacity":Q(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},m[6]]):{};M&128&&(P.$$scope={dirty:M,ctx:L}),t.$set(P);const j=M&1?ne(C,[C[0],C[1],C[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(j);const G=M&13?ne(I,[I[0],M&8&&{filter:["all",an,L[3]]},I[2],I[3],M&4&&{paint:{"fill-color":L[2],"fill-opacity":Q(.2,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},I[6]]):{};M&128&&(G.$$scope={dirty:M,ctx:L}),f.$set(G);const B=M&13?ne(N,[N[0],M&8&&{filter:["all",an,L[3]]},M&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*Zt}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(B)},i(L){u||(g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(f.$$.fragment,L),g(a.$$.fragment,L),u=!0)},o(L){d(e.$$.fragment,L),d(t.$$.fragment,L),d(o.$$.fragment,L),d(f.$$.fragment,L),d(a.$$.fragment,L),u=!1},d(L){L&&(p(n),p(l),p(s),p(i)),w(e,L),w(t,L),w(o,L),w(f,L),w(a,L)}}}function Pg(r){let e,n;return e=new Tt({props:{data:r[1],$$slots:{default:[Ag]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ig(r,e,n){let t,l;x(r,Jt,a=>n(5,l=a));let{showSchemes:o}=e,[s]=jn();const f=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=Eo(l))},[o,t,s,f,i,l]}class Ng extends J{constructor(e){super(),K(this,e,Ig,Pg,X,{showSchemes:0})}}function Ul(r,e,n){const t=r.slice();return t[13]=e[n],t}function Gl(r,e,n){const t=r.slice();return t[16]=e[n],t}function Mg(r){let e,n;return e=new og({props:{loadFile:r[7]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Wl(r){let e,n,t,l,o;e=new ut({props:{$$slots:{default:[Dg]},$$scope:{ctx:r}}}),e.$on("click",r[8]);function s(i){r[9](i)}let f={title:"About this scheme data",$$slots:{default:[Fg]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.open=r[3]),t=new Kl({props:f}),W.push(()=>Y(t,"open",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const u={};a&524288&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!l&&a&8&&(l=!0,c.open=i[3],V(()=>l=!1)),t.$set(c)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Dg(r){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yl(r){let e,n,t=r[16]+"",l;return{c(){e=T("li"),n=T("p"),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,l)},p(o,s){s&16&&t!==(t=o[16]+"")&&z(l,t)},d(o){o&&p(e)}}}function Fg(r){let e,n,t,l,o=je(r[4].notes),s=[];for(let f=0;f<o.length;f+=1)s[f]=Yl(Gl(r,o,f));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=O(),l=T("ul");for(let f=0;f<s.length;f+=1)s[f].c();U(e,"class","govuk-prose")},m(f,i){$(f,e,i),h(e,n),h(e,t),h(e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,null)},p(f,i){if(i&16){o=je(f[4].notes);let a;for(a=0;a<o.length;a+=1){const u=Gl(f,o,a);s[a]?s[a].p(u,i):(s[a]=Yl(u),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(f){f&&p(e),pt(s,f)}}}function Vl(r){let e,n,t,l;function o(i){r[10](i)}function s(i){r[11](i)}let f={};return r[1]!==void 0&&(f.schemesToBeShown=r[1]),r[2]!==void 0&&(f.show=r[2]),e=new Va({props:f}),W.push(()=>Y(e,"schemesToBeShown",o)),W.push(()=>Y(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),l=!0},p(i,a){const u={};!n&&a&2&&(n=!0,u.schemesToBeShown=i[1],V(()=>n=!1)),!t&&a&4&&(t=!0,u.show=i[2],V(()=>t=!1)),e.$set(u)},i(i){l||(g(e.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),l=!1},d(i){w(e,i)}}}function Xl(r){let e,n;return e=new $g({props:{scheme:r[13]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jl(r){let e=r[1].has(r[13].scheme_reference),n,t,l=e&&Xl(r);return{c(){l&&l.c(),n=Ne()},m(o,s){l&&l.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?l?(l.p(o,s),s&66&&g(l,1)):(l=Xl(o),l.c(),g(l,1),l.m(n.parentNode,n)):l&&(ce(),d(l,1,1,()=>{l=null}),$e())},i(o){t||(g(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function Eg(r){let e,n,t,l,o,s,f,i,a,u,c=Pn()=="Private (development)",_,m,S,C,y,I,E,N,A;o=new Xo({props:{boundaryGeojson:r[4]}}),a=new Ro({});let L=c&&Mg(r),M=r[4].notes&&Wl(r);S=new jo({props:{label:"Load schemes from GeoJSON",loadFile:r[7]}}),y=new lo({props:{errorMessage:r[0]}});let F=r[6].size>0&&Vl(r),P=je(r[6].values()),j=[];for(let B=0;B<P.length;B+=1)j[B]=Jl(Ul(r,P,B));const G=B=>d(j[B],1,1,()=>{j[B]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",l=O(),b(o.$$.fragment),s=O(),f=T("p"),f.textContent=`App version: ${Pn()}`,i=O(),b(a.$$.fragment),u=O(),L&&L.c(),_=O(),M&&M.c(),m=O(),b(S.$$.fragment),C=O(),b(y.$$.fragment),I=O(),F&&F.c(),E=O(),N=T("ul");for(let B=0;B<j.length;B+=1)j[B].c();Te(n,"display","flex"),Te(n,"justify-content","space-between"),U(e,"slot","sidebar"),U(e,"class","govuk-prose")},m(B,R){$(B,e,R),h(e,n),h(n,t),h(n,l),v(o,n,null),h(e,s),h(e,f),h(e,i),v(a,e,null),h(e,u),L&&L.m(e,null),h(e,_),M&&M.m(e,null),h(e,m),v(S,e,null),h(e,C),v(y,e,null),h(e,I),F&&F.m(e,null),h(e,E),h(e,N);for(let D=0;D<j.length;D+=1)j[D]&&j[D].m(N,null);A=!0},p(B,R){const D={};R&16&&(D.boundaryGeojson=B[4]),o.$set(D),c&&L.p(B,R),B[4].notes?M?(M.p(B,R),R&16&&g(M,1)):(M=Wl(B),M.c(),g(M,1),M.m(e,m)):M&&(ce(),d(M,1,1,()=>{M=null}),$e());const q={};if(R&1&&(q.errorMessage=B[0]),y.$set(q),B[6].size>0?F?(F.p(B,R),R&64&&g(F,1)):(F=Vl(B),F.c(),g(F,1),F.m(e,E)):F&&(ce(),d(F,1,1,()=>{F=null}),$e()),R&66){P=je(B[6].values());let se;for(se=0;se<P.length;se+=1){const pe=Ul(B,P,se);j[se]?(j[se].p(pe,R),g(j[se],1)):(j[se]=Jl(pe),j[se].c(),g(j[se],1),j[se].m(N,null))}for(ce(),se=P.length;se<j.length;se+=1)G(se);$e()}},i(B){if(!A){g(o.$$.fragment,B),g(a.$$.fragment,B),g(L),g(M),g(S.$$.fragment,B),g(y.$$.fragment,B),g(F);for(let R=0;R<P.length;R+=1)g(j[R]);A=!0}},o(B){d(o.$$.fragment,B),d(a.$$.fragment,B),d(L),d(M),d(S.$$.fragment,B),d(y.$$.fragment,B),d(F),j=j.filter(Boolean);for(let R=0;R<j.length;R+=1)d(j[R]);A=!1},d(B){B&&p(e),w(o),w(a),L&&L.d(),M&&M.d(),w(S),w(y),F&&F.d(),pt(j,B)}}}function Rg(r){let e,n,t,l,o,s,f;return e=new Jo({}),t=new Ng({props:{showSchemes:r[2]}}),s=new Z_({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),o=T("div"),b(s.$$.fragment),U(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),$(i,o,a),v(s,o,null),f=!0},p(i,a){const u={};a&4&&(u.showSchemes=i[2]),t.$set(u)},i(i){f||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),w(s)}}}function jg(r){let e,n,t;return n=new zo({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Rg]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(n.$$.fragment),U(e,"slot","main")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.style=l[5]),o&524292&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function zg(r){let e,n;return e=new ss({props:{$$slots:{main:[jg],sidebar:[Eg]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&524415&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qg(r,e,n){let t,l,o;x(r,Jt,y=>n(4,t=y)),x(r,er,y=>n(5,l=y)),x(r,pn,y=>n(6,o=y)),Bn(()=>{qo()});const s=new URLSearchParams(window.location.search);er.set(s.get("style")||"dataviz");let f="",i=new Set,a=!0,u=!1;function c(y){try{Jt.set(JSON.parse(y)),pn.set(Oa(t)),n(0,f="")}catch(I){n(0,f=`The file you loaded is broken: ${I}`)}}const _=()=>n(3,u=!0);function m(y){u=y,n(3,u)}function S(y){i=y,n(1,i)}function C(y){a=y,n(2,a)}return[f,i,a,u,t,l,o,c,_,m,S,C]}class Bg extends J{constructor(e){super(),K(this,e,qg,zg,X,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Bg({target:document.getElementById("app")});
