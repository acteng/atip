import{S as Y,i as K,s as J,e as T,j as G,ao as Ce,k as $,a7 as te,p,aU as Yl,b as W,c as V,f as O,h as b,m as v,x as Ze,n as X,t as g,o as d,q as w,O as bt,T as vt,U as wt,V as kt,b2 as Vn,l as h,ab as De,_ as ce,$ as $e,aX as ct,v as k,J as z,Z as Me,a0 as Dn,a1 as Kl,r as Ae,a2 as Zl,a3 as Ql,a4 as ut,a5 as xl,a6 as eo,b3 as Oo,Y as Ct,b4 as Xn,b5 as Lo,G as St,aO as yn,aF as Sn,P as x,I as Oe,a as $t,aT as Ao,av as pt,aj as jn,an as tn,u as Rn,F as Cn,w as Ye,b1 as ee,b6 as he,b7 as Le,H as Q,D as qe,W as ne,b8 as ae,ag as an,N as to,aZ as Qt,b9 as $n,ba as ht,R as no,E as ro,bb as Io,bc as No,g as Tn,al as Mo,C as Po,a$ as Jn,ap as Fo,aq as Yn,ar as Kn,as as ln,b0 as Zn,L as Eo,d as Do,M as jo,z as Ro}from"./index-08495645.js";import{l as q,d as Ke,a as zo,g as Re,f as Bo,M as Ho,k as gt,h as xe,i as le,R as qo,C as mt,m as Go,S as Uo,B as Wo,c as Qn,b as At,Z as Vo,G as Xo}from"./ZoomOutMap-549d7446.js";import{P as fe}from"./Popup-813e7b4f.js";function Jo(l){let e;return{c(){e=T("span"),G(e,"class","svelte-kzgqtg"),Ce(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Ce(e,"background",n[0])},i:te,o:te,d(n){n&&p(e)}}}function Yo(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Pe extends Y{constructor(e){super(),K(this,e,Yo,Jo,J,{color:0})}}const Ko="/atip/assets/help-d011708a.svg";function Zo(l){let e,n;const t=l[1].default,r=bt(t,l,l[4],null);return{c(){e=T("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&vt(r,t,o,o[4],n?kt(t,o[4],s,null):wt(o[4]),null)},i(o){n||(g(r,o),n=!0)},o(o){d(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function Qo(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[Zo]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new Yl({props:a}),W.push(()=>V(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${Ko}" title="Help" alt="Help"/>`,n=O(),b(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),v(t,f,c),o=!0,s||(u=Ze(e,"click",l[2]),s=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,_.open=f[0],X(()=>r=!1)),t.$set(_)},i(f){o||(g(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),w(t,f),s=!1,u()}}}function xo(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class me extends Y{constructor(e){super(),K(this,e,xo,Qo,J,{})}}const es=l=>({}),xn=l=>({}),ts=l=>({}),er=l=>({});function ns(l){let e,n,t,r,o,s,u,i,a,f,c;const _=l[4].sidebar,m=bt(_,l,l[3],er),S=l[4].main,C=bt(S,l,l[3],xn);return{c(){e=T("div"),n=T("aside"),t=T("div"),m&&m.c(),r=O(),o=T("button"),o.textContent="â†’",u=O(),i=T("main"),C&&C.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(o,"type","button"),G(o,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(n,"class",s=Vn(l[1]?"":"collapsed")+" svelte-1n0etgd"),Ce(n,"--sidebarWidth",l[0]),G(i,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(y,N){$(y,e,N),h(e,n),h(n,t),m&&m.m(t,null),h(n,r),h(n,o),h(e,u),h(e,i),C&&C.m(i,null),a=!0,f||(c=Ze(o,"click",l[2]),f=!0)},p(y,[N]){m&&m.p&&(!a||N&8)&&vt(m,_,y,y[3],a?kt(_,y[3],N,ts):wt(y[3]),er),(!a||N&2&&s!==(s=Vn(y[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(n,"class",s),(!a||N&1)&&Ce(n,"--sidebarWidth",y[0]),C&&C.p&&(!a||N&8)&&vt(C,S,y,y[3],a?kt(S,y[3],N,es):wt(y[3]),xn)},i(y){a||(g(m,y),g(C,y),a=!0)},o(y){d(m,y),d(C,y),a=!1},d(y){y&&p(e),m&&m.d(y),C&&C.d(y),f=!1,c()}}}function rs(l,e,n){let{$$slots:t={},$$scope:r}=e,{sidebarWidth:o="25rem"}=e,s=!0;function u(){n(1,s=!s)}return l.$$set=i=>{"sidebarWidth"in i&&n(0,o=i.sidebarWidth),"$$scope"in i&&n(3,r=i.$$scope)},[o,s,u,r,t]}class ls extends Y{constructor(e){super(),K(this,e,rs,ns,J,{sidebarWidth:0})}}function tr(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function nr(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Pe({props:{color:l[2]}}),{c(){e=T("li"),b(n.$$.fragment),t=O(),o=k(r),s=O()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&z(o,r)},i(i){u||(g(n.$$.fragment,i),u=!0)},o(i){d(n.$$.fragment,i),u=!1},d(i){i&&p(e),w(n)}}}function os(l){let e,n,t=De(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=nr(tr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){e=T("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=De(s[0]);let i;for(i=0;i<t.length;i+=1){const a=tr(s,t,i);r[i]?(r[i].p(a,u),g(r[i],1)):(r[i]=nr(a),r[i].c(),g(r[i],1),r[i].m(e,null))}for(ce(),i=t.length;i<r.length;i+=1)o(i);$e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)g(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),ct(r,s)}}}function ss(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class zn extends Y{constructor(e){super(),K(this,e,ss,os,J,{rows:0})}}function rr(l){let e=l[0],n,t,r=lr(l);return{c(){r.c(),n=Me()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?(ce(),d(r,1,1,te),$e(),r=lr(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function lr(l){let e;const n=l[16].default,t=bt(n,l,l[15],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&32768)&&vt(t,n,r,r[15],e?kt(n,r[15],o,null):wt(r[15]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function is(l){let e,n,t=l[0]&&rr(l);return{c(){t&&t.c(),e=Me()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=rr(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function as(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Dn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:f=null}=e,{scheme:c=null}=e,{attribution:_=null}=e,{minzoom:m=null}=e,{maxzoom:S=null}=e,{volatile:C=null}=e;const{map:y,self:N}=Kl();Ae(l,y,A=>n(14,r=A)),Ae(l,N,A=>n(0,t=A));let D,I=!0;return Zl(()=>{t&&D&&r&&(Ql(y,t,D),ut(N,t=null,t),n(12,D=void 0))}),l.$$set=A=>{"id"in A&&n(3,u=A.id),"tiles"in A&&n(4,i=A.tiles),"tileSize"in A&&n(5,a=A.tileSize),"bounds"in A&&n(6,f=A.bounds),"scheme"in A&&n(7,c=A.scheme),"attribution"in A&&n(8,_=A.attribution),"minzoom"in A&&n(9,m=A.minzoom),"maxzoom"in A&&n(10,S=A.maxzoom),"volatile"in A&&n(11,C=A.volatile),"$$scope"in A&&n(15,s=A.$$scope)},l.$$.update=()=>{l.$$.dirty&24569&&r&&t!==u&&(ut(N,t=u,t),xl(r,t,eo({type:"raster",tiles:i,tileSize:a,bounds:f,scheme:c,attribution:_,minzoom:m,maxzoom:S,volatile:C}),A=>r&&A===t,()=>{t&&(n(12,D=r==null?void 0:r.getSource(t)),n(13,I=!0))})),l.$$.dirty&16392&&(r==null||r.on("style.load",()=>{n(12,D=r==null?void 0:r.getSource(u))})),l.$$.dirty&12304&&D&&(I?n(13,I=!1):D.setTiles(i))},[t,y,N,u,i,a,f,c,_,m,S,C,D,I,r,s,o]}class fs extends Y{constructor(e){super(),K(this,e,as,is,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function us(l){let e;const n=l[16].default,t=bt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&vt(t,n,r,r[24],e?kt(n,r[24],o,null):wt(r[24]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function cs(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[us]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Oo({props:o}),W.push(()=>V(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function $s(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Dn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:S=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:y=void 0}=e,{manageHoverState:N=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:I=!1}=e,{interactive:A=!0}=e;function L(j){D=j,n(0,D)}function P(j){Ct.call(this,l,j)}function E(j){Ct.call(this,l,j)}function M(j){Ct.call(this,l,j)}function R(j){Ct.call(this,l,j)}function U(j){Ct.call(this,l,j)}function H(j){Ct.call(this,l,j)}return l.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,_=j.filter),"applyToClusters"in j&&n(9,m=j.applyToClusters),"minzoom"in j&&n(10,S=j.minzoom),"maxzoom"in j&&n(11,C=j.maxzoom),"hoverCursor"in j&&n(12,y=j.hoverCursor),"manageHoverState"in j&&n(13,N=j.manageHoverState),"hovered"in j&&n(0,D=j.hovered),"eventsIfTopMost"in j&&n(14,I=j.eventsIfTopMost),"interactive"in j&&n(15,A=j.interactive),"$$scope"in j&&n(24,r=j.$$scope)},[D,o,s,u,i,a,f,c,_,m,S,C,y,N,I,A,t,L,P,E,M,R,U,H,r]}class pn extends Y{constructor(e){super(),K(this,e,$s,cs,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function or(l){let e=l[0],n,t,r=sr(l);return{c(){r.c(),n=Me()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?(ce(),d(r,1,1,te),$e(),r=sr(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function sr(l){let e;const n=l[15].default,t=bt(n,l,l[14],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16384)&&vt(t,n,r,r[14],e?kt(n,r[14],o,null):wt(r[14]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function ps(l){let e,n,t=l[0]&&or(l);return{c(){t&&t.c(),e=Me()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=or(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function ms(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Dn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e,{bounds:c=null}=e,{scheme:_=null}=e,{attribution:m=null}=e,{minzoom:S=null}=e,{maxzoom:C=null}=e,{volatile:y=null}=e;if(i&&i.includes("pmtiles://")&&!Xn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let A=new Lo;Xn.addProtocol("pmtiles",A.tile)}const{map:N,self:D}=Kl();Ae(l,N,A=>n(13,r=A)),Ae(l,D,A=>n(0,t=A));let I;return Zl(()=>{t&&r&&(Ql(N,t,I),ut(D,t=null,t),I=void 0)}),l.$$set=A=>{"id"in A&&n(3,u=A.id),"url"in A&&n(4,i=A.url),"tiles"in A&&n(5,a=A.tiles),"promoteId"in A&&n(6,f=A.promoteId),"bounds"in A&&n(7,c=A.bounds),"scheme"in A&&n(8,_=A.scheme),"attribution"in A&&n(9,m=A.attribution),"minzoom"in A&&n(10,S=A.minzoom),"maxzoom"in A&&n(11,C=A.maxzoom),"volatile"in A&&n(12,y=A.volatile),"$$scope"in A&&n(14,s=A.$$scope)},l.$$.update=()=>{l.$$.dirty&16377&&r&&t!==u&&(ut(D,t=u,t),xl(r,t,eo({type:"vector",url:i,tiles:a,promoteId:f,bounds:c,scheme:_,attribution:m,minzoom:S,maxzoom:C,volatile:y}),A=>r&&A===t,()=>{t&&(I=r==null?void 0:r.getSource(t))})),l.$$.dirty&8200&&(r==null||r.on("style.load",()=>{I=r==null?void 0:r.getSource(u)}))},[t,N,D,u,i,a,f,c,_,m,S,C,y,r,s,o]}class ke extends Y{constructor(e){super(),K(this,e,ms,ps,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function ir(l,e,n){const t=l.slice();return t[11]=e[n],t[12]=e,t[13]=n,t}function _s(l){let e,n,t;return n=new $t({props:{$$slots:{default:[ds]},$$scope:{ctx:l}}}),n.$on("click",l[9]),{c(){e=T("div"),b(n.$$.fragment)},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16384&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function gs(l){let e,n,t,r,o,s,u,i,a,f;n=new $t({props:{$$slots:{default:[hs]},$$scope:{ctx:l}}}),n.$on("click",l[4]);let c=l[2]&&ar(l);o=new Re({props:{label:"Help",$$slots:{default:[bs]},$$scope:{ctx:l}}}),u=new Bo({}),u.$on("click",l[3]);let _=De(l[0]),m=[];for(let C=0;C<_.length;C+=1)m[C]=fr(ir(l,_,C));const S=C=>d(m[C],1,1,()=>{m[C]=null});return{c(){e=T("div"),b(n.$$.fragment),t=O(),c&&c.c(),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O();for(let C=0;C<m.length;C+=1)m[C].c();a=Me()},m(C,y){$(C,e,y),v(n,e,null),$(C,t,y),c&&c.m(C,y),$(C,r,y),v(o,C,y),$(C,s,y),v(u,C,y),$(C,i,y);for(let N=0;N<m.length;N+=1)m[N]&&m[N].m(C,y);$(C,a,y),f=!0},p(C,y){const N={};y&16384&&(N.$$scope={dirty:y,ctx:C}),n.$set(N),C[2]?c?c.p(C,y):(c=ar(C),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null);const D={};if(y&16384&&(D.$$scope={dirty:y,ctx:C}),o.$set(D),y&65){_=De(C[0]);let I;for(I=0;I<_.length;I+=1){const A=ir(C,_,I);m[I]?(m[I].p(A,y),g(m[I],1)):(m[I]=fr(A),m[I].c(),g(m[I],1),m[I].m(a.parentNode,a))}for(ce(),I=_.length;I<m.length;I+=1)S(I);$e()}},i(C){if(!f){g(n.$$.fragment,C),g(o.$$.fragment,C),g(u.$$.fragment,C);for(let y=0;y<_.length;y+=1)g(m[y]);f=!0}},o(C){d(n.$$.fragment,C),d(o.$$.fragment,C),d(u.$$.fragment,C),m=m.filter(Boolean);for(let y=0;y<m.length;y+=1)d(m[y]);f=!1},d(C){C&&(p(e),p(t),p(r),p(s),p(i),p(a)),w(n),c&&c.d(C),w(o,C),w(u,C),ct(m,C)}}}function ds(l){let e;return{c(){e=k("Measure lines")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hs(l){let e;return{c(){e=k("Stop measuring")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ar(l){let e,n,t=l[2].toFixed(2)+"",r,o;return{c(){e=T("p"),n=k("Length: "),r=k(t),o=k(" meters")},m(s,u){$(s,e,u),h(e,n),h(e,r),h(e,o)},p(s,u){u&4&&t!==(t=s[2].toFixed(2)+"")&&z(r,t)},d(s){s&&p(e)}}}function bs(l){let e;return{c(){e=T("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){$(n,e,t)},p:te,d(n){n&&p(e)}}}function vs(l){let e,n;return{c(){e=T("span"),n=O(),G(e,"class","dot svelte-1tzt432")},m(t,r){$(t,e,r),$(t,n,r)},p:te,d(t){t&&(p(e),p(n))}}}function fr(l){let e,n,t;function r(u){l[7](u,l[11],l[12],l[13])}function o(){return l[8](l[13])}let s={draggable:!0,$$slots:{default:[vs]},$$scope:{ctx:l}};return l[11]!==void 0&&(s.lngLat=l[11]),e=new Ho({props:s}),W.push(()=>V(e,"lngLat",r)),e.$on("click",o),{c(){b(e.$$.fragment)},m(u,i){v(e,u,i),t=!0},p(u,i){l=u;const a={};i&16384&&(a.$$scope={dirty:i,ctx:l}),!n&&i&1&&(n=!0,a.lngLat=l[11],X(()=>n=!1)),e.$set(a)},i(u){t||(g(e.$$.fragment,u),t=!0)},o(u){d(e.$$.fragment,u),t=!1},d(u){w(e,u)}}}function ws(l){let e,n;const t=[q("measurement-line"),{paint:{"line-color":Ke.measuringLine,"line-width":5}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u={};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ks(l){let e,n,t,r,o,s,u;const i=[gs,_s],a=[];function f(c,_){return c[1]?0:1}return e=f(l),n=a[e]=i[e](l),r=new St({props:{data:l[0].length<2?yn():Sn(l[0]),$$slots:{default:[ws]},$$scope:{ctx:l}}}),{c(){n.c(),t=O(),b(r.$$.fragment)},m(c,_){a[e].m(c,_),$(c,t,_),v(r,c,_),o=!0,s||(u=Ze(window,"keydown",l[5]),s=!0)},p(c,[_]){let m=e;e=f(c),e===m?a[e].p(c,_):(ce(),d(a[m],1,1,()=>{a[m]=null}),$e(),n=a[e],n?n.p(c,_):(n=a[e]=i[e](c),n.c()),g(n,1),n.m(t.parentNode,t));const S={};_&1&&(S.data=c[0].length<2?yn():Sn(c[0])),_&16384&&(S.$$scope={dirty:_,ctx:c}),r.$set(S)},i(c){o||(g(n),g(r.$$.fragment,c),o=!0)},o(c){d(n),d(r.$$.fragment,c),o=!1},d(c){c&&p(t),a[e].d(c),w(r,c),s=!1,u()}}}function ys(l,e,n){let t,r=!1,o=[];function s(S){return S.length<2?null:1e3*zo(Sn(S),{units:"kilometers"})}function u(S){n(0,o=[...o,S.detail.lngLat.toArray()])}function i(){n(1,r=!1),n(0,o=[])}function a(S){r&&S.key==="Escape"&&(S.stopPropagation(),i())}function f(S){o.splice(S,1),n(0,o)}function c(S,C,y,N){y[N]=S,n(0,o)}const _=S=>f(S),m=()=>n(1,r=!0);return l.$$.update=()=>{l.$$.dirty&1&&n(2,t=s(o))},[o,r,t,u,i,a,f,c,_,m]}class Ss extends Y{constructor(e){super(),K(this,e,ys,ks,J,{})}}const Cs={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var ze=Uint8Array,dt=Uint16Array,lo=Uint32Array,oo=new ze([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),so=new ze([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ts=new ze([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),io=function(l,e){for(var n=new dt(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new lo(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},ao=io(oo,2),fo=ao[0],Os=ao[1];fo[28]=258,Os[258]=28;var Ls=io(so,0),As=Ls[0],On=new dt(32768);for(var we=0;we<32768;++we){var at=(we&43690)>>>1|(we&21845)<<1;at=(at&52428)>>>2|(at&13107)<<2,at=(at&61680)>>>4|(at&3855)<<4,On[we]=((at&65280)>>>8|(at&255)<<8)>>>1}var Zt=function(l,e,n){for(var t=l.length,r=0,o=new dt(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new dt(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new dt(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[On[c]>>>i]=a}else for(u=new dt(t),r=0;r<t;++r)l[r]&&(u[r]=On[s[l[r]-1]++]>>>15-l[r]);return u},nn=new ze(288);for(var we=0;we<144;++we)nn[we]=8;for(var we=144;we<256;++we)nn[we]=9;for(var we=256;we<280;++we)nn[we]=7;for(var we=280;we<288;++we)nn[we]=8;var uo=new ze(32);for(var we=0;we<32;++we)uo[we]=5;var Is=Zt(nn,9,1),Ns=Zt(uo,5,1),mn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},Ue=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},_n=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Ms=function(l){return(l+7)/8|0},Bn=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?dt:l.BYTES_PER_ELEMENT==4?lo:ze)(n-e);return t.set(l.subarray(e,n)),t},Ps=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],We=function(l,e,n){var t=new Error(e||Ps[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,We),!n)throw t;return t},Fs=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new ze(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new ze(t*3));var s=function(ge){var ve=e.length;if(ge>ve){var _e=new ze(Math.max(ve*2,ge));_e.set(e),e=_e}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,_=n.m,m=n.n,S=t*8;do{if(!f){u=Ue(l,i,1);var C=Ue(l,i+1,3);if(i+=3,C)if(C==1)f=Is,c=Ns,_=9,m=5;else if(C==2){var I=Ue(l,i,31)+257,A=Ue(l,i+10,15)+4,L=I+Ue(l,i+5,31)+1;i+=14;for(var P=new ze(L),E=new ze(19),M=0;M<A;++M)E[Ts[M]]=Ue(l,i+M*3,7);i+=A*3;for(var R=mn(E),U=(1<<R)-1,H=Zt(E,R,1),M=0;M<L;){var j=H[Ue(l,i,U)];i+=j&15;var y=j>>>4;if(y<16)P[M++]=y;else{var F=0,B=0;for(y==16?(B=3+Ue(l,i,3),i+=2,F=P[M-1]):y==17?(B=3+Ue(l,i,7),i+=3):y==18&&(B=11+Ue(l,i,127),i+=7);B--;)P[M++]=F}}var oe=P.subarray(0,I),se=P.subarray(I);_=mn(oe),m=mn(se),f=Zt(oe,_,1),c=Zt(se,m,1)}else We(1);else{var y=Ms(i)+4,N=l[y-4]|l[y-3]<<8,D=y+N;if(D>t){o&&We(0);break}r&&s(a+N),e.set(l.subarray(y,D),a),n.b=a+=N,n.p=i=D*8,n.f=u;continue}if(i>S){o&&We(0);break}}r&&s(a+131072);for(var ye=(1<<_)-1,de=(1<<m)-1,Se=i;;Se=i){var F=f[_n(l,i)&ye],ie=F>>>4;if(i+=F&15,i>S){o&&We(0);break}if(F||We(2),ie<256)e[a++]=ie;else if(ie==256){Se=i,f=null;break}else{var Ne=ie-254;if(ie>264){var M=ie-257,Te=oo[M];Ne=Ue(l,i,(1<<Te)-1)+fo[M],i+=Te}var be=c[_n(l,i)&de],re=be>>>4;be||We(3),i+=be&15;var se=As[re];if(re>3){var Te=so[re];se+=_n(l,i)&(1<<Te)-1,i+=Te}if(i>S){o&&We(0);break}r&&s(a+131072);for(var pe=a+Ne;a<pe;a+=4)e[a]=e[a-se],e[a+1]=e[a+1-se],e[a+2]=e[a+2-se],e[a+3]=e[a+3-se];a=pe}}n.l=f,n.p=Se,n.b=a,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=m)}while(!u);return a==e.length?e:Bn(e,0,a)},Es=new ze(0),Je=function(l,e){return l[e]|l[e+1]<<8},Ve=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},gn=function(l,e){return Ve(l,e)+Ve(l,e+4)*4294967296};function Ds(l,e){return Fs(l,e)}var Ln=typeof TextDecoder<"u"&&new TextDecoder,js=0;try{Ln.decode(Es,{stream:!0}),js=1}catch{}var Rs=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,Bn(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function co(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(Ln)return Ln.decode(l);var r=Rs(l),o=r[0],s=r[1];return s.length&&We(8),o}}var zs=function(l,e){return e+30+Je(l,e+26)+Je(l,e+28)},Bs=function(l,e,n){var t=Je(l,e+28),r=co(l.subarray(e+46,e+46+t),!(Je(l,e+8)&2048)),o=e+46+t,s=Ve(l,e+20),u=n&&s==4294967295?Hs(l,o):[s,Ve(l,e+24),Ve(l,e+42)],i=u[0],a=u[1],f=u[2];return[Je(l,e+10),i,a,r,o+Je(l,e+30)+Je(l,e+32),f]},Hs=function(l,e){for(;Je(l,e)!=1;e+=4+Je(l,e+2));return[gn(l,e+12),gn(l,e+4),gn(l,e+20)]};function qs(l,e){for(var n={},t=l.length-22;Ve(l,t)!=101010256;--t)(!t||l.length-t>65558)&&We(13);var r=Je(l,t+8);if(!r)return{};var o=Ve(l,t+16),s=o==4294967295||r==65535;if(s){var u=Ve(l,t-12);s=Ve(l,u)==101075792,s&&(r=Ve(l,u+32),o=Ve(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=Bs(l,o,s),c=f[0],_=f[1],m=f[2],S=f[3],C=f[4],y=f[5],N=zs(l,y);o=C,(!i||i({name:S,size:_,originalSize:m,compression:c}))&&(c?c==8?n[S]=Ds(l.subarray(N,N+_),new ze(m)):We(14,"unknown compression type "+c):n[S]=Bn(l,N,N+_))}return n}function Gs(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(dn):dn(l)}function dn(l){var e=new Uint8Array(l),n=qs(e);return Promise.resolve(Us(n))}function Us(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=co(l[r])}return e}function Qe(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&yt(t)===e)return t;n++}}function rn(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&yt(r)===e&&n.push(r),t++}return n}function fn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&yt(r)===e&&n(r,t):n(r,t),t++}}function Ws(l,e,n){var t=[];return fn(l,e,function(r,o){t.push(n(r,o))}),t}var Vs=/.+\:/;function yt(l){return l.tagName.replace(Vs,"")}function $o(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+yt(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=$o(l.childNodes[t]),t++;return e+="</"+yt(l)+">",e}function Xs(l){var e=l.documentElement,n=Qe(e,"sheetData"),t=[];return fn(n,"row",function(r){fn(r,"c",function(o){t.push(o)})}),t}function Js(l,e){return Qe(e,"v")}function Ys(l,e){if(e.firstChild&&yt(e.firstChild)==="is"&&e.firstChild.firstChild&&yt(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Ks(l){var e=l.documentElement,n=Qe(e,"dimension");if(n)return n.getAttribute("ref")}function Zs(l){var e=l.documentElement,n=Qe(e,"cellStyleXfs");return n?rn(n,"xf"):[]}function Qs(l){var e=l.documentElement,n=Qe(e,"cellXfs");return n?rn(n,"xf"):[]}function xs(l){var e=l.documentElement,n=Qe(e,"numFmts");return n?rn(n,"numFmt"):[]}function ei(l){var e=l.documentElement;return Ws(e,"si",function(n){var t=Qe(n,"t");if(t)return t.textContent;var r="";return fn(n,"r",function(o){r+=Qe(o,"t").textContent}),r})}function ti(l){var e=l.documentElement;return Qe(e,"workbookPr")}function ni(l){var e=l.documentElement;return rn(e,"Relationship")}function ri(l){var e=l.documentElement,n=Qe(e,"sheets");return rn(n,"sheet")}function li(l,e){var n=e.createDocument(l),t={},r=ti(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return ri(n).forEach(o),t}function oi(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=hn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=hn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=hn(u);break}};return ni(n).forEach(r),t}function hn(l){return l[0]==="/"?l.slice(1):"xl/"+l}function ur(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function cr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ur(Object(n),!0).forEach(function(t){si(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function si(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ii(l,e){if(!l)return{};var n=e.createDocument(l),t=Zs(n).map(bn),r=xs(n).map(ai).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?cr(cr({},t[u.xfId]),bn(u,r)):bn(u,r)};return Qs(n).map(o)}function ai(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function bn(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function fi(l,e){return l?ei(e.createDocument(l)):[]}function po(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function ui(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ci(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ci(l,e){if(l){if(typeof l=="string")return $r(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $r(l,e)}}function $r(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function $i(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(pi.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&gi(t.numberFormat.template))return!0}}var pi=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],mi=/^\[\$-414\]/,_i=/;@$/;function gi(l){l=l.toLowerCase(),l=l.replace(mi,""),l=l.replace(_i,"");for(var e=l.split(/\W+/),n=ui(e),t;!(t=n()).done;){var r=t.value;if(di.indexOf(r)<0)return!1}return!0}var di=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function hi(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=vn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=vn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=vn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=bi(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var _=$i(o(),s,a);_?(l=pr(l),l=po(l,i)):l=(a.parseNumber||pr)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function bi(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function vn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function pr(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var vi=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function wi(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function ki(l){for(var e=0,n=0;n<l.length;)e*=26,e+=vi.indexOf(l[n]),n++;return e}function mo(l){return l=l.split(/(\d+)/),[parseInt(l[1]),ki(l[0].trim())]}function yi(l,e,n,t,r,o,s){var u=mo(l.getAttribute("r")),i=Js(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:hi(a,f,{getInlineStringValue:function(){return Ys(e,l)},getInlineStringXml:function(){return $o(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function Si(l,e,n,t,r,o){var s=Xs(l);return s.length===0?[]:s.map(function(u){return yi(u,l,e,n,t,r,o)})}function Ci(l,e){return Ai(l)||Li(l,e)||Oi(l,e)||Ti()}function Ti(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oi(l,e){if(l){if(typeof l=="string")return mr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(l,e)}}function mr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Li(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ai(l){if(Array.isArray(l))return l}function Ii(l){var e=Ks(l);if(e)return e=e.split(":").map(mo).map(function(n){var t=Ci(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Ni(l,e,n,t,r,o){var s=e.createDocument(l),u=Si(s,e,n,t,r,o),i=Ii(s)||wi(u);return{cells:u,dimensions:i}}function Mi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Pi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pi(l,e){if(l){if(typeof l=="string")return _r(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(l,e)}}function _r(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Fi(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=Mi(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Ei(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Di(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Di(l,e){if(l){if(typeof l=="string")return gr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(l,e)}}function gr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ji(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=Ei(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function Ri(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=_o(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zi(l,e){return qi(l)||Hi(l,e)||_o(l,e)||Bi()}function Bi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _o(l,e){if(l){if(typeof l=="string")return dr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(l,e)}}function dr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Hi(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function qi(l){if(Array.isArray(l))return l}function Gi(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=zi(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=Ri(t),_;!(_=c()).done;){var m=_.value,S=m.row-1,C=m.column-1;C<s&&S<u&&(i[S][C]=m.value)}var y=e.rowMap;if(y)for(var N=0;N<i.length;)y[N]=N,N++;return i=Fi(ji(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:y}),e.transformData&&(i=e.transformData(i)),i}function Ui(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Wi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wi(l,e){if(l){if(typeof l=="string")return hr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hr(l,e)}}function hr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function br(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Vi(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?br(Object(n),!0).forEach(function(t){Xi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Xi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Ji(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Vi({sheet:1},n));var t=function(_){if(!l[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return l[_]},r=oi(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?fi(t(r.sharedStrings),e):[],s=r.styles?ii(t(r.styles),e):{},u=li(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var i=Yi(n.sheet,u.sheets);if(!i||!r.sheets[i])throw Ki(n.sheet,u.sheets);var a=Ni(t(r.sheets[i]),e,o,s,u,n),f=Gi(a,n);return n.properties?{data:f,properties:u}:f}function Yi(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=Ui(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Ki(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function An(l){"@babel/helpers - typeof";return An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},An(l)}function vr(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Zi(l,e,n){return e&&vr(l.prototype,e),n&&vr(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function Qi(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function xi(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&xt(l,e)}function ea(l){var e=go();return function(){var t=en(l),r;if(e){var o=en(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return ta(this,r)}}function ta(l,e){if(e&&(An(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return na(l)}function na(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function In(l){var e=typeof Map=="function"?new Map:void 0;return In=function(t){if(t===null||!ra(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return sn(t,arguments,en(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),xt(r,t)},In(l)}function sn(l,e,n){return go()?sn=Reflect.construct:sn=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&xt(a,s.prototype),a},sn.apply(null,arguments)}function go(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ra(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function xt(l,e){return xt=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},xt(l,e)}function en(l){return en=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},en(l)}var Be=function(l){xi(n,l);var e=ea(n);function n(t){var r;return Qi(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Zi(n)}(In(Error));function la(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new Be("not_a_number")}if(typeof l!="number")throw new Be("not_a_number");if(isNaN(l))throw new Be("invalid_number");if(!isFinite(l))throw new Be("out_of_bounds");return l}function oa(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new Be("invalid_number");if(!isFinite(l))throw new Be("out_of_bounds");return String(l)}throw new Be("not_a_string")}function sa(l){if(typeof l=="boolean")return l;throw new Be("not_a_boolean")}function ia(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new Be("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new Be("invalid_number");if(!isFinite(l))throw new Be("out_of_bounds");var t=po(l,n);if(isNaN(t.valueOf()))throw new Be("out_of_bounds");return t}throw new Be("not_a_date")}function aa(l,e){return ca(l)||ua(l,e)||ho(l,e)||fa()}function fa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ua(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ca(l){if(Array.isArray(l))return l}function Nn(l){"@babel/helpers - typeof";return Nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(l)}function $a(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ho(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ho(l,e){if(l){if(typeof l=="string")return wr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wr(l,e)}}function wr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function kr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function yr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kr(Object(n),!0).forEach(function(t){pa(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function pa(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var Sr={isColumnOriented:!1};function ma(l,e,n){n?n=yr(yr({},Sr),n):n=Sr;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ha(e),r&&(l=da(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=bo(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var _=$a(a),m;!(m=_()).done;){var S=m.value;S.row=o[S.row-1]+1}return{rows:i,errors:a}}function bo(l,e,n,t,r,o){for(var s={},u=!0,i=function(D){var I=D.column,A=D.value,L=D.error,P=D.reason,E={error:L,row:n+1,column:I,value:A};return P&&(E.reason=P),l[I].type&&(E.type=l[I].type),E},a=[],f=function(){var D=_[c],I=l[D],A=Nn(I.type)==="object"&&!Array.isArray(I.type),L=e[t.indexOf(D)];L===void 0&&(L=null);var P=void 0,E=void 0,M=void 0;if(A)P=bo(I.type,e,n,t,r,o);else if(L===null)P=null;else if(Array.isArray(I.type)){var R=!1,U=ga(L).map(function(j){var F=Cr(j,I,o);return F.error&&(P=j,E=F.error,M=F.reason),F.value!==null&&(R=!0),F.value});E||(P=R?U:null)}else{var H=Cr(L,I,o);E=H.error,M=H.reason,P=E?L:H.value}!E&&P===null&&(typeof I.required=="function"?a.push({column:D}):I.required===!0&&(E="required")),E?r.push(i({column:D,value:P,error:E,reason:M})):(u&&P!==null&&(u=!1),(P!==null||o.includeNullValues)&&(s[I.prop]=P))},c=0,_=Object.keys(l);c<_.length;c++)f();if(u)return null;for(var m=0,S=a;m<S.length;m++){var C=S[m].column,y=l[C].required(s);y&&r.push(i({column:C,value:null,error:"required"}))}return s}function Cr(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=Tt(l,e.parse):e.type?t=_a(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function Tt(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function _a(l,e,n){switch(e){case String:return Tt(l,oa);case Number:return Tt(l,la);case Date:return Tt(l,function(t){return ia(t,{properties:n.properties})});case Boolean:return Tt(l,sa);default:if(typeof e=="function")return Tt(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function vo(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=vo(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function ga(l){for(var e=[],n=0;n<l.length;){var t=vo(l,",",n),r=aa(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var da=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function ha(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function Mn(l){"@babel/helpers - typeof";return Mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn(l)}function wo(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;Mn(o)==="object"&&(o=Object.keys(l[r])[0],s=wo(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var ba=["schema","map"];function Tr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function on(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tr(Object(n),!0).forEach(function(t){va(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function va(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function wa(l,e){if(l==null)return{};var n=ka(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function ka(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function ya(l,e,n){var t=n.schema,r=n.map,o=wa(n,ba);!t&&r&&(t=wo(r));var s=Ji(l,e,on(on({},o),{},{properties:t||o.properties}));return t?ma(s.data,t,on(on({},o),{},{properties:s.properties})):s}function Sa(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Gs(l).then(function(n){return ya(n,Cs,e)})}function Ca(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>Ta(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function Ta(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function Oa(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Sa(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Ao(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Pn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function La(l){return pt(["get","intervention_type"],{area:Ke.area,route:Ke.route,crossing:Ke.crossing,other:Ke.other},"white")}function Aa(l){return[["Areas",Ke.area],["Routes",Ke.route],["Crossings",Ke.crossing],["Other",Ke.other]]}const Z={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},He=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Fn(){let[l,e]=ko(Pn,Z.funding_programmes);return[pt(["get","funding_programme"],l,"grey"),e]}function Ia(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=ko(l,Z.current_milestone);return[pt(["get","current_milestone"],e,"grey"),n]}function ko(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Na(l){let e,n;return e=new zn({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ma(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new gt({props:u}),W.push(()=>V(e,"value",s)),e.$on("change",l[2]),r=new Re({props:{label:"Legend",$$slots:{default:[Na]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],X(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function Pa(l,e,n){let t;Ae(l,jn,a=>n(4,t=a));let r="fundingProgramme",[o,s]=Fn();function u(){let a;r=="interventionType"?(a=La(),n(1,s=Aa())):r=="fundingProgramme"?n(1,[a,s]=Fn(),s):r=="currentMilestone"&&n(1,[a,s]=Ia(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class Fa extends Y{constructor(e){super(),K(this,e,Pa,Ma,J,{})}}const Ot=tn({type:"FeatureCollection",features:[],schemes:{}}),un=tn(new Map),Or=tn(!0),It=tn(""),Nt=tn("");function Ea(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Da(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(l){let e,n,t,r,o,s;return t=new $t({props:{$$slots:{default:[Da]},$$scope:{ctx:l}}}),t.$on("click",l[19]),{c(){e=T("input"),n=O(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,i){$(u,e,i),Ye(e,l[7]),$(u,n,i),v(t,u,i),r=!0,o||(s=Ze(e,"input",l[18]),o=!0)},p(u,i){i&128&&e.value!==u[7]&&Ye(e,u[7]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(g(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function Ra(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function za(l){let e,n,t,r,o,s;return t=new $t({props:{$$slots:{default:[Ra]},$$scope:{ctx:l}}}),t.$on("click",l[21]),{c(){e=T("input"),n=O(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,i){$(u,e,i),Ye(e,l[6]),$(u,n,i),v(t,u,i),r=!0,o||(s=Ze(e,"input",l[20]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&Ye(e,u[6]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(g(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function Ba(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,S,C,y,N,D,I,A;e=new $t({props:{$$slots:{default:[Ea]},$$scope:{ctx:l}}}),e.$on("click",l[13]);function L(F){l[14](F)}let P={label:"Authority or region",choices:l[8],emptyOption:!0};l[2]!==void 0&&(P.value=l[2]),t=new gt({props:P}),W.push(()=>V(t,"value",L));function E(F){l[15](F)}let M={label:"Funding programme",choices:l[9],emptyOption:!0};l[3]!==void 0&&(M.value=l[3]),s=new gt({props:M}),W.push(()=>V(s,"value",E));function R(F){l[16](F)}let U={label:"Current milestone",choices:l[10],emptyOption:!0};l[4]!==void 0&&(U.value=l[4]),a=new gt({props:U}),W.push(()=>V(a,"value",R));function H(F){l[17](F)}let j={label:"Sketch source",choices:l[12],emptyOption:!0};return l[5]!==void 0&&(j.value=l[5]),_=new gt({props:j}),W.push(()=>V(_,"value",H)),C=new Cn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[ja]},$$scope:{ctx:l}}}),N=new Cn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[za]},$$scope:{ctx:l}}}),I=new Fa({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment),i=O(),b(a.$$.fragment),c=O(),b(_.$$.fragment),S=O(),b(C.$$.fragment),y=O(),b(N.$$.fragment),D=O(),b(I.$$.fragment)},m(F,B){v(e,F,B),$(F,n,B),v(t,F,B),$(F,o,B),v(s,F,B),$(F,i,B),v(a,F,B),$(F,c,B),v(_,F,B),$(F,S,B),v(C,F,B),$(F,y,B),v(N,F,B),$(F,D,B),v(I,F,B),A=!0},p(F,B){const oe={};B&134217728&&(oe.$$scope={dirty:B,ctx:F}),e.$set(oe);const se={};B&256&&(se.choices=F[8]),!r&&B&4&&(r=!0,se.value=F[2],X(()=>r=!1)),t.$set(se);const ye={};B&512&&(ye.choices=F[9]),!u&&B&8&&(u=!0,ye.value=F[3],X(()=>u=!1)),s.$set(ye);const de={};B&1024&&(de.choices=F[10]),!f&&B&16&&(f=!0,de.value=F[4],X(()=>f=!1)),a.$set(de);const Se={};!m&&B&32&&(m=!0,Se.value=F[5],X(()=>m=!1)),_.$set(Se);const ie={};B&134217856&&(ie.$$scope={dirty:B,ctx:F}),C.$set(ie);const Ne={};B&134217792&&(Ne.$$scope={dirty:B,ctx:F}),N.$set(Ne)},i(F){A||(g(e.$$.fragment,F),g(t.$$.fragment,F),g(s.$$.fragment,F),g(a.$$.fragment,F),g(_.$$.fragment,F),g(C.$$.fragment,F),g(N.$$.fragment,F),g(I.$$.fragment,F),A=!0)},o(F){d(e.$$.fragment,F),d(t.$$.fragment,F),d(s.$$.fragment,F),d(a.$$.fragment,F),d(_.$$.fragment,F),d(C.$$.fragment,F),d(N.$$.fragment,F),d(I.$$.fragment,F),A=!1},d(F){F&&(p(n),p(o),p(i),p(c),p(S),p(y),p(D)),w(e,F),w(t,F),w(s,F),w(a,F),w(_,F),w(C,F),w(N,F),w(I,F)}}}function Ha(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[11].route.toLocaleString()+"",s,u,i=l[11].area.toLocaleString()+"",a,f,c=l[11].crossing.toLocaleString()+"",_,m,S=l[11].other.toLocaleString()+"",C,y,N=Lr(l[11].totalLength).toFixed(1)+"",D,I;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),_=k(c),m=k(" crossings, "),C=k(S),y=k(`
    other, with total LineString length of `),D=k(N),I=k(" miles)")},m(A,L){$(A,e,L),$(A,t,L),$(A,r,L),$(A,s,L),$(A,u,L),$(A,a,L),$(A,f,L),$(A,_,L),$(A,m,L),$(A,C,L),$(A,y,L),$(A,D,L),$(A,I,L)},p(A,L){L&1&&n!==(n=A[0].size.toLocaleString()+"")&&z(t,n),L&2048&&o!==(o=A[11].route.toLocaleString()+"")&&z(s,o),L&2048&&i!==(i=A[11].area.toLocaleString()+"")&&z(a,i),L&2048&&c!==(c=A[11].crossing.toLocaleString()+"")&&z(_,c),L&2048&&S!==(S=A[11].other.toLocaleString()+"")&&z(C,S),L&2048&&N!==(N=Lr(A[11].totalLength).toFixed(1)+"")&&z(D,N)},d(A){A&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(_),p(m),p(C),p(y),p(D),p(I))}}}function qa(l){let e,n,t;function r(s){l[22](s)}let o={$$slots:{default:[Ha]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&134219777&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ga(l){let e,n,t,r;return e=new Re({props:{label:"Filters",$$slots:{default:[Ba]},$$scope:{ctx:l}}}),t=new xe({props:{small:!0,$$slots:{default:[qa]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&134219772&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&134219779&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Lr(l){return l*621371e-9}function Ua(l,e,n){let t,r,o,s;Ae(l,Nt,B=>n(6,t=B)),Ae(l,It,B=>n(7,r=B)),Ae(l,Ot,B=>n(23,o=B)),Ae(l,un,B=>n(24,s=B));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],_=new Set(Pn.slice(0,-1)),m="",S=[],C="",y=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],N="",D={area:0,route:0,crossing:0,other:0,totalLength:0};Rn(()=>{var ye,de,Se;let B=new Set,oe=new Set,se=new Set;for(let ie of s.values())(ye=ie.browse)!=null&&ye.authority_or_region&&B.add(ie.browse.authority_or_region),(de=ie.browse)!=null&&de.funding_programme&&oe.add(ie.browse.funding_programme),(Se=ie.browse)!=null&&Se.current_milestone&&se.add(ie.browse.current_milestone);n(8,a=Array.from(B.entries())),a.sort(),n(9,c=Pn.map(ie=>[ie,ie])),n(10,S=Array.from(se.entries())),S.sort()});function I(B,oe,se,ye,de,Se){let ie=oe.toLowerCase(),Ne=se.toLowerCase(),Te=re=>{var pe,ge,ve,_e,Ie,Fe,Lt;if(ie&&!((pe=re.properties.name)!=null&&pe.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))return!1;if(B||Ne||ye||de||Se){let Xe=s.get(re.properties.scheme_reference);if(ye&&((ve=Xe.browse)==null?void 0:ve.authority_or_region)!=ye||de&&de!=="Other"&&((_e=Xe.browse)==null?void 0:_e.funding_programme)!=de||de==="Other"&&_.has(((Ie=Xe.browse)==null?void 0:Ie.funding_programme)??"")||Se&&((Fe=Xe.browse)==null?void 0:Fe.current_milestone)!=Se||Ne&&!Xe.scheme_reference.toLowerCase().includes(Ne)&&!(Xe.scheme_name??"").toLowerCase().includes(Ne)||B&&B!=="Both"&&B!==((Lt=Xe.browse)==null?void 0:Lt.sketch_source))return!1}return!0};n(0,u=new Set(o.features.filter(Te).map(re=>re.properties.scheme_reference))),n(11,D={area:0,route:0,crossing:0,other:0,totalLength:0});let be=re=>{var pe,ge;return!(!u.has(re.properties.scheme_reference)||ie&&!((pe=re.properties.name)!=null&&pe.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))};for(let re of o.features)be(re)?(delete re.properties.hide_while_editing,n(11,D[re.properties.intervention_type]++,D),re.geometry.type=="LineString"&&re.properties.length_meters&&n(11,D.totalLength+=re.properties.length_meters,D)):re.properties.hide_while_editing=!0;Ot.set(o),n(11,D)}function A(){n(5,N=""),n(2,f=""),n(3,m=""),n(4,C=""),ut(It,r="",r),ut(Nt,t="",t)}function L(B){f=B,n(2,f)}function P(B){m=B,n(3,m)}function E(B){C=B,n(4,C)}function M(B){N=B,n(5,N)}function R(){r=this.value,It.set(r)}const U=()=>ut(It,r="",r);function H(){t=this.value,Nt.set(t)}const j=()=>ut(Nt,t="",t);function F(B){i=B,n(1,i)}return l.$$set=B=>{"schemesToBeShown"in B&&n(0,u=B.schemesToBeShown),"show"in B&&n(1,i=B.show)},l.$$.update=()=>{l.$$.dirty&252&&I(N,r,t,f,m,C)},[u,i,f,m,C,N,t,r,a,c,S,D,y,A,L,P,E,M,R,U,H,j,F]}class Wa extends Y{constructor(e){super(),K(this,e,Ua,Ga,J,{schemesToBeShown:0,show:1})}}function Va(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xa(l){let e,n,t,r,o;return t=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Va]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment),r=k(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),h(e,n),v(t,e,null),h(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(g(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class je extends Y{constructor(e){super(),K(this,e,null,Xa,J,{})}}function Ar(l,e,n){const t=l.slice();return t[2]=e[n],t}function Ir(l,e,n){const t=l.slice();return t[5]=e[n],t}function Nr(l){let e,n;return{c(){e=T("span"),n=k(`Â 
    `),Ce(e,"background",l[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,r){$(t,e,r),h(e,n)},p(t,r){r&1&&Ce(e,"background",t[5])},d(t){t&&p(e)}}}function Mr(l){let e,n=l[2]+"",t;return{c(){e=T("span"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&z(t,n)},d(r){r&&p(e)}}}function Ja(l){let e,n,t,r=De(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=Nr(Ir(l,r,i));let s=De(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=Mr(Ar(l,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=O(),t=T("div");for(let i=0;i<u.length;i+=1)u[i].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=De(i[0]);let f;for(f=0;f<r.length;f+=1){const c=Ir(i,r,f);o[f]?o[f].p(c,a):(o[f]=Nr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=De(i[1]);let f;for(f=0;f<s.length;f+=1){const c=Ar(i,s,f);u[f]?u[f].p(c,a):(u[f]=Mr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:te,o:te,d(i){i&&(p(e),p(n),p(t)),ct(o,i),ct(u,i)}}}function Ya(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ge extends Y{constructor(e){super(),K(this,e,Ya,Ja,J,{colorScale:0,limits:1})}}function Pr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Ka(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Za(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qa(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ef(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Za]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Qa]},$$scope:{ctx:l}}}),f=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[xa]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=O(),i=T("p"),a=k("License: "),b(f.$$.fragment),c=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(m,S){$(m,e,S),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(m,u,S),$(m,i,S),h(i,a),v(f,i,null),h(i,c),_=!0},p(m,S){const C={};S&65536&&(C.$$scope={dirty:S,ctx:m}),t.$set(C);const y={};S&65536&&(y.$$scope={dirty:S,ctx:m}),o.$set(y);const N={};S&65536&&(N.$$scope={dirty:S,ctx:m}),f.$set(N)},i(m){_||(g(t.$$.fragment,m),g(o.$$.fragment,m),g(f.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),_=!1},d(m){m&&(p(e),p(u),p(i)),w(t),w(o),w(f)}}}function tf(l){let e,n,t;return n=new me({props:{$$slots:{default:[ef]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Fr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function nf(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sf(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,S;return o=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[rf]},$$scope:{ctx:l}}}),u=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[lf]},$$scope:{ctx:l}}}),_=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[of]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=T("p"),r=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(u.$$.fragment),i=k("."),a=O(),f=T("p"),c=k("License: "),b(_.$$.fragment),m=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(C,y){$(C,e,y),$(C,n,y),$(C,t,y),h(t,r),v(o,t,null),h(t,s),v(u,t,null),h(t,i),$(C,a,y),$(C,f,y),h(f,c),v(_,f,null),h(f,m),S=!0},p(C,y){const N={};y&65536&&(N.$$scope={dirty:y,ctx:C}),o.$set(N);const D={};y&65536&&(D.$$scope={dirty:y,ctx:C}),u.$set(D);const I={};y&65536&&(I.$$scope={dirty:y,ctx:C}),_.$set(I)},i(C){S||(g(o.$$.fragment,C),g(u.$$.fragment,C),g(_.$$.fragment,C),S=!0)},o(C){d(o.$$.fragment,C),d(u.$$.fragment,C),d(_.$$.fragment,C),S=!1},d(C){C&&(p(e),p(n),p(t),p(a),p(f)),w(o),w(u),w(_)}}}function af(l){let e,n,t;return n=new me({props:{$$slots:{default:[sf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Er(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ff(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uf(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[uf]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[cf]},$$scope:{ctx:l}}}),i=new je({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&65536&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function pf(l){let e,n,t;return n=new me({props:{$$slots:{default:[$f]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Dr(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[4],limits:l[6]().map(wf)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:te,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function mf(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(r),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){$(a,e,f),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&z(o,r),f&8192&&u!==(u=a[14]+"")&&z(i,u)},d(a){a&&p(e)}}}function _f(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=T("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=T("b"),i=k(u),a=k(`
          cars`)},m(f,c){$(f,e,c),h(e,n),h(e,r),h(e,o),h(e,s),h(s,i),h(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&z(r,t),c&8200&&u!==(u=f[15]+"")&&z(i,u)},d(f){f&&p(e)}}}function gf(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=T("p"),n=T("b"),r=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){$(f,e,c),h(e,n),h(n,r),h(n,o),h(e,s),h(e,i),h(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&z(r,t),c&8192&&u!==(u=f[14]+"")&&z(i,u)},d(f){f&&p(e)}}}function df(l){Pr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?gf:o[3]=="average_cars_per_household"?_f:mf}let t=n(l),r=t(l);return{c(){r.c(),e=Me()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){Pr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function hf(l){let e,n;return e=new fe({props:{$$slots:{default:[df,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function bf(l){let e,n,t,r;const o=[q(tt),{sourceLayer:tt},{paint:{"fill-color":Le(["get",l[3]],l[6](),l[4]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[hf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",l[5]);const u=[q(`${tt}-outline`),{sourceLayer:tt},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&88?ne(o,[f&0&&ae(q(tt)),f&0&&{sourceLayer:tt},f&88&&{paint:{"fill-color":Le(["get",a[3]],a[6](),a[4]),"fill-opacity":Q(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&8?ne(u,[f&0&&ae(q(`${tt}-outline`)),f&0&&{sourceLayer:tt},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function vf(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,S;function C(M){l[7](M)}let y={$$slots:{right:[tf],default:[Ka]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new le({props:y}),W.push(()=>V(e,"checked",C)),e.$on("change",l[8]);let N=l[3]=="percent_households_with_car"&&Fr(l);function D(M){l[9](M)}let I={$$slots:{right:[af],default:[nf]},$$scope:{ctx:l}};l[1]!==void 0&&(I.checked=l[1]),o=new le({props:I}),W.push(()=>V(o,"checked",D)),o.$on("change",l[10]);let A=l[3]=="average_cars_per_household"&&Er(l);function L(M){l[11](M)}let P={$$slots:{right:[pf],default:[ff]},$$scope:{ctx:l}};l[2]!==void 0&&(P.checked=l[2]),a=new le({props:P}),W.push(()=>V(a,"checked",L)),a.$on("change",l[12]);let E=l[3]=="population_density"&&Dr(l);return m=new ke({props:{url:`pmtiles://${he()}/v1/${tt}.pmtiles`,$$slots:{default:[bf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),N&&N.c(),r=O(),b(o.$$.fragment),u=O(),A&&A.c(),i=O(),b(a.$$.fragment),c=O(),E&&E.c(),_=O(),b(m.$$.fragment)},m(M,R){v(e,M,R),$(M,t,R),N&&N.m(M,R),$(M,r,R),v(o,M,R),$(M,u,R),A&&A.m(M,R),$(M,i,R),v(a,M,R),$(M,c,R),E&&E.m(M,R),$(M,_,R),v(m,M,R),S=!0},p(M,[R]){const U={};R&65536&&(U.$$scope={dirty:R,ctx:M}),!n&&R&1&&(n=!0,U.checked=M[0],X(()=>n=!1)),e.$set(U),M[3]=="percent_households_with_car"?N?(N.p(M,R),R&8&&g(N,1)):(N=Fr(M),N.c(),g(N,1),N.m(r.parentNode,r)):N&&(ce(),d(N,1,1,()=>{N=null}),$e());const H={};R&65536&&(H.$$scope={dirty:R,ctx:M}),!s&&R&2&&(s=!0,H.checked=M[1],X(()=>s=!1)),o.$set(H),M[3]=="average_cars_per_household"?A?(A.p(M,R),R&8&&g(A,1)):(A=Er(M),A.c(),g(A,1),A.m(i.parentNode,i)):A&&(ce(),d(A,1,1,()=>{A=null}),$e());const j={};R&65536&&(j.$$scope={dirty:R,ctx:M}),!f&&R&4&&(f=!0,j.checked=M[2],X(()=>f=!1)),a.$set(j),M[3]=="population_density"?E?(E.p(M,R),R&8&&g(E,1)):(E=Dr(M),E.c(),g(E,1),E.m(_.parentNode,_)):E&&(ce(),d(E,1,1,()=>{E=null}),$e());const F={};R&65544&&(F.$$scope={dirty:R,ctx:M}),m.$set(F)},i(M){S||(g(e.$$.fragment,M),g(N),g(o.$$.fragment,M),g(A),g(a.$$.fragment,M),g(E),g(m.$$.fragment,M),S=!0)},o(M){d(e.$$.fragment,M),d(N),d(o.$$.fragment,M),d(A),d(a.$$.fragment,M),d(E),d(m.$$.fragment,M),S=!1},d(M){M&&(p(t),p(r),p(u),p(i),p(c),p(_)),w(e,M),N&&N.d(M),w(o,M),A&&A.d(M),w(a,M),E&&E.d(M),w(m,M)}}}let tt="census_output_areas";const wf=l=>l.toLocaleString();function kf(l,e,n){let t=Z.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(y){let N=y.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${N}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${N}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(y){r=y,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function _(y){o=y,n(1,o)}const m=()=>{n(0,r=!1),n(2,s=!1)};function S(y){s=y,n(2,s)}const C=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,_,m,S,C]}class yf extends Y{constructor(e){super(),K(this,e,kf,vf,J,{})}}function Sf(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Cf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tf(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Cf]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of December 2022."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Of(l){let e,n,t;return n=new me({props:{$$slots:{default:[Tf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Lf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Af(l){let e,n;return e=new fe({props:{$$slots:{default:[Lf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function If(l){let e,n,t,r;const o=[q(Mt),{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Af]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",Mf);const u=[q(`${Mt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(q(Mt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(q(`${Mt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Nf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Of],default:[Sf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new St({props:{data:`${he()}/v1/${Mt}.geojson`,$$slots:{default:[If]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Mt="combined_authorities";function Mf(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Pf(l,e,n){let t=Z.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ff extends Y{constructor(e){super(),K(this,e,Pf,Nf,J,{})}}function Ef(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Df(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jf(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rf(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Df]},$$scope:{ctx:l}}}),o=new ee({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[jf]},$$scope:{ctx:l}}}),i=new je({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function zf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Rf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function jr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Bf(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,_=l[4].rank.toLocaleString()+"",m,S;return{c(){e=T("p"),t=k(n),r=k(` has an IMD score of
        `),o=T("b"),u=k(s),i=O(),a=T("p"),f=k("Rank: "),c=T("b"),m=k(_),S=k(`
        / 32,844 LSOAs`)},m(C,y){$(C,e,y),h(e,t),h(e,r),h(e,o),h(o,u),$(C,i,y),$(C,a,y),h(a,f),h(a,c),h(c,m),h(a,S)},p(C,y){y&16&&n!==(n=C[4].LSOA11CD+"")&&z(t,n),y&16&&s!==(s=C[4].score+"")&&z(u,s),y&16&&_!==(_=C[4].rank.toLocaleString()+"")&&z(m,_)},d(C){C&&(p(e),p(i),p(a))}}}function Hf(l){let e,n;return e=new fe({props:{$$slots:{default:[Bf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qf(l){let e,n,t,r;const o=[q(nt),{sourceLayer:nt},{paint:{"fill-color":Le(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Hf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s});const u=[q(`${nt}-outline`),{sourceLayer:nt},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&7?ne(o,[f&0&&ae(q(nt)),f&0&&{sourceLayer:nt},f&6&&{paint:{"fill-color":Le(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Q(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?ne(u,[f&0&&ae(q(`${nt}-outline`)),f&0&&{sourceLayer:nt},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Gf(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[zf],default:[Ef]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&jr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${nt}.pmtiles`,$$slots:{default:[qf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=jr(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let nt="imd";function Uf(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Wf extends Y{constructor(e){super(),K(this,e,Uf,Gf,J,{})}}function Vf(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Xf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jf(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Xf]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of January 2024."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Yf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Jf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Kf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Zf(l){let e,n;return e=new fe({props:{$$slots:{default:[Kf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qf(l){let e,n,t,r;const o=[q(Pt),{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Zf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",eu);const u=[q(`${Pt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(q(Pt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(q(`${Pt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function xf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Yf],default:[Vf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new St({props:{data:`${he()}/v1/${Pt}.geojson`,$$slots:{default:[Qf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Pt="local_authority_districts";function eu(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function tu(l,e,n){let t=Z.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class nu extends Y{constructor(e){super(),K(this,e,tu,xf,J,{})}}function ru(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function lu(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ou(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function su(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function au(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fu(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,S,C,y,N,D,I,A,L,P;return t=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[lu]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ou]},$$scope:{ctx:l}}}),u=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[su]},$$scope:{ctx:l}}}),m=new ee({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[iu]},$$scope:{ctx:l}}}),D=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[au]},$$scope:{ctx:l}}}),L=new je({}),{c(){e=T("p"),n=k("LPAs may be a "),b(t.$$.fragment),r=k(", "),b(o.$$.fragment),s=k("y, or "),b(u.$$.fragment),i=k("."),a=O(),f=T("p"),c=T("strong"),_=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(m.$$.fragment),S=k(" to get more details."),C=O(),y=T("p"),N=k("Data from ONS Geography via "),b(D.$$.fragment),I=k(", as of November 2022."),A=O(),b(L.$$.fragment)},m(E,M){$(E,e,M),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),v(u,e,null),h(e,i),$(E,a,M),$(E,f,M),h(f,c),h(c,_),v(m,c,null),h(c,S),$(E,C,M),$(E,y,M),h(y,N),v(D,y,null),h(y,I),$(E,A,M),v(L,E,M),P=!0},p(E,M){const R={};M&16&&(R.$$scope={dirty:M,ctx:E}),t.$set(R);const U={};M&16&&(U.$$scope={dirty:M,ctx:E}),o.$set(U);const H={};M&16&&(H.$$scope={dirty:M,ctx:E}),u.$set(H);const j={};M&16&&(j.$$scope={dirty:M,ctx:E}),m.$set(j);const F={};M&16&&(F.$$scope={dirty:M,ctx:E}),D.$set(F)},i(E){P||(g(t.$$.fragment,E),g(o.$$.fragment,E),g(u.$$.fragment,E),g(m.$$.fragment,E),g(D.$$.fragment,E),g(L.$$.fragment,E),P=!0)},o(E){d(t.$$.fragment,E),d(o.$$.fragment,E),d(u.$$.fragment,E),d(m.$$.fragment,E),d(D.$$.fragment,E),d(L.$$.fragment,E),P=!1},d(E){E&&(p(e),p(a),p(f),p(C),p(y),p(A)),w(t),w(o),w(u),w(m),w(D),w(L,E)}}}function uu(l){let e,n,t;return n=new me({props:{$$slots:{default:[fu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function cu(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function $u(l){let e,n;return e=new fe({props:{$$slots:{default:[cu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pu(l){let e,n,t,r;const o=[q(rt),{sourceLayer:rt},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[$u]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s});const u=[q(`${rt}-outline`),{sourceLayer:rt},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(q(rt)),f&0&&{sourceLayer:rt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(q(`${rt}-outline`)),f&0&&{sourceLayer:rt},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function mu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[uu],default:[ru]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${rt}.pmtiles`,$$slots:{default:[pu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let rt="local_planning_authorities";function _u(l,e,n){let t=Z.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class gu extends Y{constructor(e){super(),K(this,e,_u,mu,J,{})}}function du(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function hu(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bu(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[hu]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function vu(l){let e,n,t;return n=new me({props:{$$slots:{default:[bu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function wu(l){let e,n=l[3].Name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&z(t,n)},d(r){r&&p(e)}}}function ku(l){let e,n;return e=new fe({props:{$$slots:{default:[wu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function yu(l){let e,n,t,r;const o=[q(lt),{sourceLayer:lt},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ku]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",Cu);const u=[q(`${lt}-outline`),{sourceLayer:lt},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(q(lt)),f&0&&{sourceLayer:lt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(q(`${lt}-outline`)),f&0&&{sourceLayer:lt},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Su(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[vu],default:[du]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${lt}.pmtiles`,$$slots:{default:[yu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let lt="parliamentary_constituencies";function Cu(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Tu(l,e,n){let t=Z.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ou extends Y{constructor(e){super(),K(this,e,Tu,Su,J,{})}}function Lu(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Au(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Iu(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Au]},$$scope:{ctx:l}}}),i=new je({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        Âµgm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),h(e,o),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){a||(g(t.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(i,f)}}}function Nu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Iu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Rr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,_,m,S,C,y,N,D;function I(L){l[7](L)}let A={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return l[0]!==void 0&&(A.value=l[0]),e=new gt({props:A}),W.push(()=>V(e,"value",I)),{c(){b(e.$$.fragment),t=O(),r=T("p"),s=k(o),u=O(),i=T("div"),a=T("label"),f=k(`Opacity
      `),c=T("input"),_=O(),m=T("img"),G(c,"type","range"),G(c,"min","0"),G(c,"max","100"),an(m.src,S=l[5](l[0]))||G(m,"src",S),G(m,"width",150),G(m,"alt",C=`Legend for ${l[0]} layer`)},m(L,P){v(e,L,P),$(L,t,P),$(L,r,P),h(r,s),$(L,u,P),$(L,i,P),h(i,a),h(a,f),h(a,c),Ye(c,l[2]),$(L,_,P),$(L,m,P),y=!0,N||(D=[Ze(c,"change",l[8]),Ze(c,"input",l[8])],N=!0)},p(L,P){const E={};!n&&P&1&&(n=!0,E.value=L[0],X(()=>n=!1)),e.$set(E),(!y||P&1)&&o!==(o=L[3](L[0])+"")&&z(s,o),P&4&&Ye(c,L[2]),(!y||P&1&&!an(m.src,S=L[5](L[0])))&&G(m,"src",S),(!y||P&1&&C!==(C=`Legend for ${L[0]} layer`))&&G(m,"alt",C)},i(L){y||(g(e.$$.fragment,L),y=!0)},o(L){d(e.$$.fragment,L),y=!1},d(L){L&&(p(t),p(r),p(u),p(i),p(_),p(m)),w(e,L),N=!1,to(D)}}}function Mu(l){let e,n;const t=[q("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qo({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&6?ne(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Pu(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={$$slots:{right:[Nu],default:[Lu]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[1]&&Rr(l);return o=new fs({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Mu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&g(a,1)):(a=Rr(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&1&&(m.tiles=[f[4](f[0])]),c&2054&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}function Fu(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(S){return t[1]}function a(S){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${C}`}function f(S){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${C}`}function c(S){r=S,n(1,r)}function _(S){s=S,n(0,s)}function m(){o=Qt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s])},[s,r,o,i,a,f,c,_,m]}class Eu extends Y{constructor(e){super(),K(this,e,Fu,Pu,J,{})}}function Du(l){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ju(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ru(l){let e,n,t,r,o,s,u,i,a;return o=new ee({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[ju]},$$scope:{ctx:l}}}),i=new je({}),{c(){e=T("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=O(),t=T("p"),r=k("Data from June 2019, produced by "),b(o.$$.fragment),s=k(". See there for methodology details"),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(i,f)}}}function zu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ru]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function zr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Bu(l){let e,n=l[3].noiseclass+"",t,r,o=Br(l[3].noiseclass)+"",s,u;return{c(){e=T("p"),t=k(n),r=k(" dB ("),s=k(o),u=k(")")},m(i,a){$(i,e,a),h(e,t),h(e,r),h(e,s),h(e,u)},p(i,a){a&8&&n!==(n=i[3].noiseclass+"")&&z(t,n),a&8&&o!==(o=Br(i[3].noiseclass)+"")&&z(s,o)},d(i){i&&p(e)}}}function Hu(l){let e,n;return e=new fe({props:{$$slots:{default:[Bu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qu(l){let e,n;const t=[q(Ft),{sourceLayer:Ft},{paint:{"fill-color":pt(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][0],"65.0-69.9":l[1][1],"70.0-74.9":l[1][1],">=75.0":l[1][2]},"red"),"fill-opacity":Q(.5,.8)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Hu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(q(Ft)),s&0&&{sourceLayer:Ft},s&2&&{paint:{"fill-color":pt(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":Q(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Gu(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[zu],default:[Du]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&zr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Ft}.pmtiles`,$$slots:{default:[qu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=zr(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&17&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Ft="road_noise";function Br(l){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[l]}function Uu(l,e,n){let t=[Z.sequential_low_to_high[0],Z.sequential_low_to_high[2],Z.sequential_low_to_high[4]],r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Wu extends Y{constructor(e){super(),K(this,e,Uu,Gu,J,{})}}function Vu(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Xu(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ju(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Xu]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Yu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ju]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Ku(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Zu(l){let e,n;return e=new fe({props:{$$slots:{default:[Ku,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qu(l){let e,n,t,r;const o=[q(ot),{sourceLayer:ot},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Zu]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",ec);const u=[q(`${ot}-outline`),{sourceLayer:ot},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(q(ot)),f&0&&{sourceLayer:ot},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(q(`${ot}-outline`)),f&0&&{sourceLayer:ot},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function xu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Yu],default:[Vu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${ot}.pmtiles`,$$slots:{default:[Qu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let ot="wards";function ec(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function tc(l,e,n){let t=Z.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class nc extends Y{constructor(e){super(),K(this,e,tc,xu,J,{})}}function rc(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lc(l){let e,n,t,r;return t=new ee({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[rc]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&p(e),w(t)}}}class et extends Y{constructor(e){super(),K(this,e,null,lc,J,{})}}function oc(l){let e,n,t;return e=new Pe({props:{color:Z.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function sc(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ic(l){let e,n,t,r,o,s,u,i,a;return o=new ee({props:{href:"https://gtfs.org",$$slots:{default:[sc]},$$scope:{ctx:l}}}),i=new et({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=T("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(i,f)}}}function ac(l){let e,n,t;return n=new me({props:{$$slots:{default:[ic]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function fc(l){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uc(l){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cc(l){let e;function n(o,s){return o[2].has_bus_lane?uc:fc}let t=n(l),r=t(l);return{c(){r.c(),e=Me()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function $c(l){let e,n;return e=new fe({props:{$$slots:{default:[cc,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pc(l){let e,n;const t=[q(Et),{sourceLayer:Et},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[$c]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(q(Et)),s&0&&{sourceLayer:Et},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function mc(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[ac],default:[oc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Et}.pmtiles`,$$slots:{default:[pc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Et="bus_routes";function _c(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class gc extends Y{constructor(e){super(),K(this,e,_c,mc,J,{})}}function Hr(l){const e=Tc(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function qr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function dc(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hc(l){let e,n,t,r,o,s,u,i;return u=new et({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=O(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=O(),b(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),v(u,a,f),i=!0},p:te,i(a){i||(g(u.$$.fragment,a),i=!0)},o(a){d(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),w(u,a)}}}function bc(l){let e,n,t;return n=new me({props:{$$slots:{default:[hc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Gr(l){let e,n,t;return n=new xe({props:{$$slots:{default:[wc]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function vc(l){let e,n,t=l[9]+"",r,o,s;return e=new Pe({props:{color:l[10]}}),{c(){b(e.$$.fragment),n=O(),r=k(t),o=O()},m(u,i){v(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:te,i(u){s||(g(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function Ur(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[vc]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function wc(l){let e,n,t=De(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Ur(qr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Me()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=De(s[2]);let i;for(i=0;i<t.length;i+=1){const a=qr(s,t,i);r[i]?(r[i].p(a,u),g(r[i],1)):(r[i]=Ur(a),r[i].c(),g(r[i],1),r[i].m(e.parentNode,e))}for(ce(),i=t.length;i<r.length;i+=1)o(i);$e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)g(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),ct(r,s)}}}function kc(l){Hr(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,_,m=l[8]+"",S;return{c(){e=T("h2"),t=k(n),r=O(),o=T("p"),s=k("Direction: "),u=T("b"),a=O(),f=T("p"),c=k("Width: "),_=T("b"),S=k(m)},m(C,y){$(C,e,y),h(e,t),$(C,r,y),$(C,o,y),h(o,s),h(o,u),u.innerHTML=i,$(C,a,y),$(C,f,y),h(f,c),h(f,_),h(_,S)},p(C,y){Hr(C),y&32&&n!==(n=C[6]+"")&&z(t,n),y&32&&i!==(i=C[7]+"")&&(u.innerHTML=i),y&32&&m!==(m=C[8]+"")&&z(S,m)},d(C){C&&(p(e),p(r),p(o),p(a),p(f))}}}function yc(l){let e,n;return e=new fe({props:{$$slots:{default:[kc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Sc(l){let e,n;const t=[q(Dt),{sourceLayer:Dt},{paint:{"line-color":pt(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Wr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[yc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),e.$on("click",Oc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(q(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Wr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Cc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[bc],default:[dc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Gr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Dt}.pmtiles`,$$slots:{default:[Sc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&8192&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=Gr(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&8195&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Dt="cycle_paths";function Tc(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function Oc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Wr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function Lc(l,e,n){let t=[["track","Separated tracks",Z.cycle_paths.track],["lane","Unprotected lanes",Z.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class Ac extends Y{constructor(e){super(),K(this,e,Lc,Cc,J,{})}}function Ic(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Nc(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mc(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Nc]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),r=k(", as of September 2021."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Pc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Mc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Fc(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&z(t,n)},d(r){r&&p(e)}}}function Ec(l){let e,n;return e=new fe({props:{$$slots:{default:[Fc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Dc(l){let e,n;const t=[q(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Ec]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(q(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function jc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Pc],default:[Ic]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${jt}.pmtiles`,$$slots:{default:[Dc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let jt="mrn";function Rc(l,e,n){let t=Z.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class zc extends Y{constructor(e){super(),K(this,e,Rc,jc,J,{})}}function Bc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Strategic Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Hc(l){let e;return{c(){e=k(`OS Open Roads
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qc(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Hc]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Gc(l){let e,n,t;return n=new me({props:{$$slots:{default:[qc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Uc(l){let e,n=(l[3].name??"Unknown SRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown SRN road")+"")&&z(t,n)},d(r){r&&p(e)}}}function Wc(l){let e,n;return e=new fe({props:{$$slots:{default:[Uc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Vc(l){let e,n;const t=[q(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Wc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(q(Rt)),s&0&&{sourceLayer:Rt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Xc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Gc],default:[Bc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Rt}.pmtiles`,$$slots:{default:[Vc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Rt="srn";function Jc(l,e,n){let t=Z.srn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Yc extends Y{constructor(e){super(),K(this,e,Jc,Xc,J,{})}}function Kc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Zc(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qc(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Zc]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function xc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Qc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Vr(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&z(o,r)},d(s){s&&p(e)}}}function Xr(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&z(o,r)},d(s){s&&p(e)}}}function Jr(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&z(o,r)},d(s){s&&p(e)}}}function Yr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&z(o,r)},d(s){s&&p(e)}}}function Kr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&z(o,r)},d(s){s&&p(e)}}}function Zr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&z(o,r)},d(s){s&&p(e)}}}function Qr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&z(o,r)},d(s){s&&p(e)}}}function xr(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&z(o,r)},d(s){s&&p(e)}}}function el(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&z(o,r)},d(s){s&&p(e)}}}function e$(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&Vr(l),c=l[3].Greenway&&Xr(l),_=l[3].RouteType&&Jr(l),m=l[3].RouteNo&&Yr(l),S=l[3].RouteCat&&Kr(l),C=l[3].OpenStatus&&Zr(l),y=l[3].Surface&&Qr(l),N=l[3].Quality&&xr(l),D=l[3].RoadClass&&el(l);return{c(){e=T("ul"),f&&f.c(),n=O(),c&&c.c(),t=O(),_&&_.c(),r=O(),m&&m.c(),o=O(),S&&S.c(),s=O(),C&&C.c(),u=O(),y&&y.c(),i=O(),N&&N.c(),a=O(),D&&D.c()},m(I,A){$(I,e,A),f&&f.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),_&&_.m(e,null),h(e,r),m&&m.m(e,null),h(e,o),S&&S.m(e,null),h(e,s),C&&C.m(e,null),h(e,u),y&&y.m(e,null),h(e,i),N&&N.m(e,null),h(e,a),D&&D.m(e,null)},p(I,A){I[3].Desc_?f?f.p(I,A):(f=Vr(I),f.c(),f.m(e,n)):f&&(f.d(1),f=null),I[3].Greenway?c?c.p(I,A):(c=Xr(I),c.c(),c.m(e,t)):c&&(c.d(1),c=null),I[3].RouteType?_?_.p(I,A):(_=Jr(I),_.c(),_.m(e,r)):_&&(_.d(1),_=null),I[3].RouteNo?m?m.p(I,A):(m=Yr(I),m.c(),m.m(e,o)):m&&(m.d(1),m=null),I[3].RouteCat?S?S.p(I,A):(S=Kr(I),S.c(),S.m(e,s)):S&&(S.d(1),S=null),I[3].OpenStatus?C?C.p(I,A):(C=Zr(I),C.c(),C.m(e,u)):C&&(C.d(1),C=null),I[3].Surface?y?y.p(I,A):(y=Qr(I),y.c(),y.m(e,i)):y&&(y.d(1),y=null),I[3].Quality?N?N.p(I,A):(N=xr(I),N.c(),N.m(e,a)):N&&(N.d(1),N=null),I[3].RoadClass?D?D.p(I,A):(D=el(I),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(I){I&&p(e),f&&f.d(),c&&c.d(),_&&_.d(),m&&m.d(),S&&S.d(),C&&C.d(),y&&y.d(),N&&N.d(),D&&D.d()}}}function t$(l){let e,n;return e=new fe({props:{$$slots:{default:[e$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function n$(l){let e,n;const t=[q(zt),{sourceLayer:zt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[t$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(q(zt)),s&0&&{sourceLayer:zt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function r$(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[xc],default:[Kc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${zt}.pmtiles`,$$slots:{default:[n$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let zt="national_cycle_network";function l$(l,e,n){let t=Z.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class o$ extends Y{constructor(e){super(),K(this,e,l$,r$,J,{})}}function tl(l,e,n){const t=l.slice();return t[5]=e[n][0],t[6]=e[n][1],t[7]=e[n][2],t}function s$(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function i$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function a$(l){let e,n,t,r,o,s,u,i,a,f,c;return a=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[i$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,n=O(),t=T("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,r=O(),o=T("p"),o.textContent="Data valid as of 1 January, 2024",s=O(),u=T("p"),i=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(a.$$.fragment),f=k(".")},m(_,m){$(_,e,m),$(_,n,m),$(_,t,m),$(_,r,m),$(_,o,m),$(_,s,m),$(_,u,m),h(u,i),v(a,u,null),h(u,f),c=!0},p(_,m){const S={};m&1024&&(S.$$scope={dirty:m,ctx:_}),a.$set(S)},i(_){c||(g(a.$$.fragment,_),c=!0)},o(_){d(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(r),p(o),p(s),p(u)),w(a)}}}function f$(l){let e,n,t;return n=new me({props:{$$slots:{default:[a$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function nl(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function u$(l){let e,n,t=cn(l[4].angle+l[7])+"",r;return{c(){e=T("p"),n=new ht(!1),r=k(` side of the road: no pavement
          `),n.a=r},m(o,s){$(o,e,s),n.m(t,e),h(e,r)},p(o,s){s&16&&t!==(t=cn(o[4].angle+o[7])+"")&&n.p(t)},d(o){o&&p(e)}}}function c$(l){let e,n,t=cn(l[4].angle+l[7])+"",r,o,s=l[5]+"",u,i,a,f=l[6]+"",c,_;return{c(){e=T("p"),n=new ht(!1),r=k(` side of the road:
            `),o=T("b"),u=k(s),i=k(`
            m average,
            `),a=T("b"),c=k(f),_=k(`
            m minimum
          `),n.a=r},m(m,S){$(m,e,S),n.m(t,e),h(e,r),h(e,o),h(o,u),h(e,i),h(e,a),h(a,c),h(e,_)},p(m,S){S&16&&t!==(t=cn(m[4].angle+m[7])+"")&&n.p(t),S&16&&s!==(s=m[5]+"")&&z(u,s),S&16&&f!==(f=m[6]+"")&&z(c,f)},d(m){m&&p(e)}}}function rl(l){let e;function n(o,s){return o[5]?c$:u$}let t=n(l),r=t(l);return{c(){r.c(),e=Me()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function $$(l){let e,n=De([[l[4].left_average,l[4].left_minimum,-90],[l[4].right_average,l[4].right_minimum,90]]),t=[];for(let r=0;r<2;r+=1)t[r]=rl(tl(l,n,r));return{c(){for(let r=0;r<2;r+=1)t[r].c();e=Me()},m(r,o){for(let s=0;s<2;s+=1)t[s]&&t[s].m(r,o);$(r,e,o)},p(r,o){if(o&16){n=De([[r[4].left_average,r[4].left_minimum,-90],[r[4].right_average,r[4].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const u=tl(r,n,s);t[s]?t[s].p(u,o):(t[s]=rl(u),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(r){r&&p(e),ct(t,r)}}}function p$(l){let e,n;return e=new fe({props:{openOn:"hover",$$slots:{default:[$$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1040&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function m$(l){let e,n;const t=[q(Bt),{sourceLayer:Bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],l[2],l[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[p$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(q(Bt)),s&0&&{sourceLayer:Bt},t[2],t[3],s&6&&{paint:{"line-color":Le(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":He,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function _$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[f$],default:[s$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&nl(l);return o=new ke({props:{url:`pmtiles://${$n()}/v1/${Bt}.pmtiles`,$$slots:{default:[m$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&1024&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=nl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&1025&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Bt="pavement_widths";function g$(l){let e=Math.floor((l+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function cn(l){return`${g$(l)} <span style="display: inline-block; rotate: ${l}deg">â¬†</span>`}function d$(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class h$ extends Y{constructor(e){super(),K(this,e,d$,_$,J,{})}}function b$(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function v$(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function w$(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function k$(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new ee({props:{href:"https://www.pct.bike",$$slots:{default:[v$]},$$scope:{ctx:l}}}),a=new ee({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[w$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=O(),o=T("p"),s=k("See "),b(u.$$.fragment),i=k(" and "),b(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(_,m){$(_,e,m),$(_,n,m),$(_,t,m),$(_,r,m),$(_,o,m),h(o,s),v(u,o,null),h(o,i),v(a,o,null),h(o,f),c=!0},p(_,m){const S={};m&1024&&(S.$$scope={dirty:m,ctx:_}),u.$set(S);const C={};m&1024&&(C.$$scope={dirty:m,ctx:_}),a.$set(C)},i(_){c||(g(u.$$.fragment,_),g(a.$$.fragment,_),c=!0)},o(_){d(u.$$.fragment,_),d(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(r),p(o)),w(u),w(a)}}}function y$(l){let e,n,t;return n=new me({props:{$$slots:{default:[k$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ll(l){let e,n,t,r,o,s,u,i;e=new Ge({props:{colorScale:l[3],limits:l[4]}});function a(m){l[7](m)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new no({props:f}),W.push(()=>V(t,"value",a));function c(m){l[8](m)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(_.value=l[1]),s=new gt({props:_}),W.push(()=>V(s,"value",c)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment)},m(m,S){v(e,m,S),$(m,n,S),v(t,m,S),$(m,o,S),v(s,m,S),i=!0},p(m,S){const C={};!r&&S&1&&(r=!0,C.value=m[0],X(()=>r=!1)),t.$set(C);const y={};!u&&S&2&&(u=!0,y.value=m[1],X(()=>u=!1)),s.$set(y)},i(m){i||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(s.$$.fragment,m),i=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(s.$$.fragment,m),i=!1},d(m){m&&(p(n),p(o)),w(e,m),w(t,m),w(s,m)}}}function S$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new ht(!1),t=Me(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function C$(l){let e,n;return e=new fe({props:{$$slots:{default:[S$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function T$(l){let e,n;const t=[q(it),{sourceLayer:it},{paint:{"line-color":Le(["get",l[1]],l[4],l[3]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[2]&&l[0]==it?"visible":"none"}}];let r={$$slots:{default:[C$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ae(q(it)),s&0&&{sourceLayer:it},s&26&&{paint:{"line-color":Le(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":Q(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==it?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function O$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new ht(!1),t=Me(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function L$(l){let e,n;return e=new fe({props:{$$slots:{default:[O$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function A$(l){let e,n;const t=[q(_t),{sourceLayer:_t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get",l[1]],l[4],l[3]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[2]&&l[0]==_t?"visible":"none"}}];let r={$$slots:{default:[L$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ae(q(_t)),s&0&&{sourceLayer:_t},t[2],t[3],s&26&&{paint:{"line-color":Le(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":Q(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==_t?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function I$(l){let e,n,t,r,o,s,u,i;function a(_){l[6](_)}let f={$$slots:{right:[y$],default:[b$]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),W.push(()=>V(e,"checked",a));let c=l[2]&&ll(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${it}.pmtiles`,$$slots:{default:[T$]},$$scope:{ctx:l}}}),u=new ke({props:{url:`pmtiles://${he()}/v1/${_t}.pmtiles`,$$slots:{default:[A$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),c&&c.c(),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment)},m(_,m){v(e,_,m),$(_,t,m),c&&c.m(_,m),$(_,r,m),v(o,_,m),$(_,s,m),v(u,_,m),i=!0},p(_,[m]){const S={};m&1024&&(S.$$scope={dirty:m,ctx:_}),!n&&m&4&&(n=!0,S.checked=_[2],X(()=>n=!1)),e.$set(S),_[2]?c?(c.p(_,m),m&4&&g(c,1)):(c=ll(_),c.c(),g(c,1),c.m(r.parentNode,r)):c&&(ce(),d(c,1,1,()=>{c=null}),$e());const C={};m&1031&&(C.$$scope={dirty:m,ctx:_}),o.$set(C);const y={};m&1031&&(y.$$scope={dirty:m,ctx:_}),u.$set(y)},i(_){i||(g(e.$$.fragment,_),g(c),g(o.$$.fragment,_),g(u.$$.fragment,_),i=!0)},o(_){d(e.$$.fragment,_),d(c),d(o.$$.fragment,_),d(u.$$.fragment,_),i=!1},d(_){_&&(p(t),p(r),p(s)),w(e,_),c&&c.d(_),w(o,_),w(u,_)}}}let it="pct_commute",_t="pct_school";function N$(l,e,n){let t=Z.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=it,s="baseline",u=!1;function i(_){let m=_.baseline,S=_.gov_target,C=_.go_dutch,y=`<h2>Trip purpose: ${o==it?"commuting":"school"}</h2>`;if(y+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)y+=`<p>Government target (2025): <b>${S.toLocaleString()}</b></p>`,y+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let N=(S/m).toFixed(1),D=(C/m).toFixed(1);y+=`<p>Government target (2025): ${S.toLocaleString()} (<b>${N}x</b> of baseline)</p>`,y+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return y}function a(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){s=_,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class M$ extends Y{constructor(e){super(),K(this,e,N$,I$,J,{})}}function P$(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function F$(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function E$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function D$(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new ee({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[F$]},$$scope:{ctx:l}}}),f=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[E$]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",u=O(),i=T("p"),a=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),c=k(".")},m(m,S){$(m,e,S),h(e,n),v(t,e,null),h(e,r),$(m,o,S),$(m,s,S),$(m,u,S),$(m,i,S),h(i,a),v(f,i,null),h(i,c),_=!0},p(m,S){const C={};S&256&&(C.$$scope={dirty:S,ctx:m}),t.$set(C);const y={};S&256&&(y.$$scope={dirty:S,ctx:m}),f.$set(y)},i(m){_||(g(t.$$.fragment,m),g(f.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(f.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(u),p(i)),w(t),w(f)}}}function j$(l){let e,n,t;return n=new me({props:{$$slots:{default:[D$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ol(l){let e,n,t,r,o;e=new Ge({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new no({props:u}),W.push(()=>V(t,"value",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],X(()=>r=!1)),t.$set(f)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function R$(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,_=l[4][l[7].highest_description]+"",m,S;return{c(){e=T("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=O(),u=T("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),m=k(_),S=k(")")},m(C,y){$(C,e,y),h(e,n),h(e,r),h(e,o),$(C,s,y),$(C,u,y),h(u,i),h(u,f),h(u,c),h(u,m),h(u,S)},p(C,y){y&128&&t!==(t=C[7].indicative_mph+"")&&z(r,t),y&128&&a!==(a=C[7].highest_mph+"")&&z(f,a),y&128&&_!==(_=C[4][C[7].highest_description]+"")&&z(m,_)},d(C){C&&(p(e),p(s),p(u))}}}function z$(l){let e,n;return e=new fe({props:{$$slots:{default:[R$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function B$(l){let e,n;const t=[q(Ht),{sourceLayer:Ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get",l[0]],l[3],l[2]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[z$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&15?ne(t,[s&0&&ae(q(Ht)),s&0&&{sourceLayer:Ht},t[2],t[3],s&13&&{paint:{"line-color":Le(["get",o[0]],o[3],o[2]),"line-width":He,"line-opacity":Q(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function H$(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={$$slots:{right:[j$],default:[P$]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[1]&&ol(l);return o=new ke({props:{url:`pmtiles://${$n()}/v1/${Ht}.pmtiles`,$$slots:{default:[B$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&g(a,1)):(a=ol(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&259&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Ht="road_speeds";function q$(l,e,n){let t=Z.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class G$ extends Y{constructor(e){super(),K(this,e,q$,H$,J,{})}}function U$(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function W$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function V$(l){let e,n,t,r,o,s,u,i,a;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[W$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",r=O(),o=T("p"),s=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(g(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),w(u)}}}function X$(l){let e,n,t;return n=new me({props:{$$slots:{default:[V$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function sl(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function J$(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",_,m;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(r),s=k(`
        meters`),u=O(),i=T("p"),a=k("Minimum width: "),f=T("b"),_=k(c),m=k(`
        meters`)},m(S,C){$(S,e,C),h(e,n),h(e,t),h(t,o),h(e,s),$(S,u,C),$(S,i,C),h(i,a),h(i,f),h(f,_),h(i,m)},p(S,C){C&16&&r!==(r=S[4].average+"")&&z(o,r),C&16&&c!==(c=S[4].minimum+"")&&z(_,c)},d(S){S&&(p(e),p(u),p(i))}}}function Y$(l){let e,n;return e=new fe({props:{$$slots:{default:[J$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function K$(l){let e,n;const t=[q(qt),{sourceLayer:qt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get","average"],l[2],l[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Y$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(q(qt)),s&0&&{sourceLayer:qt},t[2],t[3],s&6&&{paint:{"line-color":Le(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Z$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[X$],default:[U$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&sl(l);return o=new ke({props:{url:`pmtiles://${$n()}/v1/${qt}.pmtiles`,$$slots:{default:[K$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=sl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let qt="road_widths";function Q$(l,e,n){let t=Z.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class x$ extends Y{constructor(e){super(),K(this,e,Q$,Z$,J,{})}}function ep(l){let e,n,t;return e=new Pe({props:{color:Z.trams}}),{c(){b(e.$$.fragment),n=k(`
  Trams`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function tp(l){let e,n,t,r;return t=new et({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:te,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function np(l){let e,n,t;return n=new me({props:{$$slots:{default:[tp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function rp(l){let e,n;const t=[q(Gt),{sourceLayer:Gt},{paint:{"line-color":Z.trams,"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),e.$on("click",op),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(q(Gt)),s&0&&{sourceLayer:Gt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function lp(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[np],default:[ep]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Gt}.pmtiles`,$$slots:{default:[rp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Gt="trams";function op(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function sp(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class ip extends Y{constructor(e){super(),K(this,e,sp,lp,J,{})}}function ap(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fp(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function up(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[fp]},$$scope:{ctx:l}}}),i=new je({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=O(),s=T("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),$(f,o,c),$(f,s,c),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){a||(g(t.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),w(t),w(i,f)}}}function cp(l){let e,n,t;return n=new me({props:{$$slots:{default:[up]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function il(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:te,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function $p(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,_,m,S,C,y=l[4].peak_description+"",N,D,I,A,L,P=l[4].total+"",E,M,R=l[4].total_description+"",U,H;return{c(){e=T("p"),n=k("Stop name: "),t=T("b"),o=k(r),s=O(),u=T("p"),i=k("Peak: "),a=T("b"),c=k(f),_=k(`
        buses during the busiest hour of any day`),m=O(),S=T("p"),C=k("The peak hour is "),N=k(y),D=O(),I=T("p"),A=k("Total buses per day: "),L=T("b"),E=k(P),M=k(`
        (for `),U=k(R),H=k(", the busiest day of the week)")},m(j,F){$(j,e,F),h(e,n),h(e,t),h(t,o),$(j,s,F),$(j,u,F),h(u,i),h(u,a),h(a,c),h(u,_),$(j,m,F),$(j,S,F),h(S,C),h(S,N),$(j,D,F),$(j,I,F),h(I,A),h(I,L),h(L,E),h(I,M),h(I,U),h(I,H)},p(j,F){F&16&&r!==(r=j[4].stop_name+"")&&z(o,r),F&16&&f!==(f=j[4].peak+"")&&z(c,f),F&16&&y!==(y=j[4].peak_description+"")&&z(N,y),F&16&&P!==(P=j[4].total+"")&&z(E,P),F&16&&R!==(R=j[4].total_description+"")&&z(U,R)},d(j){j&&(p(e),p(s),p(u),p(m),p(S),p(D),p(I))}}}function pp(l){let e,n;return e=new fe({props:{$$slots:{default:[$p,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mp(l){let e,n;const t=[q(Ut),{sourceLayer:Ut},{paint:{"circle-color":Le(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[pp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new mt({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(q(Ut)),s&0&&{sourceLayer:Ut},s&6&&{paint:{"circle-color":Le(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function _p(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[cp],default:[ap]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&il(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Ut}.pmtiles`,$$slots:{default:[mp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=il(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Ut="bus_stops";function gp(l,e,n){let t=Z.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class dp extends Y{constructor(e){super(),K(this,e,gp,_p,J,{})}}function hp(l){let e,n,t;return{c(){e=T("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=Ze(e,"change",l[5]),n=!0)},p:te,d(r){r&&p(e),l[7](null),n=!1,t()}}}function al(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[vp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function bp(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Pe({props:{color:Wt}}),{c(){b(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(u,i){v(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&z(r,t)},i(u){s||(g(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function vp(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[bp]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function wp(l){let e,n,t,r,o,s;e=new Cn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[hp]},$$scope:{ctx:l}}}),t=new ro({props:{errorMessage:l[3]}});let u=l[2]>0&&al(l);return{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),u&&u.c(),o=Me()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&g(u,1)):(u=al(i),u.c(),g(u,1),u.m(o.parentNode,o)):u&&(ce(),d(u,1,1,()=>{u=null}),$e())},i(i){s||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(u),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(u),s=!1},d(i){i&&(p(n),p(r),p(o)),w(e,i),w(t,i),u&&u.d(i)}}}function kp(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,_,m,S,C=l[10].notes+"",y,N,D,I,A,L,P,E=l[10].id+"",M,R,U,H,j,F=(l[10].inspector??"???")+"",B,oe,se,ye=l[10].submission_time+"",de,Se,ie,Ne,Te,be=l[10].scheme_reference+"",re,pe,ge,ve=l[10].current_design_stage+"",_e;return{c(){e=T("div"),n=T("h2"),r=k(t),o=O(),s=T("p"),u=T("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=O(),_=T("p"),m=T("u"),m.textContent="Notes",S=k(`
          : `),y=k(C),N=O(),D=T("hr"),I=O(),A=T("p"),L=k("Critical issue ID: "),P=T("b"),M=k(E),R=O(),U=T("p"),H=k("Submitted by "),j=T("b"),B=k(F),oe=k(`
          at
          `),se=T("b"),de=k(ye),Se=O(),ie=T("p"),Ne=k("For scheme "),Te=T("b"),re=k(be),pe=k(`
          in stage
          `),ge=T("b"),_e=k(ve),Ce(e,"max-width","30vw")},m(Ie,Fe){$(Ie,e,Fe),h(e,n),h(n,r),h(e,o),h(e,s),h(s,u),h(s,i),h(s,f),h(e,c),h(e,_),h(_,m),h(_,S),h(_,y),h(e,N),h(e,D),h(e,I),h(e,A),h(A,L),h(A,P),h(P,M),h(e,R),h(e,U),h(U,H),h(U,j),h(j,B),h(U,oe),h(U,se),h(se,de),h(e,Se),h(e,ie),h(ie,Ne),h(ie,Te),h(Te,re),h(ie,pe),h(ie,ge),h(ge,_e)},p(Ie,Fe){Fe&1024&&t!==(t=Ie[10].critical_type+"")&&z(r,t),Fe&1024&&a!==(a=Ie[10].location_description+"")&&z(f,a),Fe&1024&&C!==(C=Ie[10].notes+"")&&z(y,C),Fe&1024&&E!==(E=Ie[10].id+"")&&z(M,E),Fe&1024&&F!==(F=(Ie[10].inspector??"???")+"")&&z(B,F),Fe&1024&&ye!==(ye=Ie[10].submission_time+"")&&z(de,ye),Fe&1024&&be!==(be=Ie[10].scheme_reference+"")&&z(re,be),Fe&1024&&ve!==(ve=Ie[10].current_design_stage+"")&&z(_e,ve)},d(Ie){Ie&&p(e)}}}function yp(l){let e,n;return e=new fe({props:{$$slots:{default:[kp,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Sp(l){let e,n,t,r,o,s;const u=[q("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":Wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let m=0;m<u.length;m+=1)i=x(i,u[m]);e=new mt({props:i}),e.$on("click",l[6]);const a=[q("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let m=0;m<a.length;m+=1)f=x(f,a[m]);t=new pn({props:f});const c=[q("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Wt,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let _={$$slots:{default:[yp]},$$scope:{ctx:l}};for(let m=0;m<c.length;m+=1)_=x(_,c[m]);return o=new mt({props:_}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(m,S){v(e,m,S),$(m,n,S),v(t,m,S),$(m,r,S),v(o,m,S),s=!0},p(m,S){const C=S&2?ne(u,[u[0],u[1],S&0&&{paint:{"circle-color":Wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},S&2&&{layout:{visibility:m[1]?"visible":"none"}},u[4]]):{};e.$set(C);const y=S&2?ne(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:m[1]?"visible":"none"}}]):{};t.$set(y);const N=S&2?ne(c,[c[0],c[1],c[2],c[3],S&0&&{paint:{"circle-color":Wt,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},S&2&&{layout:{visibility:m[1]?"visible":"none"}}]):{};S&2048&&(N.$$scope={dirty:S,ctx:m}),o.$set(N)},i(m){s||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),s=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),s=!1},d(m){m&&(p(n),p(r)),w(e,m),w(t,m),w(o,m)}}}function Cp(l){let e,n,t,r;return e=new Re({props:{label:"Critical Issues",$$slots:{default:[wp]},$$scope:{ctx:l}}}),t=new St({props:{id:yo,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Sp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let yo="criticals",Wt="red";function Tp(l,e,n){let t;Ae(l,jn,m=>n(9,t=m));let r,o=!0,s=0,u="",i=yn();async function a(m){try{n(4,i=await Oa(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(S){n(3,u=`The file you loaded is broken: ${S}`)}}async function f(m){let S=await t.getSource(yo).getClusterExpansionZoom(m.detail.features[0].properties.cluster_id);t.easeTo({center:m.detail.features[0].geometry.coordinates,zoom:S})}function c(m){W[m?"unshift":"push"](()=>{r=m,n(0,r)})}function _(m){o=m,n(1,o)}return[r,o,s,u,i,a,f,c,_]}class Op extends Y{constructor(e){super(),K(this,e,Tp,Cp,J,{})}}function Lp(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ap(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ip(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Ap]},$$scope:{ctx:l}}}),s=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Np(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ip]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function fl(l){let e,n;return e=new zn({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Mp(l){let e,n=ul(l[3])+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=ul(r[3])+"")&&z(t,n)},d(r){r&&p(e)}}}function Pp(l){let e,n;return e=new fe({props:{$$slots:{default:[Mp,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Fp(l){let e,n;const t=[q(Vt),{sourceLayer:Vt},{paint:{"circle-color":pt(["get","crossing"],{traffic_signals:Z.signalized_crossing},Z.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Pp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new mt({props:r}),e.$on("click",Dp),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(q(Vt)),s&0&&{sourceLayer:Vt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Ep(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[Np],default:[Lp]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&fl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Vt}.pmtiles`,$$slots:{default:[Fp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=fl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&17&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Vt="crossings";function ul(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function Dp(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function jp(l,e,n){let t=!1,r=[["Signalized",Z.signalized_crossing],["Other",Z.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class Rp extends Y{constructor(e){super(),K(this,e,jp,Ep,J,{})}}function zp(l){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bp(l){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hp(l){let e,n,t,r,o,s,u,i,a,f,c,_,m;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Bp]},$$scope:{ctx:l}}}),f=new je({}),_=new et({}),{c(){e=T("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=O(),t=T("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=O(),o=T("p"),s=k("This layer is built from "),b(u.$$.fragment),i=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=O(),b(f.$$.fragment),c=O(),b(_.$$.fragment)},m(S,C){$(S,e,C),$(S,n,C),$(S,t,C),$(S,r,C),$(S,o,C),h(o,s),v(u,o,null),h(o,i),$(S,a,C),v(f,S,C),$(S,c,C),v(_,S,C),m=!0},p(S,C){const y={};C&32&&(y.$$scope={dirty:C,ctx:S}),u.$set(y)},i(S){m||(g(u.$$.fragment,S),g(f.$$.fragment,S),g(_.$$.fragment,S),m=!0)},o(S){d(u.$$.fragment,S),d(f.$$.fragment,S),d(_.$$.fragment,S),m=!1},d(S){S&&(p(e),p(n),p(t),p(r),p(o),p(a),p(c)),w(u),w(f,S),w(_,S)}}}function qp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Hp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function cl(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gp(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=T("p"),n=k("Gradient: "),t=T("b"),o=k(r),s=k(`
        %`)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,i){i&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&z(o,r)},d(u){u&&p(e)}}}function Up(l){let e,n;return e=new fe({props:{$$slots:{default:[Gp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Wp(l){let e,n,t,r;const o=[q(st),{sourceLayer:st},{manageHoverState:!0},{paint:{"line-color":Le(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[Up]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Oe({props:s});const u=[q(st+"_arrows"),{sourceLayer:st},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new pn({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&7?ne(o,[f&0&&ae(q(st)),f&0&&{sourceLayer:st},o[2],f&6&&{paint:{"line-color":Le(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":He,"line-opacity":Q(1,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?ne(u,[f&0&&ae(q(st+"_arrows")),f&0&&{sourceLayer:st},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Vp(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[qp],default:[zp]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&cl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${st}.pmtiles`,$$slots:{default:[Wp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=cl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let st="gradient";function Xp(l,e,n){let t=Z.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Jp extends Y{constructor(e){super(),K(this,e,Xp,Vp,J,{})}}function Yp(l){let e,n,t;return{c(){e=T("img"),t=k(`
  Cycle parking`),an(e.src,n=Io)||G(e,"src",n),G(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:te,d(r){r&&(p(e),p(t))}}}function Kp(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zp(l){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qp(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Kp]},$$scope:{ctx:l}}}),i=new ee({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Zp]},$$scope:{ctx:l}}}),f=new et({}),{c(){e=T("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),s=T("p"),u=k("Icon from "),b(i.$$.fragment),a=O(),b(f.$$.fragment)},m(_,m){$(_,e,m),h(e,n),v(t,e,null),h(e,r),$(_,o,m),$(_,s,m),h(s,u),v(i,s,null),$(_,a,m),v(f,_,m),c=!0},p(_,m){const S={};m&8&&(S.$$scope={dirty:m,ctx:_}),t.$set(S);const C={};m&8&&(C.$$scope={dirty:m,ctx:_}),i.$set(C)},i(_){c||(g(t.$$.fragment,_),g(i.$$.fragment,_),g(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(i.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(o),p(s),p(a)),w(t),w(i),w(f,_)}}}function xp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Qp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function em(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&z(o,r)},d(s){s&&p(e)}}}function tm(l){let e,n;return e=new fe({props:{$$slots:{default:[em,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function nm(l){let e,n;const t=[q(Xt),{sourceLayer:Xt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[tm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new pn({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(q(Xt)),s&0&&{sourceLayer:Xt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function rm(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[xp],default:[Yp]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Xt}.pmtiles`,$$slots:{default:[nm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Xt="cycle_parking";function lm(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class om extends Y{constructor(e){super(),K(this,e,lm,rm,J,{})}}function sm(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function im(l){let e,n,t,r;return t=new et({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:te,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function am(l){let e,n,t;return n=new me({props:{$$slots:{default:[im]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function $l(l){let e,n,t;return n=new xe({props:{$$slots:{default:[$m]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function fm(l){let e,n,t;return e=new Pe({props:{color:Z.education.schools}}),{c(){b(e.$$.fragment),n=k(`
        Schools`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function um(l){let e,n,t;return e=new Pe({props:{color:Z.education.colleges}}),{c(){b(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function cm(l){let e,n,t;return e=new Pe({props:{color:Z.education.universities}}),{c(){b(e.$$.fragment),n=k(`
        Universities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function $m(l){let e,n,t,r,o,s,u,i,a;function f(y){l[3](y)}let c={$$slots:{default:[fm]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),W.push(()=>V(e,"checked",f));function _(y){l[4](y)}let m={$$slots:{default:[um]},$$scope:{ctx:l}};l[1].college!==void 0&&(m.checked=l[1].college),r=new le({props:m}),W.push(()=>V(r,"checked",_));function S(y){l[5](y)}let C={$$slots:{default:[cm]},$$scope:{ctx:l}};return l[1].university!==void 0&&(C.checked=l[1].university),u=new le({props:C}),W.push(()=>V(u,"checked",S)),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment),s=O(),b(u.$$.fragment)},m(y,N){v(e,y,N),$(y,t,N),v(r,y,N),$(y,s,N),v(u,y,N),a=!0},p(y,N){const D={};N&128&&(D.$$scope={dirty:N,ctx:y}),!n&&N&2&&(n=!0,D.checked=y[1].school,X(()=>n=!1)),e.$set(D);const I={};N&128&&(I.$$scope={dirty:N,ctx:y}),!o&&N&2&&(o=!0,I.checked=y[1].college,X(()=>o=!1)),r.$set(I);const A={};N&128&&(A.$$scope={dirty:N,ctx:y}),!i&&N&2&&(i=!0,A.checked=y[1].university,X(()=>i=!1)),u.$set(A)},i(y){a||(g(e.$$.fragment,y),g(r.$$.fragment,y),g(u.$$.fragment,y),a=!0)},o(y){d(e.$$.fragment,y),d(r.$$.fragment,y),d(u.$$.fragment,y),a=!1},d(y){y&&(p(t),p(s)),w(e,y),w(r,y),w(u,y)}}}function pm(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&z(t,n)},d(r){r&&p(e)}}}function mm(l){let e,n;return e=new fe({props:{$$slots:{default:[pm,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _m(l){let e,n;const t=[q(Jt),{sourceLayer:Jt},{paint:{"fill-color":pt(["get","type"],{school:Z.education.schools,college:Z.education.colleges,university:Z.education.universities},"grey"),"fill-opacity":Q(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:pl(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[mm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(q(Jt)),s&0&&{sourceLayer:Jt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:pl(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function gm(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[am],default:[sm]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&$l(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Jt}.pmtiles`,$$slots:{default:[_m]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&128&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=$l(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&131&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Jt="education";function pl(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function dm(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class hm extends Y{constructor(e){super(),K(this,e,dm,gm,J,{})}}function bm(l){let e,n,t,r;return e=new Pe({props:{color:l[4]}}),{c(){b(e.$$.fragment),n=O(),t=k(l[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&z(t,o[2])},i(o){r||(g(e.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function vm(l){let e;const n=l[5].default,t=bt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&vt(t,n,r,r[7],e?kt(n,r[7],o,null):wt(r[7]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function wm(l){let e,n,t;return n=new me({props:{$$slots:{default:[vm]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function km(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&z(t,n)},d(r){r&&p(e)}}}function ym(l){let e,n;return e=new fe({props:{$$slots:{default:[km,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Sm(l){let e,n;const t=[q(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":Q(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[ym]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&25?ne(t,[s&1&&ae(q(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Q(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Cm(l){let e,n,t,r,o;function s(i){l[6](i)}let u={$$slots:{right:[wm],default:[bm]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${l[0]}.pmtiles`,$$slots:{default:[Sm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],X(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${he()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function Tm(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=Z[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class So extends Y{constructor(e){super(),K(this,e,Tm,Cm,J,{name:0,singularNoun:1,pluralNoun:2})}}function Om(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lm(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Om]},$$scope:{ctx:l}}}),s=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Am(l){let e,n;return e=new So({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Lm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Im extends Y{constructor(e){super(),K(this,e,null,Am,J,{})}}function Nm(l){let e,n,t;return{c(){e=T("img"),t=k(`
  Railway Stations`),an(e.src,n=No)||G(e,"src",n),G(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:te,d(r){r&&(p(e),p(t))}}}function Mm(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pm(l){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fm(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Mm]},$$scope:{ctx:l}}}),i=new ee({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Pm]},$$scope:{ctx:l}}}),c=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),s=T("p"),u=k("Icon from "),b(i.$$.fragment),a=k(". (Note that not all stations shown are National Rail.)"),f=O(),b(c.$$.fragment)},m(m,S){$(m,e,S),h(e,n),v(t,e,null),h(e,r),$(m,o,S),$(m,s,S),h(s,u),v(i,s,null),h(s,a),$(m,f,S),v(c,m,S),_=!0},p(m,S){const C={};S&8&&(C.$$scope={dirty:S,ctx:m}),t.$set(C);const y={};S&8&&(y.$$scope={dirty:S,ctx:m}),i.$set(y)},i(m){_||(g(t.$$.fragment,m),g(i.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(i.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(f)),w(t),w(i),w(c,m)}}}function Em(l){let e,n,t;return n=new me({props:{$$slots:{default:[Fm]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Dm(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&z(t,n)},d(r){r&&p(e)}}}function jm(l){let e,n;return e=new fe({props:{$$slots:{default:[Dm,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Rm(l){let e,n;const t=[q(En),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[jm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new pn({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(q(En)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function zm(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Em],default:[Nm]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new St({props:{data:`${he()}/v1/${En}.geojson`,$$slots:{default:[Rm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let En="railway_stations";function Bm(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Hm extends Y{constructor(e){super(),K(this,e,Bm,zm,J,{})}}function qm(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gm(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Um(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[qm]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Gm]},$$scope:{ctx:l}}}),i=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function Wm(l){let e,n;return e=new So({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Um]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Vm extends Y{constructor(e){super(),K(this,e,null,Wm,J,{})}}function Xm(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jm(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ym(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Km(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,S,C,y,N,D,I,A,L,P,E;return t=new ee({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Jm]},$$scope:{ctx:l}}}),N=new ee({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Ym]},$$scope:{ctx:l}}}),P=new je({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=O(),s=T("ul"),u=T("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=O(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=O(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,_=O(),m=T("li"),m.textContent='The "pedestrians" category also include mobility scooters',S=O(),C=T("li"),y=k("All limitations "),b(N.$$.fragment),D=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),I=O(),A=T("p"),A.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=O(),b(P.$$.fragment)},m(M,R){$(M,e,R),h(e,n),v(t,e,null),h(e,r),$(M,o,R),$(M,s,R),h(s,u),h(s,i),h(s,a),h(s,f),h(s,c),h(s,_),h(s,m),h(s,S),h(s,C),h(C,y),v(N,C,null),h(C,D),$(M,I,R),$(M,A,R),$(M,L,R),v(P,M,R),E=!0},p(M,R){const U={};R&16777216&&(U.$$scope={dirty:R,ctx:M}),t.$set(U);const H={};R&16777216&&(H.$$scope={dirty:R,ctx:M}),N.$set(H)},i(M){E||(g(t.$$.fragment,M),g(N.$$.fragment,M),g(P.$$.fragment,M),E=!0)},o(M){d(t.$$.fragment,M),d(N.$$.fragment,M),d(P.$$.fragment,M),E=!1},d(M){M&&(p(e),p(o),p(s),p(I),p(A),p(L)),w(t),w(N),w(P,M)}}}function Zm(l){let e,n,t;return n=new me({props:{$$slots:{default:[Km]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ml(l){let e,n,t,r,o,s,u,i,a,f,c,_,m;return n=new xe({props:{small:!0,$$slots:{default:[n_]},$$scope:{ctx:l}}}),f=new zn({props:{rows:l[14]}}),{c(){e=T("div"),b(n.$$.fragment),t=O(),r=T("div"),o=k(`Filter years:
      `),s=T("input"),u=k(`
      -
      `),i=T("input"),a=O(),b(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(S,C){$(S,e,C),v(n,e,null),h(e,t),h(e,r),h(r,o),h(r,s),Ye(s,l[4]),h(r,u),h(r,i),Ye(i,l[5]),h(e,a),v(f,e,null),c=!0,_||(m=[Ze(s,"input",l[20]),Ze(i,"input",l[21])],_=!0)},p(S,C){const y={};C&16777231&&(y.$$scope={dirty:C,ctx:S}),n.$set(y),C&16&&Qt(s.value)!==S[4]&&Ye(s,S[4]),C&32&&Qt(i.value)!==S[5]&&Ye(i,S[5])},i(S){c||(g(n.$$.fragment,S),g(f.$$.fragment,S),c=!0)},o(S){d(n.$$.fragment,S),d(f.$$.fragment,S),c=!1},d(S){S&&p(e),w(n),w(f),_=!1,to(m)}}}function Qm(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xm(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function e_(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function t_(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function n_(l){let e,n,t,r,o,s,u,i,a,f,c,_;function m(L){l[16](L)}let S={$$slots:{default:[Qm]},$$scope:{ctx:l}};l[0]!==void 0&&(S.checked=l[0]),e=new le({props:S}),W.push(()=>V(e,"checked",m));function C(L){l[17](L)}let y={$$slots:{default:[xm]},$$scope:{ctx:l}};l[1]!==void 0&&(y.checked=l[1]),r=new le({props:y}),W.push(()=>V(r,"checked",C));function N(L){l[18](L)}let D={$$slots:{default:[e_]},$$scope:{ctx:l}};l[2]!==void 0&&(D.checked=l[2]),u=new le({props:D}),W.push(()=>V(u,"checked",N));function I(L){l[19](L)}let A={$$slots:{default:[t_]},$$scope:{ctx:l}};return l[3]!==void 0&&(A.checked=l[3]),f=new le({props:A}),W.push(()=>V(f,"checked",I)),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment),s=O(),b(u.$$.fragment),a=O(),b(f.$$.fragment)},m(L,P){v(e,L,P),$(L,t,P),v(r,L,P),$(L,s,P),v(u,L,P),$(L,a,P),v(f,L,P),_=!0},p(L,P){const E={};P&16777216&&(E.$$scope={dirty:P,ctx:L}),!n&&P&1&&(n=!0,E.checked=L[0],X(()=>n=!1)),e.$set(E);const M={};P&16777216&&(M.$$scope={dirty:P,ctx:L}),!o&&P&2&&(o=!0,M.checked=L[1],X(()=>o=!1)),r.$set(M);const R={};P&16777216&&(R.$$scope={dirty:P,ctx:L}),!i&&P&4&&(i=!0,R.checked=L[2],X(()=>i=!1)),u.$set(R);const U={};P&16777216&&(U.$$scope={dirty:P,ctx:L}),!c&&P&8&&(c=!0,U.checked=L[3],X(()=>c=!1)),f.$set(U)},i(L){_||(g(e.$$.fragment,L),g(r.$$.fragment,L),g(u.$$.fragment,L),g(f.$$.fragment,L),_=!0)},o(L){d(e.$$.fragment,L),d(r.$$.fragment,L),d(u.$$.fragment,L),d(f.$$.fragment,L),_=!1},d(L){L&&(p(t),p(s),p(a)),w(e,L),w(r,L),w(u,L),w(f,L)}}}function _l(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&z(o,r)},d(s){s&&p(e)}}}function gl(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&z(o,r)},d(s){s&&p(e)}}}function r_(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,_,m,S,C,y=dl(l[23])+"",N,D,I,A,L,P=l[23].pedestrian_location&&_l(l),E=l[23].pedestrian_movement&&gl(l);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(r),s=O(),u=T("p"),i=k("Severity: "),a=T("b"),c=k(f),_=O(),m=T("p"),S=k("Casualties: "),C=T("b"),N=k(y),D=O(),P&&P.c(),I=O(),E&&E.c(),A=O(),L=T("p"),L.textContent="Click to open full report in CycleStreets"},m(M,R){$(M,e,R),h(e,n),h(e,t),h(t,o),$(M,s,R),$(M,u,R),h(u,i),h(u,a),h(a,c),$(M,_,R),$(M,m,R),h(m,S),h(m,C),h(C,N),$(M,D,R),P&&P.m(M,R),$(M,I,R),E&&E.m(M,R),$(M,A,R),$(M,L,R)},p(M,R){R&8388608&&r!==(r=M[23].year+"")&&z(o,r),R&8388608&&f!==(f=M[10][M[23].severity]+"")&&z(c,f),R&8388608&&y!==(y=dl(M[23])+"")&&z(N,y),M[23].pedestrian_location?P?P.p(M,R):(P=_l(M),P.c(),P.m(I.parentNode,I)):P&&(P.d(1),P=null),M[23].pedestrian_movement?E?E.p(M,R):(E=gl(M),E.c(),E.m(A.parentNode,A)):E&&(E.d(1),E=null)},d(M){M&&(p(e),p(s),p(u),p(_),p(m),p(D),p(I),p(A),p(L)),P&&P.d(M),E&&E.d(M)}}}function l_(l){let e,n;return e=new fe({props:{$$slots:{default:[r_,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function o_(l){let e,n;const t=[q(Yt),{sourceLayer:Yt},{paint:{"circle-color":Le(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[l_]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new mt({props:r}),e.$on("click",i_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&14528?ne(t,[s&0&&ae(q(Yt)),s&0&&{sourceLayer:Yt},s&14336&&{paint:{"circle-color":Le(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function s_(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={$$slots:{right:[Zm],default:[Xm]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[6]&&ml(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Yt}.pmtiles`,$$slots:{default:[o_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16777216&&(_.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,_.checked=f[6],X(()=>n=!1)),e.$set(_),f[6]?a?(a.p(f,c),c&64&&g(a,1)):(a=ml(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&16777408&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Yt="stats19";function dl(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function i_(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function a_(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(U,H,j,F,B,oe){let se=["any"];return o&&se.push(["get","pedestrian"]),s&&se.push(["get","cyclist"]),u&&se.push(["get","horse_rider"]),i&&se.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],se]}let _={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},m={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},S={1:"Fatal",2:"Serious",3:"Slight"},C=Z.sequential_low_to_high[4],y=Z.sequential_low_to_high[2],N=Z.sequential_low_to_high[0],D=[["Fatal",C],["Serious",y],["Slight",N]];function I(U){r=U,n(6,r)}function A(U){o=U,n(0,o)}function L(U){s=U,n(1,s)}function P(U){u=U,n(2,u)}function E(U){i=U,n(3,i)}function M(){a=Qt(this.value),n(4,a)}function R(){f=Qt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,_,m,S,C,y,N,D,I,A,L,P,E,M,R]}class f_ extends Y{constructor(e){super(),K(this,e,a_,s_,J,{})}}function u_(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function c_(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $_(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function p_(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new ee({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[c_]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[$_]},$$scope:{ctx:l}}}),f=new je({}),{c(){e=T("p"),n=k("AADF (annual average daily flow) data from "),b(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=O(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=O(),b(f.$$.fragment)},m(_,m){$(_,e,m),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(_,u,m),$(_,i,m),$(_,a,m),v(f,_,m),c=!0},p(_,m){const S={};m&64&&(S.$$scope={dirty:m,ctx:_}),t.$set(S);const C={};m&64&&(C.$$scope={dirty:m,ctx:_}),o.$set(C)},i(_){c||(g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(u),p(i),p(a)),w(t),w(o),w(f,_)}}}function m_(l){let e,n,t;return n=new me({props:{$$slots:{default:[p_]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function hl(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[3]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function __(l){let e,n=l[5].location+"",t,r,o,s,u=l[5].year+"",i,a,f,c=l[5].motor_vehicles.toLocaleString()+"",_,m,S,C,y=l[5].year+"",N,D,I,A=l[5].pedal_cycles.toLocaleString()+"",L,P,E,M,R,U=l[5].method+"",H;return{c(){e=T("h2"),t=k(n),r=O(),o=T("p"),s=k("Total motor vehicles ("),i=k(u),a=k(` AADF):
        `),f=T("b"),_=k(c),m=O(),S=T("p"),C=k("Total pedal cycles ("),N=k(y),D=k(` AADF):
        `),I=T("b"),L=k(A),P=O(),E=T("p"),M=k("Count method: "),R=T("b"),H=k(U)},m(j,F){$(j,e,F),h(e,t),$(j,r,F),$(j,o,F),h(o,s),h(o,i),h(o,a),h(o,f),h(f,_),$(j,m,F),$(j,S,F),h(S,C),h(S,N),h(S,D),h(S,I),h(I,L),$(j,P,F),$(j,E,F),h(E,M),h(E,R),h(R,H)},p(j,F){F&32&&n!==(n=j[5].location+"")&&z(t,n),F&32&&u!==(u=j[5].year+"")&&z(i,u),F&32&&c!==(c=j[5].motor_vehicles.toLocaleString()+"")&&z(_,c),F&32&&y!==(y=j[5].year+"")&&z(N,y),F&32&&A!==(A=j[5].pedal_cycles.toLocaleString()+"")&&z(L,A),F&32&&U!==(U=j[5].method+"")&&z(H,U)},d(j){j&&(p(e),p(r),p(o),p(m),p(S),p(P),p(E))}}}function g_(l){let e,n;return e=new fe({props:{$$slots:{default:[__,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function d_(l){let e,n;const t=[q(Kt),{sourceLayer:Kt},{paint:{"circle-color":Le(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[g_]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new mt({props:r}),e.$on("click",b_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(q(Kt)),s&0&&{sourceLayer:Kt},s&6&&{paint:{"circle-color":Le(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function h_(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={$$slots:{right:[m_],default:[u_]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&hl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Kt}.pmtiles`,$$slots:{default:[d_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=hl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&65&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Kt="vehicle_counts";function b_(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function v_(l,e,n){let t=Z.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class w_ extends Y{constructor(e){super(),K(this,e,v_,h_,J,{})}}function k_(l){let e,n,t,r,o,s,u,i;return e=new hm({}),t=new Im({}),o=new Vm({}),u=new Hm({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),$(a,r,f),v(o,a,f),$(a,s,f),v(u,a,f),i=!0},i(a){i||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),w(e,a),w(t,a),w(o,a),w(u,a)}}}function y_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[k_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function S_(l){let e,n,t,r,o,s,u,i,a,f,c,_;return e=new Ac({}),t=new o$({}),o=new zc({}),u=new Yc({}),a=new om({}),c=new Rp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(a.$$.fragment),f=O(),b(c.$$.fragment)},m(m,S){v(e,m,S),$(m,n,S),v(t,m,S),$(m,r,S),v(o,m,S),$(m,s,S),v(u,m,S),$(m,i,S),v(a,m,S),$(m,f,S),v(c,m,S),_=!0},i(m){_||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),g(u.$$.fragment,m),g(a.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),d(a.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(n),p(r),p(s),p(i),p(f)),w(e,m),w(t,m),w(o,m),w(u,m),w(a,m),w(c,m)}}}function C_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[S_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function T_(l){let e,n,t,r,o,s;return e=new gc({}),t=new ip({}),o=new dp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(u,i){v(e,u,i),$(u,n,i),v(t,u,i),$(u,r,i),v(o,u,i),s=!0},i(u){s||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function O_(l){let e,n,t,r,o,s,u,i,a,f;return e=new Ou({}),t=new nc({}),o=new Ff({}),u=new nu({}),a=new gu({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(a.$$.fragment)},m(c,_){v(e,c,_),$(c,n,_),v(t,c,_),$(c,r,_),v(o,c,_),$(c,s,_),v(u,c,_),$(c,i,_),v(a,c,_),f=!0},i(c){f||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(u,c),w(a,c)}}}function L_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[O_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function A_(l){let e,n,t,r;return e=new yf({}),t=new Wf({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function I_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[A_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function N_(l){let e,n,t,r,o,s;return e=new x$({}),t=new h$({}),o=new G$({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(u,i){v(e,u,i),$(u,n,i),v(t,u,i),$(u,r,i),v(o,u,i),s=!0},i(u){s||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function M_(l){let e,n,t,r,o,s,u,i,a=Tn()=="Private (development)",f,c,_,m,S;e=new w_({}),t=new f_({}),o=new M$({}),u=new Jp({});let C=a&&N_();return c=new Eu({}),m=new Wu({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),C&&C.c(),f=O(),b(c.$$.fragment),_=O(),b(m.$$.fragment)},m(y,N){v(e,y,N),$(y,n,N),v(t,y,N),$(y,r,N),v(o,y,N),$(y,s,N),v(u,y,N),$(y,i,N),C&&C.m(y,N),$(y,f,N),v(c,y,N),$(y,_,N),v(m,y,N),S=!0},p:te,i(y){S||(g(e.$$.fragment,y),g(t.$$.fragment,y),g(o.$$.fragment,y),g(u.$$.fragment,y),g(C),g(c.$$.fragment,y),g(m.$$.fragment,y),S=!0)},o(y){d(e.$$.fragment,y),d(t.$$.fragment,y),d(o.$$.fragment,y),d(u.$$.fragment,y),d(C),d(c.$$.fragment,y),d(m.$$.fragment,y),S=!1},d(y){y&&(p(n),p(r),p(s),p(i),p(f),p(_)),w(e,y),w(t,y),w(o,y),w(u,y),C&&C.d(y),w(c,y),w(m,y)}}}function P_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[M_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function F_(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new Uo({props:u}),W.push(()=>V(e,"enabled",s)),r=new Ss({}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],X(()=>n=!1)),e.$set(f)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function E_(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,S,C,y,N,D;return e=new Op({}),t=new Re({props:{label:"Trip generators",$$slots:{default:[y_]},$$scope:{ctx:l}}}),o=new Re({props:{label:"Existing infrastructure",$$slots:{default:[C_]},$$scope:{ctx:l}}}),u=new Re({props:{label:"Public transit",$$slots:{default:[T_]},$$scope:{ctx:l}}}),a=new Re({props:{label:"Boundaries",$$slots:{default:[L_]},$$scope:{ctx:l}}}),c=new Re({props:{label:"Census",$$slots:{default:[I_]},$$scope:{ctx:l}}}),m=new Re({props:{label:"Other",$$slots:{default:[P_]},$$scope:{ctx:l}}}),C=new Re({props:{label:"Tools",$$slots:{default:[F_]},$$scope:{ctx:l}}}),N=new Go({props:{disabled:!l[1]}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(a.$$.fragment),f=O(),b(c.$$.fragment),_=O(),b(m.$$.fragment),S=O(),b(C.$$.fragment),y=O(),b(N.$$.fragment)},m(I,A){v(e,I,A),$(I,n,A),v(t,I,A),$(I,r,A),v(o,I,A),$(I,s,A),v(u,I,A),$(I,i,A),v(a,I,A),$(I,f,A),v(c,I,A),$(I,_,A),v(m,I,A),$(I,S,A),v(C,I,A),$(I,y,A),v(N,I,A),D=!0},p(I,A){const L={};A&16&&(L.$$scope={dirty:A,ctx:I}),t.$set(L);const P={};A&16&&(P.$$scope={dirty:A,ctx:I}),o.$set(P);const E={};A&16&&(E.$$scope={dirty:A,ctx:I}),u.$set(E);const M={};A&16&&(M.$$scope={dirty:A,ctx:I}),a.$set(M);const R={};A&16&&(R.$$scope={dirty:A,ctx:I}),c.$set(R);const U={};A&16&&(U.$$scope={dirty:A,ctx:I}),m.$set(U);const H={};A&17&&(H.$$scope={dirty:A,ctx:I}),C.$set(H);const j={};A&2&&(j.disabled=!I[1]),N.$set(j)},i(I){D||(g(e.$$.fragment,I),g(t.$$.fragment,I),g(o.$$.fragment,I),g(u.$$.fragment,I),g(a.$$.fragment,I),g(c.$$.fragment,I),g(m.$$.fragment,I),g(C.$$.fragment,I),g(N.$$.fragment,I),D=!0)},o(I){d(e.$$.fragment,I),d(t.$$.fragment,I),d(o.$$.fragment,I),d(u.$$.fragment,I),d(a.$$.fragment,I),d(c.$$.fragment,I),d(m.$$.fragment,I),d(C.$$.fragment,I),d(N.$$.fragment,I),D=!1},d(I){I&&(p(n),p(r),p(s),p(i),p(f),p(_),p(S),p(y)),w(e,I),w(t,I),w(o,I),w(u,I),w(a,I),w(c,I),w(m,I),w(C,I),w(N,I)}}}function D_(l){let e,n;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&2?ne(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function j_(l){let e,n,t,r;return e=new Re({props:{label:"Layers",open:!0,$$slots:{default:[E_]},$$scope:{ctx:l}}}),t=new St({props:{data:l[2],$$slots:{default:[D_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function R_(l,e,n){let t,r;Ae(l,Or,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&Or.set(!t)},[t,r,o,s]}class z_ extends Y{constructor(e){super(),K(this,e,R_,j_,J,{})}}function bl(l){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function B_(l){let e,n=l[0]&&bl();return{c(){n&&n.c(),e=Me()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=bl(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:te,o:te,d(t){t&&p(e),n&&n.d(t)}}}function H_(l,e,n){let{loadFile:t}=e,r=!0;return Rn(async()=>{let s=await(await fetch(`${$n()}/v1/all_schemes_output.geojson.gz`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class q_ extends Y{constructor(e){super(),K(this,e,H_,B_,J,{loadFile:1})}}function vl(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),h(e,n),h(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function G_(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function U_(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function W_(l){let e,n,t,r;return e=new $t({props:{$$slots:{default:[G_]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new $t({props:{$$slots:{default:[U_]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function V_(l){var R,U,H,j;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((R=l[0].browse)==null?void 0:R.authority_or_region)+"",a,f,c,_,m=((U=l[0].browse)==null?void 0:U.capital_scheme_id)+"",S,C,y,N,D=((H=l[0].browse)==null?void 0:H.funding_programme)+"",I,A,L,P,E,M=((j=l[0].browse)==null?void 0:j.current_milestone)&&vl(l);return P=new Wo({props:{$$slots:{default:[W_]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Scheme reference: "),r=k(t),o=O(),s=T("p"),u=k("Authority or region: "),a=k(i),f=O(),c=T("p"),_=k("Capital scheme ID: "),S=k(m),C=O(),y=T("p"),N=k("Funding programme: "),I=k(D),A=O(),M&&M.c(),L=O(),b(P.$$.fragment)},m(F,B){$(F,e,B),h(e,n),h(e,r),$(F,o,B),$(F,s,B),h(s,u),h(s,a),$(F,f,B),$(F,c,B),h(c,_),h(c,S),$(F,C,B),$(F,y,B),h(y,N),h(y,I),$(F,A,B),M&&M.m(F,B),$(F,L,B),v(P,F,B),E=!0},p(F,B){var se,ye,de,Se;(!E||B&1)&&t!==(t=F[0].scheme_reference+"")&&z(r,t),(!E||B&1)&&i!==(i=((se=F[0].browse)==null?void 0:se.authority_or_region)+"")&&z(a,i),(!E||B&1)&&m!==(m=((ye=F[0].browse)==null?void 0:ye.capital_scheme_id)+"")&&z(S,m),(!E||B&1)&&D!==(D=((de=F[0].browse)==null?void 0:de.funding_programme)+"")&&z(I,D),(Se=F[0].browse)!=null&&Se.current_milestone?M?M.p(F,B):(M=vl(F),M.c(),M.m(L.parentNode,L)):M&&(M.d(1),M=null);const oe={};B&32&&(oe.$$scope={dirty:B,ctx:F}),P.$set(oe)},i(F){E||(g(P.$$.fragment,F),E=!0)},o(F){d(P.$$.fragment,F),E=!1},d(F){F&&(p(e),p(o),p(s),p(f),p(c),p(C),p(y),p(A),p(L)),M&&M.d(F),w(P,F)}}}function X_(l){let e,n;return e=new Re({props:{label:`${l[0].scheme_name}`,$$slots:{default:[V_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function J_(l,e,n){let t,r;Ae(l,Ot,i=>n(3,t=i)),Ae(l,jn,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Mo(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";Po(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class Y_ extends Y{constructor(e){super(),K(this,e,J_,X_,J,{scheme:0})}}function wl(l){let e,n,t,r=l[0].status+"",o;return{c(){e=T("p"),n=k("Status: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].status+"")&&z(o,r)},d(s){s&&p(e)}}}function kl(l){let e,n,t,r=l[0].timescale+"",o;return{c(){e=T("p"),n=k("Timescale: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale+"")&&z(o,r)},d(s){s&&p(e)}}}function yl(l){let e,n,t,r=l[0].timescale_year+"",o;return{c(){e=T("p"),n=k("Estimated completion year: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale_year+"")&&z(o,r)},d(s){s&&p(e)}}}function Sl(l){let e,n,t,r=l[0].year_published+"",o;return{c(){e=T("p"),n=k("Scheme most recently published: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_published+"")&&z(o,r)},d(s){s&&p(e)}}}function Cl(l){let e,n,t,r=l[0].year_consulted+"",o;return{c(){e=T("p"),n=k("Scheme most recently consulted on: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_consulted+"")&&z(o,r)},d(s){s&&p(e)}}}function K_(l){let e,n,t,r,o,s=l[0].status&&wl(l),u=l[0].timescale&&kl(l),i=l[0].timescale_year&&yl(l),a=l[0].year_published&&Sl(l),f=l[0].year_consulted&&Cl(l);return{c(){s&&s.c(),e=O(),u&&u.c(),n=O(),i&&i.c(),t=O(),a&&a.c(),r=O(),f&&f.c(),o=Me()},m(c,_){s&&s.m(c,_),$(c,e,_),u&&u.m(c,_),$(c,n,_),i&&i.m(c,_),$(c,t,_),a&&a.m(c,_),$(c,r,_),f&&f.m(c,_),$(c,o,_)},p(c,[_]){c[0].status?s?s.p(c,_):(s=wl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?u?u.p(c,_):(u=kl(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),c[0].timescale_year?i?i.p(c,_):(i=yl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,_):(a=Sl(c),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null),c[0].year_consulted?f?f.p(c,_):(f=Cl(c),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i:te,o:te,d(c){c&&(p(e),p(n),p(t),p(r),p(o)),s&&s.d(c),u&&u.d(c),i&&i.d(c),a&&a.d(c),f&&f.d(c)}}}function Z_(l,e,n){let{props:t}=e;return l.$$set=r=>{"props"in r&&n(0,t=r.props)},[t]}class Co extends Y{constructor(e){super(),K(this,e,Z_,K_,J,{props:0})}}function Tl(l){let e,n,t,r=l[0].budget.toLocaleString()+"",o,s;return{c(){e=T("p"),n=k("Cost: "),t=T("b"),o=k(r),s=k(`
    GBP`)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,i){i&1&&r!==(r=u[0].budget.toLocaleString()+"")&&z(o,r)},d(u){u&&p(e)}}}function Ol(l){let e;return{c(){e=T("p"),e.textContent="Development is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ll(l){let e;return{c(){e=T("p"),e.textContent="Construction is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Al(l){let e,n,t,r;return{c(){e=T("p"),n=k("Funding sources: "),t=T("b"),r=k(l[1])},m(o,s){$(o,e,s),h(e,n),h(e,t),h(t,r)},p(o,s){s&2&&z(r,o[1])},d(o){o&&p(e)}}}function Q_(l){let e,n,t,r,o=l[0].budget&&Tl(l),s=l[0].development_funded&&Ol(),u=l[0].construction_funded&&Ll(),i=l[1]&&Al(l);return{c(){o&&o.c(),e=O(),s&&s.c(),n=O(),u&&u.c(),t=O(),i&&i.c(),r=Me()},m(a,f){o&&o.m(a,f),$(a,e,f),s&&s.m(a,f),$(a,n,f),u&&u.m(a,f),$(a,t,f),i&&i.m(a,f),$(a,r,f)},p(a,[f]){a[0].budget?o?o.p(a,f):(o=Tl(a),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),a[0].development_funded?s||(s=Ol(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),a[0].construction_funded?u||(u=Ll(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),a[1]?i?i.p(a,f):(i=Al(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i:te,o:te,d(a){a&&(p(e),p(n),p(t),p(r)),o&&o.d(a),s&&s.d(a),u&&u.d(a),i&&i.d(a)}}}function x_(l){if(!l.funding_sources)return"";let e=[];for(let n of["atf2","atf3","atf4","atf4e","crsts","luf"])l.funding_sources[n]&&e.push(n.toUpperCase());return l.funding_sources.other&&e.push(l.funding_sources.other),e.join(", ")}function eg(l,e,n){let t,{props:r}=e;return l.$$set=o=>{"props"in o&&n(0,r=o.props)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=x_(r))},[r,t]}class To extends Y{constructor(e){super(),K(this,e,eg,Q_,J,{props:0})}}function wn(l){const e=l.slice(),n=e[1].pipeline;return e[5]=n,e}function kn(l){const e=l.slice(),n=e[0].pipeline;return e[5]=n,e}function Il(l){let e,n,t,r=Jn(l[0].length_meters)+"",o;return{c(){e=T("p"),n=k("Length: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=Jn(s[0].length_meters)+"")&&z(o,r)},d(s){s&&p(e)}}}function Nl(l){let e,n=ft(l[0].description,l[2])+"";return{c(){e=T("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=ft(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Ml(l){let e,n,t,r,o,s,u,i=l[5].atf4_type&&Pl(l),a=l[5].accuracy&&Fl(l),f=l[5].is_alternative&&El();return r=new To({props:{props:l[5]}}),s=new Co({props:{props:l[5]}}),{c(){i&&i.c(),e=O(),a&&a.c(),n=O(),f&&f.c(),t=O(),b(r.$$.fragment),o=O(),b(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),v(r,c,_),$(c,o,_),v(s,c,_),u=!0},p(c,_){c[5].atf4_type?i?i.p(c,_):(i=Pl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].accuracy?a?a.p(c,_):(a=Fl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].is_alternative?f||(f=El(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const m={};_&1&&(m.props=c[5]),r.$set(m);const S={};_&1&&(S.props=c[5]),s.$set(S)},i(c){u||(g(r.$$.fragment,c),g(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function Pl(l){let e,n,t,r=l[5].atf4_type+"",o;return{c(){e=T("p"),n=k("ATF4 type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].atf4_type+"")&&z(o,r)},d(s){s&&p(e)}}}function Fl(l){let e,n,t,r=l[5].accuracy+"",o;return{c(){e=T("p"),n=k("Accuracy: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].accuracy+"")&&z(o,r)},d(s){s&&p(e)}}}function El(l){let e;return{c(){e=T("p"),e.textContent="Represents an alternative route"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Dl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.capital_scheme_id)+"",o;return{c(){e=T("p"),n=k("Capital scheme ID: "),t=T("b"),o=k(r)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o)},p(u,i){var a;i&2&&r!==(r=((a=u[1].browse)==null?void 0:a.capital_scheme_id)+"")&&z(o,r)},d(u){u&&p(e)}}}function jl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.current_milestone)+"",o;return{c(){e=T("p"),n=k("Current milestone: "),t=T("b"),o=k(r)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o)},p(u,i){var a;i&2&&r!==(r=((a=u[1].browse)==null?void 0:a.current_milestone)+"")&&z(o,r)},d(u){u&&p(e)}}}function Rl(l){let e,n,t,r,o,s,u,i=l[5].scheme_type&&zl(l),a=l[5].atf4_lead_type&&Bl(l),f=l[5].scheme_description&&Hl(l);return r=new To({props:{props:l[5]}}),s=new Co({props:{props:l[5]}}),{c(){i&&i.c(),e=O(),a&&a.c(),n=O(),f&&f.c(),t=O(),b(r.$$.fragment),o=O(),b(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),v(r,c,_),$(c,o,_),v(s,c,_),u=!0},p(c,_){c[5].scheme_type?i?i.p(c,_):(i=zl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].atf4_lead_type?a?a.p(c,_):(a=Bl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].scheme_description?f?f.p(c,_):(f=Hl(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const m={};_&2&&(m.props=c[5]),r.$set(m);const S={};_&2&&(S.props=c[5]),s.$set(S)},i(c){u||(g(r.$$.fragment,c),g(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function zl(l){let e,n,t,r=l[5].scheme_type+"",o;return{c(){e=T("p"),n=k("Scheme type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].scheme_type+"")&&z(o,r)},d(s){s&&p(e)}}}function Bl(l){let e,n,t,r=l[5].atf4_lead_type+"",o;return{c(){e=T("p"),n=k("ATF4 lead type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].atf4_lead_type+"")&&z(o,r)},d(s){s&&p(e)}}}function Hl(l){let e,n,t=l[5].scheme_description+"",r;return{c(){e=T("p"),n=k("Descripton: "),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,r)},p(o,s){s&2&&t!==(t=o[5].scheme_description+"")&&z(r,t)},d(o){o&&p(e)}}}function tg(l){var Ie,Fe,Lt,Xe;let e,n,t,r=ft(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,_,m,S,C,y,N,D=ft(l[1].scheme_name??"",l[3])+"",I,A,L=ft(l[0].scheme_reference,l[3])+"",P,E,M,R,U,H=((Ie=l[1].browse)==null?void 0:Ie.authority_or_region)+"",j,F,B,oe,se,ye,de=((Fe=l[1].browse)==null?void 0:Fe.funding_programme)+"",Se,ie,Ne,Te,be=l[0].length_meters&&Il(l),re=l[0].description&&Nl(l),pe=l[0].pipeline&&Ml(kn(l)),ge=((Lt=l[1].browse)==null?void 0:Lt.capital_scheme_id)&&Dl(l),ve=((Xe=l[1].browse)==null?void 0:Xe.current_milestone)&&jl(l),_e=l[1].pipeline&&Rl(wn(l));return{c(){e=T("div"),n=T("h2"),t=new ht(!1),o=k(" ("),u=k(s),i=k(")"),a=O(),be&&be.c(),f=O(),re&&re.c(),c=O(),pe&&pe.c(),_=O(),m=T("hr"),S=O(),C=T("p"),y=k("Part of scheme: "),N=new ht(!1),I=k(" ("),A=new ht(!1),P=k(")"),E=O(),M=T("p"),R=k("Authority or region: "),U=T("b"),j=k(H),F=O(),ge&&ge.c(),B=O(),oe=T("p"),se=k("Funding programme: "),ye=T("b"),Se=k(de),ie=O(),ve&&ve.c(),Ne=O(),_e&&_e.c(),t.a=o,N.a=I,A.a=P,Ce(e,"max-width","30vw"),Ce(e,"max-height","60vh"),Ce(e,"overflow","auto")},m(ue,Ee){$(ue,e,Ee),h(e,n),t.m(r,n),h(n,o),h(n,u),h(n,i),h(e,a),be&&be.m(e,null),h(e,f),re&&re.m(e,null),h(e,c),pe&&pe.m(e,null),h(e,_),h(e,m),h(e,S),h(e,C),h(C,y),N.m(D,C),h(C,I),A.m(L,C),h(C,P),h(e,E),h(e,M),h(M,R),h(M,U),h(U,j),h(e,F),ge&&ge.m(e,null),h(e,B),h(e,oe),h(oe,se),h(oe,ye),h(ye,Se),h(e,ie),ve&&ve.m(e,null),h(e,Ne),_e&&_e.m(e,null),Te=!0},p(ue,[Ee]){var qn,Gn,Un,Wn;(!Te||Ee&5)&&r!==(r=ft(ue[0].name,ue[2])+"")&&t.p(r),(!Te||Ee&1)&&s!==(s=ue[0].intervention_type+"")&&z(u,s),ue[0].length_meters?be?be.p(ue,Ee):(be=Il(ue),be.c(),be.m(e,f)):be&&(be.d(1),be=null),ue[0].description?re?re.p(ue,Ee):(re=Nl(ue),re.c(),re.m(e,c)):re&&(re.d(1),re=null),ue[0].pipeline?pe?(pe.p(kn(ue),Ee),Ee&1&&g(pe,1)):(pe=Ml(kn(ue)),pe.c(),g(pe,1),pe.m(e,_)):pe&&(ce(),d(pe,1,1,()=>{pe=null}),$e()),(!Te||Ee&10)&&D!==(D=ft(ue[1].scheme_name??"",ue[3])+"")&&N.p(D),(!Te||Ee&9)&&L!==(L=ft(ue[0].scheme_reference,ue[3])+"")&&A.p(L),(!Te||Ee&2)&&H!==(H=((qn=ue[1].browse)==null?void 0:qn.authority_or_region)+"")&&z(j,H),(Gn=ue[1].browse)!=null&&Gn.capital_scheme_id?ge?ge.p(ue,Ee):(ge=Dl(ue),ge.c(),ge.m(e,B)):ge&&(ge.d(1),ge=null),(!Te||Ee&2)&&de!==(de=((Un=ue[1].browse)==null?void 0:Un.funding_programme)+"")&&z(Se,de),(Wn=ue[1].browse)!=null&&Wn.current_milestone?ve?ve.p(ue,Ee):(ve=jl(ue),ve.c(),ve.m(e,Ne)):ve&&(ve.d(1),ve=null),ue[1].pipeline?_e?(_e.p(wn(ue),Ee),Ee&2&&g(_e,1)):(_e=Rl(wn(ue)),_e.c(),g(_e,1),_e.m(e,null)):_e&&(ce(),d(_e,1,1,()=>{_e=null}),$e())},i(ue){Te||(g(pe),g(_e),Te=!0)},o(ue){d(pe),d(_e),Te=!1},d(ue){ue&&p(e),be&&be.d(),re&&re.d(),pe&&pe.d(),ge&&ge.d(),ve&&ve.d(),_e&&_e.d()}}}function ft(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function ng(l,e,n){let t,r,o,s;Ae(l,un,i=>n(4,r=i)),Ae(l,It,i=>n(2,o=i)),Ae(l,Nt,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class Hn extends Y{constructor(e){super(),K(this,e,ng,tg,J,{props:0})}}function rg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function lg(l){let e,n;return e=new Hn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function og(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[rg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[lg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function sg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function ig(l){let e,n;return e=new Hn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ag(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[sg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[ig,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function fg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function ug(l){let e,n;return e=new Hn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cg(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[fg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[ug,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function $g(l){let e,n,t,r,o,s,u,i,a,f;const c=[q("interventions-points"),{filter:["all",Yn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":Qn,"circle-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let _={$$slots:{default:[og]},$$scope:{ctx:l}};for(let L=0;L<c.length;L+=1)_=x(_,c[L]);e=new mt({props:_});const m=[q("interventions-lines"),{filter:["all",Kn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":At,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let S={$$slots:{default:[ag]},$$scope:{ctx:l}};for(let L=0;L<m.length;L+=1)S=x(S,m[L]);t=new Oe({props:S});const C=[q("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*At,"circle-opacity":0,"circle-stroke-color":Ke.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let y={};for(let L=0;L<C.length;L+=1)y=x(y,C[L]);o=new mt({props:y});const N=[q("interventions-polygons"),{filter:["all",ln,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":Q(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[cg]},$$scope:{ctx:l}};for(let L=0;L<N.length;L+=1)D=x(D,N[L]);u=new qe({props:D});const I=[q("interventions-polygons-outlines"),{filter:["all",ln,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*At}},{layout:{visibility:l[0]?"visible":"none"}}];let A={};for(let L=0;L<I.length;L+=1)A=x(A,I[L]);return a=new Oe({props:A}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(a.$$.fragment)},m(L,P){v(e,L,P),$(L,n,P),v(t,L,P),$(L,r,P),v(o,L,P),$(L,s,P),v(u,L,P),$(L,i,P),v(a,L,P),f=!0},p(L,P){const E=P&29?ne(c,[c[0],P&24&&{filter:["all",Yn,L[3],L[4]]},c[2],c[3],P&4&&{paint:{"circle-color":L[2],"circle-radius":Qn,"circle-opacity":Q(1,.5)}},P&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};P&128&&(E.$$scope={dirty:P,ctx:L}),e.$set(E);const M=P&13?ne(m,[m[0],P&8&&{filter:["all",Kn,L[3]]},m[2],m[3],P&4&&{paint:{"line-color":L[2],"line-width":At,"line-opacity":Q(1,.5)}},P&1&&{layout:{visibility:L[0]?"visible":"none"}},m[6]]):{};P&128&&(M.$$scope={dirty:P,ctx:L}),t.$set(M);const R=P&1?ne(C,[C[0],C[1],C[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(R);const U=P&13?ne(N,[N[0],P&8&&{filter:["all",ln,L[3]]},N[2],N[3],P&4&&{paint:{"fill-color":L[2],"fill-opacity":Q(.2,.5)}},P&1&&{layout:{visibility:L[0]?"visible":"none"}},N[6]]):{};P&128&&(U.$$scope={dirty:P,ctx:L}),u.$set(U);const H=P&13?ne(I,[I[0],P&8&&{filter:["all",ln,L[3]]},P&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*At}},P&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(H)},i(L){f||(g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(u.$$.fragment,L),g(a.$$.fragment,L),f=!0)},o(L){d(e.$$.fragment,L),d(t.$$.fragment,L),d(o.$$.fragment,L),d(u.$$.fragment,L),d(a.$$.fragment,L),f=!1},d(L){L&&(p(n),p(r),p(s),p(i)),w(e,L),w(t,L),w(o,L),w(u,L),w(a,L)}}}function pg(l){let e,n;return e=new St({props:{data:l[1],$$slots:{default:[$g]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mg(l,e,n){let t,r;Ae(l,Ot,a=>n(5,r=a));let{showSchemes:o}=e,[s]=Fn();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=Fo(r))},[o,t,s,u,i,r]}class _g extends Y{constructor(e){super(),K(this,e,mg,pg,J,{showSchemes:0})}}function ql(l,e,n){const t=l.slice();return t[13]=e[n],t}function Gl(l,e,n){const t=l.slice();return t[16]=e[n],t}function gg(l){let e,n;return e=new q_({props:{loadFile:l[7]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ul(l){let e,n,t,r,o;e=new $t({props:{$$slots:{default:[dg]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[hg]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new Yl({props:u}),W.push(()=>V(t,"open",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],X(()=>r=!1)),t.$set(c)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function dg(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wl(l){let e,n,t=l[16]+"",r;return{c(){e=T("li"),n=T("p"),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&z(r,t)},d(o){o&&p(e)}}}function hg(l){let e,n,t,r,o=De(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=Wl(Gl(l,o,u));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=O(),r=T("ul");for(let u=0;u<s.length;u+=1)s[u].c();G(e,"class","govuk-prose")},m(u,i){$(u,e,i),h(e,n),h(e,t),h(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=De(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=Gl(u,o,a);s[a]?s[a].p(f,i):(s[a]=Wl(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),ct(s,u)}}}function Vl(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new Wa({props:u}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],X(()=>t=!1)),e.$set(f)},i(i){r||(g(e.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),r=!1},d(i){w(e,i)}}}function Xl(l){let e,n;return e=new Y_({props:{scheme:l[13]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&Xl(l);return{c(){r&&r.c(),n=Me()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&g(r,1)):(r=Xl(o),r.c(),g(r,1),r.m(n.parentNode,n)):r&&(ce(),d(r,1,1,()=>{r=null}),$e())},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function bg(l){let e,n,t,r,o,s,u,i,a,f,c=Tn()=="Private (development)",_,m,S,C,y,N,D,I,A;o=new Vo({props:{boundaryGeojson:l[4]}}),a=new Eo({});let L=c&&gg(l),P=l[4].notes&&Ul(l);S=new Do({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),y=new ro({props:{errorMessage:l[0]}});let E=l[6].size>0&&Vl(l),M=De(l[6].values()),R=[];for(let H=0;H<M.length;H+=1)R[H]=Jl(ql(l,M,H));const U=H=>d(R[H],1,1,()=>{R[H]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",r=O(),b(o.$$.fragment),s=O(),u=T("p"),u.textContent=`App version: ${Tn()}`,i=O(),b(a.$$.fragment),f=O(),L&&L.c(),_=O(),P&&P.c(),m=O(),b(S.$$.fragment),C=O(),b(y.$$.fragment),N=O(),E&&E.c(),D=O(),I=T("ul");for(let H=0;H<R.length;H+=1)R[H].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(H,j){$(H,e,j),h(e,n),h(n,t),h(n,r),v(o,n,null),h(e,s),h(e,u),h(e,i),v(a,e,null),h(e,f),L&&L.m(e,null),h(e,_),P&&P.m(e,null),h(e,m),v(S,e,null),h(e,C),v(y,e,null),h(e,N),E&&E.m(e,null),h(e,D),h(e,I);for(let F=0;F<R.length;F+=1)R[F]&&R[F].m(I,null);A=!0},p(H,j){const F={};j&16&&(F.boundaryGeojson=H[4]),o.$set(F),c&&L.p(H,j),H[4].notes?P?(P.p(H,j),j&16&&g(P,1)):(P=Ul(H),P.c(),g(P,1),P.m(e,m)):P&&(ce(),d(P,1,1,()=>{P=null}),$e());const B={};if(j&1&&(B.errorMessage=H[0]),y.$set(B),H[6].size>0?E?(E.p(H,j),j&64&&g(E,1)):(E=Vl(H),E.c(),g(E,1),E.m(e,D)):E&&(ce(),d(E,1,1,()=>{E=null}),$e()),j&66){M=De(H[6].values());let oe;for(oe=0;oe<M.length;oe+=1){const se=ql(H,M,oe);R[oe]?(R[oe].p(se,j),g(R[oe],1)):(R[oe]=Jl(se),R[oe].c(),g(R[oe],1),R[oe].m(I,null))}for(ce(),oe=M.length;oe<R.length;oe+=1)U(oe);$e()}},i(H){if(!A){g(o.$$.fragment,H),g(a.$$.fragment,H),g(L),g(P),g(S.$$.fragment,H),g(y.$$.fragment,H),g(E);for(let j=0;j<M.length;j+=1)g(R[j]);A=!0}},o(H){d(o.$$.fragment,H),d(a.$$.fragment,H),d(L),d(P),d(S.$$.fragment,H),d(y.$$.fragment,H),d(E),R=R.filter(Boolean);for(let j=0;j<R.length;j+=1)d(R[j]);A=!1},d(H){H&&p(e),w(o),w(a),L&&L.d(),P&&P.d(),w(S),w(y),E&&E.d(),ct(R,H)}}}function vg(l){let e,n,t,r,o,s,u;return e=new Xo({}),t=new _g({props:{showSchemes:l[2]}}),s=new z_({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),o=T("div"),b(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,r,a),$(i,o,a),v(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),w(e,i),w(t,i),w(s)}}}function wg(l){let e,n,t;return n=new jo({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[vg]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function kg(l){let e,n;return e=new ls({props:{$$slots:{main:[wg],sidebar:[bg]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function yg(l,e,n){let t,r,o;Ae(l,Ot,y=>n(4,t=y)),Ae(l,Zn,y=>n(5,r=y)),Ae(l,un,y=>n(6,o=y)),Rn(()=>{Ro()});const s=new URLSearchParams(window.location.search);Zn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(y){try{Ot.set(JSON.parse(y)),un.set(Ca(t)),n(0,u="")}catch(N){n(0,u=`The file you loaded is broken: ${N}`)}}const _=()=>n(3,f=!0);function m(y){f=y,n(3,f)}function S(y){i=y,n(1,i)}function C(y){a=y,n(2,a)}return[u,i,a,f,t,r,o,c,_,m,S,C]}class Sg extends Y{constructor(e){super(),K(this,e,yg,kg,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Sg({target:document.getElementById("app")});
