import{S as U,i as z,s as W,C as Br,b as V,c as K,e as O,d as L,g as d,aA as Hr,h as Y,j as _,k,m as b,w as _t,l as J,t as m,n as h,o as g,p as v,aL as Rt,aM as Wt,aN as Gt,aO as Ut,$ as be,as as ie,at as ae,aU as gr,aV as mn,aW as Rr,q as je,a3 as sn,aX as _n,aY as Wr,aZ as Gr,a0 as te,a_ as Ur,a$ as nt,u as w,f as an,ao as zr,A as Tt,aq as Zt,r as Lt,F as hr,a as yt,v as gn,B as H,b0 as Qt,aF as qr,aC as Ne,aP as Vr,aQ as Xr,K as B,N as Z,O as Q,P as x,x as xt,ab as Kr,aT as X,ap as Ce,aD as Dt,b1 as fe,b2 as $e,R as dr,b3 as fn,b4 as un,E as br,b5 as hn,J as Yr,aI as dn,_ as Jr,Z as bn,Y as vn,X as Et,aS as wn,L as Zr,M as Qr,y as xr}from"./index-84fa979f.js";import{e as Ft,C as ye,b as Ot,d as le,c as jt,a as Mt,B as el,S as tl,l as rt,L as nl}from"./StreetViewController-47219848.js";import{c as rl,e as kn,i as vr,L as ue,l as ll,j as ge,C as Ue,Z as ol}from"./index-0eb4c35b.js";import{L as sl,G as gt,h as q,a as Me,F as il}from"./GeoJSON-8b943bab.js";import{P as re}from"./Popup-3fa37d44.js";const al="/atip/assets/help-d011708a.svg";function fl(r){let e,n;const t=r[1].default,l=Rt(t,r,r[4],null);return{c(){e=O("div"),l&&l.c(),Y(e,"class","govuk-prose")},m(o,i){_(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Wt(l,t,o,o[4],n?Ut(t,o[4],i,null):Gt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){h(l,o),n=!1},d(o){o&&g(e),l&&l.d(o)}}}function ul(r){let e,n,t,l,o,i,u,s,a;function f(p){r[3](p)}let c={title:"Help",$$slots:{default:[fl]},$$scope:{ctx:r}};return r[0]!==void 0&&(c.open=r[0]),o=new Br({props:c}),V.push(()=>K(o,"open",f)),{c(){e=O("button"),n=O("img"),l=L(),d(o.$$.fragment),Hr(n.src,t=al)||Y(n,"src",t),Y(n,"title","Help"),Y(n,"alt","Help"),Y(e,"class","svelte-7d9d1l")},m(p,$){_(p,e,$),k(e,n),_(p,l,$),b(o,p,$),u=!0,s||(a=_t(e,"click",r[2]),s=!0)},p(p,[$]){const C={};$&16&&(C.$$scope={dirty:$,ctx:p}),!i&&$&1&&(i=!0,C.open=p[0],J(()=>i=!1)),o.$set(C)},i(p){u||(m(o.$$.fragment,p),u=!0)},o(p){h(o.$$.fragment,p),u=!1},d(p){p&&(g(e),g(l)),v(o,p),s=!1,a()}}}function cl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class oe extends U{constructor(e){super(),z(this,e,cl,ul,W,{})}}function yn(r){let e=r[0],n,t,l=Sn(r);return{c(){l.c(),n=be()},m(o,i){l.m(o,i),_(o,n,i),t=!0},p(o,i){i&1&&W(e,e=o[0])?(ie(),h(l,1,1,te),ae(),l=Sn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){h(l),t=!1},d(o){o&&g(n),l.d(o)}}}function Sn(r){let e;const n=r[9].default,t=Rt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Wt(t,n,l,l[8],e?Ut(n,l[8],o,null):Gt(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){h(t,l),e=!1},d(l){t&&t.d(l)}}}function $l(r){let e,n,t=r[0]&&yn(r);return{c(){t&&t.c(),e=be()},m(l,o){t&&t.m(l,o),_(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=yn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ie(),h(t,1,1,()=>{t=null}),ae())},i(l){n||(m(t),n=!0)},o(l){h(t),n=!1},d(l){l&&g(e),t&&t.d(l)}}}function pl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=gr("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!mn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let $=new Ur;mn.addProtocol("pmtiles",$.tile)}const{map:c,self:p}=Rr();return je(r,c,$=>n(7,t=$)),je(r,p,$=>n(0,l=$)),sn(()=>{if(l){let $=l;_n(p,l=null,l),Wr().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource($))})}}),r.$$set=$=>{"id"in $&&n(3,u=$.id),"url"in $&&n(4,s=$.url),"tiles"in $&&n(5,a=$.tiles),"promoteId"in $&&n(6,f=$.promoteId),"$$scope"in $&&n(8,i=$.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&t&&l!==u&&(l&&t.removeSource(l),_n(p,l=u,l),t.addSource(l,Gr({type:"vector",url:s,tiles:a,promoteId:f})))},[l,c,p,u,s,a,f,t,i,o]}class ce extends U{constructor(e){super(),z(this,e,pl,$l,W,{id:3,url:4,tiles:5,promoteId:6})}}function ml(r){let e;const n=r[15].default,t=Rt(n,r,r[23],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8388608)&&Wt(t,n,l,l[23],e?Ut(n,l[23],o,null):Gt(l[23]),null)},i(l){e||(m(t,l),e=!0)},o(l){h(t,l),e=!1},d(l){t&&t.d(l)}}}function _l(r){let e,n,t;function l(i){r[16](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[ml]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new sl({props:o}),V.push(()=>K(e,"hovered",l)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){d(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&8388608&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function gl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=gr("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:$=void 0}=e,{minzoom:C=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:S=!1}=e,{hovered:E=null}=e,{eventsIfTopMost:F=!1}=e;function j(M){E=M,n(0,E)}function A(M){nt.call(this,r,M)}function P(M){nt.call(this,r,M)}function N(M){nt.call(this,r,M)}function I(M){nt.call(this,r,M)}function D(M){nt.call(this,r,M)}function R(M){nt.call(this,r,M)}return r.$$set=M=>{"id"in M&&n(1,o=M.id),"source"in M&&n(2,i=M.source),"sourceLayer"in M&&n(3,u=M.sourceLayer),"beforeId"in M&&n(4,s=M.beforeId),"beforeLayerType"in M&&n(5,a=M.beforeLayerType),"paint"in M&&n(6,f=M.paint),"layout"in M&&n(7,c=M.layout),"filter"in M&&n(8,p=M.filter),"applyToClusters"in M&&n(9,$=M.applyToClusters),"minzoom"in M&&n(10,C=M.minzoom),"maxzoom"in M&&n(11,y=M.maxzoom),"hoverCursor"in M&&n(12,T=M.hoverCursor),"manageHoverState"in M&&n(13,S=M.manageHoverState),"hovered"in M&&n(0,E=M.hovered),"eventsIfTopMost"in M&&n(14,F=M.eventsIfTopMost),"$$scope"in M&&n(23,l=M.$$scope)},[E,o,i,u,s,a,f,c,p,$,C,y,T,S,F,t,j,A,P,N,I,D,R,l]}class hl extends U{constructor(e){super(),z(this,e,gl,_l,W,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function dl(r){let e;return{c(){e=O("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function bl(r){let e,n,t,l,o=r[0]=="Private (development)"&&dl();return{c(){o&&o.c(),e=L(),n=O("p"),n.textContent="Note the ATF scheme data has not been validated.",t=L(),l=O("p"),l.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,u){o&&o.m(i,u),_(i,e,u),_(i,n,u),_(i,t,u),_(i,l,u)},p:te,d(i){i&&(g(e),g(n),g(t),g(l)),o&&o.d(i)}}}function vl(r){let e,n,t,l,o,i;return o=new oe({props:{$$slots:{default:[bl]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("App version: "),t=w(r[0]),l=L(),d(o.$$.fragment)},m(u,s){_(u,e,s),k(e,n),k(e,t),k(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(m(o.$$.fragment,u),i=!0)},o(u){h(o.$$.fragment,u),i=!1},d(u){u&&g(e),v(o)}}}function wl(r){return[an()]}class kl extends U{constructor(e){super(),z(this,e,wl,vl,W,{})}}const yl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var me=Uint8Array,Je=Uint16Array,wr=Uint32Array,kr=new me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),yr=new me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Sl=new me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sr=function(r,e){for(var n=new Je(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new wr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Cr=Sr(kr,2),Tr=Cr[0],Cl=Cr[1];Tr[28]=258,Cl[258]=28;var Tl=Sr(yr,0),Ll=Tl[0],en=new Je(32768);for(var ne=0;ne<32768;++ne){var Re=(ne&43690)>>>1|(ne&21845)<<1;Re=(Re&52428)>>>2|(Re&13107)<<2,Re=(Re&61680)>>>4|(Re&3855)<<4,en[ne]=((Re&65280)>>>8|(Re&255)<<8)>>>1}var kt=function(r,e,n){for(var t=r.length,l=0,o=new Je(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Je(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Je(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,p=c|(1<<f)-1;c<=p;++c)u[en[c]>>>s]=a}else for(u=new Je(t),l=0;l<t;++l)r[l]&&(u[l]=en[i[r[l]-1]++]>>>15-r[l]);return u},At=new me(288);for(var ne=0;ne<144;++ne)At[ne]=8;for(var ne=144;ne<256;++ne)At[ne]=9;for(var ne=256;ne<280;++ne)At[ne]=7;for(var ne=280;ne<288;++ne)At[ne]=8;var Lr=new me(32);for(var ne=0;ne<32;++ne)Lr[ne]=5;var Ol=kt(At,9,1),Al=kt(Lr,5,1),zt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},we=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},qt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Pl=function(r){return(r+7)/8|0},cn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Je:r.BYTES_PER_ELEMENT==4?wr:me)(n-e);return t.set(r.subarray(e,n)),t},El=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ke=function(r,e,n){var t=new Error(e||El[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,ke),!n)throw t;return t},Nl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new me(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new me(t*3));var i=function(et){var Xe=e.length;if(et>Xe){var tt=new me(Math.max(Xe*2,et));tt.set(e),e=tt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,p=n.m,$=n.n,C=t*8;do{if(!f){u=we(r,s,1);var y=we(r,s+1,3);if(s+=3,y)if(y==1)f=Ol,c=Al,p=9,$=5;else if(y==2){var F=we(r,s,31)+257,j=we(r,s+10,15)+4,A=F+we(r,s+5,31)+1;s+=14;for(var P=new me(A),N=new me(19),I=0;I<j;++I)N[Sl[I]]=we(r,s+I*3,7);s+=j*3;for(var D=zt(N),R=(1<<D)-1,M=kt(N,D,1),I=0;I<A;){var se=M[we(r,s,R)];s+=se&15;var T=se>>>4;if(T<16)P[I++]=T;else{var ee=0,ve=0;for(T==16?(ve=3+we(r,s,3),s+=2,ee=P[I-1]):T==17?(ve=3+we(r,s,7),s+=3):T==18&&(ve=11+we(r,s,127),s+=7);ve--;)P[I++]=ee}}var ht=P.subarray(0,F),he=P.subarray(F);p=zt(ht),$=zt(he),f=kt(ht,p,1),c=kt(he,$,1)}else ke(1);else{var T=Pl(s)+4,S=r[T-4]|r[T-3]<<8,E=T+S;if(E>t){o&&ke(0);break}l&&i(a+S),e.set(r.subarray(T,E),a),n.b=a+=S,n.p=s=E*8,n.f=u;continue}if(s>C){o&&ke(0);break}}l&&i(a+131072);for(var Qe=(1<<p)-1,dt=(1<<$)-1,xe=s;;xe=s){var ee=f[qt(r,s)&Qe],pe=ee>>>4;if(s+=ee&15,s>C){o&&ke(0);break}if(ee||ke(2),pe<256)e[a++]=pe;else if(pe==256){xe=s,f=null;break}else{var bt=pe-254;if(pe>264){var I=pe-257,Fe=kr[I];bt=we(r,s,(1<<Fe)-1)+Tr[I],s+=Fe}var He=c[qt(r,s)&dt],Ve=He>>>4;He||ke(3),s+=He&15;var he=Ll[Ve];if(Ve>3){var Fe=yr[Ve];he+=qt(r,s)&(1<<Fe)-1,s+=Fe}if(s>C){o&&ke(0);break}l&&i(a+131072);for(var vt=a+bt;a<vt;a+=4)e[a]=e[a-he],e[a+1]=e[a+1-he],e[a+2]=e[a+2-he],e[a+3]=e[a+3-he];a=vt}}n.l=f,n.p=xe,n.b=a,n.f=u,f&&(u=1,n.m=p,n.d=c,n.n=$)}while(!u);return a==e.length?e:cn(e,0,a)},Il=new me(0),Ee=function(r,e){return r[e]|r[e+1]<<8},Se=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Vt=function(r,e){return Se(r,e)+Se(r,e+4)*4294967296};function Dl(r,e){return Nl(r,e)}var tn=typeof TextDecoder<"u"&&new TextDecoder,Fl=0;try{tn.decode(Il,{stream:!0}),Fl=1}catch{}var jl=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,cn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Or(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(tn)return tn.decode(r);var l=jl(r),o=l[0],i=l[1];return i.length&&ke(8),o}}var Ml=function(r,e){return e+30+Ee(r,e+26)+Ee(r,e+28)},Bl=function(r,e,n){var t=Ee(r,e+28),l=Or(r.subarray(e+46,e+46+t),!(Ee(r,e+8)&2048)),o=e+46+t,i=Se(r,e+20),u=n&&i==4294967295?Hl(r,o):[i,Se(r,e+24),Se(r,e+42)],s=u[0],a=u[1],f=u[2];return[Ee(r,e+10),s,a,l,o+Ee(r,e+30)+Ee(r,e+32),f]},Hl=function(r,e){for(;Ee(r,e)!=1;e+=4+Ee(r,e+2));return[Vt(r,e+12),Vt(r,e+4),Vt(r,e+20)]};function Rl(r,e){for(var n={},t=r.length-22;Se(r,t)!=101010256;--t)(!t||r.length-t>65558)&&ke(13);var l=Ee(r,t+8);if(!l)return{};var o=Se(r,t+16),i=o==4294967295||l==65535;if(i){var u=Se(r,t-12);i=Se(r,u)==101075792,i&&(l=Se(r,u+32),o=Se(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=Bl(r,o,i),c=f[0],p=f[1],$=f[2],C=f[3],y=f[4],T=f[5],S=Ml(r,T);o=y,(!s||s({name:C,size:p,originalSize:$,compression:c}))&&(c?c==8?n[C]=Dl(r.subarray(S,S+p),new me($)):ke(14,"unknown compression type "+c):n[C]=cn(r,S,S+p))}return n}function Wl(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Xt):Xt(r)}function Xt(r){var e=new Uint8Array(r),n=Rl(e);return Promise.resolve(Gl(n))}function Gl(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Or(r[l])}return e}function Ie(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Ze(t)===e)return t;n++}}function Pt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Ze(l)===e&&n.push(l),t++}return n}function Bt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Ze(l)===e&&n(l,t):n(l,t),t++}}function Ul(r,e,n){var t=[];return Bt(r,e,function(l,o){t.push(n(l,o))}),t}var zl=/.+\:/;function Ze(r){return r.tagName.replace(zl,"")}function Ar(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Ze(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Ar(r.childNodes[t]),t++;return e+="</"+Ze(r)+">",e}function ql(r){var e=r.documentElement,n=Ie(e,"sheetData"),t=[];return Bt(n,"row",function(l){Bt(l,"c",function(o){t.push(o)})}),t}function Vl(r,e){return Ie(e,"v")}function Xl(r,e){if(e.firstChild&&Ze(e.firstChild)==="is"&&e.firstChild.firstChild&&Ze(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Kl(r){var e=r.documentElement,n=Ie(e,"dimension");if(n)return n.getAttribute("ref")}function Yl(r){var e=r.documentElement,n=Ie(e,"cellStyleXfs");return n?Pt(n,"xf"):[]}function Jl(r){var e=r.documentElement,n=Ie(e,"cellXfs");return n?Pt(n,"xf"):[]}function Zl(r){var e=r.documentElement,n=Ie(e,"numFmts");return n?Pt(n,"numFmt"):[]}function Ql(r){var e=r.documentElement;return Ul(e,"si",function(n){var t=Ie(n,"t");if(t)return t.textContent;var l="";return Bt(n,"r",function(o){l+=Ie(o,"t").textContent}),l})}function xl(r){var e=r.documentElement;return Ie(e,"workbookPr")}function eo(r){var e=r.documentElement;return Pt(e,"Relationship")}function to(r){var e=r.documentElement,n=Ie(e,"sheets");return Pt(n,"sheet")}function no(r,e){var n=e.createDocument(r),t={},l=xl(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return to(n).forEach(o),t}function ro(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Kt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Kt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Kt(u);break}};return eo(n).forEach(l),t}function Kt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Cn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Tn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cn(Object(n),!0).forEach(function(t){lo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function lo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function oo(r,e){if(!r)return{};var n=e.createDocument(r),t=Yl(n).map(Yt),l=Zl(n).map(so).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Tn(Tn({},t[u.xfId]),Yt(u,l)):Yt(u,l)};return Jl(n).map(o)}function so(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Yt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function io(r,e){return r?Ql(e.createDocument(r)):[]}function Pr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function ao(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=fo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fo(r,e){if(r){if(typeof r=="string")return Ln(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(r,e)}}function Ln(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function uo(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(co.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&mo(l.numberFormat.template))return!0}}var co=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],$o=/^\[\$-414\]/,po=/;@$/;function mo(r){r=r.toLowerCase(),r=r.replace($o,""),r=r.replace(po,"");for(var e=r.split(/\W+/),n=ao(e),t;!(t=n()).done;){var l=t.value;if(_o.indexOf(l)<0)return!1}return!0}var _o=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function go(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Jt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Jt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Jt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=ho(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var p=Number(r);if(isNaN(p))throw new Error('Invalid "numeric" cell value: '.concat(r));r=p,uo(r,o(),i,a)&&(r=Pr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function ho(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Jt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var bo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function vo(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function wo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=bo.indexOf(r[n]),n++;return e}function Er(r){return r=r.split(/(\d+)/),[parseInt(r[1]),wo(r[0].trim())]}function ko(r,e,n,t,l,o,i){var u=Er(r.getAttribute("r")),s=Vl(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:go(a,f,{getInlineStringValue:function(){return Xl(e,r)},getInlineStringXml:function(){return Ar(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function yo(r,e,n,t,l,o){var i=ql(r);return i.length===0?[]:i.map(function(u){return ko(u,r,e,n,t,l,o)})}function So(r,e){return Oo(r)||Lo(r,e)||To(r,e)||Co()}function Co(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function To(r,e){if(r){if(typeof r=="string")return On(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(r,e)}}function On(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Lo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Oo(r){if(Array.isArray(r))return r}function Ao(r){var e=Kl(r);if(e)return e=e.split(":").map(Er).map(function(n){var t=So(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Po(r,e,n,t,l,o){var i=e.createDocument(r),u=yo(i,e,n,t,l,o),s=Ao(i)||vo(u);return{cells:u,dimensions:s}}function Eo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=No(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function No(r,e){if(r){if(typeof r=="string")return An(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(r,e)}}function An(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Io(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=Eo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Do(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Fo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fo(r,e){if(r){if(typeof r=="string")return Pn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(r,e)}}function Pn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function jo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Do(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Mo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Nr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bo(r,e){return Wo(r)||Ro(r,e)||Nr(r,e)||Ho()}function Ho(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nr(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ro(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Wo(r){if(Array.isArray(r))return r}function Go(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Bo(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=Mo(t),p;!(p=c()).done;){var $=p.value,C=$.row-1,y=$.column-1;y<i&&C<u&&(s[C][y]=$.value)}var T=e.rowMap;if(T)for(var S=0;S<s.length;)T[S]=S,S++;return s=Io(jo(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(s=e.transformData(s)),s}function Uo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=zo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zo(r,e){if(r){if(typeof r=="string")return Nn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(r,e)}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function In(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function qo(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?In(Object(n),!0).forEach(function(t){Vo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Vo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Xo(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=qo({sheet:1},n));var t=function(p){if(!r[p])throw new Error('"'.concat(p,'" file not found inside the *.xlsx file zip archive'));return r[p]},l=ro(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?io(t(l.sharedStrings),e):[],i=l.styles?oo(t(l.styles),e):{},u=no(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var p=c.name;return{name:p}});var s=Ko(n.sheet,u.sheets);if(!s||!l.sheets[s])throw Yo(n.sheet,u.sheets);var a=Po(t(l.sheets[s]),e,o,i,u,n),f=Go(a,n);return n.properties?{data:f,properties:u}:f}function Ko(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Uo(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Yo(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function nn(r){"@babel/helpers - typeof";return nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(r)}function Dn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Jo(r,e,n){return e&&Dn(r.prototype,e),n&&Dn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Zo(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Qo(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&St(r,e)}function xo(r){var e=Ir();return function(){var t=Ct(r),l;if(e){var o=Ct(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return es(this,l)}}function es(r,e){if(e&&(nn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ts(r)}function ts(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function rn(r){var e=typeof Map=="function"?new Map:void 0;return rn=function(t){if(t===null||!ns(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return It(t,arguments,Ct(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),St(l,t)},rn(r)}function It(r,e,n){return Ir()?It=Reflect.construct:It=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&St(a,i.prototype),a},It.apply(null,arguments)}function Ir(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ns(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function St(r,e){return St=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},St(r,e)}function Ct(r){return Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ct(r)}var _e=function(r){Qo(n,r);var e=xo(n);function n(t){var l;return Zo(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Jo(n)}(rn(Error));function rs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new _e("not_a_number")}if(typeof r!="number")throw new _e("not_a_number");if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return r}function ls(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return String(r)}throw new _e("not_a_string")}function os(r){if(typeof r=="boolean")return r;throw new _e("not_a_boolean")}function ss(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new _e("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");var t=Pr(r,n);if(isNaN(t.valueOf()))throw new _e("out_of_bounds");return t}throw new _e("not_a_date")}function is(r,e){return us(r)||fs(r,e)||Dr(r,e)||as()}function as(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function us(r){if(Array.isArray(r))return r}function ln(r){"@babel/helpers - typeof";return ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(r)}function cs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Dr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dr(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function jn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Mn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jn(Object(n),!0).forEach(function(t){$s(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function $s(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Bn={isColumnOriented:!1};function ps(r,e,n){n?n=Mn(Mn({},Bn),n):n=Bn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;hs(e),l&&(r=gs(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Fr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var p=cs(a),$;!($=p()).done;){var C=$.value;C.row=o[C.row-1]+1}return{rows:s,errors:a}}function Fr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var p=f[a],$=r[p],C=ln($.type)==="object"&&!Array.isArray($.type),y=e[t.indexOf(p)];y===void 0&&(y=null);var T=void 0,S=void 0,E=void 0;if(C)T=Fr($.type,e,n,t,l,o);else if(y===null)T=null;else if(Array.isArray($.type)){var F=!1,j=_s(y).map(function(P){var N=Hn(P,$,o);return N.error&&(T=P,S=N.error,E=N.reason),N.value!==null&&(F=!0),N.value});S||(T=F?j:null)}else{var A=Hn(y,$,o);S=A.error,E=A.reason,T=S?y:A.value}!S&&T===null&&$.required&&(S="required"),S?(S={error:S,row:n+1,column:p,value:T},E&&(S.reason=E),$.type&&(S.type=$.type),l.push(S)):(u&&T!==null&&(u=!1),(T!==null||o.includeNullValues)&&(i[$.prop]=T))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function Hn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=lt(r,e.parse):e.type?t=ms(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function lt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ms(r,e,n){switch(e){case String:return lt(r,ls);case Number:return lt(r,rs);case Date:return lt(r,function(t){return ss(t,{properties:n.properties})});case Boolean:return lt(r,os);default:if(typeof e=="function")return lt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function jr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=jr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function _s(r){for(var e=[],n=0;n<r.length;){var t=jr(r,",",n),l=is(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var gs=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function hs(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function on(r){"@babel/helpers - typeof";return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(r)}function Mr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;on(o)==="object"&&(o=Object.keys(r[l])[0],i=Mr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var ds=["schema","map"];function Rn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Nt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(t){bs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function bs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function vs(r,e){if(r==null)return{};var n=ws(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ws(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function ks(r,e,n){var t=n.schema,l=n.map,o=vs(n,ds);!t&&l&&(t=Mr(l));var i=Xo(r,e,Nt(Nt({},o),{},{properties:t||o.properties}));return t?ps(i.data,t,Nt(Nt({},o),{},{properties:i.properties})):i}function ys(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Wl(r).then(function(n){return ks(n,yl,e)})}function Ss(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:l.authority_or_region,capital_scheme_id:l.capital_scheme_id,funding_programme:l.funding_programme});let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.num_features++,t.properties.funding_programme=l.funding_programme,t.id=n++}return e}async function Cs(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await ys(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=zr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const G={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},De=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Ts(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Ft({props:u}),V.push(()=>K(e,"value",i)),e.$on("change",r[2]),l=new rl({props:{rows:r[1]}}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],J(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}function Ls(r,e,n){let t;je(r,Tt,s=>n(4,t=s));let l="interventionType",o=kn("v1");function i(){let s;l=="interventionType"?(s=vr("v1"),n(1,o=kn("v1"))):(s=Zt(["get","funding_programme"],{ATF2:G.atf2,ATF3:G.atf3,ATF4:G.atf4},"grey"),n(1,o=[["ATF2",G.atf2],["ATF3",G.atf3],["ATF4",G.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class Os extends U{constructor(e){super(),z(this,e,Ls,Ts,W,{})}}function As(r){let e;return{c(){e=w("Clear")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ps(r){let e,n,t,l,o,i;return t=new yt({props:{$$slots:{default:[As]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=O("input"),n=L(),d(t.$$.fragment),Y(e,"type","text"),Y(e,"class","govuk-input govuk-input--width-10"),Y(e,"id","filterText")},m(u,s){_(u,e,s),gn(e,r[0]),_(u,n,s),b(t,u,s),l=!0,o||(i=_t(e,"input",r[12]),o=!0)},p(u,s){s&1&&e.value!==u[0]&&gn(e,u[0]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){h(t.$$.fragment,u),l=!1},d(u){u&&(g(e),g(n)),v(t,u),o=!1,i()}}}function Es(r){let e,n,t,l,o,i,u,s,a,f;function c(y){r[10](y)}let p={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&(p.value=r[3]),e=new Ft({props:p}),V.push(()=>K(e,"value",c));function $(y){r[11](y)}let C={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(C.value=r[4]),l=new Ft({props:C}),V.push(()=>K(l,"value",$)),u=new hr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Ps]},$$scope:{ctx:r}}}),a=new Os({}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment),i=L(),d(u.$$.fragment),s=L(),d(a.$$.fragment)},m(y,T){b(e,y,T),_(y,t,T),b(l,y,T),_(y,i,T),b(u,y,T),_(y,s,T),b(a,y,T),f=!0},p(y,T){const S={};T&32&&(S.choices=y[5]),!n&&T&8&&(n=!0,S.value=y[3],J(()=>n=!1)),e.$set(S);const E={};T&64&&(E.choices=y[6]),!o&&T&16&&(o=!0,E.value=y[4],J(()=>o=!1)),l.$set(E);const F={};T&65537&&(F.$$scope={dirty:T,ctx:y}),u.$set(F)},i(y){f||(m(e.$$.fragment,y),m(l.$$.fragment,y),m(u.$$.fragment,y),m(a.$$.fragment,y),f=!0)},o(y){h(e.$$.fragment,y),h(l.$$.fragment,y),h(u.$$.fragment,y),h(a.$$.fragment,y),f=!1},d(y){y&&(g(t),g(i),g(s)),v(e,y),v(l,y),v(u,y),v(a,y)}}}function Ns(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",p,$,C=r[7].other.toLocaleString()+"",y,T;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),p=w(c),$=w(" crossings, "),y=w(C),T=w(`
    other)`)},m(S,E){_(S,e,E),_(S,t,E),_(S,l,E),_(S,i,E),_(S,u,E),_(S,a,E),_(S,f,E),_(S,p,E),_(S,$,E),_(S,y,E),_(S,T,E)},p(S,E){E&2&&n!==(n=S[1].size.toLocaleString()+"")&&H(t,n),E&128&&o!==(o=S[7].route.toLocaleString()+"")&&H(i,o),E&128&&s!==(s=S[7].area.toLocaleString()+"")&&H(a,s),E&128&&c!==(c=S[7].crossing.toLocaleString()+"")&&H(p,c),E&128&&C!==(C=S[7].other.toLocaleString()+"")&&H(y,C)},d(S){S&&(g(e),g(t),g(l),g(i),g(u),g(a),g(f),g(p),g($),g(y),g(T))}}}function Is(r){let e,n,t;function l(i){r[14](i)}let o={id:"show-schemes",$$slots:{default:[Ns]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new le({props:o}),V.push(()=>K(e,"checked",l)),{c(){d(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65666&&(s.$$scope={dirty:u,ctx:i}),!n&&u&4&&(n=!0,s.checked=i[2],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ds(r){let e,n,t,l;return e=new ye({props:{label:"Filters",$$slots:{default:[Es]},$$scope:{ctx:r}}}),t=new Ot({props:{small:!0,$$slots:{default:[Is]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65657&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65670&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),h(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Fs(r,e,n){let{schemesGj:t}=e,{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,{show:u=!0}=e,s=[],a="",f=[],c="",p={area:0,route:0,crossing:0,other:0};Lt(()=>{let F=new Set,j=new Set;for(let A of l.values())A.authority_or_region&&F.add(A.authority_or_region),A.funding_programme&&j.add(A.funding_programme);n(5,s=Array.from(F.entries())),s.sort(),n(6,f=Array.from(j.entries())),f.sort()});function $(F,j,A){let P=F.toLowerCase(),N=D=>{var R,M;if(P&&!((R=D.properties.name)!=null&&R.toLowerCase().includes(P))&&!((M=D.properties.description)!=null&&M.toLowerCase().includes(P)))return!1;if(j||A){let se=l.get(D.properties.scheme_reference);if(j&&se.authority_or_region!=j||A&&se.funding_programme!=A)return!1}return!0};n(1,o=new Set(t.features.filter(N).map(D=>D.properties.scheme_reference))),n(7,p={area:0,route:0,crossing:0,other:0});let I=D=>{var R,M;return!(!o.has(D.properties.scheme_reference)||P&&!((R=D.properties.name)!=null&&R.toLowerCase().includes(P))&&!((M=D.properties.description)!=null&&M.toLowerCase().includes(P)))};for(let D of t.features)I(D)?(delete D.properties.hide_while_editing,n(7,p[D.properties.intervention_type]++,p)):D.properties.hide_while_editing=!0;n(8,t),n(7,p)}function C(F){a=F,n(3,a)}function y(F){c=F,n(4,c)}function T(){i=this.value,n(0,i)}const S=()=>n(0,i="");function E(F){u=F,n(2,u)}return r.$$set=F=>{"schemesGj"in F&&n(8,t=F.schemesGj),"schemes"in F&&n(9,l=F.schemes),"schemesToBeShown"in F&&n(1,o=F.schemesToBeShown),"filterText"in F&&n(0,i=F.filterText),"show"in F&&n(2,u=F.show)},r.$$.update=()=>{r.$$.dirty&25&&$(i,a,c)},[i,o,u,a,c,s,f,p,t,l,C,y,T,S,E]}class js extends U{constructor(e){super(),z(this,e,Fs,Ds,W,{schemesGj:8,schemes:9,schemesToBeShown:1,filterText:0,show:2})}}function Ms(r,e,n){let t;je(r,Tt,u=>n(3,t=u));let l=null,{markerPosition:o}=e,{markerPositionUpdated:i}=e;return Lt(()=>{l=new Qt.Marker({draggable:!0}).setLngLat(o).addTo(t),l.on("dragstart",()=>{t.getCanvas().style.cursor="grabbing"}),l.on("drag",()=>{n(0,o=l.getLngLat()),i()}),l.on("dragend",()=>{t.getCanvas().style.cursor="inherit"})}),sn(()=>{l&&l.remove()}),r.$$set=u=>{"markerPosition"in u&&n(0,o=u.markerPosition),"markerPositionUpdated"in u&&n(1,i=u.markerPositionUpdated)},[o,i]}class Bs extends U{constructor(e){super(),z(this,e,Ms,null,W,{markerPosition:0,markerPositionUpdated:1})}}function Wn(r,e,n){const t=r.slice();return t[16]=e[n],t[17]=e,t[18]=n,t}function Hs(r){let e,n;return e=new yt({props:{$$slots:{default:[Ws]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&524288&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rs(r){let e,n;return e=new yt({props:{$$slots:{default:[Gs]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&524288&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ws(r){let e;return{c(){e=w("Disable Line Measurement Tool")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Gs(r){let e;return{c(){e=w("Enable Line Measurement Tool")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Gn(r){var c;let e,n,t,l=[],o=new Map,i,u,s=r[2]&&((c=r[2].properties)==null?void 0:c.length)&&Un(r);n=new ye({props:{label:"Help",$$slots:{default:[Us]},$$scope:{ctx:r}}});let a=Ne(r[1]);const f=p=>p[16].id;for(let p=0;p<a.length;p+=1){let $=Wn(r,a,p),C=f($);o.set(C,l[p]=zn(C,$))}return{c(){s&&s.c(),e=L(),d(n.$$.fragment),t=L();for(let p=0;p<l.length;p+=1)l[p].c();i=be()},m(p,$){s&&s.m(p,$),_(p,e,$),b(n,p,$),_(p,t,$);for(let C=0;C<l.length;C+=1)l[C]&&l[C].m(p,$);_(p,i,$),u=!0},p(p,$){var y;p[2]&&((y=p[2].properties)!=null&&y.length)?s?s.p(p,$):(s=Un(p),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null);const C={};$&524288&&(C.$$scope={dirty:$,ctx:p}),n.$set(C),$&258&&(a=Ne(p[1]),ie(),l=Vr(l,$,f,1,p,a,o,i.parentNode,Xr,zn,i,Wn),ae())},i(p){if(!u){m(n.$$.fragment,p);for(let $=0;$<a.length;$+=1)m(l[$]);u=!0}},o(p){h(n.$$.fragment,p);for(let $=0;$<l.length;$+=1)h(l[$]);u=!1},d(p){p&&(g(e),g(t),g(i)),s&&s.d(p),v(n,p);for(let $=0;$<l.length;$+=1)l[$].d(p)}}}function Un(r){var i;let e,n,t=((i=r[2].properties)==null?void 0:i.length)+"",l,o;return{c(){e=O("p"),n=w("Length: "),l=w(t),o=w("m")},m(u,s){_(u,e,s),k(e,n),k(e,l),k(e,o)},p(u,s){var a;s&4&&t!==(t=((a=u[2].properties)==null?void 0:a.length)+"")&&H(l,t)},d(u){u&&g(e)}}}function Us(r){let e;return{c(){e=O("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){_(n,e,t)},p:te,d(n){n&&g(e)}}}function zn(r,e){let n,t,l,o;function i(s){e[9](s,e[16])}let u={markerPositionUpdated:e[8]};return e[16].lngLat!==void 0&&(u.markerPosition=e[16].lngLat),t=new Bs({props:u}),V.push(()=>K(t,"markerPosition",i)),{key:r,first:null,c(){n=be(),d(t.$$.fragment),this.first=n},m(s,a){_(s,n,a),b(t,s,a),o=!0},p(s,a){e=s;const f={};!l&&a&2&&(l=!0,f.markerPosition=e[16].lngLat,J(()=>l=!1)),t.$set(f)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){h(t.$$.fragment,s),o=!1},d(s){s&&g(n),v(t,s)}}}function zs(r){let e,n;const t=[B("measurement-line"),{paint:{"line-color":jt.measuringLine,"line-width":5}}];let l={};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&0?Q(t,[i&0&&x(B("measurement-line")),i&0&&{paint:{"line-color":jt.measuringLine,"line-width":5}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function qs(r){let e,n,t,l,o,i,u,s;const a=[Rs,Hs],f=[];function c($,C){return $[0]?0:1}e=c(r),n=f[e]=a[e](r);let p=!r[0]&&Gn(r);return o=new gt({props:{data:r[3],$$slots:{default:[zs]},$$scope:{ctx:r}}}),{c(){n.c(),t=L(),p&&p.c(),l=L(),d(o.$$.fragment)},m($,C){f[e].m($,C),_($,t,C),p&&p.m($,C),_($,l,C),b(o,$,C),i=!0,u||(s=[_t(window,"keydown",r[6]),_t(window,"keyup",r[7])],u=!0)},p($,[C]){let y=e;e=c($),e===y?f[e].p($,C):(ie(),h(f[y],1,1,()=>{f[y]=null}),ae(),n=f[e],n?n.p($,C):(n=f[e]=a[e]($),n.c()),m(n,1),n.m(t.parentNode,t)),$[0]?p&&(ie(),h(p,1,1,()=>{p=null}),ae()):p?(p.p($,C),C&1&&m(p,1)):(p=Gn($),p.c(),m(p,1),p.m(l.parentNode,l));const T={};C&8&&(T.data=$[3]),C&524288&&(T.$$scope={dirty:C,ctx:$}),o.$set(T)},i($){i||(m(n),m(p),m(o.$$.fragment,$),i=!0)},o($){h(n),h(p),h(o.$$.fragment,$),i=!1},d($){$&&(g(t),g(l)),f[e].d($),p&&p.d($),v(o,$),u=!1,qr(s)}}}function Vs(r,e,n){let t;je(r,Tt,F=>n(12,t=F));let l=!0,o=[],i,u=!1,s=0,a=xt();function f(F){l||(u||(o.push({id:s++,lngLat:F.lngLat}),n(1,o),T()),u&&o.length>0&&(c(F.lngLat),T()))}function c(F){let A=new Qt.LngLat(0,-90).distanceTo(new Qt.LngLat(0,90)),P;o.forEach(N=>{const I=N.lngLat;A>=F.distanceTo(I)&&(P=I,A=F.distanceTo(I))}),P&&n(1,o=o.filter(N=>{const I=N.lngLat;return I.lng!=(P==null?void 0:P.lng)||I.lat!=(P==null?void 0:P.lat)}))}function p(){n(0,l=!1)}function $(){n(0,l=!0),n(1,o=[]),S()}function C(F){F.key==="Shift"&&(u=!0),F.key==="Escape"&&$()}function y(F){F.key==="Shift"&&(u=!1)}function T(){if(o.length<2){S();return}const F=o.map(j=>[j.lngLat.lng,j.lngLat.lat]);n(2,i=Kr(F,{})),i.properties&&n(2,i.properties.length=(ll(i)*1e3).toFixed(2),i),n(3,a=JSON.parse(JSON.stringify(i)))}function S(){n(2,i=void 0),n(3,a=xt())}Lt(()=>{t.on("click",f)}),sn(()=>{t.off("click",f)});function E(F,j){r.$$.not_equal(j.lngLat,F)&&(j.lngLat=F,n(1,o))}return[l,o,i,a,p,$,C,y,T,E]}class Xs extends U{constructor(e){super(),z(this,e,Vs,qs,W,{})}}function Ks(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ys(r){let e,n,t,l,o;return t=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ks]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("License: "),d(t.$$.fragment),l=w(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,u){_(i,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(m(t.$$.fragment,i),o=!0)},o(i){h(t.$$.fragment,i),o=!1},d(i){i&&g(e),v(t)}}}class Be extends U{constructor(e){super(),z(this,e,null,Ys,W,{})}}function qn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Vn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Xn(r){let e,n;return{c(){e=O("span"),n=w(` 
    `),Ce(e,"background",r[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,l){_(t,e,l),k(e,n)},p(t,l){l&1&&Ce(e,"background",t[5])},d(t){t&&g(e)}}}function Kn(r){let e,n=r[2]+"",t;return{c(){e=O("span"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&H(t,n)},d(l){l&&g(e)}}}function Js(r){let e,n,t,l=Ne(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Xn(Vn(r,l,s));let i=Ne(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Kn(qn(r,i,s));return{c(){e=O("div");for(let s=0;s<o.length;s+=1)o[s].c();n=L(),t=O("div");for(let s=0;s<u.length;s+=1)u[s].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(s,a){_(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);_(s,n,a),_(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=Ne(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Vn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Xn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=Ne(s[1]);let f;for(f=0;f<i.length;f+=1){const c=qn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Kn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:te,o:te,d(s){s&&(g(e),g(n),g(t)),Dt(o,s),Dt(u,s)}}}function Zs(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class ze extends U{constructor(e){super(),z(this,e,Zs,Js,W,{colorScale:0,limits:1})}}function Yn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Qs(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function xs(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ei(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ti(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ni(r){let e,n,t,l,o,i,u,s,a,f,c,p;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[xs]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ei]},$$scope:{ctx:r}}}),f=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ti]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("Car/van availability data is from the 2021 census, via "),d(t.$$.fragment),l=w(". Output area boundaries from "),d(o.$$.fragment),i=w("."),u=L(),s=O("p"),a=w("License: "),d(f.$$.fragment),c=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m($,C){_($,e,C),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_($,u,C),_($,s,C),k(s,a),b(f,s,null),k(s,c),p=!0},p($,C){const y={};C&65536&&(y.$$scope={dirty:C,ctx:$}),t.$set(y);const T={};C&65536&&(T.$$scope={dirty:C,ctx:$}),o.$set(T);const S={};C&65536&&(S.$$scope={dirty:C,ctx:$}),f.$set(S)},i($){p||(m(t.$$.fragment,$),m(o.$$.fragment,$),m(f.$$.fragment,$),p=!0)},o($){h(t.$$.fragment,$),h(o.$$.fragment,$),h(f.$$.fragment,$),p=!1},d($){$&&(g(e),g(u),g(s)),v(t),v(o),v(f)}}}function ri(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ni]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Jn(r){let e,n;return e=new ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function li(r){let e;return{c(){e=w("Average cars per household")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function oi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function si(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ii(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ai(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,C;return o=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[oi]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[si]},$$scope:{ctx:r}}}),p=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ii]},$$scope:{ctx:r}}}),{c(){e=O("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=O("p"),l=w("Car/van availability data is from the 2021 census, via "),d(o.$$.fragment),i=w(". Output area boundaries from "),d(u.$$.fragment),s=w("."),a=L(),f=O("p"),c=w("License: "),d(p.$$.fragment),$=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(y,T){_(y,e,T),_(y,n,T),_(y,t,T),k(t,l),b(o,t,null),k(t,i),b(u,t,null),k(t,s),_(y,a,T),_(y,f,T),k(f,c),b(p,f,null),k(f,$),C=!0},p(y,T){const S={};T&65536&&(S.$$scope={dirty:T,ctx:y}),o.$set(S);const E={};T&65536&&(E.$$scope={dirty:T,ctx:y}),u.$set(E);const F={};T&65536&&(F.$$scope={dirty:T,ctx:y}),p.$set(F)},i(y){C||(m(o.$$.fragment,y),m(u.$$.fragment,y),m(p.$$.fragment,y),C=!0)},o(y){h(o.$$.fragment,y),h(u.$$.fragment,y),h(p.$$.fragment,y),C=!1},d(y){y&&(g(e),g(n),g(t),g(a),g(f)),v(o),v(u),v(p)}}}function fi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ai]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Zn(r){let e,n;return e=new ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ui(r){let e;return{c(){e=w("Population density")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ci(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function $i(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function pi(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ci]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[$i]},$$scope:{ctx:r}}}),s=new Be({}),{c(){e=O("p"),n=w("Population density data is from the 2021 census, via "),d(t.$$.fragment),l=w(". Output area boundaries from "),d(o.$$.fragment),i=w("."),u=L(),d(s.$$.fragment)},m(f,c){_(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&65536&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const $={};c&65536&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){h(t.$$.fragment,f),h(o.$$.fragment,f),h(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(u)),v(t),v(o),v(s,f)}}}function mi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[pi]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Qn(r){let e,n,t,l;return t=new ze({props:{colorScale:r[4],limits:r[6]().map(ki)}}),{c(){e=O("p"),e.textContent="(people per square kilometres)",n=L(),d(t.$$.fragment)},m(o,i){_(o,e,i),_(o,n,i),b(t,o,i),l=!0},p:te,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){h(t.$$.fragment,o),l=!1},d(o){o&&(g(e),g(n)),v(t,o)}}}function _i(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=O("p"),n=w("There are "),t=O("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){_(a,e,f),k(e,n),k(e,t),k(t,o),k(e,i),k(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&H(o,l),f&8192&&u!==(u=a[14]+"")&&H(s,u)},d(a){a&&g(e)}}}function gi(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=O("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=O("b"),s=w(u),a=w(`
          cars`)},m(f,c){_(f,e,c),k(e,n),k(e,l),k(e,o),k(e,i),k(i,s),k(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&H(l,t),c&8200&&u!==(u=f[15]+"")&&H(s,u)},d(f){f&&g(e)}}}function hi(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=O("p"),n=O("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){_(f,e,c),k(e,n),k(n,l),k(n,o),k(e,i),k(e,s),k(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&H(l,t),c&8192&&u!==(u=f[14]+"")&&H(s,u)},d(f){f&&g(e)}}}function di(r){Yn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?hi:o[3]=="average_cars_per_household"?gi:_i}let t=n(r),l=t(r);return{c(){l.c(),e=be()},m(o,i){l.m(o,i),_(o,e,i)},p(o,i){Yn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&g(e),l.d(o)}}}function bi(r){let e,n;return e=new re({props:{$$slots:{default:[di,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vi(r){let e,n,t,l;const o=[B(Ke),{sourceLayer:Ke},{paint:{"fill-color":$e(["get",r[3]],r[6](),r[4]),"fill-opacity":q(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[bi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Me({props:i}),e.$on("click",r[5]);const u=[B(`${Ke}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Q(o,[f&0&&x(B(Ke)),f&0&&{sourceLayer:Ke},f&88&&{paint:{"fill-color":$e(["get",a[3]],a[6](),a[4]),"fill-opacity":q(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&8?Q(u,[f&0&&x(B(`${Ke}-outline`)),u[1],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function wi(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,C;function y(I){r[7](I)}let T={id:"percent_households_with_car",$$slots:{right:[ri],default:[Qs]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new le({props:T}),V.push(()=>K(e,"checked",y)),e.$on("change",r[8]);let S=r[3]=="percent_households_with_car"&&Jn(r);function E(I){r[9](I)}let F={id:"average_cars_per_household",$$slots:{right:[fi],default:[li]},$$scope:{ctx:r}};r[1]!==void 0&&(F.checked=r[1]),o=new le({props:F}),V.push(()=>K(o,"checked",E)),o.$on("change",r[10]);let j=r[3]=="average_cars_per_household"&&Zn(r);function A(I){r[11](I)}let P={id:"population_density",$$slots:{right:[mi],default:[ui]},$$scope:{ctx:r}};r[2]!==void 0&&(P.checked=r[2]),a=new le({props:P}),V.push(()=>K(a,"checked",A)),a.$on("change",r[12]);let N=r[3]=="population_density"&&Qn(r);return $=new ce({props:{url:`pmtiles://${fe()}/v1/${Ke}.pmtiles`,$$slots:{default:[vi]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),S&&S.c(),l=L(),d(o.$$.fragment),u=L(),j&&j.c(),s=L(),d(a.$$.fragment),c=L(),N&&N.c(),p=L(),d($.$$.fragment)},m(I,D){b(e,I,D),_(I,t,D),S&&S.m(I,D),_(I,l,D),b(o,I,D),_(I,u,D),j&&j.m(I,D),_(I,s,D),b(a,I,D),_(I,c,D),N&&N.m(I,D),_(I,p,D),b($,I,D),C=!0},p(I,[D]){const R={};D&65536&&(R.$$scope={dirty:D,ctx:I}),!n&&D&1&&(n=!0,R.checked=I[0],J(()=>n=!1)),e.$set(R),I[3]=="percent_households_with_car"?S?(S.p(I,D),D&8&&m(S,1)):(S=Jn(I),S.c(),m(S,1),S.m(l.parentNode,l)):S&&(ie(),h(S,1,1,()=>{S=null}),ae());const M={};D&65536&&(M.$$scope={dirty:D,ctx:I}),!i&&D&2&&(i=!0,M.checked=I[1],J(()=>i=!1)),o.$set(M),I[3]=="average_cars_per_household"?j?(j.p(I,D),D&8&&m(j,1)):(j=Zn(I),j.c(),m(j,1),j.m(s.parentNode,s)):j&&(ie(),h(j,1,1,()=>{j=null}),ae());const se={};D&65536&&(se.$$scope={dirty:D,ctx:I}),!f&&D&4&&(f=!0,se.checked=I[2],J(()=>f=!1)),a.$set(se),I[3]=="population_density"?N?(N.p(I,D),D&8&&m(N,1)):(N=Qn(I),N.c(),m(N,1),N.m(p.parentNode,p)):N&&(ie(),h(N,1,1,()=>{N=null}),ae());const ee={};D&65544&&(ee.$$scope={dirty:D,ctx:I}),$.$set(ee)},i(I){C||(m(e.$$.fragment,I),m(S),m(o.$$.fragment,I),m(j),m(a.$$.fragment,I),m(N),m($.$$.fragment,I),C=!0)},o(I){h(e.$$.fragment,I),h(S),h(o.$$.fragment,I),h(j),h(a.$$.fragment,I),h(N),h($.$$.fragment,I),C=!1},d(I){I&&(g(t),g(l),g(u),g(s),g(c),g(p)),v(e,I),S&&S.d(I),v(o,I),j&&j.d(I),v(a,I),N&&N.d(I),v($,I)}}}let Ke="census_output_areas";const ki=r=>r.toLocaleString();function yi(r,e,n){let t=G.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(T){let S=T.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${S}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${S}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function p(T){o=T,n(1,o)}const $=()=>{n(0,l=!1),n(2,i=!1)};function C(T){i=T,n(2,i)}const y=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,p,$,C,y]}class Si extends U{constructor(e){super(),z(this,e,yi,wi,W,{})}}function Ci(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Ti(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Li(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Ti]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=O("p"),n=w("Data from "),d(t.$$.fragment),l=w(", as of December 2022."),o=L(),d(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Oi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Li]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Ai(r){let e,n=r[3].name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function Pi(r){let e,n;return e=new re({props:{$$slots:{default:[Ai,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ei(r){let e,n,t,l;const o=[B(ot),{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Pi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Me({props:i}),e.$on("click",Ii);const u=[B(`${ot}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&x(B(ot)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Q(u,[f&0&&x(B(`${ot}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Ni(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ot,$$slots:{right:[Oi],default:[Ci]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>K(e,"checked",i)),l=new gt({props:{data:`${fe()}/v1/${ot}.geojson`,$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let ot="combined_authorities";function Ii(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Di(r,e,n){let t=G.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Fi extends U{constructor(e){super(),z(this,e,Di,Ni,W,{})}}function ji(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Mi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Bi(r){let e;return{c(){e=w(`here
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Hi(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Mi]},$$scope:{ctx:r}}}),o=new X({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Bi]},$$scope:{ctx:r}}}),s=new Be({}),{c(){e=O("p"),n=w("The 2019 English IMD scores come from "),d(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),d(o.$$.fragment),i=w("."),u=L(),d(s.$$.fragment)},m(f,c){_(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const $={};c&32&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){h(t.$$.fragment,f),h(o.$$.fragment,f),h(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(u)),v(t),v(o),v(s,f)}}}function Ri(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Hi]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function xn(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wi(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,p=r[4].rank.toLocaleString()+"",$,C;return{c(){e=O("p"),t=w(n),l=w(` has an IMD score of
        `),o=O("b"),u=w(i),s=L(),a=O("p"),f=w("Rank: "),c=O("b"),$=w(p),C=w(`
        / 32,844 LSOAs`)},m(y,T){_(y,e,T),k(e,t),k(e,l),k(e,o),k(o,u),_(y,s,T),_(y,a,T),k(a,f),k(a,c),k(c,$),k(a,C)},p(y,T){T&16&&n!==(n=y[4].LSOA11CD+"")&&H(t,n),T&16&&i!==(i=y[4].score+"")&&H(u,i),T&16&&p!==(p=y[4].rank.toLocaleString()+"")&&H($,p)},d(y){y&&(g(e),g(s),g(a))}}}function Gi(r){let e,n;return e=new re({props:{$$slots:{default:[Wi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ui(r){let e,n,t,l;const o=[B(We),{sourceLayer:We},{paint:{"fill-color":$e(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":q(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let i={$$slots:{default:[Gi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Me({props:i});const u=[B(`${We}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Q(o,[f&0&&x(B(We)),f&0&&{sourceLayer:We},f&6&&{paint:{"fill-color":$e(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":q(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&1?Q(u,[f&0&&x(B(`${We}-outline`)),u[1],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function zi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:We,$$slots:{right:[Ri],default:[ji]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>K(e,"checked",u));let a=r[0]&&xn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${We}.pmtiles`,$$slots:{default:[Ui]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),a&&a.c(),l=L(),d(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],J(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=xn(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),h(a,1,1,()=>{a=null}),ae());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let We="imd";function qi(r,e,n){let t=G.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Vi extends U{constructor(e){super(),z(this,e,qi,zi,W,{})}}function Xi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Ki(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Yi(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Ki]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=O("p"),n=w("Data from "),d(t.$$.fragment),l=w(", as of May 2023."),o=L(),d(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Ji(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Yi]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Zi(r){let e,n=r[3].name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function Qi(r){let e,n;return e=new re({props:{$$slots:{default:[Zi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xi(r){let e,n,t,l;const o=[B(st),{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Qi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Me({props:i}),e.$on("click",ta);const u=[B(`${st}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&x(B(st)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Q(u,[f&0&&x(B(`${st}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function ea(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:st,$$slots:{right:[Ji],default:[Xi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>K(e,"checked",i)),l=new gt({props:{data:`${fe()}/v1/${st}.geojson`,$$slots:{default:[xi]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let st="local_authority_districts";function ta(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function na(r,e,n){let t=G.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ra extends U{constructor(e){super(),z(this,e,na,ea,W,{})}}function la(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function oa(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function sa(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ia(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function aa(r){let e;return{c(){e=w("this map")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function fa(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ua(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,C,y,T,S,E,F,j,A,P;return t=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[oa]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[sa]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ia]},$$scope:{ctx:r}}}),$=new X({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[aa]},$$scope:{ctx:r}}}),E=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[fa]},$$scope:{ctx:r}}}),A=new Be({}),{c(){e=O("p"),n=w("LPAs may be a "),d(t.$$.fragment),l=w(", "),d(o.$$.fragment),i=w("y, or "),d(u.$$.fragment),s=w("."),a=L(),f=O("p"),c=O("strong"),p=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),d($.$$.fragment),C=w(" to get more details."),y=L(),T=O("p"),S=w("Data from ONS Geography via "),d(E.$$.fragment),F=w(", as of November 2022."),j=L(),d(A.$$.fragment)},m(N,I){_(N,e,I),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),b(u,e,null),k(e,s),_(N,a,I),_(N,f,I),k(f,c),k(c,p),b($,c,null),k(c,C),_(N,y,I),_(N,T,I),k(T,S),b(E,T,null),k(T,F),_(N,j,I),b(A,N,I),P=!0},p(N,I){const D={};I&16&&(D.$$scope={dirty:I,ctx:N}),t.$set(D);const R={};I&16&&(R.$$scope={dirty:I,ctx:N}),o.$set(R);const M={};I&16&&(M.$$scope={dirty:I,ctx:N}),u.$set(M);const se={};I&16&&(se.$$scope={dirty:I,ctx:N}),$.$set(se);const ee={};I&16&&(ee.$$scope={dirty:I,ctx:N}),E.$set(ee)},i(N){P||(m(t.$$.fragment,N),m(o.$$.fragment,N),m(u.$$.fragment,N),m($.$$.fragment,N),m(E.$$.fragment,N),m(A.$$.fragment,N),P=!0)},o(N){h(t.$$.fragment,N),h(o.$$.fragment,N),h(u.$$.fragment,N),h($.$$.fragment,N),h(E.$$.fragment,N),h(A.$$.fragment,N),P=!1},d(N){N&&(g(e),g(a),g(f),g(y),g(T),g(j)),v(t),v(o),v(u),v($),v(E),v(A,N)}}}function ca(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ua]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function $a(r){let e,n=r[3].name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function pa(r){let e,n;return e=new re({props:{$$slots:{default:[$a,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ma(r){let e,n,t,l;const o=[B(Le),{sourceLayer:Le},{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let i={$$slots:{default:[pa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Me({props:i});const u=[B(`${Le}-outline`),{sourceLayer:Le},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&x(B(Le)),f&0&&{sourceLayer:Le},f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Q(u,[f&0&&x(B(`${Le}-outline`)),f&0&&{sourceLayer:Le},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function _a(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Le,$$slots:{right:[ca],default:[la]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>K(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Le}.pmtiles`,$$slots:{default:[ma]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Le="local_planning_authorities";function ga(r,e,n){let t=G.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ha extends U{constructor(e){super(),z(this,e,ga,_a,W,{})}}function da(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function ba(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function va(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ba]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=O("p"),n=w("Data from "),d(t.$$.fragment),l=w(", as of May 2023."),o=L(),d(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function wa(r){let e,n,t;return n=new oe({props:{$$slots:{default:[va]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function ka(r){let e,n=r[3].Name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&H(t,n)},d(l){l&&g(e)}}}function ya(r){let e,n;return e=new re({props:{$$slots:{default:[ka,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sa(r){let e,n,t,l;const o=[B(Oe),{sourceLayer:Oe},{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ya]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Me({props:i}),e.$on("click",Ta);const u=[B(`${Oe}-outline`),{sourceLayer:Oe},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&x(B(Oe)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Q(u,[f&0&&x(B(`${Oe}-outline`)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Ca(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Oe,$$slots:{right:[wa],default:[da]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>K(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Oe}.pmtiles`,$$slots:{default:[Sa]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Oe="parliamentary_constituencies";function Ta(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function La(r,e,n){let t=G.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Oa extends U{constructor(e){super(),z(this,e,La,Ca,W,{})}}function Aa(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Pa(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ea(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Pa]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=O("p"),n=w("Data from "),d(t.$$.fragment),l=w(", as of May 2023."),o=L(),d(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Na(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ea]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Ia(r){let e,n=r[3].name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function Da(r){let e,n;return e=new re({props:{$$slots:{default:[Ia,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fa(r){let e,n,t,l;const o=[B(Ae),{sourceLayer:Ae},{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Da]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Me({props:i}),e.$on("click",Ma);const u=[B(`${Ae}-outline`),{sourceLayer:Ae},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&x(B(Ae)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Q(u,[f&0&&x(B(`${Ae}-outline`)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function ja(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ae,$$slots:{right:[Na],default:[Aa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>K(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ae}.pmtiles`,$$slots:{default:[Fa]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Ae="wards";function Ma(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Ba(r,e,n){let t=G.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ha extends U{constructor(e){super(),z(this,e,Ba,ja,W,{})}}function Ra(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Wa(r){let e,n,t,l;return t=new X({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ra]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("License: "),d(t.$$.fragment)},m(o,i){_(o,e,i),k(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){h(t.$$.fragment,o),l=!1},d(o){o&&g(e),v(t)}}}class qe extends U{constructor(e){super(),z(this,e,null,Wa,W,{})}}function Ga(r){let e,n,t;return e=new ge({props:{color:G.bus_route_with_lane}}),{c(){d(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Ua(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function za(r){let e,n,t,l,o,i,u,s,a;return o=new X({props:{href:"https://gtfs.org",$$slots:{default:[Ua]},$$scope:{ctx:r}}}),s=new qe({}),{c(){e=O("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=O("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),d(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=L(),d(s.$$.fragment)},m(f,c){_(f,e,c),_(f,n,c),_(f,t,c),k(t,l),b(o,t,null),k(t,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&8&&(p.$$scope={dirty:c,ctx:f}),o.$set(p)},i(f){a||(m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){h(o.$$.fragment,f),h(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(n),g(t),g(u)),v(o),v(s,f)}}}function qa(r){let e,n,t;return n=new oe({props:{$$slots:{default:[za]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Va(r){let e;return{c(){e=O("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Xa(r){let e;return{c(){e=O("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ka(r){let e;function n(o,i){return o[2].has_bus_lane?Xa:Va}let t=n(r),l=t(r);return{c(){l.c(),e=be()},m(o,i){l.m(o,i),_(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&g(e),l.d(o)}}}function Ya(r){let e,n;return e=new re({props:{$$slots:{default:[Ka,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ja(r){let e,n;const t=[B(it),{sourceLayer:it},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],G.bus_route_with_lane,G.bus_route_without_lane],"line-width":5,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[Ya]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Q(t,[i&0&&x(B(it)),i&0&&{sourceLayer:it},i&0&&{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],G.bus_route_with_lane,G.bus_route_without_lane],"line-width":5,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Za(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:it,$$slots:{right:[qa],default:[Ga]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>K(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${it}.pmtiles`,$$slots:{default:[Ja]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let it="bus_routes";function Qa(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class xa extends U{constructor(e){super(),z(this,e,Qa,Za,W,{})}}function er(r){const e=af(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function tr(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function ef(r){let e;return{c(){e=w("Cycle paths")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function tf(r){let e,n,t,l,o,i,u,s;return u=new qe({}),{c(){e=O("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=O("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=L(),o=O("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=L(),d(u.$$.fragment)},m(a,f){_(a,e,f),_(a,n,f),_(a,t,f),_(a,l,f),_(a,o,f),_(a,i,f),b(u,a,f),s=!0},p:te,i(a){s||(m(u.$$.fragment,a),s=!0)},o(a){h(u.$$.fragment,a),s=!1},d(a){a&&(g(e),g(n),g(t),g(l),g(o),g(i)),v(u,a)}}}function nf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function nr(r){let e,n,t=Ne(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=rr(tr(r,t,i));const o=i=>h(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=be()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);_(i,e,u),n=!0},p(i,u){if(u&2){t=Ne(i[1]);let s;for(s=0;s<t.length;s+=1){const a=tr(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=rr(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)h(l[u]);n=!1},d(i){i&&g(e),Dt(l,i)}}}function rr(r){let e,n,t,l=r[7]+"",o,i,u;return n=new ge({props:{color:r[8]}}),{c(){e=O("div"),d(n.$$.fragment),t=L(),o=w(l),i=L()},m(s,a){_(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p:te,i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){h(n.$$.fragment,s),u=!1},d(s){s&&g(e),v(n)}}}function rf(r){er(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,p,$=r[6]+"",C;return{c(){e=O("h2"),t=w(n),l=L(),o=O("p"),i=w("Direction: "),u=O("b"),a=L(),f=O("p"),c=w("Width: "),p=O("b"),C=w($)},m(y,T){_(y,e,T),k(e,t),_(y,l,T),_(y,o,T),k(o,i),k(o,u),u.innerHTML=s,_(y,a,T),_(y,f,T),k(f,c),k(f,p),k(p,C)},p(y,T){er(y),T&8&&n!==(n=y[4]+"")&&H(t,n),T&8&&s!==(s=y[5]+"")&&(u.innerHTML=s),T&8&&$!==($=y[6]+"")&&H(C,$)},d(y){y&&(g(e),g(l),g(o),g(a),g(f))}}}function lf(r){let e,n;return e=new re({props:{$$slots:{default:[rf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function of(r){let e,n;const t=[B(at),{sourceLayer:at},{paint:{"line-color":Zt(["get","kind"],{track:G.cycle_paths.track,lane:G.cycle_paths.lane,shared_use_segregated:G.cycle_paths.shared_use_segregated,shared_use_unsegregated:G.cycle_paths.shared_use_unsegregated},"red"),"line-width":De,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[lf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),e.$on("click",ff),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Q(t,[i&0&&x(B(at)),i&0&&{sourceLayer:at},i&0&&{paint:{"line-color":Zt(["get","kind"],{track:G.cycle_paths.track,lane:G.cycle_paths.lane,shared_use_segregated:G.cycle_paths.shared_use_segregated,shared_use_unsegregated:G.cycle_paths.shared_use_unsegregated},"red"),"line-width":De,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function sf(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:at,$$slots:{right:[nf],default:[ef]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>K(e,"checked",u));let a=r[0]&&nr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${at}.pmtiles`,$$slots:{default:[of]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),a&&a.c(),l=L(),d(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&2048&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],J(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=nr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),h(a,1,1,()=>{a=null}),ae());const $={};c&2049&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let at="cycle_paths";function af(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function ff(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function uf(r,e,n){let t=[["Separated tracks",G.cycle_paths.track],["Unprotected lanes",G.cycle_paths.lane],["Shared-use (segregated)",G.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",G.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class cf extends U{constructor(e){super(),z(this,e,uf,sf,W,{})}}function $f(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function pf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function mf(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[pf]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=O("p"),n=w("Data from the "),d(t.$$.fragment),l=w(", as of September 2021."),o=L(),d(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function _f(r){let e,n,t;return n=new oe({props:{$$slots:{default:[mf]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function gf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&H(t,n)},d(l){l&&g(e)}}}function hf(r){let e,n;return e=new re({props:{$$slots:{default:[gf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function df(r){let e,n;const t=[B(ft),{sourceLayer:ft},{manageHoverState:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[hf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&x(B(ft)),i&0&&{sourceLayer:ft},t[2],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function bf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ft,$$slots:{right:[_f],default:[$f]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>K(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${ft}.pmtiles`,$$slots:{default:[df]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let ft="mrn";function vf(r,e,n){let t=G.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class wf extends U{constructor(e){super(),z(this,e,vf,bf,W,{})}}function kf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function yf(r){let e;return{c(){e=w("the PCT website")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Sf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Cf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new X({props:{href:"https://www.pct.bike",$$slots:{default:[yf]},$$scope:{ctx:r}}}),a=new X({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Sf]},$$scope:{ctx:r}}}),{c(){e=O("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=O("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=L(),o=O("p"),i=w("See "),d(u.$$.fragment),s=w(" and "),d(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(p,$){_(p,e,$),_(p,n,$),_(p,t,$),_(p,l,$),_(p,o,$),k(o,i),b(u,o,null),k(o,s),b(a,o,null),k(o,f),c=!0},p(p,$){const C={};$&1024&&(C.$$scope={dirty:$,ctx:p}),u.$set(C);const y={};$&1024&&(y.$$scope={dirty:$,ctx:p}),a.$set(y)},i(p){c||(m(u.$$.fragment,p),m(a.$$.fragment,p),c=!0)},o(p){h(u.$$.fragment,p),h(a.$$.fragment,p),c=!1},d(p){p&&(g(e),g(n),g(t),g(l),g(o)),v(u),v(a)}}}function Tf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Cf]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function lr(r){let e,n,t,l,o,i,u,s;e=new ze({props:{colorScale:r[3],limits:r[4]}});function a($){r[7]($)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new dr({props:f}),V.push(()=>K(t,"value",a));function c($){r[8]($)}let p={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(p.value=r[1]),i=new Ft({props:p}),V.push(()=>K(i,"value",c)),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment),o=L(),d(i.$$.fragment)},m($,C){b(e,$,C),_($,n,C),b(t,$,C),_($,o,C),b(i,$,C),s=!0},p($,C){const y={};!l&&C&1&&(l=!0,y.value=$[0],J(()=>l=!1)),t.$set(y);const T={};!u&&C&2&&(u=!0,T.value=$[1],J(()=>u=!1)),i.$set(T)},i($){s||(m(e.$$.fragment,$),m(t.$$.fragment,$),m(i.$$.fragment,$),s=!0)},o($){h(e.$$.fragment,$),h(t.$$.fragment,$),h(i.$$.fragment,$),s=!1},d($){$&&(g(n),g(o)),v(e,$),v(t,$),v(i,$)}}}function Lf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new fn(!1),t=be(),e.a=t},m(l,o){e.m(n,l,o),_(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(g(t),e.d())}}}function Of(r){let e,n;return e=new re({props:{$$slots:{default:[Lf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Af(r){let e,n;const t=[B(Pe),{sourceLayer:Pe},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":De,"line-opacity":q(1,.5)}},{layout:{visibility:r[2]&&r[0]==Pe?"visible":"none"}}];let l={$$slots:{default:[Of]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Q(t,[i&0&&x(B(Pe)),i&0&&{sourceLayer:Pe},i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":De,"line-opacity":q(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Pe?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Pf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new fn(!1),t=be(),e.a=t},m(l,o){e.m(n,l,o),_(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(g(t),e.d())}}}function Ef(r){let e,n;return e=new re({props:{$$slots:{default:[Pf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nf(r){let e,n;const t=[B(Ye),{sourceLayer:Ye},{manageHoverState:!0},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":De,"line-opacity":q(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ye?"visible":"none"}}];let l={$$slots:{default:[Ef]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Q(t,[i&0&&x(B(Ye)),i&0&&{sourceLayer:Ye},t[2],i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":De,"line-opacity":q(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ye?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function If(r){let e,n,t,l,o,i,u,s;function a(p){r[6](p)}let f={id:Pe,$$slots:{right:[Tf],default:[kf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new le({props:f}),V.push(()=>K(e,"checked",a));let c=r[2]&&lr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Pe}.pmtiles`,$$slots:{default:[Af]},$$scope:{ctx:r}}}),u=new ce({props:{url:`pmtiles://${fe()}/v1/${Ye}.pmtiles`,$$slots:{default:[Nf]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),c&&c.c(),l=L(),d(o.$$.fragment),i=L(),d(u.$$.fragment)},m(p,$){b(e,p,$),_(p,t,$),c&&c.m(p,$),_(p,l,$),b(o,p,$),_(p,i,$),b(u,p,$),s=!0},p(p,[$]){const C={};$&1024&&(C.$$scope={dirty:$,ctx:p}),!n&&$&4&&(n=!0,C.checked=p[2],J(()=>n=!1)),e.$set(C),p[2]?c?(c.p(p,$),$&4&&m(c,1)):(c=lr(p),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(ie(),h(c,1,1,()=>{c=null}),ae());const y={};$&1031&&(y.$$scope={dirty:$,ctx:p}),o.$set(y);const T={};$&1031&&(T.$$scope={dirty:$,ctx:p}),u.$set(T)},i(p){s||(m(e.$$.fragment,p),m(c),m(o.$$.fragment,p),m(u.$$.fragment,p),s=!0)},o(p){h(e.$$.fragment,p),h(c),h(o.$$.fragment,p),h(u.$$.fragment,p),s=!1},d(p){p&&(g(t),g(l),g(i)),v(e,p),c&&c.d(p),v(o,p),v(u,p)}}}let Pe="pct_commute",Ye="pct_school";function Df(r,e,n){let t=G.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Pe,i="baseline",u=!1;function s(p){let $=p.baseline,C=p.gov_target,y=p.go_dutch,T=`<h2>Trip purpose: ${o==Pe?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${$.toLocaleString()}</b></p>`,$==0)T+=`<p>Government target (2025): <b>${C.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${y.toLocaleString()}</b></p>`;else{let S=(C/$).toFixed(1),E=(y/$).toFixed(1);T+=`<p>Government target (2025): ${C.toLocaleString()} (<b>${S}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${y.toLocaleString()} (<b>${E}x</b> of baseline)</p>`}return T}function a(p){u=p,n(2,u)}function f(p){o=p,n(0,o)}function c(p){i=p,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class Ff extends U{constructor(e){super(),z(this,e,Df,If,W,{})}}function jf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Mf(r){let e;return{c(){e=w("Basemap")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Bf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Hf(r){let e,n,t,l,o,i,u,s,a,f,c,p;return t=new X({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Mf]},$$scope:{ctx:r}}}),f=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("The average speed data is collected over a six-month period by "),d(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),i=O("p"),i.textContent="Data valid as of 1 September, 2023",u=L(),s=O("p"),a=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),d(f.$$.fragment),c=w(".")},m($,C){_($,e,C),k(e,n),b(t,e,null),k(e,l),_($,o,C),_($,i,C),_($,u,C),_($,s,C),k(s,a),b(f,s,null),k(s,c),p=!0},p($,C){const y={};C&256&&(y.$$scope={dirty:C,ctx:$}),t.$set(y);const T={};C&256&&(T.$$scope={dirty:C,ctx:$}),f.$set(T)},i($){p||(m(t.$$.fragment,$),m(f.$$.fragment,$),p=!0)},o($){h(t.$$.fragment,$),h(f.$$.fragment,$),p=!1},d($){$&&(g(e),g(o),g(i),g(u),g(s)),v(t),v(f)}}}function Rf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function or(r){let e,n,t,l,o;e=new ze({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new dr({props:u}),V.push(()=>K(t,"value",i)),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment)},m(s,a){b(e,s,a),_(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],J(()=>l=!1)),t.$set(f)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(t.$$.fragment,s),o=!1},d(s){s&&g(n),v(e,s),v(t,s)}}}function Wf(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,p=r[4][r[7].highest_description]+"",$,C;return{c(){e=O("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=L(),u=O("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),$=w(p),C=w(")")},m(y,T){_(y,e,T),k(e,n),k(e,l),k(e,o),_(y,i,T),_(y,u,T),k(u,s),k(u,f),k(u,c),k(u,$),k(u,C)},p(y,T){T&128&&t!==(t=y[7].indicative_mph+"")&&H(l,t),T&128&&a!==(a=y[7].highest_mph+"")&&H(f,a),T&128&&p!==(p=y[4][y[7].highest_description]+"")&&H($,p)},d(y){y&&(g(e),g(i),g(u))}}}function Gf(r){let e,n;return e=new re({props:{$$slots:{default:[Wf,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uf(r){let e,n;const t=[B(ut),{sourceLayer:ut},{manageHoverState:!0},{paint:{"line-color":$e(["get",r[0]],r[3],r[2]),"line-width":De,"line-opacity":q(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[Gf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Q(t,[i&0&&x(B(ut)),i&0&&{sourceLayer:ut},t[2],i&13&&{paint:{"line-color":$e(["get",o[0]],o[3],o[2]),"line-width":De,"line-opacity":q(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function zf(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ut,$$slots:{right:[Rf],default:[jf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),V.push(()=>K(e,"checked",u));let a=r[1]&&or(r);return o=new ce({props:{url:`pmtiles://${un()}/v1/${ut}.pmtiles`,$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),a&&a.c(),l=L(),d(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,p.checked=f[1],J(()=>n=!1)),e.$set(p),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=or(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),h(a,1,1,()=>{a=null}),ae());const $={};c&259&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="road_speeds";function qf(r,e,n){let t=G.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class Vf extends U{constructor(e){super(),z(this,e,qf,zf,W,{})}}function Xf(r){let e;return{c(){e=w("OS Road widths")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Kf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Yf(r){let e,n,t,l,o,i,u,s,a;return u=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Kf]},$$scope:{ctx:r}}}),{c(){e=O("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=O("p"),t.textContent="Data valid as of 1 September, 2023",l=L(),o=O("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),d(u.$$.fragment),s=w(".")},m(f,c){_(f,e,c),_(f,n,c),_(f,t,c),_(f,l,c),_(f,o,c),k(o,i),b(u,o,null),k(o,s),a=!0},p(f,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),u.$set(p)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){h(u.$$.fragment,f),a=!1},d(f){f&&(g(e),g(n),g(t),g(l),g(o)),v(u)}}}function Jf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Yf]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function sr(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[2]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zf(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",p,$;return{c(){e=O("p"),n=w("Average width: "),t=O("b"),o=w(l),i=w(`
        meters`),u=L(),s=O("p"),a=w("Minimum width: "),f=O("b"),p=w(c),$=w(`
        meters`)},m(C,y){_(C,e,y),k(e,n),k(e,t),k(t,o),k(e,i),_(C,u,y),_(C,s,y),k(s,a),k(s,f),k(f,p),k(s,$)},p(C,y){y&16&&l!==(l=C[4].average+"")&&H(o,l),y&16&&c!==(c=C[4].minimum+"")&&H(p,c)},d(C){C&&(g(e),g(u),g(s))}}}function Qf(r){let e,n;return e=new re({props:{$$slots:{default:[Zf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xf(r){let e,n;const t=[B(ct),{sourceLayer:ct},{manageHoverState:!0},{paint:{"line-color":$e(["get","average"],r[2],r[1]),"line-width":De,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Qf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Q(t,[i&0&&x(B(ct)),i&0&&{sourceLayer:ct},t[2],i&6&&{paint:{"line-color":$e(["get","average"],o[2],o[1]),"line-width":De,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function eu(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ct,$$slots:{right:[Jf],default:[Xf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>K(e,"checked",u));let a=r[0]&&sr(r);return o=new ce({props:{url:`pmtiles://${un()}/v1/${ct}.pmtiles`,$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),a&&a.c(),l=L(),d(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],J(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=sr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),h(a,1,1,()=>{a=null}),ae());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ct="road_widths";function tu(r,e,n){let t=G.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class nu extends U{constructor(e){super(),z(this,e,tu,eu,W,{})}}function ru(r){let e,n,t;return{c(){e=O("input"),Y(e,"class","govuk-file-upload"),Y(e,"id","load-criticals"),Y(e,"type","file")},m(l,o){_(l,e,o),r[7](e),n||(t=_t(e,"change",r[5]),n=!0)},p:te,d(l){l&&g(e),r[7](null),n=!1,t()}}}function ir(r){let e,n;return e=new Ot({props:{small:!0,$$slots:{default:[ou]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lu(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new ge({props:{color:wt}}),{c(){d(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),_(u,n,s),_(u,l,s),_(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&H(l,t)},i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){h(e.$$.fragment,u),i=!1},d(u){u&&(g(n),g(l),g(o)),v(e,u)}}}function ou(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[lu]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),V.push(()=>K(e,"checked",l)),{c(){d(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function su(r){let e,n,t,l,o,i;e=new hr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[ru]},$$scope:{ctx:r}}}),t=new br({props:{errorMessage:r[3]}});let u=r[2]>0&&ir(r);return{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment),l=L(),u&&u.c(),o=be()},m(s,a){b(e,s,a),_(s,n,a),b(t,s,a),_(s,l,a),u&&u.m(s,a),_(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&m(u,1)):(u=ir(s),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(ie(),h(u,1,1,()=>{u=null}),ae())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(u),i=!0)},o(s){h(e.$$.fragment,s),h(t.$$.fragment,s),h(u),i=!1},d(s){s&&(g(n),g(l),g(o)),v(e,s),v(t,s),u&&u.d(s)}}}function iu(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,p,$,C,y=r[10].notes+"",T,S,E,F,j,A,P,N=r[10].id+"",I,D,R,M,se,ee=(r[10].inspector??"???")+"",ve,ht,he,Qe=r[10].submission_time+"",dt,xe,pe,bt,Fe,He=r[10].scheme_reference+"",Ve,vt,et,Xe=r[10].current_design_stage+"",tt;return{c(){e=O("div"),n=O("h2"),l=w(t),o=L(),i=O("p"),u=O("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=L(),p=O("p"),$=O("u"),$.textContent="Notes",C=w(`
          : `),T=w(y),S=L(),E=O("hr"),F=L(),j=O("p"),A=w("Critical issue ID: "),P=O("b"),I=w(N),D=L(),R=O("p"),M=w("Submitted by "),se=O("b"),ve=w(ee),ht=w(`
          at
          `),he=O("b"),dt=w(Qe),xe=L(),pe=O("p"),bt=w("For scheme "),Fe=O("b"),Ve=w(He),vt=w(`
          in stage
          `),et=O("b"),tt=w(Xe),Ce(e,"max-width","30vw")},m(de,Te){_(de,e,Te),k(e,n),k(n,l),k(e,o),k(e,i),k(i,u),k(i,s),k(i,f),k(e,c),k(e,p),k(p,$),k(p,C),k(p,T),k(e,S),k(e,E),k(e,F),k(e,j),k(j,A),k(j,P),k(P,I),k(e,D),k(e,R),k(R,M),k(R,se),k(se,ve),k(R,ht),k(R,he),k(he,dt),k(e,xe),k(e,pe),k(pe,bt),k(pe,Fe),k(Fe,Ve),k(pe,vt),k(pe,et),k(et,tt)},p(de,Te){Te&1024&&t!==(t=de[10].critical_type+"")&&H(l,t),Te&1024&&a!==(a=de[10].location_description+"")&&H(f,a),Te&1024&&y!==(y=de[10].notes+"")&&H(T,y),Te&1024&&N!==(N=de[10].id+"")&&H(I,N),Te&1024&&ee!==(ee=(de[10].inspector??"???")+"")&&H(ve,ee),Te&1024&&Qe!==(Qe=de[10].submission_time+"")&&H(dt,Qe),Te&1024&&He!==(He=de[10].scheme_reference+"")&&H(Ve,He),Te&1024&&Xe!==(Xe=de[10].current_design_stage+"")&&H(tt,Xe)},d(de){de&&g(e)}}}function au(r){let e,n;return e=new re({props:{$$slots:{default:[iu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fu(r){let e,n,t,l,o,i;const u=[B(`${Ge}-clusters`),{applyToClusters:!0},{paint:{"circle-color":wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let $=0;$<u.length;$+=1)s=Z(s,u[$]);e=new Ue({props:s}),e.$on("click",r[6]);const a=[B(`${Ge}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let $=0;$<a.length;$+=1)f=Z(f,a[$]);t=new hl({props:f});const c=[B(`${Ge}-points`),{applyToClusters:!1},{manageHoverState:!0},{paint:{"circle-color":wt,"circle-opacity":q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let p={$$slots:{default:[au]},$$scope:{ctx:r}};for(let $=0;$<c.length;$+=1)p=Z(p,c[$]);return o=new Ue({props:p}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment),l=L(),d(o.$$.fragment)},m($,C){b(e,$,C),_($,n,C),b(t,$,C),_($,l,C),b(o,$,C),i=!0},p($,C){const y=C&2?Q(u,[C&0&&x(B(`${Ge}-clusters`)),u[1],C&0&&{paint:{"circle-color":wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},C&2&&{layout:{visibility:$[1]?"visible":"none"}},u[4]]):{};e.$set(y);const T=C&2?Q(a,[C&0&&x(B(`${Ge}-counts`)),a[1],C&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:$[1]?"visible":"none"}}]):{};t.$set(T);const S=C&2?Q(c,[C&0&&x(B(`${Ge}-points`)),c[1],c[2],C&0&&{paint:{"circle-color":wt,"circle-opacity":q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},C&2&&{layout:{visibility:$[1]?"visible":"none"}}]):{};C&2048&&(S.$$scope={dirty:C,ctx:$}),o.$set(S)},i($){i||(m(e.$$.fragment,$),m(t.$$.fragment,$),m(o.$$.fragment,$),i=!0)},o($){h(e.$$.fragment,$),h(t.$$.fragment,$),h(o.$$.fragment,$),i=!1},d($){$&&(g(n),g(l)),v(e,$),v(t,$),v(o,$)}}}function uu(r){let e,n,t,l;return e=new ye({props:{label:"Critical Issues",$$slots:{default:[su]},$$scope:{ctx:r}}}),t=new gt({props:{id:Ge,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[fu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),h(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}let Ge="criticals",wt="red";function cu(r,e,n){let t;je(r,Tt,$=>n(9,t=$));let l,o=!0,i=0,u="",s=xt();async function a($){try{n(4,s=await Cs(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(C){n(3,u=`The file you loaded is broken: ${C}`)}}function f($){t.getSource(Ge).getClusterExpansionZoom($.detail.features[0].properties.cluster_id,(C,y)=>{C||t.easeTo({center:$.detail.features[0].geometry.coordinates,zoom:y})})}function c($){V[$?"unshift":"push"](()=>{l=$,n(0,l)})}function p($){o=$,n(1,o)}return[l,o,i,u,s,a,f,c,p]}class $u extends U{constructor(e){super(),z(this,e,cu,uu,W,{})}}function pu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function mu(r){let e;return{c(){e=w("crossing")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function _u(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[mu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=O("p"),n=w("This shows "),d(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),d(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function gu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[_u]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function hu(r){let e,n=ar(r[3])+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=ar(l[3])+"")&&H(t,n)},d(l){l&&g(e)}}}function du(r){let e,n;return e=new re({props:{$$slots:{default:[hu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bu(r){let e,n;const t=[B($t),{sourceLayer:$t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let l={$$slots:{default:[du]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ue({props:l}),e.$on("click",wu),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&x(B($t)),i&0&&{sourceLayer:$t},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:$t,$$slots:{right:[gu],default:[pu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>K(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${$t}.pmtiles`,$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let $t="crossings";function ar(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function wu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function ku(r,e,n){let t=G.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class yu extends U{constructor(e){super(),z(this,e,ku,vu,W,{})}}function Su(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Cu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Tu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Cu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=O("p"),n=w("Cycle parking, according to "),d(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),d(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Lu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Ou(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=O("p"),n=w("Capacity: "),t=O("b"),o=w(l)},m(i,u){_(i,e,u),k(e,n),k(e,t),k(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&H(o,l)},d(i){i&&g(e)}}}function Au(r){let e,n;return e=new re({props:{$$slots:{default:[Ou,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pu(r){let e,n;const t=[B(pt),{sourceLayer:pt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[Au]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&x(B(pt)),i&0&&{sourceLayer:pt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Eu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:pt,$$slots:{right:[Lu],default:[Su]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>K(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${pt}.pmtiles`,$$slots:{default:[Pu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let pt="cycle_parking";function Nu(r,e,n){let t=G.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Iu extends U{constructor(e){super(),z(this,e,Nu,Eu,W,{})}}function Du(r){let e,n,t,l;return e=new ge({props:{color:r[4]}}),{c(){d(e.$$.fragment),n=L(),t=w(r[2])},m(o,i){b(e,o,i),_(o,n,i),_(o,t,i),l=!0},p(o,i){(!l||i&4)&&H(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),l=!1},d(o){o&&(g(n),g(t)),v(e,o)}}}function Fu(r){let e;const n=r[5].default,t=Rt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Wt(t,n,l,l[7],e?Ut(n,l[7],o,null):Gt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){h(t,l),e=!1},d(l){t&&t.d(l)}}}function ju(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Mu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&H(t,n)},d(l){l&&g(e)}}}function Bu(r){let e,n;return e=new re({props:{$$slots:{default:[Mu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hu(r){let e,n;const t=[B(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":q(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[Bu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Me({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Q(t,[i&1&&x(B(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":q(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ru(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[ju],default:[Du]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),V.push(()=>K(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Hu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],J(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${fe()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}function Wu(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=G[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class $n extends U{constructor(e){super(),z(this,e,Wu,Ru,W,{name:0,singularNoun:1,pluralNoun:2})}}function Gu(r){let e;return{c(){e=w("hospital")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Uu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Gu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=O("p"),n=w("This shows "),d(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),d(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function zu(r){let e,n;return e=new $n({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class qu extends U{constructor(e){super(),z(this,e,null,zu,W,{})}}function Vu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Xu(r){let e;return{c(){e=w("railway station")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ku(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Xu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=O("p"),n=w("This shows "),d(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),d(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Yu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ku]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Ju(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&H(t,n)},d(l){l&&g(e)}}}function Zu(r){let e,n;return e=new re({props:{$$slots:{default:[Ju,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qu(r){let e,n;const t=[B(Ht),{paint:{"circle-color":r[1],"circle-radius":Mt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Zu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&x(B(Ht)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Mt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function xu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ht,$$slots:{right:[Yu],default:[Vu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>K(e,"checked",i)),l=new gt({props:{data:`${fe()}/v1/${Ht}.geojson`,$$slots:{default:[Qu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Ht="railway_stations";function ec(r,e,n){let t=G.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class tc extends U{constructor(e){super(),z(this,e,ec,xu,W,{})}}function nc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function rc(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[nc]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=O("p"),n=w("This shows "),d(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=L(),d(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function lc(r){let e,n;return e=new $n({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class oc extends U{constructor(e){super(),z(this,e,null,lc,W,{})}}function sc(r){let e;return{c(){e=w("sports pitches")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ic(r){let e;return{c(){e=w("sports centres")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ac(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[sc]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[ic]},$$scope:{ctx:r}}}),s=new qe({}),{c(){e=O("p"),n=w("This shows "),d(t.$$.fragment),l=w(" and "),d(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=L(),d(s.$$.fragment)},m(f,c){_(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const $={};c&1&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){h(t.$$.fragment,f),h(o.$$.fragment,f),h(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(u)),v(t),v(o),v(s,f)}}}function fc(r){let e,n;return e=new $n({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[ac]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class uc extends U{constructor(e){super(),z(this,e,null,fc,W,{})}}function cc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function $c(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function pc(r){let e;return{c(){e=w("methodology")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function mc(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new X({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[$c]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[pc]},$$scope:{ctx:r}}}),f=new Be({}),{c(){e=O("p"),n=w("2022 AADF (annual average daily flow) data from "),d(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),d(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=L(),s=O("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=L(),d(f.$$.fragment)},m(p,$){_(p,e,$),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_(p,u,$),_(p,s,$),_(p,a,$),b(f,p,$),c=!0},p(p,$){const C={};$&64&&(C.$$scope={dirty:$,ctx:p}),t.$set(C);const y={};$&64&&(y.$$scope={dirty:$,ctx:p}),o.$set(y)},i(p){c||(m(t.$$.fragment,p),m(o.$$.fragment,p),m(f.$$.fragment,p),c=!0)},o(p){h(t.$$.fragment,p),h(o.$$.fragment,p),h(f.$$.fragment,p),c=!1},d(p){p&&(g(e),g(u),g(s),g(a)),v(t),v(o),v(f,p)}}}function _c(r){let e,n,t;return n=new oe({props:{$$slots:{default:[mc]},$$scope:{ctx:r}}}),{c(){e=O("span"),d(n.$$.fragment),Y(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function fr(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[3]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,p,$,C=r[5].pedal_cycles_2022.toLocaleString()+"",y,T,S,E,F,j=r[5].method+"",A;return{c(){e=O("h2"),t=w(n),l=L(),o=O("p"),i=w("Total motor vehicles (2022 AADF): "),u=O("b"),a=w(s),f=L(),c=O("p"),p=w("Total pedal cycles (2022 AADF): "),$=O("b"),y=w(C),T=L(),S=O("p"),E=w("Count method: "),F=O("b"),A=w(j)},m(P,N){_(P,e,N),k(e,t),_(P,l,N),_(P,o,N),k(o,i),k(o,u),k(u,a),_(P,f,N),_(P,c,N),k(c,p),k(c,$),k($,y),_(P,T,N),_(P,S,N),k(S,E),k(S,F),k(F,A)},p(P,N){N&32&&n!==(n=P[5].location+"")&&H(t,n),N&32&&s!==(s=P[5].motor_vehicles_2022.toLocaleString()+"")&&H(a,s),N&32&&C!==(C=P[5].pedal_cycles_2022.toLocaleString()+"")&&H(y,C),N&32&&j!==(j=P[5].method+"")&&H(A,j)},d(P){P&&(g(e),g(l),g(o),g(f),g(c),g(T),g(S))}}}function hc(r){let e,n;return e=new re({props:{$$slots:{default:[gc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dc(r){let e,n;const t=[B(mt),{sourceLayer:mt},{paint:{"circle-color":$e(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let l={$$slots:{default:[hc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ue({props:l}),e.$on("click",vc),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Q(t,[i&0&&x(B(mt)),i&0&&{sourceLayer:mt},i&6&&{paint:{"circle-color":$e(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function bc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:mt,$$slots:{right:[_c],default:[cc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>K(e,"checked",u));let a=r[0]&&fr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${mt}.pmtiles`,$$slots:{default:[dc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=L(),a&&a.c(),l=L(),d(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&64&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],J(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=fr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),h(a,1,1,()=>{a=null}),ae());const $={};c&65&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let mt="vehicle_counts";function vc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function wc(r,e,n){let t=G.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class kc extends U{constructor(e){super(),z(this,e,wc,bc,W,{})}}function yc(r){let e,n,t,l,o,i,u,s;return e=new oc({}),t=new qu({}),o=new uc({}),u=new tc({}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment),l=L(),d(o.$$.fragment),i=L(),d(u.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),_(a,l,f),b(o,a,f),_(a,i,f),b(u,a,f),s=!0},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),s=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),h(o.$$.fragment,a),h(u.$$.fragment,a),s=!1},d(a){a&&(g(n),g(l),g(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Sc(r){let e,n;return e=new Ot({props:{small:!0,$$slots:{default:[yc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cc(r){let e,n,t,l,o,i,u,s,a,f;return e=new cf({}),t=new wf({}),o=new xa({}),u=new Iu({}),a=new yu({}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment),l=L(),d(o.$$.fragment),i=L(),d(u.$$.fragment),s=L(),d(a.$$.fragment)},m(c,p){b(e,c,p),_(c,n,p),b(t,c,p),_(c,l,p),b(o,c,p),_(c,i,p),b(u,c,p),_(c,s,p),b(a,c,p),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){h(e.$$.fragment,c),h(t.$$.fragment,c),h(o.$$.fragment,c),h(u.$$.fragment,c),h(a.$$.fragment,c),f=!1},d(c){c&&(g(n),g(l),g(i),g(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Tc(r){let e,n;return e=new Ot({props:{small:!0,$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Oa({}),t=new Ha({}),o=new Fi({}),u=new ra({}),a=new ha({}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment),l=L(),d(o.$$.fragment),i=L(),d(u.$$.fragment),s=L(),d(a.$$.fragment)},m(c,p){b(e,c,p),_(c,n,p),b(t,c,p),_(c,l,p),b(o,c,p),_(c,i,p),b(u,c,p),_(c,s,p),b(a,c,p),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){h(e.$$.fragment,c),h(t.$$.fragment,c),h(o.$$.fragment,c),h(u.$$.fragment,c),h(a.$$.fragment,c),f=!1},d(c){c&&(g(n),g(l),g(i),g(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Oc(r){let e,n;return e=new Ot({props:{small:!0,$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ac(r){let e,n,t,l;return e=new Si({}),t=new Vi({}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),h(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Pc(r){let e,n,t,l;return e=new nu({}),t=new Vf({}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),h(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Ec(r){let e,n,t,l,o=an()=="Private (development)",i,u;e=new kc({}),t=new Ff({});let s=o&&Pc();return{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment),l=L(),s&&s.c(),i=be()},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),_(a,l,f),s&&s.m(a,f),_(a,i,f),u=!0},p:te,i(a){u||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(s),u=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),h(s),u=!1},d(a){a&&(g(n),g(l),g(i)),v(e,a),v(t,a),s&&s.d(a)}}}function Nc(r){let e,n,t,l,o;function i(s){r[4](s)}let u={displayEnableButton:!0};return r[1]!==void 0&&(u.isInactive=r[1]),e=new tl({props:u}),r[3](e),V.push(()=>K(e,"isInactive",i)),l=new Xs({}),{c(){d(e.$$.fragment),t=L(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&2&&(n=!0,f.isInactive=s[1],J(()=>n=!1)),e.$set(f)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),r[3](null),v(e,s),v(l,s)}}}function Ic(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,C,y,T;return e=new $u({}),t=new ye({props:{label:"Trip generators",$$slots:{default:[Sc]},$$scope:{ctx:r}}}),o=new ye({props:{label:"Existing infrastructure",$$slots:{default:[Tc]},$$scope:{ctx:r}}}),u=new ye({props:{label:"Boundaries",$$slots:{default:[Oc]},$$scope:{ctx:r}}}),a=new ye({props:{label:"Census",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),c=new ye({props:{label:"Other",$$slots:{default:[Ec]},$$scope:{ctx:r}}}),$=new ye({props:{label:"Tools",$$slots:{default:[Nc]},$$scope:{ctx:r}}}),y=new el({props:{disabled:!r[1]}}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment),l=L(),d(o.$$.fragment),i=L(),d(u.$$.fragment),s=L(),d(a.$$.fragment),f=L(),d(c.$$.fragment),p=L(),d($.$$.fragment),C=L(),d(y.$$.fragment)},m(S,E){b(e,S,E),_(S,n,E),b(t,S,E),_(S,l,E),b(o,S,E),_(S,i,E),b(u,S,E),_(S,s,E),b(a,S,E),_(S,f,E),b(c,S,E),_(S,p,E),b($,S,E),_(S,C,E),b(y,S,E),T=!0},p(S,E){const F={};E&32&&(F.$$scope={dirty:E,ctx:S}),t.$set(F);const j={};E&32&&(j.$$scope={dirty:E,ctx:S}),o.$set(j);const A={};E&32&&(A.$$scope={dirty:E,ctx:S}),u.$set(A);const P={};E&32&&(P.$$scope={dirty:E,ctx:S}),a.$set(P);const N={};E&32&&(N.$$scope={dirty:E,ctx:S}),c.$set(N);const I={};E&35&&(I.$$scope={dirty:E,ctx:S}),$.$set(I);const D={};E&2&&(D.disabled=!S[1]),y.$set(D)},i(S){T||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(o.$$.fragment,S),m(u.$$.fragment,S),m(a.$$.fragment,S),m(c.$$.fragment,S),m($.$$.fragment,S),m(y.$$.fragment,S),T=!0)},o(S){h(e.$$.fragment,S),h(t.$$.fragment,S),h(o.$$.fragment,S),h(u.$$.fragment,S),h(a.$$.fragment,S),h(c.$$.fragment,S),h($.$$.fragment,S),h(y.$$.fragment,S),T=!1},d(S){S&&(g(n),g(l),g(i),g(s),g(f),g(p),g(C)),v(e,S),v(t,S),v(o,S),v(u,S),v(a,S),v(c,S),v($,S),v(y,S)}}}function Dc(r){let e,n,t,l;return e=new ye({props:{label:"Layers",open:!0,$$slots:{default:[Ic]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0,t||(l=_t(window,"keydown",r[2]),t=!0)},p(o,[i]){const u={};i&35&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o),t=!1,l()}}}function Fc(r,e,n){let t;je(r,hn,s=>n(1,t=s));let l;function o(s){!t&&s.key=="Escape"&&(l.disableStreetView(),s.preventDefault())}function i(s){V[s?"unshift":"push"](()=>{l=s,n(0,l)})}function u(s){t=s,hn.set(t)}return[l,t,o,i,u]}class jc extends U{constructor(e){super(),z(this,e,Fc,Dc,W,{})}}function Mc(r,e,n){let{loadFile:t}=e;return Lt(async()=>{let o=await(await fetch(`${un()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class Bc extends U{constructor(e){super(),z(this,e,Mc,null,W,{loadFile:0})}}function Hc(r){let e;return{c(){e=w("Show on map")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Rc(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Wc(r){let e,n,t=r[0].authority_or_region+"",l,o,i,u,s=r[0].capital_scheme_id+"",a,f,c,p,$=r[0].funding_programme+"",C,y,T,S,E,F,j;return S=new yt({props:{$$slots:{default:[Hc]},$$scope:{ctx:r}}}),S.$on("click",r[3]),F=new yt({props:{disabled:r[1],title:r[2],$$slots:{default:[Rc]},$$scope:{ctx:r}}}),F.$on("click",r[4]),{c(){e=O("p"),n=w("Authority or region: "),l=w(t),o=L(),i=O("p"),u=w("Capital scheme ID: "),a=w(s),f=L(),c=O("p"),p=w("Funding programme: "),C=w($),y=L(),T=O("div"),d(S.$$.fragment),E=L(),d(F.$$.fragment),Y(T,"class","govuk-button-group")},m(A,P){_(A,e,P),k(e,n),k(e,l),_(A,o,P),_(A,i,P),k(i,u),k(i,a),_(A,f,P),_(A,c,P),k(c,p),k(c,C),_(A,y,P),_(A,T,P),b(S,T,null),k(T,E),b(F,T,null),j=!0},p(A,P){(!j||P&1)&&t!==(t=A[0].authority_or_region+"")&&H(l,t),(!j||P&1)&&s!==(s=A[0].capital_scheme_id+"")&&H(a,s),(!j||P&1)&&$!==($=A[0].funding_programme+"")&&H(C,$);const N={};P&256&&(N.$$scope={dirty:P,ctx:A}),S.$set(N);const I={};P&256&&(I.$$scope={dirty:P,ctx:A}),F.$set(I)},i(A){j||(m(S.$$.fragment,A),m(F.$$.fragment,A),j=!0)},o(A){h(S.$$.fragment,A),h(F.$$.fragment,A),j=!1},d(A){A&&(g(e),g(o),g(i),g(f),g(c),g(y),g(T)),v(S),v(F)}}}function Gc(r){let e,n;return e=new ye({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),l&257&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uc(r,e,n){let t;je(r,Tt,c=>n(7,t=c));let{schemesGj:l}=e,{scheme:o}=e,{authorityNames:i}=e,u=!i.has(o.authority_or_region),s=u?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function a(){let c={type:"FeatureCollection",features:l.features.filter(p=>p.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(Yr(c),{padding:20,animate:!1})}function f(){let c={type:"FeatureCollection",features:l.features.filter($=>$.properties.scheme_reference==o.scheme_reference)},p=o.authority_or_region;window.localStorage.setItem(p,JSON.stringify(c)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return r.$$set=c=>{"schemesGj"in c&&n(5,l=c.schemesGj),"scheme"in c&&n(0,o=c.scheme),"authorityNames"in c&&n(6,i=c.authorityNames)},[o,u,s,a,f,l,i]}class zc extends U{constructor(e){super(),z(this,e,Uc,Gc,W,{schemesGj:5,scheme:0,authorityNames:6})}}const qc=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function ur(r){let e,n,t=dn(r[0].length_meters)+"",l;return{c(){e=O("p"),n=w("Length: "),l=w(t)},m(o,i){_(o,e,i),k(e,n),k(e,l)},p(o,i){i&1&&t!==(t=dn(o[0].length_meters)+"")&&H(l,t)},d(o){o&&g(e)}}}function cr(r){let e,n=r[1](r[0].description)+"";return{c(){e=O("p")},m(t,l){_(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&g(e)}}}function Vc(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,p=r[0].scheme_reference+"",$,C,y,T=r[0].length_meters&&ur(r),S=r[0].description&&cr(r);return{c(){e=O("div"),n=O("h2"),t=new fn(!1),o=w(" ("),u=w(i),s=w(")"),a=L(),f=O("p"),c=w("Scheme reference: "),$=w(p),C=L(),T&&T.c(),y=L(),S&&S.c(),t.a=o,Ce(e,"max-width","30vw")},m(E,F){_(E,e,F),k(e,n),t.m(l,n),k(n,o),k(n,u),k(n,s),k(e,a),k(e,f),k(f,c),k(f,$),k(e,C),T&&T.m(e,null),k(e,y),S&&S.m(e,null)},p(E,[F]){F&1&&l!==(l=E[1](E[0].name)+"")&&t.p(l),F&1&&i!==(i=E[0].intervention_type+"")&&H(u,i),F&1&&p!==(p=E[0].scheme_reference+"")&&H($,p),E[0].length_meters?T?T.p(E,F):(T=ur(E),T.c(),T.m(e,y)):T&&(T.d(1),T=null),E[0].description?S?S.p(E,F):(S=cr(E),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:te,o:te,d(E){E&&g(e),T&&T.d(),S&&S.d()}}}function Xc(r,e,n){let{props:t}=e,{filterText:l}=e;function o(i){return l?i.replace(new RegExp(l,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,l=i.filterText)},[t,o,l]}class pn extends U{constructor(e){super(),z(this,e,Xc,Vc,W,{props:0,filterText:2})}}function Kc(r){let e,n;return e=new pn({props:{props:r[7],filterText:r[1]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yc(r){let e,n;return e=new re({props:{$$slots:{default:[Kc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jc(r){let e,n;return e=new pn({props:{props:r[7],filterText:r[1]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zc(r){let e,n;return e=new re({props:{$$slots:{default:[Jc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qc(r){let e,n;return e=new pn({props:{props:r[7],filterText:r[1]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xc(r){let e,n;return e=new re({props:{$$slots:{default:[Qc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function e$(r){let e,n,t,l,o,i,u,s,a,f;const c=[B("interventions-points"),{filter:["all",bn,r[4],r[5]]},{manageHoverState:!0},{paint:{"circle-color":r[3],"circle-radius":Mt,"circle-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let p={$$slots:{default:[Yc]},$$scope:{ctx:r}};for(let A=0;A<c.length;A+=1)p=Z(p,c[A]);e=new Ue({props:p});const $=[B("interventions-lines"),{filter:["all",vn,r[4]]},{manageHoverState:!0},{paint:{"line-color":r[3],"line-width":rt,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let C={$$slots:{default:[Zc]},$$scope:{ctx:r}};for(let A=0;A<$.length;A+=1)C=Z(C,$[A]);t=new ue({props:C});const y=[B("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*rt,"circle-opacity":0,"circle-stroke-color":jt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let A=0;A<y.length;A+=1)T=Z(T,y[A]);o=new Ue({props:T});const S=[B("interventions-polygons"),{filter:["all",Et,r[4]]},{manageHoverState:!0},{paint:{"fill-color":r[3],"fill-opacity":q(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let E={$$slots:{default:[xc]},$$scope:{ctx:r}};for(let A=0;A<S.length;A+=1)E=Z(E,S[A]);u=new Me({props:E});const F=[B("interventions-polygons-outlines"),{filter:["all",Et,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*rt}},{layout:{visibility:r[0]?"visible":"none"}}];let j={};for(let A=0;A<F.length;A+=1)j=Z(j,F[A]);return a=new ue({props:j}),{c(){d(e.$$.fragment),n=L(),d(t.$$.fragment),l=L(),d(o.$$.fragment),i=L(),d(u.$$.fragment),s=L(),d(a.$$.fragment)},m(A,P){b(e,A,P),_(A,n,P),b(t,A,P),_(A,l,P),b(o,A,P),_(A,i,P),b(u,A,P),_(A,s,P),b(a,A,P),f=!0},p(A,P){const N=P&57?Q(c,[P&0&&x(B("interventions-points")),P&48&&{filter:["all",bn,A[4],A[5]]},c[2],P&8&&{paint:{"circle-color":A[3],"circle-radius":Mt,"circle-opacity":q(1,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};P&258&&(N.$$scope={dirty:P,ctx:A}),e.$set(N);const I=P&25?Q($,[P&0&&x(B("interventions-lines")),P&16&&{filter:["all",vn,A[4]]},$[2],P&8&&{paint:{"line-color":A[3],"line-width":rt,"line-opacity":q(1,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};P&258&&(I.$$scope={dirty:P,ctx:A}),t.$set(I);const D=P&1?Q(y,[P&0&&x(B("interventions-lines-endpoints")),y[1],P&0&&{paint:{"circle-radius":.5*rt,"circle-opacity":0,"circle-stroke-color":jt.lineEndpointColor,"circle-stroke-width":2}},P&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};o.$set(D);const R=P&25?Q(S,[P&0&&x(B("interventions-polygons")),P&16&&{filter:["all",Et,A[4]]},S[2],P&8&&{paint:{"fill-color":A[3],"fill-opacity":q(.2,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};P&258&&(R.$$scope={dirty:P,ctx:A}),u.$set(R);const M=P&25?Q(F,[P&0&&x(B("interventions-polygons-outlines")),P&16&&{filter:["all",Et,A[4]]},P&8&&{paint:{"line-color":A[3],"line-opacity":.5,"line-width":.7*rt}},P&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};a.$set(M)},i(A){f||(m(e.$$.fragment,A),m(t.$$.fragment,A),m(o.$$.fragment,A),m(u.$$.fragment,A),m(a.$$.fragment,A),f=!0)},o(A){h(e.$$.fragment,A),h(t.$$.fragment,A),h(o.$$.fragment,A),h(u.$$.fragment,A),h(a.$$.fragment,A),f=!1},d(A){A&&(g(n),g(l),g(i),g(s)),v(e,A),v(t,A),v(o,A),v(u,A),v(a,A)}}}function t$(r){let e,n;return e=new gt({props:{data:r[2],$$slots:{default:[e$]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function n$(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,{filterText:i}=e,u=vr("v1");const s=["!=","hide_while_editing",!0],a=["!=","endpoint",!0];return r.$$set=f=>{"schemesGj"in f&&n(6,l=f.schemesGj),"showSchemes"in f&&n(0,o=f.showSchemes),"filterText"in f&&n(1,i=f.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Jr(l))},[o,i,t,u,s,a,l]}class r$ extends U{constructor(e){super(),z(this,e,n$,t$,W,{schemesGj:6,showSchemes:0,filterText:1})}}function $r(r,e,n){const t=r.slice();return t[14]=e[n],t}function l$(r){let e,n;return e=new Bc({props:{loadFile:r[8]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pr(r){let e,n,t,l,o,i;function u(p){r[9](p)}function s(p){r[10](p)}function a(p){r[11](p)}function f(p){r[12](p)}let c={schemes:r[2]};return r[1]!==void 0&&(c.schemesGj=r[1]),r[3]!==void 0&&(c.schemesToBeShown=r[3]),r[4]!==void 0&&(c.filterText=r[4]),r[5]!==void 0&&(c.show=r[5]),e=new js({props:c}),V.push(()=>K(e,"schemesGj",u)),V.push(()=>K(e,"schemesToBeShown",s)),V.push(()=>K(e,"filterText",a)),V.push(()=>K(e,"show",f)),{c(){d(e.$$.fragment)},m(p,$){b(e,p,$),i=!0},p(p,$){const C={};$&4&&(C.schemes=p[2]),!n&&$&2&&(n=!0,C.schemesGj=p[1],J(()=>n=!1)),!t&&$&8&&(t=!0,C.schemesToBeShown=p[3],J(()=>t=!1)),!l&&$&16&&(l=!0,C.filterText=p[4],J(()=>l=!1)),!o&&$&32&&(o=!0,C.show=p[5],J(()=>o=!1)),e.$set(C)},i(p){i||(m(e.$$.fragment,p),i=!0)},o(p){h(e.$$.fragment,p),i=!1},d(p){v(e,p)}}}function mr(r){let e,n;return e=new zc({props:{schemesGj:r[1],scheme:r[14],authorityNames:r[7]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[14]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _r(r){let e=r[3].has(r[14].scheme_reference),n,t,l=e&&mr(r);return{c(){l&&l.c(),n=be()},m(o,i){l&&l.m(o,i),_(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[14].scheme_reference)),e?l?(l.p(o,i),i&12&&m(l,1)):(l=mr(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(ie(),h(l,1,1,()=>{l=null}),ae())},i(o){t||(m(l),t=!0)},o(o){h(l),t=!1},d(o){o&&g(n),l&&l.d(o)}}}function o$(r){let e,n,t,l,o,i,u,s,a,f,c=an()=="Private (development)",p,$,C,y,T,S,E,F;o=new ol({props:{boundaryGeojson:r[1]}}),u=new kl({}),a=new Zr({});let j=c&&l$(r);$=new il({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[8]}}),y=new br({props:{errorMessage:r[0]}});let A=r[2].size>0&&pr(r),P=Ne(r[2].values()),N=[];for(let D=0;D<P.length;D+=1)N[D]=_r($r(r,P,D));const I=D=>h(N[D],1,1,()=>{N[D]=null});return{c(){e=O("div"),n=O("div"),t=O("h1"),t.textContent="Browse schemes",l=L(),d(o.$$.fragment),i=L(),d(u.$$.fragment),s=L(),d(a.$$.fragment),f=L(),j&&j.c(),p=L(),d($.$$.fragment),C=L(),d(y.$$.fragment),T=L(),A&&A.c(),S=L(),E=O("ul");for(let D=0;D<N.length;D+=1)N[D].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),Y(e,"slot","sidebar"),Y(e,"class","govuk-prose")},m(D,R){_(D,e,R),k(e,n),k(n,t),k(n,l),b(o,n,null),k(e,i),b(u,e,null),k(e,s),b(a,e,null),k(e,f),j&&j.m(e,null),k(e,p),b($,e,null),k(e,C),b(y,e,null),k(e,T),A&&A.m(e,null),k(e,S),k(e,E);for(let M=0;M<N.length;M+=1)N[M]&&N[M].m(E,null);F=!0},p(D,R){const M={};R&2&&(M.boundaryGeojson=D[1]),o.$set(M),c&&j.p(D,R);const se={};if(R&1&&(se.errorMessage=D[0]),y.$set(se),D[2].size>0?A?(A.p(D,R),R&4&&m(A,1)):(A=pr(D),A.c(),m(A,1),A.m(e,S)):A&&(ie(),h(A,1,1,()=>{A=null}),ae()),R&142){P=Ne(D[2].values());let ee;for(ee=0;ee<P.length;ee+=1){const ve=$r(D,P,ee);N[ee]?(N[ee].p(ve,R),m(N[ee],1)):(N[ee]=_r(ve),N[ee].c(),m(N[ee],1),N[ee].m(E,null))}for(ie(),ee=P.length;ee<N.length;ee+=1)I(ee);ae()}},i(D){if(!F){m(o.$$.fragment,D),m(u.$$.fragment,D),m(a.$$.fragment,D),m(j),m($.$$.fragment,D),m(y.$$.fragment,D),m(A);for(let R=0;R<P.length;R+=1)m(N[R]);F=!0}},o(D){h(o.$$.fragment,D),h(u.$$.fragment,D),h(a.$$.fragment,D),h(j),h($.$$.fragment,D),h(y.$$.fragment,D),h(A),N=N.filter(Boolean);for(let R=0;R<N.length;R+=1)h(N[R]);F=!1},d(D){D&&g(e),v(o),v(u),v(a),j&&j.d(),v($),v(y),A&&A.d(),Dt(N,D)}}}function s$(r){let e,n,t,l,o;return e=new r$({props:{schemesGj:r[1],filterText:r[4],showSchemes:r[5]}}),l=new jc({}),{c(){d(e.$$.fragment),n=L(),t=O("div"),d(l.$$.fragment),Y(t,"class","top-right svelte-u44ed2")},m(i,u){b(e,i,u),_(i,n,u),_(i,t,u),b(l,t,null),o=!0},p(i,u){const s={};u&2&&(s.schemesGj=i[1]),u&16&&(s.filterText=i[4]),u&32&&(s.showSchemes=i[5]),e.$set(s)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){h(e.$$.fragment,i),h(l.$$.fragment,i),o=!1},d(i){i&&(g(n),g(t)),v(e,i),v(l)}}}function i$(r){let e,n,t;return n=new Qr({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[s$]},$$scope:{ctx:r}}}),{c(){e=O("div"),d(n.$$.fragment),Y(e,"slot","main")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.style=l[6]),o&131122&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function a$(r){let e,n;return e=new nl({props:{$$slots:{main:[i$],sidebar:[o$]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&131199&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function f$(r,e,n){let t;je(r,wn,S=>n(6,t=S)),Lt(()=>{xr()});let l=new Set(qc);const o=new URLSearchParams(window.location.search);wn.set(o.get("style")||"dataviz");let i="",u={type:"FeatureCollection",features:[],schemes:{}},s=new Map,a=new Set,f="",c=!0;function p(S){try{n(1,u=JSON.parse(S)),n(2,s=Ss(u)),n(0,i="")}catch(E){n(0,i=`The file you loaded is broken: ${E}`)}}function $(S){u=S,n(1,u)}function C(S){a=S,n(3,a)}function y(S){f=S,n(4,f)}function T(S){c=S,n(5,c)}return[i,u,s,a,f,c,t,l,p,$,C,y,T]}class u$ extends U{constructor(e){super(),z(this,e,f$,a$,W,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new u$({target:document.getElementById("app")});
