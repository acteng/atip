import{S as H,i as V,s as G,V as Ue,e as P,f as A,X as me,j as m,x as re,p as h,W as Je,u as w,k as T,U as ce,b as Z,c as q,I as ne,g as v,m as b,o as K,t as g,y as _e,l as d,n as we,q as k,_ as J,C as se,aW as Be,a1 as Ce,G as ve,a7 as Se,h as j,aV as I,a0 as Dt,az as Wt,a2 as Pe,r as et,F as Jt,a as He,v as ct,w as Xt,H as Yt,L as Qt,M as en,N as tn,D as Ot,aX as ft,ag as Ut,d as nn,z as rn,A as sn,a9 as on,aP as ln,E as an,ad as cn}from"./data_getter-fc678732.js";import{d as fe,H as ue,j as Te,S as Xe,h as fn,i as ut,g as At,C as Le,L as un,Z as $n,M as pn,I as mn,B as hn,b as tt}from"./schemas-f5f81809.js";const W={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"};function $t(s,e,n){const t=s.slice();return t[2]=e[n],t}function pt(s,e,n){const t=s.slice();return t[5]=e[n],t}function mt(s){let e,n;return{c(){e=P("span"),n=w(` 
    `),me(e,"background",s[5]),me(e,"width","100%"),me(e,"border","1px solid black")},m(t,r){m(t,e,r),T(e,n)},p(t,r){r&1&&me(e,"background",t[5])},d(t){t&&h(e)}}}function ht(s){let e,n=s[2].toLocaleString()+"",t;return{c(){e=P("span"),t=w(n)},m(r,o){m(r,e,o),T(e,t)},p(r,o){o&2&&n!==(n=r[2].toLocaleString()+"")&&ce(t,n)},d(r){r&&h(e)}}}function gn(s){let e,n,t,r=Ue(s[0]),o=[];for(let l=0;l<r.length;l+=1)o[l]=mt(pt(s,r,l));let i=Ue(s[1]),f=[];for(let l=0;l<i.length;l+=1)f[l]=ht($t(s,i,l));return{c(){e=P("div");for(let l=0;l<o.length;l+=1)o[l].c();n=A(),t=P("div");for(let l=0;l<f.length;l+=1)f[l].c();me(e,"display","flex"),me(t,"display","flex"),me(t,"justify-content","space-between")},m(l,u){m(l,e,u);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);m(l,n,u),m(l,t,u);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(t,null)},p(l,[u]){if(u&1){r=Ue(l[0]);let c;for(c=0;c<r.length;c+=1){const a=pt(l,r,c);o[c]?o[c].p(a,u):(o[c]=mt(a),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}if(u&2){i=Ue(l[1]);let c;for(c=0;c<i.length;c+=1){const a=$t(l,i,c);f[c]?f[c].p(a,u):(f[c]=ht(a),f[c].c(),f[c].m(t,null))}for(;c<f.length;c+=1)f[c].d(1);f.length=i.length}},i:re,o:re,d(l){l&&(h(e),h(n),h(t)),Je(o,l),Je(f,l)}}}function dn(s,e,n){let{colorScale:t}=e,{limits:r}=e;return s.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class nt extends H{constructor(e){super(),V(this,e,dn,gn,G,{colorScale:0,limits:1})}}function _n(s){let e;return{c(){e=w("Percent of households with a car")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function wn(s){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function vn(s){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function bn(s){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function kn(s){let e,n,t,r,o,i,f,l,u,c,a,$;return t=new I({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[wn]},$$scope:{ctx:s}}}),o=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[vn]},$$scope:{ctx:s}}}),c=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[bn]},$$scope:{ctx:s}}}),{c(){e=P("p"),n=w("Car/van availability data is from the 2021 census, via "),v(t.$$.fragment),r=w(". Output area boundaries from "),v(o.$$.fragment),i=w("."),f=A(),l=P("p"),u=w("License: "),v(c.$$.fragment),a=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(p,y){m(p,e,y),T(e,n),b(t,e,null),T(e,r),b(o,e,null),T(e,i),m(p,f,y),m(p,l,y),T(l,u),b(c,l,null),T(l,a),$=!0},p(p,y){const _={};y&131072&&(_.$$scope={dirty:y,ctx:p}),t.$set(_);const C={};y&131072&&(C.$$scope={dirty:y,ctx:p}),o.$set(C);const L={};y&131072&&(L.$$scope={dirty:y,ctx:p}),c.$set(L)},i(p){$||(g(t.$$.fragment,p),g(o.$$.fragment,p),g(c.$$.fragment,p),$=!0)},o(p){d(t.$$.fragment,p),d(o.$$.fragment,p),d(c.$$.fragment,p),$=!1},d(p){p&&(h(e),h(f),h(l)),k(t),k(o),k(c)}}}function yn(s){let e,n,t;return n=new ue({props:{$$slots:{default:[kn]},$$scope:{ctx:s}}}),{c(){e=P("span"),v(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),b(n,e,null),t=!0},p(r,o){const i={};o&131072&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&h(e),k(n)}}}function gt(s){let e,n;return e=new nt({props:{colorScale:s[4],limits:s[7]()}}),{c(){v(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:re,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Ln(s){let e;return{c(){e=w("Average cars per household")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Cn(s){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Sn(s){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Tn(s){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Dn(s){let e,n,t,r,o,i,f,l,u,c,a,$,p,y;return o=new I({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Cn]},$$scope:{ctx:s}}}),f=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Sn]},$$scope:{ctx:s}}}),$=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Tn]},$$scope:{ctx:s}}}),{c(){e=P("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=A(),t=P("p"),r=w("Car/van availability data is from the 2021 census, via "),v(o.$$.fragment),i=w(". Output area boundaries from "),v(f.$$.fragment),l=w("."),u=A(),c=P("p"),a=w("License: "),v($.$$.fragment),p=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(_,C){m(_,e,C),m(_,n,C),m(_,t,C),T(t,r),b(o,t,null),T(t,i),b(f,t,null),T(t,l),m(_,u,C),m(_,c,C),T(c,a),b($,c,null),T(c,p),y=!0},p(_,C){const L={};C&131072&&(L.$$scope={dirty:C,ctx:_}),o.$set(L);const S={};C&131072&&(S.$$scope={dirty:C,ctx:_}),f.$set(S);const M={};C&131072&&(M.$$scope={dirty:C,ctx:_}),$.$set(M)},i(_){y||(g(o.$$.fragment,_),g(f.$$.fragment,_),g($.$$.fragment,_),y=!0)},o(_){d(o.$$.fragment,_),d(f.$$.fragment,_),d($.$$.fragment,_),y=!1},d(_){_&&(h(e),h(n),h(t),h(u),h(c)),k(o),k(f),k($)}}}function On(s){let e,n,t;return n=new ue({props:{$$slots:{default:[Dn]},$$scope:{ctx:s}}}),{c(){e=P("span"),v(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),b(n,e,null),t=!0},p(r,o){const i={};o&131072&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&h(e),k(n)}}}function dt(s){let e,n;return e=new nt({props:{colorScale:s[4],limits:s[7]()}}),{c(){v(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:re,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Un(s){let e;return{c(){e=w("Population density")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function An(s){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Mn(s){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Pn(s){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Bn(s){let e,n,t,r,o,i,f,l,u,c,a,$;return t=new I({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[An]},$$scope:{ctx:s}}}),o=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Mn]},$$scope:{ctx:s}}}),c=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Pn]},$$scope:{ctx:s}}}),{c(){e=P("p"),n=w("Population density data is from the 2021 census, via "),v(t.$$.fragment),r=w(". Output area boundaries from "),v(o.$$.fragment),i=w("."),f=A(),l=P("p"),u=w("License: "),v(c.$$.fragment),a=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(p,y){m(p,e,y),T(e,n),b(t,e,null),T(e,r),b(o,e,null),T(e,i),m(p,f,y),m(p,l,y),T(l,u),b(c,l,null),T(l,a),$=!0},p(p,y){const _={};y&131072&&(_.$$scope={dirty:y,ctx:p}),t.$set(_);const C={};y&131072&&(C.$$scope={dirty:y,ctx:p}),o.$set(C);const L={};y&131072&&(L.$$scope={dirty:y,ctx:p}),c.$set(L)},i(p){$||(g(t.$$.fragment,p),g(o.$$.fragment,p),g(c.$$.fragment,p),$=!0)},o(p){d(t.$$.fragment,p),d(o.$$.fragment,p),d(c.$$.fragment,p),$=!1},d(p){p&&(h(e),h(f),h(l)),k(t),k(o),k(c)}}}function Nn(s){let e,n,t;return n=new ue({props:{$$slots:{default:[Bn]},$$scope:{ctx:s}}}),{c(){e=P("span"),v(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),b(n,e,null),t=!0},p(r,o){const i={};o&131072&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&h(e),k(n)}}}function _t(s){let e,n,t,r;return t=new nt({props:{colorScale:s[4],limits:s[7]()}}),{c(){e=P("p"),e.textContent="(people per square kilometres)",n=A(),v(t.$$.fragment)},m(o,i){m(o,e,i),m(o,n,i),b(t,o,i),r=!0},p:re,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(h(e),h(n)),k(t,o)}}}function En(s){let e,n,t,r,o,i,f,l,u,c,a,$,p,y;function _(D){s[9](D)}let C={id:"percent_households_with_car",$$slots:{right:[yn],default:[_n]},$$scope:{ctx:s}};s[0]!==void 0&&(C.checked=s[0]),e=new fe({props:C}),Z.push(()=>q(e,"checked",_)),e.$on("change",s[10]);let L=s[3]=="percent_households_with_car"&&gt(s);function S(D){s[11](D)}let M={id:"average_cars_per_household",$$slots:{right:[On],default:[Ln]},$$scope:{ctx:s}};s[1]!==void 0&&(M.checked=s[1]),o=new fe({props:M}),Z.push(()=>q(o,"checked",S)),o.$on("change",s[12]);let O=s[3]=="average_cars_per_household"&&dt(s);function U(D){s[13](D)}let E={id:"population_density",$$slots:{right:[Nn],default:[Un]},$$scope:{ctx:s}};s[2]!==void 0&&(E.checked=s[2]),u=new fe({props:E}),Z.push(()=>q(u,"checked",U)),u.$on("change",s[14]);let N=s[3]=="population_density"&&_t(s);return p=new ne({props:{layer:oe,tooltip:s[5],show:s[3]!="",clickable:!0}}),p.$on("click",s[6]),{c(){v(e.$$.fragment),t=A(),L&&L.c(),r=A(),v(o.$$.fragment),f=A(),O&&O.c(),l=A(),v(u.$$.fragment),a=A(),N&&N.c(),$=A(),v(p.$$.fragment)},m(D,x){b(e,D,x),m(D,t,x),L&&L.m(D,x),m(D,r,x),b(o,D,x),m(D,f,x),O&&O.m(D,x),m(D,l,x),b(u,D,x),m(D,a,x),N&&N.m(D,x),m(D,$,x),b(p,D,x),y=!0},p(D,[x]){const B={};x&131072&&(B.$$scope={dirty:x,ctx:D}),!n&&x&1&&(n=!0,B.checked=D[0],K(()=>n=!1)),e.$set(B),D[3]=="percent_households_with_car"?L?(L.p(D,x),x&8&&g(L,1)):(L=gt(D),L.c(),g(L,1),L.m(r.parentNode,r)):L&&(_e(),d(L,1,1,()=>{L=null}),we());const F={};x&131072&&(F.$$scope={dirty:x,ctx:D}),!i&&x&2&&(i=!0,F.checked=D[1],K(()=>i=!1)),o.$set(F),D[3]=="average_cars_per_household"?O?(O.p(D,x),x&8&&g(O,1)):(O=dt(D),O.c(),g(O,1),O.m(l.parentNode,l)):O&&(_e(),d(O,1,1,()=>{O=null}),we());const he={};x&131072&&(he.$$scope={dirty:x,ctx:D}),!c&&x&4&&(c=!0,he.checked=D[2],K(()=>c=!1)),u.$set(he),D[3]=="population_density"?N?(N.p(D,x),x&8&&g(N,1)):(N=_t(D),N.c(),g(N,1),N.m($.parentNode,$)):N&&(_e(),d(N,1,1,()=>{N=null}),we());const be={};x&8&&(be.show=D[3]!=""),p.$set(be)},i(D){y||(g(e.$$.fragment,D),g(L),g(o.$$.fragment,D),g(O),g(u.$$.fragment,D),g(N),g(p.$$.fragment,D),y=!0)},o(D){d(e.$$.fragment,D),d(L),d(o.$$.fragment,D),d(O),d(u.$$.fragment,D),d(N),d(p.$$.fragment,D),y=!1},d(D){D&&(h(t),h(r),h(f),h(l),h(a),h($)),k(e,D),L&&L.d(D),k(o,D),O&&O.d(D),k(u,D),N&&N.d(D),k(p,D)}}}let oe="census_output_areas";function xn(s,e,n){let t;J(s,se,O=>n(8,t=O));let r=`${oe}-outline`,o=W.sequential_low_to_high,i=!1,f=!1,l=!1,u="";Be(t,oe,`https://atip.uk/layers/v1/${oe}.pmtiles`),Ce(t,{id:oe,source:oe,sourceLayer:oe,color:"black",opacity:ve(.5,.7)}),Se(t,{id:r,source:oe,sourceLayer:oe,color:"black",width:.5});function c(O){let U=O.properties.OA21CD,E=O.properties[u];return u=="percent_households_with_car"?`<p>${E}% of households in ${U} have 1 or more cars</p>`:u=="average_cars_per_household"?`<p>Households in ${U} have an average of ${E} cars</p>`:`<p>There are ${E.toLocaleString()} people per square kilometre in ${U}</p>`}function a(O){let U=O.detail.properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${U}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${U}`,"_blank")}function $(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function p(){let O=$(),U=["step",["get",u]];for(let E=1;E<O.length;E++)U.push(o[E-1]),U.push(O[E]);return U.push(o[o.length-1]),U}function y(O){i=O,n(0,i)}const _=()=>{n(1,f=!1),n(2,l=!1)};function C(O){f=O,n(1,f)}const L=()=>{n(0,i=!1),n(2,l=!1)};function S(O){l=O,n(2,l)}const M=()=>{n(0,i=!1),n(1,f=!1)};return s.$$.update=()=>{s.$$.dirty&271&&(i?n(3,u="percent_households_with_car"):f?n(3,u="average_cars_per_household"):l?n(3,u="population_density"):n(3,u=""),u?(t.setPaintProperty(oe,"fill-color",p()),t.setLayoutProperty(r,"visibility","visible")):t.setLayoutProperty(r,"visibility","none"))},[i,f,l,u,o,c,a,$,t,y,_,C,L,S,M]}class zn extends H{constructor(e){super(),V(this,e,xn,En,G,{})}}function In(s){let e,n,t;return e=new Te({props:{color:s[1]}}),{c(){v(e.$$.fragment),n=w(`
  Combined authorities`)},m(r,o){b(e,r,o),m(r,n,o),t=!0},p:re,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&h(n),k(e,r)}}}function Fn(s){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function jn(s){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Hn(s){let e,n,t,r,o,i,f,l,u,c;return t=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Fn]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[jn]},$$scope:{ctx:s}}}),{c(){e=P("p"),n=w("Data from "),v(t.$$.fragment),r=w(", as of December 2022."),o=A(),i=P("p"),f=w("License: "),v(l.$$.fragment),u=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(a,$){m(a,e,$),T(e,n),b(t,e,null),T(e,r),m(a,o,$),m(a,i,$),T(i,f),b(l,i,null),T(i,u),c=!0},p(a,$){const p={};$&32&&(p.$$scope={dirty:$,ctx:a}),t.$set(p);const y={};$&32&&(y.$$scope={dirty:$,ctx:a}),l.$set(y)},i(a){c||(g(t.$$.fragment,a),g(l.$$.fragment,a),c=!0)},o(a){d(t.$$.fragment,a),d(l.$$.fragment,a),c=!1},d(a){a&&(h(e),h(o),h(i)),k(t),k(l)}}}function Vn(s){let e,n,t;return n=new ue({props:{$$slots:{default:[Hn]},$$scope:{ctx:s}}}),{c(){e=P("span"),v(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),b(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&h(e),k(n)}}}function Gn(s){let e,n,t,r,o;function i(l){s[3](l)}let f={id:ge,$$slots:{right:[Vn],default:[In]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.checked=s[0]),e=new fe({props:f}),Z.push(()=>q(e,"checked",i)),r=new ne({props:{layer:ge,tooltip:Rn,show:s[0],clickable:!0}}),r.$on("click",Zn),{c(){v(e.$$.fragment),t=A(),v(r.$$.fragment)},m(l,u){b(e,l,u),m(l,t,u),b(r,l,u),o=!0},p(l,[u]){const c={};u&32&&(c.$$scope={dirty:u,ctx:l}),!n&&u&1&&(n=!0,c.checked=l[0],K(()=>n=!1)),e.$set(c);const a={};u&1&&(a.show=l[0]),r.$set(a)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(r.$$.fragment,l),o=!1},d(l){l&&h(t),k(e,l),k(r,l)}}}let ge="combined_authorities";function Rn(s){return`<p>${s.properties.name}</p>`}function Zn(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.properties.CAUTH22CD}`,"_blank")}function qn(s,e,n){let t;J(s,se,l=>n(2,t=l));let r=W.combined_authorities,o=`${ge}-outline`;Dt(t,ge,`https://atip.uk/layers/v1/${ge}.geojson`),Ce(t,{id:ge,source:ge,color:r,opacity:ve(.5,.1)}),Se(t,{id:o,source:ge,color:r,width:2.5});let i=!1;function f(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,f]}class Kn extends H{constructor(e){super(),V(this,e,qn,Gn,G,{})}}function Wn(s){let e=new Map;for(let[t,r]of Object.entries(s.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:r.authority_or_region,capital_scheme_id:r.capital_scheme_id,funding_programme:r.funding_programme});let n=1;for(let t of s.features){let r=e.get(t.properties.scheme_reference);r.num_features++,t.properties.funding_programme=r.funding_programme,t.id=n++}return e}function Jn(s){let e,n,t,r,o;function i(l){s[3](l)}let f={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return s[0]!==void 0&&(f.value=s[0]),e=new Xe({props:f}),Z.push(()=>q(e,"value",i)),e.$on("change",s[2]),r=new fn({props:{rows:s[1]}}),{c(){v(e.$$.fragment),t=A(),v(r.$$.fragment)},m(l,u){b(e,l,u),m(l,t,u),b(r,l,u),o=!0},p(l,[u]){const c={};!n&&u&1&&(n=!0,c.value=l[0],K(()=>n=!1)),e.$set(c);const a={};u&2&&(a.rows=l[1]),r.$set(a)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(r.$$.fragment,l),o=!1},d(l){l&&h(t),k(e,l),k(r,l)}}}function Xn(s,e,n){let t;J(s,se,l=>n(4,t=l));let r="interventionType",o=ut("v1");function i(){let l;r=="interventionType"?(l=At("v1"),n(1,o=ut("v1"))):(l=Wt(["get","funding_programme"],{ATF2:W.atf2,ATF3:W.atf3,ATF4:W.atf4},"grey"),n(1,o=[["ATF2",W.atf2],["ATF3",W.atf3],["ATF4",W.atf4]])),t.setPaintProperty("interventions-points","circle-color",l),t.setPaintProperty("interventions-lines","line-color",l),t.setPaintProperty("interventions-polygons","fill-color",l),t.setPaintProperty("interventions-polygon-outlines","line-color",l)}function f(l){r=l,n(0,r)}return[r,o,i,f]}class Yn extends H{constructor(e){super(),V(this,e,Xn,Jn,G,{})}}function Qn(s){let e;return{c(){e=w("Clear")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function er(s){let e,n,t,r,o,i;return t=new He({props:{$$slots:{default:[Qn]},$$scope:{ctx:s}}}),t.$on("click",s[11]),{c(){e=P("input"),n=A(),v(t.$$.fragment),j(e,"type","text"),j(e,"class","govuk-input govuk-input--width-10"),j(e,"id","filterText")},m(f,l){m(f,e,l),ct(e,s[0]),m(f,n,l),b(t,f,l),r=!0,o||(i=Xt(e,"input",s[10]),o=!0)},p(f,l){l&1&&e.value!==f[0]&&ct(e,f[0]);const u={};l&16384&&(u.$$scope={dirty:l,ctx:f}),t.$set(u)},i(f){r||(g(t.$$.fragment,f),r=!0)},o(f){d(t.$$.fragment,f),r=!1},d(f){f&&(h(e),h(n)),k(t,f),o=!1,i()}}}function tr(s){let e,n,t,r,o,i,f,l,u,c;function a(_){s[8](_)}let $={label:"Authority or region",id:"filterAuthority",choices:s[4],emptyOption:!0};s[2]!==void 0&&($.value=s[2]),e=new Xe({props:$}),Z.push(()=>q(e,"value",a));function p(_){s[9](_)}let y={label:"Funding programme",id:"filterFundingProgramme",choices:s[5],emptyOption:!0};return s[3]!==void 0&&(y.value=s[3]),r=new Xe({props:y}),Z.push(()=>q(r,"value",p)),f=new Jt({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[er]},$$scope:{ctx:s}}}),u=new Yn({}),{c(){v(e.$$.fragment),t=A(),v(r.$$.fragment),i=A(),v(f.$$.fragment),l=A(),v(u.$$.fragment)},m(_,C){b(e,_,C),m(_,t,C),b(r,_,C),m(_,i,C),b(f,_,C),m(_,l,C),b(u,_,C),c=!0},p(_,C){const L={};C&16&&(L.choices=_[4]),!n&&C&4&&(n=!0,L.value=_[2],K(()=>n=!1)),e.$set(L);const S={};C&32&&(S.choices=_[5]),!o&&C&8&&(o=!0,S.value=_[3],K(()=>o=!1)),r.$set(S);const M={};C&16385&&(M.$$scope={dirty:C,ctx:_}),f.$set(M)},i(_){c||(g(e.$$.fragment,_),g(r.$$.fragment,_),g(f.$$.fragment,_),g(u.$$.fragment,_),c=!0)},o(_){d(e.$$.fragment,_),d(r.$$.fragment,_),d(f.$$.fragment,_),d(u.$$.fragment,_),c=!1},d(_){_&&(h(t),h(i),h(l)),k(e,_),k(r,_),k(f,_),k(u,_)}}}function nr(s){let e,n,t,r,o=s[1].size+"",i,f,l=s[6].route+"",u,c,a=s[6].area+"",$,p,y=s[6].crossing+"",_,C,L=s[6].other+"",S,M,O;return e=new Le({props:{label:"Filters",$$slots:{default:[tr]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),n=A(),t=P("p"),r=w("Showing "),i=w(o),f=w(" schemes ("),u=w(l),c=w(" routes, "),$=w(a),p=w(` areas,
  `),_=w(y),C=w(" crossings, "),S=w(L),M=w(" other)")},m(U,E){b(e,U,E),m(U,n,E),m(U,t,E),T(t,r),T(t,i),T(t,f),T(t,u),T(t,c),T(t,$),T(t,p),T(t,_),T(t,C),T(t,S),T(t,M),O=!0},p(U,[E]){const N={};E&16445&&(N.$$scope={dirty:E,ctx:U}),e.$set(N),(!O||E&2)&&o!==(o=U[1].size+"")&&ce(i,o),(!O||E&64)&&l!==(l=U[6].route+"")&&ce(u,l),(!O||E&64)&&a!==(a=U[6].area+"")&&ce($,a),(!O||E&64)&&y!==(y=U[6].crossing+"")&&ce(_,y),(!O||E&64)&&L!==(L=U[6].other+"")&&ce(S,L)},i(U){O||(g(e.$$.fragment,U),O=!0)},o(U){d(e.$$.fragment,U),O=!1},d(U){U&&(h(n),h(t)),k(e,U)}}}function rr(s,e,n){let t;J(s,Pe,L=>n(12,t=L));let{schemes:r}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,f=[],l="",u=[],c="",a={area:0,route:0,crossing:0,other:0};et(()=>{let L=new Set,S=new Set;for(let M of r.values())M.authority_or_region&&L.add(M.authority_or_region),M.funding_programme&&S.add(M.funding_programme);n(4,f=Array.from(L.entries())),f.sort(),n(5,u=Array.from(S.entries())),u.sort()});function $(L,S,M){let O=L.toLowerCase(),U=N=>{var D,x;if(O&&!((D=N.properties.name)!=null&&D.toLowerCase().includes(O))&&!((x=N.properties.description)!=null&&x.toLowerCase().includes(O)))return!1;if(S||M){let B=r.get(N.properties.scheme_reference);if(S&&B.authority_or_region!=S||M&&B.funding_programme!=M)return!1}return!0};n(1,o=new Set(t.features.filter(U).map(N=>N.properties.scheme_reference))),n(6,a={area:0,route:0,crossing:0,other:0});let E=N=>{var D,x;return!(!o.has(N.properties.scheme_reference)||O&&!((D=N.properties.name)!=null&&D.toLowerCase().includes(O))&&!((x=N.properties.description)!=null&&x.toLowerCase().includes(O)))};Pe.update(N=>{for(let D of N.features)E(D)?(delete D.properties.hide_while_editing,n(6,a[D.properties.intervention_type]++,a)):D.properties.hide_while_editing=!0;return N}),n(6,a)}function p(L){l=L,n(2,l)}function y(L){c=L,n(3,c)}function _(){i=this.value,n(0,i)}const C=()=>n(0,i="");return s.$$set=L=>{"schemes"in L&&n(7,r=L.schemes),"schemesToBeShown"in L&&n(1,o=L.schemesToBeShown),"filterText"in L&&n(0,i=L.filterText)},s.$$.update=()=>{s.$$.dirty&13&&$(i,l,c)},[i,o,l,c,f,u,a,r,p,y,_,C]}class sr extends H{constructor(e){super(),V(this,e,rr,nr,G,{schemes:7,schemesToBeShown:1,filterText:0})}}function or(s){let e,n,t,r;return e=new Te({props:{color:s[3]}}),{c(){v(e.$$.fragment),n=A(),t=w(s[1])},m(o,i){b(e,o,i),m(o,n,i),m(o,t,i),r=!0},p(o,i){(!r||i&2)&&ce(t,o[1])},i(o){r||(g(e.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),r=!1},d(o){o&&(h(n),h(t)),k(e,o)}}}function lr(s){let e;const n=s[6].default,t=Yt(n,s,s[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&Qt(t,n,r,r[8],e?tn(n,r[8],o,null):en(r[8]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function ir(s){let e,n,t;return n=new ue({props:{$$slots:{default:[lr]},$$scope:{ctx:s}}}),{c(){e=P("span"),v(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),b(n,e,null),t=!0},p(r,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&h(e),k(n)}}}function ar(s){let e,n,t,r,o;function i(l){s[7](l)}let f={id:s[0],$$slots:{right:[ir],default:[or]},$$scope:{ctx:s}};return s[2]!==void 0&&(f.checked=s[2]),e=new fe({props:f}),Z.push(()=>q(e,"checked",i)),r=new ne({props:{layer:s[0],tooltip:s[4],show:s[2],clickable:!1}}),{c(){v(e.$$.fragment),t=A(),v(r.$$.fragment)},m(l,u){b(e,l,u),m(l,t,u),b(r,l,u),o=!0},p(l,[u]){const c={};u&1&&(c.id=l[0]),u&258&&(c.$$scope={dirty:u,ctx:l}),!n&&u&4&&(n=!0,c.checked=l[2],K(()=>n=!1)),e.$set(c);const a={};u&1&&(a.layer=l[0]),u&4&&(a.show=l[2]),r.$set(a)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(r.$$.fragment,l),o=!1},d(l){l&&h(t),k(e,l),k(r,l)}}}function cr(s,e,n){let t;J(s,se,p=>n(9,t=p));let{$$slots:r={},$$scope:o}=e,{name:i}=e,{singularNoun:f}=e,{pluralNoun:l}=e,u=W[i];Be(t,i,`https://atip.uk/layers/v1/${i}.pmtiles`),Ce(t,{id:i,source:i,sourceLayer:i,color:u,opacity:ve(1,.7)});let c=!1;function a(p){return`<p>${p.properties.name??`Unnamed ${f}`}</p>`}function $(p){c=p,n(2,c)}return s.$$set=p=>{"name"in p&&n(0,i=p.name),"singularNoun"in p&&n(5,f=p.singularNoun),"pluralNoun"in p&&n(1,l=p.pluralNoun),"$$scope"in p&&n(8,o=p.$$scope)},[i,l,c,u,a,f,r,$,o]}class Mt extends H{constructor(e){super(),V(this,e,cr,ar,G,{name:0,singularNoun:5,pluralNoun:1})}}function fr(s){let e;return{c(){e=w("hospital")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function ur(s){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function $r(s){let e,n,t,r,o,i,f,l,u;return t=new I({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[fr]},$$scope:{ctx:s}}}),l=new I({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[ur]},$$scope:{ctx:s}}}),{c(){e=P("p"),n=w("This shows "),v(t.$$.fragment),r=w(` data from OpenStreetMap. It doesn't include outpatient clinics
    or individual doctor's offices.`),o=A(),i=P("p"),f=w("License: "),v(l.$$.fragment)},m(c,a){m(c,e,a),T(e,n),b(t,e,null),T(e,r),m(c,o,a),m(c,i,a),T(i,f),b(l,i,null),u=!0},p(c,a){const $={};a&1&&($.$$scope={dirty:a,ctx:c}),t.$set($);const p={};a&1&&(p.$$scope={dirty:a,ctx:c}),l.$set(p)},i(c){u||(g(t.$$.fragment,c),g(l.$$.fragment,c),u=!0)},o(c){d(t.$$.fragment,c),d(l.$$.fragment,c),u=!1},d(c){c&&(h(e),h(o),h(i)),k(t),k(l)}}}function pr(s){let e,n;return e=new Mt({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[$r]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}class mr extends H{constructor(e){super(),V(this,e,null,pr,G,{})}}function hr(s){let e,n,t;return e=new Te({props:{color:s[1]}}),{c(){v(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(r,o){b(e,r,o),m(r,n,o),t=!0},p:re,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&h(n),k(e,r)}}}function gr(s){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function dr(s){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function _r(s){let e,n,t,r,o,i,f,l,u,c;return t=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[gr]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[dr]},$$scope:{ctx:s}}}),{c(){e=P("p"),n=w("Data from "),v(t.$$.fragment),r=w(", as of May 2023."),o=A(),i=P("p"),f=w("License: "),v(l.$$.fragment),u=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(a,$){m(a,e,$),T(e,n),b(t,e,null),T(e,r),m(a,o,$),m(a,i,$),T(i,f),b(l,i,null),T(i,u),c=!0},p(a,$){const p={};$&32&&(p.$$scope={dirty:$,ctx:a}),t.$set(p);const y={};$&32&&(y.$$scope={dirty:$,ctx:a}),l.$set(y)},i(a){c||(g(t.$$.fragment,a),g(l.$$.fragment,a),c=!0)},o(a){d(t.$$.fragment,a),d(l.$$.fragment,a),c=!1},d(a){a&&(h(e),h(o),h(i)),k(t),k(l)}}}function wr(s){let e,n,t;return n=new ue({props:{$$slots:{default:[_r]},$$scope:{ctx:s}}}),{c(){e=P("span"),v(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),b(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&h(e),k(n)}}}function vr(s){let e,n,t,r,o;function i(l){s[3](l)}let f={id:de,$$slots:{right:[wr],default:[hr]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.checked=s[0]),e=new fe({props:f}),Z.push(()=>q(e,"checked",i)),r=new ne({props:{layer:de,tooltip:br,show:s[0],clickable:!0}}),r.$on("click",kr),{c(){v(e.$$.fragment),t=A(),v(r.$$.fragment)},m(l,u){b(e,l,u),m(l,t,u),b(r,l,u),o=!0},p(l,[u]){const c={};u&32&&(c.$$scope={dirty:u,ctx:l}),!n&&u&1&&(n=!0,c.checked=l[0],K(()=>n=!1)),e.$set(c);const a={};u&1&&(a.show=l[0]),r.$set(a)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(r.$$.fragment,l),o=!1},d(l){l&&h(t),k(e,l),k(r,l)}}}let de="local_authority_districts";function br(s){return`<p>${s.properties.name}</p>`}function kr(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.properties.LAD23CD}`,"_blank")}function yr(s,e,n){let t;J(s,se,l=>n(2,t=l));let r=W.local_authority_districts,o=`${de}-outline`;Dt(t,de,`https://atip.uk/layers/v1/${de}.geojson`),Ce(t,{id:de,source:de,color:r,opacity:ve(.5,.1)}),Se(t,{id:o,source:de,color:r,width:2.5});let i=!1;function f(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,f]}class Lr extends H{constructor(e){super(),V(this,e,yr,vr,G,{})}}function Cr(s){let e,n,t;return e=new Te({props:{color:s[1]}}),{c(){v(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(r,o){b(e,r,o),m(r,n,o),t=!0},p:re,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&h(n),k(e,r)}}}function Sr(s){let e;return{c(){e=w(`local authority
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Tr(s){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Dr(s){let e;return{c(){e=w(`development corporation
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Or(s){let e;return{c(){e=w("this map")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Ur(s){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Ar(s){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Mr(s){let e,n,t,r,o,i,f,l,u,c,a,$,p,y,_,C,L,S,M,O,U,E,N,D,x;return t=new I({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Sr]},$$scope:{ctx:s}}}),o=new I({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Tr]},$$scope:{ctx:s}}}),f=new I({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Dr]},$$scope:{ctx:s}}}),p=new I({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Or]},$$scope:{ctx:s}}}),S=new I({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ur]},$$scope:{ctx:s}}}),N=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ar]},$$scope:{ctx:s}}}),{c(){e=P("p"),n=w("LPAs may be a "),v(t.$$.fragment),r=w(", "),v(o.$$.fragment),i=w("y, or "),v(f.$$.fragment),l=w("."),u=A(),c=P("p"),a=P("strong"),$=w(`Note there are overlapping LPAs near Northhamptonshire, shown in a
          darker shade. Only one authority name is shown when hovering. Use `),v(p.$$.fragment),y=w(" to get more details."),_=A(),C=P("p"),L=w("Data from ONS Geography via "),v(S.$$.fragment),M=w(", as of November 2022."),O=A(),U=P("p"),E=w("License: "),v(N.$$.fragment),D=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(B,F){m(B,e,F),T(e,n),b(t,e,null),T(e,r),b(o,e,null),T(e,i),b(f,e,null),T(e,l),m(B,u,F),m(B,c,F),T(c,a),T(a,$),b(p,a,null),T(a,y),m(B,_,F),m(B,C,F),T(C,L),b(S,C,null),T(C,M),m(B,O,F),m(B,U,F),T(U,E),b(N,U,null),T(U,D),x=!0},p(B,F){const he={};F&32&&(he.$$scope={dirty:F,ctx:B}),t.$set(he);const be={};F&32&&(be.$$scope={dirty:F,ctx:B}),o.$set(be);const Ne={};F&32&&(Ne.$$scope={dirty:F,ctx:B}),f.$set(Ne);const $e={};F&32&&($e.$$scope={dirty:F,ctx:B}),p.$set($e);const ke={};F&32&&(ke.$$scope={dirty:F,ctx:B}),S.$set(ke);const Ee={};F&32&&(Ee.$$scope={dirty:F,ctx:B}),N.$set(Ee)},i(B){x||(g(t.$$.fragment,B),g(o.$$.fragment,B),g(f.$$.fragment,B),g(p.$$.fragment,B),g(S.$$.fragment,B),g(N.$$.fragment,B),x=!0)},o(B){d(t.$$.fragment,B),d(o.$$.fragment,B),d(f.$$.fragment,B),d(p.$$.fragment,B),d(S.$$.fragment,B),d(N.$$.fragment,B),x=!1},d(B){B&&(h(e),h(u),h(c),h(_),h(C),h(O),h(U)),k(t),k(o),k(f),k(p),k(S),k(N)}}}function Pr(s){let e,n,t;return n=new ue({props:{$$slots:{default:[Mr]},$$scope:{ctx:s}}}),{c(){e=P("span"),v(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),b(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&h(e),k(n)}}}function Br(s){let e,n,t,r,o;function i(l){s[3](l)}let f={id:le,$$slots:{right:[Pr],default:[Cr]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.checked=s[0]),e=new fe({props:f}),Z.push(()=>q(e,"checked",i)),r=new ne({props:{layer:le,tooltip:Nr,show:s[0],clickable:!1}}),{c(){v(e.$$.fragment),t=A(),v(r.$$.fragment)},m(l,u){b(e,l,u),m(l,t,u),b(r,l,u),o=!0},p(l,[u]){const c={};u&32&&(c.$$scope={dirty:u,ctx:l}),!n&&u&1&&(n=!0,c.checked=l[0],K(()=>n=!1)),e.$set(c);const a={};u&1&&(a.show=l[0]),r.$set(a)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(r.$$.fragment,l),o=!1},d(l){l&&h(t),k(e,l),k(r,l)}}}let le="local_planning_authorities";function Nr(s){return`<p>${s.properties.name}</p>`}function Er(s,e,n){let t;J(s,se,l=>n(2,t=l));let r=W.local_planning_authorities,o=`${le}-outline`;Be(t,le,`https://atip.uk/layers/v1/${le}.pmtiles`),Ce(t,{id:le,source:le,sourceLayer:le,color:r,opacity:ve(.5,.1)}),Se(t,{id:o,source:le,sourceLayer:le,color:r,width:2.5});let i=!1;function f(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,f]}class xr extends H{constructor(e){super(),V(this,e,Er,Br,G,{})}}function zr(s){let e,n,t;return e=new Te({props:{color:s[1]}}),{c(){v(e.$$.fragment),n=w(`
  Major Road Network`)},m(r,o){b(e,r,o),m(r,n,o),t=!0},p:re,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&h(n),k(e,r)}}}function Ir(s){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Fr(s){let e;return{c(){e=w("Open Government License")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function jr(s){let e,n,t,r,o,i,f,l,u;return t=new I({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Ir]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Fr]},$$scope:{ctx:s}}}),{c(){e=P("p"),n=w("Data from the "),v(t.$$.fragment),r=w("."),o=A(),i=P("p"),f=w("License: "),v(l.$$.fragment)},m(c,a){m(c,e,a),T(e,n),b(t,e,null),T(e,r),m(c,o,a),m(c,i,a),T(i,f),b(l,i,null),u=!0},p(c,a){const $={};a&16&&($.$$scope={dirty:a,ctx:c}),t.$set($);const p={};a&16&&(p.$$scope={dirty:a,ctx:c}),l.$set(p)},i(c){u||(g(t.$$.fragment,c),g(l.$$.fragment,c),u=!0)},o(c){d(t.$$.fragment,c),d(l.$$.fragment,c),u=!1},d(c){c&&(h(e),h(o),h(i)),k(t),k(l)}}}function Hr(s){let e,n,t;return n=new ue({props:{$$slots:{default:[jr]},$$scope:{ctx:s}}}),{c(){e=P("span"),v(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),b(n,e,null),t=!0},p(r,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&h(e),k(n)}}}function Vr(s){let e,n,t,r,o;function i(l){s[2](l)}let f={id:ye,$$slots:{right:[Hr],default:[zr]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.checked=s[0]),e=new fe({props:f}),Z.push(()=>q(e,"checked",i)),r=new ne({props:{layer:ye,tooltip:Gr,show:s[0],clickable:!1}}),{c(){v(e.$$.fragment),t=A(),v(r.$$.fragment)},m(l,u){b(e,l,u),m(l,t,u),b(r,l,u),o=!0},p(l,[u]){const c={};u&16&&(c.$$scope={dirty:u,ctx:l}),!n&&u&1&&(n=!0,c.checked=l[0],K(()=>n=!1)),e.$set(c);const a={};u&1&&(a.show=l[0]),r.$set(a)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(r.$$.fragment,l),o=!1},d(l){l&&h(t),k(e,l),k(r,l)}}}let ye="mrn";function Gr(s){return`<p>${s.properties.name??"Unknown MRN road"}</p>`}function Rr(s,e,n){let t;J(s,se,f=>n(3,t=f));let r=W.mrn;Be(t,ye,`https://atip.uk/layers/v1/${ye}.pmtiles`),Se(t,{id:ye,source:ye,sourceLayer:ye,color:r,width:7,opacity:ve(.5,1)});let o=!1;function i(f){o=f,n(0,o)}return[o,r,i]}class Zr extends H{constructor(e){super(),V(this,e,Rr,Vr,G,{})}}function qr(s){let e,n,t;return e=new Te({props:{color:s[1]}}),{c(){v(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(r,o){b(e,r,o),m(r,n,o),t=!0},p:re,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&h(n),k(e,r)}}}function Kr(s){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Wr(s){let e;return{c(){e=w("Open Government License")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Jr(s){let e,n,t,r,o,i,f,l,u;return t=new I({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Kr]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Wr]},$$scope:{ctx:s}}}),{c(){e=P("p"),n=w("Data from "),v(t.$$.fragment),r=w("."),o=A(),i=P("p"),f=w("License: "),v(l.$$.fragment)},m(c,a){m(c,e,a),T(e,n),b(t,e,null),T(e,r),m(c,o,a),m(c,i,a),T(i,f),b(l,i,null),u=!0},p(c,a){const $={};a&32&&($.$$scope={dirty:a,ctx:c}),t.$set($);const p={};a&32&&(p.$$scope={dirty:a,ctx:c}),l.$set(p)},i(c){u||(g(t.$$.fragment,c),g(l.$$.fragment,c),u=!0)},o(c){d(t.$$.fragment,c),d(l.$$.fragment,c),u=!1},d(c){c&&(h(e),h(o),h(i)),k(t),k(l)}}}function Xr(s){let e,n,t;return n=new ue({props:{$$slots:{default:[Jr]},$$scope:{ctx:s}}}),{c(){e=P("span"),v(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),b(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&h(e),k(n)}}}function Yr(s){let e,n,t,r,o;function i(l){s[3](l)}let f={id:ie,$$slots:{right:[Xr],default:[qr]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.checked=s[0]),e=new fe({props:f}),Z.push(()=>q(e,"checked",i)),r=new ne({props:{layer:ie,tooltip:Qr,show:s[0],clickable:!0}}),r.$on("click",es),{c(){v(e.$$.fragment),t=A(),v(r.$$.fragment)},m(l,u){b(e,l,u),m(l,t,u),b(r,l,u),o=!0},p(l,[u]){const c={};u&32&&(c.$$scope={dirty:u,ctx:l}),!n&&u&1&&(n=!0,c.checked=l[0],K(()=>n=!1)),e.$set(c);const a={};u&1&&(a.show=l[0]),r.$set(a)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(r.$$.fragment,l),o=!1},d(l){l&&h(t),k(e,l),k(r,l)}}}let ie="parliamentary_constituencies";function Qr(s){return`<p>${s.properties.Name}</p>`}function es(s){let e=s.detail.properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function ts(s,e,n){let t;J(s,se,l=>n(2,t=l));let r=W.parliamentary_constituencies,o=`${ie}-outline`;Be(t,ie,`https://atip.uk/layers/v1/${ie}.pmtiles`),Ce(t,{id:ie,source:ie,sourceLayer:ie,color:r,opacity:ve(.5,.1)}),Se(t,{id:o,source:ie,sourceLayer:ie,color:r,width:5});let i=!1;function f(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,f]}class ns extends H{constructor(e){super(),V(this,e,ts,Yr,G,{})}}function rs(s){let e;return{c(){e=w("Show on map")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function ss(s){let e;return{c(){e=w("Edit scheme locally")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function os(s){let e,n,t=s[0].authority_or_region+"",r,o,i,f,l=s[0].capital_scheme_id+"",u,c,a,$,p=s[0].funding_programme+"",y,_,C,L,S,M,O;return L=new He({props:{$$slots:{default:[rs]},$$scope:{ctx:s}}}),L.$on("click",s[3]),M=new He({props:{disabled:s[1],title:s[2],$$slots:{default:[ss]},$$scope:{ctx:s}}}),M.$on("click",s[4]),{c(){e=P("p"),n=w("Authority or region: "),r=w(t),o=A(),i=P("p"),f=w("Capital scheme ID: "),u=w(l),c=A(),a=P("p"),$=w("Funding programme: "),y=w(p),_=A(),C=P("div"),v(L.$$.fragment),S=A(),v(M.$$.fragment),j(C,"class","govuk-button-group")},m(U,E){m(U,e,E),T(e,n),T(e,r),m(U,o,E),m(U,i,E),T(i,f),T(i,u),m(U,c,E),m(U,a,E),T(a,$),T(a,y),m(U,_,E),m(U,C,E),b(L,C,null),T(C,S),b(M,C,null),O=!0},p(U,E){(!O||E&1)&&t!==(t=U[0].authority_or_region+"")&&ce(r,t),(!O||E&1)&&l!==(l=U[0].capital_scheme_id+"")&&ce(u,l),(!O||E&1)&&p!==(p=U[0].funding_programme+"")&&ce(y,p);const N={};E&256&&(N.$$scope={dirty:E,ctx:U}),L.$set(N);const D={};E&256&&(D.$$scope={dirty:E,ctx:U}),M.$set(D)},i(U){O||(g(L.$$.fragment,U),g(M.$$.fragment,U),O=!0)},o(U){d(L.$$.fragment,U),d(M.$$.fragment,U),O=!1},d(U){U&&(h(e),h(o),h(i),h(c),h(a),h(_),h(C)),k(L),k(M)}}}function ls(s){let e,n;return e=new Le({props:{label:`${s[0].scheme_reference}: ${s[0].num_features} features`,$$slots:{default:[os]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),r&257&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function is(s,e,n){let t,r;J(s,Pe,a=>n(6,t=a)),J(s,se,a=>n(7,r=a));let{scheme:o}=e,{authorityNames:i}=e,f=!i.has(o.authority_or_region),l=f?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function u(){let a={type:"FeatureCollection",features:t.features.filter($=>$.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Ot(a),{padding:20,animate:!1})}function c(){let a={type:"FeatureCollection",features:t.features.filter(p=>p.properties.scheme_reference==o.scheme_reference)},$=o.authority_or_region;window.localStorage.setItem($,JSON.stringify(a)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return s.$$set=a=>{"scheme"in a&&n(0,o=a.scheme),"authorityNames"in a&&n(5,i=a.authorityNames)},[o,f,l,u,c,i]}class as extends H{constructor(e){super(),V(this,e,is,ls,G,{scheme:0,authorityNames:5})}}function cs(s){let e;return{c(){e=w("primary and secondary schools")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function fs(s){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function us(s){let e,n,t,r,o,i,f,l,u;return t=new I({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[cs]},$$scope:{ctx:s}}}),l=new I({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[fs]},$$scope:{ctx:s}}}),{c(){e=P("p"),n=w("This shows "),v(t.$$.fragment),r=w(` from OpenStreetMap. It doesn't include kindergartens, colleges,
    universities, or other training schools.`),o=A(),i=P("p"),f=w("License: "),v(l.$$.fragment)},m(c,a){m(c,e,a),T(e,n),b(t,e,null),T(e,r),m(c,o,a),m(c,i,a),T(i,f),b(l,i,null),u=!0},p(c,a){const $={};a&1&&($.$$scope={dirty:a,ctx:c}),t.$set($);const p={};a&1&&(p.$$scope={dirty:a,ctx:c}),l.$set(p)},i(c){u||(g(t.$$.fragment,c),g(l.$$.fragment,c),u=!0)},o(c){d(t.$$.fragment,c),d(l.$$.fragment,c),u=!1},d(c){c&&(h(e),h(o),h(i)),k(t),k(l)}}}function $s(s){let e,n;return e=new Mt({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[us]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}class ps extends H{constructor(e){super(),V(this,e,null,$s,G,{})}}function ms(s){let e,n,t;return e=new Te({props:{color:s[1]}}),{c(){v(e.$$.fragment),n=w(`
  Wards`)},m(r,o){b(e,r,o),m(r,n,o),t=!0},p:re,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&h(n),k(e,r)}}}function hs(s){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function gs(s){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function ds(s){let e,n,t,r,o,i,f,l,u,c;return t=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[hs]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[gs]},$$scope:{ctx:s}}}),{c(){e=P("p"),n=w("Data from "),v(t.$$.fragment),r=w(", as of May 2023."),o=A(),i=P("p"),f=w("License: "),v(l.$$.fragment),u=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(a,$){m(a,e,$),T(e,n),b(t,e,null),T(e,r),m(a,o,$),m(a,i,$),T(i,f),b(l,i,null),T(i,u),c=!0},p(a,$){const p={};$&32&&(p.$$scope={dirty:$,ctx:a}),t.$set(p);const y={};$&32&&(y.$$scope={dirty:$,ctx:a}),l.$set(y)},i(a){c||(g(t.$$.fragment,a),g(l.$$.fragment,a),c=!0)},o(a){d(t.$$.fragment,a),d(l.$$.fragment,a),c=!1},d(a){a&&(h(e),h(o),h(i)),k(t),k(l)}}}function _s(s){let e,n,t;return n=new ue({props:{$$slots:{default:[ds]},$$scope:{ctx:s}}}),{c(){e=P("span"),v(n.$$.fragment),j(e,"slot","right")},m(r,o){m(r,e,o),b(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&h(e),k(n)}}}function ws(s){let e,n,t,r,o;function i(l){s[3](l)}let f={id:ae,$$slots:{right:[_s],default:[ms]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.checked=s[0]),e=new fe({props:f}),Z.push(()=>q(e,"checked",i)),r=new ne({props:{layer:ae,tooltip:vs,show:s[0],clickable:!0}}),r.$on("click",bs),{c(){v(e.$$.fragment),t=A(),v(r.$$.fragment)},m(l,u){b(e,l,u),m(l,t,u),b(r,l,u),o=!0},p(l,[u]){const c={};u&32&&(c.$$scope={dirty:u,ctx:l}),!n&&u&1&&(n=!0,c.checked=l[0],K(()=>n=!1)),e.$set(c);const a={};u&1&&(a.show=l[0]),r.$set(a)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){d(e.$$.fragment,l),d(r.$$.fragment,l),o=!1},d(l){l&&h(t),k(e,l),k(r,l)}}}let ae="wards";function vs(s){return`<p>${s.properties.name}</p>`}function bs(s){let e=encodeURIComponent(s.detail.properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function ks(s,e,n){let t;J(s,se,l=>n(2,t=l));let r=W.wards,o=`${ae}-outline`;Be(t,ae,`https://atip.uk/layers/v1/${ae}.pmtiles`),Ce(t,{id:ae,source:ae,sourceLayer:ae,color:r,opacity:ve(.5,.1)}),Se(t,{id:o,source:ae,sourceLayer:ae,color:r,width:2.5});let i=!1;function f(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,f]}class ys extends H{constructor(e){super(),V(this,e,ks,ws,G,{})}}var R=(s,e,n)=>new Promise((t,r)=>{var o=l=>{try{f(n.next(l))}catch(u){r(u)}},i=l=>{try{f(n.throw(l))}catch(u){r(u)}},f=l=>l.done?t(l.value):Promise.resolve(l.value).then(o,i);f((n=n.apply(s,e)).next())}),Y=Uint8Array,Ae=Uint16Array,Ls=Int32Array,Pt=new Y([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Bt=new Y([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cs=new Y([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Nt=function(s,e){for(var n=new Ae(31),t=0;t<31;++t)n[t]=e+=1<<s[t-1];for(var r=new Ls(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return{b:n,r}},Et=Nt(Pt,2),xt=Et.b,Ss=Et.r;xt[28]=258,Ss[258]=28;var Ts=Nt(Bt,0),Ds=Ts.b,Ye=new Ae(32768);for(z=0;z<32768;++z)pe=(z&43690)>>1|(z&21845)<<1,pe=(pe&52428)>>2|(pe&13107)<<2,pe=(pe&61680)>>4|(pe&3855)<<4,Ye[z]=((pe&65280)>>8|(pe&255)<<8)>>1;var pe,z,Fe=function(s,e,n){for(var t=s.length,r=0,o=new Ae(e);r<t;++r)s[r]&&++o[s[r]-1];var i=new Ae(e);for(r=1;r<e;++r)i[r]=i[r-1]+o[r-1]<<1;var f;if(n){f=new Ae(1<<e);var l=15-e;for(r=0;r<t;++r)if(s[r])for(var u=r<<4|s[r],c=e-s[r],a=i[s[r]-1]++<<c,$=a|(1<<c)-1;a<=$;++a)f[Ye[a]>>l]=u}else for(f=new Ae(t),r=0;r<t;++r)s[r]&&(f[r]=Ye[i[s[r]-1]++]>>15-s[r]);return f},je=new Y(288);for(z=0;z<144;++z)je[z]=8;var z;for(z=144;z<256;++z)je[z]=9;var z;for(z=256;z<280;++z)je[z]=7;var z;for(z=280;z<288;++z)je[z]=8;var z,zt=new Y(32);for(z=0;z<32;++z)zt[z]=5;var z,Os=Fe(je,9,1),Us=Fe(zt,5,1),Ke=function(s){for(var e=s[0],n=1;n<s.length;++n)s[n]>e&&(e=s[n]);return e},ee=function(s,e,n){var t=e/8|0;return(s[t]|s[t+1]<<8)>>(e&7)&n},We=function(s,e){var n=e/8|0;return(s[n]|s[n+1]<<8|s[n+2]<<16)>>(e&7)},As=function(s){return(s+7)/8|0},Ms=function(s,e,n){(e==null||e<0)&&(e=0),(n==null||n>s.length)&&(n=s.length);var t=new Y(n-e);return t.set(s.subarray(e,n)),t},Ps=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],X=function(s,e,n){var t=new Error(e||Ps[s]);if(t.code=s,Error.captureStackTrace&&Error.captureStackTrace(t,X),!n)throw t;return t},rt=function(s,e,n,t){var r=s.length,o=t?t.length:0;if(!r||e.f&&!e.l)return n||new Y(0);var i=!n||e.i!=2,f=e.i;n||(n=new Y(r*3));var l=function(lt){var it=n.length;if(lt>it){var at=new Y(Math.max(it*2,lt));at.set(n),n=at}},u=e.f||0,c=e.p||0,a=e.b||0,$=e.l,p=e.d,y=e.m,_=e.n,C=r*8;do{if(!$){u=ee(s,c,1);var L=ee(s,c+1,3);if(c+=3,L)if(L==1)$=Os,p=Us,y=9,_=5;else if(L==2){var U=ee(s,c,31)+257,E=ee(s,c+10,15)+4,N=U+ee(s,c+5,31)+1;c+=14;for(var D=new Y(N),x=new Y(19),B=0;B<E;++B)x[Cs[B]]=ee(s,c+B*3,7);c+=E*3;for(var F=Ke(x),he=(1<<F)-1,be=Fe(x,F,1),B=0;B<N;){var Ne=be[ee(s,c,he)];c+=Ne&15;var S=Ne>>4;if(S<16)D[B++]=S;else{var $e=0,ke=0;for(S==16?(ke=3+ee(s,c,3),c+=2,$e=D[B-1]):S==17?(ke=3+ee(s,c,7),c+=3):S==18&&(ke=11+ee(s,c,127),c+=7);ke--;)D[B++]=$e}}var Ee=D.subarray(0,U),Q=D.subarray(U);y=Ke(Ee),_=Ke(Q),$=Fe(Ee,y,1),p=Fe(Q,_,1)}else X(1);else{var S=As(c)+4,M=s[S-4]|s[S-3]<<8,O=S+M;if(O>r){f&&X(0);break}i&&l(a+M),n.set(s.subarray(S,O),a),e.b=a+=M,e.p=c=O*8,e.f=u;continue}if(c>C){f&&X(0);break}}i&&l(a+131072);for(var Zt=(1<<y)-1,qt=(1<<_)-1,Ge=c;;Ge=c){var $e=$[We(s,c)&Zt],De=$e>>4;if(c+=$e&15,c>C){f&&X(0);break}if($e||X(2),De<256)n[a++]=De;else if(De==256){Ge=c,$=null;break}else{var st=De-254;if(De>264){var B=De-257,xe=Pt[B];st=ee(s,c,(1<<xe)-1)+xt[B],c+=xe}var Re=p[We(s,c)&qt],Ze=Re>>4;Re||X(3),c+=Re&15;var Q=Ds[Ze];if(Ze>3){var xe=Bt[Ze];Q+=We(s,c)&(1<<xe)-1,c+=xe}if(c>C){f&&X(0);break}i&&l(a+131072);var qe=a+st;if(a<Q){var ot=o-Q,Kt=Math.min(Q,qe);for(ot+a<0&&X(3);a<Kt;++a)n[a]=t[ot+a]}for(;a<qe;a+=4)n[a]=n[a-Q],n[a+1]=n[a+1-Q],n[a+2]=n[a+2-Q],n[a+3]=n[a+3-Q];a=qe}}e.l=$,e.p=Ge,e.b=a,e.f=u,$&&(u=1,e.m=y,e.d=p,e.n=_)}while(!u);return a==n.length?n:Ms(n,0,a)},Bs=new Y(0),Ns=function(s){(s[0]!=31||s[1]!=139||s[2]!=8)&&X(6,"invalid gzip data");var e=s[3],n=10;e&4&&(n+=(s[10]|s[11]<<8)+2);for(var t=(e>>3&1)+(e>>4&1);t>0;t-=!s[n++]);return n+(e&2)},Es=function(s){var e=s.length;return(s[e-4]|s[e-3]<<8|s[e-2]<<16|s[e-1]<<24)>>>0},xs=function(s,e){return((s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31)&&X(6,"invalid zlib data"),(s[1]>>5&1)==+!e&&X(6,"invalid zlib data: "+(s[1]&32?"need":"unexpected")+" dictionary"),(s[1]>>3&4)+2};function zs(s,e){return rt(s,{i:2},e&&e.out,e&&e.dictionary)}function Is(s,e){var n=Ns(s);return n+8>s.length&&X(6,"invalid gzip data"),rt(s.subarray(n,-8),{i:2},e&&e.out||new Y(Es(s)),e&&e.dictionary)}function Fs(s,e){return rt(s.subarray(xs(s,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function Qe(s,e){return s[0]==31&&s[1]==139&&s[2]==8?Is(s,e):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?zs(s,e):Fs(s,e)}var js=typeof TextDecoder<"u"&&new TextDecoder,Hs=0;try{js.decode(Bs,{stream:!0}),Hs=1}catch{}var It=(s,e)=>s*Math.pow(2,e),ze=(s,e)=>Math.floor(s/Math.pow(2,e)),Ve=(s,e)=>It(s.getUint16(e+1,!0),8)+s.getUint8(e),Ft=(s,e)=>It(s.getUint32(e+2,!0),16)+s.getUint16(e,!0),Vs=(s,e,n,t,r)=>{if(s!=t.getUint8(r))return s-t.getUint8(r);const o=Ve(t,r+1);if(e!=o)return e-o;const i=Ve(t,r+4);return n!=i?n-i:0},Gs=(s,e,n,t)=>{const r=jt(s,e|128,n,t);return r?{z:e,x:n,y:t,offset:r[0],length:r[1],is_dir:!0}:null},wt=(s,e,n,t)=>{const r=jt(s,e,n,t);return r?{z:e,x:n,y:t,offset:r[0],length:r[1],is_dir:!1}:null},jt=(s,e,n,t)=>{let r=0,o=s.byteLength/17-1;for(;r<=o;){const i=o+r>>1,f=Vs(e,n,t,s,i*17);if(f>0)r=i+1;else if(f<0)o=i-1;else return[Ft(s,i*17+7),s.getUint32(i*17+13,!0)]}return null},Rs=(s,e)=>s.is_dir&&!e.is_dir?1:!s.is_dir&&e.is_dir?-1:s.z!==e.z?s.z-e.z:s.x!==e.x?s.x-e.x:s.y-e.y,Ht=(s,e)=>{const n=s.getUint8(e*17);return{z:n&127,x:Ve(s,e*17+1),y:Ve(s,e*17+4),offset:Ft(s,e*17+7),length:s.getUint32(e*17+13,!0),is_dir:n>>7===1}},vt=s=>{const e=[],n=new DataView(s);for(let t=0;t<n.byteLength/17;t++)e.push(Ht(n,t));return Zs(e)},Zs=s=>{s.sort(Rs);const e=new ArrayBuffer(17*s.length),n=new Uint8Array(e);for(let t=0;t<s.length;t++){const r=s[t];let o=r.z;r.is_dir&&(o=o|128),n[t*17]=o,n[t*17+1]=r.x&255,n[t*17+2]=r.x>>8&255,n[t*17+3]=r.x>>16&255,n[t*17+4]=r.y&255,n[t*17+5]=r.y>>8&255,n[t*17+6]=r.y>>16&255,n[t*17+7]=r.offset&255,n[t*17+8]=ze(r.offset,8)&255,n[t*17+9]=ze(r.offset,16)&255,n[t*17+10]=ze(r.offset,24)&255,n[t*17+11]=ze(r.offset,32)&255,n[t*17+12]=ze(r.offset,48)&255,n[t*17+13]=r.length&255,n[t*17+14]=r.length>>8&255,n[t*17+15]=r.length>>16&255,n[t*17+16]=r.length>>24&255}return e},qs=(s,e)=>{if(s.byteLength<17)return null;const n=s.byteLength/17,t=Ht(s,n-1);if(t.is_dir){const r=t.z,o=e.z-r,i=Math.trunc(e.x/(1<<o)),f=Math.trunc(e.y/(1<<o));return{z:r,x:i,y:f}}return null};function Ks(s){return R(this,null,function*(){const e=yield s.getBytes(0,512e3),n=new DataView(e.data),t=n.getUint32(4,!0),r=n.getUint16(8,!0),o=new TextDecoder("utf-8"),i=JSON.parse(o.decode(new DataView(e.data,10,t)));let f=0;i.compression==="gzip"&&(f=2);let l=0;"minzoom"in i&&(l=+i.minzoom);let u=0;"maxzoom"in i&&(u=+i.maxzoom);let c=0,a=0,$=0,p=-180,y=-85,_=180,C=85;if(i.bounds){const S=i.bounds.split(",");p=+S[0],y=+S[1],_=+S[2],C=+S[3]}if(i.center){const S=i.center.split(",");c=+S[0],a=+S[1],$=+S[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+t,rootDirectoryLength:r*17,jsonMetadataOffset:10,jsonMetadataLength:t,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:f,tileType:1,minZoom:l,maxZoom:u,minLon:p,minLat:y,maxLon:_,maxLat:C,centerZoom:$,centerLon:c,centerLat:a,etag:e.etag}})}function Ws(s,e,n,t,r,o,i){return R(this,null,function*(){let f=yield n.getArrayBuffer(e,s.rootDirectoryOffset,s.rootDirectoryLength,s);s.specVersion===1&&(f=vt(f));const l=wt(new DataView(f),t,r,o);if(l){let a=(yield e.getBytes(l.offset,l.length,i)).data;const $=new DataView(a);return $.getUint8(0)==31&&$.getUint8(1)==139&&(a=Qe(new Uint8Array(a))),{data:a}}const u=qs(new DataView(f),{z:t,x:r,y:o});if(u){const c=Gs(new DataView(f),u.z,u.x,u.y);if(c){let a=yield n.getArrayBuffer(e,c.offset,c.length,s);s.specVersion===1&&(a=vt(a));const $=wt(new DataView(a),t,r,o);if($){let y=(yield e.getBytes($.offset,$.length,i)).data;const _=new DataView(y);return _.getUint8(0)==31&&_.getUint8(1)==139&&(y=Qe(new Uint8Array(y))),{data:y}}}}})}var Vt={getHeader:Ks,getZxy:Ws},Js=class{constructor(){this.tile=(s,e)=>{if(s.type=="json"){const n=s.url.substr(10);let t=this.tiles.get(n);return t||(t=new bt(n),this.tiles.set(n,t)),t.getHeader().then(r=>{const o={tiles:[s.url+"/{z}/{x}/{y}"],minzoom:r.minZoom,maxzoom:r.maxZoom,bounds:[r.minLon,r.minLat,r.maxLon,r.maxLat]};e(null,o,null,null)}).catch(r=>{e(r,null,null,null)}),{cancel:()=>{}}}else{const n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),t=s.url.match(n);if(!t)throw new Error("Invalid PMTiles protocol URL");const r=t[1];let o=this.tiles.get(r);o||(o=new bt(r),this.tiles.set(r,o));const i=t[2],f=t[3],l=t[4],u=new AbortController,c=u.signal;let a=()=>{u.abort()};return o.getHeader().then($=>{o.getZxy(+i,+f,+l,c).then(p=>{p?e(null,new Uint8Array(p.data),p.cacheControl,p.expires):$.tileType==1?e(null,new Uint8Array,null,null):e(null,null,null,null)}).catch(p=>{p.name!=="AbortError"&&e(p,null,null,null)})}),{cancel:a}}},this.tiles=new Map}add(s){this.tiles.set(s.source.getKey(),s)}get(s){return this.tiles.get(s)}};function Oe(s,e){return(e>>>0)*4294967296+(s>>>0)}function Xs(s,e){const n=e.buf;let t,r;if(r=n[e.pos++],t=(r&112)>>4,r<128||(r=n[e.pos++],t|=(r&127)<<3,r<128)||(r=n[e.pos++],t|=(r&127)<<10,r<128)||(r=n[e.pos++],t|=(r&127)<<17,r<128)||(r=n[e.pos++],t|=(r&127)<<24,r<128)||(r=n[e.pos++],t|=(r&1)<<31,r<128))return Oe(s,t);throw new Error("Expected varint not more than 10 bytes")}function Ie(s){const e=s.buf;let n,t;return t=e[s.pos++],n=t&127,t<128||(t=e[s.pos++],n|=(t&127)<<7,t<128)||(t=e[s.pos++],n|=(t&127)<<14,t<128)||(t=e[s.pos++],n|=(t&127)<<21,t<128)?n:(t=e[s.pos],n|=(t&15)<<28,Xs(n,s))}function Ys(s,e,n,t){if(t==0){n==1&&(e[0]=s-1-e[0],e[1]=s-1-e[1]);const r=e[0];e[0]=e[1],e[1]=r}}var Qs=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function eo(s,e,n){if(s>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,s)-1||n>Math.pow(2,s)-1)throw Error("tile x/y outside zoom level bounds");const t=Qs[s],r=Math.pow(2,s);let o=0,i=0,f=0;const l=[e,n];let u=r/2;for(;u>0;)o=(l[0]&u)>0?1:0,i=(l[1]&u)>0?1:0,f+=u*u*(3*o^i),Ys(u,l,o,i),u=u/2;return t+f}function Gt(s,e){return R(this,null,function*(){if(e===1||e===0)return s;if(e===2){if(typeof globalThis.DecompressionStream>"u")return Qe(new Uint8Array(s));{let t=new Response(s).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(t).arrayBuffer()}}else throw Error("Compression method not supported")})}var to=127;function no(s,e){let n=0,t=s.length-1;for(;n<=t;){const r=t+n>>1,o=e-s[r].tileId;if(o>0)n=r+1;else if(o<0)t=r-1;else return s[r]}return t>=0&&(s[t].runLength===0||e-s[t].tileId<s[t].runLength)?s[t]:null}var ro=class{constructor(s){this.url=s}getKey(){return this.url}getBytes(s,e,n){return R(this,null,function*(){let t;n||(t=new AbortController,n=t.signal);let r=yield fetch(this.url,{signal:n,headers:{Range:"bytes="+s+"-"+(s+e-1)}});if(r.status===416&&s===0){const f=r.headers.get("Content-Range");if(!f||!f.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const l=+f.substr(8);r=yield fetch(this.url,{signal:n,headers:{Range:"bytes=0-"+(l-1)}})}if(r.status>=300)throw Error("Bad response code: "+r.status);const o=r.headers.get("Content-Length");if(r.status===200&&(!o||+o>e))throw t&&t.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield r.arrayBuffer(),etag:r.headers.get("ETag")||void 0,cacheControl:r.headers.get("Cache-Control")||void 0,expires:r.headers.get("Expires")||void 0}})}};function te(s,e){const n=s.getUint32(e+4,!0),t=s.getUint32(e+0,!0);return n*Math.pow(2,32)+t}function so(s,e){const n=new DataView(s),t=n.getUint8(7);if(t>3)throw Error(`Archive is spec version ${t} but this library supports up to spec version 3`);return{specVersion:t,rootDirectoryOffset:te(n,8),rootDirectoryLength:te(n,16),jsonMetadataOffset:te(n,24),jsonMetadataLength:te(n,32),leafDirectoryOffset:te(n,40),leafDirectoryLength:te(n,48),tileDataOffset:te(n,56),tileDataLength:te(n,64),numAddressedTiles:te(n,72),numTileEntries:te(n,80),numTileContents:te(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:e}}function Rt(s){const e={buf:new Uint8Array(s),pos:0},n=Ie(e),t=[];let r=0;for(let o=0;o<n;o++){const i=Ie(e);t.push({tileId:r+i,offset:0,length:0,runLength:1}),r+=i}for(let o=0;o<n;o++)t[o].runLength=Ie(e);for(let o=0;o<n;o++)t[o].length=Ie(e);for(let o=0;o<n;o++){const i=Ie(e);i===0&&o>0?t[o].offset=t[o-1].offset+t[o-1].length:t[o].offset=i-1}return t}function oo(s){const e=new DataView(s);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Me=class extends Error{};function lo(s,e,n,t){return R(this,null,function*(){const r=yield s.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(oo(r.data)<3)return[yield Vt.getHeader(s)];const i=r.data.slice(0,to);let f=r.etag;t&&r.etag!=t&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+s.getKey()),f=void 0);const l=so(i,f);if(n){const u=r.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),c=s.getKey()+"|"+(l.etag||"")+"|"+l.rootDirectoryOffset+"|"+l.rootDirectoryLength,a=Rt(yield e(u,l.internalCompression));return[l,[c,a.length,a]]}return[l,void 0]})}function io(s,e,n,t,r){return R(this,null,function*(){const o=yield s.getBytes(n,t);if(r.etag&&r.etag!==o.etag)throw new Me(o.etag);const i=yield e(o.data,r.internalCompression),f=Rt(i);if(f.length===0)throw new Error("Empty directory is invalid");return f})}var ao=class{constructor(s=100,e=!0,n=Gt){this.cache=new Map,this.maxCacheEntries=s,this.counter=1,this.prefetch=e,this.decompress=n}getHeader(s,e){return R(this,null,function*(){const n=s.getKey();if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const t=new Promise((r,o)=>{lo(s,this.decompress,this.prefetch,e).then(i=>{i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:Promise.resolve(i[1][2])}),r(i[0]),this.prune()}).catch(i=>{o(i)})});return this.cache.set(n,{lastUsed:this.counter++,data:t}),t})}getDirectory(s,e,n,t){return R(this,null,function*(){const r=s.getKey()+"|"+(t.etag||"")+"|"+e+"|"+n;if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const o=new Promise((i,f)=>{io(s,this.decompress,e,n,t).then(l=>{i(l),this.prune()}).catch(l=>{f(l)})});return this.cache.set(r,{lastUsed:this.counter++,data:o}),o})}getArrayBuffer(s,e,n,t){return R(this,null,function*(){const r=s.getKey()+"|"+(t.etag||"")+"|"+e+"|"+n;if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const o=new Promise((i,f)=>{s.getBytes(e,n).then(l=>{if(t.etag&&t.etag!==l.etag)throw new Me(l.etag);i(l.data),this.cache.has(r),this.prune()}).catch(l=>{f(l)})});return this.cache.set(r,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let s=1/0,e;this.cache.forEach((n,t)=>{n.lastUsed<s&&(s=n.lastUsed,e=t)}),e&&this.cache.delete(e)}}invalidate(s,e){return R(this,null,function*(){this.cache.delete(s.getKey()),yield this.getHeader(s,e)})}},bt=class{constructor(s,e,n){typeof s=="string"?this.source=new ro(s):this.source=s,n?this.decompress=n:this.decompress=Gt,e?this.cache=e:this.cache=new ao}getHeader(){return R(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(s,e,n,t){return R(this,null,function*(){const r=eo(s,e,n),o=yield this.cache.getHeader(this.source);if(o.specVersion<3)return Vt.getZxy(o,this.source,this.cache,s,e,n,t);if(s<o.minZoom||s>o.maxZoom)return;let i=o.rootDirectoryOffset,f=o.rootDirectoryLength;for(let l=0;l<=3;l++){const u=yield this.cache.getDirectory(this.source,i,f,o),c=no(u,r);if(c)if(c.runLength>0){const a=yield this.source.getBytes(o.tileDataOffset+c.offset,c.length,t);if(o.etag&&o.etag!==a.etag)throw new Me(a.etag);return{data:yield this.decompress(a.data,o.tileCompression),cacheControl:a.cacheControl,expires:a.expires}}else i=o.leafDirectoryOffset+c.offset,f=c.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(s,e,n,t){return R(this,null,function*(){try{return yield this.getZxyAttempt(s,e,n,t)}catch(r){if(r instanceof Me)return this.cache.invalidate(this.source,r.message),yield this.getZxyAttempt(s,e,n,t);throw r}})}getMetadataAttempt(){return R(this,null,function*(){const s=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(s.jsonMetadataOffset,s.jsonMetadataLength);if(s.etag&&s.etag!==e.etag)throw new Me(e.etag);const n=yield this.decompress(e.data,s.internalCompression),t=new TextDecoder("utf-8");return JSON.parse(t.decode(n))})}getMetadata(){return R(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(s){if(s instanceof Me)return this.cache.invalidate(this.source,s.message),yield this.getMetadataAttempt();throw s}})}};function co(s){return et(()=>{let e=new Js;ft.addProtocol("pmtiles",e.tile)}),Ut(()=>{ft.removeProtocol("pmtiles")}),[]}class fo extends H{constructor(e){super(),V(this,e,co,null,G,{})}}function kt(s,e,n){const t=s.slice();return t[15]=e[n],t}function uo(s){let e;return{c(){e=w("Home")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function yt(s){let e,n;return e=new an({props:{errorMessage:s[1]}}),{c(){v(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.errorMessage=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Lt(s){let e,n,t,r;function o(l){s[10](l)}function i(l){s[11](l)}let f={schemes:s[2]};return s[3]!==void 0&&(f.schemesToBeShown=s[3]),s[4]!==void 0&&(f.filterText=s[4]),e=new sr({props:f}),Z.push(()=>q(e,"schemesToBeShown",o)),Z.push(()=>q(e,"filterText",i)),{c(){v(e.$$.fragment)},m(l,u){b(e,l,u),r=!0},p(l,u){const c={};u&4&&(c.schemes=l[2]),!n&&u&8&&(n=!0,c.schemesToBeShown=l[3],K(()=>n=!1)),!t&&u&16&&(t=!0,c.filterText=l[4],K(()=>t=!1)),e.$set(c)},i(l){r||(g(e.$$.fragment,l),r=!0)},o(l){d(e.$$.fragment,l),r=!1},d(l){k(e,l)}}}function Ct(s){let e,n,t=Ue(s[2].values()),r=[];for(let i=0;i<t.length;i+=1)r[i]=Tt(kt(s,t,i));const o=i=>d(r[i],1,1,()=>{r[i]=null});return{c(){e=P("ul");for(let i=0;i<r.length;i+=1)r[i].c()},m(i,f){m(i,e,f);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);n=!0},p(i,f){if(f&13){t=Ue(i[2].values());let l;for(l=0;l<t.length;l+=1){const u=kt(i,t,l);r[l]?(r[l].p(u,f),g(r[l],1)):(r[l]=Tt(u),r[l].c(),g(r[l],1),r[l].m(e,null))}for(_e(),l=t.length;l<r.length;l+=1)o(l);we()}},i(i){if(!n){for(let f=0;f<t.length;f+=1)g(r[f]);n=!0}},o(i){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)d(r[f]);n=!1},d(i){i&&h(e),Je(r,i)}}}function St(s){let e,n;return e=new as({props:{scheme:s[15],authorityNames:s[0]}}),{c(){v(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&4&&(o.scheme=t[15]),r&1&&(o.authorityNames=t[0]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Tt(s){let e=s[3].has(s[15].scheme_reference),n,t,r=e&&St(s);return{c(){r&&r.c(),n=cn()},m(o,i){r&&r.m(o,i),m(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[15].scheme_reference)),e?r?(r.p(o,i),i&12&&g(r,1)):(r=St(o),r.c(),g(r,1),r.m(n.parentNode,n)):r&&(_e(),d(r,1,1,()=>{r=null}),we())},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&h(n),r&&r.d(o)}}}function $o(s){let e,n,t,r,o,i,f,l,u,c,a,$,p;n=new He({props:{$$slots:{default:[uo]},$$scope:{ctx:s}}}),n.$on("click",s[9]),f=new $n({props:{boundaryGeojson:s[5]}});let y=s[1]&&yt(s);c=new nn({props:{label:"Load from GeoJSON",id:"load-geojson",loadFile:s[7]}});let _=s[2].size>0&&Lt(s),C=s[0]&&Ct(s);return{c(){e=P("div"),v(n.$$.fragment),t=A(),r=P("div"),o=P("h1"),o.textContent="Browse schemes",i=A(),v(f.$$.fragment),l=A(),y&&y.c(),u=A(),v(c.$$.fragment),a=A(),_&&_.c(),$=A(),C&&C.c(),me(r,"display","flex"),me(r,"justify-content","space-between"),j(e,"slot","sidebar"),j(e,"class","govuk-prose")},m(L,S){m(L,e,S),b(n,e,null),T(e,t),T(e,r),T(r,o),T(r,i),b(f,r,null),T(e,l),y&&y.m(e,null),T(e,u),b(c,e,null),T(e,a),_&&_.m(e,null),T(e,$),C&&C.m(e,null),p=!0},p(L,S){const M={};S&262144&&(M.$$scope={dirty:S,ctx:L}),n.$set(M);const O={};S&32&&(O.boundaryGeojson=L[5]),f.$set(O),L[1]?y?(y.p(L,S),S&2&&g(y,1)):(y=yt(L),y.c(),g(y,1),y.m(e,u)):y&&(_e(),d(y,1,1,()=>{y=null}),we()),L[2].size>0?_?(_.p(L,S),S&4&&g(_,1)):(_=Lt(L),_.c(),g(_,1),_.m(e,$)):_&&(_e(),d(_,1,1,()=>{_=null}),we()),L[0]?C?(C.p(L,S),S&1&&g(C,1)):(C=Ct(L),C.c(),g(C,1),C.m(e,null)):C&&(_e(),d(C,1,1,()=>{C=null}),we())},i(L){p||(g(n.$$.fragment,L),g(f.$$.fragment,L),g(y),g(c.$$.fragment,L),g(_),g(C),p=!0)},o(L){d(n.$$.fragment,L),d(f.$$.fragment,L),d(y),d(c.$$.fragment,L),d(_),d(C),p=!1},d(L){L&&h(e),k(n),k(f),y&&y.d(),k(c),_&&_.d(),C&&C.d()}}}function po(s){let e,n,t,r;return e=new ps({}),t=new mr({}),{c(){v(e.$$.fragment),n=A(),v(t.$$.fragment)},m(o,i){b(e,o,i),m(o,n,i),b(t,o,i),r=!0},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&h(n),k(e,o),k(t,o)}}}function mo(s){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[po]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&262144&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ho(s){let e,n;return e=new Zr({}),{c(){v(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function go(s){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[ho]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&262144&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function _o(s){let e,n,t,r,o,i,f,l,u,c;return e=new ns({}),t=new ys({}),o=new Kn({}),f=new Lr({}),u=new xr({}),{c(){v(e.$$.fragment),n=A(),v(t.$$.fragment),r=A(),v(o.$$.fragment),i=A(),v(f.$$.fragment),l=A(),v(u.$$.fragment)},m(a,$){b(e,a,$),m(a,n,$),b(t,a,$),m(a,r,$),b(o,a,$),m(a,i,$),b(f,a,$),m(a,l,$),b(u,a,$),c=!0},i(a){c||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(f.$$.fragment,a),g(u.$$.fragment,a),c=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(f.$$.fragment,a),d(u.$$.fragment,a),c=!1},d(a){a&&(h(n),h(r),h(i),h(l)),k(e,a),k(t,a),k(o,a),k(f,a),k(u,a)}}}function wo(s){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[_o]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&262144&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function vo(s){let e,n;return e=new zn({}),{c(){v(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function bo(s){let e,n,t,r,o,i,f,l,u,c;return e=new Le({props:{label:"Trip generators",$$slots:{default:[mo]},$$scope:{ctx:s}}}),t=new Le({props:{label:"Road network",$$slots:{default:[go]},$$scope:{ctx:s}}}),o=new Le({props:{label:"Boundaries",$$slots:{default:[wo]},$$scope:{ctx:s}}}),f=new Le({props:{label:"Census",$$slots:{default:[vo]},$$scope:{ctx:s}}}),u=new hn({props:{style:s[6]}}),{c(){v(e.$$.fragment),n=A(),v(t.$$.fragment),r=A(),v(o.$$.fragment),i=A(),v(f.$$.fragment),l=A(),v(u.$$.fragment)},m(a,$){b(e,a,$),m(a,n,$),b(t,a,$),m(a,r,$),b(o,a,$),m(a,i,$),b(f,a,$),m(a,l,$),b(u,a,$),c=!0},p(a,$){const p={};$&262144&&(p.$$scope={dirty:$,ctx:a}),e.$set(p);const y={};$&262144&&(y.$$scope={dirty:$,ctx:a}),t.$set(y);const _={};$&262144&&(_.$$scope={dirty:$,ctx:a}),o.$set(_);const C={};$&262144&&(C.$$scope={dirty:$,ctx:a}),f.$set(C)},i(a){c||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(f.$$.fragment,a),g(u.$$.fragment,a),c=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(f.$$.fragment,a),d(u.$$.fragment,a),c=!1},d(a){a&&(h(n),h(r),h(i),h(l)),k(e,a),k(t,a),k(o,a),k(f,a),k(u,a)}}}function ko(s){let e,n,t,r,o,i,f,l,u,c,a;return e=new mn({props:{colorInterventions:At("v1")}}),t=new ne({props:{layer:"interventions-points",tooltip:s[8],clickable:!1}}),o=new ne({props:{layer:"interventions-lines",tooltip:s[8],clickable:!1}}),f=new ne({props:{layer:"interventions-polygons",tooltip:s[8],clickable:!1}}),c=new Le({props:{label:"Layers",open:!0,$$slots:{default:[bo]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment),n=A(),v(t.$$.fragment),r=A(),v(o.$$.fragment),i=A(),v(f.$$.fragment),l=A(),u=P("div"),v(c.$$.fragment),j(u,"class","top-right svelte-12h3i77")},m($,p){b(e,$,p),m($,n,p),b(t,$,p),m($,r,p),b(o,$,p),m($,i,p),b(f,$,p),m($,l,p),m($,u,p),b(c,u,null),a=!0},p($,p){const y={};p&262144&&(y.$$scope={dirty:p,ctx:$}),c.$set(y)},i($){a||(g(e.$$.fragment,$),g(t.$$.fragment,$),g(o.$$.fragment,$),g(f.$$.fragment,$),g(c.$$.fragment,$),a=!0)},o($){d(e.$$.fragment,$),d(t.$$.fragment,$),d(o.$$.fragment,$),d(f.$$.fragment,$),d(c.$$.fragment,$),a=!1},d($){$&&(h(n),h(r),h(i),h(l),h(u)),k(e,$),k(t,$),k(o,$),k(f,$),k(c)}}}function yo(s){let e,n,t,r,o;return n=new fo({}),r=new pn({props:{style:s[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[ko]},$$scope:{ctx:s}}}),{c(){e=P("div"),v(n.$$.fragment),t=A(),v(r.$$.fragment),j(e,"slot","main")},m(i,f){m(i,e,f),b(n,e,null),T(e,t),b(r,e,null),o=!0},p(i,f){const l={};f&262144&&(l.$$scope={dirty:f,ctx:i}),r.$set(l)},i(i){o||(g(n.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(n.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&h(e),k(n),k(r)}}}function Lo(s){let e,n;return e=new un({props:{$$slots:{main:[yo],sidebar:[$o]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&262207&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Co(s,e,n){let t,r;J(s,se,S=>n(12,t=S)),J(s,Pe,S=>n(5,r=S));let o=null;et(async()=>{rn();let S=await sn();n(0,o=new Set(S.features.map(M=>M.properties.name)))});let f=new URLSearchParams(window.location.search).get("style")||"dataviz",l="",u=new Map,c=new Set,a="";Ut(()=>{Pe.set(on())});function $(S){try{let M=JSON.parse(S);n(2,u=Wn(M)),Pe.set(M),n(1,l=""),t==null||t.fitBounds(Ot(M),{padding:20,animate:!1})}catch(M){n(1,l=`Couldn't load schemes from a file: ${M}`)}}function p(S){let M=S.properties;var O='<div style="max-width: 30vw;">';return O+=`<h2>${y(M.name)} (${M.intervention_type})</h2>`,O+=`<p>Scheme reference: ${M.scheme_reference}</p>`,M.length_meters&&(O+=`<p>Length: ${ln(M.length_meters)}</p>`),M.description&&(O+=`<p>${y(M.description)}</p>`),O+="</div>",O}function y(S){return a?S.replace(new RegExp(a,"gi"),M=>`<mark>${M}</mark>`):S}const _=()=>window.open("index.html");function C(S){c=S,n(3,c)}function L(S){a=S,n(4,a)}return[o,l,u,c,a,r,f,$,p,_,C,L]}class So extends H{constructor(e){super(),V(this,e,Co,Lo,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new So({target:document.getElementById("app")});
