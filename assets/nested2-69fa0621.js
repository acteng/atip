import{S as J,i as K,s as Y,e as C,h as q,$ as Ce,j as $,W as re,o as p,aP as ol,b as W,c as V,d as O,g as b,m as v,w as at,l as X,t as m,n as g,p as w,X as qt,Y as Ut,Z as Wt,_ as Vt,a7 as Ee,J as pe,K as me,aQ as It,u as k,k as h,D as B,I as Me,N as yn,O as sl,q as we,P as il,Q as al,T as it,U as fl,V as ul,aX as Ml,aY as $t,a4 as Fn,aZ as Nl,aO as Fl,ar as Xt,ae as Sn,aj as Yt,r as Cn,a as Pt,F as pn,v as Qe,aW as Q,a_ as be,a$ as ke,B as Z,ah as x,C as ye,ak as ee,b0 as ie,G as Nt,H as cl,aS as Ht,ab as Dn,b1 as ln,R as $l,b2 as Rt,E as pl,as as Dl,f as mn,ag as El,aU as En,al as jl,am as jn,an as Rn,ao as Kt,aV as Bn,L as Rl,M as Bl,y as Hl}from"./index-cfded16b.js";import{d as tt,j as Lt,C as De,f as nt,h as ae,l as z,c as en,k as zl,S as Gl,B as ql,b as Ft,G as Ul}from"./StreetViewTool-b4a5458c.js";import{a as Ze,F as Wl}from"./Popup-bf51a52b.js";import{P as ue}from"./Popup-4b55b12c.js";import{R as Vl,C as Je,Z as Xl}from"./ZoomOutMap-c082fd87.js";import{L as Yl,a as Ql}from"./LineMeasureController-05a9a3fc.js";function Jl(r){let e;return{c(){e=C("span"),q(e,"class","svelte-kzgqtg"),Ce(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Ce(e,"background",n[0])},i:re,o:re,d(n){n&&p(e)}}}function Kl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class Oe extends J{constructor(e){super(),K(this,e,Kl,Jl,Y,{color:0})}}const Zl="/atip/assets/help-d011708a.svg";function xl(r){let e,n;const t=r[1].default,l=qt(t,r,r[4],null);return{c(){e=C("div"),l&&l.c(),q(e,"class","govuk-prose")},m(o,s){$(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&Ut(l,t,o,o[4],n?Vt(t,o[4],s,null):Wt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){g(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function eo(r){let e,n,t,l,o,s,u;function i(f){r[3](f)}let a={title:"Help",$$slots:{default:[xl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new ol({props:a}),W.push(()=>V(t,"open",i)),{c(){e=C("button"),e.innerHTML=`<img src="${Zl}" title="Help" alt="Help"/>`,n=O(),b(t.$$.fragment),q(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),v(t,f,c),o=!0,s||(u=at(e,"click",r[2]),s=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,_.open=f[0],X(()=>l=!1)),t.$set(_)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){g(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),w(t,f),s=!1,u()}}}function to(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,u,l]}class _e extends J{constructor(e){super(),K(this,e,to,eo,Y,{})}}function Hn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function zn(r){let e,n,t,l=r[1]+"",o,s,u;return n=new Oe({props:{color:r[2]}}),{c(){e=C("li"),b(n.$$.fragment),t=O(),o=k(l),s=O()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&l!==(l=i[1]+"")&&B(o,l)},i(i){u||(m(n.$$.fragment,i),u=!0)},o(i){g(n.$$.fragment,i),u=!1},d(i){i&&p(e),w(n)}}}function no(r){let e,n,t=Ee(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=zn(Hn(r,t,s));const o=s=>g(l[s],1,1,()=>{l[s]=null});return{c(){e=C("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,u){$(s,e,u);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=Ee(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Hn(s,t,i);l[i]?(l[i].p(a,u),m(l[i],1)):(l[i]=zn(a),l[i].c(),m(l[i],1),l[i].m(e,null))}for(pe(),i=t.length;i<l.length;i+=1)o(i);me()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(s){s&&p(e),It(l,s)}}}function ro(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class Tn extends J{constructor(e){super(),K(this,e,ro,no,Y,{rows:0})}}function Gn(r){let e=r[0],n,t,l=qn(r);return{c(){l.c(),n=Me()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?(pe(),g(l,1,1,re),me(),l=qn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l.d(o)}}}function qn(r){let e;const n=r[10].default,t=qt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Ut(t,n,l,l[9],e?Vt(n,l[9],o,null):Wt(l[9]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function lo(r){let e,n,t=r[0]&&Gn(r);return{c(){t&&t.c(),e=Me()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Gn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(pe(),g(t,1,1,()=>{t=null}),me())},i(l){n||(m(t),n=!0)},o(l){g(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function oo(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:u=yn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=sl();we(r,f,y=>n(8,l=y)),we(r,c,y=>n(0,t=y));let _,d=!0;return il(()=>{t&&_&&l&&(al(f,t,_),it(c,t=null,t),n(6,_=void 0))}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(it(c,t=u,t),fl(l,t,ul({type:"raster",tiles:i,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,_=l==null?void 0:l.getSource(t)),n(7,d=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,_=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&_&&(d?n(7,d=!1):_.setTiles(i))},[t,f,c,u,i,a,_,d,l,s,o]}class so extends J{constructor(e){super(),K(this,e,oo,lo,Y,{id:3,tiles:4,tileSize:5})}}function io(r){let e;const n=r[16].default,t=qt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Ut(t,n,l,l[24],e?Vt(n,l[24],o,null):Wt(l[24]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function ao(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[io]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Ml({props:o}),W.push(()=>V(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function fo(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=yn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:A=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:I=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:M=!0}=e;function L(E){j=E,n(0,j)}function N(E){$t.call(this,r,E)}function D(E){$t.call(this,r,E)}function S(E){$t.call(this,r,E)}function F(E){$t.call(this,r,E)}function G(E){$t.call(this,r,E)}function R(E){$t.call(this,r,E)}return r.$$set=E=>{"id"in E&&n(1,o=E.id),"source"in E&&n(2,s=E.source),"sourceLayer"in E&&n(3,u=E.sourceLayer),"beforeId"in E&&n(4,i=E.beforeId),"beforeLayerType"in E&&n(5,a=E.beforeLayerType),"paint"in E&&n(6,f=E.paint),"layout"in E&&n(7,c=E.layout),"filter"in E&&n(8,_=E.filter),"applyToClusters"in E&&n(9,d=E.applyToClusters),"minzoom"in E&&n(10,y=E.minzoom),"maxzoom"in E&&n(11,A=E.maxzoom),"hoverCursor"in E&&n(12,T=E.hoverCursor),"manageHoverState"in E&&n(13,I=E.manageHoverState),"hovered"in E&&n(0,j=E.hovered),"eventsIfTopMost"in E&&n(14,P=E.eventsIfTopMost),"interactive"in E&&n(15,M=E.interactive),"$$scope"in E&&n(24,l=E.$$scope)},[j,o,s,u,i,a,f,c,_,d,y,A,T,I,P,M,t,L,N,D,S,F,G,R,l]}class uo extends J{constructor(e){super(),K(this,e,fo,ao,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Un(r){let e=r[0],n,t,l=Wn(r);return{c(){l.c(),n=Me()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?(pe(),g(l,1,1,re),me(),l=Wn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Wn(r){let e;const n=r[9].default,t=qt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Ut(t,n,l,l[8],e?Vt(n,l[8],o,null):Wt(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function co(r){let e,n,t=r[0]&&Un(r);return{c(){t&&t.c(),e=Me()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Un(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(pe(),g(t,1,1,()=>{t=null}),me())},i(l){n||(m(t),n=!0)},o(l){g(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function $o(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:u=yn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!Fn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Nl;Fn.addProtocol("pmtiles",y.tile)}const{map:c,self:_}=sl();we(r,c,y=>n(7,l=y)),we(r,_,y=>n(0,t=y));let d;return il(()=>{t&&l&&(al(c,t,d),it(_,t=null,t),d=void 0)}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(it(_,t=u,t),fl(l,t,ul({type:"vector",url:i,tiles:a,promoteId:f}),y=>l&&y===t,()=>{t&&(d=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{d=l==null?void 0:l.getSource(u)}))},[t,c,_,u,i,a,f,l,s,o]}class ve extends J{constructor(e){super(),K(this,e,$o,co,Y,{id:3,url:4,tiles:5,promoteId:6})}}const po={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ie=Uint8Array,ut=Uint16Array,ml=Uint32Array,_l=new Ie([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),gl=new Ie([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mo=new Ie([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dl=function(r,e){for(var n=new ut(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new ml(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},hl=dl(_l,2),bl=hl[0],_o=hl[1];bl[28]=258,_o[258]=28;var go=dl(gl,0),ho=go[0],_n=new ut(32768);for(var de=0;de<32768;++de){var lt=(de&43690)>>>1|(de&21845)<<1;lt=(lt&52428)>>>2|(lt&13107)<<2,lt=(lt&61680)>>>4|(lt&3855)<<4,_n[de]=((lt&65280)>>>8|(lt&255)<<8)>>>1}var Bt=function(r,e,n){for(var t=r.length,l=0,o=new ut(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new ut(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var u;if(n){u=new ut(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=s[r[l]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[_n[c]>>>i]=a}else for(u=new ut(t),l=0;l<t;++l)r[l]&&(u[l]=_n[s[r[l]-1]++]>>>15-r[l]);return u},Qt=new Ie(288);for(var de=0;de<144;++de)Qt[de]=8;for(var de=144;de<256;++de)Qt[de]=9;for(var de=256;de<280;++de)Qt[de]=7;for(var de=280;de<288;++de)Qt[de]=8;var vl=new Ie(32);for(var de=0;de<32;++de)vl[de]=5;var bo=Bt(Qt,9,1),vo=Bt(vl,5,1),on=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Re=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},sn=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},wo=function(r){return(r+7)/8|0},On=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?ut:r.BYTES_PER_ELEMENT==4?ml:Ie)(n-e);return t.set(r.subarray(e,n)),t},ko=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Be=function(r,e,n){var t=new Error(e||ko[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Be),!n)throw t;return t},yo=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Ie(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ie(t*3));var s=function(Fe){var Se=e.length;if(Fe>Se){var xe=new Ie(Math.max(Se*2,Fe));xe.set(e),e=xe}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,_=n.m,d=n.n,y=t*8;do{if(!f){u=Re(r,i,1);var A=Re(r,i+1,3);if(i+=3,A)if(A==1)f=bo,c=vo,_=9,d=5;else if(A==2){var P=Re(r,i,31)+257,M=Re(r,i+10,15)+4,L=P+Re(r,i+5,31)+1;i+=14;for(var N=new Ie(L),D=new Ie(19),S=0;S<M;++S)D[mo[S]]=Re(r,i+S*3,7);i+=M*3;for(var F=on(D),G=(1<<F)-1,R=Bt(D,F,1),S=0;S<L;){var E=R[Re(r,i,G)];i+=E&15;var T=E>>>4;if(T<16)N[S++]=T;else{var H=0,U=0;for(T==16?(U=3+Re(r,i,3),i+=2,H=N[S-1]):T==17?(U=3+Re(r,i,7),i+=3):T==18&&(U=11+Re(r,i,127),i+=7);U--;)N[S++]=H}}var ne=N.subarray(0,P),le=N.subarray(P);_=on(ne),d=on(le),f=Bt(ne,_,1),c=Bt(le,d,1)}else Be(1);else{var T=wo(i)+4,I=r[T-4]|r[T-3]<<8,j=T+I;if(j>t){o&&Be(0);break}l&&s(a+I),e.set(r.subarray(T,j),a),n.b=a+=I,n.p=i=j*8,n.f=u;continue}if(i>y){o&&Be(0);break}}l&&s(a+131072);for(var ce=(1<<_)-1,Le=(1<<d)-1,Te=i;;Te=i){var H=f[sn(r,i)&ce],se=H>>>4;if(i+=H&15,i>y){o&&Be(0);break}if(H||Be(2),se<256)e[a++]=se;else if(se==256){Te=i,f=null;break}else{var Ae=se-254;if(se>264){var S=se-257,fe=_l[S];Ae=Re(r,i,(1<<fe)-1)+bl[S],i+=fe}var $e=c[sn(r,i)&Le],ge=$e>>>4;$e||Be(3),i+=$e&15;var le=ho[ge];if(ge>3){var fe=gl[ge];le+=sn(r,i)&(1<<fe)-1,i+=fe}if(i>y){o&&Be(0);break}l&&s(a+131072);for(var je=a+Ae;a<je;a+=4)e[a]=e[a-le],e[a+1]=e[a+1-le],e[a+2]=e[a+2-le],e[a+3]=e[a+3-le];a=je}}n.l=f,n.p=Te,n.b=a,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=d)}while(!u);return a==e.length?e:On(e,0,a)},So=new Ie(0),Ye=function(r,e){return r[e]|r[e+1]<<8},He=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},an=function(r,e){return He(r,e)+He(r,e+4)*4294967296};function Co(r,e){return yo(r,e)}var gn=typeof TextDecoder<"u"&&new TextDecoder,To=0;try{gn.decode(So,{stream:!0}),To=1}catch{}var Oo=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,On(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function wl(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(gn)return gn.decode(r);var l=Oo(r),o=l[0],s=l[1];return s.length&&Be(8),o}}var Ao=function(r,e){return e+30+Ye(r,e+26)+Ye(r,e+28)},Lo=function(r,e,n){var t=Ye(r,e+28),l=wl(r.subarray(e+46,e+46+t),!(Ye(r,e+8)&2048)),o=e+46+t,s=He(r,e+20),u=n&&s==4294967295?Io(r,o):[s,He(r,e+24),He(r,e+42)],i=u[0],a=u[1],f=u[2];return[Ye(r,e+10),i,a,l,o+Ye(r,e+30)+Ye(r,e+32),f]},Io=function(r,e){for(;Ye(r,e)!=1;e+=4+Ye(r,e+2));return[an(r,e+12),an(r,e+4),an(r,e+20)]};function Po(r,e){for(var n={},t=r.length-22;He(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Be(13);var l=Ye(r,t+8);if(!l)return{};var o=He(r,t+16),s=o==4294967295||l==65535;if(s){var u=He(r,t-12);s=He(r,u)==101075792,s&&(l=He(r,u+32),o=He(r,u+48))}for(var i=e&&e.filter,a=0;a<l;++a){var f=Lo(r,o,s),c=f[0],_=f[1],d=f[2],y=f[3],A=f[4],T=f[5],I=Ao(r,T);o=A,(!i||i({name:y,size:_,originalSize:d,compression:c}))&&(c?c==8?n[y]=Co(r.subarray(I,I+_),new Ie(d)):Be(14,"unknown compression type "+c):n[y]=On(r,I,I+_))}return n}function Mo(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(fn):fn(r)}function fn(r){var e=new Uint8Array(r),n=Po(e);return Promise.resolve(No(n))}function No(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=wl(r[l])}return e}function Ke(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&ct(t)===e)return t;n++}}function Jt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&ct(l)===e&&n.push(l),t++}return n}function tn(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&ct(l)===e&&n(l,t):n(l,t),t++}}function Fo(r,e,n){var t=[];return tn(r,e,function(l,o){t.push(n(l,o))}),t}var Do=/.+\:/;function ct(r){return r.tagName.replace(Do,"")}function kl(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+ct(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=kl(r.childNodes[t]),t++;return e+="</"+ct(r)+">",e}function Eo(r){var e=r.documentElement,n=Ke(e,"sheetData"),t=[];return tn(n,"row",function(l){tn(l,"c",function(o){t.push(o)})}),t}function jo(r,e){return Ke(e,"v")}function Ro(r,e){if(e.firstChild&&ct(e.firstChild)==="is"&&e.firstChild.firstChild&&ct(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Bo(r){var e=r.documentElement,n=Ke(e,"dimension");if(n)return n.getAttribute("ref")}function Ho(r){var e=r.documentElement,n=Ke(e,"cellStyleXfs");return n?Jt(n,"xf"):[]}function zo(r){var e=r.documentElement,n=Ke(e,"cellXfs");return n?Jt(n,"xf"):[]}function Go(r){var e=r.documentElement,n=Ke(e,"numFmts");return n?Jt(n,"numFmt"):[]}function qo(r){var e=r.documentElement;return Fo(e,"si",function(n){var t=Ke(n,"t");if(t)return t.textContent;var l="";return tn(n,"r",function(o){l+=Ke(o,"t").textContent}),l})}function Uo(r){var e=r.documentElement;return Ke(e,"workbookPr")}function Wo(r){var e=r.documentElement;return Jt(e,"Relationship")}function Vo(r){var e=r.documentElement,n=Ke(e,"sheets");return Jt(n,"sheet")}function Xo(r,e){var n=e.createDocument(r),t={},l=Uo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return Vo(n).forEach(o),t}function Yo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=un(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=un(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=un(u);break}};return Wo(n).forEach(l),t}function un(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Vn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Xn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vn(Object(n),!0).forEach(function(t){Qo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Qo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Jo(r,e){if(!r)return{};var n=e.createDocument(r),t=Ho(n).map(cn),l=Go(n).map(Ko).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?Xn(Xn({},t[u.xfId]),cn(u,l)):cn(u,l)};return zo(n).map(o)}function Ko(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function cn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Zo(r,e){return r?qo(e.createDocument(r)):[]}function yl(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function xo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=es(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function es(r,e){if(r){if(typeof r=="string")return Yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(r,e)}}function Yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ts(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(ns.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&os(l.numberFormat.template))return!0}}var ns=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],rs=/^\[\$-414\]/,ls=/;@$/;function os(r){r=r.toLowerCase(),r=r.replace(rs,""),r=r.replace(ls,"");for(var e=r.split(/\W+/),n=xo(e),t;!(t=n()).done;){var l=t.value;if(ss.indexOf(l)<0)return!1}return!0}var ss=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function is(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=$n(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=$n(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=$n(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=as(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var _=Number(r);if(isNaN(_))throw new Error('Invalid "numeric" cell value: '.concat(r));r=_,ts(r,o(),s,a)&&(r=yl(r,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function as(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function $n(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var fs=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function us(r){var e=function(a,f){return a-f},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:l,column:s},{row:o,column:u}]}function cs(r){for(var e=0,n=0;n<r.length;)e*=26,e+=fs.indexOf(r[n]),n++;return e}function Sl(r){return r=r.split(/(\d+)/),[parseInt(r[1]),cs(r[0].trim())]}function $s(r,e,n,t,l,o,s){var u=Sl(r.getAttribute("r")),i=jo(e,r),a=i&&i.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:is(a,f,{getInlineStringValue:function(){return Ro(e,r)},getInlineStringXml:function(){return kl(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function ps(r,e,n,t,l,o){var s=Eo(r);return s.length===0?[]:s.map(function(u){return $s(u,r,e,n,t,l,o)})}function ms(r,e){return hs(r)||ds(r,e)||gs(r,e)||_s()}function _s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gs(r,e){if(r){if(typeof r=="string")return Qn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qn(r,e)}}function Qn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ds(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function hs(r){if(Array.isArray(r))return r}function bs(r){var e=Bo(r);if(e)return e=e.split(":").map(Sl).map(function(n){var t=ms(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function vs(r,e,n,t,l,o){var s=e.createDocument(r),u=ps(s,e,n,t,l,o),i=bs(s)||us(u);return{cells:u,dimensions:i}}function ws(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ks(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ks(r,e){if(r){if(typeof r=="string")return Jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(r,e)}}function Jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ys(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var u=!0,i=ws(r[s]),a;!(a=i()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function Ss(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Cs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cs(r,e){if(r){if(typeof r=="string")return Kn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(r,e)}}function Kn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ts(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,u=Ss(r),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Os(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Cl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function As(r,e){return Ps(r)||Is(r,e)||Cl(r,e)||Ls()}function Ls(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cl(r,e){if(r){if(typeof r=="string")return Zn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(r,e)}}function Zn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Is(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ps(r){if(Array.isArray(r))return r}function Ms(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=As(n,2);l[0];for(var o=l[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=Os(t),_;!(_=c()).done;){var d=_.value,y=d.row-1,A=d.column-1;A<s&&y<u&&(i[y][A]=d.value)}var T=e.rowMap;if(T)for(var I=0;I<i.length;)T[I]=I,I++;return i=ys(Ts(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(i=e.transformData(i)),i}function Ns(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Fs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fs(r,e){if(r){if(typeof r=="string")return xn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(r,e)}}function xn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function er(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Ds(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?er(Object(n),!0).forEach(function(t){Es(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Es(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function js(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Ds({sheet:1},n));var t=function(_){if(!r[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return r[_]},l=Yo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Zo(t(l.sharedStrings),e):[],s=l.styles?Jo(t(l.styles),e):{},u=Xo(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var i=Rs(n.sheet,u.sheets);if(!i||!l.sheets[i])throw Bs(n.sheet,u.sheets);var a=vs(t(l.sheets[i]),e,o,s,u,n),f=Ms(a,n);return n.properties?{data:f,properties:u}:f}function Rs(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Ns(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Bs(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function dn(r){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(r)}function tr(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Hs(r,e,n){return e&&tr(r.prototype,e),n&&tr(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function zs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Gs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&zt(r,e)}function qs(r){var e=Tl();return function(){var t=Gt(r),l;if(e){var o=Gt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return Us(this,l)}}function Us(r,e){if(e&&(dn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ws(r)}function Ws(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function hn(r){var e=typeof Map=="function"?new Map:void 0;return hn=function(t){if(t===null||!Vs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return xt(t,arguments,Gt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),zt(l,t)},hn(r)}function xt(r,e,n){return Tl()?xt=Reflect.construct:xt=function(l,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(l,u),a=new i;return s&&zt(a,s.prototype),a},xt.apply(null,arguments)}function Tl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vs(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function zt(r,e){return zt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},zt(r,e)}function Gt(r){return Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Gt(r)}var Pe=function(r){Gs(n,r);var e=qs(n);function n(t){var l;return zs(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Hs(n)}(hn(Error));function Xs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Pe("not_a_number")}if(typeof r!="number")throw new Pe("not_a_number");if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");return r}function Ys(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");return String(r)}throw new Pe("not_a_string")}function Qs(r){if(typeof r=="boolean")return r;throw new Pe("not_a_boolean")}function Js(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Pe("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");var t=yl(r,n);if(isNaN(t.valueOf()))throw new Pe("out_of_bounds");return t}throw new Pe("not_a_date")}function Ks(r,e){return ei(r)||xs(r,e)||Ol(r,e)||Zs()}function Zs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ei(r){if(Array.isArray(r))return r}function bn(r){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(r)}function ti(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ol(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ol(r,e){if(r){if(typeof r=="string")return nr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(r,e)}}function nr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function rr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function lr(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rr(Object(n),!0).forEach(function(t){ni(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ni(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var or={isColumnOriented:!1};function ri(r,e,n){n?n=lr(lr({},or),n):n=or;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ii(e),l&&(r=si(r));for(var u=r[0],i=[],a=[],f=1;f<r.length;f++){var c=Al(e,r[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var _=ti(a),d;!(d=_()).done;){var y=d.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function Al(r,e,n,t,l,o){for(var s={},u=!0,i=function(){var _=f[a],d=r[_],y=bn(d.type)==="object"&&!Array.isArray(d.type),A=e[t.indexOf(_)];A===void 0&&(A=null);var T=void 0,I=void 0,j=void 0;if(y)T=Al(d.type,e,n,t,l,o);else if(A===null)T=null;else if(Array.isArray(d.type)){var P=!1,M=oi(A).map(function(N){var D=sr(N,d,o);return D.error&&(T=N,I=D.error,j=D.reason),D.value!==null&&(P=!0),D.value});I||(T=P?M:null)}else{var L=sr(A,d,o);I=L.error,j=L.reason,T=I?A:L.value}!I&&T===null&&d.required&&(I="required"),I?(I={error:I,row:n+1,column:_,value:T},j&&(I.reason=j),d.type&&(I.type=d.type),l.push(I)):(u&&T!==null&&(u=!1),(T!==null||o.includeNullValues)&&(s[d.prop]=T))},a=0,f=Object.keys(r);a<f.length;a++)i();return u?null:s}function sr(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=pt(r,e.parse):e.type?t=li(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function pt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function li(r,e,n){switch(e){case String:return pt(r,Ys);case Number:return pt(r,Xs);case Date:return pt(r,function(t){return Js(t,{properties:n.properties})});case Boolean:return pt(r,Qs);default:if(typeof e=="function")return pt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Ll(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=Ll(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function oi(r){for(var e=[],n=0;n<r.length;){var t=Ll(r,",",n),l=Ks(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var si=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function ii(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function vn(r){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(r)}function Il(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;vn(o)==="object"&&(o=Object.keys(r[l])[0],s=Il(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var ai=["schema","map"];function ir(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Zt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ir(Object(n),!0).forEach(function(t){fi(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function fi(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ui(r,e){if(r==null)return{};var n=ci(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ci(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function $i(r,e,n){var t=n.schema,l=n.map,o=ui(n,ai);!t&&l&&(t=Il(l));var s=js(r,e,Zt(Zt({},o),{},{properties:t||o.properties}));return t?ri(s.data,t,Zt(Zt({},o),{},{properties:s.properties})):s}function pi(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Mo(r).then(function(n){return $i(n,po,e)})}function mi(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>_i(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function _i(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function gi(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await pi(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Fl(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const wn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function di(r){return Xt(["get","intervention_type"],{area:tt.area,route:tt.route,crossing:tt.crossing,other:tt.other},"white")}function hi(r){return[["Areas",tt.area],["Routes",tt.route],["Crossings",tt.crossing],["Other",tt.other]]}const te={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},ze=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function kn(){let[r,e]=Pl(wn,te.funding_programmes);return[Xt(["get","funding_programme"],r,"grey"),e]}function bi(){let r=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=Pl(r,te.current_milestone);return[Xt(["get","current_milestone"],e,"grey"),n]}function Pl(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function vi(r){let e,n;return e=new Tn({props:{rows:r[1]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function wi(r){let e,n,t,l,o;function s(i){r[3](i)}let u={label:"Color interventions",id:"colorInterventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Lt({props:u}),W.push(()=>V(e,"value",s)),e.$on("change",r[2]),l=new De({props:{label:"Legend",$$slots:{default:[vi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],X(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function ki(r,e,n){let t;we(r,Sn,a=>n(4,t=a));let l="fundingProgramme",[o,s]=kn();function u(){let a;l=="interventionType"?(a=di(),n(1,s=hi())):l=="fundingProgramme"?n(1,[a,s]=kn(),s):l=="currentMilestone"&&n(1,[a,s]=bi(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){l=a,n(0,l)}return[l,s,u,i]}class yi extends J{constructor(e){super(),K(this,e,ki,wi,Y,{})}}const Mt=Yt({type:"FeatureCollection",features:[],schemes:{}}),nn=Yt(new Map),ar=Yt(!0),Dt=Yt(""),Et=Yt("");function Si(r){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ci(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ti(r){let e,n,t,l,o,s;return t=new Pt({props:{$$slots:{default:[Ci]},$$scope:{ctx:r}}}),t.$on("click",r[16]),{c(){e=C("input"),n=O(),b(t.$$.fragment),q(e,"type","text"),q(e,"class","govuk-input govuk-input--width-10"),q(e,"id","filterInterventionText")},m(u,i){$(u,e,i),Qe(e,r[6]),$(u,n,i),v(t,u,i),l=!0,o||(s=at(e,"input",r[15]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&Qe(e,u[6]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){g(t.$$.fragment,u),l=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function Oi(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ai(r){let e,n,t,l,o,s;return t=new Pt({props:{$$slots:{default:[Oi]},$$scope:{ctx:r}}}),t.$on("click",r[18]),{c(){e=C("input"),n=O(),b(t.$$.fragment),q(e,"type","text"),q(e,"class","govuk-input govuk-input--width-10"),q(e,"id","filterSchemeText")},m(u,i){$(u,e,i),Qe(e,r[5]),$(u,n,i),v(t,u,i),l=!0,o||(s=at(e,"input",r[17]),o=!0)},p(u,i){i&32&&e.value!==u[5]&&Qe(e,u[5]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){g(t.$$.fragment,u),l=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function Li(r){let e,n,t,l,o,s,u,i,a,f,c,_,d,y,A,T,I;e=new Pt({props:{$$slots:{default:[Si]},$$scope:{ctx:r}}}),e.$on("click",r[11]);function j(S){r[12](S)}let P={label:"Authority or region",id:"filterAuthority",choices:r[7],emptyOption:!0};r[2]!==void 0&&(P.value=r[2]),t=new Lt({props:P}),W.push(()=>V(t,"value",j));function M(S){r[13](S)}let L={label:"Funding programme",id:"filterFundingProgramme",choices:r[8],emptyOption:!0};r[3]!==void 0&&(L.value=r[3]),s=new Lt({props:L}),W.push(()=>V(s,"value",M));function N(S){r[14](S)}let D={label:"Current milestone",id:"filterCurrentMilestone",choices:r[9],emptyOption:!0};return r[4]!==void 0&&(D.value=r[4]),a=new Lt({props:D}),W.push(()=>V(a,"value",N)),_=new pn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Ti]},$$scope:{ctx:r}}}),y=new pn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Ai]},$$scope:{ctx:r}}}),T=new yi({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment),i=O(),b(a.$$.fragment),c=O(),b(_.$$.fragment),d=O(),b(y.$$.fragment),A=O(),b(T.$$.fragment)},m(S,F){v(e,S,F),$(S,n,F),v(t,S,F),$(S,o,F),v(s,S,F),$(S,i,F),v(a,S,F),$(S,c,F),v(_,S,F),$(S,d,F),v(y,S,F),$(S,A,F),v(T,S,F),I=!0},p(S,F){const G={};F&16777216&&(G.$$scope={dirty:F,ctx:S}),e.$set(G);const R={};F&128&&(R.choices=S[7]),!l&&F&4&&(l=!0,R.value=S[2],X(()=>l=!1)),t.$set(R);const E={};F&256&&(E.choices=S[8]),!u&&F&8&&(u=!0,E.value=S[3],X(()=>u=!1)),s.$set(E);const H={};F&512&&(H.choices=S[9]),!f&&F&16&&(f=!0,H.value=S[4],X(()=>f=!1)),a.$set(H);const U={};F&16777280&&(U.$$scope={dirty:F,ctx:S}),_.$set(U);const ne={};F&16777248&&(ne.$$scope={dirty:F,ctx:S}),y.$set(ne)},i(S){I||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(s.$$.fragment,S),m(a.$$.fragment,S),m(_.$$.fragment,S),m(y.$$.fragment,S),m(T.$$.fragment,S),I=!0)},o(S){g(e.$$.fragment,S),g(t.$$.fragment,S),g(s.$$.fragment,S),g(a.$$.fragment,S),g(_.$$.fragment,S),g(y.$$.fragment,S),g(T.$$.fragment,S),I=!1},d(S){S&&(p(n),p(o),p(i),p(c),p(d),p(A)),w(e,S),w(t,S),w(s,S),w(a,S),w(_,S),w(y,S),w(T,S)}}}function Ii(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[10].route.toLocaleString()+"",s,u,i=r[10].area.toLocaleString()+"",a,f,c=r[10].crossing.toLocaleString()+"",_,d,y=r[10].other.toLocaleString()+"",A,T,I=fr(r[10].totalLength).toFixed(1)+"",j,P;return{c(){e=k("Showing "),t=k(n),l=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),_=k(c),d=k(" crossings, "),A=k(y),T=k(`
    other, with total LineString length of `),j=k(I),P=k(" miles)")},m(M,L){$(M,e,L),$(M,t,L),$(M,l,L),$(M,s,L),$(M,u,L),$(M,a,L),$(M,f,L),$(M,_,L),$(M,d,L),$(M,A,L),$(M,T,L),$(M,j,L),$(M,P,L)},p(M,L){L&1&&n!==(n=M[0].size.toLocaleString()+"")&&B(t,n),L&1024&&o!==(o=M[10].route.toLocaleString()+"")&&B(s,o),L&1024&&i!==(i=M[10].area.toLocaleString()+"")&&B(a,i),L&1024&&c!==(c=M[10].crossing.toLocaleString()+"")&&B(_,c),L&1024&&y!==(y=M[10].other.toLocaleString()+"")&&B(A,y),L&1024&&I!==(I=fr(M[10].totalLength).toFixed(1)+"")&&B(j,I)},d(M){M&&(p(e),p(t),p(l),p(s),p(u),p(a),p(f),p(_),p(d),p(A),p(T),p(j),p(P))}}}function Pi(r){let e,n,t;function l(s){r[19](s)}let o={id:"show-schemes",$$slots:{default:[Ii]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ae({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&16778241&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Mi(r){let e,n,t,l;return e=new De({props:{label:"Filters",$$slots:{default:[Li]},$$scope:{ctx:r}}}),t=new nt({props:{small:!0,$$slots:{default:[Pi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const u={};s&16778236&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16778243&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function fr(r){return r*621371e-9}function Ni(r,e,n){let t,l,o,s;we(r,Et,R=>n(5,t=R)),we(r,Dt,R=>n(6,l=R)),we(r,Mt,R=>n(20,o=R)),we(r,nn,R=>n(21,s=R));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],_=new Set(wn.slice(0,-1)),d="",y=[],A="",T={area:0,route:0,crossing:0,other:0,totalLength:0};Cn(()=>{var U,ne,le;let R=new Set,E=new Set,H=new Set;for(let ce of s.values())(U=ce.browse)!=null&&U.authority_or_region&&R.add(ce.browse.authority_or_region),(ne=ce.browse)!=null&&ne.funding_programme&&E.add(ce.browse.funding_programme),(le=ce.browse)!=null&&le.current_milestone&&H.add(ce.browse.current_milestone);n(7,a=Array.from(R.entries())),a.sort(),n(8,c=wn.map(ce=>[ce,ce])),n(9,y=Array.from(H.entries())),y.sort()});function I(R,E,H,U,ne){let le=R.toLowerCase(),ce=E.toLowerCase(),Le=se=>{var Ae,fe,$e,ge,je,Fe;if(le&&!((Ae=se.properties.name)!=null&&Ae.toLowerCase().includes(le))&&!((fe=se.properties.description)!=null&&fe.toLowerCase().includes(le)))return!1;if(ce||H||U||ne){let Se=s.get(se.properties.scheme_reference);if(H&&(($e=Se.browse)==null?void 0:$e.authority_or_region)!=H||U&&U!=="Other"&&((ge=Se.browse)==null?void 0:ge.funding_programme)!=U||U==="Other"&&_.has(((je=Se.browse)==null?void 0:je.funding_programme)??"")||ne&&((Fe=Se.browse)==null?void 0:Fe.current_milestone)!=ne||ce&&!Se.scheme_reference.toLowerCase().includes(ce)&&!(Se.scheme_name??"").toLowerCase().includes(ce))return!1}return!0};n(0,u=new Set(o.features.filter(Le).map(se=>se.properties.scheme_reference))),n(10,T={area:0,route:0,crossing:0,other:0,totalLength:0});let Te=se=>{var Ae,fe;return!(!u.has(se.properties.scheme_reference)||le&&!((Ae=se.properties.name)!=null&&Ae.toLowerCase().includes(le))&&!((fe=se.properties.description)!=null&&fe.toLowerCase().includes(le)))};for(let se of o.features)Te(se)?(delete se.properties.hide_while_editing,n(10,T[se.properties.intervention_type]++,T),se.geometry.type=="LineString"&&se.properties.length_meters&&n(10,T.totalLength+=se.properties.length_meters,T)):se.properties.hide_while_editing=!0;Mt.set(o),n(10,T)}function j(){n(2,f=""),n(3,d=""),n(4,A=""),it(Dt,l="",l),it(Et,t="",t)}function P(R){f=R,n(2,f)}function M(R){d=R,n(3,d)}function L(R){A=R,n(4,A)}function N(){l=this.value,Dt.set(l)}const D=()=>it(Dt,l="",l);function S(){t=this.value,Et.set(t)}const F=()=>it(Et,t="",t);function G(R){i=R,n(1,i)}return r.$$set=R=>{"schemesToBeShown"in R&&n(0,u=R.schemesToBeShown),"show"in R&&n(1,i=R.show)},r.$$.update=()=>{r.$$.dirty&124&&I(l,t,f,d,A)},[u,i,f,d,A,t,l,a,c,y,T,j,P,M,L,N,D,S,F,G]}class Fi extends J{constructor(e){super(),K(this,e,Ni,Mi,Y,{schemesToBeShown:0,show:1})}}function Di(r){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ei(r){let e,n,t,l,o;return t=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Di]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("License: "),b(t.$$.fragment),l=k(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),h(e,n),v(t,e,null),h(e,l),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){g(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class Ne extends J{constructor(e){super(),K(this,e,null,Ei,Y,{})}}function ur(r,e,n){const t=r.slice();return t[2]=e[n],t}function cr(r,e,n){const t=r.slice();return t[5]=e[n],t}function $r(r){let e,n;return{c(){e=C("span"),n=k(` 
    `),Ce(e,"background",r[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,l){$(t,e,l),h(e,n)},p(t,l){l&1&&Ce(e,"background",t[5])},d(t){t&&p(e)}}}function pr(r){let e,n=r[2]+"",t;return{c(){e=C("span"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&B(t,n)},d(l){l&&p(e)}}}function ji(r){let e,n,t,l=Ee(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=$r(cr(r,l,i));let s=Ee(r[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=pr(ur(r,s,i));return{c(){e=C("div");for(let i=0;i<o.length;i+=1)o[i].c();n=O(),t=C("div");for(let i=0;i<u.length;i+=1)u[i].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){l=Ee(i[0]);let f;for(f=0;f<l.length;f+=1){const c=cr(i,l,f);o[f]?o[f].p(c,a):(o[f]=$r(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){s=Ee(i[1]);let f;for(f=0;f<s.length;f+=1){const c=ur(i,s,f);u[f]?u[f].p(c,a):(u[f]=pr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:re,o:re,d(i){i&&(p(e),p(n),p(t)),It(o,i),It(u,i)}}}function Ri(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ge extends J{constructor(e){super(),K(this,e,Ri,ji,Y,{colorScale:0,limits:1})}}function mr(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Bi(r){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hi(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gi(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qi(r){let e,n,t,l,o,s,u,i,a,f,c,_;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[zi]},$$scope:{ctx:r}}}),f=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Gi]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=O(),i=C("p"),a=k("License: "),b(f.$$.fragment),c=k(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(d,y){$(d,e,y),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(d,u,y),$(d,i,y),h(i,a),v(f,i,null),h(i,c),_=!0},p(d,y){const A={};y&65536&&(A.$$scope={dirty:y,ctx:d}),t.$set(A);const T={};y&65536&&(T.$$scope={dirty:y,ctx:d}),o.$set(T);const I={};y&65536&&(I.$$scope={dirty:y,ctx:d}),f.$set(I)},i(d){_||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),_=!0)},o(d){g(t.$$.fragment,d),g(o.$$.fragment,d),g(f.$$.fragment,d),_=!1},d(d){d&&(p(e),p(u),p(i)),w(t),w(o),w(f)}}}function Ui(r){let e,n,t;return n=new _e({props:{$$slots:{default:[qi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function _r(r){let e,n;return e=new Ge({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Wi(r){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yi(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qi(r){let e,n,t,l,o,s,u,i,a,f,c,_,d,y;return o=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Vi]},$$scope:{ctx:r}}}),u=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Xi]},$$scope:{ctx:r}}}),_=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Yi]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=C("p"),l=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(u.$$.fragment),i=k("."),a=O(),f=C("p"),c=k("License: "),b(_.$$.fragment),d=k(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(A,T){$(A,e,T),$(A,n,T),$(A,t,T),h(t,l),v(o,t,null),h(t,s),v(u,t,null),h(t,i),$(A,a,T),$(A,f,T),h(f,c),v(_,f,null),h(f,d),y=!0},p(A,T){const I={};T&65536&&(I.$$scope={dirty:T,ctx:A}),o.$set(I);const j={};T&65536&&(j.$$scope={dirty:T,ctx:A}),u.$set(j);const P={};T&65536&&(P.$$scope={dirty:T,ctx:A}),_.$set(P)},i(A){y||(m(o.$$.fragment,A),m(u.$$.fragment,A),m(_.$$.fragment,A),y=!0)},o(A){g(o.$$.fragment,A),g(u.$$.fragment,A),g(_.$$.fragment,A),y=!1},d(A){A&&(p(e),p(n),p(t),p(a),p(f)),w(o),w(u),w(_)}}}function Ji(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Qi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function gr(r){let e,n;return e=new Ge({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ki(r){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zi(r){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ea(r){let e,n,t,l,o,s,u,i,a;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Zi]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[xi]},$$scope:{ctx:r}}}),i=new Ne({}),{c(){e=C("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function ta(r){let e,n,t;return n=new _e({props:{$$slots:{default:[ea]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function dr(r){let e,n,t,l;return t=new Ge({props:{colorScale:r[4],limits:r[6]().map(fa)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:re,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function na(r){let e,n,t,l=r[15].toLocaleString()+"",o,s,u=r[14]+"",i;return{c(){e=C("p"),n=k("There are "),t=C("b"),o=k(l),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){$(a,e,f),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&B(o,l),f&8192&&u!==(u=a[14]+"")&&B(i,u)},d(a){a&&p(e)}}}function ra(r){let e,n,t=r[14]+"",l,o,s,u=r[15]+"",i,a;return{c(){e=C("p"),n=k("Households in "),l=k(t),o=k(` have an average of
          `),s=C("b"),i=k(u),a=k(`
          cars`)},m(f,c){$(f,e,c),h(e,n),h(e,l),h(e,o),h(e,s),h(s,i),h(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(l,t),c&8200&&u!==(u=f[15]+"")&&B(i,u)},d(f){f&&p(e)}}}function la(r){let e,n,t=r[15]+"",l,o,s,u=r[14]+"",i,a;return{c(){e=C("p"),n=C("b"),l=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){$(f,e,c),h(e,n),h(n,l),h(n,o),h(e,s),h(e,i),h(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(l,t),c&8192&&u!==(u=f[14]+"")&&B(i,u)},d(f){f&&p(e)}}}function oa(r){mr(r);let e;function n(o,s){return o[3]=="percent_households_with_car"?la:o[3]=="average_cars_per_household"?ra:na}let t=n(r),l=t(r);return{c(){l.c(),e=Me()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){mr(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function sa(r){let e,n;return e=new ue({props:{$$slots:{default:[oa,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ia(r){let e,n,t,l;const o=[z(et),{sourceLayer:et},{paint:{"fill-color":ke(["get",r[3]],r[6](),r[4]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[sa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s}),e.$on("click",r[5]);const u=[z(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&88?ee(o,[f&0&&ie(z(et)),f&0&&{sourceLayer:et},f&88&&{paint:{"fill-color":ke(["get",a[3]],a[6](),a[4]),"fill-opacity":Z(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&8?ee(u,[f&0&&ie(z(`${et}-outline`)),f&0&&{sourceLayer:et},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function aa(r){let e,n,t,l,o,s,u,i,a,f,c,_,d,y;function A(S){r[7](S)}let T={id:"percent_households_with_car",$$slots:{right:[Ui],default:[Bi]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new ae({props:T}),W.push(()=>V(e,"checked",A)),e.$on("change",r[8]);let I=r[3]=="percent_households_with_car"&&_r(r);function j(S){r[9](S)}let P={id:"average_cars_per_household",$$slots:{right:[Ji],default:[Wi]},$$scope:{ctx:r}};r[1]!==void 0&&(P.checked=r[1]),o=new ae({props:P}),W.push(()=>V(o,"checked",j)),o.$on("change",r[10]);let M=r[3]=="average_cars_per_household"&&gr(r);function L(S){r[11](S)}let N={id:"population_density",$$slots:{right:[ta],default:[Ki]},$$scope:{ctx:r}};r[2]!==void 0&&(N.checked=r[2]),a=new ae({props:N}),W.push(()=>V(a,"checked",L)),a.$on("change",r[12]);let D=r[3]=="population_density"&&dr(r);return d=new ve({props:{url:`pmtiles://${be()}/v1/${et}.pmtiles`,$$slots:{default:[ia]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),I&&I.c(),l=O(),b(o.$$.fragment),u=O(),M&&M.c(),i=O(),b(a.$$.fragment),c=O(),D&&D.c(),_=O(),b(d.$$.fragment)},m(S,F){v(e,S,F),$(S,t,F),I&&I.m(S,F),$(S,l,F),v(o,S,F),$(S,u,F),M&&M.m(S,F),$(S,i,F),v(a,S,F),$(S,c,F),D&&D.m(S,F),$(S,_,F),v(d,S,F),y=!0},p(S,[F]){const G={};F&65536&&(G.$$scope={dirty:F,ctx:S}),!n&&F&1&&(n=!0,G.checked=S[0],X(()=>n=!1)),e.$set(G),S[3]=="percent_households_with_car"?I?(I.p(S,F),F&8&&m(I,1)):(I=_r(S),I.c(),m(I,1),I.m(l.parentNode,l)):I&&(pe(),g(I,1,1,()=>{I=null}),me());const R={};F&65536&&(R.$$scope={dirty:F,ctx:S}),!s&&F&2&&(s=!0,R.checked=S[1],X(()=>s=!1)),o.$set(R),S[3]=="average_cars_per_household"?M?(M.p(S,F),F&8&&m(M,1)):(M=gr(S),M.c(),m(M,1),M.m(i.parentNode,i)):M&&(pe(),g(M,1,1,()=>{M=null}),me());const E={};F&65536&&(E.$$scope={dirty:F,ctx:S}),!f&&F&4&&(f=!0,E.checked=S[2],X(()=>f=!1)),a.$set(E),S[3]=="population_density"?D?(D.p(S,F),F&8&&m(D,1)):(D=dr(S),D.c(),m(D,1),D.m(_.parentNode,_)):D&&(pe(),g(D,1,1,()=>{D=null}),me());const H={};F&65544&&(H.$$scope={dirty:F,ctx:S}),d.$set(H)},i(S){y||(m(e.$$.fragment,S),m(I),m(o.$$.fragment,S),m(M),m(a.$$.fragment,S),m(D),m(d.$$.fragment,S),y=!0)},o(S){g(e.$$.fragment,S),g(I),g(o.$$.fragment,S),g(M),g(a.$$.fragment,S),g(D),g(d.$$.fragment,S),y=!1},d(S){S&&(p(t),p(l),p(u),p(i),p(c),p(_)),w(e,S),I&&I.d(S),w(o,S),M&&M.d(S),w(a,S),D&&D.d(S),w(d,S)}}}let et="census_output_areas";const fa=r=>r.toLocaleString();function ua(r,e,n){let t=te.sequential_low_to_high,l=!1,o=!1,s=!1,u="";function i(T){let I=T.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${I}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${I}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,s=!1)};function _(T){o=T,n(1,o)}const d=()=>{n(0,l=!1),n(2,s=!1)};function y(T){s=T,n(2,s)}const A=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[l,o,s,u,t,i,a,f,c,_,d,y,A]}class ca extends J{constructor(e){super(),K(this,e,ua,aa,Y,{})}}function $a(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function pa(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ma(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[pa]},$$scope:{ctx:r}}}),s=new Ne({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of December 2022."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function _a(r){let e,n,t;return n=new _e({props:{$$slots:{default:[ma]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function ga(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function da(r){let e,n;return e=new ue({props:{$$slots:{default:[ga,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ha(r){let e,n,t,l;const o=[z(mt),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[da]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s}),e.$on("click",va);const u=[z(`${mt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ee(o,[f&0&&ie(z(mt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ee(u,[f&0&&ie(z(`${mt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function ba(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:mt,$$slots:{right:[_a],default:[$a]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),W.push(()=>V(e,"checked",s)),l=new Nt({props:{data:`${be()}/v1/${mt}.geojson`,$$slots:{default:[ha]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let mt="combined_authorities";function va(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function wa(r,e,n){let t=te.combined_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ka extends J{constructor(e){super(),K(this,e,wa,ba,Y,{})}}function ya(r){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sa(r){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ca(r){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ta(r){let e,n,t,l,o,s,u,i,a;return t=new Q({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Sa]},$$scope:{ctx:r}}}),o=new Q({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Ca]},$$scope:{ctx:r}}}),i=new Ne({}),{c(){e=C("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),l=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function Oa(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Ta]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function hr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Aa(r){let e,n=r[4].LSOA11CD+"",t,l,o,s=r[4].score+"",u,i,a,f,c,_=r[4].rank.toLocaleString()+"",d,y;return{c(){e=C("p"),t=k(n),l=k(` has an IMD score of
        `),o=C("b"),u=k(s),i=O(),a=C("p"),f=k("Rank: "),c=C("b"),d=k(_),y=k(`
        / 32,844 LSOAs`)},m(A,T){$(A,e,T),h(e,t),h(e,l),h(e,o),h(o,u),$(A,i,T),$(A,a,T),h(a,f),h(a,c),h(c,d),h(a,y)},p(A,T){T&16&&n!==(n=A[4].LSOA11CD+"")&&B(t,n),T&16&&s!==(s=A[4].score+"")&&B(u,s),T&16&&_!==(_=A[4].rank.toLocaleString()+"")&&B(d,_)},d(A){A&&(p(e),p(i),p(a))}}}function La(r){let e,n;return e=new ue({props:{$$slots:{default:[Aa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ia(r){let e,n,t,l;const o=[z(qe),{sourceLayer:qe},{paint:{"fill-color":ke(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[La]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s});const u=[z(`${qe}-outline`),{sourceLayer:qe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&7?ee(o,[f&0&&ie(z(qe)),f&0&&{sourceLayer:qe},f&6&&{paint:{"fill-color":ke(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Z(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?ee(u,[f&0&&ie(z(`${qe}-outline`)),f&0&&{sourceLayer:qe},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Pa(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:qe,$$slots:{right:[Oa],default:[ya]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",u));let a=r[0]&&hr(r);return o=new ve({props:{url:`pmtiles://${be()}/v1/${qe}.pmtiles`,$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=hr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(pe(),g(a,1,1,()=>{a=null}),me());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let qe="imd";function Ma(r,e,n){let t=te.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class Na extends J{constructor(e){super(),K(this,e,Ma,Pa,Y,{})}}function Fa(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Da(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ea(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Da]},$$scope:{ctx:r}}}),s=new Ne({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function ja(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Ea]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Ra(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Ba(r){let e,n;return e=new ue({props:{$$slots:{default:[Ra,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ha(r){let e,n,t,l;const o=[z(_t),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ba]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s}),e.$on("click",Ga);const u=[z(`${_t}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ee(o,[f&0&&ie(z(_t)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ee(u,[f&0&&ie(z(`${_t}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function za(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:_t,$$slots:{right:[ja],default:[Fa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),W.push(()=>V(e,"checked",s)),l=new Nt({props:{data:`${be()}/v1/${_t}.geojson`,$$slots:{default:[Ha]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let _t="local_authority_districts";function Ga(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function qa(r,e,n){let t=te.local_authority_districts,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Ua extends J{constructor(e){super(),K(this,e,qa,za,Y,{})}}function Wa(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Va(r){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xa(r){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ya(r){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qa(r){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ja(r){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ka(r){let e,n,t,l,o,s,u,i,a,f,c,_,d,y,A,T,I,j,P,M,L,N;return t=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Va]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),u=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ya]},$$scope:{ctx:r}}}),d=new Q({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Qa]},$$scope:{ctx:r}}}),j=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ja]},$$scope:{ctx:r}}}),L=new Ne({}),{c(){e=C("p"),n=k("LPAs may be a "),b(t.$$.fragment),l=k(", "),b(o.$$.fragment),s=k("y, or "),b(u.$$.fragment),i=k("."),a=O(),f=C("p"),c=C("strong"),_=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(d.$$.fragment),y=k(" to get more details."),A=O(),T=C("p"),I=k("Data from ONS Geography via "),b(j.$$.fragment),P=k(", as of November 2022."),M=O(),b(L.$$.fragment)},m(D,S){$(D,e,S),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),v(u,e,null),h(e,i),$(D,a,S),$(D,f,S),h(f,c),h(c,_),v(d,c,null),h(c,y),$(D,A,S),$(D,T,S),h(T,I),v(j,T,null),h(T,P),$(D,M,S),v(L,D,S),N=!0},p(D,S){const F={};S&16&&(F.$$scope={dirty:S,ctx:D}),t.$set(F);const G={};S&16&&(G.$$scope={dirty:S,ctx:D}),o.$set(G);const R={};S&16&&(R.$$scope={dirty:S,ctx:D}),u.$set(R);const E={};S&16&&(E.$$scope={dirty:S,ctx:D}),d.$set(E);const H={};S&16&&(H.$$scope={dirty:S,ctx:D}),j.$set(H)},i(D){N||(m(t.$$.fragment,D),m(o.$$.fragment,D),m(u.$$.fragment,D),m(d.$$.fragment,D),m(j.$$.fragment,D),m(L.$$.fragment,D),N=!0)},o(D){g(t.$$.fragment,D),g(o.$$.fragment,D),g(u.$$.fragment,D),g(d.$$.fragment,D),g(j.$$.fragment,D),g(L.$$.fragment,D),N=!1},d(D){D&&(p(e),p(a),p(f),p(A),p(T),p(M)),w(t),w(o),w(u),w(d),w(j),w(L,D)}}}function Za(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Ka]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function xa(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function ef(r){let e,n;return e=new ue({props:{$$slots:{default:[xa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function tf(r){let e,n,t,l;const o=[z(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[ef]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s});const u=[z(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ee(o,[f&0&&ie(z(Ue)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ee(u,[f&0&&ie(z(`${Ue}-outline`)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function nf(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:Ue,$$slots:{right:[Za],default:[Wa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${Ue}.pmtiles`,$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ue="local_planning_authorities";function rf(r,e,n){let t=te.local_planning_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class lf extends J{constructor(e){super(),K(this,e,rf,nf,Y,{})}}function of(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function sf(r){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function af(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[sf]},$$scope:{ctx:r}}}),s=new Ne({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function ff(r){let e,n,t;return n=new _e({props:{$$slots:{default:[af]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function uf(r){let e,n=r[3].Name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&B(t,n)},d(l){l&&p(e)}}}function cf(r){let e,n;return e=new ue({props:{$$slots:{default:[uf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $f(r){let e,n,t,l;const o=[z(We),{sourceLayer:We},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[cf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s}),e.$on("click",mf);const u=[z(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ee(o,[f&0&&ie(z(We)),f&0&&{sourceLayer:We},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ee(u,[f&0&&ie(z(`${We}-outline`)),f&0&&{sourceLayer:We},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function pf(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:We,$$slots:{right:[ff],default:[of]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${We}.pmtiles`,$$slots:{default:[$f]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let We="parliamentary_constituencies";function mf(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function _f(r,e,n){let t=te.parliamentary_constituencies,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class gf extends J{constructor(e){super(),K(this,e,_f,pf,Y,{})}}function df(r){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hf(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bf(r){let e;return{c(){e=k(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vf(r){let e;return{c(){e=k(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wf(r){let e,n,t,l,o,s,u,i,a,f,c,_,d,y,A,T;return t=new Q({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[hf]},$$scope:{ctx:r}}}),f=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[bf]},$$scope:{ctx:r}}}),_=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[vf]},$$scope:{ctx:r}}}),A=new Ne({}),{c(){e=C("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),l=k(`. The measurements are annual means, in units of
        µgm
        `),o=C("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=O(),i=C("p"),a=k("The noise layer is from "),b(f.$$.fragment),c=k(", using 2017 data. See their "),b(_.$$.fragment),d=k("."),y=O(),b(A.$$.fragment)},m(I,j){$(I,e,j),h(e,n),v(t,e,null),h(e,l),h(e,o),h(e,s),$(I,u,j),$(I,i,j),h(i,a),v(f,i,null),h(i,c),v(_,i,null),h(i,d),$(I,y,j),v(A,I,j),T=!0},p(I,j){const P={};j&2048&&(P.$$scope={dirty:j,ctx:I}),t.$set(P);const M={};j&2048&&(M.$$scope={dirty:j,ctx:I}),f.$set(M);const L={};j&2048&&(L.$$scope={dirty:j,ctx:I}),_.$set(L)},i(I){T||(m(t.$$.fragment,I),m(f.$$.fragment,I),m(_.$$.fragment,I),m(A.$$.fragment,I),T=!0)},o(I){g(t.$$.fragment,I),g(f.$$.fragment,I),g(_.$$.fragment,I),g(A.$$.fragment,I),T=!1},d(I){I&&(p(e),p(u),p(i),p(y)),w(t),w(f),w(_),w(A,I)}}}function kf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[wf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function br(r){let e,n,t,l,o=r[3](r[0])+"",s,u,i,a,f,c,_,d,y,A,T,I,j;function P(S){r[7](S)}let M={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(M.value=r[0]),e=new Lt({props:M}),W.push(()=>V(e,"value",P));const L=[Sf,yf],N=[];function D(S,F){return S[0]=="Noise"?0:1}return d=D(r),y=N[d]=L[d](r),{c(){b(e.$$.fragment),t=O(),l=C("p"),s=k(o),u=O(),i=C("div"),a=C("label"),f=k(`Opacity
      `),c=C("input"),_=O(),y.c(),A=Me(),q(c,"type","range"),q(c,"min","0"),q(c,"max","100")},m(S,F){v(e,S,F),$(S,t,F),$(S,l,F),h(l,s),$(S,u,F),$(S,i,F),h(i,a),h(a,f),h(a,c),Qe(c,r[2]),$(S,_,F),N[d].m(S,F),$(S,A,F),T=!0,I||(j=[at(c,"change",r[8]),at(c,"input",r[8])],I=!0)},p(S,F){const G={};!n&&F&1&&(n=!0,G.value=S[0],X(()=>n=!1)),e.$set(G),(!T||F&1)&&o!==(o=S[3](S[0])+"")&&B(s,o),F&4&&Qe(c,S[2]);let R=d;d=D(S),d===R?N[d].p(S,F):(pe(),g(N[R],1,1,()=>{N[R]=null}),me(),y=N[d],y?y.p(S,F):(y=N[d]=L[d](S),y.c()),m(y,1),y.m(A.parentNode,A))},i(S){T||(m(e.$$.fragment,S),m(y),T=!0)},o(S){g(e.$$.fragment,S),g(y),T=!1},d(S){S&&(p(t),p(l),p(u),p(i),p(_),p(A)),w(e,S),N[d].d(S),I=!1,cl(j)}}}function yf(r){let e,n,t;return{c(){e=C("img"),Dn(e.src,n=r[5](r[0]))||q(e,"src",n),q(e,"width",150),q(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!Dn(e.src,n=l[5](l[0]))&&q(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&q(e,"alt",t)},i:re,o:re,d(l){l&&p(e)}}}function Sf(r){let e,n;return e=new Ge({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Cf(r){let e,n;const t=[z("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Vl({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&6?ee(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Tf(r){let e,n,t,l,o,s;function u(f){r[6](f)}let i={id:"pollution",$$slots:{right:[kf],default:[df]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new ae({props:i}),W.push(()=>V(e,"checked",u));let a=r[1]&&br(r);return o=new so({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Cf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=br(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(pe(),g(a,1,1,()=>{a=null}),me());const d={};c&1&&(d.tiles=[f[4](f[0])]),c&2054&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}function Of(r,e,n){let t,l=!1,o=50,s="PM25_viridis";function u(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let A=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${A}`}function f(y){let A=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${A}`}function c(y){l=y,n(1,l)}function _(y){s=y,n(0,s)}function d(){o=Ht(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,l,o,i,a,f,c,_,d]}class Af extends J{constructor(e){super(),K(this,e,Of,Tf,Y,{})}}function Lf(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function If(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pf(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[If]},$$scope:{ctx:r}}}),s=new Ne({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Mf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Pf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Nf(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Ff(r){let e,n;return e=new ue({props:{$$slots:{default:[Nf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Df(r){let e,n,t,l;const o=[z(Ve),{sourceLayer:Ve},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ff]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s}),e.$on("click",jf);const u=[z(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ee(o,[f&0&&ie(z(Ve)),f&0&&{sourceLayer:Ve},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ee(u,[f&0&&ie(z(`${Ve}-outline`)),f&0&&{sourceLayer:Ve},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Ef(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:Ve,$$slots:{right:[Mf],default:[Lf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${Ve}.pmtiles`,$$slots:{default:[Df]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ve="wards";function jf(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Rf(r,e,n){let t=te.wards,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Bf extends J{constructor(e){super(),K(this,e,Rf,Ef,Y,{})}}function Hf(r){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zf(r){let e,n,t,l;return t=new Q({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),l=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&p(e),w(t)}}}class rt extends J{constructor(e){super(),K(this,e,null,zf,Y,{})}}function Gf(r){let e,n,t;return e=new Oe({props:{color:te.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function qf(r){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uf(r){let e,n,t,l,o,s,u,i,a;return o=new Q({props:{href:"https://gtfs.org",$$slots:{default:[qf]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=C("p"),l=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,l),v(o,t,null),h(t,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){g(o.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(i,f)}}}function Wf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Vf(r){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xf(r){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yf(r){let e;function n(o,s){return o[2].has_bus_lane?Xf:Vf}let t=n(r),l=t(r);return{c(){l.c(),e=Me()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Qf(r){let e,n;return e=new ue({props:{$$slots:{default:[Yf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jf(r){let e,n;const t=[z(gt),{sourceLayer:gt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],te.bus_route_with_lane,te.bus_route_without_lane],"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Qf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ee(t,[s&0&&ie(z(gt)),s&0&&{sourceLayer:gt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Kf(r){let e,n,t,l,o;function s(i){r[1](i)}let u={id:gt,$$slots:{right:[Wf],default:[Gf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${gt}.pmtiles`,$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let gt="bus_routes";function Zf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class xf extends J{constructor(e){super(),K(this,e,Zf,Kf,Y,{})}}function vr(r){const e=fu(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function wr(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function eu(r){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tu(r){let e,n,t,l,o,s,u,i;return u=new rt({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=O(),o=C("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=O(),b(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,l,f),$(a,o,f),$(a,s,f),v(u,a,f),i=!0},p:re,i(a){i||(m(u.$$.fragment,a),i=!0)},o(a){g(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(s)),w(u,a)}}}function nu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function kr(r){let e,n,t;return n=new nt({props:{$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function ru(r){let e,n,t=r[9]+"",l,o,s;return e=new Oe({props:{color:r[10]}}),{c(){b(e.$$.fragment),n=O(),l=k(t),o=O()},m(u,i){v(e,u,i),$(u,n,i),$(u,l,i),$(u,o,i),s=!0},p:re,i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(l),p(o)),w(e,u)}}}function yr(r){let e,n,t;function l(s){r[4](s,r[6])}let o={id:r[6],$$slots:{default:[ru]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new ae({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){r=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:r}),!n&&u&6&&(n=!0,i.checked=r[1][r[6]],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function lu(r){let e,n,t=Ee(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=yr(wr(r,t,s));const o=s=>g(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Me()},m(s,u){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=Ee(s[2]);let i;for(i=0;i<t.length;i+=1){const a=wr(s,t,i);l[i]?(l[i].p(a,u),m(l[i],1)):(l[i]=yr(a),l[i].c(),m(l[i],1),l[i].m(e.parentNode,e))}for(pe(),i=t.length;i<l.length;i+=1)o(i);me()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(s){s&&p(e),It(l,s)}}}function ou(r){vr(r);let e,n=r[6]+"",t,l,o,s,u,i=r[7]+"",a,f,c,_,d=r[8]+"",y;return{c(){e=C("h2"),t=k(n),l=O(),o=C("p"),s=k("Direction: "),u=C("b"),a=O(),f=C("p"),c=k("Width: "),_=C("b"),y=k(d)},m(A,T){$(A,e,T),h(e,t),$(A,l,T),$(A,o,T),h(o,s),h(o,u),u.innerHTML=i,$(A,a,T),$(A,f,T),h(f,c),h(f,_),h(_,y)},p(A,T){vr(A),T&32&&n!==(n=A[6]+"")&&B(t,n),T&32&&i!==(i=A[7]+"")&&(u.innerHTML=i),T&32&&d!==(d=A[8]+"")&&B(y,d)},d(A){A&&(p(e),p(l),p(o),p(a),p(f))}}}function su(r){let e,n;return e=new ue({props:{$$slots:{default:[ou,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function iu(r){let e,n;const t=[z(dt),{sourceLayer:dt},{paint:{"line-color":Xt(["get","kind"],{track:te.cycle_paths.track,lane:te.cycle_paths.lane,shared_use_segregated:te.cycle_paths.shared_use_segregated,shared_use_unsegregated:te.cycle_paths.shared_use_unsegregated},"red"),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:Sr(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[su]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),e.$on("click",uu),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ee(t,[s&0&&ie(z(dt)),s&0&&{sourceLayer:dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Sr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function au(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:dt,$$slots:{right:[nu],default:[eu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",u));let a=r[0]&&kr(r);return o=new ve({props:{url:`pmtiles://${be()}/v1/${dt}.pmtiles`,$$slots:{default:[iu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&8192&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=kr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(pe(),g(a,1,1,()=>{a=null}),me());const d={};c&8195&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let dt="cycle_paths";function fu(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function uu(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Sr(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function cu(r,e,n){let t=[["track","Separated tracks",te.cycle_paths.track],["lane","Unprotected lanes",te.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",te.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",te.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){l=i,n(0,l)}function u(i,a){r.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[l,o,t,s,u]}class $u extends J{constructor(e){super(),K(this,e,cu,au,Y,{})}}function pu(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function mu(r){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _u(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[mu]},$$scope:{ctx:r}}}),s=new Ne({}),{c(){e=C("p"),n=k("Data from the "),b(t.$$.fragment),l=k(", as of September 2021."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function gu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[_u]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function du(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&B(t,n)},d(l){l&&p(e)}}}function hu(r){let e,n;return e=new ue({props:{$$slots:{default:[du,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function bu(r){let e,n;const t=[z(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[hu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ee(t,[s&0&&ie(z(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function vu(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:ht,$$slots:{right:[gu],default:[pu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${ht}.pmtiles`,$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let ht="mrn";function wu(r,e,n){let t=te.mrn,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ku extends J{constructor(e){super(),K(this,e,wu,vu,Y,{})}}function yu(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Su(r){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cu(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Su]},$$scope:{ctx:r}}}),s=new Ne({}),{c(){e=C("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),l=k(", downloaded on 22/01/2024."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Tu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Cu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Cr(r){let e,n,t,l=r[3].Desc_+"",o;return{c(){e=C("li"),n=k("Description: "),t=C("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].Desc_+"")&&B(o,l)},d(s){s&&p(e)}}}function Tr(r){let e,n,t,l=r[3].Greenway+"",o;return{c(){e=C("li"),n=k("Is greenway: "),t=C("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].Greenway+"")&&B(o,l)},d(s){s&&p(e)}}}function Or(r){let e,n,t,l=r[3].RouteType+"",o;return{c(){e=C("li"),n=k("Route type: "),t=C("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].RouteType+"")&&B(o,l)},d(s){s&&p(e)}}}function Ar(r){let e,n,t,l=r[3].RouteNo+"",o;return{c(){e=C("li"),n=k("Route number: "),t=C("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].RouteNo+"")&&B(o,l)},d(s){s&&p(e)}}}function Lr(r){let e,n,t,l=r[3].RouteCat+"",o;return{c(){e=C("li"),n=k("Route Category: "),t=C("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].RouteCat+"")&&B(o,l)},d(s){s&&p(e)}}}function Ir(r){let e,n,t,l=r[3].OpenStatus+"",o;return{c(){e=C("li"),n=k("Open Status: "),t=C("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].OpenStatus+"")&&B(o,l)},d(s){s&&p(e)}}}function Pr(r){let e,n,t,l=r[3].Surface+"",o;return{c(){e=C("li"),n=k("Surface: "),t=C("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].Surface+"")&&B(o,l)},d(s){s&&p(e)}}}function Mr(r){let e,n,t,l=r[3].Quality+"",o;return{c(){e=C("li"),n=k("Quality: "),t=C("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].Quality+"")&&B(o,l)},d(s){s&&p(e)}}}function Nr(r){let e,n,t,l=r[3].RoadClass+"",o;return{c(){e=C("li"),n=k("Road Class: "),t=C("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].RoadClass+"")&&B(o,l)},d(s){s&&p(e)}}}function Ou(r){let e,n,t,l,o,s,u,i,a,f=r[3].Desc_&&Cr(r),c=r[3].Greenway&&Tr(r),_=r[3].RouteType&&Or(r),d=r[3].RouteNo&&Ar(r),y=r[3].RouteCat&&Lr(r),A=r[3].OpenStatus&&Ir(r),T=r[3].Surface&&Pr(r),I=r[3].Quality&&Mr(r),j=r[3].RoadClass&&Nr(r);return{c(){e=C("ul"),f&&f.c(),n=O(),c&&c.c(),t=O(),_&&_.c(),l=O(),d&&d.c(),o=O(),y&&y.c(),s=O(),A&&A.c(),u=O(),T&&T.c(),i=O(),I&&I.c(),a=O(),j&&j.c()},m(P,M){$(P,e,M),f&&f.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),_&&_.m(e,null),h(e,l),d&&d.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),A&&A.m(e,null),h(e,u),T&&T.m(e,null),h(e,i),I&&I.m(e,null),h(e,a),j&&j.m(e,null)},p(P,M){P[3].Desc_?f?f.p(P,M):(f=Cr(P),f.c(),f.m(e,n)):f&&(f.d(1),f=null),P[3].Greenway?c?c.p(P,M):(c=Tr(P),c.c(),c.m(e,t)):c&&(c.d(1),c=null),P[3].RouteType?_?_.p(P,M):(_=Or(P),_.c(),_.m(e,l)):_&&(_.d(1),_=null),P[3].RouteNo?d?d.p(P,M):(d=Ar(P),d.c(),d.m(e,o)):d&&(d.d(1),d=null),P[3].RouteCat?y?y.p(P,M):(y=Lr(P),y.c(),y.m(e,s)):y&&(y.d(1),y=null),P[3].OpenStatus?A?A.p(P,M):(A=Ir(P),A.c(),A.m(e,u)):A&&(A.d(1),A=null),P[3].Surface?T?T.p(P,M):(T=Pr(P),T.c(),T.m(e,i)):T&&(T.d(1),T=null),P[3].Quality?I?I.p(P,M):(I=Mr(P),I.c(),I.m(e,a)):I&&(I.d(1),I=null),P[3].RoadClass?j?j.p(P,M):(j=Nr(P),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},d(P){P&&p(e),f&&f.d(),c&&c.d(),_&&_.d(),d&&d.d(),y&&y.d(),A&&A.d(),T&&T.d(),I&&I.d(),j&&j.d()}}}function Au(r){let e,n;return e=new ue({props:{$$slots:{default:[Ou,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Lu(r){let e,n;const t=[z(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Au]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ee(t,[s&0&&ie(z(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Iu(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:bt,$$slots:{right:[Tu],default:[yu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${bt}.pmtiles`,$$slots:{default:[Lu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let bt="national_cycle_network";function Pu(r,e,n){let t=te.national_cycle_network,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Mu extends J{constructor(e){super(),K(this,e,Pu,Iu,Y,{})}}function Nu(r){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fu(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Du(r){let e,n,t,l,o,s,u,i,a;return u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=O(),t=C("p"),t.textContent="Data valid as of 1 January, 2024",l=O(),o=C("p"),s=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),w(u)}}}function Eu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Du]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Fr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ju(r){let e,n,t,l=r[4].side+"",o,s,u,i,a,f=r[4].average+"",c,_,d,y,A,T,I=r[4].minimum+"",j,P;return{c(){e=C("p"),n=k("Side of the road: "),t=C("b"),o=k(l),s=O(),u=C("p"),i=k("Average width: "),a=C("b"),c=k(f),_=k(`
        meters`),d=O(),y=C("p"),A=k("Minimum width: "),T=C("b"),j=k(I),P=k(`
        meters`)},m(M,L){$(M,e,L),h(e,n),h(e,t),h(t,o),$(M,s,L),$(M,u,L),h(u,i),h(u,a),h(a,c),h(u,_),$(M,d,L),$(M,y,L),h(y,A),h(y,T),h(T,j),h(y,P)},p(M,L){L&16&&l!==(l=M[4].side+"")&&B(o,l),L&16&&f!==(f=M[4].average+"")&&B(c,f),L&16&&I!==(I=M[4].minimum+"")&&B(j,I)},d(M){M&&(p(e),p(s),p(u),p(d),p(y))}}}function Ru(r){let e,n;return e=new ue({props:{$$slots:{default:[ju,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Bu(r){let e,n;const t=[z(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],r[2],r[1]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Ru]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ee(t,[s&0&&ie(z(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&6&&{paint:{"line-color":ke(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Hu(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:vt,$$slots:{right:[Eu],default:[Nu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",u));let a=r[0]&&Fr(r);return o=new ve({props:{url:`pmtiles://${ln()}/v1/${vt}.pmtiles`,$$slots:{default:[Bu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Fr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(pe(),g(a,1,1,()=>{a=null}),me());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let vt="pavement_widths";function zu(r,e,n){let t=te.sequential_low_to_high,l=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class Gu extends J{constructor(e){super(),K(this,e,zu,Hu,Y,{})}}function qu(r){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uu(r){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wu(r){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vu(r){let e,n,t,l,o,s,u,i,a,f,c;return u=new Q({props:{href:"https://www.pct.bike",$$slots:{default:[Uu]},$$scope:{ctx:r}}}),a=new Q({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=O(),o=C("p"),s=k("See "),b(u.$$.fragment),i=k(" and "),b(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(_,d){$(_,e,d),$(_,n,d),$(_,t,d),$(_,l,d),$(_,o,d),h(o,s),v(u,o,null),h(o,i),v(a,o,null),h(o,f),c=!0},p(_,d){const y={};d&1024&&(y.$$scope={dirty:d,ctx:_}),u.$set(y);const A={};d&1024&&(A.$$scope={dirty:d,ctx:_}),a.$set(A)},i(_){c||(m(u.$$.fragment,_),m(a.$$.fragment,_),c=!0)},o(_){g(u.$$.fragment,_),g(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(l),p(o)),w(u),w(a)}}}function Xu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Vu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Dr(r){let e,n,t,l,o,s,u,i;e=new Ge({props:{colorScale:r[3],limits:r[4]}});function a(d){r[7](d)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new $l({props:f}),W.push(()=>V(t,"value",a));function c(d){r[8](d)}let _={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(_.value=r[1]),s=new Lt({props:_}),W.push(()=>V(s,"value",c)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment)},m(d,y){v(e,d,y),$(d,n,y),v(t,d,y),$(d,o,y),v(s,d,y),i=!0},p(d,y){const A={};!l&&y&1&&(l=!0,A.value=d[0],X(()=>l=!1)),t.$set(A);const T={};!u&&y&2&&(u=!0,T.value=d[1],X(()=>u=!1)),s.$set(T)},i(d){i||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(s.$$.fragment,d),i=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(s.$$.fragment,d),i=!1},d(d){d&&(p(n),p(o)),w(e,d),w(t,d),w(s,d)}}}function Yu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Rt(!1),t=Me(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Qu(r){let e,n;return e=new ue({props:{$$slots:{default:[Yu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ju(r){let e,n;const t=[z(Xe),{sourceLayer:Xe},{paint:{"line-color":ke(["get",r[1]],r[4],r[3]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==Xe?"visible":"none"}}];let l={$$slots:{default:[Qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?ee(t,[s&0&&ie(z(Xe)),s&0&&{sourceLayer:Xe},s&26&&{paint:{"line-color":ke(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==Xe?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Ku(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Rt(!1),t=Me(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Zu(r){let e,n;return e=new ue({props:{$$slots:{default:[Ku,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xu(r){let e,n;const t=[z(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",r[1]],r[4],r[3]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==ft?"visible":"none"}}];let l={$$slots:{default:[Zu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?ee(t,[s&0&&ie(z(ft)),s&0&&{sourceLayer:ft},t[2],t[3],s&26&&{paint:{"line-color":ke(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ft?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ec(r){let e,n,t,l,o,s,u,i;function a(_){r[6](_)}let f={id:Xe,$$slots:{right:[Xu],default:[qu]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new ae({props:f}),W.push(()=>V(e,"checked",a));let c=r[2]&&Dr(r);return o=new ve({props:{url:`pmtiles://${be()}/v1/${Xe}.pmtiles`,$$slots:{default:[Ju]},$$scope:{ctx:r}}}),u=new ve({props:{url:`pmtiles://${be()}/v1/${ft}.pmtiles`,$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),c&&c.c(),l=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment)},m(_,d){v(e,_,d),$(_,t,d),c&&c.m(_,d),$(_,l,d),v(o,_,d),$(_,s,d),v(u,_,d),i=!0},p(_,[d]){const y={};d&1024&&(y.$$scope={dirty:d,ctx:_}),!n&&d&4&&(n=!0,y.checked=_[2],X(()=>n=!1)),e.$set(y),_[2]?c?(c.p(_,d),d&4&&m(c,1)):(c=Dr(_),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(pe(),g(c,1,1,()=>{c=null}),me());const A={};d&1031&&(A.$$scope={dirty:d,ctx:_}),o.$set(A);const T={};d&1031&&(T.$$scope={dirty:d,ctx:_}),u.$set(T)},i(_){i||(m(e.$$.fragment,_),m(c),m(o.$$.fragment,_),m(u.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),g(c),g(o.$$.fragment,_),g(u.$$.fragment,_),i=!1},d(_){_&&(p(t),p(l),p(s)),w(e,_),c&&c.d(_),w(o,_),w(u,_)}}}let Xe="pct_commute",ft="pct_school";function tc(r,e,n){let t=te.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Xe,s="baseline",u=!1;function i(_){let d=_.baseline,y=_.gov_target,A=_.go_dutch,T=`<h2>Trip purpose: ${o==Xe?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)T+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${A.toLocaleString()}</b></p>`;else{let I=(y/d).toFixed(1),j=(A/d).toFixed(1);T+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${A.toLocaleString()} (<b>${j}x</b> of baseline)</p>`}return T}function a(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){s=_,n(1,s)}return[o,s,u,t,l,i,a,f,c]}class nc extends J{constructor(e){super(),K(this,e,tc,ec,Y,{})}}function rc(r){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lc(r){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oc(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sc(r){let e,n,t,l,o,s,u,i,a,f,c,_;return t=new Q({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[lc]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[oc]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),l=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),s=C("p"),s.textContent="Data valid as of 1 September, 2023",u=O(),i=C("p"),a=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),c=k(".")},m(d,y){$(d,e,y),h(e,n),v(t,e,null),h(e,l),$(d,o,y),$(d,s,y),$(d,u,y),$(d,i,y),h(i,a),v(f,i,null),h(i,c),_=!0},p(d,y){const A={};y&256&&(A.$$scope={dirty:y,ctx:d}),t.$set(A);const T={};y&256&&(T.$$scope={dirty:y,ctx:d}),f.$set(T)},i(d){_||(m(t.$$.fragment,d),m(f.$$.fragment,d),_=!0)},o(d){g(t.$$.fragment,d),g(f.$$.fragment,d),_=!1},d(d){d&&(p(e),p(o),p(s),p(u),p(i)),w(t),w(f)}}}function ic(r){let e,n,t;return n=new _e({props:{$$slots:{default:[sc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Er(r){let e,n,t,l,o;e=new Ge({props:{colorScale:r[2],limits:r[3]}});function s(i){r[6](i)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new $l({props:u}),W.push(()=>V(t,"value",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};!l&&a&1&&(l=!0,f.value=i[0],X(()=>l=!1)),t.$set(f)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function ac(r){let e,n,t=r[7].indicative_mph+"",l,o,s,u,i,a=r[7].highest_mph+"",f,c,_=r[4][r[7].highest_description]+"",d,y;return{c(){e=C("p"),n=k("Posted speed limit: "),l=k(t),o=k(" mph"),s=O(),u=C("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),d=k(_),y=k(")")},m(A,T){$(A,e,T),h(e,n),h(e,l),h(e,o),$(A,s,T),$(A,u,T),h(u,i),h(u,f),h(u,c),h(u,d),h(u,y)},p(A,T){T&128&&t!==(t=A[7].indicative_mph+"")&&B(l,t),T&128&&a!==(a=A[7].highest_mph+"")&&B(f,a),T&128&&_!==(_=A[4][A[7].highest_description]+"")&&B(d,_)},d(A){A&&(p(e),p(s),p(u))}}}function fc(r){let e,n;return e=new ue({props:{$$slots:{default:[ac,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function uc(r){let e,n;const t=[z(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",r[0]],r[3],r[2]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[fc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&15?ee(t,[s&0&&ie(z(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&13&&{paint:{"line-color":ke(["get",o[0]],o[3],o[2]),"line-width":ze,"line-opacity":Z(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function cc(r){let e,n,t,l,o,s;function u(f){r[5](f)}let i={id:wt,$$slots:{right:[ic],default:[rc]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new ae({props:i}),W.push(()=>V(e,"checked",u));let a=r[1]&&Er(r);return o=new ve({props:{url:`pmtiles://${ln()}/v1/${wt}.pmtiles`,$$slots:{default:[uc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=Er(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(pe(),g(a,1,1,()=>{a=null}),me());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let wt="road_speeds";function $c(r,e,n){let t=te.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,l,u,i,a]}class pc extends J{constructor(e){super(),K(this,e,$c,cc,Y,{})}}function mc(r){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _c(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gc(r){let e,n,t,l,o,s,u,i,a;return u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",l=O(),o=C("p"),s=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),w(u)}}}function dc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[gc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function jr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function hc(r){let e,n,t,l=r[4].average+"",o,s,u,i,a,f,c=r[4].minimum+"",_,d;return{c(){e=C("p"),n=k("Average width: "),t=C("b"),o=k(l),s=k(`
        meters`),u=O(),i=C("p"),a=k("Minimum width: "),f=C("b"),_=k(c),d=k(`
        meters`)},m(y,A){$(y,e,A),h(e,n),h(e,t),h(t,o),h(e,s),$(y,u,A),$(y,i,A),h(i,a),h(i,f),h(f,_),h(i,d)},p(y,A){A&16&&l!==(l=y[4].average+"")&&B(o,l),A&16&&c!==(c=y[4].minimum+"")&&B(_,c)},d(y){y&&(p(e),p(u),p(i))}}}function bc(r){let e,n;return e=new ue({props:{$$slots:{default:[hc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vc(r){let e,n;const t=[z(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],r[2],r[1]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[bc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ee(t,[s&0&&ie(z(kt)),s&0&&{sourceLayer:kt},t[2],t[3],s&6&&{paint:{"line-color":ke(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function wc(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:kt,$$slots:{right:[dc],default:[mc]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",u));let a=r[0]&&jr(r);return o=new ve({props:{url:`pmtiles://${ln()}/v1/${kt}.pmtiles`,$$slots:{default:[vc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=jr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(pe(),g(a,1,1,()=>{a=null}),me());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let kt="road_widths";function kc(r,e,n){let t=te.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class yc extends J{constructor(e){super(),K(this,e,kc,wc,Y,{})}}function Sc(r){let e,n,t;return e=new Oe({props:{color:te.trams}}),{c(){b(e.$$.fragment),n=k(`
  Trams`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Cc(r){let e,n,t,l;return t=new rt({}),{c(){e=C("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:re,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function Tc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Oc(r){let e,n;const t=[z(yt),{sourceLayer:yt},{paint:{"line-color":te.trams,"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),e.$on("click",Lc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ee(t,[s&0&&ie(z(yt)),s&0&&{sourceLayer:yt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Ac(r){let e,n,t,l,o;function s(i){r[1](i)}let u={id:yt,$$slots:{right:[Tc],default:[Sc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${yt}.pmtiles`,$$slots:{default:[Oc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let yt="trams";function Lc(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Ic(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Pc extends J{constructor(e){super(),K(this,e,Ic,Ac,Y,{})}}function Mc(r){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nc(r){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fc(r){let e,n,t,l,o,s,u,i,a;return t=new Q({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Nc]},$$scope:{ctx:r}}}),i=new Ne({}),{c(){e=C("p"),n=k("Data from the "),b(t.$$.fragment),l=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=O(),s=C("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,l),$(f,o,c),$(f,s,c),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),w(t),w(i,f)}}}function Dc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Fc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Rr(r){let e,n,t,l;return t=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){e=C("p"),e.textContent="Peak hourly frequency:",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:re,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function Ec(r){let e,n,t,l=r[4].stop_name+"",o,s,u,i,a,f=r[4].peak+"",c,_,d,y,A,T=r[4].peak_description+"",I,j,P,M,L,N=r[4].total+"",D,S,F=r[4].total_description+"",G,R;return{c(){e=C("p"),n=k("Stop name: "),t=C("b"),o=k(l),s=O(),u=C("p"),i=k("Peak: "),a=C("b"),c=k(f),_=k(`
        buses during the busiest hour of any day`),d=O(),y=C("p"),A=k("The peak hour is "),I=k(T),j=O(),P=C("p"),M=k("Total buses per day: "),L=C("b"),D=k(N),S=k(`
        (for `),G=k(F),R=k(", the busiest day of the week)")},m(E,H){$(E,e,H),h(e,n),h(e,t),h(t,o),$(E,s,H),$(E,u,H),h(u,i),h(u,a),h(a,c),h(u,_),$(E,d,H),$(E,y,H),h(y,A),h(y,I),$(E,j,H),$(E,P,H),h(P,M),h(P,L),h(L,D),h(P,S),h(P,G),h(P,R)},p(E,H){H&16&&l!==(l=E[4].stop_name+"")&&B(o,l),H&16&&f!==(f=E[4].peak+"")&&B(c,f),H&16&&T!==(T=E[4].peak_description+"")&&B(I,T),H&16&&N!==(N=E[4].total+"")&&B(D,N),H&16&&F!==(F=E[4].total_description+"")&&B(G,F)},d(E){E&&(p(e),p(s),p(u),p(d),p(y),p(j),p(P))}}}function jc(r){let e,n;return e=new ue({props:{$$slots:{default:[Ec,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Rc(r){let e,n;const t=[z(St),{sourceLayer:St},{paint:{"circle-color":ke(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[jc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ee(t,[s&0&&ie(z(St)),s&0&&{sourceLayer:St},s&6&&{paint:{"circle-color":ke(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Bc(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:St,$$slots:{right:[Dc],default:[Mc]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",u));let a=r[0]&&Rr(r);return o=new ve({props:{url:`pmtiles://${be()}/v1/${St}.pmtiles`,$$slots:{default:[Rc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Rr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(pe(),g(a,1,1,()=>{a=null}),me());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let St="bus_stops";function Hc(r,e,n){let t=te.sequential_low_to_high,l=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class zc extends J{constructor(e){super(),K(this,e,Hc,Bc,Y,{})}}function Gc(r){let e,n,t;return{c(){e=C("input"),q(e,"class","govuk-file-upload"),q(e,"id","load-criticals"),q(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=at(e,"change",r[5]),n=!0)},p:re,d(l){l&&p(e),r[7](null),n=!1,t()}}}function Br(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[Uc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qc(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new Oe({props:{color:jt}}),{c(){b(e.$$.fragment),n=k(`
        Show `),l=k(t),o=k(" issues")},m(u,i){v(e,u,i),$(u,n,i),$(u,l,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&B(l,t)},i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(l),p(o)),w(e,u)}}}function Uc(r){let e,n,t;function l(s){r[8](s)}let o={id:"show-criticals",$$slots:{default:[qc]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ae({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Wc(r){let e,n,t,l,o,s;e=new pn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Gc]},$$scope:{ctx:r}}}),t=new pl({props:{errorMessage:r[3]}});let u=r[2]>0&&Br(r);return{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),u&&u.c(),o=Me()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&m(u,1)):(u=Br(i),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(pe(),g(u,1,1,()=>{u=null}),me())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(u),s=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(u),s=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),u&&u.d(i)}}}function Vc(r){let e,n,t=r[10].critical_type+"",l,o,s,u,i,a=r[10].location_description+"",f,c,_,d,y,A=r[10].notes+"",T,I,j,P,M,L,N,D=r[10].id+"",S,F,G,R,E,H=(r[10].inspector??"???")+"",U,ne,le,ce=r[10].submission_time+"",Le,Te,se,Ae,fe,$e=r[10].scheme_reference+"",ge,je,Fe,Se=r[10].current_design_stage+"",xe;return{c(){e=C("div"),n=C("h2"),l=k(t),o=O(),s=C("p"),u=C("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=O(),_=C("p"),d=C("u"),d.textContent="Notes",y=k(`
          : `),T=k(A),I=O(),j=C("hr"),P=O(),M=C("p"),L=k("Critical issue ID: "),N=C("b"),S=k(D),F=O(),G=C("p"),R=k("Submitted by "),E=C("b"),U=k(H),ne=k(`
          at
          `),le=C("b"),Le=k(ce),Te=O(),se=C("p"),Ae=k("For scheme "),fe=C("b"),ge=k($e),je=k(`
          in stage
          `),Fe=C("b"),xe=k(Se),Ce(e,"max-width","30vw")},m(oe,he){$(oe,e,he),h(e,n),h(n,l),h(e,o),h(e,s),h(s,u),h(s,i),h(s,f),h(e,c),h(e,_),h(_,d),h(_,y),h(_,T),h(e,I),h(e,j),h(e,P),h(e,M),h(M,L),h(M,N),h(N,S),h(e,F),h(e,G),h(G,R),h(G,E),h(E,U),h(G,ne),h(G,le),h(le,Le),h(e,Te),h(e,se),h(se,Ae),h(se,fe),h(fe,ge),h(se,je),h(se,Fe),h(Fe,xe)},p(oe,he){he&1024&&t!==(t=oe[10].critical_type+"")&&B(l,t),he&1024&&a!==(a=oe[10].location_description+"")&&B(f,a),he&1024&&A!==(A=oe[10].notes+"")&&B(T,A),he&1024&&D!==(D=oe[10].id+"")&&B(S,D),he&1024&&H!==(H=(oe[10].inspector??"???")+"")&&B(U,H),he&1024&&ce!==(ce=oe[10].submission_time+"")&&B(Le,ce),he&1024&&$e!==($e=oe[10].scheme_reference+"")&&B(ge,$e),he&1024&&Se!==(Se=oe[10].current_design_stage+"")&&B(xe,Se)},d(oe){oe&&p(e)}}}function Xc(r){let e,n;return e=new ue({props:{$$slots:{default:[Vc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Yc(r){let e,n,t,l,o,s;const u=[z(`${ot}-clusters`),{applyToClusters:!0},{paint:{"circle-color":jt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let d=0;d<u.length;d+=1)i=x(i,u[d]);e=new Je({props:i}),e.$on("click",r[6]);const a=[z(`${ot}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=x(f,a[d]);t=new uo({props:f});const c=[z(`${ot}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":jt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let _={$$slots:{default:[Xc]},$$scope:{ctx:r}};for(let d=0;d<c.length;d+=1)_=x(_,c[d]);return o=new Je({props:_}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment)},m(d,y){v(e,d,y),$(d,n,y),v(t,d,y),$(d,l,y),v(o,d,y),s=!0},p(d,y){const A=y&2?ee(u,[y&0&&ie(z(`${ot}-clusters`)),u[1],y&0&&{paint:{"circle-color":jt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(A);const T=y&2?ee(a,[y&0&&ie(z(`${ot}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(T);const I=y&2?ee(c,[y&0&&ie(z(`${ot}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":jt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};y&2048&&(I.$$scope={dirty:y,ctx:d}),o.$set(I)},i(d){s||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(o.$$.fragment,d),s=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(o.$$.fragment,d),s=!1},d(d){d&&(p(n),p(l)),w(e,d),w(t,d),w(o,d)}}}function Qc(r){let e,n,t,l;return e=new De({props:{label:"Critical Issues",$$slots:{default:[Wc]},$$scope:{ctx:r}}}),t=new Nt({props:{id:ot,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Yc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let ot="criticals",jt="red";function Jc(r,e,n){let t;we(r,Sn,d=>n(9,t=d));let l,o=!0,s=0,u="",i=Dl();async function a(d){try{n(4,i=await gi(l.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f(d){t.getSource(ot).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id,(y,A)=>{y||t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:A})})}function c(d){W[d?"unshift":"push"](()=>{l=d,n(0,l)})}function _(d){o=d,n(1,o)}return[l,o,s,u,i,a,f,c,_]}class Kc extends J{constructor(e){super(),K(this,e,Jc,Qc,Y,{})}}function Zc(r){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xc(r){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function e$(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[xc]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function t$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[e$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Hr(r){let e,n;return e=new Tn({props:{rows:r[1]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function n$(r){let e,n=zr(r[3])+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=zr(l[3])+"")&&B(t,n)},d(l){l&&p(e)}}}function r$(r){let e,n;return e=new ue({props:{$$slots:{default:[n$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function l$(r){let e,n;const t=[z(Ct),{sourceLayer:Ct},{paint:{"circle-color":Xt(["get","crossing"],{traffic_signals:te.signalized_crossing},te.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[r$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),e.$on("click",s$),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ee(t,[s&0&&ie(z(Ct)),s&0&&{sourceLayer:Ct},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function o$(r){let e,n,t,l,o,s;function u(f){r[2](f)}let i={id:Ct,$$slots:{right:[t$],default:[Zc]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",u));let a=r[0]&&Hr(r);return o=new ve({props:{url:`pmtiles://${be()}/v1/${Ct}.pmtiles`,$$slots:{default:[l$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Hr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(pe(),g(a,1,1,()=>{a=null}),me());const d={};c&17&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let Ct="crossings";function zr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function s$(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function i$(r,e,n){let t=!1,l=[["Signalized",te.signalized_crossing],["Other",te.other_crossing]];function o(s){t=s,n(0,t)}return[t,l,o]}class a$ extends J{constructor(e){super(),K(this,e,i$,o$,Y,{})}}function f$(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Cycle parking`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function u$(r){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function c$(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[u$]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),l=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function $$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[c$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function p$(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=C("p"),n=k("Capacity: "),t=C("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=(s[3].capacity??"unknown")+"")&&B(o,l)},d(s){s&&p(e)}}}function m$(r){let e,n;return e=new ue({props:{$$slots:{default:[p$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _$(r){let e,n;const t=[z(Tt),{sourceLayer:Tt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[m$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ee(t,[s&0&&ie(z(Tt)),s&0&&{sourceLayer:Tt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function g$(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:Tt,$$slots:{right:[$$],default:[f$]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${Tt}.pmtiles`,$$slots:{default:[_$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Tt="cycle_parking";function d$(r,e,n){let t=te.cycle_parking,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class h$ extends J{constructor(e){super(),K(this,e,d$,g$,Y,{})}}function b$(r){let e,n,t,l;return e=new Oe({props:{color:r[4]}}),{c(){b(e.$$.fragment),n=O(),t=k(r[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),l=!0},p(o,s){(!l||s&4)&&B(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function v$(r){let e;const n=r[5].default,t=qt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Ut(t,n,l,l[7],e?Vt(n,l[7],o,null):Wt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function w$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[v$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function k$(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&B(t,n)},d(l){l&&p(e)}}}function y$(r){let e,n;return e=new ue({props:{$$slots:{default:[k$,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function S$(r){let e,n;const t=[z(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Z(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[y$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ze({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&25?ee(t,[s&1&&ie(z(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Z(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function C$(r){let e,n,t,l,o;function s(i){r[6](i)}let u={id:r[0],$$slots:{right:[w$],default:[b$]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new ae({props:u}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${r[0]}.pmtiles`,$$slots:{default:[S$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&1&&(f.id=i[0]),a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],X(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${be()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function T$(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=te[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,s,u,a,i,t,f,l]}class An extends J{constructor(e){super(),K(this,e,T$,C$,Y,{name:0,singularNoun:1,pluralNoun:2})}}function O$(r){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function A$(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[O$]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function L$(r){let e,n;return e=new An({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[A$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class I$ extends J{constructor(e){super(),K(this,e,null,L$,Y,{})}}function P$(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Railway Stations`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function M$(r){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function N$(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[M$]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function F$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[N$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function D$(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&B(t,n)},d(l){l&&p(e)}}}function E$(r){let e,n;return e=new ue({props:{$$slots:{default:[D$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function j$(r){let e,n;const t=[z(rn),{paint:{"circle-color":r[1],"circle-radius":en/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[E$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ee(t,[s&0&&ie(z(rn)),s&2&&{paint:{"circle-color":o[1],"circle-radius":en/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function R$(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:rn,$$slots:{right:[F$],default:[P$]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),W.push(()=>V(e,"checked",s)),l=new Nt({props:{data:`${be()}/v1/${rn}.geojson`,$$slots:{default:[j$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let rn="railway_stations";function B$(r,e,n){let t=te.railway_stations,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class H$ extends J{constructor(e){super(),K(this,e,B$,R$,Y,{})}}function z$(r){let e;return{c(){e=k("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function G$(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[z$]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function q$(r){let e,n;return e=new An({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[G$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class U$ extends J{constructor(e){super(),K(this,e,null,q$,Y,{})}}function W$(r){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function V$(r){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function X$(r){let e,n,t,l,o,s,u,i,a;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[W$]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[V$]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function Y$(r){let e,n;return e=new An({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[X$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Q$ extends J{constructor(e){super(),K(this,e,null,Y$,Y,{})}}function J$(r){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function K$(r){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Z$(r){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function x$(r){let e,n,t,l,o,s,u,i,a,f,c,_,d,y,A,T,I,j,P,M,L,N,D;return t=new Q({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[K$]},$$scope:{ctx:r}}}),I=new Q({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Z$]},$$scope:{ctx:r}}}),N=new Ne({}),{c(){e=C("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),l=k(" dataset. Please note these limitations:"),o=O(),s=C("ul"),u=C("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=O(),a=C("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=O(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,_=O(),d=C("li"),d.textContent='The "pedestrians" category also include mobility scooters',y=O(),A=C("li"),T=k("All limitations "),b(I.$$.fragment),j=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),P=O(),M=C("p"),M.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=O(),b(N.$$.fragment)},m(S,F){$(S,e,F),h(e,n),v(t,e,null),h(e,l),$(S,o,F),$(S,s,F),h(s,u),h(s,i),h(s,a),h(s,f),h(s,c),h(s,_),h(s,d),h(s,y),h(s,A),h(A,T),v(I,A,null),h(A,j),$(S,P,F),$(S,M,F),$(S,L,F),v(N,S,F),D=!0},p(S,F){const G={};F&16777216&&(G.$$scope={dirty:F,ctx:S}),t.$set(G);const R={};F&16777216&&(R.$$scope={dirty:F,ctx:S}),I.$set(R)},i(S){D||(m(t.$$.fragment,S),m(I.$$.fragment,S),m(N.$$.fragment,S),D=!0)},o(S){g(t.$$.fragment,S),g(I.$$.fragment,S),g(N.$$.fragment,S),D=!1},d(S){S&&(p(e),p(o),p(s),p(P),p(M),p(L)),w(t),w(I),w(N,S)}}}function ep(r){let e,n,t;return n=new _e({props:{$$slots:{default:[x$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Gr(r){let e,n,t,l,o,s,u,i,a,f,c,_,d;return n=new nt({props:{small:!0,$$slots:{default:[op]},$$scope:{ctx:r}}}),f=new Tn({props:{rows:r[14]}}),{c(){e=C("div"),b(n.$$.fragment),t=O(),l=C("div"),o=k(`Filter years:
      `),s=C("input"),u=k(`
      -
      `),i=C("input"),a=O(),b(f.$$.fragment),q(s,"type","number"),q(s,"min",2017),q(s,"max",2022),q(s,"class","svelte-1ft65rw"),q(i,"type","number"),q(i,"min",2017),q(i,"max",2022),q(i,"class","svelte-1ft65rw"),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(y,A){$(y,e,A),v(n,e,null),h(e,t),h(e,l),h(l,o),h(l,s),Qe(s,r[4]),h(l,u),h(l,i),Qe(i,r[5]),h(e,a),v(f,e,null),c=!0,_||(d=[at(s,"input",r[20]),at(i,"input",r[21])],_=!0)},p(y,A){const T={};A&16777231&&(T.$$scope={dirty:A,ctx:y}),n.$set(T),A&16&&Ht(s.value)!==y[4]&&Qe(s,y[4]),A&32&&Ht(i.value)!==y[5]&&Qe(i,y[5])},i(y){c||(m(n.$$.fragment,y),m(f.$$.fragment,y),c=!0)},o(y){g(n.$$.fragment,y),g(f.$$.fragment,y),c=!1},d(y){y&&p(e),w(n),w(f),_=!1,cl(d)}}}function tp(r){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function np(r){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rp(r){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lp(r){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function op(r){let e,n,t,l,o,s,u,i,a,f,c,_;function d(L){r[16](L)}let y={id:"stats19-pedestrians",$$slots:{default:[tp]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new ae({props:y}),W.push(()=>V(e,"checked",d));function A(L){r[17](L)}let T={id:"stats19-cyclists",$$slots:{default:[np]},$$scope:{ctx:r}};r[1]!==void 0&&(T.checked=r[1]),l=new ae({props:T}),W.push(()=>V(l,"checked",A));function I(L){r[18](L)}let j={id:"stats19-horse-riders",$$slots:{default:[rp]},$$scope:{ctx:r}};r[2]!==void 0&&(j.checked=r[2]),u=new ae({props:j}),W.push(()=>V(u,"checked",I));function P(L){r[19](L)}let M={id:"stats19-other",$$slots:{default:[lp]},$$scope:{ctx:r}};return r[3]!==void 0&&(M.checked=r[3]),f=new ae({props:M}),W.push(()=>V(f,"checked",P)),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment),s=O(),b(u.$$.fragment),a=O(),b(f.$$.fragment)},m(L,N){v(e,L,N),$(L,t,N),v(l,L,N),$(L,s,N),v(u,L,N),$(L,a,N),v(f,L,N),_=!0},p(L,N){const D={};N&16777216&&(D.$$scope={dirty:N,ctx:L}),!n&&N&1&&(n=!0,D.checked=L[0],X(()=>n=!1)),e.$set(D);const S={};N&16777216&&(S.$$scope={dirty:N,ctx:L}),!o&&N&2&&(o=!0,S.checked=L[1],X(()=>o=!1)),l.$set(S);const F={};N&16777216&&(F.$$scope={dirty:N,ctx:L}),!i&&N&4&&(i=!0,F.checked=L[2],X(()=>i=!1)),u.$set(F);const G={};N&16777216&&(G.$$scope={dirty:N,ctx:L}),!c&&N&8&&(c=!0,G.checked=L[3],X(()=>c=!1)),f.$set(G)},i(L){_||(m(e.$$.fragment,L),m(l.$$.fragment,L),m(u.$$.fragment,L),m(f.$$.fragment,L),_=!0)},o(L){g(e.$$.fragment,L),g(l.$$.fragment,L),g(u.$$.fragment,L),g(f.$$.fragment,L),_=!1},d(L){L&&(p(t),p(s),p(a)),w(e,L),w(l,L),w(u,L),w(f,L)}}}function qr(r){let e,n,t,l=r[8][r[23].pedestrian_location]+"",o;return{c(){e=C("p"),n=k("Pedestrian location: "),t=C("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&l!==(l=s[8][s[23].pedestrian_location]+"")&&B(o,l)},d(s){s&&p(e)}}}function Ur(r){let e,n,t,l=r[9][r[23].pedestrian_movement]+"",o;return{c(){e=C("p"),n=k("Pedestrian movement: "),t=C("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&l!==(l=s[9][s[23].pedestrian_movement]+"")&&B(o,l)},d(s){s&&p(e)}}}function sp(r){let e,n,t,l=r[23].year+"",o,s,u,i,a,f=r[10][r[23].severity]+"",c,_,d,y,A,T=Wr(r[23])+"",I,j,P,M,L,N=r[23].pedestrian_location&&qr(r),D=r[23].pedestrian_movement&&Ur(r);return{c(){e=C("p"),n=k("Year: "),t=C("b"),o=k(l),s=O(),u=C("p"),i=k("Severity: "),a=C("b"),c=k(f),_=O(),d=C("p"),y=k("Casualties: "),A=C("b"),I=k(T),j=O(),N&&N.c(),P=O(),D&&D.c(),M=O(),L=C("p"),L.textContent="Click to open full report in CycleStreets"},m(S,F){$(S,e,F),h(e,n),h(e,t),h(t,o),$(S,s,F),$(S,u,F),h(u,i),h(u,a),h(a,c),$(S,_,F),$(S,d,F),h(d,y),h(d,A),h(A,I),$(S,j,F),N&&N.m(S,F),$(S,P,F),D&&D.m(S,F),$(S,M,F),$(S,L,F)},p(S,F){F&8388608&&l!==(l=S[23].year+"")&&B(o,l),F&8388608&&f!==(f=S[10][S[23].severity]+"")&&B(c,f),F&8388608&&T!==(T=Wr(S[23])+"")&&B(I,T),S[23].pedestrian_location?N?N.p(S,F):(N=qr(S),N.c(),N.m(P.parentNode,P)):N&&(N.d(1),N=null),S[23].pedestrian_movement?D?D.p(S,F):(D=Ur(S),D.c(),D.m(M.parentNode,M)):D&&(D.d(1),D=null)},d(S){S&&(p(e),p(s),p(u),p(_),p(d),p(j),p(P),p(M),p(L)),N&&N.d(S),D&&D.d(S)}}}function ip(r){let e,n;return e=new ue({props:{$$slots:{default:[sp,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&25165824&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ap(r){let e,n;const t=[z(Ot),{sourceLayer:Ot},{paint:{"circle-color":ke(["get","severity"],[1,2,3],[r[11],r[12],r[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[7]},{layout:{visibility:r[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[ip]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),e.$on("click",up),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&14528?ee(t,[s&0&&ie(z(Ot)),s&0&&{sourceLayer:Ot},s&14336&&{paint:{"circle-color":ke(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function fp(r){let e,n,t,l,o,s;function u(f){r[15](f)}let i={id:Ot,$$slots:{right:[ep],default:[J$]},$$scope:{ctx:r}};r[6]!==void 0&&(i.checked=r[6]),e=new ae({props:i}),W.push(()=>V(e,"checked",u));let a=r[6]&&Gr(r);return o=new ve({props:{url:`pmtiles://${be()}/v1/${Ot}.pmtiles`,$$slots:{default:[ap]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16777216&&(_.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,_.checked=f[6],X(()=>n=!1)),e.$set(_),f[6]?a?(a.p(f,c),c&64&&m(a,1)):(a=Gr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(pe(),g(a,1,1,()=>{a=null}),me());const d={};c&16777408&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let Ot="stats19";function Wr(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function up(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function cp(r,e,n){let t,l=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(G,R,E,H,U,ne){let le=["any"];return o&&le.push(["get","pedestrian"]),s&&le.push(["get","cyclist"]),u&&le.push(["get","horse_rider"]),i&&le.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],le]}let _={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},d={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},A=te.sequential_low_to_high[4],T=te.sequential_low_to_high[2],I=te.sequential_low_to_high[0],j=[["Fatal",A],["Serious",T],["Slight",I]];function P(G){l=G,n(6,l)}function M(G){o=G,n(0,o)}function L(G){s=G,n(1,s)}function N(G){u=G,n(2,u)}function D(G){i=G,n(3,i)}function S(){a=Ht(this.value),n(4,a)}function F(){f=Ht(this.value),n(5,f)}return r.$$.update=()=>{r.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,l,t,_,d,y,A,T,I,j,P,M,L,N,D,S,F]}class $p extends J{constructor(e){super(),K(this,e,cp,fp,Y,{})}}function pp(r){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mp(r){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _p(r){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gp(r){let e,n,t,l,o,s,u,i,a,f,c;return t=new Q({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[mp]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[_p]},$$scope:{ctx:r}}}),f=new Ne({}),{c(){e=C("p"),n=k("2022 AADF (annual average daily flow) data from "),b(t.$$.fragment),l=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=O(),i=C("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=O(),b(f.$$.fragment)},m(_,d){$(_,e,d),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(_,u,d),$(_,i,d),$(_,a,d),v(f,_,d),c=!0},p(_,d){const y={};d&64&&(y.$$scope={dirty:d,ctx:_}),t.$set(y);const A={};d&64&&(A.$$scope={dirty:d,ctx:_}),o.$set(A)},i(_){c||(m(t.$$.fragment,_),m(o.$$.fragment,_),m(f.$$.fragment,_),c=!0)},o(_){g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(u),p(i),p(a)),w(t),w(o),w(f,_)}}}function dp(r){let e,n,t;return n=new _e({props:{$$slots:{default:[gp]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Vr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[3]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function hp(r){let e,n=r[5].location+"",t,l,o,s,u,i=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,_,d,y=r[5].pedal_cycles_2022.toLocaleString()+"",A,T,I,j,P,M=r[5].method+"",L;return{c(){e=C("h2"),t=k(n),l=O(),o=C("p"),s=k("Total motor vehicles (2022 AADF): "),u=C("b"),a=k(i),f=O(),c=C("p"),_=k("Total pedal cycles (2022 AADF): "),d=C("b"),A=k(y),T=O(),I=C("p"),j=k("Count method: "),P=C("b"),L=k(M)},m(N,D){$(N,e,D),h(e,t),$(N,l,D),$(N,o,D),h(o,s),h(o,u),h(u,a),$(N,f,D),$(N,c,D),h(c,_),h(c,d),h(d,A),$(N,T,D),$(N,I,D),h(I,j),h(I,P),h(P,L)},p(N,D){D&32&&n!==(n=N[5].location+"")&&B(t,n),D&32&&i!==(i=N[5].motor_vehicles_2022.toLocaleString()+"")&&B(a,i),D&32&&y!==(y=N[5].pedal_cycles_2022.toLocaleString()+"")&&B(A,y),D&32&&M!==(M=N[5].method+"")&&B(L,M)},d(N){N&&(p(e),p(l),p(o),p(f),p(c),p(T),p(I))}}}function bp(r){let e,n;return e=new ue({props:{$$slots:{default:[hp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vp(r){let e,n;const t=[z(At),{sourceLayer:At},{paint:{"circle-color":ke(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[bp]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),e.$on("click",kp),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ee(t,[s&0&&ie(z(At)),s&0&&{sourceLayer:At},s&6&&{paint:{"circle-color":ke(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function wp(r){let e,n,t,l,o,s;function u(f){r[4](f)}let i={id:At,$$slots:{right:[dp],default:[pp]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",u));let a=r[0]&&Vr(r);return o=new ve({props:{url:`pmtiles://${be()}/v1/${At}.pmtiles`,$$slots:{default:[vp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Vr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(pe(),g(a,1,1,()=>{a=null}),me());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let At="vehicle_counts";function kp(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function yp(r,e,n){let t=te.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,l,o,u]}class Sp extends J{constructor(e){super(),K(this,e,yp,wp,Y,{})}}function Cp(r){let e,n,t,l,o,s,u,i;return e=new U$({}),t=new I$({}),o=new Q$({}),u=new H$({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),$(a,l,f),v(o,a,f),$(a,s,f),v(u,a,f),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(l),p(s)),w(e,a),w(t,a),w(o,a),w(u,a)}}}function Tp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[Cp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Op(r){let e,n,t,l,o,s,u,i,a,f;return e=new $u({}),t=new Mu({}),o=new ku({}),u=new h$({}),a=new a$({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(a.$$.fragment)},m(c,_){v(e,c,_),$(c,n,_),v(t,c,_),$(c,l,_),v(o,c,_),$(c,s,_),v(u,c,_),$(c,i,_),v(a,c,_),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(u,c),w(a,c)}}}function Ap(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[Op]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Lp(r){let e,n,t,l,o,s;return e=new xf({}),t=new Pc({}),o=new zc({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment)},m(u,i){v(e,u,i),$(u,n,i),v(t,u,i),$(u,l,i),v(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(l)),w(e,u),w(t,u),w(o,u)}}}function Ip(r){let e,n,t,l,o,s,u,i,a,f;return e=new gf({}),t=new Bf({}),o=new ka({}),u=new Ua({}),a=new lf({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(a.$$.fragment)},m(c,_){v(e,c,_),$(c,n,_),v(t,c,_),$(c,l,_),v(o,c,_),$(c,s,_),v(u,c,_),$(c,i,_),v(a,c,_),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(u,c),w(a,c)}}}function Pp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[Ip]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Mp(r){let e,n,t,l;return e=new ca({}),t=new Na({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Np(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[Mp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Fp(r){let e,n,t,l,o,s;return e=new yc({}),t=new Gu({}),o=new pc({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment)},m(u,i){v(e,u,i),$(u,n,i),v(t,u,i),$(u,l,i),v(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(l)),w(e,u),w(t,u),w(o,u)}}}function Dp(r){let e,n,t,l,o,s,u=mn()=="Private (development)",i,a,f;e=new Sp({}),t=new $p({}),o=new nc({});let c=u&&Fp();return a=new Af({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),c&&c.c(),i=O(),b(a.$$.fragment)},m(_,d){v(e,_,d),$(_,n,d),v(t,_,d),$(_,l,d),v(o,_,d),$(_,s,d),c&&c.m(_,d),$(_,i,d),v(a,_,d),f=!0},p:re,i(_){f||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(o.$$.fragment,_),m(c),m(a.$$.fragment,_),f=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),g(c),g(a.$$.fragment,_),f=!1},d(_){_&&(p(n),p(l),p(s),p(i)),w(e,_),w(t,_),w(o,_),c&&c.d(_),w(a,_)}}}function Ep(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[Dp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function jp(r){let e,n,t,l,o;function s(i){r[3](i)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new Gl({props:u}),W.push(()=>V(e,"enabled",s)),l=new Yl({}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],X(()=>n=!1)),e.$set(f)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function Rp(r){let e,n,t,l,o,s,u,i,a,f,c,_,d,y,A,T,I,j;return e=new Kc({}),t=new De({props:{label:"Trip generators",$$slots:{default:[Tp]},$$scope:{ctx:r}}}),o=new De({props:{label:"Existing infrastructure",$$slots:{default:[Ap]},$$scope:{ctx:r}}}),u=new De({props:{label:"Public transit",$$slots:{default:[Lp]},$$scope:{ctx:r}}}),a=new De({props:{label:"Boundaries",$$slots:{default:[Pp]},$$scope:{ctx:r}}}),c=new De({props:{label:"Census",$$slots:{default:[Np]},$$scope:{ctx:r}}}),d=new De({props:{label:"Other",$$slots:{default:[Ep]},$$scope:{ctx:r}}}),A=new De({props:{label:"Tools",$$slots:{default:[jp]},$$scope:{ctx:r}}}),I=new zl({props:{disabled:!r[1]}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(a.$$.fragment),f=O(),b(c.$$.fragment),_=O(),b(d.$$.fragment),y=O(),b(A.$$.fragment),T=O(),b(I.$$.fragment)},m(P,M){v(e,P,M),$(P,n,M),v(t,P,M),$(P,l,M),v(o,P,M),$(P,s,M),v(u,P,M),$(P,i,M),v(a,P,M),$(P,f,M),v(c,P,M),$(P,_,M),v(d,P,M),$(P,y,M),v(A,P,M),$(P,T,M),v(I,P,M),j=!0},p(P,M){const L={};M&16&&(L.$$scope={dirty:M,ctx:P}),t.$set(L);const N={};M&16&&(N.$$scope={dirty:M,ctx:P}),o.$set(N);const D={};M&16&&(D.$$scope={dirty:M,ctx:P}),u.$set(D);const S={};M&16&&(S.$$scope={dirty:M,ctx:P}),a.$set(S);const F={};M&16&&(F.$$scope={dirty:M,ctx:P}),c.$set(F);const G={};M&16&&(G.$$scope={dirty:M,ctx:P}),d.$set(G);const R={};M&17&&(R.$$scope={dirty:M,ctx:P}),A.$set(R);const E={};M&2&&(E.disabled=!P[1]),I.$set(E)},i(P){j||(m(e.$$.fragment,P),m(t.$$.fragment,P),m(o.$$.fragment,P),m(u.$$.fragment,P),m(a.$$.fragment,P),m(c.$$.fragment,P),m(d.$$.fragment,P),m(A.$$.fragment,P),m(I.$$.fragment,P),j=!0)},o(P){g(e.$$.fragment,P),g(t.$$.fragment,P),g(o.$$.fragment,P),g(u.$$.fragment,P),g(a.$$.fragment,P),g(c.$$.fragment,P),g(d.$$.fragment,P),g(A.$$.fragment,P),g(I.$$.fragment,P),j=!1},d(P){P&&(p(n),p(l),p(s),p(i),p(f),p(_),p(y),p(T)),w(e,P),w(t,P),w(o,P),w(u,P),w(a,P),w(c,P),w(d,P),w(A,P),w(I,P)}}}function Bp(r){let e,n;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ze({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&2?ee(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Hp(r){let e,n,t,l;return e=new De({props:{label:"Layers",open:!0,$$slots:{default:[Rp]},$$scope:{ctx:r}}}),t=new Nt({props:{data:r[2],$$slots:{default:[Bp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function zp(r,e,n){let t,l;we(r,ar,u=>n(1,l=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&ar.set(!t)},[t,l,o,s]}class Gp extends J{constructor(e){super(),K(this,e,zp,Hp,Y,{})}}function Xr(r){let e;return{c(){e=C("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qp(r){let e,n=r[0]&&Xr();return{c(){n&&n.c(),e=Me()},m(t,l){n&&n.m(t,l),$(t,e,l)},p(t,[l]){t[0]?n||(n=Xr(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:re,o:re,d(t){t&&p(e),n&&n.d(t)}}}function Up(r,e,n){let{loadFile:t}=e,l=!0;return Cn(async()=>{let s=await(await fetch(`${ln()}/v1/random_schemes.geojson`)).text();t(s),n(0,l=!1)}),r.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[l,t]}class Wp extends J{constructor(e){super(),K(this,e,Up,qp,Y,{loadFile:1})}}function Yr(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=C("p"),n=k("Current milestone: "),l=k(t)},m(s,u){$(s,e,u),h(e,n),h(e,l)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&B(l,t)},d(s){s&&p(e)}}}function Vp(r){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xp(r){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yp(r){let e,n,t,l;return e=new Pt({props:{$$slots:{default:[Vp]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Pt({props:{$$slots:{default:[Xp]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Qp(r){var F,G,R,E;let e,n,t=r[0].scheme_reference+"",l,o,s,u,i=((F=r[0].browse)==null?void 0:F.authority_or_region)+"",a,f,c,_,d=((G=r[0].browse)==null?void 0:G.capital_scheme_id)+"",y,A,T,I,j=((R=r[0].browse)==null?void 0:R.funding_programme)+"",P,M,L,N,D,S=((E=r[0].browse)==null?void 0:E.current_milestone)&&Yr(r);return N=new ql({props:{$$slots:{default:[Yp]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("Scheme reference: "),l=k(t),o=O(),s=C("p"),u=k("Authority or region: "),a=k(i),f=O(),c=C("p"),_=k("Capital scheme ID: "),y=k(d),A=O(),T=C("p"),I=k("Funding programme: "),P=k(j),M=O(),S&&S.c(),L=O(),b(N.$$.fragment)},m(H,U){$(H,e,U),h(e,n),h(e,l),$(H,o,U),$(H,s,U),h(s,u),h(s,a),$(H,f,U),$(H,c,U),h(c,_),h(c,y),$(H,A,U),$(H,T,U),h(T,I),h(T,P),$(H,M,U),S&&S.m(H,U),$(H,L,U),v(N,H,U),D=!0},p(H,U){var le,ce,Le,Te;(!D||U&1)&&t!==(t=H[0].scheme_reference+"")&&B(l,t),(!D||U&1)&&i!==(i=((le=H[0].browse)==null?void 0:le.authority_or_region)+"")&&B(a,i),(!D||U&1)&&d!==(d=((ce=H[0].browse)==null?void 0:ce.capital_scheme_id)+"")&&B(y,d),(!D||U&1)&&j!==(j=((Le=H[0].browse)==null?void 0:Le.funding_programme)+"")&&B(P,j),(Te=H[0].browse)!=null&&Te.current_milestone?S?S.p(H,U):(S=Yr(H),S.c(),S.m(L.parentNode,L)):S&&(S.d(1),S=null);const ne={};U&32&&(ne.$$scope={dirty:U,ctx:H}),N.$set(ne)},i(H){D||(m(N.$$.fragment,H),D=!0)},o(H){g(N.$$.fragment,H),D=!1},d(H){H&&(p(e),p(o),p(s),p(f),p(c),p(A),p(T),p(M),p(L)),S&&S.d(H),w(N,H)}}}function Jp(r){let e,n;return e=new De({props:{label:`${r[0].scheme_name}`,$$slots:{default:[Qp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_name}`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Kp(r,e,n){let t,l;we(r,Mt,i=>n(3,t=i)),we(r,Sn,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(El(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class Zp extends J{constructor(e){super(),K(this,e,Kp,Jp,Y,{scheme:0})}}function Qr(r){let e,n,t=En(r[0].length_meters)+"",l;return{c(){e=C("p"),n=k("Length: "),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,l)},p(o,s){s&1&&t!==(t=En(o[0].length_meters)+"")&&B(l,t)},d(o){o&&p(e)}}}function Jr(r){let e,n=st(r[0].description,r[2])+"";return{c(){e=C("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&5&&n!==(n=st(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Kr(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=C("p"),n=k("Current milestone: "),l=k(t)},m(s,u){$(s,e,u),h(e,n),h(e,l)},p(s,u){var i;u&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&B(l,t)},d(s){s&&p(e)}}}function xp(r){var je,Fe,Se,xe;let e,n,t,l=st(r[0].name,r[2])+"",o,s=r[0].intervention_type+"",u,i,a,f,c,_,d,y,A,T,I=st(r[1].scheme_name??"",r[3])+"",j,P,M=st(r[0].scheme_reference,r[3])+"",L,N,D,S,F=((je=r[1].browse)==null?void 0:je.authority_or_region)+"",G,R,E,H,U=((Fe=r[1].browse)==null?void 0:Fe.capital_scheme_id)+"",ne,le,ce,Le,Te=((Se=r[1].browse)==null?void 0:Se.funding_programme)+"",se,Ae,fe=r[0].length_meters&&Qr(r),$e=r[0].description&&Jr(r),ge=((xe=r[1].browse)==null?void 0:xe.current_milestone)&&Kr(r);return{c(){e=C("div"),n=C("h2"),t=new Rt(!1),o=k(" ("),u=k(s),i=k(")"),a=O(),fe&&fe.c(),f=O(),$e&&$e.c(),c=O(),_=C("hr"),d=O(),y=C("p"),A=k("Part of scheme: "),T=new Rt(!1),j=k(" ("),P=new Rt(!1),L=k(")"),N=O(),D=C("p"),S=k("Authority or region: "),G=k(F),R=O(),E=C("p"),H=k("Capital scheme ID: "),ne=k(U),le=O(),ce=C("p"),Le=k("Funding programme: "),se=k(Te),Ae=O(),ge&&ge.c(),t.a=o,T.a=j,P.a=L,Ce(e,"max-width","30vw")},m(oe,he){$(oe,e,he),h(e,n),t.m(l,n),h(n,o),h(n,u),h(n,i),h(e,a),fe&&fe.m(e,null),h(e,f),$e&&$e.m(e,null),h(e,c),h(e,_),h(e,d),h(e,y),h(y,A),T.m(I,y),h(y,j),P.m(M,y),h(y,L),h(e,N),h(e,D),h(D,S),h(D,G),h(e,R),h(e,E),h(E,H),h(E,ne),h(e,le),h(e,ce),h(ce,Le),h(ce,se),h(e,Ae),ge&&ge.m(e,null)},p(oe,[he]){var In,Pn,Mn,Nn;he&5&&l!==(l=st(oe[0].name,oe[2])+"")&&t.p(l),he&1&&s!==(s=oe[0].intervention_type+"")&&B(u,s),oe[0].length_meters?fe?fe.p(oe,he):(fe=Qr(oe),fe.c(),fe.m(e,f)):fe&&(fe.d(1),fe=null),oe[0].description?$e?$e.p(oe,he):($e=Jr(oe),$e.c(),$e.m(e,c)):$e&&($e.d(1),$e=null),he&10&&I!==(I=st(oe[1].scheme_name??"",oe[3])+"")&&T.p(I),he&9&&M!==(M=st(oe[0].scheme_reference,oe[3])+"")&&P.p(M),he&2&&F!==(F=((In=oe[1].browse)==null?void 0:In.authority_or_region)+"")&&B(G,F),he&2&&U!==(U=((Pn=oe[1].browse)==null?void 0:Pn.capital_scheme_id)+"")&&B(ne,U),he&2&&Te!==(Te=((Mn=oe[1].browse)==null?void 0:Mn.funding_programme)+"")&&B(se,Te),(Nn=oe[1].browse)!=null&&Nn.current_milestone?ge?ge.p(oe,he):(ge=Kr(oe),ge.c(),ge.m(e,null)):ge&&(ge.d(1),ge=null)},i:re,o:re,d(oe){oe&&p(e),fe&&fe.d(),$e&&$e.d(),ge&&ge.d()}}}function st(r,e){return e?r.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):r}function em(r,e,n){let t,l,o,s;we(r,nn,i=>n(4,l=i)),we(r,Dt,i=>n(2,o=i)),we(r,Et,i=>n(3,s=i));let{props:u}=e;return r.$$set=i=>{"props"in i&&n(0,u=i.props)},r.$$.update=()=>{r.$$.dirty&17&&n(1,t=l.get(u.scheme_reference))},[u,t,o,s,l]}class Ln extends J{constructor(e){super(),K(this,e,em,xp,Y,{props:0})}}function tm(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function nm(r){let e,n;return e=new Ln({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rm(r){let e,n,t,l;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[tm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[nm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function lm(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function om(r){let e,n;return e=new Ln({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function sm(r){let e,n,t,l;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[lm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[om,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function im(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function am(r){let e,n;return e=new Ln({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function fm(r){let e,n,t,l;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[im,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[am,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function um(r){let e,n,t,l,o,s,u,i,a,f;const c=[z("interventions-points"),{filter:["all",jn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":en,"circle-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let _={$$slots:{default:[rm]},$$scope:{ctx:r}};for(let L=0;L<c.length;L+=1)_=x(_,c[L]);e=new Je({props:_});const d=[z("interventions-lines"),{filter:["all",Rn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Ft,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[sm]},$$scope:{ctx:r}};for(let L=0;L<d.length;L+=1)y=x(y,d[L]);t=new ye({props:y});const A=[z("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Ft,"circle-opacity":0,"circle-stroke-color":tt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let L=0;L<A.length;L+=1)T=x(T,A[L]);o=new Je({props:T});const I=[z("interventions-polygons"),{filter:["all",Kt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":Z(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let j={$$slots:{default:[fm]},$$scope:{ctx:r}};for(let L=0;L<I.length;L+=1)j=x(j,I[L]);u=new Ze({props:j});const P=[z("interventions-polygons-outlines"),{filter:["all",Kt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Ft}},{layout:{visibility:r[0]?"visible":"none"}}];let M={};for(let L=0;L<P.length;L+=1)M=x(M,P[L]);return a=new ye({props:M}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(a.$$.fragment)},m(L,N){v(e,L,N),$(L,n,N),v(t,L,N),$(L,l,N),v(o,L,N),$(L,s,N),v(u,L,N),$(L,i,N),v(a,L,N),f=!0},p(L,N){const D=N&29?ee(c,[c[0],N&24&&{filter:["all",jn,L[3],L[4]]},c[2],c[3],N&4&&{paint:{"circle-color":L[2],"circle-radius":en,"circle-opacity":Z(1,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};N&128&&(D.$$scope={dirty:N,ctx:L}),e.$set(D);const S=N&13?ee(d,[d[0],N&8&&{filter:["all",Rn,L[3]]},d[2],d[3],N&4&&{paint:{"line-color":L[2],"line-width":Ft,"line-opacity":Z(1,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},d[6]]):{};N&128&&(S.$$scope={dirty:N,ctx:L}),t.$set(S);const F=N&1?ee(A,[A[0],A[1],A[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(F);const G=N&13?ee(I,[I[0],N&8&&{filter:["all",Kt,L[3]]},I[2],I[3],N&4&&{paint:{"fill-color":L[2],"fill-opacity":Z(.2,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},I[6]]):{};N&128&&(G.$$scope={dirty:N,ctx:L}),u.$set(G);const R=N&13?ee(P,[P[0],N&8&&{filter:["all",Kt,L[3]]},N&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*Ft}},N&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(R)},i(L){f||(m(e.$$.fragment,L),m(t.$$.fragment,L),m(o.$$.fragment,L),m(u.$$.fragment,L),m(a.$$.fragment,L),f=!0)},o(L){g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(u.$$.fragment,L),g(a.$$.fragment,L),f=!1},d(L){L&&(p(n),p(l),p(s),p(i)),w(e,L),w(t,L),w(o,L),w(u,L),w(a,L)}}}function cm(r){let e,n;return e=new Nt({props:{data:r[1],$$slots:{default:[um]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $m(r,e,n){let t,l;we(r,Mt,a=>n(5,l=a));let{showSchemes:o}=e,[s]=kn();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=jl(l))},[o,t,s,u,i,l]}class pm extends J{constructor(e){super(),K(this,e,$m,cm,Y,{showSchemes:0})}}function Zr(r,e,n){const t=r.slice();return t[13]=e[n],t}function xr(r,e,n){const t=r.slice();return t[16]=e[n],t}function mm(r){let e,n;return e=new Wp({props:{loadFile:r[7]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function el(r){let e,n,t,l,o;e=new Pt({props:{$$slots:{default:[_m]},$$scope:{ctx:r}}}),e.$on("click",r[8]);function s(i){r[9](i)}let u={title:"About this scheme data",$$slots:{default:[gm]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.open=r[3]),t=new ol({props:u}),W.push(()=>V(t,"open",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!l&&a&8&&(l=!0,c.open=i[3],X(()=>l=!1)),t.$set(c)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function _m(r){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tl(r){let e,n,t=r[16]+"",l;return{c(){e=C("li"),n=C("p"),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,l)},p(o,s){s&16&&t!==(t=o[16]+"")&&B(l,t)},d(o){o&&p(e)}}}function gm(r){let e,n,t,l,o=Ee(r[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=tl(xr(r,o,u));return{c(){e=C("div"),n=C("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=O(),l=C("ul");for(let u=0;u<s.length;u+=1)s[u].c();q(e,"class","govuk-prose")},m(u,i){$(u,e,i),h(e,n),h(e,t),h(e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,null)},p(u,i){if(i&16){o=Ee(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=xr(u,o,a);s[a]?s[a].p(f,i):(s[a]=tl(f),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),It(s,u)}}}function nl(r){let e,n,t,l;function o(i){r[10](i)}function s(i){r[11](i)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new Fi({props:u}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),l=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],X(()=>t=!1)),e.$set(f)},i(i){l||(m(e.$$.fragment,i),l=!0)},o(i){g(e.$$.fragment,i),l=!1},d(i){w(e,i)}}}function rl(r){let e,n;return e=new Zp({props:{scheme:r[13]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ll(r){let e=r[1].has(r[13].scheme_reference),n,t,l=e&&rl(r);return{c(){l&&l.c(),n=Me()},m(o,s){l&&l.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?l?(l.p(o,s),s&66&&m(l,1)):(l=rl(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(pe(),g(l,1,1,()=>{l=null}),me())},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function dm(r){let e,n,t,l,o,s,u,i,a,f,c=mn()=="Private (development)",_,d,y,A,T,I,j,P,M;o=new Xl({props:{boundaryGeojson:r[4]}}),a=new Rl({});let L=c&&mm(r),N=r[4].notes&&el(r);y=new Wl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),T=new pl({props:{errorMessage:r[0]}});let D=r[6].size>0&&nl(r),S=Ee(r[6].values()),F=[];for(let R=0;R<S.length;R+=1)F[R]=ll(Zr(r,S,R));const G=R=>g(F[R],1,1,()=>{F[R]=null});return{c(){e=C("div"),n=C("div"),t=C("h1"),t.textContent="Browse schemes",l=O(),b(o.$$.fragment),s=O(),u=C("p"),u.textContent=`App version: ${mn()}`,i=O(),b(a.$$.fragment),f=O(),L&&L.c(),_=O(),N&&N.c(),d=O(),b(y.$$.fragment),A=O(),b(T.$$.fragment),I=O(),D&&D.c(),j=O(),P=C("ul");for(let R=0;R<F.length;R+=1)F[R].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),q(e,"slot","sidebar"),q(e,"class","govuk-prose")},m(R,E){$(R,e,E),h(e,n),h(n,t),h(n,l),v(o,n,null),h(e,s),h(e,u),h(e,i),v(a,e,null),h(e,f),L&&L.m(e,null),h(e,_),N&&N.m(e,null),h(e,d),v(y,e,null),h(e,A),v(T,e,null),h(e,I),D&&D.m(e,null),h(e,j),h(e,P);for(let H=0;H<F.length;H+=1)F[H]&&F[H].m(P,null);M=!0},p(R,E){const H={};E&16&&(H.boundaryGeojson=R[4]),o.$set(H),c&&L.p(R,E),R[4].notes?N?(N.p(R,E),E&16&&m(N,1)):(N=el(R),N.c(),m(N,1),N.m(e,d)):N&&(pe(),g(N,1,1,()=>{N=null}),me());const U={};if(E&1&&(U.errorMessage=R[0]),T.$set(U),R[6].size>0?D?(D.p(R,E),E&64&&m(D,1)):(D=nl(R),D.c(),m(D,1),D.m(e,j)):D&&(pe(),g(D,1,1,()=>{D=null}),me()),E&66){S=Ee(R[6].values());let ne;for(ne=0;ne<S.length;ne+=1){const le=Zr(R,S,ne);F[ne]?(F[ne].p(le,E),m(F[ne],1)):(F[ne]=ll(le),F[ne].c(),m(F[ne],1),F[ne].m(P,null))}for(pe(),ne=S.length;ne<F.length;ne+=1)G(ne);me()}},i(R){if(!M){m(o.$$.fragment,R),m(a.$$.fragment,R),m(L),m(N),m(y.$$.fragment,R),m(T.$$.fragment,R),m(D);for(let E=0;E<S.length;E+=1)m(F[E]);M=!0}},o(R){g(o.$$.fragment,R),g(a.$$.fragment,R),g(L),g(N),g(y.$$.fragment,R),g(T.$$.fragment,R),g(D),F=F.filter(Boolean);for(let E=0;E<F.length;E+=1)g(F[E]);M=!1},d(R){R&&p(e),w(o),w(a),L&&L.d(),N&&N.d(),w(y),w(T),D&&D.d(),It(F,R)}}}function hm(r){let e,n,t,l,o,s,u;return e=new Ul({}),t=new pm({props:{showSchemes:r[2]}}),s=new Gp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),o=C("div"),b(s.$$.fragment),q(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),$(i,o,a),v(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),w(s)}}}function bm(r){let e,n,t;return n=new Bl({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[hm]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(n.$$.fragment),q(e,"slot","main")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.style=l[5]),o&524292&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function vm(r){let e,n;return e=new Ql({props:{$$slots:{main:[bm],sidebar:[dm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&524415&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function wm(r,e,n){let t,l,o;we(r,Mt,T=>n(4,t=T)),we(r,Bn,T=>n(5,l=T)),we(r,nn,T=>n(6,o=T)),Cn(()=>{Hl()});const s=new URLSearchParams(window.location.search);Bn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(T){try{Mt.set(JSON.parse(T)),nn.set(mi(t)),n(0,u="")}catch(I){n(0,u=`The file you loaded is broken: ${I}`)}}const _=()=>n(3,f=!0);function d(T){f=T,n(3,f)}function y(T){i=T,n(1,i)}function A(T){a=T,n(2,a)}return[u,i,a,f,t,l,o,c,_,d,y,A]}class km extends J{constructor(e){super(),K(this,e,wm,vm,Y,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new km({target:document.getElementById("app")});
