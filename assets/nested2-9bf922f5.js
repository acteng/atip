import{S as J,i as K,s as Y,e as C,h as q,$ as Ce,j as $,W as ne,o as p,aP as rl,b as W,c as V,d as O,g as b,m as v,w as at,l as X,t as m,n as _,p as w,X as qt,Y as Ut,Z as Wt,_ as Vt,a7 as Ee,J as ge,K as de,aQ as It,u as k,k as h,D as B,I as Me,N as yn,O as ll,q as we,P as ol,Q as sl,T as it,U as il,V as al,aX as Pl,aY as $t,a4 as Nn,aZ as Ml,aO as Nl,ar as rn,ae as Sn,aj as Xt,r as Cn,a as Pt,F as pn,v as Qe,aW as Q,a_ as be,a$ as ke,B as Z,ah as x,C as ye,ak as ee,b0 as ie,G as Nt,H as fl,aS as Ht,ab as Fn,b1 as ln,R as ul,b2 as Rt,E as cl,as as Fl,f as mn,ag as Dl,aU as Dn,al as El,am as En,an as jn,ao as Jt,aV as Rn,L as jl,M as Rl,y as Bl}from"./index-cfded16b.js";import{d as tt,j as Lt,C as De,f as nt,h as ae,l as z,c as xt,k as Hl,S as zl,B as Gl,b as Ft,G as ql}from"./StreetViewTool-b4a5458c.js";import{a as Ze,F as Ul}from"./Popup-bf51a52b.js";import{P as ue}from"./Popup-4b55b12c.js";import{R as Wl,C as Je,Z as Vl}from"./ZoomOutMap-c082fd87.js";import{L as Xl,a as Yl}from"./LineMeasureController-05a9a3fc.js";function Ql(r){let e;return{c(){e=C("span"),q(e,"class","svelte-kzgqtg"),Ce(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Ce(e,"background",n[0])},i:ne,o:ne,d(n){n&&p(e)}}}function Jl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class Oe extends J{constructor(e){super(),K(this,e,Jl,Ql,Y,{color:0})}}const Kl="/atip/assets/help-d011708a.svg";function Zl(r){let e,n;const t=r[1].default,l=qt(t,r,r[4],null);return{c(){e=C("div"),l&&l.c(),q(e,"class","govuk-prose")},m(o,s){$(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&Ut(l,t,o,o[4],n?Vt(t,o[4],s,null):Wt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){_(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function xl(r){let e,n,t,l,o,s,f;function i(u){r[3](u)}let a={title:"Help",$$slots:{default:[Zl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new rl({props:a}),W.push(()=>V(t,"open",i)),{c(){e=C("button"),e.innerHTML=`<img src="${Kl}" title="Help" alt="Help"/>`,n=O(),b(t.$$.fragment),q(e,"class","svelte-7d9d1l")},m(u,c){$(u,e,c),$(u,n,c),v(t,u,c),o=!0,s||(f=at(e,"click",r[2]),s=!0)},p(u,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,g.open=u[0],X(()=>l=!1)),t.$set(g)},i(u){o||(m(t.$$.fragment,u),o=!0)},o(u){_(t.$$.fragment,u),o=!1},d(u){u&&(p(e),p(n)),w(t,u),s=!1,f()}}}function eo(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function f(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,f,l]}class pe extends J{constructor(e){super(),K(this,e,eo,xl,Y,{})}}function Bn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Hn(r){let e,n,t,l=r[1]+"",o,s,f;return n=new Oe({props:{color:r[2]}}),{c(){e=C("li"),b(n.$$.fragment),t=O(),o=k(l),s=O()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),n.$set(u),(!f||a&1)&&l!==(l=i[1]+"")&&B(o,l)},i(i){f||(m(n.$$.fragment,i),f=!0)},o(i){_(n.$$.fragment,i),f=!1},d(i){i&&p(e),w(n)}}}function to(r){let e,n,t=Ee(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Hn(Bn(r,t,s));const o=s=>_(l[s],1,1,()=>{l[s]=null});return{c(){e=C("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,f){$(s,e,f);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[f]){if(f&1){t=Ee(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Bn(s,t,i);l[i]?(l[i].p(a,f),m(l[i],1)):(l[i]=Hn(a),l[i].c(),m(l[i],1),l[i].m(e,null))}for(ge(),i=t.length;i<l.length;i+=1)o(i);de()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)_(l[f]);n=!1},d(s){s&&p(e),It(l,s)}}}function no(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class $l extends J{constructor(e){super(),K(this,e,no,to,Y,{rows:0})}}function zn(r){let e=r[0],n,t,l=Gn(r);return{c(){l.c(),n=Me()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?(ge(),_(l,1,1,ne),de(),l=Gn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(m(l),t=!0)},o(o){_(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Gn(r){let e;const n=r[10].default,t=qt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Ut(t,n,l,l[9],e?Vt(n,l[9],o,null):Wt(l[9]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function ro(r){let e,n,t=r[0]&&zn(r);return{c(){t&&t.c(),e=Me()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=zn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ge(),_(t,1,1,()=>{t=null}),de())},i(l){n||(m(t),n=!0)},o(l){_(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function lo(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=yn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:u,self:c}=ll();we(r,u,y=>n(8,l=y)),we(r,c,y=>n(0,t=y));let g,d=!0;return ol(()=>{t&&g&&l&&(sl(u,t,g),it(c,t=null,t),n(6,g=void 0))}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==f&&(it(c,t=f,t),il(l,t,al({type:"raster",tiles:i,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,g=l==null?void 0:l.getSource(t)),n(7,d=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,g=l==null?void 0:l.getSource(f))})),r.$$.dirty&208&&g&&(d?n(7,d=!1):g.setTiles(i))},[t,u,c,f,i,a,g,d,l,s,o]}class oo extends J{constructor(e){super(),K(this,e,lo,ro,Y,{id:3,tiles:4,tileSize:5})}}function so(r){let e;const n=r[16].default,t=qt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Ut(t,n,l,l[24],e?Vt(n,l[24],o,null):Wt(l[24]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function io(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[so]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Pl({props:o}),W.push(()=>V(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function ao(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=yn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:A=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:I=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:M=!0}=e;function L(E){j=E,n(0,j)}function N(E){$t.call(this,r,E)}function D(E){$t.call(this,r,E)}function S(E){$t.call(this,r,E)}function F(E){$t.call(this,r,E)}function G(E){$t.call(this,r,E)}function R(E){$t.call(this,r,E)}return r.$$set=E=>{"id"in E&&n(1,o=E.id),"source"in E&&n(2,s=E.source),"sourceLayer"in E&&n(3,f=E.sourceLayer),"beforeId"in E&&n(4,i=E.beforeId),"beforeLayerType"in E&&n(5,a=E.beforeLayerType),"paint"in E&&n(6,u=E.paint),"layout"in E&&n(7,c=E.layout),"filter"in E&&n(8,g=E.filter),"applyToClusters"in E&&n(9,d=E.applyToClusters),"minzoom"in E&&n(10,y=E.minzoom),"maxzoom"in E&&n(11,A=E.maxzoom),"hoverCursor"in E&&n(12,T=E.hoverCursor),"manageHoverState"in E&&n(13,I=E.manageHoverState),"hovered"in E&&n(0,j=E.hovered),"eventsIfTopMost"in E&&n(14,P=E.eventsIfTopMost),"interactive"in E&&n(15,M=E.interactive),"$$scope"in E&&n(24,l=E.$$scope)},[j,o,s,f,i,a,u,c,g,d,y,A,T,I,P,M,t,L,N,D,S,F,G,R,l]}class fo extends J{constructor(e){super(),K(this,e,ao,io,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function qn(r){let e=r[0],n,t,l=Un(r);return{c(){l.c(),n=Me()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?(ge(),_(l,1,1,ne),de(),l=Un(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(m(l),t=!0)},o(o){_(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Un(r){let e;const n=r[9].default,t=qt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Ut(t,n,l,l[8],e?Vt(n,l[8],o,null):Wt(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function uo(r){let e,n,t=r[0]&&qn(r);return{c(){t&&t.c(),e=Me()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=qn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ge(),_(t,1,1,()=>{t=null}),de())},i(l){n||(m(t),n=!0)},o(l){_(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function co(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=yn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e;if(i&&i.includes("pmtiles://")&&!Nn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Ml;Nn.addProtocol("pmtiles",y.tile)}const{map:c,self:g}=ll();we(r,c,y=>n(7,l=y)),we(r,g,y=>n(0,t=y));let d;return ol(()=>{t&&l&&(sl(c,t,d),it(g,t=null,t),d=void 0)}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,u=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==f&&(it(g,t=f,t),il(l,t,al({type:"vector",url:i,tiles:a,promoteId:u}),y=>l&&y===t,()=>{t&&(d=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{d=l==null?void 0:l.getSource(f)}))},[t,c,g,f,i,a,u,l,s,o]}class ve extends J{constructor(e){super(),K(this,e,co,uo,Y,{id:3,url:4,tiles:5,promoteId:6})}}const $o={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ie=Uint8Array,ut=Uint16Array,pl=Uint32Array,ml=new Ie([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_l=new Ie([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),po=new Ie([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gl=function(r,e){for(var n=new ut(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new pl(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},dl=gl(ml,2),hl=dl[0],mo=dl[1];hl[28]=258,mo[258]=28;var _o=gl(_l,0),go=_o[0],_n=new ut(32768);for(var _e=0;_e<32768;++_e){var lt=(_e&43690)>>>1|(_e&21845)<<1;lt=(lt&52428)>>>2|(lt&13107)<<2,lt=(lt&61680)>>>4|(lt&3855)<<4,_n[_e]=((lt&65280)>>>8|(lt&255)<<8)>>>1}var Bt=function(r,e,n){for(var t=r.length,l=0,o=new ut(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new ut(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var f;if(n){f=new ut(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],u=e-r[l],c=s[r[l]-1]++<<u,g=c|(1<<u)-1;c<=g;++c)f[_n[c]>>>i]=a}else for(f=new ut(t),l=0;l<t;++l)r[l]&&(f[l]=_n[s[r[l]-1]++]>>>15-r[l]);return f},Yt=new Ie(288);for(var _e=0;_e<144;++_e)Yt[_e]=8;for(var _e=144;_e<256;++_e)Yt[_e]=9;for(var _e=256;_e<280;++_e)Yt[_e]=7;for(var _e=280;_e<288;++_e)Yt[_e]=8;var bl=new Ie(32);for(var _e=0;_e<32;++_e)bl[_e]=5;var ho=Bt(Yt,9,1),bo=Bt(bl,5,1),on=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Re=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},sn=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},vo=function(r){return(r+7)/8|0},Tn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?ut:r.BYTES_PER_ELEMENT==4?pl:Ie)(n-e);return t.set(r.subarray(e,n)),t},wo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Be=function(r,e,n){var t=new Error(e||wo[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Be),!n)throw t;return t},ko=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Ie(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ie(t*3));var s=function(Fe){var Se=e.length;if(Fe>Se){var xe=new Ie(Math.max(Se*2,Fe));xe.set(e),e=xe}},f=n.f||0,i=n.p||0,a=n.b||0,u=n.l,c=n.d,g=n.m,d=n.n,y=t*8;do{if(!u){f=Re(r,i,1);var A=Re(r,i+1,3);if(i+=3,A)if(A==1)u=ho,c=bo,g=9,d=5;else if(A==2){var P=Re(r,i,31)+257,M=Re(r,i+10,15)+4,L=P+Re(r,i+5,31)+1;i+=14;for(var N=new Ie(L),D=new Ie(19),S=0;S<M;++S)D[po[S]]=Re(r,i+S*3,7);i+=M*3;for(var F=on(D),G=(1<<F)-1,R=Bt(D,F,1),S=0;S<L;){var E=R[Re(r,i,G)];i+=E&15;var T=E>>>4;if(T<16)N[S++]=T;else{var H=0,U=0;for(T==16?(U=3+Re(r,i,3),i+=2,H=N[S-1]):T==17?(U=3+Re(r,i,7),i+=3):T==18&&(U=11+Re(r,i,127),i+=7);U--;)N[S++]=H}}var te=N.subarray(0,P),re=N.subarray(P);g=on(te),d=on(re),u=Bt(te,g,1),c=Bt(re,d,1)}else Be(1);else{var T=vo(i)+4,I=r[T-4]|r[T-3]<<8,j=T+I;if(j>t){o&&Be(0);break}l&&s(a+I),e.set(r.subarray(T,j),a),n.b=a+=I,n.p=i=j*8,n.f=f;continue}if(i>y){o&&Be(0);break}}l&&s(a+131072);for(var ce=(1<<g)-1,Le=(1<<d)-1,Te=i;;Te=i){var H=u[sn(r,i)&ce],se=H>>>4;if(i+=H&15,i>y){o&&Be(0);break}if(H||Be(2),se<256)e[a++]=se;else if(se==256){Te=i,u=null;break}else{var Ae=se-254;if(se>264){var S=se-257,fe=ml[S];Ae=Re(r,i,(1<<fe)-1)+hl[S],i+=fe}var $e=c[sn(r,i)&Le],me=$e>>>4;$e||Be(3),i+=$e&15;var re=go[me];if(me>3){var fe=_l[me];re+=sn(r,i)&(1<<fe)-1,i+=fe}if(i>y){o&&Be(0);break}l&&s(a+131072);for(var je=a+Ae;a<je;a+=4)e[a]=e[a-re],e[a+1]=e[a+1-re],e[a+2]=e[a+2-re],e[a+3]=e[a+3-re];a=je}}n.l=u,n.p=Te,n.b=a,n.f=f,u&&(f=1,n.m=g,n.d=c,n.n=d)}while(!f);return a==e.length?e:Tn(e,0,a)},yo=new Ie(0),Ye=function(r,e){return r[e]|r[e+1]<<8},He=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},an=function(r,e){return He(r,e)+He(r,e+4)*4294967296};function So(r,e){return ko(r,e)}var gn=typeof TextDecoder<"u"&&new TextDecoder,Co=0;try{gn.decode(yo,{stream:!0}),Co=1}catch{}var To=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,Tn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function vl(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(gn)return gn.decode(r);var l=To(r),o=l[0],s=l[1];return s.length&&Be(8),o}}var Oo=function(r,e){return e+30+Ye(r,e+26)+Ye(r,e+28)},Ao=function(r,e,n){var t=Ye(r,e+28),l=vl(r.subarray(e+46,e+46+t),!(Ye(r,e+8)&2048)),o=e+46+t,s=He(r,e+20),f=n&&s==4294967295?Lo(r,o):[s,He(r,e+24),He(r,e+42)],i=f[0],a=f[1],u=f[2];return[Ye(r,e+10),i,a,l,o+Ye(r,e+30)+Ye(r,e+32),u]},Lo=function(r,e){for(;Ye(r,e)!=1;e+=4+Ye(r,e+2));return[an(r,e+12),an(r,e+4),an(r,e+20)]};function Io(r,e){for(var n={},t=r.length-22;He(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Be(13);var l=Ye(r,t+8);if(!l)return{};var o=He(r,t+16),s=o==4294967295||l==65535;if(s){var f=He(r,t-12);s=He(r,f)==101075792,s&&(l=He(r,f+32),o=He(r,f+48))}for(var i=e&&e.filter,a=0;a<l;++a){var u=Ao(r,o,s),c=u[0],g=u[1],d=u[2],y=u[3],A=u[4],T=u[5],I=Oo(r,T);o=A,(!i||i({name:y,size:g,originalSize:d,compression:c}))&&(c?c==8?n[y]=So(r.subarray(I,I+g),new Ie(d)):Be(14,"unknown compression type "+c):n[y]=Tn(r,I,I+g))}return n}function Po(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(fn):fn(r)}function fn(r){var e=new Uint8Array(r),n=Io(e);return Promise.resolve(Mo(n))}function Mo(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=vl(r[l])}return e}function Ke(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&ct(t)===e)return t;n++}}function Qt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&ct(l)===e&&n.push(l),t++}return n}function en(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&ct(l)===e&&n(l,t):n(l,t),t++}}function No(r,e,n){var t=[];return en(r,e,function(l,o){t.push(n(l,o))}),t}var Fo=/.+\:/;function ct(r){return r.tagName.replace(Fo,"")}function wl(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+ct(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=wl(r.childNodes[t]),t++;return e+="</"+ct(r)+">",e}function Do(r){var e=r.documentElement,n=Ke(e,"sheetData"),t=[];return en(n,"row",function(l){en(l,"c",function(o){t.push(o)})}),t}function Eo(r,e){return Ke(e,"v")}function jo(r,e){if(e.firstChild&&ct(e.firstChild)==="is"&&e.firstChild.firstChild&&ct(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Ro(r){var e=r.documentElement,n=Ke(e,"dimension");if(n)return n.getAttribute("ref")}function Bo(r){var e=r.documentElement,n=Ke(e,"cellStyleXfs");return n?Qt(n,"xf"):[]}function Ho(r){var e=r.documentElement,n=Ke(e,"cellXfs");return n?Qt(n,"xf"):[]}function zo(r){var e=r.documentElement,n=Ke(e,"numFmts");return n?Qt(n,"numFmt"):[]}function Go(r){var e=r.documentElement;return No(e,"si",function(n){var t=Ke(n,"t");if(t)return t.textContent;var l="";return en(n,"r",function(o){l+=Ke(o,"t").textContent}),l})}function qo(r){var e=r.documentElement;return Ke(e,"workbookPr")}function Uo(r){var e=r.documentElement;return Qt(e,"Relationship")}function Wo(r){var e=r.documentElement,n=Ke(e,"sheets");return Qt(n,"sheet")}function Vo(r,e){var n=e.createDocument(r),t={},l=qo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(f){f.getAttribute("name")&&t.sheets.push({id:f.getAttribute("sheetId"),name:f.getAttribute("name"),relationId:f.getAttribute("r:id")})};return Wo(n).forEach(o),t}function Xo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var f=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=un(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=un(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=un(f);break}};return Uo(n).forEach(l),t}function un(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Wn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Vn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wn(Object(n),!0).forEach(function(t){Yo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Yo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Qo(r,e){if(!r)return{};var n=e.createDocument(r),t=Bo(n).map(cn),l=zo(n).map(Jo).reduce(function(s,f){return s[f.id]=f,s},[]),o=function(f){return f.hasAttribute("xfId")?Vn(Vn({},t[f.xfId]),cn(f,l)):cn(f,l)};return Ho(n).map(o)}function Jo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function cn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Ko(r,e){return r?Go(e.createDocument(r)):[]}function kl(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Zo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=xo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xo(r,e){if(r){if(typeof r=="string")return Xn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xn(r,e)}}function Xn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function es(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(ts.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&ls(l.numberFormat.template))return!0}}var ts=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],ns=/^\[\$-414\]/,rs=/;@$/;function ls(r){r=r.toLowerCase(),r=r.replace(ns,""),r=r.replace(rs,"");for(var e=r.split(/\W+/),n=Zo(e),t;!(t=n()).done;){var l=t.value;if(os.indexOf(l)<0)return!1}return!0}var os=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function ss(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,f=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=$n(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=$n(r,a);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=f.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=f[u],r=$n(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=is(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var g=Number(r);if(isNaN(g))throw new Error('Invalid "numeric" cell value: '.concat(r));r=g,es(r,o(),s,a)&&(r=kl(r,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function is(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function $n(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var as=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function fs(r){var e=function(a,u){return a-u},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],f=t[t.length-1];return[{row:l,column:s},{row:o,column:f}]}function us(r){for(var e=0,n=0;n<r.length;)e*=26,e+=as.indexOf(r[n]),n++;return e}function yl(r){return r=r.split(/(\d+)/),[parseInt(r[1]),us(r[0].trim())]}function cs(r,e,n,t,l,o,s){var f=yl(r.getAttribute("r")),i=Eo(e,r),a=i&&i.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:f[0],column:f[1],value:ss(a,u,{getInlineStringValue:function(){return jo(e,r)},getInlineStringXml:function(){return wl(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function $s(r,e,n,t,l,o){var s=Do(r);return s.length===0?[]:s.map(function(f){return cs(f,r,e,n,t,l,o)})}function ps(r,e){return ds(r)||gs(r,e)||_s(r,e)||ms()}function ms(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _s(r,e){if(r){if(typeof r=="string")return Yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(r,e)}}function Yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function gs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function ds(r){if(Array.isArray(r))return r}function hs(r){var e=Ro(r);if(e)return e=e.split(":").map(yl).map(function(n){var t=ps(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function bs(r,e,n,t,l,o){var s=e.createDocument(r),f=$s(s,e,n,t,l,o),i=hs(s)||fs(f);return{cells:f,dimensions:i}}function vs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ws(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ws(r,e){if(r){if(typeof r=="string")return Qn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qn(r,e)}}function Qn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ks(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var f=!0,i=vs(r[s]),a;!(a=i()).done;){var u=a.value;if(l(u)!==null){f=!1;break}}if(f)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function ys(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ss(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ss(r,e){if(r){if(typeof r=="string")return Jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(r,e)}}function Jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Cs(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,f=ys(r),i;!(i=f()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var u=0;u<r.length;)r[u].splice(o,1),u++;else if(l)break;o--}return r}function Ts(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Sl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Os(r,e){return Is(r)||Ls(r,e)||Sl(r,e)||As()}function As(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sl(r,e){if(r){if(typeof r=="string")return Kn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(r,e)}}function Kn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ls(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Is(r){if(Array.isArray(r))return r}function Ps(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Os(n,2);l[0];for(var o=l[1],s=o.column,f=o.row,i=new Array(f),a=0;a<f;){i[a]=new Array(s);for(var u=0;u<s;)i[a][u]=null,u++;a++}for(var c=Ts(t),g;!(g=c()).done;){var d=g.value,y=d.row-1,A=d.column-1;A<s&&y<f&&(i[y][A]=d.value)}var T=e.rowMap;if(T)for(var I=0;I<i.length;)T[I]=I,I++;return i=ks(Cs(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(i=e.transformData(i)),i}function Ms(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ns(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ns(r,e){if(r){if(typeof r=="string")return Zn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(r,e)}}function Zn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function xn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Fs(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xn(Object(n),!0).forEach(function(t){Ds(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ds(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Es(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Fs({sheet:1},n));var t=function(g){if(!r[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return r[g]},l=Xo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Ko(t(l.sharedStrings),e):[],s=l.styles?Qo(t(l.styles),e):{},f=Vo(t("xl/workbook.xml"),e);if(n.getSheets)return f.sheets.map(function(c){var g=c.name;return{name:g}});var i=js(n.sheet,f.sheets);if(!i||!l.sheets[i])throw Rs(n.sheet,f.sheets);var a=bs(t(l.sheets[i]),e,o,s,f,n),u=Ps(a,n);return n.properties?{data:u,properties:f}:u}function js(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Ms(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Rs(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function dn(r){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(r)}function er(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Bs(r,e,n){return e&&er(r.prototype,e),n&&er(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Hs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function zs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&zt(r,e)}function Gs(r){var e=Cl();return function(){var t=Gt(r),l;if(e){var o=Gt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return qs(this,l)}}function qs(r,e){if(e&&(dn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Us(r)}function Us(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function hn(r){var e=typeof Map=="function"?new Map:void 0;return hn=function(t){if(t===null||!Ws(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Zt(t,arguments,Gt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),zt(l,t)},hn(r)}function Zt(r,e,n){return Cl()?Zt=Reflect.construct:Zt=function(l,o,s){var f=[null];f.push.apply(f,o);var i=Function.bind.apply(l,f),a=new i;return s&&zt(a,s.prototype),a},Zt.apply(null,arguments)}function Cl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ws(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function zt(r,e){return zt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},zt(r,e)}function Gt(r){return Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Gt(r)}var Pe=function(r){zs(n,r);var e=Gs(n);function n(t){var l;return Hs(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Bs(n)}(hn(Error));function Vs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Pe("not_a_number")}if(typeof r!="number")throw new Pe("not_a_number");if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");return r}function Xs(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");return String(r)}throw new Pe("not_a_string")}function Ys(r){if(typeof r=="boolean")return r;throw new Pe("not_a_boolean")}function Qs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Pe("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");var t=kl(r,n);if(isNaN(t.valueOf()))throw new Pe("out_of_bounds");return t}throw new Pe("not_a_date")}function Js(r,e){return xs(r)||Zs(r,e)||Tl(r,e)||Ks()}function Ks(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function xs(r){if(Array.isArray(r))return r}function bn(r){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(r)}function ei(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Tl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tl(r,e){if(r){if(typeof r=="string")return tr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(r,e)}}function tr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function nr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function rr(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nr(Object(n),!0).forEach(function(t){ti(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ti(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var lr={isColumnOriented:!1};function ni(r,e,n){n?n=rr(rr({},lr),n):n=lr;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;si(e),l&&(r=oi(r));for(var f=r[0],i=[],a=[],u=1;u<r.length;u++){var c=Ol(e,r[u],u,f,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=ei(a),d;!(d=g()).done;){var y=d.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function Ol(r,e,n,t,l,o){for(var s={},f=!0,i=function(){var g=u[a],d=r[g],y=bn(d.type)==="object"&&!Array.isArray(d.type),A=e[t.indexOf(g)];A===void 0&&(A=null);var T=void 0,I=void 0,j=void 0;if(y)T=Ol(d.type,e,n,t,l,o);else if(A===null)T=null;else if(Array.isArray(d.type)){var P=!1,M=li(A).map(function(N){var D=or(N,d,o);return D.error&&(T=N,I=D.error,j=D.reason),D.value!==null&&(P=!0),D.value});I||(T=P?M:null)}else{var L=or(A,d,o);I=L.error,j=L.reason,T=I?A:L.value}!I&&T===null&&d.required&&(I="required"),I?(I={error:I,row:n+1,column:g,value:T},j&&(I.reason=j),d.type&&(I.type=d.type),l.push(I)):(f&&T!==null&&(f=!1),(T!==null||o.includeNullValues)&&(s[d.prop]=T))},a=0,u=Object.keys(r);a<u.length;a++)i();return f?null:s}function or(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=pt(r,e.parse):e.type?t=ri(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function pt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ri(r,e,n){switch(e){case String:return pt(r,Xs);case Number:return pt(r,Vs);case Date:return pt(r,function(t){return Qs(t,{properties:n.properties})});case Boolean:return pt(r,Ys);default:if(typeof e=="function")return pt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Al(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=Al(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function li(r){for(var e=[],n=0;n<r.length;){var t=Al(r,",",n),l=Js(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var oi=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function si(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function vn(r){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(r)}function Ll(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;vn(o)==="object"&&(o=Object.keys(r[l])[0],s=Ll(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var ii=["schema","map"];function sr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Kt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sr(Object(n),!0).forEach(function(t){ai(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ai(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function fi(r,e){if(r==null)return{};var n=ui(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ui(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function ci(r,e,n){var t=n.schema,l=n.map,o=fi(n,ii);!t&&l&&(t=Ll(l));var s=Es(r,e,Kt(Kt({},o),{},{properties:t||o.properties}));return t?ni(s.data,t,Kt(Kt({},o),{},{properties:s.properties})):s}function $i(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Po(r).then(function(n){return ci(n,$o,e)})}function pi(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>mi(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function mi(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function _i(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await $i(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Nl(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const wn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function gi(r){return rn(["get","intervention_type"],{area:tt.area,route:tt.route,crossing:tt.crossing,other:tt.other},"white")}function di(r){return[["Areas",tt.area],["Routes",tt.route],["Crossings",tt.crossing],["Other",tt.other]]}const le={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",trams:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},ze=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function kn(){let[r,e]=Il(wn,le.funding_programmes);return[rn(["get","funding_programme"],r,"grey"),e]}function hi(){let r=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=Il(r,le.current_milestone);return[rn(["get","current_milestone"],e,"grey"),n]}function Il(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function bi(r){let e,n;return e=new $l({props:{rows:r[1]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vi(r){let e,n,t,l,o;function s(i){r[3](i)}let f={label:"Color interventions",id:"colorInterventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(f.value=r[0]),e=new Lt({props:f}),W.push(()=>V(e,"value",s)),e.$on("change",r[2]),l=new De({props:{label:"Legend",$$slots:{default:[bi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};!n&&a&1&&(n=!0,u.value=i[0],X(()=>n=!1)),e.$set(u);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function wi(r,e,n){let t;we(r,Sn,a=>n(4,t=a));let l="fundingProgramme",[o,s]=kn();function f(){let a;l=="interventionType"?(a=gi(),n(1,s=di())):l=="fundingProgramme"?n(1,[a,s]=kn(),s):l=="currentMilestone"&&n(1,[a,s]=hi(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){l=a,n(0,l)}return[l,s,f,i]}class ki extends J{constructor(e){super(),K(this,e,wi,vi,Y,{})}}const Mt=Xt({type:"FeatureCollection",features:[],schemes:{}}),tn=Xt(new Map),ir=Xt(!0),Dt=Xt(""),Et=Xt("");function yi(r){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Si(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ci(r){let e,n,t,l,o,s;return t=new Pt({props:{$$slots:{default:[Si]},$$scope:{ctx:r}}}),t.$on("click",r[16]),{c(){e=C("input"),n=O(),b(t.$$.fragment),q(e,"type","text"),q(e,"class","govuk-input govuk-input--width-10"),q(e,"id","filterInterventionText")},m(f,i){$(f,e,i),Qe(e,r[6]),$(f,n,i),v(t,f,i),l=!0,o||(s=at(e,"input",r[15]),o=!0)},p(f,i){i&64&&e.value!==f[6]&&Qe(e,f[6]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(m(t.$$.fragment,f),l=!0)},o(f){_(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function Ti(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Oi(r){let e,n,t,l,o,s;return t=new Pt({props:{$$slots:{default:[Ti]},$$scope:{ctx:r}}}),t.$on("click",r[18]),{c(){e=C("input"),n=O(),b(t.$$.fragment),q(e,"type","text"),q(e,"class","govuk-input govuk-input--width-10"),q(e,"id","filterSchemeText")},m(f,i){$(f,e,i),Qe(e,r[5]),$(f,n,i),v(t,f,i),l=!0,o||(s=at(e,"input",r[17]),o=!0)},p(f,i){i&32&&e.value!==f[5]&&Qe(e,f[5]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(m(t.$$.fragment,f),l=!0)},o(f){_(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function Ai(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y,A,T,I;e=new Pt({props:{$$slots:{default:[yi]},$$scope:{ctx:r}}}),e.$on("click",r[11]);function j(S){r[12](S)}let P={label:"Authority or region",id:"filterAuthority",choices:r[7],emptyOption:!0};r[2]!==void 0&&(P.value=r[2]),t=new Lt({props:P}),W.push(()=>V(t,"value",j));function M(S){r[13](S)}let L={label:"Funding programme",id:"filterFundingProgramme",choices:r[8],emptyOption:!0};r[3]!==void 0&&(L.value=r[3]),s=new Lt({props:L}),W.push(()=>V(s,"value",M));function N(S){r[14](S)}let D={label:"Current milestone",id:"filterCurrentMilestone",choices:r[9],emptyOption:!0};return r[4]!==void 0&&(D.value=r[4]),a=new Lt({props:D}),W.push(()=>V(a,"value",N)),g=new pn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Ci]},$$scope:{ctx:r}}}),y=new pn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Oi]},$$scope:{ctx:r}}}),T=new ki({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment),i=O(),b(a.$$.fragment),c=O(),b(g.$$.fragment),d=O(),b(y.$$.fragment),A=O(),b(T.$$.fragment)},m(S,F){v(e,S,F),$(S,n,F),v(t,S,F),$(S,o,F),v(s,S,F),$(S,i,F),v(a,S,F),$(S,c,F),v(g,S,F),$(S,d,F),v(y,S,F),$(S,A,F),v(T,S,F),I=!0},p(S,F){const G={};F&16777216&&(G.$$scope={dirty:F,ctx:S}),e.$set(G);const R={};F&128&&(R.choices=S[7]),!l&&F&4&&(l=!0,R.value=S[2],X(()=>l=!1)),t.$set(R);const E={};F&256&&(E.choices=S[8]),!f&&F&8&&(f=!0,E.value=S[3],X(()=>f=!1)),s.$set(E);const H={};F&512&&(H.choices=S[9]),!u&&F&16&&(u=!0,H.value=S[4],X(()=>u=!1)),a.$set(H);const U={};F&16777280&&(U.$$scope={dirty:F,ctx:S}),g.$set(U);const te={};F&16777248&&(te.$$scope={dirty:F,ctx:S}),y.$set(te)},i(S){I||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(s.$$.fragment,S),m(a.$$.fragment,S),m(g.$$.fragment,S),m(y.$$.fragment,S),m(T.$$.fragment,S),I=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(s.$$.fragment,S),_(a.$$.fragment,S),_(g.$$.fragment,S),_(y.$$.fragment,S),_(T.$$.fragment,S),I=!1},d(S){S&&(p(n),p(o),p(i),p(c),p(d),p(A)),w(e,S),w(t,S),w(s,S),w(a,S),w(g,S),w(y,S),w(T,S)}}}function Li(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[10].route.toLocaleString()+"",s,f,i=r[10].area.toLocaleString()+"",a,u,c=r[10].crossing.toLocaleString()+"",g,d,y=r[10].other.toLocaleString()+"",A,T,I=ar(r[10].totalLength).toFixed(1)+"",j,P;return{c(){e=k("Showing "),t=k(n),l=k(" schemes ("),s=k(o),f=k(`
    routes, `),a=k(i),u=k(` areas,
    `),g=k(c),d=k(" crossings, "),A=k(y),T=k(`
    other, with total LineString length of `),j=k(I),P=k(" miles)")},m(M,L){$(M,e,L),$(M,t,L),$(M,l,L),$(M,s,L),$(M,f,L),$(M,a,L),$(M,u,L),$(M,g,L),$(M,d,L),$(M,A,L),$(M,T,L),$(M,j,L),$(M,P,L)},p(M,L){L&1&&n!==(n=M[0].size.toLocaleString()+"")&&B(t,n),L&1024&&o!==(o=M[10].route.toLocaleString()+"")&&B(s,o),L&1024&&i!==(i=M[10].area.toLocaleString()+"")&&B(a,i),L&1024&&c!==(c=M[10].crossing.toLocaleString()+"")&&B(g,c),L&1024&&y!==(y=M[10].other.toLocaleString()+"")&&B(A,y),L&1024&&I!==(I=ar(M[10].totalLength).toFixed(1)+"")&&B(j,I)},d(M){M&&(p(e),p(t),p(l),p(s),p(f),p(a),p(u),p(g),p(d),p(A),p(T),p(j),p(P))}}}function Ii(r){let e,n,t;function l(s){r[19](s)}let o={id:"show-schemes",$$slots:{default:[Li]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ae({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&16778241&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Pi(r){let e,n,t,l;return e=new De({props:{label:"Filters",$$slots:{default:[Ai]},$$scope:{ctx:r}}}),t=new nt({props:{small:!0,$$slots:{default:[Ii]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&16778236&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16778243&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function ar(r){return r*621371e-9}function Mi(r,e,n){let t,l,o,s;we(r,Et,R=>n(5,t=R)),we(r,Dt,R=>n(6,l=R)),we(r,Mt,R=>n(20,o=R)),we(r,tn,R=>n(21,s=R));let{schemesToBeShown:f=new Set}=e,{show:i=!0}=e,a=[],u="",c=[],g=new Set(wn.slice(0,-1)),d="",y=[],A="",T={area:0,route:0,crossing:0,other:0,totalLength:0};Cn(()=>{var U,te,re;let R=new Set,E=new Set,H=new Set;for(let ce of s.values())(U=ce.browse)!=null&&U.authority_or_region&&R.add(ce.browse.authority_or_region),(te=ce.browse)!=null&&te.funding_programme&&E.add(ce.browse.funding_programme),(re=ce.browse)!=null&&re.current_milestone&&H.add(ce.browse.current_milestone);n(7,a=Array.from(R.entries())),a.sort(),n(8,c=wn.map(ce=>[ce,ce])),n(9,y=Array.from(H.entries())),y.sort()});function I(R,E,H,U,te){let re=R.toLowerCase(),ce=E.toLowerCase(),Le=se=>{var Ae,fe,$e,me,je,Fe;if(re&&!((Ae=se.properties.name)!=null&&Ae.toLowerCase().includes(re))&&!((fe=se.properties.description)!=null&&fe.toLowerCase().includes(re)))return!1;if(ce||H||U||te){let Se=s.get(se.properties.scheme_reference);if(H&&(($e=Se.browse)==null?void 0:$e.authority_or_region)!=H||U&&U!=="Other"&&((me=Se.browse)==null?void 0:me.funding_programme)!=U||U==="Other"&&g.has(((je=Se.browse)==null?void 0:je.funding_programme)??"")||te&&((Fe=Se.browse)==null?void 0:Fe.current_milestone)!=te||ce&&!Se.scheme_reference.toLowerCase().includes(ce)&&!(Se.scheme_name??"").toLowerCase().includes(ce))return!1}return!0};n(0,f=new Set(o.features.filter(Le).map(se=>se.properties.scheme_reference))),n(10,T={area:0,route:0,crossing:0,other:0,totalLength:0});let Te=se=>{var Ae,fe;return!(!f.has(se.properties.scheme_reference)||re&&!((Ae=se.properties.name)!=null&&Ae.toLowerCase().includes(re))&&!((fe=se.properties.description)!=null&&fe.toLowerCase().includes(re)))};for(let se of o.features)Te(se)?(delete se.properties.hide_while_editing,n(10,T[se.properties.intervention_type]++,T),se.geometry.type=="LineString"&&se.properties.length_meters&&n(10,T.totalLength+=se.properties.length_meters,T)):se.properties.hide_while_editing=!0;Mt.set(o),n(10,T)}function j(){n(2,u=""),n(3,d=""),n(4,A=""),it(Dt,l="",l),it(Et,t="",t)}function P(R){u=R,n(2,u)}function M(R){d=R,n(3,d)}function L(R){A=R,n(4,A)}function N(){l=this.value,Dt.set(l)}const D=()=>it(Dt,l="",l);function S(){t=this.value,Et.set(t)}const F=()=>it(Et,t="",t);function G(R){i=R,n(1,i)}return r.$$set=R=>{"schemesToBeShown"in R&&n(0,f=R.schemesToBeShown),"show"in R&&n(1,i=R.show)},r.$$.update=()=>{r.$$.dirty&124&&I(l,t,u,d,A)},[f,i,u,d,A,t,l,a,c,y,T,j,P,M,L,N,D,S,F,G]}class Ni extends J{constructor(e){super(),K(this,e,Mi,Pi,Y,{schemesToBeShown:0,show:1})}}function Fi(r){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Di(r){let e,n,t,l,o;return t=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Fi]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("License: "),b(t.$$.fragment),l=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,f){$(s,e,f),h(e,n),v(t,e,null),h(e,l),o=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){_(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class Ne extends J{constructor(e){super(),K(this,e,null,Di,Y,{})}}function fr(r,e,n){const t=r.slice();return t[2]=e[n],t}function ur(r,e,n){const t=r.slice();return t[5]=e[n],t}function cr(r){let e,n;return{c(){e=C("span"),n=k(`
    `),Ce(e,"background",r[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,l){$(t,e,l),h(e,n)},p(t,l){l&1&&Ce(e,"background",t[5])},d(t){t&&p(e)}}}function $r(r){let e,n=r[2]+"",t;return{c(){e=C("span"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&B(t,n)},d(l){l&&p(e)}}}function Ei(r){let e,n,t,l=Ee(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=cr(ur(r,l,i));let s=Ee(r[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=$r(fr(r,s,i));return{c(){e=C("div");for(let i=0;i<o.length;i+=1)o[i].c();n=O(),t=C("div");for(let i=0;i<f.length;i+=1)f[i].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);$(i,n,a),$(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){l=Ee(i[0]);let u;for(u=0;u<l.length;u+=1){const c=ur(i,l,u);o[u]?o[u].p(c,a):(o[u]=cr(c),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}if(a&2){s=Ee(i[1]);let u;for(u=0;u<s.length;u+=1){const c=fr(i,s,u);f[u]?f[u].p(c,a):(f[u]=$r(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:ne,o:ne,d(i){i&&(p(e),p(n),p(t)),It(o,i),It(f,i)}}}function ji(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ge extends J{constructor(e){super(),K(this,e,ji,Ei,Y,{colorScale:0,limits:1})}}function pr(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Ri(r){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bi(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zi(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gi(r){let e,n,t,l,o,s,f,i,a,u,c,g;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Bi]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),u=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[zi]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=O(),i=C("p"),a=k("License: "),b(u.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(d,y){$(d,e,y),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(d,f,y),$(d,i,y),h(i,a),v(u,i,null),h(i,c),g=!0},p(d,y){const A={};y&65536&&(A.$$scope={dirty:y,ctx:d}),t.$set(A);const T={};y&65536&&(T.$$scope={dirty:y,ctx:d}),o.$set(T);const I={};y&65536&&(I.$$scope={dirty:y,ctx:d}),u.$set(I)},i(d){g||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(u.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(u.$$.fragment,d),g=!1},d(d){d&&(p(e),p(f),p(i)),w(t),w(o),w(u)}}}function qi(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Gi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function mr(r){let e,n;return e=new Ge({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ui(r){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xi(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yi(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y;return o=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Wi]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Vi]},$$scope:{ctx:r}}}),g=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Xi]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=C("p"),l=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(f.$$.fragment),i=k("."),a=O(),u=C("p"),c=k("License: "),b(g.$$.fragment),d=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(A,T){$(A,e,T),$(A,n,T),$(A,t,T),h(t,l),v(o,t,null),h(t,s),v(f,t,null),h(t,i),$(A,a,T),$(A,u,T),h(u,c),v(g,u,null),h(u,d),y=!0},p(A,T){const I={};T&65536&&(I.$$scope={dirty:T,ctx:A}),o.$set(I);const j={};T&65536&&(j.$$scope={dirty:T,ctx:A}),f.$set(j);const P={};T&65536&&(P.$$scope={dirty:T,ctx:A}),g.$set(P)},i(A){y||(m(o.$$.fragment,A),m(f.$$.fragment,A),m(g.$$.fragment,A),y=!0)},o(A){_(o.$$.fragment,A),_(f.$$.fragment,A),_(g.$$.fragment,A),y=!1},d(A){A&&(p(e),p(n),p(t),p(a),p(u)),w(o),w(f),w(g)}}}function Qi(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Yi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function _r(r){let e,n;return e=new Ge({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ji(r){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ki(r){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xi(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ki]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Zi]},$$scope:{ctx:r}}}),i=new Ne({}),{c(){e=C("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const d={};c&65536&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){a||(m(t.$$.fragment,u),m(o.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function ea(r){let e,n,t;return n=new pe({props:{$$slots:{default:[xi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function gr(r){let e,n,t,l;return t=new Ge({props:{colorScale:r[4],limits:r[6]().map(aa)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:ne,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function ta(r){let e,n,t,l=r[15].toLocaleString()+"",o,s,f=r[14]+"",i;return{c(){e=C("p"),n=k("There are "),t=C("b"),o=k(l),s=k(`
          people per square kilometre in `),i=k(f)},m(a,u){$(a,e,u),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,u){u&8200&&l!==(l=a[15].toLocaleString()+"")&&B(o,l),u&8192&&f!==(f=a[14]+"")&&B(i,f)},d(a){a&&p(e)}}}function na(r){let e,n,t=r[14]+"",l,o,s,f=r[15]+"",i,a;return{c(){e=C("p"),n=k("Households in "),l=k(t),o=k(` have an average of
          `),s=C("b"),i=k(f),a=k(`
          cars`)},m(u,c){$(u,e,c),h(e,n),h(e,l),h(e,o),h(e,s),h(s,i),h(e,a)},p(u,c){c&8192&&t!==(t=u[14]+"")&&B(l,t),c&8200&&f!==(f=u[15]+"")&&B(i,f)},d(u){u&&p(e)}}}function ra(r){let e,n,t=r[15]+"",l,o,s,f=r[14]+"",i,a;return{c(){e=C("p"),n=C("b"),l=k(t),o=k("%"),s=k(`
          of households in `),i=k(f),a=k(" have 1 or more cars")},m(u,c){$(u,e,c),h(e,n),h(n,l),h(n,o),h(e,s),h(e,i),h(e,a)},p(u,c){c&8200&&t!==(t=u[15]+"")&&B(l,t),c&8192&&f!==(f=u[14]+"")&&B(i,f)},d(u){u&&p(e)}}}function la(r){pr(r);let e;function n(o,s){return o[3]=="percent_households_with_car"?ra:o[3]=="average_cars_per_household"?na:ta}let t=n(r),l=t(r);return{c(){l.c(),e=Me()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){pr(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function oa(r){let e,n;return e=new ue({props:{$$slots:{default:[la,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function sa(r){let e,n,t,l;const o=[z(et),{sourceLayer:et},{paint:{"fill-color":ke(["get",r[3]],r[6](),r[4]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[oa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s}),e.$on("click",r[5]);const f=[z(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&88?ee(o,[u&0&&ie(z(et)),u&0&&{sourceLayer:et},u&88&&{paint:{"fill-color":ke(["get",a[3]],a[6](),a[4]),"fill-opacity":Z(.5,.7)}},u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};u&65544&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&8?ee(f,[u&0&&ie(z(`${et}-outline`)),u&0&&{sourceLayer:et},f[2],u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function ia(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y;function A(S){r[7](S)}let T={id:"percent_households_with_car",$$slots:{right:[qi],default:[Ri]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new ae({props:T}),W.push(()=>V(e,"checked",A)),e.$on("change",r[8]);let I=r[3]=="percent_households_with_car"&&mr(r);function j(S){r[9](S)}let P={id:"average_cars_per_household",$$slots:{right:[Qi],default:[Ui]},$$scope:{ctx:r}};r[1]!==void 0&&(P.checked=r[1]),o=new ae({props:P}),W.push(()=>V(o,"checked",j)),o.$on("change",r[10]);let M=r[3]=="average_cars_per_household"&&_r(r);function L(S){r[11](S)}let N={id:"population_density",$$slots:{right:[ea],default:[Ji]},$$scope:{ctx:r}};r[2]!==void 0&&(N.checked=r[2]),a=new ae({props:N}),W.push(()=>V(a,"checked",L)),a.$on("change",r[12]);let D=r[3]=="population_density"&&gr(r);return d=new ve({props:{url:`pmtiles://${be()}/v1/${et}.pmtiles`,$$slots:{default:[sa]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),I&&I.c(),l=O(),b(o.$$.fragment),f=O(),M&&M.c(),i=O(),b(a.$$.fragment),c=O(),D&&D.c(),g=O(),b(d.$$.fragment)},m(S,F){v(e,S,F),$(S,t,F),I&&I.m(S,F),$(S,l,F),v(o,S,F),$(S,f,F),M&&M.m(S,F),$(S,i,F),v(a,S,F),$(S,c,F),D&&D.m(S,F),$(S,g,F),v(d,S,F),y=!0},p(S,[F]){const G={};F&65536&&(G.$$scope={dirty:F,ctx:S}),!n&&F&1&&(n=!0,G.checked=S[0],X(()=>n=!1)),e.$set(G),S[3]=="percent_households_with_car"?I?(I.p(S,F),F&8&&m(I,1)):(I=mr(S),I.c(),m(I,1),I.m(l.parentNode,l)):I&&(ge(),_(I,1,1,()=>{I=null}),de());const R={};F&65536&&(R.$$scope={dirty:F,ctx:S}),!s&&F&2&&(s=!0,R.checked=S[1],X(()=>s=!1)),o.$set(R),S[3]=="average_cars_per_household"?M?(M.p(S,F),F&8&&m(M,1)):(M=_r(S),M.c(),m(M,1),M.m(i.parentNode,i)):M&&(ge(),_(M,1,1,()=>{M=null}),de());const E={};F&65536&&(E.$$scope={dirty:F,ctx:S}),!u&&F&4&&(u=!0,E.checked=S[2],X(()=>u=!1)),a.$set(E),S[3]=="population_density"?D?(D.p(S,F),F&8&&m(D,1)):(D=gr(S),D.c(),m(D,1),D.m(g.parentNode,g)):D&&(ge(),_(D,1,1,()=>{D=null}),de());const H={};F&65544&&(H.$$scope={dirty:F,ctx:S}),d.$set(H)},i(S){y||(m(e.$$.fragment,S),m(I),m(o.$$.fragment,S),m(M),m(a.$$.fragment,S),m(D),m(d.$$.fragment,S),y=!0)},o(S){_(e.$$.fragment,S),_(I),_(o.$$.fragment,S),_(M),_(a.$$.fragment,S),_(D),_(d.$$.fragment,S),y=!1},d(S){S&&(p(t),p(l),p(f),p(i),p(c),p(g)),w(e,S),I&&I.d(S),w(o,S),M&&M.d(S),w(a,S),D&&D.d(S),w(d,S)}}}let et="census_output_areas";const aa=r=>r.toLocaleString();function fa(r,e,n){let t=le.sequential_low_to_high,l=!1,o=!1,s=!1,f="";function i(T){let I=T.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${I}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${I}`,"_blank")}function a(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function u(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(T){o=T,n(1,o)}const d=()=>{n(0,l=!1),n(2,s=!1)};function y(T){s=T,n(2,s)}const A=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,f="percent_households_with_car"):o?n(3,f="average_cars_per_household"):s?n(3,f="population_density"):n(3,f=""))},[l,o,s,f,t,i,a,u,c,g,d,y,A]}class ua extends J{constructor(e){super(),K(this,e,fa,ia,Y,{})}}function ca(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function $a(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pa(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[$a]},$$scope:{ctx:r}}}),s=new Ne({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of December 2022."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function ma(r){let e,n,t;return n=new pe({props:{$$slots:{default:[pa]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function _a(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function ga(r){let e,n;return e=new ue({props:{$$slots:{default:[_a,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function da(r){let e,n,t,l;const o=[z(mt),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ga]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s}),e.$on("click",ba);const f=[z(`${mt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ee(o,[u&0&&ie(z(mt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?ee(f,[u&0&&ie(z(`${mt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function ha(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:mt,$$slots:{right:[ma],default:[ca]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new Nt({props:{data:`${be()}/v1/${mt}.geojson`,$$slots:{default:[da]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let mt="combined_authorities";function ba(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function va(r,e,n){let t=le.combined_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class wa extends J{constructor(e){super(),K(this,e,va,ha,Y,{})}}function ka(r){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ya(r){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sa(r){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ca(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[ya]},$$scope:{ctx:r}}}),o=new Q({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Sa]},$$scope:{ctx:r}}}),i=new Ne({}),{c(){e=C("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),l=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){a||(m(t.$$.fragment,u),m(o.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function Ta(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Ca]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function dr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Oa(r){let e,n=r[4].LSOA11CD+"",t,l,o,s=r[4].score+"",f,i,a,u,c,g=r[4].rank.toLocaleString()+"",d,y;return{c(){e=C("p"),t=k(n),l=k(` has an IMD score of
        `),o=C("b"),f=k(s),i=O(),a=C("p"),u=k("Rank: "),c=C("b"),d=k(g),y=k(`
        / 32,844 LSOAs`)},m(A,T){$(A,e,T),h(e,t),h(e,l),h(e,o),h(o,f),$(A,i,T),$(A,a,T),h(a,u),h(a,c),h(c,d),h(a,y)},p(A,T){T&16&&n!==(n=A[4].LSOA11CD+"")&&B(t,n),T&16&&s!==(s=A[4].score+"")&&B(f,s),T&16&&g!==(g=A[4].rank.toLocaleString()+"")&&B(d,g)},d(A){A&&(p(e),p(i),p(a))}}}function Aa(r){let e,n;return e=new ue({props:{$$slots:{default:[Oa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function La(r){let e,n,t,l;const o=[z(qe),{sourceLayer:qe},{paint:{"fill-color":ke(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Aa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s});const f=[z(`${qe}-outline`),{sourceLayer:qe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&7?ee(o,[u&0&&ie(z(qe)),u&0&&{sourceLayer:qe},u&6&&{paint:{"fill-color":ke(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Z(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&1?ee(f,[u&0&&ie(z(`${qe}-outline`)),u&0&&{sourceLayer:qe},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Ia(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:qe,$$slots:{right:[Ta],default:[ka]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&dr(r);return o=new ve({props:{url:`pmtiles://${be()}/v1/${qe}.pmtiles`,$$slots:{default:[La]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=dr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&33&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let qe="imd";function Pa(r,e,n){let t=le.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class Ma extends J{constructor(e){super(),K(this,e,Pa,Ia,Y,{})}}function Na(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Fa(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Da(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Fa]},$$scope:{ctx:r}}}),s=new Ne({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Ea(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Da]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function ja(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Ra(r){let e,n;return e=new ue({props:{$$slots:{default:[ja,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ba(r){let e,n,t,l;const o=[z(_t),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ra]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s}),e.$on("click",za);const f=[z(`${_t}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ee(o,[u&0&&ie(z(_t)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?ee(f,[u&0&&ie(z(`${_t}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Ha(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:_t,$$slots:{right:[Ea],default:[Na]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new Nt({props:{data:`${be()}/v1/${_t}.geojson`,$$slots:{default:[Ba]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let _t="local_authority_districts";function za(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Ga(r,e,n){let t=le.local_authority_districts,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class qa extends J{constructor(e){super(),K(this,e,Ga,Ha,Y,{})}}function Ua(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Wa(r){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Va(r){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xa(r){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ya(r){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qa(r){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ja(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y,A,T,I,j,P,M,L,N;return t=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Wa]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Va]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),d=new Q({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Ya]},$$scope:{ctx:r}}}),j=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Qa]},$$scope:{ctx:r}}}),L=new Ne({}),{c(){e=C("p"),n=k("LPAs may be a "),b(t.$$.fragment),l=k(", "),b(o.$$.fragment),s=k("y, or "),b(f.$$.fragment),i=k("."),a=O(),u=C("p"),c=C("strong"),g=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(d.$$.fragment),y=k(" to get more details."),A=O(),T=C("p"),I=k("Data from ONS Geography via "),b(j.$$.fragment),P=k(", as of November 2022."),M=O(),b(L.$$.fragment)},m(D,S){$(D,e,S),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),v(f,e,null),h(e,i),$(D,a,S),$(D,u,S),h(u,c),h(c,g),v(d,c,null),h(c,y),$(D,A,S),$(D,T,S),h(T,I),v(j,T,null),h(T,P),$(D,M,S),v(L,D,S),N=!0},p(D,S){const F={};S&16&&(F.$$scope={dirty:S,ctx:D}),t.$set(F);const G={};S&16&&(G.$$scope={dirty:S,ctx:D}),o.$set(G);const R={};S&16&&(R.$$scope={dirty:S,ctx:D}),f.$set(R);const E={};S&16&&(E.$$scope={dirty:S,ctx:D}),d.$set(E);const H={};S&16&&(H.$$scope={dirty:S,ctx:D}),j.$set(H)},i(D){N||(m(t.$$.fragment,D),m(o.$$.fragment,D),m(f.$$.fragment,D),m(d.$$.fragment,D),m(j.$$.fragment,D),m(L.$$.fragment,D),N=!0)},o(D){_(t.$$.fragment,D),_(o.$$.fragment,D),_(f.$$.fragment,D),_(d.$$.fragment,D),_(j.$$.fragment,D),_(L.$$.fragment,D),N=!1},d(D){D&&(p(e),p(a),p(u),p(A),p(T),p(M)),w(t),w(o),w(f),w(d),w(j),w(L,D)}}}function Ka(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Ja]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Za(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function xa(r){let e,n;return e=new ue({props:{$$slots:{default:[Za,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ef(r){let e,n,t,l;const o=[z(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[xa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s});const f=[z(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ee(o,[u&0&&ie(z(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?ee(f,[u&0&&ie(z(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function tf(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Ue,$$slots:{right:[Ka],default:[Ua]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${Ue}.pmtiles`,$$slots:{default:[ef]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ue="local_planning_authorities";function nf(r,e,n){let t=le.local_planning_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class rf extends J{constructor(e){super(),K(this,e,nf,tf,Y,{})}}function lf(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function of(r){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sf(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[of]},$$scope:{ctx:r}}}),s=new Ne({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function af(r){let e,n,t;return n=new pe({props:{$$slots:{default:[sf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function ff(r){let e,n=r[3].Name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&B(t,n)},d(l){l&&p(e)}}}function uf(r){let e,n;return e=new ue({props:{$$slots:{default:[ff,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cf(r){let e,n,t,l;const o=[z(We),{sourceLayer:We},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[uf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s}),e.$on("click",pf);const f=[z(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ee(o,[u&0&&ie(z(We)),u&0&&{sourceLayer:We},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?ee(f,[u&0&&ie(z(`${We}-outline`)),u&0&&{sourceLayer:We},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function $f(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:We,$$slots:{right:[af],default:[lf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${We}.pmtiles`,$$slots:{default:[cf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let We="parliamentary_constituencies";function pf(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function mf(r,e,n){let t=le.parliamentary_constituencies,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class _f extends J{constructor(e){super(),K(this,e,mf,$f,Y,{})}}function gf(r){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function df(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hf(r){let e;return{c(){e=k(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bf(r){let e;return{c(){e=k(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vf(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y,A,T;return t=new Q({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[df]},$$scope:{ctx:r}}}),u=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[hf]},$$scope:{ctx:r}}}),g=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[bf]},$$scope:{ctx:r}}}),A=new Ne({}),{c(){e=C("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),l=k(`. The measurements are annual means, in units of
        gm
        `),o=C("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),f=O(),i=C("p"),a=k("The noise layer is from "),b(u.$$.fragment),c=k(", using 2017 data. See their "),b(g.$$.fragment),d=k("."),y=O(),b(A.$$.fragment)},m(I,j){$(I,e,j),h(e,n),v(t,e,null),h(e,l),h(e,o),h(e,s),$(I,f,j),$(I,i,j),h(i,a),v(u,i,null),h(i,c),v(g,i,null),h(i,d),$(I,y,j),v(A,I,j),T=!0},p(I,j){const P={};j&2048&&(P.$$scope={dirty:j,ctx:I}),t.$set(P);const M={};j&2048&&(M.$$scope={dirty:j,ctx:I}),u.$set(M);const L={};j&2048&&(L.$$scope={dirty:j,ctx:I}),g.$set(L)},i(I){T||(m(t.$$.fragment,I),m(u.$$.fragment,I),m(g.$$.fragment,I),m(A.$$.fragment,I),T=!0)},o(I){_(t.$$.fragment,I),_(u.$$.fragment,I),_(g.$$.fragment,I),_(A.$$.fragment,I),T=!1},d(I){I&&(p(e),p(f),p(i),p(y)),w(t),w(u),w(g),w(A,I)}}}function wf(r){let e,n,t;return n=new pe({props:{$$slots:{default:[vf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function hr(r){let e,n,t,l,o=r[3](r[0])+"",s,f,i,a,u,c,g,d,y,A,T,I,j;function P(S){r[7](S)}let M={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(M.value=r[0]),e=new Lt({props:M}),W.push(()=>V(e,"value",P));const L=[yf,kf],N=[];function D(S,F){return S[0]=="Noise"?0:1}return d=D(r),y=N[d]=L[d](r),{c(){b(e.$$.fragment),t=O(),l=C("p"),s=k(o),f=O(),i=C("div"),a=C("label"),u=k(`Opacity
      `),c=C("input"),g=O(),y.c(),A=Me(),q(c,"type","range"),q(c,"min","0"),q(c,"max","100")},m(S,F){v(e,S,F),$(S,t,F),$(S,l,F),h(l,s),$(S,f,F),$(S,i,F),h(i,a),h(a,u),h(a,c),Qe(c,r[2]),$(S,g,F),N[d].m(S,F),$(S,A,F),T=!0,I||(j=[at(c,"change",r[8]),at(c,"input",r[8])],I=!0)},p(S,F){const G={};!n&&F&1&&(n=!0,G.value=S[0],X(()=>n=!1)),e.$set(G),(!T||F&1)&&o!==(o=S[3](S[0])+"")&&B(s,o),F&4&&Qe(c,S[2]);let R=d;d=D(S),d===R?N[d].p(S,F):(ge(),_(N[R],1,1,()=>{N[R]=null}),de(),y=N[d],y?y.p(S,F):(y=N[d]=L[d](S),y.c()),m(y,1),y.m(A.parentNode,A))},i(S){T||(m(e.$$.fragment,S),m(y),T=!0)},o(S){_(e.$$.fragment,S),_(y),T=!1},d(S){S&&(p(t),p(l),p(f),p(i),p(g),p(A)),w(e,S),N[d].d(S),I=!1,fl(j)}}}function kf(r){let e,n,t;return{c(){e=C("img"),Fn(e.src,n=r[5](r[0]))||q(e,"src",n),q(e,"width",150),q(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!Fn(e.src,n=l[5](l[0]))&&q(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&q(e,"alt",t)},i:ne,o:ne,d(l){l&&p(e)}}}function yf(r){let e,n;return e=new Ge({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Sf(r){let e,n;const t=[z("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Wl({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&6?ee(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Cf(r){let e,n,t,l,o,s;function f(u){r[6](u)}let i={id:"pollution",$$slots:{right:[wf],default:[gf]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[1]&&hr(r);return o=new oo({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Sf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,g.checked=u[1],X(()=>n=!1)),e.$set(g),u[1]?a?(a.p(u,c),c&2&&m(a,1)):(a=hr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&1&&(d.tiles=[u[4](u[0])]),c&2054&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}function Tf(r,e,n){let t,l=!1,o=50,s="PM25_viridis";function f(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let A=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${f()}?bbox={bbox-epsg-3857}&${A}`}function u(y){let A=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${f()}?${A}`}function c(y){l=y,n(1,l)}function g(y){s=y,n(0,s)}function d(){o=Ht(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,l,o,i,a,u,c,g,d]}class Of extends J{constructor(e){super(),K(this,e,Tf,Cf,Y,{})}}function Af(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Lf(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function If(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Lf]},$$scope:{ctx:r}}}),s=new Ne({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Pf(r){let e,n,t;return n=new pe({props:{$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Mf(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Nf(r){let e,n;return e=new ue({props:{$$slots:{default:[Mf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ff(r){let e,n,t,l;const o=[z(Ve),{sourceLayer:Ve},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Nf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ze({props:s}),e.$on("click",Ef);const f=[z(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ee(o,[u&0&&ie(z(Ve)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?ee(f,[u&0&&ie(z(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Df(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Ve,$$slots:{right:[Pf],default:[Af]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${Ve}.pmtiles`,$$slots:{default:[Ff]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ve="wards";function Ef(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function jf(r,e,n){let t=le.wards,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Rf extends J{constructor(e){super(),K(this,e,jf,Df,Y,{})}}function Bf(r){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hf(r){let e,n,t,l;return t=new Q({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),l=!0},p(o,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:o}),t.$set(f)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&p(e),w(t)}}}class rt extends J{constructor(e){super(),K(this,e,null,Hf,Y,{})}}function zf(r){let e,n,t;return e=new Oe({props:{color:le.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Gf(r){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qf(r){let e,n,t,l,o,s,f,i,a;return o=new Q({props:{href:"https://gtfs.org",$$slots:{default:[Gf]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=C("p"),l=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),h(t,l),v(o,t,null),h(t,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:u}),o.$set(g)},i(u){a||(m(o.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(o.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(f)),w(o),w(i,u)}}}function Uf(r){let e,n,t;return n=new pe({props:{$$slots:{default:[qf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Wf(r){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vf(r){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xf(r){let e;function n(o,s){return o[2].has_bus_lane?Vf:Wf}let t=n(r),l=t(r);return{c(){l.c(),e=Me()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Yf(r){let e,n;return e=new ue({props:{$$slots:{default:[Xf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qf(r){let e,n;const t=[z(gt),{sourceLayer:gt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],le.bus_route_with_lane,le.bus_route_without_lane],"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Yf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ee(t,[s&0&&ie(z(gt)),s&0&&{sourceLayer:gt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Jf(r){let e,n,t,l,o;function s(i){r[1](i)}let f={id:gt,$$slots:{right:[Uf],default:[zf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${gt}.pmtiles`,$$slots:{default:[Qf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let gt="bus_routes";function Kf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Zf extends J{constructor(e){super(),K(this,e,Kf,Jf,Y,{})}}function br(r){const e=au(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function vr(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function xf(r){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function eu(r){let e,n,t,l,o,s,f,i;return f=new rt({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=O(),o=C("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=O(),b(f.$$.fragment)},m(a,u){$(a,e,u),$(a,n,u),$(a,t,u),$(a,l,u),$(a,o,u),$(a,s,u),v(f,a,u),i=!0},p:ne,i(a){i||(m(f.$$.fragment,a),i=!0)},o(a){_(f.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(s)),w(f,a)}}}function tu(r){let e,n,t;return n=new pe({props:{$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function wr(r){let e,n,t;return n=new nt({props:{$$slots:{default:[ru]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function nu(r){let e,n,t=r[9]+"",l,o,s;return e=new Oe({props:{color:r[10]}}),{c(){b(e.$$.fragment),n=O(),l=k(t),o=O()},m(f,i){v(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p:ne,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),w(e,f)}}}function kr(r){let e,n,t;function l(s){r[4](s,r[6])}let o={id:r[6],$$slots:{default:[nu]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new ae({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){r=s;const i={};f&8192&&(i.$$scope={dirty:f,ctx:r}),!n&&f&6&&(n=!0,i.checked=r[1][r[6]],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function ru(r){let e,n,t=Ee(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=kr(vr(r,t,s));const o=s=>_(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Me()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);$(s,e,f),n=!0},p(s,f){if(f&6){t=Ee(s[2]);let i;for(i=0;i<t.length;i+=1){const a=vr(s,t,i);l[i]?(l[i].p(a,f),m(l[i],1)):(l[i]=kr(a),l[i].c(),m(l[i],1),l[i].m(e.parentNode,e))}for(ge(),i=t.length;i<l.length;i+=1)o(i);de()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)_(l[f]);n=!1},d(s){s&&p(e),It(l,s)}}}function lu(r){br(r);let e,n=r[6]+"",t,l,o,s,f,i=r[7]+"",a,u,c,g,d=r[8]+"",y;return{c(){e=C("h2"),t=k(n),l=O(),o=C("p"),s=k("Direction: "),f=C("b"),a=O(),u=C("p"),c=k("Width: "),g=C("b"),y=k(d)},m(A,T){$(A,e,T),h(e,t),$(A,l,T),$(A,o,T),h(o,s),h(o,f),f.innerHTML=i,$(A,a,T),$(A,u,T),h(u,c),h(u,g),h(g,y)},p(A,T){br(A),T&32&&n!==(n=A[6]+"")&&B(t,n),T&32&&i!==(i=A[7]+"")&&(f.innerHTML=i),T&32&&d!==(d=A[8]+"")&&B(y,d)},d(A){A&&(p(e),p(l),p(o),p(a),p(u))}}}function ou(r){let e,n;return e=new ue({props:{$$slots:{default:[lu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function su(r){let e,n;const t=[z(dt),{sourceLayer:dt},{paint:{"line-color":rn(["get","kind"],{track:le.cycle_paths.track,lane:le.cycle_paths.lane,shared_use_segregated:le.cycle_paths.shared_use_segregated,shared_use_unsegregated:le.cycle_paths.shared_use_unsegregated},"red"),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:yr(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[ou]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),e.$on("click",fu),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ee(t,[s&0&&ie(z(dt)),s&0&&{sourceLayer:dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:yr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function iu(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:dt,$$slots:{right:[tu],default:[xf]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&wr(r);return o=new ve({props:{url:`pmtiles://${be()}/v1/${dt}.pmtiles`,$$slots:{default:[su]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=wr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&8195&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let dt="cycle_paths";function au(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function fu(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function yr(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function uu(r,e,n){let t=[["track","Separated tracks",le.cycle_paths.track],["lane","Unprotected lanes",le.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",le.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",le.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){l=i,n(0,l)}function f(i,a){r.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[l,o,t,s,f]}class cu extends J{constructor(e){super(),K(this,e,uu,iu,Y,{})}}function $u(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function pu(r){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mu(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[pu]},$$scope:{ctx:r}}}),s=new Ne({}),{c(){e=C("p"),n=k("Data from the "),b(t.$$.fragment),l=k(", as of September 2021."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function _u(r){let e,n,t;return n=new pe({props:{$$slots:{default:[mu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function gu(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&B(t,n)},d(l){l&&p(e)}}}function du(r){let e,n;return e=new ue({props:{$$slots:{default:[gu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function hu(r){let e,n;const t=[z(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[du]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ee(t,[s&0&&ie(z(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function bu(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:ht,$$slots:{right:[_u],default:[$u]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${ht}.pmtiles`,$$slots:{default:[hu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let ht="mrn";function vu(r,e,n){let t=le.mrn,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class wu extends J{constructor(e){super(),K(this,e,vu,bu,Y,{})}}function ku(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function yu(r){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Su(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[yu]},$$scope:{ctx:r}}}),s=new Ne({}),{c(){e=C("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),l=k(", downloaded on 22/01/2024."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Cu(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Su]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Sr(r){let e,n,t,l=r[3].Desc_+"",o;return{c(){e=C("li"),n=k("Description: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Desc_+"")&&B(o,l)},d(s){s&&p(e)}}}function Cr(r){let e,n,t,l=r[3].Greenway+"",o;return{c(){e=C("li"),n=k("Is greenway: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Greenway+"")&&B(o,l)},d(s){s&&p(e)}}}function Tr(r){let e,n,t,l=r[3].RouteType+"",o;return{c(){e=C("li"),n=k("Route type: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteType+"")&&B(o,l)},d(s){s&&p(e)}}}function Or(r){let e,n,t,l=r[3].RouteNo+"",o;return{c(){e=C("li"),n=k("Route number: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteNo+"")&&B(o,l)},d(s){s&&p(e)}}}function Ar(r){let e,n,t,l=r[3].RouteCat+"",o;return{c(){e=C("li"),n=k("Route Category: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteCat+"")&&B(o,l)},d(s){s&&p(e)}}}function Lr(r){let e,n,t,l=r[3].OpenStatus+"",o;return{c(){e=C("li"),n=k("Open Status: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].OpenStatus+"")&&B(o,l)},d(s){s&&p(e)}}}function Ir(r){let e,n,t,l=r[3].Surface+"",o;return{c(){e=C("li"),n=k("Surface: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Surface+"")&&B(o,l)},d(s){s&&p(e)}}}function Pr(r){let e,n,t,l=r[3].Quality+"",o;return{c(){e=C("li"),n=k("Quality: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Quality+"")&&B(o,l)},d(s){s&&p(e)}}}function Mr(r){let e,n,t,l=r[3].RoadClass+"",o;return{c(){e=C("li"),n=k("Road Class: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RoadClass+"")&&B(o,l)},d(s){s&&p(e)}}}function Tu(r){let e,n,t,l,o,s,f,i,a,u=r[3].Desc_&&Sr(r),c=r[3].Greenway&&Cr(r),g=r[3].RouteType&&Tr(r),d=r[3].RouteNo&&Or(r),y=r[3].RouteCat&&Ar(r),A=r[3].OpenStatus&&Lr(r),T=r[3].Surface&&Ir(r),I=r[3].Quality&&Pr(r),j=r[3].RoadClass&&Mr(r);return{c(){e=C("ul"),u&&u.c(),n=O(),c&&c.c(),t=O(),g&&g.c(),l=O(),d&&d.c(),o=O(),y&&y.c(),s=O(),A&&A.c(),f=O(),T&&T.c(),i=O(),I&&I.c(),a=O(),j&&j.c()},m(P,M){$(P,e,M),u&&u.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),g&&g.m(e,null),h(e,l),d&&d.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),A&&A.m(e,null),h(e,f),T&&T.m(e,null),h(e,i),I&&I.m(e,null),h(e,a),j&&j.m(e,null)},p(P,M){P[3].Desc_?u?u.p(P,M):(u=Sr(P),u.c(),u.m(e,n)):u&&(u.d(1),u=null),P[3].Greenway?c?c.p(P,M):(c=Cr(P),c.c(),c.m(e,t)):c&&(c.d(1),c=null),P[3].RouteType?g?g.p(P,M):(g=Tr(P),g.c(),g.m(e,l)):g&&(g.d(1),g=null),P[3].RouteNo?d?d.p(P,M):(d=Or(P),d.c(),d.m(e,o)):d&&(d.d(1),d=null),P[3].RouteCat?y?y.p(P,M):(y=Ar(P),y.c(),y.m(e,s)):y&&(y.d(1),y=null),P[3].OpenStatus?A?A.p(P,M):(A=Lr(P),A.c(),A.m(e,f)):A&&(A.d(1),A=null),P[3].Surface?T?T.p(P,M):(T=Ir(P),T.c(),T.m(e,i)):T&&(T.d(1),T=null),P[3].Quality?I?I.p(P,M):(I=Pr(P),I.c(),I.m(e,a)):I&&(I.d(1),I=null),P[3].RoadClass?j?j.p(P,M):(j=Mr(P),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},d(P){P&&p(e),u&&u.d(),c&&c.d(),g&&g.d(),d&&d.d(),y&&y.d(),A&&A.d(),T&&T.d(),I&&I.d(),j&&j.d()}}}function Ou(r){let e,n;return e=new ue({props:{$$slots:{default:[Tu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Au(r){let e,n;const t=[z(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Ou]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ee(t,[s&0&&ie(z(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Lu(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:bt,$$slots:{right:[Cu],default:[ku]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${bt}.pmtiles`,$$slots:{default:[Au]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let bt="national_cycle_network";function Iu(r,e,n){let t=le.national_cycle_network,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Pu extends J{constructor(e){super(),K(this,e,Iu,Lu,Y,{})}}function Mu(r){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nu(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fu(r){let e,n,t,l,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Nu]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=O(),t=C("p"),t.textContent="Data valid as of 1 January, 2024",l=O(),o=C("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),h(o,s),v(f,o,null),h(o,i),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),f.$set(g)},i(u){a||(m(f.$$.fragment,u),a=!0)},o(u){_(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),w(f)}}}function Du(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Nr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Eu(r){let e,n,t,l=r[4].side+"",o,s,f,i,a,u=r[4].average+"",c,g,d,y,A,T,I=r[4].minimum+"",j,P;return{c(){e=C("p"),n=k("Side of the road: "),t=C("b"),o=k(l),s=O(),f=C("p"),i=k("Average width: "),a=C("b"),c=k(u),g=k(`
        meters`),d=O(),y=C("p"),A=k("Minimum width: "),T=C("b"),j=k(I),P=k(`
        meters`)},m(M,L){$(M,e,L),h(e,n),h(e,t),h(t,o),$(M,s,L),$(M,f,L),h(f,i),h(f,a),h(a,c),h(f,g),$(M,d,L),$(M,y,L),h(y,A),h(y,T),h(T,j),h(y,P)},p(M,L){L&16&&l!==(l=M[4].side+"")&&B(o,l),L&16&&u!==(u=M[4].average+"")&&B(c,u),L&16&&I!==(I=M[4].minimum+"")&&B(j,I)},d(M){M&&(p(e),p(s),p(f),p(d),p(y))}}}function ju(r){let e,n;return e=new ue({props:{$$slots:{default:[Eu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ru(r){let e,n;const t=[z(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],r[2],r[1]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[ju]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ee(t,[s&0&&ie(z(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&6&&{paint:{"line-color":ke(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Bu(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:vt,$$slots:{right:[Du],default:[Mu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&Nr(r);return o=new ve({props:{url:`pmtiles://${ln()}/v1/${vt}.pmtiles`,$$slots:{default:[Ru]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=Nr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&33&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let vt="pavement_widths";function Hu(r,e,n){let t=le.sequential_low_to_high,l=[0,2,4,6,8,13],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class zu extends J{constructor(e){super(),K(this,e,Hu,Bu,Y,{})}}function Gu(r){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qu(r){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uu(r){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wu(r){let e,n,t,l,o,s,f,i,a,u,c;return f=new Q({props:{href:"https://www.pct.bike",$$slots:{default:[qu]},$$scope:{ctx:r}}}),a=new Q({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=O(),o=C("p"),s=k("See "),b(f.$$.fragment),i=k(" and "),b(a.$$.fragment),u=k(" for details on methodology and data sources.")},m(g,d){$(g,e,d),$(g,n,d),$(g,t,d),$(g,l,d),$(g,o,d),h(o,s),v(f,o,null),h(o,i),v(a,o,null),h(o,u),c=!0},p(g,d){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),f.$set(y);const A={};d&1024&&(A.$$scope={dirty:d,ctx:g}),a.$set(A)},i(g){c||(m(f.$$.fragment,g),m(a.$$.fragment,g),c=!0)},o(g){_(f.$$.fragment,g),_(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(l),p(o)),w(f),w(a)}}}function Vu(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Fr(r){let e,n,t,l,o,s,f,i;e=new Ge({props:{colorScale:r[3],limits:r[4]}});function a(d){r[7](d)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(u.value=r[0]),t=new ul({props:u}),W.push(()=>V(t,"value",a));function c(d){r[8](d)}let g={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(g.value=r[1]),s=new Lt({props:g}),W.push(()=>V(s,"value",c)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment)},m(d,y){v(e,d,y),$(d,n,y),v(t,d,y),$(d,o,y),v(s,d,y),i=!0},p(d,y){const A={};!l&&y&1&&(l=!0,A.value=d[0],X(()=>l=!1)),t.$set(A);const T={};!f&&y&2&&(f=!0,T.value=d[1],X(()=>f=!1)),s.$set(T)},i(d){i||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(s.$$.fragment,d),i=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(s.$$.fragment,d),i=!1},d(d){d&&(p(n),p(o)),w(e,d),w(t,d),w(s,d)}}}function Xu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Rt(!1),t=Me(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Yu(r){let e,n;return e=new ue({props:{$$slots:{default:[Xu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qu(r){let e,n;const t=[z(Xe),{sourceLayer:Xe},{paint:{"line-color":ke(["get",r[1]],r[4],r[3]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==Xe?"visible":"none"}}];let l={$$slots:{default:[Yu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&31?ee(t,[s&0&&ie(z(Xe)),s&0&&{sourceLayer:Xe},s&26&&{paint:{"line-color":ke(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==Xe?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Ju(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Rt(!1),t=Me(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Ku(r){let e,n;return e=new ue({props:{$$slots:{default:[Ju,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Zu(r){let e,n;const t=[z(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",r[1]],r[4],r[3]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==ft?"visible":"none"}}];let l={$$slots:{default:[Ku]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&31?ee(t,[s&0&&ie(z(ft)),s&0&&{sourceLayer:ft},t[2],t[3],s&26&&{paint:{"line-color":ke(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ft?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function xu(r){let e,n,t,l,o,s,f,i;function a(g){r[6](g)}let u={id:Xe,$$slots:{right:[Vu],default:[Gu]},$$scope:{ctx:r}};r[2]!==void 0&&(u.checked=r[2]),e=new ae({props:u}),W.push(()=>V(e,"checked",a));let c=r[2]&&Fr(r);return o=new ve({props:{url:`pmtiles://${be()}/v1/${Xe}.pmtiles`,$$slots:{default:[Qu]},$$scope:{ctx:r}}}),f=new ve({props:{url:`pmtiles://${be()}/v1/${ft}.pmtiles`,$$slots:{default:[Zu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),c&&c.c(),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment)},m(g,d){v(e,g,d),$(g,t,d),c&&c.m(g,d),$(g,l,d),v(o,g,d),$(g,s,d),v(f,g,d),i=!0},p(g,[d]){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),!n&&d&4&&(n=!0,y.checked=g[2],X(()=>n=!1)),e.$set(y),g[2]?c?(c.p(g,d),d&4&&m(c,1)):(c=Fr(g),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(ge(),_(c,1,1,()=>{c=null}),de());const A={};d&1031&&(A.$$scope={dirty:d,ctx:g}),o.$set(A);const T={};d&1031&&(T.$$scope={dirty:d,ctx:g}),f.$set(T)},i(g){i||(m(e.$$.fragment,g),m(c),m(o.$$.fragment,g),m(f.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(f.$$.fragment,g),i=!1},d(g){g&&(p(t),p(l),p(s)),w(e,g),c&&c.d(g),w(o,g),w(f,g)}}}let Xe="pct_commute",ft="pct_school";function ec(r,e,n){let t=le.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Xe,s="baseline",f=!1;function i(g){let d=g.baseline,y=g.gov_target,A=g.go_dutch,T=`<h2>Trip purpose: ${o==Xe?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)T+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${A.toLocaleString()}</b></p>`;else{let I=(y/d).toFixed(1),j=(A/d).toFixed(1);T+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${A.toLocaleString()} (<b>${j}x</b> of baseline)</p>`}return T}function a(g){f=g,n(2,f)}function u(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,f,t,l,i,a,u,c]}class tc extends J{constructor(e){super(),K(this,e,ec,xu,Y,{})}}function nc(r){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rc(r){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lc(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oc(r){let e,n,t,l,o,s,f,i,a,u,c,g;return t=new Q({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[rc]},$$scope:{ctx:r}}}),u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),l=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),s=C("p"),s.textContent="Data valid as of 1 September, 2023",f=O(),i=C("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),c=k(".")},m(d,y){$(d,e,y),h(e,n),v(t,e,null),h(e,l),$(d,o,y),$(d,s,y),$(d,f,y),$(d,i,y),h(i,a),v(u,i,null),h(i,c),g=!0},p(d,y){const A={};y&256&&(A.$$scope={dirty:y,ctx:d}),t.$set(A);const T={};y&256&&(T.$$scope={dirty:y,ctx:d}),u.$set(T)},i(d){g||(m(t.$$.fragment,d),m(u.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(u.$$.fragment,d),g=!1},d(d){d&&(p(e),p(o),p(s),p(f),p(i)),w(t),w(u)}}}function sc(r){let e,n,t;return n=new pe({props:{$$slots:{default:[oc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Dr(r){let e,n,t,l,o;e=new Ge({props:{colorScale:r[2],limits:r[3]}});function s(i){r[6](i)}let f={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(f.value=r[0]),t=new ul({props:f}),W.push(()=>V(t,"value",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const u={};!l&&a&1&&(l=!0,u.value=i[0],X(()=>l=!1)),t.$set(u)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function ic(r){let e,n,t=r[7].indicative_mph+"",l,o,s,f,i,a=r[7].highest_mph+"",u,c,g=r[4][r[7].highest_description]+"",d,y;return{c(){e=C("p"),n=k("Posted speed limit: "),l=k(t),o=k(" mph"),s=O(),f=C("p"),i=k("Highest average speed: "),u=k(a),c=k(" mph (during "),d=k(g),y=k(")")},m(A,T){$(A,e,T),h(e,n),h(e,l),h(e,o),$(A,s,T),$(A,f,T),h(f,i),h(f,u),h(f,c),h(f,d),h(f,y)},p(A,T){T&128&&t!==(t=A[7].indicative_mph+"")&&B(l,t),T&128&&a!==(a=A[7].highest_mph+"")&&B(u,a),T&128&&g!==(g=A[4][A[7].highest_description]+"")&&B(d,g)},d(A){A&&(p(e),p(s),p(f))}}}function ac(r){let e,n;return e=new ue({props:{$$slots:{default:[ic,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function fc(r){let e,n;const t=[z(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",r[0]],r[3],r[2]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[ac]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&15?ee(t,[s&0&&ie(z(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&13&&{paint:{"line-color":ke(["get",o[0]],o[3],o[2]),"line-width":ze,"line-opacity":Z(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function uc(r){let e,n,t,l,o,s;function f(u){r[5](u)}let i={id:wt,$$slots:{right:[sc],default:[nc]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[1]&&Dr(r);return o=new ve({props:{url:`pmtiles://${ln()}/v1/${wt}.pmtiles`,$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,g.checked=u[1],X(()=>n=!1)),e.$set(g),u[1]?a?(a.p(u,c),c&2&&m(a,1)):(a=Dr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&259&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let wt="road_speeds";function cc(r,e,n){let t=le.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",s=!1,f={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(u){s=u,n(1,s)}function a(u){o=u,n(0,o)}return[o,s,t,l,f,i,a]}class $c extends J{constructor(e){super(),K(this,e,cc,uc,Y,{})}}function pc(r){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mc(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _c(r){let e,n,t,l,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[mc]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",l=O(),o=C("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),h(o,s),v(f,o,null),h(o,i),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),f.$set(g)},i(u){a||(m(f.$$.fragment,u),a=!0)},o(u){_(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),w(f)}}}function gc(r){let e,n,t;return n=new pe({props:{$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Er(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function dc(r){let e,n,t,l=r[4].average+"",o,s,f,i,a,u,c=r[4].minimum+"",g,d;return{c(){e=C("p"),n=k("Average width: "),t=C("b"),o=k(l),s=k(`
        meters`),f=O(),i=C("p"),a=k("Minimum width: "),u=C("b"),g=k(c),d=k(`
        meters`)},m(y,A){$(y,e,A),h(e,n),h(e,t),h(t,o),h(e,s),$(y,f,A),$(y,i,A),h(i,a),h(i,u),h(u,g),h(i,d)},p(y,A){A&16&&l!==(l=y[4].average+"")&&B(o,l),A&16&&c!==(c=y[4].minimum+"")&&B(g,c)},d(y){y&&(p(e),p(f),p(i))}}}function hc(r){let e,n;return e=new ue({props:{$$slots:{default:[dc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function bc(r){let e,n;const t=[z(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],r[2],r[1]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[hc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ee(t,[s&0&&ie(z(kt)),s&0&&{sourceLayer:kt},t[2],t[3],s&6&&{paint:{"line-color":ke(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function vc(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:kt,$$slots:{right:[gc],default:[pc]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&Er(r);return o=new ve({props:{url:`pmtiles://${ln()}/v1/${kt}.pmtiles`,$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=Er(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&33&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let kt="road_widths";function wc(r,e,n){let t=le.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class kc extends J{constructor(e){super(),K(this,e,wc,vc,Y,{})}}function yc(r){let e,n,t;return e=new Oe({props:{color:le.trams}}),{c(){b(e.$$.fragment),n=k(`
  Trams`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Sc(r){let e,n,t,l;return t=new rt({}),{c(){e=C("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:ne,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function Cc(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Sc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Tc(r){let e,n;const t=[z(yt),{sourceLayer:yt},{paint:{"line-color":le.trams,"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ye({props:l}),e.$on("click",Ac),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ee(t,[s&0&&ie(z(yt)),s&0&&{sourceLayer:yt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Oc(r){let e,n,t,l,o;function s(i){r[1](i)}let f={id:yt,$$slots:{right:[Cc],default:[yc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${yt}.pmtiles`,$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&4&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let yt="trams";function Ac(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Lc(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Ic extends J{constructor(e){super(),K(this,e,Lc,Oc,Y,{})}}function Pc(r){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mc(r){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nc(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Mc]},$$scope:{ctx:r}}}),i=new Ne({}),{c(){e=C("p"),n=k("Data from the "),b(t.$$.fragment),l=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=O(),s=C("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),$(u,o,c),$(u,s,c),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),t.$set(g)},i(u){a||(m(t.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(t.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(o),p(s),p(f)),w(t),w(i,u)}}}function Fc(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Nc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function jr(r){let e,n,t,l;return t=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){e=C("p"),e.textContent="Peak hourly frequency:",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:ne,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function Dc(r){let e,n,t,l=r[4].stop_name+"",o,s,f,i,a,u=r[4].peak+"",c,g,d,y,A,T=r[4].peak_description+"",I,j,P,M,L,N=r[4].total+"",D,S,F=r[4].total_description+"",G,R;return{c(){e=C("p"),n=k("Stop name: "),t=C("b"),o=k(l),s=O(),f=C("p"),i=k("Peak: "),a=C("b"),c=k(u),g=k(`
        buses during the busiest hour of any day`),d=O(),y=C("p"),A=k("The peak hour is "),I=k(T),j=O(),P=C("p"),M=k("Total buses per day: "),L=C("b"),D=k(N),S=k(`
        (for `),G=k(F),R=k(", the busiest day of the week)")},m(E,H){$(E,e,H),h(e,n),h(e,t),h(t,o),$(E,s,H),$(E,f,H),h(f,i),h(f,a),h(a,c),h(f,g),$(E,d,H),$(E,y,H),h(y,A),h(y,I),$(E,j,H),$(E,P,H),h(P,M),h(P,L),h(L,D),h(P,S),h(P,G),h(P,R)},p(E,H){H&16&&l!==(l=E[4].stop_name+"")&&B(o,l),H&16&&u!==(u=E[4].peak+"")&&B(c,u),H&16&&T!==(T=E[4].peak_description+"")&&B(I,T),H&16&&N!==(N=E[4].total+"")&&B(D,N),H&16&&F!==(F=E[4].total_description+"")&&B(G,F)},d(E){E&&(p(e),p(s),p(f),p(d),p(y),p(j),p(P))}}}function Ec(r){let e,n;return e=new ue({props:{$$slots:{default:[Dc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function jc(r){let e,n;const t=[z(St),{sourceLayer:St},{paint:{"circle-color":ke(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Ec]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ee(t,[s&0&&ie(z(St)),s&0&&{sourceLayer:St},s&6&&{paint:{"circle-color":ke(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Rc(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:St,$$slots:{right:[Fc],default:[Pc]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&jr(r);return o=new ve({props:{url:`pmtiles://${be()}/v1/${St}.pmtiles`,$$slots:{default:[jc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=jr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&33&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let St="bus_stops";function Bc(r,e,n){let t=le.sequential_low_to_high,l=[0,3,10,20,30,100],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class Hc extends J{constructor(e){super(),K(this,e,Bc,Rc,Y,{})}}function zc(r){let e,n,t;return{c(){e=C("input"),q(e,"class","govuk-file-upload"),q(e,"id","load-criticals"),q(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=at(e,"change",r[5]),n=!0)},p:ne,d(l){l&&p(e),r[7](null),n=!1,t()}}}function Rr(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[qc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gc(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new Oe({props:{color:jt}}),{c(){b(e.$$.fragment),n=k(`
        Show `),l=k(t),o=k(" issues")},m(f,i){v(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p(f,i){(!s||i&4)&&t!==(t=f[2].toLocaleString()+"")&&B(l,t)},i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),w(e,f)}}}function qc(r){let e,n,t;function l(s){r[8](s)}let o={id:"show-criticals",$$slots:{default:[Gc]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ae({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&2052&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Uc(r){let e,n,t,l,o,s;e=new pn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[zc]},$$scope:{ctx:r}}}),t=new cl({props:{errorMessage:r[3]}});let f=r[2]>0&&Rr(r);return{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),f&&f.c(),o=Me()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),f&&f.m(i,a),$(i,o,a),s=!0},p(i,a){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?f?(f.p(i,a),a&4&&m(f,1)):(f=Rr(i),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(ge(),_(f,1,1,()=>{f=null}),de())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(f),s=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(f),s=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),f&&f.d(i)}}}function Wc(r){let e,n,t=r[10].critical_type+"",l,o,s,f,i,a=r[10].location_description+"",u,c,g,d,y,A=r[10].notes+"",T,I,j,P,M,L,N,D=r[10].id+"",S,F,G,R,E,H=(r[10].inspector??"???")+"",U,te,re,ce=r[10].submission_time+"",Le,Te,se,Ae,fe,$e=r[10].scheme_reference+"",me,je,Fe,Se=r[10].current_design_stage+"",xe;return{c(){e=C("div"),n=C("h2"),l=k(t),o=O(),s=C("p"),f=C("u"),f.textContent="Location",i=k(`
          : `),u=k(a),c=O(),g=C("p"),d=C("u"),d.textContent="Notes",y=k(`
          : `),T=k(A),I=O(),j=C("hr"),P=O(),M=C("p"),L=k("Critical issue ID: "),N=C("b"),S=k(D),F=O(),G=C("p"),R=k("Submitted by "),E=C("b"),U=k(H),te=k(`
          at
          `),re=C("b"),Le=k(ce),Te=O(),se=C("p"),Ae=k("For scheme "),fe=C("b"),me=k($e),je=k(`
          in stage
          `),Fe=C("b"),xe=k(Se),Ce(e,"max-width","30vw")},m(oe,he){$(oe,e,he),h(e,n),h(n,l),h(e,o),h(e,s),h(s,f),h(s,i),h(s,u),h(e,c),h(e,g),h(g,d),h(g,y),h(g,T),h(e,I),h(e,j),h(e,P),h(e,M),h(M,L),h(M,N),h(N,S),h(e,F),h(e,G),h(G,R),h(G,E),h(E,U),h(G,te),h(G,re),h(re,Le),h(e,Te),h(e,se),h(se,Ae),h(se,fe),h(fe,me),h(se,je),h(se,Fe),h(Fe,xe)},p(oe,he){he&1024&&t!==(t=oe[10].critical_type+"")&&B(l,t),he&1024&&a!==(a=oe[10].location_description+"")&&B(u,a),he&1024&&A!==(A=oe[10].notes+"")&&B(T,A),he&1024&&D!==(D=oe[10].id+"")&&B(S,D),he&1024&&H!==(H=(oe[10].inspector??"???")+"")&&B(U,H),he&1024&&ce!==(ce=oe[10].submission_time+"")&&B(Le,ce),he&1024&&$e!==($e=oe[10].scheme_reference+"")&&B(me,$e),he&1024&&Se!==(Se=oe[10].current_design_stage+"")&&B(xe,Se)},d(oe){oe&&p(e)}}}function Vc(r){let e,n;return e=new ue({props:{$$slots:{default:[Wc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Xc(r){let e,n,t,l,o,s;const f=[z(`${ot}-clusters`),{applyToClusters:!0},{paint:{"circle-color":jt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let d=0;d<f.length;d+=1)i=x(i,f[d]);e=new Je({props:i}),e.$on("click",r[6]);const a=[z(`${ot}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let u={};for(let d=0;d<a.length;d+=1)u=x(u,a[d]);t=new fo({props:u});const c=[z(`${ot}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":jt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let g={$$slots:{default:[Vc]},$$scope:{ctx:r}};for(let d=0;d<c.length;d+=1)g=x(g,c[d]);return o=new Je({props:g}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment)},m(d,y){v(e,d,y),$(d,n,y),v(t,d,y),$(d,l,y),v(o,d,y),s=!0},p(d,y){const A=y&2?ee(f,[y&0&&ie(z(`${ot}-clusters`)),f[1],y&0&&{paint:{"circle-color":jt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:d[1]?"visible":"none"}},f[4]]):{};e.$set(A);const T=y&2?ee(a,[y&0&&ie(z(`${ot}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(T);const I=y&2?ee(c,[y&0&&ie(z(`${ot}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":jt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};y&2048&&(I.$$scope={dirty:y,ctx:d}),o.$set(I)},i(d){s||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(o.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),s=!1},d(d){d&&(p(n),p(l)),w(e,d),w(t,d),w(o,d)}}}function Yc(r){let e,n,t,l;return e=new De({props:{label:"Critical Issues",$$slots:{default:[Uc]},$$scope:{ctx:r}}}),t=new Nt({props:{id:ot,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Xc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&2063&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let ot="criticals",jt="red";function Qc(r,e,n){let t;we(r,Sn,d=>n(9,t=d));let l,o=!0,s=0,f="",i=Fl();async function a(d){try{n(4,i=await _i(l.files[0])),n(2,s=i.features.length),n(3,f="")}catch(y){n(3,f=`The file you loaded is broken: ${y}`)}}function u(d){t.getSource(ot).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id,(y,A)=>{y||t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:A})})}function c(d){W[d?"unshift":"push"](()=>{l=d,n(0,l)})}function g(d){o=d,n(1,o)}return[l,o,s,f,i,a,u,c,g]}class Jc extends J{constructor(e){super(),K(this,e,Qc,Yc,Y,{})}}function Kc(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Crossings`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Zc(r){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xc(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Zc]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function e$(r){let e,n,t;return n=new pe({props:{$$slots:{default:[xc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function t$(r){let e,n=Br(r[3])+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=Br(l[3])+"")&&B(t,n)},d(l){l&&p(e)}}}function n$(r){let e,n;return e=new ue({props:{$$slots:{default:[t$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function r$(r){let e,n;const t=[z(Ct),{sourceLayer:Ct},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[n$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),e.$on("click",o$),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ee(t,[s&0&&ie(z(Ct)),s&0&&{sourceLayer:Ct},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function l$(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Ct,$$slots:{right:[e$],default:[Kc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${Ct}.pmtiles`,$$slots:{default:[r$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ct="crossings";function Br(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function o$(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function s$(r,e,n){let t=le.crossings,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class i$ extends J{constructor(e){super(),K(this,e,s$,l$,Y,{})}}function a$(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Cycle parking`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function f$(r){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function u$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[f$]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),l=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function c$(r){let e,n,t;return n=new pe({props:{$$slots:{default:[u$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function $$(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=C("p"),n=k("Capacity: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=(s[3].capacity??"unknown")+"")&&B(o,l)},d(s){s&&p(e)}}}function p$(r){let e,n;return e=new ue({props:{$$slots:{default:[$$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function m$(r){let e,n;const t=[z(Tt),{sourceLayer:Tt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[p$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ee(t,[s&0&&ie(z(Tt)),s&0&&{sourceLayer:Tt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function _$(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Tt,$$slots:{right:[c$],default:[a$]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${Tt}.pmtiles`,$$slots:{default:[m$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Tt="cycle_parking";function g$(r,e,n){let t=le.cycle_parking,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class d$ extends J{constructor(e){super(),K(this,e,g$,_$,Y,{})}}function h$(r){let e,n,t,l;return e=new Oe({props:{color:r[4]}}),{c(){b(e.$$.fragment),n=O(),t=k(r[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),l=!0},p(o,s){(!l||s&4)&&B(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function b$(r){let e;const n=r[5].default,t=qt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Ut(t,n,l,l[7],e?Vt(n,l[7],o,null):Wt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function v$(r){let e,n,t;return n=new pe({props:{$$slots:{default:[b$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function w$(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&B(t,n)},d(l){l&&p(e)}}}function k$(r){let e,n;return e=new ue({props:{$$slots:{default:[w$,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function y$(r){let e,n;const t=[z(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Z(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[k$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ze({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&25?ee(t,[s&1&&ie(z(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Z(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function S$(r){let e,n,t,l,o;function s(i){r[6](i)}let f={id:r[0],$$slots:{right:[v$],default:[h$]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.checked=r[3]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new ve({props:{url:`pmtiles://${be()}/v1/${r[0]}.pmtiles`,$$slots:{default:[y$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&1&&(u.id=i[0]),a&132&&(u.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,u.checked=i[3],X(()=>n=!1)),e.$set(u);const c={};a&1&&(c.url=`pmtiles://${be()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function C$(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:f}=e,i=le[o],a=!1;function u(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,f=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,s,f,a,i,t,u,l]}class On extends J{constructor(e){super(),K(this,e,C$,S$,Y,{name:0,singularNoun:1,pluralNoun:2})}}function T$(r){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function O$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[T$]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function A$(r){let e,n;return e=new On({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[O$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class L$ extends J{constructor(e){super(),K(this,e,null,A$,Y,{})}}function I$(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Railway Stations`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function P$(r){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function M$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[P$]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function N$(r){let e,n,t;return n=new pe({props:{$$slots:{default:[M$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function F$(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&B(t,n)},d(l){l&&p(e)}}}function D$(r){let e,n;return e=new ue({props:{$$slots:{default:[F$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function E$(r){let e,n;const t=[z(nn),{paint:{"circle-color":r[1],"circle-radius":xt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[D$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ee(t,[s&0&&ie(z(nn)),s&2&&{paint:{"circle-color":o[1],"circle-radius":xt/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function j$(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:nn,$$slots:{right:[N$],default:[I$]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new Nt({props:{data:`${be()}/v1/${nn}.geojson`,$$slots:{default:[E$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let nn="railway_stations";function R$(r,e,n){let t=le.railway_stations,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class B$ extends J{constructor(e){super(),K(this,e,R$,j$,Y,{})}}function H$(r){let e;return{c(){e=k("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function z$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[H$]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function G$(r){let e,n;return e=new On({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[z$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class q$ extends J{constructor(e){super(),K(this,e,null,G$,Y,{})}}function U$(r){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function W$(r){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function V$(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[U$]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[W$]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const d={};c&1&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){a||(m(t.$$.fragment,u),m(o.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function X$(r){let e,n;return e=new On({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[V$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Y$ extends J{constructor(e){super(),K(this,e,null,X$,Y,{})}}function Q$(r){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function J$(r){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function K$(r){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Z$(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y,A,T,I,j,P,M,L,N,D;return t=new Q({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[J$]},$$scope:{ctx:r}}}),I=new Q({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[K$]},$$scope:{ctx:r}}}),N=new Ne({}),{c(){e=C("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),l=k(" dataset. Please note these limitations:"),o=O(),s=C("ul"),f=C("li"),f.textContent="Only collisions between 2017 and 2022 are included",i=O(),a=C("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,u=O(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=O(),d=C("li"),d.textContent='The "pedestrians" category also include mobility scooters',y=O(),A=C("li"),T=k("All limitations "),b(I.$$.fragment),j=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),P=O(),M=C("p"),M.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=O(),b(N.$$.fragment)},m(S,F){$(S,e,F),h(e,n),v(t,e,null),h(e,l),$(S,o,F),$(S,s,F),h(s,f),h(s,i),h(s,a),h(s,u),h(s,c),h(s,g),h(s,d),h(s,y),h(s,A),h(A,T),v(I,A,null),h(A,j),$(S,P,F),$(S,M,F),$(S,L,F),v(N,S,F),D=!0},p(S,F){const G={};F&16777216&&(G.$$scope={dirty:F,ctx:S}),t.$set(G);const R={};F&16777216&&(R.$$scope={dirty:F,ctx:S}),I.$set(R)},i(S){D||(m(t.$$.fragment,S),m(I.$$.fragment,S),m(N.$$.fragment,S),D=!0)},o(S){_(t.$$.fragment,S),_(I.$$.fragment,S),_(N.$$.fragment,S),D=!1},d(S){S&&(p(e),p(o),p(s),p(P),p(M),p(L)),w(t),w(I),w(N,S)}}}function x$(r){let e,n,t;return n=new pe({props:{$$slots:{default:[Z$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Hr(r){let e,n,t,l,o,s,f,i,a,u,c,g,d;return n=new nt({props:{small:!0,$$slots:{default:[lp]},$$scope:{ctx:r}}}),u=new $l({props:{rows:r[14]}}),{c(){e=C("div"),b(n.$$.fragment),t=O(),l=C("div"),o=k(`Filter years:
      `),s=C("input"),f=k(`
      -
      `),i=C("input"),a=O(),b(u.$$.fragment),q(s,"type","number"),q(s,"min",2017),q(s,"max",2022),q(s,"class","svelte-1ft65rw"),q(i,"type","number"),q(i,"min",2017),q(i,"max",2022),q(i,"class","svelte-1ft65rw"),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(y,A){$(y,e,A),v(n,e,null),h(e,t),h(e,l),h(l,o),h(l,s),Qe(s,r[4]),h(l,f),h(l,i),Qe(i,r[5]),h(e,a),v(u,e,null),c=!0,g||(d=[at(s,"input",r[20]),at(i,"input",r[21])],g=!0)},p(y,A){const T={};A&16777231&&(T.$$scope={dirty:A,ctx:y}),n.$set(T),A&16&&Ht(s.value)!==y[4]&&Qe(s,y[4]),A&32&&Ht(i.value)!==y[5]&&Qe(i,y[5])},i(y){c||(m(n.$$.fragment,y),m(u.$$.fragment,y),c=!0)},o(y){_(n.$$.fragment,y),_(u.$$.fragment,y),c=!1},d(y){y&&p(e),w(n),w(u),g=!1,fl(d)}}}function ep(r){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tp(r){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function np(r){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rp(r){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lp(r){let e,n,t,l,o,s,f,i,a,u,c,g;function d(L){r[16](L)}let y={id:"stats19-pedestrians",$$slots:{default:[ep]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new ae({props:y}),W.push(()=>V(e,"checked",d));function A(L){r[17](L)}let T={id:"stats19-cyclists",$$slots:{default:[tp]},$$scope:{ctx:r}};r[1]!==void 0&&(T.checked=r[1]),l=new ae({props:T}),W.push(()=>V(l,"checked",A));function I(L){r[18](L)}let j={id:"stats19-horse-riders",$$slots:{default:[np]},$$scope:{ctx:r}};r[2]!==void 0&&(j.checked=r[2]),f=new ae({props:j}),W.push(()=>V(f,"checked",I));function P(L){r[19](L)}let M={id:"stats19-other",$$slots:{default:[rp]},$$scope:{ctx:r}};return r[3]!==void 0&&(M.checked=r[3]),u=new ae({props:M}),W.push(()=>V(u,"checked",P)),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment),s=O(),b(f.$$.fragment),a=O(),b(u.$$.fragment)},m(L,N){v(e,L,N),$(L,t,N),v(l,L,N),$(L,s,N),v(f,L,N),$(L,a,N),v(u,L,N),g=!0},p(L,N){const D={};N&16777216&&(D.$$scope={dirty:N,ctx:L}),!n&&N&1&&(n=!0,D.checked=L[0],X(()=>n=!1)),e.$set(D);const S={};N&16777216&&(S.$$scope={dirty:N,ctx:L}),!o&&N&2&&(o=!0,S.checked=L[1],X(()=>o=!1)),l.$set(S);const F={};N&16777216&&(F.$$scope={dirty:N,ctx:L}),!i&&N&4&&(i=!0,F.checked=L[2],X(()=>i=!1)),f.$set(F);const G={};N&16777216&&(G.$$scope={dirty:N,ctx:L}),!c&&N&8&&(c=!0,G.checked=L[3],X(()=>c=!1)),u.$set(G)},i(L){g||(m(e.$$.fragment,L),m(l.$$.fragment,L),m(f.$$.fragment,L),m(u.$$.fragment,L),g=!0)},o(L){_(e.$$.fragment,L),_(l.$$.fragment,L),_(f.$$.fragment,L),_(u.$$.fragment,L),g=!1},d(L){L&&(p(t),p(s),p(a)),w(e,L),w(l,L),w(f,L),w(u,L)}}}function zr(r){let e,n,t,l=r[8][r[23].pedestrian_location]+"",o;return{c(){e=C("p"),n=k("Pedestrian location: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8388608&&l!==(l=s[8][s[23].pedestrian_location]+"")&&B(o,l)},d(s){s&&p(e)}}}function Gr(r){let e,n,t,l=r[9][r[23].pedestrian_movement]+"",o;return{c(){e=C("p"),n=k("Pedestrian movement: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8388608&&l!==(l=s[9][s[23].pedestrian_movement]+"")&&B(o,l)},d(s){s&&p(e)}}}function op(r){let e,n,t,l=r[23].year+"",o,s,f,i,a,u=r[10][r[23].severity]+"",c,g,d,y,A,T=qr(r[23])+"",I,j,P,M,L,N=r[23].pedestrian_location&&zr(r),D=r[23].pedestrian_movement&&Gr(r);return{c(){e=C("p"),n=k("Year: "),t=C("b"),o=k(l),s=O(),f=C("p"),i=k("Severity: "),a=C("b"),c=k(u),g=O(),d=C("p"),y=k("Casualties: "),A=C("b"),I=k(T),j=O(),N&&N.c(),P=O(),D&&D.c(),M=O(),L=C("p"),L.textContent="Click to open full report in CycleStreets"},m(S,F){$(S,e,F),h(e,n),h(e,t),h(t,o),$(S,s,F),$(S,f,F),h(f,i),h(f,a),h(a,c),$(S,g,F),$(S,d,F),h(d,y),h(d,A),h(A,I),$(S,j,F),N&&N.m(S,F),$(S,P,F),D&&D.m(S,F),$(S,M,F),$(S,L,F)},p(S,F){F&8388608&&l!==(l=S[23].year+"")&&B(o,l),F&8388608&&u!==(u=S[10][S[23].severity]+"")&&B(c,u),F&8388608&&T!==(T=qr(S[23])+"")&&B(I,T),S[23].pedestrian_location?N?N.p(S,F):(N=zr(S),N.c(),N.m(P.parentNode,P)):N&&(N.d(1),N=null),S[23].pedestrian_movement?D?D.p(S,F):(D=Gr(S),D.c(),D.m(M.parentNode,M)):D&&(D.d(1),D=null)},d(S){S&&(p(e),p(s),p(f),p(g),p(d),p(j),p(P),p(M),p(L)),N&&N.d(S),D&&D.d(S)}}}function sp(r){let e,n;return e=new ue({props:{$$slots:{default:[op,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&25165824&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ip(r){let e,n;const t=[z(Ot),{sourceLayer:Ot},{paint:{"circle-color":ke(["get","severity"],[1,2,3],[r[11],r[12],r[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[7]},{layout:{visibility:r[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[sp]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),e.$on("click",fp),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&14528?ee(t,[s&0&&ie(z(Ot)),s&0&&{sourceLayer:Ot},s&14336&&{paint:{"circle-color":ke(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ap(r){let e,n,t,l,o,s;function f(u){r[15](u)}let i={id:Ot,$$slots:{right:[x$],default:[Q$]},$$scope:{ctx:r}};r[6]!==void 0&&(i.checked=r[6]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[6]&&Hr(r);return o=new ve({props:{url:`pmtiles://${be()}/v1/${Ot}.pmtiles`,$$slots:{default:[ip]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:u}),!n&&c&64&&(n=!0,g.checked=u[6],X(()=>n=!1)),e.$set(g),u[6]?a?(a.p(u,c),c&64&&m(a,1)):(a=Hr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&16777408&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Ot="stats19";function qr(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function fp(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function up(r,e,n){let t,l=!1,o=!0,s=!0,f=!0,i=!1,a=2017,u=2022;function c(G,R,E,H,U,te){let re=["any"];return o&&re.push(["get","pedestrian"]),s&&re.push(["get","cyclist"]),f&&re.push(["get","horse_rider"]),i&&re.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],u],re]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},d={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},A=le.sequential_low_to_high[4],T=le.sequential_low_to_high[2],I=le.sequential_low_to_high[0],j=[["Fatal",A],["Serious",T],["Slight",I]];function P(G){l=G,n(6,l)}function M(G){o=G,n(0,o)}function L(G){s=G,n(1,s)}function N(G){f=G,n(2,f)}function D(G){i=G,n(3,i)}function S(){a=Ht(this.value),n(4,a)}function F(){u=Ht(this.value),n(5,u)}return r.$$.update=()=>{r.$$.dirty&63&&n(7,t=c())},[o,s,f,i,a,u,l,t,g,d,y,A,T,I,j,P,M,L,N,D,S,F]}class cp extends J{constructor(e){super(),K(this,e,up,ap,Y,{})}}function $p(r){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pp(r){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mp(r){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _p(r){let e,n,t,l,o,s,f,i,a,u,c;return t=new Q({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[pp]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[mp]},$$scope:{ctx:r}}}),u=new Ne({}),{c(){e=C("p"),n=k("2022 AADF (annual average daily flow) data from "),b(t.$$.fragment),l=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),f=O(),i=C("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=O(),b(u.$$.fragment)},m(g,d){$(g,e,d),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(g,f,d),$(g,i,d),$(g,a,d),v(u,g,d),c=!0},p(g,d){const y={};d&64&&(y.$$scope={dirty:d,ctx:g}),t.$set(y);const A={};d&64&&(A.$$scope={dirty:d,ctx:g}),o.$set(A)},i(g){c||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(u.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(u.$$.fragment,g),c=!1},d(g){g&&(p(e),p(f),p(i),p(a)),w(t),w(o),w(u,g)}}}function gp(r){let e,n,t;return n=new pe({props:{$$slots:{default:[_p]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Ur(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[3]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function dp(r){let e,n=r[5].location+"",t,l,o,s,f,i=r[5].motor_vehicles_2022.toLocaleString()+"",a,u,c,g,d,y=r[5].pedal_cycles_2022.toLocaleString()+"",A,T,I,j,P,M=r[5].method+"",L;return{c(){e=C("h2"),t=k(n),l=O(),o=C("p"),s=k("Total motor vehicles (2022 AADF): "),f=C("b"),a=k(i),u=O(),c=C("p"),g=k("Total pedal cycles (2022 AADF): "),d=C("b"),A=k(y),T=O(),I=C("p"),j=k("Count method: "),P=C("b"),L=k(M)},m(N,D){$(N,e,D),h(e,t),$(N,l,D),$(N,o,D),h(o,s),h(o,f),h(f,a),$(N,u,D),$(N,c,D),h(c,g),h(c,d),h(d,A),$(N,T,D),$(N,I,D),h(I,j),h(I,P),h(P,L)},p(N,D){D&32&&n!==(n=N[5].location+"")&&B(t,n),D&32&&i!==(i=N[5].motor_vehicles_2022.toLocaleString()+"")&&B(a,i),D&32&&y!==(y=N[5].pedal_cycles_2022.toLocaleString()+"")&&B(A,y),D&32&&M!==(M=N[5].method+"")&&B(L,M)},d(N){N&&(p(e),p(l),p(o),p(u),p(c),p(T),p(I))}}}function hp(r){let e,n;return e=new ue({props:{$$slots:{default:[dp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function bp(r){let e,n;const t=[z(At),{sourceLayer:At},{paint:{"circle-color":ke(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[hp]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),e.$on("click",wp),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ee(t,[s&0&&ie(z(At)),s&0&&{sourceLayer:At},s&6&&{paint:{"circle-color":ke(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function vp(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={id:At,$$slots:{right:[gp],default:[$p]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&Ur(r);return o=new ve({props:{url:`pmtiles://${be()}/v1/${At}.pmtiles`,$$slots:{default:[bp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=Ur(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&65&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let At="vehicle_counts";function wp(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function kp(r,e,n){let t=le.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function f(i){s=i,n(0,s)}return[s,t,l,o,f]}class yp extends J{constructor(e){super(),K(this,e,kp,vp,Y,{})}}function Sp(r){let e,n,t,l,o,s,f,i;return e=new q$({}),t=new L$({}),o=new Y$({}),f=new B$({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),$(a,l,u),v(o,a,u),$(a,s,u),v(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(p(n),p(l),p(s)),w(e,a),w(t,a),w(o,a),w(f,a)}}}function Cp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[Sp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Tp(r){let e,n,t,l,o,s,f,i,a,u;return e=new cu({}),t=new Pu({}),o=new wu({}),f=new d$({}),a=new i$({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment)},m(c,g){v(e,c,g),$(c,n,g),v(t,c,g),$(c,l,g),v(o,c,g),$(c,s,g),v(f,c,g),$(c,i,g),v(a,c,g),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(p(n),p(l),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(f,c),w(a,c)}}}function Op(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[Tp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ap(r){let e,n,t,l,o,s;return e=new Zf({}),t=new Ic({}),o=new Hc({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment)},m(f,i){v(e,f,i),$(f,n,i),v(t,f,i),$(f,l,i),v(o,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l)),w(e,f),w(t,f),w(o,f)}}}function Lp(r){let e,n,t,l,o,s,f,i,a,u;return e=new _f({}),t=new Rf({}),o=new wa({}),f=new qa({}),a=new rf({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment)},m(c,g){v(e,c,g),$(c,n,g),v(t,c,g),$(c,l,g),v(o,c,g),$(c,s,g),v(f,c,g),$(c,i,g),v(a,c,g),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(p(n),p(l),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(f,c),w(a,c)}}}function Ip(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[Lp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Pp(r){let e,n,t,l;return e=new ua({}),t=new Ma({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Mp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[Pp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Np(r){let e,n,t,l,o,s;return e=new kc({}),t=new zu({}),o=new $c({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment)},m(f,i){v(e,f,i),$(f,n,i),v(t,f,i),$(f,l,i),v(o,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l)),w(e,f),w(t,f),w(o,f)}}}function Fp(r){let e,n,t,l,o,s,f=mn()=="Private (development)",i,a,u;e=new yp({}),t=new cp({}),o=new tc({});let c=f&&Np();return a=new Of({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),c&&c.c(),i=O(),b(a.$$.fragment)},m(g,d){v(e,g,d),$(g,n,d),v(t,g,d),$(g,l,d),v(o,g,d),$(g,s,d),c&&c.m(g,d),$(g,i,d),v(a,g,d),u=!0},p:ne,i(g){u||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(o.$$.fragment,g),m(c),m(a.$$.fragment,g),u=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),_(c),_(a.$$.fragment,g),u=!1},d(g){g&&(p(n),p(l),p(s),p(i)),w(e,g),w(t,g),w(o,g),c&&c.d(g),w(a,g)}}}function Dp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[Fp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ep(r){let e,n,t,l,o;function s(i){r[3](i)}let f={};return r[0]!==void 0&&(f.enabled=r[0]),e=new zl({props:f}),W.push(()=>V(e,"enabled",s)),l=new Xl({}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,a){const u={};!n&&a&1&&(n=!0,u.enabled=i[0],X(()=>n=!1)),e.$set(u)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function jp(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y,A,T,I,j;return e=new Jc({}),t=new De({props:{label:"Trip generators",$$slots:{default:[Cp]},$$scope:{ctx:r}}}),o=new De({props:{label:"Existing infrastructure",$$slots:{default:[Op]},$$scope:{ctx:r}}}),f=new De({props:{label:"Public transit",$$slots:{default:[Ap]},$$scope:{ctx:r}}}),a=new De({props:{label:"Boundaries",$$slots:{default:[Ip]},$$scope:{ctx:r}}}),c=new De({props:{label:"Census",$$slots:{default:[Mp]},$$scope:{ctx:r}}}),d=new De({props:{label:"Other",$$slots:{default:[Dp]},$$scope:{ctx:r}}}),A=new De({props:{label:"Tools",$$slots:{default:[Ep]},$$scope:{ctx:r}}}),I=new Hl({props:{disabled:!r[1]}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment),u=O(),b(c.$$.fragment),g=O(),b(d.$$.fragment),y=O(),b(A.$$.fragment),T=O(),b(I.$$.fragment)},m(P,M){v(e,P,M),$(P,n,M),v(t,P,M),$(P,l,M),v(o,P,M),$(P,s,M),v(f,P,M),$(P,i,M),v(a,P,M),$(P,u,M),v(c,P,M),$(P,g,M),v(d,P,M),$(P,y,M),v(A,P,M),$(P,T,M),v(I,P,M),j=!0},p(P,M){const L={};M&16&&(L.$$scope={dirty:M,ctx:P}),t.$set(L);const N={};M&16&&(N.$$scope={dirty:M,ctx:P}),o.$set(N);const D={};M&16&&(D.$$scope={dirty:M,ctx:P}),f.$set(D);const S={};M&16&&(S.$$scope={dirty:M,ctx:P}),a.$set(S);const F={};M&16&&(F.$$scope={dirty:M,ctx:P}),c.$set(F);const G={};M&16&&(G.$$scope={dirty:M,ctx:P}),d.$set(G);const R={};M&17&&(R.$$scope={dirty:M,ctx:P}),A.$set(R);const E={};M&2&&(E.disabled=!P[1]),I.$set(E)},i(P){j||(m(e.$$.fragment,P),m(t.$$.fragment,P),m(o.$$.fragment,P),m(f.$$.fragment,P),m(a.$$.fragment,P),m(c.$$.fragment,P),m(d.$$.fragment,P),m(A.$$.fragment,P),m(I.$$.fragment,P),j=!0)},o(P){_(e.$$.fragment,P),_(t.$$.fragment,P),_(o.$$.fragment,P),_(f.$$.fragment,P),_(a.$$.fragment,P),_(c.$$.fragment,P),_(d.$$.fragment,P),_(A.$$.fragment,P),_(I.$$.fragment,P),j=!1},d(P){P&&(p(n),p(l),p(s),p(i),p(u),p(g),p(y),p(T)),w(e,P),w(t,P),w(o,P),w(f,P),w(a,P),w(c,P),w(d,P),w(A,P),w(I,P)}}}function Rp(r){let e,n;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ze({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&2?ee(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Bp(r){let e,n,t,l;return e=new De({props:{label:"Layers",open:!0,$$slots:{default:[jp]},$$scope:{ctx:r}}}),t=new Nt({props:{data:r[2],$$slots:{default:[Rp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&19&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Hp(r,e,n){let t,l;we(r,ir,f=>n(1,l=f));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(f){t=f,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&ir.set(!t)},[t,l,o,s]}class zp extends J{constructor(e){super(),K(this,e,Hp,Bp,Y,{})}}function Wr(r){let e;return{c(){e=C("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gp(r){let e,n=r[0]&&Wr();return{c(){n&&n.c(),e=Me()},m(t,l){n&&n.m(t,l),$(t,e,l)},p(t,[l]){t[0]?n||(n=Wr(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(t){t&&p(e),n&&n.d(t)}}}function qp(r,e,n){let{loadFile:t}=e,l=!0;return Cn(async()=>{let s=await(await fetch(`${ln()}/v1/random_schemes.geojson`)).text();t(s),n(0,l=!1)}),r.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[l,t]}class Up extends J{constructor(e){super(),K(this,e,qp,Gp,Y,{loadFile:1})}}function Vr(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=C("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),h(e,n),h(e,l)},p(s,f){var i;f&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&B(l,t)},d(s){s&&p(e)}}}function Wp(r){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vp(r){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xp(r){let e,n,t,l;return e=new Pt({props:{$$slots:{default:[Wp]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Pt({props:{$$slots:{default:[Vp]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Yp(r){var F,G,R,E;let e,n,t=r[0].scheme_reference+"",l,o,s,f,i=((F=r[0].browse)==null?void 0:F.authority_or_region)+"",a,u,c,g,d=((G=r[0].browse)==null?void 0:G.capital_scheme_id)+"",y,A,T,I,j=((R=r[0].browse)==null?void 0:R.funding_programme)+"",P,M,L,N,D,S=((E=r[0].browse)==null?void 0:E.current_milestone)&&Vr(r);return N=new Gl({props:{$$slots:{default:[Xp]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("Scheme reference: "),l=k(t),o=O(),s=C("p"),f=k("Authority or region: "),a=k(i),u=O(),c=C("p"),g=k("Capital scheme ID: "),y=k(d),A=O(),T=C("p"),I=k("Funding programme: "),P=k(j),M=O(),S&&S.c(),L=O(),b(N.$$.fragment)},m(H,U){$(H,e,U),h(e,n),h(e,l),$(H,o,U),$(H,s,U),h(s,f),h(s,a),$(H,u,U),$(H,c,U),h(c,g),h(c,y),$(H,A,U),$(H,T,U),h(T,I),h(T,P),$(H,M,U),S&&S.m(H,U),$(H,L,U),v(N,H,U),D=!0},p(H,U){var re,ce,Le,Te;(!D||U&1)&&t!==(t=H[0].scheme_reference+"")&&B(l,t),(!D||U&1)&&i!==(i=((re=H[0].browse)==null?void 0:re.authority_or_region)+"")&&B(a,i),(!D||U&1)&&d!==(d=((ce=H[0].browse)==null?void 0:ce.capital_scheme_id)+"")&&B(y,d),(!D||U&1)&&j!==(j=((Le=H[0].browse)==null?void 0:Le.funding_programme)+"")&&B(P,j),(Te=H[0].browse)!=null&&Te.current_milestone?S?S.p(H,U):(S=Vr(H),S.c(),S.m(L.parentNode,L)):S&&(S.d(1),S=null);const te={};U&32&&(te.$$scope={dirty:U,ctx:H}),N.$set(te)},i(H){D||(m(N.$$.fragment,H),D=!0)},o(H){_(N.$$.fragment,H),D=!1},d(H){H&&(p(e),p(o),p(s),p(u),p(c),p(A),p(T),p(M),p(L)),S&&S.d(H),w(N,H)}}}function Qp(r){let e,n;return e=new De({props:{label:`${r[0].scheme_name}`,$$slots:{default:[Yp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_name}`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jp(r,e,n){let t,l;we(r,Mt,i=>n(3,t=i)),we(r,Sn,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(Dl(i),{padding:20,animate:!1})}function f(){var u,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((u=o.browse)==null?void 0:u.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,f]}class Kp extends J{constructor(e){super(),K(this,e,Jp,Qp,Y,{scheme:0})}}function Xr(r){let e,n,t=Dn(r[0].length_meters)+"",l;return{c(){e=C("p"),n=k("Length: "),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,l)},p(o,s){s&1&&t!==(t=Dn(o[0].length_meters)+"")&&B(l,t)},d(o){o&&p(e)}}}function Yr(r){let e,n=st(r[0].description,r[2])+"";return{c(){e=C("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&5&&n!==(n=st(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Qr(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=C("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),h(e,n),h(e,l)},p(s,f){var i;f&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&B(l,t)},d(s){s&&p(e)}}}function Zp(r){var je,Fe,Se,xe;let e,n,t,l=st(r[0].name,r[2])+"",o,s=r[0].intervention_type+"",f,i,a,u,c,g,d,y,A,T,I=st(r[1].scheme_name??"",r[3])+"",j,P,M=st(r[0].scheme_reference,r[3])+"",L,N,D,S,F=((je=r[1].browse)==null?void 0:je.authority_or_region)+"",G,R,E,H,U=((Fe=r[1].browse)==null?void 0:Fe.capital_scheme_id)+"",te,re,ce,Le,Te=((Se=r[1].browse)==null?void 0:Se.funding_programme)+"",se,Ae,fe=r[0].length_meters&&Xr(r),$e=r[0].description&&Yr(r),me=((xe=r[1].browse)==null?void 0:xe.current_milestone)&&Qr(r);return{c(){e=C("div"),n=C("h2"),t=new Rt(!1),o=k(" ("),f=k(s),i=k(")"),a=O(),fe&&fe.c(),u=O(),$e&&$e.c(),c=O(),g=C("hr"),d=O(),y=C("p"),A=k("Part of scheme: "),T=new Rt(!1),j=k(" ("),P=new Rt(!1),L=k(")"),N=O(),D=C("p"),S=k("Authority or region: "),G=k(F),R=O(),E=C("p"),H=k("Capital scheme ID: "),te=k(U),re=O(),ce=C("p"),Le=k("Funding programme: "),se=k(Te),Ae=O(),me&&me.c(),t.a=o,T.a=j,P.a=L,Ce(e,"max-width","30vw")},m(oe,he){$(oe,e,he),h(e,n),t.m(l,n),h(n,o),h(n,f),h(n,i),h(e,a),fe&&fe.m(e,null),h(e,u),$e&&$e.m(e,null),h(e,c),h(e,g),h(e,d),h(e,y),h(y,A),T.m(I,y),h(y,j),P.m(M,y),h(y,L),h(e,N),h(e,D),h(D,S),h(D,G),h(e,R),h(e,E),h(E,H),h(E,te),h(e,re),h(e,ce),h(ce,Le),h(ce,se),h(e,Ae),me&&me.m(e,null)},p(oe,[he]){var Ln,In,Pn,Mn;he&5&&l!==(l=st(oe[0].name,oe[2])+"")&&t.p(l),he&1&&s!==(s=oe[0].intervention_type+"")&&B(f,s),oe[0].length_meters?fe?fe.p(oe,he):(fe=Xr(oe),fe.c(),fe.m(e,u)):fe&&(fe.d(1),fe=null),oe[0].description?$e?$e.p(oe,he):($e=Yr(oe),$e.c(),$e.m(e,c)):$e&&($e.d(1),$e=null),he&10&&I!==(I=st(oe[1].scheme_name??"",oe[3])+"")&&T.p(I),he&9&&M!==(M=st(oe[0].scheme_reference,oe[3])+"")&&P.p(M),he&2&&F!==(F=((Ln=oe[1].browse)==null?void 0:Ln.authority_or_region)+"")&&B(G,F),he&2&&U!==(U=((In=oe[1].browse)==null?void 0:In.capital_scheme_id)+"")&&B(te,U),he&2&&Te!==(Te=((Pn=oe[1].browse)==null?void 0:Pn.funding_programme)+"")&&B(se,Te),(Mn=oe[1].browse)!=null&&Mn.current_milestone?me?me.p(oe,he):(me=Qr(oe),me.c(),me.m(e,null)):me&&(me.d(1),me=null)},i:ne,o:ne,d(oe){oe&&p(e),fe&&fe.d(),$e&&$e.d(),me&&me.d()}}}function st(r,e){return e?r.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):r}function xp(r,e,n){let t,l,o,s;we(r,tn,i=>n(4,l=i)),we(r,Dt,i=>n(2,o=i)),we(r,Et,i=>n(3,s=i));let{props:f}=e;return r.$$set=i=>{"props"in i&&n(0,f=i.props)},r.$$.update=()=>{r.$$.dirty&17&&n(1,t=l.get(f.scheme_reference))},[f,t,o,s,l]}class An extends J{constructor(e){super(),K(this,e,xp,Zp,Y,{props:0})}}function em(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function tm(r){let e,n;return e=new An({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function nm(r){let e,n,t,l;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[em,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[tm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function rm(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function lm(r){let e,n;return e=new An({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function om(r){let e,n,t,l;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[rm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[lm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function sm(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function im(r){let e,n;return e=new An({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function am(r){let e,n,t,l;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[sm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[im,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function fm(r){let e,n,t,l,o,s,f,i,a,u;const c=[z("interventions-points"),{filter:["all",En,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":xt,"circle-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[nm]},$$scope:{ctx:r}};for(let L=0;L<c.length;L+=1)g=x(g,c[L]);e=new Je({props:g});const d=[z("interventions-lines"),{filter:["all",jn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Ft,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[om]},$$scope:{ctx:r}};for(let L=0;L<d.length;L+=1)y=x(y,d[L]);t=new ye({props:y});const A=[z("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Ft,"circle-opacity":0,"circle-stroke-color":tt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let L=0;L<A.length;L+=1)T=x(T,A[L]);o=new Je({props:T});const I=[z("interventions-polygons"),{filter:["all",Jt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":Z(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let j={$$slots:{default:[am]},$$scope:{ctx:r}};for(let L=0;L<I.length;L+=1)j=x(j,I[L]);f=new Ze({props:j});const P=[z("interventions-polygons-outlines"),{filter:["all",Jt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Ft}},{layout:{visibility:r[0]?"visible":"none"}}];let M={};for(let L=0;L<P.length;L+=1)M=x(M,P[L]);return a=new ye({props:M}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment)},m(L,N){v(e,L,N),$(L,n,N),v(t,L,N),$(L,l,N),v(o,L,N),$(L,s,N),v(f,L,N),$(L,i,N),v(a,L,N),u=!0},p(L,N){const D=N&29?ee(c,[c[0],N&24&&{filter:["all",En,L[3],L[4]]},c[2],c[3],N&4&&{paint:{"circle-color":L[2],"circle-radius":xt,"circle-opacity":Z(1,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};N&128&&(D.$$scope={dirty:N,ctx:L}),e.$set(D);const S=N&13?ee(d,[d[0],N&8&&{filter:["all",jn,L[3]]},d[2],d[3],N&4&&{paint:{"line-color":L[2],"line-width":Ft,"line-opacity":Z(1,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},d[6]]):{};N&128&&(S.$$scope={dirty:N,ctx:L}),t.$set(S);const F=N&1?ee(A,[A[0],A[1],A[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(F);const G=N&13?ee(I,[I[0],N&8&&{filter:["all",Jt,L[3]]},I[2],I[3],N&4&&{paint:{"fill-color":L[2],"fill-opacity":Z(.2,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},I[6]]):{};N&128&&(G.$$scope={dirty:N,ctx:L}),f.$set(G);const R=N&13?ee(P,[P[0],N&8&&{filter:["all",Jt,L[3]]},N&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*Ft}},N&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(R)},i(L){u||(m(e.$$.fragment,L),m(t.$$.fragment,L),m(o.$$.fragment,L),m(f.$$.fragment,L),m(a.$$.fragment,L),u=!0)},o(L){_(e.$$.fragment,L),_(t.$$.fragment,L),_(o.$$.fragment,L),_(f.$$.fragment,L),_(a.$$.fragment,L),u=!1},d(L){L&&(p(n),p(l),p(s),p(i)),w(e,L),w(t,L),w(o,L),w(f,L),w(a,L)}}}function um(r){let e,n;return e=new Nt({props:{data:r[1],$$slots:{default:[fm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cm(r,e,n){let t,l;we(r,Mt,a=>n(5,l=a));let{showSchemes:o}=e,[s]=kn();const f=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=El(l))},[o,t,s,f,i,l]}class $m extends J{constructor(e){super(),K(this,e,cm,um,Y,{showSchemes:0})}}function Jr(r,e,n){const t=r.slice();return t[13]=e[n],t}function Kr(r,e,n){const t=r.slice();return t[16]=e[n],t}function pm(r){let e,n;return e=new Up({props:{loadFile:r[7]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Zr(r){let e,n,t,l,o;e=new Pt({props:{$$slots:{default:[mm]},$$scope:{ctx:r}}}),e.$on("click",r[8]);function s(i){r[9](i)}let f={title:"About this scheme data",$$slots:{default:[_m]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.open=r[3]),t=new rl({props:f}),W.push(()=>V(t,"open",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const u={};a&524288&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!l&&a&8&&(l=!0,c.open=i[3],X(()=>l=!1)),t.$set(c)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function mm(r){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xr(r){let e,n,t=r[16]+"",l;return{c(){e=C("li"),n=C("p"),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,l)},p(o,s){s&16&&t!==(t=o[16]+"")&&B(l,t)},d(o){o&&p(e)}}}function _m(r){let e,n,t,l,o=Ee(r[4].notes),s=[];for(let f=0;f<o.length;f+=1)s[f]=xr(Kr(r,o,f));return{c(){e=C("div"),n=C("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=O(),l=C("ul");for(let f=0;f<s.length;f+=1)s[f].c();q(e,"class","govuk-prose")},m(f,i){$(f,e,i),h(e,n),h(e,t),h(e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,null)},p(f,i){if(i&16){o=Ee(f[4].notes);let a;for(a=0;a<o.length;a+=1){const u=Kr(f,o,a);s[a]?s[a].p(u,i):(s[a]=xr(u),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(f){f&&p(e),It(s,f)}}}function el(r){let e,n,t,l;function o(i){r[10](i)}function s(i){r[11](i)}let f={};return r[1]!==void 0&&(f.schemesToBeShown=r[1]),r[2]!==void 0&&(f.show=r[2]),e=new Ni({props:f}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),l=!0},p(i,a){const u={};!n&&a&2&&(n=!0,u.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,u.show=i[2],X(()=>t=!1)),e.$set(u)},i(i){l||(m(e.$$.fragment,i),l=!0)},o(i){_(e.$$.fragment,i),l=!1},d(i){w(e,i)}}}function tl(r){let e,n;return e=new Kp({props:{scheme:r[13]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function nl(r){let e=r[1].has(r[13].scheme_reference),n,t,l=e&&tl(r);return{c(){l&&l.c(),n=Me()},m(o,s){l&&l.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?l?(l.p(o,s),s&66&&m(l,1)):(l=tl(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(ge(),_(l,1,1,()=>{l=null}),de())},i(o){t||(m(l),t=!0)},o(o){_(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function gm(r){let e,n,t,l,o,s,f,i,a,u,c=mn()=="Private (development)",g,d,y,A,T,I,j,P,M;o=new Vl({props:{boundaryGeojson:r[4]}}),a=new jl({});let L=c&&pm(r),N=r[4].notes&&Zr(r);y=new Ul({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),T=new cl({props:{errorMessage:r[0]}});let D=r[6].size>0&&el(r),S=Ee(r[6].values()),F=[];for(let R=0;R<S.length;R+=1)F[R]=nl(Jr(r,S,R));const G=R=>_(F[R],1,1,()=>{F[R]=null});return{c(){e=C("div"),n=C("div"),t=C("h1"),t.textContent="Browse schemes",l=O(),b(o.$$.fragment),s=O(),f=C("p"),f.textContent=`App version: ${mn()}`,i=O(),b(a.$$.fragment),u=O(),L&&L.c(),g=O(),N&&N.c(),d=O(),b(y.$$.fragment),A=O(),b(T.$$.fragment),I=O(),D&&D.c(),j=O(),P=C("ul");for(let R=0;R<F.length;R+=1)F[R].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),q(e,"slot","sidebar"),q(e,"class","govuk-prose")},m(R,E){$(R,e,E),h(e,n),h(n,t),h(n,l),v(o,n,null),h(e,s),h(e,f),h(e,i),v(a,e,null),h(e,u),L&&L.m(e,null),h(e,g),N&&N.m(e,null),h(e,d),v(y,e,null),h(e,A),v(T,e,null),h(e,I),D&&D.m(e,null),h(e,j),h(e,P);for(let H=0;H<F.length;H+=1)F[H]&&F[H].m(P,null);M=!0},p(R,E){const H={};E&16&&(H.boundaryGeojson=R[4]),o.$set(H),c&&L.p(R,E),R[4].notes?N?(N.p(R,E),E&16&&m(N,1)):(N=Zr(R),N.c(),m(N,1),N.m(e,d)):N&&(ge(),_(N,1,1,()=>{N=null}),de());const U={};if(E&1&&(U.errorMessage=R[0]),T.$set(U),R[6].size>0?D?(D.p(R,E),E&64&&m(D,1)):(D=el(R),D.c(),m(D,1),D.m(e,j)):D&&(ge(),_(D,1,1,()=>{D=null}),de()),E&66){S=Ee(R[6].values());let te;for(te=0;te<S.length;te+=1){const re=Jr(R,S,te);F[te]?(F[te].p(re,E),m(F[te],1)):(F[te]=nl(re),F[te].c(),m(F[te],1),F[te].m(P,null))}for(ge(),te=S.length;te<F.length;te+=1)G(te);de()}},i(R){if(!M){m(o.$$.fragment,R),m(a.$$.fragment,R),m(L),m(N),m(y.$$.fragment,R),m(T.$$.fragment,R),m(D);for(let E=0;E<S.length;E+=1)m(F[E]);M=!0}},o(R){_(o.$$.fragment,R),_(a.$$.fragment,R),_(L),_(N),_(y.$$.fragment,R),_(T.$$.fragment,R),_(D),F=F.filter(Boolean);for(let E=0;E<F.length;E+=1)_(F[E]);M=!1},d(R){R&&p(e),w(o),w(a),L&&L.d(),N&&N.d(),w(y),w(T),D&&D.d(),It(F,R)}}}function dm(r){let e,n,t,l,o,s,f;return e=new ql({}),t=new $m({props:{showSchemes:r[2]}}),s=new zp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),o=C("div"),b(s.$$.fragment),q(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),$(i,o,a),v(s,o,null),f=!0},p(i,a){const u={};a&4&&(u.showSchemes=i[2]),t.$set(u)},i(i){f||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),w(s)}}}function hm(r){let e,n,t;return n=new Rl({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[dm]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(n.$$.fragment),q(e,"slot","main")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.style=l[5]),o&524292&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function bm(r){let e,n;return e=new Yl({props:{$$slots:{main:[hm],sidebar:[gm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&524415&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vm(r,e,n){let t,l,o;we(r,Mt,T=>n(4,t=T)),we(r,Rn,T=>n(5,l=T)),we(r,tn,T=>n(6,o=T)),Cn(()=>{Bl()});const s=new URLSearchParams(window.location.search);Rn.set(s.get("style")||"dataviz");let f="",i=new Set,a=!0,u=!1;function c(T){try{Mt.set(JSON.parse(T)),tn.set(pi(t)),n(0,f="")}catch(I){n(0,f=`The file you loaded is broken: ${I}`)}}const g=()=>n(3,u=!0);function d(T){u=T,n(3,u)}function y(T){i=T,n(1,i)}function A(T){a=T,n(2,a)}return[f,i,a,u,t,l,o,c,g,d,y,A]}class wm extends J{constructor(e){super(),K(this,e,vm,bm,Y,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new wm({target:document.getElementById("app")});
