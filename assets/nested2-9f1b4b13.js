import{an as Mn,S as V,i as K,s as q,b as H,c as z,f as _,d as T,m as w,h as m,k as G,t as g,l as d,o as h,p as v,N as X,A as te,ao as Yr,T as ft,q as er,F as Jr,a as Wt,e as P,g as W,u as fr,v as tr,r as y,G as Se,aP as pe,Y as Ce,C as _e,w as ee,aO as B,j as D,H as We,J as Fe,I as Dt,x as ge,n as de,Q as ze,aQ as wt,P as rr,aR as Fn,_ as Qr,Z as ct,E as en,a2 as nr,aH as Bn,aI as jn,aJ as Un,aK as Rn,R as Hn,aS as cr,B as Wn,aT as pr,a5 as tn,y as zn,aE as Gn}from"./MapLibreMap.svelte_svelte_type_style_lang-bee90e80.js";import{e as Et,C as Me,b as yt,d as Q,a as Vn,S as Kn,L as qn,M as Zn}from"./StreetViewController-fd79d6d2.js";import{L as Xn,d as $r,c as rn,C as $e,H as re,B as Yn,Z as Jn,I as Qn}from"./schemas-e0be0bc5.js";import{I as Y,F as eo}from"./InteractiveLayer-286d7910.js";const to={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var ue=Uint8Array,Je=Uint16Array,nn=Uint32Array,on=new ue([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),sn=new ue([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ro=new ue([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ln=function(t,e){for(var r=new Je(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var o=new nn(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)o[s]=s-r[n]<<5|n;return[r,o]},an=ln(on,2),un=an[0],no=an[1];un[28]=258,no[258]=28;var oo=ln(sn,0),so=oo[0],zt=new Je(32768);for(var Z=0;Z<32768;++Z){var je=(Z&43690)>>>1|(Z&21845)<<1;je=(je&52428)>>>2|(je&13107)<<2,je=(je&61680)>>>4|(je&3855)<<4,zt[Z]=((je&65280)>>>8|(je&255)<<8)>>>1}var dt=function(t,e,r){for(var n=t.length,o=0,s=new Je(e);o<n;++o)t[o]&&++s[t[o]-1];var l=new Je(e);for(o=0;o<e;++o)l[o]=l[o-1]+s[o-1]<<1;var u;if(r){u=new Je(1<<e);var i=15-e;for(o=0;o<n;++o)if(t[o])for(var f=o<<4|t[o],a=e-t[o],c=l[t[o]-1]++<<a,p=c|(1<<a)-1;c<=p;++c)u[zt[c]>>>i]=f}else for(u=new Je(n),o=0;o<n;++o)t[o]&&(u[o]=zt[l[t[o]-1]++]>>>15-t[o]);return u},kt=new ue(288);for(var Z=0;Z<144;++Z)kt[Z]=8;for(var Z=144;Z<256;++Z)kt[Z]=9;for(var Z=256;Z<280;++Z)kt[Z]=7;for(var Z=280;Z<288;++Z)kt[Z]=8;var fn=new ue(32);for(var Z=0;Z<32;++Z)fn[Z]=5;var io=dt(kt,9,1),lo=dt(fn,5,1),xt=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},we=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},Nt=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},ao=function(t){return(t+7)/8|0},or=function(t,e,r){(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length);var n=new(t.BYTES_PER_ELEMENT==2?Je:t.BYTES_PER_ELEMENT==4?nn:ue)(r-e);return n.set(t.subarray(e,r)),n},uo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ye=function(t,e,r){var n=new Error(e||uo[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,ye),!r)throw n;return n},fo=function(t,e,r){var n=t.length;if(!n||r&&r.f&&!r.l)return e||new ue(0);var o=!e||r,s=!r||r.i;r||(r={}),e||(e=new ue(n*3));var l=function(ot){var st=e.length;if(ot>st){var mt=new ue(Math.max(st*2,ot));mt.set(e),e=mt}},u=r.f||0,i=r.p||0,f=r.b||0,a=r.l,c=r.d,p=r.m,$=r.n,b=n*8;do{if(!a){u=we(t,i,1);var C=we(t,i+1,3);if(i+=3,C)if(C==1)a=io,c=lo,p=9,$=5;else if(C==2){var N=we(t,i,31)+257,k=we(t,i+10,15)+4,E=N+we(t,i+5,31)+1;i+=14;for(var M=new ue(E),x=new ue(19),A=0;A<k;++A)x[ro[A]]=we(t,i+A*3,7);i+=k*3;for(var F=xt(x),I=(1<<F)-1,j=dt(x,F,1),A=0;A<E;){var J=j[we(t,i,I)];i+=J&15;var S=J>>>4;if(S<16)M[A++]=S;else{var ne=0,Le=0;for(S==16?(Le=3+we(t,i,3),i+=2,ne=M[A-1]):S==17?(Le=3+we(t,i,7),i+=3):S==18&&(Le=11+we(t,i,127),i+=7);Le--;)M[A++]=ne}}var me=M.subarray(0,N),oe=M.subarray(N);p=xt(me),$=xt(oe),a=dt(me,p,1),c=dt(oe,$,1)}else ye(1);else{var S=ao(i)+4,L=t[S-4]|t[S-3]<<8,O=S+L;if(O>n){s&&ye(0);break}o&&l(f+L),e.set(t.subarray(S,O),f),r.b=f+=L,r.p=i=O*8,r.f=u;continue}if(i>b){s&&ye(0);break}}o&&l(f+131072);for(var Ge=(1<<p)-1,le=(1<<$)-1,$t=i;;$t=i){var ne=a[Nt(t,i)&Ge],Be=ne>>>4;if(i+=ne&15,i>b){s&&ye(0);break}if(ne||ye(2),Be<256)e[f++]=Be;else if(Be==256){$t=i,a=null;break}else{var tt=Be-254;if(Be>264){var A=Be-257,he=on[A];tt=we(t,i,(1<<he)-1)+un[A],i+=he}var rt=c[Nt(t,i)&le],xe=rt>>>4;rt||ye(3),i+=rt&15;var oe=so[xe];if(xe>3){var he=sn[xe];oe+=Nt(t,i)&(1<<he)-1,i+=he}if(i>b){s&&ye(0);break}o&&l(f+131072);for(var nt=f+tt;f<nt;f+=4)e[f]=e[f-oe],e[f+1]=e[f+1-oe],e[f+2]=e[f+2-oe],e[f+3]=e[f+3-oe];f=nt}}r.l=a,r.p=$t,r.b=f,r.f=u,a&&(u=1,r.m=p,r.d=c,r.n=$)}while(!u);return f==e.length?e:or(e,0,f)},co=new ue(0),Pe=function(t,e){return t[e]|t[e+1]<<8},ke=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},Mt=function(t,e){return ke(t,e)+ke(t,e+4)*4294967296};function po(t,e){return fo(t,e)}var Gt=typeof TextDecoder<"u"&&new TextDecoder,$o=0;try{Gt.decode(co,{stream:!0}),$o=1}catch{}var mo=function(t){for(var e="",r=0;;){var n=t[r++],o=(n>127)+(n>223)+(n>239);if(r+o>t.length)return[e,or(t,r-1)];o?o==3?(n=((n&15)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536,e+=String.fromCharCode(55296|n>>10,56320|n&1023)):o&1?e+=String.fromCharCode((n&31)<<6|t[r++]&63):e+=String.fromCharCode((n&15)<<12|(t[r++]&63)<<6|t[r++]&63):e+=String.fromCharCode(n)}};function cn(t,e){if(e){for(var r="",n=0;n<t.length;n+=16384)r+=String.fromCharCode.apply(null,t.subarray(n,n+16384));return r}else{if(Gt)return Gt.decode(t);var o=mo(t),s=o[0],l=o[1];return l.length&&ye(8),s}}var ho=function(t,e){return e+30+Pe(t,e+26)+Pe(t,e+28)},go=function(t,e,r){var n=Pe(t,e+28),o=cn(t.subarray(e+46,e+46+n),!(Pe(t,e+8)&2048)),s=e+46+n,l=ke(t,e+20),u=r&&l==4294967295?_o(t,s):[l,ke(t,e+24),ke(t,e+42)],i=u[0],f=u[1],a=u[2];return[Pe(t,e+10),i,f,o,s+Pe(t,e+30)+Pe(t,e+32),a]},_o=function(t,e){for(;Pe(t,e)!=1;e+=4+Pe(t,e+2));return[Mt(t,e+12),Mt(t,e+4),Mt(t,e+20)]};function wo(t,e){for(var r={},n=t.length-22;ke(t,n)!=101010256;--n)(!n||t.length-n>65558)&&ye(13);var o=Pe(t,n+8);if(!o)return{};var s=ke(t,n+16),l=s==4294967295||o==65535;if(l){var u=ke(t,n-12);l=ke(t,u)==101075792,l&&(o=ke(t,u+32),s=ke(t,u+48))}for(var i=e&&e.filter,f=0;f<o;++f){var a=go(t,s,l),c=a[0],p=a[1],$=a[2],b=a[3],C=a[4],S=a[5],L=ho(t,S);s=C,(!i||i({name:b,size:p,originalSize:$,compression:c}))&&(c?c==8?r[b]=po(t.subarray(L,L+p),new ue($)):ye(14,"unknown compression type "+c):r[b]=or(t,L,L+p))}return r}function vo(t){return t instanceof File||t instanceof Blob?t.arrayBuffer().then(Ft):Ft(t)}function Ft(t){var e=new Uint8Array(t),r=wo(e);return Promise.resolve(bo(r))}function bo(t){for(var e=[],r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];e[o]=cn(t[o])}return e}function Ie(t,e){for(var r=0;r<t.childNodes.length;){var n=t.childNodes[r];if(n.nodeType===1&&et(n)===e)return n;r++}}function St(t,e){for(var r=[],n=0;n<t.childNodes.length;){var o=t.childNodes[n];o.nodeType===1&&et(o)===e&&r.push(o),n++}return r}function Pt(t,e,r){for(var n=0;n<t.childNodes.length;){var o=t.childNodes[n];e?o.nodeType===1&&et(o)===e&&r(o,n):r(o,n),n++}}function yo(t,e,r){var n=[];return Pt(t,e,function(o,s){n.push(r(o,s))}),n}var ko=/.+\:/;function et(t){return t.tagName.replace(ko,"")}function pn(t){if(t.nodeType!==1)return t.textContent;for(var e="<"+et(t),r=0;r<t.attributes.length;)e+=" "+t.attributes[r].name+'="'+t.attributes[r].value+'"',r++;e+=">";for(var n=0;n<t.childNodes.length;)e+=pn(t.childNodes[n]),n++;return e+="</"+et(t)+">",e}function So(t){var e=t.documentElement,r=Ie(e,"sheetData"),n=[];return Pt(r,"row",function(o){Pt(o,"c",function(s){n.push(s)})}),n}function Co(t,e){return Ie(e,"v")}function Lo(t,e){if(e.firstChild&&et(e.firstChild)==="is"&&e.firstChild.firstChild&&et(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Oo(t){var e=t.documentElement,r=Ie(e,"dimension");if(r)return r.getAttribute("ref")}function To(t){var e=t.documentElement,r=Ie(e,"cellStyleXfs");return r?St(r,"xf"):[]}function Ao(t){var e=t.documentElement,r=Ie(e,"cellXfs");return r?St(r,"xf"):[]}function Do(t){var e=t.documentElement,r=Ie(e,"numFmts");return r?St(r,"numFmt"):[]}function Eo(t){var e=t.documentElement;return yo(e,"si",function(r){var n=Ie(r,"t");if(n)return n.textContent;var o="";return Pt(r,"r",function(s){o+=Ie(s,"t").textContent}),o})}function Po(t){var e=t.documentElement;return Ie(e,"workbookPr")}function Io(t){var e=t.documentElement;return St(e,"Relationship")}function xo(t){var e=t.documentElement,r=Ie(e,"sheets");return St(r,"sheet")}function No(t,e){var r=e.createDocument(t),n={},o=Po(r);o&&o.getAttribute("date1904")==="1"&&(n.epoch1904=!0),n.sheets=[];var s=function(u){u.getAttribute("name")&&n.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return xo(r).forEach(s),n}function Mo(t,e){var r=e.createDocument(t),n={sheets:{},sharedStrings:void 0,styles:void 0},o=function(l){var u=l.getAttribute("Target"),i=l.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":n.styles=Bt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":n.sharedStrings=Bt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":n.sheets[l.getAttribute("Id")]=Bt(u);break}};return Io(r).forEach(o),n}function Bt(t){return t[0]==="/"?t.slice(1):"xl/"+t}function mr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function hr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mr(Object(r),!0).forEach(function(n){Fo(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bo(t,e){if(!t)return{};var r=e.createDocument(t),n=To(r).map(jt),o=Do(r).map(jo).reduce(function(l,u){return l[u.id]=u,l},[]),s=function(u){return u.hasAttribute("xfId")?hr(hr({},n[u.xfId]),jt(u,o)):jt(u,o)};return Ao(r).map(s)}function jo(t){return{id:t.getAttribute("numFmtId"),template:t.getAttribute("formatCode")}}function jt(t,e){var r={};if(t.hasAttribute("numFmtId")){var n=t.getAttribute("numFmtId");e[n]?r.numberFormat=e[n]:r.numberFormat={id:n}}return r}function Uo(t,e){return t?Eo(e.createDocument(t)):[]}function $n(t,e){e&&e.epoch1904&&(t+=1462);var r=70*365+19,n=60*60*1e3;return new Date(Math.round((t-r)*24*n))}function Ro(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=Ho(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ho(t,e){if(t){if(typeof t=="string")return gr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gr(t,e)}}function gr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Wo(t,e,r,n){if(e){var o=r[e];if(!o)throw new Error("Cell style not found: ".concat(e));if(!o.numberFormat)return!1;if(zo.indexOf(Number(o.numberFormat.id))>=0||n.dateFormat&&o.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&o.numberFormat.template&&Ko(o.numberFormat.template))return!0}}var zo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Go=/^\[\$-414\]/,Vo=/;@$/;function Ko(t){t=t.toLowerCase(),t=t.replace(Go,""),t=t.replace(Vo,"");for(var e=t.split(/\W+/),r=Ro(e),n;!(n=r()).done;){var o=n.value;if(qo.indexOf(o)<0)return!1}return!0}var qo=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Zo(t,e,r){var n=r.getInlineStringValue,o=r.getInlineStringXml,s=r.getStyleId,l=r.styles,u=r.values,i=r.properties,f=r.options;switch(e||(e="n"),e){case"str":t=Ut(t,f);break;case"inlineStr":if(t=n(),t===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(o()));t=Ut(t,f);break;case"s":var a=Number(t);if(isNaN(a))throw new Error('Invalid "shared" string index: '.concat(t));if(a>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(t));t=u[a],t=Ut(t,f);break;case"b":if(t==="1")t=!0;else if(t==="0")t=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(t));break;case"z":t=void 0;break;case"e":t=Xo(t);break;case"d":if(t===void 0)break;var c=new Date(t);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(t));t=c;break;case"n":if(t===void 0)break;var p=Number(t);if(isNaN(p))throw new Error('Invalid "numeric" cell value: '.concat(t));t=p,Wo(t,s(),l,f)&&(t=$n(t,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return t===void 0&&(t=null),t}function Xo(t){switch(t){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(t)}}function Ut(t,e){return e.trim!==!1&&(t=t.trim()),t===""&&(t=void 0),t}var Yo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Jo(t){var e=function(f,a){return f-a},r=t.map(function(i){return i.row}).sort(e),n=t.map(function(i){return i.column}).sort(e),o=r[0],s=r[r.length-1],l=n[0],u=n[n.length-1];return[{row:o,column:l},{row:s,column:u}]}function Qo(t){for(var e=0,r=0;r<t.length;)e*=26,e+=Yo.indexOf(t[r]),r++;return e}function mn(t){return t=t.split(/(\d+)/),[parseInt(t[1]),Qo(t[0].trim())]}function es(t,e,r,n,o,s,l){var u=mn(t.getAttribute("r")),i=Co(e,t),f=i&&i.textContent,a;return t.hasAttribute("t")&&(a=t.getAttribute("t")),{row:u[0],column:u[1],value:Zo(f,a,{getInlineStringValue:function(){return Lo(e,t)},getInlineStringXml:function(){return pn(t)},getStyleId:function(){return t.getAttribute("s")},styles:o,values:n,properties:s,options:l})}}function ts(t,e,r,n,o,s){var l=So(t);return l.length===0?[]:l.map(function(u){return es(u,t,e,r,n,o,s)})}function rs(t,e){return is(t)||ss(t,e)||os(t,e)||ns()}function ns(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function os(t,e){if(t){if(typeof t=="string")return dr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dr(t,e)}}function dr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ss(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],o=!0,s=!1,l,u;try{for(r=r.call(t);!(o=(l=r.next()).done)&&(n.push(l.value),!(e&&n.length===e));o=!0);}catch(i){s=!0,u=i}finally{try{!o&&r.return!=null&&r.return()}finally{if(s)throw u}}return n}}function is(t){if(Array.isArray(t))return t}function ls(t){var e=Oo(t);if(e)return e=e.split(":").map(mn).map(function(r){var n=rs(r,2),o=n[0],s=n[1];return{row:o,column:s}}),e.length===1&&(e=[e[0],e[0]]),e}function as(t,e,r,n,o,s){var l=e.createDocument(t),u=ts(l,e,r,n,o,s),i=ls(l)||Jo(u);return{cells:u,dimensions:i}}function us(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=fs(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fs(t,e){if(t){if(typeof t=="string")return _r(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _r(t,e)}}function _r(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cs(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.rowMap,n=e.accessor,o=n===void 0?function(c){return c}:n,s=e.onlyTrimAtTheEnd,l=t.length-1;l>=0;){for(var u=!0,i=us(t[l]),f;!(f=i()).done;){var a=f.value;if(o(a)!==null){u=!1;break}}if(u)t.splice(l,1),r&&r.splice(l,1);else if(s)break;l--}return t}function ps(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=$s(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $s(t,e){if(t){if(typeof t=="string")return wr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wr(t,e)}}function wr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ms(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.accessor,n=r===void 0?function(c){return c}:r,o=e.onlyTrimAtTheEnd,s=t[0].length-1;s>=0;){for(var l=!0,u=ps(t),i;!(i=u()).done;){var f=i.value;if(n(f[s])!==null){l=!1;break}}if(l)for(var a=0;a<t.length;)t[a].splice(s,1),a++;else if(o)break;s--}return t}function hs(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=hn(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gs(t,e){return ws(t)||_s(t,e)||hn(t,e)||ds()}function ds(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hn(t,e){if(t){if(typeof t=="string")return vr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vr(t,e)}}function vr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _s(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],o=!0,s=!1,l,u;try{for(r=r.call(t);!(o=(l=r.next()).done)&&(n.push(l.value),!(e&&n.length===e));o=!0);}catch(i){s=!0,u=i}finally{try{!o&&r.return!=null&&r.return()}finally{if(s)throw u}}return n}}function ws(t){if(Array.isArray(t))return t}function vs(t,e){var r=t.dimensions,n=t.cells;if(n.length===0)return[];var o=gs(r,2);o[0];for(var s=o[1],l=s.column,u=s.row,i=new Array(u),f=0;f<u;){i[f]=new Array(l);for(var a=0;a<l;)i[f][a]=null,a++;f++}for(var c=hs(n),p;!(p=c()).done;){var $=p.value,b=$.row-1,C=$.column-1;C<l&&b<u&&(i[b][C]=$.value)}var S=e.rowMap;if(S)for(var L=0;L<i.length;)S[L]=L,L++;return i=cs(ms(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(i=e.transformData(i)),i}function bs(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=ys(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ys(t,e){if(t){if(typeof t=="string")return br(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return br(t,e)}}function br(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function yr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ks(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yr(Object(r),!0).forEach(function(n){Ss(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ss(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cs(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r.sheet||(r=ks({sheet:1},r));var n=function(p){if(!t[p])throw new Error('"'.concat(p,'" file not found inside the *.xlsx file zip archive'));return t[p]},o=Mo(n("xl/_rels/workbook.xml.rels"),e),s=o.sharedStrings?Uo(n(o.sharedStrings),e):[],l=o.styles?Bo(n(o.styles),e):{},u=No(n("xl/workbook.xml"),e);if(r.getSheets)return u.sheets.map(function(c){var p=c.name;return{name:p}});var i=Ls(r.sheet,u.sheets);if(!i||!o.sheets[i])throw Os(r.sheet,u.sheets);var f=as(n(o.sheets[i]),e,s,l,u,r),a=vs(f,r);return r.properties?{data:a,properties:u}:a}function Ls(t,e){if(typeof t=="number"){var r=e[t-1];return r&&r.relationId}for(var n=bs(e),o;!(o=n()).done;){var s=o.value;if(s.name===t)return s.relationId}}function Os(t,e){var r=e&&e.map(function(n,o){return'"'.concat(n.name,'" (#').concat(o+1,")")}).join(", ");return new Error("Sheet ".concat(typeof t=="number"?"#"+t:'"'+t+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+r+".":""))}function Vt(t){"@babel/helpers - typeof";return Vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(t)}function kr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ts(t,e,r){return e&&kr(t.prototype,e),r&&kr(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function As(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ds(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vt(t,e)}function Es(t){var e=gn();return function(){var n=bt(t),o;if(e){var s=bt(this).constructor;o=Reflect.construct(n,arguments,s)}else o=n.apply(this,arguments);return Ps(this,o)}}function Ps(t,e){if(e&&(Vt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Is(t)}function Is(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Kt(t){var e=typeof Map=="function"?new Map:void 0;return Kt=function(n){if(n===null||!xs(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,o)}function o(){return Tt(n,arguments,bt(this).constructor)}return o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),vt(o,n)},Kt(t)}function Tt(t,e,r){return gn()?Tt=Reflect.construct:Tt=function(o,s,l){var u=[null];u.push.apply(u,s);var i=Function.bind.apply(o,u),f=new i;return l&&vt(f,l.prototype),f},Tt.apply(null,arguments)}function gn(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xs(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function vt(t,e){return vt=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},vt(t,e)}function bt(t){return bt=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},bt(t)}var fe=function(t){Ds(r,t);var e=Es(r);function r(n){var o;return As(this,r),o=e.call(this,"invalid"),o.reason=n,o}return Ts(r)}(Kt(Error));function Ns(t){if(typeof t=="string"){var e=t;if(t=Number(t),String(t)!==e)throw new fe("not_a_number")}if(typeof t!="number")throw new fe("not_a_number");if(isNaN(t))throw new fe("invalid_number");if(!isFinite(t))throw new fe("out_of_bounds");return t}function Ms(t){if(typeof t=="string")return t;if(typeof t=="number"){if(isNaN(t))throw new fe("invalid_number");if(!isFinite(t))throw new fe("out_of_bounds");return String(t)}throw new fe("not_a_string")}function Fs(t){if(typeof t=="boolean")return t;throw new fe("not_a_boolean")}function Bs(t,e){var r=e.properties;if(t instanceof Date){if(isNaN(t.valueOf()))throw new fe("out_of_bounds");return t}if(typeof t=="number"){if(isNaN(t))throw new fe("invalid_number");if(!isFinite(t))throw new fe("out_of_bounds");var n=$n(t,r);if(isNaN(n.valueOf()))throw new fe("out_of_bounds");return n}throw new fe("not_a_date")}function js(t,e){return Hs(t)||Rs(t,e)||dn(t,e)||Us()}function Us(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rs(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n=[],o=!0,s=!1,l,u;try{for(r=r.call(t);!(o=(l=r.next()).done)&&(n.push(l.value),!(e&&n.length===e));o=!0);}catch(i){s=!0,u=i}finally{try{!o&&r.return!=null&&r.return()}finally{if(s)throw u}}return n}}function Hs(t){if(Array.isArray(t))return t}function qt(t){"@babel/helpers - typeof";return qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(t)}function Ws(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=dn(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dn(t,e){if(t){if(typeof t=="string")return Sr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sr(t,e)}}function Sr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Cr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Lr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cr(Object(r),!0).forEach(function(n){zs(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zs(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Or={isColumnOriented:!1};function Gs(t,e,r){r?r=Lr(Lr({},Or),r):r=Or;var n=r,o=n.isColumnOriented,s=n.rowMap,l=n.ignoreEmptyRows;Zs(e),o&&(t=qs(t));for(var u=t[0],i=[],f=[],a=1;a<t.length;a++){var c=_n(e,t[a],a,u,f,r);(c!==null||l===!1)&&i.push(c)}if(s)for(var p=Ws(f),$;!($=p()).done;){var b=$.value;b.row=s[b.row-1]+1}return{rows:i,errors:f}}function _n(t,e,r,n,o,s){for(var l={},u=!0,i=function(){var p=a[f],$=t[p],b=qt($.type)==="object"&&!Array.isArray($.type),C=e[n.indexOf(p)];C===void 0&&(C=null);var S=void 0,L=void 0,O=void 0;if(b)S=_n($.type,e,r,n,o,s);else if(C===null)S=null;else if(Array.isArray($.type)){var N=!1,k=Ks(C).map(function(M){var x=Tr(M,$,s);return x.error&&(S=M,L=x.error,O=x.reason),x.value!==null&&(N=!0),x.value});L||(S=N?k:null)}else{var E=Tr(C,$,s);L=E.error,O=E.reason,S=L?C:E.value}!L&&S===null&&$.required&&(L="required"),L?(L={error:L,row:r+1,column:p,value:S},O&&(L.reason=O),$.type&&(L.type=$.type),o.push(L)):(u&&S!==null&&(u=!1),(S!==null||s.includeNullValues)&&(l[$.prop]=S))},f=0,a=Object.keys(t);f<a.length;f++)i();return u?null:l}function Tr(t,e,r){if(t===null)return{value:null};var n;if(e.parse?n=lt(t,e.parse):e.type?n=Vs(t,Array.isArray(e.type)?e.type[0]:e.type,r):n={value:t},n.error)return n;if(n.value!==null){if(e.oneOf&&e.oneOf.indexOf(n.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(n.value)}catch(o){return{error:o.message}}}return n}function lt(t,e){try{return t=e(t),t===void 0?{value:null}:{value:t}}catch(n){var r={error:n.message};return n.reason&&(r.reason=n.reason),r}}function Vs(t,e,r){switch(e){case String:return lt(t,Ms);case Number:return lt(t,Ns);case Date:return lt(t,function(n){return Bs(n,{properties:r.properties})});case Boolean:return lt(t,Fs);default:if(typeof e=="function")return lt(t,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function wn(t,e,r){for(var n=0,o="";r+n<t.length;){var s=t[r+n];if(s===e)return[o,n];if(s==='"'){var l=wn(t,'"',r+n+1);o+=l[0],n+=1+l[1]+1}else o+=s,n++}return[o,n]}function Ks(t){for(var e=[],r=0;r<t.length;){var n=wn(t,",",r),o=js(n,2),s=o[0],l=o[1];r+=l+1,e.push(s.trim())}return e}var qs=function(e){return e[0].map(function(r,n){return e.map(function(o){return o[n]})})};function Zs(t){for(var e=0,r=Object.keys(t);e<r.length;e++){var n=r[e],o=t[n];if(!o.prop)throw new Error('"prop" not defined for schema entry "'.concat(n,'".'))}}function Zt(t){"@babel/helpers - typeof";return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(t)}function vn(t){for(var e={},r=0,n=Object.keys(t);r<n.length;r++){var o=n[r],s=t[o],l=void 0;Zt(s)==="object"&&(s=Object.keys(t[o])[0],l=vn(t[o][s])),e[o]={prop:s},l&&(e[o].type=l)}return e}var Xs=["schema","map"];function Ar(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Lt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ar(Object(r),!0).forEach(function(n){Ys(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ys(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Js(t,e){if(t==null)return{};var r=Qs(t,e),n,o;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(o=0;o<s.length;o++)n=s[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Qs(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,s;for(s=0;s<n.length;s++)o=n[s],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function ei(t,e,r){var n=r.schema,o=r.map,s=Js(r,Xs);!n&&o&&(n=vn(o));var l=Cs(t,e,Lt(Lt({},s),{},{properties:n||s.properties}));return n?Gs(l.data,n,Lt(Lt({},s),{},{properties:l.properties})):l}function ti(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return vo(t).then(function(r){return ei(r,to,e)})}function ri(t){let e=new Map;for(let[n,o]of Object.entries(t.schemes))e.set(n,{scheme_reference:n,num_features:0,authority_or_region:o.authority_or_region,capital_scheme_id:o.capital_scheme_id,funding_programme:o.funding_programme});let r=1;for(let n of t.features){let o=e.get(n.properties.scheme_reference);o.num_features++,n.properties.funding_programme=o.funding_programme,n.id=r++}return e}async function ni(t){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:r}=await ti(t,{map:e,sheet:"Form Input"}),n={type:"FeatureCollection",features:[]};for(let o of r){let s=Mn(o.lat_lon.split(",").map(parseFloat).reverse()),l=o;l.submission_time=o.submission_time.toLocaleString(),n.features.push({type:"Feature",properties:l,geometry:{type:"Point",coordinates:s},id:n.features.length+1})}return n}const U={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},bn=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function oi(t){let e,r,n,o,s;function l(i){t[3](i)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return t[0]!==void 0&&(u.value=t[0]),e=new Et({props:u}),H.push(()=>z(e,"value",l)),e.$on("change",t[2]),o=new Xn({props:{rows:t[1]}}),{c(){_(e.$$.fragment),n=T(),_(o.$$.fragment)},m(i,f){w(e,i,f),m(i,n,f),w(o,i,f),s=!0},p(i,[f]){const a={};!r&&f&1&&(r=!0,a.value=i[0],G(()=>r=!1)),e.$set(a);const c={};f&2&&(c.rows=i[1]),o.$set(c)},i(i){s||(g(e.$$.fragment,i),g(o.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(o.$$.fragment,i),s=!1},d(i){i&&h(n),v(e,i),v(o,i)}}}function si(t,e,r){let n;X(t,te,i=>r(4,n=i));let o="interventionType",s=$r("v1");function l(){let i;o=="interventionType"?(i=rn("v1"),r(1,s=$r("v1"))):(i=Yr(["get","funding_programme"],{ATF2:U.atf2,ATF3:U.atf3,ATF4:U.atf4},"grey"),r(1,s=[["ATF2",U.atf2],["ATF3",U.atf3],["ATF4",U.atf4]])),n.setPaintProperty("interventions-points","circle-color",i),n.setPaintProperty("interventions-lines","line-color",i),n.setPaintProperty("interventions-polygons","fill-color",i),n.setPaintProperty("interventions-polygon-outlines","line-color",i)}function u(i){o=i,r(0,o)}return[o,s,l,u]}class ii extends V{constructor(e){super(),K(this,e,si,oi,q,{})}}function li(t){let e;return{c(){e=y("Clear")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function ai(t){let e,r,n,o,s,l;return n=new Wt({props:{$$slots:{default:[li]},$$scope:{ctx:t}}}),n.$on("click",t[13]),{c(){e=P("input"),r=T(),_(n.$$.fragment),W(e,"type","text"),W(e,"class","govuk-input govuk-input--width-10"),W(e,"id","filterText")},m(u,i){m(u,e,i),fr(e,t[0]),m(u,r,i),w(n,u,i),o=!0,s||(l=tr(e,"input",t[12]),s=!0)},p(u,i){i&1&&e.value!==u[0]&&fr(e,u[0]);const f={};i&131072&&(f.$$scope={dirty:i,ctx:u}),n.$set(f)},i(u){o||(g(n.$$.fragment,u),o=!0)},o(u){d(n.$$.fragment,u),o=!1},d(u){u&&(h(e),h(r)),v(n,u),s=!1,l()}}}function ui(t){let e,r,n,o,s,l,u,i,f,a;function c(C){t[10](C)}let p={label:"Authority or region",id:"filterAuthority",choices:t[5],emptyOption:!0};t[2]!==void 0&&(p.value=t[2]),e=new Et({props:p}),H.push(()=>z(e,"value",c));function $(C){t[11](C)}let b={label:"Funding programme",id:"filterFundingProgramme",choices:t[6],emptyOption:!0};return t[3]!==void 0&&(b.value=t[3]),o=new Et({props:b}),H.push(()=>z(o,"value",$)),u=new Jr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[ai]},$$scope:{ctx:t}}}),f=new ii({}),{c(){_(e.$$.fragment),n=T(),_(o.$$.fragment),l=T(),_(u.$$.fragment),i=T(),_(f.$$.fragment)},m(C,S){w(e,C,S),m(C,n,S),w(o,C,S),m(C,l,S),w(u,C,S),m(C,i,S),w(f,C,S),a=!0},p(C,S){const L={};S&32&&(L.choices=C[5]),!r&&S&4&&(r=!0,L.value=C[2],G(()=>r=!1)),e.$set(L);const O={};S&64&&(O.choices=C[6]),!s&&S&8&&(s=!0,O.value=C[3],G(()=>s=!1)),o.$set(O);const N={};S&131073&&(N.$$scope={dirty:S,ctx:C}),u.$set(N)},i(C){a||(g(e.$$.fragment,C),g(o.$$.fragment,C),g(u.$$.fragment,C),g(f.$$.fragment,C),a=!0)},o(C){d(e.$$.fragment,C),d(o.$$.fragment,C),d(u.$$.fragment,C),d(f.$$.fragment,C),a=!1},d(C){C&&(h(n),h(l),h(i)),v(e,C),v(o,C),v(u,C),v(f,C)}}}function fi(t){let e,r=t[1].size.toLocaleString()+"",n,o,s=t[7].route.toLocaleString()+"",l,u,i=t[7].area.toLocaleString()+"",f,a,c=t[7].crossing.toLocaleString()+"",p,$,b=t[7].other.toLocaleString()+"",C,S;return{c(){e=y("Showing "),n=y(r),o=y(" schemes ("),l=y(s),u=y(`
    routes, `),f=y(i),a=y(` areas,
    `),p=y(c),$=y(" crossings, "),C=y(b),S=y(`
    other)`)},m(L,O){m(L,e,O),m(L,n,O),m(L,o,O),m(L,l,O),m(L,u,O),m(L,f,O),m(L,a,O),m(L,p,O),m(L,$,O),m(L,C,O),m(L,S,O)},p(L,O){O&2&&r!==(r=L[1].size.toLocaleString()+"")&&Se(n,r),O&128&&s!==(s=L[7].route.toLocaleString()+"")&&Se(l,s),O&128&&i!==(i=L[7].area.toLocaleString()+"")&&Se(f,i),O&128&&c!==(c=L[7].crossing.toLocaleString()+"")&&Se(p,c),O&128&&b!==(b=L[7].other.toLocaleString()+"")&&Se(C,b)},d(L){L&&(h(e),h(n),h(o),h(l),h(u),h(f),h(a),h(p),h($),h(C),h(S))}}}function ci(t){let e,r,n;function o(l){t[14](l)}let s={id:"show-schemes",$$slots:{default:[fi]},$$scope:{ctx:t}};return t[4]!==void 0&&(s.checked=t[4]),e=new Q({props:s}),H.push(()=>z(e,"checked",o)),{c(){_(e.$$.fragment)},m(l,u){w(e,l,u),n=!0},p(l,u){const i={};u&131202&&(i.$$scope={dirty:u,ctx:l}),!r&&u&16&&(r=!0,i.checked=l[4],G(()=>r=!1)),e.$set(i)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){d(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function pi(t){let e,r,n,o;return e=new Me({props:{label:"Filters",$$slots:{default:[ui]},$$scope:{ctx:t}}}),n=new yt({props:{small:!0,$$slots:{default:[ci]},$$scope:{ctx:t}}}),{c(){_(e.$$.fragment),r=T(),_(n.$$.fragment)},m(s,l){w(e,s,l),m(s,r,l),w(n,s,l),o=!0},p(s,[l]){const u={};l&131181&&(u.$$scope={dirty:l,ctx:s}),e.$set(u);const i={};l&131218&&(i.$$scope={dirty:l,ctx:s}),n.$set(i)},i(s){o||(g(e.$$.fragment,s),g(n.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(n.$$.fragment,s),o=!1},d(s){s&&h(r),v(e,s),v(n,s)}}}function $i(t,e,r){let n,o;X(t,ft,k=>r(15,n=k)),X(t,te,k=>r(9,o=k));let{schemes:s}=e,{schemesToBeShown:l=new Set}=e,{filterText:u=""}=e,i=[],f="",a=[],c="",p={area:0,route:0,crossing:0,other:0},$=!0;er(()=>{let k=new Set,E=new Set;for(let M of s.values())M.authority_or_region&&k.add(M.authority_or_region),M.funding_programme&&E.add(M.funding_programme);r(5,i=Array.from(k.entries())),i.sort(),r(6,a=Array.from(E.entries())),a.sort()});function b(k,E,M){let x=k.toLowerCase(),A=I=>{var j,J;if(x&&!((j=I.properties.name)!=null&&j.toLowerCase().includes(x))&&!((J=I.properties.description)!=null&&J.toLowerCase().includes(x)))return!1;if(E||M){let ne=s.get(I.properties.scheme_reference);if(E&&ne.authority_or_region!=E||M&&ne.funding_programme!=M)return!1}return!0};r(1,l=new Set(n.features.filter(A).map(I=>I.properties.scheme_reference))),r(7,p={area:0,route:0,crossing:0,other:0});let F=I=>{var j,J;return!(!l.has(I.properties.scheme_reference)||x&&!((j=I.properties.name)!=null&&j.toLowerCase().includes(x))&&!((J=I.properties.description)!=null&&J.toLowerCase().includes(x)))};ft.update(I=>{for(let j of I.features)F(j)?(delete j.properties.hide_while_editing,r(7,p[j.properties.intervention_type]++,p)):j.properties.hide_while_editing=!0;return I}),r(7,p)}function C(k){f=k,r(2,f)}function S(k){c=k,r(3,c)}function L(){u=this.value,r(0,u)}const O=()=>r(0,u="");function N(k){$=k,r(4,$)}return t.$$set=k=>{"schemes"in k&&r(8,s=k.schemes),"schemesToBeShown"in k&&r(1,l=k.schemesToBeShown),"filterText"in k&&r(0,u=k.filterText)},t.$$.update=()=>{if(t.$$.dirty&528&&o)for(let k of["interventions-polygons","interventions-polygon-outlines","interventions-lines","interventions-lines-endpoints","interventions-points"])o.getLayer(k)&&o.setLayoutProperty(k,"visibility",$?"visible":"none");t.$$.dirty&13&&b(u,f,c)},[u,l,f,c,$,i,a,p,s,o,C,S,L,O,N]}class mi extends V{constructor(e){super(),K(this,e,$i,pi,q,{schemes:8,schemesToBeShown:1,filterText:0})}}function hi(t){let e,r,n;return e=new $e({props:{color:U.bus_route_with_lane}}),{c(){_(e.$$.fragment),r=y(`
  Bus routes`)},m(o,s){w(e,o,s),m(o,r,s),n=!0},p:ee,i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){o&&h(r),v(e,o)}}}function gi(t){let e;return{c(){e=y(`GTFS
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function di(t){let e;return{c(){e=y("Open Data Commons Open Database License")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function _i(t){let e,r,n,o,s,l,u,i,f,a,c;return s=new B({props:{href:"https://gtfs.org",$$slots:{default:[gi]},$$scope:{ctx:t}}}),a=new B({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[di]},$$scope:{ctx:t}}}),{c(){e=P("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,r=T(),n=P("p"),o=y("Note this data is from OpenStreetMap (as of 9 August 2023), not "),_(s.$$.fragment),l=y(`, and doesn't include which routes are run or the
        frequency of service.`),u=T(),i=P("p"),f=y("License: "),_(a.$$.fragment)},m(p,$){m(p,e,$),m(p,r,$),m(p,n,$),D(n,o),w(s,n,null),D(n,l),m(p,u,$),m(p,i,$),D(i,f),w(a,i,null),c=!0},p(p,$){const b={};$&8&&(b.$$scope={dirty:$,ctx:p}),s.$set(b);const C={};$&8&&(C.$$scope={dirty:$,ctx:p}),a.$set(C)},i(p){c||(g(s.$$.fragment,p),g(a.$$.fragment,p),c=!0)},o(p){d(s.$$.fragment,p),d(a.$$.fragment,p),c=!1},d(p){p&&(h(e),h(r),h(n),h(u),h(i)),v(s),v(a)}}}function wi(t){let e,r,n;return r=new re({props:{$$slots:{default:[_i]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&8&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function vi(t){let e,r,n,o,s;function l(i){t[1](i)}let u={id:Ve,$$slots:{right:[wi],default:[hi]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.checked=t[0]),e=new Q({props:u}),H.push(()=>z(e,"checked",l)),o=new Y({props:{layer:Ve,tooltip:bi,show:t[0],clickable:!1}}),{c(){_(e.$$.fragment),n=T(),_(o.$$.fragment)},m(i,f){w(e,i,f),m(i,n,f),w(o,i,f),s=!0},p(i,[f]){const a={};f&8&&(a.$$scope={dirty:f,ctx:i}),!r&&f&1&&(r=!0,a.checked=i[0],G(()=>r=!1)),e.$set(a);const c={};f&1&&(c.show=i[0]),o.$set(c)},i(i){s||(g(e.$$.fragment,i),g(o.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(o.$$.fragment,i),s=!1},d(i){i&&h(n),v(e,i),v(o,i)}}}let Ve="bus_routes";function bi(t){return t.properties.has_bus_lane?"<p>At least one bus route crosses here, with a bus lane in one or more directions</p>":"<p>At least one bus route crosses here, without any bus lanes</p>"}function yi(t,e,r){let n;X(t,te,l=>r(2,n=l)),pe(n,Ve,`https://atip.uk/layers/v1/${Ve}.pmtiles`),Ce(n,{id:Ve,source:Ve,sourceLayer:Ve,color:["case",["boolean",["get","has_bus_lane"],!1],U.bus_route_with_lane,U.bus_route_without_lane],width:5,opacity:_e(.5,1)});let o=!1;function s(l){o=l,r(0,o)}return[o,s]}class ki extends V{constructor(e){super(),K(this,e,yi,vi,q,{})}}function Dr(t,e,r){const n=t.slice();return n[2]=e[r],n}function Er(t,e,r){const n=t.slice();return n[5]=e[r],n}function Pr(t){let e,r;return{c(){e=P("span"),r=y(` 
    `),Fe(e,"background",t[5]),Fe(e,"width","100%"),Fe(e,"border","1px solid black")},m(n,o){m(n,e,o),D(e,r)},p(n,o){o&1&&Fe(e,"background",n[5])},d(n){n&&h(e)}}}function Ir(t){let e,r=t[2]+"",n;return{c(){e=P("span"),n=y(r)},m(o,s){m(o,e,s),D(e,n)},p(o,s){s&2&&r!==(r=o[2]+"")&&Se(n,r)},d(o){o&&h(e)}}}function Si(t){let e,r,n,o=We(t[0]),s=[];for(let i=0;i<o.length;i+=1)s[i]=Pr(Er(t,o,i));let l=We(t[1]),u=[];for(let i=0;i<l.length;i+=1)u[i]=Ir(Dr(t,l,i));return{c(){e=P("div");for(let i=0;i<s.length;i+=1)s[i].c();r=T(),n=P("div");for(let i=0;i<u.length;i+=1)u[i].c();Fe(e,"display","flex"),Fe(n,"display","flex"),Fe(n,"justify-content","space-between")},m(i,f){m(i,e,f);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);m(i,r,f),m(i,n,f);for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(n,null)},p(i,[f]){if(f&1){o=We(i[0]);let a;for(a=0;a<o.length;a+=1){const c=Er(i,o,a);s[a]?s[a].p(c,f):(s[a]=Pr(c),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}if(f&2){l=We(i[1]);let a;for(a=0;a<l.length;a+=1){const c=Dr(i,l,a);u[a]?u[a].p(c,f):(u[a]=Ir(c),u[a].c(),u[a].m(n,null))}for(;a<u.length;a+=1)u[a].d(1);u.length=l.length}},i:ee,o:ee,d(i){i&&(h(e),h(r),h(n)),Dt(s,i),Dt(u,i)}}}function Ci(t,e,r){let{colorScale:n}=e,{limits:o}=e;return t.$$set=s=>{"colorScale"in s&&r(0,n=s.colorScale),"limits"in s&&r(1,o=s.limits)},[n,o]}class pt extends V{constructor(e){super(),K(this,e,Ci,Si,q,{colorScale:0,limits:1})}}function Li(t){let e;return{c(){e=y("Percent of households with a car")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Oi(t){let e;return{c(){e=y(`NOMIS TS045
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Ti(t){let e;return{c(){e=y(`ONS Geography
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Ai(t){let e;return{c(){e=y(`Open Government License
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Di(t){let e,r,n,o,s,l,u,i,f,a,c,p;return n=new B({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Oi]},$$scope:{ctx:t}}}),s=new B({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ti]},$$scope:{ctx:t}}}),a=new B({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ai]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("Car/van availability data is from the 2021 census, via "),_(n.$$.fragment),o=y(". Output area boundaries from "),_(s.$$.fragment),l=y("."),u=T(),i=P("p"),f=y("License: "),_(a.$$.fragment),c=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m($,b){m($,e,b),D(e,r),w(n,e,null),D(e,o),w(s,e,null),D(e,l),m($,u,b),m($,i,b),D(i,f),w(a,i,null),D(i,c),p=!0},p($,b){const C={};b&65536&&(C.$$scope={dirty:b,ctx:$}),n.$set(C);const S={};b&65536&&(S.$$scope={dirty:b,ctx:$}),s.$set(S);const L={};b&65536&&(L.$$scope={dirty:b,ctx:$}),a.$set(L)},i($){p||(g(n.$$.fragment,$),g(s.$$.fragment,$),g(a.$$.fragment,$),p=!0)},o($){d(n.$$.fragment,$),d(s.$$.fragment,$),d(a.$$.fragment,$),p=!1},d($){$&&(h(e),h(u),h(i)),v(n),v(s),v(a)}}}function Ei(t){let e,r,n;return r=new re({props:{$$slots:{default:[Di]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&65536&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function xr(t){let e,r;return e=new pt({props:{colorScale:t[4],limits:t[7]()}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p:ee,i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}function Pi(t){let e;return{c(){e=y("Average cars per household")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Ii(t){let e;return{c(){e=y(`NOMIS TS045
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function xi(t){let e;return{c(){e=y(`ONS Geography
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Ni(t){let e;return{c(){e=y(`Open Government License
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Mi(t){let e,r,n,o,s,l,u,i,f,a,c,p,$,b;return s=new B({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ii]},$$scope:{ctx:t}}}),u=new B({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[xi]},$$scope:{ctx:t}}}),p=new B({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ni]},$$scope:{ctx:t}}}),{c(){e=P("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,r=T(),n=P("p"),o=y("Car/van availability data is from the 2021 census, via "),_(s.$$.fragment),l=y(". Output area boundaries from "),_(u.$$.fragment),i=y("."),f=T(),a=P("p"),c=y("License: "),_(p.$$.fragment),$=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(C,S){m(C,e,S),m(C,r,S),m(C,n,S),D(n,o),w(s,n,null),D(n,l),w(u,n,null),D(n,i),m(C,f,S),m(C,a,S),D(a,c),w(p,a,null),D(a,$),b=!0},p(C,S){const L={};S&65536&&(L.$$scope={dirty:S,ctx:C}),s.$set(L);const O={};S&65536&&(O.$$scope={dirty:S,ctx:C}),u.$set(O);const N={};S&65536&&(N.$$scope={dirty:S,ctx:C}),p.$set(N)},i(C){b||(g(s.$$.fragment,C),g(u.$$.fragment,C),g(p.$$.fragment,C),b=!0)},o(C){d(s.$$.fragment,C),d(u.$$.fragment,C),d(p.$$.fragment,C),b=!1},d(C){C&&(h(e),h(r),h(n),h(f),h(a)),v(s),v(u),v(p)}}}function Fi(t){let e,r,n;return r=new re({props:{$$slots:{default:[Mi]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&65536&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function Nr(t){let e,r;return e=new pt({props:{colorScale:t[4],limits:t[7]()}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p:ee,i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}function Bi(t){let e;return{c(){e=y("Population density")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function ji(t){let e;return{c(){e=y(`NOMIS TS006
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Ui(t){let e;return{c(){e=y(`ONS Geography
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Ri(t){let e;return{c(){e=y(`Open Government License
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Hi(t){let e,r,n,o,s,l,u,i,f,a,c,p;return n=new B({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ji]},$$scope:{ctx:t}}}),s=new B({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ui]},$$scope:{ctx:t}}}),a=new B({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ri]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("Population density data is from the 2021 census, via "),_(n.$$.fragment),o=y(". Output area boundaries from "),_(s.$$.fragment),l=y("."),u=T(),i=P("p"),f=y("License: "),_(a.$$.fragment),c=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m($,b){m($,e,b),D(e,r),w(n,e,null),D(e,o),w(s,e,null),D(e,l),m($,u,b),m($,i,b),D(i,f),w(a,i,null),D(i,c),p=!0},p($,b){const C={};b&65536&&(C.$$scope={dirty:b,ctx:$}),n.$set(C);const S={};b&65536&&(S.$$scope={dirty:b,ctx:$}),s.$set(S);const L={};b&65536&&(L.$$scope={dirty:b,ctx:$}),a.$set(L)},i($){p||(g(n.$$.fragment,$),g(s.$$.fragment,$),g(a.$$.fragment,$),p=!0)},o($){d(n.$$.fragment,$),d(s.$$.fragment,$),d(a.$$.fragment,$),p=!1},d($){$&&(h(e),h(u),h(i)),v(n),v(s),v(a)}}}function Wi(t){let e,r,n;return r=new re({props:{$$slots:{default:[Hi]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&65536&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function Mr(t){let e,r,n,o;return n=new pt({props:{colorScale:t[4],limits:t[7]().map(Gi)}}),{c(){e=P("p"),e.textContent="(people per square kilometres)",r=T(),_(n.$$.fragment)},m(s,l){m(s,e,l),m(s,r,l),w(n,s,l),o=!0},p:ee,i(s){o||(g(n.$$.fragment,s),o=!0)},o(s){d(n.$$.fragment,s),o=!1},d(s){s&&(h(e),h(r)),v(n,s)}}}function zi(t){let e,r,n,o,s,l,u,i,f,a,c,p,$,b;function C(A){t[9](A)}let S={id:"percent_households_with_car",$$slots:{right:[Ei],default:[Li]},$$scope:{ctx:t}};t[0]!==void 0&&(S.checked=t[0]),e=new Q({props:S}),H.push(()=>z(e,"checked",C)),e.$on("change",t[10]);let L=t[3]=="percent_households_with_car"&&xr(t);function O(A){t[11](A)}let N={id:"average_cars_per_household",$$slots:{right:[Fi],default:[Pi]},$$scope:{ctx:t}};t[1]!==void 0&&(N.checked=t[1]),s=new Q({props:N}),H.push(()=>z(s,"checked",O)),s.$on("change",t[12]);let k=t[3]=="average_cars_per_household"&&Nr(t);function E(A){t[13](A)}let M={id:"population_density",$$slots:{right:[Wi],default:[Bi]},$$scope:{ctx:t}};t[2]!==void 0&&(M.checked=t[2]),f=new Q({props:M}),H.push(()=>z(f,"checked",E)),f.$on("change",t[14]);let x=t[3]=="population_density"&&Mr(t);return $=new Y({props:{layer:Oe,tooltip:t[5],show:t[3]!="",clickable:!0}}),$.$on("click",t[6]),{c(){_(e.$$.fragment),n=T(),L&&L.c(),o=T(),_(s.$$.fragment),u=T(),k&&k.c(),i=T(),_(f.$$.fragment),c=T(),x&&x.c(),p=T(),_($.$$.fragment)},m(A,F){w(e,A,F),m(A,n,F),L&&L.m(A,F),m(A,o,F),w(s,A,F),m(A,u,F),k&&k.m(A,F),m(A,i,F),w(f,A,F),m(A,c,F),x&&x.m(A,F),m(A,p,F),w($,A,F),b=!0},p(A,[F]){const I={};F&65536&&(I.$$scope={dirty:F,ctx:A}),!r&&F&1&&(r=!0,I.checked=A[0],G(()=>r=!1)),e.$set(I),A[3]=="percent_households_with_car"?L?(L.p(A,F),F&8&&g(L,1)):(L=xr(A),L.c(),g(L,1),L.m(o.parentNode,o)):L&&(ge(),d(L,1,1,()=>{L=null}),de());const j={};F&65536&&(j.$$scope={dirty:F,ctx:A}),!l&&F&2&&(l=!0,j.checked=A[1],G(()=>l=!1)),s.$set(j),A[3]=="average_cars_per_household"?k?(k.p(A,F),F&8&&g(k,1)):(k=Nr(A),k.c(),g(k,1),k.m(i.parentNode,i)):k&&(ge(),d(k,1,1,()=>{k=null}),de());const J={};F&65536&&(J.$$scope={dirty:F,ctx:A}),!a&&F&4&&(a=!0,J.checked=A[2],G(()=>a=!1)),f.$set(J),A[3]=="population_density"?x?(x.p(A,F),F&8&&g(x,1)):(x=Mr(A),x.c(),g(x,1),x.m(p.parentNode,p)):x&&(ge(),d(x,1,1,()=>{x=null}),de());const ne={};F&8&&(ne.show=A[3]!=""),$.$set(ne)},i(A){b||(g(e.$$.fragment,A),g(L),g(s.$$.fragment,A),g(k),g(f.$$.fragment,A),g(x),g($.$$.fragment,A),b=!0)},o(A){d(e.$$.fragment,A),d(L),d(s.$$.fragment,A),d(k),d(f.$$.fragment,A),d(x),d($.$$.fragment,A),b=!1},d(A){A&&(h(n),h(o),h(u),h(i),h(c),h(p)),v(e,A),L&&L.d(A),v(s,A),k&&k.d(A),v(f,A),x&&x.d(A),v($,A)}}}let Oe="census_output_areas";const Gi=t=>t.toLocaleString();function Vi(t,e,r){let n;X(t,te,N=>r(8,n=N));let o=`${Oe}-outline`,s=U.sequential_low_to_high,l=!1,u=!1,i=!1,f="";pe(n,Oe,`https://atip.uk/layers/v1/${Oe}.pmtiles`),ze(n,{id:Oe,source:Oe,sourceLayer:Oe,color:"black",opacity:_e(.5,.7)}),Ce(n,{id:o,source:Oe,sourceLayer:Oe,color:"black",width:.5});function a(N){let k=N.properties.OA21CD,E=N.properties[f];return f=="percent_households_with_car"?`<p>${E}% of households in ${k} have 1 or more cars</p>`:f=="average_cars_per_household"?`<p>Households in ${k} have an average of ${E} cars</p>`:`<p>There are ${E.toLocaleString()} people per square kilometre in ${k}</p>`}function c(N){let k=N.detail.properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${k}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${k}`,"_blank")}function p(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function $(N){l=N,r(0,l)}const b=()=>{r(1,u=!1),r(2,i=!1)};function C(N){u=N,r(1,u)}const S=()=>{r(0,l=!1),r(2,i=!1)};function L(N){i=N,r(2,i)}const O=()=>{r(0,l=!1),r(1,u=!1)};return t.$$.update=()=>{t.$$.dirty&271&&(l?r(3,f="percent_households_with_car"):u?r(3,f="average_cars_per_household"):i?r(3,f="population_density"):r(3,f=""),f?(n.setPaintProperty(Oe,"fill-color",wt(["get",f],p(),s)),n.setLayoutProperty(o,"visibility","visible")):n.setLayoutProperty(o,"visibility","none"))},[l,u,i,f,s,a,c,p,n,$,b,C,S,L,O]}class Ki extends V{constructor(e){super(),K(this,e,Vi,zi,q,{})}}function qi(t){let e,r,n;return e=new $e({props:{color:t[1]}}),{c(){_(e.$$.fragment),r=y(`
  Combined authorities`)},m(o,s){w(e,o,s),m(o,r,s),n=!0},p:ee,i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){o&&h(r),v(e,o)}}}function Zi(t){let e;return{c(){e=y(`ONS Geography
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Xi(t){let e;return{c(){e=y(`Open Government License
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Yi(t){let e,r,n,o,s,l,u,i,f,a;return n=new B({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Zi]},$$scope:{ctx:t}}}),i=new B({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Xi]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("Data from "),_(n.$$.fragment),o=y(", as of December 2022."),s=T(),l=P("p"),u=y("License: "),_(i.$$.fragment),f=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(c,p){m(c,e,p),D(e,r),w(n,e,null),D(e,o),m(c,s,p),m(c,l,p),D(l,u),w(i,l,null),D(l,f),a=!0},p(c,p){const $={};p&32&&($.$$scope={dirty:p,ctx:c}),n.$set($);const b={};p&32&&(b.$$scope={dirty:p,ctx:c}),i.$set(b)},i(c){a||(g(n.$$.fragment,c),g(i.$$.fragment,c),a=!0)},o(c){d(n.$$.fragment,c),d(i.$$.fragment,c),a=!1},d(c){c&&(h(e),h(s),h(l)),v(n),v(i)}}}function Ji(t){let e,r,n;return r=new re({props:{$$slots:{default:[Yi]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&32&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function Qi(t){let e,r,n,o,s;function l(i){t[3](i)}let u={id:Ue,$$slots:{right:[Ji],default:[qi]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.checked=t[0]),e=new Q({props:u}),H.push(()=>z(e,"checked",l)),o=new Y({props:{layer:Ue,tooltip:el,show:t[0],clickable:!0}}),o.$on("click",tl),{c(){_(e.$$.fragment),n=T(),_(o.$$.fragment)},m(i,f){w(e,i,f),m(i,n,f),w(o,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!r&&f&1&&(r=!0,a.checked=i[0],G(()=>r=!1)),e.$set(a);const c={};f&1&&(c.show=i[0]),o.$set(c)},i(i){s||(g(e.$$.fragment,i),g(o.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(o.$$.fragment,i),s=!1},d(i){i&&h(n),v(e,i),v(o,i)}}}let Ue="combined_authorities";function el(t){return`<p>${t.properties.name}</p>`}function tl(t){window.open(`https://www.ons.gov.uk/visualisations/areas/${t.detail.properties.CAUTH22CD}`,"_blank")}function rl(t,e,r){let n;X(t,te,i=>r(2,n=i));let o=U.combined_authorities,s=`${Ue}-outline`;rr(n,Ue,`https://atip.uk/layers/v1/${Ue}.geojson`),ze(n,{id:Ue,source:Ue,color:o,opacity:_e(.5,0)}),Ce(n,{id:s,source:Ue,color:o,width:2.5});let l=!1;function u(i){l=i,r(0,l)}return t.$$.update=()=>{t.$$.dirty&5&&n.getLayer(s)&&n.setLayoutProperty(s,"visibility",l?"visible":"none")},[l,o,n,u]}class nl extends V{constructor(e){super(),K(this,e,rl,Qi,q,{})}}function ol(t){let e,r,n;return{c(){e=P("input"),W(e,"class","govuk-file-upload"),W(e,"id","load-criticals"),W(e,"type","file")},m(o,s){m(o,e,s),t[7](e),r||(n=tr(e,"change",t[4]),r=!0)},p:ee,d(o){o&&h(e),t[7](null),r=!1,n()}}}function Fr(t){let e,r;return e=new yt({props:{small:!0,$$slots:{default:[il]},$$scope:{ctx:t}}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p(n,o){const s={};o&517&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}function sl(t){let e,r,n=t[2].toLocaleString()+"",o,s,l;return e=new $e({props:{color:Xt}}),{c(){_(e.$$.fragment),r=y(`
        Show `),o=y(n),s=y(" issues")},m(u,i){w(e,u,i),m(u,r,i),m(u,o,i),m(u,s,i),l=!0},p(u,i){(!l||i&4)&&n!==(n=u[2].toLocaleString()+"")&&Se(o,n)},i(u){l||(g(e.$$.fragment,u),l=!0)},o(u){d(e.$$.fragment,u),l=!1},d(u){u&&(h(r),h(o),h(s)),v(e,u)}}}function il(t){let e,r,n;function o(l){t[8](l)}let s={id:"show-criticals",$$slots:{default:[sl]},$$scope:{ctx:t}};return t[0]!==void 0&&(s.checked=t[0]),e=new Q({props:s}),H.push(()=>z(e,"checked",o)),{c(){_(e.$$.fragment)},m(l,u){w(e,l,u),n=!0},p(l,u){const i={};u&516&&(i.$$scope={dirty:u,ctx:l}),!r&&u&1&&(r=!0,i.checked=l[0],G(()=>r=!1)),e.$set(i)},i(l){n||(g(e.$$.fragment,l),n=!0)},o(l){d(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function ll(t){let e,r,n,o,s,l;e=new Jr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[ol]},$$scope:{ctx:t}}}),n=new en({props:{errorMessage:t[3]}});let u=t[2]>0&&Fr(t);return{c(){_(e.$$.fragment),r=T(),_(n.$$.fragment),o=T(),u&&u.c(),s=nr()},m(i,f){w(e,i,f),m(i,r,f),w(n,i,f),m(i,o,f),u&&u.m(i,f),m(i,s,f),l=!0},p(i,f){const a={};f&514&&(a.$$scope={dirty:f,ctx:i}),e.$set(a);const c={};f&8&&(c.errorMessage=i[3]),n.$set(c),i[2]>0?u?(u.p(i,f),f&4&&g(u,1)):(u=Fr(i),u.c(),g(u,1),u.m(s.parentNode,s)):u&&(ge(),d(u,1,1,()=>{u=null}),de())},i(i){l||(g(e.$$.fragment,i),g(n.$$.fragment,i),g(u),l=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),d(u),l=!1},d(i){i&&(h(r),h(o),h(s)),v(e,i),v(n,i),u&&u.d(i)}}}function al(t){let e,r,n,o,s,l;return e=new Me({props:{label:"Critical Issues",$$slots:{default:[ll]},$$scope:{ctx:t}}}),n=new Y({props:{layer:se+"-points",tooltip:ul,show:t[0],clickable:!1}}),s=new Y({props:{layer:se+"-clusters",show:t[0],clickable:!0,ignoreHigherLayers:[se+"-counts"]}}),s.$on("click",t[5]),{c(){_(e.$$.fragment),r=T(),_(n.$$.fragment),o=T(),_(s.$$.fragment)},m(u,i){w(e,u,i),m(u,r,i),w(n,u,i),m(u,o,i),w(s,u,i),l=!0},p(u,[i]){const f={};i&527&&(f.$$scope={dirty:i,ctx:u}),e.$set(f);const a={};i&1&&(a.show=u[0]),n.$set(a);const c={};i&1&&(c.show=u[0]),s.$set(c)},i(u){l||(g(e.$$.fragment,u),g(n.$$.fragment,u),g(s.$$.fragment,u),l=!0)},o(u){d(e.$$.fragment,u),d(n.$$.fragment,u),d(s.$$.fragment,u),l=!1},d(u){u&&(h(r),h(o)),v(e,u),v(n,u),v(s,u)}}}let se="criticals",Xt="red";function ul(t){let e='<div style="max-width: 30vw;">';return e+=`<h2>${t.properties.critical_type}</h2>`,e+=`<p><u>Location</u>: ${t.properties.location_description}</p>`,e+=`<p><u>Notes</u>: ${t.properties.notes}</p>`,e+="<hr />",e+=`<p>Critical issue ID: <b>${t.properties.id}</b></p>`,e+=`<p>Submitted by <b>${t.properties.inspector??"???"}</b> at <b>${t.properties.submission_time}</b></p>`,e+=`<p>For scheme <b>${t.properties.scheme_reference}</b> in stage <b>${t.properties.current_design_stage}</b></p>`,e+="</div>",e}function fl(t,e,r){let n;X(t,te,p=>r(6,n=p));let o,s=!0,l=0,u="";Fn(n,se),n.addSource(se,{type:"geojson",data:Qr(),cluster:!0,clusterMaxZoom:14,clusterRadius:50}),ct(n,{id:`${se}-clusters`,source:se,filter:["has","point_count"],color:Xt,opacity:.9,radius:["step",["get","point_count"],20,15,30,30,40]}),n.addLayer({id:`${se}-counts`,source:se,type:"symbol",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}"}}),ct(n,{id:`${se}-points`,source:se,filter:["!",["has","point_count"]],color:Xt,opacity:.9,radius:15,strokeColor:"black",strokeWidth:3});async function i(p){try{let $=await ni(o.files[0]);n.getSource(se).setData($),r(2,l=$.features.length),r(3,u="")}catch($){r(3,u=`The file you loaded is broken: ${$}`)}}function f(p){n.getSource(se).getClusterExpansionZoom(p.detail.properties.cluster_id,($,b)=>{$||n.easeTo({center:p.detail.geometry.coordinates,zoom:b})})}function a(p){H[p?"unshift":"push"](()=>{o=p,r(1,o)})}function c(p){s=p,r(0,s)}return t.$$.update=()=>{t.$$.dirty&65&&n.getLayer(`${se}-counts`)&&n.setLayoutProperty(`${se}-counts`,"visibility",s?"visible":"none")},[s,o,l,u,i,f,n,a,c]}class cl extends V{constructor(e){super(),K(this,e,fl,al,q,{})}}function pl(t){let e,r,n;return e=new $e({props:{color:t[2]}}),{c(){_(e.$$.fragment),r=y(`
  Crossings`)},m(o,s){w(e,o,s),m(o,r,s),n=!0},p:ee,i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){o&&h(r),v(e,o)}}}function $l(t){let e;return{c(){e=y("crossing")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function ml(t){let e;return{c(){e=y("Open Data Commons Open Database License")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function hl(t){let e,r,n,o,s,l,u,i,f;return n=new B({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[$l]},$$scope:{ctx:t}}}),i=new B({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[ml]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("This shows "),_(n.$$.fragment),o=y(" data from OpenStreetMap (as of 9 August 2023)."),s=T(),l=P("p"),u=y("License: "),_(i.$$.fragment)},m(a,c){m(a,e,c),D(e,r),w(n,e,null),D(e,o),m(a,s,c),m(a,l,c),D(l,u),w(i,l,null),f=!0},p(a,c){const p={};c&64&&(p.$$scope={dirty:c,ctx:a}),n.$set(p);const $={};c&64&&($.$$scope={dirty:c,ctx:a}),i.$set($)},i(a){f||(g(n.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(n.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(h(e),h(s),h(l)),v(n),v(i)}}}function gl(t){let e,r,n;return r=new re({props:{$$slots:{default:[hl]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&64&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function dl(t){let e,r,n,o,s;function l(i){t[3](i)}let u={id:Re,$$slots:{right:[gl],default:[pl]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.checked=t[0]),e=new Q({props:u}),H.push(()=>z(e,"checked",l)),o=new Y({props:{layer:Re,tooltip:t[1],show:t[0],clickable:!0}}),o.$on("click",_l),{c(){_(e.$$.fragment),n=T(),_(o.$$.fragment)},m(i,f){w(e,i,f),m(i,n,f),w(o,i,f),s=!0},p(i,[f]){const a={};f&64&&(a.$$scope={dirty:f,ctx:i}),!r&&f&1&&(r=!0,a.checked=i[0],G(()=>r=!1)),e.$set(a);const c={};f&1&&(c.show=i[0]),o.$set(c)},i(i){s||(g(e.$$.fragment,i),g(o.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(o.$$.fragment,i),s=!1},d(i){i&&h(n),v(e,i),v(o,i)}}}const Re="crossings";function _l(t){window.open(`http://openstreetmap.org/node/${t.detail.properties.osm_id}`,"_blank")}function wl(t,e,r){let n;X(t,te,f=>r(4,n=f));let o=!1;function s(f){const a=f.properties.crossing;return`<p>${l.get(a)??`Crossing with unknown type (${a}).`}. Click for details.</p>`}const l=new Map([["no","Location where crossing is impossible/illegal but where there is a clear desire line to cross."],["traffic_signals","Signalised crossing"],["marked","Crossing with no traffic signals"],["uncontrolled","Crossing with no traffic signals"],["unmarked","Crossing with no markings or signals"],["zebra","Zebra crossing"],["island","Crossing with an island"],["informal","Informal crossing with an obvious desire line, but no official infrastructure to support it"]]);pe(n,Re,`https://atip.uk/layers/v1/${Re}.pmtiles`);let u=U[Re];ct(n,{id:Re,source:Re,sourceLayer:Re,color:u,radius:["interpolate",["linear"],["zoom"],1,2,8,3,13,10]});function i(f){o=f,r(0,o)}return[o,s,u,i]}class vl extends V{constructor(e){super(),K(this,e,wl,dl,q,{})}}function bl(t){let e,r,n;return e=new $e({props:{color:t[1]}}),{c(){_(e.$$.fragment),r=y(`
  Cycle parking`)},m(o,s){w(e,o,s),m(o,r,s),n=!0},p:ee,i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){o&&h(r),v(e,o)}}}function yl(t){let e;return{c(){e=y("OpenStreetMap")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function kl(t){let e;return{c(){e=y("Open Data Commons Open Database License")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Sl(t){let e,r,n,o,s,l,u,i,f;return n=new B({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[yl]},$$scope:{ctx:t}}}),i=new B({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[kl]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("Cycle parking, according to "),_(n.$$.fragment),o=y(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),s=T(),l=P("p"),u=y("License: "),_(i.$$.fragment)},m(a,c){m(a,e,c),D(e,r),w(n,e,null),D(e,o),m(a,s,c),m(a,l,c),D(l,u),w(i,l,null),f=!0},p(a,c){const p={};c&16&&(p.$$scope={dirty:c,ctx:a}),n.$set(p);const $={};c&16&&($.$$scope={dirty:c,ctx:a}),i.$set($)},i(a){f||(g(n.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(n.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(h(e),h(s),h(l)),v(n),v(i)}}}function Cl(t){let e,r,n;return r=new re({props:{$$slots:{default:[Sl]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&16&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function Ll(t){let e,r,n,o,s;function l(i){t[2](i)}let u={id:Ke,$$slots:{right:[Cl],default:[bl]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.checked=t[0]),e=new Q({props:u}),H.push(()=>z(e,"checked",l)),o=new Y({props:{layer:Ke,tooltip:Ol,show:t[0],clickable:!1}}),{c(){_(e.$$.fragment),n=T(),_(o.$$.fragment)},m(i,f){w(e,i,f),m(i,n,f),w(o,i,f),s=!0},p(i,[f]){const a={};f&16&&(a.$$scope={dirty:f,ctx:i}),!r&&f&1&&(r=!0,a.checked=i[0],G(()=>r=!1)),e.$set(a);const c={};f&1&&(c.show=i[0]),o.$set(c)},i(i){s||(g(e.$$.fragment,i),g(o.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(o.$$.fragment,i),s=!1},d(i){i&&h(n),v(e,i),v(o,i)}}}let Ke="cycle_parking";function Ol(t){return`<p>Capacity: ${t.properties.capacity??"unknown"}</p>`}function Tl(t,e,r){let n;X(t,te,u=>r(3,n=u));let o=U.cycle_parking;pe(n,Ke,`https://atip.uk/layers/v1/${Ke}.pmtiles`),ct(n,{id:Ke,source:Ke,sourceLayer:Ke,color:o,radius:["interpolate",["linear"],["zoom"],1,2,8,3,13,10]});let s=!1;function l(u){s=u,r(0,s)}return[s,o,l]}class Al extends V{constructor(e){super(),K(this,e,Tl,Ll,q,{})}}function Br(t,e,r){const n=t.slice();return n[4]=e[r][0],n[5]=e[r][1],n}function Dl(t){let e;return{c(){e=y("Cycle paths")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function El(t){let e;return{c(){e=y("Open Data Commons Open Database License")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Pl(t){let e,r,n,o,s,l,u,i,f,a;return f=new B({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[El]},$$scope:{ctx:t}}}),{c(){e=P("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,r=T(),n=P("ul"),n.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,o=T(),s=P("p"),s.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,l=T(),u=P("p"),i=y("License: "),_(f.$$.fragment)},m(c,p){m(c,e,p),m(c,r,p),m(c,n,p),m(c,o,p),m(c,s,p),m(c,l,p),m(c,u,p),D(u,i),w(f,u,null),a=!0},p(c,p){const $={};p&256&&($.$$scope={dirty:p,ctx:c}),f.$set($)},i(c){a||(g(f.$$.fragment,c),a=!0)},o(c){d(f.$$.fragment,c),a=!1},d(c){c&&(h(e),h(r),h(n),h(o),h(s),h(l),h(u)),v(f)}}}function Il(t){let e,r,n;return r=new re({props:{$$slots:{default:[Pl]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&256&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function jr(t){let e,r,n=We(t[1]),o=[];for(let l=0;l<n.length;l+=1)o[l]=Ur(Br(t,n,l));const s=l=>d(o[l],1,1,()=>{o[l]=null});return{c(){for(let l=0;l<o.length;l+=1)o[l].c();e=nr()},m(l,u){for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(l,u);m(l,e,u),r=!0},p(l,u){if(u&2){n=We(l[1]);let i;for(i=0;i<n.length;i+=1){const f=Br(l,n,i);o[i]?(o[i].p(f,u),g(o[i],1)):(o[i]=Ur(f),o[i].c(),g(o[i],1),o[i].m(e.parentNode,e))}for(ge(),i=n.length;i<o.length;i+=1)s(i);de()}},i(l){if(!r){for(let u=0;u<n.length;u+=1)g(o[u]);r=!0}},o(l){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)d(o[u]);r=!1},d(l){l&&h(e),Dt(o,l)}}}function Ur(t){let e,r,n,o=t[4]+"",s,l,u;return r=new $e({props:{color:t[5]}}),{c(){e=P("div"),_(r.$$.fragment),n=T(),s=y(o),l=T()},m(i,f){m(i,e,f),w(r,e,null),D(e,n),D(e,s),D(e,l),u=!0},p:ee,i(i){u||(g(r.$$.fragment,i),u=!0)},o(i){d(r.$$.fragment,i),u=!1},d(i){i&&h(e),v(r)}}}function xl(t){let e,r,n,o,s,l;function u(a){t[2](a)}let i={id:qe,$$slots:{right:[Il],default:[Dl]},$$scope:{ctx:t}};t[0]!==void 0&&(i.checked=t[0]),e=new Q({props:i}),H.push(()=>z(e,"checked",u));let f=t[0]&&jr(t);return s=new Y({props:{layer:qe,tooltip:Nl,show:t[0],clickable:!0}}),s.$on("click",Ml),{c(){_(e.$$.fragment),n=T(),f&&f.c(),o=T(),_(s.$$.fragment)},m(a,c){w(e,a,c),m(a,n,c),f&&f.m(a,c),m(a,o,c),w(s,a,c),l=!0},p(a,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:a}),!r&&c&1&&(r=!0,p.checked=a[0],G(()=>r=!1)),e.$set(p),a[0]?f?(f.p(a,c),c&1&&g(f,1)):(f=jr(a),f.c(),g(f,1),f.m(o.parentNode,o)):f&&(ge(),d(f,1,1,()=>{f=null}),de());const $={};c&1&&($.show=a[0]),s.$set($)},i(a){l||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),l=!1},d(a){a&&(h(n),h(o)),v(e,a),f&&f.d(a),v(s,a)}}}let qe="cycle_paths";function Nl(t){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[t.properties.kind],r={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[t.properties.direction],n=t.properties.width=="unknown"?"unknown":`${t.properties.width} meters`,o=`<h2>${e}</h2>`;return o+=`<p>Direction: <b>${r} ${t.properties.direction}</b></p>`,o+=`<p>Width: <b>${n}</b></p>`,o}function Ml(t){window.open(`http://openstreetmap.org/way/${t.detail.properties.osm_id}`,"_blank")}function Fl(t,e,r){let n;X(t,te,u=>r(3,n=u));let o=[["Separated tracks",U.cycle_paths.track],["Unprotected lanes",U.cycle_paths.lane],["Shared-use (segregated)",U.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",U.cycle_paths.shared_use_unsegregated]];pe(n,qe,`https://atip.uk/layers/v1/${qe}.pmtiles`),Ce(n,{id:qe,source:qe,sourceLayer:qe,color:Yr(["get","kind"],{track:U.cycle_paths.track,lane:U.cycle_paths.lane,shared_use_segregated:U.cycle_paths.shared_use_segregated,shared_use_unsegregated:U.cycle_paths.shared_use_unsegregated},"red"),width:bn,opacity:_e(.5,1)});let s=!1;function l(u){s=u,r(0,s)}return[s,o,l]}class Bl extends V{constructor(e){super(),K(this,e,Fl,xl,q,{})}}function jl(t){let e,r,n,o;return e=new $e({props:{color:t[3]}}),{c(){_(e.$$.fragment),r=T(),n=y(t[1])},m(s,l){w(e,s,l),m(s,r,l),m(s,n,l),o=!0},p(s,l){(!o||l&2)&&Se(n,s[1])},i(s){o||(g(e.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),o=!1},d(s){s&&(h(r),h(n)),v(e,s)}}}function Ul(t){let e;const r=t[6].default,n=Bn(r,t,t[8],null);return{c(){n&&n.c()},m(o,s){n&&n.m(o,s),e=!0},p(o,s){n&&n.p&&(!e||s&256)&&jn(n,r,o,o[8],e?Rn(r,o[8],s,null):Un(o[8]),null)},i(o){e||(g(n,o),e=!0)},o(o){d(n,o),e=!1},d(o){n&&n.d(o)}}}function Rl(t){let e,r,n;return r=new re({props:{$$slots:{default:[Ul]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&256&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function Hl(t){let e,r,n,o,s;function l(i){t[7](i)}let u={id:t[0],$$slots:{right:[Rl],default:[jl]},$$scope:{ctx:t}};return t[2]!==void 0&&(u.checked=t[2]),e=new Q({props:u}),H.push(()=>z(e,"checked",l)),o=new Y({props:{layer:t[0],tooltip:t[4],show:t[2],clickable:!1}}),{c(){_(e.$$.fragment),n=T(),_(o.$$.fragment)},m(i,f){w(e,i,f),m(i,n,f),w(o,i,f),s=!0},p(i,[f]){const a={};f&1&&(a.id=i[0]),f&258&&(a.$$scope={dirty:f,ctx:i}),!r&&f&4&&(r=!0,a.checked=i[2],G(()=>r=!1)),e.$set(a);const c={};f&1&&(c.layer=i[0]),f&4&&(c.show=i[2]),o.$set(c)},i(i){s||(g(e.$$.fragment,i),g(o.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(o.$$.fragment,i),s=!1},d(i){i&&h(n),v(e,i),v(o,i)}}}function Wl(t,e,r){let n;X(t,te,$=>r(9,n=$));let{$$slots:o={},$$scope:s}=e,{name:l}=e,{singularNoun:u}=e,{pluralNoun:i}=e,f=U[l];pe(n,l,`https://atip.uk/layers/v1/${l}.pmtiles`),ze(n,{id:l,source:l,sourceLayer:l,color:f,opacity:_e(1,.7)});let a=!1;function c($){return`<p>${$.properties.name??`Unnamed ${u}`}</p>`}function p($){a=$,r(2,a)}return t.$$set=$=>{"name"in $&&r(0,l=$.name),"singularNoun"in $&&r(5,u=$.singularNoun),"pluralNoun"in $&&r(1,i=$.pluralNoun),"$$scope"in $&&r(8,s=$.$$scope)},[l,i,a,f,c,u,o,p,s]}class sr extends V{constructor(e){super(),K(this,e,Wl,Hl,q,{name:0,singularNoun:5,pluralNoun:1})}}function zl(t){let e;return{c(){e=y("hospital")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Gl(t){let e;return{c(){e=y("Open Data Commons Open Database License")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Vl(t){let e,r,n,o,s,l,u,i,f;return n=new B({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[zl]},$$scope:{ctx:t}}}),i=new B({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Gl]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("This shows "),_(n.$$.fragment),o=y(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),s=T(),l=P("p"),u=y("License: "),_(i.$$.fragment)},m(a,c){m(a,e,c),D(e,r),w(n,e,null),D(e,o),m(a,s,c),m(a,l,c),D(l,u),w(i,l,null),f=!0},p(a,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:a}),n.$set(p);const $={};c&1&&($.$$scope={dirty:c,ctx:a}),i.$set($)},i(a){f||(g(n.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(n.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(h(e),h(s),h(l)),v(n),v(i)}}}function Kl(t){let e,r;return e=new sr({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Vl]},$$scope:{ctx:t}}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p(n,[o]){const s={};o&1&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}class ql extends V{constructor(e){super(),K(this,e,null,Kl,q,{})}}function Zl(t){let e;return{c(){e=y("Indices of Multiple Deprivation")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Xl(t){let e;return{c(){e=y(`DLUCH GIS
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Yl(t){let e;return{c(){e=y(`here
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Jl(t){let e;return{c(){e=y(`Open Government License
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Ql(t){let e,r,n,o,s,l,u,i,f,a,c,p;return n=new B({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Xl]},$$scope:{ctx:t}}}),s=new B({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Yl]},$$scope:{ctx:t}}}),a=new B({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Jl]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("The 2019 English IMD scores come from "),_(n.$$.fragment),o=y(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),_(s.$$.fragment),l=y("."),u=T(),i=P("p"),f=y("License: "),_(a.$$.fragment),c=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m($,b){m($,e,b),D(e,r),w(n,e,null),D(e,o),w(s,e,null),D(e,l),m($,u,b),m($,i,b),D(i,f),w(a,i,null),D(i,c),p=!0},p($,b){const C={};b&64&&(C.$$scope={dirty:b,ctx:$}),n.$set(C);const S={};b&64&&(S.$$scope={dirty:b,ctx:$}),s.$set(S);const L={};b&64&&(L.$$scope={dirty:b,ctx:$}),a.$set(L)},i($){p||(g(n.$$.fragment,$),g(s.$$.fragment,$),g(a.$$.fragment,$),p=!0)},o($){d(n.$$.fragment,$),d(s.$$.fragment,$),d(a.$$.fragment,$),p=!1},d($){$&&(h(e),h(u),h(i)),v(n),v(s),v(a)}}}function ea(t){let e,r,n;return r=new re({props:{$$slots:{default:[Ql]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&64&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function Rr(t){let e,r;return e=new pt({props:{colorScale:t[1],limits:["Least deprived","Most deprived"]}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p:ee,i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}function ta(t){let e,r,n,o,s,l;function u(a){t[3](a)}let i={id:Te,$$slots:{right:[ea],default:[Zl]},$$scope:{ctx:t}};t[0]!==void 0&&(i.checked=t[0]),e=new Q({props:i}),H.push(()=>z(e,"checked",u));let f=t[0]&&Rr(t);return s=new Y({props:{layer:Te,tooltip:ra,show:t[0],clickable:!1}}),{c(){_(e.$$.fragment),n=T(),f&&f.c(),o=T(),_(s.$$.fragment)},m(a,c){w(e,a,c),m(a,n,c),f&&f.m(a,c),m(a,o,c),w(s,a,c),l=!0},p(a,[c]){const p={};c&64&&(p.$$scope={dirty:c,ctx:a}),!r&&c&1&&(r=!0,p.checked=a[0],G(()=>r=!1)),e.$set(p),a[0]?f?(f.p(a,c),c&1&&g(f,1)):(f=Rr(a),f.c(),g(f,1),f.m(o.parentNode,o)):f&&(ge(),d(f,1,1,()=>{f=null}),de());const $={};c&1&&($.show=a[0]),s.$set($)},i(a){l||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),l=!1},d(a){a&&(h(n),h(o)),v(e,a),f&&f.d(a),v(s,a)}}}let Te="imd";function ra(t){return`<p>${t.properties.LSOA11CD} has an IMD score of <b>${t.properties.score}</b></p><p>Rank: <b>${t.properties.rank.toLocaleString()}</b> / 32,844 LSOAs</p>`}function na(t,e,r){let n;X(t,te,f=>r(2,n=f));let o=`${Te}-outline`,s=U.sequential_low_to_high,l=[0,2,4,6,8,10];pe(n,Te,`https://atip.uk/layers/v1/${Te}.pmtiles`),ze(n,{id:Te,source:Te,sourceLayer:Te,color:wt(["-",10,["get","decile"]],l,s),opacity:_e(.5,.7)}),Ce(n,{id:o,source:Te,sourceLayer:Te,color:"black",width:.5});let u=!1;function i(f){u=f,r(0,u)}return t.$$.update=()=>{t.$$.dirty&5&&n.getLayer(o)&&n.setLayoutProperty(o,"visibility",u?"visible":"none")},[u,s,n,i]}class oa extends V{constructor(e){super(),K(this,e,na,ta,q,{})}}function sa(t){let e,r,n;return e=new $e({props:{color:t[1]}}),{c(){_(e.$$.fragment),r=y(`
  Local Authority Districts`)},m(o,s){w(e,o,s),m(o,r,s),n=!0},p:ee,i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){o&&h(r),v(e,o)}}}function ia(t){let e;return{c(){e=y(`ONS Geography
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function la(t){let e;return{c(){e=y(`Open Government License
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function aa(t){let e,r,n,o,s,l,u,i,f,a;return n=new B({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[ia]},$$scope:{ctx:t}}}),i=new B({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[la]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("Data from "),_(n.$$.fragment),o=y(", as of May 2023."),s=T(),l=P("p"),u=y("License: "),_(i.$$.fragment),f=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(c,p){m(c,e,p),D(e,r),w(n,e,null),D(e,o),m(c,s,p),m(c,l,p),D(l,u),w(i,l,null),D(l,f),a=!0},p(c,p){const $={};p&32&&($.$$scope={dirty:p,ctx:c}),n.$set($);const b={};p&32&&(b.$$scope={dirty:p,ctx:c}),i.$set(b)},i(c){a||(g(n.$$.fragment,c),g(i.$$.fragment,c),a=!0)},o(c){d(n.$$.fragment,c),d(i.$$.fragment,c),a=!1},d(c){c&&(h(e),h(s),h(l)),v(n),v(i)}}}function ua(t){let e,r,n;return r=new re({props:{$$slots:{default:[aa]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&32&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function fa(t){let e,r,n,o,s;function l(i){t[3](i)}let u={id:He,$$slots:{right:[ua],default:[sa]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.checked=t[0]),e=new Q({props:u}),H.push(()=>z(e,"checked",l)),o=new Y({props:{layer:He,tooltip:ca,show:t[0],clickable:!0}}),o.$on("click",pa),{c(){_(e.$$.fragment),n=T(),_(o.$$.fragment)},m(i,f){w(e,i,f),m(i,n,f),w(o,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!r&&f&1&&(r=!0,a.checked=i[0],G(()=>r=!1)),e.$set(a);const c={};f&1&&(c.show=i[0]),o.$set(c)},i(i){s||(g(e.$$.fragment,i),g(o.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(o.$$.fragment,i),s=!1},d(i){i&&h(n),v(e,i),v(o,i)}}}let He="local_authority_districts";function ca(t){return`<p>${t.properties.name}</p>`}function pa(t){window.open(`https://www.ons.gov.uk/visualisations/areas/${t.detail.properties.LAD23CD}`,"_blank")}function $a(t,e,r){let n;X(t,te,i=>r(2,n=i));let o=U.local_authority_districts,s=`${He}-outline`;rr(n,He,`https://atip.uk/layers/v1/${He}.geojson`),ze(n,{id:He,source:He,color:o,opacity:_e(.5,0)}),Ce(n,{id:s,source:He,color:o,width:2.5});let l=!1;function u(i){l=i,r(0,l)}return t.$$.update=()=>{t.$$.dirty&5&&n.getLayer(s)&&n.setLayoutProperty(s,"visibility",l?"visible":"none")},[l,o,n,u]}class ma extends V{constructor(e){super(),K(this,e,$a,fa,q,{})}}function ha(t){let e,r,n;return e=new $e({props:{color:t[1]}}),{c(){_(e.$$.fragment),r=y(`
  Local Planning Authorities`)},m(o,s){w(e,o,s),m(o,r,s),n=!0},p:ee,i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){o&&h(r),v(e,o)}}}function ga(t){let e;return{c(){e=y(`local authority
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function da(t){let e;return{c(){e=y(`national park authorit
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function _a(t){let e;return{c(){e=y(`development corporation
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function wa(t){let e;return{c(){e=y("this map")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function va(t){let e;return{c(){e=y(`planning.data.gov.uk
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function ba(t){let e;return{c(){e=y(`Open Government License
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function ya(t){let e,r,n,o,s,l,u,i,f,a,c,p,$,b,C,S,L,O,N,k,E,M,x,A,F;return n=new B({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ga]},$$scope:{ctx:t}}}),s=new B({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[da]},$$scope:{ctx:t}}}),u=new B({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[_a]},$$scope:{ctx:t}}}),$=new B({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[wa]},$$scope:{ctx:t}}}),O=new B({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[va]},$$scope:{ctx:t}}}),x=new B({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ba]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("LPAs may be a "),_(n.$$.fragment),o=y(", "),_(s.$$.fragment),l=y("y, or "),_(u.$$.fragment),i=y("."),f=T(),a=P("p"),c=P("strong"),p=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),_($.$$.fragment),b=y(" to get more details."),C=T(),S=P("p"),L=y("Data from ONS Geography via "),_(O.$$.fragment),N=y(", as of November 2022."),k=T(),E=P("p"),M=y("License: "),_(x.$$.fragment),A=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(I,j){m(I,e,j),D(e,r),w(n,e,null),D(e,o),w(s,e,null),D(e,l),w(u,e,null),D(e,i),m(I,f,j),m(I,a,j),D(a,c),D(c,p),w($,c,null),D(c,b),m(I,C,j),m(I,S,j),D(S,L),w(O,S,null),D(S,N),m(I,k,j),m(I,E,j),D(E,M),w(x,E,null),D(E,A),F=!0},p(I,j){const J={};j&32&&(J.$$scope={dirty:j,ctx:I}),n.$set(J);const ne={};j&32&&(ne.$$scope={dirty:j,ctx:I}),s.$set(ne);const Le={};j&32&&(Le.$$scope={dirty:j,ctx:I}),u.$set(Le);const me={};j&32&&(me.$$scope={dirty:j,ctx:I}),$.$set(me);const oe={};j&32&&(oe.$$scope={dirty:j,ctx:I}),O.$set(oe);const Ge={};j&32&&(Ge.$$scope={dirty:j,ctx:I}),x.$set(Ge)},i(I){F||(g(n.$$.fragment,I),g(s.$$.fragment,I),g(u.$$.fragment,I),g($.$$.fragment,I),g(O.$$.fragment,I),g(x.$$.fragment,I),F=!0)},o(I){d(n.$$.fragment,I),d(s.$$.fragment,I),d(u.$$.fragment,I),d($.$$.fragment,I),d(O.$$.fragment,I),d(x.$$.fragment,I),F=!1},d(I){I&&(h(e),h(f),h(a),h(C),h(S),h(k),h(E)),v(n),v(s),v(u),v($),v(O),v(x)}}}function ka(t){let e,r,n;return r=new re({props:{$$slots:{default:[ya]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&32&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function Sa(t){let e,r,n,o,s;function l(i){t[3](i)}let u={id:Ae,$$slots:{right:[ka],default:[ha]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.checked=t[0]),e=new Q({props:u}),H.push(()=>z(e,"checked",l)),o=new Y({props:{layer:Ae,tooltip:Ca,show:t[0],clickable:!1}}),{c(){_(e.$$.fragment),n=T(),_(o.$$.fragment)},m(i,f){w(e,i,f),m(i,n,f),w(o,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!r&&f&1&&(r=!0,a.checked=i[0],G(()=>r=!1)),e.$set(a);const c={};f&1&&(c.show=i[0]),o.$set(c)},i(i){s||(g(e.$$.fragment,i),g(o.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(o.$$.fragment,i),s=!1},d(i){i&&h(n),v(e,i),v(o,i)}}}let Ae="local_planning_authorities";function Ca(t){return`<p>${t.properties.name}</p>`}function La(t,e,r){let n;X(t,te,i=>r(2,n=i));let o=U.local_planning_authorities,s=`${Ae}-outline`;pe(n,Ae,`https://atip.uk/layers/v1/${Ae}.pmtiles`),ze(n,{id:Ae,source:Ae,sourceLayer:Ae,color:o,opacity:_e(.5,0)}),Ce(n,{id:s,source:Ae,sourceLayer:Ae,color:o,width:2.5});let l=!1;function u(i){l=i,r(0,l)}return t.$$.update=()=>{t.$$.dirty&5&&n.getLayer(s)&&n.setLayoutProperty(s,"visibility",l?"visible":"none")},[l,o,n,u]}class Oa extends V{constructor(e){super(),K(this,e,La,Sa,q,{})}}function Ta(t){let e,r,n;return e=new $e({props:{color:t[1]}}),{c(){_(e.$$.fragment),r=y(`
  Major Road Network`)},m(o,s){w(e,o,s),m(o,r,s),n=!0},p:ee,i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){o&&h(r),v(e,o)}}}function Aa(t){let e;return{c(){e=y(`Major Road Network
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Da(t){let e;return{c(){e=y("Open Government License")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Ea(t){let e,r,n,o,s,l,u,i,f;return n=new B({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Aa]},$$scope:{ctx:t}}}),i=new B({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Da]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("Data from the "),_(n.$$.fragment),o=y(", as of September 2021."),s=T(),l=P("p"),u=y("License: "),_(i.$$.fragment)},m(a,c){m(a,e,c),D(e,r),w(n,e,null),D(e,o),m(a,s,c),m(a,l,c),D(l,u),w(i,l,null),f=!0},p(a,c){const p={};c&16&&(p.$$scope={dirty:c,ctx:a}),n.$set(p);const $={};c&16&&($.$$scope={dirty:c,ctx:a}),i.$set($)},i(a){f||(g(n.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(n.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(h(e),h(s),h(l)),v(n),v(i)}}}function Pa(t){let e,r,n;return r=new re({props:{$$slots:{default:[Ea]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&16&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function Ia(t){let e,r,n,o,s;function l(i){t[2](i)}let u={id:Ze,$$slots:{right:[Pa],default:[Ta]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.checked=t[0]),e=new Q({props:u}),H.push(()=>z(e,"checked",l)),o=new Y({props:{layer:Ze,tooltip:xa,show:t[0],clickable:!1}}),{c(){_(e.$$.fragment),n=T(),_(o.$$.fragment)},m(i,f){w(e,i,f),m(i,n,f),w(o,i,f),s=!0},p(i,[f]){const a={};f&16&&(a.$$scope={dirty:f,ctx:i}),!r&&f&1&&(r=!0,a.checked=i[0],G(()=>r=!1)),e.$set(a);const c={};f&1&&(c.show=i[0]),o.$set(c)},i(i){s||(g(e.$$.fragment,i),g(o.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(o.$$.fragment,i),s=!1},d(i){i&&h(n),v(e,i),v(o,i)}}}let Ze="mrn";function xa(t){return`<p>${t.properties.name??"Unknown MRN road"}</p>`}function Na(t,e,r){let n;X(t,te,u=>r(3,n=u));let o=U.mrn;pe(n,Ze,`https://atip.uk/layers/v1/${Ze}.pmtiles`),Ce(n,{id:Ze,source:Ze,sourceLayer:Ze,color:o,width:7,opacity:_e(.5,1)});let s=!1;function l(u){s=u,r(0,s)}return[s,o,l]}class Ma extends V{constructor(e){super(),K(this,e,Na,Ia,q,{})}}function Fa(t){let e,r,n;return e=new $e({props:{color:t[1]}}),{c(){_(e.$$.fragment),r=y(`
  Parliamentary constituencies`)},m(o,s){w(e,o,s),m(o,r,s),n=!0},p:ee,i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){o&&h(r),v(e,o)}}}function Ba(t){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function ja(t){let e;return{c(){e=y("Open Government License")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Ua(t){let e,r,n,o,s,l,u,i,f;return n=new B({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Ba]},$$scope:{ctx:t}}}),i=new B({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ja]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("Data from "),_(n.$$.fragment),o=y(", as of May 2023."),s=T(),l=P("p"),u=y("License: "),_(i.$$.fragment)},m(a,c){m(a,e,c),D(e,r),w(n,e,null),D(e,o),m(a,s,c),m(a,l,c),D(l,u),w(i,l,null),f=!0},p(a,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:a}),n.$set(p);const $={};c&32&&($.$$scope={dirty:c,ctx:a}),i.$set($)},i(a){f||(g(n.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(n.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(h(e),h(s),h(l)),v(n),v(i)}}}function Ra(t){let e,r,n;return r=new re({props:{$$slots:{default:[Ua]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&32&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function Ha(t){let e,r,n,o,s;function l(i){t[3](i)}let u={id:De,$$slots:{right:[Ra],default:[Fa]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.checked=t[0]),e=new Q({props:u}),H.push(()=>z(e,"checked",l)),o=new Y({props:{layer:De,tooltip:Wa,show:t[0],clickable:!0}}),o.$on("click",za),{c(){_(e.$$.fragment),n=T(),_(o.$$.fragment)},m(i,f){w(e,i,f),m(i,n,f),w(o,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!r&&f&1&&(r=!0,a.checked=i[0],G(()=>r=!1)),e.$set(a);const c={};f&1&&(c.show=i[0]),o.$set(c)},i(i){s||(g(e.$$.fragment,i),g(o.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(o.$$.fragment,i),s=!1},d(i){i&&h(n),v(e,i),v(o,i)}}}let De="parliamentary_constituencies";function Wa(t){return`<p>${t.properties.Name}</p>`}function za(t){let e=t.detail.properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ga(t,e,r){let n;X(t,te,i=>r(2,n=i));let o=U.parliamentary_constituencies,s=`${De}-outline`;pe(n,De,`https://atip.uk/layers/v1/${De}.pmtiles`),ze(n,{id:De,source:De,sourceLayer:De,color:o,opacity:_e(.5,0)}),Ce(n,{id:s,source:De,sourceLayer:De,color:o,width:5});let l=!1;function u(i){l=i,r(0,l)}return t.$$.update=()=>{t.$$.dirty&5&&n.getLayer(s)&&n.setLayoutProperty(s,"visibility",l?"visible":"none")},[l,o,n,u]}class Va extends V{constructor(e){super(),K(this,e,Ga,Ha,q,{})}}function Ka(t){let e;return{c(){e=y("Propensity to Cycle Tool")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function qa(t){let e;return{c(){e=y("the PCT website")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Za(t){let e;return{c(){e=y("2017 journal article")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Xa(t){let e,r,n,o,s,l,u,i,f,a,c;return u=new B({props:{href:"https://www.pct.bike",$$slots:{default:[qa]},$$scope:{ctx:t}}}),f=new B({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Za]},$$scope:{ctx:t}}}),{c(){e=P("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,r=T(),n=P("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,o=T(),s=P("p"),l=y("See "),_(u.$$.fragment),i=y(" and "),_(f.$$.fragment),a=y(" for details on methodology and data sources.")},m(p,$){m(p,e,$),m(p,r,$),m(p,n,$),m(p,o,$),m(p,s,$),D(s,l),w(u,s,null),D(s,i),w(f,s,null),D(s,a),c=!0},p(p,$){const b={};$&2048&&(b.$$scope={dirty:$,ctx:p}),u.$set(b);const C={};$&2048&&(C.$$scope={dirty:$,ctx:p}),f.$set(C)},i(p){c||(g(u.$$.fragment,p),g(f.$$.fragment,p),c=!0)},o(p){d(u.$$.fragment,p),d(f.$$.fragment,p),c=!1},d(p){p&&(h(e),h(r),h(n),h(o),h(s)),v(u),v(f)}}}function Ya(t){let e,r,n;return r=new re({props:{$$slots:{default:[Xa]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&2048&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function Hr(t){let e,r,n,o,s,l,u,i;e=new pt({props:{colorScale:t[3],limits:t[4]}});function f($){t[8]($)}let a={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};t[0]!==void 0&&(a.value=t[0]),n=new Hn({props:a}),H.push(()=>z(n,"value",f)),n.$on("change",t[6]);function c($){t[9]($)}let p={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return t[1]!==void 0&&(p.value=t[1]),l=new Et({props:p}),H.push(()=>z(l,"value",c)),l.$on("change",t[6]),{c(){_(e.$$.fragment),r=T(),_(n.$$.fragment),s=T(),_(l.$$.fragment)},m($,b){w(e,$,b),m($,r,b),w(n,$,b),m($,s,b),w(l,$,b),i=!0},p($,b){const C={};!o&&b&1&&(o=!0,C.value=$[0],G(()=>o=!1)),n.$set(C);const S={};!u&&b&2&&(u=!0,S.value=$[1],G(()=>u=!1)),l.$set(S)},i($){i||(g(e.$$.fragment,$),g(n.$$.fragment,$),g(l.$$.fragment,$),i=!0)},o($){d(e.$$.fragment,$),d(n.$$.fragment,$),d(l.$$.fragment,$),i=!1},d($){$&&(h(r),h(s)),v(e,$),v(n,$),v(l,$)}}}function Ja(t){let e,r,n,o,s,l,u,i;function f(p){t[7](p)}let a={id:Qe,$$slots:{right:[Ya],default:[Ka]},$$scope:{ctx:t}};t[2]!==void 0&&(a.checked=t[2]),e=new Q({props:a}),H.push(()=>z(e,"checked",f));let c=t[2]&&Hr(t);return s=new Y({props:{layer:Qe,tooltip:t[5],show:t[2]&&t[0]==Qe,clickable:!1}}),u=new Y({props:{layer:At,tooltip:t[5],show:t[2]&&t[0]==At,clickable:!1}}),{c(){_(e.$$.fragment),n=T(),c&&c.c(),o=T(),_(s.$$.fragment),l=T(),_(u.$$.fragment)},m(p,$){w(e,p,$),m(p,n,$),c&&c.m(p,$),m(p,o,$),w(s,p,$),m(p,l,$),w(u,p,$),i=!0},p(p,[$]){const b={};$&2048&&(b.$$scope={dirty:$,ctx:p}),!r&&$&4&&(r=!0,b.checked=p[2],G(()=>r=!1)),e.$set(b),p[2]?c?(c.p(p,$),$&4&&g(c,1)):(c=Hr(p),c.c(),g(c,1),c.m(o.parentNode,o)):c&&(ge(),d(c,1,1,()=>{c=null}),de());const C={};$&5&&(C.show=p[2]&&p[0]==Qe),s.$set(C);const S={};$&5&&(S.show=p[2]&&p[0]==At),u.$set(S)},i(p){i||(g(e.$$.fragment,p),g(c),g(s.$$.fragment,p),g(u.$$.fragment,p),i=!0)},o(p){d(e.$$.fragment,p),d(c),d(s.$$.fragment,p),d(u.$$.fragment,p),i=!1},d(p){p&&(h(n),h(o),h(l)),v(e,p),c&&c.d(p),v(s,p),v(u,p)}}}let Qe="pct_commute",At="pct_school";function Qa(t,e,r){let n;X(t,te,b=>r(10,n=b));let o=U.sequential_low_to_high,s=[0,50,100,500,1e3,2e3],l=Qe,u="baseline";for(let b of[Qe,At])pe(n,b,`https://atip.uk/layers/v1/${b}.pmtiles`),Ce(n,{id:b,source:b,sourceLayer:b,color:wt(["get",u],s,o),width:bn,opacity:_e(.5,1)});let i=!1;function f(b){let C=b.properties.baseline,S=b.properties.gov_target,L=b.properties.go_dutch,O=`<h2>Trip purpose: ${l==Qe?"commuting":"school"}</h2>`;if(O+=`<p>Baseline (2011): <b>${C.toLocaleString()}</b></p>`,C==0)O+=`<p>Government target (2025): <b>${S.toLocaleString()}</b></p>`,O+=`<p>Go Dutch: <b>${L.toLocaleString()}</b></p>`;else{let N=(S/C).toFixed(1),k=(L/C).toFixed(1);O+=`<p>Government target (2025): ${S.toLocaleString()} (<b>${N}x</b> of baseline)</p>`,O+=`<p>Go Dutch: ${L.toLocaleString()} (<b>${k}x</b> of baseline)</p>`}return O}function a(){n.setPaintProperty(l,"line-color",wt(["get",u],s,o))}function c(b){i=b,r(2,i)}function p(b){l=b,r(0,l)}function $(b){u=b,r(1,u)}return[l,u,i,o,s,f,a,c,p,$]}class eu extends V{constructor(e){super(),K(this,e,Qa,Ja,q,{})}}function tu(t){let e,r,n;return e=new $e({props:{color:t[1]}}),{c(){_(e.$$.fragment),r=y(`
  Railway Stations`)},m(o,s){w(e,o,s),m(o,r,s),n=!0},p:ee,i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){o&&h(r),v(e,o)}}}function ru(t){let e;return{c(){e=y("railway station")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function nu(t){let e;return{c(){e=y("Open Data Commons Open Database License")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function ou(t){let e,r,n,o,s,l,u,i,f;return n=new B({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[ru]},$$scope:{ctx:t}}}),i=new B({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[nu]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("This shows "),_(n.$$.fragment),o=y(" data from OpenStreetMap (as of 9 August 2023)."),s=T(),l=P("p"),u=y("License: "),_(i.$$.fragment)},m(a,c){m(a,e,c),D(e,r),w(n,e,null),D(e,o),m(a,s,c),m(a,l,c),D(l,u),w(i,l,null),f=!0},p(a,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:a}),n.$set(p);const $={};c&32&&($.$$scope={dirty:c,ctx:a}),i.$set($)},i(a){f||(g(n.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(n.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(h(e),h(s),h(l)),v(n),v(i)}}}function su(t){let e,r,n;return r=new re({props:{$$slots:{default:[ou]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&32&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function iu(t){let e,r,n,o,s;function l(i){t[2](i)}let u={id:Xe,$$slots:{right:[su],default:[tu]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.checked=t[0]),e=new Q({props:u}),H.push(()=>z(e,"checked",l)),o=new Y({props:{layer:Xe,tooltip:lu,show:t[0],clickable:!1}}),{c(){_(e.$$.fragment),n=T(),_(o.$$.fragment)},m(i,f){w(e,i,f),m(i,n,f),w(o,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!r&&f&1&&(r=!0,a.checked=i[0],G(()=>r=!1)),e.$set(a);const c={};f&1&&(c.show=i[0]),o.$set(c)},i(i){s||(g(e.$$.fragment,i),g(o.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(o.$$.fragment,i),s=!1},d(i){i&&h(n),v(e,i),v(o,i)}}}const Xe="railway_stations";function lu(t){return`<p>${t.properties.name??"Unnamed railway station"}</p>`}function au(t,e,r){let n;X(t,te,i=>r(3,n=i));const o=`https://atip.uk/layers/v1/${Xe}.geojson`;let s=!1;rr(n,Xe,o);let l=U[Xe];ct(n,{id:Xe,source:Xe,color:l,radius:Vn/2});function u(i){s=i,r(0,s)}return[s,l,u]}class uu extends V{constructor(e){super(),K(this,e,au,iu,q,{})}}function fu(t){let e;return{c(){e=y("primary and secondary schools")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function cu(t){let e;return{c(){e=y("Open Data Commons Open Database License")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function pu(t){let e,r,n,o,s,l,u,i,f;return n=new B({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[fu]},$$scope:{ctx:t}}}),i=new B({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[cu]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("This shows "),_(n.$$.fragment),o=y(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),s=T(),l=P("p"),u=y("License: "),_(i.$$.fragment)},m(a,c){m(a,e,c),D(e,r),w(n,e,null),D(e,o),m(a,s,c),m(a,l,c),D(l,u),w(i,l,null),f=!0},p(a,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:a}),n.$set(p);const $={};c&1&&($.$$scope={dirty:c,ctx:a}),i.$set($)},i(a){f||(g(n.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(n.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(h(e),h(s),h(l)),v(n),v(i)}}}function $u(t){let e,r;return e=new sr({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[pu]},$$scope:{ctx:t}}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p(n,[o]){const s={};o&1&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}class mu extends V{constructor(e){super(),K(this,e,null,$u,q,{})}}function hu(t){let e;return{c(){e=y("sports pitches")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function gu(t){let e;return{c(){e=y("sports centres")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function du(t){let e;return{c(){e=y("Open Data Commons Open Database License")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function _u(t){let e,r,n,o,s,l,u,i,f,a,c;return n=new B({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[hu]},$$scope:{ctx:t}}}),s=new B({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[gu]},$$scope:{ctx:t}}}),a=new B({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[du]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("This shows "),_(n.$$.fragment),o=y(" and "),_(s.$$.fragment),l=y(" data from OpenStreetMap (as of 9 August 2023)."),u=T(),i=P("p"),f=y("License: "),_(a.$$.fragment)},m(p,$){m(p,e,$),D(e,r),w(n,e,null),D(e,o),w(s,e,null),D(e,l),m(p,u,$),m(p,i,$),D(i,f),w(a,i,null),c=!0},p(p,$){const b={};$&1&&(b.$$scope={dirty:$,ctx:p}),n.$set(b);const C={};$&1&&(C.$$scope={dirty:$,ctx:p}),s.$set(C);const S={};$&1&&(S.$$scope={dirty:$,ctx:p}),a.$set(S)},i(p){c||(g(n.$$.fragment,p),g(s.$$.fragment,p),g(a.$$.fragment,p),c=!0)},o(p){d(n.$$.fragment,p),d(s.$$.fragment,p),d(a.$$.fragment,p),c=!1},d(p){p&&(h(e),h(u),h(i)),v(n),v(s),v(a)}}}function wu(t){let e,r;return e=new sr({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[_u]},$$scope:{ctx:t}}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p(n,[o]){const s={};o&1&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}class vu extends V{constructor(e){super(),K(this,e,null,wu,q,{})}}function bu(t){let e;return{c(){e=y("Vehicle counts")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function yu(t){let e;return{c(){e=y(`DfT road statistics
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function ku(t){let e;return{c(){e=y("methodology")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Su(t){let e;return{c(){e=y("Open Government License")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Cu(t){let e,r,n,o,s,l,u,i,f,a,c,p,$;return n=new B({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[yu]},$$scope:{ctx:t}}}),s=new B({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[ku]},$$scope:{ctx:t}}}),p=new B({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Su]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("2022 AADF (annual average daily flow) data from "),_(n.$$.fragment),o=y(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),_(s.$$.fragment),l=y(" for details and caveats about the measurements."),u=T(),i=P("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,f=T(),a=P("p"),c=y("License: "),_(p.$$.fragment)},m(b,C){m(b,e,C),D(e,r),w(n,e,null),D(e,o),w(s,e,null),D(e,l),m(b,u,C),m(b,i,C),m(b,f,C),m(b,a,C),D(a,c),w(p,a,null),$=!0},p(b,C){const S={};C&64&&(S.$$scope={dirty:C,ctx:b}),n.$set(S);const L={};C&64&&(L.$$scope={dirty:C,ctx:b}),s.$set(L);const O={};C&64&&(O.$$scope={dirty:C,ctx:b}),p.$set(O)},i(b){$||(g(n.$$.fragment,b),g(s.$$.fragment,b),g(p.$$.fragment,b),$=!0)},o(b){d(n.$$.fragment,b),d(s.$$.fragment,b),d(p.$$.fragment,b),$=!1},d(b){b&&(h(e),h(u),h(i),h(f),h(a)),v(n),v(s),v(p)}}}function Lu(t){let e,r,n;return r=new re({props:{$$slots:{default:[Cu]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&64&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function Wr(t){let e,r;return e=new pt({props:{colorScale:t[1],limits:t[2]}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p:ee,i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}function Ou(t){let e,r,n,o,s,l;function u(a){t[3](a)}let i={id:Ye,$$slots:{right:[Lu],default:[bu]},$$scope:{ctx:t}};t[0]!==void 0&&(i.checked=t[0]),e=new Q({props:i}),H.push(()=>z(e,"checked",u));let f=t[0]&&Wr(t);return s=new Y({props:{layer:Ye,tooltip:Tu,show:t[0],clickable:!0}}),s.$on("click",Au),{c(){_(e.$$.fragment),n=T(),f&&f.c(),o=T(),_(s.$$.fragment)},m(a,c){w(e,a,c),m(a,n,c),f&&f.m(a,c),m(a,o,c),w(s,a,c),l=!0},p(a,[c]){const p={};c&64&&(p.$$scope={dirty:c,ctx:a}),!r&&c&1&&(r=!0,p.checked=a[0],G(()=>r=!1)),e.$set(p),a[0]?f?(f.p(a,c),c&1&&g(f,1)):(f=Wr(a),f.c(),g(f,1),f.m(o.parentNode,o)):f&&(ge(),d(f,1,1,()=>{f=null}),de());const $={};c&1&&($.show=a[0]),s.$set($)},i(a){l||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),l=!1},d(a){a&&(h(n),h(o)),v(e,a),f&&f.d(a),v(s,a)}}}let Ye="vehicle_counts";function Tu(t){let e=`<h2>${t.properties.location}</h2>`;return e+=`<p>Total motor vehicles (2022 AADF): <b>${t.properties.motor_vehicles_2022.toLocaleString()}</b></p>`,e+=`<p>Total pedal cycles (2022 AADF): <b>${t.properties.pedal_cycles_2022.toLocaleString()}</b></p>`,e+=`<p>Count method: <b>${t.properties.method}</b></p>`,e}function Au(t){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${t.detail.properties.count_point}`,"_blank")}function Du(t,e,r){let n;X(t,te,f=>r(4,n=f));let o=U.sequential_low_to_high,s=[0,4e4,8e4,12e4,16e4,205e3],l=["","40k","80k","120k","160k",""];pe(n,Ye,`https://atip.uk/layers/v1/${Ye}.pmtiles`),ct(n,{id:Ye,source:Ye,sourceLayer:Ye,color:wt(["get","motor_vehicles_2022"],s,o),opacity:.9,radius:["interpolate",["linear"],["zoom"],1,2,8,3,13,15],strokeColor:"black",strokeWidth:.1});let u=!1;function i(f){u=f,r(0,u)}return[u,o,l,i]}class Eu extends V{constructor(e){super(),K(this,e,Du,Ou,q,{})}}function Pu(t){let e,r,n;return e=new $e({props:{color:t[1]}}),{c(){_(e.$$.fragment),r=y(`
  Wards`)},m(o,s){w(e,o,s),m(o,r,s),n=!0},p:ee,i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){o&&h(r),v(e,o)}}}function Iu(t){let e;return{c(){e=y(`ONS Geography
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function xu(t){let e;return{c(){e=y(`Open Government License
        `)},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function Nu(t){let e,r,n,o,s,l,u,i,f,a;return n=new B({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Iu]},$$scope:{ctx:t}}}),i=new B({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[xu]},$$scope:{ctx:t}}}),{c(){e=P("p"),r=y("Data from "),_(n.$$.fragment),o=y(", as of May 2023."),s=T(),l=P("p"),u=y("License: "),_(i.$$.fragment),f=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(c,p){m(c,e,p),D(e,r),w(n,e,null),D(e,o),m(c,s,p),m(c,l,p),D(l,u),w(i,l,null),D(l,f),a=!0},p(c,p){const $={};p&32&&($.$$scope={dirty:p,ctx:c}),n.$set($);const b={};p&32&&(b.$$scope={dirty:p,ctx:c}),i.$set(b)},i(c){a||(g(n.$$.fragment,c),g(i.$$.fragment,c),a=!0)},o(c){d(n.$$.fragment,c),d(i.$$.fragment,c),a=!1},d(c){c&&(h(e),h(s),h(l)),v(n),v(i)}}}function Mu(t){let e,r,n;return r=new re({props:{$$slots:{default:[Nu]},$$scope:{ctx:t}}}),{c(){e=P("span"),_(r.$$.fragment),W(e,"slot","right")},m(o,s){m(o,e,s),w(r,e,null),n=!0},p(o,s){const l={};s&32&&(l.$$scope={dirty:s,ctx:o}),r.$set(l)},i(o){n||(g(r.$$.fragment,o),n=!0)},o(o){d(r.$$.fragment,o),n=!1},d(o){o&&h(e),v(r)}}}function Fu(t){let e,r,n,o,s;function l(i){t[3](i)}let u={id:Ee,$$slots:{right:[Mu],default:[Pu]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.checked=t[0]),e=new Q({props:u}),H.push(()=>z(e,"checked",l)),o=new Y({props:{layer:Ee,tooltip:Bu,show:t[0],clickable:!0}}),o.$on("click",ju),{c(){_(e.$$.fragment),n=T(),_(o.$$.fragment)},m(i,f){w(e,i,f),m(i,n,f),w(o,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!r&&f&1&&(r=!0,a.checked=i[0],G(()=>r=!1)),e.$set(a);const c={};f&1&&(c.show=i[0]),o.$set(c)},i(i){s||(g(e.$$.fragment,i),g(o.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(o.$$.fragment,i),s=!1},d(i){i&&h(n),v(e,i),v(o,i)}}}let Ee="wards";function Bu(t){return`<p>${t.properties.name}</p>`}function ju(t){let e=encodeURIComponent(t.detail.properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Uu(t,e,r){let n;X(t,te,i=>r(2,n=i));let o=U.wards,s=`${Ee}-outline`;pe(n,Ee,`https://atip.uk/layers/v1/${Ee}.pmtiles`),ze(n,{id:Ee,source:Ee,sourceLayer:Ee,color:o,opacity:_e(.5,0)}),Ce(n,{id:s,source:Ee,sourceLayer:Ee,color:o,width:2.5});let l=!1;function u(i){l=i,r(0,l)}return t.$$.update=()=>{t.$$.dirty&5&&n.getLayer(s)&&n.setLayoutProperty(s,"visibility",l?"visible":"none")},[l,o,n,u]}class Ru extends V{constructor(e){super(),K(this,e,Uu,Fu,q,{})}}function Hu(t){let e,r,n,o,s,l,u,i;return e=new mu({}),n=new ql({}),s=new vu({}),u=new uu({}),{c(){_(e.$$.fragment),r=T(),_(n.$$.fragment),o=T(),_(s.$$.fragment),l=T(),_(u.$$.fragment)},m(f,a){w(e,f,a),m(f,r,a),w(n,f,a),m(f,o,a),w(s,f,a),m(f,l,a),w(u,f,a),i=!0},i(f){i||(g(e.$$.fragment,f),g(n.$$.fragment,f),g(s.$$.fragment,f),g(u.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),d(s.$$.fragment,f),d(u.$$.fragment,f),i=!1},d(f){f&&(h(r),h(o),h(l)),v(e,f),v(n,f),v(s,f),v(u,f)}}}function Wu(t){let e,r;return e=new yt({props:{small:!0,$$slots:{default:[Hu]},$$scope:{ctx:t}}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p(n,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}function zu(t){let e,r,n,o,s,l,u,i,f,a;return e=new Bl({}),n=new Ma({}),s=new ki({}),u=new Al({}),f=new vl({}),{c(){_(e.$$.fragment),r=T(),_(n.$$.fragment),o=T(),_(s.$$.fragment),l=T(),_(u.$$.fragment),i=T(),_(f.$$.fragment)},m(c,p){w(e,c,p),m(c,r,p),w(n,c,p),m(c,o,p),w(s,c,p),m(c,l,p),w(u,c,p),m(c,i,p),w(f,c,p),a=!0},i(c){a||(g(e.$$.fragment,c),g(n.$$.fragment,c),g(s.$$.fragment,c),g(u.$$.fragment,c),g(f.$$.fragment,c),a=!0)},o(c){d(e.$$.fragment,c),d(n.$$.fragment,c),d(s.$$.fragment,c),d(u.$$.fragment,c),d(f.$$.fragment,c),a=!1},d(c){c&&(h(r),h(o),h(l),h(i)),v(e,c),v(n,c),v(s,c),v(u,c),v(f,c)}}}function Gu(t){let e,r;return e=new yt({props:{small:!0,$$slots:{default:[zu]},$$scope:{ctx:t}}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p(n,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}function Vu(t){let e,r,n,o,s,l,u,i,f,a;return e=new Va({}),n=new Ru({}),s=new nl({}),u=new ma({}),f=new Oa({}),{c(){_(e.$$.fragment),r=T(),_(n.$$.fragment),o=T(),_(s.$$.fragment),l=T(),_(u.$$.fragment),i=T(),_(f.$$.fragment)},m(c,p){w(e,c,p),m(c,r,p),w(n,c,p),m(c,o,p),w(s,c,p),m(c,l,p),w(u,c,p),m(c,i,p),w(f,c,p),a=!0},i(c){a||(g(e.$$.fragment,c),g(n.$$.fragment,c),g(s.$$.fragment,c),g(u.$$.fragment,c),g(f.$$.fragment,c),a=!0)},o(c){d(e.$$.fragment,c),d(n.$$.fragment,c),d(s.$$.fragment,c),d(u.$$.fragment,c),d(f.$$.fragment,c),a=!1},d(c){c&&(h(r),h(o),h(l),h(i)),v(e,c),v(n,c),v(s,c),v(u,c),v(f,c)}}}function Ku(t){let e,r;return e=new yt({props:{small:!0,$$slots:{default:[Vu]},$$scope:{ctx:t}}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p(n,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}function qu(t){let e,r,n,o;return e=new Ki({}),n=new oa({}),{c(){_(e.$$.fragment),r=T(),_(n.$$.fragment)},m(s,l){w(e,s,l),m(s,r,l),w(n,s,l),o=!0},i(s){o||(g(e.$$.fragment,s),g(n.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(n.$$.fragment,s),o=!1},d(s){s&&h(r),v(e,s),v(n,s)}}}function Zu(t){let e,r,n,o;return e=new Eu({}),n=new eu({}),{c(){_(e.$$.fragment),r=T(),_(n.$$.fragment)},m(s,l){w(e,s,l),m(s,r,l),w(n,s,l),o=!0},i(s){o||(g(e.$$.fragment,s),g(n.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(n.$$.fragment,s),o=!1},d(s){s&&h(r),v(e,s),v(n,s)}}}function Xu(t){let e,r,n,o,s,l,u,i,f,a,c,p,$,b,C,S,L;e=new cl({}),n=new Me({props:{label:"Trip generators",$$slots:{default:[Wu]},$$scope:{ctx:t}}}),s=new Me({props:{label:"Existing infrastructure",$$slots:{default:[Gu]},$$scope:{ctx:t}}}),u=new Me({props:{label:"Boundaries",$$slots:{default:[Ku]},$$scope:{ctx:t}}}),f=new Me({props:{label:"Census",$$slots:{default:[qu]},$$scope:{ctx:t}}}),c=new Me({props:{label:"Other",$$slots:{default:[Zu]},$$scope:{ctx:t}}});function O(k){t[5](k)}let N={displayEnableButton:!0};return t[2]!==void 0&&(N.isInactive=t[2]),$=new Kn({props:N}),t[4]($),H.push(()=>z($,"isInactive",O)),S=new Yn({props:{style:t[0]}}),{c(){_(e.$$.fragment),r=T(),_(n.$$.fragment),o=T(),_(s.$$.fragment),l=T(),_(u.$$.fragment),i=T(),_(f.$$.fragment),a=T(),_(c.$$.fragment),p=T(),_($.$$.fragment),C=T(),_(S.$$.fragment)},m(k,E){w(e,k,E),m(k,r,E),w(n,k,E),m(k,o,E),w(s,k,E),m(k,l,E),w(u,k,E),m(k,i,E),w(f,k,E),m(k,a,E),w(c,k,E),m(k,p,E),w($,k,E),m(k,C,E),w(S,k,E),L=!0},p(k,E){const M={};E&64&&(M.$$scope={dirty:E,ctx:k}),n.$set(M);const x={};E&64&&(x.$$scope={dirty:E,ctx:k}),s.$set(x);const A={};E&64&&(A.$$scope={dirty:E,ctx:k}),u.$set(A);const F={};E&64&&(F.$$scope={dirty:E,ctx:k}),f.$set(F);const I={};E&64&&(I.$$scope={dirty:E,ctx:k}),c.$set(I);const j={};!b&&E&4&&(b=!0,j.isInactive=k[2],G(()=>b=!1)),$.$set(j);const J={};E&1&&(J.style=k[0]),S.$set(J)},i(k){L||(g(e.$$.fragment,k),g(n.$$.fragment,k),g(s.$$.fragment,k),g(u.$$.fragment,k),g(f.$$.fragment,k),g(c.$$.fragment,k),g($.$$.fragment,k),g(S.$$.fragment,k),L=!0)},o(k){d(e.$$.fragment,k),d(n.$$.fragment,k),d(s.$$.fragment,k),d(u.$$.fragment,k),d(f.$$.fragment,k),d(c.$$.fragment,k),d($.$$.fragment,k),d(S.$$.fragment,k),L=!1},d(k){k&&(h(r),h(o),h(l),h(i),h(a),h(p),h(C)),v(e,k),v(n,k),v(s,k),v(u,k),v(f,k),v(c,k),t[4](null),v($,k),v(S,k)}}}function Yu(t){let e,r,n,o;return e=new Me({props:{label:"Layers",open:!0,$$slots:{default:[Xu]},$$scope:{ctx:t}}}),{c(){_(e.$$.fragment)},m(s,l){w(e,s,l),r=!0,n||(o=tr(window,"keydown",t[3]),n=!0)},p(s,[l]){const u={};l&71&&(u.$$scope={dirty:l,ctx:s}),e.$set(u)},i(s){r||(g(e.$$.fragment,s),r=!0)},o(s){d(e.$$.fragment,s),r=!1},d(s){v(e,s),n=!1,o()}}}function Ju(t,e,r){let n;X(t,cr,f=>r(2,n=f));let{style:o}=e,s;function l(f){!n&&f.key=="Escape"&&(s.disableStreetView(),f.preventDefault())}function u(f){H[f?"unshift":"push"](()=>{s=f,r(1,s)})}function i(f){n=f,cr.set(n)}return t.$$set=f=>{"style"in f&&r(0,o=f.style)},[o,s,n,l,u,i]}class Qu extends V{constructor(e){super(),K(this,e,Ju,Yu,q,{style:0})}}/*! js-cookie v3.0.5 | MIT */function Ot(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}var ef={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Yt(t,e){function r(o,s,l){if(!(typeof document>"u")){l=Ot({},e,l),typeof l.expires=="number"&&(l.expires=new Date(Date.now()+l.expires*864e5)),l.expires&&(l.expires=l.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var i in l)l[i]&&(u+="; "+i,l[i]!==!0&&(u+="="+l[i].split(";")[0]));return document.cookie=o+"="+t.write(s,o)+u}}function n(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var s=document.cookie?document.cookie.split("; "):[],l={},u=0;u<s.length;u++){var i=s[u].split("="),f=i.slice(1).join("=");try{var a=decodeURIComponent(i[0]);if(l[a]=t.read(f,a),o===a)break}catch{}}return o?l[o]:l}}return Object.create({set:r,get:n,remove:function(o,s){r(o,"",Ot({},s,{expires:-1}))},withAttributes:function(o){return Yt(this.converter,Ot({},this.attributes,o))},withConverter:function(o){return Yt(Ot({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}Yt(ef,{path:"/"});function tf(t){let e;return{c(){e=y("Show on map")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function rf(t){let e;return{c(){e=y("Edit scheme locally")},m(r,n){m(r,e,n)},d(r){r&&h(e)}}}function nf(t){let e,r,n=t[0].authority_or_region+"",o,s,l,u,i=t[0].capital_scheme_id+"",f,a,c,p,$=t[0].funding_programme+"",b,C,S,L,O,N,k;return L=new Wt({props:{$$slots:{default:[tf]},$$scope:{ctx:t}}}),L.$on("click",t[3]),N=new Wt({props:{disabled:t[1],title:t[2],$$slots:{default:[rf]},$$scope:{ctx:t}}}),N.$on("click",t[4]),{c(){e=P("p"),r=y("Authority or region: "),o=y(n),s=T(),l=P("p"),u=y("Capital scheme ID: "),f=y(i),a=T(),c=P("p"),p=y("Funding programme: "),b=y($),C=T(),S=P("div"),_(L.$$.fragment),O=T(),_(N.$$.fragment),W(S,"class","govuk-button-group")},m(E,M){m(E,e,M),D(e,r),D(e,o),m(E,s,M),m(E,l,M),D(l,u),D(l,f),m(E,a,M),m(E,c,M),D(c,p),D(c,b),m(E,C,M),m(E,S,M),w(L,S,null),D(S,O),w(N,S,null),k=!0},p(E,M){(!k||M&1)&&n!==(n=E[0].authority_or_region+"")&&Se(o,n),(!k||M&1)&&i!==(i=E[0].capital_scheme_id+"")&&Se(f,i),(!k||M&1)&&$!==($=E[0].funding_programme+"")&&Se(b,$);const x={};M&256&&(x.$$scope={dirty:M,ctx:E}),L.$set(x);const A={};M&256&&(A.$$scope={dirty:M,ctx:E}),N.$set(A)},i(E){k||(g(L.$$.fragment,E),g(N.$$.fragment,E),k=!0)},o(E){d(L.$$.fragment,E),d(N.$$.fragment,E),k=!1},d(E){E&&(h(e),h(s),h(l),h(a),h(c),h(C),h(S)),v(L),v(N)}}}function of(t){let e,r;return e=new Me({props:{label:`${t[0].scheme_reference}: ${t[0].num_features} features`,$$slots:{default:[nf]},$$scope:{ctx:t}}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p(n,[o]){const s={};o&1&&(s.label=`${n[0].scheme_reference}: ${n[0].num_features} features`),o&257&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}function sf(t,e,r){let n,o;X(t,ft,c=>r(6,n=c)),X(t,te,c=>r(7,o=c));let{scheme:s}=e,{authorityNames:l}=e,u=!l.has(s.authority_or_region),i=u?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function f(){let c={type:"FeatureCollection",features:n.features.filter(p=>p.properties.scheme_reference==s.scheme_reference)};o==null||o.fitBounds(Wn(c),{padding:20,animate:!1})}function a(){let c={type:"FeatureCollection",features:n.features.filter($=>$.properties.scheme_reference==s.scheme_reference)},p=s.authority_or_region;window.localStorage.setItem(p,JSON.stringify(c)),window.open(`scheme.html?authority=${s.authority_or_region}`,"_blank")}return t.$$set=c=>{"scheme"in c&&r(0,s=c.scheme),"authorityNames"in c&&r(5,l=c.authorityNames)},[s,u,i,f,a,l]}class lf extends V{constructor(e){super(),K(this,e,sf,of,q,{scheme:0,authorityNames:5})}}const af=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];var ie=(t,e,r)=>new Promise((n,o)=>{var s=i=>{try{u(r.next(i))}catch(f){o(f)}},l=i=>{try{u(r.throw(i))}catch(f){o(f)}},u=i=>i.done?n(i.value):Promise.resolve(i.value).then(s,l);u((r=r.apply(t,e)).next())}),ce=Uint8Array,at=Uint16Array,uf=Int32Array,yn=new ce([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kn=new ce([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ff=new ce([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sn=function(t,e){for(var r=new at(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var o=new uf(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)o[s]=s-r[n]<<5|n;return{b:r,r:o}},Cn=Sn(yn,2),Ln=Cn.b,cf=Cn.r;Ln[28]=258,cf[258]=28;var pf=Sn(kn,0),$f=pf.b,Jt=new at(32768);for(R=0;R<32768;++R)Ne=(R&43690)>>1|(R&21845)<<1,Ne=(Ne&52428)>>2|(Ne&13107)<<2,Ne=(Ne&61680)>>4|(Ne&3855)<<4,Jt[R]=((Ne&65280)>>8|(Ne&255)<<8)>>1;var Ne,R,_t=function(t,e,r){for(var n=t.length,o=0,s=new at(e);o<n;++o)t[o]&&++s[t[o]-1];var l=new at(e);for(o=1;o<e;++o)l[o]=l[o-1]+s[o-1]<<1;var u;if(r){u=new at(1<<e);var i=15-e;for(o=0;o<n;++o)if(t[o])for(var f=o<<4|t[o],a=e-t[o],c=l[t[o]-1]++<<a,p=c|(1<<a)-1;c<=p;++c)u[Jt[c]>>i]=f}else for(u=new at(n),o=0;o<n;++o)t[o]&&(u[o]=Jt[l[t[o]-1]++]>>15-t[o]);return u},Ct=new ce(288);for(R=0;R<144;++R)Ct[R]=8;var R;for(R=144;R<256;++R)Ct[R]=9;var R;for(R=256;R<280;++R)Ct[R]=7;var R;for(R=280;R<288;++R)Ct[R]=8;var R,On=new ce(32);for(R=0;R<32;++R)On[R]=5;var R,mf=_t(Ct,9,1),hf=_t(On,5,1),Rt=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},ve=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},Ht=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},gf=function(t){return(t+7)/8|0},df=function(t,e,r){(e==null||e<0)&&(e=0),(r==null||r>t.length)&&(r=t.length);var n=new ce(r-e);return n.set(t.subarray(e,r)),n},_f=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ae=function(t,e,r){var n=new Error(e||_f[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,ae),!r)throw n;return n},ir=function(t,e,r,n){var o=t.length,s=n?n.length:0;if(!o||e.f&&!e.l)return r||new ce(0);var l=!r||e.i!=2,u=e.i;r||(r=new ce(o*3));var i=function(lr){var ar=r.length;if(lr>ar){var ur=new ce(Math.max(ar*2,lr));ur.set(r),r=ur}},f=e.f||0,a=e.p||0,c=e.b||0,p=e.l,$=e.d,b=e.m,C=e.n,S=o*8;do{if(!p){f=ve(t,a,1);var L=ve(t,a+1,3);if(a+=3,L)if(L==1)p=mf,$=hf,b=9,C=5;else if(L==2){var E=ve(t,a,31)+257,M=ve(t,a+10,15)+4,x=E+ve(t,a+5,31)+1;a+=14;for(var A=new ce(x),F=new ce(19),I=0;I<M;++I)F[ff[I]]=ve(t,a+I*3,7);a+=M*3;for(var j=Rt(F),J=(1<<j)-1,ne=_t(F,j,1),I=0;I<x;){var Le=ne[ve(t,a,J)];a+=Le&15;var O=Le>>4;if(O<16)A[I++]=O;else{var me=0,oe=0;for(O==16?(oe=3+ve(t,a,3),a+=2,me=A[I-1]):O==17?(oe=3+ve(t,a,7),a+=3):O==18&&(oe=11+ve(t,a,127),a+=7);oe--;)A[I++]=me}}var Ge=A.subarray(0,E),le=A.subarray(E);b=Rt(Ge),C=Rt(le),p=_t(Ge,b,1),$=_t(le,C,1)}else ae(1);else{var O=gf(a)+4,N=t[O-4]|t[O-3]<<8,k=O+N;if(k>o){u&&ae(0);break}l&&i(c+N),r.set(t.subarray(O,k),c),e.b=c+=N,e.p=a=k*8,e.f=f;continue}if(a>S){u&&ae(0);break}}l&&i(c+131072);for(var $t=(1<<b)-1,Be=(1<<C)-1,tt=a;;tt=a){var me=p[Ht(t,a)&$t],he=me>>4;if(a+=me&15,a>S){u&&ae(0);break}if(me||ae(2),he<256)r[c++]=he;else if(he==256){tt=a,p=null;break}else{var rt=he-254;if(he>264){var I=he-257,xe=yn[I];rt=ve(t,a,(1<<xe)-1)+Ln[I],a+=xe}var nt=$[Ht(t,a)&Be],ot=nt>>4;nt||ae(3),a+=nt&15;var le=$f[ot];if(ot>3){var xe=kn[ot];le+=Ht(t,a)&(1<<xe)-1,a+=xe}if(a>S){u&&ae(0);break}l&&i(c+131072);var st=c+rt;if(c<le){var mt=s-le,Nn=Math.min(le,st);for(mt+c<0&&ae(3);c<Nn;++c)r[c]=n[mt+c]}for(;c<st;c+=4)r[c]=r[c-le],r[c+1]=r[c+1-le],r[c+2]=r[c+2-le],r[c+3]=r[c+3-le];c=st}}e.l=p,e.p=tt,e.b=c,e.f=f,p&&(f=1,e.m=b,e.d=$,e.n=C)}while(!f);return c==r.length?r:df(r,0,c)},wf=new ce(0),vf=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&ae(6,"invalid gzip data");var e=t[3],r=10;e&4&&(r+=(t[10]|t[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!t[r++]);return r+(e&2)},bf=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},yf=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&ae(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&ae(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function kf(t,e){return ir(t,{i:2},e&&e.out,e&&e.dictionary)}function Sf(t,e){var r=vf(t);return r+8>t.length&&ae(6,"invalid gzip data"),ir(t.subarray(r,-8),{i:2},e&&e.out||new ce(bf(t)),e&&e.dictionary)}function Cf(t,e){return ir(t.subarray(yf(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function Qt(t,e){return t[0]==31&&t[1]==139&&t[2]==8?Sf(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?kf(t,e):Cf(t,e)}var Lf=typeof TextDecoder<"u"&&new TextDecoder,Of=0;try{Lf.decode(wf,{stream:!0}),Of=1}catch{}var Tn=(t,e)=>t*Math.pow(2,e),ht=(t,e)=>Math.floor(t/Math.pow(2,e)),It=(t,e)=>Tn(t.getUint16(e+1,!0),8)+t.getUint8(e),An=(t,e)=>Tn(t.getUint32(e+2,!0),16)+t.getUint16(e,!0),Tf=(t,e,r,n,o)=>{if(t!=n.getUint8(o))return t-n.getUint8(o);const s=It(n,o+1);if(e!=s)return e-s;const l=It(n,o+4);return r!=l?r-l:0},Af=(t,e,r,n)=>{const o=Dn(t,e|128,r,n);return o?{z:e,x:r,y:n,offset:o[0],length:o[1],is_dir:!0}:null},zr=(t,e,r,n)=>{const o=Dn(t,e,r,n);return o?{z:e,x:r,y:n,offset:o[0],length:o[1],is_dir:!1}:null},Dn=(t,e,r,n)=>{let o=0,s=t.byteLength/17-1;for(;o<=s;){const l=s+o>>1,u=Tf(e,r,n,t,l*17);if(u>0)o=l+1;else if(u<0)s=l-1;else return[An(t,l*17+7),t.getUint32(l*17+13,!0)]}return null},Df=(t,e)=>t.is_dir&&!e.is_dir?1:!t.is_dir&&e.is_dir?-1:t.z!==e.z?t.z-e.z:t.x!==e.x?t.x-e.x:t.y-e.y,En=(t,e)=>{const r=t.getUint8(e*17);return{z:r&127,x:It(t,e*17+1),y:It(t,e*17+4),offset:An(t,e*17+7),length:t.getUint32(e*17+13,!0),is_dir:r>>7===1}},Gr=t=>{const e=[],r=new DataView(t);for(let n=0;n<r.byteLength/17;n++)e.push(En(r,n));return Ef(e)},Ef=t=>{t.sort(Df);const e=new ArrayBuffer(17*t.length),r=new Uint8Array(e);for(let n=0;n<t.length;n++){const o=t[n];let s=o.z;o.is_dir&&(s=s|128),r[n*17]=s,r[n*17+1]=o.x&255,r[n*17+2]=o.x>>8&255,r[n*17+3]=o.x>>16&255,r[n*17+4]=o.y&255,r[n*17+5]=o.y>>8&255,r[n*17+6]=o.y>>16&255,r[n*17+7]=o.offset&255,r[n*17+8]=ht(o.offset,8)&255,r[n*17+9]=ht(o.offset,16)&255,r[n*17+10]=ht(o.offset,24)&255,r[n*17+11]=ht(o.offset,32)&255,r[n*17+12]=ht(o.offset,48)&255,r[n*17+13]=o.length&255,r[n*17+14]=o.length>>8&255,r[n*17+15]=o.length>>16&255,r[n*17+16]=o.length>>24&255}return e},Pf=(t,e)=>{if(t.byteLength<17)return null;const r=t.byteLength/17,n=En(t,r-1);if(n.is_dir){const o=n.z,s=e.z-o,l=Math.trunc(e.x/(1<<s)),u=Math.trunc(e.y/(1<<s));return{z:o,x:l,y:u}}return null};function If(t){return ie(this,null,function*(){const e=yield t.getBytes(0,512e3),r=new DataView(e.data),n=r.getUint32(4,!0),o=r.getUint16(8,!0),s=new TextDecoder("utf-8"),l=JSON.parse(s.decode(new DataView(e.data,10,n)));let u=0;l.compression==="gzip"&&(u=2);let i=0;"minzoom"in l&&(i=+l.minzoom);let f=0;"maxzoom"in l&&(f=+l.maxzoom);let a=0,c=0,p=0,$=-180,b=-85,C=180,S=85;if(l.bounds){const O=l.bounds.split(",");$=+O[0],b=+O[1],C=+O[2],S=+O[3]}if(l.center){const O=l.center.split(",");a=+O[0],c=+O[1],p=+O[2]}return{specVersion:r.getUint16(2,!0),rootDirectoryOffset:10+n,rootDirectoryLength:o*17,jsonMetadataOffset:10,jsonMetadataLength:n,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:u,tileType:1,minZoom:i,maxZoom:f,minLon:$,minLat:b,maxLon:C,maxLat:S,centerZoom:p,centerLon:a,centerLat:c,etag:e.etag}})}function xf(t,e,r,n,o,s,l){return ie(this,null,function*(){let u=yield r.getArrayBuffer(e,t.rootDirectoryOffset,t.rootDirectoryLength,t);t.specVersion===1&&(u=Gr(u));const i=zr(new DataView(u),n,o,s);if(i){let c=(yield e.getBytes(i.offset,i.length,l)).data;const p=new DataView(c);return p.getUint8(0)==31&&p.getUint8(1)==139&&(c=Qt(new Uint8Array(c))),{data:c}}const f=Pf(new DataView(u),{z:n,x:o,y:s});if(f){const a=Af(new DataView(u),f.z,f.x,f.y);if(a){let c=yield r.getArrayBuffer(e,a.offset,a.length,t);t.specVersion===1&&(c=Gr(c));const p=zr(new DataView(c),n,o,s);if(p){let b=(yield e.getBytes(p.offset,p.length,l)).data;const C=new DataView(b);return C.getUint8(0)==31&&C.getUint8(1)==139&&(b=Qt(new Uint8Array(b))),{data:b}}}}})}var Pn={getHeader:If,getZxy:xf},Nf=class{constructor(){this.tile=(t,e)=>{if(t.type=="json"){const r=t.url.substr(10);let n=this.tiles.get(r);return n||(n=new Vr(r),this.tiles.set(r,n)),n.getHeader().then(o=>{const s={tiles:[t.url+"/{z}/{x}/{y}"],minzoom:o.minZoom,maxzoom:o.maxZoom,bounds:[o.minLon,o.minLat,o.maxLon,o.maxLat]};e(null,s,null,null)}).catch(o=>{e(o,null,null,null)}),{cancel:()=>{}}}else{const r=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),n=t.url.match(r);if(!n)throw new Error("Invalid PMTiles protocol URL");const o=n[1];let s=this.tiles.get(o);s||(s=new Vr(o),this.tiles.set(o,s));const l=n[2],u=n[3],i=n[4],f=new AbortController,a=f.signal;let c=()=>{f.abort()};return s.getHeader().then(p=>{s.getZxy(+l,+u,+i,a).then($=>{$?e(null,new Uint8Array($.data),$.cacheControl,$.expires):p.tileType==1?e(null,new Uint8Array,null,null):e(null,null,null,null)}).catch($=>{$.name!=="AbortError"&&e($,null,null,null)})}),{cancel:c}}},this.tiles=new Map}add(t){this.tiles.set(t.source.getKey(),t)}get(t){return this.tiles.get(t)}};function it(t,e){return(e>>>0)*4294967296+(t>>>0)}function Mf(t,e){const r=e.buf;let n,o;if(o=r[e.pos++],n=(o&112)>>4,o<128||(o=r[e.pos++],n|=(o&127)<<3,o<128)||(o=r[e.pos++],n|=(o&127)<<10,o<128)||(o=r[e.pos++],n|=(o&127)<<17,o<128)||(o=r[e.pos++],n|=(o&127)<<24,o<128)||(o=r[e.pos++],n|=(o&1)<<31,o<128))return it(t,n);throw new Error("Expected varint not more than 10 bytes")}function gt(t){const e=t.buf;let r,n;return n=e[t.pos++],r=n&127,n<128||(n=e[t.pos++],r|=(n&127)<<7,n<128)||(n=e[t.pos++],r|=(n&127)<<14,n<128)||(n=e[t.pos++],r|=(n&127)<<21,n<128)?r:(n=e[t.pos],r|=(n&15)<<28,Mf(r,t))}function Ff(t,e,r,n){if(n==0){r==1&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);const o=e[0];e[0]=e[1],e[1]=o}}var Bf=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function jf(t,e,r){if(t>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,t)-1||r>Math.pow(2,t)-1)throw Error("tile x/y outside zoom level bounds");const n=Bf[t],o=Math.pow(2,t);let s=0,l=0,u=0;const i=[e,r];let f=o/2;for(;f>0;)s=(i[0]&f)>0?1:0,l=(i[1]&f)>0?1:0,u+=f*f*(3*s^l),Ff(f,i,s,l),f=f/2;return n+u}function In(t,e){return ie(this,null,function*(){if(e===1||e===0)return t;if(e===2){if(typeof globalThis.DecompressionStream>"u")return Qt(new Uint8Array(t));{let n=new Response(t).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(n).arrayBuffer()}}else throw Error("Compression method not supported")})}var Uf=127;function Rf(t,e){let r=0,n=t.length-1;for(;r<=n;){const o=n+r>>1,s=e-t[o].tileId;if(s>0)r=o+1;else if(s<0)n=o-1;else return t[o]}return n>=0&&(t[n].runLength===0||e-t[n].tileId<t[n].runLength)?t[n]:null}var Hf=class{constructor(t){this.url=t}getKey(){return this.url}getBytes(t,e,r){return ie(this,null,function*(){let n;r||(n=new AbortController,r=n.signal);let o=yield fetch(this.url,{signal:r,headers:{Range:"bytes="+t+"-"+(t+e-1)}});if(o.status===416&&t===0){const u=o.headers.get("Content-Range");if(!u||!u.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const i=+u.substr(8);o=yield fetch(this.url,{signal:r,headers:{Range:"bytes=0-"+(i-1)}})}if(o.status>=300)throw Error("Bad response code: "+o.status);const s=o.headers.get("Content-Length");if(o.status===200&&(!s||+s>e))throw n&&n.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield o.arrayBuffer(),etag:o.headers.get("ETag")||void 0,cacheControl:o.headers.get("Cache-Control")||void 0,expires:o.headers.get("Expires")||void 0}})}};function be(t,e){const r=t.getUint32(e+4,!0),n=t.getUint32(e+0,!0);return r*Math.pow(2,32)+n}function Wf(t,e){const r=new DataView(t),n=r.getUint8(7);if(n>3)throw Error(`Archive is spec version ${n} but this library supports up to spec version 3`);return{specVersion:n,rootDirectoryOffset:be(r,8),rootDirectoryLength:be(r,16),jsonMetadataOffset:be(r,24),jsonMetadataLength:be(r,32),leafDirectoryOffset:be(r,40),leafDirectoryLength:be(r,48),tileDataOffset:be(r,56),tileDataLength:be(r,64),numAddressedTiles:be(r,72),numTileEntries:be(r,80),numTileContents:be(r,88),clustered:r.getUint8(96)===1,internalCompression:r.getUint8(97),tileCompression:r.getUint8(98),tileType:r.getUint8(99),minZoom:r.getUint8(100),maxZoom:r.getUint8(101),minLon:r.getInt32(102,!0)/1e7,minLat:r.getInt32(106,!0)/1e7,maxLon:r.getInt32(110,!0)/1e7,maxLat:r.getInt32(114,!0)/1e7,centerZoom:r.getUint8(118),centerLon:r.getInt32(119,!0)/1e7,centerLat:r.getInt32(123,!0)/1e7,etag:e}}function xn(t){const e={buf:new Uint8Array(t),pos:0},r=gt(e),n=[];let o=0;for(let s=0;s<r;s++){const l=gt(e);n.push({tileId:o+l,offset:0,length:0,runLength:1}),o+=l}for(let s=0;s<r;s++)n[s].runLength=gt(e);for(let s=0;s<r;s++)n[s].length=gt(e);for(let s=0;s<r;s++){const l=gt(e);l===0&&s>0?n[s].offset=n[s-1].offset+n[s-1].length:n[s].offset=l-1}return n}function zf(t){const e=new DataView(t);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var ut=class extends Error{};function Gf(t,e,r,n){return ie(this,null,function*(){const o=yield t.getBytes(0,16384);if(new DataView(o.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(zf(o.data)<3)return[yield Pn.getHeader(t)];const l=o.data.slice(0,Uf);let u=o.etag;n&&o.etag!=n&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+t.getKey()),u=void 0);const i=Wf(l,u);if(r){const f=o.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),a=t.getKey()+"|"+(i.etag||"")+"|"+i.rootDirectoryOffset+"|"+i.rootDirectoryLength,c=xn(yield e(f,i.internalCompression));return[i,[a,c.length,c]]}return[i,void 0]})}function Vf(t,e,r,n,o){return ie(this,null,function*(){const s=yield t.getBytes(r,n);if(o.etag&&o.etag!==s.etag)throw new ut(s.etag);const l=yield e(s.data,o.internalCompression),u=xn(l);if(u.length===0)throw new Error("Empty directory is invalid");return u})}var Kf=class{constructor(t=100,e=!0,r=In){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.prefetch=e,this.decompress=r}getHeader(t,e){return ie(this,null,function*(){const r=t.getKey();if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const n=new Promise((o,s)=>{Gf(t,this.decompress,this.prefetch,e).then(l=>{l[1]&&this.cache.set(l[1][0],{lastUsed:this.counter++,data:Promise.resolve(l[1][2])}),o(l[0]),this.prune()}).catch(l=>{s(l)})});return this.cache.set(r,{lastUsed:this.counter++,data:n}),n})}getDirectory(t,e,r,n){return ie(this,null,function*(){const o=t.getKey()+"|"+(n.etag||"")+"|"+e+"|"+r;if(this.cache.has(o))return this.cache.get(o).lastUsed=this.counter++,yield this.cache.get(o).data;const s=new Promise((l,u)=>{Vf(t,this.decompress,e,r,n).then(i=>{l(i),this.prune()}).catch(i=>{u(i)})});return this.cache.set(o,{lastUsed:this.counter++,data:s}),s})}getArrayBuffer(t,e,r,n){return ie(this,null,function*(){const o=t.getKey()+"|"+(n.etag||"")+"|"+e+"|"+r;if(this.cache.has(o))return this.cache.get(o).lastUsed=this.counter++,yield this.cache.get(o).data;const s=new Promise((l,u)=>{t.getBytes(e,r).then(i=>{if(n.etag&&n.etag!==i.etag)throw new ut(i.etag);l(i.data),this.cache.has(o),this.prune()}).catch(i=>{u(i)})});return this.cache.set(o,{lastUsed:this.counter++,data:s}),s})}prune(){if(this.cache.size>=this.maxCacheEntries){let t=1/0,e;this.cache.forEach((r,n)=>{r.lastUsed<t&&(t=r.lastUsed,e=n)}),e&&this.cache.delete(e)}}invalidate(t,e){return ie(this,null,function*(){this.cache.delete(t.getKey()),yield this.getHeader(t,e)})}},Vr=class{constructor(t,e,r){typeof t=="string"?this.source=new Hf(t):this.source=t,r?this.decompress=r:this.decompress=In,e?this.cache=e:this.cache=new Kf}getHeader(){return ie(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(t,e,r,n){return ie(this,null,function*(){const o=jf(t,e,r),s=yield this.cache.getHeader(this.source);if(s.specVersion<3)return Pn.getZxy(s,this.source,this.cache,t,e,r,n);if(t<s.minZoom||t>s.maxZoom)return;let l=s.rootDirectoryOffset,u=s.rootDirectoryLength;for(let i=0;i<=3;i++){const f=yield this.cache.getDirectory(this.source,l,u,s),a=Rf(f,o);if(a)if(a.runLength>0){const c=yield this.source.getBytes(s.tileDataOffset+a.offset,a.length,n);if(s.etag&&s.etag!==c.etag)throw new ut(c.etag);return{data:yield this.decompress(c.data,s.tileCompression),cacheControl:c.cacheControl,expires:c.expires}}else l=s.leafDirectoryOffset+a.offset,u=a.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(t,e,r,n){return ie(this,null,function*(){try{return yield this.getZxyAttempt(t,e,r,n)}catch(o){if(o instanceof ut)return this.cache.invalidate(this.source,o.message),yield this.getZxyAttempt(t,e,r,n);throw o}})}getMetadataAttempt(){return ie(this,null,function*(){const t=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength);if(t.etag&&t.etag!==e.etag)throw new ut(e.etag);const r=yield this.decompress(e.data,t.internalCompression),n=new TextDecoder("utf-8");return JSON.parse(n.decode(r))})}getMetadata(){return ie(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(t){if(t instanceof ut)return this.cache.invalidate(this.source,t.message),yield this.getMetadataAttempt();throw t}})}};function qf(t){return er(()=>{let e=new Nf;pr.addProtocol("pmtiles",e.tile)}),tn(()=>{pr.removeProtocol("pmtiles")}),[]}class Zf extends V{constructor(e){super(),K(this,e,qf,null,q,{})}}function Kr(t,e,r){const n=t.slice();return n[13]=e[r],n}function qr(t){let e,r,n,o;function s(i){t[9](i)}function l(i){t[10](i)}let u={schemes:t[1]};return t[2]!==void 0&&(u.schemesToBeShown=t[2]),t[3]!==void 0&&(u.filterText=t[3]),e=new mi({props:u}),H.push(()=>z(e,"schemesToBeShown",s)),H.push(()=>z(e,"filterText",l)),{c(){_(e.$$.fragment)},m(i,f){w(e,i,f),o=!0},p(i,f){const a={};f&2&&(a.schemes=i[1]),!r&&f&4&&(r=!0,a.schemesToBeShown=i[2],G(()=>r=!1)),!n&&f&8&&(n=!0,a.filterText=i[3],G(()=>n=!1)),e.$set(a)},i(i){o||(g(e.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),o=!1},d(i){v(e,i)}}}function Zr(t){let e,r;return e=new lf({props:{scheme:t[13],authorityNames:t[5]}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p(n,o){const s={};o&2&&(s.scheme=n[13]),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}function Xr(t){let e=t[2].has(t[13].scheme_reference),r,n,o=e&&Zr(t);return{c(){o&&o.c(),r=nr()},m(s,l){o&&o.m(s,l),m(s,r,l),n=!0},p(s,l){l&6&&(e=s[2].has(s[13].scheme_reference)),e?o?(o.p(s,l),l&6&&g(o,1)):(o=Zr(s),o.c(),g(o,1),o.m(r.parentNode,r)):o&&(ge(),d(o,1,1,()=>{o=null}),de())},i(s){n||(g(o),n=!0)},o(s){d(o),n=!1},d(s){s&&h(r),o&&o.d(s)}}}function Xf(t){let e,r,n,o,s,l,u,i,f,a,c,p,$,b;s=new Jn({props:{boundaryGeojson:t[4]}});let C=!1;i=new eo({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:t[7]}}),a=new en({props:{errorMessage:t[0]}});let S=t[1].size>0&&qr(t),L=We(t[1].values()),O=[];for(let k=0;k<L.length;k+=1)O[k]=Xr(Kr(t,L,k));const N=k=>d(O[k],1,1,()=>{O[k]=null});return{c(){e=P("div"),r=P("div"),n=P("h1"),n.textContent="Browse schemes",o=T(),_(s.$$.fragment),l=T(),u=T(),_(i.$$.fragment),f=T(),_(a.$$.fragment),c=T(),S&&S.c(),p=T(),$=P("ul");for(let k=0;k<O.length;k+=1)O[k].c();Fe(r,"display","flex"),Fe(r,"justify-content","space-between"),W(e,"slot","sidebar"),W(e,"class","govuk-prose")},m(k,E){m(k,e,E),D(e,r),D(r,n),D(r,o),w(s,r,null),D(e,l),D(e,u),w(i,e,null),D(e,f),w(a,e,null),D(e,c),S&&S.m(e,null),D(e,p),D(e,$);for(let M=0;M<O.length;M+=1)O[M]&&O[M].m($,null);b=!0},p(k,E){const M={};E&16&&(M.boundaryGeojson=k[4]),s.$set(M);const x={};if(E&1&&(x.errorMessage=k[0]),a.$set(x),k[1].size>0?S?(S.p(k,E),E&2&&g(S,1)):(S=qr(k),S.c(),g(S,1),S.m(e,p)):S&&(ge(),d(S,1,1,()=>{S=null}),de()),E&38){L=We(k[1].values());let A;for(A=0;A<L.length;A+=1){const F=Kr(k,L,A);O[A]?(O[A].p(F,E),g(O[A],1)):(O[A]=Xr(F),O[A].c(),g(O[A],1),O[A].m($,null))}for(ge(),A=L.length;A<O.length;A+=1)N(A);de()}},i(k){if(!b){g(s.$$.fragment,k),g(C),g(i.$$.fragment,k),g(a.$$.fragment,k),g(S);for(let E=0;E<L.length;E+=1)g(O[E]);b=!0}},o(k){d(s.$$.fragment,k),d(C),d(i.$$.fragment,k),d(a.$$.fragment,k),d(S),O=O.filter(Boolean);for(let E=0;E<O.length;E+=1)d(O[E]);b=!1},d(k){k&&h(e),v(s),v(i),v(a),S&&S.d(),Dt(O,k)}}}function Yf(t){let e,r,n,o,s,l,u,i,f,a,c;return e=new Qn({props:{colorInterventions:rn("v1")}}),n=new Y({props:{layer:"interventions-points",tooltip:t[8],clickable:!1}}),s=new Y({props:{layer:"interventions-lines",tooltip:t[8],clickable:!1}}),u=new Y({props:{layer:"interventions-polygons",tooltip:t[8],clickable:!1}}),a=new Qu({props:{style:t[6]}}),{c(){_(e.$$.fragment),r=T(),_(n.$$.fragment),o=T(),_(s.$$.fragment),l=T(),_(u.$$.fragment),i=T(),f=P("div"),_(a.$$.fragment),W(f,"class","top-right svelte-u44ed2")},m(p,$){w(e,p,$),m(p,r,$),w(n,p,$),m(p,o,$),w(s,p,$),m(p,l,$),w(u,p,$),m(p,i,$),m(p,f,$),w(a,f,null),c=!0},p:ee,i(p){c||(g(e.$$.fragment,p),g(n.$$.fragment,p),g(s.$$.fragment,p),g(u.$$.fragment,p),g(a.$$.fragment,p),c=!0)},o(p){d(e.$$.fragment,p),d(n.$$.fragment,p),d(s.$$.fragment,p),d(u.$$.fragment,p),d(a.$$.fragment,p),c=!1},d(p){p&&(h(r),h(o),h(l),h(i),h(f)),v(e,p),v(n,p),v(s,p),v(u,p),v(a)}}}function Jf(t){let e,r,n,o,s;return r=new Zf({}),o=new Zn({props:{style:t[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Yf]},$$scope:{ctx:t}}}),{c(){e=P("div"),_(r.$$.fragment),n=T(),_(o.$$.fragment),W(e,"slot","main")},m(l,u){m(l,e,u),w(r,e,null),D(e,n),w(o,e,null),s=!0},p(l,u){const i={};u&65536&&(i.$$scope={dirty:u,ctx:l}),o.$set(i)},i(l){s||(g(r.$$.fragment,l),g(o.$$.fragment,l),s=!0)},o(l){d(r.$$.fragment,l),d(o.$$.fragment,l),s=!1},d(l){l&&h(e),v(r),v(o)}}}function Qf(t){let e,r;return e=new qn({props:{$$slots:{main:[Jf],sidebar:[Xf]},$$scope:{ctx:t}}}),{c(){_(e.$$.fragment)},m(n,o){w(e,n,o),r=!0},p(n,[o]){const s={};o&65567&&(s.$$scope={dirty:o,ctx:n}),e.$set(s)},i(n){r||(g(e.$$.fragment,n),r=!0)},o(n){d(e.$$.fragment,n),r=!1},d(n){v(e,n)}}}function ec(t,e,r){let n;X(t,ft,S=>r(4,n=S));let o=new Set(af);er(()=>{zn()});let l=new URLSearchParams(window.location.search).get("style")||"dataviz",u="",i=new Map,f=new Set,a="";tn(()=>{ft.set(Qr())});function c(S){try{let L=JSON.parse(S);r(1,i=ri(L)),ft.set(L),r(0,u="")}catch(L){r(0,u=`The file you loaded is broken: ${L}`)}}function p(S){let L=S.properties;var O='<div style="max-width: 30vw;">';return O+=`<h2>${$(L.name)} (${L.intervention_type})</h2>`,O+=`<p>Scheme reference: ${L.scheme_reference}</p>`,L.length_meters&&(O+=`<p>Length: ${Gn(L.length_meters)}</p>`),L.description&&(O+=`<p>${$(L.description)}</p>`),O+="</div>",O}function $(S){return a?S.replace(new RegExp(a,"gi"),L=>`<mark>${L}</mark>`):S}function b(S){f=S,r(2,f)}function C(S){a=S,r(3,a)}return[u,i,f,a,n,o,l,c,p,b,C]}class tc extends V{constructor(e){super(),K(this,e,ec,Qf,q,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new tc({target:document.getElementById("app")});
