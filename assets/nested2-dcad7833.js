import{S as K,i as Q,s as Y,e as C,h as G,a1 as Se,j as $,Y as ne,o as p,aR as pl,b as U,c as W,d as O,g as h,m as b,w as it,l as V,t as m,n as _,p as v,Z as Vt,_ as Xt,$ as Yt,a0 as Jt,a9 as De,N as pe,O as me,aU as gt,u as k,k as w,H as z,K as je,P as Tn,Q as ml,q as ke,T as _l,U as gl,V as st,W as dl,X as hl,a$ as Hl,b0 as pt,a6 as Dn,b1 as Gl,aQ as Ul,at,ag as On,al as Kt,r as Ln,a as dt,F as _n,v as We,a_ as x,b2 as he,b3 as we,C as Z,aj as ee,D as ye,am as te,b4 as ae,G as bt,ad as nn,J as bl,aW as Gt,b5 as on,R as vl,b6 as qt,E as wl,aL as Wl,b7 as Vl,b8 as Xl,f as gn,ai as Yl,B as Jl,aY as jn,an as Kl,ao as Rn,ap as Bn,aq as xt,aZ as zn,L as Ql,M as Zl,y as xl}from"./index-655b5385.js";import{d as rt,j as _t,C as Ee,f as Xe,h as le,l as q,k as eo,S as to,B as no,c as qn,b as vt,G as ro}from"./StreetViewTool-66e42a59.js";import{a as Re,F as lo}from"./Popup-37dbee2b.js";import{P as fe}from"./Popup-fc14709c.js";import{R as oo,C as ft,Z as so}from"./ZoomOutMap-34d25d60.js";import{L as io,a as ao}from"./LineMeasureController-e29ebe10.js";function fo(l){let e;return{c(){e=C("span"),G(e,"class","svelte-kzgqtg"),Se(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Se(e,"background",n[0])},i:ne,o:ne,d(n){n&&p(e)}}}function uo(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Oe extends K{constructor(e){super(),Q(this,e,uo,fo,Y,{color:0})}}const co="/atip/assets/help-d011708a.svg";function $o(l){let e,n;const t=l[1].default,r=Vt(t,l,l[4],null);return{c(){e=C("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&Xt(r,t,o,o[4],n?Jt(t,o[4],s,null):Yt(o[4]),null)},i(o){n||(m(r,o),n=!0)},o(o){_(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function po(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[$o]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new pl({props:a}),U.push(()=>W(t,"open",i)),{c(){e=C("button"),e.innerHTML=`<img src="${co}" title="Help" alt="Help"/>`,n=O(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,s||(u=it(e,"click",l[2]),s=!0)},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,g.open=f[0],V(()=>r=!1)),t.$set(g)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),s=!1,u()}}}function mo(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class $e extends K{constructor(e){super(),Q(this,e,mo,po,Y,{})}}function Hn(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Gn(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Oe({props:{color:l[2]}}),{c(){e=C("li"),h(n.$$.fragment),t=O(),o=k(r),s=O()},m(i,a){$(i,e,a),b(n,e,null),w(e,t),w(e,o),w(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&z(o,r)},i(i){u||(m(n.$$.fragment,i),u=!0)},o(i){_(n.$$.fragment,i),u=!1},d(i){i&&p(e),v(n)}}}function _o(l){let e,n,t=De(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Gn(Hn(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){e=C("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=De(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Hn(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Gn(a),r[i].c(),m(r[i],1),r[i].m(e,null))}for(pe(),i=t.length;i<r.length;i+=1)o(i);me()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),gt(r,s)}}}function go(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class An extends K{constructor(e){super(),Q(this,e,go,_o,Y,{rows:0})}}function Un(l){let e=l[0],n,t,r=Wn(l);return{c(){r.c(),n=je()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?(pe(),_(r,1,1,ne),me(),r=Wn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Wn(l){let e;const n=l[10].default,t=Vt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&Xt(t,n,r,r[9],e?Jt(n,r[9],o,null):Yt(r[9]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function ho(l){let e,n,t=l[0]&&Un(l);return{c(){t&&t.c(),e=je()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Un(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(pe(),_(t,1,1,()=>{t=null}),me())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function bo(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Tn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=ml();ke(l,f,y=>n(8,r=y)),ke(l,c,y=>n(0,t=y));let g,d=!0;return _l(()=>{t&&g&&r&&(gl(f,t,g),st(c,t=null,t),n(6,g=void 0))}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(st(c,t=u,t),dl(r,t,hl({type:"raster",tiles:i,tileSize:a}),y=>r&&y===t,()=>{t&&(n(6,g=r==null?void 0:r.getSource(t)),n(7,d=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,g=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&g&&(d?n(7,d=!1):g.setTiles(i))},[t,f,c,u,i,a,g,d,r,s,o]}class vo extends K{constructor(e){super(),Q(this,e,bo,ho,Y,{id:3,tiles:4,tileSize:5})}}function wo(l){let e;const n=l[16].default,t=Vt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&Xt(t,n,r,r[24],e?Jt(n,r[24],o,null):Yt(r[24]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function ko(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[wo]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Hl({props:o}),U.push(()=>W(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function yo(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Tn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:L=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:M=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:I=!1}=e,{interactive:N=!0}=e;function A(D){j=D,n(0,j)}function P(D){pt.call(this,l,D)}function F(D){pt.call(this,l,D)}function T(D){pt.call(this,l,D)}function E(D){pt.call(this,l,D)}function H(D){pt.call(this,l,D)}function R(D){pt.call(this,l,D)}return l.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,s=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,i=D.beforeId),"beforeLayerType"in D&&n(5,a=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,g=D.filter),"applyToClusters"in D&&n(9,d=D.applyToClusters),"minzoom"in D&&n(10,y=D.minzoom),"maxzoom"in D&&n(11,L=D.maxzoom),"hoverCursor"in D&&n(12,S=D.hoverCursor),"manageHoverState"in D&&n(13,M=D.manageHoverState),"hovered"in D&&n(0,j=D.hovered),"eventsIfTopMost"in D&&n(14,I=D.eventsIfTopMost),"interactive"in D&&n(15,N=D.interactive),"$$scope"in D&&n(24,r=D.$$scope)},[j,o,s,u,i,a,f,c,g,d,y,L,S,M,I,N,t,A,P,F,T,E,H,R,r]}class sn extends K{constructor(e){super(),Q(this,e,yo,ko,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Vn(l){let e=l[0],n,t,r=Xn(l);return{c(){r.c(),n=je()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?(pe(),_(r,1,1,ne),me(),r=Xn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Xn(l){let e;const n=l[9].default,t=Vt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&Xt(t,n,r,r[8],e?Jt(n,r[8],o,null):Yt(r[8]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function So(l){let e,n,t=l[0]&&Vn(l);return{c(){t&&t.c(),e=je()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Vn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(pe(),_(t,1,1,()=>{t=null}),me())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function Co(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Tn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!Dn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Gl;Dn.addProtocol("pmtiles",y.tile)}const{map:c,self:g}=ml();ke(l,c,y=>n(7,r=y)),ke(l,g,y=>n(0,t=y));let d;return _l(()=>{t&&r&&(gl(c,t,d),st(g,t=null,t),d=void 0)}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(st(g,t=u,t),dl(r,t,hl({type:"vector",url:i,tiles:a,promoteId:f}),y=>r&&y===t,()=>{t&&(d=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{d=r==null?void 0:r.getSource(u)}))},[t,c,g,u,i,a,f,r,s,o]}class be extends K{constructor(e){super(),Q(this,e,Co,So,Y,{id:3,url:4,tiles:5,promoteId:6})}}const To={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Me=Uint8Array,ct=Uint16Array,kl=Uint32Array,yl=new Me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Sl=new Me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Oo=new Me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Cl=function(l,e){for(var n=new ct(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new kl(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},Tl=Cl(yl,2),Ol=Tl[0],Lo=Tl[1];Ol[28]=258,Lo[258]=28;var Ao=Cl(Sl,0),Io=Ao[0],dn=new ct(32768);for(var de=0;de<32768;++de){var lt=(de&43690)>>>1|(de&21845)<<1;lt=(lt&52428)>>>2|(lt&13107)<<2,lt=(lt&61680)>>>4|(lt&3855)<<4,dn[de]=((lt&65280)>>>8|(lt&255)<<8)>>>1}var Ht=function(l,e,n){for(var t=l.length,r=0,o=new ct(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new ct(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new ct(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,g=c|(1<<f)-1;c<=g;++c)u[dn[c]>>>i]=a}else for(u=new ct(t),r=0;r<t;++r)l[r]&&(u[r]=dn[s[l[r]-1]++]>>>15-l[r]);return u},Qt=new Me(288);for(var de=0;de<144;++de)Qt[de]=8;for(var de=144;de<256;++de)Qt[de]=9;for(var de=256;de<280;++de)Qt[de]=7;for(var de=280;de<288;++de)Qt[de]=8;var Ll=new Me(32);for(var de=0;de<32;++de)Ll[de]=5;var Mo=Ht(Qt,9,1),Po=Ht(Ll,5,1),an=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},qe=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},fn=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},No=function(l){return(l+7)/8|0},In=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?ct:l.BYTES_PER_ELEMENT==4?kl:Me)(n-e);return t.set(l.subarray(e,n)),t},Fo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],He=function(l,e,n){var t=new Error(e||Fo[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,He),!n)throw t;return t},Eo=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Me(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Me(t*3));var s=function(Fe){var Ce=e.length;if(Fe>Ce){var Je=new Me(Math.max(Ce*2,Fe));Je.set(e),e=Je}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,g=n.m,d=n.n,y=t*8;do{if(!f){u=qe(l,i,1);var L=qe(l,i+1,3);if(i+=3,L)if(L==1)f=Mo,c=Po,g=9,d=5;else if(L==2){var I=qe(l,i,31)+257,N=qe(l,i+10,15)+4,A=I+qe(l,i+5,31)+1;i+=14;for(var P=new Me(A),F=new Me(19),T=0;T<N;++T)F[Oo[T]]=qe(l,i+T*3,7);i+=N*3;for(var E=an(F),H=(1<<E)-1,R=Ht(F,E,1),T=0;T<A;){var D=R[qe(l,i,H)];i+=D&15;var S=D>>>4;if(S<16)P[T++]=S;else{var B=0,X=0;for(S==16?(X=3+qe(l,i,3),i+=2,B=P[T-1]):S==17?(X=3+qe(l,i,7),i+=3):S==18&&(X=11+qe(l,i,127),i+=7);X--;)P[T++]=B}}var re=P.subarray(0,I),oe=P.subarray(I);g=an(re),d=an(oe),f=Ht(re,g,1),c=Ht(oe,d,1)}else He(1);else{var S=No(i)+4,M=l[S-4]|l[S-3]<<8,j=S+M;if(j>t){o&&He(0);break}r&&s(a+M),e.set(l.subarray(S,j),a),n.b=a+=M,n.p=i=j*8,n.f=u;continue}if(i>y){o&&He(0);break}}r&&s(a+131072);for(var ce=(1<<g)-1,Ie=(1<<d)-1,Te=i;;Te=i){var B=f[fn(l,i)&ce],ie=B>>>4;if(i+=B&15,i>y){o&&He(0);break}if(B||He(2),ie<256)e[a++]=ie;else if(ie==256){Te=i,f=null;break}else{var Ae=ie-254;if(ie>264){var T=ie-257,ue=yl[T];Ae=qe(l,i,(1<<ue)-1)+Ol[T],i+=ue}var _e=c[fn(l,i)&Ie],ge=_e>>>4;_e||He(3),i+=_e&15;var oe=Io[ge];if(ge>3){var ue=Sl[ge];oe+=fn(l,i)&(1<<ue)-1,i+=ue}if(i>y){o&&He(0);break}r&&s(a+131072);for(var ze=a+Ae;a<ze;a+=4)e[a]=e[a-oe],e[a+1]=e[a+1-oe],e[a+2]=e[a+2-oe],e[a+3]=e[a+3-oe];a=ze}}n.l=f,n.p=Te,n.b=a,n.f=u,f&&(u=1,n.m=g,n.d=c,n.n=d)}while(!u);return a==e.length?e:In(e,0,a)},Do=new Me(0),Ue=function(l,e){return l[e]|l[e+1]<<8},Ge=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},un=function(l,e){return Ge(l,e)+Ge(l,e+4)*4294967296};function jo(l,e){return Eo(l,e)}var hn=typeof TextDecoder<"u"&&new TextDecoder,Ro=0;try{hn.decode(Do,{stream:!0}),Ro=1}catch{}var Bo=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,In(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function Al(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(hn)return hn.decode(l);var r=Bo(l),o=r[0],s=r[1];return s.length&&He(8),o}}var zo=function(l,e){return e+30+Ue(l,e+26)+Ue(l,e+28)},qo=function(l,e,n){var t=Ue(l,e+28),r=Al(l.subarray(e+46,e+46+t),!(Ue(l,e+8)&2048)),o=e+46+t,s=Ge(l,e+20),u=n&&s==4294967295?Ho(l,o):[s,Ge(l,e+24),Ge(l,e+42)],i=u[0],a=u[1],f=u[2];return[Ue(l,e+10),i,a,r,o+Ue(l,e+30)+Ue(l,e+32),f]},Ho=function(l,e){for(;Ue(l,e)!=1;e+=4+Ue(l,e+2));return[un(l,e+12),un(l,e+4),un(l,e+20)]};function Go(l,e){for(var n={},t=l.length-22;Ge(l,t)!=101010256;--t)(!t||l.length-t>65558)&&He(13);var r=Ue(l,t+8);if(!r)return{};var o=Ge(l,t+16),s=o==4294967295||r==65535;if(s){var u=Ge(l,t-12);s=Ge(l,u)==101075792,s&&(r=Ge(l,u+32),o=Ge(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=qo(l,o,s),c=f[0],g=f[1],d=f[2],y=f[3],L=f[4],S=f[5],M=zo(l,S);o=L,(!i||i({name:y,size:g,originalSize:d,compression:c}))&&(c?c==8?n[y]=jo(l.subarray(M,M+g),new Me(d)):He(14,"unknown compression type "+c):n[y]=In(l,M,M+g))}return n}function Uo(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(cn):cn(l)}function cn(l){var e=new Uint8Array(l),n=Go(e);return Promise.resolve(Wo(n))}function Wo(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=Al(l[r])}return e}function Ve(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&$t(t)===e)return t;n++}}function Zt(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&$t(r)===e&&n.push(r),t++}return n}function rn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&$t(r)===e&&n(r,t):n(r,t),t++}}function Vo(l,e,n){var t=[];return rn(l,e,function(r,o){t.push(n(r,o))}),t}var Xo=/.+\:/;function $t(l){return l.tagName.replace(Xo,"")}function Il(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+$t(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=Il(l.childNodes[t]),t++;return e+="</"+$t(l)+">",e}function Yo(l){var e=l.documentElement,n=Ve(e,"sheetData"),t=[];return rn(n,"row",function(r){rn(r,"c",function(o){t.push(o)})}),t}function Jo(l,e){return Ve(e,"v")}function Ko(l,e){if(e.firstChild&&$t(e.firstChild)==="is"&&e.firstChild.firstChild&&$t(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Qo(l){var e=l.documentElement,n=Ve(e,"dimension");if(n)return n.getAttribute("ref")}function Zo(l){var e=l.documentElement,n=Ve(e,"cellStyleXfs");return n?Zt(n,"xf"):[]}function xo(l){var e=l.documentElement,n=Ve(e,"cellXfs");return n?Zt(n,"xf"):[]}function es(l){var e=l.documentElement,n=Ve(e,"numFmts");return n?Zt(n,"numFmt"):[]}function ts(l){var e=l.documentElement;return Vo(e,"si",function(n){var t=Ve(n,"t");if(t)return t.textContent;var r="";return rn(n,"r",function(o){r+=Ve(o,"t").textContent}),r})}function ns(l){var e=l.documentElement;return Ve(e,"workbookPr")}function rs(l){var e=l.documentElement;return Zt(e,"Relationship")}function ls(l){var e=l.documentElement,n=Ve(e,"sheets");return Zt(n,"sheet")}function os(l,e){var n=e.createDocument(l),t={},r=ns(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return ls(n).forEach(o),t}function ss(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=$n(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=$n(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=$n(u);break}};return rs(n).forEach(r),t}function $n(l){return l[0]==="/"?l.slice(1):"xl/"+l}function Yn(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Jn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yn(Object(n),!0).forEach(function(t){is(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function is(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function as(l,e){if(!l)return{};var n=e.createDocument(l),t=Zo(n).map(pn),r=es(n).map(fs).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?Jn(Jn({},t[u.xfId]),pn(u,r)):pn(u,r)};return xo(n).map(o)}function fs(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function pn(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function us(l,e){return l?ts(e.createDocument(l)):[]}function Ml(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function cs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=$s(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $s(l,e){if(l){if(typeof l=="string")return Kn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(l,e)}}function Kn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ps(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(ms.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&ds(t.numberFormat.template))return!0}}var ms=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],_s=/^\[\$-414\]/,gs=/;@$/;function ds(l){l=l.toLowerCase(),l=l.replace(_s,""),l=l.replace(gs,"");for(var e=l.split(/\W+/),n=cs(e),t;!(t=n()).done;){var r=t.value;if(hs.indexOf(r)<0)return!1}return!0}var hs=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function bs(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=mn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=mn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=mn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=vs(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var g=ps(o(),s,a);g?(l=Qn(l),l=Ml(l,i)):l=(a.parseNumber||Qn)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function vs(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function mn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function Qn(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var ws=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function ks(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function ys(l){for(var e=0,n=0;n<l.length;)e*=26,e+=ws.indexOf(l[n]),n++;return e}function Pl(l){return l=l.split(/(\d+)/),[parseInt(l[1]),ys(l[0].trim())]}function Ss(l,e,n,t,r,o,s){var u=Pl(l.getAttribute("r")),i=Jo(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:bs(a,f,{getInlineStringValue:function(){return Ko(e,l)},getInlineStringXml:function(){return Il(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function Cs(l,e,n,t,r,o){var s=Yo(l);return s.length===0?[]:s.map(function(u){return Ss(u,l,e,n,t,r,o)})}function Ts(l,e){return Is(l)||As(l,e)||Ls(l,e)||Os()}function Os(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ls(l,e){if(l){if(typeof l=="string")return Zn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(l,e)}}function Zn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function As(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Is(l){if(Array.isArray(l))return l}function Ms(l){var e=Qo(l);if(e)return e=e.split(":").map(Pl).map(function(n){var t=Ts(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Ps(l,e,n,t,r,o){var s=e.createDocument(l),u=Cs(s,e,n,t,r,o),i=Ms(s)||ks(u);return{cells:u,dimensions:i}}function Ns(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Fs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fs(l,e){if(l){if(typeof l=="string")return xn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(l,e)}}function xn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Es(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=Ns(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Ds(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=js(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function js(l,e){if(l){if(typeof l=="string")return er(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(l,e)}}function er(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Rs(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=Ds(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function Bs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Nl(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zs(l,e){return Gs(l)||Hs(l,e)||Nl(l,e)||qs()}function qs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nl(l,e){if(l){if(typeof l=="string")return tr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(l,e)}}function tr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Hs(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Gs(l){if(Array.isArray(l))return l}function Us(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=zs(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=Bs(t),g;!(g=c()).done;){var d=g.value,y=d.row-1,L=d.column-1;L<s&&y<u&&(i[y][L]=d.value)}var S=e.rowMap;if(S)for(var M=0;M<i.length;)S[M]=M,M++;return i=Es(Rs(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(i=e.transformData(i)),i}function Ws(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Vs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vs(l,e){if(l){if(typeof l=="string")return nr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(l,e)}}function nr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function rr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Xs(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rr(Object(n),!0).forEach(function(t){Ys(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Ys(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Js(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Xs({sheet:1},n));var t=function(g){if(!l[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return l[g]},r=ss(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?us(t(r.sharedStrings),e):[],s=r.styles?as(t(r.styles),e):{},u=os(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var g=c.name;return{name:g}});var i=Ks(n.sheet,u.sheets);if(!i||!r.sheets[i])throw Qs(n.sheet,u.sheets);var a=Ps(t(r.sheets[i]),e,o,s,u,n),f=Us(a,n);return n.properties?{data:f,properties:u}:f}function Ks(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=Ws(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Qs(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function bn(l){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(l)}function lr(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Zs(l,e,n){return e&&lr(l.prototype,e),n&&lr(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function xs(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function ei(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&Ut(l,e)}function ti(l){var e=Fl();return function(){var t=Wt(l),r;if(e){var o=Wt(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return ni(this,r)}}function ni(l,e){if(e&&(bn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ri(l)}function ri(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function vn(l){var e=typeof Map=="function"?new Map:void 0;return vn=function(t){if(t===null||!li(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return tn(t,arguments,Wt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Ut(r,t)},vn(l)}function tn(l,e,n){return Fl()?tn=Reflect.construct:tn=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&Ut(a,s.prototype),a},tn.apply(null,arguments)}function Fl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function li(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function Ut(l,e){return Ut=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},Ut(l,e)}function Wt(l){return Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Wt(l)}var Pe=function(l){ei(n,l);var e=ti(n);function n(t){var r;return xs(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Zs(n)}(vn(Error));function oi(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new Pe("not_a_number")}if(typeof l!="number")throw new Pe("not_a_number");if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");return l}function si(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");return String(l)}throw new Pe("not_a_string")}function ii(l){if(typeof l=="boolean")return l;throw new Pe("not_a_boolean")}function ai(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new Pe("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");var t=Ml(l,n);if(isNaN(t.valueOf()))throw new Pe("out_of_bounds");return t}throw new Pe("not_a_date")}function fi(l,e){return $i(l)||ci(l,e)||El(l,e)||ui()}function ui(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ci(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function $i(l){if(Array.isArray(l))return l}function wn(l){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(l)}function pi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=El(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function El(l,e){if(l){if(typeof l=="string")return or(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return or(l,e)}}function or(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function sr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function ir(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sr(Object(n),!0).forEach(function(t){mi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function mi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var ar={isColumnOriented:!1};function _i(l,e,n){n?n=ir(ir({},ar),n):n=ar;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;bi(e),r&&(l=hi(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=Dl(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=pi(a),d;!(d=g()).done;){var y=d.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function Dl(l,e,n,t,r,o){for(var s={},u=!0,i=function(j){var I=j.column,N=j.value,A=j.error,P=j.reason,F={error:A,row:n+1,column:I,value:N};return P&&(F.reason=P),l[I].type&&(F.type=l[I].type),F},a=[],f=function(){var j=g[c],I=l[j],N=wn(I.type)==="object"&&!Array.isArray(I.type),A=e[t.indexOf(j)];A===void 0&&(A=null);var P=void 0,F=void 0,T=void 0;if(N)P=Dl(I.type,e,n,t,r,o);else if(A===null)P=null;else if(Array.isArray(I.type)){var E=!1,H=di(A).map(function(D){var B=fr(D,I,o);return B.error&&(P=D,F=B.error,T=B.reason),B.value!==null&&(E=!0),B.value});F||(P=E?H:null)}else{var R=fr(A,I,o);F=R.error,T=R.reason,P=F?A:R.value}!F&&P===null&&(typeof I.required=="function"?a.push({column:j}):I.required===!0&&(F="required")),F?r.push(i({column:j,value:P,error:F,reason:T})):(u&&P!==null&&(u=!1),(P!==null||o.includeNullValues)&&(s[I.prop]=P))},c=0,g=Object.keys(l);c<g.length;c++)f();if(u)return null;for(var d=0,y=a;d<y.length;d++){var L=y[d].column,S=l[L].required(s);S&&r.push(i({column:L,value:null,error:"required"}))}return s}function fr(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=mt(l,e.parse):e.type?t=gi(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function mt(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function gi(l,e,n){switch(e){case String:return mt(l,si);case Number:return mt(l,oi);case Date:return mt(l,function(t){return ai(t,{properties:n.properties})});case Boolean:return mt(l,ii);default:if(typeof e=="function")return mt(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function jl(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=jl(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function di(l){for(var e=[],n=0;n<l.length;){var t=jl(l,",",n),r=fi(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var hi=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function bi(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function kn(l){"@babel/helpers - typeof";return kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kn(l)}function Rl(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;kn(o)==="object"&&(o=Object.keys(l[r])[0],s=Rl(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var vi=["schema","map"];function ur(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function en(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ur(Object(n),!0).forEach(function(t){wi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function wi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ki(l,e){if(l==null)return{};var n=yi(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function yi(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function Si(l,e,n){var t=n.schema,r=n.map,o=ki(n,vi);!t&&r&&(t=Rl(r));var s=Js(l,e,en(en({},o),{},{properties:t||o.properties}));return t?_i(s.data,t,en(en({},o),{},{properties:s.properties})):s}function Ci(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Uo(l).then(function(n){return Si(n,To,e)})}function Ti(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>Oi(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function Oi(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function Li(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ci(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Ul(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const yn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function Ai(l){return at(["get","intervention_type"],{area:rt.area,route:rt.route,crossing:rt.crossing,other:rt.other},"white")}function Ii(l){return[["Areas",rt.area],["Routes",rt.route],["Crossings",rt.crossing],["Other",rt.other]]}const J={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},Ne=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Sn(){let[l,e]=Bl(yn,J.funding_programmes);return[at(["get","funding_programme"],l,"grey"),e]}function Mi(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=Bl(l,J.current_milestone);return[at(["get","current_milestone"],e,"grey"),n]}function Bl(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Pi(l){let e,n;return e=new An({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ni(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new _t({props:u}),U.push(()=>W(e,"value",s)),e.$on("change",l[2]),r=new Ee({props:{label:"Legend",$$slots:{default:[Pi]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],V(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Fi(l,e,n){let t;ke(l,On,a=>n(4,t=a));let r="fundingProgramme",[o,s]=Sn();function u(){let a;r=="interventionType"?(a=Ai(),n(1,s=Ii())):r=="fundingProgramme"?n(1,[a,s]=Sn(),s):r=="currentMilestone"&&n(1,[a,s]=Mi(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class Ei extends K{constructor(e){super(),Q(this,e,Fi,Ni,Y,{})}}const ht=Kt({type:"FeatureCollection",features:[],schemes:{}}),ln=Kt(new Map),cr=Kt(!0),wt=Kt(""),kt=Kt("");function Di(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ji(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ri(l){let e,n,t,r,o,s;return t=new dt({props:{$$slots:{default:[ji]},$$scope:{ctx:l}}}),t.$on("click",l[16]),{c(){e=C("input"),n=O(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,i){$(u,e,i),We(e,l[6]),$(u,n,i),b(t,u,i),r=!0,o||(s=it(e,"input",l[15]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&We(e,u[6]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function Bi(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zi(l){let e,n,t,r,o,s;return t=new dt({props:{$$slots:{default:[Bi]},$$scope:{ctx:l}}}),t.$on("click",l[18]),{c(){e=C("input"),n=O(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,i){$(u,e,i),We(e,l[5]),$(u,n,i),b(t,u,i),r=!0,o||(s=it(e,"input",l[17]),o=!0)},p(u,i){i&32&&e.value!==u[5]&&We(e,u[5]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function qi(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,L,S,M;e=new dt({props:{$$slots:{default:[Di]},$$scope:{ctx:l}}}),e.$on("click",l[11]);function j(T){l[12](T)}let I={label:"Authority or region",choices:l[7],emptyOption:!0};l[2]!==void 0&&(I.value=l[2]),t=new _t({props:I}),U.push(()=>W(t,"value",j));function N(T){l[13](T)}let A={label:"Funding programme",choices:l[8],emptyOption:!0};l[3]!==void 0&&(A.value=l[3]),s=new _t({props:A}),U.push(()=>W(s,"value",N));function P(T){l[14](T)}let F={label:"Current milestone",choices:l[9],emptyOption:!0};return l[4]!==void 0&&(F.value=l[4]),a=new _t({props:F}),U.push(()=>W(a,"value",P)),g=new _n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Ri]},$$scope:{ctx:l}}}),y=new _n({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[zi]},$$scope:{ctx:l}}}),S=new Ei({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(s.$$.fragment),i=O(),h(a.$$.fragment),c=O(),h(g.$$.fragment),d=O(),h(y.$$.fragment),L=O(),h(S.$$.fragment)},m(T,E){b(e,T,E),$(T,n,E),b(t,T,E),$(T,o,E),b(s,T,E),$(T,i,E),b(a,T,E),$(T,c,E),b(g,T,E),$(T,d,E),b(y,T,E),$(T,L,E),b(S,T,E),M=!0},p(T,E){const H={};E&16777216&&(H.$$scope={dirty:E,ctx:T}),e.$set(H);const R={};E&128&&(R.choices=T[7]),!r&&E&4&&(r=!0,R.value=T[2],V(()=>r=!1)),t.$set(R);const D={};E&256&&(D.choices=T[8]),!u&&E&8&&(u=!0,D.value=T[3],V(()=>u=!1)),s.$set(D);const B={};E&512&&(B.choices=T[9]),!f&&E&16&&(f=!0,B.value=T[4],V(()=>f=!1)),a.$set(B);const X={};E&16777280&&(X.$$scope={dirty:E,ctx:T}),g.$set(X);const re={};E&16777248&&(re.$$scope={dirty:E,ctx:T}),y.$set(re)},i(T){M||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(s.$$.fragment,T),m(a.$$.fragment,T),m(g.$$.fragment,T),m(y.$$.fragment,T),m(S.$$.fragment,T),M=!0)},o(T){_(e.$$.fragment,T),_(t.$$.fragment,T),_(s.$$.fragment,T),_(a.$$.fragment,T),_(g.$$.fragment,T),_(y.$$.fragment,T),_(S.$$.fragment,T),M=!1},d(T){T&&(p(n),p(o),p(i),p(c),p(d),p(L)),v(e,T),v(t,T),v(s,T),v(a,T),v(g,T),v(y,T),v(S,T)}}}function Hi(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[10].route.toLocaleString()+"",s,u,i=l[10].area.toLocaleString()+"",a,f,c=l[10].crossing.toLocaleString()+"",g,d,y=l[10].other.toLocaleString()+"",L,S,M=$r(l[10].totalLength).toFixed(1)+"",j,I;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),g=k(c),d=k(" crossings, "),L=k(y),S=k(`
    other, with total LineString length of `),j=k(M),I=k(" miles)")},m(N,A){$(N,e,A),$(N,t,A),$(N,r,A),$(N,s,A),$(N,u,A),$(N,a,A),$(N,f,A),$(N,g,A),$(N,d,A),$(N,L,A),$(N,S,A),$(N,j,A),$(N,I,A)},p(N,A){A&1&&n!==(n=N[0].size.toLocaleString()+"")&&z(t,n),A&1024&&o!==(o=N[10].route.toLocaleString()+"")&&z(s,o),A&1024&&i!==(i=N[10].area.toLocaleString()+"")&&z(a,i),A&1024&&c!==(c=N[10].crossing.toLocaleString()+"")&&z(g,c),A&1024&&y!==(y=N[10].other.toLocaleString()+"")&&z(L,y),A&1024&&M!==(M=$r(N[10].totalLength).toFixed(1)+"")&&z(j,M)},d(N){N&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(g),p(d),p(L),p(S),p(j),p(I))}}}function Gi(l){let e,n,t;function r(s){l[19](s)}let o={$$slots:{default:[Hi]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&16778241&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ui(l){let e,n,t,r;return e=new Ee({props:{label:"Filters",$$slots:{default:[qi]},$$scope:{ctx:l}}}),t=new Xe({props:{small:!0,$$slots:{default:[Gi]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&16778236&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16778243&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function $r(l){return l*621371e-9}function Wi(l,e,n){let t,r,o,s;ke(l,kt,R=>n(5,t=R)),ke(l,wt,R=>n(6,r=R)),ke(l,ht,R=>n(20,o=R)),ke(l,ln,R=>n(21,s=R));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],g=new Set(yn.slice(0,-1)),d="",y=[],L="",S={area:0,route:0,crossing:0,other:0,totalLength:0};Ln(()=>{var X,re,oe;let R=new Set,D=new Set,B=new Set;for(let ce of s.values())(X=ce.browse)!=null&&X.authority_or_region&&R.add(ce.browse.authority_or_region),(re=ce.browse)!=null&&re.funding_programme&&D.add(ce.browse.funding_programme),(oe=ce.browse)!=null&&oe.current_milestone&&B.add(ce.browse.current_milestone);n(7,a=Array.from(R.entries())),a.sort(),n(8,c=yn.map(ce=>[ce,ce])),n(9,y=Array.from(B.entries())),y.sort()});function M(R,D,B,X,re){let oe=R.toLowerCase(),ce=D.toLowerCase(),Ie=ie=>{var Ae,ue,_e,ge,ze,Fe;if(oe&&!((Ae=ie.properties.name)!=null&&Ae.toLowerCase().includes(oe))&&!((ue=ie.properties.description)!=null&&ue.toLowerCase().includes(oe)))return!1;if(ce||B||X||re){let Ce=s.get(ie.properties.scheme_reference);if(B&&((_e=Ce.browse)==null?void 0:_e.authority_or_region)!=B||X&&X!=="Other"&&((ge=Ce.browse)==null?void 0:ge.funding_programme)!=X||X==="Other"&&g.has(((ze=Ce.browse)==null?void 0:ze.funding_programme)??"")||re&&((Fe=Ce.browse)==null?void 0:Fe.current_milestone)!=re||ce&&!Ce.scheme_reference.toLowerCase().includes(ce)&&!(Ce.scheme_name??"").toLowerCase().includes(ce))return!1}return!0};n(0,u=new Set(o.features.filter(Ie).map(ie=>ie.properties.scheme_reference))),n(10,S={area:0,route:0,crossing:0,other:0,totalLength:0});let Te=ie=>{var Ae,ue;return!(!u.has(ie.properties.scheme_reference)||oe&&!((Ae=ie.properties.name)!=null&&Ae.toLowerCase().includes(oe))&&!((ue=ie.properties.description)!=null&&ue.toLowerCase().includes(oe)))};for(let ie of o.features)Te(ie)?(delete ie.properties.hide_while_editing,n(10,S[ie.properties.intervention_type]++,S),ie.geometry.type=="LineString"&&ie.properties.length_meters&&n(10,S.totalLength+=ie.properties.length_meters,S)):ie.properties.hide_while_editing=!0;ht.set(o),n(10,S)}function j(){n(2,f=""),n(3,d=""),n(4,L=""),st(wt,r="",r),st(kt,t="",t)}function I(R){f=R,n(2,f)}function N(R){d=R,n(3,d)}function A(R){L=R,n(4,L)}function P(){r=this.value,wt.set(r)}const F=()=>st(wt,r="",r);function T(){t=this.value,kt.set(t)}const E=()=>st(kt,t="",t);function H(R){i=R,n(1,i)}return l.$$set=R=>{"schemesToBeShown"in R&&n(0,u=R.schemesToBeShown),"show"in R&&n(1,i=R.show)},l.$$.update=()=>{l.$$.dirty&124&&M(r,t,f,d,L)},[u,i,f,d,L,t,r,a,c,y,S,j,I,N,A,P,F,T,E,H]}class Vi extends K{constructor(e){super(),Q(this,e,Wi,Ui,Y,{schemesToBeShown:0,show:1})}}function Xi(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yi(l){let e,n,t,r,o;return t=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Xi]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("License: "),h(t.$$.fragment),r=k(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),w(e,n),b(t,e,null),w(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){_(t.$$.fragment,s),o=!1},d(s){s&&p(e),v(t)}}}class Le extends K{constructor(e){super(),Q(this,e,null,Yi,Y,{})}}function pr(l,e,n){const t=l.slice();return t[2]=e[n],t}function mr(l,e,n){const t=l.slice();return t[5]=e[n],t}function _r(l){let e,n;return{c(){e=C("span"),n=k(` 
    `),Se(e,"background",l[5]),Se(e,"width","100%"),Se(e,"border","1px solid black")},m(t,r){$(t,e,r),w(e,n)},p(t,r){r&1&&Se(e,"background",t[5])},d(t){t&&p(e)}}}function gr(l){let e,n=l[2]+"",t;return{c(){e=C("span"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&z(t,n)},d(r){r&&p(e)}}}function Ji(l){let e,n,t,r=De(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=_r(mr(l,r,i));let s=De(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=gr(pr(l,s,i));return{c(){e=C("div");for(let i=0;i<o.length;i+=1)o[i].c();n=O(),t=C("div");for(let i=0;i<u.length;i+=1)u[i].c();Se(e,"display","flex"),Se(t,"display","flex"),Se(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=De(i[0]);let f;for(f=0;f<r.length;f+=1){const c=mr(i,r,f);o[f]?o[f].p(c,a):(o[f]=_r(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=De(i[1]);let f;for(f=0;f<s.length;f+=1){const c=pr(i,s,f);u[f]?u[f].p(c,a):(u[f]=gr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:ne,o:ne,d(i){i&&(p(e),p(n),p(t)),gt(o,i),gt(u,i)}}}function Ki(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Be extends K{constructor(e){super(),Q(this,e,Ki,Ji,Y,{colorScale:0,limits:1})}}function dr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Qi(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zi(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xi(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ea(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ta(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Zi]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[xi]},$$scope:{ctx:l}}}),f=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ea]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),u=O(),i=C("p"),a=k("License: "),h(f.$$.fragment),c=k(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(d,u,y),$(d,i,y),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,y){const L={};y&65536&&(L.$$scope={dirty:y,ctx:d}),t.$set(L);const S={};y&65536&&(S.$$scope={dirty:y,ctx:d}),o.$set(S);const M={};y&65536&&(M.$$scope={dirty:y,ctx:d}),f.$set(M)},i(d){g||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(u),p(i)),v(t),v(o),v(f)}}}function na(l){let e,n,t;return n=new $e({props:{$$slots:{default:[ta]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function hr(l){let e,n;return e=new Be({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ra(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function la(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oa(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sa(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ia(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y;return o=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[la]},$$scope:{ctx:l}}}),u=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[oa]},$$scope:{ctx:l}}}),g=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[sa]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=C("p"),r=k("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=k(". Output area boundaries from "),h(u.$$.fragment),i=k("."),a=O(),f=C("p"),c=k("License: "),h(g.$$.fragment),d=k(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(L,S){$(L,e,S),$(L,n,S),$(L,t,S),w(t,r),b(o,t,null),w(t,s),b(u,t,null),w(t,i),$(L,a,S),$(L,f,S),w(f,c),b(g,f,null),w(f,d),y=!0},p(L,S){const M={};S&65536&&(M.$$scope={dirty:S,ctx:L}),o.$set(M);const j={};S&65536&&(j.$$scope={dirty:S,ctx:L}),u.$set(j);const I={};S&65536&&(I.$$scope={dirty:S,ctx:L}),g.$set(I)},i(L){y||(m(o.$$.fragment,L),m(u.$$.fragment,L),m(g.$$.fragment,L),y=!0)},o(L){_(o.$$.fragment,L),_(u.$$.fragment,L),_(g.$$.fragment,L),y=!1},d(L){L&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(g)}}}function aa(l){let e,n,t;return n=new $e({props:{$$slots:{default:[ia]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function br(l){let e,n;return e=new Be({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fa(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ua(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ca(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $a(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ua]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ca]},$$scope:{ctx:l}}}),i=new Le({}),{c(){e=C("p"),n=k("Population density data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function pa(l){let e,n,t;return n=new $e({props:{$$slots:{default:[$a]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function vr(l){let e,n,t,r;return t=new Be({props:{colorScale:l[4],limits:l[6]().map(wa)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",n=O(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function ma(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=C("p"),n=k("There are "),t=C("b"),o=k(r),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){$(a,e,f),w(e,n),w(e,t),w(t,o),w(e,s),w(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&z(o,r),f&8192&&u!==(u=a[14]+"")&&z(i,u)},d(a){a&&p(e)}}}function _a(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=C("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=C("b"),i=k(u),a=k(`
          cars`)},m(f,c){$(f,e,c),w(e,n),w(e,r),w(e,o),w(e,s),w(s,i),w(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&z(r,t),c&8200&&u!==(u=f[15]+"")&&z(i,u)},d(f){f&&p(e)}}}function ga(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=C("p"),n=C("b"),r=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){$(f,e,c),w(e,n),w(n,r),w(n,o),w(e,s),w(e,i),w(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&z(r,t),c&8192&&u!==(u=f[14]+"")&&z(i,u)},d(f){f&&p(e)}}}function da(l){dr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?ga:o[3]=="average_cars_per_household"?_a:ma}let t=n(l),r=t(l);return{c(){r.c(),e=je()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){dr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function ha(l){let e,n;return e=new fe({props:{$$slots:{default:[da,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ba(l){let e,n,t,r;const o=[q(Ke),{sourceLayer:Ke},{paint:{"fill-color":we(["get",l[3]],l[6](),l[4]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ha]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Re({props:s}),e.$on("click",l[5]);const u=[q(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&88?te(o,[f&0&&ae(q(Ke)),f&0&&{sourceLayer:Ke},f&88&&{paint:{"fill-color":we(["get",a[3]],a[6](),a[4]),"fill-opacity":Z(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&8?te(u,[f&0&&ae(q(`${Ke}-outline`)),f&0&&{sourceLayer:Ke},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function va(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y;function L(T){l[7](T)}let S={$$slots:{right:[na],default:[Qi]},$$scope:{ctx:l}};l[0]!==void 0&&(S.checked=l[0]),e=new le({props:S}),U.push(()=>W(e,"checked",L)),e.$on("change",l[8]);let M=l[3]=="percent_households_with_car"&&hr(l);function j(T){l[9](T)}let I={$$slots:{right:[aa],default:[ra]},$$scope:{ctx:l}};l[1]!==void 0&&(I.checked=l[1]),o=new le({props:I}),U.push(()=>W(o,"checked",j)),o.$on("change",l[10]);let N=l[3]=="average_cars_per_household"&&br(l);function A(T){l[11](T)}let P={$$slots:{right:[pa],default:[fa]},$$scope:{ctx:l}};l[2]!==void 0&&(P.checked=l[2]),a=new le({props:P}),U.push(()=>W(a,"checked",A)),a.$on("change",l[12]);let F=l[3]=="population_density"&&vr(l);return d=new be({props:{url:`pmtiles://${he()}/v1/${Ke}.pmtiles`,$$slots:{default:[ba]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),M&&M.c(),r=O(),h(o.$$.fragment),u=O(),N&&N.c(),i=O(),h(a.$$.fragment),c=O(),F&&F.c(),g=O(),h(d.$$.fragment)},m(T,E){b(e,T,E),$(T,t,E),M&&M.m(T,E),$(T,r,E),b(o,T,E),$(T,u,E),N&&N.m(T,E),$(T,i,E),b(a,T,E),$(T,c,E),F&&F.m(T,E),$(T,g,E),b(d,T,E),y=!0},p(T,[E]){const H={};E&65536&&(H.$$scope={dirty:E,ctx:T}),!n&&E&1&&(n=!0,H.checked=T[0],V(()=>n=!1)),e.$set(H),T[3]=="percent_households_with_car"?M?(M.p(T,E),E&8&&m(M,1)):(M=hr(T),M.c(),m(M,1),M.m(r.parentNode,r)):M&&(pe(),_(M,1,1,()=>{M=null}),me());const R={};E&65536&&(R.$$scope={dirty:E,ctx:T}),!s&&E&2&&(s=!0,R.checked=T[1],V(()=>s=!1)),o.$set(R),T[3]=="average_cars_per_household"?N?(N.p(T,E),E&8&&m(N,1)):(N=br(T),N.c(),m(N,1),N.m(i.parentNode,i)):N&&(pe(),_(N,1,1,()=>{N=null}),me());const D={};E&65536&&(D.$$scope={dirty:E,ctx:T}),!f&&E&4&&(f=!0,D.checked=T[2],V(()=>f=!1)),a.$set(D),T[3]=="population_density"?F?(F.p(T,E),E&8&&m(F,1)):(F=vr(T),F.c(),m(F,1),F.m(g.parentNode,g)):F&&(pe(),_(F,1,1,()=>{F=null}),me());const B={};E&65544&&(B.$$scope={dirty:E,ctx:T}),d.$set(B)},i(T){y||(m(e.$$.fragment,T),m(M),m(o.$$.fragment,T),m(N),m(a.$$.fragment,T),m(F),m(d.$$.fragment,T),y=!0)},o(T){_(e.$$.fragment,T),_(M),_(o.$$.fragment,T),_(N),_(a.$$.fragment,T),_(F),_(d.$$.fragment,T),y=!1},d(T){T&&(p(t),p(r),p(u),p(i),p(c),p(g)),v(e,T),M&&M.d(T),v(o,T),N&&N.d(T),v(a,T),F&&F.d(T),v(d,T)}}}let Ke="census_output_areas";const wa=l=>l.toLocaleString();function ka(l,e,n){let t=J.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(S){let M=S.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${M}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${M}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(S){r=S,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(S){o=S,n(1,o)}const d=()=>{n(0,r=!1),n(2,s=!1)};function y(S){s=S,n(2,s)}const L=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,g,d,y,L]}class ya extends K{constructor(e){super(),Q(this,e,ka,va,Y,{})}}function Sa(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Ca(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ta(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Ca]},$$scope:{ctx:l}}}),s=new Le({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of December 2022."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Oa(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Ta]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function La(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Aa(l){let e,n;return e=new fe({props:{$$slots:{default:[La,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ia(l){let e,n,t,r;const o=[q(yt),{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Aa]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Re({props:s}),e.$on("click",Pa);const u=[q(`${yt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(yt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(q(`${yt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ma(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Oa],default:[Sa]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new bt({props:{data:`${he()}/v1/${yt}.geojson`,$$slots:{default:[Ia]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let yt="combined_authorities";function Pa(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Na(l,e,n){let t=J.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Fa extends K{constructor(e){super(),Q(this,e,Na,Ma,Y,{})}}function Ea(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Da(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ra(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Da]},$$scope:{ctx:l}}}),o=new x({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ja]},$$scope:{ctx:l}}}),i=new Le({}),{c(){e=C("p"),n=k("The 2019 English IMD scores come from "),h(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=k("."),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function Ba(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Ra]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function wr(l){let e,n;return e=new Be({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function za(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,g=l[4].rank.toLocaleString()+"",d,y;return{c(){e=C("p"),t=k(n),r=k(` has an IMD score of
        `),o=C("b"),u=k(s),i=O(),a=C("p"),f=k("Rank: "),c=C("b"),d=k(g),y=k(`
        / 32,844 LSOAs`)},m(L,S){$(L,e,S),w(e,t),w(e,r),w(e,o),w(o,u),$(L,i,S),$(L,a,S),w(a,f),w(a,c),w(c,d),w(a,y)},p(L,S){S&16&&n!==(n=L[4].LSOA11CD+"")&&z(t,n),S&16&&s!==(s=L[4].score+"")&&z(u,s),S&16&&g!==(g=L[4].rank.toLocaleString()+"")&&z(d,g)},d(L){L&&(p(e),p(i),p(a))}}}function qa(l){let e,n;return e=new fe({props:{$$slots:{default:[za,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ha(l){let e,n,t,r;const o=[q(Qe),{sourceLayer:Qe},{paint:{"fill-color":we(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[qa]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Re({props:s});const u=[q(`${Qe}-outline`),{sourceLayer:Qe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(q(Qe)),f&0&&{sourceLayer:Qe},f&6&&{paint:{"fill-color":we(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Z(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?te(u,[f&0&&ae(q(`${Qe}-outline`)),f&0&&{sourceLayer:Qe},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ga(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Ba],default:[Ea]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&wr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Qe}.pmtiles`,$$slots:{default:[Ha]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=wr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(pe(),_(a,1,1,()=>{a=null}),me());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Qe="imd";function Ua(l,e,n){let t=J.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Wa extends K{constructor(e){super(),Q(this,e,Ua,Ga,Y,{})}}function Va(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Xa(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ya(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Xa]},$$scope:{ctx:l}}}),s=new Le({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Ja(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Ya]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ka(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Qa(l){let e,n;return e=new fe({props:{$$slots:{default:[Ka,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Za(l){let e,n,t,r;const o=[q(St),{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Qa]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Re({props:s}),e.$on("click",ef);const u=[q(`${St}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(St)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(q(`${St}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function xa(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Ja],default:[Va]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new bt({props:{data:`${he()}/v1/${St}.geojson`,$$slots:{default:[Za]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let St="local_authority_districts";function ef(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function tf(l,e,n){let t=J.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class nf extends K{constructor(e){super(),Q(this,e,tf,xa,Y,{})}}function rf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function lf(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sf(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function af(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ff(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uf(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,L,S,M,j,I,N,A,P;return t=new x({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[lf]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[of]},$$scope:{ctx:l}}}),u=new x({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[sf]},$$scope:{ctx:l}}}),d=new x({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[af]},$$scope:{ctx:l}}}),j=new x({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ff]},$$scope:{ctx:l}}}),A=new Le({}),{c(){e=C("p"),n=k("LPAs may be a "),h(t.$$.fragment),r=k(", "),h(o.$$.fragment),s=k("y, or "),h(u.$$.fragment),i=k("."),a=O(),f=C("p"),c=C("strong"),g=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),y=k(" to get more details."),L=O(),S=C("p"),M=k("Data from ONS Geography via "),h(j.$$.fragment),I=k(", as of November 2022."),N=O(),h(A.$$.fragment)},m(F,T){$(F,e,T),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),b(u,e,null),w(e,i),$(F,a,T),$(F,f,T),w(f,c),w(c,g),b(d,c,null),w(c,y),$(F,L,T),$(F,S,T),w(S,M),b(j,S,null),w(S,I),$(F,N,T),b(A,F,T),P=!0},p(F,T){const E={};T&16&&(E.$$scope={dirty:T,ctx:F}),t.$set(E);const H={};T&16&&(H.$$scope={dirty:T,ctx:F}),o.$set(H);const R={};T&16&&(R.$$scope={dirty:T,ctx:F}),u.$set(R);const D={};T&16&&(D.$$scope={dirty:T,ctx:F}),d.$set(D);const B={};T&16&&(B.$$scope={dirty:T,ctx:F}),j.$set(B)},i(F){P||(m(t.$$.fragment,F),m(o.$$.fragment,F),m(u.$$.fragment,F),m(d.$$.fragment,F),m(j.$$.fragment,F),m(A.$$.fragment,F),P=!0)},o(F){_(t.$$.fragment,F),_(o.$$.fragment,F),_(u.$$.fragment,F),_(d.$$.fragment,F),_(j.$$.fragment,F),_(A.$$.fragment,F),P=!1},d(F){F&&(p(e),p(a),p(f),p(L),p(S),p(N)),v(t),v(o),v(u),v(d),v(j),v(A,F)}}}function cf(l){let e,n,t;return n=new $e({props:{$$slots:{default:[uf]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function $f(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function pf(l){let e,n;return e=new fe({props:{$$slots:{default:[$f,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mf(l){let e,n,t,r;const o=[q(Ze),{sourceLayer:Ze},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[pf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Re({props:s});const u=[q(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(Ze)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(q(`${Ze}-outline`)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function _f(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[cf],default:[rf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${Ze}.pmtiles`,$$slots:{default:[mf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ze="local_planning_authorities";function gf(l,e,n){let t=J.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class df extends K{constructor(e){super(),Q(this,e,gf,_f,Y,{})}}function hf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function bf(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vf(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[bf]},$$scope:{ctx:l}}}),s=new Le({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function wf(l){let e,n,t;return n=new $e({props:{$$slots:{default:[vf]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function kf(l){let e,n=l[3].Name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&z(t,n)},d(r){r&&p(e)}}}function yf(l){let e,n;return e=new fe({props:{$$slots:{default:[kf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sf(l){let e,n,t,r;const o=[q(xe),{sourceLayer:xe},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[yf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Re({props:s}),e.$on("click",Tf);const u=[q(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(xe)),f&0&&{sourceLayer:xe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(q(`${xe}-outline`)),f&0&&{sourceLayer:xe},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Cf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[wf],default:[hf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${xe}.pmtiles`,$$slots:{default:[Sf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let xe="parliamentary_constituencies";function Tf(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Of(l,e,n){let t=J.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Lf extends K{constructor(e){super(),Q(this,e,Of,Cf,Y,{})}}function Af(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function If(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mf(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[If]},$$scope:{ctx:l}}}),i=new Le({}),{c(){e=C("p"),n=k("Most layers show air quality data from "),h(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        µgm
        `),o=C("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),w(e,o),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),t.$set(g)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(i,f)}}}function Pf(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Mf]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function kr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,g,d,y,L,S,M,j;function I(A){l[7](A)}let N={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return l[0]!==void 0&&(N.value=l[0]),e=new _t({props:N}),U.push(()=>W(e,"value",I)),{c(){h(e.$$.fragment),t=O(),r=C("p"),s=k(o),u=O(),i=C("div"),a=C("label"),f=k(`Opacity
      `),c=C("input"),g=O(),d=C("img"),G(c,"type","range"),G(c,"min","0"),G(c,"max","100"),nn(d.src,y=l[5](l[0]))||G(d,"src",y),G(d,"width",150),G(d,"alt",L=`Legend for ${l[0]} layer`)},m(A,P){b(e,A,P),$(A,t,P),$(A,r,P),w(r,s),$(A,u,P),$(A,i,P),w(i,a),w(a,f),w(a,c),We(c,l[2]),$(A,g,P),$(A,d,P),S=!0,M||(j=[it(c,"change",l[8]),it(c,"input",l[8])],M=!0)},p(A,P){const F={};!n&&P&1&&(n=!0,F.value=A[0],V(()=>n=!1)),e.$set(F),(!S||P&1)&&o!==(o=A[3](A[0])+"")&&z(s,o),P&4&&We(c,A[2]),(!S||P&1&&!nn(d.src,y=A[5](A[0])))&&G(d,"src",y),(!S||P&1&&L!==(L=`Legend for ${A[0]} layer`))&&G(d,"alt",L)},i(A){S||(m(e.$$.fragment,A),S=!0)},o(A){_(e.$$.fragment,A),S=!1},d(A){A&&(p(t),p(r),p(u),p(i),p(g),p(d)),v(e,A),M=!1,bl(j)}}}function Nf(l){let e,n;const t=[q("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new oo({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ff(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={$$slots:{right:[Pf],default:[Af]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&kr(l);return o=new vo({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Nf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=kr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(pe(),_(a,1,1,()=>{a=null}),me());const d={};c&1&&(d.tiles=[f[4](f[0])]),c&2054&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}function Ef(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let L=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${L}`}function f(y){let L=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${L}`}function c(y){r=y,n(1,r)}function g(y){s=y,n(0,s)}function d(){o=Gt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s])},[s,r,o,i,a,f,c,g,d]}class Df extends K{constructor(e){super(),Q(this,e,Ef,Ff,Y,{})}}function jf(l){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rf(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bf(l){let e,n,t,r,o,s,u,i,a;return o=new x({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Rf]},$$scope:{ctx:l}}}),i=new Le({}),{c(){e=C("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=O(),t=C("p"),r=k("Data from June 2019, produced by "),h(o.$$.fragment),s=k(". See there for methodology details"),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),w(t,r),b(o,t,null),w(t,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(i,f)}}}function zf(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Bf]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function yr(l){let e,n;return e=new Be({props:{colorScale:l[1],limits:["55","65","75",">"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qf(l){let e,n=l[3].noiseclass+"",t,r,o=Sr(l[3].noiseclass)+"",s,u;return{c(){e=C("p"),t=k(n),r=k(" dB ("),s=k(o),u=k(")")},m(i,a){$(i,e,a),w(e,t),w(e,r),w(e,s),w(e,u)},p(i,a){a&8&&n!==(n=i[3].noiseclass+"")&&z(t,n),a&8&&o!==(o=Sr(i[3].noiseclass)+"")&&z(s,o)},d(i){i&&p(e)}}}function Hf(l){let e,n;return e=new fe({props:{$$slots:{default:[qf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gf(l){let e,n;const t=[q(Ct),{sourceLayer:Ct},{paint:{"fill-color":at(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][0],"65.0-69.9":l[1][1],"70.0-74.9":l[1][1],">=75.0":l[1][2]},"red"),"fill-opacity":Z(.5,.8)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Hf]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Re({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Ct)),s&0&&{sourceLayer:Ct},s&2&&{paint:{"fill-color":at(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":Z(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Uf(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[zf],default:[jf]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&yr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Ct}.pmtiles`,$$slots:{default:[Gf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=yr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(pe(),_(a,1,1,()=>{a=null}),me());const d={};c&17&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ct="road_noise";function Sr(l){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[l]}function Wf(l,e,n){let t=[J.sequential_low_to_high[0],J.sequential_low_to_high[2],J.sequential_low_to_high[4]],r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Vf extends K{constructor(e){super(),Q(this,e,Wf,Uf,Y,{})}}function Xf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Wards`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Yf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jf(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Yf]},$$scope:{ctx:l}}}),s=new Le({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Kf(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Jf]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Qf(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Zf(l){let e,n;return e=new fe({props:{$$slots:{default:[Qf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xf(l){let e,n,t,r;const o=[q(et),{sourceLayer:et},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Zf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Re({props:s}),e.$on("click",tu);const u=[q(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(et)),f&0&&{sourceLayer:et},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(q(`${et}-outline`)),f&0&&{sourceLayer:et},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function eu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Kf],default:[Xf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${et}.pmtiles`,$$slots:{default:[xf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let et="wards";function tu(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function nu(l,e,n){let t=J.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class ru extends K{constructor(e){super(),Q(this,e,nu,eu,Y,{})}}function lu(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ou(l){let e,n,t,r;return t=new x({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[lu]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("License: "),h(t.$$.fragment)},m(o,s){$(o,e,s),w(e,n),b(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&p(e),v(t)}}}class Ye extends K{constructor(e){super(),Q(this,e,null,ou,Y,{})}}function su(l){let e,n,t;return e=new Oe({props:{color:J.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function iu(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function au(l){let e,n,t,r,o,s,u,i,a;return o=new x({props:{href:"https://gtfs.org",$$slots:{default:[iu]},$$scope:{ctx:l}}}),i=new Ye({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=C("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),w(t,r),b(o,t,null),w(t,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(i,f)}}}function fu(l){let e,n,t;return n=new $e({props:{$$slots:{default:[au]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function uu(l){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cu(l){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $u(l){let e;function n(o,s){return o[2].has_bus_lane?cu:uu}let t=n(l),r=t(l);return{c(){r.c(),e=je()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function pu(l){let e,n;return e=new fe({props:{$$slots:{default:[$u,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mu(l){let e,n;const t=[q(Tt),{sourceLayer:Tt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],J.bus_route_with_lane,J.bus_route_without_lane],"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[pu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Tt)),s&0&&{sourceLayer:Tt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _u(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[fu],default:[su]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${Tt}.pmtiles`,$$slots:{default:[mu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Tt="bus_routes";function gu(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class du extends K{constructor(e){super(),Q(this,e,gu,_u,Y,{})}}function Cr(l){const e=Ou(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function Tr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function hu(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bu(l){let e,n,t,r,o,s,u,i;return u=new Ye({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=O(),o=C("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=O(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),b(u,a,f),i=!0},p:ne,i(a){i||(m(u.$$.fragment,a),i=!0)},o(a){_(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),v(u,a)}}}function vu(l){let e,n,t;return n=new $e({props:{$$slots:{default:[bu]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Or(l){let e,n,t;return n=new Xe({props:{$$slots:{default:[ku]},$$scope:{ctx:l}}}),{c(){e=C("div"),h(n.$$.fragment),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function wu(l){let e,n,t=l[9]+"",r,o,s;return e=new Oe({props:{color:l[10]}}),{c(){h(e.$$.fragment),n=O(),r=k(t),o=O()},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:ne,i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function Lr(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[wu]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function ku(l){let e,n,t=De(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Lr(Tr(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=je()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=De(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Tr(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Lr(a),r[i].c(),m(r[i],1),r[i].m(e.parentNode,e))}for(pe(),i=t.length;i<r.length;i+=1)o(i);me()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),gt(r,s)}}}function yu(l){Cr(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,g,d=l[8]+"",y;return{c(){e=C("h2"),t=k(n),r=O(),o=C("p"),s=k("Direction: "),u=C("b"),a=O(),f=C("p"),c=k("Width: "),g=C("b"),y=k(d)},m(L,S){$(L,e,S),w(e,t),$(L,r,S),$(L,o,S),w(o,s),w(o,u),u.innerHTML=i,$(L,a,S),$(L,f,S),w(f,c),w(f,g),w(g,y)},p(L,S){Cr(L),S&32&&n!==(n=L[6]+"")&&z(t,n),S&32&&i!==(i=L[7]+"")&&(u.innerHTML=i),S&32&&d!==(d=L[8]+"")&&z(y,d)},d(L){L&&(p(e),p(r),p(o),p(a),p(f))}}}function Su(l){let e,n;return e=new fe({props:{$$slots:{default:[yu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cu(l){let e,n;const t=[q(Ot),{sourceLayer:Ot},{paint:{"line-color":at(["get","kind"],{track:J.cycle_paths.track,lane:J.cycle_paths.lane,shared_use_segregated:J.cycle_paths.shared_use_segregated,shared_use_unsegregated:J.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Ar(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[Su]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),e.$on("click",Lu),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Ot)),s&0&&{sourceLayer:Ot},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Ar(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Tu(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[vu],default:[hu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Or(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Ot}.pmtiles`,$$slots:{default:[Cu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Or(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(pe(),_(a,1,1,()=>{a=null}),me());const d={};c&8195&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ot="cycle_paths";function Ou(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function Lu(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Ar(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function Au(l,e,n){let t=[["track","Separated tracks",J.cycle_paths.track],["lane","Unprotected lanes",J.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",J.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",J.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class Iu extends K{constructor(e){super(),Q(this,e,Au,Tu,Y,{})}}function Mu(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Pu(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nu(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Pu]},$$scope:{ctx:l}}}),s=new Le({}),{c(){e=C("p"),n=k("Data from the "),h(t.$$.fragment),r=k(", as of September 2021."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Fu(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Nu]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Eu(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&z(t,n)},d(r){r&&p(e)}}}function Du(l){let e,n;return e=new fe({props:{$$slots:{default:[Eu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ju(l){let e,n;const t=[q(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Du]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Lt)),s&0&&{sourceLayer:Lt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ru(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Fu],default:[Mu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${Lt}.pmtiles`,$$slots:{default:[ju]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Lt="mrn";function Bu(l,e,n){let t=J.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class zu extends K{constructor(e){super(),Q(this,e,Bu,Ru,Y,{})}}function qu(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Hu(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gu(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Hu]},$$scope:{ctx:l}}}),s=new Le({}),{c(){e=C("p"),n=k("Data from Sustrans about the "),h(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Uu(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Gu]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ir(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=C("li"),n=k("Description: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&z(o,r)},d(s){s&&p(e)}}}function Mr(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=C("li"),n=k("Is greenway: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&z(o,r)},d(s){s&&p(e)}}}function Pr(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=C("li"),n=k("Route type: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&z(o,r)},d(s){s&&p(e)}}}function Nr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=C("li"),n=k("Route number: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&z(o,r)},d(s){s&&p(e)}}}function Fr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=C("li"),n=k("Route Category: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&z(o,r)},d(s){s&&p(e)}}}function Er(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=C("li"),n=k("Open Status: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&z(o,r)},d(s){s&&p(e)}}}function Dr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=C("li"),n=k("Surface: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&z(o,r)},d(s){s&&p(e)}}}function jr(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=C("li"),n=k("Quality: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&z(o,r)},d(s){s&&p(e)}}}function Rr(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=C("li"),n=k("Road Class: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&z(o,r)},d(s){s&&p(e)}}}function Wu(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&Ir(l),c=l[3].Greenway&&Mr(l),g=l[3].RouteType&&Pr(l),d=l[3].RouteNo&&Nr(l),y=l[3].RouteCat&&Fr(l),L=l[3].OpenStatus&&Er(l),S=l[3].Surface&&Dr(l),M=l[3].Quality&&jr(l),j=l[3].RoadClass&&Rr(l);return{c(){e=C("ul"),f&&f.c(),n=O(),c&&c.c(),t=O(),g&&g.c(),r=O(),d&&d.c(),o=O(),y&&y.c(),s=O(),L&&L.c(),u=O(),S&&S.c(),i=O(),M&&M.c(),a=O(),j&&j.c()},m(I,N){$(I,e,N),f&&f.m(e,null),w(e,n),c&&c.m(e,null),w(e,t),g&&g.m(e,null),w(e,r),d&&d.m(e,null),w(e,o),y&&y.m(e,null),w(e,s),L&&L.m(e,null),w(e,u),S&&S.m(e,null),w(e,i),M&&M.m(e,null),w(e,a),j&&j.m(e,null)},p(I,N){I[3].Desc_?f?f.p(I,N):(f=Ir(I),f.c(),f.m(e,n)):f&&(f.d(1),f=null),I[3].Greenway?c?c.p(I,N):(c=Mr(I),c.c(),c.m(e,t)):c&&(c.d(1),c=null),I[3].RouteType?g?g.p(I,N):(g=Pr(I),g.c(),g.m(e,r)):g&&(g.d(1),g=null),I[3].RouteNo?d?d.p(I,N):(d=Nr(I),d.c(),d.m(e,o)):d&&(d.d(1),d=null),I[3].RouteCat?y?y.p(I,N):(y=Fr(I),y.c(),y.m(e,s)):y&&(y.d(1),y=null),I[3].OpenStatus?L?L.p(I,N):(L=Er(I),L.c(),L.m(e,u)):L&&(L.d(1),L=null),I[3].Surface?S?S.p(I,N):(S=Dr(I),S.c(),S.m(e,i)):S&&(S.d(1),S=null),I[3].Quality?M?M.p(I,N):(M=jr(I),M.c(),M.m(e,a)):M&&(M.d(1),M=null),I[3].RoadClass?j?j.p(I,N):(j=Rr(I),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},d(I){I&&p(e),f&&f.d(),c&&c.d(),g&&g.d(),d&&d.d(),y&&y.d(),L&&L.d(),S&&S.d(),M&&M.d(),j&&j.d()}}}function Vu(l){let e,n;return e=new fe({props:{$$slots:{default:[Wu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xu(l){let e,n;const t=[q(At),{sourceLayer:At},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Vu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(At)),s&0&&{sourceLayer:At},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Uu],default:[qu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${At}.pmtiles`,$$slots:{default:[Xu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let At="national_cycle_network";function Ju(l,e,n){let t=J.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ku extends K{constructor(e){super(),Q(this,e,Ju,Yu,Y,{})}}function Qu(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zu(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xu(l){let e,n,t,r,o,s,u,i,a;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Zu]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=O(),t=C("p"),t.textContent="Data valid as of 1 January, 2024",r=O(),o=C("p"),s=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function ec(l){let e,n,t;return n=new $e({props:{$$slots:{default:[xu]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Br(l){let e,n;return e=new Be({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tc(l){let e,n,t,r=l[4].side+"",o,s,u,i,a,f=l[4].average+"",c,g,d,y,L,S,M=l[4].minimum+"",j,I;return{c(){e=C("p"),n=k("Side of the road: "),t=C("b"),o=k(r),s=O(),u=C("p"),i=k("Average width: "),a=C("b"),c=k(f),g=k(`
        meters`),d=O(),y=C("p"),L=k("Minimum width: "),S=C("b"),j=k(M),I=k(`
        meters`)},m(N,A){$(N,e,A),w(e,n),w(e,t),w(t,o),$(N,s,A),$(N,u,A),w(u,i),w(u,a),w(a,c),w(u,g),$(N,d,A),$(N,y,A),w(y,L),w(y,S),w(S,j),w(y,I)},p(N,A){A&16&&r!==(r=N[4].side+"")&&z(o,r),A&16&&f!==(f=N[4].average+"")&&z(c,f),A&16&&M!==(M=N[4].minimum+"")&&z(j,M)},d(N){N&&(p(e),p(s),p(u),p(d),p(y))}}}function nc(l){let e,n;return e=new fe({props:{$$slots:{default:[tc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rc(l){let e,n;const t=[q(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],l[2],l[1]),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[nc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(It)),s&0&&{sourceLayer:It},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Ne,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function lc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[ec],default:[Qu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Br(l);return o=new be({props:{url:`pmtiles://${on()}/v1/${It}.pmtiles`,$$slots:{default:[rc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Br(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(pe(),_(a,1,1,()=>{a=null}),me());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let It="pavement_widths";function oc(l,e,n){let t=J.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class sc extends K{constructor(e){super(),Q(this,e,oc,lc,Y,{})}}function ic(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ac(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fc(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uc(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new x({props:{href:"https://www.pct.bike",$$slots:{default:[ac]},$$scope:{ctx:l}}}),a=new x({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[fc]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=O(),o=C("p"),s=k("See "),h(u.$$.fragment),i=k(" and "),h(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(g,d){$(g,e,d),$(g,n,d),$(g,t,d),$(g,r,d),$(g,o,d),w(o,s),b(u,o,null),w(o,i),b(a,o,null),w(o,f),c=!0},p(g,d){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),u.$set(y);const L={};d&1024&&(L.$$scope={dirty:d,ctx:g}),a.$set(L)},i(g){c||(m(u.$$.fragment,g),m(a.$$.fragment,g),c=!0)},o(g){_(u.$$.fragment,g),_(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(r),p(o)),v(u),v(a)}}}function cc(l){let e,n,t;return n=new $e({props:{$$slots:{default:[uc]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function zr(l){let e,n,t,r,o,s,u,i;e=new Be({props:{colorScale:l[3],limits:l[4]}});function a(d){l[7](d)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new vl({props:f}),U.push(()=>W(t,"value",a));function c(d){l[8](d)}let g={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(g.value=l[1]),s=new _t({props:g}),U.push(()=>W(s,"value",c)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(s.$$.fragment)},m(d,y){b(e,d,y),$(d,n,y),b(t,d,y),$(d,o,y),b(s,d,y),i=!0},p(d,y){const L={};!r&&y&1&&(r=!0,L.value=d[0],V(()=>r=!1)),t.$set(L);const S={};!u&&y&2&&(u=!0,S.value=d[1],V(()=>u=!1)),s.$set(S)},i(d){i||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(s.$$.fragment,d),i=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(s.$$.fragment,d),i=!1},d(d){d&&(p(n),p(o)),v(e,d),v(t,d),v(s,d)}}}function $c(l){let e,n=l[5](l[9])+"",t;return{c(){e=new qt(!1),t=je(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function pc(l){let e,n;return e=new fe({props:{$$slots:{default:[$c,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mc(l){let e,n;const t=[q(nt),{sourceLayer:nt},{paint:{"line-color":we(["get",l[1]],l[4],l[3]),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[2]&&l[0]==nt?"visible":"none"}}];let r={$$slots:{default:[pc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(q(nt)),s&0&&{sourceLayer:nt},s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Ne,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==nt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _c(l){let e,n=l[5](l[9])+"",t;return{c(){e=new qt(!1),t=je(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function gc(l){let e,n;return e=new fe({props:{$$slots:{default:[_c,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dc(l){let e,n;const t=[q(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",l[1]],l[4],l[3]),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[2]&&l[0]==ut?"visible":"none"}}];let r={$$slots:{default:[gc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(q(ut)),s&0&&{sourceLayer:ut},t[2],t[3],s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Ne,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ut?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function hc(l){let e,n,t,r,o,s,u,i;function a(g){l[6](g)}let f={$$slots:{right:[cc],default:[ic]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),U.push(()=>W(e,"checked",a));let c=l[2]&&zr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${nt}.pmtiles`,$$slots:{default:[mc]},$$scope:{ctx:l}}}),u=new be({props:{url:`pmtiles://${he()}/v1/${ut}.pmtiles`,$$slots:{default:[dc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),c&&c.c(),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment)},m(g,d){b(e,g,d),$(g,t,d),c&&c.m(g,d),$(g,r,d),b(o,g,d),$(g,s,d),b(u,g,d),i=!0},p(g,[d]){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),!n&&d&4&&(n=!0,y.checked=g[2],V(()=>n=!1)),e.$set(y),g[2]?c?(c.p(g,d),d&4&&m(c,1)):(c=zr(g),c.c(),m(c,1),c.m(r.parentNode,r)):c&&(pe(),_(c,1,1,()=>{c=null}),me());const L={};d&1031&&(L.$$scope={dirty:d,ctx:g}),o.$set(L);const S={};d&1031&&(S.$$scope={dirty:d,ctx:g}),u.$set(S)},i(g){i||(m(e.$$.fragment,g),m(c),m(o.$$.fragment,g),m(u.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(u.$$.fragment,g),i=!1},d(g){g&&(p(t),p(r),p(s)),v(e,g),c&&c.d(g),v(o,g),v(u,g)}}}let nt="pct_commute",ut="pct_school";function bc(l,e,n){let t=J.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=nt,s="baseline",u=!1;function i(g){let d=g.baseline,y=g.gov_target,L=g.go_dutch,S=`<h2>Trip purpose: ${o==nt?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${L.toLocaleString()}</b></p>`;else{let M=(y/d).toFixed(1),j=(L/d).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${M}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${L.toLocaleString()} (<b>${j}x</b> of baseline)</p>`}return S}function a(g){u=g,n(2,u)}function f(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class vc extends K{constructor(e){super(),Q(this,e,bc,hc,Y,{})}}function wc(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kc(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sc(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new x({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[kc]},$$scope:{ctx:l}}}),f=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[yc]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("The average speed data is collected over a six-month period by "),h(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),s=C("p"),s.textContent="Data valid as of 1 September, 2023",u=O(),i=C("p"),a=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=k(".")},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,r),$(d,o,y),$(d,s,y),$(d,u,y),$(d,i,y),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,y){const L={};y&256&&(L.$$scope={dirty:y,ctx:d}),t.$set(L);const S={};y&256&&(S.$$scope={dirty:y,ctx:d}),f.$set(S)},i(d){g||(m(t.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(o),p(s),p(u),p(i)),v(t),v(f)}}}function Cc(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Sc]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function qr(l){let e,n,t,r,o;e=new Be({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new vl({props:u}),U.push(()=>W(t,"value",s)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],V(()=>r=!1)),t.$set(f)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function Tc(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,g=l[4][l[7].highest_description]+"",d,y;return{c(){e=C("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=O(),u=C("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),d=k(g),y=k(")")},m(L,S){$(L,e,S),w(e,n),w(e,r),w(e,o),$(L,s,S),$(L,u,S),w(u,i),w(u,f),w(u,c),w(u,d),w(u,y)},p(L,S){S&128&&t!==(t=L[7].indicative_mph+"")&&z(r,t),S&128&&a!==(a=L[7].highest_mph+"")&&z(f,a),S&128&&g!==(g=L[4][L[7].highest_description]+"")&&z(d,g)},d(L){L&&(p(e),p(s),p(u))}}}function Oc(l){let e,n;return e=new fe({props:{$$slots:{default:[Tc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lc(l){let e,n;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",l[0]],l[3],l[2]),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[Oc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&15?te(t,[s&0&&ae(q(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&13&&{paint:{"line-color":we(["get",o[0]],o[3],o[2]),"line-width":Ne,"line-opacity":Z(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ac(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={$$slots:{right:[Cc],default:[wc]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&qr(l);return o=new be({props:{url:`pmtiles://${on()}/v1/${Mt}.pmtiles`,$$slots:{default:[Lc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=qr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(pe(),_(a,1,1,()=>{a=null}),me());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Mt="road_speeds";function Ic(l,e,n){let t=J.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class Mc extends K{constructor(e){super(),Q(this,e,Ic,Ac,Y,{})}}function Pc(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fc(l){let e,n,t,r,o,s,u,i,a;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Nc]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",r=O(),o=C("p"),s=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function Ec(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Fc]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Hr(l){let e,n;return e=new Be({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Dc(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",g,d;return{c(){e=C("p"),n=k("Average width: "),t=C("b"),o=k(r),s=k(`
        meters`),u=O(),i=C("p"),a=k("Minimum width: "),f=C("b"),g=k(c),d=k(`
        meters`)},m(y,L){$(y,e,L),w(e,n),w(e,t),w(t,o),w(e,s),$(y,u,L),$(y,i,L),w(i,a),w(i,f),w(f,g),w(i,d)},p(y,L){L&16&&r!==(r=y[4].average+"")&&z(o,r),L&16&&c!==(c=y[4].minimum+"")&&z(g,c)},d(y){y&&(p(e),p(u),p(i))}}}function jc(l){let e,n;return e=new fe({props:{$$slots:{default:[Dc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rc(l){let e,n;const t=[q(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],l[2],l[1]),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[jc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(Pt)),s&0&&{sourceLayer:Pt},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Ne,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Bc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Ec],default:[Pc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Hr(l);return o=new be({props:{url:`pmtiles://${on()}/v1/${Pt}.pmtiles`,$$slots:{default:[Rc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Hr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(pe(),_(a,1,1,()=>{a=null}),me());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Pt="road_widths";function zc(l,e,n){let t=J.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class qc extends K{constructor(e){super(),Q(this,e,zc,Bc,Y,{})}}function Hc(l){let e,n,t;return e=new Oe({props:{color:J.trams}}),{c(){h(e.$$.fragment),n=k(`
  Trams`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Gc(l){let e,n,t,r;return t=new Ye({}),{c(){e=C("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=O(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Uc(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Gc]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Wc(l){let e,n;const t=[q(Nt),{sourceLayer:Nt},{paint:{"line-color":J.trams,"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),e.$on("click",Xc),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Vc(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Uc],default:[Hc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${Nt}.pmtiles`,$$slots:{default:[Wc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Nt="trams";function Xc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Yc(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Jc extends K{constructor(e){super(),Q(this,e,Yc,Vc,Y,{})}}function Kc(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qc(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zc(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Qc]},$$scope:{ctx:l}}}),i=new Le({}),{c(){e=C("p"),n=k("Data from the "),h(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=O(),s=C("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),$(f,o,c),$(f,s,c),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),v(t),v(i,f)}}}function xc(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Zc]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Gr(l){let e,n,t,r;return t=new Be({props:{colorScale:l[1],limits:l[2]}}),{c(){e=C("p"),e.textContent="Peak hourly frequency:",n=O(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function e$(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,g,d,y,L,S=l[4].peak_description+"",M,j,I,N,A,P=l[4].total+"",F,T,E=l[4].total_description+"",H,R;return{c(){e=C("p"),n=k("Stop name: "),t=C("b"),o=k(r),s=O(),u=C("p"),i=k("Peak: "),a=C("b"),c=k(f),g=k(`
        buses during the busiest hour of any day`),d=O(),y=C("p"),L=k("The peak hour is "),M=k(S),j=O(),I=C("p"),N=k("Total buses per day: "),A=C("b"),F=k(P),T=k(`
        (for `),H=k(E),R=k(", the busiest day of the week)")},m(D,B){$(D,e,B),w(e,n),w(e,t),w(t,o),$(D,s,B),$(D,u,B),w(u,i),w(u,a),w(a,c),w(u,g),$(D,d,B),$(D,y,B),w(y,L),w(y,M),$(D,j,B),$(D,I,B),w(I,N),w(I,A),w(A,F),w(I,T),w(I,H),w(I,R)},p(D,B){B&16&&r!==(r=D[4].stop_name+"")&&z(o,r),B&16&&f!==(f=D[4].peak+"")&&z(c,f),B&16&&S!==(S=D[4].peak_description+"")&&z(M,S),B&16&&P!==(P=D[4].total+"")&&z(F,P),B&16&&E!==(E=D[4].total_description+"")&&z(H,E)},d(D){D&&(p(e),p(s),p(u),p(d),p(y),p(j),p(I))}}}function t$(l){let e,n;return e=new fe({props:{$$slots:{default:[e$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function n$(l){let e,n;const t=[q(Ft),{sourceLayer:Ft},{paint:{"circle-color":we(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[t$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ft({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(Ft)),s&0&&{sourceLayer:Ft},s&6&&{paint:{"circle-color":we(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function r$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[xc],default:[Kc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Gr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Ft}.pmtiles`,$$slots:{default:[n$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Gr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(pe(),_(a,1,1,()=>{a=null}),me());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ft="bus_stops";function l$(l,e,n){let t=J.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class o$ extends K{constructor(e){super(),Q(this,e,l$,r$,Y,{})}}function s$(l){let e,n,t;return{c(){e=C("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=it(e,"change",l[5]),n=!0)},p:ne,d(r){r&&p(e),l[7](null),n=!1,t()}}}function Ur(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[a$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function i$(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Oe({props:{color:Et}}),{c(){h(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&z(r,t)},i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function a$(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[i$]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function f$(l){let e,n,t,r,o,s;e=new _n({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[s$]},$$scope:{ctx:l}}}),t=new wl({props:{errorMessage:l[3]}});let u=l[2]>0&&Ur(l);return{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),u&&u.c(),o=je()},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&m(u,1)):(u=Ur(i),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(pe(),_(u,1,1,()=>{u=null}),me())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(u),s=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(u),s=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),u&&u.d(i)}}}function u$(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,g,d,y,L=l[10].notes+"",S,M,j,I,N,A,P,F=l[10].id+"",T,E,H,R,D,B=(l[10].inspector??"???")+"",X,re,oe,ce=l[10].submission_time+"",Ie,Te,ie,Ae,ue,_e=l[10].scheme_reference+"",ge,ze,Fe,Ce=l[10].current_design_stage+"",Je;return{c(){e=C("div"),n=C("h2"),r=k(t),o=O(),s=C("p"),u=C("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=O(),g=C("p"),d=C("u"),d.textContent="Notes",y=k(`
          : `),S=k(L),M=O(),j=C("hr"),I=O(),N=C("p"),A=k("Critical issue ID: "),P=C("b"),T=k(F),E=O(),H=C("p"),R=k("Submitted by "),D=C("b"),X=k(B),re=k(`
          at
          `),oe=C("b"),Ie=k(ce),Te=O(),ie=C("p"),Ae=k("For scheme "),ue=C("b"),ge=k(_e),ze=k(`
          in stage
          `),Fe=C("b"),Je=k(Ce),Se(e,"max-width","30vw")},m(se,ve){$(se,e,ve),w(e,n),w(n,r),w(e,o),w(e,s),w(s,u),w(s,i),w(s,f),w(e,c),w(e,g),w(g,d),w(g,y),w(g,S),w(e,M),w(e,j),w(e,I),w(e,N),w(N,A),w(N,P),w(P,T),w(e,E),w(e,H),w(H,R),w(H,D),w(D,X),w(H,re),w(H,oe),w(oe,Ie),w(e,Te),w(e,ie),w(ie,Ae),w(ie,ue),w(ue,ge),w(ie,ze),w(ie,Fe),w(Fe,Je)},p(se,ve){ve&1024&&t!==(t=se[10].critical_type+"")&&z(r,t),ve&1024&&a!==(a=se[10].location_description+"")&&z(f,a),ve&1024&&L!==(L=se[10].notes+"")&&z(S,L),ve&1024&&F!==(F=se[10].id+"")&&z(T,F),ve&1024&&B!==(B=(se[10].inspector??"???")+"")&&z(X,B),ve&1024&&ce!==(ce=se[10].submission_time+"")&&z(Ie,ce),ve&1024&&_e!==(_e=se[10].scheme_reference+"")&&z(ge,_e),ve&1024&&Ce!==(Ce=se[10].current_design_stage+"")&&z(Je,Ce)},d(se){se&&p(e)}}}function c$(l){let e,n;return e=new fe({props:{$$slots:{default:[u$,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $$(l){let e,n,t,r,o,s;const u=[q("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":Et,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let d=0;d<u.length;d+=1)i=ee(i,u[d]);e=new ft({props:i}),e.$on("click",l[6]);const a=[q("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=ee(f,a[d]);t=new sn({props:f});const c=[q("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Et,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let g={$$slots:{default:[c$]},$$scope:{ctx:l}};for(let d=0;d<c.length;d+=1)g=ee(g,c[d]);return o=new ft({props:g}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment)},m(d,y){b(e,d,y),$(d,n,y),b(t,d,y),$(d,r,y),b(o,d,y),s=!0},p(d,y){const L=y&2?te(u,[u[0],u[1],y&0&&{paint:{"circle-color":Et,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(L);const S=y&2?te(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(S);const M=y&2?te(c,[c[0],c[1],c[2],c[3],y&0&&{paint:{"circle-color":Et,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};y&2048&&(M.$$scope={dirty:y,ctx:d}),o.$set(M)},i(d){s||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(o.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),s=!1},d(d){d&&(p(n),p(r)),v(e,d),v(t,d),v(o,d)}}}function p$(l){let e,n,t,r;return e=new Ee({props:{label:"Critical Issues",$$slots:{default:[f$]},$$scope:{ctx:l}}}),t=new bt({props:{id:zl,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[$$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let zl="criticals",Et="red";function m$(l,e,n){let t;ke(l,On,d=>n(9,t=d));let r,o=!0,s=0,u="",i=Wl();async function a(d){try{n(4,i=await Li(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}async function f(d){let y=await t.getSource(zl).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id);t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:y})}function c(d){U[d?"unshift":"push"](()=>{r=d,n(0,r)})}function g(d){o=d,n(1,o)}return[r,o,s,u,i,a,f,c,g]}class _$ extends K{constructor(e){super(),Q(this,e,m$,p$,Y,{})}}function g$(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function d$(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function h$(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[d$]},$$scope:{ctx:l}}}),s=new Ye({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function b$(l){let e,n,t;return n=new $e({props:{$$slots:{default:[h$]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Wr(l){let e,n;return e=new An({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function v$(l){let e,n=Vr(l[3])+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=Vr(r[3])+"")&&z(t,n)},d(r){r&&p(e)}}}function w$(l){let e,n;return e=new fe({props:{$$slots:{default:[v$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function k$(l){let e,n;const t=[q(Dt),{sourceLayer:Dt},{paint:{"circle-color":at(["get","crossing"],{traffic_signals:J.signalized_crossing},J.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[w$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ft({props:r}),e.$on("click",S$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function y$(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[b$],default:[g$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Wr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Dt}.pmtiles`,$$slots:{default:[k$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Wr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(pe(),_(a,1,1,()=>{a=null}),me());const d={};c&17&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Dt="crossings";function Vr(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function S$(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function C$(l,e,n){let t=!1,r=[["Signalized",J.signalized_crossing],["Other",J.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class T$ extends K{constructor(e){super(),Q(this,e,C$,y$,Y,{})}}function O$(l){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function L$(l){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function A$(l){let e,n,t,r,o,s,u,i,a,f,c,g,d;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[L$]},$$scope:{ctx:l}}}),f=new Le({}),g=new Ye({}),{c(){e=C("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=O(),t=C("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=O(),o=C("p"),s=k("This layer is built from "),h(u.$$.fragment),i=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=O(),h(f.$$.fragment),c=O(),h(g.$$.fragment)},m(y,L){$(y,e,L),$(y,n,L),$(y,t,L),$(y,r,L),$(y,o,L),w(o,s),b(u,o,null),w(o,i),$(y,a,L),b(f,y,L),$(y,c,L),b(g,y,L),d=!0},p(y,L){const S={};L&32&&(S.$$scope={dirty:L,ctx:y}),u.$set(S)},i(y){d||(m(u.$$.fragment,y),m(f.$$.fragment,y),m(g.$$.fragment,y),d=!0)},o(y){_(u.$$.fragment,y),_(f.$$.fragment,y),_(g.$$.fragment,y),d=!1},d(y){y&&(p(e),p(n),p(t),p(r),p(o),p(a),p(c)),v(u),v(f,y),v(g,y)}}}function I$(l){let e,n,t;return n=new $e({props:{$$slots:{default:[A$]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Xr(l){let e,n;return e=new Be({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function M$(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=C("p"),n=k("Gradient: "),t=C("b"),o=k(r),s=k(`
        %`)},m(u,i){$(u,e,i),w(e,n),w(e,t),w(t,o),w(e,s)},p(u,i){i&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&z(o,r)},d(u){u&&p(e)}}}function P$(l){let e,n;return e=new fe({props:{$$slots:{default:[M$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function N$(l){let e,n,t,r;const o=[q(tt),{sourceLayer:tt},{manageHoverState:!0},{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[P$]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ye({props:s});const u=[q(tt+"_arrows"),{sourceLayer:tt},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new sn({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(q(tt)),f&0&&{sourceLayer:tt},o[2],f&6&&{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Ne,"line-opacity":Z(1,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?te(u,[f&0&&ae(q(tt+"_arrows")),f&0&&{sourceLayer:tt},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function F$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[I$],default:[O$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Xr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${tt}.pmtiles`,$$slots:{default:[N$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Xr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(pe(),_(a,1,1,()=>{a=null}),me());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let tt="gradient";function E$(l,e,n){let t=J.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class D$ extends K{constructor(e){super(),Q(this,e,E$,F$,Y,{})}}function j$(l){let e,n,t;return{c(){e=C("img"),t=k(`
  Cycle parking`),nn(e.src,n=Vl)||G(e,"src",n),G(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function R$(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function B$(l){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function z$(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[R$]},$$scope:{ctx:l}}}),i=new x({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[B$]},$$scope:{ctx:l}}}),f=new Ye({}),{c(){e=C("p"),n=k("Cycle parking, according to "),h(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),s=C("p"),u=k("Icon from "),h(i.$$.fragment),a=O(),h(f.$$.fragment)},m(g,d){$(g,e,d),w(e,n),b(t,e,null),w(e,r),$(g,o,d),$(g,s,d),w(s,u),b(i,s,null),$(g,a,d),b(f,g,d),c=!0},p(g,d){const y={};d&8&&(y.$$scope={dirty:d,ctx:g}),t.$set(y);const L={};d&8&&(L.$$scope={dirty:d,ctx:g}),i.$set(L)},i(g){c||(m(t.$$.fragment,g),m(i.$$.fragment,g),m(f.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(i.$$.fragment,g),_(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(o),p(s),p(a)),v(t),v(i),v(f,g)}}}function q$(l){let e,n,t;return n=new $e({props:{$$slots:{default:[z$]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function H$(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=C("p"),n=k("Capacity: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&z(o,r)},d(s){s&&p(e)}}}function G$(l){let e,n;return e=new fe({props:{$$slots:{default:[H$,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function U$(l){let e,n;const t=[q(jt),{sourceLayer:jt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[G$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new sn({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(jt)),s&0&&{sourceLayer:jt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function W$(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[q$],default:[j$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${jt}.pmtiles`,$$slots:{default:[U$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let jt="cycle_parking";function V$(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class X$ extends K{constructor(e){super(),Q(this,e,V$,W$,Y,{})}}function Y$(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function J$(l){let e,n,t,r;return t=new Ye({}),{c(){e=C("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=O(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function K$(l){let e,n,t;return n=new $e({props:{$$slots:{default:[J$]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Yr(l){let e,n,t;return n=new Xe({props:{$$slots:{default:[ep]},$$scope:{ctx:l}}}),{c(){e=C("div"),h(n.$$.fragment),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Q$(l){let e,n,t;return e=new Oe({props:{color:J.education.schools}}),{c(){h(e.$$.fragment),n=k(`
        Schools`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Z$(l){let e,n,t;return e=new Oe({props:{color:J.education.colleges}}),{c(){h(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function x$(l){let e,n,t;return e=new Oe({props:{color:J.education.universities}}),{c(){h(e.$$.fragment),n=k(`
        Universities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function ep(l){let e,n,t,r,o,s,u,i,a;function f(S){l[3](S)}let c={$$slots:{default:[Q$]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),U.push(()=>W(e,"checked",f));function g(S){l[4](S)}let d={$$slots:{default:[Z$]},$$scope:{ctx:l}};l[1].college!==void 0&&(d.checked=l[1].college),r=new le({props:d}),U.push(()=>W(r,"checked",g));function y(S){l[5](S)}let L={$$slots:{default:[x$]},$$scope:{ctx:l}};return l[1].university!==void 0&&(L.checked=l[1].university),u=new le({props:L}),U.push(()=>W(u,"checked",y)),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment),s=O(),h(u.$$.fragment)},m(S,M){b(e,S,M),$(S,t,M),b(r,S,M),$(S,s,M),b(u,S,M),a=!0},p(S,M){const j={};M&128&&(j.$$scope={dirty:M,ctx:S}),!n&&M&2&&(n=!0,j.checked=S[1].school,V(()=>n=!1)),e.$set(j);const I={};M&128&&(I.$$scope={dirty:M,ctx:S}),!o&&M&2&&(o=!0,I.checked=S[1].college,V(()=>o=!1)),r.$set(I);const N={};M&128&&(N.$$scope={dirty:M,ctx:S}),!i&&M&2&&(i=!0,N.checked=S[1].university,V(()=>i=!1)),u.$set(N)},i(S){a||(m(e.$$.fragment,S),m(r.$$.fragment,S),m(u.$$.fragment,S),a=!0)},o(S){_(e.$$.fragment,S),_(r.$$.fragment,S),_(u.$$.fragment,S),a=!1},d(S){S&&(p(t),p(s)),v(e,S),v(r,S),v(u,S)}}}function tp(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&z(t,n)},d(r){r&&p(e)}}}function np(l){let e,n;return e=new fe({props:{$$slots:{default:[tp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rp(l){let e,n;const t=[q(Rt),{sourceLayer:Rt},{paint:{"fill-color":at(["get","type"],{school:J.education.schools,college:J.education.colleges,university:J.education.universities},"grey"),"fill-opacity":Z(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Jr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[np]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Re({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Rt)),s&0&&{sourceLayer:Rt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Jr(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function lp(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[K$],default:[Y$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Yr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Rt}.pmtiles`,$$slots:{default:[rp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&128&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Yr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(pe(),_(a,1,1,()=>{a=null}),me());const d={};c&131&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Rt="education";function Jr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function op(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class sp extends K{constructor(e){super(),Q(this,e,op,lp,Y,{})}}function ip(l){let e,n,t,r;return e=new Oe({props:{color:l[4]}}),{c(){h(e.$$.fragment),n=O(),t=k(l[2])},m(o,s){b(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&z(t,o[2])},i(o){r||(m(e.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function ap(l){let e;const n=l[5].default,t=Vt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&Xt(t,n,r,r[7],e?Jt(n,r[7],o,null):Yt(r[7]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function fp(l){let e,n,t;return n=new $e({props:{$$slots:{default:[ap]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function up(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&z(t,n)},d(r){r&&p(e)}}}function cp(l){let e,n;return e=new fe({props:{$$slots:{default:[up,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $p(l){let e,n;const t=[q(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":Z(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[cp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Re({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&25?te(t,[s&1&&ae(q(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Z(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function pp(l){let e,n,t,r,o;function s(i){l[6](i)}let u={$$slots:{right:[fp],default:[ip]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${l[0]}.pmtiles`,$$slots:{default:[$p]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],V(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${he()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function mp(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=J[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class ql extends K{constructor(e){super(),Q(this,e,mp,pp,Y,{name:0,singularNoun:1,pluralNoun:2})}}function _p(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gp(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[_p]},$$scope:{ctx:l}}}),s=new Ye({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function dp(l){let e,n;return e=new ql({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[gp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class hp extends K{constructor(e){super(),Q(this,e,null,dp,Y,{})}}function bp(l){let e,n,t;return{c(){e=C("img"),t=k(`
  Railway Stations`),nn(e.src,n=Xl)||G(e,"src",n),G(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function vp(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wp(l){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kp(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[vp]},$$scope:{ctx:l}}}),i=new x({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[wp]},$$scope:{ctx:l}}}),c=new Ye({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),s=C("p"),u=k("Icon from "),h(i.$$.fragment),a=k(". (Note that not all stations shown are National Rail.)"),f=O(),h(c.$$.fragment)},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,r),$(d,o,y),$(d,s,y),w(s,u),b(i,s,null),w(s,a),$(d,f,y),b(c,d,y),g=!0},p(d,y){const L={};y&8&&(L.$$scope={dirty:y,ctx:d}),t.$set(L);const S={};y&8&&(S.$$scope={dirty:y,ctx:d}),i.$set(S)},i(d){g||(m(t.$$.fragment,d),m(i.$$.fragment,d),m(c.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(i.$$.fragment,d),_(c.$$.fragment,d),g=!1},d(d){d&&(p(e),p(o),p(s),p(f)),v(t),v(i),v(c,d)}}}function yp(l){let e,n,t;return n=new $e({props:{$$slots:{default:[kp]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Sp(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&z(t,n)},d(r){r&&p(e)}}}function Cp(l){let e,n;return e=new fe({props:{$$slots:{default:[Sp,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tp(l){let e,n;const t=[q(Cn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Cp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new sn({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Cn)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Op(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[yp],default:[bp]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new bt({props:{data:`${he()}/v1/${Cn}.geojson`,$$slots:{default:[Tp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Cn="railway_stations";function Lp(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Ap extends K{constructor(e){super(),Q(this,e,Lp,Op,Y,{})}}function Ip(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mp(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pp(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Ip]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Mp]},$$scope:{ctx:l}}}),i=new Ye({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),r=k(" and "),h(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function Np(l){let e,n;return e=new ql({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Pp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Fp extends K{constructor(e){super(),Q(this,e,null,Np,Y,{})}}function Ep(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Dp(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jp(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rp(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,L,S,M,j,I,N,A,P,F;return t=new x({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Dp]},$$scope:{ctx:l}}}),M=new x({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[jp]},$$scope:{ctx:l}}}),P=new Le({}),{c(){e=C("p"),n=k("This layer shows collisions recorded in the "),h(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=O(),s=C("ul"),u=C("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=O(),a=C("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=O(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=O(),d=C("li"),d.textContent='The "pedestrians" category also include mobility scooters',y=O(),L=C("li"),S=k("All limitations "),h(M.$$.fragment),j=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),I=O(),N=C("p"),N.textContent="You can click a point to open the full report, thanks to CycleStreets.",A=O(),h(P.$$.fragment)},m(T,E){$(T,e,E),w(e,n),b(t,e,null),w(e,r),$(T,o,E),$(T,s,E),w(s,u),w(s,i),w(s,a),w(s,f),w(s,c),w(s,g),w(s,d),w(s,y),w(s,L),w(L,S),b(M,L,null),w(L,j),$(T,I,E),$(T,N,E),$(T,A,E),b(P,T,E),F=!0},p(T,E){const H={};E&16777216&&(H.$$scope={dirty:E,ctx:T}),t.$set(H);const R={};E&16777216&&(R.$$scope={dirty:E,ctx:T}),M.$set(R)},i(T){F||(m(t.$$.fragment,T),m(M.$$.fragment,T),m(P.$$.fragment,T),F=!0)},o(T){_(t.$$.fragment,T),_(M.$$.fragment,T),_(P.$$.fragment,T),F=!1},d(T){T&&(p(e),p(o),p(s),p(I),p(N),p(A)),v(t),v(M),v(P,T)}}}function Bp(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Rp]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Kr(l){let e,n,t,r,o,s,u,i,a,f,c,g,d;return n=new Xe({props:{small:!0,$$slots:{default:[Up]},$$scope:{ctx:l}}}),f=new An({props:{rows:l[14]}}),{c(){e=C("div"),h(n.$$.fragment),t=O(),r=C("div"),o=k(`Filter years:
      `),s=C("input"),u=k(`
      -
      `),i=C("input"),a=O(),h(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(y,L){$(y,e,L),b(n,e,null),w(e,t),w(e,r),w(r,o),w(r,s),We(s,l[4]),w(r,u),w(r,i),We(i,l[5]),w(e,a),b(f,e,null),c=!0,g||(d=[it(s,"input",l[20]),it(i,"input",l[21])],g=!0)},p(y,L){const S={};L&16777231&&(S.$$scope={dirty:L,ctx:y}),n.$set(S),L&16&&Gt(s.value)!==y[4]&&We(s,y[4]),L&32&&Gt(i.value)!==y[5]&&We(i,y[5])},i(y){c||(m(n.$$.fragment,y),m(f.$$.fragment,y),c=!0)},o(y){_(n.$$.fragment,y),_(f.$$.fragment,y),c=!1},d(y){y&&p(e),v(n),v(f),g=!1,bl(d)}}}function zp(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qp(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hp(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gp(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Up(l){let e,n,t,r,o,s,u,i,a,f,c,g;function d(A){l[16](A)}let y={$$slots:{default:[zp]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new le({props:y}),U.push(()=>W(e,"checked",d));function L(A){l[17](A)}let S={$$slots:{default:[qp]},$$scope:{ctx:l}};l[1]!==void 0&&(S.checked=l[1]),r=new le({props:S}),U.push(()=>W(r,"checked",L));function M(A){l[18](A)}let j={$$slots:{default:[Hp]},$$scope:{ctx:l}};l[2]!==void 0&&(j.checked=l[2]),u=new le({props:j}),U.push(()=>W(u,"checked",M));function I(A){l[19](A)}let N={$$slots:{default:[Gp]},$$scope:{ctx:l}};return l[3]!==void 0&&(N.checked=l[3]),f=new le({props:N}),U.push(()=>W(f,"checked",I)),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment),s=O(),h(u.$$.fragment),a=O(),h(f.$$.fragment)},m(A,P){b(e,A,P),$(A,t,P),b(r,A,P),$(A,s,P),b(u,A,P),$(A,a,P),b(f,A,P),g=!0},p(A,P){const F={};P&16777216&&(F.$$scope={dirty:P,ctx:A}),!n&&P&1&&(n=!0,F.checked=A[0],V(()=>n=!1)),e.$set(F);const T={};P&16777216&&(T.$$scope={dirty:P,ctx:A}),!o&&P&2&&(o=!0,T.checked=A[1],V(()=>o=!1)),r.$set(T);const E={};P&16777216&&(E.$$scope={dirty:P,ctx:A}),!i&&P&4&&(i=!0,E.checked=A[2],V(()=>i=!1)),u.$set(E);const H={};P&16777216&&(H.$$scope={dirty:P,ctx:A}),!c&&P&8&&(c=!0,H.checked=A[3],V(()=>c=!1)),f.$set(H)},i(A){g||(m(e.$$.fragment,A),m(r.$$.fragment,A),m(u.$$.fragment,A),m(f.$$.fragment,A),g=!0)},o(A){_(e.$$.fragment,A),_(r.$$.fragment,A),_(u.$$.fragment,A),_(f.$$.fragment,A),g=!1},d(A){A&&(p(t),p(s),p(a)),v(e,A),v(r,A),v(u,A),v(f,A)}}}function Qr(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=C("p"),n=k("Pedestrian location: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&z(o,r)},d(s){s&&p(e)}}}function Zr(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=C("p"),n=k("Pedestrian movement: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&z(o,r)},d(s){s&&p(e)}}}function Wp(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,g,d,y,L,S=xr(l[23])+"",M,j,I,N,A,P=l[23].pedestrian_location&&Qr(l),F=l[23].pedestrian_movement&&Zr(l);return{c(){e=C("p"),n=k("Year: "),t=C("b"),o=k(r),s=O(),u=C("p"),i=k("Severity: "),a=C("b"),c=k(f),g=O(),d=C("p"),y=k("Casualties: "),L=C("b"),M=k(S),j=O(),P&&P.c(),I=O(),F&&F.c(),N=O(),A=C("p"),A.textContent="Click to open full report in CycleStreets"},m(T,E){$(T,e,E),w(e,n),w(e,t),w(t,o),$(T,s,E),$(T,u,E),w(u,i),w(u,a),w(a,c),$(T,g,E),$(T,d,E),w(d,y),w(d,L),w(L,M),$(T,j,E),P&&P.m(T,E),$(T,I,E),F&&F.m(T,E),$(T,N,E),$(T,A,E)},p(T,E){E&8388608&&r!==(r=T[23].year+"")&&z(o,r),E&8388608&&f!==(f=T[10][T[23].severity]+"")&&z(c,f),E&8388608&&S!==(S=xr(T[23])+"")&&z(M,S),T[23].pedestrian_location?P?P.p(T,E):(P=Qr(T),P.c(),P.m(I.parentNode,I)):P&&(P.d(1),P=null),T[23].pedestrian_movement?F?F.p(T,E):(F=Zr(T),F.c(),F.m(N.parentNode,N)):F&&(F.d(1),F=null)},d(T){T&&(p(e),p(s),p(u),p(g),p(d),p(j),p(I),p(N),p(A)),P&&P.d(T),F&&F.d(T)}}}function Vp(l){let e,n;return e=new fe({props:{$$slots:{default:[Wp,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xp(l){let e,n;const t=[q(Bt),{sourceLayer:Bt},{paint:{"circle-color":we(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Vp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ft({props:r}),e.$on("click",Jp),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&14528?te(t,[s&0&&ae(q(Bt)),s&0&&{sourceLayer:Bt},s&14336&&{paint:{"circle-color":we(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yp(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={$$slots:{right:[Bp],default:[Ep]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[6]&&Kr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Bt}.pmtiles`,$$slots:{default:[Xp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,g.checked=f[6],V(()=>n=!1)),e.$set(g),f[6]?a?(a.p(f,c),c&64&&m(a,1)):(a=Kr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(pe(),_(a,1,1,()=>{a=null}),me());const d={};c&16777408&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Bt="stats19";function xr(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function Jp(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function Kp(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(H,R,D,B,X,re){let oe=["any"];return o&&oe.push(["get","pedestrian"]),s&&oe.push(["get","cyclist"]),u&&oe.push(["get","horse_rider"]),i&&oe.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],oe]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},d={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},L=J.sequential_low_to_high[4],S=J.sequential_low_to_high[2],M=J.sequential_low_to_high[0],j=[["Fatal",L],["Serious",S],["Slight",M]];function I(H){r=H,n(6,r)}function N(H){o=H,n(0,o)}function A(H){s=H,n(1,s)}function P(H){u=H,n(2,u)}function F(H){i=H,n(3,i)}function T(){a=Gt(this.value),n(4,a)}function E(){f=Gt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,g,d,y,L,S,M,j,I,N,A,P,F,T,E]}class Qp extends K{constructor(e){super(),Q(this,e,Kp,Yp,Y,{})}}function Zp(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xp(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function em(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tm(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new x({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[xp]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[em]},$$scope:{ctx:l}}}),f=new Le({}),{c(){e=C("p"),n=k("AADF (annual average daily flow) data from "),h(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),h(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=O(),i=C("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=O(),h(f.$$.fragment)},m(g,d){$(g,e,d),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(g,u,d),$(g,i,d),$(g,a,d),b(f,g,d),c=!0},p(g,d){const y={};d&64&&(y.$$scope={dirty:d,ctx:g}),t.$set(y);const L={};d&64&&(L.$$scope={dirty:d,ctx:g}),o.$set(L)},i(g){c||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(u),p(i),p(a)),v(t),v(o),v(f,g)}}}function nm(l){let e,n,t;return n=new $e({props:{$$slots:{default:[tm]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function el(l){let e,n;return e=new Be({props:{colorScale:l[1],limits:l[3]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rm(l){let e,n=l[5].location+"",t,r,o,s,u=l[5].year+"",i,a,f,c=l[5].motor_vehicles.toLocaleString()+"",g,d,y,L,S=l[5].year+"",M,j,I,N=l[5].pedal_cycles.toLocaleString()+"",A,P,F,T,E,H=l[5].method+"",R;return{c(){e=C("h2"),t=k(n),r=O(),o=C("p"),s=k("Total motor vehicles ("),i=k(u),a=k(` AADF):
        `),f=C("b"),g=k(c),d=O(),y=C("p"),L=k("Total pedal cycles ("),M=k(S),j=k(` AADF):
        `),I=C("b"),A=k(N),P=O(),F=C("p"),T=k("Count method: "),E=C("b"),R=k(H)},m(D,B){$(D,e,B),w(e,t),$(D,r,B),$(D,o,B),w(o,s),w(o,i),w(o,a),w(o,f),w(f,g),$(D,d,B),$(D,y,B),w(y,L),w(y,M),w(y,j),w(y,I),w(I,A),$(D,P,B),$(D,F,B),w(F,T),w(F,E),w(E,R)},p(D,B){B&32&&n!==(n=D[5].location+"")&&z(t,n),B&32&&u!==(u=D[5].year+"")&&z(i,u),B&32&&c!==(c=D[5].motor_vehicles.toLocaleString()+"")&&z(g,c),B&32&&S!==(S=D[5].year+"")&&z(M,S),B&32&&N!==(N=D[5].pedal_cycles.toLocaleString()+"")&&z(A,N),B&32&&H!==(H=D[5].method+"")&&z(R,H)},d(D){D&&(p(e),p(r),p(o),p(d),p(y),p(P),p(F))}}}function lm(l){let e,n;return e=new fe({props:{$$slots:{default:[rm,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function om(l){let e,n;const t=[q(zt),{sourceLayer:zt},{paint:{"circle-color":we(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[lm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ft({props:r}),e.$on("click",im),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(zt)),s&0&&{sourceLayer:zt},s&6&&{paint:{"circle-color":we(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function sm(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={$$slots:{right:[nm],default:[Zp]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&el(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${zt}.pmtiles`,$$slots:{default:[om]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=el(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(pe(),_(a,1,1,()=>{a=null}),me());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let zt="vehicle_counts";function im(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function am(l,e,n){let t=J.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class fm extends K{constructor(e){super(),Q(this,e,am,sm,Y,{})}}function um(l){let e,n,t,r,o,s,u,i;return e=new sp({}),t=new hp({}),o=new Fp({}),u=new Ap({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,r,f),b(o,a,f),$(a,s,f),b(u,a,f),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function cm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[um]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $m(l){let e,n,t,r,o,s,u,i,a,f;return e=new Iu({}),t=new Ku({}),o=new zu({}),u=new X$({}),a=new T$({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function pm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[$m]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mm(l){let e,n,t,r,o,s;return e=new du({}),t=new Jc({}),o=new o$({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function _m(l){let e,n,t,r,o,s,u,i,a,f;return e=new Lf({}),t=new ru({}),o=new Fa({}),u=new nf({}),a=new df({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function gm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[_m]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dm(l){let e,n,t,r;return e=new ya({}),t=new Wa({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function hm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[dm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bm(l){let e,n,t,r,o,s;return e=new qc({}),t=new sc({}),o=new Mc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function vm(l){let e,n,t,r,o,s,u,i,a=gn()=="Private (development)",f,c,g,d,y;e=new fm({}),t=new Qp({}),o=new vc({}),u=new D$({});let L=a&&bm();return c=new Df({}),d=new Vf({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),L&&L.c(),f=O(),h(c.$$.fragment),g=O(),h(d.$$.fragment)},m(S,M){b(e,S,M),$(S,n,M),b(t,S,M),$(S,r,M),b(o,S,M),$(S,s,M),b(u,S,M),$(S,i,M),L&&L.m(S,M),$(S,f,M),b(c,S,M),$(S,g,M),b(d,S,M),y=!0},p:ne,i(S){y||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(o.$$.fragment,S),m(u.$$.fragment,S),m(L),m(c.$$.fragment,S),m(d.$$.fragment,S),y=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(o.$$.fragment,S),_(u.$$.fragment,S),_(L),_(c.$$.fragment,S),_(d.$$.fragment,S),y=!1},d(S){S&&(p(n),p(r),p(s),p(i),p(f),p(g)),v(e,S),v(t,S),v(o,S),v(u,S),L&&L.d(S),v(c,S),v(d,S)}}}function wm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[vm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function km(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new to({props:u}),U.push(()=>W(e,"enabled",s)),r=new io({}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],V(()=>n=!1)),e.$set(f)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function ym(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,L,S,M,j;return e=new _$({}),t=new Ee({props:{label:"Trip generators",$$slots:{default:[cm]},$$scope:{ctx:l}}}),o=new Ee({props:{label:"Existing infrastructure",$$slots:{default:[pm]},$$scope:{ctx:l}}}),u=new Ee({props:{label:"Public transit",$$slots:{default:[mm]},$$scope:{ctx:l}}}),a=new Ee({props:{label:"Boundaries",$$slots:{default:[gm]},$$scope:{ctx:l}}}),c=new Ee({props:{label:"Census",$$slots:{default:[hm]},$$scope:{ctx:l}}}),d=new Ee({props:{label:"Other",$$slots:{default:[wm]},$$scope:{ctx:l}}}),L=new Ee({props:{label:"Tools",$$slots:{default:[km]},$$scope:{ctx:l}}}),M=new eo({props:{disabled:!l[1]}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),h(a.$$.fragment),f=O(),h(c.$$.fragment),g=O(),h(d.$$.fragment),y=O(),h(L.$$.fragment),S=O(),h(M.$$.fragment)},m(I,N){b(e,I,N),$(I,n,N),b(t,I,N),$(I,r,N),b(o,I,N),$(I,s,N),b(u,I,N),$(I,i,N),b(a,I,N),$(I,f,N),b(c,I,N),$(I,g,N),b(d,I,N),$(I,y,N),b(L,I,N),$(I,S,N),b(M,I,N),j=!0},p(I,N){const A={};N&16&&(A.$$scope={dirty:N,ctx:I}),t.$set(A);const P={};N&16&&(P.$$scope={dirty:N,ctx:I}),o.$set(P);const F={};N&16&&(F.$$scope={dirty:N,ctx:I}),u.$set(F);const T={};N&16&&(T.$$scope={dirty:N,ctx:I}),a.$set(T);const E={};N&16&&(E.$$scope={dirty:N,ctx:I}),c.$set(E);const H={};N&16&&(H.$$scope={dirty:N,ctx:I}),d.$set(H);const R={};N&17&&(R.$$scope={dirty:N,ctx:I}),L.$set(R);const D={};N&2&&(D.disabled=!I[1]),M.$set(D)},i(I){j||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(o.$$.fragment,I),m(u.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(d.$$.fragment,I),m(L.$$.fragment,I),m(M.$$.fragment,I),j=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(o.$$.fragment,I),_(u.$$.fragment,I),_(a.$$.fragment,I),_(c.$$.fragment,I),_(d.$$.fragment,I),_(L.$$.fragment,I),_(M.$$.fragment,I),j=!1},d(I){I&&(p(n),p(r),p(s),p(i),p(f),p(g),p(y),p(S)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I),v(c,I),v(d,I),v(L,I),v(M,I)}}}function Sm(l){let e,n;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Re({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Cm(l){let e,n,t,r;return e=new Ee({props:{label:"Layers",open:!0,$$slots:{default:[ym]},$$scope:{ctx:l}}}),t=new bt({props:{data:l[2],$$slots:{default:[Sm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Tm(l,e,n){let t,r;ke(l,cr,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&cr.set(!t)},[t,r,o,s]}class Om extends K{constructor(e){super(),Q(this,e,Tm,Cm,Y,{})}}function tl(l){let e;return{c(){e=C("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lm(l){let e,n=l[0]&&tl();return{c(){n&&n.c(),e=je()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=tl(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(t){t&&p(e),n&&n.d(t)}}}function Am(l,e,n){let{loadFile:t}=e,r=!0;return Ln(async()=>{let s=await(await fetch(`${on()}/v1/all_schemes_output.geojson.gz`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class Im extends K{constructor(e){super(),Q(this,e,Am,Lm,Y,{loadFile:1})}}function nl(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=C("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function Mm(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pm(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nm(l){let e,n,t,r;return e=new dt({props:{$$slots:{default:[Mm]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new dt({props:{$$slots:{default:[Pm]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Fm(l){var E,H,R,D;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((E=l[0].browse)==null?void 0:E.authority_or_region)+"",a,f,c,g,d=((H=l[0].browse)==null?void 0:H.capital_scheme_id)+"",y,L,S,M,j=((R=l[0].browse)==null?void 0:R.funding_programme)+"",I,N,A,P,F,T=((D=l[0].browse)==null?void 0:D.current_milestone)&&nl(l);return P=new no({props:{$$slots:{default:[Nm]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("Scheme reference: "),r=k(t),o=O(),s=C("p"),u=k("Authority or region: "),a=k(i),f=O(),c=C("p"),g=k("Capital scheme ID: "),y=k(d),L=O(),S=C("p"),M=k("Funding programme: "),I=k(j),N=O(),T&&T.c(),A=O(),h(P.$$.fragment)},m(B,X){$(B,e,X),w(e,n),w(e,r),$(B,o,X),$(B,s,X),w(s,u),w(s,a),$(B,f,X),$(B,c,X),w(c,g),w(c,y),$(B,L,X),$(B,S,X),w(S,M),w(S,I),$(B,N,X),T&&T.m(B,X),$(B,A,X),b(P,B,X),F=!0},p(B,X){var oe,ce,Ie,Te;(!F||X&1)&&t!==(t=B[0].scheme_reference+"")&&z(r,t),(!F||X&1)&&i!==(i=((oe=B[0].browse)==null?void 0:oe.authority_or_region)+"")&&z(a,i),(!F||X&1)&&d!==(d=((ce=B[0].browse)==null?void 0:ce.capital_scheme_id)+"")&&z(y,d),(!F||X&1)&&j!==(j=((Ie=B[0].browse)==null?void 0:Ie.funding_programme)+"")&&z(I,j),(Te=B[0].browse)!=null&&Te.current_milestone?T?T.p(B,X):(T=nl(B),T.c(),T.m(A.parentNode,A)):T&&(T.d(1),T=null);const re={};X&32&&(re.$$scope={dirty:X,ctx:B}),P.$set(re)},i(B){F||(m(P.$$.fragment,B),F=!0)},o(B){_(P.$$.fragment,B),F=!1},d(B){B&&(p(e),p(o),p(s),p(f),p(c),p(L),p(S),p(N),p(A)),T&&T.d(B),v(P,B)}}}function Em(l){let e,n;return e=new Ee({props:{label:`${l[0].scheme_name}`,$$slots:{default:[Fm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Dm(l,e,n){let t,r;ke(l,ht,i=>n(3,t=i)),ke(l,On,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Yl(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";Jl(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class jm extends K{constructor(e){super(),Q(this,e,Dm,Em,Y,{scheme:0})}}function rl(l){let e,n,t=jn(l[0].length_meters)+"",r;return{c(){e=C("p"),n=k("Length: "),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(e,r)},p(o,s){s&1&&t!==(t=jn(o[0].length_meters)+"")&&z(r,t)},d(o){o&&p(e)}}}function ll(l){let e,n=ot(l[0].description,l[2])+"";return{c(){e=C("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=ot(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function ol(l){var o;let e,n,t=((o=l[1].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=C("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function Rm(l){var ze,Fe,Ce,Je;let e,n,t,r=ot(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,g,d,y,L,S,M=ot(l[1].scheme_name??"",l[3])+"",j,I,N=ot(l[0].scheme_reference,l[3])+"",A,P,F,T,E=((ze=l[1].browse)==null?void 0:ze.authority_or_region)+"",H,R,D,B,X=((Fe=l[1].browse)==null?void 0:Fe.capital_scheme_id)+"",re,oe,ce,Ie,Te=((Ce=l[1].browse)==null?void 0:Ce.funding_programme)+"",ie,Ae,ue=l[0].length_meters&&rl(l),_e=l[0].description&&ll(l),ge=((Je=l[1].browse)==null?void 0:Je.current_milestone)&&ol(l);return{c(){e=C("div"),n=C("h2"),t=new qt(!1),o=k(" ("),u=k(s),i=k(")"),a=O(),ue&&ue.c(),f=O(),_e&&_e.c(),c=O(),g=C("hr"),d=O(),y=C("p"),L=k("Part of scheme: "),S=new qt(!1),j=k(" ("),I=new qt(!1),A=k(")"),P=O(),F=C("p"),T=k("Authority or region: "),H=k(E),R=O(),D=C("p"),B=k("Capital scheme ID: "),re=k(X),oe=O(),ce=C("p"),Ie=k("Funding programme: "),ie=k(Te),Ae=O(),ge&&ge.c(),t.a=o,S.a=j,I.a=A,Se(e,"max-width","30vw")},m(se,ve){$(se,e,ve),w(e,n),t.m(r,n),w(n,o),w(n,u),w(n,i),w(e,a),ue&&ue.m(e,null),w(e,f),_e&&_e.m(e,null),w(e,c),w(e,g),w(e,d),w(e,y),w(y,L),S.m(M,y),w(y,j),I.m(N,y),w(y,A),w(e,P),w(e,F),w(F,T),w(F,H),w(e,R),w(e,D),w(D,B),w(D,re),w(e,oe),w(e,ce),w(ce,Ie),w(ce,ie),w(e,Ae),ge&&ge.m(e,null)},p(se,[ve]){var Pn,Nn,Fn,En;ve&5&&r!==(r=ot(se[0].name,se[2])+"")&&t.p(r),ve&1&&s!==(s=se[0].intervention_type+"")&&z(u,s),se[0].length_meters?ue?ue.p(se,ve):(ue=rl(se),ue.c(),ue.m(e,f)):ue&&(ue.d(1),ue=null),se[0].description?_e?_e.p(se,ve):(_e=ll(se),_e.c(),_e.m(e,c)):_e&&(_e.d(1),_e=null),ve&10&&M!==(M=ot(se[1].scheme_name??"",se[3])+"")&&S.p(M),ve&9&&N!==(N=ot(se[0].scheme_reference,se[3])+"")&&I.p(N),ve&2&&E!==(E=((Pn=se[1].browse)==null?void 0:Pn.authority_or_region)+"")&&z(H,E),ve&2&&X!==(X=((Nn=se[1].browse)==null?void 0:Nn.capital_scheme_id)+"")&&z(re,X),ve&2&&Te!==(Te=((Fn=se[1].browse)==null?void 0:Fn.funding_programme)+"")&&z(ie,Te),(En=se[1].browse)!=null&&En.current_milestone?ge?ge.p(se,ve):(ge=ol(se),ge.c(),ge.m(e,null)):ge&&(ge.d(1),ge=null)},i:ne,o:ne,d(se){se&&p(e),ue&&ue.d(),_e&&_e.d(),ge&&ge.d()}}}function ot(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function Bm(l,e,n){let t,r,o,s;ke(l,ln,i=>n(4,r=i)),ke(l,wt,i=>n(2,o=i)),ke(l,kt,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class Mn extends K{constructor(e){super(),Q(this,e,Bm,Rm,Y,{props:0})}}function zm(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function qm(l){let e,n;return e=new Mn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hm(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[zm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[qm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Gm(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Um(l){let e,n;return e=new Mn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wm(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Gm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Um,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Vm(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Xm(l){let e,n;return e=new Mn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ym(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Vm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Xm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Jm(l){let e,n,t,r,o,s,u,i,a,f;const c=[q("interventions-points"),{filter:["all",Rn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":qn,"circle-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[Hm]},$$scope:{ctx:l}};for(let A=0;A<c.length;A+=1)g=ee(g,c[A]);e=new ft({props:g});const d=[q("interventions-lines"),{filter:["all",Bn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":vt,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[Wm]},$$scope:{ctx:l}};for(let A=0;A<d.length;A+=1)y=ee(y,d[A]);t=new ye({props:y});const L=[q("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*vt,"circle-opacity":0,"circle-stroke-color":rt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let S={};for(let A=0;A<L.length;A+=1)S=ee(S,L[A]);o=new ft({props:S});const M=[q("interventions-polygons"),{filter:["all",xt,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":Z(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let j={$$slots:{default:[Ym]},$$scope:{ctx:l}};for(let A=0;A<M.length;A+=1)j=ee(j,M[A]);u=new Re({props:j});const I=[q("interventions-polygons-outlines"),{filter:["all",xt,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*vt}},{layout:{visibility:l[0]?"visible":"none"}}];let N={};for(let A=0;A<I.length;A+=1)N=ee(N,I[A]);return a=new ye({props:N}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),h(a.$$.fragment)},m(A,P){b(e,A,P),$(A,n,P),b(t,A,P),$(A,r,P),b(o,A,P),$(A,s,P),b(u,A,P),$(A,i,P),b(a,A,P),f=!0},p(A,P){const F=P&29?te(c,[c[0],P&24&&{filter:["all",Rn,A[3],A[4]]},c[2],c[3],P&4&&{paint:{"circle-color":A[2],"circle-radius":qn,"circle-opacity":Z(1,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}},c[6]]):{};P&128&&(F.$$scope={dirty:P,ctx:A}),e.$set(F);const T=P&13?te(d,[d[0],P&8&&{filter:["all",Bn,A[3]]},d[2],d[3],P&4&&{paint:{"line-color":A[2],"line-width":vt,"line-opacity":Z(1,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}},d[6]]):{};P&128&&(T.$$scope={dirty:P,ctx:A}),t.$set(T);const E=P&1?te(L,[L[0],L[1],L[2],{layout:{visibility:A[0]?"visible":"none"}}]):{};o.$set(E);const H=P&13?te(M,[M[0],P&8&&{filter:["all",xt,A[3]]},M[2],M[3],P&4&&{paint:{"fill-color":A[2],"fill-opacity":Z(.2,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}},M[6]]):{};P&128&&(H.$$scope={dirty:P,ctx:A}),u.$set(H);const R=P&13?te(I,[I[0],P&8&&{filter:["all",xt,A[3]]},P&4&&{paint:{"line-color":A[2],"line-opacity":.5,"line-width":.7*vt}},P&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};a.$set(R)},i(A){f||(m(e.$$.fragment,A),m(t.$$.fragment,A),m(o.$$.fragment,A),m(u.$$.fragment,A),m(a.$$.fragment,A),f=!0)},o(A){_(e.$$.fragment,A),_(t.$$.fragment,A),_(o.$$.fragment,A),_(u.$$.fragment,A),_(a.$$.fragment,A),f=!1},d(A){A&&(p(n),p(r),p(s),p(i)),v(e,A),v(t,A),v(o,A),v(u,A),v(a,A)}}}function Km(l){let e,n;return e=new bt({props:{data:l[1],$$slots:{default:[Jm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qm(l,e,n){let t,r;ke(l,ht,a=>n(5,r=a));let{showSchemes:o}=e,[s]=Sn();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=Kl(r))},[o,t,s,u,i,r]}class Zm extends K{constructor(e){super(),Q(this,e,Qm,Km,Y,{showSchemes:0})}}function sl(l,e,n){const t=l.slice();return t[13]=e[n],t}function il(l,e,n){const t=l.slice();return t[16]=e[n],t}function xm(l){let e,n;return e=new Im({props:{loadFile:l[7]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function al(l){let e,n,t,r,o;e=new dt({props:{$$slots:{default:[e_]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[t_]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new pl({props:u}),U.push(()=>W(t,"open",s)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],V(()=>r=!1)),t.$set(c)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function e_(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fl(l){let e,n,t=l[16]+"",r;return{c(){e=C("li"),n=C("p"),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&z(r,t)},d(o){o&&p(e)}}}function t_(l){let e,n,t,r,o=De(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=fl(il(l,o,u));return{c(){e=C("div"),n=C("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=O(),r=C("ul");for(let u=0;u<s.length;u+=1)s[u].c();G(e,"class","govuk-prose")},m(u,i){$(u,e,i),w(e,n),w(e,t),w(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=De(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=il(u,o,a);s[a]?s[a].p(f,i):(s[a]=fl(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),gt(s,u)}}}function ul(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new Vi({props:u}),U.push(()=>W(e,"schemesToBeShown",o)),U.push(()=>W(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],V(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],V(()=>t=!1)),e.$set(f)},i(i){r||(m(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){v(e,i)}}}function cl(l){let e,n;return e=new jm({props:{scheme:l[13]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $l(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&cl(l);return{c(){r&&r.c(),n=je()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&m(r,1)):(r=cl(o),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(pe(),_(r,1,1,()=>{r=null}),me())},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function n_(l){let e,n,t,r,o,s,u,i,a,f,c=gn()=="Private (development)",g,d,y,L,S,M,j,I,N;o=new so({props:{boundaryGeojson:l[4]}}),a=new Ql({});let A=c&&xm(l),P=l[4].notes&&al(l);y=new lo({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),S=new wl({props:{errorMessage:l[0]}});let F=l[6].size>0&&ul(l),T=De(l[6].values()),E=[];for(let R=0;R<T.length;R+=1)E[R]=$l(sl(l,T,R));const H=R=>_(E[R],1,1,()=>{E[R]=null});return{c(){e=C("div"),n=C("div"),t=C("h1"),t.textContent="Browse schemes",r=O(),h(o.$$.fragment),s=O(),u=C("p"),u.textContent=`App version: ${gn()}`,i=O(),h(a.$$.fragment),f=O(),A&&A.c(),g=O(),P&&P.c(),d=O(),h(y.$$.fragment),L=O(),h(S.$$.fragment),M=O(),F&&F.c(),j=O(),I=C("ul");for(let R=0;R<E.length;R+=1)E[R].c();Se(n,"display","flex"),Se(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(R,D){$(R,e,D),w(e,n),w(n,t),w(n,r),b(o,n,null),w(e,s),w(e,u),w(e,i),b(a,e,null),w(e,f),A&&A.m(e,null),w(e,g),P&&P.m(e,null),w(e,d),b(y,e,null),w(e,L),b(S,e,null),w(e,M),F&&F.m(e,null),w(e,j),w(e,I);for(let B=0;B<E.length;B+=1)E[B]&&E[B].m(I,null);N=!0},p(R,D){const B={};D&16&&(B.boundaryGeojson=R[4]),o.$set(B),c&&A.p(R,D),R[4].notes?P?(P.p(R,D),D&16&&m(P,1)):(P=al(R),P.c(),m(P,1),P.m(e,d)):P&&(pe(),_(P,1,1,()=>{P=null}),me());const X={};if(D&1&&(X.errorMessage=R[0]),S.$set(X),R[6].size>0?F?(F.p(R,D),D&64&&m(F,1)):(F=ul(R),F.c(),m(F,1),F.m(e,j)):F&&(pe(),_(F,1,1,()=>{F=null}),me()),D&66){T=De(R[6].values());let re;for(re=0;re<T.length;re+=1){const oe=sl(R,T,re);E[re]?(E[re].p(oe,D),m(E[re],1)):(E[re]=$l(oe),E[re].c(),m(E[re],1),E[re].m(I,null))}for(pe(),re=T.length;re<E.length;re+=1)H(re);me()}},i(R){if(!N){m(o.$$.fragment,R),m(a.$$.fragment,R),m(A),m(P),m(y.$$.fragment,R),m(S.$$.fragment,R),m(F);for(let D=0;D<T.length;D+=1)m(E[D]);N=!0}},o(R){_(o.$$.fragment,R),_(a.$$.fragment,R),_(A),_(P),_(y.$$.fragment,R),_(S.$$.fragment,R),_(F),E=E.filter(Boolean);for(let D=0;D<E.length;D+=1)_(E[D]);N=!1},d(R){R&&p(e),v(o),v(a),A&&A.d(),P&&P.d(),v(y),v(S),F&&F.d(),gt(E,R)}}}function r_(l){let e,n,t,r,o,s,u;return e=new ro({}),t=new Zm({props:{showSchemes:l[2]}}),s=new Om({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),o=C("div"),h(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),$(i,o,a),b(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),v(s)}}}function l_(l){let e,n,t;return n=new Zl({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[r_]},$$scope:{ctx:l}}}),{c(){e=C("div"),h(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function o_(l){let e,n;return e=new ao({props:{$$slots:{main:[l_],sidebar:[n_]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function s_(l,e,n){let t,r,o;ke(l,ht,S=>n(4,t=S)),ke(l,zn,S=>n(5,r=S)),ke(l,ln,S=>n(6,o=S)),Ln(()=>{xl()});const s=new URLSearchParams(window.location.search);zn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(S){try{ht.set(JSON.parse(S)),ln.set(Ti(t)),n(0,u="")}catch(M){n(0,u=`The file you loaded is broken: ${M}`)}}const g=()=>n(3,f=!0);function d(S){f=S,n(3,f)}function y(S){i=S,n(1,i)}function L(S){a=S,n(2,a)}return[u,i,a,f,t,r,o,c,g,d,y,L]}class i_ extends K{constructor(e){super(),Q(this,e,s_,o_,Y,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new i_({target:document.getElementById("app")});
