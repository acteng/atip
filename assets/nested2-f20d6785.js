import{S as q,i as W,s as G,e as L,h as z,$ as Te,j as $,W as ee,o as p,aP as Yr,b as K,c as J,d as C,g as h,m as b,w as St,l as Y,t as m,n as _,p as v,X as Pt,Y as Mt,Z as Et,_ as Nt,a7 as ze,J as ue,K as ce,aQ as Ot,u as w,k,D as B,I as Ae,N as fn,O as Or,q as me,P as Tr,Q as Cr,T as Tt,U as Ar,V as Lr,aX as Qr,aY as at,a4 as hn,aZ as xr,f as un,aO as el,ar as Gt,aj as Xt,ae as cn,r as $n,F as Ir,a as tn,v as zt,aW as X,a_ as ge,a$ as we,B as Z,ah as Q,C as he,ak as x,b0 as ne,G as Ft,H as tl,aS as nl,ab as bn,R as Pr,b1 as pn,b2 as mn,E as Mr,as as rl,ag as ll,aU as vn,al as ol,am as wn,an as kn,ao as Rt,aV as yn,L as sl,M as il,y as al}from"./index-d2b583d7.js";import{C as Me,d as Ze,j as Ct,f as rt,h as ie,l as R,c as qt,k as fl,S as ul,B as cl,b as wt,G as $l}from"./StreetViewTool-ad2ce4c0.js";import{a as Ye,F as pl}from"./Popup-2a92ba67.js";import{P as oe}from"./Popup-79807a99.js";import{R as ml,C as nt,Z as _l}from"./ZoomOutMap-faa70ec4.js";import{L as gl,a as dl}from"./LineMeasureController-a0aa670f.js";function hl(r){let e;return{c(){e=L("span"),z(e,"class","svelte-kzgqtg"),Te(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Te(e,"background",n[0])},i:ee,o:ee,d(n){n&&p(e)}}}function bl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class ke extends q{constructor(e){super(),W(this,e,bl,hl,G,{color:0})}}const vl="/atip/assets/help-d011708a.svg";function wl(r){let e,n;const t=r[1].default,l=Pt(t,r,r[4],null);return{c(){e=L("div"),l&&l.c(),z(e,"class","govuk-prose")},m(o,i){$(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Mt(l,t,o,o[4],n?Nt(t,o[4],i,null):Et(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){_(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function kl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[wl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Yr({props:a}),K.push(()=>J(t,"open",s)),{c(){e=L("button"),e.innerHTML=`<img src="${vl}" title="Help" alt="Help"/>`,n=C(),h(t.$$.fragment),z(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,i||(u=St(e,"click",r[2]),i=!0)},p(f,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,d.open=f[0],Y(()=>l=!1)),t.$set(d)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),i=!1,u()}}}function yl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class ae extends q{constructor(e){super(),W(this,e,yl,kl,G,{})}}function Sn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function On(r){let e,n,t,l=r[1]+"",o,i,u;return n=new ke({props:{color:r[2]}}),{c(){e=L("li"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){$(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p(s,a){const f={};a&1&&(f.color=s[2]),n.$set(f),(!u||a&1)&&l!==(l=s[1]+"")&&B(o,l)},i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){_(n.$$.fragment,s),u=!1},d(s){s&&p(e),v(n)}}}function Sl(r){let e,n,t=ze(r[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=On(Sn(r,t,i));const o=i=>_(l[i],1,1,()=>{l[i]=null});return{c(){e=L("ul");for(let i=0;i<l.length;i+=1)l[i].c()},m(i,u){$(i,e,u);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);n=!0},p(i,u){if(u&1){t=ze(i[0]);let s;for(s=0;s<t.length;s+=1){const a=Sn(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=On(a),l[s].c(),m(l[s],1),l[s].m(e,null))}for(ue(),s=t.length;s<l.length;s+=1)o(s);ce()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)_(l[u]);n=!1},d(i){i&&p(e),Ot(l,i)}}}function Ol(r){let e,n;return e=new Me({props:{label:"Legend",$$slots:{default:[Sl]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class Cl extends q{constructor(e){super(),W(this,e,Tl,Ol,G,{rows:0})}}function Tn(r){let e=r[0],n,t,l=Cn(r);return{c(){l.c(),n=Ae()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&G(e,e=o[0])?(ue(),_(l,1,1,ee),ce(),l=Cn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){_(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Cn(r){let e;const n=r[10].default,t=Pt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Mt(t,n,l,l[9],e?Nt(n,l[9],o,null):Et(l[9]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Al(r){let e,n,t=r[0]&&Tn(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Tn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ue(),_(t,1,1,()=>{t=null}),ce())},i(l){n||(m(t),n=!0)},o(l){_(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Ll(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=fn("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=Or();me(r,f,y=>n(8,l=y)),me(r,c,y=>n(0,t=y));let d,g=!0;return Tr(()=>{t&&d&&l&&(Cr(f,t,d),Tt(c,t=null,t),n(6,d=void 0))}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,s=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,i=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Tt(c,t=u,t),Ar(l,t,Lr({type:"raster",tiles:s,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,d=l==null?void 0:l.getSource(t)),n(7,g=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,d=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&d&&(g?n(7,g=!1):d.setTiles(s))},[t,f,c,u,s,a,d,g,l,i,o]}class Il extends q{constructor(e){super(),W(this,e,Ll,Al,G,{id:3,tiles:4,tileSize:5})}}function Pl(r){let e;const n=r[16].default,t=Pt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Mt(t,n,l,l[24],e?Nt(n,l[24],o,null):Et(l[24]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Ml(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Pl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Qr({props:o}),K.push(()=>J(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],Y(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function El(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=fn("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:d=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:O=!1}=e,{hovered:E=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:F=!0}=e;function I(j){E=j,n(0,E)}function N(j){at.call(this,r,j)}function M(j){at.call(this,r,j)}function A(j){at.call(this,r,j)}function P(j){at.call(this,r,j)}function H(j){at.call(this,r,j)}function V(j){at.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,i=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,s=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,d=j.filter),"applyToClusters"in j&&n(9,g=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,S=j.maxzoom),"hoverCursor"in j&&n(12,T=j.hoverCursor),"manageHoverState"in j&&n(13,O=j.manageHoverState),"hovered"in j&&n(0,E=j.hovered),"eventsIfTopMost"in j&&n(14,D=j.eventsIfTopMost),"interactive"in j&&n(15,F=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[E,o,i,u,s,a,f,c,d,g,y,S,T,O,D,F,t,I,N,M,A,P,H,V,l]}class Nl extends q{constructor(e){super(),W(this,e,El,Ml,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function An(r){let e=r[0],n,t,l=Ln(r);return{c(){l.c(),n=Ae()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&G(e,e=o[0])?(ue(),_(l,1,1,ee),ce(),l=Ln(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){_(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Ln(r){let e;const n=r[9].default,t=Pt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Mt(t,n,l,l[8],e?Nt(n,l[8],o,null):Et(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Fl(r){let e,n,t=r[0]&&An(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=An(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ue(),_(t,1,1,()=>{t=null}),ce())},i(l){n||(m(t),n=!0)},o(l){_(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Dl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=fn("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!hn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new xr;hn.addProtocol("pmtiles",y.tile)}const{map:c,self:d}=Or();me(r,c,y=>n(7,l=y)),me(r,d,y=>n(0,t=y));let g;return Tr(()=>{t&&l&&(Cr(c,t,g),Tt(d,t=null,t),g=void 0)}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,s=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,i=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Tt(d,t=u,t),Ar(l,t,Lr({type:"vector",url:s,tiles:a,promoteId:f}),y=>l&&y===t,()=>{t&&(g=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{g=l==null?void 0:l.getSource(u)}))},[t,c,d,u,s,a,f,l,i,o]}class be extends q{constructor(e){super(),W(this,e,Dl,Fl,G,{id:3,url:4,tiles:5,promoteId:6})}}function jl(r){let e;return{c(){e=L("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rl(r){let e,n,t=r[0]=="Private (development)"&&jl();return{c(){t&&t.c(),e=C(),n=L("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),$(l,e,o),$(l,n,o)},p:ee,d(l){l&&(p(e),p(n)),t&&t.d(l)}}}function Bl(r){let e,n,t,l,o,i;return o=new ae({props:{$$slots:{default:[Rl]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("App version: "),t=w(r[0]),l=C(),h(o.$$.fragment)},m(u,s){$(u,e,s),k(e,n),k(e,t),k(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(m(o.$$.fragment,u),i=!0)},o(u){_(o.$$.fragment,u),i=!1},d(u){u&&p(e),v(o)}}}function Hl(r){return[un()]}class Ul extends q{constructor(e){super(),W(this,e,Hl,Bl,G,{})}}const Gl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Se=Uint8Array,st=Uint16Array,Er=Uint32Array,Nr=new Se([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fr=new Se([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zl=new Se([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Dr=function(r,e){for(var n=new st(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Er(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},jr=Dr(Nr,2),Rr=jr[0],ql=jr[1];Rr[28]=258,ql[258]=28;var Wl=Dr(Fr,0),Vl=Wl[0],nn=new st(32768);for(var se=0;se<32768;++se){var et=(se&43690)>>>1|(se&21845)<<1;et=(et&52428)>>>2|(et&13107)<<2,et=(et&61680)>>>4|(et&3855)<<4,nn[se]=((et&65280)>>>8|(et&255)<<8)>>>1}var yt=function(r,e,n){for(var t=r.length,l=0,o=new st(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new st(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new st(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)u[nn[c]>>>s]=a}else for(u=new st(t),l=0;l<t;++l)r[l]&&(u[l]=nn[i[r[l]-1]++]>>>15-r[l]);return u},Dt=new Se(288);for(var se=0;se<144;++se)Dt[se]=8;for(var se=144;se<256;++se)Dt[se]=9;for(var se=256;se<280;++se)Dt[se]=7;for(var se=280;se<288;++se)Dt[se]=8;var Br=new Se(32);for(var se=0;se<32;++se)Br[se]=5;var Xl=yt(Dt,9,1),Kl=yt(Br,5,1),Kt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Ie=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Zt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Zl=function(r){return(r+7)/8|0},_n=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?st:r.BYTES_PER_ELEMENT==4?Er:Se)(n-e);return t.set(r.subarray(e,n)),t},Jl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pe=function(r,e,n){var t=new Error(e||Jl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Pe),!n)throw t;return t},Yl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Se(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Se(t*3));var i=function(_e){var De=e.length;if(_e>De){var Xe=new Se(Math.max(De*2,_e));Xe.set(e),e=Xe}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,d=n.m,g=n.n,y=t*8;do{if(!f){u=Ie(r,s,1);var S=Ie(r,s+1,3);if(s+=3,S)if(S==1)f=Xl,c=Kl,d=9,g=5;else if(S==2){var D=Ie(r,s,31)+257,F=Ie(r,s+10,15)+4,I=D+Ie(r,s+5,31)+1;s+=14;for(var N=new Se(I),M=new Se(19),A=0;A<F;++A)M[zl[A]]=Ie(r,s+A*3,7);s+=F*3;for(var P=Kt(M),H=(1<<P)-1,V=yt(M,P,1),A=0;A<I;){var j=V[Ie(r,s,H)];s+=j&15;var T=j>>>4;if(T<16)N[A++]=T;else{var U=0,$e=0;for(T==16?($e=3+Ie(r,s,3),s+=2,U=N[A-1]):T==17?($e=3+Ie(r,s,7),s+=3):T==18&&($e=11+Ie(r,s,127),s+=7);$e--;)N[A++]=U}}var Ne=N.subarray(0,D),de=N.subarray(D);d=Kt(Ne),g=Kt(de),f=yt(Ne,d,1),c=yt(de,g,1)}else Pe(1);else{var T=Zl(s)+4,O=r[T-4]|r[T-3]<<8,E=T+O;if(E>t){o&&Pe(0);break}l&&i(a+O),e.set(r.subarray(T,E),a),n.b=a+=O,n.p=s=E*8,n.f=u;continue}if(s>y){o&&Pe(0);break}}l&&i(a+131072);for(var Ve=(1<<d)-1,pe=(1<<g)-1,fe=s;;fe=s){var U=f[Zt(r,s)&Ve],re=U>>>4;if(s+=U&15,s>y){o&&Pe(0);break}if(U||Pe(2),re<256)e[a++]=re;else if(re==256){fe=s,f=null;break}else{var xe=re-254;if(re>264){var A=re-257,Ce=Nr[A];xe=Ie(r,s,(1<<Ce)-1)+Rr[A],s+=Ce}var Le=c[Zt(r,s)&pe],Fe=Le>>>4;Le||Pe(3),s+=Le&15;var de=Vl[Fe];if(Fe>3){var Ce=Fr[Fe];de+=Zt(r,s)&(1<<Ce)-1,s+=Ce}if(s>y){o&&Pe(0);break}l&&i(a+131072);for(var le=a+xe;a<le;a+=4)e[a]=e[a-de],e[a+1]=e[a+1-de],e[a+2]=e[a+2-de],e[a+3]=e[a+3-de];a=le}}n.l=f,n.p=fe,n.b=a,n.f=u,f&&(u=1,n.m=d,n.d=c,n.n=g)}while(!u);return a==e.length?e:_n(e,0,a)},Ql=new Se(0),Ge=function(r,e){return r[e]|r[e+1]<<8},Ee=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Jt=function(r,e){return Ee(r,e)+Ee(r,e+4)*4294967296};function xl(r,e){return Yl(r,e)}var rn=typeof TextDecoder<"u"&&new TextDecoder,eo=0;try{rn.decode(Ql,{stream:!0}),eo=1}catch{}var to=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,_n(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Hr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(rn)return rn.decode(r);var l=to(r),o=l[0],i=l[1];return i.length&&Pe(8),o}}var no=function(r,e){return e+30+Ge(r,e+26)+Ge(r,e+28)},ro=function(r,e,n){var t=Ge(r,e+28),l=Hr(r.subarray(e+46,e+46+t),!(Ge(r,e+8)&2048)),o=e+46+t,i=Ee(r,e+20),u=n&&i==4294967295?lo(r,o):[i,Ee(r,e+24),Ee(r,e+42)],s=u[0],a=u[1],f=u[2];return[Ge(r,e+10),s,a,l,o+Ge(r,e+30)+Ge(r,e+32),f]},lo=function(r,e){for(;Ge(r,e)!=1;e+=4+Ge(r,e+2));return[Jt(r,e+12),Jt(r,e+4),Jt(r,e+20)]};function oo(r,e){for(var n={},t=r.length-22;Ee(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Pe(13);var l=Ge(r,t+8);if(!l)return{};var o=Ee(r,t+16),i=o==4294967295||l==65535;if(i){var u=Ee(r,t-12);i=Ee(r,u)==101075792,i&&(l=Ee(r,u+32),o=Ee(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=ro(r,o,i),c=f[0],d=f[1],g=f[2],y=f[3],S=f[4],T=f[5],O=no(r,T);o=S,(!s||s({name:y,size:d,originalSize:g,compression:c}))&&(c?c==8?n[y]=xl(r.subarray(O,O+d),new Se(g)):Pe(14,"unknown compression type "+c):n[y]=_n(r,O,O+d))}return n}function so(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Yt):Yt(r)}function Yt(r){var e=new Uint8Array(r),n=oo(e);return Promise.resolve(io(n))}function io(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Hr(r[l])}return e}function qe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&it(t)===e)return t;n++}}function jt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&it(l)===e&&n.push(l),t++}return n}function Wt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&it(l)===e&&n(l,t):n(l,t),t++}}function ao(r,e,n){var t=[];return Wt(r,e,function(l,o){t.push(n(l,o))}),t}var fo=/.+\:/;function it(r){return r.tagName.replace(fo,"")}function Ur(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+it(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Ur(r.childNodes[t]),t++;return e+="</"+it(r)+">",e}function uo(r){var e=r.documentElement,n=qe(e,"sheetData"),t=[];return Wt(n,"row",function(l){Wt(l,"c",function(o){t.push(o)})}),t}function co(r,e){return qe(e,"v")}function $o(r,e){if(e.firstChild&&it(e.firstChild)==="is"&&e.firstChild.firstChild&&it(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function po(r){var e=r.documentElement,n=qe(e,"dimension");if(n)return n.getAttribute("ref")}function mo(r){var e=r.documentElement,n=qe(e,"cellStyleXfs");return n?jt(n,"xf"):[]}function _o(r){var e=r.documentElement,n=qe(e,"cellXfs");return n?jt(n,"xf"):[]}function go(r){var e=r.documentElement,n=qe(e,"numFmts");return n?jt(n,"numFmt"):[]}function ho(r){var e=r.documentElement;return ao(e,"si",function(n){var t=qe(n,"t");if(t)return t.textContent;var l="";return Wt(n,"r",function(o){l+=qe(o,"t").textContent}),l})}function bo(r){var e=r.documentElement;return qe(e,"workbookPr")}function vo(r){var e=r.documentElement;return jt(e,"Relationship")}function wo(r){var e=r.documentElement,n=qe(e,"sheets");return jt(n,"sheet")}function ko(r,e){var n=e.createDocument(r),t={},l=bo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return wo(n).forEach(o),t}function yo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Qt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Qt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Qt(u);break}};return vo(n).forEach(l),t}function Qt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function In(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Pn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?In(Object(n),!0).forEach(function(t){So(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function So(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Oo(r,e){if(!r)return{};var n=e.createDocument(r),t=mo(n).map(xt),l=go(n).map(To).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Pn(Pn({},t[u.xfId]),xt(u,l)):xt(u,l)};return _o(n).map(o)}function To(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function xt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Co(r,e){return r?ho(e.createDocument(r)):[]}function Gr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Ao(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Lo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lo(r,e){if(r){if(typeof r=="string")return Mn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(r,e)}}function Mn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Io(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Po.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&No(l.numberFormat.template))return!0}}var Po=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Mo=/^\[\$-414\]/,Eo=/;@$/;function No(r){r=r.toLowerCase(),r=r.replace(Mo,""),r=r.replace(Eo,"");for(var e=r.split(/\W+/),n=Ao(e),t;!(t=n()).done;){var l=t.value;if(Fo.indexOf(l)<0)return!1}return!0}var Fo=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Do(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=en(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=en(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=en(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=jo(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var d=Number(r);if(isNaN(d))throw new Error('Invalid "numeric" cell value: '.concat(r));r=d,Io(r,o(),i,a)&&(r=Gr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function jo(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function en(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Ro=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Bo(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function Ho(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Ro.indexOf(r[n]),n++;return e}function zr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Ho(r[0].trim())]}function Uo(r,e,n,t,l,o,i){var u=zr(r.getAttribute("r")),s=co(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:Do(a,f,{getInlineStringValue:function(){return $o(e,r)},getInlineStringXml:function(){return Ur(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function Go(r,e,n,t,l,o){var i=uo(r);return i.length===0?[]:i.map(function(u){return Uo(u,r,e,n,t,l,o)})}function zo(r,e){return Xo(r)||Vo(r,e)||Wo(r,e)||qo()}function qo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wo(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Vo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Xo(r){if(Array.isArray(r))return r}function Ko(r){var e=po(r);if(e)return e=e.split(":").map(zr).map(function(n){var t=zo(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Zo(r,e,n,t,l,o){var i=e.createDocument(r),u=Go(i,e,n,t,l,o),s=Ko(i)||Bo(u);return{cells:u,dimensions:s}}function Jo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Yo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yo(r,e){if(r){if(typeof r=="string")return Nn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(r,e)}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Qo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=Jo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function xo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=es(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function es(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ts(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=xo(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function ns(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=qr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rs(r,e){return ss(r)||os(r,e)||qr(r,e)||ls()}function ls(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qr(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function os(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ss(r){if(Array.isArray(r))return r}function is(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=rs(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=ns(t),d;!(d=c()).done;){var g=d.value,y=g.row-1,S=g.column-1;S<i&&y<u&&(s[y][S]=g.value)}var T=e.rowMap;if(T)for(var O=0;O<s.length;)T[O]=O,O++;return s=Qo(ts(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(s=e.transformData(s)),s}function as(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=fs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fs(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Rn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function us(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(t){cs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function cs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function $s(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=us({sheet:1},n));var t=function(d){if(!r[d])throw new Error('"'.concat(d,'" file not found inside the *.xlsx file zip archive'));return r[d]},l=yo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Co(t(l.sharedStrings),e):[],i=l.styles?Oo(t(l.styles),e):{},u=ko(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var d=c.name;return{name:d}});var s=ps(n.sheet,u.sheets);if(!s||!l.sheets[s])throw ms(n.sheet,u.sheets);var a=Zo(t(l.sheets[s]),e,o,i,u,n),f=is(a,n);return n.properties?{data:f,properties:u}:f}function ps(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=as(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function ms(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function ln(r){"@babel/helpers - typeof";return ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(r)}function Bn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function _s(r,e,n){return e&&Bn(r.prototype,e),n&&Bn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function gs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ds(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&At(r,e)}function hs(r){var e=Wr();return function(){var t=Lt(r),l;if(e){var o=Lt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return bs(this,l)}}function bs(r,e){if(e&&(ln(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vs(r)}function vs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function on(r){var e=typeof Map=="function"?new Map:void 0;return on=function(t){if(t===null||!ws(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Ht(t,arguments,Lt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),At(l,t)},on(r)}function Ht(r,e,n){return Wr()?Ht=Reflect.construct:Ht=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&At(a,i.prototype),a},Ht.apply(null,arguments)}function Wr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ws(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function At(r,e){return At=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},At(r,e)}function Lt(r){return Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Lt(r)}var Oe=function(r){ds(n,r);var e=hs(n);function n(t){var l;return gs(this,n),l=e.call(this,"invalid"),l.reason=t,l}return _s(n)}(on(Error));function ks(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Oe("not_a_number")}if(typeof r!="number")throw new Oe("not_a_number");if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return r}function ys(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return String(r)}throw new Oe("not_a_string")}function Ss(r){if(typeof r=="boolean")return r;throw new Oe("not_a_boolean")}function Os(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Oe("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");var t=Gr(r,n);if(isNaN(t.valueOf()))throw new Oe("out_of_bounds");return t}throw new Oe("not_a_date")}function Ts(r,e){return Ls(r)||As(r,e)||Vr(r,e)||Cs()}function Cs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function As(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ls(r){if(Array.isArray(r))return r}function sn(r){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(r)}function Is(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Vr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vr(r,e){if(r){if(typeof r=="string")return Hn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hn(r,e)}}function Hn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Un(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Gn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Un(Object(n),!0).forEach(function(t){Ps(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ps(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var zn={isColumnOriented:!1};function Ms(r,e,n){n?n=Gn(Gn({},zn),n):n=zn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;Ds(e),l&&(r=Fs(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Xr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var d=Is(a),g;!(g=d()).done;){var y=g.value;y.row=o[y.row-1]+1}return{rows:s,errors:a}}function Xr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var d=f[a],g=r[d],y=sn(g.type)==="object"&&!Array.isArray(g.type),S=e[t.indexOf(d)];S===void 0&&(S=null);var T=void 0,O=void 0,E=void 0;if(y)T=Xr(g.type,e,n,t,l,o);else if(S===null)T=null;else if(Array.isArray(g.type)){var D=!1,F=Ns(S).map(function(N){var M=qn(N,g,o);return M.error&&(T=N,O=M.error,E=M.reason),M.value!==null&&(D=!0),M.value});O||(T=D?F:null)}else{var I=qn(S,g,o);O=I.error,E=I.reason,T=O?S:I.value}!O&&T===null&&g.required&&(O="required"),O?(O={error:O,row:n+1,column:d,value:T},E&&(O.reason=E),g.type&&(O.type=g.type),l.push(O)):(u&&T!==null&&(u=!1),(T!==null||o.includeNullValues)&&(i[g.prop]=T))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function qn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=ft(r,e.parse):e.type?t=Es(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function ft(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Es(r,e,n){switch(e){case String:return ft(r,ys);case Number:return ft(r,ks);case Date:return ft(r,function(t){return Os(t,{properties:n.properties})});case Boolean:return ft(r,Ss);default:if(typeof e=="function")return ft(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Kr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Kr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function Ns(r){for(var e=[],n=0;n<r.length;){var t=Kr(r,",",n),l=Ts(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var Fs=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Ds(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function an(r){"@babel/helpers - typeof";return an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(r)}function Zr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;an(o)==="object"&&(o=Object.keys(r[l])[0],i=Zr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var js=["schema","map"];function Wn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Bt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wn(Object(n),!0).forEach(function(t){Rs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Rs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Bs(r,e){if(r==null)return{};var n=Hs(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Hs(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Us(r,e,n){var t=n.schema,l=n.map,o=Bs(n,js);!t&&l&&(t=Zr(l));var i=$s(r,e,Bt(Bt({},o),{},{properties:t||o.properties}));return t?Ms(i.data,t,Bt(Bt({},o),{},{properties:i.properties})):i}function Gs(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return so(r).then(function(n){return Us(n,Gl,e)})}function zs(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>qs(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(l.browse.num_features=l.browse.num_features!==void 0?l.browse.num_features+1:1,t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function qs(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Ws(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Gs(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=el(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function Jr(r){return Gt(["get","intervention_type"],{area:Ze.area,route:Ze.route,crossing:Ze.crossing,other:Ze.other},"white")}function Vn(r){return[["Areas",Ze.area],["Routes",Ze.route],["Crossings",Ze.crossing],["Other",Ze.other]]}const te={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},Je=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20],vt=Xt({type:"FeatureCollection",features:[],schemes:{}}),It=Xt(new Map),Xn=Xt(!0),Ut=Xt("");function Vs(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Ct({props:u}),K.push(()=>J(e,"value",i)),e.$on("change",r[2]),l=new Cl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],Y(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function Kn(r,e){let n=[],t={},l=0;for(let o of r){let i=e[l++%e.length];t[o]=i,n.push([o,i])}return[t,n]}function Xs(r,e,n){let t,l;me(r,It,c=>n(4,t=c)),me(r,cn,c=>n(5,l=c));let o="interventionType",i=Vn();function u(){let c;o=="interventionType"?(c=Jr(),n(1,i=Vn())):o=="fundingProgramme"?c=s():o=="currentMilestone"&&(c=a()),l.setPaintProperty("interventions-points","circle-color",c),l.setPaintProperty("interventions-lines","line-color",c),l.setPaintProperty("interventions-polygons","fill-color",c),l.setPaintProperty("interventions-polygons-outlines","line-color",c)}function s(){var T;let c=new Set;for(let O of t.values())(T=O.browse)!=null&&T.funding_programme&&c.add(O.browse.funding_programme);let d=Array.from(c);d.sort();let[g,y]=Kn(d,te.funding_programmes),S=Gt(["get","funding_programme"],g,"grey");return n(1,i=y),S}function a(){let c=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[d,g]=Kn(c,te.current_milestone),y=Gt(["get","current_milestone"],d,"grey");return n(1,i=g),y}function f(c){o=c,n(0,o)}return[o,i,u,f]}class Ks extends q{constructor(e){super(),W(this,e,Xs,Vs,G,{})}}function Zs(r){let e;return{c(){e=w("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Js(r){let e,n,t,l,o,i;return t=new tn({props:{$$slots:{default:[Zs]},$$scope:{ctx:r}}}),t.$on("click",r[11]),{c(){e=L("input"),n=C(),h(t.$$.fragment),z(e,"type","text"),z(e,"class","govuk-input govuk-input--width-10"),z(e,"id","filterText")},m(u,s){$(u,e,s),zt(e,r[4]),$(u,n,s),b(t,u,s),l=!0,o||(i=St(e,"input",r[10]),o=!0)},p(u,s){s&16&&e.value!==u[4]&&zt(e,u[4]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){_(t.$$.fragment,u),l=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,i()}}}function Ys(r){let e,n,t,l,o,i,u,s,a,f;function c(S){r[8](S)}let d={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(d.value=r[2]),e=new Ct({props:d}),K.push(()=>J(e,"value",c));function g(S){r[9](S)}let y={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(y.value=r[3]),l=new Ct({props:y}),K.push(()=>J(l,"value",g)),u=new Ir({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Js]},$$scope:{ctx:r}}}),a=new Ks({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(S,T){b(e,S,T),$(S,t,T),b(l,S,T),$(S,i,T),b(u,S,T),$(S,s,T),b(a,S,T),f=!0},p(S,T){const O={};T&32&&(O.choices=S[5]),!n&&T&4&&(n=!0,O.value=S[2],Y(()=>n=!1)),e.$set(O);const E={};T&64&&(E.choices=S[6]),!o&&T&8&&(o=!0,E.value=S[3],Y(()=>o=!1)),l.$set(E);const D={};T&65552&&(D.$$scope={dirty:T,ctx:S}),u.$set(D)},i(S){f||(m(e.$$.fragment,S),m(l.$$.fragment,S),m(u.$$.fragment,S),m(a.$$.fragment,S),f=!0)},o(S){_(e.$$.fragment,S),_(l.$$.fragment,S),_(u.$$.fragment,S),_(a.$$.fragment,S),f=!1},d(S){S&&(p(t),p(i),p(s)),v(e,S),v(l,S),v(u,S),v(a,S)}}}function Qs(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",d,g,y=r[7].other.toLocaleString()+"",S,T,O=Zn(r[7].totalLength).toFixed(1)+"",E,D;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),d=w(c),g=w(" crossings, "),S=w(y),T=w(`
    other, with total LineString length of `),E=w(O),D=w(" miles)")},m(F,I){$(F,e,I),$(F,t,I),$(F,l,I),$(F,i,I),$(F,u,I),$(F,a,I),$(F,f,I),$(F,d,I),$(F,g,I),$(F,S,I),$(F,T,I),$(F,E,I),$(F,D,I)},p(F,I){I&1&&n!==(n=F[0].size.toLocaleString()+"")&&B(t,n),I&128&&o!==(o=F[7].route.toLocaleString()+"")&&B(i,o),I&128&&s!==(s=F[7].area.toLocaleString()+"")&&B(a,s),I&128&&c!==(c=F[7].crossing.toLocaleString()+"")&&B(d,c),I&128&&y!==(y=F[7].other.toLocaleString()+"")&&B(S,y),I&128&&O!==(O=Zn(F[7].totalLength).toFixed(1)+"")&&B(E,O)},d(F){F&&(p(e),p(t),p(l),p(i),p(u),p(a),p(f),p(d),p(g),p(S),p(T),p(E),p(D))}}}function xs(r){let e,n,t;function l(i){r[12](i)}let o={id:"show-schemes",$$slots:{default:[Qs]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ie({props:o}),K.push(()=>J(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65665&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],Y(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function ei(r){let e,n,t,l;return e=new Me({props:{label:"Filters",$$slots:{default:[Ys]},$$scope:{ctx:r}}}),t=new rt({props:{small:!0,$$slots:{default:[xs]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65660&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65667&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Zn(r){return r*621371e-9}function ti(r,e,n){let t,l,o;me(r,Ut,D=>n(4,t=D)),me(r,vt,D=>n(13,l=D)),me(r,It,D=>n(14,o=D));let{schemesToBeShown:i=new Set}=e,{show:u=!0}=e,s=[],a="",f=[],c="",d={area:0,route:0,crossing:0,other:0,totalLength:0};$n(()=>{var I,N;let D=new Set,F=new Set;for(let M of o.values())(I=M.browse)!=null&&I.authority_or_region&&D.add(M.browse.authority_or_region),(N=M.browse)!=null&&N.funding_programme&&F.add(M.browse.funding_programme);n(5,s=Array.from(D.entries())),s.sort(),n(6,f=Array.from(F.entries())),f.sort()});function g(D,F,I){let N=D.toLowerCase(),M=P=>{var H,V,j,U;if(N&&!((H=P.properties.name)!=null&&H.toLowerCase().includes(N))&&!((V=P.properties.description)!=null&&V.toLowerCase().includes(N)))return!1;if(F||I){let $e=o.get(P.properties.scheme_reference);if(F&&((j=$e.browse)==null?void 0:j.authority_or_region)!=F||I&&((U=$e.browse)==null?void 0:U.funding_programme)!=I)return!1}return!0};n(0,i=new Set(l.features.filter(M).map(P=>P.properties.scheme_reference))),n(7,d={area:0,route:0,crossing:0,other:0,totalLength:0});let A=P=>{var H,V;return!(!i.has(P.properties.scheme_reference)||N&&!((H=P.properties.name)!=null&&H.toLowerCase().includes(N))&&!((V=P.properties.description)!=null&&V.toLowerCase().includes(N)))};for(let P of l.features)A(P)?(delete P.properties.hide_while_editing,n(7,d[P.properties.intervention_type]++,d),P.geometry.type=="LineString"&&P.properties.length_meters&&n(7,d.totalLength+=P.properties.length_meters,d)):P.properties.hide_while_editing=!0;vt.set(l),n(7,d)}function y(D){a=D,n(2,a)}function S(D){c=D,n(3,c)}function T(){t=this.value,Ut.set(t)}const O=()=>Tt(Ut,t="",t);function E(D){u=D,n(1,u)}return r.$$set=D=>{"schemesToBeShown"in D&&n(0,i=D.schemesToBeShown),"show"in D&&n(1,u=D.show)},r.$$.update=()=>{r.$$.dirty&28&&g(t,a,c)},[i,u,a,c,t,s,f,d,y,S,T,O,E]}class ni extends q{constructor(e){super(),W(this,e,ti,ei,G,{schemesToBeShown:0,show:1})}}function ri(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function li(r){let e,n,t,l,o;return t=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ri]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,u){$(i,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(m(t.$$.fragment,i),o=!0)},o(i){_(t.$$.fragment,i),o=!1},d(i){i&&p(e),v(t)}}}class We extends q{constructor(e){super(),W(this,e,null,li,G,{})}}function Jn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Yn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Qn(r){let e,n;return{c(){e=L("span"),n=w(` 
    `),Te(e,"background",r[5]),Te(e,"width","100%"),Te(e,"border","1px solid black")},m(t,l){$(t,e,l),k(e,n)},p(t,l){l&1&&Te(e,"background",t[5])},d(t){t&&p(e)}}}function xn(r){let e,n=r[2]+"",t;return{c(){e=L("span"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&B(t,n)},d(l){l&&p(e)}}}function oi(r){let e,n,t,l=ze(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Qn(Yn(r,l,s));let i=ze(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=xn(Jn(r,i,s));return{c(){e=L("div");for(let s=0;s<o.length;s+=1)o[s].c();n=C(),t=L("div");for(let s=0;s<u.length;s+=1)u[s].c();Te(e,"display","flex"),Te(t,"display","flex"),Te(t,"justify-content","space-between")},m(s,a){$(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(s,n,a),$(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=ze(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Yn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Qn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=ze(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Jn(s,i,f);u[f]?u[f].p(c,a):(u[f]=xn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:ee,o:ee,d(s){s&&(p(e),p(n),p(t)),Ot(o,s),Ot(u,s)}}}function si(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Qe extends q{constructor(e){super(),W(this,e,si,oi,G,{colorScale:0,limits:1})}}function er(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function ii(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ai(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ui(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ci(r){let e,n,t,l,o,i,u,s,a,f,c,d;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ai]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[fi]},$$scope:{ctx:r}}}),f=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ui]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),s=L("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(g,y){$(g,e,y),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(g,u,y),$(g,s,y),k(s,a),b(f,s,null),k(s,c),d=!0},p(g,y){const S={};y&65536&&(S.$$scope={dirty:y,ctx:g}),t.$set(S);const T={};y&65536&&(T.$$scope={dirty:y,ctx:g}),o.$set(T);const O={};y&65536&&(O.$$scope={dirty:y,ctx:g}),f.$set(O)},i(g){d||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),d=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),d=!1},d(g){g&&(p(e),p(u),p(s)),v(t),v(o),v(f)}}}function $i(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function tr(r){let e,n;return e=new Qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pi(r){let e;return{c(){e=w("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _i(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gi(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function di(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y;return o=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[mi]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[_i]},$$scope:{ctx:r}}}),d=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[gi]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=C(),t=L("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=C(),f=L("p"),c=w("License: "),h(d.$$.fragment),g=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(S,T){$(S,e,T),$(S,n,T),$(S,t,T),k(t,l),b(o,t,null),k(t,i),b(u,t,null),k(t,s),$(S,a,T),$(S,f,T),k(f,c),b(d,f,null),k(f,g),y=!0},p(S,T){const O={};T&65536&&(O.$$scope={dirty:T,ctx:S}),o.$set(O);const E={};T&65536&&(E.$$scope={dirty:T,ctx:S}),u.$set(E);const D={};T&65536&&(D.$$scope={dirty:T,ctx:S}),d.$set(D)},i(S){y||(m(o.$$.fragment,S),m(u.$$.fragment,S),m(d.$$.fragment,S),y=!0)},o(S){_(o.$$.fragment,S),_(u.$$.fragment,S),_(d.$$.fragment,S),y=!1},d(S){S&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(d)}}}function hi(r){let e,n,t;return n=new ae({props:{$$slots:{default:[di]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function nr(r){let e,n;return e=new Qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bi(r){let e;return{c(){e=w("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vi(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ki(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[vi]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[wi]},$$scope:{ctx:r}}}),s=new We({}),{c(){e=L("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function yi(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ki]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function rr(r){let e,n,t,l;return t=new Qe({props:{colorScale:r[4],limits:r[6]().map(Pi)}}),{c(){e=L("p"),e.textContent="(people per square kilometres)",n=C(),h(t.$$.fragment)},m(o,i){$(o,e,i),$(o,n,i),b(t,o,i),l=!0},p:ee,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Si(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=L("p"),n=w("There are "),t=L("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){$(a,e,f),k(e,n),k(e,t),k(t,o),k(e,i),k(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&B(o,l),f&8192&&u!==(u=a[14]+"")&&B(s,u)},d(a){a&&p(e)}}}function Oi(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=L("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=L("b"),s=w(u),a=w(`
          cars`)},m(f,c){$(f,e,c),k(e,n),k(e,l),k(e,o),k(e,i),k(i,s),k(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(l,t),c&8200&&u!==(u=f[15]+"")&&B(s,u)},d(f){f&&p(e)}}}function Ti(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=L("p"),n=L("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){$(f,e,c),k(e,n),k(n,l),k(n,o),k(e,i),k(e,s),k(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(l,t),c&8192&&u!==(u=f[14]+"")&&B(s,u)},d(f){f&&p(e)}}}function Ci(r){er(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?Ti:o[3]=="average_cars_per_household"?Oi:Si}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){er(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Ai(r){let e,n;return e=new oe({props:{$$slots:{default:[Ci,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Li(r){let e,n,t,l;const o=[R(Ke),{sourceLayer:Ke},{paint:{"fill-color":we(["get",r[3]],r[6](),r[4]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ai]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ye({props:i}),e.$on("click",r[5]);const u=[R(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?x(o,[f&0&&ne(R(Ke)),f&0&&{sourceLayer:Ke},f&88&&{paint:{"fill-color":we(["get",a[3]],a[6](),a[4]),"fill-opacity":Z(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&8?x(u,[f&0&&ne(R(`${Ke}-outline`)),f&0&&{sourceLayer:Ke},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ii(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y;function S(A){r[7](A)}let T={id:"percent_households_with_car",$$slots:{right:[$i],default:[ii]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new ie({props:T}),K.push(()=>J(e,"checked",S)),e.$on("change",r[8]);let O=r[3]=="percent_households_with_car"&&tr(r);function E(A){r[9](A)}let D={id:"average_cars_per_household",$$slots:{right:[hi],default:[pi]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),o=new ie({props:D}),K.push(()=>J(o,"checked",E)),o.$on("change",r[10]);let F=r[3]=="average_cars_per_household"&&nr(r);function I(A){r[11](A)}let N={id:"population_density",$$slots:{right:[yi],default:[bi]},$$scope:{ctx:r}};r[2]!==void 0&&(N.checked=r[2]),a=new ie({props:N}),K.push(()=>J(a,"checked",I)),a.$on("change",r[12]);let M=r[3]=="population_density"&&rr(r);return g=new be({props:{url:`pmtiles://${ge()}/v1/${Ke}.pmtiles`,$$slots:{default:[Li]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),O&&O.c(),l=C(),h(o.$$.fragment),u=C(),F&&F.c(),s=C(),h(a.$$.fragment),c=C(),M&&M.c(),d=C(),h(g.$$.fragment)},m(A,P){b(e,A,P),$(A,t,P),O&&O.m(A,P),$(A,l,P),b(o,A,P),$(A,u,P),F&&F.m(A,P),$(A,s,P),b(a,A,P),$(A,c,P),M&&M.m(A,P),$(A,d,P),b(g,A,P),y=!0},p(A,[P]){const H={};P&65536&&(H.$$scope={dirty:P,ctx:A}),!n&&P&1&&(n=!0,H.checked=A[0],Y(()=>n=!1)),e.$set(H),A[3]=="percent_households_with_car"?O?(O.p(A,P),P&8&&m(O,1)):(O=tr(A),O.c(),m(O,1),O.m(l.parentNode,l)):O&&(ue(),_(O,1,1,()=>{O=null}),ce());const V={};P&65536&&(V.$$scope={dirty:P,ctx:A}),!i&&P&2&&(i=!0,V.checked=A[1],Y(()=>i=!1)),o.$set(V),A[3]=="average_cars_per_household"?F?(F.p(A,P),P&8&&m(F,1)):(F=nr(A),F.c(),m(F,1),F.m(s.parentNode,s)):F&&(ue(),_(F,1,1,()=>{F=null}),ce());const j={};P&65536&&(j.$$scope={dirty:P,ctx:A}),!f&&P&4&&(f=!0,j.checked=A[2],Y(()=>f=!1)),a.$set(j),A[3]=="population_density"?M?(M.p(A,P),P&8&&m(M,1)):(M=rr(A),M.c(),m(M,1),M.m(d.parentNode,d)):M&&(ue(),_(M,1,1,()=>{M=null}),ce());const U={};P&65544&&(U.$$scope={dirty:P,ctx:A}),g.$set(U)},i(A){y||(m(e.$$.fragment,A),m(O),m(o.$$.fragment,A),m(F),m(a.$$.fragment,A),m(M),m(g.$$.fragment,A),y=!0)},o(A){_(e.$$.fragment,A),_(O),_(o.$$.fragment,A),_(F),_(a.$$.fragment,A),_(M),_(g.$$.fragment,A),y=!1},d(A){A&&(p(t),p(l),p(u),p(s),p(c),p(d)),v(e,A),O&&O.d(A),v(o,A),F&&F.d(A),v(a,A),M&&M.d(A),v(g,A)}}}let Ke="census_output_areas";const Pi=r=>r.toLocaleString();function Mi(r,e,n){let t=te.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(T){let O=T.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${O}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${O}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function d(T){o=T,n(1,o)}const g=()=>{n(0,l=!1),n(2,i=!1)};function y(T){i=T,n(2,i)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,d,g,y,S]}class Ei extends q{constructor(e){super(),W(this,e,Mi,Ii,G,{})}}function Ni(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Fi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Di(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Fi]},$$scope:{ctx:r}}}),i=new We({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function ji(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Di]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ri(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Bi(r){let e,n;return e=new oe({props:{$$slots:{default:[Ri,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hi(r){let e,n,t,l;const o=[R(ut),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Bi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ye({props:i}),e.$on("click",Gi);const u=[R(`${ut}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&ne(R(ut)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?x(u,[f&0&&ne(R(`${ut}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ui(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ut,$$slots:{right:[ji],default:[Ni]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>J(e,"checked",i)),l=new Ft({props:{data:`${ge()}/v1/${ut}.geojson`,$$slots:{default:[Hi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Y(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ut="combined_authorities";function Gi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function zi(r,e,n){let t=te.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class qi extends q{constructor(e){super(),W(this,e,zi,Ui,G,{})}}function Wi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xi(r){let e;return{c(){e=w(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ki(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Vi]},$$scope:{ctx:r}}}),o=new X({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Xi]},$$scope:{ctx:r}}}),s=new We({}),{c(){e=L("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Zi(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ki]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function lr(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ji(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,d=r[4].rank.toLocaleString()+"",g,y;return{c(){e=L("p"),t=w(n),l=w(` has an IMD score of
        `),o=L("b"),u=w(i),s=C(),a=L("p"),f=w("Rank: "),c=L("b"),g=w(d),y=w(`
        / 32,844 LSOAs`)},m(S,T){$(S,e,T),k(e,t),k(e,l),k(e,o),k(o,u),$(S,s,T),$(S,a,T),k(a,f),k(a,c),k(c,g),k(a,y)},p(S,T){T&16&&n!==(n=S[4].LSOA11CD+"")&&B(t,n),T&16&&i!==(i=S[4].score+"")&&B(u,i),T&16&&d!==(d=S[4].rank.toLocaleString()+"")&&B(g,d)},d(S){S&&(p(e),p(s),p(a))}}}function Yi(r){let e,n;return e=new oe({props:{$$slots:{default:[Ji,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qi(r){let e,n,t,l;const o=[R(je),{sourceLayer:je},{paint:{"fill-color":we(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Yi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ye({props:i});const u=[R(`${je}-outline`),{sourceLayer:je},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?x(o,[f&0&&ne(R(je)),f&0&&{sourceLayer:je},f&6&&{paint:{"fill-color":we(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Z(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&1?x(u,[f&0&&ne(R(`${je}-outline`)),f&0&&{sourceLayer:je},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function xi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:je,$$slots:{right:[Zi],default:[Wi]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),K.push(()=>J(e,"checked",u));let a=r[0]&&lr(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${je}.pmtiles`,$$slots:{default:[Qi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],Y(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=lr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ue(),_(a,1,1,()=>{a=null}),ce());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let je="imd";function ea(r,e,n){let t=te.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class ta extends q{constructor(e){super(),W(this,e,ea,xi,G,{})}}function na(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ra(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function la(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[ra]},$$scope:{ctx:r}}}),i=new We({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function oa(r){let e,n,t;return n=new ae({props:{$$slots:{default:[la]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function sa(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function ia(r){let e,n;return e=new oe({props:{$$slots:{default:[sa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function aa(r){let e,n,t,l;const o=[R(ct),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ia]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ye({props:i}),e.$on("click",ua);const u=[R(`${ct}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&ne(R(ct)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?x(u,[f&0&&ne(R(`${ct}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function fa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ct,$$slots:{right:[oa],default:[na]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>J(e,"checked",i)),l=new Ft({props:{data:`${ge()}/v1/${ct}.geojson`,$$slots:{default:[aa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Y(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ct="local_authority_districts";function ua(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function ca(r,e,n){let t=te.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class $a extends q{constructor(e){super(),W(this,e,ca,fa,G,{})}}function pa(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ma(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _a(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ga(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function da(r){let e;return{c(){e=w("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ha(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ba(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y,S,T,O,E,D,F,I,N;return t=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ma]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[_a]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ga]},$$scope:{ctx:r}}}),g=new X({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[da]},$$scope:{ctx:r}}}),E=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ha]},$$scope:{ctx:r}}}),I=new We({}),{c(){e=L("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=C(),f=L("p"),c=L("strong"),d=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(g.$$.fragment),y=w(" to get more details."),S=C(),T=L("p"),O=w("Data from ONS Geography via "),h(E.$$.fragment),D=w(", as of November 2022."),F=C(),h(I.$$.fragment)},m(M,A){$(M,e,A),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),b(u,e,null),k(e,s),$(M,a,A),$(M,f,A),k(f,c),k(c,d),b(g,c,null),k(c,y),$(M,S,A),$(M,T,A),k(T,O),b(E,T,null),k(T,D),$(M,F,A),b(I,M,A),N=!0},p(M,A){const P={};A&16&&(P.$$scope={dirty:A,ctx:M}),t.$set(P);const H={};A&16&&(H.$$scope={dirty:A,ctx:M}),o.$set(H);const V={};A&16&&(V.$$scope={dirty:A,ctx:M}),u.$set(V);const j={};A&16&&(j.$$scope={dirty:A,ctx:M}),g.$set(j);const U={};A&16&&(U.$$scope={dirty:A,ctx:M}),E.$set(U)},i(M){N||(m(t.$$.fragment,M),m(o.$$.fragment,M),m(u.$$.fragment,M),m(g.$$.fragment,M),m(E.$$.fragment,M),m(I.$$.fragment,M),N=!0)},o(M){_(t.$$.fragment,M),_(o.$$.fragment,M),_(u.$$.fragment,M),_(g.$$.fragment,M),_(E.$$.fragment,M),_(I.$$.fragment,M),N=!1},d(M){M&&(p(e),p(a),p(f),p(S),p(T),p(F)),v(t),v(o),v(u),v(g),v(E),v(I,M)}}}function va(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ba]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function wa(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function ka(r){let e,n;return e=new oe({props:{$$slots:{default:[wa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ya(r){let e,n,t,l;const o=[R(Re),{sourceLayer:Re},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[ka]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ye({props:i});const u=[R(`${Re}-outline`),{sourceLayer:Re},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&ne(R(Re)),f&0&&{sourceLayer:Re},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?x(u,[f&0&&ne(R(`${Re}-outline`)),f&0&&{sourceLayer:Re},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Sa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Re,$$slots:{right:[va],default:[pa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>J(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${Re}.pmtiles`,$$slots:{default:[ya]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Y(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Re="local_planning_authorities";function Oa(r,e,n){let t=te.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ta extends q{constructor(e){super(),W(this,e,Oa,Sa,G,{})}}function Ca(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Aa(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function La(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Aa]},$$scope:{ctx:r}}}),i=new We({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ia(r){let e,n,t;return n=new ae({props:{$$slots:{default:[La]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Pa(r){let e,n=r[3].Name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&B(t,n)},d(l){l&&p(e)}}}function Ma(r){let e,n;return e=new oe({props:{$$slots:{default:[Pa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ea(r){let e,n,t,l;const o=[R(Be),{sourceLayer:Be},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ma]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ye({props:i}),e.$on("click",Fa);const u=[R(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&ne(R(Be)),f&0&&{sourceLayer:Be},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?x(u,[f&0&&ne(R(`${Be}-outline`)),f&0&&{sourceLayer:Be},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Na(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Be,$$slots:{right:[Ia],default:[Ca]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>J(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${Be}.pmtiles`,$$slots:{default:[Ea]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Y(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Be="parliamentary_constituencies";function Fa(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Da(r,e,n){let t=te.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ja extends q{constructor(e){super(),W(this,e,Da,Na,G,{})}}function Ra(r){let e;return{c(){e=w("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ba(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ha(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ua(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ga(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y,S,T;return t=new X({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ba]},$$scope:{ctx:r}}}),f=new X({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Ha]},$$scope:{ctx:r}}}),d=new X({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Ua]},$$scope:{ctx:r}}}),S=new We({}),{c(){e=L("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        µgm
        `),o=L("sup"),o.textContent="3",i=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=C(),s=L("p"),a=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(d.$$.fragment),g=w("."),y=C(),h(S.$$.fragment)},m(O,E){$(O,e,E),k(e,n),b(t,e,null),k(e,l),k(e,o),k(e,i),$(O,u,E),$(O,s,E),k(s,a),b(f,s,null),k(s,c),b(d,s,null),k(s,g),$(O,y,E),b(S,O,E),T=!0},p(O,E){const D={};E&2048&&(D.$$scope={dirty:E,ctx:O}),t.$set(D);const F={};E&2048&&(F.$$scope={dirty:E,ctx:O}),f.$set(F);const I={};E&2048&&(I.$$scope={dirty:E,ctx:O}),d.$set(I)},i(O){T||(m(t.$$.fragment,O),m(f.$$.fragment,O),m(d.$$.fragment,O),m(S.$$.fragment,O),T=!0)},o(O){_(t.$$.fragment,O),_(f.$$.fragment,O),_(d.$$.fragment,O),_(S.$$.fragment,O),T=!1},d(O){O&&(p(e),p(u),p(s),p(y)),v(t),v(f),v(d),v(S,O)}}}function za(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ga]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function or(r){let e,n,t,l,o=r[3](r[0])+"",i,u,s,a,f,c,d,g,y,S,T,O,E;function D(A){r[7](A)}let F={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(F.value=r[0]),e=new Ct({props:F}),K.push(()=>J(e,"value",D));const I=[Wa,qa],N=[];function M(A,P){return A[0]=="Noise"?0:1}return g=M(r),y=N[g]=I[g](r),{c(){h(e.$$.fragment),t=C(),l=L("p"),i=w(o),u=C(),s=L("div"),a=L("label"),f=w(`Opacity
      `),c=L("input"),d=C(),y.c(),S=Ae(),z(c,"type","range"),z(c,"min","0"),z(c,"max","100")},m(A,P){b(e,A,P),$(A,t,P),$(A,l,P),k(l,i),$(A,u,P),$(A,s,P),k(s,a),k(a,f),k(a,c),zt(c,r[2]),$(A,d,P),N[g].m(A,P),$(A,S,P),T=!0,O||(E=[St(c,"change",r[8]),St(c,"input",r[8])],O=!0)},p(A,P){const H={};!n&&P&1&&(n=!0,H.value=A[0],Y(()=>n=!1)),e.$set(H),(!T||P&1)&&o!==(o=A[3](A[0])+"")&&B(i,o),P&4&&zt(c,A[2]);let V=g;g=M(A),g===V?N[g].p(A,P):(ue(),_(N[V],1,1,()=>{N[V]=null}),ce(),y=N[g],y?y.p(A,P):(y=N[g]=I[g](A),y.c()),m(y,1),y.m(S.parentNode,S))},i(A){T||(m(e.$$.fragment,A),m(y),T=!0)},o(A){_(e.$$.fragment,A),_(y),T=!1},d(A){A&&(p(t),p(l),p(u),p(s),p(d),p(S)),v(e,A),N[g].d(A),O=!1,tl(E)}}}function qa(r){let e,n,t;return{c(){e=L("img"),bn(e.src,n=r[5](r[0]))||z(e,"src",n),z(e,"width",150),z(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!bn(e.src,n=l[5](l[0]))&&z(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&z(e,"alt",t)},i:ee,o:ee,d(l){l&&p(e)}}}function Wa(r){let e,n;return e=new Qe({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Va(r){let e,n;const t=[R("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new ml({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&6?x(t,[t[0],i&4&&{paint:{"raster-opacity":o[2]/100}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Xa(r){let e,n,t,l,o,i;function u(f){r[6](f)}let s={id:"pollution",$$slots:{right:[za],default:[Ra]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new ie({props:s}),K.push(()=>J(e,"checked",u));let a=r[1]&&or(r);return o=new Il({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Va]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],Y(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=or(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ue(),_(a,1,1,()=>{a=null}),ce());const g={};c&1&&(g.tiles=[f[4](f[0])]),c&2054&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}function Ka(r,e,n){let t,l=!1,o=50,i="PM25_viridis";function u(){return i=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${i}/MapServer/WMSServer`}function s(y){return t[1]}function a(y){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${S}`}function f(y){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${S}`}function c(y){l=y,n(1,l)}function d(y){i=y,n(0,i)}function g(){o=nl(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[i])},[i,l,o,s,a,f,c,d,g]}class Za extends q{constructor(e){super(),W(this,e,Ka,Xa,G,{})}}function Ja(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ya(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qa(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ya]},$$scope:{ctx:r}}}),i=new We({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function xa(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Qa]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ef(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function tf(r){let e,n;return e=new oe({props:{$$slots:{default:[ef,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nf(r){let e,n,t,l;const o=[R(He),{sourceLayer:He},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[tf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Q(i,o[a]);e=new Ye({props:i}),e.$on("click",lf);const u=[R(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Q(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?x(o,[f&0&&ne(R(He)),f&0&&{sourceLayer:He},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?x(u,[f&0&&ne(R(`${He}-outline`)),f&0&&{sourceLayer:He},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function rf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:He,$$slots:{right:[xa],default:[Ja]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>J(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${He}.pmtiles`,$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Y(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let He="wards";function lf(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function of(r,e,n){let t=te.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class sf extends q{constructor(e){super(),W(this,e,of,rf,G,{})}}function af(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ff(r){let e,n,t,l;return t=new X({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[af]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){$(o,e,i),k(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&p(e),v(t)}}}class lt extends q{constructor(e){super(),W(this,e,null,ff,G,{})}}function uf(r){let e,n,t;return e=new ke({props:{color:te.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function cf(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(r){let e,n,t,l,o,i,u,s,a;return o=new X({props:{href:"https://gtfs.org",$$slots:{default:[cf]},$$scope:{ctx:r}}}),s=new lt({}),{c(){e=L("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=C(),t=L("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),k(t,l),b(o,t,null),k(t,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&8&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(s,f)}}}function pf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[$f]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function mf(r){let e;return{c(){e=L("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _f(r){let e;return{c(){e=L("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gf(r){let e;function n(o,i){return o[2].has_bus_lane?_f:mf}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function df(r){let e,n;return e=new oe({props:{$$slots:{default:[gf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hf(r){let e,n;const t=[R($t),{sourceLayer:$t},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],te.bus_route_with_lane,te.bus_route_without_lane],"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[df]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?x(t,[i&0&&ne(R($t)),i&0&&{sourceLayer:$t},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function bf(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:$t,$$slots:{right:[pf],default:[uf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>J(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${$t}.pmtiles`,$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Y(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let $t="bus_routes";function vf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class wf extends q{constructor(e){super(),W(this,e,vf,bf,G,{})}}function sr(r){const e=Pf(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function ir(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function kf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yf(r){let e,n,t,l,o,i,u,s;return u=new lt({}),{c(){e=L("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=C(),t=L("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=C(),o=L("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=C(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,l,f),$(a,o,f),$(a,i,f),b(u,a,f),s=!0},p:ee,i(a){s||(m(u.$$.fragment,a),s=!0)},o(a){_(u.$$.fragment,a),s=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(i)),v(u,a)}}}function Sf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[yf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8192&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ar(r){let e,n,t,l;return e=new rt({props:{$$slots:{default:[Tf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),t=L("hr")},m(o,i){b(e,o,i),$(o,n,i),$(o,t,i),l=!0},p(o,i){const u={};i&8194&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function Of(r){let e,n,t=r[9]+"",l,o,i;return e=new ke({props:{color:r[10]}}),{c(){h(e.$$.fragment),n=C(),l=w(t),o=C()},m(u,s){b(e,u,s),$(u,n,s),$(u,l,s),$(u,o,s),i=!0},p:ee,i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),i=!1},d(u){u&&(p(n),p(l),p(o)),v(e,u)}}}function fr(r){let e,n,t;function l(i){r[4](i,r[6])}let o={id:r[6],$$slots:{default:[Of]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new ie({props:o}),K.push(()=>J(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){r=i;const s={};u&8192&&(s.$$scope={dirty:u,ctx:r}),!n&&u&6&&(n=!0,s.checked=r[1][r[6]],Y(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Tf(r){let e,n,t=ze(r[2]),l=[];for(let i=0;i<t.length;i+=1)l[i]=fr(ir(r,t,i));const o=i=>_(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Ae()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);$(i,e,u),n=!0},p(i,u){if(u&6){t=ze(i[2]);let s;for(s=0;s<t.length;s+=1){const a=ir(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=fr(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(ue(),s=t.length;s<l.length;s+=1)o(s);ce()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)_(l[u]);n=!1},d(i){i&&p(e),Ot(l,i)}}}function Cf(r){sr(r);let e,n=r[6]+"",t,l,o,i,u,s=r[7]+"",a,f,c,d,g=r[8]+"",y;return{c(){e=L("h2"),t=w(n),l=C(),o=L("p"),i=w("Direction: "),u=L("b"),a=C(),f=L("p"),c=w("Width: "),d=L("b"),y=w(g)},m(S,T){$(S,e,T),k(e,t),$(S,l,T),$(S,o,T),k(o,i),k(o,u),u.innerHTML=s,$(S,a,T),$(S,f,T),k(f,c),k(f,d),k(d,y)},p(S,T){sr(S),T&32&&n!==(n=S[6]+"")&&B(t,n),T&32&&s!==(s=S[7]+"")&&(u.innerHTML=s),T&32&&g!==(g=S[8]+"")&&B(y,g)},d(S){S&&(p(e),p(l),p(o),p(a),p(f))}}}function Af(r){let e,n;return e=new oe({props:{$$slots:{default:[Cf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lf(r){let e,n;const t=[R(pt),{sourceLayer:pt},{paint:{"line-color":Gt(["get","kind"],{track:te.cycle_paths.track,lane:te.cycle_paths.lane,shared_use_segregated:te.cycle_paths.shared_use_segregated,shared_use_unsegregated:te.cycle_paths.shared_use_unsegregated},"red"),"line-width":Je,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:ur(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Af]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),e.$on("click",Mf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?x(t,[i&0&&ne(R(pt)),i&0&&{sourceLayer:pt},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},i&2&&{filter:ur(o[1])},t[5],t[6],t[7]]):{};i&8192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function If(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:pt,$$slots:{right:[Sf],default:[kf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),K.push(()=>J(e,"checked",u));let a=r[0]&&ar(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${pt}.pmtiles`,$$slots:{default:[Lf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&8192&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],Y(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=ar(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ue(),_(a,1,1,()=>{a=null}),ce());const g={};c&8195&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let pt="cycle_paths";function Pf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Mf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function ur(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function Ef(r,e,n){let t=[["track","Separated tracks",te.cycle_paths.track],["lane","Unprotected lanes",te.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",te.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",te.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function i(s){l=s,n(0,l)}function u(s,a){r.$$.not_equal(o[a],s)&&(o[a]=s,n(1,o))}return[l,o,t,i,u]}class Nf extends q{constructor(e){super(),W(this,e,Ef,If,G,{})}}function Ff(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Df(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jf(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Df]},$$scope:{ctx:r}}}),i=new We({}),{c(){e=L("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Rf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[jf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Bf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&B(t,n)},d(l){l&&p(e)}}}function Hf(r){let e,n;return e=new oe({props:{$$slots:{default:[Bf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uf(r){let e,n;const t=[R(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Hf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?x(t,[i&0&&ne(R(mt)),i&0&&{sourceLayer:mt},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Gf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:mt,$$slots:{right:[Rf],default:[Ff]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>J(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${mt}.pmtiles`,$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Y(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let mt="mrn";function zf(r,e,n){let t=te.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class qf extends q{constructor(e){super(),W(this,e,zf,Gf,G,{})}}function Wf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vf(r){let e;return{c(){e=w("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Kf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new X({props:{href:"https://www.pct.bike",$$slots:{default:[Vf]},$$scope:{ctx:r}}}),a=new X({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Xf]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=C(),t=L("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=C(),o=L("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(d,g){$(d,e,g),$(d,n,g),$(d,t,g),$(d,l,g),$(d,o,g),k(o,i),b(u,o,null),k(o,s),b(a,o,null),k(o,f),c=!0},p(d,g){const y={};g&1024&&(y.$$scope={dirty:g,ctx:d}),u.$set(y);const S={};g&1024&&(S.$$scope={dirty:g,ctx:d}),a.$set(S)},i(d){c||(m(u.$$.fragment,d),m(a.$$.fragment,d),c=!0)},o(d){_(u.$$.fragment,d),_(a.$$.fragment,d),c=!1},d(d){d&&(p(e),p(n),p(t),p(l),p(o)),v(u),v(a)}}}function Zf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Kf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function cr(r){let e,n,t,l,o,i,u,s;e=new Qe({props:{colorScale:r[3],limits:r[4]}});function a(g){r[7](g)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new Pr({props:f}),K.push(()=>J(t,"value",a));function c(g){r[8](g)}let d={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(d.value=r[1]),i=new Ct({props:d}),K.push(()=>J(i,"value",c)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),o=C(),h(i.$$.fragment)},m(g,y){b(e,g,y),$(g,n,y),b(t,g,y),$(g,o,y),b(i,g,y),s=!0},p(g,y){const S={};!l&&y&1&&(l=!0,S.value=g[0],Y(()=>l=!1)),t.$set(S);const T={};!u&&y&2&&(u=!0,T.value=g[1],Y(()=>u=!1)),i.$set(T)},i(g){s||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(i.$$.fragment,g),s=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(i.$$.fragment,g),s=!1},d(g){g&&(p(n),p(o)),v(e,g),v(t,g),v(i,g)}}}function Jf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new pn(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Yf(r){let e,n;return e=new oe({props:{$$slots:{default:[Jf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qf(r){let e,n;const t=[R(Ue),{sourceLayer:Ue},{paint:{"line-color":we(["get",r[1]],r[4],r[3]),"line-width":Je,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ue?"visible":"none"}}];let l={$$slots:{default:[Yf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?x(t,[i&0&&ne(R(Ue)),i&0&&{sourceLayer:Ue},i&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Je,"line-opacity":Z(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ue?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function xf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new pn(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function eu(r){let e,n;return e=new oe({props:{$$slots:{default:[xf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tu(r){let e,n;const t=[R(ot),{sourceLayer:ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",r[1]],r[4],r[3]),"line-width":Je,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==ot?"visible":"none"}}];let l={$$slots:{default:[eu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?x(t,[i&0&&ne(R(ot)),i&0&&{sourceLayer:ot},t[2],t[3],i&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Je,"line-opacity":Z(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==ot?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function nu(r){let e,n,t,l,o,i,u,s;function a(d){r[6](d)}let f={id:Ue,$$slots:{right:[Zf],default:[Wf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new ie({props:f}),K.push(()=>J(e,"checked",a));let c=r[2]&&cr(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${Ue}.pmtiles`,$$slots:{default:[Qf]},$$scope:{ctx:r}}}),u=new be({props:{url:`pmtiles://${ge()}/v1/${ot}.pmtiles`,$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),c&&c.c(),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(d,g){b(e,d,g),$(d,t,g),c&&c.m(d,g),$(d,l,g),b(o,d,g),$(d,i,g),b(u,d,g),s=!0},p(d,[g]){const y={};g&1024&&(y.$$scope={dirty:g,ctx:d}),!n&&g&4&&(n=!0,y.checked=d[2],Y(()=>n=!1)),e.$set(y),d[2]?c?(c.p(d,g),g&4&&m(c,1)):(c=cr(d),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(ue(),_(c,1,1,()=>{c=null}),ce());const S={};g&1031&&(S.$$scope={dirty:g,ctx:d}),o.$set(S);const T={};g&1031&&(T.$$scope={dirty:g,ctx:d}),u.$set(T)},i(d){s||(m(e.$$.fragment,d),m(c),m(o.$$.fragment,d),m(u.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(c),_(o.$$.fragment,d),_(u.$$.fragment,d),s=!1},d(d){d&&(p(t),p(l),p(i)),v(e,d),c&&c.d(d),v(o,d),v(u,d)}}}let Ue="pct_commute",ot="pct_school";function ru(r,e,n){let t=te.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ue,i="baseline",u=!1;function s(d){let g=d.baseline,y=d.gov_target,S=d.go_dutch,T=`<h2>Trip purpose: ${o==Ue?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)T+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let O=(y/g).toFixed(1),E=(S/g).toFixed(1);T+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${O}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${E}x</b> of baseline)</p>`}return T}function a(d){u=d,n(2,u)}function f(d){o=d,n(0,o)}function c(d){i=d,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class lu extends q{constructor(e){super(),W(this,e,ru,nu,G,{})}}function ou(r){let e;return{c(){e=w("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function su(r){let e;return{c(){e=w("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function au(r){let e,n,t,l,o,i,u,s,a,f,c,d;return t=new X({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[su]},$$scope:{ctx:r}}}),f=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[iu]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=C(),i=L("p"),i.textContent="Data valid as of 1 September, 2023",u=C(),s=L("p"),a=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(g,y){$(g,e,y),k(e,n),b(t,e,null),k(e,l),$(g,o,y),$(g,i,y),$(g,u,y),$(g,s,y),k(s,a),b(f,s,null),k(s,c),d=!0},p(g,y){const S={};y&256&&(S.$$scope={dirty:y,ctx:g}),t.$set(S);const T={};y&256&&(T.$$scope={dirty:y,ctx:g}),f.$set(T)},i(g){d||(m(t.$$.fragment,g),m(f.$$.fragment,g),d=!0)},o(g){_(t.$$.fragment,g),_(f.$$.fragment,g),d=!1},d(g){g&&(p(e),p(o),p(i),p(u),p(s)),v(t),v(f)}}}function fu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[au]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function $r(r){let e,n,t,l,o;e=new Qe({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new Pr({props:u}),K.push(()=>J(t,"value",i)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],Y(()=>l=!1)),t.$set(f)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),o=!1},d(s){s&&p(n),v(e,s),v(t,s)}}}function uu(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,d=r[4][r[7].highest_description]+"",g,y;return{c(){e=L("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=C(),u=L("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),g=w(d),y=w(")")},m(S,T){$(S,e,T),k(e,n),k(e,l),k(e,o),$(S,i,T),$(S,u,T),k(u,s),k(u,f),k(u,c),k(u,g),k(u,y)},p(S,T){T&128&&t!==(t=S[7].indicative_mph+"")&&B(l,t),T&128&&a!==(a=S[7].highest_mph+"")&&B(f,a),T&128&&d!==(d=S[4][S[7].highest_description]+"")&&B(g,d)},d(S){S&&(p(e),p(i),p(u))}}}function cu(r){let e,n;return e=new oe({props:{$$slots:{default:[uu,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $u(r){let e,n;const t=[R(_t),{sourceLayer:_t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",r[0]],r[3],r[2]),"line-width":Je,"line-opacity":Z(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[cu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?x(t,[i&0&&ne(R(_t)),i&0&&{sourceLayer:_t},t[2],t[3],i&13&&{paint:{"line-color":we(["get",o[0]],o[3],o[2]),"line-width":Je,"line-opacity":Z(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function pu(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:_t,$$slots:{right:[fu],default:[ou]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new ie({props:s}),K.push(()=>J(e,"checked",u));let a=r[1]&&$r(r);return o=new be({props:{url:`pmtiles://${mn()}/v1/${_t}.pmtiles`,$$slots:{default:[$u]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&256&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],Y(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=$r(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ue(),_(a,1,1,()=>{a=null}),ce());const g={};c&259&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let _t="road_speeds";function mu(r,e,n){let t=te.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class _u extends q{constructor(e){super(),W(this,e,mu,pu,G,{})}}function gu(r){let e;return{c(){e=w("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function du(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hu(r){let e,n,t,l,o,i,u,s,a;return u=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[du]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=C(),t=L("p"),t.textContent="Data valid as of 1 September, 2023",l=C(),o=L("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),k(o,i),b(u,o,null),k(o,s),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),u.$set(d)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),v(u)}}}function bu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[hu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function pr(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vu(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",d,g;return{c(){e=L("p"),n=w("Average width: "),t=L("b"),o=w(l),i=w(`
        meters`),u=C(),s=L("p"),a=w("Minimum width: "),f=L("b"),d=w(c),g=w(`
        meters`)},m(y,S){$(y,e,S),k(e,n),k(e,t),k(t,o),k(e,i),$(y,u,S),$(y,s,S),k(s,a),k(s,f),k(f,d),k(s,g)},p(y,S){S&16&&l!==(l=y[4].average+"")&&B(o,l),S&16&&c!==(c=y[4].minimum+"")&&B(d,c)},d(y){y&&(p(e),p(u),p(s))}}}function wu(r){let e,n;return e=new oe({props:{$$slots:{default:[vu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ku(r){let e,n;const t=[R(gt),{sourceLayer:gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],r[2],r[1]),"line-width":Je,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[wu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?x(t,[i&0&&ne(R(gt)),i&0&&{sourceLayer:gt},t[2],t[3],i&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Je,"line-opacity":Z(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function yu(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:gt,$$slots:{right:[bu],default:[gu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),K.push(()=>J(e,"checked",u));let a=r[0]&&pr(r);return o=new be({props:{url:`pmtiles://${mn()}/v1/${gt}.pmtiles`,$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],Y(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=pr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ue(),_(a,1,1,()=>{a=null}),ce());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let gt="road_widths";function Su(r,e,n){let t=te.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Ou extends q{constructor(e){super(),W(this,e,Su,yu,G,{})}}function Tu(r){let e,n,t;return{c(){e=L("input"),z(e,"class","govuk-file-upload"),z(e,"id","load-criticals"),z(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=St(e,"change",r[5]),n=!0)},p:ee,d(l){l&&p(e),r[7](null),n=!1,t()}}}function mr(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[Au]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cu(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new ke({props:{color:kt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),$(u,n,s),$(u,l,s),$(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&B(l,t)},i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),i=!1},d(u){u&&(p(n),p(l),p(o)),v(e,u)}}}function Au(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[Cu]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ie({props:o}),K.push(()=>J(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],Y(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Lu(r){let e,n,t,l,o,i;e=new Ir({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Tu]},$$scope:{ctx:r}}}),t=new Mr({props:{errorMessage:r[3]}});let u=r[2]>0&&mr(r);return{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),u&&u.c(),o=Ae()},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),u&&u.m(s,a),$(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&m(u,1)):(u=mr(s),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(ue(),_(u,1,1,()=>{u=null}),ce())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(u),i=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(u),i=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),u&&u.d(s)}}}function Iu(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,d,g,y,S=r[10].notes+"",T,O,E,D,F,I,N,M=r[10].id+"",A,P,H,V,j,U=(r[10].inspector??"???")+"",$e,Ne,de,Ve=r[10].submission_time+"",pe,fe,re,xe,Ce,Le=r[10].scheme_reference+"",Fe,le,_e,De=r[10].current_design_stage+"",Xe;return{c(){e=L("div"),n=L("h2"),l=w(t),o=C(),i=L("p"),u=L("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=C(),d=L("p"),g=L("u"),g.textContent="Notes",y=w(`
          : `),T=w(S),O=C(),E=L("hr"),D=C(),F=L("p"),I=w("Critical issue ID: "),N=L("b"),A=w(M),P=C(),H=L("p"),V=w("Submitted by "),j=L("b"),$e=w(U),Ne=w(`
          at
          `),de=L("b"),pe=w(Ve),fe=C(),re=L("p"),xe=w("For scheme "),Ce=L("b"),Fe=w(Le),le=w(`
          in stage
          `),_e=L("b"),Xe=w(De),Te(e,"max-width","30vw")},m(ve,ye){$(ve,e,ye),k(e,n),k(n,l),k(e,o),k(e,i),k(i,u),k(i,s),k(i,f),k(e,c),k(e,d),k(d,g),k(d,y),k(d,T),k(e,O),k(e,E),k(e,D),k(e,F),k(F,I),k(F,N),k(N,A),k(e,P),k(e,H),k(H,V),k(H,j),k(j,$e),k(H,Ne),k(H,de),k(de,pe),k(e,fe),k(e,re),k(re,xe),k(re,Ce),k(Ce,Fe),k(re,le),k(re,_e),k(_e,Xe)},p(ve,ye){ye&1024&&t!==(t=ve[10].critical_type+"")&&B(l,t),ye&1024&&a!==(a=ve[10].location_description+"")&&B(f,a),ye&1024&&S!==(S=ve[10].notes+"")&&B(T,S),ye&1024&&M!==(M=ve[10].id+"")&&B(A,M),ye&1024&&U!==(U=(ve[10].inspector??"???")+"")&&B($e,U),ye&1024&&Ve!==(Ve=ve[10].submission_time+"")&&B(pe,Ve),ye&1024&&Le!==(Le=ve[10].scheme_reference+"")&&B(Fe,Le),ye&1024&&De!==(De=ve[10].current_design_stage+"")&&B(Xe,De)},d(ve){ve&&p(e)}}}function Pu(r){let e,n;return e=new oe({props:{$$slots:{default:[Iu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mu(r){let e,n,t,l,o,i;const u=[R(`${tt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":kt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let g=0;g<u.length;g+=1)s=Q(s,u[g]);e=new nt({props:s}),e.$on("click",r[6]);const a=[R(`${tt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let g=0;g<a.length;g+=1)f=Q(f,a[g]);t=new Nl({props:f});const c=[R(`${tt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":kt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let d={$$slots:{default:[Pu]},$$scope:{ctx:r}};for(let g=0;g<c.length;g+=1)d=Q(d,c[g]);return o=new nt({props:d}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment)},m(g,y){b(e,g,y),$(g,n,y),b(t,g,y),$(g,l,y),b(o,g,y),i=!0},p(g,y){const S=y&2?x(u,[y&0&&ne(R(`${tt}-clusters`)),u[1],y&0&&{paint:{"circle-color":kt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:g[1]?"visible":"none"}},u[4]]):{};e.$set(S);const T=y&2?x(a,[y&0&&ne(R(`${tt}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:g[1]?"visible":"none"}}]):{};t.$set(T);const O=y&2?x(c,[y&0&&ne(R(`${tt}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":kt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:g[1]?"visible":"none"}}]):{};y&2048&&(O.$$scope={dirty:y,ctx:g}),o.$set(O)},i(g){i||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(o.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),i=!1},d(g){g&&(p(n),p(l)),v(e,g),v(t,g),v(o,g)}}}function Eu(r){let e,n,t,l;return e=new Me({props:{label:"Critical Issues",$$slots:{default:[Lu]},$$scope:{ctx:r}}}),t=new Ft({props:{id:tt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let tt="criticals",kt="red";function Nu(r,e,n){let t;me(r,cn,g=>n(9,t=g));let l,o=!0,i=0,u="",s=rl();async function a(g){try{n(4,s=await Ws(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f(g){t.getSource(tt).getClusterExpansionZoom(g.detail.features[0].properties.cluster_id,(y,S)=>{y||t.easeTo({center:g.detail.features[0].geometry.coordinates,zoom:S})})}function c(g){K[g?"unshift":"push"](()=>{l=g,n(0,l)})}function d(g){o=g,n(1,o)}return[l,o,i,u,s,a,f,c,d]}class Fu extends q{constructor(e){super(),W(this,e,Nu,Eu,G,{})}}function Du(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ju(r){let e;return{c(){e=w("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ru(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[ju]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Bu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ru]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Hu(r){let e,n=_r(r[3])+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=_r(l[3])+"")&&B(t,n)},d(l){l&&p(e)}}}function Uu(r){let e,n;return e=new oe({props:{$$slots:{default:[Hu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gu(r){let e,n;const t=[R(dt),{sourceLayer:dt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Uu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new nt({props:l}),e.$on("click",qu),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?x(t,[i&0&&ne(R(dt)),i&0&&{sourceLayer:dt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function zu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:dt,$$slots:{right:[Bu],default:[Du]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>J(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${dt}.pmtiles`,$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Y(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let dt="crossings";function _r(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function qu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Wu(r,e,n){let t=te.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Vu extends q{constructor(e){super(),W(this,e,Wu,zu,G,{})}}function Xu(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ku(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Ku]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=L("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ju(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Zu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Yu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=L("p"),n=w("Capacity: "),t=L("b"),o=w(l)},m(i,u){$(i,e,u),k(e,n),k(e,t),k(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&B(o,l)},d(i){i&&p(e)}}}function Qu(r){let e,n;return e=new oe({props:{$$slots:{default:[Yu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xu(r){let e,n;const t=[R(ht),{sourceLayer:ht},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new nt({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?x(t,[i&0&&ne(R(ht)),i&0&&{sourceLayer:ht},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ec(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ht,$$slots:{right:[Ju],default:[Xu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>J(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${ht}.pmtiles`,$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Y(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ht="cycle_parking";function tc(r,e,n){let t=te.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class nc extends q{constructor(e){super(),W(this,e,tc,ec,G,{})}}function rc(r){let e,n,t,l;return e=new ke({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=C(),t=w(r[2])},m(o,i){b(e,o,i),$(o,n,i),$(o,t,i),l=!0},p(o,i){(!l||i&4)&&B(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function lc(r){let e;const n=r[5].default,t=Pt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Mt(t,n,l,l[7],e?Nt(n,l[7],o,null):Et(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function oc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function sc(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&B(t,n)},d(l){l&&p(e)}}}function ic(r){let e,n;return e=new oe({props:{$$slots:{default:[sc,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ac(r){let e,n;const t=[R(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Z(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[ic]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new Ye({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?x(t,[i&1&&ne(R(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":Z(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function fc(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[oc],default:[rc]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new ie({props:u}),K.push(()=>J(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${r[0]}.pmtiles`,$$slots:{default:[ac]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],Y(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${ge()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function uc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=te[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class gn extends q{constructor(e){super(),W(this,e,uc,fc,G,{name:0,singularNoun:1,pluralNoun:2})}}function cc(r){let e;return{c(){e=w("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $c(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[cc]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function pc(r){let e,n;return e=new gn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class mc extends q{constructor(e){super(),W(this,e,null,pc,G,{})}}function _c(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function gc(r){let e;return{c(){e=w("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function dc(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[gc]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function hc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[dc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function bc(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&B(t,n)},d(l){l&&p(e)}}}function vc(r){let e,n;return e=new oe({props:{$$slots:{default:[bc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wc(r){let e,n;const t=[R(Vt),{paint:{"circle-color":r[1],"circle-radius":qt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[vc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new nt({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?x(t,[i&0&&ne(R(Vt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":qt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function kc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Vt,$$slots:{right:[hc],default:[_c]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>J(e,"checked",i)),l=new Ft({props:{data:`${ge()}/v1/${Vt}.geojson`,$$slots:{default:[wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Y(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Vt="railway_stations";function yc(r,e,n){let t=te.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Sc extends q{constructor(e){super(),W(this,e,yc,kc,G,{})}}function Oc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tc(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[Oc]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Cc(r){let e,n;return e=new gn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Ac extends q{constructor(e){super(),W(this,e,null,Cc,G,{})}}function Lc(r){let e;return{c(){e=w("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ic(r){let e;return{c(){e=w("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pc(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Lc]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Ic]},$$scope:{ctx:r}}}),s=new lt({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Mc(r){let e,n;return e=new gn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Pc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Ec extends q{constructor(e){super(),W(this,e,null,Mc,G,{})}}function Nc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Dc(r){let e;return{c(){e=w("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jc(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new X({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Fc]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Dc]},$$scope:{ctx:r}}}),f=new We({}),{c(){e=L("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=C(),s=L("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=C(),h(f.$$.fragment)},m(d,g){$(d,e,g),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(d,u,g),$(d,s,g),$(d,a,g),b(f,d,g),c=!0},p(d,g){const y={};g&64&&(y.$$scope={dirty:g,ctx:d}),t.$set(y);const S={};g&64&&(S.$$scope={dirty:g,ctx:d}),o.$set(S)},i(d){c||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),c=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),c=!1},d(d){d&&(p(e),p(u),p(s),p(a)),v(t),v(o),v(f,d)}}}function Rc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[jc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function gr(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,d,g,y=r[5].pedal_cycles_2022.toLocaleString()+"",S,T,O,E,D,F=r[5].method+"",I;return{c(){e=L("h2"),t=w(n),l=C(),o=L("p"),i=w("Total motor vehicles (2022 AADF): "),u=L("b"),a=w(s),f=C(),c=L("p"),d=w("Total pedal cycles (2022 AADF): "),g=L("b"),S=w(y),T=C(),O=L("p"),E=w("Count method: "),D=L("b"),I=w(F)},m(N,M){$(N,e,M),k(e,t),$(N,l,M),$(N,o,M),k(o,i),k(o,u),k(u,a),$(N,f,M),$(N,c,M),k(c,d),k(c,g),k(g,S),$(N,T,M),$(N,O,M),k(O,E),k(O,D),k(D,I)},p(N,M){M&32&&n!==(n=N[5].location+"")&&B(t,n),M&32&&s!==(s=N[5].motor_vehicles_2022.toLocaleString()+"")&&B(a,s),M&32&&y!==(y=N[5].pedal_cycles_2022.toLocaleString()+"")&&B(S,y),M&32&&F!==(F=N[5].method+"")&&B(I,F)},d(N){N&&(p(e),p(l),p(o),p(f),p(c),p(T),p(O))}}}function Hc(r){let e,n;return e=new oe({props:{$$slots:{default:[Bc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uc(r){let e,n;const t=[R(bt),{sourceLayer:bt},{paint:{"circle-color":we(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Hc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Q(l,t[o]);return e=new nt({props:l}),e.$on("click",zc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?x(t,[i&0&&ne(R(bt)),i&0&&{sourceLayer:bt},i&6&&{paint:{"circle-color":we(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Gc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:bt,$$slots:{right:[Rc],default:[Nc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),K.push(()=>J(e,"checked",u));let a=r[0]&&gr(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${bt}.pmtiles`,$$slots:{default:[Uc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&64&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],Y(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=gr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ue(),_(a,1,1,()=>{a=null}),ce());const g={};c&65&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let bt="vehicle_counts";function zc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function qc(r,e,n){let t=te.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class Wc extends q{constructor(e){super(),W(this,e,qc,Gc,G,{})}}function Vc(r){let e,n,t,l,o,i,u,s;return e=new Ac({}),t=new mc({}),o=new Ec({}),u=new Sc({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,l,f),b(o,a,f),$(a,i,f),b(u,a,f),s=!0},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),s=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),s=!1},d(a){a&&(p(n),p(l),p(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Xc(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[Vc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Nf({}),t=new qf({}),o=new wf({}),u=new nc({}),a=new Vu({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,d){b(e,c,d),$(c,n,d),b(t,c,d),$(c,l,d),b(o,c,d),$(c,i,d),b(u,c,d),$(c,s,d),b(a,c,d),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Zc(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[Kc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jc(r){let e,n,t,l,o,i,u,s,a,f;return e=new ja({}),t=new sf({}),o=new qi({}),u=new $a({}),a=new Ta({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,d){b(e,c,d),$(c,n,d),b(t,c,d),$(c,l,d),b(o,c,d),$(c,i,d),b(u,c,d),$(c,s,d),b(a,c,d),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Yc(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[Jc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qc(r){let e,n,t,l;return e=new Ei({}),t=new ta({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function xc(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[Qc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function e$(r){let e,n,t,l;return e=new Ou({}),t=new _u({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function t$(r){let e,n,t,l,o=un()=="Private (development)",i,u,s;e=new Wc({}),t=new lu({});let a=o&&e$();return u=new Za({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),a&&a.c(),i=C(),h(u.$$.fragment)},m(f,c){b(e,f,c),$(f,n,c),b(t,f,c),$(f,l,c),a&&a.m(f,c),$(f,i,c),b(u,f,c),s=!0},p:ee,i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(a),m(u.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(a),_(u.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(i)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function n$(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[t$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function r$(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new ul({props:u}),K.push(()=>J(e,"enabled",i)),l=new gl({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],Y(()=>n=!1)),e.$set(f)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function l$(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y,S,T;return e=new Fu({}),t=new Me({props:{label:"Trip generators",$$slots:{default:[Xc]},$$scope:{ctx:r}}}),o=new Me({props:{label:"Existing infrastructure",$$slots:{default:[Zc]},$$scope:{ctx:r}}}),u=new Me({props:{label:"Boundaries",$$slots:{default:[Yc]},$$scope:{ctx:r}}}),a=new Me({props:{label:"Census",$$slots:{default:[xc]},$$scope:{ctx:r}}}),c=new Me({props:{label:"Other",$$slots:{default:[n$]},$$scope:{ctx:r}}}),g=new Me({props:{label:"Tools",$$slots:{default:[r$]},$$scope:{ctx:r}}}),S=new fl({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),h(c.$$.fragment),d=C(),h(g.$$.fragment),y=C(),h(S.$$.fragment)},m(O,E){b(e,O,E),$(O,n,E),b(t,O,E),$(O,l,E),b(o,O,E),$(O,i,E),b(u,O,E),$(O,s,E),b(a,O,E),$(O,f,E),b(c,O,E),$(O,d,E),b(g,O,E),$(O,y,E),b(S,O,E),T=!0},p(O,E){const D={};E&8&&(D.$$scope={dirty:E,ctx:O}),t.$set(D);const F={};E&8&&(F.$$scope={dirty:E,ctx:O}),o.$set(F);const I={};E&8&&(I.$$scope={dirty:E,ctx:O}),u.$set(I);const N={};E&8&&(N.$$scope={dirty:E,ctx:O}),a.$set(N);const M={};E&8&&(M.$$scope={dirty:E,ctx:O}),c.$set(M);const A={};E&9&&(A.$$scope={dirty:E,ctx:O}),g.$set(A);const P={};E&2&&(P.disabled=!O[1]),S.$set(P)},i(O){T||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(o.$$.fragment,O),m(u.$$.fragment,O),m(a.$$.fragment,O),m(c.$$.fragment,O),m(g.$$.fragment,O),m(S.$$.fragment,O),T=!0)},o(O){_(e.$$.fragment,O),_(t.$$.fragment,O),_(o.$$.fragment,O),_(u.$$.fragment,O),_(a.$$.fragment,O),_(c.$$.fragment,O),_(g.$$.fragment,O),_(S.$$.fragment,O),T=!1},d(O){O&&(p(n),p(l),p(i),p(s),p(f),p(d),p(y)),v(e,O),v(t,O),v(o,O),v(u,O),v(a,O),v(c,O),v(g,O),v(S,O)}}}function o$(r){let e,n;return e=new Me({props:{label:"Layers",open:!0,$$slots:{default:[l$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function s$(r,e,n){let t,l;me(r,Xn,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&Xn.set(!t)},[t,l,o]}class i$ extends q{constructor(e){super(),W(this,e,s$,o$,G,{})}}function a$(r,e,n){let{loadFile:t}=e;return $n(async()=>{let o=await(await fetch(`${mn()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class f$ extends q{constructor(e){super(),W(this,e,a$,null,G,{loadFile:0})}}function dr(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=L("p"),n=w("Current milestone: "),l=w(t)},m(i,u){$(i,e,u),k(e,n),k(e,l)},p(i,u){var s;u&1&&t!==(t=((s=i[0].browse)==null?void 0:s.current_milestone)+"")&&B(l,t)},d(i){i&&p(e)}}}function u$(r){let e;return{c(){e=w("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function c$(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $$(r){let e,n,t,l;return e=new tn({props:{$$slots:{default:[u$]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new tn({props:{$$slots:{default:[c$]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&32&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function p$(r){var F,I,N,M;let e,n,t=((F=r[0].browse)==null?void 0:F.authority_or_region)+"",l,o,i,u,s=((I=r[0].browse)==null?void 0:I.capital_scheme_id)+"",a,f,c,d,g=((N=r[0].browse)==null?void 0:N.funding_programme)+"",y,S,T,O,E,D=((M=r[0].browse)==null?void 0:M.current_milestone)&&dr(r);return O=new cl({props:{$$slots:{default:[$$]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("Authority or region: "),l=w(t),o=C(),i=L("p"),u=w("Capital scheme ID: "),a=w(s),f=C(),c=L("p"),d=w("Funding programme: "),y=w(g),S=C(),D&&D.c(),T=C(),h(O.$$.fragment)},m(A,P){$(A,e,P),k(e,n),k(e,l),$(A,o,P),$(A,i,P),k(i,u),k(i,a),$(A,f,P),$(A,c,P),k(c,d),k(c,y),$(A,S,P),D&&D.m(A,P),$(A,T,P),b(O,A,P),E=!0},p(A,P){var V,j,U,$e;(!E||P&1)&&t!==(t=((V=A[0].browse)==null?void 0:V.authority_or_region)+"")&&B(l,t),(!E||P&1)&&s!==(s=((j=A[0].browse)==null?void 0:j.capital_scheme_id)+"")&&B(a,s),(!E||P&1)&&g!==(g=((U=A[0].browse)==null?void 0:U.funding_programme)+"")&&B(y,g),($e=A[0].browse)!=null&&$e.current_milestone?D?D.p(A,P):(D=dr(A),D.c(),D.m(T.parentNode,T)):D&&(D.d(1),D=null);const H={};P&32&&(H.$$scope={dirty:P,ctx:A}),O.$set(H)},i(A){E||(m(O.$$.fragment,A),E=!0)},o(A){_(O.$$.fragment,A),E=!1},d(A){A&&(p(e),p(o),p(i),p(f),p(c),p(S),p(T)),D&&D.d(A),v(O,A)}}}function m$(r){var t;let e,n;return e=new Me({props:{label:`${r[0].scheme_reference}: ${(t=r[0].browse)==null?void 0:t.num_features} features`,$$slots:{default:[p$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),n=!0},p(l,[o]){var u;const i={};o&1&&(i.label=`${l[0].scheme_reference}: ${(u=l[0].browse)==null?void 0:u.num_features} features`),o&33&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function _$(r,e,n){let t,l;me(r,vt,s=>n(3,t=s)),me(r,cn,s=>n(4,l=s));let{scheme:o}=e;function i(){let s={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(ll(s),{padding:20,animate:!1})}function u(){var f,c;let s={type:"FeatureCollection",features:t.features.filter(d=>d.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(s)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=s=>{"scheme"in s&&n(0,o=s.scheme)},[o,i,u]}class g$ extends q{constructor(e){super(),W(this,e,_$,m$,G,{scheme:0})}}function hr(r){let e,n,t=vn(r[0].length_meters)+"",l;return{c(){e=L("p"),n=w("Length: "),l=w(t)},m(o,i){$(o,e,i),k(e,n),k(e,l)},p(o,i){i&1&&t!==(t=vn(o[0].length_meters)+"")&&B(l,t)},d(o){o&&p(e)}}}function br(r){let e,n=r[2](r[0].description)+"";return{c(){e=L("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[2](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function vr(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=L("p"),n=w("Current milestone: "),l=w(t)},m(i,u){$(i,e,u),k(e,n),k(e,l)},p(i,u){var s;u&2&&t!==(t=((s=i[1].browse)==null?void 0:s.current_milestone)+"")&&B(l,t)},d(i){i&&p(e)}}}function d$(r){var xe,Ce,Le,Fe;let e,n,t,l=r[2](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,d,g,y,S,T=r[0].scheme_reference+"",O,E,D,F,I=((xe=r[1].browse)==null?void 0:xe.authority_or_region)+"",N,M,A,P,H=((Ce=r[1].browse)==null?void 0:Ce.capital_scheme_id)+"",V,j,U,$e,Ne=((Le=r[1].browse)==null?void 0:Le.funding_programme)+"",de,Ve,pe=r[0].length_meters&&hr(r),fe=r[0].description&&br(r),re=((Fe=r[1].browse)==null?void 0:Fe.current_milestone)&&vr(r);return{c(){e=L("div"),n=L("h2"),t=new pn(!1),o=w(" ("),u=w(i),s=w(")"),a=C(),pe&&pe.c(),f=C(),fe&&fe.c(),c=C(),d=L("hr"),g=C(),y=L("p"),S=w("Part of scheme: "),O=w(T),E=C(),D=L("p"),F=w("Authority or region: "),N=w(I),M=C(),A=L("p"),P=w("Capital scheme ID: "),V=w(H),j=C(),U=L("p"),$e=w("Funding programme: "),de=w(Ne),Ve=C(),re&&re.c(),t.a=o,Te(e,"max-width","30vw")},m(le,_e){$(le,e,_e),k(e,n),t.m(l,n),k(n,o),k(n,u),k(n,s),k(e,a),pe&&pe.m(e,null),k(e,f),fe&&fe.m(e,null),k(e,c),k(e,d),k(e,g),k(e,y),k(y,S),k(y,O),k(e,E),k(e,D),k(D,F),k(D,N),k(e,M),k(e,A),k(A,P),k(A,V),k(e,j),k(e,U),k(U,$e),k(U,de),k(e,Ve),re&&re.m(e,null)},p(le,[_e]){var De,Xe,ve,ye;_e&1&&l!==(l=le[2](le[0].name)+"")&&t.p(l),_e&1&&i!==(i=le[0].intervention_type+"")&&B(u,i),le[0].length_meters?pe?pe.p(le,_e):(pe=hr(le),pe.c(),pe.m(e,f)):pe&&(pe.d(1),pe=null),le[0].description?fe?fe.p(le,_e):(fe=br(le),fe.c(),fe.m(e,c)):fe&&(fe.d(1),fe=null),_e&1&&T!==(T=le[0].scheme_reference+"")&&B(O,T),_e&2&&I!==(I=((De=le[1].browse)==null?void 0:De.authority_or_region)+"")&&B(N,I),_e&2&&H!==(H=((Xe=le[1].browse)==null?void 0:Xe.capital_scheme_id)+"")&&B(V,H),_e&2&&Ne!==(Ne=((ve=le[1].browse)==null?void 0:ve.funding_programme)+"")&&B(de,Ne),(ye=le[1].browse)!=null&&ye.current_milestone?re?re.p(le,_e):(re=vr(le),re.c(),re.m(e,null)):re&&(re.d(1),re=null)},i:ee,o:ee,d(le){le&&p(e),pe&&pe.d(),fe&&fe.d(),re&&re.d()}}}function h$(r,e,n){let t,l,o;me(r,Ut,s=>n(4,l=s)),me(r,It,s=>n(3,o=s));let{props:i}=e;function u(s){return l?s.replace(new RegExp(l,"gi"),a=>`<mark>${a}</mark>`):s}return r.$$set=s=>{"props"in s&&n(0,i=s.props)},r.$$.update=()=>{r.$$.dirty&9&&n(1,t=o.get(i.scheme_reference))},[i,t,u,o]}class dn extends q{constructor(e){super(),W(this,e,h$,d$,G,{props:0})}}function b$(r){let e,n=r[6].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function v$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function w$(r){let e,n,t,l;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[b$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[v$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function k$(r){let e,n=r[6].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function y$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function S$(r){let e,n,t,l;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[k$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[y$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function O$(r){let e,n=r[6].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function T$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function C$(r){let e,n,t,l;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[O$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[T$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function A$(r){let e,n,t,l,o,i,u,s,a,f;const c=[R("interventions-points"),{filter:["all",wn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":qt,"circle-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let d={$$slots:{default:[w$]},$$scope:{ctx:r}};for(let I=0;I<c.length;I+=1)d=Q(d,c[I]);e=new nt({props:d});const g=[R("interventions-lines"),{filter:["all",kn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":wt,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[S$]},$$scope:{ctx:r}};for(let I=0;I<g.length;I+=1)y=Q(y,g[I]);t=new he({props:y});const S=[R("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*wt,"circle-opacity":0,"circle-stroke-color":Ze.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let I=0;I<S.length;I+=1)T=Q(T,S[I]);o=new nt({props:T});const O=[R("interventions-polygons"),{filter:["all",Rt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":Z(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let E={$$slots:{default:[C$]},$$scope:{ctx:r}};for(let I=0;I<O.length;I+=1)E=Q(E,O[I]);u=new Ye({props:E});const D=[R("interventions-polygons-outlines"),{filter:["all",Rt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*wt}},{layout:{visibility:r[0]?"visible":"none"}}];let F={};for(let I=0;I<D.length;I+=1)F=Q(F,D[I]);return a=new he({props:F}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(I,N){b(e,I,N),$(I,n,N),b(t,I,N),$(I,l,N),b(o,I,N),$(I,i,N),b(u,I,N),$(I,s,N),b(a,I,N),f=!0},p(I,N){const M=N&29?x(c,[c[0],N&24&&{filter:["all",wn,I[3],I[4]]},c[2],c[3],N&4&&{paint:{"circle-color":I[2],"circle-radius":qt,"circle-opacity":Z(1,.5)}},N&1&&{layout:{visibility:I[0]?"visible":"none"}},c[6]]):{};N&128&&(M.$$scope={dirty:N,ctx:I}),e.$set(M);const A=N&13?x(g,[g[0],N&8&&{filter:["all",kn,I[3]]},g[2],g[3],N&4&&{paint:{"line-color":I[2],"line-width":wt,"line-opacity":Z(1,.5)}},N&1&&{layout:{visibility:I[0]?"visible":"none"}},g[6]]):{};N&128&&(A.$$scope={dirty:N,ctx:I}),t.$set(A);const P=N&1?x(S,[S[0],S[1],S[2],{layout:{visibility:I[0]?"visible":"none"}}]):{};o.$set(P);const H=N&13?x(O,[O[0],N&8&&{filter:["all",Rt,I[3]]},O[2],O[3],N&4&&{paint:{"fill-color":I[2],"fill-opacity":Z(.2,.5)}},N&1&&{layout:{visibility:I[0]?"visible":"none"}},O[6]]):{};N&128&&(H.$$scope={dirty:N,ctx:I}),u.$set(H);const V=N&13?x(D,[D[0],N&8&&{filter:["all",Rt,I[3]]},N&4&&{paint:{"line-color":I[2],"line-opacity":.5,"line-width":.7*wt}},N&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};a.$set(V)},i(I){f||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(o.$$.fragment,I),m(u.$$.fragment,I),m(a.$$.fragment,I),f=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(o.$$.fragment,I),_(u.$$.fragment,I),_(a.$$.fragment,I),f=!1},d(I){I&&(p(n),p(l),p(i),p(s)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I)}}}function L$(r){let e,n;return e=new Ft({props:{data:r[1],$$slots:{default:[A$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function I$(r,e,n){let t,l;me(r,vt,a=>n(5,l=a));let{showSchemes:o}=e,i=Jr();const u=["!=",["get","hide_while_editing"],!0],s=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=ol(l))},[o,t,i,u,s,l]}class P$ extends q{constructor(e){super(),W(this,e,I$,L$,G,{showSchemes:0})}}function wr(r,e,n){const t=r.slice();return t[10]=e[n],t}function M$(r){let e,n;return e=new f$({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kr(r){let e,n,t,l;function o(s){r[7](s)}function i(s){r[8](s)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new ni({props:u}),K.push(()=>J(e,"schemesToBeShown",o)),K.push(()=>J(e,"show",i)),{c(){h(e.$$.fragment)},m(s,a){b(e,s,a),l=!0},p(s,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=s[1],Y(()=>n=!1)),!t&&a&4&&(t=!0,f.show=s[2],Y(()=>t=!1)),e.$set(f)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){v(e,s)}}}function yr(r){let e,n;return e=new g$({props:{scheme:r[10]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.scheme=t[10]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sr(r){let e=r[1].has(r[10].scheme_reference),n,t,l=e&&yr(r);return{c(){l&&l.c(),n=Ae()},m(o,i){l&&l.m(o,i),$(o,n,i),t=!0},p(o,i){i&34&&(e=o[1].has(o[10].scheme_reference)),e?l?(l.p(o,i),i&34&&m(l,1)):(l=yr(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(ue(),_(l,1,1,()=>{l=null}),ce())},i(o){t||(m(l),t=!0)},o(o){_(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function E$(r){let e,n,t,l,o,i,u,s,a,f,c=un()=="Private (development)",d,g,y,S,T,O,E,D;o=new _l({props:{boundaryGeojson:r[3]}}),u=new Ul({}),a=new sl({});let F=c&&M$(r);g=new pl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[6]}}),S=new Mr({props:{errorMessage:r[0]}});let I=r[5].size>0&&kr(r),N=ze(r[5].values()),M=[];for(let P=0;P<N.length;P+=1)M[P]=Sr(wr(r,N,P));const A=P=>_(M[P],1,1,()=>{M[P]=null});return{c(){e=L("div"),n=L("div"),t=L("h1"),t.textContent="Browse schemes",l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),F&&F.c(),d=C(),h(g.$$.fragment),y=C(),h(S.$$.fragment),T=C(),I&&I.c(),O=C(),E=L("ul");for(let P=0;P<M.length;P+=1)M[P].c();Te(n,"display","flex"),Te(n,"justify-content","space-between"),z(e,"slot","sidebar"),z(e,"class","govuk-prose")},m(P,H){$(P,e,H),k(e,n),k(n,t),k(n,l),b(o,n,null),k(e,i),b(u,e,null),k(e,s),b(a,e,null),k(e,f),F&&F.m(e,null),k(e,d),b(g,e,null),k(e,y),b(S,e,null),k(e,T),I&&I.m(e,null),k(e,O),k(e,E);for(let V=0;V<M.length;V+=1)M[V]&&M[V].m(E,null);D=!0},p(P,H){const V={};H&8&&(V.boundaryGeojson=P[3]),o.$set(V),c&&F.p(P,H);const j={};if(H&1&&(j.errorMessage=P[0]),S.$set(j),P[5].size>0?I?(I.p(P,H),H&32&&m(I,1)):(I=kr(P),I.c(),m(I,1),I.m(e,O)):I&&(ue(),_(I,1,1,()=>{I=null}),ce()),H&34){N=ze(P[5].values());let U;for(U=0;U<N.length;U+=1){const $e=wr(P,N,U);M[U]?(M[U].p($e,H),m(M[U],1)):(M[U]=Sr($e),M[U].c(),m(M[U],1),M[U].m(E,null))}for(ue(),U=N.length;U<M.length;U+=1)A(U);ce()}},i(P){if(!D){m(o.$$.fragment,P),m(u.$$.fragment,P),m(a.$$.fragment,P),m(F),m(g.$$.fragment,P),m(S.$$.fragment,P),m(I);for(let H=0;H<N.length;H+=1)m(M[H]);D=!0}},o(P){_(o.$$.fragment,P),_(u.$$.fragment,P),_(a.$$.fragment,P),_(F),_(g.$$.fragment,P),_(S.$$.fragment,P),_(I),M=M.filter(Boolean);for(let H=0;H<M.length;H+=1)_(M[H]);D=!1},d(P){P&&p(e),v(o),v(u),v(a),F&&F.d(),v(g),v(S),I&&I.d(),Ot(M,P)}}}function N$(r){let e,n,t,l,o,i,u;return e=new $l({}),t=new P$({props:{showSchemes:r[2]}}),i=new i$({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),o=L("div"),h(i.$$.fragment),z(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),$(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&4&&(f.showSchemes=s[2]),t.$set(f)},i(s){u||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),v(i)}}}function F$(r){let e,n,t;return n=new il({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[N$]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(n.$$.fragment),z(e,"slot","main")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.style=l[4]),o&8196&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function D$(r){let e,n;return e=new dl({props:{$$slots:{main:[F$],sidebar:[E$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&8255&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function j$(r,e,n){let t,l,o;me(r,vt,g=>n(3,t=g)),me(r,yn,g=>n(4,l=g)),me(r,It,g=>n(5,o=g)),$n(()=>{al()});const i=new URLSearchParams(window.location.search);yn.set(i.get("style")||"dataviz");let u="",s=new Set,a=!0;function f(g){try{vt.set(JSON.parse(g)),It.set(zs(t)),n(0,u="")}catch(y){n(0,u=`The file you loaded is broken: ${y}`)}}function c(g){s=g,n(1,s)}function d(g){a=g,n(2,a)}return[u,s,a,t,l,o,f,c,d]}class R$ extends q{constructor(e){super(),W(this,e,j$,D$,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new R$({target:document.getElementById("app")});
