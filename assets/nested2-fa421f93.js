import{S as J,i as K,s as Y,e as S,h as G,a1 as Oe,j as $,Y as ne,o as p,aR as Rl,b as W,c as V,d as T,g as b,m as v,w as ut,l as X,t as m,n as d,p as w,Z as Qt,_ as Zt,$ as xt,a0 as en,a9 as qe,N as $e,O as pe,aU as bt,u as k,k as h,H as B,K as Ee,P as Mn,Q as Bl,q as Ae,T as zl,U as ql,V as ft,W as Hl,X as Gl,a$ as _o,b0 as dt,a6 as Gn,b1 as go,aQ as ho,at as ct,ag as Fn,al as tn,r as Dn,a as vt,F as kn,v as Je,a_ as x,b2 as he,b3 as Te,C as Z,aj as ee,D as Le,am as te,b4 as ae,G as kt,ad as an,J as Ul,aW as Yt,b5 as cn,R as Wl,b6 as Vt,E as Vl,aL as bo,b7 as vo,b8 as wo,f as yn,ai as ko,B as yo,aY as Un,an as So,ao as Wn,ap as Vn,aq as ln,aZ as Xn,L as Co,M as To,y as Oo}from"./index-655b5385.js";import{d as st,j as mt,C as ze,f as Qe,h as le,l as H,k as Lo,S as Ao,B as Io,c as Yn,b as St,G as No}from"./StreetViewTool-0da68ce8.js";import{a as He,F as Po}from"./Popup-37dbee2b.js";import{P as fe}from"./Popup-fc14709c.js";import{R as Mo,C as $t,Z as Fo}from"./ZoomOutMap-0a544951.js";import{L as Do,a as Eo}from"./LineMeasureController-7d3e66f8.js";function jo(l){let e;return{c(){e=S("span"),G(e,"class","svelte-kzgqtg"),Oe(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Oe(e,"background",n[0])},i:ne,o:ne,d(n){n&&p(e)}}}function Ro(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Pe extends J{constructor(e){super(),K(this,e,Ro,jo,Y,{color:0})}}const Bo="/atip/assets/help-d011708a.svg";function zo(l){let e,n;const t=l[1].default,r=Qt(t,l,l[4],null);return{c(){e=S("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&Zt(r,t,o,o[4],n?en(t,o[4],s,null):xt(o[4]),null)},i(o){n||(m(r,o),n=!0)},o(o){d(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function qo(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[zo]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new Rl({props:a}),W.push(()=>V(t,"open",i)),{c(){e=S("button"),e.innerHTML=`<img src="${Bo}" title="Help" alt="Help"/>`,n=T(),b(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),v(t,f,c),o=!0,s||(u=ut(e,"click",l[2]),s=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,_.open=f[0],X(()=>r=!1)),t.$set(_)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),w(t,f),s=!1,u()}}}function Ho(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class me extends J{constructor(e){super(),K(this,e,Ho,qo,Y,{})}}function Jn(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Kn(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Pe({props:{color:l[2]}}),{c(){e=S("li"),b(n.$$.fragment),t=T(),o=k(r),s=T()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&B(o,r)},i(i){u||(m(n.$$.fragment,i),u=!0)},o(i){d(n.$$.fragment,i),u=!1},d(i){i&&p(e),w(n)}}}function Go(l){let e,n,t=qe(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Kn(Jn(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){e=S("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=qe(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Jn(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Kn(a),r[i].c(),m(r[i],1),r[i].m(e,null))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),bt(r,s)}}}function Uo(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class En extends J{constructor(e){super(),K(this,e,Uo,Go,Y,{rows:0})}}function Qn(l){let e=l[0],n,t,r=Zn(l);return{c(){r.c(),n=Ee()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),d(r,1,1,ne),pe(),r=Zn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Zn(l){let e;const n=l[10].default,t=Qt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&Zt(t,n,r,r[9],e?en(n,r[9],o,null):xt(r[9]),null)},i(r){e||(m(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function Wo(l){let e,n,t=l[0]&&Qn(l);return{c(){t&&t.c(),e=Ee()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Qn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),d(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function Vo(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Mn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=Bl();Ae(l,f,y=>n(8,r=y)),Ae(l,c,y=>n(0,t=y));let _,g=!0;return zl(()=>{t&&_&&r&&(ql(f,t,_),ft(c,t=null,t),n(6,_=void 0))}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(ft(c,t=u,t),Hl(r,t,Gl({type:"raster",tiles:i,tileSize:a}),y=>r&&y===t,()=>{t&&(n(6,_=r==null?void 0:r.getSource(t)),n(7,g=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,_=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&_&&(g?n(7,g=!1):_.setTiles(i))},[t,f,c,u,i,a,_,g,r,s,o]}class Xo extends J{constructor(e){super(),K(this,e,Vo,Wo,Y,{id:3,tiles:4,tileSize:5})}}function Yo(l){let e;const n=l[16].default,t=Qt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&Zt(t,n,r,r[24],e?en(n,r[24],o,null):xt(r[24]),null)},i(r){e||(m(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function Jo(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[Yo]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new _o({props:o}),W.push(()=>V(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ko(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Mn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:O=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:N=!1}=e,{hovered:R=null}=e,{eventsIfTopMost:I=!1}=e,{interactive:P=!0}=e;function L(E){R=E,n(0,R)}function M(E){dt.call(this,l,E)}function D(E){dt.call(this,l,E)}function A(E){dt.call(this,l,E)}function j(E){dt.call(this,l,E)}function U(E){dt.call(this,l,E)}function q(E){dt.call(this,l,E)}return l.$$set=E=>{"id"in E&&n(1,o=E.id),"source"in E&&n(2,s=E.source),"sourceLayer"in E&&n(3,u=E.sourceLayer),"beforeId"in E&&n(4,i=E.beforeId),"beforeLayerType"in E&&n(5,a=E.beforeLayerType),"paint"in E&&n(6,f=E.paint),"layout"in E&&n(7,c=E.layout),"filter"in E&&n(8,_=E.filter),"applyToClusters"in E&&n(9,g=E.applyToClusters),"minzoom"in E&&n(10,y=E.minzoom),"maxzoom"in E&&n(11,O=E.maxzoom),"hoverCursor"in E&&n(12,C=E.hoverCursor),"manageHoverState"in E&&n(13,N=E.manageHoverState),"hovered"in E&&n(0,R=E.hovered),"eventsIfTopMost"in E&&n(14,I=E.eventsIfTopMost),"interactive"in E&&n(15,P=E.interactive),"$$scope"in E&&n(24,r=E.$$scope)},[R,o,s,u,i,a,f,c,_,g,y,O,C,N,I,P,t,L,M,D,A,j,U,q,r]}class $n extends J{constructor(e){super(),K(this,e,Ko,Jo,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function xn(l){let e=l[0],n,t,r=er(l);return{c(){r.c(),n=Ee()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),d(r,1,1,ne),pe(),r=er(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function er(l){let e;const n=l[9].default,t=Qt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&Zt(t,n,r,r[8],e?en(n,r[8],o,null):xt(r[8]),null)},i(r){e||(m(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function Qo(l){let e,n,t=l[0]&&xn(l);return{c(){t&&t.c(),e=Ee()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=xn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),d(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function Zo(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Mn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!Gn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new go;Gn.addProtocol("pmtiles",y.tile)}const{map:c,self:_}=Bl();Ae(l,c,y=>n(7,r=y)),Ae(l,_,y=>n(0,t=y));let g;return zl(()=>{t&&r&&(ql(c,t,g),ft(_,t=null,t),g=void 0)}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(ft(_,t=u,t),Hl(r,t,Gl({type:"vector",url:i,tiles:a,promoteId:f}),y=>r&&y===t,()=>{t&&(g=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{g=r==null?void 0:r.getSource(u)}))},[t,c,_,u,i,a,f,r,s,o]}class ke extends J{constructor(e){super(),K(this,e,Zo,Qo,Y,{id:3,url:4,tiles:5,promoteId:6})}}const xo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var je=Uint8Array,_t=Uint16Array,Xl=Uint32Array,Yl=new je([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Jl=new je([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),es=new je([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Kl=function(l,e){for(var n=new _t(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new Xl(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},Ql=Kl(Yl,2),Zl=Ql[0],ts=Ql[1];Zl[28]=258,ts[258]=28;var ns=Kl(Jl,0),rs=ns[0],Sn=new _t(32768);for(var we=0;we<32768;++we){var it=(we&43690)>>>1|(we&21845)<<1;it=(it&52428)>>>2|(it&13107)<<2,it=(it&61680)>>>4|(it&3855)<<4,Sn[we]=((it&65280)>>>8|(it&255)<<8)>>>1}var Xt=function(l,e,n){for(var t=l.length,r=0,o=new _t(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new _t(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new _t(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[Sn[c]>>>i]=a}else for(u=new _t(t),r=0;r<t;++r)l[r]&&(u[r]=Sn[s[l[r]-1]++]>>>15-l[r]);return u},nn=new je(288);for(var we=0;we<144;++we)nn[we]=8;for(var we=144;we<256;++we)nn[we]=9;for(var we=256;we<280;++we)nn[we]=7;for(var we=280;we<288;++we)nn[we]=8;var xl=new je(32);for(var we=0;we<32;++we)xl[we]=5;var ls=Xt(nn,9,1),os=Xt(xl,5,1),pn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},Ue=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},mn=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},ss=function(l){return(l+7)/8|0},jn=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?_t:l.BYTES_PER_ELEMENT==4?Xl:je)(n-e);return t.set(l.subarray(e,n)),t},is=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],We=function(l,e,n){var t=new Error(e||is[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,We),!n)throw t;return t},as=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new je(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new je(t*3));var s=function(ge){var ve=e.length;if(ge>ve){var _e=new je(Math.max(ve*2,ge));_e.set(e),e=_e}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,_=n.m,g=n.n,y=t*8;do{if(!f){u=Ue(l,i,1);var O=Ue(l,i+1,3);if(i+=3,O)if(O==1)f=ls,c=os,_=9,g=5;else if(O==2){var I=Ue(l,i,31)+257,P=Ue(l,i+10,15)+4,L=I+Ue(l,i+5,31)+1;i+=14;for(var M=new je(L),D=new je(19),A=0;A<P;++A)D[es[A]]=Ue(l,i+A*3,7);i+=P*3;for(var j=pn(D),U=(1<<j)-1,q=Xt(D,j,1),A=0;A<L;){var E=q[Ue(l,i,U)];i+=E&15;var C=E>>>4;if(C<16)M[A++]=C;else{var F=0,z=0;for(C==16?(z=3+Ue(l,i,3),i+=2,F=M[A-1]):C==17?(z=3+Ue(l,i,7),i+=3):C==18&&(z=11+Ue(l,i,127),i+=7);z--;)M[A++]=F}}var oe=M.subarray(0,I),se=M.subarray(I);_=pn(oe),g=pn(se),f=Xt(oe,_,1),c=Xt(se,g,1)}else We(1);else{var C=ss(i)+4,N=l[C-4]|l[C-3]<<8,R=C+N;if(R>t){o&&We(0);break}r&&s(a+N),e.set(l.subarray(C,R),a),n.b=a+=N,n.p=i=R*8,n.f=u;continue}if(i>y){o&&We(0);break}}r&&s(a+131072);for(var ye=(1<<_)-1,de=(1<<g)-1,Se=i;;Se=i){var F=f[mn(l,i)&ye],ie=F>>>4;if(i+=F&15,i>y){o&&We(0);break}if(F||We(2),ie<256)e[a++]=ie;else if(ie==256){Se=i,f=null;break}else{var Ne=ie-254;if(ie>264){var A=ie-257,Ce=Yl[A];Ne=Ue(l,i,(1<<Ce)-1)+Zl[A],i+=Ce}var be=c[mn(l,i)&de],re=be>>>4;be||We(3),i+=be&15;var se=rs[re];if(re>3){var Ce=Jl[re];se+=mn(l,i)&(1<<Ce)-1,i+=Ce}if(i>y){o&&We(0);break}r&&s(a+131072);for(var ce=a+Ne;a<ce;a+=4)e[a]=e[a-se],e[a+1]=e[a+1-se],e[a+2]=e[a+2-se],e[a+3]=e[a+3-se];a=ce}}n.l=f,n.p=Se,n.b=a,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=g)}while(!u);return a==e.length?e:jn(e,0,a)},fs=new je(0),Ye=function(l,e){return l[e]|l[e+1]<<8},Ve=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},_n=function(l,e){return Ve(l,e)+Ve(l,e+4)*4294967296};function us(l,e){return as(l,e)}var Cn=typeof TextDecoder<"u"&&new TextDecoder,cs=0;try{Cn.decode(fs,{stream:!0}),cs=1}catch{}var $s=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,jn(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function eo(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(Cn)return Cn.decode(l);var r=$s(l),o=r[0],s=r[1];return s.length&&We(8),o}}var ps=function(l,e){return e+30+Ye(l,e+26)+Ye(l,e+28)},ms=function(l,e,n){var t=Ye(l,e+28),r=eo(l.subarray(e+46,e+46+t),!(Ye(l,e+8)&2048)),o=e+46+t,s=Ve(l,e+20),u=n&&s==4294967295?_s(l,o):[s,Ve(l,e+24),Ve(l,e+42)],i=u[0],a=u[1],f=u[2];return[Ye(l,e+10),i,a,r,o+Ye(l,e+30)+Ye(l,e+32),f]},_s=function(l,e){for(;Ye(l,e)!=1;e+=4+Ye(l,e+2));return[_n(l,e+12),_n(l,e+4),_n(l,e+20)]};function gs(l,e){for(var n={},t=l.length-22;Ve(l,t)!=101010256;--t)(!t||l.length-t>65558)&&We(13);var r=Ye(l,t+8);if(!r)return{};var o=Ve(l,t+16),s=o==4294967295||r==65535;if(s){var u=Ve(l,t-12);s=Ve(l,u)==101075792,s&&(r=Ve(l,u+32),o=Ve(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=ms(l,o,s),c=f[0],_=f[1],g=f[2],y=f[3],O=f[4],C=f[5],N=ps(l,C);o=O,(!i||i({name:y,size:_,originalSize:g,compression:c}))&&(c?c==8?n[y]=us(l.subarray(N,N+_),new je(g)):We(14,"unknown compression type "+c):n[y]=jn(l,N,N+_))}return n}function ds(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(gn):gn(l)}function gn(l){var e=new Uint8Array(l),n=gs(e);return Promise.resolve(hs(n))}function hs(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=eo(l[r])}return e}function Ke(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&gt(t)===e)return t;n++}}function rn(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&gt(r)===e&&n.push(r),t++}return n}function fn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&gt(r)===e&&n(r,t):n(r,t),t++}}function bs(l,e,n){var t=[];return fn(l,e,function(r,o){t.push(n(r,o))}),t}var vs=/.+\:/;function gt(l){return l.tagName.replace(vs,"")}function to(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+gt(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=to(l.childNodes[t]),t++;return e+="</"+gt(l)+">",e}function ws(l){var e=l.documentElement,n=Ke(e,"sheetData"),t=[];return fn(n,"row",function(r){fn(r,"c",function(o){t.push(o)})}),t}function ks(l,e){return Ke(e,"v")}function ys(l,e){if(e.firstChild&&gt(e.firstChild)==="is"&&e.firstChild.firstChild&&gt(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Ss(l){var e=l.documentElement,n=Ke(e,"dimension");if(n)return n.getAttribute("ref")}function Cs(l){var e=l.documentElement,n=Ke(e,"cellStyleXfs");return n?rn(n,"xf"):[]}function Ts(l){var e=l.documentElement,n=Ke(e,"cellXfs");return n?rn(n,"xf"):[]}function Os(l){var e=l.documentElement,n=Ke(e,"numFmts");return n?rn(n,"numFmt"):[]}function Ls(l){var e=l.documentElement;return bs(e,"si",function(n){var t=Ke(n,"t");if(t)return t.textContent;var r="";return fn(n,"r",function(o){r+=Ke(o,"t").textContent}),r})}function As(l){var e=l.documentElement;return Ke(e,"workbookPr")}function Is(l){var e=l.documentElement;return rn(e,"Relationship")}function Ns(l){var e=l.documentElement,n=Ke(e,"sheets");return rn(n,"sheet")}function Ps(l,e){var n=e.createDocument(l),t={},r=As(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return Ns(n).forEach(o),t}function Ms(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=dn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=dn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=dn(u);break}};return Is(n).forEach(r),t}function dn(l){return l[0]==="/"?l.slice(1):"xl/"+l}function tr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function nr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tr(Object(n),!0).forEach(function(t){Fs(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Fs(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Ds(l,e){if(!l)return{};var n=e.createDocument(l),t=Cs(n).map(hn),r=Os(n).map(Es).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?nr(nr({},t[u.xfId]),hn(u,r)):hn(u,r)};return Ts(n).map(o)}function Es(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function hn(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function js(l,e){return l?Ls(e.createDocument(l)):[]}function no(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function Rs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Bs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bs(l,e){if(l){if(typeof l=="string")return rr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rr(l,e)}}function rr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function zs(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(qs.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&Us(t.numberFormat.template))return!0}}var qs=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Hs=/^\[\$-414\]/,Gs=/;@$/;function Us(l){l=l.toLowerCase(),l=l.replace(Hs,""),l=l.replace(Gs,"");for(var e=l.split(/\W+/),n=Rs(e),t;!(t=n()).done;){var r=t.value;if(Ws.indexOf(r)<0)return!1}return!0}var Ws=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Vs(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=bn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=bn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=bn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=Xs(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var _=zs(o(),s,a);_?(l=lr(l),l=no(l,i)):l=(a.parseNumber||lr)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function Xs(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function bn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function lr(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var Ys=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Js(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function Ks(l){for(var e=0,n=0;n<l.length;)e*=26,e+=Ys.indexOf(l[n]),n++;return e}function ro(l){return l=l.split(/(\d+)/),[parseInt(l[1]),Ks(l[0].trim())]}function Qs(l,e,n,t,r,o,s){var u=ro(l.getAttribute("r")),i=ks(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:Vs(a,f,{getInlineStringValue:function(){return ys(e,l)},getInlineStringXml:function(){return to(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function Zs(l,e,n,t,r,o){var s=ws(l);return s.length===0?[]:s.map(function(u){return Qs(u,l,e,n,t,r,o)})}function xs(l,e){return ri(l)||ni(l,e)||ti(l,e)||ei()}function ei(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ti(l,e){if(l){if(typeof l=="string")return or(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return or(l,e)}}function or(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ni(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ri(l){if(Array.isArray(l))return l}function li(l){var e=Ss(l);if(e)return e=e.split(":").map(ro).map(function(n){var t=xs(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function oi(l,e,n,t,r,o){var s=e.createDocument(l),u=Zs(s,e,n,t,r,o),i=li(s)||Js(u);return{cells:u,dimensions:i}}function si(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ii(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ii(l,e){if(l){if(typeof l=="string")return sr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sr(l,e)}}function sr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ai(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=si(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function fi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ui(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ui(l,e){if(l){if(typeof l=="string")return ir(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(l,e)}}function ir(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ci(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=fi(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function $i(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=lo(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pi(l,e){return gi(l)||_i(l,e)||lo(l,e)||mi()}function mi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lo(l,e){if(l){if(typeof l=="string")return ar(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ar(l,e)}}function ar(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function _i(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function gi(l){if(Array.isArray(l))return l}function di(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=pi(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=$i(t),_;!(_=c()).done;){var g=_.value,y=g.row-1,O=g.column-1;O<s&&y<u&&(i[y][O]=g.value)}var C=e.rowMap;if(C)for(var N=0;N<i.length;)C[N]=N,N++;return i=ai(ci(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(i=e.transformData(i)),i}function hi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=bi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bi(l,e){if(l){if(typeof l=="string")return fr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fr(l,e)}}function fr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ur(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function vi(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ur(Object(n),!0).forEach(function(t){wi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function wi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ki(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=vi({sheet:1},n));var t=function(_){if(!l[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return l[_]},r=Ms(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?js(t(r.sharedStrings),e):[],s=r.styles?Ds(t(r.styles),e):{},u=Ps(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var i=yi(n.sheet,u.sheets);if(!i||!r.sheets[i])throw Si(n.sheet,u.sheets);var a=oi(t(r.sheets[i]),e,o,s,u,n),f=di(a,n);return n.properties?{data:f,properties:u}:f}function yi(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=hi(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Si(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Tn(l){"@babel/helpers - typeof";return Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(l)}function cr(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Ci(l,e,n){return e&&cr(l.prototype,e),n&&cr(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function Ti(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function Oi(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&Jt(l,e)}function Li(l){var e=oo();return function(){var t=Kt(l),r;if(e){var o=Kt(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return Ai(this,r)}}function Ai(l,e){if(e&&(Tn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ii(l)}function Ii(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function On(l){var e=typeof Map=="function"?new Map:void 0;return On=function(t){if(t===null||!Ni(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return sn(t,arguments,Kt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Jt(r,t)},On(l)}function sn(l,e,n){return oo()?sn=Reflect.construct:sn=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&Jt(a,s.prototype),a},sn.apply(null,arguments)}function oo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ni(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function Jt(l,e){return Jt=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},Jt(l,e)}function Kt(l){return Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Kt(l)}var Re=function(l){Oi(n,l);var e=Li(n);function n(t){var r;return Ti(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Ci(n)}(On(Error));function Pi(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new Re("not_a_number")}if(typeof l!="number")throw new Re("not_a_number");if(isNaN(l))throw new Re("invalid_number");if(!isFinite(l))throw new Re("out_of_bounds");return l}function Mi(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new Re("invalid_number");if(!isFinite(l))throw new Re("out_of_bounds");return String(l)}throw new Re("not_a_string")}function Fi(l){if(typeof l=="boolean")return l;throw new Re("not_a_boolean")}function Di(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new Re("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new Re("invalid_number");if(!isFinite(l))throw new Re("out_of_bounds");var t=no(l,n);if(isNaN(t.valueOf()))throw new Re("out_of_bounds");return t}throw new Re("not_a_date")}function Ei(l,e){return Bi(l)||Ri(l,e)||so(l,e)||ji()}function ji(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ri(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Bi(l){if(Array.isArray(l))return l}function Ln(l){"@babel/helpers - typeof";return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(l)}function zi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=so(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function so(l,e){if(l){if(typeof l=="string")return $r(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $r(l,e)}}function $r(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function pr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function mr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pr(Object(n),!0).forEach(function(t){qi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function qi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var _r={isColumnOriented:!1};function Hi(l,e,n){n?n=mr(mr({},_r),n):n=_r;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;Vi(e),r&&(l=Wi(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=io(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var _=zi(a),g;!(g=_()).done;){var y=g.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function io(l,e,n,t,r,o){for(var s={},u=!0,i=function(R){var I=R.column,P=R.value,L=R.error,M=R.reason,D={error:L,row:n+1,column:I,value:P};return M&&(D.reason=M),l[I].type&&(D.type=l[I].type),D},a=[],f=function(){var R=_[c],I=l[R],P=Ln(I.type)==="object"&&!Array.isArray(I.type),L=e[t.indexOf(R)];L===void 0&&(L=null);var M=void 0,D=void 0,A=void 0;if(P)M=io(I.type,e,n,t,r,o);else if(L===null)M=null;else if(Array.isArray(I.type)){var j=!1,U=Ui(L).map(function(E){var F=gr(E,I,o);return F.error&&(M=E,D=F.error,A=F.reason),F.value!==null&&(j=!0),F.value});D||(M=j?U:null)}else{var q=gr(L,I,o);D=q.error,A=q.reason,M=D?L:q.value}!D&&M===null&&(typeof I.required=="function"?a.push({column:R}):I.required===!0&&(D="required")),D?r.push(i({column:R,value:M,error:D,reason:A})):(u&&M!==null&&(u=!1),(M!==null||o.includeNullValues)&&(s[I.prop]=M))},c=0,_=Object.keys(l);c<_.length;c++)f();if(u)return null;for(var g=0,y=a;g<y.length;g++){var O=y[g].column,C=l[O].required(s);C&&r.push(i({column:O,value:null,error:"required"}))}return s}function gr(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=ht(l,e.parse):e.type?t=Gi(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function ht(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Gi(l,e,n){switch(e){case String:return ht(l,Mi);case Number:return ht(l,Pi);case Date:return ht(l,function(t){return Di(t,{properties:n.properties})});case Boolean:return ht(l,Fi);default:if(typeof e=="function")return ht(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function ao(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=ao(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function Ui(l){for(var e=[],n=0;n<l.length;){var t=ao(l,",",n),r=Ei(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var Wi=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function Vi(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function An(l){"@babel/helpers - typeof";return An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},An(l)}function fo(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;An(o)==="object"&&(o=Object.keys(l[r])[0],s=fo(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var Xi=["schema","map"];function dr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function on(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dr(Object(n),!0).forEach(function(t){Yi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Yi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Ji(l,e){if(l==null)return{};var n=Ki(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function Ki(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function Qi(l,e,n){var t=n.schema,r=n.map,o=Ji(n,Xi);!t&&r&&(t=fo(r));var s=ki(l,e,on(on({},o),{},{properties:t||o.properties}));return t?Hi(s.data,t,on(on({},o),{},{properties:s.properties})):s}function Zi(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ds(l).then(function(n){return Qi(n,xo,e)})}function xi(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>ea(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function ea(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function ta(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Zi(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=ho(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const In=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function na(l){return ct(["get","intervention_type"],{area:st.area,route:st.route,crossing:st.crossing,other:st.other},"white")}function ra(l){return[["Areas",st.area],["Routes",st.route],["Crossings",st.crossing],["Other",st.other]]}const Q={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},Be=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Nn(){let[l,e]=uo(In,Q.funding_programmes);return[ct(["get","funding_programme"],l,"grey"),e]}function la(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=uo(l,Q.current_milestone);return[ct(["get","current_milestone"],e,"grey"),n]}function uo(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function oa(l){let e,n;return e=new En({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function sa(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new mt({props:u}),W.push(()=>V(e,"value",s)),e.$on("change",l[2]),r=new ze({props:{label:"Legend",$$slots:{default:[oa]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],X(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function ia(l,e,n){let t;Ae(l,Fn,a=>n(4,t=a));let r="fundingProgramme",[o,s]=Nn();function u(){let a;r=="interventionType"?(a=na(),n(1,s=ra())):r=="fundingProgramme"?n(1,[a,s]=Nn(),s):r=="currentMilestone"&&n(1,[a,s]=la(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class aa extends J{constructor(e){super(),K(this,e,ia,sa,Y,{})}}const wt=tn({type:"FeatureCollection",features:[],schemes:{}}),un=tn(new Map),hr=tn(!0),Ct=tn(""),Tt=tn("");function fa(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ua(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ca(l){let e,n,t,r,o,s;return t=new vt({props:{$$slots:{default:[ua]},$$scope:{ctx:l}}}),t.$on("click",l[19]),{c(){e=S("input"),n=T(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,i){$(u,e,i),Je(e,l[7]),$(u,n,i),v(t,u,i),r=!0,o||(s=ut(e,"input",l[18]),o=!0)},p(u,i){i&128&&e.value!==u[7]&&Je(e,u[7]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function $a(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pa(l){let e,n,t,r,o,s;return t=new vt({props:{$$slots:{default:[$a]},$$scope:{ctx:l}}}),t.$on("click",l[21]),{c(){e=S("input"),n=T(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,i){$(u,e,i),Je(e,l[6]),$(u,n,i),v(t,u,i),r=!0,o||(s=ut(e,"input",l[20]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&Je(e,u[6]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function ma(l){let e,n,t,r,o,s,u,i,a,f,c,_,g,y,O,C,N,R,I,P;e=new vt({props:{$$slots:{default:[fa]},$$scope:{ctx:l}}}),e.$on("click",l[13]);function L(F){l[14](F)}let M={label:"Authority or region",choices:l[8],emptyOption:!0};l[2]!==void 0&&(M.value=l[2]),t=new mt({props:M}),W.push(()=>V(t,"value",L));function D(F){l[15](F)}let A={label:"Funding programme",choices:l[9],emptyOption:!0};l[3]!==void 0&&(A.value=l[3]),s=new mt({props:A}),W.push(()=>V(s,"value",D));function j(F){l[16](F)}let U={label:"Current milestone",choices:l[10],emptyOption:!0};l[4]!==void 0&&(U.value=l[4]),a=new mt({props:U}),W.push(()=>V(a,"value",j));function q(F){l[17](F)}let E={label:"Sketch source",choices:l[12],emptyOption:!0};return l[5]!==void 0&&(E.value=l[5]),_=new mt({props:E}),W.push(()=>V(_,"value",q)),O=new kn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[ca]},$$scope:{ctx:l}}}),N=new kn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[pa]},$$scope:{ctx:l}}}),I=new aa({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),o=T(),b(s.$$.fragment),i=T(),b(a.$$.fragment),c=T(),b(_.$$.fragment),y=T(),b(O.$$.fragment),C=T(),b(N.$$.fragment),R=T(),b(I.$$.fragment)},m(F,z){v(e,F,z),$(F,n,z),v(t,F,z),$(F,o,z),v(s,F,z),$(F,i,z),v(a,F,z),$(F,c,z),v(_,F,z),$(F,y,z),v(O,F,z),$(F,C,z),v(N,F,z),$(F,R,z),v(I,F,z),P=!0},p(F,z){const oe={};z&134217728&&(oe.$$scope={dirty:z,ctx:F}),e.$set(oe);const se={};z&256&&(se.choices=F[8]),!r&&z&4&&(r=!0,se.value=F[2],X(()=>r=!1)),t.$set(se);const ye={};z&512&&(ye.choices=F[9]),!u&&z&8&&(u=!0,ye.value=F[3],X(()=>u=!1)),s.$set(ye);const de={};z&1024&&(de.choices=F[10]),!f&&z&16&&(f=!0,de.value=F[4],X(()=>f=!1)),a.$set(de);const Se={};!g&&z&32&&(g=!0,Se.value=F[5],X(()=>g=!1)),_.$set(Se);const ie={};z&134217856&&(ie.$$scope={dirty:z,ctx:F}),O.$set(ie);const Ne={};z&134217792&&(Ne.$$scope={dirty:z,ctx:F}),N.$set(Ne)},i(F){P||(m(e.$$.fragment,F),m(t.$$.fragment,F),m(s.$$.fragment,F),m(a.$$.fragment,F),m(_.$$.fragment,F),m(O.$$.fragment,F),m(N.$$.fragment,F),m(I.$$.fragment,F),P=!0)},o(F){d(e.$$.fragment,F),d(t.$$.fragment,F),d(s.$$.fragment,F),d(a.$$.fragment,F),d(_.$$.fragment,F),d(O.$$.fragment,F),d(N.$$.fragment,F),d(I.$$.fragment,F),P=!1},d(F){F&&(p(n),p(o),p(i),p(c),p(y),p(C),p(R)),w(e,F),w(t,F),w(s,F),w(a,F),w(_,F),w(O,F),w(N,F),w(I,F)}}}function _a(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[11].route.toLocaleString()+"",s,u,i=l[11].area.toLocaleString()+"",a,f,c=l[11].crossing.toLocaleString()+"",_,g,y=l[11].other.toLocaleString()+"",O,C,N=br(l[11].totalLength).toFixed(1)+"",R,I;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),_=k(c),g=k(" crossings, "),O=k(y),C=k(`
    other, with total LineString length of `),R=k(N),I=k(" miles)")},m(P,L){$(P,e,L),$(P,t,L),$(P,r,L),$(P,s,L),$(P,u,L),$(P,a,L),$(P,f,L),$(P,_,L),$(P,g,L),$(P,O,L),$(P,C,L),$(P,R,L),$(P,I,L)},p(P,L){L&1&&n!==(n=P[0].size.toLocaleString()+"")&&B(t,n),L&2048&&o!==(o=P[11].route.toLocaleString()+"")&&B(s,o),L&2048&&i!==(i=P[11].area.toLocaleString()+"")&&B(a,i),L&2048&&c!==(c=P[11].crossing.toLocaleString()+"")&&B(_,c),L&2048&&y!==(y=P[11].other.toLocaleString()+"")&&B(O,y),L&2048&&N!==(N=br(P[11].totalLength).toFixed(1)+"")&&B(R,N)},d(P){P&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(_),p(g),p(O),p(C),p(R),p(I))}}}function ga(l){let e,n,t;function r(s){l[22](s)}let o={$$slots:{default:[_a]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&134219777&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function da(l){let e,n,t,r;return e=new ze({props:{label:"Filters",$$slots:{default:[ma]},$$scope:{ctx:l}}}),t=new Qe({props:{small:!0,$$slots:{default:[ga]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&134219772&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&134219779&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function br(l){return l*621371e-9}function ha(l,e,n){let t,r,o,s;Ae(l,Tt,z=>n(6,t=z)),Ae(l,Ct,z=>n(7,r=z)),Ae(l,wt,z=>n(23,o=z)),Ae(l,un,z=>n(24,s=z));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],_=new Set(In.slice(0,-1)),g="",y=[],O="",C=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],N="",R={area:0,route:0,crossing:0,other:0,totalLength:0};Dn(()=>{var ye,de,Se;let z=new Set,oe=new Set,se=new Set;for(let ie of s.values())(ye=ie.browse)!=null&&ye.authority_or_region&&z.add(ie.browse.authority_or_region),(de=ie.browse)!=null&&de.funding_programme&&oe.add(ie.browse.funding_programme),(Se=ie.browse)!=null&&Se.current_milestone&&se.add(ie.browse.current_milestone);n(8,a=Array.from(z.entries())),a.sort(),n(9,c=In.map(ie=>[ie,ie])),n(10,y=Array.from(se.entries())),y.sort()});function I(z,oe,se,ye,de,Se){let ie=oe.toLowerCase(),Ne=se.toLowerCase(),Ce=re=>{var ce,ge,ve,_e,Ie,Me,yt;if(ie&&!((ce=re.properties.name)!=null&&ce.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))return!1;if(z||Ne||ye||de||Se){let Xe=s.get(re.properties.scheme_reference);if(ye&&((ve=Xe.browse)==null?void 0:ve.authority_or_region)!=ye||de&&de!=="Other"&&((_e=Xe.browse)==null?void 0:_e.funding_programme)!=de||de==="Other"&&_.has(((Ie=Xe.browse)==null?void 0:Ie.funding_programme)??"")||Se&&((Me=Xe.browse)==null?void 0:Me.current_milestone)!=Se||Ne&&!Xe.scheme_reference.toLowerCase().includes(Ne)&&!(Xe.scheme_name??"").toLowerCase().includes(Ne)||z&&z!=="Both"&&z!==((yt=Xe.browse)==null?void 0:yt.sketch_source))return!1}return!0};n(0,u=new Set(o.features.filter(Ce).map(re=>re.properties.scheme_reference))),n(11,R={area:0,route:0,crossing:0,other:0,totalLength:0});let be=re=>{var ce,ge;return!(!u.has(re.properties.scheme_reference)||ie&&!((ce=re.properties.name)!=null&&ce.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))};for(let re of o.features)be(re)?(delete re.properties.hide_while_editing,n(11,R[re.properties.intervention_type]++,R),re.geometry.type=="LineString"&&re.properties.length_meters&&n(11,R.totalLength+=re.properties.length_meters,R)):re.properties.hide_while_editing=!0;wt.set(o),n(11,R)}function P(){n(5,N=""),n(2,f=""),n(3,g=""),n(4,O=""),ft(Ct,r="",r),ft(Tt,t="",t)}function L(z){f=z,n(2,f)}function M(z){g=z,n(3,g)}function D(z){O=z,n(4,O)}function A(z){N=z,n(5,N)}function j(){r=this.value,Ct.set(r)}const U=()=>ft(Ct,r="",r);function q(){t=this.value,Tt.set(t)}const E=()=>ft(Tt,t="",t);function F(z){i=z,n(1,i)}return l.$$set=z=>{"schemesToBeShown"in z&&n(0,u=z.schemesToBeShown),"show"in z&&n(1,i=z.show)},l.$$.update=()=>{l.$$.dirty&252&&I(N,r,t,f,g,O)},[u,i,f,g,O,N,t,r,a,c,y,R,C,P,L,M,D,A,j,U,q,E,F]}class ba extends J{constructor(e){super(),K(this,e,ha,da,Y,{schemesToBeShown:0,show:1})}}function va(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wa(l){let e,n,t,r,o;return t=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[va]},$$scope:{ctx:l}}}),{c(){e=S("p"),n=k("License: "),b(t.$$.fragment),r=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),h(e,n),v(t,e,null),h(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class De extends J{constructor(e){super(),K(this,e,null,wa,Y,{})}}function vr(l,e,n){const t=l.slice();return t[2]=e[n],t}function wr(l,e,n){const t=l.slice();return t[5]=e[n],t}function kr(l){let e,n;return{c(){e=S("span"),n=k(`
    `),Oe(e,"background",l[5]),Oe(e,"width","100%"),Oe(e,"border","1px solid black")},m(t,r){$(t,e,r),h(e,n)},p(t,r){r&1&&Oe(e,"background",t[5])},d(t){t&&p(e)}}}function yr(l){let e,n=l[2]+"",t;return{c(){e=S("span"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&B(t,n)},d(r){r&&p(e)}}}function ka(l){let e,n,t,r=qe(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=kr(wr(l,r,i));let s=qe(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=yr(vr(l,s,i));return{c(){e=S("div");for(let i=0;i<o.length;i+=1)o[i].c();n=T(),t=S("div");for(let i=0;i<u.length;i+=1)u[i].c();Oe(e,"display","flex"),Oe(t,"display","flex"),Oe(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=qe(i[0]);let f;for(f=0;f<r.length;f+=1){const c=wr(i,r,f);o[f]?o[f].p(c,a):(o[f]=kr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=qe(i[1]);let f;for(f=0;f<s.length;f+=1){const c=vr(i,s,f);u[f]?u[f].p(c,a):(u[f]=yr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:ne,o:ne,d(i){i&&(p(e),p(n),p(t)),bt(o,i),bt(u,i)}}}function ya(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ge extends J{constructor(e){super(),K(this,e,ya,ka,Y,{colorScale:0,limits:1})}}function Sr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Sa(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ca(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ta(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Oa(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function La(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ca]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ta]},$$scope:{ctx:l}}}),f=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Oa]},$$scope:{ctx:l}}}),{c(){e=S("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=T(),i=S("p"),a=k("License: "),b(f.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(g,y){$(g,e,y),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(g,u,y),$(g,i,y),h(i,a),v(f,i,null),h(i,c),_=!0},p(g,y){const O={};y&65536&&(O.$$scope={dirty:y,ctx:g}),t.$set(O);const C={};y&65536&&(C.$$scope={dirty:y,ctx:g}),o.$set(C);const N={};y&65536&&(N.$$scope={dirty:y,ctx:g}),f.$set(N)},i(g){_||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),_=!0)},o(g){d(t.$$.fragment,g),d(o.$$.fragment,g),d(f.$$.fragment,g),_=!1},d(g){g&&(p(e),p(u),p(i)),w(t),w(o),w(f)}}}function Aa(l){let e,n,t;return n=new me({props:{$$slots:{default:[La]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Cr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ia(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Na(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pa(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ma(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fa(l){let e,n,t,r,o,s,u,i,a,f,c,_,g,y;return o=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Na]},$$scope:{ctx:l}}}),u=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Pa]},$$scope:{ctx:l}}}),_=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ma]},$$scope:{ctx:l}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=T(),t=S("p"),r=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(u.$$.fragment),i=k("."),a=T(),f=S("p"),c=k("License: "),b(_.$$.fragment),g=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(O,C){$(O,e,C),$(O,n,C),$(O,t,C),h(t,r),v(o,t,null),h(t,s),v(u,t,null),h(t,i),$(O,a,C),$(O,f,C),h(f,c),v(_,f,null),h(f,g),y=!0},p(O,C){const N={};C&65536&&(N.$$scope={dirty:C,ctx:O}),o.$set(N);const R={};C&65536&&(R.$$scope={dirty:C,ctx:O}),u.$set(R);const I={};C&65536&&(I.$$scope={dirty:C,ctx:O}),_.$set(I)},i(O){y||(m(o.$$.fragment,O),m(u.$$.fragment,O),m(_.$$.fragment,O),y=!0)},o(O){d(o.$$.fragment,O),d(u.$$.fragment,O),d(_.$$.fragment,O),y=!1},d(O){O&&(p(e),p(n),p(t),p(a),p(f)),w(o),w(u),w(_)}}}function Da(l){let e,n,t;return n=new me({props:{$$slots:{default:[Fa]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Tr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ea(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ra(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ba(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ja]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ra]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=S("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function za(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ba]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Or(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[4],limits:l[6]().map(Ya)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",n=T(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function qa(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=S("p"),n=k("There are "),t=S("b"),o=k(r),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){$(a,e,f),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&B(o,r),f&8192&&u!==(u=a[14]+"")&&B(i,u)},d(a){a&&p(e)}}}function Ha(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=S("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=S("b"),i=k(u),a=k(`
          cars`)},m(f,c){$(f,e,c),h(e,n),h(e,r),h(e,o),h(e,s),h(s,i),h(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(r,t),c&8200&&u!==(u=f[15]+"")&&B(i,u)},d(f){f&&p(e)}}}function Ga(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=S("p"),n=S("b"),r=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){$(f,e,c),h(e,n),h(n,r),h(n,o),h(e,s),h(e,i),h(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(r,t),c&8192&&u!==(u=f[14]+"")&&B(i,u)},d(f){f&&p(e)}}}function Ua(l){Sr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?Ga:o[3]=="average_cars_per_household"?Ha:qa}let t=n(l),r=t(l);return{c(){r.c(),e=Ee()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){Sr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function Wa(l){let e,n;return e=new fe({props:{$$slots:{default:[Ua,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Va(l){let e,n,t,r;const o=[H(xe),{sourceLayer:xe},{paint:{"fill-color":Te(["get",l[3]],l[6](),l[4]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Wa]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",l[5]);const u=[H(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&88?te(o,[f&0&&ae(H(xe)),f&0&&{sourceLayer:xe},f&88&&{paint:{"fill-color":Te(["get",a[3]],a[6](),a[4]),"fill-opacity":Z(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&8?te(u,[f&0&&ae(H(`${xe}-outline`)),f&0&&{sourceLayer:xe},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Xa(l){let e,n,t,r,o,s,u,i,a,f,c,_,g,y;function O(A){l[7](A)}let C={$$slots:{right:[Aa],default:[Sa]},$$scope:{ctx:l}};l[0]!==void 0&&(C.checked=l[0]),e=new le({props:C}),W.push(()=>V(e,"checked",O)),e.$on("change",l[8]);let N=l[3]=="percent_households_with_car"&&Cr(l);function R(A){l[9](A)}let I={$$slots:{right:[Da],default:[Ia]},$$scope:{ctx:l}};l[1]!==void 0&&(I.checked=l[1]),o=new le({props:I}),W.push(()=>V(o,"checked",R)),o.$on("change",l[10]);let P=l[3]=="average_cars_per_household"&&Tr(l);function L(A){l[11](A)}let M={$$slots:{right:[za],default:[Ea]},$$scope:{ctx:l}};l[2]!==void 0&&(M.checked=l[2]),a=new le({props:M}),W.push(()=>V(a,"checked",L)),a.$on("change",l[12]);let D=l[3]=="population_density"&&Or(l);return g=new ke({props:{url:`pmtiles://${he()}/v1/${xe}.pmtiles`,$$slots:{default:[Va]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),N&&N.c(),r=T(),b(o.$$.fragment),u=T(),P&&P.c(),i=T(),b(a.$$.fragment),c=T(),D&&D.c(),_=T(),b(g.$$.fragment)},m(A,j){v(e,A,j),$(A,t,j),N&&N.m(A,j),$(A,r,j),v(o,A,j),$(A,u,j),P&&P.m(A,j),$(A,i,j),v(a,A,j),$(A,c,j),D&&D.m(A,j),$(A,_,j),v(g,A,j),y=!0},p(A,[j]){const U={};j&65536&&(U.$$scope={dirty:j,ctx:A}),!n&&j&1&&(n=!0,U.checked=A[0],X(()=>n=!1)),e.$set(U),A[3]=="percent_households_with_car"?N?(N.p(A,j),j&8&&m(N,1)):(N=Cr(A),N.c(),m(N,1),N.m(r.parentNode,r)):N&&($e(),d(N,1,1,()=>{N=null}),pe());const q={};j&65536&&(q.$$scope={dirty:j,ctx:A}),!s&&j&2&&(s=!0,q.checked=A[1],X(()=>s=!1)),o.$set(q),A[3]=="average_cars_per_household"?P?(P.p(A,j),j&8&&m(P,1)):(P=Tr(A),P.c(),m(P,1),P.m(i.parentNode,i)):P&&($e(),d(P,1,1,()=>{P=null}),pe());const E={};j&65536&&(E.$$scope={dirty:j,ctx:A}),!f&&j&4&&(f=!0,E.checked=A[2],X(()=>f=!1)),a.$set(E),A[3]=="population_density"?D?(D.p(A,j),j&8&&m(D,1)):(D=Or(A),D.c(),m(D,1),D.m(_.parentNode,_)):D&&($e(),d(D,1,1,()=>{D=null}),pe());const F={};j&65544&&(F.$$scope={dirty:j,ctx:A}),g.$set(F)},i(A){y||(m(e.$$.fragment,A),m(N),m(o.$$.fragment,A),m(P),m(a.$$.fragment,A),m(D),m(g.$$.fragment,A),y=!0)},o(A){d(e.$$.fragment,A),d(N),d(o.$$.fragment,A),d(P),d(a.$$.fragment,A),d(D),d(g.$$.fragment,A),y=!1},d(A){A&&(p(t),p(r),p(u),p(i),p(c),p(_)),w(e,A),N&&N.d(A),w(o,A),P&&P.d(A),w(a,A),D&&D.d(A),w(g,A)}}}let xe="census_output_areas";const Ya=l=>l.toLocaleString();function Ja(l,e,n){let t=Q.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(C){let N=C.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${N}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${N}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(C){r=C,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function _(C){o=C,n(1,o)}const g=()=>{n(0,r=!1),n(2,s=!1)};function y(C){s=C,n(2,s)}const O=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,_,g,y,O]}class Ka extends J{constructor(e){super(),K(this,e,Ja,Xa,Y,{})}}function Qa(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Za(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Za]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=S("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of December 2022."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function ef(l){let e,n,t;return n=new me({props:{$$slots:{default:[xa]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function tf(l){let e,n=l[3].name+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function nf(l){let e,n;return e=new fe({props:{$$slots:{default:[tf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rf(l){let e,n,t,r;const o=[H(Ot),{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[nf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",of);const u=[H(`${Ot}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(Ot)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&ae(H(`${Ot}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function lf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[ef],default:[Qa]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new kt({props:{data:`${he()}/v1/${Ot}.geojson`,$$slots:{default:[rf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Ot="combined_authorities";function of(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function sf(l,e,n){let t=Q.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class af extends J{constructor(e){super(),K(this,e,sf,lf,Y,{})}}function ff(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uf(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[uf]},$$scope:{ctx:l}}}),o=new x({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[cf]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=S("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function pf(l){let e,n,t;return n=new me({props:{$$slots:{default:[$f]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Lr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mf(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,_=l[4].rank.toLocaleString()+"",g,y;return{c(){e=S("p"),t=k(n),r=k(` has an IMD score of
        `),o=S("b"),u=k(s),i=T(),a=S("p"),f=k("Rank: "),c=S("b"),g=k(_),y=k(`
        / 32,844 LSOAs`)},m(O,C){$(O,e,C),h(e,t),h(e,r),h(e,o),h(o,u),$(O,i,C),$(O,a,C),h(a,f),h(a,c),h(c,g),h(a,y)},p(O,C){C&16&&n!==(n=O[4].LSOA11CD+"")&&B(t,n),C&16&&s!==(s=O[4].score+"")&&B(u,s),C&16&&_!==(_=O[4].rank.toLocaleString()+"")&&B(g,_)},d(O){O&&(p(e),p(i),p(a))}}}function _f(l){let e,n;return e=new fe({props:{$$slots:{default:[mf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gf(l){let e,n,t,r;const o=[H(et),{sourceLayer:et},{paint:{"fill-color":Te(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[_f]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s});const u=[H(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(H(et)),f&0&&{sourceLayer:et},f&6&&{paint:{"fill-color":Te(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Z(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?te(u,[f&0&&ae(H(`${et}-outline`)),f&0&&{sourceLayer:et},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function df(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[pf],default:[ff]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Lr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${et}.pmtiles`,$$slots:{default:[gf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Lr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let et="imd";function hf(l,e,n){let t=Q.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class bf extends J{constructor(e){super(),K(this,e,hf,df,Y,{})}}function vf(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function wf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kf(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[wf]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=S("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of January 2024."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function yf(l){let e,n,t;return n=new me({props:{$$slots:{default:[kf]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Sf(l){let e,n=l[3].name+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Cf(l){let e,n;return e=new fe({props:{$$slots:{default:[Sf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Tf(l){let e,n,t,r;const o=[H(Lt),{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Cf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",Lf);const u=[H(`${Lt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(Lt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&ae(H(`${Lt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Of(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[yf],default:[vf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new kt({props:{data:`${he()}/v1/${Lt}.geojson`,$$slots:{default:[Tf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Lt="local_authority_districts";function Lf(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function Af(l,e,n){let t=Q.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class If extends J{constructor(e){super(),K(this,e,Af,Of,Y,{})}}function Nf(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Pf(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mf(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ff(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Df(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ef(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jf(l){let e,n,t,r,o,s,u,i,a,f,c,_,g,y,O,C,N,R,I,P,L,M;return t=new x({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Pf]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Mf]},$$scope:{ctx:l}}}),u=new x({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ff]},$$scope:{ctx:l}}}),g=new x({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Df]},$$scope:{ctx:l}}}),R=new x({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ef]},$$scope:{ctx:l}}}),L=new De({}),{c(){e=S("p"),n=k("LPAs may be a "),b(t.$$.fragment),r=k(", "),b(o.$$.fragment),s=k("y, or "),b(u.$$.fragment),i=k("."),a=T(),f=S("p"),c=S("strong"),_=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(g.$$.fragment),y=k(" to get more details."),O=T(),C=S("p"),N=k("Data from ONS Geography via "),b(R.$$.fragment),I=k(", as of November 2022."),P=T(),b(L.$$.fragment)},m(D,A){$(D,e,A),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),v(u,e,null),h(e,i),$(D,a,A),$(D,f,A),h(f,c),h(c,_),v(g,c,null),h(c,y),$(D,O,A),$(D,C,A),h(C,N),v(R,C,null),h(C,I),$(D,P,A),v(L,D,A),M=!0},p(D,A){const j={};A&16&&(j.$$scope={dirty:A,ctx:D}),t.$set(j);const U={};A&16&&(U.$$scope={dirty:A,ctx:D}),o.$set(U);const q={};A&16&&(q.$$scope={dirty:A,ctx:D}),u.$set(q);const E={};A&16&&(E.$$scope={dirty:A,ctx:D}),g.$set(E);const F={};A&16&&(F.$$scope={dirty:A,ctx:D}),R.$set(F)},i(D){M||(m(t.$$.fragment,D),m(o.$$.fragment,D),m(u.$$.fragment,D),m(g.$$.fragment,D),m(R.$$.fragment,D),m(L.$$.fragment,D),M=!0)},o(D){d(t.$$.fragment,D),d(o.$$.fragment,D),d(u.$$.fragment,D),d(g.$$.fragment,D),d(R.$$.fragment,D),d(L.$$.fragment,D),M=!1},d(D){D&&(p(e),p(a),p(f),p(O),p(C),p(P)),w(t),w(o),w(u),w(g),w(R),w(L,D)}}}function Rf(l){let e,n,t;return n=new me({props:{$$slots:{default:[jf]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Bf(l){let e,n=l[3].name+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function zf(l){let e,n;return e=new fe({props:{$$slots:{default:[Bf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qf(l){let e,n,t,r;const o=[H(tt),{sourceLayer:tt},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[zf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s});const u=[H(`${tt}-outline`),{sourceLayer:tt},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(tt)),f&0&&{sourceLayer:tt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&ae(H(`${tt}-outline`)),f&0&&{sourceLayer:tt},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Hf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Rf],default:[Nf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${tt}.pmtiles`,$$slots:{default:[qf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let tt="local_planning_authorities";function Gf(l,e,n){let t=Q.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Uf extends J{constructor(e){super(),K(this,e,Gf,Hf,Y,{})}}function Wf(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Vf(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xf(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Vf]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=S("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Yf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Xf]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Jf(l){let e,n=l[3].Name+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&B(t,n)},d(r){r&&p(e)}}}function Kf(l){let e,n;return e=new fe({props:{$$slots:{default:[Jf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qf(l){let e,n,t,r;const o=[H(nt),{sourceLayer:nt},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Kf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",xf);const u=[H(`${nt}-outline`),{sourceLayer:nt},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(nt)),f&0&&{sourceLayer:nt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&ae(H(`${nt}-outline`)),f&0&&{sourceLayer:nt},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Zf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Yf],default:[Wf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${nt}.pmtiles`,$$slots:{default:[Qf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let nt="parliamentary_constituencies";function xf(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function eu(l,e,n){let t=Q.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class tu extends J{constructor(e){super(),K(this,e,eu,Zf,Y,{})}}function nu(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ru(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lu(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[ru]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=S("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        gm
        `),o=S("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),h(e,o),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(i,f)}}}function ou(l){let e,n,t;return n=new me({props:{$$slots:{default:[lu]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Ar(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,_,g,y,O,C,N,R;function I(L){l[7](L)}let P={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return l[0]!==void 0&&(P.value=l[0]),e=new mt({props:P}),W.push(()=>V(e,"value",I)),{c(){b(e.$$.fragment),t=T(),r=S("p"),s=k(o),u=T(),i=S("div"),a=S("label"),f=k(`Opacity
      `),c=S("input"),_=T(),g=S("img"),G(c,"type","range"),G(c,"min","0"),G(c,"max","100"),an(g.src,y=l[5](l[0]))||G(g,"src",y),G(g,"width",150),G(g,"alt",O=`Legend for ${l[0]} layer`)},m(L,M){v(e,L,M),$(L,t,M),$(L,r,M),h(r,s),$(L,u,M),$(L,i,M),h(i,a),h(a,f),h(a,c),Je(c,l[2]),$(L,_,M),$(L,g,M),C=!0,N||(R=[ut(c,"change",l[8]),ut(c,"input",l[8])],N=!0)},p(L,M){const D={};!n&&M&1&&(n=!0,D.value=L[0],X(()=>n=!1)),e.$set(D),(!C||M&1)&&o!==(o=L[3](L[0])+"")&&B(s,o),M&4&&Je(c,L[2]),(!C||M&1&&!an(g.src,y=L[5](L[0])))&&G(g,"src",y),(!C||M&1&&O!==(O=`Legend for ${L[0]} layer`))&&G(g,"alt",O)},i(L){C||(m(e.$$.fragment,L),C=!0)},o(L){d(e.$$.fragment,L),C=!1},d(L){L&&(p(t),p(r),p(u),p(i),p(_),p(g)),w(e,L),N=!1,Ul(R)}}}function su(l){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Mo({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function iu(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={$$slots:{right:[ou],default:[nu]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[1]&&Ar(l);return o=new Xo({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[su]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=Ar(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const g={};c&1&&(g.tiles=[f[4](f[0])]),c&2054&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}function au(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let O=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${O}`}function f(y){let O=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${O}`}function c(y){r=y,n(1,r)}function _(y){s=y,n(0,s)}function g(){o=Yt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s])},[s,r,o,i,a,f,c,_,g]}class fu extends J{constructor(e){super(),K(this,e,au,iu,Y,{})}}function uu(l){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cu(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $u(l){let e,n,t,r,o,s,u,i,a;return o=new x({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[cu]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=S("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=T(),t=S("p"),r=k("Data from June 2019, produced by "),b(o.$$.fragment),s=k(". See there for methodology details"),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(i,f)}}}function pu(l){let e,n,t;return n=new me({props:{$$slots:{default:[$u]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Ir(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mu(l){let e,n=l[3].noiseclass+"",t,r,o=Nr(l[3].noiseclass)+"",s,u;return{c(){e=S("p"),t=k(n),r=k(" dB ("),s=k(o),u=k(")")},m(i,a){$(i,e,a),h(e,t),h(e,r),h(e,s),h(e,u)},p(i,a){a&8&&n!==(n=i[3].noiseclass+"")&&B(t,n),a&8&&o!==(o=Nr(i[3].noiseclass)+"")&&B(s,o)},d(i){i&&p(e)}}}function _u(l){let e,n;return e=new fe({props:{$$slots:{default:[mu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gu(l){let e,n;const t=[H(At),{sourceLayer:At},{paint:{"fill-color":ct(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][0],"65.0-69.9":l[1][1],"70.0-74.9":l[1][1],">=75.0":l[1][2]},"red"),"fill-opacity":Z(.5,.8)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[_u]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new He({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(At)),s&0&&{sourceLayer:At},s&2&&{paint:{"fill-color":ct(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":Z(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function du(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[pu],default:[uu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Ir(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${At}.pmtiles`,$$slots:{default:[gu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Ir(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const g={};c&17&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let At="road_noise";function Nr(l){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[l]}function hu(l,e,n){let t=[Q.sequential_low_to_high[0],Q.sequential_low_to_high[2],Q.sequential_low_to_high[4]],r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class bu extends J{constructor(e){super(),K(this,e,hu,du,Y,{})}}function vu(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function wu(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ku(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[wu]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=S("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function yu(l){let e,n,t;return n=new me({props:{$$slots:{default:[ku]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Su(l){let e,n=l[3].name+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Cu(l){let e,n;return e=new fe({props:{$$slots:{default:[Su,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Tu(l){let e,n,t,r;const o=[H(rt),{sourceLayer:rt},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Cu]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",Lu);const u=[H(`${rt}-outline`),{sourceLayer:rt},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(rt)),f&0&&{sourceLayer:rt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&ae(H(`${rt}-outline`)),f&0&&{sourceLayer:rt},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Ou(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[yu],default:[vu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${rt}.pmtiles`,$$slots:{default:[Tu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let rt="wards";function Lu(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Au(l,e,n){let t=Q.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Iu extends J{constructor(e){super(),K(this,e,Au,Ou,Y,{})}}function Nu(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pu(l){let e,n,t,r;return t=new x({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Nu]},$$scope:{ctx:l}}}),{c(){e=S("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&p(e),w(t)}}}class Ze extends J{constructor(e){super(),K(this,e,null,Pu,Y,{})}}function Mu(l){let e,n,t;return e=new Pe({props:{color:Q.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Fu(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Du(l){let e,n,t,r,o,s,u,i,a;return o=new x({props:{href:"https://gtfs.org",$$slots:{default:[Fu]},$$scope:{ctx:l}}}),i=new Ze({}),{c(){e=S("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=T(),t=S("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(i,f)}}}function Eu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Du]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ju(l){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ru(l){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bu(l){let e;function n(o,s){return o[2].has_bus_lane?Ru:ju}let t=n(l),r=t(l);return{c(){r.c(),e=Ee()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function zu(l){let e,n;return e=new fe({props:{$$slots:{default:[Bu,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qu(l){let e,n;const t=[H(It),{sourceLayer:It},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Q.bus_route_with_lane,Q.bus_route_without_lane],"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[zu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(It)),s&0&&{sourceLayer:It},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Hu(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Eu],default:[Mu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${It}.pmtiles`,$$slots:{default:[qu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let It="bus_routes";function Gu(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Uu extends J{constructor(e){super(),K(this,e,Gu,Hu,Y,{})}}function Pr(l){const e=ec(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function Mr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function Wu(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vu(l){let e,n,t,r,o,s,u,i;return u=new Ze({}),{c(){e=S("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=T(),t=S("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=T(),o=S("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=T(),b(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),v(u,a,f),i=!0},p:ne,i(a){i||(m(u.$$.fragment,a),i=!0)},o(a){d(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),w(u,a)}}}function Xu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Vu]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Fr(l){let e,n,t;return n=new Qe({props:{$$slots:{default:[Ju]},$$scope:{ctx:l}}}),{c(){e=S("div"),b(n.$$.fragment),Oe(e,"border","1px solid black"),Oe(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Yu(l){let e,n,t=l[9]+"",r,o,s;return e=new Pe({props:{color:l[10]}}),{c(){b(e.$$.fragment),n=T(),r=k(t),o=T()},m(u,i){v(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:ne,i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function Dr(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[Yu]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ju(l){let e,n,t=qe(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Dr(Mr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Ee()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=qe(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Mr(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Dr(a),r[i].c(),m(r[i],1),r[i].m(e.parentNode,e))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),bt(r,s)}}}function Ku(l){Pr(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,_,g=l[8]+"",y;return{c(){e=S("h2"),t=k(n),r=T(),o=S("p"),s=k("Direction: "),u=S("b"),a=T(),f=S("p"),c=k("Width: "),_=S("b"),y=k(g)},m(O,C){$(O,e,C),h(e,t),$(O,r,C),$(O,o,C),h(o,s),h(o,u),u.innerHTML=i,$(O,a,C),$(O,f,C),h(f,c),h(f,_),h(_,y)},p(O,C){Pr(O),C&32&&n!==(n=O[6]+"")&&B(t,n),C&32&&i!==(i=O[7]+"")&&(u.innerHTML=i),C&32&&g!==(g=O[8]+"")&&B(y,g)},d(O){O&&(p(e),p(r),p(o),p(a),p(f))}}}function Qu(l){let e,n;return e=new fe({props:{$$slots:{default:[Ku,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Zu(l){let e,n;const t=[H(Nt),{sourceLayer:Nt},{paint:{"line-color":ct(["get","kind"],{track:Q.cycle_paths.track,lane:Q.cycle_paths.lane,shared_use_segregated:Q.cycle_paths.shared_use_segregated,shared_use_unsegregated:Q.cycle_paths.shared_use_unsegregated},"red"),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Er(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[Qu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Le({props:r}),e.$on("click",tc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Er(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function xu(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Xu],default:[Wu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Fr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Nt}.pmtiles`,$$slots:{default:[Zu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&8192&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Fr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const g={};c&8195&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Nt="cycle_paths";function ec(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function tc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Er(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function nc(l,e,n){let t=[["track","Separated tracks",Q.cycle_paths.track],["lane","Unprotected lanes",Q.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Q.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Q.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class rc extends J{constructor(e){super(),K(this,e,nc,xu,Y,{})}}function lc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function oc(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sc(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[oc]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=S("p"),n=k("Data from the "),b(t.$$.fragment),r=k(", as of September 2021."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function ic(l){let e,n,t;return n=new me({props:{$$slots:{default:[sc]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ac(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function fc(l){let e,n;return e=new fe({props:{$$slots:{default:[ac,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function uc(l){let e,n;const t=[H(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[fc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(Pt)),s&0&&{sourceLayer:Pt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function cc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[ic],default:[lc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Pt}.pmtiles`,$$slots:{default:[uc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Pt="mrn";function $c(l,e,n){let t=Q.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class pc extends J{constructor(e){super(),K(this,e,$c,cc,Y,{})}}function mc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Strategic Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function _c(l){let e;return{c(){e=k(`OS Open Roads
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gc(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[_c]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=S("p"),n=k("Data from "),b(t.$$.fragment),r=k(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function dc(l){let e,n,t;return n=new me({props:{$$slots:{default:[gc]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function hc(l){let e,n=(l[3].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown SRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function bc(l){let e,n;return e=new fe({props:{$$slots:{default:[hc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vc(l){let e,n;const t=[H(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[bc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function wc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[dc],default:[mc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Mt}.pmtiles`,$$slots:{default:[vc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Mt="srn";function kc(l,e,n){let t=Q.srn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class yc extends J{constructor(e){super(),K(this,e,kc,wc,Y,{})}}function Sc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Cc(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tc(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Cc]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=S("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Oc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Tc]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function jr(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=S("li"),n=k("Description: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&B(o,r)},d(s){s&&p(e)}}}function Rr(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=S("li"),n=k("Is greenway: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&B(o,r)},d(s){s&&p(e)}}}function Br(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=S("li"),n=k("Route type: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&B(o,r)},d(s){s&&p(e)}}}function zr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=S("li"),n=k("Route number: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&B(o,r)},d(s){s&&p(e)}}}function qr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=S("li"),n=k("Route Category: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&B(o,r)},d(s){s&&p(e)}}}function Hr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=S("li"),n=k("Open Status: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&B(o,r)},d(s){s&&p(e)}}}function Gr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=S("li"),n=k("Surface: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&B(o,r)},d(s){s&&p(e)}}}function Ur(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=S("li"),n=k("Quality: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&B(o,r)},d(s){s&&p(e)}}}function Wr(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=S("li"),n=k("Road Class: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&B(o,r)},d(s){s&&p(e)}}}function Lc(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&jr(l),c=l[3].Greenway&&Rr(l),_=l[3].RouteType&&Br(l),g=l[3].RouteNo&&zr(l),y=l[3].RouteCat&&qr(l),O=l[3].OpenStatus&&Hr(l),C=l[3].Surface&&Gr(l),N=l[3].Quality&&Ur(l),R=l[3].RoadClass&&Wr(l);return{c(){e=S("ul"),f&&f.c(),n=T(),c&&c.c(),t=T(),_&&_.c(),r=T(),g&&g.c(),o=T(),y&&y.c(),s=T(),O&&O.c(),u=T(),C&&C.c(),i=T(),N&&N.c(),a=T(),R&&R.c()},m(I,P){$(I,e,P),f&&f.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),_&&_.m(e,null),h(e,r),g&&g.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),O&&O.m(e,null),h(e,u),C&&C.m(e,null),h(e,i),N&&N.m(e,null),h(e,a),R&&R.m(e,null)},p(I,P){I[3].Desc_?f?f.p(I,P):(f=jr(I),f.c(),f.m(e,n)):f&&(f.d(1),f=null),I[3].Greenway?c?c.p(I,P):(c=Rr(I),c.c(),c.m(e,t)):c&&(c.d(1),c=null),I[3].RouteType?_?_.p(I,P):(_=Br(I),_.c(),_.m(e,r)):_&&(_.d(1),_=null),I[3].RouteNo?g?g.p(I,P):(g=zr(I),g.c(),g.m(e,o)):g&&(g.d(1),g=null),I[3].RouteCat?y?y.p(I,P):(y=qr(I),y.c(),y.m(e,s)):y&&(y.d(1),y=null),I[3].OpenStatus?O?O.p(I,P):(O=Hr(I),O.c(),O.m(e,u)):O&&(O.d(1),O=null),I[3].Surface?C?C.p(I,P):(C=Gr(I),C.c(),C.m(e,i)):C&&(C.d(1),C=null),I[3].Quality?N?N.p(I,P):(N=Ur(I),N.c(),N.m(e,a)):N&&(N.d(1),N=null),I[3].RoadClass?R?R.p(I,P):(R=Wr(I),R.c(),R.m(e,null)):R&&(R.d(1),R=null)},d(I){I&&p(e),f&&f.d(),c&&c.d(),_&&_.d(),g&&g.d(),y&&y.d(),O&&O.d(),C&&C.d(),N&&N.d(),R&&R.d()}}}function Ac(l){let e,n;return e=new fe({props:{$$slots:{default:[Lc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ic(l){let e,n;const t=[H(Ft),{sourceLayer:Ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Ac]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(Ft)),s&0&&{sourceLayer:Ft},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Nc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Oc],default:[Sc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Ft}.pmtiles`,$$slots:{default:[Ic]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Ft="national_cycle_network";function Pc(l,e,n){let t=Q.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Mc extends J{constructor(e){super(),K(this,e,Pc,Nc,Y,{})}}function Fc(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Dc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ec(l){let e,n,t,r,o,s,u,i,a;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Dc]},$$scope:{ctx:l}}}),{c(){e=S("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=T(),t=S("p"),t.textContent="Data valid as of 1 January, 2024",r=T(),o=S("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),w(u)}}}function jc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ec]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Vr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Rc(l){let e,n,t,r=l[4].side+"",o,s,u,i,a,f=l[4].average+"",c,_,g,y,O,C,N=l[4].minimum+"",R,I;return{c(){e=S("p"),n=k("Side of the road: "),t=S("b"),o=k(r),s=T(),u=S("p"),i=k("Average width: "),a=S("b"),c=k(f),_=k(`
        meters`),g=T(),y=S("p"),O=k("Minimum width: "),C=S("b"),R=k(N),I=k(`
        meters`)},m(P,L){$(P,e,L),h(e,n),h(e,t),h(t,o),$(P,s,L),$(P,u,L),h(u,i),h(u,a),h(a,c),h(u,_),$(P,g,L),$(P,y,L),h(y,O),h(y,C),h(C,R),h(y,I)},p(P,L){L&16&&r!==(r=P[4].side+"")&&B(o,r),L&16&&f!==(f=P[4].average+"")&&B(c,f),L&16&&N!==(N=P[4].minimum+"")&&B(R,N)},d(P){P&&(p(e),p(s),p(u),p(g),p(y))}}}function Bc(l){let e,n;return e=new fe({props:{$$slots:{default:[Rc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zc(l){let e,n;const t=[H(Dt),{sourceLayer:Dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Te(["get","average"],l[2],l[1]),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Bc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(H(Dt)),s&0&&{sourceLayer:Dt},t[2],t[3],s&6&&{paint:{"line-color":Te(["get","average"],o[2],o[1]),"line-width":Be,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function qc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[jc],default:[Fc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Vr(l);return o=new ke({props:{url:`pmtiles://${cn()}/v1/${Dt}.pmtiles`,$$slots:{default:[zc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Vr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Dt="pavement_widths";function Hc(l,e,n){let t=Q.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Gc extends J{constructor(e){super(),K(this,e,Hc,qc,Y,{})}}function Uc(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wc(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vc(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xc(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new x({props:{href:"https://www.pct.bike",$$slots:{default:[Wc]},$$scope:{ctx:l}}}),a=new x({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Vc]},$$scope:{ctx:l}}}),{c(){e=S("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=T(),t=S("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=T(),o=S("p"),s=k("See "),b(u.$$.fragment),i=k(" and "),b(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(_,g){$(_,e,g),$(_,n,g),$(_,t,g),$(_,r,g),$(_,o,g),h(o,s),v(u,o,null),h(o,i),v(a,o,null),h(o,f),c=!0},p(_,g){const y={};g&1024&&(y.$$scope={dirty:g,ctx:_}),u.$set(y);const O={};g&1024&&(O.$$scope={dirty:g,ctx:_}),a.$set(O)},i(_){c||(m(u.$$.fragment,_),m(a.$$.fragment,_),c=!0)},o(_){d(u.$$.fragment,_),d(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(r),p(o)),w(u),w(a)}}}function Yc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Xc]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Xr(l){let e,n,t,r,o,s,u,i;e=new Ge({props:{colorScale:l[3],limits:l[4]}});function a(g){l[7](g)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new Wl({props:f}),W.push(()=>V(t,"value",a));function c(g){l[8](g)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(_.value=l[1]),s=new mt({props:_}),W.push(()=>V(s,"value",c)),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),o=T(),b(s.$$.fragment)},m(g,y){v(e,g,y),$(g,n,y),v(t,g,y),$(g,o,y),v(s,g,y),i=!0},p(g,y){const O={};!r&&y&1&&(r=!0,O.value=g[0],X(()=>r=!1)),t.$set(O);const C={};!u&&y&2&&(u=!0,C.value=g[1],X(()=>u=!1)),s.$set(C)},i(g){i||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(s.$$.fragment,g),i=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(s.$$.fragment,g),i=!1},d(g){g&&(p(n),p(o)),w(e,g),w(t,g),w(s,g)}}}function Jc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Vt(!1),t=Ee(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function Kc(l){let e,n;return e=new fe({props:{$$slots:{default:[Jc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qc(l){let e,n;const t=[H(ot),{sourceLayer:ot},{paint:{"line-color":Te(["get",l[1]],l[4],l[3]),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[2]&&l[0]==ot?"visible":"none"}}];let r={$$slots:{default:[Kc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(H(ot)),s&0&&{sourceLayer:ot},s&26&&{paint:{"line-color":Te(["get",o[1]],o[4],o[3]),"line-width":Be,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ot?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Zc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Vt(!1),t=Ee(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function xc(l){let e,n;return e=new fe({props:{$$slots:{default:[Zc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function e$(l){let e,n;const t=[H(pt),{sourceLayer:pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Te(["get",l[1]],l[4],l[3]),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[2]&&l[0]==pt?"visible":"none"}}];let r={$$slots:{default:[xc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(H(pt)),s&0&&{sourceLayer:pt},t[2],t[3],s&26&&{paint:{"line-color":Te(["get",o[1]],o[4],o[3]),"line-width":Be,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==pt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function t$(l){let e,n,t,r,o,s,u,i;function a(_){l[6](_)}let f={$$slots:{right:[Yc],default:[Uc]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),W.push(()=>V(e,"checked",a));let c=l[2]&&Xr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${ot}.pmtiles`,$$slots:{default:[Qc]},$$scope:{ctx:l}}}),u=new ke({props:{url:`pmtiles://${he()}/v1/${pt}.pmtiles`,$$slots:{default:[e$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),c&&c.c(),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment)},m(_,g){v(e,_,g),$(_,t,g),c&&c.m(_,g),$(_,r,g),v(o,_,g),$(_,s,g),v(u,_,g),i=!0},p(_,[g]){const y={};g&1024&&(y.$$scope={dirty:g,ctx:_}),!n&&g&4&&(n=!0,y.checked=_[2],X(()=>n=!1)),e.$set(y),_[2]?c?(c.p(_,g),g&4&&m(c,1)):(c=Xr(_),c.c(),m(c,1),c.m(r.parentNode,r)):c&&($e(),d(c,1,1,()=>{c=null}),pe());const O={};g&1031&&(O.$$scope={dirty:g,ctx:_}),o.$set(O);const C={};g&1031&&(C.$$scope={dirty:g,ctx:_}),u.$set(C)},i(_){i||(m(e.$$.fragment,_),m(c),m(o.$$.fragment,_),m(u.$$.fragment,_),i=!0)},o(_){d(e.$$.fragment,_),d(c),d(o.$$.fragment,_),d(u.$$.fragment,_),i=!1},d(_){_&&(p(t),p(r),p(s)),w(e,_),c&&c.d(_),w(o,_),w(u,_)}}}let ot="pct_commute",pt="pct_school";function n$(l,e,n){let t=Q.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=ot,s="baseline",u=!1;function i(_){let g=_.baseline,y=_.gov_target,O=_.go_dutch,C=`<h2>Trip purpose: ${o==ot?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)C+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${O.toLocaleString()}</b></p>`;else{let N=(y/g).toFixed(1),R=(O/g).toFixed(1);C+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${N}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${O.toLocaleString()} (<b>${R}x</b> of baseline)</p>`}return C}function a(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){s=_,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class r$ extends J{constructor(e){super(),K(this,e,n$,t$,Y,{})}}function l$(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function o$(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function s$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function i$(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new x({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[o$]},$$scope:{ctx:l}}}),f=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[s$]},$$scope:{ctx:l}}}),{c(){e=S("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=T(),s=S("p"),s.textContent="Data valid as of 1 September, 2023",u=T(),i=S("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),c=k(".")},m(g,y){$(g,e,y),h(e,n),v(t,e,null),h(e,r),$(g,o,y),$(g,s,y),$(g,u,y),$(g,i,y),h(i,a),v(f,i,null),h(i,c),_=!0},p(g,y){const O={};y&256&&(O.$$scope={dirty:y,ctx:g}),t.$set(O);const C={};y&256&&(C.$$scope={dirty:y,ctx:g}),f.$set(C)},i(g){_||(m(t.$$.fragment,g),m(f.$$.fragment,g),_=!0)},o(g){d(t.$$.fragment,g),d(f.$$.fragment,g),_=!1},d(g){g&&(p(e),p(o),p(s),p(u),p(i)),w(t),w(f)}}}function a$(l){let e,n,t;return n=new me({props:{$$slots:{default:[i$]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Yr(l){let e,n,t,r,o;e=new Ge({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new Wl({props:u}),W.push(()=>V(t,"value",s)),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],X(()=>r=!1)),t.$set(f)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function f$(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,_=l[4][l[7].highest_description]+"",g,y;return{c(){e=S("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=T(),u=S("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),g=k(_),y=k(")")},m(O,C){$(O,e,C),h(e,n),h(e,r),h(e,o),$(O,s,C),$(O,u,C),h(u,i),h(u,f),h(u,c),h(u,g),h(u,y)},p(O,C){C&128&&t!==(t=O[7].indicative_mph+"")&&B(r,t),C&128&&a!==(a=O[7].highest_mph+"")&&B(f,a),C&128&&_!==(_=O[4][O[7].highest_description]+"")&&B(g,_)},d(O){O&&(p(e),p(s),p(u))}}}function u$(l){let e,n;return e=new fe({props:{$$slots:{default:[f$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function c$(l){let e,n;const t=[H(Et),{sourceLayer:Et},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Te(["get",l[0]],l[3],l[2]),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[u$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&15?te(t,[s&0&&ae(H(Et)),s&0&&{sourceLayer:Et},t[2],t[3],s&13&&{paint:{"line-color":Te(["get",o[0]],o[3],o[2]),"line-width":Be,"line-opacity":Z(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function $$(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={$$slots:{right:[a$],default:[l$]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[1]&&Yr(l);return o=new ke({props:{url:`pmtiles://${cn()}/v1/${Et}.pmtiles`,$$slots:{default:[c$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=Yr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const g={};c&259&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Et="road_speeds";function p$(l,e,n){let t=Q.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class m$ extends J{constructor(e){super(),K(this,e,p$,$$,Y,{})}}function _$(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function g$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function d$(l){let e,n,t,r,o,s,u,i,a;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[g$]},$$scope:{ctx:l}}}),{c(){e=S("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=T(),t=S("p"),t.textContent="Data valid as of 1 September, 2023",r=T(),o=S("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),w(u)}}}function h$(l){let e,n,t;return n=new me({props:{$$slots:{default:[d$]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Jr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function b$(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",_,g;return{c(){e=S("p"),n=k("Average width: "),t=S("b"),o=k(r),s=k(`
        meters`),u=T(),i=S("p"),a=k("Minimum width: "),f=S("b"),_=k(c),g=k(`
        meters`)},m(y,O){$(y,e,O),h(e,n),h(e,t),h(t,o),h(e,s),$(y,u,O),$(y,i,O),h(i,a),h(i,f),h(f,_),h(i,g)},p(y,O){O&16&&r!==(r=y[4].average+"")&&B(o,r),O&16&&c!==(c=y[4].minimum+"")&&B(_,c)},d(y){y&&(p(e),p(u),p(i))}}}function v$(l){let e,n;return e=new fe({props:{$$slots:{default:[b$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function w$(l){let e,n;const t=[H(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Te(["get","average"],l[2],l[1]),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[v$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(H(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&6&&{paint:{"line-color":Te(["get","average"],o[2],o[1]),"line-width":Be,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function k$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[h$],default:[_$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Jr(l);return o=new ke({props:{url:`pmtiles://${cn()}/v1/${jt}.pmtiles`,$$slots:{default:[w$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Jr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let jt="road_widths";function y$(l,e,n){let t=Q.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class S$ extends J{constructor(e){super(),K(this,e,y$,k$,Y,{})}}function C$(l){let e,n,t;return e=new Pe({props:{color:Q.trams}}),{c(){b(e.$$.fragment),n=k(`
  Trams`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function T$(l){let e,n,t,r;return t=new Ze({}),{c(){e=S("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=T(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function O$(l){let e,n,t;return n=new me({props:{$$slots:{default:[T$]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function L$(l){let e,n;const t=[H(Rt),{sourceLayer:Rt},{paint:{"line-color":Q.trams,"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Le({props:r}),e.$on("click",I$),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(Rt)),s&0&&{sourceLayer:Rt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function A$(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[O$],default:[C$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Rt}.pmtiles`,$$slots:{default:[L$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Rt="trams";function I$(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function N$(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class P$ extends J{constructor(e){super(),K(this,e,N$,A$,Y,{})}}function M$(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function F$(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function D$(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[F$]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=S("p"),n=k("Data from the "),b(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=T(),s=S("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),$(f,o,c),$(f,s,c),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),w(t),w(i,f)}}}function E$(l){let e,n,t;return n=new me({props:{$$slots:{default:[D$]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Kr(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){e=S("p"),e.textContent="Peak hourly frequency:",n=T(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function j$(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,_,g,y,O,C=l[4].peak_description+"",N,R,I,P,L,M=l[4].total+"",D,A,j=l[4].total_description+"",U,q;return{c(){e=S("p"),n=k("Stop name: "),t=S("b"),o=k(r),s=T(),u=S("p"),i=k("Peak: "),a=S("b"),c=k(f),_=k(`
        buses during the busiest hour of any day`),g=T(),y=S("p"),O=k("The peak hour is "),N=k(C),R=T(),I=S("p"),P=k("Total buses per day: "),L=S("b"),D=k(M),A=k(`
        (for `),U=k(j),q=k(", the busiest day of the week)")},m(E,F){$(E,e,F),h(e,n),h(e,t),h(t,o),$(E,s,F),$(E,u,F),h(u,i),h(u,a),h(a,c),h(u,_),$(E,g,F),$(E,y,F),h(y,O),h(y,N),$(E,R,F),$(E,I,F),h(I,P),h(I,L),h(L,D),h(I,A),h(I,U),h(I,q)},p(E,F){F&16&&r!==(r=E[4].stop_name+"")&&B(o,r),F&16&&f!==(f=E[4].peak+"")&&B(c,f),F&16&&C!==(C=E[4].peak_description+"")&&B(N,C),F&16&&M!==(M=E[4].total+"")&&B(D,M),F&16&&j!==(j=E[4].total_description+"")&&B(U,j)},d(E){E&&(p(e),p(s),p(u),p(g),p(y),p(R),p(I))}}}function R$(l){let e,n;return e=new fe({props:{$$slots:{default:[j$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function B$(l){let e,n;const t=[H(Bt),{sourceLayer:Bt},{paint:{"circle-color":Te(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[R$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new $t({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(H(Bt)),s&0&&{sourceLayer:Bt},s&6&&{paint:{"circle-color":Te(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function z$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[E$],default:[M$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Kr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Bt}.pmtiles`,$$slots:{default:[B$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Kr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Bt="bus_stops";function q$(l,e,n){let t=Q.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class H$ extends J{constructor(e){super(),K(this,e,q$,z$,Y,{})}}function G$(l){let e,n,t;return{c(){e=S("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=ut(e,"change",l[5]),n=!0)},p:ne,d(r){r&&p(e),l[7](null),n=!1,t()}}}function Qr(l){let e,n;return e=new Qe({props:{small:!0,$$slots:{default:[W$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function U$(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Pe({props:{color:zt}}),{c(){b(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(u,i){v(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&B(r,t)},i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function W$(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[U$]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function V$(l){let e,n,t,r,o,s;e=new kn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[G$]},$$scope:{ctx:l}}}),t=new Vl({props:{errorMessage:l[3]}});let u=l[2]>0&&Qr(l);return{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),u&&u.c(),o=Ee()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&m(u,1)):(u=Qr(i),u.c(),m(u,1),u.m(o.parentNode,o)):u&&($e(),d(u,1,1,()=>{u=null}),pe())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(u),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(u),s=!1},d(i){i&&(p(n),p(r),p(o)),w(e,i),w(t,i),u&&u.d(i)}}}function X$(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,_,g,y,O=l[10].notes+"",C,N,R,I,P,L,M,D=l[10].id+"",A,j,U,q,E,F=(l[10].inspector??"???")+"",z,oe,se,ye=l[10].submission_time+"",de,Se,ie,Ne,Ce,be=l[10].scheme_reference+"",re,ce,ge,ve=l[10].current_design_stage+"",_e;return{c(){e=S("div"),n=S("h2"),r=k(t),o=T(),s=S("p"),u=S("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=T(),_=S("p"),g=S("u"),g.textContent="Notes",y=k(`
          : `),C=k(O),N=T(),R=S("hr"),I=T(),P=S("p"),L=k("Critical issue ID: "),M=S("b"),A=k(D),j=T(),U=S("p"),q=k("Submitted by "),E=S("b"),z=k(F),oe=k(`
          at
          `),se=S("b"),de=k(ye),Se=T(),ie=S("p"),Ne=k("For scheme "),Ce=S("b"),re=k(be),ce=k(`
          in stage
          `),ge=S("b"),_e=k(ve),Oe(e,"max-width","30vw")},m(Ie,Me){$(Ie,e,Me),h(e,n),h(n,r),h(e,o),h(e,s),h(s,u),h(s,i),h(s,f),h(e,c),h(e,_),h(_,g),h(_,y),h(_,C),h(e,N),h(e,R),h(e,I),h(e,P),h(P,L),h(P,M),h(M,A),h(e,j),h(e,U),h(U,q),h(U,E),h(E,z),h(U,oe),h(U,se),h(se,de),h(e,Se),h(e,ie),h(ie,Ne),h(ie,Ce),h(Ce,re),h(ie,ce),h(ie,ge),h(ge,_e)},p(Ie,Me){Me&1024&&t!==(t=Ie[10].critical_type+"")&&B(r,t),Me&1024&&a!==(a=Ie[10].location_description+"")&&B(f,a),Me&1024&&O!==(O=Ie[10].notes+"")&&B(C,O),Me&1024&&D!==(D=Ie[10].id+"")&&B(A,D),Me&1024&&F!==(F=(Ie[10].inspector??"???")+"")&&B(z,F),Me&1024&&ye!==(ye=Ie[10].submission_time+"")&&B(de,ye),Me&1024&&be!==(be=Ie[10].scheme_reference+"")&&B(re,be),Me&1024&&ve!==(ve=Ie[10].current_design_stage+"")&&B(_e,ve)},d(Ie){Ie&&p(e)}}}function Y$(l){let e,n;return e=new fe({props:{$$slots:{default:[X$,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function J$(l){let e,n,t,r,o,s;const u=[H("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":zt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let g=0;g<u.length;g+=1)i=ee(i,u[g]);e=new $t({props:i}),e.$on("click",l[6]);const a=[H("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let g=0;g<a.length;g+=1)f=ee(f,a[g]);t=new $n({props:f});const c=[H("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":zt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let _={$$slots:{default:[Y$]},$$scope:{ctx:l}};for(let g=0;g<c.length;g+=1)_=ee(_,c[g]);return o=new $t({props:_}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment)},m(g,y){v(e,g,y),$(g,n,y),v(t,g,y),$(g,r,y),v(o,g,y),s=!0},p(g,y){const O=y&2?te(u,[u[0],u[1],y&0&&{paint:{"circle-color":zt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:g[1]?"visible":"none"}},u[4]]):{};e.$set(O);const C=y&2?te(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:g[1]?"visible":"none"}}]):{};t.$set(C);const N=y&2?te(c,[c[0],c[1],c[2],c[3],y&0&&{paint:{"circle-color":zt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:g[1]?"visible":"none"}}]):{};y&2048&&(N.$$scope={dirty:y,ctx:g}),o.$set(N)},i(g){s||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(o.$$.fragment,g),s=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),s=!1},d(g){g&&(p(n),p(r)),w(e,g),w(t,g),w(o,g)}}}function K$(l){let e,n,t,r;return e=new ze({props:{label:"Critical Issues",$$slots:{default:[V$]},$$scope:{ctx:l}}}),t=new kt({props:{id:co,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[J$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let co="criticals",zt="red";function Q$(l,e,n){let t;Ae(l,Fn,g=>n(9,t=g));let r,o=!0,s=0,u="",i=bo();async function a(g){try{n(4,i=await ta(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}async function f(g){let y=await t.getSource(co).getClusterExpansionZoom(g.detail.features[0].properties.cluster_id);t.easeTo({center:g.detail.features[0].geometry.coordinates,zoom:y})}function c(g){W[g?"unshift":"push"](()=>{r=g,n(0,r)})}function _(g){o=g,n(1,o)}return[r,o,s,u,i,a,f,c,_]}class Z$ extends J{constructor(e){super(),K(this,e,Q$,K$,Y,{})}}function x$(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ep(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tp(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[ep]},$$scope:{ctx:l}}}),s=new Ze({}),{c(){e=S("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function np(l){let e,n,t;return n=new me({props:{$$slots:{default:[tp]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Zr(l){let e,n;return e=new En({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rp(l){let e,n=xr(l[3])+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=xr(r[3])+"")&&B(t,n)},d(r){r&&p(e)}}}function lp(l){let e,n;return e=new fe({props:{$$slots:{default:[rp,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function op(l){let e,n;const t=[H(qt),{sourceLayer:qt},{paint:{"circle-color":ct(["get","crossing"],{traffic_signals:Q.signalized_crossing},Q.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[lp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new $t({props:r}),e.$on("click",ip),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(qt)),s&0&&{sourceLayer:qt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function sp(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[np],default:[x$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Zr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${qt}.pmtiles`,$$slots:{default:[op]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Zr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const g={};c&17&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let qt="crossings";function xr(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function ip(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function ap(l,e,n){let t=!1,r=[["Signalized",Q.signalized_crossing],["Other",Q.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class fp extends J{constructor(e){super(),K(this,e,ap,sp,Y,{})}}function up(l){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cp(l){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $p(l){let e,n,t,r,o,s,u,i,a,f,c,_,g;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[cp]},$$scope:{ctx:l}}}),f=new De({}),_=new Ze({}),{c(){e=S("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=T(),t=S("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=T(),o=S("p"),s=k("This layer is built from "),b(u.$$.fragment),i=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=T(),b(f.$$.fragment),c=T(),b(_.$$.fragment)},m(y,O){$(y,e,O),$(y,n,O),$(y,t,O),$(y,r,O),$(y,o,O),h(o,s),v(u,o,null),h(o,i),$(y,a,O),v(f,y,O),$(y,c,O),v(_,y,O),g=!0},p(y,O){const C={};O&32&&(C.$$scope={dirty:O,ctx:y}),u.$set(C)},i(y){g||(m(u.$$.fragment,y),m(f.$$.fragment,y),m(_.$$.fragment,y),g=!0)},o(y){d(u.$$.fragment,y),d(f.$$.fragment,y),d(_.$$.fragment,y),g=!1},d(y){y&&(p(e),p(n),p(t),p(r),p(o),p(a),p(c)),w(u),w(f,y),w(_,y)}}}function pp(l){let e,n,t;return n=new me({props:{$$slots:{default:[$p]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function el(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mp(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=S("p"),n=k("Gradient: "),t=S("b"),o=k(r),s=k(`
        %`)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,i){i&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&B(o,r)},d(u){u&&p(e)}}}function _p(l){let e,n;return e=new fe({props:{$$slots:{default:[mp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gp(l){let e,n,t,r;const o=[H(lt),{sourceLayer:lt},{manageHoverState:!0},{paint:{"line-color":Te(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[_p]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Le({props:s});const u=[H(lt+"_arrows"),{sourceLayer:lt},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new $n({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(H(lt)),f&0&&{sourceLayer:lt},o[2],f&6&&{paint:{"line-color":Te(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Be,"line-opacity":Z(1,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?te(u,[f&0&&ae(H(lt+"_arrows")),f&0&&{sourceLayer:lt},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function dp(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[pp],default:[up]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&el(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${lt}.pmtiles`,$$slots:{default:[gp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=el(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let lt="gradient";function hp(l,e,n){let t=Q.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class bp extends J{constructor(e){super(),K(this,e,hp,dp,Y,{})}}function vp(l){let e,n,t;return{c(){e=S("img"),t=k(`
  Cycle parking`),an(e.src,n=vo)||G(e,"src",n),G(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function wp(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kp(l){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yp(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[wp]},$$scope:{ctx:l}}}),i=new x({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[kp]},$$scope:{ctx:l}}}),f=new Ze({}),{c(){e=S("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=T(),s=S("p"),u=k("Icon from "),b(i.$$.fragment),a=T(),b(f.$$.fragment)},m(_,g){$(_,e,g),h(e,n),v(t,e,null),h(e,r),$(_,o,g),$(_,s,g),h(s,u),v(i,s,null),$(_,a,g),v(f,_,g),c=!0},p(_,g){const y={};g&8&&(y.$$scope={dirty:g,ctx:_}),t.$set(y);const O={};g&8&&(O.$$scope={dirty:g,ctx:_}),i.$set(O)},i(_){c||(m(t.$$.fragment,_),m(i.$$.fragment,_),m(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(i.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(o),p(s),p(a)),w(t),w(i),w(f,_)}}}function Sp(l){let e,n,t;return n=new me({props:{$$slots:{default:[yp]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Cp(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=S("p"),n=k("Capacity: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&B(o,r)},d(s){s&&p(e)}}}function Tp(l){let e,n;return e=new fe({props:{$$slots:{default:[Cp,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Op(l){let e,n;const t=[H(Ht),{sourceLayer:Ht},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Tp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new $n({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(Ht)),s&0&&{sourceLayer:Ht},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Lp(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Sp],default:[vp]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Ht}.pmtiles`,$$slots:{default:[Op]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Ht="cycle_parking";function Ap(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Ip extends J{constructor(e){super(),K(this,e,Ap,Lp,Y,{})}}function Np(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pp(l){let e,n,t,r;return t=new Ze({}),{c(){e=S("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=T(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function Mp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Pp]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function tl(l){let e,n,t;return n=new Qe({props:{$$slots:{default:[jp]},$$scope:{ctx:l}}}),{c(){e=S("div"),b(n.$$.fragment),Oe(e,"border","1px solid black"),Oe(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Fp(l){let e,n,t;return e=new Pe({props:{color:Q.education.schools}}),{c(){b(e.$$.fragment),n=k(`
        Schools`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Dp(l){let e,n,t;return e=new Pe({props:{color:Q.education.colleges}}),{c(){b(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Ep(l){let e,n,t;return e=new Pe({props:{color:Q.education.universities}}),{c(){b(e.$$.fragment),n=k(`
        Universities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function jp(l){let e,n,t,r,o,s,u,i,a;function f(C){l[3](C)}let c={$$slots:{default:[Fp]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),W.push(()=>V(e,"checked",f));function _(C){l[4](C)}let g={$$slots:{default:[Dp]},$$scope:{ctx:l}};l[1].college!==void 0&&(g.checked=l[1].college),r=new le({props:g}),W.push(()=>V(r,"checked",_));function y(C){l[5](C)}let O={$$slots:{default:[Ep]},$$scope:{ctx:l}};return l[1].university!==void 0&&(O.checked=l[1].university),u=new le({props:O}),W.push(()=>V(u,"checked",y)),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment),s=T(),b(u.$$.fragment)},m(C,N){v(e,C,N),$(C,t,N),v(r,C,N),$(C,s,N),v(u,C,N),a=!0},p(C,N){const R={};N&128&&(R.$$scope={dirty:N,ctx:C}),!n&&N&2&&(n=!0,R.checked=C[1].school,X(()=>n=!1)),e.$set(R);const I={};N&128&&(I.$$scope={dirty:N,ctx:C}),!o&&N&2&&(o=!0,I.checked=C[1].college,X(()=>o=!1)),r.$set(I);const P={};N&128&&(P.$$scope={dirty:N,ctx:C}),!i&&N&2&&(i=!0,P.checked=C[1].university,X(()=>i=!1)),u.$set(P)},i(C){a||(m(e.$$.fragment,C),m(r.$$.fragment,C),m(u.$$.fragment,C),a=!0)},o(C){d(e.$$.fragment,C),d(r.$$.fragment,C),d(u.$$.fragment,C),a=!1},d(C){C&&(p(t),p(s)),w(e,C),w(r,C),w(u,C)}}}function Rp(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&B(t,n)},d(r){r&&p(e)}}}function Bp(l){let e,n;return e=new fe({props:{$$slots:{default:[Rp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zp(l){let e,n;const t=[H(Gt),{sourceLayer:Gt},{paint:{"fill-color":ct(["get","type"],{school:Q.education.schools,college:Q.education.colleges,university:Q.education.universities},"grey"),"fill-opacity":Z(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:nl(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Bp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new He({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(Gt)),s&0&&{sourceLayer:Gt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:nl(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function qp(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[Mp],default:[Np]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&tl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Gt}.pmtiles`,$$slots:{default:[zp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&128&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=tl(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const g={};c&131&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Gt="education";function nl(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function Hp(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class Gp extends J{constructor(e){super(),K(this,e,Hp,qp,Y,{})}}function Up(l){let e,n,t,r;return e=new Pe({props:{color:l[4]}}),{c(){b(e.$$.fragment),n=T(),t=k(l[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&B(t,o[2])},i(o){r||(m(e.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function Wp(l){let e;const n=l[5].default,t=Qt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&Zt(t,n,r,r[7],e?en(n,r[7],o,null):xt(r[7]),null)},i(r){e||(m(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function Vp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Wp]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Xp(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&B(t,n)},d(r){r&&p(e)}}}function Yp(l){let e,n;return e=new fe({props:{$$slots:{default:[Xp,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jp(l){let e,n;const t=[H(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":Z(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Yp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new He({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&25?te(t,[s&1&&ae(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Z(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Kp(l){let e,n,t,r,o;function s(i){l[6](i)}let u={$$slots:{right:[Vp],default:[Up]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${l[0]}.pmtiles`,$$slots:{default:[Jp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],X(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${he()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function Qp(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=Q[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class $o extends J{constructor(e){super(),K(this,e,Qp,Kp,Y,{name:0,singularNoun:1,pluralNoun:2})}}function Zp(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xp(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Zp]},$$scope:{ctx:l}}}),s=new Ze({}),{c(){e=S("p"),n=k("This shows "),b(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function em(l){let e,n;return e=new $o({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[xp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class tm extends J{constructor(e){super(),K(this,e,null,em,Y,{})}}function nm(l){let e,n,t;return{c(){e=S("img"),t=k(`
  Railway Stations`),an(e.src,n=wo)||G(e,"src",n),G(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function rm(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lm(l){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function om(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[rm]},$$scope:{ctx:l}}}),i=new x({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[lm]},$$scope:{ctx:l}}}),c=new Ze({}),{c(){e=S("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=T(),s=S("p"),u=k("Icon from "),b(i.$$.fragment),a=k(". (Note that not all stations shown are National Rail.)"),f=T(),b(c.$$.fragment)},m(g,y){$(g,e,y),h(e,n),v(t,e,null),h(e,r),$(g,o,y),$(g,s,y),h(s,u),v(i,s,null),h(s,a),$(g,f,y),v(c,g,y),_=!0},p(g,y){const O={};y&8&&(O.$$scope={dirty:y,ctx:g}),t.$set(O);const C={};y&8&&(C.$$scope={dirty:y,ctx:g}),i.$set(C)},i(g){_||(m(t.$$.fragment,g),m(i.$$.fragment,g),m(c.$$.fragment,g),_=!0)},o(g){d(t.$$.fragment,g),d(i.$$.fragment,g),d(c.$$.fragment,g),_=!1},d(g){g&&(p(e),p(o),p(s),p(f)),w(t),w(i),w(c,g)}}}function sm(l){let e,n,t;return n=new me({props:{$$slots:{default:[om]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function im(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&B(t,n)},d(r){r&&p(e)}}}function am(l){let e,n;return e=new fe({props:{$$slots:{default:[im,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function fm(l){let e,n;const t=[H(Pn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[am]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new $n({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(Pn)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function um(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[sm],default:[nm]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new kt({props:{data:`${he()}/v1/${Pn}.geojson`,$$slots:{default:[fm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Pn="railway_stations";function cm(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class $m extends J{constructor(e){super(),K(this,e,cm,um,Y,{})}}function pm(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mm(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _m(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[pm]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[mm]},$$scope:{ctx:l}}}),i=new Ze({}),{c(){e=S("p"),n=k("This shows "),b(t.$$.fragment),r=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function gm(l){let e,n;return e=new $o({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[_m]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class dm extends J{constructor(e){super(),K(this,e,null,gm,Y,{})}}function hm(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bm(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vm(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wm(l){let e,n,t,r,o,s,u,i,a,f,c,_,g,y,O,C,N,R,I,P,L,M,D;return t=new x({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[bm]},$$scope:{ctx:l}}}),N=new x({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[vm]},$$scope:{ctx:l}}}),M=new De({}),{c(){e=S("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=T(),s=S("ul"),u=S("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=T(),a=S("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=T(),c=S("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,_=T(),g=S("li"),g.textContent='The "pedestrians" category also include mobility scooters',y=T(),O=S("li"),C=k("All limitations "),b(N.$$.fragment),R=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),I=T(),P=S("p"),P.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=T(),b(M.$$.fragment)},m(A,j){$(A,e,j),h(e,n),v(t,e,null),h(e,r),$(A,o,j),$(A,s,j),h(s,u),h(s,i),h(s,a),h(s,f),h(s,c),h(s,_),h(s,g),h(s,y),h(s,O),h(O,C),v(N,O,null),h(O,R),$(A,I,j),$(A,P,j),$(A,L,j),v(M,A,j),D=!0},p(A,j){const U={};j&16777216&&(U.$$scope={dirty:j,ctx:A}),t.$set(U);const q={};j&16777216&&(q.$$scope={dirty:j,ctx:A}),N.$set(q)},i(A){D||(m(t.$$.fragment,A),m(N.$$.fragment,A),m(M.$$.fragment,A),D=!0)},o(A){d(t.$$.fragment,A),d(N.$$.fragment,A),d(M.$$.fragment,A),D=!1},d(A){A&&(p(e),p(o),p(s),p(I),p(P),p(L)),w(t),w(N),w(M,A)}}}function km(l){let e,n,t;return n=new me({props:{$$slots:{default:[wm]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function rl(l){let e,n,t,r,o,s,u,i,a,f,c,_,g;return n=new Qe({props:{small:!0,$$slots:{default:[Om]},$$scope:{ctx:l}}}),f=new En({props:{rows:l[14]}}),{c(){e=S("div"),b(n.$$.fragment),t=T(),r=S("div"),o=k(`Filter years:
      `),s=S("input"),u=k(`
      -
      `),i=S("input"),a=T(),b(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),Oe(e,"border","1px solid black"),Oe(e,"padding","8px")},m(y,O){$(y,e,O),v(n,e,null),h(e,t),h(e,r),h(r,o),h(r,s),Je(s,l[4]),h(r,u),h(r,i),Je(i,l[5]),h(e,a),v(f,e,null),c=!0,_||(g=[ut(s,"input",l[20]),ut(i,"input",l[21])],_=!0)},p(y,O){const C={};O&16777231&&(C.$$scope={dirty:O,ctx:y}),n.$set(C),O&16&&Yt(s.value)!==y[4]&&Je(s,y[4]),O&32&&Yt(i.value)!==y[5]&&Je(i,y[5])},i(y){c||(m(n.$$.fragment,y),m(f.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(f.$$.fragment,y),c=!1},d(y){y&&p(e),w(n),w(f),_=!1,Ul(g)}}}function ym(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sm(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cm(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tm(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Om(l){let e,n,t,r,o,s,u,i,a,f,c,_;function g(L){l[16](L)}let y={$$slots:{default:[ym]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new le({props:y}),W.push(()=>V(e,"checked",g));function O(L){l[17](L)}let C={$$slots:{default:[Sm]},$$scope:{ctx:l}};l[1]!==void 0&&(C.checked=l[1]),r=new le({props:C}),W.push(()=>V(r,"checked",O));function N(L){l[18](L)}let R={$$slots:{default:[Cm]},$$scope:{ctx:l}};l[2]!==void 0&&(R.checked=l[2]),u=new le({props:R}),W.push(()=>V(u,"checked",N));function I(L){l[19](L)}let P={$$slots:{default:[Tm]},$$scope:{ctx:l}};return l[3]!==void 0&&(P.checked=l[3]),f=new le({props:P}),W.push(()=>V(f,"checked",I)),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment),s=T(),b(u.$$.fragment),a=T(),b(f.$$.fragment)},m(L,M){v(e,L,M),$(L,t,M),v(r,L,M),$(L,s,M),v(u,L,M),$(L,a,M),v(f,L,M),_=!0},p(L,M){const D={};M&16777216&&(D.$$scope={dirty:M,ctx:L}),!n&&M&1&&(n=!0,D.checked=L[0],X(()=>n=!1)),e.$set(D);const A={};M&16777216&&(A.$$scope={dirty:M,ctx:L}),!o&&M&2&&(o=!0,A.checked=L[1],X(()=>o=!1)),r.$set(A);const j={};M&16777216&&(j.$$scope={dirty:M,ctx:L}),!i&&M&4&&(i=!0,j.checked=L[2],X(()=>i=!1)),u.$set(j);const U={};M&16777216&&(U.$$scope={dirty:M,ctx:L}),!c&&M&8&&(c=!0,U.checked=L[3],X(()=>c=!1)),f.$set(U)},i(L){_||(m(e.$$.fragment,L),m(r.$$.fragment,L),m(u.$$.fragment,L),m(f.$$.fragment,L),_=!0)},o(L){d(e.$$.fragment,L),d(r.$$.fragment,L),d(u.$$.fragment,L),d(f.$$.fragment,L),_=!1},d(L){L&&(p(t),p(s),p(a)),w(e,L),w(r,L),w(u,L),w(f,L)}}}function ll(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=S("p"),n=k("Pedestrian location: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&B(o,r)},d(s){s&&p(e)}}}function ol(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=S("p"),n=k("Pedestrian movement: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&B(o,r)},d(s){s&&p(e)}}}function Lm(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,_,g,y,O,C=sl(l[23])+"",N,R,I,P,L,M=l[23].pedestrian_location&&ll(l),D=l[23].pedestrian_movement&&ol(l);return{c(){e=S("p"),n=k("Year: "),t=S("b"),o=k(r),s=T(),u=S("p"),i=k("Severity: "),a=S("b"),c=k(f),_=T(),g=S("p"),y=k("Casualties: "),O=S("b"),N=k(C),R=T(),M&&M.c(),I=T(),D&&D.c(),P=T(),L=S("p"),L.textContent="Click to open full report in CycleStreets"},m(A,j){$(A,e,j),h(e,n),h(e,t),h(t,o),$(A,s,j),$(A,u,j),h(u,i),h(u,a),h(a,c),$(A,_,j),$(A,g,j),h(g,y),h(g,O),h(O,N),$(A,R,j),M&&M.m(A,j),$(A,I,j),D&&D.m(A,j),$(A,P,j),$(A,L,j)},p(A,j){j&8388608&&r!==(r=A[23].year+"")&&B(o,r),j&8388608&&f!==(f=A[10][A[23].severity]+"")&&B(c,f),j&8388608&&C!==(C=sl(A[23])+"")&&B(N,C),A[23].pedestrian_location?M?M.p(A,j):(M=ll(A),M.c(),M.m(I.parentNode,I)):M&&(M.d(1),M=null),A[23].pedestrian_movement?D?D.p(A,j):(D=ol(A),D.c(),D.m(P.parentNode,P)):D&&(D.d(1),D=null)},d(A){A&&(p(e),p(s),p(u),p(_),p(g),p(R),p(I),p(P),p(L)),M&&M.d(A),D&&D.d(A)}}}function Am(l){let e,n;return e=new fe({props:{$$slots:{default:[Lm,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Im(l){let e,n;const t=[H(Ut),{sourceLayer:Ut},{paint:{"circle-color":Te(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Am]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new $t({props:r}),e.$on("click",Pm),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&14528?te(t,[s&0&&ae(H(Ut)),s&0&&{sourceLayer:Ut},s&14336&&{paint:{"circle-color":Te(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Nm(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={$$slots:{right:[km],default:[hm]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[6]&&rl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Ut}.pmtiles`,$$slots:{default:[Im]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16777216&&(_.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,_.checked=f[6],X(()=>n=!1)),e.$set(_),f[6]?a?(a.p(f,c),c&64&&m(a,1)):(a=rl(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const g={};c&16777408&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Ut="stats19";function sl(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function Pm(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function Mm(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(U,q,E,F,z,oe){let se=["any"];return o&&se.push(["get","pedestrian"]),s&&se.push(["get","cyclist"]),u&&se.push(["get","horse_rider"]),i&&se.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],se]}let _={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},g={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},O=Q.sequential_low_to_high[4],C=Q.sequential_low_to_high[2],N=Q.sequential_low_to_high[0],R=[["Fatal",O],["Serious",C],["Slight",N]];function I(U){r=U,n(6,r)}function P(U){o=U,n(0,o)}function L(U){s=U,n(1,s)}function M(U){u=U,n(2,u)}function D(U){i=U,n(3,i)}function A(){a=Yt(this.value),n(4,a)}function j(){f=Yt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,_,g,y,O,C,N,R,I,P,L,M,D,A,j]}class Fm extends J{constructor(e){super(),K(this,e,Mm,Nm,Y,{})}}function Dm(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Em(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jm(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rm(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new x({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Em]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[jm]},$$scope:{ctx:l}}}),f=new De({}),{c(){e=S("p"),n=k("AADF (annual average daily flow) data from "),b(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=T(),i=S("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=T(),b(f.$$.fragment)},m(_,g){$(_,e,g),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(_,u,g),$(_,i,g),$(_,a,g),v(f,_,g),c=!0},p(_,g){const y={};g&64&&(y.$$scope={dirty:g,ctx:_}),t.$set(y);const O={};g&64&&(O.$$scope={dirty:g,ctx:_}),o.$set(O)},i(_){c||(m(t.$$.fragment,_),m(o.$$.fragment,_),m(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(u),p(i),p(a)),w(t),w(o),w(f,_)}}}function Bm(l){let e,n,t;return n=new me({props:{$$slots:{default:[Rm]},$$scope:{ctx:l}}}),{c(){e=S("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function il(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[3]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zm(l){let e,n=l[5].location+"",t,r,o,s,u=l[5].year+"",i,a,f,c=l[5].motor_vehicles.toLocaleString()+"",_,g,y,O,C=l[5].year+"",N,R,I,P=l[5].pedal_cycles.toLocaleString()+"",L,M,D,A,j,U=l[5].method+"",q;return{c(){e=S("h2"),t=k(n),r=T(),o=S("p"),s=k("Total motor vehicles ("),i=k(u),a=k(` AADF):
        `),f=S("b"),_=k(c),g=T(),y=S("p"),O=k("Total pedal cycles ("),N=k(C),R=k(` AADF):
        `),I=S("b"),L=k(P),M=T(),D=S("p"),A=k("Count method: "),j=S("b"),q=k(U)},m(E,F){$(E,e,F),h(e,t),$(E,r,F),$(E,o,F),h(o,s),h(o,i),h(o,a),h(o,f),h(f,_),$(E,g,F),$(E,y,F),h(y,O),h(y,N),h(y,R),h(y,I),h(I,L),$(E,M,F),$(E,D,F),h(D,A),h(D,j),h(j,q)},p(E,F){F&32&&n!==(n=E[5].location+"")&&B(t,n),F&32&&u!==(u=E[5].year+"")&&B(i,u),F&32&&c!==(c=E[5].motor_vehicles.toLocaleString()+"")&&B(_,c),F&32&&C!==(C=E[5].year+"")&&B(N,C),F&32&&P!==(P=E[5].pedal_cycles.toLocaleString()+"")&&B(L,P),F&32&&U!==(U=E[5].method+"")&&B(q,U)},d(E){E&&(p(e),p(r),p(o),p(g),p(y),p(M),p(D))}}}function qm(l){let e,n;return e=new fe({props:{$$slots:{default:[zm,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hm(l){let e,n;const t=[H(Wt),{sourceLayer:Wt},{paint:{"circle-color":Te(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[qm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new $t({props:r}),e.$on("click",Um),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(H(Wt)),s&0&&{sourceLayer:Wt},s&6&&{paint:{"circle-color":Te(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Gm(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={$$slots:{right:[Bm],default:[Dm]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&il(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Wt}.pmtiles`,$$slots:{default:[Hm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=il(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const g={};c&65&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Wt="vehicle_counts";function Um(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function Wm(l,e,n){let t=Q.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class Vm extends J{constructor(e){super(),K(this,e,Wm,Gm,Y,{})}}function Xm(l){let e,n,t,r,o,s,u,i;return e=new Gp({}),t=new tm({}),o=new dm({}),u=new $m({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),$(a,r,f),v(o,a,f),$(a,s,f),v(u,a,f),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),w(e,a),w(t,a),w(o,a),w(u,a)}}}function Ym(l){let e,n;return e=new Qe({props:{small:!0,$$slots:{default:[Xm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jm(l){let e,n,t,r,o,s,u,i,a,f,c,_;return e=new rc({}),t=new Mc({}),o=new pc({}),u=new yc({}),a=new Ip({}),c=new fp({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),b(a.$$.fragment),f=T(),b(c.$$.fragment)},m(g,y){v(e,g,y),$(g,n,y),v(t,g,y),$(g,r,y),v(o,g,y),$(g,s,y),v(u,g,y),$(g,i,y),v(a,g,y),$(g,f,y),v(c,g,y),_=!0},i(g){_||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(o.$$.fragment,g),m(u.$$.fragment,g),m(a.$$.fragment,g),m(c.$$.fragment,g),_=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),d(u.$$.fragment,g),d(a.$$.fragment,g),d(c.$$.fragment,g),_=!1},d(g){g&&(p(n),p(r),p(s),p(i),p(f)),w(e,g),w(t,g),w(o,g),w(u,g),w(a,g),w(c,g)}}}function Km(l){let e,n;return e=new Qe({props:{small:!0,$$slots:{default:[Jm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qm(l){let e,n,t,r,o,s;return e=new Uu({}),t=new P$({}),o=new H$({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment)},m(u,i){v(e,u,i),$(u,n,i),v(t,u,i),$(u,r,i),v(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function Zm(l){let e,n,t,r,o,s,u,i,a,f;return e=new tu({}),t=new Iu({}),o=new af({}),u=new If({}),a=new Uf({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),b(a.$$.fragment)},m(c,_){v(e,c,_),$(c,n,_),v(t,c,_),$(c,r,_),v(o,c,_),$(c,s,_),v(u,c,_),$(c,i,_),v(a,c,_),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(u,c),w(a,c)}}}function xm(l){let e,n;return e=new Qe({props:{small:!0,$$slots:{default:[Zm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function e_(l){let e,n,t,r;return e=new Ka({}),t=new bf({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function t_(l){let e,n;return e=new Qe({props:{small:!0,$$slots:{default:[e_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function n_(l){let e,n,t,r,o,s;return e=new S$({}),t=new Gc({}),o=new m$({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment)},m(u,i){v(e,u,i),$(u,n,i),v(t,u,i),$(u,r,i),v(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function r_(l){let e,n,t,r,o,s,u,i,a=yn()=="Private (development)",f,c,_,g,y;e=new Vm({}),t=new Fm({}),o=new r$({}),u=new bp({});let O=a&&n_();return c=new fu({}),g=new bu({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),O&&O.c(),f=T(),b(c.$$.fragment),_=T(),b(g.$$.fragment)},m(C,N){v(e,C,N),$(C,n,N),v(t,C,N),$(C,r,N),v(o,C,N),$(C,s,N),v(u,C,N),$(C,i,N),O&&O.m(C,N),$(C,f,N),v(c,C,N),$(C,_,N),v(g,C,N),y=!0},p:ne,i(C){y||(m(e.$$.fragment,C),m(t.$$.fragment,C),m(o.$$.fragment,C),m(u.$$.fragment,C),m(O),m(c.$$.fragment,C),m(g.$$.fragment,C),y=!0)},o(C){d(e.$$.fragment,C),d(t.$$.fragment,C),d(o.$$.fragment,C),d(u.$$.fragment,C),d(O),d(c.$$.fragment,C),d(g.$$.fragment,C),y=!1},d(C){C&&(p(n),p(r),p(s),p(i),p(f),p(_)),w(e,C),w(t,C),w(o,C),w(u,C),O&&O.d(C),w(c,C),w(g,C)}}}function l_(l){let e,n;return e=new Qe({props:{small:!0,$$slots:{default:[r_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function o_(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new Ao({props:u}),W.push(()=>V(e,"enabled",s)),r=new Do({}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],X(()=>n=!1)),e.$set(f)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function s_(l){let e,n,t,r,o,s,u,i,a,f,c,_,g,y,O,C,N,R;return e=new Z$({}),t=new ze({props:{label:"Trip generators",$$slots:{default:[Ym]},$$scope:{ctx:l}}}),o=new ze({props:{label:"Existing infrastructure",$$slots:{default:[Km]},$$scope:{ctx:l}}}),u=new ze({props:{label:"Public transit",$$slots:{default:[Qm]},$$scope:{ctx:l}}}),a=new ze({props:{label:"Boundaries",$$slots:{default:[xm]},$$scope:{ctx:l}}}),c=new ze({props:{label:"Census",$$slots:{default:[t_]},$$scope:{ctx:l}}}),g=new ze({props:{label:"Other",$$slots:{default:[l_]},$$scope:{ctx:l}}}),O=new ze({props:{label:"Tools",$$slots:{default:[o_]},$$scope:{ctx:l}}}),N=new Lo({props:{disabled:!l[1]}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),b(a.$$.fragment),f=T(),b(c.$$.fragment),_=T(),b(g.$$.fragment),y=T(),b(O.$$.fragment),C=T(),b(N.$$.fragment)},m(I,P){v(e,I,P),$(I,n,P),v(t,I,P),$(I,r,P),v(o,I,P),$(I,s,P),v(u,I,P),$(I,i,P),v(a,I,P),$(I,f,P),v(c,I,P),$(I,_,P),v(g,I,P),$(I,y,P),v(O,I,P),$(I,C,P),v(N,I,P),R=!0},p(I,P){const L={};P&16&&(L.$$scope={dirty:P,ctx:I}),t.$set(L);const M={};P&16&&(M.$$scope={dirty:P,ctx:I}),o.$set(M);const D={};P&16&&(D.$$scope={dirty:P,ctx:I}),u.$set(D);const A={};P&16&&(A.$$scope={dirty:P,ctx:I}),a.$set(A);const j={};P&16&&(j.$$scope={dirty:P,ctx:I}),c.$set(j);const U={};P&16&&(U.$$scope={dirty:P,ctx:I}),g.$set(U);const q={};P&17&&(q.$$scope={dirty:P,ctx:I}),O.$set(q);const E={};P&2&&(E.disabled=!I[1]),N.$set(E)},i(I){R||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(o.$$.fragment,I),m(u.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(g.$$.fragment,I),m(O.$$.fragment,I),m(N.$$.fragment,I),R=!0)},o(I){d(e.$$.fragment,I),d(t.$$.fragment,I),d(o.$$.fragment,I),d(u.$$.fragment,I),d(a.$$.fragment,I),d(c.$$.fragment,I),d(g.$$.fragment,I),d(O.$$.fragment,I),d(N.$$.fragment,I),R=!1},d(I){I&&(p(n),p(r),p(s),p(i),p(f),p(_),p(y),p(C)),w(e,I),w(t,I),w(o,I),w(u,I),w(a,I),w(c,I),w(g,I),w(O,I),w(N,I)}}}function i_(l){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new He({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function a_(l){let e,n,t,r;return e=new ze({props:{label:"Layers",open:!0,$$slots:{default:[s_]},$$scope:{ctx:l}}}),t=new kt({props:{data:l[2],$$slots:{default:[i_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function f_(l,e,n){let t,r;Ae(l,hr,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&hr.set(!t)},[t,r,o,s]}class u_ extends J{constructor(e){super(),K(this,e,f_,a_,Y,{})}}function al(l){let e;return{c(){e=S("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function c_(l){let e,n=l[0]&&al();return{c(){n&&n.c(),e=Ee()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=al(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(t){t&&p(e),n&&n.d(t)}}}function $_(l,e,n){let{loadFile:t}=e,r=!0;return Dn(async()=>{let s=await(await fetch(`${cn()}/v1/all_schemes_output.geojson.gz`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class p_ extends J{constructor(e){super(),K(this,e,$_,c_,Y,{loadFile:1})}}function fl(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=S("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),h(e,n),h(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&B(r,t)},d(s){s&&p(e)}}}function m_(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function __(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function g_(l){let e,n,t,r;return e=new vt({props:{$$slots:{default:[m_]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new vt({props:{$$slots:{default:[__]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function d_(l){var j,U,q,E;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((j=l[0].browse)==null?void 0:j.authority_or_region)+"",a,f,c,_,g=((U=l[0].browse)==null?void 0:U.capital_scheme_id)+"",y,O,C,N,R=((q=l[0].browse)==null?void 0:q.funding_programme)+"",I,P,L,M,D,A=((E=l[0].browse)==null?void 0:E.current_milestone)&&fl(l);return M=new Io({props:{$$slots:{default:[g_]},$$scope:{ctx:l}}}),{c(){e=S("p"),n=k("Scheme reference: "),r=k(t),o=T(),s=S("p"),u=k("Authority or region: "),a=k(i),f=T(),c=S("p"),_=k("Capital scheme ID: "),y=k(g),O=T(),C=S("p"),N=k("Funding programme: "),I=k(R),P=T(),A&&A.c(),L=T(),b(M.$$.fragment)},m(F,z){$(F,e,z),h(e,n),h(e,r),$(F,o,z),$(F,s,z),h(s,u),h(s,a),$(F,f,z),$(F,c,z),h(c,_),h(c,y),$(F,O,z),$(F,C,z),h(C,N),h(C,I),$(F,P,z),A&&A.m(F,z),$(F,L,z),v(M,F,z),D=!0},p(F,z){var se,ye,de,Se;(!D||z&1)&&t!==(t=F[0].scheme_reference+"")&&B(r,t),(!D||z&1)&&i!==(i=((se=F[0].browse)==null?void 0:se.authority_or_region)+"")&&B(a,i),(!D||z&1)&&g!==(g=((ye=F[0].browse)==null?void 0:ye.capital_scheme_id)+"")&&B(y,g),(!D||z&1)&&R!==(R=((de=F[0].browse)==null?void 0:de.funding_programme)+"")&&B(I,R),(Se=F[0].browse)!=null&&Se.current_milestone?A?A.p(F,z):(A=fl(F),A.c(),A.m(L.parentNode,L)):A&&(A.d(1),A=null);const oe={};z&32&&(oe.$$scope={dirty:z,ctx:F}),M.$set(oe)},i(F){D||(m(M.$$.fragment,F),D=!0)},o(F){d(M.$$.fragment,F),D=!1},d(F){F&&(p(e),p(o),p(s),p(f),p(c),p(O),p(C),p(P),p(L)),A&&A.d(F),w(M,F)}}}function h_(l){let e,n;return e=new ze({props:{label:`${l[0].scheme_name}`,$$slots:{default:[d_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function b_(l,e,n){let t,r;Ae(l,wt,i=>n(3,t=i)),Ae(l,Fn,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(ko(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";yo(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class v_ extends J{constructor(e){super(),K(this,e,b_,h_,Y,{scheme:0})}}function ul(l){let e,n,t,r=l[0].status+"",o;return{c(){e=S("p"),n=k("Status: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].status+"")&&B(o,r)},d(s){s&&p(e)}}}function cl(l){let e,n,t,r=l[0].timescale+"",o;return{c(){e=S("p"),n=k("Timescale: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale+"")&&B(o,r)},d(s){s&&p(e)}}}function $l(l){let e,n,t,r=l[0].timescale_year+"",o;return{c(){e=S("p"),n=k("Estimated completion year: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale_year+"")&&B(o,r)},d(s){s&&p(e)}}}function pl(l){let e,n,t,r=l[0].year_published+"",o;return{c(){e=S("p"),n=k("Scheme most recently published: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_published+"")&&B(o,r)},d(s){s&&p(e)}}}function ml(l){let e,n,t,r=l[0].year_consulted+"",o;return{c(){e=S("p"),n=k("Scheme most recently consulted on: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_consulted+"")&&B(o,r)},d(s){s&&p(e)}}}function w_(l){let e,n,t,r,o,s=l[0].status&&ul(l),u=l[0].timescale&&cl(l),i=l[0].timescale_year&&$l(l),a=l[0].year_published&&pl(l),f=l[0].year_consulted&&ml(l);return{c(){s&&s.c(),e=T(),u&&u.c(),n=T(),i&&i.c(),t=T(),a&&a.c(),r=T(),f&&f.c(),o=Ee()},m(c,_){s&&s.m(c,_),$(c,e,_),u&&u.m(c,_),$(c,n,_),i&&i.m(c,_),$(c,t,_),a&&a.m(c,_),$(c,r,_),f&&f.m(c,_),$(c,o,_)},p(c,[_]){c[0].status?s?s.p(c,_):(s=ul(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?u?u.p(c,_):(u=cl(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),c[0].timescale_year?i?i.p(c,_):(i=$l(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,_):(a=pl(c),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null),c[0].year_consulted?f?f.p(c,_):(f=ml(c),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i:ne,o:ne,d(c){c&&(p(e),p(n),p(t),p(r),p(o)),s&&s.d(c),u&&u.d(c),i&&i.d(c),a&&a.d(c),f&&f.d(c)}}}function k_(l,e,n){let{props:t}=e;return l.$$set=r=>{"props"in r&&n(0,t=r.props)},[t]}class po extends J{constructor(e){super(),K(this,e,k_,w_,Y,{props:0})}}function _l(l){let e,n,t,r=l[0].budget.toLocaleString()+"",o,s;return{c(){e=S("p"),n=k("Cost: "),t=S("b"),o=k(r),s=k(`
    GBP`)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,i){i&1&&r!==(r=u[0].budget.toLocaleString()+"")&&B(o,r)},d(u){u&&p(e)}}}function gl(l){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function dl(l){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hl(l){let e,n,t,r;return{c(){e=S("p"),n=k("Funding sources: "),t=S("b"),r=k(l[1])},m(o,s){$(o,e,s),h(e,n),h(e,t),h(t,r)},p(o,s){s&2&&B(r,o[1])},d(o){o&&p(e)}}}function y_(l){let e,n,t,r,o=l[0].budget&&_l(l),s=l[0].development_funded&&gl(),u=l[0].construction_funded&&dl(),i=l[1]&&hl(l);return{c(){o&&o.c(),e=T(),s&&s.c(),n=T(),u&&u.c(),t=T(),i&&i.c(),r=Ee()},m(a,f){o&&o.m(a,f),$(a,e,f),s&&s.m(a,f),$(a,n,f),u&&u.m(a,f),$(a,t,f),i&&i.m(a,f),$(a,r,f)},p(a,[f]){a[0].budget?o?o.p(a,f):(o=_l(a),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),a[0].development_funded?s||(s=gl(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),a[0].construction_funded?u||(u=dl(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),a[1]?i?i.p(a,f):(i=hl(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i:ne,o:ne,d(a){a&&(p(e),p(n),p(t),p(r)),o&&o.d(a),s&&s.d(a),u&&u.d(a),i&&i.d(a)}}}function S_(l){if(!l.funding_sources)return"";let e=[];for(let n of["atf2","atf3","atf4","atf4e","crsts","luf"])l.funding_sources[n]&&e.push(n.toUpperCase());return l.funding_sources.other&&e.push(l.funding_sources.other),e.join(", ")}function C_(l,e,n){let t,{props:r}=e;return l.$$set=o=>{"props"in o&&n(0,r=o.props)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=S_(r))},[r,t]}class mo extends J{constructor(e){super(),K(this,e,C_,y_,Y,{props:0})}}function vn(l){const e=l.slice(),n=e[1].pipeline;return e[5]=n,e}function wn(l){const e=l.slice(),n=e[0].pipeline;return e[5]=n,e}function bl(l){let e,n,t,r=Un(l[0].length_meters)+"",o;return{c(){e=S("p"),n=k("Length: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=Un(s[0].length_meters)+"")&&B(o,r)},d(s){s&&p(e)}}}function vl(l){let e,n=at(l[0].description,l[2])+"";return{c(){e=S("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=at(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function wl(l){let e,n,t,r,o,s,u,i=l[5].atf4_type&&kl(l),a=l[5].accuracy&&yl(l),f=l[5].is_alternative&&Sl();return r=new mo({props:{props:l[5]}}),s=new po({props:{props:l[5]}}),{c(){i&&i.c(),e=T(),a&&a.c(),n=T(),f&&f.c(),t=T(),b(r.$$.fragment),o=T(),b(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),v(r,c,_),$(c,o,_),v(s,c,_),u=!0},p(c,_){c[5].atf4_type?i?i.p(c,_):(i=kl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].accuracy?a?a.p(c,_):(a=yl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].is_alternative?f||(f=Sl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const g={};_&1&&(g.props=c[5]),r.$set(g);const y={};_&1&&(y.props=c[5]),s.$set(y)},i(c){u||(m(r.$$.fragment,c),m(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function kl(l){let e,n,t,r=l[5].atf4_type+"",o;return{c(){e=S("p"),n=k("ATF4 type: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].atf4_type+"")&&B(o,r)},d(s){s&&p(e)}}}function yl(l){let e,n,t,r=l[5].accuracy+"",o;return{c(){e=S("p"),n=k("Accuracy: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].accuracy+"")&&B(o,r)},d(s){s&&p(e)}}}function Sl(l){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.capital_scheme_id)+"",o;return{c(){e=S("p"),n=k("Capital scheme ID: "),t=S("b"),o=k(r)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o)},p(u,i){var a;i&2&&r!==(r=((a=u[1].browse)==null?void 0:a.capital_scheme_id)+"")&&B(o,r)},d(u){u&&p(e)}}}function Tl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.current_milestone)+"",o;return{c(){e=S("p"),n=k("Current milestone: "),t=S("b"),o=k(r)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o)},p(u,i){var a;i&2&&r!==(r=((a=u[1].browse)==null?void 0:a.current_milestone)+"")&&B(o,r)},d(u){u&&p(e)}}}function Ol(l){let e,n,t,r,o,s,u,i=l[5].scheme_type&&Ll(l),a=l[5].atf4_lead_type&&Al(l),f=l[5].scheme_description&&Il(l);return r=new mo({props:{props:l[5]}}),s=new po({props:{props:l[5]}}),{c(){i&&i.c(),e=T(),a&&a.c(),n=T(),f&&f.c(),t=T(),b(r.$$.fragment),o=T(),b(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),v(r,c,_),$(c,o,_),v(s,c,_),u=!0},p(c,_){c[5].scheme_type?i?i.p(c,_):(i=Ll(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].atf4_lead_type?a?a.p(c,_):(a=Al(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].scheme_description?f?f.p(c,_):(f=Il(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const g={};_&2&&(g.props=c[5]),r.$set(g);const y={};_&2&&(y.props=c[5]),s.$set(y)},i(c){u||(m(r.$$.fragment,c),m(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function Ll(l){let e,n,t,r=l[5].scheme_type+"",o;return{c(){e=S("p"),n=k("Scheme type: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].scheme_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Al(l){let e,n,t,r=l[5].atf4_lead_type+"",o;return{c(){e=S("p"),n=k("ATF4 lead type: "),t=S("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].atf4_lead_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Il(l){let e,n,t=l[5].scheme_description+"",r;return{c(){e=S("p"),n=k("Descripton: "),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,r)},p(o,s){s&2&&t!==(t=o[5].scheme_description+"")&&B(r,t)},d(o){o&&p(e)}}}function T_(l){var Ie,Me,yt,Xe;let e,n,t,r=at(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,_,g,y,O,C,N,R=at(l[1].scheme_name??"",l[3])+"",I,P,L=at(l[0].scheme_reference,l[3])+"",M,D,A,j,U,q=((Ie=l[1].browse)==null?void 0:Ie.authority_or_region)+"",E,F,z,oe,se,ye,de=((Me=l[1].browse)==null?void 0:Me.funding_programme)+"",Se,ie,Ne,Ce,be=l[0].length_meters&&bl(l),re=l[0].description&&vl(l),ce=l[0].pipeline&&wl(wn(l)),ge=((yt=l[1].browse)==null?void 0:yt.capital_scheme_id)&&Cl(l),ve=((Xe=l[1].browse)==null?void 0:Xe.current_milestone)&&Tl(l),_e=l[1].pipeline&&Ol(vn(l));return{c(){e=S("div"),n=S("h2"),t=new Vt(!1),o=k(" ("),u=k(s),i=k(")"),a=T(),be&&be.c(),f=T(),re&&re.c(),c=T(),ce&&ce.c(),_=T(),g=S("hr"),y=T(),O=S("p"),C=k("Part of scheme: "),N=new Vt(!1),I=k(" ("),P=new Vt(!1),M=k(")"),D=T(),A=S("p"),j=k("Authority or region: "),U=S("b"),E=k(q),F=T(),ge&&ge.c(),z=T(),oe=S("p"),se=k("Funding programme: "),ye=S("b"),Se=k(de),ie=T(),ve&&ve.c(),Ne=T(),_e&&_e.c(),t.a=o,N.a=I,P.a=M,Oe(e,"max-width","30vw"),Oe(e,"max-height","60vh"),Oe(e,"overflow","auto")},m(ue,Fe){$(ue,e,Fe),h(e,n),t.m(r,n),h(n,o),h(n,u),h(n,i),h(e,a),be&&be.m(e,null),h(e,f),re&&re.m(e,null),h(e,c),ce&&ce.m(e,null),h(e,_),h(e,g),h(e,y),h(e,O),h(O,C),N.m(R,O),h(O,I),P.m(L,O),h(O,M),h(e,D),h(e,A),h(A,j),h(A,U),h(U,E),h(e,F),ge&&ge.m(e,null),h(e,z),h(e,oe),h(oe,se),h(oe,ye),h(ye,Se),h(e,ie),ve&&ve.m(e,null),h(e,Ne),_e&&_e.m(e,null),Ce=!0},p(ue,[Fe]){var Bn,zn,qn,Hn;(!Ce||Fe&5)&&r!==(r=at(ue[0].name,ue[2])+"")&&t.p(r),(!Ce||Fe&1)&&s!==(s=ue[0].intervention_type+"")&&B(u,s),ue[0].length_meters?be?be.p(ue,Fe):(be=bl(ue),be.c(),be.m(e,f)):be&&(be.d(1),be=null),ue[0].description?re?re.p(ue,Fe):(re=vl(ue),re.c(),re.m(e,c)):re&&(re.d(1),re=null),ue[0].pipeline?ce?(ce.p(wn(ue),Fe),Fe&1&&m(ce,1)):(ce=wl(wn(ue)),ce.c(),m(ce,1),ce.m(e,_)):ce&&($e(),d(ce,1,1,()=>{ce=null}),pe()),(!Ce||Fe&10)&&R!==(R=at(ue[1].scheme_name??"",ue[3])+"")&&N.p(R),(!Ce||Fe&9)&&L!==(L=at(ue[0].scheme_reference,ue[3])+"")&&P.p(L),(!Ce||Fe&2)&&q!==(q=((Bn=ue[1].browse)==null?void 0:Bn.authority_or_region)+"")&&B(E,q),(zn=ue[1].browse)!=null&&zn.capital_scheme_id?ge?ge.p(ue,Fe):(ge=Cl(ue),ge.c(),ge.m(e,z)):ge&&(ge.d(1),ge=null),(!Ce||Fe&2)&&de!==(de=((qn=ue[1].browse)==null?void 0:qn.funding_programme)+"")&&B(Se,de),(Hn=ue[1].browse)!=null&&Hn.current_milestone?ve?ve.p(ue,Fe):(ve=Tl(ue),ve.c(),ve.m(e,Ne)):ve&&(ve.d(1),ve=null),ue[1].pipeline?_e?(_e.p(vn(ue),Fe),Fe&2&&m(_e,1)):(_e=Ol(vn(ue)),_e.c(),m(_e,1),_e.m(e,null)):_e&&($e(),d(_e,1,1,()=>{_e=null}),pe())},i(ue){Ce||(m(ce),m(_e),Ce=!0)},o(ue){d(ce),d(_e),Ce=!1},d(ue){ue&&p(e),be&&be.d(),re&&re.d(),ce&&ce.d(),ge&&ge.d(),ve&&ve.d(),_e&&_e.d()}}}function at(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function O_(l,e,n){let t,r,o,s;Ae(l,un,i=>n(4,r=i)),Ae(l,Ct,i=>n(2,o=i)),Ae(l,Tt,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class Rn extends J{constructor(e){super(),K(this,e,O_,T_,Y,{props:0})}}function L_(l){let e,n=l[6].name+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function A_(l){let e,n;return e=new Rn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function I_(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[L_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[A_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function N_(l){let e,n=l[6].name+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function P_(l){let e,n;return e=new Rn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function M_(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[N_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[P_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function F_(l){let e,n=l[6].name+"",t;return{c(){e=S("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function D_(l){let e,n;return e=new Rn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function E_(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[F_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[D_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function j_(l){let e,n,t,r,o,s,u,i,a,f;const c=[H("interventions-points"),{filter:["all",Wn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":Yn,"circle-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let _={$$slots:{default:[I_]},$$scope:{ctx:l}};for(let L=0;L<c.length;L+=1)_=ee(_,c[L]);e=new $t({props:_});const g=[H("interventions-lines"),{filter:["all",Vn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":St,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[M_]},$$scope:{ctx:l}};for(let L=0;L<g.length;L+=1)y=ee(y,g[L]);t=new Le({props:y});const O=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*St,"circle-opacity":0,"circle-stroke-color":st.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let C={};for(let L=0;L<O.length;L+=1)C=ee(C,O[L]);o=new $t({props:C});const N=[H("interventions-polygons"),{filter:["all",ln,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":Z(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let R={$$slots:{default:[E_]},$$scope:{ctx:l}};for(let L=0;L<N.length;L+=1)R=ee(R,N[L]);u=new He({props:R});const I=[H("interventions-polygons-outlines"),{filter:["all",ln,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*St}},{layout:{visibility:l[0]?"visible":"none"}}];let P={};for(let L=0;L<I.length;L+=1)P=ee(P,I[L]);return a=new Le({props:P}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),b(a.$$.fragment)},m(L,M){v(e,L,M),$(L,n,M),v(t,L,M),$(L,r,M),v(o,L,M),$(L,s,M),v(u,L,M),$(L,i,M),v(a,L,M),f=!0},p(L,M){const D=M&29?te(c,[c[0],M&24&&{filter:["all",Wn,L[3],L[4]]},c[2],c[3],M&4&&{paint:{"circle-color":L[2],"circle-radius":Yn,"circle-opacity":Z(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};M&128&&(D.$$scope={dirty:M,ctx:L}),e.$set(D);const A=M&13?te(g,[g[0],M&8&&{filter:["all",Vn,L[3]]},g[2],g[3],M&4&&{paint:{"line-color":L[2],"line-width":St,"line-opacity":Z(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},g[6]]):{};M&128&&(A.$$scope={dirty:M,ctx:L}),t.$set(A);const j=M&1?te(O,[O[0],O[1],O[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(j);const U=M&13?te(N,[N[0],M&8&&{filter:["all",ln,L[3]]},N[2],N[3],M&4&&{paint:{"fill-color":L[2],"fill-opacity":Z(.2,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},N[6]]):{};M&128&&(U.$$scope={dirty:M,ctx:L}),u.$set(U);const q=M&13?te(I,[I[0],M&8&&{filter:["all",ln,L[3]]},M&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*St}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(q)},i(L){f||(m(e.$$.fragment,L),m(t.$$.fragment,L),m(o.$$.fragment,L),m(u.$$.fragment,L),m(a.$$.fragment,L),f=!0)},o(L){d(e.$$.fragment,L),d(t.$$.fragment,L),d(o.$$.fragment,L),d(u.$$.fragment,L),d(a.$$.fragment,L),f=!1},d(L){L&&(p(n),p(r),p(s),p(i)),w(e,L),w(t,L),w(o,L),w(u,L),w(a,L)}}}function R_(l){let e,n;return e=new kt({props:{data:l[1],$$slots:{default:[j_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function B_(l,e,n){let t,r;Ae(l,wt,a=>n(5,r=a));let{showSchemes:o}=e,[s]=Nn();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=So(r))},[o,t,s,u,i,r]}class z_ extends J{constructor(e){super(),K(this,e,B_,R_,Y,{showSchemes:0})}}function Nl(l,e,n){const t=l.slice();return t[13]=e[n],t}function Pl(l,e,n){const t=l.slice();return t[16]=e[n],t}function q_(l){let e,n;return e=new p_({props:{loadFile:l[7]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ml(l){let e,n,t,r,o;e=new vt({props:{$$slots:{default:[H_]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[G_]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new Rl({props:u}),W.push(()=>V(t,"open",s)),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],X(()=>r=!1)),t.$set(c)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function H_(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fl(l){let e,n,t=l[16]+"",r;return{c(){e=S("li"),n=S("p"),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&B(r,t)},d(o){o&&p(e)}}}function G_(l){let e,n,t,r,o=qe(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=Fl(Pl(l,o,u));return{c(){e=S("div"),n=S("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=T(),r=S("ul");for(let u=0;u<s.length;u+=1)s[u].c();G(e,"class","govuk-prose")},m(u,i){$(u,e,i),h(e,n),h(e,t),h(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=qe(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=Pl(u,o,a);s[a]?s[a].p(f,i):(s[a]=Fl(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),bt(s,u)}}}function Dl(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new ba({props:u}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],X(()=>t=!1)),e.$set(f)},i(i){r||(m(e.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),r=!1},d(i){w(e,i)}}}function El(l){let e,n;return e=new v_({props:{scheme:l[13]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function jl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&El(l);return{c(){r&&r.c(),n=Ee()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&m(r,1)):(r=El(o),r.c(),m(r,1),r.m(n.parentNode,n)):r&&($e(),d(r,1,1,()=>{r=null}),pe())},i(o){t||(m(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function U_(l){let e,n,t,r,o,s,u,i,a,f,c=yn()=="Private (development)",_,g,y,O,C,N,R,I,P;o=new Fo({props:{boundaryGeojson:l[4]}}),a=new Co({});let L=c&&q_(l),M=l[4].notes&&Ml(l);y=new Po({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),C=new Vl({props:{errorMessage:l[0]}});let D=l[6].size>0&&Dl(l),A=qe(l[6].values()),j=[];for(let q=0;q<A.length;q+=1)j[q]=jl(Nl(l,A,q));const U=q=>d(j[q],1,1,()=>{j[q]=null});return{c(){e=S("div"),n=S("div"),t=S("h1"),t.textContent="Browse schemes",r=T(),b(o.$$.fragment),s=T(),u=S("p"),u.textContent=`App version: ${yn()}`,i=T(),b(a.$$.fragment),f=T(),L&&L.c(),_=T(),M&&M.c(),g=T(),b(y.$$.fragment),O=T(),b(C.$$.fragment),N=T(),D&&D.c(),R=T(),I=S("ul");for(let q=0;q<j.length;q+=1)j[q].c();Oe(n,"display","flex"),Oe(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(q,E){$(q,e,E),h(e,n),h(n,t),h(n,r),v(o,n,null),h(e,s),h(e,u),h(e,i),v(a,e,null),h(e,f),L&&L.m(e,null),h(e,_),M&&M.m(e,null),h(e,g),v(y,e,null),h(e,O),v(C,e,null),h(e,N),D&&D.m(e,null),h(e,R),h(e,I);for(let F=0;F<j.length;F+=1)j[F]&&j[F].m(I,null);P=!0},p(q,E){const F={};E&16&&(F.boundaryGeojson=q[4]),o.$set(F),c&&L.p(q,E),q[4].notes?M?(M.p(q,E),E&16&&m(M,1)):(M=Ml(q),M.c(),m(M,1),M.m(e,g)):M&&($e(),d(M,1,1,()=>{M=null}),pe());const z={};if(E&1&&(z.errorMessage=q[0]),C.$set(z),q[6].size>0?D?(D.p(q,E),E&64&&m(D,1)):(D=Dl(q),D.c(),m(D,1),D.m(e,R)):D&&($e(),d(D,1,1,()=>{D=null}),pe()),E&66){A=qe(q[6].values());let oe;for(oe=0;oe<A.length;oe+=1){const se=Nl(q,A,oe);j[oe]?(j[oe].p(se,E),m(j[oe],1)):(j[oe]=jl(se),j[oe].c(),m(j[oe],1),j[oe].m(I,null))}for($e(),oe=A.length;oe<j.length;oe+=1)U(oe);pe()}},i(q){if(!P){m(o.$$.fragment,q),m(a.$$.fragment,q),m(L),m(M),m(y.$$.fragment,q),m(C.$$.fragment,q),m(D);for(let E=0;E<A.length;E+=1)m(j[E]);P=!0}},o(q){d(o.$$.fragment,q),d(a.$$.fragment,q),d(L),d(M),d(y.$$.fragment,q),d(C.$$.fragment,q),d(D),j=j.filter(Boolean);for(let E=0;E<j.length;E+=1)d(j[E]);P=!1},d(q){q&&p(e),w(o),w(a),L&&L.d(),M&&M.d(),w(y),w(C),D&&D.d(),bt(j,q)}}}function W_(l){let e,n,t,r,o,s,u;return e=new No({}),t=new z_({props:{showSchemes:l[2]}}),s=new u_({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),o=S("div"),b(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,r,a),$(i,o,a),v(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),w(e,i),w(t,i),w(s)}}}function V_(l){let e,n,t;return n=new To({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[W_]},$$scope:{ctx:l}}}),{c(){e=S("div"),b(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function X_(l){let e,n;return e=new Eo({props:{$$slots:{main:[V_],sidebar:[U_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Y_(l,e,n){let t,r,o;Ae(l,wt,C=>n(4,t=C)),Ae(l,Xn,C=>n(5,r=C)),Ae(l,un,C=>n(6,o=C)),Dn(()=>{Oo()});const s=new URLSearchParams(window.location.search);Xn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(C){try{wt.set(JSON.parse(C)),un.set(xi(t)),n(0,u="")}catch(N){n(0,u=`The file you loaded is broken: ${N}`)}}const _=()=>n(3,f=!0);function g(C){f=C,n(3,f)}function y(C){i=C,n(1,i)}function O(C){a=C,n(2,a)}return[u,i,a,f,t,r,o,c,_,g,y,O]}class J_ extends J{constructor(e){super(),K(this,e,Y_,X_,Y,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new J_({target:document.getElementById("app")});
