import{S as Y,i as K,s as J,e as C,j as U,a8 as Ce,k as $,a7 as ne,p,aX as Yl,b as W,c as V,f as T,h as b,m as v,x as Xe,n as X,t as g,o as d,q as w,O as dt,T as ht,U as bt,V as vt,b5 as Xn,l as h,ag as je,_ as ce,$ as $e,a_ as Ct,v as k,J as B,r as Oe,an as tn,u as nn,b6 as Cn,a2 as pn,Z as Fe,a0 as Rn,a1 as Kl,a3 as Zl,a4 as ut,a5 as Ql,a6 as xl,b7 as Co,Y as yt,ad as Jn,b8 as To,G as kt,N as Bn,ah as Oo,ai as Lo,P as x,I as Le,aR as Tn,aI as Ao,a as ct,aW as Po,ay as $t,ar as rn,F as On,w as Ke,b4 as ee,b9 as he,ba as Ae,H as Q,D as qe,W as te,bb as ae,ak as un,b0 as Qt,bc as mn,R as eo,bd as Kt,E as to,be as Io,bf as Mo,g as Ln,ap as No,C as Do,b2 as Yn,as as Fo,at as Kn,au as Zn,av as sn,b3 as Qn,L as Eo,d as jo,M as Ro,z as Bo}from"./index-f8a9c110.js";import{f as Re,l as q,d as Ze,a as zo,k as _t,h as xe,i as le,R as Ho,C as pt,m as qo,S as Uo,B as Go,c as xn,b as Lt,Z as Wo,G as Vo}from"./ZoomOutMap-6cef0a4e.js";import{P as fe}from"./Popup-c90379a9.js";function Xo(l){let e;return{c(){e=C("span"),U(e,"class","svelte-kzgqtg"),Ce(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Ce(e,"background",n[0])},i:ne,o:ne,d(n){n&&p(e)}}}function Jo(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Me extends Y{constructor(e){super(),K(this,e,Jo,Xo,J,{color:0})}}const Yo="/atip/assets/help-d011708a.svg";function Ko(l){let e,n;const t=l[1].default,r=dt(t,l,l[4],null);return{c(){e=C("div"),r&&r.c(),U(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&ht(r,t,o,o[4],n?vt(t,o[4],s,null):bt(o[4]),null)},i(o){n||(g(r,o),n=!0)},o(o){d(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function Zo(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[Ko]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new Yl({props:a}),W.push(()=>V(t,"open",i)),{c(){e=C("button"),e.innerHTML=`<img src="${Yo}" title="Help" alt="Help"/>`,n=T(),b(t.$$.fragment),U(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),v(t,f,c),o=!0,s||(u=Xe(e,"click",l[2]),s=!0)},p(f,[c]){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,m.open=f[0],X(()=>r=!1)),t.$set(m)},i(f){o||(g(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),w(t,f),s=!1,u()}}}function Qo(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class me extends Y{constructor(e){super(),K(this,e,Qo,Zo,J,{})}}const xo=l=>({}),er=l=>({}),es=l=>({}),tr=l=>({});function ts(l){let e,n,t,r,o,s,u,i,a,f,c;const m=l[4].sidebar,_=dt(m,l,l[3],tr),y=l[4].main,O=dt(y,l,l[3],er);return{c(){e=C("div"),n=C("aside"),t=C("div"),_&&_.c(),r=T(),o=C("button"),o.textContent="â†’",u=T(),i=C("main"),O&&O.c(),U(t,"class","sidebar-content content-container svelte-1n0etgd"),U(o,"type","button"),U(o,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),U(n,"class",s=Xn(l[1]?"":"collapsed")+" svelte-1n0etgd"),Ce(n,"--sidebarWidth",l[0]),U(i,"class","svelte-1n0etgd"),U(e,"class","overall-layout svelte-1n0etgd")},m(S,I){$(S,e,I),h(e,n),h(n,t),_&&_.m(t,null),h(n,r),h(n,o),h(e,u),h(e,i),O&&O.m(i,null),a=!0,f||(c=Xe(o,"click",l[2]),f=!0)},p(S,[I]){_&&_.p&&(!a||I&8)&&ht(_,m,S,S[3],a?vt(m,S[3],I,es):bt(S[3]),tr),(!a||I&2&&s!==(s=Xn(S[1]?"":"collapsed")+" svelte-1n0etgd"))&&U(n,"class",s),(!a||I&1)&&Ce(n,"--sidebarWidth",S[0]),O&&O.p&&(!a||I&8)&&ht(O,y,S,S[3],a?vt(y,S[3],I,xo):bt(S[3]),er)},i(S){a||(g(_,S),g(O,S),a=!0)},o(S){d(_,S),d(O,S),a=!1},d(S){S&&p(e),_&&_.d(S),O&&O.d(S),f=!1,c()}}}function ns(l,e,n){let{$$slots:t={},$$scope:r}=e,{sidebarWidth:o="25rem"}=e,s=!0;function u(){n(1,s=!s)}return l.$$set=i=>{"sidebarWidth"in i&&n(0,o=i.sidebarWidth),"$$scope"in i&&n(3,r=i.$$scope)},[o,s,u,r,t]}class rs extends Y{constructor(e){super(),K(this,e,ns,ts,J,{sidebarWidth:0})}}function nr(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function rr(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Me({props:{color:l[2]}}),{c(){e=C("li"),b(n.$$.fragment),t=T(),o=k(r),s=T()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&B(o,r)},i(i){u||(g(n.$$.fragment,i),u=!0)},o(i){d(n.$$.fragment,i),u=!1},d(i){i&&p(e),w(n)}}}function ls(l){let e,n,t=je(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=rr(nr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){e=C("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=je(s[0]);let i;for(i=0;i<t.length;i+=1){const a=nr(s,t,i);r[i]?(r[i].p(a,u),g(r[i],1)):(r[i]=rr(a),r[i].c(),g(r[i],1),r[i].m(e,null))}for(ce(),i=t.length;i<r.length;i+=1)o(i);$e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)g(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),Ct(r,s)}}}function os(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class zn extends Y{constructor(e){super(),K(this,e,os,ls,J,{rows:0})}}function ss(l,e,n){let t;Oe(l,tn,u=>n(3,t=u));let r=null,{markerPosition:o}=e,{markerPositionUpdated:s}=e;return nn(()=>{r=new Cn.Marker({draggable:!0}).setLngLat(o).addTo(t),r.on("dragstart",()=>{t.getCanvas().style.cursor="grabbing"}),r.on("drag",()=>{n(0,o=r.getLngLat()),s()}),r.on("dragend",()=>{t.getCanvas().style.cursor="inherit"})}),pn(()=>{r&&r.remove()}),l.$$set=u=>{"markerPosition"in u&&n(0,o=u.markerPosition),"markerPositionUpdated"in u&&n(1,s=u.markerPositionUpdated)},[o,s]}class is extends Y{constructor(e){super(),K(this,e,ss,null,J,{markerPosition:0,markerPositionUpdated:1})}}function lr(l){let e=l[0],n,t,r=or(l);return{c(){r.c(),n=Fe()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?(ce(),d(r,1,1,ne),$e(),r=or(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function or(l){let e;const n=l[10].default,t=dt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&ht(t,n,r,r[9],e?vt(n,r[9],o,null):bt(r[9]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function as(l){let e,n,t=l[0]&&lr(l);return{c(){t&&t.c(),e=Fe()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=lr(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function fs(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Rn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=Kl();Oe(l,f,y=>n(8,r=y)),Oe(l,c,y=>n(0,t=y));let m,_=!0;return pn(()=>{t&&m&&r&&(Zl(f,t,m),ut(c,t=null,t),n(6,m=void 0))}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(ut(c,t=u,t),Ql(r,t,xl({type:"raster",tiles:i,tileSize:a}),y=>r&&y===t,()=>{t&&(n(6,m=r==null?void 0:r.getSource(t)),n(7,_=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,m=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&m&&(_?n(7,_=!1):m.setTiles(i))},[t,f,c,u,i,a,m,_,r,s,o]}class us extends Y{constructor(e){super(),K(this,e,fs,as,J,{id:3,tiles:4,tileSize:5})}}function cs(l){let e;const n=l[16].default,t=dt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&ht(t,n,r,r[24],e?vt(n,r[24],o,null):bt(r[24]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function $s(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[cs]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Co({props:o}),W.push(()=>V(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function ps(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Rn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:m=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:O=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:I=!1}=e,{hovered:R=null}=e,{eventsIfTopMost:A=!1}=e,{interactive:N=!0}=e;function L(E){R=E,n(0,R)}function M(E){yt.call(this,l,E)}function F(E){yt.call(this,l,E)}function P(E){yt.call(this,l,E)}function j(E){yt.call(this,l,E)}function G(E){yt.call(this,l,E)}function H(E){yt.call(this,l,E)}return l.$$set=E=>{"id"in E&&n(1,o=E.id),"source"in E&&n(2,s=E.source),"sourceLayer"in E&&n(3,u=E.sourceLayer),"beforeId"in E&&n(4,i=E.beforeId),"beforeLayerType"in E&&n(5,a=E.beforeLayerType),"paint"in E&&n(6,f=E.paint),"layout"in E&&n(7,c=E.layout),"filter"in E&&n(8,m=E.filter),"applyToClusters"in E&&n(9,_=E.applyToClusters),"minzoom"in E&&n(10,y=E.minzoom),"maxzoom"in E&&n(11,O=E.maxzoom),"hoverCursor"in E&&n(12,S=E.hoverCursor),"manageHoverState"in E&&n(13,I=E.manageHoverState),"hovered"in E&&n(0,R=E.hovered),"eventsIfTopMost"in E&&n(14,A=E.eventsIfTopMost),"interactive"in E&&n(15,N=E.interactive),"$$scope"in E&&n(24,r=E.$$scope)},[R,o,s,u,i,a,f,c,m,_,y,O,S,I,A,N,t,L,M,F,P,j,G,H,r]}class _n extends Y{constructor(e){super(),K(this,e,ps,$s,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function sr(l){let e=l[0],n,t,r=ir(l);return{c(){r.c(),n=Fe()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?(ce(),d(r,1,1,ne),$e(),r=ir(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function ir(l){let e;const n=l[9].default,t=dt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&ht(t,n,r,r[8],e?vt(n,r[8],o,null):bt(r[8]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function ms(l){let e,n,t=l[0]&&sr(l);return{c(){t&&t.c(),e=Fe()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=sr(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function _s(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Rn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!Jn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new To;Jn.addProtocol("pmtiles",y.tile)}const{map:c,self:m}=Kl();Oe(l,c,y=>n(7,r=y)),Oe(l,m,y=>n(0,t=y));let _;return pn(()=>{t&&r&&(Zl(c,t,_),ut(m,t=null,t),_=void 0)}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(ut(m,t=u,t),Ql(r,t,xl({type:"vector",url:i,tiles:a,promoteId:f}),y=>r&&y===t,()=>{t&&(_=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{_=r==null?void 0:r.getSource(u)}))},[t,c,m,u,i,a,f,r,s,o]}class ke extends Y{constructor(e){super(),K(this,e,_s,ms,J,{id:3,url:4,tiles:5,promoteId:6})}}function ar(l,e,n){const t=l.slice();return t[16]=e[n],t[17]=e,t[18]=n,t}function gs(l){let e,n;return e=new ct({props:{$$slots:{default:[hs]},$$scope:{ctx:l}}}),e.$on("click",l[5]),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&524288&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ds(l){let e,n;return e=new ct({props:{$$slots:{default:[bs]},$$scope:{ctx:l}}}),e.$on("click",l[4]),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&524288&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function hs(l){let e;return{c(){e=k("Disable Line Measurement Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bs(l){let e;return{c(){e=k("Enable Line Measurement Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fr(l){var c;let e,n,t,r=[],o=new Map,s,u,i=l[2]&&((c=l[2].properties)==null?void 0:c.length)&&ur(l);n=new Re({props:{label:"Help",$$slots:{default:[vs]},$$scope:{ctx:l}}});let a=je(l[1]);const f=m=>m[16].id;for(let m=0;m<a.length;m+=1){let _=ar(l,a,m),y=f(_);o.set(y,r[m]=cr(y,_))}return{c(){i&&i.c(),e=T(),b(n.$$.fragment),t=T();for(let m=0;m<r.length;m+=1)r[m].c();s=Fe()},m(m,_){i&&i.m(m,_),$(m,e,_),v(n,m,_),$(m,t,_);for(let y=0;y<r.length;y+=1)r[y]&&r[y].m(m,_);$(m,s,_),u=!0},p(m,_){var O;m[2]&&((O=m[2].properties)!=null&&O.length)?i?i.p(m,_):(i=ur(m),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null);const y={};_&524288&&(y.$$scope={dirty:_,ctx:m}),n.$set(y),_&258&&(a=je(m[1]),ce(),r=Oo(r,_,f,1,m,a,o,s.parentNode,Lo,cr,s,ar),$e())},i(m){if(!u){g(n.$$.fragment,m);for(let _=0;_<a.length;_+=1)g(r[_]);u=!0}},o(m){d(n.$$.fragment,m);for(let _=0;_<r.length;_+=1)d(r[_]);u=!1},d(m){m&&(p(e),p(t),p(s)),i&&i.d(m),w(n,m);for(let _=0;_<r.length;_+=1)r[_].d(m)}}}function ur(l){var s;let e,n,t=((s=l[2].properties)==null?void 0:s.length)+"",r,o;return{c(){e=C("p"),n=k("Length: "),r=k(t),o=k("m")},m(u,i){$(u,e,i),h(e,n),h(e,r),h(e,o)},p(u,i){var a;i&4&&t!==(t=((a=u[2].properties)==null?void 0:a.length)+"")&&B(r,t)},d(u){u&&p(e)}}}function vs(l){let e;return{c(){e=C("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){$(n,e,t)},p:ne,d(n){n&&p(e)}}}function cr(l,e){let n,t,r,o;function s(i){e[9](i,e[16])}let u={markerPositionUpdated:e[8]};return e[16].lngLat!==void 0&&(u.markerPosition=e[16].lngLat),t=new is({props:u}),W.push(()=>V(t,"markerPosition",s)),{key:l,first:null,c(){n=Fe(),b(t.$$.fragment),this.first=n},m(i,a){$(i,n,a),v(t,i,a),o=!0},p(i,a){e=i;const f={};!r&&a&2&&(r=!0,f.markerPosition=e[16].lngLat,X(()=>r=!1)),t.$set(f)},i(i){o||(g(t.$$.fragment,i),o=!0)},o(i){d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(t,i)}}}function ws(l){let e,n;const t=[q("measurement-line"),{paint:{"line-color":Ze.measuringLine,"line-width":5}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u={};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ks(l){let e,n,t,r,o,s,u,i;const a=[ds,gs],f=[];function c(_,y){return _[0]?0:1}e=c(l),n=f[e]=a[e](l);let m=!l[0]&&fr(l);return o=new kt({props:{data:l[3],$$slots:{default:[ws]},$$scope:{ctx:l}}}),{c(){n.c(),t=T(),m&&m.c(),r=T(),b(o.$$.fragment)},m(_,y){f[e].m(_,y),$(_,t,y),m&&m.m(_,y),$(_,r,y),v(o,_,y),s=!0,u||(i=[Xe(window,"keydown",l[6]),Xe(window,"keyup",l[7])],u=!0)},p(_,[y]){let O=e;e=c(_),e===O?f[e].p(_,y):(ce(),d(f[O],1,1,()=>{f[O]=null}),$e(),n=f[e],n?n.p(_,y):(n=f[e]=a[e](_),n.c()),g(n,1),n.m(t.parentNode,t)),_[0]?m&&(ce(),d(m,1,1,()=>{m=null}),$e()):m?(m.p(_,y),y&1&&g(m,1)):(m=fr(_),m.c(),g(m,1),m.m(r.parentNode,r));const S={};y&8&&(S.data=_[3]),y&524288&&(S.$$scope={dirty:y,ctx:_}),o.$set(S)},i(_){s||(g(n),g(m),g(o.$$.fragment,_),s=!0)},o(_){d(n),d(m),d(o.$$.fragment,_),s=!1},d(_){_&&(p(t),p(r)),f[e].d(_),m&&m.d(_),w(o,_),u=!1,Bn(i)}}}function ys(l,e,n){let t;Oe(l,tn,A=>n(12,t=A));let r=!0,o=[],s,u=!1,i=0,a=Tn();function f(A){r||(u||(o.push({id:i++,lngLat:A.lngLat}),n(1,o),S()),u&&o.length>0&&(c(A.lngLat),S()))}function c(A){let L=new Cn.LngLat(0,-90).distanceTo(new Cn.LngLat(0,90)),M;o.forEach(F=>{const P=F.lngLat;L>=A.distanceTo(P)&&(M=P,L=A.distanceTo(P))}),M&&n(1,o=o.filter(F=>{const P=F.lngLat;return P.lng!=(M==null?void 0:M.lng)||P.lat!=(M==null?void 0:M.lat)}))}function m(){n(0,r=!1)}function _(){n(0,r=!0),n(1,o=[]),I()}function y(A){A.key==="Shift"&&(A.stopPropagation(),u=!0),A.key==="Escape"&&(A.stopPropagation(),_())}function O(A){A.key==="Shift"&&(A.stopPropagation(),u=!1)}function S(){if(o.length<2){I();return}const A=o.map(N=>[N.lngLat.lng,N.lngLat.lat]);n(2,s=Ao(A,{})),s.properties&&n(2,s.properties.length=(zo(s)*1e3).toFixed(2),s),n(3,a=JSON.parse(JSON.stringify(s)))}function I(){n(2,s=void 0),n(3,a=Tn())}nn(()=>{t.on("click",f)}),pn(()=>{t.off("click",f)});function R(A,N){l.$$.not_equal(N.lngLat,A)&&(N.lngLat=A,n(1,o))}return[r,o,s,a,m,_,y,O,S,R]}class Ss extends Y{constructor(e){super(),K(this,e,ys,ks,J,{})}}const Cs={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Be=Uint8Array,gt=Uint16Array,no=Uint32Array,ro=new Be([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lo=new Be([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ts=new Be([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oo=function(l,e){for(var n=new gt(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new no(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},so=oo(ro,2),io=so[0],Os=so[1];io[28]=258,Os[258]=28;var Ls=oo(lo,0),As=Ls[0],An=new gt(32768);for(var we=0;we<32768;++we){var at=(we&43690)>>>1|(we&21845)<<1;at=(at&52428)>>>2|(at&13107)<<2,at=(at&61680)>>>4|(at&3855)<<4,An[we]=((at&65280)>>>8|(at&255)<<8)>>>1}var Zt=function(l,e,n){for(var t=l.length,r=0,o=new gt(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new gt(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new gt(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,m=c|(1<<f)-1;c<=m;++c)u[An[c]>>>i]=a}else for(u=new gt(t),r=0;r<t;++r)l[r]&&(u[r]=An[s[l[r]-1]++]>>>15-l[r]);return u},ln=new Be(288);for(var we=0;we<144;++we)ln[we]=8;for(var we=144;we<256;++we)ln[we]=9;for(var we=256;we<280;++we)ln[we]=7;for(var we=280;we<288;++we)ln[we]=8;var ao=new Be(32);for(var we=0;we<32;++we)ao[we]=5;var Ps=Zt(ln,9,1),Is=Zt(ao,5,1),gn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},Ge=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},dn=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Ms=function(l){return(l+7)/8|0},Hn=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?gt:l.BYTES_PER_ELEMENT==4?no:Be)(n-e);return t.set(l.subarray(e,n)),t},Ns=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],We=function(l,e,n){var t=new Error(e||Ns[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,We),!n)throw t;return t},Ds=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Be(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Be(t*3));var s=function(ge){var ve=e.length;if(ge>ve){var _e=new Be(Math.max(ve*2,ge));_e.set(e),e=_e}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,m=n.m,_=n.n,y=t*8;do{if(!f){u=Ge(l,i,1);var O=Ge(l,i+1,3);if(i+=3,O)if(O==1)f=Ps,c=Is,m=9,_=5;else if(O==2){var A=Ge(l,i,31)+257,N=Ge(l,i+10,15)+4,L=A+Ge(l,i+5,31)+1;i+=14;for(var M=new Be(L),F=new Be(19),P=0;P<N;++P)F[Ts[P]]=Ge(l,i+P*3,7);i+=N*3;for(var j=gn(F),G=(1<<j)-1,H=Zt(F,j,1),P=0;P<L;){var E=H[Ge(l,i,G)];i+=E&15;var S=E>>>4;if(S<16)M[P++]=S;else{var D=0,z=0;for(S==16?(z=3+Ge(l,i,3),i+=2,D=M[P-1]):S==17?(z=3+Ge(l,i,7),i+=3):S==18&&(z=11+Ge(l,i,127),i+=7);z--;)M[P++]=D}}var oe=M.subarray(0,A),se=M.subarray(A);m=gn(oe),_=gn(se),f=Zt(oe,m,1),c=Zt(se,_,1)}else We(1);else{var S=Ms(i)+4,I=l[S-4]|l[S-3]<<8,R=S+I;if(R>t){o&&We(0);break}r&&s(a+I),e.set(l.subarray(S,R),a),n.b=a+=I,n.p=i=R*8,n.f=u;continue}if(i>y){o&&We(0);break}}r&&s(a+131072);for(var ye=(1<<m)-1,de=(1<<_)-1,Se=i;;Se=i){var D=f[dn(l,i)&ye],ie=D>>>4;if(i+=D&15,i>y){o&&We(0);break}if(D||We(2),ie<256)e[a++]=ie;else if(ie==256){Se=i,f=null;break}else{var Ie=ie-254;if(ie>264){var P=ie-257,Te=ro[P];Ie=Ge(l,i,(1<<Te)-1)+io[P],i+=Te}var be=c[dn(l,i)&de],re=be>>>4;be||We(3),i+=be&15;var se=As[re];if(re>3){var Te=lo[re];se+=dn(l,i)&(1<<Te)-1,i+=Te}if(i>y){o&&We(0);break}r&&s(a+131072);for(var pe=a+Ie;a<pe;a+=4)e[a]=e[a-se],e[a+1]=e[a+1-se],e[a+2]=e[a+2-se],e[a+3]=e[a+3-se];a=pe}}n.l=f,n.p=Se,n.b=a,n.f=u,f&&(u=1,n.m=m,n.d=c,n.n=_)}while(!u);return a==e.length?e:Hn(e,0,a)},Fs=new Be(0),Ye=function(l,e){return l[e]|l[e+1]<<8},Ve=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},hn=function(l,e){return Ve(l,e)+Ve(l,e+4)*4294967296};function Es(l,e){return Ds(l,e)}var Pn=typeof TextDecoder<"u"&&new TextDecoder,js=0;try{Pn.decode(Fs,{stream:!0}),js=1}catch{}var Rs=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,Hn(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function fo(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(Pn)return Pn.decode(l);var r=Rs(l),o=r[0],s=r[1];return s.length&&We(8),o}}var Bs=function(l,e){return e+30+Ye(l,e+26)+Ye(l,e+28)},zs=function(l,e,n){var t=Ye(l,e+28),r=fo(l.subarray(e+46,e+46+t),!(Ye(l,e+8)&2048)),o=e+46+t,s=Ve(l,e+20),u=n&&s==4294967295?Hs(l,o):[s,Ve(l,e+24),Ve(l,e+42)],i=u[0],a=u[1],f=u[2];return[Ye(l,e+10),i,a,r,o+Ye(l,e+30)+Ye(l,e+32),f]},Hs=function(l,e){for(;Ye(l,e)!=1;e+=4+Ye(l,e+2));return[hn(l,e+12),hn(l,e+4),hn(l,e+20)]};function qs(l,e){for(var n={},t=l.length-22;Ve(l,t)!=101010256;--t)(!t||l.length-t>65558)&&We(13);var r=Ye(l,t+8);if(!r)return{};var o=Ve(l,t+16),s=o==4294967295||r==65535;if(s){var u=Ve(l,t-12);s=Ve(l,u)==101075792,s&&(r=Ve(l,u+32),o=Ve(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=zs(l,o,s),c=f[0],m=f[1],_=f[2],y=f[3],O=f[4],S=f[5],I=Bs(l,S);o=O,(!i||i({name:y,size:m,originalSize:_,compression:c}))&&(c?c==8?n[y]=Es(l.subarray(I,I+m),new Be(_)):We(14,"unknown compression type "+c):n[y]=Hn(l,I,I+m))}return n}function Us(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(bn):bn(l)}function bn(l){var e=new Uint8Array(l),n=qs(e);return Promise.resolve(Gs(n))}function Gs(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=fo(l[r])}return e}function Qe(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&wt(t)===e)return t;n++}}function on(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&wt(r)===e&&n.push(r),t++}return n}function cn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&wt(r)===e&&n(r,t):n(r,t),t++}}function Ws(l,e,n){var t=[];return cn(l,e,function(r,o){t.push(n(r,o))}),t}var Vs=/.+\:/;function wt(l){return l.tagName.replace(Vs,"")}function uo(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+wt(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=uo(l.childNodes[t]),t++;return e+="</"+wt(l)+">",e}function Xs(l){var e=l.documentElement,n=Qe(e,"sheetData"),t=[];return cn(n,"row",function(r){cn(r,"c",function(o){t.push(o)})}),t}function Js(l,e){return Qe(e,"v")}function Ys(l,e){if(e.firstChild&&wt(e.firstChild)==="is"&&e.firstChild.firstChild&&wt(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Ks(l){var e=l.documentElement,n=Qe(e,"dimension");if(n)return n.getAttribute("ref")}function Zs(l){var e=l.documentElement,n=Qe(e,"cellStyleXfs");return n?on(n,"xf"):[]}function Qs(l){var e=l.documentElement,n=Qe(e,"cellXfs");return n?on(n,"xf"):[]}function xs(l){var e=l.documentElement,n=Qe(e,"numFmts");return n?on(n,"numFmt"):[]}function ei(l){var e=l.documentElement;return Ws(e,"si",function(n){var t=Qe(n,"t");if(t)return t.textContent;var r="";return cn(n,"r",function(o){r+=Qe(o,"t").textContent}),r})}function ti(l){var e=l.documentElement;return Qe(e,"workbookPr")}function ni(l){var e=l.documentElement;return on(e,"Relationship")}function ri(l){var e=l.documentElement,n=Qe(e,"sheets");return on(n,"sheet")}function li(l,e){var n=e.createDocument(l),t={},r=ti(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return ri(n).forEach(o),t}function oi(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=vn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=vn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=vn(u);break}};return ni(n).forEach(r),t}function vn(l){return l[0]==="/"?l.slice(1):"xl/"+l}function $r(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function pr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$r(Object(n),!0).forEach(function(t){si(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):$r(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function si(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ii(l,e){if(!l)return{};var n=e.createDocument(l),t=Zs(n).map(wn),r=xs(n).map(ai).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?pr(pr({},t[u.xfId]),wn(u,r)):wn(u,r)};return Qs(n).map(o)}function ai(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function wn(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function fi(l,e){return l?ei(e.createDocument(l)):[]}function co(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function ui(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ci(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ci(l,e){if(l){if(typeof l=="string")return mr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(l,e)}}function mr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function $i(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(pi.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&gi(t.numberFormat.template))return!0}}var pi=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],mi=/^\[\$-414\]/,_i=/;@$/;function gi(l){l=l.toLowerCase(),l=l.replace(mi,""),l=l.replace(_i,"");for(var e=l.split(/\W+/),n=ui(e),t;!(t=n()).done;){var r=t.value;if(di.indexOf(r)<0)return!1}return!0}var di=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function hi(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=kn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=kn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=kn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=bi(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var m=$i(o(),s,a);m?(l=_r(l),l=co(l,i)):l=(a.parseNumber||_r)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function bi(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function kn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function _r(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var vi=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function wi(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function ki(l){for(var e=0,n=0;n<l.length;)e*=26,e+=vi.indexOf(l[n]),n++;return e}function $o(l){return l=l.split(/(\d+)/),[parseInt(l[1]),ki(l[0].trim())]}function yi(l,e,n,t,r,o,s){var u=$o(l.getAttribute("r")),i=Js(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:hi(a,f,{getInlineStringValue:function(){return Ys(e,l)},getInlineStringXml:function(){return uo(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function Si(l,e,n,t,r,o){var s=Xs(l);return s.length===0?[]:s.map(function(u){return yi(u,l,e,n,t,r,o)})}function Ci(l,e){return Ai(l)||Li(l,e)||Oi(l,e)||Ti()}function Ti(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oi(l,e){if(l){if(typeof l=="string")return gr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(l,e)}}function gr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Li(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ai(l){if(Array.isArray(l))return l}function Pi(l){var e=Ks(l);if(e)return e=e.split(":").map($o).map(function(n){var t=Ci(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Ii(l,e,n,t,r,o){var s=e.createDocument(l),u=Si(s,e,n,t,r,o),i=Pi(s)||wi(u);return{cells:u,dimensions:i}}function Mi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Ni(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ni(l,e){if(l){if(typeof l=="string")return dr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(l,e)}}function dr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Di(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=Mi(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Fi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Ei(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ei(l,e){if(l){if(typeof l=="string")return hr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hr(l,e)}}function hr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ji(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=Fi(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function Ri(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=po(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bi(l,e){return qi(l)||Hi(l,e)||po(l,e)||zi()}function zi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function po(l,e){if(l){if(typeof l=="string")return br(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return br(l,e)}}function br(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Hi(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function qi(l){if(Array.isArray(l))return l}function Ui(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=Bi(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=Ri(t),m;!(m=c()).done;){var _=m.value,y=_.row-1,O=_.column-1;O<s&&y<u&&(i[y][O]=_.value)}var S=e.rowMap;if(S)for(var I=0;I<i.length;)S[I]=I,I++;return i=Di(ji(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(i=e.transformData(i)),i}function Gi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Wi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wi(l,e){if(l){if(typeof l=="string")return vr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vr(l,e)}}function vr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function wr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Vi(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wr(Object(n),!0).forEach(function(t){Xi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Xi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Ji(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Vi({sheet:1},n));var t=function(m){if(!l[m])throw new Error('"'.concat(m,'" file not found inside the *.xlsx file zip archive'));return l[m]},r=oi(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?fi(t(r.sharedStrings),e):[],s=r.styles?ii(t(r.styles),e):{},u=li(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var m=c.name;return{name:m}});var i=Yi(n.sheet,u.sheets);if(!i||!r.sheets[i])throw Ki(n.sheet,u.sheets);var a=Ii(t(r.sheets[i]),e,o,s,u,n),f=Ui(a,n);return n.properties?{data:f,properties:u}:f}function Yi(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=Gi(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Ki(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function In(l){"@babel/helpers - typeof";return In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(l)}function kr(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Zi(l,e,n){return e&&kr(l.prototype,e),n&&kr(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function Qi(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function xi(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&xt(l,e)}function ea(l){var e=mo();return function(){var t=en(l),r;if(e){var o=en(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return ta(this,r)}}function ta(l,e){if(e&&(In(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return na(l)}function na(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function Mn(l){var e=typeof Map=="function"?new Map:void 0;return Mn=function(t){if(t===null||!ra(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return fn(t,arguments,en(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),xt(r,t)},Mn(l)}function fn(l,e,n){return mo()?fn=Reflect.construct:fn=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&xt(a,s.prototype),a},fn.apply(null,arguments)}function mo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ra(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function xt(l,e){return xt=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},xt(l,e)}function en(l){return en=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},en(l)}var ze=function(l){xi(n,l);var e=ea(n);function n(t){var r;return Qi(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Zi(n)}(Mn(Error));function la(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new ze("not_a_number")}if(typeof l!="number")throw new ze("not_a_number");if(isNaN(l))throw new ze("invalid_number");if(!isFinite(l))throw new ze("out_of_bounds");return l}function oa(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new ze("invalid_number");if(!isFinite(l))throw new ze("out_of_bounds");return String(l)}throw new ze("not_a_string")}function sa(l){if(typeof l=="boolean")return l;throw new ze("not_a_boolean")}function ia(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new ze("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new ze("invalid_number");if(!isFinite(l))throw new ze("out_of_bounds");var t=co(l,n);if(isNaN(t.valueOf()))throw new ze("out_of_bounds");return t}throw new ze("not_a_date")}function aa(l,e){return ca(l)||ua(l,e)||_o(l,e)||fa()}function fa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ua(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ca(l){if(Array.isArray(l))return l}function Nn(l){"@babel/helpers - typeof";return Nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(l)}function $a(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=_o(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _o(l,e){if(l){if(typeof l=="string")return yr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yr(l,e)}}function yr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Sr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Cr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sr(Object(n),!0).forEach(function(t){pa(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function pa(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var Tr={isColumnOriented:!1};function ma(l,e,n){n?n=Cr(Cr({},Tr),n):n=Tr;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ha(e),r&&(l=da(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=go(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var m=$a(a),_;!(_=m()).done;){var y=_.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function go(l,e,n,t,r,o){for(var s={},u=!0,i=function(R){var A=R.column,N=R.value,L=R.error,M=R.reason,F={error:L,row:n+1,column:A,value:N};return M&&(F.reason=M),l[A].type&&(F.type=l[A].type),F},a=[],f=function(){var R=m[c],A=l[R],N=Nn(A.type)==="object"&&!Array.isArray(A.type),L=e[t.indexOf(R)];L===void 0&&(L=null);var M=void 0,F=void 0,P=void 0;if(N)M=go(A.type,e,n,t,r,o);else if(L===null)M=null;else if(Array.isArray(A.type)){var j=!1,G=ga(L).map(function(E){var D=Or(E,A,o);return D.error&&(M=E,F=D.error,P=D.reason),D.value!==null&&(j=!0),D.value});F||(M=j?G:null)}else{var H=Or(L,A,o);F=H.error,P=H.reason,M=F?L:H.value}!F&&M===null&&(typeof A.required=="function"?a.push({column:R}):A.required===!0&&(F="required")),F?r.push(i({column:R,value:M,error:F,reason:P})):(u&&M!==null&&(u=!1),(M!==null||o.includeNullValues)&&(s[A.prop]=M))},c=0,m=Object.keys(l);c<m.length;c++)f();if(u)return null;for(var _=0,y=a;_<y.length;_++){var O=y[_].column,S=l[O].required(s);S&&r.push(i({column:O,value:null,error:"required"}))}return s}function Or(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=St(l,e.parse):e.type?t=_a(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function St(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function _a(l,e,n){switch(e){case String:return St(l,oa);case Number:return St(l,la);case Date:return St(l,function(t){return ia(t,{properties:n.properties})});case Boolean:return St(l,sa);default:if(typeof e=="function")return St(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function ho(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=ho(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function ga(l){for(var e=[],n=0;n<l.length;){var t=ho(l,",",n),r=aa(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var da=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function ha(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function Dn(l){"@babel/helpers - typeof";return Dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dn(l)}function bo(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;Dn(o)==="object"&&(o=Object.keys(l[r])[0],s=bo(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var ba=["schema","map"];function Lr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function an(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lr(Object(n),!0).forEach(function(t){va(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function va(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function wa(l,e){if(l==null)return{};var n=ka(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function ka(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function ya(l,e,n){var t=n.schema,r=n.map,o=wa(n,ba);!t&&r&&(t=bo(r));var s=Ji(l,e,an(an({},o),{},{properties:t||o.properties}));return t?ma(s.data,t,an(an({},o),{},{properties:s.properties})):s}function Sa(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Us(l).then(function(n){return ya(n,Cs,e)})}function Ca(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>Ta(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function Ta(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function Oa(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Sa(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Po(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Fn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function La(l){return $t(["get","intervention_type"],{area:Ze.area,route:Ze.route,crossing:Ze.crossing,other:Ze.other},"white")}function Aa(l){return[["Areas",Ze.area],["Routes",Ze.route],["Crossings",Ze.crossing],["Other",Ze.other]]}const Z={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},He=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function En(){let[l,e]=vo(Fn,Z.funding_programmes);return[$t(["get","funding_programme"],l,"grey"),e]}function Pa(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=vo(l,Z.current_milestone);return[$t(["get","current_milestone"],e,"grey"),n]}function vo(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Ia(l){let e,n;return e=new zn({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ma(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new _t({props:u}),W.push(()=>V(e,"value",s)),e.$on("change",l[2]),r=new Re({props:{label:"Legend",$$slots:{default:[Ia]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],X(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function Na(l,e,n){let t;Oe(l,tn,a=>n(4,t=a));let r="fundingProgramme",[o,s]=En();function u(){let a;r=="interventionType"?(a=La(),n(1,s=Aa())):r=="fundingProgramme"?n(1,[a,s]=En(),s):r=="currentMilestone"&&n(1,[a,s]=Pa(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class Da extends Y{constructor(e){super(),K(this,e,Na,Ma,J,{})}}const Tt=rn({type:"FeatureCollection",features:[],schemes:{}}),$n=rn(new Map),Ar=rn(!0),At=rn(""),Pt=rn("");function Fa(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ea(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(l){let e,n,t,r,o,s;return t=new ct({props:{$$slots:{default:[Ea]},$$scope:{ctx:l}}}),t.$on("click",l[19]),{c(){e=C("input"),n=T(),b(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterInterventionText")},m(u,i){$(u,e,i),Ke(e,l[7]),$(u,n,i),v(t,u,i),r=!0,o||(s=Xe(e,"input",l[18]),o=!0)},p(u,i){i&128&&e.value!==u[7]&&Ke(e,u[7]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(g(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function Ra(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ba(l){let e,n,t,r,o,s;return t=new ct({props:{$$slots:{default:[Ra]},$$scope:{ctx:l}}}),t.$on("click",l[21]),{c(){e=C("input"),n=T(),b(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterSchemeText")},m(u,i){$(u,e,i),Ke(e,l[6]),$(u,n,i),v(t,u,i),r=!0,o||(s=Xe(e,"input",l[20]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&Ke(e,u[6]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(g(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function za(l){let e,n,t,r,o,s,u,i,a,f,c,m,_,y,O,S,I,R,A,N;e=new ct({props:{$$slots:{default:[Fa]},$$scope:{ctx:l}}}),e.$on("click",l[13]);function L(D){l[14](D)}let M={label:"Authority or region",choices:l[8],emptyOption:!0};l[2]!==void 0&&(M.value=l[2]),t=new _t({props:M}),W.push(()=>V(t,"value",L));function F(D){l[15](D)}let P={label:"Funding programme",choices:l[9],emptyOption:!0};l[3]!==void 0&&(P.value=l[3]),s=new _t({props:P}),W.push(()=>V(s,"value",F));function j(D){l[16](D)}let G={label:"Current milestone",choices:l[10],emptyOption:!0};l[4]!==void 0&&(G.value=l[4]),a=new _t({props:G}),W.push(()=>V(a,"value",j));function H(D){l[17](D)}let E={label:"Sketch source",choices:l[12],emptyOption:!0};return l[5]!==void 0&&(E.value=l[5]),m=new _t({props:E}),W.push(()=>V(m,"value",H)),O=new On({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[ja]},$$scope:{ctx:l}}}),I=new On({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Ba]},$$scope:{ctx:l}}}),A=new Da({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),o=T(),b(s.$$.fragment),i=T(),b(a.$$.fragment),c=T(),b(m.$$.fragment),y=T(),b(O.$$.fragment),S=T(),b(I.$$.fragment),R=T(),b(A.$$.fragment)},m(D,z){v(e,D,z),$(D,n,z),v(t,D,z),$(D,o,z),v(s,D,z),$(D,i,z),v(a,D,z),$(D,c,z),v(m,D,z),$(D,y,z),v(O,D,z),$(D,S,z),v(I,D,z),$(D,R,z),v(A,D,z),N=!0},p(D,z){const oe={};z&134217728&&(oe.$$scope={dirty:z,ctx:D}),e.$set(oe);const se={};z&256&&(se.choices=D[8]),!r&&z&4&&(r=!0,se.value=D[2],X(()=>r=!1)),t.$set(se);const ye={};z&512&&(ye.choices=D[9]),!u&&z&8&&(u=!0,ye.value=D[3],X(()=>u=!1)),s.$set(ye);const de={};z&1024&&(de.choices=D[10]),!f&&z&16&&(f=!0,de.value=D[4],X(()=>f=!1)),a.$set(de);const Se={};!_&&z&32&&(_=!0,Se.value=D[5],X(()=>_=!1)),m.$set(Se);const ie={};z&134217856&&(ie.$$scope={dirty:z,ctx:D}),O.$set(ie);const Ie={};z&134217792&&(Ie.$$scope={dirty:z,ctx:D}),I.$set(Ie)},i(D){N||(g(e.$$.fragment,D),g(t.$$.fragment,D),g(s.$$.fragment,D),g(a.$$.fragment,D),g(m.$$.fragment,D),g(O.$$.fragment,D),g(I.$$.fragment,D),g(A.$$.fragment,D),N=!0)},o(D){d(e.$$.fragment,D),d(t.$$.fragment,D),d(s.$$.fragment,D),d(a.$$.fragment,D),d(m.$$.fragment,D),d(O.$$.fragment,D),d(I.$$.fragment,D),d(A.$$.fragment,D),N=!1},d(D){D&&(p(n),p(o),p(i),p(c),p(y),p(S),p(R)),w(e,D),w(t,D),w(s,D),w(a,D),w(m,D),w(O,D),w(I,D),w(A,D)}}}function Ha(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[11].route.toLocaleString()+"",s,u,i=l[11].area.toLocaleString()+"",a,f,c=l[11].crossing.toLocaleString()+"",m,_,y=l[11].other.toLocaleString()+"",O,S,I=Pr(l[11].totalLength).toFixed(1)+"",R,A;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),m=k(c),_=k(" crossings, "),O=k(y),S=k(`
    other, with total LineString length of `),R=k(I),A=k(" miles)")},m(N,L){$(N,e,L),$(N,t,L),$(N,r,L),$(N,s,L),$(N,u,L),$(N,a,L),$(N,f,L),$(N,m,L),$(N,_,L),$(N,O,L),$(N,S,L),$(N,R,L),$(N,A,L)},p(N,L){L&1&&n!==(n=N[0].size.toLocaleString()+"")&&B(t,n),L&2048&&o!==(o=N[11].route.toLocaleString()+"")&&B(s,o),L&2048&&i!==(i=N[11].area.toLocaleString()+"")&&B(a,i),L&2048&&c!==(c=N[11].crossing.toLocaleString()+"")&&B(m,c),L&2048&&y!==(y=N[11].other.toLocaleString()+"")&&B(O,y),L&2048&&I!==(I=Pr(N[11].totalLength).toFixed(1)+"")&&B(R,I)},d(N){N&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(m),p(_),p(O),p(S),p(R),p(A))}}}function qa(l){let e,n,t;function r(s){l[22](s)}let o={$$slots:{default:[Ha]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&134219777&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ua(l){let e,n,t,r;return e=new Re({props:{label:"Filters",$$slots:{default:[za]},$$scope:{ctx:l}}}),t=new xe({props:{small:!0,$$slots:{default:[qa]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&134219772&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&134219779&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Pr(l){return l*621371e-9}function Ga(l,e,n){let t,r,o,s;Oe(l,Pt,z=>n(6,t=z)),Oe(l,At,z=>n(7,r=z)),Oe(l,Tt,z=>n(23,o=z)),Oe(l,$n,z=>n(24,s=z));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],m=new Set(Fn.slice(0,-1)),_="",y=[],O="",S=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],I="",R={area:0,route:0,crossing:0,other:0,totalLength:0};nn(()=>{var ye,de,Se;let z=new Set,oe=new Set,se=new Set;for(let ie of s.values())(ye=ie.browse)!=null&&ye.authority_or_region&&z.add(ie.browse.authority_or_region),(de=ie.browse)!=null&&de.funding_programme&&oe.add(ie.browse.funding_programme),(Se=ie.browse)!=null&&Se.current_milestone&&se.add(ie.browse.current_milestone);n(8,a=Array.from(z.entries())),a.sort(),n(9,c=Fn.map(ie=>[ie,ie])),n(10,y=Array.from(se.entries())),y.sort()});function A(z,oe,se,ye,de,Se){let ie=oe.toLowerCase(),Ie=se.toLowerCase(),Te=re=>{var pe,ge,ve,_e,Pe,Ne,Ot;if(ie&&!((pe=re.properties.name)!=null&&pe.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))return!1;if(z||Ie||ye||de||Se){let Je=s.get(re.properties.scheme_reference);if(ye&&((ve=Je.browse)==null?void 0:ve.authority_or_region)!=ye||de&&de!=="Other"&&((_e=Je.browse)==null?void 0:_e.funding_programme)!=de||de==="Other"&&m.has(((Pe=Je.browse)==null?void 0:Pe.funding_programme)??"")||Se&&((Ne=Je.browse)==null?void 0:Ne.current_milestone)!=Se||Ie&&!Je.scheme_reference.toLowerCase().includes(Ie)&&!(Je.scheme_name??"").toLowerCase().includes(Ie)||z&&z!=="Both"&&z!==((Ot=Je.browse)==null?void 0:Ot.sketch_source))return!1}return!0};n(0,u=new Set(o.features.filter(Te).map(re=>re.properties.scheme_reference))),n(11,R={area:0,route:0,crossing:0,other:0,totalLength:0});let be=re=>{var pe,ge;return!(!u.has(re.properties.scheme_reference)||ie&&!((pe=re.properties.name)!=null&&pe.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))};for(let re of o.features)be(re)?(delete re.properties.hide_while_editing,n(11,R[re.properties.intervention_type]++,R),re.geometry.type=="LineString"&&re.properties.length_meters&&n(11,R.totalLength+=re.properties.length_meters,R)):re.properties.hide_while_editing=!0;Tt.set(o),n(11,R)}function N(){n(5,I=""),n(2,f=""),n(3,_=""),n(4,O=""),ut(At,r="",r),ut(Pt,t="",t)}function L(z){f=z,n(2,f)}function M(z){_=z,n(3,_)}function F(z){O=z,n(4,O)}function P(z){I=z,n(5,I)}function j(){r=this.value,At.set(r)}const G=()=>ut(At,r="",r);function H(){t=this.value,Pt.set(t)}const E=()=>ut(Pt,t="",t);function D(z){i=z,n(1,i)}return l.$$set=z=>{"schemesToBeShown"in z&&n(0,u=z.schemesToBeShown),"show"in z&&n(1,i=z.show)},l.$$.update=()=>{l.$$.dirty&252&&A(I,r,t,f,_,O)},[u,i,f,_,O,I,t,r,a,c,y,R,S,N,L,M,F,P,j,G,H,E,D]}class Wa extends Y{constructor(e){super(),K(this,e,Ga,Ua,J,{schemesToBeShown:0,show:1})}}function Va(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xa(l){let e,n,t,r,o;return t=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Va]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("License: "),b(t.$$.fragment),r=k(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),h(e,n),v(t,e,null),h(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(g(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class Ee extends Y{constructor(e){super(),K(this,e,null,Xa,J,{})}}function Ir(l,e,n){const t=l.slice();return t[2]=e[n],t}function Mr(l,e,n){const t=l.slice();return t[5]=e[n],t}function Nr(l){let e,n;return{c(){e=C("span"),n=k(`Â 
    `),Ce(e,"background",l[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,r){$(t,e,r),h(e,n)},p(t,r){r&1&&Ce(e,"background",t[5])},d(t){t&&p(e)}}}function Dr(l){let e,n=l[2]+"",t;return{c(){e=C("span"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&B(t,n)},d(r){r&&p(e)}}}function Ja(l){let e,n,t,r=je(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=Nr(Mr(l,r,i));let s=je(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=Dr(Ir(l,s,i));return{c(){e=C("div");for(let i=0;i<o.length;i+=1)o[i].c();n=T(),t=C("div");for(let i=0;i<u.length;i+=1)u[i].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=je(i[0]);let f;for(f=0;f<r.length;f+=1){const c=Mr(i,r,f);o[f]?o[f].p(c,a):(o[f]=Nr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=je(i[1]);let f;for(f=0;f<s.length;f+=1){const c=Ir(i,s,f);u[f]?u[f].p(c,a):(u[f]=Dr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:ne,o:ne,d(i){i&&(p(e),p(n),p(t)),Ct(o,i),Ct(u,i)}}}function Ya(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ue extends Y{constructor(e){super(),K(this,e,Ya,Ja,J,{colorScale:0,limits:1})}}function Fr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Ka(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Za(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qa(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ef(l){let e,n,t,r,o,s,u,i,a,f,c,m;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Za]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Qa]},$$scope:{ctx:l}}}),f=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[xa]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=T(),i=C("p"),a=k("License: "),b(f.$$.fragment),c=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(_,y){$(_,e,y),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(_,u,y),$(_,i,y),h(i,a),v(f,i,null),h(i,c),m=!0},p(_,y){const O={};y&65536&&(O.$$scope={dirty:y,ctx:_}),t.$set(O);const S={};y&65536&&(S.$$scope={dirty:y,ctx:_}),o.$set(S);const I={};y&65536&&(I.$$scope={dirty:y,ctx:_}),f.$set(I)},i(_){m||(g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(f.$$.fragment,_),m=!1},d(_){_&&(p(e),p(u),p(i)),w(t),w(o),w(f)}}}function tf(l){let e,n,t;return n=new me({props:{$$slots:{default:[ef]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Er(l){let e,n;return e=new Ue({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function nf(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sf(l){let e,n,t,r,o,s,u,i,a,f,c,m,_,y;return o=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[rf]},$$scope:{ctx:l}}}),u=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[lf]},$$scope:{ctx:l}}}),m=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[of]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=T(),t=C("p"),r=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(u.$$.fragment),i=k("."),a=T(),f=C("p"),c=k("License: "),b(m.$$.fragment),_=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(O,S){$(O,e,S),$(O,n,S),$(O,t,S),h(t,r),v(o,t,null),h(t,s),v(u,t,null),h(t,i),$(O,a,S),$(O,f,S),h(f,c),v(m,f,null),h(f,_),y=!0},p(O,S){const I={};S&65536&&(I.$$scope={dirty:S,ctx:O}),o.$set(I);const R={};S&65536&&(R.$$scope={dirty:S,ctx:O}),u.$set(R);const A={};S&65536&&(A.$$scope={dirty:S,ctx:O}),m.$set(A)},i(O){y||(g(o.$$.fragment,O),g(u.$$.fragment,O),g(m.$$.fragment,O),y=!0)},o(O){d(o.$$.fragment,O),d(u.$$.fragment,O),d(m.$$.fragment,O),y=!1},d(O){O&&(p(e),p(n),p(t),p(a),p(f)),w(o),w(u),w(m)}}}function af(l){let e,n,t;return n=new me({props:{$$slots:{default:[sf]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function jr(l){let e,n;return e=new Ue({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ff(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uf(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[uf]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[cf]},$$scope:{ctx:l}}}),i=new Ee({}),{c(){e=C("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const m={};c&65536&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function pf(l){let e,n,t;return n=new me({props:{$$slots:{default:[$f]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Rr(l){let e,n,t,r;return t=new Ue({props:{colorScale:l[4],limits:l[6]().map(wf)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",n=T(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function mf(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=C("p"),n=k("There are "),t=C("b"),o=k(r),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){$(a,e,f),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&B(o,r),f&8192&&u!==(u=a[14]+"")&&B(i,u)},d(a){a&&p(e)}}}function _f(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=C("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=C("b"),i=k(u),a=k(`
          cars`)},m(f,c){$(f,e,c),h(e,n),h(e,r),h(e,o),h(e,s),h(s,i),h(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(r,t),c&8200&&u!==(u=f[15]+"")&&B(i,u)},d(f){f&&p(e)}}}function gf(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=C("p"),n=C("b"),r=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){$(f,e,c),h(e,n),h(n,r),h(n,o),h(e,s),h(e,i),h(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(r,t),c&8192&&u!==(u=f[14]+"")&&B(i,u)},d(f){f&&p(e)}}}function df(l){Fr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?gf:o[3]=="average_cars_per_household"?_f:mf}let t=n(l),r=t(l);return{c(){r.c(),e=Fe()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){Fr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function hf(l){let e,n;return e=new fe({props:{$$slots:{default:[df,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function bf(l){let e,n,t,r;const o=[q(tt),{sourceLayer:tt},{paint:{"fill-color":Ae(["get",l[3]],l[6](),l[4]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[hf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",l[5]);const u=[q(`${tt}-outline`),{sourceLayer:tt},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&88?te(o,[f&0&&ae(q(tt)),f&0&&{sourceLayer:tt},f&88&&{paint:{"fill-color":Ae(["get",a[3]],a[6](),a[4]),"fill-opacity":Q(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const m=f&8?te(u,[f&0&&ae(q(`${tt}-outline`)),f&0&&{sourceLayer:tt},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function vf(l){let e,n,t,r,o,s,u,i,a,f,c,m,_,y;function O(P){l[7](P)}let S={$$slots:{right:[tf],default:[Ka]},$$scope:{ctx:l}};l[0]!==void 0&&(S.checked=l[0]),e=new le({props:S}),W.push(()=>V(e,"checked",O)),e.$on("change",l[8]);let I=l[3]=="percent_households_with_car"&&Er(l);function R(P){l[9](P)}let A={$$slots:{right:[af],default:[nf]},$$scope:{ctx:l}};l[1]!==void 0&&(A.checked=l[1]),o=new le({props:A}),W.push(()=>V(o,"checked",R)),o.$on("change",l[10]);let N=l[3]=="average_cars_per_household"&&jr(l);function L(P){l[11](P)}let M={$$slots:{right:[pf],default:[ff]},$$scope:{ctx:l}};l[2]!==void 0&&(M.checked=l[2]),a=new le({props:M}),W.push(()=>V(a,"checked",L)),a.$on("change",l[12]);let F=l[3]=="population_density"&&Rr(l);return _=new ke({props:{url:`pmtiles://${he()}/v1/${tt}.pmtiles`,$$slots:{default:[bf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),I&&I.c(),r=T(),b(o.$$.fragment),u=T(),N&&N.c(),i=T(),b(a.$$.fragment),c=T(),F&&F.c(),m=T(),b(_.$$.fragment)},m(P,j){v(e,P,j),$(P,t,j),I&&I.m(P,j),$(P,r,j),v(o,P,j),$(P,u,j),N&&N.m(P,j),$(P,i,j),v(a,P,j),$(P,c,j),F&&F.m(P,j),$(P,m,j),v(_,P,j),y=!0},p(P,[j]){const G={};j&65536&&(G.$$scope={dirty:j,ctx:P}),!n&&j&1&&(n=!0,G.checked=P[0],X(()=>n=!1)),e.$set(G),P[3]=="percent_households_with_car"?I?(I.p(P,j),j&8&&g(I,1)):(I=Er(P),I.c(),g(I,1),I.m(r.parentNode,r)):I&&(ce(),d(I,1,1,()=>{I=null}),$e());const H={};j&65536&&(H.$$scope={dirty:j,ctx:P}),!s&&j&2&&(s=!0,H.checked=P[1],X(()=>s=!1)),o.$set(H),P[3]=="average_cars_per_household"?N?(N.p(P,j),j&8&&g(N,1)):(N=jr(P),N.c(),g(N,1),N.m(i.parentNode,i)):N&&(ce(),d(N,1,1,()=>{N=null}),$e());const E={};j&65536&&(E.$$scope={dirty:j,ctx:P}),!f&&j&4&&(f=!0,E.checked=P[2],X(()=>f=!1)),a.$set(E),P[3]=="population_density"?F?(F.p(P,j),j&8&&g(F,1)):(F=Rr(P),F.c(),g(F,1),F.m(m.parentNode,m)):F&&(ce(),d(F,1,1,()=>{F=null}),$e());const D={};j&65544&&(D.$$scope={dirty:j,ctx:P}),_.$set(D)},i(P){y||(g(e.$$.fragment,P),g(I),g(o.$$.fragment,P),g(N),g(a.$$.fragment,P),g(F),g(_.$$.fragment,P),y=!0)},o(P){d(e.$$.fragment,P),d(I),d(o.$$.fragment,P),d(N),d(a.$$.fragment,P),d(F),d(_.$$.fragment,P),y=!1},d(P){P&&(p(t),p(r),p(u),p(i),p(c),p(m)),w(e,P),I&&I.d(P),w(o,P),N&&N.d(P),w(a,P),F&&F.d(P),w(_,P)}}}let tt="census_output_areas";const wf=l=>l.toLocaleString();function kf(l,e,n){let t=Z.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(S){let I=S.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${I}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${I}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(S){r=S,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function m(S){o=S,n(1,o)}const _=()=>{n(0,r=!1),n(2,s=!1)};function y(S){s=S,n(2,s)}const O=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,m,_,y,O]}class yf extends Y{constructor(e){super(),K(this,e,kf,vf,J,{})}}function Sf(l){let e,n,t;return e=new Me({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Cf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tf(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Cf]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of December 2022."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Of(l){let e,n,t;return n=new me({props:{$$slots:{default:[Tf]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Lf(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Af(l){let e,n;return e=new fe({props:{$$slots:{default:[Lf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Pf(l){let e,n,t,r;const o=[q(It),{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Af]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",Mf);const u=[q(`${It}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(It)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const m=f&3?te(u,[f&0&&ae(q(`${It}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function If(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Of],default:[Sf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new kt({props:{data:`${he()}/v1/${It}.geojson`,$$slots:{default:[Pf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let It="combined_authorities";function Mf(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Nf(l,e,n){let t=Z.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Df extends Y{constructor(e){super(),K(this,e,Nf,If,J,{})}}function Ff(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ef(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jf(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rf(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Ef]},$$scope:{ctx:l}}}),o=new ee({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[jf]},$$scope:{ctx:l}}}),i=new Ee({}),{c(){e=C("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function Bf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Rf]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Br(l){let e,n;return e=new Ue({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zf(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,m=l[4].rank.toLocaleString()+"",_,y;return{c(){e=C("p"),t=k(n),r=k(` has an IMD score of
        `),o=C("b"),u=k(s),i=T(),a=C("p"),f=k("Rank: "),c=C("b"),_=k(m),y=k(`
        / 32,844 LSOAs`)},m(O,S){$(O,e,S),h(e,t),h(e,r),h(e,o),h(o,u),$(O,i,S),$(O,a,S),h(a,f),h(a,c),h(c,_),h(a,y)},p(O,S){S&16&&n!==(n=O[4].LSOA11CD+"")&&B(t,n),S&16&&s!==(s=O[4].score+"")&&B(u,s),S&16&&m!==(m=O[4].rank.toLocaleString()+"")&&B(_,m)},d(O){O&&(p(e),p(i),p(a))}}}function Hf(l){let e,n;return e=new fe({props:{$$slots:{default:[zf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qf(l){let e,n,t,r;const o=[q(nt),{sourceLayer:nt},{paint:{"fill-color":Ae(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Hf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s});const u=[q(`${nt}-outline`),{sourceLayer:nt},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(q(nt)),f&0&&{sourceLayer:nt},f&6&&{paint:{"fill-color":Ae(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Q(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const m=f&1?te(u,[f&0&&ae(q(`${nt}-outline`)),f&0&&{sourceLayer:nt},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Uf(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Bf],default:[Ff]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Br(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${nt}.pmtiles`,$$slots:{default:[qf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.checked=f[0],X(()=>n=!1)),e.$set(m),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=Br(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let nt="imd";function Gf(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Wf extends Y{constructor(e){super(),K(this,e,Gf,Uf,J,{})}}function Vf(l){let e,n,t;return e=new Me({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Xf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jf(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Xf]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of January 2024."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Yf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Jf]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Kf(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Zf(l){let e,n;return e=new fe({props:{$$slots:{default:[Kf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qf(l){let e,n,t,r;const o=[q(Mt),{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Zf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",eu);const u=[q(`${Mt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(Mt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const m=f&3?te(u,[f&0&&ae(q(`${Mt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function xf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Yf],default:[Vf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new kt({props:{data:`${he()}/v1/${Mt}.geojson`,$$slots:{default:[Qf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Mt="local_authority_districts";function eu(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function tu(l,e,n){let t=Z.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class nu extends Y{constructor(e){super(),K(this,e,tu,xf,J,{})}}function ru(l){let e,n,t;return e=new Me({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function lu(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ou(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function su(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function au(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fu(l){let e,n,t,r,o,s,u,i,a,f,c,m,_,y,O,S,I,R,A,N,L,M;return t=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[lu]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ou]},$$scope:{ctx:l}}}),u=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[su]},$$scope:{ctx:l}}}),_=new ee({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[iu]},$$scope:{ctx:l}}}),R=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[au]},$$scope:{ctx:l}}}),L=new Ee({}),{c(){e=C("p"),n=k("LPAs may be a "),b(t.$$.fragment),r=k(", "),b(o.$$.fragment),s=k("y, or "),b(u.$$.fragment),i=k("."),a=T(),f=C("p"),c=C("strong"),m=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(_.$$.fragment),y=k(" to get more details."),O=T(),S=C("p"),I=k("Data from ONS Geography via "),b(R.$$.fragment),A=k(", as of November 2022."),N=T(),b(L.$$.fragment)},m(F,P){$(F,e,P),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),v(u,e,null),h(e,i),$(F,a,P),$(F,f,P),h(f,c),h(c,m),v(_,c,null),h(c,y),$(F,O,P),$(F,S,P),h(S,I),v(R,S,null),h(S,A),$(F,N,P),v(L,F,P),M=!0},p(F,P){const j={};P&16&&(j.$$scope={dirty:P,ctx:F}),t.$set(j);const G={};P&16&&(G.$$scope={dirty:P,ctx:F}),o.$set(G);const H={};P&16&&(H.$$scope={dirty:P,ctx:F}),u.$set(H);const E={};P&16&&(E.$$scope={dirty:P,ctx:F}),_.$set(E);const D={};P&16&&(D.$$scope={dirty:P,ctx:F}),R.$set(D)},i(F){M||(g(t.$$.fragment,F),g(o.$$.fragment,F),g(u.$$.fragment,F),g(_.$$.fragment,F),g(R.$$.fragment,F),g(L.$$.fragment,F),M=!0)},o(F){d(t.$$.fragment,F),d(o.$$.fragment,F),d(u.$$.fragment,F),d(_.$$.fragment,F),d(R.$$.fragment,F),d(L.$$.fragment,F),M=!1},d(F){F&&(p(e),p(a),p(f),p(O),p(S),p(N)),w(t),w(o),w(u),w(_),w(R),w(L,F)}}}function uu(l){let e,n,t;return n=new me({props:{$$slots:{default:[fu]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function cu(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function $u(l){let e,n;return e=new fe({props:{$$slots:{default:[cu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pu(l){let e,n,t,r;const o=[q(rt),{sourceLayer:rt},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[$u]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s});const u=[q(`${rt}-outline`),{sourceLayer:rt},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(rt)),f&0&&{sourceLayer:rt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const m=f&3?te(u,[f&0&&ae(q(`${rt}-outline`)),f&0&&{sourceLayer:rt},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function mu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[uu],default:[ru]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${rt}.pmtiles`,$$slots:{default:[pu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let rt="local_planning_authorities";function _u(l,e,n){let t=Z.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class gu extends Y{constructor(e){super(),K(this,e,_u,mu,J,{})}}function du(l){let e,n,t;return e=new Me({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function hu(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bu(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[hu]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function vu(l){let e,n,t;return n=new me({props:{$$slots:{default:[bu]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function wu(l){let e,n=l[3].Name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&B(t,n)},d(r){r&&p(e)}}}function ku(l){let e,n;return e=new fe({props:{$$slots:{default:[wu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function yu(l){let e,n,t,r;const o=[q(lt),{sourceLayer:lt},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ku]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",Cu);const u=[q(`${lt}-outline`),{sourceLayer:lt},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(lt)),f&0&&{sourceLayer:lt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const m=f&3?te(u,[f&0&&ae(q(`${lt}-outline`)),f&0&&{sourceLayer:lt},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Su(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[vu],default:[du]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${lt}.pmtiles`,$$slots:{default:[yu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let lt="parliamentary_constituencies";function Cu(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Tu(l,e,n){let t=Z.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ou extends Y{constructor(e){super(),K(this,e,Tu,Su,J,{})}}function Lu(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Au(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pu(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Au]},$$scope:{ctx:l}}}),i=new Ee({}),{c(){e=C("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        Âµgm
        `),o=C("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),h(e,o),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const m={};c&2048&&(m.$$scope={dirty:c,ctx:f}),t.$set(m)},i(f){a||(g(t.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(i,f)}}}function Iu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Pu]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function zr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,m,_,y,O,S,I,R;function A(L){l[7](L)}let N={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return l[0]!==void 0&&(N.value=l[0]),e=new _t({props:N}),W.push(()=>V(e,"value",A)),{c(){b(e.$$.fragment),t=T(),r=C("p"),s=k(o),u=T(),i=C("div"),a=C("label"),f=k(`Opacity
      `),c=C("input"),m=T(),_=C("img"),U(c,"type","range"),U(c,"min","0"),U(c,"max","100"),un(_.src,y=l[5](l[0]))||U(_,"src",y),U(_,"width",150),U(_,"alt",O=`Legend for ${l[0]} layer`)},m(L,M){v(e,L,M),$(L,t,M),$(L,r,M),h(r,s),$(L,u,M),$(L,i,M),h(i,a),h(a,f),h(a,c),Ke(c,l[2]),$(L,m,M),$(L,_,M),S=!0,I||(R=[Xe(c,"change",l[8]),Xe(c,"input",l[8])],I=!0)},p(L,M){const F={};!n&&M&1&&(n=!0,F.value=L[0],X(()=>n=!1)),e.$set(F),(!S||M&1)&&o!==(o=L[3](L[0])+"")&&B(s,o),M&4&&Ke(c,L[2]),(!S||M&1&&!un(_.src,y=L[5](L[0])))&&U(_,"src",y),(!S||M&1&&O!==(O=`Legend for ${L[0]} layer`))&&U(_,"alt",O)},i(L){S||(g(e.$$.fragment,L),S=!0)},o(L){d(e.$$.fragment,L),S=!1},d(L){L&&(p(t),p(r),p(u),p(i),p(m),p(_)),w(e,L),I=!1,Bn(R)}}}function Mu(l){let e,n;const t=[q("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Ho({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Nu(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={$$slots:{right:[Iu],default:[Lu]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[1]&&zr(l);return o=new us({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Mu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,m.checked=f[1],X(()=>n=!1)),e.$set(m),f[1]?a?(a.p(f,c),c&2&&g(a,1)):(a=zr(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const _={};c&1&&(_.tiles=[f[4](f[0])]),c&2054&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}function Du(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let O=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${O}`}function f(y){let O=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${O}`}function c(y){r=y,n(1,r)}function m(y){s=y,n(0,s)}function _(){o=Qt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s])},[s,r,o,i,a,f,c,m,_]}class Fu extends Y{constructor(e){super(),K(this,e,Du,Nu,J,{})}}function Eu(l){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ju(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ru(l){let e,n,t,r,o,s,u,i,a;return o=new ee({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[ju]},$$scope:{ctx:l}}}),i=new Ee({}),{c(){e=C("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=T(),t=C("p"),r=k("Data from June 2019, produced by "),b(o.$$.fragment),s=k(". See there for methodology details"),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(i,f)}}}function Bu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ru]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Hr(l){let e,n;return e=new Ue({props:{colorScale:l[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zu(l){let e,n=l[3].noiseclass+"",t,r,o=qr(l[3].noiseclass)+"",s,u;return{c(){e=C("p"),t=k(n),r=k(" dB ("),s=k(o),u=k(")")},m(i,a){$(i,e,a),h(e,t),h(e,r),h(e,s),h(e,u)},p(i,a){a&8&&n!==(n=i[3].noiseclass+"")&&B(t,n),a&8&&o!==(o=qr(i[3].noiseclass)+"")&&B(s,o)},d(i){i&&p(e)}}}function Hu(l){let e,n;return e=new fe({props:{$$slots:{default:[zu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qu(l){let e,n;const t=[q(Nt),{sourceLayer:Nt},{paint:{"fill-color":$t(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][0],"65.0-69.9":l[1][1],"70.0-74.9":l[1][1],">=75.0":l[1][2]},"red"),"fill-opacity":Q(.5,.8)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Hu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Nt)),s&0&&{sourceLayer:Nt},s&2&&{paint:{"fill-color":$t(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":Q(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Uu(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[Bu],default:[Eu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Hr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Nt}.pmtiles`,$$slots:{default:[qu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.checked=f[0],X(()=>n=!1)),e.$set(m),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=Hr(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const _={};c&17&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Nt="road_noise";function qr(l){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[l]}function Gu(l,e,n){let t=[Z.sequential_low_to_high[0],Z.sequential_low_to_high[2],Z.sequential_low_to_high[4]],r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Wu extends Y{constructor(e){super(),K(this,e,Gu,Uu,J,{})}}function Vu(l){let e,n,t;return e=new Me({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Xu(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ju(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Xu]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Yu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ju]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Ku(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Zu(l){let e,n;return e=new fe({props:{$$slots:{default:[Ku,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qu(l){let e,n,t,r;const o=[q(ot),{sourceLayer:ot},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Zu]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",ec);const u=[q(`${ot}-outline`),{sourceLayer:ot},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(q(ot)),f&0&&{sourceLayer:ot},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const m=f&3?te(u,[f&0&&ae(q(`${ot}-outline`)),f&0&&{sourceLayer:ot},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function xu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Yu],default:[Vu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${ot}.pmtiles`,$$slots:{default:[Qu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let ot="wards";function ec(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function tc(l,e,n){let t=Z.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class nc extends Y{constructor(e){super(),K(this,e,tc,xu,J,{})}}function rc(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lc(l){let e,n,t,r;return t=new ee({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[rc]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&p(e),w(t)}}}class et extends Y{constructor(e){super(),K(this,e,null,lc,J,{})}}function oc(l){let e,n,t;return e=new Me({props:{color:Z.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function sc(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ic(l){let e,n,t,r,o,s,u,i,a;return o=new ee({props:{href:"https://gtfs.org",$$slots:{default:[sc]},$$scope:{ctx:l}}}),i=new et({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=T(),t=C("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const m={};c&8&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(i,f)}}}function ac(l){let e,n,t;return n=new me({props:{$$slots:{default:[ic]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function fc(l){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uc(l){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cc(l){let e;function n(o,s){return o[2].has_bus_lane?uc:fc}let t=n(l),r=t(l);return{c(){r.c(),e=Fe()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function $c(l){let e,n;return e=new fe({props:{$$slots:{default:[cc,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pc(l){let e,n;const t=[q(Dt),{sourceLayer:Dt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[$c]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function mc(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[ac],default:[oc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Dt}.pmtiles`,$$slots:{default:[pc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Dt="bus_routes";function _c(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class gc extends Y{constructor(e){super(),K(this,e,_c,mc,J,{})}}function Ur(l){const e=Tc(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function Gr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function dc(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hc(l){let e,n,t,r,o,s,u,i;return u=new et({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=T(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=T(),o=C("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=T(),b(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),v(u,a,f),i=!0},p:ne,i(a){i||(g(u.$$.fragment,a),i=!0)},o(a){d(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),w(u,a)}}}function bc(l){let e,n,t;return n=new me({props:{$$slots:{default:[hc]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Wr(l){let e,n,t;return n=new xe({props:{$$slots:{default:[wc]},$$scope:{ctx:l}}}),{c(){e=C("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function vc(l){let e,n,t=l[9]+"",r,o,s;return e=new Me({props:{color:l[10]}}),{c(){b(e.$$.fragment),n=T(),r=k(t),o=T()},m(u,i){v(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:ne,i(u){s||(g(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function Vr(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[vc]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function wc(l){let e,n,t=je(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Vr(Gr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Fe()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=je(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Gr(s,t,i);r[i]?(r[i].p(a,u),g(r[i],1)):(r[i]=Vr(a),r[i].c(),g(r[i],1),r[i].m(e.parentNode,e))}for(ce(),i=t.length;i<r.length;i+=1)o(i);$e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)g(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),Ct(r,s)}}}function kc(l){Ur(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,m,_=l[8]+"",y;return{c(){e=C("h2"),t=k(n),r=T(),o=C("p"),s=k("Direction: "),u=C("b"),a=T(),f=C("p"),c=k("Width: "),m=C("b"),y=k(_)},m(O,S){$(O,e,S),h(e,t),$(O,r,S),$(O,o,S),h(o,s),h(o,u),u.innerHTML=i,$(O,a,S),$(O,f,S),h(f,c),h(f,m),h(m,y)},p(O,S){Ur(O),S&32&&n!==(n=O[6]+"")&&B(t,n),S&32&&i!==(i=O[7]+"")&&(u.innerHTML=i),S&32&&_!==(_=O[8]+"")&&B(y,_)},d(O){O&&(p(e),p(r),p(o),p(a),p(f))}}}function yc(l){let e,n;return e=new fe({props:{$$slots:{default:[kc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Sc(l){let e,n;const t=[q(Ft),{sourceLayer:Ft},{paint:{"line-color":$t(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Xr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[yc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),e.$on("click",Oc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Ft)),s&0&&{sourceLayer:Ft},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Xr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Cc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[bc],default:[dc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Wr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Ft}.pmtiles`,$$slots:{default:[Sc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const m={};c&8192&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.checked=f[0],X(()=>n=!1)),e.$set(m),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=Wr(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const _={};c&8195&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Ft="cycle_paths";function Tc(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function Oc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Xr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function Lc(l,e,n){let t=[["track","Separated tracks",Z.cycle_paths.track],["lane","Unprotected lanes",Z.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class Ac extends Y{constructor(e){super(),K(this,e,Lc,Cc,J,{})}}function Pc(l){let e,n,t;return e=new Me({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Ic(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mc(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Ic]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=C("p"),n=k("Data from the "),b(t.$$.fragment),r=k(", as of September 2021."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Nc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Mc]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Dc(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function Fc(l){let e,n;return e=new fe({props:{$$slots:{default:[Dc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ec(l){let e,n;const t=[q(Et),{sourceLayer:Et},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Fc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Et)),s&0&&{sourceLayer:Et},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function jc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Nc],default:[Pc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Et}.pmtiles`,$$slots:{default:[Ec]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Et="mrn";function Rc(l,e,n){let t=Z.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Bc extends Y{constructor(e){super(),K(this,e,Rc,jc,J,{})}}function zc(l){let e,n,t;return e=new Me({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Strategic Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Hc(l){let e;return{c(){e=k(`OS Open Roads
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qc(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Hc]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),r=k(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Uc(l){let e,n,t;return n=new me({props:{$$slots:{default:[qc]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Gc(l){let e,n=(l[3].name??"Unknown SRN road")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown SRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function Wc(l){let e,n;return e=new fe({props:{$$slots:{default:[Gc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Vc(l){let e,n;const t=[q(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Wc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Xc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Uc],default:[zc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${jt}.pmtiles`,$$slots:{default:[Vc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let jt="srn";function Jc(l,e,n){let t=Z.srn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Yc extends Y{constructor(e){super(),K(this,e,Jc,Xc,J,{})}}function Kc(l){let e,n,t;return e=new Me({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Zc(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qc(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Zc]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=C("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function xc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Qc]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Jr(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=C("li"),n=k("Description: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&B(o,r)},d(s){s&&p(e)}}}function Yr(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=C("li"),n=k("Is greenway: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&B(o,r)},d(s){s&&p(e)}}}function Kr(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=C("li"),n=k("Route type: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&B(o,r)},d(s){s&&p(e)}}}function Zr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=C("li"),n=k("Route number: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&B(o,r)},d(s){s&&p(e)}}}function Qr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=C("li"),n=k("Route Category: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&B(o,r)},d(s){s&&p(e)}}}function xr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=C("li"),n=k("Open Status: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&B(o,r)},d(s){s&&p(e)}}}function el(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=C("li"),n=k("Surface: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&B(o,r)},d(s){s&&p(e)}}}function tl(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=C("li"),n=k("Quality: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&B(o,r)},d(s){s&&p(e)}}}function nl(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=C("li"),n=k("Road Class: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&B(o,r)},d(s){s&&p(e)}}}function e$(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&Jr(l),c=l[3].Greenway&&Yr(l),m=l[3].RouteType&&Kr(l),_=l[3].RouteNo&&Zr(l),y=l[3].RouteCat&&Qr(l),O=l[3].OpenStatus&&xr(l),S=l[3].Surface&&el(l),I=l[3].Quality&&tl(l),R=l[3].RoadClass&&nl(l);return{c(){e=C("ul"),f&&f.c(),n=T(),c&&c.c(),t=T(),m&&m.c(),r=T(),_&&_.c(),o=T(),y&&y.c(),s=T(),O&&O.c(),u=T(),S&&S.c(),i=T(),I&&I.c(),a=T(),R&&R.c()},m(A,N){$(A,e,N),f&&f.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),m&&m.m(e,null),h(e,r),_&&_.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),O&&O.m(e,null),h(e,u),S&&S.m(e,null),h(e,i),I&&I.m(e,null),h(e,a),R&&R.m(e,null)},p(A,N){A[3].Desc_?f?f.p(A,N):(f=Jr(A),f.c(),f.m(e,n)):f&&(f.d(1),f=null),A[3].Greenway?c?c.p(A,N):(c=Yr(A),c.c(),c.m(e,t)):c&&(c.d(1),c=null),A[3].RouteType?m?m.p(A,N):(m=Kr(A),m.c(),m.m(e,r)):m&&(m.d(1),m=null),A[3].RouteNo?_?_.p(A,N):(_=Zr(A),_.c(),_.m(e,o)):_&&(_.d(1),_=null),A[3].RouteCat?y?y.p(A,N):(y=Qr(A),y.c(),y.m(e,s)):y&&(y.d(1),y=null),A[3].OpenStatus?O?O.p(A,N):(O=xr(A),O.c(),O.m(e,u)):O&&(O.d(1),O=null),A[3].Surface?S?S.p(A,N):(S=el(A),S.c(),S.m(e,i)):S&&(S.d(1),S=null),A[3].Quality?I?I.p(A,N):(I=tl(A),I.c(),I.m(e,a)):I&&(I.d(1),I=null),A[3].RoadClass?R?R.p(A,N):(R=nl(A),R.c(),R.m(e,null)):R&&(R.d(1),R=null)},d(A){A&&p(e),f&&f.d(),c&&c.d(),m&&m.d(),_&&_.d(),y&&y.d(),O&&O.d(),S&&S.d(),I&&I.d(),R&&R.d()}}}function t$(l){let e,n;return e=new fe({props:{$$slots:{default:[e$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function n$(l){let e,n;const t=[q(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[t$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Rt)),s&0&&{sourceLayer:Rt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function r$(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[xc],default:[Kc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Rt}.pmtiles`,$$slots:{default:[n$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Rt="national_cycle_network";function l$(l,e,n){let t=Z.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class o$ extends Y{constructor(e){super(),K(this,e,l$,r$,J,{})}}function s$(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function i$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function a$(l){let e,n,t,r,o,s,u,i,a;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[i$]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=T(),t=C("p"),t.textContent="Data valid as of 1 January, 2024",r=T(),o=C("p"),s=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),u.$set(m)},i(f){a||(g(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),w(u)}}}function f$(l){let e,n,t;return n=new me({props:{$$slots:{default:[a$]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function rl(l){let e,n;return e=new Ue({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function u$(l){let e,n,t,r=l[4].side+"",o,s,u,i,a,f=l[4].average+"",c,m,_,y,O,S,I=l[4].minimum+"",R,A;return{c(){e=C("p"),n=k("Side of the road: "),t=C("b"),o=k(r),s=T(),u=C("p"),i=k("Average width: "),a=C("b"),c=k(f),m=k(`
        meters`),_=T(),y=C("p"),O=k("Minimum width: "),S=C("b"),R=k(I),A=k(`
        meters`)},m(N,L){$(N,e,L),h(e,n),h(e,t),h(t,o),$(N,s,L),$(N,u,L),h(u,i),h(u,a),h(a,c),h(u,m),$(N,_,L),$(N,y,L),h(y,O),h(y,S),h(S,R),h(y,A)},p(N,L){L&16&&r!==(r=N[4].side+"")&&B(o,r),L&16&&f!==(f=N[4].average+"")&&B(c,f),L&16&&I!==(I=N[4].minimum+"")&&B(R,I)},d(N){N&&(p(e),p(s),p(u),p(_),p(y))}}}function c$(l){let e,n;return e=new fe({props:{$$slots:{default:[u$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $$(l){let e,n;const t=[q(Bt),{sourceLayer:Bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["get","average"],l[2],l[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[c$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(Bt)),s&0&&{sourceLayer:Bt},t[2],t[3],s&6&&{paint:{"line-color":Ae(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function p$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[f$],default:[s$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&rl(l);return o=new ke({props:{url:`pmtiles://${mn()}/v1/${Bt}.pmtiles`,$$slots:{default:[$$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.checked=f[0],X(()=>n=!1)),e.$set(m),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=rl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Bt="pavement_widths";function m$(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class _$ extends Y{constructor(e){super(),K(this,e,m$,p$,J,{})}}function g$(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function d$(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function h$(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function b$(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new ee({props:{href:"https://www.pct.bike",$$slots:{default:[d$]},$$scope:{ctx:l}}}),a=new ee({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[h$]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=T(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=T(),o=C("p"),s=k("See "),b(u.$$.fragment),i=k(" and "),b(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(m,_){$(m,e,_),$(m,n,_),$(m,t,_),$(m,r,_),$(m,o,_),h(o,s),v(u,o,null),h(o,i),v(a,o,null),h(o,f),c=!0},p(m,_){const y={};_&1024&&(y.$$scope={dirty:_,ctx:m}),u.$set(y);const O={};_&1024&&(O.$$scope={dirty:_,ctx:m}),a.$set(O)},i(m){c||(g(u.$$.fragment,m),g(a.$$.fragment,m),c=!0)},o(m){d(u.$$.fragment,m),d(a.$$.fragment,m),c=!1},d(m){m&&(p(e),p(n),p(t),p(r),p(o)),w(u),w(a)}}}function v$(l){let e,n,t;return n=new me({props:{$$slots:{default:[b$]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ll(l){let e,n,t,r,o,s,u,i;e=new Ue({props:{colorScale:l[3],limits:l[4]}});function a(_){l[7](_)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new eo({props:f}),W.push(()=>V(t,"value",a));function c(_){l[8](_)}let m={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(m.value=l[1]),s=new _t({props:m}),W.push(()=>V(s,"value",c)),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),o=T(),b(s.$$.fragment)},m(_,y){v(e,_,y),$(_,n,y),v(t,_,y),$(_,o,y),v(s,_,y),i=!0},p(_,y){const O={};!r&&y&1&&(r=!0,O.value=_[0],X(()=>r=!1)),t.$set(O);const S={};!u&&y&2&&(u=!0,S.value=_[1],X(()=>u=!1)),s.$set(S)},i(_){i||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(s.$$.fragment,_),i=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(s.$$.fragment,_),i=!1},d(_){_&&(p(n),p(o)),w(e,_),w(t,_),w(s,_)}}}function w$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Kt(!1),t=Fe(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function k$(l){let e,n;return e=new fe({props:{$$slots:{default:[w$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function y$(l){let e,n;const t=[q(it),{sourceLayer:it},{paint:{"line-color":Ae(["get",l[1]],l[4],l[3]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[2]&&l[0]==it?"visible":"none"}}];let r={$$slots:{default:[k$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(q(it)),s&0&&{sourceLayer:it},s&26&&{paint:{"line-color":Ae(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":Q(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==it?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function S$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Kt(!1),t=Fe(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function C$(l){let e,n;return e=new fe({props:{$$slots:{default:[S$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function T$(l){let e,n;const t=[q(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["get",l[1]],l[4],l[3]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[2]&&l[0]==mt?"visible":"none"}}];let r={$$slots:{default:[C$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(q(mt)),s&0&&{sourceLayer:mt},t[2],t[3],s&26&&{paint:{"line-color":Ae(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":Q(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==mt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function O$(l){let e,n,t,r,o,s,u,i;function a(m){l[6](m)}let f={$$slots:{right:[v$],default:[g$]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),W.push(()=>V(e,"checked",a));let c=l[2]&&ll(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${it}.pmtiles`,$$slots:{default:[y$]},$$scope:{ctx:l}}}),u=new ke({props:{url:`pmtiles://${he()}/v1/${mt}.pmtiles`,$$slots:{default:[T$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),c&&c.c(),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment)},m(m,_){v(e,m,_),$(m,t,_),c&&c.m(m,_),$(m,r,_),v(o,m,_),$(m,s,_),v(u,m,_),i=!0},p(m,[_]){const y={};_&1024&&(y.$$scope={dirty:_,ctx:m}),!n&&_&4&&(n=!0,y.checked=m[2],X(()=>n=!1)),e.$set(y),m[2]?c?(c.p(m,_),_&4&&g(c,1)):(c=ll(m),c.c(),g(c,1),c.m(r.parentNode,r)):c&&(ce(),d(c,1,1,()=>{c=null}),$e());const O={};_&1031&&(O.$$scope={dirty:_,ctx:m}),o.$set(O);const S={};_&1031&&(S.$$scope={dirty:_,ctx:m}),u.$set(S)},i(m){i||(g(e.$$.fragment,m),g(c),g(o.$$.fragment,m),g(u.$$.fragment,m),i=!0)},o(m){d(e.$$.fragment,m),d(c),d(o.$$.fragment,m),d(u.$$.fragment,m),i=!1},d(m){m&&(p(t),p(r),p(s)),w(e,m),c&&c.d(m),w(o,m),w(u,m)}}}let it="pct_commute",mt="pct_school";function L$(l,e,n){let t=Z.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=it,s="baseline",u=!1;function i(m){let _=m.baseline,y=m.gov_target,O=m.go_dutch,S=`<h2>Trip purpose: ${o==it?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${O.toLocaleString()}</b></p>`;else{let I=(y/_).toFixed(1),R=(O/_).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${O.toLocaleString()} (<b>${R}x</b> of baseline)</p>`}return S}function a(m){u=m,n(2,u)}function f(m){o=m,n(0,o)}function c(m){s=m,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class A$ extends Y{constructor(e){super(),K(this,e,L$,O$,J,{})}}function P$(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function I$(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function M$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function N$(l){let e,n,t,r,o,s,u,i,a,f,c,m;return t=new ee({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[I$]},$$scope:{ctx:l}}}),f=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[M$]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=T(),s=C("p"),s.textContent="Data valid as of 1 September, 2023",u=T(),i=C("p"),a=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),c=k(".")},m(_,y){$(_,e,y),h(e,n),v(t,e,null),h(e,r),$(_,o,y),$(_,s,y),$(_,u,y),$(_,i,y),h(i,a),v(f,i,null),h(i,c),m=!0},p(_,y){const O={};y&256&&(O.$$scope={dirty:y,ctx:_}),t.$set(O);const S={};y&256&&(S.$$scope={dirty:y,ctx:_}),f.$set(S)},i(_){m||(g(t.$$.fragment,_),g(f.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(f.$$.fragment,_),m=!1},d(_){_&&(p(e),p(o),p(s),p(u),p(i)),w(t),w(f)}}}function D$(l){let e,n,t;return n=new me({props:{$$slots:{default:[N$]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ol(l){let e,n,t,r,o;e=new Ue({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new eo({props:u}),W.push(()=>V(t,"value",s)),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],X(()=>r=!1)),t.$set(f)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function F$(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,m=l[4][l[7].highest_description]+"",_,y;return{c(){e=C("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=T(),u=C("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),_=k(m),y=k(")")},m(O,S){$(O,e,S),h(e,n),h(e,r),h(e,o),$(O,s,S),$(O,u,S),h(u,i),h(u,f),h(u,c),h(u,_),h(u,y)},p(O,S){S&128&&t!==(t=O[7].indicative_mph+"")&&B(r,t),S&128&&a!==(a=O[7].highest_mph+"")&&B(f,a),S&128&&m!==(m=O[4][O[7].highest_description]+"")&&B(_,m)},d(O){O&&(p(e),p(s),p(u))}}}function E$(l){let e,n;return e=new fe({props:{$$slots:{default:[F$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function j$(l){let e,n;const t=[q(zt),{sourceLayer:zt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["get",l[0]],l[3],l[2]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[E$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&15?te(t,[s&0&&ae(q(zt)),s&0&&{sourceLayer:zt},t[2],t[3],s&13&&{paint:{"line-color":Ae(["get",o[0]],o[3],o[2]),"line-width":He,"line-opacity":Q(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function R$(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={$$slots:{right:[D$],default:[P$]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[1]&&ol(l);return o=new ke({props:{url:`pmtiles://${mn()}/v1/${zt}.pmtiles`,$$slots:{default:[j$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const m={};c&256&&(m.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,m.checked=f[1],X(()=>n=!1)),e.$set(m),f[1]?a?(a.p(f,c),c&2&&g(a,1)):(a=ol(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const _={};c&259&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let zt="road_speeds";function B$(l,e,n){let t=Z.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class z$ extends Y{constructor(e){super(),K(this,e,B$,R$,J,{})}}function H$(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function q$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function U$(l){let e,n,t,r,o,s,u,i,a;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[q$]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=T(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",r=T(),o=C("p"),s=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),u.$set(m)},i(f){a||(g(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),w(u)}}}function G$(l){let e,n,t;return n=new me({props:{$$slots:{default:[U$]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function sl(l){let e,n;return e=new Ue({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function W$(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",m,_;return{c(){e=C("p"),n=k("Average width: "),t=C("b"),o=k(r),s=k(`
        meters`),u=T(),i=C("p"),a=k("Minimum width: "),f=C("b"),m=k(c),_=k(`
        meters`)},m(y,O){$(y,e,O),h(e,n),h(e,t),h(t,o),h(e,s),$(y,u,O),$(y,i,O),h(i,a),h(i,f),h(f,m),h(i,_)},p(y,O){O&16&&r!==(r=y[4].average+"")&&B(o,r),O&16&&c!==(c=y[4].minimum+"")&&B(m,c)},d(y){y&&(p(e),p(u),p(i))}}}function V$(l){let e,n;return e=new fe({props:{$$slots:{default:[W$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function X$(l){let e,n;const t=[q(Ht),{sourceLayer:Ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["get","average"],l[2],l[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[V$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(Ht)),s&0&&{sourceLayer:Ht},t[2],t[3],s&6&&{paint:{"line-color":Ae(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function J$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[G$],default:[H$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&sl(l);return o=new ke({props:{url:`pmtiles://${mn()}/v1/${Ht}.pmtiles`,$$slots:{default:[X$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.checked=f[0],X(()=>n=!1)),e.$set(m),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=sl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Ht="road_widths";function Y$(l,e,n){let t=Z.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class K$ extends Y{constructor(e){super(),K(this,e,Y$,J$,J,{})}}function Z$(l){let e,n,t;return e=new Me({props:{color:Z.trams}}),{c(){b(e.$$.fragment),n=k(`
  Trams`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Q$(l){let e,n,t,r;return t=new et({}),{c(){e=C("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=T(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function x$(l){let e,n,t;return n=new me({props:{$$slots:{default:[Q$]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ep(l){let e,n;const t=[q(qt),{sourceLayer:qt},{paint:{"line-color":Z.trams,"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),e.$on("click",np),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(qt)),s&0&&{sourceLayer:qt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function tp(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[x$],default:[Z$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${qt}.pmtiles`,$$slots:{default:[ep]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let qt="trams";function np(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function rp(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class lp extends Y{constructor(e){super(),K(this,e,rp,tp,J,{})}}function op(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sp(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ip(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[sp]},$$scope:{ctx:l}}}),i=new Ee({}),{c(){e=C("p"),n=k("Data from the "),b(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=T(),s=C("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),$(f,o,c),$(f,s,c),$(f,u,c),v(i,f,c),a=!0},p(f,c){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),t.$set(m)},i(f){a||(g(t.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),w(t),w(i,f)}}}function ap(l){let e,n,t;return n=new me({props:{$$slots:{default:[ip]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function il(l){let e,n,t,r;return t=new Ue({props:{colorScale:l[1],limits:l[2]}}),{c(){e=C("p"),e.textContent="Peak hourly frequency:",n=T(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function fp(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,m,_,y,O,S=l[4].peak_description+"",I,R,A,N,L,M=l[4].total+"",F,P,j=l[4].total_description+"",G,H;return{c(){e=C("p"),n=k("Stop name: "),t=C("b"),o=k(r),s=T(),u=C("p"),i=k("Peak: "),a=C("b"),c=k(f),m=k(`
        buses during the busiest hour of any day`),_=T(),y=C("p"),O=k("The peak hour is "),I=k(S),R=T(),A=C("p"),N=k("Total buses per day: "),L=C("b"),F=k(M),P=k(`
        (for `),G=k(j),H=k(", the busiest day of the week)")},m(E,D){$(E,e,D),h(e,n),h(e,t),h(t,o),$(E,s,D),$(E,u,D),h(u,i),h(u,a),h(a,c),h(u,m),$(E,_,D),$(E,y,D),h(y,O),h(y,I),$(E,R,D),$(E,A,D),h(A,N),h(A,L),h(L,F),h(A,P),h(A,G),h(A,H)},p(E,D){D&16&&r!==(r=E[4].stop_name+"")&&B(o,r),D&16&&f!==(f=E[4].peak+"")&&B(c,f),D&16&&S!==(S=E[4].peak_description+"")&&B(I,S),D&16&&M!==(M=E[4].total+"")&&B(F,M),D&16&&j!==(j=E[4].total_description+"")&&B(G,j)},d(E){E&&(p(e),p(s),p(u),p(_),p(y),p(R),p(A))}}}function up(l){let e,n;return e=new fe({props:{$$slots:{default:[fp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cp(l){let e,n;const t=[q(Ut),{sourceLayer:Ut},{paint:{"circle-color":Ae(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[up]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new pt({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(Ut)),s&0&&{sourceLayer:Ut},s&6&&{paint:{"circle-color":Ae(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function $p(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[ap],default:[op]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&il(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Ut}.pmtiles`,$$slots:{default:[cp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.checked=f[0],X(()=>n=!1)),e.$set(m),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=il(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Ut="bus_stops";function pp(l,e,n){let t=Z.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class mp extends Y{constructor(e){super(),K(this,e,pp,$p,J,{})}}function _p(l){let e,n,t;return{c(){e=C("input"),U(e,"class","govuk-file-upload"),U(e,"id","load-criticals"),U(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=Xe(e,"change",l[5]),n=!0)},p:ne,d(r){r&&p(e),l[7](null),n=!1,t()}}}function al(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[dp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gp(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Me({props:{color:Gt}}),{c(){b(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(u,i){v(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&B(r,t)},i(u){s||(g(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function dp(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[gp]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function hp(l){let e,n,t,r,o,s;e=new On({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[_p]},$$scope:{ctx:l}}}),t=new to({props:{errorMessage:l[3]}});let u=l[2]>0&&al(l);return{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),u&&u.c(),o=Fe()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&g(u,1)):(u=al(i),u.c(),g(u,1),u.m(o.parentNode,o)):u&&(ce(),d(u,1,1,()=>{u=null}),$e())},i(i){s||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(u),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(u),s=!1},d(i){i&&(p(n),p(r),p(o)),w(e,i),w(t,i),u&&u.d(i)}}}function bp(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,m,_,y,O=l[10].notes+"",S,I,R,A,N,L,M,F=l[10].id+"",P,j,G,H,E,D=(l[10].inspector??"???")+"",z,oe,se,ye=l[10].submission_time+"",de,Se,ie,Ie,Te,be=l[10].scheme_reference+"",re,pe,ge,ve=l[10].current_design_stage+"",_e;return{c(){e=C("div"),n=C("h2"),r=k(t),o=T(),s=C("p"),u=C("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=T(),m=C("p"),_=C("u"),_.textContent="Notes",y=k(`
          : `),S=k(O),I=T(),R=C("hr"),A=T(),N=C("p"),L=k("Critical issue ID: "),M=C("b"),P=k(F),j=T(),G=C("p"),H=k("Submitted by "),E=C("b"),z=k(D),oe=k(`
          at
          `),se=C("b"),de=k(ye),Se=T(),ie=C("p"),Ie=k("For scheme "),Te=C("b"),re=k(be),pe=k(`
          in stage
          `),ge=C("b"),_e=k(ve),Ce(e,"max-width","30vw")},m(Pe,Ne){$(Pe,e,Ne),h(e,n),h(n,r),h(e,o),h(e,s),h(s,u),h(s,i),h(s,f),h(e,c),h(e,m),h(m,_),h(m,y),h(m,S),h(e,I),h(e,R),h(e,A),h(e,N),h(N,L),h(N,M),h(M,P),h(e,j),h(e,G),h(G,H),h(G,E),h(E,z),h(G,oe),h(G,se),h(se,de),h(e,Se),h(e,ie),h(ie,Ie),h(ie,Te),h(Te,re),h(ie,pe),h(ie,ge),h(ge,_e)},p(Pe,Ne){Ne&1024&&t!==(t=Pe[10].critical_type+"")&&B(r,t),Ne&1024&&a!==(a=Pe[10].location_description+"")&&B(f,a),Ne&1024&&O!==(O=Pe[10].notes+"")&&B(S,O),Ne&1024&&F!==(F=Pe[10].id+"")&&B(P,F),Ne&1024&&D!==(D=(Pe[10].inspector??"???")+"")&&B(z,D),Ne&1024&&ye!==(ye=Pe[10].submission_time+"")&&B(de,ye),Ne&1024&&be!==(be=Pe[10].scheme_reference+"")&&B(re,be),Ne&1024&&ve!==(ve=Pe[10].current_design_stage+"")&&B(_e,ve)},d(Pe){Pe&&p(e)}}}function vp(l){let e,n;return e=new fe({props:{$$slots:{default:[bp,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function wp(l){let e,n,t,r,o,s;const u=[q("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":Gt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let _=0;_<u.length;_+=1)i=x(i,u[_]);e=new pt({props:i}),e.$on("click",l[6]);const a=[q("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let _=0;_<a.length;_+=1)f=x(f,a[_]);t=new _n({props:f});const c=[q("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Gt,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let m={$$slots:{default:[vp]},$$scope:{ctx:l}};for(let _=0;_<c.length;_+=1)m=x(m,c[_]);return o=new pt({props:m}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment)},m(_,y){v(e,_,y),$(_,n,y),v(t,_,y),$(_,r,y),v(o,_,y),s=!0},p(_,y){const O=y&2?te(u,[u[0],u[1],y&0&&{paint:{"circle-color":Gt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:_[1]?"visible":"none"}},u[4]]):{};e.$set(O);const S=y&2?te(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:_[1]?"visible":"none"}}]):{};t.$set(S);const I=y&2?te(c,[c[0],c[1],c[2],c[3],y&0&&{paint:{"circle-color":Gt,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:_[1]?"visible":"none"}}]):{};y&2048&&(I.$$scope={dirty:y,ctx:_}),o.$set(I)},i(_){s||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),s=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(o.$$.fragment,_),s=!1},d(_){_&&(p(n),p(r)),w(e,_),w(t,_),w(o,_)}}}function kp(l){let e,n,t,r;return e=new Re({props:{label:"Critical Issues",$$slots:{default:[hp]},$$scope:{ctx:l}}}),t=new kt({props:{id:wo,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[wp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let wo="criticals",Gt="red";function yp(l,e,n){let t;Oe(l,tn,_=>n(9,t=_));let r,o=!0,s=0,u="",i=Tn();async function a(_){try{n(4,i=await Oa(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}async function f(_){let y=await t.getSource(wo).getClusterExpansionZoom(_.detail.features[0].properties.cluster_id);t.easeTo({center:_.detail.features[0].geometry.coordinates,zoom:y})}function c(_){W[_?"unshift":"push"](()=>{r=_,n(0,r)})}function m(_){o=_,n(1,o)}return[r,o,s,u,i,a,f,c,m]}class Sp extends Y{constructor(e){super(),K(this,e,yp,kp,J,{})}}function Cp(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tp(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Op(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Tp]},$$scope:{ctx:l}}}),s=new et({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Lp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Op]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function fl(l){let e,n;return e=new zn({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ap(l){let e,n=ul(l[3])+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=ul(r[3])+"")&&B(t,n)},d(r){r&&p(e)}}}function Pp(l){let e,n;return e=new fe({props:{$$slots:{default:[Ap,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ip(l){let e,n;const t=[q(Wt),{sourceLayer:Wt},{paint:{"circle-color":$t(["get","crossing"],{traffic_signals:Z.signalized_crossing},Z.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Pp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new pt({props:r}),e.$on("click",Np),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Wt)),s&0&&{sourceLayer:Wt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Mp(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[Lp],default:[Cp]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&fl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Wt}.pmtiles`,$$slots:{default:[Ip]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.checked=f[0],X(()=>n=!1)),e.$set(m),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=fl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const _={};c&17&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Wt="crossings";function ul(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function Np(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function Dp(l,e,n){let t=!1,r=[["Signalized",Z.signalized_crossing],["Other",Z.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class Fp extends Y{constructor(e){super(),K(this,e,Dp,Mp,J,{})}}function Ep(l){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jp(l){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rp(l){let e,n,t,r,o,s,u,i,a,f,c,m,_;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[jp]},$$scope:{ctx:l}}}),f=new Ee({}),m=new et({}),{c(){e=C("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=T(),t=C("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=T(),o=C("p"),s=k("This layer is built from "),b(u.$$.fragment),i=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=T(),b(f.$$.fragment),c=T(),b(m.$$.fragment)},m(y,O){$(y,e,O),$(y,n,O),$(y,t,O),$(y,r,O),$(y,o,O),h(o,s),v(u,o,null),h(o,i),$(y,a,O),v(f,y,O),$(y,c,O),v(m,y,O),_=!0},p(y,O){const S={};O&32&&(S.$$scope={dirty:O,ctx:y}),u.$set(S)},i(y){_||(g(u.$$.fragment,y),g(f.$$.fragment,y),g(m.$$.fragment,y),_=!0)},o(y){d(u.$$.fragment,y),d(f.$$.fragment,y),d(m.$$.fragment,y),_=!1},d(y){y&&(p(e),p(n),p(t),p(r),p(o),p(a),p(c)),w(u),w(f,y),w(m,y)}}}function Bp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Rp]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function cl(l){let e,n;return e=new Ue({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zp(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=C("p"),n=k("Gradient: "),t=C("b"),o=k(r),s=k(`
        %`)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,i){i&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&B(o,r)},d(u){u&&p(e)}}}function Hp(l){let e,n;return e=new fe({props:{$$slots:{default:[zp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qp(l){let e,n,t,r;const o=[q(st),{sourceLayer:st},{manageHoverState:!0},{paint:{"line-color":Ae(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[Hp]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Le({props:s});const u=[q(st+"_arrows"),{sourceLayer:st},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new _n({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(q(st)),f&0&&{sourceLayer:st},o[2],f&6&&{paint:{"line-color":Ae(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":He,"line-opacity":Q(1,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const m=f&1?te(u,[f&0&&ae(q(st+"_arrows")),f&0&&{sourceLayer:st},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Up(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Bp],default:[Ep]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&cl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${st}.pmtiles`,$$slots:{default:[qp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.checked=f[0],X(()=>n=!1)),e.$set(m),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=cl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let st="gradient";function Gp(l,e,n){let t=Z.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Wp extends Y{constructor(e){super(),K(this,e,Gp,Up,J,{})}}function Vp(l){let e,n,t;return{c(){e=C("img"),t=k(`
  Cycle parking`),un(e.src,n=Io)||U(e,"src",n),U(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function Xp(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jp(l){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yp(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Xp]},$$scope:{ctx:l}}}),i=new ee({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Jp]},$$scope:{ctx:l}}}),f=new et({}),{c(){e=C("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=T(),s=C("p"),u=k("Icon from "),b(i.$$.fragment),a=T(),b(f.$$.fragment)},m(m,_){$(m,e,_),h(e,n),v(t,e,null),h(e,r),$(m,o,_),$(m,s,_),h(s,u),v(i,s,null),$(m,a,_),v(f,m,_),c=!0},p(m,_){const y={};_&8&&(y.$$scope={dirty:_,ctx:m}),t.$set(y);const O={};_&8&&(O.$$scope={dirty:_,ctx:m}),i.$set(O)},i(m){c||(g(t.$$.fragment,m),g(i.$$.fragment,m),g(f.$$.fragment,m),c=!0)},o(m){d(t.$$.fragment,m),d(i.$$.fragment,m),d(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(o),p(s),p(a)),w(t),w(i),w(f,m)}}}function Kp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Yp]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Zp(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=C("p"),n=k("Capacity: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&B(o,r)},d(s){s&&p(e)}}}function Qp(l){let e,n;return e=new fe({props:{$$slots:{default:[Zp,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xp(l){let e,n;const t=[q(Vt),{sourceLayer:Vt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Qp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new _n({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(Vt)),s&0&&{sourceLayer:Vt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function em(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Kp],default:[Vp]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Vt}.pmtiles`,$$slots:{default:[xp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Vt="cycle_parking";function tm(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class nm extends Y{constructor(e){super(),K(this,e,tm,em,J,{})}}function rm(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lm(l){let e,n,t,r;return t=new et({}),{c(){e=C("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=T(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function om(l){let e,n,t;return n=new me({props:{$$slots:{default:[lm]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function $l(l){let e,n,t;return n=new xe({props:{$$slots:{default:[fm]},$$scope:{ctx:l}}}),{c(){e=C("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function sm(l){let e,n,t;return e=new Me({props:{color:Z.education.schools}}),{c(){b(e.$$.fragment),n=k(`
        Schools`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function im(l){let e,n,t;return e=new Me({props:{color:Z.education.colleges}}),{c(){b(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function am(l){let e,n,t;return e=new Me({props:{color:Z.education.universities}}),{c(){b(e.$$.fragment),n=k(`
        Universities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function fm(l){let e,n,t,r,o,s,u,i,a;function f(S){l[3](S)}let c={$$slots:{default:[sm]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),W.push(()=>V(e,"checked",f));function m(S){l[4](S)}let _={$$slots:{default:[im]},$$scope:{ctx:l}};l[1].college!==void 0&&(_.checked=l[1].college),r=new le({props:_}),W.push(()=>V(r,"checked",m));function y(S){l[5](S)}let O={$$slots:{default:[am]},$$scope:{ctx:l}};return l[1].university!==void 0&&(O.checked=l[1].university),u=new le({props:O}),W.push(()=>V(u,"checked",y)),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment),s=T(),b(u.$$.fragment)},m(S,I){v(e,S,I),$(S,t,I),v(r,S,I),$(S,s,I),v(u,S,I),a=!0},p(S,I){const R={};I&128&&(R.$$scope={dirty:I,ctx:S}),!n&&I&2&&(n=!0,R.checked=S[1].school,X(()=>n=!1)),e.$set(R);const A={};I&128&&(A.$$scope={dirty:I,ctx:S}),!o&&I&2&&(o=!0,A.checked=S[1].college,X(()=>o=!1)),r.$set(A);const N={};I&128&&(N.$$scope={dirty:I,ctx:S}),!i&&I&2&&(i=!0,N.checked=S[1].university,X(()=>i=!1)),u.$set(N)},i(S){a||(g(e.$$.fragment,S),g(r.$$.fragment,S),g(u.$$.fragment,S),a=!0)},o(S){d(e.$$.fragment,S),d(r.$$.fragment,S),d(u.$$.fragment,S),a=!1},d(S){S&&(p(t),p(s)),w(e,S),w(r,S),w(u,S)}}}function um(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&B(t,n)},d(r){r&&p(e)}}}function cm(l){let e,n;return e=new fe({props:{$$slots:{default:[um,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $m(l){let e,n;const t=[q(Xt),{sourceLayer:Xt},{paint:{"fill-color":$t(["get","type"],{school:Z.education.schools,college:Z.education.colleges,university:Z.education.universities},"grey"),"fill-opacity":Q(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:pl(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[cm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(q(Xt)),s&0&&{sourceLayer:Xt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:pl(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function pm(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[om],default:[rm]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&$l(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Xt}.pmtiles`,$$slots:{default:[$m]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const m={};c&128&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.checked=f[0],X(()=>n=!1)),e.$set(m),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=$l(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const _={};c&131&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Xt="education";function pl(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function mm(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class _m extends Y{constructor(e){super(),K(this,e,mm,pm,J,{})}}function gm(l){let e,n,t,r;return e=new Me({props:{color:l[4]}}),{c(){b(e.$$.fragment),n=T(),t=k(l[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&B(t,o[2])},i(o){r||(g(e.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function dm(l){let e;const n=l[5].default,t=dt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&ht(t,n,r,r[7],e?vt(n,r[7],o,null):bt(r[7]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function hm(l){let e,n,t;return n=new me({props:{$$slots:{default:[dm]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function bm(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&B(t,n)},d(r){r&&p(e)}}}function vm(l){let e,n;return e=new fe({props:{$$slots:{default:[bm,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function wm(l){let e,n;const t=[q(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":Q(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[vm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&25?te(t,[s&1&&ae(q(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Q(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function km(l){let e,n,t,r,o;function s(i){l[6](i)}let u={$$slots:{right:[hm],default:[gm]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${l[0]}.pmtiles`,$$slots:{default:[wm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],X(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${he()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function ym(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=Z[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class ko extends Y{constructor(e){super(),K(this,e,ym,km,J,{name:0,singularNoun:1,pluralNoun:2})}}function Sm(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cm(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Sm]},$$scope:{ctx:l}}}),s=new et({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Tm(l){let e,n;return e=new ko({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Cm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Om extends Y{constructor(e){super(),K(this,e,null,Tm,J,{})}}function Lm(l){let e,n,t;return{c(){e=C("img"),t=k(`
  Railway Stations`),un(e.src,n=Mo)||U(e,"src",n),U(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function Am(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pm(l){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Im(l){let e,n,t,r,o,s,u,i,a,f,c,m;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Am]},$$scope:{ctx:l}}}),i=new ee({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Pm]},$$scope:{ctx:l}}}),c=new et({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=T(),s=C("p"),u=k("Icon from "),b(i.$$.fragment),a=k(". (Note that not all stations shown are National Rail.)"),f=T(),b(c.$$.fragment)},m(_,y){$(_,e,y),h(e,n),v(t,e,null),h(e,r),$(_,o,y),$(_,s,y),h(s,u),v(i,s,null),h(s,a),$(_,f,y),v(c,_,y),m=!0},p(_,y){const O={};y&8&&(O.$$scope={dirty:y,ctx:_}),t.$set(O);const S={};y&8&&(S.$$scope={dirty:y,ctx:_}),i.$set(S)},i(_){m||(g(t.$$.fragment,_),g(i.$$.fragment,_),g(c.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(i.$$.fragment,_),d(c.$$.fragment,_),m=!1},d(_){_&&(p(e),p(o),p(s),p(f)),w(t),w(i),w(c,_)}}}function Mm(l){let e,n,t;return n=new me({props:{$$slots:{default:[Im]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Nm(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&B(t,n)},d(r){r&&p(e)}}}function Dm(l){let e,n;return e=new fe({props:{$$slots:{default:[Nm,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Fm(l){let e,n;const t=[q(jn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Dm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new _n({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(q(jn)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Em(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Mm],default:[Lm]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new kt({props:{data:`${he()}/v1/${jn}.geojson`,$$slots:{default:[Fm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let jn="railway_stations";function jm(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Rm extends Y{constructor(e){super(),K(this,e,jm,Em,J,{})}}function Bm(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zm(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hm(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Bm]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[zm]},$$scope:{ctx:l}}}),i=new et({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),r=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function qm(l){let e,n;return e=new ko({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Hm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Um extends Y{constructor(e){super(),K(this,e,null,qm,J,{})}}function Gm(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wm(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vm(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xm(l){let e,n,t,r,o,s,u,i,a,f,c,m,_,y,O,S,I,R,A,N,L,M,F;return t=new ee({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Wm]},$$scope:{ctx:l}}}),I=new ee({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Vm]},$$scope:{ctx:l}}}),M=new Ee({}),{c(){e=C("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=T(),s=C("ul"),u=C("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=T(),a=C("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=T(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,m=T(),_=C("li"),_.textContent='The "pedestrians" category also include mobility scooters',y=T(),O=C("li"),S=k("All limitations "),b(I.$$.fragment),R=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),A=T(),N=C("p"),N.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=T(),b(M.$$.fragment)},m(P,j){$(P,e,j),h(e,n),v(t,e,null),h(e,r),$(P,o,j),$(P,s,j),h(s,u),h(s,i),h(s,a),h(s,f),h(s,c),h(s,m),h(s,_),h(s,y),h(s,O),h(O,S),v(I,O,null),h(O,R),$(P,A,j),$(P,N,j),$(P,L,j),v(M,P,j),F=!0},p(P,j){const G={};j&16777216&&(G.$$scope={dirty:j,ctx:P}),t.$set(G);const H={};j&16777216&&(H.$$scope={dirty:j,ctx:P}),I.$set(H)},i(P){F||(g(t.$$.fragment,P),g(I.$$.fragment,P),g(M.$$.fragment,P),F=!0)},o(P){d(t.$$.fragment,P),d(I.$$.fragment,P),d(M.$$.fragment,P),F=!1},d(P){P&&(p(e),p(o),p(s),p(A),p(N),p(L)),w(t),w(I),w(M,P)}}}function Jm(l){let e,n,t;return n=new me({props:{$$slots:{default:[Xm]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ml(l){let e,n,t,r,o,s,u,i,a,f,c,m,_;return n=new xe({props:{small:!0,$$slots:{default:[xm]},$$scope:{ctx:l}}}),f=new zn({props:{rows:l[14]}}),{c(){e=C("div"),b(n.$$.fragment),t=T(),r=C("div"),o=k(`Filter years:
      `),s=C("input"),u=k(`
      -
      `),i=C("input"),a=T(),b(f.$$.fragment),U(s,"type","number"),U(s,"min",2017),U(s,"max",2022),U(s,"class","svelte-1ft65rw"),U(i,"type","number"),U(i,"min",2017),U(i,"max",2022),U(i,"class","svelte-1ft65rw"),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(y,O){$(y,e,O),v(n,e,null),h(e,t),h(e,r),h(r,o),h(r,s),Ke(s,l[4]),h(r,u),h(r,i),Ke(i,l[5]),h(e,a),v(f,e,null),c=!0,m||(_=[Xe(s,"input",l[20]),Xe(i,"input",l[21])],m=!0)},p(y,O){const S={};O&16777231&&(S.$$scope={dirty:O,ctx:y}),n.$set(S),O&16&&Qt(s.value)!==y[4]&&Ke(s,y[4]),O&32&&Qt(i.value)!==y[5]&&Ke(i,y[5])},i(y){c||(g(n.$$.fragment,y),g(f.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(f.$$.fragment,y),c=!1},d(y){y&&p(e),w(n),w(f),m=!1,Bn(_)}}}function Ym(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Km(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zm(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qm(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xm(l){let e,n,t,r,o,s,u,i,a,f,c,m;function _(L){l[16](L)}let y={$$slots:{default:[Ym]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new le({props:y}),W.push(()=>V(e,"checked",_));function O(L){l[17](L)}let S={$$slots:{default:[Km]},$$scope:{ctx:l}};l[1]!==void 0&&(S.checked=l[1]),r=new le({props:S}),W.push(()=>V(r,"checked",O));function I(L){l[18](L)}let R={$$slots:{default:[Zm]},$$scope:{ctx:l}};l[2]!==void 0&&(R.checked=l[2]),u=new le({props:R}),W.push(()=>V(u,"checked",I));function A(L){l[19](L)}let N={$$slots:{default:[Qm]},$$scope:{ctx:l}};return l[3]!==void 0&&(N.checked=l[3]),f=new le({props:N}),W.push(()=>V(f,"checked",A)),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment),s=T(),b(u.$$.fragment),a=T(),b(f.$$.fragment)},m(L,M){v(e,L,M),$(L,t,M),v(r,L,M),$(L,s,M),v(u,L,M),$(L,a,M),v(f,L,M),m=!0},p(L,M){const F={};M&16777216&&(F.$$scope={dirty:M,ctx:L}),!n&&M&1&&(n=!0,F.checked=L[0],X(()=>n=!1)),e.$set(F);const P={};M&16777216&&(P.$$scope={dirty:M,ctx:L}),!o&&M&2&&(o=!0,P.checked=L[1],X(()=>o=!1)),r.$set(P);const j={};M&16777216&&(j.$$scope={dirty:M,ctx:L}),!i&&M&4&&(i=!0,j.checked=L[2],X(()=>i=!1)),u.$set(j);const G={};M&16777216&&(G.$$scope={dirty:M,ctx:L}),!c&&M&8&&(c=!0,G.checked=L[3],X(()=>c=!1)),f.$set(G)},i(L){m||(g(e.$$.fragment,L),g(r.$$.fragment,L),g(u.$$.fragment,L),g(f.$$.fragment,L),m=!0)},o(L){d(e.$$.fragment,L),d(r.$$.fragment,L),d(u.$$.fragment,L),d(f.$$.fragment,L),m=!1},d(L){L&&(p(t),p(s),p(a)),w(e,L),w(r,L),w(u,L),w(f,L)}}}function _l(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=C("p"),n=k("Pedestrian location: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&B(o,r)},d(s){s&&p(e)}}}function gl(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=C("p"),n=k("Pedestrian movement: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&B(o,r)},d(s){s&&p(e)}}}function e_(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,m,_,y,O,S=dl(l[23])+"",I,R,A,N,L,M=l[23].pedestrian_location&&_l(l),F=l[23].pedestrian_movement&&gl(l);return{c(){e=C("p"),n=k("Year: "),t=C("b"),o=k(r),s=T(),u=C("p"),i=k("Severity: "),a=C("b"),c=k(f),m=T(),_=C("p"),y=k("Casualties: "),O=C("b"),I=k(S),R=T(),M&&M.c(),A=T(),F&&F.c(),N=T(),L=C("p"),L.textContent="Click to open full report in CycleStreets"},m(P,j){$(P,e,j),h(e,n),h(e,t),h(t,o),$(P,s,j),$(P,u,j),h(u,i),h(u,a),h(a,c),$(P,m,j),$(P,_,j),h(_,y),h(_,O),h(O,I),$(P,R,j),M&&M.m(P,j),$(P,A,j),F&&F.m(P,j),$(P,N,j),$(P,L,j)},p(P,j){j&8388608&&r!==(r=P[23].year+"")&&B(o,r),j&8388608&&f!==(f=P[10][P[23].severity]+"")&&B(c,f),j&8388608&&S!==(S=dl(P[23])+"")&&B(I,S),P[23].pedestrian_location?M?M.p(P,j):(M=_l(P),M.c(),M.m(A.parentNode,A)):M&&(M.d(1),M=null),P[23].pedestrian_movement?F?F.p(P,j):(F=gl(P),F.c(),F.m(N.parentNode,N)):F&&(F.d(1),F=null)},d(P){P&&(p(e),p(s),p(u),p(m),p(_),p(R),p(A),p(N),p(L)),M&&M.d(P),F&&F.d(P)}}}function t_(l){let e,n;return e=new fe({props:{$$slots:{default:[e_,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function n_(l){let e,n;const t=[q(Jt),{sourceLayer:Jt},{paint:{"circle-color":Ae(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[t_]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new pt({props:r}),e.$on("click",l_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&14528?te(t,[s&0&&ae(q(Jt)),s&0&&{sourceLayer:Jt},s&14336&&{paint:{"circle-color":Ae(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function r_(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={$$slots:{right:[Jm],default:[Gm]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[6]&&ml(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Jt}.pmtiles`,$$slots:{default:[n_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const m={};c&16777216&&(m.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,m.checked=f[6],X(()=>n=!1)),e.$set(m),f[6]?a?(a.p(f,c),c&64&&g(a,1)):(a=ml(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const _={};c&16777408&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Jt="stats19";function dl(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function l_(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function o_(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(G,H,E,D,z,oe){let se=["any"];return o&&se.push(["get","pedestrian"]),s&&se.push(["get","cyclist"]),u&&se.push(["get","horse_rider"]),i&&se.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],se]}let m={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},_={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},O=Z.sequential_low_to_high[4],S=Z.sequential_low_to_high[2],I=Z.sequential_low_to_high[0],R=[["Fatal",O],["Serious",S],["Slight",I]];function A(G){r=G,n(6,r)}function N(G){o=G,n(0,o)}function L(G){s=G,n(1,s)}function M(G){u=G,n(2,u)}function F(G){i=G,n(3,i)}function P(){a=Qt(this.value),n(4,a)}function j(){f=Qt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,m,_,y,O,S,I,R,A,N,L,M,F,P,j]}class s_ extends Y{constructor(e){super(),K(this,e,o_,r_,J,{})}}function i_(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function a_(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function f_(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function u_(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new ee({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[a_]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[f_]},$$scope:{ctx:l}}}),f=new Ee({}),{c(){e=C("p"),n=k("AADF (annual average daily flow) data from "),b(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=T(),i=C("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=T(),b(f.$$.fragment)},m(m,_){$(m,e,_),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(m,u,_),$(m,i,_),$(m,a,_),v(f,m,_),c=!0},p(m,_){const y={};_&64&&(y.$$scope={dirty:_,ctx:m}),t.$set(y);const O={};_&64&&(O.$$scope={dirty:_,ctx:m}),o.$set(O)},i(m){c||(g(t.$$.fragment,m),g(o.$$.fragment,m),g(f.$$.fragment,m),c=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(u),p(i),p(a)),w(t),w(o),w(f,m)}}}function c_(l){let e,n,t;return n=new me({props:{$$slots:{default:[u_]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function hl(l){let e,n;return e=new Ue({props:{colorScale:l[1],limits:l[3]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $_(l){let e,n=l[5].location+"",t,r,o,s,u=l[5].year+"",i,a,f,c=l[5].motor_vehicles.toLocaleString()+"",m,_,y,O,S=l[5].year+"",I,R,A,N=l[5].pedal_cycles.toLocaleString()+"",L,M,F,P,j,G=l[5].method+"",H;return{c(){e=C("h2"),t=k(n),r=T(),o=C("p"),s=k("Total motor vehicles ("),i=k(u),a=k(` AADF):
        `),f=C("b"),m=k(c),_=T(),y=C("p"),O=k("Total pedal cycles ("),I=k(S),R=k(` AADF):
        `),A=C("b"),L=k(N),M=T(),F=C("p"),P=k("Count method: "),j=C("b"),H=k(G)},m(E,D){$(E,e,D),h(e,t),$(E,r,D),$(E,o,D),h(o,s),h(o,i),h(o,a),h(o,f),h(f,m),$(E,_,D),$(E,y,D),h(y,O),h(y,I),h(y,R),h(y,A),h(A,L),$(E,M,D),$(E,F,D),h(F,P),h(F,j),h(j,H)},p(E,D){D&32&&n!==(n=E[5].location+"")&&B(t,n),D&32&&u!==(u=E[5].year+"")&&B(i,u),D&32&&c!==(c=E[5].motor_vehicles.toLocaleString()+"")&&B(m,c),D&32&&S!==(S=E[5].year+"")&&B(I,S),D&32&&N!==(N=E[5].pedal_cycles.toLocaleString()+"")&&B(L,N),D&32&&G!==(G=E[5].method+"")&&B(H,G)},d(E){E&&(p(e),p(r),p(o),p(_),p(y),p(M),p(F))}}}function p_(l){let e,n;return e=new fe({props:{$$slots:{default:[$_,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function m_(l){let e,n;const t=[q(Yt),{sourceLayer:Yt},{paint:{"circle-color":Ae(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[p_]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new pt({props:r}),e.$on("click",g_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(q(Yt)),s&0&&{sourceLayer:Yt},s&6&&{paint:{"circle-color":Ae(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function __(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={$$slots:{right:[c_],default:[i_]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&hl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Yt}.pmtiles`,$$slots:{default:[m_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.checked=f[0],X(()=>n=!1)),e.$set(m),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=hl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Yt="vehicle_counts";function g_(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function d_(l,e,n){let t=Z.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class h_ extends Y{constructor(e){super(),K(this,e,d_,__,J,{})}}function b_(l){let e,n,t,r,o,s,u,i;return e=new _m({}),t=new Om({}),o=new Um({}),u=new Rm({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),$(a,r,f),v(o,a,f),$(a,s,f),v(u,a,f),i=!0},i(a){i||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),w(e,a),w(t,a),w(o,a),w(u,a)}}}function v_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[b_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function w_(l){let e,n,t,r,o,s,u,i,a,f,c,m;return e=new Ac({}),t=new o$({}),o=new Bc({}),u=new Yc({}),a=new nm({}),c=new Fp({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),b(a.$$.fragment),f=T(),b(c.$$.fragment)},m(_,y){v(e,_,y),$(_,n,y),v(t,_,y),$(_,r,y),v(o,_,y),$(_,s,y),v(u,_,y),$(_,i,y),v(a,_,y),$(_,f,y),v(c,_,y),m=!0},i(_){m||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),g(u.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),m=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(o.$$.fragment,_),d(u.$$.fragment,_),d(a.$$.fragment,_),d(c.$$.fragment,_),m=!1},d(_){_&&(p(n),p(r),p(s),p(i),p(f)),w(e,_),w(t,_),w(o,_),w(u,_),w(a,_),w(c,_)}}}function k_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[w_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function y_(l){let e,n,t,r,o,s;return e=new gc({}),t=new lp({}),o=new mp({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment)},m(u,i){v(e,u,i),$(u,n,i),v(t,u,i),$(u,r,i),v(o,u,i),s=!0},i(u){s||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function S_(l){let e,n,t,r,o,s,u,i,a,f;return e=new Ou({}),t=new nc({}),o=new Df({}),u=new nu({}),a=new gu({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),b(a.$$.fragment)},m(c,m){v(e,c,m),$(c,n,m),v(t,c,m),$(c,r,m),v(o,c,m),$(c,s,m),v(u,c,m),$(c,i,m),v(a,c,m),f=!0},i(c){f||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(u,c),w(a,c)}}}function C_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[S_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function T_(l){let e,n,t,r;return e=new yf({}),t=new Wf({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function O_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[T_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function L_(l){let e,n,t,r,o,s;return e=new K$({}),t=new _$({}),o=new z$({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment)},m(u,i){v(e,u,i),$(u,n,i),v(t,u,i),$(u,r,i),v(o,u,i),s=!0},i(u){s||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function A_(l){let e,n,t,r,o,s,u,i,a=Ln()=="Private (development)",f,c,m,_,y;e=new h_({}),t=new s_({}),o=new A$({}),u=new Wp({});let O=a&&L_();return c=new Fu({}),_=new Wu({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),O&&O.c(),f=T(),b(c.$$.fragment),m=T(),b(_.$$.fragment)},m(S,I){v(e,S,I),$(S,n,I),v(t,S,I),$(S,r,I),v(o,S,I),$(S,s,I),v(u,S,I),$(S,i,I),O&&O.m(S,I),$(S,f,I),v(c,S,I),$(S,m,I),v(_,S,I),y=!0},p:ne,i(S){y||(g(e.$$.fragment,S),g(t.$$.fragment,S),g(o.$$.fragment,S),g(u.$$.fragment,S),g(O),g(c.$$.fragment,S),g(_.$$.fragment,S),y=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(o.$$.fragment,S),d(u.$$.fragment,S),d(O),d(c.$$.fragment,S),d(_.$$.fragment,S),y=!1},d(S){S&&(p(n),p(r),p(s),p(i),p(f),p(m)),w(e,S),w(t,S),w(o,S),w(u,S),O&&O.d(S),w(c,S),w(_,S)}}}function P_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[A_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function I_(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new Uo({props:u}),W.push(()=>V(e,"enabled",s)),r=new Ss({}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],X(()=>n=!1)),e.$set(f)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function M_(l){let e,n,t,r,o,s,u,i,a,f,c,m,_,y,O,S,I,R;return e=new Sp({}),t=new Re({props:{label:"Trip generators",$$slots:{default:[v_]},$$scope:{ctx:l}}}),o=new Re({props:{label:"Existing infrastructure",$$slots:{default:[k_]},$$scope:{ctx:l}}}),u=new Re({props:{label:"Public transit",$$slots:{default:[y_]},$$scope:{ctx:l}}}),a=new Re({props:{label:"Boundaries",$$slots:{default:[C_]},$$scope:{ctx:l}}}),c=new Re({props:{label:"Census",$$slots:{default:[O_]},$$scope:{ctx:l}}}),_=new Re({props:{label:"Other",$$slots:{default:[P_]},$$scope:{ctx:l}}}),O=new Re({props:{label:"Tools",$$slots:{default:[I_]},$$scope:{ctx:l}}}),I=new qo({props:{disabled:!l[1]}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),b(a.$$.fragment),f=T(),b(c.$$.fragment),m=T(),b(_.$$.fragment),y=T(),b(O.$$.fragment),S=T(),b(I.$$.fragment)},m(A,N){v(e,A,N),$(A,n,N),v(t,A,N),$(A,r,N),v(o,A,N),$(A,s,N),v(u,A,N),$(A,i,N),v(a,A,N),$(A,f,N),v(c,A,N),$(A,m,N),v(_,A,N),$(A,y,N),v(O,A,N),$(A,S,N),v(I,A,N),R=!0},p(A,N){const L={};N&16&&(L.$$scope={dirty:N,ctx:A}),t.$set(L);const M={};N&16&&(M.$$scope={dirty:N,ctx:A}),o.$set(M);const F={};N&16&&(F.$$scope={dirty:N,ctx:A}),u.$set(F);const P={};N&16&&(P.$$scope={dirty:N,ctx:A}),a.$set(P);const j={};N&16&&(j.$$scope={dirty:N,ctx:A}),c.$set(j);const G={};N&16&&(G.$$scope={dirty:N,ctx:A}),_.$set(G);const H={};N&17&&(H.$$scope={dirty:N,ctx:A}),O.$set(H);const E={};N&2&&(E.disabled=!A[1]),I.$set(E)},i(A){R||(g(e.$$.fragment,A),g(t.$$.fragment,A),g(o.$$.fragment,A),g(u.$$.fragment,A),g(a.$$.fragment,A),g(c.$$.fragment,A),g(_.$$.fragment,A),g(O.$$.fragment,A),g(I.$$.fragment,A),R=!0)},o(A){d(e.$$.fragment,A),d(t.$$.fragment,A),d(o.$$.fragment,A),d(u.$$.fragment,A),d(a.$$.fragment,A),d(c.$$.fragment,A),d(_.$$.fragment,A),d(O.$$.fragment,A),d(I.$$.fragment,A),R=!1},d(A){A&&(p(n),p(r),p(s),p(i),p(f),p(m),p(y),p(S)),w(e,A),w(t,A),w(o,A),w(u,A),w(a,A),w(c,A),w(_,A),w(O,A),w(I,A)}}}function N_(l){let e,n;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function D_(l){let e,n,t,r;return e=new Re({props:{label:"Layers",open:!0,$$slots:{default:[M_]},$$scope:{ctx:l}}}),t=new kt({props:{data:l[2],$$slots:{default:[N_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function F_(l,e,n){let t,r;Oe(l,Ar,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&Ar.set(!t)},[t,r,o,s]}class E_ extends Y{constructor(e){super(),K(this,e,F_,D_,J,{})}}function bl(l){let e;return{c(){e=C("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function j_(l){let e,n=l[0]&&bl();return{c(){n&&n.c(),e=Fe()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=bl(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(t){t&&p(e),n&&n.d(t)}}}function R_(l,e,n){let{loadFile:t}=e,r=!0;return nn(async()=>{let s=await(await fetch(`${mn()}/v1/all_schemes_output.geojson.gz`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class B_ extends Y{constructor(e){super(),K(this,e,R_,j_,J,{loadFile:1})}}function vl(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=C("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),h(e,n),h(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&B(r,t)},d(s){s&&p(e)}}}function z_(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function H_(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function q_(l){let e,n,t,r;return e=new ct({props:{$$slots:{default:[z_]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new ct({props:{$$slots:{default:[H_]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function U_(l){var j,G,H,E;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((j=l[0].browse)==null?void 0:j.authority_or_region)+"",a,f,c,m,_=((G=l[0].browse)==null?void 0:G.capital_scheme_id)+"",y,O,S,I,R=((H=l[0].browse)==null?void 0:H.funding_programme)+"",A,N,L,M,F,P=((E=l[0].browse)==null?void 0:E.current_milestone)&&vl(l);return M=new Go({props:{$$slots:{default:[q_]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("Scheme reference: "),r=k(t),o=T(),s=C("p"),u=k("Authority or region: "),a=k(i),f=T(),c=C("p"),m=k("Capital scheme ID: "),y=k(_),O=T(),S=C("p"),I=k("Funding programme: "),A=k(R),N=T(),P&&P.c(),L=T(),b(M.$$.fragment)},m(D,z){$(D,e,z),h(e,n),h(e,r),$(D,o,z),$(D,s,z),h(s,u),h(s,a),$(D,f,z),$(D,c,z),h(c,m),h(c,y),$(D,O,z),$(D,S,z),h(S,I),h(S,A),$(D,N,z),P&&P.m(D,z),$(D,L,z),v(M,D,z),F=!0},p(D,z){var se,ye,de,Se;(!F||z&1)&&t!==(t=D[0].scheme_reference+"")&&B(r,t),(!F||z&1)&&i!==(i=((se=D[0].browse)==null?void 0:se.authority_or_region)+"")&&B(a,i),(!F||z&1)&&_!==(_=((ye=D[0].browse)==null?void 0:ye.capital_scheme_id)+"")&&B(y,_),(!F||z&1)&&R!==(R=((de=D[0].browse)==null?void 0:de.funding_programme)+"")&&B(A,R),(Se=D[0].browse)!=null&&Se.current_milestone?P?P.p(D,z):(P=vl(D),P.c(),P.m(L.parentNode,L)):P&&(P.d(1),P=null);const oe={};z&32&&(oe.$$scope={dirty:z,ctx:D}),M.$set(oe)},i(D){F||(g(M.$$.fragment,D),F=!0)},o(D){d(M.$$.fragment,D),F=!1},d(D){D&&(p(e),p(o),p(s),p(f),p(c),p(O),p(S),p(N),p(L)),P&&P.d(D),w(M,D)}}}function G_(l){let e,n;return e=new Re({props:{label:`${l[0].scheme_name}`,$$slots:{default:[U_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function W_(l,e,n){let t,r;Oe(l,Tt,i=>n(3,t=i)),Oe(l,tn,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(No(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(m=>m.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";Do(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class V_ extends Y{constructor(e){super(),K(this,e,W_,G_,J,{scheme:0})}}function wl(l){let e,n,t,r=l[0].status+"",o;return{c(){e=C("p"),n=k("Status: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].status+"")&&B(o,r)},d(s){s&&p(e)}}}function kl(l){let e,n,t,r=l[0].timescale+"",o;return{c(){e=C("p"),n=k("Timescale: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale+"")&&B(o,r)},d(s){s&&p(e)}}}function yl(l){let e,n,t,r=l[0].timescale_year+"",o;return{c(){e=C("p"),n=k("Estimated completion year: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale_year+"")&&B(o,r)},d(s){s&&p(e)}}}function Sl(l){let e,n,t,r=l[0].year_published+"",o;return{c(){e=C("p"),n=k("Scheme most recently published: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_published+"")&&B(o,r)},d(s){s&&p(e)}}}function Cl(l){let e,n,t,r=l[0].year_consulted+"",o;return{c(){e=C("p"),n=k("Scheme most recently consulted on: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_consulted+"")&&B(o,r)},d(s){s&&p(e)}}}function X_(l){let e,n,t,r,o,s=l[0].status&&wl(l),u=l[0].timescale&&kl(l),i=l[0].timescale_year&&yl(l),a=l[0].year_published&&Sl(l),f=l[0].year_consulted&&Cl(l);return{c(){s&&s.c(),e=T(),u&&u.c(),n=T(),i&&i.c(),t=T(),a&&a.c(),r=T(),f&&f.c(),o=Fe()},m(c,m){s&&s.m(c,m),$(c,e,m),u&&u.m(c,m),$(c,n,m),i&&i.m(c,m),$(c,t,m),a&&a.m(c,m),$(c,r,m),f&&f.m(c,m),$(c,o,m)},p(c,[m]){c[0].status?s?s.p(c,m):(s=wl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?u?u.p(c,m):(u=kl(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),c[0].timescale_year?i?i.p(c,m):(i=yl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,m):(a=Sl(c),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null),c[0].year_consulted?f?f.p(c,m):(f=Cl(c),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i:ne,o:ne,d(c){c&&(p(e),p(n),p(t),p(r),p(o)),s&&s.d(c),u&&u.d(c),i&&i.d(c),a&&a.d(c),f&&f.d(c)}}}function J_(l,e,n){let{props:t}=e;return l.$$set=r=>{"props"in r&&n(0,t=r.props)},[t]}class yo extends Y{constructor(e){super(),K(this,e,J_,X_,J,{props:0})}}function Tl(l){let e,n,t,r=l[0].budget.toLocaleString()+"",o,s;return{c(){e=C("p"),n=k("Cost: "),t=C("b"),o=k(r),s=k(`
    GBP`)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,i){i&1&&r!==(r=u[0].budget.toLocaleString()+"")&&B(o,r)},d(u){u&&p(e)}}}function Ol(l){let e;return{c(){e=C("p"),e.textContent="Development is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ll(l){let e;return{c(){e=C("p"),e.textContent="Construction is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Al(l){let e,n,t,r;return{c(){e=C("p"),n=k("Funding sources: "),t=C("b"),r=k(l[1])},m(o,s){$(o,e,s),h(e,n),h(e,t),h(t,r)},p(o,s){s&2&&B(r,o[1])},d(o){o&&p(e)}}}function Y_(l){let e,n,t,r,o=l[0].budget&&Tl(l),s=l[0].development_funded&&Ol(),u=l[0].construction_funded&&Ll(),i=l[1]&&Al(l);return{c(){o&&o.c(),e=T(),s&&s.c(),n=T(),u&&u.c(),t=T(),i&&i.c(),r=Fe()},m(a,f){o&&o.m(a,f),$(a,e,f),s&&s.m(a,f),$(a,n,f),u&&u.m(a,f),$(a,t,f),i&&i.m(a,f),$(a,r,f)},p(a,[f]){a[0].budget?o?o.p(a,f):(o=Tl(a),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),a[0].development_funded?s||(s=Ol(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),a[0].construction_funded?u||(u=Ll(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),a[1]?i?i.p(a,f):(i=Al(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i:ne,o:ne,d(a){a&&(p(e),p(n),p(t),p(r)),o&&o.d(a),s&&s.d(a),u&&u.d(a),i&&i.d(a)}}}function K_(l){if(!l.funding_sources)return"";let e=[];for(let n of["atf2","atf3","atf4","atf4e","crsts","luf"])l.funding_sources[n]&&e.push(n.toUpperCase());return l.funding_sources.other&&e.push(l.funding_sources.other),e.join(", ")}function Z_(l,e,n){let t,{props:r}=e;return l.$$set=o=>{"props"in o&&n(0,r=o.props)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=K_(r))},[r,t]}class So extends Y{constructor(e){super(),K(this,e,Z_,Y_,J,{props:0})}}function yn(l){const e=l.slice(),n=e[1].pipeline;return e[5]=n,e}function Sn(l){const e=l.slice(),n=e[0].pipeline;return e[5]=n,e}function Pl(l){let e,n,t,r=Yn(l[0].length_meters)+"",o;return{c(){e=C("p"),n=k("Length: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=Yn(s[0].length_meters)+"")&&B(o,r)},d(s){s&&p(e)}}}function Il(l){let e,n=ft(l[0].description,l[2])+"";return{c(){e=C("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=ft(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Ml(l){let e,n,t,r,o,s,u,i=l[5].atf4_type&&Nl(l),a=l[5].accuracy&&Dl(l),f=l[5].is_alternative&&Fl();return r=new So({props:{props:l[5]}}),s=new yo({props:{props:l[5]}}),{c(){i&&i.c(),e=T(),a&&a.c(),n=T(),f&&f.c(),t=T(),b(r.$$.fragment),o=T(),b(s.$$.fragment)},m(c,m){i&&i.m(c,m),$(c,e,m),a&&a.m(c,m),$(c,n,m),f&&f.m(c,m),$(c,t,m),v(r,c,m),$(c,o,m),v(s,c,m),u=!0},p(c,m){c[5].atf4_type?i?i.p(c,m):(i=Nl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].accuracy?a?a.p(c,m):(a=Dl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].is_alternative?f||(f=Fl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const _={};m&1&&(_.props=c[5]),r.$set(_);const y={};m&1&&(y.props=c[5]),s.$set(y)},i(c){u||(g(r.$$.fragment,c),g(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function Nl(l){let e,n,t,r=l[5].atf4_type+"",o;return{c(){e=C("p"),n=k("ATF4 type: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].atf4_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Dl(l){let e,n,t,r=l[5].accuracy+"",o;return{c(){e=C("p"),n=k("Accuracy: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].accuracy+"")&&B(o,r)},d(s){s&&p(e)}}}function Fl(l){let e;return{c(){e=C("p"),e.textContent="Represents an alternative route"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function El(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.capital_scheme_id)+"",o;return{c(){e=C("p"),n=k("Capital scheme ID: "),t=C("b"),o=k(r)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o)},p(u,i){var a;i&2&&r!==(r=((a=u[1].browse)==null?void 0:a.capital_scheme_id)+"")&&B(o,r)},d(u){u&&p(e)}}}function jl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.current_milestone)+"",o;return{c(){e=C("p"),n=k("Current milestone: "),t=C("b"),o=k(r)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o)},p(u,i){var a;i&2&&r!==(r=((a=u[1].browse)==null?void 0:a.current_milestone)+"")&&B(o,r)},d(u){u&&p(e)}}}function Rl(l){let e,n,t,r,o,s,u,i=l[5].scheme_type&&Bl(l),a=l[5].atf4_lead_type&&zl(l),f=l[5].scheme_description&&Hl(l);return r=new So({props:{props:l[5]}}),s=new yo({props:{props:l[5]}}),{c(){i&&i.c(),e=T(),a&&a.c(),n=T(),f&&f.c(),t=T(),b(r.$$.fragment),o=T(),b(s.$$.fragment)},m(c,m){i&&i.m(c,m),$(c,e,m),a&&a.m(c,m),$(c,n,m),f&&f.m(c,m),$(c,t,m),v(r,c,m),$(c,o,m),v(s,c,m),u=!0},p(c,m){c[5].scheme_type?i?i.p(c,m):(i=Bl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].atf4_lead_type?a?a.p(c,m):(a=zl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].scheme_description?f?f.p(c,m):(f=Hl(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const _={};m&2&&(_.props=c[5]),r.$set(_);const y={};m&2&&(y.props=c[5]),s.$set(y)},i(c){u||(g(r.$$.fragment,c),g(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function Bl(l){let e,n,t,r=l[5].scheme_type+"",o;return{c(){e=C("p"),n=k("Scheme type: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].scheme_type+"")&&B(o,r)},d(s){s&&p(e)}}}function zl(l){let e,n,t,r=l[5].atf4_lead_type+"",o;return{c(){e=C("p"),n=k("ATF4 lead type: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].atf4_lead_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Hl(l){let e,n,t=l[5].scheme_description+"",r;return{c(){e=C("p"),n=k("Descripton: "),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,r)},p(o,s){s&2&&t!==(t=o[5].scheme_description+"")&&B(r,t)},d(o){o&&p(e)}}}function Q_(l){var Pe,Ne,Ot,Je;let e,n,t,r=ft(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,m,_,y,O,S,I,R=ft(l[1].scheme_name??"",l[3])+"",A,N,L=ft(l[0].scheme_reference,l[3])+"",M,F,P,j,G,H=((Pe=l[1].browse)==null?void 0:Pe.authority_or_region)+"",E,D,z,oe,se,ye,de=((Ne=l[1].browse)==null?void 0:Ne.funding_programme)+"",Se,ie,Ie,Te,be=l[0].length_meters&&Pl(l),re=l[0].description&&Il(l),pe=l[0].pipeline&&Ml(Sn(l)),ge=((Ot=l[1].browse)==null?void 0:Ot.capital_scheme_id)&&El(l),ve=((Je=l[1].browse)==null?void 0:Je.current_milestone)&&jl(l),_e=l[1].pipeline&&Rl(yn(l));return{c(){e=C("div"),n=C("h2"),t=new Kt(!1),o=k(" ("),u=k(s),i=k(")"),a=T(),be&&be.c(),f=T(),re&&re.c(),c=T(),pe&&pe.c(),m=T(),_=C("hr"),y=T(),O=C("p"),S=k("Part of scheme: "),I=new Kt(!1),A=k(" ("),N=new Kt(!1),M=k(")"),F=T(),P=C("p"),j=k("Authority or region: "),G=C("b"),E=k(H),D=T(),ge&&ge.c(),z=T(),oe=C("p"),se=k("Funding programme: "),ye=C("b"),Se=k(de),ie=T(),ve&&ve.c(),Ie=T(),_e&&_e.c(),t.a=o,I.a=A,N.a=M,Ce(e,"max-width","30vw"),Ce(e,"max-height","60vh"),Ce(e,"overflow","auto")},m(ue,De){$(ue,e,De),h(e,n),t.m(r,n),h(n,o),h(n,u),h(n,i),h(e,a),be&&be.m(e,null),h(e,f),re&&re.m(e,null),h(e,c),pe&&pe.m(e,null),h(e,m),h(e,_),h(e,y),h(e,O),h(O,S),I.m(R,O),h(O,A),N.m(L,O),h(O,M),h(e,F),h(e,P),h(P,j),h(P,G),h(G,E),h(e,D),ge&&ge.m(e,null),h(e,z),h(e,oe),h(oe,se),h(oe,ye),h(ye,Se),h(e,ie),ve&&ve.m(e,null),h(e,Ie),_e&&_e.m(e,null),Te=!0},p(ue,[De]){var Un,Gn,Wn,Vn;(!Te||De&5)&&r!==(r=ft(ue[0].name,ue[2])+"")&&t.p(r),(!Te||De&1)&&s!==(s=ue[0].intervention_type+"")&&B(u,s),ue[0].length_meters?be?be.p(ue,De):(be=Pl(ue),be.c(),be.m(e,f)):be&&(be.d(1),be=null),ue[0].description?re?re.p(ue,De):(re=Il(ue),re.c(),re.m(e,c)):re&&(re.d(1),re=null),ue[0].pipeline?pe?(pe.p(Sn(ue),De),De&1&&g(pe,1)):(pe=Ml(Sn(ue)),pe.c(),g(pe,1),pe.m(e,m)):pe&&(ce(),d(pe,1,1,()=>{pe=null}),$e()),(!Te||De&10)&&R!==(R=ft(ue[1].scheme_name??"",ue[3])+"")&&I.p(R),(!Te||De&9)&&L!==(L=ft(ue[0].scheme_reference,ue[3])+"")&&N.p(L),(!Te||De&2)&&H!==(H=((Un=ue[1].browse)==null?void 0:Un.authority_or_region)+"")&&B(E,H),(Gn=ue[1].browse)!=null&&Gn.capital_scheme_id?ge?ge.p(ue,De):(ge=El(ue),ge.c(),ge.m(e,z)):ge&&(ge.d(1),ge=null),(!Te||De&2)&&de!==(de=((Wn=ue[1].browse)==null?void 0:Wn.funding_programme)+"")&&B(Se,de),(Vn=ue[1].browse)!=null&&Vn.current_milestone?ve?ve.p(ue,De):(ve=jl(ue),ve.c(),ve.m(e,Ie)):ve&&(ve.d(1),ve=null),ue[1].pipeline?_e?(_e.p(yn(ue),De),De&2&&g(_e,1)):(_e=Rl(yn(ue)),_e.c(),g(_e,1),_e.m(e,null)):_e&&(ce(),d(_e,1,1,()=>{_e=null}),$e())},i(ue){Te||(g(pe),g(_e),Te=!0)},o(ue){d(pe),d(_e),Te=!1},d(ue){ue&&p(e),be&&be.d(),re&&re.d(),pe&&pe.d(),ge&&ge.d(),ve&&ve.d(),_e&&_e.d()}}}function ft(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function x_(l,e,n){let t,r,o,s;Oe(l,$n,i=>n(4,r=i)),Oe(l,At,i=>n(2,o=i)),Oe(l,Pt,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class qn extends Y{constructor(e){super(),K(this,e,x_,Q_,J,{props:0})}}function eg(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function tg(l){let e,n;return e=new qn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ng(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[eg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[tg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function rg(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function lg(l){let e,n;return e=new qn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function og(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[rg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[lg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function sg(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function ig(l){let e,n;return e=new qn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ag(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[sg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[ig,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function fg(l){let e,n,t,r,o,s,u,i,a,f;const c=[q("interventions-points"),{filter:["all",Kn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":xn,"circle-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let m={$$slots:{default:[ng]},$$scope:{ctx:l}};for(let L=0;L<c.length;L+=1)m=x(m,c[L]);e=new pt({props:m});const _=[q("interventions-lines"),{filter:["all",Zn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":Lt,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[og]},$$scope:{ctx:l}};for(let L=0;L<_.length;L+=1)y=x(y,_[L]);t=new Le({props:y});const O=[q("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Lt,"circle-opacity":0,"circle-stroke-color":Ze.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let S={};for(let L=0;L<O.length;L+=1)S=x(S,O[L]);o=new pt({props:S});const I=[q("interventions-polygons"),{filter:["all",sn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":Q(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let R={$$slots:{default:[ag]},$$scope:{ctx:l}};for(let L=0;L<I.length;L+=1)R=x(R,I[L]);u=new qe({props:R});const A=[q("interventions-polygons-outlines"),{filter:["all",sn,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*Lt}},{layout:{visibility:l[0]?"visible":"none"}}];let N={};for(let L=0;L<A.length;L+=1)N=x(N,A[L]);return a=new Le({props:N}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),b(a.$$.fragment)},m(L,M){v(e,L,M),$(L,n,M),v(t,L,M),$(L,r,M),v(o,L,M),$(L,s,M),v(u,L,M),$(L,i,M),v(a,L,M),f=!0},p(L,M){const F=M&29?te(c,[c[0],M&24&&{filter:["all",Kn,L[3],L[4]]},c[2],c[3],M&4&&{paint:{"circle-color":L[2],"circle-radius":xn,"circle-opacity":Q(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};M&128&&(F.$$scope={dirty:M,ctx:L}),e.$set(F);const P=M&13?te(_,[_[0],M&8&&{filter:["all",Zn,L[3]]},_[2],_[3],M&4&&{paint:{"line-color":L[2],"line-width":Lt,"line-opacity":Q(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},_[6]]):{};M&128&&(P.$$scope={dirty:M,ctx:L}),t.$set(P);const j=M&1?te(O,[O[0],O[1],O[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(j);const G=M&13?te(I,[I[0],M&8&&{filter:["all",sn,L[3]]},I[2],I[3],M&4&&{paint:{"fill-color":L[2],"fill-opacity":Q(.2,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},I[6]]):{};M&128&&(G.$$scope={dirty:M,ctx:L}),u.$set(G);const H=M&13?te(A,[A[0],M&8&&{filter:["all",sn,L[3]]},M&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*Lt}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(H)},i(L){f||(g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(u.$$.fragment,L),g(a.$$.fragment,L),f=!0)},o(L){d(e.$$.fragment,L),d(t.$$.fragment,L),d(o.$$.fragment,L),d(u.$$.fragment,L),d(a.$$.fragment,L),f=!1},d(L){L&&(p(n),p(r),p(s),p(i)),w(e,L),w(t,L),w(o,L),w(u,L),w(a,L)}}}function ug(l){let e,n;return e=new kt({props:{data:l[1],$$slots:{default:[fg]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cg(l,e,n){let t,r;Oe(l,Tt,a=>n(5,r=a));let{showSchemes:o}=e,[s]=En();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=Fo(r))},[o,t,s,u,i,r]}class $g extends Y{constructor(e){super(),K(this,e,cg,ug,J,{showSchemes:0})}}function ql(l,e,n){const t=l.slice();return t[13]=e[n],t}function Ul(l,e,n){const t=l.slice();return t[16]=e[n],t}function pg(l){let e,n;return e=new B_({props:{loadFile:l[7]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gl(l){let e,n,t,r,o;e=new ct({props:{$$slots:{default:[mg]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[_g]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new Yl({props:u}),W.push(()=>V(t,"open",s)),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],X(()=>r=!1)),t.$set(c)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function mg(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wl(l){let e,n,t=l[16]+"",r;return{c(){e=C("li"),n=C("p"),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&B(r,t)},d(o){o&&p(e)}}}function _g(l){let e,n,t,r,o=je(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=Wl(Ul(l,o,u));return{c(){e=C("div"),n=C("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=T(),r=C("ul");for(let u=0;u<s.length;u+=1)s[u].c();U(e,"class","govuk-prose")},m(u,i){$(u,e,i),h(e,n),h(e,t),h(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=je(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=Ul(u,o,a);s[a]?s[a].p(f,i):(s[a]=Wl(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),Ct(s,u)}}}function Vl(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new Wa({props:u}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],X(()=>t=!1)),e.$set(f)},i(i){r||(g(e.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),r=!1},d(i){w(e,i)}}}function Xl(l){let e,n;return e=new V_({props:{scheme:l[13]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&Xl(l);return{c(){r&&r.c(),n=Fe()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&g(r,1)):(r=Xl(o),r.c(),g(r,1),r.m(n.parentNode,n)):r&&(ce(),d(r,1,1,()=>{r=null}),$e())},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function gg(l){let e,n,t,r,o,s,u,i,a,f,c=Ln()=="Private (development)",m,_,y,O,S,I,R,A,N;o=new Wo({props:{boundaryGeojson:l[4]}}),a=new Eo({});let L=c&&pg(l),M=l[4].notes&&Gl(l);y=new jo({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),S=new to({props:{errorMessage:l[0]}});let F=l[6].size>0&&Vl(l),P=je(l[6].values()),j=[];for(let H=0;H<P.length;H+=1)j[H]=Jl(ql(l,P,H));const G=H=>d(j[H],1,1,()=>{j[H]=null});return{c(){e=C("div"),n=C("div"),t=C("h1"),t.textContent="Browse schemes",r=T(),b(o.$$.fragment),s=T(),u=C("p"),u.textContent=`App version: ${Ln()}`,i=T(),b(a.$$.fragment),f=T(),L&&L.c(),m=T(),M&&M.c(),_=T(),b(y.$$.fragment),O=T(),b(S.$$.fragment),I=T(),F&&F.c(),R=T(),A=C("ul");for(let H=0;H<j.length;H+=1)j[H].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),U(e,"slot","sidebar"),U(e,"class","govuk-prose")},m(H,E){$(H,e,E),h(e,n),h(n,t),h(n,r),v(o,n,null),h(e,s),h(e,u),h(e,i),v(a,e,null),h(e,f),L&&L.m(e,null),h(e,m),M&&M.m(e,null),h(e,_),v(y,e,null),h(e,O),v(S,e,null),h(e,I),F&&F.m(e,null),h(e,R),h(e,A);for(let D=0;D<j.length;D+=1)j[D]&&j[D].m(A,null);N=!0},p(H,E){const D={};E&16&&(D.boundaryGeojson=H[4]),o.$set(D),c&&L.p(H,E),H[4].notes?M?(M.p(H,E),E&16&&g(M,1)):(M=Gl(H),M.c(),g(M,1),M.m(e,_)):M&&(ce(),d(M,1,1,()=>{M=null}),$e());const z={};if(E&1&&(z.errorMessage=H[0]),S.$set(z),H[6].size>0?F?(F.p(H,E),E&64&&g(F,1)):(F=Vl(H),F.c(),g(F,1),F.m(e,R)):F&&(ce(),d(F,1,1,()=>{F=null}),$e()),E&66){P=je(H[6].values());let oe;for(oe=0;oe<P.length;oe+=1){const se=ql(H,P,oe);j[oe]?(j[oe].p(se,E),g(j[oe],1)):(j[oe]=Jl(se),j[oe].c(),g(j[oe],1),j[oe].m(A,null))}for(ce(),oe=P.length;oe<j.length;oe+=1)G(oe);$e()}},i(H){if(!N){g(o.$$.fragment,H),g(a.$$.fragment,H),g(L),g(M),g(y.$$.fragment,H),g(S.$$.fragment,H),g(F);for(let E=0;E<P.length;E+=1)g(j[E]);N=!0}},o(H){d(o.$$.fragment,H),d(a.$$.fragment,H),d(L),d(M),d(y.$$.fragment,H),d(S.$$.fragment,H),d(F),j=j.filter(Boolean);for(let E=0;E<j.length;E+=1)d(j[E]);N=!1},d(H){H&&p(e),w(o),w(a),L&&L.d(),M&&M.d(),w(y),w(S),F&&F.d(),Ct(j,H)}}}function dg(l){let e,n,t,r,o,s,u;return e=new Vo({}),t=new $g({props:{showSchemes:l[2]}}),s=new E_({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),o=C("div"),b(s.$$.fragment),U(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,r,a),$(i,o,a),v(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),w(e,i),w(t,i),w(s)}}}function hg(l){let e,n,t;return n=new Ro({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[dg]},$$scope:{ctx:l}}}),{c(){e=C("div"),b(n.$$.fragment),U(e,"slot","main")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function bg(l){let e,n;return e=new rs({props:{$$slots:{main:[hg],sidebar:[gg]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vg(l,e,n){let t,r,o;Oe(l,Tt,S=>n(4,t=S)),Oe(l,Qn,S=>n(5,r=S)),Oe(l,$n,S=>n(6,o=S)),nn(()=>{Bo()});const s=new URLSearchParams(window.location.search);Qn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(S){try{Tt.set(JSON.parse(S)),$n.set(Ca(t)),n(0,u="")}catch(I){n(0,u=`The file you loaded is broken: ${I}`)}}const m=()=>n(3,f=!0);function _(S){f=S,n(3,f)}function y(S){i=S,n(1,i)}function O(S){a=S,n(2,a)}return[u,i,a,f,t,r,o,c,m,_,y,O]}class wg extends Y{constructor(e){super(),K(this,e,vg,bg,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new wg({target:document.getElementById("app")});
