import{S as Z,i as X,s as V,e as y,d as G,b as oe,f as g,q as J,k as h,J as Et,a as L,aB as Yn,g as p,aa as Xt,K as Wt,L as Yt,M as Jt,h as m,j as _,C as be,v as ve,y as ze,c as w,t as S,m as b,A,l as v,r as z,u as B,w as U,N as Kt,G as de,aC as Jn,x as Y,H as Ur,I as bt,aD as ao,at as Ln,Y as x,az as dn,av as Rn,Z as Ie,aE as _e,aF as en,aG as Ut,ak as mn,a9 as ct,ab as fo,aH as uo,o as Er,aI as co,aJ as Wr,aA as $o,ay as In,B as po,n as mo}from"./index-817a5f11.js";import{g as te,a as se}from"./spread-8a54911c.js";import{c as q,d as rt,t as _o,a as We,C as Be,e as ke,S as Qt,M as go,p as Qn,f as Vn,h as tn,g as ho,m as Kn}from"./Modal-77d22fef.js";import{e as Zn,h as ot,M as wo,b as Yr,H as bo,f as je,C as $t,a as On,c as jn,d as vo,i as un,W as wn,B as ko,S as yo,G as So}from"./WarningIcon-9f7f1822.js";import{d as To,g as Jr,u as Co,r as Lo,b as Io,c as Oo,G as mt,a as ge,e as jo,h as ee,F as Ae,i as Mo,j as No,k as Fo,L as Ro,M as Po}from"./MapLibreMap-5546cb15.js";import{R as Pn,F as Qr,a as $n,E as Do}from"./Radio-e2f5f89c.js";import{S as Ye,B as Go}from"./SecondaryButton-453a661d.js";import{E as re,H as Ao}from"./Header-8eedc5f6.js";import{e as pe,f as Xn,b as qo,s as Ho,g as zo,d as Bo}from"./files-8a284210.js";import{P as ae,A as Vr}from"./Popup-d2d3c7be.js";import{D as Uo}from"./DefaultButton-273e6f87.js";function Eo(o){let e;return{c(){e=y("span"),G(e,"class","svelte-kzgqtg"),oe(e,"background",o[0])},m(l,t){g(l,e,t)},p(l,[t]){t&1&&oe(e,"background",l[0])},i:J,o:J,d(l){l&&h(e)}}}function Wo(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Le extends Z{constructor(e){super(),X(this,e,Wo,Eo,V,{color:0})}}const Yo=o=>({}),xn=o=>({}),Jo=o=>({}),el=o=>({});function Qo(o){let e,l,t,n,r,s,f,i,a,u,c;const $=o[4].sidebar,d=Et($,o,o[3],el),k=o[4].main,C=Et(k,o,o[3],xn);return{c(){e=y("div"),l=y("aside"),t=y("div"),d&&d.c(),n=L(),r=y("button"),r.textContent="â†’",f=L(),i=y("main"),C&&C.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(r,"type","button"),G(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(l,"class",s=Yn(o[1]?"":"collapsed")+" svelte-1n0etgd"),oe(l,"--sidebarWidth",o[0]),G(i,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(T,I){g(T,e,I),p(e,l),p(l,t),d&&d.m(t,null),p(l,n),p(l,r),p(e,f),p(e,i),C&&C.m(i,null),a=!0,u||(c=Xt(r,"click",o[2]),u=!0)},p(T,[I]){d&&d.p&&(!a||I&8)&&Wt(d,$,T,T[3],a?Jt($,T[3],I,Jo):Yt(T[3]),el),(!a||I&2&&s!==(s=Yn(T[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(l,"class",s),(!a||I&1)&&oe(l,"--sidebarWidth",T[0]),C&&C.p&&(!a||I&8)&&Wt(C,k,T,T[3],a?Jt(k,T[3],I,Yo):Yt(T[3]),xn)},i(T){a||(m(d,T),m(C,T),a=!0)},o(T){_(d,T),_(C,T),a=!1},d(T){T&&h(e),d&&d.d(T),C&&C.d(T),u=!1,c()}}}function Vo(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){l(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,s,f,n,t]}class Ko extends Z{constructor(e){super(),X(this,e,Vo,Qo,V,{sidebarWidth:0})}}function tl(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function nl(o){let e,l,t,n=o[1]+"",r,s,f;return l=new Le({props:{color:o[2]}}),{c(){e=y("li"),w(l.$$.fragment),t=L(),r=S(n),s=L()},m(i,a){g(i,e,a),b(l,e,null),p(e,t),p(e,r),p(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&A(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){_(l.$$.fragment,i),f=!1},d(i){i&&h(e),v(l)}}}function Zo(o){let e,l,t=pe(o[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=nl(tl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){e=y("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,f){g(s,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[f]){if(f&1){t=pe(s[0]);let i;for(i=0;i<t.length;i+=1){const a=tl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=nl(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(be(),i=t.length;i<n.length;i+=1)r(i);ve()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&h(e),ze(n,s)}}}function Xo(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class it extends Z{constructor(e){super(),X(this,e,Xo,Zo,V,{rows:0})}}function xo(o){let e;const l=o[16].default,t=Et(l,o,o[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&Wt(t,l,n,n[24],e?Jt(l,n[24],r,null):Yt(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function es(o){let e,l,t;function n(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[xo]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new To({props:r}),z.push(()=>B(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!l&&f&1&&(l=!0,i.hovered=s[0],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function ts(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=Jr("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:$=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:I=!1}=e,{hovered:O=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:F=!0}=e;function M(D){O=D,l(0,O)}function j(D){Kt.call(this,o,D)}function H(D){Kt.call(this,o,D)}function P(D){Kt.call(this,o,D)}function R(D){Kt.call(this,o,D)}function W(D){Kt.call(this,o,D)}function ue(D){Kt.call(this,o,D)}return o.$$set=D=>{"id"in D&&l(1,r=D.id),"source"in D&&l(2,s=D.source),"sourceLayer"in D&&l(3,f=D.sourceLayer),"beforeId"in D&&l(4,i=D.beforeId),"beforeLayerType"in D&&l(5,a=D.beforeLayerType),"paint"in D&&l(6,u=D.paint),"layout"in D&&l(7,c=D.layout),"filter"in D&&l(8,$=D.filter),"applyToClusters"in D&&l(9,d=D.applyToClusters),"minzoom"in D&&l(10,k=D.minzoom),"maxzoom"in D&&l(11,C=D.maxzoom),"hoverCursor"in D&&l(12,T=D.hoverCursor),"manageHoverState"in D&&l(13,I=D.manageHoverState),"hovered"in D&&l(0,O=D.hovered),"eventsIfTopMost"in D&&l(14,N=D.eventsIfTopMost),"interactive"in D&&l(15,F=D.interactive),"$$scope"in D&&l(24,n=D.$$scope)},[O,r,s,f,i,a,u,c,$,d,k,C,T,I,N,F,t,M,j,H,P,R,W,ue,n]}class Dn extends Z{constructor(e){super(),X(this,e,ts,es,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function ll(o){let e=o[0],l,t,n=rl(o);return{c(){n.c(),l=de()},m(r,s){n.m(r,s),g(r,l,s),t=!0},p(r,s){s&1&&V(e,e=r[0])?(be(),_(n,1,1,J),ve(),n=rl(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&h(l),n.d(r)}}}function rl(o){let e;const l=o[15].default,t=Et(l,o,o[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&Wt(t,l,n,n[14],e?Jt(l,n[14],r,null):Yt(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function ns(o){let e,l,t=o[0]&&ll(o);return{c(){t&&t.c(),e=de()},m(n,r){t&&t.m(n,r),g(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=ll(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),_(t,1,1,()=>{t=null}),ve())},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function ls(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Jr("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:$=null}=e,{attribution:d=null}=e,{minzoom:k=null}=e,{maxzoom:C=null}=e,{volatile:T=null}=e;if(i&&i.includes("pmtiles://")&&!Jn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let F=new ao;Jn.addProtocol("pmtiles",F.tile)}const{map:I,self:O}=Co();Y(o,I,F=>l(13,n=F)),Y(o,O,F=>l(0,t=F));let N;return Ur(()=>{t&&n&&(Lo(I,t,N),bt(O,t=null,t),N=void 0)}),o.$$set=F=>{"id"in F&&l(3,f=F.id),"url"in F&&l(4,i=F.url),"tiles"in F&&l(5,a=F.tiles),"promoteId"in F&&l(6,u=F.promoteId),"bounds"in F&&l(7,c=F.bounds),"scheme"in F&&l(8,$=F.scheme),"attribution"in F&&l(9,d=F.attribution),"minzoom"in F&&l(10,k=F.minzoom),"maxzoom"in F&&l(11,C=F.maxzoom),"volatile"in F&&l(12,T=F.volatile),"$$scope"in F&&l(14,s=F.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==f&&(bt(O,t=f,t),Io(n,t,Oo({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:$,attribution:d,minzoom:k,maxzoom:C,volatile:T}),F=>n&&F===t,()=>{t&&(N=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{N=n==null?void 0:n.getSource(f)}))},[t,I,O,f,i,a,u,c,$,d,k,C,T,n,s,r]}class me extends Z{constructor(e){super(),X(this,e,ls,ns,V,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function ol(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function rs(o){let e,l,t;return l=new Ye({props:{$$slots:{default:[ss]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=y("div"),w(l.$$.fragment)},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function os(o){let e,l,t,n,r,s,f,i,a,u;l=new Ye({props:{$$slots:{default:[is]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&sl(o);r=new ot({props:{label:"Help",$$slots:{default:[as]},$$scope:{ctx:o}}}),f=new jo({}),f.$on("click",o[3]);let $=pe(o[0]),d=[];for(let C=0;C<$.length;C+=1)d[C]=il(ol(o,$,C));const k=C=>_(d[C],1,1,()=>{d[C]=null});return{c(){e=y("div"),w(l.$$.fragment),t=L(),c&&c.c(),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L();for(let C=0;C<d.length;C+=1)d[C].c();a=de()},m(C,T){g(C,e,T),b(l,e,null),g(C,t,T),c&&c.m(C,T),g(C,n,T),b(r,C,T),g(C,s,T),b(f,C,T),g(C,i,T);for(let I=0;I<d.length;I+=1)d[I]&&d[I].m(C,T);g(C,a,T),u=!0},p(C,T){const I={};T&16384&&(I.$$scope={dirty:T,ctx:C}),l.$set(I),C[2]?c?c.p(C,T):(c=sl(C),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const O={};if(T&16384&&(O.$$scope={dirty:T,ctx:C}),r.$set(O),T&65){$=pe(C[0]);let N;for(N=0;N<$.length;N+=1){const F=ol(C,$,N);d[N]?(d[N].p(F,T),m(d[N],1)):(d[N]=il(F),d[N].c(),m(d[N],1),d[N].m(a.parentNode,a))}for(be(),N=$.length;N<d.length;N+=1)k(N);ve()}},i(C){if(!u){m(l.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C);for(let T=0;T<$.length;T+=1)m(d[T]);u=!0}},o(C){_(l.$$.fragment,C),_(r.$$.fragment,C),_(f.$$.fragment,C),d=d.filter(Boolean);for(let T=0;T<d.length;T+=1)_(d[T]);u=!1},d(C){C&&(h(e),h(t),h(n),h(s),h(i),h(a)),v(l),c&&c.d(C),v(r,C),v(f,C),ze(d,C)}}}function ss(o){let e;return{c(){e=S("Measure lines")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function is(o){let e;return{c(){e=S("Stop measuring")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function sl(o){let e,l,t=o[2].toFixed(2)+"",n,r;return{c(){e=y("p"),l=S("Length: "),n=S(t),r=S(" meters")},m(s,f){g(s,e,f),p(e,l),p(e,n),p(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&A(n,t)},d(s){s&&h(e)}}}function as(o){let e;return{c(){e=y("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){g(l,e,t)},p:J,d(l){l&&h(e)}}}function fs(o){let e,l;return{c(){e=y("span"),l=L(),G(e,"class","dot svelte-1tzt432")},m(t,n){g(t,e,n),g(t,l,n)},p:J,d(t){t&&(h(e),h(l))}}}function il(o){let e,l,t;function n(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[fs]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new wo({props:s}),z.push(()=>B(e,"lngLat",n)),e.$on("click",r),{c(){w(e.$$.fragment)},m(f,i){b(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!l&&i&1&&(l=!0,a.lngLat=o[11],U(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){_(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function us(o){let e,l;const t=[q("measurement-line"),{paint:{"line-color":rt.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function cs(o){let e,l,t,n,r,s,f;const i=[os,rs],a=[];function u(c,$){return c[1]?0:1}return e=u(o),l=a[e]=i[e](o),n=new mt({props:{data:o[0].length<2?Zn():Ln(o[0]),$$slots:{default:[us]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),w(n.$$.fragment)},m(c,$){a[e].m(c,$),g(c,t,$),b(n,c,$),r=!0,s||(f=Xt(window,"keydown",o[5]),s=!0)},p(c,[$]){let d=e;e=u(c),e===d?a[e].p(c,$):(be(),_(a[d],1,1,()=>{a[d]=null}),ve(),l=a[e],l?l.p(c,$):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const k={};$&1&&(k.data=c[0].length<2?Zn():Ln(c[0])),$&16384&&(k.$$scope={dirty:$,ctx:c}),n.$set(k)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){_(l),_(n.$$.fragment,c),r=!1},d(c){c&&h(t),a[e].d(c),v(n,c),s=!1,f()}}}function $s(o,e,l){let t,n=!1,r=[];function s(k){return k.length<2?null:1e3*_o(Ln(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),l(0,r)}function c(k,C,T,I){T[I]=k,l(0,r)}const $=k=>u(k),d=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=s(r))},[r,n,t,f,i,a,u,c,$,d]}class ps extends Z{constructor(e){super(),X(this,e,$s,cs,V,{})}}const ms="/atip/assets/zoom_out_map-b2e1091a.svg";function _s(o){let e,l;return{c(){e=y("img"),Rn(e.src,l=ms)||G(e,"src",l),G(e,"alt","Zoom to show entire boundary")},m(t,n){g(t,e,n)},p:J,d(t){t&&h(e)}}}function gs(o){let e,l;return e=new Ye({props:{title:"Zoom to show entire boundary",$$slots:{default:[_s]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function hs(o,e,l){let t;Y(o,dn,s=>l(2,t=s));let{boundaryGeojson:n}=e;function r(){let s=Yr(n);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&l(1,n=s.boundaryGeojson)},[r,n]}class ds extends Z{constructor(e){super(),X(this,e,hs,gs,V,{boundaryGeojson:1})}}const ne={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",cycle_route:"green",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},rights_of_way:{footpath:"red",bridleway:"green",restricted_byway:"blue",boat:"orange"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Ue=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];let Mn=Ie(new Map),nn=Ie(new Set);const ws=o=>({}),al=o=>({}),bs=o=>({}),fl=o=>({}),vs=o=>({}),ul=o=>({});function ks(o){let e;return{c(){e=S(o[2])},m(l,t){g(l,e,t)},p(l,t){t&4&&A(e,l[2])},d(l){l&&h(e)}}}function ys(o){let e,l,t;const n=o[7].icon,r=Et(n,o,o[10],ul);return{c(){r&&r.c(),e=L(),l=S(o[2])},m(s,f){r&&r.m(s,f),g(s,e,f),g(s,l,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&Wt(r,n,s,s[10],t?Jt(n,s[10],f,vs):Yt(s[10]),ul),(!t||f&4)&&A(l,s[2])},i(s){t||(m(r,s),t=!0)},o(s){_(r,s),t=!1},d(s){s&&(h(e),h(l)),r&&r.d(s)}}}function Ss(o){let e;const l=o[7].help,t=Et(l,o,o[10],fl);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&Wt(t,l,n,n[10],e?Jt(l,n[10],r,bs):Yt(n[10]),fl)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Ts(o){let e;return{c(){e=S("X")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Cs(o){let e,l,t,n,r,s,f,i,a;function u($){o[8]($)}let c={$$slots:{default:[ys]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),l=new We({props:c}),z.push(()=>B(l,"checked",u)),s=new bo({props:{$$slots:{default:[Ss]},$$scope:{ctx:o}}}),i=new Ye({props:{$$slots:{default:[Ts]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=y("div"),w(l.$$.fragment),n=L(),r=y("span"),w(s.$$.fragment),f=L(),w(i.$$.fragment),oe(e,"display","flex"),oe(e,"justify-content","space-between")},m($,d){g($,e,d),b(l,e,null),p(e,n),p(e,r),b(s,r,null),p(r,f),b(i,r,null),a=!0},p($,d){const k={};d&1028&&(k.$$scope={dirty:d,ctx:$}),!t&&d&1&&(t=!0,k.checked=$[0],U(()=>t=!1)),l.$set(k);const C={};d&1024&&(C.$$scope={dirty:d,ctx:$}),s.$set(C);const T={};d&1024&&(T.$$scope={dirty:d,ctx:$}),i.$set(T)},i($){a||(m(l.$$.fragment,$),m(s.$$.fragment,$),m(i.$$.fragment,$),a=!0)},o($){_(l.$$.fragment,$),_(s.$$.fragment,$),_(i.$$.fragment,$),a=!1},d($){$&&h(e),v(l),v(s),v(i)}}}function cl(o){let e;const l=o[7].controls,t=Et(l,o,o[10],al);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&Wt(t,l,n,n[10],e?Jt(l,n[10],r,ws):Yt(n[10]),al)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Ls(o){let e,l,t,n,r,s;e=new We({props:{checked:o[4].has(o[1]),$$slots:{default:[ks]},$$scope:{ctx:o}}}),e.$on("change",o[5]),n=new Be({props:{small:!0,$$slots:{default:[Cs]},$$scope:{ctx:o}}});let f=o[0]&&cl(o);return{c(){w(e.$$.fragment),l=L(),t=y("div"),w(n.$$.fragment),r=L(),f&&f.c()},m(i,a){b(e,i,a),g(i,l,a),g(i,t,a),b(n,t,null),p(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=cl(i),f.c(),m(f,1),f.m(t,null)):f&&(be(),_(f,1,1,()=>{f=null}),ve())},i(i){s||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),s=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),_(f),s=!1},d(i){i&&(h(l),h(t)),v(e,i),v(n),f&&f.d(),o[9](null)}}}function Is(o,e,l){let t;Y(o,nn,k=>l(4,t=k));let{$$slots:n={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),nn.set(t));let a=null;Ur(()=>{Mn.update(k=>(k.delete(s),k))});function u(){nn.update(k=>(k.has(s)?(k.delete(s),l(0,i=!1)):(k.add(s),l(0,i=!0)),k))}function c(){t.delete(s),nn.set(t),l(0,i=!1)}function $(k){i=k,l(0,i)}function d(k){z[k?"unshift":"push"](()=>{a=k,l(3,a),l(1,s)})}return o.$$set=k=>{"name"in k&&l(1,s=k.name),"title"in k&&l(2,f=k.title),"show"in k&&l(0,i=k.show),"$$scope"in k&&l(10,r=k.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&Mn.update(k=>(l(3,a.style.display="none",a),k.set(s,a),k))},[i,s,f,a,t,u,c,n,$,d,r]}class fe extends Z{constructor(e){super(),X(this,e,Is,Ls,V,{name:1,title:2,show:0})}}function Os(o){let e;return{c(){e=S(`Open Government License
  `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function js(o){let e,l,t,n,r;return t=new re({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Os]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("License: "),w(t.$$.fragment),n=S(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,f){g(s,e,f),p(e,l),b(t,e,null),p(e,n),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){_(t.$$.fragment,s),r=!1},d(s){s&&h(e),v(t)}}}class Oe extends Z{constructor(e){super(),X(this,e,null,js,V,{})}}function $l(o,e,l){const t=o.slice();return t[2]=e[l],t}function pl(o,e,l){const t=o.slice();return t[5]=e[l],t}function ml(o){let e,l;return{c(){e=y("span"),l=S(`Â 
    `),oe(e,"background",o[5]),oe(e,"width","100%"),oe(e,"border","1px solid black")},m(t,n){g(t,e,n),p(e,l)},p(t,n){n&1&&oe(e,"background",t[5])},d(t){t&&h(e)}}}function _l(o){let e,l=o[2]+"",t;return{c(){e=y("span"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&A(t,l)},d(n){n&&h(e)}}}function Ms(o){let e,l,t,n=pe(o[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=ml(pl(o,n,i));let s=pe(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=_l($l(o,s,i));return{c(){e=y("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=y("div");for(let i=0;i<f.length;i+=1)f[i].c();oe(e,"display","flex"),oe(t,"display","flex"),oe(t,"justify-content","space-between")},m(i,a){g(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);g(i,l,a),g(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=pe(i[0]);let u;for(u=0;u<n.length;u+=1){const c=pl(i,n,u);r[u]?r[u].p(c,a):(r[u]=ml(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){s=pe(i[1]);let u;for(u=0;u<s.length;u+=1){const c=$l(i,s,u);f[u]?f[u].p(c,a):(f[u]=_l(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:J,o:J,d(i){i&&(h(e),h(l),h(t)),ze(r,i),ze(f,i)}}}function Ns(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Qe extends Z{constructor(e){super(),X(this,e,Ns,Ms,V,{colorScale:0,limits:1})}}const gl=Ie(!0);let Nn=Ie(null);function Gn(o){window.history.replaceState(null,"",o.toString()),window.localStorage.setItem("browsepage-querystring",o.searchParams.toString())}function $e(o){let e=new URLSearchParams(window.location.search).has(o),l=Ie(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),Gn(n)}),l}function Vt(o,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Ie(n);return s.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),Gn(i)}),s}function hl(o){const e=o[7].OA21CD;o[8]=e;const l=o[7][o[0].kind];o[9]=l}function Fs(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ds]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Gs]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("Population density data is from the 2021 census, via "),w(t.$$.fragment),n=S(". Output area boundaries from "),w(r.$$.fragment),s=S(".")},m(i,a){g(i,e,a),p(e,l),b(t,e,null),p(e,n),b(r,e,null),p(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function Rs(o){let e,l,t,n,r,s,f,i,a;return r=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[As]},$$scope:{ctx:o}}}),f=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[qs]},$$scope:{ctx:o}}}),{c(){e=y("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=y("p"),n=S("Car/van availability data is from the 2021 census, via "),w(r.$$.fragment),s=S(". Output area boundaries from "),w(f.$$.fragment),i=S(".")},m(u,c){g(u,e,c),g(u,l,c),g(u,t,c),p(t,n),b(r,t,null),p(t,s),b(f,t,null),p(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){_(r.$$.fragment,u),_(f.$$.fragment,u),a=!1},d(u){u&&(h(e),h(l),h(t)),v(r),v(f)}}}function Ps(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Hs]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[zs]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("Car/van availability data is from the 2021 census, via "),w(t.$$.fragment),n=S(". Output area boundaries from "),w(r.$$.fragment),s=S(".")},m(i,a){g(i,e,a),p(e,l),b(t,e,null),p(e,n),b(r,e,null),p(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function Ds(o){let e;return{c(){e=S(`NOMIS TS006
        `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Gs(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function As(o){let e;return{c(){e=S(`NOMIS TS045
        `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function qs(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Hs(o){let e;return{c(){e=S(`NOMIS TS045
        `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function zs(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Bs(o){let e,l,t,n,r,s;const f=[Ps,Rs,Fs],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(o),t=i[l]=f[l](o),r=new Oe({}),{c(){e=y("span"),t.c(),n=L(),w(r.$$.fragment),G(e,"slot","help")},m(u,c){g(u,e,c),i[l].m(e,null),p(e,n),b(r,e,null),s=!0},p(u,c){let $=l;l=a(u),l!==$&&(be(),_(i[$],1,1,()=>{i[$]=null}),ve(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){_(t),_(r.$$.fragment,u),s=!1},d(u){u&&h(e),i[l].d(),v(r)}}}function Us(o){let e,l,t,n;return t=new Qe({props:{colorScale:o[1],limits:pt(o[0].kind).map(dl)}}),{c(){e=y("p"),e.textContent="(people per square kilometres)",l=L(),w(t.$$.fragment)},m(r,s){g(r,e,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&1&&(f.limits=pt(r[0].kind).map(dl)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&(h(e),h(l)),v(t,r)}}}function Es(o){let e,l;return e=new Qe({props:{colorScale:o[1],limits:pt(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=pt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ws(o){let e,l;return e=new Qe({props:{colorScale:o[1],limits:pt(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=pt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ys(o){let e,l,t,n,r,s,f;function i(d){o[4](d)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),l=new Pn({props:a}),z.push(()=>B(l,"value",i));const u=[Ws,Es,Us],c=[];function $(d,k){return d[0].kind=="percent_households_with_car"?0:d[0].kind=="average_cars_per_household"?1:d[0].kind=="population_density"?2:-1}return~(r=$(o))&&(s=c[r]=u[r](o)),{c(){e=y("div"),w(l.$$.fragment),n=L(),s&&s.c(),G(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(d,k){g(d,e,k),b(l,e,null),p(e,n),~r&&c[r].m(e,null),f=!0},p(d,k){const C={};!t&&k&1&&(t=!0,C.value=d[0].kind,U(()=>t=!1)),l.$set(C);let T=r;r=$(d),r===T?~r&&c[r].p(d,k):(s&&(be(),_(c[T],1,1,()=>{c[T]=null}),ve()),~r?(s=c[r],s?s.p(d,k):(s=c[r]=u[r](d),s.c()),m(s,1),s.m(e,null)):s=null)},i(d){f||(m(l.$$.fragment,d),m(s),f=!0)},o(d){_(l.$$.fragment,d),_(s),f=!1},d(d){d&&h(e),v(l),~r&&c[r].d()}}}function Js(o){let e,l,t,n=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=y("p"),l=S("There are "),t=y("b"),r=S(n),s=S(`
          people per square kilometre in `),i=S(f)},m(a,u){g(a,e,u),p(e,l),p(e,t),p(t,r),p(e,s),p(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&A(r,n),u&128&&f!==(f=a[8]+"")&&A(i,f)},d(a){a&&h(e)}}}function Qs(o){let e,l,t=o[8]+"",n,r,s,f=o[9]+"",i,a;return{c(){e=y("p"),l=S("Households in "),n=S(t),r=S(` have an average of
          `),s=y("b"),i=S(f),a=S(`
          cars`)},m(u,c){g(u,e,c),p(e,l),p(e,n),p(e,r),p(e,s),p(s,i),p(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&A(n,t),c&129&&f!==(f=u[9]+"")&&A(i,f)},d(u){u&&h(e)}}}function Vs(o){let e,l,t=o[9]+"",n,r,s,f=o[8]+"",i,a;return{c(){e=y("p"),l=y("b"),n=S(t),r=S("%"),s=S(`
          of households in `),i=S(f),a=S(" have 1 or more cars")},m(u,c){g(u,e,c),p(e,l),p(l,n),p(l,r),p(e,s),p(e,i),p(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&A(n,t),c&128&&f!==(f=u[8]+"")&&A(i,f)},d(u){u&&h(e)}}}function Ks(o){hl(o);let e;function l(r,s){return r[0].kind=="percent_households_with_car"?Vs:r[0].kind=="average_cars_per_household"?Qs:Js}let t=l(o),n=t(o);return{c(){n.c(),e=de()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){hl(r),t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Zs(o){let e,l;return e=new ae({props:{$$slots:{default:[Ks,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Xs(o){let e,l,t,n;const r=[q(Ve),{sourceLayer:Ve},{paint:{"fill-color":ke(["get",o[0].kind],pt(o[0].kind),o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Zs]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new Ae({props:s}),e.$on("click",o[3]);const f=[q(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&se(q(Ve)),u&0&&{sourceLayer:Ve},u&3&&{paint:{"fill-color":ke(["get",a[0].kind],pt(a[0].kind),a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?te(f,[u&0&&se(q(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function xs(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ve,title:"2021 census",$$slots:{controls:[Ys],help:[Bs]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Ve}.pmtiles`,$$slots:{default:[Xs]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ve="census_output_areas";function ei(o){return o.show?o.kind:null}function ti(o){return{show:!0,kind:o}}function pt(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const dl=o=>o.toLocaleString();function ni(o,e,l){let t,n=ne.sequential_low_to_high,s=Vt(Ve,{show:!1,kind:"percent_households_with_car"},ei,ti);Y(o,s,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,n,s,f,i,a]}class li extends Z{constructor(e){super(),X(this,e,ni,xs,V,{})}}function ri(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function oi(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function si(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[oi]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(", as of May 2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function ii(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function ai(o){let e,l;return e=new ae({props:{$$slots:{default:[ii,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function fi(o){let e,l,t,n;const r=[q(vt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ai]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new Ae({props:s}),e.$on("click",$i);const f=[q(`${vt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&se(q(vt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?te(f,[u&0&&se(q(`${vt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function ui(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:vt,title:ci,$$slots:{help:[si],icon:[ri]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new mt({props:{data:`${_e()}/v1/${vt}.geojson`,$$slots:{default:[fi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let vt="combined_authorities",ci="Combined authorities";function $i(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function pi(o,e,l){let t,n=ne.combined_authorities,r=$e(vt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class mi extends Z{constructor(e){super(),X(this,e,pi,ui,V,{})}}function _i(o){let e;return{c(){e=S(`DLUCH GIS
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function gi(o){let e;return{c(){e=S(`here
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function hi(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[_i]},$$scope:{ctx:o}}}),s=new re({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[gi]},$$scope:{ctx:o}}}),a=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("The 2019 English IMD scores come from "),w(n.$$.fragment),r=S(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),w(s.$$.fragment),f=S("."),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,$){g(c,e,$),p(e,l),p(l,t),b(n,l,null),p(l,r),b(s,l,null),p(l,f),p(e,i),b(a,e,null),u=!0},p(c,$){const d={};$&64&&(d.$$scope={dirty:$,ctx:c}),n.$set(d);const k={};$&64&&(k.$$scope={dirty:$,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(s),v(a)}}}function di(o){let e,l,t;return l=new Qe({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function wi(o){let e,l=o[5].LSOA11CD+"",t,n,r,s=o[5].score+"",f,i,a,u,c,$=o[5].rank.toLocaleString()+"",d,k;return{c(){e=y("p"),t=S(l),n=S(` has an IMD score of
        `),r=y("b"),f=S(s),i=L(),a=y("p"),u=S("Rank: "),c=y("b"),d=S($),k=S(`
        / 32,844 LSOAs`)},m(C,T){g(C,e,T),p(e,t),p(e,n),p(e,r),p(r,f),g(C,i,T),g(C,a,T),p(a,u),p(a,c),p(c,d),p(a,k)},p(C,T){T&32&&l!==(l=C[5].LSOA11CD+"")&&A(t,l),T&32&&s!==(s=C[5].score+"")&&A(f,s),T&32&&$!==($=C[5].rank.toLocaleString()+"")&&A(d,$)},d(C){C&&(h(e),h(i),h(a))}}}function bi(o){let e,l;return e=new ae({props:{$$slots:{default:[wi,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function vi(o){let e,l,t,n;const r=[q(Ke),{sourceLayer:Ke},{paint:{"fill-color":ke(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[bi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new Ae({props:s});const f=[q(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&7?te(r,[u&0&&se(q(Ke)),u&0&&{sourceLayer:Ke},u&6&&{paint:{"fill-color":ke(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?te(f,[u&0&&se(q(`${Ke}-outline`)),u&0&&{sourceLayer:Ke},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function ki(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ke,title:yi,$$slots:{controls:[di],help:[hi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Ke}.pmtiles`,$$slots:{default:[vi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ke="imd",yi="Indices of Multiple Deprivation";function Si(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,2,4,6,8,10],s=$e(Ke);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Ti extends Z{constructor(e){super(),X(this,e,Si,ki,V,{})}}function Ci(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Li(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Ii(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[Li]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(", as of May 2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Oi(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function ji(o){let e,l;return e=new ae({props:{$$slots:{default:[Oi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Mi(o){let e,l,t,n;const r=[q(kt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ji]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new Ae({props:s}),e.$on("click",Ri);const f=[q(`${kt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&se(q(kt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?te(f,[u&0&&se(q(`${kt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ni(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:kt,title:Fi,$$slots:{help:[Ii],icon:[Ci]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new mt({props:{data:`${_e()}/v1/${kt}.geojson`,$$slots:{default:[Mi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let kt="local_authority_districts",Fi="Local Authority Districts";function Ri(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function Pi(o,e,l){let t,n=ne.local_authority_districts,r=$e(kt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Di extends Z{constructor(e){super(),X(this,e,Pi,Ni,V,{})}}function Gi(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ai(o){let e;return{c(){e=S(`local authority
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function qi(o){let e;return{c(){e=S(`national park authorit
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Hi(o){let e;return{c(){e=S(`development corporation
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function zi(o){let e;return{c(){e=S("this map")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Bi(o){let e;return{c(){e=S(`planning.data.gov.uk
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Ui(o){let e,l,t,n,r,s,f,i,a,u,c,$,d,k,C,T,I,O,N,F,M,j,H;return n=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ai]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[qi]},$$scope:{ctx:o}}}),i=new re({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Hi]},$$scope:{ctx:o}}}),k=new re({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[zi]},$$scope:{ctx:o}}}),N=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Bi]},$$scope:{ctx:o}}}),j=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("LPAs may be a "),w(n.$$.fragment),r=S(", "),w(s.$$.fragment),f=S("y, or "),w(i.$$.fragment),a=S("."),u=L(),c=y("p"),$=y("strong"),d=S(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),w(k.$$.fragment),C=S(" to get more details."),T=L(),I=y("p"),O=S("Data from ONS Geography via "),w(N.$$.fragment),F=S(", as of November 2022."),M=L(),w(j.$$.fragment),G(e,"slot","help")},m(P,R){g(P,e,R),p(e,l),p(l,t),b(n,l,null),p(l,r),b(s,l,null),p(l,f),b(i,l,null),p(l,a),p(e,u),p(e,c),p(c,$),p($,d),b(k,$,null),p($,C),p(e,T),p(e,I),p(I,O),b(N,I,null),p(I,F),p(e,M),b(j,e,null),H=!0},p(P,R){const W={};R&32&&(W.$$scope={dirty:R,ctx:P}),n.$set(W);const ue={};R&32&&(ue.$$scope={dirty:R,ctx:P}),s.$set(ue);const D={};R&32&&(D.$$scope={dirty:R,ctx:P}),i.$set(D);const K={};R&32&&(K.$$scope={dirty:R,ctx:P}),k.$set(K);const Q={};R&32&&(Q.$$scope={dirty:R,ctx:P}),N.$set(Q)},i(P){H||(m(n.$$.fragment,P),m(s.$$.fragment,P),m(i.$$.fragment,P),m(k.$$.fragment,P),m(N.$$.fragment,P),m(j.$$.fragment,P),H=!0)},o(P){_(n.$$.fragment,P),_(s.$$.fragment,P),_(i.$$.fragment,P),_(k.$$.fragment,P),_(N.$$.fragment,P),_(j.$$.fragment,P),H=!1},d(P){P&&h(e),v(n),v(s),v(i),v(k),v(N),v(j)}}}function Ei(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Wi(o){let e,l;return e=new ae({props:{$$slots:{default:[Ei,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Yi(o){let e,l,t,n;const r=[q(Ze),{sourceLayer:Ze},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Wi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new Ae({props:s});const f=[q(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&se(q(Ze)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?te(f,[u&0&&se(q(`${Ze}-outline`)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ji(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ze,title:Qi,$$slots:{help:[Ui],icon:[Gi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Ze}.pmtiles`,$$slots:{default:[Yi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ze="local_planning_authorities",Qi="Local Planning Authorities";function Vi(o,e,l){let t,n=ne.local_planning_authorities,r=$e(Ze);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ki extends Z{constructor(e){super(),X(this,e,Vi,Ji,V,{})}}function Zi(o){let e;return{c(){e=S("Ordnance Survey MasterMap Topography layer")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Xi(o){let e,l,t,n,r,s,f,i,a,u,c,$;return n=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-mastermap-topography-layer",$$slots:{default:[Zi]},$$scope:{ctx:o}}}),c=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("This shows all polygons from the "),w(n.$$.fragment),r=S(` related to roads. This is useful in conjunction with the OS
      road and pavement width layers, to see specifically where width varies.`),s=L(),f=y("p"),f.textContent="Data is from February 2025.",i=L(),a=y("p"),a.textContent=`The layer is only visible when you zoom in close to the map. Note there
      may be missing polygons near bridges.`,u=L(),w(c.$$.fragment),G(e,"slot","help")},m(d,k){g(d,e,k),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(e,i),p(e,a),p(e,u),b(c,e,null),$=!0},p(d,k){const C={};k&16&&(C.$$scope={dirty:k,ctx:d}),n.$set(C)},i(d){$||(m(n.$$.fragment,d),m(c.$$.fragment,d),$=!0)},o(d){_(n.$$.fragment,d),_(c.$$.fragment,d),$=!1},d(d){d&&h(e),v(n),v(c)}}}function xi(o){let e,l,t;return l=new it({props:{rows:o[2]}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ea(o){let e,l;const t=[q(rn),{sourceLayer:"topographic_area"},{paint:{"fill-color":je(["get","style_description"],{"Road Or Track Fill":"black","Traffic Calming Fill":"#3b3b3b","Roadside Manmade Fill":"grey","Roadside Natural Fill":"green","Path Fill":"brown","Track Fill":"brown"},"red"),"fill-opacity":ee(.8,.3)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0}];let n={};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new Ae({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&se(q(rn)),t[1],t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ta(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:rn,title:"OS MasterMap",$$slots:{controls:[xi],help:[Xi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${en()}/v1/${rn}.pmtiles`,minzoom:16,maxzoom:16,promoteId:"toid",$$slots:{default:[ea]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let rn="osmm";function na(o,e,l){let t,n=$e(rn);Y(o,n,f=>l(0,t=f));let r=[["roads","black"],["traffic calming","#3b3b3b"],["pavement","grey"],["roadside natural","green"],["paths and tracks","brown"]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class la extends Z{constructor(e){super(),X(this,e,na,ta,V,{})}}function ra(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function oa(o){let e;return{c(){e=S(`Ordnance Survey Boundary-Line
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function sa(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[oa]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(", as of October 2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function ia(o){let e,l=o[4].Name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&A(t,l)},d(n){n&&h(e)}}}function aa(o){let e,l;return e=new ae({props:{$$slots:{default:[ia,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function fa(o){let e,l,t,n;const r=[q(Xe),{sourceLayer:Xe},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[aa]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new Ae({props:s}),e.$on("click",$a);const f=[q(`${Xe}-outline`),{sourceLayer:Xe},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&se(q(Xe)),u&0&&{sourceLayer:Xe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?te(f,[u&0&&se(q(`${Xe}-outline`)),u&0&&{sourceLayer:Xe},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function ua(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Xe,title:ca,$$slots:{help:[sa],icon:[ra]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Xe}.pmtiles`,$$slots:{default:[fa]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Xe="parliamentary_constituencies",ca="Parliamentary constituencies";function $a(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function pa(o,e,l){let t,n=ne.parliamentary_constituencies,r=$e(Xe);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ma extends Z{constructor(e){super(),X(this,e,pa,ua,V,{})}}function _a(o){let e;return{c(){e=S(`DEFRA
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function ga(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[_a]},$$scope:{ctx:o}}}),a=new Oe({}),{c(){e=y("span"),l=y("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=y("p"),r=S("Data from June 2019, produced by "),w(s.$$.fragment),f=S(". See there for methodology details"),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,$){g(c,e,$),p(e,l),p(e,t),p(e,n),p(n,r),b(s,n,null),p(n,f),p(e,i),b(a,e,null),u=!0},p(c,$){const d={};$&32&&(d.$$scope={dirty:$,ctx:c}),s.$set(d)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(s),v(a)}}}function ha(o){let e,l,t;return l=new Qe({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function da(o){let e,l=o[4].noiseclass+"",t,n,r=wl(o[4].noiseclass)+"",s,f;return{c(){e=y("p"),t=S(l),n=S(" dB ("),s=S(r),f=S(")")},m(i,a){g(i,e,a),p(e,t),p(e,n),p(e,s),p(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&A(t,l),a&16&&r!==(r=wl(i[4].noiseclass)+"")&&A(s,r)},d(i){i&&h(e)}}}function wa(o){let e,l;return e=new ae({props:{$$slots:{default:[da,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ba(o){let e,l;const t=[q(yt),{sourceLayer:yt},{paint:{"fill-color":je(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":ee(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[wa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new Ae({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&se(q(yt)),s&0&&{sourceLayer:yt},s&2&&{paint:{"fill-color":je(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":ee(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function va(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:yt,title:ka,$$slots:{controls:[ha],help:[ga]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${yt}.pmtiles`,$$slots:{default:[ba]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let yt="road_noise",ka="Road noise";function wl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function ya(o,e,l){let t,n=[ne.sequential_low_to_high[0],ne.sequential_low_to_high[2],ne.sequential_low_to_high[4]],r=$e(yt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Sa extends Z{constructor(e){super(),X(this,e,ya,va,V,{})}}function Ta(o){let e;return{c(){e=S(`DEFRA
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Ca(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://www.gov.uk/government/collections/rural-urban-classification",$$slots:{default:[Ta]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S(`The 2011 Rural Urban Classification distinguishes four urban and six rural
      categories. The data comes from `),w(n.$$.fragment),r=S(". Note this is data from 2011."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function La(o){let e,l,t;return l=new it({props:{rows:Object.entries(o[2])}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ia(o){let e,l=o[4].OA11CD+"",t,n,r=o[4].RUC11.startsWith("U")?"an":"a",s,f,i,a=o[4].RUC11+"",u;return{c(){e=y("p"),t=S(l),n=S(" is "),s=S(r),f=L(),i=y("b"),u=S(a)},m(c,$){g(c,e,$),p(e,t),p(e,n),p(e,s),p(e,f),p(e,i),p(i,u)},p(c,$){$&16&&l!==(l=c[4].OA11CD+"")&&A(t,l),$&16&&r!==(r=c[4].RUC11.startsWith("U")?"an":"a")&&A(s,r),$&16&&a!==(a=c[4].RUC11+"")&&A(u,a)},d(c){c&&h(e)}}}function Oa(o){let e,l;return e=new ae({props:{$$slots:{default:[Ia,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ja(o){let e,l,t,n;const r=[q(Zt),{sourceLayer:ln},{paint:{"fill-color":je(["get","RUC11"],o[2],"cyan"),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Oa]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new Ae({props:s});const f=[q(`${Zt}-outline`),{sourceLayer:ln},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&5?te(r,[u&0&&se(q(Zt)),u&0&&{sourceLayer:ln},u&4&&{paint:{"fill-color":je(["get","RUC11"],a[2],"cyan"),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?te(f,[u&0&&se(q(`${Zt}-outline`)),u&0&&{sourceLayer:ln},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ma(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Zt,title:Na,$$slots:{controls:[La],help:[Ca]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${ln}.pmtiles`,$$slots:{default:[ja]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Zt="ruc",ln="rural_urban_classification",Na="Rural Urban Classification";function Fa(o,e,l){let t,n=$e(Zt);Y(o,n,f=>l(0,t=f));let r={"Urban major conurbation":"#fe2200","Urban minor conurbation":"#ff6f00","Urban city and town in a sparse setting":"#ffa602","Urban city and town":"#ffe400","Rural town and fringe in a sparse setting":"#006100","Rural town and fringe":"#4a8a02","Rural village in a sparse setting":"#8cb503","Rural village":"#d6e601","Rural hamlets and isolated dwellings in a sparse setting":"#a1d99b","Rural hamlets and isolated dwellings":"#e5f5e0"};function s(f){t=f,n.set(t)}return[t,n,r,s]}class Ra extends Z{constructor(e){super(),X(this,e,Fa,Ma,V,{})}}function Pa(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Da(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Ga(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Da]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(", as of May 2023."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Aa(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function qa(o){let e,l;return e=new ae({props:{$$slots:{default:[Aa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ha(o){let e,l,t,n;const r=[q(xe),{sourceLayer:xe},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[qa]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new Ae({props:s}),e.$on("click",Ua);const f=[q(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&se(q(xe)),u&0&&{sourceLayer:xe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?te(f,[u&0&&se(q(`${xe}-outline`)),u&0&&{sourceLayer:xe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function za(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:xe,title:Ba,$$slots:{help:[Ga],icon:[Pa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${xe}.pmtiles`,$$slots:{default:[Ha]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let xe="wards",Ba="Wards";function Ua(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Ea(o,e,l){let t,n=ne.wards,r=$e(xe);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Wa extends Z{constructor(e){super(),X(this,e,Ea,za,V,{})}}function Ya(o){let e;return{c(){e=S("Open Data Commons Open Database License")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Ja(o){let e,l,t,n;return t=new re({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ya]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("License: "),w(t.$$.fragment)},m(r,s){g(r,e,s),p(e,l),b(t,e,null),n=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&h(e),v(t)}}}class tt extends Z{constructor(e){super(),X(this,e,null,Ja,V,{})}}function Qa(o){let e,l,t;return l=new Le({props:{color:ne.bus_route_with_lane}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Va(o){let e;return{c(){e=S(`GTFS
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Ka(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://gtfs.org",$$slots:{default:[Va]},$$scope:{ctx:o}}}),a=new tt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=y("p"),r=S("Note this data is from OpenStreetMap (as of 20 October 2024), not "),w(s.$$.fragment),f=S(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,$){g(c,e,$),p(e,l),p(e,t),p(e,n),p(n,r),b(s,n,null),p(n,f),p(e,i),b(a,e,null),u=!0},p(c,$){const d={};$&16&&(d.$$scope={dirty:$,ctx:c}),s.$set(d)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(s),v(a)}}}function Za(o){let e;return{c(){e=y("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Xa(o){let e;return{c(){e=y("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function xa(o){let e;function l(r,s){return r[3].has_bus_lane?Xa:Za}let t=l(o),n=t(o);return{c(){n.c(),e=de()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function ef(o){let e,l;return e=new ae({props:{$$slots:{default:[xa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function tf(o){let e,l;const t=[q(St),{sourceLayer:St},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ne.bus_route_with_lane,ne.bus_route_without_lane],"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ef]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&se(q(St)),s&0&&{sourceLayer:St},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function nf(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:St,title:lf,$$slots:{help:[Ka],icon:[Qa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${St}.pmtiles`,$$slots:{default:[tf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let St="bus_routes",lf="Bus routes";function rf(o,e,l){let t,n=$e(St);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class of extends Z{constructor(e){super(),X(this,e,rf,nf,V,{})}}function bl(o){const e=hf(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function vl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function sf(o){let e,l,t,n,r,s,f,i,a;return i=new tt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=y("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),s=y("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),w(i.$$.fragment),G(e,"slot","help")},m(u,c){g(u,e,c),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(e,f),b(i,e,null),a=!0},p:J,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){_(i.$$.fragment,u),a=!1},d(u){u&&h(e),v(i)}}}function af(o){let e,l,t=o[13]+"",n,r,s;return e=new Le({props:{color:o[14]}}),{c(){w(e.$$.fragment),l=L(),n=S(t),r=L()},m(f,i){b(e,f,i),g(f,l,i),g(f,n,i),g(f,r,i),s=!0},p:J,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n),h(r)),v(e,f)}}}function kl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[af]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new We({props:r}),z.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function ff(o){let e,l,t=pe(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=kl(vl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f&5){t=pe(s[2]);let i;for(i=0;i<t.length;i+=1){const a=vl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=kl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);ve()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&h(e),ze(n,s)}}}function uf(o){let e,l,t;return l=new Be({props:{small:!0,$$slots:{default:[ff]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function cf(o){bl(o);let e,l=o[10]+"",t,n,r,s,f,i=o[11]+"",a,u,c,$,d=o[12]+"",k;return{c(){e=y("h2"),t=S(l),n=L(),r=y("p"),s=S("Direction: "),f=y("b"),a=L(),u=y("p"),c=S("Width: "),$=y("b"),k=S(d)},m(C,T){g(C,e,T),p(e,t),g(C,n,T),g(C,r,T),p(r,s),p(r,f),f.innerHTML=i,g(C,a,T),g(C,u,T),p(u,c),p(u,$),p($,k)},p(C,T){bl(C),T&512&&l!==(l=C[10]+"")&&A(t,l),T&512&&i!==(i=C[11]+"")&&(f.innerHTML=i),T&512&&d!==(d=C[12]+"")&&A(k,d)},d(C){C&&(h(e),h(n),h(r),h(a),h(u))}}}function $f(o){let e,l;return e=new ae({props:{$$slots:{default:[cf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function pf(o){let e,l;const t=[q(Tt),{sourceLayer:Tt},{paint:{"line-color":je(["get","kind"],{track:ne.cycle_paths.track,lane:ne.cycle_paths.lane,shared_use_segregated:ne.cycle_paths.shared_use_segregated,shared_use_unsegregated:ne.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[$f]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),e.$on("click",df),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?te(t,[s&0&&se(q(Tt)),s&0&&{sourceLayer:Tt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function mf(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Tt,title:_f,$$slots:{controls:[uf],help:[sf]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Tt}.pmtiles`,$$slots:{default:[pf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Tt="cycle_paths",_f="Cycle paths";function gf(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function hf(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function df(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function wf(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s($){return $.show?n.filter(d=>$[d]).join(","):null}let f=Vt(Tt,r,s,gf);Y(o,f,$=>l(0,t=$));let i=[["track","Separated tracks",ne.cycle_paths.track],["lane","Unprotected lanes",ne.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",ne.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",ne.cycle_paths.shared_use_unsegregated]];function a($){let d=n.filter(k=>$[k]);return["in",["get","kind"],["literal",d]]}function u($,d){o.$$.not_equal(t[d],$)&&(t[d]=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,f,i,a,u,c]}class bf extends Z{constructor(e){super(),X(this,e,wf,mf,V,{})}}function vf(o){let e,l,t;return l=new Le({props:{color:ne.cycle_route}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function kf(o){let e;return{c(){e=S("OpenStreetMap")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function yf(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:route%3Dbicycle",$$slots:{default:[kf]},$$scope:{ctx:o}}}),f=new tt({}),{c(){e=y("span"),l=y("p"),t=S("This shows all cycle routes, according to "),w(n.$$.fragment),r=S(` (as of 20 October 2024). The quality of the route or infrastructure
      along it is not shown here. Not all routes are official, named routes -- click
      one to see more information.`),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Sf(o){let e=(o[3].name||"untitled route")+"",l;return{c(){l=S(e)},m(t,n){g(t,l,n)},p(t,n){n&8&&e!==(e=(t[3].name||"untitled route")+"")&&A(l,e)},d(t){t&&h(l)}}}function Tf(o){let e,l;return e=new ae({props:{$$slots:{default:[Sf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Cf(o){let e,l;const t=[q(Ct),{sourceLayer:Ct},{paint:{"line-color":ee(ne.cycle_route,"red"),"line-width":8}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[Tf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),e.$on("click",Of),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&se(q(Ct)),s&0&&{sourceLayer:Ct},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Lf(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Ct,title:If,$$slots:{help:[yf],icon:[vf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Ct}.pmtiles`,$$slots:{default:[Cf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ct="cycle_routes",If="Cycle routes";function Of(o){window.open(`http://openstreetmap.org/relation/${o.detail.features[0].properties.osm_relation}`,"_blank")}function jf(o,e,l){let t,n=$e(Ct);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Mf extends Z{constructor(e){super(),X(this,e,jf,Lf,V,{})}}function Nf(o){let e;return{c(){e=S("OS Terrain 50")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Ff(o){let e,l,t,n,r,s,f,i,a,u,c,$,d,k;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Nf]},$$scope:{ctx:o}}}),c=new Oe({}),d=new tt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=y("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),s=y("p"),f=S("This layer is built from "),w(i.$$.fragment),a=S(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),w(c.$$.fragment),$=L(),w(d.$$.fragment),G(e,"slot","help")},m(C,T){g(C,e,T),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),b(i,s,null),p(s,a),p(e,u),b(c,e,null),p(e,$),b(d,e,null),k=!0},p(C,T){const I={};T&64&&(I.$$scope={dirty:T,ctx:C}),i.$set(I)},i(C){k||(m(i.$$.fragment,C),m(c.$$.fragment,C),m(d.$$.fragment,C),k=!0)},o(C){_(i.$$.fragment,C),_(c.$$.fragment,C),_(d.$$.fragment,C),k=!1},d(C){C&&h(e),v(i),v(c),v(d)}}}function Rf(o){let e,l,t,n,r;return l=new Qe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("span"),w(l.$$.fragment),t=L(),n=y("p"),n.innerHTML=`<img src="${Mo}" alt="arrow"/>
      Arrows point uphill`,G(e,"slot","controls")},m(s,f){g(s,e,f),b(l,e,null),p(e,t),p(e,n),r=!0},p:J,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),r=!1},d(s){s&&h(e),v(l)}}}function Pf(o){let e,l,t,n=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=y("p"),l=S("Gradient: "),t=y("b"),r=S(n),s=S(`
        %`)},m(f,i){g(f,e,i),p(e,l),p(e,t),p(t,r),p(e,s)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&A(r,n)},d(f){f&&h(e)}}}function Df(o){let e,l;return e=new ae({props:{$$slots:{default:[Pf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Gf(o){let e,l,t,n;const r=[q(et),{sourceLayer:et},{manageHoverState:!0},{paint:{"line-color":ke(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[Df]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new ge({props:s});const f=[q(et+"_arrows"),{sourceLayer:et},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Dn({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&7?te(r,[u&0&&se(q(et)),u&0&&{sourceLayer:et},r[2],u&6&&{paint:{"line-color":ke(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?te(f,[u&0&&se(q(et+"_arrows")),u&0&&{sourceLayer:et},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Af(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:et,title:qf,$$slots:{controls:[Rf],help:[Ff]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${et}.pmtiles`,$$slots:{default:[Gf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let et="gradient",qf="Gradients";function Hf(o,e,l){let t,n=ne.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=$e(et);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class zf extends Z{constructor(e){super(),X(this,e,Hf,Af,V,{})}}function Bf(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Uf(o){let e;return{c(){e=S(`Major Road Network
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Ef(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Uf]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from the "),w(n.$$.fragment),r=S(", as of September 2021."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Wf(o){let e,l=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&A(t,l)},d(n){n&&h(e)}}}function Yf(o){let e,l;return e=new ae({props:{$$slots:{default:[Wf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Jf(o){let e,l;const t=[q(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Yf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&se(q(Lt)),s&0&&{sourceLayer:Lt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Qf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Lt,title:Vf,$$slots:{help:[Ef],icon:[Bf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Lt}.pmtiles`,$$slots:{default:[Jf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Lt="mrn",Vf="Major Road Network";function Kf(o,e,l){let t,n=ne.mrn,r=$e(Lt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Zf extends Z{constructor(e){super(),X(this,e,Kf,Qf,V,{})}}function Xf(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function xf(o){let e;return{c(){e=S(`National Cycle Network
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function eu(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[xf]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from Sustrans about the "),w(n.$$.fragment),r=S(", downloaded on 22/01/2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function yl(o){let e,l,t,n=o[4].Desc_+"",r;return{c(){e=y("li"),l=S("Description: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Desc_+"")&&A(r,n)},d(s){s&&h(e)}}}function Sl(o){let e,l,t,n=o[4].Greenway+"",r;return{c(){e=y("li"),l=S("Is greenway: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Greenway+"")&&A(r,n)},d(s){s&&h(e)}}}function Tl(o){let e,l,t,n=o[4].RouteType+"",r;return{c(){e=y("li"),l=S("Route type: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteType+"")&&A(r,n)},d(s){s&&h(e)}}}function Cl(o){let e,l,t,n=o[4].RouteNo+"",r;return{c(){e=y("li"),l=S("Route number: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteNo+"")&&A(r,n)},d(s){s&&h(e)}}}function Ll(o){let e,l,t,n=o[4].RouteCat+"",r;return{c(){e=y("li"),l=S("Route Category: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteCat+"")&&A(r,n)},d(s){s&&h(e)}}}function Il(o){let e,l,t,n=o[4].OpenStatus+"",r;return{c(){e=y("li"),l=S("Open Status: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].OpenStatus+"")&&A(r,n)},d(s){s&&h(e)}}}function Ol(o){let e,l,t,n=o[4].Surface+"",r;return{c(){e=y("li"),l=S("Surface: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Surface+"")&&A(r,n)},d(s){s&&h(e)}}}function jl(o){let e,l,t,n=o[4].Quality+"",r;return{c(){e=y("li"),l=S("Quality: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Quality+"")&&A(r,n)},d(s){s&&h(e)}}}function Ml(o){let e,l,t,n=o[4].RoadClass+"",r;return{c(){e=y("li"),l=S("Road Class: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RoadClass+"")&&A(r,n)},d(s){s&&h(e)}}}function tu(o){let e,l,t,n,r,s,f,i,a,u=o[4].Desc_&&yl(o),c=o[4].Greenway&&Sl(o),$=o[4].RouteType&&Tl(o),d=o[4].RouteNo&&Cl(o),k=o[4].RouteCat&&Ll(o),C=o[4].OpenStatus&&Il(o),T=o[4].Surface&&Ol(o),I=o[4].Quality&&jl(o),O=o[4].RoadClass&&Ml(o);return{c(){e=y("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),$&&$.c(),n=L(),d&&d.c(),r=L(),k&&k.c(),s=L(),C&&C.c(),f=L(),T&&T.c(),i=L(),I&&I.c(),a=L(),O&&O.c()},m(N,F){g(N,e,F),u&&u.m(e,null),p(e,l),c&&c.m(e,null),p(e,t),$&&$.m(e,null),p(e,n),d&&d.m(e,null),p(e,r),k&&k.m(e,null),p(e,s),C&&C.m(e,null),p(e,f),T&&T.m(e,null),p(e,i),I&&I.m(e,null),p(e,a),O&&O.m(e,null)},p(N,F){N[4].Desc_?u?u.p(N,F):(u=yl(N),u.c(),u.m(e,l)):u&&(u.d(1),u=null),N[4].Greenway?c?c.p(N,F):(c=Sl(N),c.c(),c.m(e,t)):c&&(c.d(1),c=null),N[4].RouteType?$?$.p(N,F):($=Tl(N),$.c(),$.m(e,n)):$&&($.d(1),$=null),N[4].RouteNo?d?d.p(N,F):(d=Cl(N),d.c(),d.m(e,r)):d&&(d.d(1),d=null),N[4].RouteCat?k?k.p(N,F):(k=Ll(N),k.c(),k.m(e,s)):k&&(k.d(1),k=null),N[4].OpenStatus?C?C.p(N,F):(C=Il(N),C.c(),C.m(e,f)):C&&(C.d(1),C=null),N[4].Surface?T?T.p(N,F):(T=Ol(N),T.c(),T.m(e,i)):T&&(T.d(1),T=null),N[4].Quality?I?I.p(N,F):(I=jl(N),I.c(),I.m(e,a)):I&&(I.d(1),I=null),N[4].RoadClass?O?O.p(N,F):(O=Ml(N),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},d(N){N&&h(e),u&&u.d(),c&&c.d(),$&&$.d(),d&&d.d(),k&&k.d(),C&&C.d(),T&&T.d(),I&&I.d(),O&&O.d()}}}function nu(o){let e,l;return e=new ae({props:{$$slots:{default:[tu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function lu(o){let e,l;const t=[q(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[nu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&se(q(It)),s&0&&{sourceLayer:It},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ru(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:It,title:ou,$$slots:{help:[eu],icon:[Xf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${It}.pmtiles`,$$slots:{default:[lu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let It="national_cycle_network",ou="National Cycle Network";function su(o,e,l){let t,n=ne.national_cycle_network,r=$e(It);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class iu extends Z{constructor(e){super(),X(this,e,su,ru,V,{})}}function Nl(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function au(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function fu(o){let e,l,t,n,r,s,f,i,a,u,c,$;return u=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[au]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=y("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),s=y("p"),s.textContent="Data valid as of 1 January, 2024",f=L(),i=y("p"),a=S(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),w(u.$$.fragment),c=S("."),G(e,"slot","help")},m(d,k){g(d,e,k),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(e,f),p(e,i),p(i,a),b(u,i,null),p(i,c),$=!0},p(d,k){const C={};k&4096&&(C.$$scope={dirty:k,ctx:d}),u.$set(C)},i(d){$||(m(u.$$.fragment,d),$=!0)},o(d){_(u.$$.fragment,d),$=!1},d(d){d&&h(e),v(u)}}}function uu(o){let e,l,t;return l=new Qe({props:{colorScale:o[1],limits:o[3]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function cu(o){let e,l,t=_n(o[6].angle+o[9])+"",n;return{c(){e=y("p"),l=new Ut(!1),n=S(` side of the road: no pavement
          `),l.a=n},m(r,s){g(r,e,s),l.m(t,e),p(e,n)},p(r,s){s&64&&t!==(t=_n(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&h(e)}}}function $u(o){let e,l,t=_n(o[6].angle+o[9])+"",n,r,s=o[7]+"",f,i,a,u=o[8]+"",c,$;return{c(){e=y("p"),l=new Ut(!1),n=S(` side of the road:
            `),r=y("b"),f=S(s),i=S(`
            m average,
            `),a=y("b"),c=S(u),$=S(`
            m minimum
          `),l.a=n},m(d,k){g(d,e,k),l.m(t,e),p(e,n),p(e,r),p(r,f),p(e,i),p(e,a),p(a,c),p(e,$)},p(d,k){k&64&&t!==(t=_n(d[6].angle+d[9])+"")&&l.p(t),k&64&&s!==(s=d[7]+"")&&A(f,s),k&64&&u!==(u=d[8]+"")&&A(c,u)},d(d){d&&h(e)}}}function Fl(o){let e;function l(r,s){return r[7]?$u:cu}let t=l(o),n=t(o);return{c(){n.c(),e=de()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function pu(o){let e,l=pe([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Fl(Nl(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=de()},m(n,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(n,r);g(n,e,r)},p(n,r){if(r&64){l=pe([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=Nl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Fl(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(n){n&&h(e),ze(t,n)}}}function mu(o){let e,l;return e=new ae({props:{openOn:"hover",$$slots:{default:[pu,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function _u(o){let e,l;const t=[q(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[mu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&se(q(Ot)),s&0&&{sourceLayer:Ot},t[2],t[3],s&6&&{paint:{"line-color":ke(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function gu(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ot,title:hu,$$slots:{controls:[uu],help:[fu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${en()}/v1/${Ot}.pmtiles`,$$slots:{default:[_u]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ot="pavement_widths",hu="OS Pavement widths";function du(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function _n(o){return`${du(o)} <span style="display: inline-block; rotate: ${o}deg">â¬†</span>`}function wu(o,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=$e(Ot);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class bu extends Z{constructor(e){super(),X(this,e,wu,gu,V,{})}}function vu(o){let e;return{c(){e=S("the PCT website")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function ku(o){let e;return{c(){e=S("2017 journal article")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function yu(o){let e,l,t,n,r,s,f,i,a,u,c,$;return i=new re({props:{href:"https://www.pct.bike",$$slots:{default:[vu]},$$scope:{ctx:o}}}),u=new re({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[ku]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=y("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),s=y("p"),f=S("See "),w(i.$$.fragment),a=S(" and "),w(u.$$.fragment),c=S(" for details on methodology and data sources."),G(e,"slot","help")},m(d,k){g(d,e,k),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),b(i,s,null),p(s,a),b(u,s,null),p(s,c),$=!0},p(d,k){const C={};k&1024&&(C.$$scope={dirty:k,ctx:d}),i.$set(C);const T={};k&1024&&(T.$$scope={dirty:k,ctx:d}),u.$set(T)},i(d){$||(m(i.$$.fragment,d),m(u.$$.fragment,d),$=!0)},o(d){_(i.$$.fragment,d),_(u.$$.fragment,d),$=!1},d(d){d&&h(e),v(i),v(u)}}}function Su(o){let e,l,t,n,r,s,f,i,a;l=new Qe({props:{colorScale:o[1],limits:o[2]}});function u(k){o[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),n=new Pn({props:c}),z.push(()=>B(n,"value",u));function $(k){o[6](k)}let d={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(d.value=o[0].scenario),f=new Qt({props:d}),z.push(()=>B(f,"value",$)),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),G(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(k,C){g(k,e,C),b(l,e,null),p(e,t),b(n,e,null),p(e,s),b(f,e,null),a=!0},p(k,C){const T={};!r&&C&1&&(r=!0,T.value=k[0].tripPurpose,U(()=>r=!1)),n.$set(T);const I={};!i&&C&1&&(i=!0,I.value=k[0].scenario,U(()=>i=!1)),f.$set(I)},i(k){a||(m(l.$$.fragment,k),m(n.$$.fragment,k),m(f.$$.fragment,k),a=!0)},o(k){_(l.$$.fragment,k),_(n.$$.fragment,k),_(f.$$.fragment,k),a=!1},d(k){k&&h(e),v(l),v(n),v(f)}}}function Tu(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Ut(!1),t=de(),e.a=t},m(n,r){e.m(l,n,r),g(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Cu(o){let e,l;return e=new ae({props:{$$slots:{default:[Tu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Lu(o){let e,l;const t=[q(st),{sourceLayer:st},{paint:{"line-color":ke(["get",o[0].scenario],o[2],o[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==st?"visible":"none"}}];let n={$$slots:{default:[Cu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&se(q(st)),s&0&&{sourceLayer:st},s&7&&{paint:{"line-color":ke(["get",r[0].scenario],r[2],r[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==st?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Iu(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Ut(!1),t=de(),e.a=t},m(n,r){e.m(l,n,r),g(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Ou(o){let e,l;return e=new ae({props:{$$slots:{default:[Iu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ju(o){let e,l;const t=[q(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",o[0].scenario],o[2],o[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==wt?"visible":"none"}}];let n={$$slots:{default:[Ou]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&se(q(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&7&&{paint:{"line-color":ke(["get",r[0].scenario],r[2],r[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==wt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Mu(o){let e,l,t,n,r,s,f;function i(u){o[7](u)}let a={name:Kr,title:Nu,$$slots:{controls:[Su],help:[yu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new fe({props:a}),z.push(()=>B(e,"show",i)),n=new me({props:{url:`pmtiles://${_e()}/v1/${st}.pmtiles`,$$slots:{default:[Lu]},$$scope:{ctx:o}}}),s=new me({props:{url:`pmtiles://${_e()}/v1/${wt}.pmtiles`,$$slots:{default:[ju]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(u,c){b(e,u,c),g(u,t,c),b(n,u,c),g(u,r,c),b(s,u,c),f=!0},p(u,[c]){const $={};c&1025&&($.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,$.show=u[0].show,U(()=>l=!1)),e.$set($);const d={};c&1025&&(d.$$scope={dirty:c,ctx:u}),n.$set(d);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),s.$set(k)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(e.$$.fragment,u),_(n.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(h(t),h(r)),v(e,u),v(n,u),v(s,u)}}}let Kr="pct",st="pct_commute",wt="pct_school",Nu="Propensity to Cycle Tool";function Fu(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function Ru(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function Pu(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=Vt(Kr,{show:!1,tripPurpose:st,scenario:"baseline"},Fu,Ru);Y(o,f,$=>l(0,t=$));function i($){let d=$.baseline,k=$.gov_target,C=$.go_dutch,T=`<h2>Trip purpose: ${t.tripPurpose==st?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)T+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let I=(k/d).toFixed(1),O=(C/d).toFixed(1);T+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${O}x</b> of baseline)</p>`}return T}function a($){o.$$.not_equal(t.tripPurpose,$)&&(t.tripPurpose=$,f.set(t))}function u($){o.$$.not_equal(t.scenario,$)&&(t.scenario=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,n,r,f,i,a,u,c]}class Du extends Z{constructor(e){super(),X(this,e,Pu,Mu,V,{})}}function Rl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[11]=e[l][1],t[12]=e[l][2],t[13]=e,t[14]=l,t}function Gu(o){let e;return{c(){e=S(`rowmaps.com
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Au(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://www.rowmaps.com",$$slots:{default:[Gu]},$$scope:{ctx:o}}}),a=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("These public rights of way are aggregated from 137 authorities, thanks to "),w(n.$$.fragment),r=S(`. The licenses for each authority may vary, but most use
      the Open Government License v3 or Creative Commons.`),s=L(),f=y("p"),f.textContent="This data is current as of 15 November, 2024.",i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,$){g(c,e,$),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(e,i),b(a,e,null),u=!0},p(c,$){const d={};$&32768&&(d.$$scope={dirty:$,ctx:c}),n.$set(d)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function qu(o){let e,l,t=o[11]+"",n,r,s;return e=new Le({props:{color:o[12]}}),{c(){w(e.$$.fragment),l=L(),n=S(t),r=L()},m(f,i){b(e,f,i),g(f,l,i),g(f,n,i),g(f,r,i),s=!0},p:J,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n),h(r)),v(e,f)}}}function Pl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[qu]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new We({props:r}),z.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f&32768&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Hu(o){let e,l,t=pe(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Pl(Rl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f&5){t=pe(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Rl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Pl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);ve()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&h(e),ze(n,s)}}}function zu(o){let e,l,t;return l=new Be({props:{small:!0,$$slots:{default:[Hu]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Bu(o){let e,l=o[9].kind+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&512&&l!==(l=n[9].kind+"")&&A(t,l)},d(n){n&&h(e)}}}function Uu(o){let e,l;return e=new ae({props:{$$slots:{default:[Bu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&33280&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Eu(o){let e,l;const t=[q(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":je(["get","kind"],{footpath:ne.rights_of_way.footpath,bridleway:ne.rights_of_way.bridleway,"restricted byway":ne.rights_of_way.restricted_byway,"byway open to all traffic":ne.rights_of_way.boat},"red"),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])}];let n={$$slots:{default:[Uu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?te(t,[s&0&&se(q(jt)),s&0&&{sourceLayer:jt},t[2],t[3],t[4],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])}]):{};s&32768&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Wu(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:jt,title:Yu,$$slots:{controls:[zu],help:[Au]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${jt}.pmtiles`,$$slots:{default:[Eu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32769&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&32769&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let jt="rights_of_way",Yu="Rights of Way";function Ju(o){return{show:!0,footpath:o.includes("footpath"),bridleway:o.includes("bridleway"),restricted_byway:o.includes("restricted_byway"),boat:o.includes("boat")}}function Qu(o,e,l){let t,n=["footpath","bridleway","restricted_byway","boat"],r={show:!1,footpath:!0,bridleway:!0,restricted_byway:!0,boat:!0};function s($){return $.show?n.filter(d=>$[d]).join(","):null}let f=Vt(jt,r,s,Ju);Y(o,f,$=>l(0,t=$));let i=[["footpath","Footpath",ne.rights_of_way.footpath],["bridleway","Bridleway",ne.rights_of_way.bridleway],["restricted_byway","Restricted byway",ne.rights_of_way.restricted_byway],["boat","Byway open to all traffic",ne.rights_of_way.boat]];function a($){let d=n.filter(k=>$[k]).map(k=>({footpath:"footpath",bridleway:"bridleway",restricted_byway:"restricted byway",boat:"byway open to all traffic"})[k]);return["in",["get","kind"],["literal",d]]}function u($,d){o.$$.not_equal(t[d],$)&&(t[d]=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,f,i,a,u,c]}class Vu extends Z{constructor(e){super(),X(this,e,Qu,Wu,V,{})}}function Ku(o){let e;return{c(){e=S("Basemap")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Zu(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Xu(o){let e,l,t,n,r,s,f,i,a,u,c,$,d;return n=new re({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Ku]},$$scope:{ctx:o}}}),c=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Zu]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),t=S("The average speed data is collected over a six-month period by "),w(n.$$.fragment),r=S(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=L(),f=y("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=y("p"),u=S(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),w(c.$$.fragment),$=S("."),G(e,"slot","help")},m(k,C){g(k,e,C),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(e,i),p(e,a),p(a,u),b(c,a,null),p(a,$),d=!0},p(k,C){const T={};C&512&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const I={};C&512&&(I.$$scope={dirty:C,ctx:k}),c.$set(I)},i(k){d||(m(n.$$.fragment,k),m(c.$$.fragment,k),d=!0)},o(k){_(n.$$.fragment,k),_(c.$$.fragment,k),d=!1},d(k){k&&h(e),v(n),v(c)}}}function xu(o){let e,l,t,n,r,s;l=new Qe({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),n=new Pn({props:i}),z.push(()=>B(n,"value",f)),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),G(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(a,u){g(a,e,u),b(l,e,null),p(e,t),b(n,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,U(()=>r=!1)),n.$set(c)},i(a){s||(m(l.$$.fragment,a),m(n.$$.fragment,a),s=!0)},o(a){_(l.$$.fragment,a),_(n.$$.fragment,a),s=!1},d(a){a&&h(e),v(l),v(n)}}}function ec(o){let e,l,t=o[8].indicative_mph+"",n,r,s,f,i,a=o[8].highest_mph+"",u,c,$=o[4][o[8].highest_description]+"",d,k;return{c(){e=y("p"),l=S("Posted speed limit: "),n=S(t),r=S(" mph"),s=L(),f=y("p"),i=S("Highest average speed: "),u=S(a),c=S(" mph (during "),d=S($),k=S(")")},m(C,T){g(C,e,T),p(e,l),p(e,n),p(e,r),g(C,s,T),g(C,f,T),p(f,i),p(f,u),p(f,c),p(f,d),p(f,k)},p(C,T){T&256&&t!==(t=C[8].indicative_mph+"")&&A(n,t),T&256&&a!==(a=C[8].highest_mph+"")&&A(u,a),T&256&&$!==($=C[4][C[8].highest_description]+"")&&A(d,$)},d(C){C&&(h(e),h(s),h(f))}}}function tc(o){let e,l;return e=new ae({props:{$$slots:{default:[ec,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function nc(o){let e,l;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",o[0].kind],o[2],o[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[tc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&se(q(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&7&&{paint:{"line-color":ke(["get",r[0].kind],r[2],r[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function lc(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Mt,title:rc,$$slots:{controls:[xu],help:[Xu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${en()}/v1/${Mt}.pmtiles`,$$slots:{default:[nc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Mt="road_speeds",rc="OS Speeds";function oc(o){return o.show?o.kind:null}function sc(o){return{show:!0,kind:o}}function ic(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,20,30,40,50,90],f=Vt(Mt,{show:!1,kind:"indicative_mph"},oc,sc);Y(o,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class ac extends Z{constructor(e){super(),X(this,e,ic,lc,V,{})}}function fc(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function uc(o){let e,l,t,n,r,s,f,i,a,u;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[fc]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=y("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),s=y("p"),f=S(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),w(i.$$.fragment),a=S("."),G(e,"slot","help")},m(c,$){g(c,e,$),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),b(i,s,null),p(s,a),u=!0},p(c,$){const d={};$&64&&(d.$$scope={dirty:$,ctx:c}),i.$set(d)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){_(i.$$.fragment,c),u=!1},d(c){c&&h(e),v(i)}}}function cc(o){let e,l,t;return l=new Qe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function $c(o){let e,l,t,n=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",$,d;return{c(){e=y("p"),l=S("Average width: "),t=y("b"),r=S(n),s=S(`
        meters`),f=L(),i=y("p"),a=S("Minimum width: "),u=y("b"),$=S(c),d=S(`
        meters`)},m(k,C){g(k,e,C),p(e,l),p(e,t),p(t,r),p(e,s),g(k,f,C),g(k,i,C),p(i,a),p(i,u),p(u,$),p(i,d)},p(k,C){C&32&&n!==(n=k[5].average+"")&&A(r,n),C&32&&c!==(c=k[5].minimum+"")&&A($,c)},d(k){k&&(h(e),h(f),h(i))}}}function pc(o){let e,l;return e=new ae({props:{$$slots:{default:[$c,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function mc(o){let e,l;const t=[q(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],o[2],o[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[pc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&se(q(Nt)),s&0&&{sourceLayer:Nt},t[2],t[3],s&6&&{paint:{"line-color":ke(["get","average"],r[2],r[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function _c(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Nt,title:gc,$$slots:{controls:[cc],help:[uc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${en()}/v1/${Nt}.pmtiles`,$$slots:{default:[mc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Nt="road_widths",gc="OS Road widths";function hc(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,5,10,15,20,100],s=$e(Nt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class dc extends Z{constructor(e){super(),X(this,e,hc,_c,V,{})}}function wc(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function bc(o){let e;return{c(){e=S(`OS Open Roads
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function vc(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[bc]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function kc(o){let e,l=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&A(t,l)},d(n){n&&h(e)}}}function yc(o){let e,l;return e=new ae({props:{$$slots:{default:[kc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Sc(o){let e,l;const t=[q(Ft),{sourceLayer:Ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[yc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&se(q(Ft)),s&0&&{sourceLayer:Ft},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Tc(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ft,title:Cc,$$slots:{help:[vc],icon:[wc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Ft}.pmtiles`,$$slots:{default:[Sc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ft="srn",Cc="Strategic Road Network";function Lc(o,e,l){let t,n=ne.srn,r=$e(Ft);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ic extends Z{constructor(e){super(),X(this,e,Lc,Tc,V,{})}}function Oc(o){let e,l,t;return l=new Le({props:{color:ne.trams}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function jc(o){let e,l,t,n,r;return n=new tt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),w(n.$$.fragment),G(e,"slot","help")},m(s,f){g(s,e,f),p(e,l),p(e,t),b(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function Mc(o){let e,l;const t=[q(Rt),{sourceLayer:Rt},{paint:{"line-color":ne.trams,"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),e.$on("click",Rc),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&se(q(Rt)),s&0&&{sourceLayer:Rt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Nc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Rt,title:Fc,$$slots:{help:[jc],icon:[Oc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Rt}.pmtiles`,$$slots:{default:[Mc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Rt="trams",Fc="Trams";function Rc(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Pc(o,e,l){let t,n=$e(Rt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Dc extends Z{constructor(e){super(),X(this,e,Pc,Nc,V,{})}}function Gc(o){let e;return{c(){e=S(`Bus Open Data Service
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Ac(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Gc]},$$scope:{ctx:o}}}),a=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from the "),w(n.$$.fragment),r=S(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=L(),f=y("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,$){g(c,e,$),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(e,i),b(a,e,null),u=!0},p(c,$){const d={};$&64&&(d.$$scope={dirty:$,ctx:c}),n.$set(d)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function qc(o){let e,l,t,n,r;return n=new Qe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("div"),l=y("p"),l.textContent="Peak hourly frequency:",t=L(),w(n.$$.fragment),G(e,"slot","controls")},m(s,f){g(s,e,f),p(e,l),p(e,t),b(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function Hc(o){let e,l,t,n=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,$,d,k,C,T=o[5].peak_description+"",I,O,N,F,M,j=o[5].total+"",H,P,R=o[5].total_description+"",W,ue;return{c(){e=y("p"),l=S("Stop name: "),t=y("b"),r=S(n),s=L(),f=y("p"),i=S("Peak: "),a=y("b"),c=S(u),$=S(`
        buses during the busiest hour of any day`),d=L(),k=y("p"),C=S("The peak hour is "),I=S(T),O=L(),N=y("p"),F=S("Total buses per day: "),M=y("b"),H=S(j),P=S(`
        (for `),W=S(R),ue=S(", the busiest day of the week)")},m(D,K){g(D,e,K),p(e,l),p(e,t),p(t,r),g(D,s,K),g(D,f,K),p(f,i),p(f,a),p(a,c),p(f,$),g(D,d,K),g(D,k,K),p(k,C),p(k,I),g(D,O,K),g(D,N,K),p(N,F),p(N,M),p(M,H),p(N,P),p(N,W),p(N,ue)},p(D,K){K&32&&n!==(n=D[5].stop_name+"")&&A(r,n),K&32&&u!==(u=D[5].peak+"")&&A(c,u),K&32&&T!==(T=D[5].peak_description+"")&&A(I,T),K&32&&j!==(j=D[5].total+"")&&A(H,j),K&32&&R!==(R=D[5].total_description+"")&&A(W,R)},d(D){D&&(h(e),h(s),h(f),h(d),h(k),h(O),h(N))}}}function zc(o){let e,l;return e=new ae({props:{$$slots:{default:[Hc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Bc(o){let e,l;const t=[q(Pt),{sourceLayer:Pt},{paint:{"circle-color":ke(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[zc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new $t({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&se(q(Pt)),s&0&&{sourceLayer:Pt},s&6&&{paint:{"circle-color":ke(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Uc(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Pt,title:Ec,$$slots:{controls:[qc],help:[Ac]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Pt}.pmtiles`,$$slots:{default:[Bc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Pt="bus_stops",Ec="Bus stops";function Wc(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,3,10,20,30,100],s=$e(Pt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Yc extends Z{constructor(e){super(),X(this,e,Wc,Uc,V,{})}}function Jc(o){let e;return{c(){e=S("crossing")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Qc(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Jc]},$$scope:{ctx:o}}}),f=new tt({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),w(n.$$.fragment),r=S(" data from OpenStreetMap (as of 5 January 2025)."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Vc(o){let e,l,t;return l=new it({props:{rows:o[2]}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Kc(o){let e,l=(o[4].class||"Unknown")+"",t,n;return{c(){e=y("p"),t=S(l),n=S(" crossing")},m(r,s){g(r,e,s),p(e,t),p(e,n)},p(r,s){s&16&&l!==(l=(r[4].class||"Unknown")+"")&&A(t,l)},d(r){r&&h(e)}}}function Zc(o){let e,l;return e=new ae({props:{$$slots:{default:[Kc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Xc(o){let e,l=(o[4].class||"Unknown")+"",t,n;return{c(){e=y("p"),t=S(l),n=S(" crossing")},m(r,s){g(r,e,s),p(e,t),p(e,n)},p(r,s){s&16&&l!==(l=(r[4].class||"Unknown")+"")&&A(t,l)},d(r){r&&h(e)}}}function xc(o){let e,l;return e=new ae({props:{$$slots:{default:[Xc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function e$(o){let e,l,t,n;const r=[q("crossings-lines"),{sourceLayer:Dt},{filter:On},{paint:{"line-color":je(["get","class"],Object.fromEntries(o[2]),"red"),"line-width":3}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let s={$$slots:{default:[Zc]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new ge({props:s}),e.$on("click",Dl);const f=[q("crossings-points"),{sourceLayer:Dt},{filter:jn},{paint:{"circle-color":je(["get","class"],Object.fromEntries(o[2]),"red"),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let i={$$slots:{default:[xc]},$$scope:{ctx:o}};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new $t({props:i}),t.$on("click",Dl),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&5?te(r,[r[0],u&0&&{sourceLayer:Dt},r[2],u&4&&{paint:{"line-color":je(["get","class"],Object.fromEntries(a[2]),"red"),"line-width":3}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&5?te(f,[f[0],u&0&&{sourceLayer:Dt},f[2],u&4&&{paint:{"circle-color":je(["get","class"],Object.fromEntries(a[2]),"red"),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},f[5],f[6]]):{};u&32&&($.$$scope={dirty:u,ctx:a}),t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function t$(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Dt,title:n$,$$slots:{controls:[Vc],help:[Qc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Dt}.pmtiles`,$$slots:{default:[e$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Dt="crossings",n$="Crossings";function Dl(o){window.open(`https://www.openstreetmap.org/${o.detail.features[0].properties.osm}`,"_blank")}function l$(o,e,l){let t,n=$e(Dt);Y(o,n,f=>l(0,t=f));let r=[["Zebra","#66C5CC"],["Parallel","#F6CF71"],["Pelican","#F89C74"],["Puffin","#DCB0F2"],["Toucan","#87C55F"],["Pegasus","#9EB9F3"],["Uncontrolled","#FE88B1"],["Signalised","#C9DB74"],["Unknown","red"]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class r$ extends Z{constructor(e){super(),X(this,e,l$,t$,V,{})}}function o$(o){let e,l;return{c(){e=y("img"),G(e,"slot","icon"),Rn(e.src,l=No)||G(e,"src",l),G(e,"alt","a logo representing cycle parking")},m(t,n){g(t,e,n)},p:J,d(t){t&&h(e)}}}function s$(o){let e;return{c(){e=S("OpenStreetMap")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function i$(o){let e;return{c(){e=S("OpenStreetMap Carto")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function a$(o){let e,l,t,n,r,s,f,i,a,u,c,$;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[s$]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[i$]},$$scope:{ctx:o}}}),c=new tt({}),{c(){e=y("span"),l=y("p"),t=S("Cycle parking, according to "),w(n.$$.fragment),r=S(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=L(),f=y("p"),i=S("Icon from "),w(a.$$.fragment),u=L(),w(c.$$.fragment),G(e,"slot","help")},m(d,k){g(d,e,k),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(f,i),b(a,f,null),p(e,u),b(c,e,null),$=!0},p(d,k){const C={};k&16&&(C.$$scope={dirty:k,ctx:d}),n.$set(C);const T={};k&16&&(T.$$scope={dirty:k,ctx:d}),a.$set(T)},i(d){$||(m(n.$$.fragment,d),m(a.$$.fragment,d),m(c.$$.fragment,d),$=!0)},o(d){_(n.$$.fragment,d),_(a.$$.fragment,d),_(c.$$.fragment,d),$=!1},d(d){d&&h(e),v(n),v(a),v(c)}}}function f$(o){let e,l,t,n=(o[3].capacity??"unknown")+"",r;return{c(){e=y("p"),l=S("Capacity: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&8&&n!==(n=(s[3].capacity??"unknown")+"")&&A(r,n)},d(s){s&&h(e)}}}function u$(o){let e,l;return e=new ae({props:{$$slots:{default:[f$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function c$(o){let e,l;const t=[q(Gt),{sourceLayer:Gt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[u$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new Dn({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&se(q(Gt)),s&0&&{sourceLayer:Gt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function $$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Gt,title:p$,$$slots:{help:[a$],icon:[o$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Gt}.pmtiles`,$$slots:{default:[c$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Gt="cycle_parking",p$="Cycle parking";function m$(o,e,l){let t,n=$e(Gt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class _$ extends Z{constructor(e){super(),X(this,e,m$,$$,V,{})}}function g$(o){let e,l,t,n,r;return n=new tt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),w(n.$$.fragment),G(e,"slot","help")},m(s,f){g(s,e,f),p(e,l),p(e,t),b(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function h$(o){let e,l,t;return e=new Le({props:{color:ne.education.schools}}),{c(){w(e.$$.fragment),l=S(`
        Schools`)},m(n,r){b(e,n,r),g(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function d$(o){let e,l,t;return e=new Le({props:{color:ne.education.colleges}}),{c(){w(e.$$.fragment),l=S(`
        Colleges`)},m(n,r){b(e,n,r),g(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function w$(o){let e,l,t;return e=new Le({props:{color:ne.education.universities}}),{c(){w(e.$$.fragment),l=S(`
        Universities`)},m(n,r){b(e,n,r),g(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function b$(o){let e,l,t,n,r,s,f,i,a;function u(T){o[3](T)}let c={$$slots:{default:[h$]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new We({props:c}),z.push(()=>B(e,"checked",u));function $(T){o[4](T)}let d={$$slots:{default:[d$]},$$scope:{ctx:o}};o[0].college!==void 0&&(d.checked=o[0].college),n=new We({props:d}),z.push(()=>B(n,"checked",$));function k(T){o[5](T)}let C={$$slots:{default:[w$]},$$scope:{ctx:o}};return o[0].university!==void 0&&(C.checked=o[0].university),f=new We({props:C}),z.push(()=>B(f,"checked",k)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment)},m(T,I){b(e,T,I),g(T,t,I),b(n,T,I),g(T,s,I),b(f,T,I),a=!0},p(T,I){const O={};I&2048&&(O.$$scope={dirty:I,ctx:T}),!l&&I&1&&(l=!0,O.checked=T[0].school,U(()=>l=!1)),e.$set(O);const N={};I&2048&&(N.$$scope={dirty:I,ctx:T}),!r&&I&1&&(r=!0,N.checked=T[0].college,U(()=>r=!1)),n.$set(N);const F={};I&2048&&(F.$$scope={dirty:I,ctx:T}),!i&&I&1&&(i=!0,F.checked=T[0].university,U(()=>i=!1)),f.$set(F)},i(T){a||(m(e.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),a=!0)},o(T){_(e.$$.fragment,T),_(n.$$.fragment,T),_(f.$$.fragment,T),a=!1},d(T){T&&(h(t),h(s)),v(e,T),v(n,T),v(f,T)}}}function v$(o){let e,l,t;return l=new Be({props:{small:!0,$$slots:{default:[b$]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function k$(o){let e,l=(o[10].name??"Unnamed institution")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&A(t,l)},d(n){n&&h(e)}}}function y$(o){let e,l;return e=new ae({props:{$$slots:{default:[k$,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function S$(o){let e,l;const t=[q(At),{sourceLayer:At},{paint:{"fill-color":je(["get","type"],{school:ne.education.schools,college:ne.education.colleges,university:ne.education.universities},"grey"),"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[y$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new Ae({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&5?te(t,[s&0&&se(q(At)),s&0&&{sourceLayer:At},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function T$(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:At,title:C$,$$slots:{controls:[v$],help:[g$]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${At}.pmtiles`,$$slots:{default:[S$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let At="education",C$="Education";function L$(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function I$(o,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(d){return d.show?n.filter(k=>d[k]).join(","):null}let f=Vt(At,r,s,L$);Y(o,f,d=>l(0,t=d));function i(d){let k=n.filter(C=>d[C]);return["in",["get","type"],["literal",k]]}function a(d){o.$$.not_equal(t.school,d)&&(t.school=d,f.set(t))}function u(d){o.$$.not_equal(t.college,d)&&(t.college=d,f.set(t))}function c(d){o.$$.not_equal(t.university,d)&&(t.university=d,f.set(t))}function $(d){o.$$.not_equal(t.show,d)&&(t.show=d,f.set(t))}return[t,f,i,a,u,c,$]}class O$ extends Z{constructor(e){super(),X(this,e,I$,T$,V,{})}}function j$(o){let e,l,t;return l=new Le({props:{color:ne.hospitals}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function M$(o){let e;return{c(){e=S("hospital")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function N$(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[M$]},$$scope:{ctx:o}}}),f=new tt({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),w(n.$$.fragment),r=S(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function F$(o){let e,l=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&A(t,l)},d(n){n&&h(e)}}}function R$(o){let e,l;return e=new ae({props:{$$slots:{default:[F$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function P$(o){let e,l;const t=[q(qt),{sourceLayer:qt},{paint:{"fill-color":ne.hospitals,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[R$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new Ae({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&se(q(qt)),s&0&&{sourceLayer:qt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function D$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:qt,title:G$,$$slots:{help:[N$],icon:[j$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${qt}.pmtiles`,$$slots:{default:[P$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let qt="hospitals",G$="Hospitals";function A$(o,e,l){let t,n=$e(qt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class q$ extends Z{constructor(e){super(),X(this,e,A$,D$,V,{})}}function Gl(o,e,l){const t=o.slice();return t[6]=e[l],t}function H$(o){let e;return{c(){e=y("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,G(e,"slot","help")},m(l,t){g(l,e,t)},p:J,d(l){l&&h(e)}}}function z$(o){let e,l,t;return l=new it({props:{rows:o[3]}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function B$(o){let e,l=o[5]["Issue ID"]+"",t,n,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=y("h2"),t=S(l),n=S(" - "),s=S(r),f=L(),i=y("p"),u=S(a)},m(c,$){g(c,e,$),p(e,t),p(e,n),p(e,s),g(c,f,$),g(c,i,$),p(i,u)},p(c,$){$&32&&l!==(l=c[5]["Issue ID"]+"")&&A(t,l),$&32&&r!==(r=c[5].Code+"")&&A(s,r),$&32&&a!==(a=c[5]["Issue Stage"]+"")&&A(u,a)},d(c){c&&(h(e),h(f),h(i))}}}function Al(o){let e,l=o[6]+"",t,n,r,s=o[5][o[6]]+"",f,i;return{c(){e=y("p"),t=S(l),n=S(`:
            `),r=y("b"),f=S(s),i=L()},m(a,u){g(a,e,u),p(e,t),p(e,n),p(e,r),p(r,f),p(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&A(f,s)},d(a){a&&h(e)}}}function U$(o){let e,l=pe(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Al(Gl(o,l,n));return{c(){e=y("div");for(let n=0;n<t.length;n+=1)t[n].c();oe(e,"max-width","30vw"),oe(e,"max-height","60vh"),oe(e,"overflow","auto")},m(n,r){g(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&36){l=pe(n[2]);let s;for(s=0;s<l.length;s+=1){const f=Gl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Al(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&h(e),ze(t,n)}}}function E$(o){let e,l,t,n;return e=new ae({props:{openOn:"hover",$$slots:{default:[B$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[U$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function W$(o){let e,l;const t=[q(gn),{paint:{"circle-color":je(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[E$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new $t({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?te(t,[s&0&&se(q(gn)),s&8&&{paint:{"circle-color":je(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Y$(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:gn,title:J$,$$slots:{controls:[z$],help:[H$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new mt({props:{data:`${en()}/v1/problems.geojson.gz`,$$slots:{default:[W$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let gn="problems",J$="Issues & Conflicts";function Q$(o,e,l){let t,n=$e(gn);Y(o,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,s,f]}class V$ extends Z{constructor(e){super(),X(this,e,Q$,Y$,V,{})}}function K$(o){let e,l;return{c(){e=y("img"),G(e,"slot","icon"),Rn(e.src,l=Fo)||G(e,"src",l),G(e,"alt","A logo representing a train")},m(t,n){g(t,e,n)},p:J,d(t){t&&h(e)}}}function Z$(o){let e;return{c(){e=S("railway station")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function X$(o){let e;return{c(){e=S(`National Rail
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function x$(o){let e,l,t,n,r,s,f,i,a,u,c,$,d;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Z$]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[X$]},$$scope:{ctx:o}}}),$=new tt({}),{c(){e=y("div"),l=y("p"),t=S("This shows "),w(n.$$.fragment),r=S(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),f=y("p"),i=S("Icon from "),w(a.$$.fragment),u=S(". (Note that not all stations shown are National Rail.)"),c=L(),w($.$$.fragment),G(e,"slot","help")},m(k,C){g(k,e,C),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(f,i),b(a,f,null),p(f,u),p(e,c),b($,e,null),d=!0},p(k,C){const T={};C&16&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const I={};C&16&&(I.$$scope={dirty:C,ctx:k}),a.$set(I)},i(k){d||(m(n.$$.fragment,k),m(a.$$.fragment,k),m($.$$.fragment,k),d=!0)},o(k){_(n.$$.fragment,k),_(a.$$.fragment,k),_($.$$.fragment,k),d=!1},d(k){k&&h(e),v(n),v(a),v($)}}}function ep(o){let e,l=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&A(t,l)},d(n){n&&h(e)}}}function tp(o){let e,l;return e=new ae({props:{$$slots:{default:[ep,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function np(o){let e,l;const t=[q(on),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[tp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new Dn({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&se(q(on)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function lp(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:on,title:rp,$$slots:{help:[x$],icon:[K$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new mt({props:{data:`${_e()}/v1/${on}.geojson`,$$slots:{default:[np]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let on="railway_stations",rp="Railway stations";function op(o,e,l){let t,n=$e(on);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class sp extends Z{constructor(e){super(),X(this,e,op,lp,V,{})}}function ip(o){let e,l,t;return l=new Le({props:{color:ne.sports_spaces}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ap(o){let e;return{c(){e=S("sports pitches")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function fp(o){let e;return{c(){e=S("sports centres")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function up(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[ap]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[fp]},$$scope:{ctx:o}}}),a=new tt({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),w(n.$$.fragment),r=S(" and "),w(s.$$.fragment),f=S(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,$){g(c,e,$),p(e,l),p(l,t),b(n,l,null),p(l,r),b(s,l,null),p(l,f),p(e,i),b(a,e,null),u=!0},p(c,$){const d={};$&16&&(d.$$scope={dirty:$,ctx:c}),n.$set(d);const k={};$&16&&(k.$$scope={dirty:$,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(s),v(a)}}}function cp(o){let e,l=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&A(t,l)},d(n){n&&h(e)}}}function $p(o){let e,l;return e=new ae({props:{$$slots:{default:[cp,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function pp(o){let e,l;const t=[q(Ht),{sourceLayer:Ht},{paint:{"fill-color":ne.sports_spaces,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[$p]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new Ae({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&se(q(Ht)),s&0&&{sourceLayer:Ht},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function mp(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Ht,title:_p,$$slots:{help:[up],icon:[ip]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Ht}.pmtiles`,$$slots:{default:[pp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ht="sports_spaces",_p="Sports spaces";function gp(o,e,l){let t,n=$e(Ht);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class hp extends Z{constructor(e){super(),X(this,e,gp,mp,V,{})}}function dp(o){let e;return{c(){e=S("DfT stats19")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function wp(o){let e;return{c(){e=S("documented by DfT")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function bp(o){let e,l,t,n,r,s,f,i,a,u,c,$,d,k,C,T,I,O,N,F,M,j,H,P;return n=new re({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[dp]},$$scope:{ctx:o}}}),O=new re({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[wp]},$$scope:{ctx:o}}}),H=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("This layer shows collisions recorded in the "),w(n.$$.fragment),r=S(" dataset, as of 30 September 2024. Please note these limitations:"),s=L(),f=y("ul"),i=y("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=y("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),$=y("li"),$.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,d=L(),k=y("li"),k.textContent='The "pedestrians" category also include mobility scooters',C=L(),T=y("li"),I=S("All limitations "),w(O.$$.fragment),N=S(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),F=L(),M=y("p"),M.textContent="You can click a point to open the full report, thanks to CycleStreets.",j=L(),w(H.$$.fragment),G(e,"slot","help")},m(R,W){g(R,e,W),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(f,i),p(f,a),p(f,u),p(f,c),p(f,$),p(f,d),p(f,k),p(f,C),p(f,T),p(T,I),b(O,T,null),p(T,N),p(e,F),p(e,M),p(e,j),b(H,e,null),P=!0},p(R,W){const ue={};W&4194304&&(ue.$$scope={dirty:W,ctx:R}),n.$set(ue);const D={};W&4194304&&(D.$$scope={dirty:W,ctx:R}),O.$set(D)},i(R){P||(m(n.$$.fragment,R),m(O.$$.fragment,R),m(H.$$.fragment,R),P=!0)},o(R){_(n.$$.fragment,R),_(O.$$.fragment,R),_(H.$$.fragment,R),P=!1},d(R){R&&h(e),v(n),v(O),v(H)}}}function vp(o){let e;return{c(){e=S("Pedestrians")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function kp(o){let e;return{c(){e=S("Cyclists")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function yp(o){let e;return{c(){e=S("Horse riders")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Sp(o){let e;return{c(){e=S("Other")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Tp(o){let e,l,t,n,r,s,f,i,a,u,c,$;function d(M){o[10](M)}let k={$$slots:{default:[vp]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(k.checked=o[0].pedestrians),e=new We({props:k}),z.push(()=>B(e,"checked",d));function C(M){o[11](M)}let T={$$slots:{default:[kp]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(T.checked=o[0].cyclists),n=new We({props:T}),z.push(()=>B(n,"checked",C));function I(M){o[12](M)}let O={$$slots:{default:[yp]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(O.checked=o[0].horseRiders),f=new We({props:O}),z.push(()=>B(f,"checked",I));function N(M){o[13](M)}let F={$$slots:{default:[Sp]},$$scope:{ctx:o}};return o[0].other!==void 0&&(F.checked=o[0].other),u=new We({props:F}),z.push(()=>B(u,"checked",N)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment)},m(M,j){b(e,M,j),g(M,t,j),b(n,M,j),g(M,s,j),b(f,M,j),g(M,a,j),b(u,M,j),$=!0},p(M,j){const H={};j&4194304&&(H.$$scope={dirty:j,ctx:M}),!l&&j&1&&(l=!0,H.checked=M[0].pedestrians,U(()=>l=!1)),e.$set(H);const P={};j&4194304&&(P.$$scope={dirty:j,ctx:M}),!r&&j&1&&(r=!0,P.checked=M[0].cyclists,U(()=>r=!1)),n.$set(P);const R={};j&4194304&&(R.$$scope={dirty:j,ctx:M}),!i&&j&1&&(i=!0,R.checked=M[0].horseRiders,U(()=>i=!1)),f.$set(R);const W={};j&4194304&&(W.$$scope={dirty:j,ctx:M}),!c&&j&1&&(c=!0,W.checked=M[0].other,U(()=>c=!1)),u.$set(W)},i(M){$||(m(e.$$.fragment,M),m(n.$$.fragment,M),m(f.$$.fragment,M),m(u.$$.fragment,M),$=!0)},o(M){_(e.$$.fragment,M),_(n.$$.fragment,M),_(f.$$.fragment,M),_(u.$$.fragment,M),$=!1},d(M){M&&(h(t),h(s),h(a)),v(e,M),v(n,M),v(f,M),v(u,M)}}}function Cp(o){let e,l,t,n,r,s,f,i,a,u,c,$,d;return l=new Be({props:{small:!0,$$slots:{default:[Tp]},$$scope:{ctx:o}}}),u=new it({props:{rows:o[9]}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),n=y("div"),r=S(`Filter years:
      `),s=y("input"),f=S(`
      -
      `),i=y("input"),a=L(),w(u.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2023),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2023),G(i,"class","svelte-1ft65rw"),G(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(k,C){g(k,e,C),b(l,e,null),p(e,t),p(e,n),p(n,r),p(n,s),ct(s,o[0].minYear),p(n,f),p(n,i),ct(i,o[0].maxYear),p(e,a),b(u,e,null),c=!0,$||(d=[Xt(s,"input",o[14]),Xt(i,"input",o[15])],$=!0)},p(k,C){const T={};C&4194305&&(T.$$scope={dirty:C,ctx:k}),l.$set(T),C&1&&mn(s.value)!==k[0].minYear&&ct(s,k[0].minYear),C&1&&mn(i.value)!==k[0].maxYear&&ct(i,k[0].maxYear)},i(k){c||(m(l.$$.fragment,k),m(u.$$.fragment,k),c=!0)},o(k){_(l.$$.fragment,k),_(u.$$.fragment,k),c=!1},d(k){k&&h(e),v(l),v(u),$=!1,fo(d)}}}function ql(o){let e,l,t,n=o[3][o[21].pedestrian_location]+"",r;return{c(){e=y("p"),l=S("Pedestrian location: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&2097152&&n!==(n=s[3][s[21].pedestrian_location]+"")&&A(r,n)},d(s){s&&h(e)}}}function Hl(o){let e,l,t,n=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=y("p"),l=S("Pedestrian movement: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&2097152&&n!==(n=s[4][s[21].pedestrian_movement]+"")&&A(r,n)},d(s){s&&h(e)}}}function Lp(o){let e,l,t,n=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,$,d,k,C,T=zl(o[21])+"",I,O,N,F,M,j=o[21].pedestrian_location&&ql(o),H=o[21].pedestrian_movement&&Hl(o);return{c(){e=y("p"),l=S("Year: "),t=y("b"),r=S(n),s=L(),f=y("p"),i=S("Severity: "),a=y("b"),c=S(u),$=L(),d=y("p"),k=S("Casualties: "),C=y("b"),I=S(T),O=L(),j&&j.c(),N=L(),H&&H.c(),F=L(),M=y("p"),M.textContent="Click to open full report in CycleStreets"},m(P,R){g(P,e,R),p(e,l),p(e,t),p(t,r),g(P,s,R),g(P,f,R),p(f,i),p(f,a),p(a,c),g(P,$,R),g(P,d,R),p(d,k),p(d,C),p(C,I),g(P,O,R),j&&j.m(P,R),g(P,N,R),H&&H.m(P,R),g(P,F,R),g(P,M,R)},p(P,R){R&2097152&&n!==(n=P[21].year+"")&&A(r,n),R&2097152&&u!==(u=P[5][P[21].severity]+"")&&A(c,u),R&2097152&&T!==(T=zl(P[21])+"")&&A(I,T),P[21].pedestrian_location?j?j.p(P,R):(j=ql(P),j.c(),j.m(N.parentNode,N)):j&&(j.d(1),j=null),P[21].pedestrian_movement?H?H.p(P,R):(H=Hl(P),H.c(),H.m(F.parentNode,F)):H&&(H.d(1),H=null)},d(P){P&&(h(e),h(s),h(f),h($),h(d),h(O),h(N),h(F),h(M)),j&&j.d(P),H&&H.d(P)}}}function Ip(o){let e,l;return e=new ae({props:{$$slots:{default:[Lp,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Op(o){let e,l;const t=[q(zt),{sourceLayer:zt},{paint:{"circle-color":ke(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ip]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new $t({props:n}),e.$on("click",Fp),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&451?te(t,[s&0&&se(q(zt)),s&0&&{sourceLayer:zt},s&448&&{paint:{"circle-color":ke(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function jp(o){let e,l,t,n,r;function s(i){o[16](i)}let f={name:zt,title:Mp,$$slots:{controls:[Cp],help:[bp]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${zt}.pmtiles`,$$slots:{default:[Op]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let zt="stats19",Mp="Stats19";function Np(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function zl(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function Fp(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function Rp(o,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(P){return P.show?`${r.filter(W=>P[W]).join(",")}/${P.minYear}/${P.maxYear}`:null}let i=Vt(zt,s,f,Np);Y(o,i,P=>l(0,n=P));function a(P,R,W,ue,D,K){let Q=["any"];return n.pedestrians&&Q.push(["get","pedestrian"]),n.cyclists&&Q.push(["get","cyclist"]),n.horseRiders&&Q.push(["get","horse_rider"]),n.other&&Q.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],Q]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},$={1:"Fatal",2:"Serious",3:"Slight"},d=ne.sequential_low_to_high[4],k=ne.sequential_low_to_high[2],C=ne.sequential_low_to_high[0],T=[["Fatal",d],["Serious",k],["Slight",C]];function I(P){o.$$.not_equal(n.pedestrians,P)&&(n.pedestrians=P,i.set(n))}function O(P){o.$$.not_equal(n.cyclists,P)&&(n.cyclists=P,i.set(n))}function N(P){o.$$.not_equal(n.horseRiders,P)&&(n.horseRiders=P,i.set(n))}function F(P){o.$$.not_equal(n.other,P)&&(n.other=P,i.set(n))}function M(){n.minYear=mn(this.value),i.set(n)}function j(){n.maxYear=mn(this.value),i.set(n)}function H(P){o.$$.not_equal(n.show,P)&&(n.show=P,i.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,$,d,k,C,T,I,O,N,F,M,j,H]}class Pp extends Z{constructor(e){super(),X(this,e,Rp,jp,V,{})}}function Bl(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Ul(o){let e,l,t=o[1]+"",n,r,s,f=o[2]+"",i,a;return{c(){e=y("tr"),l=y("td"),n=S(t),r=L(),s=y("td"),i=S(f),a=L()},m(u,c){g(u,e,c),p(e,l),p(l,n),p(e,r),p(e,s),p(s,i),p(e,a)},p(u,c){c&1&&t!==(t=u[1]+"")&&A(n,t),c&1&&f!==(f=u[2]+"")&&A(i,f)},d(u){u&&h(e)}}}function Dp(o){let e,l,t,n,r=pe(Object.entries(o[0])),s=[];for(let f=0;f<r.length;f+=1)s[f]=Ul(Bl(o,r,f));return{c(){e=y("table"),l=y("thead"),l.innerHTML="<tr><th>Key</th> <th>Value</th></tr>",t=L(),n=y("tbody");for(let f=0;f<s.length;f+=1)s[f].c()},m(f,i){g(f,e,i),p(e,l),p(e,t),p(e,n);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,null)},p(f,i){if(i&1){r=pe(Object.entries(f[0]));let a;for(a=0;a<r.length;a+=1){const u=Bl(f,r,a);s[a]?s[a].p(u,i):(s[a]=Ul(u),s[a].c(),s[a].m(n,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(f){f&&h(e),ze(s,f)}}}function Gp(o){let e,l;return e=new ae({props:{openOn:"click",$$slots:{default:[Dp,({props:t})=>({0:t}),({props:t})=>t?1:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&33&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}class An extends Z{constructor(e){super(),X(this,e,null,Gp,V,{})}}function Ap(o){let e;return{c(){e=y("span"),e.innerHTML="<p>This is your own GeoJSON file.</p>",G(e,"slot","help")},m(l,t){g(l,e,t)},p:J,d(l){l&&h(e)}}}function qp(o){let e,l,t,n,r,s,f,i=o[0].features.length.toLocaleString()+"",a,u,c;return l=new Qr({props:{label:"Load your own GeoJSON file",onLoad:o[3]}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),n=y("p"),n.innerHTML="<i>Note this file doesn&#39;t leave your computer; it&#39;s not uploaded anywhere</i>",r=L(),s=y("p"),f=S("Currently showing "),a=S(i),u=S(" features"),G(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m($,d){g($,e,d),b(l,e,null),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),p(s,a),p(s,u),c=!0},p($,d){(!c||d&1)&&i!==(i=$[0].features.length.toLocaleString()+"")&&A(a,i)},i($){c||(m(l.$$.fragment,$),c=!0)},o($){_(l.$$.fragment,$),c=!1},d($){$&&h(e),v(l)}}}function Hp(o){let e,l;return e=new An({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function zp(o){let e,l;return e=new An({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Bp(o){let e,l;return e=new An({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Up(o){let e,l,t,n,r,s,f,i;const a=[q("user_data_polygons"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Polygon"]},{paint:{"fill-color":"blue","fill-opacity":ee(.5,1)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let u={$$slots:{default:[Hp]},$$scope:{ctx:o}};for(let I=0;I<a.length;I+=1)u=x(u,a[I]);e=new Ae({props:u});const c=[q("user_data_polygons-outline"),{paint:{"line-color":"black","line-width":2.5}},{layout:{visibility:o[1]?"visible":"none"}}];let $={};for(let I=0;I<c.length;I+=1)$=x($,c[I]);t=new ge({props:$});const d=[q("user_data_lines"),{manageHoverState:!0},{filter:["==",["geometry-type"],"LineString"]},{paint:{"line-color":"green","line-width":ee(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let k={$$slots:{default:[zp]},$$scope:{ctx:o}};for(let I=0;I<d.length;I+=1)k=x(k,d[I]);r=new ge({props:k});const C=[q("user_data_points"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Point"]},{paint:{"circle-color":"red","circle-radius":ee(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let T={$$slots:{default:[Bp]},$$scope:{ctx:o}};for(let I=0;I<C.length;I+=1)T=x(T,C[I]);return f=new $t({props:T}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(I,O){b(e,I,O),g(I,l,O),b(t,I,O),g(I,n,O),b(r,I,O),g(I,s,O),b(f,I,O),i=!0},p(I,O){const N=O&2?te(a,[a[0],a[1],a[2],a[3],{layout:{visibility:I[1]?"visible":"none"}},a[5],a[6]]):{};O&32&&(N.$$scope={dirty:O,ctx:I}),e.$set(N);const F=O&2?te(c,[c[0],c[1],{layout:{visibility:I[1]?"visible":"none"}}]):{};t.$set(F);const M=O&2?te(d,[d[0],d[1],d[2],d[3],{layout:{visibility:I[1]?"visible":"none"}},d[5],d[6]]):{};O&32&&(M.$$scope={dirty:O,ctx:I}),r.$set(M);const j=O&2?te(C,[C[0],C[1],C[2],C[3],{layout:{visibility:I[1]?"visible":"none"}},C[5],C[6]]):{};O&32&&(j.$$scope={dirty:O,ctx:I}),f.$set(j)},i(I){i||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(r.$$.fragment,I),m(f.$$.fragment,I),i=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(r.$$.fragment,I),_(f.$$.fragment,I),i=!1},d(I){I&&(h(l),h(n),h(s)),v(e,I),v(t,I),v(r,I),v(f,I)}}}function Ep(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Zr,title:Wp,$$slots:{controls:[qp],help:[Ap]},$$scope:{ctx:o}};return o[1]!==void 0&&(f.show=o[1]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new mt({props:{data:o[0],generateId:!0,$$slots:{default:[Up]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&33&&(u.$$scope={dirty:a,ctx:i}),!l&&a&2&&(l=!0,u.show=i[1],U(()=>l=!1)),e.$set(u);const c={};a&1&&(c.data=i[0]),a&34&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Zr="user_data",Wp="Your own GeoJSON file";function Yp(o,e,l){let t,n=$e(Zr);Y(o,n,i=>l(1,t=i));let r={type:"FeatureCollection",features:[]};function s(i,a){try{l(0,r=JSON.parse(a))}catch(u){window.alert(`Couldn't load ${i} -- is it GeoJSON? ${u}`)}}function f(i){t=i,n.set(t)}return[r,t,n,s,f]}class Jp extends Z{constructor(e){super(),X(this,e,Yp,Ep,V,{})}}function Qp(o){let e;return{c(){e=S(`DfT road statistics
      `)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Vp(o){let e;return{c(){e=S("methodology")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Kp(o){let e,l,t,n,r,s,f,i,a,u,c,$;return n=new re({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Qp]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Vp]},$$scope:{ctx:o}}}),c=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("AADF (annual average daily flow) data from "),w(n.$$.fragment),r=S(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),w(s.$$.fragment),f=S(" for details and caveats about the measurements."),i=L(),a=y("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),w(c.$$.fragment),G(e,"slot","help")},m(d,k){g(d,e,k),p(e,l),p(l,t),b(n,l,null),p(l,r),b(s,l,null),p(l,f),p(e,i),p(e,a),p(e,u),b(c,e,null),$=!0},p(d,k){const C={};k&128&&(C.$$scope={dirty:k,ctx:d}),n.$set(C);const T={};k&128&&(T.$$scope={dirty:k,ctx:d}),s.$set(T)},i(d){$||(m(n.$$.fragment,d),m(s.$$.fragment,d),m(c.$$.fragment,d),$=!0)},o(d){_(n.$$.fragment,d),_(s.$$.fragment,d),_(c.$$.fragment,d),$=!1},d(d){d&&h(e),v(n),v(s),v(c)}}}function Zp(o){let e,l,t;return l=new Qe({props:{colorScale:o[1],limits:o[3]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Xp(o){let e,l=o[6].location+"",t,n,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",$,d,k,C,T=o[6].year+"",I,O,N,F=o[6].pedal_cycles.toLocaleString()+"",M,j,H,P,R,W=o[6].method+"",ue;return{c(){e=y("h2"),t=S(l),n=L(),r=y("p"),s=S("Total motor vehicles ("),i=S(f),a=S(` AADF):
        `),u=y("b"),$=S(c),d=L(),k=y("p"),C=S("Total pedal cycles ("),I=S(T),O=S(` AADF):
        `),N=y("b"),M=S(F),j=L(),H=y("p"),P=S("Count method: "),R=y("b"),ue=S(W)},m(D,K){g(D,e,K),p(e,t),g(D,n,K),g(D,r,K),p(r,s),p(r,i),p(r,a),p(r,u),p(u,$),g(D,d,K),g(D,k,K),p(k,C),p(k,I),p(k,O),p(k,N),p(N,M),g(D,j,K),g(D,H,K),p(H,P),p(H,R),p(R,ue)},p(D,K){K&64&&l!==(l=D[6].location+"")&&A(t,l),K&64&&f!==(f=D[6].year+"")&&A(i,f),K&64&&c!==(c=D[6].motor_vehicles.toLocaleString()+"")&&A($,c),K&64&&T!==(T=D[6].year+"")&&A(I,T),K&64&&F!==(F=D[6].pedal_cycles.toLocaleString()+"")&&A(M,F),K&64&&W!==(W=D[6].method+"")&&A(ue,W)},d(D){D&&(h(e),h(n),h(r),h(d),h(k),h(j),h(H))}}}function xp(o){let e,l;return e=new ae({props:{$$slots:{default:[Xp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function em(o){let e,l;const t=[q(Bt),{sourceLayer:Bt},{paint:{"circle-color":ke(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[xp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new $t({props:n}),e.$on("click",lm),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&se(q(Bt)),s&0&&{sourceLayer:Bt},s&6&&{paint:{"circle-color":ke(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function tm(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Bt,title:nm,$$slots:{controls:[Zp],help:[Kp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Bt}.pmtiles`,$$slots:{default:[em]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Bt="vehicle_counts",nm="Vehicle counts";function lm(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function rm(o,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=$e(Bt);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class om extends Z{constructor(e){super(),X(this,e,rm,tm,V,{})}}function sm(o){return je(["get","intervention_type"],{area:rt.area,route:rt.route,crossing:rt.crossing,other:rt.other},"white")}function im(o){return[["Areas",rt.area],["Routes",rt.route],["Crossings",rt.crossing],["Other",rt.other]]}let xt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854",ATF5:"purple"},Fn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function am(o,e,l,t){var f,i,a;let n={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},r={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},s={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};for(let[u,c]of Object.entries(o.schemes))((f=c.browse)==null?void 0:f.sketch_source)==="LCWIP mapping"?r.schemes[u]=c:((i=c.browse)==null?void 0:i.sketch_source)==="ATF assessment"?n.schemes[u]=c:((a=c.browse)==null?void 0:a.sketch_source)==="Final inspection sketches"&&(s.schemes[u]=c);for(let u of o.features){if(!fm(u))continue;let c=u.properties.scheme_reference,$={},d={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};u.properties.sketch_source==="ATF assessment"&&Object.hasOwn(n.schemes,c)?($=n.schemes[c],d=n):u.properties.sketch_source==="LCWIP mapping"&&Object.hasOwn(r.schemes,c)?($=r.schemes[c],d=r):u.properties.sketch_source==="Final inspection sketches"&&Object.hasOwn(s.schemes,c)&&($=s.schemes[c],d=s),$.browse&&(u.properties.funding_programme=$.browse.funding_programme,u.properties.current_milestone=$.browse.current_milestone),u.id=d.features.length+1,d.features.push(u)}e.set(n),l.set(r),t.set(s)}function fm(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}function um(){let o={type:"FeatureCollection",features:[],schemes:{},notes:["These schemes are everything you've drawn in this browser using Scheme Sketcher. The data source and accuracy depend on whatever files you imported, created, or edited yourself."]};for(let l=0;l<window.localStorage.length;l++){let t=window.localStorage.key(l),n=t.split("/");if(!(n.length!=3||n[0]!="sketch"))try{let r=JSON.parse(window.localStorage.getItem(t));if(r.features.length==0)continue;for(let s of Object.values(r.schemes))s.browse={authority_or_region:n[1],local_filename:n[2]};o.schemes={...o.schemes,...r.schemes},o.features=[...o.features,...r.features]}catch{}}let e=1;for(let l of o.features)l.id=e++;return o}function El(o,e,l){const t=o.slice();return t[30]=e[l][0],t[31]=e[l][1],t[32]=e,t[33]=l,t}function Wl(o,e,l){const t=o.slice();return t[34]=e[l],t[35]=e,t[36]=l,t}function cm(o){let e;return{c(){e=S("Filters")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function $m(o){let e;return{c(){e=S("Reset all filters")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function pm(o){let e,l,t,n,r,s,f,i;e=new $n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[gm]},$$scope:{ctx:o}}});function a(d){o[25](d)}let u={label:"Scheme name or reference",options:hn(o[0])};o[1]!==void 0&&(u.value=o[1]),t=new Vr({props:u}),z.push(()=>B(t,"value",a));function c(d){o[26](d)}let $={label:"Authority or region",choices:o[11],emptyOption:!0};return o[4]!==void 0&&($.value=o[4]),s=new Qt({props:$}),z.push(()=>B(s,"value",c)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),r=L(),w(s.$$.fragment)},m(d,k){b(e,d,k),g(d,l,k),b(t,d,k),g(d,r,k),b(s,d,k),i=!0},p(d,k){const C={};k[0]&4|k[1]&64&&(C.$$scope={dirty:k,ctx:d}),e.$set(C);const T={};k[0]&1&&(T.options=hn(d[0])),!n&&k[0]&2&&(n=!0,T.value=d[1],U(()=>n=!1)),t.$set(T);const I={};k[0]&2048&&(I.choices=d[11]),!f&&k[0]&16&&(f=!0,I.value=d[4],U(()=>f=!1)),s.$set(I)},i(d){i||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(s.$$.fragment,d),i=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(s.$$.fragment,d),i=!1},d(d){d&&(h(l),h(r)),v(e,d),v(t,d),v(s,d)}}}function mm(o){let e,l,t,n,r,s,f,i,a,u,c,$,d,k,C,T,I,O;t=new $n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[dm]},$$scope:{ctx:o}}});function N(R){o[18](R)}let F={label:"Scheme name or reference",options:hn(o[0])};o[1]!==void 0&&(F.value=o[1]),r=new Vr({props:F}),z.push(()=>B(r,"value",N));function M(R){o[19](R)}let j={label:"Authority or region",choices:o[11],emptyOption:!0};o[4]!==void 0&&(j.value=o[4]),i=new Qt({props:j}),z.push(()=>B(i,"value",M));function H(R){o[20](R)}let P={label:"Current milestone",choices:o[12],emptyOption:!0};return o[6]!==void 0&&(P.value=o[6]),c=new Qt({props:P}),z.push(()=>B(c,"value",H)),C=new $n({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[vm]},$$scope:{ctx:o}}}),I=new $n({props:{label:"Intervention types",id:"filterInterventionTypes",$$slots:{default:[Sm]},$$scope:{ctx:o}}}),{c(){e=y("div"),l=y("div"),w(t.$$.fragment),n=L(),w(r.$$.fragment),f=L(),w(i.$$.fragment),u=L(),w(c.$$.fragment),d=L(),k=y("div"),w(C.$$.fragment),T=L(),w(I.$$.fragment),G(l,"class","govuk-grid-column-one-half"),G(k,"class","govuk-grid-column-one-half"),G(e,"class","govuk-grid-row")},m(R,W){g(R,e,W),p(e,l),b(t,l,null),p(l,n),b(r,l,null),p(l,f),b(i,l,null),p(l,u),b(c,l,null),p(e,d),p(e,k),b(C,k,null),p(k,T),b(I,k,null),O=!0},p(R,W){const ue={};W[0]&4|W[1]&64&&(ue.$$scope={dirty:W,ctx:R}),t.$set(ue);const D={};W[0]&1&&(D.options=hn(R[0])),!s&&W[0]&2&&(s=!0,D.value=R[1],U(()=>s=!1)),r.$set(D);const K={};W[0]&2048&&(K.choices=R[11]),!a&&W[0]&16&&(a=!0,K.value=R[4],U(()=>a=!1)),i.$set(K);const Q={};!$&&W[0]&64&&($=!0,Q.value=R[6],U(()=>$=!1)),c.$set(Q);const ce={};W[0]&32|W[1]&64&&(ce.$$scope={dirty:W,ctx:R}),C.$set(ce);const ye={};W[0]&128|W[1]&64&&(ye.$$scope={dirty:W,ctx:R}),I.$set(ye)},i(R){O||(m(t.$$.fragment,R),m(r.$$.fragment,R),m(i.$$.fragment,R),m(c.$$.fragment,R),m(C.$$.fragment,R),m(I.$$.fragment,R),O=!0)},o(R){_(t.$$.fragment,R),_(r.$$.fragment,R),_(i.$$.fragment,R),_(c.$$.fragment,R),_(C.$$.fragment,R),_(I.$$.fragment,R),O=!1},d(R){R&&h(e),v(t),v(r),v(i),v(c),v(C),v(I)}}}function _m(o){let e;return{c(){e=S("Clear")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function gm(o){let e,l,t,n,r,s;return t=new Ye({props:{$$slots:{default:[_m]},$$scope:{ctx:o}}}),t.$on("click",o[24]),{c(){e=y("input"),l=L(),w(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){g(f,e,i),ct(e,o[2]),g(f,l,i),b(t,f,i),n=!0,r||(s=Xt(e,"input",o[23]),r=!0)},p(f,i){i[0]&4&&e.value!==f[2]&&ct(e,f[2]);const a={};i[1]&64&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,s()}}}function hm(o){let e;return{c(){e=S("Clear")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function dm(o){let e,l,t,n,r,s;return t=new Ye({props:{$$slots:{default:[hm]},$$scope:{ctx:o}}}),t.$on("click",o[17]),{c(){e=y("input"),l=L(),w(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){g(f,e,i),ct(e,o[2]),g(f,l,i),b(t,f,i),n=!0,r||(s=Xt(e,"input",o[16]),r=!0)},p(f,i){i[0]&4&&e.value!==f[2]&&ct(e,f[2]);const a={};i[1]&64&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,s()}}}function wm(o){let e=o[34]+"",l,t;return{c(){l=S(e),t=L()},m(n,r){g(n,l,r),g(n,t,r)},p:J,d(n){n&&(h(l),h(t))}}}function Yl(o){let e,l,t;function n(s){o[21](s,o[34])}let r={$$slots:{default:[wm]},$$scope:{ctx:o}};return o[5][o[34]]!==void 0&&(r.checked=o[5][o[34]]),e=new We({props:r}),z.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f[1]&64&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&32&&(l=!0,i.checked=o[5][o[34]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function bm(o){let e,l,t=pe(Object.keys(xt)),n=[];for(let s=0;s<t.length;s+=1)n[s]=Yl(Wl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f[0]&32){t=pe(Object.keys(xt));let i;for(i=0;i<t.length;i+=1){const a=Wl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Yl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);ve()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&h(e),ze(n,s)}}}function vm(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[bm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function km(o){let e=o[31]+"",l,t;return{c(){l=S(e),t=L()},m(n,r){g(n,l,r),g(n,t,r)},p:J,d(n){n&&(h(l),h(t))}}}function Jl(o){let e,l,t;function n(s){o[22](s,o[30])}let r={$$slots:{default:[km]},$$scope:{ctx:o}};return o[7][o[30]]!==void 0&&(r.checked=o[7][o[30]]),e=new We({props:r}),z.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f[1]&64&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&8320&&(l=!0,i.checked=o[7][o[30]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function ym(o){let e,l,t=pe(o[13]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Jl(El(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f[0]&8320){t=pe(s[13]);let i;for(i=0;i<t.length;i+=1){const a=El(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Jl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);ve()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&h(e),ze(n,s)}}}function Sm(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[ym]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n[0]&128|n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Tm(o){let e;return{c(){e=S("Done")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Cm(o){let e,l,t,n,r=o[10].interventions.toLocaleString()+"",s,f,i,a,u=o[9].size.toLocaleString()+"",c,$,d,k,C,T=Ql(o[10].totalLength).toFixed(1)+"",I,O,N,F,M,j,H,P,R,W;F=new Ye({props:{$$slots:{default:[$m]},$$scope:{ctx:o}}}),F.$on("click",o[14]);const ue=[mm,pm],D=[];function K(Q,ce){return Q[3]=="ATF"?0:1}return j=K(o),H=D[j]=ue[j](o),R=new Uo({props:{$$slots:{default:[Tm]},$$scope:{ctx:o}}}),R.$on("click",o[27]),{c(){e=y("p"),e.textContent="Showing:",l=L(),t=y("ul"),n=y("li"),s=S(r),f=S(" interventions"),i=L(),a=y("li"),c=S(u),$=S(" schemes"),d=L(),k=y("li"),C=S("total route length of "),I=S(T),O=S(" miles"),N=L(),w(F.$$.fragment),M=L(),H.c(),P=L(),w(R.$$.fragment)},m(Q,ce){g(Q,e,ce),g(Q,l,ce),g(Q,t,ce),p(t,n),p(n,s),p(n,f),p(t,i),p(t,a),p(a,c),p(a,$),p(t,d),p(t,k),p(k,C),p(k,I),p(k,O),g(Q,N,ce),b(F,Q,ce),g(Q,M,ce),D[j].m(Q,ce),g(Q,P,ce),b(R,Q,ce),W=!0},p(Q,ce){(!W||ce[0]&1024)&&r!==(r=Q[10].interventions.toLocaleString()+"")&&A(s,r),(!W||ce[0]&512)&&u!==(u=Q[9].size.toLocaleString()+"")&&A(c,u),(!W||ce[0]&1024)&&T!==(T=Ql(Q[10].totalLength).toFixed(1)+"")&&A(I,T);const ye={};ce[1]&64&&(ye.$$scope={dirty:ce,ctx:Q}),F.$set(ye);let le=j;j=K(Q),j===le?D[j].p(Q,ce):(be(),_(D[le],1,1,()=>{D[le]=null}),ve(),H=D[j],H?H.p(Q,ce):(H=D[j]=ue[j](Q),H.c()),m(H,1),H.m(P.parentNode,P));const Ce={};ce[1]&64&&(Ce.$$scope={dirty:ce,ctx:Q}),R.$set(Ce)},i(Q){W||(m(F.$$.fragment,Q),m(H),m(R.$$.fragment,Q),W=!0)},o(Q){_(F.$$.fragment,Q),_(H),_(R.$$.fragment,Q),W=!1},d(Q){Q&&(h(e),h(l),h(t),h(N),h(M),h(P)),v(F,Q),D[j].d(Q),v(R,Q)}}}function Lm(o){let e,l,t,n,r;e=new Ye({props:{$$slots:{default:[cm]},$$scope:{ctx:o}}}),e.$on("click",o[15]);function s(i){o[28](i)}let f={title:`Filter ${o[3]} schemes`,$$slots:{default:[Cm]},$$scope:{ctx:o}};return o[8]!==void 0&&(f.open=o[8]),t=new go({props:f}),z.push(()=>B(t,"open",s)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(i,a){b(e,i,a),g(i,l,a),b(t,i,a),r=!0},p(i,a){const u={};a[1]&64&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a[0]&8&&(c.title=`Filter ${i[3]} schemes`),a[0]&4095|a[1]&64&&(c.$$scope={dirty:a,ctx:i}),!n&&a[0]&256&&(n=!0,c.open=i[8],U(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),r=!1},d(i){i&&h(l),v(e,i),v(t,i)}}}function Im(o){var t;let e=new Set;for(let n of Object.values(o.schemes))(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Ql(o){return o*621371e-9}function hn(o){let e=[];for(let l of Object.values(o.schemes))e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function Om(o,e,l){let t,{source:n}=e,{schemesGj:r}=e,{filterSchemeText:s}=e,{filterInterventionText:f}=e,i=!1,a=new Set,u={interventions:0,totalLength:0},c=Object.keys(Fn).map(le=>[le,le]),$="",d=Object.fromEntries(Object.keys(xt).map(le=>[le,!0])),k="",C=[["route","Routes"],["area","Areas"],["crossing","Crossings"],["other","Other"]],T=Object.fromEntries(C.map(([le,Ce])=>[le,!0]));function I(le,Ce,nt,_t,lt,at){let Je=le.toLowerCase(),ft=Ce.toLowerCase(),gt=he=>{var Me,dt,Ee,He;if(Je&&!((Me=he.properties.name)!=null&&Me.toLowerCase().includes(Je))&&!((dt=he.properties.description)!=null&&dt.toLowerCase().includes(Je)))return!1;let qe=r.schemes[he.properties.scheme_reference];return!(nt&&((Ee=qe.browse)==null?void 0:Ee.authority_or_region)!=nt||n=="ATF"&&qe.browse.funding_programme&&!_t[qe.browse.funding_programme]||lt&&((He=qe.browse)==null?void 0:He.current_milestone)!=lt||ft&&!qe.scheme_reference.toLowerCase().includes(ft)&&!(qe.scheme_name??"").toLowerCase().includes(ft))};l(9,a=new Set(r.features.filter(gt).map(he=>he.properties.scheme_reference))),l(10,u={interventions:0,totalLength:0});let ht=he=>{var qe,Me;return!(!a.has(he.properties.scheme_reference)||Je&&!((qe=he.properties.name)!=null&&qe.toLowerCase().includes(Je))&&!((Me=he.properties.description)!=null&&Me.toLowerCase().includes(Je))||n=="ATF"&&!at[he.properties.intervention_type])};for(let he of r.features)ht(he)?(delete he.properties.hide_while_editing,l(10,u.interventions++,u),he.geometry.type=="LineString"&&he.properties.length_meters&&l(10,u.totalLength+=he.properties.length_meters,u)):he.properties.hide_while_editing=!0;l(0,r),l(10,u)}function O(){l(4,$=""),l(5,d=Object.fromEntries(Object.keys(xt).map(le=>[le,!0]))),l(6,k=""),l(2,f=""),l(1,s="")}const N=()=>l(8,i=!0);function F(){f=this.value,l(2,f)}const M=()=>l(2,f="");function j(le){s=le,l(1,s)}function H(le){$=le,l(4,$)}function P(le){k=le,l(6,k)}function R(le,Ce){o.$$.not_equal(d[Ce],le)&&(d[Ce]=le,l(5,d))}function W(le,Ce){o.$$.not_equal(T[Ce],le)&&(T[Ce]=le,l(7,T))}function ue(){f=this.value,l(2,f)}const D=()=>l(2,f="");function K(le){s=le,l(1,s)}function Q(le){$=le,l(4,$)}const ce=()=>l(8,i=!1);function ye(le){i=le,l(8,i)}return o.$$set=le=>{"source"in le&&l(3,n=le.source),"schemesGj"in le&&l(0,r=le.schemesGj),"filterSchemeText"in le&&l(1,s=le.filterSchemeText),"filterInterventionText"in le&&l(2,f=le.filterInterventionText)},o.$$.update=()=>{o.$$.dirty[0]&1&&l(11,t=Im(r)),o.$$.dirty[0]&246&&I(f,s,$,d,k,T)},[r,s,f,n,$,d,k,T,i,a,u,t,c,C,O,N,F,M,j,H,P,R,W,ue,D,K,Q,ce,ye]}class bn extends Z{constructor(e){super(),X(this,e,Om,Lm,V,{source:3,schemesGj:0,filterSchemeText:1,filterInterventionText:2},null,[-1,-1])}}function Vl(o){let e,l,t,n=o[0].budget.toLocaleString()+"",r,s;return{c(){e=y("p"),l=y("b"),l.textContent="Cost",t=S(`
    : `),r=S(n),s=S(`
    GBP`)},m(f,i){g(f,e,i),p(e,l),p(e,t),p(e,r),p(e,s)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&A(r,n)},d(f){f&&h(e)}}}function Kl(o){let e;return{c(){e=y("p"),e.textContent="Development is fully funded"},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Zl(o){let e;return{c(){e=y("p"),e.textContent="Construction is fully funded"},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Xl(o){let e,l,t,n;return{c(){e=y("p"),l=y("b"),l.textContent="Funding sources",t=S(`
    : `),n=S(o[1])},m(r,s){g(r,e,s),p(e,l),p(e,t),p(e,n)},p(r,s){s&2&&A(n,r[1])},d(r){r&&h(e)}}}function jm(o){let e,l,t,n,r=o[0].budget&&Vl(o),s=o[0].development_funded&&Kl(),f=o[0].construction_funded&&Zl(),i=o[1]&&Xl(o);return{c(){r&&r.c(),e=L(),s&&s.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=de()},m(a,u){r&&r.m(a,u),g(a,e,u),s&&s.m(a,u),g(a,l,u),f&&f.m(a,u),g(a,t,u),i&&i.m(a,u),g(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=Vl(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=Kl(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=Zl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=Xl(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:J,o:J,d(a){a&&(h(e),h(l),h(t),h(n)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function Mm(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function Nm(o,e,l){let t,{props:n}=e;return o.$$set=r=>{"props"in r&&l(0,n=r.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=Mm(n))},[n,t]}class Xr extends Z{constructor(e){super(),X(this,e,Nm,jm,V,{props:0})}}function xl(o){let e,l,t,n=o[0].status+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Status",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].status+"")&&A(r,n)},d(s){s&&h(e)}}}function er(o){let e,l,t,n=o[0].timescale+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Timescale",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale+"")&&A(r,n)},d(s){s&&h(e)}}}function tr(o){let e,l,t,n=o[0].timescale_year+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Estimated completion year",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale_year+"")&&A(r,n)},d(s){s&&h(e)}}}function nr(o){let e,l,t,n=o[0].year_published+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme most recently published",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].year_published+"")&&A(r,n)},d(s){s&&h(e)}}}function lr(o){let e,l,t,n=o[0].year_consulted+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme most recently consulted on",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].year_consulted+"")&&A(r,n)},d(s){s&&h(e)}}}function Fm(o){let e,l,t,n,r,s=o[0].status&&xl(o),f=o[0].timescale&&er(o),i=o[0].timescale_year&&tr(o),a=o[0].year_published&&nr(o),u=o[0].year_consulted&&lr(o);return{c(){s&&s.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=de()},m(c,$){s&&s.m(c,$),g(c,e,$),f&&f.m(c,$),g(c,l,$),i&&i.m(c,$),g(c,t,$),a&&a.m(c,$),g(c,n,$),u&&u.m(c,$),g(c,r,$)},p(c,[$]){c[0].status?s?s.p(c,$):(s=xl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,$):(f=er(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,$):(i=tr(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,$):(a=nr(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,$):(u=lr(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:J,o:J,d(c){c&&(h(e),h(l),h(t),h(n),h(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function Rm(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class xr extends Z{constructor(e){super(),X(this,e,Rm,Fm,V,{props:0})}}function vn(o){const e=o.slice(),l=e[5].pipeline;return e[11]=l,e}function kn(o){const e=o.slice(),l=JSON.parse(e[1].v2);return e[11]=l,e}function yn(o){const e=o.slice(),l=JSON.parse(e[1].pipeline);return e[11]=l,e}function rr(o){let e,l,t,n=Qn(o[1].length_meters)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Length",t=S(`
        : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=Qn(s[1].length_meters)+"")&&A(r,n)},d(s){s&&h(e)}}}function or(o){let e,l=ut(o[1].description,o[3])+"";return{c(){e=y("p")},m(t,n){g(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=ut(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&h(e)}}}function sr(o){let e,l,t,n,r,s,f,i=o[11].atf4_type&&ir(o),a=o[11].accuracy&&ar(o),u=o[11].is_alternative&&fr();return n=new Xr({props:{props:o[11]}}),s=new xr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,$){i&&i.m(c,$),g(c,e,$),a&&a.m(c,$),g(c,l,$),u&&u.m(c,$),g(c,t,$),b(n,c,$),g(c,r,$),b(s,c,$),f=!0},p(c,$){c[11].atf4_type?i?i.p(c,$):(i=ir(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].accuracy?a?a.p(c,$):(a=ar(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].is_alternative?u||(u=fr(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const d={};$&2&&(d.props=c[11]),n.$set(d);const k={};$&2&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function ir(o){let e,l,t,n=o[11].atf4_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="ATF4 type",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].atf4_type+"")&&A(r,n)},d(s){s&&h(e)}}}function ar(o){let e,l,t,n=o[11].accuracy+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Accuracy",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].accuracy+"")&&A(r,n)},d(s){s&&h(e)}}}function fr(o){let e;return{c(){e=y("p"),e.textContent="Represents an alternative route"},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function ur(o){let e,l,t,n=o[11].intervention_type&&cr(o),r=o[11].work_type&&$r(o),s=o[11].intended_uses&&pr(o);return{c(){n&&n.c(),e=L(),r&&r.c(),l=L(),s&&s.c(),t=de()},m(f,i){n&&n.m(f,i),g(f,e,i),r&&r.m(f,i),g(f,l,i),s&&s.m(f,i),g(f,t,i)},p(f,i){f[11].intervention_type?n?n.p(f,i):(n=cr(f),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),f[11].work_type?r?r.p(f,i):(r=$r(f),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null),f[11].intended_uses?s?s.p(f,i):(s=pr(f),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(f){f&&(h(e),h(l),h(t)),n&&n.d(f),r&&r.d(f),s&&s.d(f)}}}function cr(o){let e,l,t,n=o[11].intervention_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Type",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].intervention_type+"")&&A(r,n)},d(s){s&&h(e)}}}function $r(o){let e,l,t,n=o[11].work_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="What kind of infrastructure is mapped",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].work_type+"")&&A(r,n)},d(s){s&&h(e)}}}function pr(o){let e,l,t,n=o[11].intended_uses+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Intended uses",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].intended_uses+"")&&A(r,n)},d(s){s&&h(e)}}}function mr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Capital scheme ID",t=S(`
        : `),r=S(n)},m(f,i){g(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&A(r,n)},d(f){f&&h(e)}}}function _r(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.funding_programme)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Funding programme",t=S(`
        : `),r=S(n)},m(f,i){g(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&A(r,n)},d(f){f&&h(e)}}}function gr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Current milestone",t=S(`
        : `),r=S(n)},m(f,i){g(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&A(r,n)},d(f){f&&h(e)}}}function hr(o){let e,l,t,n,r,s,f,i=o[11].scheme_type&&dr(o),a=o[11].atf4_lead_type&&wr(o),u=o[11].scheme_description&&br(o);return n=new Xr({props:{props:o[11]}}),s=new xr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,$){i&&i.m(c,$),g(c,e,$),a&&a.m(c,$),g(c,l,$),u&&u.m(c,$),g(c,t,$),b(n,c,$),g(c,r,$),b(s,c,$),f=!0},p(c,$){c[11].scheme_type?i?i.p(c,$):(i=dr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].atf4_lead_type?a?a.p(c,$):(a=wr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].scheme_description?u?u.p(c,$):(u=br(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const d={};$&32&&(d.props=c[11]),n.$set(d);const k={};$&32&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function dr(o){let e,l,t,n=o[11].scheme_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme type",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_type+"")&&A(r,n)},d(s){s&&h(e)}}}function wr(o){let e,l,t,n=o[11].atf4_lead_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="ATF4 lead type",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&32&&n!==(n=s[11].atf4_lead_type+"")&&A(r,n)},d(s){s&&h(e)}}}function br(o){let e,l,t,n=o[11].scheme_description+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Descripton",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_description+"")&&A(r,n)},d(s){s&&h(e)}}}function Pm(o){let e;return{c(){e=S("Edit a copy of this scheme")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Dm(o){let e;return{c(){e=S("Edit your existing version of this scheme")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Gm(o){let e;function l(r,s){var f;return(f=r[5].browse)!=null&&f.local_filename?Dm:Pm}let t=l(o),n=t(o);return{c(){n.c(),e=de()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Am(o){let e;return{c(){e=S("Zoom to show entire scheme")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function vr(o){var sn,E,an,fn;let e,l,t,n,r,s,f,i=ut(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,$,d,k,C,T,I,O,N,F,M,j,H,P,R,W,ue=ut(o[5].scheme_name??"",o[2])+"",D,K,Q,ce,ye,le=ut(o[1].scheme_reference,o[2])+"",Ce,nt,_t,lt,at=((sn=o[5].browse)==null?void 0:sn.authority_or_region)+"",Je,ft,gt,ht,he,qe,Me,dt,Ee,He,Ne=o[1].length_meters&&rr(o),Fe=o[1].description&&or(o),Se=o[1].pipeline&&sr(yn(o)),Re=o[1].v2&&ur(kn(o)),Pe=((E=o[5].browse)==null?void 0:E.capital_scheme_id)&&mr(o),De=((an=o[5].browse)==null?void 0:an.funding_programme)&&_r(o),Ge=((fn=o[5].browse)==null?void 0:fn.current_milestone)&&gr(o),Te=o[5].pipeline&&hr(vn(o));return Me=new Ye({props:{$$slots:{default:[Gm]},$$scope:{ctx:o}}}),Me.$on("click",o[7]),Ee=new Ye({props:{$$slots:{default:[Am]},$$scope:{ctx:o}}}),Ee.$on("click",o[6]),{c(){e=y("div"),l=y("h2"),l.textContent="Intervention",t=L(),n=y("p"),r=y("b"),r.textContent="Name",s=S(`
      : `),f=new Ut(!1),a=S(" ("),c=S(u),$=S(")"),d=L(),Ne&&Ne.c(),k=L(),Fe&&Fe.c(),C=L(),Se&&Se.c(),T=L(),Re&&Re.c(),I=L(),O=y("hr"),N=L(),F=y("h2"),M=S(o[0]),j=L(),H=y("p"),P=y("b"),P.textContent="Scheme name",R=S(`
      : `),W=new Ut(!1),D=L(),K=y("p"),Q=y("b"),Q.textContent="Scheme reference",ce=S(`
      : `),ye=new Ut(!1),Ce=L(),nt=y("p"),_t=y("b"),_t.textContent="Authority or region",lt=S(`
      : `),Je=S(at),ft=L(),Pe&&Pe.c(),gt=L(),De&&De.c(),ht=L(),Ge&&Ge.c(),he=L(),Te&&Te.c(),qe=L(),w(Me.$$.fragment),dt=L(),w(Ee.$$.fragment),f.a=a,W.a=null,ye.a=null,oe(e,"max-width","30vw"),oe(e,"max-height","60vh"),oe(e,"overflow","auto")},m(ie,we){g(ie,e,we),p(e,l),p(e,t),p(e,n),p(n,r),p(n,s),f.m(i,n),p(n,a),p(n,c),p(n,$),p(e,d),Ne&&Ne.m(e,null),p(e,k),Fe&&Fe.m(e,null),p(e,C),Se&&Se.m(e,null),p(e,T),Re&&Re.m(e,null),p(e,I),p(e,O),p(e,N),p(e,F),p(F,M),p(e,j),p(e,H),p(H,P),p(H,R),W.m(ue,H),p(e,D),p(e,K),p(K,Q),p(K,ce),ye.m(le,K),p(e,Ce),p(e,nt),p(nt,_t),p(nt,lt),p(nt,Je),p(e,ft),Pe&&Pe.m(e,null),p(e,gt),De&&De.m(e,null),p(e,ht),Ge&&Ge.m(e,null),p(e,he),Te&&Te.m(e,null),p(e,qe),b(Me,e,null),p(e,dt),b(Ee,e,null),o[9](e),He=!0},p(ie,we){var Bn,Un,En,Wn;(!He||we&10)&&i!==(i=ut(ie[1].name,ie[3])+"")&&f.p(i),(!He||we&2)&&u!==(u=ie[1].intervention_type+"")&&A(c,u),ie[1].length_meters?Ne?Ne.p(ie,we):(Ne=rr(ie),Ne.c(),Ne.m(e,k)):Ne&&(Ne.d(1),Ne=null),ie[1].description?Fe?Fe.p(ie,we):(Fe=or(ie),Fe.c(),Fe.m(e,C)):Fe&&(Fe.d(1),Fe=null),ie[1].pipeline?Se?(Se.p(yn(ie),we),we&2&&m(Se,1)):(Se=sr(yn(ie)),Se.c(),m(Se,1),Se.m(e,T)):Se&&(be(),_(Se,1,1,()=>{Se=null}),ve()),ie[1].v2?Re?Re.p(kn(ie),we):(Re=ur(kn(ie)),Re.c(),Re.m(e,I)):Re&&(Re.d(1),Re=null),(!He||we&1)&&A(M,ie[0]),(!He||we&36)&&ue!==(ue=ut(ie[5].scheme_name??"",ie[2])+"")&&W.p(ue),(!He||we&6)&&le!==(le=ut(ie[1].scheme_reference,ie[2])+"")&&ye.p(le),(!He||we&32)&&at!==(at=((Bn=ie[5].browse)==null?void 0:Bn.authority_or_region)+"")&&A(Je,at),(Un=ie[5].browse)!=null&&Un.capital_scheme_id?Pe?Pe.p(ie,we):(Pe=mr(ie),Pe.c(),Pe.m(e,gt)):Pe&&(Pe.d(1),Pe=null),(En=ie[5].browse)!=null&&En.funding_programme?De?De.p(ie,we):(De=_r(ie),De.c(),De.m(e,ht)):De&&(De.d(1),De=null),(Wn=ie[5].browse)!=null&&Wn.current_milestone?Ge?Ge.p(ie,we):(Ge=gr(ie),Ge.c(),Ge.m(e,he)):Ge&&(Ge.d(1),Ge=null),ie[5].pipeline?Te?(Te.p(vn(ie),we),we&32&&m(Te,1)):(Te=hr(vn(ie)),Te.c(),m(Te,1),Te.m(e,qe)):Te&&(be(),_(Te,1,1,()=>{Te=null}),ve());const Hn={};we&4128&&(Hn.$$scope={dirty:we,ctx:ie}),Me.$set(Hn);const zn={};we&4096&&(zn.$$scope={dirty:we,ctx:ie}),Ee.$set(zn)},i(ie){He||(m(Se),m(Te),m(Me.$$.fragment,ie),m(Ee.$$.fragment,ie),He=!0)},o(ie){_(Se),_(Te),_(Me.$$.fragment,ie),_(Ee.$$.fragment,ie),He=!1},d(ie){ie&&h(e),Ne&&Ne.d(),Fe&&Fe.d(),Se&&Se.d(),Re&&Re.d(),Pe&&Pe.d(),De&&De.d(),Ge&&Ge.d(),Te&&Te.d(),v(Me),v(Ee),o[9](null)}}}function qm(o){let e=o[1],l,t,n=vr(o);return{c(){n.c(),l=de()},m(r,s){n.m(r,s),g(r,l,s),t=!0},p(r,[s]){s&2&&V(e,e=r[1])?(be(),_(n,1,1,J),ve(),n=vr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&h(l),n.d(r)}}}function ut(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function Hm(o,e,l){let t,n;Y(o,dn,k=>l(10,n=k));let{description:r}=e,{props:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,u;uo(()=>{u&&l(4,u.scrollTop=0,u)});function c(){let k={type:"FeatureCollection",features:f.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(Yr(k),{padding:20,animate:!1})}function $(){var I,O,N;let k={type:"FeatureCollection",features:f.features.filter(F=>F.properties.scheme_reference==t.scheme_reference),schemes:{}};k.schemes[t.scheme_reference]=t;let C=(I=t.browse)==null?void 0:I.authority_or_region;if(!C){window.alert("This scheme has no authority specified, you can't edit this");return}let T=t.pipeline?"pipeline":t.v2?"v2":"v1";if((O=t.browse)!=null&&O.local_filename)window.open(Xn(C,(N=t.browse)==null?void 0:N.local_filename,T),"_blank");else{let F=`browse_copy_${t.scheme_reference}`,M=qo(C,k);for(let j of M.features)delete j.properties.funding_programme,delete j.properties.current_milestone;Ho(zo(C,F),JSON.stringify(M)),window.open(Xn(C,F,T),"_blank")}}function d(k){z[k?"unshift":"push"](()=>{u=k,l(4,u)})}return o.$$set=k=>{"description"in k&&l(0,r=k.description),"props"in k&&l(1,s=k.props),"schemesGj"in k&&l(8,f=k.schemesGj),"filterSchemeText"in k&&l(2,i=k.filterSchemeText),"filterInterventionText"in k&&l(3,a=k.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=f.schemes[s.scheme_reference])},[r,s,i,a,u,t,c,$,f,d]}class qn extends Z{constructor(e){super(),X(this,e,Hm,qm,V,{description:0,props:1,schemesGj:8,filterSchemeText:2,filterInterventionText:3})}}function zm(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Bm(o){let e,l;return e=new qn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Um(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[zm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Bm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Em(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Wm(o){let e,l;return e=new qn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ym(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Em,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Wm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Jm(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Qm(o){let e,l;return e=new qn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Vm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Jm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Qm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Km(o){let e,l,t,n,r,s,f,i,a,u;const c=[q(`${o[0]}-interventions-points`),{filter:["all",jn,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":Vn,"circle-opacity":ee(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let $={$$slots:{default:[Um]},$$scope:{ctx:o}};for(let M=0;M<c.length;M+=1)$=x($,c[M]);e=new $t({props:$});const d=[q(`${o[0]}-interventions-lines`),{filter:["all",On,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":tn,"line-opacity":ee(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[Ym]},$$scope:{ctx:o}};for(let M=0;M<d.length;M+=1)k=x(k,d[M]);t=new ge({props:k});const C=[q(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*tn,"circle-opacity":0,"circle-stroke-color":rt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[2]?"visible":"none"}}];let T={};for(let M=0;M<C.length;M+=1)T=x(T,C[M]);r=new $t({props:T});const I=[q(`${o[0]}-interventions-polygons`),{filter:["all",un,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":ee(.2,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let O={$$slots:{default:[Vm]},$$scope:{ctx:o}};for(let M=0;M<I.length;M+=1)O=x(O,I[M]);f=new Ae({props:O});const N=[q(`${o[0]}-interventions-polygons-outlines`),{filter:["all",un,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*tn}},{layout:{visibility:o[2]?"visible":"none"}}];let F={};for(let M=0;M<N.length;M+=1)F=x(F,N[M]);return a=new ge({props:F}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(M,j){b(e,M,j),g(M,l,j),b(t,M,j),g(M,n,j),b(r,M,j),g(M,s,j),b(f,M,j),g(M,i,j),b(a,M,j),u=!0},p(M,j){const H=j&837?te(c,[j&1&&se(q(`${M[0]}-interventions-points`)),j&768&&{filter:["all",jn,M[8],M[9]]},c[2],c[3],j&64&&{paint:{"circle-color":M[6],"circle-radius":Vn,"circle-opacity":ee(1,.5)}},j&4&&{layout:{visibility:M[2]?"visible":"none"}},c[6]]):{};j&2106&&(H.$$scope={dirty:j,ctx:M}),e.$set(H);const P=j&325?te(d,[j&1&&se(q(`${M[0]}-interventions-lines`)),j&256&&{filter:["all",On,M[8]]},d[2],d[3],j&64&&{paint:{"line-color":M[6],"line-width":tn,"line-opacity":ee(1,.5)}},j&4&&{layout:{visibility:M[2]?"visible":"none"}},d[6]]):{};j&2106&&(P.$$scope={dirty:j,ctx:M}),t.$set(P);const R=j&5?te(C,[j&1&&se(q(`${M[0]}-interventions-lines-endpoints`)),C[1],C[2],j&4&&{layout:{visibility:M[2]?"visible":"none"}}]):{};r.$set(R);const W=j&325?te(I,[j&1&&se(q(`${M[0]}-interventions-polygons`)),j&256&&{filter:["all",un,M[8]]},I[2],I[3],j&64&&{paint:{"fill-color":M[6],"fill-opacity":ee(.2,.5)}},j&4&&{layout:{visibility:M[2]?"visible":"none"}},I[6]]):{};j&2106&&(W.$$scope={dirty:j,ctx:M}),f.$set(W);const ue=j&325?te(N,[j&1&&se(q(`${M[0]}-interventions-polygons-outlines`)),j&256&&{filter:["all",un,M[8]]},j&64&&{paint:{"line-color":M[6],"line-opacity":.5,"line-width":.7*tn}},j&4&&{layout:{visibility:M[2]?"visible":"none"}}]):{};a.$set(ue)},i(M){u||(m(e.$$.fragment,M),m(t.$$.fragment,M),m(r.$$.fragment,M),m(f.$$.fragment,M),m(a.$$.fragment,M),u=!0)},o(M){_(e.$$.fragment,M),_(t.$$.fragment,M),_(r.$$.fragment,M),_(f.$$.fragment,M),_(a.$$.fragment,M),u=!1},d(M){M&&(h(l),h(n),h(s),h(i)),v(e,M),v(t,M),v(r,M),v(f,M),v(a,M)}}}function Zm(o){let e,l;return e=new mt({props:{data:o[7],$$slots:{default:[Km]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Xm(o,e,l){let t,{name:n}=e,{description:r}=e,{show:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],$=["!=",["get","endpoint"],!0];return o.$$set=d=>{"name"in d&&l(0,n=d.name),"description"in d&&l(1,r=d.description),"show"in d&&l(2,s=d.show),"schemesGj"in d&&l(3,f=d.schemesGj),"filterSchemeText"in d&&l(4,i=d.filterSchemeText),"filterInterventionText"in d&&l(5,a=d.filterInterventionText),"color"in d&&l(6,u=d.color)},o.$$.update=()=>{o.$$.dirty&8&&l(7,t=vo(f))},[n,r,s,f,i,a,u,t,c,$]}class cn extends Z{constructor(e){super(),X(this,e,Xm,Zm,V,{name:0,description:1,show:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function xm(o){let e;function l(r,s){return r[2]<=100?n_:t_}let t=l(o),n=t(o);return{c(){n.c(),e=de()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:J,o:J,d(r){r&&h(e),n.d(r)}}}function e_(o){let e,l;return e=new Ye({props:{$$slots:{default:[l_]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function t_(o){let e;return{c(){e=y("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){g(l,e,t)},p:J,d(l){l&&h(e)}}}function n_(o){let e,l,t;return{c(){e=y("label"),l=S(`Downloading scheme data
      `),t=y("progress"),t.value=o[2],G(t,"class","svelte-q3473n")},m(n,r){g(n,e,r),p(e,l),p(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&h(e)}}}function l_(o){let e;return{c(){e=S("Load latest scheme data")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function r_(o){let e,l,t,n;const r=[e_,xm],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(l=s[e]=r[e](o)),{c(){l&&l.c(),t=de()},m(i,a){~e&&s[e].m(i,a),g(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(l&&(be(),_(s[u],1,1,()=>{s[u]=null}),ve()),~e?(l=s[e],l?l.p(i,a):(l=s[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){_(l),n=!1},d(i){i&&h(t),~e&&s[e].d(i)}}}function o_(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await co(`${en()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,s=c)});l(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}Er(async()=>{n&&await f()});async function i(){l(0,n=!0),await f();let a=new URL(window.location.href);a.searchParams.delete("disable_schemes"),Gn(a)}return o.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,s,i,t]}class s_ extends Z{constructor(e){super(),X(this,e,o_,r_,V,{loadFile:4})}}const pn=Ie({type:"FeatureCollection",features:[],schemes:{}}),kr=Ie(""),yr=Ie(""),Sn=Ie({type:"FeatureCollection",features:[],schemes:{}}),Sr=Ie(""),Tr=Ie(""),Tn=Ie({type:"FeatureCollection",features:[],schemes:{}}),Cr=Ie(""),Lr=Ie(""),Cn=Ie({type:"FeatureCollection",features:[],schemes:{}}),Ir=Ie(""),Or=Ie("");function jr(o,e,l){const t=o.slice();return t[55]=e[l],t}function Mr(o,e,l){const t=o.slice();return t[55]=e[l],t}function Nr(o,e,l){const t=o.slice();return t[55]=e[l],t}function Fr(o,e,l){const t=o.slice();return t[55]=e[l],t}function i_(o){let e,l;return e=new s_({props:{loadFile:o[32]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:J,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Rr(o){let e,l,t;function n(s){o[39](s)}let r={name:eo,title:to,$$slots:{controls:[f_],help:[a_]},$$scope:{ctx:o}};return o[16]!==void 0&&(r.show=o[16]),e=new fe({props:r}),z.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&918529|f[2]&4&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&65536&&(l=!0,i.show=s[16],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Pr(o){let e,l,t=o[55]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){g(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&131072&&t!==(t=r[55]+"")&&A(n,t)},d(r){r&&h(e)}}}function a_(o){let e,l,t,n,r,s,f;t=new wn({props:{text:"Scheme data caveats"}});let i=pe(o[17].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Pr(Fr(o,i,u));return{c(){e=y("span"),l=y("p"),w(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){g(u,e,c),p(e,l),b(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&131072){i=pe(u[17].notes??[]);let $;for($=0;$<i.length;$+=1){const d=Fr(u,i,$);a[$]?a[$].p(d,c):(a[$]=Pr(d),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),ze(a,u)}}}function f_(o){let e,l,t,n,r,s,f,i,a,u,c;function $(O){o[35](O)}function d(O){o[36](O)}function k(O){o[37](O)}let C={source:"ATF"};o[17]!==void 0&&(C.schemesGj=o[17]),o[18]!==void 0&&(C.filterSchemeText=o[18]),o[19]!==void 0&&(C.filterInterventionText=o[19]),l=new bn({props:C}),z.push(()=>B(l,"schemesGj",$)),z.push(()=>B(l,"filterSchemeText",d)),z.push(()=>B(l,"filterInterventionText",k));function T(O){o[38](O)}let I={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(I.value=o[0]),f=new Qt({props:I}),z.push(()=>B(f,"value",T)),u=new it({props:{rows:o[10]}}),{c(){e=y("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),G(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(O,N){g(O,e,N),b(l,e,null),p(e,s),b(f,e,null),p(e,a),b(u,e,null),c=!0},p(O,N){const F={};!t&&N[0]&131072&&(t=!0,F.schemesGj=O[17],U(()=>t=!1)),!n&&N[0]&262144&&(n=!0,F.filterSchemeText=O[18],U(()=>n=!1)),!r&&N[0]&524288&&(r=!0,F.filterInterventionText=O[19],U(()=>r=!1)),l.$set(F);const M={};!i&&N[0]&1&&(i=!0,M.value=O[0],U(()=>i=!1)),f.$set(M);const j={};N[0]&1024&&(j.rows=O[10]),u.$set(j)},i(O){c||(m(l.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),c=!0)},o(O){_(l.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),c=!1},d(O){O&&h(e),v(l),v(f),v(u)}}}function Dr(o){let e,l,t;function n(s){o[44](s)}let r={name:ro,title:oo,$$slots:{controls:[c_],help:[u_]},$$scope:{ctx:o}};return o[14]!==void 0&&(r.show=o[14]),e=new fe({props:r}),z.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&7340104|f[2]&4&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&16384&&(l=!0,i.show=s[14],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Gr(o){let e,l,t=o[55]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){g(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&1048576&&t!==(t=r[55]+"")&&A(n,t)},d(r){r&&h(e)}}}function u_(o){let e,l,t,n,r,s,f;t=new wn({props:{text:"Scheme data caveats"}});let i=pe(o[20].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Gr(Nr(o,i,u));return{c(){e=y("span"),l=y("p"),w(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){g(u,e,c),p(e,l),b(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&1048576){i=pe(u[20].notes??[]);let $;for($=0;$<i.length;$+=1){const d=Nr(u,i,$);a[$]?a[$].p(d,c):(a[$]=Gr(d),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),ze(a,u)}}}function c_(o){let e,l,t,n,r,s,f,i,a,u,c;function $(O){o[40](O)}function d(O){o[41](O)}function k(O){o[42](O)}let C={source:"LCWIP"};o[20]!==void 0&&(C.schemesGj=o[20]),o[21]!==void 0&&(C.filterSchemeText=o[21]),o[22]!==void 0&&(C.filterInterventionText=o[22]),l=new bn({props:C}),z.push(()=>B(l,"schemesGj",$)),z.push(()=>B(l,"filterSchemeText",d)),z.push(()=>B(l,"filterInterventionText",k));function T(O){o[43](O)}let I={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[3]!==void 0&&(I.value=o[3]),f=new Qt({props:I}),z.push(()=>B(f,"value",T)),u=new it({props:{rows:o[6]}}),{c(){e=y("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),G(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(O,N){g(O,e,N),b(l,e,null),p(e,s),b(f,e,null),p(e,a),b(u,e,null),c=!0},p(O,N){const F={};!t&&N[0]&1048576&&(t=!0,F.schemesGj=O[20],U(()=>t=!1)),!n&&N[0]&2097152&&(n=!0,F.filterSchemeText=O[21],U(()=>n=!1)),!r&&N[0]&4194304&&(r=!0,F.filterInterventionText=O[22],U(()=>r=!1)),l.$set(F);const M={};!i&&N[0]&8&&(i=!0,M.value=O[3],U(()=>i=!1)),f.$set(M);const j={};N[0]&64&&(j.rows=O[6]),u.$set(j)},i(O){c||(m(l.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),c=!0)},o(O){_(l.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),c=!1},d(O){O&&h(e),v(l),v(f),v(u)}}}function Ar(o){let e,l,t;function n(s){o[49](s)}let r={name:no,title:lo,$$slots:{controls:[p_],help:[$_]},$$scope:{ctx:o}};return o[15]!==void 0&&(r.show=o[15]),e=new fe({props:r}),z.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&58720514|f[2]&4&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&32768&&(l=!0,i.show=s[15],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function qr(o){let e,l,t=o[55]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){g(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&8388608&&t!==(t=r[55]+"")&&A(n,t)},d(r){r&&h(e)}}}function $_(o){let e,l,t,n,r,s,f;t=new wn({props:{text:"Scheme data caveats"}});let i=pe(o[23].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=qr(Mr(o,i,u));return{c(){e=y("span"),l=y("p"),w(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){g(u,e,c),p(e,l),b(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&8388608){i=pe(u[23].notes??[]);let $;for($=0;$<i.length;$+=1){const d=Mr(u,i,$);a[$]?a[$].p(d,c):(a[$]=qr(d),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),ze(a,u)}}}function p_(o){let e,l,t,n,r,s,f,i,a,u,c;function $(O){o[45](O)}function d(O){o[46](O)}function k(O){o[47](O)}let C={source:"LCWIP"};o[23]!==void 0&&(C.schemesGj=o[23]),o[24]!==void 0&&(C.filterSchemeText=o[24]),o[25]!==void 0&&(C.filterInterventionText=o[25]),l=new bn({props:C}),z.push(()=>B(l,"schemesGj",$)),z.push(()=>B(l,"filterSchemeText",d)),z.push(()=>B(l,"filterInterventionText",k));function T(O){o[48](O)}let I={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(I.value=o[1]),f=new Qt({props:I}),z.push(()=>B(f,"value",T)),u=new it({props:{rows:o[8]}}),{c(){e=y("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),G(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(O,N){g(O,e,N),b(l,e,null),p(e,s),b(f,e,null),p(e,a),b(u,e,null),c=!0},p(O,N){const F={};!t&&N[0]&8388608&&(t=!0,F.schemesGj=O[23],U(()=>t=!1)),!n&&N[0]&16777216&&(n=!0,F.filterSchemeText=O[24],U(()=>n=!1)),!r&&N[0]&33554432&&(r=!0,F.filterInterventionText=O[25],U(()=>r=!1)),l.$set(F);const M={};!i&&N[0]&2&&(i=!0,M.value=O[1],U(()=>i=!1)),f.$set(M);const j={};N[0]&256&&(j.rows=O[8]),u.$set(j)},i(O){c||(m(l.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),c=!0)},o(O){_(l.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),c=!1},d(O){O&&h(e),v(l),v(f),v(u)}}}function m_(o){let e=Object.entries(o[17].schemes).length>0,l,t=Object.entries(o[20].schemes).length>0,n,r=Object.entries(o[23].schemes).length>0,s,f,i=e&&Rr(o),a=t&&Dr(o),u=r&&Ar(o);return{c(){i&&i.c(),l=L(),a&&a.c(),n=L(),u&&u.c(),s=de()},m(c,$){i&&i.m(c,$),g(c,l,$),a&&a.m(c,$),g(c,n,$),u&&u.m(c,$),g(c,s,$),f=!0},p(c,$){$[0]&131072&&(e=Object.entries(c[17].schemes).length>0),e?i?(i.p(c,$),$[0]&131072&&m(i,1)):(i=Rr(c),i.c(),m(i,1),i.m(l.parentNode,l)):i&&(be(),_(i,1,1,()=>{i=null}),ve()),$[0]&1048576&&(t=Object.entries(c[20].schemes).length>0),t?a?(a.p(c,$),$[0]&1048576&&m(a,1)):(a=Dr(c),a.c(),m(a,1),a.m(n.parentNode,n)):a&&(be(),_(a,1,1,()=>{a=null}),ve()),$[0]&8388608&&(r=Object.entries(c[23].schemes).length>0),r?u?(u.p(c,$),$[0]&8388608&&m(u,1)):(u=Ar(c),u.c(),m(u,1),u.m(s.parentNode,s)):u&&(be(),_(u,1,1,()=>{u=null}),ve())},i(c){f||(m(i),m(a),m(u),f=!0)},o(c){_(i),_(a),_(u),f=!1},d(c){c&&(h(l),h(n),h(s)),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function __(o){let e;return{c(){e=S("Show your sketches")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function Hr(o){let e,l,t;function n(s){o[53](s)}let r={name:so,title:io,$$slots:{controls:[w_],help:[g_]},$$scope:{ctx:o}};return o[13]!==void 0&&(r.show=o[13]),e=new fe({props:r}),z.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&201330704|f[2]&4&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&8192&&(l=!0,i.show=s[13],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function zr(o){let e,l,t=o[55]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){g(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&4096&&t!==(t=r[55]+"")&&A(n,t)},d(r){r&&h(e)}}}function g_(o){let e,l,t,n,r,s,f;t=new wn({props:{text:"Scheme data caveats"}});let i=pe(o[12].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=zr(jr(o,i,u));return{c(){e=y("span"),l=y("p"),w(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){g(u,e,c),p(e,l),b(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&4096){i=pe(u[12].notes??[]);let $;for($=0;$<i.length;$+=1){const d=jr(u,i,$);a[$]?a[$].p(d,c):(a[$]=zr(d),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),ze(a,u)}}}function h_(o){let e;return{c(){e=S("Download all schemes")},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function d_(o){let e,l,t,n,r,s,f;function i($){o[50]($)}function a($){o[51]($)}function u($){o[52]($)}let c={source:"Local"};return o[12]!==void 0&&(c.schemesGj=o[12]),o[26]!==void 0&&(c.filterSchemeText=o[26]),o[27]!==void 0&&(c.filterInterventionText=o[27]),e=new bn({props:c}),z.push(()=>B(e,"schemesGj",i)),z.push(()=>B(e,"filterSchemeText",a)),z.push(()=>B(e,"filterInterventionText",u)),s=new Ye({props:{$$slots:{default:[h_]},$$scope:{ctx:o}}}),s.$on("click",o[34]),{c(){w(e.$$.fragment),r=L(),w(s.$$.fragment)},m($,d){b(e,$,d),g($,r,d),b(s,$,d),f=!0},p($,d){const k={};!l&&d[0]&4096&&(l=!0,k.schemesGj=$[12],U(()=>l=!1)),!t&&d[0]&67108864&&(t=!0,k.filterSchemeText=$[26],U(()=>t=!1)),!n&&d[0]&134217728&&(n=!0,k.filterInterventionText=$[27],U(()=>n=!1)),e.$set(k);const C={};d[2]&4&&(C.$$scope={dirty:d,ctx:$}),s.$set(C)},i($){f||(m(e.$$.fragment,$),m(s.$$.fragment,$),f=!0)},o($){_(e.$$.fragment,$),_(s.$$.fragment,$),f=!1},d($){$&&h(r),v(e,$),v(s,$)}}}function w_(o){let e,l,t,n,r;return l=new Go({props:{$$slots:{default:[d_]},$$scope:{ctx:o}}}),n=new it({props:{rows:o[4]}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),G(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(s,f){g(s,e,f),b(l,e,null),p(e,t),b(n,e,null),r=!0},p(s,f){const i={};f[0]&201330688|f[2]&4&&(i.$$scope={dirty:f,ctx:s}),l.$set(i);const a={};f[0]&16&&(a.rows=s[4]),n.$set(a)},i(s){r||(m(l.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(l),v(n)}}}function b_(o){let e=Object.entries(o[12].schemes).length>0,l,t,n=e&&Hr(o);return{c(){n&&n.c(),l=de()},m(r,s){n&&n.m(r,s),g(r,l,s),t=!0},p(r,s){s[0]&4096&&(e=Object.entries(r[12].schemes).length>0),e?n?(n.p(r,s),s[0]&4096&&m(n,1)):(n=Hr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n&&(be(),_(n,1,1,()=>{n=null}),ve())},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&h(l),n&&n.d(r)}}}function v_(o){let e=Wr()=="Private (development)",l,t,n,r,s,f,i,a,u,c,$,d,k,C=e&&i_(o);return t=new Be({props:{small:!0,$$slots:{default:[m_]},$$scope:{ctx:o}}}),r=new Qr({props:{label:"Load schemes from GeoJSON",onLoad:o[32]}}),f=new Do({props:{errorMessage:o[2]}}),c=new Ye({props:{$$slots:{default:[__]},$$scope:{ctx:o}}}),c.$on("click",o[33]),d=new Be({props:{small:!0,$$slots:{default:[b_]},$$scope:{ctx:o}}}),{c(){C&&C.c(),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),a=y("hr"),u=L(),w(c.$$.fragment),$=L(),w(d.$$.fragment)},m(T,I){C&&C.m(T,I),g(T,l,I),b(t,T,I),g(T,n,I),b(r,T,I),g(T,s,I),b(f,T,I),g(T,i,I),g(T,a,I),g(T,u,I),b(c,T,I),g(T,$,I),b(d,T,I),k=!0},p(T,I){e&&C.p(T,I);const O={};I[0]&67093835|I[2]&4&&(O.$$scope={dirty:I,ctx:T}),t.$set(O);const N={};I[0]&4&&(N.errorMessage=T[2]),f.$set(N);const F={};I[2]&4&&(F.$$scope={dirty:I,ctx:T}),c.$set(F);const M={};I[0]&201338896|I[2]&4&&(M.$$scope={dirty:I,ctx:T}),d.$set(M)},i(T){k||(m(C),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(c.$$.fragment,T),m(d.$$.fragment,T),k=!0)},o(T){_(C),_(t.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),_(c.$$.fragment,T),_(d.$$.fragment,T),k=!1},d(T){T&&(h(l),h(n),h(s),h(i),h(a),h(u),h($)),C&&C.d(T),v(t,T),v(r,T),v(f,T),v(c,T),v(d,T)}}}function k_(o){let e,l,t,n,r,s,f,i,a,u;return e=new ot({props:{label:"Schemes",open:!0,$$slots:{default:[v_]},$$scope:{ctx:o}}}),t=new cn({props:{name:"atf",description:to,show:o[16],schemesGj:o[17],filterSchemeText:o[18],filterInterventionText:o[19],color:o[11]}}),r=new cn({props:{name:"finalInspections",description:oo,show:o[14],schemesGj:o[20],filterSchemeText:o[21],filterInterventionText:o[22],color:o[7]}}),f=new cn({props:{name:"lcwip",description:lo,show:o[15],schemesGj:o[23],filterSchemeText:o[24],filterInterventionText:o[25],color:o[9]}}),a=new cn({props:{name:"local",description:io,show:o[13],schemesGj:o[12],filterSchemeText:o[26],filterInterventionText:o[27],color:o[5]}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,$){b(e,c,$),g(c,l,$),b(t,c,$),g(c,n,$),b(r,c,$),g(c,s,$),b(f,c,$),g(c,i,$),b(a,c,$),u=!0},p(c,$){const d={};$[0]&268432735|$[2]&4&&(d.$$scope={dirty:$,ctx:c}),e.$set(d);const k={};$[0]&65536&&(k.show=c[16]),$[0]&131072&&(k.schemesGj=c[17]),$[0]&262144&&(k.filterSchemeText=c[18]),$[0]&524288&&(k.filterInterventionText=c[19]),$[0]&2048&&(k.color=c[11]),t.$set(k);const C={};$[0]&16384&&(C.show=c[14]),$[0]&1048576&&(C.schemesGj=c[20]),$[0]&2097152&&(C.filterSchemeText=c[21]),$[0]&4194304&&(C.filterInterventionText=c[22]),$[0]&128&&(C.color=c[7]),r.$set(C);const T={};$[0]&32768&&(T.show=c[15]),$[0]&8388608&&(T.schemesGj=c[23]),$[0]&16777216&&(T.filterSchemeText=c[24]),$[0]&33554432&&(T.filterInterventionText=c[25]),$[0]&512&&(T.color=c[9]),f.$set(T);const I={};$[0]&8192&&(I.show=c[13]),$[0]&4096&&(I.schemesGj=c[12]),$[0]&67108864&&(I.filterSchemeText=c[26]),$[0]&134217728&&(I.filterInterventionText=c[27]),$[0]&32&&(I.color=c[5]),a.$set(I)},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(s),h(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}let eo="atf_schemes",to="ATF schemes",no="lcwip_schemes",lo="LCWIP schemes",ro="final_inspections_schemes",oo="Final inspection schemes",so="local_schemes",io="Your schemes";function y_(o,e,l){let t,n,r,s,f,i,a,u,c,$,d,k,C,T,I,O,N,F,M,j,H,P,R,W;Y(o,Cn,E=>l(12,c=E)),Y(o,pn,E=>l(17,T=E)),Y(o,yr,E=>l(18,I=E)),Y(o,kr,E=>l(19,O=E)),Y(o,Sn,E=>l(20,N=E)),Y(o,Tr,E=>l(21,F=E)),Y(o,Sr,E=>l(22,M=E)),Y(o,Tn,E=>l(23,j=E)),Y(o,Lr,E=>l(24,H=E)),Y(o,Cr,E=>l(25,P=E)),Y(o,Or,E=>l(26,R=E)),Y(o,Ir,E=>l(27,W=E));let ue="",D=$e(eo);Y(o,D,E=>l(16,C=E));let K="fundingProgramme",Q=$e(no);Y(o,Q,E=>l(15,k=E));let ce="interventionType",ye=$e(ro);Y(o,ye,E=>l(14,d=E));let le="interventionType",Ce=$e(so);Y(o,Ce,E=>l(13,$=E));function nt(E,an){try{am(JSON.parse(an),pn,Tn,Sn),bt(D,C=!0,C),bt(Q,k=!0,k),bt(ye,d=!0,d),l(2,ue="")}catch(fn){l(2,ue=`The file you loaded is broken: ${fn}`)}}function _t(){bt(Cn,c=um(),c),bt(Ce,$=!0,$)}function lt(E){return E=="interventionType"?[sm(),im()]:E=="fundingProgramme"?[je(["get","funding_programme"],xt,"grey"),Object.entries(xt)]:E=="currentMilestone"?[je(["get","current_milestone"],Fn,"grey"),Object.entries(Fn)]:["red",[]]}function at(){Bo("all_your_schemes.geojson",JSON.stringify(c,null,"  "))}function Je(E){T=E,pn.set(T)}function ft(E){I=E,yr.set(I)}function gt(E){O=E,kr.set(O)}function ht(E){K=E,l(0,K)}function he(E){C=E,D.set(C)}function qe(E){N=E,Sn.set(N)}function Me(E){F=E,Tr.set(F)}function dt(E){M=E,Sr.set(M)}function Ee(E){le=E,l(3,le)}function He(E){d=E,ye.set(d)}function Ne(E){j=E,Tn.set(j)}function Fe(E){H=E,Lr.set(H)}function Se(E){P=E,Cr.set(P)}function Re(E){ce=E,l(1,ce)}function Pe(E){k=E,Q.set(k)}function De(E){c=E,Cn.set(c)}function Ge(E){R=E,Or.set(R)}function Te(E){W=E,Ir.set(W)}function sn(E){$=E,Ce.set($)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(11,[t,n]=lt(K),t,(l(10,n),l(0,K))),o.$$.dirty[0]&2&&l(9,[r,s]=lt(ce),r,(l(8,s),l(1,ce)))},l(7,[f,i]=lt("interventionType"),f,l(6,i)),l(5,[a,u]=lt("interventionType"),a,l(4,u)),[K,ce,ue,le,u,a,i,f,s,r,n,t,c,$,d,k,C,T,I,O,N,F,M,j,H,P,R,W,D,Q,ye,Ce,nt,_t,at,Je,ft,gt,ht,he,qe,Me,dt,Ee,He,Ne,Fe,Se,Re,Pe,De,Ge,Te,sn]}class S_ extends Z{constructor(e){super(),X(this,e,y_,k_,V,{},null,[-1,-1,-1])}}function T_(o){let e,l,t,n,r,s,f,i;return e=new O$({}),t=new q$({}),r=new hp({}),f=new sp({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),g(a,n,u),b(r,a,u),g(a,s,u),b(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function C_(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[T_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function L_(o){let e,l,t,n,r,s,f,i,a,u,c,$,d,k,C,T;return e=new bf({}),t=new Mf({}),r=new iu({}),f=new Zf({}),a=new Ic({}),c=new _$({}),d=new r$({}),C=new Vu({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment),u=L(),w(c.$$.fragment),$=L(),w(d.$$.fragment),k=L(),w(C.$$.fragment)},m(I,O){b(e,I,O),g(I,l,O),b(t,I,O),g(I,n,O),b(r,I,O),g(I,s,O),b(f,I,O),g(I,i,O),b(a,I,O),g(I,u,O),b(c,I,O),g(I,$,O),b(d,I,O),g(I,k,O),b(C,I,O),T=!0},i(I){T||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(r.$$.fragment,I),m(f.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(d.$$.fragment,I),m(C.$$.fragment,I),T=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(r.$$.fragment,I),_(f.$$.fragment,I),_(a.$$.fragment,I),_(c.$$.fragment,I),_(d.$$.fragment,I),_(C.$$.fragment,I),T=!1},d(I){I&&(h(l),h(n),h(s),h(i),h(u),h($),h(k)),v(e,I),v(t,I),v(r,I),v(f,I),v(a,I),v(c,I),v(d,I),v(C,I)}}}function I_(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[L_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function O_(o){let e,l,t,n,r,s;return e=new of({}),t=new Dc({}),r=new Yc({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){b(e,f,i),g(f,l,i),b(t,f,i),g(f,n,i),b(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}function j_(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[O_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function M_(o){let e,l,t,n,r,s,f,i,a,u;return e=new ma({}),t=new Wa({}),r=new mi({}),f=new Di({}),a=new Ki({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,$){b(e,c,$),g(c,l,$),b(t,c,$),g(c,n,$),b(r,c,$),g(c,s,$),b(f,c,$),g(c,i,$),b(a,c,$),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(s),h(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function N_(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[M_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function F_(o){let e,l,t,n,r,s;return e=new li({}),t=new Ti({}),r=new Ra({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){b(e,f,i),g(f,l,i),b(t,f,i),g(f,n,i),b(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}function R_(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[F_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function P_(o){let e,l,t,n,r,s,f,i,a,u;return e=new la({}),t=new dc({}),r=new bu({}),f=new ac({}),a=new V$({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,$){b(e,c,$),g(c,l,$),b(t,c,$),g(c,n,$),b(r,c,$),g(c,s,$),b(f,c,$),g(c,i,$),b(a,c,$),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(s),h(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function D_(o){let e,l,t,n,r,s,f,i,a=Wr()=="Private (development)",u,c,$,d,k;e=new om({}),t=new Pp({}),r=new Du({}),f=new zf({});let C=a&&P_();return c=new Sa({}),d=new Jp({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),C&&C.c(),u=L(),w(c.$$.fragment),$=L(),w(d.$$.fragment)},m(T,I){b(e,T,I),g(T,l,I),b(t,T,I),g(T,n,I),b(r,T,I),g(T,s,I),b(f,T,I),g(T,i,I),C&&C.m(T,I),g(T,u,I),b(c,T,I),g(T,$,I),b(d,T,I),k=!0},p:J,i(T){k||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(C),m(c.$$.fragment,T),m(d.$$.fragment,T),k=!0)},o(T){_(e.$$.fragment,T),_(t.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),_(C),_(c.$$.fragment,T),_(d.$$.fragment,T),k=!1},d(T){T&&(h(l),h(n),h(s),h(i),h(u),h($)),v(e,T),v(t,T),v(r,T),v(f,T),C&&C.d(T),v(c,T),v(d,T)}}}function G_(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[D_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function A_(o){let e,l,t,n,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new yo({props:f}),z.push(()=>B(e,"enabled",s)),n=new ps({}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],U(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}function q_(o){let e,l;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new Ae({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&2?te(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function H_(o){let e,l,t,n,r,s,f,i,a,u,c,$,d,k,C,T,I,O,N,F,M;return l=new S_({}),n=new ot({props:{label:"Trip generators",$$slots:{default:[C_]},$$scope:{ctx:o}}}),s=new ot({props:{label:"Existing infrastructure",$$slots:{default:[I_]},$$scope:{ctx:o}}}),i=new ot({props:{label:"Public transport",$$slots:{default:[j_]},$$scope:{ctx:o}}}),u=new ot({props:{label:"Boundaries",$$slots:{default:[N_]},$$scope:{ctx:o}}}),$=new ot({props:{label:"Census",$$slots:{default:[R_]},$$scope:{ctx:o}}}),k=new ot({props:{label:"Other",$$slots:{default:[G_]},$$scope:{ctx:o}}}),T=new ot({props:{label:"Tools",$$slots:{default:[A_]},$$scope:{ctx:o}}}),O=new ko({props:{disabled:!o[1]}}),F=new mt({props:{data:o[4],$$slots:{default:[q_]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment),f=L(),w(i.$$.fragment),a=L(),w(u.$$.fragment),c=L(),w($.$$.fragment),d=L(),w(k.$$.fragment),C=L(),w(T.$$.fragment),I=L(),w(O.$$.fragment),N=L(),w(F.$$.fragment)},m(j,H){g(j,e,H),b(l,e,null),p(e,t),b(n,e,null),p(e,r),b(s,e,null),p(e,f),b(i,e,null),p(e,a),b(u,e,null),p(e,c),b($,e,null),p(e,d),b(k,e,null),p(e,C),b(T,e,null),p(e,I),b(O,e,null),o[7](e),g(j,N,H),b(F,j,H),M=!0},p(j,[H]){const P={};H&512&&(P.$$scope={dirty:H,ctx:j}),n.$set(P);const R={};H&512&&(R.$$scope={dirty:H,ctx:j}),s.$set(R);const W={};H&512&&(W.$$scope={dirty:H,ctx:j}),i.$set(W);const ue={};H&512&&(ue.$$scope={dirty:H,ctx:j}),u.$set(ue);const D={};H&512&&(D.$$scope={dirty:H,ctx:j}),$.$set(D);const K={};H&512&&(K.$$scope={dirty:H,ctx:j}),k.$set(K);const Q={};H&521&&(Q.$$scope={dirty:H,ctx:j}),T.$set(Q);const ce={};H&2&&(ce.disabled=!j[1]),O.$set(ce);const ye={};H&514&&(ye.$$scope={dirty:H,ctx:j}),F.$set(ye)},i(j){M||(m(l.$$.fragment,j),m(n.$$.fragment,j),m(s.$$.fragment,j),m(i.$$.fragment,j),m(u.$$.fragment,j),m($.$$.fragment,j),m(k.$$.fragment,j),m(T.$$.fragment,j),m(O.$$.fragment,j),m(F.$$.fragment,j),M=!0)},o(j){_(l.$$.fragment,j),_(n.$$.fragment,j),_(s.$$.fragment,j),_(i.$$.fragment,j),_(u.$$.fragment,j),_($.$$.fragment,j),_(k.$$.fragment,j),_(T.$$.fragment,j),_(O.$$.fragment,j),_(F.$$.fragment,j),M=!1},d(j){j&&(h(e),h(N)),v(l),v(n),v(s),v(i),v(u),v($),v(k),v(T),v(O),o[7](null),v(F,j)}}}const z_="browsepage-querystring";function B_(o,e,l){let t,n,r,s;Y(o,gl,$=>l(1,n=$)),Y(o,Nn,$=>l(2,r=$)),Y(o,dn,$=>l(3,s=$));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:$=>ho($,$o(In))};const a=new URLSearchParams(window.location.search);if(!a||a.size===1&&a.keys().next().value=="style"){let $=new URL(window.location.href);const d=window.localStorage.getItem(z_)||"",k=new URLSearchParams(d);for(const[C,T]of k)T==null?$.searchParams.delete(C):$.searchParams.set(C,T);window.history.replaceState(null,"",$.toString())}function u($){t=$,l(0,t),l(1,n)}function c($){z[$?"unshift":"push"](()=>{r=$,Nn.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&gl.set(!t)},[t,n,r,s,f,i,u,c]}class U_ extends Z{constructor(e){super(),X(this,e,B_,H_,V,{})}}function E_(o){let e,l,t;return{c(){e=y("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=y("div")},m(n,r){g(n,e,r),g(n,l,r),g(n,t,r),o[3](t)},p:J,i:J,o:J,d(n){n&&(h(e),h(l),h(t)),o[3](null)}}}function W_(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function Y_(o,e,l){let t,n;Y(o,Mn,f=>l(1,t=f)),Y(o,nn,f=>l(2,n=f));let r=null;function s(f){z[f?"unshift":"push"](()=>{r=f,l(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&W_(r,n,t)},[r,t,n,s]}class J_ extends Z{constructor(e){super(),X(this,e,Y_,E_,V,{})}}function Q_(o){let e,l,t,n,r,s,f,i,a,u,c,$,d,k,C;return l=new Ao({}),n=new po({}),f=new Ro({}),$=new ds({props:{boundaryGeojson:o[3]}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),s=y("div"),w(f.$$.fragment),i=L(),a=y("div"),u=y("h1"),u.textContent="Scheme Browser",c=L(),w($.$$.fragment),d=L(),k=y("div"),oe(s,"border-bottom","1px solid #b1b4b6"),oe(a,"display","flex"),oe(a,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(T,I){g(T,e,I),b(l,e,null),p(e,t),b(n,e,null),p(e,r),p(e,s),b(f,s,null),p(e,i),p(e,a),p(a,u),p(a,c),b($,a,null),p(e,d),p(e,k),o[6](k),C=!0},p(T,I){const O={};I&8&&(O.boundaryGeojson=T[3]),$.$set(O)},i(T){C||(m(l.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),m($.$$.fragment,T),C=!0)},o(T){_(l.$$.fragment,T),_(n.$$.fragment,T),_(f.$$.fragment,T),_($.$$.fragment,T),C=!1},d(T){T&&h(e),v(l),v(n),v(f),v($),o[6](null)}}}function Br(o){let e,l;return e=new U_({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function V_(o){let e,l,t,n;e=new So({});let r=o[2]&&Br();return{c(){w(e.$$.fragment),l=L(),r&&r.c(),t=de()},m(s,f){b(e,s,f),g(s,l,f),r&&r.m(s,f),g(s,t,f),n=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=Br(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(be(),_(r,1,1,()=>{r=null}),ve())},i(s){n||(m(e.$$.fragment,s),m(r),n=!0)},o(s){_(e.$$.fragment,s),_(r),n=!1},d(s){s&&(h(l),h(t)),v(e,s),r&&r.d(s)}}}function K_(o){let e,l,t;return l=new Po({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[V_]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","main")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&2&&(s.style=n[1]),r&260&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Z_(o){let e,l,t,n,r;return e=new Ko({props:{$$slots:{main:[K_],sidebar:[Q_]},$$scope:{ctx:o}}}),n=new J_({}),{c(){w(e.$$.fragment),l=L(),t=y("div"),w(n.$$.fragment),G(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){b(e,s,f),g(s,l,f),g(s,t,f),b(n,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(e.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&(h(l),h(t)),v(e,s),v(n)}}}function X_(o,e,l){let t,n,r,s,f;Y(o,Nn,c=>l(4,t=c)),Y(o,dn,c=>l(5,n=c)),Y(o,In,c=>l(1,r=c)),Y(o,Kn,c=>l(2,s=c)),Y(o,pn,c=>l(3,f=c)),Er(()=>{mo()});const i=new URLSearchParams(window.location.search);In.set(i.get("style")||"dataviz");let a;function u(c){z[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&Kn.set(n),o.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,n,u]}class x_ extends Z{constructor(e){super(),X(this,e,X_,Z_,V,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new x_({target:document.getElementById("app")});
