import{S as K,i as X,s as Q,e as S,d as G,b as re,f as d,q as Z,j as h,G as ct,a as L,ao as Gn,g as $,a3 as $t,H as pt,I as mt,J as _t,t as m,h as _,A as de,v as he,y as ze,c as w,l as T,m as v,z as A,k,D as ge,x as Y,E as wn,F as ut,r as E,u as B,w as U,a5 as Wt,ap as An,aq as Br,P as te,ak as an,ag as Zt,N as Ie,Q as ne,R as oe,ac as Kt,a2 as et,a4 as Tr,ar as Ht,o as Cr,as as Ur,an as Wr,aj as mn,n as Yr}from"./stores-68433813.js";import{e as me,z as _n,S as He,G as ce,R as vn,H as xt,I as Jr,M as Vr,o as gn,j as qn,f as Qr,s as Zr,h as Kr,J as Lr,F as Xr,E as xr}from"./files-076b1cf1.js";import{c as z,d as tt,t as eo,a as qe,C as Re,e as be,S as Et,p as zn,f as Hn,h as Vt,g as to,m as En}from"./colors-71ab8a99.js";import{e as Bn,h as lt,M as no,b as Ir,H as lo,R as ro,f as Ze,C as Bt,d as oo,c as Un,a as Wn,i as tn,W as kn,B as so,S as io,G as ao}from"./WarningIcon-2398fdb6.js";import{g as yn,u as Mr,r as Or,b as jr,c as Nr,e as fo,G as Ut,a as _e,d as uo,E as le,h as ee,F as Ge,f as co,i as $o,j as po,A as mo,L as _o,M as go}from"./MapLibreMap-3798d71a.js";import{P as ie,A as Pr}from"./Popup-1d228fa9.js";import{D as ho}from"./DefaultButton-28b23de9.js";import{H as bo}from"./Header-d4944c9b.js";function wo(o){let e;return{c(){e=S("span"),G(e,"class","svelte-kzgqtg"),re(e,"background",o[0])},m(l,t){d(l,e,t)},p(l,[t]){t&1&&re(e,"background",l[0])},i:Z,o:Z,d(l){l&&h(e)}}}function vo(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Se extends K{constructor(e){super(),X(this,e,vo,wo,Q,{color:0})}}const ko=o=>({}),Yn=o=>({}),yo=o=>({}),Jn=o=>({});function So(o){let e,l,t,n,r,s,f,i,a,u,c;const p=o[4].sidebar,g=ct(p,o,o[3],Jn),b=o[4].main,C=ct(b,o,o[3],Yn);return{c(){e=S("div"),l=S("aside"),t=S("div"),g&&g.c(),n=L(),r=S("button"),r.textContent="→",f=L(),i=S("main"),C&&C.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(r,"type","button"),G(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(l,"class",s=Gn(o[1]?"":"collapsed")+" svelte-1n0etgd"),re(l,"--sidebarWidth",o[0]),G(i,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(y,M){d(y,e,M),$(e,l),$(l,t),g&&g.m(t,null),$(l,n),$(l,r),$(e,f),$(e,i),C&&C.m(i,null),a=!0,u||(c=$t(r,"click",o[2]),u=!0)},p(y,[M]){g&&g.p&&(!a||M&8)&&pt(g,p,y,y[3],a?_t(p,y[3],M,yo):mt(y[3]),Jn),(!a||M&2&&s!==(s=Gn(y[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(l,"class",s),(!a||M&1)&&re(l,"--sidebarWidth",y[0]),C&&C.p&&(!a||M&8)&&pt(C,b,y,y[3],a?_t(b,y[3],M,ko):mt(y[3]),Yn)},i(y){a||(m(g,y),m(C,y),a=!0)},o(y){_(g,y),_(C,y),a=!1},d(y){y&&h(e),g&&g.d(y),C&&C.d(y),u=!1,c()}}}function To(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){l(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,s,f,n,t]}class Co extends K{constructor(e){super(),X(this,e,To,So,Q,{sidebarWidth:0})}}function Vn(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Qn(o){let e,l,t,n=o[1]+"",r,s,f;return l=new Se({props:{color:o[2]}}),{c(){e=S("li"),w(l.$$.fragment),t=L(),r=T(n),s=L()},m(i,a){d(i,e,a),v(l,e,null),$(e,t),$(e,r),$(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&A(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){_(l.$$.fragment,i),f=!1},d(i){i&&h(e),k(l)}}}function Lo(o){let e,l,t=me(o[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Qn(Vn(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){e=S("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,f){d(s,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[f]){if(f&1){t=me(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Vn(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Qn(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(de(),i=t.length;i<n.length;i+=1)r(i);he()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&h(e),ze(n,s)}}}function Io(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Jt extends K{constructor(e){super(),X(this,e,Io,Lo,Q,{rows:0})}}function Zn(o){let e=o[0],l,t,n=Kn(o);return{c(){n.c(),l=ge()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&Q(e,e=r[0])?(de(),_(n,1,1,Z),he(),n=Kn(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&h(l),n.d(r)}}}function Kn(o){let e;const l=o[16].default,t=ct(l,o,o[15],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&32768)&&pt(t,l,n,n[15],e?_t(l,n[15],r,null):mt(n[15]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Mo(o){let e,l,t=o[0]&&Zn(o);return{c(){t&&t.c(),e=ge()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=Zn(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(de(),_(t,1,1,()=>{t=null}),he())},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Oo(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=yn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:p=null}=e,{minzoom:g=null}=e,{maxzoom:b=null}=e,{volatile:C=null}=e;const{map:y,self:M}=Mr();Y(o,y,N=>l(14,n=N)),Y(o,M,N=>l(0,t=N));let j,P=!0;return wn(()=>{t&&j&&n&&(Or(y,t,j),ut(M,t=null,t),l(12,j=void 0))}),o.$$set=N=>{"id"in N&&l(3,f=N.id),"tiles"in N&&l(4,i=N.tiles),"tileSize"in N&&l(5,a=N.tileSize),"bounds"in N&&l(6,u=N.bounds),"scheme"in N&&l(7,c=N.scheme),"attribution"in N&&l(8,p=N.attribution),"minzoom"in N&&l(9,g=N.minzoom),"maxzoom"in N&&l(10,b=N.maxzoom),"volatile"in N&&l(11,C=N.volatile),"$$scope"in N&&l(15,s=N.$$scope)},o.$$.update=()=>{o.$$.dirty&24569&&n&&t!==f&&(ut(M,t=f,t),jr(n,t,Nr({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:p,minzoom:g,maxzoom:b,volatile:C}),N=>n&&N===t,()=>{t&&(l(12,j=n==null?void 0:n.getSource(t)),l(13,P=!0))})),o.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,j=n==null?void 0:n.getSource(f))})),o.$$.dirty&12304&&j&&(P?l(13,P=!1):j.setTiles(i))},[t,y,M,f,i,a,u,c,p,g,b,C,j,P,n,s,r]}class jo extends K{constructor(e){super(),X(this,e,Oo,Mo,Q,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function No(o){let e;const l=o[16].default,t=ct(l,o,o[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&pt(t,l,n,n[24],e?_t(l,n[24],r,null):mt(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Po(o){let e,l,t;function n(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[No]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new fo({props:r}),E.push(()=>B(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!l&&f&1&&(l=!0,i.hovered=s[0],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function Ro(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=yn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:b=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:y=void 0}=e,{manageHoverState:M=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:N=!0}=e;function O(F){j=F,l(0,j)}function I(F){Wt.call(this,o,F)}function R(F){Wt.call(this,o,F)}function D(F){Wt.call(this,o,F)}function q(F){Wt.call(this,o,F)}function J(F){Wt.call(this,o,F)}function fe(F){Wt.call(this,o,F)}return o.$$set=F=>{"id"in F&&l(1,r=F.id),"source"in F&&l(2,s=F.source),"sourceLayer"in F&&l(3,f=F.sourceLayer),"beforeId"in F&&l(4,i=F.beforeId),"beforeLayerType"in F&&l(5,a=F.beforeLayerType),"paint"in F&&l(6,u=F.paint),"layout"in F&&l(7,c=F.layout),"filter"in F&&l(8,p=F.filter),"applyToClusters"in F&&l(9,g=F.applyToClusters),"minzoom"in F&&l(10,b=F.minzoom),"maxzoom"in F&&l(11,C=F.maxzoom),"hoverCursor"in F&&l(12,y=F.hoverCursor),"manageHoverState"in F&&l(13,M=F.manageHoverState),"hovered"in F&&l(0,j=F.hovered),"eventsIfTopMost"in F&&l(14,P=F.eventsIfTopMost),"interactive"in F&&l(15,N=F.interactive),"$$scope"in F&&l(24,n=F.$$scope)},[j,r,s,f,i,a,u,c,p,g,b,C,y,M,P,N,t,O,I,R,D,q,J,fe,n]}class Sn extends K{constructor(e){super(),X(this,e,Ro,Po,Q,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Xn(o){let e=o[0],l,t,n=xn(o);return{c(){n.c(),l=ge()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&Q(e,e=r[0])?(de(),_(n,1,1,Z),he(),n=xn(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&h(l),n.d(r)}}}function xn(o){let e;const l=o[15].default,t=ct(l,o,o[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&pt(t,l,n,n[14],e?_t(l,n[14],r,null):mt(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Do(o){let e,l,t=o[0]&&Xn(o);return{c(){t&&t.c(),e=ge()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=Xn(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(de(),_(t,1,1,()=>{t=null}),he())},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Fo(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=yn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:p=null}=e,{attribution:g=null}=e,{minzoom:b=null}=e,{maxzoom:C=null}=e,{volatile:y=null}=e;if(i&&i.includes("pmtiles://")&&!An.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let N=new Br;An.addProtocol("pmtiles",N.tile)}const{map:M,self:j}=Mr();Y(o,M,N=>l(13,n=N)),Y(o,j,N=>l(0,t=N));let P;return wn(()=>{t&&n&&(Or(M,t,P),ut(j,t=null,t),P=void 0)}),o.$$set=N=>{"id"in N&&l(3,f=N.id),"url"in N&&l(4,i=N.url),"tiles"in N&&l(5,a=N.tiles),"promoteId"in N&&l(6,u=N.promoteId),"bounds"in N&&l(7,c=N.bounds),"scheme"in N&&l(8,p=N.scheme),"attribution"in N&&l(9,g=N.attribution),"minzoom"in N&&l(10,b=N.minzoom),"maxzoom"in N&&l(11,C=N.maxzoom),"volatile"in N&&l(12,y=N.volatile),"$$scope"in N&&l(14,s=N.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==f&&(ut(j,t=f,t),jr(n,t,Nr({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:p,attribution:g,minzoom:b,maxzoom:C,volatile:y}),N=>n&&N===t,()=>{t&&(P=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{P=n==null?void 0:n.getSource(f)}))},[t,M,j,f,i,a,u,c,p,g,b,C,y,n,s,r]}class $e extends K{constructor(e){super(),X(this,e,Fo,Do,Q,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function el(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Go(o){let e,l,t;return l=new He({props:{$$slots:{default:[qo]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=S("div"),w(l.$$.fragment)},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Ao(o){let e,l,t,n,r,s,f,i,a,u;l=new He({props:{$$slots:{default:[zo]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&tl(o);r=new lt({props:{label:"Help",$$slots:{default:[Ho]},$$scope:{ctx:o}}}),f=new uo({}),f.$on("click",o[3]);let p=me(o[0]),g=[];for(let C=0;C<p.length;C+=1)g[C]=nl(el(o,p,C));const b=C=>_(g[C],1,1,()=>{g[C]=null});return{c(){e=S("div"),w(l.$$.fragment),t=L(),c&&c.c(),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L();for(let C=0;C<g.length;C+=1)g[C].c();a=ge()},m(C,y){d(C,e,y),v(l,e,null),d(C,t,y),c&&c.m(C,y),d(C,n,y),v(r,C,y),d(C,s,y),v(f,C,y),d(C,i,y);for(let M=0;M<g.length;M+=1)g[M]&&g[M].m(C,y);d(C,a,y),u=!0},p(C,y){const M={};y&16384&&(M.$$scope={dirty:y,ctx:C}),l.$set(M),C[2]?c?c.p(C,y):(c=tl(C),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const j={};if(y&16384&&(j.$$scope={dirty:y,ctx:C}),r.$set(j),y&65){p=me(C[0]);let P;for(P=0;P<p.length;P+=1){const N=el(C,p,P);g[P]?(g[P].p(N,y),m(g[P],1)):(g[P]=nl(N),g[P].c(),m(g[P],1),g[P].m(a.parentNode,a))}for(de(),P=p.length;P<g.length;P+=1)b(P);he()}},i(C){if(!u){m(l.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C);for(let y=0;y<p.length;y+=1)m(g[y]);u=!0}},o(C){_(l.$$.fragment,C),_(r.$$.fragment,C),_(f.$$.fragment,C),g=g.filter(Boolean);for(let y=0;y<g.length;y+=1)_(g[y]);u=!1},d(C){C&&(h(e),h(t),h(n),h(s),h(i),h(a)),k(l),c&&c.d(C),k(r,C),k(f,C),ze(g,C)}}}function qo(o){let e;return{c(){e=T("Measure lines")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function zo(o){let e;return{c(){e=T("Stop measuring")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function tl(o){let e,l,t=o[2].toFixed(2)+"",n,r;return{c(){e=S("p"),l=T("Length: "),n=T(t),r=T(" meters")},m(s,f){d(s,e,f),$(e,l),$(e,n),$(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&A(n,t)},d(s){s&&h(e)}}}function Ho(o){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){d(l,e,t)},p:Z,d(l){l&&h(e)}}}function Eo(o){let e,l;return{c(){e=S("span"),l=L(),G(e,"class","dot svelte-1tzt432")},m(t,n){d(t,e,n),d(t,l,n)},p:Z,d(t){t&&(h(e),h(l))}}}function nl(o){let e,l,t;function n(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[Eo]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new no({props:s}),E.push(()=>B(e,"lngLat",n)),e.$on("click",r),{c(){w(e.$$.fragment)},m(f,i){v(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!l&&i&1&&(l=!0,a.lngLat=o[11],U(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){_(e.$$.fragment,f),t=!1},d(f){k(e,f)}}}function Bo(o){let e,l;const t=[z("measurement-line"),{paint:{"line-color":tt.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Uo(o){let e,l,t,n,r,s,f;const i=[Ao,Go],a=[];function u(c,p){return c[1]?0:1}return e=u(o),l=a[e]=i[e](o),n=new Ut({props:{data:o[0].length<2?Bn():_n(o[0]),$$slots:{default:[Bo]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),w(n.$$.fragment)},m(c,p){a[e].m(c,p),d(c,t,p),v(n,c,p),r=!0,s||(f=$t(window,"keydown",o[5]),s=!0)},p(c,[p]){let g=e;e=u(c),e===g?a[e].p(c,p):(de(),_(a[g],1,1,()=>{a[g]=null}),he(),l=a[e],l?l.p(c,p):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const b={};p&1&&(b.data=c[0].length<2?Bn():_n(c[0])),p&16384&&(b.$$scope={dirty:p,ctx:c}),n.$set(b)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){_(l),_(n.$$.fragment,c),r=!1},d(c){c&&h(t),a[e].d(c),k(n,c),s=!1,f()}}}function Wo(o,e,l){let t,n=!1,r=[];function s(b){return b.length<2?null:1e3*eo(_n(b),{units:"kilometers"})}function f(b){l(0,r=[...r,b.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(b){n&&b.key==="Escape"&&(b.stopPropagation(),i())}function u(b){r.splice(b,1),l(0,r)}function c(b,C,y,M){y[M]=b,l(0,r)}const p=b=>u(b),g=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=s(r))},[r,n,t,f,i,a,u,c,p,g]}class Yo extends K{constructor(e){super(),X(this,e,Wo,Uo,Q,{})}}const Jo="/atip/assets/zoom_out_map-b2e1091a.svg";function Vo(o){let e,l;return{c(){e=S("img"),Zt(e.src,l=Jo)||G(e,"src",l),G(e,"alt","Zoom to show entire boundary")},m(t,n){d(t,e,n)},p:Z,d(t){t&&h(e)}}}function Qo(o){let e,l;return e=new He({props:{title:"Zoom to show entire boundary",$$slots:{default:[Vo]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Zo(o,e,l){let t;Y(o,an,s=>l(2,t=s));let{boundaryGeojson:n}=e;function r(){let s=Ir(n);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&l(1,n=s.boundaryGeojson)},[r,n]}class Ko extends K{constructor(e){super(),X(this,e,Zo,Qo,Q,{boundaryGeojson:1})}}const V={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},rights_of_way:{footpath:"red",bridleway:"green",restricted_byway:"blue",boat:"orange"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},De=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Xo(o){let e;return{c(){e=T(`Open Government License
  `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xo(o){let e,l,t,n,r;return t=new le({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Xo]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=T("License: "),w(t.$$.fragment),n=T(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,f){d(s,e,f),$(e,l),v(t,e,null),$(e,n),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){_(t.$$.fragment,s),r=!1},d(s){s&&h(e),k(t)}}}class Te extends K{constructor(e){super(),X(this,e,null,xo,Q,{})}}function ll(o,e,l){const t=o.slice();return t[2]=e[l],t}function rl(o,e,l){const t=o.slice();return t[5]=e[l],t}function ol(o){let e,l;return{c(){e=S("span"),l=T(` 
    `),re(e,"background",o[5]),re(e,"width","100%"),re(e,"border","1px solid black")},m(t,n){d(t,e,n),$(e,l)},p(t,n){n&1&&re(e,"background",t[5])},d(t){t&&h(e)}}}function sl(o){let e,l=o[2]+"",t;return{c(){e=S("span"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&A(t,l)},d(n){n&&h(e)}}}function es(o){let e,l,t,n=me(o[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=ol(rl(o,n,i));let s=me(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=sl(ll(o,s,i));return{c(){e=S("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=S("div");for(let i=0;i<f.length;i+=1)f[i].c();re(e,"display","flex"),re(t,"display","flex"),re(t,"justify-content","space-between")},m(i,a){d(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);d(i,l,a),d(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=me(i[0]);let u;for(u=0;u<n.length;u+=1){const c=rl(i,n,u);r[u]?r[u].p(c,a):(r[u]=ol(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){s=me(i[1]);let u;for(u=0;u<s.length;u+=1){const c=ll(i,s,u);f[u]?f[u].p(c,a):(f[u]=sl(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:Z,o:Z,d(i){i&&(h(e),h(l),h(t)),ze(r,i),ze(f,i)}}}function ts(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Ee extends K{constructor(e){super(),X(this,e,ts,es,Q,{colorScale:0,limits:1})}}function pe(o){let e=new URLSearchParams(window.location.search).has(o),l=Ie(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),window.history.replaceState(null,"",n.toString())}),l}function dt(o,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Ie(n);return s.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),window.history.replaceState(null,"",i.toString())}),s}let dn=Ie(new Map),Qt=Ie(new Set);const ns=o=>({}),il=o=>({}),ls=o=>({}),al=o=>({}),rs=o=>({}),fl=o=>({});function os(o){let e;return{c(){e=T(o[2])},m(l,t){d(l,e,t)},p(l,t){t&4&&A(e,l[2])},d(l){l&&h(e)}}}function ss(o){let e,l,t;const n=o[7].icon,r=ct(n,o,o[10],fl);return{c(){r&&r.c(),e=L(),l=T(o[2])},m(s,f){r&&r.m(s,f),d(s,e,f),d(s,l,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&pt(r,n,s,s[10],t?_t(n,s[10],f,rs):mt(s[10]),fl),(!t||f&4)&&A(l,s[2])},i(s){t||(m(r,s),t=!0)},o(s){_(r,s),t=!1},d(s){s&&(h(e),h(l)),r&&r.d(s)}}}function is(o){let e;const l=o[7].help,t=ct(l,o,o[10],al);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&pt(t,l,n,n[10],e?_t(l,n[10],r,ls):mt(n[10]),al)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function as(o){let e;return{c(){e=T("X")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fs(o){let e,l,t,n,r,s,f,i,a;function u(p){o[8](p)}let c={$$slots:{default:[ss]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),l=new qe({props:c}),E.push(()=>B(l,"checked",u)),s=new lo({props:{$$slots:{default:[is]},$$scope:{ctx:o}}}),i=new He({props:{$$slots:{default:[as]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=S("div"),w(l.$$.fragment),n=L(),r=S("span"),w(s.$$.fragment),f=L(),w(i.$$.fragment),re(e,"display","flex"),re(e,"justify-content","space-between")},m(p,g){d(p,e,g),v(l,e,null),$(e,n),$(e,r),v(s,r,null),$(r,f),v(i,r,null),a=!0},p(p,g){const b={};g&1028&&(b.$$scope={dirty:g,ctx:p}),!t&&g&1&&(t=!0,b.checked=p[0],U(()=>t=!1)),l.$set(b);const C={};g&1024&&(C.$$scope={dirty:g,ctx:p}),s.$set(C);const y={};g&1024&&(y.$$scope={dirty:g,ctx:p}),i.$set(y)},i(p){a||(m(l.$$.fragment,p),m(s.$$.fragment,p),m(i.$$.fragment,p),a=!0)},o(p){_(l.$$.fragment,p),_(s.$$.fragment,p),_(i.$$.fragment,p),a=!1},d(p){p&&h(e),k(l),k(s),k(i)}}}function ul(o){let e;const l=o[7].controls,t=ct(l,o,o[10],il);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&pt(t,l,n,n[10],e?_t(l,n[10],r,ns):mt(n[10]),il)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function us(o){let e,l,t,n,r,s;e=new qe({props:{checked:o[4].has(o[1]),$$slots:{default:[os]},$$scope:{ctx:o}}}),e.$on("change",o[5]),n=new Re({props:{small:!0,$$slots:{default:[fs]},$$scope:{ctx:o}}});let f=o[0]&&ul(o);return{c(){w(e.$$.fragment),l=L(),t=S("div"),w(n.$$.fragment),r=L(),f&&f.c()},m(i,a){v(e,i,a),d(i,l,a),d(i,t,a),v(n,t,null),$(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=ul(i),f.c(),m(f,1),f.m(t,null)):f&&(de(),_(f,1,1,()=>{f=null}),he())},i(i){s||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),s=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),_(f),s=!1},d(i){i&&(h(l),h(t)),k(e,i),k(n),f&&f.d(),o[9](null)}}}function cs(o,e,l){let t;Y(o,Qt,b=>l(4,t=b));let{$$slots:n={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),Qt.set(t));let a=null;wn(()=>{dn.update(b=>(b.delete(s),b))});function u(){Qt.update(b=>(b.has(s)?(b.delete(s),l(0,i=!1)):(b.add(s),l(0,i=!0)),b))}function c(){t.delete(s),Qt.set(t),l(0,i=!1)}function p(b){i=b,l(0,i)}function g(b){E[b?"unshift":"push"](()=>{a=b,l(3,a),l(1,s)})}return o.$$set=b=>{"name"in b&&l(1,s=b.name),"title"in b&&l(2,f=b.title),"show"in b&&l(0,i=b.show),"$$scope"in b&&l(10,r=b.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&dn.update(b=>(l(3,a.style.display="none",a),b.set(s,a),b))},[i,s,f,a,t,u,c,n,p,g,r]}class ue extends K{constructor(e){super(),X(this,e,cs,us,Q,{name:1,title:2,show:0})}}function cl(o){const e=o[7].OA21CD;o[8]=e;const l=o[7][o[0].kind];o[9]=l}function $s(o){let e,l,t,n,r,s,f;return t=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[_s]},$$scope:{ctx:o}}}),r=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[gs]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=T("Population density data is from the 2021 census, via "),w(t.$$.fragment),n=T(". Output area boundaries from "),w(r.$$.fragment),s=T(".")},m(i,a){d(i,e,a),$(e,l),v(t,e,null),$(e,n),v(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&h(e),k(t),k(r)}}}function ps(o){let e,l,t,n,r,s,f,i,a;return r=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ds]},$$scope:{ctx:o}}}),f=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[hs]},$$scope:{ctx:o}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=S("p"),n=T("Car/van availability data is from the 2021 census, via "),w(r.$$.fragment),s=T(". Output area boundaries from "),w(f.$$.fragment),i=T(".")},m(u,c){d(u,e,c),d(u,l,c),d(u,t,c),$(t,n),v(r,t,null),$(t,s),v(f,t,null),$(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){_(r.$$.fragment,u),_(f.$$.fragment,u),a=!1},d(u){u&&(h(e),h(l),h(t)),k(r),k(f)}}}function ms(o){let e,l,t,n,r,s,f;return t=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[bs]},$$scope:{ctx:o}}}),r=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ws]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=T("Car/van availability data is from the 2021 census, via "),w(t.$$.fragment),n=T(". Output area boundaries from "),w(r.$$.fragment),s=T(".")},m(i,a){d(i,e,a),$(e,l),v(t,e,null),$(e,n),v(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&h(e),k(t),k(r)}}}function _s(o){let e;return{c(){e=T(`NOMIS TS006
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function gs(o){let e;return{c(){e=T(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ds(o){let e;return{c(){e=T(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function hs(o){let e;return{c(){e=T(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function bs(o){let e;return{c(){e=T(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ws(o){let e;return{c(){e=T(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function vs(o){let e,l,t,n,r,s;const f=[ms,ps,$s],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(o),t=i[l]=f[l](o),r=new Te({}),{c(){e=S("span"),t.c(),n=L(),w(r.$$.fragment),G(e,"slot","help")},m(u,c){d(u,e,c),i[l].m(e,null),$(e,n),v(r,e,null),s=!0},p(u,c){let p=l;l=a(u),l!==p&&(de(),_(i[p],1,1,()=>{i[p]=null}),he(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){_(t),_(r.$$.fragment,u),s=!1},d(u){u&&h(e),i[l].d(),k(r)}}}function ks(o){let e,l,t,n;return t=new Ee({props:{colorScale:o[1],limits:gt(o[0].kind).map($l)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",l=L(),w(t.$$.fragment)},m(r,s){d(r,e,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&1&&(f.limits=gt(r[0].kind).map($l)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&(h(e),h(l)),k(t,r)}}}function ys(o){let e,l;return e=new Ee({props:{colorScale:o[1],limits:gt(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=gt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ss(o){let e,l;return e=new Ee({props:{colorScale:o[1],limits:gt(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=gt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ts(o){let e,l,t,n,r,s,f;function i(g){o[4](g)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),l=new vn({props:a}),E.push(()=>B(l,"value",i));const u=[Ss,ys,ks],c=[];function p(g,b){return g[0].kind=="percent_households_with_car"?0:g[0].kind=="average_cars_per_household"?1:g[0].kind=="population_density"?2:-1}return~(r=p(o))&&(s=c[r]=u[r](o)),{c(){e=S("div"),w(l.$$.fragment),n=L(),s&&s.c(),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(g,b){d(g,e,b),v(l,e,null),$(e,n),~r&&c[r].m(e,null),f=!0},p(g,b){const C={};!t&&b&1&&(t=!0,C.value=g[0].kind,U(()=>t=!1)),l.$set(C);let y=r;r=p(g),r===y?~r&&c[r].p(g,b):(s&&(de(),_(c[y],1,1,()=>{c[y]=null}),he()),~r?(s=c[r],s?s.p(g,b):(s=c[r]=u[r](g),s.c()),m(s,1),s.m(e,null)):s=null)},i(g){f||(m(l.$$.fragment,g),m(s),f=!0)},o(g){_(l.$$.fragment,g),_(s),f=!1},d(g){g&&h(e),k(l),~r&&c[r].d()}}}function Cs(o){let e,l,t,n=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=S("p"),l=T("There are "),t=S("b"),r=T(n),s=T(`
          people per square kilometre in `),i=T(f)},m(a,u){d(a,e,u),$(e,l),$(e,t),$(t,r),$(e,s),$(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&A(r,n),u&128&&f!==(f=a[8]+"")&&A(i,f)},d(a){a&&h(e)}}}function Ls(o){let e,l,t=o[8]+"",n,r,s,f=o[9]+"",i,a;return{c(){e=S("p"),l=T("Households in "),n=T(t),r=T(` have an average of
          `),s=S("b"),i=T(f),a=T(`
          cars`)},m(u,c){d(u,e,c),$(e,l),$(e,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&A(n,t),c&129&&f!==(f=u[9]+"")&&A(i,f)},d(u){u&&h(e)}}}function Is(o){let e,l,t=o[9]+"",n,r,s,f=o[8]+"",i,a;return{c(){e=S("p"),l=S("b"),n=T(t),r=T("%"),s=T(`
          of households in `),i=T(f),a=T(" have 1 or more cars")},m(u,c){d(u,e,c),$(e,l),$(l,n),$(l,r),$(e,s),$(e,i),$(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&A(n,t),c&128&&f!==(f=u[8]+"")&&A(i,f)},d(u){u&&h(e)}}}function Ms(o){cl(o);let e;function l(r,s){return r[0].kind=="percent_households_with_car"?Is:r[0].kind=="average_cars_per_household"?Ls:Cs}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){cl(r),t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Os(o){let e,l;return e=new ie({props:{$$slots:{default:[Ms,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function js(o){let e,l,t,n;const r=[z(Ue),{sourceLayer:Ue},{paint:{"fill-color":be(["get",o[0].kind],gt(o[0].kind),o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Os]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ge({props:s}),e.$on("click",o[3]);const f=[z(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&oe(z(Ue)),u&0&&{sourceLayer:Ue},u&3&&{paint:{"fill-color":be(["get",a[0].kind],gt(a[0].kind),a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?ne(f,[u&0&&oe(z(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function Ns(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ue,title:"2021 census",$$slots:{controls:[Ts],help:[vs]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ue}.pmtiles`,$$slots:{default:[js]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ue="census_output_areas";function Ps(o){return o.show?o.kind:null}function Rs(o){return{show:!0,kind:o}}function gt(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const $l=o=>o.toLocaleString();function Ds(o,e,l){let t,n=V.sequential_low_to_high,s=dt(Ue,{show:!1,kind:"percent_households_with_car"},Ps,Rs);Y(o,s,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,n,s,f,i,a]}class Fs extends K{constructor(e){super(),X(this,e,Ds,Ns,Q,{})}}function Gs(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function As(o){let e;return{c(){e=T(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function qs(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[As]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from "),w(n.$$.fragment),r=T(", as of May 2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function zs(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Hs(o){let e,l;return e=new ie({props:{$$slots:{default:[zs,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Es(o){let e,l,t,n;const r=[z(wt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Hs]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ge({props:s}),e.$on("click",Ws);const f=[z(`${wt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&oe(z(wt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&oe(z(`${wt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function Bs(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:wt,title:Us,$$slots:{help:[qs],icon:[Gs]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new Ut({props:{data:`${ce()}/v1/${wt}.geojson`,$$slots:{default:[Es]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let wt="combined_authorities",Us="Combined authorities";function Ws(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function Ys(o,e,l){let t,n=V.combined_authorities,r=pe(wt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Js extends K{constructor(e){super(),X(this,e,Ys,Bs,Q,{})}}function Vs(o){let e;return{c(){e=T(`DLUCH GIS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Qs(o){let e;return{c(){e=T(`here
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Zs(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Vs]},$$scope:{ctx:o}}}),s=new le({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Qs]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=T("The 2019 English IMD scores come from "),w(n.$$.fragment),r=T(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),w(s.$$.fragment),f=T("."),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),v(n,l,null),$(l,r),v(s,l,null),$(l,f),$(e,i),v(a,e,null),u=!0},p(c,p){const g={};p&64&&(g.$$scope={dirty:p,ctx:c}),n.$set(g);const b={};p&64&&(b.$$scope={dirty:p,ctx:c}),s.$set(b)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(s),k(a)}}}function Ks(o){let e,l,t;return l=new Ee({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Xs(o){let e,l=o[5].LSOA11CD+"",t,n,r,s=o[5].score+"",f,i,a,u,c,p=o[5].rank.toLocaleString()+"",g,b;return{c(){e=S("p"),t=T(l),n=T(` has an IMD score of
        `),r=S("b"),f=T(s),i=L(),a=S("p"),u=T("Rank: "),c=S("b"),g=T(p),b=T(`
        / 32,844 LSOAs`)},m(C,y){d(C,e,y),$(e,t),$(e,n),$(e,r),$(r,f),d(C,i,y),d(C,a,y),$(a,u),$(a,c),$(c,g),$(a,b)},p(C,y){y&32&&l!==(l=C[5].LSOA11CD+"")&&A(t,l),y&32&&s!==(s=C[5].score+"")&&A(f,s),y&32&&p!==(p=C[5].rank.toLocaleString()+"")&&A(g,p)},d(C){C&&(h(e),h(i),h(a))}}}function xs(o){let e,l;return e=new ie({props:{$$slots:{default:[Xs,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ei(o){let e,l,t,n;const r=[z(We),{sourceLayer:We},{paint:{"fill-color":be(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[xs]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ge({props:s});const f=[z(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&7?ne(r,[u&0&&oe(z(We)),u&0&&{sourceLayer:We},u&6&&{paint:{"fill-color":be(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?ne(f,[u&0&&oe(z(`${We}-outline`)),u&0&&{sourceLayer:We},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function ti(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:We,title:ni,$$slots:{controls:[Ks],help:[Zs]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${We}.pmtiles`,$$slots:{default:[ei]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let We="imd",ni="Indices of Multiple Deprivation";function li(o,e,l){let t,n=V.sequential_low_to_high,r=[0,2,4,6,8,10],s=pe(We);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class ri extends K{constructor(e){super(),X(this,e,li,ti,Q,{})}}function oi(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function si(o){let e;return{c(){e=T(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ii(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[si]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from "),w(n.$$.fragment),r=T(", as of May 2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function ai(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function fi(o){let e,l;return e=new ie({props:{$$slots:{default:[ai,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ui(o){let e,l,t,n;const r=[z(vt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[fi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ge({props:s}),e.$on("click",pi);const f=[z(`${vt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&oe(z(vt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&oe(z(`${vt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function ci(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:vt,title:$i,$$slots:{help:[ii],icon:[oi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new Ut({props:{data:`${ce()}/v1/${vt}.geojson`,$$slots:{default:[ui]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let vt="local_authority_districts",$i="Local Authority Districts";function pi(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function mi(o,e,l){let t,n=V.local_authority_districts,r=pe(vt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class _i extends K{constructor(e){super(),X(this,e,mi,ci,Q,{})}}function gi(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function di(o){let e;return{c(){e=T(`local authority
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function hi(o){let e;return{c(){e=T(`national park authorit
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function bi(o){let e;return{c(){e=T(`development corporation
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function wi(o){let e;return{c(){e=T("this map")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function vi(o){let e;return{c(){e=T(`planning.data.gov.uk
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ki(o){let e,l,t,n,r,s,f,i,a,u,c,p,g,b,C,y,M,j,P,N,O,I,R;return n=new le({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[di]},$$scope:{ctx:o}}}),s=new le({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[hi]},$$scope:{ctx:o}}}),i=new le({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[bi]},$$scope:{ctx:o}}}),b=new le({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[wi]},$$scope:{ctx:o}}}),P=new le({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[vi]},$$scope:{ctx:o}}}),I=new Te({}),{c(){e=S("span"),l=S("p"),t=T("LPAs may be a "),w(n.$$.fragment),r=T(", "),w(s.$$.fragment),f=T("y, or "),w(i.$$.fragment),a=T("."),u=L(),c=S("p"),p=S("strong"),g=T(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),w(b.$$.fragment),C=T(" to get more details."),y=L(),M=S("p"),j=T("Data from ONS Geography via "),w(P.$$.fragment),N=T(", as of November 2022."),O=L(),w(I.$$.fragment),G(e,"slot","help")},m(D,q){d(D,e,q),$(e,l),$(l,t),v(n,l,null),$(l,r),v(s,l,null),$(l,f),v(i,l,null),$(l,a),$(e,u),$(e,c),$(c,p),$(p,g),v(b,p,null),$(p,C),$(e,y),$(e,M),$(M,j),v(P,M,null),$(M,N),$(e,O),v(I,e,null),R=!0},p(D,q){const J={};q&32&&(J.$$scope={dirty:q,ctx:D}),n.$set(J);const fe={};q&32&&(fe.$$scope={dirty:q,ctx:D}),s.$set(fe);const F={};q&32&&(F.$$scope={dirty:q,ctx:D}),i.$set(F);const x={};q&32&&(x.$$scope={dirty:q,ctx:D}),b.$set(x);const H={};q&32&&(H.$$scope={dirty:q,ctx:D}),P.$set(H)},i(D){R||(m(n.$$.fragment,D),m(s.$$.fragment,D),m(i.$$.fragment,D),m(b.$$.fragment,D),m(P.$$.fragment,D),m(I.$$.fragment,D),R=!0)},o(D){_(n.$$.fragment,D),_(s.$$.fragment,D),_(i.$$.fragment,D),_(b.$$.fragment,D),_(P.$$.fragment,D),_(I.$$.fragment,D),R=!1},d(D){D&&h(e),k(n),k(s),k(i),k(b),k(P),k(I)}}}function yi(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Si(o){let e,l;return e=new ie({props:{$$slots:{default:[yi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ti(o){let e,l,t,n;const r=[z(Ye),{sourceLayer:Ye},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Si]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ge({props:s});const f=[z(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&oe(z(Ye)),u&0&&{sourceLayer:Ye},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&oe(z(`${Ye}-outline`)),u&0&&{sourceLayer:Ye},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function Ci(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ye,title:Li,$$slots:{help:[ki],icon:[gi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ye}.pmtiles`,$$slots:{default:[Ti]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ye="local_planning_authorities",Li="Local Planning Authorities";function Ii(o,e,l){let t,n=V.local_planning_authorities,r=pe(Ye);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Mi extends K{constructor(e){super(),X(this,e,Ii,Ci,Q,{})}}function Oi(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function ji(o){let e;return{c(){e=T(`Ordnance Survey Boundary-Line
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ni(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ji]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from "),w(n.$$.fragment),r=T(", as of October 2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function Pi(o){let e,l=o[4].Name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&A(t,l)},d(n){n&&h(e)}}}function Ri(o){let e,l;return e=new ie({props:{$$slots:{default:[Pi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Di(o){let e,l,t,n;const r=[z(Je),{sourceLayer:Je},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ri]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ge({props:s}),e.$on("click",Ai);const f=[z(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&oe(z(Je)),u&0&&{sourceLayer:Je},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&oe(z(`${Je}-outline`)),u&0&&{sourceLayer:Je},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function Fi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Je,title:Gi,$$slots:{help:[Ni],icon:[Oi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Je}.pmtiles`,$$slots:{default:[Di]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Je="parliamentary_constituencies",Gi="Parliamentary constituencies";function Ai(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function qi(o,e,l){let t,n=V.parliamentary_constituencies,r=pe(Je);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class zi extends K{constructor(e){super(),X(this,e,qi,Fi,Q,{})}}function Hi(o){let e;return{c(){e=T(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ei(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Hi]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Most layers show air quality data from "),w(n.$$.fragment),r=T(`. The measurements are annual means, in units of µgm
      `),s=S("sup"),s.textContent="3",f=T(`
      . Note the particulate matter layers are not corrected for natural sources.`),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),v(n,l,null),$(l,r),$(l,s),$(l,f),$(e,i),v(a,e,null),u=!0},p(c,p){const g={};p&4096&&(g.$$scope={dirty:p,ctx:c}),n.$set(g)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(a)}}}function Bi(o){let e,l,t,n,r,s=o[3](o[0].pollutant)+"",f,i,a,u,c,p,g,b,C,y,M,j,P;function N(I){o[5](I)}let O={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return o[0].pollutant!==void 0&&(O.value=o[0].pollutant),l=new Et({props:O}),E.push(()=>B(l,"value",N)),{c(){e=S("div"),w(l.$$.fragment),n=L(),r=S("p"),f=T(s),i=L(),a=S("div"),u=S("label"),c=T(`Opacity
        `),p=S("input"),g=L(),b=S("img"),G(p,"type","range"),G(p,"min","0"),G(p,"max","100"),Zt(b.src,C=o[4](o[0].pollutant))||G(b,"src",C),G(b,"width",150),G(b,"alt",y=`Legend for ${o[0].pollutant} layer`),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(I,R){d(I,e,R),v(l,e,null),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,u),$(u,c),$(u,p),et(p,o[0].opacity),$(e,g),$(e,b),M=!0,j||(P=[$t(p,"change",o[6]),$t(p,"input",o[6])],j=!0)},p(I,R){const D={};!t&&R&1&&(t=!0,D.value=I[0].pollutant,U(()=>t=!1)),l.$set(D),(!M||R&1)&&s!==(s=I[3](I[0].pollutant)+"")&&A(f,s),R&1&&et(p,I[0].opacity),(!M||R&1&&!Zt(b.src,C=I[4](I[0].pollutant)))&&G(b,"src",C),(!M||R&1&&y!==(y=`Legend for ${I[0].pollutant} layer`))&&G(b,"alt",y)},i(I){M||(m(l.$$.fragment,I),M=!0)},o(I){_(l.$$.fragment,I),M=!1},d(I){I&&h(e),k(l),j=!1,Tr(P)}}}function Ui(o){let e,l;const t=[z(ln),{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new ro({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&oe(z(ln)),s&1&&{paint:{"raster-opacity":r[0].opacity/100}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Wi(o){let e,l,t,n,r;function s(i){o[7](i)}let f={name:ln,title:Yi,$$slots:{controls:[Bi],help:[Ei]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new jo({props:{tiles:[o[1]],tileSize:256,$$slots:{default:[Ui]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&2&&(c.tiles=[i[1]]),a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let ln="pollution",Yi="Pollution";function Ji(o){return o.show?`${o.pollutant}/${o.opacity}`:null}function Vi(o){let[e,l]=o.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function Qi(o,e,l){let t,n,r,f=dt(ln,{show:!1,pollutant:"PM25_viridis",opacity:50},Ji,Vi);Y(o,f,C=>l(0,r=C));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(C){return t[1]}function u(C){let y=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${y}`}function c(C){let y=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${y}`}function p(C){o.$$.not_equal(r.pollutant,C)&&(r.pollutant=C,f.set(r))}function g(){r.opacity=Kt(this.value),f.set(r)}function b(C){o.$$.not_equal(r.show,C)&&(r.show=C,f.set(r))}return o.$$.update=()=>{o.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),o.$$.dirty&1&&l(1,n=u(r.pollutant))},[r,n,f,a,c,p,g,b]}class Zi extends K{constructor(e){super(),X(this,e,Qi,Wi,Q,{})}}function Ki(o){let e;return{c(){e=T(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Xi(o){let e,l,t,n,r,s,f,i,a,u;return s=new le({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Ki]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=S("p"),r=T("Data from June 2019, produced by "),w(s.$$.fragment),f=T(". See there for methodology details"),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),v(s,n,null),$(n,f),$(e,i),v(a,e,null),u=!0},p(c,p){const g={};p&32&&(g.$$scope={dirty:p,ctx:c}),s.$set(g)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(s),k(a)}}}function xi(o){let e,l,t;return l=new Ee({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function ea(o){let e,l=o[4].noiseclass+"",t,n,r=pl(o[4].noiseclass)+"",s,f;return{c(){e=S("p"),t=T(l),n=T(" dB ("),s=T(r),f=T(")")},m(i,a){d(i,e,a),$(e,t),$(e,n),$(e,s),$(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&A(t,l),a&16&&r!==(r=pl(i[4].noiseclass)+"")&&A(s,r)},d(i){i&&h(e)}}}function ta(o){let e,l;return e=new ie({props:{$$slots:{default:[ea,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function na(o){let e,l;const t=[z(kt),{sourceLayer:kt},{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":ee(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ta]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&oe(z(kt)),s&0&&{sourceLayer:kt},s&2&&{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":ee(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function la(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:kt,title:ra,$$slots:{controls:[xi],help:[Xi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${kt}.pmtiles`,$$slots:{default:[na]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let kt="road_noise",ra="Road noise";function pl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function oa(o,e,l){let t,n=[V.sequential_low_to_high[0],V.sequential_low_to_high[2],V.sequential_low_to_high[4]],r=pe(kt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class sa extends K{constructor(e){super(),X(this,e,oa,la,Q,{})}}function ml(o,e,l){const t=o.slice();return t[10]=e[l][0],t[11]=e[l][1],t[12]=e[l][2],t[13]=e,t[14]=l,t}function ia(o){let e;return{c(){e=T(`rowmaps.com
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function aa(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://www.rowmaps.com",$$slots:{default:[ia]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=T("These public rights of way are aggregated from 137 authorities, thanks to "),w(n.$$.fragment),r=T(`. The licenses for each authority may vary, but most use
      the Open Government License v3 or Creative Commons.`),s=L(),f=S("p"),f.textContent="This data is current as of 15 November, 2024.",i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),v(a,e,null),u=!0},p(c,p){const g={};p&32768&&(g.$$scope={dirty:p,ctx:c}),n.$set(g)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(a)}}}function fa(o){let e,l,t=o[11]+"",n,r,s;return e=new Se({props:{color:o[12]}}),{c(){w(e.$$.fragment),l=L(),n=T(t),r=L()},m(f,i){v(e,f,i),d(f,l,i),d(f,n,i),d(f,r,i),s=!0},p:Z,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n),h(r)),k(e,f)}}}function _l(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[fa]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new qe({props:r}),E.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){o=s;const i={};f&32768&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function ua(o){let e,l,t=me(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=_l(ml(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ge()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&5){t=me(s[2]);let i;for(i=0;i<t.length;i+=1){const a=ml(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=_l(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(de(),i=t.length;i<n.length;i+=1)r(i);he()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&h(e),ze(n,s)}}}function ca(o){let e,l,t;return l=new Re({props:{small:!0,$$slots:{default:[ua]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function $a(o){let e,l=o[9].kind+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&512&&l!==(l=n[9].kind+"")&&A(t,l)},d(n){n&&h(e)}}}function pa(o){let e,l;return e=new ie({props:{$$slots:{default:[$a,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&33280&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ma(o){let e,l;const t=[z(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ze(["get","kind"],{footpath:V.rights_of_way.footpath,bridleway:V.rights_of_way.bridleway,"restricted byway":V.rights_of_way.restricted_byway,"byway open to all traffic":V.rights_of_way.boat},"red"),"line-width":De,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])}];let n={$$slots:{default:[pa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&oe(z(yt)),s&0&&{sourceLayer:yt},t[2],t[3],t[4],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])}]):{};s&32768&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function _a(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:yt,title:ga,$$slots:{controls:[ca],help:[aa]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${yt}.pmtiles`,$$slots:{default:[ma]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32769&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&32769&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let yt="rights_of_way",ga="Rights of Way";function da(o){return{show:!0,footpath:o.includes("footpath"),bridleway:o.includes("bridleway"),restricted_byway:o.includes("restricted_byway"),boat:o.includes("boat")}}function ha(o,e,l){let t,n=["footpath","bridleway","restricted_byway","boat"],r={show:!1,footpath:!0,bridleway:!0,restricted_byway:!0,boat:!0};function s(p){return p.show?n.filter(g=>p[g]).join(","):null}let f=dt(yt,r,s,da);Y(o,f,p=>l(0,t=p));let i=[["footpath","Footpath",V.rights_of_way.footpath],["bridleway","Bridleway",V.rights_of_way.bridleway],["restricted_byway","Restricted byway",V.rights_of_way.restricted_byway],["boat","Byway open to all traffic",V.rights_of_way.boat]];function a(p){let g=n.filter(b=>p[b]).map(b=>({footpath:"footpath",bridleway:"bridleway",restricted_byway:"restricted byway",boat:"byway open to all traffic"})[b]);return["in",["get","kind"],["literal",g]]}function u(p,g){o.$$.not_equal(t[g],p)&&(t[g]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class ba extends K{constructor(e){super(),X(this,e,ha,_a,Q,{})}}function wa(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function va(o){let e;return{c(){e=T(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ka(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[va]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from "),w(n.$$.fragment),r=T(", as of May 2023."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function ya(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Sa(o){let e,l;return e=new ie({props:{$$slots:{default:[ya,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ta(o){let e,l,t,n;const r=[z(Ve),{sourceLayer:Ve},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Sa]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new Ge({props:s}),e.$on("click",Ia);const f=[z(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&oe(z(Ve)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&oe(z(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function Ca(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ve,title:La,$$slots:{help:[ka],icon:[wa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ve}.pmtiles`,$$slots:{default:[Ta]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ve="wards",La="Wards";function Ia(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Ma(o,e,l){let t,n=V.wards,r=pe(Ve);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Oa extends K{constructor(e){super(),X(this,e,Ma,Ca,Q,{})}}function ja(o){let e;return{c(){e=T("Open Data Commons Open Database License")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Na(o){let e,l,t,n;return t=new le({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[ja]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=T("License: "),w(t.$$.fragment)},m(r,s){d(r,e,s),$(e,l),v(t,e,null),n=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&h(e),k(t)}}}class nt extends K{constructor(e){super(),X(this,e,null,Na,Q,{})}}function Pa(o){let e,l,t;return l=new Se({props:{color:V.bus_route_with_lane}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Ra(o){let e;return{c(){e=T(`GTFS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Da(o){let e,l,t,n,r,s,f,i,a,u;return s=new le({props:{href:"https://gtfs.org",$$slots:{default:[Ra]},$$scope:{ctx:o}}}),a=new nt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=S("p"),r=T("Note this data is from OpenStreetMap (as of 20 October 2024), not "),w(s.$$.fragment),f=T(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),v(s,n,null),$(n,f),$(e,i),v(a,e,null),u=!0},p(c,p){const g={};p&16&&(g.$$scope={dirty:p,ctx:c}),s.$set(g)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(s),k(a)}}}function Fa(o){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ga(o){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Aa(o){let e;function l(r,s){return r[3].has_bus_lane?Ga:Fa}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function qa(o){let e,l;return e=new ie({props:{$$slots:{default:[Aa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function za(o){let e,l;const t=[z(St),{sourceLayer:St},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],V.bus_route_with_lane,V.bus_route_without_lane],"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[qa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&oe(z(St)),s&0&&{sourceLayer:St},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Ha(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:St,title:Ea,$$slots:{help:[Da],icon:[Pa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${St}.pmtiles`,$$slots:{default:[za]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let St="bus_routes",Ea="Bus routes";function Ba(o,e,l){let t,n=pe(St);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Ua extends K{constructor(e){super(),X(this,e,Ba,Ha,Q,{})}}function gl(o){const e=tf(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function dl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function Wa(o){let e,l,t,n,r,s,f,i,a;return i=new nt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=S("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),s=S("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),w(i.$$.fragment),G(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),v(i,e,null),a=!0},p:Z,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){_(i.$$.fragment,u),a=!1},d(u){u&&h(e),k(i)}}}function Ya(o){let e,l,t=o[13]+"",n,r,s;return e=new Se({props:{color:o[14]}}),{c(){w(e.$$.fragment),l=L(),n=T(t),r=L()},m(f,i){v(e,f,i),d(f,l,i),d(f,n,i),d(f,r,i),s=!0},p:Z,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n),h(r)),k(e,f)}}}function hl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[Ya]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new qe({props:r}),E.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function Ja(o){let e,l,t=me(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=hl(dl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ge()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&5){t=me(s[2]);let i;for(i=0;i<t.length;i+=1){const a=dl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=hl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(de(),i=t.length;i<n.length;i+=1)r(i);he()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&h(e),ze(n,s)}}}function Va(o){let e,l,t;return l=new Re({props:{small:!0,$$slots:{default:[Ja]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Qa(o){gl(o);let e,l=o[10]+"",t,n,r,s,f,i=o[11]+"",a,u,c,p,g=o[12]+"",b;return{c(){e=S("h2"),t=T(l),n=L(),r=S("p"),s=T("Direction: "),f=S("b"),a=L(),u=S("p"),c=T("Width: "),p=S("b"),b=T(g)},m(C,y){d(C,e,y),$(e,t),d(C,n,y),d(C,r,y),$(r,s),$(r,f),f.innerHTML=i,d(C,a,y),d(C,u,y),$(u,c),$(u,p),$(p,b)},p(C,y){gl(C),y&512&&l!==(l=C[10]+"")&&A(t,l),y&512&&i!==(i=C[11]+"")&&(f.innerHTML=i),y&512&&g!==(g=C[12]+"")&&A(b,g)},d(C){C&&(h(e),h(n),h(r),h(a),h(u))}}}function Za(o){let e,l;return e=new ie({props:{$$slots:{default:[Qa,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ka(o){let e,l;const t=[z(Tt),{sourceLayer:Tt},{paint:{"line-color":Ze(["get","kind"],{track:V.cycle_paths.track,lane:V.cycle_paths.lane,shared_use_segregated:V.cycle_paths.shared_use_segregated,shared_use_unsegregated:V.cycle_paths.shared_use_unsegregated},"red"),"line-width":De,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[Za]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),e.$on("click",nf),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&oe(z(Tt)),s&0&&{sourceLayer:Tt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Xa(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Tt,title:xa,$$slots:{controls:[Va],help:[Wa]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Tt}.pmtiles`,$$slots:{default:[Ka]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Tt="cycle_paths",xa="Cycle paths";function ef(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function tf(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function nf(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function lf(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(p){return p.show?n.filter(g=>p[g]).join(","):null}let f=dt(Tt,r,s,ef);Y(o,f,p=>l(0,t=p));let i=[["track","Separated tracks",V.cycle_paths.track],["lane","Unprotected lanes",V.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",V.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",V.cycle_paths.shared_use_unsegregated]];function a(p){let g=n.filter(b=>p[b]);return["in",["get","kind"],["literal",g]]}function u(p,g){o.$$.not_equal(t[g],p)&&(t[g]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class rf extends K{constructor(e){super(),X(this,e,lf,Xa,Q,{})}}function of(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function sf(o){let e;return{c(){e=T(`Major Road Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function af(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[sf]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from the "),w(n.$$.fragment),r=T(", as of September 2021."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function ff(o){let e,l=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&A(t,l)},d(n){n&&h(e)}}}function uf(o){let e,l;return e=new ie({props:{$$slots:{default:[ff,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function cf(o){let e,l;const t=[z(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[uf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&oe(z(Ct)),s&0&&{sourceLayer:Ct},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function $f(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ct,title:pf,$$slots:{help:[af],icon:[of]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ct}.pmtiles`,$$slots:{default:[cf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ct="mrn",pf="Major Road Network";function mf(o,e,l){let t,n=V.mrn,r=pe(Ct);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class _f extends K{constructor(e){super(),X(this,e,mf,$f,Q,{})}}function gf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function df(o){let e;return{c(){e=T(`OS Open Roads
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function hf(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[df]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from "),w(n.$$.fragment),r=T(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function bf(o){let e,l=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&A(t,l)},d(n){n&&h(e)}}}function wf(o){let e,l;return e=new ie({props:{$$slots:{default:[bf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function vf(o){let e,l;const t=[z(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[wf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&oe(z(Lt)),s&0&&{sourceLayer:Lt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function kf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Lt,title:yf,$$slots:{help:[hf],icon:[gf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Lt}.pmtiles`,$$slots:{default:[vf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Lt="srn",yf="Strategic Road Network";function Sf(o,e,l){let t,n=V.srn,r=pe(Lt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Tf extends K{constructor(e){super(),X(this,e,Sf,kf,Q,{})}}function Cf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Lf(o){let e;return{c(){e=T(`National Cycle Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function If(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Lf]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from Sustrans about the "),w(n.$$.fragment),r=T(", downloaded on 22/01/2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function bl(o){let e,l,t,n=o[4].Desc_+"",r;return{c(){e=S("li"),l=T("Description: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Desc_+"")&&A(r,n)},d(s){s&&h(e)}}}function wl(o){let e,l,t,n=o[4].Greenway+"",r;return{c(){e=S("li"),l=T("Is greenway: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Greenway+"")&&A(r,n)},d(s){s&&h(e)}}}function vl(o){let e,l,t,n=o[4].RouteType+"",r;return{c(){e=S("li"),l=T("Route type: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteType+"")&&A(r,n)},d(s){s&&h(e)}}}function kl(o){let e,l,t,n=o[4].RouteNo+"",r;return{c(){e=S("li"),l=T("Route number: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteNo+"")&&A(r,n)},d(s){s&&h(e)}}}function yl(o){let e,l,t,n=o[4].RouteCat+"",r;return{c(){e=S("li"),l=T("Route Category: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteCat+"")&&A(r,n)},d(s){s&&h(e)}}}function Sl(o){let e,l,t,n=o[4].OpenStatus+"",r;return{c(){e=S("li"),l=T("Open Status: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].OpenStatus+"")&&A(r,n)},d(s){s&&h(e)}}}function Tl(o){let e,l,t,n=o[4].Surface+"",r;return{c(){e=S("li"),l=T("Surface: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Surface+"")&&A(r,n)},d(s){s&&h(e)}}}function Cl(o){let e,l,t,n=o[4].Quality+"",r;return{c(){e=S("li"),l=T("Quality: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Quality+"")&&A(r,n)},d(s){s&&h(e)}}}function Ll(o){let e,l,t,n=o[4].RoadClass+"",r;return{c(){e=S("li"),l=T("Road Class: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RoadClass+"")&&A(r,n)},d(s){s&&h(e)}}}function Mf(o){let e,l,t,n,r,s,f,i,a,u=o[4].Desc_&&bl(o),c=o[4].Greenway&&wl(o),p=o[4].RouteType&&vl(o),g=o[4].RouteNo&&kl(o),b=o[4].RouteCat&&yl(o),C=o[4].OpenStatus&&Sl(o),y=o[4].Surface&&Tl(o),M=o[4].Quality&&Cl(o),j=o[4].RoadClass&&Ll(o);return{c(){e=S("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),p&&p.c(),n=L(),g&&g.c(),r=L(),b&&b.c(),s=L(),C&&C.c(),f=L(),y&&y.c(),i=L(),M&&M.c(),a=L(),j&&j.c()},m(P,N){d(P,e,N),u&&u.m(e,null),$(e,l),c&&c.m(e,null),$(e,t),p&&p.m(e,null),$(e,n),g&&g.m(e,null),$(e,r),b&&b.m(e,null),$(e,s),C&&C.m(e,null),$(e,f),y&&y.m(e,null),$(e,i),M&&M.m(e,null),$(e,a),j&&j.m(e,null)},p(P,N){P[4].Desc_?u?u.p(P,N):(u=bl(P),u.c(),u.m(e,l)):u&&(u.d(1),u=null),P[4].Greenway?c?c.p(P,N):(c=wl(P),c.c(),c.m(e,t)):c&&(c.d(1),c=null),P[4].RouteType?p?p.p(P,N):(p=vl(P),p.c(),p.m(e,n)):p&&(p.d(1),p=null),P[4].RouteNo?g?g.p(P,N):(g=kl(P),g.c(),g.m(e,r)):g&&(g.d(1),g=null),P[4].RouteCat?b?b.p(P,N):(b=yl(P),b.c(),b.m(e,s)):b&&(b.d(1),b=null),P[4].OpenStatus?C?C.p(P,N):(C=Sl(P),C.c(),C.m(e,f)):C&&(C.d(1),C=null),P[4].Surface?y?y.p(P,N):(y=Tl(P),y.c(),y.m(e,i)):y&&(y.d(1),y=null),P[4].Quality?M?M.p(P,N):(M=Cl(P),M.c(),M.m(e,a)):M&&(M.d(1),M=null),P[4].RoadClass?j?j.p(P,N):(j=Ll(P),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},d(P){P&&h(e),u&&u.d(),c&&c.d(),p&&p.d(),g&&g.d(),b&&b.d(),C&&C.d(),y&&y.d(),M&&M.d(),j&&j.d()}}}function Of(o){let e,l;return e=new ie({props:{$$slots:{default:[Mf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function jf(o){let e,l;const t=[z(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Of]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&oe(z(It)),s&0&&{sourceLayer:It},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Nf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:It,title:Pf,$$slots:{help:[If],icon:[Cf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${It}.pmtiles`,$$slots:{default:[jf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let It="national_cycle_network",Pf="National Cycle Network";function Rf(o,e,l){let t,n=V.national_cycle_network,r=pe(It);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Df extends K{constructor(e){super(),X(this,e,Rf,Nf,Q,{})}}function Il(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function Ff(o){let e;return{c(){e=T(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Gf(o){let e,l,t,n,r,s,f,i,a,u,c,p;return u=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ff]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=S("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),s=S("p"),s.textContent="Data valid as of 1 January, 2024",f=L(),i=S("p"),a=T(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(u.$$.fragment),c=T("."),G(e,"slot","help")},m(g,b){d(g,e,b),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),$(e,i),$(i,a),v(u,i,null),$(i,c),p=!0},p(g,b){const C={};b&4096&&(C.$$scope={dirty:b,ctx:g}),u.$set(C)},i(g){p||(m(u.$$.fragment,g),p=!0)},o(g){_(u.$$.fragment,g),p=!1},d(g){g&&h(e),k(u)}}}function Af(o){let e,l,t;return l=new Ee({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function qf(o){let e,l,t=rn(o[6].angle+o[9])+"",n;return{c(){e=S("p"),l=new Ht(!1),n=T(` side of the road: no pavement
          `),l.a=n},m(r,s){d(r,e,s),l.m(t,e),$(e,n)},p(r,s){s&64&&t!==(t=rn(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&h(e)}}}function zf(o){let e,l,t=rn(o[6].angle+o[9])+"",n,r,s=o[7]+"",f,i,a,u=o[8]+"",c,p;return{c(){e=S("p"),l=new Ht(!1),n=T(` side of the road:
            `),r=S("b"),f=T(s),i=T(`
            m average,
            `),a=S("b"),c=T(u),p=T(`
            m minimum
          `),l.a=n},m(g,b){d(g,e,b),l.m(t,e),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,c),$(e,p)},p(g,b){b&64&&t!==(t=rn(g[6].angle+g[9])+"")&&l.p(t),b&64&&s!==(s=g[7]+"")&&A(f,s),b&64&&u!==(u=g[8]+"")&&A(c,u)},d(g){g&&h(e)}}}function Ml(o){let e;function l(r,s){return r[7]?zf:qf}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Hf(o){let e,l=me([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Ml(Il(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ge()},m(n,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(n,r);d(n,e,r)},p(n,r){if(r&64){l=me([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=Il(n,l,s);t[s]?t[s].p(f,r):(t[s]=Ml(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(n){n&&h(e),ze(t,n)}}}function Ef(o){let e,l;return e=new ie({props:{openOn:"hover",$$slots:{default:[Hf,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Bf(o){let e,l;const t=[z(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":De,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Ef]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&oe(z(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&6&&{paint:{"line-color":be(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":De,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Uf(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Mt,title:Wf,$$slots:{controls:[Af],help:[Gf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${xt()}/v1/${Mt}.pmtiles`,$$slots:{default:[Bf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Mt="pavement_widths",Wf="OS Pavement widths";function Yf(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function rn(o){return`${Yf(o)} <span style="display: inline-block; rotate: ${o}deg">⬆</span>`}function Jf(o,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=pe(Mt);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class Vf extends K{constructor(e){super(),X(this,e,Jf,Uf,Q,{})}}function Qf(o){let e;return{c(){e=T("the PCT website")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Zf(o){let e;return{c(){e=T("2017 journal article")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Kf(o){let e,l,t,n,r,s,f,i,a,u,c,p;return i=new le({props:{href:"https://www.pct.bike",$$slots:{default:[Qf]},$$scope:{ctx:o}}}),u=new le({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Zf]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=S("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),s=S("p"),f=T("See "),w(i.$$.fragment),a=T(" and "),w(u.$$.fragment),c=T(" for details on methodology and data sources."),G(e,"slot","help")},m(g,b){d(g,e,b),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),v(i,s,null),$(s,a),v(u,s,null),$(s,c),p=!0},p(g,b){const C={};b&1024&&(C.$$scope={dirty:b,ctx:g}),i.$set(C);const y={};b&1024&&(y.$$scope={dirty:b,ctx:g}),u.$set(y)},i(g){p||(m(i.$$.fragment,g),m(u.$$.fragment,g),p=!0)},o(g){_(i.$$.fragment,g),_(u.$$.fragment,g),p=!1},d(g){g&&h(e),k(i),k(u)}}}function Xf(o){let e,l,t,n,r,s,f,i,a;l=new Ee({props:{colorScale:o[1],limits:o[2]}});function u(b){o[5](b)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),n=new vn({props:c}),E.push(()=>B(n,"value",u));function p(b){o[6](b)}let g={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(g.value=o[0].scenario),f=new Et({props:g}),E.push(()=>B(f,"value",p)),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(b,C){d(b,e,C),v(l,e,null),$(e,t),v(n,e,null),$(e,s),v(f,e,null),a=!0},p(b,C){const y={};!r&&C&1&&(r=!0,y.value=b[0].tripPurpose,U(()=>r=!1)),n.$set(y);const M={};!i&&C&1&&(i=!0,M.value=b[0].scenario,U(()=>i=!1)),f.$set(M)},i(b){a||(m(l.$$.fragment,b),m(n.$$.fragment,b),m(f.$$.fragment,b),a=!0)},o(b){_(l.$$.fragment,b),_(n.$$.fragment,b),_(f.$$.fragment,b),a=!1},d(b){b&&h(e),k(l),k(n),k(f)}}}function xf(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Ht(!1),t=ge(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function eu(o){let e,l;return e=new ie({props:{$$slots:{default:[xf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function tu(o){let e,l;const t=[z(rt),{sourceLayer:rt},{paint:{"line-color":be(["get",o[0].scenario],o[2],o[1]),"line-width":De,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==rt?"visible":"none"}}];let n={$$slots:{default:[eu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&oe(z(rt)),s&0&&{sourceLayer:rt},s&7&&{paint:{"line-color":be(["get",r[0].scenario],r[2],r[1]),"line-width":De,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==rt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function nu(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Ht(!1),t=ge(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function lu(o){let e,l;return e=new ie({props:{$$slots:{default:[nu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ru(o){let e,l;const t=[z(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get",o[0].scenario],o[2],o[1]),"line-width":De,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==bt?"visible":"none"}}];let n={$$slots:{default:[lu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&oe(z(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&7&&{paint:{"line-color":be(["get",r[0].scenario],r[2],r[1]),"line-width":De,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==bt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function ou(o){let e,l,t,n,r,s,f;function i(u){o[7](u)}let a={name:Rr,title:su,$$slots:{controls:[Xf],help:[Kf]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new ue({props:a}),E.push(()=>B(e,"show",i)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${rt}.pmtiles`,$$slots:{default:[tu]},$$scope:{ctx:o}}}),s=new $e({props:{url:`pmtiles://${ce()}/v1/${bt}.pmtiles`,$$slots:{default:[ru]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(u,c){v(e,u,c),d(u,t,c),v(n,u,c),d(u,r,c),v(s,u,c),f=!0},p(u,[c]){const p={};c&1025&&(p.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,p.show=u[0].show,U(()=>l=!1)),e.$set(p);const g={};c&1025&&(g.$$scope={dirty:c,ctx:u}),n.$set(g);const b={};c&1025&&(b.$$scope={dirty:c,ctx:u}),s.$set(b)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(e.$$.fragment,u),_(n.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(h(t),h(r)),k(e,u),k(n,u),k(s,u)}}}let Rr="pct",rt="pct_commute",bt="pct_school",su="Propensity to Cycle Tool";function iu(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function au(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function fu(o,e,l){let t,n=V.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=dt(Rr,{show:!1,tripPurpose:rt,scenario:"baseline"},iu,au);Y(o,f,p=>l(0,t=p));function i(p){let g=p.baseline,b=p.gov_target,C=p.go_dutch,y=`<h2>Trip purpose: ${t.tripPurpose==rt?"commuting":"school"}</h2>`;if(y+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)y+=`<p>Government target (2025): <b>${b.toLocaleString()}</b></p>`,y+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let M=(b/g).toFixed(1),j=(C/g).toFixed(1);y+=`<p>Government target (2025): ${b.toLocaleString()} (<b>${M}x</b> of baseline)</p>`,y+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${j}x</b> of baseline)</p>`}return y}function a(p){o.$$.not_equal(t.tripPurpose,p)&&(t.tripPurpose=p,f.set(t))}function u(p){o.$$.not_equal(t.scenario,p)&&(t.scenario=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,n,r,f,i,a,u,c]}class uu extends K{constructor(e){super(),X(this,e,fu,ou,Q,{})}}function cu(o){let e;return{c(){e=T("Basemap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $u(o){let e;return{c(){e=T(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function pu(o){let e,l,t,n,r,s,f,i,a,u,c,p,g;return n=new le({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[cu]},$$scope:{ctx:o}}}),c=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[$u]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),t=T("The average speed data is collected over a six-month period by "),w(n.$$.fragment),r=T(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=L(),f=S("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=S("p"),u=T(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(c.$$.fragment),p=T("."),G(e,"slot","help")},m(b,C){d(b,e,C),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),$(e,a),$(a,u),v(c,a,null),$(a,p),g=!0},p(b,C){const y={};C&512&&(y.$$scope={dirty:C,ctx:b}),n.$set(y);const M={};C&512&&(M.$$scope={dirty:C,ctx:b}),c.$set(M)},i(b){g||(m(n.$$.fragment,b),m(c.$$.fragment,b),g=!0)},o(b){_(n.$$.fragment,b),_(c.$$.fragment,b),g=!1},d(b){b&&h(e),k(n),k(c)}}}function mu(o){let e,l,t,n,r,s;l=new Ee({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),n=new vn({props:i}),E.push(()=>B(n,"value",f)),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(a,u){d(a,e,u),v(l,e,null),$(e,t),v(n,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,U(()=>r=!1)),n.$set(c)},i(a){s||(m(l.$$.fragment,a),m(n.$$.fragment,a),s=!0)},o(a){_(l.$$.fragment,a),_(n.$$.fragment,a),s=!1},d(a){a&&h(e),k(l),k(n)}}}function _u(o){let e,l,t=o[8].indicative_mph+"",n,r,s,f,i,a=o[8].highest_mph+"",u,c,p=o[4][o[8].highest_description]+"",g,b;return{c(){e=S("p"),l=T("Posted speed limit: "),n=T(t),r=T(" mph"),s=L(),f=S("p"),i=T("Highest average speed: "),u=T(a),c=T(" mph (during "),g=T(p),b=T(")")},m(C,y){d(C,e,y),$(e,l),$(e,n),$(e,r),d(C,s,y),d(C,f,y),$(f,i),$(f,u),$(f,c),$(f,g),$(f,b)},p(C,y){y&256&&t!==(t=C[8].indicative_mph+"")&&A(n,t),y&256&&a!==(a=C[8].highest_mph+"")&&A(u,a),y&256&&p!==(p=C[4][C[8].highest_description]+"")&&A(g,p)},d(C){C&&(h(e),h(s),h(f))}}}function gu(o){let e,l;return e=new ie({props:{$$slots:{default:[_u,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function du(o){let e,l;const t=[z(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get",o[0].kind],o[2],o[1]),"line-width":De,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[gu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&oe(z(Ot)),s&0&&{sourceLayer:Ot},t[2],t[3],s&7&&{paint:{"line-color":be(["get",r[0].kind],r[2],r[1]),"line-width":De,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function hu(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Ot,title:bu,$$slots:{controls:[mu],help:[pu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${xt()}/v1/${Ot}.pmtiles`,$$slots:{default:[du]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ot="road_speeds",bu="OS Speeds";function wu(o){return o.show?o.kind:null}function vu(o){return{show:!0,kind:o}}function ku(o,e,l){let t,n=V.sequential_low_to_high,r=[0,20,30,40,50,90],f=dt(Ot,{show:!1,kind:"indicative_mph"},wu,vu);Y(o,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class yu extends K{constructor(e){super(),X(this,e,ku,hu,Q,{})}}function Su(o){let e;return{c(){e=T(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Tu(o){let e,l,t,n,r,s,f,i,a,u;return i=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Su]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=S("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),s=S("p"),f=T(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(i.$$.fragment),a=T("."),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),v(i,s,null),$(s,a),u=!0},p(c,p){const g={};p&64&&(g.$$scope={dirty:p,ctx:c}),i.$set(g)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){_(i.$$.fragment,c),u=!1},d(c){c&&h(e),k(i)}}}function Cu(o){let e,l,t;return l=new Ee({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Lu(o){let e,l,t,n=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",p,g;return{c(){e=S("p"),l=T("Average width: "),t=S("b"),r=T(n),s=T(`
        meters`),f=L(),i=S("p"),a=T("Minimum width: "),u=S("b"),p=T(c),g=T(`
        meters`)},m(b,C){d(b,e,C),$(e,l),$(e,t),$(t,r),$(e,s),d(b,f,C),d(b,i,C),$(i,a),$(i,u),$(u,p),$(i,g)},p(b,C){C&32&&n!==(n=b[5].average+"")&&A(r,n),C&32&&c!==(c=b[5].minimum+"")&&A(p,c)},d(b){b&&(h(e),h(f),h(i))}}}function Iu(o){let e,l;return e=new ie({props:{$$slots:{default:[Lu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Mu(o){let e,l;const t=[z(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get","average"],o[2],o[1]),"line-width":De,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Iu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&oe(z(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&6&&{paint:{"line-color":be(["get","average"],r[2],r[1]),"line-width":De,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Ou(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:jt,title:ju,$$slots:{controls:[Cu],help:[Tu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${xt()}/v1/${jt}.pmtiles`,$$slots:{default:[Mu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let jt="road_widths",ju="OS Road widths";function Nu(o,e,l){let t,n=V.sequential_low_to_high,r=[0,5,10,15,20,100],s=pe(jt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Pu extends K{constructor(e){super(),X(this,e,Nu,Ou,Q,{})}}function Ru(o){let e,l,t;return l=new Se({props:{color:V.trams}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Du(o){let e,l,t,n,r;return n=new nt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),w(n.$$.fragment),G(e,"slot","help")},m(s,f){d(s,e,f),$(e,l),$(e,t),v(n,e,null),r=!0},p:Z,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&h(e),k(n)}}}function Fu(o){let e,l;const t=[z(Nt),{sourceLayer:Nt},{paint:{"line-color":V.trams,"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new _e({props:n}),e.$on("click",qu),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&oe(z(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Gu(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Nt,title:Au,$$slots:{help:[Du],icon:[Ru]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Nt}.pmtiles`,$$slots:{default:[Fu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Nt="trams",Au="Trams";function qu(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function zu(o,e,l){let t,n=pe(Nt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Hu extends K{constructor(e){super(),X(this,e,zu,Gu,Q,{})}}function Eu(o){let e;return{c(){e=T(`Bus Open Data Service
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bu(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Eu]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=T("Data from the "),w(n.$$.fragment),r=T(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=L(),f=S("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),v(a,e,null),u=!0},p(c,p){const g={};p&64&&(g.$$scope={dirty:p,ctx:c}),n.$set(g)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(a)}}}function Uu(o){let e,l,t,n,r;return n=new Ee({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("div"),l=S("p"),l.textContent="Peak hourly frequency:",t=L(),w(n.$$.fragment),G(e,"slot","controls")},m(s,f){d(s,e,f),$(e,l),$(e,t),v(n,e,null),r=!0},p:Z,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&h(e),k(n)}}}function Wu(o){let e,l,t,n=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,p,g,b,C,y=o[5].peak_description+"",M,j,P,N,O,I=o[5].total+"",R,D,q=o[5].total_description+"",J,fe;return{c(){e=S("p"),l=T("Stop name: "),t=S("b"),r=T(n),s=L(),f=S("p"),i=T("Peak: "),a=S("b"),c=T(u),p=T(`
        buses during the busiest hour of any day`),g=L(),b=S("p"),C=T("The peak hour is "),M=T(y),j=L(),P=S("p"),N=T("Total buses per day: "),O=S("b"),R=T(I),D=T(`
        (for `),J=T(q),fe=T(", the busiest day of the week)")},m(F,x){d(F,e,x),$(e,l),$(e,t),$(t,r),d(F,s,x),d(F,f,x),$(f,i),$(f,a),$(a,c),$(f,p),d(F,g,x),d(F,b,x),$(b,C),$(b,M),d(F,j,x),d(F,P,x),$(P,N),$(P,O),$(O,R),$(P,D),$(P,J),$(P,fe)},p(F,x){x&32&&n!==(n=F[5].stop_name+"")&&A(r,n),x&32&&u!==(u=F[5].peak+"")&&A(c,u),x&32&&y!==(y=F[5].peak_description+"")&&A(M,y),x&32&&I!==(I=F[5].total+"")&&A(R,I),x&32&&q!==(q=F[5].total_description+"")&&A(J,q)},d(F){F&&(h(e),h(s),h(f),h(g),h(b),h(j),h(P))}}}function Yu(o){let e,l;return e=new ie({props:{$$slots:{default:[Wu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ju(o){let e,l;const t=[z(Pt),{sourceLayer:Pt},{paint:{"circle-color":be(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Yu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Bt({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&oe(z(Pt)),s&0&&{sourceLayer:Pt},s&6&&{paint:{"circle-color":be(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Vu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Pt,title:Qu,$$slots:{controls:[Uu],help:[Bu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Pt}.pmtiles`,$$slots:{default:[Ju]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Pt="bus_stops",Qu="Bus stops";function Zu(o,e,l){let t,n=V.sequential_low_to_high,r=[0,3,10,20,30,100],s=pe(Pt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Ku extends K{constructor(e){super(),X(this,e,Zu,Vu,Q,{})}}function Xu(o){let e;return{c(){e=T("crossing")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xu(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Xu]},$$scope:{ctx:o}}}),f=new nt({}),{c(){e=S("span"),l=S("p"),t=T("This shows "),w(n.$$.fragment),r=T(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function ec(o){let e,l,t;return l=new Jt({props:{rows:o[2]}}),{c(){e=S("div"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function tc(o){let e,l=Ol(o[4])+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=Ol(n[4])+"")&&A(t,l)},d(n){n&&h(e)}}}function nc(o){let e,l;return e=new ie({props:{$$slots:{default:[tc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function lc(o){let e,l;const t=[z(Rt),{sourceLayer:Rt},{paint:{"circle-color":Ze(["get","crossing"],{traffic_signals:V.signalized_crossing},V.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[nc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Bt({props:n}),e.$on("click",sc),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&oe(z(Rt)),s&0&&{sourceLayer:Rt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function rc(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Rt,title:oc,$$slots:{controls:[ec],help:[xu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Rt}.pmtiles`,$$slots:{default:[lc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Rt="crossings",oc="Crossings";function Ol(o){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[o.crossing]??`Unknown crossing type (${o.crossing})`}function sc(o){window.open(`http://openstreetmap.org/node/${o.detail.features[0].properties.osm_id}`,"_blank")}function ic(o,e,l){let t,n=pe(Rt);Y(o,n,f=>l(0,t=f));let r=[["Signalized",V.signalized_crossing],["Other",V.other_crossing]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class ac extends K{constructor(e){super(),X(this,e,ic,rc,Q,{})}}function fc(o){let e;return{c(){e=T("OS Terrain 50")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function uc(o){let e,l,t,n,r,s,f,i,a,u,c,p,g,b;return i=new le({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[fc]},$$scope:{ctx:o}}}),c=new Te({}),g=new nt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=S("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),s=S("p"),f=T("This layer is built from "),w(i.$$.fragment),a=T(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),w(c.$$.fragment),p=L(),w(g.$$.fragment),G(e,"slot","help")},m(C,y){d(C,e,y),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),v(i,s,null),$(s,a),$(e,u),v(c,e,null),$(e,p),v(g,e,null),b=!0},p(C,y){const M={};y&64&&(M.$$scope={dirty:y,ctx:C}),i.$set(M)},i(C){b||(m(i.$$.fragment,C),m(c.$$.fragment,C),m(g.$$.fragment,C),b=!0)},o(C){_(i.$$.fragment,C),_(c.$$.fragment,C),_(g.$$.fragment,C),b=!1},d(C){C&&h(e),k(i),k(c),k(g)}}}function cc(o){let e,l,t,n,r;return l=new Ee({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),w(l.$$.fragment),t=L(),n=S("p"),n.innerHTML=`<img src="${co}" alt="arrow"/>
      Arrows point uphill`,G(e,"slot","controls")},m(s,f){d(s,e,f),v(l,e,null),$(e,t),$(e,n),r=!0},p:Z,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),r=!1},d(s){s&&h(e),k(l)}}}function $c(o){let e,l,t,n=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=S("p"),l=T("Gradient: "),t=S("b"),r=T(n),s=T(`
        %`)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(t,r),$(e,s)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&A(r,n)},d(f){f&&h(e)}}}function pc(o){let e,l;return e=new ie({props:{$$slots:{default:[$c,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function mc(o){let e,l,t,n;const r=[z(Qe),{sourceLayer:Qe},{manageHoverState:!0},{paint:{"line-color":be(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":De,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[pc]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=te(s,r[a]);e=new _e({props:s});const f=[z(Qe+"_arrows"),{sourceLayer:Qe},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=te(i,f[a]);return t=new Sn({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),n=!0},p(a,u){const c=u&7?ne(r,[u&0&&oe(z(Qe)),u&0&&{sourceLayer:Qe},r[2],u&6&&{paint:{"line-color":be(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":De,"line-opacity":ee(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?ne(f,[u&0&&oe(z(Qe+"_arrows")),u&0&&{sourceLayer:Qe},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&h(l),k(e,a),k(t,a)}}}function _c(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Qe,title:gc,$$slots:{controls:[cc],help:[uc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Qe}.pmtiles`,$$slots:{default:[mc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Qe="gradient",gc="Gradients";function dc(o,e,l){let t,n=V.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=pe(Qe);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class hc extends K{constructor(e){super(),X(this,e,dc,_c,Q,{})}}function bc(o){let e,l;return{c(){e=S("img"),G(e,"slot","icon"),Zt(e.src,l=$o)||G(e,"src",l),G(e,"alt","a logo representing cycle parking")},m(t,n){d(t,e,n)},p:Z,d(t){t&&h(e)}}}function wc(o){let e;return{c(){e=T("OpenStreetMap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function vc(o){let e;return{c(){e=T("OpenStreetMap Carto")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function kc(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[wc]},$$scope:{ctx:o}}}),a=new le({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[vc]},$$scope:{ctx:o}}}),c=new nt({}),{c(){e=S("span"),l=S("p"),t=T("Cycle parking, according to "),w(n.$$.fragment),r=T(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=L(),f=S("p"),i=T("Icon from "),w(a.$$.fragment),u=L(),w(c.$$.fragment),G(e,"slot","help")},m(g,b){d(g,e,b),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),v(a,f,null),$(e,u),v(c,e,null),p=!0},p(g,b){const C={};b&16&&(C.$$scope={dirty:b,ctx:g}),n.$set(C);const y={};b&16&&(y.$$scope={dirty:b,ctx:g}),a.$set(y)},i(g){p||(m(n.$$.fragment,g),m(a.$$.fragment,g),m(c.$$.fragment,g),p=!0)},o(g){_(n.$$.fragment,g),_(a.$$.fragment,g),_(c.$$.fragment,g),p=!1},d(g){g&&h(e),k(n),k(a),k(c)}}}function yc(o){let e,l,t,n=(o[3].capacity??"unknown")+"",r;return{c(){e=S("p"),l=T("Capacity: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&8&&n!==(n=(s[3].capacity??"unknown")+"")&&A(r,n)},d(s){s&&h(e)}}}function Sc(o){let e,l;return e=new ie({props:{$$slots:{default:[yc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Tc(o){let e,l;const t=[z(Dt),{sourceLayer:Dt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Sc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Sn({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&oe(z(Dt)),s&0&&{sourceLayer:Dt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Cc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Dt,title:Lc,$$slots:{help:[kc],icon:[bc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Dt}.pmtiles`,$$slots:{default:[Tc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Dt="cycle_parking",Lc="Cycle parking";function Ic(o,e,l){let t,n=pe(Dt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Mc extends K{constructor(e){super(),X(this,e,Ic,Cc,Q,{})}}function Oc(o){let e,l,t,n,r;return n=new nt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),w(n.$$.fragment),G(e,"slot","help")},m(s,f){d(s,e,f),$(e,l),$(e,t),v(n,e,null),r=!0},p:Z,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&h(e),k(n)}}}function jc(o){let e,l,t;return e=new Se({props:{color:V.education.schools}}),{c(){w(e.$$.fragment),l=T(`
        Schools`)},m(n,r){v(e,n,r),d(n,l,r),t=!0},p:Z,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&h(l),k(e,n)}}}function Nc(o){let e,l,t;return e=new Se({props:{color:V.education.colleges}}),{c(){w(e.$$.fragment),l=T(`
        Colleges`)},m(n,r){v(e,n,r),d(n,l,r),t=!0},p:Z,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&h(l),k(e,n)}}}function Pc(o){let e,l,t;return e=new Se({props:{color:V.education.universities}}),{c(){w(e.$$.fragment),l=T(`
        Universities`)},m(n,r){v(e,n,r),d(n,l,r),t=!0},p:Z,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&h(l),k(e,n)}}}function Rc(o){let e,l,t,n,r,s,f,i,a;function u(y){o[3](y)}let c={$$slots:{default:[jc]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new qe({props:c}),E.push(()=>B(e,"checked",u));function p(y){o[4](y)}let g={$$slots:{default:[Nc]},$$scope:{ctx:o}};o[0].college!==void 0&&(g.checked=o[0].college),n=new qe({props:g}),E.push(()=>B(n,"checked",p));function b(y){o[5](y)}let C={$$slots:{default:[Pc]},$$scope:{ctx:o}};return o[0].university!==void 0&&(C.checked=o[0].university),f=new qe({props:C}),E.push(()=>B(f,"checked",b)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment)},m(y,M){v(e,y,M),d(y,t,M),v(n,y,M),d(y,s,M),v(f,y,M),a=!0},p(y,M){const j={};M&2048&&(j.$$scope={dirty:M,ctx:y}),!l&&M&1&&(l=!0,j.checked=y[0].school,U(()=>l=!1)),e.$set(j);const P={};M&2048&&(P.$$scope={dirty:M,ctx:y}),!r&&M&1&&(r=!0,P.checked=y[0].college,U(()=>r=!1)),n.$set(P);const N={};M&2048&&(N.$$scope={dirty:M,ctx:y}),!i&&M&1&&(i=!0,N.checked=y[0].university,U(()=>i=!1)),f.$set(N)},i(y){a||(m(e.$$.fragment,y),m(n.$$.fragment,y),m(f.$$.fragment,y),a=!0)},o(y){_(e.$$.fragment,y),_(n.$$.fragment,y),_(f.$$.fragment,y),a=!1},d(y){y&&(h(t),h(s)),k(e,y),k(n,y),k(f,y)}}}function Dc(o){let e,l,t;return l=new Re({props:{small:!0,$$slots:{default:[Rc]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Fc(o){let e,l=(o[10].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&A(t,l)},d(n){n&&h(e)}}}function Gc(o){let e,l;return e=new ie({props:{$$slots:{default:[Fc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ac(o){let e,l;const t=[z(Ft),{sourceLayer:Ft},{paint:{"fill-color":Ze(["get","type"],{school:V.education.schools,college:V.education.colleges,university:V.education.universities},"grey"),"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Gc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&5?ne(t,[s&0&&oe(z(Ft)),s&0&&{sourceLayer:Ft},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function qc(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Ft,title:zc,$$slots:{controls:[Dc],help:[Oc]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ft}.pmtiles`,$$slots:{default:[Ac]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Ft="education",zc="Education";function Hc(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function Ec(o,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(g){return g.show?n.filter(b=>g[b]).join(","):null}let f=dt(Ft,r,s,Hc);Y(o,f,g=>l(0,t=g));function i(g){let b=n.filter(C=>g[C]);return["in",["get","type"],["literal",b]]}function a(g){o.$$.not_equal(t.school,g)&&(t.school=g,f.set(t))}function u(g){o.$$.not_equal(t.college,g)&&(t.college=g,f.set(t))}function c(g){o.$$.not_equal(t.university,g)&&(t.university=g,f.set(t))}function p(g){o.$$.not_equal(t.show,g)&&(t.show=g,f.set(t))}return[t,f,i,a,u,c,p]}class Bc extends K{constructor(e){super(),X(this,e,Ec,qc,Q,{})}}function Uc(o){let e,l,t;return l=new Se({props:{color:V.hospitals}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Wc(o){let e;return{c(){e=T("hospital")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Yc(o){let e,l,t,n,r,s,f,i;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Wc]},$$scope:{ctx:o}}}),f=new nt({}),{c(){e=S("span"),l=S("p"),t=T("This shows "),w(n.$$.fragment),r=T(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),v(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&h(e),k(n),k(f)}}}function Jc(o){let e,l=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&A(t,l)},d(n){n&&h(e)}}}function Vc(o){let e,l;return e=new ie({props:{$$slots:{default:[Jc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Qc(o){let e,l;const t=[z(Gt),{sourceLayer:Gt},{paint:{"fill-color":V.hospitals,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Vc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&oe(z(Gt)),s&0&&{sourceLayer:Gt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Zc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Gt,title:Kc,$$slots:{help:[Yc],icon:[Uc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Gt}.pmtiles`,$$slots:{default:[Qc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Gt="hospitals",Kc="Hospitals";function Xc(o,e,l){let t,n=pe(Gt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class xc extends K{constructor(e){super(),X(this,e,Xc,Zc,Q,{})}}function e$(o){let e,l;return{c(){e=S("img"),G(e,"slot","icon"),Zt(e.src,l=po)||G(e,"src",l),G(e,"alt","A logo representing a train")},m(t,n){d(t,e,n)},p:Z,d(t){t&&h(e)}}}function t$(o){let e;return{c(){e=T("railway station")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function n$(o){let e;return{c(){e=T(`National Rail
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function l$(o){let e,l,t,n,r,s,f,i,a,u,c,p,g;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[t$]},$$scope:{ctx:o}}}),a=new le({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[n$]},$$scope:{ctx:o}}}),p=new nt({}),{c(){e=S("div"),l=S("p"),t=T("This shows "),w(n.$$.fragment),r=T(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),f=S("p"),i=T("Icon from "),w(a.$$.fragment),u=T(". (Note that not all stations shown are National Rail.)"),c=L(),w(p.$$.fragment),G(e,"slot","help")},m(b,C){d(b,e,C),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),v(a,f,null),$(f,u),$(e,c),v(p,e,null),g=!0},p(b,C){const y={};C&16&&(y.$$scope={dirty:C,ctx:b}),n.$set(y);const M={};C&16&&(M.$$scope={dirty:C,ctx:b}),a.$set(M)},i(b){g||(m(n.$$.fragment,b),m(a.$$.fragment,b),m(p.$$.fragment,b),g=!0)},o(b){_(n.$$.fragment,b),_(a.$$.fragment,b),_(p.$$.fragment,b),g=!1},d(b){b&&h(e),k(n),k(a),k(p)}}}function r$(o){let e,l=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&A(t,l)},d(n){n&&h(e)}}}function o$(o){let e,l;return e=new ie({props:{$$slots:{default:[r$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function s$(o){let e,l;const t=[z(Xt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[o$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Sn({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&oe(z(Xt)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function i$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Xt,title:a$,$$slots:{help:[l$],icon:[e$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new Ut({props:{data:`${ce()}/v1/${Xt}.geojson`,$$slots:{default:[s$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let Xt="railway_stations",a$="Railway stations";function f$(o,e,l){let t,n=pe(Xt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class u$ extends K{constructor(e){super(),X(this,e,f$,i$,Q,{})}}function c$(o){let e,l,t;return l=new Se({props:{color:V.sports_spaces}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function $$(o){let e;return{c(){e=T("sports pitches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function p$(o){let e;return{c(){e=T("sports centres")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function m$(o){let e,l,t,n,r,s,f,i,a,u;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[$$]},$$scope:{ctx:o}}}),s=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[p$]},$$scope:{ctx:o}}}),a=new nt({}),{c(){e=S("span"),l=S("p"),t=T("This shows "),w(n.$$.fragment),r=T(" and "),w(s.$$.fragment),f=T(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),v(n,l,null),$(l,r),v(s,l,null),$(l,f),$(e,i),v(a,e,null),u=!0},p(c,p){const g={};p&16&&(g.$$scope={dirty:p,ctx:c}),n.$set(g);const b={};p&16&&(b.$$scope={dirty:p,ctx:c}),s.$set(b)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&h(e),k(n),k(s),k(a)}}}function _$(o){let e,l=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&A(t,l)},d(n){n&&h(e)}}}function g$(o){let e,l;return e=new ie({props:{$$slots:{default:[_$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function d$(o){let e,l;const t=[z(At),{sourceLayer:At},{paint:{"fill-color":V.sports_spaces,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[g$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&oe(z(At)),s&0&&{sourceLayer:At},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function h$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:At,title:b$,$$slots:{help:[m$],icon:[c$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${At}.pmtiles`,$$slots:{default:[d$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let At="sports_spaces",b$="Sports spaces";function w$(o,e,l){let t,n=pe(At);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class v$ extends K{constructor(e){super(),X(this,e,w$,h$,Q,{})}}function k$(o){let e;return{c(){e=T("DfT stats19")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function y$(o){let e;return{c(){e=T("documented by DfT")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function S$(o){let e,l,t,n,r,s,f,i,a,u,c,p,g,b,C,y,M,j,P,N,O,I,R,D;return n=new le({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[k$]},$$scope:{ctx:o}}}),j=new le({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[y$]},$$scope:{ctx:o}}}),R=new Te({}),{c(){e=S("span"),l=S("p"),t=T("This layer shows collisions recorded in the "),w(n.$$.fragment),r=T(" dataset, as of 30 September 2024. Please note these limitations:"),s=L(),f=S("ul"),i=S("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=S("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),p=S("li"),p.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,g=L(),b=S("li"),b.textContent='The "pedestrians" category also include mobility scooters',C=L(),y=S("li"),M=T("All limitations "),w(j.$$.fragment),P=T(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),N=L(),O=S("p"),O.textContent="You can click a point to open the full report, thanks to CycleStreets.",I=L(),w(R.$$.fragment),G(e,"slot","help")},m(q,J){d(q,e,J),$(e,l),$(l,t),v(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),$(f,a),$(f,u),$(f,c),$(f,p),$(f,g),$(f,b),$(f,C),$(f,y),$(y,M),v(j,y,null),$(y,P),$(e,N),$(e,O),$(e,I),v(R,e,null),D=!0},p(q,J){const fe={};J&4194304&&(fe.$$scope={dirty:J,ctx:q}),n.$set(fe);const F={};J&4194304&&(F.$$scope={dirty:J,ctx:q}),j.$set(F)},i(q){D||(m(n.$$.fragment,q),m(j.$$.fragment,q),m(R.$$.fragment,q),D=!0)},o(q){_(n.$$.fragment,q),_(j.$$.fragment,q),_(R.$$.fragment,q),D=!1},d(q){q&&h(e),k(n),k(j),k(R)}}}function T$(o){let e;return{c(){e=T("Pedestrians")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function C$(o){let e;return{c(){e=T("Cyclists")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function L$(o){let e;return{c(){e=T("Horse riders")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function I$(o){let e;return{c(){e=T("Other")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function M$(o){let e,l,t,n,r,s,f,i,a,u,c,p;function g(O){o[10](O)}let b={$$slots:{default:[T$]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(b.checked=o[0].pedestrians),e=new qe({props:b}),E.push(()=>B(e,"checked",g));function C(O){o[11](O)}let y={$$slots:{default:[C$]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(y.checked=o[0].cyclists),n=new qe({props:y}),E.push(()=>B(n,"checked",C));function M(O){o[12](O)}let j={$$slots:{default:[L$]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(j.checked=o[0].horseRiders),f=new qe({props:j}),E.push(()=>B(f,"checked",M));function P(O){o[13](O)}let N={$$slots:{default:[I$]},$$scope:{ctx:o}};return o[0].other!==void 0&&(N.checked=o[0].other),u=new qe({props:N}),E.push(()=>B(u,"checked",P)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment)},m(O,I){v(e,O,I),d(O,t,I),v(n,O,I),d(O,s,I),v(f,O,I),d(O,a,I),v(u,O,I),p=!0},p(O,I){const R={};I&4194304&&(R.$$scope={dirty:I,ctx:O}),!l&&I&1&&(l=!0,R.checked=O[0].pedestrians,U(()=>l=!1)),e.$set(R);const D={};I&4194304&&(D.$$scope={dirty:I,ctx:O}),!r&&I&1&&(r=!0,D.checked=O[0].cyclists,U(()=>r=!1)),n.$set(D);const q={};I&4194304&&(q.$$scope={dirty:I,ctx:O}),!i&&I&1&&(i=!0,q.checked=O[0].horseRiders,U(()=>i=!1)),f.$set(q);const J={};I&4194304&&(J.$$scope={dirty:I,ctx:O}),!c&&I&1&&(c=!0,J.checked=O[0].other,U(()=>c=!1)),u.$set(J)},i(O){p||(m(e.$$.fragment,O),m(n.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),p=!0)},o(O){_(e.$$.fragment,O),_(n.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),p=!1},d(O){O&&(h(t),h(s),h(a)),k(e,O),k(n,O),k(f,O),k(u,O)}}}function O$(o){let e,l,t,n,r,s,f,i,a,u,c,p,g;return l=new Re({props:{small:!0,$$slots:{default:[M$]},$$scope:{ctx:o}}}),u=new Jt({props:{rows:o[9]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),n=S("div"),r=T(`Filter years:
      `),s=S("input"),f=T(`
      -
      `),i=S("input"),a=L(),w(u.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2023),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2023),G(i,"class","svelte-1ft65rw"),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(b,C){d(b,e,C),v(l,e,null),$(e,t),$(e,n),$(n,r),$(n,s),et(s,o[0].minYear),$(n,f),$(n,i),et(i,o[0].maxYear),$(e,a),v(u,e,null),c=!0,p||(g=[$t(s,"input",o[14]),$t(i,"input",o[15])],p=!0)},p(b,C){const y={};C&4194305&&(y.$$scope={dirty:C,ctx:b}),l.$set(y),C&1&&Kt(s.value)!==b[0].minYear&&et(s,b[0].minYear),C&1&&Kt(i.value)!==b[0].maxYear&&et(i,b[0].maxYear)},i(b){c||(m(l.$$.fragment,b),m(u.$$.fragment,b),c=!0)},o(b){_(l.$$.fragment,b),_(u.$$.fragment,b),c=!1},d(b){b&&h(e),k(l),k(u),p=!1,Tr(g)}}}function jl(o){let e,l,t,n=o[3][o[21].pedestrian_location]+"",r;return{c(){e=S("p"),l=T("Pedestrian location: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[3][s[21].pedestrian_location]+"")&&A(r,n)},d(s){s&&h(e)}}}function Nl(o){let e,l,t,n=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=S("p"),l=T("Pedestrian movement: "),t=S("b"),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[4][s[21].pedestrian_movement]+"")&&A(r,n)},d(s){s&&h(e)}}}function j$(o){let e,l,t,n=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,p,g,b,C,y=Pl(o[21])+"",M,j,P,N,O,I=o[21].pedestrian_location&&jl(o),R=o[21].pedestrian_movement&&Nl(o);return{c(){e=S("p"),l=T("Year: "),t=S("b"),r=T(n),s=L(),f=S("p"),i=T("Severity: "),a=S("b"),c=T(u),p=L(),g=S("p"),b=T("Casualties: "),C=S("b"),M=T(y),j=L(),I&&I.c(),P=L(),R&&R.c(),N=L(),O=S("p"),O.textContent="Click to open full report in CycleStreets"},m(D,q){d(D,e,q),$(e,l),$(e,t),$(t,r),d(D,s,q),d(D,f,q),$(f,i),$(f,a),$(a,c),d(D,p,q),d(D,g,q),$(g,b),$(g,C),$(C,M),d(D,j,q),I&&I.m(D,q),d(D,P,q),R&&R.m(D,q),d(D,N,q),d(D,O,q)},p(D,q){q&2097152&&n!==(n=D[21].year+"")&&A(r,n),q&2097152&&u!==(u=D[5][D[21].severity]+"")&&A(c,u),q&2097152&&y!==(y=Pl(D[21])+"")&&A(M,y),D[21].pedestrian_location?I?I.p(D,q):(I=jl(D),I.c(),I.m(P.parentNode,P)):I&&(I.d(1),I=null),D[21].pedestrian_movement?R?R.p(D,q):(R=Nl(D),R.c(),R.m(N.parentNode,N)):R&&(R.d(1),R=null)},d(D){D&&(h(e),h(s),h(f),h(p),h(g),h(j),h(P),h(N),h(O)),I&&I.d(D),R&&R.d(D)}}}function N$(o){let e,l;return e=new ie({props:{$$slots:{default:[j$,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function P$(o){let e,l;const t=[z(qt),{sourceLayer:qt},{paint:{"circle-color":be(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[N$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Bt({props:n}),e.$on("click",G$),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&451?ne(t,[s&0&&oe(z(qt)),s&0&&{sourceLayer:qt},s&448&&{paint:{"circle-color":be(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function R$(o){let e,l,t,n,r;function s(i){o[16](i)}let f={name:qt,title:D$,$$slots:{controls:[O$],help:[S$]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${qt}.pmtiles`,$$slots:{default:[P$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let qt="stats19",D$="Stats19";function F$(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Pl(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function G$(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function A$(o,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(D){return D.show?`${r.filter(J=>D[J]).join(",")}/${D.minYear}/${D.maxYear}`:null}let i=dt(qt,s,f,F$);Y(o,i,D=>l(0,n=D));function a(D,q,J,fe,F,x){let H=["any"];return n.pedestrians&&H.push(["get","pedestrian"]),n.cyclists&&H.push(["get","cyclist"]),n.horseRiders&&H.push(["get","horse_rider"]),n.other&&H.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],H]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},p={1:"Fatal",2:"Serious",3:"Slight"},g=V.sequential_low_to_high[4],b=V.sequential_low_to_high[2],C=V.sequential_low_to_high[0],y=[["Fatal",g],["Serious",b],["Slight",C]];function M(D){o.$$.not_equal(n.pedestrians,D)&&(n.pedestrians=D,i.set(n))}function j(D){o.$$.not_equal(n.cyclists,D)&&(n.cyclists=D,i.set(n))}function P(D){o.$$.not_equal(n.horseRiders,D)&&(n.horseRiders=D,i.set(n))}function N(D){o.$$.not_equal(n.other,D)&&(n.other=D,i.set(n))}function O(){n.minYear=Kt(this.value),i.set(n)}function I(){n.maxYear=Kt(this.value),i.set(n)}function R(D){o.$$.not_equal(n.show,D)&&(n.show=D,i.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,p,g,b,C,y,M,j,P,N,O,I,R]}class q$ extends K{constructor(e){super(),X(this,e,A$,R$,Q,{})}}function z$(o){let e;return{c(){e=T(`DfT road statistics
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function H$(o){let e;return{c(){e=T("methodology")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function E$(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new le({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[z$]},$$scope:{ctx:o}}}),s=new le({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[H$]},$$scope:{ctx:o}}}),c=new Te({}),{c(){e=S("span"),l=S("p"),t=T("AADF (annual average daily flow) data from "),w(n.$$.fragment),r=T(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),w(s.$$.fragment),f=T(" for details and caveats about the measurements."),i=L(),a=S("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),w(c.$$.fragment),G(e,"slot","help")},m(g,b){d(g,e,b),$(e,l),$(l,t),v(n,l,null),$(l,r),v(s,l,null),$(l,f),$(e,i),$(e,a),$(e,u),v(c,e,null),p=!0},p(g,b){const C={};b&128&&(C.$$scope={dirty:b,ctx:g}),n.$set(C);const y={};b&128&&(y.$$scope={dirty:b,ctx:g}),s.$set(y)},i(g){p||(m(n.$$.fragment,g),m(s.$$.fragment,g),m(c.$$.fragment,g),p=!0)},o(g){_(n.$$.fragment,g),_(s.$$.fragment,g),_(c.$$.fragment,g),p=!1},d(g){g&&h(e),k(n),k(s),k(c)}}}function B$(o){let e,l,t;return l=new Ee({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function U$(o){let e,l=o[6].location+"",t,n,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",p,g,b,C,y=o[6].year+"",M,j,P,N=o[6].pedal_cycles.toLocaleString()+"",O,I,R,D,q,J=o[6].method+"",fe;return{c(){e=S("h2"),t=T(l),n=L(),r=S("p"),s=T("Total motor vehicles ("),i=T(f),a=T(` AADF):
        `),u=S("b"),p=T(c),g=L(),b=S("p"),C=T("Total pedal cycles ("),M=T(y),j=T(` AADF):
        `),P=S("b"),O=T(N),I=L(),R=S("p"),D=T("Count method: "),q=S("b"),fe=T(J)},m(F,x){d(F,e,x),$(e,t),d(F,n,x),d(F,r,x),$(r,s),$(r,i),$(r,a),$(r,u),$(u,p),d(F,g,x),d(F,b,x),$(b,C),$(b,M),$(b,j),$(b,P),$(P,O),d(F,I,x),d(F,R,x),$(R,D),$(R,q),$(q,fe)},p(F,x){x&64&&l!==(l=F[6].location+"")&&A(t,l),x&64&&f!==(f=F[6].year+"")&&A(i,f),x&64&&c!==(c=F[6].motor_vehicles.toLocaleString()+"")&&A(p,c),x&64&&y!==(y=F[6].year+"")&&A(M,y),x&64&&N!==(N=F[6].pedal_cycles.toLocaleString()+"")&&A(O,N),x&64&&J!==(J=F[6].method+"")&&A(fe,J)},d(F){F&&(h(e),h(n),h(r),h(g),h(b),h(I),h(R))}}}function W$(o){let e,l;return e=new ie({props:{$$slots:{default:[U$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Y$(o){let e,l;const t=[z(zt),{sourceLayer:zt},{paint:{"circle-color":be(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[W$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Bt({props:n}),e.$on("click",Q$),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&oe(z(zt)),s&0&&{sourceLayer:zt},s&6&&{paint:{"circle-color":be(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function J$(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:zt,title:V$,$$slots:{controls:[B$],help:[E$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${zt}.pmtiles`,$$slots:{default:[Y$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let zt="vehicle_counts",V$="Vehicle counts";function Q$(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function Z$(o,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=pe(zt);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class K$ extends K{constructor(e){super(),X(this,e,Z$,J$,Q,{})}}function Rl(o,e,l){const t=o.slice();return t[6]=e[l],t}function X$(o){let e;return{c(){e=S("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,G(e,"slot","help")},m(l,t){d(l,e,t)},p:Z,d(l){l&&h(e)}}}function x$(o){let e,l,t;return l=new Jt({props:{rows:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function ep(o){let e,l=o[5]["Issue ID"]+"",t,n,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=S("h2"),t=T(l),n=T(" - "),s=T(r),f=L(),i=S("p"),u=T(a)},m(c,p){d(c,e,p),$(e,t),$(e,n),$(e,s),d(c,f,p),d(c,i,p),$(i,u)},p(c,p){p&32&&l!==(l=c[5]["Issue ID"]+"")&&A(t,l),p&32&&r!==(r=c[5].Code+"")&&A(s,r),p&32&&a!==(a=c[5]["Issue Stage"]+"")&&A(u,a)},d(c){c&&(h(e),h(f),h(i))}}}function Dl(o){let e,l=o[6]+"",t,n,r,s=o[5][o[6]]+"",f,i;return{c(){e=S("p"),t=T(l),n=T(`:
            `),r=S("b"),f=T(s),i=L()},m(a,u){d(a,e,u),$(e,t),$(e,n),$(e,r),$(r,f),$(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&A(f,s)},d(a){a&&h(e)}}}function tp(o){let e,l=me(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Dl(Rl(o,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();re(e,"max-width","30vw"),re(e,"max-height","60vh"),re(e,"overflow","auto")},m(n,r){d(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&36){l=me(n[2]);let s;for(s=0;s<l.length;s+=1){const f=Rl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Dl(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&h(e),ze(t,n)}}}function np(o){let e,l,t,n;return e=new ie({props:{openOn:"hover",$$slots:{default:[ep,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[tp,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function lp(o){let e,l;const t=[z(on),{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[np]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Bt({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&oe(z(on)),s&8&&{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function rp(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:on,title:op,$$slots:{controls:[x$],help:[X$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),E.push(()=>B(e,"show",s)),n=new Ut({props:{data:`${xt()}/v1/problems.geojson.gz`,$$slots:{default:[lp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}let on="problems",op="Issues & Conflicts";function sp(o,e,l){let t,n=pe(on);Y(o,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,s,f]}class ip extends K{constructor(e){super(),X(this,e,sp,rp,Q,{})}}function ap(o){let e;function l(r,s){return r[2]<=100?cp:up}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:Z,o:Z,d(r){r&&h(e),n.d(r)}}}function fp(o){let e,l;return e=new He({props:{$$slots:{default:[$p]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function up(o){let e;return{c(){e=S("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){d(l,e,t)},p:Z,d(l){l&&h(e)}}}function cp(o){let e,l,t;return{c(){e=S("label"),l=T(`Downloading scheme data
      `),t=S("progress"),t.value=o[2],G(t,"class","svelte-q3473n")},m(n,r){d(n,e,r),$(e,l),$(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&h(e)}}}function $p(o){let e;return{c(){e=T("Load latest scheme data")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function pp(o){let e,l,t,n;const r=[fp,ap],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(l=s[e]=r[e](o)),{c(){l&&l.c(),t=ge()},m(i,a){~e&&s[e].m(i,a),d(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(l&&(de(),_(s[u],1,1,()=>{s[u]=null}),he()),~e?(l=s[e],l?l.p(i,a):(l=s[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){_(l),n=!1},d(i){i&&h(t),~e&&s[e].d(i)}}}function mp(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await Jr(`${xt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,s=c)});l(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}Cr(async()=>{n&&await f()});async function i(){l(0,n=!0),await f()}return o.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,s,i,t]}class _p extends K{constructor(e){super(),X(this,e,mp,pp,Q,{loadFile:4})}}function gp(o,e,l){let t={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},n={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};for(let[r,s]of Object.entries(o.schemes))s.pipeline?n.schemes[r]=s:t.schemes[r]=s;for(let r of o.features){if(!dp(r))continue;let s=r.properties.scheme_reference,f=Object.hasOwn(t.schemes,s),i=f?t.schemes[s]:n.schemes[s];i.browse&&(r.properties.funding_programme=i.browse.funding_programme,r.properties.current_milestone=i.browse.current_milestone);let a=f?t:n;r.id=a.features.length+1,a.features.push(r)}e.set(t),l.set(n)}function dp(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}function hp(){let o={type:"FeatureCollection",features:[],schemes:{},notes:["These schemes are everything you've drawn in this browser using Scheme Sketcher. The data source and accuracy depend on whatever files you imported, created, or edited yourself."]};for(let l=0;l<window.localStorage.length;l++){let t=window.localStorage.key(l),n=t.split("/");if(!(n.length!=3||n[0]!="sketch"))try{let r=JSON.parse(window.localStorage.getItem(t));if(r.features.length==0)continue;for(let s of Object.values(r.schemes))s.browse={authority_or_region:n[1],local_filename:n[2]};o.schemes={...o.schemes,...r.schemes},o.features=[...o.features,...r.features]}catch{}}let e=1;for(let l of o.features)l.id=e++;return o}let Yt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},hn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function Fl(o,e,l){const t=o.slice();return t[27]=e[l],t[28]=e,t[29]=l,t}function bp(o){let e;return{c(){e=T("Filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function wp(o){let e;return{c(){e=T("Reset all filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function vp(o){let e,l,t,n,r,s,f,i;e=new gn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Sp]},$$scope:{ctx:o}}});function a(g){o[22](g)}let u={label:"Scheme name or reference",options:sn(o[0])};o[1]!==void 0&&(u.value=o[1]),t=new Pr({props:u}),E.push(()=>B(t,"value",a));function c(g){o[23](g)}let p={label:"Authority or region",choices:o[10],emptyOption:!0};return o[4]!==void 0&&(p.value=o[4]),s=new Et({props:p}),E.push(()=>B(s,"value",c)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),r=L(),w(s.$$.fragment)},m(g,b){v(e,g,b),d(g,l,b),v(t,g,b),d(g,r,b),v(s,g,b),i=!0},p(g,b){const C={};b&1073741828&&(C.$$scope={dirty:b,ctx:g}),e.$set(C);const y={};b&1&&(y.options=sn(g[0])),!n&&b&2&&(n=!0,y.value=g[1],U(()=>n=!1)),t.$set(y);const M={};b&1024&&(M.choices=g[10]),!f&&b&16&&(f=!0,M.value=g[4],U(()=>f=!1)),s.$set(M)},i(g){i||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(s.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(s.$$.fragment,g),i=!1},d(g){g&&(h(l),h(r)),k(e,g),k(t,g),k(s,g)}}}function kp(o){let e,l,t,n,r,s,f,i,a,u,c,p,g,b,C,y;t=new gn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Cp]},$$scope:{ctx:o}}});function M(R){o[16](R)}let j={label:"Scheme name or reference",options:sn(o[0])};o[1]!==void 0&&(j.value=o[1]),r=new Pr({props:j}),E.push(()=>B(r,"value",M));function P(R){o[17](R)}let N={label:"Authority or region",choices:o[10],emptyOption:!0};o[4]!==void 0&&(N.value=o[4]),i=new Et({props:N}),E.push(()=>B(i,"value",P)),p=new gn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[Mp]},$$scope:{ctx:o}}});function O(R){o[19](R)}let I={label:"Current milestone",choices:o[11],emptyOption:!0};return o[6]!==void 0&&(I.value=o[6]),b=new Et({props:I}),E.push(()=>B(b,"value",O)),{c(){e=S("div"),l=S("div"),w(t.$$.fragment),n=L(),w(r.$$.fragment),f=L(),w(i.$$.fragment),u=L(),c=S("div"),w(p.$$.fragment),g=L(),w(b.$$.fragment),G(l,"class","govuk-grid-column-one-half"),G(c,"class","govuk-grid-column-one-half"),G(e,"class","govuk-grid-row")},m(R,D){d(R,e,D),$(e,l),v(t,l,null),$(l,n),v(r,l,null),$(l,f),v(i,l,null),$(e,u),$(e,c),v(p,c,null),$(c,g),v(b,c,null),y=!0},p(R,D){const q={};D&1073741828&&(q.$$scope={dirty:D,ctx:R}),t.$set(q);const J={};D&1&&(J.options=sn(R[0])),!s&&D&2&&(s=!0,J.value=R[1],U(()=>s=!1)),r.$set(J);const fe={};D&1024&&(fe.choices=R[10]),!a&&D&16&&(a=!0,fe.value=R[4],U(()=>a=!1)),i.$set(fe);const F={};D&1073741856&&(F.$$scope={dirty:D,ctx:R}),p.$set(F);const x={};!C&&D&64&&(C=!0,x.value=R[6],U(()=>C=!1)),b.$set(x)},i(R){y||(m(t.$$.fragment,R),m(r.$$.fragment,R),m(i.$$.fragment,R),m(p.$$.fragment,R),m(b.$$.fragment,R),y=!0)},o(R){_(t.$$.fragment,R),_(r.$$.fragment,R),_(i.$$.fragment,R),_(p.$$.fragment,R),_(b.$$.fragment,R),y=!1},d(R){R&&h(e),k(t),k(r),k(i),k(p),k(b)}}}function yp(o){let e;return{c(){e=T("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Sp(o){let e,l,t,n,r,s;return t=new He({props:{$$slots:{default:[yp]},$$scope:{ctx:o}}}),t.$on("click",o[21]),{c(){e=S("input"),l=L(),w(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){d(f,e,i),et(e,o[2]),d(f,l,i),v(t,f,i),n=!0,r||(s=$t(e,"input",o[20]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&et(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),k(t,f),r=!1,s()}}}function Tp(o){let e;return{c(){e=T("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Cp(o){let e,l,t,n,r,s;return t=new He({props:{$$slots:{default:[Tp]},$$scope:{ctx:o}}}),t.$on("click",o[15]),{c(){e=S("input"),l=L(),w(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){d(f,e,i),et(e,o[2]),d(f,l,i),v(t,f,i),n=!0,r||(s=$t(e,"input",o[14]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&et(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),k(t,f),r=!1,s()}}}function Lp(o){let e=o[27]+"",l,t;return{c(){l=T(e),t=L()},m(n,r){d(n,l,r),d(n,t,r)},p:Z,d(n){n&&(h(l),h(t))}}}function Gl(o){let e,l,t;function n(s){o[18](s,o[27])}let r={$$slots:{default:[Lp]},$$scope:{ctx:o}};return o[5][o[27]]!==void 0&&(r.checked=o[5][o[27]]),e=new qe({props:r}),E.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){o=s;const i={};f&1073741824&&(i.$$scope={dirty:f,ctx:o}),!l&&f&32&&(l=!0,i.checked=o[5][o[27]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function Ip(o){let e,l,t=me(Object.keys(Yt)),n=[];for(let s=0;s<t.length;s+=1)n[s]=Gl(Fl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ge()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&32){t=me(Object.keys(Yt));let i;for(i=0;i<t.length;i+=1){const a=Fl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Gl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(de(),i=t.length;i<n.length;i+=1)r(i);he()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&h(e),ze(n,s)}}}function Mp(o){let e,l;return e=new Re({props:{small:!0,$$slots:{default:[Ip]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&1073741856&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Op(o){let e;return{c(){e=T("Done")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function jp(o){let e,l,t,n,r=o[9].interventions.toLocaleString()+"",s,f,i,a,u=o[8].size.toLocaleString()+"",c,p,g,b,C,y=Al(o[9].totalLength).toFixed(1)+"",M,j,P,N,O,I,R,D,q,J;N=new He({props:{$$slots:{default:[wp]},$$scope:{ctx:o}}}),N.$on("click",o[12]);const fe=[kp,vp],F=[];function x(H,ae){return H[3]=="ATF"?0:1}return I=x(o),R=F[I]=fe[I](o),q=new ho({props:{$$slots:{default:[Op]},$$scope:{ctx:o}}}),q.$on("click",o[24]),{c(){e=S("p"),e.textContent="Showing:",l=L(),t=S("ul"),n=S("li"),s=T(r),f=T(" interventions"),i=L(),a=S("li"),c=T(u),p=T(" schemes"),g=L(),b=S("li"),C=T("total route length of "),M=T(y),j=T(" miles"),P=L(),w(N.$$.fragment),O=L(),R.c(),D=L(),w(q.$$.fragment)},m(H,ae){d(H,e,ae),d(H,l,ae),d(H,t,ae),$(t,n),$(n,s),$(n,f),$(t,i),$(t,a),$(a,c),$(a,p),$(t,g),$(t,b),$(b,C),$(b,M),$(b,j),d(H,P,ae),v(N,H,ae),d(H,O,ae),F[I].m(H,ae),d(H,D,ae),v(q,H,ae),J=!0},p(H,ae){(!J||ae&512)&&r!==(r=H[9].interventions.toLocaleString()+"")&&A(s,r),(!J||ae&256)&&u!==(u=H[8].size.toLocaleString()+"")&&A(c,u),(!J||ae&512)&&y!==(y=Al(H[9].totalLength).toFixed(1)+"")&&A(M,y);const Ce={};ae&1073741824&&(Ce.$$scope={dirty:ae,ctx:H}),N.$set(Ce);let Ke=I;I=x(H),I===Ke?F[I].p(H,ae):(de(),_(F[Ke],1,1,()=>{F[Ke]=null}),he(),R=F[I],R?R.p(H,ae):(R=F[I]=fe[I](H),R.c()),m(R,1),R.m(D.parentNode,D));const Fe={};ae&1073741824&&(Fe.$$scope={dirty:ae,ctx:H}),q.$set(Fe)},i(H){J||(m(N.$$.fragment,H),m(R),m(q.$$.fragment,H),J=!0)},o(H){_(N.$$.fragment,H),_(R),_(q.$$.fragment,H),J=!1},d(H){H&&(h(e),h(l),h(t),h(P),h(O),h(D)),k(N,H),F[I].d(H),k(q,H)}}}function Np(o){let e,l,t,n,r;e=new He({props:{$$slots:{default:[bp]},$$scope:{ctx:o}}}),e.$on("click",o[13]);function s(i){o[25](i)}let f={title:`Filter ${o[3]} schemes`,$$slots:{default:[jp]},$$scope:{ctx:o}};return o[7]!==void 0&&(f.open=o[7]),t=new Vr({props:f}),E.push(()=>B(t,"open",s)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(i,a){v(e,i,a),d(i,l,a),v(t,i,a),r=!0},p(i,[a]){const u={};a&1073741824&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.title=`Filter ${i[3]} schemes`),a&1073743871&&(c.$$scope={dirty:a,ctx:i}),!n&&a&128&&(n=!0,c.open=i[7],U(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),r=!1},d(i){i&&h(l),k(e,i),k(t,i)}}}function Pp(o){var t;let e=new Set;for(let n of Object.values(o.schemes))(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Al(o){return o*621371e-9}function sn(o){let e=[];for(let l of Object.values(o.schemes))e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function Rp(o,e,l){let t,{source:n}=e,{schemesGj:r}=e,{filterSchemeText:s}=e,{filterInterventionText:f}=e,i=!1,a=new Set,u={interventions:0,totalLength:0},c=Object.keys(hn).map(H=>[H,H]),p="",g=Object.fromEntries(Object.keys(Yt).map(H=>[H,!0])),b="";function C(H,ae,Ce,Ke,Fe){let Ae=H.toLowerCase(),ot=ae.toLowerCase(),st=we=>{var Be,it,at,W;if(Ae&&!((Be=we.properties.name)!=null&&Be.toLowerCase().includes(Ae))&&!((it=we.properties.description)!=null&&it.toLowerCase().includes(Ae)))return!1;let Le=r.schemes[we.properties.scheme_reference];return!(Ce&&((at=Le.browse)==null?void 0:at.authority_or_region)!=Ce||n=="ATF"&&Le.browse.funding_programme&&!Ke[Le.browse.funding_programme]||Fe&&((W=Le.browse)==null?void 0:W.current_milestone)!=Fe||ot&&!Le.scheme_reference.toLowerCase().includes(ot)&&!(Le.scheme_name??"").toLowerCase().includes(ot))};l(8,a=new Set(r.features.filter(st).map(we=>we.properties.scheme_reference))),l(9,u={interventions:0,totalLength:0});let ht=we=>{var Le,Be;return!(!a.has(we.properties.scheme_reference)||Ae&&!((Le=we.properties.name)!=null&&Le.toLowerCase().includes(Ae))&&!((Be=we.properties.description)!=null&&Be.toLowerCase().includes(Ae)))};for(let we of r.features)ht(we)?(delete we.properties.hide_while_editing,l(9,u.interventions++,u),we.geometry.type=="LineString"&&we.properties.length_meters&&l(9,u.totalLength+=we.properties.length_meters,u)):we.properties.hide_while_editing=!0;l(0,r),l(9,u)}function y(){l(4,p=""),l(5,g=Object.fromEntries(Object.keys(Yt).map(H=>[H,!0]))),l(6,b=""),l(2,f=""),l(1,s="")}const M=()=>l(7,i=!0);function j(){f=this.value,l(2,f)}const P=()=>l(2,f="");function N(H){s=H,l(1,s)}function O(H){p=H,l(4,p)}function I(H,ae){o.$$.not_equal(g[ae],H)&&(g[ae]=H,l(5,g))}function R(H){b=H,l(6,b)}function D(){f=this.value,l(2,f)}const q=()=>l(2,f="");function J(H){s=H,l(1,s)}function fe(H){p=H,l(4,p)}const F=()=>l(7,i=!1);function x(H){i=H,l(7,i)}return o.$$set=H=>{"source"in H&&l(3,n=H.source),"schemesGj"in H&&l(0,r=H.schemesGj),"filterSchemeText"in H&&l(1,s=H.filterSchemeText),"filterInterventionText"in H&&l(2,f=H.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&1&&l(10,t=Pp(r)),o.$$.dirty&118&&C(f,s,p,g,b)},[r,s,f,n,p,g,b,i,a,u,t,c,y,M,j,P,N,O,I,R,D,q,J,fe,F,x]}class Tn extends K{constructor(e){super(),X(this,e,Rp,Np,Q,{source:3,schemesGj:0,filterSchemeText:1,filterInterventionText:2})}}const nn=Ie({type:"FeatureCollection",features:[],schemes:{}}),ql=Ie(""),zl=Ie(""),fn=Ie({type:"FeatureCollection",features:[],schemes:{}}),Hl=Ie(""),El=Ie(""),un=Ie({type:"FeatureCollection",features:[],schemes:{}}),Bl=Ie(""),Ul=Ie("");function Wl(o){let e,l,t,n=o[0].status+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Status",t=T(`
    : `),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].status+"")&&A(r,n)},d(s){s&&h(e)}}}function Yl(o){let e,l,t,n=o[0].timescale+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Timescale",t=T(`
    : `),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale+"")&&A(r,n)},d(s){s&&h(e)}}}function Jl(o){let e,l,t,n=o[0].timescale_year+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Estimated completion year",t=T(`
    : `),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale_year+"")&&A(r,n)},d(s){s&&h(e)}}}function Vl(o){let e,l,t,n=o[0].year_published+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently published",t=T(`
    : `),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_published+"")&&A(r,n)},d(s){s&&h(e)}}}function Ql(o){let e,l,t,n=o[0].year_consulted+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently consulted on",t=T(`
    : `),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_consulted+"")&&A(r,n)},d(s){s&&h(e)}}}function Dp(o){let e,l,t,n,r,s=o[0].status&&Wl(o),f=o[0].timescale&&Yl(o),i=o[0].timescale_year&&Jl(o),a=o[0].year_published&&Vl(o),u=o[0].year_consulted&&Ql(o);return{c(){s&&s.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=ge()},m(c,p){s&&s.m(c,p),d(c,e,p),f&&f.m(c,p),d(c,l,p),i&&i.m(c,p),d(c,t,p),a&&a.m(c,p),d(c,n,p),u&&u.m(c,p),d(c,r,p)},p(c,[p]){c[0].status?s?s.p(c,p):(s=Wl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,p):(f=Yl(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,p):(i=Jl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,p):(a=Vl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,p):(u=Ql(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:Z,o:Z,d(c){c&&(h(e),h(l),h(t),h(n),h(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function Fp(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Dr extends K{constructor(e){super(),X(this,e,Fp,Dp,Q,{props:0})}}function Zl(o){let e,l,t,n=o[0].budget.toLocaleString()+"",r,s;return{c(){e=S("p"),l=S("b"),l.textContent="Cost",t=T(`
    : `),r=T(n),s=T(`
    GBP`)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r),$(e,s)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&A(r,n)},d(f){f&&h(e)}}}function Kl(o){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Xl(o){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xl(o){let e,l,t,n;return{c(){e=S("p"),l=S("b"),l.textContent="Funding sources",t=T(`
    : `),n=T(o[1])},m(r,s){d(r,e,s),$(e,l),$(e,t),$(e,n)},p(r,s){s&2&&A(n,r[1])},d(r){r&&h(e)}}}function Gp(o){let e,l,t,n,r=o[0].budget&&Zl(o),s=o[0].development_funded&&Kl(),f=o[0].construction_funded&&Xl(),i=o[1]&&xl(o);return{c(){r&&r.c(),e=L(),s&&s.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=ge()},m(a,u){r&&r.m(a,u),d(a,e,u),s&&s.m(a,u),d(a,l,u),f&&f.m(a,u),d(a,t,u),i&&i.m(a,u),d(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=Zl(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=Kl(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=Xl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=xl(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:Z,o:Z,d(a){a&&(h(e),h(l),h(t),h(n)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function Ap(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function qp(o,e,l){let t,{props:n}=e;return o.$$set=r=>{"props"in r&&l(0,n=r.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=Ap(n))},[n,t]}class Fr extends K{constructor(e){super(),X(this,e,qp,Gp,Q,{props:0})}}function cn(o){const e=o.slice(),l=e[5].pipeline;return e[11]=l,e}function $n(o){const e=o.slice(),l=e[1].pipeline;return e[11]=l,e}function er(o){let e,l,t,n=zn(o[1].length_meters)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Length",t=T(`
        : `),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=zn(s[1].length_meters)+"")&&A(r,n)},d(s){s&&h(e)}}}function tr(o){let e,l=ft(o[1].description,o[3])+"";return{c(){e=S("p")},m(t,n){d(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=ft(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&h(e)}}}function nr(o){let e,l,t,n,r,s,f,i=o[11].atf4_type&&lr(o),a=o[11].accuracy&&rr(o),u=o[11].is_alternative&&or();return n=new Fr({props:{props:o[11]}}),s=new Dr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,p){i&&i.m(c,p),d(c,e,p),a&&a.m(c,p),d(c,l,p),u&&u.m(c,p),d(c,t,p),v(n,c,p),d(c,r,p),v(s,c,p),f=!0},p(c,p){c[11].atf4_type?i?i.p(c,p):(i=lr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].accuracy?a?a.p(c,p):(a=rr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].is_alternative?u||(u=or(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const g={};p&2&&(g.props=c[11]),n.$set(g);const b={};p&2&&(b.props=c[11]),s.$set(b)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),k(n,c),k(s,c)}}}function lr(o){let e,l,t,n=o[11].atf4_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 type",t=T(`
          : `),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].atf4_type+"")&&A(r,n)},d(s){s&&h(e)}}}function rr(o){let e,l,t,n=o[11].accuracy+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Accuracy",t=T(`
          : `),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].accuracy+"")&&A(r,n)},d(s){s&&h(e)}}}function or(o){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function sr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Capital scheme ID",t=T(`
        : `),r=T(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&A(r,n)},d(f){f&&h(e)}}}function ir(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.funding_programme)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Funding programme",t=T(`
        : `),r=T(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&A(r,n)},d(f){f&&h(e)}}}function ar(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Current milestone",t=T(`
        : `),r=T(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&A(r,n)},d(f){f&&h(e)}}}function fr(o){let e,l,t,n,r,s,f,i=o[11].scheme_type&&ur(o),a=o[11].atf4_lead_type&&cr(o),u=o[11].scheme_description&&$r(o);return n=new Fr({props:{props:o[11]}}),s=new Dr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,p){i&&i.m(c,p),d(c,e,p),a&&a.m(c,p),d(c,l,p),u&&u.m(c,p),d(c,t,p),v(n,c,p),d(c,r,p),v(s,c,p),f=!0},p(c,p){c[11].scheme_type?i?i.p(c,p):(i=ur(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].atf4_lead_type?a?a.p(c,p):(a=cr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].scheme_description?u?u.p(c,p):(u=$r(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const g={};p&32&&(g.props=c[11]),n.$set(g);const b={};p&32&&(b.props=c[11]),s.$set(b)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),k(n,c),k(s,c)}}}function ur(o){let e,l,t,n=o[11].scheme_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme type",t=T(`
          : `),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_type+"")&&A(r,n)},d(s){s&&h(e)}}}function cr(o){let e,l,t,n=o[11].atf4_lead_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 lead type",t=T(`
          : `),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].atf4_lead_type+"")&&A(r,n)},d(s){s&&h(e)}}}function $r(o){let e,l,t,n=o[11].scheme_description+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Descripton",t=T(`
          : `),r=T(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_description+"")&&A(r,n)},d(s){s&&h(e)}}}function zp(o){let e;return{c(){e=T("Edit a copy of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Hp(o){let e;return{c(){e=T("Edit your existing version of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ep(o){let e;function l(r,s){var f;return(f=r[5].browse)!=null&&f.local_filename?Hp:zp}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Bp(o){let e;return{c(){e=T("Zoom to show entire scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function pr(o){var Ln,In,Mn,On;let e,l,t,n,r,s,f,i=ft(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,p,g,b,C,y,M,j,P,N,O,I,R,D,q,J=ft(o[5].scheme_name??"",o[2])+"",fe,F,x,H,ae,Ce=ft(o[1].scheme_reference,o[2])+"",Ke,Fe,Ae,ot,st=((Ln=o[5].browse)==null?void 0:Ln.authority_or_region)+"",ht,we,Le,Be,it,at,W,en,Xe,xe,Me=o[1].length_meters&&er(o),Oe=o[1].description&&tr(o),ke=o[1].pipeline&&nr($n(o)),je=((In=o[5].browse)==null?void 0:In.capital_scheme_id)&&sr(o),Ne=((Mn=o[5].browse)==null?void 0:Mn.funding_programme)&&ir(o),Pe=((On=o[5].browse)==null?void 0:On.current_milestone)&&ar(o),ye=o[5].pipeline&&fr(cn(o));return W=new He({props:{$$slots:{default:[Ep]},$$scope:{ctx:o}}}),W.$on("click",o[7]),Xe=new He({props:{$$slots:{default:[Bp]},$$scope:{ctx:o}}}),Xe.$on("click",o[6]),{c(){e=S("div"),l=S("h2"),l.textContent="Intervention",t=L(),n=S("p"),r=S("b"),r.textContent="Name",s=T(`
      : `),f=new Ht(!1),a=T(" ("),c=T(u),p=T(")"),g=L(),Me&&Me.c(),b=L(),Oe&&Oe.c(),C=L(),ke&&ke.c(),y=L(),M=S("hr"),j=L(),P=S("h2"),N=T(o[0]),O=L(),I=S("p"),R=S("b"),R.textContent="Scheme name",D=T(`
      : `),q=new Ht(!1),fe=L(),F=S("p"),x=S("b"),x.textContent="Scheme reference",H=T(`
      : `),ae=new Ht(!1),Ke=L(),Fe=S("p"),Ae=S("b"),Ae.textContent="Authority or region",ot=T(`
      : `),ht=T(st),we=L(),je&&je.c(),Le=L(),Ne&&Ne.c(),Be=L(),Pe&&Pe.c(),it=L(),ye&&ye.c(),at=L(),w(W.$$.fragment),en=L(),w(Xe.$$.fragment),f.a=a,q.a=null,ae.a=null,re(e,"max-width","30vw"),re(e,"max-height","60vh"),re(e,"overflow","auto")},m(se,ve){d(se,e,ve),$(e,l),$(e,t),$(e,n),$(n,r),$(n,s),f.m(i,n),$(n,a),$(n,c),$(n,p),$(e,g),Me&&Me.m(e,null),$(e,b),Oe&&Oe.m(e,null),$(e,C),ke&&ke.m(e,null),$(e,y),$(e,M),$(e,j),$(e,P),$(P,N),$(e,O),$(e,I),$(I,R),$(I,D),q.m(J,I),$(e,fe),$(e,F),$(F,x),$(F,H),ae.m(Ce,F),$(e,Ke),$(e,Fe),$(Fe,Ae),$(Fe,ot),$(Fe,ht),$(e,we),je&&je.m(e,null),$(e,Le),Ne&&Ne.m(e,null),$(e,Be),Pe&&Pe.m(e,null),$(e,it),ye&&ye.m(e,null),$(e,at),v(W,e,null),$(e,en),v(Xe,e,null),o[9](e),xe=!0},p(se,ve){var Pn,Rn,Dn,Fn;(!xe||ve&10)&&i!==(i=ft(se[1].name,se[3])+"")&&f.p(i),(!xe||ve&2)&&u!==(u=se[1].intervention_type+"")&&A(c,u),se[1].length_meters?Me?Me.p(se,ve):(Me=er(se),Me.c(),Me.m(e,b)):Me&&(Me.d(1),Me=null),se[1].description?Oe?Oe.p(se,ve):(Oe=tr(se),Oe.c(),Oe.m(e,C)):Oe&&(Oe.d(1),Oe=null),se[1].pipeline?ke?(ke.p($n(se),ve),ve&2&&m(ke,1)):(ke=nr($n(se)),ke.c(),m(ke,1),ke.m(e,y)):ke&&(de(),_(ke,1,1,()=>{ke=null}),he()),(!xe||ve&1)&&A(N,se[0]),(!xe||ve&36)&&J!==(J=ft(se[5].scheme_name??"",se[2])+"")&&q.p(J),(!xe||ve&6)&&Ce!==(Ce=ft(se[1].scheme_reference,se[2])+"")&&ae.p(Ce),(!xe||ve&32)&&st!==(st=((Pn=se[5].browse)==null?void 0:Pn.authority_or_region)+"")&&A(ht,st),(Rn=se[5].browse)!=null&&Rn.capital_scheme_id?je?je.p(se,ve):(je=sr(se),je.c(),je.m(e,Le)):je&&(je.d(1),je=null),(Dn=se[5].browse)!=null&&Dn.funding_programme?Ne?Ne.p(se,ve):(Ne=ir(se),Ne.c(),Ne.m(e,Be)):Ne&&(Ne.d(1),Ne=null),(Fn=se[5].browse)!=null&&Fn.current_milestone?Pe?Pe.p(se,ve):(Pe=ar(se),Pe.c(),Pe.m(e,it)):Pe&&(Pe.d(1),Pe=null),se[5].pipeline?ye?(ye.p(cn(se),ve),ve&32&&m(ye,1)):(ye=fr(cn(se)),ye.c(),m(ye,1),ye.m(e,at)):ye&&(de(),_(ye,1,1,()=>{ye=null}),he());const jn={};ve&4128&&(jn.$$scope={dirty:ve,ctx:se}),W.$set(jn);const Nn={};ve&4096&&(Nn.$$scope={dirty:ve,ctx:se}),Xe.$set(Nn)},i(se){xe||(m(ke),m(ye),m(W.$$.fragment,se),m(Xe.$$.fragment,se),xe=!0)},o(se){_(ke),_(ye),_(W.$$.fragment,se),_(Xe.$$.fragment,se),xe=!1},d(se){se&&h(e),Me&&Me.d(),Oe&&Oe.d(),ke&&ke.d(),je&&je.d(),Ne&&Ne.d(),Pe&&Pe.d(),ye&&ye.d(),k(W),k(Xe),o[9](null)}}}function Up(o){let e=o[1],l,t,n=pr(o);return{c(){n.c(),l=ge()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,[s]){s&2&&Q(e,e=r[1])?(de(),_(n,1,1,Z),he(),n=pr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&h(l),n.d(r)}}}function ft(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function Wp(o,e,l){let t,n;Y(o,an,b=>l(10,n=b));let{description:r}=e,{props:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,u;Ur(()=>{u&&l(4,u.scrollTop=0,u)});function c(){let b={type:"FeatureCollection",features:f.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(Ir(b),{padding:20,animate:!1})}function p(){var M,j,P;let b={type:"FeatureCollection",features:f.features.filter(N=>N.properties.scheme_reference==t.scheme_reference),schemes:{}};b.schemes[t.scheme_reference]=t;let C=(M=t.browse)==null?void 0:M.authority_or_region;if(!C){window.alert("This scheme has no authority specified, you can't edit this");return}let y=t.pipeline?"pipeline":"v1";if((j=t.browse)!=null&&j.local_filename)window.open(qn(C,(P=t.browse)==null?void 0:P.local_filename,y),"_blank");else{let N=`browse_copy_${t.scheme_reference}`,O=Qr(C,b);for(let I of O.features)delete I.properties.funding_programme,delete I.properties.current_milestone;Zr(Kr(C,N),JSON.stringify(O)),window.open(qn(C,N,y),"_blank")}}function g(b){E[b?"unshift":"push"](()=>{u=b,l(4,u)})}return o.$$set=b=>{"description"in b&&l(0,r=b.description),"props"in b&&l(1,s=b.props),"schemesGj"in b&&l(8,f=b.schemesGj),"filterSchemeText"in b&&l(2,i=b.filterSchemeText),"filterInterventionText"in b&&l(3,a=b.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=f.schemes[s.scheme_reference])},[r,s,i,a,u,t,c,p,f,g]}class Cn extends K{constructor(e){super(),X(this,e,Wp,Up,Q,{description:0,props:1,schemesGj:8,filterSchemeText:2,filterInterventionText:3})}}function Yp(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Jp(o){let e,l;return e=new Cn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Vp(o){let e,l,t,n;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[Yp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Jp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function Qp(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Zp(o){let e,l;return e=new Cn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Kp(o){let e,l,t,n;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[Qp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Zp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function Xp(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=T(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function xp(o){let e,l;return e=new Cn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function em(o){let e,l,t,n;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[Xp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[xp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function tm(o){let e,l,t,n,r,s,f,i,a,u;const c=[z(`${o[0]}-interventions-points`),{filter:["all",Un,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":Hn,"circle-opacity":ee(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let p={$$slots:{default:[Vp]},$$scope:{ctx:o}};for(let O=0;O<c.length;O+=1)p=te(p,c[O]);e=new Bt({props:p});const g=[z(`${o[0]}-interventions-lines`),{filter:["all",Wn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":Vt,"line-opacity":ee(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let b={$$slots:{default:[Kp]},$$scope:{ctx:o}};for(let O=0;O<g.length;O+=1)b=te(b,g[O]);t=new _e({props:b});const C=[z(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Vt,"circle-opacity":0,"circle-stroke-color":tt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[2]?"visible":"none"}}];let y={};for(let O=0;O<C.length;O+=1)y=te(y,C[O]);r=new Bt({props:y});const M=[z(`${o[0]}-interventions-polygons`),{filter:["all",tn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":ee(.2,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let j={$$slots:{default:[em]},$$scope:{ctx:o}};for(let O=0;O<M.length;O+=1)j=te(j,M[O]);f=new Ge({props:j});const P=[z(`${o[0]}-interventions-polygons-outlines`),{filter:["all",tn,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*Vt}},{layout:{visibility:o[2]?"visible":"none"}}];let N={};for(let O=0;O<P.length;O+=1)N=te(N,P[O]);return a=new _e({props:N}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(O,I){v(e,O,I),d(O,l,I),v(t,O,I),d(O,n,I),v(r,O,I),d(O,s,I),v(f,O,I),d(O,i,I),v(a,O,I),u=!0},p(O,I){const R=I&837?ne(c,[I&1&&oe(z(`${O[0]}-interventions-points`)),I&768&&{filter:["all",Un,O[8],O[9]]},c[2],c[3],I&64&&{paint:{"circle-color":O[6],"circle-radius":Hn,"circle-opacity":ee(1,.5)}},I&4&&{layout:{visibility:O[2]?"visible":"none"}},c[6]]):{};I&2106&&(R.$$scope={dirty:I,ctx:O}),e.$set(R);const D=I&325?ne(g,[I&1&&oe(z(`${O[0]}-interventions-lines`)),I&256&&{filter:["all",Wn,O[8]]},g[2],g[3],I&64&&{paint:{"line-color":O[6],"line-width":Vt,"line-opacity":ee(1,.5)}},I&4&&{layout:{visibility:O[2]?"visible":"none"}},g[6]]):{};I&2106&&(D.$$scope={dirty:I,ctx:O}),t.$set(D);const q=I&5?ne(C,[I&1&&oe(z(`${O[0]}-interventions-lines-endpoints`)),C[1],C[2],I&4&&{layout:{visibility:O[2]?"visible":"none"}}]):{};r.$set(q);const J=I&325?ne(M,[I&1&&oe(z(`${O[0]}-interventions-polygons`)),I&256&&{filter:["all",tn,O[8]]},M[2],M[3],I&64&&{paint:{"fill-color":O[6],"fill-opacity":ee(.2,.5)}},I&4&&{layout:{visibility:O[2]?"visible":"none"}},M[6]]):{};I&2106&&(J.$$scope={dirty:I,ctx:O}),f.$set(J);const fe=I&325?ne(P,[I&1&&oe(z(`${O[0]}-interventions-polygons-outlines`)),I&256&&{filter:["all",tn,O[8]]},I&64&&{paint:{"line-color":O[6],"line-opacity":.5,"line-width":.7*Vt}},I&4&&{layout:{visibility:O[2]?"visible":"none"}}]):{};a.$set(fe)},i(O){u||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(r.$$.fragment,O),m(f.$$.fragment,O),m(a.$$.fragment,O),u=!0)},o(O){_(e.$$.fragment,O),_(t.$$.fragment,O),_(r.$$.fragment,O),_(f.$$.fragment,O),_(a.$$.fragment,O),u=!1},d(O){O&&(h(l),h(n),h(s),h(i)),k(e,O),k(t,O),k(r,O),k(f,O),k(a,O)}}}function nm(o){let e,l;return e=new Ut({props:{data:o[7],$$slots:{default:[tm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function lm(o,e,l){let t,{name:n}=e,{description:r}=e,{show:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],p=["!=",["get","endpoint"],!0];return o.$$set=g=>{"name"in g&&l(0,n=g.name),"description"in g&&l(1,r=g.description),"show"in g&&l(2,s=g.show),"schemesGj"in g&&l(3,f=g.schemesGj),"filterSchemeText"in g&&l(4,i=g.filterSchemeText),"filterInterventionText"in g&&l(5,a=g.filterInterventionText),"color"in g&&l(6,u=g.color)},o.$$.update=()=>{o.$$.dirty&8&&l(7,t=oo(f))},[n,r,s,f,i,a,u,t,c,p]}class pn extends K{constructor(e){super(),X(this,e,lm,nm,Q,{name:0,description:1,show:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function rm(o){return Ze(["get","intervention_type"],{area:tt.area,route:tt.route,crossing:tt.crossing,other:tt.other},"white")}function om(o){return[["Areas",tt.area],["Routes",tt.route],["Crossings",tt.crossing],["Other",tt.other]]}function mr(o,e,l){const t=o.slice();return t[41]=e[l],t}function _r(o,e,l){const t=o.slice();return t[41]=e[l],t}function gr(o,e,l){const t=o.slice();return t[41]=e[l],t}function sm(o){let e,l;return e=new _p({props:{loadFile:o[24]}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p:Z,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function dr(o){let e,l,t;function n(s){o[30](s)}let r={name:Gr,title:Ar,$$slots:{controls:[am],help:[im]},$$scope:{ctx:o}};return o[12]!==void 0&&(r.show=o[12]),e=new ue({props:r}),E.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f[0]&57473|f[1]&131072&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&4096&&(l=!0,i.show=s[12],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function hr(o){let e,l,t=o[41]+"",n;return{c(){e=S("li"),l=S("p"),n=T(t)},m(r,s){d(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&8192&&t!==(t=r[41]+"")&&A(n,t)},d(r){r&&h(e)}}}function im(o){let e,l,t,n,r,s,f;t=new kn({props:{text:"Scheme data caveats"}});let i=me(o[13].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=hr(gr(o,i,u));return{c(){e=S("span"),l=S("p"),w(t.$$.fragment),n=T(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),v(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&8192){i=me(u[13].notes??[]);let p;for(p=0;p<i.length;p+=1){const g=gr(u,i,p);a[p]?a[p].p(g,c):(a[p]=hr(g),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&h(e),k(t),ze(a,u)}}}function am(o){let e,l,t,n,r,s,f,i,a,u,c;function p(j){o[26](j)}function g(j){o[27](j)}function b(j){o[28](j)}let C={source:"ATF"};o[13]!==void 0&&(C.schemesGj=o[13]),o[14]!==void 0&&(C.filterSchemeText=o[14]),o[15]!==void 0&&(C.filterInterventionText=o[15]),l=new Tn({props:C}),E.push(()=>B(l,"schemesGj",p)),E.push(()=>B(l,"filterSchemeText",g)),E.push(()=>B(l,"filterInterventionText",b));function y(j){o[29](j)}let M={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(M.value=o[0]),f=new Et({props:M}),E.push(()=>B(f,"value",y)),u=new Jt({props:{rows:o[7]}}),{c(){e=S("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(j,P){d(j,e,P),v(l,e,null),$(e,s),v(f,e,null),$(e,a),v(u,e,null),c=!0},p(j,P){const N={};!t&&P[0]&8192&&(t=!0,N.schemesGj=j[13],U(()=>t=!1)),!n&&P[0]&16384&&(n=!0,N.filterSchemeText=j[14],U(()=>n=!1)),!r&&P[0]&32768&&(r=!0,N.filterInterventionText=j[15],U(()=>r=!1)),l.$set(N);const O={};!i&&P[0]&1&&(i=!0,O.value=j[0],U(()=>i=!1)),f.$set(O);const I={};P[0]&128&&(I.rows=j[7]),u.$set(I)},i(j){c||(m(l.$$.fragment,j),m(f.$$.fragment,j),m(u.$$.fragment,j),c=!0)},o(j){_(l.$$.fragment,j),_(f.$$.fragment,j),_(u.$$.fragment,j),c=!1},d(j){j&&h(e),k(l),k(f),k(u)}}}function br(o){let e,l,t;function n(s){o[35](s)}let r={name:qr,title:zr,$$slots:{controls:[um],help:[fm]},$$scope:{ctx:o}};return o[11]!==void 0&&(r.show=o[11]),e=new ue({props:r}),E.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f[0]&458786|f[1]&131072&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&2048&&(l=!0,i.show=s[11],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function wr(o){let e,l,t=o[41]+"",n;return{c(){e=S("li"),l=S("p"),n=T(t)},m(r,s){d(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&65536&&t!==(t=r[41]+"")&&A(n,t)},d(r){r&&h(e)}}}function fm(o){let e,l,t,n,r,s,f;t=new kn({props:{text:"Scheme data caveats"}});let i=me(o[16].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=wr(_r(o,i,u));return{c(){e=S("span"),l=S("p"),w(t.$$.fragment),n=T(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),v(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&65536){i=me(u[16].notes??[]);let p;for(p=0;p<i.length;p+=1){const g=_r(u,i,p);a[p]?a[p].p(g,c):(a[p]=wr(g),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&h(e),k(t),ze(a,u)}}}function um(o){let e,l,t,n,r,s,f,i,a,u,c;function p(j){o[31](j)}function g(j){o[32](j)}function b(j){o[33](j)}let C={source:"LCWIP"};o[16]!==void 0&&(C.schemesGj=o[16]),o[17]!==void 0&&(C.filterSchemeText=o[17]),o[18]!==void 0&&(C.filterInterventionText=o[18]),l=new Tn({props:C}),E.push(()=>B(l,"schemesGj",p)),E.push(()=>B(l,"filterSchemeText",g)),E.push(()=>B(l,"filterInterventionText",b));function y(j){o[34](j)}let M={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(M.value=o[1]),f=new Et({props:M}),E.push(()=>B(f,"value",y)),u=new Jt({props:{rows:o[5]}}),{c(){e=S("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(j,P){d(j,e,P),v(l,e,null),$(e,s),v(f,e,null),$(e,a),v(u,e,null),c=!0},p(j,P){const N={};!t&&P[0]&65536&&(t=!0,N.schemesGj=j[16],U(()=>t=!1)),!n&&P[0]&131072&&(n=!0,N.filterSchemeText=j[17],U(()=>n=!1)),!r&&P[0]&262144&&(r=!0,N.filterInterventionText=j[18],U(()=>r=!1)),l.$set(N);const O={};!i&&P[0]&2&&(i=!0,O.value=j[1],U(()=>i=!1)),f.$set(O);const I={};P[0]&32&&(I.rows=j[5]),u.$set(I)},i(j){c||(m(l.$$.fragment,j),m(f.$$.fragment,j),m(u.$$.fragment,j),c=!0)},o(j){_(l.$$.fragment,j),_(f.$$.fragment,j),_(u.$$.fragment,j),c=!1},d(j){j&&h(e),k(l),k(f),k(u)}}}function cm(o){let e=Object.entries(o[13].schemes).length>0,l,t=Object.entries(o[16].schemes).length>0,n,r,s=e&&dr(o),f=t&&br(o);return{c(){s&&s.c(),l=L(),f&&f.c(),n=ge()},m(i,a){s&&s.m(i,a),d(i,l,a),f&&f.m(i,a),d(i,n,a),r=!0},p(i,a){a[0]&8192&&(e=Object.entries(i[13].schemes).length>0),e?s?(s.p(i,a),a[0]&8192&&m(s,1)):(s=dr(i),s.c(),m(s,1),s.m(l.parentNode,l)):s&&(de(),_(s,1,1,()=>{s=null}),he()),a[0]&65536&&(t=Object.entries(i[16].schemes).length>0),t?f?(f.p(i,a),a[0]&65536&&m(f,1)):(f=br(i),f.c(),m(f,1),f.m(n.parentNode,n)):f&&(de(),_(f,1,1,()=>{f=null}),he())},i(i){r||(m(s),m(f),r=!0)},o(i){_(s),_(f),r=!1},d(i){i&&(h(l),h(n)),s&&s.d(i),f&&f.d(i)}}}function $m(o){let e;return{c(){e=T("Show your sketches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function vr(o){let e,l,t;function n(s){o[39](s)}let r={name:Hr,title:Er,$$slots:{controls:[mm],help:[pm]},$$scope:{ctx:o}};return o[9]!==void 0&&(r.show=o[9]),e=new ue({props:r}),E.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f[0]&1573896|f[1]&131072&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&512&&(l=!0,i.show=s[9],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function kr(o){let e,l,t=o[41]+"",n;return{c(){e=S("li"),l=S("p"),n=T(t)},m(r,s){d(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&1024&&t!==(t=r[41]+"")&&A(n,t)},d(r){r&&h(e)}}}function pm(o){let e,l,t,n,r,s,f;t=new kn({props:{text:"Scheme data caveats"}});let i=me(o[10].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=kr(mr(o,i,u));return{c(){e=S("span"),l=S("p"),w(t.$$.fragment),n=T(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),v(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&1024){i=me(u[10].notes??[]);let p;for(p=0;p<i.length;p+=1){const g=mr(u,i,p);a[p]?a[p].p(g,c):(a[p]=kr(g),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&h(e),k(t),ze(a,u)}}}function mm(o){let e,l,t,n,r,s,f,i;function a(g){o[36](g)}function u(g){o[37](g)}function c(g){o[38](g)}let p={source:"Local"};return o[10]!==void 0&&(p.schemesGj=o[10]),o[19]!==void 0&&(p.filterSchemeText=o[19]),o[20]!==void 0&&(p.filterInterventionText=o[20]),l=new Tn({props:p}),E.push(()=>B(l,"schemesGj",a)),E.push(()=>B(l,"filterSchemeText",u)),E.push(()=>B(l,"filterInterventionText",c)),f=new Jt({props:{rows:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(g,b){d(g,e,b),v(l,e,null),$(e,s),v(f,e,null),i=!0},p(g,b){const C={};!t&&b[0]&1024&&(t=!0,C.schemesGj=g[10],U(()=>t=!1)),!n&&b[0]&524288&&(n=!0,C.filterSchemeText=g[19],U(()=>n=!1)),!r&&b[0]&1048576&&(r=!0,C.filterInterventionText=g[20],U(()=>r=!1)),l.$set(C);const y={};b[0]&8&&(y.rows=g[3]),f.$set(y)},i(g){i||(m(l.$$.fragment,g),m(f.$$.fragment,g),i=!0)},o(g){_(l.$$.fragment,g),_(f.$$.fragment,g),i=!1},d(g){g&&h(e),k(l),k(f)}}}function _m(o){let e=Object.entries(o[10].schemes).length>0,l,t,n=e&&vr(o);return{c(){n&&n.c(),l=ge()},m(r,s){n&&n.m(r,s),d(r,l,s),t=!0},p(r,s){s[0]&1024&&(e=Object.entries(r[10].schemes).length>0),e?n?(n.p(r,s),s[0]&1024&&m(n,1)):(n=vr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n&&(de(),_(n,1,1,()=>{n=null}),he())},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&h(l),n&&n.d(r)}}}function gm(o){let e=Lr()=="Private (development)",l,t,n,r,s,f,i,a,u,c,p,g,b,C=e&&sm(o);return t=new Re({props:{small:!0,$$slots:{default:[cm]},$$scope:{ctx:o}}}),r=new Xr({props:{label:"Load schemes from GeoJSON",onLoad:o[24]}}),f=new xr({props:{errorMessage:o[2]}}),c=new He({props:{$$slots:{default:[$m]},$$scope:{ctx:o}}}),c.$on("click",o[25]),g=new Re({props:{small:!0,$$slots:{default:[_m]},$$scope:{ctx:o}}}),{c(){C&&C.c(),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),a=S("hr"),u=L(),w(c.$$.fragment),p=L(),w(g.$$.fragment)},m(y,M){C&&C.m(y,M),d(y,l,M),v(t,y,M),d(y,n,M),v(r,y,M),d(y,s,M),v(f,y,M),d(y,i,M),d(y,a,M),d(y,u,M),v(c,y,M),d(y,p,M),v(g,y,M),b=!0},p(y,M){e&&C.p(y,M);const j={};M[0]&522403|M[1]&131072&&(j.$$scope={dirty:M,ctx:y}),t.$set(j);const P={};M[0]&4&&(P.errorMessage=y[2]),f.$set(P);const N={};M[1]&131072&&(N.$$scope={dirty:M,ctx:y}),c.$set(N);const O={};M[0]&1574408|M[1]&131072&&(O.$$scope={dirty:M,ctx:y}),g.$set(O)},i(y){b||(m(C),m(t.$$.fragment,y),m(r.$$.fragment,y),m(f.$$.fragment,y),m(c.$$.fragment,y),m(g.$$.fragment,y),b=!0)},o(y){_(C),_(t.$$.fragment,y),_(r.$$.fragment,y),_(f.$$.fragment,y),_(c.$$.fragment,y),_(g.$$.fragment,y),b=!1},d(y){y&&(h(l),h(n),h(s),h(i),h(a),h(u),h(p)),C&&C.d(y),k(t,y),k(r,y),k(f,y),k(c,y),k(g,y)}}}function dm(o){let e,l,t,n,r,s,f,i;return e=new lt({props:{label:"Schemes",open:!0,$$slots:{default:[gm]},$$scope:{ctx:o}}}),t=new pn({props:{name:"atf",description:Ar,show:o[12],schemesGj:o[13],filterSchemeText:o[14],filterInterventionText:o[15],color:o[8]}}),r=new pn({props:{name:"lcwip",description:zr,show:o[11],schemesGj:o[16],filterSchemeText:o[17],filterInterventionText:o[18],color:o[6]}}),f=new pn({props:{name:"local",description:Er,show:o[9],schemesGj:o[10],filterSchemeText:o[19],filterInterventionText:o[20],color:o[4]}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),d(a,n,u),v(r,a,u),d(a,s,u),v(f,a,u),i=!0},p(a,u){const c={};u[0]&2096815|u[1]&131072&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p={};u[0]&4096&&(p.show=a[12]),u[0]&8192&&(p.schemesGj=a[13]),u[0]&16384&&(p.filterSchemeText=a[14]),u[0]&32768&&(p.filterInterventionText=a[15]),u[0]&256&&(p.color=a[8]),t.$set(p);const g={};u[0]&2048&&(g.show=a[11]),u[0]&65536&&(g.schemesGj=a[16]),u[0]&131072&&(g.filterSchemeText=a[17]),u[0]&262144&&(g.filterInterventionText=a[18]),u[0]&64&&(g.color=a[6]),r.$set(g);const b={};u[0]&512&&(b.show=a[9]),u[0]&1024&&(b.schemesGj=a[10]),u[0]&524288&&(b.filterSchemeText=a[19]),u[0]&1048576&&(b.filterInterventionText=a[20]),u[0]&16&&(b.color=a[4]),f.$set(b)},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),k(e,a),k(t,a),k(r,a),k(f,a)}}}let Gr="atf_schemes",Ar="ATF schemes",qr="lcwip_schemes",zr="LCWIP schemes",Hr="local_schemes",Er="Your schemes";function hm(o,e,l){let t,n,r,s,f,i,a,u,c,p,g,b,C,y,M,j,P,N;Y(o,un,W=>l(10,u=W)),Y(o,nn,W=>l(13,g=W)),Y(o,zl,W=>l(14,b=W)),Y(o,ql,W=>l(15,C=W)),Y(o,fn,W=>l(16,y=W)),Y(o,El,W=>l(17,M=W)),Y(o,Hl,W=>l(18,j=W)),Y(o,Ul,W=>l(19,P=W)),Y(o,Bl,W=>l(20,N=W));let O="",I=pe(Gr);Y(o,I,W=>l(12,p=W));let R="fundingProgramme",D=pe(qr);Y(o,D,W=>l(11,c=W));let q="interventionType",J=pe(Hr);Y(o,J,W=>l(9,a=W));function fe(W,en){try{gp(JSON.parse(en),nn,fn),ut(I,p=!0,p),ut(D,c=!0,c),l(2,O="")}catch(Xe){l(2,O=`The file you loaded is broken: ${Xe}`)}}function F(){ut(un,u=hp(),u),ut(J,a=!0,a)}function x(W){return W=="interventionType"?[rm(),om()]:W=="fundingProgramme"?[Ze(["get","funding_programme"],Yt,"grey"),Object.entries(Yt)]:W=="currentMilestone"?[Ze(["get","current_milestone"],hn,"grey"),Object.entries(hn)]:["red",[]]}function H(W){g=W,nn.set(g)}function ae(W){b=W,zl.set(b)}function Ce(W){C=W,ql.set(C)}function Ke(W){R=W,l(0,R)}function Fe(W){p=W,I.set(p)}function Ae(W){y=W,fn.set(y)}function ot(W){M=W,El.set(M)}function st(W){j=W,Hl.set(j)}function ht(W){q=W,l(1,q)}function we(W){c=W,D.set(c)}function Le(W){u=W,un.set(u)}function Be(W){P=W,Ul.set(P)}function it(W){N=W,Bl.set(N)}function at(W){a=W,J.set(a)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(8,[t,n]=x(R),t,(l(7,n),l(0,R))),o.$$.dirty[0]&2&&l(6,[r,s]=x(q),r,(l(5,s),l(1,q)))},l(4,[f,i]=x("interventionType"),f,l(3,i)),[R,q,O,i,f,s,r,n,t,a,u,c,p,g,b,C,y,M,j,P,N,I,D,J,fe,F,H,ae,Ce,Ke,Fe,Ae,ot,st,ht,we,Le,Be,it,at]}class bm extends K{constructor(e){super(),X(this,e,hm,dm,Q,{},null,[-1,-1])}}const yr=Ie(!0);let bn=Ie(null);function wm(o){let e,l,t,n,r,s,f,i;return e=new Bc({}),t=new xc({}),r=new v$({}),f=new u$({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),d(a,n,u),v(r,a,u),d(a,s,u),v(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),k(e,a),k(t,a),k(r,a),k(f,a)}}}function vm(o){let e,l;return e=new Re({props:{small:!0,$$slots:{default:[wm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function km(o){let e,l,t,n,r,s,f,i,a,u,c,p,g,b;return e=new rf({}),t=new Df({}),r=new _f({}),f=new Tf({}),a=new Mc({}),c=new ac({}),g=new ba({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment),u=L(),w(c.$$.fragment),p=L(),w(g.$$.fragment)},m(C,y){v(e,C,y),d(C,l,y),v(t,C,y),d(C,n,y),v(r,C,y),d(C,s,y),v(f,C,y),d(C,i,y),v(a,C,y),d(C,u,y),v(c,C,y),d(C,p,y),v(g,C,y),b=!0},i(C){b||(m(e.$$.fragment,C),m(t.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C),m(a.$$.fragment,C),m(c.$$.fragment,C),m(g.$$.fragment,C),b=!0)},o(C){_(e.$$.fragment,C),_(t.$$.fragment,C),_(r.$$.fragment,C),_(f.$$.fragment,C),_(a.$$.fragment,C),_(c.$$.fragment,C),_(g.$$.fragment,C),b=!1},d(C){C&&(h(l),h(n),h(s),h(i),h(u),h(p)),k(e,C),k(t,C),k(r,C),k(f,C),k(a,C),k(c,C),k(g,C)}}}function ym(o){let e,l;return e=new Re({props:{small:!0,$$slots:{default:[km]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Sm(o){let e,l,t,n,r,s;return e=new Ua({}),t=new Hu({}),r=new Ku({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){v(e,f,i),d(f,l,i),v(t,f,i),d(f,n,i),v(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n)),k(e,f),k(t,f),k(r,f)}}}function Tm(o){let e,l;return e=new Re({props:{small:!0,$$slots:{default:[Sm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Cm(o){let e,l,t,n,r,s,f,i,a,u;return e=new zi({}),t=new Oa({}),r=new Js({}),f=new _i({}),a=new Mi({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,p){v(e,c,p),d(c,l,p),v(t,c,p),d(c,n,p),v(r,c,p),d(c,s,p),v(f,c,p),d(c,i,p),v(a,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(s),h(i)),k(e,c),k(t,c),k(r,c),k(f,c),k(a,c)}}}function Lm(o){let e,l;return e=new Re({props:{small:!0,$$slots:{default:[Cm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Im(o){let e,l,t,n;return e=new Fs({}),t=new ri({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){v(e,r,s),d(r,l,s),v(t,r,s),n=!0},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&h(l),k(e,r),k(t,r)}}}function Mm(o){let e,l;return e=new Re({props:{small:!0,$$slots:{default:[Im]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Om(o){let e,l,t,n,r,s,f,i;return e=new Pu({}),t=new Vf({}),r=new yu({}),f=new ip({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){v(e,a,u),d(a,l,u),v(t,a,u),d(a,n,u),v(r,a,u),d(a,s,u),v(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),k(e,a),k(t,a),k(r,a),k(f,a)}}}function jm(o){let e,l,t,n,r,s,f,i,a=Lr()=="Private (development)",u,c,p,g,b;e=new K$({}),t=new q$({}),r=new uu({}),f=new hc({});let C=a&&Om();return c=new Zi({}),g=new sa({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),C&&C.c(),u=L(),w(c.$$.fragment),p=L(),w(g.$$.fragment)},m(y,M){v(e,y,M),d(y,l,M),v(t,y,M),d(y,n,M),v(r,y,M),d(y,s,M),v(f,y,M),d(y,i,M),C&&C.m(y,M),d(y,u,M),v(c,y,M),d(y,p,M),v(g,y,M),b=!0},p:Z,i(y){b||(m(e.$$.fragment,y),m(t.$$.fragment,y),m(r.$$.fragment,y),m(f.$$.fragment,y),m(C),m(c.$$.fragment,y),m(g.$$.fragment,y),b=!0)},o(y){_(e.$$.fragment,y),_(t.$$.fragment,y),_(r.$$.fragment,y),_(f.$$.fragment,y),_(C),_(c.$$.fragment,y),_(g.$$.fragment,y),b=!1},d(y){y&&(h(l),h(n),h(s),h(i),h(u),h(p)),k(e,y),k(t,y),k(r,y),k(f,y),C&&C.d(y),k(c,y),k(g,y)}}}function Nm(o){let e,l;return e=new Re({props:{small:!0,$$slots:{default:[jm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Pm(o){let e,l,t,n,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new io({props:f}),E.push(()=>B(e,"enabled",s)),n=new Yo({}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){v(e,i,a),d(i,t,a),v(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],U(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&h(t),k(e,i),k(n,i)}}}function Rm(o){let e,l;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=te(n,t[r]);return e=new Ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){v(e,r,s),l=!0},p(r,s){const f=s&2?ne(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){k(e,r)}}}function Dm(o){let e,l,t,n,r,s,f,i,a,u,c,p,g,b,C,y,M,j,P,N,O;return l=new bm({}),n=new lt({props:{label:"Trip generators",$$slots:{default:[vm]},$$scope:{ctx:o}}}),s=new lt({props:{label:"Existing infrastructure",$$slots:{default:[ym]},$$scope:{ctx:o}}}),i=new lt({props:{label:"Public transport",$$slots:{default:[Tm]},$$scope:{ctx:o}}}),u=new lt({props:{label:"Boundaries",$$slots:{default:[Lm]},$$scope:{ctx:o}}}),p=new lt({props:{label:"Census",$$slots:{default:[Mm]},$$scope:{ctx:o}}}),b=new lt({props:{label:"Other",$$slots:{default:[Nm]},$$scope:{ctx:o}}}),y=new lt({props:{label:"Tools",$$slots:{default:[Pm]},$$scope:{ctx:o}}}),j=new so({props:{disabled:!o[1]}}),N=new Ut({props:{data:o[4],$$slots:{default:[Rm]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment),f=L(),w(i.$$.fragment),a=L(),w(u.$$.fragment),c=L(),w(p.$$.fragment),g=L(),w(b.$$.fragment),C=L(),w(y.$$.fragment),M=L(),w(j.$$.fragment),P=L(),w(N.$$.fragment)},m(I,R){d(I,e,R),v(l,e,null),$(e,t),v(n,e,null),$(e,r),v(s,e,null),$(e,f),v(i,e,null),$(e,a),v(u,e,null),$(e,c),v(p,e,null),$(e,g),v(b,e,null),$(e,C),v(y,e,null),$(e,M),v(j,e,null),o[7](e),d(I,P,R),v(N,I,R),O=!0},p(I,[R]){const D={};R&256&&(D.$$scope={dirty:R,ctx:I}),n.$set(D);const q={};R&256&&(q.$$scope={dirty:R,ctx:I}),s.$set(q);const J={};R&256&&(J.$$scope={dirty:R,ctx:I}),i.$set(J);const fe={};R&256&&(fe.$$scope={dirty:R,ctx:I}),u.$set(fe);const F={};R&256&&(F.$$scope={dirty:R,ctx:I}),p.$set(F);const x={};R&256&&(x.$$scope={dirty:R,ctx:I}),b.$set(x);const H={};R&265&&(H.$$scope={dirty:R,ctx:I}),y.$set(H);const ae={};R&2&&(ae.disabled=!I[1]),j.$set(ae);const Ce={};R&258&&(Ce.$$scope={dirty:R,ctx:I}),N.$set(Ce)},i(I){O||(m(l.$$.fragment,I),m(n.$$.fragment,I),m(s.$$.fragment,I),m(i.$$.fragment,I),m(u.$$.fragment,I),m(p.$$.fragment,I),m(b.$$.fragment,I),m(y.$$.fragment,I),m(j.$$.fragment,I),m(N.$$.fragment,I),O=!0)},o(I){_(l.$$.fragment,I),_(n.$$.fragment,I),_(s.$$.fragment,I),_(i.$$.fragment,I),_(u.$$.fragment,I),_(p.$$.fragment,I),_(b.$$.fragment,I),_(y.$$.fragment,I),_(j.$$.fragment,I),_(N.$$.fragment,I),O=!1},d(I){I&&(h(e),h(P)),k(l),k(n),k(s),k(i),k(u),k(p),k(b),k(y),k(j),o[7](null),k(N,I)}}}function Fm(o,e,l){let t,n,r,s;Y(o,yr,c=>l(1,n=c)),Y(o,bn,c=>l(2,r=c)),Y(o,an,c=>l(3,s=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>to(c,Wr(mn))};function a(c){t=c,l(0,t),l(1,n)}function u(c){E[c?"unshift":"push"](()=>{r=c,bn.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&yr.set(!t)},[t,n,r,s,f,i,a,u]}class Gm extends K{constructor(e){super(),X(this,e,Fm,Dm,Q,{})}}function Am(o){let e,l,t;return{c(){e=S("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=S("div")},m(n,r){d(n,e,r),d(n,l,r),d(n,t,r),o[3](t)},p:Z,i:Z,o:Z,d(n){n&&(h(e),h(l),h(t)),o[3](null)}}}function qm(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function zm(o,e,l){let t,n;Y(o,dn,f=>l(1,t=f)),Y(o,Qt,f=>l(2,n=f));let r=null;function s(f){E[f?"unshift":"push"](()=>{r=f,l(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&qm(r,n,t)},[r,t,n,s]}class Hm extends K{constructor(e){super(),X(this,e,zm,Am,Q,{})}}function Em(o){let e,l,t,n,r,s,f,i,a,u,c,p,g,b,C;return l=new bo({}),n=new mo({}),f=new _o({}),p=new Ko({props:{boundaryGeojson:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),s=S("div"),w(f.$$.fragment),i=L(),a=S("div"),u=S("h1"),u.textContent="Scheme Browser",c=L(),w(p.$$.fragment),g=L(),b=S("div"),re(s,"border-bottom","1px solid #b1b4b6"),re(a,"display","flex"),re(a,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(y,M){d(y,e,M),v(l,e,null),$(e,t),v(n,e,null),$(e,r),$(e,s),v(f,s,null),$(e,i),$(e,a),$(a,u),$(a,c),v(p,a,null),$(e,g),$(e,b),o[6](b),C=!0},p(y,M){const j={};M&8&&(j.boundaryGeojson=y[3]),p.$set(j)},i(y){C||(m(l.$$.fragment,y),m(n.$$.fragment,y),m(f.$$.fragment,y),m(p.$$.fragment,y),C=!0)},o(y){_(l.$$.fragment,y),_(n.$$.fragment,y),_(f.$$.fragment,y),_(p.$$.fragment,y),C=!1},d(y){y&&h(e),k(l),k(n),k(f),k(p),o[6](null)}}}function Sr(o){let e,l;return e=new Gm({}),{c(){w(e.$$.fragment)},m(t,n){v(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Bm(o){let e,l,t,n;e=new ao({});let r=o[2]&&Sr();return{c(){w(e.$$.fragment),l=L(),r&&r.c(),t=ge()},m(s,f){v(e,s,f),d(s,l,f),r&&r.m(s,f),d(s,t,f),n=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=Sr(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(de(),_(r,1,1,()=>{r=null}),he())},i(s){n||(m(e.$$.fragment,s),m(r),n=!0)},o(s){_(e.$$.fragment,s),_(r),n=!1},d(s){s&&(h(l),h(t)),k(e,s),r&&r.d(s)}}}function Um(o){let e,l,t;return l=new go({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Bm]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),G(e,"slot","main")},m(n,r){d(n,e,r),v(l,e,null),t=!0},p(n,r){const s={};r&2&&(s.style=n[1]),r&260&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&h(e),k(l)}}}function Wm(o){let e,l,t,n,r;return e=new Co({props:{$$slots:{main:[Um],sidebar:[Em]},$$scope:{ctx:o}}}),n=new Hm({}),{c(){w(e.$$.fragment),l=L(),t=S("div"),w(n.$$.fragment),G(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){v(e,s,f),d(s,l,f),d(s,t,f),v(n,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(e.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&(h(l),h(t)),k(e,s),k(n)}}}function Ym(o,e,l){let t,n,r,s,f;Y(o,bn,c=>l(4,t=c)),Y(o,an,c=>l(5,n=c)),Y(o,mn,c=>l(1,r=c)),Y(o,En,c=>l(2,s=c)),Y(o,nn,c=>l(3,f=c)),Cr(()=>{Yr()});const i=new URLSearchParams(window.location.search);mn.set(i.get("style")||"dataviz");let a;function u(c){E[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&En.set(n),o.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,n,u]}class Jm extends K{constructor(e){super(),X(this,e,Ym,Wm,Q,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Jm({target:document.getElementById("app")});
