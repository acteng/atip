var Ae=Object.defineProperty;var Se=(h,d,p)=>d in h?Ae(h,d,{enumerable:!0,configurable:!0,writable:!0,value:p}):h[d]=p;var ne=(h,d,p)=>(Se(h,typeof d!="symbol"?d+"":d,p),p);(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h=Symbol("Comlink.proxy"),d=Symbol("Comlink.endpoint"),p=Symbol("Comlink.releaseProxy"),z=Symbol("Comlink.finalizer"),P=Symbol("Comlink.thrown"),G=e=>typeof e=="object"&&e!==null||typeof e=="function",te={canHandle:e=>G(e)&&e[h],serialize(e){const{port1:n,port2:t}=new MessageChannel;return B(e,n),[t,[t]]},deserialize(e){return e.start(),se(e)}},re={canHandle:e=>G(e)&&P in e,serialize({value:e}){let n;return e instanceof Error?n={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:n={isError:!1,value:e},[n,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},Y=new Map([["proxy",te],["throw",re]]);function oe(e,n){for(const t of e)if(n===t||t==="*"||t instanceof RegExp&&t.test(n))return!0;return!1}function B(e,n=globalThis,t=["*"]){n.addEventListener("message",function r(o){if(!o||!o.data)return;if(!oe(t,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}const{id:c,type:i,path:u}=Object.assign({path:[]},o.data),f=(o.data.argumentList||[]).map(E);let g;try{const _=u.slice(0,-1).reduce((w,L)=>w[L],e),m=u.reduce((w,L)=>w[L],e);switch(i){case"GET":g=m;break;case"SET":_[u.slice(-1)[0]]=E(o.data.value),g=!0;break;case"APPLY":g=m.apply(_,f);break;case"CONSTRUCT":{const w=new m(...f);g=_e(w)}break;case"ENDPOINT":{const{port1:w,port2:L}=new MessageChannel;B(e,L),g=fe(w,[w])}break;case"RELEASE":g=void 0;break;default:return}}catch(_){g={value:_,[P]:0}}Promise.resolve(g).catch(_=>({value:_,[P]:0})).then(_=>{const[m,w]=W(_);n.postMessage(Object.assign(Object.assign({},m),{id:c}),w),i==="RELEASE"&&(n.removeEventListener("message",r),J(n),z in e&&typeof e[z]=="function"&&e[z]())}).catch(_=>{const[m,w]=W({value:new TypeError("Unserializable return value"),[P]:0});n.postMessage(Object.assign(Object.assign({},m),{id:c}),w)})}),n.start&&n.start()}function ie(e){return e.constructor.name==="MessagePort"}function J(e){ie(e)&&e.close()}function se(e,n){return D(e,[],n)}function F(e){if(e)throw new Error("Proxy has been released and is not useable")}function X(e){return S(e,{type:"RELEASE"}).then(()=>{J(e)})}const C=new WeakMap,N="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const n=(C.get(e)||0)-1;C.set(e,n),n===0&&X(e)});function ce(e,n){const t=(C.get(n)||0)+1;C.set(n,t),N&&N.register(e,n,e)}function ae(e){N&&N.unregister(e)}function D(e,n=[],t=function(){}){let r=!1;const o=new Proxy(t,{get(c,i){if(F(r),i===p)return()=>{ae(o),X(e),r=!0};if(i==="then"){if(n.length===0)return{then:()=>o};const u=S(e,{type:"GET",path:n.map(f=>f.toString())}).then(E);return u.then.bind(u)}return D(e,[...n,i])},set(c,i,u){F(r);const[f,g]=W(u);return S(e,{type:"SET",path:[...n,i].map(_=>_.toString()),value:f},g).then(E)},apply(c,i,u){F(r);const f=n[n.length-1];if(f===d)return S(e,{type:"ENDPOINT"}).then(E);if(f==="bind")return D(e,n.slice(0,-1));const[g,_]=K(u);return S(e,{type:"APPLY",path:n.map(m=>m.toString()),argumentList:g},_).then(E)},construct(c,i){F(r);const[u,f]=K(i);return S(e,{type:"CONSTRUCT",path:n.map(g=>g.toString()),argumentList:u},f).then(E)}});return ce(o,e),o}function ue(e){return Array.prototype.concat.apply([],e)}function K(e){const n=e.map(W);return[n.map(t=>t[0]),ue(n.map(t=>t[1]))]}const Q=new WeakMap;function fe(e,n){return Q.set(e,n),e}function _e(e){return Object.assign(e,{[h]:!0})}function W(e){for(const[n,t]of Y)if(t.canHandle(e)){const[r,o]=t.serialize(e);return[{type:"HANDLER",name:n,value:r},o]}return[{type:"RAW",value:e},Q.get(e)||[]]}function E(e){switch(e.type){case"HANDLER":return Y.get(e.name).deserialize(e.value);case"RAW":return e.value}}function S(e,n,t){return new Promise(r=>{const o=le();e.addEventListener("message",function c(i){!i.data||!i.data.id||i.data.id!==o||(e.removeEventListener("message",c),r(i.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:o},n),t)})}function le(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}let a;const Z=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Z.decode();let x=null;function R(){return(x===null||x.byteLength===0)&&(x=new Uint8Array(a.memory.buffer)),x}function k(e,n){return e=e>>>0,Z.decode(R().subarray(e,e+n))}const y=new Array(128).fill(void 0);y.push(void 0,null,!0,!1);let M=y.length;function l(e){M===y.length&&y.push(y.length+1);const n=M;return M=y[n],y[n]=e,n}function s(e){return y[e]}let A=0;const U=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ge=typeof U.encodeInto=="function"?function(e,n){return U.encodeInto(e,n)}:function(e,n){const t=U.encode(e);return n.set(t),{read:e.length,written:t.length}};function $(e,n,t){if(t===void 0){const u=U.encode(e),f=n(u.length)>>>0;return R().subarray(f,f+u.length).set(u),A=u.length,f}let r=e.length,o=n(r)>>>0;const c=R();let i=0;for(;i<r;i++){const u=e.charCodeAt(i);if(u>127)break;c[o+i]=u}if(i!==r){i!==0&&(e=e.slice(i)),o=t(o,r,r=i+e.length*3)>>>0;const u=R().subarray(o+i,o+r),f=ge(e,u);i+=f.written}return A=i,o}function T(e){return e==null}let O=null;function b(){return(O===null||O.byteLength===0)&&(O=new Int32Array(a.memory.buffer)),O}function be(e){e<132||(y[e]=M,M=e)}function H(e){const n=s(e);return be(e),n}let I=null;function we(){return(I===null||I.byteLength===0)&&(I=new Float64Array(a.memory.buffer)),I}let j=null;function de(){return(j===null||j.byteLength===0)&&(j=new BigInt64Array(a.memory.buffer)),j}function V(e){const n=typeof e;if(n=="number"||n=="boolean"||e==null)return`${e}`;if(n=="string")return`"${e}"`;if(n=="symbol"){const o=e.description;return o==null?"Symbol":`Symbol(${o})`}if(n=="function"){const o=e.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(e)){const o=e.length;let c="[";o>0&&(c+=V(e[0]));for(let i=1;i<o;i++)c+=", "+V(e[i]);return c+="]",c}const t=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(t.length>1)r=t[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}function ye(e,n){const t=n(e.length*1)>>>0;return R().set(e,t/1),A=e.length,t}function q(e,n){try{return e.apply(this,n)}catch(t){a.__wbindgen_exn_store(l(t))}}let v=class{static __wrap(n){n=n>>>0;const t=Object.create(v.prototype);return t.__wbg_ptr=n,t}__destroy_into_raw(){const n=this.__wbg_ptr;return this.__wbg_ptr=0,n}free(){const n=this.__destroy_into_raw();a.__wbg_routeinfo_free(n)}constructor(n){try{const c=a.__wbindgen_add_to_stack_pointer(-16),i=ye(n,a.__wbindgen_malloc),u=A;a.routeinfo_new(c,i,u);var t=b()[c/4+0],r=b()[c/4+1],o=b()[c/4+2];if(o)throw H(r);return v.__wrap(t)}finally{a.__wbindgen_add_to_stack_pointer(16)}}nameForRoute(n){let t,r;try{const _=a.__wbindgen_add_to_stack_pointer(-16);a.routeinfo_nameForRoute(_,this.__wbg_ptr,l(n));var o=b()[_/4+0],c=b()[_/4+1],i=b()[_/4+2],u=b()[_/4+3],f=o,g=c;if(u)throw f=0,g=0,H(i);return t=f,r=g,k(f,g)}finally{a.__wbindgen_add_to_stack_pointer(16),a.__wbindgen_free(t,r)}}};async function me(e,n){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,n)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}else{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}function he(){const e={};return e.wbg={},e.wbg.__wbindgen_string_new=function(n,t){const r=k(n,t);return l(r)},e.wbg.__wbindgen_string_get=function(n,t){const r=s(t),o=typeof r=="string"?r:void 0;var c=T(o)?0:$(o,a.__wbindgen_malloc,a.__wbindgen_realloc),i=A;b()[n/4+1]=i,b()[n/4+0]=c},e.wbg.__wbindgen_object_drop_ref=function(n){H(n)},e.wbg.__wbindgen_error_new=function(n,t){const r=new Error(k(n,t));return l(r)},e.wbg.__wbindgen_boolean_get=function(n){const t=s(n);return typeof t=="boolean"?t?1:0:2},e.wbg.__wbindgen_is_bigint=function(n){return typeof s(n)=="bigint"},e.wbg.__wbindgen_bigint_from_i64=function(n){return l(n)},e.wbg.__wbindgen_jsval_eq=function(n,t){return s(n)===s(t)},e.wbg.__wbindgen_number_get=function(n,t){const r=s(t),o=typeof r=="number"?r:void 0;we()[n/8+1]=T(o)?0:o,b()[n/4+0]=!T(o)},e.wbg.__wbindgen_is_object=function(n){const t=s(n);return typeof t=="object"&&t!==null},e.wbg.__wbindgen_in=function(n,t){return s(n)in s(t)},e.wbg.__wbindgen_bigint_from_u64=function(n){const t=BigInt.asUintN(64,n);return l(t)},e.wbg.__wbindgen_jsval_loose_eq=function(n,t){return s(n)==s(t)},e.wbg.__wbg_new_abda76e883ba8a5f=function(){const n=new Error;return l(n)},e.wbg.__wbg_stack_658279fe44541cf6=function(n,t){const r=s(t).stack,o=$(r,a.__wbindgen_malloc,a.__wbindgen_realloc),c=A;b()[n/4+1]=c,b()[n/4+0]=o},e.wbg.__wbg_error_f851667af71bcfc6=function(n,t){let r,o;try{r=n,o=t,console.error(k(n,t))}finally{a.__wbindgen_free(r,o)}},e.wbg.__wbg_log_003c998d6df63565=function(n){console.log(s(n))},e.wbg.__wbg_get_e52aaca45f37b337=function(n,t){const r=s(n)[t>>>0];return l(r)},e.wbg.__wbg_length_070e3265c186df02=function(n){return s(n).length},e.wbg.__wbindgen_is_function=function(n){return typeof s(n)=="function"},e.wbg.__wbg_next_3975dcca26737a22=function(n){const t=s(n).next;return l(t)},e.wbg.__wbg_next_5a9700550e162aa3=function(){return q(function(n){const t=s(n).next();return l(t)},arguments)},e.wbg.__wbg_done_a184612220756243=function(n){return s(n).done},e.wbg.__wbg_value_6cc144c1d9645dd5=function(n){const t=s(n).value;return l(t)},e.wbg.__wbg_iterator_c1677479667ea090=function(){return l(Symbol.iterator)},e.wbg.__wbg_get_363c3b466fe4896b=function(){return q(function(n,t){const r=Reflect.get(s(n),s(t));return l(r)},arguments)},e.wbg.__wbg_call_f96b398515635514=function(){return q(function(n,t){const r=s(n).call(s(t));return l(r)},arguments)},e.wbg.__wbg_isArray_07d89ced8fb14171=function(n){return Array.isArray(s(n))},e.wbg.__wbg_instanceof_ArrayBuffer_de688b806c28ff28=function(n){let t;try{t=s(n)instanceof ArrayBuffer}catch{t=!1}return t},e.wbg.__wbg_isSafeInteger_fcdf4c4f25c86778=function(n){return Number.isSafeInteger(s(n))},e.wbg.__wbg_entries_c3e06bf0354f5d20=function(n){const t=Object.entries(s(n));return l(t)},e.wbg.__wbg_buffer_fcbfb6d88b2732e9=function(n){const t=s(n).buffer;return l(t)},e.wbg.__wbg_new_bc5d9aad3f9ac80e=function(n){const t=new Uint8Array(s(n));return l(t)},e.wbg.__wbg_set_4b3aa8445ac1e91c=function(n,t,r){s(n).set(s(t),r>>>0)},e.wbg.__wbg_length_d9c4ded7e708c6a1=function(n){return s(n).length},e.wbg.__wbg_instanceof_Uint8Array_4733577ba827276b=function(n){let t;try{t=s(n)instanceof Uint8Array}catch{t=!1}return t},e.wbg.__wbindgen_bigint_get_as_i64=function(n,t){const r=s(t),o=typeof r=="bigint"?r:void 0;de()[n/8+1]=T(o)?BigInt(0):o,b()[n/4+0]=!T(o)},e.wbg.__wbindgen_debug_string=function(n,t){const r=V(s(t)),o=$(r,a.__wbindgen_malloc,a.__wbindgen_realloc),c=A;b()[n/4+1]=c,b()[n/4+0]=o},e.wbg.__wbindgen_throw=function(n,t){throw new Error(k(n,t))},e.wbg.__wbindgen_memory=function(){const n=a.memory;return l(n)},e}function pe(e,n){return a=e.exports,ee.__wbindgen_wasm_module=n,j=null,I=null,O=null,x=null,a}async function ee(e){if(a!==void 0)return a;typeof e>"u"&&(e="/atip/assets/route_info_bg.wasm");const n=he();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:t,module:r}=await me(await e,n);return pe(t,r)}class Ee{constructor(){ne(this,"inner");this.inner=null}async loadFile(n){await ee(),console.log(`Grabbing A/B Street map model data from ${n}`);let r=await(await fetch(n)).arrayBuffer();this.inner=new v(new Uint8Array(r)),console.log("RouteInfo is ready!")}nameForRoute(n){if(!this.inner)throw new Error("Need to loadFile before using RouteInfo");return this.inner.nameForRoute(n)}}B(Ee)})();
