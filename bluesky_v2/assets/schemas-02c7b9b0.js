import{S as m,i as h,s as _,e as v,h as S,ao as P,j as y,x as k,p as $,g as C,m as x,t as d,n as g,q as I,az as j,y as A,o as R,aA as T,d as E,u as W,k as b,I as F,a as J,N as L,C as G,ax as M,D as Q,T as Y,P as H,Z as D,Y as N,Q as K,a1 as U,a0 as V,$ as O,ap as Z}from"./index-8a931a8e.js";import{C as X,a as ee,l as w,c}from"./StreetViewController-b319f81a.js";function te(s){let e;return{c(){e=v("span"),S(e,"class","svelte-kzgqtg"),P(e,"background",s[0])},m(o,t){y(o,e,t)},p(o,[t]){t&1&&P(e,"background",o[0])},i:k,o:k,d(o){o&&$(e)}}}function ne(s,e,o){let{color:t}=e;return s.$$set=n=>{"color"in n&&o(0,t=n.color)},[t]}class oe extends m{constructor(e){super(),h(this,e,ne,te,_,{color:0})}}function q(s,e,o){const t=s.slice();return t[1]=e[o][0],t[2]=e[o][1],t}function B(s){let e,o,t,n=s[1]+"",i,a,l;return o=new oe({props:{color:s[2]}}),{c(){e=v("li"),C(o.$$.fragment),t=E(),i=W(n),a=E()},m(r,u){y(r,e,u),x(o,e,null),b(e,t),b(e,i),b(e,a),l=!0},p(r,u){const p={};u&1&&(p.color=r[2]),o.$set(p),(!l||u&1)&&n!==(n=r[1]+"")&&F(i,n)},i(r){l||(d(o.$$.fragment,r),l=!0)},o(r){g(o.$$.fragment,r),l=!1},d(r){r&&$(e),I(o)}}}function re(s){let e,o,t=j(s[0]),n=[];for(let a=0;a<t.length;a+=1)n[a]=B(q(s,t,a));const i=a=>g(n[a],1,1,()=>{n[a]=null});return{c(){e=v("ul");for(let a=0;a<n.length;a+=1)n[a].c()},m(a,l){y(a,e,l);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);o=!0},p(a,l){if(l&1){t=j(a[0]);let r;for(r=0;r<t.length;r+=1){const u=q(a,t,r);n[r]?(n[r].p(u,l),d(n[r],1)):(n[r]=B(u),n[r].c(),d(n[r],1),n[r].m(e,null))}for(A(),r=t.length;r<n.length;r+=1)i(r);R()}},i(a){if(!o){for(let l=0;l<t.length;l+=1)d(n[l]);o=!0}},o(a){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)g(n[l]);o=!1},d(a){a&&$(e),T(n,a)}}}function se(s){let e,o;return e=new X({props:{label:"Legend",$$slots:{default:[re]},$$scope:{ctx:s}}}),{c(){C(e.$$.fragment)},m(t,n){x(e,t,n),o=!0},p(t,[n]){const i={};n&33&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){o||(d(e.$$.fragment,t),o=!0)},o(t){g(e.$$.fragment,t),o=!1},d(t){I(e,t)}}}function ae(s,e,o){let{rows:t}=e;return s.$$set=n=>{"rows"in n&&o(0,t=n.rows)},[t]}class ge extends m{constructor(e){super(),h(this,e,ae,se,_,{rows:0})}}const ie="/atip/bluesky_v2/assets/zoom_out_map-b2e1091a.svg";function le(s){let e,o;return{c(){e=v("img"),M(e.src,o=ie)||S(e,"src",o),S(e,"alt","Zoom to show entire boundary")},m(t,n){y(t,e,n)},p:k,d(t){t&&$(e)}}}function ce(s){let e,o;return e=new J({props:{title:"Zoom to show entire boundary",$$slots:{default:[le]},$$scope:{ctx:s}}}),e.$on("click",s[0]),{c(){C(e.$$.fragment)},m(t,n){x(e,t,n),o=!0},p(t,[n]){const i={};n&8&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){o||(d(e.$$.fragment,t),o=!0)},o(t){g(e.$$.fragment,t),o=!1},d(t){I(e,t)}}}function ue(s,e,o){let t;L(s,G,a=>o(2,t=a));let{boundaryGeojson:n}=e;function i(){t.fitBounds(Q(n),{padding:20,animate:!0,duration:500})}return s.$$set=a=>{"boundaryGeojson"in a&&o(1,n=a.boundaryGeojson)},[i,n]}class me extends m{constructor(e){super(),h(this,e,ue,ce,_,{boundaryGeojson:1})}}let f="interventions";function pe(s,e,o){let t,n;L(s,G,r=>o(1,t=r)),L(s,Y,r=>o(2,n=r));let{colorInterventions:i}=e;H(t,f,n);const a=["!=","hide_while_editing",!0];return D(t,{id:"interventions-points",source:f,filter:["all",U,a,["!=","endpoint",!0]],color:i,radius:ee}),N(t,{id:"interventions-lines",source:f,filter:["all",V,a],color:i,width:w}),D(t,{id:"interventions-lines-endpoints",source:f,filter:["==","endpoint",!0],radius:.5*w,opacity:0,strokeColor:c.lineEndpointColor,strokeWidth:2}),K(t,{id:"interventions-polygons",source:f,filter:["all",O,a],color:i,opacity:.2}),N(t,{id:"interventions-polygon-outlines",source:f,filter:["all",O,a],color:i,opacity:.5,width:.7*w}),s.$$set=r=>{"colorInterventions"in r&&o(0,i=r.colorInterventions)},s.$$.update=()=>{if(s.$$.dirty&6){let r=JSON.parse(JSON.stringify(n)),u=[];for(let p of r.features)if(p.geometry.type=="LineString"&&!p.properties.hide_while_editing)for(let z of[p.geometry.coordinates[0],p.geometry.coordinates[p.geometry.coordinates.length-1]])u.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:z}});r.features=r.features.concat(u),t.getSource(f).setData(r)}},[i,t,n]}class he extends m{constructor(e){super(),h(this,e,pe,null,_,{colorInterventions:0})}}function _e(s){return{v1:"Scheme Design",v2:"Experimental Scheme Design",planning:"Development Planning",criticals:"Critical Issues",atf4:"ATF4 Scheme"}[s]}function ve(s){return{v1:"an intervention",v2:"an intervention",planning:"a development",criticals:"a critical issue",atf4:"an intervention"}[s]}function ye(s){return{v1:"interventions",v2:"interventions",planning:"developments",criticals:"critical issues",atf4:"interventions"}[s]}function $e(s){return s=="planning"?Z(["get","reference_type",["get","planning"]],{preapp:c.preapp,outline:c.outline,"reserved matters":c["reserved matters"],"local plan":c["local plan"]},"black"):Z(["get","intervention_type"],{area:c.area,route:c.route,crossing:c.crossing,other:c.other},"white")}function be(s){return s=="planning"?[["Preapp",c.preapp],["Outline",c.outline],["Reserved matters",c["reserved matters"]],["Local plan",c["local plan"]]]:[["Areas",c.area],["Routes",c.route],["Crossings",c.crossing],["Other",c.other]]}export{oe as C,he as I,ge as L,me as Z,ye as a,_e as b,$e as c,be as d,ve as s};
