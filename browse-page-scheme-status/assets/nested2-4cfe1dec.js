import{S as W,i as V,s as G,e as A,h as q,$ as be,j as $,W as ee,o as p,aP as Kr,b as Z,c as Q,d as C,g as h,m as b,w as yt,l as x,t as m,n as g,p as v,X as It,Y as Pt,Z as Mt,_ as Et,a7 as De,J as ae,K as fe,aQ as St,u as w,k,D as U,I as ke,N as an,O as kr,q as ue,P as yr,Q as Sr,T as Ot,U as Or,V as Tr,aX as Zr,aY as lt,a4 as hn,aZ as Jr,f as fn,aO as Yr,ar as un,aj as Vt,ae as cn,r as $n,F as Cr,a as en,v as zt,aW as X,a_ as ce,a$ as me,B as K,ah as J,C as $e,ak as Y,b0 as re,G as Nt,H as Qr,aS as xr,ab as bn,R as Ar,b1 as pn,b2 as mn,E as Lr,as as el,ag as tl,aU as vn,al as nl,am as wn,an as kn,ao as Rt,aV as yn,L as rl,M as ll,y as ol}from"./index-136a6862.js";import{C as Te,d as He,j as Tt,f as Dt,h as se,l as B,c as Gt,k as sl,S as il,B as al,b as vt,G as fl}from"./StreetViewTool-c447e809.js";import{a as ze,F as ul}from"./Popup-b25289ce.js";import{P as le}from"./Popup-883dcbf6.js";import{R as cl,C as Xe,Z as $l}from"./ZoomOutMap-930fd7e7.js";import{L as pl,a as ml}from"./LineMeasureController-d5170cc7.js";function _l(r){let e;return{c(){e=A("span"),q(e,"class","svelte-kzgqtg"),be(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&be(e,"background",n[0])},i:ee,o:ee,d(n){n&&p(e)}}}function gl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class _e extends W{constructor(e){super(),V(this,e,gl,_l,G,{color:0})}}const dl="/atip/browse-page-scheme-status/assets/help-d011708a.svg";function hl(r){let e,n;const t=r[1].default,l=It(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),q(e,"class","govuk-prose")},m(o,i){$(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Pt(l,t,o,o[4],n?Et(t,o[4],i,null):Mt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){g(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function bl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[hl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Kr({props:a}),Z.push(()=>Q(t,"open",s)),{c(){e=A("button"),e.innerHTML=`<img src="${dl}" title="Help" alt="Help"/>`,n=C(),h(t.$$.fragment),q(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,i||(u=yt(e,"click",r[2]),i=!0)},p(f,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,d.open=f[0],x(()=>l=!1)),t.$set(d)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){g(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),i=!1,u()}}}function vl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class ie extends W{constructor(e){super(),V(this,e,vl,bl,G,{})}}function Sn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function On(r){let e,n,t,l=r[1]+"",o,i,u;return n=new _e({props:{color:r[2]}}),{c(){e=A("li"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){$(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p(s,a){const f={};a&1&&(f.color=s[2]),n.$set(f),(!u||a&1)&&l!==(l=s[1]+"")&&U(o,l)},i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){g(n.$$.fragment,s),u=!1},d(s){s&&p(e),v(n)}}}function wl(r){let e,n,t=De(r[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=On(Sn(r,t,i));const o=i=>g(l[i],1,1,()=>{l[i]=null});return{c(){e=A("ul");for(let i=0;i<l.length;i+=1)l[i].c()},m(i,u){$(i,e,u);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);n=!0},p(i,u){if(u&1){t=De(i[0]);let s;for(s=0;s<t.length;s+=1){const a=Sn(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=On(a),l[s].c(),m(l[s],1),l[s].m(e,null))}for(ae(),s=t.length;s<l.length;s+=1)o(s);fe()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(i){i&&p(e),St(l,i)}}}function kl(r){let e,n;return e=new Te({props:{label:"Legend",$$slots:{default:[wl]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class Sl extends W{constructor(e){super(),V(this,e,yl,kl,G,{rows:0})}}function Tn(r){let e=r[0],n,t,l=Cn(r);return{c(){l.c(),n=ke()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&G(e,e=o[0])?(ae(),g(l,1,1,ee),fe(),l=Cn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Cn(r){let e;const n=r[10].default,t=It(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Pt(t,n,l,l[9],e?Et(n,l[9],o,null):Mt(l[9]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Ol(r){let e,n,t=r[0]&&Tn(r);return{c(){t&&t.c(),e=ke()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Tn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ae(),g(t,1,1,()=>{t=null}),fe())},i(l){n||(m(t),n=!0)},o(l){g(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Tl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=an("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=kr();ue(r,f,y=>n(8,l=y)),ue(r,c,y=>n(0,t=y));let d,_=!0;return yr(()=>{t&&d&&l&&(Sr(f,t,d),Ot(c,t=null,t),n(6,d=void 0))}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,s=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,i=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Ot(c,t=u,t),Or(l,t,Tr({type:"raster",tiles:s,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,d=l==null?void 0:l.getSource(t)),n(7,_=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,d=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&d&&(_?n(7,_=!1):d.setTiles(s))},[t,f,c,u,s,a,d,_,l,i,o]}class Cl extends W{constructor(e){super(),V(this,e,Tl,Ol,G,{id:3,tiles:4,tileSize:5})}}function Al(r){let e;const n=r[16].default,t=It(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Pt(t,n,l,l[24],e?Et(n,l[24],o,null):Mt(l[24]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Ll(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Al]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Zr({props:o}),Z.push(()=>Q(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Il(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=an("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:d=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:O=!1}=e,{hovered:E=null}=e,{eventsIfTopMost:F=!1}=e,{interactive:D=!0}=e;function I(j){E=j,n(0,E)}function N(j){lt.call(this,r,j)}function M(j){lt.call(this,r,j)}function L(j){lt.call(this,r,j)}function P(j){lt.call(this,r,j)}function R(j){lt.call(this,r,j)}function z(j){lt.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,i=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,s=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,d=j.filter),"applyToClusters"in j&&n(9,_=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,S=j.maxzoom),"hoverCursor"in j&&n(12,T=j.hoverCursor),"manageHoverState"in j&&n(13,O=j.manageHoverState),"hovered"in j&&n(0,E=j.hovered),"eventsIfTopMost"in j&&n(14,F=j.eventsIfTopMost),"interactive"in j&&n(15,D=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[E,o,i,u,s,a,f,c,d,_,y,S,T,O,F,D,t,I,N,M,L,P,R,z,l]}class Pl extends W{constructor(e){super(),V(this,e,Il,Ll,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function An(r){let e=r[0],n,t,l=Ln(r);return{c(){l.c(),n=ke()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&G(e,e=o[0])?(ae(),g(l,1,1,ee),fe(),l=Ln(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Ln(r){let e;const n=r[9].default,t=It(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Pt(t,n,l,l[8],e?Et(n,l[8],o,null):Mt(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Ml(r){let e,n,t=r[0]&&An(r);return{c(){t&&t.c(),e=ke()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=An(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ae(),g(t,1,1,()=>{t=null}),fe())},i(l){n||(m(t),n=!0)},o(l){g(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function El(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=an("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!hn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Jr;hn.addProtocol("pmtiles",y.tile)}const{map:c,self:d}=kr();ue(r,c,y=>n(7,l=y)),ue(r,d,y=>n(0,t=y));let _;return yr(()=>{t&&l&&(Sr(c,t,_),Ot(d,t=null,t),_=void 0)}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,s=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,i=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Ot(d,t=u,t),Or(l,t,Tr({type:"vector",url:s,tiles:a,promoteId:f}),y=>l&&y===t,()=>{t&&(_=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{_=l==null?void 0:l.getSource(u)}))},[t,c,d,u,s,a,f,l,i,o]}class pe extends W{constructor(e){super(),V(this,e,El,Ml,G,{id:3,url:4,tiles:5,promoteId:6})}}function Nl(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Dl(r){let e,n,t=r[0]=="Private (development)"&&Nl();return{c(){t&&t.c(),e=C(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),$(l,e,o),$(l,n,o)},p:ee,d(l){l&&(p(e),p(n)),t&&t.d(l)}}}function Fl(r){let e,n,t,l,o,i;return o=new ie({props:{$$slots:{default:[Dl]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=C(),h(o.$$.fragment)},m(u,s){$(u,e,s),k(e,n),k(e,t),k(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(m(o.$$.fragment,u),i=!0)},o(u){g(o.$$.fragment,u),i=!1},d(u){u&&p(e),v(o)}}}function jl(r){return[fn()]}class Rl extends W{constructor(e){super(),V(this,e,jl,Fl,G,{})}}const Bl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var de=Uint8Array,Qe=Uint16Array,Ir=Uint32Array,Pr=new de([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mr=new de([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Hl=new de([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Er=function(r,e){for(var n=new Qe(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Ir(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Nr=Er(Pr,2),Dr=Nr[0],Ul=Nr[1];Dr[28]=258,Ul[258]=28;var zl=Er(Mr,0),Gl=zl[0],tn=new Qe(32768);for(var oe=0;oe<32768;++oe){var We=(oe&43690)>>>1|(oe&21845)<<1;We=(We&52428)>>>2|(We&13107)<<2,We=(We&61680)>>>4|(We&3855)<<4,tn[oe]=((We&65280)>>>8|(We&255)<<8)>>>1}var kt=function(r,e,n){for(var t=r.length,l=0,o=new Qe(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Qe(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Qe(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)u[tn[c]>>>s]=a}else for(u=new Qe(t),l=0;l<t;++l)r[l]&&(u[l]=tn[i[r[l]-1]++]>>>15-r[l]);return u},Ft=new de(288);for(var oe=0;oe<144;++oe)Ft[oe]=8;for(var oe=144;oe<256;++oe)Ft[oe]=9;for(var oe=256;oe<280;++oe)Ft[oe]=7;for(var oe=280;oe<288;++oe)Ft[oe]=8;var Fr=new de(32);for(var oe=0;oe<32;++oe)Fr[oe]=5;var ql=kt(Ft,9,1),Wl=kt(Fr,5,1),Xt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Se=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Kt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Vl=function(r){return(r+7)/8|0},_n=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Qe:r.BYTES_PER_ELEMENT==4?Ir:de)(n-e);return t.set(r.subarray(e,n)),t},Xl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Oe=function(r,e,n){var t=new Error(e||Xl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Oe),!n)throw t;return t},Kl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new de(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new de(t*3));var i=function(nt){var Je=e.length;if(nt>Je){var rt=new de(Math.max(Je*2,nt));rt.set(e),e=rt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,d=n.m,_=n.n,y=t*8;do{if(!f){u=Se(r,s,1);var S=Se(r,s+1,3);if(s+=3,S)if(S==1)f=ql,c=Wl,d=9,_=5;else if(S==2){var F=Se(r,s,31)+257,D=Se(r,s+10,15)+4,I=F+Se(r,s+5,31)+1;s+=14;for(var N=new de(I),M=new de(19),L=0;L<D;++L)M[Hl[L]]=Se(r,s+L*3,7);s+=D*3;for(var P=Xt(M),R=(1<<P)-1,z=kt(M,P,1),L=0;L<I;){var j=z[Se(r,s,R)];s+=j&15;var T=j>>>4;if(T<16)N[L++]=T;else{var H=0,te=0;for(T==16?(te=3+Se(r,s,3),s+=2,H=N[L-1]):T==17?(te=3+Se(r,s,7),s+=3):T==18&&(te=11+Se(r,s,127),s+=7);te--;)N[L++]=H}}var ye=N.subarray(0,F),ve=N.subarray(F);d=Xt(ye),_=Xt(ve),f=kt(ye,d,1),c=kt(ve,_,1)}else Oe(1);else{var T=Vl(s)+4,O=r[T-4]|r[T-3]<<8,E=T+O;if(E>t){o&&Oe(0);break}l&&i(a+O),e.set(r.subarray(T,E),a),n.b=a+=O,n.p=s=E*8,n.f=u;continue}if(s>y){o&&Oe(0);break}}l&&i(a+131072);for(var et=(1<<d)-1,dt=(1<<_)-1,tt=s;;tt=s){var H=f[Kt(r,s)&et],ge=H>>>4;if(s+=H&15,s>y){o&&Oe(0);break}if(H||Oe(2),ge<256)e[a++]=ge;else if(ge==256){tt=s,f=null;break}else{var ht=ge-254;if(ge>264){var L=ge-257,Re=Pr[L];ht=Se(r,s,(1<<Re)-1)+Dr[L],s+=Re}var qe=c[Kt(r,s)&dt],Ze=qe>>>4;qe||Oe(3),s+=qe&15;var ve=Gl[Ze];if(Ze>3){var Re=Mr[Ze];ve+=Kt(r,s)&(1<<Re)-1,s+=Re}if(s>y){o&&Oe(0);break}l&&i(a+131072);for(var bt=a+ht;a<bt;a+=4)e[a]=e[a-ve],e[a+1]=e[a+1-ve],e[a+2]=e[a+2-ve],e[a+3]=e[a+3-ve];a=bt}}n.l=f,n.p=tt,n.b=a,n.f=u,f&&(u=1,n.m=d,n.d=c,n.n=_)}while(!u);return a==e.length?e:_n(e,0,a)},Zl=new de(0),Ne=function(r,e){return r[e]|r[e+1]<<8},Ce=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Zt=function(r,e){return Ce(r,e)+Ce(r,e+4)*4294967296};function Jl(r,e){return Kl(r,e)}var nn=typeof TextDecoder<"u"&&new TextDecoder,Yl=0;try{nn.decode(Zl,{stream:!0}),Yl=1}catch{}var Ql=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,_n(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function jr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(nn)return nn.decode(r);var l=Ql(r),o=l[0],i=l[1];return i.length&&Oe(8),o}}var xl=function(r,e){return e+30+Ne(r,e+26)+Ne(r,e+28)},eo=function(r,e,n){var t=Ne(r,e+28),l=jr(r.subarray(e+46,e+46+t),!(Ne(r,e+8)&2048)),o=e+46+t,i=Ce(r,e+20),u=n&&i==4294967295?to(r,o):[i,Ce(r,e+24),Ce(r,e+42)],s=u[0],a=u[1],f=u[2];return[Ne(r,e+10),s,a,l,o+Ne(r,e+30)+Ne(r,e+32),f]},to=function(r,e){for(;Ne(r,e)!=1;e+=4+Ne(r,e+2));return[Zt(r,e+12),Zt(r,e+4),Zt(r,e+20)]};function no(r,e){for(var n={},t=r.length-22;Ce(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Oe(13);var l=Ne(r,t+8);if(!l)return{};var o=Ce(r,t+16),i=o==4294967295||l==65535;if(i){var u=Ce(r,t-12);i=Ce(r,u)==101075792,i&&(l=Ce(r,u+32),o=Ce(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=eo(r,o,i),c=f[0],d=f[1],_=f[2],y=f[3],S=f[4],T=f[5],O=xl(r,T);o=S,(!s||s({name:y,size:d,originalSize:_,compression:c}))&&(c?c==8?n[y]=Jl(r.subarray(O,O+d),new de(_)):Oe(14,"unknown compression type "+c):n[y]=_n(r,O,O+d))}return n}function ro(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Jt):Jt(r)}function Jt(r){var e=new Uint8Array(r),n=no(e);return Promise.resolve(lo(n))}function lo(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=jr(r[l])}return e}function Fe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&xe(t)===e)return t;n++}}function jt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&xe(l)===e&&n.push(l),t++}return n}function qt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&xe(l)===e&&n(l,t):n(l,t),t++}}function oo(r,e,n){var t=[];return qt(r,e,function(l,o){t.push(n(l,o))}),t}var so=/.+\:/;function xe(r){return r.tagName.replace(so,"")}function Rr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+xe(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Rr(r.childNodes[t]),t++;return e+="</"+xe(r)+">",e}function io(r){var e=r.documentElement,n=Fe(e,"sheetData"),t=[];return qt(n,"row",function(l){qt(l,"c",function(o){t.push(o)})}),t}function ao(r,e){return Fe(e,"v")}function fo(r,e){if(e.firstChild&&xe(e.firstChild)==="is"&&e.firstChild.firstChild&&xe(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function uo(r){var e=r.documentElement,n=Fe(e,"dimension");if(n)return n.getAttribute("ref")}function co(r){var e=r.documentElement,n=Fe(e,"cellStyleXfs");return n?jt(n,"xf"):[]}function $o(r){var e=r.documentElement,n=Fe(e,"cellXfs");return n?jt(n,"xf"):[]}function po(r){var e=r.documentElement,n=Fe(e,"numFmts");return n?jt(n,"numFmt"):[]}function mo(r){var e=r.documentElement;return oo(e,"si",function(n){var t=Fe(n,"t");if(t)return t.textContent;var l="";return qt(n,"r",function(o){l+=Fe(o,"t").textContent}),l})}function _o(r){var e=r.documentElement;return Fe(e,"workbookPr")}function go(r){var e=r.documentElement;return jt(e,"Relationship")}function ho(r){var e=r.documentElement,n=Fe(e,"sheets");return jt(n,"sheet")}function bo(r,e){var n=e.createDocument(r),t={},l=_o(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return ho(n).forEach(o),t}function vo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Yt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Yt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Yt(u);break}};return go(n).forEach(l),t}function Yt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function In(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Pn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?In(Object(n),!0).forEach(function(t){wo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function wo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ko(r,e){if(!r)return{};var n=e.createDocument(r),t=co(n).map(Qt),l=po(n).map(yo).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Pn(Pn({},t[u.xfId]),Qt(u,l)):Qt(u,l)};return $o(n).map(o)}function yo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Qt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function So(r,e){return r?mo(e.createDocument(r)):[]}function Br(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Oo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=To(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function To(r,e){if(r){if(typeof r=="string")return Mn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(r,e)}}function Mn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Co(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Ao.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&Po(l.numberFormat.template))return!0}}var Ao=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Lo=/^\[\$-414\]/,Io=/;@$/;function Po(r){r=r.toLowerCase(),r=r.replace(Lo,""),r=r.replace(Io,"");for(var e=r.split(/\W+/),n=Oo(e),t;!(t=n()).done;){var l=t.value;if(Mo.indexOf(l)<0)return!1}return!0}var Mo=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Eo(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=xt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=xt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=xt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=No(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var d=Number(r);if(isNaN(d))throw new Error('Invalid "numeric" cell value: '.concat(r));r=d,Co(r,o(),i,a)&&(r=Br(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function No(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function xt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Do=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Fo(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function jo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Do.indexOf(r[n]),n++;return e}function Hr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),jo(r[0].trim())]}function Ro(r,e,n,t,l,o,i){var u=Hr(r.getAttribute("r")),s=ao(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:Eo(a,f,{getInlineStringValue:function(){return fo(e,r)},getInlineStringXml:function(){return Rr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function Bo(r,e,n,t,l,o){var i=io(r);return i.length===0?[]:i.map(function(u){return Ro(u,r,e,n,t,l,o)})}function Ho(r,e){return qo(r)||Go(r,e)||zo(r,e)||Uo()}function Uo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zo(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Go(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function qo(r){if(Array.isArray(r))return r}function Wo(r){var e=uo(r);if(e)return e=e.split(":").map(Hr).map(function(n){var t=Ho(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Vo(r,e,n,t,l,o){var i=e.createDocument(r),u=Bo(i,e,n,t,l,o),s=Wo(i)||Fo(u);return{cells:u,dimensions:s}}function Xo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ko(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ko(r,e){if(r){if(typeof r=="string")return Nn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(r,e)}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Zo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=Xo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Jo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Yo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yo(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Qo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Jo(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function xo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ur(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function es(r,e){return rs(r)||ns(r,e)||Ur(r,e)||ts()}function ts(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ur(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ns(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function rs(r){if(Array.isArray(r))return r}function ls(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=es(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=xo(t),d;!(d=c()).done;){var _=d.value,y=_.row-1,S=_.column-1;S<i&&y<u&&(s[y][S]=_.value)}var T=e.rowMap;if(T)for(var O=0;O<s.length;)T[O]=O,O++;return s=Zo(Qo(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(s=e.transformData(s)),s}function os(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ss(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ss(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Rn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function is(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(t){as(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function as(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function fs(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=is({sheet:1},n));var t=function(d){if(!r[d])throw new Error('"'.concat(d,'" file not found inside the *.xlsx file zip archive'));return r[d]},l=vo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?So(t(l.sharedStrings),e):[],i=l.styles?ko(t(l.styles),e):{},u=bo(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var d=c.name;return{name:d}});var s=us(n.sheet,u.sheets);if(!s||!l.sheets[s])throw cs(n.sheet,u.sheets);var a=Vo(t(l.sheets[s]),e,o,i,u,n),f=ls(a,n);return n.properties?{data:f,properties:u}:f}function us(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=os(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function cs(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function rn(r){"@babel/helpers - typeof";return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(r)}function Bn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function $s(r,e,n){return e&&Bn(r.prototype,e),n&&Bn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function ps(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ms(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ct(r,e)}function _s(r){var e=zr();return function(){var t=At(r),l;if(e){var o=At(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return gs(this,l)}}function gs(r,e){if(e&&(rn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ds(r)}function ds(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ln(r){var e=typeof Map=="function"?new Map:void 0;return ln=function(t){if(t===null||!hs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Ht(t,arguments,At(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ct(l,t)},ln(r)}function Ht(r,e,n){return zr()?Ht=Reflect.construct:Ht=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Ct(a,i.prototype),a},Ht.apply(null,arguments)}function zr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function hs(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ct(r,e){return Ct=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Ct(r,e)}function At(r){return At=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},At(r)}var he=function(r){ms(n,r);var e=_s(n);function n(t){var l;return ps(this,n),l=e.call(this,"invalid"),l.reason=t,l}return $s(n)}(ln(Error));function bs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new he("not_a_number")}if(typeof r!="number")throw new he("not_a_number");if(isNaN(r))throw new he("invalid_number");if(!isFinite(r))throw new he("out_of_bounds");return r}function vs(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new he("invalid_number");if(!isFinite(r))throw new he("out_of_bounds");return String(r)}throw new he("not_a_string")}function ws(r){if(typeof r=="boolean")return r;throw new he("not_a_boolean")}function ks(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new he("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new he("invalid_number");if(!isFinite(r))throw new he("out_of_bounds");var t=Br(r,n);if(isNaN(t.valueOf()))throw new he("out_of_bounds");return t}throw new he("not_a_date")}function ys(r,e){return Ts(r)||Os(r,e)||Gr(r,e)||Ss()}function Ss(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Os(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ts(r){if(Array.isArray(r))return r}function on(r){"@babel/helpers - typeof";return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(r)}function Cs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Gr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gr(r,e){if(r){if(typeof r=="string")return Hn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hn(r,e)}}function Hn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Un(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function zn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Un(Object(n),!0).forEach(function(t){As(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function As(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Gn={isColumnOriented:!1};function Ls(r,e,n){n?n=zn(zn({},Gn),n):n=Gn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;Es(e),l&&(r=Ms(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=qr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var d=Cs(a),_;!(_=d()).done;){var y=_.value;y.row=o[y.row-1]+1}return{rows:s,errors:a}}function qr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var d=f[a],_=r[d],y=on(_.type)==="object"&&!Array.isArray(_.type),S=e[t.indexOf(d)];S===void 0&&(S=null);var T=void 0,O=void 0,E=void 0;if(y)T=qr(_.type,e,n,t,l,o);else if(S===null)T=null;else if(Array.isArray(_.type)){var F=!1,D=Ps(S).map(function(N){var M=qn(N,_,o);return M.error&&(T=N,O=M.error,E=M.reason),M.value!==null&&(F=!0),M.value});O||(T=F?D:null)}else{var I=qn(S,_,o);O=I.error,E=I.reason,T=O?S:I.value}!O&&T===null&&_.required&&(O="required"),O?(O={error:O,row:n+1,column:d,value:T},E&&(O.reason=E),_.type&&(O.type=_.type),l.push(O)):(u&&T!==null&&(u=!1),(T!==null||o.includeNullValues)&&(i[_.prop]=T))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function qn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=ot(r,e.parse):e.type?t=Is(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function ot(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Is(r,e,n){switch(e){case String:return ot(r,vs);case Number:return ot(r,bs);case Date:return ot(r,function(t){return ks(t,{properties:n.properties})});case Boolean:return ot(r,ws);default:if(typeof e=="function")return ot(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Wr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Wr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function Ps(r){for(var e=[],n=0;n<r.length;){var t=Wr(r,",",n),l=ys(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var Ms=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Es(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function sn(r){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(r)}function Vr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;sn(o)==="object"&&(o=Object.keys(r[l])[0],i=Vr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var Ns=["schema","map"];function Wn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Bt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wn(Object(n),!0).forEach(function(t){Ds(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ds(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Fs(r,e){if(r==null)return{};var n=js(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function js(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Rs(r,e,n){var t=n.schema,l=n.map,o=Fs(n,Ns);!t&&l&&(t=Vr(l));var i=fs(r,e,Bt(Bt({},o),{},{properties:t||o.properties}));return t?Ls(i.data,t,Bt(Bt({},o),{},{properties:i.properties})):i}function Bs(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ro(r).then(function(n){return Rs(n,Bl,e)})}function Hs(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>Us(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(l.browse.num_features=l.browse.num_features!==void 0?l.browse.num_features+1:1,t.properties.funding_programme=l.browse.funding_programme,t.id=n++)}return e}function Us(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function zs(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Bs(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Yr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function Xr(r){return un(["get","intervention_type"],{area:He.area,route:He.route,crossing:He.crossing,other:He.other},"white")}function Vn(r){return[["Areas",He.area],["Routes",He.route],["Crossings",He.crossing],["Other",He.other]]}const ne={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"]},Ue=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20],gt=Vt({type:"FeatureCollection",features:[],schemes:{}}),Lt=Vt(new Map),Xn=Vt(!0),Ut=Vt("");function Gs(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Tt({props:u}),Z.push(()=>Q(e,"value",i)),e.$on("change",r[2]),l=new Sl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],x(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function qs(r,e,n){let t,l;ue(r,cn,a=>n(4,t=a)),ue(r,Lt,a=>n(5,l=a));let o="interventionType",i=Vn();function u(){var f;let a;if(o=="interventionType")a=Xr(),n(1,i=Vn());else{let c=new Set;for(let S of l.values())(f=S.browse)!=null&&f.funding_programme&&c.add(S.browse.funding_programme);let d=Array.from(c);d.sort(),n(1,i=[]);let _={},y=0;for(let S of d){let T=ne.funding_programmes[y++%ne.funding_programmes.length];_[S]=T,i.push([S,T])}a=un(["get","funding_programme"],_,"grey"),n(1,i)}t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function s(a){o=a,n(0,o)}return[o,i,u,s]}class Ws extends W{constructor(e){super(),V(this,e,qs,Gs,G,{})}}function Vs(r){let e;return{c(){e=w("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xs(r){let e,n,t,l,o,i;return t=new en({props:{$$slots:{default:[Vs]},$$scope:{ctx:r}}}),t.$on("click",r[11]),{c(){e=A("input"),n=C(),h(t.$$.fragment),q(e,"type","text"),q(e,"class","govuk-input govuk-input--width-10"),q(e,"id","filterText")},m(u,s){$(u,e,s),zt(e,r[4]),$(u,n,s),b(t,u,s),l=!0,o||(i=yt(e,"input",r[10]),o=!0)},p(u,s){s&16&&e.value!==u[4]&&zt(e,u[4]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){g(t.$$.fragment,u),l=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,i()}}}function Ks(r){let e,n,t,l,o,i,u,s,a,f;function c(S){r[8](S)}let d={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(d.value=r[2]),e=new Tt({props:d}),Z.push(()=>Q(e,"value",c));function _(S){r[9](S)}let y={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(y.value=r[3]),l=new Tt({props:y}),Z.push(()=>Q(l,"value",_)),u=new Cr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Xs]},$$scope:{ctx:r}}}),a=new Ws({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(S,T){b(e,S,T),$(S,t,T),b(l,S,T),$(S,i,T),b(u,S,T),$(S,s,T),b(a,S,T),f=!0},p(S,T){const O={};T&32&&(O.choices=S[5]),!n&&T&4&&(n=!0,O.value=S[2],x(()=>n=!1)),e.$set(O);const E={};T&64&&(E.choices=S[6]),!o&&T&8&&(o=!0,E.value=S[3],x(()=>o=!1)),l.$set(E);const F={};T&65552&&(F.$$scope={dirty:T,ctx:S}),u.$set(F)},i(S){f||(m(e.$$.fragment,S),m(l.$$.fragment,S),m(u.$$.fragment,S),m(a.$$.fragment,S),f=!0)},o(S){g(e.$$.fragment,S),g(l.$$.fragment,S),g(u.$$.fragment,S),g(a.$$.fragment,S),f=!1},d(S){S&&(p(t),p(i),p(s)),v(e,S),v(l,S),v(u,S),v(a,S)}}}function Zs(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",d,_,y=r[7].other.toLocaleString()+"",S,T,O=Kn(r[7].totalLength).toFixed(1)+"",E,F;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),d=w(c),_=w(" crossings, "),S=w(y),T=w(`
    other, with total LineString length of `),E=w(O),F=w(" miles)")},m(D,I){$(D,e,I),$(D,t,I),$(D,l,I),$(D,i,I),$(D,u,I),$(D,a,I),$(D,f,I),$(D,d,I),$(D,_,I),$(D,S,I),$(D,T,I),$(D,E,I),$(D,F,I)},p(D,I){I&1&&n!==(n=D[0].size.toLocaleString()+"")&&U(t,n),I&128&&o!==(o=D[7].route.toLocaleString()+"")&&U(i,o),I&128&&s!==(s=D[7].area.toLocaleString()+"")&&U(a,s),I&128&&c!==(c=D[7].crossing.toLocaleString()+"")&&U(d,c),I&128&&y!==(y=D[7].other.toLocaleString()+"")&&U(S,y),I&128&&O!==(O=Kn(D[7].totalLength).toFixed(1)+"")&&U(E,O)},d(D){D&&(p(e),p(t),p(l),p(i),p(u),p(a),p(f),p(d),p(_),p(S),p(T),p(E),p(F))}}}function Js(r){let e,n,t;function l(i){r[12](i)}let o={id:"show-schemes",$$slots:{default:[Zs]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),Z.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65665&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ys(r){let e,n,t,l;return e=new Te({props:{label:"Filters",$$slots:{default:[Ks]},$$scope:{ctx:r}}}),t=new Dt({props:{small:!0,$$slots:{default:[Js]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65660&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65667&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Kn(r){return r*621371e-9}function Qs(r,e,n){let t,l,o;ue(r,Ut,F=>n(4,t=F)),ue(r,gt,F=>n(13,l=F)),ue(r,Lt,F=>n(14,o=F));let{schemesToBeShown:i=new Set}=e,{show:u=!0}=e,s=[],a="",f=[],c="",d={area:0,route:0,crossing:0,other:0,totalLength:0};$n(()=>{var I,N;let F=new Set,D=new Set;for(let M of o.values())(I=M.browse)!=null&&I.authority_or_region&&F.add(M.browse.authority_or_region),(N=M.browse)!=null&&N.funding_programme&&D.add(M.browse.funding_programme);n(5,s=Array.from(F.entries())),s.sort(),n(6,f=Array.from(D.entries())),f.sort()});function _(F,D,I){let N=F.toLowerCase(),M=P=>{var R,z,j,H;if(N&&!((R=P.properties.name)!=null&&R.toLowerCase().includes(N))&&!((z=P.properties.description)!=null&&z.toLowerCase().includes(N)))return!1;if(D||I){let te=o.get(P.properties.scheme_reference);if(D&&((j=te.browse)==null?void 0:j.authority_or_region)!=D||I&&((H=te.browse)==null?void 0:H.funding_programme)!=I)return!1}return!0};n(0,i=new Set(l.features.filter(M).map(P=>P.properties.scheme_reference))),n(7,d={area:0,route:0,crossing:0,other:0,totalLength:0});let L=P=>{var R,z;return!(!i.has(P.properties.scheme_reference)||N&&!((R=P.properties.name)!=null&&R.toLowerCase().includes(N))&&!((z=P.properties.description)!=null&&z.toLowerCase().includes(N)))};for(let P of l.features)L(P)?(delete P.properties.hide_while_editing,n(7,d[P.properties.intervention_type]++,d),P.geometry.type=="LineString"&&P.properties.length_meters&&n(7,d.totalLength+=P.properties.length_meters,d)):P.properties.hide_while_editing=!0;gt.set(l),n(7,d)}function y(F){a=F,n(2,a)}function S(F){c=F,n(3,c)}function T(){t=this.value,Ut.set(t)}const O=()=>Ot(Ut,t="",t);function E(F){u=F,n(1,u)}return r.$$set=F=>{"schemesToBeShown"in F&&n(0,i=F.schemesToBeShown),"show"in F&&n(1,u=F.show)},r.$$.update=()=>{r.$$.dirty&28&&_(t,a,c)},[i,u,a,c,t,s,f,d,y,S,T,O,E]}class xs extends W{constructor(e){super(),V(this,e,Qs,Ys,G,{schemesToBeShown:0,show:1})}}function ei(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ti(r){let e,n,t,l,o;return t=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ei]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,u){$(i,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(m(t.$$.fragment,i),o=!0)},o(i){g(t.$$.fragment,i),o=!1},d(i){i&&p(e),v(t)}}}class je extends W{constructor(e){super(),V(this,e,null,ti,G,{})}}function Zn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Jn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Yn(r){let e,n;return{c(){e=A("span"),n=w(` 
    `),be(e,"background",r[5]),be(e,"width","100%"),be(e,"border","1px solid black")},m(t,l){$(t,e,l),k(e,n)},p(t,l){l&1&&be(e,"background",t[5])},d(t){t&&p(e)}}}function Qn(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&U(t,n)},d(l){l&&p(e)}}}function ni(r){let e,n,t,l=De(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Yn(Jn(r,l,s));let i=De(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Qn(Zn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=C(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();be(e,"display","flex"),be(t,"display","flex"),be(t,"justify-content","space-between")},m(s,a){$(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(s,n,a),$(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=De(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Jn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Yn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=De(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Zn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Qn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:ee,o:ee,d(s){s&&(p(e),p(n),p(t)),St(o,s),St(u,s)}}}function ri(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ge extends W{constructor(e){super(),V(this,e,ri,ni,G,{colorScale:0,limits:1})}}function xn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function li(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function si(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ii(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ai(r){let e,n,t,l,o,i,u,s,a,f,c,d;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[oi]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[si]},$$scope:{ctx:r}}}),f=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ii]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),s=A("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(_,y){$(_,e,y),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(_,u,y),$(_,s,y),k(s,a),b(f,s,null),k(s,c),d=!0},p(_,y){const S={};y&65536&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const T={};y&65536&&(T.$$scope={dirty:y,ctx:_}),o.$set(T);const O={};y&65536&&(O.$$scope={dirty:y,ctx:_}),f.$set(O)},i(_){d||(m(t.$$.fragment,_),m(o.$$.fragment,_),m(f.$$.fragment,_),d=!0)},o(_){g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),d=!1},d(_){_&&(p(e),p(u),p(s)),v(t),v(o),v(f)}}}function fi(r){let e,n,t;return n=new ie({props:{$$slots:{default:[ai]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function er(r){let e,n;return e=new Ge({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ui(r){let e;return{c(){e=w("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ci(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $i(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pi(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mi(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y;return o=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ci]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[$i]},$$scope:{ctx:r}}}),d=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[pi]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=C(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=w("License: "),h(d.$$.fragment),_=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(S,T){$(S,e,T),$(S,n,T),$(S,t,T),k(t,l),b(o,t,null),k(t,i),b(u,t,null),k(t,s),$(S,a,T),$(S,f,T),k(f,c),b(d,f,null),k(f,_),y=!0},p(S,T){const O={};T&65536&&(O.$$scope={dirty:T,ctx:S}),o.$set(O);const E={};T&65536&&(E.$$scope={dirty:T,ctx:S}),u.$set(E);const F={};T&65536&&(F.$$scope={dirty:T,ctx:S}),d.$set(F)},i(S){y||(m(o.$$.fragment,S),m(u.$$.fragment,S),m(d.$$.fragment,S),y=!0)},o(S){g(o.$$.fragment,S),g(u.$$.fragment,S),g(d.$$.fragment,S),y=!1},d(S){S&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(d)}}}function _i(r){let e,n,t;return n=new ie({props:{$$slots:{default:[mi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function tr(r){let e,n;return e=new Ge({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gi(r){let e;return{c(){e=w("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function di(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bi(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[di]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[hi]},$$scope:{ctx:r}}}),s=new je({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function vi(r){let e,n,t;return n=new ie({props:{$$slots:{default:[bi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function nr(r){let e,n,t,l;return t=new Ge({props:{colorScale:r[4],limits:r[6]().map(Ai)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=C(),h(t.$$.fragment)},m(o,i){$(o,e,i),$(o,n,i),b(t,o,i),l=!0},p:ee,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function wi(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){$(a,e,f),k(e,n),k(e,t),k(t,o),k(e,i),k(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&U(o,l),f&8192&&u!==(u=a[14]+"")&&U(s,u)},d(a){a&&p(e)}}}function ki(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=A("b"),s=w(u),a=w(`
          cars`)},m(f,c){$(f,e,c),k(e,n),k(e,l),k(e,o),k(e,i),k(i,s),k(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&U(l,t),c&8200&&u!==(u=f[15]+"")&&U(s,u)},d(f){f&&p(e)}}}function yi(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){$(f,e,c),k(e,n),k(n,l),k(n,o),k(e,i),k(e,s),k(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&U(l,t),c&8192&&u!==(u=f[14]+"")&&U(s,u)},d(f){f&&p(e)}}}function Si(r){xn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?yi:o[3]=="average_cars_per_household"?ki:wi}let t=n(r),l=t(r);return{c(){l.c(),e=ke()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){xn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Oi(r){let e,n;return e=new le({props:{$$slots:{default:[Si,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ti(r){let e,n,t,l;const o=[B(Be),{sourceLayer:Be},{paint:{"fill-color":me(["get",r[3]],r[6](),r[4]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Oi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i}),e.$on("click",r[5]);const u=[B(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Y(o,[f&0&&re(B(Be)),f&0&&{sourceLayer:Be},f&88&&{paint:{"fill-color":me(["get",a[3]],a[6](),a[4]),"fill-opacity":K(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&8?Y(u,[f&0&&re(B(`${Be}-outline`)),f&0&&{sourceLayer:Be},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ci(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y;function S(L){r[7](L)}let T={id:"percent_households_with_car",$$slots:{right:[fi],default:[li]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new se({props:T}),Z.push(()=>Q(e,"checked",S)),e.$on("change",r[8]);let O=r[3]=="percent_households_with_car"&&er(r);function E(L){r[9](L)}let F={id:"average_cars_per_household",$$slots:{right:[_i],default:[ui]},$$scope:{ctx:r}};r[1]!==void 0&&(F.checked=r[1]),o=new se({props:F}),Z.push(()=>Q(o,"checked",E)),o.$on("change",r[10]);let D=r[3]=="average_cars_per_household"&&tr(r);function I(L){r[11](L)}let N={id:"population_density",$$slots:{right:[vi],default:[gi]},$$scope:{ctx:r}};r[2]!==void 0&&(N.checked=r[2]),a=new se({props:N}),Z.push(()=>Q(a,"checked",I)),a.$on("change",r[12]);let M=r[3]=="population_density"&&nr(r);return _=new pe({props:{url:`pmtiles://${ce()}/v1/${Be}.pmtiles`,$$slots:{default:[Ti]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),O&&O.c(),l=C(),h(o.$$.fragment),u=C(),D&&D.c(),s=C(),h(a.$$.fragment),c=C(),M&&M.c(),d=C(),h(_.$$.fragment)},m(L,P){b(e,L,P),$(L,t,P),O&&O.m(L,P),$(L,l,P),b(o,L,P),$(L,u,P),D&&D.m(L,P),$(L,s,P),b(a,L,P),$(L,c,P),M&&M.m(L,P),$(L,d,P),b(_,L,P),y=!0},p(L,[P]){const R={};P&65536&&(R.$$scope={dirty:P,ctx:L}),!n&&P&1&&(n=!0,R.checked=L[0],x(()=>n=!1)),e.$set(R),L[3]=="percent_households_with_car"?O?(O.p(L,P),P&8&&m(O,1)):(O=er(L),O.c(),m(O,1),O.m(l.parentNode,l)):O&&(ae(),g(O,1,1,()=>{O=null}),fe());const z={};P&65536&&(z.$$scope={dirty:P,ctx:L}),!i&&P&2&&(i=!0,z.checked=L[1],x(()=>i=!1)),o.$set(z),L[3]=="average_cars_per_household"?D?(D.p(L,P),P&8&&m(D,1)):(D=tr(L),D.c(),m(D,1),D.m(s.parentNode,s)):D&&(ae(),g(D,1,1,()=>{D=null}),fe());const j={};P&65536&&(j.$$scope={dirty:P,ctx:L}),!f&&P&4&&(f=!0,j.checked=L[2],x(()=>f=!1)),a.$set(j),L[3]=="population_density"?M?(M.p(L,P),P&8&&m(M,1)):(M=nr(L),M.c(),m(M,1),M.m(d.parentNode,d)):M&&(ae(),g(M,1,1,()=>{M=null}),fe());const H={};P&65544&&(H.$$scope={dirty:P,ctx:L}),_.$set(H)},i(L){y||(m(e.$$.fragment,L),m(O),m(o.$$.fragment,L),m(D),m(a.$$.fragment,L),m(M),m(_.$$.fragment,L),y=!0)},o(L){g(e.$$.fragment,L),g(O),g(o.$$.fragment,L),g(D),g(a.$$.fragment,L),g(M),g(_.$$.fragment,L),y=!1},d(L){L&&(p(t),p(l),p(u),p(s),p(c),p(d)),v(e,L),O&&O.d(L),v(o,L),D&&D.d(L),v(a,L),M&&M.d(L),v(_,L)}}}let Be="census_output_areas";const Ai=r=>r.toLocaleString();function Li(r,e,n){let t=ne.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(T){let O=T.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${O}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${O}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function d(T){o=T,n(1,o)}const _=()=>{n(0,l=!1),n(2,i=!1)};function y(T){i=T,n(2,i)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,d,_,y,S]}class Ii extends W{constructor(e){super(),V(this,e,Li,Ci,G,{})}}function Pi(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Mi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ei(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Mi]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ni(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Di(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&U(t,n)},d(l){l&&p(e)}}}function Fi(r){let e,n;return e=new le({props:{$$slots:{default:[Di,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ji(r){let e,n,t,l;const o=[B(st),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Fi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i}),e.$on("click",Bi);const u=[B(`${st}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&re(B(st)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&re(B(`${st}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ri(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:st,$$slots:{right:[Ni],default:[Pi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new Nt({props:{data:`${ce()}/v1/${st}.geojson`,$$slots:{default:[ji]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let st="combined_authorities";function Bi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Hi(r,e,n){let t=ne.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ui extends W{constructor(e){super(),V(this,e,Hi,Ri,G,{})}}function zi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qi(r){let e;return{c(){e=w(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Gi]},$$scope:{ctx:r}}}),o=new X({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[qi]},$$scope:{ctx:r}}}),s=new je({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Vi(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Wi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function rr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xi(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,d=r[4].rank.toLocaleString()+"",_,y;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(i),s=C(),a=A("p"),f=w("Rank: "),c=A("b"),_=w(d),y=w(`
        / 32,844 LSOAs`)},m(S,T){$(S,e,T),k(e,t),k(e,l),k(e,o),k(o,u),$(S,s,T),$(S,a,T),k(a,f),k(a,c),k(c,_),k(a,y)},p(S,T){T&16&&n!==(n=S[4].LSOA11CD+"")&&U(t,n),T&16&&i!==(i=S[4].score+"")&&U(u,i),T&16&&d!==(d=S[4].rank.toLocaleString()+"")&&U(_,d)},d(S){S&&(p(e),p(s),p(a))}}}function Ki(r){let e,n;return e=new le({props:{$$slots:{default:[Xi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zi(r){let e,n,t,l;const o=[B(Le),{sourceLayer:Le},{paint:{"fill-color":me(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Ki]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i});const u=[B(`${Le}-outline`),{sourceLayer:Le},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Y(o,[f&0&&re(B(Le)),f&0&&{sourceLayer:Le},f&6&&{paint:{"fill-color":me(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":K(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&1?Y(u,[f&0&&re(B(`${Le}-outline`)),f&0&&{sourceLayer:Le},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ji(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:Le,$$slots:{right:[Vi],default:[zi]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&rr(r);return o=new pe({props:{url:`pmtiles://${ce()}/v1/${Le}.pmtiles`,$$slots:{default:[Zi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=rr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),g(a,1,1,()=>{a=null}),fe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Le="imd";function Yi(r,e,n){let t=ne.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Qi extends W{constructor(e){super(),V(this,e,Yi,Ji,G,{})}}function xi(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ea(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ta(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[ea]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function na(r){let e,n,t;return n=new ie({props:{$$slots:{default:[ta]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ra(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&U(t,n)},d(l){l&&p(e)}}}function la(r){let e,n;return e=new le({props:{$$slots:{default:[ra,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oa(r){let e,n,t,l;const o=[B(it),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[la]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i}),e.$on("click",ia);const u=[B(`${it}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&re(B(it)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&re(B(`${it}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function sa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:it,$$slots:{right:[na],default:[xi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new Nt({props:{data:`${ce()}/v1/${it}.geojson`,$$slots:{default:[oa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let it="local_authority_districts";function ia(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function aa(r,e,n){let t=ne.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class fa extends W{constructor(e){super(),V(this,e,aa,sa,G,{})}}function ua(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ca(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $a(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pa(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ma(r){let e;return{c(){e=w("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _a(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ga(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y,S,T,O,E,F,D,I,N;return t=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ca]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[$a]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[pa]},$$scope:{ctx:r}}}),_=new X({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ma]},$$scope:{ctx:r}}}),E=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[_a]},$$scope:{ctx:r}}}),I=new je({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=A("strong"),d=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(_.$$.fragment),y=w(" to get more details."),S=C(),T=A("p"),O=w("Data from ONS Geography via "),h(E.$$.fragment),F=w(", as of November 2022."),D=C(),h(I.$$.fragment)},m(M,L){$(M,e,L),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),b(u,e,null),k(e,s),$(M,a,L),$(M,f,L),k(f,c),k(c,d),b(_,c,null),k(c,y),$(M,S,L),$(M,T,L),k(T,O),b(E,T,null),k(T,F),$(M,D,L),b(I,M,L),N=!0},p(M,L){const P={};L&16&&(P.$$scope={dirty:L,ctx:M}),t.$set(P);const R={};L&16&&(R.$$scope={dirty:L,ctx:M}),o.$set(R);const z={};L&16&&(z.$$scope={dirty:L,ctx:M}),u.$set(z);const j={};L&16&&(j.$$scope={dirty:L,ctx:M}),_.$set(j);const H={};L&16&&(H.$$scope={dirty:L,ctx:M}),E.$set(H)},i(M){N||(m(t.$$.fragment,M),m(o.$$.fragment,M),m(u.$$.fragment,M),m(_.$$.fragment,M),m(E.$$.fragment,M),m(I.$$.fragment,M),N=!0)},o(M){g(t.$$.fragment,M),g(o.$$.fragment,M),g(u.$$.fragment,M),g(_.$$.fragment,M),g(E.$$.fragment,M),g(I.$$.fragment,M),N=!1},d(M){M&&(p(e),p(a),p(f),p(S),p(T),p(D)),v(t),v(o),v(u),v(_),v(E),v(I,M)}}}function da(r){let e,n,t;return n=new ie({props:{$$slots:{default:[ga]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ha(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&U(t,n)},d(l){l&&p(e)}}}function ba(r){let e,n;return e=new le({props:{$$slots:{default:[ha,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function va(r){let e,n,t,l;const o=[B(Ie),{sourceLayer:Ie},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[ba]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i});const u=[B(`${Ie}-outline`),{sourceLayer:Ie},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&re(B(Ie)),f&0&&{sourceLayer:Ie},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&re(B(`${Ie}-outline`)),f&0&&{sourceLayer:Ie},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function wa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ie,$$slots:{right:[da],default:[ua]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ie}.pmtiles`,$$slots:{default:[va]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Ie="local_planning_authorities";function ka(r,e,n){let t=ne.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ya extends W{constructor(e){super(),V(this,e,ka,wa,G,{})}}function Sa(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Oa(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ta(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Oa]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ca(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Ta]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Aa(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&U(t,n)},d(l){l&&p(e)}}}function La(r){let e,n;return e=new le({props:{$$slots:{default:[Aa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ia(r){let e,n,t,l;const o=[B(Pe),{sourceLayer:Pe},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[La]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i}),e.$on("click",Ma);const u=[B(`${Pe}-outline`),{sourceLayer:Pe},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&re(B(Pe)),f&0&&{sourceLayer:Pe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&re(B(`${Pe}-outline`)),f&0&&{sourceLayer:Pe},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Pa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Pe,$$slots:{right:[Ca],default:[Sa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Pe}.pmtiles`,$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Pe="parliamentary_constituencies";function Ma(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ea(r,e,n){let t=ne.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Na extends W{constructor(e){super(),V(this,e,Ea,Pa,G,{})}}function Da(r){let e;return{c(){e=w("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fa(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ra(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ba(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y,S,T;return t=new X({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Fa]},$$scope:{ctx:r}}}),f=new X({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[ja]},$$scope:{ctx:r}}}),d=new X({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Ra]},$$scope:{ctx:r}}}),S=new je({}),{c(){e=A("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        µgm
        `),o=A("sup"),o.textContent="3",i=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=C(),s=A("p"),a=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(d.$$.fragment),_=w("."),y=C(),h(S.$$.fragment)},m(O,E){$(O,e,E),k(e,n),b(t,e,null),k(e,l),k(e,o),k(e,i),$(O,u,E),$(O,s,E),k(s,a),b(f,s,null),k(s,c),b(d,s,null),k(s,_),$(O,y,E),b(S,O,E),T=!0},p(O,E){const F={};E&2048&&(F.$$scope={dirty:E,ctx:O}),t.$set(F);const D={};E&2048&&(D.$$scope={dirty:E,ctx:O}),f.$set(D);const I={};E&2048&&(I.$$scope={dirty:E,ctx:O}),d.$set(I)},i(O){T||(m(t.$$.fragment,O),m(f.$$.fragment,O),m(d.$$.fragment,O),m(S.$$.fragment,O),T=!0)},o(O){g(t.$$.fragment,O),g(f.$$.fragment,O),g(d.$$.fragment,O),g(S.$$.fragment,O),T=!1},d(O){O&&(p(e),p(u),p(s),p(y)),v(t),v(f),v(d),v(S,O)}}}function Ha(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Ba]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function lr(r){let e,n,t,l,o=r[3](r[0])+"",i,u,s,a,f,c,d,_,y,S,T,O,E;function F(L){r[7](L)}let D={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(D.value=r[0]),e=new Tt({props:D}),Z.push(()=>Q(e,"value",F));const I=[za,Ua],N=[];function M(L,P){return L[0]=="Noise"?0:1}return _=M(r),y=N[_]=I[_](r),{c(){h(e.$$.fragment),t=C(),l=A("p"),i=w(o),u=C(),s=A("div"),a=A("label"),f=w(`Opacity
      `),c=A("input"),d=C(),y.c(),S=ke(),q(c,"type","range"),q(c,"min","0"),q(c,"max","100")},m(L,P){b(e,L,P),$(L,t,P),$(L,l,P),k(l,i),$(L,u,P),$(L,s,P),k(s,a),k(a,f),k(a,c),zt(c,r[2]),$(L,d,P),N[_].m(L,P),$(L,S,P),T=!0,O||(E=[yt(c,"change",r[8]),yt(c,"input",r[8])],O=!0)},p(L,P){const R={};!n&&P&1&&(n=!0,R.value=L[0],x(()=>n=!1)),e.$set(R),(!T||P&1)&&o!==(o=L[3](L[0])+"")&&U(i,o),P&4&&zt(c,L[2]);let z=_;_=M(L),_===z?N[_].p(L,P):(ae(),g(N[z],1,1,()=>{N[z]=null}),fe(),y=N[_],y?y.p(L,P):(y=N[_]=I[_](L),y.c()),m(y,1),y.m(S.parentNode,S))},i(L){T||(m(e.$$.fragment,L),m(y),T=!0)},o(L){g(e.$$.fragment,L),g(y),T=!1},d(L){L&&(p(t),p(l),p(u),p(s),p(d),p(S)),v(e,L),N[_].d(L),O=!1,Qr(E)}}}function Ua(r){let e,n,t;return{c(){e=A("img"),bn(e.src,n=r[5](r[0]))||q(e,"src",n),q(e,"width",150),q(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!bn(e.src,n=l[5](l[0]))&&q(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&q(e,"alt",t)},i:ee,o:ee,d(l){l&&p(e)}}}function za(r){let e,n;return e=new Ge({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ga(r){let e,n;const t=[B("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new cl({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&6?Y(t,[t[0],i&4&&{paint:{"raster-opacity":o[2]/100}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function qa(r){let e,n,t,l,o,i;function u(f){r[6](f)}let s={id:"pollution",$$slots:{right:[Ha],default:[Da]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new se({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[1]&&lr(r);return o=new Cl({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Ga]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],x(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=lr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),g(a,1,1,()=>{a=null}),fe());const _={};c&1&&(_.tiles=[f[4](f[0])]),c&2054&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}function Wa(r,e,n){let t,l=!1,o=50,i="PM25_viridis";function u(){return i=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${i}/MapServer/WMSServer`}function s(y){return t[1]}function a(y){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${S}`}function f(y){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${S}`}function c(y){l=y,n(1,l)}function d(y){i=y,n(0,i)}function _(){o=xr(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[i])},[i,l,o,s,a,f,c,d,_]}class Va extends W{constructor(e){super(),V(this,e,Wa,qa,G,{})}}function Xa(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ka(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Za(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ka]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ja(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Za]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ya(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&U(t,n)},d(l){l&&p(e)}}}function Qa(r){let e,n;return e=new le({props:{$$slots:{default:[Ya,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xa(r){let e,n,t,l;const o=[B(Me),{sourceLayer:Me},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Qa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i}),e.$on("click",tf);const u=[B(`${Me}-outline`),{sourceLayer:Me},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&re(B(Me)),f&0&&{sourceLayer:Me},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&re(B(`${Me}-outline`)),f&0&&{sourceLayer:Me},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ef(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Me,$$slots:{right:[Ja],default:[Xa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Me}.pmtiles`,$$slots:{default:[xa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Me="wards";function tf(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function nf(r,e,n){let t=ne.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class rf extends W{constructor(e){super(),V(this,e,nf,ef,G,{})}}function lf(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(r){let e,n,t,l;return t=new X({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[lf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){$(o,e,i),k(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&p(e),v(t)}}}class Ke extends W{constructor(e){super(),V(this,e,null,of,G,{})}}function sf(r){let e,n,t;return e=new _e({props:{color:ne.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function af(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ff(r){let e,n,t,l,o,i,u,s,a;return o=new X({props:{href:"https://gtfs.org",$$slots:{default:[af]},$$scope:{ctx:r}}}),s=new Ke({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=C(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),k(t,l),b(o,t,null),k(t,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&8&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(s,f)}}}function uf(r){let e,n,t;return n=new ie({props:{$$slots:{default:[ff]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function cf(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pf(r){let e;function n(o,i){return o[2].has_bus_lane?$f:cf}let t=n(r),l=t(r);return{c(){l.c(),e=ke()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function mf(r){let e,n;return e=new le({props:{$$slots:{default:[pf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _f(r){let e,n;const t=[B(at),{sourceLayer:at},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ne.bus_route_with_lane,ne.bus_route_without_lane],"line-width":5,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[mf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Y(t,[i&0&&re(B(at)),i&0&&{sourceLayer:at},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function gf(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:at,$$slots:{right:[uf],default:[sf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${at}.pmtiles`,$$slots:{default:[_f]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let at="bus_routes";function df(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class hf extends W{constructor(e){super(),V(this,e,df,gf,G,{})}}function or(r){const e=Tf(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function sr(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function bf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vf(r){let e,n,t,l,o,i,u,s;return u=new Ke({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=C(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=C(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=C(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,l,f),$(a,o,f),$(a,i,f),b(u,a,f),s=!0},p:ee,i(a){s||(m(u.$$.fragment,a),s=!0)},o(a){g(u.$$.fragment,a),s=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(i)),v(u,a)}}}function wf(r){let e,n,t;return n=new ie({props:{$$slots:{default:[vf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ir(r){let e,n,t=De(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=ar(sr(r,t,i));const o=i=>g(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=ke()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);$(i,e,u),n=!0},p(i,u){if(u&2){t=De(i[1]);let s;for(s=0;s<t.length;s+=1){const a=sr(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=ar(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(ae(),s=t.length;s<l.length;s+=1)o(s);fe()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(i){i&&p(e),St(l,i)}}}function ar(r){let e,n,t,l=r[7]+"",o,i,u;return n=new _e({props:{color:r[8]}}),{c(){e=A("div"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){$(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p:ee,i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){g(n.$$.fragment,s),u=!1},d(s){s&&p(e),v(n)}}}function kf(r){or(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,d,_=r[6]+"",y;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Direction: "),u=A("b"),a=C(),f=A("p"),c=w("Width: "),d=A("b"),y=w(_)},m(S,T){$(S,e,T),k(e,t),$(S,l,T),$(S,o,T),k(o,i),k(o,u),u.innerHTML=s,$(S,a,T),$(S,f,T),k(f,c),k(f,d),k(d,y)},p(S,T){or(S),T&8&&n!==(n=S[4]+"")&&U(t,n),T&8&&s!==(s=S[5]+"")&&(u.innerHTML=s),T&8&&_!==(_=S[6]+"")&&U(y,_)},d(S){S&&(p(e),p(l),p(o),p(a),p(f))}}}function yf(r){let e,n;return e=new le({props:{$$slots:{default:[kf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sf(r){let e,n;const t=[B(ft),{sourceLayer:ft},{paint:{"line-color":un(["get","kind"],{track:ne.cycle_paths.track,lane:ne.cycle_paths.lane,shared_use_segregated:ne.cycle_paths.shared_use_segregated,shared_use_unsegregated:ne.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ue,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[yf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),e.$on("click",Cf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Y(t,[i&0&&re(B(ft)),i&0&&{sourceLayer:ft},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Of(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:ft,$$slots:{right:[wf],default:[bf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&ir(r);return o=new pe({props:{url:`pmtiles://${ce()}/v1/${ft}.pmtiles`,$$slots:{default:[Sf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=ir(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),g(a,1,1,()=>{a=null}),fe());const _={};c&2049&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ft="cycle_paths";function Tf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Cf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Af(r,e,n){let t=[["Separated tracks",ne.cycle_paths.track],["Unprotected lanes",ne.cycle_paths.lane],["Shared-use (segregated)",ne.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",ne.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Lf extends W{constructor(e){super(),V(this,e,Af,Of,G,{})}}function If(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Pf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mf(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Pf]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ef(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Nf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&U(t,n)},d(l){l&&p(e)}}}function Df(r){let e,n;return e=new le({props:{$$slots:{default:[Nf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ff(r){let e,n;const t=[B(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Df]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&re(B(ut)),i&0&&{sourceLayer:ut},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function jf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ut,$$slots:{right:[Ef],default:[If]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${ut}.pmtiles`,$$slots:{default:[Ff]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ut="mrn";function Rf(r,e,n){let t=ne.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Bf extends W{constructor(e){super(),V(this,e,Rf,jf,G,{})}}function Hf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uf(r){let e;return{c(){e=w("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new X({props:{href:"https://www.pct.bike",$$slots:{default:[Uf]},$$scope:{ctx:r}}}),a=new X({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=C(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=C(),o=A("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(d,_){$(d,e,_),$(d,n,_),$(d,t,_),$(d,l,_),$(d,o,_),k(o,i),b(u,o,null),k(o,s),b(a,o,null),k(o,f),c=!0},p(d,_){const y={};_&1024&&(y.$$scope={dirty:_,ctx:d}),u.$set(y);const S={};_&1024&&(S.$$scope={dirty:_,ctx:d}),a.$set(S)},i(d){c||(m(u.$$.fragment,d),m(a.$$.fragment,d),c=!0)},o(d){g(u.$$.fragment,d),g(a.$$.fragment,d),c=!1},d(d){d&&(p(e),p(n),p(t),p(l),p(o)),v(u),v(a)}}}function qf(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Gf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function fr(r){let e,n,t,l,o,i,u,s;e=new Ge({props:{colorScale:r[3],limits:r[4]}});function a(_){r[7](_)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new Ar({props:f}),Z.push(()=>Q(t,"value",a));function c(_){r[8](_)}let d={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(d.value=r[1]),i=new Tt({props:d}),Z.push(()=>Q(i,"value",c)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),o=C(),h(i.$$.fragment)},m(_,y){b(e,_,y),$(_,n,y),b(t,_,y),$(_,o,y),b(i,_,y),s=!0},p(_,y){const S={};!l&&y&1&&(l=!0,S.value=_[0],x(()=>l=!1)),t.$set(S);const T={};!u&&y&2&&(u=!0,T.value=_[1],x(()=>u=!1)),i.$set(T)},i(_){s||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(i.$$.fragment,_),s=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(i.$$.fragment,_),s=!1},d(_){_&&(p(n),p(o)),v(e,_),v(t,_),v(i,_)}}}function Wf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new pn(!1),t=ke(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Vf(r){let e,n;return e=new le({props:{$$slots:{default:[Wf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xf(r){let e,n;const t=[B(Ee),{sourceLayer:Ee},{paint:{"line-color":me(["get",r[1]],r[4],r[3]),"line-width":Ue,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ee?"visible":"none"}}];let l={$$slots:{default:[Vf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Y(t,[i&0&&re(B(Ee)),i&0&&{sourceLayer:Ee},i&26&&{paint:{"line-color":me(["get",o[1]],o[4],o[3]),"line-width":Ue,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ee?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Kf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new pn(!1),t=ke(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Zf(r){let e,n;return e=new le({props:{$$slots:{default:[Kf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jf(r){let e,n;const t=[B(Ye),{sourceLayer:Ye},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",r[1]],r[4],r[3]),"line-width":Ue,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ye?"visible":"none"}}];let l={$$slots:{default:[Zf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Y(t,[i&0&&re(B(Ye)),i&0&&{sourceLayer:Ye},t[2],t[3],i&26&&{paint:{"line-color":me(["get",o[1]],o[4],o[3]),"line-width":Ue,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ye?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yf(r){let e,n,t,l,o,i,u,s;function a(d){r[6](d)}let f={id:Ee,$$slots:{right:[qf],default:[Hf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new se({props:f}),Z.push(()=>Q(e,"checked",a));let c=r[2]&&fr(r);return o=new pe({props:{url:`pmtiles://${ce()}/v1/${Ee}.pmtiles`,$$slots:{default:[Xf]},$$scope:{ctx:r}}}),u=new pe({props:{url:`pmtiles://${ce()}/v1/${Ye}.pmtiles`,$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),c&&c.c(),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(d,_){b(e,d,_),$(d,t,_),c&&c.m(d,_),$(d,l,_),b(o,d,_),$(d,i,_),b(u,d,_),s=!0},p(d,[_]){const y={};_&1024&&(y.$$scope={dirty:_,ctx:d}),!n&&_&4&&(n=!0,y.checked=d[2],x(()=>n=!1)),e.$set(y),d[2]?c?(c.p(d,_),_&4&&m(c,1)):(c=fr(d),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(ae(),g(c,1,1,()=>{c=null}),fe());const S={};_&1031&&(S.$$scope={dirty:_,ctx:d}),o.$set(S);const T={};_&1031&&(T.$$scope={dirty:_,ctx:d}),u.$set(T)},i(d){s||(m(e.$$.fragment,d),m(c),m(o.$$.fragment,d),m(u.$$.fragment,d),s=!0)},o(d){g(e.$$.fragment,d),g(c),g(o.$$.fragment,d),g(u.$$.fragment,d),s=!1},d(d){d&&(p(t),p(l),p(i)),v(e,d),c&&c.d(d),v(o,d),v(u,d)}}}let Ee="pct_commute",Ye="pct_school";function Qf(r,e,n){let t=ne.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ee,i="baseline",u=!1;function s(d){let _=d.baseline,y=d.gov_target,S=d.go_dutch,T=`<h2>Trip purpose: ${o==Ee?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)T+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let O=(y/_).toFixed(1),E=(S/_).toFixed(1);T+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${O}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${E}x</b> of baseline)</p>`}return T}function a(d){u=d,n(2,u)}function f(d){o=d,n(0,o)}function c(d){i=d,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class xf extends W{constructor(e){super(),V(this,e,Qf,Yf,G,{})}}function eu(r){let e;return{c(){e=w("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tu(r){let e;return{c(){e=w("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ru(r){let e,n,t,l,o,i,u,s,a,f,c,d;return t=new X({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[tu]},$$scope:{ctx:r}}}),f=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=C(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=C(),s=A("p"),a=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(_,y){$(_,e,y),k(e,n),b(t,e,null),k(e,l),$(_,o,y),$(_,i,y),$(_,u,y),$(_,s,y),k(s,a),b(f,s,null),k(s,c),d=!0},p(_,y){const S={};y&256&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const T={};y&256&&(T.$$scope={dirty:y,ctx:_}),f.$set(T)},i(_){d||(m(t.$$.fragment,_),m(f.$$.fragment,_),d=!0)},o(_){g(t.$$.fragment,_),g(f.$$.fragment,_),d=!1},d(_){_&&(p(e),p(o),p(i),p(u),p(s)),v(t),v(f)}}}function lu(r){let e,n,t;return n=new ie({props:{$$slots:{default:[ru]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ur(r){let e,n,t,l,o;e=new Ge({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new Ar({props:u}),Z.push(()=>Q(t,"value",i)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],x(()=>l=!1)),t.$set(f)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),o=!1},d(s){s&&p(n),v(e,s),v(t,s)}}}function ou(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,d=r[4][r[7].highest_description]+"",_,y;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=C(),u=A("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),_=w(d),y=w(")")},m(S,T){$(S,e,T),k(e,n),k(e,l),k(e,o),$(S,i,T),$(S,u,T),k(u,s),k(u,f),k(u,c),k(u,_),k(u,y)},p(S,T){T&128&&t!==(t=S[7].indicative_mph+"")&&U(l,t),T&128&&a!==(a=S[7].highest_mph+"")&&U(f,a),T&128&&d!==(d=S[4][S[7].highest_description]+"")&&U(_,d)},d(S){S&&(p(e),p(i),p(u))}}}function su(r){let e,n;return e=new le({props:{$$slots:{default:[ou,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function iu(r){let e,n;const t=[B(ct),{sourceLayer:ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",r[0]],r[3],r[2]),"line-width":Ue,"line-opacity":K(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[su]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Y(t,[i&0&&re(B(ct)),i&0&&{sourceLayer:ct},t[2],t[3],i&13&&{paint:{"line-color":me(["get",o[0]],o[3],o[2]),"line-width":Ue,"line-opacity":K(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function au(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ct,$$slots:{right:[lu],default:[eu]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new se({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[1]&&ur(r);return o=new pe({props:{url:`pmtiles://${mn()}/v1/${ct}.pmtiles`,$$slots:{default:[iu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&256&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],x(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=ur(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),g(a,1,1,()=>{a=null}),fe());const _={};c&259&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ct="road_speeds";function fu(r,e,n){let t=ne.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class uu extends W{constructor(e){super(),V(this,e,fu,au,G,{})}}function cu(r){let e;return{c(){e=w("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $u(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pu(r){let e,n,t,l,o,i,u,s,a;return u=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[$u]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=C(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=C(),o=A("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),k(o,i),b(u,o,null),k(o,s),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),u.$set(d)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),v(u)}}}function mu(r){let e,n,t;return n=new ie({props:{$$slots:{default:[pu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function cr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _u(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",d,_;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),i=w(`
        meters`),u=C(),s=A("p"),a=w("Minimum width: "),f=A("b"),d=w(c),_=w(`
        meters`)},m(y,S){$(y,e,S),k(e,n),k(e,t),k(t,o),k(e,i),$(y,u,S),$(y,s,S),k(s,a),k(s,f),k(f,d),k(s,_)},p(y,S){S&16&&l!==(l=y[4].average+"")&&U(o,l),S&16&&c!==(c=y[4].minimum+"")&&U(d,c)},d(y){y&&(p(e),p(u),p(s))}}}function gu(r){let e,n;return e=new le({props:{$$slots:{default:[_u,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function du(r){let e,n;const t=[B($t),{sourceLayer:$t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get","average"],r[2],r[1]),"line-width":Ue,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[gu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Y(t,[i&0&&re(B($t)),i&0&&{sourceLayer:$t},t[2],t[3],i&6&&{paint:{"line-color":me(["get","average"],o[2],o[1]),"line-width":Ue,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function hu(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:$t,$$slots:{right:[mu],default:[cu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&cr(r);return o=new pe({props:{url:`pmtiles://${mn()}/v1/${$t}.pmtiles`,$$slots:{default:[du]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=cr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),g(a,1,1,()=>{a=null}),fe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let $t="road_widths";function bu(r,e,n){let t=ne.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class vu extends W{constructor(e){super(),V(this,e,bu,hu,G,{})}}function wu(r){let e,n,t;return{c(){e=A("input"),q(e,"class","govuk-file-upload"),q(e,"id","load-criticals"),q(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=yt(e,"change",r[5]),n=!0)},p:ee,d(l){l&&p(e),r[7](null),n=!1,t()}}}function $r(r){let e,n;return e=new Dt({props:{small:!0,$$slots:{default:[yu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ku(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new _e({props:{color:wt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),$(u,n,s),$(u,l,s),$(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&U(l,t)},i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){g(e.$$.fragment,u),i=!1},d(u){u&&(p(n),p(l),p(o)),v(e,u)}}}function yu(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[ku]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),Z.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Su(r){let e,n,t,l,o,i;e=new Cr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[wu]},$$scope:{ctx:r}}}),t=new Lr({props:{errorMessage:r[3]}});let u=r[2]>0&&$r(r);return{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),u&&u.c(),o=ke()},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),u&&u.m(s,a),$(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&m(u,1)):(u=$r(s),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(ae(),g(u,1,1,()=>{u=null}),fe())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(u),i=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(u),i=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),u&&u.d(s)}}}function Ou(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,d,_,y,S=r[10].notes+"",T,O,E,F,D,I,N,M=r[10].id+"",L,P,R,z,j,H=(r[10].inspector??"???")+"",te,ye,ve,et=r[10].submission_time+"",dt,tt,ge,ht,Re,qe=r[10].scheme_reference+"",Ze,bt,nt,Je=r[10].current_design_stage+"",rt;return{c(){e=A("div"),n=A("h2"),l=w(t),o=C(),i=A("p"),u=A("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=C(),d=A("p"),_=A("u"),_.textContent="Notes",y=w(`
          : `),T=w(S),O=C(),E=A("hr"),F=C(),D=A("p"),I=w("Critical issue ID: "),N=A("b"),L=w(M),P=C(),R=A("p"),z=w("Submitted by "),j=A("b"),te=w(H),ye=w(`
          at
          `),ve=A("b"),dt=w(et),tt=C(),ge=A("p"),ht=w("For scheme "),Re=A("b"),Ze=w(qe),bt=w(`
          in stage
          `),nt=A("b"),rt=w(Je),be(e,"max-width","30vw")},m(we,Ae){$(we,e,Ae),k(e,n),k(n,l),k(e,o),k(e,i),k(i,u),k(i,s),k(i,f),k(e,c),k(e,d),k(d,_),k(d,y),k(d,T),k(e,O),k(e,E),k(e,F),k(e,D),k(D,I),k(D,N),k(N,L),k(e,P),k(e,R),k(R,z),k(R,j),k(j,te),k(R,ye),k(R,ve),k(ve,dt),k(e,tt),k(e,ge),k(ge,ht),k(ge,Re),k(Re,Ze),k(ge,bt),k(ge,nt),k(nt,rt)},p(we,Ae){Ae&1024&&t!==(t=we[10].critical_type+"")&&U(l,t),Ae&1024&&a!==(a=we[10].location_description+"")&&U(f,a),Ae&1024&&S!==(S=we[10].notes+"")&&U(T,S),Ae&1024&&M!==(M=we[10].id+"")&&U(L,M),Ae&1024&&H!==(H=(we[10].inspector??"???")+"")&&U(te,H),Ae&1024&&et!==(et=we[10].submission_time+"")&&U(dt,et),Ae&1024&&qe!==(qe=we[10].scheme_reference+"")&&U(Ze,qe),Ae&1024&&Je!==(Je=we[10].current_design_stage+"")&&U(rt,Je)},d(we){we&&p(e)}}}function Tu(r){let e,n;return e=new le({props:{$$slots:{default:[Ou,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cu(r){let e,n,t,l,o,i;const u=[B(`${Ve}-clusters`),{applyToClusters:!0},{paint:{"circle-color":wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let _=0;_<u.length;_+=1)s=J(s,u[_]);e=new Xe({props:s}),e.$on("click",r[6]);const a=[B(`${Ve}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let _=0;_<a.length;_+=1)f=J(f,a[_]);t=new Pl({props:f});const c=[B(`${Ve}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":wt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let d={$$slots:{default:[Tu]},$$scope:{ctx:r}};for(let _=0;_<c.length;_+=1)d=J(d,c[_]);return o=new Xe({props:d}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment)},m(_,y){b(e,_,y),$(_,n,y),b(t,_,y),$(_,l,y),b(o,_,y),i=!0},p(_,y){const S=y&2?Y(u,[y&0&&re(B(`${Ve}-clusters`)),u[1],y&0&&{paint:{"circle-color":wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:_[1]?"visible":"none"}},u[4]]):{};e.$set(S);const T=y&2?Y(a,[y&0&&re(B(`${Ve}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:_[1]?"visible":"none"}}]):{};t.$set(T);const O=y&2?Y(c,[y&0&&re(B(`${Ve}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":wt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:_[1]?"visible":"none"}}]):{};y&2048&&(O.$$scope={dirty:y,ctx:_}),o.$set(O)},i(_){i||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(o.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),i=!1},d(_){_&&(p(n),p(l)),v(e,_),v(t,_),v(o,_)}}}function Au(r){let e,n,t,l;return e=new Te({props:{label:"Critical Issues",$$slots:{default:[Su]},$$scope:{ctx:r}}}),t=new Nt({props:{id:Ve,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Cu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let Ve="criticals",wt="red";function Lu(r,e,n){let t;ue(r,cn,_=>n(9,t=_));let l,o=!0,i=0,u="",s=el();async function a(_){try{n(4,s=await zs(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f(_){t.getSource(Ve).getClusterExpansionZoom(_.detail.features[0].properties.cluster_id,(y,S)=>{y||t.easeTo({center:_.detail.features[0].geometry.coordinates,zoom:S})})}function c(_){Z[_?"unshift":"push"](()=>{l=_,n(0,l)})}function d(_){o=_,n(1,o)}return[l,o,i,u,s,a,f,c,d]}class Iu extends W{constructor(e){super(),V(this,e,Lu,Au,G,{})}}function Pu(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Mu(r){let e;return{c(){e=w("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Eu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Mu]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Nu(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Eu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Du(r){let e,n=pr(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=pr(l[3])+"")&&U(t,n)},d(l){l&&p(e)}}}function Fu(r){let e,n;return e=new le({props:{$$slots:{default:[Du,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ju(r){let e,n;const t=[B(pt),{sourceLayer:pt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Fu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Xe({props:l}),e.$on("click",Bu),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&re(B(pt)),i&0&&{sourceLayer:pt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ru(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:pt,$$slots:{right:[Nu],default:[Pu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${pt}.pmtiles`,$$slots:{default:[ju]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let pt="crossings";function pr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Bu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Hu(r,e,n){let t=ne.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Uu extends W{constructor(e){super(),V(this,e,Hu,Ru,G,{})}}function zu(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Gu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Gu]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Wu(r){let e,n,t;return n=new ie({props:{$$slots:{default:[qu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Vu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(i,u){$(i,e,u),k(e,n),k(e,t),k(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&U(o,l)},d(i){i&&p(e)}}}function Xu(r){let e,n;return e=new le({props:{$$slots:{default:[Vu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ku(r){let e,n;const t=[B(mt),{sourceLayer:mt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Xu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Xe({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&re(B(mt)),i&0&&{sourceLayer:mt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Zu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:mt,$$slots:{right:[Wu],default:[zu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${mt}.pmtiles`,$$slots:{default:[Ku]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let mt="cycle_parking";function Ju(r,e,n){let t=ne.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Yu extends W{constructor(e){super(),V(this,e,Ju,Zu,G,{})}}function Qu(r){let e,n,t,l;return e=new _e({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=C(),t=w(r[2])},m(o,i){b(e,o,i),$(o,n,i),$(o,t,i),l=!0},p(o,i){(!l||i&4)&&U(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function xu(r){let e;const n=r[5].default,t=It(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Pt(t,n,l,l[7],e?Et(n,l[7],o,null):Mt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function ec(r){let e,n,t;return n=new ie({props:{$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function tc(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&U(t,n)},d(l){l&&p(e)}}}function nc(r){let e,n;return e=new le({props:{$$slots:{default:[tc,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rc(r){let e,n;const t=[B(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":K(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[nc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ze({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Y(t,[i&1&&re(B(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":K(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function lc(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[ec],default:[Qu]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${r[0]}.pmtiles`,$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],x(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${ce()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function oc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=ne[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class gn extends W{constructor(e){super(),V(this,e,oc,lc,G,{name:0,singularNoun:1,pluralNoun:2})}}function sc(r){let e;return{c(){e=w("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ic(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[sc]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function ac(r){let e,n;return e=new gn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[ic]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class fc extends W{constructor(e){super(),V(this,e,null,ac,G,{})}}function uc(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function cc(r){let e;return{c(){e=w("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $c(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[cc]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function pc(r){let e,n,t;return n=new ie({props:{$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function mc(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&U(t,n)},d(l){l&&p(e)}}}function _c(r){let e,n;return e=new le({props:{$$slots:{default:[mc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gc(r){let e,n;const t=[B(Wt),{paint:{"circle-color":r[1],"circle-radius":Gt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[_c]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Xe({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&re(B(Wt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Gt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function dc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Wt,$$slots:{right:[pc],default:[uc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new Nt({props:{data:`${ce()}/v1/${Wt}.geojson`,$$slots:{default:[gc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Wt="railway_stations";function hc(r,e,n){let t=ne.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class bc extends W{constructor(e){super(),V(this,e,hc,dc,G,{})}}function vc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wc(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[vc]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function kc(r){let e,n;return e=new gn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class yc extends W{constructor(e){super(),V(this,e,null,kc,G,{})}}function Sc(r){let e;return{c(){e=w("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Oc(r){let e;return{c(){e=w("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tc(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Sc]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Oc]},$$scope:{ctx:r}}}),s=new Ke({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Cc(r){let e,n;return e=new gn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Ac extends W{constructor(e){super(),V(this,e,null,Cc,G,{})}}function Lc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ic(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pc(r){let e;return{c(){e=w("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mc(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new X({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Ic]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Pc]},$$scope:{ctx:r}}}),f=new je({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=C(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=C(),h(f.$$.fragment)},m(d,_){$(d,e,_),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(d,u,_),$(d,s,_),$(d,a,_),b(f,d,_),c=!0},p(d,_){const y={};_&64&&(y.$$scope={dirty:_,ctx:d}),t.$set(y);const S={};_&64&&(S.$$scope={dirty:_,ctx:d}),o.$set(S)},i(d){c||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),c=!0)},o(d){g(t.$$.fragment,d),g(o.$$.fragment,d),g(f.$$.fragment,d),c=!1},d(d){d&&(p(e),p(u),p(s),p(a)),v(t),v(o),v(f,d)}}}function Ec(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Mc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),q(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function mr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,d,_,y=r[5].pedal_cycles_2022.toLocaleString()+"",S,T,O,E,F,D=r[5].method+"",I;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(s),f=C(),c=A("p"),d=w("Total pedal cycles (2022 AADF): "),_=A("b"),S=w(y),T=C(),O=A("p"),E=w("Count method: "),F=A("b"),I=w(D)},m(N,M){$(N,e,M),k(e,t),$(N,l,M),$(N,o,M),k(o,i),k(o,u),k(u,a),$(N,f,M),$(N,c,M),k(c,d),k(c,_),k(_,S),$(N,T,M),$(N,O,M),k(O,E),k(O,F),k(F,I)},p(N,M){M&32&&n!==(n=N[5].location+"")&&U(t,n),M&32&&s!==(s=N[5].motor_vehicles_2022.toLocaleString()+"")&&U(a,s),M&32&&y!==(y=N[5].pedal_cycles_2022.toLocaleString()+"")&&U(S,y),M&32&&D!==(D=N[5].method+"")&&U(I,D)},d(N){N&&(p(e),p(l),p(o),p(f),p(c),p(T),p(O))}}}function Dc(r){let e,n;return e=new le({props:{$$slots:{default:[Nc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fc(r){let e,n;const t=[B(_t),{sourceLayer:_t},{paint:{"circle-color":me(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Dc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Xe({props:l}),e.$on("click",Rc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Y(t,[i&0&&re(B(_t)),i&0&&{sourceLayer:_t},i&6&&{paint:{"circle-color":me(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function jc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:_t,$$slots:{right:[Ec],default:[Lc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&mr(r);return o=new pe({props:{url:`pmtiles://${ce()}/v1/${_t}.pmtiles`,$$slots:{default:[Fc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&64&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=mr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),g(a,1,1,()=>{a=null}),fe());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let _t="vehicle_counts";function Rc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Bc(r,e,n){let t=ne.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class Hc extends W{constructor(e){super(),V(this,e,Bc,jc,G,{})}}function Uc(r){let e,n,t,l,o,i,u,s;return e=new yc({}),t=new fc({}),o=new Ac({}),u=new bc({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,l,f),b(o,a,f),$(a,i,f),b(u,a,f),s=!0},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),s=!1},d(a){a&&(p(n),p(l),p(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function zc(r){let e,n;return e=new Dt({props:{small:!0,$$slots:{default:[Uc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Lf({}),t=new Bf({}),o=new hf({}),u=new Yu({}),a=new Uu({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,d){b(e,c,d),$(c,n,d),b(t,c,d),$(c,l,d),b(o,c,d),$(c,i,d),b(u,c,d),$(c,s,d),b(a,c,d),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function qc(r){let e,n;return e=new Dt({props:{small:!0,$$slots:{default:[Gc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Na({}),t=new rf({}),o=new Ui({}),u=new fa({}),a=new ya({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,d){b(e,c,d),$(c,n,d),b(t,c,d),$(c,l,d),b(o,c,d),$(c,i,d),b(u,c,d),$(c,s,d),b(a,c,d),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Vc(r){let e,n;return e=new Dt({props:{small:!0,$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xc(r){let e,n,t,l;return e=new Ii({}),t=new Qi({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Kc(r){let e,n,t,l;return e=new vu({}),t=new uu({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Zc(r){let e,n,t,l,o=fn()=="Private (development)",i,u,s;e=new Hc({}),t=new xf({});let a=o&&Kc();return u=new Va({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),a&&a.c(),i=C(),h(u.$$.fragment)},m(f,c){b(e,f,c),$(f,n,c),b(t,f,c),$(f,l,c),a&&a.m(f,c),$(f,i,c),b(u,f,c),s=!0},p:ee,i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(a),m(u.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(a),g(u.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(i)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function Jc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new il({props:u}),Z.push(()=>Q(e,"enabled",i)),l=new pl({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],x(()=>n=!1)),e.$set(f)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function Yc(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y,S,T;return e=new Iu({}),t=new Te({props:{label:"Trip generators",$$slots:{default:[zc]},$$scope:{ctx:r}}}),o=new Te({props:{label:"Existing infrastructure",$$slots:{default:[qc]},$$scope:{ctx:r}}}),u=new Te({props:{label:"Boundaries",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),a=new Te({props:{label:"Census",$$slots:{default:[Xc]},$$scope:{ctx:r}}}),c=new Te({props:{label:"Other",$$slots:{default:[Zc]},$$scope:{ctx:r}}}),_=new Te({props:{label:"Tools",$$slots:{default:[Jc]},$$scope:{ctx:r}}}),S=new sl({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),h(c.$$.fragment),d=C(),h(_.$$.fragment),y=C(),h(S.$$.fragment)},m(O,E){b(e,O,E),$(O,n,E),b(t,O,E),$(O,l,E),b(o,O,E),$(O,i,E),b(u,O,E),$(O,s,E),b(a,O,E),$(O,f,E),b(c,O,E),$(O,d,E),b(_,O,E),$(O,y,E),b(S,O,E),T=!0},p(O,E){const F={};E&8&&(F.$$scope={dirty:E,ctx:O}),t.$set(F);const D={};E&8&&(D.$$scope={dirty:E,ctx:O}),o.$set(D);const I={};E&8&&(I.$$scope={dirty:E,ctx:O}),u.$set(I);const N={};E&8&&(N.$$scope={dirty:E,ctx:O}),a.$set(N);const M={};E&8&&(M.$$scope={dirty:E,ctx:O}),c.$set(M);const L={};E&9&&(L.$$scope={dirty:E,ctx:O}),_.$set(L);const P={};E&2&&(P.disabled=!O[1]),S.$set(P)},i(O){T||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(o.$$.fragment,O),m(u.$$.fragment,O),m(a.$$.fragment,O),m(c.$$.fragment,O),m(_.$$.fragment,O),m(S.$$.fragment,O),T=!0)},o(O){g(e.$$.fragment,O),g(t.$$.fragment,O),g(o.$$.fragment,O),g(u.$$.fragment,O),g(a.$$.fragment,O),g(c.$$.fragment,O),g(_.$$.fragment,O),g(S.$$.fragment,O),T=!1},d(O){O&&(p(n),p(l),p(i),p(s),p(f),p(d),p(y)),v(e,O),v(t,O),v(o,O),v(u,O),v(a,O),v(c,O),v(_,O),v(S,O)}}}function Qc(r){let e,n;return e=new Te({props:{label:"Layers",open:!0,$$slots:{default:[Yc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xc(r,e,n){let t,l;ue(r,Xn,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&Xn.set(!t)},[t,l,o]}class e$ extends W{constructor(e){super(),V(this,e,xc,Qc,G,{})}}function t$(r,e,n){let{loadFile:t}=e;return $n(async()=>{let o=await(await fetch(`${mn()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class n$ extends W{constructor(e){super(),V(this,e,t$,null,G,{loadFile:0})}}function _r(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=A("p"),n=w("Current milestone: "),l=w(t)},m(i,u){$(i,e,u),k(e,n),k(e,l)},p(i,u){var s;u&1&&t!==(t=((s=i[0].browse)==null?void 0:s.current_milestone)+"")&&U(l,t)},d(i){i&&p(e)}}}function r$(r){let e;return{c(){e=w("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function l$(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function o$(r){let e,n,t,l;return e=new en({props:{$$slots:{default:[r$]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new en({props:{$$slots:{default:[l$]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&32&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function s$(r){var D,I,N,M;let e,n,t=((D=r[0].browse)==null?void 0:D.authority_or_region)+"",l,o,i,u,s=((I=r[0].browse)==null?void 0:I.capital_scheme_id)+"",a,f,c,d,_=((N=r[0].browse)==null?void 0:N.funding_programme)+"",y,S,T,O,E,F=((M=r[0].browse)==null?void 0:M.current_milestone)&&_r(r);return O=new al({props:{$$slots:{default:[o$]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=C(),i=A("p"),u=w("Capital scheme ID: "),a=w(s),f=C(),c=A("p"),d=w("Funding programme: "),y=w(_),S=C(),F&&F.c(),T=C(),h(O.$$.fragment)},m(L,P){$(L,e,P),k(e,n),k(e,l),$(L,o,P),$(L,i,P),k(i,u),k(i,a),$(L,f,P),$(L,c,P),k(c,d),k(c,y),$(L,S,P),F&&F.m(L,P),$(L,T,P),b(O,L,P),E=!0},p(L,P){var z,j,H,te;(!E||P&1)&&t!==(t=((z=L[0].browse)==null?void 0:z.authority_or_region)+"")&&U(l,t),(!E||P&1)&&s!==(s=((j=L[0].browse)==null?void 0:j.capital_scheme_id)+"")&&U(a,s),(!E||P&1)&&_!==(_=((H=L[0].browse)==null?void 0:H.funding_programme)+"")&&U(y,_),(te=L[0].browse)!=null&&te.current_milestone?F?F.p(L,P):(F=_r(L),F.c(),F.m(T.parentNode,T)):F&&(F.d(1),F=null);const R={};P&32&&(R.$$scope={dirty:P,ctx:L}),O.$set(R)},i(L){E||(m(O.$$.fragment,L),E=!0)},o(L){g(O.$$.fragment,L),E=!1},d(L){L&&(p(e),p(o),p(i),p(f),p(c),p(S),p(T)),F&&F.d(L),v(O,L)}}}function i$(r){var t;let e,n;return e=new Te({props:{label:`${r[0].scheme_reference}: ${(t=r[0].browse)==null?void 0:t.num_features} features`,$$slots:{default:[s$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),n=!0},p(l,[o]){var u;const i={};o&1&&(i.label=`${l[0].scheme_reference}: ${(u=l[0].browse)==null?void 0:u.num_features} features`),o&33&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function a$(r,e,n){let t,l;ue(r,gt,s=>n(3,t=s)),ue(r,cn,s=>n(4,l=s));let{scheme:o}=e;function i(){let s={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(tl(s),{padding:20,animate:!1})}function u(){var f,c;let s={type:"FeatureCollection",features:t.features.filter(d=>d.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(s)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=s=>{"scheme"in s&&n(0,o=s.scheme)},[o,i,u]}class f$ extends W{constructor(e){super(),V(this,e,a$,i$,G,{scheme:0})}}function gr(r){let e,n,t=vn(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,i){$(o,e,i),k(e,n),k(e,l)},p(o,i){i&1&&t!==(t=vn(o[0].length_meters)+"")&&U(l,t)},d(o){o&&p(e)}}}function dr(r){let e,n=r[2](r[0].description)+"";return{c(){e=A("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[2](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function u$(r){let e;return{c(){var n;e=A("p"),e.textContent=`Current milestone: ${(n=r[1].browse)==null?void 0:n.current_milestone}`},m(n,t){$(n,e,t)},p:ee,d(n){n&&p(e)}}}function c$(r){var j;let e,n,t,l=r[2](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,d,_,y,S,T=r[0].scheme_reference+"",O,E,F,D,I,N,M,L,P=r[0].length_meters&&gr(r),R=r[0].description&&dr(r),z=((j=r[1].browse)==null?void 0:j.current_milestone)&&u$(r);return{c(){var H,te,ye;e=A("div"),n=A("h2"),t=new pn(!1),o=w(" ("),u=w(i),s=w(")"),a=C(),P&&P.c(),f=C(),R&&R.c(),c=C(),d=A("hr"),_=C(),y=A("p"),S=w("Part of scheme: "),O=w(T),E=C(),F=A("p"),F.textContent=`Authority or region: ${(H=r[1].browse)==null?void 0:H.authority_or_region}`,D=C(),I=A("p"),I.textContent=`Capital scheme ID: ${(te=r[1].browse)==null?void 0:te.capital_scheme_id}`,N=C(),M=A("p"),M.textContent=`Funding programme: ${(ye=r[1].browse)==null?void 0:ye.funding_programme}`,L=C(),z&&z.c(),t.a=o,be(e,"max-width","30vw")},m(H,te){$(H,e,te),k(e,n),t.m(l,n),k(n,o),k(n,u),k(n,s),k(e,a),P&&P.m(e,null),k(e,f),R&&R.m(e,null),k(e,c),k(e,d),k(e,_),k(e,y),k(y,S),k(y,O),k(e,E),k(e,F),k(e,D),k(e,I),k(e,N),k(e,M),k(e,L),z&&z.m(e,null)},p(H,[te]){var ye;te&1&&l!==(l=H[2](H[0].name)+"")&&t.p(l),te&1&&i!==(i=H[0].intervention_type+"")&&U(u,i),H[0].length_meters?P?P.p(H,te):(P=gr(H),P.c(),P.m(e,f)):P&&(P.d(1),P=null),H[0].description?R?R.p(H,te):(R=dr(H),R.c(),R.m(e,c)):R&&(R.d(1),R=null),te&1&&T!==(T=H[0].scheme_reference+"")&&U(O,T),(ye=H[1].browse)!=null&&ye.current_milestone&&z.p(H,te)},i:ee,o:ee,d(H){H&&p(e),P&&P.d(),R&&R.d(),z&&z.d()}}}function $$(r,e,n){let t,l;ue(r,Ut,s=>n(3,t=s)),ue(r,Lt,s=>n(4,l=s));let{props:o}=e,i=l.get(o.scheme_reference);function u(s){return t?s.replace(new RegExp(t,"gi"),a=>`<mark>${a}</mark>`):s}return r.$$set=s=>{"props"in s&&n(0,o=s.props)},[o,i,u]}class dn extends W{constructor(e){super(),V(this,e,$$,c$,G,{props:0})}}function p$(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&U(t,n)},d(l){l&&p(e)}}}function m$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _$(r){let e,n,t,l;return e=new le({props:{$$slots:{default:[p$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",$$slots:{default:[m$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function g$(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&U(t,n)},d(l){l&&p(e)}}}function d$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function h$(r){let e,n,t,l;return e=new le({props:{$$slots:{default:[g$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",$$slots:{default:[d$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function b$(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&U(t,n)},d(l){l&&p(e)}}}function v$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function w$(r){let e,n,t,l;return e=new le({props:{$$slots:{default:[b$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",$$slots:{default:[v$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function k$(r){let e,n,t,l,o,i,u,s,a,f;const c=[B("interventions-points"),{filter:["all",wn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Gt,"circle-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let d={$$slots:{default:[_$]},$$scope:{ctx:r}};for(let I=0;I<c.length;I+=1)d=J(d,c[I]);e=new Xe({props:d});const _=[B("interventions-lines"),{filter:["all",kn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":vt,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[h$]},$$scope:{ctx:r}};for(let I=0;I<_.length;I+=1)y=J(y,_[I]);t=new $e({props:y});const S=[B("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*vt,"circle-opacity":0,"circle-stroke-color":He.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let I=0;I<S.length;I+=1)T=J(T,S[I]);o=new Xe({props:T});const O=[B("interventions-polygons"),{filter:["all",Rt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":K(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let E={$$slots:{default:[w$]},$$scope:{ctx:r}};for(let I=0;I<O.length;I+=1)E=J(E,O[I]);u=new ze({props:E});const F=[B("interventions-polygons-outlines"),{filter:["all",Rt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*vt}},{layout:{visibility:r[0]?"visible":"none"}}];let D={};for(let I=0;I<F.length;I+=1)D=J(D,F[I]);return a=new $e({props:D}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(I,N){b(e,I,N),$(I,n,N),b(t,I,N),$(I,l,N),b(o,I,N),$(I,i,N),b(u,I,N),$(I,s,N),b(a,I,N),f=!0},p(I,N){const M=N&29?Y(c,[c[0],N&24&&{filter:["all",wn,I[3],I[4]]},c[2],c[3],N&4&&{paint:{"circle-color":I[2],"circle-radius":Gt,"circle-opacity":K(1,.5)}},N&1&&{layout:{visibility:I[0]?"visible":"none"}},c[6]]):{};N&128&&(M.$$scope={dirty:N,ctx:I}),e.$set(M);const L=N&13?Y(_,[_[0],N&8&&{filter:["all",kn,I[3]]},_[2],_[3],N&4&&{paint:{"line-color":I[2],"line-width":vt,"line-opacity":K(1,.5)}},N&1&&{layout:{visibility:I[0]?"visible":"none"}},_[6]]):{};N&128&&(L.$$scope={dirty:N,ctx:I}),t.$set(L);const P=N&1?Y(S,[S[0],S[1],S[2],{layout:{visibility:I[0]?"visible":"none"}}]):{};o.$set(P);const R=N&13?Y(O,[O[0],N&8&&{filter:["all",Rt,I[3]]},O[2],O[3],N&4&&{paint:{"fill-color":I[2],"fill-opacity":K(.2,.5)}},N&1&&{layout:{visibility:I[0]?"visible":"none"}},O[6]]):{};N&128&&(R.$$scope={dirty:N,ctx:I}),u.$set(R);const z=N&13?Y(F,[F[0],N&8&&{filter:["all",Rt,I[3]]},N&4&&{paint:{"line-color":I[2],"line-opacity":.5,"line-width":.7*vt}},N&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};a.$set(z)},i(I){f||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(o.$$.fragment,I),m(u.$$.fragment,I),m(a.$$.fragment,I),f=!0)},o(I){g(e.$$.fragment,I),g(t.$$.fragment,I),g(o.$$.fragment,I),g(u.$$.fragment,I),g(a.$$.fragment,I),f=!1},d(I){I&&(p(n),p(l),p(i),p(s)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I)}}}function y$(r){let e,n;return e=new Nt({props:{data:r[1],$$slots:{default:[k$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function S$(r,e,n){let t,l;ue(r,gt,a=>n(5,l=a));let{showSchemes:o}=e,i=Xr();const u=["!=",["get","hide_while_editing"],!0],s=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=nl(l))},[o,t,i,u,s,l]}class O$ extends W{constructor(e){super(),V(this,e,S$,y$,G,{showSchemes:0})}}function hr(r,e,n){const t=r.slice();return t[10]=e[n],t}function T$(r){let e,n;return e=new n$({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function br(r){let e,n,t,l;function o(s){r[7](s)}function i(s){r[8](s)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new xs({props:u}),Z.push(()=>Q(e,"schemesToBeShown",o)),Z.push(()=>Q(e,"show",i)),{c(){h(e.$$.fragment)},m(s,a){b(e,s,a),l=!0},p(s,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=s[1],x(()=>n=!1)),!t&&a&4&&(t=!0,f.show=s[2],x(()=>t=!1)),e.$set(f)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){v(e,s)}}}function vr(r){let e,n;return e=new f$({props:{scheme:r[10]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.scheme=t[10]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wr(r){let e=r[1].has(r[10].scheme_reference),n,t,l=e&&vr(r);return{c(){l&&l.c(),n=ke()},m(o,i){l&&l.m(o,i),$(o,n,i),t=!0},p(o,i){i&34&&(e=o[1].has(o[10].scheme_reference)),e?l?(l.p(o,i),i&34&&m(l,1)):(l=vr(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(ae(),g(l,1,1,()=>{l=null}),fe())},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function C$(r){let e,n,t,l,o,i,u,s,a,f,c=fn()=="Private (development)",d,_,y,S,T,O,E,F;o=new $l({props:{boundaryGeojson:r[3]}}),u=new Rl({}),a=new rl({});let D=c&&T$(r);_=new ul({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[6]}}),S=new Lr({props:{errorMessage:r[0]}});let I=r[5].size>0&&br(r),N=De(r[5].values()),M=[];for(let P=0;P<N.length;P+=1)M[P]=wr(hr(r,N,P));const L=P=>g(M[P],1,1,()=>{M[P]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),D&&D.c(),d=C(),h(_.$$.fragment),y=C(),h(S.$$.fragment),T=C(),I&&I.c(),O=C(),E=A("ul");for(let P=0;P<M.length;P+=1)M[P].c();be(n,"display","flex"),be(n,"justify-content","space-between"),q(e,"slot","sidebar"),q(e,"class","govuk-prose")},m(P,R){$(P,e,R),k(e,n),k(n,t),k(n,l),b(o,n,null),k(e,i),b(u,e,null),k(e,s),b(a,e,null),k(e,f),D&&D.m(e,null),k(e,d),b(_,e,null),k(e,y),b(S,e,null),k(e,T),I&&I.m(e,null),k(e,O),k(e,E);for(let z=0;z<M.length;z+=1)M[z]&&M[z].m(E,null);F=!0},p(P,R){const z={};R&8&&(z.boundaryGeojson=P[3]),o.$set(z),c&&D.p(P,R);const j={};if(R&1&&(j.errorMessage=P[0]),S.$set(j),P[5].size>0?I?(I.p(P,R),R&32&&m(I,1)):(I=br(P),I.c(),m(I,1),I.m(e,O)):I&&(ae(),g(I,1,1,()=>{I=null}),fe()),R&34){N=De(P[5].values());let H;for(H=0;H<N.length;H+=1){const te=hr(P,N,H);M[H]?(M[H].p(te,R),m(M[H],1)):(M[H]=wr(te),M[H].c(),m(M[H],1),M[H].m(E,null))}for(ae(),H=N.length;H<M.length;H+=1)L(H);fe()}},i(P){if(!F){m(o.$$.fragment,P),m(u.$$.fragment,P),m(a.$$.fragment,P),m(D),m(_.$$.fragment,P),m(S.$$.fragment,P),m(I);for(let R=0;R<N.length;R+=1)m(M[R]);F=!0}},o(P){g(o.$$.fragment,P),g(u.$$.fragment,P),g(a.$$.fragment,P),g(D),g(_.$$.fragment,P),g(S.$$.fragment,P),g(I),M=M.filter(Boolean);for(let R=0;R<M.length;R+=1)g(M[R]);F=!1},d(P){P&&p(e),v(o),v(u),v(a),D&&D.d(),v(_),v(S),I&&I.d(),St(M,P)}}}function A$(r){let e,n,t,l,o,i,u;return e=new fl({}),t=new O$({props:{showSchemes:r[2]}}),i=new e$({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),o=A("div"),h(i.$$.fragment),q(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),$(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&4&&(f.showSchemes=s[2]),t.$set(f)},i(s){u||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),v(i)}}}function L$(r){let e,n,t;return n=new ll({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[A$]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),q(e,"slot","main")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.style=l[4]),o&8196&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function I$(r){let e,n;return e=new ml({props:{$$slots:{main:[L$],sidebar:[C$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&8255&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function P$(r,e,n){let t,l,o;ue(r,gt,_=>n(3,t=_)),ue(r,yn,_=>n(4,l=_)),ue(r,Lt,_=>n(5,o=_)),$n(()=>{ol()});const i=new URLSearchParams(window.location.search);yn.set(i.get("style")||"dataviz");let u="",s=new Set,a=!0;function f(_){try{gt.set(JSON.parse(_)),Lt.set(Hs(t)),n(0,u="")}catch(y){n(0,u=`The file you loaded is broken: ${y}`)}}function c(_){s=_,n(1,s)}function d(_){a=_,n(2,a)}return[u,s,a,t,l,o,f,c,d]}class M$ extends W{constructor(e){super(),V(this,e,P$,I$,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new M$({target:document.getElementById("app")});
