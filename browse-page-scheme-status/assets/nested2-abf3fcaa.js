import{S as W,i as V,s as z,e as L,h as G,$ as be,j as $,W as ee,o as p,aP as Xr,b as Z,c as Q,d as A,g as h,m as b,w as yt,l as x,t as m,n as g,p as v,X as It,Y as Pt,Z as Mt,_ as Et,a7 as De,J as ae,K as fe,aQ as St,u as w,k,D as H,I as ke,N as an,O as wr,q as ue,P as kr,Q as yr,T as Ot,U as Sr,V as Or,aX as Kr,aY as lt,a4 as hn,aZ as Zr,f as fn,aO as Jr,ar as un,aj as Vt,ae as cn,r as $n,F as Tr,a as en,v as zt,aW as X,a_ as ce,a$ as me,B as K,ah as J,C as $e,ak as Y,b0 as ne,G as Nt,H as Yr,aS as Qr,ab as bn,R as Cr,b1 as pn,b2 as mn,E as Ar,as as xr,ag as el,aU as vn,al as tl,am as wn,an as kn,ao as Rt,aV as yn,L as nl,M as rl,y as ll}from"./index-136a6862.js";import{C as Te,d as He,j as Tt,f as Dt,h as se,l as B,c as Gt,k as ol,S as sl,B as il,b as vt,G as al}from"./StreetViewTool-c447e809.js";import{a as ze,F as fl}from"./Popup-b25289ce.js";import{P as le}from"./Popup-883dcbf6.js";import{R as ul,C as Xe,Z as cl}from"./ZoomOutMap-930fd7e7.js";import{L as $l,a as pl}from"./LineMeasureController-d5170cc7.js";function ml(r){let e;return{c(){e=L("span"),G(e,"class","svelte-kzgqtg"),be(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&be(e,"background",n[0])},i:ee,o:ee,d(n){n&&p(e)}}}function _l(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class _e extends W{constructor(e){super(),V(this,e,_l,ml,z,{color:0})}}const gl="/atip/browse-page-scheme-status/assets/help-d011708a.svg";function dl(r){let e,n;const t=r[1].default,l=It(t,r,r[4],null);return{c(){e=L("div"),l&&l.c(),G(e,"class","govuk-prose")},m(o,i){$(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Pt(l,t,o,o[4],n?Et(t,o[4],i,null):Mt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){g(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function hl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[dl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Xr({props:a}),Z.push(()=>Q(t,"open",s)),{c(){e=L("button"),e.innerHTML=`<img src="${gl}" title="Help" alt="Help"/>`,n=A(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,i||(u=yt(e,"click",r[2]),i=!0)},p(f,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,d.open=f[0],x(()=>l=!1)),t.$set(d)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){g(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),i=!1,u()}}}function bl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class ie extends W{constructor(e){super(),V(this,e,bl,hl,z,{})}}function Sn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function On(r){let e,n,t,l=r[1]+"",o,i,u;return n=new _e({props:{color:r[2]}}),{c(){e=L("li"),h(n.$$.fragment),t=A(),o=w(l),i=A()},m(s,a){$(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p(s,a){const f={};a&1&&(f.color=s[2]),n.$set(f),(!u||a&1)&&l!==(l=s[1]+"")&&H(o,l)},i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){g(n.$$.fragment,s),u=!1},d(s){s&&p(e),v(n)}}}function vl(r){let e,n,t=De(r[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=On(Sn(r,t,i));const o=i=>g(l[i],1,1,()=>{l[i]=null});return{c(){e=L("ul");for(let i=0;i<l.length;i+=1)l[i].c()},m(i,u){$(i,e,u);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);n=!0},p(i,u){if(u&1){t=De(i[0]);let s;for(s=0;s<t.length;s+=1){const a=Sn(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=On(a),l[s].c(),m(l[s],1),l[s].m(e,null))}for(ae(),s=t.length;s<l.length;s+=1)o(s);fe()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(i){i&&p(e),St(l,i)}}}function wl(r){let e,n;return e=new Te({props:{label:"Legend",$$slots:{default:[vl]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class yl extends W{constructor(e){super(),V(this,e,kl,wl,z,{rows:0})}}function Tn(r){let e=r[0],n,t,l=Cn(r);return{c(){l.c(),n=ke()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&z(e,e=o[0])?(ae(),g(l,1,1,ee),fe(),l=Cn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Cn(r){let e;const n=r[10].default,t=It(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Pt(t,n,l,l[9],e?Et(n,l[9],o,null):Mt(l[9]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Sl(r){let e,n,t=r[0]&&Tn(r);return{c(){t&&t.c(),e=ke()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Tn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ae(),g(t,1,1,()=>{t=null}),fe())},i(l){n||(m(t),n=!0)},o(l){g(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Ol(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=an("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=wr();ue(r,f,y=>n(8,l=y)),ue(r,c,y=>n(0,t=y));let d,_=!0;return kr(()=>{t&&d&&l&&(yr(f,t,d),Ot(c,t=null,t),n(6,d=void 0))}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,s=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,i=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Ot(c,t=u,t),Sr(l,t,Or({type:"raster",tiles:s,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,d=l==null?void 0:l.getSource(t)),n(7,_=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,d=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&d&&(_?n(7,_=!1):d.setTiles(s))},[t,f,c,u,s,a,d,_,l,i,o]}class Tl extends W{constructor(e){super(),V(this,e,Ol,Sl,z,{id:3,tiles:4,tileSize:5})}}function Cl(r){let e;const n=r[16].default,t=It(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Pt(t,n,l,l[24],e?Et(n,l[24],o,null):Mt(l[24]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Al(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Cl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Kr({props:o}),Z.push(()=>Q(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ll(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=an("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:d=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:O=!1}=e,{hovered:N=null}=e,{eventsIfTopMost:F=!1}=e,{interactive:D=!0}=e;function C(j){N=j,n(0,N)}function E(j){lt.call(this,r,j)}function M(j){lt.call(this,r,j)}function I(j){lt.call(this,r,j)}function P(j){lt.call(this,r,j)}function R(j){lt.call(this,r,j)}function q(j){lt.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,i=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,s=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,d=j.filter),"applyToClusters"in j&&n(9,_=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,S=j.maxzoom),"hoverCursor"in j&&n(12,T=j.hoverCursor),"manageHoverState"in j&&n(13,O=j.manageHoverState),"hovered"in j&&n(0,N=j.hovered),"eventsIfTopMost"in j&&n(14,F=j.eventsIfTopMost),"interactive"in j&&n(15,D=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[N,o,i,u,s,a,f,c,d,_,y,S,T,O,F,D,t,C,E,M,I,P,R,q,l]}class Il extends W{constructor(e){super(),V(this,e,Ll,Al,z,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function An(r){let e=r[0],n,t,l=Ln(r);return{c(){l.c(),n=ke()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&z(e,e=o[0])?(ae(),g(l,1,1,ee),fe(),l=Ln(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Ln(r){let e;const n=r[9].default,t=It(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Pt(t,n,l,l[8],e?Et(n,l[8],o,null):Mt(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Pl(r){let e,n,t=r[0]&&An(r);return{c(){t&&t.c(),e=ke()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=An(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ae(),g(t,1,1,()=>{t=null}),fe())},i(l){n||(m(t),n=!0)},o(l){g(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Ml(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=an("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!hn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Zr;hn.addProtocol("pmtiles",y.tile)}const{map:c,self:d}=wr();ue(r,c,y=>n(7,l=y)),ue(r,d,y=>n(0,t=y));let _;return kr(()=>{t&&l&&(yr(c,t,_),Ot(d,t=null,t),_=void 0)}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,s=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,i=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Ot(d,t=u,t),Sr(l,t,Or({type:"vector",url:s,tiles:a,promoteId:f}),y=>l&&y===t,()=>{t&&(_=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{_=l==null?void 0:l.getSource(u)}))},[t,c,d,u,s,a,f,l,i,o]}class pe extends W{constructor(e){super(),V(this,e,Ml,Pl,z,{id:3,url:4,tiles:5,promoteId:6})}}function El(r){let e;return{c(){e=L("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nl(r){let e,n,t=r[0]=="Private (development)"&&El();return{c(){t&&t.c(),e=A(),n=L("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),$(l,e,o),$(l,n,o)},p:ee,d(l){l&&(p(e),p(n)),t&&t.d(l)}}}function Dl(r){let e,n,t,l,o,i;return o=new ie({props:{$$slots:{default:[Nl]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("App version: "),t=w(r[0]),l=A(),h(o.$$.fragment)},m(u,s){$(u,e,s),k(e,n),k(e,t),k(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(m(o.$$.fragment,u),i=!0)},o(u){g(o.$$.fragment,u),i=!1},d(u){u&&p(e),v(o)}}}function Fl(r){return[fn()]}class jl extends W{constructor(e){super(),V(this,e,Fl,Dl,z,{})}}const Rl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var de=Uint8Array,Qe=Uint16Array,Lr=Uint32Array,Ir=new de([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Pr=new de([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Bl=new de([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Mr=function(r,e){for(var n=new Qe(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Lr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Er=Mr(Ir,2),Nr=Er[0],Hl=Er[1];Nr[28]=258,Hl[258]=28;var Ul=Mr(Pr,0),zl=Ul[0],tn=new Qe(32768);for(var oe=0;oe<32768;++oe){var We=(oe&43690)>>>1|(oe&21845)<<1;We=(We&52428)>>>2|(We&13107)<<2,We=(We&61680)>>>4|(We&3855)<<4,tn[oe]=((We&65280)>>>8|(We&255)<<8)>>>1}var kt=function(r,e,n){for(var t=r.length,l=0,o=new Qe(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Qe(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Qe(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)u[tn[c]>>>s]=a}else for(u=new Qe(t),l=0;l<t;++l)r[l]&&(u[l]=tn[i[r[l]-1]++]>>>15-r[l]);return u},Ft=new de(288);for(var oe=0;oe<144;++oe)Ft[oe]=8;for(var oe=144;oe<256;++oe)Ft[oe]=9;for(var oe=256;oe<280;++oe)Ft[oe]=7;for(var oe=280;oe<288;++oe)Ft[oe]=8;var Dr=new de(32);for(var oe=0;oe<32;++oe)Dr[oe]=5;var Gl=kt(Ft,9,1),ql=kt(Dr,5,1),Xt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Se=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Kt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Wl=function(r){return(r+7)/8|0},_n=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Qe:r.BYTES_PER_ELEMENT==4?Lr:de)(n-e);return t.set(r.subarray(e,n)),t},Vl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Oe=function(r,e,n){var t=new Error(e||Vl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Oe),!n)throw t;return t},Xl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new de(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new de(t*3));var i=function(nt){var Je=e.length;if(nt>Je){var rt=new de(Math.max(Je*2,nt));rt.set(e),e=rt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,d=n.m,_=n.n,y=t*8;do{if(!f){u=Se(r,s,1);var S=Se(r,s+1,3);if(s+=3,S)if(S==1)f=Gl,c=ql,d=9,_=5;else if(S==2){var F=Se(r,s,31)+257,D=Se(r,s+10,15)+4,C=F+Se(r,s+5,31)+1;s+=14;for(var E=new de(C),M=new de(19),I=0;I<D;++I)M[Bl[I]]=Se(r,s+I*3,7);s+=D*3;for(var P=Xt(M),R=(1<<P)-1,q=kt(M,P,1),I=0;I<C;){var j=q[Se(r,s,R)];s+=j&15;var T=j>>>4;if(T<16)E[I++]=T;else{var U=0,re=0;for(T==16?(re=3+Se(r,s,3),s+=2,U=E[I-1]):T==17?(re=3+Se(r,s,7),s+=3):T==18&&(re=11+Se(r,s,127),s+=7);re--;)E[I++]=U}}var ye=E.subarray(0,F),ve=E.subarray(F);d=Xt(ye),_=Xt(ve),f=kt(ye,d,1),c=kt(ve,_,1)}else Oe(1);else{var T=Wl(s)+4,O=r[T-4]|r[T-3]<<8,N=T+O;if(N>t){o&&Oe(0);break}l&&i(a+O),e.set(r.subarray(T,N),a),n.b=a+=O,n.p=s=N*8,n.f=u;continue}if(s>y){o&&Oe(0);break}}l&&i(a+131072);for(var et=(1<<d)-1,dt=(1<<_)-1,tt=s;;tt=s){var U=f[Kt(r,s)&et],ge=U>>>4;if(s+=U&15,s>y){o&&Oe(0);break}if(U||Oe(2),ge<256)e[a++]=ge;else if(ge==256){tt=s,f=null;break}else{var ht=ge-254;if(ge>264){var I=ge-257,Re=Ir[I];ht=Se(r,s,(1<<Re)-1)+Nr[I],s+=Re}var qe=c[Kt(r,s)&dt],Ze=qe>>>4;qe||Oe(3),s+=qe&15;var ve=zl[Ze];if(Ze>3){var Re=Pr[Ze];ve+=Kt(r,s)&(1<<Re)-1,s+=Re}if(s>y){o&&Oe(0);break}l&&i(a+131072);for(var bt=a+ht;a<bt;a+=4)e[a]=e[a-ve],e[a+1]=e[a+1-ve],e[a+2]=e[a+2-ve],e[a+3]=e[a+3-ve];a=bt}}n.l=f,n.p=tt,n.b=a,n.f=u,f&&(u=1,n.m=d,n.d=c,n.n=_)}while(!u);return a==e.length?e:_n(e,0,a)},Kl=new de(0),Ne=function(r,e){return r[e]|r[e+1]<<8},Ce=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Zt=function(r,e){return Ce(r,e)+Ce(r,e+4)*4294967296};function Zl(r,e){return Xl(r,e)}var nn=typeof TextDecoder<"u"&&new TextDecoder,Jl=0;try{nn.decode(Kl,{stream:!0}),Jl=1}catch{}var Yl=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,_n(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Fr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(nn)return nn.decode(r);var l=Yl(r),o=l[0],i=l[1];return i.length&&Oe(8),o}}var Ql=function(r,e){return e+30+Ne(r,e+26)+Ne(r,e+28)},xl=function(r,e,n){var t=Ne(r,e+28),l=Fr(r.subarray(e+46,e+46+t),!(Ne(r,e+8)&2048)),o=e+46+t,i=Ce(r,e+20),u=n&&i==4294967295?eo(r,o):[i,Ce(r,e+24),Ce(r,e+42)],s=u[0],a=u[1],f=u[2];return[Ne(r,e+10),s,a,l,o+Ne(r,e+30)+Ne(r,e+32),f]},eo=function(r,e){for(;Ne(r,e)!=1;e+=4+Ne(r,e+2));return[Zt(r,e+12),Zt(r,e+4),Zt(r,e+20)]};function to(r,e){for(var n={},t=r.length-22;Ce(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Oe(13);var l=Ne(r,t+8);if(!l)return{};var o=Ce(r,t+16),i=o==4294967295||l==65535;if(i){var u=Ce(r,t-12);i=Ce(r,u)==101075792,i&&(l=Ce(r,u+32),o=Ce(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=xl(r,o,i),c=f[0],d=f[1],_=f[2],y=f[3],S=f[4],T=f[5],O=Ql(r,T);o=S,(!s||s({name:y,size:d,originalSize:_,compression:c}))&&(c?c==8?n[y]=Zl(r.subarray(O,O+d),new de(_)):Oe(14,"unknown compression type "+c):n[y]=_n(r,O,O+d))}return n}function no(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Jt):Jt(r)}function Jt(r){var e=new Uint8Array(r),n=to(e);return Promise.resolve(ro(n))}function ro(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Fr(r[l])}return e}function Fe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&xe(t)===e)return t;n++}}function jt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&xe(l)===e&&n.push(l),t++}return n}function qt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&xe(l)===e&&n(l,t):n(l,t),t++}}function lo(r,e,n){var t=[];return qt(r,e,function(l,o){t.push(n(l,o))}),t}var oo=/.+\:/;function xe(r){return r.tagName.replace(oo,"")}function jr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+xe(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=jr(r.childNodes[t]),t++;return e+="</"+xe(r)+">",e}function so(r){var e=r.documentElement,n=Fe(e,"sheetData"),t=[];return qt(n,"row",function(l){qt(l,"c",function(o){t.push(o)})}),t}function io(r,e){return Fe(e,"v")}function ao(r,e){if(e.firstChild&&xe(e.firstChild)==="is"&&e.firstChild.firstChild&&xe(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function fo(r){var e=r.documentElement,n=Fe(e,"dimension");if(n)return n.getAttribute("ref")}function uo(r){var e=r.documentElement,n=Fe(e,"cellStyleXfs");return n?jt(n,"xf"):[]}function co(r){var e=r.documentElement,n=Fe(e,"cellXfs");return n?jt(n,"xf"):[]}function $o(r){var e=r.documentElement,n=Fe(e,"numFmts");return n?jt(n,"numFmt"):[]}function po(r){var e=r.documentElement;return lo(e,"si",function(n){var t=Fe(n,"t");if(t)return t.textContent;var l="";return qt(n,"r",function(o){l+=Fe(o,"t").textContent}),l})}function mo(r){var e=r.documentElement;return Fe(e,"workbookPr")}function _o(r){var e=r.documentElement;return jt(e,"Relationship")}function go(r){var e=r.documentElement,n=Fe(e,"sheets");return jt(n,"sheet")}function ho(r,e){var n=e.createDocument(r),t={},l=mo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return go(n).forEach(o),t}function bo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Yt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Yt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Yt(u);break}};return _o(n).forEach(l),t}function Yt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function In(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Pn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?In(Object(n),!0).forEach(function(t){vo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function vo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function wo(r,e){if(!r)return{};var n=e.createDocument(r),t=uo(n).map(Qt),l=$o(n).map(ko).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Pn(Pn({},t[u.xfId]),Qt(u,l)):Qt(u,l)};return co(n).map(o)}function ko(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Qt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function yo(r,e){return r?po(e.createDocument(r)):[]}function Rr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function So(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Oo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oo(r,e){if(r){if(typeof r=="string")return Mn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(r,e)}}function Mn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function To(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Co.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&Io(l.numberFormat.template))return!0}}var Co=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Ao=/^\[\$-414\]/,Lo=/;@$/;function Io(r){r=r.toLowerCase(),r=r.replace(Ao,""),r=r.replace(Lo,"");for(var e=r.split(/\W+/),n=So(e),t;!(t=n()).done;){var l=t.value;if(Po.indexOf(l)<0)return!1}return!0}var Po=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Mo(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=xt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=xt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=xt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Eo(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var d=Number(r);if(isNaN(d))throw new Error('Invalid "numeric" cell value: '.concat(r));r=d,To(r,o(),i,a)&&(r=Rr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Eo(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function xt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var No=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Do(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function Fo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=No.indexOf(r[n]),n++;return e}function Br(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Fo(r[0].trim())]}function jo(r,e,n,t,l,o,i){var u=Br(r.getAttribute("r")),s=io(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:Mo(a,f,{getInlineStringValue:function(){return ao(e,r)},getInlineStringXml:function(){return jr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function Ro(r,e,n,t,l,o){var i=so(r);return i.length===0?[]:i.map(function(u){return jo(u,r,e,n,t,l,o)})}function Bo(r,e){return Go(r)||zo(r,e)||Uo(r,e)||Ho()}function Ho(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uo(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function zo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Go(r){if(Array.isArray(r))return r}function qo(r){var e=fo(r);if(e)return e=e.split(":").map(Br).map(function(n){var t=Bo(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Wo(r,e,n,t,l,o){var i=e.createDocument(r),u=Ro(i,e,n,t,l,o),s=qo(i)||Do(u);return{cells:u,dimensions:s}}function Vo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Xo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xo(r,e){if(r){if(typeof r=="string")return Nn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(r,e)}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ko(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=Vo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Zo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Jo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jo(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Yo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Zo(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Qo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Hr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xo(r,e){return ns(r)||ts(r,e)||Hr(r,e)||es()}function es(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hr(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ts(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ns(r){if(Array.isArray(r))return r}function rs(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=xo(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=Qo(t),d;!(d=c()).done;){var _=d.value,y=_.row-1,S=_.column-1;S<i&&y<u&&(s[y][S]=_.value)}var T=e.rowMap;if(T)for(var O=0;O<s.length;)T[O]=O,O++;return s=Ko(Yo(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(s=e.transformData(s)),s}function ls(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=os(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function os(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Rn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function ss(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(t){is(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function is(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function as(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=ss({sheet:1},n));var t=function(d){if(!r[d])throw new Error('"'.concat(d,'" file not found inside the *.xlsx file zip archive'));return r[d]},l=bo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?yo(t(l.sharedStrings),e):[],i=l.styles?wo(t(l.styles),e):{},u=ho(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var d=c.name;return{name:d}});var s=fs(n.sheet,u.sheets);if(!s||!l.sheets[s])throw us(n.sheet,u.sheets);var a=Wo(t(l.sheets[s]),e,o,i,u,n),f=rs(a,n);return n.properties?{data:f,properties:u}:f}function fs(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=ls(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function us(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function rn(r){"@babel/helpers - typeof";return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(r)}function Bn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function cs(r,e,n){return e&&Bn(r.prototype,e),n&&Bn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function $s(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ps(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ct(r,e)}function ms(r){var e=Ur();return function(){var t=At(r),l;if(e){var o=At(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return _s(this,l)}}function _s(r,e){if(e&&(rn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gs(r)}function gs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ln(r){var e=typeof Map=="function"?new Map:void 0;return ln=function(t){if(t===null||!ds(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Ht(t,arguments,At(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ct(l,t)},ln(r)}function Ht(r,e,n){return Ur()?Ht=Reflect.construct:Ht=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Ct(a,i.prototype),a},Ht.apply(null,arguments)}function Ur(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ds(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ct(r,e){return Ct=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Ct(r,e)}function At(r){return At=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},At(r)}var he=function(r){ps(n,r);var e=ms(n);function n(t){var l;return $s(this,n),l=e.call(this,"invalid"),l.reason=t,l}return cs(n)}(ln(Error));function hs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new he("not_a_number")}if(typeof r!="number")throw new he("not_a_number");if(isNaN(r))throw new he("invalid_number");if(!isFinite(r))throw new he("out_of_bounds");return r}function bs(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new he("invalid_number");if(!isFinite(r))throw new he("out_of_bounds");return String(r)}throw new he("not_a_string")}function vs(r){if(typeof r=="boolean")return r;throw new he("not_a_boolean")}function ws(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new he("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new he("invalid_number");if(!isFinite(r))throw new he("out_of_bounds");var t=Rr(r,n);if(isNaN(t.valueOf()))throw new he("out_of_bounds");return t}throw new he("not_a_date")}function ks(r,e){return Os(r)||Ss(r,e)||zr(r,e)||ys()}function ys(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ss(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Os(r){if(Array.isArray(r))return r}function on(r){"@babel/helpers - typeof";return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(r)}function Ts(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=zr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zr(r,e){if(r){if(typeof r=="string")return Hn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hn(r,e)}}function Hn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Un(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function zn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Un(Object(n),!0).forEach(function(t){Cs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Cs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Gn={isColumnOriented:!1};function As(r,e,n){n?n=zn(zn({},Gn),n):n=Gn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;Ms(e),l&&(r=Ps(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Gr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var d=Ts(a),_;!(_=d()).done;){var y=_.value;y.row=o[y.row-1]+1}return{rows:s,errors:a}}function Gr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var d=f[a],_=r[d],y=on(_.type)==="object"&&!Array.isArray(_.type),S=e[t.indexOf(d)];S===void 0&&(S=null);var T=void 0,O=void 0,N=void 0;if(y)T=Gr(_.type,e,n,t,l,o);else if(S===null)T=null;else if(Array.isArray(_.type)){var F=!1,D=Is(S).map(function(E){var M=qn(E,_,o);return M.error&&(T=E,O=M.error,N=M.reason),M.value!==null&&(F=!0),M.value});O||(T=F?D:null)}else{var C=qn(S,_,o);O=C.error,N=C.reason,T=O?S:C.value}!O&&T===null&&_.required&&(O="required"),O?(O={error:O,row:n+1,column:d,value:T},N&&(O.reason=N),_.type&&(O.type=_.type),l.push(O)):(u&&T!==null&&(u=!1),(T!==null||o.includeNullValues)&&(i[_.prop]=T))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function qn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=ot(r,e.parse):e.type?t=Ls(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function ot(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Ls(r,e,n){switch(e){case String:return ot(r,bs);case Number:return ot(r,hs);case Date:return ot(r,function(t){return ws(t,{properties:n.properties})});case Boolean:return ot(r,vs);default:if(typeof e=="function")return ot(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function qr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=qr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function Is(r){for(var e=[],n=0;n<r.length;){var t=qr(r,",",n),l=ks(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var Ps=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Ms(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function sn(r){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(r)}function Wr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;sn(o)==="object"&&(o=Object.keys(r[l])[0],i=Wr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var Es=["schema","map"];function Wn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Bt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wn(Object(n),!0).forEach(function(t){Ns(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ns(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ds(r,e){if(r==null)return{};var n=Fs(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Fs(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function js(r,e,n){var t=n.schema,l=n.map,o=Ds(n,Es);!t&&l&&(t=Wr(l));var i=as(r,e,Bt(Bt({},o),{},{properties:t||o.properties}));return t?As(i.data,t,Bt(Bt({},o),{},{properties:i.properties})):i}function Rs(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return no(r).then(function(n){return js(n,Rl,e)})}function Bs(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>Hs(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(l.browse.num_features=l.browse.num_features!==void 0?l.browse.num_features+1:1,t.properties.funding_programme=l.browse.funding_programme,t.id=n++)}return e}function Hs(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Us(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Rs(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Jr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function Vr(r){return un(["get","intervention_type"],{area:He.area,route:He.route,crossing:He.crossing,other:He.other},"white")}function Vn(r){return[["Areas",He.area],["Routes",He.route],["Crossings",He.crossing],["Other",He.other]]}const te={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"]},Ue=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20],gt=Vt({type:"FeatureCollection",features:[],schemes:{}}),Lt=Vt(new Map),Xn=Vt(!0),Ut=Vt("");function zs(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Tt({props:u}),Z.push(()=>Q(e,"value",i)),e.$on("change",r[2]),l=new yl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],x(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function Gs(r,e,n){let t,l;ue(r,cn,a=>n(4,t=a)),ue(r,Lt,a=>n(5,l=a));let o="interventionType",i=Vn();function u(){var f;let a;if(o=="interventionType")a=Vr(),n(1,i=Vn());else{let c=new Set;for(let S of l.values())(f=S.browse)!=null&&f.funding_programme&&c.add(S.browse.funding_programme);let d=Array.from(c);d.sort(),n(1,i=[]);let _={},y=0;for(let S of d){let T=te.funding_programmes[y++%te.funding_programmes.length];_[S]=T,i.push([S,T])}a=un(["get","funding_programme"],_,"grey"),n(1,i)}t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function s(a){o=a,n(0,o)}return[o,i,u,s]}class qs extends W{constructor(e){super(),V(this,e,Gs,zs,z,{})}}function Ws(r){let e;return{c(){e=w("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vs(r){let e,n,t,l,o,i;return t=new en({props:{$$slots:{default:[Ws]},$$scope:{ctx:r}}}),t.$on("click",r[11]),{c(){e=L("input"),n=A(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterText")},m(u,s){$(u,e,s),zt(e,r[4]),$(u,n,s),b(t,u,s),l=!0,o||(i=yt(e,"input",r[10]),o=!0)},p(u,s){s&16&&e.value!==u[4]&&zt(e,u[4]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){g(t.$$.fragment,u),l=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,i()}}}function Xs(r){let e,n,t,l,o,i,u,s,a,f;function c(S){r[8](S)}let d={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(d.value=r[2]),e=new Tt({props:d}),Z.push(()=>Q(e,"value",c));function _(S){r[9](S)}let y={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(y.value=r[3]),l=new Tt({props:y}),Z.push(()=>Q(l,"value",_)),u=new Tr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Vs]},$$scope:{ctx:r}}}),a=new qs({}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment),i=A(),h(u.$$.fragment),s=A(),h(a.$$.fragment)},m(S,T){b(e,S,T),$(S,t,T),b(l,S,T),$(S,i,T),b(u,S,T),$(S,s,T),b(a,S,T),f=!0},p(S,T){const O={};T&32&&(O.choices=S[5]),!n&&T&4&&(n=!0,O.value=S[2],x(()=>n=!1)),e.$set(O);const N={};T&64&&(N.choices=S[6]),!o&&T&8&&(o=!0,N.value=S[3],x(()=>o=!1)),l.$set(N);const F={};T&65552&&(F.$$scope={dirty:T,ctx:S}),u.$set(F)},i(S){f||(m(e.$$.fragment,S),m(l.$$.fragment,S),m(u.$$.fragment,S),m(a.$$.fragment,S),f=!0)},o(S){g(e.$$.fragment,S),g(l.$$.fragment,S),g(u.$$.fragment,S),g(a.$$.fragment,S),f=!1},d(S){S&&(p(t),p(i),p(s)),v(e,S),v(l,S),v(u,S),v(a,S)}}}function Ks(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",d,_,y=r[7].other.toLocaleString()+"",S,T,O=Kn(r[7].totalLength).toFixed(1)+"",N,F;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),d=w(c),_=w(" crossings, "),S=w(y),T=w(`
    other, with total LineString length of `),N=w(O),F=w(" miles)")},m(D,C){$(D,e,C),$(D,t,C),$(D,l,C),$(D,i,C),$(D,u,C),$(D,a,C),$(D,f,C),$(D,d,C),$(D,_,C),$(D,S,C),$(D,T,C),$(D,N,C),$(D,F,C)},p(D,C){C&1&&n!==(n=D[0].size.toLocaleString()+"")&&H(t,n),C&128&&o!==(o=D[7].route.toLocaleString()+"")&&H(i,o),C&128&&s!==(s=D[7].area.toLocaleString()+"")&&H(a,s),C&128&&c!==(c=D[7].crossing.toLocaleString()+"")&&H(d,c),C&128&&y!==(y=D[7].other.toLocaleString()+"")&&H(S,y),C&128&&O!==(O=Kn(D[7].totalLength).toFixed(1)+"")&&H(N,O)},d(D){D&&(p(e),p(t),p(l),p(i),p(u),p(a),p(f),p(d),p(_),p(S),p(T),p(N),p(F))}}}function Zs(r){let e,n,t;function l(i){r[12](i)}let o={id:"show-schemes",$$slots:{default:[Ks]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),Z.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65665&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Js(r){let e,n,t,l;return e=new Te({props:{label:"Filters",$$slots:{default:[Xs]},$$scope:{ctx:r}}}),t=new Dt({props:{small:!0,$$slots:{default:[Zs]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65660&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65667&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Kn(r){return r*621371e-9}function Ys(r,e,n){let t,l,o;ue(r,Ut,F=>n(4,t=F)),ue(r,gt,F=>n(13,l=F)),ue(r,Lt,F=>n(14,o=F));let{schemesToBeShown:i=new Set}=e,{show:u=!0}=e,s=[],a="",f=[],c="",d={area:0,route:0,crossing:0,other:0,totalLength:0};$n(()=>{var C,E;let F=new Set,D=new Set;for(let M of o.values())(C=M.browse)!=null&&C.authority_or_region&&F.add(M.browse.authority_or_region),(E=M.browse)!=null&&E.funding_programme&&D.add(M.browse.funding_programme);n(5,s=Array.from(F.entries())),s.sort(),n(6,f=Array.from(D.entries())),f.sort()});function _(F,D,C){let E=F.toLowerCase(),M=P=>{var R,q,j,U;if(E&&!((R=P.properties.name)!=null&&R.toLowerCase().includes(E))&&!((q=P.properties.description)!=null&&q.toLowerCase().includes(E)))return!1;if(D||C){let re=o.get(P.properties.scheme_reference);if(D&&((j=re.browse)==null?void 0:j.authority_or_region)!=D||C&&((U=re.browse)==null?void 0:U.funding_programme)!=C)return!1}return!0};n(0,i=new Set(l.features.filter(M).map(P=>P.properties.scheme_reference))),n(7,d={area:0,route:0,crossing:0,other:0,totalLength:0});let I=P=>{var R,q;return!(!i.has(P.properties.scheme_reference)||E&&!((R=P.properties.name)!=null&&R.toLowerCase().includes(E))&&!((q=P.properties.description)!=null&&q.toLowerCase().includes(E)))};for(let P of l.features)I(P)?(delete P.properties.hide_while_editing,n(7,d[P.properties.intervention_type]++,d),P.geometry.type=="LineString"&&P.properties.length_meters&&n(7,d.totalLength+=P.properties.length_meters,d)):P.properties.hide_while_editing=!0;gt.set(l),n(7,d)}function y(F){a=F,n(2,a)}function S(F){c=F,n(3,c)}function T(){t=this.value,Ut.set(t)}const O=()=>Ot(Ut,t="",t);function N(F){u=F,n(1,u)}return r.$$set=F=>{"schemesToBeShown"in F&&n(0,i=F.schemesToBeShown),"show"in F&&n(1,u=F.show)},r.$$.update=()=>{r.$$.dirty&28&&_(t,a,c)},[i,u,a,c,t,s,f,d,y,S,T,O,N]}class Qs extends W{constructor(e){super(),V(this,e,Ys,Js,z,{schemesToBeShown:0,show:1})}}function xs(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ei(r){let e,n,t,l,o;return t=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[xs]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data  Crown copyright and database right
  2023.`)},m(i,u){$(i,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(m(t.$$.fragment,i),o=!0)},o(i){g(t.$$.fragment,i),o=!1},d(i){i&&p(e),v(t)}}}class je extends W{constructor(e){super(),V(this,e,null,ei,z,{})}}function Zn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Jn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Yn(r){let e,n;return{c(){e=L("span"),n=w(`
    `),be(e,"background",r[5]),be(e,"width","100%"),be(e,"border","1px solid black")},m(t,l){$(t,e,l),k(e,n)},p(t,l){l&1&&be(e,"background",t[5])},d(t){t&&p(e)}}}function Qn(r){let e,n=r[2]+"",t;return{c(){e=L("span"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&H(t,n)},d(l){l&&p(e)}}}function ti(r){let e,n,t,l=De(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Yn(Jn(r,l,s));let i=De(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Qn(Zn(r,i,s));return{c(){e=L("div");for(let s=0;s<o.length;s+=1)o[s].c();n=A(),t=L("div");for(let s=0;s<u.length;s+=1)u[s].c();be(e,"display","flex"),be(t,"display","flex"),be(t,"justify-content","space-between")},m(s,a){$(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(s,n,a),$(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=De(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Jn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Yn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=De(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Zn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Qn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:ee,o:ee,d(s){s&&(p(e),p(n),p(t)),St(o,s),St(u,s)}}}function ni(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ge extends W{constructor(e){super(),V(this,e,ni,ti,z,{colorScale:0,limits:1})}}function xn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function ri(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function li(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function si(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ii(r){let e,n,t,l,o,i,u,s,a,f,c,d;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[li]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[oi]},$$scope:{ctx:r}}}),f=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[si]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=A(),s=L("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(_,y){$(_,e,y),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(_,u,y),$(_,s,y),k(s,a),b(f,s,null),k(s,c),d=!0},p(_,y){const S={};y&65536&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const T={};y&65536&&(T.$$scope={dirty:y,ctx:_}),o.$set(T);const O={};y&65536&&(O.$$scope={dirty:y,ctx:_}),f.$set(O)},i(_){d||(m(t.$$.fragment,_),m(o.$$.fragment,_),m(f.$$.fragment,_),d=!0)},o(_){g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),d=!1},d(_){_&&(p(e),p(u),p(s)),v(t),v(o),v(f)}}}function ai(r){let e,n,t;return n=new ie({props:{$$slots:{default:[ii]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function er(r){let e,n;return e=new Ge({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fi(r){let e;return{c(){e=w("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ui(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ci(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $i(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pi(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y;return o=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ui]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ci]},$$scope:{ctx:r}}}),d=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[$i]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=A(),t=L("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=A(),f=L("p"),c=w("License: "),h(d.$$.fragment),_=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(S,T){$(S,e,T),$(S,n,T),$(S,t,T),k(t,l),b(o,t,null),k(t,i),b(u,t,null),k(t,s),$(S,a,T),$(S,f,T),k(f,c),b(d,f,null),k(f,_),y=!0},p(S,T){const O={};T&65536&&(O.$$scope={dirty:T,ctx:S}),o.$set(O);const N={};T&65536&&(N.$$scope={dirty:T,ctx:S}),u.$set(N);const F={};T&65536&&(F.$$scope={dirty:T,ctx:S}),d.$set(F)},i(S){y||(m(o.$$.fragment,S),m(u.$$.fragment,S),m(d.$$.fragment,S),y=!0)},o(S){g(o.$$.fragment,S),g(u.$$.fragment,S),g(d.$$.fragment,S),y=!1},d(S){S&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(d)}}}function mi(r){let e,n,t;return n=new ie({props:{$$slots:{default:[pi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function tr(r){let e,n;return e=new Ge({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _i(r){let e;return{c(){e=w("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gi(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function di(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hi(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[gi]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[di]},$$scope:{ctx:r}}}),s=new je({}),{c(){e=L("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=A(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function bi(r){let e,n,t;return n=new ie({props:{$$slots:{default:[hi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function nr(r){let e,n,t,l;return t=new Ge({props:{colorScale:r[4],limits:r[6]().map(Ci)}}),{c(){e=L("p"),e.textContent="(people per square kilometres)",n=A(),h(t.$$.fragment)},m(o,i){$(o,e,i),$(o,n,i),b(t,o,i),l=!0},p:ee,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function vi(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=L("p"),n=w("There are "),t=L("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){$(a,e,f),k(e,n),k(e,t),k(t,o),k(e,i),k(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&H(o,l),f&8192&&u!==(u=a[14]+"")&&H(s,u)},d(a){a&&p(e)}}}function wi(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=L("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=L("b"),s=w(u),a=w(`
          cars`)},m(f,c){$(f,e,c),k(e,n),k(e,l),k(e,o),k(e,i),k(i,s),k(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&H(l,t),c&8200&&u!==(u=f[15]+"")&&H(s,u)},d(f){f&&p(e)}}}function ki(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=L("p"),n=L("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){$(f,e,c),k(e,n),k(n,l),k(n,o),k(e,i),k(e,s),k(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&H(l,t),c&8192&&u!==(u=f[14]+"")&&H(s,u)},d(f){f&&p(e)}}}function yi(r){xn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?ki:o[3]=="average_cars_per_household"?wi:vi}let t=n(r),l=t(r);return{c(){l.c(),e=ke()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){xn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Si(r){let e,n;return e=new le({props:{$$slots:{default:[yi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oi(r){let e,n,t,l;const o=[B(Be),{sourceLayer:Be},{paint:{"fill-color":me(["get",r[3]],r[6](),r[4]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Si]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i}),e.$on("click",r[5]);const u=[B(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Y(o,[f&0&&ne(B(Be)),f&0&&{sourceLayer:Be},f&88&&{paint:{"fill-color":me(["get",a[3]],a[6](),a[4]),"fill-opacity":K(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&8?Y(u,[f&0&&ne(B(`${Be}-outline`)),f&0&&{sourceLayer:Be},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ti(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y;function S(I){r[7](I)}let T={id:"percent_households_with_car",$$slots:{right:[ai],default:[ri]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new se({props:T}),Z.push(()=>Q(e,"checked",S)),e.$on("change",r[8]);let O=r[3]=="percent_households_with_car"&&er(r);function N(I){r[9](I)}let F={id:"average_cars_per_household",$$slots:{right:[mi],default:[fi]},$$scope:{ctx:r}};r[1]!==void 0&&(F.checked=r[1]),o=new se({props:F}),Z.push(()=>Q(o,"checked",N)),o.$on("change",r[10]);let D=r[3]=="average_cars_per_household"&&tr(r);function C(I){r[11](I)}let E={id:"population_density",$$slots:{right:[bi],default:[_i]},$$scope:{ctx:r}};r[2]!==void 0&&(E.checked=r[2]),a=new se({props:E}),Z.push(()=>Q(a,"checked",C)),a.$on("change",r[12]);let M=r[3]=="population_density"&&nr(r);return _=new pe({props:{url:`pmtiles://${ce()}/v1/${Be}.pmtiles`,$$slots:{default:[Oi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),O&&O.c(),l=A(),h(o.$$.fragment),u=A(),D&&D.c(),s=A(),h(a.$$.fragment),c=A(),M&&M.c(),d=A(),h(_.$$.fragment)},m(I,P){b(e,I,P),$(I,t,P),O&&O.m(I,P),$(I,l,P),b(o,I,P),$(I,u,P),D&&D.m(I,P),$(I,s,P),b(a,I,P),$(I,c,P),M&&M.m(I,P),$(I,d,P),b(_,I,P),y=!0},p(I,[P]){const R={};P&65536&&(R.$$scope={dirty:P,ctx:I}),!n&&P&1&&(n=!0,R.checked=I[0],x(()=>n=!1)),e.$set(R),I[3]=="percent_households_with_car"?O?(O.p(I,P),P&8&&m(O,1)):(O=er(I),O.c(),m(O,1),O.m(l.parentNode,l)):O&&(ae(),g(O,1,1,()=>{O=null}),fe());const q={};P&65536&&(q.$$scope={dirty:P,ctx:I}),!i&&P&2&&(i=!0,q.checked=I[1],x(()=>i=!1)),o.$set(q),I[3]=="average_cars_per_household"?D?(D.p(I,P),P&8&&m(D,1)):(D=tr(I),D.c(),m(D,1),D.m(s.parentNode,s)):D&&(ae(),g(D,1,1,()=>{D=null}),fe());const j={};P&65536&&(j.$$scope={dirty:P,ctx:I}),!f&&P&4&&(f=!0,j.checked=I[2],x(()=>f=!1)),a.$set(j),I[3]=="population_density"?M?(M.p(I,P),P&8&&m(M,1)):(M=nr(I),M.c(),m(M,1),M.m(d.parentNode,d)):M&&(ae(),g(M,1,1,()=>{M=null}),fe());const U={};P&65544&&(U.$$scope={dirty:P,ctx:I}),_.$set(U)},i(I){y||(m(e.$$.fragment,I),m(O),m(o.$$.fragment,I),m(D),m(a.$$.fragment,I),m(M),m(_.$$.fragment,I),y=!0)},o(I){g(e.$$.fragment,I),g(O),g(o.$$.fragment,I),g(D),g(a.$$.fragment,I),g(M),g(_.$$.fragment,I),y=!1},d(I){I&&(p(t),p(l),p(u),p(s),p(c),p(d)),v(e,I),O&&O.d(I),v(o,I),D&&D.d(I),v(a,I),M&&M.d(I),v(_,I)}}}let Be="census_output_areas";const Ci=r=>r.toLocaleString();function Ai(r,e,n){let t=te.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(T){let O=T.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${O}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${O}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function d(T){o=T,n(1,o)}const _=()=>{n(0,l=!1),n(2,i=!1)};function y(T){i=T,n(2,i)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,d,_,y,S]}class Li extends W{constructor(e){super(),V(this,e,Ai,Ti,z,{})}}function Ii(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Pi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mi(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Pi]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=A(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ei(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Mi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ni(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&p(e)}}}function Di(r){let e,n;return e=new le({props:{$$slots:{default:[Ni,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fi(r){let e,n,t,l;const o=[B(st),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Di]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i}),e.$on("click",Ri);const u=[B(`${st}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(st)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${st}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ji(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:st,$$slots:{right:[Ei],default:[Ii]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new Nt({props:{data:`${ce()}/v1/${st}.geojson`,$$slots:{default:[Fi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let st="combined_authorities";function Ri(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Bi(r,e,n){let t=te.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Hi extends W{constructor(e){super(),V(this,e,Bi,ji,z,{})}}function Ui(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gi(r){let e;return{c(){e=w(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qi(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[zi]},$$scope:{ctx:r}}}),o=new X({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Gi]},$$scope:{ctx:r}}}),s=new je({}),{c(){e=L("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=A(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Wi(r){let e,n,t;return n=new ie({props:{$$slots:{default:[qi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function rr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vi(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,d=r[4].rank.toLocaleString()+"",_,y;return{c(){e=L("p"),t=w(n),l=w(` has an IMD score of
        `),o=L("b"),u=w(i),s=A(),a=L("p"),f=w("Rank: "),c=L("b"),_=w(d),y=w(`
        / 32,844 LSOAs`)},m(S,T){$(S,e,T),k(e,t),k(e,l),k(e,o),k(o,u),$(S,s,T),$(S,a,T),k(a,f),k(a,c),k(c,_),k(a,y)},p(S,T){T&16&&n!==(n=S[4].LSOA11CD+"")&&H(t,n),T&16&&i!==(i=S[4].score+"")&&H(u,i),T&16&&d!==(d=S[4].rank.toLocaleString()+"")&&H(_,d)},d(S){S&&(p(e),p(s),p(a))}}}function Xi(r){let e,n;return e=new le({props:{$$slots:{default:[Vi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ki(r){let e,n,t,l;const o=[B(Le),{sourceLayer:Le},{paint:{"fill-color":me(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Xi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i});const u=[B(`${Le}-outline`),{sourceLayer:Le},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Y(o,[f&0&&ne(B(Le)),f&0&&{sourceLayer:Le},f&6&&{paint:{"fill-color":me(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":K(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&1?Y(u,[f&0&&ne(B(`${Le}-outline`)),f&0&&{sourceLayer:Le},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Zi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:Le,$$slots:{right:[Wi],default:[Ui]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&rr(r);return o=new pe({props:{url:`pmtiles://${ce()}/v1/${Le}.pmtiles`,$$slots:{default:[Ki]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=rr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),g(a,1,1,()=>{a=null}),fe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Le="imd";function Ji(r,e,n){let t=te.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Yi extends W{constructor(e){super(),V(this,e,Ji,Zi,z,{})}}function Qi(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function xi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ea(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[xi]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=A(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function ta(r){let e,n,t;return n=new ie({props:{$$slots:{default:[ea]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function na(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&p(e)}}}function ra(r){let e,n;return e=new le({props:{$$slots:{default:[na,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function la(r){let e,n,t,l;const o=[B(it),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ra]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i}),e.$on("click",sa);const u=[B(`${it}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(it)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${it}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function oa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:it,$$slots:{right:[ta],default:[Qi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new Nt({props:{data:`${ce()}/v1/${it}.geojson`,$$slots:{default:[la]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let it="local_authority_districts";function sa(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function ia(r,e,n){let t=te.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class aa extends W{constructor(e){super(),V(this,e,ia,oa,z,{})}}function fa(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ua(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ca(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $a(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pa(r){let e;return{c(){e=w("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ma(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _a(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y,S,T,O,N,F,D,C,E;return t=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ua]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ca]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[$a]},$$scope:{ctx:r}}}),_=new X({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[pa]},$$scope:{ctx:r}}}),N=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ma]},$$scope:{ctx:r}}}),C=new je({}),{c(){e=L("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=A(),f=L("p"),c=L("strong"),d=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(_.$$.fragment),y=w(" to get more details."),S=A(),T=L("p"),O=w("Data from ONS Geography via "),h(N.$$.fragment),F=w(", as of November 2022."),D=A(),h(C.$$.fragment)},m(M,I){$(M,e,I),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),b(u,e,null),k(e,s),$(M,a,I),$(M,f,I),k(f,c),k(c,d),b(_,c,null),k(c,y),$(M,S,I),$(M,T,I),k(T,O),b(N,T,null),k(T,F),$(M,D,I),b(C,M,I),E=!0},p(M,I){const P={};I&16&&(P.$$scope={dirty:I,ctx:M}),t.$set(P);const R={};I&16&&(R.$$scope={dirty:I,ctx:M}),o.$set(R);const q={};I&16&&(q.$$scope={dirty:I,ctx:M}),u.$set(q);const j={};I&16&&(j.$$scope={dirty:I,ctx:M}),_.$set(j);const U={};I&16&&(U.$$scope={dirty:I,ctx:M}),N.$set(U)},i(M){E||(m(t.$$.fragment,M),m(o.$$.fragment,M),m(u.$$.fragment,M),m(_.$$.fragment,M),m(N.$$.fragment,M),m(C.$$.fragment,M),E=!0)},o(M){g(t.$$.fragment,M),g(o.$$.fragment,M),g(u.$$.fragment,M),g(_.$$.fragment,M),g(N.$$.fragment,M),g(C.$$.fragment,M),E=!1},d(M){M&&(p(e),p(a),p(f),p(S),p(T),p(D)),v(t),v(o),v(u),v(_),v(N),v(C,M)}}}function ga(r){let e,n,t;return n=new ie({props:{$$slots:{default:[_a]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function da(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&p(e)}}}function ha(r){let e,n;return e=new le({props:{$$slots:{default:[da,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ba(r){let e,n,t,l;const o=[B(Ie),{sourceLayer:Ie},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[ha]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i});const u=[B(`${Ie}-outline`),{sourceLayer:Ie},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(Ie)),f&0&&{sourceLayer:Ie},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${Ie}-outline`)),f&0&&{sourceLayer:Ie},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function va(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ie,$$slots:{right:[ga],default:[fa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ie}.pmtiles`,$$slots:{default:[ba]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Ie="local_planning_authorities";function wa(r,e,n){let t=te.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ka extends W{constructor(e){super(),V(this,e,wa,va,z,{})}}function ya(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Sa(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Oa(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Sa]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=A(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ta(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Oa]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ca(r){let e,n=r[3].Name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&H(t,n)},d(l){l&&p(e)}}}function Aa(r){let e,n;return e=new le({props:{$$slots:{default:[Ca,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function La(r){let e,n,t,l;const o=[B(Pe),{sourceLayer:Pe},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Aa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i}),e.$on("click",Pa);const u=[B(`${Pe}-outline`),{sourceLayer:Pe},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(Pe)),f&0&&{sourceLayer:Pe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${Pe}-outline`)),f&0&&{sourceLayer:Pe},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ia(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Pe,$$slots:{right:[Ta],default:[ya]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Pe}.pmtiles`,$$slots:{default:[La]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Pe="parliamentary_constituencies";function Pa(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ma(r,e,n){let t=te.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ea extends W{constructor(e){super(),V(this,e,Ma,Ia,z,{})}}function Na(r){let e;return{c(){e=w("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Da(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fa(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ra(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y,S,T;return t=new X({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Da]},$$scope:{ctx:r}}}),f=new X({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Fa]},$$scope:{ctx:r}}}),d=new X({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[ja]},$$scope:{ctx:r}}}),S=new je({}),{c(){e=L("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        gm
        `),o=L("sup"),o.textContent="3",i=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=A(),s=L("p"),a=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(d.$$.fragment),_=w("."),y=A(),h(S.$$.fragment)},m(O,N){$(O,e,N),k(e,n),b(t,e,null),k(e,l),k(e,o),k(e,i),$(O,u,N),$(O,s,N),k(s,a),b(f,s,null),k(s,c),b(d,s,null),k(s,_),$(O,y,N),b(S,O,N),T=!0},p(O,N){const F={};N&2048&&(F.$$scope={dirty:N,ctx:O}),t.$set(F);const D={};N&2048&&(D.$$scope={dirty:N,ctx:O}),f.$set(D);const C={};N&2048&&(C.$$scope={dirty:N,ctx:O}),d.$set(C)},i(O){T||(m(t.$$.fragment,O),m(f.$$.fragment,O),m(d.$$.fragment,O),m(S.$$.fragment,O),T=!0)},o(O){g(t.$$.fragment,O),g(f.$$.fragment,O),g(d.$$.fragment,O),g(S.$$.fragment,O),T=!1},d(O){O&&(p(e),p(u),p(s),p(y)),v(t),v(f),v(d),v(S,O)}}}function Ba(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Ra]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function lr(r){let e,n,t,l,o=r[3](r[0])+"",i,u,s,a,f,c,d,_,y,S,T,O,N;function F(I){r[7](I)}let D={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(D.value=r[0]),e=new Tt({props:D}),Z.push(()=>Q(e,"value",F));const C=[Ua,Ha],E=[];function M(I,P){return I[0]=="Noise"?0:1}return _=M(r),y=E[_]=C[_](r),{c(){h(e.$$.fragment),t=A(),l=L("p"),i=w(o),u=A(),s=L("div"),a=L("label"),f=w(`Opacity
      `),c=L("input"),d=A(),y.c(),S=ke(),G(c,"type","range"),G(c,"min","0"),G(c,"max","100")},m(I,P){b(e,I,P),$(I,t,P),$(I,l,P),k(l,i),$(I,u,P),$(I,s,P),k(s,a),k(a,f),k(a,c),zt(c,r[2]),$(I,d,P),E[_].m(I,P),$(I,S,P),T=!0,O||(N=[yt(c,"change",r[8]),yt(c,"input",r[8])],O=!0)},p(I,P){const R={};!n&&P&1&&(n=!0,R.value=I[0],x(()=>n=!1)),e.$set(R),(!T||P&1)&&o!==(o=I[3](I[0])+"")&&H(i,o),P&4&&zt(c,I[2]);let q=_;_=M(I),_===q?E[_].p(I,P):(ae(),g(E[q],1,1,()=>{E[q]=null}),fe(),y=E[_],y?y.p(I,P):(y=E[_]=C[_](I),y.c()),m(y,1),y.m(S.parentNode,S))},i(I){T||(m(e.$$.fragment,I),m(y),T=!0)},o(I){g(e.$$.fragment,I),g(y),T=!1},d(I){I&&(p(t),p(l),p(u),p(s),p(d),p(S)),v(e,I),E[_].d(I),O=!1,Yr(N)}}}function Ha(r){let e,n,t;return{c(){e=L("img"),bn(e.src,n=r[5](r[0]))||G(e,"src",n),G(e,"width",150),G(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!bn(e.src,n=l[5](l[0]))&&G(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&G(e,"alt",t)},i:ee,o:ee,d(l){l&&p(e)}}}function Ua(r){let e,n;return e=new Ge({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function za(r){let e,n;const t=[B("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ul({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&6?Y(t,[t[0],i&4&&{paint:{"raster-opacity":o[2]/100}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ga(r){let e,n,t,l,o,i;function u(f){r[6](f)}let s={id:"pollution",$$slots:{right:[Ba],default:[Na]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new se({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[1]&&lr(r);return o=new Tl({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[za]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],x(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=lr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),g(a,1,1,()=>{a=null}),fe());const _={};c&1&&(_.tiles=[f[4](f[0])]),c&2054&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}function qa(r,e,n){let t,l=!1,o=50,i="PM25_viridis";function u(){return i=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${i}/MapServer/WMSServer`}function s(y){return t[1]}function a(y){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${S}`}function f(y){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${S}`}function c(y){l=y,n(1,l)}function d(y){i=y,n(0,i)}function _(){o=Qr(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[i])},[i,l,o,s,a,f,c,d,_]}class Wa extends W{constructor(e){super(),V(this,e,qa,Ga,z,{})}}function Va(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Xa(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ka(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=A(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Za(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Ka]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ja(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&p(e)}}}function Ya(r){let e,n;return e=new le({props:{$$slots:{default:[Ja,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qa(r){let e,n,t,l;const o=[B(Me),{sourceLayer:Me},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ya]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new ze({props:i}),e.$on("click",ef);const u=[B(`${Me}-outline`),{sourceLayer:Me},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(Me)),f&0&&{sourceLayer:Me},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${Me}-outline`)),f&0&&{sourceLayer:Me},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function xa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Me,$$slots:{right:[Za],default:[Va]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Me}.pmtiles`,$$slots:{default:[Qa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Me="wards";function ef(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function tf(r,e,n){let t=te.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class nf extends W{constructor(e){super(),V(this,e,tf,xa,z,{})}}function rf(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(r){let e,n,t,l;return t=new X({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[rf]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){$(o,e,i),k(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&p(e),v(t)}}}class Ke extends W{constructor(e){super(),V(this,e,null,lf,z,{})}}function of(r){let e,n,t;return e=new _e({props:{color:te.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function sf(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function af(r){let e,n,t,l,o,i,u,s,a;return o=new X({props:{href:"https://gtfs.org",$$slots:{default:[sf]},$$scope:{ctx:r}}}),s=new Ke({}),{c(){e=L("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=A(),t=L("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=A(),h(s.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),k(t,l),b(o,t,null),k(t,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&8&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(s,f)}}}function ff(r){let e,n,t;return n=new ie({props:{$$slots:{default:[af]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function uf(r){let e;return{c(){e=L("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(r){let e;return{c(){e=L("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(r){let e;function n(o,i){return o[2].has_bus_lane?cf:uf}let t=n(r),l=t(r);return{c(){l.c(),e=ke()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function pf(r){let e,n;return e=new le({props:{$$slots:{default:[$f,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mf(r){let e,n;const t=[B(at),{sourceLayer:at},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],te.bus_route_with_lane,te.bus_route_without_lane],"line-width":5,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[pf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Y(t,[i&0&&ne(B(at)),i&0&&{sourceLayer:at},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _f(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:at,$$slots:{right:[ff],default:[of]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${at}.pmtiles`,$$slots:{default:[mf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let at="bus_routes";function gf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class df extends W{constructor(e){super(),V(this,e,gf,_f,z,{})}}function or(r){const e=Of(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function sr(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function hf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bf(r){let e,n,t,l,o,i,u,s;return u=new Ke({}),{c(){e=L("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=A(),t=L("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=A(),o=L("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=A(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,l,f),$(a,o,f),$(a,i,f),b(u,a,f),s=!0},p:ee,i(a){s||(m(u.$$.fragment,a),s=!0)},o(a){g(u.$$.fragment,a),s=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(i)),v(u,a)}}}function vf(r){let e,n,t;return n=new ie({props:{$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ir(r){let e,n,t=De(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=ar(sr(r,t,i));const o=i=>g(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=ke()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);$(i,e,u),n=!0},p(i,u){if(u&2){t=De(i[1]);let s;for(s=0;s<t.length;s+=1){const a=sr(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=ar(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(ae(),s=t.length;s<l.length;s+=1)o(s);fe()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(i){i&&p(e),St(l,i)}}}function ar(r){let e,n,t,l=r[7]+"",o,i,u;return n=new _e({props:{color:r[8]}}),{c(){e=L("div"),h(n.$$.fragment),t=A(),o=w(l),i=A()},m(s,a){$(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p:ee,i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){g(n.$$.fragment,s),u=!1},d(s){s&&p(e),v(n)}}}function wf(r){or(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,d,_=r[6]+"",y;return{c(){e=L("h2"),t=w(n),l=A(),o=L("p"),i=w("Direction: "),u=L("b"),a=A(),f=L("p"),c=w("Width: "),d=L("b"),y=w(_)},m(S,T){$(S,e,T),k(e,t),$(S,l,T),$(S,o,T),k(o,i),k(o,u),u.innerHTML=s,$(S,a,T),$(S,f,T),k(f,c),k(f,d),k(d,y)},p(S,T){or(S),T&8&&n!==(n=S[4]+"")&&H(t,n),T&8&&s!==(s=S[5]+"")&&(u.innerHTML=s),T&8&&_!==(_=S[6]+"")&&H(y,_)},d(S){S&&(p(e),p(l),p(o),p(a),p(f))}}}function kf(r){let e,n;return e=new le({props:{$$slots:{default:[wf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yf(r){let e,n;const t=[B(ft),{sourceLayer:ft},{paint:{"line-color":un(["get","kind"],{track:te.cycle_paths.track,lane:te.cycle_paths.lane,shared_use_segregated:te.cycle_paths.shared_use_segregated,shared_use_unsegregated:te.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ue,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[kf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),e.$on("click",Tf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Y(t,[i&0&&ne(B(ft)),i&0&&{sourceLayer:ft},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Sf(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:ft,$$slots:{right:[vf],default:[hf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&ir(r);return o=new pe({props:{url:`pmtiles://${ce()}/v1/${ft}.pmtiles`,$$slots:{default:[yf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=ir(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),g(a,1,1,()=>{a=null}),fe());const _={};c&2049&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ft="cycle_paths";function Of(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Tf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Cf(r,e,n){let t=[["Separated tracks",te.cycle_paths.track],["Unprotected lanes",te.cycle_paths.lane],["Shared-use (segregated)",te.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",te.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Af extends W{constructor(e){super(),V(this,e,Cf,Sf,z,{})}}function Lf(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function If(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pf(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[If]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=L("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=A(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Mf(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Pf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ef(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&H(t,n)},d(l){l&&p(e)}}}function Nf(r){let e,n;return e=new le({props:{$$slots:{default:[Ef,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Df(r){let e,n;const t=[B(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Nf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(B(ut)),i&0&&{sourceLayer:ut},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ff(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ut,$$slots:{right:[Mf],default:[Lf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${ut}.pmtiles`,$$slots:{default:[Df]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ut="mrn";function jf(r,e,n){let t=te.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Rf extends W{constructor(e){super(),V(this,e,jf,Ff,z,{})}}function Bf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hf(r){let e;return{c(){e=w("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new X({props:{href:"https://www.pct.bike",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),a=new X({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=A(),t=L("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=A(),o=L("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(d,_){$(d,e,_),$(d,n,_),$(d,t,_),$(d,l,_),$(d,o,_),k(o,i),b(u,o,null),k(o,s),b(a,o,null),k(o,f),c=!0},p(d,_){const y={};_&1024&&(y.$$scope={dirty:_,ctx:d}),u.$set(y);const S={};_&1024&&(S.$$scope={dirty:_,ctx:d}),a.$set(S)},i(d){c||(m(u.$$.fragment,d),m(a.$$.fragment,d),c=!0)},o(d){g(u.$$.fragment,d),g(a.$$.fragment,d),c=!1},d(d){d&&(p(e),p(n),p(t),p(l),p(o)),v(u),v(a)}}}function Gf(r){let e,n,t;return n=new ie({props:{$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function fr(r){let e,n,t,l,o,i,u,s;e=new Ge({props:{colorScale:r[3],limits:r[4]}});function a(_){r[7](_)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new Cr({props:f}),Z.push(()=>Q(t,"value",a));function c(_){r[8](_)}let d={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(d.value=r[1]),i=new Tt({props:d}),Z.push(()=>Q(i,"value",c)),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),o=A(),h(i.$$.fragment)},m(_,y){b(e,_,y),$(_,n,y),b(t,_,y),$(_,o,y),b(i,_,y),s=!0},p(_,y){const S={};!l&&y&1&&(l=!0,S.value=_[0],x(()=>l=!1)),t.$set(S);const T={};!u&&y&2&&(u=!0,T.value=_[1],x(()=>u=!1)),i.$set(T)},i(_){s||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(i.$$.fragment,_),s=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(i.$$.fragment,_),s=!1},d(_){_&&(p(n),p(o)),v(e,_),v(t,_),v(i,_)}}}function qf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new pn(!1),t=ke(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Wf(r){let e,n;return e=new le({props:{$$slots:{default:[qf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vf(r){let e,n;const t=[B(Ee),{sourceLayer:Ee},{paint:{"line-color":me(["get",r[1]],r[4],r[3]),"line-width":Ue,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ee?"visible":"none"}}];let l={$$slots:{default:[Wf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Y(t,[i&0&&ne(B(Ee)),i&0&&{sourceLayer:Ee},i&26&&{paint:{"line-color":me(["get",o[1]],o[4],o[3]),"line-width":Ue,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ee?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Xf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new pn(!1),t=ke(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Kf(r){let e,n;return e=new le({props:{$$slots:{default:[Xf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zf(r){let e,n;const t=[B(Ye),{sourceLayer:Ye},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",r[1]],r[4],r[3]),"line-width":Ue,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ye?"visible":"none"}}];let l={$$slots:{default:[Kf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Y(t,[i&0&&ne(B(Ye)),i&0&&{sourceLayer:Ye},t[2],t[3],i&26&&{paint:{"line-color":me(["get",o[1]],o[4],o[3]),"line-width":Ue,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ye?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Jf(r){let e,n,t,l,o,i,u,s;function a(d){r[6](d)}let f={id:Ee,$$slots:{right:[Gf],default:[Bf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new se({props:f}),Z.push(()=>Q(e,"checked",a));let c=r[2]&&fr(r);return o=new pe({props:{url:`pmtiles://${ce()}/v1/${Ee}.pmtiles`,$$slots:{default:[Vf]},$$scope:{ctx:r}}}),u=new pe({props:{url:`pmtiles://${ce()}/v1/${Ye}.pmtiles`,$$slots:{default:[Zf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),c&&c.c(),l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment)},m(d,_){b(e,d,_),$(d,t,_),c&&c.m(d,_),$(d,l,_),b(o,d,_),$(d,i,_),b(u,d,_),s=!0},p(d,[_]){const y={};_&1024&&(y.$$scope={dirty:_,ctx:d}),!n&&_&4&&(n=!0,y.checked=d[2],x(()=>n=!1)),e.$set(y),d[2]?c?(c.p(d,_),_&4&&m(c,1)):(c=fr(d),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(ae(),g(c,1,1,()=>{c=null}),fe());const S={};_&1031&&(S.$$scope={dirty:_,ctx:d}),o.$set(S);const T={};_&1031&&(T.$$scope={dirty:_,ctx:d}),u.$set(T)},i(d){s||(m(e.$$.fragment,d),m(c),m(o.$$.fragment,d),m(u.$$.fragment,d),s=!0)},o(d){g(e.$$.fragment,d),g(c),g(o.$$.fragment,d),g(u.$$.fragment,d),s=!1},d(d){d&&(p(t),p(l),p(i)),v(e,d),c&&c.d(d),v(o,d),v(u,d)}}}let Ee="pct_commute",Ye="pct_school";function Yf(r,e,n){let t=te.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ee,i="baseline",u=!1;function s(d){let _=d.baseline,y=d.gov_target,S=d.go_dutch,T=`<h2>Trip purpose: ${o==Ee?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)T+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let O=(y/_).toFixed(1),N=(S/_).toFixed(1);T+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${O}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${N}x</b> of baseline)</p>`}return T}function a(d){u=d,n(2,u)}function f(d){o=d,n(0,o)}function c(d){i=d,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class Qf extends W{constructor(e){super(),V(this,e,Yf,Jf,z,{})}}function xf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function eu(r){let e;return{c(){e=w("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nu(r){let e,n,t,l,o,i,u,s,a,f,c,d;return t=new X({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[eu]},$$scope:{ctx:r}}}),f=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=A(),i=L("p"),i.textContent="Data valid as of 1 September, 2023",u=A(),s=L("p"),a=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(_,y){$(_,e,y),k(e,n),b(t,e,null),k(e,l),$(_,o,y),$(_,i,y),$(_,u,y),$(_,s,y),k(s,a),b(f,s,null),k(s,c),d=!0},p(_,y){const S={};y&256&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const T={};y&256&&(T.$$scope={dirty:y,ctx:_}),f.$set(T)},i(_){d||(m(t.$$.fragment,_),m(f.$$.fragment,_),d=!0)},o(_){g(t.$$.fragment,_),g(f.$$.fragment,_),d=!1},d(_){_&&(p(e),p(o),p(i),p(u),p(s)),v(t),v(f)}}}function ru(r){let e,n,t;return n=new ie({props:{$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ur(r){let e,n,t,l,o;e=new Ge({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new Cr({props:u}),Z.push(()=>Q(t,"value",i)),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],x(()=>l=!1)),t.$set(f)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),o=!1},d(s){s&&p(n),v(e,s),v(t,s)}}}function lu(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,d=r[4][r[7].highest_description]+"",_,y;return{c(){e=L("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=A(),u=L("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),_=w(d),y=w(")")},m(S,T){$(S,e,T),k(e,n),k(e,l),k(e,o),$(S,i,T),$(S,u,T),k(u,s),k(u,f),k(u,c),k(u,_),k(u,y)},p(S,T){T&128&&t!==(t=S[7].indicative_mph+"")&&H(l,t),T&128&&a!==(a=S[7].highest_mph+"")&&H(f,a),T&128&&d!==(d=S[4][S[7].highest_description]+"")&&H(_,d)},d(S){S&&(p(e),p(i),p(u))}}}function ou(r){let e,n;return e=new le({props:{$$slots:{default:[lu,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function su(r){let e,n;const t=[B(ct),{sourceLayer:ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",r[0]],r[3],r[2]),"line-width":Ue,"line-opacity":K(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[ou]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Y(t,[i&0&&ne(B(ct)),i&0&&{sourceLayer:ct},t[2],t[3],i&13&&{paint:{"line-color":me(["get",o[0]],o[3],o[2]),"line-width":Ue,"line-opacity":K(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function iu(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ct,$$slots:{right:[ru],default:[xf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new se({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[1]&&ur(r);return o=new pe({props:{url:`pmtiles://${mn()}/v1/${ct}.pmtiles`,$$slots:{default:[su]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&256&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],x(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=ur(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),g(a,1,1,()=>{a=null}),fe());const _={};c&259&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ct="road_speeds";function au(r,e,n){let t=te.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class fu extends W{constructor(e){super(),V(this,e,au,iu,z,{})}}function uu(r){let e;return{c(){e=w("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $u(r){let e,n,t,l,o,i,u,s,a;return u=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[cu]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=A(),t=L("p"),t.textContent="Data valid as of 1 September, 2023",l=A(),o=L("p"),i=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),k(o,i),b(u,o,null),k(o,s),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),u.$set(d)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),v(u)}}}function pu(r){let e,n,t;return n=new ie({props:{$$slots:{default:[$u]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function cr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mu(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",d,_;return{c(){e=L("p"),n=w("Average width: "),t=L("b"),o=w(l),i=w(`
        meters`),u=A(),s=L("p"),a=w("Minimum width: "),f=L("b"),d=w(c),_=w(`
        meters`)},m(y,S){$(y,e,S),k(e,n),k(e,t),k(t,o),k(e,i),$(y,u,S),$(y,s,S),k(s,a),k(s,f),k(f,d),k(s,_)},p(y,S){S&16&&l!==(l=y[4].average+"")&&H(o,l),S&16&&c!==(c=y[4].minimum+"")&&H(d,c)},d(y){y&&(p(e),p(u),p(s))}}}function _u(r){let e,n;return e=new le({props:{$$slots:{default:[mu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gu(r){let e,n;const t=[B($t),{sourceLayer:$t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get","average"],r[2],r[1]),"line-width":Ue,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[_u]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Y(t,[i&0&&ne(B($t)),i&0&&{sourceLayer:$t},t[2],t[3],i&6&&{paint:{"line-color":me(["get","average"],o[2],o[1]),"line-width":Ue,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function du(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:$t,$$slots:{right:[pu],default:[uu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&cr(r);return o=new pe({props:{url:`pmtiles://${mn()}/v1/${$t}.pmtiles`,$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=cr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),g(a,1,1,()=>{a=null}),fe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let $t="road_widths";function hu(r,e,n){let t=te.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class bu extends W{constructor(e){super(),V(this,e,hu,du,z,{})}}function vu(r){let e,n,t;return{c(){e=L("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=yt(e,"change",r[5]),n=!0)},p:ee,d(l){l&&p(e),r[7](null),n=!1,t()}}}function $r(r){let e,n;return e=new Dt({props:{small:!0,$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wu(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new _e({props:{color:wt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),$(u,n,s),$(u,l,s),$(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&H(l,t)},i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){g(e.$$.fragment,u),i=!1},d(u){u&&(p(n),p(l),p(o)),v(e,u)}}}function ku(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[wu]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),Z.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function yu(r){let e,n,t,l,o,i;e=new Tr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[vu]},$$scope:{ctx:r}}}),t=new Ar({props:{errorMessage:r[3]}});let u=r[2]>0&&$r(r);return{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),u&&u.c(),o=ke()},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),u&&u.m(s,a),$(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&m(u,1)):(u=$r(s),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(ae(),g(u,1,1,()=>{u=null}),fe())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(u),i=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(u),i=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),u&&u.d(s)}}}function Su(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,d,_,y,S=r[10].notes+"",T,O,N,F,D,C,E,M=r[10].id+"",I,P,R,q,j,U=(r[10].inspector??"???")+"",re,ye,ve,et=r[10].submission_time+"",dt,tt,ge,ht,Re,qe=r[10].scheme_reference+"",Ze,bt,nt,Je=r[10].current_design_stage+"",rt;return{c(){e=L("div"),n=L("h2"),l=w(t),o=A(),i=L("p"),u=L("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=A(),d=L("p"),_=L("u"),_.textContent="Notes",y=w(`
          : `),T=w(S),O=A(),N=L("hr"),F=A(),D=L("p"),C=w("Critical issue ID: "),E=L("b"),I=w(M),P=A(),R=L("p"),q=w("Submitted by "),j=L("b"),re=w(U),ye=w(`
          at
          `),ve=L("b"),dt=w(et),tt=A(),ge=L("p"),ht=w("For scheme "),Re=L("b"),Ze=w(qe),bt=w(`
          in stage
          `),nt=L("b"),rt=w(Je),be(e,"max-width","30vw")},m(we,Ae){$(we,e,Ae),k(e,n),k(n,l),k(e,o),k(e,i),k(i,u),k(i,s),k(i,f),k(e,c),k(e,d),k(d,_),k(d,y),k(d,T),k(e,O),k(e,N),k(e,F),k(e,D),k(D,C),k(D,E),k(E,I),k(e,P),k(e,R),k(R,q),k(R,j),k(j,re),k(R,ye),k(R,ve),k(ve,dt),k(e,tt),k(e,ge),k(ge,ht),k(ge,Re),k(Re,Ze),k(ge,bt),k(ge,nt),k(nt,rt)},p(we,Ae){Ae&1024&&t!==(t=we[10].critical_type+"")&&H(l,t),Ae&1024&&a!==(a=we[10].location_description+"")&&H(f,a),Ae&1024&&S!==(S=we[10].notes+"")&&H(T,S),Ae&1024&&M!==(M=we[10].id+"")&&H(I,M),Ae&1024&&U!==(U=(we[10].inspector??"???")+"")&&H(re,U),Ae&1024&&et!==(et=we[10].submission_time+"")&&H(dt,et),Ae&1024&&qe!==(qe=we[10].scheme_reference+"")&&H(Ze,qe),Ae&1024&&Je!==(Je=we[10].current_design_stage+"")&&H(rt,Je)},d(we){we&&p(e)}}}function Ou(r){let e,n;return e=new le({props:{$$slots:{default:[Su,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tu(r){let e,n,t,l,o,i;const u=[B(`${Ve}-clusters`),{applyToClusters:!0},{paint:{"circle-color":wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let _=0;_<u.length;_+=1)s=J(s,u[_]);e=new Xe({props:s}),e.$on("click",r[6]);const a=[B(`${Ve}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let _=0;_<a.length;_+=1)f=J(f,a[_]);t=new Il({props:f});const c=[B(`${Ve}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":wt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let d={$$slots:{default:[Ou]},$$scope:{ctx:r}};for(let _=0;_<c.length;_+=1)d=J(d,c[_]);return o=new Xe({props:d}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment)},m(_,y){b(e,_,y),$(_,n,y),b(t,_,y),$(_,l,y),b(o,_,y),i=!0},p(_,y){const S=y&2?Y(u,[y&0&&ne(B(`${Ve}-clusters`)),u[1],y&0&&{paint:{"circle-color":wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:_[1]?"visible":"none"}},u[4]]):{};e.$set(S);const T=y&2?Y(a,[y&0&&ne(B(`${Ve}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:_[1]?"visible":"none"}}]):{};t.$set(T);const O=y&2?Y(c,[y&0&&ne(B(`${Ve}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":wt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:_[1]?"visible":"none"}}]):{};y&2048&&(O.$$scope={dirty:y,ctx:_}),o.$set(O)},i(_){i||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(o.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),i=!1},d(_){_&&(p(n),p(l)),v(e,_),v(t,_),v(o,_)}}}function Cu(r){let e,n,t,l;return e=new Te({props:{label:"Critical Issues",$$slots:{default:[yu]},$$scope:{ctx:r}}}),t=new Nt({props:{id:Ve,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let Ve="criticals",wt="red";function Au(r,e,n){let t;ue(r,cn,_=>n(9,t=_));let l,o=!0,i=0,u="",s=xr();async function a(_){try{n(4,s=await Us(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f(_){t.getSource(Ve).getClusterExpansionZoom(_.detail.features[0].properties.cluster_id,(y,S)=>{y||t.easeTo({center:_.detail.features[0].geometry.coordinates,zoom:S})})}function c(_){Z[_?"unshift":"push"](()=>{l=_,n(0,l)})}function d(_){o=_,n(1,o)}return[l,o,i,u,s,a,f,c,d]}class Lu extends W{constructor(e){super(),V(this,e,Au,Cu,z,{})}}function Iu(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Pu(r){let e;return{c(){e=w("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Pu]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=A(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Eu(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Nu(r){let e,n=pr(r[3])+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=pr(l[3])+"")&&H(t,n)},d(l){l&&p(e)}}}function Du(r){let e,n;return e=new le({props:{$$slots:{default:[Nu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fu(r){let e,n;const t=[B(pt),{sourceLayer:pt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Du]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Xe({props:l}),e.$on("click",Ru),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(B(pt)),i&0&&{sourceLayer:pt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ju(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:pt,$$slots:{right:[Eu],default:[Iu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${pt}.pmtiles`,$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let pt="crossings";function pr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Ru(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Bu(r,e,n){let t=te.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Hu extends W{constructor(e){super(),V(this,e,Bu,ju,z,{})}}function Uu(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function zu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[zu]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=L("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=A(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function qu(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Wu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=L("p"),n=w("Capacity: "),t=L("b"),o=w(l)},m(i,u){$(i,e,u),k(e,n),k(e,t),k(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&H(o,l)},d(i){i&&p(e)}}}function Vu(r){let e,n;return e=new le({props:{$$slots:{default:[Wu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xu(r){let e,n;const t=[B(mt),{sourceLayer:mt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Vu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Xe({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(B(mt)),i&0&&{sourceLayer:mt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ku(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:mt,$$slots:{right:[qu],default:[Uu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${mt}.pmtiles`,$$slots:{default:[Xu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let mt="cycle_parking";function Zu(r,e,n){let t=te.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ju extends W{constructor(e){super(),V(this,e,Zu,Ku,z,{})}}function Yu(r){let e,n,t,l;return e=new _e({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=A(),t=w(r[2])},m(o,i){b(e,o,i),$(o,n,i),$(o,t,i),l=!0},p(o,i){(!l||i&4)&&H(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function Qu(r){let e;const n=r[5].default,t=It(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Pt(t,n,l,l[7],e?Et(n,l[7],o,null):Mt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function xu(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Qu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ec(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&H(t,n)},d(l){l&&p(e)}}}function tc(r){let e,n;return e=new le({props:{$$slots:{default:[ec,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nc(r){let e,n;const t=[B(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":K(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[tc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ze({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Y(t,[i&1&&ne(B(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":K(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function rc(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[xu],default:[Yu]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${r[0]}.pmtiles`,$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],x(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${ce()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function lc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=te[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class gn extends W{constructor(e){super(),V(this,e,lc,rc,z,{name:0,singularNoun:1,pluralNoun:2})}}function oc(r){let e;return{c(){e=w("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sc(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[oc]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=A(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function ic(r){let e,n;return e=new gn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[sc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class ac extends W{constructor(e){super(),V(this,e,null,ic,z,{})}}function fc(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function uc(r){let e;return{c(){e=w("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cc(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[uc]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=A(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function $c(r){let e,n,t;return n=new ie({props:{$$slots:{default:[cc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function pc(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&H(t,n)},d(l){l&&p(e)}}}function mc(r){let e,n;return e=new le({props:{$$slots:{default:[pc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _c(r){let e,n;const t=[B(Wt),{paint:{"circle-color":r[1],"circle-radius":Gt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[mc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Xe({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(B(Wt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Gt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function gc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Wt,$$slots:{right:[$c],default:[fc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),Z.push(()=>Q(e,"checked",i)),l=new Nt({props:{data:`${ce()}/v1/${Wt}.geojson`,$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Wt="railway_stations";function dc(r,e,n){let t=te.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class hc extends W{constructor(e){super(),V(this,e,dc,gc,z,{})}}function bc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vc(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[bc]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=A(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function wc(r){let e,n;return e=new gn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[vc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class kc extends W{constructor(e){super(),V(this,e,null,wc,z,{})}}function yc(r){let e;return{c(){e=w("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sc(r){let e;return{c(){e=w("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Oc(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[yc]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Sc]},$$scope:{ctx:r}}}),s=new Ke({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=A(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Tc(r){let e,n;return e=new gn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Oc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Cc extends W{constructor(e){super(),V(this,e,null,Tc,z,{})}}function Ac(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ic(r){let e;return{c(){e=w("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pc(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new X({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Lc]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Ic]},$$scope:{ctx:r}}}),f=new je({}),{c(){e=L("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=A(),s=L("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=A(),h(f.$$.fragment)},m(d,_){$(d,e,_),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(d,u,_),$(d,s,_),$(d,a,_),b(f,d,_),c=!0},p(d,_){const y={};_&64&&(y.$$scope={dirty:_,ctx:d}),t.$set(y);const S={};_&64&&(S.$$scope={dirty:_,ctx:d}),o.$set(S)},i(d){c||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),c=!0)},o(d){g(t.$$.fragment,d),g(o.$$.fragment,d),g(f.$$.fragment,d),c=!1},d(d){d&&(p(e),p(u),p(s),p(a)),v(t),v(o),v(f,d)}}}function Mc(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Pc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function mr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ec(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,d,_,y=r[5].pedal_cycles_2022.toLocaleString()+"",S,T,O,N,F,D=r[5].method+"",C;return{c(){e=L("h2"),t=w(n),l=A(),o=L("p"),i=w("Total motor vehicles (2022 AADF): "),u=L("b"),a=w(s),f=A(),c=L("p"),d=w("Total pedal cycles (2022 AADF): "),_=L("b"),S=w(y),T=A(),O=L("p"),N=w("Count method: "),F=L("b"),C=w(D)},m(E,M){$(E,e,M),k(e,t),$(E,l,M),$(E,o,M),k(o,i),k(o,u),k(u,a),$(E,f,M),$(E,c,M),k(c,d),k(c,_),k(_,S),$(E,T,M),$(E,O,M),k(O,N),k(O,F),k(F,C)},p(E,M){M&32&&n!==(n=E[5].location+"")&&H(t,n),M&32&&s!==(s=E[5].motor_vehicles_2022.toLocaleString()+"")&&H(a,s),M&32&&y!==(y=E[5].pedal_cycles_2022.toLocaleString()+"")&&H(S,y),M&32&&D!==(D=E[5].method+"")&&H(C,D)},d(E){E&&(p(e),p(l),p(o),p(f),p(c),p(T),p(O))}}}function Nc(r){let e,n;return e=new le({props:{$$slots:{default:[Ec,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Dc(r){let e,n;const t=[B(_t),{sourceLayer:_t},{paint:{"circle-color":me(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Nc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Xe({props:l}),e.$on("click",jc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Y(t,[i&0&&ne(B(_t)),i&0&&{sourceLayer:_t},i&6&&{paint:{"circle-color":me(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Fc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:_t,$$slots:{right:[Mc],default:[Ac]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&mr(r);return o=new pe({props:{url:`pmtiles://${ce()}/v1/${_t}.pmtiles`,$$slots:{default:[Dc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&64&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=mr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),g(a,1,1,()=>{a=null}),fe());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let _t="vehicle_counts";function jc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Rc(r,e,n){let t=te.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class Bc extends W{constructor(e){super(),V(this,e,Rc,Fc,z,{})}}function Hc(r){let e,n,t,l,o,i,u,s;return e=new kc({}),t=new ac({}),o=new Cc({}),u=new hc({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,l,f),b(o,a,f),$(a,i,f),b(u,a,f),s=!0},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),s=!1},d(a){a&&(p(n),p(l),p(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Uc(r){let e,n;return e=new Dt({props:{small:!0,$$slots:{default:[Hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Af({}),t=new Rf({}),o=new df({}),u=new Ju({}),a=new Hu({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment),s=A(),h(a.$$.fragment)},m(c,d){b(e,c,d),$(c,n,d),b(t,c,d),$(c,l,d),b(o,c,d),$(c,i,d),b(u,c,d),$(c,s,d),b(a,c,d),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Gc(r){let e,n;return e=new Dt({props:{small:!0,$$slots:{default:[zc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Ea({}),t=new nf({}),o=new Hi({}),u=new aa({}),a=new ka({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment),s=A(),h(a.$$.fragment)},m(c,d){b(e,c,d),$(c,n,d),b(t,c,d),$(c,l,d),b(o,c,d),$(c,i,d),b(u,c,d),$(c,s,d),b(a,c,d),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Wc(r){let e,n;return e=new Dt({props:{small:!0,$$slots:{default:[qc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vc(r){let e,n,t,l;return e=new Li({}),t=new Yi({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Xc(r){let e,n,t,l;return e=new bu({}),t=new fu({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Kc(r){let e,n,t,l,o=fn()=="Private (development)",i,u,s;e=new Bc({}),t=new Qf({});let a=o&&Xc();return u=new Wa({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),a&&a.c(),i=A(),h(u.$$.fragment)},m(f,c){b(e,f,c),$(f,n,c),b(t,f,c),$(f,l,c),a&&a.m(f,c),$(f,i,c),b(u,f,c),s=!0},p:ee,i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(a),m(u.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(a),g(u.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(i)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function Zc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new sl({props:u}),Z.push(()=>Q(e,"enabled",i)),l=new $l({}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],x(()=>n=!1)),e.$set(f)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function Jc(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y,S,T;return e=new Lu({}),t=new Te({props:{label:"Trip generators",$$slots:{default:[Uc]},$$scope:{ctx:r}}}),o=new Te({props:{label:"Existing infrastructure",$$slots:{default:[Gc]},$$scope:{ctx:r}}}),u=new Te({props:{label:"Boundaries",$$slots:{default:[Wc]},$$scope:{ctx:r}}}),a=new Te({props:{label:"Census",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),c=new Te({props:{label:"Other",$$slots:{default:[Kc]},$$scope:{ctx:r}}}),_=new Te({props:{label:"Tools",$$slots:{default:[Zc]},$$scope:{ctx:r}}}),S=new ol({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment),s=A(),h(a.$$.fragment),f=A(),h(c.$$.fragment),d=A(),h(_.$$.fragment),y=A(),h(S.$$.fragment)},m(O,N){b(e,O,N),$(O,n,N),b(t,O,N),$(O,l,N),b(o,O,N),$(O,i,N),b(u,O,N),$(O,s,N),b(a,O,N),$(O,f,N),b(c,O,N),$(O,d,N),b(_,O,N),$(O,y,N),b(S,O,N),T=!0},p(O,N){const F={};N&8&&(F.$$scope={dirty:N,ctx:O}),t.$set(F);const D={};N&8&&(D.$$scope={dirty:N,ctx:O}),o.$set(D);const C={};N&8&&(C.$$scope={dirty:N,ctx:O}),u.$set(C);const E={};N&8&&(E.$$scope={dirty:N,ctx:O}),a.$set(E);const M={};N&8&&(M.$$scope={dirty:N,ctx:O}),c.$set(M);const I={};N&9&&(I.$$scope={dirty:N,ctx:O}),_.$set(I);const P={};N&2&&(P.disabled=!O[1]),S.$set(P)},i(O){T||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(o.$$.fragment,O),m(u.$$.fragment,O),m(a.$$.fragment,O),m(c.$$.fragment,O),m(_.$$.fragment,O),m(S.$$.fragment,O),T=!0)},o(O){g(e.$$.fragment,O),g(t.$$.fragment,O),g(o.$$.fragment,O),g(u.$$.fragment,O),g(a.$$.fragment,O),g(c.$$.fragment,O),g(_.$$.fragment,O),g(S.$$.fragment,O),T=!1},d(O){O&&(p(n),p(l),p(i),p(s),p(f),p(d),p(y)),v(e,O),v(t,O),v(o,O),v(u,O),v(a,O),v(c,O),v(_,O),v(S,O)}}}function Yc(r){let e,n;return e=new Te({props:{label:"Layers",open:!0,$$slots:{default:[Jc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qc(r,e,n){let t,l;ue(r,Xn,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&Xn.set(!t)},[t,l,o]}class xc extends W{constructor(e){super(),V(this,e,Qc,Yc,z,{})}}function e$(r,e,n){let{loadFile:t}=e;return $n(async()=>{let o=await(await fetch(`${mn()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class t$ extends W{constructor(e){super(),V(this,e,e$,null,z,{loadFile:0})}}function n$(r){let e;return{c(){e=w("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function r$(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function l$(r){let e,n,t,l;return e=new en({props:{$$slots:{default:[n$]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new en({props:{$$slots:{default:[r$]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&32&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function o$(r){var N,F,D;let e,n,t=((N=r[0].browse)==null?void 0:N.authority_or_region)+"",l,o,i,u,s=((F=r[0].browse)==null?void 0:F.capital_scheme_id)+"",a,f,c,d,_=((D=r[0].browse)==null?void 0:D.funding_programme)+"",y,S,T,O;return T=new il({props:{$$slots:{default:[l$]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("Authority or region: "),l=w(t),o=A(),i=L("p"),u=w("Capital scheme ID: "),a=w(s),f=A(),c=L("p"),d=w("Funding programme: "),y=w(_),S=A(),h(T.$$.fragment)},m(C,E){$(C,e,E),k(e,n),k(e,l),$(C,o,E),$(C,i,E),k(i,u),k(i,a),$(C,f,E),$(C,c,E),k(c,d),k(c,y),$(C,S,E),b(T,C,E),O=!0},p(C,E){var I,P,R;(!O||E&1)&&t!==(t=((I=C[0].browse)==null?void 0:I.authority_or_region)+"")&&H(l,t),(!O||E&1)&&s!==(s=((P=C[0].browse)==null?void 0:P.capital_scheme_id)+"")&&H(a,s),(!O||E&1)&&_!==(_=((R=C[0].browse)==null?void 0:R.funding_programme)+"")&&H(y,_);const M={};E&32&&(M.$$scope={dirty:E,ctx:C}),T.$set(M)},i(C){O||(m(T.$$.fragment,C),O=!0)},o(C){g(T.$$.fragment,C),O=!1},d(C){C&&(p(e),p(o),p(i),p(f),p(c),p(S)),v(T,C)}}}function s$(r){var t;let e,n;return e=new Te({props:{label:`${r[0].scheme_reference}: ${(t=r[0].browse)==null?void 0:t.num_features} features`,$$slots:{default:[o$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),n=!0},p(l,[o]){var u;const i={};o&1&&(i.label=`${l[0].scheme_reference}: ${(u=l[0].browse)==null?void 0:u.num_features} features`),o&33&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function i$(r,e,n){let t,l;ue(r,gt,s=>n(3,t=s)),ue(r,cn,s=>n(4,l=s));let{scheme:o}=e;function i(){let s={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(el(s),{padding:20,animate:!1})}function u(){var f,c;let s={type:"FeatureCollection",features:t.features.filter(d=>d.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(s)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=s=>{"scheme"in s&&n(0,o=s.scheme)},[o,i,u]}class a$ extends W{constructor(e){super(),V(this,e,i$,s$,z,{scheme:0})}}function _r(r){let e,n,t=vn(r[0].length_meters)+"",l;return{c(){e=L("p"),n=w("Length: "),l=w(t)},m(o,i){$(o,e,i),k(e,n),k(e,l)},p(o,i){i&1&&t!==(t=vn(o[0].length_meters)+"")&&H(l,t)},d(o){o&&p(e)}}}function gr(r){let e,n=r[2](r[0].description)+"";return{c(){e=L("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[2](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function f$(r){let e;return{c(){var n;e=L("p"),e.textContent=`Current milestone: ${(n=r[1].browse)==null?void 0:n.current_milestone}`},m(n,t){$(n,e,t)},p:ee,d(n){n&&p(e)}}}function u$(r){var j;let e,n,t,l=r[2](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,d,_,y,S,T=r[0].scheme_reference+"",O,N,F,D,C,E,M,I,P=r[0].length_meters&&_r(r),R=r[0].description&&gr(r),q=((j=r[1].browse)==null?void 0:j.current_milestone)&&f$(r);return{c(){var U,re,ye;e=L("div"),n=L("h2"),t=new pn(!1),o=w(" ("),u=w(i),s=w(")"),a=A(),P&&P.c(),f=A(),R&&R.c(),c=A(),d=L("hr"),_=A(),y=L("p"),S=w("Part of scheme: "),O=w(T),N=A(),F=L("p"),F.textContent=`Authority or region: ${(U=r[1].browse)==null?void 0:U.authority_or_region}`,D=A(),C=L("p"),C.textContent=`Capital scheme ID: ${(re=r[1].browse)==null?void 0:re.capital_scheme_id}`,E=A(),M=L("p"),M.textContent=`Funding programme: ${(ye=r[1].browse)==null?void 0:ye.funding_programme}`,I=A(),q&&q.c(),t.a=o,be(e,"max-width","30vw")},m(U,re){$(U,e,re),k(e,n),t.m(l,n),k(n,o),k(n,u),k(n,s),k(e,a),P&&P.m(e,null),k(e,f),R&&R.m(e,null),k(e,c),k(e,d),k(e,_),k(e,y),k(y,S),k(y,O),k(e,N),k(e,F),k(e,D),k(e,C),k(e,E),k(e,M),k(e,I),q&&q.m(e,null)},p(U,[re]){var ye;re&1&&l!==(l=U[2](U[0].name)+"")&&t.p(l),re&1&&i!==(i=U[0].intervention_type+"")&&H(u,i),U[0].length_meters?P?P.p(U,re):(P=_r(U),P.c(),P.m(e,f)):P&&(P.d(1),P=null),U[0].description?R?R.p(U,re):(R=gr(U),R.c(),R.m(e,c)):R&&(R.d(1),R=null),re&1&&T!==(T=U[0].scheme_reference+"")&&H(O,T),(ye=U[1].browse)!=null&&ye.current_milestone&&q.p(U,re)},i:ee,o:ee,d(U){U&&p(e),P&&P.d(),R&&R.d(),q&&q.d()}}}function c$(r,e,n){let t,l;ue(r,Ut,s=>n(3,t=s)),ue(r,Lt,s=>n(4,l=s));let{props:o}=e,i=l.get(o.scheme_reference);function u(s){return t?s.replace(new RegExp(t,"gi"),a=>`<mark>${a}</mark>`):s}return r.$$set=s=>{"props"in s&&n(0,o=s.props)},[o,i,u]}class dn extends W{constructor(e){super(),V(this,e,c$,u$,z,{props:0})}}function $$(r){let e,n=r[6].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&H(t,n)},d(l){l&&p(e)}}}function p$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function m$(r){let e,n,t,l;return e=new le({props:{$$slots:{default:[$$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",$$slots:{default:[p$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function _$(r){let e,n=r[6].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&H(t,n)},d(l){l&&p(e)}}}function g$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function d$(r){let e,n,t,l;return e=new le({props:{$$slots:{default:[_$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",$$slots:{default:[g$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function h$(r){let e,n=r[6].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&H(t,n)},d(l){l&&p(e)}}}function b$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function v$(r){let e,n,t,l;return e=new le({props:{$$slots:{default:[h$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",$$slots:{default:[b$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function w$(r){let e,n,t,l,o,i,u,s,a,f;const c=[B("interventions-points"),{filter:["all",wn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Gt,"circle-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let d={$$slots:{default:[m$]},$$scope:{ctx:r}};for(let C=0;C<c.length;C+=1)d=J(d,c[C]);e=new Xe({props:d});const _=[B("interventions-lines"),{filter:["all",kn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":vt,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[d$]},$$scope:{ctx:r}};for(let C=0;C<_.length;C+=1)y=J(y,_[C]);t=new $e({props:y});const S=[B("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*vt,"circle-opacity":0,"circle-stroke-color":He.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let C=0;C<S.length;C+=1)T=J(T,S[C]);o=new Xe({props:T});const O=[B("interventions-polygons"),{filter:["all",Rt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":K(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let N={$$slots:{default:[v$]},$$scope:{ctx:r}};for(let C=0;C<O.length;C+=1)N=J(N,O[C]);u=new ze({props:N});const F=[B("interventions-polygons-outlines"),{filter:["all",Rt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*vt}},{layout:{visibility:r[0]?"visible":"none"}}];let D={};for(let C=0;C<F.length;C+=1)D=J(D,F[C]);return a=new $e({props:D}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment),s=A(),h(a.$$.fragment)},m(C,E){b(e,C,E),$(C,n,E),b(t,C,E),$(C,l,E),b(o,C,E),$(C,i,E),b(u,C,E),$(C,s,E),b(a,C,E),f=!0},p(C,E){const M=E&29?Y(c,[c[0],E&24&&{filter:["all",wn,C[3],C[4]]},c[2],c[3],E&4&&{paint:{"circle-color":C[2],"circle-radius":Gt,"circle-opacity":K(1,.5)}},E&1&&{layout:{visibility:C[0]?"visible":"none"}},c[6]]):{};E&128&&(M.$$scope={dirty:E,ctx:C}),e.$set(M);const I=E&13?Y(_,[_[0],E&8&&{filter:["all",kn,C[3]]},_[2],_[3],E&4&&{paint:{"line-color":C[2],"line-width":vt,"line-opacity":K(1,.5)}},E&1&&{layout:{visibility:C[0]?"visible":"none"}},_[6]]):{};E&128&&(I.$$scope={dirty:E,ctx:C}),t.$set(I);const P=E&1?Y(S,[S[0],S[1],S[2],{layout:{visibility:C[0]?"visible":"none"}}]):{};o.$set(P);const R=E&13?Y(O,[O[0],E&8&&{filter:["all",Rt,C[3]]},O[2],O[3],E&4&&{paint:{"fill-color":C[2],"fill-opacity":K(.2,.5)}},E&1&&{layout:{visibility:C[0]?"visible":"none"}},O[6]]):{};E&128&&(R.$$scope={dirty:E,ctx:C}),u.$set(R);const q=E&13?Y(F,[F[0],E&8&&{filter:["all",Rt,C[3]]},E&4&&{paint:{"line-color":C[2],"line-opacity":.5,"line-width":.7*vt}},E&1&&{layout:{visibility:C[0]?"visible":"none"}}]):{};a.$set(q)},i(C){f||(m(e.$$.fragment,C),m(t.$$.fragment,C),m(o.$$.fragment,C),m(u.$$.fragment,C),m(a.$$.fragment,C),f=!0)},o(C){g(e.$$.fragment,C),g(t.$$.fragment,C),g(o.$$.fragment,C),g(u.$$.fragment,C),g(a.$$.fragment,C),f=!1},d(C){C&&(p(n),p(l),p(i),p(s)),v(e,C),v(t,C),v(o,C),v(u,C),v(a,C)}}}function k$(r){let e,n;return e=new Nt({props:{data:r[1],$$slots:{default:[w$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function y$(r,e,n){let t,l;ue(r,gt,a=>n(5,l=a));let{showSchemes:o}=e,i=Vr();const u=["!=",["get","hide_while_editing"],!0],s=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=tl(l))},[o,t,i,u,s,l]}class S$ extends W{constructor(e){super(),V(this,e,y$,k$,z,{showSchemes:0})}}function dr(r,e,n){const t=r.slice();return t[10]=e[n],t}function O$(r){let e,n;return e=new t$({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hr(r){let e,n,t,l;function o(s){r[7](s)}function i(s){r[8](s)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new Qs({props:u}),Z.push(()=>Q(e,"schemesToBeShown",o)),Z.push(()=>Q(e,"show",i)),{c(){h(e.$$.fragment)},m(s,a){b(e,s,a),l=!0},p(s,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=s[1],x(()=>n=!1)),!t&&a&4&&(t=!0,f.show=s[2],x(()=>t=!1)),e.$set(f)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){v(e,s)}}}function br(r){let e,n;return e=new a$({props:{scheme:r[10]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.scheme=t[10]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vr(r){let e=r[1].has(r[10].scheme_reference),n,t,l=e&&br(r);return{c(){l&&l.c(),n=ke()},m(o,i){l&&l.m(o,i),$(o,n,i),t=!0},p(o,i){i&34&&(e=o[1].has(o[10].scheme_reference)),e?l?(l.p(o,i),i&34&&m(l,1)):(l=br(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(ae(),g(l,1,1,()=>{l=null}),fe())},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function T$(r){let e,n,t,l,o,i,u,s,a,f,c=fn()=="Private (development)",d,_,y,S,T,O,N,F;o=new cl({props:{boundaryGeojson:r[3]}}),u=new jl({}),a=new nl({});let D=c&&O$(r);_=new fl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[6]}}),S=new Ar({props:{errorMessage:r[0]}});let C=r[5].size>0&&hr(r),E=De(r[5].values()),M=[];for(let P=0;P<E.length;P+=1)M[P]=vr(dr(r,E,P));const I=P=>g(M[P],1,1,()=>{M[P]=null});return{c(){e=L("div"),n=L("div"),t=L("h1"),t.textContent="Browse schemes",l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment),s=A(),h(a.$$.fragment),f=A(),D&&D.c(),d=A(),h(_.$$.fragment),y=A(),h(S.$$.fragment),T=A(),C&&C.c(),O=A(),N=L("ul");for(let P=0;P<M.length;P+=1)M[P].c();be(n,"display","flex"),be(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(P,R){$(P,e,R),k(e,n),k(n,t),k(n,l),b(o,n,null),k(e,i),b(u,e,null),k(e,s),b(a,e,null),k(e,f),D&&D.m(e,null),k(e,d),b(_,e,null),k(e,y),b(S,e,null),k(e,T),C&&C.m(e,null),k(e,O),k(e,N);for(let q=0;q<M.length;q+=1)M[q]&&M[q].m(N,null);F=!0},p(P,R){const q={};R&8&&(q.boundaryGeojson=P[3]),o.$set(q),c&&D.p(P,R);const j={};if(R&1&&(j.errorMessage=P[0]),S.$set(j),P[5].size>0?C?(C.p(P,R),R&32&&m(C,1)):(C=hr(P),C.c(),m(C,1),C.m(e,O)):C&&(ae(),g(C,1,1,()=>{C=null}),fe()),R&34){E=De(P[5].values());let U;for(U=0;U<E.length;U+=1){const re=dr(P,E,U);M[U]?(M[U].p(re,R),m(M[U],1)):(M[U]=vr(re),M[U].c(),m(M[U],1),M[U].m(N,null))}for(ae(),U=E.length;U<M.length;U+=1)I(U);fe()}},i(P){if(!F){m(o.$$.fragment,P),m(u.$$.fragment,P),m(a.$$.fragment,P),m(D),m(_.$$.fragment,P),m(S.$$.fragment,P),m(C);for(let R=0;R<E.length;R+=1)m(M[R]);F=!0}},o(P){g(o.$$.fragment,P),g(u.$$.fragment,P),g(a.$$.fragment,P),g(D),g(_.$$.fragment,P),g(S.$$.fragment,P),g(C),M=M.filter(Boolean);for(let R=0;R<M.length;R+=1)g(M[R]);F=!1},d(P){P&&p(e),v(o),v(u),v(a),D&&D.d(),v(_),v(S),C&&C.d(),St(M,P)}}}function C$(r){let e,n,t,l,o,i,u;return e=new al({}),t=new S$({props:{showSchemes:r[2]}}),i=new xc({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),o=L("div"),h(i.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),$(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&4&&(f.showSchemes=s[2]),t.$set(f)},i(s){u||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),v(i)}}}function A$(r){let e,n,t;return n=new rl({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[C$]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(n.$$.fragment),G(e,"slot","main")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.style=l[4]),o&8196&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function L$(r){let e,n;return e=new pl({props:{$$slots:{main:[A$],sidebar:[T$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&8255&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function I$(r,e,n){let t,l,o;ue(r,gt,_=>n(3,t=_)),ue(r,yn,_=>n(4,l=_)),ue(r,Lt,_=>n(5,o=_)),$n(()=>{ll()});const i=new URLSearchParams(window.location.search);yn.set(i.get("style")||"dataviz");let u="",s=new Set,a=!0;function f(_){try{gt.set(JSON.parse(_)),Lt.set(Bs(t)),n(0,u="")}catch(y){n(0,u=`The file you loaded is broken: ${y}`)}}function c(_){s=_,n(1,s)}function d(_){a=_,n(2,a)}return[u,s,a,t,l,o,f,c,d]}class P$ extends W{constructor(e){super(),V(this,e,I$,L$,z,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new P$({target:document.getElementById("app")});
