var Rs=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var On=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var vt=(n,e,t)=>(Rs(n,e,"access private method"),t);import{S as Ce,i as Oe,s as Ie,x as be,y as it,f as Y,z as Yt,g as A,h as M,B as st,C as De,p as N,D as Pe,E as Xe,t as se,F as xe,G as mi,H as oe,e as F,I as Je,J as C,l as Q,r as at,K as wl,L as on,c as J,n as z,M as nt,o as W,N as rt,O as Fs,d as he,m as pe,q as ge,P as Ds,Q as bi,R as Wt,T as dt,U as ht,V as pt,W as gt,X as Us,Y as Nr,Z as Gn,_ as Rr,$ as ot,b as $e,a0 as Sl,a1 as co,a2 as js,j as mn,a3 as Bs,a as Ot,k as It,a4 as mr,a5 as kl,a6 as ei,a7 as Tl,a8 as ho,w as vi,a9 as In,aa as Gs,ab as po,ac as zs,ad as Vs,ae as go,af as qs,A as Js,u as Ys}from"./authorities-138ab8bf.js";function mo(n){let e,t;return{c(){e=it("title"),t=se(n[1])},m(r,o){A(r,e,o),M(e,t)},p(r,o){o&2&&xe(t,r[1])},d(r){r&&N(e)}}}function Hs(n){let e,t,r=n[1]&&mo(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let s=0;s<o.length;s+=1)l=be(l,o[s]);return{c(){e=it("svg"),r&&r.c(),t=it("path"),Y(t,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),Yt(e,l)},m(s,u){A(s,e,u),r&&r.m(e,null),M(e,t)},p(s,[u]){s[1]?r?r.p(s,u):(r=mo(s),r.c(),r.m(e,t)):r&&(r.d(1),r=null),Yt(e,l=st(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:s[0]},u&1&&{height:s[0]},u&4&&s[2],u&8&&s[3]]))},i:De,o:De,d(s){s&&N(e),r&&r.d()}}}function Ws(n,e,t){let r,o;const l=["size","title"];let s=Pe(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=be(be({},e),Xe(f))),t(3,s=Pe(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[u,c,o,s,r]}class Zs extends Ce{constructor(e){super(),Oe(this,e,Ws,Hs,Ie,{size:0,title:1})}}const _i=Zs;function bo(n,e,t){const r=n.slice();return r[2]=e[t].width,r}function Xs(n){let e,t,r,o,l=[n[4],{style:t="width: "+n[2]+";"+n[4].style}],s={};for(let u=0;u<l.length;u+=1)s=be(s,l[u]);return{c(){e=F("p"),Je(e,s),C(e,"bx--skeleton__text",!0),C(e,"bx--skeleton__heading",n[0])},m(u,c){A(u,e,c),r||(o=[Q(e,"click",n[12]),Q(e,"mouseover",n[13]),Q(e,"mouseenter",n[14]),Q(e,"mouseleave",n[15])],r=!0)},p(u,c){Je(e,s=st(l,[c&16&&u[4],c&20&&t!==(t="width: "+u[2]+";"+u[4].style)&&{style:t}])),C(e,"bx--skeleton__text",!0),C(e,"bx--skeleton__heading",u[0])},d(u){u&&N(e),r=!1,at(o)}}}function Ks(n){let e,t,r,o=n[3],l=[];for(let c=0;c<o.length;c+=1)l[c]=vo(bo(n,o,c));let s=[n[4]],u={};for(let c=0;c<s.length;c+=1)u=be(u,s[c]);return{c(){e=F("div");for(let c=0;c<l.length;c+=1)l[c].c();Je(e,u)},m(c,f){A(c,e,f);for(let p=0;p<l.length;p+=1)l[p].m(e,null);t||(r=[Q(e,"click",n[8]),Q(e,"mouseover",n[9]),Q(e,"mouseenter",n[10]),Q(e,"mouseleave",n[11])],t=!0)},p(c,f){if(f&9){o=c[3];let p;for(p=0;p<o.length;p+=1){const _=bo(c,o,p);l[p]?l[p].p(_,f):(l[p]=vo(_),l[p].c(),l[p].m(e,null))}for(;p<l.length;p+=1)l[p].d(1);l.length=o.length}Je(e,u=st(s,[f&16&&c[4]]))},d(c){c&&N(e),wl(l,c),t=!1,at(r)}}}function vo(n){let e;return{c(){e=F("p"),on(e,"width",n[2]),C(e,"bx--skeleton__text",!0),C(e,"bx--skeleton__heading",n[0])},m(t,r){A(t,e,r)},p(t,r){r&8&&on(e,"width",t[2]),r&1&&C(e,"bx--skeleton__heading",t[0])},d(t){t&&N(e)}}}function Qs(n){let e;function t(l,s){return l[1]?Ks:Xs}let r=t(n),o=r(n);return{c(){o.c(),e=mi()},m(l,s){o.m(l,s),A(l,e,s)},p(l,[s]){r===(r=t(l))&&o?o.p(l,s):(o.d(1),o=r(l),o&&(o.c(),o.m(e.parentNode,e)))},i:De,o:De,d(l){o.d(l),l&&N(e)}}}function $s(n,e,t){let r,o,l;const s=["lines","heading","paragraph","width"];let u=Pe(e,s),{lines:c=3}=e,{heading:f=!1}=e,{paragraph:p=!1}=e,{width:_="100%"}=e;const b=[.973,.153,.567];function h(R){oe.call(this,n,R)}function g(R){oe.call(this,n,R)}function k(R){oe.call(this,n,R)}function E(R){oe.call(this,n,R)}function L(R){oe.call(this,n,R)}function T(R){oe.call(this,n,R)}function O(R){oe.call(this,n,R)}function x(R){oe.call(this,n,R)}return n.$$set=R=>{e=be(be({},e),Xe(R)),t(4,u=Pe(e,s)),"lines"in R&&t(5,c=R.lines),"heading"in R&&t(0,f=R.heading),"paragraph"in R&&t(1,p=R.paragraph),"width"in R&&t(2,_=R.width)},n.$$.update=()=>{if(n.$$.dirty&4&&t(7,o=parseInt(_,10)),n.$$.dirty&4&&t(6,l=_.includes("px")),n.$$.dirty&238&&p)for(let R=0;R<c;R++){const U=l?o-75:0,ve=l?o:75,q=Math.floor(b[R%3]*(ve-U+1))+U+"px";t(3,r=[...r,{width:l?q:`calc(${_} - ${q})`}])}},t(3,r=[]),[f,p,_,r,u,c,l,o,h,g,k,E,L,T,O,x]}class ea extends Ce{constructor(e){super(),Oe(this,e,$s,Qs,Ie,{lines:5,heading:0,paragraph:1,width:2})}}const Mn=ea;function _o(n,e,t){const r=n.slice();return r[9]=e[t],r}function yo(n){let e,t,r,o,l,s,u,c,f,p,_,b,h;return r=new _i({props:{class:"bx--accordion__arrow"}}),l=new Mn({props:{class:"bx--accordion__title"}}),c=new Mn({props:{width:"90%"}}),p=new Mn({props:{width:"80%"}}),b=new Mn({props:{width:"95%"}}),{c(){e=F("li"),t=F("span"),he(r.$$.fragment),o=J(),he(l.$$.fragment),s=J(),u=F("div"),he(c.$$.fragment),f=J(),he(p.$$.fragment),_=J(),he(b.$$.fragment),C(t,"bx--accordion__heading",!0),C(u,"bx--accordion__content",!0),C(e,"bx--accordion__item",!0),C(e,"bx--accordion__item--active",!0)},m(g,k){A(g,e,k),M(e,t),pe(r,t,null),M(t,o),pe(l,t,null),M(e,s),M(e,u),pe(c,u,null),M(u,f),pe(p,u,null),M(u,_),pe(b,u,null),h=!0},i(g){h||(z(r.$$.fragment,g),z(l.$$.fragment,g),z(c.$$.fragment,g),z(p.$$.fragment,g),z(b.$$.fragment,g),h=!0)},o(g){W(r.$$.fragment,g),W(l.$$.fragment,g),W(c.$$.fragment,g),W(p.$$.fragment,g),W(b.$$.fragment,g),h=!1},d(g){g&&N(e),ge(r),ge(l),ge(c),ge(p),ge(b)}}}function Eo(n,e){let t,r,o,l,s,u,c;return o=new _i({props:{class:"bx--accordion__arrow"}}),s=new Mn({props:{class:"bx--accordion__title"}}),{key:n,first:null,c(){t=F("li"),r=F("span"),he(o.$$.fragment),l=J(),he(s.$$.fragment),u=J(),C(r,"bx--accordion__heading",!0),C(t,"bx--accordion__item",!0),this.first=t},m(f,p){A(f,t,p),M(t,r),pe(o,r,null),M(r,l),pe(s,r,null),M(t,u),c=!0},p(f,p){},i(f){c||(z(o.$$.fragment,f),z(s.$$.fragment,f),c=!0)},o(f){W(o.$$.fragment,f),W(s.$$.fragment,f),c=!1},d(f){f&&N(t),ge(o),ge(s)}}}function ta(n){let e,t,r=[],o=new Map,l,s,u,c=n[3]&&yo(),f=Array.from({length:n[3]?n[0]-1:n[0]},wo);const p=h=>h[9];for(let h=0;h<f.length;h+=1){let g=_o(n,f,h),k=p(g);o.set(k,r[h]=Eo(k))}let _=[n[4]],b={};for(let h=0;h<_.length;h+=1)b=be(b,_[h]);return{c(){e=F("ul"),c&&c.c(),t=J();for(let h=0;h<r.length;h+=1)r[h].c();Je(e,b),C(e,"bx--skeleton",!0),C(e,"bx--accordion",!0),C(e,"bx--accordion--start",n[1]==="start"),C(e,"bx--accordion--end",n[1]==="end"),C(e,"bx--accordion--sm",n[2]==="sm"),C(e,"bx--accordion--xl",n[2]==="xl")},m(h,g){A(h,e,g),c&&c.m(e,null),M(e,t);for(let k=0;k<r.length;k+=1)r[k].m(e,null);l=!0,s||(u=[Q(e,"click",n[5]),Q(e,"mouseover",n[6]),Q(e,"mouseenter",n[7]),Q(e,"mouseleave",n[8])],s=!0)},p(h,[g]){h[3]?c?g&8&&z(c,1):(c=yo(),c.c(),z(c,1),c.m(e,t)):c&&(nt(),W(c,1,1,()=>{c=null}),rt()),g&9&&(f=Array.from({length:h[3]?h[0]-1:h[0]},wo),nt(),r=Fs(r,g,p,1,h,f,o,e,Ds,Eo,null,_o),rt()),Je(e,b=st(_,[g&16&&h[4]])),C(e,"bx--skeleton",!0),C(e,"bx--accordion",!0),C(e,"bx--accordion--start",h[1]==="start"),C(e,"bx--accordion--end",h[1]==="end"),C(e,"bx--accordion--sm",h[2]==="sm"),C(e,"bx--accordion--xl",h[2]==="xl")},i(h){if(!l){z(c);for(let g=0;g<f.length;g+=1)z(r[g]);l=!0}},o(h){W(c);for(let g=0;g<r.length;g+=1)W(r[g]);l=!1},d(h){h&&N(e),c&&c.d();for(let g=0;g<r.length;g+=1)r[g].d();s=!1,at(u)}}}const wo=(n,e)=>e;function na(n,e,t){const r=["count","align","size","open"];let o=Pe(e,r),{count:l=4}=e,{align:s="end"}=e,{size:u=void 0}=e,{open:c=!0}=e;function f(h){oe.call(this,n,h)}function p(h){oe.call(this,n,h)}function _(h){oe.call(this,n,h)}function b(h){oe.call(this,n,h)}return n.$$set=h=>{e=be(be({},e),Xe(h)),t(4,o=Pe(e,r)),"count"in h&&t(0,l=h.count),"align"in h&&t(1,s=h.align),"size"in h&&t(2,u=h.size),"open"in h&&t(3,c=h.open)},[l,s,u,c,o,f,p,_,b]}class ra extends Ce{constructor(e){super(),Oe(this,e,na,ta,Ie,{count:0,align:1,size:2,open:3})}}const ia=ra;function oa(n){let e,t,r,o;const l=n[6].default,s=dt(l,n,n[5],null);let u=[n[3]],c={};for(let f=0;f<u.length;f+=1)c=be(c,u[f]);return{c(){e=F("ul"),s&&s.c(),Je(e,c),C(e,"bx--accordion",!0),C(e,"bx--accordion--start",n[0]==="start"),C(e,"bx--accordion--end",n[0]==="end"),C(e,"bx--accordion--sm",n[1]==="sm"),C(e,"bx--accordion--xl",n[1]==="xl")},m(f,p){A(f,e,p),s&&s.m(e,null),t=!0,r||(o=[Q(e,"click",n[7]),Q(e,"mouseover",n[8]),Q(e,"mouseenter",n[9]),Q(e,"mouseleave",n[10])],r=!0)},p(f,p){s&&s.p&&(!t||p&32)&&ht(s,l,f,f[5],t?gt(l,f[5],p,null):pt(f[5]),null),Je(e,c=st(u,[p&8&&f[3]])),C(e,"bx--accordion",!0),C(e,"bx--accordion--start",f[0]==="start"),C(e,"bx--accordion--end",f[0]==="end"),C(e,"bx--accordion--sm",f[1]==="sm"),C(e,"bx--accordion--xl",f[1]==="xl")},i(f){t||(z(s,f),t=!0)},o(f){W(s,f),t=!1},d(f){f&&N(e),s&&s.d(f),r=!1,at(o)}}}function la(n){let e,t;const r=[n[3],{align:n[0]},{size:n[1]}];let o={};for(let l=0;l<r.length;l+=1)o=be(o,r[l]);return e=new ia({props:o}),e.$on("click",n[11]),e.$on("mouseover",n[12]),e.$on("mouseenter",n[13]),e.$on("mouseleave",n[14]),{c(){he(e.$$.fragment)},m(l,s){pe(e,l,s),t=!0},p(l,s){const u=s&11?st(r,[s&8&&Us(l[3]),s&1&&{align:l[0]},s&2&&{size:l[1]}]):{};e.$set(u)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){ge(e,l)}}}function sa(n){let e,t,r,o;const l=[la,oa],s=[];function u(c,f){return c[2]?0:1}return e=u(n),t=s[e]=l[e](n),{c(){t.c(),r=mi()},m(c,f){s[e].m(c,f),A(c,r,f),o=!0},p(c,[f]){let p=e;e=u(c),e===p?s[e].p(c,f):(nt(),W(s[p],1,1,()=>{s[p]=null}),rt(),t=s[e],t?t.p(c,f):(t=s[e]=l[e](c),t.c()),z(t,1),t.m(r.parentNode,r))},i(c){o||(z(t),o=!0)},o(c){W(t),o=!1},d(c){s[e].d(c),c&&N(r)}}}function aa(n,e,t){const r=["align","size","disabled","skeleton"];let o=Pe(e,r),{$$slots:l={},$$scope:s}=e,{align:u="end"}=e,{size:c=void 0}=e,{disabled:f=!1}=e,{skeleton:p=!1}=e;const _=Wt(f);bi("Accordion",{disableItems:_});function b(x){oe.call(this,n,x)}function h(x){oe.call(this,n,x)}function g(x){oe.call(this,n,x)}function k(x){oe.call(this,n,x)}function E(x){oe.call(this,n,x)}function L(x){oe.call(this,n,x)}function T(x){oe.call(this,n,x)}function O(x){oe.call(this,n,x)}return n.$$set=x=>{e=be(be({},e),Xe(x)),t(3,o=Pe(e,r)),"align"in x&&t(0,u=x.align),"size"in x&&t(1,c=x.size),"disabled"in x&&t(4,f=x.disabled),"skeleton"in x&&t(2,p=x.skeleton),"$$scope"in x&&t(5,s=x.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&_.set(f)},[u,c,p,o,f,s,l,b,h,g,k,E,L,T,O]}class ua extends Ce{constructor(e){super(),Oe(this,e,aa,sa,Ie,{align:0,size:1,disabled:4,skeleton:2})}}const fa=ua,ca=n=>({}),So=n=>({});function da(n){let e;return{c(){e=se(n[2])},m(t,r){A(t,e,r)},p(t,r){r&4&&xe(e,t[2])},d(t){t&&N(e)}}}function ha(n){let e,t,r,o,l,s,u,c,f,p;r=new _i({props:{class:"bx--accordion__arrow","aria-label":n[3]}});const _=n[7].title,b=dt(_,n,n[6],So),h=b||da(n),g=n[7].default,k=dt(g,n,n[6],null);let E=[n[5]],L={};for(let T=0;T<E.length;T+=1)L=be(L,E[T]);return{c(){e=F("li"),t=F("button"),he(r.$$.fragment),o=J(),l=F("div"),h&&h.c(),s=J(),u=F("div"),k&&k.c(),C(l,"bx--accordion__title",!0),Y(t,"type","button"),Y(t,"title",n[3]),Y(t,"aria-expanded",n[0]),t.disabled=n[1],C(t,"bx--accordion__heading",!0),C(u,"bx--accordion__content",!0),Je(e,L),C(e,"bx--accordion__item",!0),C(e,"bx--accordion__item--active",n[0]),C(e,"bx--accordion__item--disabled",n[1]),C(e,"bx--accordion__item--expanding",n[4]==="expanding"),C(e,"bx--accordion__item--collapsing",n[4]==="collapsing")},m(T,O){A(T,e,O),M(e,t),pe(r,t,null),M(t,o),M(t,l),h&&h.m(l,null),M(e,s),M(e,u),k&&k.m(u,null),c=!0,f||(p=[Q(t,"click",n[9]),Q(t,"click",n[14]),Q(t,"mouseover",n[10]),Q(t,"mouseenter",n[11]),Q(t,"mouseleave",n[12]),Q(t,"keydown",n[13]),Q(t,"keydown",n[15]),Q(e,"animationend",n[8]),Q(e,"animationend",n[16])],f=!0)},p(T,[O]){const x={};O&8&&(x["aria-label"]=T[3]),r.$set(x),b?b.p&&(!c||O&64)&&ht(b,_,T,T[6],c?gt(_,T[6],O,ca):pt(T[6]),So):h&&h.p&&(!c||O&4)&&h.p(T,c?O:-1),(!c||O&8)&&Y(t,"title",T[3]),(!c||O&1)&&Y(t,"aria-expanded",T[0]),(!c||O&2)&&(t.disabled=T[1]),k&&k.p&&(!c||O&64)&&ht(k,g,T,T[6],c?gt(g,T[6],O,null):pt(T[6]),null),Je(e,L=st(E,[O&32&&T[5]])),C(e,"bx--accordion__item",!0),C(e,"bx--accordion__item--active",T[0]),C(e,"bx--accordion__item--disabled",T[1]),C(e,"bx--accordion__item--expanding",T[4]==="expanding"),C(e,"bx--accordion__item--collapsing",T[4]==="collapsing")},i(T){c||(z(r.$$.fragment,T),z(h,T),z(k,T),c=!0)},o(T){W(r.$$.fragment,T),W(h,T),W(k,T),c=!1},d(T){T&&N(e),ge(r),h&&h.d(T),k&&k.d(T),f=!1,at(p)}}}function pa(n,e,t){const r=["title","open","disabled","iconDescription"];let o=Pe(e,r),{$$slots:l={},$$scope:s}=e,{title:u="title"}=e,{open:c=!1}=e,{disabled:f=!1}=e,{iconDescription:p="Expand/Collapse"}=e,_=f;const h=Nr("Accordion").disableItems.subscribe(q=>{!q&&_||t(1,f=q)});let g;Gn(()=>()=>{h()});function k(q){oe.call(this,n,q)}function E(q){oe.call(this,n,q)}function L(q){oe.call(this,n,q)}function T(q){oe.call(this,n,q)}function O(q){oe.call(this,n,q)}function x(q){oe.call(this,n,q)}const R=()=>{t(0,c=!c),t(4,g=c?"expanding":"collapsing")},U=({key:q})=>{c&&q==="Escape"&&t(0,c=!1)},ve=()=>{t(4,g=void 0)};return n.$$set=q=>{e=be(be({},e),Xe(q)),t(5,o=Pe(e,r)),"title"in q&&t(2,u=q.title),"open"in q&&t(0,c=q.open),"disabled"in q&&t(1,f=q.disabled),"iconDescription"in q&&t(3,p=q.iconDescription),"$$scope"in q&&t(6,s=q.$$scope)},[c,f,u,p,g,o,s,l,k,E,L,T,O,x,R,U,ve]}class ga extends Ce{constructor(e){super(),Oe(this,e,pa,ha,Ie,{title:2,open:0,disabled:1,iconDescription:3})}}const ma=ga;function ko(n){let e,t;return{c(){e=it("title"),t=se(n[1])},m(r,o){A(r,e,o),M(e,t)},p(r,o){o&2&&xe(t,r[1])},d(r){r&&N(e)}}}function ba(n){let e,t,r,o=n[1]&&ko(n),l=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],s={};for(let u=0;u<l.length;u+=1)s=be(s,l[u]);return{c(){e=it("svg"),o&&o.c(),t=it("path"),r=it("path"),Y(t,"d","M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14C30,8.3,23.7,2,16,2z M14.9,8h2.2v11h-2.2V8z M16,25	c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22c0.8,0,1.5,0.7,1.5,1.5S16.8,25,16,25z"),Y(r,"fill","none"),Y(r,"d","M17.5,23.5c0,0.8-0.7,1.5-1.5,1.5c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22	C16.8,22,17.5,22.7,17.5,23.5z M17.1,8h-2.2v11h2.2V8z"),Y(r,"data-icon-path","inner-path"),Y(r,"opacity","0"),Yt(e,s)},m(u,c){A(u,e,c),o&&o.m(e,null),M(e,t),M(e,r)},p(u,[c]){u[1]?o?o.p(u,c):(o=ko(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null),Yt(e,s=st(l,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},c&1&&{width:u[0]},c&1&&{height:u[0]},c&4&&u[2],c&8&&u[3]]))},i:De,o:De,d(u){u&&N(e),o&&o.d()}}}function va(n,e,t){let r,o;const l=["size","title"];let s=Pe(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=be(be({},e),Xe(f))),t(3,s=Pe(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[u,c,o,s,r]}class _a extends Ce{constructor(e){super(),Oe(this,e,va,ba,Ie,{size:0,title:1})}}const Cl=_a;function To(n){let e,t;return{c(){e=it("title"),t=se(n[1])},m(r,o){A(r,e,o),M(e,t)},p(r,o){o&2&&xe(t,r[1])},d(r){r&&N(e)}}}function ya(n){let e,t,r,o,l=n[1]&&To(n),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],u={};for(let c=0;c<s.length;c+=1)u=be(u,s[c]);return{c(){e=it("svg"),l&&l.c(),t=it("path"),r=it("path"),o=it("path"),Y(t,"fill","none"),Y(t,"d","M16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Zm-1.125-5h2.25V12h-2.25Z"),Y(t,"data-icon-path","inner-path"),Y(r,"d","M16.002,6.1714h-.004L4.6487,27.9966,4.6506,28H27.3494l.0019-.0034ZM14.875,12h2.25v9h-2.25ZM16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Z"),Y(o,"d","M29,30H3a1,1,0,0,1-.8872-1.4614l13-25a1,1,0,0,1,1.7744,0l13,25A1,1,0,0,1,29,30ZM4.6507,28H27.3493l.002-.0033L16.002,6.1714h-.004L4.6487,27.9967Z"),Yt(e,u)},m(c,f){A(c,e,f),l&&l.m(e,null),M(e,t),M(e,r),M(e,o)},p(c,[f]){c[1]?l?l.p(c,f):(l=To(c),l.c(),l.m(e,t)):l&&(l.d(1),l=null),Yt(e,u=st(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},f&1&&{width:c[0]},f&1&&{height:c[0]},f&4&&c[2],f&8&&c[3]]))},i:De,o:De,d(c){c&&N(e),l&&l.d()}}}function Ea(n,e,t){let r,o;const l=["size","title"];let s=Pe(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=be(be({},e),Xe(f))),t(3,s=Pe(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[u,c,o,s,r]}class wa extends Ce{constructor(e){super(),Oe(this,e,Ea,ya,Ie,{size:0,title:1})}}const Sa=wa,ka=n=>({}),Co=n=>({});function Oo(n){let e,t;const r=n[16].labelText,o=dt(r,n,n[15],Co),l=o||Ta(n);return{c(){e=F("span"),l&&l.c(),C(e,"bx--visually-hidden",n[7])},m(s,u){A(s,e,u),l&&l.m(e,null),t=!0},p(s,u){o?o.p&&(!t||u&32768)&&ht(o,r,s,s[15],t?gt(r,s[15],u,ka):pt(s[15]),Co):l&&l.p&&(!t||u&64)&&l.p(s,t?u:-1),(!t||u&128)&&C(e,"bx--visually-hidden",s[7])},i(s){t||(z(l,s),t=!0)},o(s){W(l,s),t=!1},d(s){s&&N(e),l&&l.d(s)}}}function Ta(n){let e;return{c(){e=se(n[6])},m(t,r){A(t,e,r)},p(t,r){r&64&&xe(e,t[6])},d(t){t&&N(e)}}}function Ca(n){let e,t,r,o,l,s,u,c,f,p=(n[6]||n[13].labelText)&&Oo(n),_=[n[12]],b={};for(let h=0;h<_.length;h+=1)b=be(b,_[h]);return{c(){e=F("div"),t=F("input"),r=J(),o=F("label"),l=F("span"),s=J(),p&&p.c(),Y(t,"type","radio"),Y(t,"id",n[8]),Y(t,"name",n[9]),t.checked=n[0],t.disabled=n[3],t.required=n[4],t.value=n[2],C(t,"bx--radio-button",!0),C(l,"bx--radio-button__appearance",!0),Y(o,"for",n[8]),C(o,"bx--radio-button__label",!0),Je(e,b),C(e,"bx--radio-button-wrapper",!0),C(e,"bx--radio-button-wrapper--label-left",n[5]==="left")},m(h,g){A(h,e,g),M(e,t),n[18](t),M(e,r),M(e,o),M(o,l),M(o,s),p&&p.m(o,null),u=!0,c||(f=[Q(t,"change",n[17]),Q(t,"change",n[19])],c=!0)},p(h,[g]){(!u||g&256)&&Y(t,"id",h[8]),(!u||g&512)&&Y(t,"name",h[9]),(!u||g&1)&&(t.checked=h[0]),(!u||g&8)&&(t.disabled=h[3]),(!u||g&16)&&(t.required=h[4]),(!u||g&4)&&(t.value=h[2]),h[6]||h[13].labelText?p?(p.p(h,g),g&8256&&z(p,1)):(p=Oo(h),p.c(),z(p,1),p.m(o,null)):p&&(nt(),W(p,1,1,()=>{p=null}),rt()),(!u||g&256)&&Y(o,"for",h[8]),Je(e,b=st(_,[g&4096&&h[12]])),C(e,"bx--radio-button-wrapper",!0),C(e,"bx--radio-button-wrapper--label-left",h[5]==="left")},i(h){u||(z(p),u=!0)},o(h){W(p),u=!1},d(h){h&&N(e),n[18](null),p&&p.d(),c=!1,at(f)}}}function Oa(n,e,t){const r=["value","checked","disabled","required","labelPosition","labelText","hideLabel","id","name","ref"];let o=Pe(e,r),l,{$$slots:s={},$$scope:u}=e;const c=Rr(s);let{value:f=""}=e,{checked:p=!1}=e,{disabled:_=!1}=e,{required:b=!1}=e,{labelPosition:h="right"}=e,{labelText:g=""}=e,{hideLabel:k=!1}=e,{id:E="ccs-"+Math.random().toString(36)}=e,{name:L=""}=e,{ref:T=null}=e;const O=Nr("RadioButtonGroup"),x=O?O.selectedValue:Wt(p?f:void 0);ot(n,x,q=>t(14,l=q)),O&&O.add({id:E,checked:p,disabled:_,value:f});function R(q){oe.call(this,n,q)}function U(q){$e[q?"unshift":"push"](()=>{T=q,t(1,T)})}const ve=()=>{O&&O.update(f)};return n.$$set=q=>{e=be(be({},e),Xe(q)),t(12,o=Pe(e,r)),"value"in q&&t(2,f=q.value),"checked"in q&&t(0,p=q.checked),"disabled"in q&&t(3,_=q.disabled),"required"in q&&t(4,b=q.required),"labelPosition"in q&&t(5,h=q.labelPosition),"labelText"in q&&t(6,g=q.labelText),"hideLabel"in q&&t(7,k=q.hideLabel),"id"in q&&t(8,E=q.id),"name"in q&&t(9,L=q.name),"ref"in q&&t(1,T=q.ref),"$$scope"in q&&t(15,u=q.$$scope)},n.$$.update=()=>{n.$$.dirty&16388&&t(0,p=l===f)},[p,T,f,_,b,h,g,k,E,L,O,x,o,c,l,u,s,R,U,ve]}class Ia extends Ce{constructor(e){super(),Oe(this,e,Oa,Ca,Ie,{value:2,checked:0,disabled:3,required:4,labelPosition:5,labelText:6,hideLabel:7,id:8,name:9,ref:1})}}const br=Ia;function Io(n){let e,t;return{c(){e=it("title"),t=se(n[1])},m(r,o){A(r,e,o),M(e,t)},p(r,o){o&2&&xe(t,r[1])},d(r){r&&N(e)}}}function La(n){let e,t,r=n[1]&&Io(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let s=0;s<o.length;s+=1)l=be(l,o[s]);return{c(){e=it("svg"),r&&r.c(),t=it("path"),Y(t,"d","M30 28.6L3.4 2 2 3.4l10.1 10.1L4 21.6V28h6.4l8.1-8.1L28.6 30 30 28.6zM9.6 26H6v-3.6l7.5-7.5 3.6 3.6L9.6 26zM29.4 6.2L29.4 6.2l-3.6-3.6c-.8-.8-2-.8-2.8 0l0 0 0 0-8 8 1.4 1.4L20 8.4l3.6 3.6L20 15.6l1.4 1.4 8-8C30.2 8.2 30.2 7 29.4 6.2L29.4 6.2zM25 10.6L21.4 7l3-3L28 7.6 25 10.6z"),Yt(e,l)},m(s,u){A(s,e,u),r&&r.m(e,null),M(e,t)},p(s,[u]){s[1]?r?r.p(s,u):(r=Io(s),r.c(),r.m(e,t)):r&&(r.d(1),r=null),Yt(e,l=st(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:s[0]},u&1&&{height:s[0]},u&4&&s[2],u&8&&s[3]]))},i:De,o:De,d(s){s&&N(e),r&&r.d()}}}function Ma(n,e,t){let r,o;const l=["size","title"];let s=Pe(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=be(be({},e),Xe(f))),t(3,s=Pe(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=Xe(e),[u,c,o,s,r]}class Pa extends Ce{constructor(e){super(),Oe(this,e,Ma,La,Ie,{size:0,title:1})}}const xa=Pa;function Aa(n){let e,t,r,o;const l=n[5].default,s=dt(l,n,n[4],null);let u=[n[3]],c={};for(let f=0;f<u.length;f+=1)c=be(c,u[f]);return{c(){e=F("ol"),s&&s.c(),Je(e,c),C(e,"bx--list--ordered",!n[1]),C(e,"bx--list--ordered--native",n[1]),C(e,"bx--list--nested",n[0]),C(e,"bx--list--expressive",n[2])},m(f,p){A(f,e,p),s&&s.m(e,null),t=!0,r||(o=[Q(e,"click",n[6]),Q(e,"mouseover",n[7]),Q(e,"mouseenter",n[8]),Q(e,"mouseleave",n[9])],r=!0)},p(f,[p]){s&&s.p&&(!t||p&16)&&ht(s,l,f,f[4],t?gt(l,f[4],p,null):pt(f[4]),null),Je(e,c=st(u,[p&8&&f[3]])),C(e,"bx--list--ordered",!f[1]),C(e,"bx--list--ordered--native",f[1]),C(e,"bx--list--nested",f[0]),C(e,"bx--list--expressive",f[2])},i(f){t||(z(s,f),t=!0)},o(f){W(s,f),t=!1},d(f){f&&N(e),s&&s.d(f),r=!1,at(o)}}}function Na(n,e,t){const r=["nested","native","expressive"];let o=Pe(e,r),{$$slots:l={},$$scope:s}=e,{nested:u=!1}=e,{native:c=!1}=e,{expressive:f=!1}=e;function p(g){oe.call(this,n,g)}function _(g){oe.call(this,n,g)}function b(g){oe.call(this,n,g)}function h(g){oe.call(this,n,g)}return n.$$set=g=>{e=be(be({},e),Xe(g)),t(3,o=Pe(e,r)),"nested"in g&&t(0,u=g.nested),"native"in g&&t(1,c=g.native),"expressive"in g&&t(2,f=g.expressive),"$$scope"in g&&t(4,s=g.$$scope)},[u,c,f,o,s,l,p,_,b,h]}class Ra extends Ce{constructor(e){super(),Oe(this,e,Na,Aa,Ie,{nested:0,native:1,expressive:2})}}const Fa=Ra,Da=n=>({}),Lo=n=>({});function Mo(n){let e,t;const r=n[11].legendText,o=dt(r,n,n[10],Lo),l=o||Ua(n);return{c(){e=F("legend"),l&&l.c(),C(e,"bx--label",!0),C(e,"bx--visually-hidden",n[2])},m(s,u){A(s,e,u),l&&l.m(e,null),t=!0},p(s,u){o?o.p&&(!t||u&1024)&&ht(o,r,s,s[10],t?gt(r,s[10],u,Da):pt(s[10]),Lo):l&&l.p&&(!t||u&2)&&l.p(s,t?u:-1),(!t||u&4)&&C(e,"bx--visually-hidden",s[2])},i(s){t||(z(l,s),t=!0)},o(s){W(l,s),t=!1},d(s){s&&N(e),l&&l.d(s)}}}function Ua(n){let e;return{c(){e=se(n[1])},m(t,r){A(t,e,r)},p(t,r){r&2&&xe(e,t[1])},d(t){t&&N(e)}}}function ja(n){let e,t,r,o,l,s,u=(n[1]||n[8].legendText)&&Mo(n);const c=n[11].default,f=dt(c,n,n[10],null);let p=[{id:n[5]},n[7]],_={};for(let b=0;b<p.length;b+=1)_=be(_,p[b]);return{c(){e=F("div"),t=F("fieldset"),u&&u.c(),r=J(),f&&f.c(),t.disabled=n[0],C(t,"bx--radio-button-group",!0),C(t,"bx--radio-button-group--vertical",n[4]==="vertical"),C(t,"bx--radio-button-group--label-left",n[3]==="left"),C(t,"bx--radio-button-group--label-right",n[3]==="right"),Je(e,_),C(e,"bx--form-item",!0)},m(b,h){A(b,e,h),M(e,t),u&&u.m(t,null),M(t,r),f&&f.m(t,null),o=!0,l||(s=[Q(e,"click",n[12]),Q(e,"mouseover",n[13]),Q(e,"mouseenter",n[14]),Q(e,"mouseleave",n[15])],l=!0)},p(b,[h]){b[1]||b[8].legendText?u?(u.p(b,h),h&258&&z(u,1)):(u=Mo(b),u.c(),z(u,1),u.m(t,r)):u&&(nt(),W(u,1,1,()=>{u=null}),rt()),f&&f.p&&(!o||h&1024)&&ht(f,c,b,b[10],o?gt(c,b[10],h,null):pt(b[10]),null),(!o||h&1)&&(t.disabled=b[0]),(!o||h&16)&&C(t,"bx--radio-button-group--vertical",b[4]==="vertical"),(!o||h&8)&&C(t,"bx--radio-button-group--label-left",b[3]==="left"),(!o||h&8)&&C(t,"bx--radio-button-group--label-right",b[3]==="right"),Je(e,_=st(p,[(!o||h&32)&&{id:b[5]},h&128&&b[7]])),C(e,"bx--form-item",!0)},i(b){o||(z(u),z(f,b),o=!0)},o(b){W(u),W(f,b),o=!1},d(b){b&&N(e),u&&u.d(),f&&f.d(b),l=!1,at(s)}}}function Ba(n,e,t){const r=["selected","disabled","legendText","hideLegend","labelPosition","orientation","id"];let o=Pe(e,r),l,{$$slots:s={},$$scope:u}=e;const c=Rr(s);let{selected:f=void 0}=e,{disabled:p=!1}=e,{legendText:_=""}=e,{hideLegend:b=!1}=e,{labelPosition:h="right"}=e,{orientation:g="horizontal"}=e,{id:k=void 0}=e;const E=Sl(),L=Wt(f);ot(n,L,U=>t(16,l=U)),bi("RadioButtonGroup",{selectedValue:L,add:({checked:U,value:ve})=>{U&&L.set(ve)},update:U=>{t(9,f=U)}}),Gn(()=>{co(L,l=f,l)}),js(()=>{co(L,l=f,l)}),L.subscribe(U=>{t(9,f=U),E("change",U)});function T(U){oe.call(this,n,U)}function O(U){oe.call(this,n,U)}function x(U){oe.call(this,n,U)}function R(U){oe.call(this,n,U)}return n.$$set=U=>{e=be(be({},e),Xe(U)),t(7,o=Pe(e,r)),"selected"in U&&t(9,f=U.selected),"disabled"in U&&t(0,p=U.disabled),"legendText"in U&&t(1,_=U.legendText),"hideLegend"in U&&t(2,b=U.hideLegend),"labelPosition"in U&&t(3,h=U.labelPosition),"orientation"in U&&t(4,g=U.orientation),"id"in U&&t(5,k=U.id),"$$scope"in U&&t(10,u=U.$$scope)},[p,_,b,h,g,k,L,o,c,f,u,s,T,O,x,R]}class Ga extends Ce{constructor(e){super(),Oe(this,e,Ba,ja,Ie,{selected:9,disabled:0,legendText:1,hideLegend:2,labelPosition:3,orientation:4,id:5})}}const za=Ga,Va=n=>({}),Po=n=>({});function xo(n){let e,t,r,o;const l=n[20].labelText,s=dt(l,n,n[19],Po),u=s||qa(n);let c=n[5]&&Ao(n);return{c(){e=F("div"),t=F("label"),u&&u.c(),r=J(),c&&c.c(),Y(t,"for",n[14]),C(t,"bx--label",!0),C(t,"bx--visually-hidden",n[11]),C(t,"bx--label--disabled",n[7]),C(e,"bx--text-area__label-wrapper",!0)},m(f,p){A(f,e,p),M(e,t),u&&u.m(t,null),M(e,r),c&&c.m(e,null),o=!0},p(f,p){s?s.p&&(!o||p[0]&524288)&&ht(s,l,f,f[19],o?gt(l,f[19],p,Va):pt(f[19]),Po):u&&u.p&&(!o||p[0]&1024)&&u.p(f,o?p:[-1,-1]),(!o||p[0]&16384)&&Y(t,"for",f[14]),(!o||p[0]&2048)&&C(t,"bx--visually-hidden",f[11]),(!o||p[0]&128)&&C(t,"bx--label--disabled",f[7]),f[5]?c?c.p(f,p):(c=Ao(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(f){o||(z(u,f),o=!0)},o(f){W(u,f),o=!1},d(f){f&&N(e),u&&u.d(f),c&&c.d()}}}function qa(n){let e;return{c(){e=se(n[10])},m(t,r){A(t,e,r)},p(t,r){r[0]&1024&&xe(e,t[10])},d(t){t&&N(e)}}}function Ao(n){let e,t=n[0].length+"",r,o,l;return{c(){e=F("div"),r=se(t),o=se("/"),l=se(n[5]),C(e,"bx--label",!0),C(e,"bx--label--disabled",n[7])},m(s,u){A(s,e,u),M(e,r),M(e,o),M(e,l)},p(s,u){u[0]&1&&t!==(t=s[0].length+"")&&xe(r,t),u[0]&32&&xe(l,s[5]),u[0]&128&&C(e,"bx--label--disabled",s[7])},d(s){s&&N(e)}}}function No(n){let e,t;return e=new Cl({props:{class:"bx--text-area__invalid-icon"}}),{c(){he(e.$$.fragment)},m(r,o){pe(e,r,o),t=!0},i(r){t||(z(e.$$.fragment,r),t=!0)},o(r){W(e.$$.fragment,r),t=!1},d(r){ge(e,r)}}}function Ro(n){let e,t;return{c(){e=F("div"),t=se(n[9]),C(e,"bx--form__helper-text",!0),C(e,"bx--form__helper-text--disabled",n[7])},m(r,o){A(r,e,o),M(e,t)},p(r,o){o[0]&512&&xe(t,r[9]),o[0]&128&&C(e,"bx--form__helper-text--disabled",r[7])},d(r){r&&N(e)}}}function Fo(n){let e,t;return{c(){e=F("div"),t=se(n[13]),Y(e,"id",n[16]),C(e,"bx--form-requirement",!0)},m(r,o){A(r,e,o),M(e,t)},p(r,o){o[0]&8192&&xe(t,r[13]),o[0]&65536&&Y(e,"id",r[16])},d(r){r&&N(e)}}}function Ja(n){let e,t,r,o,l,s,u,c,f,p,_,b,h,g,k=(n[10]||n[17].labelText)&&!n[11]&&xo(n),E=n[12]&&No(),L=[{"aria-invalid":s=n[12]||void 0},{"aria-describedby":u=n[12]?n[16]:void 0},{disabled:n[7]},{id:n[14]},{name:n[15]},{cols:n[3]},{rows:n[4]},{placeholder:n[2]},{readOnly:n[8]},{maxlength:c=n[5]??void 0},n[18]],T={};for(let R=0;R<L.length;R+=1)T=be(T,L[R]);let O=!n[12]&&n[9]&&Ro(n),x=n[12]&&Fo(n);return{c(){e=F("div"),k&&k.c(),t=J(),r=F("div"),E&&E.c(),o=J(),l=F("textarea"),p=J(),O&&O.c(),_=J(),x&&x.c(),Je(l,T),C(l,"bx--text-area",!0),C(l,"bx--text-area--light",n[6]),C(l,"bx--text-area--invalid",n[12]),Y(r,"data-invalid",f=n[12]||void 0),C(r,"bx--text-area__wrapper",!0),C(e,"bx--form-item",!0)},m(R,U){A(R,e,U),k&&k.m(e,null),M(e,t),M(e,r),E&&E.m(r,null),M(r,o),M(r,l),l.autofocus&&l.focus(),n[32](l),mn(l,n[0]),M(e,p),O&&O.m(e,null),M(e,_),x&&x.m(e,null),b=!0,h||(g=[Q(l,"input",n[33]),Q(l,"change",n[25]),Q(l,"input",n[26]),Q(l,"keydown",n[27]),Q(l,"keyup",n[28]),Q(l,"focus",n[29]),Q(l,"blur",n[30]),Q(l,"paste",n[31]),Q(e,"click",n[21]),Q(e,"mouseover",n[22]),Q(e,"mouseenter",n[23]),Q(e,"mouseleave",n[24])],h=!0)},p(R,U){(R[10]||R[17].labelText)&&!R[11]?k?(k.p(R,U),U[0]&134144&&z(k,1)):(k=xo(R),k.c(),z(k,1),k.m(e,t)):k&&(nt(),W(k,1,1,()=>{k=null}),rt()),R[12]?E?U[0]&4096&&z(E,1):(E=No(),E.c(),z(E,1),E.m(r,o)):E&&(nt(),W(E,1,1,()=>{E=null}),rt()),Je(l,T=st(L,[(!b||U[0]&4096&&s!==(s=R[12]||void 0))&&{"aria-invalid":s},(!b||U[0]&69632&&u!==(u=R[12]?R[16]:void 0))&&{"aria-describedby":u},(!b||U[0]&128)&&{disabled:R[7]},(!b||U[0]&16384)&&{id:R[14]},(!b||U[0]&32768)&&{name:R[15]},(!b||U[0]&8)&&{cols:R[3]},(!b||U[0]&16)&&{rows:R[4]},(!b||U[0]&4)&&{placeholder:R[2]},(!b||U[0]&256)&&{readOnly:R[8]},(!b||U[0]&32&&c!==(c=R[5]??void 0))&&{maxlength:c},U[0]&262144&&R[18]])),U[0]&1&&mn(l,R[0]),C(l,"bx--text-area",!0),C(l,"bx--text-area--light",R[6]),C(l,"bx--text-area--invalid",R[12]),(!b||U[0]&4096&&f!==(f=R[12]||void 0))&&Y(r,"data-invalid",f),!R[12]&&R[9]?O?O.p(R,U):(O=Ro(R),O.c(),O.m(e,_)):O&&(O.d(1),O=null),R[12]?x?x.p(R,U):(x=Fo(R),x.c(),x.m(e,null)):x&&(x.d(1),x=null)},i(R){b||(z(k),z(E),b=!0)},o(R){W(k),W(E),b=!1},d(R){R&&N(e),k&&k.d(),E&&E.d(),n[32](null),O&&O.d(),x&&x.d(),h=!1,at(g)}}}function Ya(n,e,t){let r;const o=["value","placeholder","cols","rows","maxCount","light","disabled","readonly","helperText","labelText","hideLabel","invalid","invalidText","id","name","ref"];let l=Pe(e,o),{$$slots:s={},$$scope:u}=e;const c=Rr(s);let{value:f=""}=e,{placeholder:p=""}=e,{cols:_=50}=e,{rows:b=4}=e,{maxCount:h=void 0}=e,{light:g=!1}=e,{disabled:k=!1}=e,{readonly:E=!1}=e,{helperText:L=""}=e,{labelText:T=""}=e,{hideLabel:O=!1}=e,{invalid:x=!1}=e,{invalidText:R=""}=e,{id:U="ccs-"+Math.random().toString(36)}=e,{name:ve=void 0}=e,{ref:q=null}=e;function re(I){oe.call(this,n,I)}function de(I){oe.call(this,n,I)}function j(I){oe.call(this,n,I)}function te(I){oe.call(this,n,I)}function fe(I){oe.call(this,n,I)}function ae(I){oe.call(this,n,I)}function G(I){oe.call(this,n,I)}function ne(I){oe.call(this,n,I)}function Ae(I){oe.call(this,n,I)}function Le(I){oe.call(this,n,I)}function ke(I){oe.call(this,n,I)}function Be(I){$e[I?"unshift":"push"](()=>{q=I,t(1,q)})}function Ee(){f=this.value,t(0,f)}return n.$$set=I=>{e=be(be({},e),Xe(I)),t(18,l=Pe(e,o)),"value"in I&&t(0,f=I.value),"placeholder"in I&&t(2,p=I.placeholder),"cols"in I&&t(3,_=I.cols),"rows"in I&&t(4,b=I.rows),"maxCount"in I&&t(5,h=I.maxCount),"light"in I&&t(6,g=I.light),"disabled"in I&&t(7,k=I.disabled),"readonly"in I&&t(8,E=I.readonly),"helperText"in I&&t(9,L=I.helperText),"labelText"in I&&t(10,T=I.labelText),"hideLabel"in I&&t(11,O=I.hideLabel),"invalid"in I&&t(12,x=I.invalid),"invalidText"in I&&t(13,R=I.invalidText),"id"in I&&t(14,U=I.id),"name"in I&&t(15,ve=I.name),"ref"in I&&t(1,q=I.ref),"$$scope"in I&&t(19,u=I.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&t(16,r=`error-${U}`)},[f,q,p,_,b,h,g,k,E,L,T,O,x,R,U,ve,r,c,l,u,s,re,de,j,te,fe,ae,G,ne,Ae,Le,ke,Be,Ee]}class Ha extends Ce{constructor(e){super(),Oe(this,e,Ya,Ja,Ie,{value:0,placeholder:2,cols:3,rows:4,maxCount:5,light:6,disabled:7,readonly:8,helperText:9,labelText:10,hideLabel:11,invalid:12,invalidText:13,id:14,name:15,ref:1},null,[-1,-1])}}const Wa=Ha,Za=n=>({}),Do=n=>({}),Xa=n=>({}),Uo=n=>({});function jo(n){let e,t,r,o=n[9]&&Bo(n),l=!n[20]&&n[6]&&Go(n);return{c(){e=F("div"),o&&o.c(),t=J(),l&&l.c(),C(e,"bx--text-input__label-helper-wrapper",!0)},m(s,u){A(s,e,u),o&&o.m(e,null),M(e,t),l&&l.m(e,null),r=!0},p(s,u){s[9]?o?(o.p(s,u),u[0]&512&&z(o,1)):(o=Bo(s),o.c(),z(o,1),o.m(e,t)):o&&(nt(),W(o,1,1,()=>{o=null}),rt()),!s[20]&&s[6]?l?l.p(s,u):(l=Go(s),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(s){r||(z(o),r=!0)},o(s){W(o),r=!1},d(s){s&&N(e),o&&o.d(),l&&l.d()}}}function Bo(n){let e,t;const r=n[26].labelText,o=dt(r,n,n[25],Uo),l=o||Ka(n);return{c(){e=F("label"),l&&l.c(),Y(e,"for",n[7]),C(e,"bx--label",!0),C(e,"bx--visually-hidden",n[10]),C(e,"bx--label--disabled",n[5]),C(e,"bx--label--inline",n[16]),C(e,"bx--label--inline--sm",n[2]==="sm"),C(e,"bx--label--inline--xl",n[2]==="xl")},m(s,u){A(s,e,u),l&&l.m(e,null),t=!0},p(s,u){o?o.p&&(!t||u[0]&33554432)&&ht(o,r,s,s[25],t?gt(r,s[25],u,Xa):pt(s[25]),Uo):l&&l.p&&(!t||u[0]&512)&&l.p(s,t?u:[-1,-1]),(!t||u[0]&128)&&Y(e,"for",s[7]),(!t||u[0]&1024)&&C(e,"bx--visually-hidden",s[10]),(!t||u[0]&32)&&C(e,"bx--label--disabled",s[5]),(!t||u[0]&65536)&&C(e,"bx--label--inline",s[16]),(!t||u[0]&4)&&C(e,"bx--label--inline--sm",s[2]==="sm"),(!t||u[0]&4)&&C(e,"bx--label--inline--xl",s[2]==="xl")},i(s){t||(z(l,s),t=!0)},o(s){W(l,s),t=!1},d(s){s&&N(e),l&&l.d(s)}}}function Ka(n){let e;return{c(){e=se(n[9])},m(t,r){A(t,e,r)},p(t,r){r[0]&512&&xe(e,t[9])},d(t){t&&N(e)}}}function Go(n){let e,t;return{c(){e=F("div"),t=se(n[6]),C(e,"bx--form__helper-text",!0),C(e,"bx--form__helper-text--disabled",n[5]),C(e,"bx--form__helper-text--inline",n[16])},m(r,o){A(r,e,o),M(e,t)},p(r,o){o[0]&64&&xe(t,r[6]),o[0]&32&&C(e,"bx--form__helper-text--disabled",r[5]),o[0]&65536&&C(e,"bx--form__helper-text--inline",r[16])},d(r){r&&N(e)}}}function zo(n){let e,t;const r=n[26].labelText,o=dt(r,n,n[25],Do),l=o||Qa(n);return{c(){e=F("label"),l&&l.c(),Y(e,"for",n[7]),C(e,"bx--label",!0),C(e,"bx--visually-hidden",n[10]),C(e,"bx--label--disabled",n[5]),C(e,"bx--label--inline",n[16]),C(e,"bx--label--inline-sm",n[16]&&n[2]==="sm"),C(e,"bx--label--inline-xl",n[16]&&n[2]==="xl")},m(s,u){A(s,e,u),l&&l.m(e,null),t=!0},p(s,u){o?o.p&&(!t||u[0]&33554432)&&ht(o,r,s,s[25],t?gt(r,s[25],u,Za):pt(s[25]),Do):l&&l.p&&(!t||u[0]&512)&&l.p(s,t?u:[-1,-1]),(!t||u[0]&128)&&Y(e,"for",s[7]),(!t||u[0]&1024)&&C(e,"bx--visually-hidden",s[10]),(!t||u[0]&32)&&C(e,"bx--label--disabled",s[5]),(!t||u[0]&65536)&&C(e,"bx--label--inline",s[16]),(!t||u[0]&65540)&&C(e,"bx--label--inline-sm",s[16]&&s[2]==="sm"),(!t||u[0]&65540)&&C(e,"bx--label--inline-xl",s[16]&&s[2]==="xl")},i(s){t||(z(l,s),t=!0)},o(s){W(l,s),t=!1},d(s){s&&N(e),l&&l.d(s)}}}function Qa(n){let e;return{c(){e=se(n[9])},m(t,r){A(t,e,r)},p(t,r){r[0]&512&&xe(e,t[9])},d(t){t&&N(e)}}}function Vo(n){let e,t;return e=new Cl({props:{class:"bx--text-input__invalid-icon"}}),{c(){he(e.$$.fragment)},m(r,o){pe(e,r,o),t=!0},i(r){t||(z(e.$$.fragment,r),t=!0)},o(r){W(e.$$.fragment,r),t=!1},d(r){ge(e,r)}}}function qo(n){let e,t;return e=new Sa({props:{class:`bx--text-input__invalid-icon
            bx--text-input__invalid-icon--warning`}}),{c(){he(e.$$.fragment)},m(r,o){pe(e,r,o),t=!0},i(r){t||(z(e.$$.fragment,r),t=!0)},o(r){W(e.$$.fragment,r),t=!1},d(r){ge(e,r)}}}function Jo(n){let e,t;return e=new xa({props:{class:"bx--text-input__readonly-icon"}}),{c(){he(e.$$.fragment)},m(r,o){pe(e,r,o),t=!0},i(r){t||(z(e.$$.fragment,r),t=!0)},o(r){W(e.$$.fragment,r),t=!1},d(r){ge(e,r)}}}function Yo(n){let e;return{c(){e=F("hr"),C(e,"bx--text-input__divider",!0)},m(t,r){A(t,e,r)},d(t){t&&N(e)}}}function Ho(n){let e,t;return{c(){e=F("div"),t=se(n[12]),Y(e,"id",n[19]),C(e,"bx--form-requirement",!0)},m(r,o){A(r,e,o),M(e,t)},p(r,o){o[0]&4096&&xe(t,r[12]),o[0]&524288&&Y(e,"id",r[19])},d(r){r&&N(e)}}}function Wo(n){let e,t;return{c(){e=F("div"),t=se(n[14]),Y(e,"id",n[18]),C(e,"bx--form-requirement",!0)},m(r,o){A(r,e,o),M(e,t)},p(r,o){o[0]&16384&&xe(t,r[14]),o[0]&262144&&Y(e,"id",r[18])},d(r){r&&N(e)}}}function Zo(n){let e,t;return{c(){e=F("div"),t=se(n[6]),C(e,"bx--form__helper-text",!0),C(e,"bx--form__helper-text--disabled",n[5]),C(e,"bx--form__helper-text--inline",n[16])},m(r,o){A(r,e,o),M(e,t)},p(r,o){o[0]&64&&xe(t,r[6]),o[0]&32&&C(e,"bx--form__helper-text--disabled",r[5]),o[0]&65536&&C(e,"bx--form__helper-text--inline",r[16])},d(r){r&&N(e)}}}function Xo(n){let e,t;return{c(){e=F("div"),t=se(n[12]),Y(e,"id",n[19]),C(e,"bx--form-requirement",!0)},m(r,o){A(r,e,o),M(e,t)},p(r,o){o[0]&4096&&xe(t,r[12]),o[0]&524288&&Y(e,"id",r[19])},d(r){r&&N(e)}}}function Ko(n){let e,t;return{c(){e=F("div"),t=se(n[14]),Y(e,"id",n[18]),C(e,"bx--form-requirement",!0)},m(r,o){A(r,e,o),M(e,t)},p(r,o){o[0]&16384&&xe(t,r[14]),o[0]&262144&&Y(e,"id",r[18])},d(r){r&&N(e)}}}function $a(n){let e,t,r,o,l,s,u,c,f,p,_,b,h,g,k,E,L,T,O,x,R,U,ve,q,re=n[16]&&jo(n),de=!n[16]&&(n[9]||n[24].labelText)&&zo(n),j=n[11]&&Vo(),te=!n[11]&&n[13]&&qo(),fe=n[17]&&Jo(),ae=[{"data-invalid":p=n[11]||void 0},{"aria-invalid":_=n[11]||void 0},{"data-warn":b=n[13]||void 0},{"aria-describedby":h=n[11]?n[19]:n[13]?n[18]:void 0},{disabled:n[5]},{id:n[7]},{name:n[8]},{placeholder:n[3]},{required:n[15]},{readOnly:n[17]},n[23]],G={};for(let I=0;I<ae.length;I+=1)G=be(G,ae[I]);let ne=n[20]&&Yo(),Ae=n[20]&&!n[16]&&n[11]&&Ho(n),Le=n[20]&&!n[16]&&n[13]&&Wo(n),ke=!n[11]&&!n[13]&&!n[20]&&!n[16]&&n[6]&&Zo(n),Be=!n[20]&&n[11]&&Xo(n),Ee=!n[20]&&!n[11]&&n[13]&&Ko(n);return{c(){e=F("div"),re&&re.c(),t=J(),de&&de.c(),r=J(),o=F("div"),l=F("div"),j&&j.c(),s=J(),te&&te.c(),u=J(),fe&&fe.c(),c=J(),f=F("input"),g=J(),ne&&ne.c(),k=J(),Ae&&Ae.c(),E=J(),Le&&Le.c(),O=J(),ke&&ke.c(),x=J(),Be&&Be.c(),R=J(),Ee&&Ee.c(),Je(f,G),C(f,"bx--text-input",!0),C(f,"bx--text-input--light",n[4]),C(f,"bx--text-input--invalid",n[11]),C(f,"bx--text-input--warn",n[13]),C(f,"bx--text-input--sm",n[2]==="sm"),C(f,"bx--text-input--xl",n[2]==="xl"),Y(l,"data-invalid",L=n[11]||void 0),Y(l,"data-warn",T=n[13]||void 0),C(l,"bx--text-input__field-wrapper",!0),C(l,"bx--text-input__field-wrapper--warning",!n[11]&&n[13]),C(o,"bx--text-input__field-outer-wrapper",!0),C(o,"bx--text-input__field-outer-wrapper--inline",n[16]),C(e,"bx--form-item",!0),C(e,"bx--text-input-wrapper",!0),C(e,"bx--text-input-wrapper--inline",n[16]),C(e,"bx--text-input-wrapper--light",n[4]),C(e,"bx--text-input-wrapper--readonly",n[17])},m(I,ue){A(I,e,ue),re&&re.m(e,null),M(e,t),de&&de.m(e,null),M(e,r),M(e,o),M(o,l),j&&j.m(l,null),M(l,s),te&&te.m(l,null),M(l,u),fe&&fe.m(l,null),M(l,c),M(l,f),f.autofocus&&f.focus(),n[36](f),mn(f,n[0]),M(l,g),ne&&ne.m(l,null),M(l,k),Ae&&Ae.m(l,null),M(l,E),Le&&Le.m(l,null),M(o,O),ke&&ke.m(o,null),M(o,x),Be&&Be.m(o,null),M(o,R),Ee&&Ee.m(o,null),U=!0,ve||(q=[Q(f,"input",n[37]),Q(f,"change",n[22]),Q(f,"input",n[21]),Q(f,"keydown",n[31]),Q(f,"keyup",n[32]),Q(f,"focus",n[33]),Q(f,"blur",n[34]),Q(f,"paste",n[35]),Q(e,"click",n[27]),Q(e,"mouseover",n[28]),Q(e,"mouseenter",n[29]),Q(e,"mouseleave",n[30])],ve=!0)},p(I,ue){I[16]?re?(re.p(I,ue),ue[0]&65536&&z(re,1)):(re=jo(I),re.c(),z(re,1),re.m(e,t)):re&&(nt(),W(re,1,1,()=>{re=null}),rt()),!I[16]&&(I[9]||I[24].labelText)?de?(de.p(I,ue),ue[0]&16843264&&z(de,1)):(de=zo(I),de.c(),z(de,1),de.m(e,r)):de&&(nt(),W(de,1,1,()=>{de=null}),rt()),I[11]?j?ue[0]&2048&&z(j,1):(j=Vo(),j.c(),z(j,1),j.m(l,s)):j&&(nt(),W(j,1,1,()=>{j=null}),rt()),!I[11]&&I[13]?te?ue[0]&10240&&z(te,1):(te=qo(),te.c(),z(te,1),te.m(l,u)):te&&(nt(),W(te,1,1,()=>{te=null}),rt()),I[17]?fe?ue[0]&131072&&z(fe,1):(fe=Jo(),fe.c(),z(fe,1),fe.m(l,c)):fe&&(nt(),W(fe,1,1,()=>{fe=null}),rt()),Je(f,G=st(ae,[(!U||ue[0]&2048&&p!==(p=I[11]||void 0))&&{"data-invalid":p},(!U||ue[0]&2048&&_!==(_=I[11]||void 0))&&{"aria-invalid":_},(!U||ue[0]&8192&&b!==(b=I[13]||void 0))&&{"data-warn":b},(!U||ue[0]&796672&&h!==(h=I[11]?I[19]:I[13]?I[18]:void 0))&&{"aria-describedby":h},(!U||ue[0]&32)&&{disabled:I[5]},(!U||ue[0]&128)&&{id:I[7]},(!U||ue[0]&256)&&{name:I[8]},(!U||ue[0]&8)&&{placeholder:I[3]},(!U||ue[0]&32768)&&{required:I[15]},(!U||ue[0]&131072)&&{readOnly:I[17]},ue[0]&8388608&&I[23]])),ue[0]&1&&f.value!==I[0]&&mn(f,I[0]),C(f,"bx--text-input",!0),C(f,"bx--text-input--light",I[4]),C(f,"bx--text-input--invalid",I[11]),C(f,"bx--text-input--warn",I[13]),C(f,"bx--text-input--sm",I[2]==="sm"),C(f,"bx--text-input--xl",I[2]==="xl"),I[20]?ne||(ne=Yo(),ne.c(),ne.m(l,k)):ne&&(ne.d(1),ne=null),I[20]&&!I[16]&&I[11]?Ae?Ae.p(I,ue):(Ae=Ho(I),Ae.c(),Ae.m(l,E)):Ae&&(Ae.d(1),Ae=null),I[20]&&!I[16]&&I[13]?Le?Le.p(I,ue):(Le=Wo(I),Le.c(),Le.m(l,null)):Le&&(Le.d(1),Le=null),(!U||ue[0]&2048&&L!==(L=I[11]||void 0))&&Y(l,"data-invalid",L),(!U||ue[0]&8192&&T!==(T=I[13]||void 0))&&Y(l,"data-warn",T),(!U||ue[0]&10240)&&C(l,"bx--text-input__field-wrapper--warning",!I[11]&&I[13]),!I[11]&&!I[13]&&!I[20]&&!I[16]&&I[6]?ke?ke.p(I,ue):(ke=Zo(I),ke.c(),ke.m(o,x)):ke&&(ke.d(1),ke=null),!I[20]&&I[11]?Be?Be.p(I,ue):(Be=Xo(I),Be.c(),Be.m(o,R)):Be&&(Be.d(1),Be=null),!I[20]&&!I[11]&&I[13]?Ee?Ee.p(I,ue):(Ee=Ko(I),Ee.c(),Ee.m(o,null)):Ee&&(Ee.d(1),Ee=null),(!U||ue[0]&65536)&&C(o,"bx--text-input__field-outer-wrapper--inline",I[16]),(!U||ue[0]&65536)&&C(e,"bx--text-input-wrapper--inline",I[16]),(!U||ue[0]&16)&&C(e,"bx--text-input-wrapper--light",I[4]),(!U||ue[0]&131072)&&C(e,"bx--text-input-wrapper--readonly",I[17])},i(I){U||(z(re),z(de),z(j),z(te),z(fe),U=!0)},o(I){W(re),W(de),W(j),W(te),W(fe),U=!1},d(I){I&&N(e),re&&re.d(),de&&de.d(),j&&j.d(),te&&te.d(),fe&&fe.d(),n[36](null),ne&&ne.d(),Ae&&Ae.d(),Le&&Le.d(),ke&&ke.d(),Be&&Be.d(),Ee&&Ee.d(),ve=!1,at(q)}}}function eu(n,e,t){let r,o,l;const s=["size","value","placeholder","light","disabled","helperText","id","name","labelText","hideLabel","invalid","invalidText","warn","warnText","ref","required","inline","readonly"];let u=Pe(e,s),{$$slots:c={},$$scope:f}=e;const p=Rr(c);let{size:_=void 0}=e,{value:b=""}=e,{placeholder:h=""}=e,{light:g=!1}=e,{disabled:k=!1}=e,{helperText:E=""}=e,{id:L="ccs-"+Math.random().toString(36)}=e,{name:T=void 0}=e,{labelText:O=""}=e,{hideLabel:x=!1}=e,{invalid:R=!1}=e,{invalidText:U=""}=e,{warn:ve=!1}=e,{warnText:q=""}=e,{ref:re=null}=e,{required:de=!1}=e,{inline:j=!1}=e,{readonly:te=!1}=e;const fe=Nr("Form"),ae=Sl();function G($){return u.type!=="number"?$:$!=""?Number($):null}const ne=$=>{t(0,b=G($.target.value)),ae("input",b)},Ae=$=>{ae("change",G($.target.value))};function Le($){oe.call(this,n,$)}function ke($){oe.call(this,n,$)}function Be($){oe.call(this,n,$)}function Ee($){oe.call(this,n,$)}function I($){oe.call(this,n,$)}function ue($){oe.call(this,n,$)}function ut($){oe.call(this,n,$)}function Fr($){oe.call(this,n,$)}function ln($){oe.call(this,n,$)}function Ke($){$e[$?"unshift":"push"](()=>{re=$,t(1,re)})}function me(){b=this.value,t(0,b)}return n.$$set=$=>{e=be(be({},e),Xe($)),t(23,u=Pe(e,s)),"size"in $&&t(2,_=$.size),"value"in $&&t(0,b=$.value),"placeholder"in $&&t(3,h=$.placeholder),"light"in $&&t(4,g=$.light),"disabled"in $&&t(5,k=$.disabled),"helperText"in $&&t(6,E=$.helperText),"id"in $&&t(7,L=$.id),"name"in $&&t(8,T=$.name),"labelText"in $&&t(9,O=$.labelText),"hideLabel"in $&&t(10,x=$.hideLabel),"invalid"in $&&t(11,R=$.invalid),"invalidText"in $&&t(12,U=$.invalidText),"warn"in $&&t(13,ve=$.warn),"warnText"in $&&t(14,q=$.warnText),"ref"in $&&t(1,re=$.ref),"required"in $&&t(15,de=$.required),"inline"in $&&t(16,j=$.inline),"readonly"in $&&t(17,te=$.readonly),"$$scope"in $&&t(25,f=$.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&128&&t(19,o=`error-${L}`),n.$$.dirty[0]&128&&t(18,l=`warn-${L}`)},t(20,r=!!fe&&fe.isFluid),[b,re,_,h,g,k,E,L,T,O,x,R,U,ve,q,de,j,te,l,o,r,ne,Ae,u,p,f,c,Le,ke,Be,Ee,I,ue,ut,Fr,ln,Ke,me]}class tu extends Ce{constructor(e){super(),Oe(this,e,eu,$a,Ie,{size:2,value:0,placeholder:3,light:4,disabled:5,helperText:6,id:7,name:8,labelText:9,hideLabel:10,invalid:11,invalidText:12,warn:13,warnText:14,ref:1,required:15,inline:16,readonly:17},null,[-1,-1])}}const nu=tu;function ru(n){let e;return{c(){e=se(`Click one of the draw icons to the top right of the map (the icons allow
      you to draw points, lines, polygons or routes)`)},m(t,r){A(t,e,r)},d(t){t&&N(e)}}}function iu(n){let e;return{c(){e=se(`Draw the intervention on the map, clicking the original point or 'Finish
      snapping' for the Polygon and Route tools respectively`)},m(t,r){A(t,e,r)},d(t){t&&N(e)}}}function ou(n){let e;return{c(){e=se("Fill in the details that appear (Intervention type, name, description)")},m(t,r){A(t,e,r)},d(t){t&&N(e)}}}function lu(n){let e;return{c(){e=se(`Click the "Save" button or "Delete" button to save or remove the
      intervention`)},m(t,r){A(t,e,r)},d(t){t&&N(e)}}}function su(n){let e,t,r,o,l,s,u,c;return e=new mr({props:{$$slots:{default:[ru]},$$scope:{ctx:n}}}),r=new mr({props:{$$slots:{default:[iu]},$$scope:{ctx:n}}}),l=new mr({props:{$$slots:{default:[ou]},$$scope:{ctx:n}}}),u=new mr({props:{$$slots:{default:[lu]},$$scope:{ctx:n}}}),{c(){he(e.$$.fragment),t=J(),he(r.$$.fragment),o=J(),he(l.$$.fragment),s=J(),he(u.$$.fragment)},m(f,p){pe(e,f,p),A(f,t,p),pe(r,f,p),A(f,o,p),pe(l,f,p),A(f,s,p),pe(u,f,p),c=!0},p(f,p){const _={};p&4&&(_.$$scope={dirty:p,ctx:f}),e.$set(_);const b={};p&4&&(b.$$scope={dirty:p,ctx:f}),r.$set(b);const h={};p&4&&(h.$$scope={dirty:p,ctx:f}),l.$set(h);const g={};p&4&&(g.$$scope={dirty:p,ctx:f}),u.$set(g)},i(f){c||(z(e.$$.fragment,f),z(r.$$.fragment,f),z(l.$$.fragment,f),z(u.$$.fragment,f),c=!0)},o(f){W(e.$$.fragment,f),W(r.$$.fragment,f),W(l.$$.fragment,f),W(u.$$.fragment,f),c=!1},d(f){ge(e,f),f&&N(t),ge(r,f),f&&N(o),ge(l,f),f&&N(s),ge(u,f)}}}function au(n){let e,t,r,o,l,s,u,c,f,p,_,b,h,g,k,E,L,T,O,x,R,U,ve,q,re,de;return l=new Fa({props:{$$slots:{default:[su]},$$scope:{ctx:n}}}),{c(){e=F("p"),e.textContent="For each intervention:",t=J(),r=F("br"),o=J(),he(l.$$.fragment),s=J(),u=F("br"),c=J(),f=F("p"),f.textContent=`Repeat the steps above for each substantial infrastructure intervention in
    the scheme.`,p=J(),_=F("br"),b=J(),h=F("p"),h.textContent=`To make further edits to attribute data, or to delete an intervention, click
    on its name in the left hand panel or its geometry in the map.`,g=J(),k=F("br"),E=J(),L=F("p"),L.textContent=`Click the "Export to GeoJSON" button to download the dataset representing
    the scheme, which can be made up of one or more intervention, as a GeoJSON
    file. After saving the file, you can delete the interventions, change the
    scheme name, and start a new set of interventions representing a new scheme.`,T=J(),O=F("br"),x=J(),R=F("p"),R.textContent=`To load a GeoJSON file that you have already saved from the tool, click the
    "Load from GeoJSON" button and select the file.`,U=J(),ve=F("br"),q=J(),re=F("p"),re.innerHTML=`Note: the <strong>Route tool</strong> works by calculating routes between
    start and end points using the existing transport network according to
    OpenStreetMap. Use it by clicking on the location where you would like the
    route to start and then clicking on the location where you would like the
    route to end on the map. The route will be calculated and drawn on the map.
    After you click &quot;Finish snapping&quot; you can edit the route by dragging
    individual points. This can be useful for representing links that are not
    part of the existing transport network, such as a new bridge or path.
    However,
    <strong>you cannot add or remove points</strong> with the Route tool. If the
    planned route intervention you would like to sketch as part of a scheme contains
    one or more new links (for example containing new bridges or paths between cul-de-sacs),
    you may want to use the Line tool instead.`},m(j,te){A(j,e,te),A(j,t,te),A(j,r,te),A(j,o,te),pe(l,j,te),A(j,s,te),A(j,u,te),A(j,c,te),A(j,f,te),A(j,p,te),A(j,_,te),A(j,b,te),A(j,h,te),A(j,g,te),A(j,k,te),A(j,E,te),A(j,L,te),A(j,T,te),A(j,O,te),A(j,x,te),A(j,R,te),A(j,U,te),A(j,ve,te),A(j,q,te),A(j,re,te),de=!0},p(j,te){const fe={};te&4&&(fe.$$scope={dirty:te,ctx:j}),l.$set(fe)},i(j){de||(z(l.$$.fragment,j),de=!0)},o(j){W(l.$$.fragment,j),de=!1},d(j){j&&N(e),j&&N(t),j&&N(r),j&&N(o),ge(l,j),j&&N(s),j&&N(u),j&&N(c),j&&N(f),j&&N(p),j&&N(_),j&&N(b),j&&N(h),j&&N(g),j&&N(k),j&&N(E),j&&N(L),j&&N(T),j&&N(O),j&&N(x),j&&N(R),j&&N(U),j&&N(ve),j&&N(q),j&&N(re)}}}function uu(n){let e,t,r;function o(s){n[1](s)}let l={passiveModal:!0,modalHeading:"Instructions",$$slots:{default:[au]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.open=n[0]),e=new Bs({props:l}),$e.push(()=>Ot(e,"open",o,n[0])),{c(){he(e.$$.fragment)},m(s,u){pe(e,s,u),r=!0},p(s,[u]){const c={};u&4&&(c.$$scope={dirty:u,ctx:s}),!t&&u&1&&(t=!0,c.open=s[0],It(()=>t=!1)),e.$set(c)},i(s){r||(z(e.$$.fragment,s),r=!0)},o(s){W(e.$$.fragment,s),r=!1},d(s){ge(e,s)}}}function fu(n,e,t){let{open:r}=e;function o(l){r=l,t(0,r)}return n.$$set=l=>{"open"in l&&t(0,r=l.open)},[r,o]}class cu extends Ce{constructor(e){super(),Oe(this,e,fu,uu,Ie,{open:0})}}const bn=Wt(null),Me=Wt(Fn()),Rn=Wt(null),ii=Wt(null),Tr=Wt(null);function Fn(){return{type:"FeatureCollection",features:[]}}const du=kl(Me,n=>{let e=n.features.find(t=>t.properties.editing);return e?e.id:null});function hu(n){Me.update(e=>{for(let t of e.features)t.id==n?t.properties.editing=!0:delete t.properties.editing;return e})}function Ol(){Me.update(n=>(n.features.forEach(e=>{delete e.properties.editing}),n))}function Qo(n){let e;const t=n[4].default,r=dt(t,n,n[3],null);return{c(){r&&r.c()},m(o,l){r&&r.m(o,l),e=!0},p(o,l){r&&r.p&&(!e||l&8)&&ht(r,t,o,o[3],e?gt(t,o[3],l,null):pt(o[3]),null)},i(o){e||(z(r,o),e=!0)},o(o){W(r,o),e=!1},d(o){r&&r.d(o)}}}function pu(n){let e,t,r=n[1]&&Qo(n);return{c(){e=F("div"),r&&r.c(),Y(e,"class","map svelte-12dpf1u")},m(o,l){A(o,e,l),r&&r.m(e,null),n[5](e),t=!0},p(o,[l]){o[1]?r?(r.p(o,l),l&2&&z(r,1)):(r=Qo(o),r.c(),z(r,1),r.m(e,null)):r&&(nt(),W(r,1,1,()=>{r=null}),rt())},i(o){t||(z(r),t=!0)},o(o){W(r),t=!1},d(o){o&&N(e),r&&r.d(),n[5](null)}}}function gu(n,e,t){let{$$slots:r={},$$scope:o}=e,{style:l}=e,s,u,c=!1;bi("setCamera",!window.location.hash),Gn(()=>{s=new ei.Map({container:u,style:`https://api.maptiler.com/maps/${l}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),s.addControl(new ei.ScaleControl),s.addControl(new ei.NavigationControl({visualizePitch:!0}),"bottom-right"),s.on("load",()=>{t(1,c=!0),bn.set(s)}),new ResizeObserver(()=>{s.resize()}).observe(u)}),Tl(()=>{s.remove()});function f(p){$e[p?"unshift":"push"](()=>{u=p,t(0,u)})}return n.$$set=p=>{"style"in p&&t(2,l=p.style),"$$scope"in p&&t(3,o=p.$$scope)},[u,c,l,o,r,f]}class mu extends Ce{constructor(e){super(),Oe(this,e,gu,pu,Ie,{style:2})}}const bu=n=>({}),$o=n=>({}),vu=n=>({}),el=n=>({}),_u=n=>({}),tl=n=>({});function yu(n){let e,t,r,o,l,s,u,c,f,p,_,b;const h=n[3].nav,g=dt(h,n,n[2],tl),k=n[3].sidebar,E=dt(k,n,n[2],el),L=n[3].main,T=dt(L,n,n[2],$o);return{c(){e=F("aside"),t=F("div"),r=F("nav"),g&&g.c(),o=J(),E&&E.c(),l=J(),s=F("div"),s.textContent="",c=J(),f=F("main"),T&&T.c(),Y(r,"class","svelte-19nerxn"),Y(t,"class","sidebar-content content-container svelte-19nerxn"),Y(s,"class","sidebar-toggle rounded-rect svelte-19nerxn"),Y(e,"class",u=ho(n[0]?"":"collapsed")+" svelte-19nerxn"),Y(f,"class","svelte-19nerxn")},m(O,x){A(O,e,x),M(e,t),M(t,r),g&&g.m(r,null),M(t,o),E&&E.m(t,null),M(e,l),M(e,s),A(O,c,x),A(O,f,x),T&&T.m(f,null),p=!0,_||(b=Q(s,"click",n[1]),_=!0)},p(O,[x]){g&&g.p&&(!p||x&4)&&ht(g,h,O,O[2],p?gt(h,O[2],x,_u):pt(O[2]),tl),E&&E.p&&(!p||x&4)&&ht(E,k,O,O[2],p?gt(k,O[2],x,vu):pt(O[2]),el),(!p||x&1&&u!==(u=ho(O[0]?"":"collapsed")+" svelte-19nerxn"))&&Y(e,"class",u),T&&T.p&&(!p||x&4)&&ht(T,L,O,O[2],p?gt(L,O[2],x,bu):pt(O[2]),$o)},i(O){p||(z(g,O),z(E,O),z(T,O),p=!0)},o(O){W(g,O),W(E,O),W(T,O),p=!1},d(O){O&&N(e),g&&g.d(O),E&&E.d(O),O&&N(c),O&&N(f),T&&T.d(O),_=!1,b()}}}function Eu(n,e,t){let{$$slots:r={},$$scope:o}=e,l=!0;function s(){t(0,l=!l)}return n.$$set=u=>{"$$scope"in u&&t(2,o=u.$$scope)},[l,s,o,r]}class wu extends Ce{constructor(e){super(),Oe(this,e,Eu,yu,Ie,{})}}var ft=63710088e-1,Su={centimeters:ft*100,centimetres:ft*100,degrees:ft/111325,feet:ft*3.28084,inches:ft*39.37,kilometers:ft/1e3,kilometres:ft/1e3,meters:ft,metres:ft,miles:ft/1609.344,millimeters:ft*1e3,millimetres:ft*1e3,nauticalmiles:ft/1852,radians:1,yards:ft*1.0936};function Dn(n,e,t){t===void 0&&(t={});var r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=e||{},r.geometry=n,r}function ku(n,e,t){t===void 0&&(t={});for(var r=0,o=n;r<o.length;r++){var l=o[r];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<l[l.length-1].length;s++)if(l[l.length-1][s]!==l[0][s])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:n};return Dn(u,e,t)}function Tu(n,e,t){if(t===void 0&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:n};return Dn(r,e,t)}function Cu(n,e,t){t===void 0&&(t={});var r={type:"MultiPolygon",coordinates:n};return Dn(r,e,t)}function Ou(n,e){e===void 0&&(e="kilometers");var t=Su[e];if(!t)throw new Error(e+" units is invalid");return n*t}function vr(n){var e=n%360;return e*Math.PI/180}/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Iu(n,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(p){return c([f,p])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(l=f[0]&2?o.return:f[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,f[1])).done)return l;switch(o=0,l&&(f=[f[0]&2,l.value]),f[0]){case 0:case 1:l=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,o=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!l||f[1]>l[0]&&f[1]<l[3])){t.label=f[1];break}if(f[0]===6&&t.label<l[1]){t.label=l[1],l=f;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(f);break}l[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(p){f=[6,p],o=0}finally{r=l=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Ht=function(){function n(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return n}();function Lu(n,e){return n>e?1:n<e?-1:0}function Vt(n,e,t){for(var r=new Ht(null,null),o=r,l=r;;){var s=t(n,e.key);if(s<0){if(e.left===null)break;if(t(n,e.left.key)<0){var u=e.left;if(e.left=u.right,u.right=e,e=u,e.left===null)break}l.left=e,l=e,e=e.left}else if(s>0){if(e.right===null)break;if(t(n,e.right.key)>0){var u=e.right;if(e.right=u.left,u.left=e,e=u,e.right===null)break}o.right=e,o=e,e=e.right}else break}return o.right=e.left,l.left=e.right,e.left=r.right,e.right=r.left,e}function ti(n,e,t,r){var o=new Ht(n,e);if(t===null)return o.left=o.right=null,o;t=Vt(n,t,r);var l=r(n,t.key);return l<0?(o.left=t.left,o.right=t,t.left=null):l>=0&&(o.right=t.right,o.left=t,t.right=null),o}function nl(n,e,t){var r=null,o=null;if(e){e=Vt(n,e,t);var l=t(e.key,n);l===0?(r=e.left,o=e.right):l<0?(o=e.right,e.right=null,r=e):(r=e.left,e.left=null,o=e)}return{left:r,right:o}}function Mu(n,e,t){return e===null?n:(n===null||(e=Vt(n.key,e,t),e.left=n),e)}function oi(n,e,t,r,o){if(n){r(""+e+(t?" ":" ")+o(n)+`
`);var l=e+(t?"    ":"   ");n.left&&oi(n.left,l,!1,r,o),n.right&&oi(n.right,l,!0,r,o)}}var yi=function(){function n(e){e===void 0&&(e=Lu),this._root=null,this._size=0,this._comparator=e}return n.prototype.insert=function(e,t){return this._size++,this._root=ti(e,t,this._root,this._comparator)},n.prototype.add=function(e,t){var r=new Ht(e,t);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var o=this._comparator,l=Vt(e,this._root,o),s=o(e,l.key);return s===0?this._root=l:(s<0?(r.left=l.left,r.right=l,l.left=null):s>0&&(r.right=l.right,r.left=l,l.right=null),this._size++,this._root=r),this._root},n.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},n.prototype._remove=function(e,t,r){var o;if(t===null)return null;t=Vt(e,t,r);var l=r(e,t.key);return l===0?(t.left===null?o=t.right:(o=Vt(e,t.left,r),o.right=t.right),this._size--,o):t},n.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=Vt(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},n.prototype.findStatic=function(e){for(var t=this._root,r=this._comparator;t;){var o=r(e,t.key);if(o===0)return t;o<0?t=t.left:t=t.right}return null},n.prototype.find=function(e){return this._root&&(this._root=Vt(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},n.prototype.contains=function(e){for(var t=this._root,r=this._comparator;t;){var o=r(e,t.key);if(o===0)return!0;o<0?t=t.left:t=t.right}return!1},n.prototype.forEach=function(e,t){for(var r=this._root,o=[],l=!1;!l;)r!==null?(o.push(r),r=r.left):o.length!==0?(r=o.pop(),e.call(t,r),r=r.right):l=!0;return this},n.prototype.range=function(e,t,r,o){for(var l=[],s=this._comparator,u=this._root,c;l.length!==0||u;)if(u)l.push(u),u=u.left;else{if(u=l.pop(),c=s(u.key,t),c>0)break;if(s(u.key,e)>=0&&r.call(o,u))return this;u=u.right}return this},n.prototype.keys=function(){var e=[];return this.forEach(function(t){var r=t.key;return e.push(r)}),e},n.prototype.values=function(){var e=[];return this.forEach(function(t){var r=t.data;return e.push(r)}),e},n.prototype.min=function(){return this._root?this.minNode(this._root).key:null},n.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},n.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},n.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},n.prototype.at=function(e){for(var t=this._root,r=!1,o=0,l=[];!r;)if(t)l.push(t),t=t.left;else if(l.length>0){if(t=l.pop(),o===e)return t;o++,t=t.right}else r=!0;return null},n.prototype.next=function(e){var t=this._root,r=null;if(e.right){for(r=e.right;r.left;)r=r.left;return r}for(var o=this._comparator;t;){var l=o(e.key,t.key);if(l===0)break;l<0?(r=t,t=t.left):t=t.right}return r},n.prototype.prev=function(e){var t=this._root,r=null;if(e.left!==null){for(r=e.left;r.right;)r=r.right;return r}for(var o=this._comparator;t;){var l=o(e.key,t.key);if(l===0)break;l<0?t=t.left:(r=t,t=t.right)}return r},n.prototype.clear=function(){return this._root=null,this._size=0,this},n.prototype.toList=function(){return xu(this._root)},n.prototype.load=function(e,t,r){t===void 0&&(t=[]),r===void 0&&(r=!1);var o=e.length,l=this._comparator;if(r&&ai(e,t,0,o-1,l),this._root===null)this._root=li(e,t,0,o),this._size=o;else{var s=Au(this.toList(),Pu(e,t),l);o=this._size+o,this._root=si({head:s},0,o)}return this},n.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){e===void 0&&(e=function(r){return String(r.key)});var t=[];return oi(this._root,"",!0,function(r){return t.push(r)},e),t.join("")},n.prototype.update=function(e,t,r){var o=this._comparator,l=nl(e,this._root,o),s=l.left,u=l.right;o(e,t)<0?u=ti(t,r,u,o):s=ti(t,r,s,o),this._root=Mu(s,u,o)},n.prototype.split=function(e){return nl(e,this._root,this._comparator)},n.prototype[Symbol.iterator]=function(){var e;return Iu(this,function(t){switch(t.label){case 0:e=this.minNode(),t.label=1;case 1:return e?[4,e]:[3,3];case 2:return t.sent(),e=this.next(e),[3,1];case 3:return[2]}})},n}();function li(n,e,t,r){var o=r-t;if(o>0){var l=t+Math.floor(o/2),s=n[l],u=e[l],c=new Ht(s,u);return c.left=li(n,e,t,l),c.right=li(n,e,l+1,r),c}return null}function Pu(n,e){for(var t=new Ht(null,null),r=t,o=0;o<n.length;o++)r=r.next=new Ht(n[o],e[o]);return r.next=null,t.next}function xu(n){for(var e=n,t=[],r=!1,o=new Ht(null,null),l=o;!r;)e?(t.push(e),e=e.left):t.length>0?(e=l=l.next=t.pop(),e=e.right):r=!0;return l.next=null,o.next}function si(n,e,t){var r=t-e;if(r>0){var o=e+Math.floor(r/2),l=si(n,e,o),s=n.head;return s.left=l,n.head=n.head.next,s.right=si(n,o+1,t),s}return null}function Au(n,e,t){for(var r=new Ht(null,null),o=r,l=n,s=e;l!==null&&s!==null;)t(l.key,s.key)<0?(o.next=l,l=l.next):(o.next=s,s=s.next),o=o.next;return l!==null?o.next=l:s!==null&&(o.next=s),r.next}function ai(n,e,t,r,o){if(!(t>=r)){for(var l=n[t+r>>1],s=t-1,u=r+1;;){do s++;while(o(n[s],l)<0);do u--;while(o(n[u],l)>0);if(s>=u)break;var c=n[s];n[s]=n[u],n[u]=c,c=e[s],e[s]=e[u],e[u]=c}ai(n,e,t,u,o),ai(n,e,u+1,r,o)}}function _t(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function rl(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function lt(n,e,t){return e&&rl(n.prototype,e),t&&rl(n,t),n}var Ln=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},ui=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var r=e.ll.x<t.ll.x?t.ll.x:e.ll.x,o=e.ur.x<t.ur.x?e.ur.x:t.ur.x,l=e.ll.y<t.ll.y?t.ll.y:e.ll.y,s=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:r,y:l},ur:{x:o,y:s}}},qt=Number.EPSILON;qt===void 0&&(qt=Math.pow(2,-52));var Nu=qt*qt,fi=function(e,t){if(-qt<e&&e<qt&&-qt<t&&t<qt)return 0;var r=e-t;return r*r<Nu*e*t?0:e<t?-1:1},Ru=function(){function n(){_t(this,n),this.reset()}return lt(n,[{key:"reset",value:function(){this.xRounder=new il,this.yRounder=new il}},{key:"round",value:function(t,r){return{x:this.xRounder.round(t),y:this.yRounder.round(r)}}}]),n}(),il=function(){function n(){_t(this,n),this.tree=new yi,this.round(0)}return lt(n,[{key:"round",value:function(t){var r=this.tree.add(t),o=this.tree.prev(r);if(o!==null&&fi(r.key,o.key)===0)return this.tree.remove(t),o.key;var l=this.tree.next(r);return l!==null&&fi(r.key,l.key)===0?(this.tree.remove(t),l.key):t}}]),n}(),Un=new Ru,Pn=function(e,t){return e.x*t.y-e.y*t.x},Il=function(e,t){return e.x*t.x+e.y*t.y},ol=function(e,t,r){var o={x:t.x-e.x,y:t.y-e.y},l={x:r.x-e.x,y:r.y-e.y},s=Pn(o,l);return fi(s,0)},Cr=function(e){return Math.sqrt(Il(e,e))},Fu=function(e,t,r){var o={x:t.x-e.x,y:t.y-e.y},l={x:r.x-e.x,y:r.y-e.y};return Pn(l,o)/Cr(l)/Cr(o)},Du=function(e,t,r){var o={x:t.x-e.x,y:t.y-e.y},l={x:r.x-e.x,y:r.y-e.y};return Il(l,o)/Cr(l)/Cr(o)},ll=function(e,t,r){return t.y===0?null:{x:e.x+t.x/t.y*(r-e.y),y:r}},sl=function(e,t,r){return t.x===0?null:{x:r,y:e.y+t.y/t.x*(r-e.x)}},Uu=function(e,t,r,o){if(t.x===0)return sl(r,o,e.x);if(o.x===0)return sl(e,t,r.x);if(t.y===0)return ll(r,o,e.y);if(o.y===0)return ll(e,t,r.y);var l=Pn(t,o);if(l==0)return null;var s={x:r.x-e.x,y:r.y-e.y},u=Pn(s,t)/l,c=Pn(s,o)/l,f=e.x+c*t.x,p=r.x+u*o.x,_=e.y+c*t.y,b=r.y+u*o.y,h=(f+p)/2,g=(_+b)/2;return{x:h,y:g}},Ct=function(){lt(n,null,[{key:"compare",value:function(t,r){var o=n.comparePoints(t.point,r.point);return o!==0?o:(t.point!==r.point&&t.link(r),t.isLeft!==r.isLeft?t.isLeft?1:-1:Or.compare(t.segment,r.segment))}},{key:"comparePoints",value:function(t,r){return t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0}}]);function n(e,t){_t(this,n),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}return lt(n,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var r=t.point.events,o=0,l=r.length;o<l;o++){var s=r[o];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,r=0;r<t;r++){var o=this.point.events[r];if(o.segment.consumedBy===void 0)for(var l=r+1;l<t;l++){var s=this.point.events[l];s.consumedBy===void 0&&o.otherSE.point.events===s.otherSE.point.events&&o.segment.consume(s.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],r=0,o=this.point.events.length;r<o;r++){var l=this.point.events[r];l!==this&&!l.segment.ringOut&&l.segment.isInResult()&&t.push(l)}return t}},{key:"getLeftmostComparator",value:function(t){var r=this,o=new Map,l=function(u){var c=u.otherSE;o.set(u,{sine:Fu(r.point,t.point,c.point),cosine:Du(r.point,t.point,c.point)})};return function(s,u){o.has(s)||l(s),o.has(u)||l(u);var c=o.get(s),f=c.sine,p=c.cosine,_=o.get(u),b=_.sine,h=_.cosine;return f>=0&&b>=0?p<h?1:p>h?-1:0:f<0&&b<0?p<h?-1:p>h?1:0:b<f?-1:b>f?1:0}}}]),n}(),ju=0,Or=function(){lt(n,null,[{key:"compare",value:function(t,r){var o=t.leftSE.point.x,l=r.leftSE.point.x,s=t.rightSE.point.x,u=r.rightSE.point.x;if(u<o)return 1;if(s<l)return-1;var c=t.leftSE.point.y,f=r.leftSE.point.y,p=t.rightSE.point.y,_=r.rightSE.point.y;if(o<l){if(f<c&&f<p)return 1;if(f>c&&f>p)return-1;var b=t.comparePoint(r.leftSE.point);if(b<0)return 1;if(b>0)return-1;var h=r.comparePoint(t.rightSE.point);return h!==0?h:-1}if(o>l){if(c<f&&c<_)return-1;if(c>f&&c>_)return 1;var g=r.comparePoint(t.leftSE.point);if(g!==0)return g;var k=t.comparePoint(r.rightSE.point);return k<0?1:k>0?-1:1}if(c<f)return-1;if(c>f)return 1;if(s<u){var E=r.comparePoint(t.rightSE.point);if(E!==0)return E}if(s>u){var L=t.comparePoint(r.rightSE.point);if(L<0)return 1;if(L>0)return-1}if(s!==u){var T=p-c,O=s-o,x=_-f,R=u-l;if(T>O&&x<R)return 1;if(T<O&&x>R)return-1}return s>u?1:s<u||p<_?-1:p>_?1:t.id<r.id?-1:t.id>r.id?1:0}}]);function n(e,t,r,o){_t(this,n),this.id=++ju,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=r,this.windings=o}return lt(n,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,r=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<r?t:r},ur:{x:this.rightSE.point.x,y:t>r?t:r}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var r=this.leftSE.point,o=this.rightSE.point,l=this.vector();if(r.x===o.x)return t.x===r.x?0:t.x<r.x?1:-1;var s=(t.y-r.y)/l.y,u=r.x+s*l.x;if(t.x===u)return 0;var c=(t.x-r.x)/l.x,f=r.y+c*l.y;return t.y===f?0:t.y<f?-1:1}},{key:"getIntersection",value:function(t){var r=this.bbox(),o=t.bbox(),l=ui(r,o);if(l===null)return null;var s=this.leftSE.point,u=this.rightSE.point,c=t.leftSE.point,f=t.rightSE.point,p=Ln(r,c)&&this.comparePoint(c)===0,_=Ln(o,s)&&t.comparePoint(s)===0,b=Ln(r,f)&&this.comparePoint(f)===0,h=Ln(o,u)&&t.comparePoint(u)===0;if(_&&p)return h&&!b?u:!h&&b?f:null;if(_)return b&&s.x===f.x&&s.y===f.y?null:s;if(p)return h&&u.x===c.x&&u.y===c.y?null:c;if(h&&b)return null;if(h)return u;if(b)return f;var g=Uu(s,this.vector(),c,t.vector());return g===null||!Ln(l,g)?null:Un.round(g.x,g.y)}},{key:"split",value:function(t){var r=[],o=t.events!==void 0,l=new Ct(t,!0),s=new Ct(t,!1),u=this.rightSE;this.replaceRightSE(s),r.push(s),r.push(l);var c=new n(l,u,this.rings.slice(),this.windings.slice());return Ct.comparePoints(c.leftSE.point,c.rightSE.point)>0&&c.swapEvents(),Ct.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),o&&(l.checkForConsuming(),s.checkForConsuming()),r}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var r=0,o=this.windings.length;r<o;r++)this.windings[r]*=-1}},{key:"consume",value:function(t){for(var r=this,o=t;r.consumedBy;)r=r.consumedBy;for(;o.consumedBy;)o=o.consumedBy;var l=n.compare(r,o);if(l!==0){if(l>0){var s=r;r=o,o=s}if(r.prev===o){var u=r;r=o,o=u}for(var c=0,f=o.rings.length;c<f;c++){var p=o.rings[c],_=o.windings[c],b=r.rings.indexOf(p);b===-1?(r.rings.push(p),r.windings.push(_)):r.windings[b]+=_}o.rings=null,o.windings=null,o.consumedBy=r,o.leftSE.consumedBy=r.leftSE,o.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var r=this._afterState.rings,o=this._afterState.windings,l=this._afterState.multiPolys,s=0,u=this.rings.length;s<u;s++){var c=this.rings[s],f=this.windings[s],p=r.indexOf(c);p===-1?(r.push(c),o.push(f)):o[p]+=f}for(var _=[],b=[],h=0,g=r.length;h<g;h++)if(o[h]!==0){var k=r[h],E=k.poly;if(b.indexOf(E)===-1)if(k.isExterior)_.push(E);else{b.indexOf(E)===-1&&b.push(E);var L=_.indexOf(k.poly);L!==-1&&_.splice(L,1)}}for(var T=0,O=_.length;T<O;T++){var x=_[T].multiPoly;l.indexOf(x)===-1&&l.push(x)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch(wt.type){case"union":{var o=t.length===0,l=r.length===0;this._isInResult=o!==l;break}case"intersection":{var s,u;t.length<r.length?(s=t.length,u=r.length):(s=r.length,u=t.length),this._isInResult=u===wt.numMultiPolys&&s<u;break}case"xor":{var c=Math.abs(t.length-r.length);this._isInResult=c%2===1;break}case"difference":{var f=function(_){return _.length===1&&_[0].isSubject};this._isInResult=f(t)!==f(r);break}default:throw new Error("Unrecognized operation type found ".concat(wt.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,r,o){var l,s,u,c=Ct.comparePoints(t,r);if(c<0)l=t,s=r,u=1;else if(c>0)l=r,s=t,u=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var f=new Ct(l,!0),p=new Ct(s,!1);return new n(f,p,[o],[u])}}]),n}(),al=function(){function n(e,t,r){if(_t(this,n),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=r,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=Un.round(e[0][0],e[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var l=o,s=1,u=e.length;s<u;s++){if(typeof e[s][0]!="number"||typeof e[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=Un.round(e[s][0],e[s][1]);c.x===l.x&&c.y===l.y||(this.segments.push(Or.fromRing(l,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),l=c)}(o.x!==l.x||o.y!==l.y)&&this.segments.push(Or.fromRing(l,o,this))}return lt(n,[{key:"getSweepEvents",value:function(){for(var t=[],r=0,o=this.segments.length;r<o;r++){var l=this.segments[r];t.push(l.leftSE),t.push(l.rightSE)}return t}}]),n}(),Bu=function(){function n(e,t){if(_t(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new al(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,o=e.length;r<o;r++){var l=new al(e[r],this,!1);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.interiorRings.push(l)}this.multiPoly=t}return lt(n,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),r=0,o=this.interiorRings.length;r<o;r++)for(var l=this.interiorRings[r].getSweepEvents(),s=0,u=l.length;s<u;s++)t.push(l[s]);return t}}]),n}(),ul=function(){function n(e,t){if(_t(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,o=e.length;r<o;r++){var l=new Bu(e[r],this);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.polys.push(l)}this.isSubject=t}return lt(n,[{key:"getSweepEvents",value:function(){for(var t=[],r=0,o=this.polys.length;r<o;r++)for(var l=this.polys[r].getSweepEvents(),s=0,u=l.length;s<u;s++)t.push(l[s]);return t}}]),n}(),Gu=function(){lt(n,null,[{key:"factory",value:function(t){for(var r=[],o=0,l=t.length;o<l;o++){var s=t[o];if(!(!s.isInResult()||s.ringOut)){for(var u=null,c=s.leftSE,f=s.rightSE,p=[c],_=c.point,b=[];u=c,c=f,p.push(c),c.point!==_;)for(;;){var h=c.getAvailableLinkedEvents();if(h.length===0){var g=p[0].point,k=p[p.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(g.x,",")+" ".concat(g.y,"]. Last matching segment found ends at")+" [".concat(k.x,", ").concat(k.y,"]."))}if(h.length===1){f=h[0].otherSE;break}for(var E=null,L=0,T=b.length;L<T;L++)if(b[L].point===c.point){E=L;break}if(E!==null){var O=b.splice(E)[0],x=p.splice(O.index);x.unshift(x[0].otherSE),r.push(new n(x.reverse()));continue}b.push({index:p.length,point:c.point});var R=c.getLeftmostComparator(u);f=h.sort(R)[0].otherSE;break}r.push(new n(p))}}return r}}]);function n(e){_t(this,n),this.events=e;for(var t=0,r=e.length;t<r;t++)e[t].segment.ringOut=this;this.poly=null}return lt(n,[{key:"getGeom",value:function(){for(var t=this.events[0].point,r=[t],o=1,l=this.events.length-1;o<l;o++){var s=this.events[o].point,u=this.events[o+1].point;ol(s,t,u)!==0&&(r.push(s),t=s)}if(r.length===1)return null;var c=r[0],f=r[1];ol(c,t,f)===0&&r.shift(),r.push(r[0]);for(var p=this.isExteriorRing()?1:-1,_=this.isExteriorRing()?0:r.length-1,b=this.isExteriorRing()?r.length:-1,h=[],g=_;g!=b;g+=p)h.push([r[g].x,r[g].y]);return h}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],r=1,o=this.events.length;r<o;r++){var l=this.events[r];Ct.compare(t,l)>0&&(t=l)}for(var s=t.segment.prevInResult(),u=s?s.prevInResult():null;;){if(!s)return null;if(!u)return s.ringOut;if(u.ringOut!==s.ringOut)return u.ringOut.enclosingRing()!==s.ringOut?s.ringOut:s.ringOut.enclosingRing();s=u.prevInResult(),u=s?s.prevInResult():null}}}]),n}(),fl=function(){function n(e){_t(this,n),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return lt(n,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var r=0,o=this.interiorRings.length;r<o;r++){var l=this.interiorRings[r].getGeom();l!==null&&t.push(l)}return t}}]),n}(),zu=function(){function n(e){_t(this,n),this.rings=e,this.polys=this._composePolys(e)}return lt(n,[{key:"getGeom",value:function(){for(var t=[],r=0,o=this.polys.length;r<o;r++){var l=this.polys[r].getGeom();l!==null&&t.push(l)}return t}},{key:"_composePolys",value:function(t){for(var r=[],o=0,l=t.length;o<l;o++){var s=t[o];if(!s.poly)if(s.isExteriorRing())r.push(new fl(s));else{var u=s.enclosingRing();u.poly||r.push(new fl(u)),u.poly.addInterior(s)}}return r}}]),n}(),Vu=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Or.compare;_t(this,n),this.queue=e,this.tree=new yi(t),this.segments=[]}return lt(n,[{key:"process",value:function(t){var r=t.segment,o=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(r),o;var l=t.isLeft?this.tree.insert(r):this.tree.find(r);if(!l)throw new Error("Unable to find segment #".concat(r.id," ")+"[".concat(r.leftSE.point.x,", ").concat(r.leftSE.point.y,"] -> ")+"[".concat(r.rightSE.point.x,", ").concat(r.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var s=l,u=l,c=void 0,f=void 0;c===void 0;)s=this.tree.prev(s),s===null?c=null:s.key.consumedBy===void 0&&(c=s.key);for(;f===void 0;)u=this.tree.next(u),u===null?f=null:u.key.consumedBy===void 0&&(f=u.key);if(t.isLeft){var p=null;if(c){var _=c.getIntersection(r);if(_!==null&&(r.isAnEndpoint(_)||(p=_),!c.isAnEndpoint(_)))for(var b=this._splitSafely(c,_),h=0,g=b.length;h<g;h++)o.push(b[h])}var k=null;if(f){var E=f.getIntersection(r);if(E!==null&&(r.isAnEndpoint(E)||(k=E),!f.isAnEndpoint(E)))for(var L=this._splitSafely(f,E),T=0,O=L.length;T<O;T++)o.push(L[T])}if(p!==null||k!==null){var x=null;if(p===null)x=k;else if(k===null)x=p;else{var R=Ct.comparePoints(p,k);x=R<=0?p:k}this.queue.remove(r.rightSE),o.push(r.rightSE);for(var U=r.split(x),ve=0,q=U.length;ve<q;ve++)o.push(U[ve])}o.length>0?(this.tree.remove(r),o.push(t)):(this.segments.push(r),r.prev=c)}else{if(c&&f){var re=c.getIntersection(f);if(re!==null){if(!c.isAnEndpoint(re))for(var de=this._splitSafely(c,re),j=0,te=de.length;j<te;j++)o.push(de[j]);if(!f.isAnEndpoint(re))for(var fe=this._splitSafely(f,re),ae=0,G=fe.length;ae<G;ae++)o.push(fe[ae])}}this.tree.remove(r)}return o}},{key:"_splitSafely",value:function(t,r){this.tree.remove(t);var o=t.rightSE;this.queue.remove(o);var l=t.split(r);return l.push(o),t.consumedBy===void 0&&this.tree.insert(t),l}}]),n}(),cl=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,qu=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Ju=function(){function n(){_t(this,n)}return lt(n,[{key:"run",value:function(t,r,o){wt.type=t,Un.reset();for(var l=[new ul(r,!0)],s=0,u=o.length;s<u;s++)l.push(new ul(o[s],!1));if(wt.numMultiPolys=l.length,wt.type==="difference")for(var c=l[0],f=1;f<l.length;)ui(l[f].bbox,c.bbox)!==null?f++:l.splice(f,1);if(wt.type==="intersection"){for(var p=0,_=l.length;p<_;p++)for(var b=l[p],h=p+1,g=l.length;h<g;h++)if(ui(b.bbox,l[h].bbox)===null)return[]}for(var k=new yi(Ct.compare),E=0,L=l.length;E<L;E++)for(var T=l[E].getSweepEvents(),O=0,x=T.length;O<x;O++)if(k.insert(T[O]),k.size>cl)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var R=new Vu(k),U=k.size,ve=k.pop();ve;){var q=ve.key;if(k.size===U){var re=q.segment;throw new Error("Unable to pop() ".concat(q.isLeft?"left":"right"," SweepEvent ")+"[".concat(q.point.x,", ").concat(q.point.y,"] from segment #").concat(re.id," ")+"[".concat(re.leftSE.point.x,", ").concat(re.leftSE.point.y,"] -> ")+"[".concat(re.rightSE.point.x,", ").concat(re.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(k.size>cl)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(R.segments.length>qu)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var de=R.process(q),j=0,te=de.length;j<te;j++){var fe=de[j];fe.consumedBy===void 0&&k.insert(fe)}U=k.size,ve=k.pop()}Un.reset();var ae=Gu.factory(R.segments),G=new zu(ae);return G.getGeom()}}]),n}(),wt=new Ju,Yu=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return wt.run("union",e,r)},Hu=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return wt.run("intersection",e,r)},Wu=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return wt.run("xor",e,r)},Zu=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return wt.run("difference",e,r)},yr={union:Yu,intersection:Hu,xor:Wu,difference:Zu};function Xu(n,e){var t=Qu(e),r=null;return n.type==="FeatureCollection"?r=Ku(n):r=Ll(yr.union(n.geometry.coordinates)),r.geometry.coordinates.forEach(function(o){t.geometry.coordinates.push(o[0])}),t}function Ku(n){var e=n.features.length===2?yr.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):yr.union.apply(yr,n.features.map(function(t){return t.geometry.coordinates}));return Ll(e)}function Ll(n){return Cu(n)}function Qu(n){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],t=n&&n.geometry.coordinates||e;return ku(t)}const $u={"line-cap":"round","line-join":"round"},Ml=["==","$type","Polygon"],ci=["==","$type","LineString"],Ir=["==","$type","Point"];function Lr(n,e,t=1){return{type:"line",layout:$u,paint:{"line-color":n,"line-width":e,"line-opacity":t}}}function Pl(n,e){return{type:"fill",paint:{"fill-color":n,"fill-opacity":e}}}function Mr(n,e,t=1){return{type:"circle",paint:{"circle-radius":e,"circle-color":n,"circle-opacity":t}}}function Ei(n,e,t){if(n.getSource(e)){let r=[];for(let o of n.getStyle().layers)o.source==e&&r.push(o.id);for(let o of r)n.removeLayer(o);n.removeSource(e)}n.addSource(e,t)}function xn(n,e){n.getLayer(e.id)&&n.removeLayer(e.id),n.addLayer(e)}function ef(n,e,t){let r;ot(n,bn,s=>t(1,r=s));let{boundaryGeojson:o}=e;return Nr("setCamera")&&r.fitBounds(vi(o),{padding:20,animate:!1}),Ei(r,"boundary",{type:"geojson",data:Xu(o)}),xn(r,{id:"boundary",source:"boundary",...Pl("black",.5)}),n.$$set=s=>{"boundaryGeojson"in s&&t(0,o=s.boundaryGeojson)},[o]}class tf extends Ce{constructor(e){super(),Oe(this,e,ef,null,Ie,{boundaryGeojson:0})}}var di={},nf={get exports(){return di},set exports(n){di=n}};(function(n,e){(function(t,r){n.exports=r()})(In,function(){var t=function(i,a){var d={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},m={on:function(y,w,B){if(d[y]===void 0)throw new Error("Invalid event type: "+y);d[y].push({selector:w,fn:B})},render:function(y){a.store.featureChanged(y)}},v=function(y,w){for(var B=d[y],V=B.length;V--;){var K=B[V];if(K.selector(w)){K.fn.call(m,w)||a.store.render(),a.ui.updateMapClasses();break}}};return i.start.call(m),{render:i.render,stop:function(){i.stop&&i.stop()},trash:function(){i.trash&&(i.trash(),a.store.render())},combineFeatures:function(){i.combineFeatures&&i.combineFeatures()},uncombineFeatures:function(){i.uncombineFeatures&&i.uncombineFeatures()},drag:function(y){v("drag",y)},click:function(y){v("click",y)},mousemove:function(y){v("mousemove",y)},mousedown:function(y){v("mousedown",y)},mouseup:function(y){v("mouseup",y)},mouseout:function(y){v("mouseout",y)},keydown:function(y){v("keydown",y)},keyup:function(y){v("keyup",y)},touchstart:function(y){v("touchstart",y)},touchmove:function(y){v("touchmove",y)},touchend:function(y){v("touchend",y)},tap:function(y){v("tap",y)}}};function r(i){if(i.__esModule)return i;var a=i.default;if(typeof a=="function"){var d=function m(){if(this instanceof m){var v=[null];v.push.apply(v,arguments);var y=Function.bind.apply(a,v);return new y}return a.apply(this,arguments)};d.prototype=a.prototype}else d={};return Object.defineProperty(d,"__esModule",{value:!0}),Object.keys(i).forEach(function(m){var v=Object.getOwnPropertyDescriptor(i,m);Object.defineProperty(d,m,v.get?v:{enumerable:!0,get:function(){return i[m]}})}),d}var o={},l={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},s=l;function u(i){var a=0;if(i&&i.length>0){a+=Math.abs(c(i[0]));for(var d=1;d<i.length;d++)a-=Math.abs(c(i[d]))}return a}function c(i){var a,d,m,v,y,w,B=0,V=i.length;if(V>2){for(w=0;w<V;w++)w===V-2?(m=V-2,v=V-1,y=0):w===V-1?(m=V-1,v=0,y=1):(m=w,v=w+1,y=w+2),a=i[m],d=i[v],B+=(f(i[y][0])-f(a[0]))*Math.sin(f(d[1]));B=B*s.RADIUS*s.RADIUS/2}return B}function f(i){return i*Math.PI/180}o.geometry=function i(a){var d,m=0;switch(a.type){case"Polygon":return u(a.coordinates);case"MultiPolygon":for(d=0;d<a.coordinates.length;d++)m+=u(a.coordinates[d]);return m;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(d=0;d<a.geometries.length;d++)m+=i(a.geometries[d]);return m}},o.ring=c;var p={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},_={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},b={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},h={POLYGON:"polygon",LINE:"line_string",POINT:"point"},g={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},k={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},E={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},L={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},T={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},O={ACTIVE:"true",INACTIVE:"false"},x=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],R=-85,U=Object.freeze({__proto__:null,classes:p,sources:_,cursors:b,types:h,geojsonTypes:g,modes:k,events:E,updateActions:L,meta:T,activeStates:O,interactions:x,LAT_MIN:-90,LAT_RENDERED_MIN:R,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),ve={Point:0,LineString:1,MultiLineString:1,Polygon:2};function q(i,a){var d=ve[i.geometry.type]-ve[a.geometry.type];return d===0&&i.geometry.type===g.POLYGON?i.area-a.area:d}function re(i){return i.map(function(a){return a.geometry.type===g.POLYGON&&(a.area=o.geometry({type:g.FEATURE,property:{},geometry:a.geometry})),a}).sort(q).map(function(a){return delete a.area,a})}function de(i,a){return a===void 0&&(a=0),[[i.point.x-a,i.point.y-a],[i.point.x+a,i.point.y+a]]}function j(i){if(this._items={},this._nums={},this._length=i?i.length:0,i)for(var a=0,d=i.length;a<d;a++)this.add(i[a]),i[a]!==void 0&&(typeof i[a]=="string"?this._items[i[a]]=a:this._nums[i[a]]=a)}j.prototype.add=function(i){return this.has(i)||(this._length++,typeof i=="string"?this._items[i]=this._length:this._nums[i]=this._length),this},j.prototype.delete=function(i){return this.has(i)===!1||(this._length--,delete this._items[i],delete this._nums[i]),this},j.prototype.has=function(i){return(typeof i=="string"||typeof i=="number")&&(this._items[i]!==void 0||this._nums[i]!==void 0)},j.prototype.values=function(){var i=this,a=[];return Object.keys(this._items).forEach(function(d){a.push({k:d,v:i._items[d]})}),Object.keys(this._nums).forEach(function(d){a.push({k:JSON.parse(d),v:i._nums[d]})}),a.sort(function(d,m){return d.v-m.v}).map(function(d){return d.k})},j.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var te=[T.FEATURE,T.MIDPOINT,T.VERTEX],fe={click:function(i,a,d){return ae(i,a,d,d.options.clickBuffer)},touch:function(i,a,d){return ae(i,a,d,d.options.touchBuffer)}};function ae(i,a,d,m){if(d.map===null)return[];var v=i?de(i,m):a,y={};d.options.styles&&(y.layers=d.options.styles.map(function(K){return K.id}));var w=d.map.queryRenderedFeatures(v,y).filter(function(K){return te.indexOf(K.properties.meta)!==-1}),B=new j,V=[];return w.forEach(function(K){var X=K.properties.id;B.has(X)||(B.add(X),V.push(K))}),re(V)}function G(i,a){var d=fe.click(i,null,a),m={mouse:b.NONE};return d[0]&&(m.mouse=d[0].properties.active===O.ACTIVE?b.MOVE:b.POINTER,m.feature=d[0].properties.meta),a.events.currentModeName().indexOf("draw")!==-1&&(m.mouse=b.ADD),a.ui.queueMapClasses(m),a.ui.updateMapClasses(),d[0]}function ne(i,a){var d=i.x-a.x,m=i.y-a.y;return Math.sqrt(d*d+m*m)}function Ae(i,a,d){d===void 0&&(d={});var m=d.fineTolerance!=null?d.fineTolerance:4,v=d.grossTolerance!=null?d.grossTolerance:12,y=d.interval!=null?d.interval:500;i.point=i.point||a.point,i.time=i.time||a.time;var w=ne(i.point,a.point);return w<m||w<v&&a.time-i.time<y}function Le(i,a,d){d===void 0&&(d={});var m=d.tolerance!=null?d.tolerance:25,v=d.interval!=null?d.interval:250;return i.point=i.point||a.point,i.time=i.time||a.time,ne(i.point,a.point)<m&&a.time-i.time<v}var ke={},Be={get exports(){return ke},set exports(i){ke=i}}.exports=function(i,a){if(a||(a=16),i===void 0&&(i=128),i<=0)return"0";for(var d=Math.log(Math.pow(2,i))/Math.log(a),m=2;d===1/0;m*=2)d=Math.log(Math.pow(2,i/m))/Math.log(a)*m;var v=d-Math.floor(d),y="";for(m=0;m<Math.floor(d);m++)y=Math.floor(Math.random()*a).toString(a)+y;if(v){var w=Math.pow(a,v);y=Math.floor(Math.random()*w).toString(a)+y}var B=parseInt(y,a);return B!==1/0&&B>=Math.pow(2,i)?Be(i,a):y};Be.rack=function(i,a,d){var m=function(y){var w=0;do{if(w++>10){if(!d)throw new Error("too many ID collisions, use more bits");i+=d}var B=Be(i,a)}while(Object.hasOwnProperty.call(v,B));return v[B]=y,B},v=m.hats={};return m.get=function(y){return m.hats[y]},m.set=function(y,w){return m.hats[y]=w,m},m.bits=i||128,m.base=a||16,m};var Ee=function(i,a){this.ctx=i,this.properties=a.properties||{},this.coordinates=a.geometry.coordinates,this.id=a.id||ke(),this.type=a.geometry.type};Ee.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Ee.prototype.incomingCoords=function(i){this.setCoordinates(i)},Ee.prototype.setCoordinates=function(i){this.coordinates=i,this.changed()},Ee.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Ee.prototype.setProperty=function(i,a){this.properties[i]=a},Ee.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:g.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Ee.prototype.internal=function(i){var a={id:this.id,meta:T.FEATURE,"meta:type":this.type,active:O.INACTIVE,mode:i};if(this.ctx.options.userProperties)for(var d in this.properties)a["user_"+d]=this.properties[d];return{type:g.FEATURE,properties:a,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var I=function(i,a){Ee.call(this,i,a)};(I.prototype=Object.create(Ee.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},I.prototype.updateCoordinate=function(i,a,d){this.coordinates=arguments.length===3?[a,d]:[i,a],this.changed()},I.prototype.getCoordinate=function(){return this.getCoordinates()};var ue=function(i,a){Ee.call(this,i,a)};(ue.prototype=Object.create(Ee.prototype)).isValid=function(){return this.coordinates.length>1},ue.prototype.addCoordinate=function(i,a,d){this.changed();var m=parseInt(i,10);this.coordinates.splice(m,0,[a,d])},ue.prototype.getCoordinate=function(i){var a=parseInt(i,10);return JSON.parse(JSON.stringify(this.coordinates[a]))},ue.prototype.removeCoordinate=function(i){this.changed(),this.coordinates.splice(parseInt(i,10),1)},ue.prototype.updateCoordinate=function(i,a,d){var m=parseInt(i,10);this.coordinates[m]=[a,d],this.changed()};var ut=function(i,a){Ee.call(this,i,a),this.coordinates=this.coordinates.map(function(d){return d.slice(0,-1)})};(ut.prototype=Object.create(Ee.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(i){return i.length>2})},ut.prototype.incomingCoords=function(i){this.coordinates=i.map(function(a){return a.slice(0,-1)}),this.changed()},ut.prototype.setCoordinates=function(i){this.coordinates=i,this.changed()},ut.prototype.addCoordinate=function(i,a,d){this.changed();var m=i.split(".").map(function(v){return parseInt(v,10)});this.coordinates[m[0]].splice(m[1],0,[a,d])},ut.prototype.removeCoordinate=function(i){this.changed();var a=i.split(".").map(function(m){return parseInt(m,10)}),d=this.coordinates[a[0]];d&&(d.splice(a[1],1),d.length<3&&this.coordinates.splice(a[0],1))},ut.prototype.getCoordinate=function(i){var a=i.split(".").map(function(m){return parseInt(m,10)}),d=this.coordinates[a[0]];return JSON.parse(JSON.stringify(d[a[1]]))},ut.prototype.getCoordinates=function(){return this.coordinates.map(function(i){return i.concat([i[0]])})},ut.prototype.updateCoordinate=function(i,a,d){this.changed();var m=i.split("."),v=parseInt(m[0],10),y=parseInt(m[1],10);this.coordinates[v]===void 0&&(this.coordinates[v]=[]),this.coordinates[v][y]=[a,d]};var Fr={MultiPoint:I,MultiLineString:ue,MultiPolygon:ut},ln=function(i,a,d,m,v){var y=d.split("."),w=parseInt(y[0],10),B=y[1]?y.slice(1).join("."):null;return i[w][a](B,m,v)},Ke=function(i,a){if(Ee.call(this,i,a),delete this.coordinates,this.model=Fr[a.geometry.type],this.model===void 0)throw new TypeError(a.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(a.geometry.coordinates)};function me(i){this.map=i.map,this.drawConfig=JSON.parse(JSON.stringify(i.options||{})),this._ctx=i}(Ke.prototype=Object.create(Ee.prototype))._coordinatesToFeatures=function(i){var a=this,d=this.model.bind(this);return i.map(function(m){return new d(a.ctx,{id:ke(),type:g.FEATURE,properties:{},geometry:{coordinates:m,type:a.type.replace("Multi","")}})})},Ke.prototype.isValid=function(){return this.features.every(function(i){return i.isValid()})},Ke.prototype.setCoordinates=function(i){this.features=this._coordinatesToFeatures(i),this.changed()},Ke.prototype.getCoordinate=function(i){return ln(this.features,"getCoordinate",i)},Ke.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(i){return i.type===g.POLYGON?i.getCoordinates():i.coordinates})))},Ke.prototype.updateCoordinate=function(i,a,d){ln(this.features,"updateCoordinate",i,a,d),this.changed()},Ke.prototype.addCoordinate=function(i,a,d){ln(this.features,"addCoordinate",i,a,d),this.changed()},Ke.prototype.removeCoordinate=function(i){ln(this.features,"removeCoordinate",i),this.changed()},Ke.prototype.getFeatures=function(){return this.features},me.prototype.setSelected=function(i){return this._ctx.store.setSelected(i)},me.prototype.setSelectedCoordinates=function(i){var a=this;this._ctx.store.setSelectedCoordinates(i),i.reduce(function(d,m){return d[m.feature_id]===void 0&&(d[m.feature_id]=!0,a._ctx.store.get(m.feature_id).changed()),d},{})},me.prototype.getSelected=function(){return this._ctx.store.getSelected()},me.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},me.prototype.isSelected=function(i){return this._ctx.store.isSelected(i)},me.prototype.getFeature=function(i){return this._ctx.store.get(i)},me.prototype.select=function(i){return this._ctx.store.select(i)},me.prototype.deselect=function(i){return this._ctx.store.deselect(i)},me.prototype.deleteFeature=function(i,a){return a===void 0&&(a={}),this._ctx.store.delete(i,a)},me.prototype.addFeature=function(i){return this._ctx.store.add(i)},me.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},me.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},me.prototype.setActionableState=function(i){i===void 0&&(i={});var a={trash:i.trash||!1,combineFeatures:i.combineFeatures||!1,uncombineFeatures:i.uncombineFeatures||!1};return this._ctx.events.actionable(a)},me.prototype.changeMode=function(i,a,d){return a===void 0&&(a={}),d===void 0&&(d={}),this._ctx.events.changeMode(i,a,d)},me.prototype.updateUIClasses=function(i){return this._ctx.ui.queueMapClasses(i)},me.prototype.activateUIButton=function(i){return this._ctx.ui.setActiveButton(i)},me.prototype.featuresAt=function(i,a,d){if(d===void 0&&(d="click"),d!=="click"&&d!=="touch")throw new Error("invalid buffer type");return fe[d](i,a,this._ctx)},me.prototype.newFeature=function(i){var a=i.geometry.type;return a===g.POINT?new I(this._ctx,i):a===g.LINE_STRING?new ue(this._ctx,i):a===g.POLYGON?new ut(this._ctx,i):new Ke(this._ctx,i)},me.prototype.isInstanceOf=function(i,a){if(i===g.POINT)return a instanceof I;if(i===g.LINE_STRING)return a instanceof ue;if(i===g.POLYGON)return a instanceof ut;if(i==="MultiFeature")return a instanceof Ke;throw new Error("Unknown feature class: "+i)},me.prototype.doRender=function(i){return this._ctx.store.featureChanged(i)},me.prototype.onSetup=function(){},me.prototype.onDrag=function(){},me.prototype.onClick=function(){},me.prototype.onMouseMove=function(){},me.prototype.onMouseDown=function(){},me.prototype.onMouseUp=function(){},me.prototype.onMouseOut=function(){},me.prototype.onKeyUp=function(){},me.prototype.onKeyDown=function(){},me.prototype.onTouchStart=function(){},me.prototype.onTouchMove=function(){},me.prototype.onTouchEnd=function(){},me.prototype.onTap=function(){},me.prototype.onStop=function(){},me.prototype.onTrash=function(){},me.prototype.onCombineFeature=function(){},me.prototype.onUncombineFeature=function(){},me.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var $={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Dl=Object.keys($);function Ul(i){var a=Object.keys(i);return function(d,m){m===void 0&&(m={});var v={},y=a.reduce(function(w,B){return w[B]=i[B],w},new me(d));return{start:function(){var w=this;v=y.onSetup(m),Dl.forEach(function(B){var V,K=$[B],X=function(){return!1};i[K]&&(X=function(){return!0}),w.on(B,X,(V=K,function(H){return y[V](v,H)}))})},stop:function(){y.onStop(v)},trash:function(){y.onTrash(v)},combineFeatures:function(){y.onCombineFeatures(v)},uncombineFeatures:function(){y.onUncombineFeatures(v)},render:function(w,B){y.toDisplayFeatures(v,w,B)}}}}function vn(i){return[].concat(i).filter(function(a){return a!==void 0})}function jl(){var i=this;if(!(i.ctx.map&&i.ctx.map.getSource(_.HOT)!==void 0))return V();var a=i.ctx.events.currentModeName();i.ctx.ui.queueMapClasses({mode:a});var d=[],m=[];i.isDirty?m=i.getAllIds():(d=i.getChangedIds().filter(function(K){return i.get(K)!==void 0}),m=i.sources.hot.filter(function(K){return K.properties.id&&d.indexOf(K.properties.id)===-1&&i.get(K.properties.id)!==void 0}).map(function(K){return K.properties.id})),i.sources.hot=[];var v=i.sources.cold.length;i.sources.cold=i.isDirty?[]:i.sources.cold.filter(function(K){var X=K.properties.id||K.properties.parent;return d.indexOf(X)===-1});var y=v!==i.sources.cold.length||m.length>0;function w(K,X){var H=i.get(K).internal(a);i.ctx.events.currentModeRender(H,function(le){i.sources[X].push(le)})}if(d.forEach(function(K){return w(K,"hot")}),m.forEach(function(K){return w(K,"cold")}),y&&i.ctx.map.getSource(_.COLD).setData({type:g.FEATURE_COLLECTION,features:i.sources.cold}),i.ctx.map.getSource(_.HOT).setData({type:g.FEATURE_COLLECTION,features:i.sources.hot}),i._emitSelectionChange&&(i.ctx.map.fire(E.SELECTION_CHANGE,{features:i.getSelected().map(function(K){return K.toGeoJSON()}),points:i.getSelectedCoordinates().map(function(K){return{type:g.FEATURE,properties:{},geometry:{type:g.POINT,coordinates:K.coordinates}}})}),i._emitSelectionChange=!1),i._deletedFeaturesToEmit.length){var B=i._deletedFeaturesToEmit.map(function(K){return K.toGeoJSON()});i._deletedFeaturesToEmit=[],i.ctx.map.fire(E.DELETE,{features:B})}function V(){i.isDirty=!1,i.clearChangedIds()}V(),i.ctx.map.fire(E.RENDER,{})}function Ne(i){var a,d=this;this._features={},this._featureIds=new j,this._selectedFeatureIds=new j,this._selectedCoordinates=[],this._changedFeatureIds=new j,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=i,this.sources={hot:[],cold:[]},this.render=function(){a||(a=requestAnimationFrame(function(){a=null,jl.call(d)}))},this.isDirty=!1}function wi(i,a){var d=i._selectedCoordinates.filter(function(m){return i._selectedFeatureIds.has(m.feature_id)});i._selectedCoordinates.length===d.length||a.silent||(i._emitSelectionChange=!0),i._selectedCoordinates=d}Ne.prototype.createRenderBatch=function(){var i=this,a=this.render,d=0;return this.render=function(){d++},function(){i.render=a,d>0&&i.render()}},Ne.prototype.setDirty=function(){return this.isDirty=!0,this},Ne.prototype.featureChanged=function(i){return this._changedFeatureIds.add(i),this},Ne.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Ne.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Ne.prototype.getAllIds=function(){return this._featureIds.values()},Ne.prototype.add=function(i){return this.featureChanged(i.id),this._features[i.id]=i,this._featureIds.add(i.id),this},Ne.prototype.delete=function(i,a){var d=this;return a===void 0&&(a={}),vn(i).forEach(function(m){d._featureIds.has(m)&&(d._featureIds.delete(m),d._selectedFeatureIds.delete(m),a.silent||d._deletedFeaturesToEmit.indexOf(d._features[m])===-1&&d._deletedFeaturesToEmit.push(d._features[m]),delete d._features[m],d.isDirty=!0)}),wi(this,a),this},Ne.prototype.get=function(i){return this._features[i]},Ne.prototype.getAll=function(){var i=this;return Object.keys(this._features).map(function(a){return i._features[a]})},Ne.prototype.select=function(i,a){var d=this;return a===void 0&&(a={}),vn(i).forEach(function(m){d._selectedFeatureIds.has(m)||(d._selectedFeatureIds.add(m),d._changedFeatureIds.add(m),a.silent||(d._emitSelectionChange=!0))}),this},Ne.prototype.deselect=function(i,a){var d=this;return a===void 0&&(a={}),vn(i).forEach(function(m){d._selectedFeatureIds.has(m)&&(d._selectedFeatureIds.delete(m),d._changedFeatureIds.add(m),a.silent||(d._emitSelectionChange=!0))}),wi(this,a),this},Ne.prototype.clearSelected=function(i){return i===void 0&&(i={}),this.deselect(this._selectedFeatureIds.values(),{silent:i.silent}),this},Ne.prototype.setSelected=function(i,a){var d=this;return a===void 0&&(a={}),i=vn(i),this.deselect(this._selectedFeatureIds.values().filter(function(m){return i.indexOf(m)===-1}),{silent:a.silent}),this.select(i.filter(function(m){return!d._selectedFeatureIds.has(m)}),{silent:a.silent}),this},Ne.prototype.setSelectedCoordinates=function(i){return this._selectedCoordinates=i,this._emitSelectionChange=!0,this},Ne.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Ne.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Ne.prototype.getSelected=function(){var i=this;return this._selectedFeatureIds.values().map(function(a){return i.get(a)})},Ne.prototype.getSelectedCoordinates=function(){var i=this;return this._selectedCoordinates.map(function(a){return{coordinates:i.get(a.feature_id).getCoordinate(a.coord_path)}})},Ne.prototype.isSelected=function(i){return this._selectedFeatureIds.has(i)},Ne.prototype.setFeatureProperty=function(i,a,d){this.get(i).setProperty(a,d),this.featureChanged(i)},Ne.prototype.storeMapConfig=function(){var i=this;x.forEach(function(a){i.ctx.map[a]&&(i._mapInitialConfig[a]=i.ctx.map[a].isEnabled())})},Ne.prototype.restoreMapConfig=function(){var i=this;Object.keys(this._mapInitialConfig).forEach(function(a){i._mapInitialConfig[a]?i.ctx.map[a].enable():i.ctx.map[a].disable()})},Ne.prototype.getInitialConfigValue=function(i){return this._mapInitialConfig[i]===void 0||this._mapInitialConfig[i]};var Dt=function(){for(var i=arguments,a={},d=0;d<arguments.length;d++){var m=i[d];for(var v in m)Bl.call(m,v)&&(a[v]=m[v])}return a},Bl=Object.prototype.hasOwnProperty,Gl=["mode","feature","mouse"];function zl(i){var a=null,d=null,m={onRemove:function(){return i.map.off("load",m.connect),clearInterval(d),m.removeLayers(),i.store.restoreMapConfig(),i.ui.removeButtons(),i.events.removeEventListeners(),i.ui.clearMapClasses(),i.map=null,i.container=null,i.store=null,a&&a.parentNode&&a.parentNode.removeChild(a),a=null,this},connect:function(){i.map.off("load",m.connect),clearInterval(d),m.addLayers(),i.store.storeMapConfig(),i.events.addEventListeners()},onAdd:function(v){var y=v.fire;return v.fire=function(w,B){var V=arguments;return y.length===1&&arguments.length!==1&&(V=[Dt({},{type:w},B)]),y.apply(v,V)},i.map=v,i.events=function(w){var B=Object.keys(w.options.modes).reduce(function(D,ee){return D[ee]=Ul(w.options.modes[ee]),D},{}),V={},K={},X={},H=null,le=null;X.drag=function(D,ee){ee({point:D.point,time:new Date().getTime()})?(w.ui.queueMapClasses({mouse:b.DRAG}),le.drag(D)):D.originalEvent.stopPropagation()},X.mousedrag=function(D){X.drag(D,function(ee){return!Ae(V,ee)})},X.touchdrag=function(D){X.drag(D,function(ee){return!Le(K,ee)})},X.mousemove=function(D){if((D.originalEvent.buttons!==void 0?D.originalEvent.buttons:D.originalEvent.which)===1)return X.mousedrag(D);var ee=G(D,w);D.featureTarget=ee,le.mousemove(D)},X.mousedown=function(D){V={time:new Date().getTime(),point:D.point};var ee=G(D,w);D.featureTarget=ee,le.mousedown(D)},X.mouseup=function(D){var ee=G(D,w);D.featureTarget=ee,Ae(V,{point:D.point,time:new Date().getTime()})?le.click(D):le.mouseup(D)},X.mouseout=function(D){le.mouseout(D)},X.touchstart=function(D){if(w.options.touchEnabled){K={time:new Date().getTime(),point:D.point};var ee=fe.touch(D,null,w)[0];D.featureTarget=ee,le.touchstart(D)}},X.touchmove=function(D){if(w.options.touchEnabled)return le.touchmove(D),X.touchdrag(D)},X.touchend=function(D){if(w.options.touchEnabled){var ee=fe.touch(D,null,w)[0];D.featureTarget=ee,Le(K,{time:new Date().getTime(),point:D.point})?le.tap(D):le.touchend(D)}};var je=function(D){return!(D===8||D===46||D>=48&&D<=57)};function ce(D,ee,we){we===void 0&&(we={}),le.stop();var Ze=B[D];if(Ze===void 0)throw new Error(D+" is not valid");H=D;var Ve=Ze(w,ee);le=t(Ve,w),we.silent||w.map.fire(E.MODE_CHANGE,{mode:D}),w.store.setDirty(),w.store.render()}X.keydown=function(D){(D.srcElement||D.target).classList[0]==="mapboxgl-canvas"&&(D.keyCode!==8&&D.keyCode!==46||!w.options.controls.trash?je(D.keyCode)?le.keydown(D):D.keyCode===49&&w.options.controls.point?ce(k.DRAW_POINT):D.keyCode===50&&w.options.controls.line_string?ce(k.DRAW_LINE_STRING):D.keyCode===51&&w.options.controls.polygon&&ce(k.DRAW_POLYGON):(D.preventDefault(),le.trash()))},X.keyup=function(D){je(D.keyCode)&&le.keyup(D)},X.zoomend=function(){w.store.changeZoom()},X.data=function(D){if(D.dataType==="style"){var ee=w.setup,we=w.map,Ze=w.options,Ve=w.store;Ze.styles.some(function(Vr){return we.getLayer(Vr.id)})||(ee.addLayers(),Ve.setDirty(),Ve.render())}};var ze={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){H=w.options.defaultMode,le=t(B[H](w),w)},changeMode:ce,actionable:function(D){var ee=!1;Object.keys(D).forEach(function(we){if(ze[we]===void 0)throw new Error("Invalid action type");ze[we]!==D[we]&&(ee=!0),ze[we]=D[we]}),ee&&w.map.fire(E.ACTIONABLE,{actions:ze})},currentModeName:function(){return H},currentModeRender:function(D,ee){return le.render(D,ee)},fire:function(D,ee){X[D]&&X[D](ee)},addEventListeners:function(){w.map.on("mousemove",X.mousemove),w.map.on("mousedown",X.mousedown),w.map.on("mouseup",X.mouseup),w.map.on("data",X.data),w.map.on("touchmove",X.touchmove,{passive:!0}),w.map.on("touchstart",X.touchstart,{passive:!0}),w.map.on("touchend",X.touchend,{passive:!0}),w.container.addEventListener("mouseout",X.mouseout),w.options.keybindings&&(w.container.addEventListener("keydown",X.keydown),w.container.addEventListener("keyup",X.keyup))},removeEventListeners:function(){w.map.off("mousemove",X.mousemove),w.map.off("mousedown",X.mousedown),w.map.off("mouseup",X.mouseup),w.map.off("data",X.data),w.map.off("touchmove",X.touchmove),w.map.off("touchstart",X.touchstart),w.map.off("touchend",X.touchend),w.container.removeEventListener("mouseout",X.mouseout),w.options.keybindings&&(w.container.removeEventListener("keydown",X.keydown),w.container.removeEventListener("keyup",X.keyup))},trash:function(D){le.trash(D)},combineFeatures:function(){le.combineFeatures()},uncombineFeatures:function(){le.uncombineFeatures()},getMode:function(){return H}}}(i),i.ui=function(w){var B={},V=null,K={mode:null,feature:null,mouse:null},X={mode:null,feature:null,mouse:null};function H(D){X=Dt(X,D)}function le(){var D,ee;if(w.container){var we=[],Ze=[];Gl.forEach(function(Ve){X[Ve]!==K[Ve]&&(we.push(Ve+"-"+K[Ve]),X[Ve]!==null&&Ze.push(Ve+"-"+X[Ve]))}),we.length>0&&(D=w.container.classList).remove.apply(D,we),Ze.length>0&&(ee=w.container.classList).add.apply(ee,Ze),K=Dt(K,X)}}function je(D,ee){ee===void 0&&(ee={});var we=document.createElement("button");return we.className=p.CONTROL_BUTTON+" "+ee.className,we.setAttribute("title",ee.title),ee.container.appendChild(we),we.addEventListener("click",function(Ze){if(Ze.preventDefault(),Ze.stopPropagation(),Ze.target===V)return ce(),void ee.onDeactivate();ze(D),ee.onActivate()},!0),we}function ce(){V&&(V.classList.remove(p.ACTIVE_BUTTON),V=null)}function ze(D){ce();var ee=B[D];ee&&ee&&D!=="trash"&&(ee.classList.add(p.ACTIVE_BUTTON),V=ee)}return{setActiveButton:ze,queueMapClasses:H,updateMapClasses:le,clearMapClasses:function(){H({mode:null,feature:null,mouse:null}),le()},addButtons:function(){var D=w.options.controls,ee=document.createElement("div");return ee.className=p.CONTROL_GROUP+" "+p.CONTROL_BASE,D&&(D[h.LINE]&&(B[h.LINE]=je(h.LINE,{container:ee,className:p.CONTROL_BUTTON_LINE,title:"LineString tool "+(w.options.keybindings?"(l)":""),onActivate:function(){return w.events.changeMode(k.DRAW_LINE_STRING)},onDeactivate:function(){return w.events.trash()}})),D[h.POLYGON]&&(B[h.POLYGON]=je(h.POLYGON,{container:ee,className:p.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(w.options.keybindings?"(p)":""),onActivate:function(){return w.events.changeMode(k.DRAW_POLYGON)},onDeactivate:function(){return w.events.trash()}})),D[h.POINT]&&(B[h.POINT]=je(h.POINT,{container:ee,className:p.CONTROL_BUTTON_POINT,title:"Marker tool "+(w.options.keybindings?"(m)":""),onActivate:function(){return w.events.changeMode(k.DRAW_POINT)},onDeactivate:function(){return w.events.trash()}})),D.trash&&(B.trash=je("trash",{container:ee,className:p.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){w.events.trash()}})),D.combine_features&&(B.combine_features=je("combineFeatures",{container:ee,className:p.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){w.events.combineFeatures()}})),D.uncombine_features&&(B.uncombine_features=je("uncombineFeatures",{container:ee,className:p.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){w.events.uncombineFeatures()}}))),ee},removeButtons:function(){Object.keys(B).forEach(function(D){var ee=B[D];ee.parentNode&&ee.parentNode.removeChild(ee),delete B[D]})}}}(i),i.container=v.getContainer(),i.store=new Ne(i),a=i.ui.addButtons(),i.options.boxSelect&&(v.boxZoom.disable(),v.dragPan.disable(),v.dragPan.enable()),v.loaded()?m.connect():(v.on("load",m.connect),d=setInterval(function(){v.loaded()&&m.connect()},16)),i.events.start(),a},addLayers:function(){i.map.addSource(_.COLD,{data:{type:g.FEATURE_COLLECTION,features:[]},type:"geojson"}),i.map.addSource(_.HOT,{data:{type:g.FEATURE_COLLECTION,features:[]},type:"geojson"}),i.options.styles.forEach(function(v){i.map.addLayer(v)}),i.store.setDirty(!0),i.store.render()},removeLayers:function(){i.options.styles.forEach(function(v){i.map.getLayer(v.id)&&i.map.removeLayer(v.id)}),i.map.getSource(_.COLD)&&i.map.removeSource(_.COLD),i.map.getSource(_.HOT)&&i.map.removeSource(_.HOT)}};return i.setup=m,m}var Si=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function zn(i){return function(a){var d=a.featureTarget;return!!d&&!!d.properties&&d.properties.meta===i}}function ki(i){return!!i.originalEvent&&!!i.originalEvent.shiftKey&&i.originalEvent.button===0}function Zt(i){return!!i.featureTarget&&!!i.featureTarget.properties&&i.featureTarget.properties.active===O.ACTIVE&&i.featureTarget.properties.meta===T.FEATURE}function Dr(i){return!!i.featureTarget&&!!i.featureTarget.properties&&i.featureTarget.properties.active===O.INACTIVE&&i.featureTarget.properties.meta===T.FEATURE}function Vn(i){return i.featureTarget===void 0}function Ti(i){return!!i.featureTarget&&!!i.featureTarget.properties&&i.featureTarget.properties.meta===T.FEATURE}function _n(i){var a=i.featureTarget;return!!a&&!!a.properties&&a.properties.meta===T.VERTEX}function qn(i){return!!i.originalEvent&&i.originalEvent.shiftKey===!0}function Jn(i){return i.keyCode===27}function Yn(i){return i.keyCode===13}var Vl=Object.freeze({__proto__:null,isOfMetaType:zn,isShiftMousedown:ki,isActiveFeature:Zt,isInactiveFeature:Dr,noTarget:Vn,isFeature:Ti,isVertex:_n,isShiftDown:qn,isEscapeKey:Jn,isEnterKey:Yn,isTrue:function(){return!0}}),ql=sn;function sn(i,a){this.x=i,this.y=a}function Ur(i,a){var d=a.getBoundingClientRect();return new ql(i.clientX-d.left-(a.clientLeft||0),i.clientY-d.top-(a.clientTop||0))}function an(i,a,d,m){return{type:g.FEATURE,properties:{meta:T.VERTEX,parent:i,coord_path:d,active:m?O.ACTIVE:O.INACTIVE},geometry:{type:g.POINT,coordinates:a}}}function Ci(i,a,d){var m=a.geometry.coordinates,v=d.geometry.coordinates;if(m[1]>85||m[1]<R||v[1]>85||v[1]<R)return null;var y={lng:(m[0]+v[0])/2,lat:(m[1]+v[1])/2};return{type:g.FEATURE,properties:{meta:T.MIDPOINT,parent:i,lng:y.lng,lat:y.lat,coord_path:d.properties.coord_path},geometry:{type:g.POINT,coordinates:[y.lng,y.lat]}}}function Hn(i,a,d){a===void 0&&(a={}),d===void 0&&(d=null);var m,v=i.geometry,y=v.type,w=v.coordinates,B=i.properties&&i.properties.id,V=[];function K(H,le){var je="",ce=null;H.forEach(function(ze,D){var ee=le!=null?le+"."+D:String(D),we=an(B,ze,ee,X(ee));if(a.midpoints&&ce){var Ze=Ci(B,ce,we);Ze&&V.push(Ze)}ce=we;var Ve=JSON.stringify(ze);je!==Ve&&V.push(we),D===0&&(je=Ve)})}function X(H){return!!a.selectedPaths&&a.selectedPaths.indexOf(H)!==-1}return y===g.POINT?V.push(an(B,w,d,X(d))):y===g.POLYGON?w.forEach(function(H,le){K(H,d!==null?d+"."+le:String(le))}):y===g.LINE_STRING?K(w,d):y.indexOf(g.MULTI_PREFIX)===0&&(m=y.replace(g.MULTI_PREFIX,""),w.forEach(function(H,le){var je={type:g.FEATURE,properties:i.properties,geometry:{type:m,coordinates:H}};V=V.concat(Hn(je,a,le))})),V}sn.prototype={clone:function(){return new sn(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,a){return this.clone()._rotateAround(i,a)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var a=i.x-this.x,d=i.y-this.y;return a*a+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,a){return Math.atan2(this.x*a-this.y*i,this.x*i+this.y*a)},_matMult:function(i){var a=i[0]*this.x+i[1]*this.y,d=i[2]*this.x+i[3]*this.y;return this.x=a,this.y=d,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var a=Math.cos(i),d=Math.sin(i),m=a*this.x-d*this.y,v=d*this.x+a*this.y;return this.x=m,this.y=v,this},_rotateAround:function(i,a){var d=Math.cos(i),m=Math.sin(i),v=a.x+d*(this.x-a.x)-m*(this.y-a.y),y=a.y+m*(this.x-a.x)+d*(this.y-a.y);return this.x=v,this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},sn.convert=function(i){return i instanceof sn?i:Array.isArray(i)?new sn(i[0],i[1]):i};var yt={enable:function(i){setTimeout(function(){i.map&&i.map.doubleClickZoom&&i._ctx&&i._ctx.store&&i._ctx.store.getInitialConfigValue&&i._ctx.store.getInitialConfigValue("doubleClickZoom")&&i.map.doubleClickZoom.enable()},0)},disable:function(i){setTimeout(function(){i.map&&i.map.doubleClickZoom&&i.map.doubleClickZoom.disable()},0)}},yn={},Jl={get exports(){return yn},set exports(i){yn=i}},Oi=function(i){if(!i||!i.type)return null;var a=Yl[i.type];if(!a)return null;if(a==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:i}]};if(a==="feature")return{type:"FeatureCollection",features:[i]};if(a==="featurecollection")return i},Yl={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},Hl=Object.freeze({__proto__:null,default:function i(a){switch(a&&a.type||null){case"FeatureCollection":return a.features=a.features.reduce(function(d,m){return d.concat(i(m))},[]),a;case"Feature":return a.geometry?i(a.geometry).map(function(d){var m={type:"Feature",properties:JSON.parse(JSON.stringify(a.properties)),geometry:d};return a.id!==void 0&&(m.id=a.id),m}):[a];case"MultiPoint":return a.coordinates.map(function(d){return{type:"Point",coordinates:d}});case"MultiPolygon":return a.coordinates.map(function(d){return{type:"Polygon",coordinates:d}});case"MultiLineString":return a.coordinates.map(function(d){return{type:"LineString",coordinates:d}});case"GeometryCollection":return a.geometries.map(i).reduce(function(d,m){return d.concat(m)},[]);case"Point":case"Polygon":case"LineString":return[a]}}}),Wl=Oi,Wn=r(Hl),Zl=function(i){return function a(d){return Array.isArray(d)&&d.length&&typeof d[0]=="number"?[d]:d.reduce(function(m,v){return Array.isArray(v)&&Array.isArray(v[0])?m.concat(a(v)):(m.push(v),m)},[])}(i)};Wn instanceof Function||(Wn=Wn.default);var jr={},Xl={get exports(){return jr},set exports(i){jr=i}}.exports=function(i){return new mt(i)};function mt(i){this.value=i}function Ii(i,a,d){var m=[],v=[],y=!0;return function w(B){var V=d?Li(B):B,K={},X=!0,H={node:V,node_:B,path:[].concat(m),parent:v[v.length-1],parents:v,key:m.slice(-1)[0],isRoot:m.length===0,level:m.length,circular:null,update:function(ce,ze){H.isRoot||(H.parent.node[H.key]=ce),H.node=ce,ze&&(X=!1)},delete:function(ce){delete H.parent.node[H.key],ce&&(X=!1)},remove:function(ce){Mi(H.parent.node)?H.parent.node.splice(H.key,1):delete H.parent.node[H.key],ce&&(X=!1)},keys:null,before:function(ce){K.before=ce},after:function(ce){K.after=ce},pre:function(ce){K.pre=ce},post:function(ce){K.post=ce},stop:function(){y=!1},block:function(){X=!1}};if(!y)return H;function le(){if(typeof H.node=="object"&&H.node!==null){H.keys&&H.node_===H.node||(H.keys=Zn(H.node)),H.isLeaf=H.keys.length==0;for(var ce=0;ce<v.length;ce++)if(v[ce].node_===B){H.circular=v[ce];break}}else H.isLeaf=!0,H.keys=null;H.notLeaf=!H.isLeaf,H.notRoot=!H.isRoot}le();var je=a.call(H,H.node);return je!==void 0&&H.update&&H.update(je),K.before&&K.before.call(H,H.node),X&&(typeof H.node!="object"||H.node===null||H.circular||(v.push(H),le(),Xn(H.keys,function(ce,ze){m.push(ce),K.pre&&K.pre.call(H,H.node[ce],ce);var D=w(H.node[ce]);d&&Kn.call(H.node,ce)&&(H.node[ce]=D.node),D.isLast=ze==H.keys.length-1,D.isFirst=ze==0,K.post&&K.post.call(H,D),m.pop()}),v.pop()),K.after&&K.after.call(H,H.node)),H}(i).node}function Li(i){if(typeof i=="object"&&i!==null){var a;if(Mi(i))a=[];else if(un(i)==="[object Date]")a=new Date(i.getTime?i.getTime():i);else if(function(v){return un(v)==="[object RegExp]"}(i))a=new RegExp(i);else if(function(v){return un(v)==="[object Error]"}(i))a={message:i.message};else if(function(v){return un(v)==="[object Boolean]"}(i))a=new Boolean(i);else if(function(v){return un(v)==="[object Number]"}(i))a=new Number(i);else if(function(v){return un(v)==="[object String]"}(i))a=new String(i);else if(Object.create&&Object.getPrototypeOf)a=Object.create(Object.getPrototypeOf(i));else if(i.constructor===Object)a={};else{var d=i.constructor&&i.constructor.prototype||i.__proto__||{},m=function(){};m.prototype=d,a=new m}return Xn(Zn(i),function(v){a[v]=i[v]}),a}return i}mt.prototype.get=function(i){for(var a=this.value,d=0;d<i.length;d++){var m=i[d];if(!a||!Kn.call(a,m)){a=void 0;break}a=a[m]}return a},mt.prototype.has=function(i){for(var a=this.value,d=0;d<i.length;d++){var m=i[d];if(!a||!Kn.call(a,m))return!1;a=a[m]}return!0},mt.prototype.set=function(i,a){for(var d=this.value,m=0;m<i.length-1;m++){var v=i[m];Kn.call(d,v)||(d[v]={}),d=d[v]}return d[i[m]]=a,a},mt.prototype.map=function(i){return Ii(this.value,i,!0)},mt.prototype.forEach=function(i){return this.value=Ii(this.value,i,!1),this.value},mt.prototype.reduce=function(i,a){var d=arguments.length===1,m=d?this.value:a;return this.forEach(function(v){this.isRoot&&d||(m=i.call(this,m,v))}),m},mt.prototype.paths=function(){var i=[];return this.forEach(function(a){i.push(this.path)}),i},mt.prototype.nodes=function(){var i=[];return this.forEach(function(a){i.push(this.node)}),i},mt.prototype.clone=function(){var i=[],a=[];return function d(m){for(var v=0;v<i.length;v++)if(i[v]===m)return a[v];if(typeof m=="object"&&m!==null){var y=Li(m);return i.push(m),a.push(y),Xn(Zn(m),function(w){y[w]=d(m[w])}),i.pop(),a.pop(),y}return m}(this.value)};var Zn=Object.keys||function(i){var a=[];for(var d in i)a.push(d);return a};function un(i){return Object.prototype.toString.call(i)}var Mi=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"},Xn=function(i,a){if(i.forEach)return i.forEach(a);for(var d=0;d<i.length;d++)a(i[d],d,i)};Xn(Zn(mt.prototype),function(i){Xl[i]=function(a){var d=[].slice.call(arguments,1),m=new mt(a);return m[i].apply(m,d)}});var Kn=Object.hasOwnProperty||function(i,a){return a in i},Kl=et;function et(i){if(!(this instanceof et))return new et(i);this._bbox=i||[1/0,1/0,-1/0,-1/0],this._valid=!!i}et.prototype.include=function(i){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],i[0]),this._bbox[1]=Math.min(this._bbox[1],i[1]),this._bbox[2]=Math.max(this._bbox[2],i[0]),this._bbox[3]=Math.max(this._bbox[3],i[1]),this},et.prototype.equals=function(i){var a;return a=i instanceof et?i.bbox():i,this._bbox[0]==a[0]&&this._bbox[1]==a[1]&&this._bbox[2]==a[2]&&this._bbox[3]==a[3]},et.prototype.center=function(i){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},et.prototype.union=function(i){var a;return this._valid=!0,a=i instanceof et?i.bbox():i,this._bbox[0]=Math.min(this._bbox[0],a[0]),this._bbox[1]=Math.min(this._bbox[1],a[1]),this._bbox[2]=Math.max(this._bbox[2],a[2]),this._bbox[3]=Math.max(this._bbox[3],a[3]),this},et.prototype.bbox=function(){return this._valid?this._bbox:null},et.prototype.contains=function(i){if(!i)return this._fastContains();if(!this._valid)return null;var a=i[0],d=i[1];return this._bbox[0]<=a&&this._bbox[1]<=d&&this._bbox[2]>=a&&this._bbox[3]>=d},et.prototype.intersect=function(i){return this._valid?(a=i instanceof et?i.bbox():i,!(this._bbox[0]>a[2]||this._bbox[2]<a[0]||this._bbox[3]<a[1]||this._bbox[1]>a[3])):null;var a},et.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var i="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",i)},et.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Ql=function(i){if(!i)return[];var a=Wn(Wl(i)),d=[];return a.features.forEach(function(m){m.geometry&&(d=d.concat(Zl(m.geometry.coordinates)))}),d},$l=jr,es=Kl,Pi={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},ts=Object.keys(Pi);function Br(i){for(var a=es(),d=Ql(i),m=0;m<d.length;m++)a.include(d[m]);return a}Jl.exports=function(i){return Br(i).bbox()},yn.polygon=function(i){return Br(i).polygon()},yn.bboxify=function(i){return $l(i).map(function(a){a&&ts.some(function(d){return!!a[d]&&Pi[d].indexOf(a.type)!==-1})&&(a.bbox=Br(a).bbox(),this.update(a))})};var Qn=-90;function Gr(i,a){var d=Qn,m=90,v=Qn,y=90,w=270,B=-270;i.forEach(function(K){var X=yn(K),H=X[1],le=X[3],je=X[0],ce=X[2];H>d&&(d=H),le<m&&(m=le),le>v&&(v=le),H<y&&(y=H),je<w&&(w=je),ce>B&&(B=ce)});var V=a;return d+V.lat>85&&(V.lat=85-d),v+V.lat>90&&(V.lat=90-v),m+V.lat<-85&&(V.lat=-85-m),y+V.lat<Qn&&(V.lat=Qn-y),w+V.lng<=-270&&(V.lng+=360*Math.ceil(Math.abs(V.lng)/360)),B+V.lng>=270&&(V.lng-=360*Math.ceil(Math.abs(V.lng)/360)),V}function zr(i,a){var d=Gr(i.map(function(m){return m.toGeoJSON()}),a);i.forEach(function(m){var v,y=m.getCoordinates(),w=function(V){var K={lng:V[0]+d.lng,lat:V[1]+d.lat};return[K.lng,K.lat]},B=function(V){return V.map(function(K){return w(K)})};m.type===g.POINT?v=w(y):m.type===g.LINE_STRING||m.type===g.MULTI_POINT?v=y.map(w):m.type===g.POLYGON||m.type===g.MULTI_LINE_STRING?v=y.map(B):m.type===g.MULTI_POLYGON&&(v=y.map(function(V){return V.map(function(K){return B(K)})})),m.incomingCoords(v)})}var Ye={onSetup:function(i){var a=this,d={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:i.featureIds||[]};return this.setSelected(d.initiallySelectedFeatureIds.filter(function(m){return a.getFeature(m)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),d},fireUpdate:function(){this.map.fire(E.UPDATE,{action:L.MOVE,features:this.getSelected().map(function(i){return i.toGeoJSON()})})},fireActionable:function(){var i=this,a=this.getSelected(),d=a.filter(function(B){return i.isInstanceOf("MultiFeature",B)}),m=!1;if(a.length>1){m=!0;var v=a[0].type.replace("Multi","");a.forEach(function(B){B.type.replace("Multi","")!==v&&(m=!1)})}var y=d.length>0,w=a.length>0;this.setActionableState({combineFeatures:m,uncombineFeatures:y,trash:w})},getUniqueIds:function(i){return i.length?i.map(function(a){return a.properties.id}).filter(function(a){return a!==void 0}).reduce(function(a,d){return a.add(d),a},new j).values():[]},stopExtendedInteractions:function(i){i.boxSelectElement&&(i.boxSelectElement.parentNode&&i.boxSelectElement.parentNode.removeChild(i.boxSelectElement),i.boxSelectElement=null),this.map.dragPan.enable(),i.boxSelecting=!1,i.canBoxSelect=!1,i.dragMoving=!1,i.canDragMove=!1},onStop:function(){yt.enable(this)},onMouseMove:function(i){return this.stopExtendedInteractions(i),!0},onMouseOut:function(i){return!i.dragMoving||this.fireUpdate()}};Ye.onTap=Ye.onClick=function(i,a){return Vn(a)?this.clickAnywhere(i,a):zn(T.VERTEX)(a)?this.clickOnVertex(i,a):Ti(a)?this.clickOnFeature(i,a):void 0},Ye.clickAnywhere=function(i){var a=this,d=this.getSelectedIds();d.length&&(this.clearSelectedFeatures(),d.forEach(function(m){return a.doRender(m)})),yt.enable(this),this.stopExtendedInteractions(i)},Ye.clickOnVertex=function(i,a){this.changeMode(k.DIRECT_SELECT,{featureId:a.featureTarget.properties.parent,coordPath:a.featureTarget.properties.coord_path,startPos:a.lngLat}),this.updateUIClasses({mouse:b.MOVE})},Ye.startOnActiveFeature=function(i,a){this.stopExtendedInteractions(i),this.map.dragPan.disable(),this.doRender(a.featureTarget.properties.id),i.canDragMove=!0,i.dragMoveLocation=a.lngLat},Ye.clickOnFeature=function(i,a){var d=this;yt.disable(this),this.stopExtendedInteractions(i);var m=qn(a),v=this.getSelectedIds(),y=a.featureTarget.properties.id,w=this.isSelected(y);if(!m&&w&&this.getFeature(y).type!==g.POINT)return this.changeMode(k.DIRECT_SELECT,{featureId:y});w&&m?(this.deselect(y),this.updateUIClasses({mouse:b.POINTER}),v.length===1&&yt.enable(this)):!w&&m?(this.select(y),this.updateUIClasses({mouse:b.MOVE})):w||m||(v.forEach(function(B){return d.doRender(B)}),this.setSelected(y),this.updateUIClasses({mouse:b.MOVE})),this.doRender(y)},Ye.onMouseDown=function(i,a){return Zt(a)?this.startOnActiveFeature(i,a):this.drawConfig.boxSelect&&ki(a)?this.startBoxSelect(i,a):void 0},Ye.startBoxSelect=function(i,a){this.stopExtendedInteractions(i),this.map.dragPan.disable(),i.boxSelectStartLocation=Ur(a.originalEvent,this.map.getContainer()),i.canBoxSelect=!0},Ye.onTouchStart=function(i,a){if(Zt(a))return this.startOnActiveFeature(i,a)},Ye.onDrag=function(i,a){return i.canDragMove?this.dragMove(i,a):this.drawConfig.boxSelect&&i.canBoxSelect?this.whileBoxSelect(i,a):void 0},Ye.whileBoxSelect=function(i,a){i.boxSelecting=!0,this.updateUIClasses({mouse:b.ADD}),i.boxSelectElement||(i.boxSelectElement=document.createElement("div"),i.boxSelectElement.classList.add(p.BOX_SELECT),this.map.getContainer().appendChild(i.boxSelectElement));var d=Ur(a.originalEvent,this.map.getContainer()),m=Math.min(i.boxSelectStartLocation.x,d.x),v=Math.max(i.boxSelectStartLocation.x,d.x),y=Math.min(i.boxSelectStartLocation.y,d.y),w=Math.max(i.boxSelectStartLocation.y,d.y),B="translate("+m+"px, "+y+"px)";i.boxSelectElement.style.transform=B,i.boxSelectElement.style.WebkitTransform=B,i.boxSelectElement.style.width=v-m+"px",i.boxSelectElement.style.height=w-y+"px"},Ye.dragMove=function(i,a){i.dragMoving=!0,a.originalEvent.stopPropagation();var d={lng:a.lngLat.lng-i.dragMoveLocation.lng,lat:a.lngLat.lat-i.dragMoveLocation.lat};zr(this.getSelected(),d),i.dragMoveLocation=a.lngLat},Ye.onTouchEnd=Ye.onMouseUp=function(i,a){var d=this;if(i.dragMoving)this.fireUpdate();else if(i.boxSelecting){var m=[i.boxSelectStartLocation,Ur(a.originalEvent,this.map.getContainer())],v=this.featuresAt(null,m,"click"),y=this.getUniqueIds(v).filter(function(w){return!d.isSelected(w)});y.length&&(this.select(y),y.forEach(function(w){return d.doRender(w)}),this.updateUIClasses({mouse:b.MOVE}))}this.stopExtendedInteractions(i)},Ye.toDisplayFeatures=function(i,a,d){a.properties.active=this.isSelected(a.properties.id)?O.ACTIVE:O.INACTIVE,d(a),this.fireActionable(),a.properties.active===O.ACTIVE&&a.geometry.type!==g.POINT&&Hn(a).forEach(d)},Ye.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Ye.onCombineFeatures=function(){var i=this.getSelected();if(!(i.length===0||i.length<2)){for(var a=[],d=[],m=i[0].type.replace("Multi",""),v=0;v<i.length;v++){var y=i[v];if(y.type.replace("Multi","")!==m)return;y.type.includes("Multi")?y.getCoordinates().forEach(function(B){a.push(B)}):a.push(y.getCoordinates()),d.push(y.toGeoJSON())}if(d.length>1){var w=this.newFeature({type:g.FEATURE,properties:d[0].properties,geometry:{type:"Multi"+m,coordinates:a}});this.addFeature(w),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([w.id]),this.map.fire(E.COMBINE_FEATURES,{createdFeatures:[w.toGeoJSON()],deletedFeatures:d})}this.fireActionable()}},Ye.onUncombineFeatures=function(){var i=this,a=this.getSelected();if(a.length!==0){for(var d=[],m=[],v=function(w){var B=a[w];i.isInstanceOf("MultiFeature",B)&&(B.getFeatures().forEach(function(V){i.addFeature(V),V.properties=B.properties,d.push(V.toGeoJSON()),i.select([V.id])}),i.deleteFeature(B.id,{silent:!0}),m.push(B.toGeoJSON()))},y=0;y<a.length;y++)v(y);d.length>1&&this.map.fire(E.UNCOMBINE_FEATURES,{createdFeatures:d,deletedFeatures:m}),this.fireActionable()}};var xi=zn(T.VERTEX),ns=zn(T.MIDPOINT),Ut={fireUpdate:function(){this.map.fire(E.UPDATE,{action:L.CHANGE_COORDINATES,features:this.getSelected().map(function(i){return i.toGeoJSON()})})},fireActionable:function(i){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:i.selectedCoordPaths.length>0})},startDragging:function(i,a){this.map.dragPan.disable(),i.canDragMove=!0,i.dragMoveLocation=a.lngLat},stopDragging:function(i){this.map.dragPan.enable(),i.dragMoving=!1,i.canDragMove=!1,i.dragMoveLocation=null},onVertex:function(i,a){this.startDragging(i,a);var d=a.featureTarget.properties,m=i.selectedCoordPaths.indexOf(d.coord_path);qn(a)||m!==-1?qn(a)&&m===-1&&i.selectedCoordPaths.push(d.coord_path):i.selectedCoordPaths=[d.coord_path];var v=this.pathsToCoordinates(i.featureId,i.selectedCoordPaths);this.setSelectedCoordinates(v)},onMidpoint:function(i,a){this.startDragging(i,a);var d=a.featureTarget.properties;i.feature.addCoordinate(d.coord_path,d.lng,d.lat),this.fireUpdate(),i.selectedCoordPaths=[d.coord_path]},pathsToCoordinates:function(i,a){return a.map(function(d){return{feature_id:i,coord_path:d}})},onFeature:function(i,a){i.selectedCoordPaths.length===0?this.startDragging(i,a):this.stopDragging(i)},dragFeature:function(i,a,d){zr(this.getSelected(),d),i.dragMoveLocation=a.lngLat},dragVertex:function(i,a,d){for(var m=i.selectedCoordPaths.map(function(B){return i.feature.getCoordinate(B)}),v=Gr(m.map(function(B){return{type:g.FEATURE,properties:{},geometry:{type:g.POINT,coordinates:B}}}),d),y=0;y<m.length;y++){var w=m[y];i.feature.updateCoordinate(i.selectedCoordPaths[y],w[0]+v.lng,w[1]+v.lat)}},clickNoTarget:function(){this.changeMode(k.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(k.SIMPLE_SELECT)},clickActiveFeature:function(i){i.selectedCoordPaths=[],this.clearSelectedCoordinates(),i.feature.changed()},onSetup:function(i){var a=i.featureId,d=this.getFeature(a);if(!d)throw new Error("You must provide a featureId to enter direct_select mode");if(d.type===g.POINT)throw new TypeError("direct_select mode doesn't handle point features");var m={featureId:a,feature:d,dragMoveLocation:i.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:i.coordPath?[i.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(a,m.selectedCoordPaths)),this.setSelected(a),yt.disable(this),this.setActionableState({trash:!0}),m},onStop:function(){yt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(i,a,d){i.featureId===a.properties.id?(a.properties.active=O.ACTIVE,d(a),Hn(a,{map:this.map,midpoints:!0,selectedPaths:i.selectedCoordPaths}).forEach(d)):(a.properties.active=O.INACTIVE,d(a)),this.fireActionable(i)},onTrash:function(i){i.selectedCoordPaths.sort(function(a,d){return d.localeCompare(a,"en",{numeric:!0})}).forEach(function(a){return i.feature.removeCoordinate(a)}),this.fireUpdate(),i.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(i),i.feature.isValid()===!1&&(this.deleteFeature([i.featureId]),this.changeMode(k.SIMPLE_SELECT,{}))},onMouseMove:function(i,a){var d=Zt(a),m=xi(a),v=i.selectedCoordPaths.length===0;return d&&v||m&&!v?this.updateUIClasses({mouse:b.MOVE}):this.updateUIClasses({mouse:b.NONE}),this.stopDragging(i),!0},onMouseOut:function(i){return i.dragMoving&&this.fireUpdate(),!0}};Ut.onTouchStart=Ut.onMouseDown=function(i,a){return xi(a)?this.onVertex(i,a):Zt(a)?this.onFeature(i,a):ns(a)?this.onMidpoint(i,a):void 0},Ut.onDrag=function(i,a){if(i.canDragMove===!0){i.dragMoving=!0,a.originalEvent.stopPropagation();var d={lng:a.lngLat.lng-i.dragMoveLocation.lng,lat:a.lngLat.lat-i.dragMoveLocation.lat};i.selectedCoordPaths.length>0?this.dragVertex(i,a,d):this.dragFeature(i,a,d),i.dragMoveLocation=a.lngLat}},Ut.onClick=function(i,a){return Vn(a)?this.clickNoTarget(i,a):Zt(a)?this.clickActiveFeature(i,a):Dr(a)?this.clickInactive(i,a):void this.stopDragging(i)},Ut.onTap=function(i,a){return Vn(a)?this.clickNoTarget(i,a):Zt(a)?this.clickActiveFeature(i,a):Dr(a)?this.clickInactive(i,a):void 0},Ut.onTouchEnd=Ut.onMouseUp=function(i){i.dragMoving&&this.fireUpdate(),this.stopDragging(i)};var St={};function $n(i,a){return!!i.lngLat&&i.lngLat.lng===a[0]&&i.lngLat.lat===a[1]}St.onSetup=function(){var i=this.newFeature({type:g.FEATURE,properties:{},geometry:{type:g.POINT,coordinates:[]}});return this.addFeature(i),this.clearSelectedFeatures(),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(h.POINT),this.setActionableState({trash:!0}),{point:i}},St.stopDrawingAndRemove=function(i){this.deleteFeature([i.point.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT)},St.onTap=St.onClick=function(i,a){this.updateUIClasses({mouse:b.MOVE}),i.point.updateCoordinate("",a.lngLat.lng,a.lngLat.lat),this.map.fire(E.CREATE,{features:[i.point.toGeoJSON()]}),this.changeMode(k.SIMPLE_SELECT,{featureIds:[i.point.id]})},St.onStop=function(i){this.activateUIButton(),i.point.getCoordinate().length||this.deleteFeature([i.point.id],{silent:!0})},St.toDisplayFeatures=function(i,a,d){var m=a.properties.id===i.point.id;if(a.properties.active=m?O.ACTIVE:O.INACTIVE,!m)return d(a)},St.onTrash=St.stopDrawingAndRemove,St.onKeyUp=function(i,a){if(Jn(a)||Yn(a))return this.stopDrawingAndRemove(i,a)};var Xt={onSetup:function(){var i=this.newFeature({type:g.FEATURE,properties:{},geometry:{type:g.POLYGON,coordinates:[[]]}});return this.addFeature(i),this.clearSelectedFeatures(),yt.disable(this),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(h.POLYGON),this.setActionableState({trash:!0}),{polygon:i,currentVertexPosition:0}},clickAnywhere:function(i,a){if(i.currentVertexPosition>0&&$n(a,i.polygon.coordinates[0][i.currentVertexPosition-1]))return this.changeMode(k.SIMPLE_SELECT,{featureIds:[i.polygon.id]});this.updateUIClasses({mouse:b.ADD}),i.polygon.updateCoordinate("0."+i.currentVertexPosition,a.lngLat.lng,a.lngLat.lat),i.currentVertexPosition++,i.polygon.updateCoordinate("0."+i.currentVertexPosition,a.lngLat.lng,a.lngLat.lat)},clickOnVertex:function(i){return this.changeMode(k.SIMPLE_SELECT,{featureIds:[i.polygon.id]})},onMouseMove:function(i,a){i.polygon.updateCoordinate("0."+i.currentVertexPosition,a.lngLat.lng,a.lngLat.lat),_n(a)&&this.updateUIClasses({mouse:b.POINTER})}};Xt.onTap=Xt.onClick=function(i,a){return _n(a)?this.clickOnVertex(i,a):this.clickAnywhere(i,a)},Xt.onKeyUp=function(i,a){Jn(a)?(this.deleteFeature([i.polygon.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT)):Yn(a)&&this.changeMode(k.SIMPLE_SELECT,{featureIds:[i.polygon.id]})},Xt.onStop=function(i){this.updateUIClasses({mouse:b.NONE}),yt.enable(this),this.activateUIButton(),this.getFeature(i.polygon.id)!==void 0&&(i.polygon.removeCoordinate("0."+i.currentVertexPosition),i.polygon.isValid()?this.map.fire(E.CREATE,{features:[i.polygon.toGeoJSON()]}):(this.deleteFeature([i.polygon.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT,{},{silent:!0})))},Xt.toDisplayFeatures=function(i,a,d){var m=a.properties.id===i.polygon.id;if(a.properties.active=m?O.ACTIVE:O.INACTIVE,!m)return d(a);if(a.geometry.coordinates.length!==0){var v=a.geometry.coordinates[0].length;if(!(v<3)){if(a.properties.meta=T.FEATURE,d(an(i.polygon.id,a.geometry.coordinates[0][0],"0.0",!1)),v>3){var y=a.geometry.coordinates[0].length-3;d(an(i.polygon.id,a.geometry.coordinates[0][y],"0."+y,!1))}if(v<=4){var w=[[a.geometry.coordinates[0][0][0],a.geometry.coordinates[0][0][1]],[a.geometry.coordinates[0][1][0],a.geometry.coordinates[0][1][1]]];if(d({type:g.FEATURE,properties:a.properties,geometry:{coordinates:w,type:g.LINE_STRING}}),v===3)return}return d(a)}}},Xt.onTrash=function(i){this.deleteFeature([i.polygon.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT)};var Kt={onSetup:function(i){var a,d,m=(i=i||{}).featureId,v="forward";if(m){if(!(a=this.getFeature(m)))throw new Error("Could not find a feature with the provided featureId");var y=i.from;if(y&&y.type==="Feature"&&y.geometry&&y.geometry.type==="Point"&&(y=y.geometry),y&&y.type==="Point"&&y.coordinates&&y.coordinates.length===2&&(y=y.coordinates),!y||!Array.isArray(y))throw new Error("Please use the `from` property to indicate which point to continue the line from");var w=a.coordinates.length-1;if(a.coordinates[w][0]===y[0]&&a.coordinates[w][1]===y[1])d=w+1,a.addCoordinate.apply(a,[d].concat(a.coordinates[w]));else{if(a.coordinates[0][0]!==y[0]||a.coordinates[0][1]!==y[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");v="backwards",d=0,a.addCoordinate.apply(a,[d].concat(a.coordinates[0]))}}else a=this.newFeature({type:g.FEATURE,properties:{},geometry:{type:g.LINE_STRING,coordinates:[]}}),d=0,this.addFeature(a);return this.clearSelectedFeatures(),yt.disable(this),this.updateUIClasses({mouse:b.ADD}),this.activateUIButton(h.LINE),this.setActionableState({trash:!0}),{line:a,currentVertexPosition:d,direction:v}},clickAnywhere:function(i,a){if(i.currentVertexPosition>0&&$n(a,i.line.coordinates[i.currentVertexPosition-1])||i.direction==="backwards"&&$n(a,i.line.coordinates[i.currentVertexPosition+1]))return this.changeMode(k.SIMPLE_SELECT,{featureIds:[i.line.id]});this.updateUIClasses({mouse:b.ADD}),i.line.updateCoordinate(i.currentVertexPosition,a.lngLat.lng,a.lngLat.lat),i.direction==="forward"?(i.currentVertexPosition++,i.line.updateCoordinate(i.currentVertexPosition,a.lngLat.lng,a.lngLat.lat)):i.line.addCoordinate(0,a.lngLat.lng,a.lngLat.lat)},clickOnVertex:function(i){return this.changeMode(k.SIMPLE_SELECT,{featureIds:[i.line.id]})},onMouseMove:function(i,a){i.line.updateCoordinate(i.currentVertexPosition,a.lngLat.lng,a.lngLat.lat),_n(a)&&this.updateUIClasses({mouse:b.POINTER})}};Kt.onTap=Kt.onClick=function(i,a){if(_n(a))return this.clickOnVertex(i,a);this.clickAnywhere(i,a)},Kt.onKeyUp=function(i,a){Yn(a)?this.changeMode(k.SIMPLE_SELECT,{featureIds:[i.line.id]}):Jn(a)&&(this.deleteFeature([i.line.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT))},Kt.onStop=function(i){yt.enable(this),this.activateUIButton(),this.getFeature(i.line.id)!==void 0&&(i.line.removeCoordinate(""+i.currentVertexPosition),i.line.isValid()?this.map.fire(E.CREATE,{features:[i.line.toGeoJSON()]}):(this.deleteFeature([i.line.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT,{},{silent:!0})))},Kt.onTrash=function(i){this.deleteFeature([i.line.id],{silent:!0}),this.changeMode(k.SIMPLE_SELECT)},Kt.toDisplayFeatures=function(i,a,d){var m=a.properties.id===i.line.id;if(a.properties.active=m?O.ACTIVE:O.INACTIVE,!m)return d(a);a.geometry.coordinates.length<2||(a.properties.meta=T.FEATURE,d(an(i.line.id,a.geometry.coordinates[i.direction==="forward"?a.geometry.coordinates.length-2:1],""+(i.direction==="forward"?a.geometry.coordinates.length-2:1),!1)),d(a))};var Ai={simple_select:Ye,direct_select:Ut,draw_point:St,draw_polygon:Xt,draw_line_string:Kt},rs={defaultMode:k.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Si,modes:Ai,controls:{},userProperties:!1},is={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},os={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Ni(i,a){return i.map(function(d){return d.source?d:Dt(d,{id:d.id+"."+a,source:a==="hot"?_.HOT:_.COLD})})}var er={};(function(i,a){var d="__lodash_hash_undefined__",m=9007199254740991,v="[object Arguments]",y="[object Array]",w="[object Boolean]",B="[object Date]",V="[object Error]",K="[object Function]",X="[object Map]",H="[object Number]",le="[object Object]",je="[object Promise]",ce="[object RegExp]",ze="[object Set]",D="[object String]",ee="[object Symbol]",we="[object WeakMap]",Ze="[object ArrayBuffer]",Ve="[object DataView]",Vr=/^\[object .+?Constructor\]$/,fs=/^(?:0|[1-9]\d*)$/,Re={};Re["[object Float32Array]"]=Re["[object Float64Array]"]=Re["[object Int8Array]"]=Re["[object Int16Array]"]=Re["[object Int32Array]"]=Re["[object Uint8Array]"]=Re["[object Uint8ClampedArray]"]=Re["[object Uint16Array]"]=Re["[object Uint32Array]"]=!0,Re[v]=Re[y]=Re[Ze]=Re[w]=Re[Ve]=Re[B]=Re[V]=Re[K]=Re[X]=Re[H]=Re[le]=Re[ce]=Re[ze]=Re[D]=Re[we]=!1;var Fi=typeof In=="object"&&In&&In.Object===Object&&In,cs=typeof self=="object"&&self&&self.Object===Object&&self,Lt=Fi||cs||Function("return this")(),Di=a&&!a.nodeType&&a,Ui=Di&&i&&!i.nodeType&&i,ji=Ui&&Ui.exports===Di,qr=ji&&Fi.process,Bi=function(){try{return qr&&qr.binding&&qr.binding("util")}catch{}}(),Gi=Bi&&Bi.isTypedArray;function ds(S,P){for(var Z=-1,ie=S==null?0:S.length;++Z<ie;)if(P(S[Z],Z,S))return!0;return!1}function hs(S){var P=-1,Z=Array(S.size);return S.forEach(function(ie,Fe){Z[++P]=[Fe,ie]}),Z}function ps(S){var P=-1,Z=Array(S.size);return S.forEach(function(ie){Z[++P]=ie}),Z}var zi,Vi,qi,gs=Array.prototype,ms=Function.prototype,nr=Object.prototype,Jr=Lt["__core-js_shared__"],Ji=ms.toString,kt=nr.hasOwnProperty,Yi=(zi=/[^.]+$/.exec(Jr&&Jr.keys&&Jr.keys.IE_PROTO||""))?"Symbol(src)_1."+zi:"",Hi=nr.toString,bs=RegExp("^"+Ji.call(kt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wi=ji?Lt.Buffer:void 0,rr=Lt.Symbol,Zi=Lt.Uint8Array,Xi=nr.propertyIsEnumerable,vs=gs.splice,Qt=rr?rr.toStringTag:void 0,Ki=Object.getOwnPropertySymbols,_s=Wi?Wi.isBuffer:void 0,ys=(Vi=Object.keys,qi=Object,function(S){return Vi(qi(S))}),Yr=fn(Lt,"DataView"),En=fn(Lt,"Map"),Hr=fn(Lt,"Promise"),Wr=fn(Lt,"Set"),Zr=fn(Lt,"WeakMap"),wn=fn(Object,"create"),Es=tn(Yr),ws=tn(En),Ss=tn(Hr),ks=tn(Wr),Ts=tn(Zr),Qi=rr?rr.prototype:void 0,Xr=Qi?Qi.valueOf:void 0;function $t(S){var P=-1,Z=S==null?0:S.length;for(this.clear();++P<Z;){var ie=S[P];this.set(ie[0],ie[1])}}function Mt(S){var P=-1,Z=S==null?0:S.length;for(this.clear();++P<Z;){var ie=S[P];this.set(ie[0],ie[1])}}function en(S){var P=-1,Z=S==null?0:S.length;for(this.clear();++P<Z;){var ie=S[P];this.set(ie[0],ie[1])}}function ir(S){var P=-1,Z=S==null?0:S.length;for(this.__data__=new en;++P<Z;)this.add(S[P])}function jt(S){var P=this.__data__=new Mt(S);this.size=P.size}function Cs(S,P){var Z=sr(S),ie=!Z&&Ps(S),Fe=!Z&&!ie&&Kr(S),_e=!Z&&!ie&&!Fe&&so(S),Ge=Z||ie||Fe||_e,qe=Ge?function(We,Tt){for(var Pt=-1,tt=Array(We);++Pt<We;)tt[Pt]=Tt(Pt);return tt}(S.length,String):[],Et=qe.length;for(var He in S)!P&&!kt.call(S,He)||Ge&&(He=="length"||Fe&&(He=="offset"||He=="parent")||_e&&(He=="buffer"||He=="byteLength"||He=="byteOffset")||Ms(He,Et))||qe.push(He);return qe}function or(S,P){for(var Z=S.length;Z--;)if(ro(S[Z][0],P))return Z;return-1}function Sn(S){return S==null?S===void 0?"[object Undefined]":"[object Null]":Qt&&Qt in Object(S)?function(P){var Z=kt.call(P,Qt),ie=P[Qt];try{P[Qt]=void 0;var Fe=!0}catch{}var _e=Hi.call(P);return Fe&&(Z?P[Qt]=ie:delete P[Qt]),_e}(S):function(P){return Hi.call(P)}(S)}function $i(S){return kn(S)&&Sn(S)==v}function eo(S,P,Z,ie,Fe){return S===P||(S==null||P==null||!kn(S)&&!kn(P)?S!=S&&P!=P:function(_e,Ge,qe,Et,He,We){var Tt=sr(_e),Pt=sr(Ge),tt=Tt?y:Bt(_e),xt=Pt?y:Bt(Ge),cn=(tt=tt==v?le:tt)==le,ar=(xt=xt==v?le:xt)==le,dn=tt==xt;if(dn&&Kr(_e)){if(!Kr(Ge))return!1;Tt=!0,cn=!1}if(dn&&!cn)return We||(We=new jt),Tt||so(_e)?to(_e,Ge,qe,Et,He,We):function(Te,Se,ur,Gt,Qr,bt,At){switch(ur){case Ve:if(Te.byteLength!=Se.byteLength||Te.byteOffset!=Se.byteOffset)return!1;Te=Te.buffer,Se=Se.buffer;case Ze:return!(Te.byteLength!=Se.byteLength||!bt(new Zi(Te),new Zi(Se)));case w:case B:case H:return ro(+Te,+Se);case V:return Te.name==Se.name&&Te.message==Se.message;case ce:case D:return Te==Se+"";case X:var zt=hs;case ze:var Cn=1&Gt;if(zt||(zt=ps),Te.size!=Se.size&&!Cn)return!1;var fr=At.get(Te);if(fr)return fr==Se;Gt|=2,At.set(Te,Se);var hn=to(zt(Te),zt(Se),Gt,Qr,bt,At);return At.delete(Te),hn;case ee:if(Xr)return Xr.call(Te)==Xr.call(Se)}return!1}(_e,Ge,tt,qe,Et,He,We);if(!(1&qe)){var Tn=cn&&kt.call(_e,"__wrapped__"),ao=ar&&kt.call(Ge,"__wrapped__");if(Tn||ao){var As=Tn?_e.value():_e,Ns=ao?Ge.value():Ge;return We||(We=new jt),He(As,Ns,qe,Et,We)}}return dn?(We||(We=new jt),function(Te,Se,ur,Gt,Qr,bt){var At=1&ur,zt=no(Te),Cn=zt.length,fr=no(Se).length;if(Cn!=fr&&!At)return!1;for(var hn=Cn;hn--;){var nn=zt[hn];if(!(At?nn in Se:kt.call(Se,nn)))return!1}var uo=bt.get(Te);if(uo&&bt.get(Se))return uo==Se;var cr=!0;bt.set(Te,Se),bt.set(Se,Te);for(var $r=At;++hn<Cn;){var dr=Te[nn=zt[hn]],hr=Se[nn];if(Gt)var fo=At?Gt(hr,dr,nn,Se,Te,bt):Gt(dr,hr,nn,Te,Se,bt);if(!(fo===void 0?dr===hr||Qr(dr,hr,ur,Gt,bt):fo)){cr=!1;break}$r||($r=nn=="constructor")}if(cr&&!$r){var pr=Te.constructor,gr=Se.constructor;pr==gr||!("constructor"in Te)||!("constructor"in Se)||typeof pr=="function"&&pr instanceof pr&&typeof gr=="function"&&gr instanceof gr||(cr=!1)}return bt.delete(Te),bt.delete(Se),cr}(_e,Ge,qe,Et,He,We)):!1}(S,P,Z,ie,eo,Fe))}function Os(S){return!(!lo(S)||function(P){return!!Yi&&Yi in P}(S))&&(io(S)?bs:Vr).test(tn(S))}function Is(S){if(Z=(P=S)&&P.constructor,ie=typeof Z=="function"&&Z.prototype||nr,P!==ie)return ys(S);var P,Z,ie,Fe=[];for(var _e in Object(S))kt.call(S,_e)&&_e!="constructor"&&Fe.push(_e);return Fe}function to(S,P,Z,ie,Fe,_e){var Ge=1&Z,qe=S.length,Et=P.length;if(qe!=Et&&!(Ge&&Et>qe))return!1;var He=_e.get(S);if(He&&_e.get(P))return He==P;var We=-1,Tt=!0,Pt=2&Z?new ir:void 0;for(_e.set(S,P),_e.set(P,S);++We<qe;){var tt=S[We],xt=P[We];if(ie)var cn=Ge?ie(xt,tt,We,P,S,_e):ie(tt,xt,We,S,P,_e);if(cn!==void 0){if(cn)continue;Tt=!1;break}if(Pt){if(!ds(P,function(ar,dn){if(Tn=dn,!Pt.has(Tn)&&(tt===ar||Fe(tt,ar,Z,ie,_e)))return Pt.push(dn);var Tn})){Tt=!1;break}}else if(tt!==xt&&!Fe(tt,xt,Z,ie,_e)){Tt=!1;break}}return _e.delete(S),_e.delete(P),Tt}function no(S){return function(P,Z,ie){var Fe=Z(P);return sr(P)?Fe:function(_e,Ge){for(var qe=-1,Et=Ge.length,He=_e.length;++qe<Et;)_e[He+qe]=Ge[qe];return _e}(Fe,ie(P))}(S,xs,Ls)}function lr(S,P){var Z,ie,Fe=S.__data__;return((ie=typeof(Z=P))=="string"||ie=="number"||ie=="symbol"||ie=="boolean"?Z!=="__proto__":Z===null)?Fe[typeof P=="string"?"string":"hash"]:Fe.map}function fn(S,P){var Z=function(ie,Fe){return ie==null?void 0:ie[Fe]}(S,P);return Os(Z)?Z:void 0}$t.prototype.clear=function(){this.__data__=wn?wn(null):{},this.size=0},$t.prototype.delete=function(S){var P=this.has(S)&&delete this.__data__[S];return this.size-=P?1:0,P},$t.prototype.get=function(S){var P=this.__data__;if(wn){var Z=P[S];return Z===d?void 0:Z}return kt.call(P,S)?P[S]:void 0},$t.prototype.has=function(S){var P=this.__data__;return wn?P[S]!==void 0:kt.call(P,S)},$t.prototype.set=function(S,P){var Z=this.__data__;return this.size+=this.has(S)?0:1,Z[S]=wn&&P===void 0?d:P,this},Mt.prototype.clear=function(){this.__data__=[],this.size=0},Mt.prototype.delete=function(S){var P=this.__data__,Z=or(P,S);return!(Z<0)&&(Z==P.length-1?P.pop():vs.call(P,Z,1),--this.size,!0)},Mt.prototype.get=function(S){var P=this.__data__,Z=or(P,S);return Z<0?void 0:P[Z][1]},Mt.prototype.has=function(S){return or(this.__data__,S)>-1},Mt.prototype.set=function(S,P){var Z=this.__data__,ie=or(Z,S);return ie<0?(++this.size,Z.push([S,P])):Z[ie][1]=P,this},en.prototype.clear=function(){this.size=0,this.__data__={hash:new $t,map:new(En||Mt),string:new $t}},en.prototype.delete=function(S){var P=lr(this,S).delete(S);return this.size-=P?1:0,P},en.prototype.get=function(S){return lr(this,S).get(S)},en.prototype.has=function(S){return lr(this,S).has(S)},en.prototype.set=function(S,P){var Z=lr(this,S),ie=Z.size;return Z.set(S,P),this.size+=Z.size==ie?0:1,this},ir.prototype.add=ir.prototype.push=function(S){return this.__data__.set(S,d),this},ir.prototype.has=function(S){return this.__data__.has(S)},jt.prototype.clear=function(){this.__data__=new Mt,this.size=0},jt.prototype.delete=function(S){var P=this.__data__,Z=P.delete(S);return this.size=P.size,Z},jt.prototype.get=function(S){return this.__data__.get(S)},jt.prototype.has=function(S){return this.__data__.has(S)},jt.prototype.set=function(S,P){var Z=this.__data__;if(Z instanceof Mt){var ie=Z.__data__;if(!En||ie.length<199)return ie.push([S,P]),this.size=++Z.size,this;Z=this.__data__=new en(ie)}return Z.set(S,P),this.size=Z.size,this};var Ls=Ki?function(S){return S==null?[]:(S=Object(S),function(P,Z){for(var ie=-1,Fe=P==null?0:P.length,_e=0,Ge=[];++ie<Fe;){var qe=P[ie];Z(qe,ie,P)&&(Ge[_e++]=qe)}return Ge}(Ki(S),function(P){return Xi.call(S,P)}))}:function(){return[]},Bt=Sn;function Ms(S,P){return!!(P=P??m)&&(typeof S=="number"||fs.test(S))&&S>-1&&S%1==0&&S<P}function tn(S){if(S!=null){try{return Ji.call(S)}catch{}try{return S+""}catch{}}return""}function ro(S,P){return S===P||S!=S&&P!=P}(Yr&&Bt(new Yr(new ArrayBuffer(1)))!=Ve||En&&Bt(new En)!=X||Hr&&Bt(Hr.resolve())!=je||Wr&&Bt(new Wr)!=ze||Zr&&Bt(new Zr)!=we)&&(Bt=function(S){var P=Sn(S),Z=P==le?S.constructor:void 0,ie=Z?tn(Z):"";if(ie)switch(ie){case Es:return Ve;case ws:return X;case Ss:return je;case ks:return ze;case Ts:return we}return P});var Ps=$i(function(){return arguments}())?$i:function(S){return kn(S)&&kt.call(S,"callee")&&!Xi.call(S,"callee")},sr=Array.isArray,Kr=_s||function(){return!1};function io(S){if(!lo(S))return!1;var P=Sn(S);return P==K||P=="[object GeneratorFunction]"||P=="[object AsyncFunction]"||P=="[object Proxy]"}function oo(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=m}function lo(S){var P=typeof S;return S!=null&&(P=="object"||P=="function")}function kn(S){return S!=null&&typeof S=="object"}var so=Gi?function(S){return function(P){return S(P)}}(Gi):function(S){return kn(S)&&oo(S.length)&&!!Re[Sn(S)]};function xs(S){return(P=S)!=null&&oo(P.length)&&!io(P)?Cs(S):Is(S);var P}i.exports=function(S,P){return eo(S,P)}})({get exports(){return er},set exports(i){er=i}},er);var ls=er;function Ri(i,a){return i.length===a.length&&JSON.stringify(i.map(function(d){return d}).sort())===JSON.stringify(a.map(function(d){return d}).sort())}var ss={Polygon:ut,LineString:ue,Point:I,MultiPolygon:Ke,MultiLineString:Ke,MultiPoint:Ke},as=Object.freeze({__proto__:null,CommonSelectors:Vl,constrainFeatureMovement:Gr,createMidPoint:Ci,createSupplementaryPoints:Hn,createVertex:an,doubleClickZoom:yt,euclideanDistance:ne,featuresAt:fe,getFeatureAtAndSetCursors:G,isClick:Ae,isEventAtCoordinates:$n,isTap:Le,mapEventToBoundingBox:de,ModeHandler:t,moveFeatures:zr,sortFeatures:re,stringSetsAreEqual:Ri,StringSet:j,theme:Si,toDenseArray:vn}),us=function(i,a){var d={options:i=function(v){v===void 0&&(v={});var y=Dt(v);return v.controls||(y.controls={}),v.displayControlsDefault===!1?y.controls=Dt(os,v.controls):y.controls=Dt(is,v.controls),(y=Dt(rs,y)).styles=Ni(y.styles,"cold").concat(Ni(y.styles,"hot")),y}(i)};a=function(v,y){return y.modes=k,y.getFeatureIdsAt=function(w){return fe.click({point:w},null,v).map(function(B){return B.properties.id})},y.getSelectedIds=function(){return v.store.getSelectedIds()},y.getSelected=function(){return{type:g.FEATURE_COLLECTION,features:v.store.getSelectedIds().map(function(w){return v.store.get(w)}).map(function(w){return w.toGeoJSON()})}},y.getSelectedPoints=function(){return{type:g.FEATURE_COLLECTION,features:v.store.getSelectedCoordinates().map(function(w){return{type:g.FEATURE,properties:{},geometry:{type:g.POINT,coordinates:w.coordinates}}})}},y.set=function(w){if(w.type===void 0||w.type!==g.FEATURE_COLLECTION||!Array.isArray(w.features))throw new Error("Invalid FeatureCollection");var B=v.store.createRenderBatch(),V=v.store.getAllIds().slice(),K=y.add(w),X=new j(K);return(V=V.filter(function(H){return!X.has(H)})).length&&y.delete(V),B(),K},y.add=function(w){var B=JSON.parse(JSON.stringify(Oi(w))).features.map(function(V){if(V.id=V.id||ke(),V.geometry===null)throw new Error("Invalid geometry: null");if(v.store.get(V.id)===void 0||v.store.get(V.id).type!==V.geometry.type){var K=ss[V.geometry.type];if(K===void 0)throw new Error("Invalid geometry type: "+V.geometry.type+".");var X=new K(v,V);v.store.add(X)}else{var H=v.store.get(V.id);H.properties=V.properties,ls(H.getCoordinates(),V.geometry.coordinates)||H.incomingCoords(V.geometry.coordinates)}return V.id});return v.store.render(),B},y.get=function(w){var B=v.store.get(w);if(B)return B.toGeoJSON()},y.getAll=function(){return{type:g.FEATURE_COLLECTION,features:v.store.getAll().map(function(w){return w.toGeoJSON()})}},y.delete=function(w){return v.store.delete(w,{silent:!0}),y.getMode()!==k.DIRECT_SELECT||v.store.getSelectedIds().length?v.store.render():v.events.changeMode(k.SIMPLE_SELECT,void 0,{silent:!0}),y},y.deleteAll=function(){return v.store.delete(v.store.getAllIds(),{silent:!0}),y.getMode()===k.DIRECT_SELECT?v.events.changeMode(k.SIMPLE_SELECT,void 0,{silent:!0}):v.store.render(),y},y.changeMode=function(w,B){return B===void 0&&(B={}),w===k.SIMPLE_SELECT&&y.getMode()===k.SIMPLE_SELECT?(Ri(B.featureIds||[],v.store.getSelectedIds())||(v.store.setSelected(B.featureIds,{silent:!0}),v.store.render()),y):(w===k.DIRECT_SELECT&&y.getMode()===k.DIRECT_SELECT&&B.featureId===v.store.getSelectedIds()[0]||v.events.changeMode(w,B,{silent:!0}),y)},y.getMode=function(){return v.events.getMode()},y.trash=function(){return v.events.trash({silent:!0}),y},y.combineFeatures=function(){return v.events.combineFeatures({silent:!0}),y},y.uncombineFeatures=function(){return v.events.uncombineFeatures({silent:!0}),y},y.setFeatureProperty=function(w,B,V){return v.store.setFeatureProperty(w,B,V),y},y}(d,a),d.api=a;var m=zl(d);return a.onAdd=m.onAdd,a.onRemove=m.onRemove,a.types=h,a.options=i,a};function tr(i){us(i,this)}return tr.modes=Ai,tr.constants=U,tr.lib=as,tr})})(nf);const dl=Gs(di),ct={area:"#e41a1c",route:"#377eb8",crossing:"#4daf4a",other:"#984ea3",draggablePoint:"black",hovering:"black"};let ye;const xl=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});xl.decode();let Er=new Uint8Array;function An(){return Er.byteLength===0&&(Er=new Uint8Array(ye.memory.buffer)),Er}function gn(n,e){return xl.decode(An().subarray(n,n+e))}const Ft=new Array(32).fill(void 0);Ft.push(void 0,null,!0,!1);let Nn=Ft.length;function Nt(n){Nn===Ft.length&&Ft.push(Ft.length+1);const e=Nn;return Nn=Ft[e],Ft[e]=n,e}function Ue(n){return Ft[n]}function rf(n){n<36||(Ft[n]=Nn,Nn=n)}function Al(n){const e=Ue(n);return rf(n),e}function ni(n){return n==null}let wr=new Float64Array;function of(){return wr.byteLength===0&&(wr=new Float64Array(ye.memory.buffer)),wr}let Sr=new Int32Array;function Qe(){return Sr.byteLength===0&&(Sr=new Int32Array(ye.memory.buffer)),Sr}let Jt=0;const kr=new TextEncoder("utf-8"),lf=typeof kr.encodeInto=="function"?function(n,e){return kr.encodeInto(n,e)}:function(n,e){const t=kr.encode(n);return e.set(t),{read:n.length,written:t.length}};function _r(n,e,t){if(t===void 0){const u=kr.encode(n),c=e(u.length);return An().subarray(c,c+u.length).set(u),Jt=u.length,c}let r=n.length,o=e(r);const l=An();let s=0;for(;s<r;s++){const u=n.charCodeAt(s);if(u>127)break;l[o+s]=u}if(s!==r){s!==0&&(n=n.slice(s)),o=t(o,r,r=s+n.length*3);const u=An().subarray(o+s,o+r),c=lf(n,u);s+=c.written}return Jt=s,o}function hi(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const o=n.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=n.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(n)){const o=n.length;let l="[";o>0&&(l+=hi(n[0]));for(let s=1;s<o;s++)l+=", "+hi(n[s]);return l+="]",l}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}function sf(n,e){const t=e(n.length*1);return An().set(n,t/1),Jt=n.length,t}class Pr{static __wrap(e){const t=Object.create(Pr.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();ye.__wbg_jsroutesnapper_free(e)}constructor(e){try{const l=ye.__wbindgen_add_to_stack_pointer(-16),s=sf(e,ye.__wbindgen_malloc),u=Jt;ye.jsroutesnapper_new(l,s,u);var t=Qe()[l/4+0],r=Qe()[l/4+1],o=Qe()[l/4+2];if(o)throw Al(r);return Pr.__wrap(t)}finally{ye.__wbindgen_add_to_stack_pointer(16)}}setConfig(e){ye.jsroutesnapper_setConfig(this.ptr,Nt(e))}toFinalFeature(){try{const r=ye.__wbindgen_add_to_stack_pointer(-16);ye.jsroutesnapper_toFinalFeature(r,this.ptr);var e=Qe()[r/4+0],t=Qe()[r/4+1];let o;return e!==0&&(o=gn(e,t).slice(),ye.__wbindgen_free(e,t*1)),o}finally{ye.__wbindgen_add_to_stack_pointer(16)}}renderGeojson(){try{const r=ye.__wbindgen_add_to_stack_pointer(-16);ye.jsroutesnapper_renderGeojson(r,this.ptr);var e=Qe()[r/4+0],t=Qe()[r/4+1];return gn(e,t)}finally{ye.__wbindgen_add_to_stack_pointer(16),ye.__wbindgen_free(e,t)}}setSnapMode(e){ye.jsroutesnapper_setSnapMode(this.ptr,e)}onMouseMove(e,t,r){return ye.jsroutesnapper_onMouseMove(this.ptr,e,t,r)!==0}onClick(){ye.jsroutesnapper_onClick(this.ptr)}onDragStart(){return ye.jsroutesnapper_onDragStart(this.ptr)!==0}onMouseUp(){return ye.jsroutesnapper_onMouseUp(this.ptr)!==0}clearState(){ye.jsroutesnapper_clearState(this.ptr)}}async function af(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function uf(){const n={};return n.wbg={},n.wbg.__wbindgen_string_new=function(e,t){const r=gn(e,t);return Nt(r)},n.wbg.__wbindgen_is_object=function(e){const t=Ue(e);return typeof t=="object"&&t!==null},n.wbg.__wbindgen_is_undefined=function(e){return Ue(e)===void 0},n.wbg.__wbindgen_in=function(e,t){return Ue(e)in Ue(t)},n.wbg.__wbindgen_object_drop_ref=function(e){Al(e)},n.wbg.__wbindgen_boolean_get=function(e){const t=Ue(e);return typeof t=="boolean"?t?1:0:2},n.wbg.__wbindgen_error_new=function(e,t){const r=new Error(gn(e,t));return Nt(r)},n.wbg.__wbindgen_jsval_loose_eq=function(e,t){return Ue(e)==Ue(t)},n.wbg.__wbindgen_number_get=function(e,t){const r=Ue(t),o=typeof r=="number"?r:void 0;of()[e/8+1]=ni(o)?0:o,Qe()[e/4+0]=!ni(o)},n.wbg.__wbindgen_string_get=function(e,t){const r=Ue(t),o=typeof r=="string"?r:void 0;var l=ni(o)?0:_r(o,ye.__wbindgen_malloc,ye.__wbindgen_realloc),s=Jt;Qe()[e/4+1]=s,Qe()[e/4+0]=l},n.wbg.__wbg_String_91fba7ded13ba54c=function(e,t){const r=String(Ue(t)),o=_r(r,ye.__wbindgen_malloc,ye.__wbindgen_realloc),l=Jt;Qe()[e/4+1]=l,Qe()[e/4+0]=o},n.wbg.__wbindgen_object_clone_ref=function(e){const t=Ue(e);return Nt(t)},n.wbg.__wbg_getwithrefkey_15c62c2b8546208d=function(e,t){const r=Ue(e)[Ue(t)];return Nt(r)},n.wbg.__wbg_log_4b5638ad60bdc54a=function(e){console.log(Ue(e))},n.wbg.__wbg_instanceof_ArrayBuffer_e5e48f4762c5610b=function(e){let t;try{t=Ue(e)instanceof ArrayBuffer}catch{t=!1}return t},n.wbg.__wbg_buffer_3f3d764d4747d564=function(e){const t=Ue(e).buffer;return Nt(t)},n.wbg.__wbg_new_8c3f0052272a457a=function(e){const t=new Uint8Array(Ue(e));return Nt(t)},n.wbg.__wbg_set_83db9690f9353e79=function(e,t,r){Ue(e).set(Ue(t),r>>>0)},n.wbg.__wbg_length_9e1ae1900cb0fbd5=function(e){return Ue(e).length},n.wbg.__wbg_instanceof_Uint8Array_971eeda69eb75003=function(e){let t;try{t=Ue(e)instanceof Uint8Array}catch{t=!1}return t},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return Nt(e)},n.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const r=Ue(t).stack,o=_r(r,ye.__wbindgen_malloc,ye.__wbindgen_realloc),l=Jt;Qe()[e/4+1]=l,Qe()[e/4+0]=o},n.wbg.__wbg_error_f851667af71bcfc6=function(e,t){try{console.error(gn(e,t))}finally{ye.__wbindgen_free(e,t)}},n.wbg.__wbindgen_debug_string=function(e,t){const r=hi(Ue(t)),o=_r(r,ye.__wbindgen_malloc,ye.__wbindgen_realloc),l=Jt;Qe()[e/4+1]=l,Qe()[e/4+0]=o},n.wbg.__wbindgen_throw=function(e,t){throw new Error(gn(e,t))},n.wbg.__wbindgen_memory=function(){const e=ye.memory;return Nt(e)},n}function ff(n,e){return ye=n.exports,Nl.__wbindgen_wasm_module=e,wr=new Float64Array,Sr=new Int32Array,Er=new Uint8Array,ye}async function Nl(n){typeof n>"u"&&(n="/atip/browse_files/assets/route_snapper_bg.wasm");const e=uf();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:r}=await af(await n,e);return ff(t,r)}var jn,pi,Ar,Rl,Bn,gi,Rt,rn;class cf{constructor(e,t,r){On(this,jn);On(this,Ar);On(this,Bn);On(this,Rt);this.controlDiv=r,this.map=e,console.time("Deserialize and setup JsRouteSnapper"),this.inner=new Pr(t),console.timeEnd("Deserialize and setup JsRouteSnapper"),console.log("JsRouteSnapper ready, waiting for idle event"),this.active=!1,this.map.once("idle",()=>{console.log("JsRouteSnapper now usable"),this.map.addSource("route-snapper",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:"route-points",type:"circle",source:"route-snapper",paint:{"circle-radius":["match",["get","type"],"unimportant",10/2,10],"circle-color":["match",["get","type"],"hovered","green","important","red","black"]},filter:["in","$type","Point"]}),this.map.addLayer({id:"route-lines",type:"line",source:"route-snapper",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"black","line-width":2.5},filter:["in","$type","LineString"]}),this.map.on("mousemove",s=>{if(!this.active)return;const u={x:s.point.x-30,y:s.point.y},c=this.map.unproject(s.point).distanceTo(this.map.unproject(u));this.inner.onMouseMove(s.lngLat.lng,s.lngLat.lat,c)&&vt(this,Rt,rn).call(this)}),this.map.on("click",()=>{this.active&&(this.inner.onClick(),vt(this,Rt,rn).call(this))}),this.map.on("dragstart",s=>{this.active&&this.inner.onDragStart()&&this.map.dragPan.disable()}),this.map.on("mouseup",s=>{this.active&&this.inner.onMouseUp()&&this.map.dragPan.enable()}),document.addEventListener("keypress",s=>{this.active&&s.key=="Enter"&&(s.preventDefault(),vt(this,Bn,gi).call(this))}),document.addEventListener("keydown",s=>{this.active&&s.key=="Shift"&&(s.preventDefault(),this.inner.setSnapMode(!1),vt(this,Rt,rn).call(this))}),document.addEventListener("keyup",s=>{this.active&&s.key=="Shift"&&(s.preventDefault(),this.inner.setSnapMode(!0),vt(this,Rt,rn).call(this))}),vt(this,jn,pi).call(this)})}isActive(){return this.active}tearDown(){this.map.removeLayer("route-points"),this.map.removeLayer("route-lines"),this.map.removeSource("route-snapper")}}jn=new WeakSet,pi=function(){this.active=!1,this.inner.clearState(),vt(this,Rt,rn).call(this),this.controlDiv.innerHTML="";let e=document.createElement("button");e.innerText="Route tool",e.type="button",e.onclick=()=>{vt(this,Ar,Rl).call(this)},this.controlDiv.appendChild(e)},Ar=new WeakSet,Rl=function(){this.active=!0,this.controlDiv.dispatchEvent(new CustomEvent("activate")),this.controlDiv.innerHTML="";let e=document.createElement("button");e.type="button",e.innerText="Finish route",e.onclick=()=>{vt(this,Bn,gi).call(this)},this.controlDiv.appendChild(e);let t=document.createElement("input");t.type="checkbox",t.id="avoidDoublingBack",t.onclick=()=>{this.inner.setConfig({avoid_doubling_back:t.checked}),vt(this,Rt,rn).call(this)};let r=document.createElement("label");r.innerText="Avoid doubling back",r.for=t.id;let o=document.createElement("div");o.appendChild(t),o.appendChild(r),this.controlDiv.append(o);const l=document.createElement("ul");l.innerHTML="<li><b>Click</b> green points on the transport network</br>to create snapped routes</li><li>Hold <b>Shift</b> to draw a point anywhere</li><li><b>Click and drag</b> any point to move it</li><li><b>Click</b> a red waypoint to delete it</li><li>Press <b>Enter</b> to finish route</li>",this.controlDiv.appendChild(l)},Bn=new WeakSet,gi=function(){const e=this.inner.toFinalFeature();e?this.controlDiv.dispatchEvent(new CustomEvent("new-route",{detail:JSON.parse(e)})):this.controlDiv.dispatchEvent(new CustomEvent("no-new-route")),vt(this,jn,pi).call(this)},Rt=new WeakSet,rn=function(){this.map.getSource("route-snapper").setData(JSON.parse(this.inner.renderGeojson()))};async function df(n,e){const t=await fetch(n),r=t.body.getReader(),o=t.headers.get("Content-Length");let l=0,s=[];for(;;){const{done:f,value:p}=await r.read();if(f)break;s.push(p),l+=p.length;const _=100*l/o;e.style=`background: linear-gradient(to right, red ${_}%, transparent 0);`}let u=new Uint8Array(l),c=0;for(let f of s)u.set(f,c),c+=f.length;return u}function hf(n){let e,t,r,o;return{c(){e=F("div"),e.textContent="Add intervention",t=J(),r=F("div"),o=F("div"),o.textContent="Route tool loading...",Y(e,"class","header svelte-15ile5d"),Y(r,"class","route-container svelte-15ile5d")},m(l,s){A(l,e,s),A(l,t,s),A(l,r,s),M(r,o),n[3](o),n[4](r)},p:De,i:De,o:De,d(l){l&&N(e),l&&N(t),l&&N(r),n[3](null),n[4](null)}}}const hl=7,pl=10,pf=.5;function gf(n,e,t){let r,o;ot(n,bn,E=>t(8,r=E)),ot(n,Me,E=>t(9,o=E));const l=["match",["get","user_intervention_type"],"area",ct.area,"route",ct.route,"crossing",ct.crossing,"other",ct.other,"black"],s=[{id:"interventions-points",filter:["all",Ir,["==","meta","feature"]],...Mr(l,hl)},{id:"interventions-lines",filter:["all",ci,["==","meta","feature"]],...Lr(l,pl)},{id:"interventions-polygons",filter:["all",Ml,["==","meta","feature"]],...Pl(l,pf)},{id:"draggable-points",filter:["all",Ir,["!=","meta","feature"]],...Mr(ct.draggablePoint,hl)},{id:"polygon-outline-while-editing",filter:["all",ci,["!=","meta","feature"]],...Lr(ct.draggablePoint,pl)}];let{url:u}=e,c,f,p,_;Gn(async()=>{p=new dl({displayControlsDefault:!1,userProperties:!0,controls:{point:!0,polygon:!0},modes:Object.assign({static:h},dl.modes),styles:s}),r.addControl(p),await b(r),r.on("draw.create",E=>{const L=E.features[0];L.geometry.type=="Polygon"?L.properties.intervention_type="area":L.properties.intervention_type="other",Me.update(T=>(T.features.push(L),T))}),r.on("draw.update",E=>{const L=E.features[0];Me.update(T=>{const O=T.features.find(x=>x.id==L.id);return O.geometry=L.geometry,T})}),r.on("draw.selectionchange",E=>{E.features.length==1&&(!_||!_.isActive())?hu(E.features[0].id):E.features.length==0&&Ol()}),Me.subscribe(E=>{p&&p.set(E)}),r.on("mousemove",E=>{var L=null;if(_&&!_.isActive()){const T=p.getFeatureIdsAt(E.point);T.length>0&&(L=T[0]),ii.set(L)}}),r.on("mouseout",()=>{ii.set(null)}),Tr.subscribe(E=>{if(E){let L=o.features.find(T=>T.id==E);L.geometry.type!="Point"&&p.changeMode("direct_select",{featureId:L.id})}})}),Tl(()=>{r.removeControl(p),_.tearDown()});async function b(E){await Nl(),console.log(`Grabbing ${u}`);try{const L=await df(u,f);_=new cf(E,L,c)}catch(L){console.log(`Route tool broke: ${L}`),t(0,c.innerHTML="Failed to load",c)}c.addEventListener("activate",()=>{p.changeMode("static")}),c.addEventListener("no-new-route",()=>{p.changeMode("simple_select")}),c.addEventListener("new-route",L=>{const T=L.detail,O=p.add(T);T.id=O[0],T.properties.intervention_type="route",Me.update(x=>(x.features.push(T),x)),p.changeMode("direct_select",{featureId:T.id})})}let h={};h.onSetup=function(){return this.setActionableState(),{}},h.toDisplayFeatures=function(E,L,T){T(L)};function g(E){$e[E?"unshift":"push"](()=>{f=E,t(1,f)})}function k(E){$e[E?"unshift":"push"](()=>{c=E,t(0,c)})}return n.$$set=E=>{"url"in E&&t(2,u=E.url)},[c,f,u,g,k]}class mf extends Ce{constructor(e){super(),Oe(this,e,gf,hf,Ie,{url:2})}}function bf(n){let e,t,r,o,l,s,u,c;return e=new br({props:{labelText:"Area",value:"area"}}),r=new br({props:{labelText:"Route",value:"route"}}),l=new br({props:{labelText:"Crossing",value:"crossing"}}),u=new br({props:{labelText:"Other",value:"other"}}),{c(){he(e.$$.fragment),t=J(),he(r.$$.fragment),o=J(),he(l.$$.fragment),s=J(),he(u.$$.fragment)},m(f,p){pe(e,f,p),A(f,t,p),pe(r,f,p),A(f,o,p),pe(l,f,p),A(f,s,p),pe(u,f,p),c=!0},p:De,i(f){c||(z(e.$$.fragment,f),z(r.$$.fragment,f),z(l.$$.fragment,f),z(u.$$.fragment,f),c=!0)},o(f){W(e.$$.fragment,f),W(r.$$.fragment,f),W(l.$$.fragment,f),W(u.$$.fragment,f),c=!1},d(f){ge(e,f),f&&N(t),ge(r,f),f&&N(o),ge(l,f),f&&N(s),ge(u,f)}}}function gl(n){let e,t,r=ml(n[3])+"",o,l,s;return{c(){e=F("p"),t=se("Length: "),o=se(r),l=J(),s=F("br")},m(u,c){A(u,e,c),M(e,t),M(e,o),A(u,l,c),A(u,s,c)},p(u,c){c&8&&r!==(r=ml(u[3])+"")&&xe(o,r)},d(u){u&&N(e),u&&N(l),u&&N(s)}}}function vf(n){let e,t,r,o,l,s,u,c,f,p,_,b,h,g,k,E,L,T,O,x,R,U,ve;function q(G){n[6](G)}let re={labelText:"Name"};n[0]!==void 0&&(re.value=n[0]),e=new nu({props:re}),$e.push(()=>Ot(e,"value",q,n[0]));function de(G){n[7](G)}let j={$$slots:{default:[bf]},$$scope:{ctx:n}};n[1]!==void 0&&(j.selected=n[1]),s=new za({props:j}),$e.push(()=>Ot(s,"selected",de,n[1]));function te(G){n[8](G)}let fe={labelText:"Description"};n[2]!==void 0&&(fe.value=n[2]),_=new Wa({props:fe}),$e.push(()=>Ot(_,"value",te,n[2]));let ae=n[3]&&gl(n);return{c(){he(e.$$.fragment),r=J(),o=F("br"),l=J(),he(s.$$.fragment),c=J(),f=F("br"),p=J(),he(_.$$.fragment),h=J(),g=F("br"),k=J(),ae&&ae.c(),E=J(),L=F("div"),T=F("button"),T.textContent="Delete",O=J(),x=F("button"),x.textContent="Save",Y(T,"type","button"),Y(x,"type","button"),on(x,"float","right")},m(G,ne){pe(e,G,ne),A(G,r,ne),A(G,o,ne),A(G,l,ne),pe(s,G,ne),A(G,c,ne),A(G,f,ne),A(G,p,ne),pe(_,G,ne),A(G,h,ne),A(G,g,ne),A(G,k,ne),ae&&ae.m(G,ne),A(G,E,ne),A(G,L,ne),M(L,T),M(L,O),M(L,x),R=!0,U||(ve=[Q(T,"click",n[4]),Q(x,"click",Ol)],U=!0)},p(G,[ne]){const Ae={};!t&&ne&1&&(t=!0,Ae.value=G[0],It(()=>t=!1)),e.$set(Ae);const Le={};ne&512&&(Le.$$scope={dirty:ne,ctx:G}),!u&&ne&2&&(u=!0,Le.selected=G[1],It(()=>u=!1)),s.$set(Le);const ke={};!b&&ne&4&&(b=!0,ke.value=G[2],It(()=>b=!1)),_.$set(ke),G[3]?ae?ae.p(G,ne):(ae=gl(G),ae.c(),ae.m(E.parentNode,E)):ae&&(ae.d(1),ae=null)},i(G){R||(z(e.$$.fragment,G),z(s.$$.fragment,G),z(_.$$.fragment,G),R=!0)},o(G){W(e.$$.fragment,G),W(s.$$.fragment,G),W(_.$$.fragment,G),R=!1},d(G){ge(e,G),G&&N(r),G&&N(o),G&&N(l),ge(s,G),G&&N(c),G&&N(f),G&&N(p),ge(_,G),G&&N(h),G&&N(g),G&&N(k),ae&&ae.d(G),G&&N(E),G&&N(L),U=!1,at(ve)}}}function ml(n){return n<1e3?Math.round(n)+" m":(n/1e3).toFixed(1)+"km"}function _f(n,e,t){let{id:r}=e,{name:o}=e,{intervention_type:l}=e,{description:s}=e,{length_meters:u}=e;function c(){Me.update(b=>(b.features=b.features.filter(h=>h.id!=r),b))}function f(b){o=b,t(0,o)}function p(b){l=b,t(1,l)}function _(b){s=b,t(2,s)}return n.$$set=b=>{"id"in b&&t(5,r=b.id),"name"in b&&t(0,o=b.name),"intervention_type"in b&&t(1,l=b.intervention_type),"description"in b&&t(2,s=b.description),"length_meters"in b&&t(3,u=b.length_meters)},[o,l,s,u,c,r,f,p,_]}class yf extends Ce{constructor(e){super(),Oe(this,e,_f,vf,Ie,{id:5,name:0,intervention_type:1,description:2,length_meters:3})}}function bl(n,e,t){const r=n.slice();return r[10]=e[t],r[11]=e,r[12]=t,r}function Ef(n){let e,t,r,o,l,s;function u(_){n[5](_,n[10])}function c(_){n[6](_,n[10])}function f(_){n[7](_,n[10])}let p={id:n[10].id,length_meters:n[10].properties.length_meters};return n[10].properties.name!==void 0&&(p.name=n[10].properties.name),n[10].properties.intervention_type!==void 0&&(p.intervention_type=n[10].properties.intervention_type),n[10].properties.description!==void 0&&(p.description=n[10].properties.description),e=new yf({props:p}),$e.push(()=>Ot(e,"name",u,n[10].properties.name)),$e.push(()=>Ot(e,"intervention_type",c,n[10].properties.intervention_type)),$e.push(()=>Ot(e,"description",f,n[10].properties.description)),{c(){he(e.$$.fragment),l=J()},m(_,b){pe(e,_,b),A(_,l,b),s=!0},p(_,b){n=_;const h={};b&1&&(h.id=n[10].id),b&1&&(h.length_meters=n[10].properties.length_meters),!t&&b&1&&(t=!0,h.name=n[10].properties.name,It(()=>t=!1)),!r&&b&1&&(r=!0,h.intervention_type=n[10].properties.intervention_type,It(()=>r=!1)),!o&&b&1&&(o=!0,h.description=n[10].properties.description,It(()=>o=!1)),e.$set(h)},i(_){s||(z(e.$$.fragment,_),s=!0)},o(_){W(e.$$.fragment,_),s=!1},d(_){ge(e,_),_&&N(l)}}}function wf(n){let e=n[12]+1+"",t,r,o=xr(n[10])+"",l;return{c(){t=se(e),r=se(") "),l=se(o)},m(s,u){A(s,t,u),A(s,r,u),A(s,l,u)},p(s,u){u&1&&o!==(o=xr(s[10])+"")&&xe(l,o)},d(s){s&&N(t),s&&N(r),s&&N(l)}}}function Sf(n){let e,t=n[12]+1+"",r,o,l=xr(n[10])+"",s;return{c(){e=F("strong"),r=se(t),o=se(") "),s=se(l)},m(u,c){A(u,e,c),M(e,r),M(e,o),M(e,s)},p(u,c){c&1&&l!==(l=xr(u[10])+"")&&xe(s,l)},d(u){u&&N(e)}}}function kf(n){let e;function t(l,s){return l[10].id==l[1]?Sf:wf}let r=t(n),o=r(n);return{c(){o.c(),e=J()},m(l,s){o.m(l,s),A(l,e,s)},p(l,s){r===(r=t(l))&&o?o.p(l,s):(o.d(1),o=r(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){o.d(l),l&&N(e)}}}function vl(n){let e,t,r;function o(s){n[8](s,n[10])}let l={$$slots:{title:[kf],default:[Ef]},$$scope:{ctx:n}};return n[10].properties.editing!==void 0&&(l.open=n[10].properties.editing),e=new ma({props:l}),$e.push(()=>Ot(e,"open",o,n[10].properties.editing)),e.$on("click",function(){po(n[3](n[10].id))&&n[3](n[10].id).apply(this,arguments)}),e.$on("mouseenter",function(){po(Rn.set(n[10].id))&&Rn.set(n[10].id).apply(this,arguments)}),e.$on("mouseleave",n[2]),{c(){he(e.$$.fragment)},m(s,u){pe(e,s,u),r=!0},p(s,u){n=s;const c={};u&8195&&(c.$$scope={dirty:u,ctx:n}),!t&&u&1&&(t=!0,c.open=n[10].properties.editing,It(()=>t=!1)),e.$set(c)},i(s){r||(z(e.$$.fragment,s),r=!0)},o(s){W(e.$$.fragment,s),r=!1},d(s){ge(e,s)}}}function Tf(n){let e,t,r=n[0].features,o=[];for(let s=0;s<r.length;s+=1)o[s]=vl(bl(n,r,s));const l=s=>W(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=mi()},m(s,u){for(let c=0;c<o.length;c+=1)o[c].m(s,u);A(s,e,u),t=!0},p(s,u){if(u&15){r=s[0].features;let c;for(c=0;c<r.length;c+=1){const f=bl(s,r,c);o[c]?(o[c].p(f,u),z(o[c],1)):(o[c]=vl(f),o[c].c(),z(o[c],1),o[c].m(e.parentNode,e))}for(nt(),c=r.length;c<o.length;c+=1)l(c);rt()}},i(s){if(!t){for(let u=0;u<r.length;u+=1)z(o[u]);t=!0}},o(s){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)W(o[u]);t=!1},d(s){wl(o,s),s&&N(e)}}}function Cf(n){let e,t,r,o;return e=new fa({props:{$$slots:{default:[Tf]},$$scope:{ctx:n}}}),{c(){he(e.$$.fragment)},m(l,s){pe(e,l,s),t=!0,r||(o=Q(window,"keydown",n[4]),r=!0)},p(l,[s]){const u={};s&8195&&(u.$$scope={dirty:s,ctx:l}),e.$set(u)},i(l){t||(z(e.$$.fragment,l),t=!0)},o(l){W(e.$$.fragment,l),t=!1},d(l){ge(e,l),r=!1,o()}}}function xr(n){if(n.properties.name)return n.properties.name;var e=n.properties.intervention_type;return e=="other"&&(n.geometry.type=="Point"?e="point":n.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function Of(n,e,t){let r,o,l;ot(n,du,h=>t(9,r=h)),ot(n,Me,h=>t(0,o=h)),ot(n,ii,h=>t(1,l=h));function s(){Rn.set(null)}function u(h){Tr.set(null),Tr.set(h);for(let g of o.features)if(g.properties.editing&&g.id!=h){delete g.properties.editing;return}}function c(h){const g=r;if(h.key=="Delete"){const k=h.originalTarget.tagName;if(k!="CANVAS"&&k!="BODY")return;h.preventDefault(),Me.update(E=>(E.features=E.features.filter(L=>L.id!=g),E))}}function f(h,g){n.$$.not_equal(g.properties.name,h)&&(g.properties.name=h,Me.set(o))}function p(h,g){n.$$.not_equal(g.properties.intervention_type,h)&&(g.properties.intervention_type=h,Me.set(o))}function _(h,g){n.$$.not_equal(g.properties.description,h)&&(g.properties.description=h,Me.set(o))}function b(h,g){n.$$.not_equal(g.properties.editing,h)&&(g.properties.editing=h,Me.set(o))}return[o,l,s,u,c,f,p,_,b]}class If extends Ce{constructor(e){super(),Oe(this,e,Of,Cf,Ie,{})}}function _l(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Lf(n,e,t){t===void 0&&(t={});var r=_l(n),o=_l(e),l=vr(o[1]-r[1]),s=vr(o[0]-r[0]),u=vr(r[1]),c=vr(o[1]),f=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(c);return Ou(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),t.units)}function Fl(n,e,t){if(n!==null)for(var r,o,l,s,u,c,f,p=0,_=0,b,h=n.type,g=h==="FeatureCollection",k=h==="Feature",E=g?n.features.length:1,L=0;L<E;L++){f=g?n.features[L].geometry:k?n.geometry:n,b=f?f.type==="GeometryCollection":!1,u=b?f.geometries.length:1;for(var T=0;T<u;T++){var O=0,x=0;if(s=b?f.geometries[T]:f,s!==null){c=s.coordinates;var R=s.type;switch(p=t&&(R==="Polygon"||R==="MultiPolygon")?1:0,R){case null:break;case"Point":if(e(c,_,L,O,x)===!1)return!1;_++,O++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(e(c[r],_,L,O,x)===!1)return!1;_++,R==="MultiPoint"&&O++}R==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-p;o++){if(e(c[r][o],_,L,O,x)===!1)return!1;_++}R==="MultiLineString"&&O++,R==="Polygon"&&x++}R==="Polygon"&&O++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(x=0,o=0;o<c[r].length;o++){for(l=0;l<c[r][o].length-p;l++){if(e(c[r][o][l],_,L,O,x)===!1)return!1;_++}x++}O++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(Fl(s.geometries[r],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Mf(n,e){var t,r,o,l,s,u,c,f,p,_,b=0,h=n.type==="FeatureCollection",g=n.type==="Feature",k=h?n.features.length:1;for(t=0;t<k;t++){for(u=h?n.features[t].geometry:g?n.geometry:n,f=h?n.features[t].properties:g?n.properties:{},p=h?n.features[t].bbox:g?n.bbox:void 0,_=h?n.features[t].id:g?n.id:void 0,c=u?u.type==="GeometryCollection":!1,s=c?u.geometries.length:1,o=0;o<s;o++){if(l=c?u.geometries[o]:u,l===null){if(e(null,b,f,p,_)===!1)return!1;continue}switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(l,b,f,p,_)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<l.geometries.length;r++)if(e(l.geometries[r],b,f,p,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}b++}}function Pf(n,e){Mf(n,function(t,r,o,l,s){var u=t===null?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return e(Dn(t,o,{bbox:l,id:s}),r,0)===!1?!1:void 0}var c;switch(u){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon";break}for(var f=0;f<t.coordinates.length;f++){var p=t.coordinates[f],_={type:c,coordinates:p};if(e(Dn(_,o),r,f)===!1)return!1}})}function xf(n,e){Pf(n,function(t,r,o){var l=0;if(t.geometry){var s=t.geometry.type;if(!(s==="Point"||s==="MultiPoint")){var u,c=0,f=0,p=0;if(Fl(t,function(_,b,h,g,k){if(u===void 0||r>c||g>f||k>p){u=_,c=r,f=g,p=k,l=0;return}var E=Tu([u,_],t.properties);if(e(E,r,o,k,l)===!1)return!1;l++,u=_})===!1)return!1}}})}function Af(n,e,t){var r=t,o=!1;return xf(n,function(l,s,u,c,f){o===!1&&t===void 0?r=l:r=e(r,l,s,u,c,f),o=!0}),r}function Nf(n,e){return e===void 0&&(e={}),Af(n,function(t,r){var o=r.geometry.coordinates;return t+Lf(o[0],o[1],e)},0)}function yl(n){let e,t,r,o,l,s=n[1]+1+"",u,c,f=n[0].length+"",p,_,b,h,g,k,E;return{c(){e=F("div"),t=F("button"),r=se("Previous"),l=J(),u=se(s),c=se(" / "),p=se(f),_=J(),b=F("button"),h=se("Next"),Y(t,"type","button"),t.disabled=o=n[1]==0,Y(b,"type","button"),b.disabled=g=n[1]==n[0].length-1},m(L,T){A(L,e,T),M(e,t),M(t,r),M(e,l),M(e,u),M(e,c),M(e,p),M(e,_),M(e,b),M(b,h),k||(E=[Q(t,"click",n[8]),Q(b,"click",n[9])],k=!0)},p(L,T){T&2&&o!==(o=L[1]==0)&&(t.disabled=o),T&2&&s!==(s=L[1]+1+"")&&xe(u,s),T&1&&f!==(f=L[0].length+"")&&xe(p,f),T&3&&g!==(g=L[1]==L[0].length-1)&&(b.disabled=g)},d(L){L&&N(e),k=!1,at(E)}}}function Rf(n){let e,t,r,o,l,s,u,c,f,p,_,b,h,g,k,E,L,T,O,x,R=n[2].features.length+"",U,ve,q,re,de,j,te,fe,ae=n[0].length>1&&yl(n);return{c(){e=F("div"),t=F("label"),r=se(`Scheme name:
    `),o=F("input"),l=J(),s=F("br"),u=J(),c=F("div"),f=F("label"),p=F("input"),_=J(),b=F("button"),b.textContent="Load from GeoJSON",h=J(),g=F("button"),g.textContent="Export to GeoJSON",k=J(),ae&&ae.c(),E=J(),L=F("br"),T=J(),O=F("div"),x=F("span"),U=se(R),ve=se(" interventions"),q=J(),re=F("button"),de=se("Clear all"),Y(o,"type","text"),Y(p,"type","file"),Y(p,"id","load_geojson"),p.multiple=!0,Y(p,"class","svelte-lhyd1e"),Y(b,"type","button"),Y(b,"onclick","document.getElementById('load_geojson').click();"),Y(g,"type","button"),Y(g,"class","align-right svelte-lhyd1e"),Y(re,"type","button"),Y(re,"class","align-right svelte-lhyd1e"),re.disabled=j=n[2].features.length==0},m(G,ne){A(G,e,ne),M(e,t),M(t,r),M(t,o),mn(o,n[2].scheme_name),A(G,l,ne),A(G,s,ne),A(G,u,ne),A(G,c,ne),M(c,f),M(f,p),M(f,_),M(f,b),M(c,h),M(c,g),A(G,k,ne),ae&&ae.m(G,ne),A(G,E,ne),A(G,L,ne),A(G,T,ne),A(G,O,ne),M(O,x),M(x,U),M(x,ve),M(O,q),M(O,re),M(re,de),te||(fe=[Q(o,"input",n[7]),Q(p,"change",n[5]),Q(g,"click",n[4]),Q(re,"click",n[3])],te=!0)},p(G,[ne]){ne&4&&o.value!==G[2].scheme_name&&mn(o,G[2].scheme_name),G[0].length>1?ae?ae.p(G,ne):(ae=yl(G),ae.c(),ae.m(E.parentNode,E)):ae&&(ae.d(1),ae=null),ne&4&&R!==(R=G[2].features.length+"")&&xe(U,R),ne&4&&j!==(j=G[2].features.length==0)&&(re.disabled=j)},i:De,o:De,d(G){G&&N(e),G&&N(l),G&&N(s),G&&N(u),G&&N(c),G&&N(k),ae&&ae.d(G),G&&N(E),G&&N(L),G&&N(T),G&&N(O),te=!1,at(fe)}}}function Ff(n,e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(e)),t.setAttribute("download",n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Df(n,e,t){let r;ot(n,Me,E=>t(2,r=E));let{authorityName:o}=e,l=[],s=0,u=window.localStorage.getItem(o);if(u)try{Me.set(b(JSON.parse(u)))}catch(E){console.log(`Failed to load from local storage: ${E}`)}Me.subscribe(()=>window.localStorage.setItem(o,JSON.stringify(f())));function c(){confirm("Do you want to clear the current scheme? (You should save it first!)")&&Me.update(E=>(delete E.scheme_name,E.features=[],E))}function f(){const E=JSON.parse(JSON.stringify(r));for(let L of E.features)delete L.properties.editing;return E}function p(){let E=f();var L=o;E.authority=o,E.origin="atip-v1",E.scheme_name&&(L+="_"+E.scheme_name),L+=".txt",Ff(L,JSON.stringify(E,null,"  "))}function _(E){t(0,l=[]),t(1,s=0);let L=!0;for(let T of E.target.files){let O=L;const x=new FileReader;x.onload=R=>{if(t(0,l=[...l,R.target.result]),O)try{Me.set(b(JSON.parse(R.target.result)))}catch(U){window.alert(`Couldn't load scheme from a file: ${U}`)}},x.readAsText(T),L=!1}}function b(E){for(let L of E.features)L.geometry.type=="LineString"&&!L.properties.length_meters&&(L.properties.length_meters=Nf(L.geometry,{units:"kilometers"})*1e3);return E}function h(){r.scheme_name=this.value,Me.set(r)}const g=E=>t(1,s--,s),k=E=>t(1,s++,s);return n.$$set=E=>{"authorityName"in E&&t(6,o=E.authorityName)},n.$$.update=()=>{if(n.$$.dirty&3&&l.length>1)try{Me.set(b(JSON.parse(l[s])))}catch(E){console.log(`Failed to load from local storage: ${E}`)}},[l,s,r,c,p,_,o,h,g,k]}class Uf extends Ce{constructor(e){super(),Oe(this,e,Df,Rf,Ie,{authorityName:6})}}let pn="hover",El=10,jf=7;function Bf(n,e,t){let r,o,l;ot(n,bn,u=>t(1,r=u)),ot(n,Me,u=>t(2,o=u));const s=kl(Me,u=>u.features.some(c=>c.properties.editing));return ot(n,s,u=>t(3,l=u)),Ei(r,pn,{type:"geojson",data:Fn()}),xn(r,{id:"hover-polygons",source:pn,filter:Ml,...Lr(ct.hovering,El,1)}),xn(r,{id:"hover-lines",source:pn,filter:ci,...Lr(ct.hovering,1.5*El,1)}),xn(r,{id:"hover-points",source:pn,filter:Ir,...Mr(ct.hovering,1.5*jf,1)}),s.subscribe(u=>{u&&Rn.set(null)}),Rn.subscribe(u=>{u&&!l?r.getSource(pn).setData(o.features.find(c=>c.id==u)):r.getSource(pn).setData(Fn())}),[s]}class Gf extends Ce{constructor(e){super(),Oe(this,e,Bf,null,Ie,{})}}let ri="editing",zf=7;function Vf(n,e,t){let r,o;return ot(n,bn,l=>t(0,r=l)),ot(n,Me,l=>t(1,o=l)),Ei(r,ri,{type:"geojson",data:Fn()}),xn(r,{id:"editing-points",source:ri,filter:Ir,...Mr(ct.hovering,1.5*zf)}),Me.subscribe(l=>{r.getSource(ri).setData(l.features.find(s=>s.properties.editing)||Fn())}),Tr.subscribe(l=>{if(l){let s=o.features.find(u=>u.id==l);s.geometry.type=="Point"?r.flyTo({center:s.geometry.coordinates}):r.fitBounds(vi(s),{padding:200,animate:!0,duration:500})}}),[]}class qf extends Ce{constructor(e){super(),Oe(this,e,Vf,null,Ie,{})}}const Jf="/atip/browse_files/assets/zoom_out_map-b2e1091a.svg";function Yf(n){let e,t,r,o,l;return{c(){e=F("button"),t=F("img"),zs(t.src,r=Jf)||Y(t,"src",r),Y(t,"alt","Zoom to show entire boundary"),Y(e,"type","button"),Y(e,"title","Zoom to show entire boundary"),Y(e,"class","svelte-qzjsqo")},m(s,u){A(s,e,u),M(e,t),o||(l=Q(e,"click",n[0]),o=!0)},p:De,i:De,o:De,d(s){s&&N(e),o=!1,l()}}}function Hf(n,e,t){let r;ot(n,bn,s=>t(2,r=s));let{boundaryGeojson:o}=e;function l(){r.fitBounds(vi(o),{padding:20,animate:!0,duration:500})}return n.$$set=s=>{"boundaryGeojson"in s&&t(1,o=s.boundaryGeojson)},[l,o]}class Wf extends Ce{constructor(e){super(),Oe(this,e,Hf,Yf,Ie,{boundaryGeojson:1})}}function Zf(n){let e,t,r,o,l,s,u;return{c(){e=F("div"),t=se(`Basemap:
  `),r=F("select"),o=F("option"),o.textContent="Streets",l=F("option"),l.textContent="Satellite",o.__value="streets",o.value=o.__value,l.__value="hybrid",l.value=l.__value,n[0]===void 0&&Vs(()=>n[2].call(r)),Y(e,"class","svelte-1tbnm6i")},m(c,f){A(c,e,f),M(e,t),M(e,r),M(r,o),M(r,l),go(r,n[0]),s||(u=[Q(r,"change",n[2]),Q(r,"change",n[1])],s=!0)},p(c,[f]){f&1&&go(r,c[0])},i:De,o:De,d(c){c&&N(e),s=!1,at(u)}}}function Xf(n,e,t){let{style:r}=e;function o(){let s=new URLSearchParams(window.location.search);s.set("style",r);let u=`${window.location.pathname}?${s.toString()}${window.location.hash}`;window.location.href=u}function l(){r=qs(this),t(0,r)}return n.$$set=s=>{"style"in s&&t(0,r=s.style)},[r,o,l]}class Kf extends Ce{constructor(e){super(),Oe(this,e,Xf,Zf,Ie,{style:0})}}function Qf(n){let e,t,r,o,l,s,u,c,f,p,_,b,h,g,k,E,L,T,O;return{c(){e=F("div"),t=F("h1"),t.textContent="Interventions",r=J(),o=F("ul"),l=F("li"),s=F("span"),u=se("Areas"),c=J(),f=F("li"),p=F("span"),_=se("Routes"),b=J(),h=F("li"),g=F("span"),k=se("Crossings"),E=J(),L=F("li"),T=F("span"),O=se("Other"),Y(t,"class","svelte-p551i1"),Y(s,"class","svelte-p551i1"),on(s,"background",ct.area),Y(p,"class","svelte-p551i1"),on(p,"background",ct.route),Y(g,"class","svelte-p551i1"),on(g,"background",ct.crossing),Y(T,"class","svelte-p551i1"),on(T,"background",ct.other),Y(e,"class","svelte-p551i1")},m(x,R){A(x,e,R),M(e,t),M(e,r),M(e,o),M(o,l),M(l,s),M(l,u),M(o,c),M(o,f),M(f,p),M(f,_),M(o,b),M(o,h),M(h,g),M(h,k),M(o,E),M(o,L),M(L,T),M(L,O)},p:De,i:De,o:De,d(x){x&&N(e)}}}class $f extends Ce{constructor(e){super(),Oe(this,e,null,Qf,Ie,{})}}function ec(n){let e,t,r,o,l,s,u,c;return{c(){e=F("div"),t=F("button"),t.textContent="Home",r=J(),o=F("button"),o.textContent="About",l=J(),s=F("button"),s.textContent="Instructions",Y(t,"type","button"),Y(t,"onclick","window.open('index.html');"),Y(o,"type","button"),Y(s,"type","button"),Y(e,"slot","nav")},m(f,p){A(f,e,p),M(e,t),M(e,r),M(e,o),M(e,l),M(e,s),u||(c=[Q(o,"click",n[6]),Q(s,"click",n[7])],u=!0)},p:De,d(f){f&&N(e),u=!1,at(c)}}}function tc(n){let e,t,r,o,l,s,u,c,f,p,_,b;return l=new Wf({props:{boundaryGeojson:n[3]}}),u=new Uf({props:{authorityName:n[4]}}),_=new If({}),{c(){e=F("div"),t=F("h1"),r=se(n[4]),o=J(),he(l.$$.fragment),s=J(),he(u.$$.fragment),c=J(),f=F("br"),p=J(),he(_.$$.fragment),Y(e,"slot","sidebar")},m(h,g){A(h,e,g),M(e,t),M(t,r),M(t,o),pe(l,t,null),M(e,s),pe(u,e,null),M(e,c),M(e,f),M(e,p),pe(_,e,null),b=!0},p(h,g){const k={};g&8&&(k.boundaryGeojson=h[3]),l.$set(k)},i(h){b||(z(l.$$.fragment,h),z(u.$$.fragment,h),z(_.$$.fragment,h),b=!0)},o(h){W(l.$$.fragment,h),W(u.$$.fragment,h),W(_.$$.fragment,h),b=!1},d(h){h&&N(e),ge(l),ge(u),ge(_)}}}function nc(n){let e,t,r,o,l,s,u,c,f,p,_,b;return e=new tf({props:{boundaryGeojson:n[3]}}),r=new mf({props:{url:n[2]}}),l=new Gf({}),u=new qf({}),f=new Kf({props:{style:n[5]}}),_=new $f({}),{c(){he(e.$$.fragment),t=J(),he(r.$$.fragment),o=J(),he(l.$$.fragment),s=J(),he(u.$$.fragment),c=J(),he(f.$$.fragment),p=J(),he(_.$$.fragment)},m(h,g){pe(e,h,g),A(h,t,g),pe(r,h,g),A(h,o,g),pe(l,h,g),A(h,s,g),pe(u,h,g),A(h,c,g),pe(f,h,g),A(h,p,g),pe(_,h,g),b=!0},p(h,g){const k={};g&8&&(k.boundaryGeojson=h[3]),e.$set(k);const E={};g&4&&(E.url=h[2]),r.$set(E)},i(h){b||(z(e.$$.fragment,h),z(r.$$.fragment,h),z(l.$$.fragment,h),z(u.$$.fragment,h),z(f.$$.fragment,h),z(_.$$.fragment,h),b=!0)},o(h){W(e.$$.fragment,h),W(r.$$.fragment,h),W(l.$$.fragment,h),W(u.$$.fragment,h),W(f.$$.fragment,h),W(_.$$.fragment,h),b=!1},d(h){ge(e,h),h&&N(t),ge(r,h),h&&N(o),ge(l,h),h&&N(s),ge(u,h),h&&N(c),ge(f,h),h&&N(p),ge(_,h)}}}function rc(n){let e,t,r;return t=new mu({props:{style:n[5],$$slots:{default:[nc]},$$scope:{ctx:n}}}),{c(){e=F("div"),he(t.$$.fragment),Y(e,"slot","main")},m(o,l){A(o,e,l),pe(t,e,null),r=!0},p(o,l){const s={};l&8204&&(s.$$scope={dirty:l,ctx:o}),t.$set(s)},i(o){r||(z(t.$$.fragment,o),r=!0)},o(o){W(t.$$.fragment,o),r=!1},d(o){o&&N(e),ge(t)}}}function ic(n){let e,t,r,o,l,s,u,c;e=new wu({props:{$$slots:{main:[rc],sidebar:[tc],nav:[ec]},$$scope:{ctx:n}}});function f(h){n[8](h)}let p={};n[0]!==void 0&&(p.open=n[0]),r=new Js({props:p}),$e.push(()=>Ot(r,"open",f,n[0]));function _(h){n[9](h)}let b={};return n[1]!==void 0&&(b.open=n[1]),s=new cu({props:b}),$e.push(()=>Ot(s,"open",_,n[1])),{c(){he(e.$$.fragment),t=J(),he(r.$$.fragment),l=J(),he(s.$$.fragment)},m(h,g){pe(e,h,g),A(h,t,g),pe(r,h,g),A(h,l,g),pe(s,h,g),c=!0},p(h,[g]){const k={};g&8204&&(k.$$scope={dirty:g,ctx:h}),e.$set(k);const E={};!o&&g&1&&(o=!0,E.open=h[0],It(()=>o=!1)),r.$set(E);const L={};!u&&g&2&&(u=!0,L.open=h[1],It(()=>u=!1)),s.$set(L)},i(h){c||(z(e.$$.fragment,h),z(r.$$.fragment,h),z(s.$$.fragment,h),c=!0)},o(h){W(e.$$.fragment,h),W(r.$$.fragment,h),W(s.$$.fragment,h),c=!1},d(h){ge(e,h),h&&N(t),ge(r,h),h&&N(l),ge(s,h)}}}function oc(n,e,t){let r=!1,o=!1,l=window.location.hostname.includes("atip.uk");const s=new URLSearchParams(window.location.search);let u=s.get("authority"),c=s.get("style")||"streets";var f=`https://atip.uk/route-snappers/${u}.bin`;l||(f=`https://atip.uk/route-snappers-dev/${u}.bin`);function p(){t(0,r=!r),t(1,o=!1)}function _(){t(1,o=!o),t(0,r=!1)}let b;Gn(async()=>{t(3,b=await h())});async function h(){const L=await(await fetch(Ys)).text(),T=JSON.parse(L);return T.features=T.features.filter(O=>O.properties.name==u),T}function g(E){r=E,t(0,r)}function k(E){o=E,t(1,o)}return[r,o,f,b,u,c,p,_,g,k]}class lc extends Ce{constructor(e){super(),Oe(this,e,oc,ic,Ie,{})}}new lc({target:document.getElementById("app")});
