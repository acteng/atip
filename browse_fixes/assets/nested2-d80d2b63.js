import{S as z,i as q,s as H,e as L,h as U,$ as he,j as p,W as ee,o as m,aP as Wr,b as V,c as Z,d as A,g as h,m as b,w as kt,l as J,t as $,n as _,p as v,X as At,Y as Lt,Z as It,_ as Pt,a7 as Ee,J as ie,K as ae,aQ as yt,u as w,k as S,D as B,I as we,N as ln,O as hr,q as Te,P as br,Q as vr,T as St,U as wr,V as kr,aX as Vr,aY as rt,a4 as _n,aZ as Xr,f as on,aO as Kr,ar as sn,ae as an,aj as yr,r as fn,F as Sr,a as Yt,v as Gt,aW as W,a_ as fe,a$ as pe,B as K,ah as Y,C as ue,ak as Q,b0 as ne,G as Mt,H as Zr,aS as Jr,ab as gn,R as Or,b1 as un,b2 as cn,E as Tr,as as Yr,ag as Qr,aU as dn,al as xr,am as hn,an as bn,ao as Dt,aV as vn,L as el,M as tl,y as nl}from"./index-015beb79.js";import{C as Se,d as Be,j as Ot,f as jt,h as le,l as R,c as Ht,k as rl,S as ll,B as ol,b as bt,G as sl}from"./StreetViewTool-a2f1218c.js";import{a as He,F as il}from"./Popup-f5f2173c.js";import{P as oe}from"./Popup-dab0bf23.js";import{R as al,C as Ve,Z as fl}from"./ZoomOutMap-dd0eaf6f.js";import{L as ul,a as cl}from"./LineMeasureController-4a614485.js";function $l(r){let e;return{c(){e=L("span"),U(e,"class","svelte-kzgqtg"),he(e,"background",r[0])},m(n,t){p(n,e,t)},p(n,[t]){t&1&&he(e,"background",n[0])},i:ee,o:ee,d(n){n&&m(e)}}}function pl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class me extends z{constructor(e){super(),q(this,e,pl,$l,H,{color:0})}}const ml="/atip/browse_fixes/assets/help-d011708a.svg";function _l(r){let e,n;const t=r[1].default,l=At(t,r,r[4],null);return{c(){e=L("div"),l&&l.c(),U(e,"class","govuk-prose")},m(o,i){p(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Lt(l,t,o,o[4],n?Pt(t,o[4],i,null):It(o[4]),null)},i(o){n||($(l,o),n=!0)},o(o){_(l,o),n=!1},d(o){o&&m(e),l&&l.d(o)}}}function gl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[_l]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Wr({props:a}),V.push(()=>Z(t,"open",s)),{c(){e=L("button"),e.innerHTML=`<img src="${ml}" title="Help" alt="Help"/>`,n=A(),h(t.$$.fragment),U(e,"class","svelte-7d9d1l")},m(f,c){p(f,e,c),p(f,n,c),b(t,f,c),o=!0,i||(u=kt(e,"click",r[2]),i=!0)},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,g.open=f[0],J(()=>l=!1)),t.$set(g)},i(f){o||($(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){f&&(m(e),m(n)),v(t,f),i=!1,u()}}}function dl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class se extends z{constructor(e){super(),q(this,e,dl,gl,H,{})}}function wn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function kn(r){let e,n,t,l=r[1]+"",o,i,u;return n=new me({props:{color:r[2]}}),{c(){e=L("li"),h(n.$$.fragment),t=A(),o=w(l),i=A()},m(s,a){p(s,e,a),b(n,e,null),S(e,t),S(e,o),S(e,i),u=!0},p(s,a){const f={};a&1&&(f.color=s[2]),n.$set(f),(!u||a&1)&&l!==(l=s[1]+"")&&B(o,l)},i(s){u||($(n.$$.fragment,s),u=!0)},o(s){_(n.$$.fragment,s),u=!1},d(s){s&&m(e),v(n)}}}function hl(r){let e,n,t=Ee(r[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=kn(wn(r,t,i));const o=i=>_(l[i],1,1,()=>{l[i]=null});return{c(){e=L("ul");for(let i=0;i<l.length;i+=1)l[i].c()},m(i,u){p(i,e,u);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);n=!0},p(i,u){if(u&1){t=Ee(i[0]);let s;for(s=0;s<t.length;s+=1){const a=wn(i,t,s);l[s]?(l[s].p(a,u),$(l[s],1)):(l[s]=kn(a),l[s].c(),$(l[s],1),l[s].m(e,null))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)$(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)_(l[u]);n=!1},d(i){i&&m(e),yt(l,i)}}}function bl(r){let e,n;return e=new Se({props:{label:"Legend",$$slots:{default:[hl]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class wl extends z{constructor(e){super(),q(this,e,vl,bl,H,{rows:0})}}function yn(r){let e=r[0],n,t,l=Sn(r);return{c(){l.c(),n=we()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&H(e,e=o[0])?(ie(),_(l,1,1,ee),ae(),l=Sn(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){_(l),t=!1},d(o){o&&m(n),l.d(o)}}}function Sn(r){let e;const n=r[10].default,t=At(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Lt(t,n,l,l[9],e?Pt(n,l[9],o,null):It(l[9]),null)},i(l){e||($(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function kl(r){let e,n,t=r[0]&&yn(r);return{c(){t&&t.c(),e=we()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=yn(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),_(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){_(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function yl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=ln("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=hr();Te(r,f,k=>n(8,l=k)),Te(r,c,k=>n(0,t=k));let g,d=!0;return br(()=>{t&&g&&l&&(vr(f,t,g),St(c,t=null,t),n(6,g=void 0))}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"tiles"in k&&n(4,s=k.tiles),"tileSize"in k&&n(5,a=k.tileSize),"$$scope"in k&&n(9,i=k.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(St(c,t=u,t),wr(l,t,kr({type:"raster",tiles:s,tileSize:a}),k=>l&&k===t,()=>{t&&(n(6,g=l==null?void 0:l.getSource(t)),n(7,d=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,g=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&g&&(d?n(7,d=!1):g.setTiles(s))},[t,f,c,u,s,a,g,d,l,i,o]}class Sl extends z{constructor(e){super(),q(this,e,yl,kl,H,{id:3,tiles:4,tileSize:5})}}function Ol(r){let e;const n=r[16].default,t=At(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Lt(t,n,l,l[24],e?Pt(n,l[24],o,null):It(l[24]),null)},i(l){e||($(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Tl(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Ol]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Vr({props:o}),V.push(()=>Z(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],J(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Cl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=ln("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:O=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:N=!0}=e;function C(F){j=F,n(0,j)}function E(F){rt.call(this,r,F)}function M(F){rt.call(this,r,F)}function I(F){rt.call(this,r,F)}function P(F){rt.call(this,r,F)}function G(F){rt.call(this,r,F)}function x(F){rt.call(this,r,F)}return r.$$set=F=>{"id"in F&&n(1,o=F.id),"source"in F&&n(2,i=F.source),"sourceLayer"in F&&n(3,u=F.sourceLayer),"beforeId"in F&&n(4,s=F.beforeId),"beforeLayerType"in F&&n(5,a=F.beforeLayerType),"paint"in F&&n(6,f=F.paint),"layout"in F&&n(7,c=F.layout),"filter"in F&&n(8,g=F.filter),"applyToClusters"in F&&n(9,d=F.applyToClusters),"minzoom"in F&&n(10,k=F.minzoom),"maxzoom"in F&&n(11,y=F.maxzoom),"hoverCursor"in F&&n(12,T=F.hoverCursor),"manageHoverState"in F&&n(13,O=F.manageHoverState),"hovered"in F&&n(0,j=F.hovered),"eventsIfTopMost"in F&&n(14,D=F.eventsIfTopMost),"interactive"in F&&n(15,N=F.interactive),"$$scope"in F&&n(24,l=F.$$scope)},[j,o,i,u,s,a,f,c,g,d,k,y,T,O,D,N,t,C,E,M,I,P,G,x,l]}class Al extends z{constructor(e){super(),q(this,e,Cl,Tl,H,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function On(r){let e=r[0],n,t,l=Tn(r);return{c(){l.c(),n=we()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&H(e,e=o[0])?(ie(),_(l,1,1,ee),ae(),l=Tn(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){_(l),t=!1},d(o){o&&m(n),l.d(o)}}}function Tn(r){let e;const n=r[9].default,t=At(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Lt(t,n,l,l[8],e?Pt(n,l[8],o,null):It(l[8]),null)},i(l){e||($(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Ll(r){let e,n,t=r[0]&&On(r);return{c(){t&&t.c(),e=we()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=On(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),_(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){_(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function Il(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=ln("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!_n.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let k=new Xr;_n.addProtocol("pmtiles",k.tile)}const{map:c,self:g}=hr();Te(r,c,k=>n(7,l=k)),Te(r,g,k=>n(0,t=k));let d;return br(()=>{t&&l&&(vr(c,t,d),St(g,t=null,t),d=void 0)}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"url"in k&&n(4,s=k.url),"tiles"in k&&n(5,a=k.tiles),"promoteId"in k&&n(6,f=k.promoteId),"$$scope"in k&&n(8,i=k.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(St(g,t=u,t),wr(l,t,kr({type:"vector",url:s,tiles:a,promoteId:f}),k=>l&&k===t,()=>{t&&(d=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{d=l==null?void 0:l.getSource(u)}))},[t,c,g,u,s,a,f,l,i,o]}class ce extends z{constructor(e){super(),q(this,e,Il,Ll,H,{id:3,url:4,tiles:5,promoteId:6})}}function Pl(r){let e;return{c(){e=L("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ml(r){let e,n,t=r[0]=="Private (development)"&&Pl();return{c(){t&&t.c(),e=A(),n=L("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),p(l,e,o),p(l,n,o)},p:ee,d(l){l&&(m(e),m(n)),t&&t.d(l)}}}function jl(r){let e,n,t,l,o,i;return o=new se({props:{$$slots:{default:[Ml]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("App version: "),t=w(r[0]),l=A(),h(o.$$.fragment)},m(u,s){p(u,e,s),S(e,n),S(e,t),S(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||($(o.$$.fragment,u),i=!0)},o(u){_(o.$$.fragment,u),i=!1},d(u){u&&m(e),v(o)}}}function El(r){return[on()]}class Nl extends z{constructor(e){super(),q(this,e,El,jl,H,{})}}const Dl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var ge=Uint8Array,Ye=Uint16Array,Cr=Uint32Array,Ar=new ge([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Lr=new ge([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Fl=new ge([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ir=function(r,e){for(var n=new Ye(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Cr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Pr=Ir(Ar,2),Mr=Pr[0],Rl=Pr[1];Mr[28]=258,Rl[258]=28;var Bl=Ir(Lr,0),Gl=Bl[0],Qt=new Ye(32768);for(var re=0;re<32768;++re){var qe=(re&43690)>>>1|(re&21845)<<1;qe=(qe&52428)>>>2|(qe&13107)<<2,qe=(qe&61680)>>>4|(qe&3855)<<4,Qt[re]=((qe&65280)>>>8|(qe&255)<<8)>>>1}var wt=function(r,e,n){for(var t=r.length,l=0,o=new Ye(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Ye(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Ye(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,g=c|(1<<f)-1;c<=g;++c)u[Qt[c]>>>s]=a}else for(u=new Ye(t),l=0;l<t;++l)r[l]&&(u[l]=Qt[i[r[l]-1]++]>>>15-r[l]);return u},Et=new ge(288);for(var re=0;re<144;++re)Et[re]=8;for(var re=144;re<256;++re)Et[re]=9;for(var re=256;re<280;++re)Et[re]=7;for(var re=280;re<288;++re)Et[re]=8;var jr=new ge(32);for(var re=0;re<32;++re)jr[re]=5;var Hl=wt(Et,9,1),Ul=wt(jr,5,1),qt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},ke=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Wt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},zl=function(r){return(r+7)/8|0},$n=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Ye:r.BYTES_PER_ELEMENT==4?Cr:ge)(n-e);return t.set(r.subarray(e,n)),t},ql=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ye=function(r,e,n){var t=new Error(e||ql[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,ye),!n)throw t;return t},Wl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new ge(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new ge(t*3));var i=function(tt){var Ze=e.length;if(tt>Ze){var nt=new ge(Math.max(Ze*2,tt));nt.set(e),e=nt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,g=n.m,d=n.n,k=t*8;do{if(!f){u=ke(r,s,1);var y=ke(r,s+1,3);if(s+=3,y)if(y==1)f=Hl,c=Ul,g=9,d=5;else if(y==2){var D=ke(r,s,31)+257,N=ke(r,s+10,15)+4,C=D+ke(r,s+5,31)+1;s+=14;for(var E=new ge(C),M=new ge(19),I=0;I<N;++I)M[Fl[I]]=ke(r,s+I*3,7);s+=N*3;for(var P=qt(M),G=(1<<P)-1,x=wt(M,P,1),I=0;I<C;){var F=x[ke(r,s,G)];s+=F&15;var T=F>>>4;if(T<16)E[I++]=T;else{var X=0,$e=0;for(T==16?($e=3+ke(r,s,3),s+=2,X=E[I-1]):T==17?($e=3+ke(r,s,7),s+=3):T==18&&($e=11+ke(r,s,127),s+=7);$e--;)E[I++]=X}}var _t=E.subarray(0,D),be=E.subarray(D);g=qt(_t),d=qt(be),f=wt(_t,g,1),c=wt(be,d,1)}else ye(1);else{var T=zl(s)+4,O=r[T-4]|r[T-3]<<8,j=T+O;if(j>t){o&&ye(0);break}l&&i(a+O),e.set(r.subarray(T,j),a),n.b=a+=O,n.p=s=j*8,n.f=u;continue}if(s>k){o&&ye(0);break}}l&&i(a+131072);for(var xe=(1<<g)-1,gt=(1<<d)-1,et=s;;et=s){var X=f[Wt(r,s)&xe],_e=X>>>4;if(s+=X&15,s>k){o&&ye(0);break}if(X||ye(2),_e<256)e[a++]=_e;else if(_e==256){et=s,f=null;break}else{var dt=_e-254;if(_e>264){var I=_e-257,Fe=Ar[I];dt=ke(r,s,(1<<Fe)-1)+Mr[I],s+=Fe}var ze=c[Wt(r,s)&gt],Ke=ze>>>4;ze||ye(3),s+=ze&15;var be=Gl[Ke];if(Ke>3){var Fe=Lr[Ke];be+=Wt(r,s)&(1<<Fe)-1,s+=Fe}if(s>k){o&&ye(0);break}l&&i(a+131072);for(var ht=a+dt;a<ht;a+=4)e[a]=e[a-be],e[a+1]=e[a+1-be],e[a+2]=e[a+2-be],e[a+3]=e[a+3-be];a=ht}}n.l=f,n.p=et,n.b=a,n.f=u,f&&(u=1,n.m=g,n.d=c,n.n=d)}while(!u);return a==e.length?e:$n(e,0,a)},Vl=new ge(0),je=function(r,e){return r[e]|r[e+1]<<8},Oe=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Vt=function(r,e){return Oe(r,e)+Oe(r,e+4)*4294967296};function Xl(r,e){return Wl(r,e)}var xt=typeof TextDecoder<"u"&&new TextDecoder,Kl=0;try{xt.decode(Vl,{stream:!0}),Kl=1}catch{}var Zl=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,$n(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Er(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(xt)return xt.decode(r);var l=Zl(r),o=l[0],i=l[1];return i.length&&ye(8),o}}var Jl=function(r,e){return e+30+je(r,e+26)+je(r,e+28)},Yl=function(r,e,n){var t=je(r,e+28),l=Er(r.subarray(e+46,e+46+t),!(je(r,e+8)&2048)),o=e+46+t,i=Oe(r,e+20),u=n&&i==4294967295?Ql(r,o):[i,Oe(r,e+24),Oe(r,e+42)],s=u[0],a=u[1],f=u[2];return[je(r,e+10),s,a,l,o+je(r,e+30)+je(r,e+32),f]},Ql=function(r,e){for(;je(r,e)!=1;e+=4+je(r,e+2));return[Vt(r,e+12),Vt(r,e+4),Vt(r,e+20)]};function xl(r,e){for(var n={},t=r.length-22;Oe(r,t)!=101010256;--t)(!t||r.length-t>65558)&&ye(13);var l=je(r,t+8);if(!l)return{};var o=Oe(r,t+16),i=o==4294967295||l==65535;if(i){var u=Oe(r,t-12);i=Oe(r,u)==101075792,i&&(l=Oe(r,u+32),o=Oe(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=Yl(r,o,i),c=f[0],g=f[1],d=f[2],k=f[3],y=f[4],T=f[5],O=Jl(r,T);o=y,(!s||s({name:k,size:g,originalSize:d,compression:c}))&&(c?c==8?n[k]=Xl(r.subarray(O,O+g),new ge(d)):ye(14,"unknown compression type "+c):n[k]=$n(r,O,O+g))}return n}function eo(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Xt):Xt(r)}function Xt(r){var e=new Uint8Array(r),n=xl(e);return Promise.resolve(to(n))}function to(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Er(r[l])}return e}function Ne(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Qe(t)===e)return t;n++}}function Nt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Qe(l)===e&&n.push(l),t++}return n}function Ut(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Qe(l)===e&&n(l,t):n(l,t),t++}}function no(r,e,n){var t=[];return Ut(r,e,function(l,o){t.push(n(l,o))}),t}var ro=/.+\:/;function Qe(r){return r.tagName.replace(ro,"")}function Nr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Qe(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Nr(r.childNodes[t]),t++;return e+="</"+Qe(r)+">",e}function lo(r){var e=r.documentElement,n=Ne(e,"sheetData"),t=[];return Ut(n,"row",function(l){Ut(l,"c",function(o){t.push(o)})}),t}function oo(r,e){return Ne(e,"v")}function so(r,e){if(e.firstChild&&Qe(e.firstChild)==="is"&&e.firstChild.firstChild&&Qe(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function io(r){var e=r.documentElement,n=Ne(e,"dimension");if(n)return n.getAttribute("ref")}function ao(r){var e=r.documentElement,n=Ne(e,"cellStyleXfs");return n?Nt(n,"xf"):[]}function fo(r){var e=r.documentElement,n=Ne(e,"cellXfs");return n?Nt(n,"xf"):[]}function uo(r){var e=r.documentElement,n=Ne(e,"numFmts");return n?Nt(n,"numFmt"):[]}function co(r){var e=r.documentElement;return no(e,"si",function(n){var t=Ne(n,"t");if(t)return t.textContent;var l="";return Ut(n,"r",function(o){l+=Ne(o,"t").textContent}),l})}function $o(r){var e=r.documentElement;return Ne(e,"workbookPr")}function po(r){var e=r.documentElement;return Nt(e,"Relationship")}function mo(r){var e=r.documentElement,n=Ne(e,"sheets");return Nt(n,"sheet")}function _o(r,e){var n=e.createDocument(r),t={},l=$o(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return mo(n).forEach(o),t}function go(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Kt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Kt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Kt(u);break}};return po(n).forEach(l),t}function Kt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Cn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function An(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cn(Object(n),!0).forEach(function(t){ho(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ho(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function bo(r,e){if(!r)return{};var n=e.createDocument(r),t=ao(n).map(Zt),l=uo(n).map(vo).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?An(An({},t[u.xfId]),Zt(u,l)):Zt(u,l)};return fo(n).map(o)}function vo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Zt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function wo(r,e){return r?co(e.createDocument(r)):[]}function Dr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function ko(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=yo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yo(r,e){if(r){if(typeof r=="string")return Ln(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(r,e)}}function Ln(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function So(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Oo.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&Ao(l.numberFormat.template))return!0}}var Oo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],To=/^\[\$-414\]/,Co=/;@$/;function Ao(r){r=r.toLowerCase(),r=r.replace(To,""),r=r.replace(Co,"");for(var e=r.split(/\W+/),n=ko(e),t;!(t=n()).done;){var l=t.value;if(Lo.indexOf(l)<0)return!1}return!0}var Lo=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Io(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Jt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Jt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Jt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Po(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var g=Number(r);if(isNaN(g))throw new Error('Invalid "numeric" cell value: '.concat(r));r=g,So(r,o(),i,a)&&(r=Dr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Po(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Jt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Mo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function jo(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function Eo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Mo.indexOf(r[n]),n++;return e}function Fr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Eo(r[0].trim())]}function No(r,e,n,t,l,o,i){var u=Fr(r.getAttribute("r")),s=oo(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:Io(a,f,{getInlineStringValue:function(){return so(e,r)},getInlineStringXml:function(){return Nr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function Do(r,e,n,t,l,o){var i=lo(r);return i.length===0?[]:i.map(function(u){return No(u,r,e,n,t,l,o)})}function Fo(r,e){return Ho(r)||Go(r,e)||Bo(r,e)||Ro()}function Ro(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bo(r,e){if(r){if(typeof r=="string")return In(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(r,e)}}function In(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Go(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ho(r){if(Array.isArray(r))return r}function Uo(r){var e=io(r);if(e)return e=e.split(":").map(Fr).map(function(n){var t=Fo(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function zo(r,e,n,t,l,o){var i=e.createDocument(r),u=Do(i,e,n,t,l,o),s=Uo(i)||jo(u);return{cells:u,dimensions:s}}function qo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Wo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wo(r,e){if(r){if(typeof r=="string")return Pn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(r,e)}}function Pn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Vo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=qo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Xo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ko(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ko(r,e){if(r){if(typeof r=="string")return Mn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(r,e)}}function Mn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Zo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Xo(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Jo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Rr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yo(r,e){return es(r)||xo(r,e)||Rr(r,e)||Qo()}function Qo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rr(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function xo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function es(r){if(Array.isArray(r))return r}function ts(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Yo(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=Jo(t),g;!(g=c()).done;){var d=g.value,k=d.row-1,y=d.column-1;y<i&&k<u&&(s[k][y]=d.value)}var T=e.rowMap;if(T)for(var O=0;O<s.length;)T[O]=O,O++;return s=Vo(Zo(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(s=e.transformData(s)),s}function ns(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=rs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rs(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Nn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function ls(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nn(Object(n),!0).forEach(function(t){os(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function os(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ss(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=ls({sheet:1},n));var t=function(g){if(!r[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return r[g]},l=go(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?wo(t(l.sharedStrings),e):[],i=l.styles?bo(t(l.styles),e):{},u=_o(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var g=c.name;return{name:g}});var s=is(n.sheet,u.sheets);if(!s||!l.sheets[s])throw as(n.sheet,u.sheets);var a=zo(t(l.sheets[s]),e,o,i,u,n),f=ts(a,n);return n.properties?{data:f,properties:u}:f}function is(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=ns(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function as(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function en(r){"@babel/helpers - typeof";return en=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(r)}function Dn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function fs(r,e,n){return e&&Dn(r.prototype,e),n&&Dn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function us(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function cs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Tt(r,e)}function $s(r){var e=Br();return function(){var t=Ct(r),l;if(e){var o=Ct(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return ps(this,l)}}function ps(r,e){if(e&&(en(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ms(r)}function ms(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function tn(r){var e=typeof Map=="function"?new Map:void 0;return tn=function(t){if(t===null||!_s(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Rt(t,arguments,Ct(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Tt(l,t)},tn(r)}function Rt(r,e,n){return Br()?Rt=Reflect.construct:Rt=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Tt(a,i.prototype),a},Rt.apply(null,arguments)}function Br(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _s(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Tt(r,e){return Tt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Tt(r,e)}function Ct(r){return Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ct(r)}var de=function(r){cs(n,r);var e=$s(n);function n(t){var l;return us(this,n),l=e.call(this,"invalid"),l.reason=t,l}return fs(n)}(tn(Error));function gs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new de("not_a_number")}if(typeof r!="number")throw new de("not_a_number");if(isNaN(r))throw new de("invalid_number");if(!isFinite(r))throw new de("out_of_bounds");return r}function ds(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new de("invalid_number");if(!isFinite(r))throw new de("out_of_bounds");return String(r)}throw new de("not_a_string")}function hs(r){if(typeof r=="boolean")return r;throw new de("not_a_boolean")}function bs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new de("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new de("invalid_number");if(!isFinite(r))throw new de("out_of_bounds");var t=Dr(r,n);if(isNaN(t.valueOf()))throw new de("out_of_bounds");return t}throw new de("not_a_date")}function vs(r,e){return ys(r)||ks(r,e)||Gr(r,e)||ws()}function ws(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ks(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ys(r){if(Array.isArray(r))return r}function nn(r){"@babel/helpers - typeof";return nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(r)}function Ss(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Gr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gr(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Rn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Bn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(t){Os(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Os(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Gn={isColumnOriented:!1};function Ts(r,e,n){n?n=Bn(Bn({},Gn),n):n=Gn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;Is(e),l&&(r=Ls(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Hr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var g=Ss(a),d;!(d=g()).done;){var k=d.value;k.row=o[k.row-1]+1}return{rows:s,errors:a}}function Hr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var g=f[a],d=r[g],k=nn(d.type)==="object"&&!Array.isArray(d.type),y=e[t.indexOf(g)];y===void 0&&(y=null);var T=void 0,O=void 0,j=void 0;if(k)T=Hr(d.type,e,n,t,l,o);else if(y===null)T=null;else if(Array.isArray(d.type)){var D=!1,N=As(y).map(function(E){var M=Hn(E,d,o);return M.error&&(T=E,O=M.error,j=M.reason),M.value!==null&&(D=!0),M.value});O||(T=D?N:null)}else{var C=Hn(y,d,o);O=C.error,j=C.reason,T=O?y:C.value}!O&&T===null&&d.required&&(O="required"),O?(O={error:O,row:n+1,column:g,value:T},j&&(O.reason=j),d.type&&(O.type=d.type),l.push(O)):(u&&T!==null&&(u=!1),(T!==null||o.includeNullValues)&&(i[d.prop]=T))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function Hn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=lt(r,e.parse):e.type?t=Cs(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function lt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Cs(r,e,n){switch(e){case String:return lt(r,ds);case Number:return lt(r,gs);case Date:return lt(r,function(t){return bs(t,{properties:n.properties})});case Boolean:return lt(r,hs);default:if(typeof e=="function")return lt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Ur(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Ur(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function As(r){for(var e=[],n=0;n<r.length;){var t=Ur(r,",",n),l=vs(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var Ls=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Is(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function rn(r){"@babel/helpers - typeof";return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(r)}function zr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;rn(o)==="object"&&(o=Object.keys(r[l])[0],i=zr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var Ps=["schema","map"];function Un(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Ft(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Un(Object(n),!0).forEach(function(t){Ms(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ms(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function js(r,e){if(r==null)return{};var n=Es(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Es(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Ns(r,e,n){var t=n.schema,l=n.map,o=js(n,Ps);!t&&l&&(t=zr(l));var i=ss(r,e,Ft(Ft({},o),{},{properties:t||o.properties}));return t?Ts(i.data,t,Ft(Ft({},o),{},{properties:i.properties})):i}function Ds(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return eo(r).then(function(n){return Ns(n,Dl,e)})}function Fs(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>Rs(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(l.browse.num_features=l.browse.num_features!==void 0?l.browse.num_features+1:1,t.properties.funding_programme=l.browse.funding_programme,t.id=n++)}return e}function Rs(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Bs(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ds(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Kr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function qr(r){return sn(["get","intervention_type"],{area:Be.area,route:Be.route,crossing:Be.crossing,other:Be.other},"white")}function zn(r){return[["Areas",Be.area],["Routes",Be.route],["Crossings",Be.crossing],["Other",Be.other]]}const te={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3"]},Ge=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Gs(r){let e,n,t,l,o;function i(s){r[4](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Ot({props:u}),V.push(()=>Z(e,"value",i)),e.$on("change",r[2]),l=new wl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],J(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Hs(r,e,n){let t;Te(r,an,a=>n(5,t=a));let{schemes:l}=e,o="interventionType",i=zn();function u(){var f;let a;if(o=="interventionType")a=qr(),n(1,i=zn());else{let c=new Set;for(let y of l.values())(f=y.browse)!=null&&f.funding_programme&&c.add(y.browse.funding_programme);let g=Array.from(c);g.sort(),n(1,i=[]);let d={},k=0;for(let y of g){let T=te.funding_programmes[k++%te.funding_programmes.length];d[y]=T,i.push([y,T])}a=sn(["get","funding_programme"],d,"grey"),n(1,i)}t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function s(a){o=a,n(0,o)}return r.$$set=a=>{"schemes"in a&&n(3,l=a.schemes)},[o,i,u,l,s]}class Us extends z{constructor(e){super(),q(this,e,Hs,Gs,H,{schemes:3})}}const qn=yr(!0),Bt=yr("");function zs(r){let e;return{c(){e=w("Clear")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function qs(r){let e,n,t,l,o,i;return t=new Yt({props:{$$slots:{default:[zs]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=L("input"),n=A(),h(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterText")},m(u,s){p(u,e,s),Gt(e,r[5]),p(u,n,s),b(t,u,s),l=!0,o||(i=kt(e,"input",r[12]),o=!0)},p(u,s){s&32&&e.value!==u[5]&&Gt(e,u[5]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||($(t.$$.fragment,u),l=!0)},o(u){_(t.$$.fragment,u),l=!1},d(u){u&&(m(e),m(n)),v(t,u),o=!1,i()}}}function Ws(r){let e,n,t,l,o,i,u,s,a,f;function c(y){r[10](y)}let g={label:"Authority or region",id:"filterAuthority",choices:r[6],emptyOption:!0};r[3]!==void 0&&(g.value=r[3]),e=new Ot({props:g}),V.push(()=>Z(e,"value",c));function d(y){r[11](y)}let k={label:"Funding programme",id:"filterFundingProgramme",choices:r[7],emptyOption:!0};return r[4]!==void 0&&(k.value=r[4]),l=new Ot({props:k}),V.push(()=>Z(l,"value",d)),u=new Sr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[qs]},$$scope:{ctx:r}}}),a=new Us({props:{schemes:r[2]}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment),i=A(),h(u.$$.fragment),s=A(),h(a.$$.fragment)},m(y,T){b(e,y,T),p(y,t,T),b(l,y,T),p(y,i,T),b(u,y,T),p(y,s,T),b(a,y,T),f=!0},p(y,T){const O={};T&64&&(O.choices=y[6]),!n&&T&8&&(n=!0,O.value=y[3],J(()=>n=!1)),e.$set(O);const j={};T&128&&(j.choices=y[7]),!o&&T&16&&(o=!0,j.value=y[4],J(()=>o=!1)),l.$set(j);const D={};T&65568&&(D.$$scope={dirty:T,ctx:y}),u.$set(D);const N={};T&4&&(N.schemes=y[2]),a.$set(N)},i(y){f||($(e.$$.fragment,y),$(l.$$.fragment,y),$(u.$$.fragment,y),$(a.$$.fragment,y),f=!0)},o(y){_(e.$$.fragment,y),_(l.$$.fragment,y),_(u.$$.fragment,y),_(a.$$.fragment,y),f=!1},d(y){y&&(m(t),m(i),m(s)),v(e,y),v(l,y),v(u,y),v(a,y)}}}function Vs(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[8].route.toLocaleString()+"",i,u,s=r[8].area.toLocaleString()+"",a,f,c=r[8].crossing.toLocaleString()+"",g,d,k=r[8].other.toLocaleString()+"",y,T,O=Wn(r[8].totalLength).toFixed(1)+"",j,D;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),g=w(c),d=w(" crossings, "),y=w(k),T=w(`
    other, with total LineString length of `),j=w(O),D=w(" miles)")},m(N,C){p(N,e,C),p(N,t,C),p(N,l,C),p(N,i,C),p(N,u,C),p(N,a,C),p(N,f,C),p(N,g,C),p(N,d,C),p(N,y,C),p(N,T,C),p(N,j,C),p(N,D,C)},p(N,C){C&1&&n!==(n=N[0].size.toLocaleString()+"")&&B(t,n),C&256&&o!==(o=N[8].route.toLocaleString()+"")&&B(i,o),C&256&&s!==(s=N[8].area.toLocaleString()+"")&&B(a,s),C&256&&c!==(c=N[8].crossing.toLocaleString()+"")&&B(g,c),C&256&&k!==(k=N[8].other.toLocaleString()+"")&&B(y,k),C&256&&O!==(O=Wn(N[8].totalLength).toFixed(1)+"")&&B(j,O)},d(N){N&&(m(e),m(t),m(l),m(i),m(u),m(a),m(f),m(g),m(d),m(y),m(T),m(j),m(D))}}}function Xs(r){let e,n,t;function l(i){r[14](i)}let o={id:"show-schemes",$$slots:{default:[Vs]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),V.push(()=>Z(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65793&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],J(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ks(r){let e,n,t,l;return e=new Se({props:{label:"Filters",$$slots:{default:[Ws]},$$scope:{ctx:r}}}),t=new jt({props:{small:!0,$$slots:{default:[Xs]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65788&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65795&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Wn(r){return r*621371e-9}function Zs(r,e,n){let t;Te(r,Bt,D=>n(5,t=D));let{schemesGj:l}=e,{schemes:o}=e,{schemesToBeShown:i=new Set}=e,{show:u=!0}=e,s=[],a="",f=[],c="",g={area:0,route:0,crossing:0,other:0,totalLength:0};fn(()=>{var C,E;let D=new Set,N=new Set;for(let M of o.values())(C=M.browse)!=null&&C.authority_or_region&&D.add(M.browse.authority_or_region),(E=M.browse)!=null&&E.funding_programme&&N.add(M.browse.funding_programme);n(6,s=Array.from(D.entries())),s.sort(),n(7,f=Array.from(N.entries())),f.sort()});function d(D,N,C){let E=D.toLowerCase(),M=P=>{var G,x,F,X;if(E&&!((G=P.properties.name)!=null&&G.toLowerCase().includes(E))&&!((x=P.properties.description)!=null&&x.toLowerCase().includes(E)))return!1;if(N||C){let $e=o.get(P.properties.scheme_reference);if(N&&((F=$e.browse)==null?void 0:F.authority_or_region)!=N||C&&((X=$e.browse)==null?void 0:X.funding_programme)!=C)return!1}return!0};n(0,i=new Set(l.features.filter(M).map(P=>P.properties.scheme_reference))),n(8,g={area:0,route:0,crossing:0,other:0,totalLength:0});let I=P=>{var G,x;return!(!i.has(P.properties.scheme_reference)||E&&!((G=P.properties.name)!=null&&G.toLowerCase().includes(E))&&!((x=P.properties.description)!=null&&x.toLowerCase().includes(E)))};for(let P of l.features)I(P)?(delete P.properties.hide_while_editing,n(8,g[P.properties.intervention_type]++,g),P.geometry.type=="LineString"&&P.properties.length_meters&&n(8,g.totalLength+=P.properties.length_meters,g)):P.properties.hide_while_editing=!0;n(9,l),n(8,g)}function k(D){a=D,n(3,a)}function y(D){c=D,n(4,c)}function T(){t=this.value,Bt.set(t)}const O=()=>St(Bt,t="",t);function j(D){u=D,n(1,u)}return r.$$set=D=>{"schemesGj"in D&&n(9,l=D.schemesGj),"schemes"in D&&n(2,o=D.schemes),"schemesToBeShown"in D&&n(0,i=D.schemesToBeShown),"show"in D&&n(1,u=D.show)},r.$$.update=()=>{r.$$.dirty&56&&d(t,a,c)},[i,u,o,a,c,t,s,f,g,l,k,y,T,O,j]}class Js extends z{constructor(e){super(),q(this,e,Zs,Ks,H,{schemesGj:9,schemes:2,schemesToBeShown:0,show:1})}}function Ys(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qs(r){let e,n,t,l,o;return t=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ys]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data  Crown copyright and database right
  2023.`)},m(i,u){p(i,e,u),S(e,n),b(t,e,null),S(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||($(t.$$.fragment,i),o=!0)},o(i){_(t.$$.fragment,i),o=!1},d(i){i&&m(e),v(t)}}}class De extends z{constructor(e){super(),q(this,e,null,Qs,H,{})}}function Vn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Xn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Kn(r){let e,n;return{c(){e=L("span"),n=w(`
    `),he(e,"background",r[5]),he(e,"width","100%"),he(e,"border","1px solid black")},m(t,l){p(t,e,l),S(e,n)},p(t,l){l&1&&he(e,"background",t[5])},d(t){t&&m(e)}}}function Zn(r){let e,n=r[2]+"",t;return{c(){e=L("span"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&B(t,n)},d(l){l&&m(e)}}}function xs(r){let e,n,t,l=Ee(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Kn(Xn(r,l,s));let i=Ee(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Zn(Vn(r,i,s));return{c(){e=L("div");for(let s=0;s<o.length;s+=1)o[s].c();n=A(),t=L("div");for(let s=0;s<u.length;s+=1)u[s].c();he(e,"display","flex"),he(t,"display","flex"),he(t,"justify-content","space-between")},m(s,a){p(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);p(s,n,a),p(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=Ee(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Xn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Kn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=Ee(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Vn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Zn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:ee,o:ee,d(s){s&&(m(e),m(n),m(t)),yt(o,s),yt(u,s)}}}function ei(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ue extends z{constructor(e){super(),q(this,e,ei,xs,H,{colorScale:0,limits:1})}}function Jn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function ti(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ni(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ri(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function li(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function oi(r){let e,n,t,l,o,i,u,s,a,f,c,g;return t=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ni]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ri]},$$scope:{ctx:r}}}),f=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[li]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=A(),s=L("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(d,k){p(d,e,k),S(e,n),b(t,e,null),S(e,l),b(o,e,null),S(e,i),p(d,u,k),p(d,s,k),S(s,a),b(f,s,null),S(s,c),g=!0},p(d,k){const y={};k&65536&&(y.$$scope={dirty:k,ctx:d}),t.$set(y);const T={};k&65536&&(T.$$scope={dirty:k,ctx:d}),o.$set(T);const O={};k&65536&&(O.$$scope={dirty:k,ctx:d}),f.$set(O)},i(d){g||($(t.$$.fragment,d),$(o.$$.fragment,d),$(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(m(e),m(u),m(s)),v(t),v(o),v(f)}}}function si(r){let e,n,t;return n=new se({props:{$$slots:{default:[oi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Yn(r){let e,n;return e=new Ue({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ii(r){let e;return{c(){e=w("Average cars per household")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ai(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ui(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ci(r){let e,n,t,l,o,i,u,s,a,f,c,g,d,k;return o=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ai]},$$scope:{ctx:r}}}),u=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[fi]},$$scope:{ctx:r}}}),g=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ui]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=A(),t=L("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=A(),f=L("p"),c=w("License: "),h(g.$$.fragment),d=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(y,T){p(y,e,T),p(y,n,T),p(y,t,T),S(t,l),b(o,t,null),S(t,i),b(u,t,null),S(t,s),p(y,a,T),p(y,f,T),S(f,c),b(g,f,null),S(f,d),k=!0},p(y,T){const O={};T&65536&&(O.$$scope={dirty:T,ctx:y}),o.$set(O);const j={};T&65536&&(j.$$scope={dirty:T,ctx:y}),u.$set(j);const D={};T&65536&&(D.$$scope={dirty:T,ctx:y}),g.$set(D)},i(y){k||($(o.$$.fragment,y),$(u.$$.fragment,y),$(g.$$.fragment,y),k=!0)},o(y){_(o.$$.fragment,y),_(u.$$.fragment,y),_(g.$$.fragment,y),k=!1},d(y){y&&(m(e),m(n),m(t),m(a),m(f)),v(o),v(u),v(g)}}}function $i(r){let e,n,t;return n=new se({props:{$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Qn(r){let e,n;return e=new Ue({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pi(r){let e;return{c(){e=w("Population density")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function mi(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function _i(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function gi(r){let e,n,t,l,o,i,u,s,a;return t=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[mi]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[_i]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=L("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=A(),h(s.$$.fragment)},m(f,c){p(f,e,c),S(e,n),b(t,e,null),S(e,l),b(o,e,null),S(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function di(r){let e,n,t;return n=new se({props:{$$slots:{default:[gi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function xn(r){let e,n,t,l;return t=new Ue({props:{colorScale:r[4],limits:r[6]().map(Oi)}}),{c(){e=L("p"),e.textContent="(people per square kilometres)",n=A(),h(t.$$.fragment)},m(o,i){p(o,e,i),p(o,n,i),b(t,o,i),l=!0},p:ee,i(o){l||($(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),v(t,o)}}}function hi(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=L("p"),n=w("There are "),t=L("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){p(a,e,f),S(e,n),S(e,t),S(t,o),S(e,i),S(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&B(o,l),f&8192&&u!==(u=a[14]+"")&&B(s,u)},d(a){a&&m(e)}}}function bi(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=L("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=L("b"),s=w(u),a=w(`
          cars`)},m(f,c){p(f,e,c),S(e,n),S(e,l),S(e,o),S(e,i),S(i,s),S(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(l,t),c&8200&&u!==(u=f[15]+"")&&B(s,u)},d(f){f&&m(e)}}}function vi(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=L("p"),n=L("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){p(f,e,c),S(e,n),S(n,l),S(n,o),S(e,i),S(e,s),S(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(l,t),c&8192&&u!==(u=f[14]+"")&&B(s,u)},d(f){f&&m(e)}}}function wi(r){Jn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?vi:o[3]=="average_cars_per_household"?bi:hi}let t=n(r),l=t(r);return{c(){l.c(),e=we()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){Jn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function ki(r){let e,n;return e=new oe({props:{$$slots:{default:[wi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yi(r){let e,n,t,l;const o=[R(Re),{sourceLayer:Re},{paint:{"fill-color":pe(["get",r[3]],r[6](),r[4]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ki]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new He({props:i}),e.$on("click",r[5]);const u=[R(`${Re}-outline`),{sourceLayer:Re},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Q(o,[f&0&&ne(R(Re)),f&0&&{sourceLayer:Re},f&88&&{paint:{"fill-color":pe(["get",a[3]],a[6](),a[4]),"fill-opacity":K(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&8?Q(u,[f&0&&ne(R(`${Re}-outline`)),f&0&&{sourceLayer:Re},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Si(r){let e,n,t,l,o,i,u,s,a,f,c,g,d,k;function y(I){r[7](I)}let T={id:"percent_households_with_car",$$slots:{right:[si],default:[ti]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new le({props:T}),V.push(()=>Z(e,"checked",y)),e.$on("change",r[8]);let O=r[3]=="percent_households_with_car"&&Yn(r);function j(I){r[9](I)}let D={id:"average_cars_per_household",$$slots:{right:[$i],default:[ii]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),o=new le({props:D}),V.push(()=>Z(o,"checked",j)),o.$on("change",r[10]);let N=r[3]=="average_cars_per_household"&&Qn(r);function C(I){r[11](I)}let E={id:"population_density",$$slots:{right:[di],default:[pi]},$$scope:{ctx:r}};r[2]!==void 0&&(E.checked=r[2]),a=new le({props:E}),V.push(()=>Z(a,"checked",C)),a.$on("change",r[12]);let M=r[3]=="population_density"&&xn(r);return d=new ce({props:{url:`pmtiles://${fe()}/v1/${Re}.pmtiles`,$$slots:{default:[yi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),O&&O.c(),l=A(),h(o.$$.fragment),u=A(),N&&N.c(),s=A(),h(a.$$.fragment),c=A(),M&&M.c(),g=A(),h(d.$$.fragment)},m(I,P){b(e,I,P),p(I,t,P),O&&O.m(I,P),p(I,l,P),b(o,I,P),p(I,u,P),N&&N.m(I,P),p(I,s,P),b(a,I,P),p(I,c,P),M&&M.m(I,P),p(I,g,P),b(d,I,P),k=!0},p(I,[P]){const G={};P&65536&&(G.$$scope={dirty:P,ctx:I}),!n&&P&1&&(n=!0,G.checked=I[0],J(()=>n=!1)),e.$set(G),I[3]=="percent_households_with_car"?O?(O.p(I,P),P&8&&$(O,1)):(O=Yn(I),O.c(),$(O,1),O.m(l.parentNode,l)):O&&(ie(),_(O,1,1,()=>{O=null}),ae());const x={};P&65536&&(x.$$scope={dirty:P,ctx:I}),!i&&P&2&&(i=!0,x.checked=I[1],J(()=>i=!1)),o.$set(x),I[3]=="average_cars_per_household"?N?(N.p(I,P),P&8&&$(N,1)):(N=Qn(I),N.c(),$(N,1),N.m(s.parentNode,s)):N&&(ie(),_(N,1,1,()=>{N=null}),ae());const F={};P&65536&&(F.$$scope={dirty:P,ctx:I}),!f&&P&4&&(f=!0,F.checked=I[2],J(()=>f=!1)),a.$set(F),I[3]=="population_density"?M?(M.p(I,P),P&8&&$(M,1)):(M=xn(I),M.c(),$(M,1),M.m(g.parentNode,g)):M&&(ie(),_(M,1,1,()=>{M=null}),ae());const X={};P&65544&&(X.$$scope={dirty:P,ctx:I}),d.$set(X)},i(I){k||($(e.$$.fragment,I),$(O),$(o.$$.fragment,I),$(N),$(a.$$.fragment,I),$(M),$(d.$$.fragment,I),k=!0)},o(I){_(e.$$.fragment,I),_(O),_(o.$$.fragment,I),_(N),_(a.$$.fragment,I),_(M),_(d.$$.fragment,I),k=!1},d(I){I&&(m(t),m(l),m(u),m(s),m(c),m(g)),v(e,I),O&&O.d(I),v(o,I),N&&N.d(I),v(a,I),M&&M.d(I),v(d,I)}}}let Re="census_output_areas";const Oi=r=>r.toLocaleString();function Ti(r,e,n){let t=te.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(T){let O=T.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${O}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${O}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function g(T){o=T,n(1,o)}const d=()=>{n(0,l=!1),n(2,i=!1)};function k(T){i=T,n(2,i)}const y=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,g,d,k,y]}class Ci extends z{constructor(e){super(),q(this,e,Ti,Si,H,{})}}function Ai(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Li(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ii(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Li]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=A(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Pi(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ii]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Mi(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function ji(r){let e,n;return e=new oe({props:{$$slots:{default:[Mi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ei(r){let e,n,t,l;const o=[R(ot),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ji]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new He({props:i}),e.$on("click",Di);const u=[R(`${ot}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(ot)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Q(u,[f&0&&ne(R(`${ot}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Ni(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ot,$$slots:{right:[Pi],default:[Ai]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new Mt({props:{data:`${fe()}/v1/${ot}.geojson`,$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ot="combined_authorities";function Di(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Fi(r,e,n){let t=te.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ri extends z{constructor(e){super(),q(this,e,Fi,Ni,H,{})}}function Bi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Gi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hi(r){let e;return{c(){e=w(`here
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ui(r){let e,n,t,l,o,i,u,s,a;return t=new W({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Gi]},$$scope:{ctx:r}}}),o=new W({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=L("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=A(),h(s.$$.fragment)},m(f,c){p(f,e,c),S(e,n),b(t,e,null),S(e,l),b(o,e,null),S(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function zi(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ui]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function er(r){let e,n;return e=new Ue({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qi(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,g=r[4].rank.toLocaleString()+"",d,k;return{c(){e=L("p"),t=w(n),l=w(` has an IMD score of
        `),o=L("b"),u=w(i),s=A(),a=L("p"),f=w("Rank: "),c=L("b"),d=w(g),k=w(`
        / 32,844 LSOAs`)},m(y,T){p(y,e,T),S(e,t),S(e,l),S(e,o),S(o,u),p(y,s,T),p(y,a,T),S(a,f),S(a,c),S(c,d),S(a,k)},p(y,T){T&16&&n!==(n=y[4].LSOA11CD+"")&&B(t,n),T&16&&i!==(i=y[4].score+"")&&B(u,i),T&16&&g!==(g=y[4].rank.toLocaleString()+"")&&B(d,g)},d(y){y&&(m(e),m(s),m(a))}}}function Wi(r){let e,n;return e=new oe({props:{$$slots:{default:[qi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vi(r){let e,n,t,l;const o=[R(Ae),{sourceLayer:Ae},{paint:{"fill-color":pe(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Wi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new He({props:i});const u=[R(`${Ae}-outline`),{sourceLayer:Ae},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Q(o,[f&0&&ne(R(Ae)),f&0&&{sourceLayer:Ae},f&6&&{paint:{"fill-color":pe(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":K(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?Q(u,[f&0&&ne(R(`${Ae}-outline`)),f&0&&{sourceLayer:Ae},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Xi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:Ae,$$slots:{right:[zi],default:[Bi]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[0]&&er(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Ae}.pmtiles`,$$slots:{default:[Vi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],J(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=er(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Ae="imd";function Ki(r,e,n){let t=te.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Zi extends z{constructor(e){super(),q(this,e,Ki,Xi,H,{})}}function Ji(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Yi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qi(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Yi]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=A(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function xi(r){let e,n,t;return n=new se({props:{$$slots:{default:[Qi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ea(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function ta(r){let e,n;return e=new oe({props:{$$slots:{default:[ea,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function na(r){let e,n,t,l;const o=[R(st),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ta]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new He({props:i}),e.$on("click",la);const u=[R(`${st}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(st)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Q(u,[f&0&&ne(R(`${st}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function ra(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:st,$$slots:{right:[xi],default:[Ji]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new Mt({props:{data:`${fe()}/v1/${st}.geojson`,$$slots:{default:[na]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let st="local_authority_districts";function la(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function oa(r,e,n){let t=te.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class sa extends z{constructor(e){super(),q(this,e,oa,ra,H,{})}}function ia(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function aa(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fa(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ua(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ca(r){let e;return{c(){e=w("this map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function $a(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function pa(r){let e,n,t,l,o,i,u,s,a,f,c,g,d,k,y,T,O,j,D,N,C,E;return t=new W({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[aa]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[fa]},$$scope:{ctx:r}}}),u=new W({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ua]},$$scope:{ctx:r}}}),d=new W({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ca]},$$scope:{ctx:r}}}),j=new W({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[$a]},$$scope:{ctx:r}}}),C=new De({}),{c(){e=L("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=A(),f=L("p"),c=L("strong"),g=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),k=w(" to get more details."),y=A(),T=L("p"),O=w("Data from ONS Geography via "),h(j.$$.fragment),D=w(", as of November 2022."),N=A(),h(C.$$.fragment)},m(M,I){p(M,e,I),S(e,n),b(t,e,null),S(e,l),b(o,e,null),S(e,i),b(u,e,null),S(e,s),p(M,a,I),p(M,f,I),S(f,c),S(c,g),b(d,c,null),S(c,k),p(M,y,I),p(M,T,I),S(T,O),b(j,T,null),S(T,D),p(M,N,I),b(C,M,I),E=!0},p(M,I){const P={};I&16&&(P.$$scope={dirty:I,ctx:M}),t.$set(P);const G={};I&16&&(G.$$scope={dirty:I,ctx:M}),o.$set(G);const x={};I&16&&(x.$$scope={dirty:I,ctx:M}),u.$set(x);const F={};I&16&&(F.$$scope={dirty:I,ctx:M}),d.$set(F);const X={};I&16&&(X.$$scope={dirty:I,ctx:M}),j.$set(X)},i(M){E||($(t.$$.fragment,M),$(o.$$.fragment,M),$(u.$$.fragment,M),$(d.$$.fragment,M),$(j.$$.fragment,M),$(C.$$.fragment,M),E=!0)},o(M){_(t.$$.fragment,M),_(o.$$.fragment,M),_(u.$$.fragment,M),_(d.$$.fragment,M),_(j.$$.fragment,M),_(C.$$.fragment,M),E=!1},d(M){M&&(m(e),m(a),m(f),m(y),m(T),m(N)),v(t),v(o),v(u),v(d),v(j),v(C,M)}}}function ma(r){let e,n,t;return n=new se({props:{$$slots:{default:[pa]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function _a(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function ga(r){let e,n;return e=new oe({props:{$$slots:{default:[_a,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function da(r){let e,n,t,l;const o=[R(Le),{sourceLayer:Le},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[ga]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new He({props:i});const u=[R(`${Le}-outline`),{sourceLayer:Le},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(Le)),f&0&&{sourceLayer:Le},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Q(u,[f&0&&ne(R(`${Le}-outline`)),f&0&&{sourceLayer:Le},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function ha(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Le,$$slots:{right:[ma],default:[ia]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Le}.pmtiles`,$$slots:{default:[da]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Le="local_planning_authorities";function ba(r,e,n){let t=te.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class va extends z{constructor(e){super(),q(this,e,ba,ha,H,{})}}function wa(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function ka(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ya(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ka]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=A(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Sa(r){let e,n,t;return n=new se({props:{$$slots:{default:[ya]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Oa(r){let e,n=r[3].Name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&B(t,n)},d(l){l&&m(e)}}}function Ta(r){let e,n;return e=new oe({props:{$$slots:{default:[Oa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ca(r){let e,n,t,l;const o=[R(Ie),{sourceLayer:Ie},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ta]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new He({props:i}),e.$on("click",La);const u=[R(`${Ie}-outline`),{sourceLayer:Ie},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(Ie)),f&0&&{sourceLayer:Ie},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Q(u,[f&0&&ne(R(`${Ie}-outline`)),f&0&&{sourceLayer:Ie},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Aa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ie,$$slots:{right:[Sa],default:[wa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ie}.pmtiles`,$$slots:{default:[Ca]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ie="parliamentary_constituencies";function La(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ia(r,e,n){let t=te.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Pa extends z{constructor(e){super(),q(this,e,Ia,Aa,H,{})}}function Ma(r){let e;return{c(){e=w("Pollution")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ja(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ea(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Na(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Da(r){let e,n,t,l,o,i,u,s,a,f,c,g,d,k,y,T;return t=new W({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[ja]},$$scope:{ctx:r}}}),f=new W({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Ea]},$$scope:{ctx:r}}}),g=new W({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Na]},$$scope:{ctx:r}}}),y=new De({}),{c(){e=L("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        gm
        `),o=L("sup"),o.textContent="3",i=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=A(),s=L("p"),a=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(g.$$.fragment),d=w("."),k=A(),h(y.$$.fragment)},m(O,j){p(O,e,j),S(e,n),b(t,e,null),S(e,l),S(e,o),S(e,i),p(O,u,j),p(O,s,j),S(s,a),b(f,s,null),S(s,c),b(g,s,null),S(s,d),p(O,k,j),b(y,O,j),T=!0},p(O,j){const D={};j&2048&&(D.$$scope={dirty:j,ctx:O}),t.$set(D);const N={};j&2048&&(N.$$scope={dirty:j,ctx:O}),f.$set(N);const C={};j&2048&&(C.$$scope={dirty:j,ctx:O}),g.$set(C)},i(O){T||($(t.$$.fragment,O),$(f.$$.fragment,O),$(g.$$.fragment,O),$(y.$$.fragment,O),T=!0)},o(O){_(t.$$.fragment,O),_(f.$$.fragment,O),_(g.$$.fragment,O),_(y.$$.fragment,O),T=!1},d(O){O&&(m(e),m(u),m(s),m(k)),v(t),v(f),v(g),v(y,O)}}}function Fa(r){let e,n,t;return n=new se({props:{$$slots:{default:[Da]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function tr(r){let e,n,t,l,o=r[3](r[0])+"",i,u,s,a,f,c,g,d,k,y,T,O,j;function D(I){r[7](I)}let N={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(N.value=r[0]),e=new Ot({props:N}),V.push(()=>Z(e,"value",D));const C=[Ba,Ra],E=[];function M(I,P){return I[0]=="Noise"?0:1}return d=M(r),k=E[d]=C[d](r),{c(){h(e.$$.fragment),t=A(),l=L("p"),i=w(o),u=A(),s=L("div"),a=L("label"),f=w(`Opacity
      `),c=L("input"),g=A(),k.c(),y=we(),U(c,"type","range"),U(c,"min","0"),U(c,"max","100")},m(I,P){b(e,I,P),p(I,t,P),p(I,l,P),S(l,i),p(I,u,P),p(I,s,P),S(s,a),S(a,f),S(a,c),Gt(c,r[2]),p(I,g,P),E[d].m(I,P),p(I,y,P),T=!0,O||(j=[kt(c,"change",r[8]),kt(c,"input",r[8])],O=!0)},p(I,P){const G={};!n&&P&1&&(n=!0,G.value=I[0],J(()=>n=!1)),e.$set(G),(!T||P&1)&&o!==(o=I[3](I[0])+"")&&B(i,o),P&4&&Gt(c,I[2]);let x=d;d=M(I),d===x?E[d].p(I,P):(ie(),_(E[x],1,1,()=>{E[x]=null}),ae(),k=E[d],k?k.p(I,P):(k=E[d]=C[d](I),k.c()),$(k,1),k.m(y.parentNode,y))},i(I){T||($(e.$$.fragment,I),$(k),T=!0)},o(I){_(e.$$.fragment,I),_(k),T=!1},d(I){I&&(m(t),m(l),m(u),m(s),m(g),m(y)),v(e,I),E[d].d(I),O=!1,Zr(j)}}}function Ra(r){let e,n,t;return{c(){e=L("img"),gn(e.src,n=r[5](r[0]))||U(e,"src",n),U(e,"width",150),U(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){p(l,e,o)},p(l,o){o&1&&!gn(e.src,n=l[5](l[0]))&&U(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&U(e,"alt",t)},i:ee,o:ee,d(l){l&&m(e)}}}function Ba(r){let e,n;return e=new Ue({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ga(r){let e,n;const t=[R("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new al({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&6?Q(t,[t[0],i&4&&{paint:{"raster-opacity":o[2]/100}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ha(r){let e,n,t,l,o,i;function u(f){r[6](f)}let s={id:"pollution",$$slots:{right:[Fa],default:[Ma]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[1]&&tr(r);return o=new Sl({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Ga]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],J(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&$(a,1)):(a=tr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const d={};c&1&&(d.tiles=[f[4](f[0])]),c&2054&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}function Ua(r,e,n){let t,l=!1,o=50,i="PM25_viridis";function u(){return i=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${i}/MapServer/WMSServer`}function s(k){return t[1]}function a(k){let y=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${y}`}function f(k){let y=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${y}`}function c(k){l=k,n(1,l)}function g(k){i=k,n(0,i)}function d(){o=Jr(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[i])},[i,l,o,s,a,f,c,g,d]}class za extends z{constructor(e){super(),q(this,e,Ua,Ha,H,{})}}function qa(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Wa(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Va(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Wa]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=A(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Xa(r){let e,n,t;return n=new se({props:{$$slots:{default:[Va]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Ka(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function Za(r){let e,n;return e=new oe({props:{$$slots:{default:[Ka,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ja(r){let e,n,t,l;const o=[R(Pe),{sourceLayer:Pe},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Za]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new He({props:i}),e.$on("click",Qa);const u=[R(`${Pe}-outline`),{sourceLayer:Pe},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(Pe)),f&0&&{sourceLayer:Pe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Q(u,[f&0&&ne(R(`${Pe}-outline`)),f&0&&{sourceLayer:Pe},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Ya(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Pe,$$slots:{right:[Xa],default:[qa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Pe}.pmtiles`,$$slots:{default:[Ja]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Pe="wards";function Qa(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function xa(r,e,n){let t=te.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ef extends z{constructor(e){super(),q(this,e,xa,Ya,H,{})}}function tf(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function nf(r){let e,n,t,l;return t=new W({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){p(o,e,i),S(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||($(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&m(e),v(t)}}}class Xe extends z{constructor(e){super(),q(this,e,null,nf,H,{})}}function rf(r){let e,n,t;return e=new me({props:{color:te.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function lf(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function of(r){let e,n,t,l,o,i,u,s,a;return o=new W({props:{href:"https://gtfs.org",$$slots:{default:[lf]},$$scope:{ctx:r}}}),s=new Xe({}),{c(){e=L("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=A(),t=L("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=A(),h(s.$$.fragment)},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),S(t,l),b(o,t,null),S(t,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(u)),v(o),v(s,f)}}}function sf(r){let e,n,t;return n=new se({props:{$$slots:{default:[of]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function af(r){let e;return{c(){e=L("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ff(r){let e;return{c(){e=L("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function uf(r){let e;function n(o,i){return o[2].has_bus_lane?ff:af}let t=n(r),l=t(r);return{c(){l.c(),e=we()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function cf(r){let e,n;return e=new oe({props:{$$slots:{default:[uf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $f(r){let e,n;const t=[R(it),{sourceLayer:it},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],te.bus_route_with_lane,te.bus_route_without_lane],"line-width":5,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[cf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Q(t,[i&0&&ne(R(it)),i&0&&{sourceLayer:it},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function pf(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:it,$$slots:{right:[sf],default:[rf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${it}.pmtiles`,$$slots:{default:[$f]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let it="bus_routes";function mf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class _f extends z{constructor(e){super(),q(this,e,mf,pf,H,{})}}function nr(r){const e=yf(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function rr(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function gf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function df(r){let e,n,t,l,o,i,u,s;return u=new Xe({}),{c(){e=L("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=A(),t=L("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=A(),o=L("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=A(),h(u.$$.fragment)},m(a,f){p(a,e,f),p(a,n,f),p(a,t,f),p(a,l,f),p(a,o,f),p(a,i,f),b(u,a,f),s=!0},p:ee,i(a){s||($(u.$$.fragment,a),s=!0)},o(a){_(u.$$.fragment,a),s=!1},d(a){a&&(m(e),m(n),m(t),m(l),m(o),m(i)),v(u,a)}}}function hf(r){let e,n,t;return n=new se({props:{$$slots:{default:[df]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function lr(r){let e,n,t=Ee(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=or(rr(r,t,i));const o=i=>_(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=we()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);p(i,e,u),n=!0},p(i,u){if(u&2){t=Ee(i[1]);let s;for(s=0;s<t.length;s+=1){const a=rr(i,t,s);l[s]?(l[s].p(a,u),$(l[s],1)):(l[s]=or(a),l[s].c(),$(l[s],1),l[s].m(e.parentNode,e))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)$(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)_(l[u]);n=!1},d(i){i&&m(e),yt(l,i)}}}function or(r){let e,n,t,l=r[7]+"",o,i,u;return n=new me({props:{color:r[8]}}),{c(){e=L("div"),h(n.$$.fragment),t=A(),o=w(l),i=A()},m(s,a){p(s,e,a),b(n,e,null),S(e,t),S(e,o),S(e,i),u=!0},p:ee,i(s){u||($(n.$$.fragment,s),u=!0)},o(s){_(n.$$.fragment,s),u=!1},d(s){s&&m(e),v(n)}}}function bf(r){nr(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,g,d=r[6]+"",k;return{c(){e=L("h2"),t=w(n),l=A(),o=L("p"),i=w("Direction: "),u=L("b"),a=A(),f=L("p"),c=w("Width: "),g=L("b"),k=w(d)},m(y,T){p(y,e,T),S(e,t),p(y,l,T),p(y,o,T),S(o,i),S(o,u),u.innerHTML=s,p(y,a,T),p(y,f,T),S(f,c),S(f,g),S(g,k)},p(y,T){nr(y),T&8&&n!==(n=y[4]+"")&&B(t,n),T&8&&s!==(s=y[5]+"")&&(u.innerHTML=s),T&8&&d!==(d=y[6]+"")&&B(k,d)},d(y){y&&(m(e),m(l),m(o),m(a),m(f))}}}function vf(r){let e,n;return e=new oe({props:{$$slots:{default:[bf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wf(r){let e,n;const t=[R(at),{sourceLayer:at},{paint:{"line-color":sn(["get","kind"],{track:te.cycle_paths.track,lane:te.cycle_paths.lane,shared_use_segregated:te.cycle_paths.shared_use_segregated,shared_use_unsegregated:te.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ge,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[vf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),e.$on("click",Sf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Q(t,[i&0&&ne(R(at)),i&0&&{sourceLayer:at},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function kf(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:at,$$slots:{right:[hf],default:[gf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[0]&&lr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${at}.pmtiles`,$$slots:{default:[wf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],J(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=lr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const d={};c&2049&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let at="cycle_paths";function yf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Sf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Of(r,e,n){let t=[["Separated tracks",te.cycle_paths.track],["Unprotected lanes",te.cycle_paths.lane],["Shared-use (segregated)",te.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",te.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Tf extends z{constructor(e){super(),q(this,e,Of,kf,H,{})}}function Cf(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Af(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Lf(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Af]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=L("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=A(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function If(r){let e,n,t;return n=new se({props:{$$slots:{default:[Lf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Pf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&B(t,n)},d(l){l&&m(e)}}}function Mf(r){let e,n;return e=new oe({props:{$$slots:{default:[Pf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jf(r){let e,n;const t=[R(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Mf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&ne(R(ft)),i&0&&{sourceLayer:ft},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ef(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ft,$$slots:{right:[If],default:[Cf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${ft}.pmtiles`,$$slots:{default:[jf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ft="mrn";function Nf(r,e,n){let t=te.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Df extends z{constructor(e){super(),q(this,e,Nf,Ef,H,{})}}function Ff(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Rf(r){let e;return{c(){e=w("the PCT website")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Bf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Gf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new W({props:{href:"https://www.pct.bike",$$slots:{default:[Rf]},$$scope:{ctx:r}}}),a=new W({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=A(),t=L("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=A(),o=L("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(g,d){p(g,e,d),p(g,n,d),p(g,t,d),p(g,l,d),p(g,o,d),S(o,i),b(u,o,null),S(o,s),b(a,o,null),S(o,f),c=!0},p(g,d){const k={};d&1024&&(k.$$scope={dirty:d,ctx:g}),u.$set(k);const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),a.$set(y)},i(g){c||($(u.$$.fragment,g),$(a.$$.fragment,g),c=!0)},o(g){_(u.$$.fragment,g),_(a.$$.fragment,g),c=!1},d(g){g&&(m(e),m(n),m(t),m(l),m(o)),v(u),v(a)}}}function Hf(r){let e,n,t;return n=new se({props:{$$slots:{default:[Gf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function sr(r){let e,n,t,l,o,i,u,s;e=new Ue({props:{colorScale:r[3],limits:r[4]}});function a(d){r[7](d)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new Or({props:f}),V.push(()=>Z(t,"value",a));function c(d){r[8](d)}let g={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(g.value=r[1]),i=new Ot({props:g}),V.push(()=>Z(i,"value",c)),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),o=A(),h(i.$$.fragment)},m(d,k){b(e,d,k),p(d,n,k),b(t,d,k),p(d,o,k),b(i,d,k),s=!0},p(d,k){const y={};!l&&k&1&&(l=!0,y.value=d[0],J(()=>l=!1)),t.$set(y);const T={};!u&&k&2&&(u=!0,T.value=d[1],J(()=>u=!1)),i.$set(T)},i(d){s||($(e.$$.fragment,d),$(t.$$.fragment,d),$(i.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(i.$$.fragment,d),s=!1},d(d){d&&(m(n),m(o)),v(e,d),v(t,d),v(i,d)}}}function Uf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new un(!1),t=we(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function zf(r){let e,n;return e=new oe({props:{$$slots:{default:[Uf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qf(r){let e,n;const t=[R(Me),{sourceLayer:Me},{paint:{"line-color":pe(["get",r[1]],r[4],r[3]),"line-width":Ge,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Me?"visible":"none"}}];let l={$$slots:{default:[zf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Q(t,[i&0&&ne(R(Me)),i&0&&{sourceLayer:Me},i&26&&{paint:{"line-color":pe(["get",o[1]],o[4],o[3]),"line-width":Ge,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Me?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Wf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new un(!1),t=we(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Vf(r){let e,n;return e=new oe({props:{$$slots:{default:[Wf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xf(r){let e,n;const t=[R(Je),{sourceLayer:Je},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":pe(["get",r[1]],r[4],r[3]),"line-width":Ge,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Je?"visible":"none"}}];let l={$$slots:{default:[Vf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Q(t,[i&0&&ne(R(Je)),i&0&&{sourceLayer:Je},t[2],t[3],i&26&&{paint:{"line-color":pe(["get",o[1]],o[4],o[3]),"line-width":Ge,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Je?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Kf(r){let e,n,t,l,o,i,u,s;function a(g){r[6](g)}let f={id:Me,$$slots:{right:[Hf],default:[Ff]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new le({props:f}),V.push(()=>Z(e,"checked",a));let c=r[2]&&sr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Me}.pmtiles`,$$slots:{default:[qf]},$$scope:{ctx:r}}}),u=new ce({props:{url:`pmtiles://${fe()}/v1/${Je}.pmtiles`,$$slots:{default:[Xf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),c&&c.c(),l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment)},m(g,d){b(e,g,d),p(g,t,d),c&&c.m(g,d),p(g,l,d),b(o,g,d),p(g,i,d),b(u,g,d),s=!0},p(g,[d]){const k={};d&1024&&(k.$$scope={dirty:d,ctx:g}),!n&&d&4&&(n=!0,k.checked=g[2],J(()=>n=!1)),e.$set(k),g[2]?c?(c.p(g,d),d&4&&$(c,1)):(c=sr(g),c.c(),$(c,1),c.m(l.parentNode,l)):c&&(ie(),_(c,1,1,()=>{c=null}),ae());const y={};d&1031&&(y.$$scope={dirty:d,ctx:g}),o.$set(y);const T={};d&1031&&(T.$$scope={dirty:d,ctx:g}),u.$set(T)},i(g){s||($(e.$$.fragment,g),$(c),$(o.$$.fragment,g),$(u.$$.fragment,g),s=!0)},o(g){_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(u.$$.fragment,g),s=!1},d(g){g&&(m(t),m(l),m(i)),v(e,g),c&&c.d(g),v(o,g),v(u,g)}}}let Me="pct_commute",Je="pct_school";function Zf(r,e,n){let t=te.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Me,i="baseline",u=!1;function s(g){let d=g.baseline,k=g.gov_target,y=g.go_dutch,T=`<h2>Trip purpose: ${o==Me?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)T+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${y.toLocaleString()}</b></p>`;else{let O=(k/d).toFixed(1),j=(y/d).toFixed(1);T+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${O}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${y.toLocaleString()} (<b>${j}x</b> of baseline)</p>`}return T}function a(g){u=g,n(2,u)}function f(g){o=g,n(0,o)}function c(g){i=g,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class Jf extends z{constructor(e){super(),q(this,e,Zf,Kf,H,{})}}function Yf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qf(r){let e;return{c(){e=w("Basemap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function eu(r){let e,n,t,l,o,i,u,s,a,f,c,g;return t=new W({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Qf]},$$scope:{ctx:r}}}),f=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=A(),i=L("p"),i.textContent="Data valid as of 1 September, 2023",u=A(),s=L("p"),a=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(d,k){p(d,e,k),S(e,n),b(t,e,null),S(e,l),p(d,o,k),p(d,i,k),p(d,u,k),p(d,s,k),S(s,a),b(f,s,null),S(s,c),g=!0},p(d,k){const y={};k&256&&(y.$$scope={dirty:k,ctx:d}),t.$set(y);const T={};k&256&&(T.$$scope={dirty:k,ctx:d}),f.$set(T)},i(d){g||($(t.$$.fragment,d),$(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(m(e),m(o),m(i),m(u),m(s)),v(t),v(f)}}}function tu(r){let e,n,t;return n=new se({props:{$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ir(r){let e,n,t,l,o;e=new Ue({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new Or({props:u}),V.push(()=>Z(t,"value",i)),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],J(()=>l=!1)),t.$set(f)},i(s){o||($(e.$$.fragment,s),$(t.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),o=!1},d(s){s&&m(n),v(e,s),v(t,s)}}}function nu(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,g=r[4][r[7].highest_description]+"",d,k;return{c(){e=L("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=A(),u=L("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),d=w(g),k=w(")")},m(y,T){p(y,e,T),S(e,n),S(e,l),S(e,o),p(y,i,T),p(y,u,T),S(u,s),S(u,f),S(u,c),S(u,d),S(u,k)},p(y,T){T&128&&t!==(t=y[7].indicative_mph+"")&&B(l,t),T&128&&a!==(a=y[7].highest_mph+"")&&B(f,a),T&128&&g!==(g=y[4][y[7].highest_description]+"")&&B(d,g)},d(y){y&&(m(e),m(i),m(u))}}}function ru(r){let e,n;return e=new oe({props:{$$slots:{default:[nu,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lu(r){let e,n;const t=[R(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":pe(["get",r[0]],r[3],r[2]),"line-width":Ge,"line-opacity":K(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[ru]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Q(t,[i&0&&ne(R(ut)),i&0&&{sourceLayer:ut},t[2],t[3],i&13&&{paint:{"line-color":pe(["get",o[0]],o[3],o[2]),"line-width":Ge,"line-opacity":K(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ou(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ut,$$slots:{right:[tu],default:[Yf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[1]&&ir(r);return o=new ce({props:{url:`pmtiles://${cn()}/v1/${ut}.pmtiles`,$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],J(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&$(a,1)):(a=ir(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="road_speeds";function su(r,e,n){let t=te.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class iu extends z{constructor(e){super(),q(this,e,su,ou,H,{})}}function au(r){let e;return{c(){e=w("OS Road widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function uu(r){let e,n,t,l,o,i,u,s,a;return u=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[fu]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=A(),t=L("p"),t.textContent="Data valid as of 1 September, 2023",l=A(),o=L("p"),i=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),p(f,l,c),p(f,o,c),S(o,i),b(u,o,null),S(o,s),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||($(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(l),m(o)),v(u)}}}function cu(r){let e,n,t;return n=new se({props:{$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ar(r){let e,n;return e=new Ue({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $u(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",g,d;return{c(){e=L("p"),n=w("Average width: "),t=L("b"),o=w(l),i=w(`
        meters`),u=A(),s=L("p"),a=w("Minimum width: "),f=L("b"),g=w(c),d=w(`
        meters`)},m(k,y){p(k,e,y),S(e,n),S(e,t),S(t,o),S(e,i),p(k,u,y),p(k,s,y),S(s,a),S(s,f),S(f,g),S(s,d)},p(k,y){y&16&&l!==(l=k[4].average+"")&&B(o,l),y&16&&c!==(c=k[4].minimum+"")&&B(g,c)},d(k){k&&(m(e),m(u),m(s))}}}function pu(r){let e,n;return e=new oe({props:{$$slots:{default:[$u,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mu(r){let e,n;const t=[R(ct),{sourceLayer:ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":pe(["get","average"],r[2],r[1]),"line-width":Ge,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[pu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Q(t,[i&0&&ne(R(ct)),i&0&&{sourceLayer:ct},t[2],t[3],i&6&&{paint:{"line-color":pe(["get","average"],o[2],o[1]),"line-width":Ge,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _u(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ct,$$slots:{right:[cu],default:[au]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[0]&&ar(r);return o=new ce({props:{url:`pmtiles://${cn()}/v1/${ct}.pmtiles`,$$slots:{default:[mu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],J(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=ar(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ct="road_widths";function gu(r,e,n){let t=te.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class du extends z{constructor(e){super(),q(this,e,gu,_u,H,{})}}function hu(r){let e,n,t;return{c(){e=L("input"),U(e,"class","govuk-file-upload"),U(e,"id","load-criticals"),U(e,"type","file")},m(l,o){p(l,e,o),r[7](e),n||(t=kt(e,"change",r[5]),n=!0)},p:ee,d(l){l&&m(e),r[7](null),n=!1,t()}}}function fr(r){let e,n;return e=new jt({props:{small:!0,$$slots:{default:[vu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bu(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new me({props:{color:vt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),p(u,n,s),p(u,l,s),p(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&B(l,t)},i(u){i||($(e.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),i=!1},d(u){u&&(m(n),m(l),m(o)),v(e,u)}}}function vu(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[bu]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),V.push(()=>Z(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],J(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function wu(r){let e,n,t,l,o,i;e=new Sr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[hu]},$$scope:{ctx:r}}}),t=new Tr({props:{errorMessage:r[3]}});let u=r[2]>0&&fr(r);return{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),u&&u.c(),o=we()},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),u&&u.m(s,a),p(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&$(u,1)):(u=fr(s),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(ie(),_(u,1,1,()=>{u=null}),ae())},i(s){i||($(e.$$.fragment,s),$(t.$$.fragment,s),$(u),i=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(u),i=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),u&&u.d(s)}}}function ku(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,g,d,k,y=r[10].notes+"",T,O,j,D,N,C,E,M=r[10].id+"",I,P,G,x,F,X=(r[10].inspector??"???")+"",$e,_t,be,xe=r[10].submission_time+"",gt,et,_e,dt,Fe,ze=r[10].scheme_reference+"",Ke,ht,tt,Ze=r[10].current_design_stage+"",nt;return{c(){e=L("div"),n=L("h2"),l=w(t),o=A(),i=L("p"),u=L("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=A(),g=L("p"),d=L("u"),d.textContent="Notes",k=w(`
          : `),T=w(y),O=A(),j=L("hr"),D=A(),N=L("p"),C=w("Critical issue ID: "),E=L("b"),I=w(M),P=A(),G=L("p"),x=w("Submitted by "),F=L("b"),$e=w(X),_t=w(`
          at
          `),be=L("b"),gt=w(xe),et=A(),_e=L("p"),dt=w("For scheme "),Fe=L("b"),Ke=w(ze),ht=w(`
          in stage
          `),tt=L("b"),nt=w(Ze),he(e,"max-width","30vw")},m(ve,Ce){p(ve,e,Ce),S(e,n),S(n,l),S(e,o),S(e,i),S(i,u),S(i,s),S(i,f),S(e,c),S(e,g),S(g,d),S(g,k),S(g,T),S(e,O),S(e,j),S(e,D),S(e,N),S(N,C),S(N,E),S(E,I),S(e,P),S(e,G),S(G,x),S(G,F),S(F,$e),S(G,_t),S(G,be),S(be,gt),S(e,et),S(e,_e),S(_e,dt),S(_e,Fe),S(Fe,Ke),S(_e,ht),S(_e,tt),S(tt,nt)},p(ve,Ce){Ce&1024&&t!==(t=ve[10].critical_type+"")&&B(l,t),Ce&1024&&a!==(a=ve[10].location_description+"")&&B(f,a),Ce&1024&&y!==(y=ve[10].notes+"")&&B(T,y),Ce&1024&&M!==(M=ve[10].id+"")&&B(I,M),Ce&1024&&X!==(X=(ve[10].inspector??"???")+"")&&B($e,X),Ce&1024&&xe!==(xe=ve[10].submission_time+"")&&B(gt,xe),Ce&1024&&ze!==(ze=ve[10].scheme_reference+"")&&B(Ke,ze),Ce&1024&&Ze!==(Ze=ve[10].current_design_stage+"")&&B(nt,Ze)},d(ve){ve&&m(e)}}}function yu(r){let e,n;return e=new oe({props:{$$slots:{default:[ku,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Su(r){let e,n,t,l,o,i;const u=[R(`${We}-clusters`),{applyToClusters:!0},{paint:{"circle-color":vt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let d=0;d<u.length;d+=1)s=Y(s,u[d]);e=new Ve({props:s}),e.$on("click",r[6]);const a=[R(`${We}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=Y(f,a[d]);t=new Al({props:f});const c=[R(`${We}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":vt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let g={$$slots:{default:[yu]},$$scope:{ctx:r}};for(let d=0;d<c.length;d+=1)g=Y(g,c[d]);return o=new Ve({props:g}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment)},m(d,k){b(e,d,k),p(d,n,k),b(t,d,k),p(d,l,k),b(o,d,k),i=!0},p(d,k){const y=k&2?Q(u,[k&0&&ne(R(`${We}-clusters`)),u[1],k&0&&{paint:{"circle-color":vt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},k&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(y);const T=k&2?Q(a,[k&0&&ne(R(`${We}-counts`)),a[1],k&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(T);const O=k&2?Q(c,[k&0&&ne(R(`${We}-points`)),c[1],c[2],c[3],k&0&&{paint:{"circle-color":vt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},k&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};k&2048&&(O.$$scope={dirty:k,ctx:d}),o.$set(O)},i(d){i||($(e.$$.fragment,d),$(t.$$.fragment,d),$(o.$$.fragment,d),i=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),i=!1},d(d){d&&(m(n),m(l)),v(e,d),v(t,d),v(o,d)}}}function Ou(r){let e,n,t,l;return e=new Se({props:{label:"Critical Issues",$$slots:{default:[wu]},$$scope:{ctx:r}}}),t=new Mt({props:{id:We,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Su]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}let We="criticals",vt="red";function Tu(r,e,n){let t;Te(r,an,d=>n(9,t=d));let l,o=!0,i=0,u="",s=Yr();async function a(d){try{n(4,s=await Bs(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(k){n(3,u=`The file you loaded is broken: ${k}`)}}function f(d){t.getSource(We).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id,(k,y)=>{k||t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:y})})}function c(d){V[d?"unshift":"push"](()=>{l=d,n(0,l)})}function g(d){o=d,n(1,o)}return[l,o,i,u,s,a,f,c,g]}class Cu extends z{constructor(e){super(),q(this,e,Tu,Ou,H,{})}}function Au(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Lu(r){let e;return{c(){e=w("crossing")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Iu(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Lu]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=A(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Pu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Iu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Mu(r){let e,n=ur(r[3])+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=ur(l[3])+"")&&B(t,n)},d(l){l&&m(e)}}}function ju(r){let e,n;return e=new oe({props:{$$slots:{default:[Mu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Eu(r){let e,n;const t=[R($t),{sourceLayer:$t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[ju]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ve({props:l}),e.$on("click",Du),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&ne(R($t)),i&0&&{sourceLayer:$t},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Nu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:$t,$$slots:{right:[Pu],default:[Au]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${$t}.pmtiles`,$$slots:{default:[Eu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let $t="crossings";function ur(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Du(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Fu(r,e,n){let t=te.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ru extends z{constructor(e){super(),q(this,e,Fu,Nu,H,{})}}function Bu(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Gu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hu(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Gu]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=L("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=A(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Uu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Hu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function zu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=L("p"),n=w("Capacity: "),t=L("b"),o=w(l)},m(i,u){p(i,e,u),S(e,n),S(e,t),S(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&B(o,l)},d(i){i&&m(e)}}}function qu(r){let e,n;return e=new oe({props:{$$slots:{default:[zu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wu(r){let e,n;const t=[R(pt),{sourceLayer:pt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&ne(R(pt)),i&0&&{sourceLayer:pt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Vu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:pt,$$slots:{right:[Uu],default:[Bu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${pt}.pmtiles`,$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let pt="cycle_parking";function Xu(r,e,n){let t=te.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ku extends z{constructor(e){super(),q(this,e,Xu,Vu,H,{})}}function Zu(r){let e,n,t,l;return e=new me({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=A(),t=w(r[2])},m(o,i){b(e,o,i),p(o,n,i),p(o,t,i),l=!0},p(o,i){(!l||i&4)&&B(t,o[2])},i(o){l||($(e.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),l=!1},d(o){o&&(m(n),m(t)),v(e,o)}}}function Ju(r){let e;const n=r[5].default,t=At(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Lt(t,n,l,l[7],e?Pt(n,l[7],o,null):It(l[7]),null)},i(l){e||($(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Yu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ju]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Qu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&B(t,n)},d(l){l&&m(e)}}}function xu(r){let e,n;return e=new oe({props:{$$slots:{default:[Qu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ec(r){let e,n;const t=[R(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":K(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[xu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new He({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Q(t,[i&1&&ne(R(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":K(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function tc(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[Yu],default:[Zu]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[ec]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],J(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${fe()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function nc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=te[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class pn extends z{constructor(e){super(),q(this,e,nc,tc,H,{name:0,singularNoun:1,pluralNoun:2})}}function rc(r){let e;return{c(){e=w("hospital")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function lc(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[rc]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=A(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function oc(r){let e,n;return e=new pn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class sc extends z{constructor(e){super(),q(this,e,null,oc,H,{})}}function ic(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function ac(r){let e;return{c(){e=w("railway station")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fc(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[ac]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=A(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function uc(r){let e,n,t;return n=new se({props:{$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function cc(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&B(t,n)},d(l){l&&m(e)}}}function $c(r){let e,n;return e=new oe({props:{$$slots:{default:[cc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pc(r){let e,n;const t=[R(zt),{paint:{"circle-color":r[1],"circle-radius":Ht/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[$c]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&ne(R(zt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Ht/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function mc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:zt,$$slots:{right:[uc],default:[ic]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new Mt({props:{data:`${fe()}/v1/${zt}.geojson`,$$slots:{default:[pc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let zt="railway_stations";function _c(r,e,n){let t=te.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class gc extends z{constructor(e){super(),q(this,e,_c,mc,H,{})}}function dc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function hc(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[dc]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=A(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function bc(r){let e,n;return e=new pn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class vc extends z{constructor(e){super(),q(this,e,null,bc,H,{})}}function wc(r){let e;return{c(){e=w("sports pitches")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function kc(r){let e;return{c(){e=w("sports centres")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function yc(r){let e,n,t,l,o,i,u,s,a;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[wc]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[kc]},$$scope:{ctx:r}}}),s=new Xe({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=A(),h(s.$$.fragment)},m(f,c){p(f,e,c),S(e,n),b(t,e,null),S(e,l),b(o,e,null),S(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function Sc(r){let e,n;return e=new pn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[yc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Oc extends z{constructor(e){super(),q(this,e,null,Sc,H,{})}}function Tc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Cc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ac(r){let e;return{c(){e=w("methodology")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Lc(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new W({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),f=new De({}),{c(){e=L("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=A(),s=L("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=A(),h(f.$$.fragment)},m(g,d){p(g,e,d),S(e,n),b(t,e,null),S(e,l),b(o,e,null),S(e,i),p(g,u,d),p(g,s,d),p(g,a,d),b(f,g,d),c=!0},p(g,d){const k={};d&64&&(k.$$scope={dirty:d,ctx:g}),t.$set(k);const y={};d&64&&(y.$$scope={dirty:d,ctx:g}),o.$set(y)},i(g){c||($(t.$$.fragment,g),$(o.$$.fragment,g),$(f.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),c=!1},d(g){g&&(m(e),m(u),m(s),m(a)),v(t),v(o),v(f,g)}}}function Ic(r){let e,n,t;return n=new se({props:{$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function cr(r){let e,n;return e=new Ue({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,g,d,k=r[5].pedal_cycles_2022.toLocaleString()+"",y,T,O,j,D,N=r[5].method+"",C;return{c(){e=L("h2"),t=w(n),l=A(),o=L("p"),i=w("Total motor vehicles (2022 AADF): "),u=L("b"),a=w(s),f=A(),c=L("p"),g=w("Total pedal cycles (2022 AADF): "),d=L("b"),y=w(k),T=A(),O=L("p"),j=w("Count method: "),D=L("b"),C=w(N)},m(E,M){p(E,e,M),S(e,t),p(E,l,M),p(E,o,M),S(o,i),S(o,u),S(u,a),p(E,f,M),p(E,c,M),S(c,g),S(c,d),S(d,y),p(E,T,M),p(E,O,M),S(O,j),S(O,D),S(D,C)},p(E,M){M&32&&n!==(n=E[5].location+"")&&B(t,n),M&32&&s!==(s=E[5].motor_vehicles_2022.toLocaleString()+"")&&B(a,s),M&32&&k!==(k=E[5].pedal_cycles_2022.toLocaleString()+"")&&B(y,k),M&32&&N!==(N=E[5].method+"")&&B(C,N)},d(E){E&&(m(e),m(l),m(o),m(f),m(c),m(T),m(O))}}}function Mc(r){let e,n;return e=new oe({props:{$$slots:{default:[Pc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jc(r){let e,n;const t=[R(mt),{sourceLayer:mt},{paint:{"circle-color":pe(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Mc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ve({props:l}),e.$on("click",Nc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Q(t,[i&0&&ne(R(mt)),i&0&&{sourceLayer:mt},i&6&&{paint:{"circle-color":pe(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ec(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:mt,$$slots:{right:[Ic],default:[Tc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[0]&&cr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${mt}.pmtiles`,$$slots:{default:[jc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],J(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=cr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let mt="vehicle_counts";function Nc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Dc(r,e,n){let t=te.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class Fc extends z{constructor(e){super(),q(this,e,Dc,Ec,H,{})}}function Rc(r){let e,n,t,l,o,i,u,s;return e=new vc({}),t=new sc({}),o=new Oc({}),u=new gc({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),p(a,l,f),b(o,a,f),p(a,i,f),b(u,a,f),s=!0},i(a){s||($(e.$$.fragment,a),$(t.$$.fragment,a),$(o.$$.fragment,a),$(u.$$.fragment,a),s=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),s=!1},d(a){a&&(m(n),m(l),m(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Bc(r){let e,n;return e=new jt({props:{small:!0,$$slots:{default:[Rc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Tf({}),t=new Df({}),o=new _f({}),u=new Ku({}),a=new Ru({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment),s=A(),h(a.$$.fragment)},m(c,g){b(e,c,g),p(c,n,g),b(t,c,g),p(c,l,g),b(o,c,g),p(c,i,g),b(u,c,g),p(c,s,g),b(a,c,g),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Hc(r){let e,n;return e=new jt({props:{small:!0,$$slots:{default:[Gc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Pa({}),t=new ef({}),o=new Ri({}),u=new sa({}),a=new va({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment),s=A(),h(a.$$.fragment)},m(c,g){b(e,c,g),p(c,n,g),b(t,c,g),p(c,l,g),b(o,c,g),p(c,i,g),b(u,c,g),p(c,s,g),b(a,c,g),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function zc(r){let e,n;return e=new jt({props:{small:!0,$$slots:{default:[Uc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qc(r){let e,n,t,l;return e=new Ci({}),t=new Zi({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Wc(r){let e,n,t,l;return e=new du({}),t=new iu({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Vc(r){let e,n,t,l,o=on()=="Private (development)",i,u,s;e=new Fc({}),t=new Jf({});let a=o&&Wc();return u=new za({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),a&&a.c(),i=A(),h(u.$$.fragment)},m(f,c){b(e,f,c),p(f,n,c),b(t,f,c),p(f,l,c),a&&a.m(f,c),p(f,i,c),b(u,f,c),s=!0},p:ee,i(f){s||($(e.$$.fragment,f),$(t.$$.fragment,f),$(a),$(u.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(a),_(u.$$.fragment,f),s=!1},d(f){f&&(m(n),m(l),m(i)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function Xc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new ll({props:u}),V.push(()=>Z(e,"enabled",i)),l=new ul({}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],J(()=>n=!1)),e.$set(f)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Kc(r){let e,n,t,l,o,i,u,s,a,f,c,g,d,k,y,T;return e=new Cu({}),t=new Se({props:{label:"Trip generators",$$slots:{default:[Bc]},$$scope:{ctx:r}}}),o=new Se({props:{label:"Existing infrastructure",$$slots:{default:[Hc]},$$scope:{ctx:r}}}),u=new Se({props:{label:"Boundaries",$$slots:{default:[zc]},$$scope:{ctx:r}}}),a=new Se({props:{label:"Census",$$slots:{default:[qc]},$$scope:{ctx:r}}}),c=new Se({props:{label:"Other",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),d=new Se({props:{label:"Tools",$$slots:{default:[Xc]},$$scope:{ctx:r}}}),y=new rl({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment),s=A(),h(a.$$.fragment),f=A(),h(c.$$.fragment),g=A(),h(d.$$.fragment),k=A(),h(y.$$.fragment)},m(O,j){b(e,O,j),p(O,n,j),b(t,O,j),p(O,l,j),b(o,O,j),p(O,i,j),b(u,O,j),p(O,s,j),b(a,O,j),p(O,f,j),b(c,O,j),p(O,g,j),b(d,O,j),p(O,k,j),b(y,O,j),T=!0},p(O,j){const D={};j&8&&(D.$$scope={dirty:j,ctx:O}),t.$set(D);const N={};j&8&&(N.$$scope={dirty:j,ctx:O}),o.$set(N);const C={};j&8&&(C.$$scope={dirty:j,ctx:O}),u.$set(C);const E={};j&8&&(E.$$scope={dirty:j,ctx:O}),a.$set(E);const M={};j&8&&(M.$$scope={dirty:j,ctx:O}),c.$set(M);const I={};j&9&&(I.$$scope={dirty:j,ctx:O}),d.$set(I);const P={};j&2&&(P.disabled=!O[1]),y.$set(P)},i(O){T||($(e.$$.fragment,O),$(t.$$.fragment,O),$(o.$$.fragment,O),$(u.$$.fragment,O),$(a.$$.fragment,O),$(c.$$.fragment,O),$(d.$$.fragment,O),$(y.$$.fragment,O),T=!0)},o(O){_(e.$$.fragment,O),_(t.$$.fragment,O),_(o.$$.fragment,O),_(u.$$.fragment,O),_(a.$$.fragment,O),_(c.$$.fragment,O),_(d.$$.fragment,O),_(y.$$.fragment,O),T=!1},d(O){O&&(m(n),m(l),m(i),m(s),m(f),m(g),m(k)),v(e,O),v(t,O),v(o,O),v(u,O),v(a,O),v(c,O),v(d,O),v(y,O)}}}function Zc(r){let e,n;return e=new Se({props:{label:"Layers",open:!0,$$slots:{default:[Kc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jc(r,e,n){let t,l;Te(r,qn,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&qn.set(!t)},[t,l,o]}class Yc extends z{constructor(e){super(),q(this,e,Jc,Zc,H,{})}}function Qc(r,e,n){let{loadFile:t}=e;return fn(async()=>{let o=await(await fetch(`${cn()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class xc extends z{constructor(e){super(),q(this,e,Qc,null,H,{loadFile:0})}}function e$(r){let e;return{c(){e=w("Show on map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function t$(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function n$(r){let e,n,t,l;return e=new Yt({props:{$$slots:{default:[e$]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Yt({props:{$$slots:{default:[t$]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&32&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function r$(r){var j,D,N;let e,n,t=((j=r[0].browse)==null?void 0:j.authority_or_region)+"",l,o,i,u,s=((D=r[0].browse)==null?void 0:D.capital_scheme_id)+"",a,f,c,g,d=((N=r[0].browse)==null?void 0:N.funding_programme)+"",k,y,T,O;return T=new ol({props:{$$slots:{default:[n$]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("Authority or region: "),l=w(t),o=A(),i=L("p"),u=w("Capital scheme ID: "),a=w(s),f=A(),c=L("p"),g=w("Funding programme: "),k=w(d),y=A(),h(T.$$.fragment)},m(C,E){p(C,e,E),S(e,n),S(e,l),p(C,o,E),p(C,i,E),S(i,u),S(i,a),p(C,f,E),p(C,c,E),S(c,g),S(c,k),p(C,y,E),b(T,C,E),O=!0},p(C,E){var I,P,G;(!O||E&1)&&t!==(t=((I=C[0].browse)==null?void 0:I.authority_or_region)+"")&&B(l,t),(!O||E&1)&&s!==(s=((P=C[0].browse)==null?void 0:P.capital_scheme_id)+"")&&B(a,s),(!O||E&1)&&d!==(d=((G=C[0].browse)==null?void 0:G.funding_programme)+"")&&B(k,d);const M={};E&32&&(M.$$scope={dirty:E,ctx:C}),T.$set(M)},i(C){O||($(T.$$.fragment,C),O=!0)},o(C){_(T.$$.fragment,C),O=!1},d(C){C&&(m(e),m(o),m(i),m(f),m(c),m(y)),v(T,C)}}}function l$(r){var t;let e,n;return e=new Se({props:{label:`${r[0].scheme_reference}: ${(t=r[0].browse)==null?void 0:t.num_features} features`,$$slots:{default:[r$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),n=!0},p(l,[o]){var u;const i={};o&1&&(i.label=`${l[0].scheme_reference}: ${(u=l[0].browse)==null?void 0:u.num_features} features`),o&33&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function o$(r,e,n){let t;Te(r,an,s=>n(4,t=s));let{schemesGj:l}=e,{scheme:o}=e;function i(){let s={type:"FeatureCollection",features:l.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(Qr(s),{padding:20,animate:!1})}function u(){var f,c;let s={type:"FeatureCollection",features:l.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(s)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=s=>{"schemesGj"in s&&n(3,l=s.schemesGj),"scheme"in s&&n(0,o=s.scheme)},[o,i,u,l]}class s$ extends z{constructor(e){super(),q(this,e,o$,l$,H,{schemesGj:3,scheme:0})}}function $r(r){let e,n,t=dn(r[0].length_meters)+"",l;return{c(){e=L("p"),n=w("Length: "),l=w(t)},m(o,i){p(o,e,i),S(e,n),S(e,l)},p(o,i){i&1&&t!==(t=dn(o[0].length_meters)+"")&&B(l,t)},d(o){o&&m(e)}}}function pr(r){let e,n=r[1](r[0].description)+"";return{c(){e=L("p")},m(t,l){p(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&m(e)}}}function i$(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,g=r[0].scheme_reference+"",d,k,y,T=r[0].length_meters&&$r(r),O=r[0].description&&pr(r);return{c(){e=L("div"),n=L("h2"),t=new un(!1),o=w(" ("),u=w(i),s=w(")"),a=A(),f=L("p"),c=w("Scheme reference: "),d=w(g),k=A(),T&&T.c(),y=A(),O&&O.c(),t.a=o,he(e,"max-width","30vw")},m(j,D){p(j,e,D),S(e,n),t.m(l,n),S(n,o),S(n,u),S(n,s),S(e,a),S(e,f),S(f,c),S(f,d),S(e,k),T&&T.m(e,null),S(e,y),O&&O.m(e,null)},p(j,[D]){D&1&&l!==(l=j[1](j[0].name)+"")&&t.p(l),D&1&&i!==(i=j[0].intervention_type+"")&&B(u,i),D&1&&g!==(g=j[0].scheme_reference+"")&&B(d,g),j[0].length_meters?T?T.p(j,D):(T=$r(j),T.c(),T.m(e,y)):T&&(T.d(1),T=null),j[0].description?O?O.p(j,D):(O=pr(j),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},i:ee,o:ee,d(j){j&&m(e),T&&T.d(),O&&O.d()}}}function a$(r,e,n){let t;Te(r,Bt,i=>n(2,t=i));let{props:l}=e;function o(i){return t?i.replace(new RegExp(t,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,l=i.props)},[l,o]}class mn extends z{constructor(e){super(),q(this,e,a$,i$,H,{props:0})}}function f$(r){let e,n;return e=new mn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function u$(r){let e,n;return e=new oe({props:{$$slots:{default:[f$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&192&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function c$(r){let e,n;return e=new mn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $$(r){let e,n;return e=new oe({props:{$$slots:{default:[c$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&192&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function p$(r){let e,n;return e=new mn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function m$(r){let e,n;return e=new oe({props:{$$slots:{default:[p$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&192&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _$(r){let e,n,t,l,o,i,u,s,a,f;const c=[R("interventions-points"),{filter:["all",hn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Ht,"circle-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let g={$$slots:{default:[u$]},$$scope:{ctx:r}};for(let C=0;C<c.length;C+=1)g=Y(g,c[C]);e=new Ve({props:g});const d=[R("interventions-lines"),{filter:["all",bn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":bt,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let k={$$slots:{default:[$$]},$$scope:{ctx:r}};for(let C=0;C<d.length;C+=1)k=Y(k,d[C]);t=new ue({props:k});const y=[R("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*bt,"circle-opacity":0,"circle-stroke-color":Be.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let C=0;C<y.length;C+=1)T=Y(T,y[C]);o=new Ve({props:T});const O=[R("interventions-polygons"),{filter:["all",Dt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":K(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let j={$$slots:{default:[m$]},$$scope:{ctx:r}};for(let C=0;C<O.length;C+=1)j=Y(j,O[C]);u=new He({props:j});const D=[R("interventions-polygons-outlines"),{filter:["all",Dt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*bt}},{layout:{visibility:r[0]?"visible":"none"}}];let N={};for(let C=0;C<D.length;C+=1)N=Y(N,D[C]);return a=new ue({props:N}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment),s=A(),h(a.$$.fragment)},m(C,E){b(e,C,E),p(C,n,E),b(t,C,E),p(C,l,E),b(o,C,E),p(C,i,E),b(u,C,E),p(C,s,E),b(a,C,E),f=!0},p(C,E){const M=E&29?Q(c,[c[0],E&24&&{filter:["all",hn,C[3],C[4]]},c[2],c[3],E&4&&{paint:{"circle-color":C[2],"circle-radius":Ht,"circle-opacity":K(1,.5)}},E&1&&{layout:{visibility:C[0]?"visible":"none"}}]):{};E&128&&(M.$$scope={dirty:E,ctx:C}),e.$set(M);const I=E&13?Q(d,[d[0],E&8&&{filter:["all",bn,C[3]]},d[2],d[3],E&4&&{paint:{"line-color":C[2],"line-width":bt,"line-opacity":K(1,.5)}},E&1&&{layout:{visibility:C[0]?"visible":"none"}}]):{};E&128&&(I.$$scope={dirty:E,ctx:C}),t.$set(I);const P=E&1?Q(y,[y[0],y[1],y[2],{layout:{visibility:C[0]?"visible":"none"}}]):{};o.$set(P);const G=E&13?Q(O,[O[0],E&8&&{filter:["all",Dt,C[3]]},O[2],O[3],E&4&&{paint:{"fill-color":C[2],"fill-opacity":K(.2,.5)}},E&1&&{layout:{visibility:C[0]?"visible":"none"}}]):{};E&128&&(G.$$scope={dirty:E,ctx:C}),u.$set(G);const x=E&13?Q(D,[D[0],E&8&&{filter:["all",Dt,C[3]]},E&4&&{paint:{"line-color":C[2],"line-opacity":.5,"line-width":.7*bt}},E&1&&{layout:{visibility:C[0]?"visible":"none"}}]):{};a.$set(x)},i(C){f||($(e.$$.fragment,C),$(t.$$.fragment,C),$(o.$$.fragment,C),$(u.$$.fragment,C),$(a.$$.fragment,C),f=!0)},o(C){_(e.$$.fragment,C),_(t.$$.fragment,C),_(o.$$.fragment,C),_(u.$$.fragment,C),_(a.$$.fragment,C),f=!1},d(C){C&&(m(n),m(l),m(i),m(s)),v(e,C),v(t,C),v(o,C),v(u,C),v(a,C)}}}function g$(r){let e,n;return e=new Mt({props:{data:r[1],$$slots:{default:[_$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function d$(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,i=qr();const u=["!=",["get","hide_while_editing"],!0],s=["!=",["get","endpoint"],!0];return r.$$set=a=>{"schemesGj"in a&&n(5,l=a.schemesGj),"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=xr(l))},[o,t,i,u,s,l]}class h$ extends z{constructor(e){super(),q(this,e,d$,g$,H,{schemesGj:5,showSchemes:0})}}function mr(r,e,n){const t=r.slice();return t[11]=e[n],t}function b$(r){let e,n;return e=new xc({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _r(r){let e,n,t,l,o;function i(f){r[7](f)}function u(f){r[8](f)}function s(f){r[9](f)}let a={schemes:r[2]};return r[1]!==void 0&&(a.schemesGj=r[1]),r[3]!==void 0&&(a.schemesToBeShown=r[3]),r[4]!==void 0&&(a.show=r[4]),e=new Js({props:a}),V.push(()=>Z(e,"schemesGj",i)),V.push(()=>Z(e,"schemesToBeShown",u)),V.push(()=>Z(e,"show",s)),{c(){h(e.$$.fragment)},m(f,c){b(e,f,c),o=!0},p(f,c){const g={};c&4&&(g.schemes=f[2]),!n&&c&2&&(n=!0,g.schemesGj=f[1],J(()=>n=!1)),!t&&c&8&&(t=!0,g.schemesToBeShown=f[3],J(()=>t=!1)),!l&&c&16&&(l=!0,g.show=f[4],J(()=>l=!1)),e.$set(g)},i(f){o||($(e.$$.fragment,f),o=!0)},o(f){_(e.$$.fragment,f),o=!1},d(f){v(e,f)}}}function gr(r){let e,n;return e=new s$({props:{schemesGj:r[1],scheme:r[11]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[11]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dr(r){let e=r[3].has(r[11].scheme_reference),n,t,l=e&&gr(r);return{c(){l&&l.c(),n=we()},m(o,i){l&&l.m(o,i),p(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[11].scheme_reference)),e?l?(l.p(o,i),i&12&&$(l,1)):(l=gr(o),l.c(),$(l,1),l.m(n.parentNode,n)):l&&(ie(),_(l,1,1,()=>{l=null}),ae())},i(o){t||($(l),t=!0)},o(o){_(l),t=!1},d(o){o&&m(n),l&&l.d(o)}}}function v$(r){let e,n,t,l,o,i,u,s,a,f,c=on()=="Private (development)",g,d,k,y,T,O,j,D;o=new fl({props:{boundaryGeojson:r[1]}}),u=new Nl({}),a=new el({});let N=c&&b$(r);d=new il({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[6]}}),y=new Tr({props:{errorMessage:r[0]}});let C=r[2].size>0&&_r(r),E=Ee(r[2].values()),M=[];for(let P=0;P<E.length;P+=1)M[P]=dr(mr(r,E,P));const I=P=>_(M[P],1,1,()=>{M[P]=null});return{c(){e=L("div"),n=L("div"),t=L("h1"),t.textContent="Browse schemes",l=A(),h(o.$$.fragment),i=A(),h(u.$$.fragment),s=A(),h(a.$$.fragment),f=A(),N&&N.c(),g=A(),h(d.$$.fragment),k=A(),h(y.$$.fragment),T=A(),C&&C.c(),O=A(),j=L("ul");for(let P=0;P<M.length;P+=1)M[P].c();he(n,"display","flex"),he(n,"justify-content","space-between"),U(e,"slot","sidebar"),U(e,"class","govuk-prose")},m(P,G){p(P,e,G),S(e,n),S(n,t),S(n,l),b(o,n,null),S(e,i),b(u,e,null),S(e,s),b(a,e,null),S(e,f),N&&N.m(e,null),S(e,g),b(d,e,null),S(e,k),b(y,e,null),S(e,T),C&&C.m(e,null),S(e,O),S(e,j);for(let x=0;x<M.length;x+=1)M[x]&&M[x].m(j,null);D=!0},p(P,G){const x={};G&2&&(x.boundaryGeojson=P[1]),o.$set(x),c&&N.p(P,G);const F={};if(G&1&&(F.errorMessage=P[0]),y.$set(F),P[2].size>0?C?(C.p(P,G),G&4&&$(C,1)):(C=_r(P),C.c(),$(C,1),C.m(e,O)):C&&(ie(),_(C,1,1,()=>{C=null}),ae()),G&14){E=Ee(P[2].values());let X;for(X=0;X<E.length;X+=1){const $e=mr(P,E,X);M[X]?(M[X].p($e,G),$(M[X],1)):(M[X]=dr($e),M[X].c(),$(M[X],1),M[X].m(j,null))}for(ie(),X=E.length;X<M.length;X+=1)I(X);ae()}},i(P){if(!D){$(o.$$.fragment,P),$(u.$$.fragment,P),$(a.$$.fragment,P),$(N),$(d.$$.fragment,P),$(y.$$.fragment,P),$(C);for(let G=0;G<E.length;G+=1)$(M[G]);D=!0}},o(P){_(o.$$.fragment,P),_(u.$$.fragment,P),_(a.$$.fragment,P),_(N),_(d.$$.fragment,P),_(y.$$.fragment,P),_(C),M=M.filter(Boolean);for(let G=0;G<M.length;G+=1)_(M[G]);D=!1},d(P){P&&m(e),v(o),v(u),v(a),N&&N.d(),v(d),v(y),C&&C.d(),yt(M,P)}}}function w$(r){let e,n,t,l,o,i,u;return e=new sl({}),t=new h$({props:{schemesGj:r[1],showSchemes:r[4]}}),i=new Yc({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),o=L("div"),h(i.$$.fragment),U(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),p(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&2&&(f.schemesGj=s[1]),a&16&&(f.showSchemes=s[4]),t.$set(f)},i(s){u||($(e.$$.fragment,s),$(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),v(i)}}}function k$(r){let e,n,t;return n=new tl({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[w$]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(n.$$.fragment),U(e,"slot","main")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.style=l[5]),o&16402&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function y$(r){let e,n;return e=new cl({props:{$$slots:{main:[k$],sidebar:[v$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&16447&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function S$(r,e,n){let t;Te(r,vn,k=>n(5,t=k)),fn(()=>{nl()});const l=new URLSearchParams(window.location.search);vn.set(l.get("style")||"dataviz");let o="",i={type:"FeatureCollection",features:[],schemes:{}},u=new Map,s=new Set,a=!0;function f(k){try{n(1,i=JSON.parse(k)),n(2,u=Fs(i)),n(0,o="")}catch(y){n(0,o=`The file you loaded is broken: ${y}`)}}function c(k){i=k,n(1,i)}function g(k){s=k,n(3,s)}function d(k){a=k,n(4,a)}return[o,i,u,s,a,t,f,c,g,d]}class O$ extends z{constructor(e){super(),q(this,e,S$,y$,H,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new O$({target:document.getElementById("app")});
