import{S as Y,i as K,s as J,e as T,j as U,ao as Te,k as $,a7 as te,p,aU as Yl,b as W,c as V,f as O,h as b,m as v,x as rt,n as X,t as g,o as d,q as w,O as vt,T as wt,U as kt,V as yt,b2 as Jn,l as h,ab as je,_ as $e,$ as pe,aX as $t,v as k,J as z,Z as Me,a0 as Rn,a1 as Kl,r as re,a2 as Zl,a3 as Ql,a4 as ct,a5 as xl,a6 as eo,b3 as Oo,Y as Ot,b4 as Yn,b5 as Lo,G as Ct,aO as Tn,aF as On,P as x,I as Le,a as pt,aT as Ao,av as mt,aj as zn,an as Tt,u as Bn,F as Ln,w as tt,b1 as ee,b6 as be,b7 as Ae,H as Q,D as Ue,W as ne,b8 as fe,ag as un,N as to,aZ as en,b9 as _n,ba as bt,R as no,E as ro,bb as Po,bc as Io,g as An,al as No,C as Mo,a$ as Kn,ap as Fo,aq as Zn,ar as Qn,as as sn,b0 as xn,L as Eo,d as Do,M as jo,z as Ro}from"./index-95cefd3a.js";import{l as H,d as nt,a as zo,g as ze,f as Bo,M as qo,k as dt,h as ot,i as oe,R as Ho,C as _t,m as Uo,S as Go,B as Wo,c as er,b as Jt,Z as Vo,G as Xo}from"./ZoomOutMap-0b2c2e01.js";import{P as ue}from"./Popup-7aee85c7.js";function Jo(r){let e;return{c(){e=T("span"),U(e,"class","svelte-kzgqtg"),Te(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Te(e,"background",n[0])},i:te,o:te,d(n){n&&p(e)}}}function Yo(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class Fe extends Y{constructor(e){super(),K(this,e,Yo,Jo,J,{color:0})}}const Ko="/atip/browse_layer_urls/assets/help-d011708a.svg";function Zo(r){let e,n;const t=r[1].default,l=vt(t,r,r[4],null);return{c(){e=T("div"),l&&l.c(),U(e,"class","govuk-prose")},m(o,s){$(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&wt(l,t,o,o[4],n?yt(t,o[4],s,null):kt(o[4]),null)},i(o){n||(g(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function Qo(r){let e,n,t,l,o,s,f;function i(u){r[3](u)}let a={title:"Help",$$slots:{default:[Zo]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Yl({props:a}),W.push(()=>V(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${Ko}" title="Help" alt="Help"/>`,n=O(),b(t.$$.fragment),U(e,"class","svelte-7d9d1l")},m(u,c){$(u,e,c),$(u,n,c),v(t,u,c),o=!0,s||(f=rt(e,"click",r[2]),s=!0)},p(u,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,_.open=u[0],X(()=>l=!1)),t.$set(_)},i(u){o||(g(t.$$.fragment,u),o=!0)},o(u){d(t.$$.fragment,u),o=!1},d(u){u&&(p(e),p(n)),w(t,u),s=!1,f()}}}function xo(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function f(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,f,l]}class _e extends Y{constructor(e){super(),K(this,e,xo,Qo,J,{})}}const es=r=>({}),tr=r=>({}),ts=r=>({}),nr=r=>({});function ns(r){let e,n,t,l,o,s,f,i,a,u,c;const _=r[4].sidebar,m=vt(_,r,r[3],nr),y=r[4].main,C=vt(y,r,r[3],tr);return{c(){e=T("div"),n=T("aside"),t=T("div"),m&&m.c(),l=O(),o=T("button"),o.textContent="â†’",f=O(),i=T("main"),C&&C.c(),U(t,"class","sidebar-content content-container svelte-1n0etgd"),U(o,"type","button"),U(o,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),U(n,"class",s=Jn(r[1]?"":"collapsed")+" svelte-1n0etgd"),Te(n,"--sidebarWidth",r[0]),U(i,"class","svelte-1n0etgd"),U(e,"class","overall-layout svelte-1n0etgd")},m(S,I){$(S,e,I),h(e,n),h(n,t),m&&m.m(t,null),h(n,l),h(n,o),h(e,f),h(e,i),C&&C.m(i,null),a=!0,u||(c=rt(o,"click",r[2]),u=!0)},p(S,[I]){m&&m.p&&(!a||I&8)&&wt(m,_,S,S[3],a?yt(_,S[3],I,ts):kt(S[3]),nr),(!a||I&2&&s!==(s=Jn(S[1]?"":"collapsed")+" svelte-1n0etgd"))&&U(n,"class",s),(!a||I&1)&&Te(n,"--sidebarWidth",S[0]),C&&C.p&&(!a||I&8)&&wt(C,y,S,S[3],a?yt(y,S[3],I,es):kt(S[3]),tr)},i(S){a||(g(m,S),g(C,S),a=!0)},o(S){d(m,S),d(C,S),a=!1},d(S){S&&p(e),m&&m.d(S),C&&C.d(S),u=!1,c()}}}function rs(r,e,n){let{$$slots:t={},$$scope:l}=e,{sidebarWidth:o="25rem"}=e,s=!0;function f(){n(1,s=!s)}return r.$$set=i=>{"sidebarWidth"in i&&n(0,o=i.sidebarWidth),"$$scope"in i&&n(3,l=i.$$scope)},[o,s,f,l,t]}class ls extends Y{constructor(e){super(),K(this,e,rs,ns,J,{sidebarWidth:0})}}function rr(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function lr(r){let e,n,t,l=r[1]+"",o,s,f;return n=new Fe({props:{color:r[2]}}),{c(){e=T("li"),b(n.$$.fragment),t=O(),o=k(l),s=O()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),n.$set(u),(!f||a&1)&&l!==(l=i[1]+"")&&z(o,l)},i(i){f||(g(n.$$.fragment,i),f=!0)},o(i){d(n.$$.fragment,i),f=!1},d(i){i&&p(e),w(n)}}}function os(r){let e,n,t=je(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=lr(rr(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){e=T("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,f){$(s,e,f);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[f]){if(f&1){t=je(s[0]);let i;for(i=0;i<t.length;i+=1){const a=rr(s,t,i);l[i]?(l[i].p(a,f),g(l[i],1)):(l[i]=lr(a),l[i].c(),g(l[i],1),l[i].m(e,null))}for($e(),i=t.length;i<l.length;i+=1)o(i);pe()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)g(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)d(l[f]);n=!1},d(s){s&&p(e),$t(l,s)}}}function ss(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class qn extends Y{constructor(e){super(),K(this,e,ss,os,J,{rows:0})}}function or(r){let e=r[0],n,t,l=sr(r);return{c(){l.c(),n=Me()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?($e(),d(l,1,1,te),pe(),l=sr(o),l.c(),g(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(g(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function sr(r){let e;const n=r[16].default,t=vt(n,r,r[15],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&32768)&&wt(t,n,l,l[15],e?yt(n,l[15],o,null):kt(l[15]),null)},i(l){e||(g(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function is(r){let e,n,t=r[0]&&or(r);return{c(){t&&t.c(),e=Me()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&g(t,1)):(t=or(l),t.c(),g(t,1),t.m(e.parentNode,e)):t&&($e(),d(t,1,1,()=>{t=null}),pe())},i(l){n||(g(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function as(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=Rn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:_=null}=e,{minzoom:m=null}=e,{maxzoom:y=null}=e,{volatile:C=null}=e;const{map:S,self:I}=Kl();re(r,S,A=>n(14,l=A)),re(r,I,A=>n(0,t=A));let D,P=!0;return Zl(()=>{t&&D&&l&&(Ql(S,t,D),ct(I,t=null,t),n(12,D=void 0))}),r.$$set=A=>{"id"in A&&n(3,f=A.id),"tiles"in A&&n(4,i=A.tiles),"tileSize"in A&&n(5,a=A.tileSize),"bounds"in A&&n(6,u=A.bounds),"scheme"in A&&n(7,c=A.scheme),"attribution"in A&&n(8,_=A.attribution),"minzoom"in A&&n(9,m=A.minzoom),"maxzoom"in A&&n(10,y=A.maxzoom),"volatile"in A&&n(11,C=A.volatile),"$$scope"in A&&n(15,s=A.$$scope)},r.$$.update=()=>{r.$$.dirty&24569&&l&&t!==f&&(ct(I,t=f,t),xl(l,t,eo({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:_,minzoom:m,maxzoom:y,volatile:C}),A=>l&&A===t,()=>{t&&(n(12,D=l==null?void 0:l.getSource(t)),n(13,P=!0))})),r.$$.dirty&16392&&(l==null||l.on("style.load",()=>{n(12,D=l==null?void 0:l.getSource(f))})),r.$$.dirty&12304&&D&&(P?n(13,P=!1):D.setTiles(i))},[t,S,I,f,i,a,u,c,_,m,y,C,D,P,l,s,o]}class fs extends Y{constructor(e){super(),K(this,e,as,is,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function us(r){let e;const n=r[16].default,t=vt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&wt(t,n,l,l[24],e?yt(n,l[24],o,null):kt(l[24]),null)},i(l){e||(g(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function cs(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[us]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Oo({props:o}),W.push(()=>V(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function $s(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=Rn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:I=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:A=!0}=e;function L(j){D=j,n(0,D)}function M(j){Ot.call(this,r,j)}function E(j){Ot.call(this,r,j)}function N(j){Ot.call(this,r,j)}function R(j){Ot.call(this,r,j)}function G(j){Ot.call(this,r,j)}function q(j){Ot.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,f=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,u=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,_=j.filter),"applyToClusters"in j&&n(9,m=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,C=j.maxzoom),"hoverCursor"in j&&n(12,S=j.hoverCursor),"manageHoverState"in j&&n(13,I=j.manageHoverState),"hovered"in j&&n(0,D=j.hovered),"eventsIfTopMost"in j&&n(14,P=j.eventsIfTopMost),"interactive"in j&&n(15,A=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[D,o,s,f,i,a,u,c,_,m,y,C,S,I,P,A,t,L,M,E,N,R,G,q,l]}class gn extends Y{constructor(e){super(),K(this,e,$s,cs,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function ir(r){let e=r[0],n,t,l=ar(r);return{c(){l.c(),n=Me()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?($e(),d(l,1,1,te),pe(),l=ar(o),l.c(),g(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(g(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function ar(r){let e;const n=r[15].default,t=vt(n,r,r[14],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16384)&&wt(t,n,l,l[14],e?yt(n,l[14],o,null):kt(l[14]),null)},i(l){e||(g(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function ps(r){let e,n,t=r[0]&&ir(r);return{c(){t&&t.c(),e=Me()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&g(t,1)):(t=ir(l),t.c(),g(t,1),t.m(e.parentNode,e)):t&&($e(),d(t,1,1,()=>{t=null}),pe())},i(l){n||(g(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function ms(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=Rn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:_=null}=e,{attribution:m=null}=e,{minzoom:y=null}=e,{maxzoom:C=null}=e,{volatile:S=null}=e;if(i&&i.includes("pmtiles://")&&!Yn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let A=new Lo;Yn.addProtocol("pmtiles",A.tile)}const{map:I,self:D}=Kl();re(r,I,A=>n(13,l=A)),re(r,D,A=>n(0,t=A));let P;return Zl(()=>{t&&l&&(Ql(I,t,P),ct(D,t=null,t),P=void 0)}),r.$$set=A=>{"id"in A&&n(3,f=A.id),"url"in A&&n(4,i=A.url),"tiles"in A&&n(5,a=A.tiles),"promoteId"in A&&n(6,u=A.promoteId),"bounds"in A&&n(7,c=A.bounds),"scheme"in A&&n(8,_=A.scheme),"attribution"in A&&n(9,m=A.attribution),"minzoom"in A&&n(10,y=A.minzoom),"maxzoom"in A&&n(11,C=A.maxzoom),"volatile"in A&&n(12,S=A.volatile),"$$scope"in A&&n(14,s=A.$$scope)},r.$$.update=()=>{r.$$.dirty&16377&&l&&t!==f&&(ct(D,t=f,t),xl(l,t,eo({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:_,attribution:m,minzoom:y,maxzoom:C,volatile:S}),A=>l&&A===t,()=>{t&&(P=l==null?void 0:l.getSource(t))})),r.$$.dirty&8200&&(l==null||l.on("style.load",()=>{P=l==null?void 0:l.getSource(f)}))},[t,I,D,f,i,a,u,c,_,m,y,C,S,l,s,o]}class ye extends Y{constructor(e){super(),K(this,e,ms,ps,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function fr(r,e,n){const t=r.slice();return t[11]=e[n],t[12]=e,t[13]=n,t}function _s(r){let e,n,t;return n=new pt({props:{$$slots:{default:[ds]},$$scope:{ctx:r}}}),n.$on("click",r[9]),{c(){e=T("div"),b(n.$$.fragment)},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16384&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function gs(r){let e,n,t,l,o,s,f,i,a,u;n=new pt({props:{$$slots:{default:[hs]},$$scope:{ctx:r}}}),n.$on("click",r[4]);let c=r[2]&&ur(r);o=new ze({props:{label:"Help",$$slots:{default:[bs]},$$scope:{ctx:r}}}),f=new Bo({}),f.$on("click",r[3]);let _=je(r[0]),m=[];for(let C=0;C<_.length;C+=1)m[C]=cr(fr(r,_,C));const y=C=>d(m[C],1,1,()=>{m[C]=null});return{c(){e=T("div"),b(n.$$.fragment),t=O(),c&&c.c(),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O();for(let C=0;C<m.length;C+=1)m[C].c();a=Me()},m(C,S){$(C,e,S),v(n,e,null),$(C,t,S),c&&c.m(C,S),$(C,l,S),v(o,C,S),$(C,s,S),v(f,C,S),$(C,i,S);for(let I=0;I<m.length;I+=1)m[I]&&m[I].m(C,S);$(C,a,S),u=!0},p(C,S){const I={};S&16384&&(I.$$scope={dirty:S,ctx:C}),n.$set(I),C[2]?c?c.p(C,S):(c=ur(C),c.c(),c.m(l.parentNode,l)):c&&(c.d(1),c=null);const D={};if(S&16384&&(D.$$scope={dirty:S,ctx:C}),o.$set(D),S&65){_=je(C[0]);let P;for(P=0;P<_.length;P+=1){const A=fr(C,_,P);m[P]?(m[P].p(A,S),g(m[P],1)):(m[P]=cr(A),m[P].c(),g(m[P],1),m[P].m(a.parentNode,a))}for($e(),P=_.length;P<m.length;P+=1)y(P);pe()}},i(C){if(!u){g(n.$$.fragment,C),g(o.$$.fragment,C),g(f.$$.fragment,C);for(let S=0;S<_.length;S+=1)g(m[S]);u=!0}},o(C){d(n.$$.fragment,C),d(o.$$.fragment,C),d(f.$$.fragment,C),m=m.filter(Boolean);for(let S=0;S<m.length;S+=1)d(m[S]);u=!1},d(C){C&&(p(e),p(t),p(l),p(s),p(i),p(a)),w(n),c&&c.d(C),w(o,C),w(f,C),$t(m,C)}}}function ds(r){let e;return{c(){e=k("Measure lines")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hs(r){let e;return{c(){e=k("Stop measuring")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ur(r){let e,n,t=r[2].toFixed(2)+"",l,o;return{c(){e=T("p"),n=k("Length: "),l=k(t),o=k(" meters")},m(s,f){$(s,e,f),h(e,n),h(e,l),h(e,o)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&z(l,t)},d(s){s&&p(e)}}}function bs(r){let e;return{c(){e=T("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){$(n,e,t)},p:te,d(n){n&&p(e)}}}function vs(r){let e,n;return{c(){e=T("span"),n=O(),U(e,"class","dot svelte-1tzt432")},m(t,l){$(t,e,l),$(t,n,l)},p:te,d(t){t&&(p(e),p(n))}}}function cr(r){let e,n,t;function l(f){r[7](f,r[11],r[12],r[13])}function o(){return r[8](r[13])}let s={draggable:!0,$$slots:{default:[vs]},$$scope:{ctx:r}};return r[11]!==void 0&&(s.lngLat=r[11]),e=new qo({props:s}),W.push(()=>V(e,"lngLat",l)),e.$on("click",o),{c(){b(e.$$.fragment)},m(f,i){v(e,f,i),t=!0},p(f,i){r=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:r}),!n&&i&1&&(n=!0,a.lngLat=r[11],X(()=>n=!1)),e.$set(a)},i(f){t||(g(e.$$.fragment,f),t=!0)},o(f){d(e.$$.fragment,f),t=!1},d(f){w(e,f)}}}function ws(r){let e,n;const t=[H("measurement-line"),{paint:{"line-color":nt.measuringLine,"line-width":5}}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f={};e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ks(r){let e,n,t,l,o,s,f;const i=[gs,_s],a=[];function u(c,_){return c[1]?0:1}return e=u(r),n=a[e]=i[e](r),l=new Ct({props:{data:r[0].length<2?Tn():On(r[0]),$$slots:{default:[ws]},$$scope:{ctx:r}}}),{c(){n.c(),t=O(),b(l.$$.fragment)},m(c,_){a[e].m(c,_),$(c,t,_),v(l,c,_),o=!0,s||(f=rt(window,"keydown",r[5]),s=!0)},p(c,[_]){let m=e;e=u(c),e===m?a[e].p(c,_):($e(),d(a[m],1,1,()=>{a[m]=null}),pe(),n=a[e],n?n.p(c,_):(n=a[e]=i[e](c),n.c()),g(n,1),n.m(t.parentNode,t));const y={};_&1&&(y.data=c[0].length<2?Tn():On(c[0])),_&16384&&(y.$$scope={dirty:_,ctx:c}),l.$set(y)},i(c){o||(g(n),g(l.$$.fragment,c),o=!0)},o(c){d(n),d(l.$$.fragment,c),o=!1},d(c){c&&p(t),a[e].d(c),w(l,c),s=!1,f()}}}function ys(r,e,n){let t,l=!1,o=[];function s(y){return y.length<2?null:1e3*zo(On(y),{units:"kilometers"})}function f(y){n(0,o=[...o,y.detail.lngLat.toArray()])}function i(){n(1,l=!1),n(0,o=[])}function a(y){l&&y.key==="Escape"&&(y.stopPropagation(),i())}function u(y){o.splice(y,1),n(0,o)}function c(y,C,S,I){S[I]=y,n(0,o)}const _=y=>u(y),m=()=>n(1,l=!0);return r.$$.update=()=>{r.$$.dirty&1&&n(2,t=s(o))},[o,l,t,f,i,a,u,c,_,m]}class Ss extends Y{constructor(e){super(),K(this,e,ys,ks,J,{})}}const Cs={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Be=Uint8Array,ht=Uint16Array,lo=Uint32Array,oo=new Be([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),so=new Be([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ts=new Be([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),io=function(r,e){for(var n=new ht(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new lo(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},ao=io(oo,2),fo=ao[0],Os=ao[1];fo[28]=258,Os[258]=28;var Ls=io(so,0),As=Ls[0],Pn=new ht(32768);for(var ke=0;ke<32768;++ke){var ft=(ke&43690)>>>1|(ke&21845)<<1;ft=(ft&52428)>>>2|(ft&13107)<<2,ft=(ft&61680)>>>4|(ft&3855)<<4,Pn[ke]=((ft&65280)>>>8|(ft&255)<<8)>>>1}var xt=function(r,e,n){for(var t=r.length,l=0,o=new ht(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new ht(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var f;if(n){f=new ht(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],u=e-r[l],c=s[r[l]-1]++<<u,_=c|(1<<u)-1;c<=_;++c)f[Pn[c]>>>i]=a}else for(f=new ht(t),l=0;l<t;++l)r[l]&&(f[l]=Pn[s[r[l]-1]++]>>>15-r[l]);return f},rn=new Be(288);for(var ke=0;ke<144;++ke)rn[ke]=8;for(var ke=144;ke<256;++ke)rn[ke]=9;for(var ke=256;ke<280;++ke)rn[ke]=7;for(var ke=280;ke<288;++ke)rn[ke]=8;var uo=new Be(32);for(var ke=0;ke<32;++ke)uo[ke]=5;var Ps=xt(rn,9,1),Is=xt(uo,5,1),dn=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},We=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},hn=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Ns=function(r){return(r+7)/8|0},Hn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?ht:r.BYTES_PER_ELEMENT==4?lo:Be)(n-e);return t.set(r.subarray(e,n)),t},Ms=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ve=function(r,e,n){var t=new Error(e||Ms[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Ve),!n)throw t;return t},Fs=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Be(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Be(t*3));var s=function(de){var we=e.length;if(de>we){var ge=new Be(Math.max(we*2,de));ge.set(e),e=ge}},f=n.f||0,i=n.p||0,a=n.b||0,u=n.l,c=n.d,_=n.m,m=n.n,y=t*8;do{if(!u){f=We(r,i,1);var C=We(r,i+1,3);if(i+=3,C)if(C==1)u=Ps,c=Is,_=9,m=5;else if(C==2){var P=We(r,i,31)+257,A=We(r,i+10,15)+4,L=P+We(r,i+5,31)+1;i+=14;for(var M=new Be(L),E=new Be(19),N=0;N<A;++N)E[Ts[N]]=We(r,i+N*3,7);i+=A*3;for(var R=dn(E),G=(1<<R)-1,q=xt(E,R,1),N=0;N<L;){var j=q[We(r,i,G)];i+=j&15;var S=j>>>4;if(S<16)M[N++]=S;else{var F=0,B=0;for(S==16?(B=3+We(r,i,3),i+=2,F=M[N-1]):S==17?(B=3+We(r,i,7),i+=3):S==18&&(B=11+We(r,i,127),i+=7);B--;)M[N++]=F}}var se=M.subarray(0,P),ie=M.subarray(P);_=dn(se),m=dn(ie),u=xt(se,_,1),c=xt(ie,m,1)}else Ve(1);else{var S=Ns(i)+4,I=r[S-4]|r[S-3]<<8,D=S+I;if(D>t){o&&Ve(0);break}l&&s(a+I),e.set(r.subarray(S,D),a),n.b=a+=I,n.p=i=D*8,n.f=f;continue}if(i>y){o&&Ve(0);break}}l&&s(a+131072);for(var Se=(1<<_)-1,he=(1<<m)-1,Ce=i;;Ce=i){var F=u[hn(r,i)&Se],ae=F>>>4;if(i+=F&15,i>y){o&&Ve(0);break}if(F||Ve(2),ae<256)e[a++]=ae;else if(ae==256){Ce=i,u=null;break}else{var Ne=ae-254;if(ae>264){var N=ae-257,Oe=oo[N];Ne=We(r,i,(1<<Oe)-1)+fo[N],i+=Oe}var ve=c[hn(r,i)&he],le=ve>>>4;ve||Ve(3),i+=ve&15;var ie=As[le];if(le>3){var Oe=so[le];ie+=hn(r,i)&(1<<Oe)-1,i+=Oe}if(i>y){o&&Ve(0);break}l&&s(a+131072);for(var me=a+Ne;a<me;a+=4)e[a]=e[a-ie],e[a+1]=e[a+1-ie],e[a+2]=e[a+2-ie],e[a+3]=e[a+3-ie];a=me}}n.l=u,n.p=Ce,n.b=a,n.f=f,u&&(f=1,n.m=_,n.d=c,n.n=m)}while(!f);return a==e.length?e:Hn(e,0,a)},Es=new Be(0),et=function(r,e){return r[e]|r[e+1]<<8},Xe=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},bn=function(r,e){return Xe(r,e)+Xe(r,e+4)*4294967296};function Ds(r,e){return Fs(r,e)}var In=typeof TextDecoder<"u"&&new TextDecoder,js=0;try{In.decode(Es,{stream:!0}),js=1}catch{}var Rs=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,Hn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function co(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(In)return In.decode(r);var l=Rs(r),o=l[0],s=l[1];return s.length&&Ve(8),o}}var zs=function(r,e){return e+30+et(r,e+26)+et(r,e+28)},Bs=function(r,e,n){var t=et(r,e+28),l=co(r.subarray(e+46,e+46+t),!(et(r,e+8)&2048)),o=e+46+t,s=Xe(r,e+20),f=n&&s==4294967295?qs(r,o):[s,Xe(r,e+24),Xe(r,e+42)],i=f[0],a=f[1],u=f[2];return[et(r,e+10),i,a,l,o+et(r,e+30)+et(r,e+32),u]},qs=function(r,e){for(;et(r,e)!=1;e+=4+et(r,e+2));return[bn(r,e+12),bn(r,e+4),bn(r,e+20)]};function Hs(r,e){for(var n={},t=r.length-22;Xe(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Ve(13);var l=et(r,t+8);if(!l)return{};var o=Xe(r,t+16),s=o==4294967295||l==65535;if(s){var f=Xe(r,t-12);s=Xe(r,f)==101075792,s&&(l=Xe(r,f+32),o=Xe(r,f+48))}for(var i=e&&e.filter,a=0;a<l;++a){var u=Bs(r,o,s),c=u[0],_=u[1],m=u[2],y=u[3],C=u[4],S=u[5],I=zs(r,S);o=C,(!i||i({name:y,size:_,originalSize:m,compression:c}))&&(c?c==8?n[y]=Ds(r.subarray(I,I+_),new Be(m)):Ve(14,"unknown compression type "+c):n[y]=Hn(r,I,I+_))}return n}function Us(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(vn):vn(r)}function vn(r){var e=new Uint8Array(r),n=Hs(e);return Promise.resolve(Gs(n))}function Gs(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=co(r[l])}return e}function lt(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&St(t)===e)return t;n++}}function ln(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&St(l)===e&&n.push(l),t++}return n}function cn(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&St(l)===e&&n(l,t):n(l,t),t++}}function Ws(r,e,n){var t=[];return cn(r,e,function(l,o){t.push(n(l,o))}),t}var Vs=/.+\:/;function St(r){return r.tagName.replace(Vs,"")}function $o(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+St(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=$o(r.childNodes[t]),t++;return e+="</"+St(r)+">",e}function Xs(r){var e=r.documentElement,n=lt(e,"sheetData"),t=[];return cn(n,"row",function(l){cn(l,"c",function(o){t.push(o)})}),t}function Js(r,e){return lt(e,"v")}function Ys(r,e){if(e.firstChild&&St(e.firstChild)==="is"&&e.firstChild.firstChild&&St(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Ks(r){var e=r.documentElement,n=lt(e,"dimension");if(n)return n.getAttribute("ref")}function Zs(r){var e=r.documentElement,n=lt(e,"cellStyleXfs");return n?ln(n,"xf"):[]}function Qs(r){var e=r.documentElement,n=lt(e,"cellXfs");return n?ln(n,"xf"):[]}function xs(r){var e=r.documentElement,n=lt(e,"numFmts");return n?ln(n,"numFmt"):[]}function ei(r){var e=r.documentElement;return Ws(e,"si",function(n){var t=lt(n,"t");if(t)return t.textContent;var l="";return cn(n,"r",function(o){l+=lt(o,"t").textContent}),l})}function ti(r){var e=r.documentElement;return lt(e,"workbookPr")}function ni(r){var e=r.documentElement;return ln(e,"Relationship")}function ri(r){var e=r.documentElement,n=lt(e,"sheets");return ln(n,"sheet")}function li(r,e){var n=e.createDocument(r),t={},l=ti(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(f){f.getAttribute("name")&&t.sheets.push({id:f.getAttribute("sheetId"),name:f.getAttribute("name"),relationId:f.getAttribute("r:id")})};return ri(n).forEach(o),t}function oi(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var f=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=wn(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=wn(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=wn(f);break}};return ni(n).forEach(l),t}function wn(r){return r[0]==="/"?r.slice(1):"xl/"+r}function $r(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function pr(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$r(Object(n),!0).forEach(function(t){si(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):$r(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function si(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ii(r,e){if(!r)return{};var n=e.createDocument(r),t=Zs(n).map(kn),l=xs(n).map(ai).reduce(function(s,f){return s[f.id]=f,s},[]),o=function(f){return f.hasAttribute("xfId")?pr(pr({},t[f.xfId]),kn(f,l)):kn(f,l)};return Qs(n).map(o)}function ai(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function kn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function fi(r,e){return r?ei(e.createDocument(r)):[]}function po(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function ui(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ci(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ci(r,e){if(r){if(typeof r=="string")return mr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(r,e)}}function mr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function $i(r,e,n){if(r){var t=e[r];if(!t)throw new Error("Cell style not found: ".concat(r));if(!t.numberFormat)return!1;if(pi.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&gi(t.numberFormat.template))return!0}}var pi=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],mi=/^\[\$-414\]/,_i=/;@$/;function gi(r){r=r.toLowerCase(),r=r.replace(mi,""),r=r.replace(_i,"");for(var e=r.split(/\W+/),n=ui(e),t;!(t=n()).done;){var l=t.value;if(di.indexOf(l)<0)return!1}return!0}var di=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function hi(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,f=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=yn(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=yn(r,a);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=f.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=f[u],r=yn(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=bi(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var _=$i(o(),s,a);_?(r=_r(r),r=po(r,i)):r=(a.parseNumber||_r)(r);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function bi(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function yn(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}function _r(r){var e=Number(r);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(r));return e}var vi=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function wi(r){var e=function(a,u){return a-u},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],f=t[t.length-1];return[{row:l,column:s},{row:o,column:f}]}function ki(r){for(var e=0,n=0;n<r.length;)e*=26,e+=vi.indexOf(r[n]),n++;return e}function mo(r){return r=r.split(/(\d+)/),[parseInt(r[1]),ki(r[0].trim())]}function yi(r,e,n,t,l,o,s){var f=mo(r.getAttribute("r")),i=Js(e,r),a=i&&i.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:f[0],column:f[1],value:hi(a,u,{getInlineStringValue:function(){return Ys(e,r)},getInlineStringXml:function(){return $o(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function Si(r,e,n,t,l,o){var s=Xs(r);return s.length===0?[]:s.map(function(f){return yi(f,r,e,n,t,l,o)})}function Ci(r,e){return Ai(r)||Li(r,e)||Oi(r,e)||Ti()}function Ti(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oi(r,e){if(r){if(typeof r=="string")return gr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(r,e)}}function gr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Li(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Ai(r){if(Array.isArray(r))return r}function Pi(r){var e=Ks(r);if(e)return e=e.split(":").map(mo).map(function(n){var t=Ci(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Ii(r,e,n,t,l,o){var s=e.createDocument(r),f=Si(s,e,n,t,l,o),i=Pi(s)||wi(f);return{cells:f,dimensions:i}}function Ni(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Mi(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mi(r,e){if(r){if(typeof r=="string")return dr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(r,e)}}function dr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Fi(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var f=!0,i=Ni(r[s]),a;!(a=i()).done;){var u=a.value;if(l(u)!==null){f=!1;break}}if(f)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function Ei(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Di(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Di(r,e){if(r){if(typeof r=="string")return hr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hr(r,e)}}function hr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ji(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,f=Ei(r),i;!(i=f()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var u=0;u<r.length;)r[u].splice(o,1),u++;else if(l)break;o--}return r}function Ri(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=_o(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zi(r,e){return Hi(r)||qi(r,e)||_o(r,e)||Bi()}function Bi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _o(r,e){if(r){if(typeof r=="string")return br(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return br(r,e)}}function br(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function qi(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Hi(r){if(Array.isArray(r))return r}function Ui(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=zi(n,2);l[0];for(var o=l[1],s=o.column,f=o.row,i=new Array(f),a=0;a<f;){i[a]=new Array(s);for(var u=0;u<s;)i[a][u]=null,u++;a++}for(var c=Ri(t),_;!(_=c()).done;){var m=_.value,y=m.row-1,C=m.column-1;C<s&&y<f&&(i[y][C]=m.value)}var S=e.rowMap;if(S)for(var I=0;I<i.length;)S[I]=I,I++;return i=Fi(ji(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(i=e.transformData(i)),i}function Gi(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Wi(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wi(r,e){if(r){if(typeof r=="string")return vr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vr(r,e)}}function vr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function wr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Vi(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wr(Object(n),!0).forEach(function(t){Xi(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Xi(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ji(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Vi({sheet:1},n));var t=function(_){if(!r[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return r[_]},l=oi(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?fi(t(l.sharedStrings),e):[],s=l.styles?ii(t(l.styles),e):{},f=li(t("xl/workbook.xml"),e);if(n.getSheets)return f.sheets.map(function(c){var _=c.name;return{name:_}});var i=Yi(n.sheet,f.sheets);if(!i||!l.sheets[i])throw Ki(n.sheet,f.sheets);var a=Ii(t(l.sheets[i]),e,o,s,f,n),u=Ui(a,n);return n.properties?{data:u,properties:f}:u}function Yi(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Gi(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Ki(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Nn(r){"@babel/helpers - typeof";return Nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(r)}function kr(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Zi(r,e,n){return e&&kr(r.prototype,e),n&&kr(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Qi(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function xi(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&tn(r,e)}function ea(r){var e=go();return function(){var t=nn(r),l;if(e){var o=nn(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return ta(this,l)}}function ta(r,e){if(e&&(Nn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return na(r)}function na(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Mn(r){var e=typeof Map=="function"?new Map:void 0;return Mn=function(t){if(t===null||!ra(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return fn(t,arguments,nn(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),tn(l,t)},Mn(r)}function fn(r,e,n){return go()?fn=Reflect.construct:fn=function(l,o,s){var f=[null];f.push.apply(f,o);var i=Function.bind.apply(l,f),a=new i;return s&&tn(a,s.prototype),a},fn.apply(null,arguments)}function go(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ra(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function tn(r,e){return tn=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},tn(r,e)}function nn(r){return nn=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},nn(r)}var qe=function(r){xi(n,r);var e=ea(n);function n(t){var l;return Qi(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Zi(n)}(Mn(Error));function la(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new qe("not_a_number")}if(typeof r!="number")throw new qe("not_a_number");if(isNaN(r))throw new qe("invalid_number");if(!isFinite(r))throw new qe("out_of_bounds");return r}function oa(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new qe("invalid_number");if(!isFinite(r))throw new qe("out_of_bounds");return String(r)}throw new qe("not_a_string")}function sa(r){if(typeof r=="boolean")return r;throw new qe("not_a_boolean")}function ia(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new qe("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new qe("invalid_number");if(!isFinite(r))throw new qe("out_of_bounds");var t=po(r,n);if(isNaN(t.valueOf()))throw new qe("out_of_bounds");return t}throw new qe("not_a_date")}function aa(r,e){return ca(r)||ua(r,e)||ho(r,e)||fa()}function fa(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ua(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function ca(r){if(Array.isArray(r))return r}function Fn(r){"@babel/helpers - typeof";return Fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fn(r)}function $a(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ho(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ho(r,e){if(r){if(typeof r=="string")return yr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yr(r,e)}}function yr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Sr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Cr(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sr(Object(n),!0).forEach(function(t){pa(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function pa(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Tr={isColumnOriented:!1};function ma(r,e,n){n?n=Cr(Cr({},Tr),n):n=Tr;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ha(e),l&&(r=da(r));for(var f=r[0],i=[],a=[],u=1;u<r.length;u++){var c=bo(e,r[u],u,f,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var _=$a(a),m;!(m=_()).done;){var y=m.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function bo(r,e,n,t,l,o){for(var s={},f=!0,i=function(D){var P=D.column,A=D.value,L=D.error,M=D.reason,E={error:L,row:n+1,column:P,value:A};return M&&(E.reason=M),r[P].type&&(E.type=r[P].type),E},a=[],u=function(){var D=_[c],P=r[D],A=Fn(P.type)==="object"&&!Array.isArray(P.type),L=e[t.indexOf(D)];L===void 0&&(L=null);var M=void 0,E=void 0,N=void 0;if(A)M=bo(P.type,e,n,t,l,o);else if(L===null)M=null;else if(Array.isArray(P.type)){var R=!1,G=ga(L).map(function(j){var F=Or(j,P,o);return F.error&&(M=j,E=F.error,N=F.reason),F.value!==null&&(R=!0),F.value});E||(M=R?G:null)}else{var q=Or(L,P,o);E=q.error,N=q.reason,M=E?L:q.value}!E&&M===null&&(typeof P.required=="function"?a.push({column:D}):P.required===!0&&(E="required")),E?l.push(i({column:D,value:M,error:E,reason:N})):(f&&M!==null&&(f=!1),(M!==null||o.includeNullValues)&&(s[P.prop]=M))},c=0,_=Object.keys(r);c<_.length;c++)u();if(f)return null;for(var m=0,y=a;m<y.length;m++){var C=y[m].column,S=r[C].required(s);S&&l.push(i({column:C,value:null,error:"required"}))}return s}function Or(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=Lt(r,e.parse):e.type?t=_a(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function Lt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function _a(r,e,n){switch(e){case String:return Lt(r,oa);case Number:return Lt(r,la);case Date:return Lt(r,function(t){return ia(t,{properties:n.properties})});case Boolean:return Lt(r,sa);default:if(typeof e=="function")return Lt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function vo(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=vo(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function ga(r){for(var e=[],n=0;n<r.length;){var t=vo(r,",",n),l=aa(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var da=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function ha(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function En(r){"@babel/helpers - typeof";return En=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(r)}function wo(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;En(o)==="object"&&(o=Object.keys(r[l])[0],s=wo(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var ba=["schema","map"];function Lr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function an(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lr(Object(n),!0).forEach(function(t){va(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function va(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function wa(r,e){if(r==null)return{};var n=ka(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ka(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function ya(r,e,n){var t=n.schema,l=n.map,o=wa(n,ba);!t&&l&&(t=wo(l));var s=Ji(r,e,an(an({},o),{},{properties:t||o.properties}));return t?ma(s.data,t,an(an({},o),{},{properties:s.properties})):s}function Sa(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Us(r).then(function(n){return ya(n,Cs,e)})}function Ca(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>Ta(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function Ta(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Oa(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Sa(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Ao(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Dn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function La(r){return mt(["get","intervention_type"],{area:nt.area,route:nt.route,crossing:nt.crossing,other:nt.other},"white")}function Aa(r){return[["Areas",nt.area],["Routes",nt.route],["Crossings",nt.crossing],["Other",nt.other]]}const Z={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},He=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function jn(){let[r,e]=ko(Dn,Z.funding_programmes);return[mt(["get","funding_programme"],r,"grey"),e]}function Pa(){let r=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=ko(r,Z.current_milestone);return[mt(["get","current_milestone"],e,"grey"),n]}function ko(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Ia(r){let e,n;return e=new qn({props:{rows:r[1]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Na(r){let e,n,t,l,o;function s(i){r[3](i)}let f={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(f.value=r[0]),e=new dt({props:f}),W.push(()=>V(e,"value",s)),e.$on("change",r[2]),l=new ze({props:{label:"Legend",$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};!n&&a&1&&(n=!0,u.value=i[0],X(()=>n=!1)),e.$set(u);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function Ma(r,e,n){let t;re(r,zn,a=>n(4,t=a));let l="fundingProgramme",[o,s]=jn();function f(){let a;l=="interventionType"?(a=La(),n(1,s=Aa())):l=="fundingProgramme"?n(1,[a,s]=jn(),s):l=="currentMilestone"&&n(1,[a,s]=Pa(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){l=a,n(0,l)}return[l,s,f,i]}class Fa extends Y{constructor(e){super(),K(this,e,Ma,Na,J,{})}}const Vt=Tt({type:"FeatureCollection",features:[],schemes:{}}),$n=Tt(new Map),Ar=Tt(!0),Yt=Tt(""),Kt=Tt("");function Ea(r){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Da(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(r){let e,n,t,l,o,s;return t=new pt({props:{$$slots:{default:[Da]},$$scope:{ctx:r}}}),t.$on("click",r[19]),{c(){e=T("input"),n=O(),b(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterInterventionText")},m(f,i){$(f,e,i),tt(e,r[7]),$(f,n,i),v(t,f,i),l=!0,o||(s=rt(e,"input",r[18]),o=!0)},p(f,i){i&128&&e.value!==f[7]&&tt(e,f[7]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(g(t.$$.fragment,f),l=!0)},o(f){d(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function Ra(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function za(r){let e,n,t,l,o,s;return t=new pt({props:{$$slots:{default:[Ra]},$$scope:{ctx:r}}}),t.$on("click",r[21]),{c(){e=T("input"),n=O(),b(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterSchemeText")},m(f,i){$(f,e,i),tt(e,r[6]),$(f,n,i),v(t,f,i),l=!0,o||(s=rt(e,"input",r[20]),o=!0)},p(f,i){i&64&&e.value!==f[6]&&tt(e,f[6]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(g(t.$$.fragment,f),l=!0)},o(f){d(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function Ba(r){let e,n,t,l,o,s,f,i,a,u,c,_,m,y,C,S,I,D,P,A;e=new pt({props:{$$slots:{default:[Ea]},$$scope:{ctx:r}}}),e.$on("click",r[13]);function L(F){r[14](F)}let M={label:"Authority or region",choices:r[8],emptyOption:!0};r[2]!==void 0&&(M.value=r[2]),t=new dt({props:M}),W.push(()=>V(t,"value",L));function E(F){r[15](F)}let N={label:"Funding programme",choices:r[9],emptyOption:!0};r[3]!==void 0&&(N.value=r[3]),s=new dt({props:N}),W.push(()=>V(s,"value",E));function R(F){r[16](F)}let G={label:"Current milestone",choices:r[10],emptyOption:!0};r[4]!==void 0&&(G.value=r[4]),a=new dt({props:G}),W.push(()=>V(a,"value",R));function q(F){r[17](F)}let j={label:"Sketch source",choices:r[12],emptyOption:!0};return r[5]!==void 0&&(j.value=r[5]),_=new dt({props:j}),W.push(()=>V(_,"value",q)),C=new Ln({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[ja]},$$scope:{ctx:r}}}),I=new Ln({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[za]},$$scope:{ctx:r}}}),P=new Fa({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment),i=O(),b(a.$$.fragment),c=O(),b(_.$$.fragment),y=O(),b(C.$$.fragment),S=O(),b(I.$$.fragment),D=O(),b(P.$$.fragment)},m(F,B){v(e,F,B),$(F,n,B),v(t,F,B),$(F,o,B),v(s,F,B),$(F,i,B),v(a,F,B),$(F,c,B),v(_,F,B),$(F,y,B),v(C,F,B),$(F,S,B),v(I,F,B),$(F,D,B),v(P,F,B),A=!0},p(F,B){const se={};B&134217728&&(se.$$scope={dirty:B,ctx:F}),e.$set(se);const ie={};B&256&&(ie.choices=F[8]),!l&&B&4&&(l=!0,ie.value=F[2],X(()=>l=!1)),t.$set(ie);const Se={};B&512&&(Se.choices=F[9]),!f&&B&8&&(f=!0,Se.value=F[3],X(()=>f=!1)),s.$set(Se);const he={};B&1024&&(he.choices=F[10]),!u&&B&16&&(u=!0,he.value=F[4],X(()=>u=!1)),a.$set(he);const Ce={};!m&&B&32&&(m=!0,Ce.value=F[5],X(()=>m=!1)),_.$set(Ce);const ae={};B&134217856&&(ae.$$scope={dirty:B,ctx:F}),C.$set(ae);const Ne={};B&134217792&&(Ne.$$scope={dirty:B,ctx:F}),I.$set(Ne)},i(F){A||(g(e.$$.fragment,F),g(t.$$.fragment,F),g(s.$$.fragment,F),g(a.$$.fragment,F),g(_.$$.fragment,F),g(C.$$.fragment,F),g(I.$$.fragment,F),g(P.$$.fragment,F),A=!0)},o(F){d(e.$$.fragment,F),d(t.$$.fragment,F),d(s.$$.fragment,F),d(a.$$.fragment,F),d(_.$$.fragment,F),d(C.$$.fragment,F),d(I.$$.fragment,F),d(P.$$.fragment,F),A=!1},d(F){F&&(p(n),p(o),p(i),p(c),p(y),p(S),p(D)),w(e,F),w(t,F),w(s,F),w(a,F),w(_,F),w(C,F),w(I,F),w(P,F)}}}function qa(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[11].route.toLocaleString()+"",s,f,i=r[11].area.toLocaleString()+"",a,u,c=r[11].crossing.toLocaleString()+"",_,m,y=r[11].other.toLocaleString()+"",C,S,I=Pr(r[11].totalLength).toFixed(1)+"",D,P;return{c(){e=k("Showing "),t=k(n),l=k(" schemes ("),s=k(o),f=k(`
    routes, `),a=k(i),u=k(` areas,
    `),_=k(c),m=k(" crossings, "),C=k(y),S=k(`
    other, with total LineString length of `),D=k(I),P=k(" miles)")},m(A,L){$(A,e,L),$(A,t,L),$(A,l,L),$(A,s,L),$(A,f,L),$(A,a,L),$(A,u,L),$(A,_,L),$(A,m,L),$(A,C,L),$(A,S,L),$(A,D,L),$(A,P,L)},p(A,L){L&1&&n!==(n=A[0].size.toLocaleString()+"")&&z(t,n),L&2048&&o!==(o=A[11].route.toLocaleString()+"")&&z(s,o),L&2048&&i!==(i=A[11].area.toLocaleString()+"")&&z(a,i),L&2048&&c!==(c=A[11].crossing.toLocaleString()+"")&&z(_,c),L&2048&&y!==(y=A[11].other.toLocaleString()+"")&&z(C,y),L&2048&&I!==(I=Pr(A[11].totalLength).toFixed(1)+"")&&z(D,I)},d(A){A&&(p(e),p(t),p(l),p(s),p(f),p(a),p(u),p(_),p(m),p(C),p(S),p(D),p(P))}}}function Ha(r){let e,n,t;function l(s){r[22](s)}let o={$$slots:{default:[qa]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new oe({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&134219777&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ua(r){let e,n,t,l;return e=new ze({props:{label:"Filters",$$slots:{default:[Ba]},$$scope:{ctx:r}}}),t=new ot({props:{small:!0,$$slots:{default:[Ha]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&134219772&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&134219779&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Pr(r){return r*621371e-9}function Ga(r,e,n){let t,l,o,s;re(r,Kt,B=>n(6,t=B)),re(r,Yt,B=>n(7,l=B)),re(r,Vt,B=>n(23,o=B)),re(r,$n,B=>n(24,s=B));let{schemesToBeShown:f=new Set}=e,{show:i=!0}=e,a=[],u="",c=[],_=new Set(Dn.slice(0,-1)),m="",y=[],C="",S=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],I="",D={area:0,route:0,crossing:0,other:0,totalLength:0};Bn(()=>{var Se,he,Ce;let B=new Set,se=new Set,ie=new Set;for(let ae of s.values())(Se=ae.browse)!=null&&Se.authority_or_region&&B.add(ae.browse.authority_or_region),(he=ae.browse)!=null&&he.funding_programme&&se.add(ae.browse.funding_programme),(Ce=ae.browse)!=null&&Ce.current_milestone&&ie.add(ae.browse.current_milestone);n(8,a=Array.from(B.entries())),a.sort(),n(9,c=Dn.map(ae=>[ae,ae])),n(10,y=Array.from(ie.entries())),y.sort()});function P(B,se,ie,Se,he,Ce){let ae=se.toLowerCase(),Ne=ie.toLowerCase(),Oe=le=>{var me,de,we,ge,Ie,Ee,Xt;if(ae&&!((me=le.properties.name)!=null&&me.toLowerCase().includes(ae))&&!((de=le.properties.description)!=null&&de.toLowerCase().includes(ae)))return!1;if(B||Ne||Se||he||Ce){let Je=s.get(le.properties.scheme_reference);if(Se&&((we=Je.browse)==null?void 0:we.authority_or_region)!=Se||he&&he!=="Other"&&((ge=Je.browse)==null?void 0:ge.funding_programme)!=he||he==="Other"&&_.has(((Ie=Je.browse)==null?void 0:Ie.funding_programme)??"")||Ce&&((Ee=Je.browse)==null?void 0:Ee.current_milestone)!=Ce||Ne&&!Je.scheme_reference.toLowerCase().includes(Ne)&&!(Je.scheme_name??"").toLowerCase().includes(Ne)||B&&B!=="Both"&&B!==((Xt=Je.browse)==null?void 0:Xt.sketch_source))return!1}return!0};n(0,f=new Set(o.features.filter(Oe).map(le=>le.properties.scheme_reference))),n(11,D={area:0,route:0,crossing:0,other:0,totalLength:0});let ve=le=>{var me,de;return!(!f.has(le.properties.scheme_reference)||ae&&!((me=le.properties.name)!=null&&me.toLowerCase().includes(ae))&&!((de=le.properties.description)!=null&&de.toLowerCase().includes(ae)))};for(let le of o.features)ve(le)?(delete le.properties.hide_while_editing,n(11,D[le.properties.intervention_type]++,D),le.geometry.type=="LineString"&&le.properties.length_meters&&n(11,D.totalLength+=le.properties.length_meters,D)):le.properties.hide_while_editing=!0;Vt.set(o),n(11,D)}function A(){n(5,I=""),n(2,u=""),n(3,m=""),n(4,C=""),ct(Yt,l="",l),ct(Kt,t="",t)}function L(B){u=B,n(2,u)}function M(B){m=B,n(3,m)}function E(B){C=B,n(4,C)}function N(B){I=B,n(5,I)}function R(){l=this.value,Yt.set(l)}const G=()=>ct(Yt,l="",l);function q(){t=this.value,Kt.set(t)}const j=()=>ct(Kt,t="",t);function F(B){i=B,n(1,i)}return r.$$set=B=>{"schemesToBeShown"in B&&n(0,f=B.schemesToBeShown),"show"in B&&n(1,i=B.show)},r.$$.update=()=>{r.$$.dirty&252&&P(I,l,t,u,m,C)},[f,i,u,m,C,I,t,l,a,c,y,D,S,A,L,M,E,N,R,G,q,j,F]}class Wa extends Y{constructor(e){super(),K(this,e,Ga,Ua,J,{schemesToBeShown:0,show:1})}}function Va(r){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xa(r){let e,n,t,l,o;return t=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Va]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment),l=k(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,f){$(s,e,f),h(e,n),v(t,e,null),h(e,l),o=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){o||(g(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class Re extends Y{constructor(e){super(),K(this,e,null,Xa,J,{})}}function Ir(r,e,n){const t=r.slice();return t[2]=e[n],t}function Nr(r,e,n){const t=r.slice();return t[5]=e[n],t}function Mr(r){let e,n;return{c(){e=T("span"),n=k(`Â 
    `),Te(e,"background",r[5]),Te(e,"width","100%"),Te(e,"border","1px solid black")},m(t,l){$(t,e,l),h(e,n)},p(t,l){l&1&&Te(e,"background",t[5])},d(t){t&&p(e)}}}function Fr(r){let e,n=r[2]+"",t;return{c(){e=T("span"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&z(t,n)},d(l){l&&p(e)}}}function Ja(r){let e,n,t,l=je(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=Mr(Nr(r,l,i));let s=je(r[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=Fr(Ir(r,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=O(),t=T("div");for(let i=0;i<f.length;i+=1)f[i].c();Te(e,"display","flex"),Te(t,"display","flex"),Te(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);$(i,n,a),$(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){l=je(i[0]);let u;for(u=0;u<l.length;u+=1){const c=Nr(i,l,u);o[u]?o[u].p(c,a):(o[u]=Mr(c),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}if(a&2){s=je(i[1]);let u;for(u=0;u<s.length;u+=1){const c=Ir(i,s,u);f[u]?f[u].p(c,a):(f[u]=Fr(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:te,o:te,d(i){i&&(p(e),p(n),p(t)),$t(o,i),$t(f,i)}}}function Ya(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ge extends Y{constructor(e){super(),K(this,e,Ya,Ja,J,{colorScale:0,limits:1})}}function Er(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Ka(r){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Za(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qa(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ef(r){let e,n,t,l,o,s,f,i,a,u,c,_;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Za]},$$scope:{ctx:r}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Qa]},$$scope:{ctx:r}}}),u=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[xa]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=O(),i=T("p"),a=k("License: "),b(u.$$.fragment),c=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(m,f,y),$(m,i,y),h(i,a),v(u,i,null),h(i,c),_=!0},p(m,y){const C={};y&65536&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&65536&&(S.$$scope={dirty:y,ctx:m}),o.$set(S);const I={};y&65536&&(I.$$scope={dirty:y,ctx:m}),u.$set(I)},i(m){_||(g(t.$$.fragment,m),g(o.$$.fragment,m),g(u.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),_=!1},d(m){m&&(p(e),p(f),p(i)),w(t),w(o),w(u)}}}function tf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[ef]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Dr(r){let e,n;return e=new Ge({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function nf(r){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sf(r){let e,n,t,l,o,s,f,i,a,u,c,_,m,y;return o=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[rf]},$$scope:{ctx:r}}}),f=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[lf]},$$scope:{ctx:r}}}),_=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[of]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=T("p"),l=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(f.$$.fragment),i=k("."),a=O(),u=T("p"),c=k("License: "),b(_.$$.fragment),m=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(C,S){$(C,e,S),$(C,n,S),$(C,t,S),h(t,l),v(o,t,null),h(t,s),v(f,t,null),h(t,i),$(C,a,S),$(C,u,S),h(u,c),v(_,u,null),h(u,m),y=!0},p(C,S){const I={};S&65536&&(I.$$scope={dirty:S,ctx:C}),o.$set(I);const D={};S&65536&&(D.$$scope={dirty:S,ctx:C}),f.$set(D);const P={};S&65536&&(P.$$scope={dirty:S,ctx:C}),_.$set(P)},i(C){y||(g(o.$$.fragment,C),g(f.$$.fragment,C),g(_.$$.fragment,C),y=!0)},o(C){d(o.$$.fragment,C),d(f.$$.fragment,C),d(_.$$.fragment,C),y=!1},d(C){C&&(p(e),p(n),p(t),p(a),p(u)),w(o),w(f),w(_)}}}function af(r){let e,n,t;return n=new _e({props:{$$slots:{default:[sf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function jr(r){let e,n;return e=new Ge({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ff(r){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uf(r){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(r){let e,n,t,l,o,s,f,i,a;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[uf]},$$scope:{ctx:r}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[cf]},$$scope:{ctx:r}}}),i=new Re({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:u}),t.$set(_);const m={};c&65536&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function pf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[$f]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Rr(r){let e,n,t,l;return t=new Ge({props:{colorScale:r[4],limits:r[6]().map(wf)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:te,i(o){l||(g(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function mf(r){let e,n,t,l=r[15].toLocaleString()+"",o,s,f=r[14]+"",i;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(l),s=k(`
          people per square kilometre in `),i=k(f)},m(a,u){$(a,e,u),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,u){u&8200&&l!==(l=a[15].toLocaleString()+"")&&z(o,l),u&8192&&f!==(f=a[14]+"")&&z(i,f)},d(a){a&&p(e)}}}function _f(r){let e,n,t=r[14]+"",l,o,s,f=r[15]+"",i,a;return{c(){e=T("p"),n=k("Households in "),l=k(t),o=k(` have an average of
          `),s=T("b"),i=k(f),a=k(`
          cars`)},m(u,c){$(u,e,c),h(e,n),h(e,l),h(e,o),h(e,s),h(s,i),h(e,a)},p(u,c){c&8192&&t!==(t=u[14]+"")&&z(l,t),c&8200&&f!==(f=u[15]+"")&&z(i,f)},d(u){u&&p(e)}}}function gf(r){let e,n,t=r[15]+"",l,o,s,f=r[14]+"",i,a;return{c(){e=T("p"),n=T("b"),l=k(t),o=k("%"),s=k(`
          of households in `),i=k(f),a=k(" have 1 or more cars")},m(u,c){$(u,e,c),h(e,n),h(n,l),h(n,o),h(e,s),h(e,i),h(e,a)},p(u,c){c&8200&&t!==(t=u[15]+"")&&z(l,t),c&8192&&f!==(f=u[14]+"")&&z(i,f)},d(u){u&&p(e)}}}function df(r){Er(r);let e;function n(o,s){return o[3]=="percent_households_with_car"?gf:o[3]=="average_cars_per_household"?_f:mf}let t=n(r),l=t(r);return{c(){l.c(),e=Me()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){Er(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function hf(r){let e,n;return e=new ue({props:{$$slots:{default:[df,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function bf(r){let e,n,t,l;const o=[H(it),{sourceLayer:it},{paint:{"fill-color":Ae(["get",r[3]],r[6](),r[4]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[hf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ue({props:s}),e.$on("click",r[5]);const f=[H(`${it}-outline`),{sourceLayer:it},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&88?ne(o,[u&0&&fe(H(it)),u&0&&{sourceLayer:it},u&88&&{paint:{"fill-color":Ae(["get",a[3]],a[6](),a[4]),"fill-opacity":Q(.5,.7)}},u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};u&65544&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&8?ne(f,[u&0&&fe(H(`${it}-outline`)),u&0&&{sourceLayer:it},f[2],u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function vf(r){let e,n,t,l,o,s,f,i,a,u,c,_,m,y;function C(N){r[7](N)}let S={$$slots:{right:[tf],default:[Ka]},$$scope:{ctx:r}};r[0]!==void 0&&(S.checked=r[0]),e=new oe({props:S}),W.push(()=>V(e,"checked",C)),e.$on("change",r[8]);let I=r[3]=="percent_households_with_car"&&Dr(r);function D(N){r[9](N)}let P={$$slots:{right:[af],default:[nf]},$$scope:{ctx:r}};r[1]!==void 0&&(P.checked=r[1]),o=new oe({props:P}),W.push(()=>V(o,"checked",D)),o.$on("change",r[10]);let A=r[3]=="average_cars_per_household"&&jr(r);function L(N){r[11](N)}let M={$$slots:{right:[pf],default:[ff]},$$scope:{ctx:r}};r[2]!==void 0&&(M.checked=r[2]),a=new oe({props:M}),W.push(()=>V(a,"checked",L)),a.$on("change",r[12]);let E=r[3]=="population_density"&&Rr(r);return m=new ye({props:{url:`pmtiles://${be()}/v1/${it}.pmtiles`,$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),I&&I.c(),l=O(),b(o.$$.fragment),f=O(),A&&A.c(),i=O(),b(a.$$.fragment),c=O(),E&&E.c(),_=O(),b(m.$$.fragment)},m(N,R){v(e,N,R),$(N,t,R),I&&I.m(N,R),$(N,l,R),v(o,N,R),$(N,f,R),A&&A.m(N,R),$(N,i,R),v(a,N,R),$(N,c,R),E&&E.m(N,R),$(N,_,R),v(m,N,R),y=!0},p(N,[R]){const G={};R&65536&&(G.$$scope={dirty:R,ctx:N}),!n&&R&1&&(n=!0,G.checked=N[0],X(()=>n=!1)),e.$set(G),N[3]=="percent_households_with_car"?I?(I.p(N,R),R&8&&g(I,1)):(I=Dr(N),I.c(),g(I,1),I.m(l.parentNode,l)):I&&($e(),d(I,1,1,()=>{I=null}),pe());const q={};R&65536&&(q.$$scope={dirty:R,ctx:N}),!s&&R&2&&(s=!0,q.checked=N[1],X(()=>s=!1)),o.$set(q),N[3]=="average_cars_per_household"?A?(A.p(N,R),R&8&&g(A,1)):(A=jr(N),A.c(),g(A,1),A.m(i.parentNode,i)):A&&($e(),d(A,1,1,()=>{A=null}),pe());const j={};R&65536&&(j.$$scope={dirty:R,ctx:N}),!u&&R&4&&(u=!0,j.checked=N[2],X(()=>u=!1)),a.$set(j),N[3]=="population_density"?E?(E.p(N,R),R&8&&g(E,1)):(E=Rr(N),E.c(),g(E,1),E.m(_.parentNode,_)):E&&($e(),d(E,1,1,()=>{E=null}),pe());const F={};R&65544&&(F.$$scope={dirty:R,ctx:N}),m.$set(F)},i(N){y||(g(e.$$.fragment,N),g(I),g(o.$$.fragment,N),g(A),g(a.$$.fragment,N),g(E),g(m.$$.fragment,N),y=!0)},o(N){d(e.$$.fragment,N),d(I),d(o.$$.fragment,N),d(A),d(a.$$.fragment,N),d(E),d(m.$$.fragment,N),y=!1},d(N){N&&(p(t),p(l),p(f),p(i),p(c),p(_)),w(e,N),I&&I.d(N),w(o,N),A&&A.d(N),w(a,N),E&&E.d(N),w(m,N)}}}let it="census_output_areas";const wf=r=>r.toLocaleString();function kf(r,e,n){let t=Z.sequential_low_to_high,l=!1,o=!1,s=!1,f="";function i(S){let I=S.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${I}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${I}`,"_blank")}function a(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function u(S){l=S,n(0,l)}const c=()=>{n(1,o=!1),n(2,s=!1)};function _(S){o=S,n(1,o)}const m=()=>{n(0,l=!1),n(2,s=!1)};function y(S){s=S,n(2,s)}const C=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,f="percent_households_with_car"):o?n(3,f="average_cars_per_household"):s?n(3,f="population_density"):n(3,f=""))},[l,o,s,f,t,i,a,u,c,_,m,y,C]}class yf extends Y{constructor(e){super(),K(this,e,kf,vf,J,{})}}function Pe(r){let e=new URLSearchParams(window.location.search).has(r),n=Tt(e);return n.subscribe(t=>{let l=new URL(window.location.href);t?l.searchParams.set(r,"1"):l.searchParams.delete(r),window.history.replaceState(null,"",l.toString())}),n}function on(r,e,n,t){let l=new URLSearchParams(window.location.search).get(r),o=l==null?e:t(l),s=Tt(o);return s.subscribe(f=>{let i=new URL(window.location.href),a=n(f);a==null?i.searchParams.delete(r):i.searchParams.set(r,a),window.history.replaceState(null,"",i.toString())}),s}function Sf(r){let e,n,t;return e=new Fe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Cf(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tf(r){let e,n,t,l,o,s,f;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Cf]},$$scope:{ctx:r}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of December 2022."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Of(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Tf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Lf(r){let e,n=r[4].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=l[4].name+"")&&z(t,n)},d(l){l&&p(e)}}}function Af(r){let e,n;return e=new ue({props:{$$slots:{default:[Lf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Pf(r){let e,n,t,l;const o=[H(At),{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Af]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ue({props:s}),e.$on("click",Nf);const f=[H(`${At}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ne(o,[u&0&&fe(H(At)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&3?ne(f,[u&0&&fe(H(`${At}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function If(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[Of],default:[Sf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),l=new Ct({props:{data:`${be()}/v1/${At}.geojson`,$$slots:{default:[Pf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let At="combined_authorities";function Nf(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Mf(r,e,n){let t,l=Z.combined_authorities,o=Pe(At);re(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class Ff extends Y{constructor(e){super(),K(this,e,Mf,If,J,{})}}function Ef(r){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Df(r){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jf(r){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rf(r){let e,n,t,l,o,s,f,i,a;return t=new ee({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Df]},$$scope:{ctx:r}}}),o=new ee({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[jf]},$$scope:{ctx:r}}}),i=new Re({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),l=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),t.$set(_);const m={};c&64&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function zf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Rf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function zr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Bf(r){let e,n=r[5].LSOA11CD+"",t,l,o,s=r[5].score+"",f,i,a,u,c,_=r[5].rank.toLocaleString()+"",m,y;return{c(){e=T("p"),t=k(n),l=k(` has an IMD score of
        `),o=T("b"),f=k(s),i=O(),a=T("p"),u=k("Rank: "),c=T("b"),m=k(_),y=k(`
        / 32,844 LSOAs`)},m(C,S){$(C,e,S),h(e,t),h(e,l),h(e,o),h(o,f),$(C,i,S),$(C,a,S),h(a,u),h(a,c),h(c,m),h(a,y)},p(C,S){S&32&&n!==(n=C[5].LSOA11CD+"")&&z(t,n),S&32&&s!==(s=C[5].score+"")&&z(f,s),S&32&&_!==(_=C[5].rank.toLocaleString()+"")&&z(m,_)},d(C){C&&(p(e),p(i),p(a))}}}function qf(r){let e,n;return e=new ue({props:{$$slots:{default:[Bf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hf(r){let e,n,t,l;const o=[H(Ye),{sourceLayer:Ye},{paint:{"fill-color":Ae(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[qf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ue({props:s});const f=[H(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&7?ne(o,[u&0&&fe(H(Ye)),u&0&&{sourceLayer:Ye},u&6&&{paint:{"fill-color":Ae(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Q(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&1?ne(f,[u&0&&fe(H(`${Ye}-outline`)),u&0&&{sourceLayer:Ye},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Uf(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={$$slots:{right:[zf],default:[Ef]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&zr(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Ye}.pmtiles`,$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],X(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=zr(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const m={};c&65&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Ye="imd";function Gf(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,2,4,6,8,10],s=Pe(Ye);re(r,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,o,s,f]}class Wf extends Y{constructor(e){super(),K(this,e,Gf,Uf,J,{})}}function Vf(r){let e,n,t;return e=new Fe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Xf(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jf(r){let e,n,t,l,o,s,f;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Xf]},$$scope:{ctx:r}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of January 2024."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Yf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Kf(r){let e,n=r[4].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=l[4].name+"")&&z(t,n)},d(l){l&&p(e)}}}function Zf(r){let e,n;return e=new ue({props:{$$slots:{default:[Kf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qf(r){let e,n,t,l;const o=[H(Pt),{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Zf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ue({props:s}),e.$on("click",eu);const f=[H(`${Pt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ne(o,[u&0&&fe(H(Pt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&3?ne(f,[u&0&&fe(H(`${Pt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function xf(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[Yf],default:[Vf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),l=new Ct({props:{data:`${be()}/v1/${Pt}.geojson`,$$slots:{default:[Qf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Pt="local_authority_districts";function eu(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function tu(r,e,n){let t,l=Z.local_authority_districts,o=Pe(Pt);re(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class nu extends Y{constructor(e){super(),K(this,e,tu,xf,J,{})}}function ru(r){let e,n,t;return e=new Fe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function lu(r){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ou(r){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function su(r){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(r){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function au(r){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fu(r){let e,n,t,l,o,s,f,i,a,u,c,_,m,y,C,S,I,D,P,A,L,M;return t=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[lu]},$$scope:{ctx:r}}}),o=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ou]},$$scope:{ctx:r}}}),f=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[su]},$$scope:{ctx:r}}}),m=new ee({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[iu]},$$scope:{ctx:r}}}),D=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[au]},$$scope:{ctx:r}}}),L=new Re({}),{c(){e=T("p"),n=k("LPAs may be a "),b(t.$$.fragment),l=k(", "),b(o.$$.fragment),s=k("y, or "),b(f.$$.fragment),i=k("."),a=O(),u=T("p"),c=T("strong"),_=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(m.$$.fragment),y=k(" to get more details."),C=O(),S=T("p"),I=k("Data from ONS Geography via "),b(D.$$.fragment),P=k(", as of November 2022."),A=O(),b(L.$$.fragment)},m(E,N){$(E,e,N),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),v(f,e,null),h(e,i),$(E,a,N),$(E,u,N),h(u,c),h(c,_),v(m,c,null),h(c,y),$(E,C,N),$(E,S,N),h(S,I),v(D,S,null),h(S,P),$(E,A,N),v(L,E,N),M=!0},p(E,N){const R={};N&32&&(R.$$scope={dirty:N,ctx:E}),t.$set(R);const G={};N&32&&(G.$$scope={dirty:N,ctx:E}),o.$set(G);const q={};N&32&&(q.$$scope={dirty:N,ctx:E}),f.$set(q);const j={};N&32&&(j.$$scope={dirty:N,ctx:E}),m.$set(j);const F={};N&32&&(F.$$scope={dirty:N,ctx:E}),D.$set(F)},i(E){M||(g(t.$$.fragment,E),g(o.$$.fragment,E),g(f.$$.fragment,E),g(m.$$.fragment,E),g(D.$$.fragment,E),g(L.$$.fragment,E),M=!0)},o(E){d(t.$$.fragment,E),d(o.$$.fragment,E),d(f.$$.fragment,E),d(m.$$.fragment,E),d(D.$$.fragment,E),d(L.$$.fragment,E),M=!1},d(E){E&&(p(e),p(a),p(u),p(C),p(S),p(A)),w(t),w(o),w(f),w(m),w(D),w(L,E)}}}function uu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[fu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function cu(r){let e,n=r[4].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=l[4].name+"")&&z(t,n)},d(l){l&&p(e)}}}function $u(r){let e,n;return e=new ue({props:{$$slots:{default:[cu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pu(r){let e,n,t,l;const o=[H(Ke),{sourceLayer:Ke},{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[$u]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ue({props:s});const f=[H(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ne(o,[u&0&&fe(H(Ke)),u&0&&{sourceLayer:Ke},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&3?ne(f,[u&0&&fe(H(`${Ke}-outline`)),u&0&&{sourceLayer:Ke},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function mu(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[uu],default:[ru]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Ke}.pmtiles`,$$slots:{default:[pu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ke="local_planning_authorities";function _u(r,e,n){let t,l=Z.local_planning_authorities,o=Pe(Ke);re(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class gu extends Y{constructor(e){super(),K(this,e,_u,mu,J,{})}}function du(r){let e,n,t;return e=new Fe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function hu(r){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bu(r){let e,n,t,l,o,s,f;return t=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[hu]},$$scope:{ctx:r}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function vu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function wu(r){let e,n=r[4].Name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=l[4].Name+"")&&z(t,n)},d(l){l&&p(e)}}}function ku(r){let e,n;return e=new ue({props:{$$slots:{default:[wu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function yu(r){let e,n,t,l;const o=[H(Ze),{sourceLayer:Ze},{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ku]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ue({props:s}),e.$on("click",Cu);const f=[H(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ne(o,[u&0&&fe(H(Ze)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&3?ne(f,[u&0&&fe(H(`${Ze}-outline`)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Su(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[vu],default:[du]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Ze}.pmtiles`,$$slots:{default:[yu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ze="parliamentary_constituencies";function Cu(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Tu(r,e,n){let t,l=Z.parliamentary_constituencies,o=Pe(Ze);re(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class Ou extends Y{constructor(e){super(),K(this,e,Tu,Su,J,{})}}function Lu(r){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Au(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pu(r){let e,n,t,l,o,s,f,i,a;return t=new ee({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Au]},$$scope:{ctx:r}}}),i=new Re({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),l=k(`. The measurements are annual means, in units of
        Âµgm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),h(e,o),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&2048&&(_.$$scope={dirty:c,ctx:u}),t.$set(_)},i(u){a||(g(t.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(i,u)}}}function Iu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Pu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Br(r){let e,n,t,l,o=r[2](r[0].pollutant)+"",s,f,i,a,u,c,_,m,y,C,S,I,D;function P(L){r[6](L)}let A={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return r[0].pollutant!==void 0&&(A.value=r[0].pollutant),e=new dt({props:A}),W.push(()=>V(e,"value",P)),{c(){b(e.$$.fragment),t=O(),l=T("p"),s=k(o),f=O(),i=T("div"),a=T("label"),u=k(`Opacity
      `),c=T("input"),_=O(),m=T("img"),U(c,"type","range"),U(c,"min","0"),U(c,"max","100"),un(m.src,y=r[4](r[0].pollutant))||U(m,"src",y),U(m,"width",150),U(m,"alt",C=`Legend for ${r[0].pollutant} layer`)},m(L,M){v(e,L,M),$(L,t,M),$(L,l,M),h(l,s),$(L,f,M),$(L,i,M),h(i,a),h(a,u),h(a,c),tt(c,r[0].opacity),$(L,_,M),$(L,m,M),S=!0,I||(D=[rt(c,"change",r[7]),rt(c,"input",r[7])],I=!0)},p(L,M){const E={};!n&&M&1&&(n=!0,E.value=L[0].pollutant,X(()=>n=!1)),e.$set(E),(!S||M&1)&&o!==(o=L[2](L[0].pollutant)+"")&&z(s,o),M&1&&tt(c,L[0].opacity),(!S||M&1&&!un(m.src,y=L[4](L[0].pollutant)))&&U(m,"src",y),(!S||M&1&&C!==(C=`Legend for ${L[0].pollutant} layer`))&&U(m,"alt",C)},i(L){S||(g(e.$$.fragment,L),S=!0)},o(L){d(e.$$.fragment,L),S=!1},d(L){L&&(p(t),p(l),p(f),p(i),p(_),p(m)),w(e,L),I=!1,to(D)}}}function Nu(r){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":r[0].opacity/100}},{layout:{visibility:r[0].show?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ho({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[t[0],{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}]):{};e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Mu(r){let e,n,t,l,o,s;function f(u){r[5](u)}let i={$$slots:{right:[Iu],default:[Lu]},$$scope:{ctx:r}};r[0].show!==void 0&&(i.checked=r[0].show),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=r[0].show&&Br(r);return o=new fs({props:{tiles:[r[3](r[0].pollutant)],tileSize:256,$$slots:{default:[Nu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0].show,X(()=>n=!1)),e.$set(_),u[0].show?a?(a.p(u,c),c&1&&g(a,1)):(a=Br(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const m={};c&1&&(m.tiles=[u[3](u[0].pollutant)]),c&2049&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}function Fu(r){return r.show?`${r.pollutant}/${r.opacity}`:null}function Eu(r){let[e,n]=r.split("/");return{show:!0,pollutant:e,opacity:parseInt(n)}}function Du(r,e,n){let t,l,s=on("pollution",{show:!1,pollutant:"PM25_viridis",opacity:50},Fu,Eu);re(r,s,y=>n(0,l=y));function f(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${l.pollutant}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${f()}?bbox={bbox-epsg-3857}&${C}`}function u(y){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${f()}?${C}`}function c(y){r.$$.not_equal(l.show,y)&&(l.show=y,s.set(l))}function _(y){r.$$.not_equal(l.pollutant,y)&&(l.pollutant=y,s.set(l))}function m(){l.opacity=en(this.value),s.set(l)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[l.pollutant])},[l,s,i,a,u,c,_,m]}class ju extends Y{constructor(e){super(),K(this,e,Du,Mu,J,{})}}function Ru(r){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zu(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bu(r){let e,n,t,l,o,s,f,i,a;return o=new ee({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[zu]},$$scope:{ctx:r}}}),i=new Re({}),{c(){e=T("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=O(),t=T("p"),l=k("Data from June 2019, produced by "),b(o.$$.fragment),s=k(". See there for methodology details"),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),h(t,l),v(o,t,null),h(t,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){a||(g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(f)),w(o),w(i,u)}}}function qu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Bu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function qr(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hu(r){let e,n=r[4].noiseclass+"",t,l,o=Hr(r[4].noiseclass)+"",s,f;return{c(){e=T("p"),t=k(n),l=k(" dB ("),s=k(o),f=k(")")},m(i,a){$(i,e,a),h(e,t),h(e,l),h(e,s),h(e,f)},p(i,a){a&16&&n!==(n=i[4].noiseclass+"")&&z(t,n),a&16&&o!==(o=Hr(i[4].noiseclass)+"")&&z(s,o)},d(i){i&&p(e)}}}function Uu(r){let e,n;return e=new ue({props:{$$slots:{default:[Hu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gu(r){let e,n;const t=[H(It),{sourceLayer:It},{paint:{"fill-color":mt(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":Q(.5,.8)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Uu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ue({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&fe(H(It)),s&0&&{sourceLayer:It},s&2&&{paint:{"fill-color":mt(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":Q(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Wu(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={$$slots:{right:[qu],default:[Ru]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&qr(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${It}.pmtiles`,$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],X(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=qr(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let It="road_noise";function Hr(r){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[r]}function Vu(r,e,n){let t,l=[Z.sequential_low_to_high[0],Z.sequential_low_to_high[2],Z.sequential_low_to_high[4]],o=Pe(It);re(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class Xu extends Y{constructor(e){super(),K(this,e,Vu,Wu,J,{})}}function Ju(r){let e,n,t;return e=new Fe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Yu(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ku(r){let e,n,t,l,o,s,f;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Yu]},$$scope:{ctx:r}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Zu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Ku]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Qu(r){let e,n=r[4].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=l[4].name+"")&&z(t,n)},d(l){l&&p(e)}}}function xu(r){let e,n;return e=new ue({props:{$$slots:{default:[Qu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ec(r){let e,n,t,l;const o=[H(Qe),{sourceLayer:Qe},{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[xu]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ue({props:s}),e.$on("click",nc);const f=[H(`${Qe}-outline`),{sourceLayer:Qe},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?ne(o,[u&0&&fe(H(Qe)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&3?ne(f,[u&0&&fe(H(`${Qe}-outline`)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function tc(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[Zu],default:[Ju]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Qe}.pmtiles`,$$slots:{default:[ec]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Qe="wards";function nc(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function rc(r,e,n){let t,l=Z.wards,o=Pe(Qe);re(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class lc extends Y{constructor(e){super(),K(this,e,rc,tc,J,{})}}function oc(r){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sc(r){let e,n,t,l;return t=new ee({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[oc]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),l=!0},p(o,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:o}),t.$set(f)},i(o){l||(g(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&p(e),w(t)}}}class st extends Y{constructor(e){super(),K(this,e,null,sc,J,{})}}function ic(r){let e,n,t;return e=new Fe({props:{color:Z.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function ac(r){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fc(r){let e,n,t,l,o,s,f,i,a;return o=new ee({props:{href:"https://gtfs.org",$$slots:{default:[ac]},$$scope:{ctx:r}}}),i=new st({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=T("p"),l=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),h(t,l),v(o,t,null),h(t,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&16&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){a||(g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(f)),w(o),w(i,u)}}}function uc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function cc(r){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $c(r){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pc(r){let e;function n(o,s){return o[3].has_bus_lane?$c:cc}let t=n(r),l=t(r);return{c(){l.c(),e=Me()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function mc(r){let e,n;return e=new ue({props:{$$slots:{default:[pc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _c(r){let e,n;const t=[H(Nt),{sourceLayer:Nt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[mc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&fe(H(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function gc(r){let e,n,t,l,o;function s(i){r[2](i)}let f={$$slots:{right:[uc],default:[ic]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Nt}.pmtiles`,$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Nt="bus_routes";function dc(r,e,n){let t,l=Pe(Nt);re(r,l,s=>n(0,t=s));function o(s){t=s,l.set(t)}return[t,l,o]}class hc extends Y{constructor(e){super(),K(this,e,dc,gc,J,{})}}function Ur(r){const e=Ac(r[9]);r[10]=e[0],r[11]=e[1],r[12]=e[2]}function Gr(r,e,n){const t=r.slice();return t[10]=e[n][0],t[13]=e[n][1],t[14]=e[n][2],t[15]=e,t[16]=n,t}function bc(r){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vc(r){let e,n,t,l,o,s,f,i;return f=new st({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=O(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=O(),b(f.$$.fragment)},m(a,u){$(a,e,u),$(a,n,u),$(a,t,u),$(a,l,u),$(a,o,u),$(a,s,u),v(f,a,u),i=!0},p:te,i(a){i||(g(f.$$.fragment,a),i=!0)},o(a){d(f.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(s)),w(f,a)}}}function wc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[vc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&131072&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Wr(r){let e,n,t;return n=new ot({props:{$$slots:{default:[yc]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(n.$$.fragment),Te(e,"border","1px solid black"),Te(e,"padding","8px")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&131073&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function kc(r){let e,n,t=r[13]+"",l,o,s;return e=new Fe({props:{color:r[14]}}),{c(){b(e.$$.fragment),n=O(),l=k(t),o=O()},m(f,i){v(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p:te,i(f){s||(g(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),w(e,f)}}}function Vr(r){let e,n,t;function l(s){r[5](s,r[10])}let o={$$slots:{default:[kc]},$$scope:{ctx:r}};return r[0][r[10]]!==void 0&&(o.checked=r[0][r[10]]),e=new oe({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){r=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:r}),!n&&f&5&&(n=!0,i.checked=r[0][r[10]],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function yc(r){let e,n,t=je(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Vr(Gr(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Me()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);$(s,e,f),n=!0},p(s,f){if(f&5){t=je(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Gr(s,t,i);l[i]?(l[i].p(a,f),g(l[i],1)):(l[i]=Vr(a),l[i].c(),g(l[i],1),l[i].m(e.parentNode,e))}for($e(),i=t.length;i<l.length;i+=1)o(i);pe()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)g(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)d(l[f]);n=!1},d(s){s&&p(e),$t(l,s)}}}function Sc(r){Ur(r);let e,n=r[10]+"",t,l,o,s,f,i=r[11]+"",a,u,c,_,m=r[12]+"",y;return{c(){e=T("h2"),t=k(n),l=O(),o=T("p"),s=k("Direction: "),f=T("b"),a=O(),u=T("p"),c=k("Width: "),_=T("b"),y=k(m)},m(C,S){$(C,e,S),h(e,t),$(C,l,S),$(C,o,S),h(o,s),h(o,f),f.innerHTML=i,$(C,a,S),$(C,u,S),h(u,c),h(u,_),h(_,y)},p(C,S){Ur(C),S&512&&n!==(n=C[10]+"")&&z(t,n),S&512&&i!==(i=C[11]+"")&&(f.innerHTML=i),S&512&&m!==(m=C[12]+"")&&z(y,m)},d(C){C&&(p(e),p(l),p(o),p(a),p(u))}}}function Cc(r){let e,n;return e=new ue({props:{$$slots:{default:[Sc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&131584&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Tc(r){let e,n;const t=[H(Mt),{sourceLayer:Mt},{paint:{"line-color":mt(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0].group?"visible":"none"}},{filter:r[3](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Cc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Le({props:l}),e.$on("click",Pc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&9?ne(t,[s&0&&fe(H(Mt)),s&0&&{sourceLayer:Mt},t[2],s&1&&{layout:{visibility:o[0].group?"visible":"none"}},s&9&&{filter:o[3](o[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Oc(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={$$slots:{right:[wc],default:[bc]},$$scope:{ctx:r}};r[0].group!==void 0&&(i.checked=r[0].group),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=r[0].group&&Wr(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Mt}.pmtiles`,$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&131072&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0].group,X(()=>n=!1)),e.$set(_),u[0].group?a?(a.p(u,c),c&1&&g(a,1)):(a=Wr(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const m={};c&131073&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Mt="cycle_paths";function Lc(r){return{group:!0,track:r.includes("track"),lane:r.includes("lane"),shared_use_segregated:r.includes("shared_use_segregated"),shared_use_unsegregated:r.includes("shared_use_unsegregated")}}function Ac(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Pc(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Ic(r,e,n){let t,l=["track","lane","shared_use_segregated","shared_use_unsegregated"],o={group:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(_){return _.group?l.filter(m=>_[m]).join(","):null}let f=on(Mt,o,s,Lc);re(r,f,_=>n(0,t=_));let i=[["track","Separated tracks",Z.cycle_paths.track],["lane","Unprotected lanes",Z.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]];function a(_){let m=l.filter(y=>_[y]);return["in",["get","type"],["literal",m]]}function u(_){r.$$.not_equal(t.group,_)&&(t.group=_,f.set(t))}function c(_,m){r.$$.not_equal(t[m],_)&&(t[m]=_,f.set(t))}return[t,f,i,a,u,c]}class Nc extends Y{constructor(e){super(),K(this,e,Ic,Oc,J,{})}}function Mc(r){let e,n,t;return e=new Fe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Fc(r){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ec(r){let e,n,t,l,o,s,f;return t=new ee({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Fc]},$$scope:{ctx:r}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),l=k(", as of September 2021."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Dc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Ec]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function jc(r){let e,n=(r[4].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=(l[4].name??"Unknown MRN road")+"")&&z(t,n)},d(l){l&&p(e)}}}function Rc(r){let e,n;return e=new ue({props:{$$slots:{default:[jc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zc(r){let e,n;const t=[H(Ft),{sourceLayer:Ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Rc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&fe(H(Ft)),s&0&&{sourceLayer:Ft},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Bc(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[Dc],default:[Mc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Ft}.pmtiles`,$$slots:{default:[zc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ft="mrn";function qc(r,e,n){let t,l=Z.mrn,o=Pe(Ft);re(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class Hc extends Y{constructor(e){super(),K(this,e,qc,Bc,J,{})}}function Uc(r){let e,n,t;return e=new Fe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Strategic Road Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Gc(r){let e;return{c(){e=k(`OS Open Roads
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wc(r){let e,n,t,l,o,s,f;return t=new ee({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Gc]},$$scope:{ctx:r}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Vc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Xc(r){let e,n=(r[4].name??"Unknown SRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=(l[4].name??"Unknown SRN road")+"")&&z(t,n)},d(l){l&&p(e)}}}function Jc(r){let e,n;return e=new ue({props:{$$slots:{default:[Xc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Yc(r){let e,n;const t=[H(Et),{sourceLayer:Et},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Jc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&fe(H(Et)),s&0&&{sourceLayer:Et},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Kc(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[Vc],default:[Uc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Et}.pmtiles`,$$slots:{default:[Yc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Et="srn";function Zc(r,e,n){let t,l=Z.srn,o=Pe(Et);re(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class Qc extends Y{constructor(e){super(),K(this,e,Zc,Kc,J,{})}}function xc(r){let e,n,t;return e=new Fe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function e$(r){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function t$(r){let e,n,t,l,o,s,f;return t=new ee({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[e$]},$$scope:{ctx:r}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),l=k(", downloaded on 22/01/2024."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function n$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[t$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Xr(r){let e,n,t,l=r[4].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].Desc_+"")&&z(o,l)},d(s){s&&p(e)}}}function Jr(r){let e,n,t,l=r[4].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].Greenway+"")&&z(o,l)},d(s){s&&p(e)}}}function Yr(r){let e,n,t,l=r[4].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].RouteType+"")&&z(o,l)},d(s){s&&p(e)}}}function Kr(r){let e,n,t,l=r[4].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].RouteNo+"")&&z(o,l)},d(s){s&&p(e)}}}function Zr(r){let e,n,t,l=r[4].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].RouteCat+"")&&z(o,l)},d(s){s&&p(e)}}}function Qr(r){let e,n,t,l=r[4].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].OpenStatus+"")&&z(o,l)},d(s){s&&p(e)}}}function xr(r){let e,n,t,l=r[4].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].Surface+"")&&z(o,l)},d(s){s&&p(e)}}}function el(r){let e,n,t,l=r[4].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].Quality+"")&&z(o,l)},d(s){s&&p(e)}}}function tl(r){let e,n,t,l=r[4].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&l!==(l=s[4].RoadClass+"")&&z(o,l)},d(s){s&&p(e)}}}function r$(r){let e,n,t,l,o,s,f,i,a,u=r[4].Desc_&&Xr(r),c=r[4].Greenway&&Jr(r),_=r[4].RouteType&&Yr(r),m=r[4].RouteNo&&Kr(r),y=r[4].RouteCat&&Zr(r),C=r[4].OpenStatus&&Qr(r),S=r[4].Surface&&xr(r),I=r[4].Quality&&el(r),D=r[4].RoadClass&&tl(r);return{c(){e=T("ul"),u&&u.c(),n=O(),c&&c.c(),t=O(),_&&_.c(),l=O(),m&&m.c(),o=O(),y&&y.c(),s=O(),C&&C.c(),f=O(),S&&S.c(),i=O(),I&&I.c(),a=O(),D&&D.c()},m(P,A){$(P,e,A),u&&u.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),_&&_.m(e,null),h(e,l),m&&m.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),C&&C.m(e,null),h(e,f),S&&S.m(e,null),h(e,i),I&&I.m(e,null),h(e,a),D&&D.m(e,null)},p(P,A){P[4].Desc_?u?u.p(P,A):(u=Xr(P),u.c(),u.m(e,n)):u&&(u.d(1),u=null),P[4].Greenway?c?c.p(P,A):(c=Jr(P),c.c(),c.m(e,t)):c&&(c.d(1),c=null),P[4].RouteType?_?_.p(P,A):(_=Yr(P),_.c(),_.m(e,l)):_&&(_.d(1),_=null),P[4].RouteNo?m?m.p(P,A):(m=Kr(P),m.c(),m.m(e,o)):m&&(m.d(1),m=null),P[4].RouteCat?y?y.p(P,A):(y=Zr(P),y.c(),y.m(e,s)):y&&(y.d(1),y=null),P[4].OpenStatus?C?C.p(P,A):(C=Qr(P),C.c(),C.m(e,f)):C&&(C.d(1),C=null),P[4].Surface?S?S.p(P,A):(S=xr(P),S.c(),S.m(e,i)):S&&(S.d(1),S=null),P[4].Quality?I?I.p(P,A):(I=el(P),I.c(),I.m(e,a)):I&&(I.d(1),I=null),P[4].RoadClass?D?D.p(P,A):(D=tl(P),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(P){P&&p(e),u&&u.d(),c&&c.d(),_&&_.d(),m&&m.d(),y&&y.d(),C&&C.d(),S&&S.d(),I&&I.d(),D&&D.d()}}}function l$(r){let e,n;return e=new ue({props:{$$slots:{default:[r$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function o$(r){let e,n;const t=[H(Dt),{sourceLayer:Dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[l$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&fe(H(Dt)),s&0&&{sourceLayer:Dt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function s$(r){let e,n,t,l,o;function s(i){r[3](i)}let f={$$slots:{right:[n$],default:[xc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Dt}.pmtiles`,$$slots:{default:[o$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Dt="national_cycle_network";function i$(r,e,n){let t,l=Z.national_cycle_network,o=Pe(Dt);re(r,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,l,o,s]}class a$ extends Y{constructor(e){super(),K(this,e,i$,s$,J,{})}}function nl(r,e,n){const t=r.slice();return t[6]=e[n][0],t[7]=e[n][1],t[8]=e[n][2],t}function f$(r){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function u$(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function c$(r){let e,n,t,l,o,s,f,i,a,u,c;return a=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[u$]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,n=O(),t=T("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,l=O(),o=T("p"),o.textContent="Data valid as of 1 January, 2024",s=O(),f=T("p"),i=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(a.$$.fragment),u=k(".")},m(_,m){$(_,e,m),$(_,n,m),$(_,t,m),$(_,l,m),$(_,o,m),$(_,s,m),$(_,f,m),h(f,i),v(a,f,null),h(f,u),c=!0},p(_,m){const y={};m&2048&&(y.$$scope={dirty:m,ctx:_}),a.$set(y)},i(_){c||(g(a.$$.fragment,_),c=!0)},o(_){d(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(l),p(o),p(s),p(f)),w(a)}}}function $$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[c$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function rl(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function p$(r){let e,n,t=pn(r[5].angle+r[8])+"",l;return{c(){e=T("p"),n=new bt(!1),l=k(` side of the road: no pavement
          `),n.a=l},m(o,s){$(o,e,s),n.m(t,e),h(e,l)},p(o,s){s&32&&t!==(t=pn(o[5].angle+o[8])+"")&&n.p(t)},d(o){o&&p(e)}}}function m$(r){let e,n,t=pn(r[5].angle+r[8])+"",l,o,s=r[6]+"",f,i,a,u=r[7]+"",c,_;return{c(){e=T("p"),n=new bt(!1),l=k(` side of the road:
            `),o=T("b"),f=k(s),i=k(`
            m average,
            `),a=T("b"),c=k(u),_=k(`
            m minimum
          `),n.a=l},m(m,y){$(m,e,y),n.m(t,e),h(e,l),h(e,o),h(o,f),h(e,i),h(e,a),h(a,c),h(e,_)},p(m,y){y&32&&t!==(t=pn(m[5].angle+m[8])+"")&&n.p(t),y&32&&s!==(s=m[6]+"")&&z(f,s),y&32&&u!==(u=m[7]+"")&&z(c,u)},d(m){m&&p(e)}}}function ll(r){let e;function n(o,s){return o[6]?m$:p$}let t=n(r),l=t(r);return{c(){l.c(),e=Me()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function _$(r){let e,n=je([[r[5].left_average,r[5].left_minimum,-90],[r[5].right_average,r[5].right_minimum,90]]),t=[];for(let l=0;l<2;l+=1)t[l]=ll(nl(r,n,l));return{c(){for(let l=0;l<2;l+=1)t[l].c();e=Me()},m(l,o){for(let s=0;s<2;s+=1)t[s]&&t[s].m(l,o);$(l,e,o)},p(l,o){if(o&32){n=je([[l[5].left_average,l[5].left_minimum,-90],[l[5].right_average,l[5].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=nl(l,n,s);t[s]?t[s].p(f,o):(t[s]=ll(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(l){l&&p(e),$t(t,l)}}}function g$(r){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[_$,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2080&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function d$(r){let e,n;const t=[H(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[g$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&fe(H(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&6&&{paint:{"line-color":Ae(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":He,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&2048&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function h$(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={$$slots:{right:[$$],default:[f$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&rl(r);return o=new ye({props:{url:`pmtiles://${_n()}/v1/${jt}.pmtiles`,$$slots:{default:[d$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],X(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=rl(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const m={};c&2049&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let jt="pavement_widths";function b$(r){let e=Math.floor((r+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function pn(r){return`${b$(r)} <span style="display: inline-block; rotate: ${r}deg">â¬†</span>`}function v$(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,2,4,6,8,13],s=Pe(jt);re(r,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,o,s,f]}class w$ extends Y{constructor(e){super(),K(this,e,v$,h$,J,{})}}function k$(r){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function y$(r){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function S$(r){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function C$(r){let e,n,t,l,o,s,f,i,a,u,c;return f=new ee({props:{href:"https://www.pct.bike",$$slots:{default:[y$]},$$scope:{ctx:r}}}),a=new ee({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[S$]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=O(),o=T("p"),s=k("See "),b(f.$$.fragment),i=k(" and "),b(a.$$.fragment),u=k(" for details on methodology and data sources.")},m(_,m){$(_,e,m),$(_,n,m),$(_,t,m),$(_,l,m),$(_,o,m),h(o,s),v(f,o,null),h(o,i),v(a,o,null),h(o,u),c=!0},p(_,m){const y={};m&1024&&(y.$$scope={dirty:m,ctx:_}),f.$set(y);const C={};m&1024&&(C.$$scope={dirty:m,ctx:_}),a.$set(C)},i(_){c||(g(f.$$.fragment,_),g(a.$$.fragment,_),c=!0)},o(_){d(f.$$.fragment,_),d(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(l),p(o)),w(f),w(a)}}}function T$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[C$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function ol(r){let e,n,t,l,o,s,f,i;e=new Ge({props:{colorScale:r[1],limits:r[2]}});function a(m){r[6](m)}let u={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0].tripPurpose!==void 0&&(u.value=r[0].tripPurpose),t=new no({props:u}),W.push(()=>V(t,"value",a));function c(m){r[7](m)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[0].scenario!==void 0&&(_.value=r[0].scenario),s=new dt({props:_}),W.push(()=>V(s,"value",c)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,o,y),v(s,m,y),i=!0},p(m,y){const C={};!l&&y&1&&(l=!0,C.value=m[0].tripPurpose,X(()=>l=!1)),t.$set(C);const S={};!f&&y&1&&(f=!0,S.value=m[0].scenario,X(()=>f=!1)),s.$set(S)},i(m){i||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(s.$$.fragment,m),i=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(s.$$.fragment,m),i=!1},d(m){m&&(p(n),p(o)),w(e,m),w(t,m),w(s,m)}}}function O$(r){let e,n=r[4](r[9])+"",t;return{c(){e=new bt(!1),t=Me(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[4](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function L$(r){let e,n;return e=new ue({props:{$$slots:{default:[O$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function A$(r){let e,n;const t=[H(at),{sourceLayer:at},{paint:{"line-color":Ae(["get",r[0].scenario],r[2],r[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==at?"visible":"none"}}];let l={$$slots:{default:[L$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&fe(H(at)),s&0&&{sourceLayer:at},s&7&&{paint:{"line-color":Ae(["get",o[0].scenario],o[2],o[1]),"line-width":He,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0].show&&o[0].tripPurpose==at?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function P$(r){let e,n=r[4](r[9])+"",t;return{c(){e=new bt(!1),t=Me(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[4](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function I$(r){let e,n;return e=new ue({props:{$$slots:{default:[P$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function N$(r){let e,n;const t=[H(gt),{sourceLayer:gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["get",r[0].scenario],r[2],r[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==gt?"visible":"none"}}];let l={$$slots:{default:[I$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&fe(H(gt)),s&0&&{sourceLayer:gt},t[2],t[3],s&7&&{paint:{"line-color":Ae(["get",o[0].scenario],o[2],o[1]),"line-width":He,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0].show&&o[0].tripPurpose==gt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function M$(r){let e,n,t,l,o,s,f,i;function a(_){r[5](_)}let u={$$slots:{right:[T$],default:[k$]},$$scope:{ctx:r}};r[0].show!==void 0&&(u.checked=r[0].show),e=new oe({props:u}),W.push(()=>V(e,"checked",a));let c=r[0].show&&ol(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${at}.pmtiles`,$$slots:{default:[A$]},$$scope:{ctx:r}}}),f=new ye({props:{url:`pmtiles://${be()}/v1/${gt}.pmtiles`,$$slots:{default:[N$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),c&&c.c(),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment)},m(_,m){v(e,_,m),$(_,t,m),c&&c.m(_,m),$(_,l,m),v(o,_,m),$(_,s,m),v(f,_,m),i=!0},p(_,[m]){const y={};m&1024&&(y.$$scope={dirty:m,ctx:_}),!n&&m&1&&(n=!0,y.checked=_[0].show,X(()=>n=!1)),e.$set(y),_[0].show?c?(c.p(_,m),m&1&&g(c,1)):(c=ol(_),c.c(),g(c,1),c.m(l.parentNode,l)):c&&($e(),d(c,1,1,()=>{c=null}),pe());const C={};m&1025&&(C.$$scope={dirty:m,ctx:_}),o.$set(C);const S={};m&1025&&(S.$$scope={dirty:m,ctx:_}),f.$set(S)},i(_){i||(g(e.$$.fragment,_),g(c),g(o.$$.fragment,_),g(f.$$.fragment,_),i=!0)},o(_){d(e.$$.fragment,_),d(c),d(o.$$.fragment,_),d(f.$$.fragment,_),i=!1},d(_){_&&(p(t),p(l),p(s)),w(e,_),c&&c.d(_),w(o,_),w(f,_)}}}let at="pct_commute",gt="pct_school";function F$(r){return r.show?`${r.tripPurpose}/${r.scenario}`:null}function E$(r){let[e,n]=r.split("/");return{show:!0,tripPurpose:e,scenario:n}}function D$(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,50,100,500,1e3,2e3],f=on("pct",{show:!1,tripPurpose:at,scenario:"baseline"},F$,E$);re(r,f,_=>n(0,t=_));function i(_){let m=_.baseline,y=_.gov_target,C=_.go_dutch,S=`<h2>Trip purpose: ${t.tripPurpose==at?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let I=(y/m).toFixed(1),D=(C/m).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return S}function a(_){r.$$.not_equal(t.show,_)&&(t.show=_,f.set(t))}function u(_){r.$$.not_equal(t.tripPurpose,_)&&(t.tripPurpose=_,f.set(t))}function c(_){r.$$.not_equal(t.scenario,_)&&(t.scenario=_,f.set(t))}return[t,l,o,f,i,a,u,c]}class j$ extends Y{constructor(e){super(),K(this,e,D$,M$,J,{})}}function R$(r){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function z$(r){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function B$(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function q$(r){let e,n,t,l,o,s,f,i,a,u,c,_;return t=new ee({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[z$]},$$scope:{ctx:r}}}),u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[B$]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),l=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",f=O(),i=T("p"),a=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),c=k(".")},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,l),$(m,o,y),$(m,s,y),$(m,f,y),$(m,i,y),h(i,a),v(u,i,null),h(i,c),_=!0},p(m,y){const C={};y&512&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&512&&(S.$$scope={dirty:y,ctx:m}),u.$set(S)},i(m){_||(g(t.$$.fragment,m),g(u.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(u.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(f),p(i)),w(t),w(u)}}}function H$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[q$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&512&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function sl(r){let e,n,t,l,o;e=new Ge({props:{colorScale:r[1],limits:r[2]}});function s(i){r[6](i)}let f={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0].kind!==void 0&&(f.value=r[0].kind),t=new no({props:f}),W.push(()=>V(t,"value",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const u={};!l&&a&1&&(l=!0,u.value=i[0].kind,X(()=>l=!1)),t.$set(u)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function U$(r){let e,n,t=r[8].indicative_mph+"",l,o,s,f,i,a=r[8].highest_mph+"",u,c,_=r[4][r[8].highest_description]+"",m,y;return{c(){e=T("p"),n=k("Posted speed limit: "),l=k(t),o=k(" mph"),s=O(),f=T("p"),i=k("Highest average speed: "),u=k(a),c=k(" mph (during "),m=k(_),y=k(")")},m(C,S){$(C,e,S),h(e,n),h(e,l),h(e,o),$(C,s,S),$(C,f,S),h(f,i),h(f,u),h(f,c),h(f,m),h(f,y)},p(C,S){S&256&&t!==(t=C[8].indicative_mph+"")&&z(l,t),S&256&&a!==(a=C[8].highest_mph+"")&&z(u,a),S&256&&_!==(_=C[4][C[8].highest_description]+"")&&z(m,_)},d(C){C&&(p(e),p(s),p(f))}}}function G$(r){let e,n;return e=new ue({props:{$$slots:{default:[U$,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&768&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function W$(r){let e,n;const t=[H(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["get",r[0].kind],r[2],r[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}}];let l={$$slots:{default:[G$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&fe(H(Rt)),s&0&&{sourceLayer:Rt},t[2],t[3],s&7&&{paint:{"line-color":Ae(["get",o[0].kind],o[2],o[1]),"line-width":He,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function V$(r){let e,n,t,l,o,s;function f(u){r[5](u)}let i={$$slots:{right:[H$],default:[R$]},$$scope:{ctx:r}};r[0].show!==void 0&&(i.checked=r[0].show),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=r[0].show&&sl(r);return o=new ye({props:{url:`pmtiles://${_n()}/v1/${Rt}.pmtiles`,$$slots:{default:[W$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&512&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0].show,X(()=>n=!1)),e.$set(_),u[0].show?a?(a.p(u,c),c&1&&g(a,1)):(a=sl(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const m={};c&513&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Rt="road_speeds";function X$(r){return r.show?r.kind:null}function J$(r){return{show:!0,kind:r}}function Y$(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,20,30,40,50,90],f=on(Rt,{show:!1,kind:"indicative_mph"},X$,J$);re(r,f,c=>n(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){r.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}function u(c){r.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}return[t,l,o,f,i,a,u]}class K$ extends Y{constructor(e){super(),K(this,e,Y$,V$,J,{})}}function Z$(r){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Q$(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function x$(r){let e,n,t,l,o,s,f,i,a;return f=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Q$]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",l=O(),o=T("p"),s=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),h(o,s),v(f,o,null),h(o,i),a=!0},p(u,c){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),f.$set(_)},i(u){a||(g(f.$$.fragment,u),a=!0)},o(u){d(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),w(f)}}}function ep(r){let e,n,t;return n=new _e({props:{$$slots:{default:[x$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function il(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function tp(r){let e,n,t,l=r[5].average+"",o,s,f,i,a,u,c=r[5].minimum+"",_,m;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(l),s=k(`
        meters`),f=O(),i=T("p"),a=k("Minimum width: "),u=T("b"),_=k(c),m=k(`
        meters`)},m(y,C){$(y,e,C),h(e,n),h(e,t),h(t,o),h(e,s),$(y,f,C),$(y,i,C),h(i,a),h(i,u),h(u,_),h(i,m)},p(y,C){C&32&&l!==(l=y[5].average+"")&&z(o,l),C&32&&c!==(c=y[5].minimum+"")&&z(_,c)},d(y){y&&(p(e),p(f),p(i))}}}function np(r){let e,n;return e=new ue({props:{$$slots:{default:[tp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rp(r){let e,n;const t=[H(zt),{sourceLayer:zt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["get","average"],r[2],r[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[np]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Le({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&fe(H(zt)),s&0&&{sourceLayer:zt},t[2],t[3],s&6&&{paint:{"line-color":Ae(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function lp(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={$$slots:{right:[ep],default:[Z$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&il(r);return o=new ye({props:{url:`pmtiles://${_n()}/v1/${zt}.pmtiles`,$$slots:{default:[rp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],X(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=il(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const m={};c&65&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let zt="road_widths";function op(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,5,10,15,20,100],s=Pe(zt);re(r,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,o,s,f]}class sp extends Y{constructor(e){super(),K(this,e,op,lp,J,{})}}function ip(r){let e,n,t;return e=new Fe({props:{color:Z.trams}}),{c(){b(e.$$.fragment),n=k(`
  Trams`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function ap(r){let e,n,t,l;return t=new st({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:te,i(o){l||(g(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function fp(r){let e,n,t;return n=new _e({props:{$$slots:{default:[ap]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function up(r){let e,n;const t=[H(Bt),{sourceLayer:Bt},{paint:{"line-color":Z.trams,"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Le({props:l}),e.$on("click",$p),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&fe(H(Bt)),s&0&&{sourceLayer:Bt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function cp(r){let e,n,t,l,o;function s(i){r[2](i)}let f={$$slots:{right:[fp],default:[ip]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Bt}.pmtiles`,$$slots:{default:[up]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Bt="trams";function $p(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function pp(r,e,n){let t,l=Pe(Bt);re(r,l,s=>n(0,t=s));function o(s){t=s,l.set(t)}return[t,l,o]}class mp extends Y{constructor(e){super(),K(this,e,pp,cp,J,{})}}function _p(r){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gp(r){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function dp(r){let e,n,t,l,o,s,f,i,a;return t=new ee({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[gp]},$$scope:{ctx:r}}}),i=new Re({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),l=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=O(),s=T("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),$(u,o,c),$(u,s,c),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),t.$set(_)},i(u){a||(g(t.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(o),p(s),p(f)),w(t),w(i,u)}}}function hp(r){let e,n,t;return n=new _e({props:{$$slots:{default:[dp]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function al(r){let e,n,t,l;return t=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:te,i(o){l||(g(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function bp(r){let e,n,t,l=r[5].stop_name+"",o,s,f,i,a,u=r[5].peak+"",c,_,m,y,C,S=r[5].peak_description+"",I,D,P,A,L,M=r[5].total+"",E,N,R=r[5].total_description+"",G,q;return{c(){e=T("p"),n=k("Stop name: "),t=T("b"),o=k(l),s=O(),f=T("p"),i=k("Peak: "),a=T("b"),c=k(u),_=k(`
        buses during the busiest hour of any day`),m=O(),y=T("p"),C=k("The peak hour is "),I=k(S),D=O(),P=T("p"),A=k("Total buses per day: "),L=T("b"),E=k(M),N=k(`
        (for `),G=k(R),q=k(", the busiest day of the week)")},m(j,F){$(j,e,F),h(e,n),h(e,t),h(t,o),$(j,s,F),$(j,f,F),h(f,i),h(f,a),h(a,c),h(f,_),$(j,m,F),$(j,y,F),h(y,C),h(y,I),$(j,D,F),$(j,P,F),h(P,A),h(P,L),h(L,E),h(P,N),h(P,G),h(P,q)},p(j,F){F&32&&l!==(l=j[5].stop_name+"")&&z(o,l),F&32&&u!==(u=j[5].peak+"")&&z(c,u),F&32&&S!==(S=j[5].peak_description+"")&&z(I,S),F&32&&M!==(M=j[5].total+"")&&z(E,M),F&32&&R!==(R=j[5].total_description+"")&&z(G,R)},d(j){j&&(p(e),p(s),p(f),p(m),p(y),p(D),p(P))}}}function vp(r){let e,n;return e=new ue({props:{$$slots:{default:[bp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function wp(r){let e,n;const t=[H(qt),{sourceLayer:qt},{paint:{"circle-color":Ae(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[vp]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new _t({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&fe(H(qt)),s&0&&{sourceLayer:qt},s&6&&{paint:{"circle-color":Ae(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function kp(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={$$slots:{right:[hp],default:[_p]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&al(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${qt}.pmtiles`,$$slots:{default:[wp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],X(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=al(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const m={};c&65&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let qt="bus_stops";function yp(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,3,10,20,30,100],s=Pe(qt);re(r,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,o,s,f]}class Sp extends Y{constructor(e){super(),K(this,e,yp,kp,J,{})}}function Cp(r){let e,n,t;return{c(){e=T("input"),U(e,"class","govuk-file-upload"),U(e,"id","load-criticals"),U(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=rt(e,"change",r[5]),n=!0)},p:te,d(l){l&&p(e),r[7](null),n=!1,t()}}}function fl(r){let e,n;return e=new ot({props:{small:!0,$$slots:{default:[Op]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Tp(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new Fe({props:{color:Zt}}),{c(){b(e.$$.fragment),n=k(`
        Show `),l=k(t),o=k(" issues")},m(f,i){v(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p(f,i){(!s||i&4)&&t!==(t=f[2].toLocaleString()+"")&&z(l,t)},i(f){s||(g(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),w(e,f)}}}function Op(r){let e,n,t;function l(s){r[8](s)}let o={$$slots:{default:[Tp]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new oe({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&2052&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Lp(r){let e,n,t,l,o,s;e=new Ln({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Cp]},$$scope:{ctx:r}}}),t=new ro({props:{errorMessage:r[3]}});let f=r[2]>0&&fl(r);return{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),f&&f.c(),o=Me()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),f&&f.m(i,a),$(i,o,a),s=!0},p(i,a){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?f?(f.p(i,a),a&4&&g(f,1)):(f=fl(i),f.c(),g(f,1),f.m(o.parentNode,o)):f&&($e(),d(f,1,1,()=>{f=null}),pe())},i(i){s||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(f),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(f),s=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),f&&f.d(i)}}}function Ap(r){let e,n,t=r[10].critical_type+"",l,o,s,f,i,a=r[10].location_description+"",u,c,_,m,y,C=r[10].notes+"",S,I,D,P,A,L,M,E=r[10].id+"",N,R,G,q,j,F=(r[10].inspector??"???")+"",B,se,ie,Se=r[10].submission_time+"",he,Ce,ae,Ne,Oe,ve=r[10].scheme_reference+"",le,me,de,we=r[10].current_design_stage+"",ge;return{c(){e=T("div"),n=T("h2"),l=k(t),o=O(),s=T("p"),f=T("u"),f.textContent="Location",i=k(`
          : `),u=k(a),c=O(),_=T("p"),m=T("u"),m.textContent="Notes",y=k(`
          : `),S=k(C),I=O(),D=T("hr"),P=O(),A=T("p"),L=k("Critical issue ID: "),M=T("b"),N=k(E),R=O(),G=T("p"),q=k("Submitted by "),j=T("b"),B=k(F),se=k(`
          at
          `),ie=T("b"),he=k(Se),Ce=O(),ae=T("p"),Ne=k("For scheme "),Oe=T("b"),le=k(ve),me=k(`
          in stage
          `),de=T("b"),ge=k(we),Te(e,"max-width","30vw")},m(Ie,Ee){$(Ie,e,Ee),h(e,n),h(n,l),h(e,o),h(e,s),h(s,f),h(s,i),h(s,u),h(e,c),h(e,_),h(_,m),h(_,y),h(_,S),h(e,I),h(e,D),h(e,P),h(e,A),h(A,L),h(A,M),h(M,N),h(e,R),h(e,G),h(G,q),h(G,j),h(j,B),h(G,se),h(G,ie),h(ie,he),h(e,Ce),h(e,ae),h(ae,Ne),h(ae,Oe),h(Oe,le),h(ae,me),h(ae,de),h(de,ge)},p(Ie,Ee){Ee&1024&&t!==(t=Ie[10].critical_type+"")&&z(l,t),Ee&1024&&a!==(a=Ie[10].location_description+"")&&z(u,a),Ee&1024&&C!==(C=Ie[10].notes+"")&&z(S,C),Ee&1024&&E!==(E=Ie[10].id+"")&&z(N,E),Ee&1024&&F!==(F=(Ie[10].inspector??"???")+"")&&z(B,F),Ee&1024&&Se!==(Se=Ie[10].submission_time+"")&&z(he,Se),Ee&1024&&ve!==(ve=Ie[10].scheme_reference+"")&&z(le,ve),Ee&1024&&we!==(we=Ie[10].current_design_stage+"")&&z(ge,we)},d(Ie){Ie&&p(e)}}}function Pp(r){let e,n;return e=new ue({props:{$$slots:{default:[Ap,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ip(r){let e,n,t,l,o,s;const f=[H("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":Zt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let m=0;m<f.length;m+=1)i=x(i,f[m]);e=new _t({props:i}),e.$on("click",r[6]);const a=[H("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let u={};for(let m=0;m<a.length;m+=1)u=x(u,a[m]);t=new gn({props:u});const c=[H("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Zt,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let _={$$slots:{default:[Pp]},$$scope:{ctx:r}};for(let m=0;m<c.length;m+=1)_=x(_,c[m]);return o=new _t({props:_}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,l,y),v(o,m,y),s=!0},p(m,y){const C=y&2?ne(f,[f[0],f[1],y&0&&{paint:{"circle-color":Zt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:m[1]?"visible":"none"}},f[4]]):{};e.$set(C);const S=y&2?ne(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:m[1]?"visible":"none"}}]):{};t.$set(S);const I=y&2?ne(c,[c[0],c[1],c[2],c[3],y&0&&{paint:{"circle-color":Zt,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:m[1]?"visible":"none"}}]):{};y&2048&&(I.$$scope={dirty:y,ctx:m}),o.$set(I)},i(m){s||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),s=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),s=!1},d(m){m&&(p(n),p(l)),w(e,m),w(t,m),w(o,m)}}}function Np(r){let e,n,t,l;return e=new ze({props:{label:"Critical Issues",$$slots:{default:[Lp]},$$scope:{ctx:r}}}),t=new Ct({props:{id:yo,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Ip]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&2063&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let yo="criticals",Zt="red";function Mp(r,e,n){let t;re(r,zn,m=>n(9,t=m));let l,o=!0,s=0,f="",i=Tn();async function a(m){try{n(4,i=await Oa(l.files[0])),n(2,s=i.features.length),n(3,f="")}catch(y){n(3,f=`The file you loaded is broken: ${y}`)}}async function u(m){let y=await t.getSource(yo).getClusterExpansionZoom(m.detail.features[0].properties.cluster_id);t.easeTo({center:m.detail.features[0].geometry.coordinates,zoom:y})}function c(m){W[m?"unshift":"push"](()=>{l=m,n(0,l)})}function _(m){o=m,n(1,o)}return[l,o,s,f,i,a,u,c,_]}class Fp extends Y{constructor(e){super(),K(this,e,Mp,Np,J,{})}}function Ep(r){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Dp(r){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jp(r){let e,n,t,l,o,s,f;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Dp]},$$scope:{ctx:r}}}),s=new st({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Rp(r){let e,n,t;return n=new _e({props:{$$slots:{default:[jp]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function ul(r){let e,n;return e=new qn({props:{rows:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zp(r){let e,n=cl(r[4])+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=cl(l[4])+"")&&z(t,n)},d(l){l&&p(e)}}}function Bp(r){let e,n;return e=new ue({props:{$$slots:{default:[zp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qp(r){let e,n;const t=[H(Ht),{sourceLayer:Ht},{paint:{"circle-color":mt(["get","crossing"],{traffic_signals:Z.signalized_crossing},Z.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Bp]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new _t({props:l}),e.$on("click",Up),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&fe(H(Ht)),s&0&&{sourceLayer:Ht},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Hp(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={$$slots:{right:[Rp],default:[Ep]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&ul(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Ht}.pmtiles`,$$slots:{default:[qp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],X(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=ul(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Ht="crossings";function cl(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Up(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Gp(r,e,n){let t,l=Pe(Ht);re(r,l,f=>n(0,t=f));let o=[["Signalized",Z.signalized_crossing],["Other",Z.other_crossing]];function s(f){t=f,l.set(t)}return[t,l,o,s]}class Wp extends Y{constructor(e){super(),K(this,e,Gp,Hp,J,{})}}function Vp(r){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xp(r){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jp(r){let e,n,t,l,o,s,f,i,a,u,c,_,m;return f=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Xp]},$$scope:{ctx:r}}}),u=new Re({}),_=new st({}),{c(){e=T("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=O(),t=T("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,l=O(),o=T("p"),s=k("This layer is built from "),b(f.$$.fragment),i=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=O(),b(u.$$.fragment),c=O(),b(_.$$.fragment)},m(y,C){$(y,e,C),$(y,n,C),$(y,t,C),$(y,l,C),$(y,o,C),h(o,s),v(f,o,null),h(o,i),$(y,a,C),v(u,y,C),$(y,c,C),v(_,y,C),m=!0},p(y,C){const S={};C&64&&(S.$$scope={dirty:C,ctx:y}),f.$set(S)},i(y){m||(g(f.$$.fragment,y),g(u.$$.fragment,y),g(_.$$.fragment,y),m=!0)},o(y){d(f.$$.fragment,y),d(u.$$.fragment,y),d(_.$$.fragment,y),m=!1},d(y){y&&(p(e),p(n),p(t),p(l),p(o),p(a),p(c)),w(f),w(u,y),w(_,y)}}}function Yp(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Jp]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function $l(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Kp(r){let e,n,t,l=Math.abs(r[5].gradient)/100+"",o,s;return{c(){e=T("p"),n=k("Gradient: "),t=T("b"),o=k(l),s=k(`
        %`)},m(f,i){$(f,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(f,i){i&32&&l!==(l=Math.abs(f[5].gradient)/100+"")&&z(o,l)},d(f){f&&p(e)}}}function Zp(r){let e,n;return e=new ue({props:{$$slots:{default:[Kp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qp(r){let e,n,t,l;const o=[H(xe),{sourceLayer:xe},{manageHoverState:!0},{paint:{"line-color":Ae(["/",["abs",["get","gradient"]],100],r[2],r[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let s={$$slots:{default:[Zp]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Le({props:s});const f=[H(xe+"_arrows"),{sourceLayer:xe},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new gn({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&7?ne(o,[u&0&&fe(H(xe)),u&0&&{sourceLayer:xe},o[2],u&6&&{paint:{"line-color":Ae(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":He,"line-opacity":Q(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const _=u&1?ne(f,[u&0&&fe(H(xe+"_arrows")),u&0&&{sourceLayer:xe},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function xp(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={$$slots:{right:[Yp],default:[Vp]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&$l(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${xe}.pmtiles`,$$slots:{default:[Qp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],X(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=$l(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const m={};c&65&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let xe="gradient";function em(r,e,n){let t,l=Z.gradient_flat_to_steep,o=[0,3,5,8,10,20,100],s=Pe(xe);re(r,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,o,s,f]}class tm extends Y{constructor(e){super(),K(this,e,em,xp,J,{})}}function nm(r){let e,n,t;return{c(){e=T("img"),t=k(`
  Cycle parking`),un(e.src,n=Po)||U(e,"src",n),U(e,"alt","a logo representing cycle parking")},m(l,o){$(l,e,o),$(l,t,o)},p:te,d(l){l&&(p(e),p(t))}}}function rm(r){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lm(r){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function om(r){let e,n,t,l,o,s,f,i,a,u,c;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[rm]},$$scope:{ctx:r}}}),i=new ee({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[lm]},$$scope:{ctx:r}}}),u=new st({}),{c(){e=T("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),l=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),s=T("p"),f=k("Icon from "),b(i.$$.fragment),a=O(),b(u.$$.fragment)},m(_,m){$(_,e,m),h(e,n),v(t,e,null),h(e,l),$(_,o,m),$(_,s,m),h(s,f),v(i,s,null),$(_,a,m),v(u,_,m),c=!0},p(_,m){const y={};m&16&&(y.$$scope={dirty:m,ctx:_}),t.$set(y);const C={};m&16&&(C.$$scope={dirty:m,ctx:_}),i.$set(C)},i(_){c||(g(t.$$.fragment,_),g(i.$$.fragment,_),g(u.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(i.$$.fragment,_),d(u.$$.fragment,_),c=!1},d(_){_&&(p(e),p(o),p(s),p(a)),w(t),w(i),w(u,_)}}}function sm(r){let e,n,t;return n=new _e({props:{$$slots:{default:[om]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function im(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=(s[3].capacity??"unknown")+"")&&z(o,l)},d(s){s&&p(e)}}}function am(r){let e,n;return e=new ue({props:{$$slots:{default:[im,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function fm(r){let e,n;const t=[H(Ut),{sourceLayer:Ut},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[am]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new gn({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&fe(H(Ut)),s&0&&{sourceLayer:Ut},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function um(r){let e,n,t,l,o;function s(i){r[2](i)}let f={$$slots:{right:[sm],default:[nm]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${Ut}.pmtiles`,$$slots:{default:[fm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ut="cycle_parking";function cm(r,e,n){let t,l=Pe(Ut);re(r,l,s=>n(0,t=s));function o(s){t=s,l.set(t)}return[t,l,o]}class $m extends Y{constructor(e){super(),K(this,e,cm,um,J,{})}}function pm(r){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mm(r){let e,n,t,l;return t=new st({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:te,i(o){l||(g(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function _m(r){let e,n,t;return n=new _e({props:{$$slots:{default:[mm]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function pl(r){let e,n,t;return n=new ot({props:{$$slots:{default:[bm]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(n.$$.fragment),Te(e,"border","1px solid black"),Te(e,"padding","8px")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2049&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function gm(r){let e,n,t;return e=new Fe({props:{color:Z.education.schools}}),{c(){b(e.$$.fragment),n=k(`
        Schools`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function dm(r){let e,n,t;return e=new Fe({props:{color:Z.education.colleges}}),{c(){b(e.$$.fragment),n=k(`
        Colleges`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function hm(r){let e,n,t;return e=new Fe({props:{color:Z.education.universities}}),{c(){b(e.$$.fragment),n=k(`
        Universities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function bm(r){let e,n,t,l,o,s,f,i,a;function u(S){r[4](S)}let c={$$slots:{default:[gm]},$$scope:{ctx:r}};r[0].school!==void 0&&(c.checked=r[0].school),e=new oe({props:c}),W.push(()=>V(e,"checked",u));function _(S){r[5](S)}let m={$$slots:{default:[dm]},$$scope:{ctx:r}};r[0].college!==void 0&&(m.checked=r[0].college),l=new oe({props:m}),W.push(()=>V(l,"checked",_));function y(S){r[6](S)}let C={$$slots:{default:[hm]},$$scope:{ctx:r}};return r[0].university!==void 0&&(C.checked=r[0].university),f=new oe({props:C}),W.push(()=>V(f,"checked",y)),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment),s=O(),b(f.$$.fragment)},m(S,I){v(e,S,I),$(S,t,I),v(l,S,I),$(S,s,I),v(f,S,I),a=!0},p(S,I){const D={};I&2048&&(D.$$scope={dirty:I,ctx:S}),!n&&I&1&&(n=!0,D.checked=S[0].school,X(()=>n=!1)),e.$set(D);const P={};I&2048&&(P.$$scope={dirty:I,ctx:S}),!o&&I&1&&(o=!0,P.checked=S[0].college,X(()=>o=!1)),l.$set(P);const A={};I&2048&&(A.$$scope={dirty:I,ctx:S}),!i&&I&1&&(i=!0,A.checked=S[0].university,X(()=>i=!1)),f.$set(A)},i(S){a||(g(e.$$.fragment,S),g(l.$$.fragment,S),g(f.$$.fragment,S),a=!0)},o(S){d(e.$$.fragment,S),d(l.$$.fragment,S),d(f.$$.fragment,S),a=!1},d(S){S&&(p(t),p(s)),w(e,S),w(l,S),w(f,S)}}}function vm(r){let e,n=(r[10].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&1024&&n!==(n=(l[10].name??"Unnamed institution")+"")&&z(t,n)},d(l){l&&p(e)}}}function wm(r){let e,n;return e=new ue({props:{$$slots:{default:[vm,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function km(r){let e,n;const t=[H(Gt),{sourceLayer:Gt},{paint:{"fill-color":mt(["get","type"],{school:Z.education.schools,college:Z.education.colleges,university:Z.education.universities},"grey"),"fill-opacity":Q(.7,1)}},{layout:{visibility:r[0].group?"visible":"none"}},{filter:r[2](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[wm]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ue({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&5?ne(t,[s&0&&fe(H(Gt)),s&0&&{sourceLayer:Gt},t[2],s&1&&{layout:{visibility:o[0].group?"visible":"none"}},s&5&&{filter:o[2](o[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ym(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={$$slots:{right:[_m],default:[pm]},$$scope:{ctx:r}};r[0].group!==void 0&&(i.checked=r[0].group),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=r[0].group&&pl(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Gt}.pmtiles`,$$slots:{default:[km]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0].group,X(()=>n=!1)),e.$set(_),u[0].group?a?(a.p(u,c),c&1&&g(a,1)):(a=pl(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const m={};c&2049&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Gt="education";function Sm(r){return{group:!0,school:r.includes("school"),college:r.includes("college"),university:r.includes("university")}}function Cm(r,e,n){let t,l=["school","college","university"],o={group:!1,school:!0,college:!0,university:!0};function s(m){return m.group?l.filter(y=>m[y]).join(","):null}let f=on(Gt,o,s,Sm);re(r,f,m=>n(0,t=m));function i(m){let y=l.filter(C=>m[C]);return["in",["get","type"],["literal",y]]}function a(m){r.$$.not_equal(t.group,m)&&(t.group=m,f.set(t))}function u(m){r.$$.not_equal(t.school,m)&&(t.school=m,f.set(t))}function c(m){r.$$.not_equal(t.college,m)&&(t.college=m,f.set(t))}function _(m){r.$$.not_equal(t.university,m)&&(t.university=m,f.set(t))}return[t,f,i,a,u,c,_]}class Tm extends Y{constructor(e){super(),K(this,e,Cm,ym,J,{})}}function Om(r){let e,n,t,l;return e=new Fe({props:{color:r[4]}}),{c(){b(e.$$.fragment),n=O(),t=k(r[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),l=!0},p(o,s){(!l||s&4)&&z(t,o[2])},i(o){l||(g(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function Lm(r){let e;const n=r[6].default,t=vt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&wt(t,n,l,l[8],e?yt(n,l[8],o,null):kt(l[8]),null)},i(l){e||(g(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Am(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Lm]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Pm(r){let e,n=(r[9].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&514&&n!==(n=(l[9].name??`Unnamed ${l[1]}`)+"")&&z(t,n)},d(l){l&&p(e)}}}function Im(r){let e,n;return e=new ue({props:{$$slots:{default:[Pm,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&770&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Nm(r){let e,n;const t=[H(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Q(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Im]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ue({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&25?ne(t,[s&1&&fe(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Q(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&258&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Mm(r){let e,n,t,l,o;function s(i){r[7](i)}let f={$$slots:{right:[Am],default:[Om]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.checked=r[3]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),l=new ye({props:{url:`pmtiles://${be()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Nm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&260&&(u.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,u.checked=i[3],X(()=>n=!1)),e.$set(u);const c={};a&1&&(c.url=`pmtiles://${be()}/v1/${i[0]}.pmtiles`),a&267&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function Fm(r,e,n){let t,{$$slots:l={},$$scope:o}=e,{name:s}=e,{singularNoun:f}=e,{pluralNoun:i}=e,a=Z[s],u=Pe(s);re(r,u,_=>n(3,t=_));function c(_){t=_,u.set(t)}return r.$$set=_=>{"name"in _&&n(0,s=_.name),"singularNoun"in _&&n(1,f=_.singularNoun),"pluralNoun"in _&&n(2,i=_.pluralNoun),"$$scope"in _&&n(8,o=_.$$scope)},[s,f,i,t,a,u,l,c,o]}class So extends Y{constructor(e){super(),K(this,e,Fm,Mm,J,{name:0,singularNoun:1,pluralNoun:2})}}function Em(r){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Dm(r){let e,n,t,l,o,s,f;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Em]},$$scope:{ctx:r}}}),s=new st({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function jm(r){let e,n;return e=new So({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Dm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Rm extends Y{constructor(e){super(),K(this,e,null,jm,J,{})}}function zm(r){let e,n,t;return{c(){e=T("img"),t=k(`
  Railway Stations`),un(e.src,n=Io)||U(e,"src",n),U(e,"alt","A logo representing a train")},m(l,o){$(l,e,o),$(l,t,o)},p:te,d(l){l&&(p(e),p(t))}}}function Bm(r){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qm(r){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hm(r){let e,n,t,l,o,s,f,i,a,u,c,_;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Bm]},$$scope:{ctx:r}}}),i=new ee({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[qm]},$$scope:{ctx:r}}}),c=new st({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),s=T("p"),f=k("Icon from "),b(i.$$.fragment),a=k(". (Note that not all stations shown are National Rail.)"),u=O(),b(c.$$.fragment)},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,l),$(m,o,y),$(m,s,y),h(s,f),v(i,s,null),h(s,a),$(m,u,y),v(c,m,y),_=!0},p(m,y){const C={};y&16&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&16&&(S.$$scope={dirty:y,ctx:m}),i.$set(S)},i(m){_||(g(t.$$.fragment,m),g(i.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(i.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(u)),w(t),w(i),w(c,m)}}}function Um(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Hm]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Gm(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&z(t,n)},d(l){l&&p(e)}}}function Wm(r){let e,n;return e=new ue({props:{$$slots:{default:[Gm,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Vm(r){let e,n;const t=[H(mn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Wm]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new gn({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&fe(H(mn)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Xm(r){let e,n,t,l,o;function s(i){r[2](i)}let f={$$slots:{right:[Um],default:[zm]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),l=new Ct({props:{data:`${be()}/v1/${mn}.geojson`,$$slots:{default:[Vm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let mn="railway_stations";function Jm(r,e,n){let t,l=Pe(mn);re(r,l,s=>n(0,t=s));function o(s){t=s,l.set(t)}return[t,l,o]}class Ym extends Y{constructor(e){super(),K(this,e,Jm,Xm,J,{})}}function Km(r){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zm(r){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qm(r){let e,n,t,l,o,s,f,i,a;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Km]},$$scope:{ctx:r}}}),o=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Zm]},$$scope:{ctx:r}}}),i=new st({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:u}),t.$set(_);const m={};c&1&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function xm(r){let e,n;return e=new So({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Qm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class e_ extends Y{constructor(e){super(),K(this,e,null,xm,J,{})}}function t_(r){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function n_(r){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function r_(r){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function l_(r){let e,n,t,l,o,s,f,i,a,u,c,_,m,y,C,S,I,D,P,A,L,M,E;return t=new ee({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[n_]},$$scope:{ctx:r}}}),I=new ee({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[r_]},$$scope:{ctx:r}}}),M=new Re({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),l=k(" dataset. Please note these limitations:"),o=O(),s=T("ul"),f=T("li"),f.textContent="Only collisions between 2017 and 2022 are included",i=O(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,u=O(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,_=O(),m=T("li"),m.textContent='The "pedestrians" category also include mobility scooters',y=O(),C=T("li"),S=k("All limitations "),b(I.$$.fragment),D=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),P=O(),A=T("p"),A.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=O(),b(M.$$.fragment)},m(N,R){$(N,e,R),h(e,n),v(t,e,null),h(e,l),$(N,o,R),$(N,s,R),h(s,f),h(s,i),h(s,a),h(s,u),h(s,c),h(s,_),h(s,m),h(s,y),h(s,C),h(C,S),v(I,C,null),h(C,D),$(N,P,R),$(N,A,R),$(N,L,R),v(M,N,R),E=!0},p(N,R){const G={};R&16777216&&(G.$$scope={dirty:R,ctx:N}),t.$set(G);const q={};R&16777216&&(q.$$scope={dirty:R,ctx:N}),I.$set(q)},i(N){E||(g(t.$$.fragment,N),g(I.$$.fragment,N),g(M.$$.fragment,N),E=!0)},o(N){d(t.$$.fragment,N),d(I.$$.fragment,N),d(M.$$.fragment,N),E=!1},d(N){N&&(p(e),p(o),p(s),p(P),p(A),p(L)),w(t),w(I),w(M,N)}}}function o_(r){let e,n,t;return n=new _e({props:{$$slots:{default:[l_]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function ml(r){let e,n,t,l,o,s,f,i,a,u,c,_,m;return n=new ot({props:{small:!0,$$slots:{default:[u_]},$$scope:{ctx:r}}}),u=new qn({props:{rows:r[14]}}),{c(){e=T("div"),b(n.$$.fragment),t=O(),l=T("div"),o=k(`Filter years:
      `),s=T("input"),f=k(`
      -
      `),i=T("input"),a=O(),b(u.$$.fragment),U(s,"type","number"),U(s,"min",2017),U(s,"max",2022),U(s,"class","svelte-1ft65rw"),U(i,"type","number"),U(i,"min",2017),U(i,"max",2022),U(i,"class","svelte-1ft65rw"),Te(e,"border","1px solid black"),Te(e,"padding","8px")},m(y,C){$(y,e,C),v(n,e,null),h(e,t),h(e,l),h(l,o),h(l,s),tt(s,r[4]),h(l,f),h(l,i),tt(i,r[5]),h(e,a),v(u,e,null),c=!0,_||(m=[rt(s,"input",r[20]),rt(i,"input",r[21])],_=!0)},p(y,C){const S={};C&16777231&&(S.$$scope={dirty:C,ctx:y}),n.$set(S),C&16&&en(s.value)!==y[4]&&tt(s,y[4]),C&32&&en(i.value)!==y[5]&&tt(i,y[5])},i(y){c||(g(n.$$.fragment,y),g(u.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(u.$$.fragment,y),c=!1},d(y){y&&p(e),w(n),w(u),_=!1,to(m)}}}function s_(r){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function i_(r){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function a_(r){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function f_(r){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function u_(r){let e,n,t,l,o,s,f,i,a,u,c,_;function m(L){r[16](L)}let y={$$slots:{default:[s_]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new oe({props:y}),W.push(()=>V(e,"checked",m));function C(L){r[17](L)}let S={$$slots:{default:[i_]},$$scope:{ctx:r}};r[1]!==void 0&&(S.checked=r[1]),l=new oe({props:S}),W.push(()=>V(l,"checked",C));function I(L){r[18](L)}let D={$$slots:{default:[a_]},$$scope:{ctx:r}};r[2]!==void 0&&(D.checked=r[2]),f=new oe({props:D}),W.push(()=>V(f,"checked",I));function P(L){r[19](L)}let A={$$slots:{default:[f_]},$$scope:{ctx:r}};return r[3]!==void 0&&(A.checked=r[3]),u=new oe({props:A}),W.push(()=>V(u,"checked",P)),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment),s=O(),b(f.$$.fragment),a=O(),b(u.$$.fragment)},m(L,M){v(e,L,M),$(L,t,M),v(l,L,M),$(L,s,M),v(f,L,M),$(L,a,M),v(u,L,M),_=!0},p(L,M){const E={};M&16777216&&(E.$$scope={dirty:M,ctx:L}),!n&&M&1&&(n=!0,E.checked=L[0],X(()=>n=!1)),e.$set(E);const N={};M&16777216&&(N.$$scope={dirty:M,ctx:L}),!o&&M&2&&(o=!0,N.checked=L[1],X(()=>o=!1)),l.$set(N);const R={};M&16777216&&(R.$$scope={dirty:M,ctx:L}),!i&&M&4&&(i=!0,R.checked=L[2],X(()=>i=!1)),f.$set(R);const G={};M&16777216&&(G.$$scope={dirty:M,ctx:L}),!c&&M&8&&(c=!0,G.checked=L[3],X(()=>c=!1)),u.$set(G)},i(L){_||(g(e.$$.fragment,L),g(l.$$.fragment,L),g(f.$$.fragment,L),g(u.$$.fragment,L),_=!0)},o(L){d(e.$$.fragment,L),d(l.$$.fragment,L),d(f.$$.fragment,L),d(u.$$.fragment,L),_=!1},d(L){L&&(p(t),p(s),p(a)),w(e,L),w(l,L),w(f,L),w(u,L)}}}function _l(r){let e,n,t,l=r[8][r[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8388608&&l!==(l=s[8][s[23].pedestrian_location]+"")&&z(o,l)},d(s){s&&p(e)}}}function gl(r){let e,n,t,l=r[9][r[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8388608&&l!==(l=s[9][s[23].pedestrian_movement]+"")&&z(o,l)},d(s){s&&p(e)}}}function c_(r){let e,n,t,l=r[23].year+"",o,s,f,i,a,u=r[10][r[23].severity]+"",c,_,m,y,C,S=dl(r[23])+"",I,D,P,A,L,M=r[23].pedestrian_location&&_l(r),E=r[23].pedestrian_movement&&gl(r);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(l),s=O(),f=T("p"),i=k("Severity: "),a=T("b"),c=k(u),_=O(),m=T("p"),y=k("Casualties: "),C=T("b"),I=k(S),D=O(),M&&M.c(),P=O(),E&&E.c(),A=O(),L=T("p"),L.textContent="Click to open full report in CycleStreets"},m(N,R){$(N,e,R),h(e,n),h(e,t),h(t,o),$(N,s,R),$(N,f,R),h(f,i),h(f,a),h(a,c),$(N,_,R),$(N,m,R),h(m,y),h(m,C),h(C,I),$(N,D,R),M&&M.m(N,R),$(N,P,R),E&&E.m(N,R),$(N,A,R),$(N,L,R)},p(N,R){R&8388608&&l!==(l=N[23].year+"")&&z(o,l),R&8388608&&u!==(u=N[10][N[23].severity]+"")&&z(c,u),R&8388608&&S!==(S=dl(N[23])+"")&&z(I,S),N[23].pedestrian_location?M?M.p(N,R):(M=_l(N),M.c(),M.m(P.parentNode,P)):M&&(M.d(1),M=null),N[23].pedestrian_movement?E?E.p(N,R):(E=gl(N),E.c(),E.m(A.parentNode,A)):E&&(E.d(1),E=null)},d(N){N&&(p(e),p(s),p(f),p(_),p(m),p(D),p(P),p(A),p(L)),M&&M.d(N),E&&E.d(N)}}}function $_(r){let e,n;return e=new ue({props:{$$slots:{default:[c_,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&25165824&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function p_(r){let e,n;const t=[H(Qt),{sourceLayer:Qt},{paint:{"circle-color":Ae(["get","severity"],[1,2,3],[r[11],r[12],r[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[7]},{layout:{visibility:r[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[$_]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new _t({props:l}),e.$on("click",__),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&14528?ne(t,[s&0&&fe(H(Qt)),s&0&&{sourceLayer:Qt},s&14336&&{paint:{"circle-color":Ae(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function m_(r){let e,n,t,l,o,s;function f(u){r[15](u)}let i={$$slots:{right:[o_],default:[t_]},$$scope:{ctx:r}};r[6]!==void 0&&(i.checked=r[6]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=r[6]&&ml(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Qt}.pmtiles`,$$slots:{default:[p_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&16777216&&(_.$$scope={dirty:c,ctx:u}),!n&&c&64&&(n=!0,_.checked=u[6],X(()=>n=!1)),e.$set(_),u[6]?a?(a.p(u,c),c&64&&g(a,1)):(a=ml(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const m={};c&16777408&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Qt="stats19";function dl(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function __(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function g_(r,e,n){let t,l=!1,o=!0,s=!0,f=!0,i=!1,a=2017,u=2022;function c(G,q,j,F,B,se){let ie=["any"];return o&&ie.push(["get","pedestrian"]),s&&ie.push(["get","cyclist"]),f&&ie.push(["get","horse_rider"]),i&&ie.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],u],ie]}let _={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},m={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},C=Z.sequential_low_to_high[4],S=Z.sequential_low_to_high[2],I=Z.sequential_low_to_high[0],D=[["Fatal",C],["Serious",S],["Slight",I]];function P(G){l=G,n(6,l)}function A(G){o=G,n(0,o)}function L(G){s=G,n(1,s)}function M(G){f=G,n(2,f)}function E(G){i=G,n(3,i)}function N(){a=en(this.value),n(4,a)}function R(){u=en(this.value),n(5,u)}return r.$$.update=()=>{r.$$.dirty&63&&n(7,t=c())},[o,s,f,i,a,u,l,t,_,m,y,C,S,I,D,P,A,L,M,E,N,R]}class d_ extends Y{constructor(e){super(),K(this,e,g_,m_,J,{})}}function h_(r){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function b_(r){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function v_(r){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function w_(r){let e,n,t,l,o,s,f,i,a,u,c;return t=new ee({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[b_]},$$scope:{ctx:r}}}),o=new ee({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[v_]},$$scope:{ctx:r}}}),u=new Re({}),{c(){e=T("p"),n=k("AADF (annual average daily flow) data from "),b(t.$$.fragment),l=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),f=O(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=O(),b(u.$$.fragment)},m(_,m){$(_,e,m),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(_,f,m),$(_,i,m),$(_,a,m),v(u,_,m),c=!0},p(_,m){const y={};m&128&&(y.$$scope={dirty:m,ctx:_}),t.$set(y);const C={};m&128&&(C.$$scope={dirty:m,ctx:_}),o.$set(C)},i(_){c||(g(t.$$.fragment,_),g(o.$$.fragment,_),g(u.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(u.$$.fragment,_),c=!1},d(_){_&&(p(e),p(f),p(i),p(a)),w(t),w(o),w(u,_)}}}function k_(r){let e,n,t;return n=new _e({props:{$$slots:{default:[w_]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function hl(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[3]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function y_(r){let e,n=r[6].location+"",t,l,o,s,f=r[6].year+"",i,a,u,c=r[6].motor_vehicles.toLocaleString()+"",_,m,y,C,S=r[6].year+"",I,D,P,A=r[6].pedal_cycles.toLocaleString()+"",L,M,E,N,R,G=r[6].method+"",q;return{c(){e=T("h2"),t=k(n),l=O(),o=T("p"),s=k("Total motor vehicles ("),i=k(f),a=k(` AADF):
        `),u=T("b"),_=k(c),m=O(),y=T("p"),C=k("Total pedal cycles ("),I=k(S),D=k(` AADF):
        `),P=T("b"),L=k(A),M=O(),E=T("p"),N=k("Count method: "),R=T("b"),q=k(G)},m(j,F){$(j,e,F),h(e,t),$(j,l,F),$(j,o,F),h(o,s),h(o,i),h(o,a),h(o,u),h(u,_),$(j,m,F),$(j,y,F),h(y,C),h(y,I),h(y,D),h(y,P),h(P,L),$(j,M,F),$(j,E,F),h(E,N),h(E,R),h(R,q)},p(j,F){F&64&&n!==(n=j[6].location+"")&&z(t,n),F&64&&f!==(f=j[6].year+"")&&z(i,f),F&64&&c!==(c=j[6].motor_vehicles.toLocaleString()+"")&&z(_,c),F&64&&S!==(S=j[6].year+"")&&z(I,S),F&64&&A!==(A=j[6].pedal_cycles.toLocaleString()+"")&&z(L,A),F&64&&G!==(G=j[6].method+"")&&z(q,G)},d(j){j&&(p(e),p(l),p(o),p(m),p(y),p(M),p(E))}}}function S_(r){let e,n;return e=new ue({props:{$$slots:{default:[y_,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&192&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function C_(r){let e,n;const t=[H(Wt),{sourceLayer:Wt},{paint:{"circle-color":Ae(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[S_]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new _t({props:l}),e.$on("click",O_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&fe(H(Wt)),s&0&&{sourceLayer:Wt},s&6&&{paint:{"circle-color":Ae(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function T_(r){let e,n,t,l,o,s;function f(u){r[5](u)}let i={$$slots:{right:[k_],default:[h_]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&hl(r);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Wt}.pmtiles`,$$slots:{default:[C_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),l=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const _={};c&128&&(_.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,_.checked=u[0],X(()=>n=!1)),e.$set(_),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=hl(u),a.c(),g(a,1),a.m(l.parentNode,l)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const m={};c&129&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Wt="vehicle_counts";function O_(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function L_(r,e,n){let t,l=Z.sequential_low_to_high,o=[0,4e4,8e4,12e4,16e4,205e3],s=["","40k","80k","120k","160k",""],f=Pe(Wt);re(r,f,a=>n(0,t=a));function i(a){t=a,f.set(t)}return[t,l,o,s,f,i]}class A_ extends Y{constructor(e){super(),K(this,e,L_,T_,J,{})}}function P_(r){let e,n,t,l,o,s,f,i;return e=new Tm({}),t=new Rm({}),o=new e_({}),f=new Ym({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),$(a,l,u),v(o,a,u),$(a,s,u),v(f,a,u),i=!0},i(a){i||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(p(n),p(l),p(s)),w(e,a),w(t,a),w(o,a),w(f,a)}}}function I_(r){let e,n;return e=new ot({props:{small:!0,$$slots:{default:[P_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function N_(r){let e,n,t,l,o,s,f,i,a,u,c,_;return e=new Nc({}),t=new a$({}),o=new Hc({}),f=new Qc({}),a=new $m({}),c=new Wp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment),u=O(),b(c.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,l,y),v(o,m,y),$(m,s,y),v(f,m,y),$(m,i,y),v(a,m,y),$(m,u,y),v(c,m,y),_=!0},i(m){_||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),g(f.$$.fragment,m),g(a.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),d(a.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(n),p(l),p(s),p(i),p(u)),w(e,m),w(t,m),w(o,m),w(f,m),w(a,m),w(c,m)}}}function M_(r){let e,n;return e=new ot({props:{small:!0,$$slots:{default:[N_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function F_(r){let e,n,t,l,o,s;return e=new hc({}),t=new mp({}),o=new Sp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment)},m(f,i){v(e,f,i),$(f,n,i),v(t,f,i),$(f,l,i),v(o,f,i),s=!0},i(f){s||(g(e.$$.fragment,f),g(t.$$.fragment,f),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l)),w(e,f),w(t,f),w(o,f)}}}function E_(r){let e,n,t,l,o,s,f,i,a,u;return e=new Ou({}),t=new lc({}),o=new Ff({}),f=new nu({}),a=new gu({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment)},m(c,_){v(e,c,_),$(c,n,_),v(t,c,_),$(c,l,_),v(o,c,_),$(c,s,_),v(f,c,_),$(c,i,_),v(a,c,_),u=!0},i(c){u||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(f.$$.fragment,c),d(a.$$.fragment,c),u=!1},d(c){c&&(p(n),p(l),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(f,c),w(a,c)}}}function D_(r){let e,n;return e=new ot({props:{small:!0,$$slots:{default:[E_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function j_(r){let e,n,t,l;return e=new yf({}),t=new Wf({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function R_(r){let e,n;return e=new ot({props:{small:!0,$$slots:{default:[j_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function z_(r){let e,n,t,l,o,s;return e=new sp({}),t=new w$({}),o=new K$({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment)},m(f,i){v(e,f,i),$(f,n,i),v(t,f,i),$(f,l,i),v(o,f,i),s=!0},i(f){s||(g(e.$$.fragment,f),g(t.$$.fragment,f),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l)),w(e,f),w(t,f),w(o,f)}}}function B_(r){let e,n,t,l,o,s,f,i,a=An()=="Private (development)",u,c,_,m,y;e=new A_({}),t=new d_({}),o=new j$({}),f=new tm({});let C=a&&z_();return c=new ju({}),m=new Xu({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),C&&C.c(),u=O(),b(c.$$.fragment),_=O(),b(m.$$.fragment)},m(S,I){v(e,S,I),$(S,n,I),v(t,S,I),$(S,l,I),v(o,S,I),$(S,s,I),v(f,S,I),$(S,i,I),C&&C.m(S,I),$(S,u,I),v(c,S,I),$(S,_,I),v(m,S,I),y=!0},p:te,i(S){y||(g(e.$$.fragment,S),g(t.$$.fragment,S),g(o.$$.fragment,S),g(f.$$.fragment,S),g(C),g(c.$$.fragment,S),g(m.$$.fragment,S),y=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(o.$$.fragment,S),d(f.$$.fragment,S),d(C),d(c.$$.fragment,S),d(m.$$.fragment,S),y=!1},d(S){S&&(p(n),p(l),p(s),p(i),p(u),p(_)),w(e,S),w(t,S),w(o,S),w(f,S),C&&C.d(S),w(c,S),w(m,S)}}}function q_(r){let e,n;return e=new ot({props:{small:!0,$$slots:{default:[B_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function H_(r){let e,n,t,l,o;function s(i){r[3](i)}let f={};return r[0]!==void 0&&(f.enabled=r[0]),e=new Go({props:f}),W.push(()=>V(e,"enabled",s)),l=new Ss({}),{c(){b(e.$$.fragment),t=O(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,a){const u={};!n&&a&1&&(n=!0,u.enabled=i[0],X(()=>n=!1)),e.$set(u)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function U_(r){let e,n,t,l,o,s,f,i,a,u,c,_,m,y,C,S,I,D;return e=new Fp({}),t=new ze({props:{label:"Trip generators",$$slots:{default:[I_]},$$scope:{ctx:r}}}),o=new ze({props:{label:"Existing infrastructure",$$slots:{default:[M_]},$$scope:{ctx:r}}}),f=new ze({props:{label:"Public transit",$$slots:{default:[F_]},$$scope:{ctx:r}}}),a=new ze({props:{label:"Boundaries",$$slots:{default:[D_]},$$scope:{ctx:r}}}),c=new ze({props:{label:"Census",$$slots:{default:[R_]},$$scope:{ctx:r}}}),m=new ze({props:{label:"Other",$$slots:{default:[q_]},$$scope:{ctx:r}}}),C=new ze({props:{label:"Tools",$$slots:{default:[H_]},$$scope:{ctx:r}}}),I=new Uo({props:{disabled:!r[1]}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment),u=O(),b(c.$$.fragment),_=O(),b(m.$$.fragment),y=O(),b(C.$$.fragment),S=O(),b(I.$$.fragment)},m(P,A){v(e,P,A),$(P,n,A),v(t,P,A),$(P,l,A),v(o,P,A),$(P,s,A),v(f,P,A),$(P,i,A),v(a,P,A),$(P,u,A),v(c,P,A),$(P,_,A),v(m,P,A),$(P,y,A),v(C,P,A),$(P,S,A),v(I,P,A),D=!0},p(P,A){const L={};A&16&&(L.$$scope={dirty:A,ctx:P}),t.$set(L);const M={};A&16&&(M.$$scope={dirty:A,ctx:P}),o.$set(M);const E={};A&16&&(E.$$scope={dirty:A,ctx:P}),f.$set(E);const N={};A&16&&(N.$$scope={dirty:A,ctx:P}),a.$set(N);const R={};A&16&&(R.$$scope={dirty:A,ctx:P}),c.$set(R);const G={};A&16&&(G.$$scope={dirty:A,ctx:P}),m.$set(G);const q={};A&17&&(q.$$scope={dirty:A,ctx:P}),C.$set(q);const j={};A&2&&(j.disabled=!P[1]),I.$set(j)},i(P){D||(g(e.$$.fragment,P),g(t.$$.fragment,P),g(o.$$.fragment,P),g(f.$$.fragment,P),g(a.$$.fragment,P),g(c.$$.fragment,P),g(m.$$.fragment,P),g(C.$$.fragment,P),g(I.$$.fragment,P),D=!0)},o(P){d(e.$$.fragment,P),d(t.$$.fragment,P),d(o.$$.fragment,P),d(f.$$.fragment,P),d(a.$$.fragment,P),d(c.$$.fragment,P),d(m.$$.fragment,P),d(C.$$.fragment,P),d(I.$$.fragment,P),D=!1},d(P){P&&(p(n),p(l),p(s),p(i),p(u),p(_),p(y),p(S)),w(e,P),w(t,P),w(o,P),w(f,P),w(a,P),w(c,P),w(m,P),w(C,P),w(I,P)}}}function G_(r){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ue({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&2?ne(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function W_(r){let e,n,t,l;return e=new ze({props:{label:"Layers",open:!0,$$slots:{default:[U_]},$$scope:{ctx:r}}}),t=new Ct({props:{data:r[2],$$slots:{default:[G_]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&19&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function V_(r,e,n){let t,l;re(r,Ar,f=>n(1,l=f));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(f){t=f,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&Ar.set(!t)},[t,l,o,s]}class X_ extends Y{constructor(e){super(),K(this,e,V_,W_,J,{})}}function bl(r){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function J_(r){let e,n=r[0]&&bl();return{c(){n&&n.c(),e=Me()},m(t,l){n&&n.m(t,l),$(t,e,l)},p(t,[l]){t[0]?n||(n=bl(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:te,o:te,d(t){t&&p(e),n&&n.d(t)}}}function Y_(r,e,n){let{loadFile:t}=e,l=!0;return Bn(async()=>{let s=await(await fetch(`${_n()}/v1/all_schemes_output.geojson.gz`)).text();t(s),n(0,l=!1)}),r.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[l,t]}class K_ extends Y{constructor(e){super(),K(this,e,Y_,J_,J,{loadFile:1})}}function vl(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=T("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),h(e,n),h(e,l)},p(s,f){var i;f&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&z(l,t)},d(s){s&&p(e)}}}function Z_(r){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Q_(r){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function x_(r){let e,n,t,l;return e=new pt({props:{$$slots:{default:[Z_]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new pt({props:{$$slots:{default:[Q_]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function eg(r){var R,G,q,j;let e,n,t=r[0].scheme_reference+"",l,o,s,f,i=((R=r[0].browse)==null?void 0:R.authority_or_region)+"",a,u,c,_,m=((G=r[0].browse)==null?void 0:G.capital_scheme_id)+"",y,C,S,I,D=((q=r[0].browse)==null?void 0:q.funding_programme)+"",P,A,L,M,E,N=((j=r[0].browse)==null?void 0:j.current_milestone)&&vl(r);return M=new Wo({props:{$$slots:{default:[x_]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("Scheme reference: "),l=k(t),o=O(),s=T("p"),f=k("Authority or region: "),a=k(i),u=O(),c=T("p"),_=k("Capital scheme ID: "),y=k(m),C=O(),S=T("p"),I=k("Funding programme: "),P=k(D),A=O(),N&&N.c(),L=O(),b(M.$$.fragment)},m(F,B){$(F,e,B),h(e,n),h(e,l),$(F,o,B),$(F,s,B),h(s,f),h(s,a),$(F,u,B),$(F,c,B),h(c,_),h(c,y),$(F,C,B),$(F,S,B),h(S,I),h(S,P),$(F,A,B),N&&N.m(F,B),$(F,L,B),v(M,F,B),E=!0},p(F,B){var ie,Se,he,Ce;(!E||B&1)&&t!==(t=F[0].scheme_reference+"")&&z(l,t),(!E||B&1)&&i!==(i=((ie=F[0].browse)==null?void 0:ie.authority_or_region)+"")&&z(a,i),(!E||B&1)&&m!==(m=((Se=F[0].browse)==null?void 0:Se.capital_scheme_id)+"")&&z(y,m),(!E||B&1)&&D!==(D=((he=F[0].browse)==null?void 0:he.funding_programme)+"")&&z(P,D),(Ce=F[0].browse)!=null&&Ce.current_milestone?N?N.p(F,B):(N=vl(F),N.c(),N.m(L.parentNode,L)):N&&(N.d(1),N=null);const se={};B&32&&(se.$$scope={dirty:B,ctx:F}),M.$set(se)},i(F){E||(g(M.$$.fragment,F),E=!0)},o(F){d(M.$$.fragment,F),E=!1},d(F){F&&(p(e),p(o),p(s),p(u),p(c),p(C),p(S),p(A),p(L)),N&&N.d(F),w(M,F)}}}function tg(r){let e,n;return e=new ze({props:{label:`${r[0].scheme_name}`,$$slots:{default:[eg]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_name}`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ng(r,e,n){let t,l;re(r,Vt,i=>n(3,t=i)),re(r,zn,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(No(i),{padding:20,animate:!1})}function f(){var u,c;let i={type:"FeatureCollection",features:t.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},a=((u=o.browse)==null?void 0:u.authority_or_region)||"unknown authority";Mo(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,f]}class rg extends Y{constructor(e){super(),K(this,e,ng,tg,J,{scheme:0})}}function wl(r){let e,n,t,l=r[0].status+"",o;return{c(){e=T("p"),n=k("Status: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[0].status+"")&&z(o,l)},d(s){s&&p(e)}}}function kl(r){let e,n,t,l=r[0].timescale+"",o;return{c(){e=T("p"),n=k("Timescale: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[0].timescale+"")&&z(o,l)},d(s){s&&p(e)}}}function yl(r){let e,n,t,l=r[0].timescale_year+"",o;return{c(){e=T("p"),n=k("Estimated completion year: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[0].timescale_year+"")&&z(o,l)},d(s){s&&p(e)}}}function Sl(r){let e,n,t,l=r[0].year_published+"",o;return{c(){e=T("p"),n=k("Scheme most recently published: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[0].year_published+"")&&z(o,l)},d(s){s&&p(e)}}}function Cl(r){let e,n,t,l=r[0].year_consulted+"",o;return{c(){e=T("p"),n=k("Scheme most recently consulted on: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[0].year_consulted+"")&&z(o,l)},d(s){s&&p(e)}}}function lg(r){let e,n,t,l,o,s=r[0].status&&wl(r),f=r[0].timescale&&kl(r),i=r[0].timescale_year&&yl(r),a=r[0].year_published&&Sl(r),u=r[0].year_consulted&&Cl(r);return{c(){s&&s.c(),e=O(),f&&f.c(),n=O(),i&&i.c(),t=O(),a&&a.c(),l=O(),u&&u.c(),o=Me()},m(c,_){s&&s.m(c,_),$(c,e,_),f&&f.m(c,_),$(c,n,_),i&&i.m(c,_),$(c,t,_),a&&a.m(c,_),$(c,l,_),u&&u.m(c,_),$(c,o,_)},p(c,[_]){c[0].status?s?s.p(c,_):(s=wl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,_):(f=kl(c),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,_):(i=yl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,_):(a=Sl(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,_):(u=Cl(c),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i:te,o:te,d(c){c&&(p(e),p(n),p(t),p(l),p(o)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function og(r,e,n){let{props:t}=e;return r.$$set=l=>{"props"in l&&n(0,t=l.props)},[t]}class Co extends Y{constructor(e){super(),K(this,e,og,lg,J,{props:0})}}function Tl(r){let e,n,t,l=r[0].budget.toLocaleString()+"",o,s;return{c(){e=T("p"),n=k("Cost: "),t=T("b"),o=k(l),s=k(`
    GBP`)},m(f,i){$(f,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(f,i){i&1&&l!==(l=f[0].budget.toLocaleString()+"")&&z(o,l)},d(f){f&&p(e)}}}function Ol(r){let e;return{c(){e=T("p"),e.textContent="Development is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ll(r){let e;return{c(){e=T("p"),e.textContent="Construction is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Al(r){let e,n,t,l;return{c(){e=T("p"),n=k("Funding sources: "),t=T("b"),l=k(r[1])},m(o,s){$(o,e,s),h(e,n),h(e,t),h(t,l)},p(o,s){s&2&&z(l,o[1])},d(o){o&&p(e)}}}function sg(r){let e,n,t,l,o=r[0].budget&&Tl(r),s=r[0].development_funded&&Ol(),f=r[0].construction_funded&&Ll(),i=r[1]&&Al(r);return{c(){o&&o.c(),e=O(),s&&s.c(),n=O(),f&&f.c(),t=O(),i&&i.c(),l=Me()},m(a,u){o&&o.m(a,u),$(a,e,u),s&&s.m(a,u),$(a,n,u),f&&f.m(a,u),$(a,t,u),i&&i.m(a,u),$(a,l,u)},p(a,[u]){a[0].budget?o?o.p(a,u):(o=Tl(a),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),a[0].development_funded?s||(s=Ol(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=Ll(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=Al(a),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},i:te,o:te,d(a){a&&(p(e),p(n),p(t),p(l)),o&&o.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function ig(r){if(!r.funding_sources)return"";let e=[];for(let n of["atf2","atf3","atf4","atf4e","crsts","luf"])r.funding_sources[n]&&e.push(n.toUpperCase());return r.funding_sources.other&&e.push(r.funding_sources.other),e.join(", ")}function ag(r,e,n){let t,{props:l}=e;return r.$$set=o=>{"props"in o&&n(0,l=o.props)},r.$$.update=()=>{r.$$.dirty&1&&n(1,t=ig(l))},[l,t]}class To extends Y{constructor(e){super(),K(this,e,ag,sg,J,{props:0})}}function Sn(r){const e=r.slice(),n=e[1].pipeline;return e[5]=n,e}function Cn(r){const e=r.slice(),n=e[0].pipeline;return e[5]=n,e}function Pl(r){let e,n,t,l=Kn(r[0].length_meters)+"",o;return{c(){e=T("p"),n=k("Length: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=Kn(s[0].length_meters)+"")&&z(o,l)},d(s){s&&p(e)}}}function Il(r){let e,n=ut(r[0].description,r[2])+"";return{c(){e=T("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&5&&n!==(n=ut(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Nl(r){let e,n,t,l,o,s,f,i=r[5].atf4_type&&Ml(r),a=r[5].accuracy&&Fl(r),u=r[5].is_alternative&&El();return l=new To({props:{props:r[5]}}),s=new Co({props:{props:r[5]}}),{c(){i&&i.c(),e=O(),a&&a.c(),n=O(),u&&u.c(),t=O(),b(l.$$.fragment),o=O(),b(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),u&&u.m(c,_),$(c,t,_),v(l,c,_),$(c,o,_),v(s,c,_),f=!0},p(c,_){c[5].atf4_type?i?i.p(c,_):(i=Ml(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].accuracy?a?a.p(c,_):(a=Fl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].is_alternative?u||(u=El(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const m={};_&1&&(m.props=c[5]),l.$set(m);const y={};_&1&&(y.props=c[5]),s.$set(y)},i(c){f||(g(l.$$.fragment,c),g(s.$$.fragment,c),f=!0)},o(c){d(l.$$.fragment,c),d(s.$$.fragment,c),f=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),u&&u.d(c),w(l,c),w(s,c)}}}function Ml(r){let e,n,t,l=r[5].atf4_type+"",o;return{c(){e=T("p"),n=k("ATF4 type: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[5].atf4_type+"")&&z(o,l)},d(s){s&&p(e)}}}function Fl(r){let e,n,t,l=r[5].accuracy+"",o;return{c(){e=T("p"),n=k("Accuracy: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&l!==(l=s[5].accuracy+"")&&z(o,l)},d(s){s&&p(e)}}}function El(r){let e;return{c(){e=T("p"),e.textContent="Represents an alternative route"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Dl(r){var s;let e,n,t,l=((s=r[1].browse)==null?void 0:s.capital_scheme_id)+"",o;return{c(){e=T("p"),n=k("Capital scheme ID: "),t=T("b"),o=k(l)},m(f,i){$(f,e,i),h(e,n),h(e,t),h(t,o)},p(f,i){var a;i&2&&l!==(l=((a=f[1].browse)==null?void 0:a.capital_scheme_id)+"")&&z(o,l)},d(f){f&&p(e)}}}function jl(r){var s;let e,n,t,l=((s=r[1].browse)==null?void 0:s.current_milestone)+"",o;return{c(){e=T("p"),n=k("Current milestone: "),t=T("b"),o=k(l)},m(f,i){$(f,e,i),h(e,n),h(e,t),h(t,o)},p(f,i){var a;i&2&&l!==(l=((a=f[1].browse)==null?void 0:a.current_milestone)+"")&&z(o,l)},d(f){f&&p(e)}}}function Rl(r){let e,n,t,l,o,s,f,i=r[5].scheme_type&&zl(r),a=r[5].atf4_lead_type&&Bl(r),u=r[5].scheme_description&&ql(r);return l=new To({props:{props:r[5]}}),s=new Co({props:{props:r[5]}}),{c(){i&&i.c(),e=O(),a&&a.c(),n=O(),u&&u.c(),t=O(),b(l.$$.fragment),o=O(),b(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),u&&u.m(c,_),$(c,t,_),v(l,c,_),$(c,o,_),v(s,c,_),f=!0},p(c,_){c[5].scheme_type?i?i.p(c,_):(i=zl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].atf4_lead_type?a?a.p(c,_):(a=Bl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].scheme_description?u?u.p(c,_):(u=ql(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const m={};_&2&&(m.props=c[5]),l.$set(m);const y={};_&2&&(y.props=c[5]),s.$set(y)},i(c){f||(g(l.$$.fragment,c),g(s.$$.fragment,c),f=!0)},o(c){d(l.$$.fragment,c),d(s.$$.fragment,c),f=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),u&&u.d(c),w(l,c),w(s,c)}}}function zl(r){let e,n,t,l=r[5].scheme_type+"",o;return{c(){e=T("p"),n=k("Scheme type: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&2&&l!==(l=s[5].scheme_type+"")&&z(o,l)},d(s){s&&p(e)}}}function Bl(r){let e,n,t,l=r[5].atf4_lead_type+"",o;return{c(){e=T("p"),n=k("ATF4 lead type: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&2&&l!==(l=s[5].atf4_lead_type+"")&&z(o,l)},d(s){s&&p(e)}}}function ql(r){let e,n,t=r[5].scheme_description+"",l;return{c(){e=T("p"),n=k("Descripton: "),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,l)},p(o,s){s&2&&t!==(t=o[5].scheme_description+"")&&z(l,t)},d(o){o&&p(e)}}}function fg(r){var Ie,Ee,Xt,Je;let e,n,t,l=ut(r[0].name,r[2])+"",o,s=r[0].intervention_type+"",f,i,a,u,c,_,m,y,C,S,I,D=ut(r[1].scheme_name??"",r[3])+"",P,A,L=ut(r[0].scheme_reference,r[3])+"",M,E,N,R,G,q=((Ie=r[1].browse)==null?void 0:Ie.authority_or_region)+"",j,F,B,se,ie,Se,he=((Ee=r[1].browse)==null?void 0:Ee.funding_programme)+"",Ce,ae,Ne,Oe,ve=r[0].length_meters&&Pl(r),le=r[0].description&&Il(r),me=r[0].pipeline&&Nl(Cn(r)),de=((Xt=r[1].browse)==null?void 0:Xt.capital_scheme_id)&&Dl(r),we=((Je=r[1].browse)==null?void 0:Je.current_milestone)&&jl(r),ge=r[1].pipeline&&Rl(Sn(r));return{c(){e=T("div"),n=T("h2"),t=new bt(!1),o=k(" ("),f=k(s),i=k(")"),a=O(),ve&&ve.c(),u=O(),le&&le.c(),c=O(),me&&me.c(),_=O(),m=T("hr"),y=O(),C=T("p"),S=k("Part of scheme: "),I=new bt(!1),P=k(" ("),A=new bt(!1),M=k(")"),E=O(),N=T("p"),R=k("Authority or region: "),G=T("b"),j=k(q),F=O(),de&&de.c(),B=O(),se=T("p"),ie=k("Funding programme: "),Se=T("b"),Ce=k(he),ae=O(),we&&we.c(),Ne=O(),ge&&ge.c(),t.a=o,I.a=P,A.a=M,Te(e,"max-width","30vw"),Te(e,"max-height","60vh"),Te(e,"overflow","auto")},m(ce,De){$(ce,e,De),h(e,n),t.m(l,n),h(n,o),h(n,f),h(n,i),h(e,a),ve&&ve.m(e,null),h(e,u),le&&le.m(e,null),h(e,c),me&&me.m(e,null),h(e,_),h(e,m),h(e,y),h(e,C),h(C,S),I.m(D,C),h(C,P),A.m(L,C),h(C,M),h(e,E),h(e,N),h(N,R),h(N,G),h(G,j),h(e,F),de&&de.m(e,null),h(e,B),h(e,se),h(se,ie),h(se,Se),h(Se,Ce),h(e,ae),we&&we.m(e,null),h(e,Ne),ge&&ge.m(e,null),Oe=!0},p(ce,[De]){var Gn,Wn,Vn,Xn;(!Oe||De&5)&&l!==(l=ut(ce[0].name,ce[2])+"")&&t.p(l),(!Oe||De&1)&&s!==(s=ce[0].intervention_type+"")&&z(f,s),ce[0].length_meters?ve?ve.p(ce,De):(ve=Pl(ce),ve.c(),ve.m(e,u)):ve&&(ve.d(1),ve=null),ce[0].description?le?le.p(ce,De):(le=Il(ce),le.c(),le.m(e,c)):le&&(le.d(1),le=null),ce[0].pipeline?me?(me.p(Cn(ce),De),De&1&&g(me,1)):(me=Nl(Cn(ce)),me.c(),g(me,1),me.m(e,_)):me&&($e(),d(me,1,1,()=>{me=null}),pe()),(!Oe||De&10)&&D!==(D=ut(ce[1].scheme_name??"",ce[3])+"")&&I.p(D),(!Oe||De&9)&&L!==(L=ut(ce[0].scheme_reference,ce[3])+"")&&A.p(L),(!Oe||De&2)&&q!==(q=((Gn=ce[1].browse)==null?void 0:Gn.authority_or_region)+"")&&z(j,q),(Wn=ce[1].browse)!=null&&Wn.capital_scheme_id?de?de.p(ce,De):(de=Dl(ce),de.c(),de.m(e,B)):de&&(de.d(1),de=null),(!Oe||De&2)&&he!==(he=((Vn=ce[1].browse)==null?void 0:Vn.funding_programme)+"")&&z(Ce,he),(Xn=ce[1].browse)!=null&&Xn.current_milestone?we?we.p(ce,De):(we=jl(ce),we.c(),we.m(e,Ne)):we&&(we.d(1),we=null),ce[1].pipeline?ge?(ge.p(Sn(ce),De),De&2&&g(ge,1)):(ge=Rl(Sn(ce)),ge.c(),g(ge,1),ge.m(e,null)):ge&&($e(),d(ge,1,1,()=>{ge=null}),pe())},i(ce){Oe||(g(me),g(ge),Oe=!0)},o(ce){d(me),d(ge),Oe=!1},d(ce){ce&&p(e),ve&&ve.d(),le&&le.d(),me&&me.d(),de&&de.d(),we&&we.d(),ge&&ge.d()}}}function ut(r,e){return e?r.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):r}function ug(r,e,n){let t,l,o,s;re(r,$n,i=>n(4,l=i)),re(r,Yt,i=>n(2,o=i)),re(r,Kt,i=>n(3,s=i));let{props:f}=e;return r.$$set=i=>{"props"in i&&n(0,f=i.props)},r.$$.update=()=>{r.$$.dirty&17&&n(1,t=l.get(f.scheme_reference))},[f,t,o,s,l]}class Un extends Y{constructor(e){super(),K(this,e,ug,fg,J,{props:0})}}function cg(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&z(t,n)},d(l){l&&p(e)}}}function $g(r){let e,n;return e=new Un({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pg(r){let e,n,t,l;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[cg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[$g,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function mg(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&z(t,n)},d(l){l&&p(e)}}}function _g(r){let e,n;return e=new Un({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gg(r){let e,n,t,l;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[mg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[_g,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function dg(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&z(t,n)},d(l){l&&p(e)}}}function hg(r){let e,n;return e=new Un({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function bg(r){let e,n,t,l;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[dg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[hg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function vg(r){let e,n,t,l,o,s,f,i,a,u;const c=[H("interventions-points"),{filter:["all",Zn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":er,"circle-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let _={$$slots:{default:[pg]},$$scope:{ctx:r}};for(let L=0;L<c.length;L+=1)_=x(_,c[L]);e=new _t({props:_});const m=[H("interventions-lines"),{filter:["all",Qn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Jt,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[gg]},$$scope:{ctx:r}};for(let L=0;L<m.length;L+=1)y=x(y,m[L]);t=new Le({props:y});const C=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Jt,"circle-opacity":0,"circle-stroke-color":nt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let S={};for(let L=0;L<C.length;L+=1)S=x(S,C[L]);o=new _t({props:S});const I=[H("interventions-polygons"),{filter:["all",sn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":Q(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[bg]},$$scope:{ctx:r}};for(let L=0;L<I.length;L+=1)D=x(D,I[L]);f=new Ue({props:D});const P=[H("interventions-polygons-outlines"),{filter:["all",sn,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Jt}},{layout:{visibility:r[0]?"visible":"none"}}];let A={};for(let L=0;L<P.length;L+=1)A=x(A,P[L]);return a=new Le({props:A}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment)},m(L,M){v(e,L,M),$(L,n,M),v(t,L,M),$(L,l,M),v(o,L,M),$(L,s,M),v(f,L,M),$(L,i,M),v(a,L,M),u=!0},p(L,M){const E=M&29?ne(c,[c[0],M&24&&{filter:["all",Zn,L[3],L[4]]},c[2],c[3],M&4&&{paint:{"circle-color":L[2],"circle-radius":er,"circle-opacity":Q(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};M&128&&(E.$$scope={dirty:M,ctx:L}),e.$set(E);const N=M&13?ne(m,[m[0],M&8&&{filter:["all",Qn,L[3]]},m[2],m[3],M&4&&{paint:{"line-color":L[2],"line-width":Jt,"line-opacity":Q(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},m[6]]):{};M&128&&(N.$$scope={dirty:M,ctx:L}),t.$set(N);const R=M&1?ne(C,[C[0],C[1],C[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(R);const G=M&13?ne(I,[I[0],M&8&&{filter:["all",sn,L[3]]},I[2],I[3],M&4&&{paint:{"fill-color":L[2],"fill-opacity":Q(.2,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},I[6]]):{};M&128&&(G.$$scope={dirty:M,ctx:L}),f.$set(G);const q=M&13?ne(P,[P[0],M&8&&{filter:["all",sn,L[3]]},M&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*Jt}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(q)},i(L){u||(g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(f.$$.fragment,L),g(a.$$.fragment,L),u=!0)},o(L){d(e.$$.fragment,L),d(t.$$.fragment,L),d(o.$$.fragment,L),d(f.$$.fragment,L),d(a.$$.fragment,L),u=!1},d(L){L&&(p(n),p(l),p(s),p(i)),w(e,L),w(t,L),w(o,L),w(f,L),w(a,L)}}}function wg(r){let e,n;return e=new Ct({props:{data:r[1],$$slots:{default:[vg]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function kg(r,e,n){let t,l;re(r,Vt,a=>n(5,l=a));let{showSchemes:o}=e,[s]=jn();const f=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=Fo(l))},[o,t,s,f,i,l]}class yg extends Y{constructor(e){super(),K(this,e,kg,wg,J,{showSchemes:0})}}function Hl(r,e,n){const t=r.slice();return t[13]=e[n],t}function Ul(r,e,n){const t=r.slice();return t[16]=e[n],t}function Sg(r){let e,n;return e=new K_({props:{loadFile:r[7]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gl(r){let e,n,t,l,o;e=new pt({props:{$$slots:{default:[Cg]},$$scope:{ctx:r}}}),e.$on("click",r[8]);function s(i){r[9](i)}let f={title:"About this scheme data",$$slots:{default:[Tg]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.open=r[3]),t=new Yl({props:f}),W.push(()=>V(t,"open",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const u={};a&524288&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!l&&a&8&&(l=!0,c.open=i[3],X(()=>l=!1)),t.$set(c)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Cg(r){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wl(r){let e,n,t=r[16]+"",l;return{c(){e=T("li"),n=T("p"),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,l)},p(o,s){s&16&&t!==(t=o[16]+"")&&z(l,t)},d(o){o&&p(e)}}}function Tg(r){let e,n,t,l,o=je(r[4].notes),s=[];for(let f=0;f<o.length;f+=1)s[f]=Wl(Ul(r,o,f));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=O(),l=T("ul");for(let f=0;f<s.length;f+=1)s[f].c();U(e,"class","govuk-prose")},m(f,i){$(f,e,i),h(e,n),h(e,t),h(e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,null)},p(f,i){if(i&16){o=je(f[4].notes);let a;for(a=0;a<o.length;a+=1){const u=Ul(f,o,a);s[a]?s[a].p(u,i):(s[a]=Wl(u),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(f){f&&p(e),$t(s,f)}}}function Vl(r){let e,n,t,l;function o(i){r[10](i)}function s(i){r[11](i)}let f={};return r[1]!==void 0&&(f.schemesToBeShown=r[1]),r[2]!==void 0&&(f.show=r[2]),e=new Wa({props:f}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),l=!0},p(i,a){const u={};!n&&a&2&&(n=!0,u.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,u.show=i[2],X(()=>t=!1)),e.$set(u)},i(i){l||(g(e.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),l=!1},d(i){w(e,i)}}}function Xl(r){let e,n;return e=new rg({props:{scheme:r[13]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jl(r){let e=r[1].has(r[13].scheme_reference),n,t,l=e&&Xl(r);return{c(){l&&l.c(),n=Me()},m(o,s){l&&l.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?l?(l.p(o,s),s&66&&g(l,1)):(l=Xl(o),l.c(),g(l,1),l.m(n.parentNode,n)):l&&($e(),d(l,1,1,()=>{l=null}),pe())},i(o){t||(g(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function Og(r){let e,n,t,l,o,s,f,i,a,u,c=An()=="Private (development)",_,m,y,C,S,I,D,P,A;o=new Vo({props:{boundaryGeojson:r[4]}}),a=new Eo({});let L=c&&Sg(r),M=r[4].notes&&Gl(r);y=new Do({props:{label:"Load schemes from GeoJSON",loadFile:r[7]}}),S=new ro({props:{errorMessage:r[0]}});let E=r[6].size>0&&Vl(r),N=je(r[6].values()),R=[];for(let q=0;q<N.length;q+=1)R[q]=Jl(Hl(r,N,q));const G=q=>d(R[q],1,1,()=>{R[q]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",l=O(),b(o.$$.fragment),s=O(),f=T("p"),f.textContent=`App version: ${An()}`,i=O(),b(a.$$.fragment),u=O(),L&&L.c(),_=O(),M&&M.c(),m=O(),b(y.$$.fragment),C=O(),b(S.$$.fragment),I=O(),E&&E.c(),D=O(),P=T("ul");for(let q=0;q<R.length;q+=1)R[q].c();Te(n,"display","flex"),Te(n,"justify-content","space-between"),U(e,"slot","sidebar"),U(e,"class","govuk-prose")},m(q,j){$(q,e,j),h(e,n),h(n,t),h(n,l),v(o,n,null),h(e,s),h(e,f),h(e,i),v(a,e,null),h(e,u),L&&L.m(e,null),h(e,_),M&&M.m(e,null),h(e,m),v(y,e,null),h(e,C),v(S,e,null),h(e,I),E&&E.m(e,null),h(e,D),h(e,P);for(let F=0;F<R.length;F+=1)R[F]&&R[F].m(P,null);A=!0},p(q,j){const F={};j&16&&(F.boundaryGeojson=q[4]),o.$set(F),c&&L.p(q,j),q[4].notes?M?(M.p(q,j),j&16&&g(M,1)):(M=Gl(q),M.c(),g(M,1),M.m(e,m)):M&&($e(),d(M,1,1,()=>{M=null}),pe());const B={};if(j&1&&(B.errorMessage=q[0]),S.$set(B),q[6].size>0?E?(E.p(q,j),j&64&&g(E,1)):(E=Vl(q),E.c(),g(E,1),E.m(e,D)):E&&($e(),d(E,1,1,()=>{E=null}),pe()),j&66){N=je(q[6].values());let se;for(se=0;se<N.length;se+=1){const ie=Hl(q,N,se);R[se]?(R[se].p(ie,j),g(R[se],1)):(R[se]=Jl(ie),R[se].c(),g(R[se],1),R[se].m(P,null))}for($e(),se=N.length;se<R.length;se+=1)G(se);pe()}},i(q){if(!A){g(o.$$.fragment,q),g(a.$$.fragment,q),g(L),g(M),g(y.$$.fragment,q),g(S.$$.fragment,q),g(E);for(let j=0;j<N.length;j+=1)g(R[j]);A=!0}},o(q){d(o.$$.fragment,q),d(a.$$.fragment,q),d(L),d(M),d(y.$$.fragment,q),d(S.$$.fragment,q),d(E),R=R.filter(Boolean);for(let j=0;j<R.length;j+=1)d(R[j]);A=!1},d(q){q&&p(e),w(o),w(a),L&&L.d(),M&&M.d(),w(y),w(S),E&&E.d(),$t(R,q)}}}function Lg(r){let e,n,t,l,o,s,f;return e=new Xo({}),t=new yg({props:{showSchemes:r[2]}}),s=new X_({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),l=O(),o=T("div"),b(s.$$.fragment),U(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),$(i,o,a),v(s,o,null),f=!0},p(i,a){const u={};a&4&&(u.showSchemes=i[2]),t.$set(u)},i(i){f||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),w(s)}}}function Ag(r){let e,n,t;return n=new jo({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Lg]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(n.$$.fragment),U(e,"slot","main")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.style=l[5]),o&524292&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Pg(r){let e,n;return e=new ls({props:{$$slots:{main:[Ag],sidebar:[Og]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&524415&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ig(r,e,n){let t,l,o;re(r,Vt,S=>n(4,t=S)),re(r,xn,S=>n(5,l=S)),re(r,$n,S=>n(6,o=S)),Bn(()=>{Ro()});const s=new URLSearchParams(window.location.search);xn.set(s.get("style")||"dataviz");let f="",i=new Set,a=!0,u=!1;function c(S){try{Vt.set(JSON.parse(S)),$n.set(Ca(t)),n(0,f="")}catch(I){n(0,f=`The file you loaded is broken: ${I}`)}}const _=()=>n(3,u=!0);function m(S){u=S,n(3,u)}function y(S){i=S,n(1,i)}function C(S){a=S,n(2,a)}return[f,i,a,u,t,l,o,c,_,m,y,C]}class Ng extends Y{constructor(e){super(),K(this,e,Ig,Pg,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Ng({target:document.getElementById("app")});
