import{S as Y,i as K,s as J,e as T,j as G,ao as Te,k as $,a7 as te,p,aU as Kl,b as W,c as V,f as O,h as b,m as v,x as rt,n as X,t as g,o as d,q as w,O as vt,T as wt,U as kt,V as yt,b2 as Xn,l as h,ab as je,_ as $e,$ as pe,aX as $t,v as k,J as z,Z as Me,a0 as jn,a1 as Zl,r as re,a2 as Ql,a3 as xl,a4 as ct,a5 as eo,a6 as to,b3 as Lo,Y as Tt,b4 as Jn,b5 as Ao,G as Ct,aO as Cn,aF as Tn,P as x,I as Le,a as pt,aT as Io,av as mt,aj as Rn,an as Gt,u as zn,F as On,w as tt,b1 as ee,b6 as be,b7 as Ae,H as Q,D as Ge,W as ne,b8 as fe,ag as fn,N as no,aZ as en,b9 as mn,ba as bt,R as ro,E as lo,bb as No,bc as Po,g as Ln,al as Mo,C as Fo,a$ as Yn,ap as Eo,aq as Kn,ar as Zn,as as on,b0 as Qn,L as Do,d as jo,M as Ro,z as zo}from"./index-95cefd3a.js";import{l as q,d as nt,a as Bo,g as ze,f as Ho,M as qo,k as dt,h as ot,i as oe,R as Go,C as _t,m as Uo,S as Wo,B as Vo,c as xn,b as Wt,Z as Xo,G as Jo}from"./ZoomOutMap-0b2c2e01.js";import{P as ue}from"./Popup-7aee85c7.js";function Yo(l){let e;return{c(){e=T("span"),G(e,"class","svelte-kzgqtg"),Te(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Te(e,"background",n[0])},i:te,o:te,d(n){n&&p(e)}}}function Ko(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Fe extends Y{constructor(e){super(),K(this,e,Ko,Yo,J,{color:0})}}const Zo="/atip/browse_layer_urls/assets/help-d011708a.svg";function Qo(l){let e,n;const t=l[1].default,r=vt(t,l,l[4],null);return{c(){e=T("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&wt(r,t,o,o[4],n?yt(t,o[4],s,null):kt(o[4]),null)},i(o){n||(g(r,o),n=!0)},o(o){d(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function xo(l){let e,n,t,r,o,s,f;function i(u){l[3](u)}let a={title:"Help",$$slots:{default:[Qo]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new Kl({props:a}),W.push(()=>V(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${Zo}" title="Help" alt="Help"/>`,n=O(),b(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(u,c){$(u,e,c),$(u,n,c),v(t,u,c),o=!0,s||(f=rt(e,"click",l[2]),s=!0)},p(u,[c]){const m={};c&16&&(m.$$scope={dirty:c,ctx:u}),!r&&c&1&&(r=!0,m.open=u[0],X(()=>r=!1)),t.$set(m)},i(u){o||(g(t.$$.fragment,u),o=!0)},o(u){d(t.$$.fragment,u),o=!1},d(u){u&&(p(e),p(n)),w(t,u),s=!1,f()}}}function es(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function f(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,f,r]}class _e extends Y{constructor(e){super(),K(this,e,es,xo,J,{})}}const ts=l=>({}),er=l=>({}),ns=l=>({}),tr=l=>({});function rs(l){let e,n,t,r,o,s,f,i,a,u,c;const m=l[4].sidebar,_=vt(m,l,l[3],tr),S=l[4].main,C=vt(S,l,l[3],er);return{c(){e=T("div"),n=T("aside"),t=T("div"),_&&_.c(),r=O(),o=T("button"),o.textContent="â†’",f=O(),i=T("main"),C&&C.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(o,"type","button"),G(o,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(n,"class",s=Xn(l[1]?"":"collapsed")+" svelte-1n0etgd"),Te(n,"--sidebarWidth",l[0]),G(i,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(y,N){$(y,e,N),h(e,n),h(n,t),_&&_.m(t,null),h(n,r),h(n,o),h(e,f),h(e,i),C&&C.m(i,null),a=!0,u||(c=rt(o,"click",l[2]),u=!0)},p(y,[N]){_&&_.p&&(!a||N&8)&&wt(_,m,y,y[3],a?yt(m,y[3],N,ns):kt(y[3]),tr),(!a||N&2&&s!==(s=Xn(y[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(n,"class",s),(!a||N&1)&&Te(n,"--sidebarWidth",y[0]),C&&C.p&&(!a||N&8)&&wt(C,S,y,y[3],a?yt(S,y[3],N,ts):kt(y[3]),er)},i(y){a||(g(_,y),g(C,y),a=!0)},o(y){d(_,y),d(C,y),a=!1},d(y){y&&p(e),_&&_.d(y),C&&C.d(y),u=!1,c()}}}function ls(l,e,n){let{$$slots:t={},$$scope:r}=e,{sidebarWidth:o="25rem"}=e,s=!0;function f(){n(1,s=!s)}return l.$$set=i=>{"sidebarWidth"in i&&n(0,o=i.sidebarWidth),"$$scope"in i&&n(3,r=i.$$scope)},[o,s,f,r,t]}class os extends Y{constructor(e){super(),K(this,e,ls,rs,J,{sidebarWidth:0})}}function nr(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function rr(l){let e,n,t,r=l[1]+"",o,s,f;return n=new Fe({props:{color:l[2]}}),{c(){e=T("li"),b(n.$$.fragment),t=O(),o=k(r),s=O()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),n.$set(u),(!f||a&1)&&r!==(r=i[1]+"")&&z(o,r)},i(i){f||(g(n.$$.fragment,i),f=!0)},o(i){d(n.$$.fragment,i),f=!1},d(i){i&&p(e),w(n)}}}function ss(l){let e,n,t=je(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=rr(nr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){e=T("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,f){$(s,e,f);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[f]){if(f&1){t=je(s[0]);let i;for(i=0;i<t.length;i+=1){const a=nr(s,t,i);r[i]?(r[i].p(a,f),g(r[i],1)):(r[i]=rr(a),r[i].c(),g(r[i],1),r[i].m(e,null))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)g(r[f]);n=!0}},o(s){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)d(r[f]);n=!1},d(s){s&&p(e),$t(r,s)}}}function is(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class Bn extends Y{constructor(e){super(),K(this,e,is,ss,J,{rows:0})}}function lr(l){let e=l[0],n,t,r=or(l);return{c(){r.c(),n=Me()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?($e(),d(r,1,1,te),pe(),r=or(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function or(l){let e;const n=l[16].default,t=vt(n,l,l[15],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&32768)&&wt(t,n,r,r[15],e?yt(n,r[15],o,null):kt(r[15]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function as(l){let e,n,t=l[0]&&lr(l);return{c(){t&&t.c(),e=Me()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=lr(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&($e(),d(t,1,1,()=>{t=null}),pe())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function fs(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:f=jn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:m=null}=e,{minzoom:_=null}=e,{maxzoom:S=null}=e,{volatile:C=null}=e;const{map:y,self:N}=Zl();re(l,y,A=>n(14,r=A)),re(l,N,A=>n(0,t=A));let D,I=!0;return Ql(()=>{t&&D&&r&&(xl(y,t,D),ct(N,t=null,t),n(12,D=void 0))}),l.$$set=A=>{"id"in A&&n(3,f=A.id),"tiles"in A&&n(4,i=A.tiles),"tileSize"in A&&n(5,a=A.tileSize),"bounds"in A&&n(6,u=A.bounds),"scheme"in A&&n(7,c=A.scheme),"attribution"in A&&n(8,m=A.attribution),"minzoom"in A&&n(9,_=A.minzoom),"maxzoom"in A&&n(10,S=A.maxzoom),"volatile"in A&&n(11,C=A.volatile),"$$scope"in A&&n(15,s=A.$$scope)},l.$$.update=()=>{l.$$.dirty&24569&&r&&t!==f&&(ct(N,t=f,t),eo(r,t,to({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:m,minzoom:_,maxzoom:S,volatile:C}),A=>r&&A===t,()=>{t&&(n(12,D=r==null?void 0:r.getSource(t)),n(13,I=!0))})),l.$$.dirty&16392&&(r==null||r.on("style.load",()=>{n(12,D=r==null?void 0:r.getSource(f))})),l.$$.dirty&12304&&D&&(I?n(13,I=!1):D.setTiles(i))},[t,y,N,f,i,a,u,c,m,_,S,C,D,I,r,s,o]}class us extends Y{constructor(e){super(),K(this,e,fs,as,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function cs(l){let e;const n=l[16].default,t=vt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&wt(t,n,r,r[24],e?yt(n,r[24],o,null):kt(r[24]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function $s(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[cs]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Lo({props:o}),W.push(()=>V(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function ps(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=jn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:m=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:S=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:y=void 0}=e,{manageHoverState:N=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:I=!1}=e,{interactive:A=!0}=e;function L(j){D=j,n(0,D)}function M(j){Tt.call(this,l,j)}function E(j){Tt.call(this,l,j)}function P(j){Tt.call(this,l,j)}function R(j){Tt.call(this,l,j)}function U(j){Tt.call(this,l,j)}function H(j){Tt.call(this,l,j)}return l.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,f=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,u=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,m=j.filter),"applyToClusters"in j&&n(9,_=j.applyToClusters),"minzoom"in j&&n(10,S=j.minzoom),"maxzoom"in j&&n(11,C=j.maxzoom),"hoverCursor"in j&&n(12,y=j.hoverCursor),"manageHoverState"in j&&n(13,N=j.manageHoverState),"hovered"in j&&n(0,D=j.hovered),"eventsIfTopMost"in j&&n(14,I=j.eventsIfTopMost),"interactive"in j&&n(15,A=j.interactive),"$$scope"in j&&n(24,r=j.$$scope)},[D,o,s,f,i,a,u,c,m,_,S,C,y,N,I,A,t,L,M,E,P,R,U,H,r]}class _n extends Y{constructor(e){super(),K(this,e,ps,$s,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function sr(l){let e=l[0],n,t,r=ir(l);return{c(){r.c(),n=Me()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?($e(),d(r,1,1,te),pe(),r=ir(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function ir(l){let e;const n=l[15].default,t=vt(n,l,l[14],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16384)&&wt(t,n,r,r[14],e?yt(n,r[14],o,null):kt(r[14]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function ms(l){let e,n,t=l[0]&&sr(l);return{c(){t&&t.c(),e=Me()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=sr(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&($e(),d(t,1,1,()=>{t=null}),pe())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function _s(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:f=jn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:m=null}=e,{attribution:_=null}=e,{minzoom:S=null}=e,{maxzoom:C=null}=e,{volatile:y=null}=e;if(i&&i.includes("pmtiles://")&&!Jn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let A=new Ao;Jn.addProtocol("pmtiles",A.tile)}const{map:N,self:D}=Zl();re(l,N,A=>n(13,r=A)),re(l,D,A=>n(0,t=A));let I;return Ql(()=>{t&&r&&(xl(N,t,I),ct(D,t=null,t),I=void 0)}),l.$$set=A=>{"id"in A&&n(3,f=A.id),"url"in A&&n(4,i=A.url),"tiles"in A&&n(5,a=A.tiles),"promoteId"in A&&n(6,u=A.promoteId),"bounds"in A&&n(7,c=A.bounds),"scheme"in A&&n(8,m=A.scheme),"attribution"in A&&n(9,_=A.attribution),"minzoom"in A&&n(10,S=A.minzoom),"maxzoom"in A&&n(11,C=A.maxzoom),"volatile"in A&&n(12,y=A.volatile),"$$scope"in A&&n(14,s=A.$$scope)},l.$$.update=()=>{l.$$.dirty&16377&&r&&t!==f&&(ct(D,t=f,t),eo(r,t,to({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:m,attribution:_,minzoom:S,maxzoom:C,volatile:y}),A=>r&&A===t,()=>{t&&(I=r==null?void 0:r.getSource(t))})),l.$$.dirty&8200&&(r==null||r.on("style.load",()=>{I=r==null?void 0:r.getSource(f)}))},[t,N,D,f,i,a,u,c,m,_,S,C,y,r,s,o]}class ye extends Y{constructor(e){super(),K(this,e,_s,ms,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function ar(l,e,n){const t=l.slice();return t[11]=e[n],t[12]=e,t[13]=n,t}function gs(l){let e,n,t;return n=new pt({props:{$$slots:{default:[hs]},$$scope:{ctx:l}}}),n.$on("click",l[9]),{c(){e=T("div"),b(n.$$.fragment)},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16384&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ds(l){let e,n,t,r,o,s,f,i,a,u;n=new pt({props:{$$slots:{default:[bs]},$$scope:{ctx:l}}}),n.$on("click",l[4]);let c=l[2]&&fr(l);o=new ze({props:{label:"Help",$$slots:{default:[vs]},$$scope:{ctx:l}}}),f=new Ho({}),f.$on("click",l[3]);let m=je(l[0]),_=[];for(let C=0;C<m.length;C+=1)_[C]=ur(ar(l,m,C));const S=C=>d(_[C],1,1,()=>{_[C]=null});return{c(){e=T("div"),b(n.$$.fragment),t=O(),c&&c.c(),r=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O();for(let C=0;C<_.length;C+=1)_[C].c();a=Me()},m(C,y){$(C,e,y),v(n,e,null),$(C,t,y),c&&c.m(C,y),$(C,r,y),v(o,C,y),$(C,s,y),v(f,C,y),$(C,i,y);for(let N=0;N<_.length;N+=1)_[N]&&_[N].m(C,y);$(C,a,y),u=!0},p(C,y){const N={};y&16384&&(N.$$scope={dirty:y,ctx:C}),n.$set(N),C[2]?c?c.p(C,y):(c=fr(C),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null);const D={};if(y&16384&&(D.$$scope={dirty:y,ctx:C}),o.$set(D),y&65){m=je(C[0]);let I;for(I=0;I<m.length;I+=1){const A=ar(C,m,I);_[I]?(_[I].p(A,y),g(_[I],1)):(_[I]=ur(A),_[I].c(),g(_[I],1),_[I].m(a.parentNode,a))}for($e(),I=m.length;I<_.length;I+=1)S(I);pe()}},i(C){if(!u){g(n.$$.fragment,C),g(o.$$.fragment,C),g(f.$$.fragment,C);for(let y=0;y<m.length;y+=1)g(_[y]);u=!0}},o(C){d(n.$$.fragment,C),d(o.$$.fragment,C),d(f.$$.fragment,C),_=_.filter(Boolean);for(let y=0;y<_.length;y+=1)d(_[y]);u=!1},d(C){C&&(p(e),p(t),p(r),p(s),p(i),p(a)),w(n),c&&c.d(C),w(o,C),w(f,C),$t(_,C)}}}function hs(l){let e;return{c(){e=k("Measure lines")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bs(l){let e;return{c(){e=k("Stop measuring")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fr(l){let e,n,t=l[2].toFixed(2)+"",r,o;return{c(){e=T("p"),n=k("Length: "),r=k(t),o=k(" meters")},m(s,f){$(s,e,f),h(e,n),h(e,r),h(e,o)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&z(r,t)},d(s){s&&p(e)}}}function vs(l){let e;return{c(){e=T("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){$(n,e,t)},p:te,d(n){n&&p(e)}}}function ws(l){let e,n;return{c(){e=T("span"),n=O(),G(e,"class","dot svelte-1tzt432")},m(t,r){$(t,e,r),$(t,n,r)},p:te,d(t){t&&(p(e),p(n))}}}function ur(l){let e,n,t;function r(f){l[7](f,l[11],l[12],l[13])}function o(){return l[8](l[13])}let s={draggable:!0,$$slots:{default:[ws]},$$scope:{ctx:l}};return l[11]!==void 0&&(s.lngLat=l[11]),e=new qo({props:s}),W.push(()=>V(e,"lngLat",r)),e.$on("click",o),{c(){b(e.$$.fragment)},m(f,i){v(e,f,i),t=!0},p(f,i){l=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:l}),!n&&i&1&&(n=!0,a.lngLat=l[11],X(()=>n=!1)),e.$set(a)},i(f){t||(g(e.$$.fragment,f),t=!0)},o(f){d(e.$$.fragment,f),t=!1},d(f){w(e,f)}}}function ks(l){let e,n;const t=[q("measurement-line"),{paint:{"line-color":nt.measuringLine,"line-width":5}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f={};e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ys(l){let e,n,t,r,o,s,f;const i=[ds,gs],a=[];function u(c,m){return c[1]?0:1}return e=u(l),n=a[e]=i[e](l),r=new Ct({props:{data:l[0].length<2?Cn():Tn(l[0]),$$slots:{default:[ks]},$$scope:{ctx:l}}}),{c(){n.c(),t=O(),b(r.$$.fragment)},m(c,m){a[e].m(c,m),$(c,t,m),v(r,c,m),o=!0,s||(f=rt(window,"keydown",l[5]),s=!0)},p(c,[m]){let _=e;e=u(c),e===_?a[e].p(c,m):($e(),d(a[_],1,1,()=>{a[_]=null}),pe(),n=a[e],n?n.p(c,m):(n=a[e]=i[e](c),n.c()),g(n,1),n.m(t.parentNode,t));const S={};m&1&&(S.data=c[0].length<2?Cn():Tn(c[0])),m&16384&&(S.$$scope={dirty:m,ctx:c}),r.$set(S)},i(c){o||(g(n),g(r.$$.fragment,c),o=!0)},o(c){d(n),d(r.$$.fragment,c),o=!1},d(c){c&&p(t),a[e].d(c),w(r,c),s=!1,f()}}}function Ss(l,e,n){let t,r=!1,o=[];function s(S){return S.length<2?null:1e3*Bo(Tn(S),{units:"kilometers"})}function f(S){n(0,o=[...o,S.detail.lngLat.toArray()])}function i(){n(1,r=!1),n(0,o=[])}function a(S){r&&S.key==="Escape"&&(S.stopPropagation(),i())}function u(S){o.splice(S,1),n(0,o)}function c(S,C,y,N){y[N]=S,n(0,o)}const m=S=>u(S),_=()=>n(1,r=!0);return l.$$.update=()=>{l.$$.dirty&1&&n(2,t=s(o))},[o,r,t,f,i,a,u,c,m,_]}class Cs extends Y{constructor(e){super(),K(this,e,Ss,ys,J,{})}}const Ts={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Be=Uint8Array,ht=Uint16Array,oo=Uint32Array,so=new Be([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),io=new Be([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Os=new Be([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ao=function(l,e){for(var n=new ht(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new oo(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},fo=ao(so,2),uo=fo[0],Ls=fo[1];uo[28]=258,Ls[258]=28;var As=ao(io,0),Is=As[0],An=new ht(32768);for(var ke=0;ke<32768;++ke){var ft=(ke&43690)>>>1|(ke&21845)<<1;ft=(ft&52428)>>>2|(ft&13107)<<2,ft=(ft&61680)>>>4|(ft&3855)<<4,An[ke]=((ft&65280)>>>8|(ft&255)<<8)>>>1}var xt=function(l,e,n){for(var t=l.length,r=0,o=new ht(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new ht(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var f;if(n){f=new ht(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],u=e-l[r],c=s[l[r]-1]++<<u,m=c|(1<<u)-1;c<=m;++c)f[An[c]>>>i]=a}else for(f=new ht(t),r=0;r<t;++r)l[r]&&(f[r]=An[s[l[r]-1]++]>>>15-l[r]);return f},rn=new Be(288);for(var ke=0;ke<144;++ke)rn[ke]=8;for(var ke=144;ke<256;++ke)rn[ke]=9;for(var ke=256;ke<280;++ke)rn[ke]=7;for(var ke=280;ke<288;++ke)rn[ke]=8;var co=new Be(32);for(var ke=0;ke<32;++ke)co[ke]=5;var Ns=xt(rn,9,1),Ps=xt(co,5,1),gn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},We=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},dn=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Ms=function(l){return(l+7)/8|0},Hn=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?ht:l.BYTES_PER_ELEMENT==4?oo:Be)(n-e);return t.set(l.subarray(e,n)),t},Fs=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ve=function(l,e,n){var t=new Error(e||Fs[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,Ve),!n)throw t;return t},Es=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Be(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Be(t*3));var s=function(de){var we=e.length;if(de>we){var ge=new Be(Math.max(we*2,de));ge.set(e),e=ge}},f=n.f||0,i=n.p||0,a=n.b||0,u=n.l,c=n.d,m=n.m,_=n.n,S=t*8;do{if(!u){f=We(l,i,1);var C=We(l,i+1,3);if(i+=3,C)if(C==1)u=Ns,c=Ps,m=9,_=5;else if(C==2){var I=We(l,i,31)+257,A=We(l,i+10,15)+4,L=I+We(l,i+5,31)+1;i+=14;for(var M=new Be(L),E=new Be(19),P=0;P<A;++P)E[Os[P]]=We(l,i+P*3,7);i+=A*3;for(var R=gn(E),U=(1<<R)-1,H=xt(E,R,1),P=0;P<L;){var j=H[We(l,i,U)];i+=j&15;var y=j>>>4;if(y<16)M[P++]=y;else{var F=0,B=0;for(y==16?(B=3+We(l,i,3),i+=2,F=M[P-1]):y==17?(B=3+We(l,i,7),i+=3):y==18&&(B=11+We(l,i,127),i+=7);B--;)M[P++]=F}}var se=M.subarray(0,I),ie=M.subarray(I);m=gn(se),_=gn(ie),u=xt(se,m,1),c=xt(ie,_,1)}else Ve(1);else{var y=Ms(i)+4,N=l[y-4]|l[y-3]<<8,D=y+N;if(D>t){o&&Ve(0);break}r&&s(a+N),e.set(l.subarray(y,D),a),n.b=a+=N,n.p=i=D*8,n.f=f;continue}if(i>S){o&&Ve(0);break}}r&&s(a+131072);for(var Se=(1<<m)-1,he=(1<<_)-1,Ce=i;;Ce=i){var F=u[dn(l,i)&Se],ae=F>>>4;if(i+=F&15,i>S){o&&Ve(0);break}if(F||Ve(2),ae<256)e[a++]=ae;else if(ae==256){Ce=i,u=null;break}else{var Pe=ae-254;if(ae>264){var P=ae-257,Oe=so[P];Pe=We(l,i,(1<<Oe)-1)+uo[P],i+=Oe}var ve=c[dn(l,i)&he],le=ve>>>4;ve||Ve(3),i+=ve&15;var ie=Is[le];if(le>3){var Oe=io[le];ie+=dn(l,i)&(1<<Oe)-1,i+=Oe}if(i>S){o&&Ve(0);break}r&&s(a+131072);for(var me=a+Pe;a<me;a+=4)e[a]=e[a-ie],e[a+1]=e[a+1-ie],e[a+2]=e[a+2-ie],e[a+3]=e[a+3-ie];a=me}}n.l=u,n.p=Ce,n.b=a,n.f=f,u&&(f=1,n.m=m,n.d=c,n.n=_)}while(!f);return a==e.length?e:Hn(e,0,a)},Ds=new Be(0),et=function(l,e){return l[e]|l[e+1]<<8},Xe=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},hn=function(l,e){return Xe(l,e)+Xe(l,e+4)*4294967296};function js(l,e){return Es(l,e)}var In=typeof TextDecoder<"u"&&new TextDecoder,Rs=0;try{In.decode(Ds,{stream:!0}),Rs=1}catch{}var zs=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,Hn(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function $o(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(In)return In.decode(l);var r=zs(l),o=r[0],s=r[1];return s.length&&Ve(8),o}}var Bs=function(l,e){return e+30+et(l,e+26)+et(l,e+28)},Hs=function(l,e,n){var t=et(l,e+28),r=$o(l.subarray(e+46,e+46+t),!(et(l,e+8)&2048)),o=e+46+t,s=Xe(l,e+20),f=n&&s==4294967295?qs(l,o):[s,Xe(l,e+24),Xe(l,e+42)],i=f[0],a=f[1],u=f[2];return[et(l,e+10),i,a,r,o+et(l,e+30)+et(l,e+32),u]},qs=function(l,e){for(;et(l,e)!=1;e+=4+et(l,e+2));return[hn(l,e+12),hn(l,e+4),hn(l,e+20)]};function Gs(l,e){for(var n={},t=l.length-22;Xe(l,t)!=101010256;--t)(!t||l.length-t>65558)&&Ve(13);var r=et(l,t+8);if(!r)return{};var o=Xe(l,t+16),s=o==4294967295||r==65535;if(s){var f=Xe(l,t-12);s=Xe(l,f)==101075792,s&&(r=Xe(l,f+32),o=Xe(l,f+48))}for(var i=e&&e.filter,a=0;a<r;++a){var u=Hs(l,o,s),c=u[0],m=u[1],_=u[2],S=u[3],C=u[4],y=u[5],N=Bs(l,y);o=C,(!i||i({name:S,size:m,originalSize:_,compression:c}))&&(c?c==8?n[S]=js(l.subarray(N,N+m),new Be(_)):Ve(14,"unknown compression type "+c):n[S]=Hn(l,N,N+m))}return n}function Us(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(bn):bn(l)}function bn(l){var e=new Uint8Array(l),n=Gs(e);return Promise.resolve(Ws(n))}function Ws(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=$o(l[r])}return e}function lt(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&St(t)===e)return t;n++}}function ln(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&St(r)===e&&n.push(r),t++}return n}function un(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&St(r)===e&&n(r,t):n(r,t),t++}}function Vs(l,e,n){var t=[];return un(l,e,function(r,o){t.push(n(r,o))}),t}var Xs=/.+\:/;function St(l){return l.tagName.replace(Xs,"")}function po(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+St(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=po(l.childNodes[t]),t++;return e+="</"+St(l)+">",e}function Js(l){var e=l.documentElement,n=lt(e,"sheetData"),t=[];return un(n,"row",function(r){un(r,"c",function(o){t.push(o)})}),t}function Ys(l,e){return lt(e,"v")}function Ks(l,e){if(e.firstChild&&St(e.firstChild)==="is"&&e.firstChild.firstChild&&St(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Zs(l){var e=l.documentElement,n=lt(e,"dimension");if(n)return n.getAttribute("ref")}function Qs(l){var e=l.documentElement,n=lt(e,"cellStyleXfs");return n?ln(n,"xf"):[]}function xs(l){var e=l.documentElement,n=lt(e,"cellXfs");return n?ln(n,"xf"):[]}function ei(l){var e=l.documentElement,n=lt(e,"numFmts");return n?ln(n,"numFmt"):[]}function ti(l){var e=l.documentElement;return Vs(e,"si",function(n){var t=lt(n,"t");if(t)return t.textContent;var r="";return un(n,"r",function(o){r+=lt(o,"t").textContent}),r})}function ni(l){var e=l.documentElement;return lt(e,"workbookPr")}function ri(l){var e=l.documentElement;return ln(e,"Relationship")}function li(l){var e=l.documentElement,n=lt(e,"sheets");return ln(n,"sheet")}function oi(l,e){var n=e.createDocument(l),t={},r=ni(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(f){f.getAttribute("name")&&t.sheets.push({id:f.getAttribute("sheetId"),name:f.getAttribute("name"),relationId:f.getAttribute("r:id")})};return li(n).forEach(o),t}function si(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var f=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=vn(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=vn(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=vn(f);break}};return ri(n).forEach(r),t}function vn(l){return l[0]==="/"?l.slice(1):"xl/"+l}function cr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function $r(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cr(Object(n),!0).forEach(function(t){ii(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ii(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ai(l,e){if(!l)return{};var n=e.createDocument(l),t=Qs(n).map(wn),r=ei(n).map(fi).reduce(function(s,f){return s[f.id]=f,s},[]),o=function(f){return f.hasAttribute("xfId")?$r($r({},t[f.xfId]),wn(f,r)):wn(f,r)};return xs(n).map(o)}function fi(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function wn(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function ui(l,e){return l?ti(e.createDocument(l)):[]}function mo(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function ci(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=$i(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $i(l,e){if(l){if(typeof l=="string")return pr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pr(l,e)}}function pr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function pi(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(mi.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&di(t.numberFormat.template))return!0}}var mi=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],_i=/^\[\$-414\]/,gi=/;@$/;function di(l){l=l.toLowerCase(),l=l.replace(_i,""),l=l.replace(gi,"");for(var e=l.split(/\W+/),n=ci(e),t;!(t=n()).done;){var r=t.value;if(hi.indexOf(r)<0)return!1}return!0}var hi=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function bi(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,f=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=kn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=kn(l,a);break;case"s":var u=Number(l);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(l));if(u>=f.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=f[u],l=kn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=vi(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var m=pi(o(),s,a);m?(l=mr(l),l=mo(l,i)):l=(a.parseNumber||mr)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function vi(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function kn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function mr(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var wi=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function ki(l){var e=function(a,u){return a-u},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],f=t[t.length-1];return[{row:r,column:s},{row:o,column:f}]}function yi(l){for(var e=0,n=0;n<l.length;)e*=26,e+=wi.indexOf(l[n]),n++;return e}function _o(l){return l=l.split(/(\d+)/),[parseInt(l[1]),yi(l[0].trim())]}function Si(l,e,n,t,r,o,s){var f=_o(l.getAttribute("r")),i=Ys(e,l),a=i&&i.textContent,u;return l.hasAttribute("t")&&(u=l.getAttribute("t")),{row:f[0],column:f[1],value:bi(a,u,{getInlineStringValue:function(){return Ks(e,l)},getInlineStringXml:function(){return po(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function Ci(l,e,n,t,r,o){var s=Js(l);return s.length===0?[]:s.map(function(f){return Si(f,l,e,n,t,r,o)})}function Ti(l,e){return Ii(l)||Ai(l,e)||Li(l,e)||Oi()}function Oi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Li(l,e){if(l){if(typeof l=="string")return _r(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(l,e)}}function _r(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ai(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,f;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,f=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Ii(l){if(Array.isArray(l))return l}function Ni(l){var e=Zs(l);if(e)return e=e.split(":").map(_o).map(function(n){var t=Ti(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Pi(l,e,n,t,r,o){var s=e.createDocument(l),f=Ci(s,e,n,t,r,o),i=Ni(s)||ki(f);return{cells:f,dimensions:i}}function Mi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Fi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fi(l,e){if(l){if(typeof l=="string")return gr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(l,e)}}function gr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ei(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var f=!0,i=Mi(l[s]),a;!(a=i()).done;){var u=a.value;if(r(u)!==null){f=!1;break}}if(f)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Di(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ji(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ji(l,e){if(l){if(typeof l=="string")return dr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(l,e)}}function dr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ri(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,f=Di(l),i;!(i=f()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var u=0;u<l.length;)l[u].splice(o,1),u++;else if(r)break;o--}return l}function zi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=go(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bi(l,e){return Gi(l)||qi(l,e)||go(l,e)||Hi()}function Hi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function go(l,e){if(l){if(typeof l=="string")return hr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hr(l,e)}}function hr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function qi(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,f;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,f=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Gi(l){if(Array.isArray(l))return l}function Ui(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=Bi(n,2);r[0];for(var o=r[1],s=o.column,f=o.row,i=new Array(f),a=0;a<f;){i[a]=new Array(s);for(var u=0;u<s;)i[a][u]=null,u++;a++}for(var c=zi(t),m;!(m=c()).done;){var _=m.value,S=_.row-1,C=_.column-1;C<s&&S<f&&(i[S][C]=_.value)}var y=e.rowMap;if(y)for(var N=0;N<i.length;)y[N]=N,N++;return i=Ei(Ri(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:y}),e.transformData&&(i=e.transformData(i)),i}function Wi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Vi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vi(l,e){if(l){if(typeof l=="string")return br(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return br(l,e)}}function br(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function vr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Xi(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vr(Object(n),!0).forEach(function(t){Ji(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Ji(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Yi(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Xi({sheet:1},n));var t=function(m){if(!l[m])throw new Error('"'.concat(m,'" file not found inside the *.xlsx file zip archive'));return l[m]},r=si(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?ui(t(r.sharedStrings),e):[],s=r.styles?ai(t(r.styles),e):{},f=oi(t("xl/workbook.xml"),e);if(n.getSheets)return f.sheets.map(function(c){var m=c.name;return{name:m}});var i=Ki(n.sheet,f.sheets);if(!i||!r.sheets[i])throw Zi(n.sheet,f.sheets);var a=Pi(t(r.sheets[i]),e,o,s,f,n),u=Ui(a,n);return n.properties?{data:u,properties:f}:u}function Ki(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=Wi(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Zi(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Nn(l){"@babel/helpers - typeof";return Nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(l)}function wr(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Qi(l,e,n){return e&&wr(l.prototype,e),n&&wr(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function xi(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function ea(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&tn(l,e)}function ta(l){var e=ho();return function(){var t=nn(l),r;if(e){var o=nn(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return na(this,r)}}function na(l,e){if(e&&(Nn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ra(l)}function ra(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function Pn(l){var e=typeof Map=="function"?new Map:void 0;return Pn=function(t){if(t===null||!la(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return an(t,arguments,nn(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),tn(r,t)},Pn(l)}function an(l,e,n){return ho()?an=Reflect.construct:an=function(r,o,s){var f=[null];f.push.apply(f,o);var i=Function.bind.apply(r,f),a=new i;return s&&tn(a,s.prototype),a},an.apply(null,arguments)}function ho(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function la(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function tn(l,e){return tn=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},tn(l,e)}function nn(l){return nn=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},nn(l)}var He=function(l){ea(n,l);var e=ta(n);function n(t){var r;return xi(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Qi(n)}(Pn(Error));function oa(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new He("not_a_number")}if(typeof l!="number")throw new He("not_a_number");if(isNaN(l))throw new He("invalid_number");if(!isFinite(l))throw new He("out_of_bounds");return l}function sa(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new He("invalid_number");if(!isFinite(l))throw new He("out_of_bounds");return String(l)}throw new He("not_a_string")}function ia(l){if(typeof l=="boolean")return l;throw new He("not_a_boolean")}function aa(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new He("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new He("invalid_number");if(!isFinite(l))throw new He("out_of_bounds");var t=mo(l,n);if(isNaN(t.valueOf()))throw new He("out_of_bounds");return t}throw new He("not_a_date")}function fa(l,e){return $a(l)||ca(l,e)||bo(l,e)||ua()}function ua(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ca(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,f;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,f=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function $a(l){if(Array.isArray(l))return l}function Mn(l){"@babel/helpers - typeof";return Mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn(l)}function pa(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=bo(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bo(l,e){if(l){if(typeof l=="string")return kr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kr(l,e)}}function kr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function yr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Sr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yr(Object(n),!0).forEach(function(t){ma(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ma(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var Cr={isColumnOriented:!1};function _a(l,e,n){n?n=Sr(Sr({},Cr),n):n=Cr;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ba(e),r&&(l=ha(l));for(var f=l[0],i=[],a=[],u=1;u<l.length;u++){var c=vo(e,l[u],u,f,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var m=pa(a),_;!(_=m()).done;){var S=_.value;S.row=o[S.row-1]+1}return{rows:i,errors:a}}function vo(l,e,n,t,r,o){for(var s={},f=!0,i=function(D){var I=D.column,A=D.value,L=D.error,M=D.reason,E={error:L,row:n+1,column:I,value:A};return M&&(E.reason=M),l[I].type&&(E.type=l[I].type),E},a=[],u=function(){var D=m[c],I=l[D],A=Mn(I.type)==="object"&&!Array.isArray(I.type),L=e[t.indexOf(D)];L===void 0&&(L=null);var M=void 0,E=void 0,P=void 0;if(A)M=vo(I.type,e,n,t,r,o);else if(L===null)M=null;else if(Array.isArray(I.type)){var R=!1,U=da(L).map(function(j){var F=Tr(j,I,o);return F.error&&(M=j,E=F.error,P=F.reason),F.value!==null&&(R=!0),F.value});E||(M=R?U:null)}else{var H=Tr(L,I,o);E=H.error,P=H.reason,M=E?L:H.value}!E&&M===null&&(typeof I.required=="function"?a.push({column:D}):I.required===!0&&(E="required")),E?r.push(i({column:D,value:M,error:E,reason:P})):(f&&M!==null&&(f=!1),(M!==null||o.includeNullValues)&&(s[I.prop]=M))},c=0,m=Object.keys(l);c<m.length;c++)u();if(f)return null;for(var _=0,S=a;_<S.length;_++){var C=S[_].column,y=l[C].required(s);y&&r.push(i({column:C,value:null,error:"required"}))}return s}function Tr(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=Ot(l,e.parse):e.type?t=ga(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function Ot(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ga(l,e,n){switch(e){case String:return Ot(l,sa);case Number:return Ot(l,oa);case Date:return Ot(l,function(t){return aa(t,{properties:n.properties})});case Boolean:return Ot(l,ia);default:if(typeof e=="function")return Ot(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function wo(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=wo(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function da(l){for(var e=[],n=0;n<l.length;){var t=wo(l,",",n),r=fa(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var ha=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function ba(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function Fn(l){"@babel/helpers - typeof";return Fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fn(l)}function ko(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;Fn(o)==="object"&&(o=Object.keys(l[r])[0],s=ko(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var va=["schema","map"];function Or(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function sn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Or(Object(n),!0).forEach(function(t){wa(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function wa(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ka(l,e){if(l==null)return{};var n=ya(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function ya(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function Sa(l,e,n){var t=n.schema,r=n.map,o=ka(n,va);!t&&r&&(t=ko(r));var s=Yi(l,e,sn(sn({},o),{},{properties:t||o.properties}));return t?_a(s.data,t,sn(sn({},o),{},{properties:s.properties})):s}function Ca(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Us(l).then(function(n){return Sa(n,Ts,e)})}function Ta(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>Oa(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function Oa(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function La(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ca(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Io(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const En=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function Aa(l){return mt(["get","intervention_type"],{area:nt.area,route:nt.route,crossing:nt.crossing,other:nt.other},"white")}function Ia(l){return[["Areas",nt.area],["Routes",nt.route],["Crossings",nt.crossing],["Other",nt.other]]}const Z={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},qe=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Dn(){let[l,e]=yo(En,Z.funding_programmes);return[mt(["get","funding_programme"],l,"grey"),e]}function Na(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=yo(l,Z.current_milestone);return[mt(["get","current_milestone"],e,"grey"),n]}function yo(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Pa(l){let e,n;return e=new Bn({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ma(l){let e,n,t,r,o;function s(i){l[3](i)}let f={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(f.value=l[0]),e=new dt({props:f}),W.push(()=>V(e,"value",s)),e.$on("change",l[2]),r=new ze({props:{label:"Legend",$$slots:{default:[Pa]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};!n&&a&1&&(n=!0,u.value=i[0],X(()=>n=!1)),e.$set(u);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function Fa(l,e,n){let t;re(l,Rn,a=>n(4,t=a));let r="fundingProgramme",[o,s]=Dn();function f(){let a;r=="interventionType"?(a=Aa(),n(1,s=Ia())):r=="fundingProgramme"?n(1,[a,s]=Dn(),s):r=="currentMilestone"&&n(1,[a,s]=Na(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,f,i]}class Ea extends Y{constructor(e){super(),K(this,e,Fa,Ma,J,{})}}const qt=Gt({type:"FeatureCollection",features:[],schemes:{}}),cn=Gt(new Map),Lr=Gt(!0),Vt=Gt(""),Xt=Gt("");function Da(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ra(l){let e,n,t,r,o,s;return t=new pt({props:{$$slots:{default:[ja]},$$scope:{ctx:l}}}),t.$on("click",l[19]),{c(){e=T("input"),n=O(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){$(f,e,i),tt(e,l[7]),$(f,n,i),v(t,f,i),r=!0,o||(s=rt(e,"input",l[18]),o=!0)},p(f,i){i&128&&e.value!==f[7]&&tt(e,f[7]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){r||(g(t.$$.fragment,f),r=!0)},o(f){d(t.$$.fragment,f),r=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function za(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ba(l){let e,n,t,r,o,s;return t=new pt({props:{$$slots:{default:[za]},$$scope:{ctx:l}}}),t.$on("click",l[21]),{c(){e=T("input"),n=O(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(f,i){$(f,e,i),tt(e,l[6]),$(f,n,i),v(t,f,i),r=!0,o||(s=rt(e,"input",l[20]),o=!0)},p(f,i){i&64&&e.value!==f[6]&&tt(e,f[6]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){r||(g(t.$$.fragment,f),r=!0)},o(f){d(t.$$.fragment,f),r=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function Ha(l){let e,n,t,r,o,s,f,i,a,u,c,m,_,S,C,y,N,D,I,A;e=new pt({props:{$$slots:{default:[Da]},$$scope:{ctx:l}}}),e.$on("click",l[13]);function L(F){l[14](F)}let M={label:"Authority or region",choices:l[8],emptyOption:!0};l[2]!==void 0&&(M.value=l[2]),t=new dt({props:M}),W.push(()=>V(t,"value",L));function E(F){l[15](F)}let P={label:"Funding programme",choices:l[9],emptyOption:!0};l[3]!==void 0&&(P.value=l[3]),s=new dt({props:P}),W.push(()=>V(s,"value",E));function R(F){l[16](F)}let U={label:"Current milestone",choices:l[10],emptyOption:!0};l[4]!==void 0&&(U.value=l[4]),a=new dt({props:U}),W.push(()=>V(a,"value",R));function H(F){l[17](F)}let j={label:"Sketch source",choices:l[12],emptyOption:!0};return l[5]!==void 0&&(j.value=l[5]),m=new dt({props:j}),W.push(()=>V(m,"value",H)),C=new On({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Ra]},$$scope:{ctx:l}}}),N=new On({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Ba]},$$scope:{ctx:l}}}),I=new Ea({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment),i=O(),b(a.$$.fragment),c=O(),b(m.$$.fragment),S=O(),b(C.$$.fragment),y=O(),b(N.$$.fragment),D=O(),b(I.$$.fragment)},m(F,B){v(e,F,B),$(F,n,B),v(t,F,B),$(F,o,B),v(s,F,B),$(F,i,B),v(a,F,B),$(F,c,B),v(m,F,B),$(F,S,B),v(C,F,B),$(F,y,B),v(N,F,B),$(F,D,B),v(I,F,B),A=!0},p(F,B){const se={};B&134217728&&(se.$$scope={dirty:B,ctx:F}),e.$set(se);const ie={};B&256&&(ie.choices=F[8]),!r&&B&4&&(r=!0,ie.value=F[2],X(()=>r=!1)),t.$set(ie);const Se={};B&512&&(Se.choices=F[9]),!f&&B&8&&(f=!0,Se.value=F[3],X(()=>f=!1)),s.$set(Se);const he={};B&1024&&(he.choices=F[10]),!u&&B&16&&(u=!0,he.value=F[4],X(()=>u=!1)),a.$set(he);const Ce={};!_&&B&32&&(_=!0,Ce.value=F[5],X(()=>_=!1)),m.$set(Ce);const ae={};B&134217856&&(ae.$$scope={dirty:B,ctx:F}),C.$set(ae);const Pe={};B&134217792&&(Pe.$$scope={dirty:B,ctx:F}),N.$set(Pe)},i(F){A||(g(e.$$.fragment,F),g(t.$$.fragment,F),g(s.$$.fragment,F),g(a.$$.fragment,F),g(m.$$.fragment,F),g(C.$$.fragment,F),g(N.$$.fragment,F),g(I.$$.fragment,F),A=!0)},o(F){d(e.$$.fragment,F),d(t.$$.fragment,F),d(s.$$.fragment,F),d(a.$$.fragment,F),d(m.$$.fragment,F),d(C.$$.fragment,F),d(N.$$.fragment,F),d(I.$$.fragment,F),A=!1},d(F){F&&(p(n),p(o),p(i),p(c),p(S),p(y),p(D)),w(e,F),w(t,F),w(s,F),w(a,F),w(m,F),w(C,F),w(N,F),w(I,F)}}}function qa(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[11].route.toLocaleString()+"",s,f,i=l[11].area.toLocaleString()+"",a,u,c=l[11].crossing.toLocaleString()+"",m,_,S=l[11].other.toLocaleString()+"",C,y,N=Ar(l[11].totalLength).toFixed(1)+"",D,I;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),f=k(`
    routes, `),a=k(i),u=k(` areas,
    `),m=k(c),_=k(" crossings, "),C=k(S),y=k(`
    other, with total LineString length of `),D=k(N),I=k(" miles)")},m(A,L){$(A,e,L),$(A,t,L),$(A,r,L),$(A,s,L),$(A,f,L),$(A,a,L),$(A,u,L),$(A,m,L),$(A,_,L),$(A,C,L),$(A,y,L),$(A,D,L),$(A,I,L)},p(A,L){L&1&&n!==(n=A[0].size.toLocaleString()+"")&&z(t,n),L&2048&&o!==(o=A[11].route.toLocaleString()+"")&&z(s,o),L&2048&&i!==(i=A[11].area.toLocaleString()+"")&&z(a,i),L&2048&&c!==(c=A[11].crossing.toLocaleString()+"")&&z(m,c),L&2048&&S!==(S=A[11].other.toLocaleString()+"")&&z(C,S),L&2048&&N!==(N=Ar(A[11].totalLength).toFixed(1)+"")&&z(D,N)},d(A){A&&(p(e),p(t),p(r),p(s),p(f),p(a),p(u),p(m),p(_),p(C),p(y),p(D),p(I))}}}function Ga(l){let e,n,t;function r(s){l[22](s)}let o={$$slots:{default:[qa]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new oe({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&134219777&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ua(l){let e,n,t,r;return e=new ze({props:{label:"Filters",$$slots:{default:[Ha]},$$scope:{ctx:l}}}),t=new ot({props:{small:!0,$$slots:{default:[Ga]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const f={};s&134219772&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&134219779&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Ar(l){return l*621371e-9}function Wa(l,e,n){let t,r,o,s;re(l,Xt,B=>n(6,t=B)),re(l,Vt,B=>n(7,r=B)),re(l,qt,B=>n(23,o=B)),re(l,cn,B=>n(24,s=B));let{schemesToBeShown:f=new Set}=e,{show:i=!0}=e,a=[],u="",c=[],m=new Set(En.slice(0,-1)),_="",S=[],C="",y=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],N="",D={area:0,route:0,crossing:0,other:0,totalLength:0};zn(()=>{var Se,he,Ce;let B=new Set,se=new Set,ie=new Set;for(let ae of s.values())(Se=ae.browse)!=null&&Se.authority_or_region&&B.add(ae.browse.authority_or_region),(he=ae.browse)!=null&&he.funding_programme&&se.add(ae.browse.funding_programme),(Ce=ae.browse)!=null&&Ce.current_milestone&&ie.add(ae.browse.current_milestone);n(8,a=Array.from(B.entries())),a.sort(),n(9,c=En.map(ae=>[ae,ae])),n(10,S=Array.from(ie.entries())),S.sort()});function I(B,se,ie,Se,he,Ce){let ae=se.toLowerCase(),Pe=ie.toLowerCase(),Oe=le=>{var me,de,we,ge,Ne,Ee,Ut;if(ae&&!((me=le.properties.name)!=null&&me.toLowerCase().includes(ae))&&!((de=le.properties.description)!=null&&de.toLowerCase().includes(ae)))return!1;if(B||Pe||Se||he||Ce){let Je=s.get(le.properties.scheme_reference);if(Se&&((we=Je.browse)==null?void 0:we.authority_or_region)!=Se||he&&he!=="Other"&&((ge=Je.browse)==null?void 0:ge.funding_programme)!=he||he==="Other"&&m.has(((Ne=Je.browse)==null?void 0:Ne.funding_programme)??"")||Ce&&((Ee=Je.browse)==null?void 0:Ee.current_milestone)!=Ce||Pe&&!Je.scheme_reference.toLowerCase().includes(Pe)&&!(Je.scheme_name??"").toLowerCase().includes(Pe)||B&&B!=="Both"&&B!==((Ut=Je.browse)==null?void 0:Ut.sketch_source))return!1}return!0};n(0,f=new Set(o.features.filter(Oe).map(le=>le.properties.scheme_reference))),n(11,D={area:0,route:0,crossing:0,other:0,totalLength:0});let ve=le=>{var me,de;return!(!f.has(le.properties.scheme_reference)||ae&&!((me=le.properties.name)!=null&&me.toLowerCase().includes(ae))&&!((de=le.properties.description)!=null&&de.toLowerCase().includes(ae)))};for(let le of o.features)ve(le)?(delete le.properties.hide_while_editing,n(11,D[le.properties.intervention_type]++,D),le.geometry.type=="LineString"&&le.properties.length_meters&&n(11,D.totalLength+=le.properties.length_meters,D)):le.properties.hide_while_editing=!0;qt.set(o),n(11,D)}function A(){n(5,N=""),n(2,u=""),n(3,_=""),n(4,C=""),ct(Vt,r="",r),ct(Xt,t="",t)}function L(B){u=B,n(2,u)}function M(B){_=B,n(3,_)}function E(B){C=B,n(4,C)}function P(B){N=B,n(5,N)}function R(){r=this.value,Vt.set(r)}const U=()=>ct(Vt,r="",r);function H(){t=this.value,Xt.set(t)}const j=()=>ct(Xt,t="",t);function F(B){i=B,n(1,i)}return l.$$set=B=>{"schemesToBeShown"in B&&n(0,f=B.schemesToBeShown),"show"in B&&n(1,i=B.show)},l.$$.update=()=>{l.$$.dirty&252&&I(N,r,t,u,_,C)},[f,i,u,_,C,N,t,r,a,c,S,D,y,A,L,M,E,P,R,U,H,j,F]}class Va extends Y{constructor(e){super(),K(this,e,Wa,Ua,J,{schemesToBeShown:0,show:1})}}function Xa(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ja(l){let e,n,t,r,o;return t=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Xa]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment),r=k(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,f){$(s,e,f),h(e,n),v(t,e,null),h(e,r),o=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){o||(g(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class Re extends Y{constructor(e){super(),K(this,e,null,Ja,J,{})}}function Ir(l,e,n){const t=l.slice();return t[2]=e[n],t}function Nr(l,e,n){const t=l.slice();return t[5]=e[n],t}function Pr(l){let e,n;return{c(){e=T("span"),n=k(`Â 
    `),Te(e,"background",l[5]),Te(e,"width","100%"),Te(e,"border","1px solid black")},m(t,r){$(t,e,r),h(e,n)},p(t,r){r&1&&Te(e,"background",t[5])},d(t){t&&p(e)}}}function Mr(l){let e,n=l[2]+"",t;return{c(){e=T("span"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&z(t,n)},d(r){r&&p(e)}}}function Ya(l){let e,n,t,r=je(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=Pr(Nr(l,r,i));let s=je(l[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=Mr(Ir(l,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=O(),t=T("div");for(let i=0;i<f.length;i+=1)f[i].c();Te(e,"display","flex"),Te(t,"display","flex"),Te(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);$(i,n,a),$(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){r=je(i[0]);let u;for(u=0;u<r.length;u+=1){const c=Nr(i,r,u);o[u]?o[u].p(c,a):(o[u]=Pr(c),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}if(a&2){s=je(i[1]);let u;for(u=0;u<s.length;u+=1){const c=Ir(i,s,u);f[u]?f[u].p(c,a):(f[u]=Mr(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:te,o:te,d(i){i&&(p(e),p(n),p(t)),$t(o,i),$t(f,i)}}}function Ka(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ue extends Y{constructor(e){super(),K(this,e,Ka,Ya,J,{colorScale:0,limits:1})}}function Fr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Za(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qa(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ef(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tf(l){let e,n,t,r,o,s,f,i,a,u,c,m;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Qa]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[xa]},$$scope:{ctx:l}}}),u=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ef]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=O(),i=T("p"),a=k("License: "),b(u.$$.fragment),c=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(_,S){$(_,e,S),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(_,f,S),$(_,i,S),h(i,a),v(u,i,null),h(i,c),m=!0},p(_,S){const C={};S&65536&&(C.$$scope={dirty:S,ctx:_}),t.$set(C);const y={};S&65536&&(y.$$scope={dirty:S,ctx:_}),o.$set(y);const N={};S&65536&&(N.$$scope={dirty:S,ctx:_}),u.$set(N)},i(_){m||(g(t.$$.fragment,_),g(o.$$.fragment,_),g(u.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(u.$$.fragment,_),m=!1},d(_){_&&(p(e),p(f),p(i)),w(t),w(o),w(u)}}}function nf(l){let e,n,t;return n=new _e({props:{$$slots:{default:[tf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Er(l){let e,n;return e=new Ue({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rf(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sf(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function af(l){let e,n,t,r,o,s,f,i,a,u,c,m,_,S;return o=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[lf]},$$scope:{ctx:l}}}),f=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[of]},$$scope:{ctx:l}}}),m=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[sf]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=T("p"),r=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(f.$$.fragment),i=k("."),a=O(),u=T("p"),c=k("License: "),b(m.$$.fragment),_=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(C,y){$(C,e,y),$(C,n,y),$(C,t,y),h(t,r),v(o,t,null),h(t,s),v(f,t,null),h(t,i),$(C,a,y),$(C,u,y),h(u,c),v(m,u,null),h(u,_),S=!0},p(C,y){const N={};y&65536&&(N.$$scope={dirty:y,ctx:C}),o.$set(N);const D={};y&65536&&(D.$$scope={dirty:y,ctx:C}),f.$set(D);const I={};y&65536&&(I.$$scope={dirty:y,ctx:C}),m.$set(I)},i(C){S||(g(o.$$.fragment,C),g(f.$$.fragment,C),g(m.$$.fragment,C),S=!0)},o(C){d(o.$$.fragment,C),d(f.$$.fragment,C),d(m.$$.fragment,C),S=!1},d(C){C&&(p(e),p(n),p(t),p(a),p(u)),w(o),w(f),w(m)}}}function ff(l){let e,n,t;return n=new _e({props:{$$slots:{default:[af]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Dr(l){let e,n;return e=new Ue({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function uf(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pf(l){let e,n,t,r,o,s,f,i,a;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[cf]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[$f]},$$scope:{ctx:l}}}),i=new Re({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const m={};c&65536&&(m.$$scope={dirty:c,ctx:u}),t.$set(m);const _={};c&65536&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){a||(g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function mf(l){let e,n,t;return n=new _e({props:{$$slots:{default:[pf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function jr(l){let e,n,t,r;return t=new Ue({props:{colorScale:l[4],limits:l[6]().map(kf)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:te,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function _f(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,f=l[14]+"",i;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(r),s=k(`
          people per square kilometre in `),i=k(f)},m(a,u){$(a,e,u),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,u){u&8200&&r!==(r=a[15].toLocaleString()+"")&&z(o,r),u&8192&&f!==(f=a[14]+"")&&z(i,f)},d(a){a&&p(e)}}}function gf(l){let e,n,t=l[14]+"",r,o,s,f=l[15]+"",i,a;return{c(){e=T("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=T("b"),i=k(f),a=k(`
          cars`)},m(u,c){$(u,e,c),h(e,n),h(e,r),h(e,o),h(e,s),h(s,i),h(e,a)},p(u,c){c&8192&&t!==(t=u[14]+"")&&z(r,t),c&8200&&f!==(f=u[15]+"")&&z(i,f)},d(u){u&&p(e)}}}function df(l){let e,n,t=l[15]+"",r,o,s,f=l[14]+"",i,a;return{c(){e=T("p"),n=T("b"),r=k(t),o=k("%"),s=k(`
          of households in `),i=k(f),a=k(" have 1 or more cars")},m(u,c){$(u,e,c),h(e,n),h(n,r),h(n,o),h(e,s),h(e,i),h(e,a)},p(u,c){c&8200&&t!==(t=u[15]+"")&&z(r,t),c&8192&&f!==(f=u[14]+"")&&z(i,f)},d(u){u&&p(e)}}}function hf(l){Fr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?df:o[3]=="average_cars_per_household"?gf:_f}let t=n(l),r=t(l);return{c(){r.c(),e=Me()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){Fr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function bf(l){let e,n;return e=new ue({props:{$$slots:{default:[hf,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vf(l){let e,n,t,r;const o=[q(it),{sourceLayer:it},{paint:{"fill-color":Ae(["get",l[3]],l[6](),l[4]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[bf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ge({props:s}),e.$on("click",l[5]);const f=[q(`${it}-outline`),{sourceLayer:it},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),r=!0},p(a,u){const c=u&88?ne(o,[u&0&&fe(q(it)),u&0&&{sourceLayer:it},u&88&&{paint:{"fill-color":Ae(["get",a[3]],a[6](),a[4]),"fill-opacity":Q(.5,.7)}},u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};u&65544&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&8?ne(f,[u&0&&fe(q(`${it}-outline`)),u&0&&{sourceLayer:it},f[2],u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function wf(l){let e,n,t,r,o,s,f,i,a,u,c,m,_,S;function C(P){l[7](P)}let y={$$slots:{right:[nf],default:[Za]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new oe({props:y}),W.push(()=>V(e,"checked",C)),e.$on("change",l[8]);let N=l[3]=="percent_households_with_car"&&Er(l);function D(P){l[9](P)}let I={$$slots:{right:[ff],default:[rf]},$$scope:{ctx:l}};l[1]!==void 0&&(I.checked=l[1]),o=new oe({props:I}),W.push(()=>V(o,"checked",D)),o.$on("change",l[10]);let A=l[3]=="average_cars_per_household"&&Dr(l);function L(P){l[11](P)}let M={$$slots:{right:[mf],default:[uf]},$$scope:{ctx:l}};l[2]!==void 0&&(M.checked=l[2]),a=new oe({props:M}),W.push(()=>V(a,"checked",L)),a.$on("change",l[12]);let E=l[3]=="population_density"&&jr(l);return _=new ye({props:{url:`pmtiles://${be()}/v1/${it}.pmtiles`,$$slots:{default:[vf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),N&&N.c(),r=O(),b(o.$$.fragment),f=O(),A&&A.c(),i=O(),b(a.$$.fragment),c=O(),E&&E.c(),m=O(),b(_.$$.fragment)},m(P,R){v(e,P,R),$(P,t,R),N&&N.m(P,R),$(P,r,R),v(o,P,R),$(P,f,R),A&&A.m(P,R),$(P,i,R),v(a,P,R),$(P,c,R),E&&E.m(P,R),$(P,m,R),v(_,P,R),S=!0},p(P,[R]){const U={};R&65536&&(U.$$scope={dirty:R,ctx:P}),!n&&R&1&&(n=!0,U.checked=P[0],X(()=>n=!1)),e.$set(U),P[3]=="percent_households_with_car"?N?(N.p(P,R),R&8&&g(N,1)):(N=Er(P),N.c(),g(N,1),N.m(r.parentNode,r)):N&&($e(),d(N,1,1,()=>{N=null}),pe());const H={};R&65536&&(H.$$scope={dirty:R,ctx:P}),!s&&R&2&&(s=!0,H.checked=P[1],X(()=>s=!1)),o.$set(H),P[3]=="average_cars_per_household"?A?(A.p(P,R),R&8&&g(A,1)):(A=Dr(P),A.c(),g(A,1),A.m(i.parentNode,i)):A&&($e(),d(A,1,1,()=>{A=null}),pe());const j={};R&65536&&(j.$$scope={dirty:R,ctx:P}),!u&&R&4&&(u=!0,j.checked=P[2],X(()=>u=!1)),a.$set(j),P[3]=="population_density"?E?(E.p(P,R),R&8&&g(E,1)):(E=jr(P),E.c(),g(E,1),E.m(m.parentNode,m)):E&&($e(),d(E,1,1,()=>{E=null}),pe());const F={};R&65544&&(F.$$scope={dirty:R,ctx:P}),_.$set(F)},i(P){S||(g(e.$$.fragment,P),g(N),g(o.$$.fragment,P),g(A),g(a.$$.fragment,P),g(E),g(_.$$.fragment,P),S=!0)},o(P){d(e.$$.fragment,P),d(N),d(o.$$.fragment,P),d(A),d(a.$$.fragment,P),d(E),d(_.$$.fragment,P),S=!1},d(P){P&&(p(t),p(r),p(f),p(i),p(c),p(m)),w(e,P),N&&N.d(P),w(o,P),A&&A.d(P),w(a,P),E&&E.d(P),w(_,P)}}}let it="census_output_areas";const kf=l=>l.toLocaleString();function yf(l,e,n){let t=Z.sequential_low_to_high,r=!1,o=!1,s=!1,f="";function i(y){let N=y.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${N}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${N}`,"_blank")}function a(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function u(y){r=y,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function m(y){o=y,n(1,o)}const _=()=>{n(0,r=!1),n(2,s=!1)};function S(y){s=y,n(2,s)}const C=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,f="percent_households_with_car"):o?n(3,f="average_cars_per_household"):s?n(3,f="population_density"):n(3,f=""))},[r,o,s,f,t,i,a,u,c,m,_,S,C]}class Sf extends Y{constructor(e){super(),K(this,e,yf,wf,J,{})}}function Ie(l){let e=new URLSearchParams(window.location.search).has(l),n=Gt(e);return n.subscribe(t=>{let r=new URL(window.location.href);t?r.searchParams.set(l,"1"):r.searchParams.delete(l),window.history.replaceState(null,"",r.toString())}),n}function Cf(l){let e,n,t;return e=new Fe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Tf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Of(l){let e,n,t,r,o,s,f;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Tf]},$$scope:{ctx:l}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of December 2022."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Lf(l){let e,n,t;return n=new _e({props:{$$slots:{default:[Of]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Af(l){let e,n=l[4].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&16&&n!==(n=r[4].name+"")&&z(t,n)},d(r){r&&p(e)}}}function If(l){let e,n;return e=new ue({props:{$$slots:{default:[Af,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Nf(l){let e,n,t,r;const o=[q(Lt),{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[If]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ge({props:s}),e.$on("click",Mf);const f=[q(`${Lt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),r=!0},p(a,u){const c=u&3?ne(o,[u&0&&fe(q(Lt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&3?ne(f,[u&0&&fe(q(`${Lt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Pf(l){let e,n,t,r,o;function s(i){l[3](i)}let f={$$slots:{right:[Lf],default:[Cf]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),r=new Ct({props:{data:`${be()}/v1/${Lt}.geojson`,$$slots:{default:[Nf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Lt="combined_authorities";function Mf(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ff(l,e,n){let t,r=Z.combined_authorities,o=Ie(Lt);re(l,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,r,o,s]}class Ef extends Y{constructor(e){super(),K(this,e,Ff,Pf,J,{})}}function Df(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jf(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rf(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zf(l){let e,n,t,r,o,s,f,i,a;return t=new ee({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[jf]},$$scope:{ctx:l}}}),o=new ee({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Rf]},$$scope:{ctx:l}}}),i=new Re({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:u}),t.$set(m);const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){a||(g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function Bf(l){let e,n,t;return n=new _e({props:{$$slots:{default:[zf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Rr(l){let e,n;return e=new Ue({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hf(l){let e,n=l[5].LSOA11CD+"",t,r,o,s=l[5].score+"",f,i,a,u,c,m=l[5].rank.toLocaleString()+"",_,S;return{c(){e=T("p"),t=k(n),r=k(` has an IMD score of
        `),o=T("b"),f=k(s),i=O(),a=T("p"),u=k("Rank: "),c=T("b"),_=k(m),S=k(`
        / 32,844 LSOAs`)},m(C,y){$(C,e,y),h(e,t),h(e,r),h(e,o),h(o,f),$(C,i,y),$(C,a,y),h(a,u),h(a,c),h(c,_),h(a,S)},p(C,y){y&32&&n!==(n=C[5].LSOA11CD+"")&&z(t,n),y&32&&s!==(s=C[5].score+"")&&z(f,s),y&32&&m!==(m=C[5].rank.toLocaleString()+"")&&z(_,m)},d(C){C&&(p(e),p(i),p(a))}}}function qf(l){let e,n;return e=new ue({props:{$$slots:{default:[Hf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gf(l){let e,n,t,r;const o=[q(Ye),{sourceLayer:Ye},{paint:{"fill-color":Ae(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[qf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ge({props:s});const f=[q(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),r=!0},p(a,u){const c=u&7?ne(o,[u&0&&fe(q(Ye)),u&0&&{sourceLayer:Ye},u&6&&{paint:{"fill-color":Ae(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Q(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&1?ne(f,[u&0&&fe(q(`${Ye}-outline`)),u&0&&{sourceLayer:Ye},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Uf(l){let e,n,t,r,o,s;function f(u){l[4](u)}let i={$$slots:{right:[Bf],default:[Df]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=l[0]&&Rr(l);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Ye}.pmtiles`,$$slots:{default:[Gf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),v(o,u,c),s=!0},p(u,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,m.checked=u[0],X(()=>n=!1)),e.$set(m),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=Rr(u),a.c(),g(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const _={};c&65&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),w(e,u),a&&a.d(u),w(o,u)}}}let Ye="imd";function Wf(l,e,n){let t,r=Z.sequential_low_to_high,o=[0,2,4,6,8,10],s=Ie(Ye);re(l,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,r,o,s,f]}class Vf extends Y{constructor(e){super(),K(this,e,Wf,Uf,J,{})}}function Xf(l){let e,n,t;return e=new Fe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Jf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yf(l){let e,n,t,r,o,s,f;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Jf]},$$scope:{ctx:l}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of January 2024."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Kf(l){let e,n,t;return n=new _e({props:{$$slots:{default:[Yf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Zf(l){let e,n=l[4].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&16&&n!==(n=r[4].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Qf(l){let e,n;return e=new ue({props:{$$slots:{default:[Zf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xf(l){let e,n,t,r;const o=[q(At),{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Qf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ge({props:s}),e.$on("click",tu);const f=[q(`${At}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),r=!0},p(a,u){const c=u&3?ne(o,[u&0&&fe(q(At)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&3?ne(f,[u&0&&fe(q(`${At}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function eu(l){let e,n,t,r,o;function s(i){l[3](i)}let f={$$slots:{right:[Kf],default:[Xf]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),r=new Ct({props:{data:`${be()}/v1/${At}.geojson`,$$slots:{default:[xf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let At="local_authority_districts";function tu(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function nu(l,e,n){let t,r=Z.local_authority_districts,o=Ie(At);re(l,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,r,o,s]}class ru extends Y{constructor(e){super(),K(this,e,nu,eu,J,{})}}function lu(l){let e,n,t;return e=new Fe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function ou(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function su(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function au(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fu(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uu(l){let e,n,t,r,o,s,f,i,a,u,c,m,_,S,C,y,N,D,I,A,L,M;return t=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ou]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[su]},$$scope:{ctx:l}}}),f=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[iu]},$$scope:{ctx:l}}}),_=new ee({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[au]},$$scope:{ctx:l}}}),D=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[fu]},$$scope:{ctx:l}}}),L=new Re({}),{c(){e=T("p"),n=k("LPAs may be a "),b(t.$$.fragment),r=k(", "),b(o.$$.fragment),s=k("y, or "),b(f.$$.fragment),i=k("."),a=O(),u=T("p"),c=T("strong"),m=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(_.$$.fragment),S=k(" to get more details."),C=O(),y=T("p"),N=k("Data from ONS Geography via "),b(D.$$.fragment),I=k(", as of November 2022."),A=O(),b(L.$$.fragment)},m(E,P){$(E,e,P),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),v(f,e,null),h(e,i),$(E,a,P),$(E,u,P),h(u,c),h(c,m),v(_,c,null),h(c,S),$(E,C,P),$(E,y,P),h(y,N),v(D,y,null),h(y,I),$(E,A,P),v(L,E,P),M=!0},p(E,P){const R={};P&32&&(R.$$scope={dirty:P,ctx:E}),t.$set(R);const U={};P&32&&(U.$$scope={dirty:P,ctx:E}),o.$set(U);const H={};P&32&&(H.$$scope={dirty:P,ctx:E}),f.$set(H);const j={};P&32&&(j.$$scope={dirty:P,ctx:E}),_.$set(j);const F={};P&32&&(F.$$scope={dirty:P,ctx:E}),D.$set(F)},i(E){M||(g(t.$$.fragment,E),g(o.$$.fragment,E),g(f.$$.fragment,E),g(_.$$.fragment,E),g(D.$$.fragment,E),g(L.$$.fragment,E),M=!0)},o(E){d(t.$$.fragment,E),d(o.$$.fragment,E),d(f.$$.fragment,E),d(_.$$.fragment,E),d(D.$$.fragment,E),d(L.$$.fragment,E),M=!1},d(E){E&&(p(e),p(a),p(u),p(C),p(y),p(A)),w(t),w(o),w(f),w(_),w(D),w(L,E)}}}function cu(l){let e,n,t;return n=new _e({props:{$$slots:{default:[uu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function $u(l){let e,n=l[4].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&16&&n!==(n=r[4].name+"")&&z(t,n)},d(r){r&&p(e)}}}function pu(l){let e,n;return e=new ue({props:{$$slots:{default:[$u,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mu(l){let e,n,t,r;const o=[q(Ke),{sourceLayer:Ke},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[pu]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ge({props:s});const f=[q(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),r=!0},p(a,u){const c=u&3?ne(o,[u&0&&fe(q(Ke)),u&0&&{sourceLayer:Ke},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&3?ne(f,[u&0&&fe(q(`${Ke}-outline`)),u&0&&{sourceLayer:Ke},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function _u(l){let e,n,t,r,o;function s(i){l[3](i)}let f={$$slots:{right:[cu],default:[lu]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${be()}/v1/${Ke}.pmtiles`,$$slots:{default:[mu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Ke="local_planning_authorities";function gu(l,e,n){let t,r=Z.local_planning_authorities,o=Ie(Ke);re(l,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,r,o,s]}class du extends Y{constructor(e){super(),K(this,e,gu,_u,J,{})}}function hu(l){let e,n,t;return e=new Fe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function bu(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vu(l){let e,n,t,r,o,s,f;return t=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[bu]},$$scope:{ctx:l}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function wu(l){let e,n,t;return n=new _e({props:{$$slots:{default:[vu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ku(l){let e,n=l[4].Name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&16&&n!==(n=r[4].Name+"")&&z(t,n)},d(r){r&&p(e)}}}function yu(l){let e,n;return e=new ue({props:{$$slots:{default:[ku,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Su(l){let e,n,t,r;const o=[q(Ze),{sourceLayer:Ze},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[yu]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ge({props:s}),e.$on("click",Tu);const f=[q(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),r=!0},p(a,u){const c=u&3?ne(o,[u&0&&fe(q(Ze)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&3?ne(f,[u&0&&fe(q(`${Ze}-outline`)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Cu(l){let e,n,t,r,o;function s(i){l[3](i)}let f={$$slots:{right:[wu],default:[hu]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${be()}/v1/${Ze}.pmtiles`,$$slots:{default:[Su]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Ze="parliamentary_constituencies";function Tu(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ou(l,e,n){let t,r=Z.parliamentary_constituencies,o=Ie(Ze);re(l,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,r,o,s]}class Lu extends Y{constructor(e){super(),K(this,e,Ou,Cu,J,{})}}function Au(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Iu(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nu(l){let e,n,t,r,o,s,f,i,a;return t=new ee({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Iu]},$$scope:{ctx:l}}}),i=new Re({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        Âµgm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,r),h(e,o),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const m={};c&2048&&(m.$$scope={dirty:c,ctx:u}),t.$set(m)},i(u){a||(g(t.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(i,u)}}}function Pu(l){let e,n,t;return n=new _e({props:{$$slots:{default:[Nu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function zr(l){let e,n,t,r,o=l[3](l[0])+"",s,f,i,a,u,c,m,_,S,C,y,N,D;function I(L){l[7](L)}let A={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return l[0]!==void 0&&(A.value=l[0]),e=new dt({props:A}),W.push(()=>V(e,"value",I)),{c(){b(e.$$.fragment),t=O(),r=T("p"),s=k(o),f=O(),i=T("div"),a=T("label"),u=k(`Opacity
      `),c=T("input"),m=O(),_=T("img"),G(c,"type","range"),G(c,"min","0"),G(c,"max","100"),fn(_.src,S=l[5](l[0]))||G(_,"src",S),G(_,"width",150),G(_,"alt",C=`Legend for ${l[0]} layer`)},m(L,M){v(e,L,M),$(L,t,M),$(L,r,M),h(r,s),$(L,f,M),$(L,i,M),h(i,a),h(a,u),h(a,c),tt(c,l[2]),$(L,m,M),$(L,_,M),y=!0,N||(D=[rt(c,"change",l[8]),rt(c,"input",l[8])],N=!0)},p(L,M){const E={};!n&&M&1&&(n=!0,E.value=L[0],X(()=>n=!1)),e.$set(E),(!y||M&1)&&o!==(o=L[3](L[0])+"")&&z(s,o),M&4&&tt(c,L[2]),(!y||M&1&&!fn(_.src,S=L[5](L[0])))&&G(_,"src",S),(!y||M&1&&C!==(C=`Legend for ${L[0]} layer`))&&G(_,"alt",C)},i(L){y||(g(e.$$.fragment,L),y=!0)},o(L){d(e.$$.fragment,L),y=!1},d(L){L&&(p(t),p(r),p(f),p(i),p(m),p(_)),w(e,L),N=!1,no(D)}}}function Mu(l){let e,n;const t=[q("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Go({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&6?ne(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Fu(l){let e,n,t,r,o,s;function f(u){l[6](u)}let i={$$slots:{right:[Pu],default:[Au]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=l[1]&&zr(l);return o=new us({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Mu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),v(o,u,c),s=!0},p(u,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,m.checked=u[1],X(()=>n=!1)),e.$set(m),u[1]?a?(a.p(u,c),c&2&&g(a,1)):(a=zr(u),a.c(),g(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const _={};c&1&&(_.tiles=[u[4](u[0])]),c&2054&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),w(e,u),a&&a.d(u),w(o,u)}}}function Eu(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function f(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(S){return t[1]}function a(S){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${f()}?bbox={bbox-epsg-3857}&${C}`}function u(S){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${f()}?${C}`}function c(S){r=S,n(1,r)}function m(S){s=S,n(0,s)}function _(){o=en(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s])},[s,r,o,i,a,u,c,m,_]}class Du extends Y{constructor(e){super(),K(this,e,Eu,Fu,J,{})}}function ju(l){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ru(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zu(l){let e,n,t,r,o,s,f,i,a;return o=new ee({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Ru]},$$scope:{ctx:l}}}),i=new Re({}),{c(){e=T("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=O(),t=T("p"),r=k("Data from June 2019, produced by "),b(o.$$.fragment),s=k(". See there for methodology details"),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),h(t,r),v(o,t,null),h(t,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const m={};c&32&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(f)),w(o),w(i,u)}}}function Bu(l){let e,n,t;return n=new _e({props:{$$slots:{default:[zu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Br(l){let e,n;return e=new Ue({props:{colorScale:l[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hu(l){let e,n=l[4].noiseclass+"",t,r,o=Hr(l[4].noiseclass)+"",s,f;return{c(){e=T("p"),t=k(n),r=k(" dB ("),s=k(o),f=k(")")},m(i,a){$(i,e,a),h(e,t),h(e,r),h(e,s),h(e,f)},p(i,a){a&16&&n!==(n=i[4].noiseclass+"")&&z(t,n),a&16&&o!==(o=Hr(i[4].noiseclass)+"")&&z(s,o)},d(i){i&&p(e)}}}function qu(l){let e,n;return e=new ue({props:{$$slots:{default:[Hu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gu(l){let e,n;const t=[q(It),{sourceLayer:It},{paint:{"fill-color":mt(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][0],"65.0-69.9":l[1][1],"70.0-74.9":l[1][1],">=75.0":l[1][2]},"red"),"fill-opacity":Q(.5,.8)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[qu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Ge({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&fe(q(It)),s&0&&{sourceLayer:It},s&2&&{paint:{"fill-color":mt(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":Q(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Uu(l){let e,n,t,r,o,s;function f(u){l[3](u)}let i={$$slots:{right:[Bu],default:[ju]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=l[0]&&Br(l);return o=new ye({props:{url:`pmtiles://${be()}/v1/${It}.pmtiles`,$$slots:{default:[Gu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),v(o,u,c),s=!0},p(u,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,m.checked=u[0],X(()=>n=!1)),e.$set(m),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=Br(u),a.c(),g(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const _={};c&33&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),w(e,u),a&&a.d(u),w(o,u)}}}let It="road_noise";function Hr(l){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[l]}function Wu(l,e,n){let t,r=[Z.sequential_low_to_high[0],Z.sequential_low_to_high[2],Z.sequential_low_to_high[4]],o=Ie(It);re(l,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,r,o,s]}class Vu extends Y{constructor(e){super(),K(this,e,Wu,Uu,J,{})}}function Xu(l){let e,n,t;return e=new Fe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Ju(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yu(l){let e,n,t,r,o,s,f;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ju]},$$scope:{ctx:l}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Ku(l){let e,n,t;return n=new _e({props:{$$slots:{default:[Yu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Zu(l){let e,n=l[4].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&16&&n!==(n=r[4].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Qu(l){let e,n;return e=new ue({props:{$$slots:{default:[Zu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xu(l){let e,n,t,r;const o=[q(Qe),{sourceLayer:Qe},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Qu]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ge({props:s}),e.$on("click",tc);const f=[q(`${Qe}-outline`),{sourceLayer:Qe},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new Le({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),r=!0},p(a,u){const c=u&3?ne(o,[u&0&&fe(q(Qe)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&3?ne(f,[u&0&&fe(q(`${Qe}-outline`)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function ec(l){let e,n,t,r,o;function s(i){l[3](i)}let f={$$slots:{right:[Ku],default:[Xu]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${be()}/v1/${Qe}.pmtiles`,$$slots:{default:[xu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Qe="wards";function tc(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function nc(l,e,n){let t,r=Z.wards,o=Ie(Qe);re(l,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,r,o,s]}class rc extends Y{constructor(e){super(),K(this,e,nc,ec,J,{})}}function lc(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oc(l){let e,n,t,r;return t=new ee({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[lc]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),r=!0},p(o,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:o}),t.$set(f)},i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&p(e),w(t)}}}class st extends Y{constructor(e){super(),K(this,e,null,oc,J,{})}}function sc(l){let e,n,t;return e=new Fe({props:{color:Z.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function ic(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ac(l){let e,n,t,r,o,s,f,i,a;return o=new ee({props:{href:"https://gtfs.org",$$slots:{default:[ic]},$$scope:{ctx:l}}}),i=new st({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=T("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),h(t,r),v(o,t,null),h(t,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const m={};c&16&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(f)),w(o),w(i,u)}}}function fc(l){let e,n,t;return n=new _e({props:{$$slots:{default:[ac]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function uc(l){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cc(l){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $c(l){let e;function n(o,s){return o[3].has_bus_lane?cc:uc}let t=n(l),r=t(l);return{c(){r.c(),e=Me()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function pc(l){let e,n;return e=new ue({props:{$$slots:{default:[$c,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mc(l){let e,n;const t=[q(Nt),{sourceLayer:Nt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[pc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&fe(q(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function _c(l){let e,n,t,r,o;function s(i){l[2](i)}let f={$$slots:{right:[fc],default:[sc]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${be()}/v1/${Nt}.pmtiles`,$$slots:{default:[mc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Nt="bus_routes";function gc(l,e,n){let t,r=Ie(Nt);re(l,r,s=>n(0,t=s));function o(s){t=s,r.set(t)}return[t,r,o]}class dc extends Y{constructor(e){super(),K(this,e,gc,_c,J,{})}}function qr(l){const e=Oc(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function Gr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function hc(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bc(l){let e,n,t,r,o,s,f,i;return f=new st({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=O(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=O(),b(f.$$.fragment)},m(a,u){$(a,e,u),$(a,n,u),$(a,t,u),$(a,r,u),$(a,o,u),$(a,s,u),v(f,a,u),i=!0},p:te,i(a){i||(g(f.$$.fragment,a),i=!0)},o(a){d(f.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),w(f,a)}}}function vc(l){let e,n,t;return n=new _e({props:{$$slots:{default:[bc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Ur(l){let e,n,t;return n=new ot({props:{$$slots:{default:[kc]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),Te(e,"border","1px solid black"),Te(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function wc(l){let e,n,t=l[9]+"",r,o,s;return e=new Fe({props:{color:l[10]}}),{c(){b(e.$$.fragment),n=O(),r=k(t),o=O()},m(f,i){v(e,f,i),$(f,n,i),$(f,r,i),$(f,o,i),s=!0},p:te,i(f){s||(g(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(r),p(o)),w(e,f)}}}function Wr(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[wc]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new oe({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){l=s;const i={};f&8192&&(i.$$scope={dirty:f,ctx:l}),!n&&f&6&&(n=!0,i.checked=l[1][l[6]],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function kc(l){let e,n,t=je(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Wr(Gr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Me()},m(s,f){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,f);$(s,e,f),n=!0},p(s,f){if(f&6){t=je(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Gr(s,t,i);r[i]?(r[i].p(a,f),g(r[i],1)):(r[i]=Wr(a),r[i].c(),g(r[i],1),r[i].m(e.parentNode,e))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)g(r[f]);n=!0}},o(s){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)d(r[f]);n=!1},d(s){s&&p(e),$t(r,s)}}}function yc(l){qr(l);let e,n=l[6]+"",t,r,o,s,f,i=l[7]+"",a,u,c,m,_=l[8]+"",S;return{c(){e=T("h2"),t=k(n),r=O(),o=T("p"),s=k("Direction: "),f=T("b"),a=O(),u=T("p"),c=k("Width: "),m=T("b"),S=k(_)},m(C,y){$(C,e,y),h(e,t),$(C,r,y),$(C,o,y),h(o,s),h(o,f),f.innerHTML=i,$(C,a,y),$(C,u,y),h(u,c),h(u,m),h(m,S)},p(C,y){qr(C),y&32&&n!==(n=C[6]+"")&&z(t,n),y&32&&i!==(i=C[7]+"")&&(f.innerHTML=i),y&32&&_!==(_=C[8]+"")&&z(S,_)},d(C){C&&(p(e),p(r),p(o),p(a),p(u))}}}function Sc(l){let e,n;return e=new ue({props:{$$slots:{default:[yc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Cc(l){let e,n;const t=[q(Jt),{sourceLayer:Jt},{paint:{"line-color":mt(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":qe,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Vr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[Sc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),e.$on("click",Lc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&fe(q(Jt)),s&0&&{sourceLayer:Jt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Vr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Tc(l){let e,n,t,r,o,s;function f(u){l[3](u)}let i={$$slots:{right:[vc],default:[hc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=l[0]&&Ur(l);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Jt}.pmtiles`,$$slots:{default:[Cc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),v(o,u,c),s=!0},p(u,[c]){const m={};c&8192&&(m.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,m.checked=u[0],X(()=>n=!1)),e.$set(m),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=Ur(u),a.c(),g(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const _={};c&8195&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),w(e,u),a&&a.d(u),w(o,u)}}}let Jt="cycle_paths";function Oc(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function Lc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Vr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function Ac(l,e,n){let t=[["track","Separated tracks",Z.cycle_paths.track],["lane","Unprotected lanes",Z.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function f(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,f]}class Ic extends Y{constructor(e){super(),K(this,e,Ac,Tc,J,{})}}function Nc(l){let e,n,t;return e=new Fe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Pc(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mc(l){let e,n,t,r,o,s,f;return t=new ee({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Pc]},$$scope:{ctx:l}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),r=k(", as of September 2021."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Fc(l){let e,n,t;return n=new _e({props:{$$slots:{default:[Mc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Ec(l){let e,n=(l[4].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&16&&n!==(n=(r[4].name??"Unknown MRN road")+"")&&z(t,n)},d(r){r&&p(e)}}}function Dc(l){let e,n;return e=new ue({props:{$$slots:{default:[Ec,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function jc(l){let e,n;const t=[q(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Dc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&fe(q(Pt)),s&0&&{sourceLayer:Pt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Rc(l){let e,n,t,r,o;function s(i){l[3](i)}let f={$$slots:{right:[Fc],default:[Nc]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${be()}/v1/${Pt}.pmtiles`,$$slots:{default:[jc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Pt="mrn";function zc(l,e,n){let t,r=Z.mrn,o=Ie(Pt);re(l,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,r,o,s]}class Bc extends Y{constructor(e){super(),K(this,e,zc,Rc,J,{})}}function Hc(l){let e,n,t;return e=new Fe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Strategic Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function qc(l){let e;return{c(){e=k(`OS Open Roads
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gc(l){let e,n,t,r,o,s,f;return t=new ee({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[qc]},$$scope:{ctx:l}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Uc(l){let e,n,t;return n=new _e({props:{$$slots:{default:[Gc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Wc(l){let e,n=(l[4].name??"Unknown SRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&16&&n!==(n=(r[4].name??"Unknown SRN road")+"")&&z(t,n)},d(r){r&&p(e)}}}function Vc(l){let e,n;return e=new ue({props:{$$slots:{default:[Wc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Xc(l){let e,n;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Vc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&fe(q(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Jc(l){let e,n,t,r,o;function s(i){l[3](i)}let f={$$slots:{right:[Uc],default:[Hc]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${be()}/v1/${Mt}.pmtiles`,$$slots:{default:[Xc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Mt="srn";function Yc(l,e,n){let t,r=Z.srn,o=Ie(Mt);re(l,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,r,o,s]}class Kc extends Y{constructor(e){super(),K(this,e,Yc,Jc,J,{})}}function Zc(l){let e,n,t;return e=new Fe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Qc(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xc(l){let e,n,t,r,o,s,f;return t=new ee({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Qc]},$$scope:{ctx:l}}}),s=new Re({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function e$(l){let e,n,t;return n=new _e({props:{$$slots:{default:[xc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Xr(l){let e,n,t,r=l[4].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&r!==(r=s[4].Desc_+"")&&z(o,r)},d(s){s&&p(e)}}}function Jr(l){let e,n,t,r=l[4].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&r!==(r=s[4].Greenway+"")&&z(o,r)},d(s){s&&p(e)}}}function Yr(l){let e,n,t,r=l[4].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&r!==(r=s[4].RouteType+"")&&z(o,r)},d(s){s&&p(e)}}}function Kr(l){let e,n,t,r=l[4].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&r!==(r=s[4].RouteNo+"")&&z(o,r)},d(s){s&&p(e)}}}function Zr(l){let e,n,t,r=l[4].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&r!==(r=s[4].RouteCat+"")&&z(o,r)},d(s){s&&p(e)}}}function Qr(l){let e,n,t,r=l[4].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&r!==(r=s[4].OpenStatus+"")&&z(o,r)},d(s){s&&p(e)}}}function xr(l){let e,n,t,r=l[4].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&r!==(r=s[4].Surface+"")&&z(o,r)},d(s){s&&p(e)}}}function el(l){let e,n,t,r=l[4].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&r!==(r=s[4].Quality+"")&&z(o,r)},d(s){s&&p(e)}}}function tl(l){let e,n,t,r=l[4].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&16&&r!==(r=s[4].RoadClass+"")&&z(o,r)},d(s){s&&p(e)}}}function t$(l){let e,n,t,r,o,s,f,i,a,u=l[4].Desc_&&Xr(l),c=l[4].Greenway&&Jr(l),m=l[4].RouteType&&Yr(l),_=l[4].RouteNo&&Kr(l),S=l[4].RouteCat&&Zr(l),C=l[4].OpenStatus&&Qr(l),y=l[4].Surface&&xr(l),N=l[4].Quality&&el(l),D=l[4].RoadClass&&tl(l);return{c(){e=T("ul"),u&&u.c(),n=O(),c&&c.c(),t=O(),m&&m.c(),r=O(),_&&_.c(),o=O(),S&&S.c(),s=O(),C&&C.c(),f=O(),y&&y.c(),i=O(),N&&N.c(),a=O(),D&&D.c()},m(I,A){$(I,e,A),u&&u.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),m&&m.m(e,null),h(e,r),_&&_.m(e,null),h(e,o),S&&S.m(e,null),h(e,s),C&&C.m(e,null),h(e,f),y&&y.m(e,null),h(e,i),N&&N.m(e,null),h(e,a),D&&D.m(e,null)},p(I,A){I[4].Desc_?u?u.p(I,A):(u=Xr(I),u.c(),u.m(e,n)):u&&(u.d(1),u=null),I[4].Greenway?c?c.p(I,A):(c=Jr(I),c.c(),c.m(e,t)):c&&(c.d(1),c=null),I[4].RouteType?m?m.p(I,A):(m=Yr(I),m.c(),m.m(e,r)):m&&(m.d(1),m=null),I[4].RouteNo?_?_.p(I,A):(_=Kr(I),_.c(),_.m(e,o)):_&&(_.d(1),_=null),I[4].RouteCat?S?S.p(I,A):(S=Zr(I),S.c(),S.m(e,s)):S&&(S.d(1),S=null),I[4].OpenStatus?C?C.p(I,A):(C=Qr(I),C.c(),C.m(e,f)):C&&(C.d(1),C=null),I[4].Surface?y?y.p(I,A):(y=xr(I),y.c(),y.m(e,i)):y&&(y.d(1),y=null),I[4].Quality?N?N.p(I,A):(N=el(I),N.c(),N.m(e,a)):N&&(N.d(1),N=null),I[4].RoadClass?D?D.p(I,A):(D=tl(I),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(I){I&&p(e),u&&u.d(),c&&c.d(),m&&m.d(),_&&_.d(),S&&S.d(),C&&C.d(),y&&y.d(),N&&N.d(),D&&D.d()}}}function n$(l){let e,n;return e=new ue({props:{$$slots:{default:[t$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function r$(l){let e,n;const t=[q(Ft),{sourceLayer:Ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[n$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&fe(q(Ft)),s&0&&{sourceLayer:Ft},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function l$(l){let e,n,t,r,o;function s(i){l[3](i)}let f={$$slots:{right:[e$],default:[Zc]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${be()}/v1/${Ft}.pmtiles`,$$slots:{default:[r$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Ft="national_cycle_network";function o$(l,e,n){let t,r=Z.national_cycle_network,o=Ie(Ft);re(l,o,f=>n(0,t=f));function s(f){t=f,o.set(t)}return[t,r,o,s]}class s$ extends Y{constructor(e){super(),K(this,e,o$,l$,J,{})}}function nl(l,e,n){const t=l.slice();return t[6]=e[n][0],t[7]=e[n][1],t[8]=e[n][2],t}function i$(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function a$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function f$(l){let e,n,t,r,o,s,f,i,a,u,c;return a=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[a$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,n=O(),t=T("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,r=O(),o=T("p"),o.textContent="Data valid as of 1 January, 2024",s=O(),f=T("p"),i=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(a.$$.fragment),u=k(".")},m(m,_){$(m,e,_),$(m,n,_),$(m,t,_),$(m,r,_),$(m,o,_),$(m,s,_),$(m,f,_),h(f,i),v(a,f,null),h(f,u),c=!0},p(m,_){const S={};_&2048&&(S.$$scope={dirty:_,ctx:m}),a.$set(S)},i(m){c||(g(a.$$.fragment,m),c=!0)},o(m){d(a.$$.fragment,m),c=!1},d(m){m&&(p(e),p(n),p(t),p(r),p(o),p(s),p(f)),w(a)}}}function u$(l){let e,n,t;return n=new _e({props:{$$slots:{default:[f$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function rl(l){let e,n;return e=new Ue({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function c$(l){let e,n,t=$n(l[5].angle+l[8])+"",r;return{c(){e=T("p"),n=new bt(!1),r=k(` side of the road: no pavement
          `),n.a=r},m(o,s){$(o,e,s),n.m(t,e),h(e,r)},p(o,s){s&32&&t!==(t=$n(o[5].angle+o[8])+"")&&n.p(t)},d(o){o&&p(e)}}}function $$(l){let e,n,t=$n(l[5].angle+l[8])+"",r,o,s=l[6]+"",f,i,a,u=l[7]+"",c,m;return{c(){e=T("p"),n=new bt(!1),r=k(` side of the road:
            `),o=T("b"),f=k(s),i=k(`
            m average,
            `),a=T("b"),c=k(u),m=k(`
            m minimum
          `),n.a=r},m(_,S){$(_,e,S),n.m(t,e),h(e,r),h(e,o),h(o,f),h(e,i),h(e,a),h(a,c),h(e,m)},p(_,S){S&32&&t!==(t=$n(_[5].angle+_[8])+"")&&n.p(t),S&32&&s!==(s=_[6]+"")&&z(f,s),S&32&&u!==(u=_[7]+"")&&z(c,u)},d(_){_&&p(e)}}}function ll(l){let e;function n(o,s){return o[6]?$$:c$}let t=n(l),r=t(l);return{c(){r.c(),e=Me()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function p$(l){let e,n=je([[l[5].left_average,l[5].left_minimum,-90],[l[5].right_average,l[5].right_minimum,90]]),t=[];for(let r=0;r<2;r+=1)t[r]=ll(nl(l,n,r));return{c(){for(let r=0;r<2;r+=1)t[r].c();e=Me()},m(r,o){for(let s=0;s<2;s+=1)t[s]&&t[s].m(r,o);$(r,e,o)},p(r,o){if(o&32){n=je([[r[5].left_average,r[5].left_minimum,-90],[r[5].right_average,r[5].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=nl(r,n,s);t[s]?t[s].p(f,o):(t[s]=ll(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(r){r&&p(e),$t(t,r)}}}function m$(l){let e,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[p$,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2080&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _$(l){let e,n;const t=[q(Et),{sourceLayer:Et},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],l[2],l[1]),"line-width":qe,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[m$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&fe(q(Et)),s&0&&{sourceLayer:Et},t[2],t[3],s&6&&{paint:{"line-color":Ae(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":qe,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&2048&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function g$(l){let e,n,t,r,o,s;function f(u){l[4](u)}let i={$$slots:{right:[u$],default:[i$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=l[0]&&rl(l);return o=new ye({props:{url:`pmtiles://${mn()}/v1/${Et}.pmtiles`,$$slots:{default:[_$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),v(o,u,c),s=!0},p(u,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,m.checked=u[0],X(()=>n=!1)),e.$set(m),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=rl(u),a.c(),g(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const _={};c&2049&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),w(e,u),a&&a.d(u),w(o,u)}}}let Et="pavement_widths";function d$(l){let e=Math.floor((l+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function $n(l){return`${d$(l)} <span style="display: inline-block; rotate: ${l}deg">â¬†</span>`}function h$(l,e,n){let t,r=Z.sequential_low_to_high,o=[0,2,4,6,8,13],s=Ie(Et);re(l,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,r,o,s,f]}class b$ extends Y{constructor(e){super(),K(this,e,h$,g$,J,{})}}function v$(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function w$(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function k$(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function y$(l){let e,n,t,r,o,s,f,i,a,u,c;return f=new ee({props:{href:"https://www.pct.bike",$$slots:{default:[w$]},$$scope:{ctx:l}}}),a=new ee({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[k$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=O(),o=T("p"),s=k("See "),b(f.$$.fragment),i=k(" and "),b(a.$$.fragment),u=k(" for details on methodology and data sources.")},m(m,_){$(m,e,_),$(m,n,_),$(m,t,_),$(m,r,_),$(m,o,_),h(o,s),v(f,o,null),h(o,i),v(a,o,null),h(o,u),c=!0},p(m,_){const S={};_&1024&&(S.$$scope={dirty:_,ctx:m}),f.$set(S);const C={};_&1024&&(C.$$scope={dirty:_,ctx:m}),a.$set(C)},i(m){c||(g(f.$$.fragment,m),g(a.$$.fragment,m),c=!0)},o(m){d(f.$$.fragment,m),d(a.$$.fragment,m),c=!1},d(m){m&&(p(e),p(n),p(t),p(r),p(o)),w(f),w(a)}}}function S$(l){let e,n,t;return n=new _e({props:{$$slots:{default:[y$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ol(l){let e,n,t,r,o,s,f,i;e=new Ue({props:{colorScale:l[3],limits:l[4]}});function a(_){l[7](_)}let u={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(u.value=l[0]),t=new ro({props:u}),W.push(()=>V(t,"value",a));function c(_){l[8](_)}let m={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(m.value=l[1]),s=new dt({props:m}),W.push(()=>V(s,"value",c)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment)},m(_,S){v(e,_,S),$(_,n,S),v(t,_,S),$(_,o,S),v(s,_,S),i=!0},p(_,S){const C={};!r&&S&1&&(r=!0,C.value=_[0],X(()=>r=!1)),t.$set(C);const y={};!f&&S&2&&(f=!0,y.value=_[1],X(()=>f=!1)),s.$set(y)},i(_){i||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(s.$$.fragment,_),i=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(s.$$.fragment,_),i=!1},d(_){_&&(p(n),p(o)),w(e,_),w(t,_),w(s,_)}}}function C$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new bt(!1),t=Me(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function T$(l){let e,n;return e=new ue({props:{$$slots:{default:[C$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function O$(l){let e,n;const t=[q(at),{sourceLayer:at},{paint:{"line-color":Ae(["get",l[1]],l[4],l[3]),"line-width":qe,"line-opacity":Q(1,.5)}},{layout:{visibility:l[2]&&l[0]==at?"visible":"none"}}];let r={$$slots:{default:[T$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&31?ne(t,[s&0&&fe(q(at)),s&0&&{sourceLayer:at},s&26&&{paint:{"line-color":Ae(["get",o[1]],o[4],o[3]),"line-width":qe,"line-opacity":Q(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==at?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function L$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new bt(!1),t=Me(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function A$(l){let e,n;return e=new ue({props:{$$slots:{default:[L$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function I$(l){let e,n;const t=[q(gt),{sourceLayer:gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["get",l[1]],l[4],l[3]),"line-width":qe,"line-opacity":Q(1,.5)}},{layout:{visibility:l[2]&&l[0]==gt?"visible":"none"}}];let r={$$slots:{default:[A$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&31?ne(t,[s&0&&fe(q(gt)),s&0&&{sourceLayer:gt},t[2],t[3],s&26&&{paint:{"line-color":Ae(["get",o[1]],o[4],o[3]),"line-width":qe,"line-opacity":Q(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==gt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function N$(l){let e,n,t,r,o,s,f,i;function a(m){l[6](m)}let u={$$slots:{right:[S$],default:[v$]},$$scope:{ctx:l}};l[2]!==void 0&&(u.checked=l[2]),e=new oe({props:u}),W.push(()=>V(e,"checked",a));let c=l[2]&&ol(l);return o=new ye({props:{url:`pmtiles://${be()}/v1/${at}.pmtiles`,$$slots:{default:[O$]},$$scope:{ctx:l}}}),f=new ye({props:{url:`pmtiles://${be()}/v1/${gt}.pmtiles`,$$slots:{default:[I$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),c&&c.c(),r=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment)},m(m,_){v(e,m,_),$(m,t,_),c&&c.m(m,_),$(m,r,_),v(o,m,_),$(m,s,_),v(f,m,_),i=!0},p(m,[_]){const S={};_&1024&&(S.$$scope={dirty:_,ctx:m}),!n&&_&4&&(n=!0,S.checked=m[2],X(()=>n=!1)),e.$set(S),m[2]?c?(c.p(m,_),_&4&&g(c,1)):(c=ol(m),c.c(),g(c,1),c.m(r.parentNode,r)):c&&($e(),d(c,1,1,()=>{c=null}),pe());const C={};_&1031&&(C.$$scope={dirty:_,ctx:m}),o.$set(C);const y={};_&1031&&(y.$$scope={dirty:_,ctx:m}),f.$set(y)},i(m){i||(g(e.$$.fragment,m),g(c),g(o.$$.fragment,m),g(f.$$.fragment,m),i=!0)},o(m){d(e.$$.fragment,m),d(c),d(o.$$.fragment,m),d(f.$$.fragment,m),i=!1},d(m){m&&(p(t),p(r),p(s)),w(e,m),c&&c.d(m),w(o,m),w(f,m)}}}let at="pct_commute",gt="pct_school";function P$(l,e,n){let t=Z.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=at,s="baseline",f=!1;function i(m){let _=m.baseline,S=m.gov_target,C=m.go_dutch,y=`<h2>Trip purpose: ${o==at?"commuting":"school"}</h2>`;if(y+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)y+=`<p>Government target (2025): <b>${S.toLocaleString()}</b></p>`,y+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let N=(S/_).toFixed(1),D=(C/_).toFixed(1);y+=`<p>Government target (2025): ${S.toLocaleString()} (<b>${N}x</b> of baseline)</p>`,y+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return y}function a(m){f=m,n(2,f)}function u(m){o=m,n(0,o)}function c(m){s=m,n(1,s)}return[o,s,f,t,r,i,a,u,c]}class M$ extends Y{constructor(e){super(),K(this,e,P$,N$,J,{})}}function F$(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function E$(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function D$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function j$(l){let e,n,t,r,o,s,f,i,a,u,c,m;return t=new ee({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[E$]},$$scope:{ctx:l}}}),u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[D$]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",f=O(),i=T("p"),a=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),c=k(".")},m(_,S){$(_,e,S),h(e,n),v(t,e,null),h(e,r),$(_,o,S),$(_,s,S),$(_,f,S),$(_,i,S),h(i,a),v(u,i,null),h(i,c),m=!0},p(_,S){const C={};S&256&&(C.$$scope={dirty:S,ctx:_}),t.$set(C);const y={};S&256&&(y.$$scope={dirty:S,ctx:_}),u.$set(y)},i(_){m||(g(t.$$.fragment,_),g(u.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(u.$$.fragment,_),m=!1},d(_){_&&(p(e),p(o),p(s),p(f),p(i)),w(t),w(u)}}}function R$(l){let e,n,t;return n=new _e({props:{$$slots:{default:[j$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function sl(l){let e,n,t,r,o;e=new Ue({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let f={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(f.value=l[0]),t=new ro({props:f}),W.push(()=>V(t,"value",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const u={};!r&&a&1&&(r=!0,u.value=i[0],X(()=>r=!1)),t.$set(u)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function z$(l){let e,n,t=l[7].indicative_mph+"",r,o,s,f,i,a=l[7].highest_mph+"",u,c,m=l[4][l[7].highest_description]+"",_,S;return{c(){e=T("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=O(),f=T("p"),i=k("Highest average speed: "),u=k(a),c=k(" mph (during "),_=k(m),S=k(")")},m(C,y){$(C,e,y),h(e,n),h(e,r),h(e,o),$(C,s,y),$(C,f,y),h(f,i),h(f,u),h(f,c),h(f,_),h(f,S)},p(C,y){y&128&&t!==(t=C[7].indicative_mph+"")&&z(r,t),y&128&&a!==(a=C[7].highest_mph+"")&&z(u,a),y&128&&m!==(m=C[4][C[7].highest_description]+"")&&z(_,m)},d(C){C&&(p(e),p(s),p(f))}}}function B$(l){let e,n;return e=new ue({props:{$$slots:{default:[z$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function H$(l){let e,n;const t=[q(Yt),{sourceLayer:Yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["get",l[0]],l[3],l[2]),"line-width":qe,"line-opacity":Q(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[B$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&15?ne(t,[s&0&&fe(q(Yt)),s&0&&{sourceLayer:Yt},t[2],t[3],s&13&&{paint:{"line-color":Ae(["get",o[0]],o[3],o[2]),"line-width":qe,"line-opacity":Q(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function q$(l){let e,n,t,r,o,s;function f(u){l[5](u)}let i={$$slots:{right:[R$],default:[F$]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=l[1]&&sl(l);return o=new ye({props:{url:`pmtiles://${mn()}/v1/${Yt}.pmtiles`,$$slots:{default:[H$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),v(o,u,c),s=!0},p(u,[c]){const m={};c&256&&(m.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,m.checked=u[1],X(()=>n=!1)),e.$set(m),u[1]?a?(a.p(u,c),c&2&&g(a,1)):(a=sl(u),a.c(),g(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const _={};c&259&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),w(e,u),a&&a.d(u),w(o,u)}}}let Yt="road_speeds";function G$(l,e,n){let t=Z.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,f={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(u){s=u,n(1,s)}function a(u){o=u,n(0,o)}return[o,s,t,r,f,i,a]}class U$ extends Y{constructor(e){super(),K(this,e,G$,q$,J,{})}}function W$(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function V$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function X$(l){let e,n,t,r,o,s,f,i,a;return f=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[V$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",r=O(),o=T("p"),s=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,r,c),$(u,o,c),h(o,s),v(f,o,null),h(o,i),a=!0},p(u,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:u}),f.$set(m)},i(u){a||(g(f.$$.fragment,u),a=!0)},o(u){d(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(r),p(o)),w(f)}}}function J$(l){let e,n,t;return n=new _e({props:{$$slots:{default:[X$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function il(l){let e,n;return e=new Ue({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Y$(l){let e,n,t,r=l[5].average+"",o,s,f,i,a,u,c=l[5].minimum+"",m,_;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(r),s=k(`
        meters`),f=O(),i=T("p"),a=k("Minimum width: "),u=T("b"),m=k(c),_=k(`
        meters`)},m(S,C){$(S,e,C),h(e,n),h(e,t),h(t,o),h(e,s),$(S,f,C),$(S,i,C),h(i,a),h(i,u),h(u,m),h(i,_)},p(S,C){C&32&&r!==(r=S[5].average+"")&&z(o,r),C&32&&c!==(c=S[5].minimum+"")&&z(m,c)},d(S){S&&(p(e),p(f),p(i))}}}function K$(l){let e,n;return e=new ue({props:{$$slots:{default:[Y$,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Z$(l){let e,n;const t=[q(Dt),{sourceLayer:Dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ae(["get","average"],l[2],l[1]),"line-width":qe,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[K$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&fe(q(Dt)),s&0&&{sourceLayer:Dt},t[2],t[3],s&6&&{paint:{"line-color":Ae(["get","average"],o[2],o[1]),"line-width":qe,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Q$(l){let e,n,t,r,o,s;function f(u){l[4](u)}let i={$$slots:{right:[J$],default:[W$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=l[0]&&il(l);return o=new ye({props:{url:`pmtiles://${mn()}/v1/${Dt}.pmtiles`,$$slots:{default:[Z$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),v(o,u,c),s=!0},p(u,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,m.checked=u[0],X(()=>n=!1)),e.$set(m),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=il(u),a.c(),g(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const _={};c&65&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),w(e,u),a&&a.d(u),w(o,u)}}}let Dt="road_widths";function x$(l,e,n){let t,r=Z.sequential_low_to_high,o=[0,5,10,15,20,100],s=Ie(Dt);re(l,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,r,o,s,f]}class ep extends Y{constructor(e){super(),K(this,e,x$,Q$,J,{})}}function tp(l){let e,n,t;return e=new Fe({props:{color:Z.trams}}),{c(){b(e.$$.fragment),n=k(`
  Trams`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function np(l){let e,n,t,r;return t=new st({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:te,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function rp(l){let e,n,t;return n=new _e({props:{$$slots:{default:[np]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function lp(l){let e,n;const t=[q(jt),{sourceLayer:jt},{paint:{"line-color":Z.trams,"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Le({props:r}),e.$on("click",sp),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&fe(q(jt)),s&0&&{sourceLayer:jt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function op(l){let e,n,t,r,o;function s(i){l[2](i)}let f={$$slots:{right:[rp],default:[tp]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${be()}/v1/${jt}.pmtiles`,$$slots:{default:[lp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let jt="trams";function sp(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function ip(l,e,n){let t,r=Ie(jt);re(l,r,s=>n(0,t=s));function o(s){t=s,r.set(t)}return[t,r,o]}class ap extends Y{constructor(e){super(),K(this,e,ip,op,J,{})}}function fp(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function up(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cp(l){let e,n,t,r,o,s,f,i,a;return t=new ee({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[up]},$$scope:{ctx:l}}}),i=new Re({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=O(),s=T("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,r),$(u,o,c),$(u,s,c),$(u,f,c),v(i,u,c),a=!0},p(u,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:u}),t.$set(m)},i(u){a||(g(t.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(o),p(s),p(f)),w(t),w(i,u)}}}function $p(l){let e,n,t;return n=new _e({props:{$$slots:{default:[cp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function al(l){let e,n,t,r;return t=new Ue({props:{colorScale:l[1],limits:l[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:te,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function pp(l){let e,n,t,r=l[5].stop_name+"",o,s,f,i,a,u=l[5].peak+"",c,m,_,S,C,y=l[5].peak_description+"",N,D,I,A,L,M=l[5].total+"",E,P,R=l[5].total_description+"",U,H;return{c(){e=T("p"),n=k("Stop name: "),t=T("b"),o=k(r),s=O(),f=T("p"),i=k("Peak: "),a=T("b"),c=k(u),m=k(`
        buses during the busiest hour of any day`),_=O(),S=T("p"),C=k("The peak hour is "),N=k(y),D=O(),I=T("p"),A=k("Total buses per day: "),L=T("b"),E=k(M),P=k(`
        (for `),U=k(R),H=k(", the busiest day of the week)")},m(j,F){$(j,e,F),h(e,n),h(e,t),h(t,o),$(j,s,F),$(j,f,F),h(f,i),h(f,a),h(a,c),h(f,m),$(j,_,F),$(j,S,F),h(S,C),h(S,N),$(j,D,F),$(j,I,F),h(I,A),h(I,L),h(L,E),h(I,P),h(I,U),h(I,H)},p(j,F){F&32&&r!==(r=j[5].stop_name+"")&&z(o,r),F&32&&u!==(u=j[5].peak+"")&&z(c,u),F&32&&y!==(y=j[5].peak_description+"")&&z(N,y),F&32&&M!==(M=j[5].total+"")&&z(E,M),F&32&&R!==(R=j[5].total_description+"")&&z(U,R)},d(j){j&&(p(e),p(s),p(f),p(_),p(S),p(D),p(I))}}}function mp(l){let e,n;return e=new ue({props:{$$slots:{default:[pp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _p(l){let e,n;const t=[q(Rt),{sourceLayer:Rt},{paint:{"circle-color":Ae(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[mp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new _t({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&fe(q(Rt)),s&0&&{sourceLayer:Rt},s&6&&{paint:{"circle-color":Ae(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function gp(l){let e,n,t,r,o,s;function f(u){l[4](u)}let i={$$slots:{right:[$p],default:[fp]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=l[0]&&al(l);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Rt}.pmtiles`,$$slots:{default:[_p]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),v(o,u,c),s=!0},p(u,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,m.checked=u[0],X(()=>n=!1)),e.$set(m),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=al(u),a.c(),g(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const _={};c&65&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),w(e,u),a&&a.d(u),w(o,u)}}}let Rt="bus_stops";function dp(l,e,n){let t,r=Z.sequential_low_to_high,o=[0,3,10,20,30,100],s=Ie(Rt);re(l,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,r,o,s,f]}class hp extends Y{constructor(e){super(),K(this,e,dp,gp,J,{})}}function bp(l){let e,n,t;return{c(){e=T("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=rt(e,"change",l[5]),n=!0)},p:te,d(r){r&&p(e),l[7](null),n=!1,t()}}}function fl(l){let e,n;return e=new ot({props:{small:!0,$$slots:{default:[wp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vp(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Fe({props:{color:Kt}}),{c(){b(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(f,i){v(e,f,i),$(f,n,i),$(f,r,i),$(f,o,i),s=!0},p(f,i){(!s||i&4)&&t!==(t=f[2].toLocaleString()+"")&&z(r,t)},i(f){s||(g(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(r),p(o)),w(e,f)}}}function wp(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[vp]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new oe({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&2052&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function kp(l){let e,n,t,r,o,s;e=new On({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[bp]},$$scope:{ctx:l}}}),t=new lo({props:{errorMessage:l[3]}});let f=l[2]>0&&fl(l);return{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),f&&f.c(),o=Me()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,r,a),f&&f.m(i,a),$(i,o,a),s=!0},p(i,a){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?f?(f.p(i,a),a&4&&g(f,1)):(f=fl(i),f.c(),g(f,1),f.m(o.parentNode,o)):f&&($e(),d(f,1,1,()=>{f=null}),pe())},i(i){s||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(f),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(f),s=!1},d(i){i&&(p(n),p(r),p(o)),w(e,i),w(t,i),f&&f.d(i)}}}function yp(l){let e,n,t=l[10].critical_type+"",r,o,s,f,i,a=l[10].location_description+"",u,c,m,_,S,C=l[10].notes+"",y,N,D,I,A,L,M,E=l[10].id+"",P,R,U,H,j,F=(l[10].inspector??"???")+"",B,se,ie,Se=l[10].submission_time+"",he,Ce,ae,Pe,Oe,ve=l[10].scheme_reference+"",le,me,de,we=l[10].current_design_stage+"",ge;return{c(){e=T("div"),n=T("h2"),r=k(t),o=O(),s=T("p"),f=T("u"),f.textContent="Location",i=k(`
          : `),u=k(a),c=O(),m=T("p"),_=T("u"),_.textContent="Notes",S=k(`
          : `),y=k(C),N=O(),D=T("hr"),I=O(),A=T("p"),L=k("Critical issue ID: "),M=T("b"),P=k(E),R=O(),U=T("p"),H=k("Submitted by "),j=T("b"),B=k(F),se=k(`
          at
          `),ie=T("b"),he=k(Se),Ce=O(),ae=T("p"),Pe=k("For scheme "),Oe=T("b"),le=k(ve),me=k(`
          in stage
          `),de=T("b"),ge=k(we),Te(e,"max-width","30vw")},m(Ne,Ee){$(Ne,e,Ee),h(e,n),h(n,r),h(e,o),h(e,s),h(s,f),h(s,i),h(s,u),h(e,c),h(e,m),h(m,_),h(m,S),h(m,y),h(e,N),h(e,D),h(e,I),h(e,A),h(A,L),h(A,M),h(M,P),h(e,R),h(e,U),h(U,H),h(U,j),h(j,B),h(U,se),h(U,ie),h(ie,he),h(e,Ce),h(e,ae),h(ae,Pe),h(ae,Oe),h(Oe,le),h(ae,me),h(ae,de),h(de,ge)},p(Ne,Ee){Ee&1024&&t!==(t=Ne[10].critical_type+"")&&z(r,t),Ee&1024&&a!==(a=Ne[10].location_description+"")&&z(u,a),Ee&1024&&C!==(C=Ne[10].notes+"")&&z(y,C),Ee&1024&&E!==(E=Ne[10].id+"")&&z(P,E),Ee&1024&&F!==(F=(Ne[10].inspector??"???")+"")&&z(B,F),Ee&1024&&Se!==(Se=Ne[10].submission_time+"")&&z(he,Se),Ee&1024&&ve!==(ve=Ne[10].scheme_reference+"")&&z(le,ve),Ee&1024&&we!==(we=Ne[10].current_design_stage+"")&&z(ge,we)},d(Ne){Ne&&p(e)}}}function Sp(l){let e,n;return e=new ue({props:{$$slots:{default:[yp,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Cp(l){let e,n,t,r,o,s;const f=[q("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":Kt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let _=0;_<f.length;_+=1)i=x(i,f[_]);e=new _t({props:i}),e.$on("click",l[6]);const a=[q("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let u={};for(let _=0;_<a.length;_+=1)u=x(u,a[_]);t=new _n({props:u});const c=[q("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Kt,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let m={$$slots:{default:[Sp]},$$scope:{ctx:l}};for(let _=0;_<c.length;_+=1)m=x(m,c[_]);return o=new _t({props:m}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(_,S){v(e,_,S),$(_,n,S),v(t,_,S),$(_,r,S),v(o,_,S),s=!0},p(_,S){const C=S&2?ne(f,[f[0],f[1],S&0&&{paint:{"circle-color":Kt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},S&2&&{layout:{visibility:_[1]?"visible":"none"}},f[4]]):{};e.$set(C);const y=S&2?ne(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:_[1]?"visible":"none"}}]):{};t.$set(y);const N=S&2?ne(c,[c[0],c[1],c[2],c[3],S&0&&{paint:{"circle-color":Kt,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},S&2&&{layout:{visibility:_[1]?"visible":"none"}}]):{};S&2048&&(N.$$scope={dirty:S,ctx:_}),o.$set(N)},i(_){s||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),s=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(o.$$.fragment,_),s=!1},d(_){_&&(p(n),p(r)),w(e,_),w(t,_),w(o,_)}}}function Tp(l){let e,n,t,r;return e=new ze({props:{label:"Critical Issues",$$slots:{default:[kp]},$$scope:{ctx:l}}}),t=new Ct({props:{id:So,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Cp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const f={};s&2063&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let So="criticals",Kt="red";function Op(l,e,n){let t;re(l,Rn,_=>n(9,t=_));let r,o=!0,s=0,f="",i=Cn();async function a(_){try{n(4,i=await La(r.files[0])),n(2,s=i.features.length),n(3,f="")}catch(S){n(3,f=`The file you loaded is broken: ${S}`)}}async function u(_){let S=await t.getSource(So).getClusterExpansionZoom(_.detail.features[0].properties.cluster_id);t.easeTo({center:_.detail.features[0].geometry.coordinates,zoom:S})}function c(_){W[_?"unshift":"push"](()=>{r=_,n(0,r)})}function m(_){o=_,n(1,o)}return[r,o,s,f,i,a,u,c,m]}class Lp extends Y{constructor(e){super(),K(this,e,Op,Tp,J,{})}}function Ap(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ip(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Np(l){let e,n,t,r,o,s,f;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Ip]},$$scope:{ctx:l}}}),s=new st({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Pp(l){let e,n,t;return n=new _e({props:{$$slots:{default:[Np]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ul(l){let e,n;return e=new Bn({props:{rows:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Mp(l){let e,n=cl(l[4])+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&16&&n!==(n=cl(r[4])+"")&&z(t,n)},d(r){r&&p(e)}}}function Fp(l){let e,n;return e=new ue({props:{$$slots:{default:[Mp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ep(l){let e,n;const t=[q(zt),{sourceLayer:zt},{paint:{"circle-color":mt(["get","crossing"],{traffic_signals:Z.signalized_crossing},Z.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Fp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new _t({props:r}),e.$on("click",jp),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&fe(q(zt)),s&0&&{sourceLayer:zt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Dp(l){let e,n,t,r,o,s;function f(u){l[3](u)}let i={$$slots:{right:[Pp],default:[Ap]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=l[0]&&ul(l);return o=new ye({props:{url:`pmtiles://${be()}/v1/${zt}.pmtiles`,$$slots:{default:[Ep]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),v(o,u,c),s=!0},p(u,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,m.checked=u[0],X(()=>n=!1)),e.$set(m),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=ul(u),a.c(),g(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const _={};c&33&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),w(e,u),a&&a.d(u),w(o,u)}}}let zt="crossings";function cl(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function jp(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function Rp(l,e,n){let t,r=Ie(zt);re(l,r,f=>n(0,t=f));let o=[["Signalized",Z.signalized_crossing],["Other",Z.other_crossing]];function s(f){t=f,r.set(t)}return[t,r,o,s]}class zp extends Y{constructor(e){super(),K(this,e,Rp,Dp,J,{})}}function Bp(l){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hp(l){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qp(l){let e,n,t,r,o,s,f,i,a,u,c,m,_;return f=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Hp]},$$scope:{ctx:l}}}),u=new Re({}),m=new st({}),{c(){e=T("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=O(),t=T("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=O(),o=T("p"),s=k("This layer is built from "),b(f.$$.fragment),i=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=O(),b(u.$$.fragment),c=O(),b(m.$$.fragment)},m(S,C){$(S,e,C),$(S,n,C),$(S,t,C),$(S,r,C),$(S,o,C),h(o,s),v(f,o,null),h(o,i),$(S,a,C),v(u,S,C),$(S,c,C),v(m,S,C),_=!0},p(S,C){const y={};C&64&&(y.$$scope={dirty:C,ctx:S}),f.$set(y)},i(S){_||(g(f.$$.fragment,S),g(u.$$.fragment,S),g(m.$$.fragment,S),_=!0)},o(S){d(f.$$.fragment,S),d(u.$$.fragment,S),d(m.$$.fragment,S),_=!1},d(S){S&&(p(e),p(n),p(t),p(r),p(o),p(a),p(c)),w(f),w(u,S),w(m,S)}}}function Gp(l){let e,n,t;return n=new _e({props:{$$slots:{default:[qp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function $l(l){let e,n;return e=new Ue({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Up(l){let e,n,t,r=Math.abs(l[5].gradient)/100+"",o,s;return{c(){e=T("p"),n=k("Gradient: "),t=T("b"),o=k(r),s=k(`
        %`)},m(f,i){$(f,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(f,i){i&32&&r!==(r=Math.abs(f[5].gradient)/100+"")&&z(o,r)},d(f){f&&p(e)}}}function Wp(l){let e,n;return e=new ue({props:{$$slots:{default:[Up,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Vp(l){let e,n,t,r;const o=[q(xe),{sourceLayer:xe},{manageHoverState:!0},{paint:{"line-color":Ae(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":qe,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[Wp]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Le({props:s});const f=[q(xe+"_arrows"),{sourceLayer:xe},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new _n({props:i}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),r=!0},p(a,u){const c=u&7?ne(o,[u&0&&fe(q(xe)),u&0&&{sourceLayer:xe},o[2],u&6&&{paint:{"line-color":Ae(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":qe,"line-opacity":Q(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&1?ne(f,[u&0&&fe(q(xe+"_arrows")),u&0&&{sourceLayer:xe},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Xp(l){let e,n,t,r,o,s;function f(u){l[4](u)}let i={$$slots:{right:[Gp],default:[Bp]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=l[0]&&$l(l);return o=new ye({props:{url:`pmtiles://${be()}/v1/${xe}.pmtiles`,$$slots:{default:[Vp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),v(o,u,c),s=!0},p(u,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,m.checked=u[0],X(()=>n=!1)),e.$set(m),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=$l(u),a.c(),g(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const _={};c&65&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),w(e,u),a&&a.d(u),w(o,u)}}}let xe="gradient";function Jp(l,e,n){let t,r=Z.gradient_flat_to_steep,o=[0,3,5,8,10,20,100],s=Ie(xe);re(l,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,r,o,s,f]}class Yp extends Y{constructor(e){super(),K(this,e,Jp,Xp,J,{})}}function Kp(l){let e,n,t;return{c(){e=T("img"),t=k(`
  Cycle parking`),fn(e.src,n=No)||G(e,"src",n),G(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:te,d(r){r&&(p(e),p(t))}}}function Zp(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qp(l){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xp(l){let e,n,t,r,o,s,f,i,a,u,c;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Zp]},$$scope:{ctx:l}}}),i=new ee({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Qp]},$$scope:{ctx:l}}}),u=new st({}),{c(){e=T("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),s=T("p"),f=k("Icon from "),b(i.$$.fragment),a=O(),b(u.$$.fragment)},m(m,_){$(m,e,_),h(e,n),v(t,e,null),h(e,r),$(m,o,_),$(m,s,_),h(s,f),v(i,s,null),$(m,a,_),v(u,m,_),c=!0},p(m,_){const S={};_&16&&(S.$$scope={dirty:_,ctx:m}),t.$set(S);const C={};_&16&&(C.$$scope={dirty:_,ctx:m}),i.$set(C)},i(m){c||(g(t.$$.fragment,m),g(i.$$.fragment,m),g(u.$$.fragment,m),c=!0)},o(m){d(t.$$.fragment,m),d(i.$$.fragment,m),d(u.$$.fragment,m),c=!1},d(m){m&&(p(e),p(o),p(s),p(a)),w(t),w(i),w(u,m)}}}function em(l){let e,n,t;return n=new _e({props:{$$slots:{default:[xp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function tm(l){let e,n,t,r=(l[3].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&r!==(r=(s[3].capacity??"unknown")+"")&&z(o,r)},d(s){s&&p(e)}}}function nm(l){let e,n;return e=new ue({props:{$$slots:{default:[tm,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rm(l){let e,n;const t=[q(Bt),{sourceLayer:Bt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[nm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new _n({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&fe(q(Bt)),s&0&&{sourceLayer:Bt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function lm(l){let e,n,t,r,o;function s(i){l[2](i)}let f={$$slots:{right:[em],default:[Kp]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${be()}/v1/${Bt}.pmtiles`,$$slots:{default:[rm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Bt="cycle_parking";function om(l,e,n){let t,r=Ie(Bt);re(l,r,s=>n(0,t=s));function o(s){t=s,r.set(t)}return[t,r,o]}class sm extends Y{constructor(e){super(),K(this,e,om,lm,J,{})}}function im(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function am(l){let e,n,t,r;return t=new st({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:te,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function fm(l){let e,n,t;return n=new _e({props:{$$slots:{default:[am]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function pl(l){let e,n,t;return n=new ot({props:{$$slots:{default:[pm]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),Te(e,"border","1px solid black"),Te(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function um(l){let e,n,t;return e=new Fe({props:{color:Z.education.schools}}),{c(){b(e.$$.fragment),n=k(`
        Schools`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function cm(l){let e,n,t;return e=new Fe({props:{color:Z.education.colleges}}),{c(){b(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function $m(l){let e,n,t;return e=new Fe({props:{color:Z.education.universities}}),{c(){b(e.$$.fragment),n=k(`
        Universities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function pm(l){let e,n,t,r,o,s,f,i,a;function u(y){l[3](y)}let c={$$slots:{default:[um]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new oe({props:c}),W.push(()=>V(e,"checked",u));function m(y){l[4](y)}let _={$$slots:{default:[cm]},$$scope:{ctx:l}};l[1].college!==void 0&&(_.checked=l[1].college),r=new oe({props:_}),W.push(()=>V(r,"checked",m));function S(y){l[5](y)}let C={$$slots:{default:[$m]},$$scope:{ctx:l}};return l[1].university!==void 0&&(C.checked=l[1].university),f=new oe({props:C}),W.push(()=>V(f,"checked",S)),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment),s=O(),b(f.$$.fragment)},m(y,N){v(e,y,N),$(y,t,N),v(r,y,N),$(y,s,N),v(f,y,N),a=!0},p(y,N){const D={};N&128&&(D.$$scope={dirty:N,ctx:y}),!n&&N&2&&(n=!0,D.checked=y[1].school,X(()=>n=!1)),e.$set(D);const I={};N&128&&(I.$$scope={dirty:N,ctx:y}),!o&&N&2&&(o=!0,I.checked=y[1].college,X(()=>o=!1)),r.$set(I);const A={};N&128&&(A.$$scope={dirty:N,ctx:y}),!i&&N&2&&(i=!0,A.checked=y[1].university,X(()=>i=!1)),f.$set(A)},i(y){a||(g(e.$$.fragment,y),g(r.$$.fragment,y),g(f.$$.fragment,y),a=!0)},o(y){d(e.$$.fragment,y),d(r.$$.fragment,y),d(f.$$.fragment,y),a=!1},d(y){y&&(p(t),p(s)),w(e,y),w(r,y),w(f,y)}}}function mm(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&z(t,n)},d(r){r&&p(e)}}}function _m(l){let e,n;return e=new ue({props:{$$slots:{default:[mm,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gm(l){let e,n;const t=[q(Zt),{sourceLayer:Zt},{paint:{"fill-color":mt(["get","type"],{school:Z.education.schools,college:Z.education.colleges,university:Z.education.universities},"grey"),"fill-opacity":Q(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:ml(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[_m]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Ge({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?ne(t,[s&0&&fe(q(Zt)),s&0&&{sourceLayer:Zt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:ml(o[1])},t[5],t[6]]):{};s&128&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function dm(l){let e,n,t,r,o,s;function f(u){l[2](u)}let i={$$slots:{right:[fm],default:[im]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=l[0]&&pl(l);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Zt}.pmtiles`,$$slots:{default:[gm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),v(o,u,c),s=!0},p(u,[c]){const m={};c&128&&(m.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,m.checked=u[0],X(()=>n=!1)),e.$set(m),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=pl(u),a.c(),g(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const _={};c&131&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),w(e,u),a&&a.d(u),w(o,u)}}}let Zt="education";function ml(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function hm(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function f(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,f,i]}class bm extends Y{constructor(e){super(),K(this,e,hm,dm,J,{})}}function vm(l){let e,n,t,r;return e=new Fe({props:{color:l[4]}}),{c(){b(e.$$.fragment),n=O(),t=k(l[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&z(t,o[2])},i(o){r||(g(e.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function wm(l){let e;const n=l[6].default,t=vt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&wt(t,n,r,r[8],e?yt(n,r[8],o,null):kt(r[8]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function km(l){let e,n,t;return n=new _e({props:{$$slots:{default:[wm]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ym(l){let e,n=(l[9].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&514&&n!==(n=(r[9].name??`Unnamed ${r[1]}`)+"")&&z(t,n)},d(r){r&&p(e)}}}function Sm(l){let e,n;return e=new ue({props:{$$slots:{default:[ym,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&770&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Cm(l){let e,n;const t=[q(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":Q(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Sm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Ge({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&25?ne(t,[s&1&&fe(q(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Q(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&258&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Tm(l){let e,n,t,r,o;function s(i){l[7](i)}let f={$$slots:{right:[km],default:[vm]},$$scope:{ctx:l}};return l[3]!==void 0&&(f.checked=l[3]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${be()}/v1/${l[0]}.pmtiles`,$$slots:{default:[Cm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};a&260&&(u.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,u.checked=i[3],X(()=>n=!1)),e.$set(u);const c={};a&1&&(c.url=`pmtiles://${be()}/v1/${i[0]}.pmtiles`),a&267&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function Om(l,e,n){let t,{$$slots:r={},$$scope:o}=e,{name:s}=e,{singularNoun:f}=e,{pluralNoun:i}=e,a=Z[s],u=Ie(s);re(l,u,m=>n(3,t=m));function c(m){t=m,u.set(t)}return l.$$set=m=>{"name"in m&&n(0,s=m.name),"singularNoun"in m&&n(1,f=m.singularNoun),"pluralNoun"in m&&n(2,i=m.pluralNoun),"$$scope"in m&&n(8,o=m.$$scope)},[s,f,i,t,a,u,r,c,o]}class Co extends Y{constructor(e){super(),K(this,e,Om,Tm,J,{name:0,singularNoun:1,pluralNoun:2})}}function Lm(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Am(l){let e,n,t,r,o,s,f;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Lm]},$$scope:{ctx:l}}}),s=new st({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Im(l){let e,n;return e=new Co({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Am]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Nm extends Y{constructor(e){super(),K(this,e,null,Im,J,{})}}function Pm(l){let e,n,t;return{c(){e=T("img"),t=k(`
  Railway Stations`),fn(e.src,n=Po)||G(e,"src",n),G(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:te,d(r){r&&(p(e),p(t))}}}function Mm(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fm(l){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Em(l){let e,n,t,r,o,s,f,i,a,u,c,m;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Mm]},$$scope:{ctx:l}}}),i=new ee({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Fm]},$$scope:{ctx:l}}}),c=new st({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),s=T("p"),f=k("Icon from "),b(i.$$.fragment),a=k(". (Note that not all stations shown are National Rail.)"),u=O(),b(c.$$.fragment)},m(_,S){$(_,e,S),h(e,n),v(t,e,null),h(e,r),$(_,o,S),$(_,s,S),h(s,f),v(i,s,null),h(s,a),$(_,u,S),v(c,_,S),m=!0},p(_,S){const C={};S&16&&(C.$$scope={dirty:S,ctx:_}),t.$set(C);const y={};S&16&&(y.$$scope={dirty:S,ctx:_}),i.$set(y)},i(_){m||(g(t.$$.fragment,_),g(i.$$.fragment,_),g(c.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(i.$$.fragment,_),d(c.$$.fragment,_),m=!1},d(_){_&&(p(e),p(o),p(s),p(u)),w(t),w(i),w(c,_)}}}function Dm(l){let e,n,t;return n=new _e({props:{$$slots:{default:[Em]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function jm(l){let e,n=(l[3].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unnamed railway station")+"")&&z(t,n)},d(r){r&&p(e)}}}function Rm(l){let e,n;return e=new ue({props:{$$slots:{default:[jm,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zm(l){let e,n;const t=[q(pn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Rm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new _n({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?ne(t,[s&0&&fe(q(pn)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Bm(l){let e,n,t,r,o;function s(i){l[2](i)}let f={$$slots:{right:[Dm],default:[Pm]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new oe({props:f}),W.push(()=>V(e,"checked",s)),r=new Ct({props:{data:`${be()}/v1/${pn}.geojson`,$$slots:{default:[zm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let pn="railway_stations";function Hm(l,e,n){let t,r=Ie(pn);re(l,r,s=>n(0,t=s));function o(s){t=s,r.set(t)}return[t,r,o]}class qm extends Y{constructor(e){super(),K(this,e,Hm,Bm,J,{})}}function Gm(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Um(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wm(l){let e,n,t,r,o,s,f,i,a;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Gm]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Um]},$$scope:{ctx:l}}}),i=new st({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),f=O(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const m={};c&1&&(m.$$scope={dirty:c,ctx:u}),t.$set(m);const _={};c&1&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){a||(g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function Vm(l){let e,n;return e=new Co({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Wm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Xm extends Y{constructor(e){super(),K(this,e,null,Vm,J,{})}}function Jm(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ym(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Km(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zm(l){let e,n,t,r,o,s,f,i,a,u,c,m,_,S,C,y,N,D,I,A,L,M,E;return t=new ee({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Ym]},$$scope:{ctx:l}}}),N=new ee({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Km]},$$scope:{ctx:l}}}),M=new Re({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=O(),s=T("ul"),f=T("li"),f.textContent="Only collisions between 2017 and 2022 are included",i=O(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,u=O(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,m=O(),_=T("li"),_.textContent='The "pedestrians" category also include mobility scooters',S=O(),C=T("li"),y=k("All limitations "),b(N.$$.fragment),D=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),I=O(),A=T("p"),A.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=O(),b(M.$$.fragment)},m(P,R){$(P,e,R),h(e,n),v(t,e,null),h(e,r),$(P,o,R),$(P,s,R),h(s,f),h(s,i),h(s,a),h(s,u),h(s,c),h(s,m),h(s,_),h(s,S),h(s,C),h(C,y),v(N,C,null),h(C,D),$(P,I,R),$(P,A,R),$(P,L,R),v(M,P,R),E=!0},p(P,R){const U={};R&16777216&&(U.$$scope={dirty:R,ctx:P}),t.$set(U);const H={};R&16777216&&(H.$$scope={dirty:R,ctx:P}),N.$set(H)},i(P){E||(g(t.$$.fragment,P),g(N.$$.fragment,P),g(M.$$.fragment,P),E=!0)},o(P){d(t.$$.fragment,P),d(N.$$.fragment,P),d(M.$$.fragment,P),E=!1},d(P){P&&(p(e),p(o),p(s),p(I),p(A),p(L)),w(t),w(N),w(M,P)}}}function Qm(l){let e,n,t;return n=new _e({props:{$$slots:{default:[Zm]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function _l(l){let e,n,t,r,o,s,f,i,a,u,c,m,_;return n=new ot({props:{small:!0,$$slots:{default:[r_]},$$scope:{ctx:l}}}),u=new Bn({props:{rows:l[14]}}),{c(){e=T("div"),b(n.$$.fragment),t=O(),r=T("div"),o=k(`Filter years:
      `),s=T("input"),f=k(`
      -
      `),i=T("input"),a=O(),b(u.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),Te(e,"border","1px solid black"),Te(e,"padding","8px")},m(S,C){$(S,e,C),v(n,e,null),h(e,t),h(e,r),h(r,o),h(r,s),tt(s,l[4]),h(r,f),h(r,i),tt(i,l[5]),h(e,a),v(u,e,null),c=!0,m||(_=[rt(s,"input",l[20]),rt(i,"input",l[21])],m=!0)},p(S,C){const y={};C&16777231&&(y.$$scope={dirty:C,ctx:S}),n.$set(y),C&16&&en(s.value)!==S[4]&&tt(s,S[4]),C&32&&en(i.value)!==S[5]&&tt(i,S[5])},i(S){c||(g(n.$$.fragment,S),g(u.$$.fragment,S),c=!0)},o(S){d(n.$$.fragment,S),d(u.$$.fragment,S),c=!1},d(S){S&&p(e),w(n),w(u),m=!1,no(_)}}}function xm(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function e_(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function t_(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function n_(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function r_(l){let e,n,t,r,o,s,f,i,a,u,c,m;function _(L){l[16](L)}let S={$$slots:{default:[xm]},$$scope:{ctx:l}};l[0]!==void 0&&(S.checked=l[0]),e=new oe({props:S}),W.push(()=>V(e,"checked",_));function C(L){l[17](L)}let y={$$slots:{default:[e_]},$$scope:{ctx:l}};l[1]!==void 0&&(y.checked=l[1]),r=new oe({props:y}),W.push(()=>V(r,"checked",C));function N(L){l[18](L)}let D={$$slots:{default:[t_]},$$scope:{ctx:l}};l[2]!==void 0&&(D.checked=l[2]),f=new oe({props:D}),W.push(()=>V(f,"checked",N));function I(L){l[19](L)}let A={$$slots:{default:[n_]},$$scope:{ctx:l}};return l[3]!==void 0&&(A.checked=l[3]),u=new oe({props:A}),W.push(()=>V(u,"checked",I)),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment),s=O(),b(f.$$.fragment),a=O(),b(u.$$.fragment)},m(L,M){v(e,L,M),$(L,t,M),v(r,L,M),$(L,s,M),v(f,L,M),$(L,a,M),v(u,L,M),m=!0},p(L,M){const E={};M&16777216&&(E.$$scope={dirty:M,ctx:L}),!n&&M&1&&(n=!0,E.checked=L[0],X(()=>n=!1)),e.$set(E);const P={};M&16777216&&(P.$$scope={dirty:M,ctx:L}),!o&&M&2&&(o=!0,P.checked=L[1],X(()=>o=!1)),r.$set(P);const R={};M&16777216&&(R.$$scope={dirty:M,ctx:L}),!i&&M&4&&(i=!0,R.checked=L[2],X(()=>i=!1)),f.$set(R);const U={};M&16777216&&(U.$$scope={dirty:M,ctx:L}),!c&&M&8&&(c=!0,U.checked=L[3],X(()=>c=!1)),u.$set(U)},i(L){m||(g(e.$$.fragment,L),g(r.$$.fragment,L),g(f.$$.fragment,L),g(u.$$.fragment,L),m=!0)},o(L){d(e.$$.fragment,L),d(r.$$.fragment,L),d(f.$$.fragment,L),d(u.$$.fragment,L),m=!1},d(L){L&&(p(t),p(s),p(a)),w(e,L),w(r,L),w(f,L),w(u,L)}}}function gl(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&z(o,r)},d(s){s&&p(e)}}}function dl(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&z(o,r)},d(s){s&&p(e)}}}function l_(l){let e,n,t,r=l[23].year+"",o,s,f,i,a,u=l[10][l[23].severity]+"",c,m,_,S,C,y=hl(l[23])+"",N,D,I,A,L,M=l[23].pedestrian_location&&gl(l),E=l[23].pedestrian_movement&&dl(l);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(r),s=O(),f=T("p"),i=k("Severity: "),a=T("b"),c=k(u),m=O(),_=T("p"),S=k("Casualties: "),C=T("b"),N=k(y),D=O(),M&&M.c(),I=O(),E&&E.c(),A=O(),L=T("p"),L.textContent="Click to open full report in CycleStreets"},m(P,R){$(P,e,R),h(e,n),h(e,t),h(t,o),$(P,s,R),$(P,f,R),h(f,i),h(f,a),h(a,c),$(P,m,R),$(P,_,R),h(_,S),h(_,C),h(C,N),$(P,D,R),M&&M.m(P,R),$(P,I,R),E&&E.m(P,R),$(P,A,R),$(P,L,R)},p(P,R){R&8388608&&r!==(r=P[23].year+"")&&z(o,r),R&8388608&&u!==(u=P[10][P[23].severity]+"")&&z(c,u),R&8388608&&y!==(y=hl(P[23])+"")&&z(N,y),P[23].pedestrian_location?M?M.p(P,R):(M=gl(P),M.c(),M.m(I.parentNode,I)):M&&(M.d(1),M=null),P[23].pedestrian_movement?E?E.p(P,R):(E=dl(P),E.c(),E.m(A.parentNode,A)):E&&(E.d(1),E=null)},d(P){P&&(p(e),p(s),p(f),p(m),p(_),p(D),p(I),p(A),p(L)),M&&M.d(P),E&&E.d(P)}}}function o_(l){let e,n;return e=new ue({props:{$$slots:{default:[l_,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function s_(l){let e,n;const t=[q(Qt),{sourceLayer:Qt},{paint:{"circle-color":Ae(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[o_]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new _t({props:r}),e.$on("click",a_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&14528?ne(t,[s&0&&fe(q(Qt)),s&0&&{sourceLayer:Qt},s&14336&&{paint:{"circle-color":Ae(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function i_(l){let e,n,t,r,o,s;function f(u){l[15](u)}let i={$$slots:{right:[Qm],default:[Jm]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=l[6]&&_l(l);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Qt}.pmtiles`,$$slots:{default:[s_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),v(o,u,c),s=!0},p(u,[c]){const m={};c&16777216&&(m.$$scope={dirty:c,ctx:u}),!n&&c&64&&(n=!0,m.checked=u[6],X(()=>n=!1)),e.$set(m),u[6]?a?(a.p(u,c),c&64&&g(a,1)):(a=_l(u),a.c(),g(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const _={};c&16777408&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),w(e,u),a&&a.d(u),w(o,u)}}}let Qt="stats19";function hl(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function a_(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function f_(l,e,n){let t,r=!1,o=!0,s=!0,f=!0,i=!1,a=2017,u=2022;function c(U,H,j,F,B,se){let ie=["any"];return o&&ie.push(["get","pedestrian"]),s&&ie.push(["get","cyclist"]),f&&ie.push(["get","horse_rider"]),i&&ie.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],u],ie]}let m={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},_={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},S={1:"Fatal",2:"Serious",3:"Slight"},C=Z.sequential_low_to_high[4],y=Z.sequential_low_to_high[2],N=Z.sequential_low_to_high[0],D=[["Fatal",C],["Serious",y],["Slight",N]];function I(U){r=U,n(6,r)}function A(U){o=U,n(0,o)}function L(U){s=U,n(1,s)}function M(U){f=U,n(2,f)}function E(U){i=U,n(3,i)}function P(){a=en(this.value),n(4,a)}function R(){u=en(this.value),n(5,u)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,f,i,a,u,r,t,m,_,S,C,y,N,D,I,A,L,M,E,P,R]}class u_ extends Y{constructor(e){super(),K(this,e,f_,i_,J,{})}}function c_(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $_(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function p_(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function m_(l){let e,n,t,r,o,s,f,i,a,u,c;return t=new ee({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[$_]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[p_]},$$scope:{ctx:l}}}),u=new Re({}),{c(){e=T("p"),n=k("AADF (annual average daily flow) data from "),b(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),f=O(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=O(),b(u.$$.fragment)},m(m,_){$(m,e,_),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(m,f,_),$(m,i,_),$(m,a,_),v(u,m,_),c=!0},p(m,_){const S={};_&128&&(S.$$scope={dirty:_,ctx:m}),t.$set(S);const C={};_&128&&(C.$$scope={dirty:_,ctx:m}),o.$set(C)},i(m){c||(g(t.$$.fragment,m),g(o.$$.fragment,m),g(u.$$.fragment,m),c=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),c=!1},d(m){m&&(p(e),p(f),p(i),p(a)),w(t),w(o),w(u,m)}}}function __(l){let e,n,t;return n=new _e({props:{$$slots:{default:[m_]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function bl(l){let e,n;return e=new Ue({props:{colorScale:l[1],limits:l[3]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function g_(l){let e,n=l[6].location+"",t,r,o,s,f=l[6].year+"",i,a,u,c=l[6].motor_vehicles.toLocaleString()+"",m,_,S,C,y=l[6].year+"",N,D,I,A=l[6].pedal_cycles.toLocaleString()+"",L,M,E,P,R,U=l[6].method+"",H;return{c(){e=T("h2"),t=k(n),r=O(),o=T("p"),s=k("Total motor vehicles ("),i=k(f),a=k(` AADF):
        `),u=T("b"),m=k(c),_=O(),S=T("p"),C=k("Total pedal cycles ("),N=k(y),D=k(` AADF):
        `),I=T("b"),L=k(A),M=O(),E=T("p"),P=k("Count method: "),R=T("b"),H=k(U)},m(j,F){$(j,e,F),h(e,t),$(j,r,F),$(j,o,F),h(o,s),h(o,i),h(o,a),h(o,u),h(u,m),$(j,_,F),$(j,S,F),h(S,C),h(S,N),h(S,D),h(S,I),h(I,L),$(j,M,F),$(j,E,F),h(E,P),h(E,R),h(R,H)},p(j,F){F&64&&n!==(n=j[6].location+"")&&z(t,n),F&64&&f!==(f=j[6].year+"")&&z(i,f),F&64&&c!==(c=j[6].motor_vehicles.toLocaleString()+"")&&z(m,c),F&64&&y!==(y=j[6].year+"")&&z(N,y),F&64&&A!==(A=j[6].pedal_cycles.toLocaleString()+"")&&z(L,A),F&64&&U!==(U=j[6].method+"")&&z(H,U)},d(j){j&&(p(e),p(r),p(o),p(_),p(S),p(M),p(E))}}}function d_(l){let e,n;return e=new ue({props:{$$slots:{default:[g_,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function h_(l){let e,n;const t=[q(Ht),{sourceLayer:Ht},{paint:{"circle-color":Ae(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[d_]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new _t({props:r}),e.$on("click",v_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?ne(t,[s&0&&fe(q(Ht)),s&0&&{sourceLayer:Ht},s&6&&{paint:{"circle-color":Ae(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function b_(l){let e,n,t,r,o,s;function f(u){l[5](u)}let i={$$slots:{right:[__],default:[c_]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new oe({props:i}),W.push(()=>V(e,"checked",f));let a=l[0]&&bl(l);return o=new ye({props:{url:`pmtiles://${be()}/v1/${Ht}.pmtiles`,$$slots:{default:[h_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),a&&a.c(),r=O(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),v(o,u,c),s=!0},p(u,[c]){const m={};c&128&&(m.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,m.checked=u[0],X(()=>n=!1)),e.$set(m),u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=bl(u),a.c(),g(a,1),a.m(r.parentNode,r)):a&&($e(),d(a,1,1,()=>{a=null}),pe());const _={};c&129&&(_.$$scope={dirty:c,ctx:u}),o.$set(_)},i(u){s||(g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),w(e,u),a&&a.d(u),w(o,u)}}}let Ht="vehicle_counts";function v_(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function w_(l,e,n){let t,r=Z.sequential_low_to_high,o=[0,4e4,8e4,12e4,16e4,205e3],s=["","40k","80k","120k","160k",""],f=Ie(Ht);re(l,f,a=>n(0,t=a));function i(a){t=a,f.set(t)}return[t,r,o,s,f,i]}class k_ extends Y{constructor(e){super(),K(this,e,w_,b_,J,{})}}function y_(l){let e,n,t,r,o,s,f,i;return e=new bm({}),t=new Nm({}),o=new Xm({}),f=new qm({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),$(a,r,u),v(o,a,u),$(a,s,u),v(f,a,u),i=!0},i(a){i||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),w(e,a),w(t,a),w(o,a),w(f,a)}}}function S_(l){let e,n;return e=new ot({props:{small:!0,$$slots:{default:[y_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function C_(l){let e,n,t,r,o,s,f,i,a,u,c,m;return e=new Ic({}),t=new s$({}),o=new Bc({}),f=new Kc({}),a=new sm({}),c=new zp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment),u=O(),b(c.$$.fragment)},m(_,S){v(e,_,S),$(_,n,S),v(t,_,S),$(_,r,S),v(o,_,S),$(_,s,S),v(f,_,S),$(_,i,S),v(a,_,S),$(_,u,S),v(c,_,S),m=!0},i(_){m||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),m=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(o.$$.fragment,_),d(f.$$.fragment,_),d(a.$$.fragment,_),d(c.$$.fragment,_),m=!1},d(_){_&&(p(n),p(r),p(s),p(i),p(u)),w(e,_),w(t,_),w(o,_),w(f,_),w(a,_),w(c,_)}}}function T_(l){let e,n;return e=new ot({props:{small:!0,$$slots:{default:[C_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function O_(l){let e,n,t,r,o,s;return e=new dc({}),t=new ap({}),o=new hp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(f,i){v(e,f,i),$(f,n,i),v(t,f,i),$(f,r,i),v(o,f,i),s=!0},i(f){s||(g(e.$$.fragment,f),g(t.$$.fragment,f),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(r)),w(e,f),w(t,f),w(o,f)}}}function L_(l){let e,n,t,r,o,s,f,i,a,u;return e=new Lu({}),t=new rc({}),o=new Ef({}),f=new ru({}),a=new du({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment)},m(c,m){v(e,c,m),$(c,n,m),v(t,c,m),$(c,r,m),v(o,c,m),$(c,s,m),v(f,c,m),$(c,i,m),v(a,c,m),u=!0},i(c){u||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(f.$$.fragment,c),d(a.$$.fragment,c),u=!1},d(c){c&&(p(n),p(r),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(f,c),w(a,c)}}}function A_(l){let e,n;return e=new ot({props:{small:!0,$$slots:{default:[L_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function I_(l){let e,n,t,r;return e=new Sf({}),t=new Vf({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function N_(l){let e,n;return e=new ot({props:{small:!0,$$slots:{default:[I_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function P_(l){let e,n,t,r,o,s;return e=new ep({}),t=new b$({}),o=new U$({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(f,i){v(e,f,i),$(f,n,i),v(t,f,i),$(f,r,i),v(o,f,i),s=!0},i(f){s||(g(e.$$.fragment,f),g(t.$$.fragment,f),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(r)),w(e,f),w(t,f),w(o,f)}}}function M_(l){let e,n,t,r,o,s,f,i,a=Ln()=="Private (development)",u,c,m,_,S;e=new k_({}),t=new u_({}),o=new M$({}),f=new Yp({});let C=a&&P_();return c=new Du({}),_=new Vu({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),C&&C.c(),u=O(),b(c.$$.fragment),m=O(),b(_.$$.fragment)},m(y,N){v(e,y,N),$(y,n,N),v(t,y,N),$(y,r,N),v(o,y,N),$(y,s,N),v(f,y,N),$(y,i,N),C&&C.m(y,N),$(y,u,N),v(c,y,N),$(y,m,N),v(_,y,N),S=!0},p:te,i(y){S||(g(e.$$.fragment,y),g(t.$$.fragment,y),g(o.$$.fragment,y),g(f.$$.fragment,y),g(C),g(c.$$.fragment,y),g(_.$$.fragment,y),S=!0)},o(y){d(e.$$.fragment,y),d(t.$$.fragment,y),d(o.$$.fragment,y),d(f.$$.fragment,y),d(C),d(c.$$.fragment,y),d(_.$$.fragment,y),S=!1},d(y){y&&(p(n),p(r),p(s),p(i),p(u),p(m)),w(e,y),w(t,y),w(o,y),w(f,y),C&&C.d(y),w(c,y),w(_,y)}}}function F_(l){let e,n;return e=new ot({props:{small:!0,$$slots:{default:[M_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function E_(l){let e,n,t,r,o;function s(i){l[3](i)}let f={};return l[0]!==void 0&&(f.enabled=l[0]),e=new Wo({props:f}),W.push(()=>V(e,"enabled",s)),r=new Cs({}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,a){const u={};!n&&a&1&&(n=!0,u.enabled=i[0],X(()=>n=!1)),e.$set(u)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function D_(l){let e,n,t,r,o,s,f,i,a,u,c,m,_,S,C,y,N,D;return e=new Lp({}),t=new ze({props:{label:"Trip generators",$$slots:{default:[S_]},$$scope:{ctx:l}}}),o=new ze({props:{label:"Existing infrastructure",$$slots:{default:[T_]},$$scope:{ctx:l}}}),f=new ze({props:{label:"Public transit",$$slots:{default:[O_]},$$scope:{ctx:l}}}),a=new ze({props:{label:"Boundaries",$$slots:{default:[A_]},$$scope:{ctx:l}}}),c=new ze({props:{label:"Census",$$slots:{default:[N_]},$$scope:{ctx:l}}}),_=new ze({props:{label:"Other",$$slots:{default:[F_]},$$scope:{ctx:l}}}),C=new ze({props:{label:"Tools",$$slots:{default:[E_]},$$scope:{ctx:l}}}),N=new Uo({props:{disabled:!l[1]}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment),u=O(),b(c.$$.fragment),m=O(),b(_.$$.fragment),S=O(),b(C.$$.fragment),y=O(),b(N.$$.fragment)},m(I,A){v(e,I,A),$(I,n,A),v(t,I,A),$(I,r,A),v(o,I,A),$(I,s,A),v(f,I,A),$(I,i,A),v(a,I,A),$(I,u,A),v(c,I,A),$(I,m,A),v(_,I,A),$(I,S,A),v(C,I,A),$(I,y,A),v(N,I,A),D=!0},p(I,A){const L={};A&16&&(L.$$scope={dirty:A,ctx:I}),t.$set(L);const M={};A&16&&(M.$$scope={dirty:A,ctx:I}),o.$set(M);const E={};A&16&&(E.$$scope={dirty:A,ctx:I}),f.$set(E);const P={};A&16&&(P.$$scope={dirty:A,ctx:I}),a.$set(P);const R={};A&16&&(R.$$scope={dirty:A,ctx:I}),c.$set(R);const U={};A&16&&(U.$$scope={dirty:A,ctx:I}),_.$set(U);const H={};A&17&&(H.$$scope={dirty:A,ctx:I}),C.$set(H);const j={};A&2&&(j.disabled=!I[1]),N.$set(j)},i(I){D||(g(e.$$.fragment,I),g(t.$$.fragment,I),g(o.$$.fragment,I),g(f.$$.fragment,I),g(a.$$.fragment,I),g(c.$$.fragment,I),g(_.$$.fragment,I),g(C.$$.fragment,I),g(N.$$.fragment,I),D=!0)},o(I){d(e.$$.fragment,I),d(t.$$.fragment,I),d(o.$$.fragment,I),d(f.$$.fragment,I),d(a.$$.fragment,I),d(c.$$.fragment,I),d(_.$$.fragment,I),d(C.$$.fragment,I),d(N.$$.fragment,I),D=!1},d(I){I&&(p(n),p(r),p(s),p(i),p(u),p(m),p(S),p(y)),w(e,I),w(t,I),w(o,I),w(f,I),w(a,I),w(c,I),w(_,I),w(C,I),w(N,I)}}}function j_(l){let e,n;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Ge({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&2?ne(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(f)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function R_(l){let e,n,t,r;return e=new ze({props:{label:"Layers",open:!0,$$slots:{default:[D_]},$$scope:{ctx:l}}}),t=new Ct({props:{data:l[2],$$slots:{default:[j_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const f={};s&19&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function z_(l,e,n){let t,r;re(l,Lr,f=>n(1,r=f));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(f){t=f,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&Lr.set(!t)},[t,r,o,s]}class B_ extends Y{constructor(e){super(),K(this,e,z_,R_,J,{})}}function vl(l){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function H_(l){let e,n=l[0]&&vl();return{c(){n&&n.c(),e=Me()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=vl(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:te,o:te,d(t){t&&p(e),n&&n.d(t)}}}function q_(l,e,n){let{loadFile:t}=e,r=!0;return zn(async()=>{let s=await(await fetch(`${mn()}/v1/all_schemes_output.geojson.gz`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class G_ extends Y{constructor(e){super(),K(this,e,q_,H_,J,{loadFile:1})}}function wl(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=k("Current milestone: "),r=k(t)},m(s,f){$(s,e,f),h(e,n),h(e,r)},p(s,f){var i;f&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function U_(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function W_(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function V_(l){let e,n,t,r;return e=new pt({props:{$$slots:{default:[U_]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new pt({props:{$$slots:{default:[W_]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const f={};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function X_(l){var R,U,H,j;let e,n,t=l[0].scheme_reference+"",r,o,s,f,i=((R=l[0].browse)==null?void 0:R.authority_or_region)+"",a,u,c,m,_=((U=l[0].browse)==null?void 0:U.capital_scheme_id)+"",S,C,y,N,D=((H=l[0].browse)==null?void 0:H.funding_programme)+"",I,A,L,M,E,P=((j=l[0].browse)==null?void 0:j.current_milestone)&&wl(l);return M=new Vo({props:{$$slots:{default:[V_]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Scheme reference: "),r=k(t),o=O(),s=T("p"),f=k("Authority or region: "),a=k(i),u=O(),c=T("p"),m=k("Capital scheme ID: "),S=k(_),C=O(),y=T("p"),N=k("Funding programme: "),I=k(D),A=O(),P&&P.c(),L=O(),b(M.$$.fragment)},m(F,B){$(F,e,B),h(e,n),h(e,r),$(F,o,B),$(F,s,B),h(s,f),h(s,a),$(F,u,B),$(F,c,B),h(c,m),h(c,S),$(F,C,B),$(F,y,B),h(y,N),h(y,I),$(F,A,B),P&&P.m(F,B),$(F,L,B),v(M,F,B),E=!0},p(F,B){var ie,Se,he,Ce;(!E||B&1)&&t!==(t=F[0].scheme_reference+"")&&z(r,t),(!E||B&1)&&i!==(i=((ie=F[0].browse)==null?void 0:ie.authority_or_region)+"")&&z(a,i),(!E||B&1)&&_!==(_=((Se=F[0].browse)==null?void 0:Se.capital_scheme_id)+"")&&z(S,_),(!E||B&1)&&D!==(D=((he=F[0].browse)==null?void 0:he.funding_programme)+"")&&z(I,D),(Ce=F[0].browse)!=null&&Ce.current_milestone?P?P.p(F,B):(P=wl(F),P.c(),P.m(L.parentNode,L)):P&&(P.d(1),P=null);const se={};B&32&&(se.$$scope={dirty:B,ctx:F}),M.$set(se)},i(F){E||(g(M.$$.fragment,F),E=!0)},o(F){d(M.$$.fragment,F),E=!1},d(F){F&&(p(e),p(o),p(s),p(u),p(c),p(C),p(y),p(A),p(L)),P&&P.d(F),w(M,F)}}}function J_(l){let e,n;return e=new ze({props:{label:`${l[0].scheme_name}`,$$slots:{default:[X_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Y_(l,e,n){let t,r;re(l,qt,i=>n(3,t=i)),re(l,Rn,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Mo(i),{padding:20,animate:!1})}function f(){var u,c;let i={type:"FeatureCollection",features:t.features.filter(m=>m.properties.scheme_reference==o.scheme_reference)},a=((u=o.browse)==null?void 0:u.authority_or_region)||"unknown authority";Fo(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,f]}class K_ extends Y{constructor(e){super(),K(this,e,Y_,J_,J,{scheme:0})}}function kl(l){let e,n,t,r=l[0].status+"",o;return{c(){e=T("p"),n=k("Status: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&r!==(r=s[0].status+"")&&z(o,r)},d(s){s&&p(e)}}}function yl(l){let e,n,t,r=l[0].timescale+"",o;return{c(){e=T("p"),n=k("Timescale: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&r!==(r=s[0].timescale+"")&&z(o,r)},d(s){s&&p(e)}}}function Sl(l){let e,n,t,r=l[0].timescale_year+"",o;return{c(){e=T("p"),n=k("Estimated completion year: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&r!==(r=s[0].timescale_year+"")&&z(o,r)},d(s){s&&p(e)}}}function Cl(l){let e,n,t,r=l[0].year_published+"",o;return{c(){e=T("p"),n=k("Scheme most recently published: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&r!==(r=s[0].year_published+"")&&z(o,r)},d(s){s&&p(e)}}}function Tl(l){let e,n,t,r=l[0].year_consulted+"",o;return{c(){e=T("p"),n=k("Scheme most recently consulted on: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&r!==(r=s[0].year_consulted+"")&&z(o,r)},d(s){s&&p(e)}}}function Z_(l){let e,n,t,r,o,s=l[0].status&&kl(l),f=l[0].timescale&&yl(l),i=l[0].timescale_year&&Sl(l),a=l[0].year_published&&Cl(l),u=l[0].year_consulted&&Tl(l);return{c(){s&&s.c(),e=O(),f&&f.c(),n=O(),i&&i.c(),t=O(),a&&a.c(),r=O(),u&&u.c(),o=Me()},m(c,m){s&&s.m(c,m),$(c,e,m),f&&f.m(c,m),$(c,n,m),i&&i.m(c,m),$(c,t,m),a&&a.m(c,m),$(c,r,m),u&&u.m(c,m),$(c,o,m)},p(c,[m]){c[0].status?s?s.p(c,m):(s=kl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,m):(f=yl(c),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,m):(i=Sl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,m):(a=Cl(c),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,m):(u=Tl(c),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i:te,o:te,d(c){c&&(p(e),p(n),p(t),p(r),p(o)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function Q_(l,e,n){let{props:t}=e;return l.$$set=r=>{"props"in r&&n(0,t=r.props)},[t]}class To extends Y{constructor(e){super(),K(this,e,Q_,Z_,J,{props:0})}}function Ol(l){let e,n,t,r=l[0].budget.toLocaleString()+"",o,s;return{c(){e=T("p"),n=k("Cost: "),t=T("b"),o=k(r),s=k(`
    GBP`)},m(f,i){$(f,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(f,i){i&1&&r!==(r=f[0].budget.toLocaleString()+"")&&z(o,r)},d(f){f&&p(e)}}}function Ll(l){let e;return{c(){e=T("p"),e.textContent="Development is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Al(l){let e;return{c(){e=T("p"),e.textContent="Construction is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Il(l){let e,n,t,r;return{c(){e=T("p"),n=k("Funding sources: "),t=T("b"),r=k(l[1])},m(o,s){$(o,e,s),h(e,n),h(e,t),h(t,r)},p(o,s){s&2&&z(r,o[1])},d(o){o&&p(e)}}}function x_(l){let e,n,t,r,o=l[0].budget&&Ol(l),s=l[0].development_funded&&Ll(),f=l[0].construction_funded&&Al(),i=l[1]&&Il(l);return{c(){o&&o.c(),e=O(),s&&s.c(),n=O(),f&&f.c(),t=O(),i&&i.c(),r=Me()},m(a,u){o&&o.m(a,u),$(a,e,u),s&&s.m(a,u),$(a,n,u),f&&f.m(a,u),$(a,t,u),i&&i.m(a,u),$(a,r,u)},p(a,[u]){a[0].budget?o?o.p(a,u):(o=Ol(a),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),a[0].development_funded?s||(s=Ll(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=Al(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=Il(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i:te,o:te,d(a){a&&(p(e),p(n),p(t),p(r)),o&&o.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function eg(l){if(!l.funding_sources)return"";let e=[];for(let n of["atf2","atf3","atf4","atf4e","crsts","luf"])l.funding_sources[n]&&e.push(n.toUpperCase());return l.funding_sources.other&&e.push(l.funding_sources.other),e.join(", ")}function tg(l,e,n){let t,{props:r}=e;return l.$$set=o=>{"props"in o&&n(0,r=o.props)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=eg(r))},[r,t]}class Oo extends Y{constructor(e){super(),K(this,e,tg,x_,J,{props:0})}}function yn(l){const e=l.slice(),n=e[1].pipeline;return e[5]=n,e}function Sn(l){const e=l.slice(),n=e[0].pipeline;return e[5]=n,e}function Nl(l){let e,n,t,r=Yn(l[0].length_meters)+"",o;return{c(){e=T("p"),n=k("Length: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&r!==(r=Yn(s[0].length_meters)+"")&&z(o,r)},d(s){s&&p(e)}}}function Pl(l){let e,n=ut(l[0].description,l[2])+"";return{c(){e=T("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=ut(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Ml(l){let e,n,t,r,o,s,f,i=l[5].atf4_type&&Fl(l),a=l[5].accuracy&&El(l),u=l[5].is_alternative&&Dl();return r=new Oo({props:{props:l[5]}}),s=new To({props:{props:l[5]}}),{c(){i&&i.c(),e=O(),a&&a.c(),n=O(),u&&u.c(),t=O(),b(r.$$.fragment),o=O(),b(s.$$.fragment)},m(c,m){i&&i.m(c,m),$(c,e,m),a&&a.m(c,m),$(c,n,m),u&&u.m(c,m),$(c,t,m),v(r,c,m),$(c,o,m),v(s,c,m),f=!0},p(c,m){c[5].atf4_type?i?i.p(c,m):(i=Fl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].accuracy?a?a.p(c,m):(a=El(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].is_alternative?u||(u=Dl(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};m&1&&(_.props=c[5]),r.$set(_);const S={};m&1&&(S.props=c[5]),s.$set(S)},i(c){f||(g(r.$$.fragment,c),g(s.$$.fragment,c),f=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),f=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),u&&u.d(c),w(r,c),w(s,c)}}}function Fl(l){let e,n,t,r=l[5].atf4_type+"",o;return{c(){e=T("p"),n=k("ATF4 type: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&r!==(r=s[5].atf4_type+"")&&z(o,r)},d(s){s&&p(e)}}}function El(l){let e,n,t,r=l[5].accuracy+"",o;return{c(){e=T("p"),n=k("Accuracy: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&1&&r!==(r=s[5].accuracy+"")&&z(o,r)},d(s){s&&p(e)}}}function Dl(l){let e;return{c(){e=T("p"),e.textContent="Represents an alternative route"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.capital_scheme_id)+"",o;return{c(){e=T("p"),n=k("Capital scheme ID: "),t=T("b"),o=k(r)},m(f,i){$(f,e,i),h(e,n),h(e,t),h(t,o)},p(f,i){var a;i&2&&r!==(r=((a=f[1].browse)==null?void 0:a.capital_scheme_id)+"")&&z(o,r)},d(f){f&&p(e)}}}function Rl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.current_milestone)+"",o;return{c(){e=T("p"),n=k("Current milestone: "),t=T("b"),o=k(r)},m(f,i){$(f,e,i),h(e,n),h(e,t),h(t,o)},p(f,i){var a;i&2&&r!==(r=((a=f[1].browse)==null?void 0:a.current_milestone)+"")&&z(o,r)},d(f){f&&p(e)}}}function zl(l){let e,n,t,r,o,s,f,i=l[5].scheme_type&&Bl(l),a=l[5].atf4_lead_type&&Hl(l),u=l[5].scheme_description&&ql(l);return r=new Oo({props:{props:l[5]}}),s=new To({props:{props:l[5]}}),{c(){i&&i.c(),e=O(),a&&a.c(),n=O(),u&&u.c(),t=O(),b(r.$$.fragment),o=O(),b(s.$$.fragment)},m(c,m){i&&i.m(c,m),$(c,e,m),a&&a.m(c,m),$(c,n,m),u&&u.m(c,m),$(c,t,m),v(r,c,m),$(c,o,m),v(s,c,m),f=!0},p(c,m){c[5].scheme_type?i?i.p(c,m):(i=Bl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].atf4_lead_type?a?a.p(c,m):(a=Hl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].scheme_description?u?u.p(c,m):(u=ql(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};m&2&&(_.props=c[5]),r.$set(_);const S={};m&2&&(S.props=c[5]),s.$set(S)},i(c){f||(g(r.$$.fragment,c),g(s.$$.fragment,c),f=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),f=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),u&&u.d(c),w(r,c),w(s,c)}}}function Bl(l){let e,n,t,r=l[5].scheme_type+"",o;return{c(){e=T("p"),n=k("Scheme type: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&2&&r!==(r=s[5].scheme_type+"")&&z(o,r)},d(s){s&&p(e)}}}function Hl(l){let e,n,t,r=l[5].atf4_lead_type+"",o;return{c(){e=T("p"),n=k("ATF4 lead type: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&2&&r!==(r=s[5].atf4_lead_type+"")&&z(o,r)},d(s){s&&p(e)}}}function ql(l){let e,n,t=l[5].scheme_description+"",r;return{c(){e=T("p"),n=k("Descripton: "),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,r)},p(o,s){s&2&&t!==(t=o[5].scheme_description+"")&&z(r,t)},d(o){o&&p(e)}}}function ng(l){var Ne,Ee,Ut,Je;let e,n,t,r=ut(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",f,i,a,u,c,m,_,S,C,y,N,D=ut(l[1].scheme_name??"",l[3])+"",I,A,L=ut(l[0].scheme_reference,l[3])+"",M,E,P,R,U,H=((Ne=l[1].browse)==null?void 0:Ne.authority_or_region)+"",j,F,B,se,ie,Se,he=((Ee=l[1].browse)==null?void 0:Ee.funding_programme)+"",Ce,ae,Pe,Oe,ve=l[0].length_meters&&Nl(l),le=l[0].description&&Pl(l),me=l[0].pipeline&&Ml(Sn(l)),de=((Ut=l[1].browse)==null?void 0:Ut.capital_scheme_id)&&jl(l),we=((Je=l[1].browse)==null?void 0:Je.current_milestone)&&Rl(l),ge=l[1].pipeline&&zl(yn(l));return{c(){e=T("div"),n=T("h2"),t=new bt(!1),o=k(" ("),f=k(s),i=k(")"),a=O(),ve&&ve.c(),u=O(),le&&le.c(),c=O(),me&&me.c(),m=O(),_=T("hr"),S=O(),C=T("p"),y=k("Part of scheme: "),N=new bt(!1),I=k(" ("),A=new bt(!1),M=k(")"),E=O(),P=T("p"),R=k("Authority or region: "),U=T("b"),j=k(H),F=O(),de&&de.c(),B=O(),se=T("p"),ie=k("Funding programme: "),Se=T("b"),Ce=k(he),ae=O(),we&&we.c(),Pe=O(),ge&&ge.c(),t.a=o,N.a=I,A.a=M,Te(e,"max-width","30vw"),Te(e,"max-height","60vh"),Te(e,"overflow","auto")},m(ce,De){$(ce,e,De),h(e,n),t.m(r,n),h(n,o),h(n,f),h(n,i),h(e,a),ve&&ve.m(e,null),h(e,u),le&&le.m(e,null),h(e,c),me&&me.m(e,null),h(e,m),h(e,_),h(e,S),h(e,C),h(C,y),N.m(D,C),h(C,I),A.m(L,C),h(C,M),h(e,E),h(e,P),h(P,R),h(P,U),h(U,j),h(e,F),de&&de.m(e,null),h(e,B),h(e,se),h(se,ie),h(se,Se),h(Se,Ce),h(e,ae),we&&we.m(e,null),h(e,Pe),ge&&ge.m(e,null),Oe=!0},p(ce,[De]){var Gn,Un,Wn,Vn;(!Oe||De&5)&&r!==(r=ut(ce[0].name,ce[2])+"")&&t.p(r),(!Oe||De&1)&&s!==(s=ce[0].intervention_type+"")&&z(f,s),ce[0].length_meters?ve?ve.p(ce,De):(ve=Nl(ce),ve.c(),ve.m(e,u)):ve&&(ve.d(1),ve=null),ce[0].description?le?le.p(ce,De):(le=Pl(ce),le.c(),le.m(e,c)):le&&(le.d(1),le=null),ce[0].pipeline?me?(me.p(Sn(ce),De),De&1&&g(me,1)):(me=Ml(Sn(ce)),me.c(),g(me,1),me.m(e,m)):me&&($e(),d(me,1,1,()=>{me=null}),pe()),(!Oe||De&10)&&D!==(D=ut(ce[1].scheme_name??"",ce[3])+"")&&N.p(D),(!Oe||De&9)&&L!==(L=ut(ce[0].scheme_reference,ce[3])+"")&&A.p(L),(!Oe||De&2)&&H!==(H=((Gn=ce[1].browse)==null?void 0:Gn.authority_or_region)+"")&&z(j,H),(Un=ce[1].browse)!=null&&Un.capital_scheme_id?de?de.p(ce,De):(de=jl(ce),de.c(),de.m(e,B)):de&&(de.d(1),de=null),(!Oe||De&2)&&he!==(he=((Wn=ce[1].browse)==null?void 0:Wn.funding_programme)+"")&&z(Ce,he),(Vn=ce[1].browse)!=null&&Vn.current_milestone?we?we.p(ce,De):(we=Rl(ce),we.c(),we.m(e,Pe)):we&&(we.d(1),we=null),ce[1].pipeline?ge?(ge.p(yn(ce),De),De&2&&g(ge,1)):(ge=zl(yn(ce)),ge.c(),g(ge,1),ge.m(e,null)):ge&&($e(),d(ge,1,1,()=>{ge=null}),pe())},i(ce){Oe||(g(me),g(ge),Oe=!0)},o(ce){d(me),d(ge),Oe=!1},d(ce){ce&&p(e),ve&&ve.d(),le&&le.d(),me&&me.d(),de&&de.d(),we&&we.d(),ge&&ge.d()}}}function ut(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function rg(l,e,n){let t,r,o,s;re(l,cn,i=>n(4,r=i)),re(l,Vt,i=>n(2,o=i)),re(l,Xt,i=>n(3,s=i));let{props:f}=e;return l.$$set=i=>{"props"in i&&n(0,f=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(f.scheme_reference))},[f,t,o,s,r]}class qn extends Y{constructor(e){super(),K(this,e,rg,ng,J,{props:0})}}function lg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function og(l){let e,n;return e=new qn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function sg(l){let e,n,t,r;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[lg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[og,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function ig(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function ag(l){let e,n;return e=new qn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function fg(l){let e,n,t,r;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[ig,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[ag,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function ug(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function cg(l){let e,n;return e=new qn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $g(l){let e,n,t,r;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[ug,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[cg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function pg(l){let e,n,t,r,o,s,f,i,a,u;const c=[q("interventions-points"),{filter:["all",Kn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":xn,"circle-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let m={$$slots:{default:[sg]},$$scope:{ctx:l}};for(let L=0;L<c.length;L+=1)m=x(m,c[L]);e=new _t({props:m});const _=[q("interventions-lines"),{filter:["all",Zn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":Wt,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let S={$$slots:{default:[fg]},$$scope:{ctx:l}};for(let L=0;L<_.length;L+=1)S=x(S,_[L]);t=new Le({props:S});const C=[q("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Wt,"circle-opacity":0,"circle-stroke-color":nt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let y={};for(let L=0;L<C.length;L+=1)y=x(y,C[L]);o=new _t({props:y});const N=[q("interventions-polygons"),{filter:["all",on,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":Q(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[$g]},$$scope:{ctx:l}};for(let L=0;L<N.length;L+=1)D=x(D,N[L]);f=new Ge({props:D});const I=[q("interventions-polygons-outlines"),{filter:["all",on,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*Wt}},{layout:{visibility:l[0]?"visible":"none"}}];let A={};for(let L=0;L<I.length;L+=1)A=x(A,I[L]);return a=new Le({props:A}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(f.$$.fragment),i=O(),b(a.$$.fragment)},m(L,M){v(e,L,M),$(L,n,M),v(t,L,M),$(L,r,M),v(o,L,M),$(L,s,M),v(f,L,M),$(L,i,M),v(a,L,M),u=!0},p(L,M){const E=M&29?ne(c,[c[0],M&24&&{filter:["all",Kn,L[3],L[4]]},c[2],c[3],M&4&&{paint:{"circle-color":L[2],"circle-radius":xn,"circle-opacity":Q(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};M&128&&(E.$$scope={dirty:M,ctx:L}),e.$set(E);const P=M&13?ne(_,[_[0],M&8&&{filter:["all",Zn,L[3]]},_[2],_[3],M&4&&{paint:{"line-color":L[2],"line-width":Wt,"line-opacity":Q(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},_[6]]):{};M&128&&(P.$$scope={dirty:M,ctx:L}),t.$set(P);const R=M&1?ne(C,[C[0],C[1],C[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(R);const U=M&13?ne(N,[N[0],M&8&&{filter:["all",on,L[3]]},N[2],N[3],M&4&&{paint:{"fill-color":L[2],"fill-opacity":Q(.2,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}},N[6]]):{};M&128&&(U.$$scope={dirty:M,ctx:L}),f.$set(U);const H=M&13?ne(I,[I[0],M&8&&{filter:["all",on,L[3]]},M&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*Wt}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(H)},i(L){u||(g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(f.$$.fragment,L),g(a.$$.fragment,L),u=!0)},o(L){d(e.$$.fragment,L),d(t.$$.fragment,L),d(o.$$.fragment,L),d(f.$$.fragment,L),d(a.$$.fragment,L),u=!1},d(L){L&&(p(n),p(r),p(s),p(i)),w(e,L),w(t,L),w(o,L),w(f,L),w(a,L)}}}function mg(l){let e,n;return e=new Ct({props:{data:l[1],$$slots:{default:[pg]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _g(l,e,n){let t,r;re(l,qt,a=>n(5,r=a));let{showSchemes:o}=e,[s]=Dn();const f=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=Eo(r))},[o,t,s,f,i,r]}class gg extends Y{constructor(e){super(),K(this,e,_g,mg,J,{showSchemes:0})}}function Gl(l,e,n){const t=l.slice();return t[13]=e[n],t}function Ul(l,e,n){const t=l.slice();return t[16]=e[n],t}function dg(l){let e,n;return e=new G_({props:{loadFile:l[7]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Wl(l){let e,n,t,r,o;e=new pt({props:{$$slots:{default:[hg]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let f={title:"About this scheme data",$$slots:{default:[bg]},$$scope:{ctx:l}};return l[3]!==void 0&&(f.open=l[3]),t=new Kl({props:f}),W.push(()=>V(t,"open",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const u={};a&524288&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],X(()=>r=!1)),t.$set(c)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function hg(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vl(l){let e,n,t=l[16]+"",r;return{c(){e=T("li"),n=T("p"),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&z(r,t)},d(o){o&&p(e)}}}function bg(l){let e,n,t,r,o=je(l[4].notes),s=[];for(let f=0;f<o.length;f+=1)s[f]=Vl(Ul(l,o,f));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=O(),r=T("ul");for(let f=0;f<s.length;f+=1)s[f].c();G(e,"class","govuk-prose")},m(f,i){$(f,e,i),h(e,n),h(e,t),h(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(f,i){if(i&16){o=je(f[4].notes);let a;for(a=0;a<o.length;a+=1){const u=Ul(f,o,a);s[a]?s[a].p(u,i):(s[a]=Vl(u),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(f){f&&p(e),$t(s,f)}}}function Xl(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let f={};return l[1]!==void 0&&(f.schemesToBeShown=l[1]),l[2]!==void 0&&(f.show=l[2]),e=new Va({props:f}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),r=!0},p(i,a){const u={};!n&&a&2&&(n=!0,u.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,u.show=i[2],X(()=>t=!1)),e.$set(u)},i(i){r||(g(e.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),r=!1},d(i){w(e,i)}}}function Jl(l){let e,n;return e=new K_({props:{scheme:l[13]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Yl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&Jl(l);return{c(){r&&r.c(),n=Me()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&g(r,1)):(r=Jl(o),r.c(),g(r,1),r.m(n.parentNode,n)):r&&($e(),d(r,1,1,()=>{r=null}),pe())},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function vg(l){let e,n,t,r,o,s,f,i,a,u,c=Ln()=="Private (development)",m,_,S,C,y,N,D,I,A;o=new Xo({props:{boundaryGeojson:l[4]}}),a=new Do({});let L=c&&dg(l),M=l[4].notes&&Wl(l);S=new jo({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),y=new lo({props:{errorMessage:l[0]}});let E=l[6].size>0&&Xl(l),P=je(l[6].values()),R=[];for(let H=0;H<P.length;H+=1)R[H]=Yl(Gl(l,P,H));const U=H=>d(R[H],1,1,()=>{R[H]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",r=O(),b(o.$$.fragment),s=O(),f=T("p"),f.textContent=`App version: ${Ln()}`,i=O(),b(a.$$.fragment),u=O(),L&&L.c(),m=O(),M&&M.c(),_=O(),b(S.$$.fragment),C=O(),b(y.$$.fragment),N=O(),E&&E.c(),D=O(),I=T("ul");for(let H=0;H<R.length;H+=1)R[H].c();Te(n,"display","flex"),Te(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(H,j){$(H,e,j),h(e,n),h(n,t),h(n,r),v(o,n,null),h(e,s),h(e,f),h(e,i),v(a,e,null),h(e,u),L&&L.m(e,null),h(e,m),M&&M.m(e,null),h(e,_),v(S,e,null),h(e,C),v(y,e,null),h(e,N),E&&E.m(e,null),h(e,D),h(e,I);for(let F=0;F<R.length;F+=1)R[F]&&R[F].m(I,null);A=!0},p(H,j){const F={};j&16&&(F.boundaryGeojson=H[4]),o.$set(F),c&&L.p(H,j),H[4].notes?M?(M.p(H,j),j&16&&g(M,1)):(M=Wl(H),M.c(),g(M,1),M.m(e,_)):M&&($e(),d(M,1,1,()=>{M=null}),pe());const B={};if(j&1&&(B.errorMessage=H[0]),y.$set(B),H[6].size>0?E?(E.p(H,j),j&64&&g(E,1)):(E=Xl(H),E.c(),g(E,1),E.m(e,D)):E&&($e(),d(E,1,1,()=>{E=null}),pe()),j&66){P=je(H[6].values());let se;for(se=0;se<P.length;se+=1){const ie=Gl(H,P,se);R[se]?(R[se].p(ie,j),g(R[se],1)):(R[se]=Yl(ie),R[se].c(),g(R[se],1),R[se].m(I,null))}for($e(),se=P.length;se<R.length;se+=1)U(se);pe()}},i(H){if(!A){g(o.$$.fragment,H),g(a.$$.fragment,H),g(L),g(M),g(S.$$.fragment,H),g(y.$$.fragment,H),g(E);for(let j=0;j<P.length;j+=1)g(R[j]);A=!0}},o(H){d(o.$$.fragment,H),d(a.$$.fragment,H),d(L),d(M),d(S.$$.fragment,H),d(y.$$.fragment,H),d(E),R=R.filter(Boolean);for(let j=0;j<R.length;j+=1)d(R[j]);A=!1},d(H){H&&p(e),w(o),w(a),L&&L.d(),M&&M.d(),w(S),w(y),E&&E.d(),$t(R,H)}}}function wg(l){let e,n,t,r,o,s,f;return e=new Jo({}),t=new gg({props:{showSchemes:l[2]}}),s=new B_({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),o=T("div"),b(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,r,a),$(i,o,a),v(s,o,null),f=!0},p(i,a){const u={};a&4&&(u.showSchemes=i[2]),t.$set(u)},i(i){f||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),f=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(n),p(r),p(o)),w(e,i),w(t,i),w(s)}}}function kg(l){let e,n,t;return n=new Ro({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[wg]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function yg(l){let e,n;return e=new os({props:{$$slots:{main:[kg],sidebar:[vg]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Sg(l,e,n){let t,r,o;re(l,qt,y=>n(4,t=y)),re(l,Qn,y=>n(5,r=y)),re(l,cn,y=>n(6,o=y)),zn(()=>{zo()});const s=new URLSearchParams(window.location.search);Qn.set(s.get("style")||"dataviz");let f="",i=new Set,a=!0,u=!1;function c(y){try{qt.set(JSON.parse(y)),cn.set(Ta(t)),n(0,f="")}catch(N){n(0,f=`The file you loaded is broken: ${N}`)}}const m=()=>n(3,u=!0);function _(y){u=y,n(3,u)}function S(y){i=y,n(1,i)}function C(y){a=y,n(2,a)}return[f,i,a,u,t,r,o,c,m,_,S,C]}class Cg extends Y{constructor(e){super(),K(this,e,Sg,yg,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Cg({target:document.getElementById("app")});
