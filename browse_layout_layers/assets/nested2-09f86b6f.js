import{S as X,i as x,s as J,e as C,b as B,m as _e,c as $,n as W,d as p,aU as Rs,g as F,h as G,a as L,j as h,p as b,_ as lt,u as z,t as m,q as _,v as w,Q as Dt,T as Rt,U as At,V as qt,b5 as Hn,o as k,am as ye,z as ue,r as ce,av as Ze,y as v,P as H,aa as $e,ab as vn,ac as As,w as K,ad as yn,ae as qs,af as Fe,ag as Fs,ah as Gs,b6 as So,W as Ut,b7 as En,b8 as Co,G as zt,aP as pn,a0 as se,N as be,f as st,aR as To,b4 as te,a9 as De,b9 as ge,K as le,J as qe,a2 as oe,at as re,b1 as Vt,aT as tn,Z as Ve,$ as zs,ba as Zt,bb as Pt,R as Hs,bc as Lo,bd as Io,x as Es,be as Mo,D as No,X as mn,b3 as Sn,bf as Oo,I as jo,k as Cn,F as Po,E as Do,aV as Ro,aW as _n,A as Ao,L as qo,M as Fo,B as Go}from"./index-f4343a31.js";import{e as Bn,s as E,u as Qe,t as zo,q as tt,M as Ho,a as ie,v as we,R as Eo,k as Ft,h as Ke,C as Xe,f as Gt,b as Bo,p as Un,g as Uo,d as Wn,w as Yn,c as Jn,x as Jt,i as en,W as Bs,B as Wo,S as Yo,n as Jo,H as Vo,Z as Qo,G as Zo,m as Vn}from"./ZoomOutMap-6d486c7e.js";import{P as ae,A as Us}from"./Popup-107dbb90.js";function Ko(o){let e;return{c(){e=C("span"),B(e,"class","svelte-kzgqtg"),_e(e,"background",o[0])},m(l,t){$(l,e,t)},p(l,[t]){t&1&&_e(e,"background",l[0])},i:W,o:W,d(l){l&&p(e)}}}function Xo(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Te extends X{constructor(e){super(),x(this,e,Xo,Ko,J,{color:0})}}const xo="/atip/browse_layout_layers/assets/help-d011708a.svg";function er(o){let e,l;const t=o[1].default,n=Dt(t,o,o[4],null);return{c(){e=C("div"),n&&n.c(),B(e,"class","govuk-prose")},m(s,i){$(s,e,i),n&&n.m(e,null),l=!0},p(s,i){n&&n.p&&(!l||i&16)&&Rt(n,t,s,s[4],l?qt(t,s[4],i,null):At(s[4]),null)},i(s){l||(m(n,s),l=!0)},o(s){_(n,s),l=!1},d(s){s&&p(e),n&&n.d(s)}}}function tr(o){let e,l,t,n,s,i,a;function r(u){o[3](u)}let f={title:"Help",$$slots:{default:[er]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.open=o[0]),t=new Rs({props:f}),F.push(()=>G(t,"open",r)),{c(){e=C("button"),e.innerHTML=`<img src="${xo}" title="Help" alt="Help"/>`,l=L(),h(t.$$.fragment),B(e,"class","svelte-7d9d1l")},m(u,c){$(u,e,c),$(u,l,c),b(t,u,c),s=!0,i||(a=lt(e,"click",o[2]),i=!0)},p(u,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,d.open=u[0],z(()=>n=!1)),t.$set(d)},i(u){s||(m(t.$$.fragment,u),s=!0)},o(u){_(t.$$.fragment,u),s=!1},d(u){u&&(p(e),p(l)),w(t,u),i=!1,a()}}}function nr(o,e,l){let{$$slots:t={},$$scope:n}=e,s=!1;const i=()=>l(0,s=!0);function a(r){s=r,l(0,s)}return o.$$set=r=>{"$$scope"in r&&l(4,n=r.$$scope)},[s,t,i,a,n]}class pe extends X{constructor(e){super(),x(this,e,nr,tr,J,{})}}const lr=o=>({}),Qn=o=>({}),sr=o=>({}),Zn=o=>({});function or(o){let e,l,t,n,s,i,a,r,f,u,c;const d=o[4].sidebar,g=Dt(d,o,o[3],Zn),y=o[4].main,T=Dt(y,o,o[3],Qn);return{c(){e=C("div"),l=C("aside"),t=C("div"),g&&g.c(),n=L(),s=C("button"),s.textContent="→",a=L(),r=C("main"),T&&T.c(),B(t,"class","sidebar-content content-container svelte-1n0etgd"),B(s,"type","button"),B(s,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),B(l,"class",i=Hn(o[1]?"":"collapsed")+" svelte-1n0etgd"),_e(l,"--sidebarWidth",o[0]),B(r,"class","svelte-1n0etgd"),B(e,"class","overall-layout svelte-1n0etgd")},m(S,j){$(S,e,j),k(e,l),k(l,t),g&&g.m(t,null),k(l,n),k(l,s),k(e,a),k(e,r),T&&T.m(r,null),f=!0,u||(c=lt(s,"click",o[2]),u=!0)},p(S,[j]){g&&g.p&&(!f||j&8)&&Rt(g,d,S,S[3],f?qt(d,S[3],j,sr):At(S[3]),Zn),(!f||j&2&&i!==(i=Hn(S[1]?"":"collapsed")+" svelte-1n0etgd"))&&B(l,"class",i),(!f||j&1)&&_e(l,"--sidebarWidth",S[0]),T&&T.p&&(!f||j&8)&&Rt(T,y,S,S[3],f?qt(y,S[3],j,lr):At(S[3]),Qn)},i(S){f||(m(g,S),m(T,S),f=!0)},o(S){_(g,S),_(T,S),f=!1},d(S){S&&p(e),g&&g.d(S),T&&T.d(S),u=!1,c()}}}function rr(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:s="25rem"}=e,i=!0;function a(){l(1,i=!i)}return o.$$set=r=>{"sidebarWidth"in r&&l(0,s=r.sidebarWidth),"$$scope"in r&&l(3,n=r.$$scope)},[s,i,a,n,t]}class ir extends X{constructor(e){super(),x(this,e,rr,or,J,{sidebarWidth:0})}}function Kn(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Xn(o){let e,l,t,n=o[1]+"",s,i,a;return l=new Te({props:{color:o[2]}}),{c(){e=C("li"),h(l.$$.fragment),t=L(),s=v(n),i=L()},m(r,f){$(r,e,f),b(l,e,null),k(e,t),k(e,s),k(e,i),a=!0},p(r,f){const u={};f&1&&(u.color=r[2]),l.$set(u),(!a||f&1)&&n!==(n=r[1]+"")&&H(s,n)},i(r){a||(m(l.$$.fragment,r),a=!0)},o(r){_(l.$$.fragment,r),a=!1},d(r){r&&p(e),w(l)}}}function fr(o){let e,l,t=ye(o[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=Xn(Kn(o,t,i));const s=i=>_(n[i],1,1,()=>{n[i]=null});return{c(){e=C("ul");for(let i=0;i<n.length;i+=1)n[i].c()},m(i,a){$(i,e,a);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);l=!0},p(i,[a]){if(a&1){t=ye(i[0]);let r;for(r=0;r<t.length;r+=1){const f=Kn(i,t,r);n[r]?(n[r].p(f,a),m(n[r],1)):(n[r]=Xn(f),n[r].c(),m(n[r],1),n[r].m(e,null))}for(ue(),r=t.length;r<n.length;r+=1)s(r);ce()}},i(i){if(!l){for(let a=0;a<t.length;a+=1)m(n[a]);l=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)_(n[a]);l=!1},d(i){i&&p(e),Ze(n,i)}}}function ar(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Kt extends X{constructor(e){super(),x(this,e,ar,fr,J,{rows:0})}}function xn(o){let e=o[0],l,t,n=el(o);return{c(){n.c(),l=$e()},m(s,i){n.m(s,i),$(s,l,i),t=!0},p(s,i){i&1&&J(e,e=s[0])?(ue(),_(n,1,1,W),ce(),n=el(s),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(s,i)},i(s){t||(m(n),t=!0)},o(s){_(n),t=!1},d(s){s&&p(l),n.d(s)}}}function el(o){let e;const l=o[16].default,t=Dt(l,o,o[15],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&32768)&&Rt(t,l,n,n[15],e?qt(l,n[15],s,null):At(n[15]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function ur(o){let e,l,t=o[0]&&xn(o);return{c(){t&&t.c(),e=$e()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&m(t,1)):(t=xn(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ue(),_(t,1,1,()=>{t=null}),ce())},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function cr(o,e,l){let t,n,{$$slots:s={},$$scope:i}=e,{id:a=vn("raster-source")}=e,{tiles:r}=e,{tileSize:f=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:d=null}=e,{minzoom:g=null}=e,{maxzoom:y=null}=e,{volatile:T=null}=e;const{map:S,self:j}=As();K(o,S,D=>l(14,n=D)),K(o,j,D=>l(0,t=D));let R,P=!0;return yn(()=>{t&&R&&n&&(qs(S,t,R),Fe(j,t=null,t),l(12,R=void 0))}),o.$$set=D=>{"id"in D&&l(3,a=D.id),"tiles"in D&&l(4,r=D.tiles),"tileSize"in D&&l(5,f=D.tileSize),"bounds"in D&&l(6,u=D.bounds),"scheme"in D&&l(7,c=D.scheme),"attribution"in D&&l(8,d=D.attribution),"minzoom"in D&&l(9,g=D.minzoom),"maxzoom"in D&&l(10,y=D.maxzoom),"volatile"in D&&l(11,T=D.volatile),"$$scope"in D&&l(15,i=D.$$scope)},o.$$.update=()=>{o.$$.dirty&24569&&n&&t!==a&&(Fe(j,t=a,t),Fs(n,t,Gs({type:"raster",tiles:r,tileSize:f,bounds:u,scheme:c,attribution:d,minzoom:g,maxzoom:y,volatile:T}),D=>n&&D===t,()=>{t&&(l(12,R=n==null?void 0:n.getSource(t)),l(13,P=!0))})),o.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,R=n==null?void 0:n.getSource(a))})),o.$$.dirty&12304&&R&&(P?l(13,P=!1):R.setTiles(r))},[t,S,j,a,r,f,u,c,d,g,y,T,R,P,n,i,s]}class $r extends X{constructor(e){super(),x(this,e,cr,ur,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function pr(o){let e;const l=o[16].default,t=Dt(l,o,o[24],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16777216)&&Rt(t,l,n,n[24],e?qt(l,n[24],s,null):At(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function mr(o){let e,l,t;function n(i){o[17](i)}let s={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[pr]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.hovered=o[0]),e=new So({props:s}),F.push(()=>G(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const r={};a&2&&(r.id=i[1]),a&4&&(r.source=i[2]),a&8&&(r.sourceLayer=i[3]),a&16&&(r.beforeId=i[4]),a&32&&(r.beforeLayerType=i[5]),a&64&&(r.paint=i[6]),a&128&&(r.layout=i[7]),a&256&&(r.filter=i[8]),a&512&&(r.applyToClusters=i[9]),a&1024&&(r.minzoom=i[10]),a&2048&&(r.maxzoom=i[11]),a&4096&&(r.hoverCursor=i[12]),a&8192&&(r.manageHoverState=i[13]),a&16384&&(r.eventsIfTopMost=i[14]),a&32768&&(r.interactive=i[15]),a&16777216&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.hovered=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function _r(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:s=vn("symbol")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:r=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:d=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:j=!1}=e,{hovered:R=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:D=!0}=e;function N(q){R=q,l(0,R)}function O(q){Ut.call(this,o,q)}function M(q){Ut.call(this,o,q)}function I(q){Ut.call(this,o,q)}function A(q){Ut.call(this,o,q)}function Y(q){Ut.call(this,o,q)}function V(q){Ut.call(this,o,q)}return o.$$set=q=>{"id"in q&&l(1,s=q.id),"source"in q&&l(2,i=q.source),"sourceLayer"in q&&l(3,a=q.sourceLayer),"beforeId"in q&&l(4,r=q.beforeId),"beforeLayerType"in q&&l(5,f=q.beforeLayerType),"paint"in q&&l(6,u=q.paint),"layout"in q&&l(7,c=q.layout),"filter"in q&&l(8,d=q.filter),"applyToClusters"in q&&l(9,g=q.applyToClusters),"minzoom"in q&&l(10,y=q.minzoom),"maxzoom"in q&&l(11,T=q.maxzoom),"hoverCursor"in q&&l(12,S=q.hoverCursor),"manageHoverState"in q&&l(13,j=q.manageHoverState),"hovered"in q&&l(0,R=q.hovered),"eventsIfTopMost"in q&&l(14,P=q.eventsIfTopMost),"interactive"in q&&l(15,D=q.interactive),"$$scope"in q&&l(24,n=q.$$scope)},[R,s,i,a,r,f,u,c,d,g,y,T,S,j,P,D,t,N,O,M,I,A,Y,V,n]}class Tn extends X{constructor(e){super(),x(this,e,_r,mr,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function tl(o){let e=o[0],l,t,n=nl(o);return{c(){n.c(),l=$e()},m(s,i){n.m(s,i),$(s,l,i),t=!0},p(s,i){i&1&&J(e,e=s[0])?(ue(),_(n,1,1,W),ce(),n=nl(s),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(s,i)},i(s){t||(m(n),t=!0)},o(s){_(n),t=!1},d(s){s&&p(l),n.d(s)}}}function nl(o){let e;const l=o[15].default,t=Dt(l,o,o[14],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16384)&&Rt(t,l,n,n[14],e?qt(l,n[14],s,null):At(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function gr(o){let e,l,t=o[0]&&tl(o);return{c(){t&&t.c(),e=$e()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&m(t,1)):(t=tl(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ue(),_(t,1,1,()=>{t=null}),ce())},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function dr(o,e,l){let t,n,{$$slots:s={},$$scope:i}=e,{id:a=vn("vector")}=e,{url:r=null}=e,{tiles:f=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:d=null}=e,{attribution:g=null}=e,{minzoom:y=null}=e,{maxzoom:T=null}=e,{volatile:S=null}=e;if(r&&r.includes("pmtiles://")&&!En.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let D=new Co;En.addProtocol("pmtiles",D.tile)}const{map:j,self:R}=As();K(o,j,D=>l(13,n=D)),K(o,R,D=>l(0,t=D));let P;return yn(()=>{t&&n&&(qs(j,t,P),Fe(R,t=null,t),P=void 0)}),o.$$set=D=>{"id"in D&&l(3,a=D.id),"url"in D&&l(4,r=D.url),"tiles"in D&&l(5,f=D.tiles),"promoteId"in D&&l(6,u=D.promoteId),"bounds"in D&&l(7,c=D.bounds),"scheme"in D&&l(8,d=D.scheme),"attribution"in D&&l(9,g=D.attribution),"minzoom"in D&&l(10,y=D.minzoom),"maxzoom"in D&&l(11,T=D.maxzoom),"volatile"in D&&l(12,S=D.volatile),"$$scope"in D&&l(14,i=D.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==a&&(Fe(R,t=a,t),Fs(n,t,Gs({type:"vector",url:r,tiles:f,promoteId:u,bounds:c,scheme:d,attribution:g,minzoom:y,maxzoom:T,volatile:S}),D=>n&&D===t,()=>{t&&(P=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{P=n==null?void 0:n.getSource(a)}))},[t,j,R,a,r,f,u,c,d,g,y,T,S,n,i,s]}class de extends X{constructor(e){super(),x(this,e,dr,gr,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function ll(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function hr(o){let e,l,t;return l=new st({props:{$$slots:{default:[wr]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=C("div"),h(l.$$.fragment)},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&16384&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function br(o){let e,l,t,n,s,i,a,r,f,u;l=new st({props:{$$slots:{default:[kr]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&sl(o);s=new tt({props:{label:"Help",$$slots:{default:[vr]},$$scope:{ctx:o}}}),a=new To({}),a.$on("click",o[3]);let d=ye(o[0]),g=[];for(let T=0;T<d.length;T+=1)g[T]=ol(ll(o,d,T));const y=T=>_(g[T],1,1,()=>{g[T]=null});return{c(){e=C("div"),h(l.$$.fragment),t=L(),c&&c.c(),n=L(),h(s.$$.fragment),i=L(),h(a.$$.fragment),r=L();for(let T=0;T<g.length;T+=1)g[T].c();f=$e()},m(T,S){$(T,e,S),b(l,e,null),$(T,t,S),c&&c.m(T,S),$(T,n,S),b(s,T,S),$(T,i,S),b(a,T,S),$(T,r,S);for(let j=0;j<g.length;j+=1)g[j]&&g[j].m(T,S);$(T,f,S),u=!0},p(T,S){const j={};S&16384&&(j.$$scope={dirty:S,ctx:T}),l.$set(j),T[2]?c?c.p(T,S):(c=sl(T),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const R={};if(S&16384&&(R.$$scope={dirty:S,ctx:T}),s.$set(R),S&65){d=ye(T[0]);let P;for(P=0;P<d.length;P+=1){const D=ll(T,d,P);g[P]?(g[P].p(D,S),m(g[P],1)):(g[P]=ol(D),g[P].c(),m(g[P],1),g[P].m(f.parentNode,f))}for(ue(),P=d.length;P<g.length;P+=1)y(P);ce()}},i(T){if(!u){m(l.$$.fragment,T),m(s.$$.fragment,T),m(a.$$.fragment,T);for(let S=0;S<d.length;S+=1)m(g[S]);u=!0}},o(T){_(l.$$.fragment,T),_(s.$$.fragment,T),_(a.$$.fragment,T),g=g.filter(Boolean);for(let S=0;S<g.length;S+=1)_(g[S]);u=!1},d(T){T&&(p(e),p(t),p(n),p(i),p(r),p(f)),w(l),c&&c.d(T),w(s,T),w(a,T),Ze(g,T)}}}function wr(o){let e;return{c(){e=v("Measure lines")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function kr(o){let e;return{c(){e=v("Stop measuring")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function sl(o){let e,l,t=o[2].toFixed(2)+"",n,s;return{c(){e=C("p"),l=v("Length: "),n=v(t),s=v(" meters")},m(i,a){$(i,e,a),k(e,l),k(e,n),k(e,s)},p(i,a){a&4&&t!==(t=i[2].toFixed(2)+"")&&H(n,t)},d(i){i&&p(e)}}}function vr(o){let e;return{c(){e=C("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function yr(o){let e,l;return{c(){e=C("span"),l=L(),B(e,"class","dot svelte-1tzt432")},m(t,n){$(t,e,n),$(t,l,n)},p:W,d(t){t&&(p(e),p(l))}}}function ol(o){let e,l,t;function n(a){o[7](a,o[11],o[12],o[13])}function s(){return o[8](o[13])}let i={draggable:!0,$$slots:{default:[yr]},$$scope:{ctx:o}};return o[11]!==void 0&&(i.lngLat=o[11]),e=new Ho({props:i}),F.push(()=>G(e,"lngLat",n)),e.$on("click",s),{c(){h(e.$$.fragment)},m(a,r){b(e,a,r),t=!0},p(a,r){o=a;const f={};r&16384&&(f.$$scope={dirty:r,ctx:o}),!l&&r&1&&(l=!0,f.lngLat=o[11],z(()=>l=!1)),e.$set(f)},i(a){t||(m(e.$$.fragment,a),t=!0)},o(a){_(e.$$.fragment,a),t=!1},d(a){w(e,a)}}}function Sr(o){let e,l;const t=[E("measurement-line"),{paint:{"line-color":Qe.measuringLine,"line-width":5}}];let n={};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a={};e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Cr(o){let e,l,t,n,s,i,a;const r=[br,hr],f=[];function u(c,d){return c[1]?0:1}return e=u(o),l=f[e]=r[e](o),n=new zt({props:{data:o[0].length<2?Bn():pn(o[0]),$$slots:{default:[Sr]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),h(n.$$.fragment)},m(c,d){f[e].m(c,d),$(c,t,d),b(n,c,d),s=!0,i||(a=lt(window,"keydown",o[5]),i=!0)},p(c,[d]){let g=e;e=u(c),e===g?f[e].p(c,d):(ue(),_(f[g],1,1,()=>{f[g]=null}),ce(),l=f[e],l?l.p(c,d):(l=f[e]=r[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const y={};d&1&&(y.data=c[0].length<2?Bn():pn(c[0])),d&16384&&(y.$$scope={dirty:d,ctx:c}),n.$set(y)},i(c){s||(m(l),m(n.$$.fragment,c),s=!0)},o(c){_(l),_(n.$$.fragment,c),s=!1},d(c){c&&p(t),f[e].d(c),w(n,c),i=!1,a()}}}function Tr(o,e,l){let t,n=!1,s=[];function i(y){return y.length<2?null:1e3*zo(pn(y),{units:"kilometers"})}function a(y){l(0,s=[...s,y.detail.lngLat.toArray()])}function r(){l(1,n=!1),l(0,s=[])}function f(y){n&&y.key==="Escape"&&(y.stopPropagation(),r())}function u(y){s.splice(y,1),l(0,s)}function c(y,T,S,j){S[j]=y,l(0,s)}const d=y=>u(y),g=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=i(s))},[s,n,t,a,r,f,u,c,d,g]}class Lr extends X{constructor(e){super(),x(this,e,Tr,Cr,J,{})}}const ee={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Ae=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Ir(o){let e;return{c(){e=v(`Open Government License
  `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Mr(o){let e,l,t,n,s;return t=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ir]},$$scope:{ctx:o}}}),{c(){e=C("p"),l=v("License: "),h(t.$$.fragment),n=v(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,a){$(i,e,a),k(e,l),b(t,e,null),k(e,n),s=!0},p(i,[a]){const r={};a&1&&(r.$$scope={dirty:a,ctx:i}),t.$set(r)},i(i){s||(m(t.$$.fragment,i),s=!0)},o(i){_(t.$$.fragment,i),s=!1},d(i){i&&p(e),w(t)}}}class Le extends X{constructor(e){super(),x(this,e,null,Mr,J,{})}}function rl(o,e,l){const t=o.slice();return t[2]=e[l],t}function il(o,e,l){const t=o.slice();return t[5]=e[l],t}function fl(o){let e,l;return{c(){e=C("span"),l=v(` 
    `),_e(e,"background",o[5]),_e(e,"width","100%"),_e(e,"border","1px solid black")},m(t,n){$(t,e,n),k(e,l)},p(t,n){n&1&&_e(e,"background",t[5])},d(t){t&&p(e)}}}function al(o){let e,l=o[2]+"",t;return{c(){e=C("span"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&2&&l!==(l=n[2]+"")&&H(t,l)},d(n){n&&p(e)}}}function Nr(o){let e,l,t,n=ye(o[0]),s=[];for(let r=0;r<n.length;r+=1)s[r]=fl(il(o,n,r));let i=ye(o[1]),a=[];for(let r=0;r<i.length;r+=1)a[r]=al(rl(o,i,r));return{c(){e=C("div");for(let r=0;r<s.length;r+=1)s[r].c();l=L(),t=C("div");for(let r=0;r<a.length;r+=1)a[r].c();_e(e,"display","flex"),_e(t,"display","flex"),_e(t,"justify-content","space-between")},m(r,f){$(r,e,f);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);$(r,l,f),$(r,t,f);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null)},p(r,[f]){if(f&1){n=ye(r[0]);let u;for(u=0;u<n.length;u+=1){const c=il(r,n,u);s[u]?s[u].p(c,f):(s[u]=fl(c),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=n.length}if(f&2){i=ye(r[1]);let u;for(u=0;u<i.length;u+=1){const c=rl(r,i,u);a[u]?a[u].p(c,f):(a[u]=al(c),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}},i:W,o:W,d(r){r&&(p(e),p(l),p(t)),Ze(s,r),Ze(a,r)}}}function Or(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=s=>{"colorScale"in s&&l(0,t=s.colorScale),"limits"in s&&l(1,n=s.limits)},[t,n]}class Ge extends X{constructor(e){super(),x(this,e,Or,Nr,J,{colorScale:0,limits:1})}}let Ln=De(new Set);function he(o){let e=new URLSearchParams(window.location.search).has(o),l=De(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),Ln.update(s=>(t?s.add(o):s.delete(o),s)),window.history.replaceState(null,"",n.toString())}),l}function Ht(o,e,l,t){let n=e,s=new URLSearchParams(window.location.search).get(o);if(s!=null)try{n=t(s)}catch(a){console.warn(`Parsing URL parameter ${o}=${s} failed, using default value: ${a}`)}let i=De(n);return i.subscribe(a=>{let r=new URL(window.location.href),f=l(a);f==null?r.searchParams.delete(o):r.searchParams.set(o,f),Ln.update(u=>(f==null?u.delete(o):u.add(o),u)),window.history.replaceState(null,"",r.toString())}),i}let gn=De(new Map);function jr(o){let e;return{c(){e=v(o[1])},m(l,t){$(l,e,t)},p(l,t){t&2&&H(e,l[1])},d(l){l&&p(e)}}}function Pr(o){let e,l,t,n,s;function i(u){o[5](u)}let a={$$slots:{default:[jr]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));const r=o[4].default,f=Dt(r,o,o[7],null);return{c(){h(e.$$.fragment),t=L(),n=C("div"),f&&f.c()},m(u,c){b(e,u,c),$(u,t,c),$(u,n,c),f&&f.m(n,null),o[6](n),s=!0},p(u,[c]){const d={};c&130&&(d.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,d.checked=u[0],z(()=>l=!1)),e.$set(d),f&&f.p&&(!s||c&128)&&Rt(f,r,u,u[7],s?qt(r,u[7],c,null):At(u[7]),null)},i(u){s||(m(e.$$.fragment,u),m(f,u),s=!0)},o(u){_(e.$$.fragment,u),_(f,u),s=!1},d(u){u&&(p(t),p(n)),w(e,u),f&&f.d(u),o[6](null)}}}function Dr(o,e,l){let{$$slots:t={},$$scope:n}=e,{name:s}=e,{title:i}=e,{show:a}=e,r=null;yn(()=>{gn.update(c=>(c.delete(s),c))});function f(c){a=c,l(0,a)}function u(c){F[c?"unshift":"push"](()=>{r=c,l(2,r),l(3,s)})}return o.$$set=c=>{"name"in c&&l(3,s=c.name),"title"in c&&l(1,i=c.title),"show"in c&&l(0,a=c.show),"$$scope"in c&&l(7,n=c.$$scope)},o.$$.update=()=>{o.$$.dirty&12&&r&&gn.update(c=>(l(2,r.style.display="none",r),c.set(s,r),c))},[a,i,r,s,t,f,u,n]}class me extends X{constructor(e){super(),x(this,e,Dr,Pr,J,{name:3,title:1,show:0})}}function ul(o){const e=o[15].OA21CD;o[16]=e;const l=o[15][o[3].kind];o[17]=l}function Rr(o){let e;return{c(){e=v("Percent of households with a car")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ar(o){let e;return{c(){e=v(`NOMIS TS045
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function qr(o){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Fr(o){let e;return{c(){e=v(`Open Government License
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Gr(o){let e,l,t,n,s,i,a,r,f,u,c,d;return t=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ar]},$$scope:{ctx:o}}}),s=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[qr]},$$scope:{ctx:o}}}),u=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Fr]},$$scope:{ctx:o}}}),{c(){e=C("p"),l=v("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),n=v(". Output area boundaries from "),h(s.$$.fragment),i=v("."),a=L(),r=C("p"),f=v("License: "),h(u.$$.fragment),c=v(`. Contains OS data © Crown copyright and database
          right 2023.`)},m(g,y){$(g,e,y),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,i),$(g,a,y),$(g,r,y),k(r,f),b(u,r,null),k(r,c),d=!0},p(g,y){const T={};y&262144&&(T.$$scope={dirty:y,ctx:g}),t.$set(T);const S={};y&262144&&(S.$$scope={dirty:y,ctx:g}),s.$set(S);const j={};y&262144&&(j.$$scope={dirty:y,ctx:g}),u.$set(j)},i(g){d||(m(t.$$.fragment,g),m(s.$$.fragment,g),m(u.$$.fragment,g),d=!0)},o(g){_(t.$$.fragment,g),_(s.$$.fragment,g),_(u.$$.fragment,g),d=!1},d(g){g&&(p(e),p(a),p(r)),w(t),w(s),w(u)}}}function zr(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Gr]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&262144&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function cl(o){let e,l;return e=new Ge({props:{colorScale:o[4],limits:at(o[3].kind)}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=at(t[3].kind)),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Hr(o){let e;return{c(){e=v("Average cars per household")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Er(o){let e;return{c(){e=v(`NOMIS TS045
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Br(o){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ur(o){let e;return{c(){e=v(`Open Government License
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Wr(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y;return s=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Er]},$$scope:{ctx:o}}}),a=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Br]},$$scope:{ctx:o}}}),d=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ur]},$$scope:{ctx:o}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown
          here assumes 3.`,l=L(),t=C("p"),n=v("Car/van availability data is from the 2021 census, via "),h(s.$$.fragment),i=v(". Output area boundaries from "),h(a.$$.fragment),r=v("."),f=L(),u=C("p"),c=v("License: "),h(d.$$.fragment),g=v(`. Contains OS data © Crown copyright and database
          right 2023.`)},m(T,S){$(T,e,S),$(T,l,S),$(T,t,S),k(t,n),b(s,t,null),k(t,i),b(a,t,null),k(t,r),$(T,f,S),$(T,u,S),k(u,c),b(d,u,null),k(u,g),y=!0},p(T,S){const j={};S&262144&&(j.$$scope={dirty:S,ctx:T}),s.$set(j);const R={};S&262144&&(R.$$scope={dirty:S,ctx:T}),a.$set(R);const P={};S&262144&&(P.$$scope={dirty:S,ctx:T}),d.$set(P)},i(T){y||(m(s.$$.fragment,T),m(a.$$.fragment,T),m(d.$$.fragment,T),y=!0)},o(T){_(s.$$.fragment,T),_(a.$$.fragment,T),_(d.$$.fragment,T),y=!1},d(T){T&&(p(e),p(l),p(t),p(f),p(u)),w(s),w(a),w(d)}}}function Yr(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Wr]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&262144&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function $l(o){let e,l;return e=new Ge({props:{colorScale:o[4],limits:at(o[3].kind)}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=at(t[3].kind)),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Jr(o){let e;return{c(){e=v("Population density")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Vr(o){let e;return{c(){e=v(`NOMIS TS006
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Qr(o){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Zr(o){let e,l,t,n,s,i,a,r,f;return t=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Vr]},$$scope:{ctx:o}}}),s=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Qr]},$$scope:{ctx:o}}}),r=new Le({}),{c(){e=C("p"),l=v("Population density data is from the 2021 census, via "),h(t.$$.fragment),n=v(". Output area boundaries from "),h(s.$$.fragment),i=v("."),a=L(),h(r.$$.fragment)},m(u,c){$(u,e,c),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,i),$(u,a,c),b(r,u,c),f=!0},p(u,c){const d={};c&262144&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const g={};c&262144&&(g.$$scope={dirty:c,ctx:u}),s.$set(g)},i(u){f||(m(t.$$.fragment,u),m(s.$$.fragment,u),m(r.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(s.$$.fragment,u),_(r.$$.fragment,u),f=!1},d(u){u&&(p(e),p(a)),w(t),w(s),w(r,u)}}}function Kr(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Zr]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&262144&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function pl(o){let e,l,t,n;return t=new Ge({props:{colorScale:o[4],limits:at(o[3].kind).map(ml)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",l=L(),h(t.$$.fragment)},m(s,i){$(s,e,i),$(s,l,i),b(t,s,i),n=!0},p(s,i){const a={};i&8&&(a.limits=at(s[3].kind).map(ml)),t.$set(a)},i(s){n||(m(t.$$.fragment,s),n=!0)},o(s){_(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function Xr(o){let e,l,t,n,s,i,a,r,f,u,c,d,g;function y(M){o[7](M)}let T={$$slots:{right:[zr],default:[Rr]},$$scope:{ctx:o}};o[0]!==void 0&&(T.checked=o[0]),e=new ie({props:T}),F.push(()=>G(e,"checked",y)),e.$on("change",o[8]);let S=o[3].kind=="percent_households_with_car"&&cl(o);function j(M){o[9](M)}let R={$$slots:{right:[Yr],default:[Hr]},$$scope:{ctx:o}};o[1]!==void 0&&(R.checked=o[1]),s=new ie({props:R}),F.push(()=>G(s,"checked",j)),s.$on("change",o[10]);let P=o[3].kind=="average_cars_per_household"&&$l(o);function D(M){o[11](M)}let N={$$slots:{right:[Kr],default:[Jr]},$$scope:{ctx:o}};o[2]!==void 0&&(N.checked=o[2]),f=new ie({props:N}),F.push(()=>G(f,"checked",D)),f.$on("change",o[12]);let O=o[3].kind=="population_density"&&pl(o);return{c(){h(e.$$.fragment),t=L(),S&&S.c(),n=L(),h(s.$$.fragment),a=L(),P&&P.c(),r=L(),h(f.$$.fragment),c=L(),O&&O.c(),d=$e()},m(M,I){b(e,M,I),$(M,t,I),S&&S.m(M,I),$(M,n,I),b(s,M,I),$(M,a,I),P&&P.m(M,I),$(M,r,I),b(f,M,I),$(M,c,I),O&&O.m(M,I),$(M,d,I),g=!0},p(M,I){const A={};I&262144&&(A.$$scope={dirty:I,ctx:M}),!l&&I&1&&(l=!0,A.checked=M[0],z(()=>l=!1)),e.$set(A),M[3].kind=="percent_households_with_car"?S?(S.p(M,I),I&8&&m(S,1)):(S=cl(M),S.c(),m(S,1),S.m(n.parentNode,n)):S&&(ue(),_(S,1,1,()=>{S=null}),ce());const Y={};I&262144&&(Y.$$scope={dirty:I,ctx:M}),!i&&I&2&&(i=!0,Y.checked=M[1],z(()=>i=!1)),s.$set(Y),M[3].kind=="average_cars_per_household"?P?(P.p(M,I),I&8&&m(P,1)):(P=$l(M),P.c(),m(P,1),P.m(r.parentNode,r)):P&&(ue(),_(P,1,1,()=>{P=null}),ce());const V={};I&262144&&(V.$$scope={dirty:I,ctx:M}),!u&&I&4&&(u=!0,V.checked=M[2],z(()=>u=!1)),f.$set(V),M[3].kind=="population_density"?O?(O.p(M,I),I&8&&m(O,1)):(O=pl(M),O.c(),m(O,1),O.m(d.parentNode,d)):O&&(ue(),_(O,1,1,()=>{O=null}),ce())},i(M){g||(m(e.$$.fragment,M),m(S),m(s.$$.fragment,M),m(P),m(f.$$.fragment,M),m(O),g=!0)},o(M){_(e.$$.fragment,M),_(S),_(s.$$.fragment,M),_(P),_(f.$$.fragment,M),_(O),g=!1},d(M){M&&(p(t),p(n),p(a),p(r),p(c),p(d)),w(e,M),S&&S.d(M),w(s,M),P&&P.d(M),w(f,M),O&&O.d(M)}}}function xr(o){let e,l,t,n=o[17].toLocaleString()+"",s,i,a=o[16]+"",r;return{c(){e=C("p"),l=v("There are "),t=C("b"),s=v(n),i=v(`
          people per square kilometre in `),r=v(a)},m(f,u){$(f,e,u),k(e,l),k(e,t),k(t,s),k(e,i),k(e,r)},p(f,u){u&32776&&n!==(n=f[17].toLocaleString()+"")&&H(s,n),u&32768&&a!==(a=f[16]+"")&&H(r,a)},d(f){f&&p(e)}}}function ei(o){let e,l,t=o[16]+"",n,s,i,a=o[17]+"",r,f;return{c(){e=C("p"),l=v("Households in "),n=v(t),s=v(` have an average of
          `),i=C("b"),r=v(a),f=v(`
          cars`)},m(u,c){$(u,e,c),k(e,l),k(e,n),k(e,s),k(e,i),k(i,r),k(e,f)},p(u,c){c&32768&&t!==(t=u[16]+"")&&H(n,t),c&32776&&a!==(a=u[17]+"")&&H(r,a)},d(u){u&&p(e)}}}function ti(o){let e,l,t=o[17]+"",n,s,i,a=o[16]+"",r,f;return{c(){e=C("p"),l=C("b"),n=v(t),s=v("%"),i=v(`
          of households in `),r=v(a),f=v(" have 1 or more cars")},m(u,c){$(u,e,c),k(e,l),k(l,n),k(l,s),k(e,i),k(e,r),k(e,f)},p(u,c){c&32776&&t!==(t=u[17]+"")&&H(n,t),c&32768&&a!==(a=u[16]+"")&&H(r,a)},d(u){u&&p(e)}}}function ni(o){ul(o);let e;function l(s,i){return s[3].kind=="percent_households_with_car"?ti:s[3].kind=="average_cars_per_household"?ei:xr}let t=l(o),n=t(o);return{c(){n.c(),e=$e()},m(s,i){n.m(s,i),$(s,e,i)},p(s,i){ul(s),t===(t=l(s))&&n?n.p(s,i):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function li(o){let e,l;return e=new ae({props:{$$slots:{default:[ni,({props:t})=>({15:t}),({props:t})=>t?32768:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&294920&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function si(o){let e,l,t,n;const s=[E(Ee),{sourceLayer:Ee},{paint:{"fill-color":we(["get",o[3].kind],at(o[3].kind),o[4]),"fill-opacity":le(.5,.7)}},{layout:{visibility:o[3].kind!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[li]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=se(i,s[f]);e=new qe({props:i}),e.$on("click",o[6]);const a=[E(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[3].kind!=""?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=se(r,a[f]);return t=new be({props:r}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&24?oe(s,[u&0&&re(E(Ee)),u&0&&{sourceLayer:Ee},u&24&&{paint:{"fill-color":we(["get",f[3].kind],at(f[3].kind),f[4]),"fill-opacity":le(.5,.7)}},u&8&&{layout:{visibility:f[3].kind!=""?"visible":"none"}},s[4],s[5],s[6]]):{};u&262152&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&8?oe(a,[u&0&&re(E(`${Ee}-outline`)),u&0&&{sourceLayer:Ee},a[2],u&8&&{layout:{visibility:f[3].kind!=""?"visible":"none"}}]):{};t.$set(d)},i(f){n||(m(e.$$.fragment,f),m(t.$$.fragment,f),n=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function oi(o){let e,l,t,n,s;function i(r){o[13](r)}let a={name:Ee,title:"TODO the 3 census layers",$$slots:{default:[Xr]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Ee}.pmtiles`,$$slots:{default:[si]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&262159&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&262152&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Ee="census_output_areas";function ri(o){return o.show?o.kind:null}function ii(o){return{show:!0,kind:o}}function at(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const ml=o=>o.toLocaleString();function fi(o,e,l){let t,n=ee.sequential_low_to_high,i=Ht(Ee,{show:!1,kind:""},ri,ii);K(o,i,R=>l(3,t=R));let a=t.kind=="percent_households_with_car",r=t.kind=="average_cars_per_household",f=t.kind=="population_density";function u(R){let P=R.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${P}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${P}`,"_blank")}function c(R){a=R,l(0,a)}const d=()=>{l(1,r=!1),l(2,f=!1)};function g(R){r=R,l(1,r)}const y=()=>{l(0,a=!1),l(2,f=!1)};function T(R){f=R,l(2,f)}const S=()=>{l(0,a=!1),l(1,r=!1)};function j(R){a=R,l(0,a)}return o.$$.update=()=>{o.$$.dirty&7&&(a?(Fe(i,t.show=!0,t),Fe(i,t.kind="percent_households_with_car",t)):r?(Fe(i,t.show=!0,t),Fe(i,t.kind="average_cars_per_household",t)):f?(Fe(i,t.show=!0,t),Fe(i,t.kind="population_density",t)):(Fe(i,t.show=!1,t),Fe(i,t.kind="",t)))},[a,r,f,t,n,i,u,c,d,g,y,T,S,j]}class ai extends X{constructor(e){super(),x(this,e,fi,oi,J,{})}}function ui(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=L(),t=v(Ws)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function ci(o){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $i(o){let e,l,t,n,s,i,a;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ci]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=C("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of December 2022."),s=L(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(m(t.$$.fragment,r),m(i.$$.fragment,r),a=!0)},o(r){_(t.$$.fragment,r),_(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function pi(o){let e,l,t;return l=new pe({props:{$$slots:{default:[$i]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function mi(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[pi],default:[ui]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function _i(o){let e,l=o[5].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=n[5].name+"")&&H(t,l)},d(n){n&&p(e)}}}function gi(o){let e,l;return e=new ae({props:{$$slots:{default:[_i,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function di(o){let e,l,t,n;const s=[E(pt),{paint:{"fill-color":o[1],"fill-opacity":le(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[gi]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=se(i,s[f]);e=new qe({props:i}),e.$on("click",bi);const a=[E(`${pt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=se(r,a[f]);return t=new be({props:r}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&3?oe(s,[u&0&&re(E(pt)),u&2&&{paint:{"fill-color":f[1],"fill-opacity":le(0,.5)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}},s[3],s[4],s[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&3?oe(a,[u&0&&re(E(`${pt}-outline`)),u&2&&{paint:{"line-color":f[1],"line-width":2.5}},u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(m(e.$$.fragment,f),m(t.$$.fragment,f),n=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function hi(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:pt,title:Ws,$$slots:{default:[mi]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new zt({props:{data:`${ge()}/v1/${pt}.geojson`,$$slots:{default:[di]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let pt="combined_authorities",Ws="Combined authorities";function bi(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH22CD}`,"_blank")}function wi(o,e,l){let t,n=ee.combined_authorities,s=he(pt);K(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class ki extends X{constructor(e){super(),x(this,e,wi,hi,J,{})}}function vi(o){let e;return{c(){e=v(Ys)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function yi(o){let e;return{c(){e=v(`DLUCH GIS
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Si(o){let e;return{c(){e=v(`here
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ci(o){let e,l,t,n,s,i,a,r,f;return t=new te({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[yi]},$$scope:{ctx:o}}}),s=new te({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Si]},$$scope:{ctx:o}}}),r=new Le({}),{c(){e=C("p"),l=v("The 2019 English IMD scores come from "),h(t.$$.fragment),n=v(`. Note the LSOAs identified are from the 2011 census. A
          detailed breakdown of the score across different categories can be
          found `),h(s.$$.fragment),i=v("."),a=L(),h(r.$$.fragment)},m(u,c){$(u,e,c),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,i),$(u,a,c),b(r,u,c),f=!0},p(u,c){const d={};c&128&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const g={};c&128&&(g.$$scope={dirty:c,ctx:u}),s.$set(g)},i(u){f||(m(t.$$.fragment,u),m(s.$$.fragment,u),m(r.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(s.$$.fragment,u),_(r.$$.fragment,u),f=!1},d(u){u&&(p(e),p(a)),w(t),w(s),w(r,u)}}}function Ti(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Ci]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&128&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function _l(o){let e,l;return e=new Ge({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Li(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[Ti],default:[vi]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&_l(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&128&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&m(r,1)):(r=_l(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Ii(o){let e,l=o[6].LSOA11CD+"",t,n,s,i=o[6].score+"",a,r,f,u,c,d=o[6].rank.toLocaleString()+"",g,y;return{c(){e=C("p"),t=v(l),n=v(` has an IMD score of
        `),s=C("b"),a=v(i),r=L(),f=C("p"),u=v("Rank: "),c=C("b"),g=v(d),y=v(`
        / 32,844 LSOAs`)},m(T,S){$(T,e,S),k(e,t),k(e,n),k(e,s),k(s,a),$(T,r,S),$(T,f,S),k(f,u),k(f,c),k(c,g),k(f,y)},p(T,S){S&64&&l!==(l=T[6].LSOA11CD+"")&&H(t,l),S&64&&i!==(i=T[6].score+"")&&H(a,i),S&64&&d!==(d=T[6].rank.toLocaleString()+"")&&H(g,d)},d(T){T&&(p(e),p(r),p(f))}}}function Mi(o){let e,l;return e=new ae({props:{$$slots:{default:[Ii,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ni(o){let e,l,t,n;const s=[E(Be),{sourceLayer:Be},{paint:{"fill-color":we(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":le(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Mi]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=se(i,s[f]);e=new qe({props:i});const a=[E(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=se(r,a[f]);return t=new be({props:r}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&7?oe(s,[u&0&&re(E(Be)),u&0&&{sourceLayer:Be},u&6&&{paint:{"fill-color":we(["-",10,["get","decile"]],f[2],f[1]),"fill-opacity":le(.5,.7)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}},s[4],s[5]]):{};u&128&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&1?oe(a,[u&0&&re(E(`${Be}-outline`)),u&0&&{sourceLayer:Be},a[2],u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(m(e.$$.fragment,f),m(t.$$.fragment,f),n=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function Oi(o){let e,l,t,n,s;function i(r){o[5](r)}let a={name:Be,title:Ys,$$slots:{default:[Li]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Be}.pmtiles`,$$slots:{default:[Ni]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&129&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&129&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Be="imd",Ys="Indices of Multiple Deprivation";function ji(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,2,4,6,8,10],i=he(Be);K(o,i,f=>l(0,t=f));function a(f){t=f,i.set(t)}function r(f){t=f,i.set(t)}return[t,n,s,i,a,r]}class Pi extends X{constructor(e){super(),x(this,e,ji,Oi,J,{})}}function Di(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=L(),t=v(Js)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Ri(o){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ai(o){let e,l,t,n,s,i,a;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Ri]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=C("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of January 2024."),s=L(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(m(t.$$.fragment,r),m(i.$$.fragment,r),a=!0)},o(r){_(t.$$.fragment,r),_(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function qi(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Ai]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Fi(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[qi],default:[Di]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function Gi(o){let e,l=o[5].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=n[5].name+"")&&H(t,l)},d(n){n&&p(e)}}}function zi(o){let e,l;return e=new ae({props:{$$slots:{default:[Gi,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Hi(o){let e,l,t,n;const s=[E(mt),{paint:{"fill-color":o[1],"fill-opacity":le(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[zi]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=se(i,s[f]);e=new qe({props:i}),e.$on("click",Bi);const a=[E(`${mt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=se(r,a[f]);return t=new be({props:r}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&3?oe(s,[u&0&&re(E(mt)),u&2&&{paint:{"fill-color":f[1],"fill-opacity":le(0,.5)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}},s[3],s[4],s[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&3?oe(a,[u&0&&re(E(`${mt}-outline`)),u&2&&{paint:{"line-color":f[1],"line-width":2.5}},u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(m(e.$$.fragment,f),m(t.$$.fragment,f),n=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function Ei(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:mt,title:Js,$$slots:{default:[Fi]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new zt({props:{data:`${ge()}/v1/${mt}.geojson`,$$slots:{default:[Hi]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let mt="local_authority_districts",Js="Local Authority Districts";function Bi(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD23CD}`,"_blank")}function Ui(o,e,l){let t,n=ee.local_authority_districts,s=he(mt);K(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class Wi extends X{constructor(e){super(),x(this,e,Ui,Ei,J,{})}}function Yi(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=L(),t=v(Vs)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Ji(o){let e;return{c(){e=v(`local authority
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Vi(o){let e;return{c(){e=v(`national park authorit
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Qi(o){let e;return{c(){e=v(`development corporation
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Zi(o){let e;return{c(){e=v("this map")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ki(o){let e;return{c(){e=v(`planning.data.gov.uk
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Xi(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y,T,S,j,R,P,D,N,O;return t=new te({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ji]},$$scope:{ctx:o}}}),s=new te({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Vi]},$$scope:{ctx:o}}}),a=new te({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Qi]},$$scope:{ctx:o}}}),g=new te({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Zi]},$$scope:{ctx:o}}}),R=new te({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ki]},$$scope:{ctx:o}}}),N=new Le({}),{c(){e=C("p"),l=v("LPAs may be a "),h(t.$$.fragment),n=v(", "),h(s.$$.fragment),i=v("y, or "),h(a.$$.fragment),r=v("."),f=L(),u=C("p"),c=C("strong"),d=v(`Note there are overlapping LPAs near Northhamptonshire. Only one
            authority name is shown when hovering. Use `),h(g.$$.fragment),y=v(" to get more details."),T=L(),S=C("p"),j=v("Data from ONS Geography via "),h(R.$$.fragment),P=v(", as of November 2022."),D=L(),h(N.$$.fragment)},m(M,I){$(M,e,I),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,i),b(a,e,null),k(e,r),$(M,f,I),$(M,u,I),k(u,c),k(c,d),b(g,c,null),k(c,y),$(M,T,I),$(M,S,I),k(S,j),b(R,S,null),k(S,P),$(M,D,I),b(N,M,I),O=!0},p(M,I){const A={};I&64&&(A.$$scope={dirty:I,ctx:M}),t.$set(A);const Y={};I&64&&(Y.$$scope={dirty:I,ctx:M}),s.$set(Y);const V={};I&64&&(V.$$scope={dirty:I,ctx:M}),a.$set(V);const q={};I&64&&(q.$$scope={dirty:I,ctx:M}),g.$set(q);const Q={};I&64&&(Q.$$scope={dirty:I,ctx:M}),R.$set(Q)},i(M){O||(m(t.$$.fragment,M),m(s.$$.fragment,M),m(a.$$.fragment,M),m(g.$$.fragment,M),m(R.$$.fragment,M),m(N.$$.fragment,M),O=!0)},o(M){_(t.$$.fragment,M),_(s.$$.fragment,M),_(a.$$.fragment,M),_(g.$$.fragment,M),_(R.$$.fragment,M),_(N.$$.fragment,M),O=!1},d(M){M&&(p(e),p(f),p(u),p(T),p(S),p(D)),w(t),w(s),w(a),w(g),w(R),w(N,M)}}}function xi(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Xi]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ef(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[xi],default:[Yi]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function tf(o){let e,l=o[5].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=n[5].name+"")&&H(t,l)},d(n){n&&p(e)}}}function nf(o){let e,l;return e=new ae({props:{$$slots:{default:[tf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function lf(o){let e,l,t,n;const s=[E(Ue),{sourceLayer:Ue},{paint:{"fill-color":o[1],"fill-opacity":le(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[nf]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=se(i,s[f]);e=new qe({props:i});const a=[E(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=se(r,a[f]);return t=new be({props:r}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&3?oe(s,[u&0&&re(E(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":f[1],"fill-opacity":le(0,.5)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}},s[4],s[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&3?oe(a,[u&0&&re(E(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":f[1],"line-width":2.5}},u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(m(e.$$.fragment,f),m(t.$$.fragment,f),n=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function sf(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:Ue,title:Vs,$$slots:{default:[ef]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Ue}.pmtiles`,$$slots:{default:[lf]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Ue="local_planning_authorities",Vs="Local Planning Authorities";function of(o,e,l){let t,n=ee.local_planning_authorities,s=he(Ue);K(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class rf extends X{constructor(e){super(),x(this,e,of,sf,J,{})}}function ff(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=L(),t=v(Qs)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function af(o){let e;return{c(){e=v(`Ordnance Survey Boundary-Line
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function uf(o){let e,l,t,n,s,i,a;return t=new te({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[af]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=C("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of May 2023."),s=L(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(m(t.$$.fragment,r),m(i.$$.fragment,r),a=!0)},o(r){_(t.$$.fragment,r),_(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function cf(o){let e,l,t;return l=new pe({props:{$$slots:{default:[uf]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function $f(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[cf],default:[ff]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function pf(o){let e,l=o[5].Name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=n[5].Name+"")&&H(t,l)},d(n){n&&p(e)}}}function mf(o){let e,l;return e=new ae({props:{$$slots:{default:[pf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function _f(o){let e,l,t,n;const s=[E(We),{sourceLayer:We},{paint:{"fill-color":o[1],"fill-opacity":le(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[mf]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=se(i,s[f]);e=new qe({props:i}),e.$on("click",df);const a=[E(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=se(r,a[f]);return t=new be({props:r}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&3?oe(s,[u&0&&re(E(We)),u&0&&{sourceLayer:We},u&2&&{paint:{"fill-color":f[1],"fill-opacity":le(0,.5)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}},s[4],s[5],s[6]]):{};u&64&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&3?oe(a,[u&0&&re(E(`${We}-outline`)),u&0&&{sourceLayer:We},u&2&&{paint:{"line-color":f[1],"line-width":5}},u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(m(e.$$.fragment,f),m(t.$$.fragment,f),n=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function gf(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:We,title:Qs,$$slots:{default:[$f]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${We}.pmtiles`,$$slots:{default:[_f]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let We="parliamentary_constituencies",Qs="Parliamentary constituencies";function df(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function hf(o,e,l){let t,n=ee.parliamentary_constituencies,s=he(We);K(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class bf extends X{constructor(e){super(),x(this,e,hf,gf,J,{})}}function wf(o){let e;return{c(){e=v(Zs)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function kf(o){let e;return{c(){e=v(`DEFRA
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function vf(o){let e,l,t,n,s,i,a,r,f;return t=new te({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[kf]},$$scope:{ctx:o}}}),r=new Le({}),{c(){e=C("p"),l=v("Most layers show air quality data from "),h(t.$$.fragment),n=v(`. The measurements are annual means, in units of
          µgm
          `),s=C("sup"),s.textContent="3",i=v(`
          . Note the particulate matter layers are not corrected for natural sources.`),a=L(),h(r.$$.fragment)},m(u,c){$(u,e,c),k(e,l),b(t,e,null),k(e,n),k(e,s),k(e,i),$(u,a,c),b(r,u,c),f=!0},p(u,c){const d={};c&8192&&(d.$$scope={dirty:c,ctx:u}),t.$set(d)},i(u){f||(m(t.$$.fragment,u),m(r.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(r.$$.fragment,u),f=!1},d(u){u&&(p(e),p(a)),w(t),w(r,u)}}}function yf(o){let e,l,t;return l=new pe({props:{$$slots:{default:[vf]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&8192&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function gl(o){let e,l,t,n,s=o[3](o[0].pollutant)+"",i,a,r,f,u,c,d,g,y,T,S,j,R;function P(N){o[6](N)}let D={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return o[0].pollutant!==void 0&&(D.value=o[0].pollutant),e=new Ft({props:D}),F.push(()=>G(e,"value",P)),{c(){h(e.$$.fragment),t=L(),n=C("p"),i=v(s),a=L(),r=C("div"),f=C("label"),u=v(`Opacity
        `),c=C("input"),d=L(),g=C("img"),B(c,"type","range"),B(c,"min","0"),B(c,"max","100"),tn(g.src,y=o[4](o[0].pollutant))||B(g,"src",y),B(g,"width",150),B(g,"alt",T=`Legend for ${o[0].pollutant} layer`)},m(N,O){b(e,N,O),$(N,t,O),$(N,n,O),k(n,i),$(N,a,O),$(N,r,O),k(r,f),k(f,u),k(f,c),Ve(c,o[0].opacity),$(N,d,O),$(N,g,O),S=!0,j||(R=[lt(c,"change",o[7]),lt(c,"input",o[7])],j=!0)},p(N,O){const M={};!l&&O&1&&(l=!0,M.value=N[0].pollutant,z(()=>l=!1)),e.$set(M),(!S||O&1)&&s!==(s=N[3](N[0].pollutant)+"")&&H(i,s),O&1&&Ve(c,N[0].opacity),(!S||O&1&&!tn(g.src,y=N[4](N[0].pollutant)))&&B(g,"src",y),(!S||O&1&&T!==(T=`Legend for ${N[0].pollutant} layer`))&&B(g,"alt",T)},i(N){S||(m(e.$$.fragment,N),S=!0)},o(N){_(e.$$.fragment,N),S=!1},d(N){N&&(p(t),p(n),p(a),p(r),p(d),p(g)),w(e,N),j=!1,zs(R)}}}function Sf(o){let e,l,t,n,s;function i(f){o[5](f)}let a={$$slots:{right:[yf],default:[wf]},$$scope:{ctx:o}};o[0].show!==void 0&&(a.checked=o[0].show),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0].show&&gl(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&8192&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0].show,z(()=>l=!1)),e.$set(c),f[0].show?r?(r.p(f,u),u&1&&m(r,1)):(r=gl(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Cf(o){let e,l;const t=[E(nn),{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new Eo({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(nn)),i&1&&{paint:{"raster-opacity":s[0].opacity/100}},i&1&&{layout:{visibility:s[0].show?"visible":"none"}}]):{};e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Tf(o){let e,l,t,n,s;function i(r){o[8](r)}let a={name:nn,title:Zs,$$slots:{default:[Sf]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new $r({props:{tiles:[o[1]],tileSize:256,$$slots:{default:[Cf]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&8193&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0].show,z(()=>l=!1)),e.$set(u);const c={};f&2&&(c.tiles=[r[1]]),f&8193&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let nn="pollution",Zs="Pollution";function Lf(o){return o.show?`${o.pollutant}/${o.opacity}`:null}function If(o){let[e,l]=o.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function Mf(o,e,l){let t,n,s,a=Ht(nn,{show:!1,pollutant:"PM25_viridis",opacity:50},Lf,If);K(o,a,S=>l(0,s=S));function r(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s.pollutant}/MapServer/WMSServer`}function f(S){return t[1]}function u(S){let j=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${r()}?bbox={bbox-epsg-3857}&${j}`}function c(S){let j=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${r()}?${j}`}function d(S){o.$$.not_equal(s.show,S)&&(s.show=S,a.set(s))}function g(S){o.$$.not_equal(s.pollutant,S)&&(s.pollutant=S,a.set(s))}function y(){s.opacity=Vt(this.value),a.set(s)}function T(S){o.$$.not_equal(s.show,S)&&(s.show=S,a.set(s))}return o.$$.update=()=>{o.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s.pollutant]),o.$$.dirty&1&&l(1,n=u(s.pollutant))},[s,n,a,f,c,d,g,y,T]}class Nf extends X{constructor(e){super(),x(this,e,Mf,Tf,J,{})}}function Of(o){let e;return{c(){e=v(Ks)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function jf(o){let e;return{c(){e=v(`DEFRA
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Pf(o){let e,l,t,n,s,i,a,r,f;return s=new te({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[jf]},$$scope:{ctx:o}}}),r=new Le({}),{c(){e=C("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
          units of decibels for the 16-hour period between 7am and 11pm. Only
          roads in areas with at least 100,000 people are included.`,l=L(),t=C("p"),n=v("Data from June 2019, produced by "),h(s.$$.fragment),i=v(". See there for methodology details"),a=L(),h(r.$$.fragment)},m(u,c){$(u,e,c),$(u,l,c),$(u,t,c),k(t,n),b(s,t,null),k(t,i),$(u,a,c),b(r,u,c),f=!0},p(u,c){const d={};c&64&&(d.$$scope={dirty:c,ctx:u}),s.$set(d)},i(u){f||(m(s.$$.fragment,u),m(r.$$.fragment,u),f=!0)},o(u){_(s.$$.fragment,u),_(r.$$.fragment,u),f=!1},d(u){u&&(p(e),p(l),p(t),p(a)),w(s),w(r,u)}}}function Df(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Pf]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function dl(o){let e,l;return e=new Ge({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Rf(o){let e,l,t,n,s;function i(f){o[3](f)}let a={$$slots:{right:[Df],default:[Of]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&dl(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&64&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&m(r,1)):(r=dl(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Af(o){let e,l=o[5].noiseclass+"",t,n,s=hl(o[5].noiseclass)+"",i,a;return{c(){e=C("p"),t=v(l),n=v(" dB ("),i=v(s),a=v(")")},m(r,f){$(r,e,f),k(e,t),k(e,n),k(e,i),k(e,a)},p(r,f){f&32&&l!==(l=r[5].noiseclass+"")&&H(t,l),f&32&&s!==(s=hl(r[5].noiseclass)+"")&&H(i,s)},d(r){r&&p(e)}}}function qf(o){let e,l;return e=new ae({props:{$$slots:{default:[Af,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ff(o){let e,l;const t=[E(_t),{sourceLayer:_t},{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":le(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[qf]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new qe({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&3?oe(t,[i&0&&re(E(_t)),i&0&&{sourceLayer:_t},i&2&&{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":s[1][0],"60.0-64.9":s[1][0],"65.0-69.9":s[1][1],"70.0-74.9":s[1][1],">=75.0":s[1][2]},"red"),"fill-opacity":le(.5,.8)}},i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Gf(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:_t,title:Ks,$$slots:{default:[Rf]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${_t}.pmtiles`,$$slots:{default:[Ff]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let _t="road_noise",Ks="Road noise";function hl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function zf(o,e,l){let t,n=[ee.sequential_low_to_high[0],ee.sequential_low_to_high[2],ee.sequential_low_to_high[4]],s=he(_t);K(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class Hf extends X{constructor(e){super(),x(this,e,zf,Gf,J,{})}}function Ef(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=L(),t=v(Xs)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Bf(o){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Uf(o){let e,l,t,n,s,i,a;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Bf]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=C("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of May 2023."),s=L(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(m(t.$$.fragment,r),m(i.$$.fragment,r),a=!0)},o(r){_(t.$$.fragment,r),_(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function Wf(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Uf]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Yf(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[Wf],default:[Ef]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function Jf(o){let e,l=o[5].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=n[5].name+"")&&H(t,l)},d(n){n&&p(e)}}}function Vf(o){let e,l;return e=new ae({props:{$$slots:{default:[Jf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Qf(o){let e,l,t,n;const s=[E(Ye),{sourceLayer:Ye},{paint:{"fill-color":o[1],"fill-opacity":le(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Vf]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=se(i,s[f]);e=new qe({props:i}),e.$on("click",Kf);const a=[E(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=se(r,a[f]);return t=new be({props:r}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&3?oe(s,[u&0&&re(E(Ye)),u&0&&{sourceLayer:Ye},u&2&&{paint:{"fill-color":f[1],"fill-opacity":le(0,.5)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}},s[4],s[5],s[6]]):{};u&64&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&3?oe(a,[u&0&&re(E(`${Ye}-outline`)),u&0&&{sourceLayer:Ye},u&2&&{paint:{"line-color":f[1],"line-width":2.5}},u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(m(e.$$.fragment,f),m(t.$$.fragment,f),n=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function Zf(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:Ye,title:Xs,$$slots:{default:[Yf]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Ye}.pmtiles`,$$slots:{default:[Qf]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Ye="wards",Xs="Wards";function Kf(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Xf(o,e,l){let t,n=ee.wards,s=he(Ye);K(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class xf extends X{constructor(e){super(),x(this,e,Xf,Zf,J,{})}}function ea(o){let e;return{c(){e=v("Open Data Commons Open Database License")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ta(o){let e,l,t,n;return t=new te({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[ea]},$$scope:{ctx:o}}}),{c(){e=C("p"),l=v("License: "),h(t.$$.fragment)},m(s,i){$(s,e,i),k(e,l),b(t,e,null),n=!0},p(s,[i]){const a={};i&1&&(a.$$scope={dirty:i,ctx:s}),t.$set(a)},i(s){n||(m(t.$$.fragment,s),n=!0)},o(s){_(t.$$.fragment,s),n=!1},d(s){s&&p(e),w(t)}}}class xe extends X{constructor(e){super(),x(this,e,null,ta,J,{})}}function na(o){let e,l,t,n;return e=new Te({props:{color:ee.bus_route_with_lane}}),{c(){h(e.$$.fragment),l=L(),t=v(xs)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function la(o){let e;return{c(){e=v(`GTFS
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function sa(o){let e,l,t,n,s,i,a,r,f;return s=new te({props:{href:"https://gtfs.org",$$slots:{default:[la]},$$scope:{ctx:o}}}),r=new xe({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It
          also shows whether the road has a bus lane or not.`,l=L(),t=C("p"),n=v("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(s.$$.fragment),i=v(`, and doesn't include which routes are run or the
          frequency of service.`),a=L(),h(r.$$.fragment)},m(u,c){$(u,e,c),$(u,l,c),$(u,t,c),k(t,n),b(s,t,null),k(t,i),$(u,a,c),b(r,u,c),f=!0},p(u,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),s.$set(d)},i(u){f||(m(s.$$.fragment,u),m(r.$$.fragment,u),f=!0)},o(u){_(s.$$.fragment,u),_(r.$$.fragment,u),f=!1},d(u){u&&(p(e),p(l),p(t),p(a)),w(s),w(r,u)}}}function oa(o){let e,l,t;return l=new pe({props:{$$slots:{default:[sa]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&32&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ra(o){let e,l,t;function n(i){o[2](i)}let s={$$slots:{right:[oa],default:[na]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&32&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function ia(o){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function fa(o){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function aa(o){let e;function l(s,i){return s[4].has_bus_lane?fa:ia}let t=l(o),n=t(o);return{c(){n.c(),e=$e()},m(s,i){n.m(s,i),$(s,e,i)},p(s,i){t!==(t=l(s))&&(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function ua(o){let e,l;return e=new ae({props:{$$slots:{default:[aa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ca(o){let e,l;const t=[E(gt),{sourceLayer:gt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ee.bus_route_with_lane,ee.bus_route_without_lane],"line-width":5,"line-opacity":le(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ua]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(gt)),i&0&&{sourceLayer:gt},t[2],i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&32&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function $a(o){let e,l,t,n,s;function i(r){o[3](r)}let a={name:gt,title:xs,$$slots:{default:[ra]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${gt}.pmtiles`,$$slots:{default:[ca]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&33&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let gt="bus_routes",xs="Bus routes";function pa(o,e,l){let t,n=he(gt);K(o,n,a=>l(0,t=a));function s(a){t=a,n.set(t)}function i(a){t=a,n.set(t)}return[t,n,s,i]}class ma extends X{constructor(e){super(),x(this,e,pa,$a,J,{})}}function bl(o){const e=Ta(o[10]);o[11]=e[0],o[12]=e[1],o[13]=e[2]}function wl(o,e,l){const t=o.slice();return t[11]=e[l][0],t[14]=e[l][1],t[15]=e[l][2],t[16]=e,t[17]=l,t}function _a(o){let e;return{c(){e=v(eo)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function ga(o){let e,l,t,n,s,i,a,r;return a=new xe({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap
          (as of 15 August 2023).`,l=L(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
            include fully or partly segregated cycletracks alongside a carriageway,
            stepped cycletracks, and tracks off the carriageway entirely. They&#39;re
            also separated from foot traffic.</li> <li><b>Unprotected lanes</b>
            are mandatory or advisory lanes on the carriageway, without any physical
            protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
            paths are split between cycle and foot traffic, and are separated from
            motor traffic somehow. There can be segregation between cyclists and
            pedestrians or not.</li>`,n=L(),s=C("p"),s.textContent=`Note there are many known limitations with this layer. Data in
          OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
          processing is also imperfect. You can click a segment to see full
          OpenStreetMap data. Please do report issues with the classification or
          data.`,i=L(),h(a.$$.fragment)},m(f,u){$(f,e,u),$(f,l,u),$(f,t,u),$(f,n,u),$(f,s,u),$(f,i,u),b(a,f,u),r=!0},p:W,i(f){r||(m(a.$$.fragment,f),r=!0)},o(f){_(a.$$.fragment,f),r=!1},d(f){f&&(p(e),p(l),p(t),p(n),p(s),p(i)),w(a,f)}}}function da(o){let e,l,t;return l=new pe({props:{$$slots:{default:[ga]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&262144&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function kl(o){let e,l,t;return l=new Xe({props:{$$slots:{default:[ba]},$$scope:{ctx:o}}}),{c(){e=C("div"),h(l.$$.fragment),_e(e,"border","1px solid black"),_e(e,"padding","8px")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&262145&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ha(o){let e,l,t=o[14]+"",n,s,i;return e=new Te({props:{color:o[15]}}),{c(){h(e.$$.fragment),l=L(),n=v(t),s=L()},m(a,r){b(e,a,r),$(a,l,r),$(a,n,r),$(a,s,r),i=!0},p:W,i(a){i||(m(e.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),i=!1},d(a){a&&(p(l),p(n),p(s)),w(e,a)}}}function vl(o){let e,l,t;function n(i){o[5](i,o[11])}let s={$$slots:{default:[ha]},$$scope:{ctx:o}};return o[0][o[11]]!==void 0&&(s.checked=o[0][o[11]]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){o=i;const r={};a&262144&&(r.$$scope={dirty:a,ctx:o}),!l&&a&5&&(l=!0,r.checked=o[0][o[11]],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function ba(o){let e,l,t=ye(o[2]),n=[];for(let i=0;i<t.length;i+=1)n[i]=vl(wl(o,t,i));const s=i=>_(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=$e()},m(i,a){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(i,a);$(i,e,a),l=!0},p(i,a){if(a&5){t=ye(i[2]);let r;for(r=0;r<t.length;r+=1){const f=wl(i,t,r);n[r]?(n[r].p(f,a),m(n[r],1)):(n[r]=vl(f),n[r].c(),m(n[r],1),n[r].m(e.parentNode,e))}for(ue(),r=t.length;r<n.length;r+=1)s(r);ce()}},i(i){if(!l){for(let a=0;a<t.length;a+=1)m(n[a]);l=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)_(n[a]);l=!1},d(i){i&&p(e),Ze(n,i)}}}function wa(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[da],default:[_a]},$$scope:{ctx:o}};o[0].show!==void 0&&(a.checked=o[0].show),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0].show&&kl(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&262144&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0].show,z(()=>l=!1)),e.$set(c),f[0].show?r?(r.p(f,u),u&1&&m(r,1)):(r=kl(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function ka(o){bl(o);let e,l=o[11]+"",t,n,s,i,a,r=o[12]+"",f,u,c,d,g=o[13]+"",y;return{c(){e=C("h2"),t=v(l),n=L(),s=C("p"),i=v("Direction: "),a=C("b"),f=L(),u=C("p"),c=v("Width: "),d=C("b"),y=v(g)},m(T,S){$(T,e,S),k(e,t),$(T,n,S),$(T,s,S),k(s,i),k(s,a),a.innerHTML=r,$(T,f,S),$(T,u,S),k(u,c),k(u,d),k(d,y)},p(T,S){bl(T),S&1024&&l!==(l=T[11]+"")&&H(t,l),S&1024&&r!==(r=T[12]+"")&&(a.innerHTML=r),S&1024&&g!==(g=T[13]+"")&&H(y,g)},d(T){T&&(p(e),p(n),p(s),p(f),p(u))}}}function va(o){let e,l;return e=new ae({props:{$$slots:{default:[ka,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&263168&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ya(o){let e,l;const t=[E(dt),{sourceLayer:dt},{paint:{"line-color":Ke(["get","kind"],{track:ee.cycle_paths.track,lane:ee.cycle_paths.lane,shared_use_segregated:ee.cycle_paths.shared_use_segregated,shared_use_unsegregated:ee.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ae,"line-opacity":le(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[va]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new be({props:n}),e.$on("click",La),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&9?oe(t,[i&0&&re(E(dt)),i&0&&{sourceLayer:dt},t[2],i&1&&{layout:{visibility:s[0].show?"visible":"none"}},i&9&&{filter:s[3](s[0])},t[5],t[6],t[7]]):{};i&262144&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Sa(o){let e,l,t,n,s;function i(r){o[6](r)}let a={name:dt,title:eo,$$slots:{default:[wa]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${dt}.pmtiles`,$$slots:{default:[ya]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&262145&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0].show,z(()=>l=!1)),e.$set(u);const c={};f&262145&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let dt="cycle_paths",eo="Cycle paths";function Ca(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function Ta(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function La(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Ia(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],s={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function i(g){return g.show?n.filter(y=>g[y]).join(","):null}let a=Ht(dt,s,i,Ca);K(o,a,g=>l(0,t=g));let r=[["track","Separated tracks",ee.cycle_paths.track],["lane","Unprotected lanes",ee.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",ee.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",ee.cycle_paths.shared_use_unsegregated]];function f(g){let y=n.filter(T=>g[T]);return["in",["get","kind"],["literal",y]]}function u(g){o.$$.not_equal(t.show,g)&&(t.show=g,a.set(t))}function c(g,y){o.$$.not_equal(t[y],g)&&(t[y]=g,a.set(t))}function d(g){o.$$.not_equal(t.show,g)&&(t.show=g,a.set(t))}return[t,a,r,f,u,c,d]}class Ma extends X{constructor(e){super(),x(this,e,Ia,Sa,J,{})}}function Na(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=L(),t=v(to)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Oa(o){let e;return{c(){e=v(`Major Road Network
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ja(o){let e,l,t,n,s,i,a;return t=new te({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Oa]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=C("p"),l=v("Data from the "),h(t.$$.fragment),n=v(", as of September 2021."),s=L(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(m(t.$$.fragment,r),m(i.$$.fragment,r),a=!0)},o(r){_(t.$$.fragment,r),_(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function Pa(o){let e,l,t;return l=new pe({props:{$$slots:{default:[ja]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Da(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[Pa],default:[Na]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function Ra(o){let e,l=(o[5].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=(n[5].name??"Unknown MRN road")+"")&&H(t,l)},d(n){n&&p(e)}}}function Aa(o){let e,l;return e=new ae({props:{$$slots:{default:[Ra,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function qa(o){let e,l;const t=[E(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":le(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Aa]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&3?oe(t,[i&0&&re(E(ht)),i&0&&{sourceLayer:ht},t[2],t[3],i&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":le(1,.5)}},i&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};i&64&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Fa(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:ht,title:to,$$slots:{default:[Da]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${ht}.pmtiles`,$$slots:{default:[qa]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let ht="mrn",to="Major Road Network";function Ga(o,e,l){let t,n=ee.mrn,s=he(ht);K(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class za extends X{constructor(e){super(),x(this,e,Ga,Fa,J,{})}}function Ha(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=L(),t=v(no)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Ea(o){let e;return{c(){e=v(`OS Open Roads
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ba(o){let e,l,t,n,s,i,a;return t=new te({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Ea]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=C("p"),l=v("Data from "),h(t.$$.fragment),n=v(`, as of December 2023. The SRN is equivalent to trunk
          roads.`),s=L(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(m(t.$$.fragment,r),m(i.$$.fragment,r),a=!0)},o(r){_(t.$$.fragment,r),_(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function Ua(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Ba]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Wa(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[Ua],default:[Ha]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function Ya(o){let e,l=(o[5].name??"Unknown SRN road")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=(n[5].name??"Unknown SRN road")+"")&&H(t,l)},d(n){n&&p(e)}}}function Ja(o){let e,l;return e=new ae({props:{$$slots:{default:[Ya,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Va(o){let e,l;const t=[E(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":le(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Ja]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&3?oe(t,[i&0&&re(E(bt)),i&0&&{sourceLayer:bt},t[2],t[3],i&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":le(1,.5)}},i&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};i&64&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Qa(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:bt,title:no,$$slots:{default:[Wa]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${bt}.pmtiles`,$$slots:{default:[Va]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let bt="srn",no="Strategic Road Network";function Za(o,e,l){let t,n=ee.srn,s=he(bt);K(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class Ka extends X{constructor(e){super(),x(this,e,Za,Qa,J,{})}}function Xa(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=L(),t=v(lo)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function xa(o){let e;return{c(){e=v(`National Cycle Network
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function eu(o){let e,l,t,n,s,i,a;return t=new te({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[xa]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=C("p"),l=v("Data from Sustrans about the "),h(t.$$.fragment),n=v(", downloaded on 22/01/2024."),s=L(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(m(t.$$.fragment,r),m(i.$$.fragment,r),a=!0)},o(r){_(t.$$.fragment,r),_(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function tu(o){let e,l,t;return l=new pe({props:{$$slots:{default:[eu]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function nu(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[tu],default:[Xa]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function yl(o){let e,l,t,n=o[5].Desc_+"",s;return{c(){e=C("li"),l=v("Description: "),t=C("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].Desc_+"")&&H(s,n)},d(i){i&&p(e)}}}function Sl(o){let e,l,t,n=o[5].Greenway+"",s;return{c(){e=C("li"),l=v("Is greenway: "),t=C("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].Greenway+"")&&H(s,n)},d(i){i&&p(e)}}}function Cl(o){let e,l,t,n=o[5].RouteType+"",s;return{c(){e=C("li"),l=v("Route type: "),t=C("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].RouteType+"")&&H(s,n)},d(i){i&&p(e)}}}function Tl(o){let e,l,t,n=o[5].RouteNo+"",s;return{c(){e=C("li"),l=v("Route number: "),t=C("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].RouteNo+"")&&H(s,n)},d(i){i&&p(e)}}}function Ll(o){let e,l,t,n=o[5].RouteCat+"",s;return{c(){e=C("li"),l=v("Route Category: "),t=C("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].RouteCat+"")&&H(s,n)},d(i){i&&p(e)}}}function Il(o){let e,l,t,n=o[5].OpenStatus+"",s;return{c(){e=C("li"),l=v("Open Status: "),t=C("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].OpenStatus+"")&&H(s,n)},d(i){i&&p(e)}}}function Ml(o){let e,l,t,n=o[5].Surface+"",s;return{c(){e=C("li"),l=v("Surface: "),t=C("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].Surface+"")&&H(s,n)},d(i){i&&p(e)}}}function Nl(o){let e,l,t,n=o[5].Quality+"",s;return{c(){e=C("li"),l=v("Quality: "),t=C("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].Quality+"")&&H(s,n)},d(i){i&&p(e)}}}function Ol(o){let e,l,t,n=o[5].RoadClass+"",s;return{c(){e=C("li"),l=v("Road Class: "),t=C("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].RoadClass+"")&&H(s,n)},d(i){i&&p(e)}}}function lu(o){let e,l,t,n,s,i,a,r,f,u=o[5].Desc_&&yl(o),c=o[5].Greenway&&Sl(o),d=o[5].RouteType&&Cl(o),g=o[5].RouteNo&&Tl(o),y=o[5].RouteCat&&Ll(o),T=o[5].OpenStatus&&Il(o),S=o[5].Surface&&Ml(o),j=o[5].Quality&&Nl(o),R=o[5].RoadClass&&Ol(o);return{c(){e=C("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),d&&d.c(),n=L(),g&&g.c(),s=L(),y&&y.c(),i=L(),T&&T.c(),a=L(),S&&S.c(),r=L(),j&&j.c(),f=L(),R&&R.c()},m(P,D){$(P,e,D),u&&u.m(e,null),k(e,l),c&&c.m(e,null),k(e,t),d&&d.m(e,null),k(e,n),g&&g.m(e,null),k(e,s),y&&y.m(e,null),k(e,i),T&&T.m(e,null),k(e,a),S&&S.m(e,null),k(e,r),j&&j.m(e,null),k(e,f),R&&R.m(e,null)},p(P,D){P[5].Desc_?u?u.p(P,D):(u=yl(P),u.c(),u.m(e,l)):u&&(u.d(1),u=null),P[5].Greenway?c?c.p(P,D):(c=Sl(P),c.c(),c.m(e,t)):c&&(c.d(1),c=null),P[5].RouteType?d?d.p(P,D):(d=Cl(P),d.c(),d.m(e,n)):d&&(d.d(1),d=null),P[5].RouteNo?g?g.p(P,D):(g=Tl(P),g.c(),g.m(e,s)):g&&(g.d(1),g=null),P[5].RouteCat?y?y.p(P,D):(y=Ll(P),y.c(),y.m(e,i)):y&&(y.d(1),y=null),P[5].OpenStatus?T?T.p(P,D):(T=Il(P),T.c(),T.m(e,a)):T&&(T.d(1),T=null),P[5].Surface?S?S.p(P,D):(S=Ml(P),S.c(),S.m(e,r)):S&&(S.d(1),S=null),P[5].Quality?j?j.p(P,D):(j=Nl(P),j.c(),j.m(e,f)):j&&(j.d(1),j=null),P[5].RoadClass?R?R.p(P,D):(R=Ol(P),R.c(),R.m(e,null)):R&&(R.d(1),R=null)},d(P){P&&p(e),u&&u.d(),c&&c.d(),d&&d.d(),g&&g.d(),y&&y.d(),T&&T.d(),S&&S.d(),j&&j.d(),R&&R.d()}}}function su(o){let e,l;return e=new ae({props:{$$slots:{default:[lu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ou(o){let e,l;const t=[E(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":le(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[su]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&3?oe(t,[i&0&&re(E(wt)),i&0&&{sourceLayer:wt},t[2],t[3],i&2&&{paint:{"line-color":s[1],"line-width":4,"line-opacity":le(1,.5)}},i&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};i&64&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ru(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:wt,title:lo,$$slots:{default:[nu]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${wt}.pmtiles`,$$slots:{default:[ou]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let wt="national_cycle_network",lo="National Cycle Network";function iu(o,e,l){let t,n=ee.national_cycle_network,s=he(wt);K(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class fu extends X{constructor(e){super(),x(this,e,iu,ru,J,{})}}function jl(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function au(o){let e;return{c(){e=v(so)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function uu(o){let e;return{c(){e=v(`Public Sector Geospatial Agreement
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function cu(o){let e,l,t,n,s,i,a,r,f,u,c;return f=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[uu]},$$scope:{ctx:o}}}),{c(){e=C("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
          Ordnance Survey. Because the shape of pavement may vary along a road,
          both average and minimum are reported. Measurements may be available
          for the left side of the road, the right, or both. The coloring shows
          the larger of the two average widths, and the line thickness has no
          meaning. Hover over a line to see if there's pavement on one or both
          sides of the road. (You won't be able to distinguish left and right
          though; use the OS Road basemap instead.)`,l=L(),t=C("p"),t.textContent=`Note these measurements are difficult to interpret near dual
          carriageways (shown as parallel lines).`,n=L(),s=C("p"),s.textContent="Data valid as of 1 January, 2024",i=L(),a=C("p"),r=v(`License: Contains OS data © Crown copyright and database right
          2023. Made available under the `),h(f.$$.fragment),u=v(".")},m(d,g){$(d,e,g),$(d,l,g),$(d,t,g),$(d,n,g),$(d,s,g),$(d,i,g),$(d,a,g),k(a,r),b(f,a,null),k(a,u),c=!0},p(d,g){const y={};g&4096&&(y.$$scope={dirty:g,ctx:d}),f.$set(y)},i(d){c||(m(f.$$.fragment,d),c=!0)},o(d){_(f.$$.fragment,d),c=!1},d(d){d&&(p(e),p(l),p(t),p(n),p(s),p(i),p(a)),w(f)}}}function $u(o){let e,l,t;return l=new pe({props:{$$slots:{default:[cu]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&4096&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Pl(o){let e,l;return e=new Ge({props:{colorScale:o[1],limits:o[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function pu(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[$u],default:[au]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&Pl(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&4096&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&m(r,1)):(r=Pl(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function mu(o){let e,l,t=ln(o[6].angle+o[9])+"",n;return{c(){e=C("p"),l=new Pt(!1),n=v(` side of the road: no pavement
          `),l.a=n},m(s,i){$(s,e,i),l.m(t,e),k(e,n)},p(s,i){i&64&&t!==(t=ln(s[6].angle+s[9])+"")&&l.p(t)},d(s){s&&p(e)}}}function _u(o){let e,l,t=ln(o[6].angle+o[9])+"",n,s,i=o[7]+"",a,r,f,u=o[8]+"",c,d;return{c(){e=C("p"),l=new Pt(!1),n=v(` side of the road:
            `),s=C("b"),a=v(i),r=v(`
            m average,
            `),f=C("b"),c=v(u),d=v(`
            m minimum
          `),l.a=n},m(g,y){$(g,e,y),l.m(t,e),k(e,n),k(e,s),k(s,a),k(e,r),k(e,f),k(f,c),k(e,d)},p(g,y){y&64&&t!==(t=ln(g[6].angle+g[9])+"")&&l.p(t),y&64&&i!==(i=g[7]+"")&&H(a,i),y&64&&u!==(u=g[8]+"")&&H(c,u)},d(g){g&&p(e)}}}function Dl(o){let e;function l(s,i){return s[7]?_u:mu}let t=l(o),n=t(o);return{c(){n.c(),e=$e()},m(s,i){n.m(s,i),$(s,e,i)},p(s,i){t===(t=l(s))&&n?n.p(s,i):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function gu(o){let e,l=ye([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Dl(jl(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=$e()},m(n,s){for(let i=0;i<2;i+=1)t[i]&&t[i].m(n,s);$(n,e,s)},p(n,s){if(s&64){l=ye([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let i;for(i=0;i<2;i+=1){const a=jl(n,l,i);t[i]?t[i].p(a,s):(t[i]=Dl(a),t[i].c(),t[i].m(e.parentNode,e))}for(;i<2;i+=1)t[i].d(1)}},d(n){n&&p(e),Ze(t,n)}}}function du(o){let e,l;return e=new ae({props:{openOn:"hover",$$slots:{default:[gu,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&4160&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function hu(o){let e,l;const t=[E(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":Ae,"line-opacity":le(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[du]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E(kt)),i&0&&{sourceLayer:kt},t[2],t[3],i&6&&{paint:{"line-color":we(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],s[2],s[1]),"line-width":Ae,"line-opacity":le(1,.5)}},i&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};i&4096&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function bu(o){let e,l,t,n,s;function i(r){o[5](r)}let a={name:kt,title:so,$$slots:{default:[pu]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${Zt()}/v1/${kt}.pmtiles`,$$slots:{default:[hu]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&4097&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&4097&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let kt="pavement_widths",so="OS Pavement widths";function wu(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function ln(o){return`${wu(o)} <span style="display: inline-block; rotate: ${o}deg">⬆</span>`}function ku(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,2,4,6,8,13],i=he(kt);K(o,i,f=>l(0,t=f));function a(f){t=f,i.set(t)}function r(f){t=f,i.set(t)}return[t,n,s,i,a,r]}class vu extends X{constructor(e){super(),x(this,e,ku,bu,J,{})}}function yu(o){let e;return{c(){e=v(oo)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function Su(o){let e;return{c(){e=v("the PCT website")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Cu(o){let e;return{c(){e=v("2017 journal article")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Tu(o){let e,l,t,n,s,i,a,r,f,u,c;return a=new te({props:{href:"https://www.pct.bike",$$slots:{default:[Su]},$$scope:{ctx:o}}}),f=new te({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Cu]},$$scope:{ctx:o}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
          high latent demand for cycling under scenarios of change, based on the
          "fastest" routes from CycleStreets. Counts approximate daily rush hour
          traffic levels.`,l=L(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
          Please use this layer with caution.`,n=L(),s=C("p"),i=v("See "),h(a.$$.fragment),r=v(" and "),h(f.$$.fragment),u=v(" for details on methodology and data sources.")},m(d,g){$(d,e,g),$(d,l,g),$(d,t,g),$(d,n,g),$(d,s,g),k(s,i),b(a,s,null),k(s,r),b(f,s,null),k(s,u),c=!0},p(d,g){const y={};g&2048&&(y.$$scope={dirty:g,ctx:d}),a.$set(y);const T={};g&2048&&(T.$$scope={dirty:g,ctx:d}),f.$set(T)},i(d){c||(m(a.$$.fragment,d),m(f.$$.fragment,d),c=!0)},o(d){_(a.$$.fragment,d),_(f.$$.fragment,d),c=!1},d(d){d&&(p(e),p(l),p(t),p(n),p(s)),w(a),w(f)}}}function Lu(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Tu]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&2048&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Rl(o){let e,l,t,n,s,i,a,r;e=new Ge({props:{colorScale:o[1],limits:o[2]}});function f(g){o[6](g)}let u={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(u.value=o[0].tripPurpose),t=new Hs({props:u}),F.push(()=>G(t,"value",f));function c(g){o[7](g)}let d={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(d.value=o[0].scenario),i=new Ft({props:d}),F.push(()=>G(i,"value",c)),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),s=L(),h(i.$$.fragment)},m(g,y){b(e,g,y),$(g,l,y),b(t,g,y),$(g,s,y),b(i,g,y),r=!0},p(g,y){const T={};!n&&y&1&&(n=!0,T.value=g[0].tripPurpose,z(()=>n=!1)),t.$set(T);const S={};!a&&y&1&&(a=!0,S.value=g[0].scenario,z(()=>a=!1)),i.$set(S)},i(g){r||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(i.$$.fragment,g),r=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(i.$$.fragment,g),r=!1},d(g){g&&(p(l),p(s)),w(e,g),w(t,g),w(i,g)}}}function Iu(o){let e,l,t,n,s;function i(f){o[5](f)}let a={$$slots:{right:[Lu],default:[yu]},$$scope:{ctx:o}};o[0].show!==void 0&&(a.checked=o[0].show),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0].show&&Rl(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&2048&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0].show,z(()=>l=!1)),e.$set(c),f[0].show?r?(r.p(f,u),u&1&&m(r,1)):(r=Rl(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Mu(o){let e,l=o[4](o[10])+"",t;return{c(){e=new Pt(!1),t=$e(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&1024&&l!==(l=n[4](n[10])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function Nu(o){let e,l;return e=new ae({props:{$$slots:{default:[Mu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&3072&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ou(o){let e,l;const t=[E(nt),{sourceLayer:nt},{paint:{"line-color":we(["get",o[0].scenario],o[2],o[1]),"line-width":Ae,"line-opacity":le(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==nt?"visible":"none"}}];let n={$$slots:{default:[Nu]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E(nt)),i&0&&{sourceLayer:nt},i&7&&{paint:{"line-color":we(["get",s[0].scenario],s[2],s[1]),"line-width":Ae,"line-opacity":le(1,.5)}},i&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==nt?"visible":"none"}}]):{};i&2048&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ju(o){let e,l=o[4](o[10])+"",t;return{c(){e=new Pt(!1),t=$e(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&1024&&l!==(l=n[4](n[10])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function Pu(o){let e,l;return e=new ae({props:{$$slots:{default:[ju,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&3072&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Du(o){let e,l;const t=[E($t),{sourceLayer:$t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",o[0].scenario],o[2],o[1]),"line-width":Ae,"line-opacity":le(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==$t?"visible":"none"}}];let n={$$slots:{default:[Pu]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E($t)),i&0&&{sourceLayer:$t},t[2],t[3],i&7&&{paint:{"line-color":we(["get",s[0].scenario],s[2],s[1]),"line-width":Ae,"line-opacity":le(1,.5)}},i&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==$t?"visible":"none"}}]):{};i&2048&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ru(o){let e,l,t,n,s,i,a;function r(u){o[8](u)}let f={name:"pct",title:oo,$$slots:{default:[Iu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new me({props:f}),F.push(()=>G(e,"show",r)),n=new de({props:{url:`pmtiles://${ge()}/v1/${nt}.pmtiles`,$$slots:{default:[Ou]},$$scope:{ctx:o}}}),i=new de({props:{url:`pmtiles://${ge()}/v1/${$t}.pmtiles`,$$slots:{default:[Du]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment),s=L(),h(i.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),b(n,u,c),$(u,s,c),b(i,u,c),a=!0},p(u,[c]){const d={};c&2049&&(d.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,d.show=u[0].show,z(()=>l=!1)),e.$set(d);const g={};c&2049&&(g.$$scope={dirty:c,ctx:u}),n.$set(g);const y={};c&2049&&(y.$$scope={dirty:c,ctx:u}),i.$set(y)},i(u){a||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(e.$$.fragment,u),_(n.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(t),p(s)),w(e,u),w(n,u),w(i,u)}}}let nt="pct_commute",$t="pct_school",oo="Propensity to Cycle Tool";function Au(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function qu(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function Fu(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,50,100,500,1e3,2e3],a=Ht("pct",{show:!1,tripPurpose:nt,scenario:"baseline"},Au,qu);K(o,a,g=>l(0,t=g));function r(g){let y=g.baseline,T=g.gov_target,S=g.go_dutch,j=`<h2>Trip purpose: ${t.tripPurpose==nt?"commuting":"school"}</h2>`;if(j+=`<p>Baseline (2011): <b>${y.toLocaleString()}</b></p>`,y==0)j+=`<p>Government target (2025): <b>${T.toLocaleString()}</b></p>`,j+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let R=(T/y).toFixed(1),P=(S/y).toFixed(1);j+=`<p>Government target (2025): ${T.toLocaleString()} (<b>${R}x</b> of baseline)</p>`,j+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${P}x</b> of baseline)</p>`}return j}function f(g){o.$$.not_equal(t.show,g)&&(t.show=g,a.set(t))}function u(g){o.$$.not_equal(t.tripPurpose,g)&&(t.tripPurpose=g,a.set(t))}function c(g){o.$$.not_equal(t.scenario,g)&&(t.scenario=g,a.set(t))}function d(g){o.$$.not_equal(t.show,g)&&(t.show=g,a.set(t))}return[t,n,s,a,r,f,u,c,d]}class Gu extends X{constructor(e){super(),x(this,e,Fu,Ru,J,{})}}function zu(o){let e;return{c(){e=v(ro)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function Hu(o){let e;return{c(){e=v("Basemap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Eu(o){let e;return{c(){e=v(`Public Sector Geospatial Agreement
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Bu(o){let e,l,t,n,s,i,a,r,f,u,c,d;return t=new te({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Hu]},$$scope:{ctx:o}}}),u=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Eu]},$$scope:{ctx:o}}}),{c(){e=C("p"),l=v("The average speed data is collected over a six-month period by "),h(t.$$.fragment),n=v(` from 135,000 vehicle telematic systems and provided through
          Ordnance Survey. The averages are grouped by different time periods for
          weekdays and weekends. This map shows the highest average.`),s=L(),i=C("p"),i.textContent="Data valid as of 1 September, 2023",a=L(),r=C("p"),f=v(`License: Contains OS data © Crown copyright and database right
          2023. Made available under the `),h(u.$$.fragment),c=v(".")},m(g,y){$(g,e,y),k(e,l),b(t,e,null),k(e,n),$(g,s,y),$(g,i,y),$(g,a,y),$(g,r,y),k(r,f),b(u,r,null),k(r,c),d=!0},p(g,y){const T={};y&1024&&(T.$$scope={dirty:y,ctx:g}),t.$set(T);const S={};y&1024&&(S.$$scope={dirty:y,ctx:g}),u.$set(S)},i(g){d||(m(t.$$.fragment,g),m(u.$$.fragment,g),d=!0)},o(g){_(t.$$.fragment,g),_(u.$$.fragment,g),d=!1},d(g){g&&(p(e),p(s),p(i),p(a),p(r)),w(t),w(u)}}}function Uu(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Bu]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&1024&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Al(o){let e,l,t,n,s;e=new Ge({props:{colorScale:o[1],limits:o[2]}});function i(r){o[6](r)}let a={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(a.value=o[0].kind),t=new Hs({props:a}),F.push(()=>G(t,"value",i)),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(r,f){b(e,r,f),$(r,l,f),b(t,r,f),s=!0},p(r,f){const u={};!n&&f&1&&(n=!0,u.value=r[0].kind,z(()=>n=!1)),t.$set(u)},i(r){s||(m(e.$$.fragment,r),m(t.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),s=!1},d(r){r&&p(l),w(e,r),w(t,r)}}}function Wu(o){let e,l,t,n,s;function i(f){o[5](f)}let a={$$slots:{right:[Uu],default:[zu]},$$scope:{ctx:o}};o[0].show!==void 0&&(a.checked=o[0].show),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0].show&&Al(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&1024&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0].show,z(()=>l=!1)),e.$set(c),f[0].show?r?(r.p(f,u),u&1&&m(r,1)):(r=Al(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Yu(o){let e,l,t=o[9].indicative_mph+"",n,s,i,a,r,f=o[9].highest_mph+"",u,c,d=o[4][o[9].highest_description]+"",g,y;return{c(){e=C("p"),l=v("Posted speed limit: "),n=v(t),s=v(" mph"),i=L(),a=C("p"),r=v("Highest average speed: "),u=v(f),c=v(" mph (during "),g=v(d),y=v(")")},m(T,S){$(T,e,S),k(e,l),k(e,n),k(e,s),$(T,i,S),$(T,a,S),k(a,r),k(a,u),k(a,c),k(a,g),k(a,y)},p(T,S){S&512&&t!==(t=T[9].indicative_mph+"")&&H(n,t),S&512&&f!==(f=T[9].highest_mph+"")&&H(u,f),S&512&&d!==(d=T[4][T[9].highest_description]+"")&&H(g,d)},d(T){T&&(p(e),p(i),p(a))}}}function Ju(o){let e,l;return e=new ae({props:{$$slots:{default:[Yu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Vu(o){let e,l;const t=[E(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",o[0].kind],o[2],o[1]),"line-width":Ae,"line-opacity":le(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[Ju]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E(vt)),i&0&&{sourceLayer:vt},t[2],t[3],i&7&&{paint:{"line-color":we(["get",s[0].kind],s[2],s[1]),"line-width":Ae,"line-opacity":le(1,.5)}},i&1&&{layout:{visibility:s[0].show?"visible":"none"}}]):{};i&1024&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Qu(o){let e,l,t,n,s;function i(r){o[7](r)}let a={name:vt,title:ro,$$slots:{default:[Wu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${Zt()}/v1/${vt}.pmtiles`,$$slots:{default:[Vu]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&1025&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0].show,z(()=>l=!1)),e.$set(u);const c={};f&1025&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let vt="road_speeds",ro="OS Speeds";function Zu(o){return o.show?o.kind:null}function Ku(o){return{show:!0,kind:o}}function Xu(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,20,30,40,50,90],a=Ht(vt,{show:!1,kind:"indicative_mph"},Zu,Ku);K(o,a,d=>l(0,t=d));let r={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function f(d){o.$$.not_equal(t.show,d)&&(t.show=d,a.set(t))}function u(d){o.$$.not_equal(t.kind,d)&&(t.kind=d,a.set(t))}function c(d){o.$$.not_equal(t.show,d)&&(t.show=d,a.set(t))}return[t,n,s,a,r,f,u,c]}class xu extends X{constructor(e){super(),x(this,e,Xu,Qu,J,{})}}function ec(o){let e;return{c(){e=v(io)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function tc(o){let e;return{c(){e=v(`Public Sector Geospatial Agreement
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function nc(o){let e,l,t,n,s,i,a,r,f;return a=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[tc]},$$scope:{ctx:o}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
          Ordnance Survey. The coloring shows the average width, and the line
          thickness has no meaning. Be careful interpreting the data near dual
          carriageways and crossing islands.`,l=L(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",n=L(),s=C("p"),i=v(`License: Contains OS data © Crown copyright and database right
          2023. Made available under the `),h(a.$$.fragment),r=v(".")},m(u,c){$(u,e,c),$(u,l,c),$(u,t,c),$(u,n,c),$(u,s,c),k(s,i),b(a,s,null),k(s,r),f=!0},p(u,c){const d={};c&128&&(d.$$scope={dirty:c,ctx:u}),a.$set(d)},i(u){f||(m(a.$$.fragment,u),f=!0)},o(u){_(a.$$.fragment,u),f=!1},d(u){u&&(p(e),p(l),p(t),p(n),p(s)),w(a)}}}function lc(o){let e,l,t;return l=new pe({props:{$$slots:{default:[nc]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&128&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ql(o){let e,l;return e=new Ge({props:{colorScale:o[1],limits:o[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function sc(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[lc],default:[ec]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&ql(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&128&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&m(r,1)):(r=ql(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function oc(o){let e,l,t,n=o[6].average+"",s,i,a,r,f,u,c=o[6].minimum+"",d,g;return{c(){e=C("p"),l=v("Average width: "),t=C("b"),s=v(n),i=v(`
        meters`),a=L(),r=C("p"),f=v("Minimum width: "),u=C("b"),d=v(c),g=v(`
        meters`)},m(y,T){$(y,e,T),k(e,l),k(e,t),k(t,s),k(e,i),$(y,a,T),$(y,r,T),k(r,f),k(r,u),k(u,d),k(r,g)},p(y,T){T&64&&n!==(n=y[6].average+"")&&H(s,n),T&64&&c!==(c=y[6].minimum+"")&&H(d,c)},d(y){y&&(p(e),p(a),p(r))}}}function rc(o){let e,l;return e=new ae({props:{$$slots:{default:[oc,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ic(o){let e,l;const t=[E(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Ae,"line-opacity":le(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[rc]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E(yt)),i&0&&{sourceLayer:yt},t[2],t[3],i&6&&{paint:{"line-color":we(["get","average"],s[2],s[1]),"line-width":Ae,"line-opacity":le(1,.5)}},i&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};i&128&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function fc(o){let e,l,t,n,s;function i(r){o[5](r)}let a={name:yt,title:io,$$slots:{default:[sc]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${Zt()}/v1/${yt}.pmtiles`,$$slots:{default:[ic]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&129&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&129&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let yt="road_widths",io="OS Road widths";function ac(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,5,10,15,20,100],i=he(yt);K(o,i,f=>l(0,t=f));function a(f){t=f,i.set(t)}function r(f){t=f,i.set(t)}return[t,n,s,i,a,r]}class uc extends X{constructor(e){super(),x(this,e,ac,fc,J,{})}}function cc(o){let e,l,t,n;return e=new Te({props:{color:ee.trams}}),{c(){h(e.$$.fragment),l=L(),t=v(fo)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function $c(o){let e,l,t,n;return t=new xe({}),{c(){e=C("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
          (as of 7 February 2024). When these are close to a scheme,
          interactions between the modes must be designed carefully.`,l=L(),h(t.$$.fragment)},m(s,i){$(s,e,i),$(s,l,i),b(t,s,i),n=!0},p:W,i(s){n||(m(t.$$.fragment,s),n=!0)},o(s){_(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function pc(o){let e,l,t;return l=new pe({props:{$$slots:{default:[$c]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&16&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function mc(o){let e,l,t;function n(i){o[2](i)}let s={$$slots:{right:[pc],default:[cc]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&16&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function _c(o){let e,l;const t=[E(St),{sourceLayer:St},{paint:{"line-color":ee.trams,"line-width":5,"line-opacity":le(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new be({props:n}),e.$on("click",dc),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(St)),i&0&&{sourceLayer:St},t[2],i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function gc(o){let e,l,t,n,s;function i(r){o[3](r)}let a={name:St,title:fo,$$slots:{default:[mc]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${St}.pmtiles`,$$slots:{default:[_c]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&17&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&17&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let St="trams",fo="Trams";function dc(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function hc(o,e,l){let t,n=he(St);K(o,n,a=>l(0,t=a));function s(a){t=a,n.set(t)}function i(a){t=a,n.set(t)}return[t,n,s,i]}class bc extends X{constructor(e){super(),x(this,e,hc,gc,J,{})}}function wc(o){let e;return{c(){e=v(ao)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function kc(o){let e;return{c(){e=v(`Bus Open Data Service
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function vc(o){let e,l,t,n,s,i,a,r,f;return t=new te({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[kc]},$$scope:{ctx:o}}}),r=new Le({}),{c(){e=C("p"),l=v("Data from the "),h(t.$$.fragment),n=v(`, as of 7 February 2024. To calculate frequency, every
          scheduled arrival time per stop is considered, grouped by day of the
          week. The total daily count is just the number of scheduled arrivals
          for a day. The peak hour frequency is the highest number of buses in
          any one hour window. That window might not lined up perfectly on the
          hour -- a peak hour might occur from 8:25 to 9:25,for example.`),s=L(),i=C("p"),i.textContent=`There are known limitations with this layer, so please use caution
          when using these numbers. Some stops may not be shown at all.
          Frequency could be over- or under-counted, due to exceptions to the
          regular daily schedule of a service.`,a=L(),h(r.$$.fragment)},m(u,c){$(u,e,c),k(e,l),b(t,e,null),k(e,n),$(u,s,c),$(u,i,c),$(u,a,c),b(r,u,c),f=!0},p(u,c){const d={};c&128&&(d.$$scope={dirty:c,ctx:u}),t.$set(d)},i(u){f||(m(t.$$.fragment,u),m(r.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(r.$$.fragment,u),f=!1},d(u){u&&(p(e),p(s),p(i),p(a)),w(t),w(r,u)}}}function yc(o){let e,l,t;return l=new pe({props:{$$slots:{default:[vc]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&128&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Fl(o){let e,l,t,n;return t=new Ge({props:{colorScale:o[1],limits:o[2]}}),{c(){e=C("p"),e.textContent="Peak hourly frequency:",l=L(),h(t.$$.fragment)},m(s,i){$(s,e,i),$(s,l,i),b(t,s,i),n=!0},p:W,i(s){n||(m(t.$$.fragment,s),n=!0)},o(s){_(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function Sc(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[yc],default:[wc]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&Fl(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&128&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&m(r,1)):(r=Fl(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Cc(o){let e,l,t,n=o[6].stop_name+"",s,i,a,r,f,u=o[6].peak+"",c,d,g,y,T,S=o[6].peak_description+"",j,R,P,D,N,O=o[6].total+"",M,I,A=o[6].total_description+"",Y,V;return{c(){e=C("p"),l=v("Stop name: "),t=C("b"),s=v(n),i=L(),a=C("p"),r=v("Peak: "),f=C("b"),c=v(u),d=v(`
        buses during the busiest hour of any day`),g=L(),y=C("p"),T=v("The peak hour is "),j=v(S),R=L(),P=C("p"),D=v("Total buses per day: "),N=C("b"),M=v(O),I=v(`
        (for `),Y=v(A),V=v(", the busiest day of the week)")},m(q,Q){$(q,e,Q),k(e,l),k(e,t),k(t,s),$(q,i,Q),$(q,a,Q),k(a,r),k(a,f),k(f,c),k(a,d),$(q,g,Q),$(q,y,Q),k(y,T),k(y,j),$(q,R,Q),$(q,P,Q),k(P,D),k(P,N),k(N,M),k(P,I),k(P,Y),k(P,V)},p(q,Q){Q&64&&n!==(n=q[6].stop_name+"")&&H(s,n),Q&64&&u!==(u=q[6].peak+"")&&H(c,u),Q&64&&S!==(S=q[6].peak_description+"")&&H(j,S),Q&64&&O!==(O=q[6].total+"")&&H(M,O),Q&64&&A!==(A=q[6].total_description+"")&&H(Y,A)},d(q){q&&(p(e),p(i),p(a),p(g),p(y),p(R),p(P))}}}function Tc(o){let e,l;return e=new ae({props:{$$slots:{default:[Cc,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Lc(o){let e,l;const t=[E(Ct),{sourceLayer:Ct},{paint:{"circle-color":we(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Tc]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new Gt({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E(Ct)),i&0&&{sourceLayer:Ct},i&6&&{paint:{"circle-color":we(["get","peak"],s[2],s[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&128&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ic(o){let e,l,t,n,s;function i(r){o[5](r)}let a={name:Ct,title:ao,$$slots:{default:[Sc]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Ct}.pmtiles`,$$slots:{default:[Lc]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&129&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&129&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Ct="bus_stops",ao="Bus stops";function Mc(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,3,10,20,30,100],i=he(Ct);K(o,i,f=>l(0,t=f));function a(f){t=f,i.set(t)}function r(f){t=f,i.set(t)}return[t,n,s,i,a,r]}class Nc extends X{constructor(e){super(),x(this,e,Mc,Ic,J,{})}}function Oc(o){let e;return{c(){e=v(uo)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function jc(o){let e;return{c(){e=v("crossing")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Pc(o){let e,l,t,n,s,i,a;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[jc]},$$scope:{ctx:o}}}),i=new xe({}),{c(){e=C("p"),l=v("This shows "),h(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=L(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(m(t.$$.fragment,r),m(i.$$.fragment,r),a=!0)},o(r){_(t.$$.fragment,r),_(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function Dc(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Pc]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Gl(o){let e,l;return e=new Kt({props:{rows:o[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Rc(o){let e,l,t,n,s;function i(f){o[3](f)}let a={$$slots:{right:[Dc],default:[Oc]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&Gl(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&64&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&m(r,1)):(r=Gl(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Ac(o){let e,l=zl(o[5])+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=zl(n[5])+"")&&H(t,l)},d(n){n&&p(e)}}}function qc(o){let e,l;return e=new ae({props:{$$slots:{default:[Ac,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Fc(o){let e,l;const t=[E(Tt),{sourceLayer:Tt},{paint:{"circle-color":Ke(["get","crossing"],{traffic_signals:ee.signalized_crossing},ee.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[qc]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new Gt({props:n}),e.$on("click",zc),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(Tt)),i&0&&{sourceLayer:Tt},t[2],i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Gc(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:Tt,title:uo,$$slots:{default:[Rc]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Tt}.pmtiles`,$$slots:{default:[Fc]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Tt="crossings",uo="Crossings";function zl(o){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[o.crossing]??`Unknown crossing type (${o.crossing})`}function zc(o){window.open(`http://openstreetmap.org/node/${o.detail.features[0].properties.osm_id}`,"_blank")}function Hc(o,e,l){let t,n=he(Tt);K(o,n,r=>l(0,t=r));let s=[["Signalized",ee.signalized_crossing],["Other",ee.other_crossing]];function i(r){t=r,n.set(t)}function a(r){t=r,n.set(t)}return[t,n,s,i,a]}class Ec extends X{constructor(e){super(),x(this,e,Hc,Gc,J,{})}}function Bc(o){let e;return{c(){e=v(co)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function Uc(o){let e;return{c(){e=v("OS Terrain 50")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Wc(o){let e,l,t,n,s,i,a,r,f,u,c,d,g;return a=new te({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Uc]},$$scope:{ctx:o}}}),u=new Le({}),d=new xe({}),{c(){e=C("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
          uphill. You have to zoom in to see all roads.`,l=L(),t=C("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
          on the underlying Digital Elevation Model used.`,n=L(),s=C("p"),i=v("This layer is built from "),h(a.$$.fragment),r=v(` and roads from OpenStreetMap. The data is valid as of 18
          February 2024.`),f=L(),h(u.$$.fragment),c=L(),h(d.$$.fragment)},m(y,T){$(y,e,T),$(y,l,T),$(y,t,T),$(y,n,T),$(y,s,T),k(s,i),b(a,s,null),k(s,r),$(y,f,T),b(u,y,T),$(y,c,T),b(d,y,T),g=!0},p(y,T){const S={};T&128&&(S.$$scope={dirty:T,ctx:y}),a.$set(S)},i(y){g||(m(a.$$.fragment,y),m(u.$$.fragment,y),m(d.$$.fragment,y),g=!0)},o(y){_(a.$$.fragment,y),_(u.$$.fragment,y),_(d.$$.fragment,y),g=!1},d(y){y&&(p(e),p(l),p(t),p(n),p(s),p(f),p(c)),w(a),w(u,y),w(d,y)}}}function Yc(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Wc]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&128&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Hl(o){let e,l;return e=new Ge({props:{colorScale:o[1],limits:o[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Jc(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[Yc],default:[Bc]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&Hl(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&128&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&m(r,1)):(r=Hl(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Vc(o){let e,l,t,n=Math.abs(o[6].gradient)/100+"",s,i;return{c(){e=C("p"),l=v("Gradient: "),t=C("b"),s=v(n),i=v(`
        %`)},m(a,r){$(a,e,r),k(e,l),k(e,t),k(t,s),k(e,i)},p(a,r){r&64&&n!==(n=Math.abs(a[6].gradient)/100+"")&&H(s,n)},d(a){a&&p(e)}}}function Qc(o){let e,l;return e=new ae({props:{$$slots:{default:[Vc,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Zc(o){let e,l,t,n;const s=[E(Je),{sourceLayer:Je},{manageHoverState:!0},{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":Ae,"line-opacity":le(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let i={$$slots:{default:[Qc]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=se(i,s[f]);e=new be({props:i});const a=[E(Je+"_arrows"),{sourceLayer:Je},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=se(r,a[f]);return t=new Tn({props:r}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&7?oe(s,[u&0&&re(E(Je)),u&0&&{sourceLayer:Je},s[2],u&6&&{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],f[2],f[1]),"line-width":Ae,"line-opacity":le(1,.5)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};u&128&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&1?oe(a,[u&0&&re(E(Je+"_arrows")),u&0&&{sourceLayer:Je},a[2],a[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(m(e.$$.fragment,f),m(t.$$.fragment,f),n=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function Kc(o){let e,l,t,n,s;function i(r){o[5](r)}let a={name:Je,title:co,$$slots:{default:[Jc]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Je}.pmtiles`,$$slots:{default:[Zc]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&129&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&129&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Je="gradient",co="Gradients";function Xc(o,e,l){let t,n=ee.gradient_flat_to_steep,s=[0,3,5,8,10,20,100],i=he(Je);K(o,i,f=>l(0,t=f));function a(f){t=f,i.set(t)}function r(f){t=f,i.set(t)}return[t,n,s,i,a,r]}class xc extends X{constructor(e){super(),x(this,e,Xc,Kc,J,{})}}function e$(o){let e,l,t,n;return{c(){e=C("img"),t=L(),n=v($o),tn(e.src,l=Lo)||B(e,"src",l),B(e,"alt","a logo representing cycle parking")},m(s,i){$(s,e,i),$(s,t,i),$(s,n,i)},p:W,d(s){s&&(p(e),p(t),p(n))}}}function t$(o){let e;return{c(){e=v("OpenStreetMap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function n$(o){let e;return{c(){e=v("OpenStreetMap Carto")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function l$(o){let e,l,t,n,s,i,a,r,f,u,c;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[t$]},$$scope:{ctx:o}}}),r=new te({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[n$]},$$scope:{ctx:o}}}),u=new xe({}),{c(){e=C("p"),l=v("Cycle parking, according to "),h(t.$$.fragment),n=v(` (as of 9 August 2023). The type of parking, public/private
          access, and whether it's covered are not shown.`),s=L(),i=C("p"),a=v("Icon from "),h(r.$$.fragment),f=L(),h(u.$$.fragment)},m(d,g){$(d,e,g),k(e,l),b(t,e,null),k(e,n),$(d,s,g),$(d,i,g),k(i,a),b(r,i,null),$(d,f,g),b(u,d,g),c=!0},p(d,g){const y={};g&32&&(y.$$scope={dirty:g,ctx:d}),t.$set(y);const T={};g&32&&(T.$$scope={dirty:g,ctx:d}),r.$set(T)},i(d){c||(m(t.$$.fragment,d),m(r.$$.fragment,d),m(u.$$.fragment,d),c=!0)},o(d){_(t.$$.fragment,d),_(r.$$.fragment,d),_(u.$$.fragment,d),c=!1},d(d){d&&(p(e),p(s),p(i),p(f)),w(t),w(r),w(u,d)}}}function s$(o){let e,l,t;return l=new pe({props:{$$slots:{default:[l$]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&32&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function o$(o){let e,l,t;function n(i){o[2](i)}let s={$$slots:{right:[s$],default:[e$]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&32&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function r$(o){let e,l,t,n=(o[4].capacity??"unknown")+"",s;return{c(){e=C("p"),l=v("Capacity: "),t=C("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&16&&n!==(n=(i[4].capacity??"unknown")+"")&&H(s,n)},d(i){i&&p(e)}}}function i$(o){let e,l;return e=new ae({props:{$$slots:{default:[r$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function f$(o){let e,l;const t=[E(Lt),{sourceLayer:Lt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[i$]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new Tn({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(Lt)),i&0&&{sourceLayer:Lt},i&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};i&32&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function a$(o){let e,l,t,n,s;function i(r){o[3](r)}let a={name:Lt,title:$o,$$slots:{default:[o$]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Lt}.pmtiles`,$$slots:{default:[f$]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&33&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Lt="cycle_parking",$o="Cycle parking";function u$(o,e,l){let t,n=he(Lt);K(o,n,a=>l(0,t=a));function s(a){t=a,n.set(t)}function i(a){t=a,n.set(t)}return[t,n,s,i]}class c$ extends X{constructor(e){super(),x(this,e,u$,a$,J,{})}}function $$(o){let e;return{c(){e=v(po)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function p$(o){let e,l,t,n;return t=new xe({}),{c(){e=C("p"),e.textContent=`This shows different places of education according to OpenStreetMap
          (as of 07 February 2024).`,l=L(),h(t.$$.fragment)},m(s,i){$(s,e,i),$(s,l,i),b(t,s,i),n=!0},p:W,i(s){n||(m(t.$$.fragment,s),n=!0)},o(s){_(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function m$(o){let e,l,t;return l=new pe({props:{$$slots:{default:[p$]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&4096&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function El(o){let e,l,t;return l=new Xe({props:{$$slots:{default:[h$]},$$scope:{ctx:o}}}),{c(){e=C("div"),h(l.$$.fragment),_e(e,"border","1px solid black"),_e(e,"padding","8px")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&4097&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function _$(o){let e,l,t;return e=new Te({props:{color:ee.education.schools}}),{c(){h(e.$$.fragment),l=v(`
          Schools`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:W,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function g$(o){let e,l,t;return e=new Te({props:{color:ee.education.colleges}}),{c(){h(e.$$.fragment),l=v(`
          Colleges`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:W,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function d$(o){let e,l,t;return e=new Te({props:{color:ee.education.universities}}),{c(){h(e.$$.fragment),l=v(`
          Universities`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:W,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function h$(o){let e,l,t,n,s,i,a,r,f;function u(S){o[4](S)}let c={$$slots:{default:[_$]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new ie({props:c}),F.push(()=>G(e,"checked",u));function d(S){o[5](S)}let g={$$slots:{default:[g$]},$$scope:{ctx:o}};o[0].college!==void 0&&(g.checked=o[0].college),n=new ie({props:g}),F.push(()=>G(n,"checked",d));function y(S){o[6](S)}let T={$$slots:{default:[d$]},$$scope:{ctx:o}};return o[0].university!==void 0&&(T.checked=o[0].university),a=new ie({props:T}),F.push(()=>G(a,"checked",y)),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment),i=L(),h(a.$$.fragment)},m(S,j){b(e,S,j),$(S,t,j),b(n,S,j),$(S,i,j),b(a,S,j),f=!0},p(S,j){const R={};j&4096&&(R.$$scope={dirty:j,ctx:S}),!l&&j&1&&(l=!0,R.checked=S[0].school,z(()=>l=!1)),e.$set(R);const P={};j&4096&&(P.$$scope={dirty:j,ctx:S}),!s&&j&1&&(s=!0,P.checked=S[0].college,z(()=>s=!1)),n.$set(P);const D={};j&4096&&(D.$$scope={dirty:j,ctx:S}),!r&&j&1&&(r=!0,D.checked=S[0].university,z(()=>r=!1)),a.$set(D)},i(S){f||(m(e.$$.fragment,S),m(n.$$.fragment,S),m(a.$$.fragment,S),f=!0)},o(S){_(e.$$.fragment,S),_(n.$$.fragment,S),_(a.$$.fragment,S),f=!1},d(S){S&&(p(t),p(i)),w(e,S),w(n,S),w(a,S)}}}function b$(o){let e,l,t,n,s;function i(f){o[3](f)}let a={$$slots:{right:[m$],default:[$$]},$$scope:{ctx:o}};o[0].show!==void 0&&(a.checked=o[0].show),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0].show&&El(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&4096&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0].show,z(()=>l=!1)),e.$set(c),f[0].show?r?(r.p(f,u),u&1&&m(r,1)):(r=El(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function w$(o){let e,l=(o[11].name??"Unnamed institution")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&2048&&l!==(l=(n[11].name??"Unnamed institution")+"")&&H(t,l)},d(n){n&&p(e)}}}function k$(o){let e,l;return e=new ae({props:{$$slots:{default:[w$,({props:t})=>({11:t}),({props:t})=>t?2048:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&6144&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function v$(o){let e,l;const t=[E(It),{sourceLayer:It},{paint:{"fill-color":Ke(["get","type"],{school:ee.education.schools,college:ee.education.colleges,university:ee.education.universities},"grey"),"fill-opacity":le(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[k$]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new qe({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&5?oe(t,[i&0&&re(E(It)),i&0&&{sourceLayer:It},t[2],i&1&&{layout:{visibility:s[0].show?"visible":"none"}},i&5&&{filter:s[2](s[0])},t[5],t[6]]):{};i&4096&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function y$(o){let e,l,t,n,s;function i(r){o[7](r)}let a={name:It,title:po,$$slots:{default:[b$]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${It}.pmtiles`,$$slots:{default:[v$]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&4097&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0].show,z(()=>l=!1)),e.$set(u);const c={};f&4097&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let It="education",po="Education";function S$(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function C$(o,e,l){let t,n=["school","college","university"],s={show:!1,school:!0,college:!0,university:!0};function i(y){return y.show?n.filter(T=>y[T]).join(","):null}let a=Ht(It,s,i,S$);K(o,a,y=>l(0,t=y));function r(y){let T=n.filter(S=>y[S]);return["in",["get","type"],["literal",T]]}function f(y){o.$$.not_equal(t.show,y)&&(t.show=y,a.set(t))}function u(y){o.$$.not_equal(t.school,y)&&(t.school=y,a.set(t))}function c(y){o.$$.not_equal(t.college,y)&&(t.college=y,a.set(t))}function d(y){o.$$.not_equal(t.university,y)&&(t.university=y,a.set(t))}function g(y){o.$$.not_equal(t.show,y)&&(t.show=y,a.set(t))}return[t,a,r,f,u,c,d,g]}class T$ extends X{constructor(e){super(),x(this,e,C$,y$,J,{})}}function L$(o){let e,l,t,n;return e=new Te({props:{color:ee.hospitals}}),{c(){h(e.$$.fragment),l=L(),t=v(mo)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function I$(o){let e;return{c(){e=v("hospital")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function M$(o){let e,l,t,n,s,i,a;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[I$]},$$scope:{ctx:o}}}),i=new xe({}),{c(){e=C("p"),l=v("This shows "),h(t.$$.fragment),n=v(` data from OpenStreetMap (as of 9 August 2023). It doesn't
          include outpatient clinics or individual doctor's offices.`),s=L(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(m(t.$$.fragment,r),m(i.$$.fragment,r),a=!0)},o(r){_(t.$$.fragment,r),_(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function N$(o){let e,l,t;return l=new pe({props:{$$slots:{default:[M$]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&32&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function O$(o){let e,l,t;function n(i){o[2](i)}let s={$$slots:{right:[N$],default:[L$]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&32&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function j$(o){let e,l=(o[4].name??"Unnamed hospital")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unnamed hospital")+"")&&H(t,l)},d(n){n&&p(e)}}}function P$(o){let e,l;return e=new ae({props:{$$slots:{default:[j$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function D$(o){let e,l;const t=[E(Mt),{sourceLayer:Mt},{paint:{"fill-color":ee.hospitals,"fill-opacity":le(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[P$]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new qe({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(Mt)),i&0&&{sourceLayer:Mt},t[2],i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&32&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function R$(o){let e,l,t,n,s;function i(r){o[3](r)}let a={name:Mt,title:mo,$$slots:{default:[O$]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Mt}.pmtiles`,$$slots:{default:[D$]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&33&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Mt="hospitals",mo="Hospitals";function A$(o,e,l){let t,n=he(Mt);K(o,n,a=>l(0,t=a));function s(a){t=a,n.set(t)}function i(a){t=a,n.set(t)}return[t,n,s,i]}class q$ extends X{constructor(e){super(),x(this,e,A$,R$,J,{})}}function F$(o){let e,l,t,n;return{c(){e=C("img"),t=L(),n=v(_o),tn(e.src,l=Io)||B(e,"src",l),B(e,"alt","A logo representing a train")},m(s,i){$(s,e,i),$(s,t,i),$(s,n,i)},p:W,d(s){s&&(p(e),p(t),p(n))}}}function G$(o){let e;return{c(){e=v("railway station")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function z$(o){let e;return{c(){e=v(`National Rail
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function H$(o){let e,l,t,n,s,i,a,r,f,u,c,d;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[G$]},$$scope:{ctx:o}}}),r=new te({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[z$]},$$scope:{ctx:o}}}),c=new xe({}),{c(){e=C("p"),l=v("This shows "),h(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=L(),i=C("p"),a=v("Icon from "),h(r.$$.fragment),f=v(". (Note that not all stations shown are National Rail.)"),u=L(),h(c.$$.fragment)},m(g,y){$(g,e,y),k(e,l),b(t,e,null),k(e,n),$(g,s,y),$(g,i,y),k(i,a),b(r,i,null),k(i,f),$(g,u,y),b(c,g,y),d=!0},p(g,y){const T={};y&32&&(T.$$scope={dirty:y,ctx:g}),t.$set(T);const S={};y&32&&(S.$$scope={dirty:y,ctx:g}),r.$set(S)},i(g){d||(m(t.$$.fragment,g),m(r.$$.fragment,g),m(c.$$.fragment,g),d=!0)},o(g){_(t.$$.fragment,g),_(r.$$.fragment,g),_(c.$$.fragment,g),d=!1},d(g){g&&(p(e),p(s),p(i),p(u)),w(t),w(r),w(c,g)}}}function E$(o){let e,l,t;return l=new pe({props:{$$slots:{default:[H$]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&32&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function B$(o){let e,l,t;function n(i){o[2](i)}let s={$$slots:{right:[E$],default:[F$]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&32&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function U$(o){let e,l=(o[4].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unnamed railway station")+"")&&H(t,l)},d(n){n&&p(e)}}}function W$(o){let e,l;return e=new ae({props:{$$slots:{default:[U$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Y$(o){let e,l;const t=[E(Qt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[W$]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new Tn({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(Qt)),i&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};i&32&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function J$(o){let e,l,t,n,s;function i(r){o[3](r)}let a={name:Qt,title:_o,$$slots:{default:[B$]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new zt({props:{data:`${ge()}/v1/${Qt}.geojson`,$$slots:{default:[Y$]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&33&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Qt="railway_stations",_o="Railway stations";function V$(o,e,l){let t,n=he(Qt);K(o,n,a=>l(0,t=a));function s(a){t=a,n.set(t)}function i(a){t=a,n.set(t)}return[t,n,s,i]}class Q$ extends X{constructor(e){super(),x(this,e,V$,J$,J,{})}}function Z$(o){let e,l,t,n;return e=new Te({props:{color:ee.sports_spaces}}),{c(){h(e.$$.fragment),l=L(),t=v(go)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(m(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function K$(o){let e;return{c(){e=v("sports pitches")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function X$(o){let e;return{c(){e=v("sports centres")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function x$(o){let e,l,t,n,s,i,a,r,f;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[K$]},$$scope:{ctx:o}}}),s=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[X$]},$$scope:{ctx:o}}}),r=new xe({}),{c(){e=C("p"),l=v("This shows "),h(t.$$.fragment),n=v(" and "),h(s.$$.fragment),i=v(" data from OpenStreetMap (as of 9 August 2023)."),a=L(),h(r.$$.fragment)},m(u,c){$(u,e,c),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,i),$(u,a,c),b(r,u,c),f=!0},p(u,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),s.$set(g)},i(u){f||(m(t.$$.fragment,u),m(s.$$.fragment,u),m(r.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),_(s.$$.fragment,u),_(r.$$.fragment,u),f=!1},d(u){u&&(p(e),p(a)),w(t),w(s),w(r,u)}}}function ep(o){let e,l,t;return l=new pe({props:{$$slots:{default:[x$]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&32&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function tp(o){let e,l,t;function n(i){o[2](i)}let s={$$slots:{right:[ep],default:[Z$]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&32&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function np(o){let e,l=(o[4].name??"Unnamed sports space")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unnamed sports space")+"")&&H(t,l)},d(n){n&&p(e)}}}function lp(o){let e,l;return e=new ae({props:{$$slots:{default:[np,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function sp(o){let e,l;const t=[E(Nt),{sourceLayer:Nt},{paint:{"fill-color":ee.sports_spaces,"fill-opacity":le(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[lp]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new qe({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(Nt)),i&0&&{sourceLayer:Nt},t[2],i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&32&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function op(o){let e,l,t,n,s;function i(r){o[3](r)}let a={name:Nt,title:go,$$slots:{default:[tp]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Nt}.pmtiles`,$$slots:{default:[sp]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&33&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Nt="sports_spaces",go="Sports spaces";function rp(o,e,l){let t,n=he(Nt);K(o,n,a=>l(0,t=a));function s(a){t=a,n.set(t)}function i(a){t=a,n.set(t)}return[t,n,s,i]}class ip extends X{constructor(e){super(),x(this,e,rp,op,J,{})}}function fp(o){let e;return{c(){e=v(ho)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function ap(o){let e;return{c(){e=v("DfT stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function up(o){let e;return{c(){e=v("documented by DfT")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function cp(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y,T,S,j,R,P,D,N,O,M;return t=new te({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[ap]},$$scope:{ctx:o}}}),j=new te({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[up]},$$scope:{ctx:o}}}),O=new Le({}),{c(){e=C("p"),l=v("This layer shows collisions recorded in the "),h(t.$$.fragment),n=v(" dataset. Please note these limitations:"),s=L(),i=C("ul"),a=C("li"),a.textContent="Only collisions between 2017 and 2022 are included",r=L(),f=C("li"),f.textContent=`This tool is intended to be used at high-zoom levels, while
            inspecting a scheme or development area. Not all points are shown at
            lower zoom levels. Do not use this to look for trends across a city
            or region scale.`,u=L(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included,
            due to problems with the recorded location`,d=L(),g=C("li"),g.textContent='The "pedestrians" category also include mobility scooters',y=L(),T=C("li"),S=v("All limitations "),h(j.$$.fragment),R=v(` also apply. Not all collisions or near misses are reported.
            There's nuance with the severity categories.`),P=L(),D=C("p"),D.textContent="You can click a point to open the full report, thanks to CycleStreets.",N=L(),h(O.$$.fragment)},m(I,A){$(I,e,A),k(e,l),b(t,e,null),k(e,n),$(I,s,A),$(I,i,A),k(i,a),k(i,r),k(i,f),k(i,u),k(i,c),k(i,d),k(i,g),k(i,y),k(i,T),k(T,S),b(j,T,null),k(T,R),$(I,P,A),$(I,D,A),$(I,N,A),b(O,I,A),M=!0},p(I,A){const Y={};A&8388608&&(Y.$$scope={dirty:A,ctx:I}),t.$set(Y);const V={};A&8388608&&(V.$$scope={dirty:A,ctx:I}),j.$set(V)},i(I){M||(m(t.$$.fragment,I),m(j.$$.fragment,I),m(O.$$.fragment,I),M=!0)},o(I){_(t.$$.fragment,I),_(j.$$.fragment,I),_(O.$$.fragment,I),M=!1},d(I){I&&(p(e),p(s),p(i),p(P),p(D),p(N)),w(t),w(j),w(O,I)}}}function $p(o){let e,l,t;return l=new pe({props:{$$slots:{default:[cp]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&8388608&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Bl(o){let e,l,t,n,s,i,a,r,f,u,c,d,g;return l=new Xe({props:{small:!0,$$slots:{default:[dp]},$$scope:{ctx:o}}}),u=new Kt({props:{rows:o[9]}}),{c(){e=C("div"),h(l.$$.fragment),t=L(),n=C("div"),s=v(`Filter years:
        `),i=C("input"),a=v(`
        -
        `),r=C("input"),f=L(),h(u.$$.fragment),B(i,"type","number"),B(i,"min",2017),B(i,"max",2022),B(i,"class","svelte-1ft65rw"),B(r,"type","number"),B(r,"min",2017),B(r,"max",2022),B(r,"class","svelte-1ft65rw"),_e(e,"border","1px solid black"),_e(e,"padding","8px")},m(y,T){$(y,e,T),b(l,e,null),k(e,t),k(e,n),k(n,s),k(n,i),Ve(i,o[0].minYear),k(n,a),k(n,r),Ve(r,o[0].maxYear),k(e,f),b(u,e,null),c=!0,d||(g=[lt(i,"input",o[15]),lt(r,"input",o[16])],d=!0)},p(y,T){const S={};T&8388609&&(S.$$scope={dirty:T,ctx:y}),l.$set(S),T&1&&Vt(i.value)!==y[0].minYear&&Ve(i,y[0].minYear),T&1&&Vt(r.value)!==y[0].maxYear&&Ve(r,y[0].maxYear)},i(y){c||(m(l.$$.fragment,y),m(u.$$.fragment,y),c=!0)},o(y){_(l.$$.fragment,y),_(u.$$.fragment,y),c=!1},d(y){y&&p(e),w(l),w(u),d=!1,zs(g)}}}function pp(o){let e;return{c(){e=v("Pedestrians")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function mp(o){let e;return{c(){e=v("Cyclists")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function _p(o){let e;return{c(){e=v("Horse riders")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function gp(o){let e;return{c(){e=v("Other")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function dp(o){let e,l,t,n,s,i,a,r,f,u,c,d;function g(N){o[11](N)}let y={$$slots:{default:[pp]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(y.checked=o[0].pedestrians),e=new ie({props:y}),F.push(()=>G(e,"checked",g));function T(N){o[12](N)}let S={$$slots:{default:[mp]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(S.checked=o[0].cyclists),n=new ie({props:S}),F.push(()=>G(n,"checked",T));function j(N){o[13](N)}let R={$$slots:{default:[_p]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(R.checked=o[0].horseRiders),a=new ie({props:R}),F.push(()=>G(a,"checked",j));function P(N){o[14](N)}let D={$$slots:{default:[gp]},$$scope:{ctx:o}};return o[0].other!==void 0&&(D.checked=o[0].other),u=new ie({props:D}),F.push(()=>G(u,"checked",P)),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment),i=L(),h(a.$$.fragment),f=L(),h(u.$$.fragment)},m(N,O){b(e,N,O),$(N,t,O),b(n,N,O),$(N,i,O),b(a,N,O),$(N,f,O),b(u,N,O),d=!0},p(N,O){const M={};O&8388608&&(M.$$scope={dirty:O,ctx:N}),!l&&O&1&&(l=!0,M.checked=N[0].pedestrians,z(()=>l=!1)),e.$set(M);const I={};O&8388608&&(I.$$scope={dirty:O,ctx:N}),!s&&O&1&&(s=!0,I.checked=N[0].cyclists,z(()=>s=!1)),n.$set(I);const A={};O&8388608&&(A.$$scope={dirty:O,ctx:N}),!r&&O&1&&(r=!0,A.checked=N[0].horseRiders,z(()=>r=!1)),a.$set(A);const Y={};O&8388608&&(Y.$$scope={dirty:O,ctx:N}),!c&&O&1&&(c=!0,Y.checked=N[0].other,z(()=>c=!1)),u.$set(Y)},i(N){d||(m(e.$$.fragment,N),m(n.$$.fragment,N),m(a.$$.fragment,N),m(u.$$.fragment,N),d=!0)},o(N){_(e.$$.fragment,N),_(n.$$.fragment,N),_(a.$$.fragment,N),_(u.$$.fragment,N),d=!1},d(N){N&&(p(t),p(i),p(f)),w(e,N),w(n,N),w(a,N),w(u,N)}}}function hp(o){let e,l,t,n,s;function i(f){o[10](f)}let a={$$slots:{right:[$p],default:[fp]},$$scope:{ctx:o}};o[0].show!==void 0&&(a.checked=o[0].show),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0].show&&Bl(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&8388608&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0].show,z(()=>l=!1)),e.$set(c),f[0].show?r?(r.p(f,u),u&1&&m(r,1)):(r=Bl(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Ul(o){let e,l,t,n=o[3][o[22].pedestrian_location]+"",s;return{c(){e=C("p"),l=v("Pedestrian location: "),t=C("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&4194304&&n!==(n=i[3][i[22].pedestrian_location]+"")&&H(s,n)},d(i){i&&p(e)}}}function Wl(o){let e,l,t,n=o[4][o[22].pedestrian_movement]+"",s;return{c(){e=C("p"),l=v("Pedestrian movement: "),t=C("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&4194304&&n!==(n=i[4][i[22].pedestrian_movement]+"")&&H(s,n)},d(i){i&&p(e)}}}function bp(o){let e,l,t,n=o[22].year+"",s,i,a,r,f,u=o[5][o[22].severity]+"",c,d,g,y,T,S=Yl(o[22])+"",j,R,P,D,N,O=o[22].pedestrian_location&&Ul(o),M=o[22].pedestrian_movement&&Wl(o);return{c(){e=C("p"),l=v("Year: "),t=C("b"),s=v(n),i=L(),a=C("p"),r=v("Severity: "),f=C("b"),c=v(u),d=L(),g=C("p"),y=v("Casualties: "),T=C("b"),j=v(S),R=L(),O&&O.c(),P=L(),M&&M.c(),D=L(),N=C("p"),N.textContent="Click to open full report in CycleStreets"},m(I,A){$(I,e,A),k(e,l),k(e,t),k(t,s),$(I,i,A),$(I,a,A),k(a,r),k(a,f),k(f,c),$(I,d,A),$(I,g,A),k(g,y),k(g,T),k(T,j),$(I,R,A),O&&O.m(I,A),$(I,P,A),M&&M.m(I,A),$(I,D,A),$(I,N,A)},p(I,A){A&4194304&&n!==(n=I[22].year+"")&&H(s,n),A&4194304&&u!==(u=I[5][I[22].severity]+"")&&H(c,u),A&4194304&&S!==(S=Yl(I[22])+"")&&H(j,S),I[22].pedestrian_location?O?O.p(I,A):(O=Ul(I),O.c(),O.m(P.parentNode,P)):O&&(O.d(1),O=null),I[22].pedestrian_movement?M?M.p(I,A):(M=Wl(I),M.c(),M.m(D.parentNode,D)):M&&(M.d(1),M=null)},d(I){I&&(p(e),p(i),p(a),p(d),p(g),p(R),p(P),p(D),p(N)),O&&O.d(I),M&&M.d(I)}}}function wp(o){let e,l;return e=new ae({props:{$$slots:{default:[bp,({props:t})=>({22:t}),({props:t})=>t?4194304:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&12582912&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function kp(o){let e,l;const t=[E(Ot),{sourceLayer:Ot},{paint:{"circle-color":we(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[wp]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new Gt({props:n}),e.$on("click",Sp),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&451?oe(t,[i&0&&re(E(Ot)),i&0&&{sourceLayer:Ot},i&448&&{paint:{"circle-color":we(["get","severity"],[1,2,3],[s[6],s[7],s[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&2&&{filter:s[1]},i&1&&{layout:{visibility:s[0].show?"visible":"none"}},t[5],t[6]]):{};i&8388608&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function vp(o){let e,l,t,n,s;function i(r){o[17](r)}let a={name:Ot,title:ho,$$slots:{default:[hp]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Ot}.pmtiles`,$$slots:{default:[kp]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&8388609&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0].show,z(()=>l=!1)),e.$set(u);const c={};f&8388611&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Ot="stats19",ho="Stats19";function yp(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Yl(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function Sp(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function Cp(o,e,l){let t,n,s=["pedestrians","cyclists","horseRiders","other"],i={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function a(A){return A.show?`${s.filter(V=>A[V]).join(",")}/${A.minYear}/${A.maxYear}`:null}let r=Ht(Ot,i,a,yp);K(o,r,A=>l(0,n=A));function f(A,Y,V,q,Q,ne){let U=["any"];return n.pedestrians&&U.push(["get","pedestrian"]),n.cyclists&&U.push(["get","cyclist"]),n.horseRiders&&U.push(["get","horse_rider"]),n.other&&U.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],U]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},d={1:"Fatal",2:"Serious",3:"Slight"},g=ee.sequential_low_to_high[4],y=ee.sequential_low_to_high[2],T=ee.sequential_low_to_high[0],S=[["Fatal",g],["Serious",y],["Slight",T]];function j(A){o.$$.not_equal(n.show,A)&&(n.show=A,r.set(n))}function R(A){o.$$.not_equal(n.pedestrians,A)&&(n.pedestrians=A,r.set(n))}function P(A){o.$$.not_equal(n.cyclists,A)&&(n.cyclists=A,r.set(n))}function D(A){o.$$.not_equal(n.horseRiders,A)&&(n.horseRiders=A,r.set(n))}function N(A){o.$$.not_equal(n.other,A)&&(n.other=A,r.set(n))}function O(){n.minYear=Vt(this.value),r.set(n)}function M(){n.maxYear=Vt(this.value),r.set(n)}function I(A){o.$$.not_equal(n.show,A)&&(n.show=A,r.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=f(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,r,u,c,d,g,y,T,S,j,R,P,D,N,O,M,I]}class Tp extends X{constructor(e){super(),x(this,e,Cp,vp,J,{})}}function Lp(o){let e;return{c(){e=v(bo)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function Ip(o){let e;return{c(){e=v(`DfT road statistics
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Mp(o){let e;return{c(){e=v("methodology")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Np(o){let e,l,t,n,s,i,a,r,f,u,c;return t=new te({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Ip]},$$scope:{ctx:o}}}),s=new te({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Mp]},$$scope:{ctx:o}}}),u=new Le({}),{c(){e=C("p"),l=v("AADF (annual average daily flow) data from "),h(t.$$.fragment),n=v(`. This counts the total daily number of vehicles
          traveling past a count point (in both directions) on an average day of
          the year. Data from the latest year available is shown. See `),h(s.$$.fragment),i=v(" for details and caveats about the measurements."),a=L(),r=C("p"),r.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
          thicker when the latest data is a manual or automatic count, and
          thinner when it's an estimate from previous years or nearby counters.
          Click a point for full data.`,f=L(),h(u.$$.fragment)},m(d,g){$(d,e,g),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,i),$(d,a,g),$(d,r,g),$(d,f,g),b(u,d,g),c=!0},p(d,g){const y={};g&256&&(y.$$scope={dirty:g,ctx:d}),t.$set(y);const T={};g&256&&(T.$$scope={dirty:g,ctx:d}),s.$set(T)},i(d){c||(m(t.$$.fragment,d),m(s.$$.fragment,d),m(u.$$.fragment,d),c=!0)},o(d){_(t.$$.fragment,d),_(s.$$.fragment,d),_(u.$$.fragment,d),c=!1},d(d){d&&(p(e),p(a),p(r),p(f)),w(t),w(s),w(u,d)}}}function Op(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Np]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&256&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Jl(o){let e,l;return e=new Ge({props:{colorScale:o[1],limits:o[3]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function jp(o){let e,l,t,n,s;function i(f){o[5](f)}let a={$$slots:{right:[Op],default:[Lp]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&Jl(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&256&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&m(r,1)):(r=Jl(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Pp(o){let e,l=o[7].location+"",t,n,s,i,a=o[7].year+"",r,f,u,c=o[7].motor_vehicles.toLocaleString()+"",d,g,y,T,S=o[7].year+"",j,R,P,D=o[7].pedal_cycles.toLocaleString()+"",N,O,M,I,A,Y=o[7].method+"",V;return{c(){e=C("h2"),t=v(l),n=L(),s=C("p"),i=v("Total motor vehicles ("),r=v(a),f=v(` AADF):
        `),u=C("b"),d=v(c),g=L(),y=C("p"),T=v("Total pedal cycles ("),j=v(S),R=v(` AADF):
        `),P=C("b"),N=v(D),O=L(),M=C("p"),I=v("Count method: "),A=C("b"),V=v(Y)},m(q,Q){$(q,e,Q),k(e,t),$(q,n,Q),$(q,s,Q),k(s,i),k(s,r),k(s,f),k(s,u),k(u,d),$(q,g,Q),$(q,y,Q),k(y,T),k(y,j),k(y,R),k(y,P),k(P,N),$(q,O,Q),$(q,M,Q),k(M,I),k(M,A),k(A,V)},p(q,Q){Q&128&&l!==(l=q[7].location+"")&&H(t,l),Q&128&&a!==(a=q[7].year+"")&&H(r,a),Q&128&&c!==(c=q[7].motor_vehicles.toLocaleString()+"")&&H(d,c),Q&128&&S!==(S=q[7].year+"")&&H(j,S),Q&128&&D!==(D=q[7].pedal_cycles.toLocaleString()+"")&&H(N,D),Q&128&&Y!==(Y=q[7].method+"")&&H(V,Y)},d(q){q&&(p(e),p(n),p(s),p(g),p(y),p(O),p(M))}}}function Dp(o){let e,l;return e=new ae({props:{$$slots:{default:[Pp,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&384&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Rp(o){let e,l;const t=[E(jt),{sourceLayer:jt},{paint:{"circle-color":we(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Dp]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new Gt({props:n}),e.$on("click",qp),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E(jt)),i&0&&{sourceLayer:jt},i&6&&{paint:{"circle-color":we(["get","motor_vehicles"],s[2],s[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&256&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ap(o){let e,l,t,n,s;function i(r){o[6](r)}let a={name:jt,title:bo,$$slots:{default:[jp]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${jt}.pmtiles`,$$slots:{default:[Rp]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&257&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&257&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let jt="vehicle_counts",bo="Vehicle counts";function qp(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function Fp(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,4e4,8e4,12e4,16e4,205e3],i=["","40k","80k","120k","160k",""],a=he(jt);K(o,a,u=>l(0,t=u));function r(u){t=u,a.set(t)}function f(u){t=u,a.set(t)}return[t,n,s,i,a,r,f]}class Gp extends X{constructor(e){super(),x(this,e,Fp,Ap,J,{})}}function Vl(o,e,l){const t=o.slice();return t[7]=e[l],t}function zp(o){let e;return{c(){e=v(wo)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function Hp(o){let e,l,t;return{c(){e=C("p"),e.textContent=`Critical issues and policy conflicts from the Design Assistance Log.
          This is internally collected data.`,l=L(),t=C("p"),t.textContent=`This layer is manually copied from a copy of the DA Log. The data is
          recent as of 10 June 2024.`},m(n,s){$(n,e,s),$(n,l,s),$(n,t,s)},p:W,d(n){n&&(p(e),p(l),p(t))}}}function Ep(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Hp]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&1024&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ql(o){let e,l;return e=new Kt({props:{rows:o[3]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Bp(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[Ep],default:[zp]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&Ql(o);return{c(){h(e.$$.fragment),t=L(),r&&r.c(),n=$e()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&1024&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&m(r,1)):(r=Ql(f),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),_(r,1,1,()=>{r=null}),ce())},i(f){s||(m(e.$$.fragment,f),m(r),s=!0)},o(f){_(e.$$.fragment,f),_(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Up(o){let e,l=o[6]["Issue ID"]+"",t,n,s=o[6].Code+"",i,a,r,f=o[6]["Issue Stage"]+"",u;return{c(){e=C("h2"),t=v(l),n=v(" - "),i=v(s),a=L(),r=C("p"),u=v(f)},m(c,d){$(c,e,d),k(e,t),k(e,n),k(e,i),$(c,a,d),$(c,r,d),k(r,u)},p(c,d){d&64&&l!==(l=c[6]["Issue ID"]+"")&&H(t,l),d&64&&s!==(s=c[6].Code+"")&&H(i,s),d&64&&f!==(f=c[6]["Issue Stage"]+"")&&H(u,f)},d(c){c&&(p(e),p(a),p(r))}}}function Zl(o){let e,l=o[7]+"",t,n,s,i=o[6][o[7]]+"",a,r;return{c(){e=C("p"),t=v(l),n=v(`:
            `),s=C("b"),a=v(i),r=L()},m(f,u){$(f,e,u),k(e,t),k(e,n),k(e,s),k(s,a),k(e,r)},p(f,u){u&64&&i!==(i=f[6][f[7]]+"")&&H(a,i)},d(f){f&&p(e)}}}function Wp(o){let e,l=ye(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Zl(Vl(o,l,n));return{c(){e=C("div");for(let n=0;n<t.length;n+=1)t[n].c();_e(e,"max-width","30vw"),_e(e,"max-height","60vh"),_e(e,"overflow","auto")},m(n,s){$(n,e,s);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(n,s){if(s&68){l=ye(n[2]);let i;for(i=0;i<l.length;i+=1){const a=Vl(n,l,i);t[i]?t[i].p(a,s):(t[i]=Zl(a),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(n){n&&p(e),Ze(t,n)}}}function Yp(o){let e,l,t,n;return e=new ae({props:{openOn:"hover",$$slots:{default:[Up,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Wp,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(s,i){b(e,s,i),$(s,l,i),b(t,s,i),n=!0},p(s,i){const a={};i&1088&&(a.$$scope={dirty:i,ctx:s}),e.$set(a);const r={};i&1088&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){n||(m(e.$$.fragment,s),m(t.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function Jp(o){let e,l;const t=[E(sn),{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Yp]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new Gt({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&9?oe(t,[i&0&&re(E(sn)),i&8&&{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(s[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[3],t[4]]):{};i&1024&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Vp(o){let e,l,t,n,s;function i(r){o[5](r)}let a={name:sn,title:wo,$$slots:{default:[Bp]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new me({props:a}),F.push(()=>G(e,"show",i)),n=new zt({props:{data:`${Zt()}/v1/problems.geojson.gz`,$$slots:{default:[Jp]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&1025&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&1025&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let sn="problems",wo="Issues & Conflicts";function Qp(o,e,l){let t,n=he(sn);K(o,n,f=>l(0,t=f));let s=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],i=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function a(f){t=f,n.set(t)}function r(f){t=f,n.set(t)}return[t,n,s,i,a,r]}class Zp extends X{constructor(e){super(),x(this,e,Qp,Vp,J,{})}}function Kp(o){let e;function l(s,i){return s[2]<=100?em:xp}let t=l(o),n=t(o);return{c(){n.c(),e=$e()},m(s,i){n.m(s,i),$(s,e,i)},p(s,i){t===(t=l(s))&&n?n.p(s,i):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},i:W,o:W,d(s){s&&p(e),n.d(s)}}}function Xp(o){let e,l;return e=new st({props:{$$slots:{default:[tm]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function xp(o){let e;return{c(){e=C("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function em(o){let e,l,t;return{c(){e=C("label"),l=v(`Downloading scheme data
      `),t=C("progress"),t.value=o[2],B(t,"class","svelte-q3473n")},m(n,s){$(n,e,s),k(e,l),k(e,t)},p(n,s){s&4&&(t.value=n[2])},d(n){n&&p(e)}}}function tm(o){let e;return{c(){e=v("Load latest scheme data")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function nm(o){let e,l,t,n;const s=[Xp,Kp],i=[];function a(r,f){return r[0]?r[1]?1:-1:0}return~(e=a(o))&&(l=i[e]=s[e](o)),{c(){l&&l.c(),t=$e()},m(r,f){~e&&i[e].m(r,f),$(r,t,f),n=!0},p(r,[f]){let u=e;e=a(r),e===u?~e&&i[e].p(r,f):(l&&(ue(),_(i[u],1,1,()=>{i[u]=null}),ce()),~e?(l=i[e],l?l.p(r,f):(l=i[e]=s[e](r),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(r){n||(m(l),n=!0)},o(r){_(l),n=!1},d(r){r&&p(t),~e&&i[e].d(r)}}}function lm(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),s=!0,i=0;async function a(){let f=await Mo(`${Zt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,i=c)});l(2,i=100);let u=new TextDecoder().decode(f);t("all_schemes_output.geojson",u),l(1,s=!1)}Es(async()=>{n&&await a()});async function r(){l(0,n=!0),await a()}return o.$$set=f=>{"loadFile"in f&&l(4,t=f.loadFile)},[n,s,i,r,t]}class sm extends X{constructor(e){super(),x(this,e,lm,nm,J,{loadFile:4})}}const on=De({type:"FeatureCollection",features:[],schemes:{}}),dn=De(new Map),Kl=De(""),Xl=De(""),hn=De({type:"FeatureCollection",features:[],schemes:{}}),bn=De(new Map),xl=De(""),es=De("");function om(o){let e={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},l=new Map,t={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},n=new Map;for(let[s,i]of Object.entries(o.schemes))i.pipeline?(n.set(s,i),t.schemes[s]=i):(l.set(s,i),e.schemes[s]=i);for(let s of o.features){if(!rm(s))continue;let i=s.properties.scheme_reference,a=l.has(i),f=(a?l:n).get(i);f.browse&&(s.properties.funding_programme=f.browse.funding_programme,s.properties.current_milestone=f.browse.current_milestone);let u=a?e:t;s.id=u.features.length+1,u.features.push(s)}on.set(e),dn.set(l),hn.set(t),bn.set(n)}function rm(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}let Wt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},wn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function ts(o,e,l){const t=o.slice();return t[28]=e[l],t[29]=e,t[30]=l,t}function im(o){let e;return{c(){e=v("Filters")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function fm(o){let e;return{c(){e=v("Reset all filters")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function am(o){let e,l,t,n,s,i,a,r;e=new mn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[$m]},$$scope:{ctx:o}}});function f(g){o[23](g)}let u={label:"Scheme name or reference",options:rn(o[3])};o[0]!==void 0&&(u.value=o[0]),t=new Us({props:u}),F.push(()=>G(t,"value",f));function c(g){o[24](g)}let d={label:"Authority or region",choices:o[10],emptyOption:!0};return o[4]!==void 0&&(d.value=o[4]),i=new Ft({props:d}),F.push(()=>G(i,"value",c)),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),s=L(),h(i.$$.fragment)},m(g,y){b(e,g,y),$(g,l,y),b(t,g,y),$(g,s,y),b(i,g,y),r=!0},p(g,y){const T={};y[0]&2|y[1]&1&&(T.$$scope={dirty:y,ctx:g}),e.$set(T);const S={};y[0]&8&&(S.options=rn(g[3])),!n&&y[0]&1&&(n=!0,S.value=g[0],z(()=>n=!1)),t.$set(S);const j={};y[0]&1024&&(j.choices=g[10]),!a&&y[0]&16&&(a=!0,j.value=g[4],z(()=>a=!1)),i.$set(j)},i(g){r||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(i.$$.fragment,g),r=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(i.$$.fragment,g),r=!1},d(g){g&&(p(l),p(s)),w(e,g),w(t,g),w(i,g)}}}function um(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y,T,S;t=new mn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[mm]},$$scope:{ctx:o}}});function j(M){o[17](M)}let R={label:"Scheme name or reference",options:rn(o[3])};o[0]!==void 0&&(R.value=o[0]),s=new Us({props:R}),F.push(()=>G(s,"value",j));function P(M){o[18](M)}let D={label:"Authority or region",choices:o[10],emptyOption:!0};o[4]!==void 0&&(D.value=o[4]),r=new Ft({props:D}),F.push(()=>G(r,"value",P)),d=new mn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[dm]},$$scope:{ctx:o}}});function N(M){o[20](M)}let O={label:"Current milestone",choices:o[11],emptyOption:!0};return o[6]!==void 0&&(O.value=o[6]),y=new Ft({props:O}),F.push(()=>G(y,"value",N)),{c(){e=C("div"),l=C("div"),h(t.$$.fragment),n=L(),h(s.$$.fragment),a=L(),h(r.$$.fragment),u=L(),c=C("div"),h(d.$$.fragment),g=L(),h(y.$$.fragment),B(l,"class","govuk-grid-column-one-half"),B(c,"class","govuk-grid-column-one-half"),B(e,"class","govuk-grid-row")},m(M,I){$(M,e,I),k(e,l),b(t,l,null),k(l,n),b(s,l,null),k(l,a),b(r,l,null),k(e,u),k(e,c),b(d,c,null),k(c,g),b(y,c,null),S=!0},p(M,I){const A={};I[0]&2|I[1]&1&&(A.$$scope={dirty:I,ctx:M}),t.$set(A);const Y={};I[0]&8&&(Y.options=rn(M[3])),!i&&I[0]&1&&(i=!0,Y.value=M[0],z(()=>i=!1)),s.$set(Y);const V={};I[0]&1024&&(V.choices=M[10]),!f&&I[0]&16&&(f=!0,V.value=M[4],z(()=>f=!1)),r.$set(V);const q={};I[0]&32|I[1]&1&&(q.$$scope={dirty:I,ctx:M}),d.$set(q);const Q={};!T&&I[0]&64&&(T=!0,Q.value=M[6],z(()=>T=!1)),y.$set(Q)},i(M){S||(m(t.$$.fragment,M),m(s.$$.fragment,M),m(r.$$.fragment,M),m(d.$$.fragment,M),m(y.$$.fragment,M),S=!0)},o(M){_(t.$$.fragment,M),_(s.$$.fragment,M),_(r.$$.fragment,M),_(d.$$.fragment,M),_(y.$$.fragment,M),S=!1},d(M){M&&p(e),w(t),w(s),w(r),w(d),w(y)}}}function cm(o){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $m(o){let e,l,t,n,s,i;return t=new st({props:{$$slots:{default:[cm]},$$scope:{ctx:o}}}),t.$on("click",o[22]),{c(){e=C("input"),l=L(),h(t.$$.fragment),B(e,"type","text"),B(e,"class","govuk-input govuk-input--width-10"),B(e,"id","filterInterventionText")},m(a,r){$(a,e,r),Ve(e,o[1]),$(a,l,r),b(t,a,r),n=!0,s||(i=lt(e,"input",o[21]),s=!0)},p(a,r){r[0]&2&&e.value!==a[1]&&Ve(e,a[1]);const f={};r[1]&1&&(f.$$scope={dirty:r,ctx:a}),t.$set(f)},i(a){n||(m(t.$$.fragment,a),n=!0)},o(a){_(t.$$.fragment,a),n=!1},d(a){a&&(p(e),p(l)),w(t,a),s=!1,i()}}}function pm(o){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function mm(o){let e,l,t,n,s,i;return t=new st({props:{$$slots:{default:[pm]},$$scope:{ctx:o}}}),t.$on("click",o[16]),{c(){e=C("input"),l=L(),h(t.$$.fragment),B(e,"type","text"),B(e,"class","govuk-input govuk-input--width-10"),B(e,"id","filterInterventionText")},m(a,r){$(a,e,r),Ve(e,o[1]),$(a,l,r),b(t,a,r),n=!0,s||(i=lt(e,"input",o[15]),s=!0)},p(a,r){r[0]&2&&e.value!==a[1]&&Ve(e,a[1]);const f={};r[1]&1&&(f.$$scope={dirty:r,ctx:a}),t.$set(f)},i(a){n||(m(t.$$.fragment,a),n=!0)},o(a){_(t.$$.fragment,a),n=!1},d(a){a&&(p(e),p(l)),w(t,a),s=!1,i()}}}function _m(o){let e=o[28]+"",l,t;return{c(){l=v(e),t=L()},m(n,s){$(n,l,s),$(n,t,s)},p:W,d(n){n&&(p(l),p(t))}}}function ns(o){let e,l,t;function n(i){o[19](i,o[28])}let s={$$slots:{default:[_m]},$$scope:{ctx:o}};return o[5][o[28]]!==void 0&&(s.checked=o[5][o[28]]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){o=i;const r={};a[1]&1&&(r.$$scope={dirty:a,ctx:o}),!l&&a[0]&32&&(l=!0,r.checked=o[5][o[28]],z(()=>l=!1)),e.$set(r)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function gm(o){let e,l,t=ye(Object.keys(Wt)),n=[];for(let i=0;i<t.length;i+=1)n[i]=ns(ts(o,t,i));const s=i=>_(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=$e()},m(i,a){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(i,a);$(i,e,a),l=!0},p(i,a){if(a[0]&32){t=ye(Object.keys(Wt));let r;for(r=0;r<t.length;r+=1){const f=ts(i,t,r);n[r]?(n[r].p(f,a),m(n[r],1)):(n[r]=ns(f),n[r].c(),m(n[r],1),n[r].m(e.parentNode,e))}for(ue(),r=t.length;r<n.length;r+=1)s(r);ce()}},i(i){if(!l){for(let a=0;a<t.length;a+=1)m(n[a]);l=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)_(n[a]);l=!1},d(i){i&&p(e),Ze(n,i)}}}function dm(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[gm]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n[0]&32|n[1]&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function hm(o){let e;return{c(){e=v("Done")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function bm(o){let e,l,t,n,s=o[9].interventions.toLocaleString()+"",i,a,r,f,u=o[8].size.toLocaleString()+"",c,d,g,y,T,S=ls(o[9].totalLength).toFixed(1)+"",j,R,P,D,N,O,M,I,A,Y;D=new st({props:{$$slots:{default:[fm]},$$scope:{ctx:o}}}),D.$on("click",o[12]);const V=[um,am],q=[];function Q(ne,U){return ne[2]=="ATF"?0:1}return O=Q(o),M=q[O]=V[O](o),A=new No({props:{$$slots:{default:[hm]},$$scope:{ctx:o}}}),A.$on("click",o[25]),{c(){e=C("p"),e.textContent="Showing:",l=L(),t=C("ul"),n=C("li"),i=v(s),a=v(" interventions"),r=L(),f=C("li"),c=v(u),d=v(" schemes"),g=L(),y=C("li"),T=v("total route length of "),j=v(S),R=v(" miles"),P=L(),h(D.$$.fragment),N=L(),M.c(),I=L(),h(A.$$.fragment)},m(ne,U){$(ne,e,U),$(ne,l,U),$(ne,t,U),k(t,n),k(n,i),k(n,a),k(t,r),k(t,f),k(f,c),k(f,d),k(t,g),k(t,y),k(y,T),k(y,j),k(y,R),$(ne,P,U),b(D,ne,U),$(ne,N,U),q[O].m(ne,U),$(ne,I,U),b(A,ne,U),Y=!0},p(ne,U){(!Y||U[0]&512)&&s!==(s=ne[9].interventions.toLocaleString()+"")&&H(i,s),(!Y||U[0]&256)&&u!==(u=ne[8].size.toLocaleString()+"")&&H(c,u),(!Y||U[0]&512)&&S!==(S=ls(ne[9].totalLength).toFixed(1)+"")&&H(j,S);const Ie={};U[1]&1&&(Ie.$$scope={dirty:U,ctx:ne}),D.$set(Ie);let Re=O;O=Q(ne),O===Re?q[O].p(ne,U):(ue(),_(q[Re],1,1,()=>{q[Re]=null}),ce(),M=q[O],M?M.p(ne,U):(M=q[O]=V[O](ne),M.c()),m(M,1),M.m(I.parentNode,I));const Z={};U[1]&1&&(Z.$$scope={dirty:U,ctx:ne}),A.$set(Z)},i(ne){Y||(m(D.$$.fragment,ne),m(M),m(A.$$.fragment,ne),Y=!0)},o(ne){_(D.$$.fragment,ne),_(M),_(A.$$.fragment,ne),Y=!1},d(ne){ne&&(p(e),p(l),p(t),p(P),p(N),p(I)),w(D,ne),q[O].d(ne),w(A,ne)}}}function wm(o){let e,l,t,n,s;e=new st({props:{$$slots:{default:[im]},$$scope:{ctx:o}}}),e.$on("click",o[14]);function i(r){o[26](r)}let a={title:`Filter ${o[2]} schemes`,$$slots:{default:[bm]},$$scope:{ctx:o}};return o[7]!==void 0&&(a.open=o[7]),t=new Rs({props:a}),F.push(()=>G(t,"open",i)),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(r,f){b(e,r,f),$(r,l,f),b(t,r,f),s=!0},p(r,f){const u={};f[1]&1&&(u.$$scope={dirty:f,ctx:r}),e.$set(u);const c={};f[0]&4&&(c.title=`Filter ${r[2]} schemes`),f[0]&2047|f[1]&1&&(c.$$scope={dirty:f,ctx:r}),!n&&f[0]&128&&(n=!0,c.open=r[7],z(()=>n=!1)),t.$set(c)},i(r){s||(m(e.$$.fragment,r),m(t.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),s=!1},d(r){r&&p(l),w(e,r),w(t,r)}}}function km(o){var t;let e=new Set;for(let n of o.values())(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function ls(o){return o*621371e-9}function rn(o){let e=[];for(let l of o.values())e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function vm(o,e,l){let t,{source:n}=e,{schemes:s}=e,{schemesGj:i}=e,{filterSchemeText:a}=e,{filterInterventionText:r}=e,f=!1,u=new Set,c={interventions:0,totalLength:0},d=Object.keys(wn).map(U=>[U,U]),g="",y=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0])),T="";function S(U,Ie,Re,Z,ut){let Me=U.toLowerCase(),ct=Ie.toLowerCase(),Xt=ve=>{var et,ot,Bt,Yt;if(Me&&!((et=ve.properties.name)!=null&&et.toLowerCase().includes(Me))&&!((ot=ve.properties.description)!=null&&ot.toLowerCase().includes(Me)))return!1;let ze=s.get(ve.properties.scheme_reference);return!(Re&&((Bt=ze.browse)==null?void 0:Bt.authority_or_region)!=Re||n=="ATF"&&!Z[ze.browse.funding_programme]||ut&&((Yt=ze.browse)==null?void 0:Yt.current_milestone)!=ut||ct&&!ze.scheme_reference.toLowerCase().includes(ct)&&!(ze.scheme_name??"").toLowerCase().includes(ct))};l(8,u=new Set(i.features.filter(Xt).map(ve=>ve.properties.scheme_reference))),l(9,c={interventions:0,totalLength:0});let Et=ve=>{var ze,et;return!(!u.has(ve.properties.scheme_reference)||Me&&!((ze=ve.properties.name)!=null&&ze.toLowerCase().includes(Me))&&!((et=ve.properties.description)!=null&&et.toLowerCase().includes(Me)))};for(let ve of i.features)Et(ve)?(delete ve.properties.hide_while_editing,l(9,c.interventions++,c),ve.geometry.type=="LineString"&&ve.properties.length_meters&&l(9,c.totalLength+=ve.properties.length_meters,c)):ve.properties.hide_while_editing=!0;l(13,i),l(9,c)}function j(){l(4,g=""),l(5,y=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0]))),l(6,T=""),l(1,r=""),l(0,a="")}const R=()=>l(7,f=!0);function P(){r=this.value,l(1,r)}const D=()=>l(1,r="");function N(U){a=U,l(0,a)}function O(U){g=U,l(4,g)}function M(U,Ie){o.$$.not_equal(y[Ie],U)&&(y[Ie]=U,l(5,y))}function I(U){T=U,l(6,T)}function A(){r=this.value,l(1,r)}const Y=()=>l(1,r="");function V(U){a=U,l(0,a)}function q(U){g=U,l(4,g)}const Q=()=>l(7,f=!1);function ne(U){f=U,l(7,f)}return o.$$set=U=>{"source"in U&&l(2,n=U.source),"schemes"in U&&l(3,s=U.schemes),"schemesGj"in U&&l(13,i=U.schemesGj),"filterSchemeText"in U&&l(0,a=U.filterSchemeText),"filterInterventionText"in U&&l(1,r=U.filterInterventionText)},o.$$.update=()=>{o.$$.dirty[0]&8&&l(10,t=km(s)),o.$$.dirty[0]&115&&S(r,a,g,y,T)},[a,r,n,s,g,y,T,f,u,c,t,d,j,i,R,P,D,N,O,M,I,A,Y,V,q,Q,ne]}class ko extends X{constructor(e){super(),x(this,e,vm,wm,J,{source:2,schemes:3,schemesGj:13,filterSchemeText:0,filterInterventionText:1},null,[-1,-1])}}function ss(o){let e,l,t,n=o[0].status+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Status",t=v(`
    : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&1&&n!==(n=i[0].status+"")&&H(s,n)},d(i){i&&p(e)}}}function os(o){let e,l,t,n=o[0].timescale+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Timescale",t=v(`
    : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&1&&n!==(n=i[0].timescale+"")&&H(s,n)},d(i){i&&p(e)}}}function rs(o){let e,l,t,n=o[0].timescale_year+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Estimated completion year",t=v(`
    : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&1&&n!==(n=i[0].timescale_year+"")&&H(s,n)},d(i){i&&p(e)}}}function is(o){let e,l,t,n=o[0].year_published+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Scheme most recently published",t=v(`
    : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&1&&n!==(n=i[0].year_published+"")&&H(s,n)},d(i){i&&p(e)}}}function fs(o){let e,l,t,n=o[0].year_consulted+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Scheme most recently consulted on",t=v(`
    : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&1&&n!==(n=i[0].year_consulted+"")&&H(s,n)},d(i){i&&p(e)}}}function ym(o){let e,l,t,n,s,i=o[0].status&&ss(o),a=o[0].timescale&&os(o),r=o[0].timescale_year&&rs(o),f=o[0].year_published&&is(o),u=o[0].year_consulted&&fs(o);return{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),r&&r.c(),t=L(),f&&f.c(),n=L(),u&&u.c(),s=$e()},m(c,d){i&&i.m(c,d),$(c,e,d),a&&a.m(c,d),$(c,l,d),r&&r.m(c,d),$(c,t,d),f&&f.m(c,d),$(c,n,d),u&&u.m(c,d),$(c,s,d)},p(c,[d]){c[0].status?i?i.p(c,d):(i=ss(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[0].timescale?a?a.p(c,d):(a=os(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[0].timescale_year?r?r.p(c,d):(r=rs(c),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),c[0].year_published?f?f.p(c,d):(f=is(c),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null),c[0].year_consulted?u?u.p(c,d):(u=fs(c),u.c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null)},i:W,o:W,d(c){c&&(p(e),p(l),p(t),p(n),p(s)),i&&i.d(c),a&&a.d(c),r&&r.d(c),f&&f.d(c),u&&u.d(c)}}}function Sm(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class vo extends X{constructor(e){super(),x(this,e,Sm,ym,J,{props:0})}}function as(o){let e,l,t,n=o[0].budget.toLocaleString()+"",s,i;return{c(){e=C("p"),l=C("b"),l.textContent="Cost",t=v(`
    : `),s=v(n),i=v(`
    GBP`)},m(a,r){$(a,e,r),k(e,l),k(e,t),k(e,s),k(e,i)},p(a,r){r&1&&n!==(n=a[0].budget.toLocaleString()+"")&&H(s,n)},d(a){a&&p(e)}}}function us(o){let e;return{c(){e=C("p"),e.textContent="Development is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function cs(o){let e;return{c(){e=C("p"),e.textContent="Construction is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $s(o){let e,l,t,n;return{c(){e=C("p"),l=C("b"),l.textContent="Funding sources",t=v(`
    : `),n=v(o[1])},m(s,i){$(s,e,i),k(e,l),k(e,t),k(e,n)},p(s,i){i&2&&H(n,s[1])},d(s){s&&p(e)}}}function Cm(o){let e,l,t,n,s=o[0].budget&&as(o),i=o[0].development_funded&&us(),a=o[0].construction_funded&&cs(),r=o[1]&&$s(o);return{c(){s&&s.c(),e=L(),i&&i.c(),l=L(),a&&a.c(),t=L(),r&&r.c(),n=$e()},m(f,u){s&&s.m(f,u),$(f,e,u),i&&i.m(f,u),$(f,l,u),a&&a.m(f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u)},p(f,[u]){f[0].budget?s?s.p(f,u):(s=as(f),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),f[0].development_funded?i||(i=us(),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),f[0].construction_funded?a||(a=cs(),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),f[1]?r?r.p(f,u):(r=$s(f),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:W,o:W,d(f){f&&(p(e),p(l),p(t),p(n)),s&&s.d(f),i&&i.d(f),a&&a.d(f),r&&r.d(f)}}}function Tm(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function Lm(o,e,l){let t,{props:n}=e;return o.$$set=s=>{"props"in s&&l(0,n=s.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=Tm(n))},[n,t]}class yo extends X{constructor(e){super(),x(this,e,Lm,Cm,J,{props:0})}}function cn(o){const e=o.slice(),l=e[5].pipeline;return e[12]=l,e}function $n(o){const e=o.slice(),l=e[1].pipeline;return e[12]=l,e}function ps(o){let e,l,t,n=Un(o[1].length_meters)+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Length",t=v(`
        : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&2&&n!==(n=Un(i[1].length_meters)+"")&&H(s,n)},d(i){i&&p(e)}}}function ms(o){let e,l=ft(o[1].description,o[3])+"";return{c(){e=C("p")},m(t,n){$(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=ft(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&p(e)}}}function _s(o){let e,l,t,n,s,i,a,r=o[12].atf4_type&&gs(o),f=o[12].accuracy&&ds(o),u=o[12].is_alternative&&hs();return n=new yo({props:{props:o[12]}}),i=new vo({props:{props:o[12]}}),{c(){r&&r.c(),e=L(),f&&f.c(),l=L(),u&&u.c(),t=L(),h(n.$$.fragment),s=L(),h(i.$$.fragment)},m(c,d){r&&r.m(c,d),$(c,e,d),f&&f.m(c,d),$(c,l,d),u&&u.m(c,d),$(c,t,d),b(n,c,d),$(c,s,d),b(i,c,d),a=!0},p(c,d){c[12].atf4_type?r?r.p(c,d):(r=gs(c),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),c[12].accuracy?f?f.p(c,d):(f=ds(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[12].is_alternative?u||(u=hs(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const g={};d&2&&(g.props=c[12]),n.$set(g);const y={};d&2&&(y.props=c[12]),i.$set(y)},i(c){a||(m(n.$$.fragment,c),m(i.$$.fragment,c),a=!0)},o(c){_(n.$$.fragment,c),_(i.$$.fragment,c),a=!1},d(c){c&&(p(e),p(l),p(t),p(s)),r&&r.d(c),f&&f.d(c),u&&u.d(c),w(n,c),w(i,c)}}}function gs(o){let e,l,t,n=o[12].atf4_type+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="ATF4 type",t=v(`
          : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&2&&n!==(n=i[12].atf4_type+"")&&H(s,n)},d(i){i&&p(e)}}}function ds(o){let e,l,t,n=o[12].accuracy+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Accuracy",t=v(`
          : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&2&&n!==(n=i[12].accuracy+"")&&H(s,n)},d(i){i&&p(e)}}}function hs(o){let e;return{c(){e=C("p"),e.textContent="Represents an alternative route"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function bs(o){var i;let e,l,t,n=((i=o[5].browse)==null?void 0:i.capital_scheme_id)+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Capital scheme ID",t=v(`
        : `),s=v(n)},m(a,r){$(a,e,r),k(e,l),k(e,t),k(e,s)},p(a,r){var f;r&32&&n!==(n=((f=a[5].browse)==null?void 0:f.capital_scheme_id)+"")&&H(s,n)},d(a){a&&p(e)}}}function ws(o){var i;let e,l,t,n=((i=o[5].browse)==null?void 0:i.current_milestone)+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Current milestone",t=v(`
        : `),s=v(n)},m(a,r){$(a,e,r),k(e,l),k(e,t),k(e,s)},p(a,r){var f;r&32&&n!==(n=((f=a[5].browse)==null?void 0:f.current_milestone)+"")&&H(s,n)},d(a){a&&p(e)}}}function ks(o){let e,l,t,n,s,i,a,r=o[12].scheme_type&&vs(o),f=o[12].atf4_lead_type&&ys(o),u=o[12].scheme_description&&Ss(o);return n=new yo({props:{props:o[12]}}),i=new vo({props:{props:o[12]}}),{c(){r&&r.c(),e=L(),f&&f.c(),l=L(),u&&u.c(),t=L(),h(n.$$.fragment),s=L(),h(i.$$.fragment)},m(c,d){r&&r.m(c,d),$(c,e,d),f&&f.m(c,d),$(c,l,d),u&&u.m(c,d),$(c,t,d),b(n,c,d),$(c,s,d),b(i,c,d),a=!0},p(c,d){c[12].scheme_type?r?r.p(c,d):(r=vs(c),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),c[12].atf4_lead_type?f?f.p(c,d):(f=ys(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[12].scheme_description?u?u.p(c,d):(u=Ss(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const g={};d&32&&(g.props=c[12]),n.$set(g);const y={};d&32&&(y.props=c[12]),i.$set(y)},i(c){a||(m(n.$$.fragment,c),m(i.$$.fragment,c),a=!0)},o(c){_(n.$$.fragment,c),_(i.$$.fragment,c),a=!1},d(c){c&&(p(e),p(l),p(t),p(s)),r&&r.d(c),f&&f.d(c),u&&u.d(c),w(n,c),w(i,c)}}}function vs(o){let e,l,t,n=o[12].scheme_type+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Scheme type",t=v(`
          : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&32&&n!==(n=i[12].scheme_type+"")&&H(s,n)},d(i){i&&p(e)}}}function ys(o){let e,l,t,n=o[12].atf4_lead_type+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="ATF4 lead type",t=v(`
          : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&32&&n!==(n=i[12].atf4_lead_type+"")&&H(s,n)},d(i){i&&p(e)}}}function Ss(o){let e,l,t,n=o[12].scheme_description+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Descripton",t=v(`
          : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&32&&n!==(n=i[12].scheme_description+"")&&H(s,n)},d(i){i&&p(e)}}}function Im(o){let e;return{c(){e=v("Zoom to show entire scheme")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Mm(o){let e;return{c(){e=v("Edit a copy of this scheme")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Cs(o){var On,jn,Pn,Dn;let e,l,t,n,s,i,a,r=ft(o[1].name,o[3])+"",f,u=o[1].intervention_type+"",c,d,g,y,T,S,j,R,P,D=o[0].toUpperCase()+"",N,O,M,I,A,Y,V,q=ft(o[5].scheme_name??"",o[2])+"",Q,ne,U,Ie,Re,Z=ft(o[1].scheme_reference,o[2])+"",ut,Me,ct,Xt,Et=((On=o[5].browse)==null?void 0:On.authority_or_region)+"",ve,ze,et,ot,Bt,Yt,xt=((jn=o[5].browse)==null?void 0:jn.funding_programme)+"",fn,Mn,an,un,rt,Nn,it,He,Ne=o[1].length_meters&&ps(o),Oe=o[1].description&&ms(o),Se=o[1].pipeline&&_s($n(o)),je=((Pn=o[5].browse)==null?void 0:Pn.capital_scheme_id)&&bs(o),Pe=((Dn=o[5].browse)==null?void 0:Dn.current_milestone)&&ws(o),Ce=o[5].pipeline&&ks(cn(o));return rt=new st({props:{$$slots:{default:[Im]},$$scope:{ctx:o}}}),rt.$on("click",o[6]),it=new st({props:{$$slots:{default:[Mm]},$$scope:{ctx:o}}}),it.$on("click",o[7]),{c(){e=C("div"),l=C("h2"),l.textContent="Intervention",t=L(),n=C("p"),s=C("b"),s.textContent="Name",i=v(`
      : `),a=new Pt(!1),f=v(" ("),c=v(u),d=v(")"),g=L(),Ne&&Ne.c(),y=L(),Oe&&Oe.c(),T=L(),Se&&Se.c(),S=L(),j=C("hr"),R=L(),P=C("h2"),N=v(D),O=v(" Scheme"),M=L(),I=C("p"),A=C("b"),A.textContent="Scheme name",Y=v(`
      : `),V=new Pt(!1),Q=L(),ne=C("p"),U=C("b"),U.textContent="Scheme reference",Ie=v(`
      : `),Re=new Pt(!1),ut=L(),Me=C("p"),ct=C("b"),ct.textContent="Authority or region",Xt=v(`
      : `),ve=v(Et),ze=L(),je&&je.c(),et=L(),ot=C("p"),Bt=C("b"),Bt.textContent="Funding programme",Yt=v(`
      : `),fn=v(xt),Mn=L(),Pe&&Pe.c(),an=L(),Ce&&Ce.c(),un=L(),h(rt.$$.fragment),Nn=L(),h(it.$$.fragment),a.a=f,V.a=null,Re.a=null,_e(e,"max-width","30vw"),_e(e,"max-height","60vh"),_e(e,"overflow","auto")},m(fe,ke){$(fe,e,ke),k(e,l),k(e,t),k(e,n),k(n,s),k(n,i),a.m(r,n),k(n,f),k(n,c),k(n,d),k(e,g),Ne&&Ne.m(e,null),k(e,y),Oe&&Oe.m(e,null),k(e,T),Se&&Se.m(e,null),k(e,S),k(e,j),k(e,R),k(e,P),k(P,N),k(P,O),k(e,M),k(e,I),k(I,A),k(I,Y),V.m(q,I),k(e,Q),k(e,ne),k(ne,U),k(ne,Ie),Re.m(Z,ne),k(e,ut),k(e,Me),k(Me,ct),k(Me,Xt),k(Me,ve),k(e,ze),je&&je.m(e,null),k(e,et),k(e,ot),k(ot,Bt),k(ot,Yt),k(ot,fn),k(e,Mn),Pe&&Pe.m(e,null),k(e,an),Ce&&Ce.m(e,null),k(e,un),b(rt,e,null),k(e,Nn),b(it,e,null),o[10](e),He=!0},p(fe,ke){var qn,Fn,Gn,zn;(!He||ke&10)&&r!==(r=ft(fe[1].name,fe[3])+"")&&a.p(r),(!He||ke&2)&&u!==(u=fe[1].intervention_type+"")&&H(c,u),fe[1].length_meters?Ne?Ne.p(fe,ke):(Ne=ps(fe),Ne.c(),Ne.m(e,y)):Ne&&(Ne.d(1),Ne=null),fe[1].description?Oe?Oe.p(fe,ke):(Oe=ms(fe),Oe.c(),Oe.m(e,T)):Oe&&(Oe.d(1),Oe=null),fe[1].pipeline?Se?(Se.p($n(fe),ke),ke&2&&m(Se,1)):(Se=_s($n(fe)),Se.c(),m(Se,1),Se.m(e,S)):Se&&(ue(),_(Se,1,1,()=>{Se=null}),ce()),(!He||ke&1)&&D!==(D=fe[0].toUpperCase()+"")&&H(N,D),(!He||ke&36)&&q!==(q=ft(fe[5].scheme_name??"",fe[2])+"")&&V.p(q),(!He||ke&6)&&Z!==(Z=ft(fe[1].scheme_reference,fe[2])+"")&&Re.p(Z),(!He||ke&32)&&Et!==(Et=((qn=fe[5].browse)==null?void 0:qn.authority_or_region)+"")&&H(ve,Et),(Fn=fe[5].browse)!=null&&Fn.capital_scheme_id?je?je.p(fe,ke):(je=bs(fe),je.c(),je.m(e,et)):je&&(je.d(1),je=null),(!He||ke&32)&&xt!==(xt=((Gn=fe[5].browse)==null?void 0:Gn.funding_programme)+"")&&H(fn,xt),(zn=fe[5].browse)!=null&&zn.current_milestone?Pe?Pe.p(fe,ke):(Pe=ws(fe),Pe.c(),Pe.m(e,an)):Pe&&(Pe.d(1),Pe=null),fe[5].pipeline?Ce?(Ce.p(cn(fe),ke),ke&32&&m(Ce,1)):(Ce=ks(cn(fe)),Ce.c(),m(Ce,1),Ce.m(e,un)):Ce&&(ue(),_(Ce,1,1,()=>{Ce=null}),ce());const Rn={};ke&8192&&(Rn.$$scope={dirty:ke,ctx:fe}),rt.$set(Rn);const An={};ke&8192&&(An.$$scope={dirty:ke,ctx:fe}),it.$set(An)},i(fe){He||(m(Se),m(Ce),m(rt.$$.fragment,fe),m(it.$$.fragment,fe),He=!0)},o(fe){_(Se),_(Ce),_(rt.$$.fragment,fe),_(it.$$.fragment,fe),He=!1},d(fe){fe&&p(e),Ne&&Ne.d(),Oe&&Oe.d(),Se&&Se.d(),je&&je.d(),Pe&&Pe.d(),Ce&&Ce.d(),w(rt),w(it),o[10](null)}}}function Nm(o){let e=o[1],l,t,n=Cs(o);return{c(){n.c(),l=$e()},m(s,i){n.m(s,i),$(s,l,i),t=!0},p(s,[i]){i&2&&J(e,e=s[1])?(ue(),_(n,1,1,W),ce(),n=Cs(s),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(s,i)},i(s){t||(m(n),t=!0)},o(s){_(n),t=!1},d(s){s&&p(l),n.d(s)}}}function ft(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function Om(o,e,l){let t,n;K(o,Sn,T=>l(11,n=T));let{source:s}=e,{props:i}=e,{schemes:a}=e,{schemesGj:r}=e,{filterSchemeText:f}=e,{filterInterventionText:u}=e,c;Oo(()=>{c&&l(4,c.scrollTop=0,c)});function d(){let T={type:"FeatureCollection",features:r.features.filter(S=>S.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(Bo(T),{padding:20,animate:!1})}function g(){var R,P;let T={type:"FeatureCollection",features:r.features.filter(D=>D.properties.scheme_reference==t.scheme_reference),schemes:{}};T.schemes[t.scheme_reference]=t;let S=((R=t.browse)==null?void 0:R.authority_or_region)||"unknown authority",j=t.pipeline?"pipeline":"v1";j=="pipeline"&&(S+="_pipeline"),jo(S,JSON.stringify(T)),window.open(`scheme.html?authority=${(P=t.browse)==null?void 0:P.authority_or_region}&schema=${j}`,"_blank")}function y(T){F[T?"unshift":"push"](()=>{c=T,l(4,c)})}return o.$$set=T=>{"source"in T&&l(0,s=T.source),"props"in T&&l(1,i=T.props),"schemes"in T&&l(8,a=T.schemes),"schemesGj"in T&&l(9,r=T.schemesGj),"filterSchemeText"in T&&l(2,f=T.filterSchemeText),"filterInterventionText"in T&&l(3,u=T.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=a.get(i.scheme_reference))},[s,i,f,u,c,t,d,g,a,r,y]}class In extends X{constructor(e){super(),x(this,e,Om,Nm,J,{source:0,props:1,schemes:8,schemesGj:9,filterSchemeText:2,filterInterventionText:3})}}function jm(o){let e,l=o[10].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&H(t,l)},d(n){n&&p(e)}}}function Pm(o){let e,l;return e=new In({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.source=t[0]),n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Dm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[jm,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Pm,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(s,i){b(e,s,i),$(s,l,i),b(t,s,i),n=!0},p(s,i){const a={};i&3072&&(a.$$scope={dirty:i,ctx:s}),e.$set(a);const r={};i&3133&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){n||(m(e.$$.fragment,s),m(t.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function Rm(o){let e,l=o[10].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&H(t,l)},d(n){n&&p(e)}}}function Am(o){let e,l;return e=new In({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.source=t[0]),n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function qm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Rm,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Am,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(s,i){b(e,s,i),$(s,l,i),b(t,s,i),n=!0},p(s,i){const a={};i&3072&&(a.$$scope={dirty:i,ctx:s}),e.$set(a);const r={};i&3133&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){n||(m(e.$$.fragment,s),m(t.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function Fm(o){let e,l=o[10].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&H(t,l)},d(n){n&&p(e)}}}function Gm(o){let e,l;return e=new In({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.source=t[0]),n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function zm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Fm,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Gm,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(s,i){b(e,s,i),$(s,l,i),b(t,s,i),n=!0},p(s,i){const a={};i&3072&&(a.$$scope={dirty:i,ctx:s}),e.$set(a);const r={};i&3133&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){n||(m(e.$$.fragment,s),m(t.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function Hm(o){let e,l,t,n,s,i,a,r,f,u;const c=[E(`${o[0]}-interventions-points`),{filter:["all",Wn,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":Yn,"circle-opacity":le(1,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let d={$$slots:{default:[Dm]},$$scope:{ctx:o}};for(let N=0;N<c.length;N+=1)d=se(d,c[N]);e=new Gt({props:d});const g=[E(`${o[0]}-interventions-lines`),{filter:["all",Jn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":Jt,"line-opacity":le(1,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[qm]},$$scope:{ctx:o}};for(let N=0;N<g.length;N+=1)y=se(y,g[N]);t=new be({props:y});const T=[E(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Jt,"circle-opacity":0,"circle-stroke-color":Qe.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[1]?"visible":"none"}}];let S={};for(let N=0;N<T.length;N+=1)S=se(S,T[N]);s=new Gt({props:S});const j=[E(`${o[0]}-interventions-polygons`),{filter:["all",en,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":le(.2,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let R={$$slots:{default:[zm]},$$scope:{ctx:o}};for(let N=0;N<j.length;N+=1)R=se(R,j[N]);a=new qe({props:R});const P=[E(`${o[0]}-interventions-polygons-outlines`),{filter:["all",en,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*Jt}},{layout:{visibility:o[1]?"visible":"none"}}];let D={};for(let N=0;N<P.length;N+=1)D=se(D,P[N]);return f=new be({props:D}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),n=L(),h(s.$$.fragment),i=L(),h(a.$$.fragment),r=L(),h(f.$$.fragment)},m(N,O){b(e,N,O),$(N,l,O),b(t,N,O),$(N,n,O),b(s,N,O),$(N,i,O),b(a,N,O),$(N,r,O),b(f,N,O),u=!0},p(N,O){const M=O&835?oe(c,[O&1&&re(E(`${N[0]}-interventions-points`)),O&768&&{filter:["all",Wn,N[8],N[9]]},c[2],c[3],O&64&&{paint:{"circle-color":N[6],"circle-radius":Yn,"circle-opacity":le(1,.5)}},O&2&&{layout:{visibility:N[1]?"visible":"none"}},c[6]]):{};O&2109&&(M.$$scope={dirty:O,ctx:N}),e.$set(M);const I=O&323?oe(g,[O&1&&re(E(`${N[0]}-interventions-lines`)),O&256&&{filter:["all",Jn,N[8]]},g[2],g[3],O&64&&{paint:{"line-color":N[6],"line-width":Jt,"line-opacity":le(1,.5)}},O&2&&{layout:{visibility:N[1]?"visible":"none"}},g[6]]):{};O&2109&&(I.$$scope={dirty:O,ctx:N}),t.$set(I);const A=O&3?oe(T,[O&1&&re(E(`${N[0]}-interventions-lines-endpoints`)),T[1],T[2],O&2&&{layout:{visibility:N[1]?"visible":"none"}}]):{};s.$set(A);const Y=O&323?oe(j,[O&1&&re(E(`${N[0]}-interventions-polygons`)),O&256&&{filter:["all",en,N[8]]},j[2],j[3],O&64&&{paint:{"fill-color":N[6],"fill-opacity":le(.2,.5)}},O&2&&{layout:{visibility:N[1]?"visible":"none"}},j[6]]):{};O&2109&&(Y.$$scope={dirty:O,ctx:N}),a.$set(Y);const V=O&323?oe(P,[O&1&&re(E(`${N[0]}-interventions-polygons-outlines`)),O&256&&{filter:["all",en,N[8]]},O&64&&{paint:{"line-color":N[6],"line-opacity":.5,"line-width":.7*Jt}},O&2&&{layout:{visibility:N[1]?"visible":"none"}}]):{};f.$set(V)},i(N){u||(m(e.$$.fragment,N),m(t.$$.fragment,N),m(s.$$.fragment,N),m(a.$$.fragment,N),m(f.$$.fragment,N),u=!0)},o(N){_(e.$$.fragment,N),_(t.$$.fragment,N),_(s.$$.fragment,N),_(a.$$.fragment,N),_(f.$$.fragment,N),u=!1},d(N){N&&(p(l),p(n),p(i),p(r)),w(e,N),w(t,N),w(s,N),w(a,N),w(f,N)}}}function Em(o){let e,l;return e=new zt({props:{data:o[7],$$slots:{default:[Hm]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&128&&(s.data=t[7]),n&2175&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Bm(o,e,l){let t,{source:n}=e,{show:s}=e,{schemes:i}=e,{schemesGj:a}=e,{filterSchemeText:r}=e,{filterInterventionText:f}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],d=["!=",["get","endpoint"],!0];return o.$$set=g=>{"source"in g&&l(0,n=g.source),"show"in g&&l(1,s=g.show),"schemes"in g&&l(2,i=g.schemes),"schemesGj"in g&&l(3,a=g.schemesGj),"filterSchemeText"in g&&l(4,r=g.filterSchemeText),"filterInterventionText"in g&&l(5,f=g.filterInterventionText),"color"in g&&l(6,u=g.color)},o.$$.update=()=>{o.$$.dirty&8&&l(7,t=Uo(a))},[n,s,i,a,r,f,u,t,c,d]}class Ts extends X{constructor(e){super(),x(this,e,Bm,Em,J,{source:0,show:1,schemes:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function Um(o){return Ke(["get","intervention_type"],{area:Qe.area,route:Qe.route,crossing:Qe.crossing,other:Qe.other},"white")}function Wm(o){return[["Areas",Qe.area],["Routes",Qe.route],["Crossings",Qe.crossing],["Other",Qe.other]]}function Ls(o,e,l){const t=o.slice();return t[31]=e[l],t}function Is(o,e,l){const t=o.slice();return t[31]=e[l],t}function Ym(o){let e,l;return e=new sm({props:{loadFile:o[17]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ms(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y;function T(I){o[18](I)}let S={$$slots:{right:[Qm],default:[Jm]},$$scope:{ctx:o}};o[3]!==void 0&&(S.checked=o[3]),e=new ie({props:S}),F.push(()=>G(e,"checked",T));function j(I){o[19](I)}function R(I){o[20](I)}function P(I){o[21](I)}function D(I){o[22](I)}let N={source:"ATF"};o[10]!==void 0&&(N.schemesGj=o[10]),o[9]!==void 0&&(N.schemes=o[9]),o[11]!==void 0&&(N.filterSchemeText=o[11]),o[12]!==void 0&&(N.filterInterventionText=o[12]),n=new ko({props:N}),F.push(()=>G(n,"schemesGj",j)),F.push(()=>G(n,"schemes",R)),F.push(()=>G(n,"filterSchemeText",P)),F.push(()=>G(n,"filterInterventionText",D));function O(I){o[23](I)}let M={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(M.value=o[0]),u=new Ft({props:M}),F.push(()=>G(u,"value",O)),g=new Kt({props:{rows:o[7]}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment),f=L(),h(u.$$.fragment),d=L(),h(g.$$.fragment)},m(I,A){b(e,I,A),$(I,t,A),b(n,I,A),$(I,f,A),b(u,I,A),$(I,d,A),b(g,I,A),y=!0},p(I,A){const Y={};A[0]&1024|A[1]&32&&(Y.$$scope={dirty:A,ctx:I}),!l&&A[0]&8&&(l=!0,Y.checked=I[3],z(()=>l=!1)),e.$set(Y);const V={};!s&&A[0]&1024&&(s=!0,V.schemesGj=I[10],z(()=>s=!1)),!i&&A[0]&512&&(i=!0,V.schemes=I[9],z(()=>i=!1)),!a&&A[0]&2048&&(a=!0,V.filterSchemeText=I[11],z(()=>a=!1)),!r&&A[0]&4096&&(r=!0,V.filterInterventionText=I[12],z(()=>r=!1)),n.$set(V);const q={};!c&&A[0]&1&&(c=!0,q.value=I[0],z(()=>c=!1)),u.$set(q);const Q={};A[0]&128&&(Q.rows=I[7]),g.$set(Q)},i(I){y||(m(e.$$.fragment,I),m(n.$$.fragment,I),m(u.$$.fragment,I),m(g.$$.fragment,I),y=!0)},o(I){_(e.$$.fragment,I),_(n.$$.fragment,I),_(u.$$.fragment,I),_(g.$$.fragment,I),y=!1},d(I){I&&(p(t),p(f),p(d)),w(e,I),w(n,I),w(u,I),w(g,I)}}}function Jm(o){let e;return{c(){e=v("ATF schemes")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ns(o){let e,l,t=o[31]+"",n;return{c(){e=C("li"),l=C("p"),n=v(t)},m(s,i){$(s,e,i),k(e,l),k(l,n)},p(s,i){i[0]&1024&&t!==(t=s[31]+"")&&H(n,t)},d(s){s&&p(e)}}}function Vm(o){let e,l,t,n,s,i;l=new Bs({props:{text:"Scheme data caveats"}});let a=ye(o[10].notes??[]),r=[];for(let f=0;f<a.length;f+=1)r[f]=Ns(Is(o,a,f));return{c(){e=C("p"),h(l.$$.fragment),t=v(`Please note there are data
            quality caveats for all scheme data:`),n=L(),s=C("ul");for(let f=0;f<r.length;f+=1)r[f].c()},m(f,u){$(f,e,u),b(l,e,null),k(e,t),$(f,n,u),$(f,s,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(s,null);i=!0},p(f,u){if(u[0]&1024){a=ye(f[10].notes??[]);let c;for(c=0;c<a.length;c+=1){const d=Is(f,a,c);r[c]?r[c].p(d,u):(r[c]=Ns(d),r[c].c(),r[c].m(s,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=a.length}},i(f){i||(m(l.$$.fragment,f),i=!0)},o(f){_(l.$$.fragment,f),i=!1},d(f){f&&(p(e),p(n),p(s)),w(l),Ze(r,f)}}}function Qm(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Vm]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s[0]&1024|s[1]&32&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Os(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y;function T(I){o[24](I)}let S={$$slots:{right:[Xm],default:[Zm]},$$scope:{ctx:o}};o[4]!==void 0&&(S.checked=o[4]),e=new ie({props:S}),F.push(()=>G(e,"checked",T));function j(I){o[25](I)}function R(I){o[26](I)}function P(I){o[27](I)}function D(I){o[28](I)}let N={source:"LCWIP"};o[14]!==void 0&&(N.schemesGj=o[14]),o[13]!==void 0&&(N.schemes=o[13]),o[15]!==void 0&&(N.filterSchemeText=o[15]),o[16]!==void 0&&(N.filterInterventionText=o[16]),n=new ko({props:N}),F.push(()=>G(n,"schemesGj",j)),F.push(()=>G(n,"schemes",R)),F.push(()=>G(n,"filterSchemeText",P)),F.push(()=>G(n,"filterInterventionText",D));function O(I){o[29](I)}let M={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(M.value=o[1]),u=new Ft({props:M}),F.push(()=>G(u,"value",O)),g=new Kt({props:{rows:o[5]}}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment),f=L(),h(u.$$.fragment),d=L(),h(g.$$.fragment)},m(I,A){b(e,I,A),$(I,t,A),b(n,I,A),$(I,f,A),b(u,I,A),$(I,d,A),b(g,I,A),y=!0},p(I,A){const Y={};A[0]&16384|A[1]&32&&(Y.$$scope={dirty:A,ctx:I}),!l&&A[0]&16&&(l=!0,Y.checked=I[4],z(()=>l=!1)),e.$set(Y);const V={};!s&&A[0]&16384&&(s=!0,V.schemesGj=I[14],z(()=>s=!1)),!i&&A[0]&8192&&(i=!0,V.schemes=I[13],z(()=>i=!1)),!a&&A[0]&32768&&(a=!0,V.filterSchemeText=I[15],z(()=>a=!1)),!r&&A[0]&65536&&(r=!0,V.filterInterventionText=I[16],z(()=>r=!1)),n.$set(V);const q={};!c&&A[0]&2&&(c=!0,q.value=I[1],z(()=>c=!1)),u.$set(q);const Q={};A[0]&32&&(Q.rows=I[5]),g.$set(Q)},i(I){y||(m(e.$$.fragment,I),m(n.$$.fragment,I),m(u.$$.fragment,I),m(g.$$.fragment,I),y=!0)},o(I){_(e.$$.fragment,I),_(n.$$.fragment,I),_(u.$$.fragment,I),_(g.$$.fragment,I),y=!1},d(I){I&&(p(t),p(f),p(d)),w(e,I),w(n,I),w(u,I),w(g,I)}}}function Zm(o){let e;return{c(){e=v("LCWIP schemes")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function js(o){let e,l,t=o[31]+"",n;return{c(){e=C("li"),l=C("p"),n=v(t)},m(s,i){$(s,e,i),k(e,l),k(l,n)},p(s,i){i[0]&16384&&t!==(t=s[31]+"")&&H(n,t)},d(s){s&&p(e)}}}function Km(o){let e,l,t,n,s,i;l=new Bs({props:{text:"Scheme data caveats"}});let a=ye(o[14].notes??[]),r=[];for(let f=0;f<a.length;f+=1)r[f]=js(Ls(o,a,f));return{c(){e=C("p"),h(l.$$.fragment),t=v(`Please note there are data
            quality caveats for all scheme data:`),n=L(),s=C("ul");for(let f=0;f<r.length;f+=1)r[f].c()},m(f,u){$(f,e,u),b(l,e,null),k(e,t),$(f,n,u),$(f,s,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(s,null);i=!0},p(f,u){if(u[0]&16384){a=ye(f[14].notes??[]);let c;for(c=0;c<a.length;c+=1){const d=Ls(f,a,c);r[c]?r[c].p(d,u):(r[c]=js(d),r[c].c(),r[c].m(s,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=a.length}},i(f){i||(m(l.$$.fragment,f),i=!0)},o(f){_(l.$$.fragment,f),i=!1},d(f){f&&(p(e),p(n),p(s)),w(l),Ze(r,f)}}}function Xm(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Km]},$$scope:{ctx:o}}}),{c(){e=C("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s[0]&16384|s[1]&32&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function xm(o){let e=Cn()=="Private (development)",l,t,n,s,i,a,r,f=e&&Ym(o),u=o[9].size>0&&Ms(o),c=o[13].size>0&&Os(o);return s=new Po({props:{label:"Load schemes from GeoJSON",onLoad:o[17]}}),a=new Do({props:{errorMessage:o[2]}}),{c(){f&&f.c(),l=L(),u&&u.c(),t=L(),c&&c.c(),n=L(),h(s.$$.fragment),i=L(),h(a.$$.fragment)},m(d,g){f&&f.m(d,g),$(d,l,g),u&&u.m(d,g),$(d,t,g),c&&c.m(d,g),$(d,n,g),b(s,d,g),$(d,i,g),b(a,d,g),r=!0},p(d,g){e&&f.p(d,g),d[9].size>0?u?(u.p(d,g),g[0]&512&&m(u,1)):(u=Ms(d),u.c(),m(u,1),u.m(t.parentNode,t)):u&&(ue(),_(u,1,1,()=>{u=null}),ce()),d[13].size>0?c?(c.p(d,g),g[0]&8192&&m(c,1)):(c=Os(d),c.c(),m(c,1),c.m(n.parentNode,n)):c&&(ue(),_(c,1,1,()=>{c=null}),ce());const y={};g[0]&4&&(y.errorMessage=d[2]),a.$set(y)},i(d){r||(m(f),m(u),m(c),m(s.$$.fragment,d),m(a.$$.fragment,d),r=!0)},o(d){_(f),_(u),_(c),_(s.$$.fragment,d),_(a.$$.fragment,d),r=!1},d(d){d&&(p(l),p(t),p(n),p(i)),f&&f.d(d),u&&u.d(d),c&&c.d(d),w(s,d),w(a,d)}}}function e_(o){let e,l,t,n,s,i;return e=new tt({props:{label:"Schemes",open:!0,$$slots:{default:[xm]},$$scope:{ctx:o}}}),t=new Ts({props:{source:"atf",show:o[3],schemesGj:o[10],schemes:o[9],filterSchemeText:o[11],filterInterventionText:o[12],color:o[8]}}),s=new Ts({props:{source:"lcwip",show:o[4],schemesGj:o[14],schemes:o[13],filterSchemeText:o[15],filterInterventionText:o[16],color:o[6]}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),n=L(),h(s.$$.fragment)},m(a,r){b(e,a,r),$(a,l,r),b(t,a,r),$(a,n,r),b(s,a,r),i=!0},p(a,r){const f={};r[0]&130751|r[1]&32&&(f.$$scope={dirty:r,ctx:a}),e.$set(f);const u={};r[0]&8&&(u.show=a[3]),r[0]&1024&&(u.schemesGj=a[10]),r[0]&512&&(u.schemes=a[9]),r[0]&2048&&(u.filterSchemeText=a[11]),r[0]&4096&&(u.filterInterventionText=a[12]),r[0]&256&&(u.color=a[8]),t.$set(u);const c={};r[0]&16&&(c.show=a[4]),r[0]&16384&&(c.schemesGj=a[14]),r[0]&8192&&(c.schemes=a[13]),r[0]&32768&&(c.filterSchemeText=a[15]),r[0]&65536&&(c.filterInterventionText=a[16]),r[0]&64&&(c.color=a[6]),s.$set(c)},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(s.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(s.$$.fragment,a),i=!1},d(a){a&&(p(l),p(n)),w(e,a),w(t,a),w(s,a)}}}function t_(o,e,l){let t,n,s,i,a,r,f,u,c,d,g,y;K(o,dn,Z=>l(9,a=Z)),K(o,on,Z=>l(10,r=Z)),K(o,Xl,Z=>l(11,f=Z)),K(o,Kl,Z=>l(12,u=Z)),K(o,bn,Z=>l(13,c=Z)),K(o,hn,Z=>l(14,d=Z)),K(o,es,Z=>l(15,g=Z)),K(o,xl,Z=>l(16,y=Z));let T="",S=!0,j=!0,R="fundingProgramme",P="interventionType";function D(Z,ut){try{om(JSON.parse(ut)),l(2,T="")}catch(Me){l(2,T=`The file you loaded is broken: ${Me}`)}}function N(Z){return Z=="interventionType"?[Um(),Wm()]:Z=="fundingProgramme"?[Ke(["get","funding_programme"],Wt,"grey"),Object.entries(Wt)]:Z=="currentMilestone"?[Ke(["get","current_milestone"],wn,"grey"),Object.entries(wn)]:["red",[]]}function O(Z){S=Z,l(3,S)}function M(Z){r=Z,on.set(r)}function I(Z){a=Z,dn.set(a)}function A(Z){f=Z,Xl.set(f)}function Y(Z){u=Z,Kl.set(u)}function V(Z){R=Z,l(0,R)}function q(Z){j=Z,l(4,j)}function Q(Z){d=Z,hn.set(d)}function ne(Z){c=Z,bn.set(c)}function U(Z){g=Z,es.set(g)}function Ie(Z){y=Z,xl.set(y)}function Re(Z){P=Z,l(1,P)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(8,[t,n]=N(R),t,(l(7,n),l(0,R))),o.$$.dirty[0]&2&&l(6,[s,i]=N(P),s,(l(5,i),l(1,P)))},[R,P,T,S,j,i,s,n,t,a,r,f,u,c,d,g,y,D,O,M,I,A,Y,V,q,Q,ne,U,Ie,Re]}class n_ extends X{constructor(e){super(),x(this,e,t_,e_,J,{},null,[-1,-1])}}const Ps=De(!0);let kn=De(null);function l_(o){let e,l,t,n,s,i,a,r;return e=new T$({}),t=new q$({}),s=new ip({}),a=new Q$({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),n=L(),h(s.$$.fragment),i=L(),h(a.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),$(f,n,u),b(s,f,u),$(f,i,u),b(a,f,u),r=!0},i(f){r||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(s.$$.fragment,f),m(a.$$.fragment,f),r=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(s.$$.fragment,f),_(a.$$.fragment,f),r=!1},d(f){f&&(p(l),p(n),p(i)),w(e,f),w(t,f),w(s,f),w(a,f)}}}function s_(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[l_]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function o_(o){let e,l,t,n,s,i,a,r,f,u,c,d;return e=new Ma({}),t=new fu({}),s=new za({}),a=new Ka({}),f=new c$({}),c=new Ec({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),n=L(),h(s.$$.fragment),i=L(),h(a.$$.fragment),r=L(),h(f.$$.fragment),u=L(),h(c.$$.fragment)},m(g,y){b(e,g,y),$(g,l,y),b(t,g,y),$(g,n,y),b(s,g,y),$(g,i,y),b(a,g,y),$(g,r,y),b(f,g,y),$(g,u,y),b(c,g,y),d=!0},i(g){d||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(s.$$.fragment,g),m(a.$$.fragment,g),m(f.$$.fragment,g),m(c.$$.fragment,g),d=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(s.$$.fragment,g),_(a.$$.fragment,g),_(f.$$.fragment,g),_(c.$$.fragment,g),d=!1},d(g){g&&(p(l),p(n),p(i),p(r),p(u)),w(e,g),w(t,g),w(s,g),w(a,g),w(f,g),w(c,g)}}}function r_(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[o_]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function i_(o){let e,l,t,n,s,i;return e=new ma({}),t=new bc({}),s=new Nc({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),n=L(),h(s.$$.fragment)},m(a,r){b(e,a,r),$(a,l,r),b(t,a,r),$(a,n,r),b(s,a,r),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(s.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(s.$$.fragment,a),i=!1},d(a){a&&(p(l),p(n)),w(e,a),w(t,a),w(s,a)}}}function f_(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[i_]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function a_(o){let e,l,t,n,s,i,a,r,f,u;return e=new bf({}),t=new xf({}),s=new ki({}),a=new Wi({}),f=new rf({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),n=L(),h(s.$$.fragment),i=L(),h(a.$$.fragment),r=L(),h(f.$$.fragment)},m(c,d){b(e,c,d),$(c,l,d),b(t,c,d),$(c,n,d),b(s,c,d),$(c,i,d),b(a,c,d),$(c,r,d),b(f,c,d),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),m(f.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),_(f.$$.fragment,c),u=!1},d(c){c&&(p(l),p(n),p(i),p(r)),w(e,c),w(t,c),w(s,c),w(a,c),w(f,c)}}}function u_(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[a_]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function c_(o){let e,l,t,n;return e=new ai({}),t=new Pi({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(s,i){b(e,s,i),$(s,l,i),b(t,s,i),n=!0},i(s){n||(m(e.$$.fragment,s),m(t.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function $_(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[c_]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function p_(o){let e,l,t,n,s,i,a,r;return e=new uc({}),t=new vu({}),s=new xu({}),a=new Zp({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),n=L(),h(s.$$.fragment),i=L(),h(a.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),$(f,n,u),b(s,f,u),$(f,i,u),b(a,f,u),r=!0},i(f){r||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(s.$$.fragment,f),m(a.$$.fragment,f),r=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(s.$$.fragment,f),_(a.$$.fragment,f),r=!1},d(f){f&&(p(l),p(n),p(i)),w(e,f),w(t,f),w(s,f),w(a,f)}}}function m_(o){let e,l,t,n,s,i,a,r,f=Cn()=="Private (development)",u,c,d,g,y;e=new Gp({}),t=new Tp({}),s=new Gu({}),a=new xc({});let T=f&&p_();return c=new Nf({}),g=new Hf({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),n=L(),h(s.$$.fragment),i=L(),h(a.$$.fragment),r=L(),T&&T.c(),u=L(),h(c.$$.fragment),d=L(),h(g.$$.fragment)},m(S,j){b(e,S,j),$(S,l,j),b(t,S,j),$(S,n,j),b(s,S,j),$(S,i,j),b(a,S,j),$(S,r,j),T&&T.m(S,j),$(S,u,j),b(c,S,j),$(S,d,j),b(g,S,j),y=!0},p:W,i(S){y||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(s.$$.fragment,S),m(a.$$.fragment,S),m(T),m(c.$$.fragment,S),m(g.$$.fragment,S),y=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(s.$$.fragment,S),_(a.$$.fragment,S),_(T),_(c.$$.fragment,S),_(g.$$.fragment,S),y=!1},d(S){S&&(p(l),p(n),p(i),p(r),p(u),p(d)),w(e,S),w(t,S),w(s,S),w(a,S),T&&T.d(S),w(c,S),w(g,S)}}}function __(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[m_]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function g_(o){let e,l,t,n,s;function i(r){o[6](r)}let a={cfg:o[5],map:o[3]};return o[0]!==void 0&&(a.enabled=o[0]),e=new Yo({props:a}),F.push(()=>G(e,"enabled",i)),n=new Lr({}),{c(){h(e.$$.fragment),t=L(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,f){const u={};f&8&&(u.map=r[3]),!l&&f&1&&(l=!0,u.enabled=r[0],z(()=>l=!1)),e.$set(u)},i(r){s||(m(e.$$.fragment,r),m(n.$$.fragment,r),s=!0)},o(r){_(e.$$.fragment,r),_(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}function d_(o){let e,l;const t=[E("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new qe({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&2?oe(t,[t[0],t[1],{layout:{visibility:s[1]?"none":"visible"}}]):{};e.$set(a)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function h_(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y,T,S,j,R,P,D,N;return l=new n_({}),n=new tt({props:{label:"Trip generators",$$slots:{default:[s_]},$$scope:{ctx:o}}}),i=new tt({props:{label:"Existing infrastructure",$$slots:{default:[r_]},$$scope:{ctx:o}}}),r=new tt({props:{label:"Public transport",$$slots:{default:[f_]},$$scope:{ctx:o}}}),u=new tt({props:{label:"Boundaries",$$slots:{default:[u_]},$$scope:{ctx:o}}}),d=new tt({props:{label:"Census",$$slots:{default:[$_]},$$scope:{ctx:o}}}),y=new tt({props:{label:"Other",$$slots:{default:[__]},$$scope:{ctx:o}}}),S=new tt({props:{label:"Tools",$$slots:{default:[g_]},$$scope:{ctx:o}}}),R=new Wo({props:{disabled:!o[1]}}),D=new zt({props:{data:o[4],$$slots:{default:[d_]},$$scope:{ctx:o}}}),{c(){e=C("div"),h(l.$$.fragment),t=L(),h(n.$$.fragment),s=L(),h(i.$$.fragment),a=L(),h(r.$$.fragment),f=L(),h(u.$$.fragment),c=L(),h(d.$$.fragment),g=L(),h(y.$$.fragment),T=L(),h(S.$$.fragment),j=L(),h(R.$$.fragment),P=L(),h(D.$$.fragment)},m(O,M){$(O,e,M),b(l,e,null),k(e,t),b(n,e,null),k(e,s),b(i,e,null),k(e,a),b(r,e,null),k(e,f),b(u,e,null),k(e,c),b(d,e,null),k(e,g),b(y,e,null),k(e,T),b(S,e,null),k(e,j),b(R,e,null),o[7](e),$(O,P,M),b(D,O,M),N=!0},p(O,[M]){const I={};M&256&&(I.$$scope={dirty:M,ctx:O}),n.$set(I);const A={};M&256&&(A.$$scope={dirty:M,ctx:O}),i.$set(A);const Y={};M&256&&(Y.$$scope={dirty:M,ctx:O}),r.$set(Y);const V={};M&256&&(V.$$scope={dirty:M,ctx:O}),u.$set(V);const q={};M&256&&(q.$$scope={dirty:M,ctx:O}),d.$set(q);const Q={};M&256&&(Q.$$scope={dirty:M,ctx:O}),y.$set(Q);const ne={};M&265&&(ne.$$scope={dirty:M,ctx:O}),S.$set(ne);const U={};M&2&&(U.disabled=!O[1]),R.$set(U);const Ie={};M&258&&(Ie.$$scope={dirty:M,ctx:O}),D.$set(Ie)},i(O){N||(m(l.$$.fragment,O),m(n.$$.fragment,O),m(i.$$.fragment,O),m(r.$$.fragment,O),m(u.$$.fragment,O),m(d.$$.fragment,O),m(y.$$.fragment,O),m(S.$$.fragment,O),m(R.$$.fragment,O),m(D.$$.fragment,O),N=!0)},o(O){_(l.$$.fragment,O),_(n.$$.fragment,O),_(i.$$.fragment,O),_(r.$$.fragment,O),_(u.$$.fragment,O),_(d.$$.fragment,O),_(y.$$.fragment,O),_(S.$$.fragment,O),_(R.$$.fragment,O),_(D.$$.fragment,O),N=!1},d(O){O&&(p(e),p(P)),w(l),w(n),w(i),w(r),w(u),w(d),w(y),w(S),w(R),o[7](null),w(D,O)}}}function b_(o,e,l){let t,n,s,i;K(o,Ps,c=>l(1,n=c)),K(o,kn,c=>l(2,s=c)),K(o,Sn,c=>l(3,i=c));let a={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},r={getStreetViewRoadLayerNames:c=>Jo(c,Ro(_n))};function f(c){t=c,l(0,t),l(1,n)}function u(c){F[c?"unshift":"push"](()=>{s=c,kn.set(s)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&Ps.set(!t)},[t,n,s,i,a,r,f,u]}class w_ extends X{constructor(e){super(),x(this,e,b_,h_,J,{})}}function k_(o){let e,l,t;return{c(){e=C("p"),e.textContent="Active layers",l=L(),t=C("div")},m(n,s){$(n,e,s),$(n,l,s),$(n,t,s),o[3](t)},p:W,i:W,o:W,d(n){n&&(p(e),p(l),p(t)),o[3](null)}}}function v_(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function y_(o,e,l){let t,n;K(o,gn,a=>l(1,t=a)),K(o,Ln,a=>l(2,n=a));let s=null;function i(a){F[a?"unshift":"push"](()=>{s=a,l(0,s)})}return o.$$.update=()=>{o.$$.dirty&7&&v_(s,n,t)},[s,t,n,i]}class S_ extends X{constructor(e){super(),x(this,e,y_,k_,J,{})}}function C_(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y,T,S,j;return l=new Vo({}),n=new Ao({}),a=new qo({}),y=new Qo({props:{boundaryGeojson:o[3]}}),{c(){e=C("div"),h(l.$$.fragment),t=L(),h(n.$$.fragment),s=L(),i=C("div"),h(a.$$.fragment),r=L(),f=C("p"),f.textContent=`App version: ${Cn()}`,u=L(),c=C("div"),d=C("h1"),d.textContent="Scheme Browser",g=L(),h(y.$$.fragment),T=L(),S=C("div"),_e(i,"border-bottom","1px solid #b1b4b6"),_e(c,"display","flex"),_e(c,"justify-content","space-between"),B(e,"slot","sidebar"),B(e,"class","govuk-prose")},m(R,P){$(R,e,P),b(l,e,null),k(e,t),b(n,e,null),k(e,s),k(e,i),b(a,i,null),k(i,r),k(i,f),k(e,u),k(e,c),k(c,d),k(c,g),b(y,c,null),k(e,T),k(e,S),o[6](S),j=!0},p(R,P){const D={};P&8&&(D.boundaryGeojson=R[3]),y.$set(D)},i(R){j||(m(l.$$.fragment,R),m(n.$$.fragment,R),m(a.$$.fragment,R),m(y.$$.fragment,R),j=!0)},o(R){_(l.$$.fragment,R),_(n.$$.fragment,R),_(a.$$.fragment,R),_(y.$$.fragment,R),j=!1},d(R){R&&p(e),w(l),w(n),w(a),w(y),o[6](null)}}}function Ds(o){let e,l;return e=new w_({}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function T_(o){let e,l,t,n;e=new Zo({});let s=o[2]&&Ds();return{c(){h(e.$$.fragment),l=L(),s&&s.c(),t=$e()},m(i,a){b(e,i,a),$(i,l,a),s&&s.m(i,a),$(i,t,a),n=!0},p(i,a){i[2]?s?a&4&&m(s,1):(s=Ds(),s.c(),m(s,1),s.m(t.parentNode,t)):s&&(ue(),_(s,1,1,()=>{s=null}),ce())},i(i){n||(m(e.$$.fragment,i),m(s),n=!0)},o(i){_(e.$$.fragment,i),_(s),n=!1},d(i){i&&(p(l),p(t)),w(e,i),s&&s.d(i)}}}function L_(o){let e,l,t;return l=new Fo({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[T_]},$$scope:{ctx:o}}}),{c(){e=C("div"),h(l.$$.fragment),B(e,"slot","main")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&2&&(i.style=n[1]),s&260&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function I_(o){let e,l,t,n,s;return e=new ir({props:{$$slots:{main:[L_],sidebar:[C_]},$$scope:{ctx:o}}}),n=new S_({}),{c(){h(e.$$.fragment),l=L(),t=C("div"),h(n.$$.fragment),B(t,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,l,a),$(i,t,a),b(n,t,null),s=!0},p(i,[a]){const r={};a&271&&(r.$$scope={dirty:a,ctx:i}),e.$set(r)},i(i){s||(m(e.$$.fragment,i),m(n.$$.fragment,i),s=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),s=!1},d(i){i&&(p(l),p(t)),w(e,i),w(n)}}}function M_(o,e,l){let t,n,s,i,a;K(o,kn,c=>l(4,t=c)),K(o,Sn,c=>l(5,n=c)),K(o,_n,c=>l(1,s=c)),K(o,Vn,c=>l(2,i=c)),K(o,on,c=>l(3,a=c)),Es(()=>{Go()});const r=new URLSearchParams(window.location.search);_n.set(r.get("style")||"dataviz");let f;function u(c){F[c?"unshift":"push"](()=>{f=c,l(0,f),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&Vn.set(n),o.$$.dirty&17&&f&&t&&(l(0,f.innerHTML="",f),f.appendChild(t))},[f,s,i,a,t,n,u]}class N_ extends X{constructor(e){super(),x(this,e,M_,I_,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new N_({target:document.getElementById("app")});
