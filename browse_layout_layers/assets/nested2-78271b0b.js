import{S as K,i as X,s as Q,e as S,b as B,m as me,c as $,n as W,d as p,aU as Ps,g as F,h as G,a as T,j as h,p as b,_ as st,u as z,t as _,q as m,v as w,Q as Dt,T as qt,U as At,V as Ft,b5 as En,o as k,am as ye,z as ce,r as $e,av as Ze,y as v,P as H,aa as ue,ab as vn,ac as Rs,w as V,ad as yn,ae as Ds,af as Wt,ag as qs,ah as As,b6 as Co,W as Ut,b7 as Bn,b8 as To,G as Ht,aP as pn,a0 as le,N as we,f as ot,aR as Lo,b4 as se,a9 as Re,b9 as ge,K as ne,J as Ae,a2 as oe,at as re,R as Sn,b1 as Qt,aT as tn,Z as Ve,$ as Fs,ba as Kt,bb as Rt,bc as Io,bd as Mo,x as Gs,be as No,D as Oo,X as _n,b3 as Cn,bf as jo,I as Po,k as Tn,F as Ro,E as Do,aV as qo,aW as mn,A as Ao,L as Fo,M as Go,B as zo}from"./index-f4343a31.js";import{e as Un,s as E,u as Qe,t as Ho,q as nt,M as Eo,a as ie,v as ke,R as Bo,k as Gt,h as Ke,C as Xe,f as zt,b as Uo,p as Wn,g as Wo,d as Yn,w as Jn,c as Vn,x as Vt,i as en,W as zs,B as Yo,S as Jo,n as Vo,H as Qo,Z as Zo,G as Ko,m as Qn}from"./ZoomOutMap-6d486c7e.js";import{P as ae,A as Hs}from"./Popup-107dbb90.js";function Xo(o){let e;return{c(){e=S("span"),B(e,"class","svelte-kzgqtg"),me(e,"background",o[0])},m(l,t){$(l,e,t)},p(l,[t]){t&1&&me(e,"background",l[0])},i:W,o:W,d(l){l&&p(e)}}}function xo(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Te extends K{constructor(e){super(),X(this,e,xo,Xo,Q,{color:0})}}const er="/atip/browse_layout_layers/assets/help-d011708a.svg";function tr(o){let e,l;const t=o[1].default,n=Dt(t,o,o[4],null);return{c(){e=S("div"),n&&n.c(),B(e,"class","govuk-prose")},m(s,i){$(s,e,i),n&&n.m(e,null),l=!0},p(s,i){n&&n.p&&(!l||i&16)&&qt(n,t,s,s[4],l?Ft(t,s[4],i,null):At(s[4]),null)},i(s){l||(_(n,s),l=!0)},o(s){m(n,s),l=!1},d(s){s&&p(e),n&&n.d(s)}}}function nr(o){let e,l,t,n,s,i,a;function r(u){o[3](u)}let f={title:"Help",$$slots:{default:[tr]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.open=o[0]),t=new Ps({props:f}),F.push(()=>G(t,"open",r)),{c(){e=S("button"),e.innerHTML=`<img src="${er}" title="Help" alt="Help"/>`,l=T(),h(t.$$.fragment),B(e,"class","svelte-7d9d1l")},m(u,c){$(u,e,c),$(u,l,c),b(t,u,c),s=!0,i||(a=st(e,"click",o[2]),i=!0)},p(u,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,d.open=u[0],z(()=>n=!1)),t.$set(d)},i(u){s||(_(t.$$.fragment,u),s=!0)},o(u){m(t.$$.fragment,u),s=!1},d(u){u&&(p(e),p(l)),w(t,u),i=!1,a()}}}function lr(o,e,l){let{$$slots:t={},$$scope:n}=e,s=!1;const i=()=>l(0,s=!0);function a(r){s=r,l(0,s)}return o.$$set=r=>{"$$scope"in r&&l(4,n=r.$$scope)},[s,t,i,a,n]}class pe extends K{constructor(e){super(),X(this,e,lr,nr,Q,{})}}const sr=o=>({}),Zn=o=>({}),or=o=>({}),Kn=o=>({});function rr(o){let e,l,t,n,s,i,a,r,f,u,c;const d=o[4].sidebar,g=Dt(d,o,o[3],Kn),y=o[4].main,L=Dt(y,o,o[3],Zn);return{c(){e=S("div"),l=S("aside"),t=S("div"),g&&g.c(),n=T(),s=S("button"),s.textContent="â†’",a=T(),r=S("main"),L&&L.c(),B(t,"class","sidebar-content content-container svelte-1n0etgd"),B(s,"type","button"),B(s,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),B(l,"class",i=En(o[1]?"":"collapsed")+" svelte-1n0etgd"),me(l,"--sidebarWidth",o[0]),B(r,"class","svelte-1n0etgd"),B(e,"class","overall-layout svelte-1n0etgd")},m(C,O){$(C,e,O),k(e,l),k(l,t),g&&g.m(t,null),k(l,n),k(l,s),k(e,a),k(e,r),L&&L.m(r,null),f=!0,u||(c=st(s,"click",o[2]),u=!0)},p(C,[O]){g&&g.p&&(!f||O&8)&&qt(g,d,C,C[3],f?Ft(d,C[3],O,or):At(C[3]),Kn),(!f||O&2&&i!==(i=En(C[1]?"":"collapsed")+" svelte-1n0etgd"))&&B(l,"class",i),(!f||O&1)&&me(l,"--sidebarWidth",C[0]),L&&L.p&&(!f||O&8)&&qt(L,y,C,C[3],f?Ft(y,C[3],O,sr):At(C[3]),Zn)},i(C){f||(_(g,C),_(L,C),f=!0)},o(C){m(g,C),m(L,C),f=!1},d(C){C&&p(e),g&&g.d(C),L&&L.d(C),u=!1,c()}}}function ir(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:s="25rem"}=e,i=!0;function a(){l(1,i=!i)}return o.$$set=r=>{"sidebarWidth"in r&&l(0,s=r.sidebarWidth),"$$scope"in r&&l(3,n=r.$$scope)},[s,i,a,n,t]}class fr extends K{constructor(e){super(),X(this,e,ir,rr,Q,{sidebarWidth:0})}}function Xn(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function xn(o){let e,l,t,n=o[1]+"",s,i,a;return l=new Te({props:{color:o[2]}}),{c(){e=S("li"),h(l.$$.fragment),t=T(),s=v(n),i=T()},m(r,f){$(r,e,f),b(l,e,null),k(e,t),k(e,s),k(e,i),a=!0},p(r,f){const u={};f&1&&(u.color=r[2]),l.$set(u),(!a||f&1)&&n!==(n=r[1]+"")&&H(s,n)},i(r){a||(_(l.$$.fragment,r),a=!0)},o(r){m(l.$$.fragment,r),a=!1},d(r){r&&p(e),w(l)}}}function ar(o){let e,l,t=ye(o[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=xn(Xn(o,t,i));const s=i=>m(n[i],1,1,()=>{n[i]=null});return{c(){e=S("ul");for(let i=0;i<n.length;i+=1)n[i].c()},m(i,a){$(i,e,a);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);l=!0},p(i,[a]){if(a&1){t=ye(i[0]);let r;for(r=0;r<t.length;r+=1){const f=Xn(i,t,r);n[r]?(n[r].p(f,a),_(n[r],1)):(n[r]=xn(f),n[r].c(),_(n[r],1),n[r].m(e,null))}for(ce(),r=t.length;r<n.length;r+=1)s(r);$e()}},i(i){if(!l){for(let a=0;a<t.length;a+=1)_(n[a]);l=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)m(n[a]);l=!1},d(i){i&&p(e),Ze(n,i)}}}function ur(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Xt extends K{constructor(e){super(),X(this,e,ur,ar,Q,{rows:0})}}function el(o){let e=o[0],l,t,n=tl(o);return{c(){n.c(),l=ue()},m(s,i){n.m(s,i),$(s,l,i),t=!0},p(s,i){i&1&&Q(e,e=s[0])?(ce(),m(n,1,1,W),$e(),n=tl(s),n.c(),_(n,1),n.m(l.parentNode,l)):n.p(s,i)},i(s){t||(_(n),t=!0)},o(s){m(n),t=!1},d(s){s&&p(l),n.d(s)}}}function tl(o){let e;const l=o[16].default,t=Dt(l,o,o[15],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&32768)&&qt(t,l,n,n[15],e?Ft(l,n[15],s,null):At(n[15]),null)},i(n){e||(_(t,n),e=!0)},o(n){m(t,n),e=!1},d(n){t&&t.d(n)}}}function cr(o){let e,l,t=o[0]&&el(o);return{c(){t&&t.c(),e=ue()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&_(t,1)):(t=el(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(ce(),m(t,1,1,()=>{t=null}),$e())},i(n){l||(_(t),l=!0)},o(n){m(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function $r(o,e,l){let t,n,{$$slots:s={},$$scope:i}=e,{id:a=vn("raster-source")}=e,{tiles:r}=e,{tileSize:f=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:d=null}=e,{minzoom:g=null}=e,{maxzoom:y=null}=e,{volatile:L=null}=e;const{map:C,self:O}=Rs();V(o,C,j=>l(14,n=j)),V(o,O,j=>l(0,t=j));let P,D=!0;return yn(()=>{t&&P&&n&&(Ds(C,t,P),Wt(O,t=null,t),l(12,P=void 0))}),o.$$set=j=>{"id"in j&&l(3,a=j.id),"tiles"in j&&l(4,r=j.tiles),"tileSize"in j&&l(5,f=j.tileSize),"bounds"in j&&l(6,u=j.bounds),"scheme"in j&&l(7,c=j.scheme),"attribution"in j&&l(8,d=j.attribution),"minzoom"in j&&l(9,g=j.minzoom),"maxzoom"in j&&l(10,y=j.maxzoom),"volatile"in j&&l(11,L=j.volatile),"$$scope"in j&&l(15,i=j.$$scope)},o.$$.update=()=>{o.$$.dirty&24569&&n&&t!==a&&(Wt(O,t=a,t),qs(n,t,As({type:"raster",tiles:r,tileSize:f,bounds:u,scheme:c,attribution:d,minzoom:g,maxzoom:y,volatile:L}),j=>n&&j===t,()=>{t&&(l(12,P=n==null?void 0:n.getSource(t)),l(13,D=!0))})),o.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,P=n==null?void 0:n.getSource(a))})),o.$$.dirty&12304&&P&&(D?l(13,D=!1):P.setTiles(r))},[t,C,O,a,r,f,u,c,d,g,y,L,P,D,n,i,s]}class pr extends K{constructor(e){super(),X(this,e,$r,cr,Q,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function _r(o){let e;const l=o[16].default,t=Dt(l,o,o[24],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16777216)&&qt(t,l,n,n[24],e?Ft(l,n[24],s,null):At(n[24]),null)},i(n){e||(_(t,n),e=!0)},o(n){m(t,n),e=!1},d(n){t&&t.d(n)}}}function mr(o){let e,l,t;function n(i){o[17](i)}let s={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[_r]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.hovered=o[0]),e=new Co({props:s}),F.push(()=>G(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,[a]){const r={};a&2&&(r.id=i[1]),a&4&&(r.source=i[2]),a&8&&(r.sourceLayer=i[3]),a&16&&(r.beforeId=i[4]),a&32&&(r.beforeLayerType=i[5]),a&64&&(r.paint=i[6]),a&128&&(r.layout=i[7]),a&256&&(r.filter=i[8]),a&512&&(r.applyToClusters=i[9]),a&1024&&(r.minzoom=i[10]),a&2048&&(r.maxzoom=i[11]),a&4096&&(r.hoverCursor=i[12]),a&8192&&(r.manageHoverState=i[13]),a&16384&&(r.eventsIfTopMost=i[14]),a&32768&&(r.interactive=i[15]),a&16777216&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.hovered=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function gr(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:s=vn("symbol")}=e,{source:i=void 0}=e,{sourceLayer:a=void 0}=e,{beforeId:r=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:d=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:L=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:O=!1}=e,{hovered:P=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:j=!0}=e;function M(A){P=A,l(0,P)}function N(A){Ut.call(this,o,A)}function R(A){Ut.call(this,o,A)}function I(A){Ut.call(this,o,A)}function q(A){Ut.call(this,o,A)}function J(A){Ut.call(this,o,A)}function x(A){Ut.call(this,o,A)}return o.$$set=A=>{"id"in A&&l(1,s=A.id),"source"in A&&l(2,i=A.source),"sourceLayer"in A&&l(3,a=A.sourceLayer),"beforeId"in A&&l(4,r=A.beforeId),"beforeLayerType"in A&&l(5,f=A.beforeLayerType),"paint"in A&&l(6,u=A.paint),"layout"in A&&l(7,c=A.layout),"filter"in A&&l(8,d=A.filter),"applyToClusters"in A&&l(9,g=A.applyToClusters),"minzoom"in A&&l(10,y=A.minzoom),"maxzoom"in A&&l(11,L=A.maxzoom),"hoverCursor"in A&&l(12,C=A.hoverCursor),"manageHoverState"in A&&l(13,O=A.manageHoverState),"hovered"in A&&l(0,P=A.hovered),"eventsIfTopMost"in A&&l(14,D=A.eventsIfTopMost),"interactive"in A&&l(15,j=A.interactive),"$$scope"in A&&l(24,n=A.$$scope)},[P,s,i,a,r,f,u,c,d,g,y,L,C,O,D,j,t,M,N,R,I,q,J,x,n]}class Ln extends K{constructor(e){super(),X(this,e,gr,mr,Q,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function nl(o){let e=o[0],l,t,n=ll(o);return{c(){n.c(),l=ue()},m(s,i){n.m(s,i),$(s,l,i),t=!0},p(s,i){i&1&&Q(e,e=s[0])?(ce(),m(n,1,1,W),$e(),n=ll(s),n.c(),_(n,1),n.m(l.parentNode,l)):n.p(s,i)},i(s){t||(_(n),t=!0)},o(s){m(n),t=!1},d(s){s&&p(l),n.d(s)}}}function ll(o){let e;const l=o[15].default,t=Dt(l,o,o[14],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16384)&&qt(t,l,n,n[14],e?Ft(l,n[14],s,null):At(n[14]),null)},i(n){e||(_(t,n),e=!0)},o(n){m(t,n),e=!1},d(n){t&&t.d(n)}}}function dr(o){let e,l,t=o[0]&&nl(o);return{c(){t&&t.c(),e=ue()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&_(t,1)):(t=nl(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(ce(),m(t,1,1,()=>{t=null}),$e())},i(n){l||(_(t),l=!0)},o(n){m(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function hr(o,e,l){let t,n,{$$slots:s={},$$scope:i}=e,{id:a=vn("vector")}=e,{url:r=null}=e,{tiles:f=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:d=null}=e,{attribution:g=null}=e,{minzoom:y=null}=e,{maxzoom:L=null}=e,{volatile:C=null}=e;if(r&&r.includes("pmtiles://")&&!Bn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let j=new To;Bn.addProtocol("pmtiles",j.tile)}const{map:O,self:P}=Rs();V(o,O,j=>l(13,n=j)),V(o,P,j=>l(0,t=j));let D;return yn(()=>{t&&n&&(Ds(O,t,D),Wt(P,t=null,t),D=void 0)}),o.$$set=j=>{"id"in j&&l(3,a=j.id),"url"in j&&l(4,r=j.url),"tiles"in j&&l(5,f=j.tiles),"promoteId"in j&&l(6,u=j.promoteId),"bounds"in j&&l(7,c=j.bounds),"scheme"in j&&l(8,d=j.scheme),"attribution"in j&&l(9,g=j.attribution),"minzoom"in j&&l(10,y=j.minzoom),"maxzoom"in j&&l(11,L=j.maxzoom),"volatile"in j&&l(12,C=j.volatile),"$$scope"in j&&l(14,i=j.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==a&&(Wt(P,t=a,t),qs(n,t,As({type:"vector",url:r,tiles:f,promoteId:u,bounds:c,scheme:d,attribution:g,minzoom:y,maxzoom:L,volatile:C}),j=>n&&j===t,()=>{t&&(D=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{D=n==null?void 0:n.getSource(a)}))},[t,O,P,a,r,f,u,c,d,g,y,L,C,n,i,s]}class de extends K{constructor(e){super(),X(this,e,hr,dr,Q,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function sl(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function br(o){let e,l,t;return l=new ot({props:{$$slots:{default:[kr]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=S("div"),h(l.$$.fragment)},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&16384&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function wr(o){let e,l,t,n,s,i,a,r,f,u;l=new ot({props:{$$slots:{default:[vr]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&ol(o);s=new nt({props:{label:"Help",$$slots:{default:[yr]},$$scope:{ctx:o}}}),a=new Lo({}),a.$on("click",o[3]);let d=ye(o[0]),g=[];for(let L=0;L<d.length;L+=1)g[L]=rl(sl(o,d,L));const y=L=>m(g[L],1,1,()=>{g[L]=null});return{c(){e=S("div"),h(l.$$.fragment),t=T(),c&&c.c(),n=T(),h(s.$$.fragment),i=T(),h(a.$$.fragment),r=T();for(let L=0;L<g.length;L+=1)g[L].c();f=ue()},m(L,C){$(L,e,C),b(l,e,null),$(L,t,C),c&&c.m(L,C),$(L,n,C),b(s,L,C),$(L,i,C),b(a,L,C),$(L,r,C);for(let O=0;O<g.length;O+=1)g[O]&&g[O].m(L,C);$(L,f,C),u=!0},p(L,C){const O={};C&16384&&(O.$$scope={dirty:C,ctx:L}),l.$set(O),L[2]?c?c.p(L,C):(c=ol(L),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const P={};if(C&16384&&(P.$$scope={dirty:C,ctx:L}),s.$set(P),C&65){d=ye(L[0]);let D;for(D=0;D<d.length;D+=1){const j=sl(L,d,D);g[D]?(g[D].p(j,C),_(g[D],1)):(g[D]=rl(j),g[D].c(),_(g[D],1),g[D].m(f.parentNode,f))}for(ce(),D=d.length;D<g.length;D+=1)y(D);$e()}},i(L){if(!u){_(l.$$.fragment,L),_(s.$$.fragment,L),_(a.$$.fragment,L);for(let C=0;C<d.length;C+=1)_(g[C]);u=!0}},o(L){m(l.$$.fragment,L),m(s.$$.fragment,L),m(a.$$.fragment,L),g=g.filter(Boolean);for(let C=0;C<g.length;C+=1)m(g[C]);u=!1},d(L){L&&(p(e),p(t),p(n),p(i),p(r),p(f)),w(l),c&&c.d(L),w(s,L),w(a,L),Ze(g,L)}}}function kr(o){let e;return{c(){e=v("Measure lines")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function vr(o){let e;return{c(){e=v("Stop measuring")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ol(o){let e,l,t=o[2].toFixed(2)+"",n,s;return{c(){e=S("p"),l=v("Length: "),n=v(t),s=v(" meters")},m(i,a){$(i,e,a),k(e,l),k(e,n),k(e,s)},p(i,a){a&4&&t!==(t=i[2].toFixed(2)+"")&&H(n,t)},d(i){i&&p(e)}}}function yr(o){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function Sr(o){let e,l;return{c(){e=S("span"),l=T(),B(e,"class","dot svelte-1tzt432")},m(t,n){$(t,e,n),$(t,l,n)},p:W,d(t){t&&(p(e),p(l))}}}function rl(o){let e,l,t;function n(a){o[7](a,o[11],o[12],o[13])}function s(){return o[8](o[13])}let i={draggable:!0,$$slots:{default:[Sr]},$$scope:{ctx:o}};return o[11]!==void 0&&(i.lngLat=o[11]),e=new Eo({props:i}),F.push(()=>G(e,"lngLat",n)),e.$on("click",s),{c(){h(e.$$.fragment)},m(a,r){b(e,a,r),t=!0},p(a,r){o=a;const f={};r&16384&&(f.$$scope={dirty:r,ctx:o}),!l&&r&1&&(l=!0,f.lngLat=o[11],z(()=>l=!1)),e.$set(f)},i(a){t||(_(e.$$.fragment,a),t=!0)},o(a){m(e.$$.fragment,a),t=!1},d(a){w(e,a)}}}function Cr(o){let e,l;const t=[E("measurement-line"),{paint:{"line-color":Qe.measuringLine,"line-width":5}}];let n={};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new we({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a={};e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Tr(o){let e,l,t,n,s,i,a;const r=[wr,br],f=[];function u(c,d){return c[1]?0:1}return e=u(o),l=f[e]=r[e](o),n=new Ht({props:{data:o[0].length<2?Un():pn(o[0]),$$slots:{default:[Cr]},$$scope:{ctx:o}}}),{c(){l.c(),t=T(),h(n.$$.fragment)},m(c,d){f[e].m(c,d),$(c,t,d),b(n,c,d),s=!0,i||(a=st(window,"keydown",o[5]),i=!0)},p(c,[d]){let g=e;e=u(c),e===g?f[e].p(c,d):(ce(),m(f[g],1,1,()=>{f[g]=null}),$e(),l=f[e],l?l.p(c,d):(l=f[e]=r[e](c),l.c()),_(l,1),l.m(t.parentNode,t));const y={};d&1&&(y.data=c[0].length<2?Un():pn(c[0])),d&16384&&(y.$$scope={dirty:d,ctx:c}),n.$set(y)},i(c){s||(_(l),_(n.$$.fragment,c),s=!0)},o(c){m(l),m(n.$$.fragment,c),s=!1},d(c){c&&p(t),f[e].d(c),w(n,c),i=!1,a()}}}function Lr(o,e,l){let t,n=!1,s=[];function i(y){return y.length<2?null:1e3*Ho(pn(y),{units:"kilometers"})}function a(y){l(0,s=[...s,y.detail.lngLat.toArray()])}function r(){l(1,n=!1),l(0,s=[])}function f(y){n&&y.key==="Escape"&&(y.stopPropagation(),r())}function u(y){s.splice(y,1),l(0,s)}function c(y,L,C,O){C[O]=y,l(0,s)}const d=y=>u(y),g=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=i(s))},[s,n,t,a,r,f,u,c,d,g]}class Ir extends K{constructor(e){super(),X(this,e,Lr,Tr,Q,{})}}const ee={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},qe=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Mr(o){let e;return{c(){e=v(`Open Government License
  `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Nr(o){let e,l,t,n,s;return t=new se({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Mr]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=v("License: "),h(t.$$.fragment),n=v(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(i,a){$(i,e,a),k(e,l),b(t,e,null),k(e,n),s=!0},p(i,[a]){const r={};a&1&&(r.$$scope={dirty:a,ctx:i}),t.$set(r)},i(i){s||(_(t.$$.fragment,i),s=!0)},o(i){m(t.$$.fragment,i),s=!1},d(i){i&&p(e),w(t)}}}class Le extends K{constructor(e){super(),X(this,e,null,Nr,Q,{})}}function il(o,e,l){const t=o.slice();return t[2]=e[l],t}function fl(o,e,l){const t=o.slice();return t[5]=e[l],t}function al(o){let e,l;return{c(){e=S("span"),l=v(`Â 
    `),me(e,"background",o[5]),me(e,"width","100%"),me(e,"border","1px solid black")},m(t,n){$(t,e,n),k(e,l)},p(t,n){n&1&&me(e,"background",t[5])},d(t){t&&p(e)}}}function ul(o){let e,l=o[2]+"",t;return{c(){e=S("span"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&2&&l!==(l=n[2]+"")&&H(t,l)},d(n){n&&p(e)}}}function Or(o){let e,l,t,n=ye(o[0]),s=[];for(let r=0;r<n.length;r+=1)s[r]=al(fl(o,n,r));let i=ye(o[1]),a=[];for(let r=0;r<i.length;r+=1)a[r]=ul(il(o,i,r));return{c(){e=S("div");for(let r=0;r<s.length;r+=1)s[r].c();l=T(),t=S("div");for(let r=0;r<a.length;r+=1)a[r].c();me(e,"display","flex"),me(t,"display","flex"),me(t,"justify-content","space-between")},m(r,f){$(r,e,f);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);$(r,l,f),$(r,t,f);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(t,null)},p(r,[f]){if(f&1){n=ye(r[0]);let u;for(u=0;u<n.length;u+=1){const c=fl(r,n,u);s[u]?s[u].p(c,f):(s[u]=al(c),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=n.length}if(f&2){i=ye(r[1]);let u;for(u=0;u<i.length;u+=1){const c=il(r,i,u);a[u]?a[u].p(c,f):(a[u]=ul(c),a[u].c(),a[u].m(t,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=i.length}},i:W,o:W,d(r){r&&(p(e),p(l),p(t)),Ze(s,r),Ze(a,r)}}}function jr(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=s=>{"colorScale"in s&&l(0,t=s.colorScale),"limits"in s&&l(1,n=s.limits)},[t,n]}class Fe extends K{constructor(e){super(),X(this,e,jr,Or,Q,{colorScale:0,limits:1})}}let In=Re(new Set);function he(o){let e=new URLSearchParams(window.location.search).has(o),l=Re(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),In.update(s=>(t?s.add(o):s.delete(o),s)),window.history.replaceState(null,"",n.toString())}),l}function Et(o,e,l,t){let n=e,s=new URLSearchParams(window.location.search).get(o);if(s!=null)try{n=t(s)}catch(a){console.warn(`Parsing URL parameter ${o}=${s} failed, using default value: ${a}`)}let i=Re(n);return i.subscribe(a=>{let r=new URL(window.location.href),f=l(a);f==null?r.searchParams.delete(o):r.searchParams.set(o,f),In.update(u=>(f==null?u.delete(o):u.add(o),u)),window.history.replaceState(null,"",r.toString())}),i}let gn=Re(new Map);function Pr(o){let e;return{c(){e=v(o[1])},m(l,t){$(l,e,t)},p(l,t){t&2&&H(e,l[1])},d(l){l&&p(e)}}}function Rr(o){let e,l,t,n,s;function i(u){o[5](u)}let a={$$slots:{default:[Pr]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));const r=o[4].default,f=Dt(r,o,o[7],null);return{c(){h(e.$$.fragment),t=T(),n=S("div"),f&&f.c()},m(u,c){b(e,u,c),$(u,t,c),$(u,n,c),f&&f.m(n,null),o[6](n),s=!0},p(u,[c]){const d={};c&130&&(d.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,d.checked=u[0],z(()=>l=!1)),e.$set(d),f&&f.p&&(!s||c&128)&&qt(f,r,u,u[7],s?Ft(r,u[7],c,null):At(u[7]),null)},i(u){s||(_(e.$$.fragment,u),_(f,u),s=!0)},o(u){m(e.$$.fragment,u),m(f,u),s=!1},d(u){u&&(p(t),p(n)),w(e,u),f&&f.d(u),o[6](null)}}}function Dr(o,e,l){let{$$slots:t={},$$scope:n}=e,{name:s}=e,{title:i}=e,{show:a}=e,r=null;yn(()=>{gn.update(c=>(c.delete(s),c))});function f(c){a=c,l(0,a)}function u(c){F[c?"unshift":"push"](()=>{r=c,l(2,r),l(3,s)})}return o.$$set=c=>{"name"in c&&l(3,s=c.name),"title"in c&&l(1,i=c.title),"show"in c&&l(0,a=c.show),"$$scope"in c&&l(7,n=c.$$scope)},o.$$.update=()=>{o.$$.dirty&12&&r&&gn.update(c=>(l(2,r.style.display="none",r),c.set(s,r),c))},[a,i,r,s,t,f,u,n]}class _e extends K{constructor(e){super(),X(this,e,Dr,Rr,Q,{name:3,title:1,show:0})}}function cl(o){const e=o[8].OA21CD;o[9]=e;const l=o[8][o[0].kind];o[10]=l}function qr(o){let e;return{c(){e=v("2021 census")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ar(o){let e,l,t,n,s,i,a;return t=new se({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[zr]},$$scope:{ctx:o}}}),s=new se({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Hr]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=v("Population density data is from the 2021 census, via "),h(t.$$.fragment),n=v(". Output area boundaries from "),h(s.$$.fragment),i=v(".")},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,i),a=!0},i(r){a||(_(t.$$.fragment,r),_(s.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),m(s.$$.fragment,r),a=!1},d(r){r&&p(e),w(t),w(s)}}}function Fr(o){let e,l,t,n,s,i,a,r,f;return s=new se({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Er]},$$scope:{ctx:o}}}),a=new se({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Br]},$$scope:{ctx:o}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown
            here assumes 3.`,l=T(),t=S("p"),n=v("Car/van availability data is from the 2021 census, via "),h(s.$$.fragment),i=v(". Output area boundaries from "),h(a.$$.fragment),r=v(".")},m(u,c){$(u,e,c),$(u,l,c),$(u,t,c),k(t,n),b(s,t,null),k(t,i),b(a,t,null),k(t,r),f=!0},i(u){f||(_(s.$$.fragment,u),_(a.$$.fragment,u),f=!0)},o(u){m(s.$$.fragment,u),m(a.$$.fragment,u),f=!1},d(u){u&&(p(e),p(l),p(t)),w(s),w(a)}}}function Gr(o){let e,l,t,n,s,i,a;return t=new se({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ur]},$$scope:{ctx:o}}}),s=new se({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Wr]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=v("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),n=v(". Output area boundaries from "),h(s.$$.fragment),i=v(".")},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,i),a=!0},i(r){a||(_(t.$$.fragment,r),_(s.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),m(s.$$.fragment,r),a=!1},d(r){r&&p(e),w(t),w(s)}}}function zr(o){let e;return{c(){e=v(`NOMIS TS006
            `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Hr(o){let e;return{c(){e=v(`ONS Geography
            `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Er(o){let e;return{c(){e=v(`NOMIS TS045
            `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Br(o){let e;return{c(){e=v(`ONS Geography
            `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ur(o){let e;return{c(){e=v(`NOMIS TS045
            `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Wr(o){let e;return{c(){e=v(`ONS Geography
            `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Yr(o){let e,l,t,n,s;const i=[Gr,Fr,Ar],a=[];function r(f,u){return f[0].kind=="percent_households_with_car"?0:f[0].kind=="average_cars_per_household"?1:2}return e=r(o),l=a[e]=i[e](o),n=new Le({}),{c(){l.c(),t=T(),h(n.$$.fragment)},m(f,u){a[e].m(f,u),$(f,t,u),b(n,f,u),s=!0},p(f,u){let c=e;e=r(f),e!==c&&(ce(),m(a[c],1,1,()=>{a[c]=null}),$e(),l=a[e],l||(l=a[e]=i[e](f),l.c()),_(l,1),l.m(t.parentNode,t))},i(f){s||(_(l),_(n.$$.fragment,f),s=!0)},o(f){m(l),m(n.$$.fragment,f),s=!1},d(f){f&&p(t),a[e].d(f),w(n,f)}}}function Jr(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Yr]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&2049&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Vr(o){let e,l,t,n;return t=new Fe({props:{colorScale:o[1],limits:ct(o[0].kind).map($l)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",l=T(),h(t.$$.fragment)},m(s,i){$(s,e,i),$(s,l,i),b(t,s,i),n=!0},p(s,i){const a={};i&1&&(a.limits=ct(s[0].kind).map($l)),t.$set(a)},i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function Qr(o){let e,l;return e=new Fe({props:{colorScale:o[1],limits:ct(o[0].kind)}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.limits=ct(t[0].kind)),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Zr(o){let e,l;return e=new Fe({props:{colorScale:o[1],limits:ct(o[0].kind)}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.limits=ct(t[0].kind)),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Kr(o){let e,l,t,n,s,i,a,r,f,u;function c(P){o[4](P)}let d={$$slots:{right:[Jr],default:[qr]},$$scope:{ctx:o}};o[0].show!==void 0&&(d.checked=o[0].show),e=new ie({props:d}),F.push(()=>G(e,"checked",c));function g(P){o[5](P)}let y={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]]};o[0].kind!==void 0&&(y.value=o[0].kind),n=new Sn({props:y}),F.push(()=>G(n,"value",g));const L=[Zr,Qr,Vr],C=[];function O(P,D){return P[0].kind=="percent_households_with_car"?0:P[0].kind=="average_cars_per_household"?1:P[0].kind=="population_density"?2:-1}return~(a=O(o))&&(r=C[a]=L[a](o)),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),i=T(),r&&r.c(),f=ue()},m(P,D){b(e,P,D),$(P,t,D),b(n,P,D),$(P,i,D),~a&&C[a].m(P,D),$(P,f,D),u=!0},p(P,D){const j={};D&2049&&(j.$$scope={dirty:D,ctx:P}),!l&&D&1&&(l=!0,j.checked=P[0].show,z(()=>l=!1)),e.$set(j);const M={};!s&&D&1&&(s=!0,M.value=P[0].kind,z(()=>s=!1)),n.$set(M);let N=a;a=O(P),a===N?~a&&C[a].p(P,D):(r&&(ce(),m(C[N],1,1,()=>{C[N]=null}),$e()),~a?(r=C[a],r?r.p(P,D):(r=C[a]=L[a](P),r.c()),_(r,1),r.m(f.parentNode,f)):r=null)},i(P){u||(_(e.$$.fragment,P),_(n.$$.fragment,P),_(r),u=!0)},o(P){m(e.$$.fragment,P),m(n.$$.fragment,P),m(r),u=!1},d(P){P&&(p(t),p(i),p(f)),w(e,P),w(n,P),~a&&C[a].d(P)}}}function Xr(o){let e,l,t,n=o[10].toLocaleString()+"",s,i,a=o[9]+"",r;return{c(){e=S("p"),l=v("There are "),t=S("b"),s=v(n),i=v(`
          people per square kilometre in `),r=v(a)},m(f,u){$(f,e,u),k(e,l),k(e,t),k(t,s),k(e,i),k(e,r)},p(f,u){u&257&&n!==(n=f[10].toLocaleString()+"")&&H(s,n),u&256&&a!==(a=f[9]+"")&&H(r,a)},d(f){f&&p(e)}}}function xr(o){let e,l,t=o[9]+"",n,s,i,a=o[10]+"",r,f;return{c(){e=S("p"),l=v("Households in "),n=v(t),s=v(` have an average of
          `),i=S("b"),r=v(a),f=v(`
          cars`)},m(u,c){$(u,e,c),k(e,l),k(e,n),k(e,s),k(e,i),k(i,r),k(e,f)},p(u,c){c&256&&t!==(t=u[9]+"")&&H(n,t),c&257&&a!==(a=u[10]+"")&&H(r,a)},d(u){u&&p(e)}}}function ei(o){let e,l,t=o[10]+"",n,s,i,a=o[9]+"",r,f;return{c(){e=S("p"),l=S("b"),n=v(t),s=v("%"),i=v(`
          of households in `),r=v(a),f=v(" have 1 or more cars")},m(u,c){$(u,e,c),k(e,l),k(l,n),k(l,s),k(e,i),k(e,r),k(e,f)},p(u,c){c&257&&t!==(t=u[10]+"")&&H(n,t),c&256&&a!==(a=u[9]+"")&&H(r,a)},d(u){u&&p(e)}}}function ti(o){cl(o);let e;function l(s,i){return s[0].kind=="percent_households_with_car"?ei:s[0].kind=="average_cars_per_household"?xr:Xr}let t=l(o),n=t(o);return{c(){n.c(),e=ue()},m(s,i){n.m(s,i),$(s,e,i)},p(s,i){cl(s),t===(t=l(s))&&n?n.p(s,i):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function ni(o){let e,l;return e=new ae({props:{$$slots:{default:[ti,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&2305&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function li(o){let e,l,t,n;const s=[E(Ee),{sourceLayer:Ee},{paint:{"fill-color":ke(["get",o[0].kind],ct(o[0].kind),o[1]),"fill-opacity":ne(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ni]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=le(i,s[f]);e=new Ae({props:i}),e.$on("click",o[3]);const a=[E(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=le(r,a[f]);return t=new we({props:r}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&3?oe(s,[u&0&&re(E(Ee)),u&0&&{sourceLayer:Ee},u&3&&{paint:{"fill-color":ke(["get",f[0].kind],ct(f[0].kind),f[1]),"fill-opacity":ne(.5,.7)}},u&1&&{layout:{visibility:f[0].show?"visible":"none"}},s[4],s[5],s[6]]):{};u&2049&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&1?oe(a,[u&0&&re(E(`${Ee}-outline`)),u&0&&{sourceLayer:Ee},a[2],u&1&&{layout:{visibility:f[0].show?"visible":"none"}}]):{};t.$set(d)},i(f){n||(_(e.$$.fragment,f),_(t.$$.fragment,f),n=!0)},o(f){m(e.$$.fragment,f),m(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function si(o){let e,l,t,n,s;function i(r){o[6](r)}let a={name:Ee,title:"2021 census",$$slots:{default:[Kr]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Ee}.pmtiles`,$$slots:{default:[li]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&2049&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0].show,z(()=>l=!1)),e.$set(u);const c={};f&2049&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Ee="census_output_areas";function oi(o){return o.show?o.kind:null}function ri(o){return{show:!0,kind:o}}function ct(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const $l=o=>o.toLocaleString();function ii(o,e,l){let t,n=ee.sequential_low_to_high,i=Et(Ee,{show:!1,kind:"percent_households_with_car"},oi,ri);V(o,i,c=>l(0,t=c));function a(c){let d=c.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${d}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${d}`,"_blank")}function r(c){o.$$.not_equal(t.show,c)&&(t.show=c,i.set(t))}function f(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,i.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,i.set(t))}return[t,n,i,a,r,f,u]}class fi extends K{constructor(e){super(),X(this,e,ii,si,Q,{})}}function ai(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=T(),t=v(Es)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function ui(o){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ci(o){let e,l,t,n,s,i,a;return t=new se({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ui]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=S("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of December 2022."),s=T(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(_(t.$$.fragment,r),_(i.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),m(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function $i(o){let e,l,t;return l=new pe({props:{$$slots:{default:[ci]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function pi(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[$i],default:[ai]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function _i(o){let e,l=o[5].name+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=n[5].name+"")&&H(t,l)},d(n){n&&p(e)}}}function mi(o){let e,l;return e=new ae({props:{$$slots:{default:[_i,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function gi(o){let e,l,t,n;const s=[E(_t),{paint:{"fill-color":o[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[mi]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=le(i,s[f]);e=new Ae({props:i}),e.$on("click",hi);const a=[E(`${_t}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=le(r,a[f]);return t=new we({props:r}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&3?oe(s,[u&0&&re(E(_t)),u&2&&{paint:{"fill-color":f[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}},s[3],s[4],s[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&3?oe(a,[u&0&&re(E(`${_t}-outline`)),u&2&&{paint:{"line-color":f[1],"line-width":2.5}},u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(_(e.$$.fragment,f),_(t.$$.fragment,f),n=!0)},o(f){m(e.$$.fragment,f),m(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function di(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:_t,title:Es,$$slots:{default:[pi]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new Ht({props:{data:`${ge()}/v1/${_t}.geojson`,$$slots:{default:[gi]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let _t="combined_authorities",Es="Combined authorities";function hi(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH22CD}`,"_blank")}function bi(o,e,l){let t,n=ee.combined_authorities,s=he(_t);V(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class wi extends K{constructor(e){super(),X(this,e,bi,di,Q,{})}}function ki(o){let e;return{c(){e=v(Bs)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function vi(o){let e;return{c(){e=v(`DLUCH GIS
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function yi(o){let e;return{c(){e=v(`here
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Si(o){let e,l,t,n,s,i,a,r,f;return t=new se({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[vi]},$$scope:{ctx:o}}}),s=new se({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[yi]},$$scope:{ctx:o}}}),r=new Le({}),{c(){e=S("p"),l=v("The 2019 English IMD scores come from "),h(t.$$.fragment),n=v(`. Note the LSOAs identified are from the 2011 census. A
          detailed breakdown of the score across different categories can be
          found `),h(s.$$.fragment),i=v("."),a=T(),h(r.$$.fragment)},m(u,c){$(u,e,c),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,i),$(u,a,c),b(r,u,c),f=!0},p(u,c){const d={};c&128&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const g={};c&128&&(g.$$scope={dirty:c,ctx:u}),s.$set(g)},i(u){f||(_(t.$$.fragment,u),_(s.$$.fragment,u),_(r.$$.fragment,u),f=!0)},o(u){m(t.$$.fragment,u),m(s.$$.fragment,u),m(r.$$.fragment,u),f=!1},d(u){u&&(p(e),p(a)),w(t),w(s),w(r,u)}}}function Ci(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Si]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&128&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function pl(o){let e,l;return e=new Fe({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ti(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[Ci],default:[ki]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&pl(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&128&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&_(r,1)):(r=pl(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Li(o){let e,l=o[6].LSOA11CD+"",t,n,s,i=o[6].score+"",a,r,f,u,c,d=o[6].rank.toLocaleString()+"",g,y;return{c(){e=S("p"),t=v(l),n=v(` has an IMD score of
        `),s=S("b"),a=v(i),r=T(),f=S("p"),u=v("Rank: "),c=S("b"),g=v(d),y=v(`
        / 32,844 LSOAs`)},m(L,C){$(L,e,C),k(e,t),k(e,n),k(e,s),k(s,a),$(L,r,C),$(L,f,C),k(f,u),k(f,c),k(c,g),k(f,y)},p(L,C){C&64&&l!==(l=L[6].LSOA11CD+"")&&H(t,l),C&64&&i!==(i=L[6].score+"")&&H(a,i),C&64&&d!==(d=L[6].rank.toLocaleString()+"")&&H(g,d)},d(L){L&&(p(e),p(r),p(f))}}}function Ii(o){let e,l;return e=new ae({props:{$$slots:{default:[Li,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Mi(o){let e,l,t,n;const s=[E(Be),{sourceLayer:Be},{paint:{"fill-color":ke(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":ne(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Ii]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=le(i,s[f]);e=new Ae({props:i});const a=[E(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=le(r,a[f]);return t=new we({props:r}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&7?oe(s,[u&0&&re(E(Be)),u&0&&{sourceLayer:Be},u&6&&{paint:{"fill-color":ke(["-",10,["get","decile"]],f[2],f[1]),"fill-opacity":ne(.5,.7)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}},s[4],s[5]]):{};u&128&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&1?oe(a,[u&0&&re(E(`${Be}-outline`)),u&0&&{sourceLayer:Be},a[2],u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(_(e.$$.fragment,f),_(t.$$.fragment,f),n=!0)},o(f){m(e.$$.fragment,f),m(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function Ni(o){let e,l,t,n,s;function i(r){o[5](r)}let a={name:Be,title:Bs,$$slots:{default:[Ti]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Be}.pmtiles`,$$slots:{default:[Mi]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&129&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&129&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Be="imd",Bs="Indices of Multiple Deprivation";function Oi(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,2,4,6,8,10],i=he(Be);V(o,i,f=>l(0,t=f));function a(f){t=f,i.set(t)}function r(f){t=f,i.set(t)}return[t,n,s,i,a,r]}class ji extends K{constructor(e){super(),X(this,e,Oi,Ni,Q,{})}}function Pi(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=T(),t=v(Us)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Ri(o){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Di(o){let e,l,t,n,s,i,a;return t=new se({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Ri]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=S("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of January 2024."),s=T(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(_(t.$$.fragment,r),_(i.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),m(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function qi(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Di]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ai(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[qi],default:[Pi]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function Fi(o){let e,l=o[5].name+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=n[5].name+"")&&H(t,l)},d(n){n&&p(e)}}}function Gi(o){let e,l;return e=new ae({props:{$$slots:{default:[Fi,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function zi(o){let e,l,t,n;const s=[E(mt),{paint:{"fill-color":o[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Gi]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=le(i,s[f]);e=new Ae({props:i}),e.$on("click",Ei);const a=[E(`${mt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=le(r,a[f]);return t=new we({props:r}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&3?oe(s,[u&0&&re(E(mt)),u&2&&{paint:{"fill-color":f[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}},s[3],s[4],s[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&3?oe(a,[u&0&&re(E(`${mt}-outline`)),u&2&&{paint:{"line-color":f[1],"line-width":2.5}},u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(_(e.$$.fragment,f),_(t.$$.fragment,f),n=!0)},o(f){m(e.$$.fragment,f),m(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function Hi(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:mt,title:Us,$$slots:{default:[Ai]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new Ht({props:{data:`${ge()}/v1/${mt}.geojson`,$$slots:{default:[zi]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let mt="local_authority_districts",Us="Local Authority Districts";function Ei(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD23CD}`,"_blank")}function Bi(o,e,l){let t,n=ee.local_authority_districts,s=he(mt);V(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class Ui extends K{constructor(e){super(),X(this,e,Bi,Hi,Q,{})}}function Wi(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=T(),t=v(Ws)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Yi(o){let e;return{c(){e=v(`local authority
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ji(o){let e;return{c(){e=v(`national park authorit
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Vi(o){let e;return{c(){e=v(`development corporation
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Qi(o){let e;return{c(){e=v("this map")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Zi(o){let e;return{c(){e=v(`planning.data.gov.uk
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ki(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y,L,C,O,P,D,j,M,N;return t=new se({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Yi]},$$scope:{ctx:o}}}),s=new se({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Ji]},$$scope:{ctx:o}}}),a=new se({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Vi]},$$scope:{ctx:o}}}),g=new se({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Qi]},$$scope:{ctx:o}}}),P=new se({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Zi]},$$scope:{ctx:o}}}),M=new Le({}),{c(){e=S("p"),l=v("LPAs may be a "),h(t.$$.fragment),n=v(", "),h(s.$$.fragment),i=v("y, or "),h(a.$$.fragment),r=v("."),f=T(),u=S("p"),c=S("strong"),d=v(`Note there are overlapping LPAs near Northhamptonshire. Only one
            authority name is shown when hovering. Use `),h(g.$$.fragment),y=v(" to get more details."),L=T(),C=S("p"),O=v("Data from ONS Geography via "),h(P.$$.fragment),D=v(", as of November 2022."),j=T(),h(M.$$.fragment)},m(R,I){$(R,e,I),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,i),b(a,e,null),k(e,r),$(R,f,I),$(R,u,I),k(u,c),k(c,d),b(g,c,null),k(c,y),$(R,L,I),$(R,C,I),k(C,O),b(P,C,null),k(C,D),$(R,j,I),b(M,R,I),N=!0},p(R,I){const q={};I&64&&(q.$$scope={dirty:I,ctx:R}),t.$set(q);const J={};I&64&&(J.$$scope={dirty:I,ctx:R}),s.$set(J);const x={};I&64&&(x.$$scope={dirty:I,ctx:R}),a.$set(x);const A={};I&64&&(A.$$scope={dirty:I,ctx:R}),g.$set(A);const Z={};I&64&&(Z.$$scope={dirty:I,ctx:R}),P.$set(Z)},i(R){N||(_(t.$$.fragment,R),_(s.$$.fragment,R),_(a.$$.fragment,R),_(g.$$.fragment,R),_(P.$$.fragment,R),_(M.$$.fragment,R),N=!0)},o(R){m(t.$$.fragment,R),m(s.$$.fragment,R),m(a.$$.fragment,R),m(g.$$.fragment,R),m(P.$$.fragment,R),m(M.$$.fragment,R),N=!1},d(R){R&&(p(e),p(f),p(u),p(L),p(C),p(j)),w(t),w(s),w(a),w(g),w(P),w(M,R)}}}function Xi(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Ki]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function xi(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[Xi],default:[Wi]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function ef(o){let e,l=o[5].name+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=n[5].name+"")&&H(t,l)},d(n){n&&p(e)}}}function tf(o){let e,l;return e=new ae({props:{$$slots:{default:[ef,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function nf(o){let e,l,t,n;const s=[E(Ue),{sourceLayer:Ue},{paint:{"fill-color":o[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[tf]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=le(i,s[f]);e=new Ae({props:i});const a=[E(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=le(r,a[f]);return t=new we({props:r}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&3?oe(s,[u&0&&re(E(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":f[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}},s[4],s[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&3?oe(a,[u&0&&re(E(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":f[1],"line-width":2.5}},u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(_(e.$$.fragment,f),_(t.$$.fragment,f),n=!0)},o(f){m(e.$$.fragment,f),m(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function lf(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:Ue,title:Ws,$$slots:{default:[xi]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Ue}.pmtiles`,$$slots:{default:[nf]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Ue="local_planning_authorities",Ws="Local Planning Authorities";function sf(o,e,l){let t,n=ee.local_planning_authorities,s=he(Ue);V(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class of extends K{constructor(e){super(),X(this,e,sf,lf,Q,{})}}function rf(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=T(),t=v(Ys)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function ff(o){let e;return{c(){e=v(`Ordnance Survey Boundary-Line
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function af(o){let e,l,t,n,s,i,a;return t=new se({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ff]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=S("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of May 2023."),s=T(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(_(t.$$.fragment,r),_(i.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),m(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function uf(o){let e,l,t;return l=new pe({props:{$$slots:{default:[af]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function cf(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[uf],default:[rf]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function $f(o){let e,l=o[5].Name+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=n[5].Name+"")&&H(t,l)},d(n){n&&p(e)}}}function pf(o){let e,l;return e=new ae({props:{$$slots:{default:[$f,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function _f(o){let e,l,t,n;const s=[E(We),{sourceLayer:We},{paint:{"fill-color":o[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[pf]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=le(i,s[f]);e=new Ae({props:i}),e.$on("click",gf);const a=[E(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=le(r,a[f]);return t=new we({props:r}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&3?oe(s,[u&0&&re(E(We)),u&0&&{sourceLayer:We},u&2&&{paint:{"fill-color":f[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}},s[4],s[5],s[6]]):{};u&64&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&3?oe(a,[u&0&&re(E(`${We}-outline`)),u&0&&{sourceLayer:We},u&2&&{paint:{"line-color":f[1],"line-width":5}},u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(_(e.$$.fragment,f),_(t.$$.fragment,f),n=!0)},o(f){m(e.$$.fragment,f),m(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function mf(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:We,title:Ys,$$slots:{default:[cf]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${We}.pmtiles`,$$slots:{default:[_f]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let We="parliamentary_constituencies",Ys="Parliamentary constituencies";function gf(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function df(o,e,l){let t,n=ee.parliamentary_constituencies,s=he(We);V(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class hf extends K{constructor(e){super(),X(this,e,df,mf,Q,{})}}function bf(o){let e;return{c(){e=v(Js)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function wf(o){let e;return{c(){e=v(`DEFRA
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function kf(o){let e,l,t,n,s,i,a,r,f;return t=new se({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[wf]},$$scope:{ctx:o}}}),r=new Le({}),{c(){e=S("p"),l=v("Most layers show air quality data from "),h(t.$$.fragment),n=v(`. The measurements are annual means, in units of
          Âµgm
          `),s=S("sup"),s.textContent="3",i=v(`
          . Note the particulate matter layers are not corrected for natural sources.`),a=T(),h(r.$$.fragment)},m(u,c){$(u,e,c),k(e,l),b(t,e,null),k(e,n),k(e,s),k(e,i),$(u,a,c),b(r,u,c),f=!0},p(u,c){const d={};c&8192&&(d.$$scope={dirty:c,ctx:u}),t.$set(d)},i(u){f||(_(t.$$.fragment,u),_(r.$$.fragment,u),f=!0)},o(u){m(t.$$.fragment,u),m(r.$$.fragment,u),f=!1},d(u){u&&(p(e),p(a)),w(t),w(r,u)}}}function vf(o){let e,l,t;return l=new pe({props:{$$slots:{default:[kf]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&8192&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function _l(o){let e,l,t,n,s=o[3](o[0].pollutant)+"",i,a,r,f,u,c,d,g,y,L,C,O,P;function D(M){o[6](M)}let j={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return o[0].pollutant!==void 0&&(j.value=o[0].pollutant),e=new Gt({props:j}),F.push(()=>G(e,"value",D)),{c(){h(e.$$.fragment),t=T(),n=S("p"),i=v(s),a=T(),r=S("div"),f=S("label"),u=v(`Opacity
        `),c=S("input"),d=T(),g=S("img"),B(c,"type","range"),B(c,"min","0"),B(c,"max","100"),tn(g.src,y=o[4](o[0].pollutant))||B(g,"src",y),B(g,"width",150),B(g,"alt",L=`Legend for ${o[0].pollutant} layer`)},m(M,N){b(e,M,N),$(M,t,N),$(M,n,N),k(n,i),$(M,a,N),$(M,r,N),k(r,f),k(f,u),k(f,c),Ve(c,o[0].opacity),$(M,d,N),$(M,g,N),C=!0,O||(P=[st(c,"change",o[7]),st(c,"input",o[7])],O=!0)},p(M,N){const R={};!l&&N&1&&(l=!0,R.value=M[0].pollutant,z(()=>l=!1)),e.$set(R),(!C||N&1)&&s!==(s=M[3](M[0].pollutant)+"")&&H(i,s),N&1&&Ve(c,M[0].opacity),(!C||N&1&&!tn(g.src,y=M[4](M[0].pollutant)))&&B(g,"src",y),(!C||N&1&&L!==(L=`Legend for ${M[0].pollutant} layer`))&&B(g,"alt",L)},i(M){C||(_(e.$$.fragment,M),C=!0)},o(M){m(e.$$.fragment,M),C=!1},d(M){M&&(p(t),p(n),p(a),p(r),p(d),p(g)),w(e,M),O=!1,Fs(P)}}}function yf(o){let e,l,t,n,s;function i(f){o[5](f)}let a={$$slots:{right:[vf],default:[bf]},$$scope:{ctx:o}};o[0].show!==void 0&&(a.checked=o[0].show),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0].show&&_l(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&8192&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0].show,z(()=>l=!1)),e.$set(c),f[0].show?r?(r.p(f,u),u&1&&_(r,1)):(r=_l(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Sf(o){let e,l;const t=[E(nn),{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new Bo({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(nn)),i&1&&{paint:{"raster-opacity":s[0].opacity/100}},i&1&&{layout:{visibility:s[0].show?"visible":"none"}}]):{};e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Cf(o){let e,l,t,n,s;function i(r){o[8](r)}let a={name:nn,title:Js,$$slots:{default:[yf]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new pr({props:{tiles:[o[1]],tileSize:256,$$slots:{default:[Sf]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&8193&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0].show,z(()=>l=!1)),e.$set(u);const c={};f&2&&(c.tiles=[r[1]]),f&8193&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let nn="pollution",Js="Pollution";function Tf(o){return o.show?`${o.pollutant}/${o.opacity}`:null}function Lf(o){let[e,l]=o.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function If(o,e,l){let t,n,s,a=Et(nn,{show:!1,pollutant:"PM25_viridis",opacity:50},Tf,Lf);V(o,a,C=>l(0,s=C));function r(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s.pollutant}/MapServer/WMSServer`}function f(C){return t[1]}function u(C){let O=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${r()}?bbox={bbox-epsg-3857}&${O}`}function c(C){let O=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${r()}?${O}`}function d(C){o.$$.not_equal(s.show,C)&&(s.show=C,a.set(s))}function g(C){o.$$.not_equal(s.pollutant,C)&&(s.pollutant=C,a.set(s))}function y(){s.opacity=Qt(this.value),a.set(s)}function L(C){o.$$.not_equal(s.show,C)&&(s.show=C,a.set(s))}return o.$$.update=()=>{o.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s.pollutant]),o.$$.dirty&1&&l(1,n=u(s.pollutant))},[s,n,a,f,c,d,g,y,L]}class Mf extends K{constructor(e){super(),X(this,e,If,Cf,Q,{})}}function Nf(o){let e;return{c(){e=v(Vs)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function Of(o){let e;return{c(){e=v(`DEFRA
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function jf(o){let e,l,t,n,s,i,a,r,f;return s=new se({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Of]},$$scope:{ctx:o}}}),r=new Le({}),{c(){e=S("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
          units of decibels for the 16-hour period between 7am and 11pm. Only
          roads in areas with at least 100,000 people are included.`,l=T(),t=S("p"),n=v("Data from June 2019, produced by "),h(s.$$.fragment),i=v(". See there for methodology details"),a=T(),h(r.$$.fragment)},m(u,c){$(u,e,c),$(u,l,c),$(u,t,c),k(t,n),b(s,t,null),k(t,i),$(u,a,c),b(r,u,c),f=!0},p(u,c){const d={};c&64&&(d.$$scope={dirty:c,ctx:u}),s.$set(d)},i(u){f||(_(s.$$.fragment,u),_(r.$$.fragment,u),f=!0)},o(u){m(s.$$.fragment,u),m(r.$$.fragment,u),f=!1},d(u){u&&(p(e),p(l),p(t),p(a)),w(s),w(r,u)}}}function Pf(o){let e,l,t;return l=new pe({props:{$$slots:{default:[jf]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ml(o){let e,l;return e=new Fe({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Rf(o){let e,l,t,n,s;function i(f){o[3](f)}let a={$$slots:{right:[Pf],default:[Nf]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&ml(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&64&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&_(r,1)):(r=ml(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Df(o){let e,l=o[5].noiseclass+"",t,n,s=gl(o[5].noiseclass)+"",i,a;return{c(){e=S("p"),t=v(l),n=v(" dB ("),i=v(s),a=v(")")},m(r,f){$(r,e,f),k(e,t),k(e,n),k(e,i),k(e,a)},p(r,f){f&32&&l!==(l=r[5].noiseclass+"")&&H(t,l),f&32&&s!==(s=gl(r[5].noiseclass)+"")&&H(i,s)},d(r){r&&p(e)}}}function qf(o){let e,l;return e=new ae({props:{$$slots:{default:[Df,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Af(o){let e,l;const t=[E(gt),{sourceLayer:gt},{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":ne(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[qf]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new Ae({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&3?oe(t,[i&0&&re(E(gt)),i&0&&{sourceLayer:gt},i&2&&{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":s[1][0],"60.0-64.9":s[1][0],"65.0-69.9":s[1][1],"70.0-74.9":s[1][1],">=75.0":s[1][2]},"red"),"fill-opacity":ne(.5,.8)}},i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ff(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:gt,title:Vs,$$slots:{default:[Rf]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${gt}.pmtiles`,$$slots:{default:[Af]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let gt="road_noise",Vs="Road noise";function gl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function Gf(o,e,l){let t,n=[ee.sequential_low_to_high[0],ee.sequential_low_to_high[2],ee.sequential_low_to_high[4]],s=he(gt);V(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class zf extends K{constructor(e){super(),X(this,e,Gf,Ff,Q,{})}}function Hf(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=T(),t=v(Qs)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Ef(o){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Bf(o){let e,l,t,n,s,i,a;return t=new se({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ef]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=S("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of May 2023."),s=T(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(_(t.$$.fragment,r),_(i.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),m(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function Uf(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Bf]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Wf(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[Uf],default:[Hf]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function Yf(o){let e,l=o[5].name+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=n[5].name+"")&&H(t,l)},d(n){n&&p(e)}}}function Jf(o){let e,l;return e=new ae({props:{$$slots:{default:[Yf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Vf(o){let e,l,t,n;const s=[E(Ye),{sourceLayer:Ye},{paint:{"fill-color":o[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Jf]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=le(i,s[f]);e=new Ae({props:i}),e.$on("click",Zf);const a=[E(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=le(r,a[f]);return t=new we({props:r}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&3?oe(s,[u&0&&re(E(Ye)),u&0&&{sourceLayer:Ye},u&2&&{paint:{"fill-color":f[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}},s[4],s[5],s[6]]):{};u&64&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&3?oe(a,[u&0&&re(E(`${Ye}-outline`)),u&0&&{sourceLayer:Ye},u&2&&{paint:{"line-color":f[1],"line-width":2.5}},u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(_(e.$$.fragment,f),_(t.$$.fragment,f),n=!0)},o(f){m(e.$$.fragment,f),m(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function Qf(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:Ye,title:Qs,$$slots:{default:[Wf]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Ye}.pmtiles`,$$slots:{default:[Vf]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Ye="wards",Qs="Wards";function Zf(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Kf(o,e,l){let t,n=ee.wards,s=he(Ye);V(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class Xf extends K{constructor(e){super(),X(this,e,Kf,Qf,Q,{})}}function xf(o){let e;return{c(){e=v("Open Data Commons Open Database License")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ea(o){let e,l,t,n;return t=new se({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[xf]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=v("License: "),h(t.$$.fragment)},m(s,i){$(s,e,i),k(e,l),b(t,e,null),n=!0},p(s,[i]){const a={};i&1&&(a.$$scope={dirty:i,ctx:s}),t.$set(a)},i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){s&&p(e),w(t)}}}class xe extends K{constructor(e){super(),X(this,e,null,ea,Q,{})}}function ta(o){let e,l,t,n;return e=new Te({props:{color:ee.bus_route_with_lane}}),{c(){h(e.$$.fragment),l=T(),t=v(Zs)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function na(o){let e;return{c(){e=v(`GTFS
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function la(o){let e,l,t,n,s,i,a,r,f;return s=new se({props:{href:"https://gtfs.org",$$slots:{default:[na]},$$scope:{ctx:o}}}),r=new xe({}),{c(){e=S("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It
          also shows whether the road has a bus lane or not.`,l=T(),t=S("p"),n=v("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(s.$$.fragment),i=v(`, and doesn't include which routes are run or the
          frequency of service.`),a=T(),h(r.$$.fragment)},m(u,c){$(u,e,c),$(u,l,c),$(u,t,c),k(t,n),b(s,t,null),k(t,i),$(u,a,c),b(r,u,c),f=!0},p(u,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),s.$set(d)},i(u){f||(_(s.$$.fragment,u),_(r.$$.fragment,u),f=!0)},o(u){m(s.$$.fragment,u),m(r.$$.fragment,u),f=!1},d(u){u&&(p(e),p(l),p(t),p(a)),w(s),w(r,u)}}}function sa(o){let e,l,t;return l=new pe({props:{$$slots:{default:[la]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&32&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function oa(o){let e,l,t;function n(i){o[2](i)}let s={$$slots:{right:[sa],default:[ta]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&32&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function ra(o){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ia(o){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function fa(o){let e;function l(s,i){return s[4].has_bus_lane?ia:ra}let t=l(o),n=t(o);return{c(){n.c(),e=ue()},m(s,i){n.m(s,i),$(s,e,i)},p(s,i){t!==(t=l(s))&&(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function aa(o){let e,l;return e=new ae({props:{$$slots:{default:[fa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ua(o){let e,l;const t=[E(dt),{sourceLayer:dt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ee.bus_route_with_lane,ee.bus_route_without_lane],"line-width":5,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[aa]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new we({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(dt)),i&0&&{sourceLayer:dt},t[2],i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&32&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ca(o){let e,l,t,n,s;function i(r){o[3](r)}let a={name:dt,title:Zs,$$slots:{default:[oa]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${dt}.pmtiles`,$$slots:{default:[ua]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&33&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let dt="bus_routes",Zs="Bus routes";function $a(o,e,l){let t,n=he(dt);V(o,n,a=>l(0,t=a));function s(a){t=a,n.set(t)}function i(a){t=a,n.set(t)}return[t,n,s,i]}class pa extends K{constructor(e){super(),X(this,e,$a,ca,Q,{})}}function dl(o){const e=Ca(o[10]);o[11]=e[0],o[12]=e[1],o[13]=e[2]}function hl(o,e,l){const t=o.slice();return t[11]=e[l][0],t[14]=e[l][1],t[15]=e[l][2],t[16]=e,t[17]=l,t}function _a(o){let e;return{c(){e=v(Ks)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function ma(o){let e,l,t,n,s,i,a,r;return a=new xe({}),{c(){e=S("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap
          (as of 15 August 2023).`,l=T(),t=S("ul"),t.innerHTML=`<li><b>Separated tracks</b>
            include fully or partly segregated cycletracks alongside a carriageway,
            stepped cycletracks, and tracks off the carriageway entirely. They&#39;re
            also separated from foot traffic.</li> <li><b>Unprotected lanes</b>
            are mandatory or advisory lanes on the carriageway, without any physical
            protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
            paths are split between cycle and foot traffic, and are separated from
            motor traffic somehow. There can be segregation between cyclists and
            pedestrians or not.</li>`,n=T(),s=S("p"),s.textContent=`Note there are many known limitations with this layer. Data in
          OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
          processing is also imperfect. You can click a segment to see full
          OpenStreetMap data. Please do report issues with the classification or
          data.`,i=T(),h(a.$$.fragment)},m(f,u){$(f,e,u),$(f,l,u),$(f,t,u),$(f,n,u),$(f,s,u),$(f,i,u),b(a,f,u),r=!0},p:W,i(f){r||(_(a.$$.fragment,f),r=!0)},o(f){m(a.$$.fragment,f),r=!1},d(f){f&&(p(e),p(l),p(t),p(n),p(s),p(i)),w(a,f)}}}function ga(o){let e,l,t;return l=new pe({props:{$$slots:{default:[ma]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&262144&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function bl(o){let e,l,t;return l=new Xe({props:{$$slots:{default:[ha]},$$scope:{ctx:o}}}),{c(){e=S("div"),h(l.$$.fragment),me(e,"border","1px solid black"),me(e,"padding","8px")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&262145&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function da(o){let e,l,t=o[14]+"",n,s,i;return e=new Te({props:{color:o[15]}}),{c(){h(e.$$.fragment),l=T(),n=v(t),s=T()},m(a,r){b(e,a,r),$(a,l,r),$(a,n,r),$(a,s,r),i=!0},p:W,i(a){i||(_(e.$$.fragment,a),i=!0)},o(a){m(e.$$.fragment,a),i=!1},d(a){a&&(p(l),p(n),p(s)),w(e,a)}}}function wl(o){let e,l,t;function n(i){o[5](i,o[11])}let s={$$slots:{default:[da]},$$scope:{ctx:o}};return o[0][o[11]]!==void 0&&(s.checked=o[0][o[11]]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){o=i;const r={};a&262144&&(r.$$scope={dirty:a,ctx:o}),!l&&a&5&&(l=!0,r.checked=o[0][o[11]],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function ha(o){let e,l,t=ye(o[2]),n=[];for(let i=0;i<t.length;i+=1)n[i]=wl(hl(o,t,i));const s=i=>m(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ue()},m(i,a){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(i,a);$(i,e,a),l=!0},p(i,a){if(a&5){t=ye(i[2]);let r;for(r=0;r<t.length;r+=1){const f=hl(i,t,r);n[r]?(n[r].p(f,a),_(n[r],1)):(n[r]=wl(f),n[r].c(),_(n[r],1),n[r].m(e.parentNode,e))}for(ce(),r=t.length;r<n.length;r+=1)s(r);$e()}},i(i){if(!l){for(let a=0;a<t.length;a+=1)_(n[a]);l=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)m(n[a]);l=!1},d(i){i&&p(e),Ze(n,i)}}}function ba(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[ga],default:[_a]},$$scope:{ctx:o}};o[0].show!==void 0&&(a.checked=o[0].show),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0].show&&bl(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&262144&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0].show,z(()=>l=!1)),e.$set(c),f[0].show?r?(r.p(f,u),u&1&&_(r,1)):(r=bl(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function wa(o){dl(o);let e,l=o[11]+"",t,n,s,i,a,r=o[12]+"",f,u,c,d,g=o[13]+"",y;return{c(){e=S("h2"),t=v(l),n=T(),s=S("p"),i=v("Direction: "),a=S("b"),f=T(),u=S("p"),c=v("Width: "),d=S("b"),y=v(g)},m(L,C){$(L,e,C),k(e,t),$(L,n,C),$(L,s,C),k(s,i),k(s,a),a.innerHTML=r,$(L,f,C),$(L,u,C),k(u,c),k(u,d),k(d,y)},p(L,C){dl(L),C&1024&&l!==(l=L[11]+"")&&H(t,l),C&1024&&r!==(r=L[12]+"")&&(a.innerHTML=r),C&1024&&g!==(g=L[13]+"")&&H(y,g)},d(L){L&&(p(e),p(n),p(s),p(f),p(u))}}}function ka(o){let e,l;return e=new ae({props:{$$slots:{default:[wa,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&263168&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function va(o){let e,l;const t=[E(ht),{sourceLayer:ht},{paint:{"line-color":Ke(["get","kind"],{track:ee.cycle_paths.track,lane:ee.cycle_paths.lane,shared_use_segregated:ee.cycle_paths.shared_use_segregated,shared_use_unsegregated:ee.cycle_paths.shared_use_unsegregated},"red"),"line-width":qe,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[ka]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new we({props:n}),e.$on("click",Ta),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&9?oe(t,[i&0&&re(E(ht)),i&0&&{sourceLayer:ht},t[2],i&1&&{layout:{visibility:s[0].show?"visible":"none"}},i&9&&{filter:s[3](s[0])},t[5],t[6],t[7]]):{};i&262144&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ya(o){let e,l,t,n,s;function i(r){o[6](r)}let a={name:ht,title:Ks,$$slots:{default:[ba]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${ht}.pmtiles`,$$slots:{default:[va]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&262145&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0].show,z(()=>l=!1)),e.$set(u);const c={};f&262145&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let ht="cycle_paths",Ks="Cycle paths";function Sa(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function Ca(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function Ta(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function La(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],s={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function i(g){return g.show?n.filter(y=>g[y]).join(","):null}let a=Et(ht,s,i,Sa);V(o,a,g=>l(0,t=g));let r=[["track","Separated tracks",ee.cycle_paths.track],["lane","Unprotected lanes",ee.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",ee.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",ee.cycle_paths.shared_use_unsegregated]];function f(g){let y=n.filter(L=>g[L]);return["in",["get","kind"],["literal",y]]}function u(g){o.$$.not_equal(t.show,g)&&(t.show=g,a.set(t))}function c(g,y){o.$$.not_equal(t[y],g)&&(t[y]=g,a.set(t))}function d(g){o.$$.not_equal(t.show,g)&&(t.show=g,a.set(t))}return[t,a,r,f,u,c,d]}class Ia extends K{constructor(e){super(),X(this,e,La,ya,Q,{})}}function Ma(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=T(),t=v(Xs)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Na(o){let e;return{c(){e=v(`Major Road Network
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Oa(o){let e,l,t,n,s,i,a;return t=new se({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Na]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=S("p"),l=v("Data from the "),h(t.$$.fragment),n=v(", as of September 2021."),s=T(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(_(t.$$.fragment,r),_(i.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),m(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function ja(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Oa]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Pa(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[ja],default:[Ma]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function Ra(o){let e,l=(o[5].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=(n[5].name??"Unknown MRN road")+"")&&H(t,l)},d(n){n&&p(e)}}}function Da(o){let e,l;return e=new ae({props:{$$slots:{default:[Ra,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function qa(o){let e,l;const t=[E(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Da]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new we({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&3?oe(t,[i&0&&re(E(bt)),i&0&&{sourceLayer:bt},t[2],t[3],i&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":ne(1,.5)}},i&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};i&64&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Aa(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:bt,title:Xs,$$slots:{default:[Pa]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${bt}.pmtiles`,$$slots:{default:[qa]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let bt="mrn",Xs="Major Road Network";function Fa(o,e,l){let t,n=ee.mrn,s=he(bt);V(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class Ga extends K{constructor(e){super(),X(this,e,Fa,Aa,Q,{})}}function za(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=T(),t=v(xs)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Ha(o){let e;return{c(){e=v(`OS Open Roads
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ea(o){let e,l,t,n,s,i,a;return t=new se({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Ha]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=S("p"),l=v("Data from "),h(t.$$.fragment),n=v(`, as of December 2023. The SRN is equivalent to trunk
          roads.`),s=T(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(_(t.$$.fragment,r),_(i.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),m(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function Ba(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Ea]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ua(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[Ba],default:[za]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function Wa(o){let e,l=(o[5].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=(n[5].name??"Unknown SRN road")+"")&&H(t,l)},d(n){n&&p(e)}}}function Ya(o){let e,l;return e=new ae({props:{$$slots:{default:[Wa,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ja(o){let e,l;const t=[E(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Ya]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new we({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&3?oe(t,[i&0&&re(E(wt)),i&0&&{sourceLayer:wt},t[2],t[3],i&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":ne(1,.5)}},i&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};i&64&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Va(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:wt,title:xs,$$slots:{default:[Ua]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${wt}.pmtiles`,$$slots:{default:[Ja]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let wt="srn",xs="Strategic Road Network";function Qa(o,e,l){let t,n=ee.srn,s=he(wt);V(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class Za extends K{constructor(e){super(),X(this,e,Qa,Va,Q,{})}}function Ka(o){let e,l,t,n;return e=new Te({props:{color:o[1]}}),{c(){h(e.$$.fragment),l=T(),t=v(eo)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Xa(o){let e;return{c(){e=v(`National Cycle Network
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function xa(o){let e,l,t,n,s,i,a;return t=new se({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Xa]},$$scope:{ctx:o}}}),i=new Le({}),{c(){e=S("p"),l=v("Data from Sustrans about the "),h(t.$$.fragment),n=v(", downloaded on 22/01/2024."),s=T(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(_(t.$$.fragment,r),_(i.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),m(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function eu(o){let e,l,t;return l=new pe({props:{$$slots:{default:[xa]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function tu(o){let e,l,t;function n(i){o[3](i)}let s={$$slots:{right:[eu],default:[Ka]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&64&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function kl(o){let e,l,t,n=o[5].Desc_+"",s;return{c(){e=S("li"),l=v("Description: "),t=S("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].Desc_+"")&&H(s,n)},d(i){i&&p(e)}}}function vl(o){let e,l,t,n=o[5].Greenway+"",s;return{c(){e=S("li"),l=v("Is greenway: "),t=S("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].Greenway+"")&&H(s,n)},d(i){i&&p(e)}}}function yl(o){let e,l,t,n=o[5].RouteType+"",s;return{c(){e=S("li"),l=v("Route type: "),t=S("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].RouteType+"")&&H(s,n)},d(i){i&&p(e)}}}function Sl(o){let e,l,t,n=o[5].RouteNo+"",s;return{c(){e=S("li"),l=v("Route number: "),t=S("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].RouteNo+"")&&H(s,n)},d(i){i&&p(e)}}}function Cl(o){let e,l,t,n=o[5].RouteCat+"",s;return{c(){e=S("li"),l=v("Route Category: "),t=S("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].RouteCat+"")&&H(s,n)},d(i){i&&p(e)}}}function Tl(o){let e,l,t,n=o[5].OpenStatus+"",s;return{c(){e=S("li"),l=v("Open Status: "),t=S("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].OpenStatus+"")&&H(s,n)},d(i){i&&p(e)}}}function Ll(o){let e,l,t,n=o[5].Surface+"",s;return{c(){e=S("li"),l=v("Surface: "),t=S("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].Surface+"")&&H(s,n)},d(i){i&&p(e)}}}function Il(o){let e,l,t,n=o[5].Quality+"",s;return{c(){e=S("li"),l=v("Quality: "),t=S("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].Quality+"")&&H(s,n)},d(i){i&&p(e)}}}function Ml(o){let e,l,t,n=o[5].RoadClass+"",s;return{c(){e=S("li"),l=v("Road Class: "),t=S("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&32&&n!==(n=i[5].RoadClass+"")&&H(s,n)},d(i){i&&p(e)}}}function nu(o){let e,l,t,n,s,i,a,r,f,u=o[5].Desc_&&kl(o),c=o[5].Greenway&&vl(o),d=o[5].RouteType&&yl(o),g=o[5].RouteNo&&Sl(o),y=o[5].RouteCat&&Cl(o),L=o[5].OpenStatus&&Tl(o),C=o[5].Surface&&Ll(o),O=o[5].Quality&&Il(o),P=o[5].RoadClass&&Ml(o);return{c(){e=S("ul"),u&&u.c(),l=T(),c&&c.c(),t=T(),d&&d.c(),n=T(),g&&g.c(),s=T(),y&&y.c(),i=T(),L&&L.c(),a=T(),C&&C.c(),r=T(),O&&O.c(),f=T(),P&&P.c()},m(D,j){$(D,e,j),u&&u.m(e,null),k(e,l),c&&c.m(e,null),k(e,t),d&&d.m(e,null),k(e,n),g&&g.m(e,null),k(e,s),y&&y.m(e,null),k(e,i),L&&L.m(e,null),k(e,a),C&&C.m(e,null),k(e,r),O&&O.m(e,null),k(e,f),P&&P.m(e,null)},p(D,j){D[5].Desc_?u?u.p(D,j):(u=kl(D),u.c(),u.m(e,l)):u&&(u.d(1),u=null),D[5].Greenway?c?c.p(D,j):(c=vl(D),c.c(),c.m(e,t)):c&&(c.d(1),c=null),D[5].RouteType?d?d.p(D,j):(d=yl(D),d.c(),d.m(e,n)):d&&(d.d(1),d=null),D[5].RouteNo?g?g.p(D,j):(g=Sl(D),g.c(),g.m(e,s)):g&&(g.d(1),g=null),D[5].RouteCat?y?y.p(D,j):(y=Cl(D),y.c(),y.m(e,i)):y&&(y.d(1),y=null),D[5].OpenStatus?L?L.p(D,j):(L=Tl(D),L.c(),L.m(e,a)):L&&(L.d(1),L=null),D[5].Surface?C?C.p(D,j):(C=Ll(D),C.c(),C.m(e,r)):C&&(C.d(1),C=null),D[5].Quality?O?O.p(D,j):(O=Il(D),O.c(),O.m(e,f)):O&&(O.d(1),O=null),D[5].RoadClass?P?P.p(D,j):(P=Ml(D),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},d(D){D&&p(e),u&&u.d(),c&&c.d(),d&&d.d(),g&&g.d(),y&&y.d(),L&&L.d(),C&&C.d(),O&&O.d(),P&&P.d()}}}function lu(o){let e,l;return e=new ae({props:{$$slots:{default:[nu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function su(o){let e,l;const t=[E(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[lu]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new we({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&3?oe(t,[i&0&&re(E(kt)),i&0&&{sourceLayer:kt},t[2],t[3],i&2&&{paint:{"line-color":s[1],"line-width":4,"line-opacity":ne(1,.5)}},i&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};i&64&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ou(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:kt,title:eo,$$slots:{default:[tu]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${kt}.pmtiles`,$$slots:{default:[su]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let kt="national_cycle_network",eo="National Cycle Network";function ru(o,e,l){let t,n=ee.national_cycle_network,s=he(kt);V(o,s,r=>l(0,t=r));function i(r){t=r,s.set(t)}function a(r){t=r,s.set(t)}return[t,n,s,i,a]}class iu extends K{constructor(e){super(),X(this,e,ru,ou,Q,{})}}function Nl(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function fu(o){let e;return{c(){e=v(to)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function au(o){let e;return{c(){e=v(`Public Sector Geospatial Agreement
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function uu(o){let e,l,t,n,s,i,a,r,f,u,c;return f=new se({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[au]},$$scope:{ctx:o}}}),{c(){e=S("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
          Ordnance Survey. Because the shape of pavement may vary along a road,
          both average and minimum are reported. Measurements may be available
          for the left side of the road, the right, or both. The coloring shows
          the larger of the two average widths, and the line thickness has no
          meaning. Hover over a line to see if there's pavement on one or both
          sides of the road. (You won't be able to distinguish left and right
          though; use the OS Road basemap instead.)`,l=T(),t=S("p"),t.textContent=`Note these measurements are difficult to interpret near dual
          carriageways (shown as parallel lines).`,n=T(),s=S("p"),s.textContent="Data valid as of 1 January, 2024",i=T(),a=S("p"),r=v(`License: Contains OS data Â© Crown copyright and database right
          2023. Made available under the `),h(f.$$.fragment),u=v(".")},m(d,g){$(d,e,g),$(d,l,g),$(d,t,g),$(d,n,g),$(d,s,g),$(d,i,g),$(d,a,g),k(a,r),b(f,a,null),k(a,u),c=!0},p(d,g){const y={};g&4096&&(y.$$scope={dirty:g,ctx:d}),f.$set(y)},i(d){c||(_(f.$$.fragment,d),c=!0)},o(d){m(f.$$.fragment,d),c=!1},d(d){d&&(p(e),p(l),p(t),p(n),p(s),p(i),p(a)),w(f)}}}function cu(o){let e,l,t;return l=new pe({props:{$$slots:{default:[uu]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&4096&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ol(o){let e,l;return e=new Fe({props:{colorScale:o[1],limits:o[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function $u(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[cu],default:[fu]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&Ol(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&4096&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&_(r,1)):(r=Ol(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function pu(o){let e,l,t=ln(o[6].angle+o[9])+"",n;return{c(){e=S("p"),l=new Rt(!1),n=v(` side of the road: no pavement
          `),l.a=n},m(s,i){$(s,e,i),l.m(t,e),k(e,n)},p(s,i){i&64&&t!==(t=ln(s[6].angle+s[9])+"")&&l.p(t)},d(s){s&&p(e)}}}function _u(o){let e,l,t=ln(o[6].angle+o[9])+"",n,s,i=o[7]+"",a,r,f,u=o[8]+"",c,d;return{c(){e=S("p"),l=new Rt(!1),n=v(` side of the road:
            `),s=S("b"),a=v(i),r=v(`
            m average,
            `),f=S("b"),c=v(u),d=v(`
            m minimum
          `),l.a=n},m(g,y){$(g,e,y),l.m(t,e),k(e,n),k(e,s),k(s,a),k(e,r),k(e,f),k(f,c),k(e,d)},p(g,y){y&64&&t!==(t=ln(g[6].angle+g[9])+"")&&l.p(t),y&64&&i!==(i=g[7]+"")&&H(a,i),y&64&&u!==(u=g[8]+"")&&H(c,u)},d(g){g&&p(e)}}}function jl(o){let e;function l(s,i){return s[7]?_u:pu}let t=l(o),n=t(o);return{c(){n.c(),e=ue()},m(s,i){n.m(s,i),$(s,e,i)},p(s,i){t===(t=l(s))&&n?n.p(s,i):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function mu(o){let e,l=ye([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=jl(Nl(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ue()},m(n,s){for(let i=0;i<2;i+=1)t[i]&&t[i].m(n,s);$(n,e,s)},p(n,s){if(s&64){l=ye([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let i;for(i=0;i<2;i+=1){const a=Nl(n,l,i);t[i]?t[i].p(a,s):(t[i]=jl(a),t[i].c(),t[i].m(e.parentNode,e))}for(;i<2;i+=1)t[i].d(1)}},d(n){n&&p(e),Ze(t,n)}}}function gu(o){let e,l;return e=new ae({props:{openOn:"hover",$$slots:{default:[mu,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&4160&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function du(o){let e,l;const t=[E(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":qe,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[gu]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new we({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E(vt)),i&0&&{sourceLayer:vt},t[2],t[3],i&6&&{paint:{"line-color":ke(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],s[2],s[1]),"line-width":qe,"line-opacity":ne(1,.5)}},i&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};i&4096&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function hu(o){let e,l,t,n,s;function i(r){o[5](r)}let a={name:vt,title:to,$$slots:{default:[$u]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${Kt()}/v1/${vt}.pmtiles`,$$slots:{default:[du]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&4097&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&4097&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let vt="pavement_widths",to="OS Pavement widths";function bu(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function ln(o){return`${bu(o)} <span style="display: inline-block; rotate: ${o}deg">â¬†</span>`}function wu(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,2,4,6,8,13],i=he(vt);V(o,i,f=>l(0,t=f));function a(f){t=f,i.set(t)}function r(f){t=f,i.set(t)}return[t,n,s,i,a,r]}class ku extends K{constructor(e){super(),X(this,e,wu,hu,Q,{})}}function vu(o){let e;return{c(){e=v(no)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function yu(o){let e;return{c(){e=v("the PCT website")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Su(o){let e;return{c(){e=v("2017 journal article")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Cu(o){let e,l,t,n,s,i,a,r,f,u,c;return a=new se({props:{href:"https://www.pct.bike",$$slots:{default:[yu]},$$scope:{ctx:o}}}),f=new se({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Su]},$$scope:{ctx:o}}}),{c(){e=S("p"),e.textContent=`The PCT shows major links on the transport network on which there is
          high latent demand for cycling under scenarios of change, based on the
          "fastest" routes from CycleStreets. Counts approximate daily rush hour
          traffic levels.`,l=T(),t=S("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
          Please use this layer with caution.`,n=T(),s=S("p"),i=v("See "),h(a.$$.fragment),r=v(" and "),h(f.$$.fragment),u=v(" for details on methodology and data sources.")},m(d,g){$(d,e,g),$(d,l,g),$(d,t,g),$(d,n,g),$(d,s,g),k(s,i),b(a,s,null),k(s,r),b(f,s,null),k(s,u),c=!0},p(d,g){const y={};g&2048&&(y.$$scope={dirty:g,ctx:d}),a.$set(y);const L={};g&2048&&(L.$$scope={dirty:g,ctx:d}),f.$set(L)},i(d){c||(_(a.$$.fragment,d),_(f.$$.fragment,d),c=!0)},o(d){m(a.$$.fragment,d),m(f.$$.fragment,d),c=!1},d(d){d&&(p(e),p(l),p(t),p(n),p(s)),w(a),w(f)}}}function Tu(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Cu]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&2048&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Pl(o){let e,l,t,n,s,i,a,r;e=new Fe({props:{colorScale:o[1],limits:o[2]}});function f(g){o[6](g)}let u={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(u.value=o[0].tripPurpose),t=new Sn({props:u}),F.push(()=>G(t,"value",f));function c(g){o[7](g)}let d={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(d.value=o[0].scenario),i=new Gt({props:d}),F.push(()=>G(i,"value",c)),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),s=T(),h(i.$$.fragment)},m(g,y){b(e,g,y),$(g,l,y),b(t,g,y),$(g,s,y),b(i,g,y),r=!0},p(g,y){const L={};!n&&y&1&&(n=!0,L.value=g[0].tripPurpose,z(()=>n=!1)),t.$set(L);const C={};!a&&y&1&&(a=!0,C.value=g[0].scenario,z(()=>a=!1)),i.$set(C)},i(g){r||(_(e.$$.fragment,g),_(t.$$.fragment,g),_(i.$$.fragment,g),r=!0)},o(g){m(e.$$.fragment,g),m(t.$$.fragment,g),m(i.$$.fragment,g),r=!1},d(g){g&&(p(l),p(s)),w(e,g),w(t,g),w(i,g)}}}function Lu(o){let e,l,t,n,s;function i(f){o[5](f)}let a={$$slots:{right:[Tu],default:[vu]},$$scope:{ctx:o}};o[0].show!==void 0&&(a.checked=o[0].show),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0].show&&Pl(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&2048&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0].show,z(()=>l=!1)),e.$set(c),f[0].show?r?(r.p(f,u),u&1&&_(r,1)):(r=Pl(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Iu(o){let e,l=o[4](o[10])+"",t;return{c(){e=new Rt(!1),t=ue(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&1024&&l!==(l=n[4](n[10])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function Mu(o){let e,l;return e=new ae({props:{$$slots:{default:[Iu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&3072&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Nu(o){let e,l;const t=[E(lt),{sourceLayer:lt},{paint:{"line-color":ke(["get",o[0].scenario],o[2],o[1]),"line-width":qe,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==lt?"visible":"none"}}];let n={$$slots:{default:[Mu]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new we({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E(lt)),i&0&&{sourceLayer:lt},i&7&&{paint:{"line-color":ke(["get",s[0].scenario],s[2],s[1]),"line-width":qe,"line-opacity":ne(1,.5)}},i&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==lt?"visible":"none"}}]):{};i&2048&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ou(o){let e,l=o[4](o[10])+"",t;return{c(){e=new Rt(!1),t=ue(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&1024&&l!==(l=n[4](n[10])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function ju(o){let e,l;return e=new ae({props:{$$slots:{default:[Ou,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&3072&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Pu(o){let e,l;const t=[E(pt),{sourceLayer:pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",o[0].scenario],o[2],o[1]),"line-width":qe,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==pt?"visible":"none"}}];let n={$$slots:{default:[ju]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new we({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E(pt)),i&0&&{sourceLayer:pt},t[2],t[3],i&7&&{paint:{"line-color":ke(["get",s[0].scenario],s[2],s[1]),"line-width":qe,"line-opacity":ne(1,.5)}},i&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==pt?"visible":"none"}}]):{};i&2048&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ru(o){let e,l,t,n,s,i,a;function r(u){o[8](u)}let f={name:"pct",title:no,$$slots:{default:[Lu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new _e({props:f}),F.push(()=>G(e,"show",r)),n=new de({props:{url:`pmtiles://${ge()}/v1/${lt}.pmtiles`,$$slots:{default:[Nu]},$$scope:{ctx:o}}}),i=new de({props:{url:`pmtiles://${ge()}/v1/${pt}.pmtiles`,$$slots:{default:[Pu]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),s=T(),h(i.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),b(n,u,c),$(u,s,c),b(i,u,c),a=!0},p(u,[c]){const d={};c&2049&&(d.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,d.show=u[0].show,z(()=>l=!1)),e.$set(d);const g={};c&2049&&(g.$$scope={dirty:c,ctx:u}),n.$set(g);const y={};c&2049&&(y.$$scope={dirty:c,ctx:u}),i.$set(y)},i(u){a||(_(e.$$.fragment,u),_(n.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){m(e.$$.fragment,u),m(n.$$.fragment,u),m(i.$$.fragment,u),a=!1},d(u){u&&(p(t),p(s)),w(e,u),w(n,u),w(i,u)}}}let lt="pct_commute",pt="pct_school",no="Propensity to Cycle Tool";function Du(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function qu(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function Au(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,50,100,500,1e3,2e3],a=Et("pct",{show:!1,tripPurpose:lt,scenario:"baseline"},Du,qu);V(o,a,g=>l(0,t=g));function r(g){let y=g.baseline,L=g.gov_target,C=g.go_dutch,O=`<h2>Trip purpose: ${t.tripPurpose==lt?"commuting":"school"}</h2>`;if(O+=`<p>Baseline (2011): <b>${y.toLocaleString()}</b></p>`,y==0)O+=`<p>Government target (2025): <b>${L.toLocaleString()}</b></p>`,O+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let P=(L/y).toFixed(1),D=(C/y).toFixed(1);O+=`<p>Government target (2025): ${L.toLocaleString()} (<b>${P}x</b> of baseline)</p>`,O+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return O}function f(g){o.$$.not_equal(t.show,g)&&(t.show=g,a.set(t))}function u(g){o.$$.not_equal(t.tripPurpose,g)&&(t.tripPurpose=g,a.set(t))}function c(g){o.$$.not_equal(t.scenario,g)&&(t.scenario=g,a.set(t))}function d(g){o.$$.not_equal(t.show,g)&&(t.show=g,a.set(t))}return[t,n,s,a,r,f,u,c,d]}class Fu extends K{constructor(e){super(),X(this,e,Au,Ru,Q,{})}}function Gu(o){let e;return{c(){e=v(lo)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function zu(o){let e;return{c(){e=v("Basemap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Hu(o){let e;return{c(){e=v(`Public Sector Geospatial Agreement
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Eu(o){let e,l,t,n,s,i,a,r,f,u,c,d;return t=new se({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[zu]},$$scope:{ctx:o}}}),u=new se({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Hu]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=v("The average speed data is collected over a six-month period by "),h(t.$$.fragment),n=v(` from 135,000 vehicle telematic systems and provided through
          Ordnance Survey. The averages are grouped by different time periods for
          weekdays and weekends. This map shows the highest average.`),s=T(),i=S("p"),i.textContent="Data valid as of 1 September, 2023",a=T(),r=S("p"),f=v(`License: Contains OS data Â© Crown copyright and database right
          2023. Made available under the `),h(u.$$.fragment),c=v(".")},m(g,y){$(g,e,y),k(e,l),b(t,e,null),k(e,n),$(g,s,y),$(g,i,y),$(g,a,y),$(g,r,y),k(r,f),b(u,r,null),k(r,c),d=!0},p(g,y){const L={};y&1024&&(L.$$scope={dirty:y,ctx:g}),t.$set(L);const C={};y&1024&&(C.$$scope={dirty:y,ctx:g}),u.$set(C)},i(g){d||(_(t.$$.fragment,g),_(u.$$.fragment,g),d=!0)},o(g){m(t.$$.fragment,g),m(u.$$.fragment,g),d=!1},d(g){g&&(p(e),p(s),p(i),p(a),p(r)),w(t),w(u)}}}function Bu(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Eu]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&1024&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Rl(o){let e,l,t,n,s;e=new Fe({props:{colorScale:o[1],limits:o[2]}});function i(r){o[6](r)}let a={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(a.value=o[0].kind),t=new Sn({props:a}),F.push(()=>G(t,"value",i)),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(r,f){b(e,r,f),$(r,l,f),b(t,r,f),s=!0},p(r,f){const u={};!n&&f&1&&(n=!0,u.value=r[0].kind,z(()=>n=!1)),t.$set(u)},i(r){s||(_(e.$$.fragment,r),_(t.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(t.$$.fragment,r),s=!1},d(r){r&&p(l),w(e,r),w(t,r)}}}function Uu(o){let e,l,t,n,s;function i(f){o[5](f)}let a={$$slots:{right:[Bu],default:[Gu]},$$scope:{ctx:o}};o[0].show!==void 0&&(a.checked=o[0].show),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0].show&&Rl(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&1024&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0].show,z(()=>l=!1)),e.$set(c),f[0].show?r?(r.p(f,u),u&1&&_(r,1)):(r=Rl(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Wu(o){let e,l,t=o[9].indicative_mph+"",n,s,i,a,r,f=o[9].highest_mph+"",u,c,d=o[4][o[9].highest_description]+"",g,y;return{c(){e=S("p"),l=v("Posted speed limit: "),n=v(t),s=v(" mph"),i=T(),a=S("p"),r=v("Highest average speed: "),u=v(f),c=v(" mph (during "),g=v(d),y=v(")")},m(L,C){$(L,e,C),k(e,l),k(e,n),k(e,s),$(L,i,C),$(L,a,C),k(a,r),k(a,u),k(a,c),k(a,g),k(a,y)},p(L,C){C&512&&t!==(t=L[9].indicative_mph+"")&&H(n,t),C&512&&f!==(f=L[9].highest_mph+"")&&H(u,f),C&512&&d!==(d=L[4][L[9].highest_description]+"")&&H(g,d)},d(L){L&&(p(e),p(i),p(a))}}}function Yu(o){let e,l;return e=new ae({props:{$$slots:{default:[Wu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ju(o){let e,l;const t=[E(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",o[0].kind],o[2],o[1]),"line-width":qe,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[Yu]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new we({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E(yt)),i&0&&{sourceLayer:yt},t[2],t[3],i&7&&{paint:{"line-color":ke(["get",s[0].kind],s[2],s[1]),"line-width":qe,"line-opacity":ne(1,.5)}},i&1&&{layout:{visibility:s[0].show?"visible":"none"}}]):{};i&1024&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Vu(o){let e,l,t,n,s;function i(r){o[7](r)}let a={name:yt,title:lo,$$slots:{default:[Uu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${Kt()}/v1/${yt}.pmtiles`,$$slots:{default:[Ju]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&1025&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0].show,z(()=>l=!1)),e.$set(u);const c={};f&1025&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let yt="road_speeds",lo="OS Speeds";function Qu(o){return o.show?o.kind:null}function Zu(o){return{show:!0,kind:o}}function Ku(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,20,30,40,50,90],a=Et(yt,{show:!1,kind:"indicative_mph"},Qu,Zu);V(o,a,d=>l(0,t=d));let r={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function f(d){o.$$.not_equal(t.show,d)&&(t.show=d,a.set(t))}function u(d){o.$$.not_equal(t.kind,d)&&(t.kind=d,a.set(t))}function c(d){o.$$.not_equal(t.show,d)&&(t.show=d,a.set(t))}return[t,n,s,a,r,f,u,c]}class Xu extends K{constructor(e){super(),X(this,e,Ku,Vu,Q,{})}}function xu(o){let e;return{c(){e=v(so)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function ec(o){let e;return{c(){e=v(`Public Sector Geospatial Agreement
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function tc(o){let e,l,t,n,s,i,a,r,f;return a=new se({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ec]},$$scope:{ctx:o}}}),{c(){e=S("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
          Ordnance Survey. The coloring shows the average width, and the line
          thickness has no meaning. Be careful interpreting the data near dual
          carriageways and crossing islands.`,l=T(),t=S("p"),t.textContent="Data valid as of 1 September, 2023",n=T(),s=S("p"),i=v(`License: Contains OS data Â© Crown copyright and database right
          2023. Made available under the `),h(a.$$.fragment),r=v(".")},m(u,c){$(u,e,c),$(u,l,c),$(u,t,c),$(u,n,c),$(u,s,c),k(s,i),b(a,s,null),k(s,r),f=!0},p(u,c){const d={};c&128&&(d.$$scope={dirty:c,ctx:u}),a.$set(d)},i(u){f||(_(a.$$.fragment,u),f=!0)},o(u){m(a.$$.fragment,u),f=!1},d(u){u&&(p(e),p(l),p(t),p(n),p(s)),w(a)}}}function nc(o){let e,l,t;return l=new pe({props:{$$slots:{default:[tc]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&128&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Dl(o){let e,l;return e=new Fe({props:{colorScale:o[1],limits:o[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function lc(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[nc],default:[xu]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&Dl(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&128&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&_(r,1)):(r=Dl(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function sc(o){let e,l,t,n=o[6].average+"",s,i,a,r,f,u,c=o[6].minimum+"",d,g;return{c(){e=S("p"),l=v("Average width: "),t=S("b"),s=v(n),i=v(`
        meters`),a=T(),r=S("p"),f=v("Minimum width: "),u=S("b"),d=v(c),g=v(`
        meters`)},m(y,L){$(y,e,L),k(e,l),k(e,t),k(t,s),k(e,i),$(y,a,L),$(y,r,L),k(r,f),k(r,u),k(u,d),k(r,g)},p(y,L){L&64&&n!==(n=y[6].average+"")&&H(s,n),L&64&&c!==(c=y[6].minimum+"")&&H(d,c)},d(y){y&&(p(e),p(a),p(r))}}}function oc(o){let e,l;return e=new ae({props:{$$slots:{default:[sc,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function rc(o){let e,l;const t=[E(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],o[2],o[1]),"line-width":qe,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[oc]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new we({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E(St)),i&0&&{sourceLayer:St},t[2],t[3],i&6&&{paint:{"line-color":ke(["get","average"],s[2],s[1]),"line-width":qe,"line-opacity":ne(1,.5)}},i&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};i&128&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ic(o){let e,l,t,n,s;function i(r){o[5](r)}let a={name:St,title:so,$$slots:{default:[lc]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${Kt()}/v1/${St}.pmtiles`,$$slots:{default:[rc]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&129&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&129&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let St="road_widths",so="OS Road widths";function fc(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,5,10,15,20,100],i=he(St);V(o,i,f=>l(0,t=f));function a(f){t=f,i.set(t)}function r(f){t=f,i.set(t)}return[t,n,s,i,a,r]}class ac extends K{constructor(e){super(),X(this,e,fc,ic,Q,{})}}function uc(o){let e,l,t,n;return e=new Te({props:{color:ee.trams}}),{c(){h(e.$$.fragment),l=T(),t=v(oo)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function cc(o){let e,l,t,n;return t=new xe({}),{c(){e=S("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
          (as of 7 February 2024). When these are close to a scheme,
          interactions between the modes must be designed carefully.`,l=T(),h(t.$$.fragment)},m(s,i){$(s,e,i),$(s,l,i),b(t,s,i),n=!0},p:W,i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function $c(o){let e,l,t;return l=new pe({props:{$$slots:{default:[cc]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&16&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function pc(o){let e,l,t;function n(i){o[2](i)}let s={$$slots:{right:[$c],default:[uc]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&16&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function _c(o){let e,l;const t=[E(Ct),{sourceLayer:Ct},{paint:{"line-color":ee.trams,"line-width":5,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new we({props:n}),e.$on("click",gc),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(Ct)),i&0&&{sourceLayer:Ct},t[2],i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function mc(o){let e,l,t,n,s;function i(r){o[3](r)}let a={name:Ct,title:oo,$$slots:{default:[pc]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Ct}.pmtiles`,$$slots:{default:[_c]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&17&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&17&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Ct="trams",oo="Trams";function gc(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function dc(o,e,l){let t,n=he(Ct);V(o,n,a=>l(0,t=a));function s(a){t=a,n.set(t)}function i(a){t=a,n.set(t)}return[t,n,s,i]}class hc extends K{constructor(e){super(),X(this,e,dc,mc,Q,{})}}function bc(o){let e;return{c(){e=v(ro)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function wc(o){let e;return{c(){e=v(`Bus Open Data Service
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function kc(o){let e,l,t,n,s,i,a,r,f;return t=new se({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[wc]},$$scope:{ctx:o}}}),r=new Le({}),{c(){e=S("p"),l=v("Data from the "),h(t.$$.fragment),n=v(`, as of 7 February 2024. To calculate frequency, every
          scheduled arrival time per stop is considered, grouped by day of the
          week. The total daily count is just the number of scheduled arrivals
          for a day. The peak hour frequency is the highest number of buses in
          any one hour window. That window might not lined up perfectly on the
          hour -- a peak hour might occur from 8:25 to 9:25,for example.`),s=T(),i=S("p"),i.textContent=`There are known limitations with this layer, so please use caution
          when using these numbers. Some stops may not be shown at all.
          Frequency could be over- or under-counted, due to exceptions to the
          regular daily schedule of a service.`,a=T(),h(r.$$.fragment)},m(u,c){$(u,e,c),k(e,l),b(t,e,null),k(e,n),$(u,s,c),$(u,i,c),$(u,a,c),b(r,u,c),f=!0},p(u,c){const d={};c&128&&(d.$$scope={dirty:c,ctx:u}),t.$set(d)},i(u){f||(_(t.$$.fragment,u),_(r.$$.fragment,u),f=!0)},o(u){m(t.$$.fragment,u),m(r.$$.fragment,u),f=!1},d(u){u&&(p(e),p(s),p(i),p(a)),w(t),w(r,u)}}}function vc(o){let e,l,t;return l=new pe({props:{$$slots:{default:[kc]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&128&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ql(o){let e,l,t,n;return t=new Fe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("p"),e.textContent="Peak hourly frequency:",l=T(),h(t.$$.fragment)},m(s,i){$(s,e,i),$(s,l,i),b(t,s,i),n=!0},p:W,i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function yc(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[vc],default:[bc]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&ql(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&128&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&_(r,1)):(r=ql(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Sc(o){let e,l,t,n=o[6].stop_name+"",s,i,a,r,f,u=o[6].peak+"",c,d,g,y,L,C=o[6].peak_description+"",O,P,D,j,M,N=o[6].total+"",R,I,q=o[6].total_description+"",J,x;return{c(){e=S("p"),l=v("Stop name: "),t=S("b"),s=v(n),i=T(),a=S("p"),r=v("Peak: "),f=S("b"),c=v(u),d=v(`
        buses during the busiest hour of any day`),g=T(),y=S("p"),L=v("The peak hour is "),O=v(C),P=T(),D=S("p"),j=v("Total buses per day: "),M=S("b"),R=v(N),I=v(`
        (for `),J=v(q),x=v(", the busiest day of the week)")},m(A,Z){$(A,e,Z),k(e,l),k(e,t),k(t,s),$(A,i,Z),$(A,a,Z),k(a,r),k(a,f),k(f,c),k(a,d),$(A,g,Z),$(A,y,Z),k(y,L),k(y,O),$(A,P,Z),$(A,D,Z),k(D,j),k(D,M),k(M,R),k(D,I),k(D,J),k(D,x)},p(A,Z){Z&64&&n!==(n=A[6].stop_name+"")&&H(s,n),Z&64&&u!==(u=A[6].peak+"")&&H(c,u),Z&64&&C!==(C=A[6].peak_description+"")&&H(O,C),Z&64&&N!==(N=A[6].total+"")&&H(R,N),Z&64&&q!==(q=A[6].total_description+"")&&H(J,q)},d(A){A&&(p(e),p(i),p(a),p(g),p(y),p(P),p(D))}}}function Cc(o){let e,l;return e=new ae({props:{$$slots:{default:[Sc,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Tc(o){let e,l;const t=[E(Tt),{sourceLayer:Tt},{paint:{"circle-color":ke(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Cc]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new zt({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E(Tt)),i&0&&{sourceLayer:Tt},i&6&&{paint:{"circle-color":ke(["get","peak"],s[2],s[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&128&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Lc(o){let e,l,t,n,s;function i(r){o[5](r)}let a={name:Tt,title:ro,$$slots:{default:[yc]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Tt}.pmtiles`,$$slots:{default:[Tc]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&129&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&129&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Tt="bus_stops",ro="Bus stops";function Ic(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,3,10,20,30,100],i=he(Tt);V(o,i,f=>l(0,t=f));function a(f){t=f,i.set(t)}function r(f){t=f,i.set(t)}return[t,n,s,i,a,r]}class Mc extends K{constructor(e){super(),X(this,e,Ic,Lc,Q,{})}}function Nc(o){let e;return{c(){e=v(io)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function Oc(o){let e;return{c(){e=v("crossing")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function jc(o){let e,l,t,n,s,i,a;return t=new se({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Oc]},$$scope:{ctx:o}}}),i=new xe({}),{c(){e=S("p"),l=v("This shows "),h(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=T(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&64&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(_(t.$$.fragment,r),_(i.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),m(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function Pc(o){let e,l,t;return l=new pe({props:{$$slots:{default:[jc]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&64&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Al(o){let e,l;return e=new Xt({props:{rows:o[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Rc(o){let e,l,t,n,s;function i(f){o[3](f)}let a={$$slots:{right:[Pc],default:[Nc]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&Al(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&64&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&_(r,1)):(r=Al(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Dc(o){let e,l=Fl(o[5])+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&32&&l!==(l=Fl(n[5])+"")&&H(t,l)},d(n){n&&p(e)}}}function qc(o){let e,l;return e=new ae({props:{$$slots:{default:[Dc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ac(o){let e,l;const t=[E(Lt),{sourceLayer:Lt},{paint:{"circle-color":Ke(["get","crossing"],{traffic_signals:ee.signalized_crossing},ee.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[qc]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new zt({props:n}),e.$on("click",Gc),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(Lt)),i&0&&{sourceLayer:Lt},t[2],i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Fc(o){let e,l,t,n,s;function i(r){o[4](r)}let a={name:Lt,title:io,$$slots:{default:[Rc]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Lt}.pmtiles`,$$slots:{default:[Ac]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&65&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&65&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Lt="crossings",io="Crossings";function Fl(o){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[o.crossing]??`Unknown crossing type (${o.crossing})`}function Gc(o){window.open(`http://openstreetmap.org/node/${o.detail.features[0].properties.osm_id}`,"_blank")}function zc(o,e,l){let t,n=he(Lt);V(o,n,r=>l(0,t=r));let s=[["Signalized",ee.signalized_crossing],["Other",ee.other_crossing]];function i(r){t=r,n.set(t)}function a(r){t=r,n.set(t)}return[t,n,s,i,a]}class Hc extends K{constructor(e){super(),X(this,e,zc,Fc,Q,{})}}function Ec(o){let e;return{c(){e=v(fo)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function Bc(o){let e;return{c(){e=v("OS Terrain 50")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Uc(o){let e,l,t,n,s,i,a,r,f,u,c,d,g;return a=new se({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Bc]},$$scope:{ctx:o}}}),u=new Le({}),d=new xe({}),{c(){e=S("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
          uphill. You have to zoom in to see all roads.`,l=T(),t=S("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
          on the underlying Digital Elevation Model used.`,n=T(),s=S("p"),i=v("This layer is built from "),h(a.$$.fragment),r=v(` and roads from OpenStreetMap. The data is valid as of 18
          February 2024.`),f=T(),h(u.$$.fragment),c=T(),h(d.$$.fragment)},m(y,L){$(y,e,L),$(y,l,L),$(y,t,L),$(y,n,L),$(y,s,L),k(s,i),b(a,s,null),k(s,r),$(y,f,L),b(u,y,L),$(y,c,L),b(d,y,L),g=!0},p(y,L){const C={};L&128&&(C.$$scope={dirty:L,ctx:y}),a.$set(C)},i(y){g||(_(a.$$.fragment,y),_(u.$$.fragment,y),_(d.$$.fragment,y),g=!0)},o(y){m(a.$$.fragment,y),m(u.$$.fragment,y),m(d.$$.fragment,y),g=!1},d(y){y&&(p(e),p(l),p(t),p(n),p(s),p(f),p(c)),w(a),w(u,y),w(d,y)}}}function Wc(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Uc]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&128&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Gl(o){let e,l;return e=new Fe({props:{colorScale:o[1],limits:o[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Yc(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[Wc],default:[Ec]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&Gl(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&128&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&_(r,1)):(r=Gl(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Jc(o){let e,l,t,n=Math.abs(o[6].gradient)/100+"",s,i;return{c(){e=S("p"),l=v("Gradient: "),t=S("b"),s=v(n),i=v(`
        %`)},m(a,r){$(a,e,r),k(e,l),k(e,t),k(t,s),k(e,i)},p(a,r){r&64&&n!==(n=Math.abs(a[6].gradient)/100+"")&&H(s,n)},d(a){a&&p(e)}}}function Vc(o){let e,l;return e=new ae({props:{$$slots:{default:[Jc,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Qc(o){let e,l,t,n;const s=[E(Je),{sourceLayer:Je},{manageHoverState:!0},{paint:{"line-color":ke(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":qe,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let i={$$slots:{default:[Vc]},$$scope:{ctx:o}};for(let f=0;f<s.length;f+=1)i=le(i,s[f]);e=new we({props:i});const a=[E(Je+"_arrows"),{sourceLayer:Je},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let r={};for(let f=0;f<a.length;f+=1)r=le(r,a[f]);return t=new Ln({props:r}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),n=!0},p(f,u){const c=u&7?oe(s,[u&0&&re(E(Je)),u&0&&{sourceLayer:Je},s[2],u&6&&{paint:{"line-color":ke(["/",["abs",["get","gradient"]],100],f[2],f[1]),"line-width":qe,"line-opacity":ne(1,.5)}},u&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};u&128&&(c.$$scope={dirty:u,ctx:f}),e.$set(c);const d=u&1?oe(a,[u&0&&re(E(Je+"_arrows")),u&0&&{sourceLayer:Je},a[2],a[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:f[0]?"visible":"none"}}]):{};t.$set(d)},i(f){n||(_(e.$$.fragment,f),_(t.$$.fragment,f),n=!0)},o(f){m(e.$$.fragment,f),m(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function Zc(o){let e,l,t,n,s;function i(r){o[5](r)}let a={name:Je,title:fo,$$slots:{default:[Yc]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Je}.pmtiles`,$$slots:{default:[Qc]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&129&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&129&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Je="gradient",fo="Gradients";function Kc(o,e,l){let t,n=ee.gradient_flat_to_steep,s=[0,3,5,8,10,20,100],i=he(Je);V(o,i,f=>l(0,t=f));function a(f){t=f,i.set(t)}function r(f){t=f,i.set(t)}return[t,n,s,i,a,r]}class Xc extends K{constructor(e){super(),X(this,e,Kc,Zc,Q,{})}}function xc(o){let e,l,t,n;return{c(){e=S("img"),t=T(),n=v(ao),tn(e.src,l=Io)||B(e,"src",l),B(e,"alt","a logo representing cycle parking")},m(s,i){$(s,e,i),$(s,t,i),$(s,n,i)},p:W,d(s){s&&(p(e),p(t),p(n))}}}function e$(o){let e;return{c(){e=v("OpenStreetMap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function t$(o){let e;return{c(){e=v("OpenStreetMap Carto")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function n$(o){let e,l,t,n,s,i,a,r,f,u,c;return t=new se({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[e$]},$$scope:{ctx:o}}}),r=new se({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[t$]},$$scope:{ctx:o}}}),u=new xe({}),{c(){e=S("p"),l=v("Cycle parking, according to "),h(t.$$.fragment),n=v(` (as of 9 August 2023). The type of parking, public/private
          access, and whether it's covered are not shown.`),s=T(),i=S("p"),a=v("Icon from "),h(r.$$.fragment),f=T(),h(u.$$.fragment)},m(d,g){$(d,e,g),k(e,l),b(t,e,null),k(e,n),$(d,s,g),$(d,i,g),k(i,a),b(r,i,null),$(d,f,g),b(u,d,g),c=!0},p(d,g){const y={};g&32&&(y.$$scope={dirty:g,ctx:d}),t.$set(y);const L={};g&32&&(L.$$scope={dirty:g,ctx:d}),r.$set(L)},i(d){c||(_(t.$$.fragment,d),_(r.$$.fragment,d),_(u.$$.fragment,d),c=!0)},o(d){m(t.$$.fragment,d),m(r.$$.fragment,d),m(u.$$.fragment,d),c=!1},d(d){d&&(p(e),p(s),p(i),p(f)),w(t),w(r),w(u,d)}}}function l$(o){let e,l,t;return l=new pe({props:{$$slots:{default:[n$]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&32&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function s$(o){let e,l,t;function n(i){o[2](i)}let s={$$slots:{right:[l$],default:[xc]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&32&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function o$(o){let e,l,t,n=(o[4].capacity??"unknown")+"",s;return{c(){e=S("p"),l=v("Capacity: "),t=S("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&16&&n!==(n=(i[4].capacity??"unknown")+"")&&H(s,n)},d(i){i&&p(e)}}}function r$(o){let e,l;return e=new ae({props:{$$slots:{default:[o$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function i$(o){let e,l;const t=[E(It),{sourceLayer:It},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[r$]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new Ln({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(It)),i&0&&{sourceLayer:It},i&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};i&32&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function f$(o){let e,l,t,n,s;function i(r){o[3](r)}let a={name:It,title:ao,$$slots:{default:[s$]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${It}.pmtiles`,$$slots:{default:[i$]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&33&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let It="cycle_parking",ao="Cycle parking";function a$(o,e,l){let t,n=he(It);V(o,n,a=>l(0,t=a));function s(a){t=a,n.set(t)}function i(a){t=a,n.set(t)}return[t,n,s,i]}class u$ extends K{constructor(e){super(),X(this,e,a$,f$,Q,{})}}function c$(o){let e;return{c(){e=v(uo)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function $$(o){let e,l,t,n;return t=new xe({}),{c(){e=S("p"),e.textContent=`This shows different places of education according to OpenStreetMap
          (as of 07 February 2024).`,l=T(),h(t.$$.fragment)},m(s,i){$(s,e,i),$(s,l,i),b(t,s,i),n=!0},p:W,i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){m(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function p$(o){let e,l,t;return l=new pe({props:{$$slots:{default:[$$]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&4096&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function zl(o){let e,l,t;return l=new Xe({props:{$$slots:{default:[d$]},$$scope:{ctx:o}}}),{c(){e=S("div"),h(l.$$.fragment),me(e,"border","1px solid black"),me(e,"padding","8px")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&4097&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function _$(o){let e,l,t;return e=new Te({props:{color:ee.education.schools}}),{c(){h(e.$$.fragment),l=v(`
          Schools`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:W,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function m$(o){let e,l,t;return e=new Te({props:{color:ee.education.colleges}}),{c(){h(e.$$.fragment),l=v(`
          Colleges`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:W,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function g$(o){let e,l,t;return e=new Te({props:{color:ee.education.universities}}),{c(){h(e.$$.fragment),l=v(`
          Universities`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:W,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){m(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function d$(o){let e,l,t,n,s,i,a,r,f;function u(C){o[4](C)}let c={$$slots:{default:[_$]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new ie({props:c}),F.push(()=>G(e,"checked",u));function d(C){o[5](C)}let g={$$slots:{default:[m$]},$$scope:{ctx:o}};o[0].college!==void 0&&(g.checked=o[0].college),n=new ie({props:g}),F.push(()=>G(n,"checked",d));function y(C){o[6](C)}let L={$$slots:{default:[g$]},$$scope:{ctx:o}};return o[0].university!==void 0&&(L.checked=o[0].university),a=new ie({props:L}),F.push(()=>G(a,"checked",y)),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),i=T(),h(a.$$.fragment)},m(C,O){b(e,C,O),$(C,t,O),b(n,C,O),$(C,i,O),b(a,C,O),f=!0},p(C,O){const P={};O&4096&&(P.$$scope={dirty:O,ctx:C}),!l&&O&1&&(l=!0,P.checked=C[0].school,z(()=>l=!1)),e.$set(P);const D={};O&4096&&(D.$$scope={dirty:O,ctx:C}),!s&&O&1&&(s=!0,D.checked=C[0].college,z(()=>s=!1)),n.$set(D);const j={};O&4096&&(j.$$scope={dirty:O,ctx:C}),!r&&O&1&&(r=!0,j.checked=C[0].university,z(()=>r=!1)),a.$set(j)},i(C){f||(_(e.$$.fragment,C),_(n.$$.fragment,C),_(a.$$.fragment,C),f=!0)},o(C){m(e.$$.fragment,C),m(n.$$.fragment,C),m(a.$$.fragment,C),f=!1},d(C){C&&(p(t),p(i)),w(e,C),w(n,C),w(a,C)}}}function h$(o){let e,l,t,n,s;function i(f){o[3](f)}let a={$$slots:{right:[p$],default:[c$]},$$scope:{ctx:o}};o[0].show!==void 0&&(a.checked=o[0].show),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0].show&&zl(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&4096&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0].show,z(()=>l=!1)),e.$set(c),f[0].show?r?(r.p(f,u),u&1&&_(r,1)):(r=zl(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function b$(o){let e,l=(o[11].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&2048&&l!==(l=(n[11].name??"Unnamed institution")+"")&&H(t,l)},d(n){n&&p(e)}}}function w$(o){let e,l;return e=new ae({props:{$$slots:{default:[b$,({props:t})=>({11:t}),({props:t})=>t?2048:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&6144&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function k$(o){let e,l;const t=[E(Mt),{sourceLayer:Mt},{paint:{"fill-color":Ke(["get","type"],{school:ee.education.schools,college:ee.education.colleges,university:ee.education.universities},"grey"),"fill-opacity":ne(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[w$]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new Ae({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&5?oe(t,[i&0&&re(E(Mt)),i&0&&{sourceLayer:Mt},t[2],i&1&&{layout:{visibility:s[0].show?"visible":"none"}},i&5&&{filter:s[2](s[0])},t[5],t[6]]):{};i&4096&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function v$(o){let e,l,t,n,s;function i(r){o[7](r)}let a={name:Mt,title:uo,$$slots:{default:[h$]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Mt}.pmtiles`,$$slots:{default:[k$]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&4097&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0].show,z(()=>l=!1)),e.$set(u);const c={};f&4097&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Mt="education",uo="Education";function y$(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function S$(o,e,l){let t,n=["school","college","university"],s={show:!1,school:!0,college:!0,university:!0};function i(y){return y.show?n.filter(L=>y[L]).join(","):null}let a=Et(Mt,s,i,y$);V(o,a,y=>l(0,t=y));function r(y){let L=n.filter(C=>y[C]);return["in",["get","type"],["literal",L]]}function f(y){o.$$.not_equal(t.show,y)&&(t.show=y,a.set(t))}function u(y){o.$$.not_equal(t.school,y)&&(t.school=y,a.set(t))}function c(y){o.$$.not_equal(t.college,y)&&(t.college=y,a.set(t))}function d(y){o.$$.not_equal(t.university,y)&&(t.university=y,a.set(t))}function g(y){o.$$.not_equal(t.show,y)&&(t.show=y,a.set(t))}return[t,a,r,f,u,c,d,g]}class C$ extends K{constructor(e){super(),X(this,e,S$,v$,Q,{})}}function T$(o){let e,l,t,n;return e=new Te({props:{color:ee.hospitals}}),{c(){h(e.$$.fragment),l=T(),t=v(co)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function L$(o){let e;return{c(){e=v("hospital")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function I$(o){let e,l,t,n,s,i,a;return t=new se({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[L$]},$$scope:{ctx:o}}}),i=new xe({}),{c(){e=S("p"),l=v("This shows "),h(t.$$.fragment),n=v(` data from OpenStreetMap (as of 9 August 2023). It doesn't
          include outpatient clinics or individual doctor's offices.`),s=T(),h(i.$$.fragment)},m(r,f){$(r,e,f),k(e,l),b(t,e,null),k(e,n),$(r,s,f),b(i,r,f),a=!0},p(r,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:r}),t.$set(u)},i(r){a||(_(t.$$.fragment,r),_(i.$$.fragment,r),a=!0)},o(r){m(t.$$.fragment,r),m(i.$$.fragment,r),a=!1},d(r){r&&(p(e),p(s)),w(t),w(i,r)}}}function M$(o){let e,l,t;return l=new pe({props:{$$slots:{default:[I$]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&32&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function N$(o){let e,l,t;function n(i){o[2](i)}let s={$$slots:{right:[M$],default:[T$]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&32&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function O$(o){let e,l=(o[4].name??"Unnamed hospital")+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unnamed hospital")+"")&&H(t,l)},d(n){n&&p(e)}}}function j$(o){let e,l;return e=new ae({props:{$$slots:{default:[O$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function P$(o){let e,l;const t=[E(Nt),{sourceLayer:Nt},{paint:{"fill-color":ee.hospitals,"fill-opacity":ne(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[j$]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new Ae({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(Nt)),i&0&&{sourceLayer:Nt},t[2],i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&32&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function R$(o){let e,l,t,n,s;function i(r){o[3](r)}let a={name:Nt,title:co,$$slots:{default:[N$]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Nt}.pmtiles`,$$slots:{default:[P$]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&33&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Nt="hospitals",co="Hospitals";function D$(o,e,l){let t,n=he(Nt);V(o,n,a=>l(0,t=a));function s(a){t=a,n.set(t)}function i(a){t=a,n.set(t)}return[t,n,s,i]}class q$ extends K{constructor(e){super(),X(this,e,D$,R$,Q,{})}}function A$(o){let e,l,t,n;return{c(){e=S("img"),t=T(),n=v($o),tn(e.src,l=Mo)||B(e,"src",l),B(e,"alt","A logo representing a train")},m(s,i){$(s,e,i),$(s,t,i),$(s,n,i)},p:W,d(s){s&&(p(e),p(t),p(n))}}}function F$(o){let e;return{c(){e=v("railway station")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function G$(o){let e;return{c(){e=v(`National Rail
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function z$(o){let e,l,t,n,s,i,a,r,f,u,c,d;return t=new se({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[F$]},$$scope:{ctx:o}}}),r=new se({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[G$]},$$scope:{ctx:o}}}),c=new xe({}),{c(){e=S("p"),l=v("This shows "),h(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=T(),i=S("p"),a=v("Icon from "),h(r.$$.fragment),f=v(". (Note that not all stations shown are National Rail.)"),u=T(),h(c.$$.fragment)},m(g,y){$(g,e,y),k(e,l),b(t,e,null),k(e,n),$(g,s,y),$(g,i,y),k(i,a),b(r,i,null),k(i,f),$(g,u,y),b(c,g,y),d=!0},p(g,y){const L={};y&32&&(L.$$scope={dirty:y,ctx:g}),t.$set(L);const C={};y&32&&(C.$$scope={dirty:y,ctx:g}),r.$set(C)},i(g){d||(_(t.$$.fragment,g),_(r.$$.fragment,g),_(c.$$.fragment,g),d=!0)},o(g){m(t.$$.fragment,g),m(r.$$.fragment,g),m(c.$$.fragment,g),d=!1},d(g){g&&(p(e),p(s),p(i),p(u)),w(t),w(r),w(c,g)}}}function H$(o){let e,l,t;return l=new pe({props:{$$slots:{default:[z$]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&32&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function E$(o){let e,l,t;function n(i){o[2](i)}let s={$$slots:{right:[H$],default:[A$]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&32&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function B$(o){let e,l=(o[4].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unnamed railway station")+"")&&H(t,l)},d(n){n&&p(e)}}}function U$(o){let e,l;return e=new ae({props:{$$slots:{default:[B$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function W$(o){let e,l;const t=[E(Zt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[U$]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new Ln({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(Zt)),i&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};i&32&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Y$(o){let e,l,t,n,s;function i(r){o[3](r)}let a={name:Zt,title:$o,$$slots:{default:[E$]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new Ht({props:{data:`${ge()}/v1/${Zt}.geojson`,$$slots:{default:[W$]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&33&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Zt="railway_stations",$o="Railway stations";function J$(o,e,l){let t,n=he(Zt);V(o,n,a=>l(0,t=a));function s(a){t=a,n.set(t)}function i(a){t=a,n.set(t)}return[t,n,s,i]}class V$ extends K{constructor(e){super(),X(this,e,J$,Y$,Q,{})}}function Q$(o){let e,l,t,n;return e=new Te({props:{color:ee.sports_spaces}}),{c(){h(e.$$.fragment),l=T(),t=v(po)},m(s,i){b(e,s,i),$(s,l,i),$(s,t,i),n=!0},p:W,i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Z$(o){let e;return{c(){e=v("sports pitches")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function K$(o){let e;return{c(){e=v("sports centres")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function X$(o){let e,l,t,n,s,i,a,r,f;return t=new se({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Z$]},$$scope:{ctx:o}}}),s=new se({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[K$]},$$scope:{ctx:o}}}),r=new xe({}),{c(){e=S("p"),l=v("This shows "),h(t.$$.fragment),n=v(" and "),h(s.$$.fragment),i=v(" data from OpenStreetMap (as of 9 August 2023)."),a=T(),h(r.$$.fragment)},m(u,c){$(u,e,c),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,i),$(u,a,c),b(r,u,c),f=!0},p(u,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),s.$set(g)},i(u){f||(_(t.$$.fragment,u),_(s.$$.fragment,u),_(r.$$.fragment,u),f=!0)},o(u){m(t.$$.fragment,u),m(s.$$.fragment,u),m(r.$$.fragment,u),f=!1},d(u){u&&(p(e),p(a)),w(t),w(s),w(r,u)}}}function x$(o){let e,l,t;return l=new pe({props:{$$slots:{default:[X$]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&32&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ep(o){let e,l,t;function n(i){o[2](i)}let s={$$slots:{right:[x$],default:[Q$]},$$scope:{ctx:o}};return o[0]!==void 0&&(s.checked=o[0]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a&32&&(r.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,r.checked=i[0],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function tp(o){let e,l=(o[4].name??"Unnamed sports space")+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unnamed sports space")+"")&&H(t,l)},d(n){n&&p(e)}}}function np(o){let e,l;return e=new ae({props:{$$slots:{default:[tp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function lp(o){let e,l;const t=[E(Ot),{sourceLayer:Ot},{paint:{"fill-color":ee.sports_spaces,"fill-opacity":ne(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[np]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new Ae({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&1?oe(t,[i&0&&re(E(Ot)),i&0&&{sourceLayer:Ot},t[2],i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&32&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function sp(o){let e,l,t,n,s;function i(r){o[3](r)}let a={name:Ot,title:po,$$slots:{default:[ep]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Ot}.pmtiles`,$$slots:{default:[lp]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&33&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&33&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Ot="sports_spaces",po="Sports spaces";function op(o,e,l){let t,n=he(Ot);V(o,n,a=>l(0,t=a));function s(a){t=a,n.set(t)}function i(a){t=a,n.set(t)}return[t,n,s,i]}class rp extends K{constructor(e){super(),X(this,e,op,sp,Q,{})}}function ip(o){let e;return{c(){e=v(_o)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function fp(o){let e;return{c(){e=v("DfT stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ap(o){let e;return{c(){e=v("documented by DfT")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function up(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y,L,C,O,P,D,j,M,N,R;return t=new se({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[fp]},$$scope:{ctx:o}}}),O=new se({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[ap]},$$scope:{ctx:o}}}),N=new Le({}),{c(){e=S("p"),l=v("This layer shows collisions recorded in the "),h(t.$$.fragment),n=v(" dataset. Please note these limitations:"),s=T(),i=S("ul"),a=S("li"),a.textContent="Only collisions between 2017 and 2022 are included",r=T(),f=S("li"),f.textContent=`This tool is intended to be used at high-zoom levels, while
            inspecting a scheme or development area. Not all points are shown at
            lower zoom levels. Do not use this to look for trends across a city
            or region scale.`,u=T(),c=S("li"),c.textContent=`Approximately 150 collisions from the source data aren't included,
            due to problems with the recorded location`,d=T(),g=S("li"),g.textContent='The "pedestrians" category also include mobility scooters',y=T(),L=S("li"),C=v("All limitations "),h(O.$$.fragment),P=v(` also apply. Not all collisions or near misses are reported.
            There's nuance with the severity categories.`),D=T(),j=S("p"),j.textContent="You can click a point to open the full report, thanks to CycleStreets.",M=T(),h(N.$$.fragment)},m(I,q){$(I,e,q),k(e,l),b(t,e,null),k(e,n),$(I,s,q),$(I,i,q),k(i,a),k(i,r),k(i,f),k(i,u),k(i,c),k(i,d),k(i,g),k(i,y),k(i,L),k(L,C),b(O,L,null),k(L,P),$(I,D,q),$(I,j,q),$(I,M,q),b(N,I,q),R=!0},p(I,q){const J={};q&8388608&&(J.$$scope={dirty:q,ctx:I}),t.$set(J);const x={};q&8388608&&(x.$$scope={dirty:q,ctx:I}),O.$set(x)},i(I){R||(_(t.$$.fragment,I),_(O.$$.fragment,I),_(N.$$.fragment,I),R=!0)},o(I){m(t.$$.fragment,I),m(O.$$.fragment,I),m(N.$$.fragment,I),R=!1},d(I){I&&(p(e),p(s),p(i),p(D),p(j),p(M)),w(t),w(O),w(N,I)}}}function cp(o){let e,l,t;return l=new pe({props:{$$slots:{default:[up]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&8388608&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Hl(o){let e,l,t,n,s,i,a,r,f,u,c,d,g;return l=new Xe({props:{small:!0,$$slots:{default:[gp]},$$scope:{ctx:o}}}),u=new Xt({props:{rows:o[9]}}),{c(){e=S("div"),h(l.$$.fragment),t=T(),n=S("div"),s=v(`Filter years:
        `),i=S("input"),a=v(`
        -
        `),r=S("input"),f=T(),h(u.$$.fragment),B(i,"type","number"),B(i,"min",2017),B(i,"max",2022),B(i,"class","svelte-1ft65rw"),B(r,"type","number"),B(r,"min",2017),B(r,"max",2022),B(r,"class","svelte-1ft65rw"),me(e,"border","1px solid black"),me(e,"padding","8px")},m(y,L){$(y,e,L),b(l,e,null),k(e,t),k(e,n),k(n,s),k(n,i),Ve(i,o[0].minYear),k(n,a),k(n,r),Ve(r,o[0].maxYear),k(e,f),b(u,e,null),c=!0,d||(g=[st(i,"input",o[15]),st(r,"input",o[16])],d=!0)},p(y,L){const C={};L&8388609&&(C.$$scope={dirty:L,ctx:y}),l.$set(C),L&1&&Qt(i.value)!==y[0].minYear&&Ve(i,y[0].minYear),L&1&&Qt(r.value)!==y[0].maxYear&&Ve(r,y[0].maxYear)},i(y){c||(_(l.$$.fragment,y),_(u.$$.fragment,y),c=!0)},o(y){m(l.$$.fragment,y),m(u.$$.fragment,y),c=!1},d(y){y&&p(e),w(l),w(u),d=!1,Fs(g)}}}function $p(o){let e;return{c(){e=v("Pedestrians")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function pp(o){let e;return{c(){e=v("Cyclists")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function _p(o){let e;return{c(){e=v("Horse riders")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function mp(o){let e;return{c(){e=v("Other")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function gp(o){let e,l,t,n,s,i,a,r,f,u,c,d;function g(M){o[11](M)}let y={$$slots:{default:[$p]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(y.checked=o[0].pedestrians),e=new ie({props:y}),F.push(()=>G(e,"checked",g));function L(M){o[12](M)}let C={$$slots:{default:[pp]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(C.checked=o[0].cyclists),n=new ie({props:C}),F.push(()=>G(n,"checked",L));function O(M){o[13](M)}let P={$$slots:{default:[_p]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(P.checked=o[0].horseRiders),a=new ie({props:P}),F.push(()=>G(a,"checked",O));function D(M){o[14](M)}let j={$$slots:{default:[mp]},$$scope:{ctx:o}};return o[0].other!==void 0&&(j.checked=o[0].other),u=new ie({props:j}),F.push(()=>G(u,"checked",D)),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),i=T(),h(a.$$.fragment),f=T(),h(u.$$.fragment)},m(M,N){b(e,M,N),$(M,t,N),b(n,M,N),$(M,i,N),b(a,M,N),$(M,f,N),b(u,M,N),d=!0},p(M,N){const R={};N&8388608&&(R.$$scope={dirty:N,ctx:M}),!l&&N&1&&(l=!0,R.checked=M[0].pedestrians,z(()=>l=!1)),e.$set(R);const I={};N&8388608&&(I.$$scope={dirty:N,ctx:M}),!s&&N&1&&(s=!0,I.checked=M[0].cyclists,z(()=>s=!1)),n.$set(I);const q={};N&8388608&&(q.$$scope={dirty:N,ctx:M}),!r&&N&1&&(r=!0,q.checked=M[0].horseRiders,z(()=>r=!1)),a.$set(q);const J={};N&8388608&&(J.$$scope={dirty:N,ctx:M}),!c&&N&1&&(c=!0,J.checked=M[0].other,z(()=>c=!1)),u.$set(J)},i(M){d||(_(e.$$.fragment,M),_(n.$$.fragment,M),_(a.$$.fragment,M),_(u.$$.fragment,M),d=!0)},o(M){m(e.$$.fragment,M),m(n.$$.fragment,M),m(a.$$.fragment,M),m(u.$$.fragment,M),d=!1},d(M){M&&(p(t),p(i),p(f)),w(e,M),w(n,M),w(a,M),w(u,M)}}}function dp(o){let e,l,t,n,s;function i(f){o[10](f)}let a={$$slots:{right:[cp],default:[ip]},$$scope:{ctx:o}};o[0].show!==void 0&&(a.checked=o[0].show),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0].show&&Hl(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&8388608&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0].show,z(()=>l=!1)),e.$set(c),f[0].show?r?(r.p(f,u),u&1&&_(r,1)):(r=Hl(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function El(o){let e,l,t,n=o[3][o[22].pedestrian_location]+"",s;return{c(){e=S("p"),l=v("Pedestrian location: "),t=S("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&4194304&&n!==(n=i[3][i[22].pedestrian_location]+"")&&H(s,n)},d(i){i&&p(e)}}}function Bl(o){let e,l,t,n=o[4][o[22].pedestrian_movement]+"",s;return{c(){e=S("p"),l=v("Pedestrian movement: "),t=S("b"),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(t,s)},p(i,a){a&4194304&&n!==(n=i[4][i[22].pedestrian_movement]+"")&&H(s,n)},d(i){i&&p(e)}}}function hp(o){let e,l,t,n=o[22].year+"",s,i,a,r,f,u=o[5][o[22].severity]+"",c,d,g,y,L,C=Ul(o[22])+"",O,P,D,j,M,N=o[22].pedestrian_location&&El(o),R=o[22].pedestrian_movement&&Bl(o);return{c(){e=S("p"),l=v("Year: "),t=S("b"),s=v(n),i=T(),a=S("p"),r=v("Severity: "),f=S("b"),c=v(u),d=T(),g=S("p"),y=v("Casualties: "),L=S("b"),O=v(C),P=T(),N&&N.c(),D=T(),R&&R.c(),j=T(),M=S("p"),M.textContent="Click to open full report in CycleStreets"},m(I,q){$(I,e,q),k(e,l),k(e,t),k(t,s),$(I,i,q),$(I,a,q),k(a,r),k(a,f),k(f,c),$(I,d,q),$(I,g,q),k(g,y),k(g,L),k(L,O),$(I,P,q),N&&N.m(I,q),$(I,D,q),R&&R.m(I,q),$(I,j,q),$(I,M,q)},p(I,q){q&4194304&&n!==(n=I[22].year+"")&&H(s,n),q&4194304&&u!==(u=I[5][I[22].severity]+"")&&H(c,u),q&4194304&&C!==(C=Ul(I[22])+"")&&H(O,C),I[22].pedestrian_location?N?N.p(I,q):(N=El(I),N.c(),N.m(D.parentNode,D)):N&&(N.d(1),N=null),I[22].pedestrian_movement?R?R.p(I,q):(R=Bl(I),R.c(),R.m(j.parentNode,j)):R&&(R.d(1),R=null)},d(I){I&&(p(e),p(i),p(a),p(d),p(g),p(P),p(D),p(j),p(M)),N&&N.d(I),R&&R.d(I)}}}function bp(o){let e,l;return e=new ae({props:{$$slots:{default:[hp,({props:t})=>({22:t}),({props:t})=>t?4194304:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&12582912&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function wp(o){let e,l;const t=[E(jt),{sourceLayer:jt},{paint:{"circle-color":ke(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[bp]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new zt({props:n}),e.$on("click",yp),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&451?oe(t,[i&0&&re(E(jt)),i&0&&{sourceLayer:jt},i&448&&{paint:{"circle-color":ke(["get","severity"],[1,2,3],[s[6],s[7],s[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&2&&{filter:s[1]},i&1&&{layout:{visibility:s[0].show?"visible":"none"}},t[5],t[6]]):{};i&8388608&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function kp(o){let e,l,t,n,s;function i(r){o[17](r)}let a={name:jt,title:_o,$$slots:{default:[dp]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${jt}.pmtiles`,$$slots:{default:[wp]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&8388609&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0].show,z(()=>l=!1)),e.$set(u);const c={};f&8388611&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let jt="stats19",_o="Stats19";function vp(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Ul(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function yp(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function Sp(o,e,l){let t,n,s=["pedestrians","cyclists","horseRiders","other"],i={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function a(q){return q.show?`${s.filter(x=>q[x]).join(",")}/${q.minYear}/${q.maxYear}`:null}let r=Et(jt,i,a,vp);V(o,r,q=>l(0,n=q));function f(q,J,x,A,Z,te){let U=["any"];return n.pedestrians&&U.push(["get","pedestrian"]),n.cyclists&&U.push(["get","cyclist"]),n.horseRiders&&U.push(["get","horse_rider"]),n.other&&U.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],U]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},d={1:"Fatal",2:"Serious",3:"Slight"},g=ee.sequential_low_to_high[4],y=ee.sequential_low_to_high[2],L=ee.sequential_low_to_high[0],C=[["Fatal",g],["Serious",y],["Slight",L]];function O(q){o.$$.not_equal(n.show,q)&&(n.show=q,r.set(n))}function P(q){o.$$.not_equal(n.pedestrians,q)&&(n.pedestrians=q,r.set(n))}function D(q){o.$$.not_equal(n.cyclists,q)&&(n.cyclists=q,r.set(n))}function j(q){o.$$.not_equal(n.horseRiders,q)&&(n.horseRiders=q,r.set(n))}function M(q){o.$$.not_equal(n.other,q)&&(n.other=q,r.set(n))}function N(){n.minYear=Qt(this.value),r.set(n)}function R(){n.maxYear=Qt(this.value),r.set(n)}function I(q){o.$$.not_equal(n.show,q)&&(n.show=q,r.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=f(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,r,u,c,d,g,y,L,C,O,P,D,j,M,N,R,I]}class Cp extends K{constructor(e){super(),X(this,e,Sp,kp,Q,{})}}function Tp(o){let e;return{c(){e=v(mo)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function Lp(o){let e;return{c(){e=v(`DfT road statistics
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ip(o){let e;return{c(){e=v("methodology")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Mp(o){let e,l,t,n,s,i,a,r,f,u,c;return t=new se({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Lp]},$$scope:{ctx:o}}}),s=new se({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Ip]},$$scope:{ctx:o}}}),u=new Le({}),{c(){e=S("p"),l=v("AADF (annual average daily flow) data from "),h(t.$$.fragment),n=v(`. This counts the total daily number of vehicles
          traveling past a count point (in both directions) on an average day of
          the year. Data from the latest year available is shown. See `),h(s.$$.fragment),i=v(" for details and caveats about the measurements."),a=T(),r=S("p"),r.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
          thicker when the latest data is a manual or automatic count, and
          thinner when it's an estimate from previous years or nearby counters.
          Click a point for full data.`,f=T(),h(u.$$.fragment)},m(d,g){$(d,e,g),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,i),$(d,a,g),$(d,r,g),$(d,f,g),b(u,d,g),c=!0},p(d,g){const y={};g&256&&(y.$$scope={dirty:g,ctx:d}),t.$set(y);const L={};g&256&&(L.$$scope={dirty:g,ctx:d}),s.$set(L)},i(d){c||(_(t.$$.fragment,d),_(s.$$.fragment,d),_(u.$$.fragment,d),c=!0)},o(d){m(t.$$.fragment,d),m(s.$$.fragment,d),m(u.$$.fragment,d),c=!1},d(d){d&&(p(e),p(a),p(r),p(f)),w(t),w(s),w(u,d)}}}function Np(o){let e,l,t;return l=new pe({props:{$$slots:{default:[Mp]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&256&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Wl(o){let e,l;return e=new Fe({props:{colorScale:o[1],limits:o[3]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Op(o){let e,l,t,n,s;function i(f){o[5](f)}let a={$$slots:{right:[Np],default:[Tp]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&Wl(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&256&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&_(r,1)):(r=Wl(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function jp(o){let e,l=o[7].location+"",t,n,s,i,a=o[7].year+"",r,f,u,c=o[7].motor_vehicles.toLocaleString()+"",d,g,y,L,C=o[7].year+"",O,P,D,j=o[7].pedal_cycles.toLocaleString()+"",M,N,R,I,q,J=o[7].method+"",x;return{c(){e=S("h2"),t=v(l),n=T(),s=S("p"),i=v("Total motor vehicles ("),r=v(a),f=v(` AADF):
        `),u=S("b"),d=v(c),g=T(),y=S("p"),L=v("Total pedal cycles ("),O=v(C),P=v(` AADF):
        `),D=S("b"),M=v(j),N=T(),R=S("p"),I=v("Count method: "),q=S("b"),x=v(J)},m(A,Z){$(A,e,Z),k(e,t),$(A,n,Z),$(A,s,Z),k(s,i),k(s,r),k(s,f),k(s,u),k(u,d),$(A,g,Z),$(A,y,Z),k(y,L),k(y,O),k(y,P),k(y,D),k(D,M),$(A,N,Z),$(A,R,Z),k(R,I),k(R,q),k(q,x)},p(A,Z){Z&128&&l!==(l=A[7].location+"")&&H(t,l),Z&128&&a!==(a=A[7].year+"")&&H(r,a),Z&128&&c!==(c=A[7].motor_vehicles.toLocaleString()+"")&&H(d,c),Z&128&&C!==(C=A[7].year+"")&&H(O,C),Z&128&&j!==(j=A[7].pedal_cycles.toLocaleString()+"")&&H(M,j),Z&128&&J!==(J=A[7].method+"")&&H(x,J)},d(A){A&&(p(e),p(n),p(s),p(g),p(y),p(N),p(R))}}}function Pp(o){let e,l;return e=new ae({props:{$$slots:{default:[jp,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&384&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Rp(o){let e,l;const t=[E(Pt),{sourceLayer:Pt},{paint:{"circle-color":ke(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Pp]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new zt({props:n}),e.$on("click",qp),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&7?oe(t,[i&0&&re(E(Pt)),i&0&&{sourceLayer:Pt},i&6&&{paint:{"circle-color":ke(["get","motor_vehicles"],s[2],s[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};i&256&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Dp(o){let e,l,t,n,s;function i(r){o[6](r)}let a={name:Pt,title:mo,$$slots:{default:[Op]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new de({props:{url:`pmtiles://${ge()}/v1/${Pt}.pmtiles`,$$slots:{default:[Rp]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&257&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&257&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let Pt="vehicle_counts",mo="Vehicle counts";function qp(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function Ap(o,e,l){let t,n=ee.sequential_low_to_high,s=[0,4e4,8e4,12e4,16e4,205e3],i=["","40k","80k","120k","160k",""],a=he(Pt);V(o,a,u=>l(0,t=u));function r(u){t=u,a.set(t)}function f(u){t=u,a.set(t)}return[t,n,s,i,a,r,f]}class Fp extends K{constructor(e){super(),X(this,e,Ap,Dp,Q,{})}}function Yl(o,e,l){const t=o.slice();return t[7]=e[l],t}function Gp(o){let e;return{c(){e=v(go)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function zp(o){let e,l,t;return{c(){e=S("p"),e.textContent=`Critical issues and policy conflicts from the Design Assistance Log.
          This is internally collected data.`,l=T(),t=S("p"),t.textContent=`This layer is manually copied from a copy of the DA Log. The data is
          recent as of 10 June 2024.`},m(n,s){$(n,e,s),$(n,l,s),$(n,t,s)},p:W,d(n){n&&(p(e),p(l),p(t))}}}function Hp(o){let e,l,t;return l=new pe({props:{$$slots:{default:[zp]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&1024&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Jl(o){let e,l;return e=new Xt({props:{rows:o[3]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ep(o){let e,l,t,n,s;function i(f){o[4](f)}let a={$$slots:{right:[Hp],default:[Gp]},$$scope:{ctx:o}};o[0]!==void 0&&(a.checked=o[0]),e=new ie({props:a}),F.push(()=>G(e,"checked",i));let r=o[0]&&Jl(o);return{c(){h(e.$$.fragment),t=T(),r&&r.c(),n=ue()},m(f,u){b(e,f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u),s=!0},p(f,u){const c={};u&1024&&(c.$$scope={dirty:u,ctx:f}),!l&&u&1&&(l=!0,c.checked=f[0],z(()=>l=!1)),e.$set(c),f[0]?r?(r.p(f,u),u&1&&_(r,1)):(r=Jl(f),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(ce(),m(r,1,1,()=>{r=null}),$e())},i(f){s||(_(e.$$.fragment,f),_(r),s=!0)},o(f){m(e.$$.fragment,f),m(r),s=!1},d(f){f&&(p(t),p(n)),w(e,f),r&&r.d(f)}}}function Bp(o){let e,l=o[6]["Issue ID"]+"",t,n,s=o[6].Code+"",i,a,r,f=o[6]["Issue Stage"]+"",u;return{c(){e=S("h2"),t=v(l),n=v(" - "),i=v(s),a=T(),r=S("p"),u=v(f)},m(c,d){$(c,e,d),k(e,t),k(e,n),k(e,i),$(c,a,d),$(c,r,d),k(r,u)},p(c,d){d&64&&l!==(l=c[6]["Issue ID"]+"")&&H(t,l),d&64&&s!==(s=c[6].Code+"")&&H(i,s),d&64&&f!==(f=c[6]["Issue Stage"]+"")&&H(u,f)},d(c){c&&(p(e),p(a),p(r))}}}function Vl(o){let e,l=o[7]+"",t,n,s,i=o[6][o[7]]+"",a,r;return{c(){e=S("p"),t=v(l),n=v(`:
            `),s=S("b"),a=v(i),r=T()},m(f,u){$(f,e,u),k(e,t),k(e,n),k(e,s),k(s,a),k(e,r)},p(f,u){u&64&&i!==(i=f[6][f[7]]+"")&&H(a,i)},d(f){f&&p(e)}}}function Up(o){let e,l=ye(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Vl(Yl(o,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();me(e,"max-width","30vw"),me(e,"max-height","60vh"),me(e,"overflow","auto")},m(n,s){$(n,e,s);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(n,s){if(s&68){l=ye(n[2]);let i;for(i=0;i<l.length;i+=1){const a=Yl(n,l,i);t[i]?t[i].p(a,s):(t[i]=Vl(a),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(n){n&&p(e),Ze(t,n)}}}function Wp(o){let e,l,t,n;return e=new ae({props:{openOn:"hover",$$slots:{default:[Bp,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Up,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,i){b(e,s,i),$(s,l,i),b(t,s,i),n=!0},p(s,i){const a={};i&1088&&(a.$$scope={dirty:i,ctx:s}),e.$set(a);const r={};i&1088&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),m(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function Yp(o){let e,l;const t=[E(sn),{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Wp]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new zt({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&9?oe(t,[i&0&&re(E(sn)),i&8&&{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(s[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:s[0]?"visible":"none"}},t[3],t[4]]):{};i&1024&&(a.$$scope={dirty:i,ctx:s}),e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Jp(o){let e,l,t,n,s;function i(r){o[5](r)}let a={name:sn,title:go,$$slots:{default:[Ep]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.show=o[0]),e=new _e({props:a}),F.push(()=>G(e,"show",i)),n=new Ht({props:{data:`${Kt()}/v1/problems.geojson.gz`,$$slots:{default:[Yp]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,[f]){const u={};f&1025&&(u.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,u.show=r[0],z(()=>l=!1)),e.$set(u);const c={};f&1025&&(c.$$scope={dirty:f,ctx:r}),n.$set(c)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}let sn="problems",go="Issues & Conflicts";function Vp(o,e,l){let t,n=he(sn);V(o,n,f=>l(0,t=f));let s=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],i=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function a(f){t=f,n.set(t)}function r(f){t=f,n.set(t)}return[t,n,s,i,a,r]}class Qp extends K{constructor(e){super(),X(this,e,Vp,Jp,Q,{})}}function Zp(o){let e;function l(s,i){return s[2]<=100?xp:Xp}let t=l(o),n=t(o);return{c(){n.c(),e=ue()},m(s,i){n.m(s,i),$(s,e,i)},p(s,i){t===(t=l(s))&&n?n.p(s,i):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},i:W,o:W,d(s){s&&p(e),n.d(s)}}}function Kp(o){let e,l;return e=new ot({props:{$$slots:{default:[e_]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Xp(o){let e;return{c(){e=S("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function xp(o){let e,l,t;return{c(){e=S("label"),l=v(`Downloading scheme data
      `),t=S("progress"),t.value=o[2],B(t,"class","svelte-q3473n")},m(n,s){$(n,e,s),k(e,l),k(e,t)},p(n,s){s&4&&(t.value=n[2])},d(n){n&&p(e)}}}function e_(o){let e;return{c(){e=v("Load latest scheme data")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function t_(o){let e,l,t,n;const s=[Kp,Zp],i=[];function a(r,f){return r[0]?r[1]?1:-1:0}return~(e=a(o))&&(l=i[e]=s[e](o)),{c(){l&&l.c(),t=ue()},m(r,f){~e&&i[e].m(r,f),$(r,t,f),n=!0},p(r,[f]){let u=e;e=a(r),e===u?~e&&i[e].p(r,f):(l&&(ce(),m(i[u],1,1,()=>{i[u]=null}),$e()),~e?(l=i[e],l?l.p(r,f):(l=i[e]=s[e](r),l.c()),_(l,1),l.m(t.parentNode,t)):l=null)},i(r){n||(_(l),n=!0)},o(r){m(l),n=!1},d(r){r&&p(t),~e&&i[e].d(r)}}}function n_(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),s=!0,i=0;async function a(){let f=await No(`${Kt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,i=c)});l(2,i=100);let u=new TextDecoder().decode(f);t("all_schemes_output.geojson",u),l(1,s=!1)}Gs(async()=>{n&&await a()});async function r(){l(0,n=!0),await a()}return o.$$set=f=>{"loadFile"in f&&l(4,t=f.loadFile)},[n,s,i,r,t]}class l_ extends K{constructor(e){super(),X(this,e,n_,t_,Q,{loadFile:4})}}const on=Re({type:"FeatureCollection",features:[],schemes:{}}),dn=Re(new Map),Ql=Re(""),Zl=Re(""),hn=Re({type:"FeatureCollection",features:[],schemes:{}}),bn=Re(new Map),Kl=Re(""),Xl=Re("");function s_(o){let e={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},l=new Map,t={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},n=new Map;for(let[s,i]of Object.entries(o.schemes))i.pipeline?(n.set(s,i),t.schemes[s]=i):(l.set(s,i),e.schemes[s]=i);for(let s of o.features){if(!o_(s))continue;let i=s.properties.scheme_reference,a=l.has(i),f=(a?l:n).get(i);f.browse&&(s.properties.funding_programme=f.browse.funding_programme,s.properties.current_milestone=f.browse.current_milestone);let u=a?e:t;s.id=u.features.length+1,u.features.push(s)}on.set(e),dn.set(l),hn.set(t),bn.set(n)}function o_(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}let Yt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},wn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function xl(o,e,l){const t=o.slice();return t[28]=e[l],t[29]=e,t[30]=l,t}function r_(o){let e;return{c(){e=v("Filters")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function i_(o){let e;return{c(){e=v("Reset all filters")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function f_(o){let e,l,t,n,s,i,a,r;e=new _n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[c_]},$$scope:{ctx:o}}});function f(g){o[23](g)}let u={label:"Scheme name or reference",options:rn(o[3])};o[0]!==void 0&&(u.value=o[0]),t=new Hs({props:u}),F.push(()=>G(t,"value",f));function c(g){o[24](g)}let d={label:"Authority or region",choices:o[10],emptyOption:!0};return o[4]!==void 0&&(d.value=o[4]),i=new Gt({props:d}),F.push(()=>G(i,"value",c)),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),s=T(),h(i.$$.fragment)},m(g,y){b(e,g,y),$(g,l,y),b(t,g,y),$(g,s,y),b(i,g,y),r=!0},p(g,y){const L={};y[0]&2|y[1]&1&&(L.$$scope={dirty:y,ctx:g}),e.$set(L);const C={};y[0]&8&&(C.options=rn(g[3])),!n&&y[0]&1&&(n=!0,C.value=g[0],z(()=>n=!1)),t.$set(C);const O={};y[0]&1024&&(O.choices=g[10]),!a&&y[0]&16&&(a=!0,O.value=g[4],z(()=>a=!1)),i.$set(O)},i(g){r||(_(e.$$.fragment,g),_(t.$$.fragment,g),_(i.$$.fragment,g),r=!0)},o(g){m(e.$$.fragment,g),m(t.$$.fragment,g),m(i.$$.fragment,g),r=!1},d(g){g&&(p(l),p(s)),w(e,g),w(t,g),w(i,g)}}}function a_(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y,L,C;t=new _n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[p_]},$$scope:{ctx:o}}});function O(R){o[17](R)}let P={label:"Scheme name or reference",options:rn(o[3])};o[0]!==void 0&&(P.value=o[0]),s=new Hs({props:P}),F.push(()=>G(s,"value",O));function D(R){o[18](R)}let j={label:"Authority or region",choices:o[10],emptyOption:!0};o[4]!==void 0&&(j.value=o[4]),r=new Gt({props:j}),F.push(()=>G(r,"value",D)),d=new _n({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[g_]},$$scope:{ctx:o}}});function M(R){o[20](R)}let N={label:"Current milestone",choices:o[11],emptyOption:!0};return o[6]!==void 0&&(N.value=o[6]),y=new Gt({props:N}),F.push(()=>G(y,"value",M)),{c(){e=S("div"),l=S("div"),h(t.$$.fragment),n=T(),h(s.$$.fragment),a=T(),h(r.$$.fragment),u=T(),c=S("div"),h(d.$$.fragment),g=T(),h(y.$$.fragment),B(l,"class","govuk-grid-column-one-half"),B(c,"class","govuk-grid-column-one-half"),B(e,"class","govuk-grid-row")},m(R,I){$(R,e,I),k(e,l),b(t,l,null),k(l,n),b(s,l,null),k(l,a),b(r,l,null),k(e,u),k(e,c),b(d,c,null),k(c,g),b(y,c,null),C=!0},p(R,I){const q={};I[0]&2|I[1]&1&&(q.$$scope={dirty:I,ctx:R}),t.$set(q);const J={};I[0]&8&&(J.options=rn(R[3])),!i&&I[0]&1&&(i=!0,J.value=R[0],z(()=>i=!1)),s.$set(J);const x={};I[0]&1024&&(x.choices=R[10]),!f&&I[0]&16&&(f=!0,x.value=R[4],z(()=>f=!1)),r.$set(x);const A={};I[0]&32|I[1]&1&&(A.$$scope={dirty:I,ctx:R}),d.$set(A);const Z={};!L&&I[0]&64&&(L=!0,Z.value=R[6],z(()=>L=!1)),y.$set(Z)},i(R){C||(_(t.$$.fragment,R),_(s.$$.fragment,R),_(r.$$.fragment,R),_(d.$$.fragment,R),_(y.$$.fragment,R),C=!0)},o(R){m(t.$$.fragment,R),m(s.$$.fragment,R),m(r.$$.fragment,R),m(d.$$.fragment,R),m(y.$$.fragment,R),C=!1},d(R){R&&p(e),w(t),w(s),w(r),w(d),w(y)}}}function u_(o){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function c_(o){let e,l,t,n,s,i;return t=new ot({props:{$$slots:{default:[u_]},$$scope:{ctx:o}}}),t.$on("click",o[22]),{c(){e=S("input"),l=T(),h(t.$$.fragment),B(e,"type","text"),B(e,"class","govuk-input govuk-input--width-10"),B(e,"id","filterInterventionText")},m(a,r){$(a,e,r),Ve(e,o[1]),$(a,l,r),b(t,a,r),n=!0,s||(i=st(e,"input",o[21]),s=!0)},p(a,r){r[0]&2&&e.value!==a[1]&&Ve(e,a[1]);const f={};r[1]&1&&(f.$$scope={dirty:r,ctx:a}),t.$set(f)},i(a){n||(_(t.$$.fragment,a),n=!0)},o(a){m(t.$$.fragment,a),n=!1},d(a){a&&(p(e),p(l)),w(t,a),s=!1,i()}}}function $_(o){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function p_(o){let e,l,t,n,s,i;return t=new ot({props:{$$slots:{default:[$_]},$$scope:{ctx:o}}}),t.$on("click",o[16]),{c(){e=S("input"),l=T(),h(t.$$.fragment),B(e,"type","text"),B(e,"class","govuk-input govuk-input--width-10"),B(e,"id","filterInterventionText")},m(a,r){$(a,e,r),Ve(e,o[1]),$(a,l,r),b(t,a,r),n=!0,s||(i=st(e,"input",o[15]),s=!0)},p(a,r){r[0]&2&&e.value!==a[1]&&Ve(e,a[1]);const f={};r[1]&1&&(f.$$scope={dirty:r,ctx:a}),t.$set(f)},i(a){n||(_(t.$$.fragment,a),n=!0)},o(a){m(t.$$.fragment,a),n=!1},d(a){a&&(p(e),p(l)),w(t,a),s=!1,i()}}}function __(o){let e=o[28]+"",l,t;return{c(){l=v(e),t=T()},m(n,s){$(n,l,s),$(n,t,s)},p:W,d(n){n&&(p(l),p(t))}}}function es(o){let e,l,t;function n(i){o[19](i,o[28])}let s={$$slots:{default:[__]},$$scope:{ctx:o}};return o[5][o[28]]!==void 0&&(s.checked=o[5][o[28]]),e=new ie({props:s}),F.push(()=>G(e,"checked",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){o=i;const r={};a[1]&1&&(r.$$scope={dirty:a,ctx:o}),!l&&a[0]&32&&(l=!0,r.checked=o[5][o[28]],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function m_(o){let e,l,t=ye(Object.keys(Yt)),n=[];for(let i=0;i<t.length;i+=1)n[i]=es(xl(o,t,i));const s=i=>m(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ue()},m(i,a){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(i,a);$(i,e,a),l=!0},p(i,a){if(a[0]&32){t=ye(Object.keys(Yt));let r;for(r=0;r<t.length;r+=1){const f=xl(i,t,r);n[r]?(n[r].p(f,a),_(n[r],1)):(n[r]=es(f),n[r].c(),_(n[r],1),n[r].m(e.parentNode,e))}for(ce(),r=t.length;r<n.length;r+=1)s(r);$e()}},i(i){if(!l){for(let a=0;a<t.length;a+=1)_(n[a]);l=!0}},o(i){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)m(n[a]);l=!1},d(i){i&&p(e),Ze(n,i)}}}function g_(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[m_]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n[0]&32|n[1]&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function d_(o){let e;return{c(){e=v("Done")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function h_(o){let e,l,t,n,s=o[9].interventions.toLocaleString()+"",i,a,r,f,u=o[8].size.toLocaleString()+"",c,d,g,y,L,C=ts(o[9].totalLength).toFixed(1)+"",O,P,D,j,M,N,R,I,q,J;j=new ot({props:{$$slots:{default:[i_]},$$scope:{ctx:o}}}),j.$on("click",o[12]);const x=[a_,f_],A=[];function Z(te,U){return te[2]=="ATF"?0:1}return N=Z(o),R=A[N]=x[N](o),q=new Oo({props:{$$slots:{default:[d_]},$$scope:{ctx:o}}}),q.$on("click",o[25]),{c(){e=S("p"),e.textContent="Showing:",l=T(),t=S("ul"),n=S("li"),i=v(s),a=v(" interventions"),r=T(),f=S("li"),c=v(u),d=v(" schemes"),g=T(),y=S("li"),L=v("total route length of "),O=v(C),P=v(" miles"),D=T(),h(j.$$.fragment),M=T(),R.c(),I=T(),h(q.$$.fragment)},m(te,U){$(te,e,U),$(te,l,U),$(te,t,U),k(t,n),k(n,i),k(n,a),k(t,r),k(t,f),k(f,c),k(f,d),k(t,g),k(t,y),k(y,L),k(y,O),k(y,P),$(te,D,U),b(j,te,U),$(te,M,U),A[N].m(te,U),$(te,I,U),b(q,te,U),J=!0},p(te,U){(!J||U[0]&512)&&s!==(s=te[9].interventions.toLocaleString()+"")&&H(i,s),(!J||U[0]&256)&&u!==(u=te[8].size.toLocaleString()+"")&&H(c,u),(!J||U[0]&512)&&C!==(C=ts(te[9].totalLength).toFixed(1)+"")&&H(O,C);const Ie={};U[1]&1&&(Ie.$$scope={dirty:U,ctx:te}),j.$set(Ie);let De=N;N=Z(te),N===De?A[N].p(te,U):(ce(),m(A[De],1,1,()=>{A[De]=null}),$e(),R=A[N],R?R.p(te,U):(R=A[N]=x[N](te),R.c()),_(R,1),R.m(I.parentNode,I));const Ge={};U[1]&1&&(Ge.$$scope={dirty:U,ctx:te}),q.$set(Ge)},i(te){J||(_(j.$$.fragment,te),_(R),_(q.$$.fragment,te),J=!0)},o(te){m(j.$$.fragment,te),m(R),m(q.$$.fragment,te),J=!1},d(te){te&&(p(e),p(l),p(t),p(D),p(M),p(I)),w(j,te),A[N].d(te),w(q,te)}}}function b_(o){let e,l,t,n,s;e=new ot({props:{$$slots:{default:[r_]},$$scope:{ctx:o}}}),e.$on("click",o[14]);function i(r){o[26](r)}let a={title:`Filter ${o[2]} schemes`,$$slots:{default:[h_]},$$scope:{ctx:o}};return o[7]!==void 0&&(a.open=o[7]),t=new Ps({props:a}),F.push(()=>G(t,"open",i)),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(r,f){b(e,r,f),$(r,l,f),b(t,r,f),s=!0},p(r,f){const u={};f[1]&1&&(u.$$scope={dirty:f,ctx:r}),e.$set(u);const c={};f[0]&4&&(c.title=`Filter ${r[2]} schemes`),f[0]&2047|f[1]&1&&(c.$$scope={dirty:f,ctx:r}),!n&&f[0]&128&&(n=!0,c.open=r[7],z(()=>n=!1)),t.$set(c)},i(r){s||(_(e.$$.fragment,r),_(t.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(t.$$.fragment,r),s=!1},d(r){r&&p(l),w(e,r),w(t,r)}}}function w_(o){var t;let e=new Set;for(let n of o.values())(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function ts(o){return o*621371e-9}function rn(o){let e=[];for(let l of o.values())e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function k_(o,e,l){let t,{source:n}=e,{schemes:s}=e,{schemesGj:i}=e,{filterSchemeText:a}=e,{filterInterventionText:r}=e,f=!1,u=new Set,c={interventions:0,totalLength:0},d=Object.keys(wn).map(U=>[U,U]),g="",y=Object.fromEntries(Object.keys(Yt).map(U=>[U,!0])),L="";function C(U,Ie,De,Ge,$t){let Me=U.toLowerCase(),et=Ie.toLowerCase(),Y=be=>{var tt,it,Bt,Jt;if(Me&&!((tt=be.properties.name)!=null&&tt.toLowerCase().includes(Me))&&!((it=be.properties.description)!=null&&it.toLowerCase().includes(Me)))return!1;let ze=s.get(be.properties.scheme_reference);return!(De&&((Bt=ze.browse)==null?void 0:Bt.authority_or_region)!=De||n=="ATF"&&!Ge[ze.browse.funding_programme]||$t&&((Jt=ze.browse)==null?void 0:Jt.current_milestone)!=$t||et&&!ze.scheme_reference.toLowerCase().includes(et)&&!(ze.scheme_name??"").toLowerCase().includes(et))};l(8,u=new Set(i.features.filter(Y).map(be=>be.properties.scheme_reference))),l(9,c={interventions:0,totalLength:0});let rt=be=>{var ze,tt;return!(!u.has(be.properties.scheme_reference)||Me&&!((ze=be.properties.name)!=null&&ze.toLowerCase().includes(Me))&&!((tt=be.properties.description)!=null&&tt.toLowerCase().includes(Me)))};for(let be of i.features)rt(be)?(delete be.properties.hide_while_editing,l(9,c.interventions++,c),be.geometry.type=="LineString"&&be.properties.length_meters&&l(9,c.totalLength+=be.properties.length_meters,c)):be.properties.hide_while_editing=!0;l(13,i),l(9,c)}function O(){l(4,g=""),l(5,y=Object.fromEntries(Object.keys(Yt).map(U=>[U,!0]))),l(6,L=""),l(1,r=""),l(0,a="")}const P=()=>l(7,f=!0);function D(){r=this.value,l(1,r)}const j=()=>l(1,r="");function M(U){a=U,l(0,a)}function N(U){g=U,l(4,g)}function R(U,Ie){o.$$.not_equal(y[Ie],U)&&(y[Ie]=U,l(5,y))}function I(U){L=U,l(6,L)}function q(){r=this.value,l(1,r)}const J=()=>l(1,r="");function x(U){a=U,l(0,a)}function A(U){g=U,l(4,g)}const Z=()=>l(7,f=!1);function te(U){f=U,l(7,f)}return o.$$set=U=>{"source"in U&&l(2,n=U.source),"schemes"in U&&l(3,s=U.schemes),"schemesGj"in U&&l(13,i=U.schemesGj),"filterSchemeText"in U&&l(0,a=U.filterSchemeText),"filterInterventionText"in U&&l(1,r=U.filterInterventionText)},o.$$.update=()=>{o.$$.dirty[0]&8&&l(10,t=w_(s)),o.$$.dirty[0]&115&&C(r,a,g,y,L)},[a,r,n,s,g,y,L,f,u,c,t,d,O,i,P,D,j,M,N,R,I,q,J,x,A,Z,te]}class ho extends K{constructor(e){super(),X(this,e,k_,b_,Q,{source:2,schemes:3,schemesGj:13,filterSchemeText:0,filterInterventionText:1},null,[-1,-1])}}function ns(o){let e,l,t,n=o[0].status+"",s;return{c(){e=S("p"),l=S("b"),l.textContent="Status",t=v(`
    : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&1&&n!==(n=i[0].status+"")&&H(s,n)},d(i){i&&p(e)}}}function ls(o){let e,l,t,n=o[0].timescale+"",s;return{c(){e=S("p"),l=S("b"),l.textContent="Timescale",t=v(`
    : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&1&&n!==(n=i[0].timescale+"")&&H(s,n)},d(i){i&&p(e)}}}function ss(o){let e,l,t,n=o[0].timescale_year+"",s;return{c(){e=S("p"),l=S("b"),l.textContent="Estimated completion year",t=v(`
    : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&1&&n!==(n=i[0].timescale_year+"")&&H(s,n)},d(i){i&&p(e)}}}function os(o){let e,l,t,n=o[0].year_published+"",s;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently published",t=v(`
    : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&1&&n!==(n=i[0].year_published+"")&&H(s,n)},d(i){i&&p(e)}}}function rs(o){let e,l,t,n=o[0].year_consulted+"",s;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently consulted on",t=v(`
    : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&1&&n!==(n=i[0].year_consulted+"")&&H(s,n)},d(i){i&&p(e)}}}function v_(o){let e,l,t,n,s,i=o[0].status&&ns(o),a=o[0].timescale&&ls(o),r=o[0].timescale_year&&ss(o),f=o[0].year_published&&os(o),u=o[0].year_consulted&&rs(o);return{c(){i&&i.c(),e=T(),a&&a.c(),l=T(),r&&r.c(),t=T(),f&&f.c(),n=T(),u&&u.c(),s=ue()},m(c,d){i&&i.m(c,d),$(c,e,d),a&&a.m(c,d),$(c,l,d),r&&r.m(c,d),$(c,t,d),f&&f.m(c,d),$(c,n,d),u&&u.m(c,d),$(c,s,d)},p(c,[d]){c[0].status?i?i.p(c,d):(i=ns(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[0].timescale?a?a.p(c,d):(a=ls(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[0].timescale_year?r?r.p(c,d):(r=ss(c),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),c[0].year_published?f?f.p(c,d):(f=os(c),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null),c[0].year_consulted?u?u.p(c,d):(u=rs(c),u.c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null)},i:W,o:W,d(c){c&&(p(e),p(l),p(t),p(n),p(s)),i&&i.d(c),a&&a.d(c),r&&r.d(c),f&&f.d(c),u&&u.d(c)}}}function y_(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class bo extends K{constructor(e){super(),X(this,e,y_,v_,Q,{props:0})}}function is(o){let e,l,t,n=o[0].budget.toLocaleString()+"",s,i;return{c(){e=S("p"),l=S("b"),l.textContent="Cost",t=v(`
    : `),s=v(n),i=v(`
    GBP`)},m(a,r){$(a,e,r),k(e,l),k(e,t),k(e,s),k(e,i)},p(a,r){r&1&&n!==(n=a[0].budget.toLocaleString()+"")&&H(s,n)},d(a){a&&p(e)}}}function fs(o){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function as(o){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function us(o){let e,l,t,n;return{c(){e=S("p"),l=S("b"),l.textContent="Funding sources",t=v(`
    : `),n=v(o[1])},m(s,i){$(s,e,i),k(e,l),k(e,t),k(e,n)},p(s,i){i&2&&H(n,s[1])},d(s){s&&p(e)}}}function S_(o){let e,l,t,n,s=o[0].budget&&is(o),i=o[0].development_funded&&fs(),a=o[0].construction_funded&&as(),r=o[1]&&us(o);return{c(){s&&s.c(),e=T(),i&&i.c(),l=T(),a&&a.c(),t=T(),r&&r.c(),n=ue()},m(f,u){s&&s.m(f,u),$(f,e,u),i&&i.m(f,u),$(f,l,u),a&&a.m(f,u),$(f,t,u),r&&r.m(f,u),$(f,n,u)},p(f,[u]){f[0].budget?s?s.p(f,u):(s=is(f),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),f[0].development_funded?i||(i=fs(),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),f[0].construction_funded?a||(a=as(),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),f[1]?r?r.p(f,u):(r=us(f),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i:W,o:W,d(f){f&&(p(e),p(l),p(t),p(n)),s&&s.d(f),i&&i.d(f),a&&a.d(f),r&&r.d(f)}}}function C_(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function T_(o,e,l){let t,{props:n}=e;return o.$$set=s=>{"props"in s&&l(0,n=s.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=C_(n))},[n,t]}class wo extends K{constructor(e){super(),X(this,e,T_,S_,Q,{props:0})}}function cn(o){const e=o.slice(),l=e[5].pipeline;return e[12]=l,e}function $n(o){const e=o.slice(),l=e[1].pipeline;return e[12]=l,e}function cs(o){let e,l,t,n=Wn(o[1].length_meters)+"",s;return{c(){e=S("p"),l=S("b"),l.textContent="Length",t=v(`
        : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&2&&n!==(n=Wn(i[1].length_meters)+"")&&H(s,n)},d(i){i&&p(e)}}}function $s(o){let e,l=ut(o[1].description,o[3])+"";return{c(){e=S("p")},m(t,n){$(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=ut(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&p(e)}}}function ps(o){let e,l,t,n,s,i,a,r=o[12].atf4_type&&_s(o),f=o[12].accuracy&&ms(o),u=o[12].is_alternative&&gs();return n=new wo({props:{props:o[12]}}),i=new bo({props:{props:o[12]}}),{c(){r&&r.c(),e=T(),f&&f.c(),l=T(),u&&u.c(),t=T(),h(n.$$.fragment),s=T(),h(i.$$.fragment)},m(c,d){r&&r.m(c,d),$(c,e,d),f&&f.m(c,d),$(c,l,d),u&&u.m(c,d),$(c,t,d),b(n,c,d),$(c,s,d),b(i,c,d),a=!0},p(c,d){c[12].atf4_type?r?r.p(c,d):(r=_s(c),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),c[12].accuracy?f?f.p(c,d):(f=ms(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[12].is_alternative?u||(u=gs(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const g={};d&2&&(g.props=c[12]),n.$set(g);const y={};d&2&&(y.props=c[12]),i.$set(y)},i(c){a||(_(n.$$.fragment,c),_(i.$$.fragment,c),a=!0)},o(c){m(n.$$.fragment,c),m(i.$$.fragment,c),a=!1},d(c){c&&(p(e),p(l),p(t),p(s)),r&&r.d(c),f&&f.d(c),u&&u.d(c),w(n,c),w(i,c)}}}function _s(o){let e,l,t,n=o[12].atf4_type+"",s;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 type",t=v(`
          : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&2&&n!==(n=i[12].atf4_type+"")&&H(s,n)},d(i){i&&p(e)}}}function ms(o){let e,l,t,n=o[12].accuracy+"",s;return{c(){e=S("p"),l=S("b"),l.textContent="Accuracy",t=v(`
          : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&2&&n!==(n=i[12].accuracy+"")&&H(s,n)},d(i){i&&p(e)}}}function gs(o){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ds(o){var i;let e,l,t,n=((i=o[5].browse)==null?void 0:i.capital_scheme_id)+"",s;return{c(){e=S("p"),l=S("b"),l.textContent="Capital scheme ID",t=v(`
        : `),s=v(n)},m(a,r){$(a,e,r),k(e,l),k(e,t),k(e,s)},p(a,r){var f;r&32&&n!==(n=((f=a[5].browse)==null?void 0:f.capital_scheme_id)+"")&&H(s,n)},d(a){a&&p(e)}}}function hs(o){var i;let e,l,t,n=((i=o[5].browse)==null?void 0:i.current_milestone)+"",s;return{c(){e=S("p"),l=S("b"),l.textContent="Current milestone",t=v(`
        : `),s=v(n)},m(a,r){$(a,e,r),k(e,l),k(e,t),k(e,s)},p(a,r){var f;r&32&&n!==(n=((f=a[5].browse)==null?void 0:f.current_milestone)+"")&&H(s,n)},d(a){a&&p(e)}}}function bs(o){let e,l,t,n,s,i,a,r=o[12].scheme_type&&ws(o),f=o[12].atf4_lead_type&&ks(o),u=o[12].scheme_description&&vs(o);return n=new wo({props:{props:o[12]}}),i=new bo({props:{props:o[12]}}),{c(){r&&r.c(),e=T(),f&&f.c(),l=T(),u&&u.c(),t=T(),h(n.$$.fragment),s=T(),h(i.$$.fragment)},m(c,d){r&&r.m(c,d),$(c,e,d),f&&f.m(c,d),$(c,l,d),u&&u.m(c,d),$(c,t,d),b(n,c,d),$(c,s,d),b(i,c,d),a=!0},p(c,d){c[12].scheme_type?r?r.p(c,d):(r=ws(c),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),c[12].atf4_lead_type?f?f.p(c,d):(f=ks(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[12].scheme_description?u?u.p(c,d):(u=vs(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const g={};d&32&&(g.props=c[12]),n.$set(g);const y={};d&32&&(y.props=c[12]),i.$set(y)},i(c){a||(_(n.$$.fragment,c),_(i.$$.fragment,c),a=!0)},o(c){m(n.$$.fragment,c),m(i.$$.fragment,c),a=!1},d(c){c&&(p(e),p(l),p(t),p(s)),r&&r.d(c),f&&f.d(c),u&&u.d(c),w(n,c),w(i,c)}}}function ws(o){let e,l,t,n=o[12].scheme_type+"",s;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme type",t=v(`
          : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&32&&n!==(n=i[12].scheme_type+"")&&H(s,n)},d(i){i&&p(e)}}}function ks(o){let e,l,t,n=o[12].atf4_lead_type+"",s;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 lead type",t=v(`
          : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&32&&n!==(n=i[12].atf4_lead_type+"")&&H(s,n)},d(i){i&&p(e)}}}function vs(o){let e,l,t,n=o[12].scheme_description+"",s;return{c(){e=S("p"),l=S("b"),l.textContent="Descripton",t=v(`
          : `),s=v(n)},m(i,a){$(i,e,a),k(e,l),k(e,t),k(e,s)},p(i,a){a&32&&n!==(n=i[12].scheme_description+"")&&H(s,n)},d(i){i&&p(e)}}}function L_(o){let e;return{c(){e=v("Zoom to show entire scheme")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function I_(o){let e;return{c(){e=v("Edit a copy of this scheme")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ys(o){var jn,Pn,Rn,Dn;let e,l,t,n,s,i,a,r=ut(o[1].name,o[3])+"",f,u=o[1].intervention_type+"",c,d,g,y,L,C,O,P,D,j=o[0].toUpperCase()+"",M,N,R,I,q,J,x,A=ut(o[5].scheme_name??"",o[2])+"",Z,te,U,Ie,De,Ge=ut(o[1].scheme_reference,o[2])+"",$t,Me,et,Y,rt=((jn=o[5].browse)==null?void 0:jn.authority_or_region)+"",be,ze,tt,it,Bt,Jt,xt=((Pn=o[5].browse)==null?void 0:Pn.funding_programme)+"",fn,Nn,an,un,ft,On,at,He,Ne=o[1].length_meters&&cs(o),Oe=o[1].description&&$s(o),Se=o[1].pipeline&&ps($n(o)),je=((Rn=o[5].browse)==null?void 0:Rn.capital_scheme_id)&&ds(o),Pe=((Dn=o[5].browse)==null?void 0:Dn.current_milestone)&&hs(o),Ce=o[5].pipeline&&bs(cn(o));return ft=new ot({props:{$$slots:{default:[L_]},$$scope:{ctx:o}}}),ft.$on("click",o[6]),at=new ot({props:{$$slots:{default:[I_]},$$scope:{ctx:o}}}),at.$on("click",o[7]),{c(){e=S("div"),l=S("h2"),l.textContent="Intervention",t=T(),n=S("p"),s=S("b"),s.textContent="Name",i=v(`
      : `),a=new Rt(!1),f=v(" ("),c=v(u),d=v(")"),g=T(),Ne&&Ne.c(),y=T(),Oe&&Oe.c(),L=T(),Se&&Se.c(),C=T(),O=S("hr"),P=T(),D=S("h2"),M=v(j),N=v(" Scheme"),R=T(),I=S("p"),q=S("b"),q.textContent="Scheme name",J=v(`
      : `),x=new Rt(!1),Z=T(),te=S("p"),U=S("b"),U.textContent="Scheme reference",Ie=v(`
      : `),De=new Rt(!1),$t=T(),Me=S("p"),et=S("b"),et.textContent="Authority or region",Y=v(`
      : `),be=v(rt),ze=T(),je&&je.c(),tt=T(),it=S("p"),Bt=S("b"),Bt.textContent="Funding programme",Jt=v(`
      : `),fn=v(xt),Nn=T(),Pe&&Pe.c(),an=T(),Ce&&Ce.c(),un=T(),h(ft.$$.fragment),On=T(),h(at.$$.fragment),a.a=f,x.a=null,De.a=null,me(e,"max-width","30vw"),me(e,"max-height","60vh"),me(e,"overflow","auto")},m(fe,ve){$(fe,e,ve),k(e,l),k(e,t),k(e,n),k(n,s),k(n,i),a.m(r,n),k(n,f),k(n,c),k(n,d),k(e,g),Ne&&Ne.m(e,null),k(e,y),Oe&&Oe.m(e,null),k(e,L),Se&&Se.m(e,null),k(e,C),k(e,O),k(e,P),k(e,D),k(D,M),k(D,N),k(e,R),k(e,I),k(I,q),k(I,J),x.m(A,I),k(e,Z),k(e,te),k(te,U),k(te,Ie),De.m(Ge,te),k(e,$t),k(e,Me),k(Me,et),k(Me,Y),k(Me,be),k(e,ze),je&&je.m(e,null),k(e,tt),k(e,it),k(it,Bt),k(it,Jt),k(it,fn),k(e,Nn),Pe&&Pe.m(e,null),k(e,an),Ce&&Ce.m(e,null),k(e,un),b(ft,e,null),k(e,On),b(at,e,null),o[10](e),He=!0},p(fe,ve){var Fn,Gn,zn,Hn;(!He||ve&10)&&r!==(r=ut(fe[1].name,fe[3])+"")&&a.p(r),(!He||ve&2)&&u!==(u=fe[1].intervention_type+"")&&H(c,u),fe[1].length_meters?Ne?Ne.p(fe,ve):(Ne=cs(fe),Ne.c(),Ne.m(e,y)):Ne&&(Ne.d(1),Ne=null),fe[1].description?Oe?Oe.p(fe,ve):(Oe=$s(fe),Oe.c(),Oe.m(e,L)):Oe&&(Oe.d(1),Oe=null),fe[1].pipeline?Se?(Se.p($n(fe),ve),ve&2&&_(Se,1)):(Se=ps($n(fe)),Se.c(),_(Se,1),Se.m(e,C)):Se&&(ce(),m(Se,1,1,()=>{Se=null}),$e()),(!He||ve&1)&&j!==(j=fe[0].toUpperCase()+"")&&H(M,j),(!He||ve&36)&&A!==(A=ut(fe[5].scheme_name??"",fe[2])+"")&&x.p(A),(!He||ve&6)&&Ge!==(Ge=ut(fe[1].scheme_reference,fe[2])+"")&&De.p(Ge),(!He||ve&32)&&rt!==(rt=((Fn=fe[5].browse)==null?void 0:Fn.authority_or_region)+"")&&H(be,rt),(Gn=fe[5].browse)!=null&&Gn.capital_scheme_id?je?je.p(fe,ve):(je=ds(fe),je.c(),je.m(e,tt)):je&&(je.d(1),je=null),(!He||ve&32)&&xt!==(xt=((zn=fe[5].browse)==null?void 0:zn.funding_programme)+"")&&H(fn,xt),(Hn=fe[5].browse)!=null&&Hn.current_milestone?Pe?Pe.p(fe,ve):(Pe=hs(fe),Pe.c(),Pe.m(e,an)):Pe&&(Pe.d(1),Pe=null),fe[5].pipeline?Ce?(Ce.p(cn(fe),ve),ve&32&&_(Ce,1)):(Ce=bs(cn(fe)),Ce.c(),_(Ce,1),Ce.m(e,un)):Ce&&(ce(),m(Ce,1,1,()=>{Ce=null}),$e());const qn={};ve&8192&&(qn.$$scope={dirty:ve,ctx:fe}),ft.$set(qn);const An={};ve&8192&&(An.$$scope={dirty:ve,ctx:fe}),at.$set(An)},i(fe){He||(_(Se),_(Ce),_(ft.$$.fragment,fe),_(at.$$.fragment,fe),He=!0)},o(fe){m(Se),m(Ce),m(ft.$$.fragment,fe),m(at.$$.fragment,fe),He=!1},d(fe){fe&&p(e),Ne&&Ne.d(),Oe&&Oe.d(),Se&&Se.d(),je&&je.d(),Pe&&Pe.d(),Ce&&Ce.d(),w(ft),w(at),o[10](null)}}}function M_(o){let e=o[1],l,t,n=ys(o);return{c(){n.c(),l=ue()},m(s,i){n.m(s,i),$(s,l,i),t=!0},p(s,[i]){i&2&&Q(e,e=s[1])?(ce(),m(n,1,1,W),$e(),n=ys(s),n.c(),_(n,1),n.m(l.parentNode,l)):n.p(s,i)},i(s){t||(_(n),t=!0)},o(s){m(n),t=!1},d(s){s&&p(l),n.d(s)}}}function ut(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function N_(o,e,l){let t,n;V(o,Cn,L=>l(11,n=L));let{source:s}=e,{props:i}=e,{schemes:a}=e,{schemesGj:r}=e,{filterSchemeText:f}=e,{filterInterventionText:u}=e,c;jo(()=>{c&&l(4,c.scrollTop=0,c)});function d(){let L={type:"FeatureCollection",features:r.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(Uo(L),{padding:20,animate:!1})}function g(){var P,D;let L={type:"FeatureCollection",features:r.features.filter(j=>j.properties.scheme_reference==t.scheme_reference),schemes:{}};L.schemes[t.scheme_reference]=t;let C=((P=t.browse)==null?void 0:P.authority_or_region)||"unknown authority",O=t.pipeline?"pipeline":"v1";O=="pipeline"&&(C+="_pipeline"),Po(C,JSON.stringify(L)),window.open(`scheme.html?authority=${(D=t.browse)==null?void 0:D.authority_or_region}&schema=${O}`,"_blank")}function y(L){F[L?"unshift":"push"](()=>{c=L,l(4,c)})}return o.$$set=L=>{"source"in L&&l(0,s=L.source),"props"in L&&l(1,i=L.props),"schemes"in L&&l(8,a=L.schemes),"schemesGj"in L&&l(9,r=L.schemesGj),"filterSchemeText"in L&&l(2,f=L.filterSchemeText),"filterInterventionText"in L&&l(3,u=L.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=a.get(i.scheme_reference))},[s,i,f,u,c,t,d,g,a,r,y]}class Mn extends K{constructor(e){super(),X(this,e,N_,M_,Q,{source:0,props:1,schemes:8,schemesGj:9,filterSchemeText:2,filterInterventionText:3})}}function O_(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&H(t,l)},d(n){n&&p(e)}}}function j_(o){let e,l;return e=new Mn({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.source=t[0]),n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function P_(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[O_,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[j_,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,i){b(e,s,i),$(s,l,i),b(t,s,i),n=!0},p(s,i){const a={};i&3072&&(a.$$scope={dirty:i,ctx:s}),e.$set(a);const r={};i&3133&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),m(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function R_(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&H(t,l)},d(n){n&&p(e)}}}function D_(o){let e,l;return e=new Mn({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.source=t[0]),n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function q_(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[R_,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[D_,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,i){b(e,s,i),$(s,l,i),b(t,s,i),n=!0},p(s,i){const a={};i&3072&&(a.$$scope={dirty:i,ctx:s}),e.$set(a);const r={};i&3133&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),m(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function A_(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&H(t,l)},d(n){n&&p(e)}}}function F_(o){let e,l;return e=new Mn({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.source=t[0]),n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function G_(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[A_,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[F_,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,i){b(e,s,i),$(s,l,i),b(t,s,i),n=!0},p(s,i){const a={};i&3072&&(a.$$scope={dirty:i,ctx:s}),e.$set(a);const r={};i&3133&&(r.$$scope={dirty:i,ctx:s}),t.$set(r)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),m(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function z_(o){let e,l,t,n,s,i,a,r,f,u;const c=[E(`${o[0]}-interventions-points`),{filter:["all",Yn,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":Jn,"circle-opacity":ne(1,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let d={$$slots:{default:[P_]},$$scope:{ctx:o}};for(let M=0;M<c.length;M+=1)d=le(d,c[M]);e=new zt({props:d});const g=[E(`${o[0]}-interventions-lines`),{filter:["all",Vn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":Vt,"line-opacity":ne(1,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[q_]},$$scope:{ctx:o}};for(let M=0;M<g.length;M+=1)y=le(y,g[M]);t=new we({props:y});const L=[E(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Vt,"circle-opacity":0,"circle-stroke-color":Qe.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[1]?"visible":"none"}}];let C={};for(let M=0;M<L.length;M+=1)C=le(C,L[M]);s=new zt({props:C});const O=[E(`${o[0]}-interventions-polygons`),{filter:["all",en,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":ne(.2,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let P={$$slots:{default:[G_]},$$scope:{ctx:o}};for(let M=0;M<O.length;M+=1)P=le(P,O[M]);a=new Ae({props:P});const D=[E(`${o[0]}-interventions-polygons-outlines`),{filter:["all",en,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*Vt}},{layout:{visibility:o[1]?"visible":"none"}}];let j={};for(let M=0;M<D.length;M+=1)j=le(j,D[M]);return f=new we({props:j}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),i=T(),h(a.$$.fragment),r=T(),h(f.$$.fragment)},m(M,N){b(e,M,N),$(M,l,N),b(t,M,N),$(M,n,N),b(s,M,N),$(M,i,N),b(a,M,N),$(M,r,N),b(f,M,N),u=!0},p(M,N){const R=N&835?oe(c,[N&1&&re(E(`${M[0]}-interventions-points`)),N&768&&{filter:["all",Yn,M[8],M[9]]},c[2],c[3],N&64&&{paint:{"circle-color":M[6],"circle-radius":Jn,"circle-opacity":ne(1,.5)}},N&2&&{layout:{visibility:M[1]?"visible":"none"}},c[6]]):{};N&2109&&(R.$$scope={dirty:N,ctx:M}),e.$set(R);const I=N&323?oe(g,[N&1&&re(E(`${M[0]}-interventions-lines`)),N&256&&{filter:["all",Vn,M[8]]},g[2],g[3],N&64&&{paint:{"line-color":M[6],"line-width":Vt,"line-opacity":ne(1,.5)}},N&2&&{layout:{visibility:M[1]?"visible":"none"}},g[6]]):{};N&2109&&(I.$$scope={dirty:N,ctx:M}),t.$set(I);const q=N&3?oe(L,[N&1&&re(E(`${M[0]}-interventions-lines-endpoints`)),L[1],L[2],N&2&&{layout:{visibility:M[1]?"visible":"none"}}]):{};s.$set(q);const J=N&323?oe(O,[N&1&&re(E(`${M[0]}-interventions-polygons`)),N&256&&{filter:["all",en,M[8]]},O[2],O[3],N&64&&{paint:{"fill-color":M[6],"fill-opacity":ne(.2,.5)}},N&2&&{layout:{visibility:M[1]?"visible":"none"}},O[6]]):{};N&2109&&(J.$$scope={dirty:N,ctx:M}),a.$set(J);const x=N&323?oe(D,[N&1&&re(E(`${M[0]}-interventions-polygons-outlines`)),N&256&&{filter:["all",en,M[8]]},N&64&&{paint:{"line-color":M[6],"line-opacity":.5,"line-width":.7*Vt}},N&2&&{layout:{visibility:M[1]?"visible":"none"}}]):{};f.$set(x)},i(M){u||(_(e.$$.fragment,M),_(t.$$.fragment,M),_(s.$$.fragment,M),_(a.$$.fragment,M),_(f.$$.fragment,M),u=!0)},o(M){m(e.$$.fragment,M),m(t.$$.fragment,M),m(s.$$.fragment,M),m(a.$$.fragment,M),m(f.$$.fragment,M),u=!1},d(M){M&&(p(l),p(n),p(i),p(r)),w(e,M),w(t,M),w(s,M),w(a,M),w(f,M)}}}function H_(o){let e,l;return e=new Ht({props:{data:o[7],$$slots:{default:[z_]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&128&&(s.data=t[7]),n&2175&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function E_(o,e,l){let t,{source:n}=e,{show:s}=e,{schemes:i}=e,{schemesGj:a}=e,{filterSchemeText:r}=e,{filterInterventionText:f}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],d=["!=",["get","endpoint"],!0];return o.$$set=g=>{"source"in g&&l(0,n=g.source),"show"in g&&l(1,s=g.show),"schemes"in g&&l(2,i=g.schemes),"schemesGj"in g&&l(3,a=g.schemesGj),"filterSchemeText"in g&&l(4,r=g.filterSchemeText),"filterInterventionText"in g&&l(5,f=g.filterInterventionText),"color"in g&&l(6,u=g.color)},o.$$.update=()=>{o.$$.dirty&8&&l(7,t=Wo(a))},[n,s,i,a,r,f,u,t,c,d]}class Ss extends K{constructor(e){super(),X(this,e,E_,H_,Q,{source:0,show:1,schemes:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function B_(o){return Ke(["get","intervention_type"],{area:Qe.area,route:Qe.route,crossing:Qe.crossing,other:Qe.other},"white")}function U_(o){return[["Areas",Qe.area],["Routes",Qe.route],["Crossings",Qe.crossing],["Other",Qe.other]]}function Cs(o,e,l){const t=o.slice();return t[35]=e[l],t}function Ts(o,e,l){const t=o.slice();return t[35]=e[l],t}function W_(o){let e,l;return e=new l_({props:{loadFile:o[19]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:W,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ls(o){let e,l,t;function n(i){o[26](i)}let s={name:ko,title:vo,$$slots:{default:[Q_]},$$scope:{ctx:o}};return o[8]!==void 0&&(s.show=o[8]),e=new _e({props:s}),F.push(()=>G(e,"show",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a[0]&7969|a[1]&512&&(r.$$scope={dirty:a,ctx:i}),!l&&a[0]&256&&(l=!0,r.show=i[8],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function Y_(o){let e;return{c(){e=v(vo)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function Is(o){let e,l,t=o[35]+"",n;return{c(){e=S("li"),l=S("p"),n=v(t)},m(s,i){$(s,e,i),k(e,l),k(l,n)},p(s,i){i[0]&1024&&t!==(t=s[35]+"")&&H(n,t)},d(s){s&&p(e)}}}function J_(o){let e,l,t,n,s,i;l=new zs({props:{text:"Scheme data caveats"}});let a=ye(o[10].notes??[]),r=[];for(let f=0;f<a.length;f+=1)r[f]=Is(Ts(o,a,f));return{c(){e=S("p"),h(l.$$.fragment),t=v(`Please note there are
              data quality caveats for all scheme data:`),n=T(),s=S("ul");for(let f=0;f<r.length;f+=1)r[f].c()},m(f,u){$(f,e,u),b(l,e,null),k(e,t),$(f,n,u),$(f,s,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(s,null);i=!0},p(f,u){if(u[0]&1024){a=ye(f[10].notes??[]);let c;for(c=0;c<a.length;c+=1){const d=Ts(f,a,c);r[c]?r[c].p(d,u):(r[c]=Is(d),r[c].c(),r[c].m(s,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=a.length}},i(f){i||(_(l.$$.fragment,f),i=!0)},o(f){m(l.$$.fragment,f),i=!1},d(f){f&&(p(e),p(n),p(s)),w(l),Ze(r,f)}}}function V_(o){let e,l,t;return l=new pe({props:{$$slots:{default:[J_]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s[0]&1024|s[1]&512&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Q_(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y;function L(I){o[20](I)}let C={$$slots:{right:[V_],default:[Y_]},$$scope:{ctx:o}};o[8]!==void 0&&(C.checked=o[8]),e=new ie({props:C}),F.push(()=>G(e,"checked",L));function O(I){o[21](I)}function P(I){o[22](I)}function D(I){o[23](I)}function j(I){o[24](I)}let M={source:"ATF"};o[10]!==void 0&&(M.schemesGj=o[10]),o[9]!==void 0&&(M.schemes=o[9]),o[11]!==void 0&&(M.filterSchemeText=o[11]),o[12]!==void 0&&(M.filterInterventionText=o[12]),n=new ho({props:M}),F.push(()=>G(n,"schemesGj",O)),F.push(()=>G(n,"schemes",P)),F.push(()=>G(n,"filterSchemeText",D)),F.push(()=>G(n,"filterInterventionText",j));function N(I){o[25](I)}let R={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(R.value=o[0]),u=new Gt({props:R}),F.push(()=>G(u,"value",N)),g=new Xt({props:{rows:o[5]}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),f=T(),h(u.$$.fragment),d=T(),h(g.$$.fragment)},m(I,q){b(e,I,q),$(I,t,q),b(n,I,q),$(I,f,q),b(u,I,q),$(I,d,q),b(g,I,q),y=!0},p(I,q){const J={};q[0]&1024|q[1]&512&&(J.$$scope={dirty:q,ctx:I}),!l&&q[0]&256&&(l=!0,J.checked=I[8],z(()=>l=!1)),e.$set(J);const x={};!s&&q[0]&1024&&(s=!0,x.schemesGj=I[10],z(()=>s=!1)),!i&&q[0]&512&&(i=!0,x.schemes=I[9],z(()=>i=!1)),!a&&q[0]&2048&&(a=!0,x.filterSchemeText=I[11],z(()=>a=!1)),!r&&q[0]&4096&&(r=!0,x.filterInterventionText=I[12],z(()=>r=!1)),n.$set(x);const A={};!c&&q[0]&1&&(c=!0,A.value=I[0],z(()=>c=!1)),u.$set(A);const Z={};q[0]&32&&(Z.rows=I[5]),g.$set(Z)},i(I){y||(_(e.$$.fragment,I),_(n.$$.fragment,I),_(u.$$.fragment,I),_(g.$$.fragment,I),y=!0)},o(I){m(e.$$.fragment,I),m(n.$$.fragment,I),m(u.$$.fragment,I),m(g.$$.fragment,I),y=!1},d(I){I&&(p(t),p(f),p(d)),w(e,I),w(n,I),w(u,I),w(g,I)}}}function Ms(o){let e,l,t;function n(i){o[33](i)}let s={name:yo,title:So,$$slots:{default:[x_]},$$scope:{ctx:o}};return o[7]!==void 0&&(s.show=o[7]),e=new _e({props:s}),F.push(()=>G(e,"show",n)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),t=!0},p(i,a){const r={};a[0]&123018|a[1]&512&&(r.$$scope={dirty:a,ctx:i}),!l&&a[0]&128&&(l=!0,r.show=i[7],z(()=>l=!1)),e.$set(r)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){m(e.$$.fragment,i),t=!1},d(i){w(e,i)}}}function Z_(o){let e;return{c(){e=v(So)},m(l,t){$(l,e,t)},p:W,d(l){l&&p(e)}}}function Ns(o){let e,l,t=o[35]+"",n;return{c(){e=S("li"),l=S("p"),n=v(t)},m(s,i){$(s,e,i),k(e,l),k(l,n)},p(s,i){i[0]&16384&&t!==(t=s[35]+"")&&H(n,t)},d(s){s&&p(e)}}}function K_(o){let e,l,t,n,s,i;l=new zs({props:{text:"Scheme data caveats"}});let a=ye(o[14].notes??[]),r=[];for(let f=0;f<a.length;f+=1)r[f]=Ns(Cs(o,a,f));return{c(){e=S("p"),h(l.$$.fragment),t=v(`Please note there are
              data quality caveats for all scheme data:`),n=T(),s=S("ul");for(let f=0;f<r.length;f+=1)r[f].c()},m(f,u){$(f,e,u),b(l,e,null),k(e,t),$(f,n,u),$(f,s,u);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(s,null);i=!0},p(f,u){if(u[0]&16384){a=ye(f[14].notes??[]);let c;for(c=0;c<a.length;c+=1){const d=Cs(f,a,c);r[c]?r[c].p(d,u):(r[c]=Ns(d),r[c].c(),r[c].m(s,null))}for(;c<r.length;c+=1)r[c].d(1);r.length=a.length}},i(f){i||(_(l.$$.fragment,f),i=!0)},o(f){m(l.$$.fragment,f),i=!1},d(f){f&&(p(e),p(n),p(s)),w(l),Ze(r,f)}}}function X_(o){let e,l,t;return l=new pe({props:{$$slots:{default:[K_]},$$scope:{ctx:o}}}),{c(){e=S("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s[0]&16384|s[1]&512&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function x_(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y;function L(I){o[27](I)}let C={$$slots:{right:[X_],default:[Z_]},$$scope:{ctx:o}};o[7]!==void 0&&(C.checked=o[7]),e=new ie({props:C}),F.push(()=>G(e,"checked",L));function O(I){o[28](I)}function P(I){o[29](I)}function D(I){o[30](I)}function j(I){o[31](I)}let M={source:"LCWIP"};o[14]!==void 0&&(M.schemesGj=o[14]),o[13]!==void 0&&(M.schemes=o[13]),o[15]!==void 0&&(M.filterSchemeText=o[15]),o[16]!==void 0&&(M.filterInterventionText=o[16]),n=new ho({props:M}),F.push(()=>G(n,"schemesGj",O)),F.push(()=>G(n,"schemes",P)),F.push(()=>G(n,"filterSchemeText",D)),F.push(()=>G(n,"filterInterventionText",j));function N(I){o[32](I)}let R={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(R.value=o[1]),u=new Gt({props:R}),F.push(()=>G(u,"value",N)),g=new Xt({props:{rows:o[3]}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),f=T(),h(u.$$.fragment),d=T(),h(g.$$.fragment)},m(I,q){b(e,I,q),$(I,t,q),b(n,I,q),$(I,f,q),b(u,I,q),$(I,d,q),b(g,I,q),y=!0},p(I,q){const J={};q[0]&16384|q[1]&512&&(J.$$scope={dirty:q,ctx:I}),!l&&q[0]&128&&(l=!0,J.checked=I[7],z(()=>l=!1)),e.$set(J);const x={};!s&&q[0]&16384&&(s=!0,x.schemesGj=I[14],z(()=>s=!1)),!i&&q[0]&8192&&(i=!0,x.schemes=I[13],z(()=>i=!1)),!a&&q[0]&32768&&(a=!0,x.filterSchemeText=I[15],z(()=>a=!1)),!r&&q[0]&65536&&(r=!0,x.filterInterventionText=I[16],z(()=>r=!1)),n.$set(x);const A={};!c&&q[0]&2&&(c=!0,A.value=I[1],z(()=>c=!1)),u.$set(A);const Z={};q[0]&8&&(Z.rows=I[3]),g.$set(Z)},i(I){y||(_(e.$$.fragment,I),_(n.$$.fragment,I),_(u.$$.fragment,I),_(g.$$.fragment,I),y=!0)},o(I){m(e.$$.fragment,I),m(n.$$.fragment,I),m(u.$$.fragment,I),m(g.$$.fragment,I),y=!1},d(I){I&&(p(t),p(f),p(d)),w(e,I),w(n,I),w(u,I),w(g,I)}}}function em(o){let e=Tn()=="Private (development)",l,t,n,s,i,a,r,f=e&&W_(o),u=o[9].size>0&&Ls(o),c=o[13].size>0&&Ms(o);return s=new Ro({props:{label:"Load schemes from GeoJSON",onLoad:o[19]}}),a=new Do({props:{errorMessage:o[2]}}),{c(){f&&f.c(),l=T(),u&&u.c(),t=T(),c&&c.c(),n=T(),h(s.$$.fragment),i=T(),h(a.$$.fragment)},m(d,g){f&&f.m(d,g),$(d,l,g),u&&u.m(d,g),$(d,t,g),c&&c.m(d,g),$(d,n,g),b(s,d,g),$(d,i,g),b(a,d,g),r=!0},p(d,g){e&&f.p(d,g),d[9].size>0?u?(u.p(d,g),g[0]&512&&_(u,1)):(u=Ls(d),u.c(),_(u,1),u.m(t.parentNode,t)):u&&(ce(),m(u,1,1,()=>{u=null}),$e()),d[13].size>0?c?(c.p(d,g),g[0]&8192&&_(c,1)):(c=Ms(d),c.c(),_(c,1),c.m(n.parentNode,n)):c&&(ce(),m(c,1,1,()=>{c=null}),$e());const y={};g[0]&4&&(y.errorMessage=d[2]),a.$set(y)},i(d){r||(_(f),_(u),_(c),_(s.$$.fragment,d),_(a.$$.fragment,d),r=!0)},o(d){m(f),m(u),m(c),m(s.$$.fragment,d),m(a.$$.fragment,d),r=!1},d(d){d&&(p(l),p(t),p(n),p(i)),f&&f.d(d),u&&u.d(d),c&&c.d(d),w(s,d),w(a,d)}}}function tm(o){let e,l,t,n,s,i;return e=new nt({props:{label:"Schemes",open:!0,$$slots:{default:[em]},$$scope:{ctx:o}}}),t=new Ss({props:{source:"atf",show:o[8],schemesGj:o[10],schemes:o[9],filterSchemeText:o[11],filterInterventionText:o[12],color:o[6]}}),s=new Ss({props:{source:"lcwip",show:o[7],schemesGj:o[14],schemes:o[13],filterSchemeText:o[15],filterInterventionText:o[16],color:o[4]}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment)},m(a,r){b(e,a,r),$(a,l,r),b(t,a,r),$(a,n,r),b(s,a,r),i=!0},p(a,r){const f={};r[0]&130991|r[1]&512&&(f.$$scope={dirty:r,ctx:a}),e.$set(f);const u={};r[0]&256&&(u.show=a[8]),r[0]&1024&&(u.schemesGj=a[10]),r[0]&512&&(u.schemes=a[9]),r[0]&2048&&(u.filterSchemeText=a[11]),r[0]&4096&&(u.filterInterventionText=a[12]),r[0]&64&&(u.color=a[6]),t.$set(u);const c={};r[0]&128&&(c.show=a[7]),r[0]&16384&&(c.schemesGj=a[14]),r[0]&8192&&(c.schemes=a[13]),r[0]&32768&&(c.filterSchemeText=a[15]),r[0]&65536&&(c.filterInterventionText=a[16]),r[0]&16&&(c.color=a[4]),s.$set(c)},i(a){i||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(s.$$.fragment,a),i=!0)},o(a){m(e.$$.fragment,a),m(t.$$.fragment,a),m(s.$$.fragment,a),i=!1},d(a){a&&(p(l),p(n)),w(e,a),w(t,a),w(s,a)}}}let ko="atf_schemes",vo="ATF schemes",yo="lcwip_schemes",So="LCWIP schemes";function nm(o,e,l){let t,n,s,i,a,r,f,u,c,d,g,y,L,C;V(o,dn,Y=>l(9,f=Y)),V(o,on,Y=>l(10,u=Y)),V(o,Zl,Y=>l(11,c=Y)),V(o,Ql,Y=>l(12,d=Y)),V(o,bn,Y=>l(13,g=Y)),V(o,hn,Y=>l(14,y=Y)),V(o,Xl,Y=>l(15,L=Y)),V(o,Kl,Y=>l(16,C=Y));let O="",P=he(ko);V(o,P,Y=>l(8,r=Y));let D="fundingProgramme",j=he(yo);V(o,j,Y=>l(7,a=Y));let M="interventionType";function N(Y,rt){try{s_(JSON.parse(rt)),Wt(P,r=!0,r),Wt(j,a=!0,a),l(2,O="")}catch(be){l(2,O=`The file you loaded is broken: ${be}`)}}function R(Y){return Y=="interventionType"?[B_(),U_()]:Y=="fundingProgramme"?[Ke(["get","funding_programme"],Yt,"grey"),Object.entries(Yt)]:Y=="currentMilestone"?[Ke(["get","current_milestone"],wn,"grey"),Object.entries(wn)]:["red",[]]}function I(Y){r=Y,P.set(r)}function q(Y){u=Y,on.set(u)}function J(Y){f=Y,dn.set(f)}function x(Y){c=Y,Zl.set(c)}function A(Y){d=Y,Ql.set(d)}function Z(Y){D=Y,l(0,D)}function te(Y){r=Y,P.set(r)}function U(Y){a=Y,j.set(a)}function Ie(Y){y=Y,hn.set(y)}function De(Y){g=Y,bn.set(g)}function Ge(Y){L=Y,Xl.set(L)}function $t(Y){C=Y,Kl.set(C)}function Me(Y){M=Y,l(1,M)}function et(Y){a=Y,j.set(a)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(6,[t,n]=R(D),t,(l(5,n),l(0,D))),o.$$.dirty[0]&2&&l(4,[s,i]=R(M),s,(l(3,i),l(1,M)))},[D,M,O,i,s,n,t,a,r,f,u,c,d,g,y,L,C,P,j,N,I,q,J,x,A,Z,te,U,Ie,De,Ge,$t,Me,et]}class lm extends K{constructor(e){super(),X(this,e,nm,tm,Q,{},null,[-1,-1])}}const Os=Re(!0);let kn=Re(null);function sm(o){let e,l,t,n,s,i,a,r;return e=new C$({}),t=new q$({}),s=new rp({}),a=new V$({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),i=T(),h(a.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),$(f,n,u),b(s,f,u),$(f,i,u),b(a,f,u),r=!0},i(f){r||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(s.$$.fragment,f),_(a.$$.fragment,f),r=!0)},o(f){m(e.$$.fragment,f),m(t.$$.fragment,f),m(s.$$.fragment,f),m(a.$$.fragment,f),r=!1},d(f){f&&(p(l),p(n),p(i)),w(e,f),w(t,f),w(s,f),w(a,f)}}}function om(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[sm]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function rm(o){let e,l,t,n,s,i,a,r,f,u,c,d;return e=new Ia({}),t=new iu({}),s=new Ga({}),a=new Za({}),f=new u$({}),c=new Hc({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),i=T(),h(a.$$.fragment),r=T(),h(f.$$.fragment),u=T(),h(c.$$.fragment)},m(g,y){b(e,g,y),$(g,l,y),b(t,g,y),$(g,n,y),b(s,g,y),$(g,i,y),b(a,g,y),$(g,r,y),b(f,g,y),$(g,u,y),b(c,g,y),d=!0},i(g){d||(_(e.$$.fragment,g),_(t.$$.fragment,g),_(s.$$.fragment,g),_(a.$$.fragment,g),_(f.$$.fragment,g),_(c.$$.fragment,g),d=!0)},o(g){m(e.$$.fragment,g),m(t.$$.fragment,g),m(s.$$.fragment,g),m(a.$$.fragment,g),m(f.$$.fragment,g),m(c.$$.fragment,g),d=!1},d(g){g&&(p(l),p(n),p(i),p(r),p(u)),w(e,g),w(t,g),w(s,g),w(a,g),w(f,g),w(c,g)}}}function im(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[rm]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function fm(o){let e,l,t,n,s,i;return e=new pa({}),t=new hc({}),s=new Mc({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment)},m(a,r){b(e,a,r),$(a,l,r),b(t,a,r),$(a,n,r),b(s,a,r),i=!0},i(a){i||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(s.$$.fragment,a),i=!0)},o(a){m(e.$$.fragment,a),m(t.$$.fragment,a),m(s.$$.fragment,a),i=!1},d(a){a&&(p(l),p(n)),w(e,a),w(t,a),w(s,a)}}}function am(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[fm]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function um(o){let e,l,t,n,s,i,a,r,f,u;return e=new hf({}),t=new Xf({}),s=new wi({}),a=new Ui({}),f=new of({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),i=T(),h(a.$$.fragment),r=T(),h(f.$$.fragment)},m(c,d){b(e,c,d),$(c,l,d),b(t,c,d),$(c,n,d),b(s,c,d),$(c,i,d),b(a,c,d),$(c,r,d),b(f,c,d),u=!0},i(c){u||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),_(f.$$.fragment,c),u=!0)},o(c){m(e.$$.fragment,c),m(t.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),m(f.$$.fragment,c),u=!1},d(c){c&&(p(l),p(n),p(i),p(r)),w(e,c),w(t,c),w(s,c),w(a,c),w(f,c)}}}function cm(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[um]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function $m(o){let e,l,t,n;return e=new fi({}),t=new ji({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,i){b(e,s,i),$(s,l,i),b(t,s,i),n=!0},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){m(e.$$.fragment,s),m(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function pm(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[$m]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function _m(o){let e,l,t,n,s,i,a,r;return e=new ac({}),t=new ku({}),s=new Xu({}),a=new Qp({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),i=T(),h(a.$$.fragment)},m(f,u){b(e,f,u),$(f,l,u),b(t,f,u),$(f,n,u),b(s,f,u),$(f,i,u),b(a,f,u),r=!0},i(f){r||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(s.$$.fragment,f),_(a.$$.fragment,f),r=!0)},o(f){m(e.$$.fragment,f),m(t.$$.fragment,f),m(s.$$.fragment,f),m(a.$$.fragment,f),r=!1},d(f){f&&(p(l),p(n),p(i)),w(e,f),w(t,f),w(s,f),w(a,f)}}}function mm(o){let e,l,t,n,s,i,a,r,f=Tn()=="Private (development)",u,c,d,g,y;e=new Fp({}),t=new Cp({}),s=new Fu({}),a=new Xc({});let L=f&&_m();return c=new Mf({}),g=new zf({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),i=T(),h(a.$$.fragment),r=T(),L&&L.c(),u=T(),h(c.$$.fragment),d=T(),h(g.$$.fragment)},m(C,O){b(e,C,O),$(C,l,O),b(t,C,O),$(C,n,O),b(s,C,O),$(C,i,O),b(a,C,O),$(C,r,O),L&&L.m(C,O),$(C,u,O),b(c,C,O),$(C,d,O),b(g,C,O),y=!0},p:W,i(C){y||(_(e.$$.fragment,C),_(t.$$.fragment,C),_(s.$$.fragment,C),_(a.$$.fragment,C),_(L),_(c.$$.fragment,C),_(g.$$.fragment,C),y=!0)},o(C){m(e.$$.fragment,C),m(t.$$.fragment,C),m(s.$$.fragment,C),m(a.$$.fragment,C),m(L),m(c.$$.fragment,C),m(g.$$.fragment,C),y=!1},d(C){C&&(p(l),p(n),p(i),p(r),p(u),p(d)),w(e,C),w(t,C),w(s,C),w(a,C),L&&L.d(C),w(c,C),w(g,C)}}}function gm(o){let e,l;return e=new Xe({props:{small:!0,$$slots:{default:[mm]},$$scope:{ctx:o}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function dm(o){let e,l,t,n,s;function i(r){o[6](r)}let a={cfg:o[5],map:o[3]};return o[0]!==void 0&&(a.enabled=o[0]),e=new Jo({props:a}),F.push(()=>G(e,"enabled",i)),n=new Ir({}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(r,f){b(e,r,f),$(r,t,f),b(n,r,f),s=!0},p(r,f){const u={};f&8&&(u.map=r[3]),!l&&f&1&&(l=!0,u.enabled=r[0],z(()=>l=!1)),e.$set(u)},i(r){s||(_(e.$$.fragment,r),_(n.$$.fragment,r),s=!0)},o(r){m(e.$$.fragment,r),m(n.$$.fragment,r),s=!1},d(r){r&&p(t),w(e,r),w(n,r)}}}function hm(o){let e,l;const t=[E("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new Ae({props:n}),{c(){h(e.$$.fragment)},m(s,i){b(e,s,i),l=!0},p(s,i){const a=i&2?oe(t,[t[0],t[1],{layout:{visibility:s[1]?"none":"visible"}}]):{};e.$set(a)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){m(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function bm(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y,L,C,O,P,D,j,M;return l=new lm({}),n=new nt({props:{label:"Trip generators",$$slots:{default:[om]},$$scope:{ctx:o}}}),i=new nt({props:{label:"Existing infrastructure",$$slots:{default:[im]},$$scope:{ctx:o}}}),r=new nt({props:{label:"Public transport",$$slots:{default:[am]},$$scope:{ctx:o}}}),u=new nt({props:{label:"Boundaries",$$slots:{default:[cm]},$$scope:{ctx:o}}}),d=new nt({props:{label:"Census",$$slots:{default:[pm]},$$scope:{ctx:o}}}),y=new nt({props:{label:"Other",$$slots:{default:[gm]},$$scope:{ctx:o}}}),C=new nt({props:{label:"Tools",$$slots:{default:[dm]},$$scope:{ctx:o}}}),P=new Yo({props:{disabled:!o[1]}}),j=new Ht({props:{data:o[4],$$slots:{default:[hm]},$$scope:{ctx:o}}}),{c(){e=S("div"),h(l.$$.fragment),t=T(),h(n.$$.fragment),s=T(),h(i.$$.fragment),a=T(),h(r.$$.fragment),f=T(),h(u.$$.fragment),c=T(),h(d.$$.fragment),g=T(),h(y.$$.fragment),L=T(),h(C.$$.fragment),O=T(),h(P.$$.fragment),D=T(),h(j.$$.fragment)},m(N,R){$(N,e,R),b(l,e,null),k(e,t),b(n,e,null),k(e,s),b(i,e,null),k(e,a),b(r,e,null),k(e,f),b(u,e,null),k(e,c),b(d,e,null),k(e,g),b(y,e,null),k(e,L),b(C,e,null),k(e,O),b(P,e,null),o[7](e),$(N,D,R),b(j,N,R),M=!0},p(N,[R]){const I={};R&256&&(I.$$scope={dirty:R,ctx:N}),n.$set(I);const q={};R&256&&(q.$$scope={dirty:R,ctx:N}),i.$set(q);const J={};R&256&&(J.$$scope={dirty:R,ctx:N}),r.$set(J);const x={};R&256&&(x.$$scope={dirty:R,ctx:N}),u.$set(x);const A={};R&256&&(A.$$scope={dirty:R,ctx:N}),d.$set(A);const Z={};R&256&&(Z.$$scope={dirty:R,ctx:N}),y.$set(Z);const te={};R&265&&(te.$$scope={dirty:R,ctx:N}),C.$set(te);const U={};R&2&&(U.disabled=!N[1]),P.$set(U);const Ie={};R&258&&(Ie.$$scope={dirty:R,ctx:N}),j.$set(Ie)},i(N){M||(_(l.$$.fragment,N),_(n.$$.fragment,N),_(i.$$.fragment,N),_(r.$$.fragment,N),_(u.$$.fragment,N),_(d.$$.fragment,N),_(y.$$.fragment,N),_(C.$$.fragment,N),_(P.$$.fragment,N),_(j.$$.fragment,N),M=!0)},o(N){m(l.$$.fragment,N),m(n.$$.fragment,N),m(i.$$.fragment,N),m(r.$$.fragment,N),m(u.$$.fragment,N),m(d.$$.fragment,N),m(y.$$.fragment,N),m(C.$$.fragment,N),m(P.$$.fragment,N),m(j.$$.fragment,N),M=!1},d(N){N&&(p(e),p(D)),w(l),w(n),w(i),w(r),w(u),w(d),w(y),w(C),w(P),o[7](null),w(j,N)}}}function wm(o,e,l){let t,n,s,i;V(o,Os,c=>l(1,n=c)),V(o,kn,c=>l(2,s=c)),V(o,Cn,c=>l(3,i=c));let a={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},r={getStreetViewRoadLayerNames:c=>Vo(c,qo(mn))};function f(c){t=c,l(0,t),l(1,n)}function u(c){F[c?"unshift":"push"](()=>{s=c,kn.set(s)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&Os.set(!t)},[t,n,s,i,a,r,f,u]}class km extends K{constructor(e){super(),X(this,e,wm,bm,Q,{})}}function vm(o){let e,l,t;return{c(){e=S("p"),e.textContent="Active layers",l=T(),t=S("div")},m(n,s){$(n,e,s),$(n,l,s),$(n,t,s),o[3](t)},p:W,i:W,o:W,d(n){n&&(p(e),p(l),p(t)),o[3](null)}}}function ym(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function Sm(o,e,l){let t,n;V(o,gn,a=>l(1,t=a)),V(o,In,a=>l(2,n=a));let s=null;function i(a){F[a?"unshift":"push"](()=>{s=a,l(0,s)})}return o.$$.update=()=>{o.$$.dirty&7&&ym(s,n,t)},[s,t,n,i]}class Cm extends K{constructor(e){super(),X(this,e,Sm,vm,Q,{})}}function Tm(o){let e,l,t,n,s,i,a,r,f,u,c,d,g,y,L,C,O;return l=new Qo({}),n=new Ao({}),a=new Fo({}),y=new Zo({props:{boundaryGeojson:o[3]}}),{c(){e=S("div"),h(l.$$.fragment),t=T(),h(n.$$.fragment),s=T(),i=S("div"),h(a.$$.fragment),r=T(),f=S("p"),f.textContent=`App version: ${Tn()}`,u=T(),c=S("div"),d=S("h1"),d.textContent="Scheme Browser",g=T(),h(y.$$.fragment),L=T(),C=S("div"),me(i,"border-bottom","1px solid #b1b4b6"),me(c,"display","flex"),me(c,"justify-content","space-between"),B(e,"slot","sidebar"),B(e,"class","govuk-prose")},m(P,D){$(P,e,D),b(l,e,null),k(e,t),b(n,e,null),k(e,s),k(e,i),b(a,i,null),k(i,r),k(i,f),k(e,u),k(e,c),k(c,d),k(c,g),b(y,c,null),k(e,L),k(e,C),o[6](C),O=!0},p(P,D){const j={};D&8&&(j.boundaryGeojson=P[3]),y.$set(j)},i(P){O||(_(l.$$.fragment,P),_(n.$$.fragment,P),_(a.$$.fragment,P),_(y.$$.fragment,P),O=!0)},o(P){m(l.$$.fragment,P),m(n.$$.fragment,P),m(a.$$.fragment,P),m(y.$$.fragment,P),O=!1},d(P){P&&p(e),w(l),w(n),w(a),w(y),o[6](null)}}}function js(o){let e,l;return e=new km({}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){m(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Lm(o){let e,l,t,n;e=new Ko({});let s=o[2]&&js();return{c(){h(e.$$.fragment),l=T(),s&&s.c(),t=ue()},m(i,a){b(e,i,a),$(i,l,a),s&&s.m(i,a),$(i,t,a),n=!0},p(i,a){i[2]?s?a&4&&_(s,1):(s=js(),s.c(),_(s,1),s.m(t.parentNode,t)):s&&(ce(),m(s,1,1,()=>{s=null}),$e())},i(i){n||(_(e.$$.fragment,i),_(s),n=!0)},o(i){m(e.$$.fragment,i),m(s),n=!1},d(i){i&&(p(l),p(t)),w(e,i),s&&s.d(i)}}}function Im(o){let e,l,t;return l=new Go({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Lm]},$$scope:{ctx:o}}}),{c(){e=S("div"),h(l.$$.fragment),B(e,"slot","main")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const i={};s&2&&(i.style=n[1]),s&260&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){m(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Mm(o){let e,l,t,n,s;return e=new fr({props:{$$slots:{main:[Im],sidebar:[Tm]},$$scope:{ctx:o}}}),n=new Cm({}),{c(){h(e.$$.fragment),l=T(),t=S("div"),h(n.$$.fragment),B(t,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,l,a),$(i,t,a),b(n,t,null),s=!0},p(i,[a]){const r={};a&271&&(r.$$scope={dirty:a,ctx:i}),e.$set(r)},i(i){s||(_(e.$$.fragment,i),_(n.$$.fragment,i),s=!0)},o(i){m(e.$$.fragment,i),m(n.$$.fragment,i),s=!1},d(i){i&&(p(l),p(t)),w(e,i),w(n)}}}function Nm(o,e,l){let t,n,s,i,a;V(o,kn,c=>l(4,t=c)),V(o,Cn,c=>l(5,n=c)),V(o,mn,c=>l(1,s=c)),V(o,Qn,c=>l(2,i=c)),V(o,on,c=>l(3,a=c)),Gs(()=>{zo()});const r=new URLSearchParams(window.location.search);mn.set(r.get("style")||"dataviz");let f;function u(c){F[c?"unshift":"push"](()=>{f=c,l(0,f),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&Qn.set(n),o.$$.dirty&17&&f&&t&&(l(0,f.innerHTML="",f),f.appendChild(t))},[f,s,i,a,t,n,u]}class Om extends K{constructor(e){super(),X(this,e,Nm,Mm,Q,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Om({target:document.getElementById("app")});
