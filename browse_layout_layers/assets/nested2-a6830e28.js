import{S as X,i as x,s as Y,e as T,b as z,m as _e,c as $,n as Z,d as p,aU as Ds,g as H,h as E,a as L,j as h,p as b,_ as nt,u as B,t as m,q as _,v as k,Q as Rt,T as Dt,U as At,V as Ft,b5 as Hn,o as w,am as ye,z as ue,r as ce,av as Ze,y as v,P as q,aa as $e,ab as vn,ac as As,w as Q,ad as yn,ae as Fs,af as qe,ag as qs,ah as Gs,b6 as Vs,W as Ut,b7 as En,b8 as Qs,G as zt,aP as pn,a0 as re,N as be,f as lt,aR as Zs,b4 as ne,a9 as Re,b9 as ge,K as se,J as Fe,a2 as oe,at as ie,b1 as Vt,aT as tn,Z as Ve,$ as zs,ba as Zt,bb as Pt,R as Hs,bc as Ks,bd as Xs,x as Es,be as xs,D as er,X as mn,b3 as Sn,bf as tr,I as nr,k as Cn,F as lr,E as sr,aV as rr,aW as _n,A as or,L as ir,M as fr,B as ar}from"./index-f4343a31.js";import{e as Bn,s as G,u as Qe,t as ur,q as et,M as cr,a as le,v as ke,R as $r,k as qt,h as Ke,C as st,f as Gt,b as pr,p as Un,g as mr,d as Wn,w as Yn,c as Jn,x as Jt,i as en,W as Bs,B as _r,S as gr,n as dr,H as hr,Z as br,G as kr,m as Vn}from"./ZoomOutMap-6d486c7e.js";import{P as ae,A as Us}from"./Popup-107dbb90.js";function wr(r){let e;return{c(){e=T("span"),z(e,"class","svelte-kzgqtg"),_e(e,"background",r[0])},m(l,t){$(l,e,t)},p(l,[t]){t&1&&_e(e,"background",l[0])},i:Z,o:Z,d(l){l&&p(e)}}}function vr(r,e,l){let{color:t}=e;return r.$$set=s=>{"color"in s&&l(0,t=s.color)},[t]}class Te extends X{constructor(e){super(),x(this,e,vr,wr,Y,{color:0})}}const yr="/atip/browse_layout_layers/assets/help-d011708a.svg";function Sr(r){let e,l;const t=r[1].default,s=Rt(t,r,r[4],null);return{c(){e=T("div"),s&&s.c(),z(e,"class","govuk-prose")},m(n,o){$(n,e,o),s&&s.m(e,null),l=!0},p(n,o){s&&s.p&&(!l||o&16)&&Dt(s,t,n,n[4],l?Ft(t,n[4],o,null):At(n[4]),null)},i(n){l||(m(s,n),l=!0)},o(n){_(s,n),l=!1},d(n){n&&p(e),s&&s.d(n)}}}function Cr(r){let e,l,t,s,n,o,f;function i(u){r[3](u)}let a={title:"Help",$$slots:{default:[Sr]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Ds({props:a}),H.push(()=>E(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${yr}" title="Help" alt="Help"/>`,l=L(),h(t.$$.fragment),z(e,"class","svelte-7d9d1l")},m(u,c){$(u,e,c),$(u,l,c),b(t,u,c),n=!0,o||(f=nt(e,"click",r[2]),o=!0)},p(u,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:u}),!s&&c&1&&(s=!0,d.open=u[0],B(()=>s=!1)),t.$set(d)},i(u){n||(m(t.$$.fragment,u),n=!0)},o(u){_(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(l)),k(t,u),o=!1,f()}}}function Tr(r,e,l){let{$$slots:t={},$$scope:s}=e,n=!1;const o=()=>l(0,n=!0);function f(i){n=i,l(0,n)}return r.$$set=i=>{"$$scope"in i&&l(4,s=i.$$scope)},[n,t,o,f,s]}class pe extends X{constructor(e){super(),x(this,e,Tr,Cr,Y,{})}}const Lr=r=>({}),Qn=r=>({}),Ir=r=>({}),Zn=r=>({});function Mr(r){let e,l,t,s,n,o,f,i,a,u,c;const d=r[4].sidebar,g=Rt(d,r,r[3],Zn),y=r[4].main,C=Rt(y,r,r[3],Qn);return{c(){e=T("div"),l=T("aside"),t=T("div"),g&&g.c(),s=L(),n=T("button"),n.textContent="→",f=L(),i=T("main"),C&&C.c(),z(t,"class","sidebar-content content-container svelte-1n0etgd"),z(n,"type","button"),z(n,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),z(l,"class",o=Hn(r[1]?"":"collapsed")+" svelte-1n0etgd"),_e(l,"--sidebarWidth",r[0]),z(i,"class","svelte-1n0etgd"),z(e,"class","overall-layout svelte-1n0etgd")},m(S,j){$(S,e,j),w(e,l),w(l,t),g&&g.m(t,null),w(l,s),w(l,n),w(e,f),w(e,i),C&&C.m(i,null),a=!0,u||(c=nt(n,"click",r[2]),u=!0)},p(S,[j]){g&&g.p&&(!a||j&8)&&Dt(g,d,S,S[3],a?Ft(d,S[3],j,Ir):At(S[3]),Zn),(!a||j&2&&o!==(o=Hn(S[1]?"":"collapsed")+" svelte-1n0etgd"))&&z(l,"class",o),(!a||j&1)&&_e(l,"--sidebarWidth",S[0]),C&&C.p&&(!a||j&8)&&Dt(C,y,S,S[3],a?Ft(y,S[3],j,Lr):At(S[3]),Qn)},i(S){a||(m(g,S),m(C,S),a=!0)},o(S){_(g,S),_(C,S),a=!1},d(S){S&&p(e),g&&g.d(S),C&&C.d(S),u=!1,c()}}}function Nr(r,e,l){let{$$slots:t={},$$scope:s}=e,{sidebarWidth:n="25rem"}=e,o=!0;function f(){l(1,o=!o)}return r.$$set=i=>{"sidebarWidth"in i&&l(0,n=i.sidebarWidth),"$$scope"in i&&l(3,s=i.$$scope)},[n,o,f,s,t]}class Or extends X{constructor(e){super(),x(this,e,Nr,Mr,Y,{sidebarWidth:0})}}function Kn(r,e,l){const t=r.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Xn(r){let e,l,t,s=r[1]+"",n,o,f;return l=new Te({props:{color:r[2]}}),{c(){e=T("li"),h(l.$$.fragment),t=L(),n=v(s),o=L()},m(i,a){$(i,e,a),b(l,e,null),w(e,t),w(e,n),w(e,o),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&s!==(s=i[1]+"")&&q(n,s)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){_(l.$$.fragment,i),f=!1},d(i){i&&p(e),k(l)}}}function jr(r){let e,l,t=ye(r[0]),s=[];for(let o=0;o<t.length;o+=1)s[o]=Xn(Kn(r,t,o));const n=o=>_(s[o],1,1,()=>{s[o]=null});return{c(){e=T("ul");for(let o=0;o<s.length;o+=1)s[o].c()},m(o,f){$(o,e,f);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);l=!0},p(o,[f]){if(f&1){t=ye(o[0]);let i;for(i=0;i<t.length;i+=1){const a=Kn(o,t,i);s[i]?(s[i].p(a,f),m(s[i],1)):(s[i]=Xn(a),s[i].c(),m(s[i],1),s[i].m(e,null))}for(ue(),i=t.length;i<s.length;i+=1)n(i);ce()}},i(o){if(!l){for(let f=0;f<t.length;f+=1)m(s[f]);l=!0}},o(o){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)_(s[f]);l=!1},d(o){o&&p(e),Ze(s,o)}}}function Pr(r,e,l){let{rows:t}=e;return r.$$set=s=>{"rows"in s&&l(0,t=s.rows)},[t]}class Kt extends X{constructor(e){super(),x(this,e,Pr,jr,Y,{rows:0})}}function xn(r){let e=r[0],l,t,s=el(r);return{c(){s.c(),l=$e()},m(n,o){s.m(n,o),$(n,l,o),t=!0},p(n,o){o&1&&Y(e,e=n[0])?(ue(),_(s,1,1,Z),ce(),s=el(n),s.c(),m(s,1),s.m(l.parentNode,l)):s.p(n,o)},i(n){t||(m(s),t=!0)},o(n){_(s),t=!1},d(n){n&&p(l),s.d(n)}}}function el(r){let e;const l=r[16].default,t=Rt(l,r,r[15],null);return{c(){t&&t.c()},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&32768)&&Dt(t,l,s,s[15],e?Ft(l,s[15],n,null):At(s[15]),null)},i(s){e||(m(t,s),e=!0)},o(s){_(t,s),e=!1},d(s){t&&t.d(s)}}}function Rr(r){let e,l,t=r[0]&&xn(r);return{c(){t&&t.c(),e=$e()},m(s,n){t&&t.m(s,n),$(s,e,n),l=!0},p(s,[n]){s[0]?t?(t.p(s,n),n&1&&m(t,1)):(t=xn(s),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ue(),_(t,1,1,()=>{t=null}),ce())},i(s){l||(m(t),l=!0)},o(s){_(t),l=!1},d(s){s&&p(e),t&&t.d(s)}}}function Dr(r,e,l){let t,s,{$$slots:n={},$$scope:o}=e,{id:f=vn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:d=null}=e,{minzoom:g=null}=e,{maxzoom:y=null}=e,{volatile:C=null}=e;const{map:S,self:j}=As();Q(r,S,R=>l(14,s=R)),Q(r,j,R=>l(0,t=R));let D,P=!0;return yn(()=>{t&&D&&s&&(Fs(S,t,D),qe(j,t=null,t),l(12,D=void 0))}),r.$$set=R=>{"id"in R&&l(3,f=R.id),"tiles"in R&&l(4,i=R.tiles),"tileSize"in R&&l(5,a=R.tileSize),"bounds"in R&&l(6,u=R.bounds),"scheme"in R&&l(7,c=R.scheme),"attribution"in R&&l(8,d=R.attribution),"minzoom"in R&&l(9,g=R.minzoom),"maxzoom"in R&&l(10,y=R.maxzoom),"volatile"in R&&l(11,C=R.volatile),"$$scope"in R&&l(15,o=R.$$scope)},r.$$.update=()=>{r.$$.dirty&24569&&s&&t!==f&&(qe(j,t=f,t),qs(s,t,Gs({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:d,minzoom:g,maxzoom:y,volatile:C}),R=>s&&R===t,()=>{t&&(l(12,D=s==null?void 0:s.getSource(t)),l(13,P=!0))})),r.$$.dirty&16392&&(s==null||s.on("style.load",()=>{l(12,D=s==null?void 0:s.getSource(f))})),r.$$.dirty&12304&&D&&(P?l(13,P=!1):D.setTiles(i))},[t,S,j,f,i,a,u,c,d,g,y,C,D,P,s,o,n]}class Ar extends X{constructor(e){super(),x(this,e,Dr,Rr,Y,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function Fr(r){let e;const l=r[16].default,t=Rt(l,r,r[24],null);return{c(){t&&t.c()},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&16777216)&&Dt(t,l,s,s[24],e?Ft(l,s[24],n,null):At(s[24]),null)},i(s){e||(m(t,s),e=!0)},o(s){_(t,s),e=!1},d(s){t&&t.d(s)}}}function qr(r){let e,l,t;function s(o){r[17](o)}let n={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Fr]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.hovered=r[0]),e=new Vs({props:n}),H.push(()=>E(e,"hovered",s)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,[f]){const i={};f&2&&(i.id=o[1]),f&4&&(i.source=o[2]),f&8&&(i.sourceLayer=o[3]),f&16&&(i.beforeId=o[4]),f&32&&(i.beforeLayerType=o[5]),f&64&&(i.paint=o[6]),f&128&&(i.layout=o[7]),f&256&&(i.filter=o[8]),f&512&&(i.applyToClusters=o[9]),f&1024&&(i.minzoom=o[10]),f&2048&&(i.maxzoom=o[11]),f&4096&&(i.hoverCursor=o[12]),f&8192&&(i.manageHoverState=o[13]),f&16384&&(i.eventsIfTopMost=o[14]),f&32768&&(i.interactive=o[15]),f&16777216&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.hovered=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function Gr(r,e,l){let{$$slots:t={},$$scope:s}=e,{id:n=vn("symbol")}=e,{source:o=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:d=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:j=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:R=!0}=e;function N(F){D=F,l(0,D)}function O(F){Ut.call(this,r,F)}function M(F){Ut.call(this,r,F)}function I(F){Ut.call(this,r,F)}function A(F){Ut.call(this,r,F)}function W(F){Ut.call(this,r,F)}function K(F){Ut.call(this,r,F)}return r.$$set=F=>{"id"in F&&l(1,n=F.id),"source"in F&&l(2,o=F.source),"sourceLayer"in F&&l(3,f=F.sourceLayer),"beforeId"in F&&l(4,i=F.beforeId),"beforeLayerType"in F&&l(5,a=F.beforeLayerType),"paint"in F&&l(6,u=F.paint),"layout"in F&&l(7,c=F.layout),"filter"in F&&l(8,d=F.filter),"applyToClusters"in F&&l(9,g=F.applyToClusters),"minzoom"in F&&l(10,y=F.minzoom),"maxzoom"in F&&l(11,C=F.maxzoom),"hoverCursor"in F&&l(12,S=F.hoverCursor),"manageHoverState"in F&&l(13,j=F.manageHoverState),"hovered"in F&&l(0,D=F.hovered),"eventsIfTopMost"in F&&l(14,P=F.eventsIfTopMost),"interactive"in F&&l(15,R=F.interactive),"$$scope"in F&&l(24,s=F.$$scope)},[D,n,o,f,i,a,u,c,d,g,y,C,S,j,P,R,t,N,O,M,I,A,W,K,s]}class Tn extends X{constructor(e){super(),x(this,e,Gr,qr,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function tl(r){let e=r[0],l,t,s=nl(r);return{c(){s.c(),l=$e()},m(n,o){s.m(n,o),$(n,l,o),t=!0},p(n,o){o&1&&Y(e,e=n[0])?(ue(),_(s,1,1,Z),ce(),s=nl(n),s.c(),m(s,1),s.m(l.parentNode,l)):s.p(n,o)},i(n){t||(m(s),t=!0)},o(n){_(s),t=!1},d(n){n&&p(l),s.d(n)}}}function nl(r){let e;const l=r[15].default,t=Rt(l,r,r[14],null);return{c(){t&&t.c()},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&16384)&&Dt(t,l,s,s[14],e?Ft(l,s[14],n,null):At(s[14]),null)},i(s){e||(m(t,s),e=!0)},o(s){_(t,s),e=!1},d(s){t&&t.d(s)}}}function zr(r){let e,l,t=r[0]&&tl(r);return{c(){t&&t.c(),e=$e()},m(s,n){t&&t.m(s,n),$(s,e,n),l=!0},p(s,[n]){s[0]?t?(t.p(s,n),n&1&&m(t,1)):(t=tl(s),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ue(),_(t,1,1,()=>{t=null}),ce())},i(s){l||(m(t),l=!0)},o(s){_(t),l=!1},d(s){s&&p(e),t&&t.d(s)}}}function Hr(r,e,l){let t,s,{$$slots:n={},$$scope:o}=e,{id:f=vn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:d=null}=e,{attribution:g=null}=e,{minzoom:y=null}=e,{maxzoom:C=null}=e,{volatile:S=null}=e;if(i&&i.includes("pmtiles://")&&!En.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let R=new Qs;En.addProtocol("pmtiles",R.tile)}const{map:j,self:D}=As();Q(r,j,R=>l(13,s=R)),Q(r,D,R=>l(0,t=R));let P;return yn(()=>{t&&s&&(Fs(j,t,P),qe(D,t=null,t),P=void 0)}),r.$$set=R=>{"id"in R&&l(3,f=R.id),"url"in R&&l(4,i=R.url),"tiles"in R&&l(5,a=R.tiles),"promoteId"in R&&l(6,u=R.promoteId),"bounds"in R&&l(7,c=R.bounds),"scheme"in R&&l(8,d=R.scheme),"attribution"in R&&l(9,g=R.attribution),"minzoom"in R&&l(10,y=R.minzoom),"maxzoom"in R&&l(11,C=R.maxzoom),"volatile"in R&&l(12,S=R.volatile),"$$scope"in R&&l(14,o=R.$$scope)},r.$$.update=()=>{r.$$.dirty&16377&&s&&t!==f&&(qe(D,t=f,t),qs(s,t,Gs({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:d,attribution:g,minzoom:y,maxzoom:C,volatile:S}),R=>s&&R===t,()=>{t&&(P=s==null?void 0:s.getSource(t))})),r.$$.dirty&8200&&(s==null||s.on("style.load",()=>{P=s==null?void 0:s.getSource(f)}))},[t,j,D,f,i,a,u,c,d,g,y,C,S,s,o,n]}class de extends X{constructor(e){super(),x(this,e,Hr,zr,Y,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function ll(r,e,l){const t=r.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Er(r){let e,l,t;return l=new lt({props:{$$slots:{default:[Ur]},$$scope:{ctx:r}}}),l.$on("click",r[9]),{c(){e=T("div"),h(l.$$.fragment)},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&16384&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Br(r){let e,l,t,s,n,o,f,i,a,u;l=new lt({props:{$$slots:{default:[Wr]},$$scope:{ctx:r}}}),l.$on("click",r[4]);let c=r[2]&&sl(r);n=new et({props:{label:"Help",$$slots:{default:[Yr]},$$scope:{ctx:r}}}),f=new Zs({}),f.$on("click",r[3]);let d=ye(r[0]),g=[];for(let C=0;C<d.length;C+=1)g[C]=rl(ll(r,d,C));const y=C=>_(g[C],1,1,()=>{g[C]=null});return{c(){e=T("div"),h(l.$$.fragment),t=L(),c&&c.c(),s=L(),h(n.$$.fragment),o=L(),h(f.$$.fragment),i=L();for(let C=0;C<g.length;C+=1)g[C].c();a=$e()},m(C,S){$(C,e,S),b(l,e,null),$(C,t,S),c&&c.m(C,S),$(C,s,S),b(n,C,S),$(C,o,S),b(f,C,S),$(C,i,S);for(let j=0;j<g.length;j+=1)g[j]&&g[j].m(C,S);$(C,a,S),u=!0},p(C,S){const j={};S&16384&&(j.$$scope={dirty:S,ctx:C}),l.$set(j),C[2]?c?c.p(C,S):(c=sl(C),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null);const D={};if(S&16384&&(D.$$scope={dirty:S,ctx:C}),n.$set(D),S&65){d=ye(C[0]);let P;for(P=0;P<d.length;P+=1){const R=ll(C,d,P);g[P]?(g[P].p(R,S),m(g[P],1)):(g[P]=rl(R),g[P].c(),m(g[P],1),g[P].m(a.parentNode,a))}for(ue(),P=d.length;P<g.length;P+=1)y(P);ce()}},i(C){if(!u){m(l.$$.fragment,C),m(n.$$.fragment,C),m(f.$$.fragment,C);for(let S=0;S<d.length;S+=1)m(g[S]);u=!0}},o(C){_(l.$$.fragment,C),_(n.$$.fragment,C),_(f.$$.fragment,C),g=g.filter(Boolean);for(let S=0;S<g.length;S+=1)_(g[S]);u=!1},d(C){C&&(p(e),p(t),p(s),p(o),p(i),p(a)),k(l),c&&c.d(C),k(n,C),k(f,C),Ze(g,C)}}}function Ur(r){let e;return{c(){e=v("Measure lines")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Wr(r){let e;return{c(){e=v("Stop measuring")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function sl(r){let e,l,t=r[2].toFixed(2)+"",s,n;return{c(){e=T("p"),l=v("Length: "),s=v(t),n=v(" meters")},m(o,f){$(o,e,f),w(e,l),w(e,s),w(e,n)},p(o,f){f&4&&t!==(t=o[2].toFixed(2)+"")&&q(s,t)},d(o){o&&p(e)}}}function Yr(r){let e;return{c(){e=T("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){$(l,e,t)},p:Z,d(l){l&&p(e)}}}function Jr(r){let e,l;return{c(){e=T("span"),l=L(),z(e,"class","dot svelte-1tzt432")},m(t,s){$(t,e,s),$(t,l,s)},p:Z,d(t){t&&(p(e),p(l))}}}function rl(r){let e,l,t;function s(f){r[7](f,r[11],r[12],r[13])}function n(){return r[8](r[13])}let o={draggable:!0,$$slots:{default:[Jr]},$$scope:{ctx:r}};return r[11]!==void 0&&(o.lngLat=r[11]),e=new cr({props:o}),H.push(()=>E(e,"lngLat",s)),e.$on("click",n),{c(){h(e.$$.fragment)},m(f,i){b(e,f,i),t=!0},p(f,i){r=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:r}),!l&&i&1&&(l=!0,a.lngLat=r[11],B(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){_(e.$$.fragment,f),t=!1},d(f){k(e,f)}}}function Vr(r){let e,l;const t=[G("measurement-line"),{paint:{"line-color":Qe.measuringLine,"line-width":5}}];let s={};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new be({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f={};e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function Qr(r){let e,l,t,s,n,o,f;const i=[Br,Er],a=[];function u(c,d){return c[1]?0:1}return e=u(r),l=a[e]=i[e](r),s=new zt({props:{data:r[0].length<2?Bn():pn(r[0]),$$slots:{default:[Vr]},$$scope:{ctx:r}}}),{c(){l.c(),t=L(),h(s.$$.fragment)},m(c,d){a[e].m(c,d),$(c,t,d),b(s,c,d),n=!0,o||(f=nt(window,"keydown",r[5]),o=!0)},p(c,[d]){let g=e;e=u(c),e===g?a[e].p(c,d):(ue(),_(a[g],1,1,()=>{a[g]=null}),ce(),l=a[e],l?l.p(c,d):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const y={};d&1&&(y.data=c[0].length<2?Bn():pn(c[0])),d&16384&&(y.$$scope={dirty:d,ctx:c}),s.$set(y)},i(c){n||(m(l),m(s.$$.fragment,c),n=!0)},o(c){_(l),_(s.$$.fragment,c),n=!1},d(c){c&&p(t),a[e].d(c),k(s,c),o=!1,f()}}}function Zr(r,e,l){let t,s=!1,n=[];function o(y){return y.length<2?null:1e3*ur(pn(y),{units:"kilometers"})}function f(y){l(0,n=[...n,y.detail.lngLat.toArray()])}function i(){l(1,s=!1),l(0,n=[])}function a(y){s&&y.key==="Escape"&&(y.stopPropagation(),i())}function u(y){n.splice(y,1),l(0,n)}function c(y,C,S,j){S[j]=y,l(0,n)}const d=y=>u(y),g=()=>l(1,s=!0);return r.$$.update=()=>{r.$$.dirty&1&&l(2,t=o(n))},[n,s,t,f,i,a,u,c,d,g]}class Kr extends X{constructor(e){super(),x(this,e,Zr,Qr,Y,{})}}const te={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Ae=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Xr(r){let e;return{c(){e=v(`Open Government License
  `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function xr(r){let e,l,t,s,n;return t=new ne({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Xr]},$$scope:{ctx:r}}}),{c(){e=T("p"),l=v("License: "),h(t.$$.fragment),s=v(`. Contains OS data © Crown copyright and database right
  2023.`)},m(o,f){$(o,e,f),w(e,l),b(t,e,null),w(e,s),n=!0},p(o,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:o}),t.$set(i)},i(o){n||(m(t.$$.fragment,o),n=!0)},o(o){_(t.$$.fragment,o),n=!1},d(o){o&&p(e),k(t)}}}class Le extends X{constructor(e){super(),x(this,e,null,xr,Y,{})}}function ol(r,e,l){const t=r.slice();return t[2]=e[l],t}function il(r,e,l){const t=r.slice();return t[5]=e[l],t}function fl(r){let e,l;return{c(){e=T("span"),l=v(` 
    `),_e(e,"background",r[5]),_e(e,"width","100%"),_e(e,"border","1px solid black")},m(t,s){$(t,e,s),w(e,l)},p(t,s){s&1&&_e(e,"background",t[5])},d(t){t&&p(e)}}}function al(r){let e,l=r[2]+"",t;return{c(){e=T("span"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&2&&l!==(l=s[2]+"")&&q(t,l)},d(s){s&&p(e)}}}function eo(r){let e,l,t,s=ye(r[0]),n=[];for(let i=0;i<s.length;i+=1)n[i]=fl(il(r,s,i));let o=ye(r[1]),f=[];for(let i=0;i<o.length;i+=1)f[i]=al(ol(r,o,i));return{c(){e=T("div");for(let i=0;i<n.length;i+=1)n[i].c();l=L(),t=T("div");for(let i=0;i<f.length;i+=1)f[i].c();_e(e,"display","flex"),_e(t,"display","flex"),_e(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);$(i,l,a),$(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){s=ye(i[0]);let u;for(u=0;u<s.length;u+=1){const c=il(i,s,u);n[u]?n[u].p(c,a):(n[u]=fl(c),n[u].c(),n[u].m(e,null))}for(;u<n.length;u+=1)n[u].d(1);n.length=s.length}if(a&2){o=ye(i[1]);let u;for(u=0;u<o.length;u+=1){const c=ol(i,o,u);f[u]?f[u].p(c,a):(f[u]=al(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=o.length}},i:Z,o:Z,d(i){i&&(p(e),p(l),p(t)),Ze(n,i),Ze(f,i)}}}function to(r,e,l){let{colorScale:t}=e,{limits:s}=e;return r.$$set=n=>{"colorScale"in n&&l(0,t=n.colorScale),"limits"in n&&l(1,s=n.limits)},[t,s]}class Ge extends X{constructor(e){super(),x(this,e,to,eo,Y,{colorScale:0,limits:1})}}let Ln=Re(new Set);function he(r){let e=new URLSearchParams(window.location.search).has(r),l=Re(e);return l.subscribe(t=>{let s=new URL(window.location.href);t?s.searchParams.set(r,"1"):s.searchParams.delete(r),Ln.update(n=>(t?n.add(r):n.delete(r),n)),window.history.replaceState(null,"",s.toString())}),l}function Ht(r,e,l,t){let s=e,n=new URLSearchParams(window.location.search).get(r);if(n!=null)try{s=t(n)}catch(f){console.warn(`Parsing URL parameter ${r}=${n} failed, using default value: ${f}`)}let o=Re(s);return o.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(r):i.searchParams.set(r,a),Ln.update(u=>(a==null?u.delete(r):u.add(r),u)),window.history.replaceState(null,"",i.toString())}),o}let gn=Re(new Map);function no(r){let e,l;const t=r[3].default,s=Rt(t,r,r[2],null);return{c(){e=T("div"),s&&s.c()},m(n,o){$(n,e,o),s&&s.m(e,null),r[4](e),l=!0},p(n,[o]){s&&s.p&&(!l||o&4)&&Dt(s,t,n,n[2],l?Ft(t,n[2],o,null):At(n[2]),null)},i(n){l||(m(s,n),l=!0)},o(n){_(s,n),l=!1},d(n){n&&p(e),s&&s.d(n),r[4](null)}}}function lo(r,e,l){let{$$slots:t={},$$scope:s}=e,{name:n}=e,o=null;yn(()=>{gn.update(i=>(i.delete(n),i))});function f(i){H[i?"unshift":"push"](()=>{o=i,l(0,o),l(1,n)})}return r.$$set=i=>{"name"in i&&l(1,n=i.name),"$$scope"in i&&l(2,s=i.$$scope)},r.$$.update=()=>{r.$$.dirty&3&&o&&gn.update(i=>(l(0,o.style.display="none",o),i.set(n,o),i))},[o,n,s,t,f]}class me extends X{constructor(e){super(),x(this,e,lo,no,Y,{name:1})}}function ul(r){const e=r[14].OA21CD;r[15]=e;const l=r[14][r[3].kind];r[16]=l}function so(r){let e;return{c(){e=v("Percent of households with a car")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ro(r){let e;return{c(){e=v(`NOMIS TS045
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function oo(r){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function io(r){let e;return{c(){e=v(`Open Government License
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function fo(r){let e,l,t,s,n,o,f,i,a,u,c,d;return t=new ne({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ro]},$$scope:{ctx:r}}}),n=new ne({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[oo]},$$scope:{ctx:r}}}),u=new ne({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[io]},$$scope:{ctx:r}}}),{c(){e=T("p"),l=v("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),s=v(". Output area boundaries from "),h(n.$$.fragment),o=v("."),f=L(),i=T("p"),a=v("License: "),h(u.$$.fragment),c=v(`. Contains OS data © Crown copyright and database
          right 2023.`)},m(g,y){$(g,e,y),w(e,l),b(t,e,null),w(e,s),b(n,e,null),w(e,o),$(g,f,y),$(g,i,y),w(i,a),b(u,i,null),w(i,c),d=!0},p(g,y){const C={};y&131072&&(C.$$scope={dirty:y,ctx:g}),t.$set(C);const S={};y&131072&&(S.$$scope={dirty:y,ctx:g}),n.$set(S);const j={};y&131072&&(j.$$scope={dirty:y,ctx:g}),u.$set(j)},i(g){d||(m(t.$$.fragment,g),m(n.$$.fragment,g),m(u.$$.fragment,g),d=!0)},o(g){_(t.$$.fragment,g),_(n.$$.fragment,g),_(u.$$.fragment,g),d=!1},d(g){g&&(p(e),p(f),p(i)),k(t),k(n),k(u)}}}function ao(r){let e,l,t;return l=new pe({props:{$$slots:{default:[fo]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&131072&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function cl(r){let e,l;return e=new Ge({props:{colorScale:r[4],limits:at(r[3].kind)}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&8&&(n.limits=at(t[3].kind)),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function uo(r){let e;return{c(){e=v("Average cars per household")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function co(r){let e;return{c(){e=v(`NOMIS TS045
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $o(r){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function po(r){let e;return{c(){e=v(`Open Government License
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function mo(r){let e,l,t,s,n,o,f,i,a,u,c,d,g,y;return n=new ne({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[co]},$$scope:{ctx:r}}}),f=new ne({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[$o]},$$scope:{ctx:r}}}),d=new ne({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[po]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown
          here assumes 3.`,l=L(),t=T("p"),s=v("Car/van availability data is from the 2021 census, via "),h(n.$$.fragment),o=v(". Output area boundaries from "),h(f.$$.fragment),i=v("."),a=L(),u=T("p"),c=v("License: "),h(d.$$.fragment),g=v(`. Contains OS data © Crown copyright and database
          right 2023.`)},m(C,S){$(C,e,S),$(C,l,S),$(C,t,S),w(t,s),b(n,t,null),w(t,o),b(f,t,null),w(t,i),$(C,a,S),$(C,u,S),w(u,c),b(d,u,null),w(u,g),y=!0},p(C,S){const j={};S&131072&&(j.$$scope={dirty:S,ctx:C}),n.$set(j);const D={};S&131072&&(D.$$scope={dirty:S,ctx:C}),f.$set(D);const P={};S&131072&&(P.$$scope={dirty:S,ctx:C}),d.$set(P)},i(C){y||(m(n.$$.fragment,C),m(f.$$.fragment,C),m(d.$$.fragment,C),y=!0)},o(C){_(n.$$.fragment,C),_(f.$$.fragment,C),_(d.$$.fragment,C),y=!1},d(C){C&&(p(e),p(l),p(t),p(a),p(u)),k(n),k(f),k(d)}}}function _o(r){let e,l,t;return l=new pe({props:{$$slots:{default:[mo]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&131072&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function $l(r){let e,l;return e=new Ge({props:{colorScale:r[4],limits:at(r[3].kind)}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&8&&(n.limits=at(t[3].kind)),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function go(r){let e;return{c(){e=v("Population density")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ho(r){let e;return{c(){e=v(`NOMIS TS006
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function bo(r){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ko(r){let e,l,t,s,n,o,f,i,a;return t=new ne({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ho]},$$scope:{ctx:r}}}),n=new ne({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[bo]},$$scope:{ctx:r}}}),i=new Le({}),{c(){e=T("p"),l=v("Population density data is from the 2021 census, via "),h(t.$$.fragment),s=v(". Output area boundaries from "),h(n.$$.fragment),o=v("."),f=L(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,l),b(t,e,null),w(e,s),b(n,e,null),w(e,o),$(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&131072&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const g={};c&131072&&(g.$$scope={dirty:c,ctx:u}),n.$set(g)},i(u){a||(m(t.$$.fragment,u),m(n.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(t.$$.fragment,u),_(n.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),k(t),k(n),k(i,u)}}}function wo(r){let e,l,t;return l=new pe({props:{$$slots:{default:[ko]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&131072&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function pl(r){let e,l,t,s;return t=new Ge({props:{colorScale:r[4],limits:at(r[3].kind).map(ml)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",l=L(),h(t.$$.fragment)},m(n,o){$(n,e,o),$(n,l,o),b(t,n,o),s=!0},p(n,o){const f={};o&8&&(f.limits=at(n[3].kind).map(ml)),t.$set(f)},i(n){s||(m(t.$$.fragment,n),s=!0)},o(n){_(t.$$.fragment,n),s=!1},d(n){n&&(p(e),p(l)),k(t,n)}}}function vo(r){let e,l,t,s,n,o,f,i,a,u,c,d,g;function y(M){r[7](M)}let C={$$slots:{right:[ao],default:[so]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new le({props:C}),H.push(()=>E(e,"checked",y)),e.$on("change",r[8]);let S=r[3].kind=="percent_households_with_car"&&cl(r);function j(M){r[9](M)}let D={$$slots:{right:[_o],default:[uo]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),n=new le({props:D}),H.push(()=>E(n,"checked",j)),n.$on("change",r[10]);let P=r[3].kind=="average_cars_per_household"&&$l(r);function R(M){r[11](M)}let N={$$slots:{right:[wo],default:[go]},$$scope:{ctx:r}};r[2]!==void 0&&(N.checked=r[2]),a=new le({props:N}),H.push(()=>E(a,"checked",R)),a.$on("change",r[12]);let O=r[3].kind=="population_density"&&pl(r);return{c(){h(e.$$.fragment),t=L(),S&&S.c(),s=L(),h(n.$$.fragment),f=L(),P&&P.c(),i=L(),h(a.$$.fragment),c=L(),O&&O.c(),d=$e()},m(M,I){b(e,M,I),$(M,t,I),S&&S.m(M,I),$(M,s,I),b(n,M,I),$(M,f,I),P&&P.m(M,I),$(M,i,I),b(a,M,I),$(M,c,I),O&&O.m(M,I),$(M,d,I),g=!0},p(M,I){const A={};I&131072&&(A.$$scope={dirty:I,ctx:M}),!l&&I&1&&(l=!0,A.checked=M[0],B(()=>l=!1)),e.$set(A),M[3].kind=="percent_households_with_car"?S?(S.p(M,I),I&8&&m(S,1)):(S=cl(M),S.c(),m(S,1),S.m(s.parentNode,s)):S&&(ue(),_(S,1,1,()=>{S=null}),ce());const W={};I&131072&&(W.$$scope={dirty:I,ctx:M}),!o&&I&2&&(o=!0,W.checked=M[1],B(()=>o=!1)),n.$set(W),M[3].kind=="average_cars_per_household"?P?(P.p(M,I),I&8&&m(P,1)):(P=$l(M),P.c(),m(P,1),P.m(i.parentNode,i)):P&&(ue(),_(P,1,1,()=>{P=null}),ce());const K={};I&131072&&(K.$$scope={dirty:I,ctx:M}),!u&&I&4&&(u=!0,K.checked=M[2],B(()=>u=!1)),a.$set(K),M[3].kind=="population_density"?O?(O.p(M,I),I&8&&m(O,1)):(O=pl(M),O.c(),m(O,1),O.m(d.parentNode,d)):O&&(ue(),_(O,1,1,()=>{O=null}),ce())},i(M){g||(m(e.$$.fragment,M),m(S),m(n.$$.fragment,M),m(P),m(a.$$.fragment,M),m(O),g=!0)},o(M){_(e.$$.fragment,M),_(S),_(n.$$.fragment,M),_(P),_(a.$$.fragment,M),_(O),g=!1},d(M){M&&(p(t),p(s),p(f),p(i),p(c),p(d)),k(e,M),S&&S.d(M),k(n,M),P&&P.d(M),k(a,M),O&&O.d(M)}}}function yo(r){let e,l,t,s=r[16].toLocaleString()+"",n,o,f=r[15]+"",i;return{c(){e=T("p"),l=v("There are "),t=T("b"),n=v(s),o=v(`
          people per square kilometre in `),i=v(f)},m(a,u){$(a,e,u),w(e,l),w(e,t),w(t,n),w(e,o),w(e,i)},p(a,u){u&16392&&s!==(s=a[16].toLocaleString()+"")&&q(n,s),u&16384&&f!==(f=a[15]+"")&&q(i,f)},d(a){a&&p(e)}}}function So(r){let e,l,t=r[15]+"",s,n,o,f=r[16]+"",i,a;return{c(){e=T("p"),l=v("Households in "),s=v(t),n=v(` have an average of
          `),o=T("b"),i=v(f),a=v(`
          cars`)},m(u,c){$(u,e,c),w(e,l),w(e,s),w(e,n),w(e,o),w(o,i),w(e,a)},p(u,c){c&16384&&t!==(t=u[15]+"")&&q(s,t),c&16392&&f!==(f=u[16]+"")&&q(i,f)},d(u){u&&p(e)}}}function Co(r){let e,l,t=r[16]+"",s,n,o,f=r[15]+"",i,a;return{c(){e=T("p"),l=T("b"),s=v(t),n=v("%"),o=v(`
          of households in `),i=v(f),a=v(" have 1 or more cars")},m(u,c){$(u,e,c),w(e,l),w(l,s),w(l,n),w(e,o),w(e,i),w(e,a)},p(u,c){c&16392&&t!==(t=u[16]+"")&&q(s,t),c&16384&&f!==(f=u[15]+"")&&q(i,f)},d(u){u&&p(e)}}}function To(r){ul(r);let e;function l(n,o){return n[3].kind=="percent_households_with_car"?Co:n[3].kind=="average_cars_per_household"?So:yo}let t=l(r),s=t(r);return{c(){s.c(),e=$e()},m(n,o){s.m(n,o),$(n,e,o)},p(n,o){ul(n),t===(t=l(n))&&s?s.p(n,o):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){n&&p(e),s.d(n)}}}function Lo(r){let e,l;return e=new ae({props:{$$slots:{default:[To,({props:t})=>({14:t}),({props:t})=>t?16384:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&147464&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Io(r){let e,l,t,s;const n=[G(Ee),{sourceLayer:Ee},{paint:{"fill-color":ke(["get",r[3].kind],at(r[3].kind),r[4]),"fill-opacity":se(.5,.7)}},{layout:{visibility:r[3].kind!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Lo]},$$scope:{ctx:r}};for(let a=0;a<n.length;a+=1)o=re(o,n[a]);e=new Fe({props:o}),e.$on("click",r[6]);const f=[G(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3].kind!=""?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=re(i,f[a]);return t=new be({props:i}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,l,u),b(t,a,u),s=!0},p(a,u){const c=u&24?oe(n,[u&0&&ie(G(Ee)),u&0&&{sourceLayer:Ee},u&24&&{paint:{"fill-color":ke(["get",a[3].kind],at(a[3].kind),a[4]),"fill-opacity":se(.5,.7)}},u&8&&{layout:{visibility:a[3].kind!=""?"visible":"none"}},n[4],n[5],n[6]]):{};u&131080&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&8?oe(f,[u&0&&ie(G(`${Ee}-outline`)),u&0&&{sourceLayer:Ee},f[2],u&8&&{layout:{visibility:a[3].kind!=""?"visible":"none"}}]):{};t.$set(d)},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),s=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),s=!1},d(a){a&&p(l),k(e,a),k(t,a)}}}function Mo(r){let e,l,t,s;return e=new me({props:{name:Ee,$$slots:{default:[vo]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${Ee}.pmtiles`,$$slots:{default:[Io]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&131087&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&131080&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let Ee="census_output_areas";function No(r){return r.show?r.kind:null}function Oo(r){return{show:!0,kind:r}}function at(r){return r=="percent_households_with_car"?[0,20,40,60,80,100]:r=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const ml=r=>r.toLocaleString();function jo(r,e,l){let t,s=te.sequential_low_to_high,o=Ht(Ee,{show:!1,kind:""},No,Oo);Q(r,o,j=>l(3,t=j));let f=t.kind=="percent_households_with_car",i=t.kind=="average_cars_per_household",a=t.kind=="population_density";function u(j){let D=j.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${D}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${D}`,"_blank")}function c(j){f=j,l(0,f)}const d=()=>{l(1,i=!1),l(2,a=!1)};function g(j){i=j,l(1,i)}const y=()=>{l(0,f=!1),l(2,a=!1)};function C(j){a=j,l(2,a)}const S=()=>{l(0,f=!1),l(1,i=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(f?(qe(o,t.show=!0,t),qe(o,t.kind="percent_households_with_car",t)):i?(qe(o,t.show=!0,t),qe(o,t.kind="average_cars_per_household",t)):a?(qe(o,t.show=!0,t),qe(o,t.kind="population_density",t)):(qe(o,t.show=!1,t),qe(o,t.kind="",t)))},[f,i,a,t,s,o,u,c,d,g,y,C,S]}class Po extends X{constructor(e){super(),x(this,e,jo,Mo,Y,{})}}function Ro(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
    Combined authorities`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function Do(r){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ao(r){let e,l,t,s,n,o,f;return t=new ne({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Do]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=T("p"),l=v("Data from "),h(t.$$.fragment),s=v(", as of December 2022."),n=L(),h(o.$$.fragment)},m(i,a){$(i,e,a),w(e,l),b(t,e,null),w(e,s),$(i,n,a),b(o,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(o.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(o.$$.fragment,i),f=!1},d(i){i&&(p(e),p(n)),k(t),k(o,i)}}}function Fo(r){let e,l,t;return l=new pe({props:{$$slots:{default:[Ao]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function qo(r){let e,l,t;function s(o){r[3](o)}let n={$$slots:{right:[Fo],default:[Ro]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&32&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function Go(r){let e,l=r[4].name+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&16&&l!==(l=s[4].name+"")&&q(t,l)},d(s){s&&p(e)}}}function zo(r){let e,l;return e=new ae({props:{$$slots:{default:[Go,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&48&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ho(r){let e,l,t,s;const n=[G(pt),{paint:{"fill-color":r[1],"fill-opacity":se(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[zo]},$$scope:{ctx:r}};for(let a=0;a<n.length;a+=1)o=re(o,n[a]);e=new Fe({props:o}),e.$on("click",Bo);const f=[G(`${pt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=re(i,f[a]);return t=new be({props:i}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,l,u),b(t,a,u),s=!0},p(a,u){const c=u&3?oe(n,[u&0&&ie(G(pt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":se(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},n[3],n[4],n[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?oe(f,[u&0&&ie(G(`${pt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),s=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),s=!1},d(a){a&&p(l),k(e,a),k(t,a)}}}function Eo(r){let e,l,t,s;return e=new me({props:{name:pt,$$slots:{default:[qo]},$$scope:{ctx:r}}}),t=new zt({props:{data:`${ge()}/v1/${pt}.geojson`,$$slots:{default:[Ho]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&33&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&33&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let pt="combined_authorities";function Bo(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Uo(r,e,l){let t,s=te.combined_authorities,n=he(pt);Q(r,n,f=>l(0,t=f));function o(f){t=f,n.set(t)}return[t,s,n,o]}class Wo extends X{constructor(e){super(),x(this,e,Uo,Eo,Y,{})}}function Yo(r){let e;return{c(){e=v("Indices of Multiple Deprivation")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Jo(r){let e;return{c(){e=v(`DLUCH GIS
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Vo(r){let e;return{c(){e=v(`here
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Qo(r){let e,l,t,s,n,o,f,i,a;return t=new ne({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Jo]},$$scope:{ctx:r}}}),n=new ne({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Vo]},$$scope:{ctx:r}}}),i=new Le({}),{c(){e=T("p"),l=v("The 2019 English IMD scores come from "),h(t.$$.fragment),s=v(`. Note the LSOAs identified are from the 2011 census. A
          detailed breakdown of the score across different categories can be
          found `),h(n.$$.fragment),o=v("."),f=L(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,l),b(t,e,null),w(e,s),b(n,e,null),w(e,o),$(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&64&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const g={};c&64&&(g.$$scope={dirty:c,ctx:u}),n.$set(g)},i(u){a||(m(t.$$.fragment,u),m(n.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(t.$$.fragment,u),_(n.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),k(t),k(n),k(i,u)}}}function Zo(r){let e,l,t;return l=new pe({props:{$$slots:{default:[Qo]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&64&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function _l(r){let e,l;return e=new Ge({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p:Z,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ko(r){let e,l,t,s,n;function o(a){r[4](a)}let f={$$slots:{right:[Zo],default:[Yo]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0]&&_l(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&64&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0],B(()=>l=!1)),e.$set(c),a[0]?i?(i.p(a,u),u&1&&m(i,1)):(i=_l(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function Xo(r){let e,l=r[5].LSOA11CD+"",t,s,n,o=r[5].score+"",f,i,a,u,c,d=r[5].rank.toLocaleString()+"",g,y;return{c(){e=T("p"),t=v(l),s=v(` has an IMD score of
        `),n=T("b"),f=v(o),i=L(),a=T("p"),u=v("Rank: "),c=T("b"),g=v(d),y=v(`
        / 32,844 LSOAs`)},m(C,S){$(C,e,S),w(e,t),w(e,s),w(e,n),w(n,f),$(C,i,S),$(C,a,S),w(a,u),w(a,c),w(c,g),w(a,y)},p(C,S){S&32&&l!==(l=C[5].LSOA11CD+"")&&q(t,l),S&32&&o!==(o=C[5].score+"")&&q(f,o),S&32&&d!==(d=C[5].rank.toLocaleString()+"")&&q(g,d)},d(C){C&&(p(e),p(i),p(a))}}}function xo(r){let e,l;return e=new ae({props:{$$slots:{default:[Xo,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&96&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ei(r){let e,l,t,s;const n=[G(Be),{sourceLayer:Be},{paint:{"fill-color":ke(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":se(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[xo]},$$scope:{ctx:r}};for(let a=0;a<n.length;a+=1)o=re(o,n[a]);e=new Fe({props:o});const f=[G(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=re(i,f[a]);return t=new be({props:i}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,l,u),b(t,a,u),s=!0},p(a,u){const c=u&7?oe(n,[u&0&&ie(G(Be)),u&0&&{sourceLayer:Be},u&6&&{paint:{"fill-color":ke(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":se(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},n[4],n[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&1?oe(f,[u&0&&ie(G(`${Be}-outline`)),u&0&&{sourceLayer:Be},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),s=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),s=!1},d(a){a&&p(l),k(e,a),k(t,a)}}}function ti(r){let e,l,t,s;return e=new me({props:{name:Be,$$slots:{default:[Ko]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${Be}.pmtiles`,$$slots:{default:[ei]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&65&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&65&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let Be="imd";function ni(r,e,l){let t,s=te.sequential_low_to_high,n=[0,2,4,6,8,10],o=he(Be);Q(r,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,s,n,o,f]}class li extends X{constructor(e){super(),x(this,e,ni,ti,Y,{})}}function si(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
    Local Authority Districts`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function ri(r){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function oi(r){let e,l,t,s,n,o,f;return t=new ne({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[ri]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=T("p"),l=v("Data from "),h(t.$$.fragment),s=v(", as of January 2024."),n=L(),h(o.$$.fragment)},m(i,a){$(i,e,a),w(e,l),b(t,e,null),w(e,s),$(i,n,a),b(o,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(o.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(o.$$.fragment,i),f=!1},d(i){i&&(p(e),p(n)),k(t),k(o,i)}}}function ii(r){let e,l,t;return l=new pe({props:{$$slots:{default:[oi]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function fi(r){let e,l,t;function s(o){r[3](o)}let n={$$slots:{right:[ii],default:[si]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&32&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function ai(r){let e,l=r[4].name+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&16&&l!==(l=s[4].name+"")&&q(t,l)},d(s){s&&p(e)}}}function ui(r){let e,l;return e=new ae({props:{$$slots:{default:[ai,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&48&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ci(r){let e,l,t,s;const n=[G(mt),{paint:{"fill-color":r[1],"fill-opacity":se(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[ui]},$$scope:{ctx:r}};for(let a=0;a<n.length;a+=1)o=re(o,n[a]);e=new Fe({props:o}),e.$on("click",pi);const f=[G(`${mt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=re(i,f[a]);return t=new be({props:i}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,l,u),b(t,a,u),s=!0},p(a,u){const c=u&3?oe(n,[u&0&&ie(G(mt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":se(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},n[3],n[4],n[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?oe(f,[u&0&&ie(G(`${mt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),s=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),s=!1},d(a){a&&p(l),k(e,a),k(t,a)}}}function $i(r){let e,l,t,s;return e=new me({props:{name:mt,$$slots:{default:[fi]},$$scope:{ctx:r}}}),t=new zt({props:{data:`${ge()}/v1/${mt}.geojson`,$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&33&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&33&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let mt="local_authority_districts";function pi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function mi(r,e,l){let t,s=te.local_authority_districts,n=he(mt);Q(r,n,f=>l(0,t=f));function o(f){t=f,n.set(t)}return[t,s,n,o]}class _i extends X{constructor(e){super(),x(this,e,mi,$i,Y,{})}}function gi(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
    Local Planning Authorities`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function di(r){let e;return{c(){e=v(`local authority
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function hi(r){let e;return{c(){e=v(`national park authorit
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function bi(r){let e;return{c(){e=v(`development corporation
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ki(r){let e;return{c(){e=v("this map")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function wi(r){let e;return{c(){e=v(`planning.data.gov.uk
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function vi(r){let e,l,t,s,n,o,f,i,a,u,c,d,g,y,C,S,j,D,P,R,N,O;return t=new ne({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[di]},$$scope:{ctx:r}}}),n=new ne({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[hi]},$$scope:{ctx:r}}}),f=new ne({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[bi]},$$scope:{ctx:r}}}),g=new ne({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ki]},$$scope:{ctx:r}}}),D=new ne({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[wi]},$$scope:{ctx:r}}}),N=new Le({}),{c(){e=T("p"),l=v("LPAs may be a "),h(t.$$.fragment),s=v(", "),h(n.$$.fragment),o=v("y, or "),h(f.$$.fragment),i=v("."),a=L(),u=T("p"),c=T("strong"),d=v(`Note there are overlapping LPAs near Northhamptonshire. Only one
            authority name is shown when hovering. Use `),h(g.$$.fragment),y=v(" to get more details."),C=L(),S=T("p"),j=v("Data from ONS Geography via "),h(D.$$.fragment),P=v(", as of November 2022."),R=L(),h(N.$$.fragment)},m(M,I){$(M,e,I),w(e,l),b(t,e,null),w(e,s),b(n,e,null),w(e,o),b(f,e,null),w(e,i),$(M,a,I),$(M,u,I),w(u,c),w(c,d),b(g,c,null),w(c,y),$(M,C,I),$(M,S,I),w(S,j),b(D,S,null),w(S,P),$(M,R,I),b(N,M,I),O=!0},p(M,I){const A={};I&32&&(A.$$scope={dirty:I,ctx:M}),t.$set(A);const W={};I&32&&(W.$$scope={dirty:I,ctx:M}),n.$set(W);const K={};I&32&&(K.$$scope={dirty:I,ctx:M}),f.$set(K);const F={};I&32&&(F.$$scope={dirty:I,ctx:M}),g.$set(F);const J={};I&32&&(J.$$scope={dirty:I,ctx:M}),D.$set(J)},i(M){O||(m(t.$$.fragment,M),m(n.$$.fragment,M),m(f.$$.fragment,M),m(g.$$.fragment,M),m(D.$$.fragment,M),m(N.$$.fragment,M),O=!0)},o(M){_(t.$$.fragment,M),_(n.$$.fragment,M),_(f.$$.fragment,M),_(g.$$.fragment,M),_(D.$$.fragment,M),_(N.$$.fragment,M),O=!1},d(M){M&&(p(e),p(a),p(u),p(C),p(S),p(R)),k(t),k(n),k(f),k(g),k(D),k(N,M)}}}function yi(r){let e,l,t;return l=new pe({props:{$$slots:{default:[vi]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Si(r){let e,l,t;function s(o){r[3](o)}let n={$$slots:{right:[yi],default:[gi]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&32&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function Ci(r){let e,l=r[4].name+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&16&&l!==(l=s[4].name+"")&&q(t,l)},d(s){s&&p(e)}}}function Ti(r){let e,l;return e=new ae({props:{$$slots:{default:[Ci,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&48&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Li(r){let e,l,t,s;const n=[G(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":se(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[Ti]},$$scope:{ctx:r}};for(let a=0;a<n.length;a+=1)o=re(o,n[a]);e=new Fe({props:o});const f=[G(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=re(i,f[a]);return t=new be({props:i}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,l,u),b(t,a,u),s=!0},p(a,u){const c=u&3?oe(n,[u&0&&ie(G(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":a[1],"fill-opacity":se(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},n[4],n[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?oe(f,[u&0&&ie(G(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),s=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),s=!1},d(a){a&&p(l),k(e,a),k(t,a)}}}function Ii(r){let e,l,t,s;return e=new me({props:{name:Ue,$$slots:{default:[Si]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${Ue}.pmtiles`,$$slots:{default:[Li]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&33&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&33&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let Ue="local_planning_authorities";function Mi(r,e,l){let t,s=te.local_planning_authorities,n=he(Ue);Q(r,n,f=>l(0,t=f));function o(f){t=f,n.set(t)}return[t,s,n,o]}class Ni extends X{constructor(e){super(),x(this,e,Mi,Ii,Y,{})}}function Oi(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
    Parliamentary constituencies`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function ji(r){let e;return{c(){e=v(`Ordnance Survey Boundary-Line
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Pi(r){let e,l,t,s,n,o,f;return t=new ne({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ji]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=T("p"),l=v("Data from "),h(t.$$.fragment),s=v(", as of May 2023."),n=L(),h(o.$$.fragment)},m(i,a){$(i,e,a),w(e,l),b(t,e,null),w(e,s),$(i,n,a),b(o,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(o.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(o.$$.fragment,i),f=!1},d(i){i&&(p(e),p(n)),k(t),k(o,i)}}}function Ri(r){let e,l,t;return l=new pe({props:{$$slots:{default:[Pi]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Di(r){let e,l,t;function s(o){r[3](o)}let n={$$slots:{right:[Ri],default:[Oi]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&32&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function Ai(r){let e,l=r[4].Name+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&16&&l!==(l=s[4].Name+"")&&q(t,l)},d(s){s&&p(e)}}}function Fi(r){let e,l;return e=new ae({props:{$$slots:{default:[Ai,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&48&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function qi(r){let e,l,t,s;const n=[G(We),{sourceLayer:We},{paint:{"fill-color":r[1],"fill-opacity":se(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Fi]},$$scope:{ctx:r}};for(let a=0;a<n.length;a+=1)o=re(o,n[a]);e=new Fe({props:o}),e.$on("click",zi);const f=[G(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=re(i,f[a]);return t=new be({props:i}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,l,u),b(t,a,u),s=!0},p(a,u){const c=u&3?oe(n,[u&0&&ie(G(We)),u&0&&{sourceLayer:We},u&2&&{paint:{"fill-color":a[1],"fill-opacity":se(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},n[4],n[5],n[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?oe(f,[u&0&&ie(G(`${We}-outline`)),u&0&&{sourceLayer:We},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),s=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),s=!1},d(a){a&&p(l),k(e,a),k(t,a)}}}function Gi(r){let e,l,t,s;return e=new me({props:{name:We,$$slots:{default:[Di]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${We}.pmtiles`,$$slots:{default:[qi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&33&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&33&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let We="parliamentary_constituencies";function zi(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Hi(r,e,l){let t,s=te.parliamentary_constituencies,n=he(We);Q(r,n,f=>l(0,t=f));function o(f){t=f,n.set(t)}return[t,s,n,o]}class Ei extends X{constructor(e){super(),x(this,e,Hi,Gi,Y,{})}}function Bi(r){let e;return{c(){e=v("Pollution")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ui(r){let e;return{c(){e=v(`DEFRA
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Wi(r){let e,l,t,s,n,o,f,i,a;return t=new ne({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),i=new Le({}),{c(){e=T("p"),l=v("Most layers show air quality data from "),h(t.$$.fragment),s=v(`. The measurements are annual means, in units of
          µgm
          `),n=T("sup"),n.textContent="3",o=v(`
          . Note the particulate matter layers are not corrected for natural sources.`),f=L(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,l),b(t,e,null),w(e,s),w(e,n),w(e,o),$(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&4096&&(d.$$scope={dirty:c,ctx:u}),t.$set(d)},i(u){a||(m(t.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(t.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),k(t),k(i,u)}}}function Yi(r){let e,l,t;return l=new pe({props:{$$slots:{default:[Wi]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&4096&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function gl(r){let e,l,t,s,n=r[3](r[0].pollutant)+"",o,f,i,a,u,c,d,g,y,C,S,j,D;function P(N){r[6](N)}let R={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return r[0].pollutant!==void 0&&(R.value=r[0].pollutant),e=new qt({props:R}),H.push(()=>E(e,"value",P)),{c(){h(e.$$.fragment),t=L(),s=T("p"),o=v(n),f=L(),i=T("div"),a=T("label"),u=v(`Opacity
        `),c=T("input"),d=L(),g=T("img"),z(c,"type","range"),z(c,"min","0"),z(c,"max","100"),tn(g.src,y=r[4](r[0].pollutant))||z(g,"src",y),z(g,"width",150),z(g,"alt",C=`Legend for ${r[0].pollutant} layer`)},m(N,O){b(e,N,O),$(N,t,O),$(N,s,O),w(s,o),$(N,f,O),$(N,i,O),w(i,a),w(a,u),w(a,c),Ve(c,r[0].opacity),$(N,d,O),$(N,g,O),S=!0,j||(D=[nt(c,"change",r[7]),nt(c,"input",r[7])],j=!0)},p(N,O){const M={};!l&&O&1&&(l=!0,M.value=N[0].pollutant,B(()=>l=!1)),e.$set(M),(!S||O&1)&&n!==(n=N[3](N[0].pollutant)+"")&&q(o,n),O&1&&Ve(c,N[0].opacity),(!S||O&1&&!tn(g.src,y=N[4](N[0].pollutant)))&&z(g,"src",y),(!S||O&1&&C!==(C=`Legend for ${N[0].pollutant} layer`))&&z(g,"alt",C)},i(N){S||(m(e.$$.fragment,N),S=!0)},o(N){_(e.$$.fragment,N),S=!1},d(N){N&&(p(t),p(s),p(f),p(i),p(d),p(g)),k(e,N),j=!1,zs(D)}}}function Ji(r){let e,l,t,s,n;function o(a){r[5](a)}let f={$$slots:{right:[Yi],default:[Bi]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0].show&&gl(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&4096&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0].show,B(()=>l=!1)),e.$set(c),a[0].show?i?(i.p(a,u),u&1&&m(i,1)):(i=gl(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function Vi(r){let e,l;const t=[G(nn),{paint:{"raster-opacity":r[0].opacity/100}},{layout:{visibility:r[0].show?"visible":"none"}}];let s={};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new $r({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&1?oe(t,[o&0&&ie(G(nn)),o&1&&{paint:{"raster-opacity":n[0].opacity/100}},o&1&&{layout:{visibility:n[0].show?"visible":"none"}}]):{};e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function Qi(r){let e,l,t,s;return e=new me({props:{name:nn,$$slots:{default:[Ji]},$$scope:{ctx:r}}}),t=new Ar({props:{tiles:[r[1]],tileSize:256,$$slots:{default:[Vi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&4097&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&2&&(i.tiles=[n[1]]),o&4097&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let nn="pollution";function Zi(r){return r.show?`${r.pollutant}/${r.opacity}`:null}function Ki(r){let[e,l]=r.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function Xi(r,e,l){let t,s,n,f=Ht(nn,{show:!1,pollutant:"PM25_viridis",opacity:50},Zi,Ki);Q(r,f,C=>l(0,n=C));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${n.pollutant}/MapServer/WMSServer`}function a(C){return t[1]}function u(C){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${S}`}function c(C){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${S}`}function d(C){r.$$.not_equal(n.show,C)&&(n.show=C,f.set(n))}function g(C){r.$$.not_equal(n.pollutant,C)&&(n.pollutant=C,f.set(n))}function y(){n.opacity=Vt(this.value),f.set(n)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[n.pollutant]),r.$$.dirty&1&&l(1,s=u(n.pollutant))},[n,s,f,a,c,d,g,y]}class xi extends X{constructor(e){super(),x(this,e,Xi,Qi,Y,{})}}function ef(r){let e;return{c(){e=v("Road noise")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function tf(r){let e;return{c(){e=v(`DEFRA
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function nf(r){let e,l,t,s,n,o,f,i,a;return n=new ne({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[tf]},$$scope:{ctx:r}}}),i=new Le({}),{c(){e=T("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
          units of decibels for the 16-hour period between 7am and 11pm. Only
          roads in areas with at least 100,000 people are included.`,l=L(),t=T("p"),s=v("Data from June 2019, produced by "),h(n.$$.fragment),o=v(". See there for methodology details"),f=L(),h(i.$$.fragment)},m(u,c){$(u,e,c),$(u,l,c),$(u,t,c),w(t,s),b(n,t,null),w(t,o),$(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),n.$set(d)},i(u){a||(m(n.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(n.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(l),p(t),p(f)),k(n),k(i,u)}}}function lf(r){let e,l,t;return l=new pe({props:{$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function dl(r){let e,l;return e=new Ge({props:{colorScale:r[1],limits:["55","65","75",">"]}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p:Z,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function sf(r){let e,l,t,s,n;function o(a){r[3](a)}let f={$$slots:{right:[lf],default:[ef]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0]&&dl(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0],B(()=>l=!1)),e.$set(c),a[0]?i?(i.p(a,u),u&1&&m(i,1)):(i=dl(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function rf(r){let e,l=r[4].noiseclass+"",t,s,n=hl(r[4].noiseclass)+"",o,f;return{c(){e=T("p"),t=v(l),s=v(" dB ("),o=v(n),f=v(")")},m(i,a){$(i,e,a),w(e,t),w(e,s),w(e,o),w(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&q(t,l),a&16&&n!==(n=hl(i[4].noiseclass)+"")&&q(o,n)},d(i){i&&p(e)}}}function of(r){let e,l;return e=new ae({props:{$$slots:{default:[rf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&48&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ff(r){let e,l;const t=[G(_t),{sourceLayer:_t},{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":se(.5,.8)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[of]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new Fe({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&3?oe(t,[o&0&&ie(G(_t)),o&0&&{sourceLayer:_t},o&2&&{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":n[1][0],"60.0-64.9":n[1][0],"65.0-69.9":n[1][1],"70.0-74.9":n[1][1],">=75.0":n[1][2]},"red"),"fill-opacity":se(.5,.8)}},o&1&&{layout:{visibility:n[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function af(r){let e,l,t,s;return e=new me({props:{name:_t,$$slots:{default:[sf]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${_t}.pmtiles`,$$slots:{default:[ff]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&33&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&33&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let _t="road_noise";function hl(r){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[r]}function uf(r,e,l){let t,s=[te.sequential_low_to_high[0],te.sequential_low_to_high[2],te.sequential_low_to_high[4]],n=he(_t);Q(r,n,f=>l(0,t=f));function o(f){t=f,n.set(t)}return[t,s,n,o]}class cf extends X{constructor(e){super(),x(this,e,uf,af,Y,{})}}function $f(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
    Wards`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function pf(r){let e;return{c(){e=v(`ONS Geography
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function mf(r){let e,l,t,s,n,o,f;return t=new ne({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[pf]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=T("p"),l=v("Data from "),h(t.$$.fragment),s=v(", as of May 2023."),n=L(),h(o.$$.fragment)},m(i,a){$(i,e,a),w(e,l),b(t,e,null),w(e,s),$(i,n,a),b(o,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(o.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(o.$$.fragment,i),f=!1},d(i){i&&(p(e),p(n)),k(t),k(o,i)}}}function _f(r){let e,l,t;return l=new pe({props:{$$slots:{default:[mf]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function gf(r){let e,l,t;function s(o){r[3](o)}let n={$$slots:{right:[_f],default:[$f]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&32&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function df(r){let e,l=r[4].name+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&16&&l!==(l=s[4].name+"")&&q(t,l)},d(s){s&&p(e)}}}function hf(r){let e,l;return e=new ae({props:{$$slots:{default:[df,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&48&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function bf(r){let e,l,t,s;const n=[G(Ye),{sourceLayer:Ye},{paint:{"fill-color":r[1],"fill-opacity":se(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[hf]},$$scope:{ctx:r}};for(let a=0;a<n.length;a+=1)o=re(o,n[a]);e=new Fe({props:o}),e.$on("click",wf);const f=[G(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=re(i,f[a]);return t=new be({props:i}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,l,u),b(t,a,u),s=!0},p(a,u){const c=u&3?oe(n,[u&0&&ie(G(Ye)),u&0&&{sourceLayer:Ye},u&2&&{paint:{"fill-color":a[1],"fill-opacity":se(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},n[4],n[5],n[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?oe(f,[u&0&&ie(G(`${Ye}-outline`)),u&0&&{sourceLayer:Ye},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),s=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),s=!1},d(a){a&&p(l),k(e,a),k(t,a)}}}function kf(r){let e,l,t,s;return e=new me({props:{name:Ye,$$slots:{default:[gf]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${Ye}.pmtiles`,$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&33&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&33&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let Ye="wards";function wf(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function vf(r,e,l){let t,s=te.wards,n=he(Ye);Q(r,n,f=>l(0,t=f));function o(f){t=f,n.set(t)}return[t,s,n,o]}class yf extends X{constructor(e){super(),x(this,e,vf,kf,Y,{})}}function Sf(r){let e;return{c(){e=v("Open Data Commons Open Database License")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Cf(r){let e,l,t,s;return t=new ne({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Sf]},$$scope:{ctx:r}}}),{c(){e=T("p"),l=v("License: "),h(t.$$.fragment)},m(n,o){$(n,e,o),w(e,l),b(t,e,null),s=!0},p(n,[o]){const f={};o&1&&(f.$$scope={dirty:o,ctx:n}),t.$set(f)},i(n){s||(m(t.$$.fragment,n),s=!0)},o(n){_(t.$$.fragment,n),s=!1},d(n){n&&p(e),k(t)}}}class Xe extends X{constructor(e){super(),x(this,e,null,Cf,Y,{})}}function Tf(r){let e,l,t;return e=new Te({props:{color:te.bus_route_with_lane}}),{c(){h(e.$$.fragment),l=v(`
    Bus routes`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function Lf(r){let e;return{c(){e=v(`GTFS
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function If(r){let e,l,t,s,n,o,f,i,a;return n=new ne({props:{href:"https://gtfs.org",$$slots:{default:[Lf]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It
          also shows whether the road has a bus lane or not.`,l=L(),t=T("p"),s=v("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(n.$$.fragment),o=v(`, and doesn't include which routes are run or the
          frequency of service.`),f=L(),h(i.$$.fragment)},m(u,c){$(u,e,c),$(u,l,c),$(u,t,c),w(t,s),b(n,t,null),w(t,o),$(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&16&&(d.$$scope={dirty:c,ctx:u}),n.$set(d)},i(u){a||(m(n.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(n.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(l),p(t),p(f)),k(n),k(i,u)}}}function Mf(r){let e,l,t;return l=new pe({props:{$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&16&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Nf(r){let e,l,t;function s(o){r[2](o)}let n={$$slots:{right:[Mf],default:[Tf]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&16&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function Of(r){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function jf(r){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Pf(r){let e;function l(n,o){return n[3].has_bus_lane?jf:Of}let t=l(r),s=t(r);return{c(){s.c(),e=$e()},m(n,o){s.m(n,o),$(n,e,o)},p(n,o){t!==(t=l(n))&&(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){n&&p(e),s.d(n)}}}function Rf(r){let e,l;return e=new ae({props:{$$slots:{default:[Pf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&24&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Df(r){let e,l;const t=[G(gt),{sourceLayer:gt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],te.bus_route_with_lane,te.bus_route_without_lane],"line-width":5,"line-opacity":se(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Rf]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new be({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&1?oe(t,[o&0&&ie(G(gt)),o&0&&{sourceLayer:gt},t[2],o&1&&{layout:{visibility:n[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function Af(r){let e,l,t,s;return e=new me({props:{name:gt,$$slots:{default:[Nf]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${gt}.pmtiles`,$$slots:{default:[Df]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&17&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&17&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let gt="bus_routes";function Ff(r,e,l){let t,s=he(gt);Q(r,s,o=>l(0,t=o));function n(o){t=o,s.set(t)}return[t,s,n]}class qf extends X{constructor(e){super(),x(this,e,Ff,Af,Y,{})}}function bl(r){const e=Zf(r[9]);r[10]=e[0],r[11]=e[1],r[12]=e[2]}function kl(r,e,l){const t=r.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function Gf(r){let e;return{c(){e=v("Cycle paths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function zf(r){let e,l,t,s,n,o,f,i;return f=new Xe({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap
          (as of 15 August 2023).`,l=L(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
            include fully or partly segregated cycletracks alongside a carriageway,
            stepped cycletracks, and tracks off the carriageway entirely. They&#39;re
            also separated from foot traffic.</li> <li><b>Unprotected lanes</b>
            are mandatory or advisory lanes on the carriageway, without any physical
            protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
            paths are split between cycle and foot traffic, and are separated from
            motor traffic somehow. There can be segregation between cyclists and
            pedestrians or not.</li>`,s=L(),n=T("p"),n.textContent=`Note there are many known limitations with this layer. Data in
          OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
          processing is also imperfect. You can click a segment to see full
          OpenStreetMap data. Please do report issues with the classification or
          data.`,o=L(),h(f.$$.fragment)},m(a,u){$(a,e,u),$(a,l,u),$(a,t,u),$(a,s,u),$(a,n,u),$(a,o,u),b(f,a,u),i=!0},p:Z,i(a){i||(m(f.$$.fragment,a),i=!0)},o(a){_(f.$$.fragment,a),i=!1},d(a){a&&(p(e),p(l),p(t),p(s),p(n),p(o)),k(f,a)}}}function Hf(r){let e,l,t;return l=new pe({props:{$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&131072&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function wl(r){let e,l,t;return l=new st({props:{$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){e=T("div"),h(l.$$.fragment),_e(e,"border","1px solid black"),_e(e,"padding","8px")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&131073&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Ef(r){let e,l,t=r[13]+"",s,n,o;return e=new Te({props:{color:r[14]}}),{c(){h(e.$$.fragment),l=L(),s=v(t),n=L()},m(f,i){b(e,f,i),$(f,l,i),$(f,s,i),$(f,n,i),o=!0},p:Z,i(f){o||(m(e.$$.fragment,f),o=!0)},o(f){_(e.$$.fragment,f),o=!1},d(f){f&&(p(l),p(s),p(n)),k(e,f)}}}function vl(r){let e,l,t;function s(o){r[5](o,r[10])}let n={$$slots:{default:[Ef]},$$scope:{ctx:r}};return r[0][r[10]]!==void 0&&(n.checked=r[0][r[10]]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){r=o;const i={};f&131072&&(i.$$scope={dirty:f,ctx:r}),!l&&f&5&&(l=!0,i.checked=r[0][r[10]],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function Bf(r){let e,l,t=ye(r[2]),s=[];for(let o=0;o<t.length;o+=1)s[o]=vl(kl(r,t,o));const n=o=>_(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=$e()},m(o,f){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(o,f);$(o,e,f),l=!0},p(o,f){if(f&5){t=ye(o[2]);let i;for(i=0;i<t.length;i+=1){const a=kl(o,t,i);s[i]?(s[i].p(a,f),m(s[i],1)):(s[i]=vl(a),s[i].c(),m(s[i],1),s[i].m(e.parentNode,e))}for(ue(),i=t.length;i<s.length;i+=1)n(i);ce()}},i(o){if(!l){for(let f=0;f<t.length;f+=1)m(s[f]);l=!0}},o(o){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)_(s[f]);l=!1},d(o){o&&p(e),Ze(s,o)}}}function Uf(r){let e,l,t,s,n;function o(a){r[4](a)}let f={$$slots:{right:[Hf],default:[Gf]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0].show&&wl(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&131072&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0].show,B(()=>l=!1)),e.$set(c),a[0].show?i?(i.p(a,u),u&1&&m(i,1)):(i=wl(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function Wf(r){bl(r);let e,l=r[10]+"",t,s,n,o,f,i=r[11]+"",a,u,c,d,g=r[12]+"",y;return{c(){e=T("h2"),t=v(l),s=L(),n=T("p"),o=v("Direction: "),f=T("b"),a=L(),u=T("p"),c=v("Width: "),d=T("b"),y=v(g)},m(C,S){$(C,e,S),w(e,t),$(C,s,S),$(C,n,S),w(n,o),w(n,f),f.innerHTML=i,$(C,a,S),$(C,u,S),w(u,c),w(u,d),w(d,y)},p(C,S){bl(C),S&512&&l!==(l=C[10]+"")&&q(t,l),S&512&&i!==(i=C[11]+"")&&(f.innerHTML=i),S&512&&g!==(g=C[12]+"")&&q(y,g)},d(C){C&&(p(e),p(s),p(n),p(a),p(u))}}}function Yf(r){let e,l;return e=new ae({props:{$$slots:{default:[Wf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&131584&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Jf(r){let e,l;const t=[G(dt),{sourceLayer:dt},{paint:{"line-color":Ke(["get","kind"],{track:te.cycle_paths.track,lane:te.cycle_paths.lane,shared_use_segregated:te.cycle_paths.shared_use_segregated,shared_use_unsegregated:te.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ae,"line-opacity":se(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[3](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Yf]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new be({props:s}),e.$on("click",Kf),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&9?oe(t,[o&0&&ie(G(dt)),o&0&&{sourceLayer:dt},t[2],o&1&&{layout:{visibility:n[0].show?"visible":"none"}},o&9&&{filter:n[3](n[0])},t[5],t[6],t[7]]):{};o&131072&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function Vf(r){let e,l,t,s;return e=new me({props:{name:dt,$$slots:{default:[Uf]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${dt}.pmtiles`,$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&131073&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&131073&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let dt="cycle_paths";function Qf(r){return{show:!0,track:r.includes("track"),lane:r.includes("lane"),shared_use_segregated:r.includes("shared_use_segregated"),shared_use_unsegregated:r.includes("shared_use_unsegregated")}}function Zf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${l} ${r.direction}`,t]}function Kf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Xf(r,e,l){let t,s=["track","lane","shared_use_segregated","shared_use_unsegregated"],n={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function o(d){return d.show?s.filter(g=>d[g]).join(","):null}let f=Ht(dt,n,o,Qf);Q(r,f,d=>l(0,t=d));let i=[["track","Separated tracks",te.cycle_paths.track],["lane","Unprotected lanes",te.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",te.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",te.cycle_paths.shared_use_unsegregated]];function a(d){let g=s.filter(y=>d[y]);return["in",["get","kind"],["literal",g]]}function u(d){r.$$.not_equal(t.show,d)&&(t.show=d,f.set(t))}function c(d,g){r.$$.not_equal(t[g],d)&&(t[g]=d,f.set(t))}return[t,f,i,a,u,c]}class xf extends X{constructor(e){super(),x(this,e,Xf,Vf,Y,{})}}function ea(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
    Major Road Network`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function ta(r){let e;return{c(){e=v(`Major Road Network
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function na(r){let e,l,t,s,n,o,f;return t=new ne({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[ta]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=T("p"),l=v("Data from the "),h(t.$$.fragment),s=v(", as of September 2021."),n=L(),h(o.$$.fragment)},m(i,a){$(i,e,a),w(e,l),b(t,e,null),w(e,s),$(i,n,a),b(o,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(o.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(o.$$.fragment,i),f=!1},d(i){i&&(p(e),p(n)),k(t),k(o,i)}}}function la(r){let e,l,t;return l=new pe({props:{$$slots:{default:[na]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function sa(r){let e,l,t;function s(o){r[3](o)}let n={$$slots:{right:[la],default:[ea]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&32&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function ra(r){let e,l=(r[4].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&16&&l!==(l=(s[4].name??"Unknown MRN road")+"")&&q(t,l)},d(s){s&&p(e)}}}function oa(r){let e,l;return e=new ae({props:{$$slots:{default:[ra,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&48&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ia(r){let e,l;const t=[G(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":se(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let s={$$slots:{default:[oa]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new be({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&3?oe(t,[o&0&&ie(G(ht)),o&0&&{sourceLayer:ht},t[2],t[3],o&2&&{paint:{"line-color":n[1],"line-width":7,"line-opacity":se(1,.5)}},o&1&&{layout:{visibility:n[0]?"visible":"none"}}]):{};o&32&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function fa(r){let e,l,t,s;return e=new me({props:{name:ht,$$slots:{default:[sa]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${ht}.pmtiles`,$$slots:{default:[ia]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&33&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&33&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let ht="mrn";function aa(r,e,l){let t,s=te.mrn,n=he(ht);Q(r,n,f=>l(0,t=f));function o(f){t=f,n.set(t)}return[t,s,n,o]}class ua extends X{constructor(e){super(),x(this,e,aa,fa,Y,{})}}function ca(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
    Strategic Road Network`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function $a(r){let e;return{c(){e=v(`OS Open Roads
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function pa(r){let e,l,t,s,n,o,f;return t=new ne({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[$a]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=T("p"),l=v("Data from "),h(t.$$.fragment),s=v(`, as of December 2023. The SRN is equivalent to trunk
          roads.`),n=L(),h(o.$$.fragment)},m(i,a){$(i,e,a),w(e,l),b(t,e,null),w(e,s),$(i,n,a),b(o,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(o.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(o.$$.fragment,i),f=!1},d(i){i&&(p(e),p(n)),k(t),k(o,i)}}}function ma(r){let e,l,t;return l=new pe({props:{$$slots:{default:[pa]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function _a(r){let e,l,t;function s(o){r[3](o)}let n={$$slots:{right:[ma],default:[ca]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&32&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function ga(r){let e,l=(r[4].name??"Unknown SRN road")+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&16&&l!==(l=(s[4].name??"Unknown SRN road")+"")&&q(t,l)},d(s){s&&p(e)}}}function da(r){let e,l;return e=new ae({props:{$$slots:{default:[ga,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&48&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ha(r){let e,l;const t=[G(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":se(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let s={$$slots:{default:[da]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new be({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&3?oe(t,[o&0&&ie(G(bt)),o&0&&{sourceLayer:bt},t[2],t[3],o&2&&{paint:{"line-color":n[1],"line-width":7,"line-opacity":se(1,.5)}},o&1&&{layout:{visibility:n[0]?"visible":"none"}}]):{};o&32&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function ba(r){let e,l,t,s;return e=new me({props:{name:bt,$$slots:{default:[_a]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${bt}.pmtiles`,$$slots:{default:[ha]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&33&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&33&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let bt="srn";function ka(r,e,l){let t,s=te.srn,n=he(bt);Q(r,n,f=>l(0,t=f));function o(f){t=f,n.set(t)}return[t,s,n,o]}class wa extends X{constructor(e){super(),x(this,e,ka,ba,Y,{})}}function va(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
    National Cycle Network`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function ya(r){let e;return{c(){e=v(`National Cycle Network
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Sa(r){let e,l,t,s,n,o,f;return t=new ne({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[ya]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=T("p"),l=v("Data from Sustrans about the "),h(t.$$.fragment),s=v(", downloaded on 22/01/2024."),n=L(),h(o.$$.fragment)},m(i,a){$(i,e,a),w(e,l),b(t,e,null),w(e,s),$(i,n,a),b(o,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(o.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(o.$$.fragment,i),f=!1},d(i){i&&(p(e),p(n)),k(t),k(o,i)}}}function Ca(r){let e,l,t;return l=new pe({props:{$$slots:{default:[Sa]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Ta(r){let e,l,t;function s(o){r[3](o)}let n={$$slots:{right:[Ca],default:[va]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&32&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function yl(r){let e,l,t,s=r[4].Desc_+"",n;return{c(){e=T("li"),l=v("Description: "),t=T("b"),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(t,n)},p(o,f){f&16&&s!==(s=o[4].Desc_+"")&&q(n,s)},d(o){o&&p(e)}}}function Sl(r){let e,l,t,s=r[4].Greenway+"",n;return{c(){e=T("li"),l=v("Is greenway: "),t=T("b"),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(t,n)},p(o,f){f&16&&s!==(s=o[4].Greenway+"")&&q(n,s)},d(o){o&&p(e)}}}function Cl(r){let e,l,t,s=r[4].RouteType+"",n;return{c(){e=T("li"),l=v("Route type: "),t=T("b"),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(t,n)},p(o,f){f&16&&s!==(s=o[4].RouteType+"")&&q(n,s)},d(o){o&&p(e)}}}function Tl(r){let e,l,t,s=r[4].RouteNo+"",n;return{c(){e=T("li"),l=v("Route number: "),t=T("b"),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(t,n)},p(o,f){f&16&&s!==(s=o[4].RouteNo+"")&&q(n,s)},d(o){o&&p(e)}}}function Ll(r){let e,l,t,s=r[4].RouteCat+"",n;return{c(){e=T("li"),l=v("Route Category: "),t=T("b"),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(t,n)},p(o,f){f&16&&s!==(s=o[4].RouteCat+"")&&q(n,s)},d(o){o&&p(e)}}}function Il(r){let e,l,t,s=r[4].OpenStatus+"",n;return{c(){e=T("li"),l=v("Open Status: "),t=T("b"),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(t,n)},p(o,f){f&16&&s!==(s=o[4].OpenStatus+"")&&q(n,s)},d(o){o&&p(e)}}}function Ml(r){let e,l,t,s=r[4].Surface+"",n;return{c(){e=T("li"),l=v("Surface: "),t=T("b"),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(t,n)},p(o,f){f&16&&s!==(s=o[4].Surface+"")&&q(n,s)},d(o){o&&p(e)}}}function Nl(r){let e,l,t,s=r[4].Quality+"",n;return{c(){e=T("li"),l=v("Quality: "),t=T("b"),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(t,n)},p(o,f){f&16&&s!==(s=o[4].Quality+"")&&q(n,s)},d(o){o&&p(e)}}}function Ol(r){let e,l,t,s=r[4].RoadClass+"",n;return{c(){e=T("li"),l=v("Road Class: "),t=T("b"),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(t,n)},p(o,f){f&16&&s!==(s=o[4].RoadClass+"")&&q(n,s)},d(o){o&&p(e)}}}function La(r){let e,l,t,s,n,o,f,i,a,u=r[4].Desc_&&yl(r),c=r[4].Greenway&&Sl(r),d=r[4].RouteType&&Cl(r),g=r[4].RouteNo&&Tl(r),y=r[4].RouteCat&&Ll(r),C=r[4].OpenStatus&&Il(r),S=r[4].Surface&&Ml(r),j=r[4].Quality&&Nl(r),D=r[4].RoadClass&&Ol(r);return{c(){e=T("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),d&&d.c(),s=L(),g&&g.c(),n=L(),y&&y.c(),o=L(),C&&C.c(),f=L(),S&&S.c(),i=L(),j&&j.c(),a=L(),D&&D.c()},m(P,R){$(P,e,R),u&&u.m(e,null),w(e,l),c&&c.m(e,null),w(e,t),d&&d.m(e,null),w(e,s),g&&g.m(e,null),w(e,n),y&&y.m(e,null),w(e,o),C&&C.m(e,null),w(e,f),S&&S.m(e,null),w(e,i),j&&j.m(e,null),w(e,a),D&&D.m(e,null)},p(P,R){P[4].Desc_?u?u.p(P,R):(u=yl(P),u.c(),u.m(e,l)):u&&(u.d(1),u=null),P[4].Greenway?c?c.p(P,R):(c=Sl(P),c.c(),c.m(e,t)):c&&(c.d(1),c=null),P[4].RouteType?d?d.p(P,R):(d=Cl(P),d.c(),d.m(e,s)):d&&(d.d(1),d=null),P[4].RouteNo?g?g.p(P,R):(g=Tl(P),g.c(),g.m(e,n)):g&&(g.d(1),g=null),P[4].RouteCat?y?y.p(P,R):(y=Ll(P),y.c(),y.m(e,o)):y&&(y.d(1),y=null),P[4].OpenStatus?C?C.p(P,R):(C=Il(P),C.c(),C.m(e,f)):C&&(C.d(1),C=null),P[4].Surface?S?S.p(P,R):(S=Ml(P),S.c(),S.m(e,i)):S&&(S.d(1),S=null),P[4].Quality?j?j.p(P,R):(j=Nl(P),j.c(),j.m(e,a)):j&&(j.d(1),j=null),P[4].RoadClass?D?D.p(P,R):(D=Ol(P),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(P){P&&p(e),u&&u.d(),c&&c.d(),d&&d.d(),g&&g.d(),y&&y.d(),C&&C.d(),S&&S.d(),j&&j.d(),D&&D.d()}}}function Ia(r){let e,l;return e=new ae({props:{$$slots:{default:[La,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&48&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ma(r){let e,l;const t=[G(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":se(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let s={$$slots:{default:[Ia]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new be({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&3?oe(t,[o&0&&ie(G(kt)),o&0&&{sourceLayer:kt},t[2],t[3],o&2&&{paint:{"line-color":n[1],"line-width":4,"line-opacity":se(1,.5)}},o&1&&{layout:{visibility:n[0]?"visible":"none"}}]):{};o&32&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function Na(r){let e,l,t,s;return e=new me({props:{name:kt,$$slots:{default:[Ta]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${kt}.pmtiles`,$$slots:{default:[Ma]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&33&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&33&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let kt="national_cycle_network";function Oa(r,e,l){let t,s=te.national_cycle_network,n=he(kt);Q(r,n,f=>l(0,t=f));function o(f){t=f,n.set(t)}return[t,s,n,o]}class ja extends X{constructor(e){super(),x(this,e,Oa,Na,Y,{})}}function jl(r,e,l){const t=r.slice();return t[6]=e[l][0],t[7]=e[l][1],t[8]=e[l][2],t}function Pa(r){let e;return{c(){e=v("OS Pavement widths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ra(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Da(r){let e,l,t,s,n,o,f,i,a,u,c;return a=new ne({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ra]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
          Ordnance Survey. Because the shape of pavement may vary along a road,
          both average and minimum are reported. Measurements may be available
          for the left side of the road, the right, or both. The coloring shows
          the larger of the two average widths, and the line thickness has no
          meaning. Hover over a line to see if there's pavement on one or both
          sides of the road. (You won't be able to distinguish left and right
          though; use the OS Road basemap instead.)`,l=L(),t=T("p"),t.textContent=`Note these measurements are difficult to interpret near dual
          carriageways (shown as parallel lines).`,s=L(),n=T("p"),n.textContent="Data valid as of 1 January, 2024",o=L(),f=T("p"),i=v(`License: Contains OS data © Crown copyright and database right
          2023. Made available under the `),h(a.$$.fragment),u=v(".")},m(d,g){$(d,e,g),$(d,l,g),$(d,t,g),$(d,s,g),$(d,n,g),$(d,o,g),$(d,f,g),w(f,i),b(a,f,null),w(f,u),c=!0},p(d,g){const y={};g&2048&&(y.$$scope={dirty:g,ctx:d}),a.$set(y)},i(d){c||(m(a.$$.fragment,d),c=!0)},o(d){_(a.$$.fragment,d),c=!1},d(d){d&&(p(e),p(l),p(t),p(s),p(n),p(o),p(f)),k(a)}}}function Aa(r){let e,l,t;return l=new pe({props:{$$slots:{default:[Da]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&2048&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Pl(r){let e,l;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p:Z,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Fa(r){let e,l,t,s,n;function o(a){r[4](a)}let f={$$slots:{right:[Aa],default:[Pa]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0]&&Pl(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&2048&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0],B(()=>l=!1)),e.$set(c),a[0]?i?(i.p(a,u),u&1&&m(i,1)):(i=Pl(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function qa(r){let e,l,t=ln(r[5].angle+r[8])+"",s;return{c(){e=T("p"),l=new Pt(!1),s=v(` side of the road: no pavement
          `),l.a=s},m(n,o){$(n,e,o),l.m(t,e),w(e,s)},p(n,o){o&32&&t!==(t=ln(n[5].angle+n[8])+"")&&l.p(t)},d(n){n&&p(e)}}}function Ga(r){let e,l,t=ln(r[5].angle+r[8])+"",s,n,o=r[6]+"",f,i,a,u=r[7]+"",c,d;return{c(){e=T("p"),l=new Pt(!1),s=v(` side of the road:
            `),n=T("b"),f=v(o),i=v(`
            m average,
            `),a=T("b"),c=v(u),d=v(`
            m minimum
          `),l.a=s},m(g,y){$(g,e,y),l.m(t,e),w(e,s),w(e,n),w(n,f),w(e,i),w(e,a),w(a,c),w(e,d)},p(g,y){y&32&&t!==(t=ln(g[5].angle+g[8])+"")&&l.p(t),y&32&&o!==(o=g[6]+"")&&q(f,o),y&32&&u!==(u=g[7]+"")&&q(c,u)},d(g){g&&p(e)}}}function Rl(r){let e;function l(n,o){return n[6]?Ga:qa}let t=l(r),s=t(r);return{c(){s.c(),e=$e()},m(n,o){s.m(n,o),$(n,e,o)},p(n,o){t===(t=l(n))&&s?s.p(n,o):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){n&&p(e),s.d(n)}}}function za(r){let e,l=ye([[r[5].left_average,r[5].left_minimum,-90],[r[5].right_average,r[5].right_minimum,90]]),t=[];for(let s=0;s<2;s+=1)t[s]=Rl(jl(r,l,s));return{c(){for(let s=0;s<2;s+=1)t[s].c();e=$e()},m(s,n){for(let o=0;o<2;o+=1)t[o]&&t[o].m(s,n);$(s,e,n)},p(s,n){if(n&32){l=ye([[s[5].left_average,s[5].left_minimum,-90],[s[5].right_average,s[5].right_minimum,90]]);let o;for(o=0;o<2;o+=1){const f=jl(s,l,o);t[o]?t[o].p(f,n):(t[o]=Rl(f),t[o].c(),t[o].m(e.parentNode,e))}for(;o<2;o+=1)t[o].d(1)}},d(s){s&&p(e),Ze(t,s)}}}function Ha(r){let e,l;return e=new ae({props:{openOn:"hover",$$slots:{default:[za,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&2080&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ea(r){let e,l;const t=[G(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Ae,"line-opacity":se(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let s={$$slots:{default:[Ha]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new be({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&7?oe(t,[o&0&&ie(G(wt)),o&0&&{sourceLayer:wt},t[2],t[3],o&6&&{paint:{"line-color":ke(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],n[2],n[1]),"line-width":Ae,"line-opacity":se(1,.5)}},o&1&&{layout:{visibility:n[0]?"visible":"none"}}]):{};o&2048&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function Ba(r){let e,l,t,s;return e=new me({props:{name:wt,$$slots:{default:[Fa]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${Zt()}/v1/${wt}.pmtiles`,$$slots:{default:[Ea]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&2049&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&2049&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let wt="pavement_widths";function Ua(r){let e=Math.floor((r+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function ln(r){return`${Ua(r)} <span style="display: inline-block; rotate: ${r}deg">⬆</span>`}function Wa(r,e,l){let t,s=te.sequential_low_to_high,n=[0,2,4,6,8,13],o=he(wt);Q(r,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,s,n,o,f]}class Ya extends X{constructor(e){super(),x(this,e,Wa,Ba,Y,{})}}function Ja(r){let e;return{c(){e=v("Propensity to Cycle Tool")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Va(r){let e;return{c(){e=v("the PCT website")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Qa(r){let e;return{c(){e=v("2017 journal article")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Za(r){let e,l,t,s,n,o,f,i,a,u,c;return f=new ne({props:{href:"https://www.pct.bike",$$slots:{default:[Va]},$$scope:{ctx:r}}}),a=new ne({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Qa]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
          high latent demand for cycling under scenarios of change, based on the
          "fastest" routes from CycleStreets. Counts approximate daily rush hour
          traffic levels.`,l=L(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
          Please use this layer with caution.`,s=L(),n=T("p"),o=v("See "),h(f.$$.fragment),i=v(" and "),h(a.$$.fragment),u=v(" for details on methodology and data sources.")},m(d,g){$(d,e,g),$(d,l,g),$(d,t,g),$(d,s,g),$(d,n,g),w(n,o),b(f,n,null),w(n,i),b(a,n,null),w(n,u),c=!0},p(d,g){const y={};g&1024&&(y.$$scope={dirty:g,ctx:d}),f.$set(y);const C={};g&1024&&(C.$$scope={dirty:g,ctx:d}),a.$set(C)},i(d){c||(m(f.$$.fragment,d),m(a.$$.fragment,d),c=!0)},o(d){_(f.$$.fragment,d),_(a.$$.fragment,d),c=!1},d(d){d&&(p(e),p(l),p(t),p(s),p(n)),k(f),k(a)}}}function Ka(r){let e,l,t;return l=new pe({props:{$$slots:{default:[Za]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&1024&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Dl(r){let e,l,t,s,n,o,f,i;e=new Ge({props:{colorScale:r[1],limits:r[2]}});function a(g){r[6](g)}let u={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0].tripPurpose!==void 0&&(u.value=r[0].tripPurpose),t=new Hs({props:u}),H.push(()=>E(t,"value",a));function c(g){r[7](g)}let d={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[0].scenario!==void 0&&(d.value=r[0].scenario),o=new qt({props:d}),H.push(()=>E(o,"value",c)),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),n=L(),h(o.$$.fragment)},m(g,y){b(e,g,y),$(g,l,y),b(t,g,y),$(g,n,y),b(o,g,y),i=!0},p(g,y){const C={};!s&&y&1&&(s=!0,C.value=g[0].tripPurpose,B(()=>s=!1)),t.$set(C);const S={};!f&&y&1&&(f=!0,S.value=g[0].scenario,B(()=>f=!1)),o.$set(S)},i(g){i||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(o.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),i=!1},d(g){g&&(p(l),p(n)),k(e,g),k(t,g),k(o,g)}}}function Xa(r){let e,l,t,s,n;function o(a){r[5](a)}let f={$$slots:{right:[Ka],default:[Ja]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0].show&&Dl(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&1024&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0].show,B(()=>l=!1)),e.$set(c),a[0].show?i?(i.p(a,u),u&1&&m(i,1)):(i=Dl(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function xa(r){let e,l=r[4](r[9])+"",t;return{c(){e=new Pt(!1),t=$e(),e.a=t},m(s,n){e.m(l,s,n),$(s,t,n)},p(s,n){n&512&&l!==(l=s[4](s[9])+"")&&e.p(l)},d(s){s&&(p(t),e.d())}}}function eu(r){let e,l;return e=new ae({props:{$$slots:{default:[xa,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&1536&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function tu(r){let e,l;const t=[G(tt),{sourceLayer:tt},{paint:{"line-color":ke(["get",r[0].scenario],r[2],r[1]),"line-width":Ae,"line-opacity":se(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==tt?"visible":"none"}}];let s={$$slots:{default:[eu]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new be({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&7?oe(t,[o&0&&ie(G(tt)),o&0&&{sourceLayer:tt},o&7&&{paint:{"line-color":ke(["get",n[0].scenario],n[2],n[1]),"line-width":Ae,"line-opacity":se(1,.5)}},o&1&&{layout:{visibility:n[0].show&&n[0].tripPurpose==tt?"visible":"none"}}]):{};o&1024&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function nu(r){let e,l=r[4](r[9])+"",t;return{c(){e=new Pt(!1),t=$e(),e.a=t},m(s,n){e.m(l,s,n),$(s,t,n)},p(s,n){n&512&&l!==(l=s[4](s[9])+"")&&e.p(l)},d(s){s&&(p(t),e.d())}}}function lu(r){let e,l;return e=new ae({props:{$$slots:{default:[nu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&1536&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function su(r){let e,l;const t=[G($t),{sourceLayer:$t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",r[0].scenario],r[2],r[1]),"line-width":Ae,"line-opacity":se(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==$t?"visible":"none"}}];let s={$$slots:{default:[lu]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new be({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&7?oe(t,[o&0&&ie(G($t)),o&0&&{sourceLayer:$t},t[2],t[3],o&7&&{paint:{"line-color":ke(["get",n[0].scenario],n[2],n[1]),"line-width":Ae,"line-opacity":se(1,.5)}},o&1&&{layout:{visibility:n[0].show&&n[0].tripPurpose==$t?"visible":"none"}}]):{};o&1024&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function ru(r){let e,l,t,s,n,o;return e=new me({props:{name:"pct",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${tt}.pmtiles`,$$slots:{default:[tu]},$$scope:{ctx:r}}}),n=new de({props:{url:`pmtiles://${ge()}/v1/${$t}.pmtiles`,$$slots:{default:[su]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),s=L(),h(n.$$.fragment)},m(f,i){b(e,f,i),$(f,l,i),b(t,f,i),$(f,s,i),b(n,f,i),o=!0},p(f,[i]){const a={};i&1025&&(a.$$scope={dirty:i,ctx:f}),e.$set(a);const u={};i&1025&&(u.$$scope={dirty:i,ctx:f}),t.$set(u);const c={};i&1025&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){o||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(n.$$.fragment,f),o=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(n.$$.fragment,f),o=!1},d(f){f&&(p(l),p(s)),k(e,f),k(t,f),k(n,f)}}}let tt="pct_commute",$t="pct_school";function ou(r){return r.show?`${r.tripPurpose}/${r.scenario}`:null}function iu(r){let[e,l]=r.split("/");return{show:!0,tripPurpose:e,scenario:l}}function fu(r,e,l){let t,s=te.sequential_low_to_high,n=[0,50,100,500,1e3,2e3],f=Ht("pct",{show:!1,tripPurpose:tt,scenario:"baseline"},ou,iu);Q(r,f,d=>l(0,t=d));function i(d){let g=d.baseline,y=d.gov_target,C=d.go_dutch,S=`<h2>Trip purpose: ${t.tripPurpose==tt?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let j=(y/g).toFixed(1),D=(C/g).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${j}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return S}function a(d){r.$$.not_equal(t.show,d)&&(t.show=d,f.set(t))}function u(d){r.$$.not_equal(t.tripPurpose,d)&&(t.tripPurpose=d,f.set(t))}function c(d){r.$$.not_equal(t.scenario,d)&&(t.scenario=d,f.set(t))}return[t,s,n,f,i,a,u,c]}class au extends X{constructor(e){super(),x(this,e,fu,ru,Y,{})}}function uu(r){let e;return{c(){e=v("OS Speeds")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function cu(r){let e;return{c(){e=v("Basemap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $u(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function pu(r){let e,l,t,s,n,o,f,i,a,u,c,d;return t=new ne({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[cu]},$$scope:{ctx:r}}}),u=new ne({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[$u]},$$scope:{ctx:r}}}),{c(){e=T("p"),l=v("The average speed data is collected over a six-month period by "),h(t.$$.fragment),s=v(` from 135,000 vehicle telematic systems and provided through
          Ordnance Survey. The averages are grouped by different time periods for
          weekdays and weekends. This map shows the highest average.`),n=L(),o=T("p"),o.textContent="Data valid as of 1 September, 2023",f=L(),i=T("p"),a=v(`License: Contains OS data © Crown copyright and database right
          2023. Made available under the `),h(u.$$.fragment),c=v(".")},m(g,y){$(g,e,y),w(e,l),b(t,e,null),w(e,s),$(g,n,y),$(g,o,y),$(g,f,y),$(g,i,y),w(i,a),b(u,i,null),w(i,c),d=!0},p(g,y){const C={};y&512&&(C.$$scope={dirty:y,ctx:g}),t.$set(C);const S={};y&512&&(S.$$scope={dirty:y,ctx:g}),u.$set(S)},i(g){d||(m(t.$$.fragment,g),m(u.$$.fragment,g),d=!0)},o(g){_(t.$$.fragment,g),_(u.$$.fragment,g),d=!1},d(g){g&&(p(e),p(n),p(o),p(f),p(i)),k(t),k(u)}}}function mu(r){let e,l,t;return l=new pe({props:{$$slots:{default:[pu]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&512&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Al(r){let e,l,t,s,n;e=new Ge({props:{colorScale:r[1],limits:r[2]}});function o(i){r[6](i)}let f={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0].kind!==void 0&&(f.value=r[0].kind),t=new Hs({props:f}),H.push(()=>E(t,"value",o)),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,l,a),b(t,i,a),n=!0},p(i,a){const u={};!s&&a&1&&(s=!0,u.value=i[0].kind,B(()=>s=!1)),t.$set(u)},i(i){n||(m(e.$$.fragment,i),m(t.$$.fragment,i),n=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function _u(r){let e,l,t,s,n;function o(a){r[5](a)}let f={$$slots:{right:[mu],default:[uu]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0].show&&Al(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&512&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0].show,B(()=>l=!1)),e.$set(c),a[0].show?i?(i.p(a,u),u&1&&m(i,1)):(i=Al(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function gu(r){let e,l,t=r[8].indicative_mph+"",s,n,o,f,i,a=r[8].highest_mph+"",u,c,d=r[4][r[8].highest_description]+"",g,y;return{c(){e=T("p"),l=v("Posted speed limit: "),s=v(t),n=v(" mph"),o=L(),f=T("p"),i=v("Highest average speed: "),u=v(a),c=v(" mph (during "),g=v(d),y=v(")")},m(C,S){$(C,e,S),w(e,l),w(e,s),w(e,n),$(C,o,S),$(C,f,S),w(f,i),w(f,u),w(f,c),w(f,g),w(f,y)},p(C,S){S&256&&t!==(t=C[8].indicative_mph+"")&&q(s,t),S&256&&a!==(a=C[8].highest_mph+"")&&q(u,a),S&256&&d!==(d=C[4][C[8].highest_description]+"")&&q(g,d)},d(C){C&&(p(e),p(o),p(f))}}}function du(r){let e,l;return e=new ae({props:{$$slots:{default:[gu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&768&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function hu(r){let e,l;const t=[G(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",r[0].kind],r[2],r[1]),"line-width":Ae,"line-opacity":se(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}}];let s={$$slots:{default:[du]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new be({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&7?oe(t,[o&0&&ie(G(vt)),o&0&&{sourceLayer:vt},t[2],t[3],o&7&&{paint:{"line-color":ke(["get",n[0].kind],n[2],n[1]),"line-width":Ae,"line-opacity":se(1,.5)}},o&1&&{layout:{visibility:n[0].show?"visible":"none"}}]):{};o&512&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function bu(r){let e,l,t,s;return e=new me({props:{name:vt,$$slots:{default:[_u]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${Zt()}/v1/${vt}.pmtiles`,$$slots:{default:[hu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&513&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&513&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let vt="road_speeds";function ku(r){return r.show?r.kind:null}function wu(r){return{show:!0,kind:r}}function vu(r,e,l){let t,s=te.sequential_low_to_high,n=[0,20,30,40,50,90],f=Ht(vt,{show:!1,kind:"indicative_mph"},ku,wu);Q(r,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){r.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}function u(c){r.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}return[t,s,n,f,i,a,u]}class yu extends X{constructor(e){super(),x(this,e,vu,bu,Y,{})}}function Su(r){let e;return{c(){e=v("OS Road widths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Cu(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Tu(r){let e,l,t,s,n,o,f,i,a;return f=new ne({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Cu]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
          Ordnance Survey. The coloring shows the average width, and the line
          thickness has no meaning. Be careful interpreting the data near dual
          carriageways and crossing islands.`,l=L(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",s=L(),n=T("p"),o=v(`License: Contains OS data © Crown copyright and database right
          2023. Made available under the `),h(f.$$.fragment),i=v(".")},m(u,c){$(u,e,c),$(u,l,c),$(u,t,c),$(u,s,c),$(u,n,c),w(n,o),b(f,n,null),w(n,i),a=!0},p(u,c){const d={};c&64&&(d.$$scope={dirty:c,ctx:u}),f.$set(d)},i(u){a||(m(f.$$.fragment,u),a=!0)},o(u){_(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(l),p(t),p(s),p(n)),k(f)}}}function Lu(r){let e,l,t;return l=new pe({props:{$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&64&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Fl(r){let e,l;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p:Z,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Iu(r){let e,l,t,s,n;function o(a){r[4](a)}let f={$$slots:{right:[Lu],default:[Su]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0]&&Fl(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&64&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0],B(()=>l=!1)),e.$set(c),a[0]?i?(i.p(a,u),u&1&&m(i,1)):(i=Fl(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function Mu(r){let e,l,t,s=r[5].average+"",n,o,f,i,a,u,c=r[5].minimum+"",d,g;return{c(){e=T("p"),l=v("Average width: "),t=T("b"),n=v(s),o=v(`
        meters`),f=L(),i=T("p"),a=v("Minimum width: "),u=T("b"),d=v(c),g=v(`
        meters`)},m(y,C){$(y,e,C),w(e,l),w(e,t),w(t,n),w(e,o),$(y,f,C),$(y,i,C),w(i,a),w(i,u),w(u,d),w(i,g)},p(y,C){C&32&&s!==(s=y[5].average+"")&&q(n,s),C&32&&c!==(c=y[5].minimum+"")&&q(d,c)},d(y){y&&(p(e),p(f),p(i))}}}function Nu(r){let e,l;return e=new ae({props:{$$slots:{default:[Mu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&96&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ou(r){let e,l;const t=[G(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],r[2],r[1]),"line-width":Ae,"line-opacity":se(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let s={$$slots:{default:[Nu]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new be({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&7?oe(t,[o&0&&ie(G(yt)),o&0&&{sourceLayer:yt},t[2],t[3],o&6&&{paint:{"line-color":ke(["get","average"],n[2],n[1]),"line-width":Ae,"line-opacity":se(1,.5)}},o&1&&{layout:{visibility:n[0]?"visible":"none"}}]):{};o&64&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function ju(r){let e,l,t,s;return e=new me({props:{name:yt,$$slots:{default:[Iu]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${Zt()}/v1/${yt}.pmtiles`,$$slots:{default:[Ou]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&65&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&65&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let yt="road_widths";function Pu(r,e,l){let t,s=te.sequential_low_to_high,n=[0,5,10,15,20,100],o=he(yt);Q(r,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,s,n,o,f]}class Ru extends X{constructor(e){super(),x(this,e,Pu,ju,Y,{})}}function Du(r){let e,l,t;return e=new Te({props:{color:te.trams}}),{c(){h(e.$$.fragment),l=v(`
    Trams`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function Au(r){let e,l,t,s;return t=new Xe({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
          (as of 7 February 2024). When these are close to a scheme,
          interactions between the modes must be designed carefully.`,l=L(),h(t.$$.fragment)},m(n,o){$(n,e,o),$(n,l,o),b(t,n,o),s=!0},p:Z,i(n){s||(m(t.$$.fragment,n),s=!0)},o(n){_(t.$$.fragment,n),s=!1},d(n){n&&(p(e),p(l)),k(t,n)}}}function Fu(r){let e,l,t;return l=new pe({props:{$$slots:{default:[Au]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&8&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function qu(r){let e,l,t;function s(o){r[2](o)}let n={$$slots:{right:[Fu],default:[Du]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&8&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function Gu(r){let e,l;const t=[G(St),{sourceLayer:St},{paint:{"line-color":te.trams,"line-width":5,"line-opacity":se(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new be({props:s}),e.$on("click",Hu),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&1?oe(t,[o&0&&ie(G(St)),o&0&&{sourceLayer:St},t[2],o&1&&{layout:{visibility:n[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function zu(r){let e,l,t,s;return e=new me({props:{name:St,$$slots:{default:[qu]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${St}.pmtiles`,$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&9&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&9&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let St="trams";function Hu(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Eu(r,e,l){let t,s=he(St);Q(r,s,o=>l(0,t=o));function n(o){t=o,s.set(t)}return[t,s,n]}class Bu extends X{constructor(e){super(),x(this,e,Eu,zu,Y,{})}}function Uu(r){let e;return{c(){e=v("Bus stops")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Wu(r){let e;return{c(){e=v(`Bus Open Data Service
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Yu(r){let e,l,t,s,n,o,f,i,a;return t=new ne({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Wu]},$$scope:{ctx:r}}}),i=new Le({}),{c(){e=T("p"),l=v("Data from the "),h(t.$$.fragment),s=v(`, as of 7 February 2024. To calculate frequency, every
          scheduled arrival time per stop is considered, grouped by day of the
          week. The total daily count is just the number of scheduled arrivals
          for a day. The peak hour frequency is the highest number of buses in
          any one hour window. That window might not lined up perfectly on the
          hour -- a peak hour might occur from 8:25 to 9:25,for example.`),n=L(),o=T("p"),o.textContent=`There are known limitations with this layer, so please use caution
          when using these numbers. Some stops may not be shown at all.
          Frequency could be over- or under-counted, due to exceptions to the
          regular daily schedule of a service.`,f=L(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,l),b(t,e,null),w(e,s),$(u,n,c),$(u,o,c),$(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&64&&(d.$$scope={dirty:c,ctx:u}),t.$set(d)},i(u){a||(m(t.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(t.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(o),p(f)),k(t),k(i,u)}}}function Ju(r){let e,l,t;return l=new pe({props:{$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&64&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function ql(r){let e,l,t,s;return t=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",l=L(),h(t.$$.fragment)},m(n,o){$(n,e,o),$(n,l,o),b(t,n,o),s=!0},p:Z,i(n){s||(m(t.$$.fragment,n),s=!0)},o(n){_(t.$$.fragment,n),s=!1},d(n){n&&(p(e),p(l)),k(t,n)}}}function Vu(r){let e,l,t,s,n;function o(a){r[4](a)}let f={$$slots:{right:[Ju],default:[Uu]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0]&&ql(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&64&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0],B(()=>l=!1)),e.$set(c),a[0]?i?(i.p(a,u),u&1&&m(i,1)):(i=ql(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function Qu(r){let e,l,t,s=r[5].stop_name+"",n,o,f,i,a,u=r[5].peak+"",c,d,g,y,C,S=r[5].peak_description+"",j,D,P,R,N,O=r[5].total+"",M,I,A=r[5].total_description+"",W,K;return{c(){e=T("p"),l=v("Stop name: "),t=T("b"),n=v(s),o=L(),f=T("p"),i=v("Peak: "),a=T("b"),c=v(u),d=v(`
        buses during the busiest hour of any day`),g=L(),y=T("p"),C=v("The peak hour is "),j=v(S),D=L(),P=T("p"),R=v("Total buses per day: "),N=T("b"),M=v(O),I=v(`
        (for `),W=v(A),K=v(", the busiest day of the week)")},m(F,J){$(F,e,J),w(e,l),w(e,t),w(t,n),$(F,o,J),$(F,f,J),w(f,i),w(f,a),w(a,c),w(f,d),$(F,g,J),$(F,y,J),w(y,C),w(y,j),$(F,D,J),$(F,P,J),w(P,R),w(P,N),w(N,M),w(P,I),w(P,W),w(P,K)},p(F,J){J&32&&s!==(s=F[5].stop_name+"")&&q(n,s),J&32&&u!==(u=F[5].peak+"")&&q(c,u),J&32&&S!==(S=F[5].peak_description+"")&&q(j,S),J&32&&O!==(O=F[5].total+"")&&q(M,O),J&32&&A!==(A=F[5].total_description+"")&&q(W,A)},d(F){F&&(p(e),p(o),p(f),p(g),p(y),p(D),p(P))}}}function Zu(r){let e,l;return e=new ae({props:{$$slots:{default:[Qu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&96&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ku(r){let e,l;const t=[G(Ct),{sourceLayer:Ct},{paint:{"circle-color":ke(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Zu]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new Gt({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&7?oe(t,[o&0&&ie(G(Ct)),o&0&&{sourceLayer:Ct},o&6&&{paint:{"circle-color":ke(["get","peak"],n[2],n[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},o&1&&{layout:{visibility:n[0]?"visible":"none"}},t[4],t[5]]):{};o&64&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function Xu(r){let e,l,t,s;return e=new me({props:{name:Ct,$$slots:{default:[Vu]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${Ct}.pmtiles`,$$slots:{default:[Ku]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&65&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&65&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let Ct="bus_stops";function xu(r,e,l){let t,s=te.sequential_low_to_high,n=[0,3,10,20,30,100],o=he(Ct);Q(r,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,s,n,o,f]}class ec extends X{constructor(e){super(),x(this,e,xu,Xu,Y,{})}}function tc(r){let e;return{c(){e=v("Crossings")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function nc(r){let e;return{c(){e=v("crossing")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function lc(r){let e,l,t,s,n,o,f;return t=new ne({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[nc]},$$scope:{ctx:r}}}),o=new Xe({}),{c(){e=T("p"),l=v("This shows "),h(t.$$.fragment),s=v(" data from OpenStreetMap (as of 9 August 2023)."),n=L(),h(o.$$.fragment)},m(i,a){$(i,e,a),w(e,l),b(t,e,null),w(e,s),$(i,n,a),b(o,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(o.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(o.$$.fragment,i),f=!1},d(i){i&&(p(e),p(n)),k(t),k(o,i)}}}function sc(r){let e,l,t;return l=new pe({props:{$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Gl(r){let e,l;return e=new Kt({props:{rows:r[2]}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p:Z,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function rc(r){let e,l,t,s,n;function o(a){r[3](a)}let f={$$slots:{right:[sc],default:[tc]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0]&&Gl(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0],B(()=>l=!1)),e.$set(c),a[0]?i?(i.p(a,u),u&1&&m(i,1)):(i=Gl(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function oc(r){let e,l=zl(r[4])+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&16&&l!==(l=zl(s[4])+"")&&q(t,l)},d(s){s&&p(e)}}}function ic(r){let e,l;return e=new ae({props:{$$slots:{default:[oc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&48&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function fc(r){let e,l;const t=[G(Tt),{sourceLayer:Tt},{paint:{"circle-color":Ke(["get","crossing"],{traffic_signals:te.signalized_crossing},te.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let s={$$slots:{default:[ic]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new Gt({props:s}),e.$on("click",uc),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&1?oe(t,[o&0&&ie(G(Tt)),o&0&&{sourceLayer:Tt},t[2],o&1&&{layout:{visibility:n[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function ac(r){let e,l,t,s;return e=new me({props:{name:Tt,$$slots:{default:[rc]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${Tt}.pmtiles`,$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&33&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&33&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let Tt="crossings";function zl(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function uc(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function cc(r,e,l){let t,s=he(Tt);Q(r,s,f=>l(0,t=f));let n=[["Signalized",te.signalized_crossing],["Other",te.other_crossing]];function o(f){t=f,s.set(t)}return[t,s,n,o]}class $c extends X{constructor(e){super(),x(this,e,cc,ac,Y,{})}}function pc(r){let e;return{c(){e=v("Gradients")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function mc(r){let e;return{c(){e=v("OS Terrain 50")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function _c(r){let e,l,t,s,n,o,f,i,a,u,c,d,g;return f=new ne({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[mc]},$$scope:{ctx:r}}}),u=new Le({}),d=new Xe({}),{c(){e=T("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
          uphill. You have to zoom in to see all roads.`,l=L(),t=T("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
          on the underlying Digital Elevation Model used.`,s=L(),n=T("p"),o=v("This layer is built from "),h(f.$$.fragment),i=v(` and roads from OpenStreetMap. The data is valid as of 18
          February 2024.`),a=L(),h(u.$$.fragment),c=L(),h(d.$$.fragment)},m(y,C){$(y,e,C),$(y,l,C),$(y,t,C),$(y,s,C),$(y,n,C),w(n,o),b(f,n,null),w(n,i),$(y,a,C),b(u,y,C),$(y,c,C),b(d,y,C),g=!0},p(y,C){const S={};C&64&&(S.$$scope={dirty:C,ctx:y}),f.$set(S)},i(y){g||(m(f.$$.fragment,y),m(u.$$.fragment,y),m(d.$$.fragment,y),g=!0)},o(y){_(f.$$.fragment,y),_(u.$$.fragment,y),_(d.$$.fragment,y),g=!1},d(y){y&&(p(e),p(l),p(t),p(s),p(n),p(a),p(c)),k(f),k(u,y),k(d,y)}}}function gc(r){let e,l,t;return l=new pe({props:{$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&64&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Hl(r){let e,l;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p:Z,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function dc(r){let e,l,t,s,n;function o(a){r[4](a)}let f={$$slots:{right:[gc],default:[pc]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0]&&Hl(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&64&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0],B(()=>l=!1)),e.$set(c),a[0]?i?(i.p(a,u),u&1&&m(i,1)):(i=Hl(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function hc(r){let e,l,t,s=Math.abs(r[5].gradient)/100+"",n,o;return{c(){e=T("p"),l=v("Gradient: "),t=T("b"),n=v(s),o=v(`
        %`)},m(f,i){$(f,e,i),w(e,l),w(e,t),w(t,n),w(e,o)},p(f,i){i&32&&s!==(s=Math.abs(f[5].gradient)/100+"")&&q(n,s)},d(f){f&&p(e)}}}function bc(r){let e,l;return e=new ae({props:{$$slots:{default:[hc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&96&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function kc(r){let e,l,t,s;const n=[G(Je),{sourceLayer:Je},{manageHoverState:!0},{paint:{"line-color":ke(["/",["abs",["get","gradient"]],100],r[2],r[1]),"line-width":Ae,"line-opacity":se(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let o={$$slots:{default:[bc]},$$scope:{ctx:r}};for(let a=0;a<n.length;a+=1)o=re(o,n[a]);e=new be({props:o});const f=[G(Je+"_arrows"),{sourceLayer:Je},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=re(i,f[a]);return t=new Tn({props:i}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,l,u),b(t,a,u),s=!0},p(a,u){const c=u&7?oe(n,[u&0&&ie(G(Je)),u&0&&{sourceLayer:Je},n[2],u&6&&{paint:{"line-color":ke(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Ae,"line-opacity":se(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&1?oe(f,[u&0&&ie(G(Je+"_arrows")),u&0&&{sourceLayer:Je},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),s=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),s=!1},d(a){a&&p(l),k(e,a),k(t,a)}}}function wc(r){let e,l,t,s;return e=new me({props:{name:Je,$$slots:{default:[dc]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${Je}.pmtiles`,$$slots:{default:[kc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&65&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&65&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let Je="gradient";function vc(r,e,l){let t,s=te.gradient_flat_to_steep,n=[0,3,5,8,10,20,100],o=he(Je);Q(r,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,s,n,o,f]}class yc extends X{constructor(e){super(),x(this,e,vc,wc,Y,{})}}function Sc(r){let e,l,t;return{c(){e=T("img"),t=v(`
    Cycle parking`),tn(e.src,l=Ks)||z(e,"src",l),z(e,"alt","a logo representing cycle parking")},m(s,n){$(s,e,n),$(s,t,n)},p:Z,d(s){s&&(p(e),p(t))}}}function Cc(r){let e;return{c(){e=v("OpenStreetMap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Tc(r){let e;return{c(){e=v("OpenStreetMap Carto")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Lc(r){let e,l,t,s,n,o,f,i,a,u,c;return t=new ne({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),i=new ne({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Tc]},$$scope:{ctx:r}}}),u=new Xe({}),{c(){e=T("p"),l=v("Cycle parking, according to "),h(t.$$.fragment),s=v(` (as of 9 August 2023). The type of parking, public/private
          access, and whether it's covered are not shown.`),n=L(),o=T("p"),f=v("Icon from "),h(i.$$.fragment),a=L(),h(u.$$.fragment)},m(d,g){$(d,e,g),w(e,l),b(t,e,null),w(e,s),$(d,n,g),$(d,o,g),w(o,f),b(i,o,null),$(d,a,g),b(u,d,g),c=!0},p(d,g){const y={};g&16&&(y.$$scope={dirty:g,ctx:d}),t.$set(y);const C={};g&16&&(C.$$scope={dirty:g,ctx:d}),i.$set(C)},i(d){c||(m(t.$$.fragment,d),m(i.$$.fragment,d),m(u.$$.fragment,d),c=!0)},o(d){_(t.$$.fragment,d),_(i.$$.fragment,d),_(u.$$.fragment,d),c=!1},d(d){d&&(p(e),p(n),p(o),p(a)),k(t),k(i),k(u,d)}}}function Ic(r){let e,l,t;return l=new pe({props:{$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&16&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Mc(r){let e,l,t;function s(o){r[2](o)}let n={$$slots:{right:[Ic],default:[Sc]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&16&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function Nc(r){let e,l,t,s=(r[3].capacity??"unknown")+"",n;return{c(){e=T("p"),l=v("Capacity: "),t=T("b"),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(t,n)},p(o,f){f&8&&s!==(s=(o[3].capacity??"unknown")+"")&&q(n,s)},d(o){o&&p(e)}}}function Oc(r){let e,l;return e=new ae({props:{$$slots:{default:[Nc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&24&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function jc(r){let e,l;const t=[G(Lt),{sourceLayer:Lt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let s={$$slots:{default:[Oc]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new Tn({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&1?oe(t,[o&0&&ie(G(Lt)),o&0&&{sourceLayer:Lt},o&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:n[0]?"visible":"none"}}]):{};o&16&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function Pc(r){let e,l,t,s;return e=new me({props:{name:Lt,$$slots:{default:[Mc]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${Lt}.pmtiles`,$$slots:{default:[jc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&17&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&17&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let Lt="cycle_parking";function Rc(r,e,l){let t,s=he(Lt);Q(r,s,o=>l(0,t=o));function n(o){t=o,s.set(t)}return[t,s,n]}class Dc extends X{constructor(e){super(),x(this,e,Rc,Pc,Y,{})}}function Ac(r){let e;return{c(){e=v("Education")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Fc(r){let e;return{c(){e=v("Education")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function qc(r){let e,l,t,s;return t=new Xe({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap
          (as of 07 February 2024).`,l=L(),h(t.$$.fragment)},m(n,o){$(n,e,o),$(n,l,o),b(t,n,o),s=!0},p:Z,i(n){s||(m(t.$$.fragment,n),s=!0)},o(n){_(t.$$.fragment,n),s=!1},d(n){n&&(p(e),p(l)),k(t,n)}}}function Gc(r){let e,l,t;return l=new pe({props:{$$slots:{default:[qc]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&4096&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function El(r){let e,l,t;return l=new st({props:{$$slots:{default:[Bc]},$$scope:{ctx:r}}}),{c(){e=T("div"),h(l.$$.fragment),_e(e,"border","1px solid black"),_e(e,"padding","8px")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&4097&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function zc(r){let e,l,t;return e=new Te({props:{color:te.education.schools}}),{c(){h(e.$$.fragment),l=v(`
          Schools`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function Hc(r){let e,l,t;return e=new Te({props:{color:te.education.colleges}}),{c(){h(e.$$.fragment),l=v(`
          Colleges`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function Ec(r){let e,l,t;return e=new Te({props:{color:te.education.universities}}),{c(){h(e.$$.fragment),l=v(`
          Universities`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function Bc(r){let e,l,t,s,n,o,f,i,a;function u(S){r[5](S)}let c={$$slots:{default:[zc]},$$scope:{ctx:r}};r[0].school!==void 0&&(c.checked=r[0].school),e=new le({props:c}),H.push(()=>E(e,"checked",u));function d(S){r[6](S)}let g={$$slots:{default:[Hc]},$$scope:{ctx:r}};r[0].college!==void 0&&(g.checked=r[0].college),s=new le({props:g}),H.push(()=>E(s,"checked",d));function y(S){r[7](S)}let C={$$slots:{default:[Ec]},$$scope:{ctx:r}};return r[0].university!==void 0&&(C.checked=r[0].university),f=new le({props:C}),H.push(()=>E(f,"checked",y)),{c(){h(e.$$.fragment),t=L(),h(s.$$.fragment),o=L(),h(f.$$.fragment)},m(S,j){b(e,S,j),$(S,t,j),b(s,S,j),$(S,o,j),b(f,S,j),a=!0},p(S,j){const D={};j&4096&&(D.$$scope={dirty:j,ctx:S}),!l&&j&1&&(l=!0,D.checked=S[0].school,B(()=>l=!1)),e.$set(D);const P={};j&4096&&(P.$$scope={dirty:j,ctx:S}),!n&&j&1&&(n=!0,P.checked=S[0].college,B(()=>n=!1)),s.$set(P);const R={};j&4096&&(R.$$scope={dirty:j,ctx:S}),!i&&j&1&&(i=!0,R.checked=S[0].university,B(()=>i=!1)),f.$set(R)},i(S){a||(m(e.$$.fragment,S),m(s.$$.fragment,S),m(f.$$.fragment,S),a=!0)},o(S){_(e.$$.fragment,S),_(s.$$.fragment,S),_(f.$$.fragment,S),a=!1},d(S){S&&(p(t),p(o)),k(e,S),k(s,S),k(f,S)}}}function Uc(r){let e,l,t,s,n;function o(a){r[4](a)}let f={$$slots:{right:[Gc],default:[Fc]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0].show&&El(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&4096&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0].show,B(()=>l=!1)),e.$set(c),a[0].show?i?(i.p(a,u),u&1&&m(i,1)):(i=El(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function Wc(r){let e,l=(r[11].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&2048&&l!==(l=(s[11].name??"Unnamed institution")+"")&&q(t,l)},d(s){s&&p(e)}}}function Yc(r){let e,l;return e=new ae({props:{$$slots:{default:[Wc,({props:t})=>({11:t}),({props:t})=>t?2048:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&6144&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Jc(r){let e,l;const t=[G(It),{sourceLayer:It},{paint:{"fill-color":Ke(["get","type"],{school:te.education.schools,college:te.education.colleges,university:te.education.universities},"grey"),"fill-opacity":se(.7,1)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[2](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Yc]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new Fe({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&5?oe(t,[o&0&&ie(G(It)),o&0&&{sourceLayer:It},t[2],o&1&&{layout:{visibility:n[0].show?"visible":"none"}},o&5&&{filter:n[2](n[0])},t[5],t[6]]):{};o&4096&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function Vc(r){let e,l,t,s,n,o,f;function i(u){r[3](u)}let a={$$slots:{default:[Ac]},$$scope:{ctx:r}};return r[0].show!==void 0&&(a.checked=r[0].show),e=new le({props:a}),H.push(()=>E(e,"checked",i)),s=new me({props:{name:It,$$slots:{default:[Uc]},$$scope:{ctx:r}}}),o=new de({props:{url:`pmtiles://${ge()}/v1/${It}.pmtiles`,$$slots:{default:[Jc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(s.$$.fragment),n=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),b(s,u,c),$(u,n,c),b(o,u,c),f=!0},p(u,[c]){const d={};c&4096&&(d.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,d.checked=u[0].show,B(()=>l=!1)),e.$set(d);const g={};c&4097&&(g.$$scope={dirty:c,ctx:u}),s.$set(g);const y={};c&4097&&(y.$$scope={dirty:c,ctx:u}),o.$set(y)},i(u){f||(m(e.$$.fragment,u),m(s.$$.fragment,u),m(o.$$.fragment,u),f=!0)},o(u){_(e.$$.fragment,u),_(s.$$.fragment,u),_(o.$$.fragment,u),f=!1},d(u){u&&(p(t),p(n)),k(e,u),k(s,u),k(o,u)}}}let It="education";function Qc(r){return{show:!0,school:r.includes("school"),college:r.includes("college"),university:r.includes("university")}}function Zc(r,e,l){let t,s=["school","college","university"],n={show:!1,school:!0,college:!0,university:!0};function o(y){return y.show?s.filter(C=>y[C]).join(","):null}let f=Ht(It,n,o,Qc);Q(r,f,y=>l(0,t=y));function i(y){let C=s.filter(S=>y[S]);return["in",["get","type"],["literal",C]]}function a(y){r.$$.not_equal(t.show,y)&&(t.show=y,f.set(t))}function u(y){r.$$.not_equal(t.show,y)&&(t.show=y,f.set(t))}function c(y){r.$$.not_equal(t.school,y)&&(t.school=y,f.set(t))}function d(y){r.$$.not_equal(t.college,y)&&(t.college=y,f.set(t))}function g(y){r.$$.not_equal(t.university,y)&&(t.university=y,f.set(t))}return[t,f,i,a,u,c,d,g]}class Kc extends X{constructor(e){super(),x(this,e,Zc,Vc,Y,{})}}function Xc(r){let e;return{c(){e=v("Hospitals")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function xc(r){let e,l,t;return e=new Te({props:{color:te.hospitals}}),{c(){h(e.$$.fragment),l=v(`
    Hospitals`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function e$(r){let e;return{c(){e=v("hospital")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function t$(r){let e,l,t,s,n,o,f;return t=new ne({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[e$]},$$scope:{ctx:r}}}),o=new Xe({}),{c(){e=T("p"),l=v("This shows "),h(t.$$.fragment),s=v(` data from OpenStreetMap (as of 9 August 2023). It doesn't
          include outpatient clinics or individual doctor's offices.`),n=L(),h(o.$$.fragment)},m(i,a){$(i,e,a),w(e,l),b(t,e,null),w(e,s),$(i,n,a),b(o,i,a),f=!0},p(i,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(o.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(o.$$.fragment,i),f=!1},d(i){i&&(p(e),p(n)),k(t),k(o,i)}}}function n$(r){let e,l,t;return l=new pe({props:{$$slots:{default:[t$]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function l$(r){let e,l,t;function s(o){r[3](o)}let n={$$slots:{right:[n$],default:[xc]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&32&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function s$(r){let e,l=(r[4].name??"Unnamed hospital")+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&16&&l!==(l=(s[4].name??"Unnamed hospital")+"")&&q(t,l)},d(s){s&&p(e)}}}function r$(r){let e,l;return e=new ae({props:{$$slots:{default:[s$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&48&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function o$(r){let e,l;const t=[G(Mt),{sourceLayer:Mt},{paint:{"fill-color":te.hospitals,"fill-opacity":se(.7,1)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[r$]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new Fe({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&1?oe(t,[o&0&&ie(G(Mt)),o&0&&{sourceLayer:Mt},t[2],o&1&&{layout:{visibility:n[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function i$(r){let e,l,t,s,n,o,f;function i(u){r[2](u)}let a={$$slots:{default:[Xc]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),H.push(()=>E(e,"checked",i)),s=new me({props:{name:Mt,$$slots:{default:[l$]},$$scope:{ctx:r}}}),o=new de({props:{url:`pmtiles://${ge()}/v1/${Mt}.pmtiles`,$$slots:{default:[o$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(s.$$.fragment),n=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),b(s,u,c),$(u,n,c),b(o,u,c),f=!0},p(u,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,d.checked=u[0],B(()=>l=!1)),e.$set(d);const g={};c&33&&(g.$$scope={dirty:c,ctx:u}),s.$set(g);const y={};c&33&&(y.$$scope={dirty:c,ctx:u}),o.$set(y)},i(u){f||(m(e.$$.fragment,u),m(s.$$.fragment,u),m(o.$$.fragment,u),f=!0)},o(u){_(e.$$.fragment,u),_(s.$$.fragment,u),_(o.$$.fragment,u),f=!1},d(u){u&&(p(t),p(n)),k(e,u),k(s,u),k(o,u)}}}let Mt="hospitals";function f$(r,e,l){let t,s=he(Mt);Q(r,s,f=>l(0,t=f));function n(f){t=f,s.set(t)}function o(f){t=f,s.set(t)}return[t,s,n,o]}class a$ extends X{constructor(e){super(),x(this,e,f$,i$,Y,{})}}function u$(r){let e;return{c(){e=v("Railway stations")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function c$(r){let e,l,t;return{c(){e=T("img"),t=v(`
    Railway stations`),tn(e.src,l=Xs)||z(e,"src",l),z(e,"alt","A logo representing a train")},m(s,n){$(s,e,n),$(s,t,n)},p:Z,d(s){s&&(p(e),p(t))}}}function $$(r){let e;return{c(){e=v("railway station")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function p$(r){let e;return{c(){e=v(`National Rail
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function m$(r){let e,l,t,s,n,o,f,i,a,u,c,d;return t=new ne({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[$$]},$$scope:{ctx:r}}}),i=new ne({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[p$]},$$scope:{ctx:r}}}),c=new Xe({}),{c(){e=T("p"),l=v("This shows "),h(t.$$.fragment),s=v(" data from OpenStreetMap (as of 9 August 2023)."),n=L(),o=T("p"),f=v("Icon from "),h(i.$$.fragment),a=v(". (Note that not all stations shown are National Rail.)"),u=L(),h(c.$$.fragment)},m(g,y){$(g,e,y),w(e,l),b(t,e,null),w(e,s),$(g,n,y),$(g,o,y),w(o,f),b(i,o,null),w(o,a),$(g,u,y),b(c,g,y),d=!0},p(g,y){const C={};y&32&&(C.$$scope={dirty:y,ctx:g}),t.$set(C);const S={};y&32&&(S.$$scope={dirty:y,ctx:g}),i.$set(S)},i(g){d||(m(t.$$.fragment,g),m(i.$$.fragment,g),m(c.$$.fragment,g),d=!0)},o(g){_(t.$$.fragment,g),_(i.$$.fragment,g),_(c.$$.fragment,g),d=!1},d(g){g&&(p(e),p(n),p(o),p(u)),k(t),k(i),k(c,g)}}}function _$(r){let e,l,t;return l=new pe({props:{$$slots:{default:[m$]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function g$(r){let e,l,t;function s(o){r[3](o)}let n={$$slots:{right:[_$],default:[c$]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&32&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function d$(r){let e,l=(r[4].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&16&&l!==(l=(s[4].name??"Unnamed railway station")+"")&&q(t,l)},d(s){s&&p(e)}}}function h$(r){let e,l;return e=new ae({props:{$$slots:{default:[d$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&48&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function b$(r){let e,l;const t=[G(Qt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let s={$$slots:{default:[h$]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new Tn({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&1?oe(t,[o&0&&ie(G(Qt)),o&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:n[0]?"visible":"none"}}]):{};o&32&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function k$(r){let e,l,t,s,n,o,f;function i(u){r[2](u)}let a={$$slots:{default:[u$]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),H.push(()=>E(e,"checked",i)),s=new me({props:{name:Qt,$$slots:{default:[g$]},$$scope:{ctx:r}}}),o=new zt({props:{data:`${ge()}/v1/${Qt}.geojson`,$$slots:{default:[b$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(s.$$.fragment),n=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),b(s,u,c),$(u,n,c),b(o,u,c),f=!0},p(u,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,d.checked=u[0],B(()=>l=!1)),e.$set(d);const g={};c&33&&(g.$$scope={dirty:c,ctx:u}),s.$set(g);const y={};c&33&&(y.$$scope={dirty:c,ctx:u}),o.$set(y)},i(u){f||(m(e.$$.fragment,u),m(s.$$.fragment,u),m(o.$$.fragment,u),f=!0)},o(u){_(e.$$.fragment,u),_(s.$$.fragment,u),_(o.$$.fragment,u),f=!1},d(u){u&&(p(t),p(n)),k(e,u),k(s,u),k(o,u)}}}let Qt="railway_stations";function w$(r,e,l){let t,s=he(Qt);Q(r,s,f=>l(0,t=f));function n(f){t=f,s.set(t)}function o(f){t=f,s.set(t)}return[t,s,n,o]}class v$ extends X{constructor(e){super(),x(this,e,w$,k$,Y,{})}}function y$(r){let e;return{c(){e=v("Sports spaces")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function S$(r){let e,l,t;return e=new Te({props:{color:te.sports_spaces}}),{c(){h(e.$$.fragment),l=v(`
    Sports spaces`)},m(s,n){b(e,s,n),$(s,l,n),t=!0},p:Z,i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){s&&p(l),k(e,s)}}}function C$(r){let e;return{c(){e=v("sports pitches")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function T$(r){let e;return{c(){e=v("sports centres")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function L$(r){let e,l,t,s,n,o,f,i,a;return t=new ne({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[C$]},$$scope:{ctx:r}}}),n=new ne({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[T$]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=T("p"),l=v("This shows "),h(t.$$.fragment),s=v(" and "),h(n.$$.fragment),o=v(" data from OpenStreetMap (as of 9 August 2023)."),f=L(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,l),b(t,e,null),w(e,s),b(n,e,null),w(e,o),$(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),n.$set(g)},i(u){a||(m(t.$$.fragment,u),m(n.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(t.$$.fragment,u),_(n.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),k(t),k(n),k(i,u)}}}function I$(r){let e,l,t;return l=new pe({props:{$$slots:{default:[L$]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function M$(r){let e,l,t;function s(o){r[3](o)}let n={$$slots:{right:[I$],default:[S$]},$$scope:{ctx:r}};return r[0]!==void 0&&(n.checked=r[0]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){const i={};f&32&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.checked=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function N$(r){let e,l=(r[4].name??"Unnamed sports space")+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&16&&l!==(l=(s[4].name??"Unnamed sports space")+"")&&q(t,l)},d(s){s&&p(e)}}}function O$(r){let e,l;return e=new ae({props:{$$slots:{default:[N$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&48&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function j$(r){let e,l;const t=[G(Nt),{sourceLayer:Nt},{paint:{"fill-color":te.sports_spaces,"fill-opacity":se(.7,1)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[O$]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new Fe({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&1?oe(t,[o&0&&ie(G(Nt)),o&0&&{sourceLayer:Nt},t[2],o&1&&{layout:{visibility:n[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function P$(r){let e,l,t,s,n,o,f;function i(u){r[2](u)}let a={$$slots:{default:[y$]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),H.push(()=>E(e,"checked",i)),s=new me({props:{name:Nt,$$slots:{default:[M$]},$$scope:{ctx:r}}}),o=new de({props:{url:`pmtiles://${ge()}/v1/${Nt}.pmtiles`,$$slots:{default:[j$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(s.$$.fragment),n=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),b(s,u,c),$(u,n,c),b(o,u,c),f=!0},p(u,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,d.checked=u[0],B(()=>l=!1)),e.$set(d);const g={};c&33&&(g.$$scope={dirty:c,ctx:u}),s.$set(g);const y={};c&33&&(y.$$scope={dirty:c,ctx:u}),o.$set(y)},i(u){f||(m(e.$$.fragment,u),m(s.$$.fragment,u),m(o.$$.fragment,u),f=!0)},o(u){_(e.$$.fragment,u),_(s.$$.fragment,u),_(o.$$.fragment,u),f=!1},d(u){u&&(p(t),p(n)),k(e,u),k(s,u),k(o,u)}}}let Nt="sports_spaces";function R$(r,e,l){let t,s=he(Nt);Q(r,s,f=>l(0,t=f));function n(f){t=f,s.set(t)}function o(f){t=f,s.set(t)}return[t,s,n,o]}class D$ extends X{constructor(e){super(),x(this,e,R$,P$,Y,{})}}function A$(r){let e;return{c(){e=v("Stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function F$(r){let e;return{c(){e=v("DfT stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function q$(r){let e;return{c(){e=v("documented by DfT")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function G$(r){let e,l,t,s,n,o,f,i,a,u,c,d,g,y,C,S,j,D,P,R,N,O,M;return t=new ne({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[F$]},$$scope:{ctx:r}}}),j=new ne({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[q$]},$$scope:{ctx:r}}}),O=new Le({}),{c(){e=T("p"),l=v("This layer shows collisions recorded in the "),h(t.$$.fragment),s=v(" dataset. Please note these limitations:"),n=L(),o=T("ul"),f=T("li"),f.textContent="Only collisions between 2017 and 2022 are included",i=L(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while
            inspecting a scheme or development area. Not all points are shown at
            lower zoom levels. Do not use this to look for trends across a city
            or region scale.`,u=L(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included,
            due to problems with the recorded location`,d=L(),g=T("li"),g.textContent='The "pedestrians" category also include mobility scooters',y=L(),C=T("li"),S=v("All limitations "),h(j.$$.fragment),D=v(` also apply. Not all collisions or near misses are reported.
            There's nuance with the severity categories.`),P=L(),R=T("p"),R.textContent="You can click a point to open the full report, thanks to CycleStreets.",N=L(),h(O.$$.fragment)},m(I,A){$(I,e,A),w(e,l),b(t,e,null),w(e,s),$(I,n,A),$(I,o,A),w(o,f),w(o,i),w(o,a),w(o,u),w(o,c),w(o,d),w(o,g),w(o,y),w(o,C),w(C,S),b(j,C,null),w(C,D),$(I,P,A),$(I,R,A),$(I,N,A),b(O,I,A),M=!0},p(I,A){const W={};A&4194304&&(W.$$scope={dirty:A,ctx:I}),t.$set(W);const K={};A&4194304&&(K.$$scope={dirty:A,ctx:I}),j.$set(K)},i(I){M||(m(t.$$.fragment,I),m(j.$$.fragment,I),m(O.$$.fragment,I),M=!0)},o(I){_(t.$$.fragment,I),_(j.$$.fragment,I),_(O.$$.fragment,I),M=!1},d(I){I&&(p(e),p(n),p(o),p(P),p(R),p(N)),k(t),k(j),k(O,I)}}}function z$(r){let e,l,t;return l=new pe({props:{$$slots:{default:[G$]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&4194304&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Bl(r){let e,l,t,s,n,o,f,i,a,u,c,d,g;return l=new st({props:{small:!0,$$slots:{default:[W$]},$$scope:{ctx:r}}}),u=new Kt({props:{rows:r[9]}}),{c(){e=T("div"),h(l.$$.fragment),t=L(),s=T("div"),n=v(`Filter years:
        `),o=T("input"),f=v(`
        -
        `),i=T("input"),a=L(),h(u.$$.fragment),z(o,"type","number"),z(o,"min",2017),z(o,"max",2022),z(o,"class","svelte-1ft65rw"),z(i,"type","number"),z(i,"min",2017),z(i,"max",2022),z(i,"class","svelte-1ft65rw"),_e(e,"border","1px solid black"),_e(e,"padding","8px")},m(y,C){$(y,e,C),b(l,e,null),w(e,t),w(e,s),w(s,n),w(s,o),Ve(o,r[0].minYear),w(s,f),w(s,i),Ve(i,r[0].maxYear),w(e,a),b(u,e,null),c=!0,d||(g=[nt(o,"input",r[15]),nt(i,"input",r[16])],d=!0)},p(y,C){const S={};C&4194305&&(S.$$scope={dirty:C,ctx:y}),l.$set(S),C&1&&Vt(o.value)!==y[0].minYear&&Ve(o,y[0].minYear),C&1&&Vt(i.value)!==y[0].maxYear&&Ve(i,y[0].maxYear)},i(y){c||(m(l.$$.fragment,y),m(u.$$.fragment,y),c=!0)},o(y){_(l.$$.fragment,y),_(u.$$.fragment,y),c=!1},d(y){y&&p(e),k(l),k(u),d=!1,zs(g)}}}function H$(r){let e;return{c(){e=v("Pedestrians")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function E$(r){let e;return{c(){e=v("Cyclists")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function B$(r){let e;return{c(){e=v("Horse riders")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function U$(r){let e;return{c(){e=v("Other")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function W$(r){let e,l,t,s,n,o,f,i,a,u,c,d;function g(N){r[11](N)}let y={$$slots:{default:[H$]},$$scope:{ctx:r}};r[0].pedestrians!==void 0&&(y.checked=r[0].pedestrians),e=new le({props:y}),H.push(()=>E(e,"checked",g));function C(N){r[12](N)}let S={$$slots:{default:[E$]},$$scope:{ctx:r}};r[0].cyclists!==void 0&&(S.checked=r[0].cyclists),s=new le({props:S}),H.push(()=>E(s,"checked",C));function j(N){r[13](N)}let D={$$slots:{default:[B$]},$$scope:{ctx:r}};r[0].horseRiders!==void 0&&(D.checked=r[0].horseRiders),f=new le({props:D}),H.push(()=>E(f,"checked",j));function P(N){r[14](N)}let R={$$slots:{default:[U$]},$$scope:{ctx:r}};return r[0].other!==void 0&&(R.checked=r[0].other),u=new le({props:R}),H.push(()=>E(u,"checked",P)),{c(){h(e.$$.fragment),t=L(),h(s.$$.fragment),o=L(),h(f.$$.fragment),a=L(),h(u.$$.fragment)},m(N,O){b(e,N,O),$(N,t,O),b(s,N,O),$(N,o,O),b(f,N,O),$(N,a,O),b(u,N,O),d=!0},p(N,O){const M={};O&4194304&&(M.$$scope={dirty:O,ctx:N}),!l&&O&1&&(l=!0,M.checked=N[0].pedestrians,B(()=>l=!1)),e.$set(M);const I={};O&4194304&&(I.$$scope={dirty:O,ctx:N}),!n&&O&1&&(n=!0,I.checked=N[0].cyclists,B(()=>n=!1)),s.$set(I);const A={};O&4194304&&(A.$$scope={dirty:O,ctx:N}),!i&&O&1&&(i=!0,A.checked=N[0].horseRiders,B(()=>i=!1)),f.$set(A);const W={};O&4194304&&(W.$$scope={dirty:O,ctx:N}),!c&&O&1&&(c=!0,W.checked=N[0].other,B(()=>c=!1)),u.$set(W)},i(N){d||(m(e.$$.fragment,N),m(s.$$.fragment,N),m(f.$$.fragment,N),m(u.$$.fragment,N),d=!0)},o(N){_(e.$$.fragment,N),_(s.$$.fragment,N),_(f.$$.fragment,N),_(u.$$.fragment,N),d=!1},d(N){N&&(p(t),p(o),p(a)),k(e,N),k(s,N),k(f,N),k(u,N)}}}function Y$(r){let e,l,t,s,n;function o(a){r[10](a)}let f={$$slots:{right:[z$],default:[A$]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0].show&&Bl(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&4194304&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0].show,B(()=>l=!1)),e.$set(c),a[0].show?i?(i.p(a,u),u&1&&m(i,1)):(i=Bl(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function Ul(r){let e,l,t,s=r[3][r[21].pedestrian_location]+"",n;return{c(){e=T("p"),l=v("Pedestrian location: "),t=T("b"),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(t,n)},p(o,f){f&2097152&&s!==(s=o[3][o[21].pedestrian_location]+"")&&q(n,s)},d(o){o&&p(e)}}}function Wl(r){let e,l,t,s=r[4][r[21].pedestrian_movement]+"",n;return{c(){e=T("p"),l=v("Pedestrian movement: "),t=T("b"),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(t,n)},p(o,f){f&2097152&&s!==(s=o[4][o[21].pedestrian_movement]+"")&&q(n,s)},d(o){o&&p(e)}}}function J$(r){let e,l,t,s=r[21].year+"",n,o,f,i,a,u=r[5][r[21].severity]+"",c,d,g,y,C,S=Yl(r[21])+"",j,D,P,R,N,O=r[21].pedestrian_location&&Ul(r),M=r[21].pedestrian_movement&&Wl(r);return{c(){e=T("p"),l=v("Year: "),t=T("b"),n=v(s),o=L(),f=T("p"),i=v("Severity: "),a=T("b"),c=v(u),d=L(),g=T("p"),y=v("Casualties: "),C=T("b"),j=v(S),D=L(),O&&O.c(),P=L(),M&&M.c(),R=L(),N=T("p"),N.textContent="Click to open full report in CycleStreets"},m(I,A){$(I,e,A),w(e,l),w(e,t),w(t,n),$(I,o,A),$(I,f,A),w(f,i),w(f,a),w(a,c),$(I,d,A),$(I,g,A),w(g,y),w(g,C),w(C,j),$(I,D,A),O&&O.m(I,A),$(I,P,A),M&&M.m(I,A),$(I,R,A),$(I,N,A)},p(I,A){A&2097152&&s!==(s=I[21].year+"")&&q(n,s),A&2097152&&u!==(u=I[5][I[21].severity]+"")&&q(c,u),A&2097152&&S!==(S=Yl(I[21])+"")&&q(j,S),I[21].pedestrian_location?O?O.p(I,A):(O=Ul(I),O.c(),O.m(P.parentNode,P)):O&&(O.d(1),O=null),I[21].pedestrian_movement?M?M.p(I,A):(M=Wl(I),M.c(),M.m(R.parentNode,R)):M&&(M.d(1),M=null)},d(I){I&&(p(e),p(o),p(f),p(d),p(g),p(D),p(P),p(R),p(N)),O&&O.d(I),M&&M.d(I)}}}function V$(r){let e,l;return e=new ae({props:{$$slots:{default:[J$,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&6291456&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Q$(r){let e,l;const t=[G(Ot),{sourceLayer:Ot},{paint:{"circle-color":ke(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[1]},{layout:{visibility:r[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let s={$$slots:{default:[V$]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new Gt({props:s}),e.$on("click",X$),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&451?oe(t,[o&0&&ie(G(Ot)),o&0&&{sourceLayer:Ot},o&448&&{paint:{"circle-color":ke(["get","severity"],[1,2,3],[n[6],n[7],n[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&2&&{filter:n[1]},o&1&&{layout:{visibility:n[0].show?"visible":"none"}},t[5],t[6]]):{};o&4194304&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function Z$(r){let e,l,t,s;return e=new me({props:{name:Ot,$$slots:{default:[Y$]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${Ot}.pmtiles`,$$slots:{default:[Q$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&4194305&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&4194307&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let Ot="stats19";function K$(r){let[e,l,t]=r.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Yl(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function X$(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function x$(r,e,l){let t,s,n=["pedestrians","cyclists","horseRiders","other"],o={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function f(I){return I.show?`${n.filter(W=>I[W]).join(",")}/${I.minYear}/${I.maxYear}`:null}let i=Ht(Ot,o,f,K$);Q(r,i,I=>l(0,s=I));function a(I,A,W,K,F,J){let ee=["any"];return s.pedestrians&&ee.push(["get","pedestrian"]),s.cyclists&&ee.push(["get","cyclist"]),s.horseRiders&&ee.push(["get","horse_rider"]),s.other&&ee.push(["get","other"]),["all",[">=",["get","year"],s.minYear],["<=",["get","year"],s.maxYear],ee]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},d={1:"Fatal",2:"Serious",3:"Slight"},g=te.sequential_low_to_high[4],y=te.sequential_low_to_high[2],C=te.sequential_low_to_high[0],S=[["Fatal",g],["Serious",y],["Slight",C]];function j(I){r.$$.not_equal(s.show,I)&&(s.show=I,i.set(s))}function D(I){r.$$.not_equal(s.pedestrians,I)&&(s.pedestrians=I,i.set(s))}function P(I){r.$$.not_equal(s.cyclists,I)&&(s.cyclists=I,i.set(s))}function R(I){r.$$.not_equal(s.horseRiders,I)&&(s.horseRiders=I,i.set(s))}function N(I){r.$$.not_equal(s.other,I)&&(s.other=I,i.set(s))}function O(){s.minYear=Vt(this.value),i.set(s)}function M(){s.maxYear=Vt(this.value),i.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=a(s.minYear,s.maxYear,s.pedestrians,s.cyclists,s.horseRiders,s.other))},[s,t,i,u,c,d,g,y,C,S,j,D,P,R,N,O,M]}class ep extends X{constructor(e){super(),x(this,e,x$,Z$,Y,{})}}function tp(r){let e;return{c(){e=v("Vehicle counts")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function np(r){let e;return{c(){e=v(`DfT road statistics
          `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function lp(r){let e;return{c(){e=v("methodology")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function sp(r){let e,l,t,s,n,o,f,i,a,u,c;return t=new ne({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[np]},$$scope:{ctx:r}}}),n=new ne({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[lp]},$$scope:{ctx:r}}}),u=new Le({}),{c(){e=T("p"),l=v("AADF (annual average daily flow) data from "),h(t.$$.fragment),s=v(`. This counts the total daily number of vehicles
          traveling past a count point (in both directions) on an average day of
          the year. Data from the latest year available is shown. See `),h(n.$$.fragment),o=v(" for details and caveats about the measurements."),f=L(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
          thicker when the latest data is a manual or automatic count, and
          thinner when it's an estimate from previous years or nearby counters.
          Click a point for full data.`,a=L(),h(u.$$.fragment)},m(d,g){$(d,e,g),w(e,l),b(t,e,null),w(e,s),b(n,e,null),w(e,o),$(d,f,g),$(d,i,g),$(d,a,g),b(u,d,g),c=!0},p(d,g){const y={};g&128&&(y.$$scope={dirty:g,ctx:d}),t.$set(y);const C={};g&128&&(C.$$scope={dirty:g,ctx:d}),n.$set(C)},i(d){c||(m(t.$$.fragment,d),m(n.$$.fragment,d),m(u.$$.fragment,d),c=!0)},o(d){_(t.$$.fragment,d),_(n.$$.fragment,d),_(u.$$.fragment,d),c=!1},d(d){d&&(p(e),p(f),p(i),p(a)),k(t),k(n),k(u,d)}}}function rp(r){let e,l,t;return l=new pe({props:{$$slots:{default:[sp]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&128&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Jl(r){let e,l;return e=new Ge({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p:Z,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function op(r){let e,l,t,s,n;function o(a){r[5](a)}let f={$$slots:{right:[rp],default:[tp]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0]&&Jl(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&128&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0],B(()=>l=!1)),e.$set(c),a[0]?i?(i.p(a,u),u&1&&m(i,1)):(i=Jl(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function ip(r){let e,l=r[6].location+"",t,s,n,o,f=r[6].year+"",i,a,u,c=r[6].motor_vehicles.toLocaleString()+"",d,g,y,C,S=r[6].year+"",j,D,P,R=r[6].pedal_cycles.toLocaleString()+"",N,O,M,I,A,W=r[6].method+"",K;return{c(){e=T("h2"),t=v(l),s=L(),n=T("p"),o=v("Total motor vehicles ("),i=v(f),a=v(` AADF):
        `),u=T("b"),d=v(c),g=L(),y=T("p"),C=v("Total pedal cycles ("),j=v(S),D=v(` AADF):
        `),P=T("b"),N=v(R),O=L(),M=T("p"),I=v("Count method: "),A=T("b"),K=v(W)},m(F,J){$(F,e,J),w(e,t),$(F,s,J),$(F,n,J),w(n,o),w(n,i),w(n,a),w(n,u),w(u,d),$(F,g,J),$(F,y,J),w(y,C),w(y,j),w(y,D),w(y,P),w(P,N),$(F,O,J),$(F,M,J),w(M,I),w(M,A),w(A,K)},p(F,J){J&64&&l!==(l=F[6].location+"")&&q(t,l),J&64&&f!==(f=F[6].year+"")&&q(i,f),J&64&&c!==(c=F[6].motor_vehicles.toLocaleString()+"")&&q(d,c),J&64&&S!==(S=F[6].year+"")&&q(j,S),J&64&&R!==(R=F[6].pedal_cycles.toLocaleString()+"")&&q(N,R),J&64&&W!==(W=F[6].method+"")&&q(K,W)},d(F){F&&(p(e),p(s),p(n),p(g),p(y),p(O),p(M))}}}function fp(r){let e,l;return e=new ae({props:{$$slots:{default:[ip,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&192&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ap(r){let e,l;const t=[G(jt),{sourceLayer:jt},{paint:{"circle-color":ke(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let s={$$slots:{default:[fp]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new Gt({props:s}),e.$on("click",cp),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&7?oe(t,[o&0&&ie(G(jt)),o&0&&{sourceLayer:jt},o&6&&{paint:{"circle-color":ke(["get","motor_vehicles"],n[2],n[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},o&1&&{layout:{visibility:n[0]?"visible":"none"}},t[4],t[5]]):{};o&128&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function up(r){let e,l,t,s;return e=new me({props:{name:jt,$$slots:{default:[op]},$$scope:{ctx:r}}}),t=new de({props:{url:`pmtiles://${ge()}/v1/${jt}.pmtiles`,$$slots:{default:[ap]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&129&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&129&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let jt="vehicle_counts";function cp(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function $p(r,e,l){let t,s=te.sequential_low_to_high,n=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],f=he(jt);Q(r,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,s,n,o,f,i]}class pp extends X{constructor(e){super(),x(this,e,$p,up,Y,{})}}function Vl(r,e,l){const t=r.slice();return t[6]=e[l],t}function mp(r){let e;return{c(){e=v("Issues & Conflicts")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function _p(r){let e,l,t;return{c(){e=T("p"),e.textContent=`Critical issues and policy conflicts from the Design Assistance Log.
          This is internally collected data.`,l=L(),t=T("p"),t.textContent=`This layer is manually copied from a copy of the DA Log. The data is
          recent as of 10 June 2024.`},m(s,n){$(s,e,n),$(s,l,n),$(s,t,n)},p:Z,d(s){s&&(p(e),p(l),p(t))}}}function gp(r){let e,l,t;return l=new pe({props:{$$slots:{default:[_p]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&512&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Ql(r){let e,l;return e=new Kt({props:{rows:r[3]}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p:Z,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function dp(r){let e,l,t,s,n;function o(a){r[4](a)}let f={$$slots:{right:[gp],default:[mp]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new le({props:f}),H.push(()=>E(e,"checked",o));let i=r[0]&&Ql(r);return{c(){h(e.$$.fragment),t=L(),i&&i.c(),s=$e()},m(a,u){b(e,a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u),n=!0},p(a,u){const c={};u&512&&(c.$$scope={dirty:u,ctx:a}),!l&&u&1&&(l=!0,c.checked=a[0],B(()=>l=!1)),e.$set(c),a[0]?i?(i.p(a,u),u&1&&m(i,1)):(i=Ql(a),i.c(),m(i,1),i.m(s.parentNode,s)):i&&(ue(),_(i,1,1,()=>{i=null}),ce())},i(a){n||(m(e.$$.fragment,a),m(i),n=!0)},o(a){_(e.$$.fragment,a),_(i),n=!1},d(a){a&&(p(t),p(s)),k(e,a),i&&i.d(a)}}}function hp(r){let e,l=r[5]["Issue ID"]+"",t,s,n=r[5].Code+"",o,f,i,a=r[5]["Issue Stage"]+"",u;return{c(){e=T("h2"),t=v(l),s=v(" - "),o=v(n),f=L(),i=T("p"),u=v(a)},m(c,d){$(c,e,d),w(e,t),w(e,s),w(e,o),$(c,f,d),$(c,i,d),w(i,u)},p(c,d){d&32&&l!==(l=c[5]["Issue ID"]+"")&&q(t,l),d&32&&n!==(n=c[5].Code+"")&&q(o,n),d&32&&a!==(a=c[5]["Issue Stage"]+"")&&q(u,a)},d(c){c&&(p(e),p(f),p(i))}}}function Zl(r){let e,l=r[6]+"",t,s,n,o=r[5][r[6]]+"",f,i;return{c(){e=T("p"),t=v(l),s=v(`:
            `),n=T("b"),f=v(o),i=L()},m(a,u){$(a,e,u),w(e,t),w(e,s),w(e,n),w(n,f),w(e,i)},p(a,u){u&32&&o!==(o=a[5][a[6]]+"")&&q(f,o)},d(a){a&&p(e)}}}function bp(r){let e,l=ye(r[2]),t=[];for(let s=0;s<l.length;s+=1)t[s]=Zl(Vl(r,l,s));return{c(){e=T("div");for(let s=0;s<t.length;s+=1)t[s].c();_e(e,"max-width","30vw"),_e(e,"max-height","60vh"),_e(e,"overflow","auto")},m(s,n){$(s,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(s,n){if(n&36){l=ye(s[2]);let o;for(o=0;o<l.length;o+=1){const f=Vl(s,l,o);t[o]?t[o].p(f,n):(t[o]=Zl(f),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(s){s&&p(e),Ze(t,s)}}}function kp(r){let e,l,t,s;return e=new ae({props:{openOn:"hover",$$slots:{default:[hp,({props:n})=>({5:n}),({props:n})=>n?32:0]},$$scope:{ctx:r}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[bp,({props:n})=>({5:n}),({props:n})=>n?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,o){const f={};o&544&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&544&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}function wp(r){let e,l;const t=[G(sn),{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let s={$$slots:{default:[kp]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new Gt({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&9?oe(t,[o&0&&ie(G(sn)),o&8&&{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(n[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&1&&{layout:{visibility:n[0]?"visible":"none"}},t[3],t[4]]):{};o&512&&(f.$$scope={dirty:o,ctx:n}),e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function vp(r){let e,l,t,s;return e=new me({props:{name:sn,$$slots:{default:[dp]},$$scope:{ctx:r}}}),t=new zt({props:{data:`${Zt()}/v1/problems.geojson.gz`,$$slots:{default:[wp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,[o]){const f={};o&513&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&513&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}let sn="problems";function yp(r,e,l){let t,s=he(sn);Q(r,s,i=>l(0,t=i));let n=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],o=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,s.set(t)}return[t,s,n,o,f]}class Sp extends X{constructor(e){super(),x(this,e,yp,vp,Y,{})}}function Cp(r){let e;function l(n,o){return n[2]<=100?Ip:Lp}let t=l(r),s=t(r);return{c(){s.c(),e=$e()},m(n,o){s.m(n,o),$(n,e,o)},p(n,o){t===(t=l(n))&&s?s.p(n,o):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},i:Z,o:Z,d(n){n&&p(e),s.d(n)}}}function Tp(r){let e,l;return e=new lt({props:{$$slots:{default:[Mp]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&64&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Lp(r){let e;return{c(){e=T("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){$(l,e,t)},p:Z,d(l){l&&p(e)}}}function Ip(r){let e,l,t;return{c(){e=T("label"),l=v(`Downloading scheme data
      `),t=T("progress"),t.value=r[2],z(t,"class","svelte-q3473n")},m(s,n){$(s,e,n),w(e,l),w(e,t)},p(s,n){n&4&&(t.value=s[2])},d(s){s&&p(e)}}}function Mp(r){let e;return{c(){e=v("Load latest scheme data")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Np(r){let e,l,t,s;const n=[Tp,Cp],o=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(r))&&(l=o[e]=n[e](r)),{c(){l&&l.c(),t=$e()},m(i,a){~e&&o[e].m(i,a),$(i,t,a),s=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&o[e].p(i,a):(l&&(ue(),_(o[u],1,1,()=>{o[u]=null}),ce()),~e?(l=o[e],l?l.p(i,a):(l=o[e]=n[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){s||(m(l),s=!0)},o(i){_(l),s=!1},d(i){i&&p(t),~e&&o[e].d(i)}}}function Op(r,e,l){let{loadFile:t}=e,s=!new URLSearchParams(window.location.search).has("disable_schemes"),n=!0,o=0;async function f(){let a=await xs(`${Zt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,o=c)});l(2,o=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,n=!1)}Es(async()=>{s&&await f()});async function i(){l(0,s=!0),await f()}return r.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[s,n,o,i,t]}class jp extends X{constructor(e){super(),x(this,e,Op,Np,Y,{loadFile:4})}}const rn=Re({type:"FeatureCollection",features:[],schemes:{}}),dn=Re(new Map),Kl=Re(""),Xl=Re(""),hn=Re({type:"FeatureCollection",features:[],schemes:{}}),bn=Re(new Map),xl=Re(""),es=Re("");function Pp(r){let e={type:"FeatureCollection",features:[],schemes:{},notes:r.notes},l=new Map,t={type:"FeatureCollection",features:[],schemes:{},notes:r.notes},s=new Map;for(let[n,o]of Object.entries(r.schemes))o.pipeline?(s.set(n,o),t.schemes[n]=o):(l.set(n,o),e.schemes[n]=o);for(let n of r.features){if(!Rp(n))continue;let o=n.properties.scheme_reference,f=l.has(o),a=(f?l:s).get(o);a.browse&&(n.properties.funding_programme=a.browse.funding_programme,n.properties.current_milestone=a.browse.current_milestone);let u=f?e:t;n.id=u.features.length+1,u.features.push(n)}rn.set(e),dn.set(l),hn.set(t),bn.set(s)}function Rp(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}let Wt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},kn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function ts(r,e,l){const t=r.slice();return t[28]=e[l],t[29]=e,t[30]=l,t}function Dp(r){let e;return{c(){e=v("Filters")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ap(r){let e;return{c(){e=v("Reset all filters")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Fp(r){let e,l,t,s,n,o,f,i;e=new mn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[zp]},$$scope:{ctx:r}}});function a(g){r[23](g)}let u={label:"Scheme name or reference",options:on(r[3])};r[0]!==void 0&&(u.value=r[0]),t=new Us({props:u}),H.push(()=>E(t,"value",a));function c(g){r[24](g)}let d={label:"Authority or region",choices:r[10],emptyOption:!0};return r[4]!==void 0&&(d.value=r[4]),o=new qt({props:d}),H.push(()=>E(o,"value",c)),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),n=L(),h(o.$$.fragment)},m(g,y){b(e,g,y),$(g,l,y),b(t,g,y),$(g,n,y),b(o,g,y),i=!0},p(g,y){const C={};y[0]&2|y[1]&1&&(C.$$scope={dirty:y,ctx:g}),e.$set(C);const S={};y[0]&8&&(S.options=on(g[3])),!s&&y[0]&1&&(s=!0,S.value=g[0],B(()=>s=!1)),t.$set(S);const j={};y[0]&1024&&(j.choices=g[10]),!f&&y[0]&16&&(f=!0,j.value=g[4],B(()=>f=!1)),o.$set(j)},i(g){i||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(o.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),i=!1},d(g){g&&(p(l),p(n)),k(e,g),k(t,g),k(o,g)}}}function qp(r){let e,l,t,s,n,o,f,i,a,u,c,d,g,y,C,S;t=new mn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Ep]},$$scope:{ctx:r}}});function j(M){r[17](M)}let D={label:"Scheme name or reference",options:on(r[3])};r[0]!==void 0&&(D.value=r[0]),n=new Us({props:D}),H.push(()=>E(n,"value",j));function P(M){r[18](M)}let R={label:"Authority or region",choices:r[10],emptyOption:!0};r[4]!==void 0&&(R.value=r[4]),i=new qt({props:R}),H.push(()=>E(i,"value",P)),d=new mn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[Wp]},$$scope:{ctx:r}}});function N(M){r[20](M)}let O={label:"Current milestone",choices:r[11],emptyOption:!0};return r[6]!==void 0&&(O.value=r[6]),y=new qt({props:O}),H.push(()=>E(y,"value",N)),{c(){e=T("div"),l=T("div"),h(t.$$.fragment),s=L(),h(n.$$.fragment),f=L(),h(i.$$.fragment),u=L(),c=T("div"),h(d.$$.fragment),g=L(),h(y.$$.fragment),z(l,"class","govuk-grid-column-one-half"),z(c,"class","govuk-grid-column-one-half"),z(e,"class","govuk-grid-row")},m(M,I){$(M,e,I),w(e,l),b(t,l,null),w(l,s),b(n,l,null),w(l,f),b(i,l,null),w(e,u),w(e,c),b(d,c,null),w(c,g),b(y,c,null),S=!0},p(M,I){const A={};I[0]&2|I[1]&1&&(A.$$scope={dirty:I,ctx:M}),t.$set(A);const W={};I[0]&8&&(W.options=on(M[3])),!o&&I[0]&1&&(o=!0,W.value=M[0],B(()=>o=!1)),n.$set(W);const K={};I[0]&1024&&(K.choices=M[10]),!a&&I[0]&16&&(a=!0,K.value=M[4],B(()=>a=!1)),i.$set(K);const F={};I[0]&32|I[1]&1&&(F.$$scope={dirty:I,ctx:M}),d.$set(F);const J={};!C&&I[0]&64&&(C=!0,J.value=M[6],B(()=>C=!1)),y.$set(J)},i(M){S||(m(t.$$.fragment,M),m(n.$$.fragment,M),m(i.$$.fragment,M),m(d.$$.fragment,M),m(y.$$.fragment,M),S=!0)},o(M){_(t.$$.fragment,M),_(n.$$.fragment,M),_(i.$$.fragment,M),_(d.$$.fragment,M),_(y.$$.fragment,M),S=!1},d(M){M&&p(e),k(t),k(n),k(i),k(d),k(y)}}}function Gp(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function zp(r){let e,l,t,s,n,o;return t=new lt({props:{$$slots:{default:[Gp]},$$scope:{ctx:r}}}),t.$on("click",r[22]),{c(){e=T("input"),l=L(),h(t.$$.fragment),z(e,"type","text"),z(e,"class","govuk-input govuk-input--width-10"),z(e,"id","filterInterventionText")},m(f,i){$(f,e,i),Ve(e,r[1]),$(f,l,i),b(t,f,i),s=!0,n||(o=nt(e,"input",r[21]),n=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&Ve(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){s||(m(t.$$.fragment,f),s=!0)},o(f){_(t.$$.fragment,f),s=!1},d(f){f&&(p(e),p(l)),k(t,f),n=!1,o()}}}function Hp(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ep(r){let e,l,t,s,n,o;return t=new lt({props:{$$slots:{default:[Hp]},$$scope:{ctx:r}}}),t.$on("click",r[16]),{c(){e=T("input"),l=L(),h(t.$$.fragment),z(e,"type","text"),z(e,"class","govuk-input govuk-input--width-10"),z(e,"id","filterInterventionText")},m(f,i){$(f,e,i),Ve(e,r[1]),$(f,l,i),b(t,f,i),s=!0,n||(o=nt(e,"input",r[15]),n=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&Ve(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){s||(m(t.$$.fragment,f),s=!0)},o(f){_(t.$$.fragment,f),s=!1},d(f){f&&(p(e),p(l)),k(t,f),n=!1,o()}}}function Bp(r){let e=r[28]+"",l,t;return{c(){l=v(e),t=L()},m(s,n){$(s,l,n),$(s,t,n)},p:Z,d(s){s&&(p(l),p(t))}}}function ns(r){let e,l,t;function s(o){r[19](o,r[28])}let n={$$slots:{default:[Bp]},$$scope:{ctx:r}};return r[5][r[28]]!==void 0&&(n.checked=r[5][r[28]]),e=new le({props:n}),H.push(()=>E(e,"checked",s)),{c(){h(e.$$.fragment)},m(o,f){b(e,o,f),t=!0},p(o,f){r=o;const i={};f[1]&1&&(i.$$scope={dirty:f,ctx:r}),!l&&f[0]&32&&(l=!0,i.checked=r[5][r[28]],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){_(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function Up(r){let e,l,t=ye(Object.keys(Wt)),s=[];for(let o=0;o<t.length;o+=1)s[o]=ns(ts(r,t,o));const n=o=>_(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=$e()},m(o,f){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(o,f);$(o,e,f),l=!0},p(o,f){if(f[0]&32){t=ye(Object.keys(Wt));let i;for(i=0;i<t.length;i+=1){const a=ts(o,t,i);s[i]?(s[i].p(a,f),m(s[i],1)):(s[i]=ns(a),s[i].c(),m(s[i],1),s[i].m(e.parentNode,e))}for(ue(),i=t.length;i<s.length;i+=1)n(i);ce()}},i(o){if(!l){for(let f=0;f<t.length;f+=1)m(s[f]);l=!0}},o(o){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)_(s[f]);l=!1},d(o){o&&p(e),Ze(s,o)}}}function Wp(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[Up]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s[0]&32|s[1]&1&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Yp(r){let e;return{c(){e=v("Done")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Jp(r){let e,l,t,s,n=r[9].interventions.toLocaleString()+"",o,f,i,a,u=r[8].size.toLocaleString()+"",c,d,g,y,C,S=ls(r[9].totalLength).toFixed(1)+"",j,D,P,R,N,O,M,I,A,W;R=new lt({props:{$$slots:{default:[Ap]},$$scope:{ctx:r}}}),R.$on("click",r[12]);const K=[qp,Fp],F=[];function J(ee,U){return ee[2]=="ATF"?0:1}return O=J(r),M=F[O]=K[O](r),A=new er({props:{$$slots:{default:[Yp]},$$scope:{ctx:r}}}),A.$on("click",r[25]),{c(){e=T("p"),e.textContent="Showing:",l=L(),t=T("ul"),s=T("li"),o=v(n),f=v(" interventions"),i=L(),a=T("li"),c=v(u),d=v(" schemes"),g=L(),y=T("li"),C=v("total route length of "),j=v(S),D=v(" miles"),P=L(),h(R.$$.fragment),N=L(),M.c(),I=L(),h(A.$$.fragment)},m(ee,U){$(ee,e,U),$(ee,l,U),$(ee,t,U),w(t,s),w(s,o),w(s,f),w(t,i),w(t,a),w(a,c),w(a,d),w(t,g),w(t,y),w(y,C),w(y,j),w(y,D),$(ee,P,U),b(R,ee,U),$(ee,N,U),F[O].m(ee,U),$(ee,I,U),b(A,ee,U),W=!0},p(ee,U){(!W||U[0]&512)&&n!==(n=ee[9].interventions.toLocaleString()+"")&&q(o,n),(!W||U[0]&256)&&u!==(u=ee[8].size.toLocaleString()+"")&&q(c,u),(!W||U[0]&512)&&S!==(S=ls(ee[9].totalLength).toFixed(1)+"")&&q(j,S);const Ie={};U[1]&1&&(Ie.$$scope={dirty:U,ctx:ee}),R.$set(Ie);let De=O;O=J(ee),O===De?F[O].p(ee,U):(ue(),_(F[De],1,1,()=>{F[De]=null}),ce(),M=F[O],M?M.p(ee,U):(M=F[O]=K[O](ee),M.c()),m(M,1),M.m(I.parentNode,I));const V={};U[1]&1&&(V.$$scope={dirty:U,ctx:ee}),A.$set(V)},i(ee){W||(m(R.$$.fragment,ee),m(M),m(A.$$.fragment,ee),W=!0)},o(ee){_(R.$$.fragment,ee),_(M),_(A.$$.fragment,ee),W=!1},d(ee){ee&&(p(e),p(l),p(t),p(P),p(N),p(I)),k(R,ee),F[O].d(ee),k(A,ee)}}}function Vp(r){let e,l,t,s,n;e=new lt({props:{$$slots:{default:[Dp]},$$scope:{ctx:r}}}),e.$on("click",r[14]);function o(i){r[26](i)}let f={title:`Filter ${r[2]} schemes`,$$slots:{default:[Jp]},$$scope:{ctx:r}};return r[7]!==void 0&&(f.open=r[7]),t=new Ds({props:f}),H.push(()=>E(t,"open",o)),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,l,a),b(t,i,a),n=!0},p(i,a){const u={};a[1]&1&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a[0]&4&&(c.title=`Filter ${i[2]} schemes`),a[0]&2047|a[1]&1&&(c.$$scope={dirty:a,ctx:i}),!s&&a[0]&128&&(s=!0,c.open=i[7],B(()=>s=!1)),t.$set(c)},i(i){n||(m(e.$$.fragment,i),m(t.$$.fragment,i),n=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function Qp(r){var t;let e=new Set;for(let s of r.values())(t=s.browse)!=null&&t.authority_or_region&&e.add(s.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function ls(r){return r*621371e-9}function on(r){let e=[];for(let l of r.values())e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function Zp(r,e,l){let t,{source:s}=e,{schemes:n}=e,{schemesGj:o}=e,{filterSchemeText:f}=e,{filterInterventionText:i}=e,a=!1,u=new Set,c={interventions:0,totalLength:0},d=Object.keys(kn).map(U=>[U,U]),g="",y=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0])),C="";function S(U,Ie,De,V,ut){let Me=U.toLowerCase(),ct=Ie.toLowerCase(),Xt=ve=>{var xe,rt,Bt,Yt;if(Me&&!((xe=ve.properties.name)!=null&&xe.toLowerCase().includes(Me))&&!((rt=ve.properties.description)!=null&&rt.toLowerCase().includes(Me)))return!1;let ze=n.get(ve.properties.scheme_reference);return!(De&&((Bt=ze.browse)==null?void 0:Bt.authority_or_region)!=De||s=="ATF"&&!V[ze.browse.funding_programme]||ut&&((Yt=ze.browse)==null?void 0:Yt.current_milestone)!=ut||ct&&!ze.scheme_reference.toLowerCase().includes(ct)&&!(ze.scheme_name??"").toLowerCase().includes(ct))};l(8,u=new Set(o.features.filter(Xt).map(ve=>ve.properties.scheme_reference))),l(9,c={interventions:0,totalLength:0});let Et=ve=>{var ze,xe;return!(!u.has(ve.properties.scheme_reference)||Me&&!((ze=ve.properties.name)!=null&&ze.toLowerCase().includes(Me))&&!((xe=ve.properties.description)!=null&&xe.toLowerCase().includes(Me)))};for(let ve of o.features)Et(ve)?(delete ve.properties.hide_while_editing,l(9,c.interventions++,c),ve.geometry.type=="LineString"&&ve.properties.length_meters&&l(9,c.totalLength+=ve.properties.length_meters,c)):ve.properties.hide_while_editing=!0;l(13,o),l(9,c)}function j(){l(4,g=""),l(5,y=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0]))),l(6,C=""),l(1,i=""),l(0,f="")}const D=()=>l(7,a=!0);function P(){i=this.value,l(1,i)}const R=()=>l(1,i="");function N(U){f=U,l(0,f)}function O(U){g=U,l(4,g)}function M(U,Ie){r.$$.not_equal(y[Ie],U)&&(y[Ie]=U,l(5,y))}function I(U){C=U,l(6,C)}function A(){i=this.value,l(1,i)}const W=()=>l(1,i="");function K(U){f=U,l(0,f)}function F(U){g=U,l(4,g)}const J=()=>l(7,a=!1);function ee(U){a=U,l(7,a)}return r.$$set=U=>{"source"in U&&l(2,s=U.source),"schemes"in U&&l(3,n=U.schemes),"schemesGj"in U&&l(13,o=U.schemesGj),"filterSchemeText"in U&&l(0,f=U.filterSchemeText),"filterInterventionText"in U&&l(1,i=U.filterInterventionText)},r.$$.update=()=>{r.$$.dirty[0]&8&&l(10,t=Qp(n)),r.$$.dirty[0]&115&&S(i,f,g,y,C)},[f,i,s,n,g,y,C,a,u,c,t,d,j,o,D,P,R,N,O,M,I,A,W,K,F,J,ee]}class Ws extends X{constructor(e){super(),x(this,e,Zp,Vp,Y,{source:2,schemes:3,schemesGj:13,filterSchemeText:0,filterInterventionText:1},null,[-1,-1])}}function ss(r){let e,l,t,s=r[0].status+"",n;return{c(){e=T("p"),l=T("b"),l.textContent="Status",t=v(`
    : `),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(e,n)},p(o,f){f&1&&s!==(s=o[0].status+"")&&q(n,s)},d(o){o&&p(e)}}}function rs(r){let e,l,t,s=r[0].timescale+"",n;return{c(){e=T("p"),l=T("b"),l.textContent="Timescale",t=v(`
    : `),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(e,n)},p(o,f){f&1&&s!==(s=o[0].timescale+"")&&q(n,s)},d(o){o&&p(e)}}}function os(r){let e,l,t,s=r[0].timescale_year+"",n;return{c(){e=T("p"),l=T("b"),l.textContent="Estimated completion year",t=v(`
    : `),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(e,n)},p(o,f){f&1&&s!==(s=o[0].timescale_year+"")&&q(n,s)},d(o){o&&p(e)}}}function is(r){let e,l,t,s=r[0].year_published+"",n;return{c(){e=T("p"),l=T("b"),l.textContent="Scheme most recently published",t=v(`
    : `),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(e,n)},p(o,f){f&1&&s!==(s=o[0].year_published+"")&&q(n,s)},d(o){o&&p(e)}}}function fs(r){let e,l,t,s=r[0].year_consulted+"",n;return{c(){e=T("p"),l=T("b"),l.textContent="Scheme most recently consulted on",t=v(`
    : `),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(e,n)},p(o,f){f&1&&s!==(s=o[0].year_consulted+"")&&q(n,s)},d(o){o&&p(e)}}}function Kp(r){let e,l,t,s,n,o=r[0].status&&ss(r),f=r[0].timescale&&rs(r),i=r[0].timescale_year&&os(r),a=r[0].year_published&&is(r),u=r[0].year_consulted&&fs(r);return{c(){o&&o.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),s=L(),u&&u.c(),n=$e()},m(c,d){o&&o.m(c,d),$(c,e,d),f&&f.m(c,d),$(c,l,d),i&&i.m(c,d),$(c,t,d),a&&a.m(c,d),$(c,s,d),u&&u.m(c,d),$(c,n,d)},p(c,[d]){c[0].status?o?o.p(c,d):(o=ss(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[0].timescale?f?f.p(c,d):(f=rs(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,d):(i=os(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,d):(a=is(c),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,d):(u=fs(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null)},i:Z,o:Z,d(c){c&&(p(e),p(l),p(t),p(s),p(n)),o&&o.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function Xp(r,e,l){let{props:t}=e;return r.$$set=s=>{"props"in s&&l(0,t=s.props)},[t]}class Ys extends X{constructor(e){super(),x(this,e,Xp,Kp,Y,{props:0})}}function as(r){let e,l,t,s=r[0].budget.toLocaleString()+"",n,o;return{c(){e=T("p"),l=T("b"),l.textContent="Cost",t=v(`
    : `),n=v(s),o=v(`
    GBP`)},m(f,i){$(f,e,i),w(e,l),w(e,t),w(e,n),w(e,o)},p(f,i){i&1&&s!==(s=f[0].budget.toLocaleString()+"")&&q(n,s)},d(f){f&&p(e)}}}function us(r){let e;return{c(){e=T("p"),e.textContent="Development is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function cs(r){let e;return{c(){e=T("p"),e.textContent="Construction is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $s(r){let e,l,t,s;return{c(){e=T("p"),l=T("b"),l.textContent="Funding sources",t=v(`
    : `),s=v(r[1])},m(n,o){$(n,e,o),w(e,l),w(e,t),w(e,s)},p(n,o){o&2&&q(s,n[1])},d(n){n&&p(e)}}}function xp(r){let e,l,t,s,n=r[0].budget&&as(r),o=r[0].development_funded&&us(),f=r[0].construction_funded&&cs(),i=r[1]&&$s(r);return{c(){n&&n.c(),e=L(),o&&o.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),s=$e()},m(a,u){n&&n.m(a,u),$(a,e,u),o&&o.m(a,u),$(a,l,u),f&&f.m(a,u),$(a,t,u),i&&i.m(a,u),$(a,s,u)},p(a,[u]){a[0].budget?n?n.p(a,u):(n=as(a),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),a[0].development_funded?o||(o=us(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),a[0].construction_funded?f||(f=cs(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=$s(a),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},i:Z,o:Z,d(a){a&&(p(e),p(l),p(t),p(s)),n&&n.d(a),o&&o.d(a),f&&f.d(a),i&&i.d(a)}}}function em(r){if(!r.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])r.funding_sources[l]&&e.push(l.toUpperCase());return r.funding_sources.other&&e.push(r.funding_sources.other),e.join(", ")}function tm(r,e,l){let t,{props:s}=e;return r.$$set=n=>{"props"in n&&l(0,s=n.props)},r.$$.update=()=>{r.$$.dirty&1&&l(1,t=em(s))},[s,t]}class Js extends X{constructor(e){super(),x(this,e,tm,xp,Y,{props:0})}}function cn(r){const e=r.slice(),l=e[5].pipeline;return e[12]=l,e}function $n(r){const e=r.slice(),l=e[1].pipeline;return e[12]=l,e}function ps(r){let e,l,t,s=Un(r[1].length_meters)+"",n;return{c(){e=T("p"),l=T("b"),l.textContent="Length",t=v(`
        : `),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(e,n)},p(o,f){f&2&&s!==(s=Un(o[1].length_meters)+"")&&q(n,s)},d(o){o&&p(e)}}}function ms(r){let e,l=ft(r[1].description,r[3])+"";return{c(){e=T("p")},m(t,s){$(t,e,s),e.innerHTML=l},p(t,s){s&10&&l!==(l=ft(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&p(e)}}}function _s(r){let e,l,t,s,n,o,f,i=r[12].atf4_type&&gs(r),a=r[12].accuracy&&ds(r),u=r[12].is_alternative&&hs();return s=new Js({props:{props:r[12]}}),o=new Ys({props:{props:r[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),h(s.$$.fragment),n=L(),h(o.$$.fragment)},m(c,d){i&&i.m(c,d),$(c,e,d),a&&a.m(c,d),$(c,l,d),u&&u.m(c,d),$(c,t,d),b(s,c,d),$(c,n,d),b(o,c,d),f=!0},p(c,d){c[12].atf4_type?i?i.p(c,d):(i=gs(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].accuracy?a?a.p(c,d):(a=ds(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].is_alternative?u||(u=hs(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const g={};d&2&&(g.props=c[12]),s.$set(g);const y={};d&2&&(y.props=c[12]),o.$set(y)},i(c){f||(m(s.$$.fragment,c),m(o.$$.fragment,c),f=!0)},o(c){_(s.$$.fragment,c),_(o.$$.fragment,c),f=!1},d(c){c&&(p(e),p(l),p(t),p(n)),i&&i.d(c),a&&a.d(c),u&&u.d(c),k(s,c),k(o,c)}}}function gs(r){let e,l,t,s=r[12].atf4_type+"",n;return{c(){e=T("p"),l=T("b"),l.textContent="ATF4 type",t=v(`
          : `),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(e,n)},p(o,f){f&2&&s!==(s=o[12].atf4_type+"")&&q(n,s)},d(o){o&&p(e)}}}function ds(r){let e,l,t,s=r[12].accuracy+"",n;return{c(){e=T("p"),l=T("b"),l.textContent="Accuracy",t=v(`
          : `),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(e,n)},p(o,f){f&2&&s!==(s=o[12].accuracy+"")&&q(n,s)},d(o){o&&p(e)}}}function hs(r){let e;return{c(){e=T("p"),e.textContent="Represents an alternative route"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function bs(r){var o;let e,l,t,s=((o=r[5].browse)==null?void 0:o.capital_scheme_id)+"",n;return{c(){e=T("p"),l=T("b"),l.textContent="Capital scheme ID",t=v(`
        : `),n=v(s)},m(f,i){$(f,e,i),w(e,l),w(e,t),w(e,n)},p(f,i){var a;i&32&&s!==(s=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&q(n,s)},d(f){f&&p(e)}}}function ks(r){var o;let e,l,t,s=((o=r[5].browse)==null?void 0:o.current_milestone)+"",n;return{c(){e=T("p"),l=T("b"),l.textContent="Current milestone",t=v(`
        : `),n=v(s)},m(f,i){$(f,e,i),w(e,l),w(e,t),w(e,n)},p(f,i){var a;i&32&&s!==(s=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&q(n,s)},d(f){f&&p(e)}}}function ws(r){let e,l,t,s,n,o,f,i=r[12].scheme_type&&vs(r),a=r[12].atf4_lead_type&&ys(r),u=r[12].scheme_description&&Ss(r);return s=new Js({props:{props:r[12]}}),o=new Ys({props:{props:r[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),h(s.$$.fragment),n=L(),h(o.$$.fragment)},m(c,d){i&&i.m(c,d),$(c,e,d),a&&a.m(c,d),$(c,l,d),u&&u.m(c,d),$(c,t,d),b(s,c,d),$(c,n,d),b(o,c,d),f=!0},p(c,d){c[12].scheme_type?i?i.p(c,d):(i=vs(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].atf4_lead_type?a?a.p(c,d):(a=ys(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].scheme_description?u?u.p(c,d):(u=Ss(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const g={};d&32&&(g.props=c[12]),s.$set(g);const y={};d&32&&(y.props=c[12]),o.$set(y)},i(c){f||(m(s.$$.fragment,c),m(o.$$.fragment,c),f=!0)},o(c){_(s.$$.fragment,c),_(o.$$.fragment,c),f=!1},d(c){c&&(p(e),p(l),p(t),p(n)),i&&i.d(c),a&&a.d(c),u&&u.d(c),k(s,c),k(o,c)}}}function vs(r){let e,l,t,s=r[12].scheme_type+"",n;return{c(){e=T("p"),l=T("b"),l.textContent="Scheme type",t=v(`
          : `),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(e,n)},p(o,f){f&32&&s!==(s=o[12].scheme_type+"")&&q(n,s)},d(o){o&&p(e)}}}function ys(r){let e,l,t,s=r[12].atf4_lead_type+"",n;return{c(){e=T("p"),l=T("b"),l.textContent="ATF4 lead type",t=v(`
          : `),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(e,n)},p(o,f){f&32&&s!==(s=o[12].atf4_lead_type+"")&&q(n,s)},d(o){o&&p(e)}}}function Ss(r){let e,l,t,s=r[12].scheme_description+"",n;return{c(){e=T("p"),l=T("b"),l.textContent="Descripton",t=v(`
          : `),n=v(s)},m(o,f){$(o,e,f),w(e,l),w(e,t),w(e,n)},p(o,f){f&32&&s!==(s=o[12].scheme_description+"")&&q(n,s)},d(o){o&&p(e)}}}function nm(r){let e;return{c(){e=v("Zoom to show entire scheme")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function lm(r){let e;return{c(){e=v("Edit a copy of this scheme")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Cs(r){var On,jn,Pn,Rn;let e,l,t,s,n,o,f,i=ft(r[1].name,r[3])+"",a,u=r[1].intervention_type+"",c,d,g,y,C,S,j,D,P,R=r[0].toUpperCase()+"",N,O,M,I,A,W,K,F=ft(r[5].scheme_name??"",r[2])+"",J,ee,U,Ie,De,V=ft(r[1].scheme_reference,r[2])+"",ut,Me,ct,Xt,Et=((On=r[5].browse)==null?void 0:On.authority_or_region)+"",ve,ze,xe,rt,Bt,Yt,xt=((jn=r[5].browse)==null?void 0:jn.funding_programme)+"",fn,Mn,an,un,ot,Nn,it,He,Ne=r[1].length_meters&&ps(r),Oe=r[1].description&&ms(r),Se=r[1].pipeline&&_s($n(r)),je=((Pn=r[5].browse)==null?void 0:Pn.capital_scheme_id)&&bs(r),Pe=((Rn=r[5].browse)==null?void 0:Rn.current_milestone)&&ks(r),Ce=r[5].pipeline&&ws(cn(r));return ot=new lt({props:{$$slots:{default:[nm]},$$scope:{ctx:r}}}),ot.$on("click",r[6]),it=new lt({props:{$$slots:{default:[lm]},$$scope:{ctx:r}}}),it.$on("click",r[7]),{c(){e=T("div"),l=T("h2"),l.textContent="Intervention",t=L(),s=T("p"),n=T("b"),n.textContent="Name",o=v(`
      : `),f=new Pt(!1),a=v(" ("),c=v(u),d=v(")"),g=L(),Ne&&Ne.c(),y=L(),Oe&&Oe.c(),C=L(),Se&&Se.c(),S=L(),j=T("hr"),D=L(),P=T("h2"),N=v(R),O=v(" Scheme"),M=L(),I=T("p"),A=T("b"),A.textContent="Scheme name",W=v(`
      : `),K=new Pt(!1),J=L(),ee=T("p"),U=T("b"),U.textContent="Scheme reference",Ie=v(`
      : `),De=new Pt(!1),ut=L(),Me=T("p"),ct=T("b"),ct.textContent="Authority or region",Xt=v(`
      : `),ve=v(Et),ze=L(),je&&je.c(),xe=L(),rt=T("p"),Bt=T("b"),Bt.textContent="Funding programme",Yt=v(`
      : `),fn=v(xt),Mn=L(),Pe&&Pe.c(),an=L(),Ce&&Ce.c(),un=L(),h(ot.$$.fragment),Nn=L(),h(it.$$.fragment),f.a=a,K.a=null,De.a=null,_e(e,"max-width","30vw"),_e(e,"max-height","60vh"),_e(e,"overflow","auto")},m(fe,we){$(fe,e,we),w(e,l),w(e,t),w(e,s),w(s,n),w(s,o),f.m(i,s),w(s,a),w(s,c),w(s,d),w(e,g),Ne&&Ne.m(e,null),w(e,y),Oe&&Oe.m(e,null),w(e,C),Se&&Se.m(e,null),w(e,S),w(e,j),w(e,D),w(e,P),w(P,N),w(P,O),w(e,M),w(e,I),w(I,A),w(I,W),K.m(F,I),w(e,J),w(e,ee),w(ee,U),w(ee,Ie),De.m(V,ee),w(e,ut),w(e,Me),w(Me,ct),w(Me,Xt),w(Me,ve),w(e,ze),je&&je.m(e,null),w(e,xe),w(e,rt),w(rt,Bt),w(rt,Yt),w(rt,fn),w(e,Mn),Pe&&Pe.m(e,null),w(e,an),Ce&&Ce.m(e,null),w(e,un),b(ot,e,null),w(e,Nn),b(it,e,null),r[10](e),He=!0},p(fe,we){var Fn,qn,Gn,zn;(!He||we&10)&&i!==(i=ft(fe[1].name,fe[3])+"")&&f.p(i),(!He||we&2)&&u!==(u=fe[1].intervention_type+"")&&q(c,u),fe[1].length_meters?Ne?Ne.p(fe,we):(Ne=ps(fe),Ne.c(),Ne.m(e,y)):Ne&&(Ne.d(1),Ne=null),fe[1].description?Oe?Oe.p(fe,we):(Oe=ms(fe),Oe.c(),Oe.m(e,C)):Oe&&(Oe.d(1),Oe=null),fe[1].pipeline?Se?(Se.p($n(fe),we),we&2&&m(Se,1)):(Se=_s($n(fe)),Se.c(),m(Se,1),Se.m(e,S)):Se&&(ue(),_(Se,1,1,()=>{Se=null}),ce()),(!He||we&1)&&R!==(R=fe[0].toUpperCase()+"")&&q(N,R),(!He||we&36)&&F!==(F=ft(fe[5].scheme_name??"",fe[2])+"")&&K.p(F),(!He||we&6)&&V!==(V=ft(fe[1].scheme_reference,fe[2])+"")&&De.p(V),(!He||we&32)&&Et!==(Et=((Fn=fe[5].browse)==null?void 0:Fn.authority_or_region)+"")&&q(ve,Et),(qn=fe[5].browse)!=null&&qn.capital_scheme_id?je?je.p(fe,we):(je=bs(fe),je.c(),je.m(e,xe)):je&&(je.d(1),je=null),(!He||we&32)&&xt!==(xt=((Gn=fe[5].browse)==null?void 0:Gn.funding_programme)+"")&&q(fn,xt),(zn=fe[5].browse)!=null&&zn.current_milestone?Pe?Pe.p(fe,we):(Pe=ks(fe),Pe.c(),Pe.m(e,an)):Pe&&(Pe.d(1),Pe=null),fe[5].pipeline?Ce?(Ce.p(cn(fe),we),we&32&&m(Ce,1)):(Ce=ws(cn(fe)),Ce.c(),m(Ce,1),Ce.m(e,un)):Ce&&(ue(),_(Ce,1,1,()=>{Ce=null}),ce());const Dn={};we&8192&&(Dn.$$scope={dirty:we,ctx:fe}),ot.$set(Dn);const An={};we&8192&&(An.$$scope={dirty:we,ctx:fe}),it.$set(An)},i(fe){He||(m(Se),m(Ce),m(ot.$$.fragment,fe),m(it.$$.fragment,fe),He=!0)},o(fe){_(Se),_(Ce),_(ot.$$.fragment,fe),_(it.$$.fragment,fe),He=!1},d(fe){fe&&p(e),Ne&&Ne.d(),Oe&&Oe.d(),Se&&Se.d(),je&&je.d(),Pe&&Pe.d(),Ce&&Ce.d(),k(ot),k(it),r[10](null)}}}function sm(r){let e=r[1],l,t,s=Cs(r);return{c(){s.c(),l=$e()},m(n,o){s.m(n,o),$(n,l,o),t=!0},p(n,[o]){o&2&&Y(e,e=n[1])?(ue(),_(s,1,1,Z),ce(),s=Cs(n),s.c(),m(s,1),s.m(l.parentNode,l)):s.p(n,o)},i(n){t||(m(s),t=!0)},o(n){_(s),t=!1},d(n){n&&p(l),s.d(n)}}}function ft(r,e){return e?r.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):r}function rm(r,e,l){let t,s;Q(r,Sn,C=>l(11,s=C));let{source:n}=e,{props:o}=e,{schemes:f}=e,{schemesGj:i}=e,{filterSchemeText:a}=e,{filterInterventionText:u}=e,c;tr(()=>{c&&l(4,c.scrollTop=0,c)});function d(){let C={type:"FeatureCollection",features:i.features.filter(S=>S.properties.scheme_reference==t.scheme_reference)};s==null||s.fitBounds(pr(C),{padding:20,animate:!1})}function g(){var D,P;let C={type:"FeatureCollection",features:i.features.filter(R=>R.properties.scheme_reference==t.scheme_reference),schemes:{}};C.schemes[t.scheme_reference]=t;let S=((D=t.browse)==null?void 0:D.authority_or_region)||"unknown authority",j=t.pipeline?"pipeline":"v1";j=="pipeline"&&(S+="_pipeline"),nr(S,JSON.stringify(C)),window.open(`scheme.html?authority=${(P=t.browse)==null?void 0:P.authority_or_region}&schema=${j}`,"_blank")}function y(C){H[C?"unshift":"push"](()=>{c=C,l(4,c)})}return r.$$set=C=>{"source"in C&&l(0,n=C.source),"props"in C&&l(1,o=C.props),"schemes"in C&&l(8,f=C.schemes),"schemesGj"in C&&l(9,i=C.schemesGj),"filterSchemeText"in C&&l(2,a=C.filterSchemeText),"filterInterventionText"in C&&l(3,u=C.filterInterventionText)},r.$$.update=()=>{r.$$.dirty&258&&l(5,t=f.get(o.scheme_reference))},[n,o,a,u,c,t,d,g,f,i,y]}class In extends X{constructor(e){super(),x(this,e,rm,sm,Y,{source:0,props:1,schemes:8,schemesGj:9,filterSchemeText:2,filterInterventionText:3})}}function om(r){let e,l=r[10].name+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&1024&&l!==(l=s[10].name+"")&&q(t,l)},d(s){s&&p(e)}}}function im(r){let e,l;return e=new In({props:{source:r[0],props:r[10],schemesGj:r[3],schemes:r[2],filterSchemeText:r[4],filterInterventionText:r[5]}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&1&&(n.source=t[0]),s&1024&&(n.props=t[10]),s&8&&(n.schemesGj=t[3]),s&4&&(n.schemes=t[2]),s&16&&(n.filterSchemeText=t[4]),s&32&&(n.filterInterventionText=t[5]),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function fm(r){let e,l,t,s;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[om,({props:n})=>({10:n}),({props:n})=>n?1024:0]},$$scope:{ctx:r}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[im,({props:n})=>({10:n}),({props:n})=>n?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,o){const f={};o&3072&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&3133&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}function am(r){let e,l=r[10].name+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&1024&&l!==(l=s[10].name+"")&&q(t,l)},d(s){s&&p(e)}}}function um(r){let e,l;return e=new In({props:{source:r[0],props:r[10],schemesGj:r[3],schemes:r[2],filterSchemeText:r[4],filterInterventionText:r[5]}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&1&&(n.source=t[0]),s&1024&&(n.props=t[10]),s&8&&(n.schemesGj=t[3]),s&4&&(n.schemes=t[2]),s&16&&(n.filterSchemeText=t[4]),s&32&&(n.filterInterventionText=t[5]),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function cm(r){let e,l,t,s;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[am,({props:n})=>({10:n}),({props:n})=>n?1024:0]},$$scope:{ctx:r}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[um,({props:n})=>({10:n}),({props:n})=>n?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,o){const f={};o&3072&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&3133&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}function $m(r){let e,l=r[10].name+"",t;return{c(){e=T("p"),t=v(l)},m(s,n){$(s,e,n),w(e,t)},p(s,n){n&1024&&l!==(l=s[10].name+"")&&q(t,l)},d(s){s&&p(e)}}}function pm(r){let e,l;return e=new In({props:{source:r[0],props:r[10],schemesGj:r[3],schemes:r[2],filterSchemeText:r[4],filterInterventionText:r[5]}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&1&&(n.source=t[0]),s&1024&&(n.props=t[10]),s&8&&(n.schemesGj=t[3]),s&4&&(n.schemes=t[2]),s&16&&(n.filterSchemeText=t[4]),s&32&&(n.filterInterventionText=t[5]),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function mm(r){let e,l,t,s;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[$m,({props:n})=>({10:n}),({props:n})=>n?1024:0]},$$scope:{ctx:r}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[pm,({props:n})=>({10:n}),({props:n})=>n?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},p(n,o){const f={};o&3072&&(f.$$scope={dirty:o,ctx:n}),e.$set(f);const i={};o&3133&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}function _m(r){let e,l,t,s,n,o,f,i,a,u;const c=[G(`${r[0]}-interventions-points`),{filter:["all",Wn,r[8],r[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[6],"circle-radius":Yn,"circle-opacity":se(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let d={$$slots:{default:[fm]},$$scope:{ctx:r}};for(let N=0;N<c.length;N+=1)d=re(d,c[N]);e=new Gt({props:d});const g=[G(`${r[0]}-interventions-lines`),{filter:["all",Jn,r[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[6],"line-width":Jt,"line-opacity":se(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[cm]},$$scope:{ctx:r}};for(let N=0;N<g.length;N+=1)y=re(y,g[N]);t=new be({props:y});const C=[G(`${r[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Jt,"circle-opacity":0,"circle-stroke-color":Qe.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[1]?"visible":"none"}}];let S={};for(let N=0;N<C.length;N+=1)S=re(S,C[N]);n=new Gt({props:S});const j=[G(`${r[0]}-interventions-polygons`),{filter:["all",en,r[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[6],"fill-opacity":se(.2,.5)}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[mm]},$$scope:{ctx:r}};for(let N=0;N<j.length;N+=1)D=re(D,j[N]);f=new Fe({props:D});const P=[G(`${r[0]}-interventions-polygons-outlines`),{filter:["all",en,r[8]]},{paint:{"line-color":r[6],"line-opacity":.5,"line-width":.7*Jt}},{layout:{visibility:r[1]?"visible":"none"}}];let R={};for(let N=0;N<P.length;N+=1)R=re(R,P[N]);return a=new be({props:R}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),s=L(),h(n.$$.fragment),o=L(),h(f.$$.fragment),i=L(),h(a.$$.fragment)},m(N,O){b(e,N,O),$(N,l,O),b(t,N,O),$(N,s,O),b(n,N,O),$(N,o,O),b(f,N,O),$(N,i,O),b(a,N,O),u=!0},p(N,O){const M=O&835?oe(c,[O&1&&ie(G(`${N[0]}-interventions-points`)),O&768&&{filter:["all",Wn,N[8],N[9]]},c[2],c[3],O&64&&{paint:{"circle-color":N[6],"circle-radius":Yn,"circle-opacity":se(1,.5)}},O&2&&{layout:{visibility:N[1]?"visible":"none"}},c[6]]):{};O&2109&&(M.$$scope={dirty:O,ctx:N}),e.$set(M);const I=O&323?oe(g,[O&1&&ie(G(`${N[0]}-interventions-lines`)),O&256&&{filter:["all",Jn,N[8]]},g[2],g[3],O&64&&{paint:{"line-color":N[6],"line-width":Jt,"line-opacity":se(1,.5)}},O&2&&{layout:{visibility:N[1]?"visible":"none"}},g[6]]):{};O&2109&&(I.$$scope={dirty:O,ctx:N}),t.$set(I);const A=O&3?oe(C,[O&1&&ie(G(`${N[0]}-interventions-lines-endpoints`)),C[1],C[2],O&2&&{layout:{visibility:N[1]?"visible":"none"}}]):{};n.$set(A);const W=O&323?oe(j,[O&1&&ie(G(`${N[0]}-interventions-polygons`)),O&256&&{filter:["all",en,N[8]]},j[2],j[3],O&64&&{paint:{"fill-color":N[6],"fill-opacity":se(.2,.5)}},O&2&&{layout:{visibility:N[1]?"visible":"none"}},j[6]]):{};O&2109&&(W.$$scope={dirty:O,ctx:N}),f.$set(W);const K=O&323?oe(P,[O&1&&ie(G(`${N[0]}-interventions-polygons-outlines`)),O&256&&{filter:["all",en,N[8]]},O&64&&{paint:{"line-color":N[6],"line-opacity":.5,"line-width":.7*Jt}},O&2&&{layout:{visibility:N[1]?"visible":"none"}}]):{};a.$set(K)},i(N){u||(m(e.$$.fragment,N),m(t.$$.fragment,N),m(n.$$.fragment,N),m(f.$$.fragment,N),m(a.$$.fragment,N),u=!0)},o(N){_(e.$$.fragment,N),_(t.$$.fragment,N),_(n.$$.fragment,N),_(f.$$.fragment,N),_(a.$$.fragment,N),u=!1},d(N){N&&(p(l),p(s),p(o),p(i)),k(e,N),k(t,N),k(n,N),k(f,N),k(a,N)}}}function gm(r){let e,l;return e=new zt({props:{data:r[7],$$slots:{default:[_m]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,[s]){const n={};s&128&&(n.data=t[7]),s&2175&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function dm(r,e,l){let t,{source:s}=e,{show:n}=e,{schemes:o}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],d=["!=",["get","endpoint"],!0];return r.$$set=g=>{"source"in g&&l(0,s=g.source),"show"in g&&l(1,n=g.show),"schemes"in g&&l(2,o=g.schemes),"schemesGj"in g&&l(3,f=g.schemesGj),"filterSchemeText"in g&&l(4,i=g.filterSchemeText),"filterInterventionText"in g&&l(5,a=g.filterInterventionText),"color"in g&&l(6,u=g.color)},r.$$.update=()=>{r.$$.dirty&8&&l(7,t=mr(f))},[s,n,o,f,i,a,u,t,c,d]}class Ts extends X{constructor(e){super(),x(this,e,dm,gm,Y,{source:0,show:1,schemes:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function hm(r){return Ke(["get","intervention_type"],{area:Qe.area,route:Qe.route,crossing:Qe.crossing,other:Qe.other},"white")}function bm(r){return[["Areas",Qe.area],["Routes",Qe.route],["Crossings",Qe.crossing],["Other",Qe.other]]}function Ls(r,e,l){const t=r.slice();return t[31]=e[l],t}function Is(r,e,l){const t=r.slice();return t[31]=e[l],t}function km(r){let e,l;return e=new jp({props:{loadFile:r[17]}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p:Z,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ms(r){let e,l,t,s,n,o,f,i,a,u,c,d,g,y;function C(I){r[18](I)}let S={$$slots:{right:[ym],default:[wm]},$$scope:{ctx:r}};r[3]!==void 0&&(S.checked=r[3]),e=new le({props:S}),H.push(()=>E(e,"checked",C));function j(I){r[19](I)}function D(I){r[20](I)}function P(I){r[21](I)}function R(I){r[22](I)}let N={source:"ATF"};r[10]!==void 0&&(N.schemesGj=r[10]),r[9]!==void 0&&(N.schemes=r[9]),r[11]!==void 0&&(N.filterSchemeText=r[11]),r[12]!==void 0&&(N.filterInterventionText=r[12]),s=new Ws({props:N}),H.push(()=>E(s,"schemesGj",j)),H.push(()=>E(s,"schemes",D)),H.push(()=>E(s,"filterSchemeText",P)),H.push(()=>E(s,"filterInterventionText",R));function O(I){r[23](I)}let M={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(M.value=r[0]),u=new qt({props:M}),H.push(()=>E(u,"value",O)),g=new Kt({props:{rows:r[7]}}),{c(){h(e.$$.fragment),t=L(),h(s.$$.fragment),a=L(),h(u.$$.fragment),d=L(),h(g.$$.fragment)},m(I,A){b(e,I,A),$(I,t,A),b(s,I,A),$(I,a,A),b(u,I,A),$(I,d,A),b(g,I,A),y=!0},p(I,A){const W={};A[0]&1024|A[1]&32&&(W.$$scope={dirty:A,ctx:I}),!l&&A[0]&8&&(l=!0,W.checked=I[3],B(()=>l=!1)),e.$set(W);const K={};!n&&A[0]&1024&&(n=!0,K.schemesGj=I[10],B(()=>n=!1)),!o&&A[0]&512&&(o=!0,K.schemes=I[9],B(()=>o=!1)),!f&&A[0]&2048&&(f=!0,K.filterSchemeText=I[11],B(()=>f=!1)),!i&&A[0]&4096&&(i=!0,K.filterInterventionText=I[12],B(()=>i=!1)),s.$set(K);const F={};!c&&A[0]&1&&(c=!0,F.value=I[0],B(()=>c=!1)),u.$set(F);const J={};A[0]&128&&(J.rows=I[7]),g.$set(J)},i(I){y||(m(e.$$.fragment,I),m(s.$$.fragment,I),m(u.$$.fragment,I),m(g.$$.fragment,I),y=!0)},o(I){_(e.$$.fragment,I),_(s.$$.fragment,I),_(u.$$.fragment,I),_(g.$$.fragment,I),y=!1},d(I){I&&(p(t),p(a),p(d)),k(e,I),k(s,I),k(u,I),k(g,I)}}}function wm(r){let e;return{c(){e=v("ATF schemes")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ns(r){let e,l,t=r[31]+"",s;return{c(){e=T("li"),l=T("p"),s=v(t)},m(n,o){$(n,e,o),w(e,l),w(l,s)},p(n,o){o[0]&1024&&t!==(t=n[31]+"")&&q(s,t)},d(n){n&&p(e)}}}function vm(r){let e,l,t,s,n,o;l=new Bs({props:{text:"Scheme data caveats"}});let f=ye(r[10].notes??[]),i=[];for(let a=0;a<f.length;a+=1)i[a]=Ns(Is(r,f,a));return{c(){e=T("p"),h(l.$$.fragment),t=v(`Please note there are data
            quality caveats for all scheme data:`),s=L(),n=T("ul");for(let a=0;a<i.length;a+=1)i[a].c()},m(a,u){$(a,e,u),b(l,e,null),w(e,t),$(a,s,u),$(a,n,u);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(n,null);o=!0},p(a,u){if(u[0]&1024){f=ye(a[10].notes??[]);let c;for(c=0;c<f.length;c+=1){const d=Is(a,f,c);i[c]?i[c].p(d,u):(i[c]=Ns(d),i[c].c(),i[c].m(n,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=f.length}},i(a){o||(m(l.$$.fragment,a),o=!0)},o(a){_(l.$$.fragment,a),o=!1},d(a){a&&(p(e),p(s),p(n)),k(l),Ze(i,a)}}}function ym(r){let e,l,t;return l=new pe({props:{$$slots:{default:[vm]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n[0]&1024|n[1]&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Os(r){let e,l,t,s,n,o,f,i,a,u,c,d,g,y;function C(I){r[24](I)}let S={$$slots:{right:[Tm],default:[Sm]},$$scope:{ctx:r}};r[4]!==void 0&&(S.checked=r[4]),e=new le({props:S}),H.push(()=>E(e,"checked",C));function j(I){r[25](I)}function D(I){r[26](I)}function P(I){r[27](I)}function R(I){r[28](I)}let N={source:"LCWIP"};r[14]!==void 0&&(N.schemesGj=r[14]),r[13]!==void 0&&(N.schemes=r[13]),r[15]!==void 0&&(N.filterSchemeText=r[15]),r[16]!==void 0&&(N.filterInterventionText=r[16]),s=new Ws({props:N}),H.push(()=>E(s,"schemesGj",j)),H.push(()=>E(s,"schemes",D)),H.push(()=>E(s,"filterSchemeText",P)),H.push(()=>E(s,"filterInterventionText",R));function O(I){r[29](I)}let M={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return r[1]!==void 0&&(M.value=r[1]),u=new qt({props:M}),H.push(()=>E(u,"value",O)),g=new Kt({props:{rows:r[5]}}),{c(){h(e.$$.fragment),t=L(),h(s.$$.fragment),a=L(),h(u.$$.fragment),d=L(),h(g.$$.fragment)},m(I,A){b(e,I,A),$(I,t,A),b(s,I,A),$(I,a,A),b(u,I,A),$(I,d,A),b(g,I,A),y=!0},p(I,A){const W={};A[0]&16384|A[1]&32&&(W.$$scope={dirty:A,ctx:I}),!l&&A[0]&16&&(l=!0,W.checked=I[4],B(()=>l=!1)),e.$set(W);const K={};!n&&A[0]&16384&&(n=!0,K.schemesGj=I[14],B(()=>n=!1)),!o&&A[0]&8192&&(o=!0,K.schemes=I[13],B(()=>o=!1)),!f&&A[0]&32768&&(f=!0,K.filterSchemeText=I[15],B(()=>f=!1)),!i&&A[0]&65536&&(i=!0,K.filterInterventionText=I[16],B(()=>i=!1)),s.$set(K);const F={};!c&&A[0]&2&&(c=!0,F.value=I[1],B(()=>c=!1)),u.$set(F);const J={};A[0]&32&&(J.rows=I[5]),g.$set(J)},i(I){y||(m(e.$$.fragment,I),m(s.$$.fragment,I),m(u.$$.fragment,I),m(g.$$.fragment,I),y=!0)},o(I){_(e.$$.fragment,I),_(s.$$.fragment,I),_(u.$$.fragment,I),_(g.$$.fragment,I),y=!1},d(I){I&&(p(t),p(a),p(d)),k(e,I),k(s,I),k(u,I),k(g,I)}}}function Sm(r){let e;return{c(){e=v("LCWIP schemes")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function js(r){let e,l,t=r[31]+"",s;return{c(){e=T("li"),l=T("p"),s=v(t)},m(n,o){$(n,e,o),w(e,l),w(l,s)},p(n,o){o[0]&16384&&t!==(t=n[31]+"")&&q(s,t)},d(n){n&&p(e)}}}function Cm(r){let e,l,t,s,n,o;l=new Bs({props:{text:"Scheme data caveats"}});let f=ye(r[14].notes??[]),i=[];for(let a=0;a<f.length;a+=1)i[a]=js(Ls(r,f,a));return{c(){e=T("p"),h(l.$$.fragment),t=v(`Please note there are data
            quality caveats for all scheme data:`),s=L(),n=T("ul");for(let a=0;a<i.length;a+=1)i[a].c()},m(a,u){$(a,e,u),b(l,e,null),w(e,t),$(a,s,u),$(a,n,u);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(n,null);o=!0},p(a,u){if(u[0]&16384){f=ye(a[14].notes??[]);let c;for(c=0;c<f.length;c+=1){const d=Ls(a,f,c);i[c]?i[c].p(d,u):(i[c]=js(d),i[c].c(),i[c].m(n,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=f.length}},i(a){o||(m(l.$$.fragment,a),o=!0)},o(a){_(l.$$.fragment,a),o=!1},d(a){a&&(p(e),p(s),p(n)),k(l),Ze(i,a)}}}function Tm(r){let e,l,t;return l=new pe({props:{$$slots:{default:[Cm]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(l.$$.fragment),z(e,"slot","right")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n[0]&16384|n[1]&32&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function Lm(r){let e=Cn()=="Private (development)",l,t,s,n,o,f,i,a=e&&km(r),u=r[9].size>0&&Ms(r),c=r[13].size>0&&Os(r);return n=new lr({props:{label:"Load schemes from GeoJSON",onLoad:r[17]}}),f=new sr({props:{errorMessage:r[2]}}),{c(){a&&a.c(),l=L(),u&&u.c(),t=L(),c&&c.c(),s=L(),h(n.$$.fragment),o=L(),h(f.$$.fragment)},m(d,g){a&&a.m(d,g),$(d,l,g),u&&u.m(d,g),$(d,t,g),c&&c.m(d,g),$(d,s,g),b(n,d,g),$(d,o,g),b(f,d,g),i=!0},p(d,g){e&&a.p(d,g),d[9].size>0?u?(u.p(d,g),g[0]&512&&m(u,1)):(u=Ms(d),u.c(),m(u,1),u.m(t.parentNode,t)):u&&(ue(),_(u,1,1,()=>{u=null}),ce()),d[13].size>0?c?(c.p(d,g),g[0]&8192&&m(c,1)):(c=Os(d),c.c(),m(c,1),c.m(s.parentNode,s)):c&&(ue(),_(c,1,1,()=>{c=null}),ce());const y={};g[0]&4&&(y.errorMessage=d[2]),f.$set(y)},i(d){i||(m(a),m(u),m(c),m(n.$$.fragment,d),m(f.$$.fragment,d),i=!0)},o(d){_(a),_(u),_(c),_(n.$$.fragment,d),_(f.$$.fragment,d),i=!1},d(d){d&&(p(l),p(t),p(s),p(o)),a&&a.d(d),u&&u.d(d),c&&c.d(d),k(n,d),k(f,d)}}}function Im(r){let e,l,t,s,n,o;return e=new et({props:{label:"Schemes",open:!0,$$slots:{default:[Lm]},$$scope:{ctx:r}}}),t=new Ts({props:{source:"atf",show:r[3],schemesGj:r[10],schemes:r[9],filterSchemeText:r[11],filterInterventionText:r[12],color:r[8]}}),n=new Ts({props:{source:"lcwip",show:r[4],schemesGj:r[14],schemes:r[13],filterSchemeText:r[15],filterInterventionText:r[16],color:r[6]}}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),s=L(),h(n.$$.fragment)},m(f,i){b(e,f,i),$(f,l,i),b(t,f,i),$(f,s,i),b(n,f,i),o=!0},p(f,i){const a={};i[0]&130751|i[1]&32&&(a.$$scope={dirty:i,ctx:f}),e.$set(a);const u={};i[0]&8&&(u.show=f[3]),i[0]&1024&&(u.schemesGj=f[10]),i[0]&512&&(u.schemes=f[9]),i[0]&2048&&(u.filterSchemeText=f[11]),i[0]&4096&&(u.filterInterventionText=f[12]),i[0]&256&&(u.color=f[8]),t.$set(u);const c={};i[0]&16&&(c.show=f[4]),i[0]&16384&&(c.schemesGj=f[14]),i[0]&8192&&(c.schemes=f[13]),i[0]&32768&&(c.filterSchemeText=f[15]),i[0]&65536&&(c.filterInterventionText=f[16]),i[0]&64&&(c.color=f[6]),n.$set(c)},i(f){o||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(n.$$.fragment,f),o=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(n.$$.fragment,f),o=!1},d(f){f&&(p(l),p(s)),k(e,f),k(t,f),k(n,f)}}}function Mm(r,e,l){let t,s,n,o,f,i,a,u,c,d,g,y;Q(r,dn,V=>l(9,f=V)),Q(r,rn,V=>l(10,i=V)),Q(r,Xl,V=>l(11,a=V)),Q(r,Kl,V=>l(12,u=V)),Q(r,bn,V=>l(13,c=V)),Q(r,hn,V=>l(14,d=V)),Q(r,es,V=>l(15,g=V)),Q(r,xl,V=>l(16,y=V));let C="",S=!0,j=!0,D="fundingProgramme",P="interventionType";function R(V,ut){try{Pp(JSON.parse(ut)),l(2,C="")}catch(Me){l(2,C=`The file you loaded is broken: ${Me}`)}}function N(V){return V=="interventionType"?[hm(),bm()]:V=="fundingProgramme"?[Ke(["get","funding_programme"],Wt,"grey"),Object.entries(Wt)]:V=="currentMilestone"?[Ke(["get","current_milestone"],kn,"grey"),Object.entries(kn)]:["red",[]]}function O(V){S=V,l(3,S)}function M(V){i=V,rn.set(i)}function I(V){f=V,dn.set(f)}function A(V){a=V,Xl.set(a)}function W(V){u=V,Kl.set(u)}function K(V){D=V,l(0,D)}function F(V){j=V,l(4,j)}function J(V){d=V,hn.set(d)}function ee(V){c=V,bn.set(c)}function U(V){g=V,es.set(g)}function Ie(V){y=V,xl.set(y)}function De(V){P=V,l(1,P)}return r.$$.update=()=>{r.$$.dirty[0]&1&&l(8,[t,s]=N(D),t,(l(7,s),l(0,D))),r.$$.dirty[0]&2&&l(6,[n,o]=N(P),n,(l(5,o),l(1,P)))},[D,P,C,S,j,o,n,s,t,f,i,a,u,c,d,g,y,R,O,M,I,A,W,K,F,J,ee,U,Ie,De]}class Nm extends X{constructor(e){super(),x(this,e,Mm,Im,Y,{},null,[-1,-1])}}const Ps=Re(!0);let wn=Re(null);function Om(r){let e,l,t,s,n,o,f,i;return e=new Kc({}),t=new a$({}),n=new D$({}),f=new v$({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),s=L(),h(n.$$.fragment),o=L(),h(f.$$.fragment)},m(a,u){b(e,a,u),$(a,l,u),b(t,a,u),$(a,s,u),b(n,a,u),$(a,o,u),b(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(p(l),p(s),p(o)),k(e,a),k(t,a),k(n,a),k(f,a)}}}function jm(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[Om]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&256&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Pm(r){let e,l,t,s,n,o,f,i,a,u,c,d;return e=new xf({}),t=new ja({}),n=new ua({}),f=new wa({}),a=new Dc({}),c=new $c({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),s=L(),h(n.$$.fragment),o=L(),h(f.$$.fragment),i=L(),h(a.$$.fragment),u=L(),h(c.$$.fragment)},m(g,y){b(e,g,y),$(g,l,y),b(t,g,y),$(g,s,y),b(n,g,y),$(g,o,y),b(f,g,y),$(g,i,y),b(a,g,y),$(g,u,y),b(c,g,y),d=!0},i(g){d||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(n.$$.fragment,g),m(f.$$.fragment,g),m(a.$$.fragment,g),m(c.$$.fragment,g),d=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(n.$$.fragment,g),_(f.$$.fragment,g),_(a.$$.fragment,g),_(c.$$.fragment,g),d=!1},d(g){g&&(p(l),p(s),p(o),p(i),p(u)),k(e,g),k(t,g),k(n,g),k(f,g),k(a,g),k(c,g)}}}function Rm(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[Pm]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&256&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Dm(r){let e,l,t,s,n,o;return e=new qf({}),t=new Bu({}),n=new ec({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),s=L(),h(n.$$.fragment)},m(f,i){b(e,f,i),$(f,l,i),b(t,f,i),$(f,s,i),b(n,f,i),o=!0},i(f){o||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(n.$$.fragment,f),o=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(n.$$.fragment,f),o=!1},d(f){f&&(p(l),p(s)),k(e,f),k(t,f),k(n,f)}}}function Am(r){let e,l,t,s,n,o,f,i,a,u;return e=new Ei({}),t=new yf({}),n=new Wo({}),f=new _i({}),a=new Ni({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),s=L(),h(n.$$.fragment),o=L(),h(f.$$.fragment),i=L(),h(a.$$.fragment)},m(c,d){b(e,c,d),$(c,l,d),b(t,c,d),$(c,s,d),b(n,c,d),$(c,o,d),b(f,c,d),$(c,i,d),b(a,c,d),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(n.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(n.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(p(l),p(s),p(o),p(i)),k(e,c),k(t,c),k(n,c),k(f,c),k(a,c)}}}function Fm(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[Am]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&256&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function qm(r){let e,l,t,s;return e=new Po({}),t=new li({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment)},m(n,o){b(e,n,o),$(n,l,o),b(t,n,o),s=!0},i(n){s||(m(e.$$.fragment,n),m(t.$$.fragment,n),s=!0)},o(n){_(e.$$.fragment,n),_(t.$$.fragment,n),s=!1},d(n){n&&p(l),k(e,n),k(t,n)}}}function Gm(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[qm]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&256&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function zm(r){let e,l,t,s,n,o,f,i;return e=new Ru({}),t=new Ya({}),n=new yu({}),f=new Sp({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),s=L(),h(n.$$.fragment),o=L(),h(f.$$.fragment)},m(a,u){b(e,a,u),$(a,l,u),b(t,a,u),$(a,s,u),b(n,a,u),$(a,o,u),b(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(p(l),p(s),p(o)),k(e,a),k(t,a),k(n,a),k(f,a)}}}function Hm(r){let e,l,t,s,n,o,f,i,a=Cn()=="Private (development)",u,c,d,g,y;e=new pp({}),t=new ep({}),n=new au({}),f=new yc({});let C=a&&zm();return c=new xi({}),g=new cf({}),{c(){h(e.$$.fragment),l=L(),h(t.$$.fragment),s=L(),h(n.$$.fragment),o=L(),h(f.$$.fragment),i=L(),C&&C.c(),u=L(),h(c.$$.fragment),d=L(),h(g.$$.fragment)},m(S,j){b(e,S,j),$(S,l,j),b(t,S,j),$(S,s,j),b(n,S,j),$(S,o,j),b(f,S,j),$(S,i,j),C&&C.m(S,j),$(S,u,j),b(c,S,j),$(S,d,j),b(g,S,j),y=!0},p:Z,i(S){y||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(n.$$.fragment,S),m(f.$$.fragment,S),m(C),m(c.$$.fragment,S),m(g.$$.fragment,S),y=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(n.$$.fragment,S),_(f.$$.fragment,S),_(C),_(c.$$.fragment,S),_(g.$$.fragment,S),y=!1},d(S){S&&(p(l),p(s),p(o),p(i),p(u),p(d)),k(e,S),k(t,S),k(n,S),k(f,S),C&&C.d(S),k(c,S),k(g,S)}}}function Em(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[Hm]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},p(t,s){const n={};s&256&&(n.$$scope={dirty:s,ctx:t}),e.$set(n)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Bm(r){let e,l,t,s,n;function o(i){r[6](i)}let f={cfg:r[5],map:r[3]};return r[0]!==void 0&&(f.enabled=r[0]),e=new gr({props:f}),H.push(()=>E(e,"enabled",o)),s=new Kr({}),{c(){h(e.$$.fragment),t=L(),h(s.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(s,i,a),n=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],B(()=>l=!1)),e.$set(u)},i(i){n||(m(e.$$.fragment,i),m(s.$$.fragment,i),n=!0)},o(i){_(e.$$.fragment,i),_(s.$$.fragment,i),n=!1},d(i){i&&p(t),k(e,i),k(s,i)}}}function Um(r){let e,l;const t=[G("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let s={};for(let n=0;n<t.length;n+=1)s=re(s,t[n]);return e=new Fe({props:s}),{c(){h(e.$$.fragment)},m(n,o){b(e,n,o),l=!0},p(n,o){const f=o&2?oe(t,[t[0],t[1],{layout:{visibility:n[1]?"none":"visible"}}]):{};e.$set(f)},i(n){l||(m(e.$$.fragment,n),l=!0)},o(n){_(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function Wm(r){let e,l,t,s,n,o,f,i,a,u,c,d,g,y,C,S,j,D,P,R,N;return l=new Nm({}),s=new et({props:{label:"Trip generators",$$slots:{default:[jm]},$$scope:{ctx:r}}}),o=new et({props:{label:"Existing infrastructure",$$slots:{default:[Rm]},$$scope:{ctx:r}}}),i=new et({props:{label:"Public transport",$$slots:{default:[Dm]},$$scope:{ctx:r}}}),u=new et({props:{label:"Boundaries",$$slots:{default:[Fm]},$$scope:{ctx:r}}}),d=new et({props:{label:"Census",$$slots:{default:[Gm]},$$scope:{ctx:r}}}),y=new et({props:{label:"Other",$$slots:{default:[Em]},$$scope:{ctx:r}}}),S=new et({props:{label:"Tools",$$slots:{default:[Bm]},$$scope:{ctx:r}}}),D=new _r({props:{disabled:!r[1]}}),R=new zt({props:{data:r[4],$$slots:{default:[Um]},$$scope:{ctx:r}}}),{c(){e=T("div"),h(l.$$.fragment),t=L(),h(s.$$.fragment),n=L(),h(o.$$.fragment),f=L(),h(i.$$.fragment),a=L(),h(u.$$.fragment),c=L(),h(d.$$.fragment),g=L(),h(y.$$.fragment),C=L(),h(S.$$.fragment),j=L(),h(D.$$.fragment),P=L(),h(R.$$.fragment)},m(O,M){$(O,e,M),b(l,e,null),w(e,t),b(s,e,null),w(e,n),b(o,e,null),w(e,f),b(i,e,null),w(e,a),b(u,e,null),w(e,c),b(d,e,null),w(e,g),b(y,e,null),w(e,C),b(S,e,null),w(e,j),b(D,e,null),r[7](e),$(O,P,M),b(R,O,M),N=!0},p(O,[M]){const I={};M&256&&(I.$$scope={dirty:M,ctx:O}),s.$set(I);const A={};M&256&&(A.$$scope={dirty:M,ctx:O}),o.$set(A);const W={};M&256&&(W.$$scope={dirty:M,ctx:O}),i.$set(W);const K={};M&256&&(K.$$scope={dirty:M,ctx:O}),u.$set(K);const F={};M&256&&(F.$$scope={dirty:M,ctx:O}),d.$set(F);const J={};M&256&&(J.$$scope={dirty:M,ctx:O}),y.$set(J);const ee={};M&265&&(ee.$$scope={dirty:M,ctx:O}),S.$set(ee);const U={};M&2&&(U.disabled=!O[1]),D.$set(U);const Ie={};M&258&&(Ie.$$scope={dirty:M,ctx:O}),R.$set(Ie)},i(O){N||(m(l.$$.fragment,O),m(s.$$.fragment,O),m(o.$$.fragment,O),m(i.$$.fragment,O),m(u.$$.fragment,O),m(d.$$.fragment,O),m(y.$$.fragment,O),m(S.$$.fragment,O),m(D.$$.fragment,O),m(R.$$.fragment,O),N=!0)},o(O){_(l.$$.fragment,O),_(s.$$.fragment,O),_(o.$$.fragment,O),_(i.$$.fragment,O),_(u.$$.fragment,O),_(d.$$.fragment,O),_(y.$$.fragment,O),_(S.$$.fragment,O),_(D.$$.fragment,O),_(R.$$.fragment,O),N=!1},d(O){O&&(p(e),p(P)),k(l),k(s),k(o),k(i),k(u),k(d),k(y),k(S),k(D),r[7](null),k(R,O)}}}function Ym(r,e,l){let t,s,n,o;Q(r,Ps,c=>l(1,s=c)),Q(r,wn,c=>l(2,n=c)),Q(r,Sn,c=>l(3,o=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>dr(c,rr(_n))};function a(c){t=c,l(0,t),l(1,s)}function u(c){H[c?"unshift":"push"](()=>{n=c,wn.set(n)})}return r.$$.update=()=>{r.$$.dirty&2&&l(0,t=!s),r.$$.dirty&1&&Ps.set(!t)},[t,s,n,o,f,i,a,u]}class Jm extends X{constructor(e){super(),x(this,e,Ym,Wm,Y,{})}}function Vm(r){let e,l,t;return{c(){e=T("p"),e.textContent="Active layers",l=L(),t=T("div")},m(s,n){$(s,e,n),$(s,l,n),$(s,t,n),r[3](t)},p:Z,i:Z,o:Z,d(s){s&&(p(e),p(l),p(t)),r[3](null)}}}function Qm(r,e,l){if(r){r.innerHTML="";for(let t of e){let s=l.get(t);s&&(s.style.display="block",r.appendChild(s))}}}function Zm(r,e,l){let t,s;Q(r,gn,f=>l(1,t=f)),Q(r,Ln,f=>l(2,s=f));let n=null;function o(f){H[f?"unshift":"push"](()=>{n=f,l(0,n)})}return r.$$.update=()=>{r.$$.dirty&7&&Qm(n,s,t)},[n,t,s,o]}class Km extends X{constructor(e){super(),x(this,e,Zm,Vm,Y,{})}}function Xm(r){let e,l,t,s,n,o,f,i,a,u,c,d,g,y,C,S,j;return l=new hr({}),s=new or({}),f=new ir({}),y=new br({props:{boundaryGeojson:r[3]}}),{c(){e=T("div"),h(l.$$.fragment),t=L(),h(s.$$.fragment),n=L(),o=T("div"),h(f.$$.fragment),i=L(),a=T("p"),a.textContent=`App version: ${Cn()}`,u=L(),c=T("div"),d=T("h1"),d.textContent="Scheme Browser",g=L(),h(y.$$.fragment),C=L(),S=T("div"),_e(o,"border-bottom","1px solid #b1b4b6"),_e(c,"display","flex"),_e(c,"justify-content","space-between"),z(e,"slot","sidebar"),z(e,"class","govuk-prose")},m(D,P){$(D,e,P),b(l,e,null),w(e,t),b(s,e,null),w(e,n),w(e,o),b(f,o,null),w(o,i),w(o,a),w(e,u),w(e,c),w(c,d),w(c,g),b(y,c,null),w(e,C),w(e,S),r[6](S),j=!0},p(D,P){const R={};P&8&&(R.boundaryGeojson=D[3]),y.$set(R)},i(D){j||(m(l.$$.fragment,D),m(s.$$.fragment,D),m(f.$$.fragment,D),m(y.$$.fragment,D),j=!0)},o(D){_(l.$$.fragment,D),_(s.$$.fragment,D),_(f.$$.fragment,D),_(y.$$.fragment,D),j=!1},d(D){D&&p(e),k(l),k(s),k(f),k(y),r[6](null)}}}function Rs(r){let e,l;return e=new Jm({}),{c(){h(e.$$.fragment)},m(t,s){b(e,t,s),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function xm(r){let e,l,t,s;e=new kr({});let n=r[2]&&Rs();return{c(){h(e.$$.fragment),l=L(),n&&n.c(),t=$e()},m(o,f){b(e,o,f),$(o,l,f),n&&n.m(o,f),$(o,t,f),s=!0},p(o,f){o[2]?n?f&4&&m(n,1):(n=Rs(),n.c(),m(n,1),n.m(t.parentNode,t)):n&&(ue(),_(n,1,1,()=>{n=null}),ce())},i(o){s||(m(e.$$.fragment,o),m(n),s=!0)},o(o){_(e.$$.fragment,o),_(n),s=!1},d(o){o&&(p(l),p(t)),k(e,o),n&&n.d(o)}}}function e_(r){let e,l,t;return l=new fr({props:{style:r[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[xm]},$$scope:{ctx:r}}}),{c(){e=T("div"),h(l.$$.fragment),z(e,"slot","main")},m(s,n){$(s,e,n),b(l,e,null),t=!0},p(s,n){const o={};n&2&&(o.style=s[1]),n&260&&(o.$$scope={dirty:n,ctx:s}),l.$set(o)},i(s){t||(m(l.$$.fragment,s),t=!0)},o(s){_(l.$$.fragment,s),t=!1},d(s){s&&p(e),k(l)}}}function t_(r){let e,l,t,s,n;return e=new Or({props:{$$slots:{main:[e_],sidebar:[Xm]},$$scope:{ctx:r}}}),s=new Km({}),{c(){h(e.$$.fragment),l=L(),t=T("div"),h(s.$$.fragment),z(t,"class","top-right svelte-u44ed2")},m(o,f){b(e,o,f),$(o,l,f),$(o,t,f),b(s,t,null),n=!0},p(o,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:o}),e.$set(i)},i(o){n||(m(e.$$.fragment,o),m(s.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),_(s.$$.fragment,o),n=!1},d(o){o&&(p(l),p(t)),k(e,o),k(s)}}}function n_(r,e,l){let t,s,n,o,f;Q(r,wn,c=>l(4,t=c)),Q(r,Sn,c=>l(5,s=c)),Q(r,_n,c=>l(1,n=c)),Q(r,Vn,c=>l(2,o=c)),Q(r,rn,c=>l(3,f=c)),Es(()=>{ar()});const i=new URLSearchParams(window.location.search);_n.set(i.get("style")||"dataviz");let a;function u(c){H[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return r.$$.update=()=>{r.$$.dirty&32&&s&&Vn.set(s),r.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,n,o,f,t,s,u]}class l_ extends X{constructor(e){super(),x(this,e,n_,t_,Y,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new l_({target:document.getElementById("app")});
