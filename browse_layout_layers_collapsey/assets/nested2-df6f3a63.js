import{S as K,i as X,s as J,e as S,b as F,m as pe,c as d,n as Q,d as h,aU as kr,g as H,h as E,a as L,j as b,p as w,_ as it,u as B,t as _,q as g,v,Q as Ze,T as Ke,U as Xe,V as xe,b5 as Hn,o as $,am as we,z as de,r as he,av as et,y,P as q,aa as ve,ab as kn,ac as yr,w as Y,ad as yn,ae as Sr,af as Ut,ag as Cr,ah as Tr,b6 as Fr,W as Bt,b7 as En,b8 as qr,G as qt,aP as pn,a0 as ne,N as me,f as tt,aR as Gr,b4 as le,a9 as Oe,b9 as ue,K as te,J as Re,a2 as re,at as se,R as Sn,b1 as Qt,aT as tn,Z as Ve,$ as Lr,ba as Kt,bb as Dt,bc as zr,bd as Hr,x as Mr,be as Er,D as Br,X as mn,b3 as Cn,bf as Ur,I as Wr,k as Tn,F as Yr,E as Jr,aV as Vr,aW as _n,A as Qr,L as Zr,M as Kr,B as Xr}from"./index-f80ac5b3.js";import{e as Bn,s as G,u as Qe,t as xr,q as Je,M as es,a as We,C as Ye,v as _e,R as ts,k as At,h as nt,f as Ft,b as ns,p as Un,g as ls,d as Wn,w as Yn,c as Jn,x as Jt,i as en,W as Ir,B as rs,S as ss,n as os,H as is,Z as as,G as fs,m as Vn}from"./ZoomOutMap-28648246.js";import{P as ae,A as Nr}from"./Popup-e0b9a9a7.js";function us(s){let e;return{c(){e=S("span"),F(e,"class","svelte-kzgqtg"),pe(e,"background",s[0])},m(l,t){d(l,e,t)},p(l,[t]){t&1&&pe(e,"background",l[0])},i:Q,o:Q,d(l){l&&h(e)}}}function cs(s,e,l){let{color:t}=e;return s.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Se extends K{constructor(e){super(),X(this,e,cs,us,J,{color:0})}}const $s="/atip/browse_layout_layers_collapsey/assets/help-d011708a.svg";function ps(s){let e,l;const t=s[1].default,n=Ze(t,s,s[4],null);return{c(){e=S("div"),n&&n.c(),F(e,"class","govuk-prose")},m(r,i){d(r,e,i),n&&n.m(e,null),l=!0},p(r,i){n&&n.p&&(!l||i&16)&&Ke(n,t,r,r[4],l?xe(t,r[4],i,null):Xe(r[4]),null)},i(r){l||(_(n,r),l=!0)},o(r){g(n,r),l=!1},d(r){r&&h(e),n&&n.d(r)}}}function ms(s){let e,l,t,n,r,i,f;function o(u){s[3](u)}let a={title:"Help",$$slots:{default:[ps]},$$scope:{ctx:s}};return s[0]!==void 0&&(a.open=s[0]),t=new kr({props:a}),H.push(()=>E(t,"open",o)),{c(){e=S("button"),e.innerHTML=`<img src="${$s}" title="Help" alt="Help"/>`,l=L(),b(t.$$.fragment),F(e,"class","svelte-7d9d1l")},m(u,c){d(u,e,c),d(u,l,c),w(t,u,c),r=!0,i||(f=it(e,"click",s[2]),i=!0)},p(u,[c]){const p={};c&16&&(p.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,p.open=u[0],B(()=>n=!1)),t.$set(p)},i(u){r||(_(t.$$.fragment,u),r=!0)},o(u){g(t.$$.fragment,u),r=!1},d(u){u&&(h(e),h(l)),v(t,u),i=!1,f()}}}function _s(s,e,l){let{$$slots:t={},$$scope:n}=e,r=!1;const i=()=>l(0,r=!0);function f(o){r=o,l(0,r)}return s.$$set=o=>{"$$scope"in o&&l(4,n=o.$$scope)},[r,t,i,f,n]}class gs extends K{constructor(e){super(),X(this,e,_s,ms,J,{})}}const ds=s=>({}),Qn=s=>({}),hs=s=>({}),Zn=s=>({});function bs(s){let e,l,t,n,r,i,f,o,a,u,c;const p=s[4].sidebar,m=Ze(p,s,s[3],Zn),k=s[4].main,C=Ze(k,s,s[3],Qn);return{c(){e=S("div"),l=S("aside"),t=S("div"),m&&m.c(),n=L(),r=S("button"),r.textContent="→",f=L(),o=S("main"),C&&C.c(),F(t,"class","sidebar-content content-container svelte-1n0etgd"),F(r,"type","button"),F(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),F(l,"class",i=Hn(s[1]?"":"collapsed")+" svelte-1n0etgd"),pe(l,"--sidebarWidth",s[0]),F(o,"class","svelte-1n0etgd"),F(e,"class","overall-layout svelte-1n0etgd")},m(T,O){d(T,e,O),$(e,l),$(l,t),m&&m.m(t,null),$(l,n),$(l,r),$(e,f),$(e,o),C&&C.m(o,null),a=!0,u||(c=it(r,"click",s[2]),u=!0)},p(T,[O]){m&&m.p&&(!a||O&8)&&Ke(m,p,T,T[3],a?xe(p,T[3],O,hs):Xe(T[3]),Zn),(!a||O&2&&i!==(i=Hn(T[1]?"":"collapsed")+" svelte-1n0etgd"))&&F(l,"class",i),(!a||O&1)&&pe(l,"--sidebarWidth",T[0]),C&&C.p&&(!a||O&8)&&Ke(C,k,T,T[3],a?xe(k,T[3],O,ds):Xe(T[3]),Qn)},i(T){a||(_(m,T),_(C,T),a=!0)},o(T){g(m,T),g(C,T),a=!1},d(T){T&&h(e),m&&m.d(T),C&&C.d(T),u=!1,c()}}}function ws(s,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,i=!0;function f(){l(1,i=!i)}return s.$$set=o=>{"sidebarWidth"in o&&l(0,r=o.sidebarWidth),"$$scope"in o&&l(3,n=o.$$scope)},[r,i,f,n,t]}class vs extends K{constructor(e){super(),X(this,e,ws,bs,J,{sidebarWidth:0})}}function Kn(s,e,l){const t=s.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Xn(s){let e,l,t,n=s[1]+"",r,i,f;return l=new Se({props:{color:s[2]}}),{c(){e=S("li"),b(l.$$.fragment),t=L(),r=y(n),i=L()},m(o,a){d(o,e,a),w(l,e,null),$(e,t),$(e,r),$(e,i),f=!0},p(o,a){const u={};a&1&&(u.color=o[2]),l.$set(u),(!f||a&1)&&n!==(n=o[1]+"")&&q(r,n)},i(o){f||(_(l.$$.fragment,o),f=!0)},o(o){g(l.$$.fragment,o),f=!1},d(o){o&&h(e),v(l)}}}function ks(s){let e,l,t=we(s[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=Xn(Kn(s,t,i));const r=i=>g(n[i],1,1,()=>{n[i]=null});return{c(){e=S("ul");for(let i=0;i<n.length;i+=1)n[i].c()},m(i,f){d(i,e,f);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);l=!0},p(i,[f]){if(f&1){t=we(i[0]);let o;for(o=0;o<t.length;o+=1){const a=Kn(i,t,o);n[o]?(n[o].p(a,f),_(n[o],1)):(n[o]=Xn(a),n[o].c(),_(n[o],1),n[o].m(e,null))}for(de(),o=t.length;o<n.length;o+=1)r(o);he()}},i(i){if(!l){for(let f=0;f<t.length;f+=1)_(n[f]);l=!0}},o(i){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(i){i&&h(e),et(n,i)}}}function ys(s,e,l){let{rows:t}=e;return s.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Xt extends K{constructor(e){super(),X(this,e,ys,ks,J,{rows:0})}}function xn(s){let e=s[0],l,t,n=el(s);return{c(){n.c(),l=ve()},m(r,i){n.m(r,i),d(r,l,i),t=!0},p(r,i){i&1&&J(e,e=r[0])?(de(),g(n,1,1,Q),he(),n=el(r),n.c(),_(n,1),n.m(l.parentNode,l)):n.p(r,i)},i(r){t||(_(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function el(s){let e;const l=s[16].default,t=Ze(l,s,s[15],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&32768)&&Ke(t,l,n,n[15],e?xe(l,n[15],r,null):Xe(n[15]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Ss(s){let e,l,t=s[0]&&xn(s);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&_(t,1)):(t=xn(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(de(),g(t,1,1,()=>{t=null}),he())},i(n){l||(_(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Cs(s,e,l){let t,n,{$$slots:r={},$$scope:i}=e,{id:f=kn("raster-source")}=e,{tiles:o}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:p=null}=e,{minzoom:m=null}=e,{maxzoom:k=null}=e,{volatile:C=null}=e;const{map:T,self:O}=yr();Y(s,T,M=>l(14,n=M)),Y(s,O,M=>l(0,t=M));let D,P=!0;return yn(()=>{t&&D&&n&&(Sr(T,t,D),Ut(O,t=null,t),l(12,D=void 0))}),s.$$set=M=>{"id"in M&&l(3,f=M.id),"tiles"in M&&l(4,o=M.tiles),"tileSize"in M&&l(5,a=M.tileSize),"bounds"in M&&l(6,u=M.bounds),"scheme"in M&&l(7,c=M.scheme),"attribution"in M&&l(8,p=M.attribution),"minzoom"in M&&l(9,m=M.minzoom),"maxzoom"in M&&l(10,k=M.maxzoom),"volatile"in M&&l(11,C=M.volatile),"$$scope"in M&&l(15,i=M.$$scope)},s.$$.update=()=>{s.$$.dirty&24569&&n&&t!==f&&(Ut(O,t=f,t),Cr(n,t,Tr({type:"raster",tiles:o,tileSize:a,bounds:u,scheme:c,attribution:p,minzoom:m,maxzoom:k,volatile:C}),M=>n&&M===t,()=>{t&&(l(12,D=n==null?void 0:n.getSource(t)),l(13,P=!0))})),s.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,D=n==null?void 0:n.getSource(f))})),s.$$.dirty&12304&&D&&(P?l(13,P=!1):D.setTiles(o))},[t,T,O,f,o,a,u,c,p,m,k,C,D,P,n,i,r]}class Ts extends K{constructor(e){super(),X(this,e,Cs,Ss,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function Ls(s){let e;const l=s[16].default,t=Ze(l,s,s[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&Ke(t,l,n,n[24],e?xe(l,n[24],r,null):Xe(n[24]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Ms(s){let e,l,t;function n(i){s[17](i)}let r={id:s[1],type:"symbol",source:s[2],sourceLayer:s[3],beforeId:s[4],beforeLayerType:s[5],paint:s[6],layout:s[7],filter:s[8],applyToClusters:s[9],minzoom:s[10],maxzoom:s[11],hoverCursor:s[12],manageHoverState:s[13],eventsIfTopMost:s[14],interactive:s[15],$$slots:{default:[Ls]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.hovered=s[0]),e=new Fr({props:r}),H.push(()=>E(e,"hovered",n)),e.$on("click",s[18]),e.$on("dblclick",s[19]),e.$on("contextmenu",s[20]),e.$on("mouseenter",s[21]),e.$on("mousemove",s[22]),e.$on("mouseleave",s[23]),{c(){b(e.$$.fragment)},m(i,f){w(e,i,f),t=!0},p(i,[f]){const o={};f&2&&(o.id=i[1]),f&4&&(o.source=i[2]),f&8&&(o.sourceLayer=i[3]),f&16&&(o.beforeId=i[4]),f&32&&(o.beforeLayerType=i[5]),f&64&&(o.paint=i[6]),f&128&&(o.layout=i[7]),f&256&&(o.filter=i[8]),f&512&&(o.applyToClusters=i[9]),f&1024&&(o.minzoom=i[10]),f&2048&&(o.maxzoom=i[11]),f&4096&&(o.hoverCursor=i[12]),f&8192&&(o.manageHoverState=i[13]),f&16384&&(o.eventsIfTopMost=i[14]),f&32768&&(o.interactive=i[15]),f&16777216&&(o.$$scope={dirty:f,ctx:i}),!l&&f&1&&(l=!0,o.hovered=i[0],B(()=>l=!1)),e.$set(o)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Is(s,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=kn("symbol")}=e,{source:i=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:o=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:O=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:M=!0}=e;function N(A){D=A,l(0,D)}function I(A){Bt.call(this,s,A)}function R(A){Bt.call(this,s,A)}function j(A){Bt.call(this,s,A)}function z(A){Bt.call(this,s,A)}function Z(A){Bt.call(this,s,A)}function ie(A){Bt.call(this,s,A)}return s.$$set=A=>{"id"in A&&l(1,r=A.id),"source"in A&&l(2,i=A.source),"sourceLayer"in A&&l(3,f=A.sourceLayer),"beforeId"in A&&l(4,o=A.beforeId),"beforeLayerType"in A&&l(5,a=A.beforeLayerType),"paint"in A&&l(6,u=A.paint),"layout"in A&&l(7,c=A.layout),"filter"in A&&l(8,p=A.filter),"applyToClusters"in A&&l(9,m=A.applyToClusters),"minzoom"in A&&l(10,k=A.minzoom),"maxzoom"in A&&l(11,C=A.maxzoom),"hoverCursor"in A&&l(12,T=A.hoverCursor),"manageHoverState"in A&&l(13,O=A.manageHoverState),"hovered"in A&&l(0,D=A.hovered),"eventsIfTopMost"in A&&l(14,P=A.eventsIfTopMost),"interactive"in A&&l(15,M=A.interactive),"$$scope"in A&&l(24,n=A.$$scope)},[D,r,i,f,o,a,u,c,p,m,k,C,T,O,P,M,t,N,I,R,j,z,Z,ie,n]}class Ln extends K{constructor(e){super(),X(this,e,Is,Ms,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function tl(s){let e=s[0],l,t,n=nl(s);return{c(){n.c(),l=ve()},m(r,i){n.m(r,i),d(r,l,i),t=!0},p(r,i){i&1&&J(e,e=r[0])?(de(),g(n,1,1,Q),he(),n=nl(r),n.c(),_(n,1),n.m(l.parentNode,l)):n.p(r,i)},i(r){t||(_(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function nl(s){let e;const l=s[15].default,t=Ze(l,s,s[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&Ke(t,l,n,n[14],e?xe(l,n[14],r,null):Xe(n[14]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Ns(s){let e,l,t=s[0]&&tl(s);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&_(t,1)):(t=tl(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(de(),g(t,1,1,()=>{t=null}),he())},i(n){l||(_(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Os(s,e,l){let t,n,{$$slots:r={},$$scope:i}=e,{id:f=kn("vector")}=e,{url:o=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:p=null}=e,{attribution:m=null}=e,{minzoom:k=null}=e,{maxzoom:C=null}=e,{volatile:T=null}=e;if(o&&o.includes("pmtiles://")&&!En.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let M=new qr;En.addProtocol("pmtiles",M.tile)}const{map:O,self:D}=yr();Y(s,O,M=>l(13,n=M)),Y(s,D,M=>l(0,t=M));let P;return yn(()=>{t&&n&&(Sr(O,t,P),Ut(D,t=null,t),P=void 0)}),s.$$set=M=>{"id"in M&&l(3,f=M.id),"url"in M&&l(4,o=M.url),"tiles"in M&&l(5,a=M.tiles),"promoteId"in M&&l(6,u=M.promoteId),"bounds"in M&&l(7,c=M.bounds),"scheme"in M&&l(8,p=M.scheme),"attribution"in M&&l(9,m=M.attribution),"minzoom"in M&&l(10,k=M.minzoom),"maxzoom"in M&&l(11,C=M.maxzoom),"volatile"in M&&l(12,T=M.volatile),"$$scope"in M&&l(14,i=M.$$scope)},s.$$.update=()=>{s.$$.dirty&16377&&n&&t!==f&&(Ut(D,t=f,t),Cr(n,t,Tr({type:"vector",url:o,tiles:a,promoteId:u,bounds:c,scheme:p,attribution:m,minzoom:k,maxzoom:C,volatile:T}),M=>n&&M===t,()=>{t&&(P=n==null?void 0:n.getSource(t))})),s.$$.dirty&8200&&(n==null||n.on("style.load",()=>{P=n==null?void 0:n.getSource(f)}))},[t,O,D,f,o,a,u,c,p,m,k,C,T,n,i,r]}class ce extends K{constructor(e){super(),X(this,e,Os,Ns,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function ll(s,e,l){const t=s.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Ps(s){let e,l,t;return l=new tt({props:{$$slots:{default:[Rs]},$$scope:{ctx:s}}}),l.$on("click",s[9]),{c(){e=S("div"),b(l.$$.fragment)},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const i={};r&16384&&(i.$$scope={dirty:r,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function js(s){let e,l,t,n,r,i,f,o,a,u;l=new tt({props:{$$slots:{default:[Ds]},$$scope:{ctx:s}}}),l.$on("click",s[4]);let c=s[2]&&rl(s);r=new Je({props:{label:"Help",$$slots:{default:[As]},$$scope:{ctx:s}}}),f=new Gr({}),f.$on("click",s[3]);let p=we(s[0]),m=[];for(let C=0;C<p.length;C+=1)m[C]=sl(ll(s,p,C));const k=C=>g(m[C],1,1,()=>{m[C]=null});return{c(){e=S("div"),b(l.$$.fragment),t=L(),c&&c.c(),n=L(),b(r.$$.fragment),i=L(),b(f.$$.fragment),o=L();for(let C=0;C<m.length;C+=1)m[C].c();a=ve()},m(C,T){d(C,e,T),w(l,e,null),d(C,t,T),c&&c.m(C,T),d(C,n,T),w(r,C,T),d(C,i,T),w(f,C,T),d(C,o,T);for(let O=0;O<m.length;O+=1)m[O]&&m[O].m(C,T);d(C,a,T),u=!0},p(C,T){const O={};T&16384&&(O.$$scope={dirty:T,ctx:C}),l.$set(O),C[2]?c?c.p(C,T):(c=rl(C),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const D={};if(T&16384&&(D.$$scope={dirty:T,ctx:C}),r.$set(D),T&65){p=we(C[0]);let P;for(P=0;P<p.length;P+=1){const M=ll(C,p,P);m[P]?(m[P].p(M,T),_(m[P],1)):(m[P]=sl(M),m[P].c(),_(m[P],1),m[P].m(a.parentNode,a))}for(de(),P=p.length;P<m.length;P+=1)k(P);he()}},i(C){if(!u){_(l.$$.fragment,C),_(r.$$.fragment,C),_(f.$$.fragment,C);for(let T=0;T<p.length;T+=1)_(m[T]);u=!0}},o(C){g(l.$$.fragment,C),g(r.$$.fragment,C),g(f.$$.fragment,C),m=m.filter(Boolean);for(let T=0;T<m.length;T+=1)g(m[T]);u=!1},d(C){C&&(h(e),h(t),h(n),h(i),h(o),h(a)),v(l),c&&c.d(C),v(r,C),v(f,C),et(m,C)}}}function Rs(s){let e;return{c(){e=y("Measure lines")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ds(s){let e;return{c(){e=y("Stop measuring")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rl(s){let e,l,t=s[2].toFixed(2)+"",n,r;return{c(){e=S("p"),l=y("Length: "),n=y(t),r=y(" meters")},m(i,f){d(i,e,f),$(e,l),$(e,n),$(e,r)},p(i,f){f&4&&t!==(t=i[2].toFixed(2)+"")&&q(n,t)},d(i){i&&h(e)}}}function As(s){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function Fs(s){let e,l;return{c(){e=S("span"),l=L(),F(e,"class","dot svelte-1tzt432")},m(t,n){d(t,e,n),d(t,l,n)},p:Q,d(t){t&&(h(e),h(l))}}}function sl(s){let e,l,t;function n(f){s[7](f,s[11],s[12],s[13])}function r(){return s[8](s[13])}let i={draggable:!0,$$slots:{default:[Fs]},$$scope:{ctx:s}};return s[11]!==void 0&&(i.lngLat=s[11]),e=new es({props:i}),H.push(()=>E(e,"lngLat",n)),e.$on("click",r),{c(){b(e.$$.fragment)},m(f,o){w(e,f,o),t=!0},p(f,o){s=f;const a={};o&16384&&(a.$$scope={dirty:o,ctx:s}),!l&&o&1&&(l=!0,a.lngLat=s[11],B(()=>l=!1)),e.$set(a)},i(f){t||(_(e.$$.fragment,f),t=!0)},o(f){g(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function qs(s){let e,l;const t=[G("measurement-line"),{paint:{"line-color":Qe.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f={};e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Gs(s){let e,l,t,n,r,i,f;const o=[js,Ps],a=[];function u(c,p){return c[1]?0:1}return e=u(s),l=a[e]=o[e](s),n=new qt({props:{data:s[0].length<2?Bn():pn(s[0]),$$slots:{default:[qs]},$$scope:{ctx:s}}}),{c(){l.c(),t=L(),b(n.$$.fragment)},m(c,p){a[e].m(c,p),d(c,t,p),w(n,c,p),r=!0,i||(f=it(window,"keydown",s[5]),i=!0)},p(c,[p]){let m=e;e=u(c),e===m?a[e].p(c,p):(de(),g(a[m],1,1,()=>{a[m]=null}),he(),l=a[e],l?l.p(c,p):(l=a[e]=o[e](c),l.c()),_(l,1),l.m(t.parentNode,t));const k={};p&1&&(k.data=c[0].length<2?Bn():pn(c[0])),p&16384&&(k.$$scope={dirty:p,ctx:c}),n.$set(k)},i(c){r||(_(l),_(n.$$.fragment,c),r=!0)},o(c){g(l),g(n.$$.fragment,c),r=!1},d(c){c&&h(t),a[e].d(c),v(n,c),i=!1,f()}}}function zs(s,e,l){let t,n=!1,r=[];function i(k){return k.length<2?null:1e3*xr(pn(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function o(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),o())}function u(k){r.splice(k,1),l(0,r)}function c(k,C,T,O){T[O]=k,l(0,r)}const p=k=>u(k),m=()=>l(1,n=!0);return s.$$.update=()=>{s.$$.dirty&1&&l(2,t=i(r))},[r,n,t,f,o,a,u,c,p,m]}class Hs extends K{constructor(e){super(),X(this,e,zs,Gs,J,{})}}const x={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},je=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Es(s){let e;return{c(){e=y(`Open Government License
  `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bs(s){let e,l,t,n,r;return t=new le({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Es]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("License: "),b(t.$$.fragment),n=y(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,f){d(i,e,f),$(e,l),w(t,e,null),$(e,n),r=!0},p(i,[f]){const o={};f&1&&(o.$$scope={dirty:f,ctx:i}),t.$set(o)},i(i){r||(_(t.$$.fragment,i),r=!0)},o(i){g(t.$$.fragment,i),r=!1},d(i){i&&h(e),v(t)}}}class Ce extends K{constructor(e){super(),X(this,e,null,Bs,J,{})}}function ol(s,e,l){const t=s.slice();return t[2]=e[l],t}function il(s,e,l){const t=s.slice();return t[5]=e[l],t}function al(s){let e,l;return{c(){e=S("span"),l=y(` 
    `),pe(e,"background",s[5]),pe(e,"width","100%"),pe(e,"border","1px solid black")},m(t,n){d(t,e,n),$(e,l)},p(t,n){n&1&&pe(e,"background",t[5])},d(t){t&&h(e)}}}function fl(s){let e,l=s[2]+"",t;return{c(){e=S("span"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&q(t,l)},d(n){n&&h(e)}}}function Us(s){let e,l,t,n=we(s[0]),r=[];for(let o=0;o<n.length;o+=1)r[o]=al(il(s,n,o));let i=we(s[1]),f=[];for(let o=0;o<i.length;o+=1)f[o]=fl(ol(s,i,o));return{c(){e=S("div");for(let o=0;o<r.length;o+=1)r[o].c();l=L(),t=S("div");for(let o=0;o<f.length;o+=1)f[o].c();pe(e,"display","flex"),pe(t,"display","flex"),pe(t,"justify-content","space-between")},m(o,a){d(o,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);d(o,l,a),d(o,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(o,[a]){if(a&1){n=we(o[0]);let u;for(u=0;u<n.length;u+=1){const c=il(o,n,u);r[u]?r[u].p(c,a):(r[u]=al(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){i=we(o[1]);let u;for(u=0;u<i.length;u+=1){const c=ol(o,i,u);f[u]?f[u].p(c,a):(f[u]=fl(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=i.length}},i:Q,o:Q,d(o){o&&(h(e),h(l),h(t)),et(r,o),et(f,o)}}}function Ws(s,e,l){let{colorScale:t}=e,{limits:n}=e;return s.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class De extends K{constructor(e){super(),X(this,e,Ws,Us,J,{colorScale:0,limits:1})}}function $e(s){let e=new URLSearchParams(window.location.search).has(s),l=Oe(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(s,"1"):n.searchParams.delete(s),window.history.replaceState(null,"",n.toString())}),l}function Gt(s,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(s);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${s}=${r} failed, using default value: ${f}`)}let i=Oe(n);return i.subscribe(f=>{let o=new URL(window.location.href),a=l(f);a==null?o.searchParams.delete(s):o.searchParams.set(s,a),window.history.replaceState(null,"",o.toString())}),i}let gn=Oe(new Map),Vt=Oe(new Set);const Ys=s=>({}),ul=s=>({}),Js=s=>({}),cl=s=>({}),Vs=s=>({}),$l=s=>({}),Qs=s=>({}),pl=s=>({});function Zs(s){let e;return{c(){e=y(s[2])},m(l,t){d(l,e,t)},p(l,t){t&4&&q(e,l[2])},d(l){l&&h(e)}}}function Ks(s){let e,l,t;const n=s[8].icon,r=Ze(n,s,s[11],pl);return{c(){r&&r.c(),e=L(),l=y(s[2])},m(i,f){r&&r.m(i,f),d(i,e,f),d(i,l,f),t=!0},p(i,f){r&&r.p&&(!t||f&2048)&&Ke(r,n,i,i[11],t?xe(n,i[11],f,Qs):Xe(i[11]),pl),(!t||f&4)&&q(l,i[2])},i(i){t||(_(r,i),t=!0)},o(i){g(r,i),t=!1},d(i){i&&(h(e),h(l)),r&&r.d(i)}}}function Xs(s){let e;const l=s[8].help,t=Ze(l,s,s[11],$l);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&2048)&&Ke(t,l,n,n[11],e?xe(l,n[11],r,Vs):Xe(n[11]),$l)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function xs(s){let e;return{c(){e=y("X")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function eo(s){let e,l,t,n,r,i,f,o,a;function u(p){s[9](p)}let c={$$slots:{default:[Ks]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.checked=s[0]),l=new We({props:c}),H.push(()=>E(l,"checked",u)),i=new gs({props:{$$slots:{default:[Xs]},$$scope:{ctx:s}}}),o=new tt({props:{$$slots:{default:[xs]},$$scope:{ctx:s}}}),o.$on("click",s[7]),{c(){e=S("div"),b(l.$$.fragment),n=L(),r=S("span"),b(i.$$.fragment),f=L(),b(o.$$.fragment),pe(e,"display","flex"),pe(e,"justify-content","space-between")},m(p,m){d(p,e,m),w(l,e,null),$(e,n),$(e,r),w(i,r,null),$(r,f),w(o,r,null),a=!0},p(p,m){const k={};m&2052&&(k.$$scope={dirty:m,ctx:p}),!t&&m&1&&(t=!0,k.checked=p[0],B(()=>t=!1)),l.$set(k);const C={};m&2048&&(C.$$scope={dirty:m,ctx:p}),i.$set(C);const T={};m&2048&&(T.$$scope={dirty:m,ctx:p}),o.$set(T)},i(p){a||(_(l.$$.fragment,p),_(i.$$.fragment,p),_(o.$$.fragment,p),a=!0)},o(p){g(l.$$.fragment,p),g(i.$$.fragment,p),g(o.$$.fragment,p),a=!1},d(p){p&&h(e),v(l),v(i),v(o)}}}function ml(s){let e,l,t,n;const r=[no,to],i=[];function f(o,a){return o[3]?0:1}return e=f(s),l=i[e]=r[e](s),{c(){l.c(),t=ve()},m(o,a){i[e].m(o,a),d(o,t,a),n=!0},p(o,a){let u=e;e=f(o),e===u?i[e].p(o,a):(de(),g(i[u],1,1,()=>{i[u]=null}),he(),l=i[e],l?l.p(o,a):(l=i[e]=r[e](o),l.c()),_(l,1),l.m(t.parentNode,t))},i(o){n||(_(l),n=!0)},o(o){g(l),n=!1},d(o){o&&h(t),i[e].d(o)}}}function to(s){let e;const l=s[8].controls,t=Ze(l,s,s[11],ul);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&2048)&&Ke(t,l,n,n[11],e?xe(l,n[11],r,Ys):Xe(n[11]),ul)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function no(s){let e,l;return e=new Je({props:{label:s[2],open:!0,$$slots:{default:[lo]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&4&&(r.label=t[2]),n&2048&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function lo(s){let e;const l=s[8].controls,t=Ze(l,s,s[11],cl);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&2048)&&Ke(t,l,n,n[11],e?xe(l,n[11],r,Js):Xe(n[11]),cl)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function ro(s){let e,l,t,n,r,i;e=new We({props:{checked:s[5].has(s[1]),$$slots:{default:[Zs]},$$scope:{ctx:s}}}),e.$on("change",s[6]),n=new Ye({props:{small:!0,$$slots:{default:[eo]},$$scope:{ctx:s}}});let f=s[0]&&ml(s);return{c(){b(e.$$.fragment),l=L(),t=S("div"),b(n.$$.fragment),r=L(),f&&f.c()},m(o,a){w(e,o,a),d(o,l,a),d(o,t,a),w(n,t,null),$(t,r),f&&f.m(t,null),s[10](t),i=!0},p(o,[a]){const u={};a&34&&(u.checked=o[5].has(o[1])),a&2052&&(u.$$scope={dirty:a,ctx:o}),e.$set(u);const c={};a&2053&&(c.$$scope={dirty:a,ctx:o}),n.$set(c),o[0]?f?(f.p(o,a),a&1&&_(f,1)):(f=ml(o),f.c(),_(f,1),f.m(t,null)):f&&(de(),g(f,1,1,()=>{f=null}),he())},i(o){i||(_(e.$$.fragment,o),_(n.$$.fragment,o),_(f),i=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),g(f),i=!1},d(o){o&&(h(l),h(t)),v(e,o),v(n),f&&f.d(),s[10](null)}}}function so(s,e,l){let t;Y(s,Vt,C=>l(5,t=C));let{$$slots:n={},$$scope:r}=e,{name:i}=e,{title:f}=e,{show:o}=e,{bigControls:a=!1}=e;o&&(t.add(i),Vt.set(t));let u=null;yn(()=>{gn.update(C=>(C.delete(i),C))});function c(){Vt.update(C=>(C.has(i)?(C.delete(i),l(0,o=!1)):(C.add(i),l(0,o=!0)),C))}function p(){t.delete(i),Vt.set(t),l(0,o=!1)}function m(C){o=C,l(0,o)}function k(C){H[C?"unshift":"push"](()=>{u=C,l(4,u),l(1,i)})}return s.$$set=C=>{"name"in C&&l(1,i=C.name),"title"in C&&l(2,f=C.title),"show"in C&&l(0,o=C.show),"bigControls"in C&&l(3,a=C.bigControls),"$$scope"in C&&l(11,r=C.$$scope)},s.$$.update=()=>{s.$$.dirty&18&&u&&gn.update(C=>(l(4,u.style.display="none",u),C.set(i,u),C))},[o,i,f,a,u,t,c,p,n,m,k,r]}class fe extends K{constructor(e){super(),X(this,e,so,ro,J,{name:1,title:2,show:0,bigControls:3})}}function _l(s){const e=s[7].OA21CD;s[8]=e;const l=s[7][s[0].kind];s[9]=l}function oo(s){let e,l,t,n,r,i,f;return t=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[fo]},$$scope:{ctx:s}}}),r=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[uo]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("Population density data is from the 2021 census, via "),b(t.$$.fragment),n=y(". Output area boundaries from "),b(r.$$.fragment),i=y(".")},m(o,a){d(o,e,a),$(e,l),w(t,e,null),$(e,n),w(r,e,null),$(e,i),f=!0},i(o){f||(_(t.$$.fragment,o),_(r.$$.fragment,o),f=!0)},o(o){g(t.$$.fragment,o),g(r.$$.fragment,o),f=!1},d(o){o&&h(e),v(t),v(r)}}}function io(s){let e,l,t,n,r,i,f,o,a;return r=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[co]},$$scope:{ctx:s}}}),f=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[$o]},$$scope:{ctx:s}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=S("p"),n=y("Car/van availability data is from the 2021 census, via "),b(r.$$.fragment),i=y(". Output area boundaries from "),b(f.$$.fragment),o=y(".")},m(u,c){d(u,e,c),d(u,l,c),d(u,t,c),$(t,n),w(r,t,null),$(t,i),w(f,t,null),$(t,o),a=!0},i(u){a||(_(r.$$.fragment,u),_(f.$$.fragment,u),a=!0)},o(u){g(r.$$.fragment,u),g(f.$$.fragment,u),a=!1},d(u){u&&(h(e),h(l),h(t)),v(r),v(f)}}}function ao(s){let e,l,t,n,r,i,f;return t=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[po]},$$scope:{ctx:s}}}),r=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[mo]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),n=y(". Output area boundaries from "),b(r.$$.fragment),i=y(".")},m(o,a){d(o,e,a),$(e,l),w(t,e,null),$(e,n),w(r,e,null),$(e,i),f=!0},i(o){f||(_(t.$$.fragment,o),_(r.$$.fragment,o),f=!0)},o(o){g(t.$$.fragment,o),g(r.$$.fragment,o),f=!1},d(o){o&&h(e),v(t),v(r)}}}function fo(s){let e;return{c(){e=y(`NOMIS TS006
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function uo(s){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function co(s){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $o(s){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function po(s){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function mo(s){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _o(s){let e,l,t,n,r,i;const f=[ao,io,oo],o=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(s),t=o[l]=f[l](s),r=new Ce({}),{c(){e=S("span"),t.c(),n=L(),b(r.$$.fragment),F(e,"slot","help")},m(u,c){d(u,e,c),o[l].m(e,null),$(e,n),w(r,e,null),i=!0},p(u,c){let p=l;l=a(u),l!==p&&(de(),g(o[p],1,1,()=>{o[p]=null}),he(),t=o[l],t||(t=o[l]=f[l](u),t.c()),_(t,1),t.m(e,n))},i(u){i||(_(t),_(r.$$.fragment,u),i=!0)},o(u){g(t),g(r.$$.fragment,u),i=!1},d(u){u&&h(e),o[l].d(),v(r)}}}function go(s){let e,l,t,n;return t=new De({props:{colorScale:s[1],limits:$t(s[0].kind).map(gl)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",l=L(),b(t.$$.fragment)},m(r,i){d(r,e,i),d(r,l,i),w(t,r,i),n=!0},p(r,i){const f={};i&1&&(f.limits=$t(r[0].kind).map(gl)),t.$set(f)},i(r){n||(_(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&(h(e),h(l)),v(t,r)}}}function ho(s){let e,l;return e=new De({props:{colorScale:s[1],limits:$t(s[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=$t(t[0].kind)),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function bo(s){let e,l;return e=new De({props:{colorScale:s[1],limits:$t(s[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=$t(t[0].kind)),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function wo(s){let e,l,t,n,r,i,f;function o(m){s[4](m)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]]};s[0].kind!==void 0&&(a.value=s[0].kind),l=new Sn({props:a}),H.push(()=>E(l,"value",o));const u=[bo,ho,go],c=[];function p(m,k){return m[0].kind=="percent_households_with_car"?0:m[0].kind=="average_cars_per_household"?1:m[0].kind=="population_density"?2:-1}return~(r=p(s))&&(i=c[r]=u[r](s)),{c(){e=S("span"),b(l.$$.fragment),n=L(),i&&i.c(),F(e,"slot","controls")},m(m,k){d(m,e,k),w(l,e,null),$(e,n),~r&&c[r].m(e,null),f=!0},p(m,k){const C={};!t&&k&1&&(t=!0,C.value=m[0].kind,B(()=>t=!1)),l.$set(C);let T=r;r=p(m),r===T?~r&&c[r].p(m,k):(i&&(de(),g(c[T],1,1,()=>{c[T]=null}),he()),~r?(i=c[r],i?i.p(m,k):(i=c[r]=u[r](m),i.c()),_(i,1),i.m(e,null)):i=null)},i(m){f||(_(l.$$.fragment,m),_(i),f=!0)},o(m){g(l.$$.fragment,m),g(i),f=!1},d(m){m&&h(e),v(l),~r&&c[r].d()}}}function vo(s){let e,l,t,n=s[9].toLocaleString()+"",r,i,f=s[8]+"",o;return{c(){e=S("p"),l=y("There are "),t=S("b"),r=y(n),i=y(`
          people per square kilometre in `),o=y(f)},m(a,u){d(a,e,u),$(e,l),$(e,t),$(t,r),$(e,i),$(e,o)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&q(r,n),u&128&&f!==(f=a[8]+"")&&q(o,f)},d(a){a&&h(e)}}}function ko(s){let e,l,t=s[8]+"",n,r,i,f=s[9]+"",o,a;return{c(){e=S("p"),l=y("Households in "),n=y(t),r=y(` have an average of
          `),i=S("b"),o=y(f),a=y(`
          cars`)},m(u,c){d(u,e,c),$(e,l),$(e,n),$(e,r),$(e,i),$(i,o),$(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&q(n,t),c&129&&f!==(f=u[9]+"")&&q(o,f)},d(u){u&&h(e)}}}function yo(s){let e,l,t=s[9]+"",n,r,i,f=s[8]+"",o,a;return{c(){e=S("p"),l=S("b"),n=y(t),r=y("%"),i=y(`
          of households in `),o=y(f),a=y(" have 1 or more cars")},m(u,c){d(u,e,c),$(e,l),$(l,n),$(l,r),$(e,i),$(e,o),$(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&q(n,t),c&128&&f!==(f=u[8]+"")&&q(o,f)},d(u){u&&h(e)}}}function So(s){_l(s);let e;function l(r,i){return r[0].kind=="percent_households_with_car"?yo:r[0].kind=="average_cars_per_household"?ko:vo}let t=l(s),n=t(s);return{c(){n.c(),e=ve()},m(r,i){n.m(r,i),d(r,e,i)},p(r,i){_l(r),t===(t=l(r))&&n?n.p(r,i):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Co(s){let e,l;return e=new ae({props:{$$slots:{default:[So,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function To(s){let e,l,t,n;const r=[G(Ge),{sourceLayer:Ge},{paint:{"fill-color":_e(["get",s[0].kind],$t(s[0].kind),s[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:s[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Co]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)i=ne(i,r[a]);e=new Re({props:i}),e.$on("click",s[3]);const f=[G(`${Ge}-outline`),{sourceLayer:Ge},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:s[0].show?"visible":"none"}}];let o={};for(let a=0;a<f.length;a+=1)o=ne(o,f[a]);return t=new me({props:o}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(G(Ge)),u&0&&{sourceLayer:Ge},u&3&&{paint:{"fill-color":_e(["get",a[0].kind],$t(a[0].kind),a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?re(f,[u&0&&se(G(`${Ge}-outline`)),u&0&&{sourceLayer:Ge},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Lo(s){let e,l,t,n,r;function i(o){s[5](o)}let f={name:Ge,title:"2021 census",bigControls:!0,$$slots:{controls:[wo],help:[_o]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${Ge}.pmtiles`,$$slots:{default:[To]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0].show,B(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let Ge="census_output_areas";function Mo(s){return s.show?s.kind:null}function Io(s){return{show:!0,kind:s}}function $t(s){return s=="percent_households_with_car"?[0,20,40,60,80,100]:s=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const gl=s=>s.toLocaleString();function No(s,e,l){let t,n=x.sequential_low_to_high,i=Gt(Ge,{show:!1,kind:"percent_households_with_car"},Mo,Io);Y(s,i,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function o(u){s.$$.not_equal(t.kind,u)&&(t.kind=u,i.set(t))}function a(u){s.$$.not_equal(t.show,u)&&(t.show=u,i.set(t))}return[t,n,i,f,o,a]}class Oo extends K{constructor(e){super(),X(this,e,No,Lo,J,{})}}function Po(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function jo(s){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ro(s){let e,l,t,n,r,i,f,o;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[jo]},$$scope:{ctx:s}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of December 2022."),i=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),w(f,e,null),o=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){o||(_(n.$$.fragment,a),_(f.$$.fragment,a),o=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),o=!1},d(a){a&&h(e),v(n),v(f)}}}function Do(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&q(t,l)},d(n){n&&h(e)}}}function Ao(s){let e,l;return e=new ae({props:{$$slots:{default:[Do,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Fo(s){let e,l,t,n;const r=[G(_t),{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ao]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)i=ne(i,r[a]);e=new Re({props:i}),e.$on("click",zo);const f=[G(`${_t}-outline`),{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let o={};for(let a=0;a<f.length;a+=1)o=ne(o,f[a]);return t=new me({props:o}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(G(_t)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?re(f,[u&0&&se(G(`${_t}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function qo(s){let e,l,t,n,r;function i(o){s[3](o)}let f={name:_t,title:Go,$$slots:{help:[Ro],icon:[Po]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new qt({props:{data:`${ue()}/v1/${_t}.geojson`,$$slots:{default:[Fo]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let _t="combined_authorities",Go="Combined authorities";function zo(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ho(s,e,l){let t,n=x.combined_authorities,r=$e(_t);Y(s,r,f=>l(0,t=f));function i(f){t=f,r.set(t)}return[t,n,r,i]}class Eo extends K{constructor(e){super(),X(this,e,Ho,qo,J,{})}}function Bo(s){let e;return{c(){e=y(`DLUCH GIS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Uo(s){let e;return{c(){e=y(`here
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Wo(s){let e,l,t,n,r,i,f,o,a,u;return n=new le({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Bo]},$$scope:{ctx:s}}}),i=new le({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Uo]},$$scope:{ctx:s}}}),a=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("The 2019 English IMD scores come from "),b(n.$$.fragment),r=y(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),b(i.$$.fragment),f=y("."),o=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),w(i,l,null),$(l,f),$(e,o),w(a,e,null),u=!0},p(c,p){const m={};p&64&&(m.$$scope={dirty:p,ctx:c}),n.$set(m);const k={};p&64&&(k.$$scope={dirty:p,ctx:c}),i.$set(k)},i(c){u||(_(n.$$.fragment,c),_(i.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(i.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(i),v(a)}}}function Yo(s){let e,l,t;return l=new De({props:{colorScale:s[1],limits:["Least deprived","Most deprived"]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Jo(s){let e,l=s[5].LSOA11CD+"",t,n,r,i=s[5].score+"",f,o,a,u,c,p=s[5].rank.toLocaleString()+"",m,k;return{c(){e=S("p"),t=y(l),n=y(` has an IMD score of
        `),r=S("b"),f=y(i),o=L(),a=S("p"),u=y("Rank: "),c=S("b"),m=y(p),k=y(`
        / 32,844 LSOAs`)},m(C,T){d(C,e,T),$(e,t),$(e,n),$(e,r),$(r,f),d(C,o,T),d(C,a,T),$(a,u),$(a,c),$(c,m),$(a,k)},p(C,T){T&32&&l!==(l=C[5].LSOA11CD+"")&&q(t,l),T&32&&i!==(i=C[5].score+"")&&q(f,i),T&32&&p!==(p=C[5].rank.toLocaleString()+"")&&q(m,p)},d(C){C&&(h(e),h(o),h(a))}}}function Vo(s){let e,l;return e=new ae({props:{$$slots:{default:[Jo,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qo(s){let e,l,t,n;const r=[G(ze),{sourceLayer:ze},{paint:{"fill-color":_e(["-",10,["get","decile"]],s[2],s[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Vo]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)i=ne(i,r[a]);e=new Re({props:i});const f=[G(`${ze}-outline`),{sourceLayer:ze},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:s[0]?"visible":"none"}}];let o={};for(let a=0;a<f.length;a+=1)o=ne(o,f[a]);return t=new me({props:o}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?re(r,[u&0&&se(G(ze)),u&0&&{sourceLayer:ze},u&6&&{paint:{"fill-color":_e(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?re(f,[u&0&&se(G(`${ze}-outline`)),u&0&&{sourceLayer:ze},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Zo(s){let e,l,t,n,r;function i(o){s[4](o)}let f={name:ze,title:Ko,$$slots:{controls:[Yo],help:[Wo]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${ze}.pmtiles`,$$slots:{default:[Qo]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let ze="imd",Ko="Indices of Multiple Deprivation";function Xo(s,e,l){let t,n=x.sequential_low_to_high,r=[0,2,4,6,8,10],i=$e(ze);Y(s,i,o=>l(0,t=o));function f(o){t=o,i.set(t)}return[t,n,r,i,f]}class xo extends K{constructor(e){super(),X(this,e,Xo,Zo,J,{})}}function ei(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ti(s){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ni(s){let e,l,t,n,r,i,f,o;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[ti]},$$scope:{ctx:s}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of January 2024."),i=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),w(f,e,null),o=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){o||(_(n.$$.fragment,a),_(f.$$.fragment,a),o=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),o=!1},d(a){a&&h(e),v(n),v(f)}}}function li(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&q(t,l)},d(n){n&&h(e)}}}function ri(s){let e,l;return e=new ae({props:{$$slots:{default:[li,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function si(s){let e,l,t,n;const r=[G(gt),{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ri]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)i=ne(i,r[a]);e=new Re({props:i}),e.$on("click",ai);const f=[G(`${gt}-outline`),{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let o={};for(let a=0;a<f.length;a+=1)o=ne(o,f[a]);return t=new me({props:o}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(G(gt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?re(f,[u&0&&se(G(`${gt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function oi(s){let e,l,t,n,r;function i(o){s[3](o)}let f={name:gt,title:ii,$$slots:{help:[ni],icon:[ei]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new qt({props:{data:`${ue()}/v1/${gt}.geojson`,$$slots:{default:[si]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let gt="local_authority_districts",ii="Local Authority Districts";function ai(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.features[0].properties.LAD23CD}`,"_blank")}function fi(s,e,l){let t,n=x.local_authority_districts,r=$e(gt);Y(s,r,f=>l(0,t=f));function i(f){t=f,r.set(t)}return[t,n,r,i]}class ui extends K{constructor(e){super(),X(this,e,fi,oi,J,{})}}function ci(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function $i(s){let e;return{c(){e=y(`local authority
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function pi(s){let e;return{c(){e=y(`national park authorit
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function mi(s){let e;return{c(){e=y(`development corporation
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _i(s){let e;return{c(){e=y("this map")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function gi(s){let e;return{c(){e=y(`planning.data.gov.uk
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function di(s){let e,l,t,n,r,i,f,o,a,u,c,p,m,k,C,T,O,D,P,M,N,I,R;return n=new le({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[$i]},$$scope:{ctx:s}}}),i=new le({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[pi]},$$scope:{ctx:s}}}),o=new le({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[mi]},$$scope:{ctx:s}}}),k=new le({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[_i]},$$scope:{ctx:s}}}),P=new le({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[gi]},$$scope:{ctx:s}}}),I=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("LPAs may be a "),b(n.$$.fragment),r=y(", "),b(i.$$.fragment),f=y("y, or "),b(o.$$.fragment),a=y("."),u=L(),c=S("p"),p=S("strong"),m=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),b(k.$$.fragment),C=y(" to get more details."),T=L(),O=S("p"),D=y("Data from ONS Geography via "),b(P.$$.fragment),M=y(", as of November 2022."),N=L(),b(I.$$.fragment),F(e,"slot","help")},m(j,z){d(j,e,z),$(e,l),$(l,t),w(n,l,null),$(l,r),w(i,l,null),$(l,f),w(o,l,null),$(l,a),$(e,u),$(e,c),$(c,p),$(p,m),w(k,p,null),$(p,C),$(e,T),$(e,O),$(O,D),w(P,O,null),$(O,M),$(e,N),w(I,e,null),R=!0},p(j,z){const Z={};z&32&&(Z.$$scope={dirty:z,ctx:j}),n.$set(Z);const ie={};z&32&&(ie.$$scope={dirty:z,ctx:j}),i.$set(ie);const A={};z&32&&(A.$$scope={dirty:z,ctx:j}),o.$set(A);const ee={};z&32&&(ee.$$scope={dirty:z,ctx:j}),k.$set(ee);const V={};z&32&&(V.$$scope={dirty:z,ctx:j}),P.$set(V)},i(j){R||(_(n.$$.fragment,j),_(i.$$.fragment,j),_(o.$$.fragment,j),_(k.$$.fragment,j),_(P.$$.fragment,j),_(I.$$.fragment,j),R=!0)},o(j){g(n.$$.fragment,j),g(i.$$.fragment,j),g(o.$$.fragment,j),g(k.$$.fragment,j),g(P.$$.fragment,j),g(I.$$.fragment,j),R=!1},d(j){j&&h(e),v(n),v(i),v(o),v(k),v(P),v(I)}}}function hi(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&q(t,l)},d(n){n&&h(e)}}}function bi(s){let e,l;return e=new ae({props:{$$slots:{default:[hi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function wi(s){let e,l,t,n;const r=[G(He),{sourceLayer:He},{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[bi]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)i=ne(i,r[a]);e=new Re({props:i});const f=[G(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let o={};for(let a=0;a<f.length;a+=1)o=ne(o,f[a]);return t=new me({props:o}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(G(He)),u&0&&{sourceLayer:He},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?re(f,[u&0&&se(G(`${He}-outline`)),u&0&&{sourceLayer:He},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function vi(s){let e,l,t,n,r;function i(o){s[3](o)}let f={name:He,title:ki,$$slots:{help:[di],icon:[ci]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${He}.pmtiles`,$$slots:{default:[wi]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let He="local_planning_authorities",ki="Local Planning Authorities";function yi(s,e,l){let t,n=x.local_planning_authorities,r=$e(He);Y(s,r,f=>l(0,t=f));function i(f){t=f,r.set(t)}return[t,n,r,i]}class Si extends K{constructor(e){super(),X(this,e,yi,vi,J,{})}}function Ci(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ti(s){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Li(s){let e,l,t,n,r,i,f,o;return n=new le({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Ti]},$$scope:{ctx:s}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2023."),i=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),w(f,e,null),o=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){o||(_(n.$$.fragment,a),_(f.$$.fragment,a),o=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),o=!1},d(a){a&&h(e),v(n),v(f)}}}function Mi(s){let e,l=s[4].Name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&q(t,l)},d(n){n&&h(e)}}}function Ii(s){let e,l;return e=new ae({props:{$$slots:{default:[Mi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ni(s){let e,l,t,n;const r=[G(Ee),{sourceLayer:Ee},{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ii]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)i=ne(i,r[a]);e=new Re({props:i}),e.$on("click",ji);const f=[G(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":s[1],"line-width":5}},{layout:{visibility:s[0]?"visible":"none"}}];let o={};for(let a=0;a<f.length;a+=1)o=ne(o,f[a]);return t=new me({props:o}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(G(Ee)),u&0&&{sourceLayer:Ee},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?re(f,[u&0&&se(G(`${Ee}-outline`)),u&0&&{sourceLayer:Ee},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Oi(s){let e,l,t,n,r;function i(o){s[3](o)}let f={name:Ee,title:Pi,$$slots:{help:[Li],icon:[Ci]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${Ee}.pmtiles`,$$slots:{default:[Ni]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let Ee="parliamentary_constituencies",Pi="Parliamentary constituencies";function ji(s){let e=s.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ri(s,e,l){let t,n=x.parliamentary_constituencies,r=$e(Ee);Y(s,r,f=>l(0,t=f));function i(f){t=f,r.set(t)}return[t,n,r,i]}class Di extends K{constructor(e){super(),X(this,e,Ri,Oi,J,{})}}function Ai(s){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Fi(s){let e,l,t,n,r,i,f,o,a,u;return n=new le({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ai]},$$scope:{ctx:s}}}),a=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Most layers show air quality data from "),b(n.$$.fragment),r=y(`. The measurements are annual means, in units of µgm
      `),i=S("sup"),i.textContent="3",f=y(`
      . Note the particulate matter layers are not corrected for natural sources.`),o=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),$(l,i),$(l,f),$(e,o),w(a,e,null),u=!0},p(c,p){const m={};p&4096&&(m.$$scope={dirty:p,ctx:c}),n.$set(m)},i(c){u||(_(n.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function qi(s){let e,l,t,n,r,i=s[3](s[0].pollutant)+"",f,o,a,u,c,p,m,k,C,T,O,D,P;function M(I){s[5](I)}let N={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return s[0].pollutant!==void 0&&(N.value=s[0].pollutant),l=new At({props:N}),H.push(()=>E(l,"value",M)),{c(){e=S("span"),b(l.$$.fragment),n=L(),r=S("p"),f=y(i),o=L(),a=S("div"),u=S("label"),c=y(`Opacity
        `),p=S("input"),m=L(),k=S("img"),F(p,"type","range"),F(p,"min","0"),F(p,"max","100"),tn(k.src,C=s[4](s[0].pollutant))||F(k,"src",C),F(k,"width",150),F(k,"alt",T=`Legend for ${s[0].pollutant} layer`),F(e,"slot","controls")},m(I,R){d(I,e,R),w(l,e,null),$(e,n),$(e,r),$(r,f),$(e,o),$(e,a),$(a,u),$(u,c),$(u,p),Ve(p,s[0].opacity),$(e,m),$(e,k),O=!0,D||(P=[it(p,"change",s[6]),it(p,"input",s[6])],D=!0)},p(I,R){const j={};!t&&R&1&&(t=!0,j.value=I[0].pollutant,B(()=>t=!1)),l.$set(j),(!O||R&1)&&i!==(i=I[3](I[0].pollutant)+"")&&q(f,i),R&1&&Ve(p,I[0].opacity),(!O||R&1&&!tn(k.src,C=I[4](I[0].pollutant)))&&F(k,"src",C),(!O||R&1&&T!==(T=`Legend for ${I[0].pollutant} layer`))&&F(k,"alt",T)},i(I){O||(_(l.$$.fragment,I),O=!0)},o(I){g(l.$$.fragment,I),O=!1},d(I){I&&h(e),v(l),D=!1,Lr(P)}}}function Gi(s){let e,l;const t=[G(nn),{paint:{"raster-opacity":s[0].opacity/100}},{layout:{visibility:s[0].show?"visible":"none"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new ts({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&1?re(t,[i&0&&se(G(nn)),i&1&&{paint:{"raster-opacity":r[0].opacity/100}},i&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function zi(s){let e,l,t,n,r;function i(o){s[7](o)}let f={name:nn,title:Hi,bigControls:!0,$$slots:{controls:[qi],help:[Fi]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new Ts({props:{tiles:[s[1]],tileSize:256,$$slots:{default:[Gi]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2&&(c.tiles=[o[1]]),a&4097&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let nn="pollution",Hi="Pollution";function Ei(s){return s.show?`${s.pollutant}/${s.opacity}`:null}function Bi(s){let[e,l]=s.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function Ui(s,e,l){let t,n,r,f=Gt(nn,{show:!1,pollutant:"PM25_viridis",opacity:50},Ei,Bi);Y(s,f,C=>l(0,r=C));function o(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(C){return t[1]}function u(C){let T=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${o()}?bbox={bbox-epsg-3857}&${T}`}function c(C){let T=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${o()}?${T}`}function p(C){s.$$.not_equal(r.pollutant,C)&&(r.pollutant=C,f.set(r))}function m(){r.opacity=Qt(this.value),f.set(r)}function k(C){s.$$.not_equal(r.show,C)&&(r.show=C,f.set(r))}return s.$$.update=()=>{s.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),s.$$.dirty&1&&l(1,n=u(r.pollutant))},[r,n,f,a,c,p,m,k]}class Wi extends K{constructor(e){super(),X(this,e,Ui,zi,J,{})}}function Yi(s){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ji(s){let e,l,t,n,r,i,f,o,a,u;return i=new le({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Yi]},$$scope:{ctx:s}}}),a=new Ce({}),{c(){e=S("span"),l=S("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=S("p"),r=y("Data from June 2019, produced by "),b(i.$$.fragment),f=y(". See there for methodology details"),o=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),w(i,n,null),$(n,f),$(e,o),w(a,e,null),u=!0},p(c,p){const m={};p&32&&(m.$$scope={dirty:p,ctx:c}),i.$set(m)},i(c){u||(_(i.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(i.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(i),v(a)}}}function Vi(s){let e,l,t;return l=new De({props:{colorScale:s[1],limits:["55","65","75",">"]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Qi(s){let e,l=s[4].noiseclass+"",t,n,r=dl(s[4].noiseclass)+"",i,f;return{c(){e=S("p"),t=y(l),n=y(" dB ("),i=y(r),f=y(")")},m(o,a){d(o,e,a),$(e,t),$(e,n),$(e,i),$(e,f)},p(o,a){a&16&&l!==(l=o[4].noiseclass+"")&&q(t,l),a&16&&r!==(r=dl(o[4].noiseclass)+"")&&q(i,r)},d(o){o&&h(e)}}}function Zi(s){let e,l;return e=new ae({props:{$$slots:{default:[Qi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ki(s){let e,l;const t=[G(dt),{sourceLayer:dt},{paint:{"fill-color":nt(["get","noiseclass"],{"55.0-59.9":s[1][0],"60.0-64.9":s[1][0],"65.0-69.9":s[1][1],"70.0-74.9":s[1][1],">=75.0":s[1][2]},"red"),"fill-opacity":te(.5,.8)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Zi]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&3?re(t,[i&0&&se(G(dt)),i&0&&{sourceLayer:dt},i&2&&{paint:{"fill-color":nt(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":te(.5,.8)}},i&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};i&32&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Xi(s){let e,l,t,n,r;function i(o){s[3](o)}let f={name:dt,title:xi,$$slots:{controls:[Vi],help:[Ji]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${dt}.pmtiles`,$$slots:{default:[Ki]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let dt="road_noise",xi="Road noise";function dl(s){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[s]}function ea(s,e,l){let t,n=[x.sequential_low_to_high[0],x.sequential_low_to_high[2],x.sequential_low_to_high[4]],r=$e(dt);Y(s,r,f=>l(0,t=f));function i(f){t=f,r.set(t)}return[t,n,r,i]}class ta extends K{constructor(e){super(),X(this,e,ea,Xi,J,{})}}function na(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function la(s){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ra(s){let e,l,t,n,r,i,f,o;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[la]},$$scope:{ctx:s}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2023."),i=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),w(f,e,null),o=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){o||(_(n.$$.fragment,a),_(f.$$.fragment,a),o=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),o=!1},d(a){a&&h(e),v(n),v(f)}}}function sa(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&q(t,l)},d(n){n&&h(e)}}}function oa(s){let e,l;return e=new ae({props:{$$slots:{default:[sa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ia(s){let e,l,t,n;const r=[G(Be),{sourceLayer:Be},{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[oa]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)i=ne(i,r[a]);e=new Re({props:i}),e.$on("click",ua);const f=[G(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let o={};for(let a=0;a<f.length;a+=1)o=ne(o,f[a]);return t=new me({props:o}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(G(Be)),u&0&&{sourceLayer:Be},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?re(f,[u&0&&se(G(`${Be}-outline`)),u&0&&{sourceLayer:Be},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function aa(s){let e,l,t,n,r;function i(o){s[3](o)}let f={name:Be,title:fa,$$slots:{help:[ra],icon:[na]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${Be}.pmtiles`,$$slots:{default:[ia]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let Be="wards",fa="Wards";function ua(s){let e=encodeURIComponent(s.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function ca(s,e,l){let t,n=x.wards,r=$e(Be);Y(s,r,f=>l(0,t=f));function i(f){t=f,r.set(t)}return[t,n,r,i]}class $a extends K{constructor(e){super(),X(this,e,ca,aa,J,{})}}function pa(s){let e;return{c(){e=y("Open Data Commons Open Database License")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ma(s){let e,l,t,n;return t=new le({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[pa]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("License: "),b(t.$$.fragment)},m(r,i){d(r,e,i),$(e,l),w(t,e,null),n=!0},p(r,[i]){const f={};i&1&&(f.$$scope={dirty:i,ctx:r}),t.$set(f)},i(r){n||(_(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&h(e),v(t)}}}class lt extends K{constructor(e){super(),X(this,e,null,ma,J,{})}}function _a(s){let e,l,t;return l=new Se({props:{color:x.bus_route_with_lane}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ga(s){let e;return{c(){e=y(`GTFS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function da(s){let e,l,t,n,r,i,f,o,a,u;return i=new le({props:{href:"https://gtfs.org",$$slots:{default:[ga]},$$scope:{ctx:s}}}),a=new lt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=S("p"),r=y("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(i.$$.fragment),f=y(`, and doesn't include which routes are run or the frequency
      of service.`),o=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),w(i,n,null),$(n,f),$(e,o),w(a,e,null),u=!0},p(c,p){const m={};p&16&&(m.$$scope={dirty:p,ctx:c}),i.$set(m)},i(c){u||(_(i.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(i.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(i),v(a)}}}function ha(s){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ba(s){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function wa(s){let e;function l(r,i){return r[3].has_bus_lane?ba:ha}let t=l(s),n=t(s);return{c(){n.c(),e=ve()},m(r,i){n.m(r,i),d(r,e,i)},p(r,i){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function va(s){let e,l;return e=new ae({props:{$$slots:{default:[wa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ka(s){let e,l;const t=[G(ht),{sourceLayer:ht},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],x.bus_route_with_lane,x.bus_route_without_lane],"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[va]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&1?re(t,[i&0&&se(G(ht)),i&0&&{sourceLayer:ht},t[2],i&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ya(s){let e,l,t,n,r;function i(o){s[2](o)}let f={name:ht,title:Sa,$$slots:{help:[da],icon:[_a]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${ht}.pmtiles`,$$slots:{default:[ka]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let ht="bus_routes",Sa="Bus routes";function Ca(s,e,l){let t,n=$e(ht);Y(s,n,i=>l(0,t=i));function r(i){t=i,n.set(t)}return[t,n,r]}class Ta extends K{constructor(e){super(),X(this,e,Ca,ya,J,{})}}function hl(s){const e=Fa(s[9]);s[10]=e[0],s[11]=e[1],s[12]=e[2]}function bl(s,e,l){const t=s.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function La(s){let e,l,t,n,r,i,f,o,a;return o=new lt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 15 August 2023).`,t=L(),n=S("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),i=S("p"),i.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),b(o.$$.fragment),F(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),$(e,t),$(e,n),$(e,r),$(e,i),$(e,f),w(o,e,null),a=!0},p:Q,i(u){a||(_(o.$$.fragment,u),a=!0)},o(u){g(o.$$.fragment,u),a=!1},d(u){u&&h(e),v(o)}}}function Ma(s){let e,l,t=s[13]+"",n,r,i;return e=new Se({props:{color:s[14]}}),{c(){b(e.$$.fragment),l=L(),n=y(t),r=L()},m(f,o){w(e,f,o),d(f,l,o),d(f,n,o),d(f,r,o),i=!0},p:Q,i(f){i||(_(e.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),i=!1},d(f){f&&(h(l),h(n),h(r)),v(e,f)}}}function wl(s){let e,l,t;function n(i){s[4](i,s[10])}let r={$$slots:{default:[Ma]},$$scope:{ctx:s}};return s[0][s[10]]!==void 0&&(r.checked=s[0][s[10]]),e=new We({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(i,f){w(e,i,f),t=!0},p(i,f){s=i;const o={};f&131072&&(o.$$scope={dirty:f,ctx:s}),!l&&f&5&&(l=!0,o.checked=s[0][s[10]],B(()=>l=!1)),e.$set(o)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ia(s){let e,l,t=we(s[2]),n=[];for(let i=0;i<t.length;i+=1)n[i]=wl(bl(s,t,i));const r=i=>g(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ve()},m(i,f){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,f);d(i,e,f),l=!0},p(i,f){if(f&5){t=we(i[2]);let o;for(o=0;o<t.length;o+=1){const a=bl(i,t,o);n[o]?(n[o].p(a,f),_(n[o],1)):(n[o]=wl(a),n[o].c(),_(n[o],1),n[o].m(e.parentNode,e))}for(de(),o=t.length;o<n.length;o+=1)r(o);he()}},i(i){if(!l){for(let f=0;f<t.length;f+=1)_(n[f]);l=!0}},o(i){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(i){i&&h(e),et(n,i)}}}function Na(s){let e,l,t;return l=new Ye({props:{small:!0,$$slots:{default:[Ia]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const i={};r&131073&&(i.$$scope={dirty:r,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Oa(s){hl(s);let e,l=s[10]+"",t,n,r,i,f,o=s[11]+"",a,u,c,p,m=s[12]+"",k;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),i=y("Direction: "),f=S("b"),a=L(),u=S("p"),c=y("Width: "),p=S("b"),k=y(m)},m(C,T){d(C,e,T),$(e,t),d(C,n,T),d(C,r,T),$(r,i),$(r,f),f.innerHTML=o,d(C,a,T),d(C,u,T),$(u,c),$(u,p),$(p,k)},p(C,T){hl(C),T&512&&l!==(l=C[10]+"")&&q(t,l),T&512&&o!==(o=C[11]+"")&&(f.innerHTML=o),T&512&&m!==(m=C[12]+"")&&q(k,m)},d(C){C&&(h(e),h(n),h(r),h(a),h(u))}}}function Pa(s){let e,l;return e=new ae({props:{$$slots:{default:[Oa,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ja(s){let e,l;const t=[G(bt),{sourceLayer:bt},{paint:{"line-color":nt(["get","kind"],{track:x.cycle_paths.track,lane:x.cycle_paths.lane,shared_use_segregated:x.cycle_paths.shared_use_segregated,shared_use_unsegregated:x.cycle_paths.shared_use_unsegregated},"red"),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show?"visible":"none"}},{filter:s[3](s[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[Pa]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),e.$on("click",qa),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&9?re(t,[i&0&&se(G(bt)),i&0&&{sourceLayer:bt},t[2],i&1&&{layout:{visibility:r[0].show?"visible":"none"}},i&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};i&131072&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ra(s){let e,l,t,n,r;function i(o){s[5](o)}let f={name:bt,title:Da,bigControls:!0,$$slots:{controls:[Na],help:[La]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${bt}.pmtiles`,$$slots:{default:[ja]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0].show,B(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let bt="cycle_paths",Da="Cycle paths";function Aa(s){return{show:!0,track:s.includes("track"),lane:s.includes("lane"),shared_use_segregated:s.includes("shared_use_segregated"),shared_use_unsegregated:s.includes("shared_use_unsegregated")}}function Fa(s){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[s.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[s.direction],t=s.width=="unknown"?"unknown":`${s.width} meters`;return[e,`${l} ${s.direction}`,t]}function qa(s){window.open(`http://openstreetmap.org/way/${s.detail.features[0].properties.osm_id}`,"_blank")}function Ga(s,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function i(p){return p.show?n.filter(m=>p[m]).join(","):null}let f=Gt(bt,r,i,Aa);Y(s,f,p=>l(0,t=p));let o=[["track","Separated tracks",x.cycle_paths.track],["lane","Unprotected lanes",x.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",x.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",x.cycle_paths.shared_use_unsegregated]];function a(p){let m=n.filter(k=>p[k]);return["in",["get","kind"],["literal",m]]}function u(p,m){s.$$.not_equal(t[m],p)&&(t[m]=p,f.set(t))}function c(p){s.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,o,a,u,c]}class za extends K{constructor(e){super(),X(this,e,Ga,Ra,J,{})}}function Ha(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ea(s){let e;return{c(){e=y(`Major Road Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ba(s){let e,l,t,n,r,i,f,o;return n=new le({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Ea]},$$scope:{ctx:s}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),b(n.$$.fragment),r=y(", as of September 2021."),i=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),w(f,e,null),o=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){o||(_(n.$$.fragment,a),_(f.$$.fragment,a),o=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),o=!1},d(a){a&&h(e),v(n),v(f)}}}function Ua(s){let e,l=(s[4].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&q(t,l)},d(n){n&&h(e)}}}function Wa(s){let e,l;return e=new ae({props:{$$slots:{default:[Ua,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ya(s){let e,l;const t=[G(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[Wa]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&3?re(t,[i&0&&se(G(wt)),i&0&&{sourceLayer:wt},t[2],t[3],i&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},i&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};i&32&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ja(s){let e,l,t,n,r;function i(o){s[3](o)}let f={name:wt,title:Va,$$slots:{help:[Ba],icon:[Ha]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${wt}.pmtiles`,$$slots:{default:[Ya]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let wt="mrn",Va="Major Road Network";function Qa(s,e,l){let t,n=x.mrn,r=$e(wt);Y(s,r,f=>l(0,t=f));function i(f){t=f,r.set(t)}return[t,n,r,i]}class Za extends K{constructor(e){super(),X(this,e,Qa,Ja,J,{})}}function Ka(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Xa(s){let e;return{c(){e=y(`OS Open Roads
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xa(s){let e,l,t,n,r,i,f,o;return n=new le({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Xa]},$$scope:{ctx:s}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),i=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),w(f,e,null),o=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){o||(_(n.$$.fragment,a),_(f.$$.fragment,a),o=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),o=!1},d(a){a&&h(e),v(n),v(f)}}}function ef(s){let e,l=(s[4].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&q(t,l)},d(n){n&&h(e)}}}function tf(s){let e,l;return e=new ae({props:{$$slots:{default:[ef,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function nf(s){let e,l;const t=[G(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[tf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&3?re(t,[i&0&&se(G(vt)),i&0&&{sourceLayer:vt},t[2],t[3],i&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},i&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};i&32&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function lf(s){let e,l,t,n,r;function i(o){s[3](o)}let f={name:vt,title:rf,$$slots:{help:[xa],icon:[Ka]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${vt}.pmtiles`,$$slots:{default:[nf]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let vt="srn",rf="Strategic Road Network";function sf(s,e,l){let t,n=x.srn,r=$e(vt);Y(s,r,f=>l(0,t=f));function i(f){t=f,r.set(t)}return[t,n,r,i]}class of extends K{constructor(e){super(),X(this,e,sf,lf,J,{})}}function af(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ff(s){let e;return{c(){e=y(`National Cycle Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function uf(s){let e,l,t,n,r,i,f,o;return n=new le({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[ff]},$$scope:{ctx:s}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from Sustrans about the "),b(n.$$.fragment),r=y(", downloaded on 22/01/2024."),i=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),w(f,e,null),o=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){o||(_(n.$$.fragment,a),_(f.$$.fragment,a),o=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),o=!1},d(a){a&&h(e),v(n),v(f)}}}function vl(s){let e,l,t,n=s[4].Desc_+"",r;return{c(){e=S("li"),l=y("Description: "),t=S("b"),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(t,r)},p(i,f){f&16&&n!==(n=i[4].Desc_+"")&&q(r,n)},d(i){i&&h(e)}}}function kl(s){let e,l,t,n=s[4].Greenway+"",r;return{c(){e=S("li"),l=y("Is greenway: "),t=S("b"),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(t,r)},p(i,f){f&16&&n!==(n=i[4].Greenway+"")&&q(r,n)},d(i){i&&h(e)}}}function yl(s){let e,l,t,n=s[4].RouteType+"",r;return{c(){e=S("li"),l=y("Route type: "),t=S("b"),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(t,r)},p(i,f){f&16&&n!==(n=i[4].RouteType+"")&&q(r,n)},d(i){i&&h(e)}}}function Sl(s){let e,l,t,n=s[4].RouteNo+"",r;return{c(){e=S("li"),l=y("Route number: "),t=S("b"),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(t,r)},p(i,f){f&16&&n!==(n=i[4].RouteNo+"")&&q(r,n)},d(i){i&&h(e)}}}function Cl(s){let e,l,t,n=s[4].RouteCat+"",r;return{c(){e=S("li"),l=y("Route Category: "),t=S("b"),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(t,r)},p(i,f){f&16&&n!==(n=i[4].RouteCat+"")&&q(r,n)},d(i){i&&h(e)}}}function Tl(s){let e,l,t,n=s[4].OpenStatus+"",r;return{c(){e=S("li"),l=y("Open Status: "),t=S("b"),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(t,r)},p(i,f){f&16&&n!==(n=i[4].OpenStatus+"")&&q(r,n)},d(i){i&&h(e)}}}function Ll(s){let e,l,t,n=s[4].Surface+"",r;return{c(){e=S("li"),l=y("Surface: "),t=S("b"),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(t,r)},p(i,f){f&16&&n!==(n=i[4].Surface+"")&&q(r,n)},d(i){i&&h(e)}}}function Ml(s){let e,l,t,n=s[4].Quality+"",r;return{c(){e=S("li"),l=y("Quality: "),t=S("b"),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(t,r)},p(i,f){f&16&&n!==(n=i[4].Quality+"")&&q(r,n)},d(i){i&&h(e)}}}function Il(s){let e,l,t,n=s[4].RoadClass+"",r;return{c(){e=S("li"),l=y("Road Class: "),t=S("b"),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(t,r)},p(i,f){f&16&&n!==(n=i[4].RoadClass+"")&&q(r,n)},d(i){i&&h(e)}}}function cf(s){let e,l,t,n,r,i,f,o,a,u=s[4].Desc_&&vl(s),c=s[4].Greenway&&kl(s),p=s[4].RouteType&&yl(s),m=s[4].RouteNo&&Sl(s),k=s[4].RouteCat&&Cl(s),C=s[4].OpenStatus&&Tl(s),T=s[4].Surface&&Ll(s),O=s[4].Quality&&Ml(s),D=s[4].RoadClass&&Il(s);return{c(){e=S("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),p&&p.c(),n=L(),m&&m.c(),r=L(),k&&k.c(),i=L(),C&&C.c(),f=L(),T&&T.c(),o=L(),O&&O.c(),a=L(),D&&D.c()},m(P,M){d(P,e,M),u&&u.m(e,null),$(e,l),c&&c.m(e,null),$(e,t),p&&p.m(e,null),$(e,n),m&&m.m(e,null),$(e,r),k&&k.m(e,null),$(e,i),C&&C.m(e,null),$(e,f),T&&T.m(e,null),$(e,o),O&&O.m(e,null),$(e,a),D&&D.m(e,null)},p(P,M){P[4].Desc_?u?u.p(P,M):(u=vl(P),u.c(),u.m(e,l)):u&&(u.d(1),u=null),P[4].Greenway?c?c.p(P,M):(c=kl(P),c.c(),c.m(e,t)):c&&(c.d(1),c=null),P[4].RouteType?p?p.p(P,M):(p=yl(P),p.c(),p.m(e,n)):p&&(p.d(1),p=null),P[4].RouteNo?m?m.p(P,M):(m=Sl(P),m.c(),m.m(e,r)):m&&(m.d(1),m=null),P[4].RouteCat?k?k.p(P,M):(k=Cl(P),k.c(),k.m(e,i)):k&&(k.d(1),k=null),P[4].OpenStatus?C?C.p(P,M):(C=Tl(P),C.c(),C.m(e,f)):C&&(C.d(1),C=null),P[4].Surface?T?T.p(P,M):(T=Ll(P),T.c(),T.m(e,o)):T&&(T.d(1),T=null),P[4].Quality?O?O.p(P,M):(O=Ml(P),O.c(),O.m(e,a)):O&&(O.d(1),O=null),P[4].RoadClass?D?D.p(P,M):(D=Il(P),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(P){P&&h(e),u&&u.d(),c&&c.d(),p&&p.d(),m&&m.d(),k&&k.d(),C&&C.d(),T&&T.d(),O&&O.d(),D&&D.d()}}}function $f(s){let e,l;return e=new ae({props:{$$slots:{default:[cf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function pf(s){let e,l;const t=[G(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[1],"line-width":4,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[$f]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&3?re(t,[i&0&&se(G(kt)),i&0&&{sourceLayer:kt},t[2],t[3],i&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":te(1,.5)}},i&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};i&32&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function mf(s){let e,l,t,n,r;function i(o){s[3](o)}let f={name:kt,title:_f,$$slots:{help:[uf],icon:[af]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${kt}.pmtiles`,$$slots:{default:[pf]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let kt="national_cycle_network",_f="National Cycle Network";function gf(s,e,l){let t,n=x.national_cycle_network,r=$e(kt);Y(s,r,f=>l(0,t=f));function i(f){t=f,r.set(t)}return[t,n,r,i]}class df extends K{constructor(e){super(),X(this,e,gf,mf,J,{})}}function Nl(s,e,l){const t=s.slice();return t[6]=e[l][0],t[7]=e[l][1],t[8]=e[l][2],t}function hf(s){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function bf(s){let e,l,t,n,r,i,f,o,a,u,c,p;return u=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[hf]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=S("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),i=S("p"),i.textContent="Data valid as of 1 January, 2024",f=L(),o=S("p"),a=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(u.$$.fragment),c=y("."),F(e,"slot","help")},m(m,k){d(m,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,i),$(e,f),$(e,o),$(o,a),w(u,o,null),$(o,c),p=!0},p(m,k){const C={};k&2048&&(C.$$scope={dirty:k,ctx:m}),u.$set(C)},i(m){p||(_(u.$$.fragment,m),p=!0)},o(m){g(u.$$.fragment,m),p=!1},d(m){m&&h(e),v(u)}}}function wf(s){let e,l,t;return l=new De({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function vf(s){let e,l,t=ln(s[5].angle+s[8])+"",n;return{c(){e=S("p"),l=new Dt(!1),n=y(` side of the road: no pavement
          `),l.a=n},m(r,i){d(r,e,i),l.m(t,e),$(e,n)},p(r,i){i&32&&t!==(t=ln(r[5].angle+r[8])+"")&&l.p(t)},d(r){r&&h(e)}}}function kf(s){let e,l,t=ln(s[5].angle+s[8])+"",n,r,i=s[6]+"",f,o,a,u=s[7]+"",c,p;return{c(){e=S("p"),l=new Dt(!1),n=y(` side of the road:
            `),r=S("b"),f=y(i),o=y(`
            m average,
            `),a=S("b"),c=y(u),p=y(`
            m minimum
          `),l.a=n},m(m,k){d(m,e,k),l.m(t,e),$(e,n),$(e,r),$(r,f),$(e,o),$(e,a),$(a,c),$(e,p)},p(m,k){k&32&&t!==(t=ln(m[5].angle+m[8])+"")&&l.p(t),k&32&&i!==(i=m[6]+"")&&q(f,i),k&32&&u!==(u=m[7]+"")&&q(c,u)},d(m){m&&h(e)}}}function Ol(s){let e;function l(r,i){return r[6]?kf:vf}let t=l(s),n=t(s);return{c(){n.c(),e=ve()},m(r,i){n.m(r,i),d(r,e,i)},p(r,i){t===(t=l(r))&&n?n.p(r,i):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function yf(s){let e,l=we([[s[5].left_average,s[5].left_minimum,-90],[s[5].right_average,s[5].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Ol(Nl(s,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ve()},m(n,r){for(let i=0;i<2;i+=1)t[i]&&t[i].m(n,r);d(n,e,r)},p(n,r){if(r&32){l=we([[n[5].left_average,n[5].left_minimum,-90],[n[5].right_average,n[5].right_minimum,90]]);let i;for(i=0;i<2;i+=1){const f=Nl(n,l,i);t[i]?t[i].p(f,r):(t[i]=Ol(f),t[i].c(),t[i].m(e.parentNode,e))}for(;i<2;i+=1)t[i].d(1)}},d(n){n&&h(e),et(t,n)}}}function Sf(s){let e,l;return e=new ae({props:{openOn:"hover",$$slots:{default:[yf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&2080&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Cf(s){let e,l;const t=[G(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":_e(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],s[2],s[1]),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[Sf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&7?re(t,[i&0&&se(G(yt)),i&0&&{sourceLayer:yt},t[2],t[3],i&6&&{paint:{"line-color":_e(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":je,"line-opacity":te(1,.5)}},i&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};i&2048&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Tf(s){let e,l,t,n,r;function i(o){s[4](o)}let f={name:yt,title:Lf,$$slots:{controls:[wf],help:[bf]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${Kt()}/v1/${yt}.pmtiles`,$$slots:{default:[Cf]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&2048&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let yt="pavement_widths",Lf="OS Pavement widths";function Mf(s){let e=Math.floor((s+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function ln(s){return`${Mf(s)} <span style="display: inline-block; rotate: ${s}deg">⬆</span>`}function If(s,e,l){let t,n=x.sequential_low_to_high,r=[0,2,4,6,8,13],i=$e(yt);Y(s,i,o=>l(0,t=o));function f(o){t=o,i.set(t)}return[t,n,r,i,f]}class Nf extends K{constructor(e){super(),X(this,e,If,Tf,J,{})}}function Of(s){let e;return{c(){e=y("the PCT website")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Pf(s){let e;return{c(){e=y("2017 journal article")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function jf(s){let e,l,t,n,r,i,f,o,a,u,c,p;return o=new le({props:{href:"https://www.pct.bike",$$slots:{default:[Of]},$$scope:{ctx:s}}}),u=new le({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Pf]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=S("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),i=S("p"),f=y("See "),b(o.$$.fragment),a=y(" and "),b(u.$$.fragment),c=y(" for details on methodology and data sources."),F(e,"slot","help")},m(m,k){d(m,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,i),$(i,f),w(o,i,null),$(i,a),w(u,i,null),$(i,c),p=!0},p(m,k){const C={};k&1024&&(C.$$scope={dirty:k,ctx:m}),o.$set(C);const T={};k&1024&&(T.$$scope={dirty:k,ctx:m}),u.$set(T)},i(m){p||(_(o.$$.fragment,m),_(u.$$.fragment,m),p=!0)},o(m){g(o.$$.fragment,m),g(u.$$.fragment,m),p=!1},d(m){m&&h(e),v(o),v(u)}}}function Rf(s){let e,l,t,n,r,i,f,o,a;l=new De({props:{colorScale:s[1],limits:s[2]}});function u(k){s[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};s[0].tripPurpose!==void 0&&(c.value=s[0].tripPurpose),n=new Sn({props:c}),H.push(()=>E(n,"value",u));function p(k){s[6](k)}let m={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return s[0].scenario!==void 0&&(m.value=s[0].scenario),f=new At({props:m}),H.push(()=>E(f,"value",p)),{c(){e=S("span"),b(l.$$.fragment),t=L(),b(n.$$.fragment),i=L(),b(f.$$.fragment),F(e,"slot","controls")},m(k,C){d(k,e,C),w(l,e,null),$(e,t),w(n,e,null),$(e,i),w(f,e,null),a=!0},p(k,C){const T={};!r&&C&1&&(r=!0,T.value=k[0].tripPurpose,B(()=>r=!1)),n.$set(T);const O={};!o&&C&1&&(o=!0,O.value=k[0].scenario,B(()=>o=!1)),f.$set(O)},i(k){a||(_(l.$$.fragment,k),_(n.$$.fragment,k),_(f.$$.fragment,k),a=!0)},o(k){g(l.$$.fragment,k),g(n.$$.fragment,k),g(f.$$.fragment,k),a=!1},d(k){k&&h(e),v(l),v(n),v(f)}}}function Df(s){let e,l=s[4](s[9])+"",t;return{c(){e=new Dt(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Af(s){let e,l;return e=new ae({props:{$$slots:{default:[Df,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ff(s){let e,l;const t=[G(ot),{sourceLayer:ot},{paint:{"line-color":_e(["get",s[0].scenario],s[2],s[1]),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show&&s[0].tripPurpose==ot?"visible":"none"}}];let n={$$slots:{default:[Af]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&7?re(t,[i&0&&se(G(ot)),i&0&&{sourceLayer:ot},i&7&&{paint:{"line-color":_e(["get",r[0].scenario],r[2],r[1]),"line-width":je,"line-opacity":te(1,.5)}},i&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==ot?"visible":"none"}}]):{};i&1024&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function qf(s){let e,l=s[4](s[9])+"",t;return{c(){e=new Dt(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Gf(s){let e,l;return e=new ae({props:{$$slots:{default:[qf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function zf(s){let e,l;const t=[G(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":_e(["get",s[0].scenario],s[2],s[1]),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show&&s[0].tripPurpose==mt?"visible":"none"}}];let n={$$slots:{default:[Gf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&7?re(t,[i&0&&se(G(mt)),i&0&&{sourceLayer:mt},t[2],t[3],i&7&&{paint:{"line-color":_e(["get",r[0].scenario],r[2],r[1]),"line-width":je,"line-opacity":te(1,.5)}},i&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==mt?"visible":"none"}}]):{};i&1024&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Hf(s){let e,l,t,n,r,i,f;function o(u){s[7](u)}let a={name:Or,title:Ef,bigControls:!0,$$slots:{controls:[Rf],help:[jf]},$$scope:{ctx:s}};return s[0].show!==void 0&&(a.show=s[0].show),e=new fe({props:a}),H.push(()=>E(e,"show",o)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${ot}.pmtiles`,$$slots:{default:[Ff]},$$scope:{ctx:s}}}),i=new ce({props:{url:`pmtiles://${ue()}/v1/${mt}.pmtiles`,$$slots:{default:[zf]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(i.$$.fragment)},m(u,c){w(e,u,c),d(u,t,c),w(n,u,c),d(u,r,c),w(i,u,c),f=!0},p(u,[c]){const p={};c&1025&&(p.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,p.show=u[0].show,B(()=>l=!1)),e.$set(p);const m={};c&1025&&(m.$$scope={dirty:c,ctx:u}),n.$set(m);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),i.$set(k)},i(u){f||(_(e.$$.fragment,u),_(n.$$.fragment,u),_(i.$$.fragment,u),f=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),g(i.$$.fragment,u),f=!1},d(u){u&&(h(t),h(r)),v(e,u),v(n,u),v(i,u)}}}let Or="pct",ot="pct_commute",mt="pct_school",Ef="Propensity to Cycle Tool";function Bf(s){return s.show?`${s.tripPurpose}/${s.scenario}`:null}function Uf(s){let[e,l]=s.split("/");return{show:!0,tripPurpose:e,scenario:l}}function Wf(s,e,l){let t,n=x.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=Gt(Or,{show:!1,tripPurpose:ot,scenario:"baseline"},Bf,Uf);Y(s,f,p=>l(0,t=p));function o(p){let m=p.baseline,k=p.gov_target,C=p.go_dutch,T=`<h2>Trip purpose: ${t.tripPurpose==ot?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)T+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let O=(k/m).toFixed(1),D=(C/m).toFixed(1);T+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${O}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return T}function a(p){s.$$.not_equal(t.tripPurpose,p)&&(t.tripPurpose=p,f.set(t))}function u(p){s.$$.not_equal(t.scenario,p)&&(t.scenario=p,f.set(t))}function c(p){s.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,n,r,f,o,a,u,c]}class Yf extends K{constructor(e){super(),X(this,e,Wf,Hf,J,{})}}function Jf(s){let e;return{c(){e=y("Basemap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Vf(s){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Qf(s){let e,l,t,n,r,i,f,o,a,u,c,p,m;return n=new le({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Jf]},$$scope:{ctx:s}}}),c=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Vf]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),t=y("The average speed data is collected over a six-month period by "),b(n.$$.fragment),r=y(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),i=L(),f=S("p"),f.textContent="Data valid as of 1 September, 2023",o=L(),a=S("p"),u=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(c.$$.fragment),p=y("."),F(e,"slot","help")},m(k,C){d(k,e,C),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),$(e,f),$(e,o),$(e,a),$(a,u),w(c,a,null),$(a,p),m=!0},p(k,C){const T={};C&512&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const O={};C&512&&(O.$$scope={dirty:C,ctx:k}),c.$set(O)},i(k){m||(_(n.$$.fragment,k),_(c.$$.fragment,k),m=!0)},o(k){g(n.$$.fragment,k),g(c.$$.fragment,k),m=!1},d(k){k&&h(e),v(n),v(c)}}}function Zf(s){let e,l,t,n,r,i;l=new De({props:{colorScale:s[1],limits:s[2]}});function f(a){s[5](a)}let o={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return s[0].kind!==void 0&&(o.value=s[0].kind),n=new Sn({props:o}),H.push(()=>E(n,"value",f)),{c(){e=S("span"),b(l.$$.fragment),t=L(),b(n.$$.fragment),F(e,"slot","controls")},m(a,u){d(a,e,u),w(l,e,null),$(e,t),w(n,e,null),i=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,B(()=>r=!1)),n.$set(c)},i(a){i||(_(l.$$.fragment,a),_(n.$$.fragment,a),i=!0)},o(a){g(l.$$.fragment,a),g(n.$$.fragment,a),i=!1},d(a){a&&h(e),v(l),v(n)}}}function Kf(s){let e,l,t=s[8].indicative_mph+"",n,r,i,f,o,a=s[8].highest_mph+"",u,c,p=s[4][s[8].highest_description]+"",m,k;return{c(){e=S("p"),l=y("Posted speed limit: "),n=y(t),r=y(" mph"),i=L(),f=S("p"),o=y("Highest average speed: "),u=y(a),c=y(" mph (during "),m=y(p),k=y(")")},m(C,T){d(C,e,T),$(e,l),$(e,n),$(e,r),d(C,i,T),d(C,f,T),$(f,o),$(f,u),$(f,c),$(f,m),$(f,k)},p(C,T){T&256&&t!==(t=C[8].indicative_mph+"")&&q(n,t),T&256&&a!==(a=C[8].highest_mph+"")&&q(u,a),T&256&&p!==(p=C[4][C[8].highest_description]+"")&&q(m,p)},d(C){C&&(h(e),h(i),h(f))}}}function Xf(s){let e,l;return e=new ae({props:{$$slots:{default:[Kf,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function xf(s){let e,l;const t=[G(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":_e(["get",s[0].kind],s[2],s[1]),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show?"visible":"none"}}];let n={$$slots:{default:[Xf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&7?re(t,[i&0&&se(G(St)),i&0&&{sourceLayer:St},t[2],t[3],i&7&&{paint:{"line-color":_e(["get",r[0].kind],r[2],r[1]),"line-width":je,"line-opacity":te(1,.5)}},i&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};i&512&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function eu(s){let e,l,t,n,r;function i(o){s[6](o)}let f={name:St,title:tu,bigControls:!0,$$slots:{controls:[Zf],help:[Qf]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${Kt()}/v1/${St}.pmtiles`,$$slots:{default:[xf]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0].show,B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let St="road_speeds",tu="OS Speeds";function nu(s){return s.show?s.kind:null}function lu(s){return{show:!0,kind:s}}function ru(s,e,l){let t,n=x.sequential_low_to_high,r=[0,20,30,40,50,90],f=Gt(St,{show:!1,kind:"indicative_mph"},nu,lu);Y(s,f,c=>l(0,t=c));let o={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){s.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){s.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,o,a,u]}class su extends K{constructor(e){super(),X(this,e,ru,eu,J,{})}}function ou(s){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function iu(s){let e,l,t,n,r,i,f,o,a,u;return o=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ou]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=S("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),i=S("p"),f=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(o.$$.fragment),a=y("."),F(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(e,r),$(e,i),$(i,f),w(o,i,null),$(i,a),u=!0},p(c,p){const m={};p&64&&(m.$$scope={dirty:p,ctx:c}),o.$set(m)},i(c){u||(_(o.$$.fragment,c),u=!0)},o(c){g(o.$$.fragment,c),u=!1},d(c){c&&h(e),v(o)}}}function au(s){let e,l,t;return l=new De({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function fu(s){let e,l,t,n=s[5].average+"",r,i,f,o,a,u,c=s[5].minimum+"",p,m;return{c(){e=S("p"),l=y("Average width: "),t=S("b"),r=y(n),i=y(`
        meters`),f=L(),o=S("p"),a=y("Minimum width: "),u=S("b"),p=y(c),m=y(`
        meters`)},m(k,C){d(k,e,C),$(e,l),$(e,t),$(t,r),$(e,i),d(k,f,C),d(k,o,C),$(o,a),$(o,u),$(u,p),$(o,m)},p(k,C){C&32&&n!==(n=k[5].average+"")&&q(r,n),C&32&&c!==(c=k[5].minimum+"")&&q(p,c)},d(k){k&&(h(e),h(f),h(o))}}}function uu(s){let e,l;return e=new ae({props:{$$slots:{default:[fu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function cu(s){let e,l;const t=[G(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":_e(["get","average"],s[2],s[1]),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[uu]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&7?re(t,[i&0&&se(G(Ct)),i&0&&{sourceLayer:Ct},t[2],t[3],i&6&&{paint:{"line-color":_e(["get","average"],r[2],r[1]),"line-width":je,"line-opacity":te(1,.5)}},i&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};i&64&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function $u(s){let e,l,t,n,r;function i(o){s[4](o)}let f={name:Ct,title:pu,$$slots:{controls:[au],help:[iu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${Kt()}/v1/${Ct}.pmtiles`,$$slots:{default:[cu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let Ct="road_widths",pu="OS Road widths";function mu(s,e,l){let t,n=x.sequential_low_to_high,r=[0,5,10,15,20,100],i=$e(Ct);Y(s,i,o=>l(0,t=o));function f(o){t=o,i.set(t)}return[t,n,r,i,f]}class _u extends K{constructor(e){super(),X(this,e,mu,$u,J,{})}}function gu(s){let e,l,t;return l=new Se({props:{color:x.trams}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function du(s){let e,l,t,n,r;return n=new lt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 7 February 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),b(n.$$.fragment),F(e,"slot","help")},m(i,f){d(i,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:Q,i(i){r||(_(n.$$.fragment,i),r=!0)},o(i){g(n.$$.fragment,i),r=!1},d(i){i&&h(e),v(n)}}}function hu(s){let e,l;const t=[G(Tt),{sourceLayer:Tt},{paint:{"line-color":x.trams,"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new me({props:n}),e.$on("click",vu),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&1?re(t,[i&0&&se(G(Tt)),i&0&&{sourceLayer:Tt},t[2],i&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function bu(s){let e,l,t,n,r;function i(o){s[2](o)}let f={name:Tt,title:wu,$$slots:{help:[du],icon:[gu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${Tt}.pmtiles`,$$slots:{default:[hu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let Tt="trams",wu="Trams";function vu(s){window.open(`http://openstreetmap.org/way/${s.detail.features[0].properties.osm_id}`,"_blank")}function ku(s,e,l){let t,n=$e(Tt);Y(s,n,i=>l(0,t=i));function r(i){t=i,n.set(t)}return[t,n,r]}class yu extends K{constructor(e){super(),X(this,e,ku,bu,J,{})}}function Su(s){let e;return{c(){e=y(`Bus Open Data Service
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Cu(s){let e,l,t,n,r,i,f,o,a,u;return n=new le({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Su]},$$scope:{ctx:s}}}),a=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),b(n.$$.fragment),r=y(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),i=L(),f=S("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,o=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),$(e,f),$(e,o),w(a,e,null),u=!0},p(c,p){const m={};p&64&&(m.$$scope={dirty:p,ctx:c}),n.$set(m)},i(c){u||(_(n.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function Tu(s){let e,l,t,n,r;return n=new De({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("div"),l=S("p"),l.textContent="Peak hourly frequency:",t=L(),b(n.$$.fragment),F(e,"slot","controls")},m(i,f){d(i,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:Q,i(i){r||(_(n.$$.fragment,i),r=!0)},o(i){g(n.$$.fragment,i),r=!1},d(i){i&&h(e),v(n)}}}function Lu(s){let e,l,t,n=s[5].stop_name+"",r,i,f,o,a,u=s[5].peak+"",c,p,m,k,C,T=s[5].peak_description+"",O,D,P,M,N,I=s[5].total+"",R,j,z=s[5].total_description+"",Z,ie;return{c(){e=S("p"),l=y("Stop name: "),t=S("b"),r=y(n),i=L(),f=S("p"),o=y("Peak: "),a=S("b"),c=y(u),p=y(`
        buses during the busiest hour of any day`),m=L(),k=S("p"),C=y("The peak hour is "),O=y(T),D=L(),P=S("p"),M=y("Total buses per day: "),N=S("b"),R=y(I),j=y(`
        (for `),Z=y(z),ie=y(", the busiest day of the week)")},m(A,ee){d(A,e,ee),$(e,l),$(e,t),$(t,r),d(A,i,ee),d(A,f,ee),$(f,o),$(f,a),$(a,c),$(f,p),d(A,m,ee),d(A,k,ee),$(k,C),$(k,O),d(A,D,ee),d(A,P,ee),$(P,M),$(P,N),$(N,R),$(P,j),$(P,Z),$(P,ie)},p(A,ee){ee&32&&n!==(n=A[5].stop_name+"")&&q(r,n),ee&32&&u!==(u=A[5].peak+"")&&q(c,u),ee&32&&T!==(T=A[5].peak_description+"")&&q(O,T),ee&32&&I!==(I=A[5].total+"")&&q(R,I),ee&32&&z!==(z=A[5].total_description+"")&&q(Z,z)},d(A){A&&(h(e),h(i),h(f),h(m),h(k),h(D),h(P))}}}function Mu(s){let e,l;return e=new ae({props:{$$slots:{default:[Lu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Iu(s){let e,l;const t=[G(Lt),{sourceLayer:Lt},{paint:{"circle-color":_e(["get","peak"],s[2],s[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Mu]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ft({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&7?re(t,[i&0&&se(G(Lt)),i&0&&{sourceLayer:Lt},i&6&&{paint:{"circle-color":_e(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Nu(s){let e,l,t,n,r;function i(o){s[4](o)}let f={name:Lt,title:Ou,$$slots:{controls:[Tu],help:[Cu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${Lt}.pmtiles`,$$slots:{default:[Iu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let Lt="bus_stops",Ou="Bus stops";function Pu(s,e,l){let t,n=x.sequential_low_to_high,r=[0,3,10,20,30,100],i=$e(Lt);Y(s,i,o=>l(0,t=o));function f(o){t=o,i.set(t)}return[t,n,r,i,f]}class ju extends K{constructor(e){super(),X(this,e,Pu,Nu,J,{})}}function Ru(s){let e;return{c(){e=y("crossing")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Du(s){let e,l,t,n,r,i,f,o;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Ru]},$$scope:{ctx:s}}}),f=new lt({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" data from OpenStreetMap (as of 9 August 2023)."),i=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),w(f,e,null),o=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){o||(_(n.$$.fragment,a),_(f.$$.fragment,a),o=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),o=!1},d(a){a&&h(e),v(n),v(f)}}}function Au(s){let e,l,t;return l=new Xt({props:{rows:s[2]}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Fu(s){let e,l=Pl(s[4])+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=Pl(n[4])+"")&&q(t,l)},d(n){n&&h(e)}}}function qu(s){let e,l;return e=new ae({props:{$$slots:{default:[Fu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Gu(s){let e,l;const t=[G(Mt),{sourceLayer:Mt},{paint:{"circle-color":nt(["get","crossing"],{traffic_signals:x.signalized_crossing},x.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:s[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[qu]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ft({props:n}),e.$on("click",Eu),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&1?re(t,[i&0&&se(G(Mt)),i&0&&{sourceLayer:Mt},t[2],i&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};i&32&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function zu(s){let e,l,t,n,r;function i(o){s[3](o)}let f={name:Mt,title:Hu,$$slots:{controls:[Au],help:[Du]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${Mt}.pmtiles`,$$slots:{default:[Gu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let Mt="crossings",Hu="Crossings";function Pl(s){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[s.crossing]??`Unknown crossing type (${s.crossing})`}function Eu(s){window.open(`http://openstreetmap.org/node/${s.detail.features[0].properties.osm_id}`,"_blank")}function Bu(s,e,l){let t,n=$e(Mt);Y(s,n,f=>l(0,t=f));let r=[["Signalized",x.signalized_crossing],["Other",x.other_crossing]];function i(f){t=f,n.set(t)}return[t,n,r,i]}class Uu extends K{constructor(e){super(),X(this,e,Bu,zu,J,{})}}function Wu(s){let e;return{c(){e=y("OS Terrain 50")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Yu(s){let e,l,t,n,r,i,f,o,a,u,c,p,m,k;return o=new le({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Wu]},$$scope:{ctx:s}}}),c=new Ce({}),m=new lt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=S("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),i=S("p"),f=y("This layer is built from "),b(o.$$.fragment),a=y(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),b(c.$$.fragment),p=L(),b(m.$$.fragment),F(e,"slot","help")},m(C,T){d(C,e,T),$(e,l),$(e,t),$(e,n),$(e,r),$(e,i),$(i,f),w(o,i,null),$(i,a),$(e,u),w(c,e,null),$(e,p),w(m,e,null),k=!0},p(C,T){const O={};T&64&&(O.$$scope={dirty:T,ctx:C}),o.$set(O)},i(C){k||(_(o.$$.fragment,C),_(c.$$.fragment,C),_(m.$$.fragment,C),k=!0)},o(C){g(o.$$.fragment,C),g(c.$$.fragment,C),g(m.$$.fragment,C),k=!1},d(C){C&&h(e),v(o),v(c),v(m)}}}function Ju(s){let e,l,t;return l=new De({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Vu(s){let e,l,t,n=Math.abs(s[5].gradient)/100+"",r,i;return{c(){e=S("p"),l=y("Gradient: "),t=S("b"),r=y(n),i=y(`
        %`)},m(f,o){d(f,e,o),$(e,l),$(e,t),$(t,r),$(e,i)},p(f,o){o&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&q(r,n)},d(f){f&&h(e)}}}function Qu(s){let e,l;return e=new ae({props:{$$slots:{default:[Vu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Zu(s){let e,l,t,n;const r=[G(Ue),{sourceLayer:Ue},{manageHoverState:!0},{paint:{"line-color":_e(["/",["abs",["get","gradient"]],100],s[2],s[1]),"line-width":je,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let i={$$slots:{default:[Qu]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)i=ne(i,r[a]);e=new me({props:i});const f=[G(Ue+"_arrows"),{sourceLayer:Ue},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:s[0]?"visible":"none"}}];let o={};for(let a=0;a<f.length;a+=1)o=ne(o,f[a]);return t=new Ln({props:o}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?re(r,[u&0&&se(G(Ue)),u&0&&{sourceLayer:Ue},r[2],u&6&&{paint:{"line-color":_e(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":je,"line-opacity":te(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?re(f,[u&0&&se(G(Ue+"_arrows")),u&0&&{sourceLayer:Ue},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(_(e.$$.fragment,a),_(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ku(s){let e,l,t,n,r;function i(o){s[4](o)}let f={name:Ue,title:Xu,$$slots:{controls:[Ju],help:[Yu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${Ue}.pmtiles`,$$slots:{default:[Zu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let Ue="gradient",Xu="Gradients";function xu(s,e,l){let t,n=x.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],i=$e(Ue);Y(s,i,o=>l(0,t=o));function f(o){t=o,i.set(t)}return[t,n,r,i,f]}class ec extends K{constructor(e){super(),X(this,e,xu,Ku,J,{})}}function tc(s){let e,l;return{c(){e=S("img"),F(e,"slot","icon"),tn(e.src,l=zr)||F(e,"src",l),F(e,"alt","a logo representing cycle parking")},m(t,n){d(t,e,n)},p:Q,d(t){t&&h(e)}}}function nc(s){let e;return{c(){e=y("OpenStreetMap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function lc(s){let e;return{c(){e=y("OpenStreetMap Carto")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rc(s){let e,l,t,n,r,i,f,o,a,u,c,p;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[nc]},$$scope:{ctx:s}}}),a=new le({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[lc]},$$scope:{ctx:s}}}),c=new lt({}),{c(){e=S("span"),l=S("p"),t=y("Cycle parking, according to "),b(n.$$.fragment),r=y(` (as of 9 August 2023). The type of parking, public/private
      access, and whether it's covered are not shown.`),i=L(),f=S("p"),o=y("Icon from "),b(a.$$.fragment),u=L(),b(c.$$.fragment),F(e,"slot","help")},m(m,k){d(m,e,k),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),$(e,f),$(f,o),w(a,f,null),$(e,u),w(c,e,null),p=!0},p(m,k){const C={};k&16&&(C.$$scope={dirty:k,ctx:m}),n.$set(C);const T={};k&16&&(T.$$scope={dirty:k,ctx:m}),a.$set(T)},i(m){p||(_(n.$$.fragment,m),_(a.$$.fragment,m),_(c.$$.fragment,m),p=!0)},o(m){g(n.$$.fragment,m),g(a.$$.fragment,m),g(c.$$.fragment,m),p=!1},d(m){m&&h(e),v(n),v(a),v(c)}}}function sc(s){let e,l,t,n=(s[3].capacity??"unknown")+"",r;return{c(){e=S("p"),l=y("Capacity: "),t=S("b"),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(t,r)},p(i,f){f&8&&n!==(n=(i[3].capacity??"unknown")+"")&&q(r,n)},d(i){i&&h(e)}}}function oc(s){let e,l;return e=new ae({props:{$$slots:{default:[sc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ic(s){let e,l;const t=[G(It),{sourceLayer:It},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[oc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ln({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&1?re(t,[i&0&&se(G(It)),i&0&&{sourceLayer:It},i&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};i&16&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ac(s){let e,l,t,n,r;function i(o){s[2](o)}let f={name:It,title:fc,$$slots:{help:[rc],icon:[tc]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${It}.pmtiles`,$$slots:{default:[ic]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let It="cycle_parking",fc="Cycle parking";function uc(s,e,l){let t,n=$e(It);Y(s,n,i=>l(0,t=i));function r(i){t=i,n.set(t)}return[t,n,r]}class cc extends K{constructor(e){super(),X(this,e,uc,ac,J,{})}}function $c(s){let e,l,t,n,r;return n=new lt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      07 February 2024).`,t=L(),b(n.$$.fragment),F(e,"slot","help")},m(i,f){d(i,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:Q,i(i){r||(_(n.$$.fragment,i),r=!0)},o(i){g(n.$$.fragment,i),r=!1},d(i){i&&h(e),v(n)}}}function pc(s){let e,l,t;return e=new Se({props:{color:x.education.schools}}),{c(){b(e.$$.fragment),l=y(`
        Schools`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function mc(s){let e,l,t;return e=new Se({props:{color:x.education.colleges}}),{c(){b(e.$$.fragment),l=y(`
        Colleges`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function _c(s){let e,l,t;return e=new Se({props:{color:x.education.universities}}),{c(){b(e.$$.fragment),l=y(`
        Universities`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function gc(s){let e,l,t,n,r,i,f,o,a;function u(T){s[3](T)}let c={$$slots:{default:[pc]},$$scope:{ctx:s}};s[0].school!==void 0&&(c.checked=s[0].school),e=new We({props:c}),H.push(()=>E(e,"checked",u));function p(T){s[4](T)}let m={$$slots:{default:[mc]},$$scope:{ctx:s}};s[0].college!==void 0&&(m.checked=s[0].college),n=new We({props:m}),H.push(()=>E(n,"checked",p));function k(T){s[5](T)}let C={$$slots:{default:[_c]},$$scope:{ctx:s}};return s[0].university!==void 0&&(C.checked=s[0].university),f=new We({props:C}),H.push(()=>E(f,"checked",k)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),i=L(),b(f.$$.fragment)},m(T,O){w(e,T,O),d(T,t,O),w(n,T,O),d(T,i,O),w(f,T,O),a=!0},p(T,O){const D={};O&2048&&(D.$$scope={dirty:O,ctx:T}),!l&&O&1&&(l=!0,D.checked=T[0].school,B(()=>l=!1)),e.$set(D);const P={};O&2048&&(P.$$scope={dirty:O,ctx:T}),!r&&O&1&&(r=!0,P.checked=T[0].college,B(()=>r=!1)),n.$set(P);const M={};O&2048&&(M.$$scope={dirty:O,ctx:T}),!o&&O&1&&(o=!0,M.checked=T[0].university,B(()=>o=!1)),f.$set(M)},i(T){a||(_(e.$$.fragment,T),_(n.$$.fragment,T),_(f.$$.fragment,T),a=!0)},o(T){g(e.$$.fragment,T),g(n.$$.fragment,T),g(f.$$.fragment,T),a=!1},d(T){T&&(h(t),h(i)),v(e,T),v(n,T),v(f,T)}}}function dc(s){let e,l,t;return l=new Ye({props:{small:!0,$$slots:{default:[gc]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const i={};r&2049&&(i.$$scope={dirty:r,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function hc(s){let e,l=(s[10].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&q(t,l)},d(n){n&&h(e)}}}function bc(s){let e,l;return e=new ae({props:{$$slots:{default:[hc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function wc(s){let e,l;const t=[G(Nt),{sourceLayer:Nt},{paint:{"fill-color":nt(["get","type"],{school:x.education.schools,college:x.education.colleges,university:x.education.universities},"grey"),"fill-opacity":te(.7,1)}},{layout:{visibility:s[0].show?"visible":"none"}},{filter:s[2](s[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[bc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&5?re(t,[i&0&&se(G(Nt)),i&0&&{sourceLayer:Nt},t[2],i&1&&{layout:{visibility:r[0].show?"visible":"none"}},i&5&&{filter:r[2](r[0])},t[5],t[6]]):{};i&2048&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function vc(s){let e,l,t,n,r;function i(o){s[6](o)}let f={name:Nt,title:kc,bigControls:!0,$$slots:{controls:[dc],help:[$c]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${Nt}.pmtiles`,$$slots:{default:[wc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let Nt="education",kc="Education";function yc(s){return{show:!0,school:s.includes("school"),college:s.includes("college"),university:s.includes("university")}}function Sc(s,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function i(m){return m.show?n.filter(k=>m[k]).join(","):null}let f=Gt(Nt,r,i,yc);Y(s,f,m=>l(0,t=m));function o(m){let k=n.filter(C=>m[C]);return["in",["get","type"],["literal",k]]}function a(m){s.$$.not_equal(t.school,m)&&(t.school=m,f.set(t))}function u(m){s.$$.not_equal(t.college,m)&&(t.college=m,f.set(t))}function c(m){s.$$.not_equal(t.university,m)&&(t.university=m,f.set(t))}function p(m){s.$$.not_equal(t.show,m)&&(t.show=m,f.set(t))}return[t,f,o,a,u,c,p]}class Cc extends K{constructor(e){super(),X(this,e,Sc,vc,J,{})}}function Tc(s){let e,l,t;return l=new Se({props:{color:x.hospitals}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Lc(s){let e;return{c(){e=y("hospital")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Mc(s){let e,l,t,n,r,i,f,o;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Lc]},$$scope:{ctx:s}}}),f=new lt({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
      outpatient clinics or individual doctor's offices.`),i=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),w(f,e,null),o=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){o||(_(n.$$.fragment,a),_(f.$$.fragment,a),o=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),o=!1},d(a){a&&h(e),v(n),v(f)}}}function Ic(s){let e,l=(s[3].name??"Unnamed hospital")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&q(t,l)},d(n){n&&h(e)}}}function Nc(s){let e,l;return e=new ae({props:{$$slots:{default:[Ic,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Oc(s){let e,l;const t=[G(Ot),{sourceLayer:Ot},{paint:{"fill-color":x.hospitals,"fill-opacity":te(.7,1)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Nc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&1?re(t,[i&0&&se(G(Ot)),i&0&&{sourceLayer:Ot},t[2],i&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Pc(s){let e,l,t,n,r;function i(o){s[2](o)}let f={name:Ot,title:jc,$$slots:{help:[Mc],icon:[Tc]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${Ot}.pmtiles`,$$slots:{default:[Oc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let Ot="hospitals",jc="Hospitals";function Rc(s,e,l){let t,n=$e(Ot);Y(s,n,i=>l(0,t=i));function r(i){t=i,n.set(t)}return[t,n,r]}class Dc extends K{constructor(e){super(),X(this,e,Rc,Pc,J,{})}}function Ac(s){let e,l;return{c(){e=S("img"),F(e,"slot","icon"),tn(e.src,l=Hr)||F(e,"src",l),F(e,"alt","A logo representing a train")},m(t,n){d(t,e,n)},p:Q,d(t){t&&h(e)}}}function Fc(s){let e;return{c(){e=y("railway station")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function qc(s){let e;return{c(){e=y(`National Rail
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Gc(s){let e,l,t,n,r,i,f,o,a,u,c,p,m;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Fc]},$$scope:{ctx:s}}}),a=new le({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[qc]},$$scope:{ctx:s}}}),p=new lt({}),{c(){e=S("div"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" data from OpenStreetMap (as of 9 August 2023)."),i=L(),f=S("p"),o=y("Icon from "),b(a.$$.fragment),u=y(". (Note that not all stations shown are National Rail.)"),c=L(),b(p.$$.fragment),F(e,"slot","help")},m(k,C){d(k,e,C),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),$(e,f),$(f,o),w(a,f,null),$(f,u),$(e,c),w(p,e,null),m=!0},p(k,C){const T={};C&16&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const O={};C&16&&(O.$$scope={dirty:C,ctx:k}),a.$set(O)},i(k){m||(_(n.$$.fragment,k),_(a.$$.fragment,k),_(p.$$.fragment,k),m=!0)},o(k){g(n.$$.fragment,k),g(a.$$.fragment,k),g(p.$$.fragment,k),m=!1},d(k){k&&h(e),v(n),v(a),v(p)}}}function zc(s){let e,l=(s[3].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&q(t,l)},d(n){n&&h(e)}}}function Hc(s){let e,l;return e=new ae({props:{$$slots:{default:[zc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ec(s){let e,l;const t=[G(Zt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[Hc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ln({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&1?re(t,[i&0&&se(G(Zt)),i&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};i&16&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Bc(s){let e,l,t,n,r;function i(o){s[2](o)}let f={name:Zt,title:Uc,$$slots:{help:[Gc],icon:[Ac]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new qt({props:{data:`${ue()}/v1/${Zt}.geojson`,$$slots:{default:[Ec]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let Zt="railway_stations",Uc="Railway stations";function Wc(s,e,l){let t,n=$e(Zt);Y(s,n,i=>l(0,t=i));function r(i){t=i,n.set(t)}return[t,n,r]}class Yc extends K{constructor(e){super(),X(this,e,Wc,Bc,J,{})}}function Jc(s){let e,l,t;return l=new Se({props:{color:x.sports_spaces}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Vc(s){let e;return{c(){e=y("sports pitches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Qc(s){let e;return{c(){e=y("sports centres")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Zc(s){let e,l,t,n,r,i,f,o,a,u;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Vc]},$$scope:{ctx:s}}}),i=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Qc]},$$scope:{ctx:s}}}),a=new lt({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" and "),b(i.$$.fragment),f=y(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),w(i,l,null),$(l,f),$(e,o),w(a,e,null),u=!0},p(c,p){const m={};p&16&&(m.$$scope={dirty:p,ctx:c}),n.$set(m);const k={};p&16&&(k.$$scope={dirty:p,ctx:c}),i.$set(k)},i(c){u||(_(n.$$.fragment,c),_(i.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(i.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(i),v(a)}}}function Kc(s){let e,l=(s[3].name??"Unnamed sports space")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&q(t,l)},d(n){n&&h(e)}}}function Xc(s){let e,l;return e=new ae({props:{$$slots:{default:[Kc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function xc(s){let e,l;const t=[G(Pt),{sourceLayer:Pt},{paint:{"fill-color":x.sports_spaces,"fill-opacity":te(.7,1)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Xc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&1?re(t,[i&0&&se(G(Pt)),i&0&&{sourceLayer:Pt},t[2],i&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function e$(s){let e,l,t,n,r;function i(o){s[2](o)}let f={name:Pt,title:t$,$$slots:{help:[Zc],icon:[Jc]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${Pt}.pmtiles`,$$slots:{default:[xc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let Pt="sports_spaces",t$="Sports spaces";function n$(s,e,l){let t,n=$e(Pt);Y(s,n,i=>l(0,t=i));function r(i){t=i,n.set(t)}return[t,n,r]}class l$ extends K{constructor(e){super(),X(this,e,n$,e$,J,{})}}function r$(s){let e;return{c(){e=y("DfT stats19")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function s$(s){let e;return{c(){e=y("documented by DfT")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function o$(s){let e,l,t,n,r,i,f,o,a,u,c,p,m,k,C,T,O,D,P,M,N,I,R,j;return n=new le({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[r$]},$$scope:{ctx:s}}}),D=new le({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[s$]},$$scope:{ctx:s}}}),R=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("This layer shows collisions recorded in the "),b(n.$$.fragment),r=y(" dataset. Please note these limitations:"),i=L(),f=S("ul"),o=S("li"),o.textContent="Only collisions between 2017 and 2022 are included",a=L(),u=S("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),p=S("li"),p.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,m=L(),k=S("li"),k.textContent='The "pedestrians" category also include mobility scooters',C=L(),T=S("li"),O=y("All limitations "),b(D.$$.fragment),P=y(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),M=L(),N=S("p"),N.textContent="You can click a point to open the full report, thanks to CycleStreets.",I=L(),b(R.$$.fragment),F(e,"slot","help")},m(z,Z){d(z,e,Z),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,i),$(e,f),$(f,o),$(f,a),$(f,u),$(f,c),$(f,p),$(f,m),$(f,k),$(f,C),$(f,T),$(T,O),w(D,T,null),$(T,P),$(e,M),$(e,N),$(e,I),w(R,e,null),j=!0},p(z,Z){const ie={};Z&4194304&&(ie.$$scope={dirty:Z,ctx:z}),n.$set(ie);const A={};Z&4194304&&(A.$$scope={dirty:Z,ctx:z}),D.$set(A)},i(z){j||(_(n.$$.fragment,z),_(D.$$.fragment,z),_(R.$$.fragment,z),j=!0)},o(z){g(n.$$.fragment,z),g(D.$$.fragment,z),g(R.$$.fragment,z),j=!1},d(z){z&&h(e),v(n),v(D),v(R)}}}function i$(s){let e;return{c(){e=y("Pedestrians")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function a$(s){let e;return{c(){e=y("Cyclists")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function f$(s){let e;return{c(){e=y("Horse riders")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function u$(s){let e;return{c(){e=y("Other")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function c$(s){let e,l,t,n,r,i,f,o,a,u,c,p;function m(N){s[10](N)}let k={$$slots:{default:[i$]},$$scope:{ctx:s}};s[0].pedestrians!==void 0&&(k.checked=s[0].pedestrians),e=new We({props:k}),H.push(()=>E(e,"checked",m));function C(N){s[11](N)}let T={$$slots:{default:[a$]},$$scope:{ctx:s}};s[0].cyclists!==void 0&&(T.checked=s[0].cyclists),n=new We({props:T}),H.push(()=>E(n,"checked",C));function O(N){s[12](N)}let D={$$slots:{default:[f$]},$$scope:{ctx:s}};s[0].horseRiders!==void 0&&(D.checked=s[0].horseRiders),f=new We({props:D}),H.push(()=>E(f,"checked",O));function P(N){s[13](N)}let M={$$slots:{default:[u$]},$$scope:{ctx:s}};return s[0].other!==void 0&&(M.checked=s[0].other),u=new We({props:M}),H.push(()=>E(u,"checked",P)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),i=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment)},m(N,I){w(e,N,I),d(N,t,I),w(n,N,I),d(N,i,I),w(f,N,I),d(N,a,I),w(u,N,I),p=!0},p(N,I){const R={};I&4194304&&(R.$$scope={dirty:I,ctx:N}),!l&&I&1&&(l=!0,R.checked=N[0].pedestrians,B(()=>l=!1)),e.$set(R);const j={};I&4194304&&(j.$$scope={dirty:I,ctx:N}),!r&&I&1&&(r=!0,j.checked=N[0].cyclists,B(()=>r=!1)),n.$set(j);const z={};I&4194304&&(z.$$scope={dirty:I,ctx:N}),!o&&I&1&&(o=!0,z.checked=N[0].horseRiders,B(()=>o=!1)),f.$set(z);const Z={};I&4194304&&(Z.$$scope={dirty:I,ctx:N}),!c&&I&1&&(c=!0,Z.checked=N[0].other,B(()=>c=!1)),u.$set(Z)},i(N){p||(_(e.$$.fragment,N),_(n.$$.fragment,N),_(f.$$.fragment,N),_(u.$$.fragment,N),p=!0)},o(N){g(e.$$.fragment,N),g(n.$$.fragment,N),g(f.$$.fragment,N),g(u.$$.fragment,N),p=!1},d(N){N&&(h(t),h(i),h(a)),v(e,N),v(n,N),v(f,N),v(u,N)}}}function $$(s){let e,l,t,n,r,i,f,o,a,u,c,p,m;return l=new Ye({props:{small:!0,$$slots:{default:[c$]},$$scope:{ctx:s}}}),u=new Xt({props:{rows:s[9]}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),n=S("div"),r=y(`Filter years:
      `),i=S("input"),f=y(`
      -
      `),o=S("input"),a=L(),b(u.$$.fragment),F(i,"type","number"),F(i,"min",2017),F(i,"max",2022),F(i,"class","svelte-1ft65rw"),F(o,"type","number"),F(o,"min",2017),F(o,"max",2022),F(o,"class","svelte-1ft65rw"),F(e,"slot","controls")},m(k,C){d(k,e,C),w(l,e,null),$(e,t),$(e,n),$(n,r),$(n,i),Ve(i,s[0].minYear),$(n,f),$(n,o),Ve(o,s[0].maxYear),$(e,a),w(u,e,null),c=!0,p||(m=[it(i,"input",s[14]),it(o,"input",s[15])],p=!0)},p(k,C){const T={};C&4194305&&(T.$$scope={dirty:C,ctx:k}),l.$set(T),C&1&&Qt(i.value)!==k[0].minYear&&Ve(i,k[0].minYear),C&1&&Qt(o.value)!==k[0].maxYear&&Ve(o,k[0].maxYear)},i(k){c||(_(l.$$.fragment,k),_(u.$$.fragment,k),c=!0)},o(k){g(l.$$.fragment,k),g(u.$$.fragment,k),c=!1},d(k){k&&h(e),v(l),v(u),p=!1,Lr(m)}}}function jl(s){let e,l,t,n=s[3][s[21].pedestrian_location]+"",r;return{c(){e=S("p"),l=y("Pedestrian location: "),t=S("b"),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(t,r)},p(i,f){f&2097152&&n!==(n=i[3][i[21].pedestrian_location]+"")&&q(r,n)},d(i){i&&h(e)}}}function Rl(s){let e,l,t,n=s[4][s[21].pedestrian_movement]+"",r;return{c(){e=S("p"),l=y("Pedestrian movement: "),t=S("b"),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(t,r)},p(i,f){f&2097152&&n!==(n=i[4][i[21].pedestrian_movement]+"")&&q(r,n)},d(i){i&&h(e)}}}function p$(s){let e,l,t,n=s[21].year+"",r,i,f,o,a,u=s[5][s[21].severity]+"",c,p,m,k,C,T=Dl(s[21])+"",O,D,P,M,N,I=s[21].pedestrian_location&&jl(s),R=s[21].pedestrian_movement&&Rl(s);return{c(){e=S("p"),l=y("Year: "),t=S("b"),r=y(n),i=L(),f=S("p"),o=y("Severity: "),a=S("b"),c=y(u),p=L(),m=S("p"),k=y("Casualties: "),C=S("b"),O=y(T),D=L(),I&&I.c(),P=L(),R&&R.c(),M=L(),N=S("p"),N.textContent="Click to open full report in CycleStreets"},m(j,z){d(j,e,z),$(e,l),$(e,t),$(t,r),d(j,i,z),d(j,f,z),$(f,o),$(f,a),$(a,c),d(j,p,z),d(j,m,z),$(m,k),$(m,C),$(C,O),d(j,D,z),I&&I.m(j,z),d(j,P,z),R&&R.m(j,z),d(j,M,z),d(j,N,z)},p(j,z){z&2097152&&n!==(n=j[21].year+"")&&q(r,n),z&2097152&&u!==(u=j[5][j[21].severity]+"")&&q(c,u),z&2097152&&T!==(T=Dl(j[21])+"")&&q(O,T),j[21].pedestrian_location?I?I.p(j,z):(I=jl(j),I.c(),I.m(P.parentNode,P)):I&&(I.d(1),I=null),j[21].pedestrian_movement?R?R.p(j,z):(R=Rl(j),R.c(),R.m(M.parentNode,M)):R&&(R.d(1),R=null)},d(j){j&&(h(e),h(i),h(f),h(p),h(m),h(D),h(P),h(M),h(N)),I&&I.d(j),R&&R.d(j)}}}function m$(s){let e,l;return e=new ae({props:{$$slots:{default:[p$,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function _$(s){let e,l;const t=[G(jt),{sourceLayer:jt},{paint:{"circle-color":_e(["get","severity"],[1,2,3],[s[6],s[7],s[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:s[1]},{layout:{visibility:s[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[m$]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ft({props:n}),e.$on("click",b$),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&451?re(t,[i&0&&se(G(jt)),i&0&&{sourceLayer:jt},i&448&&{paint:{"circle-color":_e(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&2&&{filter:r[1]},i&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};i&4194304&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function g$(s){let e,l,t,n,r;function i(o){s[16](o)}let f={name:jt,title:d$,bigControls:!0,$$slots:{controls:[$$],help:[o$]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${jt}.pmtiles`,$$slots:{default:[_$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0].show,B(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let jt="stats19",d$="Stats19";function h$(s){let[e,l,t]=s.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Dl(s){let e=[];return s.pedestrian&&e.push("pedestrian"),s.cyclist&&e.push("cyclist"),s.horse_rider&&e.push("horse rider"),s.other&&e.push("other"),e.join(", ")}function b$(s){window.open(`https://www.cyclestreets.net/collisions/reports/${s.detail.features[0].properties.accident_index}`,"_blank")}function w$(s,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],i={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function f(j){return j.show?`${r.filter(Z=>j[Z]).join(",")}/${j.minYear}/${j.maxYear}`:null}let o=Gt(jt,i,f,h$);Y(s,o,j=>l(0,n=j));function a(j,z,Z,ie,A,ee){let V=["any"];return n.pedestrians&&V.push(["get","pedestrian"]),n.cyclists&&V.push(["get","cyclist"]),n.horseRiders&&V.push(["get","horse_rider"]),n.other&&V.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],V]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},p={1:"Fatal",2:"Serious",3:"Slight"},m=x.sequential_low_to_high[4],k=x.sequential_low_to_high[2],C=x.sequential_low_to_high[0],T=[["Fatal",m],["Serious",k],["Slight",C]];function O(j){s.$$.not_equal(n.pedestrians,j)&&(n.pedestrians=j,o.set(n))}function D(j){s.$$.not_equal(n.cyclists,j)&&(n.cyclists=j,o.set(n))}function P(j){s.$$.not_equal(n.horseRiders,j)&&(n.horseRiders=j,o.set(n))}function M(j){s.$$.not_equal(n.other,j)&&(n.other=j,o.set(n))}function N(){n.minYear=Qt(this.value),o.set(n)}function I(){n.maxYear=Qt(this.value),o.set(n)}function R(j){s.$$.not_equal(n.show,j)&&(n.show=j,o.set(n))}return s.$$.update=()=>{s.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,o,u,c,p,m,k,C,T,O,D,P,M,N,I,R]}class v$ extends K{constructor(e){super(),X(this,e,w$,g$,J,{})}}function k$(s){let e;return{c(){e=y(`DfT road statistics
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function y$(s){let e;return{c(){e=y("methodology")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function S$(s){let e,l,t,n,r,i,f,o,a,u,c,p;return n=new le({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[k$]},$$scope:{ctx:s}}}),i=new le({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[y$]},$$scope:{ctx:s}}}),c=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("AADF (annual average daily flow) data from "),b(n.$$.fragment),r=y(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),b(i.$$.fragment),f=y(" for details and caveats about the measurements."),o=L(),a=S("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),b(c.$$.fragment),F(e,"slot","help")},m(m,k){d(m,e,k),$(e,l),$(l,t),w(n,l,null),$(l,r),w(i,l,null),$(l,f),$(e,o),$(e,a),$(e,u),w(c,e,null),p=!0},p(m,k){const C={};k&128&&(C.$$scope={dirty:k,ctx:m}),n.$set(C);const T={};k&128&&(T.$$scope={dirty:k,ctx:m}),i.$set(T)},i(m){p||(_(n.$$.fragment,m),_(i.$$.fragment,m),_(c.$$.fragment,m),p=!0)},o(m){g(n.$$.fragment,m),g(i.$$.fragment,m),g(c.$$.fragment,m),p=!1},d(m){m&&h(e),v(n),v(i),v(c)}}}function C$(s){let e,l,t;return l=new De({props:{colorScale:s[1],limits:s[3]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function T$(s){let e,l=s[6].location+"",t,n,r,i,f=s[6].year+"",o,a,u,c=s[6].motor_vehicles.toLocaleString()+"",p,m,k,C,T=s[6].year+"",O,D,P,M=s[6].pedal_cycles.toLocaleString()+"",N,I,R,j,z,Z=s[6].method+"",ie;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),i=y("Total motor vehicles ("),o=y(f),a=y(` AADF):
        `),u=S("b"),p=y(c),m=L(),k=S("p"),C=y("Total pedal cycles ("),O=y(T),D=y(` AADF):
        `),P=S("b"),N=y(M),I=L(),R=S("p"),j=y("Count method: "),z=S("b"),ie=y(Z)},m(A,ee){d(A,e,ee),$(e,t),d(A,n,ee),d(A,r,ee),$(r,i),$(r,o),$(r,a),$(r,u),$(u,p),d(A,m,ee),d(A,k,ee),$(k,C),$(k,O),$(k,D),$(k,P),$(P,N),d(A,I,ee),d(A,R,ee),$(R,j),$(R,z),$(z,ie)},p(A,ee){ee&64&&l!==(l=A[6].location+"")&&q(t,l),ee&64&&f!==(f=A[6].year+"")&&q(o,f),ee&64&&c!==(c=A[6].motor_vehicles.toLocaleString()+"")&&q(p,c),ee&64&&T!==(T=A[6].year+"")&&q(O,T),ee&64&&M!==(M=A[6].pedal_cycles.toLocaleString()+"")&&q(N,M),ee&64&&Z!==(Z=A[6].method+"")&&q(ie,Z)},d(A){A&&(h(e),h(n),h(r),h(m),h(k),h(I),h(R))}}}function L$(s){let e,l;return e=new ae({props:{$$slots:{default:[T$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function M$(s){let e,l;const t=[G(Rt),{sourceLayer:Rt},{paint:{"circle-color":_e(["get","motor_vehicles"],s[2],s[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:s[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[L$]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ft({props:n}),e.$on("click",O$),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&7?re(t,[i&0&&se(G(Rt)),i&0&&{sourceLayer:Rt},i&6&&{paint:{"circle-color":_e(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},i&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};i&128&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function I$(s){let e,l,t,n,r;function i(o){s[5](o)}let f={name:Rt,title:N$,$$slots:{controls:[C$],help:[S$]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new ce({props:{url:`pmtiles://${ue()}/v1/${Rt}.pmtiles`,$$slots:{default:[M$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let Rt="vehicle_counts",N$="Vehicle counts";function O$(s){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${s.detail.features[0].properties.count_point}`,"_blank")}function P$(s,e,l){let t,n=x.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],i=["","40k","80k","120k","160k",""],f=$e(Rt);Y(s,f,a=>l(0,t=a));function o(a){t=a,f.set(t)}return[t,n,r,i,f,o]}class j$ extends K{constructor(e){super(),X(this,e,P$,I$,J,{})}}function Al(s,e,l){const t=s.slice();return t[6]=e[l],t}function R$(s){let e;return{c(){e=S("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,F(e,"slot","help")},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function D$(s){let e,l,t;return l=new Xt({props:{rows:s[3]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function A$(s){let e,l=s[5]["Issue ID"]+"",t,n,r=s[5].Code+"",i,f,o,a=s[5]["Issue Stage"]+"",u;return{c(){e=S("h2"),t=y(l),n=y(" - "),i=y(r),f=L(),o=S("p"),u=y(a)},m(c,p){d(c,e,p),$(e,t),$(e,n),$(e,i),d(c,f,p),d(c,o,p),$(o,u)},p(c,p){p&32&&l!==(l=c[5]["Issue ID"]+"")&&q(t,l),p&32&&r!==(r=c[5].Code+"")&&q(i,r),p&32&&a!==(a=c[5]["Issue Stage"]+"")&&q(u,a)},d(c){c&&(h(e),h(f),h(o))}}}function Fl(s){let e,l=s[6]+"",t,n,r,i=s[5][s[6]]+"",f,o;return{c(){e=S("p"),t=y(l),n=y(`:
            `),r=S("b"),f=y(i),o=L()},m(a,u){d(a,e,u),$(e,t),$(e,n),$(e,r),$(r,f),$(e,o)},p(a,u){u&32&&i!==(i=a[5][a[6]]+"")&&q(f,i)},d(a){a&&h(e)}}}function F$(s){let e,l=we(s[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Fl(Al(s,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();pe(e,"max-width","30vw"),pe(e,"max-height","60vh"),pe(e,"overflow","auto")},m(n,r){d(n,e,r);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(n,r){if(r&36){l=we(n[2]);let i;for(i=0;i<l.length;i+=1){const f=Al(n,l,i);t[i]?t[i].p(f,r):(t[i]=Fl(f),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(n){n&&h(e),et(t,n)}}}function q$(s){let e,l,t,n;return e=new ae({props:{openOn:"hover",$$slots:{default:[A$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:s}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[F$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,i){w(e,r,i),d(r,l,i),w(t,r,i),n=!0},p(r,i){const f={};i&544&&(f.$$scope={dirty:i,ctx:r}),e.$set(f);const o={};i&544&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function G$(s){let e,l;const t=[G(rn),{paint:{"circle-color":nt(["get","Design Review Status"],Object.fromEntries(s[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:s[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[q$]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ft({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&9?re(t,[i&0&&se(G(rn)),i&8&&{paint:{"circle-color":nt(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};i&512&&(f.$$scope={dirty:i,ctx:r}),e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function z$(s){let e,l,t,n,r;function i(o){s[4](o)}let f={name:rn,title:H$,bigControls:!0,$$slots:{controls:[D$],help:[R$]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new fe({props:f}),H.push(()=>E(e,"show",i)),n=new qt({props:{data:`${Kt()}/v1/problems.geojson.gz`,$$slots:{default:[G$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:o}),!l&&a&1&&(l=!0,u.show=o[0],B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:o}),n.$set(c)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}let rn="problems",H$="Issues & Conflicts";function E$(s,e,l){let t,n=$e(rn);Y(s,n,o=>l(0,t=o));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],i=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(o){t=o,n.set(t)}return[t,n,r,i,f]}class B$ extends K{constructor(e){super(),X(this,e,E$,z$,J,{})}}function U$(s){let e;function l(r,i){return r[2]<=100?J$:Y$}let t=l(s),n=t(s);return{c(){n.c(),e=ve()},m(r,i){n.m(r,i),d(r,e,i)},p(r,i){t===(t=l(r))&&n?n.p(r,i):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:Q,o:Q,d(r){r&&h(e),n.d(r)}}}function W$(s){let e,l;return e=new tt({props:{$$slots:{default:[V$]},$$scope:{ctx:s}}}),e.$on("click",s[3]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Y$(s){let e;return{c(){e=S("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function J$(s){let e,l,t;return{c(){e=S("label"),l=y(`Downloading scheme data
      `),t=S("progress"),t.value=s[2],F(t,"class","svelte-q3473n")},m(n,r){d(n,e,r),$(e,l),$(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&h(e)}}}function V$(s){let e;return{c(){e=y("Load latest scheme data")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Q$(s){let e,l,t,n;const r=[W$,U$],i=[];function f(o,a){return o[0]?o[1]?1:-1:0}return~(e=f(s))&&(l=i[e]=r[e](s)),{c(){l&&l.c(),t=ve()},m(o,a){~e&&i[e].m(o,a),d(o,t,a),n=!0},p(o,[a]){let u=e;e=f(o),e===u?~e&&i[e].p(o,a):(l&&(de(),g(i[u],1,1,()=>{i[u]=null}),he()),~e?(l=i[e],l?l.p(o,a):(l=i[e]=r[e](o),l.c()),_(l,1),l.m(t.parentNode,t)):l=null)},i(o){n||(_(l),n=!0)},o(o){g(l),n=!1},d(o){o&&h(t),~e&&i[e].d(o)}}}function Z$(s,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,i=0;async function f(){let a=await Er(`${Kt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,i=c)});l(2,i=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}Mr(async()=>{n&&await f()});async function o(){l(0,n=!0),await f()}return s.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,i,o,t]}class K$ extends K{constructor(e){super(),X(this,e,Z$,Q$,J,{loadFile:4})}}const sn=Oe({type:"FeatureCollection",features:[],schemes:{}}),dn=Oe(new Map),ql=Oe(""),Gl=Oe(""),hn=Oe({type:"FeatureCollection",features:[],schemes:{}}),bn=Oe(new Map),zl=Oe(""),Hl=Oe("");function X$(s){let e={type:"FeatureCollection",features:[],schemes:{},notes:s.notes},l=new Map,t={type:"FeatureCollection",features:[],schemes:{},notes:s.notes},n=new Map;for(let[r,i]of Object.entries(s.schemes))i.pipeline?(n.set(r,i),t.schemes[r]=i):(l.set(r,i),e.schemes[r]=i);for(let r of s.features){if(!x$(r))continue;let i=r.properties.scheme_reference,f=l.has(i),a=(f?l:n).get(i);a.browse&&(r.properties.funding_programme=a.browse.funding_programme,r.properties.current_milestone=a.browse.current_milestone);let u=f?e:t;r.id=u.features.length+1,u.features.push(r)}sn.set(e),dn.set(l),hn.set(t),bn.set(n)}function x$(s){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(s.properties.id)}let Wt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},wn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function El(s,e,l){const t=s.slice();return t[28]=e[l],t[29]=e,t[30]=l,t}function ep(s){let e;return{c(){e=y("Filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function tp(s){let e;return{c(){e=y("Reset all filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function np(s){let e,l,t,n,r,i,f,o;e=new mn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[sp]},$$scope:{ctx:s}}});function a(m){s[23](m)}let u={label:"Scheme name or reference",options:on(s[3])};s[0]!==void 0&&(u.value=s[0]),t=new Nr({props:u}),H.push(()=>E(t,"value",a));function c(m){s[24](m)}let p={label:"Authority or region",choices:s[10],emptyOption:!0};return s[4]!==void 0&&(p.value=s[4]),i=new At({props:p}),H.push(()=>E(i,"value",c)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),r=L(),b(i.$$.fragment)},m(m,k){w(e,m,k),d(m,l,k),w(t,m,k),d(m,r,k),w(i,m,k),o=!0},p(m,k){const C={};k[0]&2|k[1]&1&&(C.$$scope={dirty:k,ctx:m}),e.$set(C);const T={};k[0]&8&&(T.options=on(m[3])),!n&&k[0]&1&&(n=!0,T.value=m[0],B(()=>n=!1)),t.$set(T);const O={};k[0]&1024&&(O.choices=m[10]),!f&&k[0]&16&&(f=!0,O.value=m[4],B(()=>f=!1)),i.$set(O)},i(m){o||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(i.$$.fragment,m),o=!0)},o(m){g(e.$$.fragment,m),g(t.$$.fragment,m),g(i.$$.fragment,m),o=!1},d(m){m&&(h(l),h(r)),v(e,m),v(t,m),v(i,m)}}}function lp(s){let e,l,t,n,r,i,f,o,a,u,c,p,m,k,C,T;t=new mn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[ip]},$$scope:{ctx:s}}});function O(R){s[17](R)}let D={label:"Scheme name or reference",options:on(s[3])};s[0]!==void 0&&(D.value=s[0]),r=new Nr({props:D}),H.push(()=>E(r,"value",O));function P(R){s[18](R)}let M={label:"Authority or region",choices:s[10],emptyOption:!0};s[4]!==void 0&&(M.value=s[4]),o=new At({props:M}),H.push(()=>E(o,"value",P)),p=new mn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[up]},$$scope:{ctx:s}}});function N(R){s[20](R)}let I={label:"Current milestone",choices:s[11],emptyOption:!0};return s[6]!==void 0&&(I.value=s[6]),k=new At({props:I}),H.push(()=>E(k,"value",N)),{c(){e=S("div"),l=S("div"),b(t.$$.fragment),n=L(),b(r.$$.fragment),f=L(),b(o.$$.fragment),u=L(),c=S("div"),b(p.$$.fragment),m=L(),b(k.$$.fragment),F(l,"class","govuk-grid-column-one-half"),F(c,"class","govuk-grid-column-one-half"),F(e,"class","govuk-grid-row")},m(R,j){d(R,e,j),$(e,l),w(t,l,null),$(l,n),w(r,l,null),$(l,f),w(o,l,null),$(e,u),$(e,c),w(p,c,null),$(c,m),w(k,c,null),T=!0},p(R,j){const z={};j[0]&2|j[1]&1&&(z.$$scope={dirty:j,ctx:R}),t.$set(z);const Z={};j[0]&8&&(Z.options=on(R[3])),!i&&j[0]&1&&(i=!0,Z.value=R[0],B(()=>i=!1)),r.$set(Z);const ie={};j[0]&1024&&(ie.choices=R[10]),!a&&j[0]&16&&(a=!0,ie.value=R[4],B(()=>a=!1)),o.$set(ie);const A={};j[0]&32|j[1]&1&&(A.$$scope={dirty:j,ctx:R}),p.$set(A);const ee={};!C&&j[0]&64&&(C=!0,ee.value=R[6],B(()=>C=!1)),k.$set(ee)},i(R){T||(_(t.$$.fragment,R),_(r.$$.fragment,R),_(o.$$.fragment,R),_(p.$$.fragment,R),_(k.$$.fragment,R),T=!0)},o(R){g(t.$$.fragment,R),g(r.$$.fragment,R),g(o.$$.fragment,R),g(p.$$.fragment,R),g(k.$$.fragment,R),T=!1},d(R){R&&h(e),v(t),v(r),v(o),v(p),v(k)}}}function rp(s){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function sp(s){let e,l,t,n,r,i;return t=new tt({props:{$$slots:{default:[rp]},$$scope:{ctx:s}}}),t.$on("click",s[22]),{c(){e=S("input"),l=L(),b(t.$$.fragment),F(e,"type","text"),F(e,"class","govuk-input govuk-input--width-10"),F(e,"id","filterInterventionText")},m(f,o){d(f,e,o),Ve(e,s[1]),d(f,l,o),w(t,f,o),n=!0,r||(i=it(e,"input",s[21]),r=!0)},p(f,o){o[0]&2&&e.value!==f[1]&&Ve(e,f[1]);const a={};o[1]&1&&(a.$$scope={dirty:o,ctx:f}),t.$set(a)},i(f){n||(_(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,i()}}}function op(s){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ip(s){let e,l,t,n,r,i;return t=new tt({props:{$$slots:{default:[op]},$$scope:{ctx:s}}}),t.$on("click",s[16]),{c(){e=S("input"),l=L(),b(t.$$.fragment),F(e,"type","text"),F(e,"class","govuk-input govuk-input--width-10"),F(e,"id","filterInterventionText")},m(f,o){d(f,e,o),Ve(e,s[1]),d(f,l,o),w(t,f,o),n=!0,r||(i=it(e,"input",s[15]),r=!0)},p(f,o){o[0]&2&&e.value!==f[1]&&Ve(e,f[1]);const a={};o[1]&1&&(a.$$scope={dirty:o,ctx:f}),t.$set(a)},i(f){n||(_(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,i()}}}function ap(s){let e=s[28]+"",l,t;return{c(){l=y(e),t=L()},m(n,r){d(n,l,r),d(n,t,r)},p:Q,d(n){n&&(h(l),h(t))}}}function Bl(s){let e,l,t;function n(i){s[19](i,s[28])}let r={$$slots:{default:[ap]},$$scope:{ctx:s}};return s[5][s[28]]!==void 0&&(r.checked=s[5][s[28]]),e=new We({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(i,f){w(e,i,f),t=!0},p(i,f){s=i;const o={};f[1]&1&&(o.$$scope={dirty:f,ctx:s}),!l&&f[0]&32&&(l=!0,o.checked=s[5][s[28]],B(()=>l=!1)),e.$set(o)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function fp(s){let e,l,t=we(Object.keys(Wt)),n=[];for(let i=0;i<t.length;i+=1)n[i]=Bl(El(s,t,i));const r=i=>g(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ve()},m(i,f){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,f);d(i,e,f),l=!0},p(i,f){if(f[0]&32){t=we(Object.keys(Wt));let o;for(o=0;o<t.length;o+=1){const a=El(i,t,o);n[o]?(n[o].p(a,f),_(n[o],1)):(n[o]=Bl(a),n[o].c(),_(n[o],1),n[o].m(e.parentNode,e))}for(de(),o=t.length;o<n.length;o+=1)r(o);he()}},i(i){if(!l){for(let f=0;f<t.length;f+=1)_(n[f]);l=!0}},o(i){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(i){i&&h(e),et(n,i)}}}function up(s){let e,l;return e=new Ye({props:{small:!0,$$slots:{default:[fp]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&1&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function cp(s){let e;return{c(){e=y("Done")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $p(s){let e,l,t,n,r=s[9].interventions.toLocaleString()+"",i,f,o,a,u=s[8].size.toLocaleString()+"",c,p,m,k,C,T=Ul(s[9].totalLength).toFixed(1)+"",O,D,P,M,N,I,R,j,z,Z;M=new tt({props:{$$slots:{default:[tp]},$$scope:{ctx:s}}}),M.$on("click",s[12]);const ie=[lp,np],A=[];function ee(V,U){return V[2]=="ATF"?0:1}return I=ee(s),R=A[I]=ie[I](s),z=new Br({props:{$$slots:{default:[cp]},$$scope:{ctx:s}}}),z.$on("click",s[25]),{c(){e=S("p"),e.textContent="Showing:",l=L(),t=S("ul"),n=S("li"),i=y(r),f=y(" interventions"),o=L(),a=S("li"),c=y(u),p=y(" schemes"),m=L(),k=S("li"),C=y("total route length of "),O=y(T),D=y(" miles"),P=L(),b(M.$$.fragment),N=L(),R.c(),j=L(),b(z.$$.fragment)},m(V,U){d(V,e,U),d(V,l,U),d(V,t,U),$(t,n),$(n,i),$(n,f),$(t,o),$(t,a),$(a,c),$(a,p),$(t,m),$(t,k),$(k,C),$(k,O),$(k,D),d(V,P,U),w(M,V,U),d(V,N,U),A[I].m(V,U),d(V,j,U),w(z,V,U),Z=!0},p(V,U){(!Z||U[0]&512)&&r!==(r=V[9].interventions.toLocaleString()+"")&&q(i,r),(!Z||U[0]&256)&&u!==(u=V[8].size.toLocaleString()+"")&&q(c,u),(!Z||U[0]&512)&&T!==(T=Ul(V[9].totalLength).toFixed(1)+"")&&q(O,T);const Te={};U[1]&1&&(Te.$$scope={dirty:U,ctx:V}),M.$set(Te);let Pe=I;I=ee(V),I===Pe?A[I].p(V,U):(de(),g(A[Pe],1,1,()=>{A[Pe]=null}),he(),R=A[I],R?R.p(V,U):(R=A[I]=ie[I](V),R.c()),_(R,1),R.m(j.parentNode,j));const Ae={};U[1]&1&&(Ae.$$scope={dirty:U,ctx:V}),z.$set(Ae)},i(V){Z||(_(M.$$.fragment,V),_(R),_(z.$$.fragment,V),Z=!0)},o(V){g(M.$$.fragment,V),g(R),g(z.$$.fragment,V),Z=!1},d(V){V&&(h(e),h(l),h(t),h(P),h(N),h(j)),v(M,V),A[I].d(V),v(z,V)}}}function pp(s){let e,l,t,n,r;e=new tt({props:{$$slots:{default:[ep]},$$scope:{ctx:s}}}),e.$on("click",s[14]);function i(o){s[26](o)}let f={title:`Filter ${s[2]} schemes`,$$slots:{default:[$p]},$$scope:{ctx:s}};return s[7]!==void 0&&(f.open=s[7]),t=new kr({props:f}),H.push(()=>E(t,"open",i)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(o,a){w(e,o,a),d(o,l,a),w(t,o,a),r=!0},p(o,a){const u={};a[1]&1&&(u.$$scope={dirty:a,ctx:o}),e.$set(u);const c={};a[0]&4&&(c.title=`Filter ${o[2]} schemes`),a[0]&2047|a[1]&1&&(c.$$scope={dirty:a,ctx:o}),!n&&a[0]&128&&(n=!0,c.open=o[7],B(()=>n=!1)),t.$set(c)},i(o){r||(_(e.$$.fragment,o),_(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&h(l),v(e,o),v(t,o)}}}function mp(s){var t;let e=new Set;for(let n of s.values())(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Ul(s){return s*621371e-9}function on(s){let e=[];for(let l of s.values())e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function _p(s,e,l){let t,{source:n}=e,{schemes:r}=e,{schemesGj:i}=e,{filterSchemeText:f}=e,{filterInterventionText:o}=e,a=!1,u=new Set,c={interventions:0,totalLength:0},p=Object.keys(wn).map(U=>[U,U]),m="",k=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0])),C="";function T(U,Te,Pe,Ae,pt){let W=U.toLowerCase(),rt=Te.toLowerCase(),zt=be=>{var st,at,Et,Yt;if(W&&!((st=be.properties.name)!=null&&st.toLowerCase().includes(W))&&!((at=be.properties.description)!=null&&at.toLowerCase().includes(W)))return!1;let Fe=r.get(be.properties.scheme_reference);return!(Pe&&((Et=Fe.browse)==null?void 0:Et.authority_or_region)!=Pe||n=="ATF"&&!Ae[Fe.browse.funding_programme]||pt&&((Yt=Fe.browse)==null?void 0:Yt.current_milestone)!=pt||rt&&!Fe.scheme_reference.toLowerCase().includes(rt)&&!(Fe.scheme_name??"").toLowerCase().includes(rt))};l(8,u=new Set(i.features.filter(zt).map(be=>be.properties.scheme_reference))),l(9,c={interventions:0,totalLength:0});let Ht=be=>{var Fe,st;return!(!u.has(be.properties.scheme_reference)||W&&!((Fe=be.properties.name)!=null&&Fe.toLowerCase().includes(W))&&!((st=be.properties.description)!=null&&st.toLowerCase().includes(W)))};for(let be of i.features)Ht(be)?(delete be.properties.hide_while_editing,l(9,c.interventions++,c),be.geometry.type=="LineString"&&be.properties.length_meters&&l(9,c.totalLength+=be.properties.length_meters,c)):be.properties.hide_while_editing=!0;l(13,i),l(9,c)}function O(){l(4,m=""),l(5,k=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0]))),l(6,C=""),l(1,o=""),l(0,f="")}const D=()=>l(7,a=!0);function P(){o=this.value,l(1,o)}const M=()=>l(1,o="");function N(U){f=U,l(0,f)}function I(U){m=U,l(4,m)}function R(U,Te){s.$$.not_equal(k[Te],U)&&(k[Te]=U,l(5,k))}function j(U){C=U,l(6,C)}function z(){o=this.value,l(1,o)}const Z=()=>l(1,o="");function ie(U){f=U,l(0,f)}function A(U){m=U,l(4,m)}const ee=()=>l(7,a=!1);function V(U){a=U,l(7,a)}return s.$$set=U=>{"source"in U&&l(2,n=U.source),"schemes"in U&&l(3,r=U.schemes),"schemesGj"in U&&l(13,i=U.schemesGj),"filterSchemeText"in U&&l(0,f=U.filterSchemeText),"filterInterventionText"in U&&l(1,o=U.filterInterventionText)},s.$$.update=()=>{s.$$.dirty[0]&8&&l(10,t=mp(r)),s.$$.dirty[0]&115&&T(o,f,m,k,C)},[f,o,n,r,m,k,C,a,u,c,t,p,O,i,D,P,M,N,I,R,j,z,Z,ie,A,ee,V]}class Pr extends K{constructor(e){super(),X(this,e,_p,pp,J,{source:2,schemes:3,schemesGj:13,filterSchemeText:0,filterInterventionText:1},null,[-1,-1])}}function Wl(s){let e,l,t,n=s[0].status+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Status",t=y(`
    : `),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(e,r)},p(i,f){f&1&&n!==(n=i[0].status+"")&&q(r,n)},d(i){i&&h(e)}}}function Yl(s){let e,l,t,n=s[0].timescale+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Timescale",t=y(`
    : `),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(e,r)},p(i,f){f&1&&n!==(n=i[0].timescale+"")&&q(r,n)},d(i){i&&h(e)}}}function Jl(s){let e,l,t,n=s[0].timescale_year+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Estimated completion year",t=y(`
    : `),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(e,r)},p(i,f){f&1&&n!==(n=i[0].timescale_year+"")&&q(r,n)},d(i){i&&h(e)}}}function Vl(s){let e,l,t,n=s[0].year_published+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently published",t=y(`
    : `),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(e,r)},p(i,f){f&1&&n!==(n=i[0].year_published+"")&&q(r,n)},d(i){i&&h(e)}}}function Ql(s){let e,l,t,n=s[0].year_consulted+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently consulted on",t=y(`
    : `),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(e,r)},p(i,f){f&1&&n!==(n=i[0].year_consulted+"")&&q(r,n)},d(i){i&&h(e)}}}function gp(s){let e,l,t,n,r,i=s[0].status&&Wl(s),f=s[0].timescale&&Yl(s),o=s[0].timescale_year&&Jl(s),a=s[0].year_published&&Vl(s),u=s[0].year_consulted&&Ql(s);return{c(){i&&i.c(),e=L(),f&&f.c(),l=L(),o&&o.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=ve()},m(c,p){i&&i.m(c,p),d(c,e,p),f&&f.m(c,p),d(c,l,p),o&&o.m(c,p),d(c,t,p),a&&a.m(c,p),d(c,n,p),u&&u.m(c,p),d(c,r,p)},p(c,[p]){c[0].status?i?i.p(c,p):(i=Wl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[0].timescale?f?f.p(c,p):(f=Yl(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?o?o.p(c,p):(o=Jl(c),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),c[0].year_published?a?a.p(c,p):(a=Vl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,p):(u=Ql(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:Q,o:Q,d(c){c&&(h(e),h(l),h(t),h(n),h(r)),i&&i.d(c),f&&f.d(c),o&&o.d(c),a&&a.d(c),u&&u.d(c)}}}function dp(s,e,l){let{props:t}=e;return s.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class jr extends K{constructor(e){super(),X(this,e,dp,gp,J,{props:0})}}function Zl(s){let e,l,t,n=s[0].budget.toLocaleString()+"",r,i;return{c(){e=S("p"),l=S("b"),l.textContent="Cost",t=y(`
    : `),r=y(n),i=y(`
    GBP`)},m(f,o){d(f,e,o),$(e,l),$(e,t),$(e,r),$(e,i)},p(f,o){o&1&&n!==(n=f[0].budget.toLocaleString()+"")&&q(r,n)},d(f){f&&h(e)}}}function Kl(s){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Xl(s){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xl(s){let e,l,t,n;return{c(){e=S("p"),l=S("b"),l.textContent="Funding sources",t=y(`
    : `),n=y(s[1])},m(r,i){d(r,e,i),$(e,l),$(e,t),$(e,n)},p(r,i){i&2&&q(n,r[1])},d(r){r&&h(e)}}}function hp(s){let e,l,t,n,r=s[0].budget&&Zl(s),i=s[0].development_funded&&Kl(),f=s[0].construction_funded&&Xl(),o=s[1]&&xl(s);return{c(){r&&r.c(),e=L(),i&&i.c(),l=L(),f&&f.c(),t=L(),o&&o.c(),n=ve()},m(a,u){r&&r.m(a,u),d(a,e,u),i&&i.m(a,u),d(a,l,u),f&&f.m(a,u),d(a,t,u),o&&o.m(a,u),d(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=Zl(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?i||(i=Kl(),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),a[0].construction_funded?f||(f=Xl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?o?o.p(a,u):(o=xl(a),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:Q,o:Q,d(a){a&&(h(e),h(l),h(t),h(n)),r&&r.d(a),i&&i.d(a),f&&f.d(a),o&&o.d(a)}}}function bp(s){if(!s.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])s.funding_sources[l]&&e.push(l.toUpperCase());return s.funding_sources.other&&e.push(s.funding_sources.other),e.join(", ")}function wp(s,e,l){let t,{props:n}=e;return s.$$set=r=>{"props"in r&&l(0,n=r.props)},s.$$.update=()=>{s.$$.dirty&1&&l(1,t=bp(n))},[n,t]}class Rr extends K{constructor(e){super(),X(this,e,wp,hp,J,{props:0})}}function cn(s){const e=s.slice(),l=e[5].pipeline;return e[12]=l,e}function $n(s){const e=s.slice(),l=e[1].pipeline;return e[12]=l,e}function er(s){let e,l,t,n=Un(s[1].length_meters)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Length",t=y(`
        : `),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(e,r)},p(i,f){f&2&&n!==(n=Un(i[1].length_meters)+"")&&q(r,n)},d(i){i&&h(e)}}}function tr(s){let e,l=ct(s[1].description,s[3])+"";return{c(){e=S("p")},m(t,n){d(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=ct(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&h(e)}}}function nr(s){let e,l,t,n,r,i,f,o=s[12].atf4_type&&lr(s),a=s[12].accuracy&&rr(s),u=s[12].is_alternative&&sr();return n=new Rr({props:{props:s[12]}}),i=new jr({props:{props:s[12]}}),{c(){o&&o.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(i.$$.fragment)},m(c,p){o&&o.m(c,p),d(c,e,p),a&&a.m(c,p),d(c,l,p),u&&u.m(c,p),d(c,t,p),w(n,c,p),d(c,r,p),w(i,c,p),f=!0},p(c,p){c[12].atf4_type?o?o.p(c,p):(o=lr(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[12].accuracy?a?a.p(c,p):(a=rr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].is_alternative?u||(u=sr(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const m={};p&2&&(m.props=c[12]),n.$set(m);const k={};p&2&&(k.props=c[12]),i.$set(k)},i(c){f||(_(n.$$.fragment,c),_(i.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(i.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),o&&o.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(i,c)}}}function lr(s){let e,l,t,n=s[12].atf4_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 type",t=y(`
          : `),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(e,r)},p(i,f){f&2&&n!==(n=i[12].atf4_type+"")&&q(r,n)},d(i){i&&h(e)}}}function rr(s){let e,l,t,n=s[12].accuracy+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Accuracy",t=y(`
          : `),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(e,r)},p(i,f){f&2&&n!==(n=i[12].accuracy+"")&&q(r,n)},d(i){i&&h(e)}}}function sr(s){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function or(s){var i;let e,l,t,n=((i=s[5].browse)==null?void 0:i.capital_scheme_id)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Capital scheme ID",t=y(`
        : `),r=y(n)},m(f,o){d(f,e,o),$(e,l),$(e,t),$(e,r)},p(f,o){var a;o&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&q(r,n)},d(f){f&&h(e)}}}function ir(s){var i;let e,l,t,n=((i=s[5].browse)==null?void 0:i.current_milestone)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Current milestone",t=y(`
        : `),r=y(n)},m(f,o){d(f,e,o),$(e,l),$(e,t),$(e,r)},p(f,o){var a;o&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&q(r,n)},d(f){f&&h(e)}}}function ar(s){let e,l,t,n,r,i,f,o=s[12].scheme_type&&fr(s),a=s[12].atf4_lead_type&&ur(s),u=s[12].scheme_description&&cr(s);return n=new Rr({props:{props:s[12]}}),i=new jr({props:{props:s[12]}}),{c(){o&&o.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(i.$$.fragment)},m(c,p){o&&o.m(c,p),d(c,e,p),a&&a.m(c,p),d(c,l,p),u&&u.m(c,p),d(c,t,p),w(n,c,p),d(c,r,p),w(i,c,p),f=!0},p(c,p){c[12].scheme_type?o?o.p(c,p):(o=fr(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[12].atf4_lead_type?a?a.p(c,p):(a=ur(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].scheme_description?u?u.p(c,p):(u=cr(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const m={};p&32&&(m.props=c[12]),n.$set(m);const k={};p&32&&(k.props=c[12]),i.$set(k)},i(c){f||(_(n.$$.fragment,c),_(i.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(i.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),o&&o.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(i,c)}}}function fr(s){let e,l,t,n=s[12].scheme_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme type",t=y(`
          : `),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(e,r)},p(i,f){f&32&&n!==(n=i[12].scheme_type+"")&&q(r,n)},d(i){i&&h(e)}}}function ur(s){let e,l,t,n=s[12].atf4_lead_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 lead type",t=y(`
          : `),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(e,r)},p(i,f){f&32&&n!==(n=i[12].atf4_lead_type+"")&&q(r,n)},d(i){i&&h(e)}}}function cr(s){let e,l,t,n=s[12].scheme_description+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Descripton",t=y(`
          : `),r=y(n)},m(i,f){d(i,e,f),$(e,l),$(e,t),$(e,r)},p(i,f){f&32&&n!==(n=i[12].scheme_description+"")&&q(r,n)},d(i){i&&h(e)}}}function vp(s){let e;return{c(){e=y("Zoom to show entire scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function kp(s){let e;return{c(){e=y("Edit a copy of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $r(s){var On,Pn,jn,Rn;let e,l,t,n,r,i,f,o=ct(s[1].name,s[3])+"",a,u=s[1].intervention_type+"",c,p,m,k,C,T,O,D,P,M=s[0].toUpperCase()+"",N,I,R,j,z,Z,ie,A=ct(s[5].scheme_name??"",s[2])+"",ee,V,U,Te,Pe,Ae=ct(s[1].scheme_reference,s[2])+"",pt,W,rt,zt,Ht=((On=s[5].browse)==null?void 0:On.authority_or_region)+"",be,Fe,st,at,Et,Yt,xt=((Pn=s[5].browse)==null?void 0:Pn.funding_programme)+"",an,In,fn,un,ft,Nn,ut,qe,Le=s[1].length_meters&&er(s),Me=s[1].description&&tr(s),ke=s[1].pipeline&&nr($n(s)),Ie=((jn=s[5].browse)==null?void 0:jn.capital_scheme_id)&&or(s),Ne=((Rn=s[5].browse)==null?void 0:Rn.current_milestone)&&ir(s),ye=s[5].pipeline&&ar(cn(s));return ft=new tt({props:{$$slots:{default:[vp]},$$scope:{ctx:s}}}),ft.$on("click",s[6]),ut=new tt({props:{$$slots:{default:[kp]},$$scope:{ctx:s}}}),ut.$on("click",s[7]),{c(){e=S("div"),l=S("h2"),l.textContent="Intervention",t=L(),n=S("p"),r=S("b"),r.textContent="Name",i=y(`
      : `),f=new Dt(!1),a=y(" ("),c=y(u),p=y(")"),m=L(),Le&&Le.c(),k=L(),Me&&Me.c(),C=L(),ke&&ke.c(),T=L(),O=S("hr"),D=L(),P=S("h2"),N=y(M),I=y(" Scheme"),R=L(),j=S("p"),z=S("b"),z.textContent="Scheme name",Z=y(`
      : `),ie=new Dt(!1),ee=L(),V=S("p"),U=S("b"),U.textContent="Scheme reference",Te=y(`
      : `),Pe=new Dt(!1),pt=L(),W=S("p"),rt=S("b"),rt.textContent="Authority or region",zt=y(`
      : `),be=y(Ht),Fe=L(),Ie&&Ie.c(),st=L(),at=S("p"),Et=S("b"),Et.textContent="Funding programme",Yt=y(`
      : `),an=y(xt),In=L(),Ne&&Ne.c(),fn=L(),ye&&ye.c(),un=L(),b(ft.$$.fragment),Nn=L(),b(ut.$$.fragment),f.a=a,ie.a=null,Pe.a=null,pe(e,"max-width","30vw"),pe(e,"max-height","60vh"),pe(e,"overflow","auto")},m(oe,ge){d(oe,e,ge),$(e,l),$(e,t),$(e,n),$(n,r),$(n,i),f.m(o,n),$(n,a),$(n,c),$(n,p),$(e,m),Le&&Le.m(e,null),$(e,k),Me&&Me.m(e,null),$(e,C),ke&&ke.m(e,null),$(e,T),$(e,O),$(e,D),$(e,P),$(P,N),$(P,I),$(e,R),$(e,j),$(j,z),$(j,Z),ie.m(A,j),$(e,ee),$(e,V),$(V,U),$(V,Te),Pe.m(Ae,V),$(e,pt),$(e,W),$(W,rt),$(W,zt),$(W,be),$(e,Fe),Ie&&Ie.m(e,null),$(e,st),$(e,at),$(at,Et),$(at,Yt),$(at,an),$(e,In),Ne&&Ne.m(e,null),$(e,fn),ye&&ye.m(e,null),$(e,un),w(ft,e,null),$(e,Nn),w(ut,e,null),s[10](e),qe=!0},p(oe,ge){var Fn,qn,Gn,zn;(!qe||ge&10)&&o!==(o=ct(oe[1].name,oe[3])+"")&&f.p(o),(!qe||ge&2)&&u!==(u=oe[1].intervention_type+"")&&q(c,u),oe[1].length_meters?Le?Le.p(oe,ge):(Le=er(oe),Le.c(),Le.m(e,k)):Le&&(Le.d(1),Le=null),oe[1].description?Me?Me.p(oe,ge):(Me=tr(oe),Me.c(),Me.m(e,C)):Me&&(Me.d(1),Me=null),oe[1].pipeline?ke?(ke.p($n(oe),ge),ge&2&&_(ke,1)):(ke=nr($n(oe)),ke.c(),_(ke,1),ke.m(e,T)):ke&&(de(),g(ke,1,1,()=>{ke=null}),he()),(!qe||ge&1)&&M!==(M=oe[0].toUpperCase()+"")&&q(N,M),(!qe||ge&36)&&A!==(A=ct(oe[5].scheme_name??"",oe[2])+"")&&ie.p(A),(!qe||ge&6)&&Ae!==(Ae=ct(oe[1].scheme_reference,oe[2])+"")&&Pe.p(Ae),(!qe||ge&32)&&Ht!==(Ht=((Fn=oe[5].browse)==null?void 0:Fn.authority_or_region)+"")&&q(be,Ht),(qn=oe[5].browse)!=null&&qn.capital_scheme_id?Ie?Ie.p(oe,ge):(Ie=or(oe),Ie.c(),Ie.m(e,st)):Ie&&(Ie.d(1),Ie=null),(!qe||ge&32)&&xt!==(xt=((Gn=oe[5].browse)==null?void 0:Gn.funding_programme)+"")&&q(an,xt),(zn=oe[5].browse)!=null&&zn.current_milestone?Ne?Ne.p(oe,ge):(Ne=ir(oe),Ne.c(),Ne.m(e,fn)):Ne&&(Ne.d(1),Ne=null),oe[5].pipeline?ye?(ye.p(cn(oe),ge),ge&32&&_(ye,1)):(ye=ar(cn(oe)),ye.c(),_(ye,1),ye.m(e,un)):ye&&(de(),g(ye,1,1,()=>{ye=null}),he());const Dn={};ge&8192&&(Dn.$$scope={dirty:ge,ctx:oe}),ft.$set(Dn);const An={};ge&8192&&(An.$$scope={dirty:ge,ctx:oe}),ut.$set(An)},i(oe){qe||(_(ke),_(ye),_(ft.$$.fragment,oe),_(ut.$$.fragment,oe),qe=!0)},o(oe){g(ke),g(ye),g(ft.$$.fragment,oe),g(ut.$$.fragment,oe),qe=!1},d(oe){oe&&h(e),Le&&Le.d(),Me&&Me.d(),ke&&ke.d(),Ie&&Ie.d(),Ne&&Ne.d(),ye&&ye.d(),v(ft),v(ut),s[10](null)}}}function yp(s){let e=s[1],l,t,n=$r(s);return{c(){n.c(),l=ve()},m(r,i){n.m(r,i),d(r,l,i),t=!0},p(r,[i]){i&2&&J(e,e=r[1])?(de(),g(n,1,1,Q),he(),n=$r(r),n.c(),_(n,1),n.m(l.parentNode,l)):n.p(r,i)},i(r){t||(_(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function ct(s,e){return e?s.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):s}function Sp(s,e,l){let t,n;Y(s,Cn,C=>l(11,n=C));let{source:r}=e,{props:i}=e,{schemes:f}=e,{schemesGj:o}=e,{filterSchemeText:a}=e,{filterInterventionText:u}=e,c;Ur(()=>{c&&l(4,c.scrollTop=0,c)});function p(){let C={type:"FeatureCollection",features:o.features.filter(T=>T.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(ns(C),{padding:20,animate:!1})}function m(){var D,P;let C={type:"FeatureCollection",features:o.features.filter(M=>M.properties.scheme_reference==t.scheme_reference),schemes:{}};C.schemes[t.scheme_reference]=t;let T=((D=t.browse)==null?void 0:D.authority_or_region)||"unknown authority",O=t.pipeline?"pipeline":"v1";O=="pipeline"&&(T+="_pipeline"),Wr(T,JSON.stringify(C)),window.open(`scheme.html?authority=${(P=t.browse)==null?void 0:P.authority_or_region}&schema=${O}`,"_blank")}function k(C){H[C?"unshift":"push"](()=>{c=C,l(4,c)})}return s.$$set=C=>{"source"in C&&l(0,r=C.source),"props"in C&&l(1,i=C.props),"schemes"in C&&l(8,f=C.schemes),"schemesGj"in C&&l(9,o=C.schemesGj),"filterSchemeText"in C&&l(2,a=C.filterSchemeText),"filterInterventionText"in C&&l(3,u=C.filterInterventionText)},s.$$.update=()=>{s.$$.dirty&258&&l(5,t=f.get(i.scheme_reference))},[r,i,a,u,c,t,p,m,f,o,k]}class Mn extends K{constructor(e){super(),X(this,e,Sp,yp,J,{source:0,props:1,schemes:8,schemesGj:9,filterSchemeText:2,filterInterventionText:3})}}function Cp(s){let e,l=s[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&q(t,l)},d(n){n&&h(e)}}}function Tp(s){let e,l;return e=new Mn({props:{source:s[0],props:s[10],schemesGj:s[3],schemes:s[2],filterSchemeText:s[4],filterInterventionText:s[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Lp(s){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Cp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Tp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,i){w(e,r,i),d(r,l,i),w(t,r,i),n=!0},p(r,i){const f={};i&3072&&(f.$$scope={dirty:i,ctx:r}),e.$set(f);const o={};i&3133&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Mp(s){let e,l=s[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&q(t,l)},d(n){n&&h(e)}}}function Ip(s){let e,l;return e=new Mn({props:{source:s[0],props:s[10],schemesGj:s[3],schemes:s[2],filterSchemeText:s[4],filterInterventionText:s[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Np(s){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Mp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Ip,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,i){w(e,r,i),d(r,l,i),w(t,r,i),n=!0},p(r,i){const f={};i&3072&&(f.$$scope={dirty:i,ctx:r}),e.$set(f);const o={};i&3133&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Op(s){let e,l=s[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&q(t,l)},d(n){n&&h(e)}}}function Pp(s){let e,l;return e=new Mn({props:{source:s[0],props:s[10],schemesGj:s[3],schemes:s[2],filterSchemeText:s[4],filterInterventionText:s[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function jp(s){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Op,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Pp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,i){w(e,r,i),d(r,l,i),w(t,r,i),n=!0},p(r,i){const f={};i&3072&&(f.$$scope={dirty:i,ctx:r}),e.$set(f);const o={};i&3133&&(o.$$scope={dirty:i,ctx:r}),t.$set(o)},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Rp(s){let e,l,t,n,r,i,f,o,a,u;const c=[G(`${s[0]}-interventions-points`),{filter:["all",Wn,s[8],s[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":s[6],"circle-radius":Yn,"circle-opacity":te(1,.5)}},{layout:{visibility:s[1]?"visible":"none"}},{hoverCursor:"pointer"}];let p={$$slots:{default:[Lp]},$$scope:{ctx:s}};for(let N=0;N<c.length;N+=1)p=ne(p,c[N]);e=new Ft({props:p});const m=[G(`${s[0]}-interventions-lines`),{filter:["all",Jn,s[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[6],"line-width":Jt,"line-opacity":te(1,.5)}},{layout:{visibility:s[1]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[Np]},$$scope:{ctx:s}};for(let N=0;N<m.length;N+=1)k=ne(k,m[N]);t=new me({props:k});const C=[G(`${s[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Jt,"circle-opacity":0,"circle-stroke-color":Qe.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:s[1]?"visible":"none"}}];let T={};for(let N=0;N<C.length;N+=1)T=ne(T,C[N]);r=new Ft({props:T});const O=[G(`${s[0]}-interventions-polygons`),{filter:["all",en,s[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":s[6],"fill-opacity":te(.2,.5)}},{layout:{visibility:s[1]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[jp]},$$scope:{ctx:s}};for(let N=0;N<O.length;N+=1)D=ne(D,O[N]);f=new Re({props:D});const P=[G(`${s[0]}-interventions-polygons-outlines`),{filter:["all",en,s[8]]},{paint:{"line-color":s[6],"line-opacity":.5,"line-width":.7*Jt}},{layout:{visibility:s[1]?"visible":"none"}}];let M={};for(let N=0;N<P.length;N+=1)M=ne(M,P[N]);return a=new me({props:M}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),i=L(),b(f.$$.fragment),o=L(),b(a.$$.fragment)},m(N,I){w(e,N,I),d(N,l,I),w(t,N,I),d(N,n,I),w(r,N,I),d(N,i,I),w(f,N,I),d(N,o,I),w(a,N,I),u=!0},p(N,I){const R=I&835?re(c,[I&1&&se(G(`${N[0]}-interventions-points`)),I&768&&{filter:["all",Wn,N[8],N[9]]},c[2],c[3],I&64&&{paint:{"circle-color":N[6],"circle-radius":Yn,"circle-opacity":te(1,.5)}},I&2&&{layout:{visibility:N[1]?"visible":"none"}},c[6]]):{};I&2109&&(R.$$scope={dirty:I,ctx:N}),e.$set(R);const j=I&323?re(m,[I&1&&se(G(`${N[0]}-interventions-lines`)),I&256&&{filter:["all",Jn,N[8]]},m[2],m[3],I&64&&{paint:{"line-color":N[6],"line-width":Jt,"line-opacity":te(1,.5)}},I&2&&{layout:{visibility:N[1]?"visible":"none"}},m[6]]):{};I&2109&&(j.$$scope={dirty:I,ctx:N}),t.$set(j);const z=I&3?re(C,[I&1&&se(G(`${N[0]}-interventions-lines-endpoints`)),C[1],C[2],I&2&&{layout:{visibility:N[1]?"visible":"none"}}]):{};r.$set(z);const Z=I&323?re(O,[I&1&&se(G(`${N[0]}-interventions-polygons`)),I&256&&{filter:["all",en,N[8]]},O[2],O[3],I&64&&{paint:{"fill-color":N[6],"fill-opacity":te(.2,.5)}},I&2&&{layout:{visibility:N[1]?"visible":"none"}},O[6]]):{};I&2109&&(Z.$$scope={dirty:I,ctx:N}),f.$set(Z);const ie=I&323?re(P,[I&1&&se(G(`${N[0]}-interventions-polygons-outlines`)),I&256&&{filter:["all",en,N[8]]},I&64&&{paint:{"line-color":N[6],"line-opacity":.5,"line-width":.7*Jt}},I&2&&{layout:{visibility:N[1]?"visible":"none"}}]):{};a.$set(ie)},i(N){u||(_(e.$$.fragment,N),_(t.$$.fragment,N),_(r.$$.fragment,N),_(f.$$.fragment,N),_(a.$$.fragment,N),u=!0)},o(N){g(e.$$.fragment,N),g(t.$$.fragment,N),g(r.$$.fragment,N),g(f.$$.fragment,N),g(a.$$.fragment,N),u=!1},d(N){N&&(h(l),h(n),h(i),h(o)),v(e,N),v(t,N),v(r,N),v(f,N),v(a,N)}}}function Dp(s){let e,l;return e=new qt({props:{data:s[7],$$slots:{default:[Rp]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ap(s,e,l){let t,{source:n}=e,{show:r}=e,{schemes:i}=e,{schemesGj:f}=e,{filterSchemeText:o}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],p=["!=",["get","endpoint"],!0];return s.$$set=m=>{"source"in m&&l(0,n=m.source),"show"in m&&l(1,r=m.show),"schemes"in m&&l(2,i=m.schemes),"schemesGj"in m&&l(3,f=m.schemesGj),"filterSchemeText"in m&&l(4,o=m.filterSchemeText),"filterInterventionText"in m&&l(5,a=m.filterInterventionText),"color"in m&&l(6,u=m.color)},s.$$.update=()=>{s.$$.dirty&8&&l(7,t=ls(f))},[n,r,i,f,o,a,u,t,c,p]}class pr extends K{constructor(e){super(),X(this,e,Ap,Dp,J,{source:0,show:1,schemes:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function Fp(s){return nt(["get","intervention_type"],{area:Qe.area,route:Qe.route,crossing:Qe.crossing,other:Qe.other},"white")}function qp(s){return[["Areas",Qe.area],["Routes",Qe.route],["Crossings",Qe.crossing],["Other",Qe.other]]}function mr(s,e,l){const t=s.slice();return t[33]=e[l],t}function _r(s,e,l){const t=s.slice();return t[33]=e[l],t}function Gp(s){let e,l;return e=new K$({props:{loadFile:s[19]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p:Q,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function gr(s){let e,l,t;function n(i){s[25](i)}let r={name:Dr,title:Yp,bigControls:!0,$$slots:{controls:[Hp],help:[zp]},$$scope:{ctx:s}};return s[8]!==void 0&&(r.show=s[8]),e=new fe({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(i,f){w(e,i,f),t=!0},p(i,f){const o={};f[0]&7713|f[1]&128&&(o.$$scope={dirty:f,ctx:i}),!l&&f[0]&256&&(l=!0,o.show=i[8],B(()=>l=!1)),e.$set(o)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function dr(s){let e,l,t=s[33]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,i){d(r,e,i),$(e,l),$(l,n)},p(r,i){i[0]&1024&&t!==(t=r[33]+"")&&q(n,t)},d(r){r&&h(e)}}}function zp(s){let e,l,t,n,r,i,f;t=new Ir({props:{text:"Scheme data caveats"}});let o=we(s[10].notes??[]),a=[];for(let u=0;u<o.length;u+=1)a[u]=dr(_r(s,o,u));return{c(){e=S("span"),l=S("p"),b(t.$$.fragment),n=y(`Please note there are data
          quality caveats for all scheme data:`),r=L(),i=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),w(t,l,null),$(l,n),$(e,r),$(e,i);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(i,null);f=!0},p(u,c){if(c[0]&1024){o=we(u[10].notes??[]);let p;for(p=0;p<o.length;p+=1){const m=_r(u,o,p);a[p]?a[p].p(m,c):(a[p]=dr(m),a[p].c(),a[p].m(i,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=o.length}},i(u){f||(_(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),et(a,u)}}}function Hp(s){let e,l,t,n,r,i,f,o,a,u,c,p;function m(M){s[20](M)}function k(M){s[21](M)}function C(M){s[22](M)}function T(M){s[23](M)}let O={source:"ATF"};s[10]!==void 0&&(O.schemesGj=s[10]),s[9]!==void 0&&(O.schemes=s[9]),s[11]!==void 0&&(O.filterSchemeText=s[11]),s[12]!==void 0&&(O.filterInterventionText=s[12]),l=new Pr({props:O}),H.push(()=>E(l,"schemesGj",m)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",C)),H.push(()=>E(l,"filterInterventionText",T));function D(M){s[24](M)}let P={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return s[0]!==void 0&&(P.value=s[0]),o=new At({props:P}),H.push(()=>E(o,"value",D)),c=new Xt({props:{rows:s[5]}}),{c(){e=S("span"),b(l.$$.fragment),f=L(),b(o.$$.fragment),u=L(),b(c.$$.fragment),F(e,"slot","controls")},m(M,N){d(M,e,N),w(l,e,null),$(e,f),w(o,e,null),$(e,u),w(c,e,null),p=!0},p(M,N){const I={};!t&&N[0]&1024&&(t=!0,I.schemesGj=M[10],B(()=>t=!1)),!n&&N[0]&512&&(n=!0,I.schemes=M[9],B(()=>n=!1)),!r&&N[0]&2048&&(r=!0,I.filterSchemeText=M[11],B(()=>r=!1)),!i&&N[0]&4096&&(i=!0,I.filterInterventionText=M[12],B(()=>i=!1)),l.$set(I);const R={};!a&&N[0]&1&&(a=!0,R.value=M[0],B(()=>a=!1)),o.$set(R);const j={};N[0]&32&&(j.rows=M[5]),c.$set(j)},i(M){p||(_(l.$$.fragment,M),_(o.$$.fragment,M),_(c.$$.fragment,M),p=!0)},o(M){g(l.$$.fragment,M),g(o.$$.fragment,M),g(c.$$.fragment,M),p=!1},d(M){M&&h(e),v(l),v(o),v(c)}}}function hr(s){let e,l,t;function n(i){s[31](i)}let r={name:Ar,title:Jp,bigControls:!0,$$slots:{controls:[Bp],help:[Ep]},$$scope:{ctx:s}};return s[7]!==void 0&&(r.show=s[7]),e=new fe({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(i,f){w(e,i,f),t=!0},p(i,f){const o={};f[0]&122890|f[1]&128&&(o.$$scope={dirty:f,ctx:i}),!l&&f[0]&128&&(l=!0,o.show=i[7],B(()=>l=!1)),e.$set(o)},i(i){t||(_(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function br(s){let e,l,t=s[33]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,i){d(r,e,i),$(e,l),$(l,n)},p(r,i){i[0]&16384&&t!==(t=r[33]+"")&&q(n,t)},d(r){r&&h(e)}}}function Ep(s){let e,l,t,n,r,i,f;t=new Ir({props:{text:"Scheme data caveats"}});let o=we(s[14].notes??[]),a=[];for(let u=0;u<o.length;u+=1)a[u]=br(mr(s,o,u));return{c(){e=S("span"),l=S("p"),b(t.$$.fragment),n=y(`Please note there are data
          quality caveats for all scheme data:`),r=L(),i=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),w(t,l,null),$(l,n),$(e,r),$(e,i);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(i,null);f=!0},p(u,c){if(c[0]&16384){o=we(u[14].notes??[]);let p;for(p=0;p<o.length;p+=1){const m=mr(u,o,p);a[p]?a[p].p(m,c):(a[p]=br(m),a[p].c(),a[p].m(i,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=o.length}},i(u){f||(_(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),et(a,u)}}}function Bp(s){let e,l,t,n,r,i,f,o,a,u,c,p;function m(M){s[26](M)}function k(M){s[27](M)}function C(M){s[28](M)}function T(M){s[29](M)}let O={source:"LCWIP"};s[14]!==void 0&&(O.schemesGj=s[14]),s[13]!==void 0&&(O.schemes=s[13]),s[15]!==void 0&&(O.filterSchemeText=s[15]),s[16]!==void 0&&(O.filterInterventionText=s[16]),l=new Pr({props:O}),H.push(()=>E(l,"schemesGj",m)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",C)),H.push(()=>E(l,"filterInterventionText",T));function D(M){s[30](M)}let P={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return s[1]!==void 0&&(P.value=s[1]),o=new At({props:P}),H.push(()=>E(o,"value",D)),c=new Xt({props:{rows:s[3]}}),{c(){e=S("span"),b(l.$$.fragment),f=L(),b(o.$$.fragment),u=L(),b(c.$$.fragment),F(e,"slot","controls")},m(M,N){d(M,e,N),w(l,e,null),$(e,f),w(o,e,null),$(e,u),w(c,e,null),p=!0},p(M,N){const I={};!t&&N[0]&16384&&(t=!0,I.schemesGj=M[14],B(()=>t=!1)),!n&&N[0]&8192&&(n=!0,I.schemes=M[13],B(()=>n=!1)),!r&&N[0]&32768&&(r=!0,I.filterSchemeText=M[15],B(()=>r=!1)),!i&&N[0]&65536&&(i=!0,I.filterInterventionText=M[16],B(()=>i=!1)),l.$set(I);const R={};!a&&N[0]&2&&(a=!0,R.value=M[1],B(()=>a=!1)),o.$set(R);const j={};N[0]&8&&(j.rows=M[3]),c.$set(j)},i(M){p||(_(l.$$.fragment,M),_(o.$$.fragment,M),_(c.$$.fragment,M),p=!0)},o(M){g(l.$$.fragment,M),g(o.$$.fragment,M),g(c.$$.fragment,M),p=!1},d(M){M&&h(e),v(l),v(o),v(c)}}}function Up(s){let e=Tn()=="Private (development)",l,t,n,r,i,f,o,a=e&&Gp(s),u=s[9].size>0&&gr(s),c=s[13].size>0&&hr(s);return r=new Yr({props:{label:"Load schemes from GeoJSON",onLoad:s[19]}}),f=new Jr({props:{errorMessage:s[2]}}),{c(){a&&a.c(),l=L(),u&&u.c(),t=L(),c&&c.c(),n=L(),b(r.$$.fragment),i=L(),b(f.$$.fragment)},m(p,m){a&&a.m(p,m),d(p,l,m),u&&u.m(p,m),d(p,t,m),c&&c.m(p,m),d(p,n,m),w(r,p,m),d(p,i,m),w(f,p,m),o=!0},p(p,m){e&&a.p(p,m),p[9].size>0?u?(u.p(p,m),m[0]&512&&_(u,1)):(u=gr(p),u.c(),_(u,1),u.m(t.parentNode,t)):u&&(de(),g(u,1,1,()=>{u=null}),he()),p[13].size>0?c?(c.p(p,m),m[0]&8192&&_(c,1)):(c=hr(p),c.c(),_(c,1),c.m(n.parentNode,n)):c&&(de(),g(c,1,1,()=>{c=null}),he());const k={};m[0]&4&&(k.errorMessage=p[2]),f.$set(k)},i(p){o||(_(a),_(u),_(c),_(r.$$.fragment,p),_(f.$$.fragment,p),o=!0)},o(p){g(a),g(u),g(c),g(r.$$.fragment,p),g(f.$$.fragment,p),o=!1},d(p){p&&(h(l),h(t),h(n),h(i)),a&&a.d(p),u&&u.d(p),c&&c.d(p),v(r,p),v(f,p)}}}function Wp(s){let e,l,t,n,r,i;return e=new Je({props:{label:"Schemes",open:!0,$$slots:{default:[Up]},$$scope:{ctx:s}}}),t=new pr({props:{source:"atf",show:s[8],schemesGj:s[10],schemes:s[9],filterSchemeText:s[11],filterInterventionText:s[12],color:s[6]}}),r=new pr({props:{source:"lcwip",show:s[7],schemesGj:s[14],schemes:s[13],filterSchemeText:s[15],filterInterventionText:s[16],color:s[4]}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,o){w(e,f,o),d(f,l,o),w(t,f,o),d(f,n,o),w(r,f,o),i=!0},p(f,o){const a={};o[0]&130991|o[1]&128&&(a.$$scope={dirty:o,ctx:f}),e.$set(a);const u={};o[0]&256&&(u.show=f[8]),o[0]&1024&&(u.schemesGj=f[10]),o[0]&512&&(u.schemes=f[9]),o[0]&2048&&(u.filterSchemeText=f[11]),o[0]&4096&&(u.filterInterventionText=f[12]),o[0]&64&&(u.color=f[6]),t.$set(u);const c={};o[0]&128&&(c.show=f[7]),o[0]&16384&&(c.schemesGj=f[14]),o[0]&8192&&(c.schemes=f[13]),o[0]&32768&&(c.filterSchemeText=f[15]),o[0]&65536&&(c.filterInterventionText=f[16]),o[0]&16&&(c.color=f[4]),r.$set(c)},i(f){i||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),i=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}let Dr="atf_schemes",Yp="ATF schemes",Ar="lcwip_schemes",Jp="LCWIP schemes";function Vp(s,e,l){let t,n,r,i,f,o,a,u,c,p,m,k,C,T;Y(s,dn,W=>l(9,a=W)),Y(s,sn,W=>l(10,u=W)),Y(s,Gl,W=>l(11,c=W)),Y(s,ql,W=>l(12,p=W)),Y(s,bn,W=>l(13,m=W)),Y(s,hn,W=>l(14,k=W)),Y(s,Hl,W=>l(15,C=W)),Y(s,zl,W=>l(16,T=W));let O="",D=$e(Dr);Y(s,D,W=>l(8,o=W));let P="fundingProgramme",M=$e(Ar);Y(s,M,W=>l(7,f=W));let N="interventionType";function I(W,rt){try{X$(JSON.parse(rt)),Ut(D,o=!0,o),Ut(M,f=!0,f),l(2,O="")}catch(zt){l(2,O=`The file you loaded is broken: ${zt}`)}}function R(W){return W=="interventionType"?[Fp(),qp()]:W=="fundingProgramme"?[nt(["get","funding_programme"],Wt,"grey"),Object.entries(Wt)]:W=="currentMilestone"?[nt(["get","current_milestone"],wn,"grey"),Object.entries(wn)]:["red",[]]}function j(W){u=W,sn.set(u)}function z(W){a=W,dn.set(a)}function Z(W){c=W,Gl.set(c)}function ie(W){p=W,ql.set(p)}function A(W){P=W,l(0,P)}function ee(W){o=W,D.set(o)}function V(W){k=W,hn.set(k)}function U(W){m=W,bn.set(m)}function Te(W){C=W,Hl.set(C)}function Pe(W){T=W,zl.set(T)}function Ae(W){N=W,l(1,N)}function pt(W){f=W,M.set(f)}return s.$$.update=()=>{s.$$.dirty[0]&1&&l(6,[t,n]=R(P),t,(l(5,n),l(0,P))),s.$$.dirty[0]&2&&l(4,[r,i]=R(N),r,(l(3,i),l(1,N)))},[P,N,O,i,r,n,t,f,o,a,u,c,p,m,k,C,T,D,M,I,j,z,Z,ie,A,ee,V,U,Te,Pe,Ae,pt]}class Qp extends K{constructor(e){super(),X(this,e,Vp,Wp,J,{},null,[-1,-1])}}const wr=Oe(!0);let vn=Oe(null);function Zp(s){let e,l,t,n,r,i,f,o;return e=new Cc({}),t=new Dc({}),r=new l$({}),f=new Yc({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),i=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,i,u),w(f,a,u),o=!0},i(a){o||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),o=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),o=!1},d(a){a&&(h(l),h(n),h(i)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function Kp(s){let e,l;return e=new Ye({props:{small:!0,$$slots:{default:[Zp]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Xp(s){let e,l,t,n,r,i,f,o,a,u,c,p;return e=new za({}),t=new df({}),r=new Za({}),f=new of({}),a=new cc({}),c=new Uu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),i=L(),b(f.$$.fragment),o=L(),b(a.$$.fragment),u=L(),b(c.$$.fragment)},m(m,k){w(e,m,k),d(m,l,k),w(t,m,k),d(m,n,k),w(r,m,k),d(m,i,k),w(f,m,k),d(m,o,k),w(a,m,k),d(m,u,k),w(c,m,k),p=!0},i(m){p||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(r.$$.fragment,m),_(f.$$.fragment,m),_(a.$$.fragment,m),_(c.$$.fragment,m),p=!0)},o(m){g(e.$$.fragment,m),g(t.$$.fragment,m),g(r.$$.fragment,m),g(f.$$.fragment,m),g(a.$$.fragment,m),g(c.$$.fragment,m),p=!1},d(m){m&&(h(l),h(n),h(i),h(o),h(u)),v(e,m),v(t,m),v(r,m),v(f,m),v(a,m),v(c,m)}}}function xp(s){let e,l;return e=new Ye({props:{small:!0,$$slots:{default:[Xp]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function em(s){let e,l,t,n,r,i;return e=new Ta({}),t=new yu({}),r=new ju({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,o){w(e,f,o),d(f,l,o),w(t,f,o),d(f,n,o),w(r,f,o),i=!0},i(f){i||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),i=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}function tm(s){let e,l;return e=new Ye({props:{small:!0,$$slots:{default:[em]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function nm(s){let e,l,t,n,r,i,f,o,a,u;return e=new Di({}),t=new $a({}),r=new Eo({}),f=new ui({}),a=new Si({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),i=L(),b(f.$$.fragment),o=L(),b(a.$$.fragment)},m(c,p){w(e,c,p),d(c,l,p),w(t,c,p),d(c,n,p),w(r,c,p),d(c,i,p),w(f,c,p),d(c,o,p),w(a,c,p),u=!0},i(c){u||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(r.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(i),h(o)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function lm(s){let e,l;return e=new Ye({props:{small:!0,$$slots:{default:[nm]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function rm(s){let e,l,t,n;return e=new Oo({}),t=new xo({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,i){w(e,r,i),d(r,l,i),w(t,r,i),n=!0},i(r){n||(_(e.$$.fragment,r),_(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function sm(s){let e,l;return e=new Ye({props:{small:!0,$$slots:{default:[rm]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function om(s){let e,l,t,n,r,i,f,o;return e=new _u({}),t=new Nf({}),r=new su({}),f=new B$({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),i=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,i,u),w(f,a,u),o=!0},i(a){o||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),o=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),o=!1},d(a){a&&(h(l),h(n),h(i)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function im(s){let e,l,t,n,r,i,f,o,a=Tn()=="Private (development)",u,c,p,m,k;e=new j$({}),t=new v$({}),r=new Yf({}),f=new ec({});let C=a&&om();return c=new Wi({}),m=new ta({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),i=L(),b(f.$$.fragment),o=L(),C&&C.c(),u=L(),b(c.$$.fragment),p=L(),b(m.$$.fragment)},m(T,O){w(e,T,O),d(T,l,O),w(t,T,O),d(T,n,O),w(r,T,O),d(T,i,O),w(f,T,O),d(T,o,O),C&&C.m(T,O),d(T,u,O),w(c,T,O),d(T,p,O),w(m,T,O),k=!0},p:Q,i(T){k||(_(e.$$.fragment,T),_(t.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),_(C),_(c.$$.fragment,T),_(m.$$.fragment,T),k=!0)},o(T){g(e.$$.fragment,T),g(t.$$.fragment,T),g(r.$$.fragment,T),g(f.$$.fragment,T),g(C),g(c.$$.fragment,T),g(m.$$.fragment,T),k=!1},d(T){T&&(h(l),h(n),h(i),h(o),h(u),h(p)),v(e,T),v(t,T),v(r,T),v(f,T),C&&C.d(T),v(c,T),v(m,T)}}}function am(s){let e,l;return e=new Ye({props:{small:!0,$$slots:{default:[im]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function fm(s){let e,l,t,n,r;function i(o){s[6](o)}let f={cfg:s[5],map:s[3]};return s[0]!==void 0&&(f.enabled=s[0]),e=new ss({props:f}),H.push(()=>E(e,"enabled",i)),n=new Hs({}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(o,a){w(e,o,a),d(o,t,a),w(n,o,a),r=!0},p(o,a){const u={};a&8&&(u.map=o[3]),!l&&a&1&&(l=!0,u.enabled=o[0],B(()=>l=!1)),e.$set(u)},i(o){r||(_(e.$$.fragment,o),_(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&h(t),v(e,o),v(n,o)}}}function um(s){let e,l;const t=[G("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:s[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,i){w(e,r,i),l=!0},p(r,i){const f=i&2?re(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(_(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function cm(s){let e,l,t,n,r,i,f,o,a,u,c,p,m,k,C,T,O,D,P,M,N;return l=new Qp({}),n=new Je({props:{label:"Trip generators",$$slots:{default:[Kp]},$$scope:{ctx:s}}}),i=new Je({props:{label:"Existing infrastructure",$$slots:{default:[xp]},$$scope:{ctx:s}}}),o=new Je({props:{label:"Public transport",$$slots:{default:[tm]},$$scope:{ctx:s}}}),u=new Je({props:{label:"Boundaries",$$slots:{default:[lm]},$$scope:{ctx:s}}}),p=new Je({props:{label:"Census",$$slots:{default:[sm]},$$scope:{ctx:s}}}),k=new Je({props:{label:"Other",$$slots:{default:[am]},$$scope:{ctx:s}}}),T=new Je({props:{label:"Tools",$$slots:{default:[fm]},$$scope:{ctx:s}}}),D=new rs({props:{disabled:!s[1]}}),M=new qt({props:{data:s[4],$$slots:{default:[um]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(i.$$.fragment),f=L(),b(o.$$.fragment),a=L(),b(u.$$.fragment),c=L(),b(p.$$.fragment),m=L(),b(k.$$.fragment),C=L(),b(T.$$.fragment),O=L(),b(D.$$.fragment),P=L(),b(M.$$.fragment)},m(I,R){d(I,e,R),w(l,e,null),$(e,t),w(n,e,null),$(e,r),w(i,e,null),$(e,f),w(o,e,null),$(e,a),w(u,e,null),$(e,c),w(p,e,null),$(e,m),w(k,e,null),$(e,C),w(T,e,null),$(e,O),w(D,e,null),s[7](e),d(I,P,R),w(M,I,R),N=!0},p(I,[R]){const j={};R&256&&(j.$$scope={dirty:R,ctx:I}),n.$set(j);const z={};R&256&&(z.$$scope={dirty:R,ctx:I}),i.$set(z);const Z={};R&256&&(Z.$$scope={dirty:R,ctx:I}),o.$set(Z);const ie={};R&256&&(ie.$$scope={dirty:R,ctx:I}),u.$set(ie);const A={};R&256&&(A.$$scope={dirty:R,ctx:I}),p.$set(A);const ee={};R&256&&(ee.$$scope={dirty:R,ctx:I}),k.$set(ee);const V={};R&265&&(V.$$scope={dirty:R,ctx:I}),T.$set(V);const U={};R&2&&(U.disabled=!I[1]),D.$set(U);const Te={};R&258&&(Te.$$scope={dirty:R,ctx:I}),M.$set(Te)},i(I){N||(_(l.$$.fragment,I),_(n.$$.fragment,I),_(i.$$.fragment,I),_(o.$$.fragment,I),_(u.$$.fragment,I),_(p.$$.fragment,I),_(k.$$.fragment,I),_(T.$$.fragment,I),_(D.$$.fragment,I),_(M.$$.fragment,I),N=!0)},o(I){g(l.$$.fragment,I),g(n.$$.fragment,I),g(i.$$.fragment,I),g(o.$$.fragment,I),g(u.$$.fragment,I),g(p.$$.fragment,I),g(k.$$.fragment,I),g(T.$$.fragment,I),g(D.$$.fragment,I),g(M.$$.fragment,I),N=!1},d(I){I&&(h(e),h(P)),v(l),v(n),v(i),v(o),v(u),v(p),v(k),v(T),v(D),s[7](null),v(M,I)}}}function $m(s,e,l){let t,n,r,i;Y(s,wr,c=>l(1,n=c)),Y(s,vn,c=>l(2,r=c)),Y(s,Cn,c=>l(3,i=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},o={getStreetViewRoadLayerNames:c=>os(c,Vr(_n))};function a(c){t=c,l(0,t),l(1,n)}function u(c){H[c?"unshift":"push"](()=>{r=c,vn.set(r)})}return s.$$.update=()=>{s.$$.dirty&2&&l(0,t=!n),s.$$.dirty&1&&wr.set(!t)},[t,n,r,i,f,o,a,u]}class pm extends K{constructor(e){super(),X(this,e,$m,cm,J,{})}}function mm(s){let e,l,t;return{c(){e=S("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=S("div")},m(n,r){d(n,e,r),d(n,l,r),d(n,t,r),s[3](t)},p:Q,i:Q,o:Q,d(n){n&&(h(e),h(l),h(t)),s[3](null)}}}function _m(s,e,l){if(s){s.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",s.appendChild(n))}}}function gm(s,e,l){let t,n;Y(s,gn,f=>l(1,t=f)),Y(s,Vt,f=>l(2,n=f));let r=null;function i(f){H[f?"unshift":"push"](()=>{r=f,l(0,r)})}return s.$$.update=()=>{s.$$.dirty&7&&_m(r,n,t)},[r,t,n,i]}class dm extends K{constructor(e){super(),X(this,e,gm,mm,J,{})}}function hm(s){let e,l,t,n,r,i,f,o,a,u,c,p,m,k,C,T,O;return l=new is({}),n=new Qr({}),f=new Zr({}),k=new as({props:{boundaryGeojson:s[3]}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),i=S("div"),b(f.$$.fragment),o=L(),a=S("p"),a.textContent=`App version: ${Tn()}`,u=L(),c=S("div"),p=S("h1"),p.textContent="Scheme Browser",m=L(),b(k.$$.fragment),C=L(),T=S("div"),pe(i,"border-bottom","1px solid #b1b4b6"),pe(c,"display","flex"),pe(c,"justify-content","space-between"),F(e,"slot","sidebar"),F(e,"class","govuk-prose")},m(D,P){d(D,e,P),w(l,e,null),$(e,t),w(n,e,null),$(e,r),$(e,i),w(f,i,null),$(i,o),$(i,a),$(e,u),$(e,c),$(c,p),$(c,m),w(k,c,null),$(e,C),$(e,T),s[6](T),O=!0},p(D,P){const M={};P&8&&(M.boundaryGeojson=D[3]),k.$set(M)},i(D){O||(_(l.$$.fragment,D),_(n.$$.fragment,D),_(f.$$.fragment,D),_(k.$$.fragment,D),O=!0)},o(D){g(l.$$.fragment,D),g(n.$$.fragment,D),g(f.$$.fragment,D),g(k.$$.fragment,D),O=!1},d(D){D&&h(e),v(l),v(n),v(f),v(k),s[6](null)}}}function vr(s){let e,l;return e=new pm({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function bm(s){let e,l,t,n;e=new fs({});let r=s[2]&&vr();return{c(){b(e.$$.fragment),l=L(),r&&r.c(),t=ve()},m(i,f){w(e,i,f),d(i,l,f),r&&r.m(i,f),d(i,t,f),n=!0},p(i,f){i[2]?r?f&4&&_(r,1):(r=vr(),r.c(),_(r,1),r.m(t.parentNode,t)):r&&(de(),g(r,1,1,()=>{r=null}),he())},i(i){n||(_(e.$$.fragment,i),_(r),n=!0)},o(i){g(e.$$.fragment,i),g(r),n=!1},d(i){i&&(h(l),h(t)),v(e,i),r&&r.d(i)}}}function wm(s){let e,l,t;return l=new Kr({props:{style:s[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[bm]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","main")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const i={};r&2&&(i.style=n[1]),r&260&&(i.$$scope={dirty:r,ctx:n}),l.$set(i)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function vm(s){let e,l,t,n,r;return e=new vs({props:{$$slots:{main:[wm],sidebar:[hm]},$$scope:{ctx:s}}}),n=new dm({}),{c(){b(e.$$.fragment),l=L(),t=S("div"),b(n.$$.fragment),F(t,"class","top-right svelte-u44ed2")},m(i,f){w(e,i,f),d(i,l,f),d(i,t,f),w(n,t,null),r=!0},p(i,[f]){const o={};f&271&&(o.$$scope={dirty:f,ctx:i}),e.$set(o)},i(i){r||(_(e.$$.fragment,i),_(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&(h(l),h(t)),v(e,i),v(n)}}}function km(s,e,l){let t,n,r,i,f;Y(s,vn,c=>l(4,t=c)),Y(s,Cn,c=>l(5,n=c)),Y(s,_n,c=>l(1,r=c)),Y(s,Vn,c=>l(2,i=c)),Y(s,sn,c=>l(3,f=c)),Mr(()=>{Xr()});const o=new URLSearchParams(window.location.search);_n.set(o.get("style")||"dataviz");let a;function u(c){H[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return s.$$.update=()=>{s.$$.dirty&32&&n&&Vn.set(n),s.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,i,f,t,n,u]}class ym extends K{constructor(e){super(),X(this,e,km,vm,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new ym({target:document.getElementById("app")});
