import{S as V,i as Q,s as Y,e as L,b as B,av as pe,c as $,n as x,d as p,aR as es,g as E,h as U,a as T,k as h,p as b,z as xe,q as W,t as g,r as d,u as k,N as at,O as ft,P as ut,Q as ct,b0 as _n,o as w,aj as Me,a6 as fe,a7 as ue,as as nt,x as v,K as F,a5 as ve,a8 as sn,a9 as ts,v as J,aa as ns,ab as ls,ac as Te,ad as ss,ae as rs,b1 as $s,T as gt,b2 as gn,b3 as ps,G as pt,aN as Xt,W as ee,I as de,f as mt,aP as ms,a$ as Z,a3 as st,b4 as $e,H as X,D as ze,Y as te,aq as se,a4 as Wt,y as Ve,V as os,aY as Gt,b5 as Et,b6 as it,R as is,b7 as _s,b8 as gs,w as rn,b9 as ds,a_ as on,F as dn,m as an,j as hs,E as bs,aS as ks,aT as xt,L as ws,M as vs,A as ys}from"./index-61c71a43.js";import{e as hn,s as H,u as Qe,t as Ss,q as He,M as Cs,h as Ke,a as le,v as he,k as ot,R as Ls,C as et,f as $t,p as bn,g as Ts,d as kn,w as wn,c as vn,x as jt,i as Ut,B as Ms,S as Ns,n as Ps,H as Os,Z as Rs,G as Is,m as yn}from"./ZoomOutMap-d9f13b4d.js";import{P as re}from"./Popup-4e8b0122.js";function Ds(r){let e;return{c(){e=L("span"),B(e,"class","svelte-kzgqtg"),pe(e,"background",r[0])},m(l,t){$(l,e,t)},p(l,[t]){t&1&&pe(e,"background",l[0])},i:x,o:x,d(l){l&&p(e)}}}function As(r,e,l){let{color:t}=e;return r.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Ne extends V{constructor(e){super(),Q(this,e,As,Ds,Y,{color:0})}}const qs="/atip/browse_layout_v2/assets/help-d011708a.svg";function zs(r){let e,l;const t=r[1].default,n=at(t,r,r[4],null);return{c(){e=L("div"),n&&n.c(),B(e,"class","govuk-prose")},m(s,o){$(s,e,o),n&&n.m(e,null),l=!0},p(s,o){n&&n.p&&(!l||o&16)&&ft(n,t,s,s[4],l?ct(t,s[4],o,null):ut(s[4]),null)},i(s){l||(g(n,s),l=!0)},o(s){d(n,s),l=!1},d(s){s&&p(e),n&&n.d(s)}}}function Fs(r){let e,l,t,n,s,o,u;function a(f){r[3](f)}let i={title:"Help",$$slots:{default:[zs]},$$scope:{ctx:r}};return r[0]!==void 0&&(i.open=r[0]),t=new es({props:i}),E.push(()=>U(t,"open",a)),{c(){e=L("button"),e.innerHTML=`<img src="${qs}" title="Help" alt="Help"/>`,l=T(),h(t.$$.fragment),B(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,l,c),b(t,f,c),s=!0,o||(u=xe(e,"click",r[2]),o=!0)},p(f,[c]){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.open=f[0],W(()=>n=!1)),t.$set(m)},i(f){s||(g(t.$$.fragment,f),s=!0)},o(f){d(t.$$.fragment,f),s=!1},d(f){f&&(p(e),p(l)),k(t,f),o=!1,u()}}}function js(r,e,l){let{$$slots:t={},$$scope:n}=e,s=!1;const o=()=>l(0,s=!0);function u(a){s=a,l(0,s)}return r.$$set=a=>{"$$scope"in a&&l(4,n=a.$$scope)},[s,t,o,u,n]}class ce extends V{constructor(e){super(),Q(this,e,js,Fs,Y,{})}}const Hs=r=>({}),Sn=r=>({}),Bs=r=>({}),Cn=r=>({});function Gs(r){let e,l,t,n,s,o,u,a,i,f,c;const m=r[4].sidebar,_=at(m,r,r[3],Cn),y=r[4].main,S=at(y,r,r[3],Sn);return{c(){e=L("div"),l=L("aside"),t=L("div"),_&&_.c(),n=T(),s=L("button"),s.textContent="â†’",u=T(),a=L("main"),S&&S.c(),B(t,"class","sidebar-content content-container svelte-1n0etgd"),B(s,"type","button"),B(s,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),B(l,"class",o=_n(r[1]?"":"collapsed")+" svelte-1n0etgd"),pe(l,"--sidebarWidth",r[0]),B(a,"class","svelte-1n0etgd"),B(e,"class","overall-layout svelte-1n0etgd")},m(C,N){$(C,e,N),w(e,l),w(l,t),_&&_.m(t,null),w(l,n),w(l,s),w(e,u),w(e,a),S&&S.m(a,null),i=!0,f||(c=xe(s,"click",r[2]),f=!0)},p(C,[N]){_&&_.p&&(!i||N&8)&&ft(_,m,C,C[3],i?ct(m,C[3],N,Bs):ut(C[3]),Cn),(!i||N&2&&o!==(o=_n(C[1]?"":"collapsed")+" svelte-1n0etgd"))&&B(l,"class",o),(!i||N&1)&&pe(l,"--sidebarWidth",C[0]),S&&S.p&&(!i||N&8)&&ft(S,y,C,C[3],i?ct(y,C[3],N,Hs):ut(C[3]),Sn)},i(C){i||(g(_,C),g(S,C),i=!0)},o(C){d(_,C),d(S,C),i=!1},d(C){C&&p(e),_&&_.d(C),S&&S.d(C),f=!1,c()}}}function Es(r,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:s="25rem"}=e,o=!0;function u(){l(1,o=!o)}return r.$$set=a=>{"sidebarWidth"in a&&l(0,s=a.sidebarWidth),"$$scope"in a&&l(3,n=a.$$scope)},[s,o,u,n,t]}class Us extends V{constructor(e){super(),Q(this,e,Es,Gs,Y,{sidebarWidth:0})}}function Ln(r,e,l){const t=r.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Tn(r){let e,l,t,n=r[1]+"",s,o,u;return l=new Ne({props:{color:r[2]}}),{c(){e=L("li"),h(l.$$.fragment),t=T(),s=v(n),o=T()},m(a,i){$(a,e,i),b(l,e,null),w(e,t),w(e,s),w(e,o),u=!0},p(a,i){const f={};i&1&&(f.color=a[2]),l.$set(f),(!u||i&1)&&n!==(n=a[1]+"")&&F(s,n)},i(a){u||(g(l.$$.fragment,a),u=!0)},o(a){d(l.$$.fragment,a),u=!1},d(a){a&&p(e),k(l)}}}function Ws(r){let e,l,t=Me(r[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Tn(Ln(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){e=L("ul");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,u){$(o,e,u);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);l=!0},p(o,[u]){if(u&1){t=Me(o[0]);let a;for(a=0;a<t.length;a+=1){const i=Ln(o,t,a);n[a]?(n[a].p(i,u),g(n[a],1)):(n[a]=Tn(i),n[a].c(),g(n[a],1),n[a].m(e,null))}for(fe(),a=t.length;a<n.length;a+=1)s(a);ue()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)g(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&p(e),nt(n,o)}}}function Ys(r,e,l){let{rows:t}=e;return r.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Qt extends V{constructor(e){super(),Q(this,e,Ys,Ws,Y,{rows:0})}}function Mn(r){let e=r[0],l,t,n=Nn(r);return{c(){n.c(),l=ve()},m(s,o){n.m(s,o),$(s,l,o),t=!0},p(s,o){o&1&&Y(e,e=s[0])?(fe(),d(n,1,1,x),ue(),n=Nn(s),n.c(),g(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(g(n),t=!0)},o(s){d(n),t=!1},d(s){s&&p(l),n.d(s)}}}function Nn(r){let e;const l=r[16].default,t=at(l,r,r[15],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&32768)&&ft(t,l,n,n[15],e?ct(l,n[15],s,null):ut(n[15]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function Js(r){let e,l,t=r[0]&&Mn(r);return{c(){t&&t.c(),e=ve()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&g(t,1)):(t=Mn(n),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(fe(),d(t,1,1,()=>{t=null}),ue())},i(n){l||(g(t),l=!0)},o(n){d(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function Vs(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=sn("raster-source")}=e,{tiles:a}=e,{tileSize:i=void 0}=e,{bounds:f=null}=e,{scheme:c=null}=e,{attribution:m=null}=e,{minzoom:_=null}=e,{maxzoom:y=null}=e,{volatile:S=null}=e;const{map:C,self:N}=ts();J(r,C,P=>l(14,n=P)),J(r,N,P=>l(0,t=P));let A,I=!0;return ns(()=>{t&&A&&n&&(ls(C,t,A),Te(N,t=null,t),l(12,A=void 0))}),r.$$set=P=>{"id"in P&&l(3,u=P.id),"tiles"in P&&l(4,a=P.tiles),"tileSize"in P&&l(5,i=P.tileSize),"bounds"in P&&l(6,f=P.bounds),"scheme"in P&&l(7,c=P.scheme),"attribution"in P&&l(8,m=P.attribution),"minzoom"in P&&l(9,_=P.minzoom),"maxzoom"in P&&l(10,y=P.maxzoom),"volatile"in P&&l(11,S=P.volatile),"$$scope"in P&&l(15,o=P.$$scope)},r.$$.update=()=>{r.$$.dirty&24569&&n&&t!==u&&(Te(N,t=u,t),ss(n,t,rs({type:"raster",tiles:a,tileSize:i,bounds:f,scheme:c,attribution:m,minzoom:_,maxzoom:y,volatile:S}),P=>n&&P===t,()=>{t&&(l(12,A=n==null?void 0:n.getSource(t)),l(13,I=!0))})),r.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,A=n==null?void 0:n.getSource(u))})),r.$$.dirty&12304&&A&&(I?l(13,I=!1):A.setTiles(a))},[t,C,N,u,a,i,f,c,m,_,y,S,A,I,n,o,s]}class Qs extends V{constructor(e){super(),Q(this,e,Vs,Js,Y,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function Ks(r){let e;const l=r[16].default,t=at(l,r,r[24],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16777216)&&ft(t,l,n,n[24],e?ct(l,n[24],s,null):ut(n[24]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function Zs(r){let e,l,t;function n(o){r[17](o)}let s={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Ks]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.hovered=r[0]),e=new $s({props:s}),E.push(()=>U(e,"hovered",n)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(o,u){b(e,o,u),t=!0},p(o,[u]){const a={};u&2&&(a.id=o[1]),u&4&&(a.source=o[2]),u&8&&(a.sourceLayer=o[3]),u&16&&(a.beforeId=o[4]),u&32&&(a.beforeLayerType=o[5]),u&64&&(a.paint=o[6]),u&128&&(a.layout=o[7]),u&256&&(a.filter=o[8]),u&512&&(a.applyToClusters=o[9]),u&1024&&(a.minzoom=o[10]),u&2048&&(a.maxzoom=o[11]),u&4096&&(a.hoverCursor=o[12]),u&8192&&(a.manageHoverState=o[13]),u&16384&&(a.eventsIfTopMost=o[14]),u&32768&&(a.interactive=o[15]),u&16777216&&(a.$$scope={dirty:u,ctx:o}),!l&&u&1&&(l=!0,a.hovered=o[0],W(()=>l=!1)),e.$set(a)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function Xs(r,e,l){let{$$slots:t={},$$scope:n}=e,{id:s=sn("symbol")}=e,{source:o=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:a=void 0}=e,{beforeLayerType:i=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:m=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:N=!1}=e,{hovered:A=null}=e,{eventsIfTopMost:I=!1}=e,{interactive:P=!0}=e;function M(z){A=z,l(0,A)}function R(z){gt.call(this,r,z)}function D(z){gt.call(this,r,z)}function O(z){gt.call(this,r,z)}function j(z){gt.call(this,r,z)}function ne(z){gt.call(this,r,z)}function oe(z){gt.call(this,r,z)}return r.$$set=z=>{"id"in z&&l(1,s=z.id),"source"in z&&l(2,o=z.source),"sourceLayer"in z&&l(3,u=z.sourceLayer),"beforeId"in z&&l(4,a=z.beforeId),"beforeLayerType"in z&&l(5,i=z.beforeLayerType),"paint"in z&&l(6,f=z.paint),"layout"in z&&l(7,c=z.layout),"filter"in z&&l(8,m=z.filter),"applyToClusters"in z&&l(9,_=z.applyToClusters),"minzoom"in z&&l(10,y=z.minzoom),"maxzoom"in z&&l(11,S=z.maxzoom),"hoverCursor"in z&&l(12,C=z.hoverCursor),"manageHoverState"in z&&l(13,N=z.manageHoverState),"hovered"in z&&l(0,A=z.hovered),"eventsIfTopMost"in z&&l(14,I=z.eventsIfTopMost),"interactive"in z&&l(15,P=z.interactive),"$$scope"in z&&l(24,n=z.$$scope)},[A,s,o,u,a,i,f,c,m,_,y,S,C,N,I,P,t,M,R,D,O,j,ne,oe,n]}class fn extends V{constructor(e){super(),Q(this,e,Xs,Zs,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Pn(r){let e=r[0],l,t,n=On(r);return{c(){n.c(),l=ve()},m(s,o){n.m(s,o),$(s,l,o),t=!0},p(s,o){o&1&&Y(e,e=s[0])?(fe(),d(n,1,1,x),ue(),n=On(s),n.c(),g(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(g(n),t=!0)},o(s){d(n),t=!1},d(s){s&&p(l),n.d(s)}}}function On(r){let e;const l=r[15].default,t=at(l,r,r[14],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16384)&&ft(t,l,n,n[14],e?ct(l,n[14],s,null):ut(n[14]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function xs(r){let e,l,t=r[0]&&Pn(r);return{c(){t&&t.c(),e=ve()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&g(t,1)):(t=Pn(n),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(fe(),d(t,1,1,()=>{t=null}),ue())},i(n){l||(g(t),l=!0)},o(n){d(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function er(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=sn("vector")}=e,{url:a=null}=e,{tiles:i=null}=e,{promoteId:f=null}=e,{bounds:c=null}=e,{scheme:m=null}=e,{attribution:_=null}=e,{minzoom:y=null}=e,{maxzoom:S=null}=e,{volatile:C=null}=e;if(a&&a.includes("pmtiles://")&&!gn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let P=new ps;gn.addProtocol("pmtiles",P.tile)}const{map:N,self:A}=ts();J(r,N,P=>l(13,n=P)),J(r,A,P=>l(0,t=P));let I;return ns(()=>{t&&n&&(ls(N,t,I),Te(A,t=null,t),I=void 0)}),r.$$set=P=>{"id"in P&&l(3,u=P.id),"url"in P&&l(4,a=P.url),"tiles"in P&&l(5,i=P.tiles),"promoteId"in P&&l(6,f=P.promoteId),"bounds"in P&&l(7,c=P.bounds),"scheme"in P&&l(8,m=P.scheme),"attribution"in P&&l(9,_=P.attribution),"minzoom"in P&&l(10,y=P.minzoom),"maxzoom"in P&&l(11,S=P.maxzoom),"volatile"in P&&l(12,C=P.volatile),"$$scope"in P&&l(14,o=P.$$scope)},r.$$.update=()=>{r.$$.dirty&16377&&n&&t!==u&&(Te(A,t=u,t),ss(n,t,rs({type:"vector",url:a,tiles:i,promoteId:f,bounds:c,scheme:m,attribution:_,minzoom:y,maxzoom:S,volatile:C}),P=>n&&P===t,()=>{t&&(I=n==null?void 0:n.getSource(t))})),r.$$.dirty&8200&&(n==null||n.on("style.load",()=>{I=n==null?void 0:n.getSource(u)}))},[t,N,A,u,a,i,f,c,m,_,y,S,C,n,o,s]}class me extends V{constructor(e){super(),Q(this,e,er,xs,Y,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function Rn(r,e,l){const t=r.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function tr(r){let e,l,t;return l=new mt({props:{$$slots:{default:[lr]},$$scope:{ctx:r}}}),l.$on("click",r[9]),{c(){e=L("div"),h(l.$$.fragment)},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&16384&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function nr(r){let e,l,t,n,s,o,u,a,i,f;l=new mt({props:{$$slots:{default:[sr]},$$scope:{ctx:r}}}),l.$on("click",r[4]);let c=r[2]&&In(r);s=new He({props:{label:"Help",$$slots:{default:[rr]},$$scope:{ctx:r}}}),u=new ms({}),u.$on("click",r[3]);let m=Me(r[0]),_=[];for(let S=0;S<m.length;S+=1)_[S]=Dn(Rn(r,m,S));const y=S=>d(_[S],1,1,()=>{_[S]=null});return{c(){e=L("div"),h(l.$$.fragment),t=T(),c&&c.c(),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T();for(let S=0;S<_.length;S+=1)_[S].c();i=ve()},m(S,C){$(S,e,C),b(l,e,null),$(S,t,C),c&&c.m(S,C),$(S,n,C),b(s,S,C),$(S,o,C),b(u,S,C),$(S,a,C);for(let N=0;N<_.length;N+=1)_[N]&&_[N].m(S,C);$(S,i,C),f=!0},p(S,C){const N={};C&16384&&(N.$$scope={dirty:C,ctx:S}),l.$set(N),S[2]?c?c.p(S,C):(c=In(S),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const A={};if(C&16384&&(A.$$scope={dirty:C,ctx:S}),s.$set(A),C&65){m=Me(S[0]);let I;for(I=0;I<m.length;I+=1){const P=Rn(S,m,I);_[I]?(_[I].p(P,C),g(_[I],1)):(_[I]=Dn(P),_[I].c(),g(_[I],1),_[I].m(i.parentNode,i))}for(fe(),I=m.length;I<_.length;I+=1)y(I);ue()}},i(S){if(!f){g(l.$$.fragment,S),g(s.$$.fragment,S),g(u.$$.fragment,S);for(let C=0;C<m.length;C+=1)g(_[C]);f=!0}},o(S){d(l.$$.fragment,S),d(s.$$.fragment,S),d(u.$$.fragment,S),_=_.filter(Boolean);for(let C=0;C<_.length;C+=1)d(_[C]);f=!1},d(S){S&&(p(e),p(t),p(n),p(o),p(a),p(i)),k(l),c&&c.d(S),k(s,S),k(u,S),nt(_,S)}}}function lr(r){let e;return{c(){e=v("Measure lines")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function sr(r){let e;return{c(){e=v("Stop measuring")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function In(r){let e,l,t=r[2].toFixed(2)+"",n,s;return{c(){e=L("p"),l=v("Length: "),n=v(t),s=v(" meters")},m(o,u){$(o,e,u),w(e,l),w(e,n),w(e,s)},p(o,u){u&4&&t!==(t=o[2].toFixed(2)+"")&&F(n,t)},d(o){o&&p(e)}}}function rr(r){let e;return{c(){e=L("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){$(l,e,t)},p:x,d(l){l&&p(e)}}}function or(r){let e,l;return{c(){e=L("span"),l=T(),B(e,"class","dot svelte-1tzt432")},m(t,n){$(t,e,n),$(t,l,n)},p:x,d(t){t&&(p(e),p(l))}}}function Dn(r){let e,l,t;function n(u){r[7](u,r[11],r[12],r[13])}function s(){return r[8](r[13])}let o={draggable:!0,$$slots:{default:[or]},$$scope:{ctx:r}};return r[11]!==void 0&&(o.lngLat=r[11]),e=new Cs({props:o}),E.push(()=>U(e,"lngLat",n)),e.$on("click",s),{c(){h(e.$$.fragment)},m(u,a){b(e,u,a),t=!0},p(u,a){r=u;const i={};a&16384&&(i.$$scope={dirty:a,ctx:r}),!l&&a&1&&(l=!0,i.lngLat=r[11],W(()=>l=!1)),e.$set(i)},i(u){t||(g(e.$$.fragment,u),t=!0)},o(u){d(e.$$.fragment,u),t=!1},d(u){k(e,u)}}}function ir(r){let e,l;const t=[H("measurement-line"),{paint:{"line-color":Qe.measuringLine,"line-width":5}}];let n={};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new de({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u={};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function ar(r){let e,l,t,n,s,o,u;const a=[nr,tr],i=[];function f(c,m){return c[1]?0:1}return e=f(r),l=i[e]=a[e](r),n=new pt({props:{data:r[0].length<2?hn():Xt(r[0]),$$slots:{default:[ir]},$$scope:{ctx:r}}}),{c(){l.c(),t=T(),h(n.$$.fragment)},m(c,m){i[e].m(c,m),$(c,t,m),b(n,c,m),s=!0,o||(u=xe(window,"keydown",r[5]),o=!0)},p(c,[m]){let _=e;e=f(c),e===_?i[e].p(c,m):(fe(),d(i[_],1,1,()=>{i[_]=null}),ue(),l=i[e],l?l.p(c,m):(l=i[e]=a[e](c),l.c()),g(l,1),l.m(t.parentNode,t));const y={};m&1&&(y.data=c[0].length<2?hn():Xt(c[0])),m&16384&&(y.$$scope={dirty:m,ctx:c}),n.$set(y)},i(c){s||(g(l),g(n.$$.fragment,c),s=!0)},o(c){d(l),d(n.$$.fragment,c),s=!1},d(c){c&&p(t),i[e].d(c),k(n,c),o=!1,u()}}}function fr(r,e,l){let t,n=!1,s=[];function o(y){return y.length<2?null:1e3*Ss(Xt(y),{units:"kilometers"})}function u(y){l(0,s=[...s,y.detail.lngLat.toArray()])}function a(){l(1,n=!1),l(0,s=[])}function i(y){n&&y.key==="Escape"&&(y.stopPropagation(),a())}function f(y){s.splice(y,1),l(0,s)}function c(y,S,C,N){C[N]=y,l(0,s)}const m=y=>f(y),_=()=>l(1,n=!0);return r.$$.update=()=>{r.$$.dirty&1&&l(2,t=o(s))},[s,n,t,u,a,i,f,c,m,_]}class ur extends V{constructor(e){super(),Q(this,e,fr,ar,Y,{})}}function cr(r){let e=new Map;for(let[t,n]of Object.entries(r.schemes))e.set(t,n);r.features=r.features.filter(t=>$r(t));let l=1;for(let t of r.features){let n=e.get(t.properties.scheme_reference);n.browse&&(t.properties.funding_programme=n.browse.funding_programme,t.properties.current_milestone=n.browse.current_milestone,t.id=l++)}return e}function $r(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}const en=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"],K={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Ae=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function tn(){let[r,e]=as(en,K.funding_programmes);return[Ke(["get","funding_programme"],r,"grey"),e]}function pr(){let r=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,l]=as(r,K.current_milestone);return[Ke(["get","current_milestone"],e,"grey"),l]}function as(r,e){let l=[],t={},n=0;for(let s of r){let o=e[n++%e.length];t[s]=o,l.push([s,o])}return[t,l]}function mr(r){let e;return{c(){e=v(`Open Government License
  `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function _r(r){let e,l,t,n,s;return t=new Z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[mr]},$$scope:{ctx:r}}}),{c(){e=L("p"),l=v("License: "),h(t.$$.fragment),n=v(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(o,u){$(o,e,u),w(e,l),b(t,e,null),w(e,n),s=!0},p(o,[u]){const a={};u&1&&(a.$$scope={dirty:u,ctx:o}),t.$set(a)},i(o){s||(g(t.$$.fragment,o),s=!0)},o(o){d(t.$$.fragment,o),s=!1},d(o){o&&p(e),k(t)}}}class Pe extends V{constructor(e){super(),Q(this,e,null,_r,Y,{})}}function An(r,e,l){const t=r.slice();return t[2]=e[l],t}function qn(r,e,l){const t=r.slice();return t[5]=e[l],t}function zn(r){let e,l;return{c(){e=L("span"),l=v(`Â 
    `),pe(e,"background",r[5]),pe(e,"width","100%"),pe(e,"border","1px solid black")},m(t,n){$(t,e,n),w(e,l)},p(t,n){n&1&&pe(e,"background",t[5])},d(t){t&&p(e)}}}function Fn(r){let e,l=r[2]+"",t;return{c(){e=L("span"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&2&&l!==(l=n[2]+"")&&F(t,l)},d(n){n&&p(e)}}}function gr(r){let e,l,t,n=Me(r[0]),s=[];for(let a=0;a<n.length;a+=1)s[a]=zn(qn(r,n,a));let o=Me(r[1]),u=[];for(let a=0;a<o.length;a+=1)u[a]=Fn(An(r,o,a));return{c(){e=L("div");for(let a=0;a<s.length;a+=1)s[a].c();l=T(),t=L("div");for(let a=0;a<u.length;a+=1)u[a].c();pe(e,"display","flex"),pe(t,"display","flex"),pe(t,"justify-content","space-between")},m(a,i){$(a,e,i);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null);$(a,l,i),$(a,t,i);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(a,[i]){if(i&1){n=Me(a[0]);let f;for(f=0;f<n.length;f+=1){const c=qn(a,n,f);s[f]?s[f].p(c,i):(s[f]=zn(c),s[f].c(),s[f].m(e,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=n.length}if(i&2){o=Me(a[1]);let f;for(f=0;f<o.length;f+=1){const c=An(a,o,f);u[f]?u[f].p(c,i):(u[f]=Fn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}},i:x,o:x,d(a){a&&(p(e),p(l),p(t)),nt(s,a),nt(u,a)}}}function dr(r,e,l){let{colorScale:t}=e,{limits:n}=e;return r.$$set=s=>{"colorScale"in s&&l(0,t=s.colorScale),"limits"in s&&l(1,n=s.limits)},[t,n]}class Fe extends V{constructor(e){super(),Q(this,e,dr,gr,Y,{colorScale:0,limits:1})}}function be(r){let e=new URLSearchParams(window.location.search).has(r),l=st(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(r,"1"):n.searchParams.delete(r),window.history.replaceState(null,"",n.toString())}),l}function _t(r,e,l,t){let n=e,s=new URLSearchParams(window.location.search).get(r);if(s!=null)try{n=t(s)}catch(u){console.warn(`Parsing URL parameter ${r}=${s} failed, using default value: ${u}`)}let o=st(n);return o.subscribe(u=>{let a=new URL(window.location.href),i=l(u);i==null?a.searchParams.delete(r):a.searchParams.set(r,i),window.history.replaceState(null,"",a.toString())}),o}function jn(r){const e=r[14].OA21CD;r[15]=e;const l=r[14][r[3].kind];r[16]=l}function hr(r){let e;return{c(){e=v("Percent of households with a car")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function br(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function kr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function wr(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function vr(r){let e,l,t,n,s,o,u,a,i,f,c,m;return t=new Z({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[br]},$$scope:{ctx:r}}}),s=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[kr]},$$scope:{ctx:r}}}),f=new Z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[wr]},$$scope:{ctx:r}}}),{c(){e=L("p"),l=v("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),n=v(". Output area boundaries from "),h(s.$$.fragment),o=v("."),u=T(),a=L("p"),i=v("License: "),h(f.$$.fragment),c=v(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(_,y){$(_,e,y),w(e,l),b(t,e,null),w(e,n),b(s,e,null),w(e,o),$(_,u,y),$(_,a,y),w(a,i),b(f,a,null),w(a,c),m=!0},p(_,y){const S={};y&131072&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const C={};y&131072&&(C.$$scope={dirty:y,ctx:_}),s.$set(C);const N={};y&131072&&(N.$$scope={dirty:y,ctx:_}),f.$set(N)},i(_){m||(g(t.$$.fragment,_),g(s.$$.fragment,_),g(f.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(s.$$.fragment,_),d(f.$$.fragment,_),m=!1},d(_){_&&(p(e),p(u),p(a)),k(t),k(s),k(f)}}}function yr(r){let e,l,t;return l=new ce({props:{$$slots:{default:[vr]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Hn(r){let e,l;return e=new Fe({props:{colorScale:r[4],limits:lt(r[3].kind)}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=lt(t[3].kind)),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Sr(r){let e;return{c(){e=v("Average cars per household")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Cr(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Lr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Tr(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Mr(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y;return s=new Z({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Cr]},$$scope:{ctx:r}}}),u=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Lr]},$$scope:{ctx:r}}}),m=new Z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Tr]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=T(),t=L("p"),n=v("Car/van availability data is from the 2021 census, via "),h(s.$$.fragment),o=v(". Output area boundaries from "),h(u.$$.fragment),a=v("."),i=T(),f=L("p"),c=v("License: "),h(m.$$.fragment),_=v(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(S,C){$(S,e,C),$(S,l,C),$(S,t,C),w(t,n),b(s,t,null),w(t,o),b(u,t,null),w(t,a),$(S,i,C),$(S,f,C),w(f,c),b(m,f,null),w(f,_),y=!0},p(S,C){const N={};C&131072&&(N.$$scope={dirty:C,ctx:S}),s.$set(N);const A={};C&131072&&(A.$$scope={dirty:C,ctx:S}),u.$set(A);const I={};C&131072&&(I.$$scope={dirty:C,ctx:S}),m.$set(I)},i(S){y||(g(s.$$.fragment,S),g(u.$$.fragment,S),g(m.$$.fragment,S),y=!0)},o(S){d(s.$$.fragment,S),d(u.$$.fragment,S),d(m.$$.fragment,S),y=!1},d(S){S&&(p(e),p(l),p(t),p(i),p(f)),k(s),k(u),k(m)}}}function Nr(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Mr]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Bn(r){let e,l;return e=new Fe({props:{colorScale:r[4],limits:lt(r[3].kind)}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=lt(t[3].kind)),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Pr(r){let e;return{c(){e=v("Population density")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Or(r){let e;return{c(){e=v(`NOMIS TS006
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Rr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ir(r){let e,l,t,n,s,o,u,a,i;return t=new Z({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Or]},$$scope:{ctx:r}}}),s=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Rr]},$$scope:{ctx:r}}}),a=new Pe({}),{c(){e=L("p"),l=v("Population density data is from the 2021 census, via "),h(t.$$.fragment),n=v(". Output area boundaries from "),h(s.$$.fragment),o=v("."),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,l),b(t,e,null),w(e,n),b(s,e,null),w(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&131072&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const _={};c&131072&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){i||(g(t.$$.fragment,f),g(s.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),k(t),k(s),k(a,f)}}}function Dr(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Ir]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Gn(r){let e,l,t,n;return t=new Fe({props:{colorScale:r[4],limits:lt(r[3].kind).map(En)}}),{c(){e=L("p"),e.textContent="(people per square kilometres)",l=T(),h(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&8&&(u.limits=lt(s[3].kind).map(En)),t.$set(u)},i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),k(t,s)}}}function Ar(r){let e,l,t,n=r[16].toLocaleString()+"",s,o,u=r[15]+"",a;return{c(){e=L("p"),l=v("There are "),t=L("b"),s=v(n),o=v(`
          people per square kilometre in `),a=v(u)},m(i,f){$(i,e,f),w(e,l),w(e,t),w(t,s),w(e,o),w(e,a)},p(i,f){f&16392&&n!==(n=i[16].toLocaleString()+"")&&F(s,n),f&16384&&u!==(u=i[15]+"")&&F(a,u)},d(i){i&&p(e)}}}function qr(r){let e,l,t=r[15]+"",n,s,o,u=r[16]+"",a,i;return{c(){e=L("p"),l=v("Households in "),n=v(t),s=v(` have an average of
          `),o=L("b"),a=v(u),i=v(`
          cars`)},m(f,c){$(f,e,c),w(e,l),w(e,n),w(e,s),w(e,o),w(o,a),w(e,i)},p(f,c){c&16384&&t!==(t=f[15]+"")&&F(n,t),c&16392&&u!==(u=f[16]+"")&&F(a,u)},d(f){f&&p(e)}}}function zr(r){let e,l,t=r[16]+"",n,s,o,u=r[15]+"",a,i;return{c(){e=L("p"),l=L("b"),n=v(t),s=v("%"),o=v(`
          of households in `),a=v(u),i=v(" have 1 or more cars")},m(f,c){$(f,e,c),w(e,l),w(l,n),w(l,s),w(e,o),w(e,a),w(e,i)},p(f,c){c&16392&&t!==(t=f[16]+"")&&F(n,t),c&16384&&u!==(u=f[15]+"")&&F(a,u)},d(f){f&&p(e)}}}function Fr(r){jn(r);let e;function l(s,o){return s[3].kind=="percent_households_with_car"?zr:s[3].kind=="average_cars_per_household"?qr:Ar}let t=l(r),n=t(r);return{c(){n.c(),e=ve()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){jn(s),t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function jr(r){let e,l;return e=new re({props:{$$slots:{default:[Fr,({props:t})=>({14:t}),({props:t})=>t?16384:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&147464&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Hr(r){let e,l,t,n;const s=[H(Ge),{sourceLayer:Ge},{paint:{"fill-color":he(["get",r[3].kind],lt(r[3].kind),r[4]),"fill-opacity":X(.5,.7)}},{layout:{visibility:r[3].kind!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[jr]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new ze({props:o}),e.$on("click",r[6]);const u=[H(`${Ge}-outline`),{sourceLayer:Ge},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3].kind!=""?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new de({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&24?te(s,[f&0&&se(H(Ge)),f&0&&{sourceLayer:Ge},f&24&&{paint:{"fill-color":he(["get",i[3].kind],lt(i[3].kind),i[4]),"fill-opacity":X(.5,.7)}},f&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}},s[4],s[5],s[6]]):{};f&131080&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&8?te(u,[f&0&&se(H(`${Ge}-outline`)),f&0&&{sourceLayer:Ge},u[2],f&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function Br(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y;function S(O){r[7](O)}let C={$$slots:{right:[yr],default:[hr]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new le({props:C}),E.push(()=>U(e,"checked",S)),e.$on("change",r[8]);let N=r[3].kind=="percent_households_with_car"&&Hn(r);function A(O){r[9](O)}let I={$$slots:{right:[Nr],default:[Sr]},$$scope:{ctx:r}};r[1]!==void 0&&(I.checked=r[1]),s=new le({props:I}),E.push(()=>U(s,"checked",A)),s.$on("change",r[10]);let P=r[3].kind=="average_cars_per_household"&&Bn(r);function M(O){r[11](O)}let R={$$slots:{right:[Dr],default:[Pr]},$$scope:{ctx:r}};r[2]!==void 0&&(R.checked=r[2]),i=new le({props:R}),E.push(()=>U(i,"checked",M)),i.$on("change",r[12]);let D=r[3].kind=="population_density"&&Gn(r);return _=new me({props:{url:`pmtiles://${$e()}/v1/${Ge}.pmtiles`,$$slots:{default:[Hr]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),N&&N.c(),n=T(),h(s.$$.fragment),u=T(),P&&P.c(),a=T(),h(i.$$.fragment),c=T(),D&&D.c(),m=T(),h(_.$$.fragment)},m(O,j){b(e,O,j),$(O,t,j),N&&N.m(O,j),$(O,n,j),b(s,O,j),$(O,u,j),P&&P.m(O,j),$(O,a,j),b(i,O,j),$(O,c,j),D&&D.m(O,j),$(O,m,j),b(_,O,j),y=!0},p(O,[j]){const ne={};j&131072&&(ne.$$scope={dirty:j,ctx:O}),!l&&j&1&&(l=!0,ne.checked=O[0],W(()=>l=!1)),e.$set(ne),O[3].kind=="percent_households_with_car"?N?(N.p(O,j),j&8&&g(N,1)):(N=Hn(O),N.c(),g(N,1),N.m(n.parentNode,n)):N&&(fe(),d(N,1,1,()=>{N=null}),ue());const oe={};j&131072&&(oe.$$scope={dirty:j,ctx:O}),!o&&j&2&&(o=!0,oe.checked=O[1],W(()=>o=!1)),s.$set(oe),O[3].kind=="average_cars_per_household"?P?(P.p(O,j),j&8&&g(P,1)):(P=Bn(O),P.c(),g(P,1),P.m(a.parentNode,a)):P&&(fe(),d(P,1,1,()=>{P=null}),ue());const z={};j&131072&&(z.$$scope={dirty:j,ctx:O}),!f&&j&4&&(f=!0,z.checked=O[2],W(()=>f=!1)),i.$set(z),O[3].kind=="population_density"?D?(D.p(O,j),j&8&&g(D,1)):(D=Gn(O),D.c(),g(D,1),D.m(m.parentNode,m)):D&&(fe(),d(D,1,1,()=>{D=null}),ue());const q={};j&131080&&(q.$$scope={dirty:j,ctx:O}),_.$set(q)},i(O){y||(g(e.$$.fragment,O),g(N),g(s.$$.fragment,O),g(P),g(i.$$.fragment,O),g(D),g(_.$$.fragment,O),y=!0)},o(O){d(e.$$.fragment,O),d(N),d(s.$$.fragment,O),d(P),d(i.$$.fragment,O),d(D),d(_.$$.fragment,O),y=!1},d(O){O&&(p(t),p(n),p(u),p(a),p(c),p(m)),k(e,O),N&&N.d(O),k(s,O),P&&P.d(O),k(i,O),D&&D.d(O),k(_,O)}}}let Ge="census_output_areas";function Gr(r){return r.show?r.kind:null}function Er(r){return{show:!0,kind:r}}function lt(r){return r=="percent_households_with_car"?[0,20,40,60,80,100]:r=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const En=r=>r.toLocaleString();function Ur(r,e,l){let t,n=K.sequential_low_to_high,o=_t(Ge,{show:!1,kind:""},Gr,Er);J(r,o,N=>l(3,t=N));let u=t.kind=="percent_households_with_car",a=t.kind=="average_cars_per_household",i=t.kind=="population_density";function f(N){let A=N.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${A}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${A}`,"_blank")}function c(N){u=N,l(0,u)}const m=()=>{l(1,a=!1),l(2,i=!1)};function _(N){a=N,l(1,a)}const y=()=>{l(0,u=!1),l(2,i=!1)};function S(N){i=N,l(2,i)}const C=()=>{l(0,u=!1),l(1,a=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(u?(Te(o,t.show=!0,t),Te(o,t.kind="percent_households_with_car",t)):a?(Te(o,t.show=!0,t),Te(o,t.kind="average_cars_per_household",t)):i?(Te(o,t.show=!0,t),Te(o,t.kind="population_density",t)):(Te(o,t.show=!1,t),Te(o,t.kind="",t)))},[u,a,i,t,n,o,f,c,m,_,y,S,C]}class Wr extends V{constructor(e){super(),Q(this,e,Ur,Br,Y,{})}}function Yr(r){let e,l,t;return e=new Ne({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Combined authorities`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Jr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Vr(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Jr]},$$scope:{ctx:r}}}),o=new Pe({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of December 2022."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function Qr(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Vr]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Kr(r){let e,l=r[4].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&F(t,l)},d(n){n&&p(e)}}}function Zr(r){let e,l;return e=new re({props:{$$slots:{default:[Kr,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Xr(r){let e,l,t,n;const s=[H(dt),{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Zr]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new ze({props:o}),e.$on("click",eo);const u=[H(`${dt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new de({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&se(H(dt)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[3],s[4],s[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&se(H(`${dt}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function xr(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Qr],default:[Yr]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new pt({props:{data:`${$e()}/v1/${dt}.geojson`,$$slots:{default:[Xr]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let dt="combined_authorities";function eo(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function to(r,e,l){let t,n=K.combined_authorities,s=be(dt);J(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class no extends V{constructor(e){super(),Q(this,e,to,xr,Y,{})}}function lo(r){let e;return{c(){e=v("Indices of Multiple Deprivation")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function so(r){let e;return{c(){e=v(`DLUCH GIS
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ro(r){let e;return{c(){e=v(`here
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function oo(r){let e,l,t,n,s,o,u,a,i;return t=new Z({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[so]},$$scope:{ctx:r}}}),s=new Z({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ro]},$$scope:{ctx:r}}}),a=new Pe({}),{c(){e=L("p"),l=v("The 2019 English IMD scores come from "),h(t.$$.fragment),n=v(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(s.$$.fragment),o=v("."),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,l),b(t,e,null),w(e,n),b(s,e,null),w(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){i||(g(t.$$.fragment,f),g(s.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),k(t),k(s),k(a,f)}}}function io(r){let e,l,t;return l=new ce({props:{$$slots:{default:[oo]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Un(r){let e,l;return e=new Fe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ao(r){let e,l=r[5].LSOA11CD+"",t,n,s,o=r[5].score+"",u,a,i,f,c,m=r[5].rank.toLocaleString()+"",_,y;return{c(){e=L("p"),t=v(l),n=v(` has an IMD score of
        `),s=L("b"),u=v(o),a=T(),i=L("p"),f=v("Rank: "),c=L("b"),_=v(m),y=v(`
        / 32,844 LSOAs`)},m(S,C){$(S,e,C),w(e,t),w(e,n),w(e,s),w(s,u),$(S,a,C),$(S,i,C),w(i,f),w(i,c),w(c,_),w(i,y)},p(S,C){C&32&&l!==(l=S[5].LSOA11CD+"")&&F(t,l),C&32&&o!==(o=S[5].score+"")&&F(u,o),C&32&&m!==(m=S[5].rank.toLocaleString()+"")&&F(_,m)},d(S){S&&(p(e),p(a),p(i))}}}function fo(r){let e,l;return e=new re({props:{$$slots:{default:[ao,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function uo(r){let e,l,t,n;const s=[H(Ee),{sourceLayer:Ee},{paint:{"fill-color":he(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":X(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[fo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new ze({props:o});const u=[H(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new de({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&7?te(s,[f&0&&se(H(Ee)),f&0&&{sourceLayer:Ee},f&6&&{paint:{"fill-color":he(["-",10,["get","decile"]],i[2],i[1]),"fill-opacity":X(.5,.7)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5]]):{};f&64&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&1?te(u,[f&0&&se(H(`${Ee}-outline`)),f&0&&{sourceLayer:Ee},u[2],f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function co(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[io],default:[lo]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&Un(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${Ee}.pmtiles`,$$slots:{default:[uo]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=Un(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Ee="imd";function $o(r,e,l){let t,n=K.sequential_low_to_high,s=[0,2,4,6,8,10],o=be(Ee);J(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class po extends V{constructor(e){super(),Q(this,e,$o,co,Y,{})}}function mo(r){let e,l,t;return e=new Ne({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Local Authority Districts`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function _o(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function go(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[_o]},$$scope:{ctx:r}}}),o=new Pe({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of January 2024."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function ho(r){let e,l,t;return l=new ce({props:{$$slots:{default:[go]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function bo(r){let e,l=r[4].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&F(t,l)},d(n){n&&p(e)}}}function ko(r){let e,l;return e=new re({props:{$$slots:{default:[bo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function wo(r){let e,l,t,n;const s=[H(ht),{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[ko]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new ze({props:o}),e.$on("click",yo);const u=[H(`${ht}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new de({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&se(H(ht)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[3],s[4],s[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&se(H(`${ht}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function vo(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[ho],default:[mo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new pt({props:{data:`${$e()}/v1/${ht}.geojson`,$$slots:{default:[wo]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let ht="local_authority_districts";function yo(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function So(r,e,l){let t,n=K.local_authority_districts,s=be(ht);J(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Co extends V{constructor(e){super(),Q(this,e,So,vo,Y,{})}}function Lo(r){let e,l,t;return e=new Ne({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Local Planning Authorities`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function To(r){let e;return{c(){e=v(`local authority
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Mo(r){let e;return{c(){e=v(`national park authorit
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function No(r){let e;return{c(){e=v(`development corporation
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Po(r){let e;return{c(){e=v("this map")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Oo(r){let e;return{c(){e=v(`planning.data.gov.uk
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ro(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y,S,C,N,A,I,P,M,R;return t=new Z({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[To]},$$scope:{ctx:r}}}),s=new Z({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Mo]},$$scope:{ctx:r}}}),u=new Z({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[No]},$$scope:{ctx:r}}}),_=new Z({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Po]},$$scope:{ctx:r}}}),A=new Z({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Oo]},$$scope:{ctx:r}}}),M=new Pe({}),{c(){e=L("p"),l=v("LPAs may be a "),h(t.$$.fragment),n=v(", "),h(s.$$.fragment),o=v("y, or "),h(u.$$.fragment),a=v("."),i=T(),f=L("p"),c=L("strong"),m=v(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(_.$$.fragment),y=v(" to get more details."),S=T(),C=L("p"),N=v("Data from ONS Geography via "),h(A.$$.fragment),I=v(", as of November 2022."),P=T(),h(M.$$.fragment)},m(D,O){$(D,e,O),w(e,l),b(t,e,null),w(e,n),b(s,e,null),w(e,o),b(u,e,null),w(e,a),$(D,i,O),$(D,f,O),w(f,c),w(c,m),b(_,c,null),w(c,y),$(D,S,O),$(D,C,O),w(C,N),b(A,C,null),w(C,I),$(D,P,O),b(M,D,O),R=!0},p(D,O){const j={};O&32&&(j.$$scope={dirty:O,ctx:D}),t.$set(j);const ne={};O&32&&(ne.$$scope={dirty:O,ctx:D}),s.$set(ne);const oe={};O&32&&(oe.$$scope={dirty:O,ctx:D}),u.$set(oe);const z={};O&32&&(z.$$scope={dirty:O,ctx:D}),_.$set(z);const q={};O&32&&(q.$$scope={dirty:O,ctx:D}),A.$set(q)},i(D){R||(g(t.$$.fragment,D),g(s.$$.fragment,D),g(u.$$.fragment,D),g(_.$$.fragment,D),g(A.$$.fragment,D),g(M.$$.fragment,D),R=!0)},o(D){d(t.$$.fragment,D),d(s.$$.fragment,D),d(u.$$.fragment,D),d(_.$$.fragment,D),d(A.$$.fragment,D),d(M.$$.fragment,D),R=!1},d(D){D&&(p(e),p(i),p(f),p(S),p(C),p(P)),k(t),k(s),k(u),k(_),k(A),k(M,D)}}}function Io(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Ro]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Do(r){let e,l=r[4].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&F(t,l)},d(n){n&&p(e)}}}function Ao(r){let e,l;return e=new re({props:{$$slots:{default:[Do,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function qo(r){let e,l,t,n;const s=[H(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[Ao]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new ze({props:o});const u=[H(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new de({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&se(H(Ue)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&se(H(`${Ue}-outline`)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function zo(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Io],default:[Lo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${Ue}.pmtiles`,$$slots:{default:[qo]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Ue="local_planning_authorities";function Fo(r,e,l){let t,n=K.local_planning_authorities,s=be(Ue);J(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class jo extends V{constructor(e){super(),Q(this,e,Fo,zo,Y,{})}}function Ho(r){let e,l,t;return e=new Ne({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Parliamentary constituencies`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Bo(r){let e;return{c(){e=v(`Ordnance Survey Boundary-Line
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Go(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Bo]},$$scope:{ctx:r}}}),o=new Pe({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of May 2023."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function Eo(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Go]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Uo(r){let e,l=r[4].Name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=n[4].Name+"")&&F(t,l)},d(n){n&&p(e)}}}function Wo(r){let e,l;return e=new re({props:{$$slots:{default:[Uo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Yo(r){let e,l,t,n;const s=[H(We),{sourceLayer:We},{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Wo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new ze({props:o}),e.$on("click",Vo);const u=[H(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new de({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&se(H(We)),f&0&&{sourceLayer:We},f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5],s[6]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&se(H(`${We}-outline`)),f&0&&{sourceLayer:We},f&2&&{paint:{"line-color":i[1],"line-width":5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function Jo(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Eo],default:[Ho]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${We}.pmtiles`,$$slots:{default:[Yo]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let We="parliamentary_constituencies";function Vo(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Qo(r,e,l){let t,n=K.parliamentary_constituencies,s=be(We);J(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Ko extends V{constructor(e){super(),Q(this,e,Qo,Jo,Y,{})}}function Zo(r){let e;return{c(){e=v("Pollution")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Xo(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function xo(r){let e,l,t,n,s,o,u,a,i;return t=new Z({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Xo]},$$scope:{ctx:r}}}),a=new Pe({}),{c(){e=L("p"),l=v("Most layers show air quality data from "),h(t.$$.fragment),n=v(`. The measurements are annual means, in units of
        Âµgm
        `),s=L("sup"),s.textContent="3",o=v(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,l),b(t,e,null),w(e,n),w(e,s),w(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&4096&&(m.$$scope={dirty:c,ctx:f}),t.$set(m)},i(f){i||(g(t.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),k(t),k(a,f)}}}function ei(r){let e,l,t;return l=new ce({props:{$$slots:{default:[xo]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&4096&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Wn(r){let e,l,t,n,s=r[3](r[0].pollutant)+"",o,u,a,i,f,c,m,_,y,S,C,N,A;function I(M){r[6](M)}let P={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return r[0].pollutant!==void 0&&(P.value=r[0].pollutant),e=new ot({props:P}),E.push(()=>U(e,"value",I)),{c(){h(e.$$.fragment),t=T(),n=L("p"),o=v(s),u=T(),a=L("div"),i=L("label"),f=v(`Opacity
      `),c=L("input"),m=T(),_=L("img"),B(c,"type","range"),B(c,"min","0"),B(c,"max","100"),Wt(_.src,y=r[4](r[0].pollutant))||B(_,"src",y),B(_,"width",150),B(_,"alt",S=`Legend for ${r[0].pollutant} layer`)},m(M,R){b(e,M,R),$(M,t,R),$(M,n,R),w(n,o),$(M,u,R),$(M,a,R),w(a,i),w(i,f),w(i,c),Ve(c,r[0].opacity),$(M,m,R),$(M,_,R),C=!0,N||(A=[xe(c,"change",r[7]),xe(c,"input",r[7])],N=!0)},p(M,R){const D={};!l&&R&1&&(l=!0,D.value=M[0].pollutant,W(()=>l=!1)),e.$set(D),(!C||R&1)&&s!==(s=M[3](M[0].pollutant)+"")&&F(o,s),R&1&&Ve(c,M[0].opacity),(!C||R&1&&!Wt(_.src,y=M[4](M[0].pollutant)))&&B(_,"src",y),(!C||R&1&&S!==(S=`Legend for ${M[0].pollutant} layer`))&&B(_,"alt",S)},i(M){C||(g(e.$$.fragment,M),C=!0)},o(M){d(e.$$.fragment,M),C=!1},d(M){M&&(p(t),p(n),p(u),p(a),p(m),p(_)),k(e,M),N=!1,os(A)}}}function ti(r){let e,l;const t=[H("pollution"),{paint:{"raster-opacity":r[0].opacity/100}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new Ls({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[t[0],{paint:{"raster-opacity":s[0].opacity/100}},{layout:{visibility:s[0].show?"visible":"none"}}]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function ni(r){let e,l,t,n,s,o;function u(f){r[5](f)}let a={$$slots:{right:[ei],default:[Zo]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0].show&&Wn(r);return s=new Qs({props:{tiles:[r[1]],tileSize:256,$$slots:{default:[ti]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&4096&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&g(i,1)):(i=Wn(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&2&&(_.tiles=[f[1]]),c&4097&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}function li(r){return r.show?`${r.pollutant}/${r.opacity}`:null}function si(r){let[e,l]=r.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function ri(r,e,l){let t,n,s,u=_t("pollution",{show:!1,pollutant:"PM25_viridis",opacity:50},li,si);J(r,u,S=>l(0,s=S));function a(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s.pollutant}/MapServer/WMSServer`}function i(S){return t[1]}function f(S){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${a()}?bbox={bbox-epsg-3857}&${C}`}function c(S){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${a()}?${C}`}function m(S){r.$$.not_equal(s.show,S)&&(s.show=S,u.set(s))}function _(S){r.$$.not_equal(s.pollutant,S)&&(s.pollutant=S,u.set(s))}function y(){s.opacity=Gt(this.value),u.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s.pollutant]),r.$$.dirty&1&&l(1,n=f(s.pollutant))},[s,n,u,i,c,m,_,y]}class oi extends V{constructor(e){super(),Q(this,e,ri,ni,Y,{})}}function ii(r){let e;return{c(){e=v("Road noise")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ai(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function fi(r){let e,l,t,n,s,o,u,a,i;return s=new Z({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[ai]},$$scope:{ctx:r}}}),a=new Pe({}),{c(){e=L("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,l=T(),t=L("p"),n=v("Data from June 2019, produced by "),h(s.$$.fragment),o=v(". See there for methodology details"),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),$(f,l,c),$(f,t,c),w(t,n),b(s,t,null),w(t,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){i||(g(s.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(t),p(u)),k(s),k(a,f)}}}function ui(r){let e,l,t;return l=new ce({props:{$$slots:{default:[fi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Yn(r){let e,l;return e=new Fe({props:{colorScale:r[1],limits:["55","65","75",">"]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ci(r){let e,l=r[4].noiseclass+"",t,n,s=Jn(r[4].noiseclass)+"",o,u;return{c(){e=L("p"),t=v(l),n=v(" dB ("),o=v(s),u=v(")")},m(a,i){$(a,e,i),w(e,t),w(e,n),w(e,o),w(e,u)},p(a,i){i&16&&l!==(l=a[4].noiseclass+"")&&F(t,l),i&16&&s!==(s=Jn(a[4].noiseclass)+"")&&F(o,s)},d(a){a&&p(e)}}}function $i(r){let e,l;return e=new re({props:{$$slots:{default:[ci,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function pi(r){let e,l;const t=[H(bt),{sourceLayer:bt},{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":X(.5,.8)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[$i]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ze({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&3?te(t,[o&0&&se(H(bt)),o&0&&{sourceLayer:bt},o&2&&{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":s[1][0],"60.0-64.9":s[1][0],"65.0-69.9":s[1][1],"70.0-74.9":s[1][1],">=75.0":s[1][2]},"red"),"fill-opacity":X(.5,.8)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function mi(r){let e,l,t,n,s,o;function u(f){r[3](f)}let a={$$slots:{right:[ui],default:[ii]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&Yn(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${bt}.pmtiles`,$$slots:{default:[pi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=Yn(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let bt="road_noise";function Jn(r){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[r]}function _i(r,e,l){let t,n=[K.sequential_low_to_high[0],K.sequential_low_to_high[2],K.sequential_low_to_high[4]],s=be(bt);J(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class gi extends V{constructor(e){super(),Q(this,e,_i,mi,Y,{})}}function di(r){let e,l,t;return e=new Ne({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Wards`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function hi(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function bi(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[hi]},$$scope:{ctx:r}}}),o=new Pe({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of May 2023."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function ki(r){let e,l,t;return l=new ce({props:{$$slots:{default:[bi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function wi(r){let e,l=r[4].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&F(t,l)},d(n){n&&p(e)}}}function vi(r){let e,l;return e=new re({props:{$$slots:{default:[wi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function yi(r){let e,l,t,n;const s=[H(Ye),{sourceLayer:Ye},{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[vi]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new ze({props:o}),e.$on("click",Ci);const u=[H(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new de({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&se(H(Ye)),f&0&&{sourceLayer:Ye},f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5],s[6]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&se(H(`${Ye}-outline`)),f&0&&{sourceLayer:Ye},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function Si(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[ki],default:[di]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${Ye}.pmtiles`,$$slots:{default:[yi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Ye="wards";function Ci(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Li(r,e,l){let t,n=K.wards,s=be(Ye);J(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Ti extends V{constructor(e){super(),Q(this,e,Li,Si,Y,{})}}function Mi(r){let e;return{c(){e=v("Open Data Commons Open Database License")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ni(r){let e,l,t,n;return t=new Z({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Mi]},$$scope:{ctx:r}}}),{c(){e=L("p"),l=v("License: "),h(t.$$.fragment)},m(s,o){$(s,e,o),w(e,l),b(t,e,null),n=!0},p(s,[o]){const u={};o&1&&(u.$$scope={dirty:o,ctx:s}),t.$set(u)},i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&p(e),k(t)}}}class Ze extends V{constructor(e){super(),Q(this,e,null,Ni,Y,{})}}function Pi(r){let e,l,t;return e=new Ne({props:{color:K.bus_route_with_lane}}),{c(){h(e.$$.fragment),l=v(`
  Bus routes`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Oi(r){let e;return{c(){e=v(`GTFS
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ri(r){let e,l,t,n,s,o,u,a,i;return s=new Z({props:{href:"https://gtfs.org",$$slots:{default:[Oi]},$$scope:{ctx:r}}}),a=new Ze({}),{c(){e=L("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,l=T(),t=L("p"),n=v("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(s.$$.fragment),o=v(`, and doesn't include which routes are run or the
        frequency of service.`),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),$(f,l,c),$(f,t,c),w(t,n),b(s,t,null),w(t,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){i||(g(s.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(t),p(u)),k(s),k(a,f)}}}function Ii(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Ri]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Di(r){let e;return{c(){e=L("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ai(r){let e;return{c(){e=L("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function qi(r){let e;function l(s,o){return s[3].has_bus_lane?Ai:Di}let t=l(r),n=t(r);return{c(){n.c(),e=ve()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t!==(t=l(s))&&(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function zi(r){let e,l;return e=new re({props:{$$slots:{default:[qi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Fi(r){let e,l;const t=[H(kt),{sourceLayer:kt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],K.bus_route_with_lane,K.bus_route_without_lane],"line-width":5,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[zi]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new de({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&se(H(kt)),o&0&&{sourceLayer:kt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function ji(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[Ii],default:[Pi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${kt}.pmtiles`,$$slots:{default:[Fi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let kt="bus_routes";function Hi(r,e,l){let t,n=be(kt);J(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Bi extends V{constructor(e){super(),Q(this,e,Hi,ji,Y,{})}}function Vn(r){const e=Xi(r[9]);r[10]=e[0],r[11]=e[1],r[12]=e[2]}function Qn(r,e,l){const t=r.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function Gi(r){let e;return{c(){e=v("Cycle paths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ei(r){let e,l,t,n,s,o,u,a;return u=new Ze({}),{c(){e=L("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,l=T(),t=L("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,n=T(),s=L("p"),s.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,o=T(),h(u.$$.fragment)},m(i,f){$(i,e,f),$(i,l,f),$(i,t,f),$(i,n,f),$(i,s,f),$(i,o,f),b(u,i,f),a=!0},p:x,i(i){a||(g(u.$$.fragment,i),a=!0)},o(i){d(u.$$.fragment,i),a=!1},d(i){i&&(p(e),p(l),p(t),p(n),p(s),p(o)),k(u,i)}}}function Ui(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Kn(r){let e,l,t;return l=new et({props:{$$slots:{default:[Yi]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(l.$$.fragment),pe(e,"border","1px solid black"),pe(e,"padding","8px")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131073&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Wi(r){let e,l,t=r[13]+"",n,s,o;return e=new Ne({props:{color:r[14]}}),{c(){h(e.$$.fragment),l=T(),n=v(t),s=T()},m(u,a){b(e,u,a),$(u,l,a),$(u,n,a),$(u,s,a),o=!0},p:x,i(u){o||(g(e.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),o=!1},d(u){u&&(p(l),p(n),p(s)),k(e,u)}}}function Zn(r){let e,l,t;function n(o){r[5](o,r[10])}let s={$$slots:{default:[Wi]},$$scope:{ctx:r}};return r[0][r[10]]!==void 0&&(s.checked=r[0][r[10]]),e=new le({props:s}),E.push(()=>U(e,"checked",n)),{c(){h(e.$$.fragment)},m(o,u){b(e,o,u),t=!0},p(o,u){r=o;const a={};u&131072&&(a.$$scope={dirty:u,ctx:r}),!l&&u&5&&(l=!0,a.checked=r[0][r[10]],W(()=>l=!1)),e.$set(a)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function Yi(r){let e,l,t=Me(r[2]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Zn(Qn(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ve()},m(o,u){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,u);$(o,e,u),l=!0},p(o,u){if(u&5){t=Me(o[2]);let a;for(a=0;a<t.length;a+=1){const i=Qn(o,t,a);n[a]?(n[a].p(i,u),g(n[a],1)):(n[a]=Zn(i),n[a].c(),g(n[a],1),n[a].m(e.parentNode,e))}for(fe(),a=t.length;a<n.length;a+=1)s(a);ue()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)g(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&p(e),nt(n,o)}}}function Ji(r){Vn(r);let e,l=r[10]+"",t,n,s,o,u,a=r[11]+"",i,f,c,m,_=r[12]+"",y;return{c(){e=L("h2"),t=v(l),n=T(),s=L("p"),o=v("Direction: "),u=L("b"),i=T(),f=L("p"),c=v("Width: "),m=L("b"),y=v(_)},m(S,C){$(S,e,C),w(e,t),$(S,n,C),$(S,s,C),w(s,o),w(s,u),u.innerHTML=a,$(S,i,C),$(S,f,C),w(f,c),w(f,m),w(m,y)},p(S,C){Vn(S),C&512&&l!==(l=S[10]+"")&&F(t,l),C&512&&a!==(a=S[11]+"")&&(u.innerHTML=a),C&512&&_!==(_=S[12]+"")&&F(y,_)},d(S){S&&(p(e),p(n),p(s),p(i),p(f))}}}function Vi(r){let e,l;return e=new re({props:{$$slots:{default:[Ji,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&131584&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Qi(r){let e,l;const t=[H(wt),{sourceLayer:wt},{paint:{"line-color":Ke(["get","kind"],{track:K.cycle_paths.track,lane:K.cycle_paths.lane,shared_use_segregated:K.cycle_paths.shared_use_segregated,shared_use_unsegregated:K.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ae,"line-opacity":X(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[3](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[Vi]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new de({props:n}),e.$on("click",xi),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&9?te(t,[o&0&&se(H(wt)),o&0&&{sourceLayer:wt},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&9&&{filter:s[3](s[0])},t[5],t[6],t[7]]):{};o&131072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Ki(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[Ui],default:[Gi]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0].show&&Kn(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${wt}.pmtiles`,$$slots:{default:[Qi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&131072&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&g(i,1)):(i=Kn(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&131073&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let wt="cycle_paths";function Zi(r){return{show:!0,track:r.includes("track"),lane:r.includes("lane"),shared_use_segregated:r.includes("shared_use_segregated"),shared_use_unsegregated:r.includes("shared_use_unsegregated")}}function Xi(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${l} ${r.direction}`,t]}function xi(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function ea(r,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],s={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function o(m){return m.show?n.filter(_=>m[_]).join(","):null}let u=_t(wt,s,o,Zi);J(r,u,m=>l(0,t=m));let a=[["track","Separated tracks",K.cycle_paths.track],["lane","Unprotected lanes",K.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",K.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",K.cycle_paths.shared_use_unsegregated]];function i(m){let _=n.filter(y=>m[y]);return["in",["get","kind"],["literal",_]]}function f(m){r.$$.not_equal(t.show,m)&&(t.show=m,u.set(t))}function c(m,_){r.$$.not_equal(t[_],m)&&(t[_]=m,u.set(t))}return[t,u,a,i,f,c]}class ta extends V{constructor(e){super(),Q(this,e,ea,Ki,Y,{})}}function na(r){let e,l,t;return e=new Ne({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Major Road Network`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function la(r){let e;return{c(){e=v(`Major Road Network
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function sa(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[la]},$$scope:{ctx:r}}}),o=new Pe({}),{c(){e=L("p"),l=v("Data from the "),h(t.$$.fragment),n=v(", as of September 2021."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function ra(r){let e,l,t;return l=new ce({props:{$$slots:{default:[sa]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function oa(r){let e,l=(r[4].name??"Unknown MRN road")+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&F(t,l)},d(n){n&&p(e)}}}function ia(r){let e,l;return e=new re({props:{$$slots:{default:[oa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function aa(r){let e,l;const t=[H(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[ia]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new de({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&3?te(t,[o&0&&se(H(vt)),o&0&&{sourceLayer:vt},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function fa(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[ra],default:[na]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${vt}.pmtiles`,$$slots:{default:[aa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let vt="mrn";function ua(r,e,l){let t,n=K.mrn,s=be(vt);J(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class ca extends V{constructor(e){super(),Q(this,e,ua,fa,Y,{})}}function $a(r){let e,l,t;return e=new Ne({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Strategic Road Network`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function pa(r){let e;return{c(){e=v(`OS Open Roads
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ma(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[pa]},$$scope:{ctx:r}}}),o=new Pe({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function _a(r){let e,l,t;return l=new ce({props:{$$slots:{default:[ma]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function ga(r){let e,l=(r[4].name??"Unknown SRN road")+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&F(t,l)},d(n){n&&p(e)}}}function da(r){let e,l;return e=new re({props:{$$slots:{default:[ga,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ha(r){let e,l;const t=[H(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[da]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new de({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&3?te(t,[o&0&&se(H(yt)),o&0&&{sourceLayer:yt},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function ba(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[_a],default:[$a]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${yt}.pmtiles`,$$slots:{default:[ha]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let yt="srn";function ka(r,e,l){let t,n=K.srn,s=be(yt);J(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class wa extends V{constructor(e){super(),Q(this,e,ka,ba,Y,{})}}function va(r){let e,l,t;return e=new Ne({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  National Cycle Network`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function ya(r){let e;return{c(){e=v(`National Cycle Network
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Sa(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[ya]},$$scope:{ctx:r}}}),o=new Pe({}),{c(){e=L("p"),l=v("Data from Sustrans about the "),h(t.$$.fragment),n=v(", downloaded on 22/01/2024."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function Ca(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Sa]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Xn(r){let e,l,t,n=r[4].Desc_+"",s;return{c(){e=L("li"),l=v("Description: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].Desc_+"")&&F(s,n)},d(o){o&&p(e)}}}function xn(r){let e,l,t,n=r[4].Greenway+"",s;return{c(){e=L("li"),l=v("Is greenway: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].Greenway+"")&&F(s,n)},d(o){o&&p(e)}}}function el(r){let e,l,t,n=r[4].RouteType+"",s;return{c(){e=L("li"),l=v("Route type: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteType+"")&&F(s,n)},d(o){o&&p(e)}}}function tl(r){let e,l,t,n=r[4].RouteNo+"",s;return{c(){e=L("li"),l=v("Route number: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteNo+"")&&F(s,n)},d(o){o&&p(e)}}}function nl(r){let e,l,t,n=r[4].RouteCat+"",s;return{c(){e=L("li"),l=v("Route Category: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteCat+"")&&F(s,n)},d(o){o&&p(e)}}}function ll(r){let e,l,t,n=r[4].OpenStatus+"",s;return{c(){e=L("li"),l=v("Open Status: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].OpenStatus+"")&&F(s,n)},d(o){o&&p(e)}}}function sl(r){let e,l,t,n=r[4].Surface+"",s;return{c(){e=L("li"),l=v("Surface: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].Surface+"")&&F(s,n)},d(o){o&&p(e)}}}function rl(r){let e,l,t,n=r[4].Quality+"",s;return{c(){e=L("li"),l=v("Quality: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].Quality+"")&&F(s,n)},d(o){o&&p(e)}}}function ol(r){let e,l,t,n=r[4].RoadClass+"",s;return{c(){e=L("li"),l=v("Road Class: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].RoadClass+"")&&F(s,n)},d(o){o&&p(e)}}}function La(r){let e,l,t,n,s,o,u,a,i,f=r[4].Desc_&&Xn(r),c=r[4].Greenway&&xn(r),m=r[4].RouteType&&el(r),_=r[4].RouteNo&&tl(r),y=r[4].RouteCat&&nl(r),S=r[4].OpenStatus&&ll(r),C=r[4].Surface&&sl(r),N=r[4].Quality&&rl(r),A=r[4].RoadClass&&ol(r);return{c(){e=L("ul"),f&&f.c(),l=T(),c&&c.c(),t=T(),m&&m.c(),n=T(),_&&_.c(),s=T(),y&&y.c(),o=T(),S&&S.c(),u=T(),C&&C.c(),a=T(),N&&N.c(),i=T(),A&&A.c()},m(I,P){$(I,e,P),f&&f.m(e,null),w(e,l),c&&c.m(e,null),w(e,t),m&&m.m(e,null),w(e,n),_&&_.m(e,null),w(e,s),y&&y.m(e,null),w(e,o),S&&S.m(e,null),w(e,u),C&&C.m(e,null),w(e,a),N&&N.m(e,null),w(e,i),A&&A.m(e,null)},p(I,P){I[4].Desc_?f?f.p(I,P):(f=Xn(I),f.c(),f.m(e,l)):f&&(f.d(1),f=null),I[4].Greenway?c?c.p(I,P):(c=xn(I),c.c(),c.m(e,t)):c&&(c.d(1),c=null),I[4].RouteType?m?m.p(I,P):(m=el(I),m.c(),m.m(e,n)):m&&(m.d(1),m=null),I[4].RouteNo?_?_.p(I,P):(_=tl(I),_.c(),_.m(e,s)):_&&(_.d(1),_=null),I[4].RouteCat?y?y.p(I,P):(y=nl(I),y.c(),y.m(e,o)):y&&(y.d(1),y=null),I[4].OpenStatus?S?S.p(I,P):(S=ll(I),S.c(),S.m(e,u)):S&&(S.d(1),S=null),I[4].Surface?C?C.p(I,P):(C=sl(I),C.c(),C.m(e,a)):C&&(C.d(1),C=null),I[4].Quality?N?N.p(I,P):(N=rl(I),N.c(),N.m(e,i)):N&&(N.d(1),N=null),I[4].RoadClass?A?A.p(I,P):(A=ol(I),A.c(),A.m(e,null)):A&&(A.d(1),A=null)},d(I){I&&p(e),f&&f.d(),c&&c.d(),m&&m.d(),_&&_.d(),y&&y.d(),S&&S.d(),C&&C.d(),N&&N.d(),A&&A.d()}}}function Ta(r){let e,l;return e=new re({props:{$$slots:{default:[La,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ma(r){let e,l;const t=[H(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Ta]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new de({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&3?te(t,[o&0&&se(H(St)),o&0&&{sourceLayer:St},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":4,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Na(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Ca],default:[va]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${St}.pmtiles`,$$slots:{default:[Ma]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let St="national_cycle_network";function Pa(r,e,l){let t,n=K.national_cycle_network,s=be(St);J(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Oa extends V{constructor(e){super(),Q(this,e,Pa,Na,Y,{})}}function il(r,e,l){const t=r.slice();return t[6]=e[l][0],t[7]=e[l][1],t[8]=e[l][2],t}function Ra(r){let e;return{c(){e=v("OS Pavement widths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ia(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Da(r){let e,l,t,n,s,o,u,a,i,f,c;return i=new Z({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,l=T(),t=L("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,n=T(),s=L("p"),s.textContent="Data valid as of 1 January, 2024",o=T(),u=L("p"),a=v(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),h(i.$$.fragment),f=v(".")},m(m,_){$(m,e,_),$(m,l,_),$(m,t,_),$(m,n,_),$(m,s,_),$(m,o,_),$(m,u,_),w(u,a),b(i,u,null),w(u,f),c=!0},p(m,_){const y={};_&2048&&(y.$$scope={dirty:_,ctx:m}),i.$set(y)},i(m){c||(g(i.$$.fragment,m),c=!0)},o(m){d(i.$$.fragment,m),c=!1},d(m){m&&(p(e),p(l),p(t),p(n),p(s),p(o),p(u)),k(i)}}}function Aa(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Da]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function al(r){let e,l;return e=new Fe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function qa(r){let e,l,t=Yt(r[5].angle+r[8])+"",n;return{c(){e=L("p"),l=new it(!1),n=v(` side of the road: no pavement
          `),l.a=n},m(s,o){$(s,e,o),l.m(t,e),w(e,n)},p(s,o){o&32&&t!==(t=Yt(s[5].angle+s[8])+"")&&l.p(t)},d(s){s&&p(e)}}}function za(r){let e,l,t=Yt(r[5].angle+r[8])+"",n,s,o=r[6]+"",u,a,i,f=r[7]+"",c,m;return{c(){e=L("p"),l=new it(!1),n=v(` side of the road:
            `),s=L("b"),u=v(o),a=v(`
            m average,
            `),i=L("b"),c=v(f),m=v(`
            m minimum
          `),l.a=n},m(_,y){$(_,e,y),l.m(t,e),w(e,n),w(e,s),w(s,u),w(e,a),w(e,i),w(i,c),w(e,m)},p(_,y){y&32&&t!==(t=Yt(_[5].angle+_[8])+"")&&l.p(t),y&32&&o!==(o=_[6]+"")&&F(u,o),y&32&&f!==(f=_[7]+"")&&F(c,f)},d(_){_&&p(e)}}}function fl(r){let e;function l(s,o){return s[6]?za:qa}let t=l(r),n=t(r);return{c(){n.c(),e=ve()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function Fa(r){let e,l=Me([[r[5].left_average,r[5].left_minimum,-90],[r[5].right_average,r[5].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=fl(il(r,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ve()},m(n,s){for(let o=0;o<2;o+=1)t[o]&&t[o].m(n,s);$(n,e,s)},p(n,s){if(s&32){l=Me([[n[5].left_average,n[5].left_minimum,-90],[n[5].right_average,n[5].right_minimum,90]]);let o;for(o=0;o<2;o+=1){const u=il(n,l,o);t[o]?t[o].p(u,s):(t[o]=fl(u),t[o].c(),t[o].m(e.parentNode,e))}for(;o<2;o+=1)t[o].d(1)}},d(n){n&&p(e),nt(t,n)}}}function ja(r){let e,l;return e=new re({props:{openOn:"hover",$$slots:{default:[Fa,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&2080&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ha(r){let e,l;const t=[H(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Ae,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[ja]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new de({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&se(H(Ct)),o&0&&{sourceLayer:Ct},t[2],t[3],o&6&&{paint:{"line-color":he(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],s[2],s[1]),"line-width":Ae,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Ba(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[Aa],default:[Ra]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&al(r);return s=new me({props:{url:`pmtiles://${Et()}/v1/${Ct}.pmtiles`,$$slots:{default:[Ha]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=al(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&2049&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Ct="pavement_widths";function Ga(r){let e=Math.floor((r+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function Yt(r){return`${Ga(r)} <span style="display: inline-block; rotate: ${r}deg">â¬†</span>`}function Ea(r,e,l){let t,n=K.sequential_low_to_high,s=[0,2,4,6,8,13],o=be(Ct);J(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class Ua extends V{constructor(e){super(),Q(this,e,Ea,Ba,Y,{})}}function Wa(r){let e;return{c(){e=v("Propensity to Cycle Tool")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ya(r){let e;return{c(){e=v("the PCT website")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ja(r){let e;return{c(){e=v("2017 journal article")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Va(r){let e,l,t,n,s,o,u,a,i,f,c;return u=new Z({props:{href:"https://www.pct.bike",$$slots:{default:[Ya]},$$scope:{ctx:r}}}),i=new Z({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Ja]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,l=T(),t=L("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,n=T(),s=L("p"),o=v("See "),h(u.$$.fragment),a=v(" and "),h(i.$$.fragment),f=v(" for details on methodology and data sources.")},m(m,_){$(m,e,_),$(m,l,_),$(m,t,_),$(m,n,_),$(m,s,_),w(s,o),b(u,s,null),w(s,a),b(i,s,null),w(s,f),c=!0},p(m,_){const y={};_&1024&&(y.$$scope={dirty:_,ctx:m}),u.$set(y);const S={};_&1024&&(S.$$scope={dirty:_,ctx:m}),i.$set(S)},i(m){c||(g(u.$$.fragment,m),g(i.$$.fragment,m),c=!0)},o(m){d(u.$$.fragment,m),d(i.$$.fragment,m),c=!1},d(m){m&&(p(e),p(l),p(t),p(n),p(s)),k(u),k(i)}}}function Qa(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Va]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&1024&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function ul(r){let e,l,t,n,s,o,u,a;e=new Fe({props:{colorScale:r[1],limits:r[2]}});function i(_){r[6](_)}let f={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0].tripPurpose!==void 0&&(f.value=r[0].tripPurpose),t=new is({props:f}),E.push(()=>U(t,"value",i));function c(_){r[7](_)}let m={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[0].scenario!==void 0&&(m.value=r[0].scenario),o=new ot({props:m}),E.push(()=>U(o,"value",c)),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),s=T(),h(o.$$.fragment)},m(_,y){b(e,_,y),$(_,l,y),b(t,_,y),$(_,s,y),b(o,_,y),a=!0},p(_,y){const S={};!n&&y&1&&(n=!0,S.value=_[0].tripPurpose,W(()=>n=!1)),t.$set(S);const C={};!u&&y&1&&(u=!0,C.value=_[0].scenario,W(()=>u=!1)),o.$set(C)},i(_){a||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),a=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(o.$$.fragment,_),a=!1},d(_){_&&(p(l),p(s)),k(e,_),k(t,_),k(o,_)}}}function Ka(r){let e,l=r[4](r[9])+"",t;return{c(){e=new it(!1),t=ve(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function Za(r){let e,l;return e=new re({props:{$$slots:{default:[Ka,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Xa(r){let e,l;const t=[H(Xe),{sourceLayer:Xe},{paint:{"line-color":he(["get",r[0].scenario],r[2],r[1]),"line-width":Ae,"line-opacity":X(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==Xe?"visible":"none"}}];let n={$$slots:{default:[Za]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new de({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&se(H(Xe)),o&0&&{sourceLayer:Xe},o&7&&{paint:{"line-color":he(["get",s[0].scenario],s[2],s[1]),"line-width":Ae,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==Xe?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function xa(r){let e,l=r[4](r[9])+"",t;return{c(){e=new it(!1),t=ve(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function ef(r){let e,l;return e=new re({props:{$$slots:{default:[xa,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function tf(r){let e,l;const t=[H(rt),{sourceLayer:rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["get",r[0].scenario],r[2],r[1]),"line-width":Ae,"line-opacity":X(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==rt?"visible":"none"}}];let n={$$slots:{default:[ef]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new de({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&se(H(rt)),o&0&&{sourceLayer:rt},t[2],t[3],o&7&&{paint:{"line-color":he(["get",s[0].scenario],s[2],s[1]),"line-width":Ae,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==rt?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function nf(r){let e,l,t,n,s,o,u,a;function i(m){r[5](m)}let f={$$slots:{right:[Qa],default:[Wa]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new le({props:f}),E.push(()=>U(e,"checked",i));let c=r[0].show&&ul(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${Xe}.pmtiles`,$$slots:{default:[Xa]},$$scope:{ctx:r}}}),u=new me({props:{url:`pmtiles://${$e()}/v1/${rt}.pmtiles`,$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),c&&c.c(),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment)},m(m,_){b(e,m,_),$(m,t,_),c&&c.m(m,_),$(m,n,_),b(s,m,_),$(m,o,_),b(u,m,_),a=!0},p(m,[_]){const y={};_&1024&&(y.$$scope={dirty:_,ctx:m}),!l&&_&1&&(l=!0,y.checked=m[0].show,W(()=>l=!1)),e.$set(y),m[0].show?c?(c.p(m,_),_&1&&g(c,1)):(c=ul(m),c.c(),g(c,1),c.m(n.parentNode,n)):c&&(fe(),d(c,1,1,()=>{c=null}),ue());const S={};_&1025&&(S.$$scope={dirty:_,ctx:m}),s.$set(S);const C={};_&1025&&(C.$$scope={dirty:_,ctx:m}),u.$set(C)},i(m){a||(g(e.$$.fragment,m),g(c),g(s.$$.fragment,m),g(u.$$.fragment,m),a=!0)},o(m){d(e.$$.fragment,m),d(c),d(s.$$.fragment,m),d(u.$$.fragment,m),a=!1},d(m){m&&(p(t),p(n),p(o)),k(e,m),c&&c.d(m),k(s,m),k(u,m)}}}let Xe="pct_commute",rt="pct_school";function lf(r){return r.show?`${r.tripPurpose}/${r.scenario}`:null}function sf(r){let[e,l]=r.split("/");return{show:!0,tripPurpose:e,scenario:l}}function rf(r,e,l){let t,n=K.sequential_low_to_high,s=[0,50,100,500,1e3,2e3],u=_t("pct",{show:!1,tripPurpose:Xe,scenario:"baseline"},lf,sf);J(r,u,m=>l(0,t=m));function a(m){let _=m.baseline,y=m.gov_target,S=m.go_dutch,C=`<h2>Trip purpose: ${t.tripPurpose==Xe?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)C+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let N=(y/_).toFixed(1),A=(S/_).toFixed(1);C+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${N}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${A}x</b> of baseline)</p>`}return C}function i(m){r.$$.not_equal(t.show,m)&&(t.show=m,u.set(t))}function f(m){r.$$.not_equal(t.tripPurpose,m)&&(t.tripPurpose=m,u.set(t))}function c(m){r.$$.not_equal(t.scenario,m)&&(t.scenario=m,u.set(t))}return[t,n,s,u,a,i,f,c]}class of extends V{constructor(e){super(),Q(this,e,rf,nf,Y,{})}}function af(r){let e;return{c(){e=v("OS Speeds")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ff(r){let e;return{c(){e=v("Basemap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function uf(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function cf(r){let e,l,t,n,s,o,u,a,i,f,c,m;return t=new Z({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[ff]},$$scope:{ctx:r}}}),f=new Z({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[uf]},$$scope:{ctx:r}}}),{c(){e=L("p"),l=v("The average speed data is collected over a six-month period by "),h(t.$$.fragment),n=v(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),s=T(),o=L("p"),o.textContent="Data valid as of 1 September, 2023",u=T(),a=L("p"),i=v(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=v(".")},m(_,y){$(_,e,y),w(e,l),b(t,e,null),w(e,n),$(_,s,y),$(_,o,y),$(_,u,y),$(_,a,y),w(a,i),b(f,a,null),w(a,c),m=!0},p(_,y){const S={};y&512&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const C={};y&512&&(C.$$scope={dirty:y,ctx:_}),f.$set(C)},i(_){m||(g(t.$$.fragment,_),g(f.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(f.$$.fragment,_),m=!1},d(_){_&&(p(e),p(s),p(o),p(u),p(a)),k(t),k(f)}}}function $f(r){let e,l,t;return l=new ce({props:{$$slots:{default:[cf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function cl(r){let e,l,t,n,s;e=new Fe({props:{colorScale:r[1],limits:r[2]}});function o(a){r[6](a)}let u={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0].kind!==void 0&&(u.value=r[0].kind),t=new is({props:u}),E.push(()=>U(t,"value",o)),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(a,i){b(e,a,i),$(a,l,i),b(t,a,i),s=!0},p(a,i){const f={};!n&&i&1&&(n=!0,f.value=a[0].kind,W(()=>n=!1)),t.$set(f)},i(a){s||(g(e.$$.fragment,a),g(t.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),s=!1},d(a){a&&p(l),k(e,a),k(t,a)}}}function pf(r){let e,l,t=r[8].indicative_mph+"",n,s,o,u,a,i=r[8].highest_mph+"",f,c,m=r[4][r[8].highest_description]+"",_,y;return{c(){e=L("p"),l=v("Posted speed limit: "),n=v(t),s=v(" mph"),o=T(),u=L("p"),a=v("Highest average speed: "),f=v(i),c=v(" mph (during "),_=v(m),y=v(")")},m(S,C){$(S,e,C),w(e,l),w(e,n),w(e,s),$(S,o,C),$(S,u,C),w(u,a),w(u,f),w(u,c),w(u,_),w(u,y)},p(S,C){C&256&&t!==(t=S[8].indicative_mph+"")&&F(n,t),C&256&&i!==(i=S[8].highest_mph+"")&&F(f,i),C&256&&m!==(m=S[4][S[8].highest_description]+"")&&F(_,m)},d(S){S&&(p(e),p(o),p(u))}}}function mf(r){let e,l;return e=new re({props:{$$slots:{default:[pf,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&768&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function _f(r){let e,l;const t=[H(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["get",r[0].kind],r[2],r[1]),"line-width":Ae,"line-opacity":X(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={$$slots:{default:[mf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new de({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&se(H(Lt)),o&0&&{sourceLayer:Lt},t[2],t[3],o&7&&{paint:{"line-color":he(["get",s[0].kind],s[2],s[1]),"line-width":Ae,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0].show?"visible":"none"}}]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function gf(r){let e,l,t,n,s,o;function u(f){r[5](f)}let a={$$slots:{right:[$f],default:[af]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0].show&&cl(r);return s=new me({props:{url:`pmtiles://${Et()}/v1/${Lt}.pmtiles`,$$slots:{default:[_f]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&512&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&g(i,1)):(i=cl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&513&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Lt="road_speeds";function df(r){return r.show?r.kind:null}function hf(r){return{show:!0,kind:r}}function bf(r,e,l){let t,n=K.sequential_low_to_high,s=[0,20,30,40,50,90],u=_t(Lt,{show:!1,kind:"indicative_mph"},df,hf);J(r,u,c=>l(0,t=c));let a={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(c){r.$$.not_equal(t.show,c)&&(t.show=c,u.set(t))}function f(c){r.$$.not_equal(t.kind,c)&&(t.kind=c,u.set(t))}return[t,n,s,u,a,i,f]}class kf extends V{constructor(e){super(),Q(this,e,bf,gf,Y,{})}}function wf(r){let e;return{c(){e=v("OS Road widths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function vf(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function yf(r){let e,l,t,n,s,o,u,a,i;return u=new Z({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[vf]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,l=T(),t=L("p"),t.textContent="Data valid as of 1 September, 2023",n=T(),s=L("p"),o=v(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),a=v(".")},m(f,c){$(f,e,c),$(f,l,c),$(f,t,c),$(f,n,c),$(f,s,c),w(s,o),b(u,s,null),w(s,a),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),u.$set(m)},i(f){i||(g(u.$$.fragment,f),i=!0)},o(f){d(u.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(t),p(n),p(s)),k(u)}}}function Sf(r){let e,l,t;return l=new ce({props:{$$slots:{default:[yf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function $l(r){let e,l;return e=new Fe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Cf(r){let e,l,t,n=r[5].average+"",s,o,u,a,i,f,c=r[5].minimum+"",m,_;return{c(){e=L("p"),l=v("Average width: "),t=L("b"),s=v(n),o=v(`
        meters`),u=T(),a=L("p"),i=v("Minimum width: "),f=L("b"),m=v(c),_=v(`
        meters`)},m(y,S){$(y,e,S),w(e,l),w(e,t),w(t,s),w(e,o),$(y,u,S),$(y,a,S),w(a,i),w(a,f),w(f,m),w(a,_)},p(y,S){S&32&&n!==(n=y[5].average+"")&&F(s,n),S&32&&c!==(c=y[5].minimum+"")&&F(m,c)},d(y){y&&(p(e),p(u),p(a))}}}function Lf(r){let e,l;return e=new re({props:{$$slots:{default:[Cf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Tf(r){let e,l;const t=[H(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["get","average"],r[2],r[1]),"line-width":Ae,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Lf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new de({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&se(H(Tt)),o&0&&{sourceLayer:Tt},t[2],t[3],o&6&&{paint:{"line-color":he(["get","average"],s[2],s[1]),"line-width":Ae,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Mf(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[Sf],default:[wf]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&$l(r);return s=new me({props:{url:`pmtiles://${Et()}/v1/${Tt}.pmtiles`,$$slots:{default:[Tf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=$l(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Tt="road_widths";function Nf(r,e,l){let t,n=K.sequential_low_to_high,s=[0,5,10,15,20,100],o=be(Tt);J(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class Pf extends V{constructor(e){super(),Q(this,e,Nf,Mf,Y,{})}}function Of(r){let e,l,t;return e=new Ne({props:{color:K.trams}}),{c(){h(e.$$.fragment),l=v(`
  Trams`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Rf(r){let e,l,t,n;return t=new Ze({}),{c(){e=L("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,l=T(),h(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),b(t,s,o),n=!0},p:x,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),k(t,s)}}}function If(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Rf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&8&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Df(r){let e,l;const t=[H(Mt),{sourceLayer:Mt},{paint:{"line-color":K.trams,"line-width":5,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new de({props:n}),e.$on("click",qf),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&se(H(Mt)),o&0&&{sourceLayer:Mt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Af(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[If],default:[Of]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${Mt}.pmtiles`,$$slots:{default:[Df]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&8&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&9&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Mt="trams";function qf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function zf(r,e,l){let t,n=be(Mt);J(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Ff extends V{constructor(e){super(),Q(this,e,zf,Af,Y,{})}}function jf(r){let e;return{c(){e=v("Bus stops")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Hf(r){let e;return{c(){e=v(`Bus Open Data Service
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Bf(r){let e,l,t,n,s,o,u,a,i;return t=new Z({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),a=new Pe({}),{c(){e=L("p"),l=v("Data from the "),h(t.$$.fragment),n=v(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),s=T(),o=L("p"),o.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,l),b(t,e,null),w(e,n),$(f,s,c),$(f,o,c),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),t.$set(m)},i(f){i||(g(t.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(s),p(o),p(u)),k(t),k(a,f)}}}function Gf(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function pl(r){let e,l,t,n;return t=new Fe({props:{colorScale:r[1],limits:r[2]}}),{c(){e=L("p"),e.textContent="Peak hourly frequency:",l=T(),h(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),b(t,s,o),n=!0},p:x,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),k(t,s)}}}function Ef(r){let e,l,t,n=r[5].stop_name+"",s,o,u,a,i,f=r[5].peak+"",c,m,_,y,S,C=r[5].peak_description+"",N,A,I,P,M,R=r[5].total+"",D,O,j=r[5].total_description+"",ne,oe;return{c(){e=L("p"),l=v("Stop name: "),t=L("b"),s=v(n),o=T(),u=L("p"),a=v("Peak: "),i=L("b"),c=v(f),m=v(`
        buses during the busiest hour of any day`),_=T(),y=L("p"),S=v("The peak hour is "),N=v(C),A=T(),I=L("p"),P=v("Total buses per day: "),M=L("b"),D=v(R),O=v(`
        (for `),ne=v(j),oe=v(", the busiest day of the week)")},m(z,q){$(z,e,q),w(e,l),w(e,t),w(t,s),$(z,o,q),$(z,u,q),w(u,a),w(u,i),w(i,c),w(u,m),$(z,_,q),$(z,y,q),w(y,S),w(y,N),$(z,A,q),$(z,I,q),w(I,P),w(I,M),w(M,D),w(I,O),w(I,ne),w(I,oe)},p(z,q){q&32&&n!==(n=z[5].stop_name+"")&&F(s,n),q&32&&f!==(f=z[5].peak+"")&&F(c,f),q&32&&C!==(C=z[5].peak_description+"")&&F(N,C),q&32&&R!==(R=z[5].total+"")&&F(D,R),q&32&&j!==(j=z[5].total_description+"")&&F(ne,j)},d(z){z&&(p(e),p(o),p(u),p(_),p(y),p(A),p(I))}}}function Uf(r){let e,l;return e=new re({props:{$$slots:{default:[Ef,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Wf(r){let e,l;const t=[H(Nt),{sourceLayer:Nt},{paint:{"circle-color":he(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Uf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new $t({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&se(H(Nt)),o&0&&{sourceLayer:Nt},o&6&&{paint:{"circle-color":he(["get","peak"],s[2],s[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Yf(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[Gf],default:[jf]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&pl(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${Nt}.pmtiles`,$$slots:{default:[Wf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=pl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Nt="bus_stops";function Jf(r,e,l){let t,n=K.sequential_low_to_high,s=[0,3,10,20,30,100],o=be(Nt);J(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class Vf extends V{constructor(e){super(),Q(this,e,Jf,Yf,Y,{})}}function Qf(r){let e;return{c(){e=v("Crossings")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Kf(r){let e;return{c(){e=v("crossing")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Zf(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Kf]},$$scope:{ctx:r}}}),o=new Ze({}),{c(){e=L("p"),l=v("This shows "),h(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function Xf(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Zf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function ml(r){let e,l;return e=new Qt({props:{rows:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function xf(r){let e,l=_l(r[4])+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=_l(n[4])+"")&&F(t,l)},d(n){n&&p(e)}}}function eu(r){let e,l;return e=new re({props:{$$slots:{default:[xf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function tu(r){let e,l;const t=[H(Pt),{sourceLayer:Pt},{paint:{"circle-color":Ke(["get","crossing"],{traffic_signals:K.signalized_crossing},K.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[eu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new $t({props:n}),e.$on("click",lu),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&se(H(Pt)),o&0&&{sourceLayer:Pt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function nu(r){let e,l,t,n,s,o;function u(f){r[3](f)}let a={$$slots:{right:[Xf],default:[Qf]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&ml(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${Pt}.pmtiles`,$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=ml(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Pt="crossings";function _l(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function lu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function su(r,e,l){let t,n=be(Pt);J(r,n,u=>l(0,t=u));let s=[["Signalized",K.signalized_crossing],["Other",K.other_crossing]];function o(u){t=u,n.set(t)}return[t,n,s,o]}class ru extends V{constructor(e){super(),Q(this,e,su,nu,Y,{})}}function ou(r){let e;return{c(){e=v("Gradients")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function iu(r){let e;return{c(){e=v("OS Terrain 50")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function au(r){let e,l,t,n,s,o,u,a,i,f,c,m,_;return u=new Z({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[iu]},$$scope:{ctx:r}}}),f=new Pe({}),m=new Ze({}),{c(){e=L("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,l=T(),t=L("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,n=T(),s=L("p"),o=v("This layer is built from "),h(u.$$.fragment),a=v(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),i=T(),h(f.$$.fragment),c=T(),h(m.$$.fragment)},m(y,S){$(y,e,S),$(y,l,S),$(y,t,S),$(y,n,S),$(y,s,S),w(s,o),b(u,s,null),w(s,a),$(y,i,S),b(f,y,S),$(y,c,S),b(m,y,S),_=!0},p(y,S){const C={};S&64&&(C.$$scope={dirty:S,ctx:y}),u.$set(C)},i(y){_||(g(u.$$.fragment,y),g(f.$$.fragment,y),g(m.$$.fragment,y),_=!0)},o(y){d(u.$$.fragment,y),d(f.$$.fragment,y),d(m.$$.fragment,y),_=!1},d(y){y&&(p(e),p(l),p(t),p(n),p(s),p(i),p(c)),k(u),k(f,y),k(m,y)}}}function fu(r){let e,l,t;return l=new ce({props:{$$slots:{default:[au]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function gl(r){let e,l;return e=new Fe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function uu(r){let e,l,t,n=Math.abs(r[5].gradient)/100+"",s,o;return{c(){e=L("p"),l=v("Gradient: "),t=L("b"),s=v(n),o=v(`
        %`)},m(u,a){$(u,e,a),w(e,l),w(e,t),w(t,s),w(e,o)},p(u,a){a&32&&n!==(n=Math.abs(u[5].gradient)/100+"")&&F(s,n)},d(u){u&&p(e)}}}function cu(r){let e,l;return e=new re({props:{$$slots:{default:[uu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function $u(r){let e,l,t,n;const s=[H(Je),{sourceLayer:Je},{manageHoverState:!0},{paint:{"line-color":he(["/",["abs",["get","gradient"]],100],r[2],r[1]),"line-width":Ae,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let o={$$slots:{default:[cu]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new de({props:o});const u=[H(Je+"_arrows"),{sourceLayer:Je},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new fn({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&7?te(s,[f&0&&se(H(Je)),f&0&&{sourceLayer:Je},s[2],f&6&&{paint:{"line-color":he(["/",["abs",["get","gradient"]],100],i[2],i[1]),"line-width":Ae,"line-opacity":X(1,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};f&64&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&1?te(u,[f&0&&se(H(Je+"_arrows")),f&0&&{sourceLayer:Je},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function pu(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[fu],default:[ou]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&gl(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${Je}.pmtiles`,$$slots:{default:[$u]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=gl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Je="gradient";function mu(r,e,l){let t,n=K.gradient_flat_to_steep,s=[0,3,5,8,10,20,100],o=be(Je);J(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class _u extends V{constructor(e){super(),Q(this,e,mu,pu,Y,{})}}function gu(r){let e,l,t;return{c(){e=L("img"),t=v(`
  Cycle parking`),Wt(e.src,l=_s)||B(e,"src",l),B(e,"alt","a logo representing cycle parking")},m(n,s){$(n,e,s),$(n,t,s)},p:x,d(n){n&&(p(e),p(t))}}}function du(r){let e;return{c(){e=v("OpenStreetMap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function hu(r){let e;return{c(){e=v("OpenStreetMap Carto")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function bu(r){let e,l,t,n,s,o,u,a,i,f,c;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[du]},$$scope:{ctx:r}}}),a=new Z({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[hu]},$$scope:{ctx:r}}}),f=new Ze({}),{c(){e=L("p"),l=v("Cycle parking, according to "),h(t.$$.fragment),n=v(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),s=T(),o=L("p"),u=v("Icon from "),h(a.$$.fragment),i=T(),h(f.$$.fragment)},m(m,_){$(m,e,_),w(e,l),b(t,e,null),w(e,n),$(m,s,_),$(m,o,_),w(o,u),b(a,o,null),$(m,i,_),b(f,m,_),c=!0},p(m,_){const y={};_&16&&(y.$$scope={dirty:_,ctx:m}),t.$set(y);const S={};_&16&&(S.$$scope={dirty:_,ctx:m}),a.$set(S)},i(m){c||(g(t.$$.fragment,m),g(a.$$.fragment,m),g(f.$$.fragment,m),c=!0)},o(m){d(t.$$.fragment,m),d(a.$$.fragment,m),d(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(s),p(o),p(i)),k(t),k(a),k(f,m)}}}function ku(r){let e,l,t;return l=new ce({props:{$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function wu(r){let e,l,t,n=(r[3].capacity??"unknown")+"",s;return{c(){e=L("p"),l=v("Capacity: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&8&&n!==(n=(o[3].capacity??"unknown")+"")&&F(s,n)},d(o){o&&p(e)}}}function vu(r){let e,l;return e=new re({props:{$$slots:{default:[wu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function yu(r){let e,l;const t=[H(Ot),{sourceLayer:Ot},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[vu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new fn({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&se(H(Ot)),o&0&&{sourceLayer:Ot},o&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Su(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[ku],default:[gu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${Ot}.pmtiles`,$$slots:{default:[yu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Ot="cycle_parking";function Cu(r,e,l){let t,n=be(Ot);J(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Lu extends V{constructor(e){super(),Q(this,e,Cu,Su,Y,{})}}function Tu(r){let e;return{c(){e=v("Education")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Mu(r){let e,l,t,n;return t=new Ze({}),{c(){e=L("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,l=T(),h(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),b(t,s,o),n=!0},p:x,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),k(t,s)}}}function Nu(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function dl(r){let e,l,t;return l=new et({props:{$$slots:{default:[Iu]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(l.$$.fragment),pe(e,"border","1px solid black"),pe(e,"padding","8px")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&2049&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Pu(r){let e,l,t;return e=new Ne({props:{color:K.education.schools}}),{c(){h(e.$$.fragment),l=v(`
        Schools`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Ou(r){let e,l,t;return e=new Ne({props:{color:K.education.colleges}}),{c(){h(e.$$.fragment),l=v(`
        Colleges`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Ru(r){let e,l,t;return e=new Ne({props:{color:K.education.universities}}),{c(){h(e.$$.fragment),l=v(`
        Universities`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Iu(r){let e,l,t,n,s,o,u,a,i;function f(C){r[4](C)}let c={$$slots:{default:[Pu]},$$scope:{ctx:r}};r[0].school!==void 0&&(c.checked=r[0].school),e=new le({props:c}),E.push(()=>U(e,"checked",f));function m(C){r[5](C)}let _={$$slots:{default:[Ou]},$$scope:{ctx:r}};r[0].college!==void 0&&(_.checked=r[0].college),n=new le({props:_}),E.push(()=>U(n,"checked",m));function y(C){r[6](C)}let S={$$slots:{default:[Ru]},$$scope:{ctx:r}};return r[0].university!==void 0&&(S.checked=r[0].university),u=new le({props:S}),E.push(()=>U(u,"checked",y)),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),o=T(),h(u.$$.fragment)},m(C,N){b(e,C,N),$(C,t,N),b(n,C,N),$(C,o,N),b(u,C,N),i=!0},p(C,N){const A={};N&2048&&(A.$$scope={dirty:N,ctx:C}),!l&&N&1&&(l=!0,A.checked=C[0].school,W(()=>l=!1)),e.$set(A);const I={};N&2048&&(I.$$scope={dirty:N,ctx:C}),!s&&N&1&&(s=!0,I.checked=C[0].college,W(()=>s=!1)),n.$set(I);const P={};N&2048&&(P.$$scope={dirty:N,ctx:C}),!a&&N&1&&(a=!0,P.checked=C[0].university,W(()=>a=!1)),u.$set(P)},i(C){i||(g(e.$$.fragment,C),g(n.$$.fragment,C),g(u.$$.fragment,C),i=!0)},o(C){d(e.$$.fragment,C),d(n.$$.fragment,C),d(u.$$.fragment,C),i=!1},d(C){C&&(p(t),p(o)),k(e,C),k(n,C),k(u,C)}}}function Du(r){let e,l=(r[10].name??"Unnamed institution")+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&F(t,l)},d(n){n&&p(e)}}}function Au(r){let e,l;return e=new re({props:{$$slots:{default:[Du,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&3072&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function qu(r){let e,l;const t=[H(Rt),{sourceLayer:Rt},{paint:{"fill-color":Ke(["get","type"],{school:K.education.schools,college:K.education.colleges,university:K.education.universities},"grey"),"fill-opacity":X(.7,1)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[2](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Au]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ze({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&5?te(t,[o&0&&se(H(Rt)),o&0&&{sourceLayer:Rt},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&5&&{filter:s[2](s[0])},t[5],t[6]]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function zu(r){let e,l,t,n,s,o;function u(f){r[3](f)}let a={$$slots:{right:[Nu],default:[Tu]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0].show&&dl(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${Rt}.pmtiles`,$$slots:{default:[qu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&g(i,1)):(i=dl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&2049&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Rt="education";function Fu(r){return{show:!0,school:r.includes("school"),college:r.includes("college"),university:r.includes("university")}}function ju(r,e,l){let t,n=["school","college","university"],s={show:!1,school:!0,college:!0,university:!0};function o(_){return _.show?n.filter(y=>_[y]).join(","):null}let u=_t(Rt,s,o,Fu);J(r,u,_=>l(0,t=_));function a(_){let y=n.filter(S=>_[S]);return["in",["get","type"],["literal",y]]}function i(_){r.$$.not_equal(t.show,_)&&(t.show=_,u.set(t))}function f(_){r.$$.not_equal(t.school,_)&&(t.school=_,u.set(t))}function c(_){r.$$.not_equal(t.college,_)&&(t.college=_,u.set(t))}function m(_){r.$$.not_equal(t.university,_)&&(t.university=_,u.set(t))}return[t,u,a,i,f,c,m]}class Hu extends V{constructor(e){super(),Q(this,e,ju,zu,Y,{})}}function Bu(r){let e,l,t,n;return e=new Ne({props:{color:r[4]}}),{c(){h(e.$$.fragment),l=T(),t=v(r[2])},m(s,o){b(e,s,o),$(s,l,o),$(s,t,o),n=!0},p(s,o){(!n||o&4)&&F(t,s[2])},i(s){n||(g(e.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),k(e,s)}}}function Gu(r){let e;const l=r[6].default,t=at(l,r,r[8],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&256)&&ft(t,l,n,n[8],e?ct(l,n[8],s,null):ut(n[8]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function Eu(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&256&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Uu(r){let e,l=(r[9].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&514&&l!==(l=(n[9].name??`Unnamed ${n[1]}`)+"")&&F(t,l)},d(n){n&&p(e)}}}function Wu(r){let e,l;return e=new re({props:{$$slots:{default:[Uu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&770&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Yu(r){let e,l;const t=[H(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":X(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Wu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ze({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&25?te(t,[o&1&&se(H(s[0])),o&1&&{sourceLayer:s[0]},o&16&&{paint:{"fill-color":s[4],"fill-opacity":X(.7,1)}},o&8&&{layout:{visibility:s[3]?"visible":"none"}},t[4],t[5]]):{};o&258&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Ju(r){let e,l,t,n,s;function o(a){r[7](a)}let u={$$slots:{right:[Eu],default:[Bu]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&260&&(f.$$scope={dirty:i,ctx:a}),!l&&i&8&&(l=!0,f.checked=a[3],W(()=>l=!1)),e.$set(f);const c={};i&1&&(c.url=`pmtiles://${$e()}/v1/${a[0]}.pmtiles`),i&267&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}function Vu(r,e,l){let t,{$$slots:n={},$$scope:s}=e,{name:o}=e,{singularNoun:u}=e,{pluralNoun:a}=e,i=K[o],f=be(o);J(r,f,m=>l(3,t=m));function c(m){t=m,f.set(t)}return r.$$set=m=>{"name"in m&&l(0,o=m.name),"singularNoun"in m&&l(1,u=m.singularNoun),"pluralNoun"in m&&l(2,a=m.pluralNoun),"$$scope"in m&&l(8,s=m.$$scope)},[o,u,a,t,i,f,n,c,s]}class fs extends V{constructor(e){super(),Q(this,e,Vu,Ju,Y,{name:0,singularNoun:1,pluralNoun:2})}}function Qu(r){let e;return{c(){e=v("hospital")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ku(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Qu]},$$scope:{ctx:r}}}),o=new Ze({}),{c(){e=L("p"),l=v("This shows "),h(t.$$.fragment),n=v(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&1&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function Zu(r){let e,l;return e=new fs({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Ku]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}class Xu extends V{constructor(e){super(),Q(this,e,null,Zu,Y,{})}}function xu(r){let e,l,t;return{c(){e=L("img"),t=v(`
  Railway Stations`),Wt(e.src,l=gs)||B(e,"src",l),B(e,"alt","A logo representing a train")},m(n,s){$(n,e,s),$(n,t,s)},p:x,d(n){n&&(p(e),p(t))}}}function ec(r){let e;return{c(){e=v("railway station")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function tc(r){let e;return{c(){e=v(`National Rail
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function nc(r){let e,l,t,n,s,o,u,a,i,f,c,m;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[ec]},$$scope:{ctx:r}}}),a=new Z({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[tc]},$$scope:{ctx:r}}}),c=new Ze({}),{c(){e=L("p"),l=v("This shows "),h(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=T(),o=L("p"),u=v("Icon from "),h(a.$$.fragment),i=v(". (Note that not all stations shown are National Rail.)"),f=T(),h(c.$$.fragment)},m(_,y){$(_,e,y),w(e,l),b(t,e,null),w(e,n),$(_,s,y),$(_,o,y),w(o,u),b(a,o,null),w(o,i),$(_,f,y),b(c,_,y),m=!0},p(_,y){const S={};y&16&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const C={};y&16&&(C.$$scope={dirty:y,ctx:_}),a.$set(C)},i(_){m||(g(t.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(a.$$.fragment,_),d(c.$$.fragment,_),m=!1},d(_){_&&(p(e),p(s),p(o),p(f)),k(t),k(a),k(c,_)}}}function lc(r){let e,l,t;return l=new ce({props:{$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function sc(r){let e,l=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&F(t,l)},d(n){n&&p(e)}}}function rc(r){let e,l;return e=new re({props:{$$slots:{default:[sc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function oc(r){let e,l;const t=[H(Jt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[rc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new fn({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&se(H(Jt)),o&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function ic(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[lc],default:[xu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new pt({props:{data:`${$e()}/v1/${Jt}.geojson`,$$slots:{default:[oc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Jt="railway_stations";function ac(r,e,l){let t,n=be(Jt);J(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class fc extends V{constructor(e){super(),Q(this,e,ac,ic,Y,{})}}function uc(r){let e;return{c(){e=v("sports pitches")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function cc(r){let e;return{c(){e=v("sports centres")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $c(r){let e,l,t,n,s,o,u,a,i;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[uc]},$$scope:{ctx:r}}}),s=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[cc]},$$scope:{ctx:r}}}),a=new Ze({}),{c(){e=L("p"),l=v("This shows "),h(t.$$.fragment),n=v(" and "),h(s.$$.fragment),o=v(" data from OpenStreetMap (as of 9 August 2023)."),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,l),b(t,e,null),w(e,n),b(s,e,null),w(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){i||(g(t.$$.fragment,f),g(s.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),k(t),k(s),k(a,f)}}}function pc(r){let e,l;return e=new fs({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}class mc extends V{constructor(e){super(),Q(this,e,null,pc,Y,{})}}function _c(r){let e;return{c(){e=v("Stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function gc(r){let e;return{c(){e=v("DfT stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function dc(r){let e;return{c(){e=v("documented by DfT")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function hc(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y,S,C,N,A,I,P,M,R,D;return t=new Z({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[gc]},$$scope:{ctx:r}}}),N=new Z({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[dc]},$$scope:{ctx:r}}}),R=new Pe({}),{c(){e=L("p"),l=v("This layer shows collisions recorded in the "),h(t.$$.fragment),n=v(" dataset. Please note these limitations:"),s=T(),o=L("ul"),u=L("li"),u.textContent="Only collisions between 2017 and 2022 are included",a=T(),i=L("li"),i.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=T(),c=L("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,m=T(),_=L("li"),_.textContent='The "pedestrians" category also include mobility scooters',y=T(),S=L("li"),C=v("All limitations "),h(N.$$.fragment),A=v(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),I=T(),P=L("p"),P.textContent="You can click a point to open the full report, thanks to CycleStreets.",M=T(),h(R.$$.fragment)},m(O,j){$(O,e,j),w(e,l),b(t,e,null),w(e,n),$(O,s,j),$(O,o,j),w(o,u),w(o,a),w(o,i),w(o,f),w(o,c),w(o,m),w(o,_),w(o,y),w(o,S),w(S,C),b(N,S,null),w(S,A),$(O,I,j),$(O,P,j),$(O,M,j),b(R,O,j),D=!0},p(O,j){const ne={};j&4194304&&(ne.$$scope={dirty:j,ctx:O}),t.$set(ne);const oe={};j&4194304&&(oe.$$scope={dirty:j,ctx:O}),N.$set(oe)},i(O){D||(g(t.$$.fragment,O),g(N.$$.fragment,O),g(R.$$.fragment,O),D=!0)},o(O){d(t.$$.fragment,O),d(N.$$.fragment,O),d(R.$$.fragment,O),D=!1},d(O){O&&(p(e),p(s),p(o),p(I),p(P),p(M)),k(t),k(N),k(R,O)}}}function bc(r){let e,l,t;return l=new ce({props:{$$slots:{default:[hc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&4194304&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function hl(r){let e,l,t,n,s,o,u,a,i,f,c,m,_;return l=new et({props:{small:!0,$$slots:{default:[Sc]},$$scope:{ctx:r}}}),f=new Qt({props:{rows:r[9]}}),{c(){e=L("div"),h(l.$$.fragment),t=T(),n=L("div"),s=v(`Filter years:
      `),o=L("input"),u=v(`
      -
      `),a=L("input"),i=T(),h(f.$$.fragment),B(o,"type","number"),B(o,"min",2017),B(o,"max",2022),B(o,"class","svelte-1ft65rw"),B(a,"type","number"),B(a,"min",2017),B(a,"max",2022),B(a,"class","svelte-1ft65rw"),pe(e,"border","1px solid black"),pe(e,"padding","8px")},m(y,S){$(y,e,S),b(l,e,null),w(e,t),w(e,n),w(n,s),w(n,o),Ve(o,r[0].minYear),w(n,u),w(n,a),Ve(a,r[0].maxYear),w(e,i),b(f,e,null),c=!0,m||(_=[xe(o,"input",r[15]),xe(a,"input",r[16])],m=!0)},p(y,S){const C={};S&4194305&&(C.$$scope={dirty:S,ctx:y}),l.$set(C),S&1&&Gt(o.value)!==y[0].minYear&&Ve(o,y[0].minYear),S&1&&Gt(a.value)!==y[0].maxYear&&Ve(a,y[0].maxYear)},i(y){c||(g(l.$$.fragment,y),g(f.$$.fragment,y),c=!0)},o(y){d(l.$$.fragment,y),d(f.$$.fragment,y),c=!1},d(y){y&&p(e),k(l),k(f),m=!1,os(_)}}}function kc(r){let e;return{c(){e=v("Pedestrians")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function wc(r){let e;return{c(){e=v("Cyclists")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function vc(r){let e;return{c(){e=v("Horse riders")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function yc(r){let e;return{c(){e=v("Other")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Sc(r){let e,l,t,n,s,o,u,a,i,f,c,m;function _(M){r[11](M)}let y={$$slots:{default:[kc]},$$scope:{ctx:r}};r[0].pedestrians!==void 0&&(y.checked=r[0].pedestrians),e=new le({props:y}),E.push(()=>U(e,"checked",_));function S(M){r[12](M)}let C={$$slots:{default:[wc]},$$scope:{ctx:r}};r[0].cyclists!==void 0&&(C.checked=r[0].cyclists),n=new le({props:C}),E.push(()=>U(n,"checked",S));function N(M){r[13](M)}let A={$$slots:{default:[vc]},$$scope:{ctx:r}};r[0].horseRiders!==void 0&&(A.checked=r[0].horseRiders),u=new le({props:A}),E.push(()=>U(u,"checked",N));function I(M){r[14](M)}let P={$$slots:{default:[yc]},$$scope:{ctx:r}};return r[0].other!==void 0&&(P.checked=r[0].other),f=new le({props:P}),E.push(()=>U(f,"checked",I)),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),o=T(),h(u.$$.fragment),i=T(),h(f.$$.fragment)},m(M,R){b(e,M,R),$(M,t,R),b(n,M,R),$(M,o,R),b(u,M,R),$(M,i,R),b(f,M,R),m=!0},p(M,R){const D={};R&4194304&&(D.$$scope={dirty:R,ctx:M}),!l&&R&1&&(l=!0,D.checked=M[0].pedestrians,W(()=>l=!1)),e.$set(D);const O={};R&4194304&&(O.$$scope={dirty:R,ctx:M}),!s&&R&1&&(s=!0,O.checked=M[0].cyclists,W(()=>s=!1)),n.$set(O);const j={};R&4194304&&(j.$$scope={dirty:R,ctx:M}),!a&&R&1&&(a=!0,j.checked=M[0].horseRiders,W(()=>a=!1)),u.$set(j);const ne={};R&4194304&&(ne.$$scope={dirty:R,ctx:M}),!c&&R&1&&(c=!0,ne.checked=M[0].other,W(()=>c=!1)),f.$set(ne)},i(M){m||(g(e.$$.fragment,M),g(n.$$.fragment,M),g(u.$$.fragment,M),g(f.$$.fragment,M),m=!0)},o(M){d(e.$$.fragment,M),d(n.$$.fragment,M),d(u.$$.fragment,M),d(f.$$.fragment,M),m=!1},d(M){M&&(p(t),p(o),p(i)),k(e,M),k(n,M),k(u,M),k(f,M)}}}function bl(r){let e,l,t,n=r[3][r[21].pedestrian_location]+"",s;return{c(){e=L("p"),l=v("Pedestrian location: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&2097152&&n!==(n=o[3][o[21].pedestrian_location]+"")&&F(s,n)},d(o){o&&p(e)}}}function kl(r){let e,l,t,n=r[4][r[21].pedestrian_movement]+"",s;return{c(){e=L("p"),l=v("Pedestrian movement: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&2097152&&n!==(n=o[4][o[21].pedestrian_movement]+"")&&F(s,n)},d(o){o&&p(e)}}}function Cc(r){let e,l,t,n=r[21].year+"",s,o,u,a,i,f=r[5][r[21].severity]+"",c,m,_,y,S,C=wl(r[21])+"",N,A,I,P,M,R=r[21].pedestrian_location&&bl(r),D=r[21].pedestrian_movement&&kl(r);return{c(){e=L("p"),l=v("Year: "),t=L("b"),s=v(n),o=T(),u=L("p"),a=v("Severity: "),i=L("b"),c=v(f),m=T(),_=L("p"),y=v("Casualties: "),S=L("b"),N=v(C),A=T(),R&&R.c(),I=T(),D&&D.c(),P=T(),M=L("p"),M.textContent="Click to open full report in CycleStreets"},m(O,j){$(O,e,j),w(e,l),w(e,t),w(t,s),$(O,o,j),$(O,u,j),w(u,a),w(u,i),w(i,c),$(O,m,j),$(O,_,j),w(_,y),w(_,S),w(S,N),$(O,A,j),R&&R.m(O,j),$(O,I,j),D&&D.m(O,j),$(O,P,j),$(O,M,j)},p(O,j){j&2097152&&n!==(n=O[21].year+"")&&F(s,n),j&2097152&&f!==(f=O[5][O[21].severity]+"")&&F(c,f),j&2097152&&C!==(C=wl(O[21])+"")&&F(N,C),O[21].pedestrian_location?R?R.p(O,j):(R=bl(O),R.c(),R.m(I.parentNode,I)):R&&(R.d(1),R=null),O[21].pedestrian_movement?D?D.p(O,j):(D=kl(O),D.c(),D.m(P.parentNode,P)):D&&(D.d(1),D=null)},d(O){O&&(p(e),p(o),p(u),p(m),p(_),p(A),p(I),p(P),p(M)),R&&R.d(O),D&&D.d(O)}}}function Lc(r){let e,l;return e=new re({props:{$$slots:{default:[Cc,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&6291456&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Tc(r){let e,l;const t=[H(It),{sourceLayer:It},{paint:{"circle-color":he(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[1]},{layout:{visibility:r[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Lc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new $t({props:n}),e.$on("click",Pc),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&451?te(t,[o&0&&se(H(It)),o&0&&{sourceLayer:It},o&448&&{paint:{"circle-color":he(["get","severity"],[1,2,3],[s[6],s[7],s[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&2&&{filter:s[1]},o&1&&{layout:{visibility:s[0].show?"visible":"none"}},t[5],t[6]]):{};o&4194304&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Mc(r){let e,l,t,n,s,o;function u(f){r[10](f)}let a={$$slots:{right:[bc],default:[_c]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0].show&&hl(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${It}.pmtiles`,$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&4194304&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&g(i,1)):(i=hl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&4194307&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let It="stats19";function Nc(r){let[e,l,t]=r.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function wl(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function Pc(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function Oc(r,e,l){let t,n,s=["pedestrians","cyclists","horseRiders","other"],o={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function u(O){return O.show?`${s.filter(ne=>O[ne]).join(",")}/${O.minYear}/${O.maxYear}`:null}let a=_t(It,o,u,Nc);J(r,a,O=>l(0,n=O));function i(O,j,ne,oe,z,q){let G=["any"];return n.pedestrians&&G.push(["get","pedestrian"]),n.cyclists&&G.push(["get","cyclist"]),n.horseRiders&&G.push(["get","horse_rider"]),n.other&&G.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],G]}let f={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},m={1:"Fatal",2:"Serious",3:"Slight"},_=K.sequential_low_to_high[4],y=K.sequential_low_to_high[2],S=K.sequential_low_to_high[0],C=[["Fatal",_],["Serious",y],["Slight",S]];function N(O){r.$$.not_equal(n.show,O)&&(n.show=O,a.set(n))}function A(O){r.$$.not_equal(n.pedestrians,O)&&(n.pedestrians=O,a.set(n))}function I(O){r.$$.not_equal(n.cyclists,O)&&(n.cyclists=O,a.set(n))}function P(O){r.$$.not_equal(n.horseRiders,O)&&(n.horseRiders=O,a.set(n))}function M(O){r.$$.not_equal(n.other,O)&&(n.other=O,a.set(n))}function R(){n.minYear=Gt(this.value),a.set(n)}function D(){n.maxYear=Gt(this.value),a.set(n)}return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=i(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,a,f,c,m,_,y,S,C,N,A,I,P,M,R,D]}class Rc extends V{constructor(e){super(),Q(this,e,Oc,Mc,Y,{})}}function Ic(r){let e;return{c(){e=v("Vehicle counts")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Dc(r){let e;return{c(){e=v(`DfT road statistics
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ac(r){let e;return{c(){e=v("methodology")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function qc(r){let e,l,t,n,s,o,u,a,i,f,c;return t=new Z({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Dc]},$$scope:{ctx:r}}}),s=new Z({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),f=new Pe({}),{c(){e=L("p"),l=v("AADF (annual average daily flow) data from "),h(t.$$.fragment),n=v(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),h(s.$$.fragment),o=v(" for details and caveats about the measurements."),u=T(),a=L("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,i=T(),h(f.$$.fragment)},m(m,_){$(m,e,_),w(e,l),b(t,e,null),w(e,n),b(s,e,null),w(e,o),$(m,u,_),$(m,a,_),$(m,i,_),b(f,m,_),c=!0},p(m,_){const y={};_&128&&(y.$$scope={dirty:_,ctx:m}),t.$set(y);const S={};_&128&&(S.$$scope={dirty:_,ctx:m}),s.$set(S)},i(m){c||(g(t.$$.fragment,m),g(s.$$.fragment,m),g(f.$$.fragment,m),c=!0)},o(m){d(t.$$.fragment,m),d(s.$$.fragment,m),d(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(u),p(a),p(i)),k(t),k(s),k(f,m)}}}function zc(r){let e,l,t;return l=new ce({props:{$$slots:{default:[qc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&128&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function vl(r){let e,l;return e=new Fe({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Fc(r){let e,l=r[6].location+"",t,n,s,o,u=r[6].year+"",a,i,f,c=r[6].motor_vehicles.toLocaleString()+"",m,_,y,S,C=r[6].year+"",N,A,I,P=r[6].pedal_cycles.toLocaleString()+"",M,R,D,O,j,ne=r[6].method+"",oe;return{c(){e=L("h2"),t=v(l),n=T(),s=L("p"),o=v("Total motor vehicles ("),a=v(u),i=v(` AADF):
        `),f=L("b"),m=v(c),_=T(),y=L("p"),S=v("Total pedal cycles ("),N=v(C),A=v(` AADF):
        `),I=L("b"),M=v(P),R=T(),D=L("p"),O=v("Count method: "),j=L("b"),oe=v(ne)},m(z,q){$(z,e,q),w(e,t),$(z,n,q),$(z,s,q),w(s,o),w(s,a),w(s,i),w(s,f),w(f,m),$(z,_,q),$(z,y,q),w(y,S),w(y,N),w(y,A),w(y,I),w(I,M),$(z,R,q),$(z,D,q),w(D,O),w(D,j),w(j,oe)},p(z,q){q&64&&l!==(l=z[6].location+"")&&F(t,l),q&64&&u!==(u=z[6].year+"")&&F(a,u),q&64&&c!==(c=z[6].motor_vehicles.toLocaleString()+"")&&F(m,c),q&64&&C!==(C=z[6].year+"")&&F(N,C),q&64&&P!==(P=z[6].pedal_cycles.toLocaleString()+"")&&F(M,P),q&64&&ne!==(ne=z[6].method+"")&&F(oe,ne)},d(z){z&&(p(e),p(n),p(s),p(_),p(y),p(R),p(D))}}}function jc(r){let e,l;return e=new re({props:{$$slots:{default:[Fc,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Hc(r){let e,l;const t=[H(Dt),{sourceLayer:Dt},{paint:{"circle-color":he(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[jc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new $t({props:n}),e.$on("click",Gc),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&se(H(Dt)),o&0&&{sourceLayer:Dt},o&6&&{paint:{"circle-color":he(["get","motor_vehicles"],s[2],s[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&128&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Bc(r){let e,l,t,n,s,o;function u(f){r[5](f)}let a={$$slots:{right:[zc],default:[Ic]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&vl(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${Dt}.pmtiles`,$$slots:{default:[Hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&128&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=vl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&129&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Dt="vehicle_counts";function Gc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Ec(r,e,l){let t,n=K.sequential_low_to_high,s=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],u=be(Dt);J(r,u,i=>l(0,t=i));function a(i){t=i,u.set(t)}return[t,n,s,o,u,a]}class Uc extends V{constructor(e){super(),Q(this,e,Ec,Bc,Y,{})}}function yl(r,e,l){const t=r.slice();return t[6]=e[l],t}function Wc(r){let e;return{c(){e=v("Issues & Conflicts")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Yc(r){let e,l,t;return{c(){e=L("p"),e.textContent=`Critical issues and policy conflicts from the Design Assistance Log.
        This is internally collected data.`,l=T(),t=L("p"),t.textContent=`This layer is manually copied from a copy of the DA Log. The data is
        recent as of 10 June 2024.`},m(n,s){$(n,e,s),$(n,l,s),$(n,t,s)},p:x,d(n){n&&(p(e),p(l),p(t))}}}function Jc(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Yc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Sl(r){let e,l;return e=new Qt({props:{rows:r[3]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Vc(r){let e,l=r[5]["Issue ID"]+"",t,n,s=r[5].Code+"",o,u,a,i=r[5]["Issue Stage"]+"",f;return{c(){e=L("h2"),t=v(l),n=v(" - "),o=v(s),u=T(),a=L("p"),f=v(i)},m(c,m){$(c,e,m),w(e,t),w(e,n),w(e,o),$(c,u,m),$(c,a,m),w(a,f)},p(c,m){m&32&&l!==(l=c[5]["Issue ID"]+"")&&F(t,l),m&32&&s!==(s=c[5].Code+"")&&F(o,s),m&32&&i!==(i=c[5]["Issue Stage"]+"")&&F(f,i)},d(c){c&&(p(e),p(u),p(a))}}}function Cl(r){let e,l=r[6]+"",t,n,s,o=r[5][r[6]]+"",u,a;return{c(){e=L("p"),t=v(l),n=v(`:
            `),s=L("b"),u=v(o),a=T()},m(i,f){$(i,e,f),w(e,t),w(e,n),w(e,s),w(s,u),w(e,a)},p(i,f){f&32&&o!==(o=i[5][i[6]]+"")&&F(u,o)},d(i){i&&p(e)}}}function Qc(r){let e,l=Me(r[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Cl(yl(r,l,n));return{c(){e=L("div");for(let n=0;n<t.length;n+=1)t[n].c();pe(e,"max-width","30vw"),pe(e,"max-height","60vh"),pe(e,"overflow","auto")},m(n,s){$(n,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,s){if(s&36){l=Me(n[2]);let o;for(o=0;o<l.length;o+=1){const u=yl(n,l,o);t[o]?t[o].p(u,s):(t[o]=Cl(u),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&p(e),nt(t,n)}}}function Kc(r){let e,l,t,n;return e=new re({props:{openOn:"hover",$$slots:{default:[Vc,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),t=new re({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Qc,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&544&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&544&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function Zc(r){let e,l;const t=[H(nn),{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Kc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new $t({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&9?te(t,[o&0&&se(H(nn)),o&8&&{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(s[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[3],t[4]]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Xc(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[Jc],default:[Wc]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&Sl(r);return s=new pt({props:{data:`${Et()}/v1/problems.geojson.gz`,$$slots:{default:[Zc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&512&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=Sl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(fe(),d(i,1,1,()=>{i=null}),ue());const _={};c&513&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let nn="problems";function xc(r,e,l){let t,n=be(nn);J(r,n,a=>l(0,t=a));let s=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],o=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function u(a){t=a,n.set(t)}return[t,n,s,o,u]}class e$ extends V{constructor(e){super(),Q(this,e,xc,Xc,Y,{})}}function t$(r){let e;function l(s,o){return s[2]<=100?s$:l$}let t=l(r),n=t(r);return{c(){n.c(),e=ve()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},i:x,o:x,d(s){s&&p(e),n.d(s)}}}function n$(r){let e,l;return e=new mt({props:{$$slots:{default:[r$]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function l$(r){let e;return{c(){e=L("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){$(l,e,t)},p:x,d(l){l&&p(e)}}}function s$(r){let e,l,t;return{c(){e=L("label"),l=v(`Downloading scheme data
      `),t=L("progress"),t.value=r[2],B(t,"class","svelte-q3473n")},m(n,s){$(n,e,s),w(e,l),w(e,t)},p(n,s){s&4&&(t.value=n[2])},d(n){n&&p(e)}}}function r$(r){let e;return{c(){e=v("Load latest scheme data")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function o$(r){let e,l,t,n;const s=[n$,t$],o=[];function u(a,i){return a[0]?a[1]?1:-1:0}return~(e=u(r))&&(l=o[e]=s[e](r)),{c(){l&&l.c(),t=ve()},m(a,i){~e&&o[e].m(a,i),$(a,t,i),n=!0},p(a,[i]){let f=e;e=u(a),e===f?~e&&o[e].p(a,i):(l&&(fe(),d(o[f],1,1,()=>{o[f]=null}),ue()),~e?(l=o[e],l?l.p(a,i):(l=o[e]=s[e](a),l.c()),g(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(g(l),n=!0)},o(a){d(l),n=!1},d(a){a&&p(t),~e&&o[e].d(a)}}}function i$(r,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),s=!0,o=0;async function u(){let i=await ds(`${Et()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,o=c)});l(2,o=100);let f=new TextDecoder().decode(i);t("all_schemes_output.geojson",f),l(1,s=!1)}rn(async()=>{n&&await u()});async function a(){l(0,n=!0),await u()}return r.$$set=i=>{"loadFile"in i&&l(4,t=i.loadFile)},[n,s,o,a,t]}class a$ extends V{constructor(e){super(),Q(this,e,i$,o$,Y,{loadFile:4})}}function f$(r){return Ke(["get","intervention_type"],{area:Qe.area,route:Qe.route,crossing:Qe.crossing,other:Qe.other},"white")}function u$(r){return[["Areas",Qe.area],["Routes",Qe.route],["Crossings",Qe.crossing],["Other",Qe.other]]}function c$(r){let e,l;return e=new Qt({props:{rows:r[1]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&2&&(s.rows=t[1]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function $$(r){let e,l,t,n,s;function o(a){r[3](a)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new ot({props:u}),E.push(()=>U(e,"value",o)),e.$on("change",r[2]),n=new He({props:{label:"Legend",$$slots:{default:[c$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};!l&&i&1&&(l=!0,f.value=a[0],W(()=>l=!1)),e.$set(f);const c={};i&66&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}function p$(r,e,l){let t;J(r,on,i=>l(4,t=i));let n="fundingProgramme",[s,o]=tn();function u(){let i;n=="interventionType"?(i=f$(),l(1,o=u$())):n=="fundingProgramme"?l(1,[i,o]=tn(),o):n=="currentMilestone"&&l(1,[i,o]=pr(),o),t.setPaintProperty("interventions-points","circle-color",i),t.setPaintProperty("interventions-lines","line-color",i),t.setPaintProperty("interventions-polygons","fill-color",i),t.setPaintProperty("interventions-polygons-outlines","line-color",i)}function a(i){n=i,l(0,n)}return[n,o,u,a]}class m$ extends V{constructor(e){super(),Q(this,e,p$,$$,Y,{})}}const At=st({type:"FeatureCollection",features:[],schemes:{}}),Vt=st(new Map),Ll=st(!0),Ht=st(""),Bt=st("");let ln=st(null);function _$(r){let e,l=r[0].size.toLocaleString()+"",t,n,s=r[11].route.toLocaleString()+"",o,u,a=r[11].area.toLocaleString()+"",i,f,c=r[11].crossing.toLocaleString()+"",m,_,y=r[11].other.toLocaleString()+"",S,C,N=Tl(r[11].totalLength).toFixed(1)+"",A,I;return{c(){e=v("Showing "),t=v(l),n=v(" schemes ("),o=v(s),u=v(`
    routes, `),i=v(a),f=v(` areas,
    `),m=v(c),_=v(" crossings, "),S=v(y),C=v(`
    other, with total LineString length of `),A=v(N),I=v(" miles)")},m(P,M){$(P,e,M),$(P,t,M),$(P,n,M),$(P,o,M),$(P,u,M),$(P,i,M),$(P,f,M),$(P,m,M),$(P,_,M),$(P,S,M),$(P,C,M),$(P,A,M),$(P,I,M)},p(P,M){M&1&&l!==(l=P[0].size.toLocaleString()+"")&&F(t,l),M&2048&&s!==(s=P[11].route.toLocaleString()+"")&&F(o,s),M&2048&&a!==(a=P[11].area.toLocaleString()+"")&&F(i,a),M&2048&&c!==(c=P[11].crossing.toLocaleString()+"")&&F(m,c),M&2048&&y!==(y=P[11].other.toLocaleString()+"")&&F(S,y),M&2048&&N!==(N=Tl(P[11].totalLength).toFixed(1)+"")&&F(A,N)},d(P){P&&(p(e),p(t),p(n),p(o),p(u),p(i),p(f),p(m),p(_),p(S),p(C),p(A),p(I))}}}function g$(r){let e,l,t;function n(o){r[14](o)}let s={$$slots:{default:[_$]},$$scope:{ctx:r}};return r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),E.push(()=>U(e,"checked",n)),{c(){h(e.$$.fragment)},m(o,u){b(e,o,u),t=!0},p(o,u){const a={};u&134219777&&(a.$$scope={dirty:u,ctx:o}),!l&&u&2&&(l=!0,a.checked=o[1],W(()=>l=!1)),e.$set(a)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function d$(r){let e;return{c(){e=v("Reset all filters")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function h$(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function b$(r){let e,l,t,n,s,o;return t=new mt({props:{$$slots:{default:[h$]},$$scope:{ctx:r}}}),t.$on("click",r[20]),{c(){e=L("input"),l=T(),h(t.$$.fragment),B(e,"type","text"),B(e,"class","govuk-input govuk-input--width-10"),B(e,"id","filterInterventionText")},m(u,a){$(u,e,a),Ve(e,r[7]),$(u,l,a),b(t,u,a),n=!0,s||(o=xe(e,"input",r[19]),s=!0)},p(u,a){a&128&&e.value!==u[7]&&Ve(e,u[7]);const i={};a&134217728&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){n||(g(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(l)),k(t,u),s=!1,o()}}}function k$(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function w$(r){let e,l,t,n,s,o;return t=new mt({props:{$$slots:{default:[k$]},$$scope:{ctx:r}}}),t.$on("click",r[22]),{c(){e=L("input"),l=T(),h(t.$$.fragment),B(e,"type","text"),B(e,"class","govuk-input govuk-input--width-10"),B(e,"id","filterSchemeText")},m(u,a){$(u,e,a),Ve(e,r[6]),$(u,l,a),b(t,u,a),n=!0,s||(o=xe(e,"input",r[21]),s=!0)},p(u,a){a&64&&e.value!==u[6]&&Ve(e,u[6]);const i={};a&134217728&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){n||(g(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(l)),k(t,u),s=!1,o()}}}function v$(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y,S,C,N,A,I,P;e=new mt({props:{$$slots:{default:[d$]},$$scope:{ctx:r}}}),e.$on("click",r[13]);function M(q){r[15](q)}let R={label:"Authority or region",choices:r[8],emptyOption:!0};r[2]!==void 0&&(R.value=r[2]),t=new ot({props:R}),E.push(()=>U(t,"value",M));function D(q){r[16](q)}let O={label:"Funding programme",choices:r[9],emptyOption:!0};r[3]!==void 0&&(O.value=r[3]),o=new ot({props:O}),E.push(()=>U(o,"value",D));function j(q){r[17](q)}let ne={label:"Current milestone",choices:r[10],emptyOption:!0};r[4]!==void 0&&(ne.value=r[4]),i=new ot({props:ne}),E.push(()=>U(i,"value",j));function oe(q){r[18](q)}let z={label:"Sketch source",choices:r[12],emptyOption:!0};return r[5]!==void 0&&(z.value=r[5]),m=new ot({props:z}),E.push(()=>U(m,"value",oe)),S=new dn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[b$]},$$scope:{ctx:r}}}),N=new dn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[w$]},$$scope:{ctx:r}}}),I=new m$({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),s=T(),h(o.$$.fragment),a=T(),h(i.$$.fragment),c=T(),h(m.$$.fragment),y=T(),h(S.$$.fragment),C=T(),h(N.$$.fragment),A=T(),h(I.$$.fragment)},m(q,G){b(e,q,G),$(q,l,G),b(t,q,G),$(q,s,G),b(o,q,G),$(q,a,G),b(i,q,G),$(q,c,G),b(m,q,G),$(q,y,G),b(S,q,G),$(q,C,G),b(N,q,G),$(q,A,G),b(I,q,G),P=!0},p(q,G){const Oe={};G&134217728&&(Oe.$$scope={dirty:G,ctx:q}),e.$set(Oe);const Re={};G&256&&(Re.choices=q[8]),!n&&G&4&&(n=!0,Re.value=q[2],W(()=>n=!1)),t.$set(Re);const Ie={};G&512&&(Ie.choices=q[9]),!u&&G&8&&(u=!0,Ie.value=q[3],W(()=>u=!1)),o.$set(Ie);const ye={};G&1024&&(ye.choices=q[10]),!f&&G&16&&(f=!0,ye.value=q[4],W(()=>f=!1)),i.$set(ye);const De={};!_&&G&32&&(_=!0,De.value=q[5],W(()=>_=!1)),m.$set(De);const ge={};G&134217856&&(ge.$$scope={dirty:G,ctx:q}),S.$set(ge);const je={};G&134217792&&(je.$$scope={dirty:G,ctx:q}),N.$set(je)},i(q){P||(g(e.$$.fragment,q),g(t.$$.fragment,q),g(o.$$.fragment,q),g(i.$$.fragment,q),g(m.$$.fragment,q),g(S.$$.fragment,q),g(N.$$.fragment,q),g(I.$$.fragment,q),P=!0)},o(q){d(e.$$.fragment,q),d(t.$$.fragment,q),d(o.$$.fragment,q),d(i.$$.fragment,q),d(m.$$.fragment,q),d(S.$$.fragment,q),d(N.$$.fragment,q),d(I.$$.fragment,q),P=!1},d(q){q&&(p(l),p(s),p(a),p(c),p(y),p(C),p(A)),k(e,q),k(t,q),k(o,q),k(i,q),k(m,q),k(S,q),k(N,q),k(I,q)}}}function y$(r){let e,l,t,n;return e=new et({props:{small:!0,$$slots:{default:[g$]},$$scope:{ctx:r}}}),t=new He({props:{label:"Filters",$$slots:{default:[v$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,[o]){const u={};o&134219779&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&134219772&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function Tl(r){return r*621371e-9}function S$(r,e,l){let t,n,s,o;J(r,Bt,G=>l(6,t=G)),J(r,Ht,G=>l(7,n=G)),J(r,At,G=>l(23,s=G)),J(r,Vt,G=>l(24,o=G));let{schemesToBeShown:u=new Set}=e,{show:a=!0}=e,i=[],f="",c=[],m=new Set(en.slice(0,-1)),_="",y=[],S="",C=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],N="",A={area:0,route:0,crossing:0,other:0,totalLength:0};rn(()=>{var Ie,ye,De;let G=new Set,Oe=new Set,Re=new Set;for(let ge of o.values())(Ie=ge.browse)!=null&&Ie.authority_or_region&&G.add(ge.browse.authority_or_region),(ye=ge.browse)!=null&&ye.funding_programme&&Oe.add(ge.browse.funding_programme),(De=ge.browse)!=null&&De.current_milestone&&Re.add(ge.browse.current_milestone);l(8,i=Array.from(G.entries())),i.sort(),l(9,c=en.map(ge=>[ge,ge])),l(10,y=Array.from(Re.entries())),y.sort()});function I(G,Oe,Re,Ie,ye,De){let ge=Oe.toLowerCase(),je=Re.toLowerCase(),qe=ae=>{var _e,we,Se,ke,qt,zt,Ft;if(ge&&!((_e=ae.properties.name)!=null&&_e.toLowerCase().includes(ge))&&!((we=ae.properties.description)!=null&&we.toLowerCase().includes(ge)))return!1;if(G||je||Ie||ye||De){let Be=o.get(ae.properties.scheme_reference);if(Ie&&((Se=Be.browse)==null?void 0:Se.authority_or_region)!=Ie||ye&&ye!=="Other"&&((ke=Be.browse)==null?void 0:ke.funding_programme)!=ye||ye==="Other"&&m.has(((qt=Be.browse)==null?void 0:qt.funding_programme)??"")||De&&((zt=Be.browse)==null?void 0:zt.current_milestone)!=De||je&&!Be.scheme_reference.toLowerCase().includes(je)&&!(Be.scheme_name??"").toLowerCase().includes(je)||G&&G!=="Both"&&G!==((Ft=Be.browse)==null?void 0:Ft.sketch_source))return!1}return!0};l(0,u=new Set(s.features.filter(qe).map(ae=>ae.properties.scheme_reference))),l(11,A={area:0,route:0,crossing:0,other:0,totalLength:0});let Ce=ae=>{var _e,we;return!(!u.has(ae.properties.scheme_reference)||ge&&!((_e=ae.properties.name)!=null&&_e.toLowerCase().includes(ge))&&!((we=ae.properties.description)!=null&&we.toLowerCase().includes(ge)))};for(let ae of s.features)Ce(ae)?(delete ae.properties.hide_while_editing,l(11,A[ae.properties.intervention_type]++,A),ae.geometry.type=="LineString"&&ae.properties.length_meters&&l(11,A.totalLength+=ae.properties.length_meters,A)):ae.properties.hide_while_editing=!0;At.set(s),l(11,A)}function P(){l(5,N=""),l(2,f=""),l(3,_=""),l(4,S=""),Te(Ht,n="",n),Te(Bt,t="",t)}function M(G){a=G,l(1,a)}function R(G){f=G,l(2,f)}function D(G){_=G,l(3,_)}function O(G){S=G,l(4,S)}function j(G){N=G,l(5,N)}function ne(){n=this.value,Ht.set(n)}const oe=()=>Te(Ht,n="",n);function z(){t=this.value,Bt.set(t)}const q=()=>Te(Bt,t="",t);return r.$$set=G=>{"schemesToBeShown"in G&&l(0,u=G.schemesToBeShown),"show"in G&&l(1,a=G.show)},r.$$.update=()=>{r.$$.dirty&252&&I(N,n,t,f,_,S)},[u,a,f,_,S,N,t,n,i,c,y,A,C,P,M,R,D,O,j,ne,oe,z,q]}class C$ extends V{constructor(e){super(),Q(this,e,S$,y$,Y,{schemesToBeShown:0,show:1})}}function Ml(r){let e,l,t,n=r[0].status+"",s;return{c(){e=L("p"),l=v("Status: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[0].status+"")&&F(s,n)},d(o){o&&p(e)}}}function Nl(r){let e,l,t,n=r[0].timescale+"",s;return{c(){e=L("p"),l=v("Timescale: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[0].timescale+"")&&F(s,n)},d(o){o&&p(e)}}}function Pl(r){let e,l,t,n=r[0].timescale_year+"",s;return{c(){e=L("p"),l=v("Estimated completion year: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[0].timescale_year+"")&&F(s,n)},d(o){o&&p(e)}}}function Ol(r){let e,l,t,n=r[0].year_published+"",s;return{c(){e=L("p"),l=v("Scheme most recently published: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[0].year_published+"")&&F(s,n)},d(o){o&&p(e)}}}function Rl(r){let e,l,t,n=r[0].year_consulted+"",s;return{c(){e=L("p"),l=v("Scheme most recently consulted on: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[0].year_consulted+"")&&F(s,n)},d(o){o&&p(e)}}}function L$(r){let e,l,t,n,s,o=r[0].status&&Ml(r),u=r[0].timescale&&Nl(r),a=r[0].timescale_year&&Pl(r),i=r[0].year_published&&Ol(r),f=r[0].year_consulted&&Rl(r);return{c(){o&&o.c(),e=T(),u&&u.c(),l=T(),a&&a.c(),t=T(),i&&i.c(),n=T(),f&&f.c(),s=ve()},m(c,m){o&&o.m(c,m),$(c,e,m),u&&u.m(c,m),$(c,l,m),a&&a.m(c,m),$(c,t,m),i&&i.m(c,m),$(c,n,m),f&&f.m(c,m),$(c,s,m)},p(c,[m]){c[0].status?o?o.p(c,m):(o=Ml(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[0].timescale?u?u.p(c,m):(u=Nl(c),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),c[0].timescale_year?a?a.p(c,m):(a=Pl(c),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),c[0].year_published?i?i.p(c,m):(i=Ol(c),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),c[0].year_consulted?f?f.p(c,m):(f=Rl(c),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null)},i:x,o:x,d(c){c&&(p(e),p(l),p(t),p(n),p(s)),o&&o.d(c),u&&u.d(c),a&&a.d(c),i&&i.d(c),f&&f.d(c)}}}function T$(r,e,l){let{props:t}=e;return r.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class us extends V{constructor(e){super(),Q(this,e,T$,L$,Y,{props:0})}}function Il(r){let e,l,t,n=r[0].budget.toLocaleString()+"",s,o;return{c(){e=L("p"),l=v("Cost: "),t=L("b"),s=v(n),o=v(`
    GBP`)},m(u,a){$(u,e,a),w(e,l),w(e,t),w(t,s),w(e,o)},p(u,a){a&1&&n!==(n=u[0].budget.toLocaleString()+"")&&F(s,n)},d(u){u&&p(e)}}}function Dl(r){let e;return{c(){e=L("p"),e.textContent="Development is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Al(r){let e;return{c(){e=L("p"),e.textContent="Construction is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ql(r){let e,l,t,n;return{c(){e=L("p"),l=v("Funding sources: "),t=L("b"),n=v(r[1])},m(s,o){$(s,e,o),w(e,l),w(e,t),w(t,n)},p(s,o){o&2&&F(n,s[1])},d(s){s&&p(e)}}}function M$(r){let e,l,t,n,s=r[0].budget&&Il(r),o=r[0].development_funded&&Dl(),u=r[0].construction_funded&&Al(),a=r[1]&&ql(r);return{c(){s&&s.c(),e=T(),o&&o.c(),l=T(),u&&u.c(),t=T(),a&&a.c(),n=ve()},m(i,f){s&&s.m(i,f),$(i,e,f),o&&o.m(i,f),$(i,l,f),u&&u.m(i,f),$(i,t,f),a&&a.m(i,f),$(i,n,f)},p(i,[f]){i[0].budget?s?s.p(i,f):(s=Il(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),i[0].development_funded?o||(o=Dl(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),i[0].construction_funded?u||(u=Al(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),i[1]?a?a.p(i,f):(a=ql(i),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:x,o:x,d(i){i&&(p(e),p(l),p(t),p(n)),s&&s.d(i),o&&o.d(i),u&&u.d(i),a&&a.d(i)}}}function N$(r){if(!r.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])r.funding_sources[l]&&e.push(l.toUpperCase());return r.funding_sources.other&&e.push(r.funding_sources.other),e.join(", ")}function P$(r,e,l){let t,{props:n}=e;return r.$$set=s=>{"props"in s&&l(0,n=s.props)},r.$$.update=()=>{r.$$.dirty&1&&l(1,t=N$(n))},[n,t]}class cs extends V{constructor(e){super(),Q(this,e,P$,M$,Y,{props:0})}}function Kt(r){const e=r.slice(),l=e[1].pipeline;return e[5]=l,e}function Zt(r){const e=r.slice(),l=e[0].pipeline;return e[5]=l,e}function zl(r){let e,l,t,n=bn(r[0].length_meters)+"",s;return{c(){e=L("p"),l=v("Length: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=bn(o[0].length_meters)+"")&&F(s,n)},d(o){o&&p(e)}}}function Fl(r){let e,l=tt(r[0].description,r[2])+"";return{c(){e=L("p")},m(t,n){$(t,e,n),e.innerHTML=l},p(t,n){n&5&&l!==(l=tt(t[0].description,t[2])+"")&&(e.innerHTML=l)},d(t){t&&p(e)}}}function jl(r){let e,l,t,n,s,o,u,a=r[5].atf4_type&&Hl(r),i=r[5].accuracy&&Bl(r),f=r[5].is_alternative&&Gl();return n=new cs({props:{props:r[5]}}),o=new us({props:{props:r[5]}}),{c(){a&&a.c(),e=T(),i&&i.c(),l=T(),f&&f.c(),t=T(),h(n.$$.fragment),s=T(),h(o.$$.fragment)},m(c,m){a&&a.m(c,m),$(c,e,m),i&&i.m(c,m),$(c,l,m),f&&f.m(c,m),$(c,t,m),b(n,c,m),$(c,s,m),b(o,c,m),u=!0},p(c,m){c[5].atf4_type?a?a.p(c,m):(a=Hl(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[5].accuracy?i?i.p(c,m):(i=Bl(c),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),c[5].is_alternative?f||(f=Gl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const _={};m&1&&(_.props=c[5]),n.$set(_);const y={};m&1&&(y.props=c[5]),o.$set(y)},i(c){u||(g(n.$$.fragment,c),g(o.$$.fragment,c),u=!0)},o(c){d(n.$$.fragment,c),d(o.$$.fragment,c),u=!1},d(c){c&&(p(e),p(l),p(t),p(s)),a&&a.d(c),i&&i.d(c),f&&f.d(c),k(n,c),k(o,c)}}}function Hl(r){let e,l,t,n=r[5].atf4_type+"",s;return{c(){e=L("p"),l=v("ATF4 type: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[5].atf4_type+"")&&F(s,n)},d(o){o&&p(e)}}}function Bl(r){let e,l,t,n=r[5].accuracy+"",s;return{c(){e=L("p"),l=v("Accuracy: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[5].accuracy+"")&&F(s,n)},d(o){o&&p(e)}}}function Gl(r){let e;return{c(){e=L("p"),e.textContent="Represents an alternative route"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function El(r){var o;let e,l,t,n=((o=r[1].browse)==null?void 0:o.capital_scheme_id)+"",s;return{c(){e=L("p"),l=v("Capital scheme ID: "),t=L("b"),s=v(n)},m(u,a){$(u,e,a),w(e,l),w(e,t),w(t,s)},p(u,a){var i;a&2&&n!==(n=((i=u[1].browse)==null?void 0:i.capital_scheme_id)+"")&&F(s,n)},d(u){u&&p(e)}}}function Ul(r){var o;let e,l,t,n=((o=r[1].browse)==null?void 0:o.current_milestone)+"",s;return{c(){e=L("p"),l=v("Current milestone: "),t=L("b"),s=v(n)},m(u,a){$(u,e,a),w(e,l),w(e,t),w(t,s)},p(u,a){var i;a&2&&n!==(n=((i=u[1].browse)==null?void 0:i.current_milestone)+"")&&F(s,n)},d(u){u&&p(e)}}}function Wl(r){let e,l,t,n,s,o,u,a=r[5].scheme_type&&Yl(r),i=r[5].atf4_lead_type&&Jl(r),f=r[5].scheme_description&&Vl(r);return n=new cs({props:{props:r[5]}}),o=new us({props:{props:r[5]}}),{c(){a&&a.c(),e=T(),i&&i.c(),l=T(),f&&f.c(),t=T(),h(n.$$.fragment),s=T(),h(o.$$.fragment)},m(c,m){a&&a.m(c,m),$(c,e,m),i&&i.m(c,m),$(c,l,m),f&&f.m(c,m),$(c,t,m),b(n,c,m),$(c,s,m),b(o,c,m),u=!0},p(c,m){c[5].scheme_type?a?a.p(c,m):(a=Yl(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[5].atf4_lead_type?i?i.p(c,m):(i=Jl(c),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),c[5].scheme_description?f?f.p(c,m):(f=Vl(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const _={};m&2&&(_.props=c[5]),n.$set(_);const y={};m&2&&(y.props=c[5]),o.$set(y)},i(c){u||(g(n.$$.fragment,c),g(o.$$.fragment,c),u=!0)},o(c){d(n.$$.fragment,c),d(o.$$.fragment,c),u=!1},d(c){c&&(p(e),p(l),p(t),p(s)),a&&a.d(c),i&&i.d(c),f&&f.d(c),k(n,c),k(o,c)}}}function Yl(r){let e,l,t,n=r[5].scheme_type+"",s;return{c(){e=L("p"),l=v("Scheme type: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&2&&n!==(n=o[5].scheme_type+"")&&F(s,n)},d(o){o&&p(e)}}}function Jl(r){let e,l,t,n=r[5].atf4_lead_type+"",s;return{c(){e=L("p"),l=v("ATF4 lead type: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&2&&n!==(n=o[5].atf4_lead_type+"")&&F(s,n)},d(o){o&&p(e)}}}function Vl(r){let e,l,t=r[5].scheme_description+"",n;return{c(){e=L("p"),l=v("Descripton: "),n=v(t)},m(s,o){$(s,e,o),w(e,l),w(e,n)},p(s,o){o&2&&t!==(t=s[5].scheme_description+"")&&F(n,t)},d(s){s&&p(e)}}}function O$(r){var qt,zt,Ft,Be;let e,l,t,n=tt(r[0].name,r[2])+"",s,o=r[0].intervention_type+"",u,a,i,f,c,m,_,y,S,C,N,A=tt(r[1].scheme_name??"",r[3])+"",I,P,M=tt(r[0].scheme_reference,r[3])+"",R,D,O,j,ne,oe=((qt=r[1].browse)==null?void 0:qt.authority_or_region)+"",z,q,G,Oe,Re,Ie,ye=((zt=r[1].browse)==null?void 0:zt.funding_programme)+"",De,ge,je,qe,Ce=r[0].length_meters&&zl(r),ae=r[0].description&&Fl(r),_e=r[0].pipeline&&jl(Zt(r)),we=((Ft=r[1].browse)==null?void 0:Ft.capital_scheme_id)&&El(r),Se=((Be=r[1].browse)==null?void 0:Be.current_milestone)&&Ul(r),ke=r[1].pipeline&&Wl(Kt(r));return{c(){e=L("div"),l=L("h2"),t=new it(!1),s=v(" ("),u=v(o),a=v(")"),i=T(),Ce&&Ce.c(),f=T(),ae&&ae.c(),c=T(),_e&&_e.c(),m=T(),_=L("hr"),y=T(),S=L("p"),C=v("Part of scheme: "),N=new it(!1),I=v(" ("),P=new it(!1),R=v(")"),D=T(),O=L("p"),j=v("Authority or region: "),ne=L("b"),z=v(oe),q=T(),we&&we.c(),G=T(),Oe=L("p"),Re=v("Funding programme: "),Ie=L("b"),De=v(ye),ge=T(),Se&&Se.c(),je=T(),ke&&ke.c(),t.a=s,N.a=I,P.a=R,pe(e,"max-width","30vw"),pe(e,"max-height","60vh"),pe(e,"overflow","auto")},m(ie,Le){$(ie,e,Le),w(e,l),t.m(n,l),w(l,s),w(l,u),w(l,a),w(e,i),Ce&&Ce.m(e,null),w(e,f),ae&&ae.m(e,null),w(e,c),_e&&_e.m(e,null),w(e,m),w(e,_),w(e,y),w(e,S),w(S,C),N.m(A,S),w(S,I),P.m(M,S),w(S,R),w(e,D),w(e,O),w(O,j),w(O,ne),w(ne,z),w(e,q),we&&we.m(e,null),w(e,G),w(e,Oe),w(Oe,Re),w(Oe,Ie),w(Ie,De),w(e,ge),Se&&Se.m(e,null),w(e,je),ke&&ke.m(e,null),qe=!0},p(ie,[Le]){var cn,$n,pn,mn;(!qe||Le&5)&&n!==(n=tt(ie[0].name,ie[2])+"")&&t.p(n),(!qe||Le&1)&&o!==(o=ie[0].intervention_type+"")&&F(u,o),ie[0].length_meters?Ce?Ce.p(ie,Le):(Ce=zl(ie),Ce.c(),Ce.m(e,f)):Ce&&(Ce.d(1),Ce=null),ie[0].description?ae?ae.p(ie,Le):(ae=Fl(ie),ae.c(),ae.m(e,c)):ae&&(ae.d(1),ae=null),ie[0].pipeline?_e?(_e.p(Zt(ie),Le),Le&1&&g(_e,1)):(_e=jl(Zt(ie)),_e.c(),g(_e,1),_e.m(e,m)):_e&&(fe(),d(_e,1,1,()=>{_e=null}),ue()),(!qe||Le&10)&&A!==(A=tt(ie[1].scheme_name??"",ie[3])+"")&&N.p(A),(!qe||Le&9)&&M!==(M=tt(ie[0].scheme_reference,ie[3])+"")&&P.p(M),(!qe||Le&2)&&oe!==(oe=((cn=ie[1].browse)==null?void 0:cn.authority_or_region)+"")&&F(z,oe),($n=ie[1].browse)!=null&&$n.capital_scheme_id?we?we.p(ie,Le):(we=El(ie),we.c(),we.m(e,G)):we&&(we.d(1),we=null),(!qe||Le&2)&&ye!==(ye=((pn=ie[1].browse)==null?void 0:pn.funding_programme)+"")&&F(De,ye),(mn=ie[1].browse)!=null&&mn.current_milestone?Se?Se.p(ie,Le):(Se=Ul(ie),Se.c(),Se.m(e,je)):Se&&(Se.d(1),Se=null),ie[1].pipeline?ke?(ke.p(Kt(ie),Le),Le&2&&g(ke,1)):(ke=Wl(Kt(ie)),ke.c(),g(ke,1),ke.m(e,null)):ke&&(fe(),d(ke,1,1,()=>{ke=null}),ue())},i(ie){qe||(g(_e),g(ke),qe=!0)},o(ie){d(_e),d(ke),qe=!1},d(ie){ie&&p(e),Ce&&Ce.d(),ae&&ae.d(),_e&&_e.d(),we&&we.d(),Se&&Se.d(),ke&&ke.d()}}}function tt(r,e){return e?r.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):r}function R$(r,e,l){let t,n,s,o;J(r,Vt,a=>l(4,n=a)),J(r,Ht,a=>l(2,s=a)),J(r,Bt,a=>l(3,o=a));let{props:u}=e;return r.$$set=a=>{"props"in a&&l(0,u=a.props)},r.$$.update=()=>{r.$$.dirty&17&&l(1,t=n.get(u.scheme_reference))},[u,t,s,o,n]}class un extends V{constructor(e){super(),Q(this,e,R$,O$,Y,{props:0})}}function I$(r){let e,l=r[6].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&64&&l!==(l=n[6].name+"")&&F(t,l)},d(n){n&&p(e)}}}function D$(r){let e,l;return e=new un({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.props=t[6]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function A$(r){let e,l,t,n;return e=new re({props:{popupClass:"border-popup",$$slots:{default:[I$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),t=new re({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[D$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function q$(r){let e,l=r[6].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&64&&l!==(l=n[6].name+"")&&F(t,l)},d(n){n&&p(e)}}}function z$(r){let e,l;return e=new un({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.props=t[6]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function F$(r){let e,l,t,n;return e=new re({props:{popupClass:"border-popup",$$slots:{default:[q$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),t=new re({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[z$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function j$(r){let e,l=r[6].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&64&&l!==(l=n[6].name+"")&&F(t,l)},d(n){n&&p(e)}}}function H$(r){let e,l;return e=new un({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.props=t[6]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function B$(r){let e,l,t,n;return e=new re({props:{popupClass:"border-popup",$$slots:{default:[j$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),t=new re({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[H$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function G$(r){let e,l,t,n,s,o,u,a,i,f;const c=[H("interventions-points"),{filter:["all",kn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":wn,"circle-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let m={$$slots:{default:[A$]},$$scope:{ctx:r}};for(let M=0;M<c.length;M+=1)m=ee(m,c[M]);e=new $t({props:m});const _=[H("interventions-lines"),{filter:["all",vn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":jt,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[F$]},$$scope:{ctx:r}};for(let M=0;M<_.length;M+=1)y=ee(y,_[M]);t=new de({props:y});const S=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*jt,"circle-opacity":0,"circle-stroke-color":Qe.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let C={};for(let M=0;M<S.length;M+=1)C=ee(C,S[M]);s=new $t({props:C});const N=[H("interventions-polygons"),{filter:["all",Ut,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":X(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let A={$$slots:{default:[B$]},$$scope:{ctx:r}};for(let M=0;M<N.length;M+=1)A=ee(A,N[M]);u=new ze({props:A});const I=[H("interventions-polygons-outlines"),{filter:["all",Ut,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*jt}},{layout:{visibility:r[0]?"visible":"none"}}];let P={};for(let M=0;M<I.length;M+=1)P=ee(P,I[M]);return i=new de({props:P}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment)},m(M,R){b(e,M,R),$(M,l,R),b(t,M,R),$(M,n,R),b(s,M,R),$(M,o,R),b(u,M,R),$(M,a,R),b(i,M,R),f=!0},p(M,R){const D=R&29?te(c,[c[0],R&24&&{filter:["all",kn,M[3],M[4]]},c[2],c[3],R&4&&{paint:{"circle-color":M[2],"circle-radius":wn,"circle-opacity":X(1,.5)}},R&1&&{layout:{visibility:M[0]?"visible":"none"}},c[6]]):{};R&128&&(D.$$scope={dirty:R,ctx:M}),e.$set(D);const O=R&13?te(_,[_[0],R&8&&{filter:["all",vn,M[3]]},_[2],_[3],R&4&&{paint:{"line-color":M[2],"line-width":jt,"line-opacity":X(1,.5)}},R&1&&{layout:{visibility:M[0]?"visible":"none"}},_[6]]):{};R&128&&(O.$$scope={dirty:R,ctx:M}),t.$set(O);const j=R&1?te(S,[S[0],S[1],S[2],{layout:{visibility:M[0]?"visible":"none"}}]):{};s.$set(j);const ne=R&13?te(N,[N[0],R&8&&{filter:["all",Ut,M[3]]},N[2],N[3],R&4&&{paint:{"fill-color":M[2],"fill-opacity":X(.2,.5)}},R&1&&{layout:{visibility:M[0]?"visible":"none"}},N[6]]):{};R&128&&(ne.$$scope={dirty:R,ctx:M}),u.$set(ne);const oe=R&13?te(I,[I[0],R&8&&{filter:["all",Ut,M[3]]},R&4&&{paint:{"line-color":M[2],"line-opacity":.5,"line-width":.7*jt}},R&1&&{layout:{visibility:M[0]?"visible":"none"}}]):{};i.$set(oe)},i(M){f||(g(e.$$.fragment,M),g(t.$$.fragment,M),g(s.$$.fragment,M),g(u.$$.fragment,M),g(i.$$.fragment,M),f=!0)},o(M){d(e.$$.fragment,M),d(t.$$.fragment,M),d(s.$$.fragment,M),d(u.$$.fragment,M),d(i.$$.fragment,M),f=!1},d(M){M&&(p(l),p(n),p(o),p(a)),k(e,M),k(t,M),k(s,M),k(u,M),k(i,M)}}}function E$(r){let e,l;return e=new pt({props:{data:r[1],$$slots:{default:[G$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&2&&(s.data=t[1]),n&129&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function U$(r,e,l){let t,n;J(r,At,i=>l(5,n=i));let{showSchemes:s}=e,[o]=tn();const u=["!=",["get","hide_while_editing"],!0],a=["!=",["get","endpoint"],!0];return r.$$set=i=>{"showSchemes"in i&&l(0,s=i.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&l(1,t=Ts(n))},[s,t,o,u,a,n]}class W$ extends V{constructor(e){super(),Q(this,e,U$,E$,Y,{showSchemes:0})}}function Ql(r,e,l){const t=r.slice();return t[11]=e[l],t}function Y$(r){let e,l;return e=new a$({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Kl(r){let e,l,t,n,s;e=new mt({props:{$$slots:{default:[J$]},$$scope:{ctx:r}}}),e.$on("click",r[7]);function o(a){r[8](a)}let u={title:"About this scheme data",$$slots:{default:[V$]},$$scope:{ctx:r}};return r[2]!==void 0&&(u.open=r[2]),t=new es({props:u}),E.push(()=>U(t,"open",o)),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(a,i){b(e,a,i),$(a,l,i),b(t,a,i),s=!0},p(a,i){const f={};i&16384&&(f.$$scope={dirty:i,ctx:a}),e.$set(f);const c={};i&16400&&(c.$$scope={dirty:i,ctx:a}),!n&&i&4&&(n=!0,c.open=a[2],W(()=>n=!1)),t.$set(c)},i(a){s||(g(e.$$.fragment,a),g(t.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),s=!1},d(a){a&&p(l),k(e,a),k(t,a)}}}function J$(r){let e;return{c(){e=v("About the scheme data")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Zl(r){let e,l,t=r[11]+"",n;return{c(){e=L("li"),l=L("p"),n=v(t)},m(s,o){$(s,e,o),w(e,l),w(l,n)},p(s,o){o&16&&t!==(t=s[11]+"")&&F(n,t)},d(s){s&&p(e)}}}function V$(r){let e,l,t,n,s=Me(r[4].notes),o=[];for(let u=0;u<s.length;u+=1)o[u]=Zl(Ql(r,s,u));return{c(){e=L("div"),l=L("p"),l.textContent="Please note there are data quality caveats for all scheme data:",t=T(),n=L("ul");for(let u=0;u<o.length;u+=1)o[u].c();B(e,"class","govuk-prose")},m(u,a){$(u,e,a),w(e,l),w(e,t),w(e,n);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(n,null)},p(u,a){if(a&16){s=Me(u[4].notes);let i;for(i=0;i<s.length;i+=1){const f=Ql(u,s,i);o[i]?o[i].p(f,a):(o[i]=Zl(f),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},d(u){u&&p(e),nt(o,u)}}}function Xl(r){let e,l,t,n;function s(a){r[9](a)}function o(a){r[10](a)}let u={};return r[0]!==void 0&&(u.schemesToBeShown=r[0]),r[1]!==void 0&&(u.show=r[1]),e=new C$({props:u}),E.push(()=>U(e,"schemesToBeShown",s)),E.push(()=>U(e,"show",o)),{c(){h(e.$$.fragment)},m(a,i){b(e,a,i),n=!0},p(a,i){const f={};!l&&i&1&&(l=!0,f.schemesToBeShown=a[0],W(()=>l=!1)),!t&&i&2&&(t=!0,f.show=a[1],W(()=>t=!1)),e.$set(f)},i(a){n||(g(e.$$.fragment,a),n=!0)},o(a){d(e.$$.fragment,a),n=!1},d(a){k(e,a)}}}function Q$(r){let e=an()=="Private (development)",l,t,n,s,o,u,a,i,f=e&&Y$(r),c=r[4].notes&&Kl(r);n=new hs({props:{label:"Load schemes from GeoJSON",onLoad:r[6]}}),o=new bs({props:{errorMessage:r[3]}});let m=r[5].size>0&&Xl(r);return{c(){f&&f.c(),l=T(),c&&c.c(),t=T(),h(n.$$.fragment),s=T(),h(o.$$.fragment),u=T(),m&&m.c(),a=ve()},m(_,y){f&&f.m(_,y),$(_,l,y),c&&c.m(_,y),$(_,t,y),b(n,_,y),$(_,s,y),b(o,_,y),$(_,u,y),m&&m.m(_,y),$(_,a,y),i=!0},p(_,y){e&&f.p(_,y),_[4].notes?c?(c.p(_,y),y&16&&g(c,1)):(c=Kl(_),c.c(),g(c,1),c.m(t.parentNode,t)):c&&(fe(),d(c,1,1,()=>{c=null}),ue());const S={};y&8&&(S.errorMessage=_[3]),o.$set(S),_[5].size>0?m?(m.p(_,y),y&32&&g(m,1)):(m=Xl(_),m.c(),g(m,1),m.m(a.parentNode,a)):m&&(fe(),d(m,1,1,()=>{m=null}),ue())},i(_){i||(g(f),g(c),g(n.$$.fragment,_),g(o.$$.fragment,_),g(m),i=!0)},o(_){d(f),d(c),d(n.$$.fragment,_),d(o.$$.fragment,_),d(m),i=!1},d(_){_&&(p(l),p(t),p(s),p(u),p(a)),f&&f.d(_),c&&c.d(_),k(n,_),k(o,_),m&&m.d(_)}}}function K$(r){let e,l,t,n;return e=new He({props:{label:"Schemes",$$slots:{default:[Q$]},$$scope:{ctx:r}}}),t=new W$({props:{showSchemes:r[1]}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,[o]){const u={};o&16447&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&2&&(a.showSchemes=s[1]),t.$set(a)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function Z$(r,e,l){let t,n;J(r,At,y=>l(4,t=y)),J(r,Vt,y=>l(5,n=y));let s=new Set,o=!0,u=!1,a="";function i(y,S){try{At.set(JSON.parse(S)),Vt.set(cr(t)),l(3,a="")}catch(C){l(3,a=`The file you loaded is broken: ${C}`)}}const f=()=>l(2,u=!0);function c(y){u=y,l(2,u)}function m(y){s=y,l(0,s)}function _(y){o=y,l(1,o)}return[s,o,u,a,t,n,i,f,c,m,_]}class X$ extends V{constructor(e){super(),Q(this,e,Z$,K$,Y,{})}}function x$(r){let e,l,t,n,s,o,u,a;return e=new Hu({}),t=new Xu({}),s=new mc({}),u=new fc({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),$(i,n,f),b(s,i,f),$(i,o,f),b(u,i,f),a=!0},i(i){a||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),g(u.$$.fragment,i),a=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),d(u.$$.fragment,i),a=!1},d(i){i&&(p(l),p(n),p(o)),k(e,i),k(t,i),k(s,i),k(u,i)}}}function ep(r){let e,l;return e=new et({props:{small:!0,$$slots:{default:[x$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function tp(r){let e,l,t,n,s,o,u,a,i,f,c,m;return e=new ta({}),t=new Oa({}),s=new ca({}),u=new wa({}),i=new Lu({}),c=new ru({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment),f=T(),h(c.$$.fragment)},m(_,y){b(e,_,y),$(_,l,y),b(t,_,y),$(_,n,y),b(s,_,y),$(_,o,y),b(u,_,y),$(_,a,y),b(i,_,y),$(_,f,y),b(c,_,y),m=!0},i(_){m||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(s.$$.fragment,_),g(u.$$.fragment,_),g(i.$$.fragment,_),g(c.$$.fragment,_),m=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(s.$$.fragment,_),d(u.$$.fragment,_),d(i.$$.fragment,_),d(c.$$.fragment,_),m=!1},d(_){_&&(p(l),p(n),p(o),p(a),p(f)),k(e,_),k(t,_),k(s,_),k(u,_),k(i,_),k(c,_)}}}function np(r){let e,l;return e=new et({props:{small:!0,$$slots:{default:[tp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function lp(r){let e,l,t,n,s,o;return e=new Bi({}),t=new Ff({}),s=new Vf({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment)},m(u,a){b(e,u,a),$(u,l,a),b(t,u,a),$(u,n,a),b(s,u,a),o=!0},i(u){o||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(s.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(s.$$.fragment,u),o=!1},d(u){u&&(p(l),p(n)),k(e,u),k(t,u),k(s,u)}}}function sp(r){let e,l,t,n,s,o,u,a,i,f;return e=new Ko({}),t=new Ti({}),s=new no({}),u=new Co({}),i=new jo({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment)},m(c,m){b(e,c,m),$(c,l,m),b(t,c,m),$(c,n,m),b(s,c,m),$(c,o,m),b(u,c,m),$(c,a,m),b(i,c,m),f=!0},i(c){f||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(s.$$.fragment,c),g(u.$$.fragment,c),g(i.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(s.$$.fragment,c),d(u.$$.fragment,c),d(i.$$.fragment,c),f=!1},d(c){c&&(p(l),p(n),p(o),p(a)),k(e,c),k(t,c),k(s,c),k(u,c),k(i,c)}}}function rp(r){let e,l;return e=new et({props:{small:!0,$$slots:{default:[sp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function op(r){let e,l,t,n;return e=new Wr({}),t=new po({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function ip(r){let e,l;return e=new et({props:{small:!0,$$slots:{default:[op]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ap(r){let e,l,t,n,s,o,u,a;return e=new Pf({}),t=new Ua({}),s=new kf({}),u=new e$({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),$(i,n,f),b(s,i,f),$(i,o,f),b(u,i,f),a=!0},i(i){a||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),g(u.$$.fragment,i),a=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),d(u.$$.fragment,i),a=!1},d(i){i&&(p(l),p(n),p(o)),k(e,i),k(t,i),k(s,i),k(u,i)}}}function fp(r){let e,l,t,n,s,o,u,a,i=an()=="Private (development)",f,c,m,_,y;e=new Uc({}),t=new Rc({}),s=new of({}),u=new _u({});let S=i&&ap();return c=new oi({}),_=new gi({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T(),S&&S.c(),f=T(),h(c.$$.fragment),m=T(),h(_.$$.fragment)},m(C,N){b(e,C,N),$(C,l,N),b(t,C,N),$(C,n,N),b(s,C,N),$(C,o,N),b(u,C,N),$(C,a,N),S&&S.m(C,N),$(C,f,N),b(c,C,N),$(C,m,N),b(_,C,N),y=!0},p:x,i(C){y||(g(e.$$.fragment,C),g(t.$$.fragment,C),g(s.$$.fragment,C),g(u.$$.fragment,C),g(S),g(c.$$.fragment,C),g(_.$$.fragment,C),y=!0)},o(C){d(e.$$.fragment,C),d(t.$$.fragment,C),d(s.$$.fragment,C),d(u.$$.fragment,C),d(S),d(c.$$.fragment,C),d(_.$$.fragment,C),y=!1},d(C){C&&(p(l),p(n),p(o),p(a),p(f),p(m)),k(e,C),k(t,C),k(s,C),k(u,C),S&&S.d(C),k(c,C),k(_,C)}}}function up(r){let e,l;return e=new et({props:{small:!0,$$slots:{default:[fp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function cp(r){let e,l,t,n,s;function o(a){r[6](a)}let u={cfg:r[5],map:r[3]};return r[0]!==void 0&&(u.enabled=r[0]),e=new Ns({props:u}),E.push(()=>U(e,"enabled",o)),n=new ur({}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,i){const f={};i&8&&(f.map=a[3]),!l&&i&1&&(l=!0,f.enabled=a[0],W(()=>l=!1)),e.$set(f)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}function $p(r){let e,l;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let n={};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ze({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&2?te(t,[t[0],t[1],{layout:{visibility:s[1]?"none":"visible"}}]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function pp(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y,S,C,N,A,I,P,M;return l=new X$({}),n=new He({props:{label:"Trip generators",$$slots:{default:[ep]},$$scope:{ctx:r}}}),o=new He({props:{label:"Existing infrastructure",$$slots:{default:[np]},$$scope:{ctx:r}}}),a=new He({props:{label:"Public transport",$$slots:{default:[lp]},$$scope:{ctx:r}}}),f=new He({props:{label:"Boundaries",$$slots:{default:[rp]},$$scope:{ctx:r}}}),m=new He({props:{label:"Census",$$slots:{default:[ip]},$$scope:{ctx:r}}}),y=new He({props:{label:"Other",$$slots:{default:[up]},$$scope:{ctx:r}}}),C=new He({props:{label:"Tools",$$slots:{default:[cp]},$$scope:{ctx:r}}}),A=new Ms({props:{disabled:!r[1]}}),P=new pt({props:{data:r[4],$$slots:{default:[$p]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(l.$$.fragment),t=T(),h(n.$$.fragment),s=T(),h(o.$$.fragment),u=T(),h(a.$$.fragment),i=T(),h(f.$$.fragment),c=T(),h(m.$$.fragment),_=T(),h(y.$$.fragment),S=T(),h(C.$$.fragment),N=T(),h(A.$$.fragment),I=T(),h(P.$$.fragment)},m(R,D){$(R,e,D),b(l,e,null),w(e,t),b(n,e,null),w(e,s),b(o,e,null),w(e,u),b(a,e,null),w(e,i),b(f,e,null),w(e,c),b(m,e,null),w(e,_),b(y,e,null),w(e,S),b(C,e,null),w(e,N),b(A,e,null),r[7](e),$(R,I,D),b(P,R,D),M=!0},p(R,[D]){const O={};D&256&&(O.$$scope={dirty:D,ctx:R}),n.$set(O);const j={};D&256&&(j.$$scope={dirty:D,ctx:R}),o.$set(j);const ne={};D&256&&(ne.$$scope={dirty:D,ctx:R}),a.$set(ne);const oe={};D&256&&(oe.$$scope={dirty:D,ctx:R}),f.$set(oe);const z={};D&256&&(z.$$scope={dirty:D,ctx:R}),m.$set(z);const q={};D&256&&(q.$$scope={dirty:D,ctx:R}),y.$set(q);const G={};D&265&&(G.$$scope={dirty:D,ctx:R}),C.$set(G);const Oe={};D&2&&(Oe.disabled=!R[1]),A.$set(Oe);const Re={};D&258&&(Re.$$scope={dirty:D,ctx:R}),P.$set(Re)},i(R){M||(g(l.$$.fragment,R),g(n.$$.fragment,R),g(o.$$.fragment,R),g(a.$$.fragment,R),g(f.$$.fragment,R),g(m.$$.fragment,R),g(y.$$.fragment,R),g(C.$$.fragment,R),g(A.$$.fragment,R),g(P.$$.fragment,R),M=!0)},o(R){d(l.$$.fragment,R),d(n.$$.fragment,R),d(o.$$.fragment,R),d(a.$$.fragment,R),d(f.$$.fragment,R),d(m.$$.fragment,R),d(y.$$.fragment,R),d(C.$$.fragment,R),d(A.$$.fragment,R),d(P.$$.fragment,R),M=!1},d(R){R&&(p(e),p(I)),k(l),k(n),k(o),k(a),k(f),k(m),k(y),k(C),k(A),r[7](null),k(P,R)}}}function mp(r,e,l){let t,n,s,o;J(r,Ll,c=>l(1,n=c)),J(r,ln,c=>l(2,s=c)),J(r,on,c=>l(3,o=c));let u={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},a={getStreetViewRoadLayerNames:c=>Ps(c,ks(xt))};function i(c){t=c,l(0,t),l(1,n)}function f(c){E[c?"unshift":"push"](()=>{s=c,ln.set(s)})}return r.$$.update=()=>{r.$$.dirty&2&&l(0,t=!n),r.$$.dirty&1&&Ll.set(!t)},[t,n,s,o,u,a,i,f]}class _p extends V{constructor(e){super(),Q(this,e,mp,pp,Y,{})}}function gp(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y;return l=new Os({}),u=new Rs({props:{boundaryGeojson:r[3]}}),i=new ws({}),{c(){e=L("div"),h(l.$$.fragment),t=T(),n=L("div"),s=L("h1"),s.textContent="Browse schemes",o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment),f=T(),c=L("p"),c.textContent=`App version: ${an()}`,m=T(),_=L("div"),pe(n,"display","flex"),pe(n,"justify-content","space-between"),B(e,"slot","sidebar"),B(e,"class","govuk-prose")},m(S,C){$(S,e,C),b(l,e,null),w(e,t),w(e,n),w(n,s),w(n,o),b(u,n,null),w(e,a),b(i,e,null),w(e,f),w(e,c),w(e,m),w(e,_),r[6](_),y=!0},p(S,C){const N={};C&8&&(N.boundaryGeojson=S[3]),u.$set(N)},i(S){y||(g(l.$$.fragment,S),g(u.$$.fragment,S),g(i.$$.fragment,S),y=!0)},o(S){d(l.$$.fragment,S),d(u.$$.fragment,S),d(i.$$.fragment,S),y=!1},d(S){S&&p(e),k(l),k(u),k(i),r[6](null)}}}function xl(r){let e,l,t;return l=new _p({}),{c(){e=L("div"),h(l.$$.fragment),B(e,"class","top-right svelte-u44ed2")},m(n,s){$(n,e,s),b(l,e,null),t=!0},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function dp(r){let e,l,t,n;e=new Is({});let s=r[2]&&xl();return{c(){h(e.$$.fragment),l=T(),s&&s.c(),t=ve()},m(o,u){b(e,o,u),$(o,l,u),s&&s.m(o,u),$(o,t,u),n=!0},p(o,u){o[2]?s?u&4&&g(s,1):(s=xl(),s.c(),g(s,1),s.m(t.parentNode,t)):s&&(fe(),d(s,1,1,()=>{s=null}),ue())},i(o){n||(g(e.$$.fragment,o),g(s),n=!0)},o(o){d(e.$$.fragment,o),d(s),n=!1},d(o){o&&(p(l),p(t)),k(e,o),s&&s.d(o)}}}function hp(r){let e,l,t;return l=new vs({props:{style:r[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[dp]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(l.$$.fragment),B(e,"slot","main")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&2&&(o.style=n[1]),s&260&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function bp(r){let e,l;return e=new Us({props:{$$slots:{main:[hp],sidebar:[gp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&271&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function kp(r,e,l){let t,n,s,o,u;J(r,ln,c=>l(4,t=c)),J(r,on,c=>l(5,n=c)),J(r,xt,c=>l(1,s=c)),J(r,yn,c=>l(2,o=c)),J(r,At,c=>l(3,u=c)),rn(()=>{ys()});const a=new URLSearchParams(window.location.search);xt.set(a.get("style")||"dataviz");let i;function f(c){E[c?"unshift":"push"](()=>{i=c,l(0,i),l(4,t)})}return r.$$.update=()=>{r.$$.dirty&32&&n&&yn.set(n),r.$$.dirty&17&&i&&t&&(l(0,i.innerHTML="",i),i.appendChild(t))},[i,s,o,u,t,n,f]}class wp extends V{constructor(e){super(),Q(this,e,kp,bp,Y,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new wp({target:document.getElementById("app")});
