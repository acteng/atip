import{S as $e,i as me,s as ge,e as y,l as he,a as m,b as A,c as S,n as X,d as k,L as _e,f as ve,E as oe,F as be,D as we,R as ye,g as Y,h as ie,j as Ae,M as Se,k as g,m as ke,o as i,p as c,q as ue,t as d,r as h,u as _,v as Le,w as Ce,x as B,y as fe,z as Me,G as Ee,A as Te,B as Fe,C as He,H as Ie,I as Oe,J as Be,K as Je,N as Ne,O as pe}from"./index-77999501.js";import{A as je}from"./About-647b5e74.js";import{P as De}from"./Popup-3b3ffff2.js";function Ge(r){let e,s,n;return{c(){e=y("div"),e.innerHTML=`<img src="${he}" alt="Active Travel England logo" class="svelte-13flgp1"/>`,s=m(),n=y("div"),A(e,"class","black-bar svelte-13flgp1"),A(n,"class","green-bar svelte-13flgp1")},m(l,t){S(l,e,t),S(l,s,t),S(l,n,t)},p:X,i:X,o:X,d(l){l&&(k(e),k(s),k(n))}}}class Pe extends $e{constructor(e){super(),me(this,e,null,Ge,ge,{})}}function Ve(r){let e;return{c(){e=B("About")},m(s,n){S(s,e,n)},d(s){s&&k(e)}}}function Re(r){let e,s,n,l,t;return{c(){e=y("input"),s=m(),n=y("datalist"),A(e,"class","govuk-input govuk-input--width-20"),A(e,"id","inputValue"),A(e,"data-testid","transport-authority"),A(e,"list","authorities-list"),A(n,"id","authorities-list")},m(o,f){S(o,e,f),fe(e,r[0]),S(o,s,f),S(o,n,f),r[12](n),l||(t=Me(e,"input",r[11]),l=!0)},p(o,f){f&1&&e.value!==o[0]&&fe(e,o[0])},d(o){o&&(k(e),k(s),k(n)),r[12](null),l=!1,t()}}}function qe(r){let e;return{c(){e=B("Start")},m(s,n){S(s,e,n)},d(s){s&&k(e)}}}function Ue(r){let e,s=r[19].name+"",n,l,t=r[19].level+"",o,f;return{c(){e=y("p"),n=B(s),l=B(" ("),o=B(t),f=B(")")},m(p,b){S(p,e,b),i(e,n),i(e,l),i(e,o),i(e,f)},p(p,b){b&524288&&s!==(s=p[19].name+"")&&pe(n,s),b&524288&&t!==(t=p[19].level+"")&&pe(o,t)},d(p){p&&k(e)}}}function ze(r){let e,s;return e=new De({props:{$$slots:{default:[Ue,({props:n})=>({19:n}),({props:n})=>n?524288:0]},$$scope:{ctx:r}}}),{c(){g(e.$$.fragment)},m(n,l){c(e,n,l),s=!0},p(n,l){const t={};l&1572864&&(t.$$scope={dirty:l,ctx:n}),e.$set(t)},i(n){s||(d(e.$$.fragment,n),s=!0)},o(n){h(e.$$.fragment,n),s=!1},d(n){_(e,n)}}}function Ke(r){let e,s,n,l;return e=new Oe({props:{id:"boundaries",filter:["==",["get","level"],r[5]],paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":Be(0,.5)},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[ze]},$$scope:{ctx:r}}}),e.$on("click",r[8]),n=new Je({props:{id:"boundaries-outline",filter:["==",["get","level"],r[5]],paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},manageHoverState:!0}}),{c(){g(e.$$.fragment),s=m(),g(n.$$.fragment)},m(t,o){c(e,t,o),S(t,s,o),c(n,t,o),l=!0},p(t,o){const f={};o&32&&(f.filter=["==",["get","level"],t[5]]),o&1048576&&(f.$$scope={dirty:o,ctx:t}),e.$set(f);const p={};o&32&&(p.filter=["==",["get","level"],t[5]]),n.$set(p)},i(t){l||(d(e.$$.fragment,t),d(n.$$.fragment,t),l=!0)},o(t){h(e.$$.fragment,t),h(n.$$.fragment,t),l=!1},d(t){t&&k(s),_(e,t),_(n,t)}}}function Qe(r){let e,s;return e=new Ee({props:{data:r[1],generateId:!0,$$slots:{default:[Ke]},$$scope:{ctx:r}}}),{c(){g(e.$$.fragment)},m(n,l){c(e,n,l),s=!0},p(n,l){const t={};l&2&&(t.data=n[1]),l&1048608&&(t.$$scope={dirty:l,ctx:n}),e.$set(t)},i(n){s||(d(e.$$.fragment,n),s=!0)},o(n){h(e.$$.fragment,n),s=!1},d(n){_(e,n)}}}function We(r){let e,s,n,l,t,o,f,p,b,w,J,L,G,F,P,M,V,R,q,E,N,u,C,v,H,j,T,Z,U,D,O,K,I,Q,z;n=new Pe({}),o=new _e({}),w=new ve({props:{$$slots:{default:[Ve]},$$scope:{ctx:r}}}),w.$on("click",r[10]),L=new oe({props:{errorMessage:r[3]}}),F=new be({props:{label:"Select Transport Authority or Local Authority District",id:"inputValue",$$slots:{default:[Re]},$$scope:{ctx:r}}}),M=new we({props:{disabled:!r[6],$$slots:{default:[qe]},$$scope:{ctx:r}}}),M.$on("click",r[9]);function ce(a){r[13](a)}let x={label:"Or pick from the map",choices:[["TA","Transport Authorities"],["LAD","Local Authority Districts"]],inlineSmall:!0};r[5]!==void 0&&(x.value=r[5]),E=new ye({props:x}),Y.push(()=>ie(E,"value",ce)),H=new oe({props:{errorMessage:Xe}}),T=new Ae({props:{label:"Or upload an ATIP GeoJSON file",onLoad:r[7]}}),O=new Se({props:{style:"streets",startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Qe]},$$scope:{ctx:r}}});function de(a){r[14](a)}let ee={};return r[2]!==void 0&&(ee.open=r[2]),I=new je({props:ee}),Y.push(()=>ie(I,"open",de)),{c(){e=y("div"),s=y("div"),g(n.$$.fragment),l=m(),t=y("div"),g(o.$$.fragment),f=m(),p=y("p"),p.textContent=`App version: ${ke()}`,b=m(),g(w.$$.fragment),J=m(),g(L.$$.fragment),G=m(),g(F.$$.fragment),P=m(),g(M.$$.fragment),V=m(),R=y("hr"),q=m(),g(E.$$.fragment),u=m(),C=y("hr"),v=m(),g(H.$$.fragment),j=m(),g(T.$$.fragment),Z=m(),U=y("div"),D=y("div"),g(O.$$.fragment),K=m(),g(I.$$.fragment),A(t,"class","left svelte-lyn11h"),A(s,"class","govuk-grid-column-one-half"),A(D,"id","map"),A(D,"class","svelte-lyn11h"),A(U,"class","govuk-grid-column-one-half"),A(e,"class","govuk-grid-row")},m(a,$){S(a,e,$),i(e,s),c(n,s,null),i(s,l),i(s,t),c(o,t,null),i(t,f),i(t,p),i(t,b),c(w,t,null),i(t,J),c(L,t,null),i(t,G),c(F,t,null),i(t,P),c(M,t,null),i(t,V),i(t,R),i(t,q),c(E,t,null),i(t,u),i(t,C),i(t,v),c(H,t,null),i(t,j),c(T,t,null),i(e,Z),i(e,U),i(U,D),c(O,D,null),S(a,K,$),c(I,a,$),z=!0},p(a,[$]){const te={};$&1048576&&(te.$$scope={dirty:$,ctx:a}),w.$set(te);const ne={};$&8&&(ne.errorMessage=a[3]),L.$set(ne);const se={};$&1048593&&(se.$$scope={dirty:$,ctx:a}),F.$set(se);const W={};$&64&&(W.disabled=!a[6]),$&1048576&&(W.$$scope={dirty:$,ctx:a}),M.$set(W);const ae={};!N&&$&32&&(N=!0,ae.value=a[5],ue(()=>N=!1)),E.$set(ae);const re={};$&1048610&&(re.$$scope={dirty:$,ctx:a}),O.$set(re);const le={};!Q&&$&4&&(Q=!0,le.open=a[2],ue(()=>Q=!1)),I.$set(le)},i(a){z||(d(n.$$.fragment,a),d(o.$$.fragment,a),d(w.$$.fragment,a),d(L.$$.fragment,a),d(F.$$.fragment,a),d(M.$$.fragment,a),d(E.$$.fragment,a),d(H.$$.fragment,a),d(T.$$.fragment,a),d(O.$$.fragment,a),d(I.$$.fragment,a),z=!0)},o(a){h(n.$$.fragment,a),h(o.$$.fragment,a),h(w.$$.fragment,a),h(L.$$.fragment,a),h(F.$$.fragment,a),h(M.$$.fragment,a),h(E.$$.fragment,a),h(H.$$.fragment,a),h(T.$$.fragment,a),h(O.$$.fragment,a),h(I.$$.fragment,a),z=!1},d(a){a&&(k(e),k(K)),_(n),_(o),_(w),_(L),_(F),_(M),_(E),_(H),_(T),_(O),_(I,a)}}}let Xe="";function Ye(r,e,s){let n,l;Le(r,Ne,u=>s(15,l=u));let t={type:"FeatureCollection",features:[]},o=!1,p=new URLSearchParams(window.location.search).get("error")||"",b,w,J=new Set,L="TA";Ce(async()=>{Te(),s(1,t=await Fe());for(let u of t.features){let C=document.createElement("option");C.value=u.properties.full_name,C.label=`${u.properties.name} (${u.properties.level})`,w.appendChild(C),J.add(u.properties.full_name)}});function G(u,C){try{let v=JSON.parse(C),H=He(v.features,t);if(!H)throw new Error("Can't figure out the authority boundary that fully contains this scheme");v.authority=H;let j=v.authority,T=F(v);T!="v1"&&(j+=`_${T}`),Ie(j,JSON.stringify(v)),window.location.href=`scheme.html?authority=${v.authority}&schema=${T}`}catch(v){s(3,p=`Couldn't load scheme from a file: ${v}`)}}function F(u){if(u.features.length>0){let C=u.features[0].properties;for(let v of["pipeline"])if(C&&v in C)return v}return l}function P(u){window.location.href=`scheme.html?authority=${u.detail.features[0].properties.full_name}&schema=${l}`}function M(){window.location.href=`scheme.html?authority=${b}&schema=${l}`}const V=()=>s(2,o=!o);function R(){b=this.value,s(0,b)}function q(u){Y[u?"unshift":"push"](()=>{w=u,s(4,w)})}function E(u){L=u,s(5,L)}function N(u){o=u,s(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&s(6,n=J.has(b))},[b,t,o,p,w,L,n,G,P,M,V,R,q,E,N]}class Ze extends $e{constructor(e){super(),me(this,e,Ye,We,ge,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Ze({target:document.getElementById("app")});
