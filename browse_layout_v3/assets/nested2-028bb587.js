import{S as K,i as Z,s as Q,e as T,b as B,ax as me,c as p,n as le,d as m,aT as $s,g as E,h as U,a as L,k as b,p as k,z as tt,q as W,t as g,r as d,u as w,P as $t,Q as pt,T as mt,U as _t,b4 as kn,o as h,al as Pe,a8 as $e,a9 as pe,au as nt,x as v,O as F,a7 as Oe,aa as on,ab as ps,v as X,ac as ms,ad as _s,ae as Fe,af as gs,ag as ds,b5 as Ts,V as bt,b6 as wn,b7 as Cs,G as dt,aP as Xt,Y as re,K as Se,f as lt,aR as Ls,b3 as te,a5 as qe,b8 as de,J as ne,I as ze,_ as oe,as as ie,a6 as Yt,y as Qe,X as hs,b0 as Bt,b9 as Et,ba as ut,R as bs,bb as Ms,bc as Is,w as fn,bd as Ns,F as vn,D as Ps,b2 as an,H as Os,m as un,j as Rs,E as Ds,aU as js,aV as xt,L as As,M as Gs,A as Fs}from"./index-fbddeb70.js";import{e as yn,s as q,u as Ke,t as qs,q as xe,M as zs,a as fe,v as Te,k as ct,R as Hs,h as Ze,C as it,f as gt,p as Sn,b as Bs,g as Es,d as Tn,w as Cn,c as Ln,x as Ht,i as Wt,B as Us,S as Ws,n as Ys,H as Js,Z as Vs,G as Qs,m as Mn}from"./ZoomOutMap-83b327ab.js";import{P as ue}from"./Popup-6cdf0e0a.js";function Ks(r){let e;return{c(){e=T("span"),B(e,"class","svelte-kzgqtg"),me(e,"background",r[0])},m(l,t){p(l,e,t)},p(l,[t]){t&1&&me(e,"background",l[0])},i:le,o:le,d(l){l&&m(e)}}}function Zs(r,e,l){let{color:t}=e;return r.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class je extends K{constructor(e){super(),Z(this,e,Zs,Ks,Q,{color:0})}}const Xs="/atip/browse_layout_v3/assets/help-d011708a.svg";function xs(r){let e,l;const t=r[1].default,n=$t(t,r,r[4],null);return{c(){e=T("div"),n&&n.c(),B(e,"class","govuk-prose")},m(s,o){p(s,e,o),n&&n.m(e,null),l=!0},p(s,o){n&&n.p&&(!l||o&16)&&pt(n,t,s,s[4],l?_t(t,s[4],o,null):mt(s[4]),null)},i(s){l||(g(n,s),l=!0)},o(s){d(n,s),l=!1},d(s){s&&m(e),n&&n.d(s)}}}function er(r){let e,l,t,n,s,o,u;function f(a){r[3](a)}let i={title:"Help",$$slots:{default:[xs]},$$scope:{ctx:r}};return r[0]!==void 0&&(i.open=r[0]),t=new $s({props:i}),E.push(()=>U(t,"open",f)),{c(){e=T("button"),e.innerHTML=`<img src="${Xs}" title="Help" alt="Help"/>`,l=L(),b(t.$$.fragment),B(e,"class","svelte-7d9d1l")},m(a,c){p(a,e,c),p(a,l,c),k(t,a,c),s=!0,o||(u=tt(e,"click",r[2]),o=!0)},p(a,[c]){const $={};c&16&&($.$$scope={dirty:c,ctx:a}),!n&&c&1&&(n=!0,$.open=a[0],W(()=>n=!1)),t.$set($)},i(a){s||(g(t.$$.fragment,a),s=!0)},o(a){d(t.$$.fragment,a),s=!1},d(a){a&&(m(e),m(l)),w(t,a),o=!1,u()}}}function tr(r,e,l){let{$$slots:t={},$$scope:n}=e,s=!1;const o=()=>l(0,s=!0);function u(f){s=f,l(0,s)}return r.$$set=f=>{"$$scope"in f&&l(4,n=f.$$scope)},[s,t,o,u,n]}class ce extends K{constructor(e){super(),Z(this,e,tr,er,Q,{})}}const nr=r=>({}),In=r=>({}),lr=r=>({}),Nn=r=>({});function sr(r){let e,l,t,n,s,o,u,f,i,a,c;const $=r[4].sidebar,_=$t($,r,r[3],Nn),y=r[4].main,S=$t(y,r,r[3],In);return{c(){e=T("div"),l=T("aside"),t=T("div"),_&&_.c(),n=L(),s=T("button"),s.textContent="→",u=L(),f=T("main"),S&&S.c(),B(t,"class","sidebar-content content-container svelte-1n0etgd"),B(s,"type","button"),B(s,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),B(l,"class",o=kn(r[1]?"":"collapsed")+" svelte-1n0etgd"),me(l,"--sidebarWidth",r[0]),B(f,"class","svelte-1n0etgd"),B(e,"class","overall-layout svelte-1n0etgd")},m(C,O){p(C,e,O),h(e,l),h(l,t),_&&_.m(t,null),h(l,n),h(l,s),h(e,u),h(e,f),S&&S.m(f,null),i=!0,a||(c=tt(s,"click",r[2]),a=!0)},p(C,[O]){_&&_.p&&(!i||O&8)&&pt(_,$,C,C[3],i?_t($,C[3],O,lr):mt(C[3]),Nn),(!i||O&2&&o!==(o=kn(C[1]?"":"collapsed")+" svelte-1n0etgd"))&&B(l,"class",o),(!i||O&1)&&me(l,"--sidebarWidth",C[0]),S&&S.p&&(!i||O&8)&&pt(S,y,C,C[3],i?_t(y,C[3],O,nr):mt(C[3]),In)},i(C){i||(g(_,C),g(S,C),i=!0)},o(C){d(_,C),d(S,C),i=!1},d(C){C&&m(e),_&&_.d(C),S&&S.d(C),a=!1,c()}}}function rr(r,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:s="25rem"}=e,o=!0;function u(){l(1,o=!o)}return r.$$set=f=>{"sidebarWidth"in f&&l(0,s=f.sidebarWidth),"$$scope"in f&&l(3,n=f.$$scope)},[s,o,u,n,t]}class or extends K{constructor(e){super(),Z(this,e,rr,sr,Q,{sidebarWidth:0})}}function Pn(r,e,l){const t=r.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function On(r){let e,l,t,n=r[1]+"",s,o,u;return l=new je({props:{color:r[2]}}),{c(){e=T("li"),b(l.$$.fragment),t=L(),s=v(n),o=L()},m(f,i){p(f,e,i),k(l,e,null),h(e,t),h(e,s),h(e,o),u=!0},p(f,i){const a={};i&1&&(a.color=f[2]),l.$set(a),(!u||i&1)&&n!==(n=f[1]+"")&&F(s,n)},i(f){u||(g(l.$$.fragment,f),u=!0)},o(f){d(l.$$.fragment,f),u=!1},d(f){f&&m(e),w(l)}}}function ir(r){let e,l,t=Pe(r[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=On(Pn(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){e=T("ul");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,u){p(o,e,u);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);l=!0},p(o,[u]){if(u&1){t=Pe(o[0]);let f;for(f=0;f<t.length;f+=1){const i=Pn(o,t,f);n[f]?(n[f].p(i,u),g(n[f],1)):(n[f]=On(i),n[f].c(),g(n[f],1),n[f].m(e,null))}for($e(),f=t.length;f<n.length;f+=1)s(f);pe()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)g(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&m(e),nt(n,o)}}}function fr(r,e,l){let{rows:t}=e;return r.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Ut extends K{constructor(e){super(),Z(this,e,fr,ir,Q,{rows:0})}}function Rn(r){let e=r[0],l,t,n=Dn(r);return{c(){n.c(),l=Oe()},m(s,o){n.m(s,o),p(s,l,o),t=!0},p(s,o){o&1&&Q(e,e=s[0])?($e(),d(n,1,1,le),pe(),n=Dn(s),n.c(),g(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(g(n),t=!0)},o(s){d(n),t=!1},d(s){s&&m(l),n.d(s)}}}function Dn(r){let e;const l=r[16].default,t=$t(l,r,r[15],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&32768)&&pt(t,l,n,n[15],e?_t(l,n[15],s,null):mt(n[15]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function ar(r){let e,l,t=r[0]&&Rn(r);return{c(){t&&t.c(),e=Oe()},m(n,s){t&&t.m(n,s),p(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&g(t,1)):(t=Rn(n),t.c(),g(t,1),t.m(e.parentNode,e)):t&&($e(),d(t,1,1,()=>{t=null}),pe())},i(n){l||(g(t),l=!0)},o(n){d(t),l=!1},d(n){n&&m(e),t&&t.d(n)}}}function ur(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=on("raster-source")}=e,{tiles:f}=e,{tileSize:i=void 0}=e,{bounds:a=null}=e,{scheme:c=null}=e,{attribution:$=null}=e,{minzoom:_=null}=e,{maxzoom:y=null}=e,{volatile:S=null}=e;const{map:C,self:O}=ps();X(r,C,R=>l(14,n=R)),X(r,O,R=>l(0,t=R));let G,D=!0;return ms(()=>{t&&G&&n&&(_s(C,t,G),Fe(O,t=null,t),l(12,G=void 0))}),r.$$set=R=>{"id"in R&&l(3,u=R.id),"tiles"in R&&l(4,f=R.tiles),"tileSize"in R&&l(5,i=R.tileSize),"bounds"in R&&l(6,a=R.bounds),"scheme"in R&&l(7,c=R.scheme),"attribution"in R&&l(8,$=R.attribution),"minzoom"in R&&l(9,_=R.minzoom),"maxzoom"in R&&l(10,y=R.maxzoom),"volatile"in R&&l(11,S=R.volatile),"$$scope"in R&&l(15,o=R.$$scope)},r.$$.update=()=>{r.$$.dirty&24569&&n&&t!==u&&(Fe(O,t=u,t),gs(n,t,ds({type:"raster",tiles:f,tileSize:i,bounds:a,scheme:c,attribution:$,minzoom:_,maxzoom:y,volatile:S}),R=>n&&R===t,()=>{t&&(l(12,G=n==null?void 0:n.getSource(t)),l(13,D=!0))})),r.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,G=n==null?void 0:n.getSource(u))})),r.$$.dirty&12304&&G&&(D?l(13,D=!1):G.setTiles(f))},[t,C,O,u,f,i,a,c,$,_,y,S,G,D,n,o,s]}class cr extends K{constructor(e){super(),Z(this,e,ur,ar,Q,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function $r(r){let e;const l=r[16].default,t=$t(l,r,r[24],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16777216)&&pt(t,l,n,n[24],e?_t(l,n[24],s,null):mt(n[24]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function pr(r){let e,l,t;function n(o){r[17](o)}let s={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[$r]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.hovered=r[0]),e=new Ts({props:s}),E.push(()=>U(e,"hovered",n)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){b(e.$$.fragment)},m(o,u){k(e,o,u),t=!0},p(o,[u]){const f={};u&2&&(f.id=o[1]),u&4&&(f.source=o[2]),u&8&&(f.sourceLayer=o[3]),u&16&&(f.beforeId=o[4]),u&32&&(f.beforeLayerType=o[5]),u&64&&(f.paint=o[6]),u&128&&(f.layout=o[7]),u&256&&(f.filter=o[8]),u&512&&(f.applyToClusters=o[9]),u&1024&&(f.minzoom=o[10]),u&2048&&(f.maxzoom=o[11]),u&4096&&(f.hoverCursor=o[12]),u&8192&&(f.manageHoverState=o[13]),u&16384&&(f.eventsIfTopMost=o[14]),u&32768&&(f.interactive=o[15]),u&16777216&&(f.$$scope={dirty:u,ctx:o}),!l&&u&1&&(l=!0,f.hovered=o[0],W(()=>l=!1)),e.$set(f)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function mr(r,e,l){let{$$slots:t={},$$scope:n}=e,{id:s=on("symbol")}=e,{source:o=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:f=void 0}=e,{beforeLayerType:i=void 0}=e,{paint:a=void 0}=e,{layout:c=void 0}=e,{filter:$=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:O=!1}=e,{hovered:G=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:R=!0}=e;function M(A){G=A,l(0,G)}function I(A){bt.call(this,r,A)}function j(A){bt.call(this,r,A)}function P(A){bt.call(this,r,A)}function N(A){bt.call(this,r,A)}function H(A){bt.call(this,r,A)}function se(A){bt.call(this,r,A)}return r.$$set=A=>{"id"in A&&l(1,s=A.id),"source"in A&&l(2,o=A.source),"sourceLayer"in A&&l(3,u=A.sourceLayer),"beforeId"in A&&l(4,f=A.beforeId),"beforeLayerType"in A&&l(5,i=A.beforeLayerType),"paint"in A&&l(6,a=A.paint),"layout"in A&&l(7,c=A.layout),"filter"in A&&l(8,$=A.filter),"applyToClusters"in A&&l(9,_=A.applyToClusters),"minzoom"in A&&l(10,y=A.minzoom),"maxzoom"in A&&l(11,S=A.maxzoom),"hoverCursor"in A&&l(12,C=A.hoverCursor),"manageHoverState"in A&&l(13,O=A.manageHoverState),"hovered"in A&&l(0,G=A.hovered),"eventsIfTopMost"in A&&l(14,D=A.eventsIfTopMost),"interactive"in A&&l(15,R=A.interactive),"$$scope"in A&&l(24,n=A.$$scope)},[G,s,o,u,f,i,a,c,$,_,y,S,C,O,D,R,t,M,I,j,P,N,H,se,n]}class cn extends K{constructor(e){super(),Z(this,e,mr,pr,Q,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function jn(r){let e=r[0],l,t,n=An(r);return{c(){n.c(),l=Oe()},m(s,o){n.m(s,o),p(s,l,o),t=!0},p(s,o){o&1&&Q(e,e=s[0])?($e(),d(n,1,1,le),pe(),n=An(s),n.c(),g(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(g(n),t=!0)},o(s){d(n),t=!1},d(s){s&&m(l),n.d(s)}}}function An(r){let e;const l=r[15].default,t=$t(l,r,r[14],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16384)&&pt(t,l,n,n[14],e?_t(l,n[14],s,null):mt(n[14]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function _r(r){let e,l,t=r[0]&&jn(r);return{c(){t&&t.c(),e=Oe()},m(n,s){t&&t.m(n,s),p(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&g(t,1)):(t=jn(n),t.c(),g(t,1),t.m(e.parentNode,e)):t&&($e(),d(t,1,1,()=>{t=null}),pe())},i(n){l||(g(t),l=!0)},o(n){d(t),l=!1},d(n){n&&m(e),t&&t.d(n)}}}function gr(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=on("vector")}=e,{url:f=null}=e,{tiles:i=null}=e,{promoteId:a=null}=e,{bounds:c=null}=e,{scheme:$=null}=e,{attribution:_=null}=e,{minzoom:y=null}=e,{maxzoom:S=null}=e,{volatile:C=null}=e;if(f&&f.includes("pmtiles://")&&!wn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let R=new Cs;wn.addProtocol("pmtiles",R.tile)}const{map:O,self:G}=ps();X(r,O,R=>l(13,n=R)),X(r,G,R=>l(0,t=R));let D;return ms(()=>{t&&n&&(_s(O,t,D),Fe(G,t=null,t),D=void 0)}),r.$$set=R=>{"id"in R&&l(3,u=R.id),"url"in R&&l(4,f=R.url),"tiles"in R&&l(5,i=R.tiles),"promoteId"in R&&l(6,a=R.promoteId),"bounds"in R&&l(7,c=R.bounds),"scheme"in R&&l(8,$=R.scheme),"attribution"in R&&l(9,_=R.attribution),"minzoom"in R&&l(10,y=R.minzoom),"maxzoom"in R&&l(11,S=R.maxzoom),"volatile"in R&&l(12,C=R.volatile),"$$scope"in R&&l(14,o=R.$$scope)},r.$$.update=()=>{r.$$.dirty&16377&&n&&t!==u&&(Fe(G,t=u,t),gs(n,t,ds({type:"vector",url:f,tiles:i,promoteId:a,bounds:c,scheme:$,attribution:_,minzoom:y,maxzoom:S,volatile:C}),R=>n&&R===t,()=>{t&&(D=n==null?void 0:n.getSource(t))})),r.$$.dirty&8200&&(n==null||n.on("style.load",()=>{D=n==null?void 0:n.getSource(u)}))},[t,O,G,u,f,i,a,c,$,_,y,S,C,n,o,s]}class be extends K{constructor(e){super(),Z(this,e,gr,_r,Q,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function Gn(r,e,l){const t=r.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function dr(r){let e,l,t;return l=new lt({props:{$$slots:{default:[br]},$$scope:{ctx:r}}}),l.$on("click",r[9]),{c(){e=T("div"),b(l.$$.fragment)},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16384&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function hr(r){let e,l,t,n,s,o,u,f,i,a;l=new lt({props:{$$slots:{default:[kr]},$$scope:{ctx:r}}}),l.$on("click",r[4]);let c=r[2]&&Fn(r);s=new xe({props:{label:"Help",$$slots:{default:[wr]},$$scope:{ctx:r}}}),u=new Ls({}),u.$on("click",r[3]);let $=Pe(r[0]),_=[];for(let S=0;S<$.length;S+=1)_[S]=qn(Gn(r,$,S));const y=S=>d(_[S],1,1,()=>{_[S]=null});return{c(){e=T("div"),b(l.$$.fragment),t=L(),c&&c.c(),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment),f=L();for(let S=0;S<_.length;S+=1)_[S].c();i=Oe()},m(S,C){p(S,e,C),k(l,e,null),p(S,t,C),c&&c.m(S,C),p(S,n,C),k(s,S,C),p(S,o,C),k(u,S,C),p(S,f,C);for(let O=0;O<_.length;O+=1)_[O]&&_[O].m(S,C);p(S,i,C),a=!0},p(S,C){const O={};C&16384&&(O.$$scope={dirty:C,ctx:S}),l.$set(O),S[2]?c?c.p(S,C):(c=Fn(S),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const G={};if(C&16384&&(G.$$scope={dirty:C,ctx:S}),s.$set(G),C&65){$=Pe(S[0]);let D;for(D=0;D<$.length;D+=1){const R=Gn(S,$,D);_[D]?(_[D].p(R,C),g(_[D],1)):(_[D]=qn(R),_[D].c(),g(_[D],1),_[D].m(i.parentNode,i))}for($e(),D=$.length;D<_.length;D+=1)y(D);pe()}},i(S){if(!a){g(l.$$.fragment,S),g(s.$$.fragment,S),g(u.$$.fragment,S);for(let C=0;C<$.length;C+=1)g(_[C]);a=!0}},o(S){d(l.$$.fragment,S),d(s.$$.fragment,S),d(u.$$.fragment,S),_=_.filter(Boolean);for(let C=0;C<_.length;C+=1)d(_[C]);a=!1},d(S){S&&(m(e),m(t),m(n),m(o),m(f),m(i)),w(l),c&&c.d(S),w(s,S),w(u,S),nt(_,S)}}}function br(r){let e;return{c(){e=v("Measure lines")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function kr(r){let e;return{c(){e=v("Stop measuring")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Fn(r){let e,l,t=r[2].toFixed(2)+"",n,s;return{c(){e=T("p"),l=v("Length: "),n=v(t),s=v(" meters")},m(o,u){p(o,e,u),h(e,l),h(e,n),h(e,s)},p(o,u){u&4&&t!==(t=o[2].toFixed(2)+"")&&F(n,t)},d(o){o&&m(e)}}}function wr(r){let e;return{c(){e=T("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){p(l,e,t)},p:le,d(l){l&&m(e)}}}function vr(r){let e,l;return{c(){e=T("span"),l=L(),B(e,"class","dot svelte-1tzt432")},m(t,n){p(t,e,n),p(t,l,n)},p:le,d(t){t&&(m(e),m(l))}}}function qn(r){let e,l,t;function n(u){r[7](u,r[11],r[12],r[13])}function s(){return r[8](r[13])}let o={draggable:!0,$$slots:{default:[vr]},$$scope:{ctx:r}};return r[11]!==void 0&&(o.lngLat=r[11]),e=new zs({props:o}),E.push(()=>U(e,"lngLat",n)),e.$on("click",s),{c(){b(e.$$.fragment)},m(u,f){k(e,u,f),t=!0},p(u,f){r=u;const i={};f&16384&&(i.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,i.lngLat=r[11],W(()=>l=!1)),e.$set(i)},i(u){t||(g(e.$$.fragment,u),t=!0)},o(u){d(e.$$.fragment,u),t=!1},d(u){w(e,u)}}}function yr(r){let e,l;const t=[q("measurement-line"),{paint:{"line-color":Ke.measuringLine,"line-width":5}}];let n={};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new Se({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u={};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Sr(r){let e,l,t,n,s,o,u;const f=[hr,dr],i=[];function a(c,$){return c[1]?0:1}return e=a(r),l=i[e]=f[e](r),n=new dt({props:{data:r[0].length<2?yn():Xt(r[0]),$$slots:{default:[yr]},$$scope:{ctx:r}}}),{c(){l.c(),t=L(),b(n.$$.fragment)},m(c,$){i[e].m(c,$),p(c,t,$),k(n,c,$),s=!0,o||(u=tt(window,"keydown",r[5]),o=!0)},p(c,[$]){let _=e;e=a(c),e===_?i[e].p(c,$):($e(),d(i[_],1,1,()=>{i[_]=null}),pe(),l=i[e],l?l.p(c,$):(l=i[e]=f[e](c),l.c()),g(l,1),l.m(t.parentNode,t));const y={};$&1&&(y.data=c[0].length<2?yn():Xt(c[0])),$&16384&&(y.$$scope={dirty:$,ctx:c}),n.$set(y)},i(c){s||(g(l),g(n.$$.fragment,c),s=!0)},o(c){d(l),d(n.$$.fragment,c),s=!1},d(c){c&&m(t),i[e].d(c),w(n,c),o=!1,u()}}}function Tr(r,e,l){let t,n=!1,s=[];function o(y){return y.length<2?null:1e3*qs(Xt(y),{units:"kilometers"})}function u(y){l(0,s=[...s,y.detail.lngLat.toArray()])}function f(){l(1,n=!1),l(0,s=[])}function i(y){n&&y.key==="Escape"&&(y.stopPropagation(),f())}function a(y){s.splice(y,1),l(0,s)}function c(y,S,C,O){C[O]=y,l(0,s)}const $=y=>a(y),_=()=>l(1,n=!0);return r.$$.update=()=>{r.$$.dirty&1&&l(2,t=o(s))},[s,n,t,u,f,i,a,c,$,_]}class Cr extends K{constructor(e){super(),Z(this,e,Tr,Sr,Q,{})}}const x={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Ge=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Lr(r){let e;return{c(){e=v(`Open Government License
  `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Mr(r){let e,l,t,n,s;return t=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Lr]},$$scope:{ctx:r}}}),{c(){e=T("p"),l=v("License: "),b(t.$$.fragment),n=v(`. Contains OS data © Crown copyright and database right
  2023.`)},m(o,u){p(o,e,u),h(e,l),k(t,e,null),h(e,n),s=!0},p(o,[u]){const f={};u&1&&(f.$$scope={dirty:u,ctx:o}),t.$set(f)},i(o){s||(g(t.$$.fragment,o),s=!0)},o(o){d(t.$$.fragment,o),s=!1},d(o){o&&m(e),w(t)}}}class Ae extends K{constructor(e){super(),Z(this,e,null,Mr,Q,{})}}function zn(r,e,l){const t=r.slice();return t[2]=e[l],t}function Hn(r,e,l){const t=r.slice();return t[5]=e[l],t}function Bn(r){let e,l;return{c(){e=T("span"),l=v(` 
    `),me(e,"background",r[5]),me(e,"width","100%"),me(e,"border","1px solid black")},m(t,n){p(t,e,n),h(e,l)},p(t,n){n&1&&me(e,"background",t[5])},d(t){t&&m(e)}}}function En(r){let e,l=r[2]+"",t;return{c(){e=T("span"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&2&&l!==(l=n[2]+"")&&F(t,l)},d(n){n&&m(e)}}}function Ir(r){let e,l,t,n=Pe(r[0]),s=[];for(let f=0;f<n.length;f+=1)s[f]=Bn(Hn(r,n,f));let o=Pe(r[1]),u=[];for(let f=0;f<o.length;f+=1)u[f]=En(zn(r,o,f));return{c(){e=T("div");for(let f=0;f<s.length;f+=1)s[f].c();l=L(),t=T("div");for(let f=0;f<u.length;f+=1)u[f].c();me(e,"display","flex"),me(t,"display","flex"),me(t,"justify-content","space-between")},m(f,i){p(f,e,i);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);p(f,l,i),p(f,t,i);for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(t,null)},p(f,[i]){if(i&1){n=Pe(f[0]);let a;for(a=0;a<n.length;a+=1){const c=Hn(f,n,a);s[a]?s[a].p(c,i):(s[a]=Bn(c),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=n.length}if(i&2){o=Pe(f[1]);let a;for(a=0;a<o.length;a+=1){const c=zn(f,o,a);u[a]?u[a].p(c,i):(u[a]=En(c),u[a].c(),u[a].m(t,null))}for(;a<u.length;a+=1)u[a].d(1);u.length=o.length}},i:le,o:le,d(f){f&&(m(e),m(l),m(t)),nt(s,f),nt(u,f)}}}function Nr(r,e,l){let{colorScale:t}=e,{limits:n}=e;return r.$$set=s=>{"colorScale"in s&&l(0,t=s.colorScale),"limits"in s&&l(1,n=s.limits)},[t,n]}class He extends K{constructor(e){super(),Z(this,e,Nr,Ir,Q,{colorScale:0,limits:1})}}function Ce(r){let e=new URLSearchParams(window.location.search).has(r),l=qe(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(r,"1"):n.searchParams.delete(r),window.history.replaceState(null,"",n.toString())}),l}function ht(r,e,l,t){let n=e,s=new URLSearchParams(window.location.search).get(r);if(s!=null)try{n=t(s)}catch(u){console.warn(`Parsing URL parameter ${r}=${s} failed, using default value: ${u}`)}let o=qe(n);return o.subscribe(u=>{let f=new URL(window.location.href),i=l(u);i==null?f.searchParams.delete(r):f.searchParams.set(r,i),window.history.replaceState(null,"",f.toString())}),o}function Un(r){const e=r[14].OA21CD;r[15]=e;const l=r[14][r[3].kind];r[16]=l}function Pr(r){let e;return{c(){e=v("Percent of households with a car")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Or(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Rr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Dr(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function jr(r){let e,l,t,n,s,o,u,f,i,a,c,$;return t=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Or]},$$scope:{ctx:r}}}),s=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Rr]},$$scope:{ctx:r}}}),a=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Dr]},$$scope:{ctx:r}}}),{c(){e=T("p"),l=v("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),n=v(". Output area boundaries from "),b(s.$$.fragment),o=v("."),u=L(),f=T("p"),i=v("License: "),b(a.$$.fragment),c=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(_,y){p(_,e,y),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),p(_,u,y),p(_,f,y),h(f,i),k(a,f,null),h(f,c),$=!0},p(_,y){const S={};y&131072&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const C={};y&131072&&(C.$$scope={dirty:y,ctx:_}),s.$set(C);const O={};y&131072&&(O.$$scope={dirty:y,ctx:_}),a.$set(O)},i(_){$||(g(t.$$.fragment,_),g(s.$$.fragment,_),g(a.$$.fragment,_),$=!0)},o(_){d(t.$$.fragment,_),d(s.$$.fragment,_),d(a.$$.fragment,_),$=!1},d(_){_&&(m(e),m(u),m(f)),w(t),w(s),w(a)}}}function Ar(r){let e,l,t;return l=new ce({props:{$$slots:{default:[jr]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Wn(r){let e,l;return e=new He({props:{colorScale:r[4],limits:ot(r[3].kind)}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=ot(t[3].kind)),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Gr(r){let e;return{c(){e=v("Average cars per household")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Fr(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function qr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function zr(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Hr(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y;return s=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Fr]},$$scope:{ctx:r}}}),u=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[qr]},$$scope:{ctx:r}}}),$=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[zr]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=T("p"),n=v("Car/van availability data is from the 2021 census, via "),b(s.$$.fragment),o=v(". Output area boundaries from "),b(u.$$.fragment),f=v("."),i=L(),a=T("p"),c=v("License: "),b($.$$.fragment),_=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(S,C){p(S,e,C),p(S,l,C),p(S,t,C),h(t,n),k(s,t,null),h(t,o),k(u,t,null),h(t,f),p(S,i,C),p(S,a,C),h(a,c),k($,a,null),h(a,_),y=!0},p(S,C){const O={};C&131072&&(O.$$scope={dirty:C,ctx:S}),s.$set(O);const G={};C&131072&&(G.$$scope={dirty:C,ctx:S}),u.$set(G);const D={};C&131072&&(D.$$scope={dirty:C,ctx:S}),$.$set(D)},i(S){y||(g(s.$$.fragment,S),g(u.$$.fragment,S),g($.$$.fragment,S),y=!0)},o(S){d(s.$$.fragment,S),d(u.$$.fragment,S),d($.$$.fragment,S),y=!1},d(S){S&&(m(e),m(l),m(t),m(i),m(a)),w(s),w(u),w($)}}}function Br(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Hr]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Yn(r){let e,l;return e=new He({props:{colorScale:r[4],limits:ot(r[3].kind)}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=ot(t[3].kind)),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Er(r){let e;return{c(){e=v("Population density")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ur(r){let e;return{c(){e=v(`NOMIS TS006
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Wr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Yr(r){let e,l,t,n,s,o,u,f,i;return t=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ur]},$$scope:{ctx:r}}}),s=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Wr]},$$scope:{ctx:r}}}),f=new Ae({}),{c(){e=T("p"),l=v("Population density data is from the 2021 census, via "),b(t.$$.fragment),n=v(". Output area boundaries from "),b(s.$$.fragment),o=v("."),u=L(),b(f.$$.fragment)},m(a,c){p(a,e,c),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&131072&&($.$$scope={dirty:c,ctx:a}),t.$set($);const _={};c&131072&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){i||(g(t.$$.fragment,a),g(s.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(u)),w(t),w(s),w(f,a)}}}function Jr(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Yr]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Jn(r){let e,l,t,n;return t=new He({props:{colorScale:r[4],limits:ot(r[3].kind).map(Vn)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",l=L(),b(t.$$.fragment)},m(s,o){p(s,e,o),p(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&8&&(u.limits=ot(s[3].kind).map(Vn)),t.$set(u)},i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(m(e),m(l)),w(t,s)}}}function Vr(r){let e,l,t,n=r[16].toLocaleString()+"",s,o,u=r[15]+"",f;return{c(){e=T("p"),l=v("There are "),t=T("b"),s=v(n),o=v(`
          people per square kilometre in `),f=v(u)},m(i,a){p(i,e,a),h(e,l),h(e,t),h(t,s),h(e,o),h(e,f)},p(i,a){a&16392&&n!==(n=i[16].toLocaleString()+"")&&F(s,n),a&16384&&u!==(u=i[15]+"")&&F(f,u)},d(i){i&&m(e)}}}function Qr(r){let e,l,t=r[15]+"",n,s,o,u=r[16]+"",f,i;return{c(){e=T("p"),l=v("Households in "),n=v(t),s=v(` have an average of
          `),o=T("b"),f=v(u),i=v(`
          cars`)},m(a,c){p(a,e,c),h(e,l),h(e,n),h(e,s),h(e,o),h(o,f),h(e,i)},p(a,c){c&16384&&t!==(t=a[15]+"")&&F(n,t),c&16392&&u!==(u=a[16]+"")&&F(f,u)},d(a){a&&m(e)}}}function Kr(r){let e,l,t=r[16]+"",n,s,o,u=r[15]+"",f,i;return{c(){e=T("p"),l=T("b"),n=v(t),s=v("%"),o=v(`
          of households in `),f=v(u),i=v(" have 1 or more cars")},m(a,c){p(a,e,c),h(e,l),h(l,n),h(l,s),h(e,o),h(e,f),h(e,i)},p(a,c){c&16392&&t!==(t=a[16]+"")&&F(n,t),c&16384&&u!==(u=a[15]+"")&&F(f,u)},d(a){a&&m(e)}}}function Zr(r){Un(r);let e;function l(s,o){return s[3].kind=="percent_households_with_car"?Kr:s[3].kind=="average_cars_per_household"?Qr:Vr}let t=l(r),n=t(r);return{c(){n.c(),e=Oe()},m(s,o){n.m(s,o),p(s,e,o)},p(s,o){Un(s),t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&m(e),n.d(s)}}}function Xr(r){let e,l;return e=new ue({props:{$$slots:{default:[Zr,({props:t})=>({14:t}),({props:t})=>t?16384:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&147464&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function xr(r){let e,l,t,n;const s=[q(Ee),{sourceLayer:Ee},{paint:{"fill-color":Te(["get",r[3].kind],ot(r[3].kind),r[4]),"fill-opacity":ne(.5,.7)}},{layout:{visibility:r[3].kind!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Xr]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=re(o,s[i]);e=new ze({props:o}),e.$on("click",r[6]);const u=[q(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3].kind!=""?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=re(f,u[i]);return t=new Se({props:f}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&24?oe(s,[a&0&&ie(q(Ee)),a&0&&{sourceLayer:Ee},a&24&&{paint:{"fill-color":Te(["get",i[3].kind],ot(i[3].kind),i[4]),"fill-opacity":ne(.5,.7)}},a&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}},s[4],s[5],s[6]]):{};a&131080&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&8?oe(u,[a&0&&ie(q(`${Ee}-outline`)),a&0&&{sourceLayer:Ee},u[2],a&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function eo(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y;function S(P){r[7](P)}let C={$$slots:{right:[Ar],default:[Pr]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new fe({props:C}),E.push(()=>U(e,"checked",S)),e.$on("change",r[8]);let O=r[3].kind=="percent_households_with_car"&&Wn(r);function G(P){r[9](P)}let D={$$slots:{right:[Br],default:[Gr]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),s=new fe({props:D}),E.push(()=>U(s,"checked",G)),s.$on("change",r[10]);let R=r[3].kind=="average_cars_per_household"&&Yn(r);function M(P){r[11](P)}let I={$$slots:{right:[Jr],default:[Er]},$$scope:{ctx:r}};r[2]!==void 0&&(I.checked=r[2]),i=new fe({props:I}),E.push(()=>U(i,"checked",M)),i.$on("change",r[12]);let j=r[3].kind=="population_density"&&Jn(r);return _=new be({props:{url:`pmtiles://${de()}/v1/${Ee}.pmtiles`,$$slots:{default:[xr]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),O&&O.c(),n=L(),b(s.$$.fragment),u=L(),R&&R.c(),f=L(),b(i.$$.fragment),c=L(),j&&j.c(),$=L(),b(_.$$.fragment)},m(P,N){k(e,P,N),p(P,t,N),O&&O.m(P,N),p(P,n,N),k(s,P,N),p(P,u,N),R&&R.m(P,N),p(P,f,N),k(i,P,N),p(P,c,N),j&&j.m(P,N),p(P,$,N),k(_,P,N),y=!0},p(P,[N]){const H={};N&131072&&(H.$$scope={dirty:N,ctx:P}),!l&&N&1&&(l=!0,H.checked=P[0],W(()=>l=!1)),e.$set(H),P[3].kind=="percent_households_with_car"?O?(O.p(P,N),N&8&&g(O,1)):(O=Wn(P),O.c(),g(O,1),O.m(n.parentNode,n)):O&&($e(),d(O,1,1,()=>{O=null}),pe());const se={};N&131072&&(se.$$scope={dirty:N,ctx:P}),!o&&N&2&&(o=!0,se.checked=P[1],W(()=>o=!1)),s.$set(se),P[3].kind=="average_cars_per_household"?R?(R.p(P,N),N&8&&g(R,1)):(R=Yn(P),R.c(),g(R,1),R.m(f.parentNode,f)):R&&($e(),d(R,1,1,()=>{R=null}),pe());const A={};N&131072&&(A.$$scope={dirty:N,ctx:P}),!a&&N&4&&(a=!0,A.checked=P[2],W(()=>a=!1)),i.$set(A),P[3].kind=="population_density"?j?(j.p(P,N),N&8&&g(j,1)):(j=Jn(P),j.c(),g(j,1),j.m($.parentNode,$)):j&&($e(),d(j,1,1,()=>{j=null}),pe());const J={};N&131080&&(J.$$scope={dirty:N,ctx:P}),_.$set(J)},i(P){y||(g(e.$$.fragment,P),g(O),g(s.$$.fragment,P),g(R),g(i.$$.fragment,P),g(j),g(_.$$.fragment,P),y=!0)},o(P){d(e.$$.fragment,P),d(O),d(s.$$.fragment,P),d(R),d(i.$$.fragment,P),d(j),d(_.$$.fragment,P),y=!1},d(P){P&&(m(t),m(n),m(u),m(f),m(c),m($)),w(e,P),O&&O.d(P),w(s,P),R&&R.d(P),w(i,P),j&&j.d(P),w(_,P)}}}let Ee="census_output_areas";function to(r){return r.show?r.kind:null}function no(r){return{show:!0,kind:r}}function ot(r){return r=="percent_households_with_car"?[0,20,40,60,80,100]:r=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const Vn=r=>r.toLocaleString();function lo(r,e,l){let t,n=x.sequential_low_to_high,o=ht(Ee,{show:!1,kind:""},to,no);X(r,o,O=>l(3,t=O));let u=t.kind=="percent_households_with_car",f=t.kind=="average_cars_per_household",i=t.kind=="population_density";function a(O){let G=O.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${G}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${G}`,"_blank")}function c(O){u=O,l(0,u)}const $=()=>{l(1,f=!1),l(2,i=!1)};function _(O){f=O,l(1,f)}const y=()=>{l(0,u=!1),l(2,i=!1)};function S(O){i=O,l(2,i)}const C=()=>{l(0,u=!1),l(1,f=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(u?(Fe(o,t.show=!0,t),Fe(o,t.kind="percent_households_with_car",t)):f?(Fe(o,t.show=!0,t),Fe(o,t.kind="average_cars_per_household",t)):i?(Fe(o,t.show=!0,t),Fe(o,t.kind="population_density",t)):(Fe(o,t.show=!1,t),Fe(o,t.kind="",t)))},[u,f,i,t,n,o,a,c,$,_,y,S,C]}class so extends K{constructor(e){super(),Z(this,e,lo,eo,Q,{})}}function ro(r){let e,l,t;return e=new je({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Combined authorities`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function oo(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function io(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[oo]},$$scope:{ctx:r}}}),o=new Ae({}),{c(){e=T("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of December 2022."),s=L(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function fo(r){let e,l,t;return l=new ce({props:{$$slots:{default:[io]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function ao(r){let e,l=r[4].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&F(t,l)},d(n){n&&m(e)}}}function uo(r){let e,l;return e=new ue({props:{$$slots:{default:[ao,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function co(r){let e,l,t,n;const s=[q(kt),{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[uo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=re(o,s[i]);e=new ze({props:o}),e.$on("click",po);const u=[q(`${kt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=re(f,u[i]);return t=new Se({props:f}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&3?oe(s,[a&0&&ie(q(kt)),a&2&&{paint:{"fill-color":i[1],"fill-opacity":ne(0,.5)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}},s[3],s[4],s[5]]):{};a&32&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&3?oe(u,[a&0&&ie(q(`${kt}-outline`)),a&2&&{paint:{"line-color":i[1],"line-width":2.5}},a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function $o(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[fo],default:[ro]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new fe({props:u}),E.push(()=>U(e,"checked",o)),n=new dt({props:{data:`${de()}/v1/${kt}.geojson`,$$slots:{default:[co]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],W(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let kt="combined_authorities";function po(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function mo(r,e,l){let t,n=x.combined_authorities,s=Ce(kt);X(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class _o extends K{constructor(e){super(),Z(this,e,mo,$o,Q,{})}}function go(r){let e;return{c(){e=v("Indices of Multiple Deprivation")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ho(r){let e;return{c(){e=v(`DLUCH GIS
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function bo(r){let e;return{c(){e=v(`here
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ko(r){let e,l,t,n,s,o,u,f,i;return t=new te({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[ho]},$$scope:{ctx:r}}}),s=new te({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[bo]},$$scope:{ctx:r}}}),f=new Ae({}),{c(){e=T("p"),l=v("The 2019 English IMD scores come from "),b(t.$$.fragment),n=v(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(s.$$.fragment),o=v("."),u=L(),b(f.$$.fragment)},m(a,c){p(a,e,c),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),t.$set($);const _={};c&64&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){i||(g(t.$$.fragment,a),g(s.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(u)),w(t),w(s),w(f,a)}}}function wo(r){let e,l,t;return l=new ce({props:{$$slots:{default:[ko]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Qn(r){let e,l;return e=new He({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:le,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function vo(r){let e,l=r[5].LSOA11CD+"",t,n,s,o=r[5].score+"",u,f,i,a,c,$=r[5].rank.toLocaleString()+"",_,y;return{c(){e=T("p"),t=v(l),n=v(` has an IMD score of
        `),s=T("b"),u=v(o),f=L(),i=T("p"),a=v("Rank: "),c=T("b"),_=v($),y=v(`
        / 32,844 LSOAs`)},m(S,C){p(S,e,C),h(e,t),h(e,n),h(e,s),h(s,u),p(S,f,C),p(S,i,C),h(i,a),h(i,c),h(c,_),h(i,y)},p(S,C){C&32&&l!==(l=S[5].LSOA11CD+"")&&F(t,l),C&32&&o!==(o=S[5].score+"")&&F(u,o),C&32&&$!==($=S[5].rank.toLocaleString()+"")&&F(_,$)},d(S){S&&(m(e),m(f),m(i))}}}function yo(r){let e,l;return e=new ue({props:{$$slots:{default:[vo,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function So(r){let e,l,t,n;const s=[q(Ue),{sourceLayer:Ue},{paint:{"fill-color":Te(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":ne(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[yo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=re(o,s[i]);e=new ze({props:o});const u=[q(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=re(f,u[i]);return t=new Se({props:f}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&7?oe(s,[a&0&&ie(q(Ue)),a&0&&{sourceLayer:Ue},a&6&&{paint:{"fill-color":Te(["-",10,["get","decile"]],i[2],i[1]),"fill-opacity":ne(.5,.7)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5]]):{};a&64&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&1?oe(u,[a&0&&ie(q(`${Ue}-outline`)),a&0&&{sourceLayer:Ue},u[2],a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function To(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[wo],default:[go]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0]&&Qn(r);return s=new be({props:{url:`pmtiles://${de()}/v1/${Ue}.pmtiles`,$$slots:{default:[So]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],W(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=Qn(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&65&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Ue="imd";function Co(r,e,l){let t,n=x.sequential_low_to_high,s=[0,2,4,6,8,10],o=Ce(Ue);X(r,o,f=>l(0,t=f));function u(f){t=f,o.set(t)}return[t,n,s,o,u]}class Lo extends K{constructor(e){super(),Z(this,e,Co,To,Q,{})}}function Mo(r){let e,l,t;return e=new je({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Local Authority Districts`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Io(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function No(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Io]},$$scope:{ctx:r}}}),o=new Ae({}),{c(){e=T("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of January 2024."),s=L(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function Po(r){let e,l,t;return l=new ce({props:{$$slots:{default:[No]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Oo(r){let e,l=r[4].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&F(t,l)},d(n){n&&m(e)}}}function Ro(r){let e,l;return e=new ue({props:{$$slots:{default:[Oo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Do(r){let e,l,t,n;const s=[q(wt),{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Ro]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=re(o,s[i]);e=new ze({props:o}),e.$on("click",Ao);const u=[q(`${wt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=re(f,u[i]);return t=new Se({props:f}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&3?oe(s,[a&0&&ie(q(wt)),a&2&&{paint:{"fill-color":i[1],"fill-opacity":ne(0,.5)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}},s[3],s[4],s[5]]):{};a&32&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&3?oe(u,[a&0&&ie(q(`${wt}-outline`)),a&2&&{paint:{"line-color":i[1],"line-width":2.5}},a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function jo(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[Po],default:[Mo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new fe({props:u}),E.push(()=>U(e,"checked",o)),n=new dt({props:{data:`${de()}/v1/${wt}.geojson`,$$slots:{default:[Do]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],W(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let wt="local_authority_districts";function Ao(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Go(r,e,l){let t,n=x.local_authority_districts,s=Ce(wt);X(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Fo extends K{constructor(e){super(),Z(this,e,Go,jo,Q,{})}}function qo(r){let e,l,t;return e=new je({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Local Planning Authorities`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function zo(r){let e;return{c(){e=v(`local authority
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ho(r){let e;return{c(){e=v(`national park authorit
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Bo(r){let e;return{c(){e=v(`development corporation
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Eo(r){let e;return{c(){e=v("this map")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Uo(r){let e;return{c(){e=v(`planning.data.gov.uk
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Wo(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y,S,C,O,G,D,R,M,I;return t=new te({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[zo]},$$scope:{ctx:r}}}),s=new te({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Ho]},$$scope:{ctx:r}}}),u=new te({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Bo]},$$scope:{ctx:r}}}),_=new te({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Eo]},$$scope:{ctx:r}}}),G=new te({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Uo]},$$scope:{ctx:r}}}),M=new Ae({}),{c(){e=T("p"),l=v("LPAs may be a "),b(t.$$.fragment),n=v(", "),b(s.$$.fragment),o=v("y, or "),b(u.$$.fragment),f=v("."),i=L(),a=T("p"),c=T("strong"),$=v(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(_.$$.fragment),y=v(" to get more details."),S=L(),C=T("p"),O=v("Data from ONS Geography via "),b(G.$$.fragment),D=v(", as of November 2022."),R=L(),b(M.$$.fragment)},m(j,P){p(j,e,P),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),k(u,e,null),h(e,f),p(j,i,P),p(j,a,P),h(a,c),h(c,$),k(_,c,null),h(c,y),p(j,S,P),p(j,C,P),h(C,O),k(G,C,null),h(C,D),p(j,R,P),k(M,j,P),I=!0},p(j,P){const N={};P&32&&(N.$$scope={dirty:P,ctx:j}),t.$set(N);const H={};P&32&&(H.$$scope={dirty:P,ctx:j}),s.$set(H);const se={};P&32&&(se.$$scope={dirty:P,ctx:j}),u.$set(se);const A={};P&32&&(A.$$scope={dirty:P,ctx:j}),_.$set(A);const J={};P&32&&(J.$$scope={dirty:P,ctx:j}),G.$set(J)},i(j){I||(g(t.$$.fragment,j),g(s.$$.fragment,j),g(u.$$.fragment,j),g(_.$$.fragment,j),g(G.$$.fragment,j),g(M.$$.fragment,j),I=!0)},o(j){d(t.$$.fragment,j),d(s.$$.fragment,j),d(u.$$.fragment,j),d(_.$$.fragment,j),d(G.$$.fragment,j),d(M.$$.fragment,j),I=!1},d(j){j&&(m(e),m(i),m(a),m(S),m(C),m(R)),w(t),w(s),w(u),w(_),w(G),w(M,j)}}}function Yo(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Wo]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Jo(r){let e,l=r[4].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&F(t,l)},d(n){n&&m(e)}}}function Vo(r){let e,l;return e=new ue({props:{$$slots:{default:[Jo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Qo(r){let e,l,t,n;const s=[q(We),{sourceLayer:We},{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[Vo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=re(o,s[i]);e=new ze({props:o});const u=[q(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=re(f,u[i]);return t=new Se({props:f}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&3?oe(s,[a&0&&ie(q(We)),a&0&&{sourceLayer:We},a&2&&{paint:{"fill-color":i[1],"fill-opacity":ne(0,.5)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5]]):{};a&32&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&3?oe(u,[a&0&&ie(q(`${We}-outline`)),a&0&&{sourceLayer:We},a&2&&{paint:{"line-color":i[1],"line-width":2.5}},a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function Ko(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[Yo],default:[qo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new fe({props:u}),E.push(()=>U(e,"checked",o)),n=new be({props:{url:`pmtiles://${de()}/v1/${We}.pmtiles`,$$slots:{default:[Qo]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],W(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let We="local_planning_authorities";function Zo(r,e,l){let t,n=x.local_planning_authorities,s=Ce(We);X(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Xo extends K{constructor(e){super(),Z(this,e,Zo,Ko,Q,{})}}function xo(r){let e,l,t;return e=new je({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Parliamentary constituencies`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function ei(r){let e;return{c(){e=v(`Ordnance Survey Boundary-Line
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ti(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ei]},$$scope:{ctx:r}}}),o=new Ae({}),{c(){e=T("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of May 2023."),s=L(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function ni(r){let e,l,t;return l=new ce({props:{$$slots:{default:[ti]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function li(r){let e,l=r[4].Name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].Name+"")&&F(t,l)},d(n){n&&m(e)}}}function si(r){let e,l;return e=new ue({props:{$$slots:{default:[li,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ri(r){let e,l,t,n;const s=[q(Ye),{sourceLayer:Ye},{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[si]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=re(o,s[i]);e=new ze({props:o}),e.$on("click",ii);const u=[q(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=re(f,u[i]);return t=new Se({props:f}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&3?oe(s,[a&0&&ie(q(Ye)),a&0&&{sourceLayer:Ye},a&2&&{paint:{"fill-color":i[1],"fill-opacity":ne(0,.5)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5],s[6]]):{};a&32&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&3?oe(u,[a&0&&ie(q(`${Ye}-outline`)),a&0&&{sourceLayer:Ye},a&2&&{paint:{"line-color":i[1],"line-width":5}},a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function oi(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[ni],default:[xo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new fe({props:u}),E.push(()=>U(e,"checked",o)),n=new be({props:{url:`pmtiles://${de()}/v1/${Ye}.pmtiles`,$$slots:{default:[ri]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],W(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Ye="parliamentary_constituencies";function ii(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function fi(r,e,l){let t,n=x.parliamentary_constituencies,s=Ce(Ye);X(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class ai extends K{constructor(e){super(),Z(this,e,fi,oi,Q,{})}}function ui(r){let e;return{c(){e=v("Pollution")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ci(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function $i(r){let e,l,t,n,s,o,u,f,i;return t=new te({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[ci]},$$scope:{ctx:r}}}),f=new Ae({}),{c(){e=T("p"),l=v("Most layers show air quality data from "),b(t.$$.fragment),n=v(`. The measurements are annual means, in units of
        µgm
        `),s=T("sup"),s.textContent="3",o=v(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=L(),b(f.$$.fragment)},m(a,c){p(a,e,c),h(e,l),k(t,e,null),h(e,n),h(e,s),h(e,o),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&4096&&($.$$scope={dirty:c,ctx:a}),t.$set($)},i(a){i||(g(t.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(t.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(u)),w(t),w(f,a)}}}function pi(r){let e,l,t;return l=new ce({props:{$$slots:{default:[$i]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&4096&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Kn(r){let e,l,t,n,s=r[3](r[0].pollutant)+"",o,u,f,i,a,c,$,_,y,S,C,O,G;function D(M){r[6](M)}let R={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return r[0].pollutant!==void 0&&(R.value=r[0].pollutant),e=new ct({props:R}),E.push(()=>U(e,"value",D)),{c(){b(e.$$.fragment),t=L(),n=T("p"),o=v(s),u=L(),f=T("div"),i=T("label"),a=v(`Opacity
      `),c=T("input"),$=L(),_=T("img"),B(c,"type","range"),B(c,"min","0"),B(c,"max","100"),Yt(_.src,y=r[4](r[0].pollutant))||B(_,"src",y),B(_,"width",150),B(_,"alt",S=`Legend for ${r[0].pollutant} layer`)},m(M,I){k(e,M,I),p(M,t,I),p(M,n,I),h(n,o),p(M,u,I),p(M,f,I),h(f,i),h(i,a),h(i,c),Qe(c,r[0].opacity),p(M,$,I),p(M,_,I),C=!0,O||(G=[tt(c,"change",r[7]),tt(c,"input",r[7])],O=!0)},p(M,I){const j={};!l&&I&1&&(l=!0,j.value=M[0].pollutant,W(()=>l=!1)),e.$set(j),(!C||I&1)&&s!==(s=M[3](M[0].pollutant)+"")&&F(o,s),I&1&&Qe(c,M[0].opacity),(!C||I&1&&!Yt(_.src,y=M[4](M[0].pollutant)))&&B(_,"src",y),(!C||I&1&&S!==(S=`Legend for ${M[0].pollutant} layer`))&&B(_,"alt",S)},i(M){C||(g(e.$$.fragment,M),C=!0)},o(M){d(e.$$.fragment,M),C=!1},d(M){M&&(m(t),m(n),m(u),m(f),m($),m(_)),w(e,M),O=!1,hs(G)}}}function mi(r){let e,l;const t=[q("pollution"),{paint:{"raster-opacity":r[0].opacity/100}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new Hs({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?oe(t,[t[0],{paint:{"raster-opacity":s[0].opacity/100}},{layout:{visibility:s[0].show?"visible":"none"}}]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function _i(r){let e,l,t,n,s,o;function u(a){r[5](a)}let f={$$slots:{right:[pi],default:[ui]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0].show&&Kn(r);return s=new cr({props:{tiles:[r[1]],tileSize:256,$$slots:{default:[mi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&4096&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0].show,W(()=>l=!1)),e.$set($),a[0].show?i?(i.p(a,c),c&1&&g(i,1)):(i=Kn(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&2&&(_.tiles=[a[1]]),c&4097&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}function gi(r){return r.show?`${r.pollutant}/${r.opacity}`:null}function di(r){let[e,l]=r.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function hi(r,e,l){let t,n,s,u=ht("pollution",{show:!1,pollutant:"PM25_viridis",opacity:50},gi,di);X(r,u,S=>l(0,s=S));function f(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s.pollutant}/MapServer/WMSServer`}function i(S){return t[1]}function a(S){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${f()}?bbox={bbox-epsg-3857}&${C}`}function c(S){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${f()}?${C}`}function $(S){r.$$.not_equal(s.show,S)&&(s.show=S,u.set(s))}function _(S){r.$$.not_equal(s.pollutant,S)&&(s.pollutant=S,u.set(s))}function y(){s.opacity=Bt(this.value),u.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s.pollutant]),r.$$.dirty&1&&l(1,n=a(s.pollutant))},[s,n,u,i,c,$,_,y]}class bi extends K{constructor(e){super(),Z(this,e,hi,_i,Q,{})}}function ki(r){let e;return{c(){e=v("Road noise")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function wi(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function vi(r){let e,l,t,n,s,o,u,f,i;return s=new te({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[wi]},$$scope:{ctx:r}}}),f=new Ae({}),{c(){e=T("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,l=L(),t=T("p"),n=v("Data from June 2019, produced by "),b(s.$$.fragment),o=v(". See there for methodology details"),u=L(),b(f.$$.fragment)},m(a,c){p(a,e,c),p(a,l,c),p(a,t,c),h(t,n),k(s,t,null),h(t,o),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&32&&($.$$scope={dirty:c,ctx:a}),s.$set($)},i(a){i||(g(s.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(s.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(l),m(t),m(u)),w(s),w(f,a)}}}function yi(r){let e,l,t;return l=new ce({props:{$$slots:{default:[vi]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Zn(r){let e,l;return e=new He({props:{colorScale:r[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:le,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Si(r){let e,l=r[4].noiseclass+"",t,n,s=Xn(r[4].noiseclass)+"",o,u;return{c(){e=T("p"),t=v(l),n=v(" dB ("),o=v(s),u=v(")")},m(f,i){p(f,e,i),h(e,t),h(e,n),h(e,o),h(e,u)},p(f,i){i&16&&l!==(l=f[4].noiseclass+"")&&F(t,l),i&16&&s!==(s=Xn(f[4].noiseclass)+"")&&F(o,s)},d(f){f&&m(e)}}}function Ti(r){let e,l;return e=new ue({props:{$$slots:{default:[Si,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ci(r){let e,l;const t=[q(vt),{sourceLayer:vt},{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":ne(.5,.8)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ti]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new ze({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?oe(t,[o&0&&ie(q(vt)),o&0&&{sourceLayer:vt},o&2&&{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":s[1][0],"60.0-64.9":s[1][0],"65.0-69.9":s[1][1],"70.0-74.9":s[1][1],">=75.0":s[1][2]},"red"),"fill-opacity":ne(.5,.8)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Li(r){let e,l,t,n,s,o;function u(a){r[3](a)}let f={$$slots:{right:[yi],default:[ki]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0]&&Zn(r);return s=new be({props:{url:`pmtiles://${de()}/v1/${vt}.pmtiles`,$$slots:{default:[Ci]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&32&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],W(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=Zn(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&33&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let vt="road_noise";function Xn(r){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[r]}function Mi(r,e,l){let t,n=[x.sequential_low_to_high[0],x.sequential_low_to_high[2],x.sequential_low_to_high[4]],s=Ce(vt);X(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Ii extends K{constructor(e){super(),Z(this,e,Mi,Li,Q,{})}}function Ni(r){let e,l,t;return e=new je({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Wards`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Pi(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Oi(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Pi]},$$scope:{ctx:r}}}),o=new Ae({}),{c(){e=T("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of May 2023."),s=L(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function Ri(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Oi]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Di(r){let e,l=r[4].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&F(t,l)},d(n){n&&m(e)}}}function ji(r){let e,l;return e=new ue({props:{$$slots:{default:[Di,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ai(r){let e,l,t,n;const s=[q(Je),{sourceLayer:Je},{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[ji]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=re(o,s[i]);e=new ze({props:o}),e.$on("click",Fi);const u=[q(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=re(f,u[i]);return t=new Se({props:f}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&3?oe(s,[a&0&&ie(q(Je)),a&0&&{sourceLayer:Je},a&2&&{paint:{"fill-color":i[1],"fill-opacity":ne(0,.5)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5],s[6]]):{};a&32&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&3?oe(u,[a&0&&ie(q(`${Je}-outline`)),a&0&&{sourceLayer:Je},a&2&&{paint:{"line-color":i[1],"line-width":2.5}},a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function Gi(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[Ri],default:[Ni]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new fe({props:u}),E.push(()=>U(e,"checked",o)),n=new be({props:{url:`pmtiles://${de()}/v1/${Je}.pmtiles`,$$slots:{default:[Ai]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],W(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Je="wards";function Fi(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function qi(r,e,l){let t,n=x.wards,s=Ce(Je);X(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class zi extends K{constructor(e){super(),Z(this,e,qi,Gi,Q,{})}}function Hi(r){let e;return{c(){e=v("Open Data Commons Open Database License")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Bi(r){let e,l,t,n;return t=new te({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),{c(){e=T("p"),l=v("License: "),b(t.$$.fragment)},m(s,o){p(s,e,o),h(e,l),k(t,e,null),n=!0},p(s,[o]){const u={};o&1&&(u.$$scope={dirty:o,ctx:s}),t.$set(u)},i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&m(e),w(t)}}}class Xe extends K{constructor(e){super(),Z(this,e,null,Bi,Q,{})}}function Ei(r){let e,l,t;return e=new je({props:{color:x.bus_route_with_lane}}),{c(){b(e.$$.fragment),l=v(`
  Bus routes`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Ui(r){let e;return{c(){e=v(`GTFS
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Wi(r){let e,l,t,n,s,o,u,f,i;return s=new te({props:{href:"https://gtfs.org",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),f=new Xe({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,l=L(),t=T("p"),n=v("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(s.$$.fragment),o=v(`, and doesn't include which routes are run or the
        frequency of service.`),u=L(),b(f.$$.fragment)},m(a,c){p(a,e,c),p(a,l,c),p(a,t,c),h(t,n),k(s,t,null),h(t,o),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&16&&($.$$scope={dirty:c,ctx:a}),s.$set($)},i(a){i||(g(s.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(s.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(l),m(t),m(u)),w(s),w(f,a)}}}function Yi(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Wi]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Ji(r){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Vi(r){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Qi(r){let e;function l(s,o){return s[3].has_bus_lane?Vi:Ji}let t=l(r),n=t(r);return{c(){n.c(),e=Oe()},m(s,o){n.m(s,o),p(s,e,o)},p(s,o){t!==(t=l(s))&&(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&m(e),n.d(s)}}}function Ki(r){let e,l;return e=new ue({props:{$$slots:{default:[Qi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Zi(r){let e,l;const t=[q(yt),{sourceLayer:yt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],x.bus_route_with_lane,x.bus_route_without_lane],"line-width":5,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ki]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new Se({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?oe(t,[o&0&&ie(q(yt)),o&0&&{sourceLayer:yt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Xi(r){let e,l,t,n,s;function o(f){r[2](f)}let u={$$slots:{right:[Yi],default:[Ei]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new fe({props:u}),E.push(()=>U(e,"checked",o)),n=new be({props:{url:`pmtiles://${de()}/v1/${yt}.pmtiles`,$$slots:{default:[Zi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&16&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],W(()=>l=!1)),e.$set(a);const c={};i&17&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let yt="bus_routes";function xi(r,e,l){let t,n=Ce(yt);X(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class ef extends K{constructor(e){super(),Z(this,e,xi,Xi,Q,{})}}function xn(r){const e=$f(r[9]);r[10]=e[0],r[11]=e[1],r[12]=e[2]}function el(r,e,l){const t=r.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function tf(r){let e;return{c(){e=v("Cycle paths")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function nf(r){let e,l,t,n,s,o,u,f;return u=new Xe({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,l=L(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,n=L(),s=T("p"),s.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,o=L(),b(u.$$.fragment)},m(i,a){p(i,e,a),p(i,l,a),p(i,t,a),p(i,n,a),p(i,s,a),p(i,o,a),k(u,i,a),f=!0},p:le,i(i){f||(g(u.$$.fragment,i),f=!0)},o(i){d(u.$$.fragment,i),f=!1},d(i){i&&(m(e),m(l),m(t),m(n),m(s),m(o)),w(u,i)}}}function lf(r){let e,l,t;return l=new ce({props:{$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function tl(r){let e,l,t;return l=new it({props:{$$slots:{default:[rf]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(l.$$.fragment),me(e,"border","1px solid black"),me(e,"padding","8px")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131073&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function sf(r){let e,l,t=r[13]+"",n,s,o;return e=new je({props:{color:r[14]}}),{c(){b(e.$$.fragment),l=L(),n=v(t),s=L()},m(u,f){k(e,u,f),p(u,l,f),p(u,n,f),p(u,s,f),o=!0},p:le,i(u){o||(g(e.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),o=!1},d(u){u&&(m(l),m(n),m(s)),w(e,u)}}}function nl(r){let e,l,t;function n(o){r[5](o,r[10])}let s={$$slots:{default:[sf]},$$scope:{ctx:r}};return r[0][r[10]]!==void 0&&(s.checked=r[0][r[10]]),e=new fe({props:s}),E.push(()=>U(e,"checked",n)),{c(){b(e.$$.fragment)},m(o,u){k(e,o,u),t=!0},p(o,u){r=o;const f={};u&131072&&(f.$$scope={dirty:u,ctx:r}),!l&&u&5&&(l=!0,f.checked=r[0][r[10]],W(()=>l=!1)),e.$set(f)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function rf(r){let e,l,t=Pe(r[2]),n=[];for(let o=0;o<t.length;o+=1)n[o]=nl(el(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Oe()},m(o,u){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(o,u);p(o,e,u),l=!0},p(o,u){if(u&5){t=Pe(o[2]);let f;for(f=0;f<t.length;f+=1){const i=el(o,t,f);n[f]?(n[f].p(i,u),g(n[f],1)):(n[f]=nl(i),n[f].c(),g(n[f],1),n[f].m(e.parentNode,e))}for($e(),f=t.length;f<n.length;f+=1)s(f);pe()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)g(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&m(e),nt(n,o)}}}function of(r){xn(r);let e,l=r[10]+"",t,n,s,o,u,f=r[11]+"",i,a,c,$,_=r[12]+"",y;return{c(){e=T("h2"),t=v(l),n=L(),s=T("p"),o=v("Direction: "),u=T("b"),i=L(),a=T("p"),c=v("Width: "),$=T("b"),y=v(_)},m(S,C){p(S,e,C),h(e,t),p(S,n,C),p(S,s,C),h(s,o),h(s,u),u.innerHTML=f,p(S,i,C),p(S,a,C),h(a,c),h(a,$),h($,y)},p(S,C){xn(S),C&512&&l!==(l=S[10]+"")&&F(t,l),C&512&&f!==(f=S[11]+"")&&(u.innerHTML=f),C&512&&_!==(_=S[12]+"")&&F(y,_)},d(S){S&&(m(e),m(n),m(s),m(i),m(a))}}}function ff(r){let e,l;return e=new ue({props:{$$slots:{default:[of,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&131584&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function af(r){let e,l;const t=[q(St),{sourceLayer:St},{paint:{"line-color":Ze(["get","kind"],{track:x.cycle_paths.track,lane:x.cycle_paths.lane,shared_use_segregated:x.cycle_paths.shared_use_segregated,shared_use_unsegregated:x.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ge,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[3](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[ff]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new Se({props:n}),e.$on("click",pf),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&9?oe(t,[o&0&&ie(q(St)),o&0&&{sourceLayer:St},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&9&&{filter:s[3](s[0])},t[5],t[6],t[7]]):{};o&131072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function uf(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[lf],default:[tf]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0].show&&tl(r);return s=new be({props:{url:`pmtiles://${de()}/v1/${St}.pmtiles`,$$slots:{default:[af]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&131072&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0].show,W(()=>l=!1)),e.$set($),a[0].show?i?(i.p(a,c),c&1&&g(i,1)):(i=tl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&131073&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let St="cycle_paths";function cf(r){return{show:!0,track:r.includes("track"),lane:r.includes("lane"),shared_use_segregated:r.includes("shared_use_segregated"),shared_use_unsegregated:r.includes("shared_use_unsegregated")}}function $f(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${l} ${r.direction}`,t]}function pf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function mf(r,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],s={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function o($){return $.show?n.filter(_=>$[_]).join(","):null}let u=ht(St,s,o,cf);X(r,u,$=>l(0,t=$));let f=[["track","Separated tracks",x.cycle_paths.track],["lane","Unprotected lanes",x.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",x.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",x.cycle_paths.shared_use_unsegregated]];function i($){let _=n.filter(y=>$[y]);return["in",["get","kind"],["literal",_]]}function a($){r.$$.not_equal(t.show,$)&&(t.show=$,u.set(t))}function c($,_){r.$$.not_equal(t[_],$)&&(t[_]=$,u.set(t))}return[t,u,f,i,a,c]}class _f extends K{constructor(e){super(),Z(this,e,mf,uf,Q,{})}}function gf(r){let e,l,t;return e=new je({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Major Road Network`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function df(r){let e;return{c(){e=v(`Major Road Network
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function hf(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[df]},$$scope:{ctx:r}}}),o=new Ae({}),{c(){e=T("p"),l=v("Data from the "),b(t.$$.fragment),n=v(", as of September 2021."),s=L(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function bf(r){let e,l,t;return l=new ce({props:{$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function kf(r){let e,l=(r[4].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&F(t,l)},d(n){n&&m(e)}}}function wf(r){let e,l;return e=new ue({props:{$$slots:{default:[kf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function vf(r){let e,l;const t=[q(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[wf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new Se({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?oe(t,[o&0&&ie(q(Tt)),o&0&&{sourceLayer:Tt},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function yf(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[bf],default:[gf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new fe({props:u}),E.push(()=>U(e,"checked",o)),n=new be({props:{url:`pmtiles://${de()}/v1/${Tt}.pmtiles`,$$slots:{default:[vf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],W(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Tt="mrn";function Sf(r,e,l){let t,n=x.mrn,s=Ce(Tt);X(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Tf extends K{constructor(e){super(),Z(this,e,Sf,yf,Q,{})}}function Cf(r){let e,l,t;return e=new je({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Strategic Road Network`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Lf(r){let e;return{c(){e=v(`OS Open Roads
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Mf(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Lf]},$$scope:{ctx:r}}}),o=new Ae({}),{c(){e=T("p"),l=v("Data from "),b(t.$$.fragment),n=v(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),s=L(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function If(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Nf(r){let e,l=(r[4].name??"Unknown SRN road")+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&F(t,l)},d(n){n&&m(e)}}}function Pf(r){let e,l;return e=new ue({props:{$$slots:{default:[Nf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Of(r){let e,l;const t=[q(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Pf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new Se({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?oe(t,[o&0&&ie(q(Ct)),o&0&&{sourceLayer:Ct},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Rf(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[If],default:[Cf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new fe({props:u}),E.push(()=>U(e,"checked",o)),n=new be({props:{url:`pmtiles://${de()}/v1/${Ct}.pmtiles`,$$slots:{default:[Of]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],W(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Ct="srn";function Df(r,e,l){let t,n=x.srn,s=Ce(Ct);X(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class jf extends K{constructor(e){super(),Z(this,e,Df,Rf,Q,{})}}function Af(r){let e,l,t;return e=new je({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  National Cycle Network`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Gf(r){let e;return{c(){e=v(`National Cycle Network
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ff(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Gf]},$$scope:{ctx:r}}}),o=new Ae({}),{c(){e=T("p"),l=v("Data from Sustrans about the "),b(t.$$.fragment),n=v(", downloaded on 22/01/2024."),s=L(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function qf(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Ff]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function ll(r){let e,l,t,n=r[4].Desc_+"",s;return{c(){e=T("li"),l=v("Description: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Desc_+"")&&F(s,n)},d(o){o&&m(e)}}}function sl(r){let e,l,t,n=r[4].Greenway+"",s;return{c(){e=T("li"),l=v("Is greenway: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Greenway+"")&&F(s,n)},d(o){o&&m(e)}}}function rl(r){let e,l,t,n=r[4].RouteType+"",s;return{c(){e=T("li"),l=v("Route type: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteType+"")&&F(s,n)},d(o){o&&m(e)}}}function ol(r){let e,l,t,n=r[4].RouteNo+"",s;return{c(){e=T("li"),l=v("Route number: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteNo+"")&&F(s,n)},d(o){o&&m(e)}}}function il(r){let e,l,t,n=r[4].RouteCat+"",s;return{c(){e=T("li"),l=v("Route Category: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteCat+"")&&F(s,n)},d(o){o&&m(e)}}}function fl(r){let e,l,t,n=r[4].OpenStatus+"",s;return{c(){e=T("li"),l=v("Open Status: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].OpenStatus+"")&&F(s,n)},d(o){o&&m(e)}}}function al(r){let e,l,t,n=r[4].Surface+"",s;return{c(){e=T("li"),l=v("Surface: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Surface+"")&&F(s,n)},d(o){o&&m(e)}}}function ul(r){let e,l,t,n=r[4].Quality+"",s;return{c(){e=T("li"),l=v("Quality: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Quality+"")&&F(s,n)},d(o){o&&m(e)}}}function cl(r){let e,l,t,n=r[4].RoadClass+"",s;return{c(){e=T("li"),l=v("Road Class: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RoadClass+"")&&F(s,n)},d(o){o&&m(e)}}}function zf(r){let e,l,t,n,s,o,u,f,i,a=r[4].Desc_&&ll(r),c=r[4].Greenway&&sl(r),$=r[4].RouteType&&rl(r),_=r[4].RouteNo&&ol(r),y=r[4].RouteCat&&il(r),S=r[4].OpenStatus&&fl(r),C=r[4].Surface&&al(r),O=r[4].Quality&&ul(r),G=r[4].RoadClass&&cl(r);return{c(){e=T("ul"),a&&a.c(),l=L(),c&&c.c(),t=L(),$&&$.c(),n=L(),_&&_.c(),s=L(),y&&y.c(),o=L(),S&&S.c(),u=L(),C&&C.c(),f=L(),O&&O.c(),i=L(),G&&G.c()},m(D,R){p(D,e,R),a&&a.m(e,null),h(e,l),c&&c.m(e,null),h(e,t),$&&$.m(e,null),h(e,n),_&&_.m(e,null),h(e,s),y&&y.m(e,null),h(e,o),S&&S.m(e,null),h(e,u),C&&C.m(e,null),h(e,f),O&&O.m(e,null),h(e,i),G&&G.m(e,null)},p(D,R){D[4].Desc_?a?a.p(D,R):(a=ll(D),a.c(),a.m(e,l)):a&&(a.d(1),a=null),D[4].Greenway?c?c.p(D,R):(c=sl(D),c.c(),c.m(e,t)):c&&(c.d(1),c=null),D[4].RouteType?$?$.p(D,R):($=rl(D),$.c(),$.m(e,n)):$&&($.d(1),$=null),D[4].RouteNo?_?_.p(D,R):(_=ol(D),_.c(),_.m(e,s)):_&&(_.d(1),_=null),D[4].RouteCat?y?y.p(D,R):(y=il(D),y.c(),y.m(e,o)):y&&(y.d(1),y=null),D[4].OpenStatus?S?S.p(D,R):(S=fl(D),S.c(),S.m(e,u)):S&&(S.d(1),S=null),D[4].Surface?C?C.p(D,R):(C=al(D),C.c(),C.m(e,f)):C&&(C.d(1),C=null),D[4].Quality?O?O.p(D,R):(O=ul(D),O.c(),O.m(e,i)):O&&(O.d(1),O=null),D[4].RoadClass?G?G.p(D,R):(G=cl(D),G.c(),G.m(e,null)):G&&(G.d(1),G=null)},d(D){D&&m(e),a&&a.d(),c&&c.d(),$&&$.d(),_&&_.d(),y&&y.d(),S&&S.d(),C&&C.d(),O&&O.d(),G&&G.d()}}}function Hf(r){let e,l;return e=new ue({props:{$$slots:{default:[zf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Bf(r){let e,l;const t=[q(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Hf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new Se({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?oe(t,[o&0&&ie(q(Lt)),o&0&&{sourceLayer:Lt},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":4,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ef(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[qf],default:[Af]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new fe({props:u}),E.push(()=>U(e,"checked",o)),n=new be({props:{url:`pmtiles://${de()}/v1/${Lt}.pmtiles`,$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],W(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Lt="national_cycle_network";function Uf(r,e,l){let t,n=x.national_cycle_network,s=Ce(Lt);X(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Wf extends K{constructor(e){super(),Z(this,e,Uf,Ef,Q,{})}}function $l(r,e,l){const t=r.slice();return t[6]=e[l][0],t[7]=e[l][1],t[8]=e[l][2],t}function Yf(r){let e;return{c(){e=v("OS Pavement widths")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Jf(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Vf(r){let e,l,t,n,s,o,u,f,i,a,c;return i=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,l=L(),t=T("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,n=L(),s=T("p"),s.textContent="Data valid as of 1 January, 2024",o=L(),u=T("p"),f=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(i.$$.fragment),a=v(".")},m($,_){p($,e,_),p($,l,_),p($,t,_),p($,n,_),p($,s,_),p($,o,_),p($,u,_),h(u,f),k(i,u,null),h(u,a),c=!0},p($,_){const y={};_&2048&&(y.$$scope={dirty:_,ctx:$}),i.$set(y)},i($){c||(g(i.$$.fragment,$),c=!0)},o($){d(i.$$.fragment,$),c=!1},d($){$&&(m(e),m(l),m(t),m(n),m(s),m(o),m(u)),w(i)}}}function Qf(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Vf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function pl(r){let e,l;return e=new He({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:le,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Kf(r){let e,l,t=Jt(r[5].angle+r[8])+"",n;return{c(){e=T("p"),l=new ut(!1),n=v(` side of the road: no pavement
          `),l.a=n},m(s,o){p(s,e,o),l.m(t,e),h(e,n)},p(s,o){o&32&&t!==(t=Jt(s[5].angle+s[8])+"")&&l.p(t)},d(s){s&&m(e)}}}function Zf(r){let e,l,t=Jt(r[5].angle+r[8])+"",n,s,o=r[6]+"",u,f,i,a=r[7]+"",c,$;return{c(){e=T("p"),l=new ut(!1),n=v(` side of the road:
            `),s=T("b"),u=v(o),f=v(`
            m average,
            `),i=T("b"),c=v(a),$=v(`
            m minimum
          `),l.a=n},m(_,y){p(_,e,y),l.m(t,e),h(e,n),h(e,s),h(s,u),h(e,f),h(e,i),h(i,c),h(e,$)},p(_,y){y&32&&t!==(t=Jt(_[5].angle+_[8])+"")&&l.p(t),y&32&&o!==(o=_[6]+"")&&F(u,o),y&32&&a!==(a=_[7]+"")&&F(c,a)},d(_){_&&m(e)}}}function ml(r){let e;function l(s,o){return s[6]?Zf:Kf}let t=l(r),n=t(r);return{c(){n.c(),e=Oe()},m(s,o){n.m(s,o),p(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&m(e),n.d(s)}}}function Xf(r){let e,l=Pe([[r[5].left_average,r[5].left_minimum,-90],[r[5].right_average,r[5].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=ml($l(r,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=Oe()},m(n,s){for(let o=0;o<2;o+=1)t[o]&&t[o].m(n,s);p(n,e,s)},p(n,s){if(s&32){l=Pe([[n[5].left_average,n[5].left_minimum,-90],[n[5].right_average,n[5].right_minimum,90]]);let o;for(o=0;o<2;o+=1){const u=$l(n,l,o);t[o]?t[o].p(u,s):(t[o]=ml(u),t[o].c(),t[o].m(e.parentNode,e))}for(;o<2;o+=1)t[o].d(1)}},d(n){n&&m(e),nt(t,n)}}}function xf(r){let e,l;return e=new ue({props:{openOn:"hover",$$slots:{default:[Xf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&2080&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ea(r){let e,l;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Te(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[xf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new Se({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?oe(t,[o&0&&ie(q(Mt)),o&0&&{sourceLayer:Mt},t[2],t[3],o&6&&{paint:{"line-color":Te(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],s[2],s[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ta(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[Qf],default:[Yf]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0]&&pl(r);return s=new be({props:{url:`pmtiles://${Et()}/v1/${Mt}.pmtiles`,$$slots:{default:[ea]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&2048&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],W(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=pl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&2049&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Mt="pavement_widths";function na(r){let e=Math.floor((r+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function Jt(r){return`${na(r)} <span style="display: inline-block; rotate: ${r}deg">⬆</span>`}function la(r,e,l){let t,n=x.sequential_low_to_high,s=[0,2,4,6,8,13],o=Ce(Mt);X(r,o,f=>l(0,t=f));function u(f){t=f,o.set(t)}return[t,n,s,o,u]}class sa extends K{constructor(e){super(),Z(this,e,la,ta,Q,{})}}function ra(r){let e;return{c(){e=v("Propensity to Cycle Tool")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function oa(r){let e;return{c(){e=v("the PCT website")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ia(r){let e;return{c(){e=v("2017 journal article")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function fa(r){let e,l,t,n,s,o,u,f,i,a,c;return u=new te({props:{href:"https://www.pct.bike",$$slots:{default:[oa]},$$scope:{ctx:r}}}),i=new te({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[ia]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,l=L(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,n=L(),s=T("p"),o=v("See "),b(u.$$.fragment),f=v(" and "),b(i.$$.fragment),a=v(" for details on methodology and data sources.")},m($,_){p($,e,_),p($,l,_),p($,t,_),p($,n,_),p($,s,_),h(s,o),k(u,s,null),h(s,f),k(i,s,null),h(s,a),c=!0},p($,_){const y={};_&1024&&(y.$$scope={dirty:_,ctx:$}),u.$set(y);const S={};_&1024&&(S.$$scope={dirty:_,ctx:$}),i.$set(S)},i($){c||(g(u.$$.fragment,$),g(i.$$.fragment,$),c=!0)},o($){d(u.$$.fragment,$),d(i.$$.fragment,$),c=!1},d($){$&&(m(e),m(l),m(t),m(n),m(s)),w(u),w(i)}}}function aa(r){let e,l,t;return l=new ce({props:{$$slots:{default:[fa]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&1024&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function _l(r){let e,l,t,n,s,o,u,f;e=new He({props:{colorScale:r[1],limits:r[2]}});function i(_){r[6](_)}let a={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0].tripPurpose!==void 0&&(a.value=r[0].tripPurpose),t=new bs({props:a}),E.push(()=>U(t,"value",i));function c(_){r[7](_)}let $={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[0].scenario!==void 0&&($.value=r[0].scenario),o=new ct({props:$}),E.push(()=>U(o,"value",c)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),s=L(),b(o.$$.fragment)},m(_,y){k(e,_,y),p(_,l,y),k(t,_,y),p(_,s,y),k(o,_,y),f=!0},p(_,y){const S={};!n&&y&1&&(n=!0,S.value=_[0].tripPurpose,W(()=>n=!1)),t.$set(S);const C={};!u&&y&1&&(u=!0,C.value=_[0].scenario,W(()=>u=!1)),o.$set(C)},i(_){f||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),f=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(o.$$.fragment,_),f=!1},d(_){_&&(m(l),m(s)),w(e,_),w(t,_),w(o,_)}}}function ua(r){let e,l=r[4](r[9])+"",t;return{c(){e=new ut(!1),t=Oe(),e.a=t},m(n,s){e.m(l,n,s),p(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(m(t),e.d())}}}function ca(r){let e,l;return e=new ue({props:{$$slots:{default:[ua,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function $a(r){let e,l;const t=[q(et),{sourceLayer:et},{paint:{"line-color":Te(["get",r[0].scenario],r[2],r[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==et?"visible":"none"}}];let n={$$slots:{default:[ca]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new Se({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?oe(t,[o&0&&ie(q(et)),o&0&&{sourceLayer:et},o&7&&{paint:{"line-color":Te(["get",s[0].scenario],s[2],s[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==et?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function pa(r){let e,l=r[4](r[9])+"",t;return{c(){e=new ut(!1),t=Oe(),e.a=t},m(n,s){e.m(l,n,s),p(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(m(t),e.d())}}}function ma(r){let e,l;return e=new ue({props:{$$slots:{default:[pa,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function _a(r){let e,l;const t=[q(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Te(["get",r[0].scenario],r[2],r[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==at?"visible":"none"}}];let n={$$slots:{default:[ma]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new Se({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?oe(t,[o&0&&ie(q(at)),o&0&&{sourceLayer:at},t[2],t[3],o&7&&{paint:{"line-color":Te(["get",s[0].scenario],s[2],s[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==at?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ga(r){let e,l,t,n,s,o,u,f;function i($){r[5]($)}let a={$$slots:{right:[aa],default:[ra]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new fe({props:a}),E.push(()=>U(e,"checked",i));let c=r[0].show&&_l(r);return s=new be({props:{url:`pmtiles://${de()}/v1/${et}.pmtiles`,$$slots:{default:[$a]},$$scope:{ctx:r}}}),u=new be({props:{url:`pmtiles://${de()}/v1/${at}.pmtiles`,$$slots:{default:[_a]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),c&&c.c(),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment)},m($,_){k(e,$,_),p($,t,_),c&&c.m($,_),p($,n,_),k(s,$,_),p($,o,_),k(u,$,_),f=!0},p($,[_]){const y={};_&1024&&(y.$$scope={dirty:_,ctx:$}),!l&&_&1&&(l=!0,y.checked=$[0].show,W(()=>l=!1)),e.$set(y),$[0].show?c?(c.p($,_),_&1&&g(c,1)):(c=_l($),c.c(),g(c,1),c.m(n.parentNode,n)):c&&($e(),d(c,1,1,()=>{c=null}),pe());const S={};_&1025&&(S.$$scope={dirty:_,ctx:$}),s.$set(S);const C={};_&1025&&(C.$$scope={dirty:_,ctx:$}),u.$set(C)},i($){f||(g(e.$$.fragment,$),g(c),g(s.$$.fragment,$),g(u.$$.fragment,$),f=!0)},o($){d(e.$$.fragment,$),d(c),d(s.$$.fragment,$),d(u.$$.fragment,$),f=!1},d($){$&&(m(t),m(n),m(o)),w(e,$),c&&c.d($),w(s,$),w(u,$)}}}let et="pct_commute",at="pct_school";function da(r){return r.show?`${r.tripPurpose}/${r.scenario}`:null}function ha(r){let[e,l]=r.split("/");return{show:!0,tripPurpose:e,scenario:l}}function ba(r,e,l){let t,n=x.sequential_low_to_high,s=[0,50,100,500,1e3,2e3],u=ht("pct",{show:!1,tripPurpose:et,scenario:"baseline"},da,ha);X(r,u,$=>l(0,t=$));function f($){let _=$.baseline,y=$.gov_target,S=$.go_dutch,C=`<h2>Trip purpose: ${t.tripPurpose==et?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)C+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let O=(y/_).toFixed(1),G=(S/_).toFixed(1);C+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${O}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${G}x</b> of baseline)</p>`}return C}function i($){r.$$.not_equal(t.show,$)&&(t.show=$,u.set(t))}function a($){r.$$.not_equal(t.tripPurpose,$)&&(t.tripPurpose=$,u.set(t))}function c($){r.$$.not_equal(t.scenario,$)&&(t.scenario=$,u.set(t))}return[t,n,s,u,f,i,a,c]}class ka extends K{constructor(e){super(),Z(this,e,ba,ga,Q,{})}}function wa(r){let e;return{c(){e=v("OS Speeds")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function va(r){let e;return{c(){e=v("Basemap")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ya(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Sa(r){let e,l,t,n,s,o,u,f,i,a,c,$;return t=new te({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[va]},$$scope:{ctx:r}}}),a=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ya]},$$scope:{ctx:r}}}),{c(){e=T("p"),l=v("The average speed data is collected over a six-month period by "),b(t.$$.fragment),n=v(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),s=L(),o=T("p"),o.textContent="Data valid as of 1 September, 2023",u=L(),f=T("p"),i=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(a.$$.fragment),c=v(".")},m(_,y){p(_,e,y),h(e,l),k(t,e,null),h(e,n),p(_,s,y),p(_,o,y),p(_,u,y),p(_,f,y),h(f,i),k(a,f,null),h(f,c),$=!0},p(_,y){const S={};y&512&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const C={};y&512&&(C.$$scope={dirty:y,ctx:_}),a.$set(C)},i(_){$||(g(t.$$.fragment,_),g(a.$$.fragment,_),$=!0)},o(_){d(t.$$.fragment,_),d(a.$$.fragment,_),$=!1},d(_){_&&(m(e),m(s),m(o),m(u),m(f)),w(t),w(a)}}}function Ta(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Sa]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function gl(r){let e,l,t,n,s;e=new He({props:{colorScale:r[1],limits:r[2]}});function o(f){r[6](f)}let u={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0].kind!==void 0&&(u.value=r[0].kind),t=new bs({props:u}),E.push(()=>U(t,"value",o)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(f,i){k(e,f,i),p(f,l,i),k(t,f,i),s=!0},p(f,i){const a={};!n&&i&1&&(n=!0,a.value=f[0].kind,W(()=>n=!1)),t.$set(a)},i(f){s||(g(e.$$.fragment,f),g(t.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),s=!1},d(f){f&&m(l),w(e,f),w(t,f)}}}function Ca(r){let e,l,t=r[8].indicative_mph+"",n,s,o,u,f,i=r[8].highest_mph+"",a,c,$=r[4][r[8].highest_description]+"",_,y;return{c(){e=T("p"),l=v("Posted speed limit: "),n=v(t),s=v(" mph"),o=L(),u=T("p"),f=v("Highest average speed: "),a=v(i),c=v(" mph (during "),_=v($),y=v(")")},m(S,C){p(S,e,C),h(e,l),h(e,n),h(e,s),p(S,o,C),p(S,u,C),h(u,f),h(u,a),h(u,c),h(u,_),h(u,y)},p(S,C){C&256&&t!==(t=S[8].indicative_mph+"")&&F(n,t),C&256&&i!==(i=S[8].highest_mph+"")&&F(a,i),C&256&&$!==($=S[4][S[8].highest_description]+"")&&F(_,$)},d(S){S&&(m(e),m(o),m(u))}}}function La(r){let e,l;return e=new ue({props:{$$slots:{default:[Ca,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&768&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ma(r){let e,l;const t=[q(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Te(["get",r[0].kind],r[2],r[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={$$slots:{default:[La]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new Se({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?oe(t,[o&0&&ie(q(It)),o&0&&{sourceLayer:It},t[2],t[3],o&7&&{paint:{"line-color":Te(["get",s[0].kind],s[2],s[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0].show?"visible":"none"}}]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ia(r){let e,l,t,n,s,o;function u(a){r[5](a)}let f={$$slots:{right:[Ta],default:[wa]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0].show&&gl(r);return s=new be({props:{url:`pmtiles://${Et()}/v1/${It}.pmtiles`,$$slots:{default:[Ma]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&512&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0].show,W(()=>l=!1)),e.$set($),a[0].show?i?(i.p(a,c),c&1&&g(i,1)):(i=gl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&513&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let It="road_speeds";function Na(r){return r.show?r.kind:null}function Pa(r){return{show:!0,kind:r}}function Oa(r,e,l){let t,n=x.sequential_low_to_high,s=[0,20,30,40,50,90],u=ht(It,{show:!1,kind:"indicative_mph"},Na,Pa);X(r,u,c=>l(0,t=c));let f={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(c){r.$$.not_equal(t.show,c)&&(t.show=c,u.set(t))}function a(c){r.$$.not_equal(t.kind,c)&&(t.kind=c,u.set(t))}return[t,n,s,u,f,i,a]}class Ra extends K{constructor(e){super(),Z(this,e,Oa,Ia,Q,{})}}function Da(r){let e;return{c(){e=v("OS Road widths")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ja(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Aa(r){let e,l,t,n,s,o,u,f,i;return u=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ja]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,l=L(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",n=L(),s=T("p"),o=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),f=v(".")},m(a,c){p(a,e,c),p(a,l,c),p(a,t,c),p(a,n,c),p(a,s,c),h(s,o),k(u,s,null),h(s,f),i=!0},p(a,c){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),u.$set($)},i(a){i||(g(u.$$.fragment,a),i=!0)},o(a){d(u.$$.fragment,a),i=!1},d(a){a&&(m(e),m(l),m(t),m(n),m(s)),w(u)}}}function Ga(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Aa]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function dl(r){let e,l;return e=new He({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:le,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Fa(r){let e,l,t,n=r[5].average+"",s,o,u,f,i,a,c=r[5].minimum+"",$,_;return{c(){e=T("p"),l=v("Average width: "),t=T("b"),s=v(n),o=v(`
        meters`),u=L(),f=T("p"),i=v("Minimum width: "),a=T("b"),$=v(c),_=v(`
        meters`)},m(y,S){p(y,e,S),h(e,l),h(e,t),h(t,s),h(e,o),p(y,u,S),p(y,f,S),h(f,i),h(f,a),h(a,$),h(f,_)},p(y,S){S&32&&n!==(n=y[5].average+"")&&F(s,n),S&32&&c!==(c=y[5].minimum+"")&&F($,c)},d(y){y&&(m(e),m(u),m(f))}}}function qa(r){let e,l;return e=new ue({props:{$$slots:{default:[Fa,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function za(r){let e,l;const t=[q(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Te(["get","average"],r[2],r[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[qa]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new Se({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?oe(t,[o&0&&ie(q(Nt)),o&0&&{sourceLayer:Nt},t[2],t[3],o&6&&{paint:{"line-color":Te(["get","average"],s[2],s[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ha(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[Ga],default:[Da]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0]&&dl(r);return s=new be({props:{url:`pmtiles://${Et()}/v1/${Nt}.pmtiles`,$$slots:{default:[za]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],W(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=dl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&65&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Nt="road_widths";function Ba(r,e,l){let t,n=x.sequential_low_to_high,s=[0,5,10,15,20,100],o=Ce(Nt);X(r,o,f=>l(0,t=f));function u(f){t=f,o.set(t)}return[t,n,s,o,u]}class Ea extends K{constructor(e){super(),Z(this,e,Ba,Ha,Q,{})}}function Ua(r){let e,l,t;return e=new je({props:{color:x.trams}}),{c(){b(e.$$.fragment),l=v(`
  Trams`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Wa(r){let e,l,t,n;return t=new Xe({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,l=L(),b(t.$$.fragment)},m(s,o){p(s,e,o),p(s,l,o),k(t,s,o),n=!0},p:le,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(m(e),m(l)),w(t,s)}}}function Ya(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Wa]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&8&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Ja(r){let e,l;const t=[q(Pt),{sourceLayer:Pt},{paint:{"line-color":x.trams,"line-width":5,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new Se({props:n}),e.$on("click",Qa),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?oe(t,[o&0&&ie(q(Pt)),o&0&&{sourceLayer:Pt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Va(r){let e,l,t,n,s;function o(f){r[2](f)}let u={$$slots:{right:[Ya],default:[Ua]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new fe({props:u}),E.push(()=>U(e,"checked",o)),n=new be({props:{url:`pmtiles://${de()}/v1/${Pt}.pmtiles`,$$slots:{default:[Ja]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&8&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],W(()=>l=!1)),e.$set(a);const c={};i&9&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Pt="trams";function Qa(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Ka(r,e,l){let t,n=Ce(Pt);X(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Za extends K{constructor(e){super(),Z(this,e,Ka,Va,Q,{})}}function Xa(r){let e;return{c(){e=v("Bus stops")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function xa(r){let e;return{c(){e=v(`Bus Open Data Service
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function eu(r){let e,l,t,n,s,o,u,f,i;return t=new te({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[xa]},$$scope:{ctx:r}}}),f=new Ae({}),{c(){e=T("p"),l=v("Data from the "),b(t.$$.fragment),n=v(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),s=L(),o=T("p"),o.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=L(),b(f.$$.fragment)},m(a,c){p(a,e,c),h(e,l),k(t,e,null),h(e,n),p(a,s,c),p(a,o,c),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),t.$set($)},i(a){i||(g(t.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(t.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(s),m(o),m(u)),w(t),w(f,a)}}}function tu(r){let e,l,t;return l=new ce({props:{$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function hl(r){let e,l,t,n;return t=new He({props:{colorScale:r[1],limits:r[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",l=L(),b(t.$$.fragment)},m(s,o){p(s,e,o),p(s,l,o),k(t,s,o),n=!0},p:le,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(m(e),m(l)),w(t,s)}}}function nu(r){let e,l,t,n=r[5].stop_name+"",s,o,u,f,i,a=r[5].peak+"",c,$,_,y,S,C=r[5].peak_description+"",O,G,D,R,M,I=r[5].total+"",j,P,N=r[5].total_description+"",H,se;return{c(){e=T("p"),l=v("Stop name: "),t=T("b"),s=v(n),o=L(),u=T("p"),f=v("Peak: "),i=T("b"),c=v(a),$=v(`
        buses during the busiest hour of any day`),_=L(),y=T("p"),S=v("The peak hour is "),O=v(C),G=L(),D=T("p"),R=v("Total buses per day: "),M=T("b"),j=v(I),P=v(`
        (for `),H=v(N),se=v(", the busiest day of the week)")},m(A,J){p(A,e,J),h(e,l),h(e,t),h(t,s),p(A,o,J),p(A,u,J),h(u,f),h(u,i),h(i,c),h(u,$),p(A,_,J),p(A,y,J),h(y,S),h(y,O),p(A,G,J),p(A,D,J),h(D,R),h(D,M),h(M,j),h(D,P),h(D,H),h(D,se)},p(A,J){J&32&&n!==(n=A[5].stop_name+"")&&F(s,n),J&32&&a!==(a=A[5].peak+"")&&F(c,a),J&32&&C!==(C=A[5].peak_description+"")&&F(O,C),J&32&&I!==(I=A[5].total+"")&&F(j,I),J&32&&N!==(N=A[5].total_description+"")&&F(H,N)},d(A){A&&(m(e),m(o),m(u),m(_),m(y),m(G),m(D))}}}function lu(r){let e,l;return e=new ue({props:{$$slots:{default:[nu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function su(r){let e,l;const t=[q(Ot),{sourceLayer:Ot},{paint:{"circle-color":Te(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[lu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new gt({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?oe(t,[o&0&&ie(q(Ot)),o&0&&{sourceLayer:Ot},o&6&&{paint:{"circle-color":Te(["get","peak"],s[2],s[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ru(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[tu],default:[Xa]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0]&&hl(r);return s=new be({props:{url:`pmtiles://${de()}/v1/${Ot}.pmtiles`,$$slots:{default:[su]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],W(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=hl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&65&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Ot="bus_stops";function ou(r,e,l){let t,n=x.sequential_low_to_high,s=[0,3,10,20,30,100],o=Ce(Ot);X(r,o,f=>l(0,t=f));function u(f){t=f,o.set(t)}return[t,n,s,o,u]}class iu extends K{constructor(e){super(),Z(this,e,ou,ru,Q,{})}}function fu(r){let e;return{c(){e=v("Crossings")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function au(r){let e;return{c(){e=v("crossing")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function uu(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[au]},$$scope:{ctx:r}}}),o=new Xe({}),{c(){e=T("p"),l=v("This shows "),b(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=L(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function cu(r){let e,l,t;return l=new ce({props:{$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function bl(r){let e,l;return e=new Ut({props:{rows:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:le,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function $u(r){let e,l=kl(r[4])+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=kl(n[4])+"")&&F(t,l)},d(n){n&&m(e)}}}function pu(r){let e,l;return e=new ue({props:{$$slots:{default:[$u,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function mu(r){let e,l;const t=[q(Rt),{sourceLayer:Rt},{paint:{"circle-color":Ze(["get","crossing"],{traffic_signals:x.signalized_crossing},x.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[pu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new gt({props:n}),e.$on("click",gu),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?oe(t,[o&0&&ie(q(Rt)),o&0&&{sourceLayer:Rt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function _u(r){let e,l,t,n,s,o;function u(a){r[3](a)}let f={$$slots:{right:[cu],default:[fu]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0]&&bl(r);return s=new be({props:{url:`pmtiles://${de()}/v1/${Rt}.pmtiles`,$$slots:{default:[mu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&32&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],W(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=bl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&33&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Rt="crossings";function kl(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function gu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function du(r,e,l){let t,n=Ce(Rt);X(r,n,u=>l(0,t=u));let s=[["Signalized",x.signalized_crossing],["Other",x.other_crossing]];function o(u){t=u,n.set(t)}return[t,n,s,o]}class hu extends K{constructor(e){super(),Z(this,e,du,_u,Q,{})}}function bu(r){let e;return{c(){e=v("Gradients")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ku(r){let e;return{c(){e=v("OS Terrain 50")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function wu(r){let e,l,t,n,s,o,u,f,i,a,c,$,_;return u=new te({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[ku]},$$scope:{ctx:r}}}),a=new Ae({}),$=new Xe({}),{c(){e=T("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,l=L(),t=T("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,n=L(),s=T("p"),o=v("This layer is built from "),b(u.$$.fragment),f=v(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),i=L(),b(a.$$.fragment),c=L(),b($.$$.fragment)},m(y,S){p(y,e,S),p(y,l,S),p(y,t,S),p(y,n,S),p(y,s,S),h(s,o),k(u,s,null),h(s,f),p(y,i,S),k(a,y,S),p(y,c,S),k($,y,S),_=!0},p(y,S){const C={};S&64&&(C.$$scope={dirty:S,ctx:y}),u.$set(C)},i(y){_||(g(u.$$.fragment,y),g(a.$$.fragment,y),g($.$$.fragment,y),_=!0)},o(y){d(u.$$.fragment,y),d(a.$$.fragment,y),d($.$$.fragment,y),_=!1},d(y){y&&(m(e),m(l),m(t),m(n),m(s),m(i),m(c)),w(u),w(a,y),w($,y)}}}function vu(r){let e,l,t;return l=new ce({props:{$$slots:{default:[wu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function wl(r){let e,l;return e=new He({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:le,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function yu(r){let e,l,t,n=Math.abs(r[5].gradient)/100+"",s,o;return{c(){e=T("p"),l=v("Gradient: "),t=T("b"),s=v(n),o=v(`
        %`)},m(u,f){p(u,e,f),h(e,l),h(e,t),h(t,s),h(e,o)},p(u,f){f&32&&n!==(n=Math.abs(u[5].gradient)/100+"")&&F(s,n)},d(u){u&&m(e)}}}function Su(r){let e,l;return e=new ue({props:{$$slots:{default:[yu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Tu(r){let e,l,t,n;const s=[q(Ve),{sourceLayer:Ve},{manageHoverState:!0},{paint:{"line-color":Te(["/",["abs",["get","gradient"]],100],r[2],r[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let o={$$slots:{default:[Su]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=re(o,s[i]);e=new Se({props:o});const u=[q(Ve+"_arrows"),{sourceLayer:Ve},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=re(f,u[i]);return t=new cn({props:f}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&7?oe(s,[a&0&&ie(q(Ve)),a&0&&{sourceLayer:Ve},s[2],a&6&&{paint:{"line-color":Te(["/",["abs",["get","gradient"]],100],i[2],i[1]),"line-width":Ge,"line-opacity":ne(1,.5)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};a&64&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&1?oe(u,[a&0&&ie(q(Ve+"_arrows")),a&0&&{sourceLayer:Ve},u[2],u[3],a&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function Cu(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[vu],default:[bu]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0]&&wl(r);return s=new be({props:{url:`pmtiles://${de()}/v1/${Ve}.pmtiles`,$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],W(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=wl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&65&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Ve="gradient";function Lu(r,e,l){let t,n=x.gradient_flat_to_steep,s=[0,3,5,8,10,20,100],o=Ce(Ve);X(r,o,f=>l(0,t=f));function u(f){t=f,o.set(t)}return[t,n,s,o,u]}class Mu extends K{constructor(e){super(),Z(this,e,Lu,Cu,Q,{})}}function Iu(r){let e,l,t;return{c(){e=T("img"),t=v(`
  Cycle parking`),Yt(e.src,l=Ms)||B(e,"src",l),B(e,"alt","a logo representing cycle parking")},m(n,s){p(n,e,s),p(n,t,s)},p:le,d(n){n&&(m(e),m(t))}}}function Nu(r){let e;return{c(){e=v("OpenStreetMap")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Pu(r){let e;return{c(){e=v("OpenStreetMap Carto")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ou(r){let e,l,t,n,s,o,u,f,i,a,c;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Nu]},$$scope:{ctx:r}}}),f=new te({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Pu]},$$scope:{ctx:r}}}),a=new Xe({}),{c(){e=T("p"),l=v("Cycle parking, according to "),b(t.$$.fragment),n=v(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),s=L(),o=T("p"),u=v("Icon from "),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m($,_){p($,e,_),h(e,l),k(t,e,null),h(e,n),p($,s,_),p($,o,_),h(o,u),k(f,o,null),p($,i,_),k(a,$,_),c=!0},p($,_){const y={};_&16&&(y.$$scope={dirty:_,ctx:$}),t.$set(y);const S={};_&16&&(S.$$scope={dirty:_,ctx:$}),f.$set(S)},i($){c||(g(t.$$.fragment,$),g(f.$$.fragment,$),g(a.$$.fragment,$),c=!0)},o($){d(t.$$.fragment,$),d(f.$$.fragment,$),d(a.$$.fragment,$),c=!1},d($){$&&(m(e),m(s),m(o),m(i)),w(t),w(f),w(a,$)}}}function Ru(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Ou]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Du(r){let e,l,t,n=(r[3].capacity??"unknown")+"",s;return{c(){e=T("p"),l=v("Capacity: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&8&&n!==(n=(o[3].capacity??"unknown")+"")&&F(s,n)},d(o){o&&m(e)}}}function ju(r){let e,l;return e=new ue({props:{$$slots:{default:[Du,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Au(r){let e,l;const t=[q(Dt),{sourceLayer:Dt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[ju]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new cn({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?oe(t,[o&0&&ie(q(Dt)),o&0&&{sourceLayer:Dt},o&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Gu(r){let e,l,t,n,s;function o(f){r[2](f)}let u={$$slots:{right:[Ru],default:[Iu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new fe({props:u}),E.push(()=>U(e,"checked",o)),n=new be({props:{url:`pmtiles://${de()}/v1/${Dt}.pmtiles`,$$slots:{default:[Au]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&16&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],W(()=>l=!1)),e.$set(a);const c={};i&17&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Dt="cycle_parking";function Fu(r,e,l){let t,n=Ce(Dt);X(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class qu extends K{constructor(e){super(),Z(this,e,Fu,Gu,Q,{})}}function zu(r){let e;return{c(){e=v("Education")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Hu(r){let e,l,t,n;return t=new Xe({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,l=L(),b(t.$$.fragment)},m(s,o){p(s,e,o),p(s,l,o),k(t,s,o),n=!0},p:le,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(m(e),m(l)),w(t,s)}}}function Bu(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Hu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function vl(r){let e,l,t;return l=new it({props:{$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(l.$$.fragment),me(e,"border","1px solid black"),me(e,"padding","8px")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2049&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Eu(r){let e,l,t;return e=new je({props:{color:x.education.schools}}),{c(){b(e.$$.fragment),l=v(`
        Schools`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Uu(r){let e,l,t;return e=new je({props:{color:x.education.colleges}}),{c(){b(e.$$.fragment),l=v(`
        Colleges`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Wu(r){let e,l,t;return e=new je({props:{color:x.education.universities}}),{c(){b(e.$$.fragment),l=v(`
        Universities`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:le,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Yu(r){let e,l,t,n,s,o,u,f,i;function a(C){r[4](C)}let c={$$slots:{default:[Eu]},$$scope:{ctx:r}};r[0].school!==void 0&&(c.checked=r[0].school),e=new fe({props:c}),E.push(()=>U(e,"checked",a));function $(C){r[5](C)}let _={$$slots:{default:[Uu]},$$scope:{ctx:r}};r[0].college!==void 0&&(_.checked=r[0].college),n=new fe({props:_}),E.push(()=>U(n,"checked",$));function y(C){r[6](C)}let S={$$slots:{default:[Wu]},$$scope:{ctx:r}};return r[0].university!==void 0&&(S.checked=r[0].university),u=new fe({props:S}),E.push(()=>U(u,"checked",y)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),o=L(),b(u.$$.fragment)},m(C,O){k(e,C,O),p(C,t,O),k(n,C,O),p(C,o,O),k(u,C,O),i=!0},p(C,O){const G={};O&2048&&(G.$$scope={dirty:O,ctx:C}),!l&&O&1&&(l=!0,G.checked=C[0].school,W(()=>l=!1)),e.$set(G);const D={};O&2048&&(D.$$scope={dirty:O,ctx:C}),!s&&O&1&&(s=!0,D.checked=C[0].college,W(()=>s=!1)),n.$set(D);const R={};O&2048&&(R.$$scope={dirty:O,ctx:C}),!f&&O&1&&(f=!0,R.checked=C[0].university,W(()=>f=!1)),u.$set(R)},i(C){i||(g(e.$$.fragment,C),g(n.$$.fragment,C),g(u.$$.fragment,C),i=!0)},o(C){d(e.$$.fragment,C),d(n.$$.fragment,C),d(u.$$.fragment,C),i=!1},d(C){C&&(m(t),m(o)),w(e,C),w(n,C),w(u,C)}}}function Ju(r){let e,l=(r[10].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&F(t,l)},d(n){n&&m(e)}}}function Vu(r){let e,l;return e=new ue({props:{$$slots:{default:[Ju,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&3072&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Qu(r){let e,l;const t=[q(jt),{sourceLayer:jt},{paint:{"fill-color":Ze(["get","type"],{school:x.education.schools,college:x.education.colleges,university:x.education.universities},"grey"),"fill-opacity":ne(.7,1)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[2](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Vu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new ze({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&5?oe(t,[o&0&&ie(q(jt)),o&0&&{sourceLayer:jt},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&5&&{filter:s[2](s[0])},t[5],t[6]]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ku(r){let e,l,t,n,s,o;function u(a){r[3](a)}let f={$$slots:{right:[Bu],default:[zu]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0].show&&vl(r);return s=new be({props:{url:`pmtiles://${de()}/v1/${jt}.pmtiles`,$$slots:{default:[Qu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&2048&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0].show,W(()=>l=!1)),e.$set($),a[0].show?i?(i.p(a,c),c&1&&g(i,1)):(i=vl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&2049&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let jt="education";function Zu(r){return{show:!0,school:r.includes("school"),college:r.includes("college"),university:r.includes("university")}}function Xu(r,e,l){let t,n=["school","college","university"],s={show:!1,school:!0,college:!0,university:!0};function o(_){return _.show?n.filter(y=>_[y]).join(","):null}let u=ht(jt,s,o,Zu);X(r,u,_=>l(0,t=_));function f(_){let y=n.filter(S=>_[S]);return["in",["get","type"],["literal",y]]}function i(_){r.$$.not_equal(t.show,_)&&(t.show=_,u.set(t))}function a(_){r.$$.not_equal(t.school,_)&&(t.school=_,u.set(t))}function c(_){r.$$.not_equal(t.college,_)&&(t.college=_,u.set(t))}function $(_){r.$$.not_equal(t.university,_)&&(t.university=_,u.set(t))}return[t,u,f,i,a,c,$]}class xu extends K{constructor(e){super(),Z(this,e,Xu,Ku,Q,{})}}function ec(r){let e,l,t,n;return e=new je({props:{color:r[4]}}),{c(){b(e.$$.fragment),l=L(),t=v(r[2])},m(s,o){k(e,s,o),p(s,l,o),p(s,t,o),n=!0},p(s,o){(!n||o&4)&&F(t,s[2])},i(s){n||(g(e.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),n=!1},d(s){s&&(m(l),m(t)),w(e,s)}}}function tc(r){let e;const l=r[6].default,t=$t(l,r,r[8],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&256)&&pt(t,l,n,n[8],e?_t(l,n[8],s,null):mt(n[8]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function nc(r){let e,l,t;return l=new ce({props:{$$slots:{default:[tc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&256&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function lc(r){let e,l=(r[9].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&514&&l!==(l=(n[9].name??`Unnamed ${n[1]}`)+"")&&F(t,l)},d(n){n&&m(e)}}}function sc(r){let e,l;return e=new ue({props:{$$slots:{default:[lc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&770&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function rc(r){let e,l;const t=[q(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":ne(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[sc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new ze({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&25?oe(t,[o&1&&ie(q(s[0])),o&1&&{sourceLayer:s[0]},o&16&&{paint:{"fill-color":s[4],"fill-opacity":ne(.7,1)}},o&8&&{layout:{visibility:s[3]?"visible":"none"}},t[4],t[5]]):{};o&258&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function oc(r){let e,l,t,n,s;function o(f){r[7](f)}let u={$$slots:{right:[nc],default:[ec]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new fe({props:u}),E.push(()=>U(e,"checked",o)),n=new be({props:{url:`pmtiles://${de()}/v1/${r[0]}.pmtiles`,$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&260&&(a.$$scope={dirty:i,ctx:f}),!l&&i&8&&(l=!0,a.checked=f[3],W(()=>l=!1)),e.$set(a);const c={};i&1&&(c.url=`pmtiles://${de()}/v1/${f[0]}.pmtiles`),i&267&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}function ic(r,e,l){let t,{$$slots:n={},$$scope:s}=e,{name:o}=e,{singularNoun:u}=e,{pluralNoun:f}=e,i=x[o],a=Ce(o);X(r,a,$=>l(3,t=$));function c($){t=$,a.set(t)}return r.$$set=$=>{"name"in $&&l(0,o=$.name),"singularNoun"in $&&l(1,u=$.singularNoun),"pluralNoun"in $&&l(2,f=$.pluralNoun),"$$scope"in $&&l(8,s=$.$$scope)},[o,u,f,t,i,a,n,c,s]}class ks extends K{constructor(e){super(),Z(this,e,ic,oc,Q,{name:0,singularNoun:1,pluralNoun:2})}}function fc(r){let e;return{c(){e=v("hospital")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ac(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[fc]},$$scope:{ctx:r}}}),o=new Xe({}),{c(){e=T("p"),l=v("This shows "),b(t.$$.fragment),n=v(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),s=L(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function uc(r){let e,l;return e=new ks({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[ac]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}class cc extends K{constructor(e){super(),Z(this,e,null,uc,Q,{})}}function $c(r){let e,l,t;return{c(){e=T("img"),t=v(`
  Railway Stations`),Yt(e.src,l=Is)||B(e,"src",l),B(e,"alt","A logo representing a train")},m(n,s){p(n,e,s),p(n,t,s)},p:le,d(n){n&&(m(e),m(t))}}}function pc(r){let e;return{c(){e=v("railway station")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function mc(r){let e;return{c(){e=v(`National Rail
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function _c(r){let e,l,t,n,s,o,u,f,i,a,c,$;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[pc]},$$scope:{ctx:r}}}),f=new te({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[mc]},$$scope:{ctx:r}}}),c=new Xe({}),{c(){e=T("p"),l=v("This shows "),b(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=L(),o=T("p"),u=v("Icon from "),b(f.$$.fragment),i=v(". (Note that not all stations shown are National Rail.)"),a=L(),b(c.$$.fragment)},m(_,y){p(_,e,y),h(e,l),k(t,e,null),h(e,n),p(_,s,y),p(_,o,y),h(o,u),k(f,o,null),h(o,i),p(_,a,y),k(c,_,y),$=!0},p(_,y){const S={};y&16&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const C={};y&16&&(C.$$scope={dirty:y,ctx:_}),f.$set(C)},i(_){$||(g(t.$$.fragment,_),g(f.$$.fragment,_),g(c.$$.fragment,_),$=!0)},o(_){d(t.$$.fragment,_),d(f.$$.fragment,_),d(c.$$.fragment,_),$=!1},d(_){_&&(m(e),m(s),m(o),m(a)),w(t),w(f),w(c,_)}}}function gc(r){let e,l,t;return l=new ce({props:{$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function dc(r){let e,l=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&F(t,l)},d(n){n&&m(e)}}}function hc(r){let e,l;return e=new ue({props:{$$slots:{default:[dc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function bc(r){let e,l;const t=[q(Vt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[hc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new cn({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?oe(t,[o&0&&ie(q(Vt)),o&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function kc(r){let e,l,t,n,s;function o(f){r[2](f)}let u={$$slots:{right:[gc],default:[$c]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new fe({props:u}),E.push(()=>U(e,"checked",o)),n=new dt({props:{data:`${de()}/v1/${Vt}.geojson`,$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&16&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],W(()=>l=!1)),e.$set(a);const c={};i&17&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Vt="railway_stations";function wc(r,e,l){let t,n=Ce(Vt);X(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class vc extends K{constructor(e){super(),Z(this,e,wc,kc,Q,{})}}function yc(r){let e;return{c(){e=v("sports pitches")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Sc(r){let e;return{c(){e=v("sports centres")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Tc(r){let e,l,t,n,s,o,u,f,i;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[yc]},$$scope:{ctx:r}}}),s=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Sc]},$$scope:{ctx:r}}}),f=new Xe({}),{c(){e=T("p"),l=v("This shows "),b(t.$$.fragment),n=v(" and "),b(s.$$.fragment),o=v(" data from OpenStreetMap (as of 9 August 2023)."),u=L(),b(f.$$.fragment)},m(a,c){p(a,e,c),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&1&&($.$$scope={dirty:c,ctx:a}),t.$set($);const _={};c&1&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){i||(g(t.$$.fragment,a),g(s.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(u)),w(t),w(s),w(f,a)}}}function Cc(r){let e,l;return e=new ks({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}class Lc extends K{constructor(e){super(),Z(this,e,null,Cc,Q,{})}}function Mc(r){let e;return{c(){e=v("Stats19")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ic(r){let e;return{c(){e=v("DfT stats19")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Nc(r){let e;return{c(){e=v("documented by DfT")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Pc(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y,S,C,O,G,D,R,M,I,j;return t=new te({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Ic]},$$scope:{ctx:r}}}),O=new te({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Nc]},$$scope:{ctx:r}}}),I=new Ae({}),{c(){e=T("p"),l=v("This layer shows collisions recorded in the "),b(t.$$.fragment),n=v(" dataset. Please note these limitations:"),s=L(),o=T("ul"),u=T("li"),u.textContent="Only collisions between 2017 and 2022 are included",f=L(),i=T("li"),i.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,a=L(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,$=L(),_=T("li"),_.textContent='The "pedestrians" category also include mobility scooters',y=L(),S=T("li"),C=v("All limitations "),b(O.$$.fragment),G=v(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),D=L(),R=T("p"),R.textContent="You can click a point to open the full report, thanks to CycleStreets.",M=L(),b(I.$$.fragment)},m(P,N){p(P,e,N),h(e,l),k(t,e,null),h(e,n),p(P,s,N),p(P,o,N),h(o,u),h(o,f),h(o,i),h(o,a),h(o,c),h(o,$),h(o,_),h(o,y),h(o,S),h(S,C),k(O,S,null),h(S,G),p(P,D,N),p(P,R,N),p(P,M,N),k(I,P,N),j=!0},p(P,N){const H={};N&4194304&&(H.$$scope={dirty:N,ctx:P}),t.$set(H);const se={};N&4194304&&(se.$$scope={dirty:N,ctx:P}),O.$set(se)},i(P){j||(g(t.$$.fragment,P),g(O.$$.fragment,P),g(I.$$.fragment,P),j=!0)},o(P){d(t.$$.fragment,P),d(O.$$.fragment,P),d(I.$$.fragment,P),j=!1},d(P){P&&(m(e),m(s),m(o),m(D),m(R),m(M)),w(t),w(O),w(I,P)}}}function Oc(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Pc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&4194304&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function yl(r){let e,l,t,n,s,o,u,f,i,a,c,$,_;return l=new it({props:{small:!0,$$slots:{default:[Gc]},$$scope:{ctx:r}}}),a=new Ut({props:{rows:r[9]}}),{c(){e=T("div"),b(l.$$.fragment),t=L(),n=T("div"),s=v(`Filter years:
      `),o=T("input"),u=v(`
      -
      `),f=T("input"),i=L(),b(a.$$.fragment),B(o,"type","number"),B(o,"min",2017),B(o,"max",2022),B(o,"class","svelte-1ft65rw"),B(f,"type","number"),B(f,"min",2017),B(f,"max",2022),B(f,"class","svelte-1ft65rw"),me(e,"border","1px solid black"),me(e,"padding","8px")},m(y,S){p(y,e,S),k(l,e,null),h(e,t),h(e,n),h(n,s),h(n,o),Qe(o,r[0].minYear),h(n,u),h(n,f),Qe(f,r[0].maxYear),h(e,i),k(a,e,null),c=!0,$||(_=[tt(o,"input",r[15]),tt(f,"input",r[16])],$=!0)},p(y,S){const C={};S&4194305&&(C.$$scope={dirty:S,ctx:y}),l.$set(C),S&1&&Bt(o.value)!==y[0].minYear&&Qe(o,y[0].minYear),S&1&&Bt(f.value)!==y[0].maxYear&&Qe(f,y[0].maxYear)},i(y){c||(g(l.$$.fragment,y),g(a.$$.fragment,y),c=!0)},o(y){d(l.$$.fragment,y),d(a.$$.fragment,y),c=!1},d(y){y&&m(e),w(l),w(a),$=!1,hs(_)}}}function Rc(r){let e;return{c(){e=v("Pedestrians")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Dc(r){let e;return{c(){e=v("Cyclists")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function jc(r){let e;return{c(){e=v("Horse riders")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ac(r){let e;return{c(){e=v("Other")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Gc(r){let e,l,t,n,s,o,u,f,i,a,c,$;function _(M){r[11](M)}let y={$$slots:{default:[Rc]},$$scope:{ctx:r}};r[0].pedestrians!==void 0&&(y.checked=r[0].pedestrians),e=new fe({props:y}),E.push(()=>U(e,"checked",_));function S(M){r[12](M)}let C={$$slots:{default:[Dc]},$$scope:{ctx:r}};r[0].cyclists!==void 0&&(C.checked=r[0].cyclists),n=new fe({props:C}),E.push(()=>U(n,"checked",S));function O(M){r[13](M)}let G={$$slots:{default:[jc]},$$scope:{ctx:r}};r[0].horseRiders!==void 0&&(G.checked=r[0].horseRiders),u=new fe({props:G}),E.push(()=>U(u,"checked",O));function D(M){r[14](M)}let R={$$slots:{default:[Ac]},$$scope:{ctx:r}};return r[0].other!==void 0&&(R.checked=r[0].other),a=new fe({props:R}),E.push(()=>U(a,"checked",D)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),o=L(),b(u.$$.fragment),i=L(),b(a.$$.fragment)},m(M,I){k(e,M,I),p(M,t,I),k(n,M,I),p(M,o,I),k(u,M,I),p(M,i,I),k(a,M,I),$=!0},p(M,I){const j={};I&4194304&&(j.$$scope={dirty:I,ctx:M}),!l&&I&1&&(l=!0,j.checked=M[0].pedestrians,W(()=>l=!1)),e.$set(j);const P={};I&4194304&&(P.$$scope={dirty:I,ctx:M}),!s&&I&1&&(s=!0,P.checked=M[0].cyclists,W(()=>s=!1)),n.$set(P);const N={};I&4194304&&(N.$$scope={dirty:I,ctx:M}),!f&&I&1&&(f=!0,N.checked=M[0].horseRiders,W(()=>f=!1)),u.$set(N);const H={};I&4194304&&(H.$$scope={dirty:I,ctx:M}),!c&&I&1&&(c=!0,H.checked=M[0].other,W(()=>c=!1)),a.$set(H)},i(M){$||(g(e.$$.fragment,M),g(n.$$.fragment,M),g(u.$$.fragment,M),g(a.$$.fragment,M),$=!0)},o(M){d(e.$$.fragment,M),d(n.$$.fragment,M),d(u.$$.fragment,M),d(a.$$.fragment,M),$=!1},d(M){M&&(m(t),m(o),m(i)),w(e,M),w(n,M),w(u,M),w(a,M)}}}function Sl(r){let e,l,t,n=r[3][r[21].pedestrian_location]+"",s;return{c(){e=T("p"),l=v("Pedestrian location: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&2097152&&n!==(n=o[3][o[21].pedestrian_location]+"")&&F(s,n)},d(o){o&&m(e)}}}function Tl(r){let e,l,t,n=r[4][r[21].pedestrian_movement]+"",s;return{c(){e=T("p"),l=v("Pedestrian movement: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&2097152&&n!==(n=o[4][o[21].pedestrian_movement]+"")&&F(s,n)},d(o){o&&m(e)}}}function Fc(r){let e,l,t,n=r[21].year+"",s,o,u,f,i,a=r[5][r[21].severity]+"",c,$,_,y,S,C=Cl(r[21])+"",O,G,D,R,M,I=r[21].pedestrian_location&&Sl(r),j=r[21].pedestrian_movement&&Tl(r);return{c(){e=T("p"),l=v("Year: "),t=T("b"),s=v(n),o=L(),u=T("p"),f=v("Severity: "),i=T("b"),c=v(a),$=L(),_=T("p"),y=v("Casualties: "),S=T("b"),O=v(C),G=L(),I&&I.c(),D=L(),j&&j.c(),R=L(),M=T("p"),M.textContent="Click to open full report in CycleStreets"},m(P,N){p(P,e,N),h(e,l),h(e,t),h(t,s),p(P,o,N),p(P,u,N),h(u,f),h(u,i),h(i,c),p(P,$,N),p(P,_,N),h(_,y),h(_,S),h(S,O),p(P,G,N),I&&I.m(P,N),p(P,D,N),j&&j.m(P,N),p(P,R,N),p(P,M,N)},p(P,N){N&2097152&&n!==(n=P[21].year+"")&&F(s,n),N&2097152&&a!==(a=P[5][P[21].severity]+"")&&F(c,a),N&2097152&&C!==(C=Cl(P[21])+"")&&F(O,C),P[21].pedestrian_location?I?I.p(P,N):(I=Sl(P),I.c(),I.m(D.parentNode,D)):I&&(I.d(1),I=null),P[21].pedestrian_movement?j?j.p(P,N):(j=Tl(P),j.c(),j.m(R.parentNode,R)):j&&(j.d(1),j=null)},d(P){P&&(m(e),m(o),m(u),m($),m(_),m(G),m(D),m(R),m(M)),I&&I.d(P),j&&j.d(P)}}}function qc(r){let e,l;return e=new ue({props:{$$slots:{default:[Fc,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&6291456&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function zc(r){let e,l;const t=[q(At),{sourceLayer:At},{paint:{"circle-color":Te(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[1]},{layout:{visibility:r[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[qc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new gt({props:n}),e.$on("click",Ec),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&451?oe(t,[o&0&&ie(q(At)),o&0&&{sourceLayer:At},o&448&&{paint:{"circle-color":Te(["get","severity"],[1,2,3],[s[6],s[7],s[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&2&&{filter:s[1]},o&1&&{layout:{visibility:s[0].show?"visible":"none"}},t[5],t[6]]):{};o&4194304&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Hc(r){let e,l,t,n,s,o;function u(a){r[10](a)}let f={$$slots:{right:[Oc],default:[Mc]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0].show&&yl(r);return s=new be({props:{url:`pmtiles://${de()}/v1/${At}.pmtiles`,$$slots:{default:[zc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&4194304&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0].show,W(()=>l=!1)),e.$set($),a[0].show?i?(i.p(a,c),c&1&&g(i,1)):(i=yl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&4194307&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let At="stats19";function Bc(r){let[e,l,t]=r.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Cl(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function Ec(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function Uc(r,e,l){let t,n,s=["pedestrians","cyclists","horseRiders","other"],o={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function u(P){return P.show?`${s.filter(H=>P[H]).join(",")}/${P.minYear}/${P.maxYear}`:null}let f=ht(At,o,u,Bc);X(r,f,P=>l(0,n=P));function i(P,N,H,se,A,J){let ee=["any"];return n.pedestrians&&ee.push(["get","pedestrian"]),n.cyclists&&ee.push(["get","cyclist"]),n.horseRiders&&ee.push(["get","horse_rider"]),n.other&&ee.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],ee]}let a={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},$={1:"Fatal",2:"Serious",3:"Slight"},_=x.sequential_low_to_high[4],y=x.sequential_low_to_high[2],S=x.sequential_low_to_high[0],C=[["Fatal",_],["Serious",y],["Slight",S]];function O(P){r.$$.not_equal(n.show,P)&&(n.show=P,f.set(n))}function G(P){r.$$.not_equal(n.pedestrians,P)&&(n.pedestrians=P,f.set(n))}function D(P){r.$$.not_equal(n.cyclists,P)&&(n.cyclists=P,f.set(n))}function R(P){r.$$.not_equal(n.horseRiders,P)&&(n.horseRiders=P,f.set(n))}function M(P){r.$$.not_equal(n.other,P)&&(n.other=P,f.set(n))}function I(){n.minYear=Bt(this.value),f.set(n)}function j(){n.maxYear=Bt(this.value),f.set(n)}return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=i(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,f,a,c,$,_,y,S,C,O,G,D,R,M,I,j]}class Wc extends K{constructor(e){super(),Z(this,e,Uc,Hc,Q,{})}}function Yc(r){let e;return{c(){e=v("Vehicle counts")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Jc(r){let e;return{c(){e=v(`DfT road statistics
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Vc(r){let e;return{c(){e=v("methodology")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Qc(r){let e,l,t,n,s,o,u,f,i,a,c;return t=new te({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Jc]},$$scope:{ctx:r}}}),s=new te({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),a=new Ae({}),{c(){e=T("p"),l=v("AADF (annual average daily flow) data from "),b(t.$$.fragment),n=v(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(s.$$.fragment),o=v(" for details and caveats about the measurements."),u=L(),f=T("p"),f.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,i=L(),b(a.$$.fragment)},m($,_){p($,e,_),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),p($,u,_),p($,f,_),p($,i,_),k(a,$,_),c=!0},p($,_){const y={};_&128&&(y.$$scope={dirty:_,ctx:$}),t.$set(y);const S={};_&128&&(S.$$scope={dirty:_,ctx:$}),s.$set(S)},i($){c||(g(t.$$.fragment,$),g(s.$$.fragment,$),g(a.$$.fragment,$),c=!0)},o($){d(t.$$.fragment,$),d(s.$$.fragment,$),d(a.$$.fragment,$),c=!1},d($){$&&(m(e),m(u),m(f),m(i)),w(t),w(s),w(a,$)}}}function Kc(r){let e,l,t;return l=new ce({props:{$$slots:{default:[Qc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&128&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Ll(r){let e,l;return e=new He({props:{colorScale:r[1],limits:r[3]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:le,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Zc(r){let e,l=r[6].location+"",t,n,s,o,u=r[6].year+"",f,i,a,c=r[6].motor_vehicles.toLocaleString()+"",$,_,y,S,C=r[6].year+"",O,G,D,R=r[6].pedal_cycles.toLocaleString()+"",M,I,j,P,N,H=r[6].method+"",se;return{c(){e=T("h2"),t=v(l),n=L(),s=T("p"),o=v("Total motor vehicles ("),f=v(u),i=v(` AADF):
        `),a=T("b"),$=v(c),_=L(),y=T("p"),S=v("Total pedal cycles ("),O=v(C),G=v(` AADF):
        `),D=T("b"),M=v(R),I=L(),j=T("p"),P=v("Count method: "),N=T("b"),se=v(H)},m(A,J){p(A,e,J),h(e,t),p(A,n,J),p(A,s,J),h(s,o),h(s,f),h(s,i),h(s,a),h(a,$),p(A,_,J),p(A,y,J),h(y,S),h(y,O),h(y,G),h(y,D),h(D,M),p(A,I,J),p(A,j,J),h(j,P),h(j,N),h(N,se)},p(A,J){J&64&&l!==(l=A[6].location+"")&&F(t,l),J&64&&u!==(u=A[6].year+"")&&F(f,u),J&64&&c!==(c=A[6].motor_vehicles.toLocaleString()+"")&&F($,c),J&64&&C!==(C=A[6].year+"")&&F(O,C),J&64&&R!==(R=A[6].pedal_cycles.toLocaleString()+"")&&F(M,R),J&64&&H!==(H=A[6].method+"")&&F(se,H)},d(A){A&&(m(e),m(n),m(s),m(_),m(y),m(I),m(j))}}}function Xc(r){let e,l;return e=new ue({props:{$$slots:{default:[Zc,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function xc(r){let e,l;const t=[q(Gt),{sourceLayer:Gt},{paint:{"circle-color":Te(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Xc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new gt({props:n}),e.$on("click",t$),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?oe(t,[o&0&&ie(q(Gt)),o&0&&{sourceLayer:Gt},o&6&&{paint:{"circle-color":Te(["get","motor_vehicles"],s[2],s[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&128&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function e$(r){let e,l,t,n,s,o;function u(a){r[5](a)}let f={$$slots:{right:[Kc],default:[Yc]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0]&&Ll(r);return s=new be({props:{url:`pmtiles://${de()}/v1/${Gt}.pmtiles`,$$slots:{default:[xc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&128&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],W(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=Ll(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&129&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Gt="vehicle_counts";function t$(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function n$(r,e,l){let t,n=x.sequential_low_to_high,s=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],u=Ce(Gt);X(r,u,i=>l(0,t=i));function f(i){t=i,u.set(t)}return[t,n,s,o,u,f]}class l$ extends K{constructor(e){super(),Z(this,e,n$,e$,Q,{})}}function Ml(r,e,l){const t=r.slice();return t[6]=e[l],t}function s$(r){let e;return{c(){e=v("Issues & Conflicts")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function r$(r){let e,l,t;return{c(){e=T("p"),e.textContent=`Critical issues and policy conflicts from the Design Assistance Log.
        This is internally collected data.`,l=L(),t=T("p"),t.textContent=`This layer is manually copied from a copy of the DA Log. The data is
        recent as of 10 June 2024.`},m(n,s){p(n,e,s),p(n,l,s),p(n,t,s)},p:le,d(n){n&&(m(e),m(l),m(t))}}}function o$(r){let e,l,t;return l=new ce({props:{$$slots:{default:[r$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Il(r){let e,l;return e=new Ut({props:{rows:r[3]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:le,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function i$(r){let e,l=r[5]["Issue ID"]+"",t,n,s=r[5].Code+"",o,u,f,i=r[5]["Issue Stage"]+"",a;return{c(){e=T("h2"),t=v(l),n=v(" - "),o=v(s),u=L(),f=T("p"),a=v(i)},m(c,$){p(c,e,$),h(e,t),h(e,n),h(e,o),p(c,u,$),p(c,f,$),h(f,a)},p(c,$){$&32&&l!==(l=c[5]["Issue ID"]+"")&&F(t,l),$&32&&s!==(s=c[5].Code+"")&&F(o,s),$&32&&i!==(i=c[5]["Issue Stage"]+"")&&F(a,i)},d(c){c&&(m(e),m(u),m(f))}}}function Nl(r){let e,l=r[6]+"",t,n,s,o=r[5][r[6]]+"",u,f;return{c(){e=T("p"),t=v(l),n=v(`:
            `),s=T("b"),u=v(o),f=L()},m(i,a){p(i,e,a),h(e,t),h(e,n),h(e,s),h(s,u),h(e,f)},p(i,a){a&32&&o!==(o=i[5][i[6]]+"")&&F(u,o)},d(i){i&&m(e)}}}function f$(r){let e,l=Pe(r[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Nl(Ml(r,l,n));return{c(){e=T("div");for(let n=0;n<t.length;n+=1)t[n].c();me(e,"max-width","30vw"),me(e,"max-height","60vh"),me(e,"overflow","auto")},m(n,s){p(n,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,s){if(s&36){l=Pe(n[2]);let o;for(o=0;o<l.length;o+=1){const u=Ml(n,l,o);t[o]?t[o].p(u,s):(t[o]=Nl(u),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&m(e),nt(t,n)}}}function a$(r){let e,l,t,n;return e=new ue({props:{openOn:"hover",$$slots:{default:[i$,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[f$,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(s,o){k(e,s,o),p(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&544&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const f={};o&544&&(f.$$scope={dirty:o,ctx:s}),t.$set(f)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&m(l),w(e,s),w(t,s)}}}function u$(r){let e,l;const t=[q(en),{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[a$]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new gt({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&9?oe(t,[o&0&&ie(q(en)),o&8&&{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(s[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[3],t[4]]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function c$(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[o$],default:[s$]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new fe({props:f}),E.push(()=>U(e,"checked",u));let i=r[0]&&Il(r);return s=new dt({props:{data:`${Et()}/v1/problems.geojson.gz`,$$slots:{default:[u$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),i&&i.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&512&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],W(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=Il(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&($e(),d(i,1,1,()=>{i=null}),pe());const _={};c&513&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let en="problems";function $$(r,e,l){let t,n=Ce(en);X(r,n,f=>l(0,t=f));let s=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],o=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function u(f){t=f,n.set(t)}return[t,n,s,o,u]}class p$ extends K{constructor(e){super(),Z(this,e,$$,c$,Q,{})}}function m$(r){let e;function l(s,o){return s[2]<=100?d$:g$}let t=l(r),n=t(r);return{c(){n.c(),e=Oe()},m(s,o){n.m(s,o),p(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},i:le,o:le,d(s){s&&m(e),n.d(s)}}}function _$(r){let e,l;return e=new lt({props:{$$slots:{default:[h$]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function g$(r){let e;return{c(){e=T("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){p(l,e,t)},p:le,d(l){l&&m(e)}}}function d$(r){let e,l,t;return{c(){e=T("label"),l=v(`Downloading scheme data
      `),t=T("progress"),t.value=r[2],B(t,"class","svelte-q3473n")},m(n,s){p(n,e,s),h(e,l),h(e,t)},p(n,s){s&4&&(t.value=n[2])},d(n){n&&m(e)}}}function h$(r){let e;return{c(){e=v("Load latest scheme data")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function b$(r){let e,l,t,n;const s=[_$,m$],o=[];function u(f,i){return f[0]?f[1]?1:-1:0}return~(e=u(r))&&(l=o[e]=s[e](r)),{c(){l&&l.c(),t=Oe()},m(f,i){~e&&o[e].m(f,i),p(f,t,i),n=!0},p(f,[i]){let a=e;e=u(f),e===a?~e&&o[e].p(f,i):(l&&($e(),d(o[a],1,1,()=>{o[a]=null}),pe()),~e?(l=o[e],l?l.p(f,i):(l=o[e]=s[e](f),l.c()),g(l,1),l.m(t.parentNode,t)):l=null)},i(f){n||(g(l),n=!0)},o(f){d(l),n=!1},d(f){f&&m(t),~e&&o[e].d(f)}}}function k$(r,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),s=!0,o=0;async function u(){let i=await Ns(`${Et()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,o=c)});l(2,o=100);let a=new TextDecoder().decode(i);t("all_schemes_output.geojson",a),l(1,s=!1)}fn(async()=>{n&&await u()});async function f(){l(0,n=!0),await u()}return r.$$set=i=>{"loadFile"in i&&l(4,t=i.loadFile)},[n,s,o,f,t]}class w$ extends K{constructor(e){super(),Z(this,e,k$,b$,Q,{loadFile:4})}}const Qt=qe({type:"FeatureCollection",features:[],schemes:{}}),tn=qe(new Map),Pl=qe(""),Ol=qe(""),nn=qe({type:"FeatureCollection",features:[],schemes:{}}),ln=qe(new Map),Rl=qe(""),Dl=qe("");function v$(r){let e={type:"FeatureCollection",features:[],schemes:{},notes:r.notes},l=new Map,t={type:"FeatureCollection",features:[],schemes:{},notes:r.notes},n=new Map;for(let[s,o]of Object.entries(r.schemes))o.pipeline?(n.set(s,o),t.schemes[s]=o):(l.set(s,o),e.schemes[s]=o);for(let s of r.features){if(!y$(s))continue;let o=s.properties.scheme_reference,u=l.has(o),i=(u?l:n).get(o);i.browse&&(s.properties.funding_programme=i.browse.funding_programme,s.properties.current_milestone=i.browse.current_milestone);let a=u?e:t;s.id=a.features.length+1,a.features.push(s)}Qt.set(e),tn.set(l),nn.set(t),ln.set(n)}function y$(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}const sn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function S$(r){let e;return{c(){e=v("Filters")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function T$(r){let e;return{c(){e=v("Reset all filters")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function C$(r){let e;return{c(){e=v("Clear")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function L$(r){let e,l,t,n,s,o;return t=new lt({props:{$$slots:{default:[C$]},$$scope:{ctx:r}}}),t.$on("click",r[20]),{c(){e=T("input"),l=L(),b(t.$$.fragment),B(e,"type","text"),B(e,"class","govuk-input govuk-input--width-10"),B(e,"id","filterInterventionText")},m(u,f){p(u,e,f),Qe(e,r[1]),p(u,l,f),k(t,u,f),n=!0,s||(o=tt(e,"input",r[19]),s=!0)},p(u,f){f&2&&e.value!==u[1]&&Qe(e,u[1]);const i={};f&134217728&&(i.$$scope={dirty:f,ctx:u}),t.$set(i)},i(u){n||(g(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(m(e),m(l)),w(t,u),s=!1,o()}}}function M$(r){let e;return{c(){e=v("Clear")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function I$(r){let e,l,t,n,s,o;return t=new lt({props:{$$slots:{default:[M$]},$$scope:{ctx:r}}}),t.$on("click",r[22]),{c(){e=T("input"),l=L(),b(t.$$.fragment),B(e,"type","text"),B(e,"class","govuk-input govuk-input--width-10"),B(e,"id","filterSchemeText")},m(u,f){p(u,e,f),Qe(e,r[0]),p(u,l,f),k(t,u,f),n=!0,s||(o=tt(e,"input",r[21]),s=!0)},p(u,f){f&1&&e.value!==u[0]&&Qe(e,u[0]);const i={};f&134217728&&(i.$$scope={dirty:f,ctx:u}),t.$set(i)},i(u){n||(g(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(m(e),m(l)),w(t,u),s=!1,o()}}}function N$(r){let e;return{c(){e=v("Done")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function P$(r){let e,l,t,n,s=r[8].interventions.toLocaleString()+"",o,u,f,i,a=r[7].size.toLocaleString()+"",c,$,_,y,S,C=jl(r[8].totalLength).toFixed(1)+"",O,G,D,R,M,I,j,P,N,H,se,A,J,ee,Le,Ie,ve,Y,ke,_e;R=new lt({props:{$$slots:{default:[T$]},$$scope:{ctx:r}}}),R.$on("click",r[12]);function ft(z){r[16](z)}let st={label:"Authority or region",choices:r[9],emptyOption:!0};r[3]!==void 0&&(st.value=r[3]),I=new ct({props:st}),E.push(()=>U(I,"value",ft));function ge(z){r[17](z)}let Be={label:"Funding programme",choices:r[10],emptyOption:!0};r[4]!==void 0&&(Be.value=r[4]),N=new ct({props:Be}),E.push(()=>U(N,"value",ge));function Re(z){r[18](z)}let De={label:"Current milestone",choices:r[11],emptyOption:!0};return r[5]!==void 0&&(De.value=r[5]),A=new ct({props:De}),E.push(()=>U(A,"value",Re)),Le=new vn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[L$]},$$scope:{ctx:r}}}),ve=new vn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[I$]},$$scope:{ctx:r}}}),ke=new Ps({props:{$$slots:{default:[N$]},$$scope:{ctx:r}}}),ke.$on("click",r[23]),{c(){e=T("p"),e.textContent="Showing:",l=L(),t=T("ul"),n=T("li"),o=v(s),u=v(" interventions"),f=L(),i=T("li"),c=v(a),$=v(" schemes"),_=L(),y=T("li"),S=v("total route length of "),O=v(C),G=v(" miles"),D=L(),b(R.$$.fragment),M=L(),b(I.$$.fragment),P=L(),b(N.$$.fragment),se=L(),b(A.$$.fragment),ee=L(),b(Le.$$.fragment),Ie=L(),b(ve.$$.fragment),Y=L(),b(ke.$$.fragment)},m(z,V){p(z,e,V),p(z,l,V),p(z,t,V),h(t,n),h(n,o),h(n,u),h(t,f),h(t,i),h(i,c),h(i,$),h(t,_),h(t,y),h(y,S),h(y,O),h(y,G),p(z,D,V),k(R,z,V),p(z,M,V),k(I,z,V),p(z,P,V),k(N,z,V),p(z,se,V),k(A,z,V),p(z,ee,V),k(Le,z,V),p(z,Ie,V),k(ve,z,V),p(z,Y,V),k(ke,z,V),_e=!0},p(z,V){(!_e||V&256)&&s!==(s=z[8].interventions.toLocaleString()+"")&&F(o,s),(!_e||V&128)&&a!==(a=z[7].size.toLocaleString()+"")&&F(c,a),(!_e||V&256)&&C!==(C=jl(z[8].totalLength).toFixed(1)+"")&&F(O,C);const we={};V&134217728&&(we.$$scope={dirty:V,ctx:z}),R.$set(we);const he={};V&512&&(he.choices=z[9]),!j&&V&8&&(j=!0,he.value=z[3],W(()=>j=!1)),I.$set(he);const Ne={};V&1024&&(Ne.choices=z[10]),!H&&V&16&&(H=!0,Ne.value=z[4],W(()=>H=!1)),N.$set(Ne);const ye={};V&2048&&(ye.choices=z[11]),!J&&V&32&&(J=!0,ye.value=z[5],W(()=>J=!1)),A.$set(ye);const Ft={};V&134217730&&(Ft.$$scope={dirty:V,ctx:z}),Le.$set(Ft);const qt={};V&134217729&&(qt.$$scope={dirty:V,ctx:z}),ve.$set(qt);const zt={};V&134217728&&(zt.$$scope={dirty:V,ctx:z}),ke.$set(zt)},i(z){_e||(g(R.$$.fragment,z),g(I.$$.fragment,z),g(N.$$.fragment,z),g(A.$$.fragment,z),g(Le.$$.fragment,z),g(ve.$$.fragment,z),g(ke.$$.fragment,z),_e=!0)},o(z){d(R.$$.fragment,z),d(I.$$.fragment,z),d(N.$$.fragment,z),d(A.$$.fragment,z),d(Le.$$.fragment,z),d(ve.$$.fragment,z),d(ke.$$.fragment,z),_e=!1},d(z){z&&(m(e),m(l),m(t),m(D),m(M),m(P),m(se),m(ee),m(Ie),m(Y)),w(R,z),w(I,z),w(N,z),w(A,z),w(Le,z),w(ve,z),w(ke,z)}}}function O$(r){let e,l,t,n,s;e=new lt({props:{$$slots:{default:[S$]},$$scope:{ctx:r}}}),e.$on("click",r[15]);function o(f){r[24](f)}let u={title:`Filter ${r[2]} schemes`,$$slots:{default:[P$]},$$scope:{ctx:r}};return r[6]!==void 0&&(u.open=r[6]),t=new $s({props:u}),E.push(()=>U(t,"open",o)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(f,i){k(e,f,i),p(f,l,i),k(t,f,i),s=!0},p(f,[i]){const a={};i&134217728&&(a.$$scope={dirty:i,ctx:f}),e.$set(a);const c={};i&4&&(c.title=`Filter ${f[2]} schemes`),i&134221819&&(c.$$scope={dirty:i,ctx:f}),!n&&i&64&&(n=!0,c.open=f[6],W(()=>n=!1)),t.$set(c)},i(f){s||(g(e.$$.fragment,f),g(t.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),s=!1},d(f){f&&m(l),w(e,f),w(t,f)}}}function jl(r){return r*621371e-9}function R$(r,e,l){let{source:t}=e,{schemes:n}=e,{schemesGj:s}=e,{filterSchemeText:o}=e,{filterInterventionText:u}=e,f=!1,i=new Set,a={interventions:0,totalLength:0},c=[],$="",_=[],y=new Set(sn.slice(0,-1)),S="",C=[],O="";fn(()=>{var ve,Y,ke;let ee=new Set,Le=new Set,Ie=new Set;for(let _e of n.values())(ve=_e.browse)!=null&&ve.authority_or_region&&ee.add(_e.browse.authority_or_region),(Y=_e.browse)!=null&&Y.funding_programme&&Le.add(_e.browse.funding_programme),(ke=_e.browse)!=null&&ke.current_milestone&&Ie.add(_e.browse.current_milestone);l(9,c=Array.from(ee.entries())),c.sort(),l(10,_=sn.map(_e=>[_e,_e])),l(11,C=Array.from(Ie.entries())),C.sort()});function G(ee,Le,Ie,ve,Y){let ke=ee.toLowerCase(),_e=Le.toLowerCase(),ft=ge=>{var Be,Re,De,z,V,we;if(ke&&!((Be=ge.properties.name)!=null&&Be.toLowerCase().includes(ke))&&!((Re=ge.properties.description)!=null&&Re.toLowerCase().includes(ke)))return!1;if(_e||Ie||ve||Y){let he=n.get(ge.properties.scheme_reference);if(Ie&&((De=he.browse)==null?void 0:De.authority_or_region)!=Ie||ve&&ve!=="Other"&&((z=he.browse)==null?void 0:z.funding_programme)!=ve||ve==="Other"&&y.has(((V=he.browse)==null?void 0:V.funding_programme)??"")||Y&&((we=he.browse)==null?void 0:we.current_milestone)!=Y||_e&&!he.scheme_reference.toLowerCase().includes(_e)&&!(he.scheme_name??"").toLowerCase().includes(_e))return!1}return!0};l(7,i=new Set(s.features.filter(ft).map(ge=>ge.properties.scheme_reference))),l(8,a={interventions:0,totalLength:0});let st=ge=>{var Be,Re;return!(!i.has(ge.properties.scheme_reference)||ke&&!((Be=ge.properties.name)!=null&&Be.toLowerCase().includes(ke))&&!((Re=ge.properties.description)!=null&&Re.toLowerCase().includes(ke)))};for(let ge of s.features)st(ge)?(delete ge.properties.hide_while_editing,l(8,a.interventions++,a),ge.geometry.type=="LineString"&&ge.properties.length_meters&&l(8,a.totalLength+=ge.properties.length_meters,a)):ge.properties.hide_while_editing=!0;l(13,s),l(8,a)}function D(){l(3,$=""),l(4,S=""),l(5,O=""),l(1,u=""),l(0,o="")}const R=()=>l(6,f=!0);function M(ee){$=ee,l(3,$)}function I(ee){S=ee,l(4,S)}function j(ee){O=ee,l(5,O)}function P(){u=this.value,l(1,u)}const N=()=>l(1,u="");function H(){o=this.value,l(0,o)}const se=()=>l(0,o=""),A=()=>l(6,f=!1);function J(ee){f=ee,l(6,f)}return r.$$set=ee=>{"source"in ee&&l(2,t=ee.source),"schemes"in ee&&l(14,n=ee.schemes),"schemesGj"in ee&&l(13,s=ee.schemesGj),"filterSchemeText"in ee&&l(0,o=ee.filterSchemeText),"filterInterventionText"in ee&&l(1,u=ee.filterInterventionText)},r.$$.update=()=>{r.$$.dirty&59&&G(u,o,$,S,O)},[o,u,t,$,S,O,f,i,a,c,_,C,D,s,n,R,M,I,j,P,N,H,se,A,J]}class ws extends K{constructor(e){super(),Z(this,e,R$,O$,Q,{source:2,schemes:14,schemesGj:13,filterSchemeText:0,filterInterventionText:1})}}function Al(r){let e,l,t,n=r[0].status+"",s;return{c(){e=T("p"),l=v("Status: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[0].status+"")&&F(s,n)},d(o){o&&m(e)}}}function Gl(r){let e,l,t,n=r[0].timescale+"",s;return{c(){e=T("p"),l=v("Timescale: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[0].timescale+"")&&F(s,n)},d(o){o&&m(e)}}}function Fl(r){let e,l,t,n=r[0].timescale_year+"",s;return{c(){e=T("p"),l=v("Estimated completion year: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[0].timescale_year+"")&&F(s,n)},d(o){o&&m(e)}}}function ql(r){let e,l,t,n=r[0].year_published+"",s;return{c(){e=T("p"),l=v("Scheme most recently published: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[0].year_published+"")&&F(s,n)},d(o){o&&m(e)}}}function zl(r){let e,l,t,n=r[0].year_consulted+"",s;return{c(){e=T("p"),l=v("Scheme most recently consulted on: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[0].year_consulted+"")&&F(s,n)},d(o){o&&m(e)}}}function D$(r){let e,l,t,n,s,o=r[0].status&&Al(r),u=r[0].timescale&&Gl(r),f=r[0].timescale_year&&Fl(r),i=r[0].year_published&&ql(r),a=r[0].year_consulted&&zl(r);return{c(){o&&o.c(),e=L(),u&&u.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=L(),a&&a.c(),s=Oe()},m(c,$){o&&o.m(c,$),p(c,e,$),u&&u.m(c,$),p(c,l,$),f&&f.m(c,$),p(c,t,$),i&&i.m(c,$),p(c,n,$),a&&a.m(c,$),p(c,s,$)},p(c,[$]){c[0].status?o?o.p(c,$):(o=Al(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[0].timescale?u?u.p(c,$):(u=Gl(c),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),c[0].timescale_year?f?f.p(c,$):(f=Fl(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),c[0].year_published?i?i.p(c,$):(i=ql(c),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),c[0].year_consulted?a?a.p(c,$):(a=zl(c),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},i:le,o:le,d(c){c&&(m(e),m(l),m(t),m(n),m(s)),o&&o.d(c),u&&u.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c)}}}function j$(r,e,l){let{props:t}=e;return r.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class vs extends K{constructor(e){super(),Z(this,e,j$,D$,Q,{props:0})}}function Hl(r){let e,l,t,n=r[0].budget.toLocaleString()+"",s,o;return{c(){e=T("p"),l=v("Cost: "),t=T("b"),s=v(n),o=v(`
    GBP`)},m(u,f){p(u,e,f),h(e,l),h(e,t),h(t,s),h(e,o)},p(u,f){f&1&&n!==(n=u[0].budget.toLocaleString()+"")&&F(s,n)},d(u){u&&m(e)}}}function Bl(r){let e;return{c(){e=T("p"),e.textContent="Development is fully funded"},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function El(r){let e;return{c(){e=T("p"),e.textContent="Construction is fully funded"},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ul(r){let e,l,t,n;return{c(){e=T("p"),l=v("Funding sources: "),t=T("b"),n=v(r[1])},m(s,o){p(s,e,o),h(e,l),h(e,t),h(t,n)},p(s,o){o&2&&F(n,s[1])},d(s){s&&m(e)}}}function A$(r){let e,l,t,n,s=r[0].budget&&Hl(r),o=r[0].development_funded&&Bl(),u=r[0].construction_funded&&El(),f=r[1]&&Ul(r);return{c(){s&&s.c(),e=L(),o&&o.c(),l=L(),u&&u.c(),t=L(),f&&f.c(),n=Oe()},m(i,a){s&&s.m(i,a),p(i,e,a),o&&o.m(i,a),p(i,l,a),u&&u.m(i,a),p(i,t,a),f&&f.m(i,a),p(i,n,a)},p(i,[a]){i[0].budget?s?s.p(i,a):(s=Hl(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),i[0].development_funded?o||(o=Bl(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),i[0].construction_funded?u||(u=El(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),i[1]?f?f.p(i,a):(f=Ul(i),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null)},i:le,o:le,d(i){i&&(m(e),m(l),m(t),m(n)),s&&s.d(i),o&&o.d(i),u&&u.d(i),f&&f.d(i)}}}function G$(r){if(!r.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])r.funding_sources[l]&&e.push(l.toUpperCase());return r.funding_sources.other&&e.push(r.funding_sources.other),e.join(", ")}function F$(r,e,l){let t,{props:n}=e;return r.$$set=s=>{"props"in s&&l(0,n=s.props)},r.$$.update=()=>{r.$$.dirty&1&&l(1,t=G$(n))},[n,t]}class ys extends K{constructor(e){super(),Z(this,e,F$,A$,Q,{props:0})}}function Kt(r){const e=r.slice(),l=e[3].pipeline;return e[9]=l,e}function Zt(r){const e=r.slice(),l=e[0].pipeline;return e[9]=l,e}function Wl(r){let e,l,t,n=Sn(r[0].length_meters)+"",s;return{c(){e=T("p"),l=v("Length: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=Sn(o[0].length_meters)+"")&&F(s,n)},d(o){o&&m(e)}}}function Yl(r){let e,l=rt(r[0].description,r[2])+"";return{c(){e=T("p")},m(t,n){p(t,e,n),e.innerHTML=l},p(t,n){n&5&&l!==(l=rt(t[0].description,t[2])+"")&&(e.innerHTML=l)},d(t){t&&m(e)}}}function Jl(r){let e,l,t,n,s,o,u,f=r[9].atf4_type&&Vl(r),i=r[9].accuracy&&Ql(r),a=r[9].is_alternative&&Kl();return n=new ys({props:{props:r[9]}}),o=new vs({props:{props:r[9]}}),{c(){f&&f.c(),e=L(),i&&i.c(),l=L(),a&&a.c(),t=L(),b(n.$$.fragment),s=L(),b(o.$$.fragment)},m(c,$){f&&f.m(c,$),p(c,e,$),i&&i.m(c,$),p(c,l,$),a&&a.m(c,$),p(c,t,$),k(n,c,$),p(c,s,$),k(o,c,$),u=!0},p(c,$){c[9].atf4_type?f?f.p(c,$):(f=Vl(c),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null),c[9].accuracy?i?i.p(c,$):(i=Ql(c),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),c[9].is_alternative?a||(a=Kl(),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null);const _={};$&1&&(_.props=c[9]),n.$set(_);const y={};$&1&&(y.props=c[9]),o.$set(y)},i(c){u||(g(n.$$.fragment,c),g(o.$$.fragment,c),u=!0)},o(c){d(n.$$.fragment,c),d(o.$$.fragment,c),u=!1},d(c){c&&(m(e),m(l),m(t),m(s)),f&&f.d(c),i&&i.d(c),a&&a.d(c),w(n,c),w(o,c)}}}function Vl(r){let e,l,t,n=r[9].atf4_type+"",s;return{c(){e=T("p"),l=v("ATF4 type: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[9].atf4_type+"")&&F(s,n)},d(o){o&&m(e)}}}function Ql(r){let e,l,t,n=r[9].accuracy+"",s;return{c(){e=T("p"),l=v("Accuracy: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[9].accuracy+"")&&F(s,n)},d(o){o&&m(e)}}}function Kl(r){let e;return{c(){e=T("p"),e.textContent="Represents an alternative route"},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Zl(r){var o;let e,l,t,n=((o=r[3].browse)==null?void 0:o.capital_scheme_id)+"",s;return{c(){e=T("p"),l=v("Capital scheme ID: "),t=T("b"),s=v(n)},m(u,f){p(u,e,f),h(e,l),h(e,t),h(t,s)},p(u,f){var i;f&8&&n!==(n=((i=u[3].browse)==null?void 0:i.capital_scheme_id)+"")&&F(s,n)},d(u){u&&m(e)}}}function Xl(r){var o;let e,l,t,n=((o=r[3].browse)==null?void 0:o.current_milestone)+"",s;return{c(){e=T("p"),l=v("Current milestone: "),t=T("b"),s=v(n)},m(u,f){p(u,e,f),h(e,l),h(e,t),h(t,s)},p(u,f){var i;f&8&&n!==(n=((i=u[3].browse)==null?void 0:i.current_milestone)+"")&&F(s,n)},d(u){u&&m(e)}}}function xl(r){let e,l,t,n,s,o,u,f=r[9].scheme_type&&es(r),i=r[9].atf4_lead_type&&ts(r),a=r[9].scheme_description&&ns(r);return n=new ys({props:{props:r[9]}}),o=new vs({props:{props:r[9]}}),{c(){f&&f.c(),e=L(),i&&i.c(),l=L(),a&&a.c(),t=L(),b(n.$$.fragment),s=L(),b(o.$$.fragment)},m(c,$){f&&f.m(c,$),p(c,e,$),i&&i.m(c,$),p(c,l,$),a&&a.m(c,$),p(c,t,$),k(n,c,$),p(c,s,$),k(o,c,$),u=!0},p(c,$){c[9].scheme_type?f?f.p(c,$):(f=es(c),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null),c[9].atf4_lead_type?i?i.p(c,$):(i=ts(c),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),c[9].scheme_description?a?a.p(c,$):(a=ns(c),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null);const _={};$&8&&(_.props=c[9]),n.$set(_);const y={};$&8&&(y.props=c[9]),o.$set(y)},i(c){u||(g(n.$$.fragment,c),g(o.$$.fragment,c),u=!0)},o(c){d(n.$$.fragment,c),d(o.$$.fragment,c),u=!1},d(c){c&&(m(e),m(l),m(t),m(s)),f&&f.d(c),i&&i.d(c),a&&a.d(c),w(n,c),w(o,c)}}}function es(r){let e,l,t,n=r[9].scheme_type+"",s;return{c(){e=T("p"),l=v("Scheme type: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&8&&n!==(n=o[9].scheme_type+"")&&F(s,n)},d(o){o&&m(e)}}}function ts(r){let e,l,t,n=r[9].atf4_lead_type+"",s;return{c(){e=T("p"),l=v("ATF4 lead type: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&8&&n!==(n=o[9].atf4_lead_type+"")&&F(s,n)},d(o){o&&m(e)}}}function ns(r){let e,l,t=r[9].scheme_description+"",n;return{c(){e=T("p"),l=v("Descripton: "),n=v(t)},m(s,o){p(s,e,o),h(e,l),h(e,n)},p(s,o){o&8&&t!==(t=s[9].scheme_description+"")&&F(n,t)},d(s){s&&m(e)}}}function q$(r){let e;return{c(){e=v("Zoom to show entire scheme")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function z$(r){let e;return{c(){e=v("Edit a copy of this scheme")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function H$(r){var Ft,qt,zt,pn;let e,l,t,n=rt(r[0].name,r[2])+"",s,o=r[0].intervention_type+"",u,f,i,a,c,$,_,y,S,C,O,G=rt(r[3].scheme_name??"",r[1])+"",D,R,M=rt(r[0].scheme_reference,r[1])+"",I,j,P,N,H,se=((Ft=r[3].browse)==null?void 0:Ft.authority_or_region)+"",A,J,ee,Le,Ie,ve,Y=((qt=r[3].browse)==null?void 0:qt.funding_programme)+"",ke,_e,ft,st,ge,Be,Re,De,z=r[0].length_meters&&Wl(r),V=r[0].description&&Yl(r),we=r[0].pipeline&&Jl(Zt(r)),he=((zt=r[3].browse)==null?void 0:zt.capital_scheme_id)&&Zl(r),Ne=((pn=r[3].browse)==null?void 0:pn.current_milestone)&&Xl(r),ye=r[3].pipeline&&xl(Kt(r));return ge=new lt({props:{$$slots:{default:[q$]},$$scope:{ctx:r}}}),ge.$on("click",r[4]),Re=new lt({props:{$$slots:{default:[z$]},$$scope:{ctx:r}}}),Re.$on("click",r[5]),{c(){e=T("div"),l=T("h2"),t=new ut(!1),s=v(" ("),u=v(o),f=v(")"),i=L(),z&&z.c(),a=L(),V&&V.c(),c=L(),we&&we.c(),$=L(),_=T("hr"),y=L(),S=T("p"),C=v("Part of scheme: "),O=new ut(!1),D=v(" ("),R=new ut(!1),I=v(")"),j=L(),P=T("p"),N=v("Authority or region: "),H=T("b"),A=v(se),J=L(),he&&he.c(),ee=L(),Le=T("p"),Ie=v("Funding programme: "),ve=T("b"),ke=v(Y),_e=L(),Ne&&Ne.c(),ft=L(),ye&&ye.c(),st=L(),b(ge.$$.fragment),Be=L(),b(Re.$$.fragment),t.a=s,O.a=D,R.a=I,me(e,"max-width","30vw"),me(e,"max-height","60vh"),me(e,"overflow","auto")},m(ae,Me){p(ae,e,Me),h(e,l),t.m(n,l),h(l,s),h(l,u),h(l,f),h(e,i),z&&z.m(e,null),h(e,a),V&&V.m(e,null),h(e,c),we&&we.m(e,null),h(e,$),h(e,_),h(e,y),h(e,S),h(S,C),O.m(G,S),h(S,D),R.m(M,S),h(S,I),h(e,j),h(e,P),h(P,N),h(P,H),h(H,A),h(e,J),he&&he.m(e,null),h(e,ee),h(e,Le),h(Le,Ie),h(Le,ve),h(ve,ke),h(e,_e),Ne&&Ne.m(e,null),h(e,ft),ye&&ye.m(e,null),h(e,st),k(ge,e,null),h(e,Be),k(Re,e,null),De=!0},p(ae,[Me]){var gn,dn,hn,bn;(!De||Me&5)&&n!==(n=rt(ae[0].name,ae[2])+"")&&t.p(n),(!De||Me&1)&&o!==(o=ae[0].intervention_type+"")&&F(u,o),ae[0].length_meters?z?z.p(ae,Me):(z=Wl(ae),z.c(),z.m(e,a)):z&&(z.d(1),z=null),ae[0].description?V?V.p(ae,Me):(V=Yl(ae),V.c(),V.m(e,c)):V&&(V.d(1),V=null),ae[0].pipeline?we?(we.p(Zt(ae),Me),Me&1&&g(we,1)):(we=Jl(Zt(ae)),we.c(),g(we,1),we.m(e,$)):we&&($e(),d(we,1,1,()=>{we=null}),pe()),(!De||Me&10)&&G!==(G=rt(ae[3].scheme_name??"",ae[1])+"")&&O.p(G),(!De||Me&3)&&M!==(M=rt(ae[0].scheme_reference,ae[1])+"")&&R.p(M),(!De||Me&8)&&se!==(se=((gn=ae[3].browse)==null?void 0:gn.authority_or_region)+"")&&F(A,se),(dn=ae[3].browse)!=null&&dn.capital_scheme_id?he?he.p(ae,Me):(he=Zl(ae),he.c(),he.m(e,ee)):he&&(he.d(1),he=null),(!De||Me&8)&&Y!==(Y=((hn=ae[3].browse)==null?void 0:hn.funding_programme)+"")&&F(ke,Y),(bn=ae[3].browse)!=null&&bn.current_milestone?Ne?Ne.p(ae,Me):(Ne=Xl(ae),Ne.c(),Ne.m(e,ft)):Ne&&(Ne.d(1),Ne=null),ae[3].pipeline?ye?(ye.p(Kt(ae),Me),Me&8&&g(ye,1)):(ye=xl(Kt(ae)),ye.c(),g(ye,1),ye.m(e,st)):ye&&($e(),d(ye,1,1,()=>{ye=null}),pe());const mn={};Me&1024&&(mn.$$scope={dirty:Me,ctx:ae}),ge.$set(mn);const _n={};Me&1024&&(_n.$$scope={dirty:Me,ctx:ae}),Re.$set(_n)},i(ae){De||(g(we),g(ye),g(ge.$$.fragment,ae),g(Re.$$.fragment,ae),De=!0)},o(ae){d(we),d(ye),d(ge.$$.fragment,ae),d(Re.$$.fragment,ae),De=!1},d(ae){ae&&m(e),z&&z.d(),V&&V.d(),we&&we.d(),he&&he.d(),Ne&&Ne.d(),ye&&ye.d(),w(ge),w(Re)}}}function rt(r,e){return e?r.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):r}function B$(r,e,l){let t,n;X(r,an,$=>l(8,n=$));let{props:s}=e,{schemes:o}=e,{schemesGj:u}=e,{filterSchemeText:f}=e,{filterInterventionText:i}=e;function a(){let $={type:"FeatureCollection",features:u.features.filter(_=>_.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(Bs($),{padding:20,animate:!1})}function c(){var y,S;let $={type:"FeatureCollection",features:u.features.filter(C=>C.properties.scheme_reference==t.scheme_reference),schemes:{}};$.schemes[t.scheme_reference]=t;let _=((y=t.browse)==null?void 0:y.authority_or_region)||"unknown authority";Os(_,JSON.stringify($)),window.open(`scheme.html?authority=${(S=t.browse)==null?void 0:S.authority_or_region}`,"_blank")}return r.$$set=$=>{"props"in $&&l(0,s=$.props),"schemes"in $&&l(6,o=$.schemes),"schemesGj"in $&&l(7,u=$.schemesGj),"filterSchemeText"in $&&l(1,f=$.filterSchemeText),"filterInterventionText"in $&&l(2,i=$.filterInterventionText)},r.$$.update=()=>{r.$$.dirty&65&&l(3,t=o.get(s.scheme_reference))},[s,f,i,t,a,c,o,u]}class $n extends K{constructor(e){super(),Z(this,e,B$,H$,Q,{props:0,schemes:6,schemesGj:7,filterSchemeText:1,filterInterventionText:2})}}function E$(r){let e,l=r[10].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&F(t,l)},d(n){n&&m(e)}}}function U$(r){let e,l;return e=new $n({props:{props:r[10],schemesGj:r[3],schemes:r[2],filterSchemeText:r[4],filterInterventionText:r[5]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function W$(r){let e,l,t,n;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[E$,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[U$,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(s,o){k(e,s,o),p(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&3072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const f={};o&3132&&(f.$$scope={dirty:o,ctx:s}),t.$set(f)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&m(l),w(e,s),w(t,s)}}}function Y$(r){let e,l=r[10].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&F(t,l)},d(n){n&&m(e)}}}function J$(r){let e,l;return e=new $n({props:{props:r[10],schemesGj:r[3],schemes:r[2],filterSchemeText:r[4],filterInterventionText:r[5]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function V$(r){let e,l,t,n;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[Y$,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[J$,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(s,o){k(e,s,o),p(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&3072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const f={};o&3132&&(f.$$scope={dirty:o,ctx:s}),t.$set(f)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&m(l),w(e,s),w(t,s)}}}function Q$(r){let e,l=r[10].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&F(t,l)},d(n){n&&m(e)}}}function K$(r){let e,l;return e=new $n({props:{props:r[10],schemesGj:r[3],schemes:r[2],filterSchemeText:r[4],filterInterventionText:r[5]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Z$(r){let e,l,t,n;return e=new ue({props:{popupClass:"border-popup",$$slots:{default:[Q$,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),t=new ue({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[K$,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(s,o){k(e,s,o),p(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&3072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const f={};o&3132&&(f.$$scope={dirty:o,ctx:s}),t.$set(f)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&m(l),w(e,s),w(t,s)}}}function X$(r){let e,l,t,n,s,o,u,f,i,a;const c=[q(`${r[0]}-interventions-points`),{filter:["all",Tn,r[8],r[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[6],"circle-radius":Cn,"circle-opacity":ne(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let $={$$slots:{default:[W$]},$$scope:{ctx:r}};for(let M=0;M<c.length;M+=1)$=re($,c[M]);e=new gt({props:$});const _=[q(`${r[0]}-interventions-lines`),{filter:["all",Ln,r[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[6],"line-width":Ht,"line-opacity":ne(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[V$]},$$scope:{ctx:r}};for(let M=0;M<_.length;M+=1)y=re(y,_[M]);t=new Se({props:y});const S=[q(`${r[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Ht,"circle-opacity":0,"circle-stroke-color":Ke.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[1]?"visible":"none"}}];let C={};for(let M=0;M<S.length;M+=1)C=re(C,S[M]);s=new gt({props:C});const O=[q(`${r[0]}-interventions-polygons`),{filter:["all",Wt,r[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[6],"fill-opacity":ne(.2,.5)}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let G={$$slots:{default:[Z$]},$$scope:{ctx:r}};for(let M=0;M<O.length;M+=1)G=re(G,O[M]);u=new ze({props:G});const D=[q(`${r[0]}-interventions-polygons-outlines`),{filter:["all",Wt,r[8]]},{paint:{"line-color":r[6],"line-opacity":.5,"line-width":.7*Ht}},{layout:{visibility:r[1]?"visible":"none"}}];let R={};for(let M=0;M<D.length;M+=1)R=re(R,D[M]);return i=new Se({props:R}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment),f=L(),b(i.$$.fragment)},m(M,I){k(e,M,I),p(M,l,I),k(t,M,I),p(M,n,I),k(s,M,I),p(M,o,I),k(u,M,I),p(M,f,I),k(i,M,I),a=!0},p(M,I){const j=I&835?oe(c,[I&1&&ie(q(`${M[0]}-interventions-points`)),I&768&&{filter:["all",Tn,M[8],M[9]]},c[2],c[3],I&64&&{paint:{"circle-color":M[6],"circle-radius":Cn,"circle-opacity":ne(1,.5)}},I&2&&{layout:{visibility:M[1]?"visible":"none"}},c[6]]):{};I&2108&&(j.$$scope={dirty:I,ctx:M}),e.$set(j);const P=I&323?oe(_,[I&1&&ie(q(`${M[0]}-interventions-lines`)),I&256&&{filter:["all",Ln,M[8]]},_[2],_[3],I&64&&{paint:{"line-color":M[6],"line-width":Ht,"line-opacity":ne(1,.5)}},I&2&&{layout:{visibility:M[1]?"visible":"none"}},_[6]]):{};I&2108&&(P.$$scope={dirty:I,ctx:M}),t.$set(P);const N=I&3?oe(S,[I&1&&ie(q(`${M[0]}-interventions-lines-endpoints`)),S[1],S[2],I&2&&{layout:{visibility:M[1]?"visible":"none"}}]):{};s.$set(N);const H=I&323?oe(O,[I&1&&ie(q(`${M[0]}-interventions-polygons`)),I&256&&{filter:["all",Wt,M[8]]},O[2],O[3],I&64&&{paint:{"fill-color":M[6],"fill-opacity":ne(.2,.5)}},I&2&&{layout:{visibility:M[1]?"visible":"none"}},O[6]]):{};I&2108&&(H.$$scope={dirty:I,ctx:M}),u.$set(H);const se=I&323?oe(D,[I&1&&ie(q(`${M[0]}-interventions-polygons-outlines`)),I&256&&{filter:["all",Wt,M[8]]},I&64&&{paint:{"line-color":M[6],"line-opacity":.5,"line-width":.7*Ht}},I&2&&{layout:{visibility:M[1]?"visible":"none"}}]):{};i.$set(se)},i(M){a||(g(e.$$.fragment,M),g(t.$$.fragment,M),g(s.$$.fragment,M),g(u.$$.fragment,M),g(i.$$.fragment,M),a=!0)},o(M){d(e.$$.fragment,M),d(t.$$.fragment,M),d(s.$$.fragment,M),d(u.$$.fragment,M),d(i.$$.fragment,M),a=!1},d(M){M&&(m(l),m(n),m(o),m(f)),w(e,M),w(t,M),w(s,M),w(u,M),w(i,M)}}}function x$(r){let e,l;return e=new dt({props:{data:r[7],$$slots:{default:[X$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&128&&(s.data=t[7]),n&2175&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ep(r,e,l){let t,{source:n}=e,{show:s}=e,{schemes:o}=e,{schemesGj:u}=e,{filterSchemeText:f}=e,{filterInterventionText:i}=e,{color:a}=e;const c=["!=",["get","hide_while_editing"],!0],$=["!=",["get","endpoint"],!0];return r.$$set=_=>{"source"in _&&l(0,n=_.source),"show"in _&&l(1,s=_.show),"schemes"in _&&l(2,o=_.schemes),"schemesGj"in _&&l(3,u=_.schemesGj),"filterSchemeText"in _&&l(4,f=_.filterSchemeText),"filterInterventionText"in _&&l(5,i=_.filterInterventionText),"color"in _&&l(6,a=_.color)},r.$$.update=()=>{r.$$.dirty&8&&l(7,t=Es(u))},[n,s,o,u,f,i,a,t,c,$]}class ls extends K{constructor(e){super(),Z(this,e,ep,x$,Q,{source:0,show:1,schemes:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function tp(r){return Ze(["get","intervention_type"],{area:Ke.area,route:Ke.route,crossing:Ke.crossing,other:Ke.other},"white")}function np(r){return[["Areas",Ke.area],["Routes",Ke.route],["Crossings",Ke.crossing],["Other",Ke.other]]}function lp(){let[r,e]=Ss(sn,x.funding_programmes);return[Ze(["get","funding_programme"],r,"grey"),e]}function sp(){let r=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,l]=Ss(r,x.current_milestone);return[Ze(["get","current_milestone"],e,"grey"),l]}function Ss(r,e){let l=[],t={},n=0;for(let s of r){let o=e[n++%e.length];t[s]=o,l.push([s,o])}return[t,l]}function ss(r,e,l){const t=r.slice();return t[31]=e[l],t}function rs(r,e,l){const t=r.slice();return t[31]=e[l],t}function rp(r){let e,l;return e=new w$({props:{loadFile:r[17]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:le,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function os(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y,S;function C(N){r[18](N)}let O={$$slots:{right:[fp],default:[op]},$$scope:{ctx:r}};r[3]!==void 0&&(O.checked=r[3]),e=new fe({props:O}),E.push(()=>U(e,"checked",C));function G(N){r[19](N)}function D(N){r[20](N)}function R(N){r[21](N)}function M(N){r[22](N)}let I={source:"ATF"};r[10]!==void 0&&(I.schemesGj=r[10]),r[9]!==void 0&&(I.schemes=r[9]),r[11]!==void 0&&(I.filterSchemeText=r[11]),r[12]!==void 0&&(I.filterInterventionText=r[12]),s=new ws({props:I}),E.push(()=>U(s,"schemesGj",G)),E.push(()=>U(s,"schemes",D)),E.push(()=>U(s,"filterSchemeText",R)),E.push(()=>U(s,"filterInterventionText",M));function j(N){r[23](N)}let P={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(P.value=r[0]),c=new ct({props:P}),E.push(()=>U(c,"value",j)),y=new Ut({props:{rows:r[7]}}),{c(){b(e.$$.fragment),t=L(),n=T("div"),b(s.$$.fragment),a=L(),b(c.$$.fragment),_=L(),b(y.$$.fragment),me(n,"display","flex"),me(n,"justify-content","space-between")},m(N,H){k(e,N,H),p(N,t,H),p(N,n,H),k(s,n,null),h(n,a),k(c,n,null),p(N,_,H),k(y,N,H),S=!0},p(N,H){const se={};H[0]&1024|H[1]&32&&(se.$$scope={dirty:H,ctx:N}),!l&&H[0]&8&&(l=!0,se.checked=N[3],W(()=>l=!1)),e.$set(se);const A={};!o&&H[0]&1024&&(o=!0,A.schemesGj=N[10],W(()=>o=!1)),!u&&H[0]&512&&(u=!0,A.schemes=N[9],W(()=>u=!1)),!f&&H[0]&2048&&(f=!0,A.filterSchemeText=N[11],W(()=>f=!1)),!i&&H[0]&4096&&(i=!0,A.filterInterventionText=N[12],W(()=>i=!1)),s.$set(A);const J={};!$&&H[0]&1&&($=!0,J.value=N[0],W(()=>$=!1)),c.$set(J);const ee={};H[0]&128&&(ee.rows=N[7]),y.$set(ee)},i(N){S||(g(e.$$.fragment,N),g(s.$$.fragment,N),g(c.$$.fragment,N),g(y.$$.fragment,N),S=!0)},o(N){d(e.$$.fragment,N),d(s.$$.fragment,N),d(c.$$.fragment,N),d(y.$$.fragment,N),S=!1},d(N){N&&(m(t),m(n),m(_)),w(e,N),w(s),w(c),w(y,N)}}}function op(r){let e;return{c(){e=v("ATF schemes")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function is(r){let e,l,t=r[31]+"",n;return{c(){e=T("li"),l=T("p"),n=v(t)},m(s,o){p(s,e,o),h(e,l),h(l,n)},p(s,o){o[0]&1024&&t!==(t=s[31]+"")&&F(n,t)},d(s){s&&m(e)}}}function ip(r){let e,l,t,n=Pe(r[10].notes??[]),s=[];for(let o=0;o<n.length;o+=1)s[o]=is(rs(r,n,o));return{c(){e=T("p"),e.textContent="Please note there are data quality caveats for all scheme data:",l=L(),t=T("ul");for(let o=0;o<s.length;o+=1)s[o].c()},m(o,u){p(o,e,u),p(o,l,u),p(o,t,u);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(t,null)},p(o,u){if(u[0]&1024){n=Pe(o[10].notes??[]);let f;for(f=0;f<n.length;f+=1){const i=rs(o,n,f);s[f]?s[f].p(i,u):(s[f]=is(i),s[f].c(),s[f].m(t,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=n.length}},d(o){o&&(m(e),m(l),m(t)),nt(s,o)}}}function fp(r){let e,l,t;return l=new ce({props:{$$slots:{default:[ip]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s[0]&1024|s[1]&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function fs(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y,S;function C(N){r[24](N)}let O={$$slots:{right:[cp],default:[ap]},$$scope:{ctx:r}};r[4]!==void 0&&(O.checked=r[4]),e=new fe({props:O}),E.push(()=>U(e,"checked",C));function G(N){r[25](N)}function D(N){r[26](N)}function R(N){r[27](N)}function M(N){r[28](N)}let I={source:"LCWIP"};r[14]!==void 0&&(I.schemesGj=r[14]),r[13]!==void 0&&(I.schemes=r[13]),r[15]!==void 0&&(I.filterSchemeText=r[15]),r[16]!==void 0&&(I.filterInterventionText=r[16]),s=new ws({props:I}),E.push(()=>U(s,"schemesGj",G)),E.push(()=>U(s,"schemes",D)),E.push(()=>U(s,"filterSchemeText",R)),E.push(()=>U(s,"filterInterventionText",M));function j(N){r[29](N)}let P={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[1]!==void 0&&(P.value=r[1]),c=new ct({props:P}),E.push(()=>U(c,"value",j)),y=new Ut({props:{rows:r[5]}}),{c(){b(e.$$.fragment),t=L(),n=T("div"),b(s.$$.fragment),a=L(),b(c.$$.fragment),_=L(),b(y.$$.fragment),me(n,"display","flex"),me(n,"justify-content","space-between")},m(N,H){k(e,N,H),p(N,t,H),p(N,n,H),k(s,n,null),h(n,a),k(c,n,null),p(N,_,H),k(y,N,H),S=!0},p(N,H){const se={};H[0]&16384|H[1]&32&&(se.$$scope={dirty:H,ctx:N}),!l&&H[0]&16&&(l=!0,se.checked=N[4],W(()=>l=!1)),e.$set(se);const A={};!o&&H[0]&16384&&(o=!0,A.schemesGj=N[14],W(()=>o=!1)),!u&&H[0]&8192&&(u=!0,A.schemes=N[13],W(()=>u=!1)),!f&&H[0]&32768&&(f=!0,A.filterSchemeText=N[15],W(()=>f=!1)),!i&&H[0]&65536&&(i=!0,A.filterInterventionText=N[16],W(()=>i=!1)),s.$set(A);const J={};!$&&H[0]&2&&($=!0,J.value=N[1],W(()=>$=!1)),c.$set(J);const ee={};H[0]&32&&(ee.rows=N[5]),y.$set(ee)},i(N){S||(g(e.$$.fragment,N),g(s.$$.fragment,N),g(c.$$.fragment,N),g(y.$$.fragment,N),S=!0)},o(N){d(e.$$.fragment,N),d(s.$$.fragment,N),d(c.$$.fragment,N),d(y.$$.fragment,N),S=!1},d(N){N&&(m(t),m(n),m(_)),w(e,N),w(s),w(c),w(y,N)}}}function ap(r){let e;return{c(){e=v("LCWIP schemes")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function as(r){let e,l,t=r[31]+"",n;return{c(){e=T("li"),l=T("p"),n=v(t)},m(s,o){p(s,e,o),h(e,l),h(l,n)},p(s,o){o[0]&16384&&t!==(t=s[31]+"")&&F(n,t)},d(s){s&&m(e)}}}function up(r){let e,l,t,n=Pe(r[14].notes??[]),s=[];for(let o=0;o<n.length;o+=1)s[o]=as(ss(r,n,o));return{c(){e=T("p"),e.textContent="Please note there are data quality caveats for all scheme data:",l=L(),t=T("ul");for(let o=0;o<s.length;o+=1)s[o].c()},m(o,u){p(o,e,u),p(o,l,u),p(o,t,u);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(t,null)},p(o,u){if(u[0]&16384){n=Pe(o[14].notes??[]);let f;for(f=0;f<n.length;f+=1){const i=ss(o,n,f);s[f]?s[f].p(i,u):(s[f]=as(i),s[f].c(),s[f].m(t,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=n.length}},d(o){o&&(m(e),m(l),m(t)),nt(s,o)}}}function cp(r){let e,l,t;return l=new ce({props:{$$slots:{default:[up]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s[0]&16384|s[1]&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function $p(r){let e=un()=="Private (development)",l,t,n,s,o,u,f,i=e&&rp(r),a=r[9].size>0&&os(r),c=r[13].size>0&&fs(r);return s=new Rs({props:{label:"Load schemes from GeoJSON",onLoad:r[17]}}),u=new Ds({props:{errorMessage:r[2]}}),{c(){i&&i.c(),l=L(),a&&a.c(),t=L(),c&&c.c(),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment)},m($,_){i&&i.m($,_),p($,l,_),a&&a.m($,_),p($,t,_),c&&c.m($,_),p($,n,_),k(s,$,_),p($,o,_),k(u,$,_),f=!0},p($,_){e&&i.p($,_),$[9].size>0?a?(a.p($,_),_[0]&512&&g(a,1)):(a=os($),a.c(),g(a,1),a.m(t.parentNode,t)):a&&($e(),d(a,1,1,()=>{a=null}),pe()),$[13].size>0?c?(c.p($,_),_[0]&8192&&g(c,1)):(c=fs($),c.c(),g(c,1),c.m(n.parentNode,n)):c&&($e(),d(c,1,1,()=>{c=null}),pe());const y={};_[0]&4&&(y.errorMessage=$[2]),u.$set(y)},i($){f||(g(i),g(a),g(c),g(s.$$.fragment,$),g(u.$$.fragment,$),f=!0)},o($){d(i),d(a),d(c),d(s.$$.fragment,$),d(u.$$.fragment,$),f=!1},d($){$&&(m(l),m(t),m(n),m(o)),i&&i.d($),a&&a.d($),c&&c.d($),w(s,$),w(u,$)}}}function pp(r){let e,l,t,n,s,o;return e=new xe({props:{label:"Schemes",open:!0,$$slots:{default:[$p]},$$scope:{ctx:r}}}),t=new ls({props:{source:"atf",show:r[3],schemesGj:r[10],schemes:r[9],filterSchemeText:r[11],filterInterventionText:r[12],color:r[8]}}),s=new ls({props:{source:"lcwip",show:r[4],schemesGj:r[14],schemes:r[13],filterSchemeText:r[15],filterInterventionText:r[16],color:r[6]}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment)},m(u,f){k(e,u,f),p(u,l,f),k(t,u,f),p(u,n,f),k(s,u,f),o=!0},p(u,f){const i={};f[0]&130751|f[1]&32&&(i.$$scope={dirty:f,ctx:u}),e.$set(i);const a={};f[0]&8&&(a.show=u[3]),f[0]&1024&&(a.schemesGj=u[10]),f[0]&512&&(a.schemes=u[9]),f[0]&2048&&(a.filterSchemeText=u[11]),f[0]&4096&&(a.filterInterventionText=u[12]),f[0]&256&&(a.color=u[8]),t.$set(a);const c={};f[0]&16&&(c.show=u[4]),f[0]&16384&&(c.schemesGj=u[14]),f[0]&8192&&(c.schemes=u[13]),f[0]&32768&&(c.filterSchemeText=u[15]),f[0]&65536&&(c.filterInterventionText=u[16]),f[0]&64&&(c.color=u[6]),s.$set(c)},i(u){o||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(s.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(s.$$.fragment,u),o=!1},d(u){u&&(m(l),m(n)),w(e,u),w(t,u),w(s,u)}}}function mp(r,e,l){let t,n,s,o,u,f,i,a,c,$,_,y;X(r,tn,Y=>l(9,u=Y)),X(r,Qt,Y=>l(10,f=Y)),X(r,Ol,Y=>l(11,i=Y)),X(r,Pl,Y=>l(12,a=Y)),X(r,ln,Y=>l(13,c=Y)),X(r,nn,Y=>l(14,$=Y)),X(r,Dl,Y=>l(15,_=Y)),X(r,Rl,Y=>l(16,y=Y));let S="",C=!0,O=!0,G="fundingProgramme",D="fundingProgramme";function R(Y,ke){try{v$(JSON.parse(ke)),l(2,S="")}catch(_e){l(2,S=`The file you loaded is broken: ${_e}`)}}function M(Y){return Y=="interventionType"?[tp(),np()]:Y=="fundingProgramme"?lp():Y=="currentMilestone"?sp():["red",[]]}function I(Y){C=Y,l(3,C)}function j(Y){f=Y,Qt.set(f)}function P(Y){u=Y,tn.set(u)}function N(Y){i=Y,Ol.set(i)}function H(Y){a=Y,Pl.set(a)}function se(Y){G=Y,l(0,G)}function A(Y){O=Y,l(4,O)}function J(Y){$=Y,nn.set($)}function ee(Y){c=Y,ln.set(c)}function Le(Y){_=Y,Dl.set(_)}function Ie(Y){y=Y,Rl.set(y)}function ve(Y){D=Y,l(1,D)}return r.$$.update=()=>{r.$$.dirty[0]&1&&l(8,[t,n]=M(G),t,(l(7,n),l(0,G))),r.$$.dirty[0]&2&&l(6,[s,o]=M(D),s,(l(5,o),l(1,D)))},[G,D,S,C,O,o,s,n,t,u,f,i,a,c,$,_,y,R,I,j,P,N,H,se,A,J,ee,Le,Ie,ve]}class _p extends K{constructor(e){super(),Z(this,e,mp,pp,Q,{},null,[-1,-1])}}const us=qe(!0);let rn=qe(null);function gp(r){let e,l,t,n,s,o,u,f;return e=new xu({}),t=new cc({}),s=new Lc({}),u=new vc({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),p(i,n,a),k(s,i,a),p(i,o,a),k(u,i,a),f=!0},i(i){f||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),g(u.$$.fragment,i),f=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),d(u.$$.fragment,i),f=!1},d(i){i&&(m(l),m(n),m(o)),w(e,i),w(t,i),w(s,i),w(u,i)}}}function dp(r){let e,l;return e=new it({props:{small:!0,$$slots:{default:[gp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function hp(r){let e,l,t,n,s,o,u,f,i,a,c,$;return e=new _f({}),t=new Wf({}),s=new Tf({}),u=new jf({}),i=new qu({}),c=new hu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment),f=L(),b(i.$$.fragment),a=L(),b(c.$$.fragment)},m(_,y){k(e,_,y),p(_,l,y),k(t,_,y),p(_,n,y),k(s,_,y),p(_,o,y),k(u,_,y),p(_,f,y),k(i,_,y),p(_,a,y),k(c,_,y),$=!0},i(_){$||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(s.$$.fragment,_),g(u.$$.fragment,_),g(i.$$.fragment,_),g(c.$$.fragment,_),$=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(s.$$.fragment,_),d(u.$$.fragment,_),d(i.$$.fragment,_),d(c.$$.fragment,_),$=!1},d(_){_&&(m(l),m(n),m(o),m(f),m(a)),w(e,_),w(t,_),w(s,_),w(u,_),w(i,_),w(c,_)}}}function bp(r){let e,l;return e=new it({props:{small:!0,$$slots:{default:[hp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function kp(r){let e,l,t,n,s,o;return e=new ef({}),t=new Za({}),s=new iu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment)},m(u,f){k(e,u,f),p(u,l,f),k(t,u,f),p(u,n,f),k(s,u,f),o=!0},i(u){o||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(s.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(s.$$.fragment,u),o=!1},d(u){u&&(m(l),m(n)),w(e,u),w(t,u),w(s,u)}}}function wp(r){let e,l,t,n,s,o,u,f,i,a;return e=new ai({}),t=new zi({}),s=new _o({}),u=new Fo({}),i=new Xo({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment),f=L(),b(i.$$.fragment)},m(c,$){k(e,c,$),p(c,l,$),k(t,c,$),p(c,n,$),k(s,c,$),p(c,o,$),k(u,c,$),p(c,f,$),k(i,c,$),a=!0},i(c){a||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(s.$$.fragment,c),g(u.$$.fragment,c),g(i.$$.fragment,c),a=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(s.$$.fragment,c),d(u.$$.fragment,c),d(i.$$.fragment,c),a=!1},d(c){c&&(m(l),m(n),m(o),m(f)),w(e,c),w(t,c),w(s,c),w(u,c),w(i,c)}}}function vp(r){let e,l;return e=new it({props:{small:!0,$$slots:{default:[wp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function yp(r){let e,l,t,n;return e=new so({}),t=new Lo({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(s,o){k(e,s,o),p(s,l,o),k(t,s,o),n=!0},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&m(l),w(e,s),w(t,s)}}}function Sp(r){let e,l;return e=new it({props:{small:!0,$$slots:{default:[yp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Tp(r){let e,l,t,n,s,o,u,f;return e=new Ea({}),t=new sa({}),s=new Ra({}),u=new p$({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),p(i,n,a),k(s,i,a),p(i,o,a),k(u,i,a),f=!0},i(i){f||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),g(u.$$.fragment,i),f=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),d(u.$$.fragment,i),f=!1},d(i){i&&(m(l),m(n),m(o)),w(e,i),w(t,i),w(s,i),w(u,i)}}}function Cp(r){let e,l,t,n,s,o,u,f,i=un()=="Private (development)",a,c,$,_,y;e=new l$({}),t=new Wc({}),s=new ka({}),u=new Mu({});let S=i&&Tp();return c=new bi({}),_=new Ii({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment),f=L(),S&&S.c(),a=L(),b(c.$$.fragment),$=L(),b(_.$$.fragment)},m(C,O){k(e,C,O),p(C,l,O),k(t,C,O),p(C,n,O),k(s,C,O),p(C,o,O),k(u,C,O),p(C,f,O),S&&S.m(C,O),p(C,a,O),k(c,C,O),p(C,$,O),k(_,C,O),y=!0},p:le,i(C){y||(g(e.$$.fragment,C),g(t.$$.fragment,C),g(s.$$.fragment,C),g(u.$$.fragment,C),g(S),g(c.$$.fragment,C),g(_.$$.fragment,C),y=!0)},o(C){d(e.$$.fragment,C),d(t.$$.fragment,C),d(s.$$.fragment,C),d(u.$$.fragment,C),d(S),d(c.$$.fragment,C),d(_.$$.fragment,C),y=!1},d(C){C&&(m(l),m(n),m(o),m(f),m(a),m($)),w(e,C),w(t,C),w(s,C),w(u,C),S&&S.d(C),w(c,C),w(_,C)}}}function Lp(r){let e,l;return e=new it({props:{small:!0,$$slots:{default:[Cp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Mp(r){let e,l,t,n,s;function o(f){r[6](f)}let u={cfg:r[5],map:r[3]};return r[0]!==void 0&&(u.enabled=r[0]),e=new Ws({props:u}),E.push(()=>U(e,"enabled",o)),n=new Cr({}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,i){const a={};i&8&&(a.map=f[3]),!l&&i&1&&(l=!0,a.enabled=f[0],W(()=>l=!1)),e.$set(a)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}function Ip(r){let e,l;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let n={};for(let s=0;s<t.length;s+=1)n=re(n,t[s]);return e=new ze({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&2?oe(t,[t[0],t[1],{layout:{visibility:s[1]?"none":"visible"}}]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Np(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y,S,C,O,G,D,R,M;return l=new _p({}),n=new xe({props:{label:"Trip generators",$$slots:{default:[dp]},$$scope:{ctx:r}}}),o=new xe({props:{label:"Existing infrastructure",$$slots:{default:[bp]},$$scope:{ctx:r}}}),f=new xe({props:{label:"Public transport",$$slots:{default:[kp]},$$scope:{ctx:r}}}),a=new xe({props:{label:"Boundaries",$$slots:{default:[vp]},$$scope:{ctx:r}}}),$=new xe({props:{label:"Census",$$slots:{default:[Sp]},$$scope:{ctx:r}}}),y=new xe({props:{label:"Other",$$slots:{default:[Lp]},$$scope:{ctx:r}}}),C=new xe({props:{label:"Tools",$$slots:{default:[Mp]},$$scope:{ctx:r}}}),G=new Us({props:{disabled:!r[1]}}),R=new dt({props:{data:r[4],$$slots:{default:[Ip]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(o.$$.fragment),u=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),c=L(),b($.$$.fragment),_=L(),b(y.$$.fragment),S=L(),b(C.$$.fragment),O=L(),b(G.$$.fragment),D=L(),b(R.$$.fragment)},m(I,j){p(I,e,j),k(l,e,null),h(e,t),k(n,e,null),h(e,s),k(o,e,null),h(e,u),k(f,e,null),h(e,i),k(a,e,null),h(e,c),k($,e,null),h(e,_),k(y,e,null),h(e,S),k(C,e,null),h(e,O),k(G,e,null),r[7](e),p(I,D,j),k(R,I,j),M=!0},p(I,[j]){const P={};j&256&&(P.$$scope={dirty:j,ctx:I}),n.$set(P);const N={};j&256&&(N.$$scope={dirty:j,ctx:I}),o.$set(N);const H={};j&256&&(H.$$scope={dirty:j,ctx:I}),f.$set(H);const se={};j&256&&(se.$$scope={dirty:j,ctx:I}),a.$set(se);const A={};j&256&&(A.$$scope={dirty:j,ctx:I}),$.$set(A);const J={};j&256&&(J.$$scope={dirty:j,ctx:I}),y.$set(J);const ee={};j&265&&(ee.$$scope={dirty:j,ctx:I}),C.$set(ee);const Le={};j&2&&(Le.disabled=!I[1]),G.$set(Le);const Ie={};j&258&&(Ie.$$scope={dirty:j,ctx:I}),R.$set(Ie)},i(I){M||(g(l.$$.fragment,I),g(n.$$.fragment,I),g(o.$$.fragment,I),g(f.$$.fragment,I),g(a.$$.fragment,I),g($.$$.fragment,I),g(y.$$.fragment,I),g(C.$$.fragment,I),g(G.$$.fragment,I),g(R.$$.fragment,I),M=!0)},o(I){d(l.$$.fragment,I),d(n.$$.fragment,I),d(o.$$.fragment,I),d(f.$$.fragment,I),d(a.$$.fragment,I),d($.$$.fragment,I),d(y.$$.fragment,I),d(C.$$.fragment,I),d(G.$$.fragment,I),d(R.$$.fragment,I),M=!1},d(I){I&&(m(e),m(D)),w(l),w(n),w(o),w(f),w(a),w($),w(y),w(C),w(G),r[7](null),w(R,I)}}}function Pp(r,e,l){let t,n,s,o;X(r,us,c=>l(1,n=c)),X(r,rn,c=>l(2,s=c)),X(r,an,c=>l(3,o=c));let u={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},f={getStreetViewRoadLayerNames:c=>Ys(c,js(xt))};function i(c){t=c,l(0,t),l(1,n)}function a(c){E[c?"unshift":"push"](()=>{s=c,rn.set(s)})}return r.$$.update=()=>{r.$$.dirty&2&&l(0,t=!n),r.$$.dirty&1&&us.set(!t)},[t,n,s,o,u,f,i,a]}class Op extends K{constructor(e){super(),Z(this,e,Pp,Np,Q,{})}}function Rp(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y;return l=new Js({}),u=new Vs({props:{boundaryGeojson:r[3]}}),i=new As({}),{c(){e=T("div"),b(l.$$.fragment),t=L(),n=T("div"),s=T("h1"),s.textContent="Browse schemes",o=L(),b(u.$$.fragment),f=L(),b(i.$$.fragment),a=L(),c=T("p"),c.textContent=`App version: ${un()}`,$=L(),_=T("div"),me(n,"display","flex"),me(n,"justify-content","space-between"),B(e,"slot","sidebar"),B(e,"class","govuk-prose")},m(S,C){p(S,e,C),k(l,e,null),h(e,t),h(e,n),h(n,s),h(n,o),k(u,n,null),h(e,f),k(i,e,null),h(e,a),h(e,c),h(e,$),h(e,_),r[6](_),y=!0},p(S,C){const O={};C&8&&(O.boundaryGeojson=S[3]),u.$set(O)},i(S){y||(g(l.$$.fragment,S),g(u.$$.fragment,S),g(i.$$.fragment,S),y=!0)},o(S){d(l.$$.fragment,S),d(u.$$.fragment,S),d(i.$$.fragment,S),y=!1},d(S){S&&m(e),w(l),w(u),w(i),r[6](null)}}}function cs(r){let e,l,t;return l=new Op({}),{c(){e=T("div"),b(l.$$.fragment),B(e,"class","top-right svelte-u44ed2")},m(n,s){p(n,e,s),k(l,e,null),t=!0},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Dp(r){let e,l,t,n;e=new Qs({});let s=r[2]&&cs();return{c(){b(e.$$.fragment),l=L(),s&&s.c(),t=Oe()},m(o,u){k(e,o,u),p(o,l,u),s&&s.m(o,u),p(o,t,u),n=!0},p(o,u){o[2]?s?u&4&&g(s,1):(s=cs(),s.c(),g(s,1),s.m(t.parentNode,t)):s&&($e(),d(s,1,1,()=>{s=null}),pe())},i(o){n||(g(e.$$.fragment,o),g(s),n=!0)},o(o){d(e.$$.fragment,o),d(s),n=!1},d(o){o&&(m(l),m(t)),w(e,o),s&&s.d(o)}}}function jp(r){let e,l,t;return l=new Gs({props:{style:r[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Dp]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(l.$$.fragment),B(e,"slot","main")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2&&(o.style=n[1]),s&260&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Ap(r){let e,l;return e=new or({props:{$$slots:{main:[jp],sidebar:[Rp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&271&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Gp(r,e,l){let t,n,s,o,u;X(r,rn,c=>l(4,t=c)),X(r,an,c=>l(5,n=c)),X(r,xt,c=>l(1,s=c)),X(r,Mn,c=>l(2,o=c)),X(r,Qt,c=>l(3,u=c)),fn(()=>{Fs()});const f=new URLSearchParams(window.location.search);xt.set(f.get("style")||"dataviz");let i;function a(c){E[c?"unshift":"push"](()=>{i=c,l(0,i),l(4,t)})}return r.$$.update=()=>{r.$$.dirty&32&&n&&Mn.set(n),r.$$.dirty&17&&i&&t&&(l(0,i.innerHTML="",i),i.appendChild(t))},[i,s,o,u,t,n,a]}class Fp extends K{constructor(e){super(),Z(this,e,Gp,Ap,Q,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Fp({target:document.getElementById("app")});
