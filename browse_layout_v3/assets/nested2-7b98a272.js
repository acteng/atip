import{S as K,i as X,s as V,e as T,b as z,m as pe,c as p,n as ee,d as m,aU as Is,g as H,h as E,a as I,j as b,p as k,_ as tt,u as B,t as g,q as d,v as w,Q as pt,T as mt,U as _t,V as gt,b5 as Rn,o as h,am as we,z as ae,r as ue,av as Qe,y as v,P as G,aa as ve,ab as dn,ac as Ms,w as x,ad as Ns,ae as Os,af as De,ag as Ps,ah as js,b6 as Bs,W as yt,b7 as Dn,b8 as Us,G as bt,aP as fn,a0 as se,N as ge,f as nt,aR as Ws,b4 as te,a9 as Ae,b9 as me,K as le,J as Fe,a2 as re,at as oe,aT as Kt,Z as Je,$ as Rs,b1 as Wt,ba as Yt,bb as $t,R as Ds,bc as Ys,bd as Js,x as As,be as Vs,D as Qs,X as an,b3 as hn,bf as Zs,I as Ks,k as bn,F as Xs,E as xs,aV as er,aW as un,A as tr,L as nr,M as lr,B as sr}from"./index-d7883fe9.js";import{e as An,s as q,u as Ve,t as rr,q as xe,M as or,a as ie,v as de,k as dt,R as ir,h as Ze,C as lt,f as ht,b as fr,p as Fn,g as ar,d as Gn,w as qn,c as zn,x as Ut,i as Zt,W as Fs,B as ur,S as cr,n as $r,H as pr,Z as mr,G as _r,m as Hn}from"./ZoomOutMap-6949a75d.js";import{P as ce,A as Gs}from"./Popup-c0c189e5.js";function gr(r){let e;return{c(){e=T("span"),z(e,"class","svelte-kzgqtg"),pe(e,"background",r[0])},m(l,t){p(l,e,t)},p(l,[t]){t&1&&pe(e,"background",l[0])},i:ee,o:ee,d(l){l&&m(e)}}}function dr(r,e,l){let{color:t}=e;return r.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Ce extends K{constructor(e){super(),X(this,e,dr,gr,V,{color:0})}}const hr="/atip/browse_layout_v3/assets/help-d011708a.svg";function br(r){let e,l;const t=r[1].default,n=pt(t,r,r[4],null);return{c(){e=T("div"),n&&n.c(),z(e,"class","govuk-prose")},m(s,o){p(s,e,o),n&&n.m(e,null),l=!0},p(s,o){n&&n.p&&(!l||o&16)&&mt(n,t,s,s[4],l?gt(t,s[4],o,null):_t(s[4]),null)},i(s){l||(g(n,s),l=!0)},o(s){d(n,s),l=!1},d(s){s&&m(e),n&&n.d(s)}}}function kr(r){let e,l,t,n,s,o,u;function f(a){r[3](a)}let i={title:"Help",$$slots:{default:[br]},$$scope:{ctx:r}};return r[0]!==void 0&&(i.open=r[0]),t=new Is({props:i}),H.push(()=>E(t,"open",f)),{c(){e=T("button"),e.innerHTML=`<img src="${hr}" title="Help" alt="Help"/>`,l=I(),b(t.$$.fragment),z(e,"class","svelte-7d9d1l")},m(a,c){p(a,e,c),p(a,l,c),k(t,a,c),s=!0,o||(u=tt(e,"click",r[2]),o=!0)},p(a,[c]){const $={};c&16&&($.$$scope={dirty:c,ctx:a}),!n&&c&1&&(n=!0,$.open=a[0],B(()=>n=!1)),t.$set($)},i(a){s||(g(t.$$.fragment,a),s=!0)},o(a){d(t.$$.fragment,a),s=!1},d(a){a&&(m(e),m(l)),w(t,a),o=!1,u()}}}function wr(r,e,l){let{$$slots:t={},$$scope:n}=e,s=!1;const o=()=>l(0,s=!0);function u(f){s=f,l(0,s)}return r.$$set=f=>{"$$scope"in f&&l(4,n=f.$$scope)},[s,t,o,u,n]}class $e extends K{constructor(e){super(),X(this,e,wr,kr,V,{})}}const vr=r=>({}),En=r=>({}),yr=r=>({}),Bn=r=>({});function Sr(r){let e,l,t,n,s,o,u,f,i,a,c;const $=r[4].sidebar,_=pt($,r,r[3],Bn),y=r[4].main,S=pt(y,r,r[3],En);return{c(){e=T("div"),l=T("aside"),t=T("div"),_&&_.c(),n=I(),s=T("button"),s.textContent="→",u=I(),f=T("main"),S&&S.c(),z(t,"class","sidebar-content content-container svelte-1n0etgd"),z(s,"type","button"),z(s,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),z(l,"class",o=Rn(r[1]?"":"collapsed")+" svelte-1n0etgd"),pe(l,"--sidebarWidth",r[0]),z(f,"class","svelte-1n0etgd"),z(e,"class","overall-layout svelte-1n0etgd")},m(C,N){p(C,e,N),h(e,l),h(l,t),_&&_.m(t,null),h(l,n),h(l,s),h(e,u),h(e,f),S&&S.m(f,null),i=!0,a||(c=tt(s,"click",r[2]),a=!0)},p(C,[N]){_&&_.p&&(!i||N&8)&&mt(_,$,C,C[3],i?gt($,C[3],N,yr):_t(C[3]),Bn),(!i||N&2&&o!==(o=Rn(C[1]?"":"collapsed")+" svelte-1n0etgd"))&&z(l,"class",o),(!i||N&1)&&pe(l,"--sidebarWidth",C[0]),S&&S.p&&(!i||N&8)&&mt(S,y,C,C[3],i?gt(y,C[3],N,vr):_t(C[3]),En)},i(C){i||(g(_,C),g(S,C),i=!0)},o(C){d(_,C),d(S,C),i=!1},d(C){C&&m(e),_&&_.d(C),S&&S.d(C),a=!1,c()}}}function Cr(r,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:s="25rem"}=e,o=!0;function u(){l(1,o=!o)}return r.$$set=f=>{"sidebarWidth"in f&&l(0,s=f.sidebarWidth),"$$scope"in f&&l(3,n=f.$$scope)},[s,o,u,n,t]}class Tr extends K{constructor(e){super(),X(this,e,Cr,Sr,V,{sidebarWidth:0})}}function Un(r,e,l){const t=r.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Wn(r){let e,l,t,n=r[1]+"",s,o,u;return l=new Ce({props:{color:r[2]}}),{c(){e=T("li"),b(l.$$.fragment),t=I(),s=v(n),o=I()},m(f,i){p(f,e,i),k(l,e,null),h(e,t),h(e,s),h(e,o),u=!0},p(f,i){const a={};i&1&&(a.color=f[2]),l.$set(a),(!u||i&1)&&n!==(n=f[1]+"")&&G(s,n)},i(f){u||(g(l.$$.fragment,f),u=!0)},o(f){d(l.$$.fragment,f),u=!1},d(f){f&&m(e),w(l)}}}function Lr(r){let e,l,t=we(r[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Wn(Un(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){e=T("ul");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,u){p(o,e,u);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(e,null);l=!0},p(o,[u]){if(u&1){t=we(o[0]);let f;for(f=0;f<t.length;f+=1){const i=Un(o,t,f);n[f]?(n[f].p(i,u),g(n[f],1)):(n[f]=Wn(i),n[f].c(),g(n[f],1),n[f].m(e,null))}for(ae(),f=t.length;f<n.length;f+=1)s(f);ue()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)g(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&m(e),Qe(n,o)}}}function Ir(r,e,l){let{rows:t}=e;return r.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Jt extends K{constructor(e){super(),X(this,e,Ir,Lr,V,{rows:0})}}function Yn(r){let e=r[0],l,t,n=Jn(r);return{c(){n.c(),l=ve()},m(s,o){n.m(s,o),p(s,l,o),t=!0},p(s,o){o&1&&V(e,e=s[0])?(ae(),d(n,1,1,ee),ue(),n=Jn(s),n.c(),g(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(g(n),t=!0)},o(s){d(n),t=!1},d(s){s&&m(l),n.d(s)}}}function Jn(r){let e;const l=r[16].default,t=pt(l,r,r[15],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&32768)&&mt(t,l,n,n[15],e?gt(l,n[15],s,null):_t(n[15]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function Mr(r){let e,l,t=r[0]&&Yn(r);return{c(){t&&t.c(),e=ve()},m(n,s){t&&t.m(n,s),p(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&g(t,1)):(t=Yn(n),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ae(),d(t,1,1,()=>{t=null}),ue())},i(n){l||(g(t),l=!0)},o(n){d(t),l=!1},d(n){n&&m(e),t&&t.d(n)}}}function Nr(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=dn("raster-source")}=e,{tiles:f}=e,{tileSize:i=void 0}=e,{bounds:a=null}=e,{scheme:c=null}=e,{attribution:$=null}=e,{minzoom:_=null}=e,{maxzoom:y=null}=e,{volatile:S=null}=e;const{map:C,self:N}=Ms();x(r,C,P=>l(14,n=P)),x(r,N,P=>l(0,t=P));let A,D=!0;return Ns(()=>{t&&A&&n&&(Os(C,t,A),De(N,t=null,t),l(12,A=void 0))}),r.$$set=P=>{"id"in P&&l(3,u=P.id),"tiles"in P&&l(4,f=P.tiles),"tileSize"in P&&l(5,i=P.tileSize),"bounds"in P&&l(6,a=P.bounds),"scheme"in P&&l(7,c=P.scheme),"attribution"in P&&l(8,$=P.attribution),"minzoom"in P&&l(9,_=P.minzoom),"maxzoom"in P&&l(10,y=P.maxzoom),"volatile"in P&&l(11,S=P.volatile),"$$scope"in P&&l(15,o=P.$$scope)},r.$$.update=()=>{r.$$.dirty&24569&&n&&t!==u&&(De(N,t=u,t),Ps(n,t,js({type:"raster",tiles:f,tileSize:i,bounds:a,scheme:c,attribution:$,minzoom:_,maxzoom:y,volatile:S}),P=>n&&P===t,()=>{t&&(l(12,A=n==null?void 0:n.getSource(t)),l(13,D=!0))})),r.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,A=n==null?void 0:n.getSource(u))})),r.$$.dirty&12304&&A&&(D?l(13,D=!1):A.setTiles(f))},[t,C,N,u,f,i,a,c,$,_,y,S,A,D,n,o,s]}class Or extends K{constructor(e){super(),X(this,e,Nr,Mr,V,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function Pr(r){let e;const l=r[16].default,t=pt(l,r,r[24],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16777216)&&mt(t,l,n,n[24],e?gt(l,n[24],s,null):_t(n[24]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function jr(r){let e,l,t;function n(o){r[17](o)}let s={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Pr]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.hovered=r[0]),e=new Bs({props:s}),H.push(()=>E(e,"hovered",n)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){b(e.$$.fragment)},m(o,u){k(e,o,u),t=!0},p(o,[u]){const f={};u&2&&(f.id=o[1]),u&4&&(f.source=o[2]),u&8&&(f.sourceLayer=o[3]),u&16&&(f.beforeId=o[4]),u&32&&(f.beforeLayerType=o[5]),u&64&&(f.paint=o[6]),u&128&&(f.layout=o[7]),u&256&&(f.filter=o[8]),u&512&&(f.applyToClusters=o[9]),u&1024&&(f.minzoom=o[10]),u&2048&&(f.maxzoom=o[11]),u&4096&&(f.hoverCursor=o[12]),u&8192&&(f.manageHoverState=o[13]),u&16384&&(f.eventsIfTopMost=o[14]),u&32768&&(f.interactive=o[15]),u&16777216&&(f.$$scope={dirty:u,ctx:o}),!l&&u&1&&(l=!0,f.hovered=o[0],B(()=>l=!1)),e.$set(f)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function Rr(r,e,l){let{$$slots:t={},$$scope:n}=e,{id:s=dn("symbol")}=e,{source:o=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:f=void 0}=e,{beforeLayerType:i=void 0}=e,{paint:a=void 0}=e,{layout:c=void 0}=e,{filter:$=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:N=!1}=e,{hovered:A=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:P=!0}=e;function M(F){A=F,l(0,A)}function O(F){yt.call(this,r,F)}function j(F){yt.call(this,r,F)}function L(F){yt.call(this,r,F)}function R(F){yt.call(this,r,F)}function W(F){yt.call(this,r,F)}function Q(F){yt.call(this,r,F)}return r.$$set=F=>{"id"in F&&l(1,s=F.id),"source"in F&&l(2,o=F.source),"sourceLayer"in F&&l(3,u=F.sourceLayer),"beforeId"in F&&l(4,f=F.beforeId),"beforeLayerType"in F&&l(5,i=F.beforeLayerType),"paint"in F&&l(6,a=F.paint),"layout"in F&&l(7,c=F.layout),"filter"in F&&l(8,$=F.filter),"applyToClusters"in F&&l(9,_=F.applyToClusters),"minzoom"in F&&l(10,y=F.minzoom),"maxzoom"in F&&l(11,S=F.maxzoom),"hoverCursor"in F&&l(12,C=F.hoverCursor),"manageHoverState"in F&&l(13,N=F.manageHoverState),"hovered"in F&&l(0,A=F.hovered),"eventsIfTopMost"in F&&l(14,D=F.eventsIfTopMost),"interactive"in F&&l(15,P=F.interactive),"$$scope"in F&&l(24,n=F.$$scope)},[A,s,o,u,f,i,a,c,$,_,y,S,C,N,D,P,t,M,O,j,L,R,W,Q,n]}class kn extends K{constructor(e){super(),X(this,e,Rr,jr,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Vn(r){let e=r[0],l,t,n=Qn(r);return{c(){n.c(),l=ve()},m(s,o){n.m(s,o),p(s,l,o),t=!0},p(s,o){o&1&&V(e,e=s[0])?(ae(),d(n,1,1,ee),ue(),n=Qn(s),n.c(),g(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(g(n),t=!0)},o(s){d(n),t=!1},d(s){s&&m(l),n.d(s)}}}function Qn(r){let e;const l=r[15].default,t=pt(l,r,r[14],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16384)&&mt(t,l,n,n[14],e?gt(l,n[14],s,null):_t(n[14]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function Dr(r){let e,l,t=r[0]&&Vn(r);return{c(){t&&t.c(),e=ve()},m(n,s){t&&t.m(n,s),p(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&g(t,1)):(t=Vn(n),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ae(),d(t,1,1,()=>{t=null}),ue())},i(n){l||(g(t),l=!0)},o(n){d(t),l=!1},d(n){n&&m(e),t&&t.d(n)}}}function Ar(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=dn("vector")}=e,{url:f=null}=e,{tiles:i=null}=e,{promoteId:a=null}=e,{bounds:c=null}=e,{scheme:$=null}=e,{attribution:_=null}=e,{minzoom:y=null}=e,{maxzoom:S=null}=e,{volatile:C=null}=e;if(f&&f.includes("pmtiles://")&&!Dn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let P=new Us;Dn.addProtocol("pmtiles",P.tile)}const{map:N,self:A}=Ms();x(r,N,P=>l(13,n=P)),x(r,A,P=>l(0,t=P));let D;return Ns(()=>{t&&n&&(Os(N,t,D),De(A,t=null,t),D=void 0)}),r.$$set=P=>{"id"in P&&l(3,u=P.id),"url"in P&&l(4,f=P.url),"tiles"in P&&l(5,i=P.tiles),"promoteId"in P&&l(6,a=P.promoteId),"bounds"in P&&l(7,c=P.bounds),"scheme"in P&&l(8,$=P.scheme),"attribution"in P&&l(9,_=P.attribution),"minzoom"in P&&l(10,y=P.minzoom),"maxzoom"in P&&l(11,S=P.maxzoom),"volatile"in P&&l(12,C=P.volatile),"$$scope"in P&&l(14,o=P.$$scope)},r.$$.update=()=>{r.$$.dirty&16377&&n&&t!==u&&(De(A,t=u,t),Ps(n,t,js({type:"vector",url:f,tiles:i,promoteId:a,bounds:c,scheme:$,attribution:_,minzoom:y,maxzoom:S,volatile:C}),P=>n&&P===t,()=>{t&&(D=n==null?void 0:n.getSource(t))})),r.$$.dirty&8200&&(n==null||n.on("style.load",()=>{D=n==null?void 0:n.getSource(u)}))},[t,N,A,u,f,i,a,c,$,_,y,S,C,n,o,s]}class _e extends K{constructor(e){super(),X(this,e,Ar,Dr,V,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function Zn(r,e,l){const t=r.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Fr(r){let e,l,t;return l=new nt({props:{$$slots:{default:[qr]},$$scope:{ctx:r}}}),l.$on("click",r[9]),{c(){e=T("div"),b(l.$$.fragment)},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16384&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Gr(r){let e,l,t,n,s,o,u,f,i,a;l=new nt({props:{$$slots:{default:[zr]},$$scope:{ctx:r}}}),l.$on("click",r[4]);let c=r[2]&&Kn(r);s=new xe({props:{label:"Help",$$slots:{default:[Hr]},$$scope:{ctx:r}}}),u=new Ws({}),u.$on("click",r[3]);let $=we(r[0]),_=[];for(let S=0;S<$.length;S+=1)_[S]=Xn(Zn(r,$,S));const y=S=>d(_[S],1,1,()=>{_[S]=null});return{c(){e=T("div"),b(l.$$.fragment),t=I(),c&&c.c(),n=I(),b(s.$$.fragment),o=I(),b(u.$$.fragment),f=I();for(let S=0;S<_.length;S+=1)_[S].c();i=ve()},m(S,C){p(S,e,C),k(l,e,null),p(S,t,C),c&&c.m(S,C),p(S,n,C),k(s,S,C),p(S,o,C),k(u,S,C),p(S,f,C);for(let N=0;N<_.length;N+=1)_[N]&&_[N].m(S,C);p(S,i,C),a=!0},p(S,C){const N={};C&16384&&(N.$$scope={dirty:C,ctx:S}),l.$set(N),S[2]?c?c.p(S,C):(c=Kn(S),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const A={};if(C&16384&&(A.$$scope={dirty:C,ctx:S}),s.$set(A),C&65){$=we(S[0]);let D;for(D=0;D<$.length;D+=1){const P=Zn(S,$,D);_[D]?(_[D].p(P,C),g(_[D],1)):(_[D]=Xn(P),_[D].c(),g(_[D],1),_[D].m(i.parentNode,i))}for(ae(),D=$.length;D<_.length;D+=1)y(D);ue()}},i(S){if(!a){g(l.$$.fragment,S),g(s.$$.fragment,S),g(u.$$.fragment,S);for(let C=0;C<$.length;C+=1)g(_[C]);a=!0}},o(S){d(l.$$.fragment,S),d(s.$$.fragment,S),d(u.$$.fragment,S),_=_.filter(Boolean);for(let C=0;C<_.length;C+=1)d(_[C]);a=!1},d(S){S&&(m(e),m(t),m(n),m(o),m(f),m(i)),w(l),c&&c.d(S),w(s,S),w(u,S),Qe(_,S)}}}function qr(r){let e;return{c(){e=v("Measure lines")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function zr(r){let e;return{c(){e=v("Stop measuring")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Kn(r){let e,l,t=r[2].toFixed(2)+"",n,s;return{c(){e=T("p"),l=v("Length: "),n=v(t),s=v(" meters")},m(o,u){p(o,e,u),h(e,l),h(e,n),h(e,s)},p(o,u){u&4&&t!==(t=o[2].toFixed(2)+"")&&G(n,t)},d(o){o&&m(e)}}}function Hr(r){let e;return{c(){e=T("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){p(l,e,t)},p:ee,d(l){l&&m(e)}}}function Er(r){let e,l;return{c(){e=T("span"),l=I(),z(e,"class","dot svelte-1tzt432")},m(t,n){p(t,e,n),p(t,l,n)},p:ee,d(t){t&&(m(e),m(l))}}}function Xn(r){let e,l,t;function n(u){r[7](u,r[11],r[12],r[13])}function s(){return r[8](r[13])}let o={draggable:!0,$$slots:{default:[Er]},$$scope:{ctx:r}};return r[11]!==void 0&&(o.lngLat=r[11]),e=new or({props:o}),H.push(()=>E(e,"lngLat",n)),e.$on("click",s),{c(){b(e.$$.fragment)},m(u,f){k(e,u,f),t=!0},p(u,f){r=u;const i={};f&16384&&(i.$$scope={dirty:f,ctx:r}),!l&&f&1&&(l=!0,i.lngLat=r[11],B(()=>l=!1)),e.$set(i)},i(u){t||(g(e.$$.fragment,u),t=!0)},o(u){d(e.$$.fragment,u),t=!1},d(u){w(e,u)}}}function Br(r){let e,l;const t=[q("measurement-line"),{paint:{"line-color":Ve.measuringLine,"line-width":5}}];let n={};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u={};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ur(r){let e,l,t,n,s,o,u;const f=[Gr,Fr],i=[];function a(c,$){return c[1]?0:1}return e=a(r),l=i[e]=f[e](r),n=new bt({props:{data:r[0].length<2?An():fn(r[0]),$$slots:{default:[Br]},$$scope:{ctx:r}}}),{c(){l.c(),t=I(),b(n.$$.fragment)},m(c,$){i[e].m(c,$),p(c,t,$),k(n,c,$),s=!0,o||(u=tt(window,"keydown",r[5]),o=!0)},p(c,[$]){let _=e;e=a(c),e===_?i[e].p(c,$):(ae(),d(i[_],1,1,()=>{i[_]=null}),ue(),l=i[e],l?l.p(c,$):(l=i[e]=f[e](c),l.c()),g(l,1),l.m(t.parentNode,t));const y={};$&1&&(y.data=c[0].length<2?An():fn(c[0])),$&16384&&(y.$$scope={dirty:$,ctx:c}),n.$set(y)},i(c){s||(g(l),g(n.$$.fragment,c),s=!0)},o(c){d(l),d(n.$$.fragment,c),s=!1},d(c){c&&m(t),i[e].d(c),w(n,c),o=!1,u()}}}function Wr(r,e,l){let t,n=!1,s=[];function o(y){return y.length<2?null:1e3*rr(fn(y),{units:"kilometers"})}function u(y){l(0,s=[...s,y.detail.lngLat.toArray()])}function f(){l(1,n=!1),l(0,s=[])}function i(y){n&&y.key==="Escape"&&(y.stopPropagation(),f())}function a(y){s.splice(y,1),l(0,s)}function c(y,S,C,N){C[N]=y,l(0,s)}const $=y=>a(y),_=()=>l(1,n=!0);return r.$$.update=()=>{r.$$.dirty&1&&l(2,t=o(s))},[s,n,t,u,f,i,a,c,$,_]}class Yr extends K{constructor(e){super(),X(this,e,Wr,Ur,V,{})}}const ne={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Re=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Jr(r){let e;return{c(){e=v(`Open Government License
  `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Vr(r){let e,l,t,n,s;return t=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Jr]},$$scope:{ctx:r}}}),{c(){e=T("p"),l=v("License: "),b(t.$$.fragment),n=v(`. Contains OS data © Crown copyright and database right
  2023.`)},m(o,u){p(o,e,u),h(e,l),k(t,e,null),h(e,n),s=!0},p(o,[u]){const f={};u&1&&(f.$$scope={dirty:u,ctx:o}),t.$set(f)},i(o){s||(g(t.$$.fragment,o),s=!0)},o(o){d(t.$$.fragment,o),s=!1},d(o){o&&m(e),w(t)}}}class Te extends K{constructor(e){super(),X(this,e,null,Vr,V,{})}}function xn(r,e,l){const t=r.slice();return t[2]=e[l],t}function el(r,e,l){const t=r.slice();return t[5]=e[l],t}function tl(r){let e,l;return{c(){e=T("span"),l=v(` 
    `),pe(e,"background",r[5]),pe(e,"width","100%"),pe(e,"border","1px solid black")},m(t,n){p(t,e,n),h(e,l)},p(t,n){n&1&&pe(e,"background",t[5])},d(t){t&&m(e)}}}function nl(r){let e,l=r[2]+"",t;return{c(){e=T("span"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&2&&l!==(l=n[2]+"")&&G(t,l)},d(n){n&&m(e)}}}function Qr(r){let e,l,t,n=we(r[0]),s=[];for(let f=0;f<n.length;f+=1)s[f]=tl(el(r,n,f));let o=we(r[1]),u=[];for(let f=0;f<o.length;f+=1)u[f]=nl(xn(r,o,f));return{c(){e=T("div");for(let f=0;f<s.length;f+=1)s[f].c();l=I(),t=T("div");for(let f=0;f<u.length;f+=1)u[f].c();pe(e,"display","flex"),pe(t,"display","flex"),pe(t,"justify-content","space-between")},m(f,i){p(f,e,i);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);p(f,l,i),p(f,t,i);for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(t,null)},p(f,[i]){if(i&1){n=we(f[0]);let a;for(a=0;a<n.length;a+=1){const c=el(f,n,a);s[a]?s[a].p(c,i):(s[a]=tl(c),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=n.length}if(i&2){o=we(f[1]);let a;for(a=0;a<o.length;a+=1){const c=xn(f,o,a);u[a]?u[a].p(c,i):(u[a]=nl(c),u[a].c(),u[a].m(t,null))}for(;a<u.length;a+=1)u[a].d(1);u.length=o.length}},i:ee,o:ee,d(f){f&&(m(e),m(l),m(t)),Qe(s,f),Qe(u,f)}}}function Zr(r,e,l){let{colorScale:t}=e,{limits:n}=e;return r.$$set=s=>{"colorScale"in s&&l(0,t=s.colorScale),"limits"in s&&l(1,n=s.limits)},[t,n]}class Ge extends K{constructor(e){super(),X(this,e,Zr,Qr,V,{colorScale:0,limits:1})}}function he(r){let e=new URLSearchParams(window.location.search).has(r),l=Ae(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(r,"1"):n.searchParams.delete(r),window.history.replaceState(null,"",n.toString())}),l}function kt(r,e,l,t){let n=e,s=new URLSearchParams(window.location.search).get(r);if(s!=null)try{n=t(s)}catch(u){console.warn(`Parsing URL parameter ${r}=${s} failed, using default value: ${u}`)}let o=Ae(n);return o.subscribe(u=>{let f=new URL(window.location.href),i=l(u);i==null?f.searchParams.delete(r):f.searchParams.set(r,i),window.history.replaceState(null,"",f.toString())}),o}function ll(r){const e=r[14].OA21CD;r[15]=e;const l=r[14][r[3].kind];r[16]=l}function Kr(r){let e;return{c(){e=v("Percent of households with a car")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Xr(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function xr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function eo(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function to(r){let e,l,t,n,s,o,u,f,i,a,c,$;return t=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Xr]},$$scope:{ctx:r}}}),s=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[xr]},$$scope:{ctx:r}}}),a=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[eo]},$$scope:{ctx:r}}}),{c(){e=T("p"),l=v("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),n=v(". Output area boundaries from "),b(s.$$.fragment),o=v("."),u=I(),f=T("p"),i=v("License: "),b(a.$$.fragment),c=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(_,y){p(_,e,y),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),p(_,u,y),p(_,f,y),h(f,i),k(a,f,null),h(f,c),$=!0},p(_,y){const S={};y&131072&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const C={};y&131072&&(C.$$scope={dirty:y,ctx:_}),s.$set(C);const N={};y&131072&&(N.$$scope={dirty:y,ctx:_}),a.$set(N)},i(_){$||(g(t.$$.fragment,_),g(s.$$.fragment,_),g(a.$$.fragment,_),$=!0)},o(_){d(t.$$.fragment,_),d(s.$$.fragment,_),d(a.$$.fragment,_),$=!1},d(_){_&&(m(e),m(u),m(f)),w(t),w(s),w(a)}}}function no(r){let e,l,t;return l=new $e({props:{$$slots:{default:[to]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function sl(r){let e,l;return e=new Ge({props:{colorScale:r[4],limits:ft(r[3].kind)}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=ft(t[3].kind)),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function lo(r){let e;return{c(){e=v("Average cars per household")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function so(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ro(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function oo(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function io(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y;return s=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[so]},$$scope:{ctx:r}}}),u=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ro]},$$scope:{ctx:r}}}),$=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[oo]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=I(),t=T("p"),n=v("Car/van availability data is from the 2021 census, via "),b(s.$$.fragment),o=v(". Output area boundaries from "),b(u.$$.fragment),f=v("."),i=I(),a=T("p"),c=v("License: "),b($.$$.fragment),_=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(S,C){p(S,e,C),p(S,l,C),p(S,t,C),h(t,n),k(s,t,null),h(t,o),k(u,t,null),h(t,f),p(S,i,C),p(S,a,C),h(a,c),k($,a,null),h(a,_),y=!0},p(S,C){const N={};C&131072&&(N.$$scope={dirty:C,ctx:S}),s.$set(N);const A={};C&131072&&(A.$$scope={dirty:C,ctx:S}),u.$set(A);const D={};C&131072&&(D.$$scope={dirty:C,ctx:S}),$.$set(D)},i(S){y||(g(s.$$.fragment,S),g(u.$$.fragment,S),g($.$$.fragment,S),y=!0)},o(S){d(s.$$.fragment,S),d(u.$$.fragment,S),d($.$$.fragment,S),y=!1},d(S){S&&(m(e),m(l),m(t),m(i),m(a)),w(s),w(u),w($)}}}function fo(r){let e,l,t;return l=new $e({props:{$$slots:{default:[io]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function rl(r){let e,l;return e=new Ge({props:{colorScale:r[4],limits:ft(r[3].kind)}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=ft(t[3].kind)),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ao(r){let e;return{c(){e=v("Population density")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function uo(r){let e;return{c(){e=v(`NOMIS TS006
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function co(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function $o(r){let e,l,t,n,s,o,u,f,i;return t=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[uo]},$$scope:{ctx:r}}}),s=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[co]},$$scope:{ctx:r}}}),f=new Te({}),{c(){e=T("p"),l=v("Population density data is from the 2021 census, via "),b(t.$$.fragment),n=v(". Output area boundaries from "),b(s.$$.fragment),o=v("."),u=I(),b(f.$$.fragment)},m(a,c){p(a,e,c),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&131072&&($.$$scope={dirty:c,ctx:a}),t.$set($);const _={};c&131072&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){i||(g(t.$$.fragment,a),g(s.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(u)),w(t),w(s),w(f,a)}}}function po(r){let e,l,t;return l=new $e({props:{$$slots:{default:[$o]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function ol(r){let e,l,t,n;return t=new Ge({props:{colorScale:r[4],limits:ft(r[3].kind).map(il)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",l=I(),b(t.$$.fragment)},m(s,o){p(s,e,o),p(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&8&&(u.limits=ft(s[3].kind).map(il)),t.$set(u)},i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(m(e),m(l)),w(t,s)}}}function mo(r){let e,l,t,n=r[16].toLocaleString()+"",s,o,u=r[15]+"",f;return{c(){e=T("p"),l=v("There are "),t=T("b"),s=v(n),o=v(`
          people per square kilometre in `),f=v(u)},m(i,a){p(i,e,a),h(e,l),h(e,t),h(t,s),h(e,o),h(e,f)},p(i,a){a&16392&&n!==(n=i[16].toLocaleString()+"")&&G(s,n),a&16384&&u!==(u=i[15]+"")&&G(f,u)},d(i){i&&m(e)}}}function _o(r){let e,l,t=r[15]+"",n,s,o,u=r[16]+"",f,i;return{c(){e=T("p"),l=v("Households in "),n=v(t),s=v(` have an average of
          `),o=T("b"),f=v(u),i=v(`
          cars`)},m(a,c){p(a,e,c),h(e,l),h(e,n),h(e,s),h(e,o),h(o,f),h(e,i)},p(a,c){c&16384&&t!==(t=a[15]+"")&&G(n,t),c&16392&&u!==(u=a[16]+"")&&G(f,u)},d(a){a&&m(e)}}}function go(r){let e,l,t=r[16]+"",n,s,o,u=r[15]+"",f,i;return{c(){e=T("p"),l=T("b"),n=v(t),s=v("%"),o=v(`
          of households in `),f=v(u),i=v(" have 1 or more cars")},m(a,c){p(a,e,c),h(e,l),h(l,n),h(l,s),h(e,o),h(e,f),h(e,i)},p(a,c){c&16392&&t!==(t=a[16]+"")&&G(n,t),c&16384&&u!==(u=a[15]+"")&&G(f,u)},d(a){a&&m(e)}}}function ho(r){ll(r);let e;function l(s,o){return s[3].kind=="percent_households_with_car"?go:s[3].kind=="average_cars_per_household"?_o:mo}let t=l(r),n=t(r);return{c(){n.c(),e=ve()},m(s,o){n.m(s,o),p(s,e,o)},p(s,o){ll(s),t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&m(e),n.d(s)}}}function bo(r){let e,l;return e=new ce({props:{$$slots:{default:[ho,({props:t})=>({14:t}),({props:t})=>t?16384:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&147464&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ko(r){let e,l,t,n;const s=[q(He),{sourceLayer:He},{paint:{"fill-color":de(["get",r[3].kind],ft(r[3].kind),r[4]),"fill-opacity":le(.5,.7)}},{layout:{visibility:r[3].kind!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[bo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=se(o,s[i]);e=new Fe({props:o}),e.$on("click",r[6]);const u=[q(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3].kind!=""?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=se(f,u[i]);return t=new ge({props:f}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&24?re(s,[a&0&&oe(q(He)),a&0&&{sourceLayer:He},a&24&&{paint:{"fill-color":de(["get",i[3].kind],ft(i[3].kind),i[4]),"fill-opacity":le(.5,.7)}},a&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}},s[4],s[5],s[6]]):{};a&131080&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&8?re(u,[a&0&&oe(q(`${He}-outline`)),a&0&&{sourceLayer:He},u[2],a&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function wo(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y;function S(L){r[7](L)}let C={$$slots:{right:[no],default:[Kr]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new ie({props:C}),H.push(()=>E(e,"checked",S)),e.$on("change",r[8]);let N=r[3].kind=="percent_households_with_car"&&sl(r);function A(L){r[9](L)}let D={$$slots:{right:[fo],default:[lo]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),s=new ie({props:D}),H.push(()=>E(s,"checked",A)),s.$on("change",r[10]);let P=r[3].kind=="average_cars_per_household"&&rl(r);function M(L){r[11](L)}let O={$$slots:{right:[po],default:[ao]},$$scope:{ctx:r}};r[2]!==void 0&&(O.checked=r[2]),i=new ie({props:O}),H.push(()=>E(i,"checked",M)),i.$on("change",r[12]);let j=r[3].kind=="population_density"&&ol(r);return _=new _e({props:{url:`pmtiles://${me()}/v1/${He}.pmtiles`,$$slots:{default:[ko]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),N&&N.c(),n=I(),b(s.$$.fragment),u=I(),P&&P.c(),f=I(),b(i.$$.fragment),c=I(),j&&j.c(),$=I(),b(_.$$.fragment)},m(L,R){k(e,L,R),p(L,t,R),N&&N.m(L,R),p(L,n,R),k(s,L,R),p(L,u,R),P&&P.m(L,R),p(L,f,R),k(i,L,R),p(L,c,R),j&&j.m(L,R),p(L,$,R),k(_,L,R),y=!0},p(L,[R]){const W={};R&131072&&(W.$$scope={dirty:R,ctx:L}),!l&&R&1&&(l=!0,W.checked=L[0],B(()=>l=!1)),e.$set(W),L[3].kind=="percent_households_with_car"?N?(N.p(L,R),R&8&&g(N,1)):(N=sl(L),N.c(),g(N,1),N.m(n.parentNode,n)):N&&(ae(),d(N,1,1,()=>{N=null}),ue());const Q={};R&131072&&(Q.$$scope={dirty:R,ctx:L}),!o&&R&2&&(o=!0,Q.checked=L[1],B(()=>o=!1)),s.$set(Q),L[3].kind=="average_cars_per_household"?P?(P.p(L,R),R&8&&g(P,1)):(P=rl(L),P.c(),g(P,1),P.m(f.parentNode,f)):P&&(ae(),d(P,1,1,()=>{P=null}),ue());const F={};R&131072&&(F.$$scope={dirty:R,ctx:L}),!a&&R&4&&(a=!0,F.checked=L[2],B(()=>a=!1)),i.$set(F),L[3].kind=="population_density"?j?(j.p(L,R),R&8&&g(j,1)):(j=ol(L),j.c(),g(j,1),j.m($.parentNode,$)):j&&(ae(),d(j,1,1,()=>{j=null}),ue());const Y={};R&131080&&(Y.$$scope={dirty:R,ctx:L}),_.$set(Y)},i(L){y||(g(e.$$.fragment,L),g(N),g(s.$$.fragment,L),g(P),g(i.$$.fragment,L),g(j),g(_.$$.fragment,L),y=!0)},o(L){d(e.$$.fragment,L),d(N),d(s.$$.fragment,L),d(P),d(i.$$.fragment,L),d(j),d(_.$$.fragment,L),y=!1},d(L){L&&(m(t),m(n),m(u),m(f),m(c),m($)),w(e,L),N&&N.d(L),w(s,L),P&&P.d(L),w(i,L),j&&j.d(L),w(_,L)}}}let He="census_output_areas";function vo(r){return r.show?r.kind:null}function yo(r){return{show:!0,kind:r}}function ft(r){return r=="percent_households_with_car"?[0,20,40,60,80,100]:r=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const il=r=>r.toLocaleString();function So(r,e,l){let t,n=ne.sequential_low_to_high,o=kt(He,{show:!1,kind:""},vo,yo);x(r,o,N=>l(3,t=N));let u=t.kind=="percent_households_with_car",f=t.kind=="average_cars_per_household",i=t.kind=="population_density";function a(N){let A=N.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${A}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${A}`,"_blank")}function c(N){u=N,l(0,u)}const $=()=>{l(1,f=!1),l(2,i=!1)};function _(N){f=N,l(1,f)}const y=()=>{l(0,u=!1),l(2,i=!1)};function S(N){i=N,l(2,i)}const C=()=>{l(0,u=!1),l(1,f=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(u?(De(o,t.show=!0,t),De(o,t.kind="percent_households_with_car",t)):f?(De(o,t.show=!0,t),De(o,t.kind="average_cars_per_household",t)):i?(De(o,t.show=!0,t),De(o,t.kind="population_density",t)):(De(o,t.show=!1,t),De(o,t.kind="",t)))},[u,f,i,t,n,o,a,c,$,_,y,S,C]}class Co extends K{constructor(e){super(),X(this,e,So,wo,V,{})}}function To(r){let e,l,t;return e=new Ce({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Combined authorities`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:ee,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Lo(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Io(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Lo]},$$scope:{ctx:r}}}),o=new Te({}),{c(){e=T("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of December 2022."),s=I(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function Mo(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Io]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function No(r){let e,l=r[4].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&m(e)}}}function Oo(r){let e,l;return e=new ce({props:{$$slots:{default:[No,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Po(r){let e,l,t,n;const s=[q(St),{paint:{"fill-color":r[1],"fill-opacity":le(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Oo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=se(o,s[i]);e=new Fe({props:o}),e.$on("click",Ro);const u=[q(`${St}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=se(f,u[i]);return t=new ge({props:f}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&3?re(s,[a&0&&oe(q(St)),a&2&&{paint:{"fill-color":i[1],"fill-opacity":le(0,.5)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}},s[3],s[4],s[5]]):{};a&32&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&3?re(u,[a&0&&oe(q(`${St}-outline`)),a&2&&{paint:{"line-color":i[1],"line-width":2.5}},a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function jo(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[Mo],default:[To]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),H.push(()=>E(e,"checked",o)),n=new bt({props:{data:`${me()}/v1/${St}.geojson`,$$slots:{default:[Po]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],B(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let St="combined_authorities";function Ro(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Do(r,e,l){let t,n=ne.combined_authorities,s=he(St);x(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Ao extends K{constructor(e){super(),X(this,e,Do,jo,V,{})}}function Fo(r){let e;return{c(){e=v("Indices of Multiple Deprivation")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Go(r){let e;return{c(){e=v(`DLUCH GIS
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function qo(r){let e;return{c(){e=v(`here
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function zo(r){let e,l,t,n,s,o,u,f,i;return t=new te({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Go]},$$scope:{ctx:r}}}),s=new te({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[qo]},$$scope:{ctx:r}}}),f=new Te({}),{c(){e=T("p"),l=v("The 2019 English IMD scores come from "),b(t.$$.fragment),n=v(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(s.$$.fragment),o=v("."),u=I(),b(f.$$.fragment)},m(a,c){p(a,e,c),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),t.$set($);const _={};c&64&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){i||(g(t.$$.fragment,a),g(s.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(u)),w(t),w(s),w(f,a)}}}function Ho(r){let e,l,t;return l=new $e({props:{$$slots:{default:[zo]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function fl(r){let e,l;return e=new Ge({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:ee,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Eo(r){let e,l=r[5].LSOA11CD+"",t,n,s,o=r[5].score+"",u,f,i,a,c,$=r[5].rank.toLocaleString()+"",_,y;return{c(){e=T("p"),t=v(l),n=v(` has an IMD score of
        `),s=T("b"),u=v(o),f=I(),i=T("p"),a=v("Rank: "),c=T("b"),_=v($),y=v(`
        / 32,844 LSOAs`)},m(S,C){p(S,e,C),h(e,t),h(e,n),h(e,s),h(s,u),p(S,f,C),p(S,i,C),h(i,a),h(i,c),h(c,_),h(i,y)},p(S,C){C&32&&l!==(l=S[5].LSOA11CD+"")&&G(t,l),C&32&&o!==(o=S[5].score+"")&&G(u,o),C&32&&$!==($=S[5].rank.toLocaleString()+"")&&G(_,$)},d(S){S&&(m(e),m(f),m(i))}}}function Bo(r){let e,l;return e=new ce({props:{$$slots:{default:[Eo,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Uo(r){let e,l,t,n;const s=[q(Ee),{sourceLayer:Ee},{paint:{"fill-color":de(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":le(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[Bo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=se(o,s[i]);e=new Fe({props:o});const u=[q(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=se(f,u[i]);return t=new ge({props:f}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&7?re(s,[a&0&&oe(q(Ee)),a&0&&{sourceLayer:Ee},a&6&&{paint:{"fill-color":de(["-",10,["get","decile"]],i[2],i[1]),"fill-opacity":le(.5,.7)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5]]):{};a&64&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&1?re(u,[a&0&&oe(q(`${Ee}-outline`)),a&0&&{sourceLayer:Ee},u[2],a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function Wo(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[Ho],default:[Fo]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0]&&fl(r);return s=new _e({props:{url:`pmtiles://${me()}/v1/${Ee}.pmtiles`,$$slots:{default:[Uo]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],B(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=fl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&65&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Ee="imd";function Yo(r,e,l){let t,n=ne.sequential_low_to_high,s=[0,2,4,6,8,10],o=he(Ee);x(r,o,f=>l(0,t=f));function u(f){t=f,o.set(t)}return[t,n,s,o,u]}class Jo extends K{constructor(e){super(),X(this,e,Yo,Wo,V,{})}}function Vo(r){let e,l,t;return e=new Ce({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Local Authority Districts`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:ee,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Qo(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Zo(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Qo]},$$scope:{ctx:r}}}),o=new Te({}),{c(){e=T("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of January 2024."),s=I(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function Ko(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Zo]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Xo(r){let e,l=r[4].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&m(e)}}}function xo(r){let e,l;return e=new ce({props:{$$slots:{default:[Xo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ei(r){let e,l,t,n;const s=[q(Ct),{paint:{"fill-color":r[1],"fill-opacity":le(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[xo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=se(o,s[i]);e=new Fe({props:o}),e.$on("click",ni);const u=[q(`${Ct}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=se(f,u[i]);return t=new ge({props:f}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&3?re(s,[a&0&&oe(q(Ct)),a&2&&{paint:{"fill-color":i[1],"fill-opacity":le(0,.5)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}},s[3],s[4],s[5]]):{};a&32&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&3?re(u,[a&0&&oe(q(`${Ct}-outline`)),a&2&&{paint:{"line-color":i[1],"line-width":2.5}},a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function ti(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[Ko],default:[Vo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),H.push(()=>E(e,"checked",o)),n=new bt({props:{data:`${me()}/v1/${Ct}.geojson`,$$slots:{default:[ei]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],B(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Ct="local_authority_districts";function ni(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function li(r,e,l){let t,n=ne.local_authority_districts,s=he(Ct);x(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class si extends K{constructor(e){super(),X(this,e,li,ti,V,{})}}function ri(r){let e,l,t;return e=new Ce({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Local Planning Authorities`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:ee,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function oi(r){let e;return{c(){e=v(`local authority
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ii(r){let e;return{c(){e=v(`national park authorit
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function fi(r){let e;return{c(){e=v(`development corporation
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ai(r){let e;return{c(){e=v("this map")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ui(r){let e;return{c(){e=v(`planning.data.gov.uk
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ci(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y,S,C,N,A,D,P,M,O;return t=new te({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[oi]},$$scope:{ctx:r}}}),s=new te({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ii]},$$scope:{ctx:r}}}),u=new te({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[fi]},$$scope:{ctx:r}}}),_=new te({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ai]},$$scope:{ctx:r}}}),A=new te({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ui]},$$scope:{ctx:r}}}),M=new Te({}),{c(){e=T("p"),l=v("LPAs may be a "),b(t.$$.fragment),n=v(", "),b(s.$$.fragment),o=v("y, or "),b(u.$$.fragment),f=v("."),i=I(),a=T("p"),c=T("strong"),$=v(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(_.$$.fragment),y=v(" to get more details."),S=I(),C=T("p"),N=v("Data from ONS Geography via "),b(A.$$.fragment),D=v(", as of November 2022."),P=I(),b(M.$$.fragment)},m(j,L){p(j,e,L),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),k(u,e,null),h(e,f),p(j,i,L),p(j,a,L),h(a,c),h(c,$),k(_,c,null),h(c,y),p(j,S,L),p(j,C,L),h(C,N),k(A,C,null),h(C,D),p(j,P,L),k(M,j,L),O=!0},p(j,L){const R={};L&32&&(R.$$scope={dirty:L,ctx:j}),t.$set(R);const W={};L&32&&(W.$$scope={dirty:L,ctx:j}),s.$set(W);const Q={};L&32&&(Q.$$scope={dirty:L,ctx:j}),u.$set(Q);const F={};L&32&&(F.$$scope={dirty:L,ctx:j}),_.$set(F);const Y={};L&32&&(Y.$$scope={dirty:L,ctx:j}),A.$set(Y)},i(j){O||(g(t.$$.fragment,j),g(s.$$.fragment,j),g(u.$$.fragment,j),g(_.$$.fragment,j),g(A.$$.fragment,j),g(M.$$.fragment,j),O=!0)},o(j){d(t.$$.fragment,j),d(s.$$.fragment,j),d(u.$$.fragment,j),d(_.$$.fragment,j),d(A.$$.fragment,j),d(M.$$.fragment,j),O=!1},d(j){j&&(m(e),m(i),m(a),m(S),m(C),m(P)),w(t),w(s),w(u),w(_),w(A),w(M,j)}}}function $i(r){let e,l,t;return l=new $e({props:{$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function pi(r){let e,l=r[4].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&m(e)}}}function mi(r){let e,l;return e=new ce({props:{$$slots:{default:[pi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function _i(r){let e,l,t,n;const s=[q(Be),{sourceLayer:Be},{paint:{"fill-color":r[1],"fill-opacity":le(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[mi]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=se(o,s[i]);e=new Fe({props:o});const u=[q(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=se(f,u[i]);return t=new ge({props:f}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&3?re(s,[a&0&&oe(q(Be)),a&0&&{sourceLayer:Be},a&2&&{paint:{"fill-color":i[1],"fill-opacity":le(0,.5)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5]]):{};a&32&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&3?re(u,[a&0&&oe(q(`${Be}-outline`)),a&0&&{sourceLayer:Be},a&2&&{paint:{"line-color":i[1],"line-width":2.5}},a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function gi(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[$i],default:[ri]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),H.push(()=>E(e,"checked",o)),n=new _e({props:{url:`pmtiles://${me()}/v1/${Be}.pmtiles`,$$slots:{default:[_i]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],B(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Be="local_planning_authorities";function di(r,e,l){let t,n=ne.local_planning_authorities,s=he(Be);x(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class hi extends K{constructor(e){super(),X(this,e,di,gi,V,{})}}function bi(r){let e,l,t;return e=new Ce({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Parliamentary constituencies`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:ee,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function ki(r){let e;return{c(){e=v(`Ordnance Survey Boundary-Line
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function wi(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ki]},$$scope:{ctx:r}}}),o=new Te({}),{c(){e=T("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of May 2023."),s=I(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function vi(r){let e,l,t;return l=new $e({props:{$$slots:{default:[wi]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function yi(r){let e,l=r[4].Name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].Name+"")&&G(t,l)},d(n){n&&m(e)}}}function Si(r){let e,l;return e=new ce({props:{$$slots:{default:[yi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ci(r){let e,l,t,n;const s=[q(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":le(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Si]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=se(o,s[i]);e=new Fe({props:o}),e.$on("click",Li);const u=[q(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=se(f,u[i]);return t=new ge({props:f}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&3?re(s,[a&0&&oe(q(Ue)),a&0&&{sourceLayer:Ue},a&2&&{paint:{"fill-color":i[1],"fill-opacity":le(0,.5)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5],s[6]]):{};a&32&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&3?re(u,[a&0&&oe(q(`${Ue}-outline`)),a&0&&{sourceLayer:Ue},a&2&&{paint:{"line-color":i[1],"line-width":5}},a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function Ti(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[vi],default:[bi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),H.push(()=>E(e,"checked",o)),n=new _e({props:{url:`pmtiles://${me()}/v1/${Ue}.pmtiles`,$$slots:{default:[Ci]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],B(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Ue="parliamentary_constituencies";function Li(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ii(r,e,l){let t,n=ne.parliamentary_constituencies,s=he(Ue);x(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Mi extends K{constructor(e){super(),X(this,e,Ii,Ti,V,{})}}function Ni(r){let e;return{c(){e=v("Pollution")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Oi(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Pi(r){let e,l,t,n,s,o,u,f,i;return t=new te({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Oi]},$$scope:{ctx:r}}}),f=new Te({}),{c(){e=T("p"),l=v("Most layers show air quality data from "),b(t.$$.fragment),n=v(`. The measurements are annual means, in units of
        µgm
        `),s=T("sup"),s.textContent="3",o=v(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=I(),b(f.$$.fragment)},m(a,c){p(a,e,c),h(e,l),k(t,e,null),h(e,n),h(e,s),h(e,o),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&4096&&($.$$scope={dirty:c,ctx:a}),t.$set($)},i(a){i||(g(t.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(t.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(u)),w(t),w(f,a)}}}function ji(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Pi]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&4096&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function al(r){let e,l,t,n,s=r[3](r[0].pollutant)+"",o,u,f,i,a,c,$,_,y,S,C,N,A;function D(M){r[6](M)}let P={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return r[0].pollutant!==void 0&&(P.value=r[0].pollutant),e=new dt({props:P}),H.push(()=>E(e,"value",D)),{c(){b(e.$$.fragment),t=I(),n=T("p"),o=v(s),u=I(),f=T("div"),i=T("label"),a=v(`Opacity
      `),c=T("input"),$=I(),_=T("img"),z(c,"type","range"),z(c,"min","0"),z(c,"max","100"),Kt(_.src,y=r[4](r[0].pollutant))||z(_,"src",y),z(_,"width",150),z(_,"alt",S=`Legend for ${r[0].pollutant} layer`)},m(M,O){k(e,M,O),p(M,t,O),p(M,n,O),h(n,o),p(M,u,O),p(M,f,O),h(f,i),h(i,a),h(i,c),Je(c,r[0].opacity),p(M,$,O),p(M,_,O),C=!0,N||(A=[tt(c,"change",r[7]),tt(c,"input",r[7])],N=!0)},p(M,O){const j={};!l&&O&1&&(l=!0,j.value=M[0].pollutant,B(()=>l=!1)),e.$set(j),(!C||O&1)&&s!==(s=M[3](M[0].pollutant)+"")&&G(o,s),O&1&&Je(c,M[0].opacity),(!C||O&1&&!Kt(_.src,y=M[4](M[0].pollutant)))&&z(_,"src",y),(!C||O&1&&S!==(S=`Legend for ${M[0].pollutant} layer`))&&z(_,"alt",S)},i(M){C||(g(e.$$.fragment,M),C=!0)},o(M){d(e.$$.fragment,M),C=!1},d(M){M&&(m(t),m(n),m(u),m(f),m($),m(_)),w(e,M),N=!1,Rs(A)}}}function Ri(r){let e,l;const t=[q("pollution"),{paint:{"raster-opacity":r[0].opacity/100}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ir({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?re(t,[t[0],{paint:{"raster-opacity":s[0].opacity/100}},{layout:{visibility:s[0].show?"visible":"none"}}]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Di(r){let e,l,t,n,s,o;function u(a){r[5](a)}let f={$$slots:{right:[ji],default:[Ni]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0].show&&al(r);return s=new Or({props:{tiles:[r[1]],tileSize:256,$$slots:{default:[Ri]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&4096&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0].show,B(()=>l=!1)),e.$set($),a[0].show?i?(i.p(a,c),c&1&&g(i,1)):(i=al(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&2&&(_.tiles=[a[1]]),c&4097&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}function Ai(r){return r.show?`${r.pollutant}/${r.opacity}`:null}function Fi(r){let[e,l]=r.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function Gi(r,e,l){let t,n,s,u=kt("pollution",{show:!1,pollutant:"PM25_viridis",opacity:50},Ai,Fi);x(r,u,S=>l(0,s=S));function f(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s.pollutant}/MapServer/WMSServer`}function i(S){return t[1]}function a(S){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${f()}?bbox={bbox-epsg-3857}&${C}`}function c(S){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${f()}?${C}`}function $(S){r.$$.not_equal(s.show,S)&&(s.show=S,u.set(s))}function _(S){r.$$.not_equal(s.pollutant,S)&&(s.pollutant=S,u.set(s))}function y(){s.opacity=Wt(this.value),u.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s.pollutant]),r.$$.dirty&1&&l(1,n=a(s.pollutant))},[s,n,u,i,c,$,_,y]}class qi extends K{constructor(e){super(),X(this,e,Gi,Di,V,{})}}function zi(r){let e;return{c(){e=v("Road noise")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Hi(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ei(r){let e,l,t,n,s,o,u,f,i;return s=new te({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),f=new Te({}),{c(){e=T("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,l=I(),t=T("p"),n=v("Data from June 2019, produced by "),b(s.$$.fragment),o=v(". See there for methodology details"),u=I(),b(f.$$.fragment)},m(a,c){p(a,e,c),p(a,l,c),p(a,t,c),h(t,n),k(s,t,null),h(t,o),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&32&&($.$$scope={dirty:c,ctx:a}),s.$set($)},i(a){i||(g(s.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(s.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(l),m(t),m(u)),w(s),w(f,a)}}}function Bi(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function ul(r){let e,l;return e=new Ge({props:{colorScale:r[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:ee,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ui(r){let e,l=r[4].noiseclass+"",t,n,s=cl(r[4].noiseclass)+"",o,u;return{c(){e=T("p"),t=v(l),n=v(" dB ("),o=v(s),u=v(")")},m(f,i){p(f,e,i),h(e,t),h(e,n),h(e,o),h(e,u)},p(f,i){i&16&&l!==(l=f[4].noiseclass+"")&&G(t,l),i&16&&s!==(s=cl(f[4].noiseclass)+"")&&G(o,s)},d(f){f&&m(e)}}}function Wi(r){let e,l;return e=new ce({props:{$$slots:{default:[Ui,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Yi(r){let e,l;const t=[q(Tt),{sourceLayer:Tt},{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":le(.5,.8)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Wi]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new Fe({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?re(t,[o&0&&oe(q(Tt)),o&0&&{sourceLayer:Tt},o&2&&{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":s[1][0],"60.0-64.9":s[1][0],"65.0-69.9":s[1][1],"70.0-74.9":s[1][1],">=75.0":s[1][2]},"red"),"fill-opacity":le(.5,.8)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ji(r){let e,l,t,n,s,o;function u(a){r[3](a)}let f={$$slots:{right:[Bi],default:[zi]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0]&&ul(r);return s=new _e({props:{url:`pmtiles://${me()}/v1/${Tt}.pmtiles`,$$slots:{default:[Yi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&32&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],B(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=ul(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&33&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Tt="road_noise";function cl(r){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[r]}function Vi(r,e,l){let t,n=[ne.sequential_low_to_high[0],ne.sequential_low_to_high[2],ne.sequential_low_to_high[4]],s=he(Tt);x(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Qi extends K{constructor(e){super(),X(this,e,Vi,Ji,V,{})}}function Zi(r){let e,l,t;return e=new Ce({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Wards`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:ee,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Ki(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Xi(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ki]},$$scope:{ctx:r}}}),o=new Te({}),{c(){e=T("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of May 2023."),s=I(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function xi(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Xi]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function ef(r){let e,l=r[4].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&m(e)}}}function tf(r){let e,l;return e=new ce({props:{$$slots:{default:[ef,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function nf(r){let e,l,t,n;const s=[q(We),{sourceLayer:We},{paint:{"fill-color":r[1],"fill-opacity":le(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[tf]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=se(o,s[i]);e=new Fe({props:o}),e.$on("click",sf);const u=[q(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=se(f,u[i]);return t=new ge({props:f}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&3?re(s,[a&0&&oe(q(We)),a&0&&{sourceLayer:We},a&2&&{paint:{"fill-color":i[1],"fill-opacity":le(0,.5)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5],s[6]]):{};a&32&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&3?re(u,[a&0&&oe(q(`${We}-outline`)),a&0&&{sourceLayer:We},a&2&&{paint:{"line-color":i[1],"line-width":2.5}},a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function lf(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[xi],default:[Zi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),H.push(()=>E(e,"checked",o)),n=new _e({props:{url:`pmtiles://${me()}/v1/${We}.pmtiles`,$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],B(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let We="wards";function sf(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function rf(r,e,l){let t,n=ne.wards,s=he(We);x(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class of extends K{constructor(e){super(),X(this,e,rf,lf,V,{})}}function ff(r){let e;return{c(){e=v("Open Data Commons Open Database License")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function af(r){let e,l,t,n;return t=new te({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[ff]},$$scope:{ctx:r}}}),{c(){e=T("p"),l=v("License: "),b(t.$$.fragment)},m(s,o){p(s,e,o),h(e,l),k(t,e,null),n=!0},p(s,[o]){const u={};o&1&&(u.$$scope={dirty:o,ctx:s}),t.$set(u)},i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&m(e),w(t)}}}class Ke extends K{constructor(e){super(),X(this,e,null,af,V,{})}}function uf(r){let e,l,t;return e=new Ce({props:{color:ne.bus_route_with_lane}}),{c(){b(e.$$.fragment),l=v(`
  Bus routes`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:ee,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function cf(r){let e;return{c(){e=v(`GTFS
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function $f(r){let e,l,t,n,s,o,u,f,i;return s=new te({props:{href:"https://gtfs.org",$$slots:{default:[cf]},$$scope:{ctx:r}}}),f=new Ke({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,l=I(),t=T("p"),n=v("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(s.$$.fragment),o=v(`, and doesn't include which routes are run or the
        frequency of service.`),u=I(),b(f.$$.fragment)},m(a,c){p(a,e,c),p(a,l,c),p(a,t,c),h(t,n),k(s,t,null),h(t,o),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&16&&($.$$scope={dirty:c,ctx:a}),s.$set($)},i(a){i||(g(s.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(s.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(l),m(t),m(u)),w(s),w(f,a)}}}function pf(r){let e,l,t;return l=new $e({props:{$$slots:{default:[$f]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function mf(r){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function _f(r){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function gf(r){let e;function l(s,o){return s[3].has_bus_lane?_f:mf}let t=l(r),n=t(r);return{c(){n.c(),e=ve()},m(s,o){n.m(s,o),p(s,e,o)},p(s,o){t!==(t=l(s))&&(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&m(e),n.d(s)}}}function df(r){let e,l;return e=new ce({props:{$$slots:{default:[gf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function hf(r){let e,l;const t=[q(Lt),{sourceLayer:Lt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ne.bus_route_with_lane,ne.bus_route_without_lane],"line-width":5,"line-opacity":le(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[df]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?re(t,[o&0&&oe(q(Lt)),o&0&&{sourceLayer:Lt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function bf(r){let e,l,t,n,s;function o(f){r[2](f)}let u={$$slots:{right:[pf],default:[uf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),H.push(()=>E(e,"checked",o)),n=new _e({props:{url:`pmtiles://${me()}/v1/${Lt}.pmtiles`,$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&16&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],B(()=>l=!1)),e.$set(a);const c={};i&17&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Lt="bus_routes";function kf(r,e,l){let t,n=he(Lt);x(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class wf extends K{constructor(e){super(),X(this,e,kf,bf,V,{})}}function $l(r){const e=Pf(r[9]);r[10]=e[0],r[11]=e[1],r[12]=e[2]}function pl(r,e,l){const t=r.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function vf(r){let e;return{c(){e=v("Cycle paths")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function yf(r){let e,l,t,n,s,o,u,f;return u=new Ke({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,l=I(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,n=I(),s=T("p"),s.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,o=I(),b(u.$$.fragment)},m(i,a){p(i,e,a),p(i,l,a),p(i,t,a),p(i,n,a),p(i,s,a),p(i,o,a),k(u,i,a),f=!0},p:ee,i(i){f||(g(u.$$.fragment,i),f=!0)},o(i){d(u.$$.fragment,i),f=!1},d(i){i&&(m(e),m(l),m(t),m(n),m(s),m(o)),w(u,i)}}}function Sf(r){let e,l,t;return l=new $e({props:{$$slots:{default:[yf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function ml(r){let e,l,t;return l=new lt({props:{$$slots:{default:[Tf]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(l.$$.fragment),pe(e,"border","1px solid black"),pe(e,"padding","8px")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131073&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Cf(r){let e,l,t=r[13]+"",n,s,o;return e=new Ce({props:{color:r[14]}}),{c(){b(e.$$.fragment),l=I(),n=v(t),s=I()},m(u,f){k(e,u,f),p(u,l,f),p(u,n,f),p(u,s,f),o=!0},p:ee,i(u){o||(g(e.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),o=!1},d(u){u&&(m(l),m(n),m(s)),w(e,u)}}}function _l(r){let e,l,t;function n(o){r[5](o,r[10])}let s={$$slots:{default:[Cf]},$$scope:{ctx:r}};return r[0][r[10]]!==void 0&&(s.checked=r[0][r[10]]),e=new ie({props:s}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(o,u){k(e,o,u),t=!0},p(o,u){r=o;const f={};u&131072&&(f.$$scope={dirty:u,ctx:r}),!l&&u&5&&(l=!0,f.checked=r[0][r[10]],B(()=>l=!1)),e.$set(f)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function Tf(r){let e,l,t=we(r[2]),n=[];for(let o=0;o<t.length;o+=1)n[o]=_l(pl(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ve()},m(o,u){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(o,u);p(o,e,u),l=!0},p(o,u){if(u&5){t=we(o[2]);let f;for(f=0;f<t.length;f+=1){const i=pl(o,t,f);n[f]?(n[f].p(i,u),g(n[f],1)):(n[f]=_l(i),n[f].c(),g(n[f],1),n[f].m(e.parentNode,e))}for(ae(),f=t.length;f<n.length;f+=1)s(f);ue()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)g(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&m(e),Qe(n,o)}}}function Lf(r){$l(r);let e,l=r[10]+"",t,n,s,o,u,f=r[11]+"",i,a,c,$,_=r[12]+"",y;return{c(){e=T("h2"),t=v(l),n=I(),s=T("p"),o=v("Direction: "),u=T("b"),i=I(),a=T("p"),c=v("Width: "),$=T("b"),y=v(_)},m(S,C){p(S,e,C),h(e,t),p(S,n,C),p(S,s,C),h(s,o),h(s,u),u.innerHTML=f,p(S,i,C),p(S,a,C),h(a,c),h(a,$),h($,y)},p(S,C){$l(S),C&512&&l!==(l=S[10]+"")&&G(t,l),C&512&&f!==(f=S[11]+"")&&(u.innerHTML=f),C&512&&_!==(_=S[12]+"")&&G(y,_)},d(S){S&&(m(e),m(n),m(s),m(i),m(a))}}}function If(r){let e,l;return e=new ce({props:{$$slots:{default:[Lf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&131584&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Mf(r){let e,l;const t=[q(It),{sourceLayer:It},{paint:{"line-color":Ze(["get","kind"],{track:ne.cycle_paths.track,lane:ne.cycle_paths.lane,shared_use_segregated:ne.cycle_paths.shared_use_segregated,shared_use_unsegregated:ne.cycle_paths.shared_use_unsegregated},"red"),"line-width":Re,"line-opacity":le(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[3](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[If]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ge({props:n}),e.$on("click",jf),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&9?re(t,[o&0&&oe(q(It)),o&0&&{sourceLayer:It},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&9&&{filter:s[3](s[0])},t[5],t[6],t[7]]):{};o&131072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Nf(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[Sf],default:[vf]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0].show&&ml(r);return s=new _e({props:{url:`pmtiles://${me()}/v1/${It}.pmtiles`,$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&131072&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0].show,B(()=>l=!1)),e.$set($),a[0].show?i?(i.p(a,c),c&1&&g(i,1)):(i=ml(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&131073&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let It="cycle_paths";function Of(r){return{show:!0,track:r.includes("track"),lane:r.includes("lane"),shared_use_segregated:r.includes("shared_use_segregated"),shared_use_unsegregated:r.includes("shared_use_unsegregated")}}function Pf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${l} ${r.direction}`,t]}function jf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Rf(r,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],s={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function o($){return $.show?n.filter(_=>$[_]).join(","):null}let u=kt(It,s,o,Of);x(r,u,$=>l(0,t=$));let f=[["track","Separated tracks",ne.cycle_paths.track],["lane","Unprotected lanes",ne.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",ne.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",ne.cycle_paths.shared_use_unsegregated]];function i($){let _=n.filter(y=>$[y]);return["in",["get","kind"],["literal",_]]}function a($){r.$$.not_equal(t.show,$)&&(t.show=$,u.set(t))}function c($,_){r.$$.not_equal(t[_],$)&&(t[_]=$,u.set(t))}return[t,u,f,i,a,c]}class Df extends K{constructor(e){super(),X(this,e,Rf,Nf,V,{})}}function Af(r){let e,l,t;return e=new Ce({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Major Road Network`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:ee,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Ff(r){let e;return{c(){e=v(`Major Road Network
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Gf(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Ff]},$$scope:{ctx:r}}}),o=new Te({}),{c(){e=T("p"),l=v("Data from the "),b(t.$$.fragment),n=v(", as of September 2021."),s=I(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function qf(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Gf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function zf(r){let e,l=(r[4].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&G(t,l)},d(n){n&&m(e)}}}function Hf(r){let e,l;return e=new ce({props:{$$slots:{default:[zf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ef(r){let e,l;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":le(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Hf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?re(t,[o&0&&oe(q(Mt)),o&0&&{sourceLayer:Mt},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":le(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Bf(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[qf],default:[Af]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),H.push(()=>E(e,"checked",o)),n=new _e({props:{url:`pmtiles://${me()}/v1/${Mt}.pmtiles`,$$slots:{default:[Ef]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],B(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Mt="mrn";function Uf(r,e,l){let t,n=ne.mrn,s=he(Mt);x(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Wf extends K{constructor(e){super(),X(this,e,Uf,Bf,V,{})}}function Yf(r){let e,l,t;return e=new Ce({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Strategic Road Network`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:ee,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function Jf(r){let e;return{c(){e=v(`OS Open Roads
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Vf(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Jf]},$$scope:{ctx:r}}}),o=new Te({}),{c(){e=T("p"),l=v("Data from "),b(t.$$.fragment),n=v(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),s=I(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function Qf(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Vf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Zf(r){let e,l=(r[4].name??"Unknown SRN road")+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&G(t,l)},d(n){n&&m(e)}}}function Kf(r){let e,l;return e=new ce({props:{$$slots:{default:[Zf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Xf(r){let e,l;const t=[q(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":le(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Kf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?re(t,[o&0&&oe(q(Nt)),o&0&&{sourceLayer:Nt},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":le(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function xf(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[Qf],default:[Yf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),H.push(()=>E(e,"checked",o)),n=new _e({props:{url:`pmtiles://${me()}/v1/${Nt}.pmtiles`,$$slots:{default:[Xf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],B(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Nt="srn";function ea(r,e,l){let t,n=ne.srn,s=he(Nt);x(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class ta extends K{constructor(e){super(),X(this,e,ea,xf,V,{})}}function na(r){let e,l,t;return e=new Ce({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  National Cycle Network`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:ee,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function la(r){let e;return{c(){e=v(`National Cycle Network
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function sa(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[la]},$$scope:{ctx:r}}}),o=new Te({}),{c(){e=T("p"),l=v("Data from Sustrans about the "),b(t.$$.fragment),n=v(", downloaded on 22/01/2024."),s=I(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function ra(r){let e,l,t;return l=new $e({props:{$$slots:{default:[sa]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function gl(r){let e,l,t,n=r[4].Desc_+"",s;return{c(){e=T("li"),l=v("Description: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Desc_+"")&&G(s,n)},d(o){o&&m(e)}}}function dl(r){let e,l,t,n=r[4].Greenway+"",s;return{c(){e=T("li"),l=v("Is greenway: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Greenway+"")&&G(s,n)},d(o){o&&m(e)}}}function hl(r){let e,l,t,n=r[4].RouteType+"",s;return{c(){e=T("li"),l=v("Route type: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteType+"")&&G(s,n)},d(o){o&&m(e)}}}function bl(r){let e,l,t,n=r[4].RouteNo+"",s;return{c(){e=T("li"),l=v("Route number: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteNo+"")&&G(s,n)},d(o){o&&m(e)}}}function kl(r){let e,l,t,n=r[4].RouteCat+"",s;return{c(){e=T("li"),l=v("Route Category: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteCat+"")&&G(s,n)},d(o){o&&m(e)}}}function wl(r){let e,l,t,n=r[4].OpenStatus+"",s;return{c(){e=T("li"),l=v("Open Status: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].OpenStatus+"")&&G(s,n)},d(o){o&&m(e)}}}function vl(r){let e,l,t,n=r[4].Surface+"",s;return{c(){e=T("li"),l=v("Surface: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Surface+"")&&G(s,n)},d(o){o&&m(e)}}}function yl(r){let e,l,t,n=r[4].Quality+"",s;return{c(){e=T("li"),l=v("Quality: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Quality+"")&&G(s,n)},d(o){o&&m(e)}}}function Sl(r){let e,l,t,n=r[4].RoadClass+"",s;return{c(){e=T("li"),l=v("Road Class: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RoadClass+"")&&G(s,n)},d(o){o&&m(e)}}}function oa(r){let e,l,t,n,s,o,u,f,i,a=r[4].Desc_&&gl(r),c=r[4].Greenway&&dl(r),$=r[4].RouteType&&hl(r),_=r[4].RouteNo&&bl(r),y=r[4].RouteCat&&kl(r),S=r[4].OpenStatus&&wl(r),C=r[4].Surface&&vl(r),N=r[4].Quality&&yl(r),A=r[4].RoadClass&&Sl(r);return{c(){e=T("ul"),a&&a.c(),l=I(),c&&c.c(),t=I(),$&&$.c(),n=I(),_&&_.c(),s=I(),y&&y.c(),o=I(),S&&S.c(),u=I(),C&&C.c(),f=I(),N&&N.c(),i=I(),A&&A.c()},m(D,P){p(D,e,P),a&&a.m(e,null),h(e,l),c&&c.m(e,null),h(e,t),$&&$.m(e,null),h(e,n),_&&_.m(e,null),h(e,s),y&&y.m(e,null),h(e,o),S&&S.m(e,null),h(e,u),C&&C.m(e,null),h(e,f),N&&N.m(e,null),h(e,i),A&&A.m(e,null)},p(D,P){D[4].Desc_?a?a.p(D,P):(a=gl(D),a.c(),a.m(e,l)):a&&(a.d(1),a=null),D[4].Greenway?c?c.p(D,P):(c=dl(D),c.c(),c.m(e,t)):c&&(c.d(1),c=null),D[4].RouteType?$?$.p(D,P):($=hl(D),$.c(),$.m(e,n)):$&&($.d(1),$=null),D[4].RouteNo?_?_.p(D,P):(_=bl(D),_.c(),_.m(e,s)):_&&(_.d(1),_=null),D[4].RouteCat?y?y.p(D,P):(y=kl(D),y.c(),y.m(e,o)):y&&(y.d(1),y=null),D[4].OpenStatus?S?S.p(D,P):(S=wl(D),S.c(),S.m(e,u)):S&&(S.d(1),S=null),D[4].Surface?C?C.p(D,P):(C=vl(D),C.c(),C.m(e,f)):C&&(C.d(1),C=null),D[4].Quality?N?N.p(D,P):(N=yl(D),N.c(),N.m(e,i)):N&&(N.d(1),N=null),D[4].RoadClass?A?A.p(D,P):(A=Sl(D),A.c(),A.m(e,null)):A&&(A.d(1),A=null)},d(D){D&&m(e),a&&a.d(),c&&c.d(),$&&$.d(),_&&_.d(),y&&y.d(),S&&S.d(),C&&C.d(),N&&N.d(),A&&A.d()}}}function ia(r){let e,l;return e=new ce({props:{$$slots:{default:[oa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function fa(r){let e,l;const t=[q(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":le(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[ia]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?re(t,[o&0&&oe(q(Ot)),o&0&&{sourceLayer:Ot},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":4,"line-opacity":le(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function aa(r){let e,l,t,n,s;function o(f){r[3](f)}let u={$$slots:{right:[ra],default:[na]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),H.push(()=>E(e,"checked",o)),n=new _e({props:{url:`pmtiles://${me()}/v1/${Ot}.pmtiles`,$$slots:{default:[fa]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],B(()=>l=!1)),e.$set(a);const c={};i&33&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Ot="national_cycle_network";function ua(r,e,l){let t,n=ne.national_cycle_network,s=he(Ot);x(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class ca extends K{constructor(e){super(),X(this,e,ua,aa,V,{})}}function Cl(r,e,l){const t=r.slice();return t[6]=e[l][0],t[7]=e[l][1],t[8]=e[l][2],t}function $a(r){let e;return{c(){e=v("OS Pavement widths")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function pa(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ma(r){let e,l,t,n,s,o,u,f,i,a,c;return i=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[pa]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,l=I(),t=T("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,n=I(),s=T("p"),s.textContent="Data valid as of 1 January, 2024",o=I(),u=T("p"),f=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(i.$$.fragment),a=v(".")},m($,_){p($,e,_),p($,l,_),p($,t,_),p($,n,_),p($,s,_),p($,o,_),p($,u,_),h(u,f),k(i,u,null),h(u,a),c=!0},p($,_){const y={};_&2048&&(y.$$scope={dirty:_,ctx:$}),i.$set(y)},i($){c||(g(i.$$.fragment,$),c=!0)},o($){d(i.$$.fragment,$),c=!1},d($){$&&(m(e),m(l),m(t),m(n),m(s),m(o),m(u)),w(i)}}}function _a(r){let e,l,t;return l=new $e({props:{$$slots:{default:[ma]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Tl(r){let e,l;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:ee,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ga(r){let e,l,t=Xt(r[5].angle+r[8])+"",n;return{c(){e=T("p"),l=new $t(!1),n=v(` side of the road: no pavement
          `),l.a=n},m(s,o){p(s,e,o),l.m(t,e),h(e,n)},p(s,o){o&32&&t!==(t=Xt(s[5].angle+s[8])+"")&&l.p(t)},d(s){s&&m(e)}}}function da(r){let e,l,t=Xt(r[5].angle+r[8])+"",n,s,o=r[6]+"",u,f,i,a=r[7]+"",c,$;return{c(){e=T("p"),l=new $t(!1),n=v(` side of the road:
            `),s=T("b"),u=v(o),f=v(`
            m average,
            `),i=T("b"),c=v(a),$=v(`
            m minimum
          `),l.a=n},m(_,y){p(_,e,y),l.m(t,e),h(e,n),h(e,s),h(s,u),h(e,f),h(e,i),h(i,c),h(e,$)},p(_,y){y&32&&t!==(t=Xt(_[5].angle+_[8])+"")&&l.p(t),y&32&&o!==(o=_[6]+"")&&G(u,o),y&32&&a!==(a=_[7]+"")&&G(c,a)},d(_){_&&m(e)}}}function Ll(r){let e;function l(s,o){return s[6]?da:ga}let t=l(r),n=t(r);return{c(){n.c(),e=ve()},m(s,o){n.m(s,o),p(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&m(e),n.d(s)}}}function ha(r){let e,l=we([[r[5].left_average,r[5].left_minimum,-90],[r[5].right_average,r[5].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Ll(Cl(r,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ve()},m(n,s){for(let o=0;o<2;o+=1)t[o]&&t[o].m(n,s);p(n,e,s)},p(n,s){if(s&32){l=we([[n[5].left_average,n[5].left_minimum,-90],[n[5].right_average,n[5].right_minimum,90]]);let o;for(o=0;o<2;o+=1){const u=Cl(n,l,o);t[o]?t[o].p(u,s):(t[o]=Ll(u),t[o].c(),t[o].m(e.parentNode,e))}for(;o<2;o+=1)t[o].d(1)}},d(n){n&&m(e),Qe(t,n)}}}function ba(r){let e,l;return e=new ce({props:{openOn:"hover",$$slots:{default:[ha,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&2080&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ka(r){let e,l;const t=[q(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":de(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Re,"line-opacity":le(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[ba]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?re(t,[o&0&&oe(q(Pt)),o&0&&{sourceLayer:Pt},t[2],t[3],o&6&&{paint:{"line-color":de(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],s[2],s[1]),"line-width":Re,"line-opacity":le(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function wa(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[_a],default:[$a]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0]&&Tl(r);return s=new _e({props:{url:`pmtiles://${Yt()}/v1/${Pt}.pmtiles`,$$slots:{default:[ka]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&2048&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],B(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=Tl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&2049&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Pt="pavement_widths";function va(r){let e=Math.floor((r+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function Xt(r){return`${va(r)} <span style="display: inline-block; rotate: ${r}deg">⬆</span>`}function ya(r,e,l){let t,n=ne.sequential_low_to_high,s=[0,2,4,6,8,13],o=he(Pt);x(r,o,f=>l(0,t=f));function u(f){t=f,o.set(t)}return[t,n,s,o,u]}class Sa extends K{constructor(e){super(),X(this,e,ya,wa,V,{})}}function Ca(r){let e;return{c(){e=v("Propensity to Cycle Tool")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ta(r){let e;return{c(){e=v("the PCT website")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function La(r){let e;return{c(){e=v("2017 journal article")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ia(r){let e,l,t,n,s,o,u,f,i,a,c;return u=new te({props:{href:"https://www.pct.bike",$$slots:{default:[Ta]},$$scope:{ctx:r}}}),i=new te({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[La]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,l=I(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,n=I(),s=T("p"),o=v("See "),b(u.$$.fragment),f=v(" and "),b(i.$$.fragment),a=v(" for details on methodology and data sources.")},m($,_){p($,e,_),p($,l,_),p($,t,_),p($,n,_),p($,s,_),h(s,o),k(u,s,null),h(s,f),k(i,s,null),h(s,a),c=!0},p($,_){const y={};_&1024&&(y.$$scope={dirty:_,ctx:$}),u.$set(y);const S={};_&1024&&(S.$$scope={dirty:_,ctx:$}),i.$set(S)},i($){c||(g(u.$$.fragment,$),g(i.$$.fragment,$),c=!0)},o($){d(u.$$.fragment,$),d(i.$$.fragment,$),c=!1},d($){$&&(m(e),m(l),m(t),m(n),m(s)),w(u),w(i)}}}function Ma(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&1024&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Il(r){let e,l,t,n,s,o,u,f;e=new Ge({props:{colorScale:r[1],limits:r[2]}});function i(_){r[6](_)}let a={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0].tripPurpose!==void 0&&(a.value=r[0].tripPurpose),t=new Ds({props:a}),H.push(()=>E(t,"value",i));function c(_){r[7](_)}let $={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[0].scenario!==void 0&&($.value=r[0].scenario),o=new dt({props:$}),H.push(()=>E(o,"value",c)),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment),s=I(),b(o.$$.fragment)},m(_,y){k(e,_,y),p(_,l,y),k(t,_,y),p(_,s,y),k(o,_,y),f=!0},p(_,y){const S={};!n&&y&1&&(n=!0,S.value=_[0].tripPurpose,B(()=>n=!1)),t.$set(S);const C={};!u&&y&1&&(u=!0,C.value=_[0].scenario,B(()=>u=!1)),o.$set(C)},i(_){f||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),f=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(o.$$.fragment,_),f=!1},d(_){_&&(m(l),m(s)),w(e,_),w(t,_),w(o,_)}}}function Na(r){let e,l=r[4](r[9])+"",t;return{c(){e=new $t(!1),t=ve(),e.a=t},m(n,s){e.m(l,n,s),p(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(m(t),e.d())}}}function Oa(r){let e,l;return e=new ce({props:{$$slots:{default:[Na,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Pa(r){let e,l;const t=[q(et),{sourceLayer:et},{paint:{"line-color":de(["get",r[0].scenario],r[2],r[1]),"line-width":Re,"line-opacity":le(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==et?"visible":"none"}}];let n={$$slots:{default:[Oa]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?re(t,[o&0&&oe(q(et)),o&0&&{sourceLayer:et},o&7&&{paint:{"line-color":de(["get",s[0].scenario],s[2],s[1]),"line-width":Re,"line-opacity":le(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==et?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ja(r){let e,l=r[4](r[9])+"",t;return{c(){e=new $t(!1),t=ve(),e.a=t},m(n,s){e.m(l,n,s),p(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(m(t),e.d())}}}function Ra(r){let e,l;return e=new ce({props:{$$slots:{default:[ja,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Da(r){let e,l;const t=[q(ct),{sourceLayer:ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":de(["get",r[0].scenario],r[2],r[1]),"line-width":Re,"line-opacity":le(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==ct?"visible":"none"}}];let n={$$slots:{default:[Ra]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?re(t,[o&0&&oe(q(ct)),o&0&&{sourceLayer:ct},t[2],t[3],o&7&&{paint:{"line-color":de(["get",s[0].scenario],s[2],s[1]),"line-width":Re,"line-opacity":le(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==ct?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Aa(r){let e,l,t,n,s,o,u,f;function i($){r[5]($)}let a={$$slots:{right:[Ma],default:[Ca]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new ie({props:a}),H.push(()=>E(e,"checked",i));let c=r[0].show&&Il(r);return s=new _e({props:{url:`pmtiles://${me()}/v1/${et}.pmtiles`,$$slots:{default:[Pa]},$$scope:{ctx:r}}}),u=new _e({props:{url:`pmtiles://${me()}/v1/${ct}.pmtiles`,$$slots:{default:[Da]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),c&&c.c(),n=I(),b(s.$$.fragment),o=I(),b(u.$$.fragment)},m($,_){k(e,$,_),p($,t,_),c&&c.m($,_),p($,n,_),k(s,$,_),p($,o,_),k(u,$,_),f=!0},p($,[_]){const y={};_&1024&&(y.$$scope={dirty:_,ctx:$}),!l&&_&1&&(l=!0,y.checked=$[0].show,B(()=>l=!1)),e.$set(y),$[0].show?c?(c.p($,_),_&1&&g(c,1)):(c=Il($),c.c(),g(c,1),c.m(n.parentNode,n)):c&&(ae(),d(c,1,1,()=>{c=null}),ue());const S={};_&1025&&(S.$$scope={dirty:_,ctx:$}),s.$set(S);const C={};_&1025&&(C.$$scope={dirty:_,ctx:$}),u.$set(C)},i($){f||(g(e.$$.fragment,$),g(c),g(s.$$.fragment,$),g(u.$$.fragment,$),f=!0)},o($){d(e.$$.fragment,$),d(c),d(s.$$.fragment,$),d(u.$$.fragment,$),f=!1},d($){$&&(m(t),m(n),m(o)),w(e,$),c&&c.d($),w(s,$),w(u,$)}}}let et="pct_commute",ct="pct_school";function Fa(r){return r.show?`${r.tripPurpose}/${r.scenario}`:null}function Ga(r){let[e,l]=r.split("/");return{show:!0,tripPurpose:e,scenario:l}}function qa(r,e,l){let t,n=ne.sequential_low_to_high,s=[0,50,100,500,1e3,2e3],u=kt("pct",{show:!1,tripPurpose:et,scenario:"baseline"},Fa,Ga);x(r,u,$=>l(0,t=$));function f($){let _=$.baseline,y=$.gov_target,S=$.go_dutch,C=`<h2>Trip purpose: ${t.tripPurpose==et?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)C+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let N=(y/_).toFixed(1),A=(S/_).toFixed(1);C+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${N}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${A}x</b> of baseline)</p>`}return C}function i($){r.$$.not_equal(t.show,$)&&(t.show=$,u.set(t))}function a($){r.$$.not_equal(t.tripPurpose,$)&&(t.tripPurpose=$,u.set(t))}function c($){r.$$.not_equal(t.scenario,$)&&(t.scenario=$,u.set(t))}return[t,n,s,u,f,i,a,c]}class za extends K{constructor(e){super(),X(this,e,qa,Aa,V,{})}}function Ha(r){let e;return{c(){e=v("OS Speeds")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ea(r){let e;return{c(){e=v("Basemap")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ba(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ua(r){let e,l,t,n,s,o,u,f,i,a,c,$;return t=new te({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Ea]},$$scope:{ctx:r}}}),a=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ba]},$$scope:{ctx:r}}}),{c(){e=T("p"),l=v("The average speed data is collected over a six-month period by "),b(t.$$.fragment),n=v(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),s=I(),o=T("p"),o.textContent="Data valid as of 1 September, 2023",u=I(),f=T("p"),i=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(a.$$.fragment),c=v(".")},m(_,y){p(_,e,y),h(e,l),k(t,e,null),h(e,n),p(_,s,y),p(_,o,y),p(_,u,y),p(_,f,y),h(f,i),k(a,f,null),h(f,c),$=!0},p(_,y){const S={};y&512&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const C={};y&512&&(C.$$scope={dirty:y,ctx:_}),a.$set(C)},i(_){$||(g(t.$$.fragment,_),g(a.$$.fragment,_),$=!0)},o(_){d(t.$$.fragment,_),d(a.$$.fragment,_),$=!1},d(_){_&&(m(e),m(s),m(o),m(u),m(f)),w(t),w(a)}}}function Wa(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Ua]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Ml(r){let e,l,t,n,s;e=new Ge({props:{colorScale:r[1],limits:r[2]}});function o(f){r[6](f)}let u={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0].kind!==void 0&&(u.value=r[0].kind),t=new Ds({props:u}),H.push(()=>E(t,"value",o)),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(f,i){k(e,f,i),p(f,l,i),k(t,f,i),s=!0},p(f,i){const a={};!n&&i&1&&(n=!0,a.value=f[0].kind,B(()=>n=!1)),t.$set(a)},i(f){s||(g(e.$$.fragment,f),g(t.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),s=!1},d(f){f&&m(l),w(e,f),w(t,f)}}}function Ya(r){let e,l,t=r[8].indicative_mph+"",n,s,o,u,f,i=r[8].highest_mph+"",a,c,$=r[4][r[8].highest_description]+"",_,y;return{c(){e=T("p"),l=v("Posted speed limit: "),n=v(t),s=v(" mph"),o=I(),u=T("p"),f=v("Highest average speed: "),a=v(i),c=v(" mph (during "),_=v($),y=v(")")},m(S,C){p(S,e,C),h(e,l),h(e,n),h(e,s),p(S,o,C),p(S,u,C),h(u,f),h(u,a),h(u,c),h(u,_),h(u,y)},p(S,C){C&256&&t!==(t=S[8].indicative_mph+"")&&G(n,t),C&256&&i!==(i=S[8].highest_mph+"")&&G(a,i),C&256&&$!==($=S[4][S[8].highest_description]+"")&&G(_,$)},d(S){S&&(m(e),m(o),m(u))}}}function Ja(r){let e,l;return e=new ce({props:{$$slots:{default:[Ya,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&768&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Va(r){let e,l;const t=[q(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":de(["get",r[0].kind],r[2],r[1]),"line-width":Re,"line-opacity":le(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={$$slots:{default:[Ja]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?re(t,[o&0&&oe(q(jt)),o&0&&{sourceLayer:jt},t[2],t[3],o&7&&{paint:{"line-color":de(["get",s[0].kind],s[2],s[1]),"line-width":Re,"line-opacity":le(1,.5)}},o&1&&{layout:{visibility:s[0].show?"visible":"none"}}]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Qa(r){let e,l,t,n,s,o;function u(a){r[5](a)}let f={$$slots:{right:[Wa],default:[Ha]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0].show&&Ml(r);return s=new _e({props:{url:`pmtiles://${Yt()}/v1/${jt}.pmtiles`,$$slots:{default:[Va]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&512&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0].show,B(()=>l=!1)),e.$set($),a[0].show?i?(i.p(a,c),c&1&&g(i,1)):(i=Ml(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&513&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let jt="road_speeds";function Za(r){return r.show?r.kind:null}function Ka(r){return{show:!0,kind:r}}function Xa(r,e,l){let t,n=ne.sequential_low_to_high,s=[0,20,30,40,50,90],u=kt(jt,{show:!1,kind:"indicative_mph"},Za,Ka);x(r,u,c=>l(0,t=c));let f={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(c){r.$$.not_equal(t.show,c)&&(t.show=c,u.set(t))}function a(c){r.$$.not_equal(t.kind,c)&&(t.kind=c,u.set(t))}return[t,n,s,u,f,i,a]}class xa extends K{constructor(e){super(),X(this,e,Xa,Qa,V,{})}}function eu(r){let e;return{c(){e=v("OS Road widths")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function tu(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function nu(r){let e,l,t,n,s,o,u,f,i;return u=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,l=I(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",n=I(),s=T("p"),o=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),f=v(".")},m(a,c){p(a,e,c),p(a,l,c),p(a,t,c),p(a,n,c),p(a,s,c),h(s,o),k(u,s,null),h(s,f),i=!0},p(a,c){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),u.$set($)},i(a){i||(g(u.$$.fragment,a),i=!0)},o(a){d(u.$$.fragment,a),i=!1},d(a){a&&(m(e),m(l),m(t),m(n),m(s)),w(u)}}}function lu(r){let e,l,t;return l=new $e({props:{$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Nl(r){let e,l;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:ee,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function su(r){let e,l,t,n=r[5].average+"",s,o,u,f,i,a,c=r[5].minimum+"",$,_;return{c(){e=T("p"),l=v("Average width: "),t=T("b"),s=v(n),o=v(`
        meters`),u=I(),f=T("p"),i=v("Minimum width: "),a=T("b"),$=v(c),_=v(`
        meters`)},m(y,S){p(y,e,S),h(e,l),h(e,t),h(t,s),h(e,o),p(y,u,S),p(y,f,S),h(f,i),h(f,a),h(a,$),h(f,_)},p(y,S){S&32&&n!==(n=y[5].average+"")&&G(s,n),S&32&&c!==(c=y[5].minimum+"")&&G($,c)},d(y){y&&(m(e),m(u),m(f))}}}function ru(r){let e,l;return e=new ce({props:{$$slots:{default:[su,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ou(r){let e,l;const t=[q(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":de(["get","average"],r[2],r[1]),"line-width":Re,"line-opacity":le(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[ru]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?re(t,[o&0&&oe(q(Rt)),o&0&&{sourceLayer:Rt},t[2],t[3],o&6&&{paint:{"line-color":de(["get","average"],s[2],s[1]),"line-width":Re,"line-opacity":le(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function iu(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[lu],default:[eu]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0]&&Nl(r);return s=new _e({props:{url:`pmtiles://${Yt()}/v1/${Rt}.pmtiles`,$$slots:{default:[ou]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],B(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=Nl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&65&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Rt="road_widths";function fu(r,e,l){let t,n=ne.sequential_low_to_high,s=[0,5,10,15,20,100],o=he(Rt);x(r,o,f=>l(0,t=f));function u(f){t=f,o.set(t)}return[t,n,s,o,u]}class au extends K{constructor(e){super(),X(this,e,fu,iu,V,{})}}function uu(r){let e,l,t;return e=new Ce({props:{color:ne.trams}}),{c(){b(e.$$.fragment),l=v(`
  Trams`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:ee,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function cu(r){let e,l,t,n;return t=new Ke({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,l=I(),b(t.$$.fragment)},m(s,o){p(s,e,o),p(s,l,o),k(t,s,o),n=!0},p:ee,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(m(e),m(l)),w(t,s)}}}function $u(r){let e,l,t;return l=new $e({props:{$$slots:{default:[cu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&8&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function pu(r){let e,l;const t=[q(Dt),{sourceLayer:Dt},{paint:{"line-color":ne.trams,"line-width":5,"line-opacity":le(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ge({props:n}),e.$on("click",_u),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?re(t,[o&0&&oe(q(Dt)),o&0&&{sourceLayer:Dt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function mu(r){let e,l,t,n,s;function o(f){r[2](f)}let u={$$slots:{right:[$u],default:[uu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),H.push(()=>E(e,"checked",o)),n=new _e({props:{url:`pmtiles://${me()}/v1/${Dt}.pmtiles`,$$slots:{default:[pu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&8&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],B(()=>l=!1)),e.$set(a);const c={};i&9&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Dt="trams";function _u(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function gu(r,e,l){let t,n=he(Dt);x(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class du extends K{constructor(e){super(),X(this,e,gu,mu,V,{})}}function hu(r){let e;return{c(){e=v("Bus stops")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function bu(r){let e;return{c(){e=v(`Bus Open Data Service
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ku(r){let e,l,t,n,s,o,u,f,i;return t=new te({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[bu]},$$scope:{ctx:r}}}),f=new Te({}),{c(){e=T("p"),l=v("Data from the "),b(t.$$.fragment),n=v(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),s=I(),o=T("p"),o.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=I(),b(f.$$.fragment)},m(a,c){p(a,e,c),h(e,l),k(t,e,null),h(e,n),p(a,s,c),p(a,o,c),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),t.$set($)},i(a){i||(g(t.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(t.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(s),m(o),m(u)),w(t),w(f,a)}}}function wu(r){let e,l,t;return l=new $e({props:{$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Ol(r){let e,l,t,n;return t=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",l=I(),b(t.$$.fragment)},m(s,o){p(s,e,o),p(s,l,o),k(t,s,o),n=!0},p:ee,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(m(e),m(l)),w(t,s)}}}function vu(r){let e,l,t,n=r[5].stop_name+"",s,o,u,f,i,a=r[5].peak+"",c,$,_,y,S,C=r[5].peak_description+"",N,A,D,P,M,O=r[5].total+"",j,L,R=r[5].total_description+"",W,Q;return{c(){e=T("p"),l=v("Stop name: "),t=T("b"),s=v(n),o=I(),u=T("p"),f=v("Peak: "),i=T("b"),c=v(a),$=v(`
        buses during the busiest hour of any day`),_=I(),y=T("p"),S=v("The peak hour is "),N=v(C),A=I(),D=T("p"),P=v("Total buses per day: "),M=T("b"),j=v(O),L=v(`
        (for `),W=v(R),Q=v(", the busiest day of the week)")},m(F,Y){p(F,e,Y),h(e,l),h(e,t),h(t,s),p(F,o,Y),p(F,u,Y),h(u,f),h(u,i),h(i,c),h(u,$),p(F,_,Y),p(F,y,Y),h(y,S),h(y,N),p(F,A,Y),p(F,D,Y),h(D,P),h(D,M),h(M,j),h(D,L),h(D,W),h(D,Q)},p(F,Y){Y&32&&n!==(n=F[5].stop_name+"")&&G(s,n),Y&32&&a!==(a=F[5].peak+"")&&G(c,a),Y&32&&C!==(C=F[5].peak_description+"")&&G(N,C),Y&32&&O!==(O=F[5].total+"")&&G(j,O),Y&32&&R!==(R=F[5].total_description+"")&&G(W,R)},d(F){F&&(m(e),m(o),m(u),m(_),m(y),m(A),m(D))}}}function yu(r){let e,l;return e=new ce({props:{$$slots:{default:[vu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Su(r){let e,l;const t=[q(At),{sourceLayer:At},{paint:{"circle-color":de(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[yu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ht({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?re(t,[o&0&&oe(q(At)),o&0&&{sourceLayer:At},o&6&&{paint:{"circle-color":de(["get","peak"],s[2],s[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Cu(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[wu],default:[hu]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0]&&Ol(r);return s=new _e({props:{url:`pmtiles://${me()}/v1/${At}.pmtiles`,$$slots:{default:[Su]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],B(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=Ol(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&65&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let At="bus_stops";function Tu(r,e,l){let t,n=ne.sequential_low_to_high,s=[0,3,10,20,30,100],o=he(At);x(r,o,f=>l(0,t=f));function u(f){t=f,o.set(t)}return[t,n,s,o,u]}class Lu extends K{constructor(e){super(),X(this,e,Tu,Cu,V,{})}}function Iu(r){let e;return{c(){e=v("Crossings")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Mu(r){let e;return{c(){e=v("crossing")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Nu(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Mu]},$$scope:{ctx:r}}}),o=new Ke({}),{c(){e=T("p"),l=v("This shows "),b(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=I(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&32&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function Ou(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Nu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Pl(r){let e,l;return e=new Jt({props:{rows:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:ee,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Pu(r){let e,l=jl(r[4])+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=jl(n[4])+"")&&G(t,l)},d(n){n&&m(e)}}}function ju(r){let e,l;return e=new ce({props:{$$slots:{default:[Pu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ru(r){let e,l;const t=[q(Ft),{sourceLayer:Ft},{paint:{"circle-color":Ze(["get","crossing"],{traffic_signals:ne.signalized_crossing},ne.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[ju]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ht({props:n}),e.$on("click",Au),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?re(t,[o&0&&oe(q(Ft)),o&0&&{sourceLayer:Ft},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Du(r){let e,l,t,n,s,o;function u(a){r[3](a)}let f={$$slots:{right:[Ou],default:[Iu]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0]&&Pl(r);return s=new _e({props:{url:`pmtiles://${me()}/v1/${Ft}.pmtiles`,$$slots:{default:[Ru]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&32&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],B(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=Pl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&33&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Ft="crossings";function jl(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Au(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Fu(r,e,l){let t,n=he(Ft);x(r,n,u=>l(0,t=u));let s=[["Signalized",ne.signalized_crossing],["Other",ne.other_crossing]];function o(u){t=u,n.set(t)}return[t,n,s,o]}class Gu extends K{constructor(e){super(),X(this,e,Fu,Du,V,{})}}function qu(r){let e;return{c(){e=v("Gradients")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function zu(r){let e;return{c(){e=v("OS Terrain 50")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Hu(r){let e,l,t,n,s,o,u,f,i,a,c,$,_;return u=new te({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[zu]},$$scope:{ctx:r}}}),a=new Te({}),$=new Ke({}),{c(){e=T("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,l=I(),t=T("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,n=I(),s=T("p"),o=v("This layer is built from "),b(u.$$.fragment),f=v(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),i=I(),b(a.$$.fragment),c=I(),b($.$$.fragment)},m(y,S){p(y,e,S),p(y,l,S),p(y,t,S),p(y,n,S),p(y,s,S),h(s,o),k(u,s,null),h(s,f),p(y,i,S),k(a,y,S),p(y,c,S),k($,y,S),_=!0},p(y,S){const C={};S&64&&(C.$$scope={dirty:S,ctx:y}),u.$set(C)},i(y){_||(g(u.$$.fragment,y),g(a.$$.fragment,y),g($.$$.fragment,y),_=!0)},o(y){d(u.$$.fragment,y),d(a.$$.fragment,y),d($.$$.fragment,y),_=!1},d(y){y&&(m(e),m(l),m(t),m(n),m(s),m(i),m(c)),w(u),w(a,y),w($,y)}}}function Eu(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Hu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Rl(r){let e,l;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:ee,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Bu(r){let e,l,t,n=Math.abs(r[5].gradient)/100+"",s,o;return{c(){e=T("p"),l=v("Gradient: "),t=T("b"),s=v(n),o=v(`
        %`)},m(u,f){p(u,e,f),h(e,l),h(e,t),h(t,s),h(e,o)},p(u,f){f&32&&n!==(n=Math.abs(u[5].gradient)/100+"")&&G(s,n)},d(u){u&&m(e)}}}function Uu(r){let e,l;return e=new ce({props:{$$slots:{default:[Bu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Wu(r){let e,l,t,n;const s=[q(Ye),{sourceLayer:Ye},{manageHoverState:!0},{paint:{"line-color":de(["/",["abs",["get","gradient"]],100],r[2],r[1]),"line-width":Re,"line-opacity":le(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let o={$$slots:{default:[Uu]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=se(o,s[i]);e=new ge({props:o});const u=[q(Ye+"_arrows"),{sourceLayer:Ye},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:r[0]?"visible":"none"}}];let f={};for(let i=0;i<u.length;i+=1)f=se(f,u[i]);return t=new kn({props:f}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),n=!0},p(i,a){const c=a&7?re(s,[a&0&&oe(q(Ye)),a&0&&{sourceLayer:Ye},s[2],a&6&&{paint:{"line-color":de(["/",["abs",["get","gradient"]],100],i[2],i[1]),"line-width":Re,"line-opacity":le(1,.5)}},a&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};a&64&&(c.$$scope={dirty:a,ctx:i}),e.$set(c);const $=a&1?re(u,[a&0&&oe(q(Ye+"_arrows")),a&0&&{sourceLayer:Ye},u[2],u[3],a&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:i[0]?"visible":"none"}}]):{};t.$set($)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&m(l),w(e,i),w(t,i)}}}function Yu(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[Eu],default:[qu]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0]&&Rl(r);return s=new _e({props:{url:`pmtiles://${me()}/v1/${Ye}.pmtiles`,$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&64&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],B(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=Rl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&65&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Ye="gradient";function Ju(r,e,l){let t,n=ne.gradient_flat_to_steep,s=[0,3,5,8,10,20,100],o=he(Ye);x(r,o,f=>l(0,t=f));function u(f){t=f,o.set(t)}return[t,n,s,o,u]}class Vu extends K{constructor(e){super(),X(this,e,Ju,Yu,V,{})}}function Qu(r){let e,l,t;return{c(){e=T("img"),t=v(`
  Cycle parking`),Kt(e.src,l=Ys)||z(e,"src",l),z(e,"alt","a logo representing cycle parking")},m(n,s){p(n,e,s),p(n,t,s)},p:ee,d(n){n&&(m(e),m(t))}}}function Zu(r){let e;return{c(){e=v("OpenStreetMap")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Ku(r){let e;return{c(){e=v("OpenStreetMap Carto")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Xu(r){let e,l,t,n,s,o,u,f,i,a,c;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Zu]},$$scope:{ctx:r}}}),f=new te({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Ku]},$$scope:{ctx:r}}}),a=new Ke({}),{c(){e=T("p"),l=v("Cycle parking, according to "),b(t.$$.fragment),n=v(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),s=I(),o=T("p"),u=v("Icon from "),b(f.$$.fragment),i=I(),b(a.$$.fragment)},m($,_){p($,e,_),h(e,l),k(t,e,null),h(e,n),p($,s,_),p($,o,_),h(o,u),k(f,o,null),p($,i,_),k(a,$,_),c=!0},p($,_){const y={};_&16&&(y.$$scope={dirty:_,ctx:$}),t.$set(y);const S={};_&16&&(S.$$scope={dirty:_,ctx:$}),f.$set(S)},i($){c||(g(t.$$.fragment,$),g(f.$$.fragment,$),g(a.$$.fragment,$),c=!0)},o($){d(t.$$.fragment,$),d(f.$$.fragment,$),d(a.$$.fragment,$),c=!1},d($){$&&(m(e),m(s),m(o),m(i)),w(t),w(f),w(a,$)}}}function xu(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Xu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function ec(r){let e,l,t,n=(r[3].capacity??"unknown")+"",s;return{c(){e=T("p"),l=v("Capacity: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&8&&n!==(n=(o[3].capacity??"unknown")+"")&&G(s,n)},d(o){o&&m(e)}}}function tc(r){let e,l;return e=new ce({props:{$$slots:{default:[ec,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function nc(r){let e,l;const t=[q(Gt),{sourceLayer:Gt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[tc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new kn({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?re(t,[o&0&&oe(q(Gt)),o&0&&{sourceLayer:Gt},o&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function lc(r){let e,l,t,n,s;function o(f){r[2](f)}let u={$$slots:{right:[xu],default:[Qu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),H.push(()=>E(e,"checked",o)),n=new _e({props:{url:`pmtiles://${me()}/v1/${Gt}.pmtiles`,$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&16&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],B(()=>l=!1)),e.$set(a);const c={};i&17&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let Gt="cycle_parking";function sc(r,e,l){let t,n=he(Gt);x(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class rc extends K{constructor(e){super(),X(this,e,sc,lc,V,{})}}function oc(r){let e;return{c(){e=v("Education")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ic(r){let e,l,t,n;return t=new Ke({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,l=I(),b(t.$$.fragment)},m(s,o){p(s,e,o),p(s,l,o),k(t,s,o),n=!0},p:ee,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(m(e),m(l)),w(t,s)}}}function fc(r){let e,l,t;return l=new $e({props:{$$slots:{default:[ic]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Dl(r){let e,l,t;return l=new lt({props:{$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(l.$$.fragment),pe(e,"border","1px solid black"),pe(e,"padding","8px")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2049&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function ac(r){let e,l,t;return e=new Ce({props:{color:ne.education.schools}}),{c(){b(e.$$.fragment),l=v(`
        Schools`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:ee,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function uc(r){let e,l,t;return e=new Ce({props:{color:ne.education.colleges}}),{c(){b(e.$$.fragment),l=v(`
        Colleges`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:ee,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function cc(r){let e,l,t;return e=new Ce({props:{color:ne.education.universities}}),{c(){b(e.$$.fragment),l=v(`
        Universities`)},m(n,s){k(e,n,s),p(n,l,s),t=!0},p:ee,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&m(l),w(e,n)}}}function $c(r){let e,l,t,n,s,o,u,f,i;function a(C){r[4](C)}let c={$$slots:{default:[ac]},$$scope:{ctx:r}};r[0].school!==void 0&&(c.checked=r[0].school),e=new ie({props:c}),H.push(()=>E(e,"checked",a));function $(C){r[5](C)}let _={$$slots:{default:[uc]},$$scope:{ctx:r}};r[0].college!==void 0&&(_.checked=r[0].college),n=new ie({props:_}),H.push(()=>E(n,"checked",$));function y(C){r[6](C)}let S={$$slots:{default:[cc]},$$scope:{ctx:r}};return r[0].university!==void 0&&(S.checked=r[0].university),u=new ie({props:S}),H.push(()=>E(u,"checked",y)),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),o=I(),b(u.$$.fragment)},m(C,N){k(e,C,N),p(C,t,N),k(n,C,N),p(C,o,N),k(u,C,N),i=!0},p(C,N){const A={};N&2048&&(A.$$scope={dirty:N,ctx:C}),!l&&N&1&&(l=!0,A.checked=C[0].school,B(()=>l=!1)),e.$set(A);const D={};N&2048&&(D.$$scope={dirty:N,ctx:C}),!s&&N&1&&(s=!0,D.checked=C[0].college,B(()=>s=!1)),n.$set(D);const P={};N&2048&&(P.$$scope={dirty:N,ctx:C}),!f&&N&1&&(f=!0,P.checked=C[0].university,B(()=>f=!1)),u.$set(P)},i(C){i||(g(e.$$.fragment,C),g(n.$$.fragment,C),g(u.$$.fragment,C),i=!0)},o(C){d(e.$$.fragment,C),d(n.$$.fragment,C),d(u.$$.fragment,C),i=!1},d(C){C&&(m(t),m(o)),w(e,C),w(n,C),w(u,C)}}}function pc(r){let e,l=(r[10].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&G(t,l)},d(n){n&&m(e)}}}function mc(r){let e,l;return e=new ce({props:{$$slots:{default:[pc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&3072&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function _c(r){let e,l;const t=[q(qt),{sourceLayer:qt},{paint:{"fill-color":Ze(["get","type"],{school:ne.education.schools,college:ne.education.colleges,university:ne.education.universities},"grey"),"fill-opacity":le(.7,1)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[2](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[mc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new Fe({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&5?re(t,[o&0&&oe(q(qt)),o&0&&{sourceLayer:qt},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&5&&{filter:s[2](s[0])},t[5],t[6]]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function gc(r){let e,l,t,n,s,o;function u(a){r[3](a)}let f={$$slots:{right:[fc],default:[oc]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0].show&&Dl(r);return s=new _e({props:{url:`pmtiles://${me()}/v1/${qt}.pmtiles`,$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&2048&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0].show,B(()=>l=!1)),e.$set($),a[0].show?i?(i.p(a,c),c&1&&g(i,1)):(i=Dl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&2049&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let qt="education";function dc(r){return{show:!0,school:r.includes("school"),college:r.includes("college"),university:r.includes("university")}}function hc(r,e,l){let t,n=["school","college","university"],s={show:!1,school:!0,college:!0,university:!0};function o(_){return _.show?n.filter(y=>_[y]).join(","):null}let u=kt(qt,s,o,dc);x(r,u,_=>l(0,t=_));function f(_){let y=n.filter(S=>_[S]);return["in",["get","type"],["literal",y]]}function i(_){r.$$.not_equal(t.show,_)&&(t.show=_,u.set(t))}function a(_){r.$$.not_equal(t.school,_)&&(t.school=_,u.set(t))}function c(_){r.$$.not_equal(t.college,_)&&(t.college=_,u.set(t))}function $(_){r.$$.not_equal(t.university,_)&&(t.university=_,u.set(t))}return[t,u,f,i,a,c,$]}class bc extends K{constructor(e){super(),X(this,e,hc,gc,V,{})}}function kc(r){let e,l,t,n;return e=new Ce({props:{color:r[4]}}),{c(){b(e.$$.fragment),l=I(),t=v(r[2])},m(s,o){k(e,s,o),p(s,l,o),p(s,t,o),n=!0},p(s,o){(!n||o&4)&&G(t,s[2])},i(s){n||(g(e.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),n=!1},d(s){s&&(m(l),m(t)),w(e,s)}}}function wc(r){let e;const l=r[6].default,t=pt(l,r,r[8],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&256)&&mt(t,l,n,n[8],e?gt(l,n[8],s,null):_t(n[8]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function vc(r){let e,l,t;return l=new $e({props:{$$slots:{default:[wc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&256&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function yc(r){let e,l=(r[9].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&514&&l!==(l=(n[9].name??`Unnamed ${n[1]}`)+"")&&G(t,l)},d(n){n&&m(e)}}}function Sc(r){let e,l;return e=new ce({props:{$$slots:{default:[yc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&770&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Cc(r){let e,l;const t=[q(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":le(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Sc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new Fe({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&25?re(t,[o&1&&oe(q(s[0])),o&1&&{sourceLayer:s[0]},o&16&&{paint:{"fill-color":s[4],"fill-opacity":le(.7,1)}},o&8&&{layout:{visibility:s[3]?"visible":"none"}},t[4],t[5]]):{};o&258&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Tc(r){let e,l,t,n,s;function o(f){r[7](f)}let u={$$slots:{right:[vc],default:[kc]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new ie({props:u}),H.push(()=>E(e,"checked",o)),n=new _e({props:{url:`pmtiles://${me()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&260&&(a.$$scope={dirty:i,ctx:f}),!l&&i&8&&(l=!0,a.checked=f[3],B(()=>l=!1)),e.$set(a);const c={};i&1&&(c.url=`pmtiles://${me()}/v1/${f[0]}.pmtiles`),i&267&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}function Lc(r,e,l){let t,{$$slots:n={},$$scope:s}=e,{name:o}=e,{singularNoun:u}=e,{pluralNoun:f}=e,i=ne[o],a=he(o);x(r,a,$=>l(3,t=$));function c($){t=$,a.set(t)}return r.$$set=$=>{"name"in $&&l(0,o=$.name),"singularNoun"in $&&l(1,u=$.singularNoun),"pluralNoun"in $&&l(2,f=$.pluralNoun),"$$scope"in $&&l(8,s=$.$$scope)},[o,u,f,t,i,a,n,c,s]}class qs extends K{constructor(e){super(),X(this,e,Lc,Tc,V,{name:0,singularNoun:1,pluralNoun:2})}}function Ic(r){let e;return{c(){e=v("hospital")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Mc(r){let e,l,t,n,s,o,u;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Ic]},$$scope:{ctx:r}}}),o=new Ke({}),{c(){e=T("p"),l=v("This shows "),b(t.$$.fragment),n=v(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),s=I(),b(o.$$.fragment)},m(f,i){p(f,e,i),h(e,l),k(t,e,null),h(e,n),p(f,s,i),k(o,f,i),u=!0},p(f,i){const a={};i&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){u||(g(t.$$.fragment,f),g(o.$$.fragment,f),u=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(m(e),m(s)),w(t),w(o,f)}}}function Nc(r){let e,l;return e=new qs({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Mc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}class Oc extends K{constructor(e){super(),X(this,e,null,Nc,V,{})}}function Pc(r){let e,l,t;return{c(){e=T("img"),t=v(`
  Railway Stations`),Kt(e.src,l=Js)||z(e,"src",l),z(e,"alt","A logo representing a train")},m(n,s){p(n,e,s),p(n,t,s)},p:ee,d(n){n&&(m(e),m(t))}}}function jc(r){let e;return{c(){e=v("railway station")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Rc(r){let e;return{c(){e=v(`National Rail
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Dc(r){let e,l,t,n,s,o,u,f,i,a,c,$;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[jc]},$$scope:{ctx:r}}}),f=new te({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Rc]},$$scope:{ctx:r}}}),c=new Ke({}),{c(){e=T("p"),l=v("This shows "),b(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=I(),o=T("p"),u=v("Icon from "),b(f.$$.fragment),i=v(". (Note that not all stations shown are National Rail.)"),a=I(),b(c.$$.fragment)},m(_,y){p(_,e,y),h(e,l),k(t,e,null),h(e,n),p(_,s,y),p(_,o,y),h(o,u),k(f,o,null),h(o,i),p(_,a,y),k(c,_,y),$=!0},p(_,y){const S={};y&16&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const C={};y&16&&(C.$$scope={dirty:y,ctx:_}),f.$set(C)},i(_){$||(g(t.$$.fragment,_),g(f.$$.fragment,_),g(c.$$.fragment,_),$=!0)},o(_){d(t.$$.fragment,_),d(f.$$.fragment,_),d(c.$$.fragment,_),$=!1},d(_){_&&(m(e),m(s),m(o),m(a)),w(t),w(f),w(c,_)}}}function Ac(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Dc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Fc(r){let e,l=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&G(t,l)},d(n){n&&m(e)}}}function Gc(r){let e,l;return e=new ce({props:{$$slots:{default:[Fc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function qc(r){let e,l;const t=[q(xt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Gc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new kn({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?re(t,[o&0&&oe(q(xt)),o&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function zc(r){let e,l,t,n,s;function o(f){r[2](f)}let u={$$slots:{right:[Ac],default:[Pc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),H.push(()=>E(e,"checked",o)),n=new bt({props:{data:`${me()}/v1/${xt}.geojson`,$$slots:{default:[qc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,[i]){const a={};i&16&&(a.$$scope={dirty:i,ctx:f}),!l&&i&1&&(l=!0,a.checked=f[0],B(()=>l=!1)),e.$set(a);const c={};i&17&&(c.$$scope={dirty:i,ctx:f}),n.$set(c)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}let xt="railway_stations";function Hc(r,e,l){let t,n=he(xt);x(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Ec extends K{constructor(e){super(),X(this,e,Hc,zc,V,{})}}function Bc(r){let e;return{c(){e=v("sports pitches")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Uc(r){let e;return{c(){e=v("sports centres")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Wc(r){let e,l,t,n,s,o,u,f,i;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Bc]},$$scope:{ctx:r}}}),s=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Uc]},$$scope:{ctx:r}}}),f=new Ke({}),{c(){e=T("p"),l=v("This shows "),b(t.$$.fragment),n=v(" and "),b(s.$$.fragment),o=v(" data from OpenStreetMap (as of 9 August 2023)."),u=I(),b(f.$$.fragment)},m(a,c){p(a,e,c),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),p(a,u,c),k(f,a,c),i=!0},p(a,c){const $={};c&1&&($.$$scope={dirty:c,ctx:a}),t.$set($);const _={};c&1&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){i||(g(t.$$.fragment,a),g(s.$$.fragment,a),g(f.$$.fragment,a),i=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(u)),w(t),w(s),w(f,a)}}}function Yc(r){let e,l;return e=new qs({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}class Jc extends K{constructor(e){super(),X(this,e,null,Yc,V,{})}}function Vc(r){let e;return{c(){e=v("Stats19")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Qc(r){let e;return{c(){e=v("DfT stats19")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Zc(r){let e;return{c(){e=v("documented by DfT")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Kc(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y,S,C,N,A,D,P,M,O,j;return t=new te({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Qc]},$$scope:{ctx:r}}}),N=new te({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Zc]},$$scope:{ctx:r}}}),O=new Te({}),{c(){e=T("p"),l=v("This layer shows collisions recorded in the "),b(t.$$.fragment),n=v(" dataset. Please note these limitations:"),s=I(),o=T("ul"),u=T("li"),u.textContent="Only collisions between 2017 and 2022 are included",f=I(),i=T("li"),i.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,a=I(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,$=I(),_=T("li"),_.textContent='The "pedestrians" category also include mobility scooters',y=I(),S=T("li"),C=v("All limitations "),b(N.$$.fragment),A=v(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),D=I(),P=T("p"),P.textContent="You can click a point to open the full report, thanks to CycleStreets.",M=I(),b(O.$$.fragment)},m(L,R){p(L,e,R),h(e,l),k(t,e,null),h(e,n),p(L,s,R),p(L,o,R),h(o,u),h(o,f),h(o,i),h(o,a),h(o,c),h(o,$),h(o,_),h(o,y),h(o,S),h(S,C),k(N,S,null),h(S,A),p(L,D,R),p(L,P,R),p(L,M,R),k(O,L,R),j=!0},p(L,R){const W={};R&4194304&&(W.$$scope={dirty:R,ctx:L}),t.$set(W);const Q={};R&4194304&&(Q.$$scope={dirty:R,ctx:L}),N.$set(Q)},i(L){j||(g(t.$$.fragment,L),g(N.$$.fragment,L),g(O.$$.fragment,L),j=!0)},o(L){d(t.$$.fragment,L),d(N.$$.fragment,L),d(O.$$.fragment,L),j=!1},d(L){L&&(m(e),m(s),m(o),m(D),m(P),m(M)),w(t),w(N),w(O,L)}}}function Xc(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Kc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&4194304&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Al(r){let e,l,t,n,s,o,u,f,i,a,c,$,_;return l=new lt({props:{small:!0,$$slots:{default:[l$]},$$scope:{ctx:r}}}),a=new Jt({props:{rows:r[9]}}),{c(){e=T("div"),b(l.$$.fragment),t=I(),n=T("div"),s=v(`Filter years:
      `),o=T("input"),u=v(`
      -
      `),f=T("input"),i=I(),b(a.$$.fragment),z(o,"type","number"),z(o,"min",2017),z(o,"max",2022),z(o,"class","svelte-1ft65rw"),z(f,"type","number"),z(f,"min",2017),z(f,"max",2022),z(f,"class","svelte-1ft65rw"),pe(e,"border","1px solid black"),pe(e,"padding","8px")},m(y,S){p(y,e,S),k(l,e,null),h(e,t),h(e,n),h(n,s),h(n,o),Je(o,r[0].minYear),h(n,u),h(n,f),Je(f,r[0].maxYear),h(e,i),k(a,e,null),c=!0,$||(_=[tt(o,"input",r[15]),tt(f,"input",r[16])],$=!0)},p(y,S){const C={};S&4194305&&(C.$$scope={dirty:S,ctx:y}),l.$set(C),S&1&&Wt(o.value)!==y[0].minYear&&Je(o,y[0].minYear),S&1&&Wt(f.value)!==y[0].maxYear&&Je(f,y[0].maxYear)},i(y){c||(g(l.$$.fragment,y),g(a.$$.fragment,y),c=!0)},o(y){d(l.$$.fragment,y),d(a.$$.fragment,y),c=!1},d(y){y&&m(e),w(l),w(a),$=!1,Rs(_)}}}function xc(r){let e;return{c(){e=v("Pedestrians")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function e$(r){let e;return{c(){e=v("Cyclists")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function t$(r){let e;return{c(){e=v("Horse riders")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function n$(r){let e;return{c(){e=v("Other")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function l$(r){let e,l,t,n,s,o,u,f,i,a,c,$;function _(M){r[11](M)}let y={$$slots:{default:[xc]},$$scope:{ctx:r}};r[0].pedestrians!==void 0&&(y.checked=r[0].pedestrians),e=new ie({props:y}),H.push(()=>E(e,"checked",_));function S(M){r[12](M)}let C={$$slots:{default:[e$]},$$scope:{ctx:r}};r[0].cyclists!==void 0&&(C.checked=r[0].cyclists),n=new ie({props:C}),H.push(()=>E(n,"checked",S));function N(M){r[13](M)}let A={$$slots:{default:[t$]},$$scope:{ctx:r}};r[0].horseRiders!==void 0&&(A.checked=r[0].horseRiders),u=new ie({props:A}),H.push(()=>E(u,"checked",N));function D(M){r[14](M)}let P={$$slots:{default:[n$]},$$scope:{ctx:r}};return r[0].other!==void 0&&(P.checked=r[0].other),a=new ie({props:P}),H.push(()=>E(a,"checked",D)),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),o=I(),b(u.$$.fragment),i=I(),b(a.$$.fragment)},m(M,O){k(e,M,O),p(M,t,O),k(n,M,O),p(M,o,O),k(u,M,O),p(M,i,O),k(a,M,O),$=!0},p(M,O){const j={};O&4194304&&(j.$$scope={dirty:O,ctx:M}),!l&&O&1&&(l=!0,j.checked=M[0].pedestrians,B(()=>l=!1)),e.$set(j);const L={};O&4194304&&(L.$$scope={dirty:O,ctx:M}),!s&&O&1&&(s=!0,L.checked=M[0].cyclists,B(()=>s=!1)),n.$set(L);const R={};O&4194304&&(R.$$scope={dirty:O,ctx:M}),!f&&O&1&&(f=!0,R.checked=M[0].horseRiders,B(()=>f=!1)),u.$set(R);const W={};O&4194304&&(W.$$scope={dirty:O,ctx:M}),!c&&O&1&&(c=!0,W.checked=M[0].other,B(()=>c=!1)),a.$set(W)},i(M){$||(g(e.$$.fragment,M),g(n.$$.fragment,M),g(u.$$.fragment,M),g(a.$$.fragment,M),$=!0)},o(M){d(e.$$.fragment,M),d(n.$$.fragment,M),d(u.$$.fragment,M),d(a.$$.fragment,M),$=!1},d(M){M&&(m(t),m(o),m(i)),w(e,M),w(n,M),w(u,M),w(a,M)}}}function Fl(r){let e,l,t,n=r[3][r[21].pedestrian_location]+"",s;return{c(){e=T("p"),l=v("Pedestrian location: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&2097152&&n!==(n=o[3][o[21].pedestrian_location]+"")&&G(s,n)},d(o){o&&m(e)}}}function Gl(r){let e,l,t,n=r[4][r[21].pedestrian_movement]+"",s;return{c(){e=T("p"),l=v("Pedestrian movement: "),t=T("b"),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&2097152&&n!==(n=o[4][o[21].pedestrian_movement]+"")&&G(s,n)},d(o){o&&m(e)}}}function s$(r){let e,l,t,n=r[21].year+"",s,o,u,f,i,a=r[5][r[21].severity]+"",c,$,_,y,S,C=ql(r[21])+"",N,A,D,P,M,O=r[21].pedestrian_location&&Fl(r),j=r[21].pedestrian_movement&&Gl(r);return{c(){e=T("p"),l=v("Year: "),t=T("b"),s=v(n),o=I(),u=T("p"),f=v("Severity: "),i=T("b"),c=v(a),$=I(),_=T("p"),y=v("Casualties: "),S=T("b"),N=v(C),A=I(),O&&O.c(),D=I(),j&&j.c(),P=I(),M=T("p"),M.textContent="Click to open full report in CycleStreets"},m(L,R){p(L,e,R),h(e,l),h(e,t),h(t,s),p(L,o,R),p(L,u,R),h(u,f),h(u,i),h(i,c),p(L,$,R),p(L,_,R),h(_,y),h(_,S),h(S,N),p(L,A,R),O&&O.m(L,R),p(L,D,R),j&&j.m(L,R),p(L,P,R),p(L,M,R)},p(L,R){R&2097152&&n!==(n=L[21].year+"")&&G(s,n),R&2097152&&a!==(a=L[5][L[21].severity]+"")&&G(c,a),R&2097152&&C!==(C=ql(L[21])+"")&&G(N,C),L[21].pedestrian_location?O?O.p(L,R):(O=Fl(L),O.c(),O.m(D.parentNode,D)):O&&(O.d(1),O=null),L[21].pedestrian_movement?j?j.p(L,R):(j=Gl(L),j.c(),j.m(P.parentNode,P)):j&&(j.d(1),j=null)},d(L){L&&(m(e),m(o),m(u),m($),m(_),m(A),m(D),m(P),m(M)),O&&O.d(L),j&&j.d(L)}}}function r$(r){let e,l;return e=new ce({props:{$$slots:{default:[s$,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&6291456&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function o$(r){let e,l;const t=[q(zt),{sourceLayer:zt},{paint:{"circle-color":de(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[1]},{layout:{visibility:r[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[r$]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ht({props:n}),e.$on("click",a$),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&451?re(t,[o&0&&oe(q(zt)),o&0&&{sourceLayer:zt},o&448&&{paint:{"circle-color":de(["get","severity"],[1,2,3],[s[6],s[7],s[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&2&&{filter:s[1]},o&1&&{layout:{visibility:s[0].show?"visible":"none"}},t[5],t[6]]):{};o&4194304&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function i$(r){let e,l,t,n,s,o;function u(a){r[10](a)}let f={$$slots:{right:[Xc],default:[Vc]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0].show&&Al(r);return s=new _e({props:{url:`pmtiles://${me()}/v1/${zt}.pmtiles`,$$slots:{default:[o$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&4194304&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0].show,B(()=>l=!1)),e.$set($),a[0].show?i?(i.p(a,c),c&1&&g(i,1)):(i=Al(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&4194307&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let zt="stats19";function f$(r){let[e,l,t]=r.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function ql(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function a$(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function u$(r,e,l){let t,n,s=["pedestrians","cyclists","horseRiders","other"],o={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function u(L){return L.show?`${s.filter(W=>L[W]).join(",")}/${L.minYear}/${L.maxYear}`:null}let f=kt(zt,o,u,f$);x(r,f,L=>l(0,n=L));function i(L,R,W,Q,F,Y){let Z=["any"];return n.pedestrians&&Z.push(["get","pedestrian"]),n.cyclists&&Z.push(["get","cyclist"]),n.horseRiders&&Z.push(["get","horse_rider"]),n.other&&Z.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],Z]}let a={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},$={1:"Fatal",2:"Serious",3:"Slight"},_=ne.sequential_low_to_high[4],y=ne.sequential_low_to_high[2],S=ne.sequential_low_to_high[0],C=[["Fatal",_],["Serious",y],["Slight",S]];function N(L){r.$$.not_equal(n.show,L)&&(n.show=L,f.set(n))}function A(L){r.$$.not_equal(n.pedestrians,L)&&(n.pedestrians=L,f.set(n))}function D(L){r.$$.not_equal(n.cyclists,L)&&(n.cyclists=L,f.set(n))}function P(L){r.$$.not_equal(n.horseRiders,L)&&(n.horseRiders=L,f.set(n))}function M(L){r.$$.not_equal(n.other,L)&&(n.other=L,f.set(n))}function O(){n.minYear=Wt(this.value),f.set(n)}function j(){n.maxYear=Wt(this.value),f.set(n)}return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=i(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,f,a,c,$,_,y,S,C,N,A,D,P,M,O,j]}class c$ extends K{constructor(e){super(),X(this,e,u$,i$,V,{})}}function $$(r){let e;return{c(){e=v("Vehicle counts")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function p$(r){let e;return{c(){e=v(`DfT road statistics
        `)},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function m$(r){let e;return{c(){e=v("methodology")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function _$(r){let e,l,t,n,s,o,u,f,i,a,c;return t=new te({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[p$]},$$scope:{ctx:r}}}),s=new te({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[m$]},$$scope:{ctx:r}}}),a=new Te({}),{c(){e=T("p"),l=v("AADF (annual average daily flow) data from "),b(t.$$.fragment),n=v(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(s.$$.fragment),o=v(" for details and caveats about the measurements."),u=I(),f=T("p"),f.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,i=I(),b(a.$$.fragment)},m($,_){p($,e,_),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),p($,u,_),p($,f,_),p($,i,_),k(a,$,_),c=!0},p($,_){const y={};_&128&&(y.$$scope={dirty:_,ctx:$}),t.$set(y);const S={};_&128&&(S.$$scope={dirty:_,ctx:$}),s.$set(S)},i($){c||(g(t.$$.fragment,$),g(s.$$.fragment,$),g(a.$$.fragment,$),c=!0)},o($){d(t.$$.fragment,$),d(s.$$.fragment,$),d(a.$$.fragment,$),c=!1},d($){$&&(m(e),m(u),m(f),m(i)),w(t),w(s),w(a,$)}}}function g$(r){let e,l,t;return l=new $e({props:{$$slots:{default:[_$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&128&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function zl(r){let e,l;return e=new Ge({props:{colorScale:r[1],limits:r[3]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:ee,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function d$(r){let e,l=r[6].location+"",t,n,s,o,u=r[6].year+"",f,i,a,c=r[6].motor_vehicles.toLocaleString()+"",$,_,y,S,C=r[6].year+"",N,A,D,P=r[6].pedal_cycles.toLocaleString()+"",M,O,j,L,R,W=r[6].method+"",Q;return{c(){e=T("h2"),t=v(l),n=I(),s=T("p"),o=v("Total motor vehicles ("),f=v(u),i=v(` AADF):
        `),a=T("b"),$=v(c),_=I(),y=T("p"),S=v("Total pedal cycles ("),N=v(C),A=v(` AADF):
        `),D=T("b"),M=v(P),O=I(),j=T("p"),L=v("Count method: "),R=T("b"),Q=v(W)},m(F,Y){p(F,e,Y),h(e,t),p(F,n,Y),p(F,s,Y),h(s,o),h(s,f),h(s,i),h(s,a),h(a,$),p(F,_,Y),p(F,y,Y),h(y,S),h(y,N),h(y,A),h(y,D),h(D,M),p(F,O,Y),p(F,j,Y),h(j,L),h(j,R),h(R,Q)},p(F,Y){Y&64&&l!==(l=F[6].location+"")&&G(t,l),Y&64&&u!==(u=F[6].year+"")&&G(f,u),Y&64&&c!==(c=F[6].motor_vehicles.toLocaleString()+"")&&G($,c),Y&64&&C!==(C=F[6].year+"")&&G(N,C),Y&64&&P!==(P=F[6].pedal_cycles.toLocaleString()+"")&&G(M,P),Y&64&&W!==(W=F[6].method+"")&&G(Q,W)},d(F){F&&(m(e),m(n),m(s),m(_),m(y),m(O),m(j))}}}function h$(r){let e,l;return e=new ce({props:{$$slots:{default:[d$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function b$(r){let e,l;const t=[q(Ht),{sourceLayer:Ht},{paint:{"circle-color":de(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[h$]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ht({props:n}),e.$on("click",w$),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?re(t,[o&0&&oe(q(Ht)),o&0&&{sourceLayer:Ht},o&6&&{paint:{"circle-color":de(["get","motor_vehicles"],s[2],s[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&128&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function k$(r){let e,l,t,n,s,o;function u(a){r[5](a)}let f={$$slots:{right:[g$],default:[$$]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0]&&zl(r);return s=new _e({props:{url:`pmtiles://${me()}/v1/${Ht}.pmtiles`,$$slots:{default:[b$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&128&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],B(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=zl(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&129&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let Ht="vehicle_counts";function w$(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function v$(r,e,l){let t,n=ne.sequential_low_to_high,s=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],u=he(Ht);x(r,u,i=>l(0,t=i));function f(i){t=i,u.set(t)}return[t,n,s,o,u,f]}class y$ extends K{constructor(e){super(),X(this,e,v$,k$,V,{})}}function Hl(r,e,l){const t=r.slice();return t[6]=e[l],t}function S$(r){let e;return{c(){e=v("Issues & Conflicts")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function C$(r){let e,l,t;return{c(){e=T("p"),e.textContent=`Critical issues and policy conflicts from the Design Assistance Log.
        This is internally collected data.`,l=I(),t=T("p"),t.textContent=`This layer is manually copied from a copy of the DA Log. The data is
        recent as of 10 June 2024.`},m(n,s){p(n,e,s),p(n,l,s),p(n,t,s)},p:ee,d(n){n&&(m(e),m(l),m(t))}}}function T$(r){let e,l,t;return l=new $e({props:{$$slots:{default:[C$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function El(r){let e,l;return e=new Jt({props:{rows:r[3]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:ee,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function L$(r){let e,l=r[5]["Issue ID"]+"",t,n,s=r[5].Code+"",o,u,f,i=r[5]["Issue Stage"]+"",a;return{c(){e=T("h2"),t=v(l),n=v(" - "),o=v(s),u=I(),f=T("p"),a=v(i)},m(c,$){p(c,e,$),h(e,t),h(e,n),h(e,o),p(c,u,$),p(c,f,$),h(f,a)},p(c,$){$&32&&l!==(l=c[5]["Issue ID"]+"")&&G(t,l),$&32&&s!==(s=c[5].Code+"")&&G(o,s),$&32&&i!==(i=c[5]["Issue Stage"]+"")&&G(a,i)},d(c){c&&(m(e),m(u),m(f))}}}function Bl(r){let e,l=r[6]+"",t,n,s,o=r[5][r[6]]+"",u,f;return{c(){e=T("p"),t=v(l),n=v(`:
            `),s=T("b"),u=v(o),f=I()},m(i,a){p(i,e,a),h(e,t),h(e,n),h(e,s),h(s,u),h(e,f)},p(i,a){a&32&&o!==(o=i[5][i[6]]+"")&&G(u,o)},d(i){i&&m(e)}}}function I$(r){let e,l=we(r[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Bl(Hl(r,l,n));return{c(){e=T("div");for(let n=0;n<t.length;n+=1)t[n].c();pe(e,"max-width","30vw"),pe(e,"max-height","60vh"),pe(e,"overflow","auto")},m(n,s){p(n,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,s){if(s&36){l=we(n[2]);let o;for(o=0;o<l.length;o+=1){const u=Hl(n,l,o);t[o]?t[o].p(u,s):(t[o]=Bl(u),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&m(e),Qe(t,n)}}}function M$(r){let e,l,t,n;return e=new ce({props:{openOn:"hover",$$slots:{default:[L$,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[I$,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(s,o){k(e,s,o),p(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&544&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const f={};o&544&&(f.$$scope={dirty:o,ctx:s}),t.$set(f)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&m(l),w(e,s),w(t,s)}}}function N$(r){let e,l;const t=[q(cn),{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[M$]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new ht({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&9?re(t,[o&0&&oe(q(cn)),o&8&&{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(s[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[3],t[4]]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function O$(r){let e,l,t,n,s,o;function u(a){r[4](a)}let f={$$slots:{right:[T$],default:[S$]},$$scope:{ctx:r}};r[0]!==void 0&&(f.checked=r[0]),e=new ie({props:f}),H.push(()=>E(e,"checked",u));let i=r[0]&&El(r);return s=new bt({props:{data:`${Yt()}/v1/problems.geojson.gz`,$$slots:{default:[N$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=I(),i&&i.c(),n=I(),b(s.$$.fragment)},m(a,c){k(e,a,c),p(a,t,c),i&&i.m(a,c),p(a,n,c),k(s,a,c),o=!0},p(a,[c]){const $={};c&512&&($.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,$.checked=a[0],B(()=>l=!1)),e.$set($),a[0]?i?(i.p(a,c),c&1&&g(i,1)):(i=El(a),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),ue());const _={};c&513&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(i),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(i),d(s.$$.fragment,a),o=!1},d(a){a&&(m(t),m(n)),w(e,a),i&&i.d(a),w(s,a)}}}let cn="problems";function P$(r,e,l){let t,n=he(cn);x(r,n,f=>l(0,t=f));let s=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],o=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function u(f){t=f,n.set(t)}return[t,n,s,o,u]}class j$ extends K{constructor(e){super(),X(this,e,P$,O$,V,{})}}function R$(r){let e;function l(s,o){return s[2]<=100?F$:A$}let t=l(r),n=t(r);return{c(){n.c(),e=ve()},m(s,o){n.m(s,o),p(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},i:ee,o:ee,d(s){s&&m(e),n.d(s)}}}function D$(r){let e,l;return e=new nt({props:{$$slots:{default:[G$]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function A$(r){let e;return{c(){e=T("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){p(l,e,t)},p:ee,d(l){l&&m(e)}}}function F$(r){let e,l,t;return{c(){e=T("label"),l=v(`Downloading scheme data
      `),t=T("progress"),t.value=r[2],z(t,"class","svelte-q3473n")},m(n,s){p(n,e,s),h(e,l),h(e,t)},p(n,s){s&4&&(t.value=n[2])},d(n){n&&m(e)}}}function G$(r){let e;return{c(){e=v("Load latest scheme data")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function q$(r){let e,l,t,n;const s=[D$,R$],o=[];function u(f,i){return f[0]?f[1]?1:-1:0}return~(e=u(r))&&(l=o[e]=s[e](r)),{c(){l&&l.c(),t=ve()},m(f,i){~e&&o[e].m(f,i),p(f,t,i),n=!0},p(f,[i]){let a=e;e=u(f),e===a?~e&&o[e].p(f,i):(l&&(ae(),d(o[a],1,1,()=>{o[a]=null}),ue()),~e?(l=o[e],l?l.p(f,i):(l=o[e]=s[e](f),l.c()),g(l,1),l.m(t.parentNode,t)):l=null)},i(f){n||(g(l),n=!0)},o(f){d(l),n=!1},d(f){f&&m(t),~e&&o[e].d(f)}}}function z$(r,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),s=!0,o=0;async function u(){let i=await Vs(`${Yt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,o=c)});l(2,o=100);let a=new TextDecoder().decode(i);t("all_schemes_output.geojson",a),l(1,s=!1)}As(async()=>{n&&await u()});async function f(){l(0,n=!0),await u()}return r.$$set=i=>{"loadFile"in i&&l(4,t=i.loadFile)},[n,s,o,f,t]}class H$ extends K{constructor(e){super(),X(this,e,z$,q$,V,{loadFile:4})}}const en=Ae({type:"FeatureCollection",features:[],schemes:{}}),$n=Ae(new Map),Ul=Ae(""),Wl=Ae(""),pn=Ae({type:"FeatureCollection",features:[],schemes:{}}),mn=Ae(new Map),Yl=Ae(""),Jl=Ae("");function E$(r){let e={type:"FeatureCollection",features:[],schemes:{},notes:r.notes},l=new Map,t={type:"FeatureCollection",features:[],schemes:{},notes:r.notes},n=new Map;for(let[s,o]of Object.entries(r.schemes))o.pipeline?(n.set(s,o),t.schemes[s]=o):(l.set(s,o),e.schemes[s]=o);for(let s of r.features){if(!B$(s))continue;let o=s.properties.scheme_reference,u=l.has(o),i=(u?l:n).get(o);i.browse&&(s.properties.funding_programme=i.browse.funding_programme,s.properties.current_milestone=i.browse.current_milestone);let a=u?e:t;s.id=a.features.length+1,a.features.push(s)}en.set(e),$n.set(l),pn.set(t),mn.set(n)}function B$(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}let Et={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},_n={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function Vl(r,e,l){const t=r.slice();return t[28]=e[l],t[29]=e,t[30]=l,t}function U$(r){let e;return{c(){e=v("Filters")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function W$(r){let e;return{c(){e=v("Reset all filters")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Y$(r){let e,l,t,n,s,o,u,f;e=new an({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Q$]},$$scope:{ctx:r}}});function i(_){r[23](_)}let a={label:"Scheme name or reference",options:tn(r[3])};r[0]!==void 0&&(a.value=r[0]),t=new Gs({props:a}),H.push(()=>E(t,"value",i));function c(_){r[24](_)}let $={label:"Authority or region",choices:r[10],emptyOption:!0};return r[4]!==void 0&&($.value=r[4]),o=new dt({props:$}),H.push(()=>E(o,"value",c)),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment),s=I(),b(o.$$.fragment)},m(_,y){k(e,_,y),p(_,l,y),k(t,_,y),p(_,s,y),k(o,_,y),f=!0},p(_,y){const S={};y[0]&2|y[1]&1&&(S.$$scope={dirty:y,ctx:_}),e.$set(S);const C={};y[0]&8&&(C.options=tn(_[3])),!n&&y[0]&1&&(n=!0,C.value=_[0],B(()=>n=!1)),t.$set(C);const N={};y[0]&1024&&(N.choices=_[10]),!u&&y[0]&16&&(u=!0,N.value=_[4],B(()=>u=!1)),o.$set(N)},i(_){f||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),f=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(o.$$.fragment,_),f=!1},d(_){_&&(m(l),m(s)),w(e,_),w(t,_),w(o,_)}}}function J$(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y,S,C;t=new an({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[K$]},$$scope:{ctx:r}}});function N(j){r[17](j)}let A={label:"Scheme name or reference",options:tn(r[3])};r[0]!==void 0&&(A.value=r[0]),s=new Gs({props:A}),H.push(()=>E(s,"value",N));function D(j){r[18](j)}let P={label:"Authority or region",choices:r[10],emptyOption:!0};r[4]!==void 0&&(P.value=r[4]),f=new dt({props:P}),H.push(()=>E(f,"value",D)),$=new an({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[ep]},$$scope:{ctx:r}}});function M(j){r[20](j)}let O={label:"Current milestone",choices:r[11],emptyOption:!0};return r[6]!==void 0&&(O.value=r[6]),y=new dt({props:O}),H.push(()=>E(y,"value",M)),{c(){e=T("div"),l=T("div"),b(t.$$.fragment),n=I(),b(s.$$.fragment),u=I(),b(f.$$.fragment),a=I(),c=T("div"),b($.$$.fragment),_=I(),b(y.$$.fragment),z(l,"class","govuk-grid-column-one-half"),z(c,"class","govuk-grid-column-one-half"),z(e,"class","govuk-grid-row")},m(j,L){p(j,e,L),h(e,l),k(t,l,null),h(l,n),k(s,l,null),h(l,u),k(f,l,null),h(e,a),h(e,c),k($,c,null),h(c,_),k(y,c,null),C=!0},p(j,L){const R={};L[0]&2|L[1]&1&&(R.$$scope={dirty:L,ctx:j}),t.$set(R);const W={};L[0]&8&&(W.options=tn(j[3])),!o&&L[0]&1&&(o=!0,W.value=j[0],B(()=>o=!1)),s.$set(W);const Q={};L[0]&1024&&(Q.choices=j[10]),!i&&L[0]&16&&(i=!0,Q.value=j[4],B(()=>i=!1)),f.$set(Q);const F={};L[0]&32|L[1]&1&&(F.$$scope={dirty:L,ctx:j}),$.$set(F);const Y={};!S&&L[0]&64&&(S=!0,Y.value=j[6],B(()=>S=!1)),y.$set(Y)},i(j){C||(g(t.$$.fragment,j),g(s.$$.fragment,j),g(f.$$.fragment,j),g($.$$.fragment,j),g(y.$$.fragment,j),C=!0)},o(j){d(t.$$.fragment,j),d(s.$$.fragment,j),d(f.$$.fragment,j),d($.$$.fragment,j),d(y.$$.fragment,j),C=!1},d(j){j&&m(e),w(t),w(s),w(f),w($),w(y)}}}function V$(r){let e;return{c(){e=v("Clear")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Q$(r){let e,l,t,n,s,o;return t=new nt({props:{$$slots:{default:[V$]},$$scope:{ctx:r}}}),t.$on("click",r[22]),{c(){e=T("input"),l=I(),b(t.$$.fragment),z(e,"type","text"),z(e,"class","govuk-input govuk-input--width-10"),z(e,"id","filterInterventionText")},m(u,f){p(u,e,f),Je(e,r[1]),p(u,l,f),k(t,u,f),n=!0,s||(o=tt(e,"input",r[21]),s=!0)},p(u,f){f[0]&2&&e.value!==u[1]&&Je(e,u[1]);const i={};f[1]&1&&(i.$$scope={dirty:f,ctx:u}),t.$set(i)},i(u){n||(g(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(m(e),m(l)),w(t,u),s=!1,o()}}}function Z$(r){let e;return{c(){e=v("Clear")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function K$(r){let e,l,t,n,s,o;return t=new nt({props:{$$slots:{default:[Z$]},$$scope:{ctx:r}}}),t.$on("click",r[16]),{c(){e=T("input"),l=I(),b(t.$$.fragment),z(e,"type","text"),z(e,"class","govuk-input govuk-input--width-10"),z(e,"id","filterInterventionText")},m(u,f){p(u,e,f),Je(e,r[1]),p(u,l,f),k(t,u,f),n=!0,s||(o=tt(e,"input",r[15]),s=!0)},p(u,f){f[0]&2&&e.value!==u[1]&&Je(e,u[1]);const i={};f[1]&1&&(i.$$scope={dirty:f,ctx:u}),t.$set(i)},i(u){n||(g(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(m(e),m(l)),w(t,u),s=!1,o()}}}function X$(r){let e=r[28]+"",l,t;return{c(){l=v(e),t=I()},m(n,s){p(n,l,s),p(n,t,s)},p:ee,d(n){n&&(m(l),m(t))}}}function Ql(r){let e,l,t;function n(o){r[19](o,r[28])}let s={$$slots:{default:[X$]},$$scope:{ctx:r}};return r[5][r[28]]!==void 0&&(s.checked=r[5][r[28]]),e=new ie({props:s}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(o,u){k(e,o,u),t=!0},p(o,u){r=o;const f={};u[1]&1&&(f.$$scope={dirty:u,ctx:r}),!l&&u[0]&32&&(l=!0,f.checked=r[5][r[28]],B(()=>l=!1)),e.$set(f)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function x$(r){let e,l,t=we(Object.keys(Et)),n=[];for(let o=0;o<t.length;o+=1)n[o]=Ql(Vl(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ve()},m(o,u){for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(o,u);p(o,e,u),l=!0},p(o,u){if(u[0]&32){t=we(Object.keys(Et));let f;for(f=0;f<t.length;f+=1){const i=Vl(o,t,f);n[f]?(n[f].p(i,u),g(n[f],1)):(n[f]=Ql(i),n[f].c(),g(n[f],1),n[f].m(e.parentNode,e))}for(ae(),f=t.length;f<n.length;f+=1)s(f);ue()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)g(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&m(e),Qe(n,o)}}}function ep(r){let e,l;return e=new lt({props:{small:!0,$$slots:{default:[x$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n[0]&32|n[1]&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function tp(r){let e;return{c(){e=v("Done")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function np(r){let e,l,t,n,s=r[9].interventions.toLocaleString()+"",o,u,f,i,a=r[8].size.toLocaleString()+"",c,$,_,y,S,C=Zl(r[9].totalLength).toFixed(1)+"",N,A,D,P,M,O,j,L,R,W;P=new nt({props:{$$slots:{default:[W$]},$$scope:{ctx:r}}}),P.$on("click",r[12]);const Q=[J$,Y$],F=[];function Y(Z,U){return Z[2]=="ATF"?0:1}return O=Y(r),j=F[O]=Q[O](r),R=new Qs({props:{$$slots:{default:[tp]},$$scope:{ctx:r}}}),R.$on("click",r[25]),{c(){e=T("p"),e.textContent="Showing:",l=I(),t=T("ul"),n=T("li"),o=v(s),u=v(" interventions"),f=I(),i=T("li"),c=v(a),$=v(" schemes"),_=I(),y=T("li"),S=v("total route length of "),N=v(C),A=v(" miles"),D=I(),b(P.$$.fragment),M=I(),j.c(),L=I(),b(R.$$.fragment)},m(Z,U){p(Z,e,U),p(Z,l,U),p(Z,t,U),h(t,n),h(n,o),h(n,u),h(t,f),h(t,i),h(i,c),h(i,$),h(t,_),h(t,y),h(y,S),h(y,N),h(y,A),p(Z,D,U),k(P,Z,U),p(Z,M,U),F[O].m(Z,U),p(Z,L,U),k(R,Z,U),W=!0},p(Z,U){(!W||U[0]&512)&&s!==(s=Z[9].interventions.toLocaleString()+"")&&G(o,s),(!W||U[0]&256)&&a!==(a=Z[8].size.toLocaleString()+"")&&G(c,a),(!W||U[0]&512)&&C!==(C=Zl(Z[9].totalLength).toFixed(1)+"")&&G(N,C);const Le={};U[1]&1&&(Le.$$scope={dirty:U,ctx:Z}),P.$set(Le);let je=O;O=Y(Z),O===je?F[O].p(Z,U):(ae(),d(F[je],1,1,()=>{F[je]=null}),ue(),j=F[O],j?j.p(Z,U):(j=F[O]=Q[O](Z),j.c()),g(j,1),j.m(L.parentNode,L));const J={};U[1]&1&&(J.$$scope={dirty:U,ctx:Z}),R.$set(J)},i(Z){W||(g(P.$$.fragment,Z),g(j),g(R.$$.fragment,Z),W=!0)},o(Z){d(P.$$.fragment,Z),d(j),d(R.$$.fragment,Z),W=!1},d(Z){Z&&(m(e),m(l),m(t),m(D),m(M),m(L)),w(P,Z),F[O].d(Z),w(R,Z)}}}function lp(r){let e,l,t,n,s;e=new nt({props:{$$slots:{default:[U$]},$$scope:{ctx:r}}}),e.$on("click",r[14]);function o(f){r[26](f)}let u={title:`Filter ${r[2]} schemes`,$$slots:{default:[np]},$$scope:{ctx:r}};return r[7]!==void 0&&(u.open=r[7]),t=new Is({props:u}),H.push(()=>E(t,"open",o)),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(f,i){k(e,f,i),p(f,l,i),k(t,f,i),s=!0},p(f,i){const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),e.$set(a);const c={};i[0]&4&&(c.title=`Filter ${f[2]} schemes`),i[0]&2047|i[1]&1&&(c.$$scope={dirty:i,ctx:f}),!n&&i[0]&128&&(n=!0,c.open=f[7],B(()=>n=!1)),t.$set(c)},i(f){s||(g(e.$$.fragment,f),g(t.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),s=!1},d(f){f&&m(l),w(e,f),w(t,f)}}}function sp(r){var t;let e=new Set;for(let n of r.values())(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Zl(r){return r*621371e-9}function tn(r){let e=[];for(let l of r.values())e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function rp(r,e,l){let t,{source:n}=e,{schemes:s}=e,{schemesGj:o}=e,{filterSchemeText:u}=e,{filterInterventionText:f}=e,i=!1,a=new Set,c={interventions:0,totalLength:0},$=Object.keys(_n).map(U=>[U,U]),_="",y=Object.fromEntries(Object.keys(Et).map(U=>[U,!0])),S="";function C(U,Le,je,J,at){let Ie=U.toLowerCase(),ut=Le.toLowerCase(),Vt=ke=>{var Xe,st,vt,Bt;if(Ie&&!((Xe=ke.properties.name)!=null&&Xe.toLowerCase().includes(Ie))&&!((st=ke.properties.description)!=null&&st.toLowerCase().includes(Ie)))return!1;let qe=s.get(ke.properties.scheme_reference);return!(je&&((vt=qe.browse)==null?void 0:vt.authority_or_region)!=je||n=="ATF"&&!J[qe.browse.funding_programme]||at&&((Bt=qe.browse)==null?void 0:Bt.current_milestone)!=at||ut&&!qe.scheme_reference.toLowerCase().includes(ut)&&!(qe.scheme_name??"").toLowerCase().includes(ut))};l(8,a=new Set(o.features.filter(Vt).map(ke=>ke.properties.scheme_reference))),l(9,c={interventions:0,totalLength:0});let wt=ke=>{var qe,Xe;return!(!a.has(ke.properties.scheme_reference)||Ie&&!((qe=ke.properties.name)!=null&&qe.toLowerCase().includes(Ie))&&!((Xe=ke.properties.description)!=null&&Xe.toLowerCase().includes(Ie)))};for(let ke of o.features)wt(ke)?(delete ke.properties.hide_while_editing,l(9,c.interventions++,c),ke.geometry.type=="LineString"&&ke.properties.length_meters&&l(9,c.totalLength+=ke.properties.length_meters,c)):ke.properties.hide_while_editing=!0;l(13,o),l(9,c)}function N(){l(4,_=""),l(5,y=Object.fromEntries(Object.keys(Et).map(U=>[U,!0]))),l(6,S=""),l(1,f=""),l(0,u="")}const A=()=>l(7,i=!0);function D(){f=this.value,l(1,f)}const P=()=>l(1,f="");function M(U){u=U,l(0,u)}function O(U){_=U,l(4,_)}function j(U,Le){r.$$.not_equal(y[Le],U)&&(y[Le]=U,l(5,y))}function L(U){S=U,l(6,S)}function R(){f=this.value,l(1,f)}const W=()=>l(1,f="");function Q(U){u=U,l(0,u)}function F(U){_=U,l(4,_)}const Y=()=>l(7,i=!1);function Z(U){i=U,l(7,i)}return r.$$set=U=>{"source"in U&&l(2,n=U.source),"schemes"in U&&l(3,s=U.schemes),"schemesGj"in U&&l(13,o=U.schemesGj),"filterSchemeText"in U&&l(0,u=U.filterSchemeText),"filterInterventionText"in U&&l(1,f=U.filterInterventionText)},r.$$.update=()=>{r.$$.dirty[0]&8&&l(10,t=sp(s)),r.$$.dirty[0]&115&&C(f,u,_,y,S)},[u,f,n,s,_,y,S,i,a,c,t,$,N,o,A,D,P,M,O,j,L,R,W,Q,F,Y,Z]}class zs extends K{constructor(e){super(),X(this,e,rp,lp,V,{source:2,schemes:3,schemesGj:13,filterSchemeText:0,filterInterventionText:1},null,[-1,-1])}}function Kl(r){let e,l,t,n=r[0].status+"",s;return{c(){e=T("p"),l=T("b"),l.textContent="Status",t=v(`
    : `),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&1&&n!==(n=o[0].status+"")&&G(s,n)},d(o){o&&m(e)}}}function Xl(r){let e,l,t,n=r[0].timescale+"",s;return{c(){e=T("p"),l=T("b"),l.textContent="Timescale",t=v(`
    : `),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&1&&n!==(n=o[0].timescale+"")&&G(s,n)},d(o){o&&m(e)}}}function xl(r){let e,l,t,n=r[0].timescale_year+"",s;return{c(){e=T("p"),l=T("b"),l.textContent="Estimated completion year",t=v(`
    : `),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&1&&n!==(n=o[0].timescale_year+"")&&G(s,n)},d(o){o&&m(e)}}}function es(r){let e,l,t,n=r[0].year_published+"",s;return{c(){e=T("p"),l=T("b"),l.textContent="Scheme most recently published",t=v(`
    : `),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&1&&n!==(n=o[0].year_published+"")&&G(s,n)},d(o){o&&m(e)}}}function ts(r){let e,l,t,n=r[0].year_consulted+"",s;return{c(){e=T("p"),l=T("b"),l.textContent="Scheme most recently consulted on",t=v(`
    : `),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&1&&n!==(n=o[0].year_consulted+"")&&G(s,n)},d(o){o&&m(e)}}}function op(r){let e,l,t,n,s,o=r[0].status&&Kl(r),u=r[0].timescale&&Xl(r),f=r[0].timescale_year&&xl(r),i=r[0].year_published&&es(r),a=r[0].year_consulted&&ts(r);return{c(){o&&o.c(),e=I(),u&&u.c(),l=I(),f&&f.c(),t=I(),i&&i.c(),n=I(),a&&a.c(),s=ve()},m(c,$){o&&o.m(c,$),p(c,e,$),u&&u.m(c,$),p(c,l,$),f&&f.m(c,$),p(c,t,$),i&&i.m(c,$),p(c,n,$),a&&a.m(c,$),p(c,s,$)},p(c,[$]){c[0].status?o?o.p(c,$):(o=Kl(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[0].timescale?u?u.p(c,$):(u=Xl(c),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),c[0].timescale_year?f?f.p(c,$):(f=xl(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),c[0].year_published?i?i.p(c,$):(i=es(c),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),c[0].year_consulted?a?a.p(c,$):(a=ts(c),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},i:ee,o:ee,d(c){c&&(m(e),m(l),m(t),m(n),m(s)),o&&o.d(c),u&&u.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c)}}}function ip(r,e,l){let{props:t}=e;return r.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Hs extends K{constructor(e){super(),X(this,e,ip,op,V,{props:0})}}function ns(r){let e,l,t,n=r[0].budget.toLocaleString()+"",s,o;return{c(){e=T("p"),l=T("b"),l.textContent="Cost",t=v(`
    : `),s=v(n),o=v(`
    GBP`)},m(u,f){p(u,e,f),h(e,l),h(e,t),h(e,s),h(e,o)},p(u,f){f&1&&n!==(n=u[0].budget.toLocaleString()+"")&&G(s,n)},d(u){u&&m(e)}}}function ls(r){let e;return{c(){e=T("p"),e.textContent="Development is fully funded"},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ss(r){let e;return{c(){e=T("p"),e.textContent="Construction is fully funded"},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function rs(r){let e,l,t,n;return{c(){e=T("p"),l=T("b"),l.textContent="Funding sources",t=v(`
    : `),n=v(r[1])},m(s,o){p(s,e,o),h(e,l),h(e,t),h(e,n)},p(s,o){o&2&&G(n,s[1])},d(s){s&&m(e)}}}function fp(r){let e,l,t,n,s=r[0].budget&&ns(r),o=r[0].development_funded&&ls(),u=r[0].construction_funded&&ss(),f=r[1]&&rs(r);return{c(){s&&s.c(),e=I(),o&&o.c(),l=I(),u&&u.c(),t=I(),f&&f.c(),n=ve()},m(i,a){s&&s.m(i,a),p(i,e,a),o&&o.m(i,a),p(i,l,a),u&&u.m(i,a),p(i,t,a),f&&f.m(i,a),p(i,n,a)},p(i,[a]){i[0].budget?s?s.p(i,a):(s=ns(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),i[0].development_funded?o||(o=ls(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),i[0].construction_funded?u||(u=ss(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),i[1]?f?f.p(i,a):(f=rs(i),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null)},i:ee,o:ee,d(i){i&&(m(e),m(l),m(t),m(n)),s&&s.d(i),o&&o.d(i),u&&u.d(i),f&&f.d(i)}}}function ap(r){if(!r.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])r.funding_sources[l]&&e.push(l.toUpperCase());return r.funding_sources.other&&e.push(r.funding_sources.other),e.join(", ")}function up(r,e,l){let t,{props:n}=e;return r.$$set=s=>{"props"in s&&l(0,n=s.props)},r.$$.update=()=>{r.$$.dirty&1&&l(1,t=ap(n))},[n,t]}class Es extends K{constructor(e){super(),X(this,e,up,fp,V,{props:0})}}function rn(r){const e=r.slice(),l=e[5].pipeline;return e[12]=l,e}function on(r){const e=r.slice(),l=e[1].pipeline;return e[12]=l,e}function os(r){let e,l,t,n=Fn(r[1].length_meters)+"",s;return{c(){e=T("p"),l=T("b"),l.textContent="Length",t=v(`
        : `),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&2&&n!==(n=Fn(o[1].length_meters)+"")&&G(s,n)},d(o){o&&m(e)}}}function is(r){let e,l=it(r[1].description,r[3])+"";return{c(){e=T("p")},m(t,n){p(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=it(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&m(e)}}}function fs(r){let e,l,t,n,s,o,u,f=r[12].atf4_type&&as(r),i=r[12].accuracy&&us(r),a=r[12].is_alternative&&cs();return n=new Es({props:{props:r[12]}}),o=new Hs({props:{props:r[12]}}),{c(){f&&f.c(),e=I(),i&&i.c(),l=I(),a&&a.c(),t=I(),b(n.$$.fragment),s=I(),b(o.$$.fragment)},m(c,$){f&&f.m(c,$),p(c,e,$),i&&i.m(c,$),p(c,l,$),a&&a.m(c,$),p(c,t,$),k(n,c,$),p(c,s,$),k(o,c,$),u=!0},p(c,$){c[12].atf4_type?f?f.p(c,$):(f=as(c),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null),c[12].accuracy?i?i.p(c,$):(i=us(c),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),c[12].is_alternative?a||(a=cs(),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null);const _={};$&2&&(_.props=c[12]),n.$set(_);const y={};$&2&&(y.props=c[12]),o.$set(y)},i(c){u||(g(n.$$.fragment,c),g(o.$$.fragment,c),u=!0)},o(c){d(n.$$.fragment,c),d(o.$$.fragment,c),u=!1},d(c){c&&(m(e),m(l),m(t),m(s)),f&&f.d(c),i&&i.d(c),a&&a.d(c),w(n,c),w(o,c)}}}function as(r){let e,l,t,n=r[12].atf4_type+"",s;return{c(){e=T("p"),l=T("b"),l.textContent="ATF4 type",t=v(`
          : `),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&2&&n!==(n=o[12].atf4_type+"")&&G(s,n)},d(o){o&&m(e)}}}function us(r){let e,l,t,n=r[12].accuracy+"",s;return{c(){e=T("p"),l=T("b"),l.textContent="Accuracy",t=v(`
          : `),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&2&&n!==(n=o[12].accuracy+"")&&G(s,n)},d(o){o&&m(e)}}}function cs(r){let e;return{c(){e=T("p"),e.textContent="Represents an alternative route"},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function $s(r){var o;let e,l,t,n=((o=r[5].browse)==null?void 0:o.capital_scheme_id)+"",s;return{c(){e=T("p"),l=T("b"),l.textContent="Capital scheme ID",t=v(`
        : `),s=v(n)},m(u,f){p(u,e,f),h(e,l),h(e,t),h(e,s)},p(u,f){var i;f&32&&n!==(n=((i=u[5].browse)==null?void 0:i.capital_scheme_id)+"")&&G(s,n)},d(u){u&&m(e)}}}function ps(r){var o;let e,l,t,n=((o=r[5].browse)==null?void 0:o.current_milestone)+"",s;return{c(){e=T("p"),l=T("b"),l.textContent="Current milestone",t=v(`
        : `),s=v(n)},m(u,f){p(u,e,f),h(e,l),h(e,t),h(e,s)},p(u,f){var i;f&32&&n!==(n=((i=u[5].browse)==null?void 0:i.current_milestone)+"")&&G(s,n)},d(u){u&&m(e)}}}function ms(r){let e,l,t,n,s,o,u,f=r[12].scheme_type&&_s(r),i=r[12].atf4_lead_type&&gs(r),a=r[12].scheme_description&&ds(r);return n=new Es({props:{props:r[12]}}),o=new Hs({props:{props:r[12]}}),{c(){f&&f.c(),e=I(),i&&i.c(),l=I(),a&&a.c(),t=I(),b(n.$$.fragment),s=I(),b(o.$$.fragment)},m(c,$){f&&f.m(c,$),p(c,e,$),i&&i.m(c,$),p(c,l,$),a&&a.m(c,$),p(c,t,$),k(n,c,$),p(c,s,$),k(o,c,$),u=!0},p(c,$){c[12].scheme_type?f?f.p(c,$):(f=_s(c),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null),c[12].atf4_lead_type?i?i.p(c,$):(i=gs(c),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),c[12].scheme_description?a?a.p(c,$):(a=ds(c),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null);const _={};$&32&&(_.props=c[12]),n.$set(_);const y={};$&32&&(y.props=c[12]),o.$set(y)},i(c){u||(g(n.$$.fragment,c),g(o.$$.fragment,c),u=!0)},o(c){d(n.$$.fragment,c),d(o.$$.fragment,c),u=!1},d(c){c&&(m(e),m(l),m(t),m(s)),f&&f.d(c),i&&i.d(c),a&&a.d(c),w(n,c),w(o,c)}}}function _s(r){let e,l,t,n=r[12].scheme_type+"",s;return{c(){e=T("p"),l=T("b"),l.textContent="Scheme type",t=v(`
          : `),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&32&&n!==(n=o[12].scheme_type+"")&&G(s,n)},d(o){o&&m(e)}}}function gs(r){let e,l,t,n=r[12].atf4_lead_type+"",s;return{c(){e=T("p"),l=T("b"),l.textContent="ATF4 lead type",t=v(`
          : `),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&32&&n!==(n=o[12].atf4_lead_type+"")&&G(s,n)},d(o){o&&m(e)}}}function ds(r){let e,l,t,n=r[12].scheme_description+"",s;return{c(){e=T("p"),l=T("b"),l.textContent="Descripton",t=v(`
          : `),s=v(n)},m(o,u){p(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&32&&n!==(n=o[12].scheme_description+"")&&G(s,n)},d(o){o&&m(e)}}}function cp(r){let e;return{c(){e=v("Zoom to show entire scheme")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function $p(r){let e;return{c(){e=v("Edit a copy of this scheme")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function hs(r){var Sn,Cn,Tn,Ln;let e,l,t,n,s,o,u,f=it(r[1].name,r[3])+"",i,a=r[1].intervention_type+"",c,$,_,y,S,C,N,A,D,P=r[0].toUpperCase()+"",M,O,j,L,R,W,Q,F=it(r[5].scheme_name??"",r[2])+"",Y,Z,U,Le,je,J=it(r[1].scheme_reference,r[2])+"",at,Ie,ut,Vt,wt=((Sn=r[5].browse)==null?void 0:Sn.authority_or_region)+"",ke,qe,Xe,st,vt,Bt,Qt=((Cn=r[5].browse)==null?void 0:Cn.funding_programme)+"",nn,vn,ln,sn,rt,yn,ot,ze,Me=r[1].length_meters&&os(r),Ne=r[1].description&&is(r),ye=r[1].pipeline&&fs(on(r)),Oe=((Tn=r[5].browse)==null?void 0:Tn.capital_scheme_id)&&$s(r),Pe=((Ln=r[5].browse)==null?void 0:Ln.current_milestone)&&ps(r),Se=r[5].pipeline&&ms(rn(r));return rt=new nt({props:{$$slots:{default:[cp]},$$scope:{ctx:r}}}),rt.$on("click",r[6]),ot=new nt({props:{$$slots:{default:[$p]},$$scope:{ctx:r}}}),ot.$on("click",r[7]),{c(){e=T("div"),l=T("h2"),l.textContent="Intervention",t=I(),n=T("p"),s=T("b"),s.textContent="Name",o=v(`
      : `),u=new $t(!1),i=v(" ("),c=v(a),$=v(")"),_=I(),Me&&Me.c(),y=I(),Ne&&Ne.c(),S=I(),ye&&ye.c(),C=I(),N=T("hr"),A=I(),D=T("h2"),M=v(P),O=v(" Scheme"),j=I(),L=T("p"),R=T("b"),R.textContent="Scheme name",W=v(`
      : `),Q=new $t(!1),Y=I(),Z=T("p"),U=T("b"),U.textContent="Scheme reference",Le=v(`
      : `),je=new $t(!1),at=I(),Ie=T("p"),ut=T("b"),ut.textContent="Authority or region",Vt=v(`
      : `),ke=v(wt),qe=I(),Oe&&Oe.c(),Xe=I(),st=T("p"),vt=T("b"),vt.textContent="Funding programme",Bt=v(`
      : `),nn=v(Qt),vn=I(),Pe&&Pe.c(),ln=I(),Se&&Se.c(),sn=I(),b(rt.$$.fragment),yn=I(),b(ot.$$.fragment),u.a=i,Q.a=null,je.a=null,pe(e,"max-width","30vw"),pe(e,"max-height","60vh"),pe(e,"overflow","auto")},m(fe,be){p(fe,e,be),h(e,l),h(e,t),h(e,n),h(n,s),h(n,o),u.m(f,n),h(n,i),h(n,c),h(n,$),h(e,_),Me&&Me.m(e,null),h(e,y),Ne&&Ne.m(e,null),h(e,S),ye&&ye.m(e,null),h(e,C),h(e,N),h(e,A),h(e,D),h(D,M),h(D,O),h(e,j),h(e,L),h(L,R),h(L,W),Q.m(F,L),h(e,Y),h(e,Z),h(Z,U),h(Z,Le),je.m(J,Z),h(e,at),h(e,Ie),h(Ie,ut),h(Ie,Vt),h(Ie,ke),h(e,qe),Oe&&Oe.m(e,null),h(e,Xe),h(e,st),h(st,vt),h(st,Bt),h(st,nn),h(e,vn),Pe&&Pe.m(e,null),h(e,ln),Se&&Se.m(e,null),h(e,sn),k(rt,e,null),h(e,yn),k(ot,e,null),r[10](e),ze=!0},p(fe,be){var Nn,On,Pn,jn;(!ze||be&10)&&f!==(f=it(fe[1].name,fe[3])+"")&&u.p(f),(!ze||be&2)&&a!==(a=fe[1].intervention_type+"")&&G(c,a),fe[1].length_meters?Me?Me.p(fe,be):(Me=os(fe),Me.c(),Me.m(e,y)):Me&&(Me.d(1),Me=null),fe[1].description?Ne?Ne.p(fe,be):(Ne=is(fe),Ne.c(),Ne.m(e,S)):Ne&&(Ne.d(1),Ne=null),fe[1].pipeline?ye?(ye.p(on(fe),be),be&2&&g(ye,1)):(ye=fs(on(fe)),ye.c(),g(ye,1),ye.m(e,C)):ye&&(ae(),d(ye,1,1,()=>{ye=null}),ue()),(!ze||be&1)&&P!==(P=fe[0].toUpperCase()+"")&&G(M,P),(!ze||be&36)&&F!==(F=it(fe[5].scheme_name??"",fe[2])+"")&&Q.p(F),(!ze||be&6)&&J!==(J=it(fe[1].scheme_reference,fe[2])+"")&&je.p(J),(!ze||be&32)&&wt!==(wt=((Nn=fe[5].browse)==null?void 0:Nn.authority_or_region)+"")&&G(ke,wt),(On=fe[5].browse)!=null&&On.capital_scheme_id?Oe?Oe.p(fe,be):(Oe=$s(fe),Oe.c(),Oe.m(e,Xe)):Oe&&(Oe.d(1),Oe=null),(!ze||be&32)&&Qt!==(Qt=((Pn=fe[5].browse)==null?void 0:Pn.funding_programme)+"")&&G(nn,Qt),(jn=fe[5].browse)!=null&&jn.current_milestone?Pe?Pe.p(fe,be):(Pe=ps(fe),Pe.c(),Pe.m(e,ln)):Pe&&(Pe.d(1),Pe=null),fe[5].pipeline?Se?(Se.p(rn(fe),be),be&32&&g(Se,1)):(Se=ms(rn(fe)),Se.c(),g(Se,1),Se.m(e,sn)):Se&&(ae(),d(Se,1,1,()=>{Se=null}),ue());const In={};be&8192&&(In.$$scope={dirty:be,ctx:fe}),rt.$set(In);const Mn={};be&8192&&(Mn.$$scope={dirty:be,ctx:fe}),ot.$set(Mn)},i(fe){ze||(g(ye),g(Se),g(rt.$$.fragment,fe),g(ot.$$.fragment,fe),ze=!0)},o(fe){d(ye),d(Se),d(rt.$$.fragment,fe),d(ot.$$.fragment,fe),ze=!1},d(fe){fe&&m(e),Me&&Me.d(),Ne&&Ne.d(),ye&&ye.d(),Oe&&Oe.d(),Pe&&Pe.d(),Se&&Se.d(),w(rt),w(ot),r[10](null)}}}function pp(r){let e=r[1],l,t,n=hs(r);return{c(){n.c(),l=ve()},m(s,o){n.m(s,o),p(s,l,o),t=!0},p(s,[o]){o&2&&V(e,e=s[1])?(ae(),d(n,1,1,ee),ue(),n=hs(s),n.c(),g(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(g(n),t=!0)},o(s){d(n),t=!1},d(s){s&&m(l),n.d(s)}}}function it(r,e){return e?r.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):r}function mp(r,e,l){let t,n;x(r,hn,S=>l(11,n=S));let{source:s}=e,{props:o}=e,{schemes:u}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,c;Zs(()=>{c&&l(4,c.scrollTop=0,c)});function $(){let S={type:"FeatureCollection",features:f.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(fr(S),{padding:20,animate:!1})}function _(){var A,D;let S={type:"FeatureCollection",features:f.features.filter(P=>P.properties.scheme_reference==t.scheme_reference),schemes:{}};S.schemes[t.scheme_reference]=t;let C=((A=t.browse)==null?void 0:A.authority_or_region)||"unknown authority",N=t.pipeline?"pipeline":"v1";N=="pipeline"&&(C+="_pipeline"),Ks(C,JSON.stringify(S)),window.open(`scheme.html?authority=${(D=t.browse)==null?void 0:D.authority_or_region}&schema=${N}`,"_blank")}function y(S){H[S?"unshift":"push"](()=>{c=S,l(4,c)})}return r.$$set=S=>{"source"in S&&l(0,s=S.source),"props"in S&&l(1,o=S.props),"schemes"in S&&l(8,u=S.schemes),"schemesGj"in S&&l(9,f=S.schemesGj),"filterSchemeText"in S&&l(2,i=S.filterSchemeText),"filterInterventionText"in S&&l(3,a=S.filterInterventionText)},r.$$.update=()=>{r.$$.dirty&258&&l(5,t=u.get(o.scheme_reference))},[s,o,i,a,c,t,$,_,u,f,y]}class wn extends K{constructor(e){super(),X(this,e,mp,pp,V,{source:0,props:1,schemes:8,schemesGj:9,filterSchemeText:2,filterInterventionText:3})}}function _p(r){let e,l=r[10].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&m(e)}}}function gp(r){let e,l;return e=new wn({props:{source:r[0],props:r[10],schemesGj:r[3],schemes:r[2],filterSchemeText:r[4],filterInterventionText:r[5]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.source=t[0]),n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function dp(r){let e,l,t,n;return e=new ce({props:{popupClass:"border-popup",$$slots:{default:[_p,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[gp,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(s,o){k(e,s,o),p(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&3072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const f={};o&3133&&(f.$$scope={dirty:o,ctx:s}),t.$set(f)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&m(l),w(e,s),w(t,s)}}}function hp(r){let e,l=r[10].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&m(e)}}}function bp(r){let e,l;return e=new wn({props:{source:r[0],props:r[10],schemesGj:r[3],schemes:r[2],filterSchemeText:r[4],filterInterventionText:r[5]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.source=t[0]),n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function kp(r){let e,l,t,n;return e=new ce({props:{popupClass:"border-popup",$$slots:{default:[hp,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[bp,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(s,o){k(e,s,o),p(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&3072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const f={};o&3133&&(f.$$scope={dirty:o,ctx:s}),t.$set(f)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&m(l),w(e,s),w(t,s)}}}function wp(r){let e,l=r[10].name+"",t;return{c(){e=T("p"),t=v(l)},m(n,s){p(n,e,s),h(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&m(e)}}}function vp(r){let e,l;return e=new wn({props:{source:r[0],props:r[10],schemesGj:r[3],schemes:r[2],filterSchemeText:r[4],filterInterventionText:r[5]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.source=t[0]),n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function yp(r){let e,l,t,n;return e=new ce({props:{popupClass:"border-popup",$$slots:{default:[wp,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[vp,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(s,o){k(e,s,o),p(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&3072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const f={};o&3133&&(f.$$scope={dirty:o,ctx:s}),t.$set(f)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&m(l),w(e,s),w(t,s)}}}function Sp(r){let e,l,t,n,s,o,u,f,i,a;const c=[q(`${r[0]}-interventions-points`),{filter:["all",Gn,r[8],r[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[6],"circle-radius":qn,"circle-opacity":le(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let $={$$slots:{default:[dp]},$$scope:{ctx:r}};for(let M=0;M<c.length;M+=1)$=se($,c[M]);e=new ht({props:$});const _=[q(`${r[0]}-interventions-lines`),{filter:["all",zn,r[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[6],"line-width":Ut,"line-opacity":le(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[kp]},$$scope:{ctx:r}};for(let M=0;M<_.length;M+=1)y=se(y,_[M]);t=new ge({props:y});const S=[q(`${r[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Ut,"circle-opacity":0,"circle-stroke-color":Ve.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[1]?"visible":"none"}}];let C={};for(let M=0;M<S.length;M+=1)C=se(C,S[M]);s=new ht({props:C});const N=[q(`${r[0]}-interventions-polygons`),{filter:["all",Zt,r[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[6],"fill-opacity":le(.2,.5)}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let A={$$slots:{default:[yp]},$$scope:{ctx:r}};for(let M=0;M<N.length;M+=1)A=se(A,N[M]);u=new Fe({props:A});const D=[q(`${r[0]}-interventions-polygons-outlines`),{filter:["all",Zt,r[8]]},{paint:{"line-color":r[6],"line-opacity":.5,"line-width":.7*Ut}},{layout:{visibility:r[1]?"visible":"none"}}];let P={};for(let M=0;M<D.length;M+=1)P=se(P,D[M]);return i=new ge({props:P}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment),n=I(),b(s.$$.fragment),o=I(),b(u.$$.fragment),f=I(),b(i.$$.fragment)},m(M,O){k(e,M,O),p(M,l,O),k(t,M,O),p(M,n,O),k(s,M,O),p(M,o,O),k(u,M,O),p(M,f,O),k(i,M,O),a=!0},p(M,O){const j=O&835?re(c,[O&1&&oe(q(`${M[0]}-interventions-points`)),O&768&&{filter:["all",Gn,M[8],M[9]]},c[2],c[3],O&64&&{paint:{"circle-color":M[6],"circle-radius":qn,"circle-opacity":le(1,.5)}},O&2&&{layout:{visibility:M[1]?"visible":"none"}},c[6]]):{};O&2109&&(j.$$scope={dirty:O,ctx:M}),e.$set(j);const L=O&323?re(_,[O&1&&oe(q(`${M[0]}-interventions-lines`)),O&256&&{filter:["all",zn,M[8]]},_[2],_[3],O&64&&{paint:{"line-color":M[6],"line-width":Ut,"line-opacity":le(1,.5)}},O&2&&{layout:{visibility:M[1]?"visible":"none"}},_[6]]):{};O&2109&&(L.$$scope={dirty:O,ctx:M}),t.$set(L);const R=O&3?re(S,[O&1&&oe(q(`${M[0]}-interventions-lines-endpoints`)),S[1],S[2],O&2&&{layout:{visibility:M[1]?"visible":"none"}}]):{};s.$set(R);const W=O&323?re(N,[O&1&&oe(q(`${M[0]}-interventions-polygons`)),O&256&&{filter:["all",Zt,M[8]]},N[2],N[3],O&64&&{paint:{"fill-color":M[6],"fill-opacity":le(.2,.5)}},O&2&&{layout:{visibility:M[1]?"visible":"none"}},N[6]]):{};O&2109&&(W.$$scope={dirty:O,ctx:M}),u.$set(W);const Q=O&323?re(D,[O&1&&oe(q(`${M[0]}-interventions-polygons-outlines`)),O&256&&{filter:["all",Zt,M[8]]},O&64&&{paint:{"line-color":M[6],"line-opacity":.5,"line-width":.7*Ut}},O&2&&{layout:{visibility:M[1]?"visible":"none"}}]):{};i.$set(Q)},i(M){a||(g(e.$$.fragment,M),g(t.$$.fragment,M),g(s.$$.fragment,M),g(u.$$.fragment,M),g(i.$$.fragment,M),a=!0)},o(M){d(e.$$.fragment,M),d(t.$$.fragment,M),d(s.$$.fragment,M),d(u.$$.fragment,M),d(i.$$.fragment,M),a=!1},d(M){M&&(m(l),m(n),m(o),m(f)),w(e,M),w(t,M),w(s,M),w(u,M),w(i,M)}}}function Cp(r){let e,l;return e=new bt({props:{data:r[7],$$slots:{default:[Sp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&128&&(s.data=t[7]),n&2175&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Tp(r,e,l){let t,{source:n}=e,{show:s}=e,{schemes:o}=e,{schemesGj:u}=e,{filterSchemeText:f}=e,{filterInterventionText:i}=e,{color:a}=e;const c=["!=",["get","hide_while_editing"],!0],$=["!=",["get","endpoint"],!0];return r.$$set=_=>{"source"in _&&l(0,n=_.source),"show"in _&&l(1,s=_.show),"schemes"in _&&l(2,o=_.schemes),"schemesGj"in _&&l(3,u=_.schemesGj),"filterSchemeText"in _&&l(4,f=_.filterSchemeText),"filterInterventionText"in _&&l(5,i=_.filterInterventionText),"color"in _&&l(6,a=_.color)},r.$$.update=()=>{r.$$.dirty&8&&l(7,t=ar(u))},[n,s,o,u,f,i,a,t,c,$]}class bs extends K{constructor(e){super(),X(this,e,Tp,Cp,V,{source:0,show:1,schemes:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function Lp(r){return Ze(["get","intervention_type"],{area:Ve.area,route:Ve.route,crossing:Ve.crossing,other:Ve.other},"white")}function Ip(r){return[["Areas",Ve.area],["Routes",Ve.route],["Crossings",Ve.crossing],["Other",Ve.other]]}function ks(r,e,l){const t=r.slice();return t[31]=e[l],t}function ws(r,e,l){const t=r.slice();return t[31]=e[l],t}function Mp(r){let e,l;return e=new H$({props:{loadFile:r[17]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:ee,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function vs(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y;function S(L){r[18](L)}let C={$$slots:{right:[Pp],default:[Np]},$$scope:{ctx:r}};r[3]!==void 0&&(C.checked=r[3]),e=new ie({props:C}),H.push(()=>E(e,"checked",S));function N(L){r[19](L)}function A(L){r[20](L)}function D(L){r[21](L)}function P(L){r[22](L)}let M={source:"ATF"};r[10]!==void 0&&(M.schemesGj=r[10]),r[9]!==void 0&&(M.schemes=r[9]),r[11]!==void 0&&(M.filterSchemeText=r[11]),r[12]!==void 0&&(M.filterInterventionText=r[12]),n=new zs({props:M}),H.push(()=>E(n,"schemesGj",N)),H.push(()=>E(n,"schemes",A)),H.push(()=>E(n,"filterSchemeText",D)),H.push(()=>E(n,"filterInterventionText",P));function O(L){r[23](L)}let j={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(j.value=r[0]),a=new dt({props:j}),H.push(()=>E(a,"value",O)),_=new Jt({props:{rows:r[7]}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),i=I(),b(a.$$.fragment),$=I(),b(_.$$.fragment)},m(L,R){k(e,L,R),p(L,t,R),k(n,L,R),p(L,i,R),k(a,L,R),p(L,$,R),k(_,L,R),y=!0},p(L,R){const W={};R[0]&1024|R[1]&32&&(W.$$scope={dirty:R,ctx:L}),!l&&R[0]&8&&(l=!0,W.checked=L[3],B(()=>l=!1)),e.$set(W);const Q={};!s&&R[0]&1024&&(s=!0,Q.schemesGj=L[10],B(()=>s=!1)),!o&&R[0]&512&&(o=!0,Q.schemes=L[9],B(()=>o=!1)),!u&&R[0]&2048&&(u=!0,Q.filterSchemeText=L[11],B(()=>u=!1)),!f&&R[0]&4096&&(f=!0,Q.filterInterventionText=L[12],B(()=>f=!1)),n.$set(Q);const F={};!c&&R[0]&1&&(c=!0,F.value=L[0],B(()=>c=!1)),a.$set(F);const Y={};R[0]&128&&(Y.rows=L[7]),_.$set(Y)},i(L){y||(g(e.$$.fragment,L),g(n.$$.fragment,L),g(a.$$.fragment,L),g(_.$$.fragment,L),y=!0)},o(L){d(e.$$.fragment,L),d(n.$$.fragment,L),d(a.$$.fragment,L),d(_.$$.fragment,L),y=!1},d(L){L&&(m(t),m(i),m($)),w(e,L),w(n,L),w(a,L),w(_,L)}}}function Np(r){let e;return{c(){e=v("ATF schemes")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function ys(r){let e,l,t=r[31]+"",n;return{c(){e=T("li"),l=T("p"),n=v(t)},m(s,o){p(s,e,o),h(e,l),h(l,n)},p(s,o){o[0]&1024&&t!==(t=s[31]+"")&&G(n,t)},d(s){s&&m(e)}}}function Op(r){let e,l,t,n,s,o;l=new Fs({props:{text:"Scheme data caveats"}});let u=we(r[10].notes??[]),f=[];for(let i=0;i<u.length;i+=1)f[i]=ys(ws(r,u,i));return{c(){e=T("p"),b(l.$$.fragment),t=v(`Please note there are data
            quality caveats for all scheme data:`),n=I(),s=T("ul");for(let i=0;i<f.length;i+=1)f[i].c()},m(i,a){p(i,e,a),k(l,e,null),h(e,t),p(i,n,a),p(i,s,a);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(s,null);o=!0},p(i,a){if(a[0]&1024){u=we(i[10].notes??[]);let c;for(c=0;c<u.length;c+=1){const $=ws(i,u,c);f[c]?f[c].p($,a):(f[c]=ys($),f[c].c(),f[c].m(s,null))}for(;c<f.length;c+=1)f[c].d(1);f.length=u.length}},i(i){o||(g(l.$$.fragment,i),o=!0)},o(i){d(l.$$.fragment,i),o=!1},d(i){i&&(m(e),m(n),m(s)),w(l),Qe(f,i)}}}function Pp(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Op]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s[0]&1024|s[1]&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Ss(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y;function S(L){r[24](L)}let C={$$slots:{right:[Dp],default:[jp]},$$scope:{ctx:r}};r[4]!==void 0&&(C.checked=r[4]),e=new ie({props:C}),H.push(()=>E(e,"checked",S));function N(L){r[25](L)}function A(L){r[26](L)}function D(L){r[27](L)}function P(L){r[28](L)}let M={source:"LCWIP"};r[14]!==void 0&&(M.schemesGj=r[14]),r[13]!==void 0&&(M.schemes=r[13]),r[15]!==void 0&&(M.filterSchemeText=r[15]),r[16]!==void 0&&(M.filterInterventionText=r[16]),n=new zs({props:M}),H.push(()=>E(n,"schemesGj",N)),H.push(()=>E(n,"schemes",A)),H.push(()=>E(n,"filterSchemeText",D)),H.push(()=>E(n,"filterInterventionText",P));function O(L){r[29](L)}let j={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return r[1]!==void 0&&(j.value=r[1]),a=new dt({props:j}),H.push(()=>E(a,"value",O)),_=new Jt({props:{rows:r[5]}}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment),i=I(),b(a.$$.fragment),$=I(),b(_.$$.fragment)},m(L,R){k(e,L,R),p(L,t,R),k(n,L,R),p(L,i,R),k(a,L,R),p(L,$,R),k(_,L,R),y=!0},p(L,R){const W={};R[0]&16384|R[1]&32&&(W.$$scope={dirty:R,ctx:L}),!l&&R[0]&16&&(l=!0,W.checked=L[4],B(()=>l=!1)),e.$set(W);const Q={};!s&&R[0]&16384&&(s=!0,Q.schemesGj=L[14],B(()=>s=!1)),!o&&R[0]&8192&&(o=!0,Q.schemes=L[13],B(()=>o=!1)),!u&&R[0]&32768&&(u=!0,Q.filterSchemeText=L[15],B(()=>u=!1)),!f&&R[0]&65536&&(f=!0,Q.filterInterventionText=L[16],B(()=>f=!1)),n.$set(Q);const F={};!c&&R[0]&2&&(c=!0,F.value=L[1],B(()=>c=!1)),a.$set(F);const Y={};R[0]&32&&(Y.rows=L[5]),_.$set(Y)},i(L){y||(g(e.$$.fragment,L),g(n.$$.fragment,L),g(a.$$.fragment,L),g(_.$$.fragment,L),y=!0)},o(L){d(e.$$.fragment,L),d(n.$$.fragment,L),d(a.$$.fragment,L),d(_.$$.fragment,L),y=!1},d(L){L&&(m(t),m(i),m($)),w(e,L),w(n,L),w(a,L),w(_,L)}}}function jp(r){let e;return{c(){e=v("LCWIP schemes")},m(l,t){p(l,e,t)},d(l){l&&m(e)}}}function Cs(r){let e,l,t=r[31]+"",n;return{c(){e=T("li"),l=T("p"),n=v(t)},m(s,o){p(s,e,o),h(e,l),h(l,n)},p(s,o){o[0]&16384&&t!==(t=s[31]+"")&&G(n,t)},d(s){s&&m(e)}}}function Rp(r){let e,l,t,n,s,o;l=new Fs({props:{text:"Scheme data caveats"}});let u=we(r[14].notes??[]),f=[];for(let i=0;i<u.length;i+=1)f[i]=Cs(ks(r,u,i));return{c(){e=T("p"),b(l.$$.fragment),t=v(`Please note there are data
            quality caveats for all scheme data:`),n=I(),s=T("ul");for(let i=0;i<f.length;i+=1)f[i].c()},m(i,a){p(i,e,a),k(l,e,null),h(e,t),p(i,n,a),p(i,s,a);for(let c=0;c<f.length;c+=1)f[c]&&f[c].m(s,null);o=!0},p(i,a){if(a[0]&16384){u=we(i[14].notes??[]);let c;for(c=0;c<u.length;c+=1){const $=ks(i,u,c);f[c]?f[c].p($,a):(f[c]=Cs($),f[c].c(),f[c].m(s,null))}for(;c<f.length;c+=1)f[c].d(1);f.length=u.length}},i(i){o||(g(l.$$.fragment,i),o=!0)},o(i){d(l.$$.fragment,i),o=!1},d(i){i&&(m(e),m(n),m(s)),w(l),Qe(f,i)}}}function Dp(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Rp]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s[0]&16384|s[1]&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function Ap(r){let e=bn()=="Private (development)",l,t,n,s,o,u,f,i=e&&Mp(r),a=r[9].size>0&&vs(r),c=r[13].size>0&&Ss(r);return s=new Xs({props:{label:"Load schemes from GeoJSON",onLoad:r[17]}}),u=new xs({props:{errorMessage:r[2]}}),{c(){i&&i.c(),l=I(),a&&a.c(),t=I(),c&&c.c(),n=I(),b(s.$$.fragment),o=I(),b(u.$$.fragment)},m($,_){i&&i.m($,_),p($,l,_),a&&a.m($,_),p($,t,_),c&&c.m($,_),p($,n,_),k(s,$,_),p($,o,_),k(u,$,_),f=!0},p($,_){e&&i.p($,_),$[9].size>0?a?(a.p($,_),_[0]&512&&g(a,1)):(a=vs($),a.c(),g(a,1),a.m(t.parentNode,t)):a&&(ae(),d(a,1,1,()=>{a=null}),ue()),$[13].size>0?c?(c.p($,_),_[0]&8192&&g(c,1)):(c=Ss($),c.c(),g(c,1),c.m(n.parentNode,n)):c&&(ae(),d(c,1,1,()=>{c=null}),ue());const y={};_[0]&4&&(y.errorMessage=$[2]),u.$set(y)},i($){f||(g(i),g(a),g(c),g(s.$$.fragment,$),g(u.$$.fragment,$),f=!0)},o($){d(i),d(a),d(c),d(s.$$.fragment,$),d(u.$$.fragment,$),f=!1},d($){$&&(m(l),m(t),m(n),m(o)),i&&i.d($),a&&a.d($),c&&c.d($),w(s,$),w(u,$)}}}function Fp(r){let e,l,t,n,s,o;return e=new xe({props:{label:"Schemes",open:!0,$$slots:{default:[Ap]},$$scope:{ctx:r}}}),t=new bs({props:{source:"atf",show:r[3],schemesGj:r[10],schemes:r[9],filterSchemeText:r[11],filterInterventionText:r[12],color:r[8]}}),s=new bs({props:{source:"lcwip",show:r[4],schemesGj:r[14],schemes:r[13],filterSchemeText:r[15],filterInterventionText:r[16],color:r[6]}}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment),n=I(),b(s.$$.fragment)},m(u,f){k(e,u,f),p(u,l,f),k(t,u,f),p(u,n,f),k(s,u,f),o=!0},p(u,f){const i={};f[0]&130751|f[1]&32&&(i.$$scope={dirty:f,ctx:u}),e.$set(i);const a={};f[0]&8&&(a.show=u[3]),f[0]&1024&&(a.schemesGj=u[10]),f[0]&512&&(a.schemes=u[9]),f[0]&2048&&(a.filterSchemeText=u[11]),f[0]&4096&&(a.filterInterventionText=u[12]),f[0]&256&&(a.color=u[8]),t.$set(a);const c={};f[0]&16&&(c.show=u[4]),f[0]&16384&&(c.schemesGj=u[14]),f[0]&8192&&(c.schemes=u[13]),f[0]&32768&&(c.filterSchemeText=u[15]),f[0]&65536&&(c.filterInterventionText=u[16]),f[0]&64&&(c.color=u[6]),s.$set(c)},i(u){o||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(s.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(s.$$.fragment,u),o=!1},d(u){u&&(m(l),m(n)),w(e,u),w(t,u),w(s,u)}}}function Gp(r,e,l){let t,n,s,o,u,f,i,a,c,$,_,y;x(r,$n,J=>l(9,u=J)),x(r,en,J=>l(10,f=J)),x(r,Wl,J=>l(11,i=J)),x(r,Ul,J=>l(12,a=J)),x(r,mn,J=>l(13,c=J)),x(r,pn,J=>l(14,$=J)),x(r,Jl,J=>l(15,_=J)),x(r,Yl,J=>l(16,y=J));let S="",C=!0,N=!0,A="fundingProgramme",D="interventionType";function P(J,at){try{E$(JSON.parse(at)),l(2,S="")}catch(Ie){l(2,S=`The file you loaded is broken: ${Ie}`)}}function M(J){return J=="interventionType"?[Lp(),Ip()]:J=="fundingProgramme"?[Ze(["get","funding_programme"],Et,"grey"),Object.entries(Et)]:J=="currentMilestone"?[Ze(["get","current_milestone"],_n,"grey"),Object.entries(_n)]:["red",[]]}function O(J){C=J,l(3,C)}function j(J){f=J,en.set(f)}function L(J){u=J,$n.set(u)}function R(J){i=J,Wl.set(i)}function W(J){a=J,Ul.set(a)}function Q(J){A=J,l(0,A)}function F(J){N=J,l(4,N)}function Y(J){$=J,pn.set($)}function Z(J){c=J,mn.set(c)}function U(J){_=J,Jl.set(_)}function Le(J){y=J,Yl.set(y)}function je(J){D=J,l(1,D)}return r.$$.update=()=>{r.$$.dirty[0]&1&&l(8,[t,n]=M(A),t,(l(7,n),l(0,A))),r.$$.dirty[0]&2&&l(6,[s,o]=M(D),s,(l(5,o),l(1,D)))},[A,D,S,C,N,o,s,n,t,u,f,i,a,c,$,_,y,P,O,j,L,R,W,Q,F,Y,Z,U,Le,je]}class qp extends K{constructor(e){super(),X(this,e,Gp,Fp,V,{},null,[-1,-1])}}const Ts=Ae(!0);let gn=Ae(null);function zp(r){let e,l,t,n,s,o,u,f;return e=new bc({}),t=new Oc({}),s=new Jc({}),u=new Ec({}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment),n=I(),b(s.$$.fragment),o=I(),b(u.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),p(i,n,a),k(s,i,a),p(i,o,a),k(u,i,a),f=!0},i(i){f||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),g(u.$$.fragment,i),f=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),d(u.$$.fragment,i),f=!1},d(i){i&&(m(l),m(n),m(o)),w(e,i),w(t,i),w(s,i),w(u,i)}}}function Hp(r){let e,l;return e=new lt({props:{small:!0,$$slots:{default:[zp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ep(r){let e,l,t,n,s,o,u,f,i,a,c,$;return e=new Df({}),t=new ca({}),s=new Wf({}),u=new ta({}),i=new rc({}),c=new Gu({}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment),n=I(),b(s.$$.fragment),o=I(),b(u.$$.fragment),f=I(),b(i.$$.fragment),a=I(),b(c.$$.fragment)},m(_,y){k(e,_,y),p(_,l,y),k(t,_,y),p(_,n,y),k(s,_,y),p(_,o,y),k(u,_,y),p(_,f,y),k(i,_,y),p(_,a,y),k(c,_,y),$=!0},i(_){$||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(s.$$.fragment,_),g(u.$$.fragment,_),g(i.$$.fragment,_),g(c.$$.fragment,_),$=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(s.$$.fragment,_),d(u.$$.fragment,_),d(i.$$.fragment,_),d(c.$$.fragment,_),$=!1},d(_){_&&(m(l),m(n),m(o),m(f),m(a)),w(e,_),w(t,_),w(s,_),w(u,_),w(i,_),w(c,_)}}}function Bp(r){let e,l;return e=new lt({props:{small:!0,$$slots:{default:[Ep]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Up(r){let e,l,t,n,s,o;return e=new wf({}),t=new du({}),s=new Lu({}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment),n=I(),b(s.$$.fragment)},m(u,f){k(e,u,f),p(u,l,f),k(t,u,f),p(u,n,f),k(s,u,f),o=!0},i(u){o||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(s.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(s.$$.fragment,u),o=!1},d(u){u&&(m(l),m(n)),w(e,u),w(t,u),w(s,u)}}}function Wp(r){let e,l,t,n,s,o,u,f,i,a;return e=new Mi({}),t=new of({}),s=new Ao({}),u=new si({}),i=new hi({}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment),n=I(),b(s.$$.fragment),o=I(),b(u.$$.fragment),f=I(),b(i.$$.fragment)},m(c,$){k(e,c,$),p(c,l,$),k(t,c,$),p(c,n,$),k(s,c,$),p(c,o,$),k(u,c,$),p(c,f,$),k(i,c,$),a=!0},i(c){a||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(s.$$.fragment,c),g(u.$$.fragment,c),g(i.$$.fragment,c),a=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(s.$$.fragment,c),d(u.$$.fragment,c),d(i.$$.fragment,c),a=!1},d(c){c&&(m(l),m(n),m(o),m(f)),w(e,c),w(t,c),w(s,c),w(u,c),w(i,c)}}}function Yp(r){let e,l;return e=new lt({props:{small:!0,$$slots:{default:[Wp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Jp(r){let e,l,t,n;return e=new Co({}),t=new Jo({}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment)},m(s,o){k(e,s,o),p(s,l,o),k(t,s,o),n=!0},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&m(l),w(e,s),w(t,s)}}}function Vp(r){let e,l;return e=new lt({props:{small:!0,$$slots:{default:[Jp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Qp(r){let e,l,t,n,s,o,u,f;return e=new au({}),t=new Sa({}),s=new xa({}),u=new j$({}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment),n=I(),b(s.$$.fragment),o=I(),b(u.$$.fragment)},m(i,a){k(e,i,a),p(i,l,a),k(t,i,a),p(i,n,a),k(s,i,a),p(i,o,a),k(u,i,a),f=!0},i(i){f||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),g(u.$$.fragment,i),f=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),d(u.$$.fragment,i),f=!1},d(i){i&&(m(l),m(n),m(o)),w(e,i),w(t,i),w(s,i),w(u,i)}}}function Zp(r){let e,l,t,n,s,o,u,f,i=bn()=="Private (development)",a,c,$,_,y;e=new y$({}),t=new c$({}),s=new za({}),u=new Vu({});let S=i&&Qp();return c=new qi({}),_=new Qi({}),{c(){b(e.$$.fragment),l=I(),b(t.$$.fragment),n=I(),b(s.$$.fragment),o=I(),b(u.$$.fragment),f=I(),S&&S.c(),a=I(),b(c.$$.fragment),$=I(),b(_.$$.fragment)},m(C,N){k(e,C,N),p(C,l,N),k(t,C,N),p(C,n,N),k(s,C,N),p(C,o,N),k(u,C,N),p(C,f,N),S&&S.m(C,N),p(C,a,N),k(c,C,N),p(C,$,N),k(_,C,N),y=!0},p:ee,i(C){y||(g(e.$$.fragment,C),g(t.$$.fragment,C),g(s.$$.fragment,C),g(u.$$.fragment,C),g(S),g(c.$$.fragment,C),g(_.$$.fragment,C),y=!0)},o(C){d(e.$$.fragment,C),d(t.$$.fragment,C),d(s.$$.fragment,C),d(u.$$.fragment,C),d(S),d(c.$$.fragment,C),d(_.$$.fragment,C),y=!1},d(C){C&&(m(l),m(n),m(o),m(f),m(a),m($)),w(e,C),w(t,C),w(s,C),w(u,C),S&&S.d(C),w(c,C),w(_,C)}}}function Kp(r){let e,l;return e=new lt({props:{small:!0,$$slots:{default:[Zp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Xp(r){let e,l,t,n,s;function o(f){r[6](f)}let u={cfg:r[5],map:r[3]};return r[0]!==void 0&&(u.enabled=r[0]),e=new cr({props:u}),H.push(()=>E(e,"enabled",o)),n=new Yr({}),{c(){b(e.$$.fragment),t=I(),b(n.$$.fragment)},m(f,i){k(e,f,i),p(f,t,i),k(n,f,i),s=!0},p(f,i){const a={};i&8&&(a.map=f[3]),!l&&i&1&&(l=!0,a.enabled=f[0],B(()=>l=!1)),e.$set(a)},i(f){s||(g(e.$$.fragment,f),g(n.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(n.$$.fragment,f),s=!1},d(f){f&&m(t),w(e,f),w(n,f)}}}function xp(r){let e,l;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let n={};for(let s=0;s<t.length;s+=1)n=se(n,t[s]);return e=new Fe({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&2?re(t,[t[0],t[1],{layout:{visibility:s[1]?"none":"visible"}}]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function em(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y,S,C,N,A,D,P,M;return l=new qp({}),n=new xe({props:{label:"Trip generators",$$slots:{default:[Hp]},$$scope:{ctx:r}}}),o=new xe({props:{label:"Existing infrastructure",$$slots:{default:[Bp]},$$scope:{ctx:r}}}),f=new xe({props:{label:"Public transport",$$slots:{default:[Up]},$$scope:{ctx:r}}}),a=new xe({props:{label:"Boundaries",$$slots:{default:[Yp]},$$scope:{ctx:r}}}),$=new xe({props:{label:"Census",$$slots:{default:[Vp]},$$scope:{ctx:r}}}),y=new xe({props:{label:"Other",$$slots:{default:[Kp]},$$scope:{ctx:r}}}),C=new xe({props:{label:"Tools",$$slots:{default:[Xp]},$$scope:{ctx:r}}}),A=new ur({props:{disabled:!r[1]}}),P=new bt({props:{data:r[4],$$slots:{default:[xp]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(l.$$.fragment),t=I(),b(n.$$.fragment),s=I(),b(o.$$.fragment),u=I(),b(f.$$.fragment),i=I(),b(a.$$.fragment),c=I(),b($.$$.fragment),_=I(),b(y.$$.fragment),S=I(),b(C.$$.fragment),N=I(),b(A.$$.fragment),D=I(),b(P.$$.fragment)},m(O,j){p(O,e,j),k(l,e,null),h(e,t),k(n,e,null),h(e,s),k(o,e,null),h(e,u),k(f,e,null),h(e,i),k(a,e,null),h(e,c),k($,e,null),h(e,_),k(y,e,null),h(e,S),k(C,e,null),h(e,N),k(A,e,null),r[7](e),p(O,D,j),k(P,O,j),M=!0},p(O,[j]){const L={};j&256&&(L.$$scope={dirty:j,ctx:O}),n.$set(L);const R={};j&256&&(R.$$scope={dirty:j,ctx:O}),o.$set(R);const W={};j&256&&(W.$$scope={dirty:j,ctx:O}),f.$set(W);const Q={};j&256&&(Q.$$scope={dirty:j,ctx:O}),a.$set(Q);const F={};j&256&&(F.$$scope={dirty:j,ctx:O}),$.$set(F);const Y={};j&256&&(Y.$$scope={dirty:j,ctx:O}),y.$set(Y);const Z={};j&265&&(Z.$$scope={dirty:j,ctx:O}),C.$set(Z);const U={};j&2&&(U.disabled=!O[1]),A.$set(U);const Le={};j&258&&(Le.$$scope={dirty:j,ctx:O}),P.$set(Le)},i(O){M||(g(l.$$.fragment,O),g(n.$$.fragment,O),g(o.$$.fragment,O),g(f.$$.fragment,O),g(a.$$.fragment,O),g($.$$.fragment,O),g(y.$$.fragment,O),g(C.$$.fragment,O),g(A.$$.fragment,O),g(P.$$.fragment,O),M=!0)},o(O){d(l.$$.fragment,O),d(n.$$.fragment,O),d(o.$$.fragment,O),d(f.$$.fragment,O),d(a.$$.fragment,O),d($.$$.fragment,O),d(y.$$.fragment,O),d(C.$$.fragment,O),d(A.$$.fragment,O),d(P.$$.fragment,O),M=!1},d(O){O&&(m(e),m(D)),w(l),w(n),w(o),w(f),w(a),w($),w(y),w(C),w(A),r[7](null),w(P,O)}}}function tm(r,e,l){let t,n,s,o;x(r,Ts,c=>l(1,n=c)),x(r,gn,c=>l(2,s=c)),x(r,hn,c=>l(3,o=c));let u={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},f={getStreetViewRoadLayerNames:c=>$r(c,er(un))};function i(c){t=c,l(0,t),l(1,n)}function a(c){H[c?"unshift":"push"](()=>{s=c,gn.set(s)})}return r.$$.update=()=>{r.$$.dirty&2&&l(0,t=!n),r.$$.dirty&1&&Ts.set(!t)},[t,n,s,o,u,f,i,a]}class nm extends K{constructor(e){super(),X(this,e,tm,em,V,{})}}function lm(r){let e,l,t,n,s,o,u,f,i,a,c,$,_,y,S,C,N;return l=new pr({}),n=new tr({}),u=new nr({}),y=new mr({props:{boundaryGeojson:r[3]}}),{c(){e=T("div"),b(l.$$.fragment),t=I(),b(n.$$.fragment),s=I(),o=T("div"),b(u.$$.fragment),f=I(),i=T("p"),i.textContent=`App version: ${bn()}`,a=I(),c=T("div"),$=T("h1"),$.textContent="Scheme Browser",_=I(),b(y.$$.fragment),S=I(),C=T("div"),pe(o,"border-bottom","1px solid #b1b4b6"),pe(c,"display","flex"),pe(c,"justify-content","space-between"),z(e,"slot","sidebar"),z(e,"class","govuk-prose")},m(A,D){p(A,e,D),k(l,e,null),h(e,t),k(n,e,null),h(e,s),h(e,o),k(u,o,null),h(o,f),h(o,i),h(e,a),h(e,c),h(c,$),h(c,_),k(y,c,null),h(e,S),h(e,C),r[6](C),N=!0},p(A,D){const P={};D&8&&(P.boundaryGeojson=A[3]),y.$set(P)},i(A){N||(g(l.$$.fragment,A),g(n.$$.fragment,A),g(u.$$.fragment,A),g(y.$$.fragment,A),N=!0)},o(A){d(l.$$.fragment,A),d(n.$$.fragment,A),d(u.$$.fragment,A),d(y.$$.fragment,A),N=!1},d(A){A&&m(e),w(l),w(n),w(u),w(y),r[6](null)}}}function Ls(r){let e,l;return e=new nm({}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function sm(r){let e,l,t,n;e=new _r({});let s=r[2]&&Ls();return{c(){b(e.$$.fragment),l=I(),s&&s.c(),t=ve()},m(o,u){k(e,o,u),p(o,l,u),s&&s.m(o,u),p(o,t,u),n=!0},p(o,u){o[2]?s?u&4&&g(s,1):(s=Ls(),s.c(),g(s,1),s.m(t.parentNode,t)):s&&(ae(),d(s,1,1,()=>{s=null}),ue())},i(o){n||(g(e.$$.fragment,o),g(s),n=!0)},o(o){d(e.$$.fragment,o),d(s),n=!1},d(o){o&&(m(l),m(t)),w(e,o),s&&s.d(o)}}}function rm(r){let e,l,t;return l=new lr({props:{style:r[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[sm]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(l.$$.fragment),z(e,"slot","main")},m(n,s){p(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2&&(o.style=n[1]),s&260&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&m(e),w(l)}}}function om(r){let e,l;return e=new Tr({props:{$$slots:{main:[rm],sidebar:[lm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&271&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function im(r,e,l){let t,n,s,o,u;x(r,gn,c=>l(4,t=c)),x(r,hn,c=>l(5,n=c)),x(r,un,c=>l(1,s=c)),x(r,Hn,c=>l(2,o=c)),x(r,en,c=>l(3,u=c)),As(()=>{sr()});const f=new URLSearchParams(window.location.search);un.set(f.get("style")||"dataviz");let i;function a(c){H[c?"unshift":"push"](()=>{i=c,l(0,i),l(4,t)})}return r.$$.update=()=>{r.$$.dirty&32&&n&&Hn.set(n),r.$$.dirty&17&&i&&t&&(l(0,i.innerHTML="",i),i.appendChild(t))},[i,s,o,u,t,n,a]}class fm extends K{constructor(e){super(),X(this,e,im,om,V,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new fm({target:document.getElementById("app")});
