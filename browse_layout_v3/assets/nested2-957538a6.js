import{S as V,i as Q,s as J,e as L,b as B,aw as pe,c as $,n as x,d as p,aS as os,g as E,h as U,a as T,k as h,p as b,z as tt,q as W,t as g,r as d,u as k,O as ct,P as $t,Q as pt,T as mt,b3 as wn,o as w,ak as Pe,a7 as ae,a8 as fe,at as rt,x as v,N as z,a6 as ve,a9 as rn,aa as is,v as Y,ab as as,ac as fs,ad as Ne,ae as us,af as cs,b4 as hs,U as bt,b5 as vn,b6 as bs,G as dt,aO as xt,X as ee,J as ge,f as nt,aQ as ks,b2 as K,a4 as it,b7 as $e,I as X,H as je,Z as te,ar as re,a5 as Wt,y as Ze,W as $s,a$ as Gt,b8 as Et,b9 as ut,R as ps,ba as ws,bb as vs,w as on,bc as ys,b1 as Qt,F as yn,D as Ss,m as an,j as Cs,E as Ls,aT as Ts,aU as en,L as Ms,M as Ns,A as Ps}from"./index-1627d818.js";import{e as Sn,s as H,u as Ke,t as Os,q as Ge,M as Is,h as Xe,a as le,v as de,k as ft,R as Rs,C as lt,f as _t,p as Cn,b as Ds,g as As,d as Ln,w as Tn,c as Mn,x as jt,i as Ut,B as qs,S as Fs,n as zs,H as js,Z as Hs,G as Bs,m as Nn}from"./ZoomOutMap-2461408c.js";import{P as oe}from"./Popup-07e923d3.js";function Gs(r){let e;return{c(){e=L("span"),B(e,"class","svelte-kzgqtg"),pe(e,"background",r[0])},m(l,t){$(l,e,t)},p(l,[t]){t&1&&pe(e,"background",l[0])},i:x,o:x,d(l){l&&p(e)}}}function Es(r,e,l){let{color:t}=e;return r.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Oe extends V{constructor(e){super(),Q(this,e,Es,Gs,J,{color:0})}}const Us="/atip/browse_layout_v3/assets/help-d011708a.svg";function Ws(r){let e,l;const t=r[1].default,n=ct(t,r,r[4],null);return{c(){e=L("div"),n&&n.c(),B(e,"class","govuk-prose")},m(s,o){$(s,e,o),n&&n.m(e,null),l=!0},p(s,o){n&&n.p&&(!l||o&16)&&$t(n,t,s,s[4],l?mt(t,s[4],o,null):pt(s[4]),null)},i(s){l||(g(n,s),l=!0)},o(s){d(n,s),l=!1},d(s){s&&p(e),n&&n.d(s)}}}function Ys(r){let e,l,t,n,s,o,u;function a(f){r[3](f)}let i={title:"Help",$$slots:{default:[Ws]},$$scope:{ctx:r}};return r[0]!==void 0&&(i.open=r[0]),t=new os({props:i}),E.push(()=>U(t,"open",a)),{c(){e=L("button"),e.innerHTML=`<img src="${Us}" title="Help" alt="Help"/>`,l=T(),h(t.$$.fragment),B(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,l,c),b(t,f,c),s=!0,o||(u=tt(e,"click",r[2]),o=!0)},p(f,[c]){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.open=f[0],W(()=>n=!1)),t.$set(m)},i(f){s||(g(t.$$.fragment,f),s=!0)},o(f){d(t.$$.fragment,f),s=!1},d(f){f&&(p(e),p(l)),k(t,f),o=!1,u()}}}function Js(r,e,l){let{$$slots:t={},$$scope:n}=e,s=!1;const o=()=>l(0,s=!0);function u(a){s=a,l(0,s)}return r.$$set=a=>{"$$scope"in a&&l(4,n=a.$$scope)},[s,t,o,u,n]}class ue extends V{constructor(e){super(),Q(this,e,Js,Ys,J,{})}}const Vs=r=>({}),Pn=r=>({}),Qs=r=>({}),On=r=>({});function Zs(r){let e,l,t,n,s,o,u,a,i,f,c;const m=r[4].sidebar,_=ct(m,r,r[3],On),y=r[4].main,S=ct(y,r,r[3],Pn);return{c(){e=L("div"),l=L("aside"),t=L("div"),_&&_.c(),n=T(),s=L("button"),s.textContent="â†’",u=T(),a=L("main"),S&&S.c(),B(t,"class","sidebar-content content-container svelte-1n0etgd"),B(s,"type","button"),B(s,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),B(l,"class",o=wn(r[1]?"":"collapsed")+" svelte-1n0etgd"),pe(l,"--sidebarWidth",r[0]),B(a,"class","svelte-1n0etgd"),B(e,"class","overall-layout svelte-1n0etgd")},m(C,N){$(C,e,N),w(e,l),w(l,t),_&&_.m(t,null),w(l,n),w(l,s),w(e,u),w(e,a),S&&S.m(a,null),i=!0,f||(c=tt(s,"click",r[2]),f=!0)},p(C,[N]){_&&_.p&&(!i||N&8)&&$t(_,m,C,C[3],i?mt(m,C[3],N,Qs):pt(C[3]),On),(!i||N&2&&o!==(o=wn(C[1]?"":"collapsed")+" svelte-1n0etgd"))&&B(l,"class",o),(!i||N&1)&&pe(l,"--sidebarWidth",C[0]),S&&S.p&&(!i||N&8)&&$t(S,y,C,C[3],i?mt(y,C[3],N,Vs):pt(C[3]),Pn)},i(C){i||(g(_,C),g(S,C),i=!0)},o(C){d(_,C),d(S,C),i=!1},d(C){C&&p(e),_&&_.d(C),S&&S.d(C),f=!1,c()}}}function Ks(r,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:s="25rem"}=e,o=!0;function u(){l(1,o=!o)}return r.$$set=a=>{"sidebarWidth"in a&&l(0,s=a.sidebarWidth),"$$scope"in a&&l(3,n=a.$$scope)},[s,o,u,n,t]}class Xs extends V{constructor(e){super(),Q(this,e,Ks,Zs,J,{sidebarWidth:0})}}function In(r,e,l){const t=r.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Rn(r){let e,l,t,n=r[1]+"",s,o,u;return l=new Oe({props:{color:r[2]}}),{c(){e=L("li"),h(l.$$.fragment),t=T(),s=v(n),o=T()},m(a,i){$(a,e,i),b(l,e,null),w(e,t),w(e,s),w(e,o),u=!0},p(a,i){const f={};i&1&&(f.color=a[2]),l.$set(f),(!u||i&1)&&n!==(n=a[1]+"")&&z(s,n)},i(a){u||(g(l.$$.fragment,a),u=!0)},o(a){d(l.$$.fragment,a),u=!1},d(a){a&&p(e),k(l)}}}function xs(r){let e,l,t=Pe(r[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Rn(In(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){e=L("ul");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,u){$(o,e,u);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);l=!0},p(o,[u]){if(u&1){t=Pe(o[0]);let a;for(a=0;a<t.length;a+=1){const i=In(o,t,a);n[a]?(n[a].p(i,u),g(n[a],1)):(n[a]=Rn(i),n[a].c(),g(n[a],1),n[a].m(e,null))}for(ae(),a=t.length;a<n.length;a+=1)s(a);fe()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)g(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&p(e),rt(n,o)}}}function er(r,e,l){let{rows:t}=e;return r.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Zt extends V{constructor(e){super(),Q(this,e,er,xs,J,{rows:0})}}function Dn(r){let e=r[0],l,t,n=An(r);return{c(){n.c(),l=ve()},m(s,o){n.m(s,o),$(s,l,o),t=!0},p(s,o){o&1&&J(e,e=s[0])?(ae(),d(n,1,1,x),fe(),n=An(s),n.c(),g(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(g(n),t=!0)},o(s){d(n),t=!1},d(s){s&&p(l),n.d(s)}}}function An(r){let e;const l=r[16].default,t=ct(l,r,r[15],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&32768)&&$t(t,l,n,n[15],e?mt(l,n[15],s,null):pt(n[15]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function tr(r){let e,l,t=r[0]&&Dn(r);return{c(){t&&t.c(),e=ve()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&g(t,1)):(t=Dn(n),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ae(),d(t,1,1,()=>{t=null}),fe())},i(n){l||(g(t),l=!0)},o(n){d(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function nr(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=rn("raster-source")}=e,{tiles:a}=e,{tileSize:i=void 0}=e,{bounds:f=null}=e,{scheme:c=null}=e,{attribution:m=null}=e,{minzoom:_=null}=e,{maxzoom:y=null}=e,{volatile:S=null}=e;const{map:C,self:N}=is();Y(r,C,P=>l(14,n=P)),Y(r,N,P=>l(0,t=P));let A,R=!0;return as(()=>{t&&A&&n&&(fs(C,t,A),Ne(N,t=null,t),l(12,A=void 0))}),r.$$set=P=>{"id"in P&&l(3,u=P.id),"tiles"in P&&l(4,a=P.tiles),"tileSize"in P&&l(5,i=P.tileSize),"bounds"in P&&l(6,f=P.bounds),"scheme"in P&&l(7,c=P.scheme),"attribution"in P&&l(8,m=P.attribution),"minzoom"in P&&l(9,_=P.minzoom),"maxzoom"in P&&l(10,y=P.maxzoom),"volatile"in P&&l(11,S=P.volatile),"$$scope"in P&&l(15,o=P.$$scope)},r.$$.update=()=>{r.$$.dirty&24569&&n&&t!==u&&(Ne(N,t=u,t),us(n,t,cs({type:"raster",tiles:a,tileSize:i,bounds:f,scheme:c,attribution:m,minzoom:_,maxzoom:y,volatile:S}),P=>n&&P===t,()=>{t&&(l(12,A=n==null?void 0:n.getSource(t)),l(13,R=!0))})),r.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,A=n==null?void 0:n.getSource(u))})),r.$$.dirty&12304&&A&&(R?l(13,R=!1):A.setTiles(a))},[t,C,N,u,a,i,f,c,m,_,y,S,A,R,n,o,s]}class lr extends V{constructor(e){super(),Q(this,e,nr,tr,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function sr(r){let e;const l=r[16].default,t=ct(l,r,r[24],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16777216)&&$t(t,l,n,n[24],e?mt(l,n[24],s,null):pt(n[24]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function rr(r){let e,l,t;function n(o){r[17](o)}let s={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[sr]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.hovered=r[0]),e=new hs({props:s}),E.push(()=>U(e,"hovered",n)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(o,u){b(e,o,u),t=!0},p(o,[u]){const a={};u&2&&(a.id=o[1]),u&4&&(a.source=o[2]),u&8&&(a.sourceLayer=o[3]),u&16&&(a.beforeId=o[4]),u&32&&(a.beforeLayerType=o[5]),u&64&&(a.paint=o[6]),u&128&&(a.layout=o[7]),u&256&&(a.filter=o[8]),u&512&&(a.applyToClusters=o[9]),u&1024&&(a.minzoom=o[10]),u&2048&&(a.maxzoom=o[11]),u&4096&&(a.hoverCursor=o[12]),u&8192&&(a.manageHoverState=o[13]),u&16384&&(a.eventsIfTopMost=o[14]),u&32768&&(a.interactive=o[15]),u&16777216&&(a.$$scope={dirty:u,ctx:o}),!l&&u&1&&(l=!0,a.hovered=o[0],W(()=>l=!1)),e.$set(a)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function or(r,e,l){let{$$slots:t={},$$scope:n}=e,{id:s=rn("symbol")}=e,{source:o=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:a=void 0}=e,{beforeLayerType:i=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:m=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:N=!1}=e,{hovered:A=null}=e,{eventsIfTopMost:R=!1}=e,{interactive:P=!0}=e;function M(F){A=F,l(0,A)}function I(F){bt.call(this,r,F)}function D(F){bt.call(this,r,F)}function O(F){bt.call(this,r,F)}function j(F){bt.call(this,r,F)}function ne(F){bt.call(this,r,F)}function ie(F){bt.call(this,r,F)}return r.$$set=F=>{"id"in F&&l(1,s=F.id),"source"in F&&l(2,o=F.source),"sourceLayer"in F&&l(3,u=F.sourceLayer),"beforeId"in F&&l(4,a=F.beforeId),"beforeLayerType"in F&&l(5,i=F.beforeLayerType),"paint"in F&&l(6,f=F.paint),"layout"in F&&l(7,c=F.layout),"filter"in F&&l(8,m=F.filter),"applyToClusters"in F&&l(9,_=F.applyToClusters),"minzoom"in F&&l(10,y=F.minzoom),"maxzoom"in F&&l(11,S=F.maxzoom),"hoverCursor"in F&&l(12,C=F.hoverCursor),"manageHoverState"in F&&l(13,N=F.manageHoverState),"hovered"in F&&l(0,A=F.hovered),"eventsIfTopMost"in F&&l(14,R=F.eventsIfTopMost),"interactive"in F&&l(15,P=F.interactive),"$$scope"in F&&l(24,n=F.$$scope)},[A,s,o,u,a,i,f,c,m,_,y,S,C,N,R,P,t,M,I,D,O,j,ne,ie,n]}class fn extends V{constructor(e){super(),Q(this,e,or,rr,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function qn(r){let e=r[0],l,t,n=Fn(r);return{c(){n.c(),l=ve()},m(s,o){n.m(s,o),$(s,l,o),t=!0},p(s,o){o&1&&J(e,e=s[0])?(ae(),d(n,1,1,x),fe(),n=Fn(s),n.c(),g(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(g(n),t=!0)},o(s){d(n),t=!1},d(s){s&&p(l),n.d(s)}}}function Fn(r){let e;const l=r[15].default,t=ct(l,r,r[14],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16384)&&$t(t,l,n,n[14],e?mt(l,n[14],s,null):pt(n[14]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function ir(r){let e,l,t=r[0]&&qn(r);return{c(){t&&t.c(),e=ve()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&g(t,1)):(t=qn(n),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ae(),d(t,1,1,()=>{t=null}),fe())},i(n){l||(g(t),l=!0)},o(n){d(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function ar(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=rn("vector")}=e,{url:a=null}=e,{tiles:i=null}=e,{promoteId:f=null}=e,{bounds:c=null}=e,{scheme:m=null}=e,{attribution:_=null}=e,{minzoom:y=null}=e,{maxzoom:S=null}=e,{volatile:C=null}=e;if(a&&a.includes("pmtiles://")&&!vn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let P=new bs;vn.addProtocol("pmtiles",P.tile)}const{map:N,self:A}=is();Y(r,N,P=>l(13,n=P)),Y(r,A,P=>l(0,t=P));let R;return as(()=>{t&&n&&(fs(N,t,R),Ne(A,t=null,t),R=void 0)}),r.$$set=P=>{"id"in P&&l(3,u=P.id),"url"in P&&l(4,a=P.url),"tiles"in P&&l(5,i=P.tiles),"promoteId"in P&&l(6,f=P.promoteId),"bounds"in P&&l(7,c=P.bounds),"scheme"in P&&l(8,m=P.scheme),"attribution"in P&&l(9,_=P.attribution),"minzoom"in P&&l(10,y=P.minzoom),"maxzoom"in P&&l(11,S=P.maxzoom),"volatile"in P&&l(12,C=P.volatile),"$$scope"in P&&l(14,o=P.$$scope)},r.$$.update=()=>{r.$$.dirty&16377&&n&&t!==u&&(Ne(A,t=u,t),us(n,t,cs({type:"vector",url:a,tiles:i,promoteId:f,bounds:c,scheme:m,attribution:_,minzoom:y,maxzoom:S,volatile:C}),P=>n&&P===t,()=>{t&&(R=n==null?void 0:n.getSource(t))})),r.$$.dirty&8200&&(n==null||n.on("style.load",()=>{R=n==null?void 0:n.getSource(u)}))},[t,N,A,u,a,i,f,c,m,_,y,S,C,n,o,s]}class me extends V{constructor(e){super(),Q(this,e,ar,ir,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function zn(r,e,l){const t=r.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function fr(r){let e,l,t;return l=new nt({props:{$$slots:{default:[cr]},$$scope:{ctx:r}}}),l.$on("click",r[9]),{c(){e=L("div"),h(l.$$.fragment)},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&16384&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function ur(r){let e,l,t,n,s,o,u,a,i,f;l=new nt({props:{$$slots:{default:[$r]},$$scope:{ctx:r}}}),l.$on("click",r[4]);let c=r[2]&&jn(r);s=new Ge({props:{label:"Help",$$slots:{default:[pr]},$$scope:{ctx:r}}}),u=new ks({}),u.$on("click",r[3]);let m=Pe(r[0]),_=[];for(let S=0;S<m.length;S+=1)_[S]=Hn(zn(r,m,S));const y=S=>d(_[S],1,1,()=>{_[S]=null});return{c(){e=L("div"),h(l.$$.fragment),t=T(),c&&c.c(),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T();for(let S=0;S<_.length;S+=1)_[S].c();i=ve()},m(S,C){$(S,e,C),b(l,e,null),$(S,t,C),c&&c.m(S,C),$(S,n,C),b(s,S,C),$(S,o,C),b(u,S,C),$(S,a,C);for(let N=0;N<_.length;N+=1)_[N]&&_[N].m(S,C);$(S,i,C),f=!0},p(S,C){const N={};C&16384&&(N.$$scope={dirty:C,ctx:S}),l.$set(N),S[2]?c?c.p(S,C):(c=jn(S),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const A={};if(C&16384&&(A.$$scope={dirty:C,ctx:S}),s.$set(A),C&65){m=Pe(S[0]);let R;for(R=0;R<m.length;R+=1){const P=zn(S,m,R);_[R]?(_[R].p(P,C),g(_[R],1)):(_[R]=Hn(P),_[R].c(),g(_[R],1),_[R].m(i.parentNode,i))}for(ae(),R=m.length;R<_.length;R+=1)y(R);fe()}},i(S){if(!f){g(l.$$.fragment,S),g(s.$$.fragment,S),g(u.$$.fragment,S);for(let C=0;C<m.length;C+=1)g(_[C]);f=!0}},o(S){d(l.$$.fragment,S),d(s.$$.fragment,S),d(u.$$.fragment,S),_=_.filter(Boolean);for(let C=0;C<_.length;C+=1)d(_[C]);f=!1},d(S){S&&(p(e),p(t),p(n),p(o),p(a),p(i)),k(l),c&&c.d(S),k(s,S),k(u,S),rt(_,S)}}}function cr(r){let e;return{c(){e=v("Measure lines")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $r(r){let e;return{c(){e=v("Stop measuring")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function jn(r){let e,l,t=r[2].toFixed(2)+"",n,s;return{c(){e=L("p"),l=v("Length: "),n=v(t),s=v(" meters")},m(o,u){$(o,e,u),w(e,l),w(e,n),w(e,s)},p(o,u){u&4&&t!==(t=o[2].toFixed(2)+"")&&z(n,t)},d(o){o&&p(e)}}}function pr(r){let e;return{c(){e=L("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){$(l,e,t)},p:x,d(l){l&&p(e)}}}function mr(r){let e,l;return{c(){e=L("span"),l=T(),B(e,"class","dot svelte-1tzt432")},m(t,n){$(t,e,n),$(t,l,n)},p:x,d(t){t&&(p(e),p(l))}}}function Hn(r){let e,l,t;function n(u){r[7](u,r[11],r[12],r[13])}function s(){return r[8](r[13])}let o={draggable:!0,$$slots:{default:[mr]},$$scope:{ctx:r}};return r[11]!==void 0&&(o.lngLat=r[11]),e=new Is({props:o}),E.push(()=>U(e,"lngLat",n)),e.$on("click",s),{c(){h(e.$$.fragment)},m(u,a){b(e,u,a),t=!0},p(u,a){r=u;const i={};a&16384&&(i.$$scope={dirty:a,ctx:r}),!l&&a&1&&(l=!0,i.lngLat=r[11],W(()=>l=!1)),e.$set(i)},i(u){t||(g(e.$$.fragment,u),t=!0)},o(u){d(e.$$.fragment,u),t=!1},d(u){k(e,u)}}}function _r(r){let e,l;const t=[H("measurement-line"),{paint:{"line-color":Ke.measuringLine,"line-width":5}}];let n={};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ge({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u={};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function gr(r){let e,l,t,n,s,o,u;const a=[ur,fr],i=[];function f(c,m){return c[1]?0:1}return e=f(r),l=i[e]=a[e](r),n=new dt({props:{data:r[0].length<2?Sn():xt(r[0]),$$slots:{default:[_r]},$$scope:{ctx:r}}}),{c(){l.c(),t=T(),h(n.$$.fragment)},m(c,m){i[e].m(c,m),$(c,t,m),b(n,c,m),s=!0,o||(u=tt(window,"keydown",r[5]),o=!0)},p(c,[m]){let _=e;e=f(c),e===_?i[e].p(c,m):(ae(),d(i[_],1,1,()=>{i[_]=null}),fe(),l=i[e],l?l.p(c,m):(l=i[e]=a[e](c),l.c()),g(l,1),l.m(t.parentNode,t));const y={};m&1&&(y.data=c[0].length<2?Sn():xt(c[0])),m&16384&&(y.$$scope={dirty:m,ctx:c}),n.$set(y)},i(c){s||(g(l),g(n.$$.fragment,c),s=!0)},o(c){d(l),d(n.$$.fragment,c),s=!1},d(c){c&&p(t),i[e].d(c),k(n,c),o=!1,u()}}}function dr(r,e,l){let t,n=!1,s=[];function o(y){return y.length<2?null:1e3*Os(xt(y),{units:"kilometers"})}function u(y){l(0,s=[...s,y.detail.lngLat.toArray()])}function a(){l(1,n=!1),l(0,s=[])}function i(y){n&&y.key==="Escape"&&(y.stopPropagation(),a())}function f(y){s.splice(y,1),l(0,s)}function c(y,S,C,N){C[N]=y,l(0,s)}const m=y=>f(y),_=()=>l(1,n=!0);return r.$$.update=()=>{r.$$.dirty&1&&l(2,t=o(s))},[s,n,t,u,a,i,f,c,m,_]}class hr extends V{constructor(e){super(),Q(this,e,dr,gr,J,{})}}function br(r){let e=new Map;for(let[t,n]of Object.entries(r.schemes))e.set(t,n);r.features=r.features.filter(t=>kr(t));let l=1;for(let t of r.features){let n=e.get(t.properties.scheme_reference);n.browse&&(t.properties.funding_programme=n.browse.funding_programme,t.properties.current_milestone=n.browse.current_milestone,t.id=l++)}return e}function kr(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}const tn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"],Z={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},ze=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function nn(){let[r,e]=ms(tn,Z.funding_programmes);return[Xe(["get","funding_programme"],r,"grey"),e]}function wr(){let r=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,l]=ms(r,Z.current_milestone);return[Xe(["get","current_milestone"],e,"grey"),l]}function ms(r,e){let l=[],t={},n=0;for(let s of r){let o=e[n++%e.length];t[s]=o,l.push([s,o])}return[t,l]}function vr(r){let e;return{c(){e=v(`Open Government License
  `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function yr(r){let e,l,t,n,s;return t=new K({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[vr]},$$scope:{ctx:r}}}),{c(){e=L("p"),l=v("License: "),h(t.$$.fragment),n=v(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(o,u){$(o,e,u),w(e,l),b(t,e,null),w(e,n),s=!0},p(o,[u]){const a={};u&1&&(a.$$scope={dirty:u,ctx:o}),t.$set(a)},i(o){s||(g(t.$$.fragment,o),s=!0)},o(o){d(t.$$.fragment,o),s=!1},d(o){o&&p(e),k(t)}}}class Ie extends V{constructor(e){super(),Q(this,e,null,yr,J,{})}}function Bn(r,e,l){const t=r.slice();return t[2]=e[l],t}function Gn(r,e,l){const t=r.slice();return t[5]=e[l],t}function En(r){let e,l;return{c(){e=L("span"),l=v(`Â 
    `),pe(e,"background",r[5]),pe(e,"width","100%"),pe(e,"border","1px solid black")},m(t,n){$(t,e,n),w(e,l)},p(t,n){n&1&&pe(e,"background",t[5])},d(t){t&&p(e)}}}function Un(r){let e,l=r[2]+"",t;return{c(){e=L("span"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&2&&l!==(l=n[2]+"")&&z(t,l)},d(n){n&&p(e)}}}function Sr(r){let e,l,t,n=Pe(r[0]),s=[];for(let a=0;a<n.length;a+=1)s[a]=En(Gn(r,n,a));let o=Pe(r[1]),u=[];for(let a=0;a<o.length;a+=1)u[a]=Un(Bn(r,o,a));return{c(){e=L("div");for(let a=0;a<s.length;a+=1)s[a].c();l=T(),t=L("div");for(let a=0;a<u.length;a+=1)u[a].c();pe(e,"display","flex"),pe(t,"display","flex"),pe(t,"justify-content","space-between")},m(a,i){$(a,e,i);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null);$(a,l,i),$(a,t,i);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(a,[i]){if(i&1){n=Pe(a[0]);let f;for(f=0;f<n.length;f+=1){const c=Gn(a,n,f);s[f]?s[f].p(c,i):(s[f]=En(c),s[f].c(),s[f].m(e,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=n.length}if(i&2){o=Pe(a[1]);let f;for(f=0;f<o.length;f+=1){const c=Bn(a,o,f);u[f]?u[f].p(c,i):(u[f]=Un(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}},i:x,o:x,d(a){a&&(p(e),p(l),p(t)),rt(s,a),rt(u,a)}}}function Cr(r,e,l){let{colorScale:t}=e,{limits:n}=e;return r.$$set=s=>{"colorScale"in s&&l(0,t=s.colorScale),"limits"in s&&l(1,n=s.limits)},[t,n]}class He extends V{constructor(e){super(),Q(this,e,Cr,Sr,J,{colorScale:0,limits:1})}}function he(r){let e=new URLSearchParams(window.location.search).has(r),l=it(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(r,"1"):n.searchParams.delete(r),window.history.replaceState(null,"",n.toString())}),l}function ht(r,e,l,t){let n=e,s=new URLSearchParams(window.location.search).get(r);if(s!=null)try{n=t(s)}catch(u){console.warn(`Parsing URL parameter ${r}=${s} failed, using default value: ${u}`)}let o=it(n);return o.subscribe(u=>{let a=new URL(window.location.href),i=l(u);i==null?a.searchParams.delete(r):a.searchParams.set(r,i),window.history.replaceState(null,"",a.toString())}),o}function Wn(r){const e=r[14].OA21CD;r[15]=e;const l=r[14][r[3].kind];r[16]=l}function Lr(r){let e;return{c(){e=v("Percent of households with a car")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Tr(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Mr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Nr(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Pr(r){let e,l,t,n,s,o,u,a,i,f,c,m;return t=new K({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Tr]},$$scope:{ctx:r}}}),s=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Mr]},$$scope:{ctx:r}}}),f=new K({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Nr]},$$scope:{ctx:r}}}),{c(){e=L("p"),l=v("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),n=v(". Output area boundaries from "),h(s.$$.fragment),o=v("."),u=T(),a=L("p"),i=v("License: "),h(f.$$.fragment),c=v(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(_,y){$(_,e,y),w(e,l),b(t,e,null),w(e,n),b(s,e,null),w(e,o),$(_,u,y),$(_,a,y),w(a,i),b(f,a,null),w(a,c),m=!0},p(_,y){const S={};y&131072&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const C={};y&131072&&(C.$$scope={dirty:y,ctx:_}),s.$set(C);const N={};y&131072&&(N.$$scope={dirty:y,ctx:_}),f.$set(N)},i(_){m||(g(t.$$.fragment,_),g(s.$$.fragment,_),g(f.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(s.$$.fragment,_),d(f.$$.fragment,_),m=!1},d(_){_&&(p(e),p(u),p(a)),k(t),k(s),k(f)}}}function Or(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Pr]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Yn(r){let e,l;return e=new He({props:{colorScale:r[4],limits:ot(r[3].kind)}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=ot(t[3].kind)),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ir(r){let e;return{c(){e=v("Average cars per household")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Rr(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Dr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ar(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function qr(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y;return s=new K({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Rr]},$$scope:{ctx:r}}}),u=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Dr]},$$scope:{ctx:r}}}),m=new K({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ar]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=T(),t=L("p"),n=v("Car/van availability data is from the 2021 census, via "),h(s.$$.fragment),o=v(". Output area boundaries from "),h(u.$$.fragment),a=v("."),i=T(),f=L("p"),c=v("License: "),h(m.$$.fragment),_=v(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(S,C){$(S,e,C),$(S,l,C),$(S,t,C),w(t,n),b(s,t,null),w(t,o),b(u,t,null),w(t,a),$(S,i,C),$(S,f,C),w(f,c),b(m,f,null),w(f,_),y=!0},p(S,C){const N={};C&131072&&(N.$$scope={dirty:C,ctx:S}),s.$set(N);const A={};C&131072&&(A.$$scope={dirty:C,ctx:S}),u.$set(A);const R={};C&131072&&(R.$$scope={dirty:C,ctx:S}),m.$set(R)},i(S){y||(g(s.$$.fragment,S),g(u.$$.fragment,S),g(m.$$.fragment,S),y=!0)},o(S){d(s.$$.fragment,S),d(u.$$.fragment,S),d(m.$$.fragment,S),y=!1},d(S){S&&(p(e),p(l),p(t),p(i),p(f)),k(s),k(u),k(m)}}}function Fr(r){let e,l,t;return l=new ue({props:{$$slots:{default:[qr]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Jn(r){let e,l;return e=new He({props:{colorScale:r[4],limits:ot(r[3].kind)}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=ot(t[3].kind)),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function zr(r){let e;return{c(){e=v("Population density")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function jr(r){let e;return{c(){e=v(`NOMIS TS006
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Hr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Br(r){let e,l,t,n,s,o,u,a,i;return t=new K({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[jr]},$$scope:{ctx:r}}}),s=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Hr]},$$scope:{ctx:r}}}),a=new Ie({}),{c(){e=L("p"),l=v("Population density data is from the 2021 census, via "),h(t.$$.fragment),n=v(". Output area boundaries from "),h(s.$$.fragment),o=v("."),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,l),b(t,e,null),w(e,n),b(s,e,null),w(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&131072&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const _={};c&131072&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){i||(g(t.$$.fragment,f),g(s.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),k(t),k(s),k(a,f)}}}function Gr(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Br]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Vn(r){let e,l,t,n;return t=new He({props:{colorScale:r[4],limits:ot(r[3].kind).map(Qn)}}),{c(){e=L("p"),e.textContent="(people per square kilometres)",l=T(),h(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&8&&(u.limits=ot(s[3].kind).map(Qn)),t.$set(u)},i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),k(t,s)}}}function Er(r){let e,l,t,n=r[16].toLocaleString()+"",s,o,u=r[15]+"",a;return{c(){e=L("p"),l=v("There are "),t=L("b"),s=v(n),o=v(`
          people per square kilometre in `),a=v(u)},m(i,f){$(i,e,f),w(e,l),w(e,t),w(t,s),w(e,o),w(e,a)},p(i,f){f&16392&&n!==(n=i[16].toLocaleString()+"")&&z(s,n),f&16384&&u!==(u=i[15]+"")&&z(a,u)},d(i){i&&p(e)}}}function Ur(r){let e,l,t=r[15]+"",n,s,o,u=r[16]+"",a,i;return{c(){e=L("p"),l=v("Households in "),n=v(t),s=v(` have an average of
          `),o=L("b"),a=v(u),i=v(`
          cars`)},m(f,c){$(f,e,c),w(e,l),w(e,n),w(e,s),w(e,o),w(o,a),w(e,i)},p(f,c){c&16384&&t!==(t=f[15]+"")&&z(n,t),c&16392&&u!==(u=f[16]+"")&&z(a,u)},d(f){f&&p(e)}}}function Wr(r){let e,l,t=r[16]+"",n,s,o,u=r[15]+"",a,i;return{c(){e=L("p"),l=L("b"),n=v(t),s=v("%"),o=v(`
          of households in `),a=v(u),i=v(" have 1 or more cars")},m(f,c){$(f,e,c),w(e,l),w(l,n),w(l,s),w(e,o),w(e,a),w(e,i)},p(f,c){c&16392&&t!==(t=f[16]+"")&&z(n,t),c&16384&&u!==(u=f[15]+"")&&z(a,u)},d(f){f&&p(e)}}}function Yr(r){Wn(r);let e;function l(s,o){return s[3].kind=="percent_households_with_car"?Wr:s[3].kind=="average_cars_per_household"?Ur:Er}let t=l(r),n=t(r);return{c(){n.c(),e=ve()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){Wn(s),t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function Jr(r){let e,l;return e=new oe({props:{$$slots:{default:[Yr,({props:t})=>({14:t}),({props:t})=>t?16384:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&147464&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Vr(r){let e,l,t,n;const s=[H(Ue),{sourceLayer:Ue},{paint:{"fill-color":de(["get",r[3].kind],ot(r[3].kind),r[4]),"fill-opacity":X(.5,.7)}},{layout:{visibility:r[3].kind!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Jr]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new je({props:o}),e.$on("click",r[6]);const u=[H(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3].kind!=""?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ge({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&24?te(s,[f&0&&re(H(Ue)),f&0&&{sourceLayer:Ue},f&24&&{paint:{"fill-color":de(["get",i[3].kind],ot(i[3].kind),i[4]),"fill-opacity":X(.5,.7)}},f&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}},s[4],s[5],s[6]]):{};f&131080&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&8?te(u,[f&0&&re(H(`${Ue}-outline`)),f&0&&{sourceLayer:Ue},u[2],f&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function Qr(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y;function S(O){r[7](O)}let C={$$slots:{right:[Or],default:[Lr]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new le({props:C}),E.push(()=>U(e,"checked",S)),e.$on("change",r[8]);let N=r[3].kind=="percent_households_with_car"&&Yn(r);function A(O){r[9](O)}let R={$$slots:{right:[Fr],default:[Ir]},$$scope:{ctx:r}};r[1]!==void 0&&(R.checked=r[1]),s=new le({props:R}),E.push(()=>U(s,"checked",A)),s.$on("change",r[10]);let P=r[3].kind=="average_cars_per_household"&&Jn(r);function M(O){r[11](O)}let I={$$slots:{right:[Gr],default:[zr]},$$scope:{ctx:r}};r[2]!==void 0&&(I.checked=r[2]),i=new le({props:I}),E.push(()=>U(i,"checked",M)),i.$on("change",r[12]);let D=r[3].kind=="population_density"&&Vn(r);return _=new me({props:{url:`pmtiles://${$e()}/v1/${Ue}.pmtiles`,$$slots:{default:[Vr]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),N&&N.c(),n=T(),h(s.$$.fragment),u=T(),P&&P.c(),a=T(),h(i.$$.fragment),c=T(),D&&D.c(),m=T(),h(_.$$.fragment)},m(O,j){b(e,O,j),$(O,t,j),N&&N.m(O,j),$(O,n,j),b(s,O,j),$(O,u,j),P&&P.m(O,j),$(O,a,j),b(i,O,j),$(O,c,j),D&&D.m(O,j),$(O,m,j),b(_,O,j),y=!0},p(O,[j]){const ne={};j&131072&&(ne.$$scope={dirty:j,ctx:O}),!l&&j&1&&(l=!0,ne.checked=O[0],W(()=>l=!1)),e.$set(ne),O[3].kind=="percent_households_with_car"?N?(N.p(O,j),j&8&&g(N,1)):(N=Yn(O),N.c(),g(N,1),N.m(n.parentNode,n)):N&&(ae(),d(N,1,1,()=>{N=null}),fe());const ie={};j&131072&&(ie.$$scope={dirty:j,ctx:O}),!o&&j&2&&(o=!0,ie.checked=O[1],W(()=>o=!1)),s.$set(ie),O[3].kind=="average_cars_per_household"?P?(P.p(O,j),j&8&&g(P,1)):(P=Jn(O),P.c(),g(P,1),P.m(a.parentNode,a)):P&&(ae(),d(P,1,1,()=>{P=null}),fe());const F={};j&131072&&(F.$$scope={dirty:j,ctx:O}),!f&&j&4&&(f=!0,F.checked=O[2],W(()=>f=!1)),i.$set(F),O[3].kind=="population_density"?D?(D.p(O,j),j&8&&g(D,1)):(D=Vn(O),D.c(),g(D,1),D.m(m.parentNode,m)):D&&(ae(),d(D,1,1,()=>{D=null}),fe());const q={};j&131080&&(q.$$scope={dirty:j,ctx:O}),_.$set(q)},i(O){y||(g(e.$$.fragment,O),g(N),g(s.$$.fragment,O),g(P),g(i.$$.fragment,O),g(D),g(_.$$.fragment,O),y=!0)},o(O){d(e.$$.fragment,O),d(N),d(s.$$.fragment,O),d(P),d(i.$$.fragment,O),d(D),d(_.$$.fragment,O),y=!1},d(O){O&&(p(t),p(n),p(u),p(a),p(c),p(m)),k(e,O),N&&N.d(O),k(s,O),P&&P.d(O),k(i,O),D&&D.d(O),k(_,O)}}}let Ue="census_output_areas";function Zr(r){return r.show?r.kind:null}function Kr(r){return{show:!0,kind:r}}function ot(r){return r=="percent_households_with_car"?[0,20,40,60,80,100]:r=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const Qn=r=>r.toLocaleString();function Xr(r,e,l){let t,n=Z.sequential_low_to_high,o=ht(Ue,{show:!1,kind:""},Zr,Kr);Y(r,o,N=>l(3,t=N));let u=t.kind=="percent_households_with_car",a=t.kind=="average_cars_per_household",i=t.kind=="population_density";function f(N){let A=N.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${A}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${A}`,"_blank")}function c(N){u=N,l(0,u)}const m=()=>{l(1,a=!1),l(2,i=!1)};function _(N){a=N,l(1,a)}const y=()=>{l(0,u=!1),l(2,i=!1)};function S(N){i=N,l(2,i)}const C=()=>{l(0,u=!1),l(1,a=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(u?(Ne(o,t.show=!0,t),Ne(o,t.kind="percent_households_with_car",t)):a?(Ne(o,t.show=!0,t),Ne(o,t.kind="average_cars_per_household",t)):i?(Ne(o,t.show=!0,t),Ne(o,t.kind="population_density",t)):(Ne(o,t.show=!1,t),Ne(o,t.kind="",t)))},[u,a,i,t,n,o,f,c,m,_,y,S,C]}class xr extends V{constructor(e){super(),Q(this,e,Xr,Qr,J,{})}}function eo(r){let e,l,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Combined authorities`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function to(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function no(r){let e,l,t,n,s,o,u;return t=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[to]},$$scope:{ctx:r}}}),o=new Ie({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of December 2022."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function lo(r){let e,l,t;return l=new ue({props:{$$slots:{default:[no]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function so(r){let e,l=r[4].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&z(t,l)},d(n){n&&p(e)}}}function ro(r){let e,l;return e=new oe({props:{$$slots:{default:[so,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function oo(r){let e,l,t,n;const s=[H(kt),{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[ro]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new je({props:o}),e.$on("click",ao);const u=[H(`${kt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ge({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&re(H(kt)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[3],s[4],s[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&re(H(`${kt}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function io(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[lo],default:[eo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new dt({props:{data:`${$e()}/v1/${kt}.geojson`,$$slots:{default:[oo]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let kt="combined_authorities";function ao(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function fo(r,e,l){let t,n=Z.combined_authorities,s=he(kt);Y(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class uo extends V{constructor(e){super(),Q(this,e,fo,io,J,{})}}function co(r){let e;return{c(){e=v("Indices of Multiple Deprivation")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $o(r){let e;return{c(){e=v(`DLUCH GIS
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function po(r){let e;return{c(){e=v(`here
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function mo(r){let e,l,t,n,s,o,u,a,i;return t=new K({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[$o]},$$scope:{ctx:r}}}),s=new K({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[po]},$$scope:{ctx:r}}}),a=new Ie({}),{c(){e=L("p"),l=v("The 2019 English IMD scores come from "),h(t.$$.fragment),n=v(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(s.$$.fragment),o=v("."),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,l),b(t,e,null),w(e,n),b(s,e,null),w(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){i||(g(t.$$.fragment,f),g(s.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),k(t),k(s),k(a,f)}}}function _o(r){let e,l,t;return l=new ue({props:{$$slots:{default:[mo]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Zn(r){let e,l;return e=new He({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function go(r){let e,l=r[5].LSOA11CD+"",t,n,s,o=r[5].score+"",u,a,i,f,c,m=r[5].rank.toLocaleString()+"",_,y;return{c(){e=L("p"),t=v(l),n=v(` has an IMD score of
        `),s=L("b"),u=v(o),a=T(),i=L("p"),f=v("Rank: "),c=L("b"),_=v(m),y=v(`
        / 32,844 LSOAs`)},m(S,C){$(S,e,C),w(e,t),w(e,n),w(e,s),w(s,u),$(S,a,C),$(S,i,C),w(i,f),w(i,c),w(c,_),w(i,y)},p(S,C){C&32&&l!==(l=S[5].LSOA11CD+"")&&z(t,l),C&32&&o!==(o=S[5].score+"")&&z(u,o),C&32&&m!==(m=S[5].rank.toLocaleString()+"")&&z(_,m)},d(S){S&&(p(e),p(a),p(i))}}}function ho(r){let e,l;return e=new oe({props:{$$slots:{default:[go,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function bo(r){let e,l,t,n;const s=[H(We),{sourceLayer:We},{paint:{"fill-color":de(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":X(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[ho]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new je({props:o});const u=[H(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ge({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&7?te(s,[f&0&&re(H(We)),f&0&&{sourceLayer:We},f&6&&{paint:{"fill-color":de(["-",10,["get","decile"]],i[2],i[1]),"fill-opacity":X(.5,.7)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5]]):{};f&64&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&1?te(u,[f&0&&re(H(`${We}-outline`)),f&0&&{sourceLayer:We},u[2],f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function ko(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[_o],default:[co]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&Zn(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${We}.pmtiles`,$$slots:{default:[bo]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=Zn(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let We="imd";function wo(r,e,l){let t,n=Z.sequential_low_to_high,s=[0,2,4,6,8,10],o=he(We);Y(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class vo extends V{constructor(e){super(),Q(this,e,wo,ko,J,{})}}function yo(r){let e,l,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Local Authority Districts`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function So(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Co(r){let e,l,t,n,s,o,u;return t=new K({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[So]},$$scope:{ctx:r}}}),o=new Ie({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of January 2024."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function Lo(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Co]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function To(r){let e,l=r[4].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&z(t,l)},d(n){n&&p(e)}}}function Mo(r){let e,l;return e=new oe({props:{$$slots:{default:[To,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function No(r){let e,l,t,n;const s=[H(wt),{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Mo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new je({props:o}),e.$on("click",Oo);const u=[H(`${wt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ge({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&re(H(wt)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[3],s[4],s[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&re(H(`${wt}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function Po(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Lo],default:[yo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new dt({props:{data:`${$e()}/v1/${wt}.geojson`,$$slots:{default:[No]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let wt="local_authority_districts";function Oo(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Io(r,e,l){let t,n=Z.local_authority_districts,s=he(wt);Y(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Ro extends V{constructor(e){super(),Q(this,e,Io,Po,J,{})}}function Do(r){let e,l,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Local Planning Authorities`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Ao(r){let e;return{c(){e=v(`local authority
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function qo(r){let e;return{c(){e=v(`national park authorit
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Fo(r){let e;return{c(){e=v(`development corporation
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function zo(r){let e;return{c(){e=v("this map")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function jo(r){let e;return{c(){e=v(`planning.data.gov.uk
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ho(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y,S,C,N,A,R,P,M,I;return t=new K({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ao]},$$scope:{ctx:r}}}),s=new K({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[qo]},$$scope:{ctx:r}}}),u=new K({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Fo]},$$scope:{ctx:r}}}),_=new K({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[zo]},$$scope:{ctx:r}}}),A=new K({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[jo]},$$scope:{ctx:r}}}),M=new Ie({}),{c(){e=L("p"),l=v("LPAs may be a "),h(t.$$.fragment),n=v(", "),h(s.$$.fragment),o=v("y, or "),h(u.$$.fragment),a=v("."),i=T(),f=L("p"),c=L("strong"),m=v(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(_.$$.fragment),y=v(" to get more details."),S=T(),C=L("p"),N=v("Data from ONS Geography via "),h(A.$$.fragment),R=v(", as of November 2022."),P=T(),h(M.$$.fragment)},m(D,O){$(D,e,O),w(e,l),b(t,e,null),w(e,n),b(s,e,null),w(e,o),b(u,e,null),w(e,a),$(D,i,O),$(D,f,O),w(f,c),w(c,m),b(_,c,null),w(c,y),$(D,S,O),$(D,C,O),w(C,N),b(A,C,null),w(C,R),$(D,P,O),b(M,D,O),I=!0},p(D,O){const j={};O&32&&(j.$$scope={dirty:O,ctx:D}),t.$set(j);const ne={};O&32&&(ne.$$scope={dirty:O,ctx:D}),s.$set(ne);const ie={};O&32&&(ie.$$scope={dirty:O,ctx:D}),u.$set(ie);const F={};O&32&&(F.$$scope={dirty:O,ctx:D}),_.$set(F);const q={};O&32&&(q.$$scope={dirty:O,ctx:D}),A.$set(q)},i(D){I||(g(t.$$.fragment,D),g(s.$$.fragment,D),g(u.$$.fragment,D),g(_.$$.fragment,D),g(A.$$.fragment,D),g(M.$$.fragment,D),I=!0)},o(D){d(t.$$.fragment,D),d(s.$$.fragment,D),d(u.$$.fragment,D),d(_.$$.fragment,D),d(A.$$.fragment,D),d(M.$$.fragment,D),I=!1},d(D){D&&(p(e),p(i),p(f),p(S),p(C),p(P)),k(t),k(s),k(u),k(_),k(A),k(M,D)}}}function Bo(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Ho]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Go(r){let e,l=r[4].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&z(t,l)},d(n){n&&p(e)}}}function Eo(r){let e,l;return e=new oe({props:{$$slots:{default:[Go,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Uo(r){let e,l,t,n;const s=[H(Ye),{sourceLayer:Ye},{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[Eo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new je({props:o});const u=[H(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ge({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&re(H(Ye)),f&0&&{sourceLayer:Ye},f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&re(H(`${Ye}-outline`)),f&0&&{sourceLayer:Ye},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function Wo(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Bo],default:[Do]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${Ye}.pmtiles`,$$slots:{default:[Uo]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Ye="local_planning_authorities";function Yo(r,e,l){let t,n=Z.local_planning_authorities,s=he(Ye);Y(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Jo extends V{constructor(e){super(),Q(this,e,Yo,Wo,J,{})}}function Vo(r){let e,l,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Parliamentary constituencies`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Qo(r){let e;return{c(){e=v(`Ordnance Survey Boundary-Line
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Zo(r){let e,l,t,n,s,o,u;return t=new K({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Qo]},$$scope:{ctx:r}}}),o=new Ie({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of May 2023."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function Ko(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Zo]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Xo(r){let e,l=r[4].Name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=n[4].Name+"")&&z(t,l)},d(n){n&&p(e)}}}function xo(r){let e,l;return e=new oe({props:{$$slots:{default:[Xo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ei(r){let e,l,t,n;const s=[H(Je),{sourceLayer:Je},{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[xo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new je({props:o}),e.$on("click",ni);const u=[H(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ge({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&re(H(Je)),f&0&&{sourceLayer:Je},f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5],s[6]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&re(H(`${Je}-outline`)),f&0&&{sourceLayer:Je},f&2&&{paint:{"line-color":i[1],"line-width":5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function ti(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Ko],default:[Vo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${Je}.pmtiles`,$$slots:{default:[ei]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Je="parliamentary_constituencies";function ni(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function li(r,e,l){let t,n=Z.parliamentary_constituencies,s=he(Je);Y(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class si extends V{constructor(e){super(),Q(this,e,li,ti,J,{})}}function ri(r){let e;return{c(){e=v("Pollution")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function oi(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ii(r){let e,l,t,n,s,o,u,a,i;return t=new K({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[oi]},$$scope:{ctx:r}}}),a=new Ie({}),{c(){e=L("p"),l=v("Most layers show air quality data from "),h(t.$$.fragment),n=v(`. The measurements are annual means, in units of
        Âµgm
        `),s=L("sup"),s.textContent="3",o=v(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,l),b(t,e,null),w(e,n),w(e,s),w(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&4096&&(m.$$scope={dirty:c,ctx:f}),t.$set(m)},i(f){i||(g(t.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),k(t),k(a,f)}}}function ai(r){let e,l,t;return l=new ue({props:{$$slots:{default:[ii]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&4096&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Kn(r){let e,l,t,n,s=r[3](r[0].pollutant)+"",o,u,a,i,f,c,m,_,y,S,C,N,A;function R(M){r[6](M)}let P={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return r[0].pollutant!==void 0&&(P.value=r[0].pollutant),e=new ft({props:P}),E.push(()=>U(e,"value",R)),{c(){h(e.$$.fragment),t=T(),n=L("p"),o=v(s),u=T(),a=L("div"),i=L("label"),f=v(`Opacity
      `),c=L("input"),m=T(),_=L("img"),B(c,"type","range"),B(c,"min","0"),B(c,"max","100"),Wt(_.src,y=r[4](r[0].pollutant))||B(_,"src",y),B(_,"width",150),B(_,"alt",S=`Legend for ${r[0].pollutant} layer`)},m(M,I){b(e,M,I),$(M,t,I),$(M,n,I),w(n,o),$(M,u,I),$(M,a,I),w(a,i),w(i,f),w(i,c),Ze(c,r[0].opacity),$(M,m,I),$(M,_,I),C=!0,N||(A=[tt(c,"change",r[7]),tt(c,"input",r[7])],N=!0)},p(M,I){const D={};!l&&I&1&&(l=!0,D.value=M[0].pollutant,W(()=>l=!1)),e.$set(D),(!C||I&1)&&s!==(s=M[3](M[0].pollutant)+"")&&z(o,s),I&1&&Ze(c,M[0].opacity),(!C||I&1&&!Wt(_.src,y=M[4](M[0].pollutant)))&&B(_,"src",y),(!C||I&1&&S!==(S=`Legend for ${M[0].pollutant} layer`))&&B(_,"alt",S)},i(M){C||(g(e.$$.fragment,M),C=!0)},o(M){d(e.$$.fragment,M),C=!1},d(M){M&&(p(t),p(n),p(u),p(a),p(m),p(_)),k(e,M),N=!1,$s(A)}}}function fi(r){let e,l;const t=[H("pollution"),{paint:{"raster-opacity":r[0].opacity/100}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new Rs({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[t[0],{paint:{"raster-opacity":s[0].opacity/100}},{layout:{visibility:s[0].show?"visible":"none"}}]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function ui(r){let e,l,t,n,s,o;function u(f){r[5](f)}let a={$$slots:{right:[ai],default:[ri]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0].show&&Kn(r);return s=new lr({props:{tiles:[r[1]],tileSize:256,$$slots:{default:[fi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&4096&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&g(i,1)):(i=Kn(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&2&&(_.tiles=[f[1]]),c&4097&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}function ci(r){return r.show?`${r.pollutant}/${r.opacity}`:null}function $i(r){let[e,l]=r.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function pi(r,e,l){let t,n,s,u=ht("pollution",{show:!1,pollutant:"PM25_viridis",opacity:50},ci,$i);Y(r,u,S=>l(0,s=S));function a(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s.pollutant}/MapServer/WMSServer`}function i(S){return t[1]}function f(S){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${a()}?bbox={bbox-epsg-3857}&${C}`}function c(S){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${a()}?${C}`}function m(S){r.$$.not_equal(s.show,S)&&(s.show=S,u.set(s))}function _(S){r.$$.not_equal(s.pollutant,S)&&(s.pollutant=S,u.set(s))}function y(){s.opacity=Gt(this.value),u.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s.pollutant]),r.$$.dirty&1&&l(1,n=f(s.pollutant))},[s,n,u,i,c,m,_,y]}class mi extends V{constructor(e){super(),Q(this,e,pi,ui,J,{})}}function _i(r){let e;return{c(){e=v("Road noise")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function gi(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function di(r){let e,l,t,n,s,o,u,a,i;return s=new K({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[gi]},$$scope:{ctx:r}}}),a=new Ie({}),{c(){e=L("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,l=T(),t=L("p"),n=v("Data from June 2019, produced by "),h(s.$$.fragment),o=v(". See there for methodology details"),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),$(f,l,c),$(f,t,c),w(t,n),b(s,t,null),w(t,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){i||(g(s.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(t),p(u)),k(s),k(a,f)}}}function hi(r){let e,l,t;return l=new ue({props:{$$slots:{default:[di]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Xn(r){let e,l;return e=new He({props:{colorScale:r[1],limits:["55","65","75",">"]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function bi(r){let e,l=r[4].noiseclass+"",t,n,s=xn(r[4].noiseclass)+"",o,u;return{c(){e=L("p"),t=v(l),n=v(" dB ("),o=v(s),u=v(")")},m(a,i){$(a,e,i),w(e,t),w(e,n),w(e,o),w(e,u)},p(a,i){i&16&&l!==(l=a[4].noiseclass+"")&&z(t,l),i&16&&s!==(s=xn(a[4].noiseclass)+"")&&z(o,s)},d(a){a&&p(e)}}}function ki(r){let e,l;return e=new oe({props:{$$slots:{default:[bi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function wi(r){let e,l;const t=[H(vt),{sourceLayer:vt},{paint:{"fill-color":Xe(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":X(.5,.8)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ki]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new je({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&3?te(t,[o&0&&re(H(vt)),o&0&&{sourceLayer:vt},o&2&&{paint:{"fill-color":Xe(["get","noiseclass"],{"55.0-59.9":s[1][0],"60.0-64.9":s[1][0],"65.0-69.9":s[1][1],"70.0-74.9":s[1][1],">=75.0":s[1][2]},"red"),"fill-opacity":X(.5,.8)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function vi(r){let e,l,t,n,s,o;function u(f){r[3](f)}let a={$$slots:{right:[hi],default:[_i]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&Xn(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${vt}.pmtiles`,$$slots:{default:[wi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=Xn(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let vt="road_noise";function xn(r){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[r]}function yi(r,e,l){let t,n=[Z.sequential_low_to_high[0],Z.sequential_low_to_high[2],Z.sequential_low_to_high[4]],s=he(vt);Y(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Si extends V{constructor(e){super(),Q(this,e,yi,vi,J,{})}}function Ci(r){let e,l,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Wards`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Li(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ti(r){let e,l,t,n,s,o,u;return t=new K({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Li]},$$scope:{ctx:r}}}),o=new Ie({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of May 2023."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function Mi(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Ti]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Ni(r){let e,l=r[4].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&z(t,l)},d(n){n&&p(e)}}}function Pi(r){let e,l;return e=new oe({props:{$$slots:{default:[Ni,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Oi(r){let e,l,t,n;const s=[H(Ve),{sourceLayer:Ve},{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Pi]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new je({props:o}),e.$on("click",Ri);const u=[H(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ge({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&re(H(Ve)),f&0&&{sourceLayer:Ve},f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5],s[6]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&re(H(`${Ve}-outline`)),f&0&&{sourceLayer:Ve},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function Ii(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Mi],default:[Ci]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${Ve}.pmtiles`,$$slots:{default:[Oi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Ve="wards";function Ri(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Di(r,e,l){let t,n=Z.wards,s=he(Ve);Y(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Ai extends V{constructor(e){super(),Q(this,e,Di,Ii,J,{})}}function qi(r){let e;return{c(){e=v("Open Data Commons Open Database License")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Fi(r){let e,l,t,n;return t=new K({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[qi]},$$scope:{ctx:r}}}),{c(){e=L("p"),l=v("License: "),h(t.$$.fragment)},m(s,o){$(s,e,o),w(e,l),b(t,e,null),n=!0},p(s,[o]){const u={};o&1&&(u.$$scope={dirty:o,ctx:s}),t.$set(u)},i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&p(e),k(t)}}}class xe extends V{constructor(e){super(),Q(this,e,null,Fi,J,{})}}function zi(r){let e,l,t;return e=new Oe({props:{color:Z.bus_route_with_lane}}),{c(){h(e.$$.fragment),l=v(`
  Bus routes`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function ji(r){let e;return{c(){e=v(`GTFS
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Hi(r){let e,l,t,n,s,o,u,a,i;return s=new K({props:{href:"https://gtfs.org",$$slots:{default:[ji]},$$scope:{ctx:r}}}),a=new xe({}),{c(){e=L("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,l=T(),t=L("p"),n=v("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(s.$$.fragment),o=v(`, and doesn't include which routes are run or the
        frequency of service.`),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),$(f,l,c),$(f,t,c),w(t,n),b(s,t,null),w(t,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){i||(g(s.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(t),p(u)),k(s),k(a,f)}}}function Bi(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Hi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Gi(r){let e;return{c(){e=L("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ei(r){let e;return{c(){e=L("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ui(r){let e;function l(s,o){return s[3].has_bus_lane?Ei:Gi}let t=l(r),n=t(r);return{c(){n.c(),e=ve()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t!==(t=l(s))&&(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function Wi(r){let e,l;return e=new oe({props:{$$slots:{default:[Ui,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Yi(r){let e,l;const t=[H(yt),{sourceLayer:yt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Wi]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ge({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&re(H(yt)),o&0&&{sourceLayer:yt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Ji(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[Bi],default:[zi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${yt}.pmtiles`,$$slots:{default:[Yi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let yt="bus_routes";function Vi(r,e,l){let t,n=he(yt);Y(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Qi extends V{constructor(e){super(),Q(this,e,Vi,Ji,J,{})}}function el(r){const e=oa(r[9]);r[10]=e[0],r[11]=e[1],r[12]=e[2]}function tl(r,e,l){const t=r.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function Zi(r){let e;return{c(){e=v("Cycle paths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ki(r){let e,l,t,n,s,o,u,a;return u=new xe({}),{c(){e=L("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,l=T(),t=L("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,n=T(),s=L("p"),s.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,o=T(),h(u.$$.fragment)},m(i,f){$(i,e,f),$(i,l,f),$(i,t,f),$(i,n,f),$(i,s,f),$(i,o,f),b(u,i,f),a=!0},p:x,i(i){a||(g(u.$$.fragment,i),a=!0)},o(i){d(u.$$.fragment,i),a=!1},d(i){i&&(p(e),p(l),p(t),p(n),p(s),p(o)),k(u,i)}}}function Xi(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Ki]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function nl(r){let e,l,t;return l=new lt({props:{$$slots:{default:[ea]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(l.$$.fragment),pe(e,"border","1px solid black"),pe(e,"padding","8px")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131073&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function xi(r){let e,l,t=r[13]+"",n,s,o;return e=new Oe({props:{color:r[14]}}),{c(){h(e.$$.fragment),l=T(),n=v(t),s=T()},m(u,a){b(e,u,a),$(u,l,a),$(u,n,a),$(u,s,a),o=!0},p:x,i(u){o||(g(e.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),o=!1},d(u){u&&(p(l),p(n),p(s)),k(e,u)}}}function ll(r){let e,l,t;function n(o){r[5](o,r[10])}let s={$$slots:{default:[xi]},$$scope:{ctx:r}};return r[0][r[10]]!==void 0&&(s.checked=r[0][r[10]]),e=new le({props:s}),E.push(()=>U(e,"checked",n)),{c(){h(e.$$.fragment)},m(o,u){b(e,o,u),t=!0},p(o,u){r=o;const a={};u&131072&&(a.$$scope={dirty:u,ctx:r}),!l&&u&5&&(l=!0,a.checked=r[0][r[10]],W(()=>l=!1)),e.$set(a)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function ea(r){let e,l,t=Pe(r[2]),n=[];for(let o=0;o<t.length;o+=1)n[o]=ll(tl(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ve()},m(o,u){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,u);$(o,e,u),l=!0},p(o,u){if(u&5){t=Pe(o[2]);let a;for(a=0;a<t.length;a+=1){const i=tl(o,t,a);n[a]?(n[a].p(i,u),g(n[a],1)):(n[a]=ll(i),n[a].c(),g(n[a],1),n[a].m(e.parentNode,e))}for(ae(),a=t.length;a<n.length;a+=1)s(a);fe()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)g(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&p(e),rt(n,o)}}}function ta(r){el(r);let e,l=r[10]+"",t,n,s,o,u,a=r[11]+"",i,f,c,m,_=r[12]+"",y;return{c(){e=L("h2"),t=v(l),n=T(),s=L("p"),o=v("Direction: "),u=L("b"),i=T(),f=L("p"),c=v("Width: "),m=L("b"),y=v(_)},m(S,C){$(S,e,C),w(e,t),$(S,n,C),$(S,s,C),w(s,o),w(s,u),u.innerHTML=a,$(S,i,C),$(S,f,C),w(f,c),w(f,m),w(m,y)},p(S,C){el(S),C&512&&l!==(l=S[10]+"")&&z(t,l),C&512&&a!==(a=S[11]+"")&&(u.innerHTML=a),C&512&&_!==(_=S[12]+"")&&z(y,_)},d(S){S&&(p(e),p(n),p(s),p(i),p(f))}}}function na(r){let e,l;return e=new oe({props:{$$slots:{default:[ta,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&131584&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function la(r){let e,l;const t=[H(St),{sourceLayer:St},{paint:{"line-color":Xe(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":ze,"line-opacity":X(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[3](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[na]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ge({props:n}),e.$on("click",ia),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&9?te(t,[o&0&&re(H(St)),o&0&&{sourceLayer:St},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&9&&{filter:s[3](s[0])},t[5],t[6],t[7]]):{};o&131072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function sa(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[Xi],default:[Zi]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0].show&&nl(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${St}.pmtiles`,$$slots:{default:[la]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&131072&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&g(i,1)):(i=nl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&131073&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let St="cycle_paths";function ra(r){return{show:!0,track:r.includes("track"),lane:r.includes("lane"),shared_use_segregated:r.includes("shared_use_segregated"),shared_use_unsegregated:r.includes("shared_use_unsegregated")}}function oa(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${l} ${r.direction}`,t]}function ia(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function aa(r,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],s={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function o(m){return m.show?n.filter(_=>m[_]).join(","):null}let u=ht(St,s,o,ra);Y(r,u,m=>l(0,t=m));let a=[["track","Separated tracks",Z.cycle_paths.track],["lane","Unprotected lanes",Z.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]];function i(m){let _=n.filter(y=>m[y]);return["in",["get","kind"],["literal",_]]}function f(m){r.$$.not_equal(t.show,m)&&(t.show=m,u.set(t))}function c(m,_){r.$$.not_equal(t[_],m)&&(t[_]=m,u.set(t))}return[t,u,a,i,f,c]}class fa extends V{constructor(e){super(),Q(this,e,aa,sa,J,{})}}function ua(r){let e,l,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Major Road Network`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function ca(r){let e;return{c(){e=v(`Major Road Network
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $a(r){let e,l,t,n,s,o,u;return t=new K({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[ca]},$$scope:{ctx:r}}}),o=new Ie({}),{c(){e=L("p"),l=v("Data from the "),h(t.$$.fragment),n=v(", as of September 2021."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function pa(r){let e,l,t;return l=new ue({props:{$$slots:{default:[$a]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function ma(r){let e,l=(r[4].name??"Unknown MRN road")+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&z(t,l)},d(n){n&&p(e)}}}function _a(r){let e,l;return e=new oe({props:{$$slots:{default:[ma,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ga(r){let e,l;const t=[H(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[_a]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ge({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&3?te(t,[o&0&&re(H(Ct)),o&0&&{sourceLayer:Ct},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function da(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[pa],default:[ua]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${Ct}.pmtiles`,$$slots:{default:[ga]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Ct="mrn";function ha(r,e,l){let t,n=Z.mrn,s=he(Ct);Y(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class ba extends V{constructor(e){super(),Q(this,e,ha,da,J,{})}}function ka(r){let e,l,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Strategic Road Network`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function wa(r){let e;return{c(){e=v(`OS Open Roads
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function va(r){let e,l,t,n,s,o,u;return t=new K({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[wa]},$$scope:{ctx:r}}}),o=new Ie({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function ya(r){let e,l,t;return l=new ue({props:{$$slots:{default:[va]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Sa(r){let e,l=(r[4].name??"Unknown SRN road")+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&z(t,l)},d(n){n&&p(e)}}}function Ca(r){let e,l;return e=new oe({props:{$$slots:{default:[Sa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function La(r){let e,l;const t=[H(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Ca]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ge({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&3?te(t,[o&0&&re(H(Lt)),o&0&&{sourceLayer:Lt},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Ta(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[ya],default:[ka]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${Lt}.pmtiles`,$$slots:{default:[La]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Lt="srn";function Ma(r,e,l){let t,n=Z.srn,s=he(Lt);Y(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Na extends V{constructor(e){super(),Q(this,e,Ma,Ta,J,{})}}function Pa(r){let e,l,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  National Cycle Network`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Oa(r){let e;return{c(){e=v(`National Cycle Network
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ia(r){let e,l,t,n,s,o,u;return t=new K({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Oa]},$$scope:{ctx:r}}}),o=new Ie({}),{c(){e=L("p"),l=v("Data from Sustrans about the "),h(t.$$.fragment),n=v(", downloaded on 22/01/2024."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function Ra(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function sl(r){let e,l,t,n=r[4].Desc_+"",s;return{c(){e=L("li"),l=v("Description: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].Desc_+"")&&z(s,n)},d(o){o&&p(e)}}}function rl(r){let e,l,t,n=r[4].Greenway+"",s;return{c(){e=L("li"),l=v("Is greenway: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].Greenway+"")&&z(s,n)},d(o){o&&p(e)}}}function ol(r){let e,l,t,n=r[4].RouteType+"",s;return{c(){e=L("li"),l=v("Route type: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteType+"")&&z(s,n)},d(o){o&&p(e)}}}function il(r){let e,l,t,n=r[4].RouteNo+"",s;return{c(){e=L("li"),l=v("Route number: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteNo+"")&&z(s,n)},d(o){o&&p(e)}}}function al(r){let e,l,t,n=r[4].RouteCat+"",s;return{c(){e=L("li"),l=v("Route Category: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteCat+"")&&z(s,n)},d(o){o&&p(e)}}}function fl(r){let e,l,t,n=r[4].OpenStatus+"",s;return{c(){e=L("li"),l=v("Open Status: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].OpenStatus+"")&&z(s,n)},d(o){o&&p(e)}}}function ul(r){let e,l,t,n=r[4].Surface+"",s;return{c(){e=L("li"),l=v("Surface: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].Surface+"")&&z(s,n)},d(o){o&&p(e)}}}function cl(r){let e,l,t,n=r[4].Quality+"",s;return{c(){e=L("li"),l=v("Quality: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].Quality+"")&&z(s,n)},d(o){o&&p(e)}}}function $l(r){let e,l,t,n=r[4].RoadClass+"",s;return{c(){e=L("li"),l=v("Road Class: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&16&&n!==(n=o[4].RoadClass+"")&&z(s,n)},d(o){o&&p(e)}}}function Da(r){let e,l,t,n,s,o,u,a,i,f=r[4].Desc_&&sl(r),c=r[4].Greenway&&rl(r),m=r[4].RouteType&&ol(r),_=r[4].RouteNo&&il(r),y=r[4].RouteCat&&al(r),S=r[4].OpenStatus&&fl(r),C=r[4].Surface&&ul(r),N=r[4].Quality&&cl(r),A=r[4].RoadClass&&$l(r);return{c(){e=L("ul"),f&&f.c(),l=T(),c&&c.c(),t=T(),m&&m.c(),n=T(),_&&_.c(),s=T(),y&&y.c(),o=T(),S&&S.c(),u=T(),C&&C.c(),a=T(),N&&N.c(),i=T(),A&&A.c()},m(R,P){$(R,e,P),f&&f.m(e,null),w(e,l),c&&c.m(e,null),w(e,t),m&&m.m(e,null),w(e,n),_&&_.m(e,null),w(e,s),y&&y.m(e,null),w(e,o),S&&S.m(e,null),w(e,u),C&&C.m(e,null),w(e,a),N&&N.m(e,null),w(e,i),A&&A.m(e,null)},p(R,P){R[4].Desc_?f?f.p(R,P):(f=sl(R),f.c(),f.m(e,l)):f&&(f.d(1),f=null),R[4].Greenway?c?c.p(R,P):(c=rl(R),c.c(),c.m(e,t)):c&&(c.d(1),c=null),R[4].RouteType?m?m.p(R,P):(m=ol(R),m.c(),m.m(e,n)):m&&(m.d(1),m=null),R[4].RouteNo?_?_.p(R,P):(_=il(R),_.c(),_.m(e,s)):_&&(_.d(1),_=null),R[4].RouteCat?y?y.p(R,P):(y=al(R),y.c(),y.m(e,o)):y&&(y.d(1),y=null),R[4].OpenStatus?S?S.p(R,P):(S=fl(R),S.c(),S.m(e,u)):S&&(S.d(1),S=null),R[4].Surface?C?C.p(R,P):(C=ul(R),C.c(),C.m(e,a)):C&&(C.d(1),C=null),R[4].Quality?N?N.p(R,P):(N=cl(R),N.c(),N.m(e,i)):N&&(N.d(1),N=null),R[4].RoadClass?A?A.p(R,P):(A=$l(R),A.c(),A.m(e,null)):A&&(A.d(1),A=null)},d(R){R&&p(e),f&&f.d(),c&&c.d(),m&&m.d(),_&&_.d(),y&&y.d(),S&&S.d(),C&&C.d(),N&&N.d(),A&&A.d()}}}function Aa(r){let e,l;return e=new oe({props:{$$slots:{default:[Da,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function qa(r){let e,l;const t=[H(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Aa]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ge({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&3?te(t,[o&0&&re(H(Tt)),o&0&&{sourceLayer:Tt},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":4,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Fa(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Ra],default:[Pa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${Tt}.pmtiles`,$$slots:{default:[qa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Tt="national_cycle_network";function za(r,e,l){let t,n=Z.national_cycle_network,s=he(Tt);Y(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class ja extends V{constructor(e){super(),Q(this,e,za,Fa,J,{})}}function pl(r,e,l){const t=r.slice();return t[6]=e[l][0],t[7]=e[l][1],t[8]=e[l][2],t}function Ha(r){let e;return{c(){e=v("OS Pavement widths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ba(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ga(r){let e,l,t,n,s,o,u,a,i,f,c;return i=new K({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ba]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,l=T(),t=L("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,n=T(),s=L("p"),s.textContent="Data valid as of 1 January, 2024",o=T(),u=L("p"),a=v(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),h(i.$$.fragment),f=v(".")},m(m,_){$(m,e,_),$(m,l,_),$(m,t,_),$(m,n,_),$(m,s,_),$(m,o,_),$(m,u,_),w(u,a),b(i,u,null),w(u,f),c=!0},p(m,_){const y={};_&2048&&(y.$$scope={dirty:_,ctx:m}),i.$set(y)},i(m){c||(g(i.$$.fragment,m),c=!0)},o(m){d(i.$$.fragment,m),c=!1},d(m){m&&(p(e),p(l),p(t),p(n),p(s),p(o),p(u)),k(i)}}}function Ea(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Ga]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function ml(r){let e,l;return e=new He({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ua(r){let e,l,t=Yt(r[5].angle+r[8])+"",n;return{c(){e=L("p"),l=new ut(!1),n=v(` side of the road: no pavement
          `),l.a=n},m(s,o){$(s,e,o),l.m(t,e),w(e,n)},p(s,o){o&32&&t!==(t=Yt(s[5].angle+s[8])+"")&&l.p(t)},d(s){s&&p(e)}}}function Wa(r){let e,l,t=Yt(r[5].angle+r[8])+"",n,s,o=r[6]+"",u,a,i,f=r[7]+"",c,m;return{c(){e=L("p"),l=new ut(!1),n=v(` side of the road:
            `),s=L("b"),u=v(o),a=v(`
            m average,
            `),i=L("b"),c=v(f),m=v(`
            m minimum
          `),l.a=n},m(_,y){$(_,e,y),l.m(t,e),w(e,n),w(e,s),w(s,u),w(e,a),w(e,i),w(i,c),w(e,m)},p(_,y){y&32&&t!==(t=Yt(_[5].angle+_[8])+"")&&l.p(t),y&32&&o!==(o=_[6]+"")&&z(u,o),y&32&&f!==(f=_[7]+"")&&z(c,f)},d(_){_&&p(e)}}}function _l(r){let e;function l(s,o){return s[6]?Wa:Ua}let t=l(r),n=t(r);return{c(){n.c(),e=ve()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function Ya(r){let e,l=Pe([[r[5].left_average,r[5].left_minimum,-90],[r[5].right_average,r[5].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=_l(pl(r,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ve()},m(n,s){for(let o=0;o<2;o+=1)t[o]&&t[o].m(n,s);$(n,e,s)},p(n,s){if(s&32){l=Pe([[n[5].left_average,n[5].left_minimum,-90],[n[5].right_average,n[5].right_minimum,90]]);let o;for(o=0;o<2;o+=1){const u=pl(n,l,o);t[o]?t[o].p(u,s):(t[o]=_l(u),t[o].c(),t[o].m(e.parentNode,e))}for(;o<2;o+=1)t[o].d(1)}},d(n){n&&p(e),rt(t,n)}}}function Ja(r){let e,l;return e=new oe({props:{openOn:"hover",$$slots:{default:[Ya,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&2080&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Va(r){let e,l;const t=[H(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":de(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":ze,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Ja]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ge({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&re(H(Mt)),o&0&&{sourceLayer:Mt},t[2],t[3],o&6&&{paint:{"line-color":de(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],s[2],s[1]),"line-width":ze,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Qa(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[Ea],default:[Ha]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&ml(r);return s=new me({props:{url:`pmtiles://${Et()}/v1/${Mt}.pmtiles`,$$slots:{default:[Va]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=ml(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&2049&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Mt="pavement_widths";function Za(r){let e=Math.floor((r+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function Yt(r){return`${Za(r)} <span style="display: inline-block; rotate: ${r}deg">â¬†</span>`}function Ka(r,e,l){let t,n=Z.sequential_low_to_high,s=[0,2,4,6,8,13],o=he(Mt);Y(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class Xa extends V{constructor(e){super(),Q(this,e,Ka,Qa,J,{})}}function xa(r){let e;return{c(){e=v("Propensity to Cycle Tool")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ef(r){let e;return{c(){e=v("the PCT website")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function tf(r){let e;return{c(){e=v("2017 journal article")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function nf(r){let e,l,t,n,s,o,u,a,i,f,c;return u=new K({props:{href:"https://www.pct.bike",$$slots:{default:[ef]},$$scope:{ctx:r}}}),i=new K({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,l=T(),t=L("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,n=T(),s=L("p"),o=v("See "),h(u.$$.fragment),a=v(" and "),h(i.$$.fragment),f=v(" for details on methodology and data sources.")},m(m,_){$(m,e,_),$(m,l,_),$(m,t,_),$(m,n,_),$(m,s,_),w(s,o),b(u,s,null),w(s,a),b(i,s,null),w(s,f),c=!0},p(m,_){const y={};_&1024&&(y.$$scope={dirty:_,ctx:m}),u.$set(y);const S={};_&1024&&(S.$$scope={dirty:_,ctx:m}),i.$set(S)},i(m){c||(g(u.$$.fragment,m),g(i.$$.fragment,m),c=!0)},o(m){d(u.$$.fragment,m),d(i.$$.fragment,m),c=!1},d(m){m&&(p(e),p(l),p(t),p(n),p(s)),k(u),k(i)}}}function lf(r){let e,l,t;return l=new ue({props:{$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&1024&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function gl(r){let e,l,t,n,s,o,u,a;e=new He({props:{colorScale:r[1],limits:r[2]}});function i(_){r[6](_)}let f={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0].tripPurpose!==void 0&&(f.value=r[0].tripPurpose),t=new ps({props:f}),E.push(()=>U(t,"value",i));function c(_){r[7](_)}let m={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[0].scenario!==void 0&&(m.value=r[0].scenario),o=new ft({props:m}),E.push(()=>U(o,"value",c)),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),s=T(),h(o.$$.fragment)},m(_,y){b(e,_,y),$(_,l,y),b(t,_,y),$(_,s,y),b(o,_,y),a=!0},p(_,y){const S={};!n&&y&1&&(n=!0,S.value=_[0].tripPurpose,W(()=>n=!1)),t.$set(S);const C={};!u&&y&1&&(u=!0,C.value=_[0].scenario,W(()=>u=!1)),o.$set(C)},i(_){a||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),a=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(o.$$.fragment,_),a=!1},d(_){_&&(p(l),p(s)),k(e,_),k(t,_),k(o,_)}}}function sf(r){let e,l=r[4](r[9])+"",t;return{c(){e=new ut(!1),t=ve(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function rf(r){let e,l;return e=new oe({props:{$$slots:{default:[sf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function of(r){let e,l;const t=[H(et),{sourceLayer:et},{paint:{"line-color":de(["get",r[0].scenario],r[2],r[1]),"line-width":ze,"line-opacity":X(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==et?"visible":"none"}}];let n={$$slots:{default:[rf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ge({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&re(H(et)),o&0&&{sourceLayer:et},o&7&&{paint:{"line-color":de(["get",s[0].scenario],s[2],s[1]),"line-width":ze,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==et?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function af(r){let e,l=r[4](r[9])+"",t;return{c(){e=new ut(!1),t=ve(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function ff(r){let e,l;return e=new oe({props:{$$slots:{default:[af,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function uf(r){let e,l;const t=[H(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":de(["get",r[0].scenario],r[2],r[1]),"line-width":ze,"line-opacity":X(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==at?"visible":"none"}}];let n={$$slots:{default:[ff]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ge({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&re(H(at)),o&0&&{sourceLayer:at},t[2],t[3],o&7&&{paint:{"line-color":de(["get",s[0].scenario],s[2],s[1]),"line-width":ze,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==at?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function cf(r){let e,l,t,n,s,o,u,a;function i(m){r[5](m)}let f={$$slots:{right:[lf],default:[xa]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new le({props:f}),E.push(()=>U(e,"checked",i));let c=r[0].show&&gl(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${et}.pmtiles`,$$slots:{default:[of]},$$scope:{ctx:r}}}),u=new me({props:{url:`pmtiles://${$e()}/v1/${at}.pmtiles`,$$slots:{default:[uf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),c&&c.c(),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment)},m(m,_){b(e,m,_),$(m,t,_),c&&c.m(m,_),$(m,n,_),b(s,m,_),$(m,o,_),b(u,m,_),a=!0},p(m,[_]){const y={};_&1024&&(y.$$scope={dirty:_,ctx:m}),!l&&_&1&&(l=!0,y.checked=m[0].show,W(()=>l=!1)),e.$set(y),m[0].show?c?(c.p(m,_),_&1&&g(c,1)):(c=gl(m),c.c(),g(c,1),c.m(n.parentNode,n)):c&&(ae(),d(c,1,1,()=>{c=null}),fe());const S={};_&1025&&(S.$$scope={dirty:_,ctx:m}),s.$set(S);const C={};_&1025&&(C.$$scope={dirty:_,ctx:m}),u.$set(C)},i(m){a||(g(e.$$.fragment,m),g(c),g(s.$$.fragment,m),g(u.$$.fragment,m),a=!0)},o(m){d(e.$$.fragment,m),d(c),d(s.$$.fragment,m),d(u.$$.fragment,m),a=!1},d(m){m&&(p(t),p(n),p(o)),k(e,m),c&&c.d(m),k(s,m),k(u,m)}}}let et="pct_commute",at="pct_school";function $f(r){return r.show?`${r.tripPurpose}/${r.scenario}`:null}function pf(r){let[e,l]=r.split("/");return{show:!0,tripPurpose:e,scenario:l}}function mf(r,e,l){let t,n=Z.sequential_low_to_high,s=[0,50,100,500,1e3,2e3],u=ht("pct",{show:!1,tripPurpose:et,scenario:"baseline"},$f,pf);Y(r,u,m=>l(0,t=m));function a(m){let _=m.baseline,y=m.gov_target,S=m.go_dutch,C=`<h2>Trip purpose: ${t.tripPurpose==et?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)C+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let N=(y/_).toFixed(1),A=(S/_).toFixed(1);C+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${N}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${A}x</b> of baseline)</p>`}return C}function i(m){r.$$.not_equal(t.show,m)&&(t.show=m,u.set(t))}function f(m){r.$$.not_equal(t.tripPurpose,m)&&(t.tripPurpose=m,u.set(t))}function c(m){r.$$.not_equal(t.scenario,m)&&(t.scenario=m,u.set(t))}return[t,n,s,u,a,i,f,c]}class _f extends V{constructor(e){super(),Q(this,e,mf,cf,J,{})}}function gf(r){let e;return{c(){e=v("OS Speeds")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function df(r){let e;return{c(){e=v("Basemap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function hf(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function bf(r){let e,l,t,n,s,o,u,a,i,f,c,m;return t=new K({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[df]},$$scope:{ctx:r}}}),f=new K({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){e=L("p"),l=v("The average speed data is collected over a six-month period by "),h(t.$$.fragment),n=v(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),s=T(),o=L("p"),o.textContent="Data valid as of 1 September, 2023",u=T(),a=L("p"),i=v(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=v(".")},m(_,y){$(_,e,y),w(e,l),b(t,e,null),w(e,n),$(_,s,y),$(_,o,y),$(_,u,y),$(_,a,y),w(a,i),b(f,a,null),w(a,c),m=!0},p(_,y){const S={};y&512&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const C={};y&512&&(C.$$scope={dirty:y,ctx:_}),f.$set(C)},i(_){m||(g(t.$$.fragment,_),g(f.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(f.$$.fragment,_),m=!1},d(_){_&&(p(e),p(s),p(o),p(u),p(a)),k(t),k(f)}}}function kf(r){let e,l,t;return l=new ue({props:{$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function dl(r){let e,l,t,n,s;e=new He({props:{colorScale:r[1],limits:r[2]}});function o(a){r[6](a)}let u={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0].kind!==void 0&&(u.value=r[0].kind),t=new ps({props:u}),E.push(()=>U(t,"value",o)),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(a,i){b(e,a,i),$(a,l,i),b(t,a,i),s=!0},p(a,i){const f={};!n&&i&1&&(n=!0,f.value=a[0].kind,W(()=>n=!1)),t.$set(f)},i(a){s||(g(e.$$.fragment,a),g(t.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),s=!1},d(a){a&&p(l),k(e,a),k(t,a)}}}function wf(r){let e,l,t=r[8].indicative_mph+"",n,s,o,u,a,i=r[8].highest_mph+"",f,c,m=r[4][r[8].highest_description]+"",_,y;return{c(){e=L("p"),l=v("Posted speed limit: "),n=v(t),s=v(" mph"),o=T(),u=L("p"),a=v("Highest average speed: "),f=v(i),c=v(" mph (during "),_=v(m),y=v(")")},m(S,C){$(S,e,C),w(e,l),w(e,n),w(e,s),$(S,o,C),$(S,u,C),w(u,a),w(u,f),w(u,c),w(u,_),w(u,y)},p(S,C){C&256&&t!==(t=S[8].indicative_mph+"")&&z(n,t),C&256&&i!==(i=S[8].highest_mph+"")&&z(f,i),C&256&&m!==(m=S[4][S[8].highest_description]+"")&&z(_,m)},d(S){S&&(p(e),p(o),p(u))}}}function vf(r){let e,l;return e=new oe({props:{$$slots:{default:[wf,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&768&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function yf(r){let e,l;const t=[H(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":de(["get",r[0].kind],r[2],r[1]),"line-width":ze,"line-opacity":X(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={$$slots:{default:[vf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ge({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&re(H(Nt)),o&0&&{sourceLayer:Nt},t[2],t[3],o&7&&{paint:{"line-color":de(["get",s[0].kind],s[2],s[1]),"line-width":ze,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0].show?"visible":"none"}}]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Sf(r){let e,l,t,n,s,o;function u(f){r[5](f)}let a={$$slots:{right:[kf],default:[gf]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0].show&&dl(r);return s=new me({props:{url:`pmtiles://${Et()}/v1/${Nt}.pmtiles`,$$slots:{default:[yf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&512&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&g(i,1)):(i=dl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&513&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Nt="road_speeds";function Cf(r){return r.show?r.kind:null}function Lf(r){return{show:!0,kind:r}}function Tf(r,e,l){let t,n=Z.sequential_low_to_high,s=[0,20,30,40,50,90],u=ht(Nt,{show:!1,kind:"indicative_mph"},Cf,Lf);Y(r,u,c=>l(0,t=c));let a={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(c){r.$$.not_equal(t.show,c)&&(t.show=c,u.set(t))}function f(c){r.$$.not_equal(t.kind,c)&&(t.kind=c,u.set(t))}return[t,n,s,u,a,i,f]}class Mf extends V{constructor(e){super(),Q(this,e,Tf,Sf,J,{})}}function Nf(r){let e;return{c(){e=v("OS Road widths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Pf(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Of(r){let e,l,t,n,s,o,u,a,i;return u=new K({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Pf]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,l=T(),t=L("p"),t.textContent="Data valid as of 1 September, 2023",n=T(),s=L("p"),o=v(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),a=v(".")},m(f,c){$(f,e,c),$(f,l,c),$(f,t,c),$(f,n,c),$(f,s,c),w(s,o),b(u,s,null),w(s,a),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),u.$set(m)},i(f){i||(g(u.$$.fragment,f),i=!0)},o(f){d(u.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(t),p(n),p(s)),k(u)}}}function If(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Of]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function hl(r){let e,l;return e=new He({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Rf(r){let e,l,t,n=r[5].average+"",s,o,u,a,i,f,c=r[5].minimum+"",m,_;return{c(){e=L("p"),l=v("Average width: "),t=L("b"),s=v(n),o=v(`
        meters`),u=T(),a=L("p"),i=v("Minimum width: "),f=L("b"),m=v(c),_=v(`
        meters`)},m(y,S){$(y,e,S),w(e,l),w(e,t),w(t,s),w(e,o),$(y,u,S),$(y,a,S),w(a,i),w(a,f),w(f,m),w(a,_)},p(y,S){S&32&&n!==(n=y[5].average+"")&&z(s,n),S&32&&c!==(c=y[5].minimum+"")&&z(m,c)},d(y){y&&(p(e),p(u),p(a))}}}function Df(r){let e,l;return e=new oe({props:{$$slots:{default:[Rf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Af(r){let e,l;const t=[H(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":de(["get","average"],r[2],r[1]),"line-width":ze,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Df]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ge({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&re(H(Pt)),o&0&&{sourceLayer:Pt},t[2],t[3],o&6&&{paint:{"line-color":de(["get","average"],s[2],s[1]),"line-width":ze,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function qf(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[If],default:[Nf]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&hl(r);return s=new me({props:{url:`pmtiles://${Et()}/v1/${Pt}.pmtiles`,$$slots:{default:[Af]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=hl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Pt="road_widths";function Ff(r,e,l){let t,n=Z.sequential_low_to_high,s=[0,5,10,15,20,100],o=he(Pt);Y(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class zf extends V{constructor(e){super(),Q(this,e,Ff,qf,J,{})}}function jf(r){let e,l,t;return e=new Oe({props:{color:Z.trams}}),{c(){h(e.$$.fragment),l=v(`
  Trams`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Hf(r){let e,l,t,n;return t=new xe({}),{c(){e=L("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,l=T(),h(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),b(t,s,o),n=!0},p:x,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),k(t,s)}}}function Bf(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&8&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Gf(r){let e,l;const t=[H(Ot),{sourceLayer:Ot},{paint:{"line-color":Z.trams,"line-width":5,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ge({props:n}),e.$on("click",Uf),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&re(H(Ot)),o&0&&{sourceLayer:Ot},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Ef(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[Bf],default:[jf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${Ot}.pmtiles`,$$slots:{default:[Gf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&8&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&9&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Ot="trams";function Uf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Wf(r,e,l){let t,n=he(Ot);Y(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Yf extends V{constructor(e){super(),Q(this,e,Wf,Ef,J,{})}}function Jf(r){let e;return{c(){e=v("Bus stops")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Vf(r){let e;return{c(){e=v(`Bus Open Data Service
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Qf(r){let e,l,t,n,s,o,u,a,i;return t=new K({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Vf]},$$scope:{ctx:r}}}),a=new Ie({}),{c(){e=L("p"),l=v("Data from the "),h(t.$$.fragment),n=v(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),s=T(),o=L("p"),o.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,l),b(t,e,null),w(e,n),$(f,s,c),$(f,o,c),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),t.$set(m)},i(f){i||(g(t.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(s),p(o),p(u)),k(t),k(a,f)}}}function Zf(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Qf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function bl(r){let e,l,t,n;return t=new He({props:{colorScale:r[1],limits:r[2]}}),{c(){e=L("p"),e.textContent="Peak hourly frequency:",l=T(),h(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),b(t,s,o),n=!0},p:x,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),k(t,s)}}}function Kf(r){let e,l,t,n=r[5].stop_name+"",s,o,u,a,i,f=r[5].peak+"",c,m,_,y,S,C=r[5].peak_description+"",N,A,R,P,M,I=r[5].total+"",D,O,j=r[5].total_description+"",ne,ie;return{c(){e=L("p"),l=v("Stop name: "),t=L("b"),s=v(n),o=T(),u=L("p"),a=v("Peak: "),i=L("b"),c=v(f),m=v(`
        buses during the busiest hour of any day`),_=T(),y=L("p"),S=v("The peak hour is "),N=v(C),A=T(),R=L("p"),P=v("Total buses per day: "),M=L("b"),D=v(I),O=v(`
        (for `),ne=v(j),ie=v(", the busiest day of the week)")},m(F,q){$(F,e,q),w(e,l),w(e,t),w(t,s),$(F,o,q),$(F,u,q),w(u,a),w(u,i),w(i,c),w(u,m),$(F,_,q),$(F,y,q),w(y,S),w(y,N),$(F,A,q),$(F,R,q),w(R,P),w(R,M),w(M,D),w(R,O),w(R,ne),w(R,ie)},p(F,q){q&32&&n!==(n=F[5].stop_name+"")&&z(s,n),q&32&&f!==(f=F[5].peak+"")&&z(c,f),q&32&&C!==(C=F[5].peak_description+"")&&z(N,C),q&32&&I!==(I=F[5].total+"")&&z(D,I),q&32&&j!==(j=F[5].total_description+"")&&z(ne,j)},d(F){F&&(p(e),p(o),p(u),p(_),p(y),p(A),p(R))}}}function Xf(r){let e,l;return e=new oe({props:{$$slots:{default:[Kf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function xf(r){let e,l;const t=[H(It),{sourceLayer:It},{paint:{"circle-color":de(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Xf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new _t({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&re(H(It)),o&0&&{sourceLayer:It},o&6&&{paint:{"circle-color":de(["get","peak"],s[2],s[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function eu(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[Zf],default:[Jf]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&bl(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${It}.pmtiles`,$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=bl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let It="bus_stops";function tu(r,e,l){let t,n=Z.sequential_low_to_high,s=[0,3,10,20,30,100],o=he(It);Y(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class nu extends V{constructor(e){super(),Q(this,e,tu,eu,J,{})}}function lu(r){let e;return{c(){e=v("Crossings")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function su(r){let e;return{c(){e=v("crossing")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ru(r){let e,l,t,n,s,o,u;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[su]},$$scope:{ctx:r}}}),o=new xe({}),{c(){e=L("p"),l=v("This shows "),h(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function ou(r){let e,l,t;return l=new ue({props:{$$slots:{default:[ru]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function kl(r){let e,l;return e=new Zt({props:{rows:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function iu(r){let e,l=wl(r[4])+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&16&&l!==(l=wl(n[4])+"")&&z(t,l)},d(n){n&&p(e)}}}function au(r){let e,l;return e=new oe({props:{$$slots:{default:[iu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function fu(r){let e,l;const t=[H(Rt),{sourceLayer:Rt},{paint:{"circle-color":Xe(["get","crossing"],{traffic_signals:Z.signalized_crossing},Z.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[au]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new _t({props:n}),e.$on("click",cu),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&re(H(Rt)),o&0&&{sourceLayer:Rt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function uu(r){let e,l,t,n,s,o;function u(f){r[3](f)}let a={$$slots:{right:[ou],default:[lu]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&kl(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${Rt}.pmtiles`,$$slots:{default:[fu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=kl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Rt="crossings";function wl(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function cu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function $u(r,e,l){let t,n=he(Rt);Y(r,n,u=>l(0,t=u));let s=[["Signalized",Z.signalized_crossing],["Other",Z.other_crossing]];function o(u){t=u,n.set(t)}return[t,n,s,o]}class pu extends V{constructor(e){super(),Q(this,e,$u,uu,J,{})}}function mu(r){let e;return{c(){e=v("Gradients")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function _u(r){let e;return{c(){e=v("OS Terrain 50")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function gu(r){let e,l,t,n,s,o,u,a,i,f,c,m,_;return u=new K({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[_u]},$$scope:{ctx:r}}}),f=new Ie({}),m=new xe({}),{c(){e=L("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,l=T(),t=L("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,n=T(),s=L("p"),o=v("This layer is built from "),h(u.$$.fragment),a=v(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),i=T(),h(f.$$.fragment),c=T(),h(m.$$.fragment)},m(y,S){$(y,e,S),$(y,l,S),$(y,t,S),$(y,n,S),$(y,s,S),w(s,o),b(u,s,null),w(s,a),$(y,i,S),b(f,y,S),$(y,c,S),b(m,y,S),_=!0},p(y,S){const C={};S&64&&(C.$$scope={dirty:S,ctx:y}),u.$set(C)},i(y){_||(g(u.$$.fragment,y),g(f.$$.fragment,y),g(m.$$.fragment,y),_=!0)},o(y){d(u.$$.fragment,y),d(f.$$.fragment,y),d(m.$$.fragment,y),_=!1},d(y){y&&(p(e),p(l),p(t),p(n),p(s),p(i),p(c)),k(u),k(f,y),k(m,y)}}}function du(r){let e,l,t;return l=new ue({props:{$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function vl(r){let e,l;return e=new He({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function hu(r){let e,l,t,n=Math.abs(r[5].gradient)/100+"",s,o;return{c(){e=L("p"),l=v("Gradient: "),t=L("b"),s=v(n),o=v(`
        %`)},m(u,a){$(u,e,a),w(e,l),w(e,t),w(t,s),w(e,o)},p(u,a){a&32&&n!==(n=Math.abs(u[5].gradient)/100+"")&&z(s,n)},d(u){u&&p(e)}}}function bu(r){let e,l;return e=new oe({props:{$$slots:{default:[hu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ku(r){let e,l,t,n;const s=[H(Qe),{sourceLayer:Qe},{manageHoverState:!0},{paint:{"line-color":de(["/",["abs",["get","gradient"]],100],r[2],r[1]),"line-width":ze,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let o={$$slots:{default:[bu]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new ge({props:o});const u=[H(Qe+"_arrows"),{sourceLayer:Qe},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new fn({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&7?te(s,[f&0&&re(H(Qe)),f&0&&{sourceLayer:Qe},s[2],f&6&&{paint:{"line-color":de(["/",["abs",["get","gradient"]],100],i[2],i[1]),"line-width":ze,"line-opacity":X(1,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};f&64&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&1?te(u,[f&0&&re(H(Qe+"_arrows")),f&0&&{sourceLayer:Qe},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(g(e.$$.fragment,i),g(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),k(e,i),k(t,i)}}}function wu(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[du],default:[mu]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&vl(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${Qe}.pmtiles`,$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=vl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Qe="gradient";function vu(r,e,l){let t,n=Z.gradient_flat_to_steep,s=[0,3,5,8,10,20,100],o=he(Qe);Y(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class yu extends V{constructor(e){super(),Q(this,e,vu,wu,J,{})}}function Su(r){let e,l,t;return{c(){e=L("img"),t=v(`
  Cycle parking`),Wt(e.src,l=ws)||B(e,"src",l),B(e,"alt","a logo representing cycle parking")},m(n,s){$(n,e,s),$(n,t,s)},p:x,d(n){n&&(p(e),p(t))}}}function Cu(r){let e;return{c(){e=v("OpenStreetMap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Lu(r){let e;return{c(){e=v("OpenStreetMap Carto")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Tu(r){let e,l,t,n,s,o,u,a,i,f,c;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Cu]},$$scope:{ctx:r}}}),a=new K({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Lu]},$$scope:{ctx:r}}}),f=new xe({}),{c(){e=L("p"),l=v("Cycle parking, according to "),h(t.$$.fragment),n=v(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),s=T(),o=L("p"),u=v("Icon from "),h(a.$$.fragment),i=T(),h(f.$$.fragment)},m(m,_){$(m,e,_),w(e,l),b(t,e,null),w(e,n),$(m,s,_),$(m,o,_),w(o,u),b(a,o,null),$(m,i,_),b(f,m,_),c=!0},p(m,_){const y={};_&16&&(y.$$scope={dirty:_,ctx:m}),t.$set(y);const S={};_&16&&(S.$$scope={dirty:_,ctx:m}),a.$set(S)},i(m){c||(g(t.$$.fragment,m),g(a.$$.fragment,m),g(f.$$.fragment,m),c=!0)},o(m){d(t.$$.fragment,m),d(a.$$.fragment,m),d(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(s),p(o),p(i)),k(t),k(a),k(f,m)}}}function Mu(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Nu(r){let e,l,t,n=(r[3].capacity??"unknown")+"",s;return{c(){e=L("p"),l=v("Capacity: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&8&&n!==(n=(o[3].capacity??"unknown")+"")&&z(s,n)},d(o){o&&p(e)}}}function Pu(r){let e,l;return e=new oe({props:{$$slots:{default:[Nu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ou(r){let e,l;const t=[H(Dt),{sourceLayer:Dt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Pu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new fn({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&re(H(Dt)),o&0&&{sourceLayer:Dt},o&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Iu(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[Mu],default:[Su]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${Dt}.pmtiles`,$$slots:{default:[Ou]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Dt="cycle_parking";function Ru(r,e,l){let t,n=he(Dt);Y(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Du extends V{constructor(e){super(),Q(this,e,Ru,Iu,J,{})}}function Au(r){let e;return{c(){e=v("Education")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function qu(r){let e,l,t,n;return t=new xe({}),{c(){e=L("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,l=T(),h(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),b(t,s,o),n=!0},p:x,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),k(t,s)}}}function Fu(r){let e,l,t;return l=new ue({props:{$$slots:{default:[qu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function yl(r){let e,l,t;return l=new lt({props:{$$slots:{default:[Bu]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(l.$$.fragment),pe(e,"border","1px solid black"),pe(e,"padding","8px")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&2049&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function zu(r){let e,l,t;return e=new Oe({props:{color:Z.education.schools}}),{c(){h(e.$$.fragment),l=v(`
        Schools`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function ju(r){let e,l,t;return e=new Oe({props:{color:Z.education.colleges}}),{c(){h(e.$$.fragment),l=v(`
        Colleges`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Hu(r){let e,l,t;return e=new Oe({props:{color:Z.education.universities}}),{c(){h(e.$$.fragment),l=v(`
        Universities`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),k(e,n)}}}function Bu(r){let e,l,t,n,s,o,u,a,i;function f(C){r[4](C)}let c={$$slots:{default:[zu]},$$scope:{ctx:r}};r[0].school!==void 0&&(c.checked=r[0].school),e=new le({props:c}),E.push(()=>U(e,"checked",f));function m(C){r[5](C)}let _={$$slots:{default:[ju]},$$scope:{ctx:r}};r[0].college!==void 0&&(_.checked=r[0].college),n=new le({props:_}),E.push(()=>U(n,"checked",m));function y(C){r[6](C)}let S={$$slots:{default:[Hu]},$$scope:{ctx:r}};return r[0].university!==void 0&&(S.checked=r[0].university),u=new le({props:S}),E.push(()=>U(u,"checked",y)),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),o=T(),h(u.$$.fragment)},m(C,N){b(e,C,N),$(C,t,N),b(n,C,N),$(C,o,N),b(u,C,N),i=!0},p(C,N){const A={};N&2048&&(A.$$scope={dirty:N,ctx:C}),!l&&N&1&&(l=!0,A.checked=C[0].school,W(()=>l=!1)),e.$set(A);const R={};N&2048&&(R.$$scope={dirty:N,ctx:C}),!s&&N&1&&(s=!0,R.checked=C[0].college,W(()=>s=!1)),n.$set(R);const P={};N&2048&&(P.$$scope={dirty:N,ctx:C}),!a&&N&1&&(a=!0,P.checked=C[0].university,W(()=>a=!1)),u.$set(P)},i(C){i||(g(e.$$.fragment,C),g(n.$$.fragment,C),g(u.$$.fragment,C),i=!0)},o(C){d(e.$$.fragment,C),d(n.$$.fragment,C),d(u.$$.fragment,C),i=!1},d(C){C&&(p(t),p(o)),k(e,C),k(n,C),k(u,C)}}}function Gu(r){let e,l=(r[10].name??"Unnamed institution")+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&z(t,l)},d(n){n&&p(e)}}}function Eu(r){let e,l;return e=new oe({props:{$$slots:{default:[Gu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&3072&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Uu(r){let e,l;const t=[H(At),{sourceLayer:At},{paint:{"fill-color":Xe(["get","type"],{school:Z.education.schools,college:Z.education.colleges,university:Z.education.universities},"grey"),"fill-opacity":X(.7,1)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[2](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Eu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new je({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&5?te(t,[o&0&&re(H(At)),o&0&&{sourceLayer:At},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&5&&{filter:s[2](s[0])},t[5],t[6]]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Wu(r){let e,l,t,n,s,o;function u(f){r[3](f)}let a={$$slots:{right:[Fu],default:[Au]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0].show&&yl(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${At}.pmtiles`,$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&g(i,1)):(i=yl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&2049&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let At="education";function Yu(r){return{show:!0,school:r.includes("school"),college:r.includes("college"),university:r.includes("university")}}function Ju(r,e,l){let t,n=["school","college","university"],s={show:!1,school:!0,college:!0,university:!0};function o(_){return _.show?n.filter(y=>_[y]).join(","):null}let u=ht(At,s,o,Yu);Y(r,u,_=>l(0,t=_));function a(_){let y=n.filter(S=>_[S]);return["in",["get","type"],["literal",y]]}function i(_){r.$$.not_equal(t.show,_)&&(t.show=_,u.set(t))}function f(_){r.$$.not_equal(t.school,_)&&(t.school=_,u.set(t))}function c(_){r.$$.not_equal(t.college,_)&&(t.college=_,u.set(t))}function m(_){r.$$.not_equal(t.university,_)&&(t.university=_,u.set(t))}return[t,u,a,i,f,c,m]}class Vu extends V{constructor(e){super(),Q(this,e,Ju,Wu,J,{})}}function Qu(r){let e,l,t,n;return e=new Oe({props:{color:r[4]}}),{c(){h(e.$$.fragment),l=T(),t=v(r[2])},m(s,o){b(e,s,o),$(s,l,o),$(s,t,o),n=!0},p(s,o){(!n||o&4)&&z(t,s[2])},i(s){n||(g(e.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),k(e,s)}}}function Zu(r){let e;const l=r[6].default,t=ct(l,r,r[8],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&256)&&$t(t,l,n,n[8],e?mt(l,n[8],s,null):pt(n[8]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function Ku(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Zu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&256&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Xu(r){let e,l=(r[9].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&514&&l!==(l=(n[9].name??`Unnamed ${n[1]}`)+"")&&z(t,l)},d(n){n&&p(e)}}}function xu(r){let e,l;return e=new oe({props:{$$slots:{default:[Xu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&770&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ec(r){let e,l;const t=[H(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":X(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[xu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new je({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&25?te(t,[o&1&&re(H(s[0])),o&1&&{sourceLayer:s[0]},o&16&&{paint:{"fill-color":s[4],"fill-opacity":X(.7,1)}},o&8&&{layout:{visibility:s[3]?"visible":"none"}},t[4],t[5]]):{};o&258&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function tc(r){let e,l,t,n,s;function o(a){r[7](a)}let u={$$slots:{right:[Ku],default:[Qu]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new me({props:{url:`pmtiles://${$e()}/v1/${r[0]}.pmtiles`,$$slots:{default:[ec]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&260&&(f.$$scope={dirty:i,ctx:a}),!l&&i&8&&(l=!0,f.checked=a[3],W(()=>l=!1)),e.$set(f);const c={};i&1&&(c.url=`pmtiles://${$e()}/v1/${a[0]}.pmtiles`),i&267&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}function nc(r,e,l){let t,{$$slots:n={},$$scope:s}=e,{name:o}=e,{singularNoun:u}=e,{pluralNoun:a}=e,i=Z[o],f=he(o);Y(r,f,m=>l(3,t=m));function c(m){t=m,f.set(t)}return r.$$set=m=>{"name"in m&&l(0,o=m.name),"singularNoun"in m&&l(1,u=m.singularNoun),"pluralNoun"in m&&l(2,a=m.pluralNoun),"$$scope"in m&&l(8,s=m.$$scope)},[o,u,a,t,i,f,n,c,s]}class _s extends V{constructor(e){super(),Q(this,e,nc,tc,J,{name:0,singularNoun:1,pluralNoun:2})}}function lc(r){let e;return{c(){e=v("hospital")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function sc(r){let e,l,t,n,s,o,u;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[lc]},$$scope:{ctx:r}}}),o=new xe({}),{c(){e=L("p"),l=v("This shows "),h(t.$$.fragment),n=v(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),w(e,l),b(t,e,null),w(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&1&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),k(t),k(o,a)}}}function rc(r){let e,l;return e=new _s({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[sc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}class oc extends V{constructor(e){super(),Q(this,e,null,rc,J,{})}}function ic(r){let e,l,t;return{c(){e=L("img"),t=v(`
  Railway Stations`),Wt(e.src,l=vs)||B(e,"src",l),B(e,"alt","A logo representing a train")},m(n,s){$(n,e,s),$(n,t,s)},p:x,d(n){n&&(p(e),p(t))}}}function ac(r){let e;return{c(){e=v("railway station")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function fc(r){let e;return{c(){e=v(`National Rail
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function uc(r){let e,l,t,n,s,o,u,a,i,f,c,m;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[ac]},$$scope:{ctx:r}}}),a=new K({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[fc]},$$scope:{ctx:r}}}),c=new xe({}),{c(){e=L("p"),l=v("This shows "),h(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=T(),o=L("p"),u=v("Icon from "),h(a.$$.fragment),i=v(". (Note that not all stations shown are National Rail.)"),f=T(),h(c.$$.fragment)},m(_,y){$(_,e,y),w(e,l),b(t,e,null),w(e,n),$(_,s,y),$(_,o,y),w(o,u),b(a,o,null),w(o,i),$(_,f,y),b(c,_,y),m=!0},p(_,y){const S={};y&16&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const C={};y&16&&(C.$$scope={dirty:y,ctx:_}),a.$set(C)},i(_){m||(g(t.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(a.$$.fragment,_),d(c.$$.fragment,_),m=!1},d(_){_&&(p(e),p(s),p(o),p(f)),k(t),k(a),k(c,_)}}}function cc(r){let e,l,t;return l=new ue({props:{$$slots:{default:[uc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function $c(r){let e,l=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&z(t,l)},d(n){n&&p(e)}}}function pc(r){let e,l;return e=new oe({props:{$$slots:{default:[$c,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function mc(r){let e,l;const t=[H(Jt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[pc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new fn({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&re(H(Jt)),o&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function _c(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[cc],default:[ic]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),E.push(()=>U(e,"checked",o)),n=new dt({props:{data:`${$e()}/v1/${Jt}.geojson`,$$slots:{default:[mc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}let Jt="railway_stations";function gc(r,e,l){let t,n=he(Jt);Y(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class dc extends V{constructor(e){super(),Q(this,e,gc,_c,J,{})}}function hc(r){let e;return{c(){e=v("sports pitches")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function bc(r){let e;return{c(){e=v("sports centres")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function kc(r){let e,l,t,n,s,o,u,a,i;return t=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[hc]},$$scope:{ctx:r}}}),s=new K({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[bc]},$$scope:{ctx:r}}}),a=new xe({}),{c(){e=L("p"),l=v("This shows "),h(t.$$.fragment),n=v(" and "),h(s.$$.fragment),o=v(" data from OpenStreetMap (as of 9 August 2023)."),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),w(e,l),b(t,e,null),w(e,n),b(s,e,null),w(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){i||(g(t.$$.fragment,f),g(s.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),k(t),k(s),k(a,f)}}}function wc(r){let e,l;return e=new _s({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[kc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}class vc extends V{constructor(e){super(),Q(this,e,null,wc,J,{})}}function yc(r){let e;return{c(){e=v("Stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Sc(r){let e;return{c(){e=v("DfT stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Cc(r){let e;return{c(){e=v("documented by DfT")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Lc(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y,S,C,N,A,R,P,M,I,D;return t=new K({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Sc]},$$scope:{ctx:r}}}),N=new K({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),I=new Ie({}),{c(){e=L("p"),l=v("This layer shows collisions recorded in the "),h(t.$$.fragment),n=v(" dataset. Please note these limitations:"),s=T(),o=L("ul"),u=L("li"),u.textContent="Only collisions between 2017 and 2022 are included",a=T(),i=L("li"),i.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=T(),c=L("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,m=T(),_=L("li"),_.textContent='The "pedestrians" category also include mobility scooters',y=T(),S=L("li"),C=v("All limitations "),h(N.$$.fragment),A=v(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),R=T(),P=L("p"),P.textContent="You can click a point to open the full report, thanks to CycleStreets.",M=T(),h(I.$$.fragment)},m(O,j){$(O,e,j),w(e,l),b(t,e,null),w(e,n),$(O,s,j),$(O,o,j),w(o,u),w(o,a),w(o,i),w(o,f),w(o,c),w(o,m),w(o,_),w(o,y),w(o,S),w(S,C),b(N,S,null),w(S,A),$(O,R,j),$(O,P,j),$(O,M,j),b(I,O,j),D=!0},p(O,j){const ne={};j&4194304&&(ne.$$scope={dirty:j,ctx:O}),t.$set(ne);const ie={};j&4194304&&(ie.$$scope={dirty:j,ctx:O}),N.$set(ie)},i(O){D||(g(t.$$.fragment,O),g(N.$$.fragment,O),g(I.$$.fragment,O),D=!0)},o(O){d(t.$$.fragment,O),d(N.$$.fragment,O),d(I.$$.fragment,O),D=!1},d(O){O&&(p(e),p(s),p(o),p(R),p(P),p(M)),k(t),k(N),k(I,O)}}}function Tc(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&4194304&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Sl(r){let e,l,t,n,s,o,u,a,i,f,c,m,_;return l=new lt({props:{small:!0,$$slots:{default:[Ic]},$$scope:{ctx:r}}}),f=new Zt({props:{rows:r[9]}}),{c(){e=L("div"),h(l.$$.fragment),t=T(),n=L("div"),s=v(`Filter years:
      `),o=L("input"),u=v(`
      -
      `),a=L("input"),i=T(),h(f.$$.fragment),B(o,"type","number"),B(o,"min",2017),B(o,"max",2022),B(o,"class","svelte-1ft65rw"),B(a,"type","number"),B(a,"min",2017),B(a,"max",2022),B(a,"class","svelte-1ft65rw"),pe(e,"border","1px solid black"),pe(e,"padding","8px")},m(y,S){$(y,e,S),b(l,e,null),w(e,t),w(e,n),w(n,s),w(n,o),Ze(o,r[0].minYear),w(n,u),w(n,a),Ze(a,r[0].maxYear),w(e,i),b(f,e,null),c=!0,m||(_=[tt(o,"input",r[15]),tt(a,"input",r[16])],m=!0)},p(y,S){const C={};S&4194305&&(C.$$scope={dirty:S,ctx:y}),l.$set(C),S&1&&Gt(o.value)!==y[0].minYear&&Ze(o,y[0].minYear),S&1&&Gt(a.value)!==y[0].maxYear&&Ze(a,y[0].maxYear)},i(y){c||(g(l.$$.fragment,y),g(f.$$.fragment,y),c=!0)},o(y){d(l.$$.fragment,y),d(f.$$.fragment,y),c=!1},d(y){y&&p(e),k(l),k(f),m=!1,$s(_)}}}function Mc(r){let e;return{c(){e=v("Pedestrians")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Nc(r){let e;return{c(){e=v("Cyclists")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Pc(r){let e;return{c(){e=v("Horse riders")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Oc(r){let e;return{c(){e=v("Other")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ic(r){let e,l,t,n,s,o,u,a,i,f,c,m;function _(M){r[11](M)}let y={$$slots:{default:[Mc]},$$scope:{ctx:r}};r[0].pedestrians!==void 0&&(y.checked=r[0].pedestrians),e=new le({props:y}),E.push(()=>U(e,"checked",_));function S(M){r[12](M)}let C={$$slots:{default:[Nc]},$$scope:{ctx:r}};r[0].cyclists!==void 0&&(C.checked=r[0].cyclists),n=new le({props:C}),E.push(()=>U(n,"checked",S));function N(M){r[13](M)}let A={$$slots:{default:[Pc]},$$scope:{ctx:r}};r[0].horseRiders!==void 0&&(A.checked=r[0].horseRiders),u=new le({props:A}),E.push(()=>U(u,"checked",N));function R(M){r[14](M)}let P={$$slots:{default:[Oc]},$$scope:{ctx:r}};return r[0].other!==void 0&&(P.checked=r[0].other),f=new le({props:P}),E.push(()=>U(f,"checked",R)),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),o=T(),h(u.$$.fragment),i=T(),h(f.$$.fragment)},m(M,I){b(e,M,I),$(M,t,I),b(n,M,I),$(M,o,I),b(u,M,I),$(M,i,I),b(f,M,I),m=!0},p(M,I){const D={};I&4194304&&(D.$$scope={dirty:I,ctx:M}),!l&&I&1&&(l=!0,D.checked=M[0].pedestrians,W(()=>l=!1)),e.$set(D);const O={};I&4194304&&(O.$$scope={dirty:I,ctx:M}),!s&&I&1&&(s=!0,O.checked=M[0].cyclists,W(()=>s=!1)),n.$set(O);const j={};I&4194304&&(j.$$scope={dirty:I,ctx:M}),!a&&I&1&&(a=!0,j.checked=M[0].horseRiders,W(()=>a=!1)),u.$set(j);const ne={};I&4194304&&(ne.$$scope={dirty:I,ctx:M}),!c&&I&1&&(c=!0,ne.checked=M[0].other,W(()=>c=!1)),f.$set(ne)},i(M){m||(g(e.$$.fragment,M),g(n.$$.fragment,M),g(u.$$.fragment,M),g(f.$$.fragment,M),m=!0)},o(M){d(e.$$.fragment,M),d(n.$$.fragment,M),d(u.$$.fragment,M),d(f.$$.fragment,M),m=!1},d(M){M&&(p(t),p(o),p(i)),k(e,M),k(n,M),k(u,M),k(f,M)}}}function Cl(r){let e,l,t,n=r[3][r[21].pedestrian_location]+"",s;return{c(){e=L("p"),l=v("Pedestrian location: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&2097152&&n!==(n=o[3][o[21].pedestrian_location]+"")&&z(s,n)},d(o){o&&p(e)}}}function Ll(r){let e,l,t,n=r[4][r[21].pedestrian_movement]+"",s;return{c(){e=L("p"),l=v("Pedestrian movement: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&2097152&&n!==(n=o[4][o[21].pedestrian_movement]+"")&&z(s,n)},d(o){o&&p(e)}}}function Rc(r){let e,l,t,n=r[21].year+"",s,o,u,a,i,f=r[5][r[21].severity]+"",c,m,_,y,S,C=Tl(r[21])+"",N,A,R,P,M,I=r[21].pedestrian_location&&Cl(r),D=r[21].pedestrian_movement&&Ll(r);return{c(){e=L("p"),l=v("Year: "),t=L("b"),s=v(n),o=T(),u=L("p"),a=v("Severity: "),i=L("b"),c=v(f),m=T(),_=L("p"),y=v("Casualties: "),S=L("b"),N=v(C),A=T(),I&&I.c(),R=T(),D&&D.c(),P=T(),M=L("p"),M.textContent="Click to open full report in CycleStreets"},m(O,j){$(O,e,j),w(e,l),w(e,t),w(t,s),$(O,o,j),$(O,u,j),w(u,a),w(u,i),w(i,c),$(O,m,j),$(O,_,j),w(_,y),w(_,S),w(S,N),$(O,A,j),I&&I.m(O,j),$(O,R,j),D&&D.m(O,j),$(O,P,j),$(O,M,j)},p(O,j){j&2097152&&n!==(n=O[21].year+"")&&z(s,n),j&2097152&&f!==(f=O[5][O[21].severity]+"")&&z(c,f),j&2097152&&C!==(C=Tl(O[21])+"")&&z(N,C),O[21].pedestrian_location?I?I.p(O,j):(I=Cl(O),I.c(),I.m(R.parentNode,R)):I&&(I.d(1),I=null),O[21].pedestrian_movement?D?D.p(O,j):(D=Ll(O),D.c(),D.m(P.parentNode,P)):D&&(D.d(1),D=null)},d(O){O&&(p(e),p(o),p(u),p(m),p(_),p(A),p(R),p(P),p(M)),I&&I.d(O),D&&D.d(O)}}}function Dc(r){let e,l;return e=new oe({props:{$$slots:{default:[Rc,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&6291456&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ac(r){let e,l;const t=[H(qt),{sourceLayer:qt},{paint:{"circle-color":de(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[1]},{layout:{visibility:r[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Dc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new _t({props:n}),e.$on("click",zc),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&451?te(t,[o&0&&re(H(qt)),o&0&&{sourceLayer:qt},o&448&&{paint:{"circle-color":de(["get","severity"],[1,2,3],[s[6],s[7],s[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&2&&{filter:s[1]},o&1&&{layout:{visibility:s[0].show?"visible":"none"}},t[5],t[6]]):{};o&4194304&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function qc(r){let e,l,t,n,s,o;function u(f){r[10](f)}let a={$$slots:{right:[Tc],default:[yc]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0].show&&Sl(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${qt}.pmtiles`,$$slots:{default:[Ac]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&4194304&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&g(i,1)):(i=Sl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&4194307&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let qt="stats19";function Fc(r){let[e,l,t]=r.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Tl(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function zc(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function jc(r,e,l){let t,n,s=["pedestrians","cyclists","horseRiders","other"],o={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function u(O){return O.show?`${s.filter(ne=>O[ne]).join(",")}/${O.minYear}/${O.maxYear}`:null}let a=ht(qt,o,u,Fc);Y(r,a,O=>l(0,n=O));function i(O,j,ne,ie,F,q){let G=["any"];return n.pedestrians&&G.push(["get","pedestrian"]),n.cyclists&&G.push(["get","cyclist"]),n.horseRiders&&G.push(["get","horse_rider"]),n.other&&G.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],G]}let f={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},m={1:"Fatal",2:"Serious",3:"Slight"},_=Z.sequential_low_to_high[4],y=Z.sequential_low_to_high[2],S=Z.sequential_low_to_high[0],C=[["Fatal",_],["Serious",y],["Slight",S]];function N(O){r.$$.not_equal(n.show,O)&&(n.show=O,a.set(n))}function A(O){r.$$.not_equal(n.pedestrians,O)&&(n.pedestrians=O,a.set(n))}function R(O){r.$$.not_equal(n.cyclists,O)&&(n.cyclists=O,a.set(n))}function P(O){r.$$.not_equal(n.horseRiders,O)&&(n.horseRiders=O,a.set(n))}function M(O){r.$$.not_equal(n.other,O)&&(n.other=O,a.set(n))}function I(){n.minYear=Gt(this.value),a.set(n)}function D(){n.maxYear=Gt(this.value),a.set(n)}return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=i(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,a,f,c,m,_,y,S,C,N,A,R,P,M,I,D]}class Hc extends V{constructor(e){super(),Q(this,e,jc,qc,J,{})}}function Bc(r){let e;return{c(){e=v("Vehicle counts")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Gc(r){let e;return{c(){e=v(`DfT road statistics
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ec(r){let e;return{c(){e=v("methodology")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Uc(r){let e,l,t,n,s,o,u,a,i,f,c;return t=new K({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Gc]},$$scope:{ctx:r}}}),s=new K({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Ec]},$$scope:{ctx:r}}}),f=new Ie({}),{c(){e=L("p"),l=v("AADF (annual average daily flow) data from "),h(t.$$.fragment),n=v(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),h(s.$$.fragment),o=v(" for details and caveats about the measurements."),u=T(),a=L("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,i=T(),h(f.$$.fragment)},m(m,_){$(m,e,_),w(e,l),b(t,e,null),w(e,n),b(s,e,null),w(e,o),$(m,u,_),$(m,a,_),$(m,i,_),b(f,m,_),c=!0},p(m,_){const y={};_&128&&(y.$$scope={dirty:_,ctx:m}),t.$set(y);const S={};_&128&&(S.$$scope={dirty:_,ctx:m}),s.$set(S)},i(m){c||(g(t.$$.fragment,m),g(s.$$.fragment,m),g(f.$$.fragment,m),c=!0)},o(m){d(t.$$.fragment,m),d(s.$$.fragment,m),d(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(u),p(a),p(i)),k(t),k(s),k(f,m)}}}function Wc(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Uc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&128&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Ml(r){let e,l;return e=new He({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Yc(r){let e,l=r[6].location+"",t,n,s,o,u=r[6].year+"",a,i,f,c=r[6].motor_vehicles.toLocaleString()+"",m,_,y,S,C=r[6].year+"",N,A,R,P=r[6].pedal_cycles.toLocaleString()+"",M,I,D,O,j,ne=r[6].method+"",ie;return{c(){e=L("h2"),t=v(l),n=T(),s=L("p"),o=v("Total motor vehicles ("),a=v(u),i=v(` AADF):
        `),f=L("b"),m=v(c),_=T(),y=L("p"),S=v("Total pedal cycles ("),N=v(C),A=v(` AADF):
        `),R=L("b"),M=v(P),I=T(),D=L("p"),O=v("Count method: "),j=L("b"),ie=v(ne)},m(F,q){$(F,e,q),w(e,t),$(F,n,q),$(F,s,q),w(s,o),w(s,a),w(s,i),w(s,f),w(f,m),$(F,_,q),$(F,y,q),w(y,S),w(y,N),w(y,A),w(y,R),w(R,M),$(F,I,q),$(F,D,q),w(D,O),w(D,j),w(j,ie)},p(F,q){q&64&&l!==(l=F[6].location+"")&&z(t,l),q&64&&u!==(u=F[6].year+"")&&z(a,u),q&64&&c!==(c=F[6].motor_vehicles.toLocaleString()+"")&&z(m,c),q&64&&C!==(C=F[6].year+"")&&z(N,C),q&64&&P!==(P=F[6].pedal_cycles.toLocaleString()+"")&&z(M,P),q&64&&ne!==(ne=F[6].method+"")&&z(ie,ne)},d(F){F&&(p(e),p(n),p(s),p(_),p(y),p(I),p(D))}}}function Jc(r){let e,l;return e=new oe({props:{$$slots:{default:[Yc,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Vc(r){let e,l;const t=[H(Ft),{sourceLayer:Ft},{paint:{"circle-color":de(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Jc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new _t({props:n}),e.$on("click",Zc),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&re(H(Ft)),o&0&&{sourceLayer:Ft},o&6&&{paint:{"circle-color":de(["get","motor_vehicles"],s[2],s[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&128&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Qc(r){let e,l,t,n,s,o;function u(f){r[5](f)}let a={$$slots:{right:[Wc],default:[Bc]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&Ml(r);return s=new me({props:{url:`pmtiles://${$e()}/v1/${Ft}.pmtiles`,$$slots:{default:[Vc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&128&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=Ml(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&129&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let Ft="vehicle_counts";function Zc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Kc(r,e,l){let t,n=Z.sequential_low_to_high,s=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],u=he(Ft);Y(r,u,i=>l(0,t=i));function a(i){t=i,u.set(t)}return[t,n,s,o,u,a]}class Xc extends V{constructor(e){super(),Q(this,e,Kc,Qc,J,{})}}function Nl(r,e,l){const t=r.slice();return t[6]=e[l],t}function xc(r){let e;return{c(){e=v("Issues & Conflicts")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function e$(r){let e,l,t;return{c(){e=L("p"),e.textContent=`Critical issues and policy conflicts from the Design Assistance Log.
        This is internally collected data.`,l=T(),t=L("p"),t.textContent=`This layer is manually copied from a copy of the DA Log. The data is
        recent as of 10 June 2024.`},m(n,s){$(n,e,s),$(n,l,s),$(n,t,s)},p:x,d(n){n&&(p(e),p(l),p(t))}}}function t$(r){let e,l,t;return l=new ue({props:{$$slots:{default:[e$]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Pl(r){let e,l;return e=new Zt({props:{rows:r[3]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function n$(r){let e,l=r[5]["Issue ID"]+"",t,n,s=r[5].Code+"",o,u,a,i=r[5]["Issue Stage"]+"",f;return{c(){e=L("h2"),t=v(l),n=v(" - "),o=v(s),u=T(),a=L("p"),f=v(i)},m(c,m){$(c,e,m),w(e,t),w(e,n),w(e,o),$(c,u,m),$(c,a,m),w(a,f)},p(c,m){m&32&&l!==(l=c[5]["Issue ID"]+"")&&z(t,l),m&32&&s!==(s=c[5].Code+"")&&z(o,s),m&32&&i!==(i=c[5]["Issue Stage"]+"")&&z(f,i)},d(c){c&&(p(e),p(u),p(a))}}}function Ol(r){let e,l=r[6]+"",t,n,s,o=r[5][r[6]]+"",u,a;return{c(){e=L("p"),t=v(l),n=v(`:
            `),s=L("b"),u=v(o),a=T()},m(i,f){$(i,e,f),w(e,t),w(e,n),w(e,s),w(s,u),w(e,a)},p(i,f){f&32&&o!==(o=i[5][i[6]]+"")&&z(u,o)},d(i){i&&p(e)}}}function l$(r){let e,l=Pe(r[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Ol(Nl(r,l,n));return{c(){e=L("div");for(let n=0;n<t.length;n+=1)t[n].c();pe(e,"max-width","30vw"),pe(e,"max-height","60vh"),pe(e,"overflow","auto")},m(n,s){$(n,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,s){if(s&36){l=Pe(n[2]);let o;for(o=0;o<l.length;o+=1){const u=Nl(n,l,o);t[o]?t[o].p(u,s):(t[o]=Ol(u),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&p(e),rt(t,n)}}}function s$(r){let e,l,t,n;return e=new oe({props:{openOn:"hover",$$slots:{default:[n$,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[l$,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&544&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&544&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function r$(r){let e,l;const t=[H(ln),{paint:{"circle-color":Xe(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[s$]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new _t({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&9?te(t,[o&0&&re(H(ln)),o&8&&{paint:{"circle-color":Xe(["get","Design Review Status"],Object.fromEntries(s[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[3],t[4]]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function o$(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[t$],default:[xc]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new le({props:a}),E.push(()=>U(e,"checked",u));let i=r[0]&&Pl(r);return s=new dt({props:{data:`${Et()}/v1/problems.geojson.gz`,$$slots:{default:[r$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&512&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=Pl(f),i.c(),g(i,1),i.m(n.parentNode,n)):i&&(ae(),d(i,1,1,()=>{i=null}),fe());const _={};c&513&&(_.$$scope={dirty:c,ctx:f}),s.$set(_)},i(f){o||(g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),k(e,f),i&&i.d(f),k(s,f)}}}let ln="problems";function i$(r,e,l){let t,n=he(ln);Y(r,n,a=>l(0,t=a));let s=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],o=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function u(a){t=a,n.set(t)}return[t,n,s,o,u]}class a$ extends V{constructor(e){super(),Q(this,e,i$,o$,J,{})}}function f$(r){let e;function l(s,o){return s[2]<=100?$$:c$}let t=l(r),n=t(r);return{c(){n.c(),e=ve()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},i:x,o:x,d(s){s&&p(e),n.d(s)}}}function u$(r){let e,l;return e=new nt({props:{$$slots:{default:[p$]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function c$(r){let e;return{c(){e=L("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){$(l,e,t)},p:x,d(l){l&&p(e)}}}function $$(r){let e,l,t;return{c(){e=L("label"),l=v(`Downloading scheme data
      `),t=L("progress"),t.value=r[2],B(t,"class","svelte-q3473n")},m(n,s){$(n,e,s),w(e,l),w(e,t)},p(n,s){s&4&&(t.value=n[2])},d(n){n&&p(e)}}}function p$(r){let e;return{c(){e=v("Load latest scheme data")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function m$(r){let e,l,t,n;const s=[u$,f$],o=[];function u(a,i){return a[0]?a[1]?1:-1:0}return~(e=u(r))&&(l=o[e]=s[e](r)),{c(){l&&l.c(),t=ve()},m(a,i){~e&&o[e].m(a,i),$(a,t,i),n=!0},p(a,[i]){let f=e;e=u(a),e===f?~e&&o[e].p(a,i):(l&&(ae(),d(o[f],1,1,()=>{o[f]=null}),fe()),~e?(l=o[e],l?l.p(a,i):(l=o[e]=s[e](a),l.c()),g(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(g(l),n=!0)},o(a){d(l),n=!1},d(a){a&&p(t),~e&&o[e].d(a)}}}function _$(r,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),s=!0,o=0;async function u(){let i=await ys(`${Et()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,o=c)});l(2,o=100);let f=new TextDecoder().decode(i);t("all_schemes_output.geojson",f),l(1,s=!1)}on(async()=>{n&&await u()});async function a(){l(0,n=!0),await u()}return r.$$set=i=>{"loadFile"in i&&l(4,t=i.loadFile)},[n,s,o,a,t]}class g$ extends V{constructor(e){super(),Q(this,e,_$,m$,J,{loadFile:4})}}function d$(r){return Xe(["get","intervention_type"],{area:Ke.area,route:Ke.route,crossing:Ke.crossing,other:Ke.other},"white")}function h$(r){return[["Areas",Ke.area],["Routes",Ke.route],["Crossings",Ke.crossing],["Other",Ke.other]]}function b$(r){let e,l;return e=new Zt({props:{rows:r[1]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&2&&(s.rows=t[1]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function k$(r){let e,l,t,n,s;function o(a){r[3](a)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new ft({props:u}),E.push(()=>U(e,"value",o)),e.$on("change",r[2]),n=new Ge({props:{label:"Legend",$$slots:{default:[b$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};!l&&i&1&&(l=!0,f.value=a[0],W(()=>l=!1)),e.$set(f);const c={};i&66&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}function w$(r,e,l){let t;Y(r,Qt,i=>l(4,t=i));let n="fundingProgramme",[s,o]=nn();function u(){let i;n=="interventionType"?(i=d$(),l(1,o=h$())):n=="fundingProgramme"?l(1,[i,o]=nn(),o):n=="currentMilestone"&&l(1,[i,o]=wr(),o),t.setPaintProperty("interventions-points","circle-color",i),t.setPaintProperty("interventions-lines","line-color",i),t.setPaintProperty("interventions-polygons","fill-color",i),t.setPaintProperty("interventions-polygons-outlines","line-color",i)}function a(i){n=i,l(0,n)}return[n,o,u,a]}class v$ extends V{constructor(e){super(),Q(this,e,w$,k$,J,{})}}const gt=it({type:"FeatureCollection",features:[],schemes:{}}),Vt=it(new Map),Il=it(!0),Ht=it(""),Bt=it("");let sn=it(null);function y$(r){let e,l=r[0].size.toLocaleString()+"",t,n,s=r[11].route.toLocaleString()+"",o,u,a=r[11].area.toLocaleString()+"",i,f,c=r[11].crossing.toLocaleString()+"",m,_,y=r[11].other.toLocaleString()+"",S,C,N=Rl(r[11].totalLength).toFixed(1)+"",A,R;return{c(){e=v("Showing "),t=v(l),n=v(" schemes ("),o=v(s),u=v(`
    routes, `),i=v(a),f=v(` areas,
    `),m=v(c),_=v(" crossings, "),S=v(y),C=v(`
    other, with total LineString length of `),A=v(N),R=v(" miles)")},m(P,M){$(P,e,M),$(P,t,M),$(P,n,M),$(P,o,M),$(P,u,M),$(P,i,M),$(P,f,M),$(P,m,M),$(P,_,M),$(P,S,M),$(P,C,M),$(P,A,M),$(P,R,M)},p(P,M){M&1&&l!==(l=P[0].size.toLocaleString()+"")&&z(t,l),M&2048&&s!==(s=P[11].route.toLocaleString()+"")&&z(o,s),M&2048&&a!==(a=P[11].area.toLocaleString()+"")&&z(i,a),M&2048&&c!==(c=P[11].crossing.toLocaleString()+"")&&z(m,c),M&2048&&y!==(y=P[11].other.toLocaleString()+"")&&z(S,y),M&2048&&N!==(N=Rl(P[11].totalLength).toFixed(1)+"")&&z(A,N)},d(P){P&&(p(e),p(t),p(n),p(o),p(u),p(i),p(f),p(m),p(_),p(S),p(C),p(A),p(R))}}}function S$(r){let e,l,t;function n(o){r[14](o)}let s={$$slots:{default:[y$]},$$scope:{ctx:r}};return r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),E.push(()=>U(e,"checked",n)),{c(){h(e.$$.fragment)},m(o,u){b(e,o,u),t=!0},p(o,u){const a={};u&134219777&&(a.$$scope={dirty:u,ctx:o}),!l&&u&2&&(l=!0,a.checked=o[1],W(()=>l=!1)),e.$set(a)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){k(e,o)}}}function C$(r){let e;return{c(){e=v("Reset all filters")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function L$(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function T$(r){let e,l,t,n,s,o;return t=new nt({props:{$$slots:{default:[L$]},$$scope:{ctx:r}}}),t.$on("click",r[20]),{c(){e=L("input"),l=T(),h(t.$$.fragment),B(e,"type","text"),B(e,"class","govuk-input govuk-input--width-10"),B(e,"id","filterInterventionText")},m(u,a){$(u,e,a),Ze(e,r[7]),$(u,l,a),b(t,u,a),n=!0,s||(o=tt(e,"input",r[19]),s=!0)},p(u,a){a&128&&e.value!==u[7]&&Ze(e,u[7]);const i={};a&134217728&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){n||(g(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(l)),k(t,u),s=!1,o()}}}function M$(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function N$(r){let e,l,t,n,s,o;return t=new nt({props:{$$slots:{default:[M$]},$$scope:{ctx:r}}}),t.$on("click",r[22]),{c(){e=L("input"),l=T(),h(t.$$.fragment),B(e,"type","text"),B(e,"class","govuk-input govuk-input--width-10"),B(e,"id","filterSchemeText")},m(u,a){$(u,e,a),Ze(e,r[6]),$(u,l,a),b(t,u,a),n=!0,s||(o=tt(e,"input",r[21]),s=!0)},p(u,a){a&64&&e.value!==u[6]&&Ze(e,u[6]);const i={};a&134217728&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){n||(g(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(l)),k(t,u),s=!1,o()}}}function P$(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y,S,C,N,A,R,P;e=new nt({props:{$$slots:{default:[C$]},$$scope:{ctx:r}}}),e.$on("click",r[13]);function M(q){r[15](q)}let I={label:"Authority or region",choices:r[8],emptyOption:!0};r[2]!==void 0&&(I.value=r[2]),t=new ft({props:I}),E.push(()=>U(t,"value",M));function D(q){r[16](q)}let O={label:"Funding programme",choices:r[9],emptyOption:!0};r[3]!==void 0&&(O.value=r[3]),o=new ft({props:O}),E.push(()=>U(o,"value",D));function j(q){r[17](q)}let ne={label:"Current milestone",choices:r[10],emptyOption:!0};r[4]!==void 0&&(ne.value=r[4]),i=new ft({props:ne}),E.push(()=>U(i,"value",j));function ie(q){r[18](q)}let F={label:"Sketch source",choices:r[12],emptyOption:!0};return r[5]!==void 0&&(F.value=r[5]),m=new ft({props:F}),E.push(()=>U(m,"value",ie)),S=new yn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[T$]},$$scope:{ctx:r}}}),N=new yn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[N$]},$$scope:{ctx:r}}}),R=new v$({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),s=T(),h(o.$$.fragment),a=T(),h(i.$$.fragment),c=T(),h(m.$$.fragment),y=T(),h(S.$$.fragment),C=T(),h(N.$$.fragment),A=T(),h(R.$$.fragment)},m(q,G){b(e,q,G),$(q,l,G),b(t,q,G),$(q,s,G),b(o,q,G),$(q,a,G),b(i,q,G),$(q,c,G),b(m,q,G),$(q,y,G),b(S,q,G),$(q,C,G),b(N,q,G),$(q,A,G),b(R,q,G),P=!0},p(q,G){const Re={};G&134217728&&(Re.$$scope={dirty:G,ctx:q}),e.$set(Re);const De={};G&256&&(De.choices=q[8]),!n&&G&4&&(n=!0,De.value=q[2],W(()=>n=!1)),t.$set(De);const Ae={};G&512&&(Ae.choices=q[9]),!u&&G&8&&(u=!0,Ae.value=q[3],W(()=>u=!1)),o.$set(Ae);const ye={};G&1024&&(ye.choices=q[10]),!f&&G&16&&(f=!0,ye.value=q[4],W(()=>f=!1)),i.$set(ye);const Fe={};!_&&G&32&&(_=!0,Fe.value=q[5],W(()=>_=!1)),m.$set(Fe);const _e={};G&134217856&&(_e.$$scope={dirty:G,ctx:q}),S.$set(_e);const Be={};G&134217792&&(Be.$$scope={dirty:G,ctx:q}),N.$set(Be)},i(q){P||(g(e.$$.fragment,q),g(t.$$.fragment,q),g(o.$$.fragment,q),g(i.$$.fragment,q),g(m.$$.fragment,q),g(S.$$.fragment,q),g(N.$$.fragment,q),g(R.$$.fragment,q),P=!0)},o(q){d(e.$$.fragment,q),d(t.$$.fragment,q),d(o.$$.fragment,q),d(i.$$.fragment,q),d(m.$$.fragment,q),d(S.$$.fragment,q),d(N.$$.fragment,q),d(R.$$.fragment,q),P=!1},d(q){q&&(p(l),p(s),p(a),p(c),p(y),p(C),p(A)),k(e,q),k(t,q),k(o,q),k(i,q),k(m,q),k(S,q),k(N,q),k(R,q)}}}function O$(r){let e,l,t,n;return e=new lt({props:{small:!0,$$slots:{default:[S$]},$$scope:{ctx:r}}}),t=new Ge({props:{label:"Filters",$$slots:{default:[P$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,[o]){const u={};o&134219779&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&134219772&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function Rl(r){return r*621371e-9}function I$(r,e,l){let t,n,s,o;Y(r,Bt,G=>l(6,t=G)),Y(r,Ht,G=>l(7,n=G)),Y(r,gt,G=>l(23,s=G)),Y(r,Vt,G=>l(24,o=G));let{schemesToBeShown:u=new Set}=e,{show:a=!0}=e,i=[],f="",c=[],m=new Set(tn.slice(0,-1)),_="",y=[],S="",C=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],N="",A={area:0,route:0,crossing:0,other:0,totalLength:0};on(()=>{var Ae,ye,Fe;let G=new Set,Re=new Set,De=new Set;for(let _e of o.values())(Ae=_e.browse)!=null&&Ae.authority_or_region&&G.add(_e.browse.authority_or_region),(ye=_e.browse)!=null&&ye.funding_programme&&Re.add(_e.browse.funding_programme),(Fe=_e.browse)!=null&&Fe.current_milestone&&De.add(_e.browse.current_milestone);l(8,i=Array.from(G.entries())),i.sort(),l(9,c=tn.map(_e=>[_e,_e])),l(10,y=Array.from(De.entries())),y.sort()});function R(G,Re,De,Ae,ye,Fe){let _e=Re.toLowerCase(),Be=De.toLowerCase(),zt=ke=>{var qe,Me,Se,Ce,be,Le,Te;if(_e&&!((qe=ke.properties.name)!=null&&qe.toLowerCase().includes(_e))&&!((Me=ke.properties.description)!=null&&Me.toLowerCase().includes(_e)))return!1;if(G||Be||Ae||ye||Fe){let ce=o.get(ke.properties.scheme_reference);if(Ae&&((Se=ce.browse)==null?void 0:Se.authority_or_region)!=Ae||ye&&ye!=="Other"&&((Ce=ce.browse)==null?void 0:Ce.funding_programme)!=ye||ye==="Other"&&m.has(((be=ce.browse)==null?void 0:be.funding_programme)??"")||Fe&&((Le=ce.browse)==null?void 0:Le.current_milestone)!=Fe||Be&&!ce.scheme_reference.toLowerCase().includes(Be)&&!(ce.scheme_name??"").toLowerCase().includes(Be)||G&&G!=="Both"&&G!==((Te=ce.browse)==null?void 0:Te.sketch_source))return!1}return!0};l(0,u=new Set(s.features.filter(zt).map(ke=>ke.properties.scheme_reference))),l(11,A={area:0,route:0,crossing:0,other:0,totalLength:0});let Ee=ke=>{var qe,Me;return!(!u.has(ke.properties.scheme_reference)||_e&&!((qe=ke.properties.name)!=null&&qe.toLowerCase().includes(_e))&&!((Me=ke.properties.description)!=null&&Me.toLowerCase().includes(_e)))};for(let ke of s.features)Ee(ke)?(delete ke.properties.hide_while_editing,l(11,A[ke.properties.intervention_type]++,A),ke.geometry.type=="LineString"&&ke.properties.length_meters&&l(11,A.totalLength+=ke.properties.length_meters,A)):ke.properties.hide_while_editing=!0;gt.set(s),l(11,A)}function P(){l(5,N=""),l(2,f=""),l(3,_=""),l(4,S=""),Ne(Ht,n="",n),Ne(Bt,t="",t)}function M(G){a=G,l(1,a)}function I(G){f=G,l(2,f)}function D(G){_=G,l(3,_)}function O(G){S=G,l(4,S)}function j(G){N=G,l(5,N)}function ne(){n=this.value,Ht.set(n)}const ie=()=>Ne(Ht,n="",n);function F(){t=this.value,Bt.set(t)}const q=()=>Ne(Bt,t="",t);return r.$$set=G=>{"schemesToBeShown"in G&&l(0,u=G.schemesToBeShown),"show"in G&&l(1,a=G.show)},r.$$.update=()=>{r.$$.dirty&252&&R(N,n,t,f,_,S)},[u,a,f,_,S,N,t,n,i,c,y,A,C,P,M,I,D,O,j,ne,ie,F,q]}class R$ extends V{constructor(e){super(),Q(this,e,I$,O$,J,{schemesToBeShown:0,show:1})}}function Dl(r){let e,l,t,n=r[0].status+"",s;return{c(){e=L("p"),l=v("Status: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[0].status+"")&&z(s,n)},d(o){o&&p(e)}}}function Al(r){let e,l,t,n=r[0].timescale+"",s;return{c(){e=L("p"),l=v("Timescale: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[0].timescale+"")&&z(s,n)},d(o){o&&p(e)}}}function ql(r){let e,l,t,n=r[0].timescale_year+"",s;return{c(){e=L("p"),l=v("Estimated completion year: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[0].timescale_year+"")&&z(s,n)},d(o){o&&p(e)}}}function Fl(r){let e,l,t,n=r[0].year_published+"",s;return{c(){e=L("p"),l=v("Scheme most recently published: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[0].year_published+"")&&z(s,n)},d(o){o&&p(e)}}}function zl(r){let e,l,t,n=r[0].year_consulted+"",s;return{c(){e=L("p"),l=v("Scheme most recently consulted on: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[0].year_consulted+"")&&z(s,n)},d(o){o&&p(e)}}}function D$(r){let e,l,t,n,s,o=r[0].status&&Dl(r),u=r[0].timescale&&Al(r),a=r[0].timescale_year&&ql(r),i=r[0].year_published&&Fl(r),f=r[0].year_consulted&&zl(r);return{c(){o&&o.c(),e=T(),u&&u.c(),l=T(),a&&a.c(),t=T(),i&&i.c(),n=T(),f&&f.c(),s=ve()},m(c,m){o&&o.m(c,m),$(c,e,m),u&&u.m(c,m),$(c,l,m),a&&a.m(c,m),$(c,t,m),i&&i.m(c,m),$(c,n,m),f&&f.m(c,m),$(c,s,m)},p(c,[m]){c[0].status?o?o.p(c,m):(o=Dl(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[0].timescale?u?u.p(c,m):(u=Al(c),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),c[0].timescale_year?a?a.p(c,m):(a=ql(c),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),c[0].year_published?i?i.p(c,m):(i=Fl(c),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),c[0].year_consulted?f?f.p(c,m):(f=zl(c),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null)},i:x,o:x,d(c){c&&(p(e),p(l),p(t),p(n),p(s)),o&&o.d(c),u&&u.d(c),a&&a.d(c),i&&i.d(c),f&&f.d(c)}}}function A$(r,e,l){let{props:t}=e;return r.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class gs extends V{constructor(e){super(),Q(this,e,A$,D$,J,{props:0})}}function jl(r){let e,l,t,n=r[0].budget.toLocaleString()+"",s,o;return{c(){e=L("p"),l=v("Cost: "),t=L("b"),s=v(n),o=v(`
    GBP`)},m(u,a){$(u,e,a),w(e,l),w(e,t),w(t,s),w(e,o)},p(u,a){a&1&&n!==(n=u[0].budget.toLocaleString()+"")&&z(s,n)},d(u){u&&p(e)}}}function Hl(r){let e;return{c(){e=L("p"),e.textContent="Development is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Bl(r){let e;return{c(){e=L("p"),e.textContent="Construction is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Gl(r){let e,l,t,n;return{c(){e=L("p"),l=v("Funding sources: "),t=L("b"),n=v(r[1])},m(s,o){$(s,e,o),w(e,l),w(e,t),w(t,n)},p(s,o){o&2&&z(n,s[1])},d(s){s&&p(e)}}}function q$(r){let e,l,t,n,s=r[0].budget&&jl(r),o=r[0].development_funded&&Hl(),u=r[0].construction_funded&&Bl(),a=r[1]&&Gl(r);return{c(){s&&s.c(),e=T(),o&&o.c(),l=T(),u&&u.c(),t=T(),a&&a.c(),n=ve()},m(i,f){s&&s.m(i,f),$(i,e,f),o&&o.m(i,f),$(i,l,f),u&&u.m(i,f),$(i,t,f),a&&a.m(i,f),$(i,n,f)},p(i,[f]){i[0].budget?s?s.p(i,f):(s=jl(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),i[0].development_funded?o||(o=Hl(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),i[0].construction_funded?u||(u=Bl(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),i[1]?a?a.p(i,f):(a=Gl(i),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:x,o:x,d(i){i&&(p(e),p(l),p(t),p(n)),s&&s.d(i),o&&o.d(i),u&&u.d(i),a&&a.d(i)}}}function F$(r){if(!r.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])r.funding_sources[l]&&e.push(l.toUpperCase());return r.funding_sources.other&&e.push(r.funding_sources.other),e.join(", ")}function z$(r,e,l){let t,{props:n}=e;return r.$$set=s=>{"props"in s&&l(0,n=s.props)},r.$$.update=()=>{r.$$.dirty&1&&l(1,t=F$(n))},[n,t]}class ds extends V{constructor(e){super(),Q(this,e,z$,q$,J,{props:0})}}function Kt(r){const e=r.slice(),l=e[1].pipeline;return e[9]=l,e}function Xt(r){const e=r.slice(),l=e[0].pipeline;return e[9]=l,e}function El(r){let e,l,t,n=Cn(r[0].length_meters)+"",s;return{c(){e=L("p"),l=v("Length: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=Cn(o[0].length_meters)+"")&&z(s,n)},d(o){o&&p(e)}}}function Ul(r){let e,l=st(r[0].description,r[2])+"";return{c(){e=L("p")},m(t,n){$(t,e,n),e.innerHTML=l},p(t,n){n&5&&l!==(l=st(t[0].description,t[2])+"")&&(e.innerHTML=l)},d(t){t&&p(e)}}}function Wl(r){let e,l,t,n,s,o,u,a=r[9].atf4_type&&Yl(r),i=r[9].accuracy&&Jl(r),f=r[9].is_alternative&&Vl();return n=new ds({props:{props:r[9]}}),o=new gs({props:{props:r[9]}}),{c(){a&&a.c(),e=T(),i&&i.c(),l=T(),f&&f.c(),t=T(),h(n.$$.fragment),s=T(),h(o.$$.fragment)},m(c,m){a&&a.m(c,m),$(c,e,m),i&&i.m(c,m),$(c,l,m),f&&f.m(c,m),$(c,t,m),b(n,c,m),$(c,s,m),b(o,c,m),u=!0},p(c,m){c[9].atf4_type?a?a.p(c,m):(a=Yl(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[9].accuracy?i?i.p(c,m):(i=Jl(c),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),c[9].is_alternative?f||(f=Vl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const _={};m&1&&(_.props=c[9]),n.$set(_);const y={};m&1&&(y.props=c[9]),o.$set(y)},i(c){u||(g(n.$$.fragment,c),g(o.$$.fragment,c),u=!0)},o(c){d(n.$$.fragment,c),d(o.$$.fragment,c),u=!1},d(c){c&&(p(e),p(l),p(t),p(s)),a&&a.d(c),i&&i.d(c),f&&f.d(c),k(n,c),k(o,c)}}}function Yl(r){let e,l,t,n=r[9].atf4_type+"",s;return{c(){e=L("p"),l=v("ATF4 type: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[9].atf4_type+"")&&z(s,n)},d(o){o&&p(e)}}}function Jl(r){let e,l,t,n=r[9].accuracy+"",s;return{c(){e=L("p"),l=v("Accuracy: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&1&&n!==(n=o[9].accuracy+"")&&z(s,n)},d(o){o&&p(e)}}}function Vl(r){let e;return{c(){e=L("p"),e.textContent="Represents an alternative route"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ql(r){var o;let e,l,t,n=((o=r[1].browse)==null?void 0:o.capital_scheme_id)+"",s;return{c(){e=L("p"),l=v("Capital scheme ID: "),t=L("b"),s=v(n)},m(u,a){$(u,e,a),w(e,l),w(e,t),w(t,s)},p(u,a){var i;a&2&&n!==(n=((i=u[1].browse)==null?void 0:i.capital_scheme_id)+"")&&z(s,n)},d(u){u&&p(e)}}}function Zl(r){var o;let e,l,t,n=((o=r[1].browse)==null?void 0:o.current_milestone)+"",s;return{c(){e=L("p"),l=v("Current milestone: "),t=L("b"),s=v(n)},m(u,a){$(u,e,a),w(e,l),w(e,t),w(t,s)},p(u,a){var i;a&2&&n!==(n=((i=u[1].browse)==null?void 0:i.current_milestone)+"")&&z(s,n)},d(u){u&&p(e)}}}function Kl(r){let e,l,t,n,s,o,u,a=r[9].scheme_type&&Xl(r),i=r[9].atf4_lead_type&&xl(r),f=r[9].scheme_description&&es(r);return n=new ds({props:{props:r[9]}}),o=new gs({props:{props:r[9]}}),{c(){a&&a.c(),e=T(),i&&i.c(),l=T(),f&&f.c(),t=T(),h(n.$$.fragment),s=T(),h(o.$$.fragment)},m(c,m){a&&a.m(c,m),$(c,e,m),i&&i.m(c,m),$(c,l,m),f&&f.m(c,m),$(c,t,m),b(n,c,m),$(c,s,m),b(o,c,m),u=!0},p(c,m){c[9].scheme_type?a?a.p(c,m):(a=Xl(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[9].atf4_lead_type?i?i.p(c,m):(i=xl(c),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),c[9].scheme_description?f?f.p(c,m):(f=es(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const _={};m&2&&(_.props=c[9]),n.$set(_);const y={};m&2&&(y.props=c[9]),o.$set(y)},i(c){u||(g(n.$$.fragment,c),g(o.$$.fragment,c),u=!0)},o(c){d(n.$$.fragment,c),d(o.$$.fragment,c),u=!1},d(c){c&&(p(e),p(l),p(t),p(s)),a&&a.d(c),i&&i.d(c),f&&f.d(c),k(n,c),k(o,c)}}}function Xl(r){let e,l,t,n=r[9].scheme_type+"",s;return{c(){e=L("p"),l=v("Scheme type: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&2&&n!==(n=o[9].scheme_type+"")&&z(s,n)},d(o){o&&p(e)}}}function xl(r){let e,l,t,n=r[9].atf4_lead_type+"",s;return{c(){e=L("p"),l=v("ATF4 lead type: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),w(e,l),w(e,t),w(t,s)},p(o,u){u&2&&n!==(n=o[9].atf4_lead_type+"")&&z(s,n)},d(o){o&&p(e)}}}function es(r){let e,l,t=r[9].scheme_description+"",n;return{c(){e=L("p"),l=v("Descripton: "),n=v(t)},m(s,o){$(s,e,o),w(e,l),w(e,n)},p(s,o){o&2&&t!==(t=s[9].scheme_description+"")&&z(n,t)},d(s){s&&p(e)}}}function j$(r){let e;return{c(){e=v("Zoom to show entire scheme")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function H$(r){let e;return{c(){e=v("Edit a copy of this scheme")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function B$(r){var cn,$n,pn,mn;let e,l,t,n=st(r[0].name,r[2])+"",s,o=r[0].intervention_type+"",u,a,i,f,c,m,_,y,S,C,N,A=st(r[1].scheme_name??"",r[3])+"",R,P,M=st(r[0].scheme_reference,r[3])+"",I,D,O,j,ne,ie=((cn=r[1].browse)==null?void 0:cn.authority_or_region)+"",F,q,G,Re,De,Ae,ye=(($n=r[1].browse)==null?void 0:$n.funding_programme)+"",Fe,_e,Be,zt,Ee,ke,qe,Me,Se=r[0].length_meters&&El(r),Ce=r[0].description&&Ul(r),be=r[0].pipeline&&Wl(Xt(r)),Le=((pn=r[1].browse)==null?void 0:pn.capital_scheme_id)&&Ql(r),Te=((mn=r[1].browse)==null?void 0:mn.current_milestone)&&Zl(r),ce=r[1].pipeline&&Kl(Kt(r));return Ee=new nt({props:{$$slots:{default:[j$]},$$scope:{ctx:r}}}),Ee.$on("click",r[4]),qe=new nt({props:{$$slots:{default:[H$]},$$scope:{ctx:r}}}),qe.$on("click",r[5]),{c(){e=L("div"),l=L("h2"),t=new ut(!1),s=v(" ("),u=v(o),a=v(")"),i=T(),Se&&Se.c(),f=T(),Ce&&Ce.c(),c=T(),be&&be.c(),m=T(),_=L("hr"),y=T(),S=L("p"),C=v("Part of scheme: "),N=new ut(!1),R=v(" ("),P=new ut(!1),I=v(")"),D=T(),O=L("p"),j=v("Authority or region: "),ne=L("b"),F=v(ie),q=T(),Le&&Le.c(),G=T(),Re=L("p"),De=v("Funding programme: "),Ae=L("b"),Fe=v(ye),_e=T(),Te&&Te.c(),Be=T(),ce&&ce.c(),zt=T(),h(Ee.$$.fragment),ke=T(),h(qe.$$.fragment),t.a=s,N.a=R,P.a=I,pe(e,"max-width","30vw"),pe(e,"max-height","60vh"),pe(e,"overflow","auto")},m(se,we){$(se,e,we),w(e,l),t.m(n,l),w(l,s),w(l,u),w(l,a),w(e,i),Se&&Se.m(e,null),w(e,f),Ce&&Ce.m(e,null),w(e,c),be&&be.m(e,null),w(e,m),w(e,_),w(e,y),w(e,S),w(S,C),N.m(A,S),w(S,R),P.m(M,S),w(S,I),w(e,D),w(e,O),w(O,j),w(O,ne),w(ne,F),w(e,q),Le&&Le.m(e,null),w(e,G),w(e,Re),w(Re,De),w(Re,Ae),w(Ae,Fe),w(e,_e),Te&&Te.m(e,null),w(e,Be),ce&&ce.m(e,null),w(e,zt),b(Ee,e,null),w(e,ke),b(qe,e,null),Me=!0},p(se,[we]){var dn,hn,bn,kn;(!Me||we&5)&&n!==(n=st(se[0].name,se[2])+"")&&t.p(n),(!Me||we&1)&&o!==(o=se[0].intervention_type+"")&&z(u,o),se[0].length_meters?Se?Se.p(se,we):(Se=El(se),Se.c(),Se.m(e,f)):Se&&(Se.d(1),Se=null),se[0].description?Ce?Ce.p(se,we):(Ce=Ul(se),Ce.c(),Ce.m(e,c)):Ce&&(Ce.d(1),Ce=null),se[0].pipeline?be?(be.p(Xt(se),we),we&1&&g(be,1)):(be=Wl(Xt(se)),be.c(),g(be,1),be.m(e,m)):be&&(ae(),d(be,1,1,()=>{be=null}),fe()),(!Me||we&10)&&A!==(A=st(se[1].scheme_name??"",se[3])+"")&&N.p(A),(!Me||we&9)&&M!==(M=st(se[0].scheme_reference,se[3])+"")&&P.p(M),(!Me||we&2)&&ie!==(ie=((dn=se[1].browse)==null?void 0:dn.authority_or_region)+"")&&z(F,ie),(hn=se[1].browse)!=null&&hn.capital_scheme_id?Le?Le.p(se,we):(Le=Ql(se),Le.c(),Le.m(e,G)):Le&&(Le.d(1),Le=null),(!Me||we&2)&&ye!==(ye=((bn=se[1].browse)==null?void 0:bn.funding_programme)+"")&&z(Fe,ye),(kn=se[1].browse)!=null&&kn.current_milestone?Te?Te.p(se,we):(Te=Zl(se),Te.c(),Te.m(e,Be)):Te&&(Te.d(1),Te=null),se[1].pipeline?ce?(ce.p(Kt(se),we),we&2&&g(ce,1)):(ce=Kl(Kt(se)),ce.c(),g(ce,1),ce.m(e,zt)):ce&&(ae(),d(ce,1,1,()=>{ce=null}),fe());const _n={};we&1024&&(_n.$$scope={dirty:we,ctx:se}),Ee.$set(_n);const gn={};we&1024&&(gn.$$scope={dirty:we,ctx:se}),qe.$set(gn)},i(se){Me||(g(be),g(ce),g(Ee.$$.fragment,se),g(qe.$$.fragment,se),Me=!0)},o(se){d(be),d(ce),d(Ee.$$.fragment,se),d(qe.$$.fragment,se),Me=!1},d(se){se&&p(e),Se&&Se.d(),Ce&&Ce.d(),be&&be.d(),Le&&Le.d(),Te&&Te.d(),ce&&ce.d(),k(Ee),k(qe)}}}function st(r,e){return e?r.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):r}function G$(r,e,l){let t,n,s,o,u,a;Y(r,gt,m=>l(7,n=m)),Y(r,Qt,m=>l(8,s=m)),Y(r,Vt,m=>l(6,o=m)),Y(r,Ht,m=>l(2,u=m)),Y(r,Bt,m=>l(3,a=m));let{props:i}=e;function f(){let m={type:"FeatureCollection",features:n.features.filter(_=>_.properties.scheme_reference==t.scheme_reference)};s==null||s.fitBounds(Ds(m),{padding:20,animate:!1})}function c(){var y,S;let m={type:"FeatureCollection",features:n.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)},_=((y=t.browse)==null?void 0:y.authority_or_region)||"unknown authority";Ss(_,JSON.stringify(m)),window.open(`scheme.html?authority=${(S=t.browse)==null?void 0:S.authority_or_region}`,"_blank")}return r.$$set=m=>{"props"in m&&l(0,i=m.props)},r.$$.update=()=>{r.$$.dirty&65&&l(1,t=o.get(i.scheme_reference))},[i,t,u,a,f,c,o]}class un extends V{constructor(e){super(),Q(this,e,G$,B$,J,{props:0})}}function E$(r){let e,l=r[6].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&64&&l!==(l=n[6].name+"")&&z(t,l)},d(n){n&&p(e)}}}function U$(r){let e,l;return e=new un({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.props=t[6]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function W$(r){let e,l,t,n;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[E$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[U$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function Y$(r){let e,l=r[6].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&64&&l!==(l=n[6].name+"")&&z(t,l)},d(n){n&&p(e)}}}function J$(r){let e,l;return e=new un({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.props=t[6]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function V$(r){let e,l,t,n;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[Y$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[J$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function Q$(r){let e,l=r[6].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),w(e,t)},p(n,s){s&64&&l!==(l=n[6].name+"")&&z(t,l)},d(n){n&&p(e)}}}function Z$(r){let e,l;return e=new un({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.props=t[6]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function K$(r){let e,l,t,n;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[Q$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Z$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function X$(r){let e,l,t,n,s,o,u,a,i,f;const c=[H("interventions-points"),{filter:["all",Ln,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Tn,"circle-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let m={$$slots:{default:[W$]},$$scope:{ctx:r}};for(let M=0;M<c.length;M+=1)m=ee(m,c[M]);e=new _t({props:m});const _=[H("interventions-lines"),{filter:["all",Mn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":jt,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[V$]},$$scope:{ctx:r}};for(let M=0;M<_.length;M+=1)y=ee(y,_[M]);t=new ge({props:y});const S=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*jt,"circle-opacity":0,"circle-stroke-color":Ke.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let C={};for(let M=0;M<S.length;M+=1)C=ee(C,S[M]);s=new _t({props:C});const N=[H("interventions-polygons"),{filter:["all",Ut,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":X(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let A={$$slots:{default:[K$]},$$scope:{ctx:r}};for(let M=0;M<N.length;M+=1)A=ee(A,N[M]);u=new je({props:A});const R=[H("interventions-polygons-outlines"),{filter:["all",Ut,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*jt}},{layout:{visibility:r[0]?"visible":"none"}}];let P={};for(let M=0;M<R.length;M+=1)P=ee(P,R[M]);return i=new ge({props:P}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment)},m(M,I){b(e,M,I),$(M,l,I),b(t,M,I),$(M,n,I),b(s,M,I),$(M,o,I),b(u,M,I),$(M,a,I),b(i,M,I),f=!0},p(M,I){const D=I&29?te(c,[c[0],I&24&&{filter:["all",Ln,M[3],M[4]]},c[2],c[3],I&4&&{paint:{"circle-color":M[2],"circle-radius":Tn,"circle-opacity":X(1,.5)}},I&1&&{layout:{visibility:M[0]?"visible":"none"}},c[6]]):{};I&128&&(D.$$scope={dirty:I,ctx:M}),e.$set(D);const O=I&13?te(_,[_[0],I&8&&{filter:["all",Mn,M[3]]},_[2],_[3],I&4&&{paint:{"line-color":M[2],"line-width":jt,"line-opacity":X(1,.5)}},I&1&&{layout:{visibility:M[0]?"visible":"none"}},_[6]]):{};I&128&&(O.$$scope={dirty:I,ctx:M}),t.$set(O);const j=I&1?te(S,[S[0],S[1],S[2],{layout:{visibility:M[0]?"visible":"none"}}]):{};s.$set(j);const ne=I&13?te(N,[N[0],I&8&&{filter:["all",Ut,M[3]]},N[2],N[3],I&4&&{paint:{"fill-color":M[2],"fill-opacity":X(.2,.5)}},I&1&&{layout:{visibility:M[0]?"visible":"none"}},N[6]]):{};I&128&&(ne.$$scope={dirty:I,ctx:M}),u.$set(ne);const ie=I&13?te(R,[R[0],I&8&&{filter:["all",Ut,M[3]]},I&4&&{paint:{"line-color":M[2],"line-opacity":.5,"line-width":.7*jt}},I&1&&{layout:{visibility:M[0]?"visible":"none"}}]):{};i.$set(ie)},i(M){f||(g(e.$$.fragment,M),g(t.$$.fragment,M),g(s.$$.fragment,M),g(u.$$.fragment,M),g(i.$$.fragment,M),f=!0)},o(M){d(e.$$.fragment,M),d(t.$$.fragment,M),d(s.$$.fragment,M),d(u.$$.fragment,M),d(i.$$.fragment,M),f=!1},d(M){M&&(p(l),p(n),p(o),p(a)),k(e,M),k(t,M),k(s,M),k(u,M),k(i,M)}}}function x$(r){let e,l;return e=new dt({props:{data:r[1],$$slots:{default:[X$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&2&&(s.data=t[1]),n&129&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ep(r,e,l){let t,n;Y(r,gt,i=>l(5,n=i));let{showSchemes:s}=e,[o]=nn();const u=["!=",["get","hide_while_editing"],!0],a=["!=",["get","endpoint"],!0];return r.$$set=i=>{"showSchemes"in i&&l(0,s=i.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&l(1,t=As(n))},[s,t,o,u,a,n]}class tp extends V{constructor(e){super(),Q(this,e,ep,x$,J,{showSchemes:0})}}function ts(r,e,l){const t=r.slice();return t[11]=e[l],t}function np(r){let e,l;return e=new g$({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ns(r){let e,l,t,n,s;e=new nt({props:{$$slots:{default:[lp]},$$scope:{ctx:r}}}),e.$on("click",r[7]);function o(a){r[8](a)}let u={title:"About this scheme data",$$slots:{default:[sp]},$$scope:{ctx:r}};return r[2]!==void 0&&(u.open=r[2]),t=new os({props:u}),E.push(()=>U(t,"open",o)),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(a,i){b(e,a,i),$(a,l,i),b(t,a,i),s=!0},p(a,i){const f={};i&16384&&(f.$$scope={dirty:i,ctx:a}),e.$set(f);const c={};i&16400&&(c.$$scope={dirty:i,ctx:a}),!n&&i&4&&(n=!0,c.open=a[2],W(()=>n=!1)),t.$set(c)},i(a){s||(g(e.$$.fragment,a),g(t.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),s=!1},d(a){a&&p(l),k(e,a),k(t,a)}}}function lp(r){let e;return{c(){e=v("About the scheme data")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ls(r){let e,l,t=r[11]+"",n;return{c(){e=L("li"),l=L("p"),n=v(t)},m(s,o){$(s,e,o),w(e,l),w(l,n)},p(s,o){o&16&&t!==(t=s[11]+"")&&z(n,t)},d(s){s&&p(e)}}}function sp(r){let e,l,t,n,s=Pe(r[4].notes),o=[];for(let u=0;u<s.length;u+=1)o[u]=ls(ts(r,s,u));return{c(){e=L("div"),l=L("p"),l.textContent="Please note there are data quality caveats for all scheme data:",t=T(),n=L("ul");for(let u=0;u<o.length;u+=1)o[u].c();B(e,"class","govuk-prose")},m(u,a){$(u,e,a),w(e,l),w(e,t),w(e,n);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(n,null)},p(u,a){if(a&16){s=Pe(u[4].notes);let i;for(i=0;i<s.length;i+=1){const f=ts(u,s,i);o[i]?o[i].p(f,a):(o[i]=ls(f),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},d(u){u&&p(e),rt(o,u)}}}function ss(r){let e,l,t,n;function s(a){r[9](a)}function o(a){r[10](a)}let u={};return r[0]!==void 0&&(u.schemesToBeShown=r[0]),r[1]!==void 0&&(u.show=r[1]),e=new R$({props:u}),E.push(()=>U(e,"schemesToBeShown",s)),E.push(()=>U(e,"show",o)),{c(){h(e.$$.fragment)},m(a,i){b(e,a,i),n=!0},p(a,i){const f={};!l&&i&1&&(l=!0,f.schemesToBeShown=a[0],W(()=>l=!1)),!t&&i&2&&(t=!0,f.show=a[1],W(()=>t=!1)),e.$set(f)},i(a){n||(g(e.$$.fragment,a),n=!0)},o(a){d(e.$$.fragment,a),n=!1},d(a){k(e,a)}}}function rp(r){let e=an()=="Private (development)",l,t,n,s,o,u,a,i,f=e&&np(r),c=r[4].notes&&ns(r);n=new Cs({props:{label:"Load schemes from GeoJSON",onLoad:r[6]}}),o=new Ls({props:{errorMessage:r[3]}});let m=r[5].size>0&&ss(r);return{c(){f&&f.c(),l=T(),c&&c.c(),t=T(),h(n.$$.fragment),s=T(),h(o.$$.fragment),u=T(),m&&m.c(),a=ve()},m(_,y){f&&f.m(_,y),$(_,l,y),c&&c.m(_,y),$(_,t,y),b(n,_,y),$(_,s,y),b(o,_,y),$(_,u,y),m&&m.m(_,y),$(_,a,y),i=!0},p(_,y){e&&f.p(_,y),_[4].notes?c?(c.p(_,y),y&16&&g(c,1)):(c=ns(_),c.c(),g(c,1),c.m(t.parentNode,t)):c&&(ae(),d(c,1,1,()=>{c=null}),fe());const S={};y&8&&(S.errorMessage=_[3]),o.$set(S),_[5].size>0?m?(m.p(_,y),y&32&&g(m,1)):(m=ss(_),m.c(),g(m,1),m.m(a.parentNode,a)):m&&(ae(),d(m,1,1,()=>{m=null}),fe())},i(_){i||(g(f),g(c),g(n.$$.fragment,_),g(o.$$.fragment,_),g(m),i=!0)},o(_){d(f),d(c),d(n.$$.fragment,_),d(o.$$.fragment,_),d(m),i=!1},d(_){_&&(p(l),p(t),p(s),p(u),p(a)),f&&f.d(_),c&&c.d(_),k(n,_),k(o,_),m&&m.d(_)}}}function op(r){let e,l,t,n;return e=new Ge({props:{label:"Schemes",$$slots:{default:[rp]},$$scope:{ctx:r}}}),t=new tp({props:{showSchemes:r[1]}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,[o]){const u={};o&16447&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&2&&(a.showSchemes=s[1]),t.$set(a)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function ip(r,e,l){let t,n;Y(r,gt,y=>l(4,t=y)),Y(r,Vt,y=>l(5,n=y));let s=new Set,o=!0,u=!1,a="";function i(y,S){try{gt.set(JSON.parse(S)),Vt.set(br(t)),l(3,a="")}catch(C){l(3,a=`The file you loaded is broken: ${C}`)}}const f=()=>l(2,u=!0);function c(y){u=y,l(2,u)}function m(y){s=y,l(0,s)}function _(y){o=y,l(1,o)}return[s,o,u,a,t,n,i,f,c,m,_]}class ap extends V{constructor(e){super(),Q(this,e,ip,op,J,{})}}function fp(r){let e,l,t,n,s,o,u,a;return e=new Vu({}),t=new oc({}),s=new vc({}),u=new dc({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),$(i,n,f),b(s,i,f),$(i,o,f),b(u,i,f),a=!0},i(i){a||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),g(u.$$.fragment,i),a=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),d(u.$$.fragment,i),a=!1},d(i){i&&(p(l),p(n),p(o)),k(e,i),k(t,i),k(s,i),k(u,i)}}}function up(r){let e,l;return e=new lt({props:{small:!0,$$slots:{default:[fp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function cp(r){let e,l,t,n,s,o,u,a,i,f,c,m;return e=new fa({}),t=new ja({}),s=new ba({}),u=new Na({}),i=new Du({}),c=new pu({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment),f=T(),h(c.$$.fragment)},m(_,y){b(e,_,y),$(_,l,y),b(t,_,y),$(_,n,y),b(s,_,y),$(_,o,y),b(u,_,y),$(_,a,y),b(i,_,y),$(_,f,y),b(c,_,y),m=!0},i(_){m||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(s.$$.fragment,_),g(u.$$.fragment,_),g(i.$$.fragment,_),g(c.$$.fragment,_),m=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(s.$$.fragment,_),d(u.$$.fragment,_),d(i.$$.fragment,_),d(c.$$.fragment,_),m=!1},d(_){_&&(p(l),p(n),p(o),p(a),p(f)),k(e,_),k(t,_),k(s,_),k(u,_),k(i,_),k(c,_)}}}function $p(r){let e,l;return e=new lt({props:{small:!0,$$slots:{default:[cp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function pp(r){let e,l,t,n,s,o;return e=new Qi({}),t=new Yf({}),s=new nu({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment)},m(u,a){b(e,u,a),$(u,l,a),b(t,u,a),$(u,n,a),b(s,u,a),o=!0},i(u){o||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(s.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(s.$$.fragment,u),o=!1},d(u){u&&(p(l),p(n)),k(e,u),k(t,u),k(s,u)}}}function mp(r){let e,l,t,n,s,o,u,a,i,f;return e=new si({}),t=new Ai({}),s=new uo({}),u=new Ro({}),i=new Jo({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment)},m(c,m){b(e,c,m),$(c,l,m),b(t,c,m),$(c,n,m),b(s,c,m),$(c,o,m),b(u,c,m),$(c,a,m),b(i,c,m),f=!0},i(c){f||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(s.$$.fragment,c),g(u.$$.fragment,c),g(i.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(s.$$.fragment,c),d(u.$$.fragment,c),d(i.$$.fragment,c),f=!1},d(c){c&&(p(l),p(n),p(o),p(a)),k(e,c),k(t,c),k(s,c),k(u,c),k(i,c)}}}function _p(r){let e,l;return e=new lt({props:{small:!0,$$slots:{default:[mp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function gp(r){let e,l,t,n;return e=new xr({}),t=new vo({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),k(e,s),k(t,s)}}}function dp(r){let e,l;return e=new lt({props:{small:!0,$$slots:{default:[gp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function hp(r){let e,l,t,n,s,o,u,a;return e=new zf({}),t=new Xa({}),s=new Mf({}),u=new a$({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),$(i,n,f),b(s,i,f),$(i,o,f),b(u,i,f),a=!0},i(i){a||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),g(u.$$.fragment,i),a=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),d(u.$$.fragment,i),a=!1},d(i){i&&(p(l),p(n),p(o)),k(e,i),k(t,i),k(s,i),k(u,i)}}}function bp(r){let e,l,t,n,s,o,u,a,i=an()=="Private (development)",f,c,m,_,y;e=new Xc({}),t=new Hc({}),s=new _f({}),u=new yu({});let S=i&&hp();return c=new mi({}),_=new Si({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T(),S&&S.c(),f=T(),h(c.$$.fragment),m=T(),h(_.$$.fragment)},m(C,N){b(e,C,N),$(C,l,N),b(t,C,N),$(C,n,N),b(s,C,N),$(C,o,N),b(u,C,N),$(C,a,N),S&&S.m(C,N),$(C,f,N),b(c,C,N),$(C,m,N),b(_,C,N),y=!0},p:x,i(C){y||(g(e.$$.fragment,C),g(t.$$.fragment,C),g(s.$$.fragment,C),g(u.$$.fragment,C),g(S),g(c.$$.fragment,C),g(_.$$.fragment,C),y=!0)},o(C){d(e.$$.fragment,C),d(t.$$.fragment,C),d(s.$$.fragment,C),d(u.$$.fragment,C),d(S),d(c.$$.fragment,C),d(_.$$.fragment,C),y=!1},d(C){C&&(p(l),p(n),p(o),p(a),p(f),p(m)),k(e,C),k(t,C),k(s,C),k(u,C),S&&S.d(C),k(c,C),k(_,C)}}}function kp(r){let e,l;return e=new lt({props:{small:!0,$$slots:{default:[bp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function wp(r){let e,l,t,n,s;function o(a){r[6](a)}let u={cfg:r[5],map:r[3]};return r[0]!==void 0&&(u.enabled=r[0]),e=new Fs({props:u}),E.push(()=>U(e,"enabled",o)),n=new hr({}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,i){const f={};i&8&&(f.map=a[3]),!l&&i&1&&(l=!0,f.enabled=a[0],W(()=>l=!1)),e.$set(f)},i(a){s||(g(e.$$.fragment,a),g(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),k(e,a),k(n,a)}}}function vp(r){let e,l;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let n={};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new je({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&2?te(t,[t[0],t[1],{layout:{visibility:s[1]?"none":"visible"}}]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function yp(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y,S,C,N,A,R,P,M;return l=new ap({}),n=new Ge({props:{label:"Trip generators",$$slots:{default:[up]},$$scope:{ctx:r}}}),o=new Ge({props:{label:"Existing infrastructure",$$slots:{default:[$p]},$$scope:{ctx:r}}}),a=new Ge({props:{label:"Public transport",$$slots:{default:[pp]},$$scope:{ctx:r}}}),f=new Ge({props:{label:"Boundaries",$$slots:{default:[_p]},$$scope:{ctx:r}}}),m=new Ge({props:{label:"Census",$$slots:{default:[dp]},$$scope:{ctx:r}}}),y=new Ge({props:{label:"Other",$$slots:{default:[kp]},$$scope:{ctx:r}}}),C=new Ge({props:{label:"Tools",$$slots:{default:[wp]},$$scope:{ctx:r}}}),A=new qs({props:{disabled:!r[1]}}),P=new dt({props:{data:r[4],$$slots:{default:[vp]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(l.$$.fragment),t=T(),h(n.$$.fragment),s=T(),h(o.$$.fragment),u=T(),h(a.$$.fragment),i=T(),h(f.$$.fragment),c=T(),h(m.$$.fragment),_=T(),h(y.$$.fragment),S=T(),h(C.$$.fragment),N=T(),h(A.$$.fragment),R=T(),h(P.$$.fragment)},m(I,D){$(I,e,D),b(l,e,null),w(e,t),b(n,e,null),w(e,s),b(o,e,null),w(e,u),b(a,e,null),w(e,i),b(f,e,null),w(e,c),b(m,e,null),w(e,_),b(y,e,null),w(e,S),b(C,e,null),w(e,N),b(A,e,null),r[7](e),$(I,R,D),b(P,I,D),M=!0},p(I,[D]){const O={};D&256&&(O.$$scope={dirty:D,ctx:I}),n.$set(O);const j={};D&256&&(j.$$scope={dirty:D,ctx:I}),o.$set(j);const ne={};D&256&&(ne.$$scope={dirty:D,ctx:I}),a.$set(ne);const ie={};D&256&&(ie.$$scope={dirty:D,ctx:I}),f.$set(ie);const F={};D&256&&(F.$$scope={dirty:D,ctx:I}),m.$set(F);const q={};D&256&&(q.$$scope={dirty:D,ctx:I}),y.$set(q);const G={};D&265&&(G.$$scope={dirty:D,ctx:I}),C.$set(G);const Re={};D&2&&(Re.disabled=!I[1]),A.$set(Re);const De={};D&258&&(De.$$scope={dirty:D,ctx:I}),P.$set(De)},i(I){M||(g(l.$$.fragment,I),g(n.$$.fragment,I),g(o.$$.fragment,I),g(a.$$.fragment,I),g(f.$$.fragment,I),g(m.$$.fragment,I),g(y.$$.fragment,I),g(C.$$.fragment,I),g(A.$$.fragment,I),g(P.$$.fragment,I),M=!0)},o(I){d(l.$$.fragment,I),d(n.$$.fragment,I),d(o.$$.fragment,I),d(a.$$.fragment,I),d(f.$$.fragment,I),d(m.$$.fragment,I),d(y.$$.fragment,I),d(C.$$.fragment,I),d(A.$$.fragment,I),d(P.$$.fragment,I),M=!1},d(I){I&&(p(e),p(R)),k(l),k(n),k(o),k(a),k(f),k(m),k(y),k(C),k(A),r[7](null),k(P,I)}}}function Sp(r,e,l){let t,n,s,o;Y(r,Il,c=>l(1,n=c)),Y(r,sn,c=>l(2,s=c)),Y(r,Qt,c=>l(3,o=c));let u={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},a={getStreetViewRoadLayerNames:c=>zs(c,Ts(en))};function i(c){t=c,l(0,t),l(1,n)}function f(c){E[c?"unshift":"push"](()=>{s=c,sn.set(s)})}return r.$$.update=()=>{r.$$.dirty&2&&l(0,t=!n),r.$$.dirty&1&&Il.set(!t)},[t,n,s,o,u,a,i,f]}class Cp extends V{constructor(e){super(),Q(this,e,Sp,yp,J,{})}}function Lp(r){let e,l,t,n,s,o,u,a,i,f,c,m,_,y;return l=new js({}),u=new Hs({props:{boundaryGeojson:r[3]}}),i=new Ms({}),{c(){e=L("div"),h(l.$$.fragment),t=T(),n=L("div"),s=L("h1"),s.textContent="Browse schemes",o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment),f=T(),c=L("p"),c.textContent=`App version: ${an()}`,m=T(),_=L("div"),pe(n,"display","flex"),pe(n,"justify-content","space-between"),B(e,"slot","sidebar"),B(e,"class","govuk-prose")},m(S,C){$(S,e,C),b(l,e,null),w(e,t),w(e,n),w(n,s),w(n,o),b(u,n,null),w(e,a),b(i,e,null),w(e,f),w(e,c),w(e,m),w(e,_),r[6](_),y=!0},p(S,C){const N={};C&8&&(N.boundaryGeojson=S[3]),u.$set(N)},i(S){y||(g(l.$$.fragment,S),g(u.$$.fragment,S),g(i.$$.fragment,S),y=!0)},o(S){d(l.$$.fragment,S),d(u.$$.fragment,S),d(i.$$.fragment,S),y=!1},d(S){S&&p(e),k(l),k(u),k(i),r[6](null)}}}function rs(r){let e,l,t;return l=new Cp({}),{c(){e=L("div"),h(l.$$.fragment),B(e,"class","top-right svelte-u44ed2")},m(n,s){$(n,e,s),b(l,e,null),t=!0},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Tp(r){let e,l,t,n;e=new Bs({});let s=r[2]&&rs();return{c(){h(e.$$.fragment),l=T(),s&&s.c(),t=ve()},m(o,u){b(e,o,u),$(o,l,u),s&&s.m(o,u),$(o,t,u),n=!0},p(o,u){o[2]?s?u&4&&g(s,1):(s=rs(),s.c(),g(s,1),s.m(t.parentNode,t)):s&&(ae(),d(s,1,1,()=>{s=null}),fe())},i(o){n||(g(e.$$.fragment,o),g(s),n=!0)},o(o){d(e.$$.fragment,o),d(s),n=!1},d(o){o&&(p(l),p(t)),k(e,o),s&&s.d(o)}}}function Mp(r){let e,l,t;return l=new Ns({props:{style:r[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Tp]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(l.$$.fragment),B(e,"slot","main")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&2&&(o.style=n[1]),s&260&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),k(l)}}}function Np(r){let e,l;return e=new Xs({props:{$$slots:{main:[Mp],sidebar:[Lp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&271&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Pp(r,e,l){let t,n,s,o,u;Y(r,sn,c=>l(4,t=c)),Y(r,Qt,c=>l(5,n=c)),Y(r,en,c=>l(1,s=c)),Y(r,Nn,c=>l(2,o=c)),Y(r,gt,c=>l(3,u=c)),on(()=>{Ps()});const a=new URLSearchParams(window.location.search);en.set(a.get("style")||"dataviz");let i;function f(c){E[c?"unshift":"push"](()=>{i=c,l(0,i),l(4,t)})}return r.$$.update=()=>{r.$$.dirty&32&&n&&Nn.set(n),r.$$.dirty&17&&i&&t&&(l(0,i.innerHTML="",i),i.appendChild(t))},[i,s,o,u,t,n,f]}class Op extends V{constructor(e){super(),Q(this,e,Pp,Np,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Op({target:document.getElementById("app")});
