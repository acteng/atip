import{S as J,i as V,s as Y,e as C,b as B,ax as ge,c as $,n as x,d as p,aT as os,g as G,h as U,a as T,k as b,p as k,z as st,q as W,t as _,r as g,u as w,P as _t,Q as gt,T as dt,U as ht,b4 as wn,o as h,al as Fe,a8 as ce,a9 as $e,au as at,x as v,O as z,a7 as Ie,aa as _n,ab as is,v as E,ac as as,ad as fs,ae as Ae,af as us,ag as cs,b5 as hs,V as St,b6 as vn,b7 as bs,G as wt,aP as fn,Y as ee,K as ye,f as rt,aR as ks,b3 as Z,a5 as ut,b8 as _e,J as X,I as Ee,_ as te,as as oe,a6 as en,y as xe,X as $s,b0 as Zt,b9 as Xt,ba as mt,R as ps,bb as ws,bc as vs,w as gn,bd as ys,b2 as sn,F as yn,D as Ss,H as Cs,m as dn,j as Ls,E as Ts,aU as Ms,aV as un,L as Ns,M as Ps,A as Os}from"./index-fbddeb70.js";import{e as Sn,s as H,u as et,t as Is,q as Xe,M as Rs,h as tt,a as re,v as Se,k as pt,R as Ds,C as ct,f as bt,p as Cn,b as As,g as Fs,d as Ln,w as Tn,c as Mn,x as Vt,i as xt,B as qs,S as zs,n as js,H as Hs,Z as Bs,G as Gs,m as Nn}from"./ZoomOutMap-0be5a26e.js";import{P as fe}from"./Popup-6cdf0e0a.js";function Es(r){let e;return{c(){e=C("span"),B(e,"class","svelte-kzgqtg"),ge(e,"background",r[0])},m(l,t){$(l,e,t)},p(l,[t]){t&1&&ge(e,"background",l[0])},i:x,o:x,d(l){l&&p(e)}}}function Us(r,e,l){let{color:t}=e;return r.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class qe extends J{constructor(e){super(),V(this,e,Us,Es,Y,{color:0})}}const Ws="/atip/browse_layout_v3/assets/help-d011708a.svg";function Ys(r){let e,l;const t=r[1].default,n=_t(t,r,r[4],null);return{c(){e=C("div"),n&&n.c(),B(e,"class","govuk-prose")},m(s,o){$(s,e,o),n&&n.m(e,null),l=!0},p(s,o){n&&n.p&&(!l||o&16)&&gt(n,t,s,s[4],l?ht(t,s[4],o,null):dt(s[4]),null)},i(s){l||(_(n,s),l=!0)},o(s){g(n,s),l=!1},d(s){s&&p(e),n&&n.d(s)}}}function Js(r){let e,l,t,n,s,o,u;function a(f){r[3](f)}let i={title:"Help",$$slots:{default:[Ys]},$$scope:{ctx:r}};return r[0]!==void 0&&(i.open=r[0]),t=new os({props:i}),G.push(()=>U(t,"open",a)),{c(){e=C("button"),e.innerHTML=`<img src="${Ws}" title="Help" alt="Help"/>`,l=T(),b(t.$$.fragment),B(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,l,c),k(t,f,c),s=!0,o||(u=st(e,"click",r[2]),o=!0)},p(f,[c]){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.open=f[0],W(()=>n=!1)),t.$set(m)},i(f){s||(_(t.$$.fragment,f),s=!0)},o(f){g(t.$$.fragment,f),s=!1},d(f){f&&(p(e),p(l)),w(t,f),o=!1,u()}}}function Vs(r,e,l){let{$$slots:t={},$$scope:n}=e,s=!1;const o=()=>l(0,s=!0);function u(a){s=a,l(0,s)}return r.$$set=a=>{"$$scope"in a&&l(4,n=a.$$scope)},[s,t,o,u,n]}class ue extends J{constructor(e){super(),V(this,e,Vs,Js,Y,{})}}const Qs=r=>({}),Pn=r=>({}),Ks=r=>({}),On=r=>({});function Zs(r){let e,l,t,n,s,o,u,a,i,f,c;const m=r[4].sidebar,d=_t(m,r,r[3],On),L=r[4].main,y=_t(L,r,r[3],Pn);return{c(){e=C("div"),l=C("aside"),t=C("div"),d&&d.c(),n=T(),s=C("button"),s.textContent="→",u=T(),a=C("main"),y&&y.c(),B(t,"class","sidebar-content content-container svelte-1n0etgd"),B(s,"type","button"),B(s,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),B(l,"class",o=wn(r[1]?"":"collapsed")+" svelte-1n0etgd"),ge(l,"--sidebarWidth",r[0]),B(a,"class","svelte-1n0etgd"),B(e,"class","overall-layout svelte-1n0etgd")},m(S,P){$(S,e,P),h(e,l),h(l,t),d&&d.m(t,null),h(l,n),h(l,s),h(e,u),h(e,a),y&&y.m(a,null),i=!0,f||(c=st(s,"click",r[2]),f=!0)},p(S,[P]){d&&d.p&&(!i||P&8)&&gt(d,m,S,S[3],i?ht(m,S[3],P,Ks):dt(S[3]),On),(!i||P&2&&o!==(o=wn(S[1]?"":"collapsed")+" svelte-1n0etgd"))&&B(l,"class",o),(!i||P&1)&&ge(l,"--sidebarWidth",S[0]),y&&y.p&&(!i||P&8)&&gt(y,L,S,S[3],i?ht(L,S[3],P,Qs):dt(S[3]),Pn)},i(S){i||(_(d,S),_(y,S),i=!0)},o(S){g(d,S),g(y,S),i=!1},d(S){S&&p(e),d&&d.d(S),y&&y.d(S),f=!1,c()}}}function Xs(r,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:s="25rem"}=e,o=!0;function u(){l(1,o=!o)}return r.$$set=a=>{"sidebarWidth"in a&&l(0,s=a.sidebarWidth),"$$scope"in a&&l(3,n=a.$$scope)},[s,o,u,n,t]}class xs extends J{constructor(e){super(),V(this,e,Xs,Zs,Y,{sidebarWidth:0})}}function In(r,e,l){const t=r.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Rn(r){let e,l,t,n=r[1]+"",s,o,u;return l=new qe({props:{color:r[2]}}),{c(){e=C("li"),b(l.$$.fragment),t=T(),s=v(n),o=T()},m(a,i){$(a,e,i),k(l,e,null),h(e,t),h(e,s),h(e,o),u=!0},p(a,i){const f={};i&1&&(f.color=a[2]),l.$set(f),(!u||i&1)&&n!==(n=a[1]+"")&&z(s,n)},i(a){u||(_(l.$$.fragment,a),u=!0)},o(a){g(l.$$.fragment,a),u=!1},d(a){a&&p(e),w(l)}}}function er(r){let e,l,t=Fe(r[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Rn(In(r,t,o));const s=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){e=C("ul");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,u){$(o,e,u);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);l=!0},p(o,[u]){if(u&1){t=Fe(o[0]);let a;for(a=0;a<t.length;a+=1){const i=In(o,t,a);n[a]?(n[a].p(i,u),_(n[a],1)):(n[a]=Rn(i),n[a].c(),_(n[a],1),n[a].m(e,null))}for(ce(),a=t.length;a<n.length;a+=1)s(a);$e()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)_(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)g(n[u]);l=!1},d(o){o&&p(e),at(n,o)}}}function tr(r,e,l){let{rows:t}=e;return r.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class rn extends J{constructor(e){super(),V(this,e,tr,er,Y,{rows:0})}}function Dn(r){let e=r[0],l,t,n=An(r);return{c(){n.c(),l=Ie()},m(s,o){n.m(s,o),$(s,l,o),t=!0},p(s,o){o&1&&Y(e,e=s[0])?(ce(),g(n,1,1,x),$e(),n=An(s),n.c(),_(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(_(n),t=!0)},o(s){g(n),t=!1},d(s){s&&p(l),n.d(s)}}}function An(r){let e;const l=r[16].default,t=_t(l,r,r[15],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&32768)&&gt(t,l,n,n[15],e?ht(l,n[15],s,null):dt(n[15]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function nr(r){let e,l,t=r[0]&&Dn(r);return{c(){t&&t.c(),e=Ie()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&_(t,1)):(t=Dn(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(ce(),g(t,1,1,()=>{t=null}),$e())},i(n){l||(_(t),l=!0)},o(n){g(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function lr(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=_n("raster-source")}=e,{tiles:a}=e,{tileSize:i=void 0}=e,{bounds:f=null}=e,{scheme:c=null}=e,{attribution:m=null}=e,{minzoom:d=null}=e,{maxzoom:L=null}=e,{volatile:y=null}=e;const{map:S,self:P}=is();E(r,S,I=>l(14,n=I)),E(r,P,I=>l(0,t=I));let F,D=!0;return as(()=>{t&&F&&n&&(fs(S,t,F),Ae(P,t=null,t),l(12,F=void 0))}),r.$$set=I=>{"id"in I&&l(3,u=I.id),"tiles"in I&&l(4,a=I.tiles),"tileSize"in I&&l(5,i=I.tileSize),"bounds"in I&&l(6,f=I.bounds),"scheme"in I&&l(7,c=I.scheme),"attribution"in I&&l(8,m=I.attribution),"minzoom"in I&&l(9,d=I.minzoom),"maxzoom"in I&&l(10,L=I.maxzoom),"volatile"in I&&l(11,y=I.volatile),"$$scope"in I&&l(15,o=I.$$scope)},r.$$.update=()=>{r.$$.dirty&24569&&n&&t!==u&&(Ae(P,t=u,t),us(n,t,cs({type:"raster",tiles:a,tileSize:i,bounds:f,scheme:c,attribution:m,minzoom:d,maxzoom:L,volatile:y}),I=>n&&I===t,()=>{t&&(l(12,F=n==null?void 0:n.getSource(t)),l(13,D=!0))})),r.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,F=n==null?void 0:n.getSource(u))})),r.$$.dirty&12304&&F&&(D?l(13,D=!1):F.setTiles(a))},[t,S,P,u,a,i,f,c,m,d,L,y,F,D,n,o,s]}class sr extends J{constructor(e){super(),V(this,e,lr,nr,Y,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function rr(r){let e;const l=r[16].default,t=_t(l,r,r[24],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16777216)&&gt(t,l,n,n[24],e?ht(l,n[24],s,null):dt(n[24]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function or(r){let e,l,t;function n(o){r[17](o)}let s={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[rr]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.hovered=r[0]),e=new hs({props:s}),G.push(()=>U(e,"hovered",n)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){b(e.$$.fragment)},m(o,u){k(e,o,u),t=!0},p(o,[u]){const a={};u&2&&(a.id=o[1]),u&4&&(a.source=o[2]),u&8&&(a.sourceLayer=o[3]),u&16&&(a.beforeId=o[4]),u&32&&(a.beforeLayerType=o[5]),u&64&&(a.paint=o[6]),u&128&&(a.layout=o[7]),u&256&&(a.filter=o[8]),u&512&&(a.applyToClusters=o[9]),u&1024&&(a.minzoom=o[10]),u&2048&&(a.maxzoom=o[11]),u&4096&&(a.hoverCursor=o[12]),u&8192&&(a.manageHoverState=o[13]),u&16384&&(a.eventsIfTopMost=o[14]),u&32768&&(a.interactive=o[15]),u&16777216&&(a.$$scope={dirty:u,ctx:o}),!l&&u&1&&(l=!0,a.hovered=o[0],W(()=>l=!1)),e.$set(a)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function ir(r,e,l){let{$$slots:t={},$$scope:n}=e,{id:s=_n("symbol")}=e,{source:o=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:a=void 0}=e,{beforeLayerType:i=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:m=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:L=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:P=!1}=e,{hovered:F=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:I=!0}=e;function M(A){F=A,l(0,F)}function O(A){St.call(this,r,A)}function R(A){St.call(this,r,A)}function N(A){St.call(this,r,A)}function q(A){St.call(this,r,A)}function ne(A){St.call(this,r,A)}function ie(A){St.call(this,r,A)}return r.$$set=A=>{"id"in A&&l(1,s=A.id),"source"in A&&l(2,o=A.source),"sourceLayer"in A&&l(3,u=A.sourceLayer),"beforeId"in A&&l(4,a=A.beforeId),"beforeLayerType"in A&&l(5,i=A.beforeLayerType),"paint"in A&&l(6,f=A.paint),"layout"in A&&l(7,c=A.layout),"filter"in A&&l(8,m=A.filter),"applyToClusters"in A&&l(9,d=A.applyToClusters),"minzoom"in A&&l(10,L=A.minzoom),"maxzoom"in A&&l(11,y=A.maxzoom),"hoverCursor"in A&&l(12,S=A.hoverCursor),"manageHoverState"in A&&l(13,P=A.manageHoverState),"hovered"in A&&l(0,F=A.hovered),"eventsIfTopMost"in A&&l(14,D=A.eventsIfTopMost),"interactive"in A&&l(15,I=A.interactive),"$$scope"in A&&l(24,n=A.$$scope)},[F,s,o,u,a,i,f,c,m,d,L,y,S,P,D,I,t,M,O,R,N,q,ne,ie,n]}class hn extends J{constructor(e){super(),V(this,e,ir,or,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Fn(r){let e=r[0],l,t,n=qn(r);return{c(){n.c(),l=Ie()},m(s,o){n.m(s,o),$(s,l,o),t=!0},p(s,o){o&1&&Y(e,e=s[0])?(ce(),g(n,1,1,x),$e(),n=qn(s),n.c(),_(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(_(n),t=!0)},o(s){g(n),t=!1},d(s){s&&p(l),n.d(s)}}}function qn(r){let e;const l=r[15].default,t=_t(l,r,r[14],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16384)&&gt(t,l,n,n[14],e?ht(l,n[14],s,null):dt(n[14]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function ar(r){let e,l,t=r[0]&&Fn(r);return{c(){t&&t.c(),e=Ie()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&_(t,1)):(t=Fn(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(ce(),g(t,1,1,()=>{t=null}),$e())},i(n){l||(_(t),l=!0)},o(n){g(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function fr(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=_n("vector")}=e,{url:a=null}=e,{tiles:i=null}=e,{promoteId:f=null}=e,{bounds:c=null}=e,{scheme:m=null}=e,{attribution:d=null}=e,{minzoom:L=null}=e,{maxzoom:y=null}=e,{volatile:S=null}=e;if(a&&a.includes("pmtiles://")&&!vn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let I=new bs;vn.addProtocol("pmtiles",I.tile)}const{map:P,self:F}=is();E(r,P,I=>l(13,n=I)),E(r,F,I=>l(0,t=I));let D;return as(()=>{t&&n&&(fs(P,t,D),Ae(F,t=null,t),D=void 0)}),r.$$set=I=>{"id"in I&&l(3,u=I.id),"url"in I&&l(4,a=I.url),"tiles"in I&&l(5,i=I.tiles),"promoteId"in I&&l(6,f=I.promoteId),"bounds"in I&&l(7,c=I.bounds),"scheme"in I&&l(8,m=I.scheme),"attribution"in I&&l(9,d=I.attribution),"minzoom"in I&&l(10,L=I.minzoom),"maxzoom"in I&&l(11,y=I.maxzoom),"volatile"in I&&l(12,S=I.volatile),"$$scope"in I&&l(14,o=I.$$scope)},r.$$.update=()=>{r.$$.dirty&16377&&n&&t!==u&&(Ae(F,t=u,t),us(n,t,cs({type:"vector",url:a,tiles:i,promoteId:f,bounds:c,scheme:m,attribution:d,minzoom:L,maxzoom:y,volatile:S}),I=>n&&I===t,()=>{t&&(D=n==null?void 0:n.getSource(t))})),r.$$.dirty&8200&&(n==null||n.on("style.load",()=>{D=n==null?void 0:n.getSource(u)}))},[t,P,F,u,a,i,f,c,m,d,L,y,S,n,o,s]}class de extends J{constructor(e){super(),V(this,e,fr,ar,Y,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function zn(r,e,l){const t=r.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function ur(r){let e,l,t;return l=new rt({props:{$$slots:{default:[$r]},$$scope:{ctx:r}}}),l.$on("click",r[9]),{c(){e=C("div"),b(l.$$.fragment)},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16384&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function cr(r){let e,l,t,n,s,o,u,a,i,f;l=new rt({props:{$$slots:{default:[pr]},$$scope:{ctx:r}}}),l.$on("click",r[4]);let c=r[2]&&jn(r);s=new Xe({props:{label:"Help",$$slots:{default:[mr]},$$scope:{ctx:r}}}),u=new ks({}),u.$on("click",r[3]);let m=Fe(r[0]),d=[];for(let y=0;y<m.length;y+=1)d[y]=Hn(zn(r,m,y));const L=y=>g(d[y],1,1,()=>{d[y]=null});return{c(){e=C("div"),b(l.$$.fragment),t=T(),c&&c.c(),n=T(),b(s.$$.fragment),o=T(),b(u.$$.fragment),a=T();for(let y=0;y<d.length;y+=1)d[y].c();i=Ie()},m(y,S){$(y,e,S),k(l,e,null),$(y,t,S),c&&c.m(y,S),$(y,n,S),k(s,y,S),$(y,o,S),k(u,y,S),$(y,a,S);for(let P=0;P<d.length;P+=1)d[P]&&d[P].m(y,S);$(y,i,S),f=!0},p(y,S){const P={};S&16384&&(P.$$scope={dirty:S,ctx:y}),l.$set(P),y[2]?c?c.p(y,S):(c=jn(y),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const F={};if(S&16384&&(F.$$scope={dirty:S,ctx:y}),s.$set(F),S&65){m=Fe(y[0]);let D;for(D=0;D<m.length;D+=1){const I=zn(y,m,D);d[D]?(d[D].p(I,S),_(d[D],1)):(d[D]=Hn(I),d[D].c(),_(d[D],1),d[D].m(i.parentNode,i))}for(ce(),D=m.length;D<d.length;D+=1)L(D);$e()}},i(y){if(!f){_(l.$$.fragment,y),_(s.$$.fragment,y),_(u.$$.fragment,y);for(let S=0;S<m.length;S+=1)_(d[S]);f=!0}},o(y){g(l.$$.fragment,y),g(s.$$.fragment,y),g(u.$$.fragment,y),d=d.filter(Boolean);for(let S=0;S<d.length;S+=1)g(d[S]);f=!1},d(y){y&&(p(e),p(t),p(n),p(o),p(a),p(i)),w(l),c&&c.d(y),w(s,y),w(u,y),at(d,y)}}}function $r(r){let e;return{c(){e=v("Measure lines")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function pr(r){let e;return{c(){e=v("Stop measuring")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function jn(r){let e,l,t=r[2].toFixed(2)+"",n,s;return{c(){e=C("p"),l=v("Length: "),n=v(t),s=v(" meters")},m(o,u){$(o,e,u),h(e,l),h(e,n),h(e,s)},p(o,u){u&4&&t!==(t=o[2].toFixed(2)+"")&&z(n,t)},d(o){o&&p(e)}}}function mr(r){let e;return{c(){e=C("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){$(l,e,t)},p:x,d(l){l&&p(e)}}}function _r(r){let e,l;return{c(){e=C("span"),l=T(),B(e,"class","dot svelte-1tzt432")},m(t,n){$(t,e,n),$(t,l,n)},p:x,d(t){t&&(p(e),p(l))}}}function Hn(r){let e,l,t;function n(u){r[7](u,r[11],r[12],r[13])}function s(){return r[8](r[13])}let o={draggable:!0,$$slots:{default:[_r]},$$scope:{ctx:r}};return r[11]!==void 0&&(o.lngLat=r[11]),e=new Rs({props:o}),G.push(()=>U(e,"lngLat",n)),e.$on("click",s),{c(){b(e.$$.fragment)},m(u,a){k(e,u,a),t=!0},p(u,a){r=u;const i={};a&16384&&(i.$$scope={dirty:a,ctx:r}),!l&&a&1&&(l=!0,i.lngLat=r[11],W(()=>l=!1)),e.$set(i)},i(u){t||(_(e.$$.fragment,u),t=!0)},o(u){g(e.$$.fragment,u),t=!1},d(u){w(e,u)}}}function gr(r){let e,l;const t=[H("measurement-line"),{paint:{"line-color":et.measuringLine,"line-width":5}}];let n={};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ye({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u={};e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function dr(r){let e,l,t,n,s,o,u;const a=[cr,ur],i=[];function f(c,m){return c[1]?0:1}return e=f(r),l=i[e]=a[e](r),n=new wt({props:{data:r[0].length<2?Sn():fn(r[0]),$$slots:{default:[gr]},$$scope:{ctx:r}}}),{c(){l.c(),t=T(),b(n.$$.fragment)},m(c,m){i[e].m(c,m),$(c,t,m),k(n,c,m),s=!0,o||(u=st(window,"keydown",r[5]),o=!0)},p(c,[m]){let d=e;e=f(c),e===d?i[e].p(c,m):(ce(),g(i[d],1,1,()=>{i[d]=null}),$e(),l=i[e],l?l.p(c,m):(l=i[e]=a[e](c),l.c()),_(l,1),l.m(t.parentNode,t));const L={};m&1&&(L.data=c[0].length<2?Sn():fn(c[0])),m&16384&&(L.$$scope={dirty:m,ctx:c}),n.$set(L)},i(c){s||(_(l),_(n.$$.fragment,c),s=!0)},o(c){g(l),g(n.$$.fragment,c),s=!1},d(c){c&&p(t),i[e].d(c),w(n,c),o=!1,u()}}}function hr(r,e,l){let t,n=!1,s=[];function o(L){return L.length<2?null:1e3*Is(fn(L),{units:"kilometers"})}function u(L){l(0,s=[...s,L.detail.lngLat.toArray()])}function a(){l(1,n=!1),l(0,s=[])}function i(L){n&&L.key==="Escape"&&(L.stopPropagation(),a())}function f(L){s.splice(L,1),l(0,s)}function c(L,y,S,P){S[P]=L,l(0,s)}const m=L=>f(L),d=()=>l(1,n=!0);return r.$$.update=()=>{r.$$.dirty&1&&l(2,t=o(s))},[s,n,t,u,a,i,f,c,m,d]}class br extends J{constructor(e){super(),V(this,e,hr,dr,Y,{})}}function kr(r){let e=new Map;for(let[t,n]of Object.entries(r.schemes))e.set(t,n);r.features=r.features.filter(t=>wr(t));let l=1;for(let t of r.features){let n=e.get(t.properties.scheme_reference);n.browse&&(t.properties.funding_programme=n.browse.funding_programme,t.properties.current_milestone=n.browse.current_milestone,t.id=l++)}return e}function wr(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}const cn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"],Q={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Ge=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function $n(){let[r,e]=ms(cn,Q.funding_programmes);return[tt(["get","funding_programme"],r,"grey"),e]}function vr(){let r=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,l]=ms(r,Q.current_milestone);return[tt(["get","current_milestone"],e,"grey"),l]}function ms(r,e){let l=[],t={},n=0;for(let s of r){let o=e[n++%e.length];t[s]=o,l.push([s,o])}return[t,l]}function yr(r){let e;return{c(){e=v(`Open Government License
  `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Sr(r){let e,l,t,n,s;return t=new Z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[yr]},$$scope:{ctx:r}}}),{c(){e=C("p"),l=v("License: "),b(t.$$.fragment),n=v(`. Contains OS data © Crown copyright and database right
  2023.`)},m(o,u){$(o,e,u),h(e,l),k(t,e,null),h(e,n),s=!0},p(o,[u]){const a={};u&1&&(a.$$scope={dirty:u,ctx:o}),t.$set(a)},i(o){s||(_(t.$$.fragment,o),s=!0)},o(o){g(t.$$.fragment,o),s=!1},d(o){o&&p(e),w(t)}}}class ze extends J{constructor(e){super(),V(this,e,null,Sr,Y,{})}}function Bn(r,e,l){const t=r.slice();return t[2]=e[l],t}function Gn(r,e,l){const t=r.slice();return t[5]=e[l],t}function En(r){let e,l;return{c(){e=C("span"),l=v(` 
    `),ge(e,"background",r[5]),ge(e,"width","100%"),ge(e,"border","1px solid black")},m(t,n){$(t,e,n),h(e,l)},p(t,n){n&1&&ge(e,"background",t[5])},d(t){t&&p(e)}}}function Un(r){let e,l=r[2]+"",t;return{c(){e=C("span"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&2&&l!==(l=n[2]+"")&&z(t,l)},d(n){n&&p(e)}}}function Cr(r){let e,l,t,n=Fe(r[0]),s=[];for(let a=0;a<n.length;a+=1)s[a]=En(Gn(r,n,a));let o=Fe(r[1]),u=[];for(let a=0;a<o.length;a+=1)u[a]=Un(Bn(r,o,a));return{c(){e=C("div");for(let a=0;a<s.length;a+=1)s[a].c();l=T(),t=C("div");for(let a=0;a<u.length;a+=1)u[a].c();ge(e,"display","flex"),ge(t,"display","flex"),ge(t,"justify-content","space-between")},m(a,i){$(a,e,i);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null);$(a,l,i),$(a,t,i);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(a,[i]){if(i&1){n=Fe(a[0]);let f;for(f=0;f<n.length;f+=1){const c=Gn(a,n,f);s[f]?s[f].p(c,i):(s[f]=En(c),s[f].c(),s[f].m(e,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=n.length}if(i&2){o=Fe(a[1]);let f;for(f=0;f<o.length;f+=1){const c=Bn(a,o,f);u[f]?u[f].p(c,i):(u[f]=Un(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}},i:x,o:x,d(a){a&&(p(e),p(l),p(t)),at(s,a),at(u,a)}}}function Lr(r,e,l){let{colorScale:t}=e,{limits:n}=e;return r.$$set=s=>{"colorScale"in s&&l(0,t=s.colorScale),"limits"in s&&l(1,n=s.limits)},[t,n]}class Ue extends J{constructor(e){super(),V(this,e,Lr,Cr,Y,{colorScale:0,limits:1})}}function Ce(r){let e=new URLSearchParams(window.location.search).has(r),l=ut(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(r,"1"):n.searchParams.delete(r),window.history.replaceState(null,"",n.toString())}),l}function vt(r,e,l,t){let n=e,s=new URLSearchParams(window.location.search).get(r);if(s!=null)try{n=t(s)}catch(u){console.warn(`Parsing URL parameter ${r}=${s} failed, using default value: ${u}`)}let o=ut(n);return o.subscribe(u=>{let a=new URL(window.location.href),i=l(u);i==null?a.searchParams.delete(r):a.searchParams.set(r,i),window.history.replaceState(null,"",a.toString())}),o}function Wn(r){const e=r[14].OA21CD;r[15]=e;const l=r[14][r[3].kind];r[16]=l}function Tr(r){let e;return{c(){e=v("Percent of households with a car")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Mr(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Nr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Pr(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Or(r){let e,l,t,n,s,o,u,a,i,f,c,m;return t=new Z({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Mr]},$$scope:{ctx:r}}}),s=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Nr]},$$scope:{ctx:r}}}),f=new Z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Pr]},$$scope:{ctx:r}}}),{c(){e=C("p"),l=v("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),n=v(". Output area boundaries from "),b(s.$$.fragment),o=v("."),u=T(),a=C("p"),i=v("License: "),b(f.$$.fragment),c=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(d,L){$(d,e,L),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),$(d,u,L),$(d,a,L),h(a,i),k(f,a,null),h(a,c),m=!0},p(d,L){const y={};L&131072&&(y.$$scope={dirty:L,ctx:d}),t.$set(y);const S={};L&131072&&(S.$$scope={dirty:L,ctx:d}),s.$set(S);const P={};L&131072&&(P.$$scope={dirty:L,ctx:d}),f.$set(P)},i(d){m||(_(t.$$.fragment,d),_(s.$$.fragment,d),_(f.$$.fragment,d),m=!0)},o(d){g(t.$$.fragment,d),g(s.$$.fragment,d),g(f.$$.fragment,d),m=!1},d(d){d&&(p(e),p(u),p(a)),w(t),w(s),w(f)}}}function Ir(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Or]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Yn(r){let e,l;return e=new Ue({props:{colorScale:r[4],limits:ft(r[3].kind)}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=ft(t[3].kind)),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Rr(r){let e;return{c(){e=v("Average cars per household")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Dr(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ar(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Fr(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function qr(r){let e,l,t,n,s,o,u,a,i,f,c,m,d,L;return s=new Z({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Dr]},$$scope:{ctx:r}}}),u=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ar]},$$scope:{ctx:r}}}),m=new Z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Fr]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=T(),t=C("p"),n=v("Car/van availability data is from the 2021 census, via "),b(s.$$.fragment),o=v(". Output area boundaries from "),b(u.$$.fragment),a=v("."),i=T(),f=C("p"),c=v("License: "),b(m.$$.fragment),d=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(y,S){$(y,e,S),$(y,l,S),$(y,t,S),h(t,n),k(s,t,null),h(t,o),k(u,t,null),h(t,a),$(y,i,S),$(y,f,S),h(f,c),k(m,f,null),h(f,d),L=!0},p(y,S){const P={};S&131072&&(P.$$scope={dirty:S,ctx:y}),s.$set(P);const F={};S&131072&&(F.$$scope={dirty:S,ctx:y}),u.$set(F);const D={};S&131072&&(D.$$scope={dirty:S,ctx:y}),m.$set(D)},i(y){L||(_(s.$$.fragment,y),_(u.$$.fragment,y),_(m.$$.fragment,y),L=!0)},o(y){g(s.$$.fragment,y),g(u.$$.fragment,y),g(m.$$.fragment,y),L=!1},d(y){y&&(p(e),p(l),p(t),p(i),p(f)),w(s),w(u),w(m)}}}function zr(r){let e,l,t;return l=new ue({props:{$$slots:{default:[qr]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Jn(r){let e,l;return e=new Ue({props:{colorScale:r[4],limits:ft(r[3].kind)}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=ft(t[3].kind)),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function jr(r){let e;return{c(){e=v("Population density")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Hr(r){let e;return{c(){e=v(`NOMIS TS006
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Br(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Gr(r){let e,l,t,n,s,o,u,a,i;return t=new Z({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Hr]},$$scope:{ctx:r}}}),s=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Br]},$$scope:{ctx:r}}}),a=new ze({}),{c(){e=C("p"),l=v("Population density data is from the 2021 census, via "),b(t.$$.fragment),n=v(". Output area boundaries from "),b(s.$$.fragment),o=v("."),u=T(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),$(f,u,c),k(a,f,c),i=!0},p(f,c){const m={};c&131072&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const d={};c&131072&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){i||(_(t.$$.fragment,f),_(s.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(t.$$.fragment,f),g(s.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(s),w(a,f)}}}function Er(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Gr]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Vn(r){let e,l,t,n;return t=new Ue({props:{colorScale:r[4],limits:ft(r[3].kind).map(Qn)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",l=T(),b(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&8&&(u.limits=ft(s[3].kind).map(Qn)),t.$set(u)},i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){g(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function Ur(r){let e,l,t,n=r[16].toLocaleString()+"",s,o,u=r[15]+"",a;return{c(){e=C("p"),l=v("There are "),t=C("b"),s=v(n),o=v(`
          people per square kilometre in `),a=v(u)},m(i,f){$(i,e,f),h(e,l),h(e,t),h(t,s),h(e,o),h(e,a)},p(i,f){f&16392&&n!==(n=i[16].toLocaleString()+"")&&z(s,n),f&16384&&u!==(u=i[15]+"")&&z(a,u)},d(i){i&&p(e)}}}function Wr(r){let e,l,t=r[15]+"",n,s,o,u=r[16]+"",a,i;return{c(){e=C("p"),l=v("Households in "),n=v(t),s=v(` have an average of
          `),o=C("b"),a=v(u),i=v(`
          cars`)},m(f,c){$(f,e,c),h(e,l),h(e,n),h(e,s),h(e,o),h(o,a),h(e,i)},p(f,c){c&16384&&t!==(t=f[15]+"")&&z(n,t),c&16392&&u!==(u=f[16]+"")&&z(a,u)},d(f){f&&p(e)}}}function Yr(r){let e,l,t=r[16]+"",n,s,o,u=r[15]+"",a,i;return{c(){e=C("p"),l=C("b"),n=v(t),s=v("%"),o=v(`
          of households in `),a=v(u),i=v(" have 1 or more cars")},m(f,c){$(f,e,c),h(e,l),h(l,n),h(l,s),h(e,o),h(e,a),h(e,i)},p(f,c){c&16392&&t!==(t=f[16]+"")&&z(n,t),c&16384&&u!==(u=f[15]+"")&&z(a,u)},d(f){f&&p(e)}}}function Jr(r){Wn(r);let e;function l(s,o){return s[3].kind=="percent_households_with_car"?Yr:s[3].kind=="average_cars_per_household"?Wr:Ur}let t=l(r),n=t(r);return{c(){n.c(),e=Ie()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){Wn(s),t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function Vr(r){let e,l;return e=new fe({props:{$$slots:{default:[Jr,({props:t})=>({14:t}),({props:t})=>t?16384:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&147464&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Qr(r){let e,l,t,n;const s=[H(Ye),{sourceLayer:Ye},{paint:{"fill-color":Se(["get",r[3].kind],ft(r[3].kind),r[4]),"fill-opacity":X(.5,.7)}},{layout:{visibility:r[3].kind!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Vr]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new Ee({props:o}),e.$on("click",r[6]);const u=[H(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3].kind!=""?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ye({props:a}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(i,f){k(e,i,f),$(i,l,f),k(t,i,f),n=!0},p(i,f){const c=f&24?te(s,[f&0&&oe(H(Ye)),f&0&&{sourceLayer:Ye},f&24&&{paint:{"fill-color":Se(["get",i[3].kind],ft(i[3].kind),i[4]),"fill-opacity":X(.5,.7)}},f&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}},s[4],s[5],s[6]]):{};f&131080&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&8?te(u,[f&0&&oe(H(`${Ye}-outline`)),f&0&&{sourceLayer:Ye},u[2],f&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function Kr(r){let e,l,t,n,s,o,u,a,i,f,c,m,d,L;function y(N){r[7](N)}let S={$$slots:{right:[Ir],default:[Tr]},$$scope:{ctx:r}};r[0]!==void 0&&(S.checked=r[0]),e=new re({props:S}),G.push(()=>U(e,"checked",y)),e.$on("change",r[8]);let P=r[3].kind=="percent_households_with_car"&&Yn(r);function F(N){r[9](N)}let D={$$slots:{right:[zr],default:[Rr]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),s=new re({props:D}),G.push(()=>U(s,"checked",F)),s.$on("change",r[10]);let I=r[3].kind=="average_cars_per_household"&&Jn(r);function M(N){r[11](N)}let O={$$slots:{right:[Er],default:[jr]},$$scope:{ctx:r}};r[2]!==void 0&&(O.checked=r[2]),i=new re({props:O}),G.push(()=>U(i,"checked",M)),i.$on("change",r[12]);let R=r[3].kind=="population_density"&&Vn(r);return d=new de({props:{url:`pmtiles://${_e()}/v1/${Ye}.pmtiles`,$$slots:{default:[Qr]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),P&&P.c(),n=T(),b(s.$$.fragment),u=T(),I&&I.c(),a=T(),b(i.$$.fragment),c=T(),R&&R.c(),m=T(),b(d.$$.fragment)},m(N,q){k(e,N,q),$(N,t,q),P&&P.m(N,q),$(N,n,q),k(s,N,q),$(N,u,q),I&&I.m(N,q),$(N,a,q),k(i,N,q),$(N,c,q),R&&R.m(N,q),$(N,m,q),k(d,N,q),L=!0},p(N,[q]){const ne={};q&131072&&(ne.$$scope={dirty:q,ctx:N}),!l&&q&1&&(l=!0,ne.checked=N[0],W(()=>l=!1)),e.$set(ne),N[3].kind=="percent_households_with_car"?P?(P.p(N,q),q&8&&_(P,1)):(P=Yn(N),P.c(),_(P,1),P.m(n.parentNode,n)):P&&(ce(),g(P,1,1,()=>{P=null}),$e());const ie={};q&131072&&(ie.$$scope={dirty:q,ctx:N}),!o&&q&2&&(o=!0,ie.checked=N[1],W(()=>o=!1)),s.$set(ie),N[3].kind=="average_cars_per_household"?I?(I.p(N,q),q&8&&_(I,1)):(I=Jn(N),I.c(),_(I,1),I.m(a.parentNode,a)):I&&(ce(),g(I,1,1,()=>{I=null}),$e());const A={};q&131072&&(A.$$scope={dirty:q,ctx:N}),!f&&q&4&&(f=!0,A.checked=N[2],W(()=>f=!1)),i.$set(A),N[3].kind=="population_density"?R?(R.p(N,q),q&8&&_(R,1)):(R=Vn(N),R.c(),_(R,1),R.m(m.parentNode,m)):R&&(ce(),g(R,1,1,()=>{R=null}),$e());const K={};q&131080&&(K.$$scope={dirty:q,ctx:N}),d.$set(K)},i(N){L||(_(e.$$.fragment,N),_(P),_(s.$$.fragment,N),_(I),_(i.$$.fragment,N),_(R),_(d.$$.fragment,N),L=!0)},o(N){g(e.$$.fragment,N),g(P),g(s.$$.fragment,N),g(I),g(i.$$.fragment,N),g(R),g(d.$$.fragment,N),L=!1},d(N){N&&(p(t),p(n),p(u),p(a),p(c),p(m)),w(e,N),P&&P.d(N),w(s,N),I&&I.d(N),w(i,N),R&&R.d(N),w(d,N)}}}let Ye="census_output_areas";function Zr(r){return r.show?r.kind:null}function Xr(r){return{show:!0,kind:r}}function ft(r){return r=="percent_households_with_car"?[0,20,40,60,80,100]:r=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const Qn=r=>r.toLocaleString();function xr(r,e,l){let t,n=Q.sequential_low_to_high,o=vt(Ye,{show:!1,kind:""},Zr,Xr);E(r,o,P=>l(3,t=P));let u=t.kind=="percent_households_with_car",a=t.kind=="average_cars_per_household",i=t.kind=="population_density";function f(P){let F=P.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${F}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${F}`,"_blank")}function c(P){u=P,l(0,u)}const m=()=>{l(1,a=!1),l(2,i=!1)};function d(P){a=P,l(1,a)}const L=()=>{l(0,u=!1),l(2,i=!1)};function y(P){i=P,l(2,i)}const S=()=>{l(0,u=!1),l(1,a=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(u?(Ae(o,t.show=!0,t),Ae(o,t.kind="percent_households_with_car",t)):a?(Ae(o,t.show=!0,t),Ae(o,t.kind="average_cars_per_household",t)):i?(Ae(o,t.show=!0,t),Ae(o,t.kind="population_density",t)):(Ae(o,t.show=!1,t),Ae(o,t.kind="",t)))},[u,a,i,t,n,o,f,c,m,d,L,y,S]}class eo extends J{constructor(e){super(),V(this,e,xr,Kr,Y,{})}}function to(r){let e,l,t;return e=new qe({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Combined authorities`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function no(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function lo(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[no]},$$scope:{ctx:r}}}),o=new ze({}),{c(){e=C("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of December 2022."),s=T(),b(o.$$.fragment)},m(a,i){$(a,e,i),h(e,l),k(t,e,null),h(e,n),$(a,s,i),k(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function so(r){let e,l,t;return l=new ue({props:{$$slots:{default:[lo]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ro(r){let e,l=r[4].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&z(t,l)},d(n){n&&p(e)}}}function oo(r){let e,l;return e=new fe({props:{$$slots:{default:[ro,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function io(r){let e,l,t,n;const s=[H(Ct),{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[oo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new Ee({props:o}),e.$on("click",fo);const u=[H(`${Ct}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ye({props:a}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(i,f){k(e,i,f),$(i,l,f),k(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&oe(H(Ct)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[3],s[4],s[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&oe(H(`${Ct}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function ao(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[so],default:[to]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new wt({props:{data:`${_e()}/v1/${Ct}.geojson`,$$slots:{default:[io]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Ct="combined_authorities";function fo(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function uo(r,e,l){let t,n=Q.combined_authorities,s=Ce(Ct);E(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class co extends J{constructor(e){super(),V(this,e,uo,ao,Y,{})}}function $o(r){let e;return{c(){e=v("Indices of Multiple Deprivation")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function po(r){let e;return{c(){e=v(`DLUCH GIS
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function mo(r){let e;return{c(){e=v(`here
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function _o(r){let e,l,t,n,s,o,u,a,i;return t=new Z({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[po]},$$scope:{ctx:r}}}),s=new Z({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[mo]},$$scope:{ctx:r}}}),a=new ze({}),{c(){e=C("p"),l=v("The 2019 English IMD scores come from "),b(t.$$.fragment),n=v(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(s.$$.fragment),o=v("."),u=T(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),$(f,u,c),k(a,f,c),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const d={};c&64&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){i||(_(t.$$.fragment,f),_(s.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(t.$$.fragment,f),g(s.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(s),w(a,f)}}}function go(r){let e,l,t;return l=new ue({props:{$$slots:{default:[_o]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Kn(r){let e,l;return e=new Ue({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ho(r){let e,l=r[5].LSOA11CD+"",t,n,s,o=r[5].score+"",u,a,i,f,c,m=r[5].rank.toLocaleString()+"",d,L;return{c(){e=C("p"),t=v(l),n=v(` has an IMD score of
        `),s=C("b"),u=v(o),a=T(),i=C("p"),f=v("Rank: "),c=C("b"),d=v(m),L=v(`
        / 32,844 LSOAs`)},m(y,S){$(y,e,S),h(e,t),h(e,n),h(e,s),h(s,u),$(y,a,S),$(y,i,S),h(i,f),h(i,c),h(c,d),h(i,L)},p(y,S){S&32&&l!==(l=y[5].LSOA11CD+"")&&z(t,l),S&32&&o!==(o=y[5].score+"")&&z(u,o),S&32&&m!==(m=y[5].rank.toLocaleString()+"")&&z(d,m)},d(y){y&&(p(e),p(a),p(i))}}}function bo(r){let e,l;return e=new fe({props:{$$slots:{default:[ho,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ko(r){let e,l,t,n;const s=[H(Je),{sourceLayer:Je},{paint:{"fill-color":Se(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":X(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[bo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new Ee({props:o});const u=[H(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ye({props:a}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(i,f){k(e,i,f),$(i,l,f),k(t,i,f),n=!0},p(i,f){const c=f&7?te(s,[f&0&&oe(H(Je)),f&0&&{sourceLayer:Je},f&6&&{paint:{"fill-color":Se(["-",10,["get","decile"]],i[2],i[1]),"fill-opacity":X(.5,.7)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5]]):{};f&64&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&1?te(u,[f&0&&oe(H(`${Je}-outline`)),f&0&&{sourceLayer:Je},u[2],f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function wo(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[go],default:[$o]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0]&&Kn(r);return s=new de({props:{url:`pmtiles://${_e()}/v1/${Je}.pmtiles`,$$slots:{default:[ko]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=Kn(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Je="imd";function vo(r,e,l){let t,n=Q.sequential_low_to_high,s=[0,2,4,6,8,10],o=Ce(Je);E(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class yo extends J{constructor(e){super(),V(this,e,vo,wo,Y,{})}}function So(r){let e,l,t;return e=new qe({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Local Authority Districts`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Co(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Lo(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Co]},$$scope:{ctx:r}}}),o=new ze({}),{c(){e=C("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of January 2024."),s=T(),b(o.$$.fragment)},m(a,i){$(a,e,i),h(e,l),k(t,e,null),h(e,n),$(a,s,i),k(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function To(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Lo]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Mo(r){let e,l=r[4].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&z(t,l)},d(n){n&&p(e)}}}function No(r){let e,l;return e=new fe({props:{$$slots:{default:[Mo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Po(r){let e,l,t,n;const s=[H(Lt),{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[No]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new Ee({props:o}),e.$on("click",Io);const u=[H(`${Lt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ye({props:a}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(i,f){k(e,i,f),$(i,l,f),k(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&oe(H(Lt)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[3],s[4],s[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&oe(H(`${Lt}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function Oo(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[To],default:[So]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new wt({props:{data:`${_e()}/v1/${Lt}.geojson`,$$slots:{default:[Po]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Lt="local_authority_districts";function Io(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Ro(r,e,l){let t,n=Q.local_authority_districts,s=Ce(Lt);E(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Do extends J{constructor(e){super(),V(this,e,Ro,Oo,Y,{})}}function Ao(r){let e,l,t;return e=new qe({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Local Planning Authorities`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Fo(r){let e;return{c(){e=v(`local authority
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function qo(r){let e;return{c(){e=v(`national park authorit
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function zo(r){let e;return{c(){e=v(`development corporation
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function jo(r){let e;return{c(){e=v("this map")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ho(r){let e;return{c(){e=v(`planning.data.gov.uk
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Bo(r){let e,l,t,n,s,o,u,a,i,f,c,m,d,L,y,S,P,F,D,I,M,O;return t=new Z({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Fo]},$$scope:{ctx:r}}}),s=new Z({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[qo]},$$scope:{ctx:r}}}),u=new Z({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[zo]},$$scope:{ctx:r}}}),d=new Z({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[jo]},$$scope:{ctx:r}}}),F=new Z({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ho]},$$scope:{ctx:r}}}),M=new ze({}),{c(){e=C("p"),l=v("LPAs may be a "),b(t.$$.fragment),n=v(", "),b(s.$$.fragment),o=v("y, or "),b(u.$$.fragment),a=v("."),i=T(),f=C("p"),c=C("strong"),m=v(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(d.$$.fragment),L=v(" to get more details."),y=T(),S=C("p"),P=v("Data from ONS Geography via "),b(F.$$.fragment),D=v(", as of November 2022."),I=T(),b(M.$$.fragment)},m(R,N){$(R,e,N),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),k(u,e,null),h(e,a),$(R,i,N),$(R,f,N),h(f,c),h(c,m),k(d,c,null),h(c,L),$(R,y,N),$(R,S,N),h(S,P),k(F,S,null),h(S,D),$(R,I,N),k(M,R,N),O=!0},p(R,N){const q={};N&32&&(q.$$scope={dirty:N,ctx:R}),t.$set(q);const ne={};N&32&&(ne.$$scope={dirty:N,ctx:R}),s.$set(ne);const ie={};N&32&&(ie.$$scope={dirty:N,ctx:R}),u.$set(ie);const A={};N&32&&(A.$$scope={dirty:N,ctx:R}),d.$set(A);const K={};N&32&&(K.$$scope={dirty:N,ctx:R}),F.$set(K)},i(R){O||(_(t.$$.fragment,R),_(s.$$.fragment,R),_(u.$$.fragment,R),_(d.$$.fragment,R),_(F.$$.fragment,R),_(M.$$.fragment,R),O=!0)},o(R){g(t.$$.fragment,R),g(s.$$.fragment,R),g(u.$$.fragment,R),g(d.$$.fragment,R),g(F.$$.fragment,R),g(M.$$.fragment,R),O=!1},d(R){R&&(p(e),p(i),p(f),p(y),p(S),p(I)),w(t),w(s),w(u),w(d),w(F),w(M,R)}}}function Go(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Bo]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Eo(r){let e,l=r[4].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&z(t,l)},d(n){n&&p(e)}}}function Uo(r){let e,l;return e=new fe({props:{$$slots:{default:[Eo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Wo(r){let e,l,t,n;const s=[H(Ve),{sourceLayer:Ve},{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[Uo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new Ee({props:o});const u=[H(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ye({props:a}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(i,f){k(e,i,f),$(i,l,f),k(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&oe(H(Ve)),f&0&&{sourceLayer:Ve},f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&oe(H(`${Ve}-outline`)),f&0&&{sourceLayer:Ve},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function Yo(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Go],default:[Ao]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new de({props:{url:`pmtiles://${_e()}/v1/${Ve}.pmtiles`,$$slots:{default:[Wo]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Ve="local_planning_authorities";function Jo(r,e,l){let t,n=Q.local_planning_authorities,s=Ce(Ve);E(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Vo extends J{constructor(e){super(),V(this,e,Jo,Yo,Y,{})}}function Qo(r){let e,l,t;return e=new qe({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Parliamentary constituencies`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Ko(r){let e;return{c(){e=v(`Ordnance Survey Boundary-Line
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Zo(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Ko]},$$scope:{ctx:r}}}),o=new ze({}),{c(){e=C("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of May 2023."),s=T(),b(o.$$.fragment)},m(a,i){$(a,e,i),h(e,l),k(t,e,null),h(e,n),$(a,s,i),k(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function Xo(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Zo]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function xo(r){let e,l=r[4].Name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].Name+"")&&z(t,l)},d(n){n&&p(e)}}}function ei(r){let e,l;return e=new fe({props:{$$slots:{default:[xo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ti(r){let e,l,t,n;const s=[H(Qe),{sourceLayer:Qe},{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[ei]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new Ee({props:o}),e.$on("click",li);const u=[H(`${Qe}-outline`),{sourceLayer:Qe},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ye({props:a}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(i,f){k(e,i,f),$(i,l,f),k(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&oe(H(Qe)),f&0&&{sourceLayer:Qe},f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5],s[6]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&oe(H(`${Qe}-outline`)),f&0&&{sourceLayer:Qe},f&2&&{paint:{"line-color":i[1],"line-width":5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function ni(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Xo],default:[Qo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new de({props:{url:`pmtiles://${_e()}/v1/${Qe}.pmtiles`,$$slots:{default:[ti]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Qe="parliamentary_constituencies";function li(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function si(r,e,l){let t,n=Q.parliamentary_constituencies,s=Ce(Qe);E(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class ri extends J{constructor(e){super(),V(this,e,si,ni,Y,{})}}function oi(r){let e;return{c(){e=v("Pollution")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ii(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ai(r){let e,l,t,n,s,o,u,a,i;return t=new Z({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[ii]},$$scope:{ctx:r}}}),a=new ze({}),{c(){e=C("p"),l=v("Most layers show air quality data from "),b(t.$$.fragment),n=v(`. The measurements are annual means, in units of
        µgm
        `),s=C("sup"),s.textContent="3",o=v(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=T(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,l),k(t,e,null),h(e,n),h(e,s),h(e,o),$(f,u,c),k(a,f,c),i=!0},p(f,c){const m={};c&4096&&(m.$$scope={dirty:c,ctx:f}),t.$set(m)},i(f){i||(_(t.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(t.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(a,f)}}}function fi(r){let e,l,t;return l=new ue({props:{$$slots:{default:[ai]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&4096&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Zn(r){let e,l,t,n,s=r[3](r[0].pollutant)+"",o,u,a,i,f,c,m,d,L,y,S,P,F;function D(M){r[6](M)}let I={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return r[0].pollutant!==void 0&&(I.value=r[0].pollutant),e=new pt({props:I}),G.push(()=>U(e,"value",D)),{c(){b(e.$$.fragment),t=T(),n=C("p"),o=v(s),u=T(),a=C("div"),i=C("label"),f=v(`Opacity
      `),c=C("input"),m=T(),d=C("img"),B(c,"type","range"),B(c,"min","0"),B(c,"max","100"),en(d.src,L=r[4](r[0].pollutant))||B(d,"src",L),B(d,"width",150),B(d,"alt",y=`Legend for ${r[0].pollutant} layer`)},m(M,O){k(e,M,O),$(M,t,O),$(M,n,O),h(n,o),$(M,u,O),$(M,a,O),h(a,i),h(i,f),h(i,c),xe(c,r[0].opacity),$(M,m,O),$(M,d,O),S=!0,P||(F=[st(c,"change",r[7]),st(c,"input",r[7])],P=!0)},p(M,O){const R={};!l&&O&1&&(l=!0,R.value=M[0].pollutant,W(()=>l=!1)),e.$set(R),(!S||O&1)&&s!==(s=M[3](M[0].pollutant)+"")&&z(o,s),O&1&&xe(c,M[0].opacity),(!S||O&1&&!en(d.src,L=M[4](M[0].pollutant)))&&B(d,"src",L),(!S||O&1&&y!==(y=`Legend for ${M[0].pollutant} layer`))&&B(d,"alt",y)},i(M){S||(_(e.$$.fragment,M),S=!0)},o(M){g(e.$$.fragment,M),S=!1},d(M){M&&(p(t),p(n),p(u),p(a),p(m),p(d)),w(e,M),P=!1,$s(F)}}}function ui(r){let e,l;const t=[H("pollution"),{paint:{"raster-opacity":r[0].opacity/100}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new Ds({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[t[0],{paint:{"raster-opacity":s[0].opacity/100}},{layout:{visibility:s[0].show?"visible":"none"}}]):{};e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ci(r){let e,l,t,n,s,o;function u(f){r[5](f)}let a={$$slots:{right:[fi],default:[oi]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0].show&&Zn(r);return s=new sr({props:{tiles:[r[1]],tileSize:256,$$slots:{default:[ui]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&4096&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=Zn(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&2&&(d.tiles=[f[1]]),c&4097&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}function $i(r){return r.show?`${r.pollutant}/${r.opacity}`:null}function pi(r){let[e,l]=r.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function mi(r,e,l){let t,n,s,u=vt("pollution",{show:!1,pollutant:"PM25_viridis",opacity:50},$i,pi);E(r,u,y=>l(0,s=y));function a(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s.pollutant}/MapServer/WMSServer`}function i(y){return t[1]}function f(y){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${a()}?bbox={bbox-epsg-3857}&${S}`}function c(y){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${a()}?${S}`}function m(y){r.$$.not_equal(s.show,y)&&(s.show=y,u.set(s))}function d(y){r.$$.not_equal(s.pollutant,y)&&(s.pollutant=y,u.set(s))}function L(){s.opacity=Zt(this.value),u.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s.pollutant]),r.$$.dirty&1&&l(1,n=f(s.pollutant))},[s,n,u,i,c,m,d,L]}class _i extends J{constructor(e){super(),V(this,e,mi,ci,Y,{})}}function gi(r){let e;return{c(){e=v("Road noise")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function di(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function hi(r){let e,l,t,n,s,o,u,a,i;return s=new Z({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[di]},$$scope:{ctx:r}}}),a=new ze({}),{c(){e=C("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,l=T(),t=C("p"),n=v("Data from June 2019, produced by "),b(s.$$.fragment),o=v(". See there for methodology details"),u=T(),b(a.$$.fragment)},m(f,c){$(f,e,c),$(f,l,c),$(f,t,c),h(t,n),k(s,t,null),h(t,o),$(f,u,c),k(a,f,c),i=!0},p(f,c){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){i||(_(s.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(s.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(t),p(u)),w(s),w(a,f)}}}function bi(r){let e,l,t;return l=new ue({props:{$$slots:{default:[hi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Xn(r){let e,l;return e=new Ue({props:{colorScale:r[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ki(r){let e,l=r[4].noiseclass+"",t,n,s=xn(r[4].noiseclass)+"",o,u;return{c(){e=C("p"),t=v(l),n=v(" dB ("),o=v(s),u=v(")")},m(a,i){$(a,e,i),h(e,t),h(e,n),h(e,o),h(e,u)},p(a,i){i&16&&l!==(l=a[4].noiseclass+"")&&z(t,l),i&16&&s!==(s=xn(a[4].noiseclass)+"")&&z(o,s)},d(a){a&&p(e)}}}function wi(r){let e,l;return e=new fe({props:{$$slots:{default:[ki,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function vi(r){let e,l;const t=[H(Tt),{sourceLayer:Tt},{paint:{"fill-color":tt(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":X(.5,.8)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[wi]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new Ee({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?te(t,[o&0&&oe(H(Tt)),o&0&&{sourceLayer:Tt},o&2&&{paint:{"fill-color":tt(["get","noiseclass"],{"55.0-59.9":s[1][0],"60.0-64.9":s[1][0],"65.0-69.9":s[1][1],"70.0-74.9":s[1][1],">=75.0":s[1][2]},"red"),"fill-opacity":X(.5,.8)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function yi(r){let e,l,t,n,s,o;function u(f){r[3](f)}let a={$$slots:{right:[bi],default:[gi]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0]&&Xn(r);return s=new de({props:{url:`pmtiles://${_e()}/v1/${Tt}.pmtiles`,$$slots:{default:[vi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=Xn(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Tt="road_noise";function xn(r){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[r]}function Si(r,e,l){let t,n=[Q.sequential_low_to_high[0],Q.sequential_low_to_high[2],Q.sequential_low_to_high[4]],s=Ce(Tt);E(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Ci extends J{constructor(e){super(),V(this,e,Si,yi,Y,{})}}function Li(r){let e,l,t;return e=new qe({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Wards`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Ti(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Mi(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ti]},$$scope:{ctx:r}}}),o=new ze({}),{c(){e=C("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of May 2023."),s=T(),b(o.$$.fragment)},m(a,i){$(a,e,i),h(e,l),k(t,e,null),h(e,n),$(a,s,i),k(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function Ni(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Mi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Pi(r){let e,l=r[4].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&z(t,l)},d(n){n&&p(e)}}}function Oi(r){let e,l;return e=new fe({props:{$$slots:{default:[Pi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ii(r){let e,l,t,n;const s=[H(Ke),{sourceLayer:Ke},{paint:{"fill-color":r[1],"fill-opacity":X(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Oi]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new Ee({props:o}),e.$on("click",Di);const u=[H(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new ye({props:a}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(i,f){k(e,i,f),$(i,l,f),k(t,i,f),n=!0},p(i,f){const c=f&3?te(s,[f&0&&oe(H(Ke)),f&0&&{sourceLayer:Ke},f&2&&{paint:{"fill-color":i[1],"fill-opacity":X(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5],s[6]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?te(u,[f&0&&oe(H(`${Ke}-outline`)),f&0&&{sourceLayer:Ke},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function Ri(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Ni],default:[Li]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new de({props:{url:`pmtiles://${_e()}/v1/${Ke}.pmtiles`,$$slots:{default:[Ii]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Ke="wards";function Di(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Ai(r,e,l){let t,n=Q.wards,s=Ce(Ke);E(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Fi extends J{constructor(e){super(),V(this,e,Ai,Ri,Y,{})}}function qi(r){let e;return{c(){e=v("Open Data Commons Open Database License")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function zi(r){let e,l,t,n;return t=new Z({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[qi]},$$scope:{ctx:r}}}),{c(){e=C("p"),l=v("License: "),b(t.$$.fragment)},m(s,o){$(s,e,o),h(e,l),k(t,e,null),n=!0},p(s,[o]){const u={};o&1&&(u.$$scope={dirty:o,ctx:s}),t.$set(u)},i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){g(t.$$.fragment,s),n=!1},d(s){s&&p(e),w(t)}}}class nt extends J{constructor(e){super(),V(this,e,null,zi,Y,{})}}function ji(r){let e,l,t;return e=new qe({props:{color:Q.bus_route_with_lane}}),{c(){b(e.$$.fragment),l=v(`
  Bus routes`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Hi(r){let e;return{c(){e=v(`GTFS
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Bi(r){let e,l,t,n,s,o,u,a,i;return s=new Z({props:{href:"https://gtfs.org",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),a=new nt({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,l=T(),t=C("p"),n=v("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(s.$$.fragment),o=v(`, and doesn't include which routes are run or the
        frequency of service.`),u=T(),b(a.$$.fragment)},m(f,c){$(f,e,c),$(f,l,c),$(f,t,c),h(t,n),k(s,t,null),h(t,o),$(f,u,c),k(a,f,c),i=!0},p(f,c){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){i||(_(s.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(s.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(t),p(u)),w(s),w(a,f)}}}function Gi(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Bi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ei(r){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ui(r){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Wi(r){let e;function l(s,o){return s[3].has_bus_lane?Ui:Ei}let t=l(r),n=t(r);return{c(){n.c(),e=Ie()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t!==(t=l(s))&&(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function Yi(r){let e,l;return e=new fe({props:{$$slots:{default:[Wi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ji(r){let e,l;const t=[H(Mt),{sourceLayer:Mt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Q.bus_route_with_lane,Q.bus_route_without_lane],"line-width":5,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Yi]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ye({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&oe(H(Mt)),o&0&&{sourceLayer:Mt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Vi(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[Gi],default:[ji]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new de({props:{url:`pmtiles://${_e()}/v1/${Mt}.pmtiles`,$$slots:{default:[Ji]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Mt="bus_routes";function Qi(r,e,l){let t,n=Ce(Mt);E(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Ki extends J{constructor(e){super(),V(this,e,Qi,Vi,Y,{})}}function el(r){const e=ia(r[9]);r[10]=e[0],r[11]=e[1],r[12]=e[2]}function tl(r,e,l){const t=r.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function Zi(r){let e;return{c(){e=v("Cycle paths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Xi(r){let e,l,t,n,s,o,u,a;return u=new nt({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,l=T(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,n=T(),s=C("p"),s.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,o=T(),b(u.$$.fragment)},m(i,f){$(i,e,f),$(i,l,f),$(i,t,f),$(i,n,f),$(i,s,f),$(i,o,f),k(u,i,f),a=!0},p:x,i(i){a||(_(u.$$.fragment,i),a=!0)},o(i){g(u.$$.fragment,i),a=!1},d(i){i&&(p(e),p(l),p(t),p(n),p(s),p(o)),w(u,i)}}}function xi(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Xi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function nl(r){let e,l,t;return l=new ct({props:{$$slots:{default:[ta]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(l.$$.fragment),ge(e,"border","1px solid black"),ge(e,"padding","8px")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131073&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ea(r){let e,l,t=r[13]+"",n,s,o;return e=new qe({props:{color:r[14]}}),{c(){b(e.$$.fragment),l=T(),n=v(t),s=T()},m(u,a){k(e,u,a),$(u,l,a),$(u,n,a),$(u,s,a),o=!0},p:x,i(u){o||(_(e.$$.fragment,u),o=!0)},o(u){g(e.$$.fragment,u),o=!1},d(u){u&&(p(l),p(n),p(s)),w(e,u)}}}function ll(r){let e,l,t;function n(o){r[5](o,r[10])}let s={$$slots:{default:[ea]},$$scope:{ctx:r}};return r[0][r[10]]!==void 0&&(s.checked=r[0][r[10]]),e=new re({props:s}),G.push(()=>U(e,"checked",n)),{c(){b(e.$$.fragment)},m(o,u){k(e,o,u),t=!0},p(o,u){r=o;const a={};u&131072&&(a.$$scope={dirty:u,ctx:r}),!l&&u&5&&(l=!0,a.checked=r[0][r[10]],W(()=>l=!1)),e.$set(a)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function ta(r){let e,l,t=Fe(r[2]),n=[];for(let o=0;o<t.length;o+=1)n[o]=ll(tl(r,t,o));const s=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Ie()},m(o,u){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,u);$(o,e,u),l=!0},p(o,u){if(u&5){t=Fe(o[2]);let a;for(a=0;a<t.length;a+=1){const i=tl(o,t,a);n[a]?(n[a].p(i,u),_(n[a],1)):(n[a]=ll(i),n[a].c(),_(n[a],1),n[a].m(e.parentNode,e))}for(ce(),a=t.length;a<n.length;a+=1)s(a);$e()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)_(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)g(n[u]);l=!1},d(o){o&&p(e),at(n,o)}}}function na(r){el(r);let e,l=r[10]+"",t,n,s,o,u,a=r[11]+"",i,f,c,m,d=r[12]+"",L;return{c(){e=C("h2"),t=v(l),n=T(),s=C("p"),o=v("Direction: "),u=C("b"),i=T(),f=C("p"),c=v("Width: "),m=C("b"),L=v(d)},m(y,S){$(y,e,S),h(e,t),$(y,n,S),$(y,s,S),h(s,o),h(s,u),u.innerHTML=a,$(y,i,S),$(y,f,S),h(f,c),h(f,m),h(m,L)},p(y,S){el(y),S&512&&l!==(l=y[10]+"")&&z(t,l),S&512&&a!==(a=y[11]+"")&&(u.innerHTML=a),S&512&&d!==(d=y[12]+"")&&z(L,d)},d(y){y&&(p(e),p(n),p(s),p(i),p(f))}}}function la(r){let e,l;return e=new fe({props:{$$slots:{default:[na,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&131584&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function sa(r){let e,l;const t=[H(Nt),{sourceLayer:Nt},{paint:{"line-color":tt(["get","kind"],{track:Q.cycle_paths.track,lane:Q.cycle_paths.lane,shared_use_segregated:Q.cycle_paths.shared_use_segregated,shared_use_unsegregated:Q.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ge,"line-opacity":X(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[3](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[la]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ye({props:n}),e.$on("click",aa),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&9?te(t,[o&0&&oe(H(Nt)),o&0&&{sourceLayer:Nt},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&9&&{filter:s[3](s[0])},t[5],t[6],t[7]]):{};o&131072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ra(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[xi],default:[Zi]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0].show&&nl(r);return s=new de({props:{url:`pmtiles://${_e()}/v1/${Nt}.pmtiles`,$$slots:{default:[sa]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&131072&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=nl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&131073&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Nt="cycle_paths";function oa(r){return{show:!0,track:r.includes("track"),lane:r.includes("lane"),shared_use_segregated:r.includes("shared_use_segregated"),shared_use_unsegregated:r.includes("shared_use_unsegregated")}}function ia(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${l} ${r.direction}`,t]}function aa(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function fa(r,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],s={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function o(m){return m.show?n.filter(d=>m[d]).join(","):null}let u=vt(Nt,s,o,oa);E(r,u,m=>l(0,t=m));let a=[["track","Separated tracks",Q.cycle_paths.track],["lane","Unprotected lanes",Q.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Q.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Q.cycle_paths.shared_use_unsegregated]];function i(m){let d=n.filter(L=>m[L]);return["in",["get","kind"],["literal",d]]}function f(m){r.$$.not_equal(t.show,m)&&(t.show=m,u.set(t))}function c(m,d){r.$$.not_equal(t[d],m)&&(t[d]=m,u.set(t))}return[t,u,a,i,f,c]}class ua extends J{constructor(e){super(),V(this,e,fa,ra,Y,{})}}function ca(r){let e,l,t;return e=new qe({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Major Road Network`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function $a(r){let e;return{c(){e=v(`Major Road Network
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function pa(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[$a]},$$scope:{ctx:r}}}),o=new ze({}),{c(){e=C("p"),l=v("Data from the "),b(t.$$.fragment),n=v(", as of September 2021."),s=T(),b(o.$$.fragment)},m(a,i){$(a,e,i),h(e,l),k(t,e,null),h(e,n),$(a,s,i),k(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function ma(r){let e,l,t;return l=new ue({props:{$$slots:{default:[pa]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function _a(r){let e,l=(r[4].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&z(t,l)},d(n){n&&p(e)}}}function ga(r){let e,l;return e=new fe({props:{$$slots:{default:[_a,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function da(r){let e,l;const t=[H(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[ga]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ye({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?te(t,[o&0&&oe(H(Pt)),o&0&&{sourceLayer:Pt},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ha(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[ma],default:[ca]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new de({props:{url:`pmtiles://${_e()}/v1/${Pt}.pmtiles`,$$slots:{default:[da]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Pt="mrn";function ba(r,e,l){let t,n=Q.mrn,s=Ce(Pt);E(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class ka extends J{constructor(e){super(),V(this,e,ba,ha,Y,{})}}function wa(r){let e,l,t;return e=new qe({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Strategic Road Network`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function va(r){let e;return{c(){e=v(`OS Open Roads
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ya(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[va]},$$scope:{ctx:r}}}),o=new ze({}),{c(){e=C("p"),l=v("Data from "),b(t.$$.fragment),n=v(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),s=T(),b(o.$$.fragment)},m(a,i){$(a,e,i),h(e,l),k(t,e,null),h(e,n),$(a,s,i),k(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function Sa(r){let e,l,t;return l=new ue({props:{$$slots:{default:[ya]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ca(r){let e,l=(r[4].name??"Unknown SRN road")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&z(t,l)},d(n){n&&p(e)}}}function La(r){let e,l;return e=new fe({props:{$$slots:{default:[Ca,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ta(r){let e,l;const t=[H(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[La]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ye({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?te(t,[o&0&&oe(H(Ot)),o&0&&{sourceLayer:Ot},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ma(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Sa],default:[wa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new de({props:{url:`pmtiles://${_e()}/v1/${Ot}.pmtiles`,$$slots:{default:[Ta]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Ot="srn";function Na(r,e,l){let t,n=Q.srn,s=Ce(Ot);E(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Pa extends J{constructor(e){super(),V(this,e,Na,Ma,Y,{})}}function Oa(r){let e,l,t;return e=new qe({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  National Cycle Network`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Ia(r){let e;return{c(){e=v(`National Cycle Network
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ra(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Ia]},$$scope:{ctx:r}}}),o=new ze({}),{c(){e=C("p"),l=v("Data from Sustrans about the "),b(t.$$.fragment),n=v(", downloaded on 22/01/2024."),s=T(),b(o.$$.fragment)},m(a,i){$(a,e,i),h(e,l),k(t,e,null),h(e,n),$(a,s,i),k(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function Da(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Ra]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function sl(r){let e,l,t,n=r[4].Desc_+"",s;return{c(){e=C("li"),l=v("Description: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Desc_+"")&&z(s,n)},d(o){o&&p(e)}}}function rl(r){let e,l,t,n=r[4].Greenway+"",s;return{c(){e=C("li"),l=v("Is greenway: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Greenway+"")&&z(s,n)},d(o){o&&p(e)}}}function ol(r){let e,l,t,n=r[4].RouteType+"",s;return{c(){e=C("li"),l=v("Route type: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteType+"")&&z(s,n)},d(o){o&&p(e)}}}function il(r){let e,l,t,n=r[4].RouteNo+"",s;return{c(){e=C("li"),l=v("Route number: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteNo+"")&&z(s,n)},d(o){o&&p(e)}}}function al(r){let e,l,t,n=r[4].RouteCat+"",s;return{c(){e=C("li"),l=v("Route Category: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteCat+"")&&z(s,n)},d(o){o&&p(e)}}}function fl(r){let e,l,t,n=r[4].OpenStatus+"",s;return{c(){e=C("li"),l=v("Open Status: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].OpenStatus+"")&&z(s,n)},d(o){o&&p(e)}}}function ul(r){let e,l,t,n=r[4].Surface+"",s;return{c(){e=C("li"),l=v("Surface: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Surface+"")&&z(s,n)},d(o){o&&p(e)}}}function cl(r){let e,l,t,n=r[4].Quality+"",s;return{c(){e=C("li"),l=v("Quality: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Quality+"")&&z(s,n)},d(o){o&&p(e)}}}function $l(r){let e,l,t,n=r[4].RoadClass+"",s;return{c(){e=C("li"),l=v("Road Class: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RoadClass+"")&&z(s,n)},d(o){o&&p(e)}}}function Aa(r){let e,l,t,n,s,o,u,a,i,f=r[4].Desc_&&sl(r),c=r[4].Greenway&&rl(r),m=r[4].RouteType&&ol(r),d=r[4].RouteNo&&il(r),L=r[4].RouteCat&&al(r),y=r[4].OpenStatus&&fl(r),S=r[4].Surface&&ul(r),P=r[4].Quality&&cl(r),F=r[4].RoadClass&&$l(r);return{c(){e=C("ul"),f&&f.c(),l=T(),c&&c.c(),t=T(),m&&m.c(),n=T(),d&&d.c(),s=T(),L&&L.c(),o=T(),y&&y.c(),u=T(),S&&S.c(),a=T(),P&&P.c(),i=T(),F&&F.c()},m(D,I){$(D,e,I),f&&f.m(e,null),h(e,l),c&&c.m(e,null),h(e,t),m&&m.m(e,null),h(e,n),d&&d.m(e,null),h(e,s),L&&L.m(e,null),h(e,o),y&&y.m(e,null),h(e,u),S&&S.m(e,null),h(e,a),P&&P.m(e,null),h(e,i),F&&F.m(e,null)},p(D,I){D[4].Desc_?f?f.p(D,I):(f=sl(D),f.c(),f.m(e,l)):f&&(f.d(1),f=null),D[4].Greenway?c?c.p(D,I):(c=rl(D),c.c(),c.m(e,t)):c&&(c.d(1),c=null),D[4].RouteType?m?m.p(D,I):(m=ol(D),m.c(),m.m(e,n)):m&&(m.d(1),m=null),D[4].RouteNo?d?d.p(D,I):(d=il(D),d.c(),d.m(e,s)):d&&(d.d(1),d=null),D[4].RouteCat?L?L.p(D,I):(L=al(D),L.c(),L.m(e,o)):L&&(L.d(1),L=null),D[4].OpenStatus?y?y.p(D,I):(y=fl(D),y.c(),y.m(e,u)):y&&(y.d(1),y=null),D[4].Surface?S?S.p(D,I):(S=ul(D),S.c(),S.m(e,a)):S&&(S.d(1),S=null),D[4].Quality?P?P.p(D,I):(P=cl(D),P.c(),P.m(e,i)):P&&(P.d(1),P=null),D[4].RoadClass?F?F.p(D,I):(F=$l(D),F.c(),F.m(e,null)):F&&(F.d(1),F=null)},d(D){D&&p(e),f&&f.d(),c&&c.d(),m&&m.d(),d&&d.d(),L&&L.d(),y&&y.d(),S&&S.d(),P&&P.d(),F&&F.d()}}}function Fa(r){let e,l;return e=new fe({props:{$$slots:{default:[Aa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function qa(r){let e,l;const t=[H(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Fa]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ye({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?te(t,[o&0&&oe(H(It)),o&0&&{sourceLayer:It},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":4,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function za(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Da],default:[Oa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new de({props:{url:`pmtiles://${_e()}/v1/${It}.pmtiles`,$$slots:{default:[qa]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let It="national_cycle_network";function ja(r,e,l){let t,n=Q.national_cycle_network,s=Ce(It);E(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Ha extends J{constructor(e){super(),V(this,e,ja,za,Y,{})}}function pl(r,e,l){const t=r.slice();return t[6]=e[l][0],t[7]=e[l][1],t[8]=e[l][2],t}function Ba(r){let e;return{c(){e=v("OS Pavement widths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ga(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ea(r){let e,l,t,n,s,o,u,a,i,f,c;return i=new Z({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ga]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,l=T(),t=C("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,n=T(),s=C("p"),s.textContent="Data valid as of 1 January, 2024",o=T(),u=C("p"),a=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(i.$$.fragment),f=v(".")},m(m,d){$(m,e,d),$(m,l,d),$(m,t,d),$(m,n,d),$(m,s,d),$(m,o,d),$(m,u,d),h(u,a),k(i,u,null),h(u,f),c=!0},p(m,d){const L={};d&2048&&(L.$$scope={dirty:d,ctx:m}),i.$set(L)},i(m){c||(_(i.$$.fragment,m),c=!0)},o(m){g(i.$$.fragment,m),c=!1},d(m){m&&(p(e),p(l),p(t),p(n),p(s),p(o),p(u)),w(i)}}}function Ua(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Ea]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ml(r){let e,l;return e=new Ue({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Wa(r){let e,l,t=tn(r[5].angle+r[8])+"",n;return{c(){e=C("p"),l=new mt(!1),n=v(` side of the road: no pavement
          `),l.a=n},m(s,o){$(s,e,o),l.m(t,e),h(e,n)},p(s,o){o&32&&t!==(t=tn(s[5].angle+s[8])+"")&&l.p(t)},d(s){s&&p(e)}}}function Ya(r){let e,l,t=tn(r[5].angle+r[8])+"",n,s,o=r[6]+"",u,a,i,f=r[7]+"",c,m;return{c(){e=C("p"),l=new mt(!1),n=v(` side of the road:
            `),s=C("b"),u=v(o),a=v(`
            m average,
            `),i=C("b"),c=v(f),m=v(`
            m minimum
          `),l.a=n},m(d,L){$(d,e,L),l.m(t,e),h(e,n),h(e,s),h(s,u),h(e,a),h(e,i),h(i,c),h(e,m)},p(d,L){L&32&&t!==(t=tn(d[5].angle+d[8])+"")&&l.p(t),L&32&&o!==(o=d[6]+"")&&z(u,o),L&32&&f!==(f=d[7]+"")&&z(c,f)},d(d){d&&p(e)}}}function _l(r){let e;function l(s,o){return s[6]?Ya:Wa}let t=l(r),n=t(r);return{c(){n.c(),e=Ie()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function Ja(r){let e,l=Fe([[r[5].left_average,r[5].left_minimum,-90],[r[5].right_average,r[5].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=_l(pl(r,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=Ie()},m(n,s){for(let o=0;o<2;o+=1)t[o]&&t[o].m(n,s);$(n,e,s)},p(n,s){if(s&32){l=Fe([[n[5].left_average,n[5].left_minimum,-90],[n[5].right_average,n[5].right_minimum,90]]);let o;for(o=0;o<2;o+=1){const u=pl(n,l,o);t[o]?t[o].p(u,s):(t[o]=_l(u),t[o].c(),t[o].m(e.parentNode,e))}for(;o<2;o+=1)t[o].d(1)}},d(n){n&&p(e),at(t,n)}}}function Va(r){let e,l;return e=new fe({props:{openOn:"hover",$$slots:{default:[Ja,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&2080&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Qa(r){let e,l;const t=[H(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Se(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Ge,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Va]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ye({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&oe(H(Rt)),o&0&&{sourceLayer:Rt},t[2],t[3],o&6&&{paint:{"line-color":Se(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],s[2],s[1]),"line-width":Ge,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ka(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[Ua],default:[Ba]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0]&&ml(r);return s=new de({props:{url:`pmtiles://${Xt()}/v1/${Rt}.pmtiles`,$$slots:{default:[Qa]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=ml(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&2049&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Rt="pavement_widths";function Za(r){let e=Math.floor((r+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function tn(r){return`${Za(r)} <span style="display: inline-block; rotate: ${r}deg">⬆</span>`}function Xa(r,e,l){let t,n=Q.sequential_low_to_high,s=[0,2,4,6,8,13],o=Ce(Rt);E(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class xa extends J{constructor(e){super(),V(this,e,Xa,Ka,Y,{})}}function ef(r){let e;return{c(){e=v("Propensity to Cycle Tool")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function tf(r){let e;return{c(){e=v("the PCT website")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function nf(r){let e;return{c(){e=v("2017 journal article")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function lf(r){let e,l,t,n,s,o,u,a,i,f,c;return u=new Z({props:{href:"https://www.pct.bike",$$slots:{default:[tf]},$$scope:{ctx:r}}}),i=new Z({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,l=T(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,n=T(),s=C("p"),o=v("See "),b(u.$$.fragment),a=v(" and "),b(i.$$.fragment),f=v(" for details on methodology and data sources.")},m(m,d){$(m,e,d),$(m,l,d),$(m,t,d),$(m,n,d),$(m,s,d),h(s,o),k(u,s,null),h(s,a),k(i,s,null),h(s,f),c=!0},p(m,d){const L={};d&1024&&(L.$$scope={dirty:d,ctx:m}),u.$set(L);const y={};d&1024&&(y.$$scope={dirty:d,ctx:m}),i.$set(y)},i(m){c||(_(u.$$.fragment,m),_(i.$$.fragment,m),c=!0)},o(m){g(u.$$.fragment,m),g(i.$$.fragment,m),c=!1},d(m){m&&(p(e),p(l),p(t),p(n),p(s)),w(u),w(i)}}}function sf(r){let e,l,t;return l=new ue({props:{$$slots:{default:[lf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&1024&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function gl(r){let e,l,t,n,s,o,u,a;e=new Ue({props:{colorScale:r[1],limits:r[2]}});function i(d){r[6](d)}let f={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0].tripPurpose!==void 0&&(f.value=r[0].tripPurpose),t=new ps({props:f}),G.push(()=>U(t,"value",i));function c(d){r[7](d)}let m={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[0].scenario!==void 0&&(m.value=r[0].scenario),o=new pt({props:m}),G.push(()=>U(o,"value",c)),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment),s=T(),b(o.$$.fragment)},m(d,L){k(e,d,L),$(d,l,L),k(t,d,L),$(d,s,L),k(o,d,L),a=!0},p(d,L){const y={};!n&&L&1&&(n=!0,y.value=d[0].tripPurpose,W(()=>n=!1)),t.$set(y);const S={};!u&&L&1&&(u=!0,S.value=d[0].scenario,W(()=>u=!1)),o.$set(S)},i(d){a||(_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),a=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(o.$$.fragment,d),a=!1},d(d){d&&(p(l),p(s)),w(e,d),w(t,d),w(o,d)}}}function rf(r){let e,l=r[4](r[9])+"",t;return{c(){e=new mt(!1),t=Ie(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function of(r){let e,l;return e=new fe({props:{$$slots:{default:[rf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function af(r){let e,l;const t=[H(lt),{sourceLayer:lt},{paint:{"line-color":Se(["get",r[0].scenario],r[2],r[1]),"line-width":Ge,"line-opacity":X(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==lt?"visible":"none"}}];let n={$$slots:{default:[of]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ye({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&oe(H(lt)),o&0&&{sourceLayer:lt},o&7&&{paint:{"line-color":Se(["get",s[0].scenario],s[2],s[1]),"line-width":Ge,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==lt?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ff(r){let e,l=r[4](r[9])+"",t;return{c(){e=new mt(!1),t=Ie(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function uf(r){let e,l;return e=new fe({props:{$$slots:{default:[ff,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function cf(r){let e,l;const t=[H($t),{sourceLayer:$t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Se(["get",r[0].scenario],r[2],r[1]),"line-width":Ge,"line-opacity":X(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==$t?"visible":"none"}}];let n={$$slots:{default:[uf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ye({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&oe(H($t)),o&0&&{sourceLayer:$t},t[2],t[3],o&7&&{paint:{"line-color":Se(["get",s[0].scenario],s[2],s[1]),"line-width":Ge,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==$t?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function $f(r){let e,l,t,n,s,o,u,a;function i(m){r[5](m)}let f={$$slots:{right:[sf],default:[ef]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new re({props:f}),G.push(()=>U(e,"checked",i));let c=r[0].show&&gl(r);return s=new de({props:{url:`pmtiles://${_e()}/v1/${lt}.pmtiles`,$$slots:{default:[af]},$$scope:{ctx:r}}}),u=new de({props:{url:`pmtiles://${_e()}/v1/${$t}.pmtiles`,$$slots:{default:[cf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),c&&c.c(),n=T(),b(s.$$.fragment),o=T(),b(u.$$.fragment)},m(m,d){k(e,m,d),$(m,t,d),c&&c.m(m,d),$(m,n,d),k(s,m,d),$(m,o,d),k(u,m,d),a=!0},p(m,[d]){const L={};d&1024&&(L.$$scope={dirty:d,ctx:m}),!l&&d&1&&(l=!0,L.checked=m[0].show,W(()=>l=!1)),e.$set(L),m[0].show?c?(c.p(m,d),d&1&&_(c,1)):(c=gl(m),c.c(),_(c,1),c.m(n.parentNode,n)):c&&(ce(),g(c,1,1,()=>{c=null}),$e());const y={};d&1025&&(y.$$scope={dirty:d,ctx:m}),s.$set(y);const S={};d&1025&&(S.$$scope={dirty:d,ctx:m}),u.$set(S)},i(m){a||(_(e.$$.fragment,m),_(c),_(s.$$.fragment,m),_(u.$$.fragment,m),a=!0)},o(m){g(e.$$.fragment,m),g(c),g(s.$$.fragment,m),g(u.$$.fragment,m),a=!1},d(m){m&&(p(t),p(n),p(o)),w(e,m),c&&c.d(m),w(s,m),w(u,m)}}}let lt="pct_commute",$t="pct_school";function pf(r){return r.show?`${r.tripPurpose}/${r.scenario}`:null}function mf(r){let[e,l]=r.split("/");return{show:!0,tripPurpose:e,scenario:l}}function _f(r,e,l){let t,n=Q.sequential_low_to_high,s=[0,50,100,500,1e3,2e3],u=vt("pct",{show:!1,tripPurpose:lt,scenario:"baseline"},pf,mf);E(r,u,m=>l(0,t=m));function a(m){let d=m.baseline,L=m.gov_target,y=m.go_dutch,S=`<h2>Trip purpose: ${t.tripPurpose==lt?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)S+=`<p>Government target (2025): <b>${L.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${y.toLocaleString()}</b></p>`;else{let P=(L/d).toFixed(1),F=(y/d).toFixed(1);S+=`<p>Government target (2025): ${L.toLocaleString()} (<b>${P}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${y.toLocaleString()} (<b>${F}x</b> of baseline)</p>`}return S}function i(m){r.$$.not_equal(t.show,m)&&(t.show=m,u.set(t))}function f(m){r.$$.not_equal(t.tripPurpose,m)&&(t.tripPurpose=m,u.set(t))}function c(m){r.$$.not_equal(t.scenario,m)&&(t.scenario=m,u.set(t))}return[t,n,s,u,a,i,f,c]}class gf extends J{constructor(e){super(),V(this,e,_f,$f,Y,{})}}function df(r){let e;return{c(){e=v("OS Speeds")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function hf(r){let e;return{c(){e=v("Basemap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function bf(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function kf(r){let e,l,t,n,s,o,u,a,i,f,c,m;return t=new Z({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[hf]},$$scope:{ctx:r}}}),f=new Z({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){e=C("p"),l=v("The average speed data is collected over a six-month period by "),b(t.$$.fragment),n=v(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),s=T(),o=C("p"),o.textContent="Data valid as of 1 September, 2023",u=T(),a=C("p"),i=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),c=v(".")},m(d,L){$(d,e,L),h(e,l),k(t,e,null),h(e,n),$(d,s,L),$(d,o,L),$(d,u,L),$(d,a,L),h(a,i),k(f,a,null),h(a,c),m=!0},p(d,L){const y={};L&512&&(y.$$scope={dirty:L,ctx:d}),t.$set(y);const S={};L&512&&(S.$$scope={dirty:L,ctx:d}),f.$set(S)},i(d){m||(_(t.$$.fragment,d),_(f.$$.fragment,d),m=!0)},o(d){g(t.$$.fragment,d),g(f.$$.fragment,d),m=!1},d(d){d&&(p(e),p(s),p(o),p(u),p(a)),w(t),w(f)}}}function wf(r){let e,l,t;return l=new ue({props:{$$slots:{default:[kf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function dl(r){let e,l,t,n,s;e=new Ue({props:{colorScale:r[1],limits:r[2]}});function o(a){r[6](a)}let u={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0].kind!==void 0&&(u.value=r[0].kind),t=new ps({props:u}),G.push(()=>U(t,"value",o)),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(a,i){k(e,a,i),$(a,l,i),k(t,a,i),s=!0},p(a,i){const f={};!n&&i&1&&(n=!0,f.value=a[0].kind,W(()=>n=!1)),t.$set(f)},i(a){s||(_(e.$$.fragment,a),_(t.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),s=!1},d(a){a&&p(l),w(e,a),w(t,a)}}}function vf(r){let e,l,t=r[8].indicative_mph+"",n,s,o,u,a,i=r[8].highest_mph+"",f,c,m=r[4][r[8].highest_description]+"",d,L;return{c(){e=C("p"),l=v("Posted speed limit: "),n=v(t),s=v(" mph"),o=T(),u=C("p"),a=v("Highest average speed: "),f=v(i),c=v(" mph (during "),d=v(m),L=v(")")},m(y,S){$(y,e,S),h(e,l),h(e,n),h(e,s),$(y,o,S),$(y,u,S),h(u,a),h(u,f),h(u,c),h(u,d),h(u,L)},p(y,S){S&256&&t!==(t=y[8].indicative_mph+"")&&z(n,t),S&256&&i!==(i=y[8].highest_mph+"")&&z(f,i),S&256&&m!==(m=y[4][y[8].highest_description]+"")&&z(d,m)},d(y){y&&(p(e),p(o),p(u))}}}function yf(r){let e,l;return e=new fe({props:{$$slots:{default:[vf,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&768&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Sf(r){let e,l;const t=[H(Dt),{sourceLayer:Dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Se(["get",r[0].kind],r[2],r[1]),"line-width":Ge,"line-opacity":X(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={$$slots:{default:[yf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ye({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&oe(H(Dt)),o&0&&{sourceLayer:Dt},t[2],t[3],o&7&&{paint:{"line-color":Se(["get",s[0].kind],s[2],s[1]),"line-width":Ge,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0].show?"visible":"none"}}]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Cf(r){let e,l,t,n,s,o;function u(f){r[5](f)}let a={$$slots:{right:[wf],default:[df]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0].show&&dl(r);return s=new de({props:{url:`pmtiles://${Xt()}/v1/${Dt}.pmtiles`,$$slots:{default:[Sf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&512&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=dl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&513&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Dt="road_speeds";function Lf(r){return r.show?r.kind:null}function Tf(r){return{show:!0,kind:r}}function Mf(r,e,l){let t,n=Q.sequential_low_to_high,s=[0,20,30,40,50,90],u=vt(Dt,{show:!1,kind:"indicative_mph"},Lf,Tf);E(r,u,c=>l(0,t=c));let a={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(c){r.$$.not_equal(t.show,c)&&(t.show=c,u.set(t))}function f(c){r.$$.not_equal(t.kind,c)&&(t.kind=c,u.set(t))}return[t,n,s,u,a,i,f]}class Nf extends J{constructor(e){super(),V(this,e,Mf,Cf,Y,{})}}function Pf(r){let e;return{c(){e=v("OS Road widths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Of(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function If(r){let e,l,t,n,s,o,u,a,i;return u=new Z({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Of]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,l=T(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",n=T(),s=C("p"),o=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),a=v(".")},m(f,c){$(f,e,c),$(f,l,c),$(f,t,c),$(f,n,c),$(f,s,c),h(s,o),k(u,s,null),h(s,a),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),u.$set(m)},i(f){i||(_(u.$$.fragment,f),i=!0)},o(f){g(u.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(t),p(n),p(s)),w(u)}}}function Rf(r){let e,l,t;return l=new ue({props:{$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function hl(r){let e,l;return e=new Ue({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Df(r){let e,l,t,n=r[5].average+"",s,o,u,a,i,f,c=r[5].minimum+"",m,d;return{c(){e=C("p"),l=v("Average width: "),t=C("b"),s=v(n),o=v(`
        meters`),u=T(),a=C("p"),i=v("Minimum width: "),f=C("b"),m=v(c),d=v(`
        meters`)},m(L,y){$(L,e,y),h(e,l),h(e,t),h(t,s),h(e,o),$(L,u,y),$(L,a,y),h(a,i),h(a,f),h(f,m),h(a,d)},p(L,y){y&32&&n!==(n=L[5].average+"")&&z(s,n),y&32&&c!==(c=L[5].minimum+"")&&z(m,c)},d(L){L&&(p(e),p(u),p(a))}}}function Af(r){let e,l;return e=new fe({props:{$$slots:{default:[Df,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ff(r){let e,l;const t=[H(At),{sourceLayer:At},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Se(["get","average"],r[2],r[1]),"line-width":Ge,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Af]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ye({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&oe(H(At)),o&0&&{sourceLayer:At},t[2],t[3],o&6&&{paint:{"line-color":Se(["get","average"],s[2],s[1]),"line-width":Ge,"line-opacity":X(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function qf(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[Rf],default:[Pf]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0]&&hl(r);return s=new de({props:{url:`pmtiles://${Xt()}/v1/${At}.pmtiles`,$$slots:{default:[Ff]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=hl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let At="road_widths";function zf(r,e,l){let t,n=Q.sequential_low_to_high,s=[0,5,10,15,20,100],o=Ce(At);E(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class jf extends J{constructor(e){super(),V(this,e,zf,qf,Y,{})}}function Hf(r){let e,l,t;return e=new qe({props:{color:Q.trams}}),{c(){b(e.$$.fragment),l=v(`
  Trams`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Bf(r){let e,l,t,n;return t=new nt({}),{c(){e=C("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,l=T(),b(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),k(t,s,o),n=!0},p:x,i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){g(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function Gf(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&8&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ef(r){let e,l;const t=[H(Ft),{sourceLayer:Ft},{paint:{"line-color":Q.trams,"line-width":5,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new ye({props:n}),e.$on("click",Wf),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&oe(H(Ft)),o&0&&{sourceLayer:Ft},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Uf(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[Gf],default:[Hf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new de({props:{url:`pmtiles://${_e()}/v1/${Ft}.pmtiles`,$$slots:{default:[Ef]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};i&8&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&9&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Ft="trams";function Wf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Yf(r,e,l){let t,n=Ce(Ft);E(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Jf extends J{constructor(e){super(),V(this,e,Yf,Uf,Y,{})}}function Vf(r){let e;return{c(){e=v("Bus stops")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Qf(r){let e;return{c(){e=v(`Bus Open Data Service
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Kf(r){let e,l,t,n,s,o,u,a,i;return t=new Z({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Qf]},$$scope:{ctx:r}}}),a=new ze({}),{c(){e=C("p"),l=v("Data from the "),b(t.$$.fragment),n=v(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),s=T(),o=C("p"),o.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=T(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,l),k(t,e,null),h(e,n),$(f,s,c),$(f,o,c),$(f,u,c),k(a,f,c),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),t.$set(m)},i(f){i||(_(t.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(t.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(s),p(o),p(u)),w(t),w(a,f)}}}function Zf(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Kf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function bl(r){let e,l,t,n;return t=new Ue({props:{colorScale:r[1],limits:r[2]}}),{c(){e=C("p"),e.textContent="Peak hourly frequency:",l=T(),b(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),k(t,s,o),n=!0},p:x,i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){g(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function Xf(r){let e,l,t,n=r[5].stop_name+"",s,o,u,a,i,f=r[5].peak+"",c,m,d,L,y,S=r[5].peak_description+"",P,F,D,I,M,O=r[5].total+"",R,N,q=r[5].total_description+"",ne,ie;return{c(){e=C("p"),l=v("Stop name: "),t=C("b"),s=v(n),o=T(),u=C("p"),a=v("Peak: "),i=C("b"),c=v(f),m=v(`
        buses during the busiest hour of any day`),d=T(),L=C("p"),y=v("The peak hour is "),P=v(S),F=T(),D=C("p"),I=v("Total buses per day: "),M=C("b"),R=v(O),N=v(`
        (for `),ne=v(q),ie=v(", the busiest day of the week)")},m(A,K){$(A,e,K),h(e,l),h(e,t),h(t,s),$(A,o,K),$(A,u,K),h(u,a),h(u,i),h(i,c),h(u,m),$(A,d,K),$(A,L,K),h(L,y),h(L,P),$(A,F,K),$(A,D,K),h(D,I),h(D,M),h(M,R),h(D,N),h(D,ne),h(D,ie)},p(A,K){K&32&&n!==(n=A[5].stop_name+"")&&z(s,n),K&32&&f!==(f=A[5].peak+"")&&z(c,f),K&32&&S!==(S=A[5].peak_description+"")&&z(P,S),K&32&&O!==(O=A[5].total+"")&&z(R,O),K&32&&q!==(q=A[5].total_description+"")&&z(ne,q)},d(A){A&&(p(e),p(o),p(u),p(d),p(L),p(F),p(D))}}}function xf(r){let e,l;return e=new fe({props:{$$slots:{default:[Xf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function eu(r){let e,l;const t=[H(qt),{sourceLayer:qt},{paint:{"circle-color":Se(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[xf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new bt({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&oe(H(qt)),o&0&&{sourceLayer:qt},o&6&&{paint:{"circle-color":Se(["get","peak"],s[2],s[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function tu(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[Zf],default:[Vf]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0]&&bl(r);return s=new de({props:{url:`pmtiles://${_e()}/v1/${qt}.pmtiles`,$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=bl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let qt="bus_stops";function nu(r,e,l){let t,n=Q.sequential_low_to_high,s=[0,3,10,20,30,100],o=Ce(qt);E(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class lu extends J{constructor(e){super(),V(this,e,nu,tu,Y,{})}}function su(r){let e;return{c(){e=v("Crossings")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ru(r){let e;return{c(){e=v("crossing")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ou(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[ru]},$$scope:{ctx:r}}}),o=new nt({}),{c(){e=C("p"),l=v("This shows "),b(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=T(),b(o.$$.fragment)},m(a,i){$(a,e,i),h(e,l),k(t,e,null),h(e,n),$(a,s,i),k(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function iu(r){let e,l,t;return l=new ue({props:{$$slots:{default:[ou]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function kl(r){let e,l;return e=new rn({props:{rows:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function au(r){let e,l=wl(r[4])+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=wl(n[4])+"")&&z(t,l)},d(n){n&&p(e)}}}function fu(r){let e,l;return e=new fe({props:{$$slots:{default:[au,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function uu(r){let e,l;const t=[H(zt),{sourceLayer:zt},{paint:{"circle-color":tt(["get","crossing"],{traffic_signals:Q.signalized_crossing},Q.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[fu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new bt({props:n}),e.$on("click",$u),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&oe(H(zt)),o&0&&{sourceLayer:zt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function cu(r){let e,l,t,n,s,o;function u(f){r[3](f)}let a={$$slots:{right:[iu],default:[su]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0]&&kl(r);return s=new de({props:{url:`pmtiles://${_e()}/v1/${zt}.pmtiles`,$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=kl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let zt="crossings";function wl(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function $u(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function pu(r,e,l){let t,n=Ce(zt);E(r,n,u=>l(0,t=u));let s=[["Signalized",Q.signalized_crossing],["Other",Q.other_crossing]];function o(u){t=u,n.set(t)}return[t,n,s,o]}class mu extends J{constructor(e){super(),V(this,e,pu,cu,Y,{})}}function _u(r){let e;return{c(){e=v("Gradients")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function gu(r){let e;return{c(){e=v("OS Terrain 50")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function du(r){let e,l,t,n,s,o,u,a,i,f,c,m,d;return u=new Z({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[gu]},$$scope:{ctx:r}}}),f=new ze({}),m=new nt({}),{c(){e=C("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,l=T(),t=C("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,n=T(),s=C("p"),o=v("This layer is built from "),b(u.$$.fragment),a=v(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),i=T(),b(f.$$.fragment),c=T(),b(m.$$.fragment)},m(L,y){$(L,e,y),$(L,l,y),$(L,t,y),$(L,n,y),$(L,s,y),h(s,o),k(u,s,null),h(s,a),$(L,i,y),k(f,L,y),$(L,c,y),k(m,L,y),d=!0},p(L,y){const S={};y&64&&(S.$$scope={dirty:y,ctx:L}),u.$set(S)},i(L){d||(_(u.$$.fragment,L),_(f.$$.fragment,L),_(m.$$.fragment,L),d=!0)},o(L){g(u.$$.fragment,L),g(f.$$.fragment,L),g(m.$$.fragment,L),d=!1},d(L){L&&(p(e),p(l),p(t),p(n),p(s),p(i),p(c)),w(u),w(f,L),w(m,L)}}}function hu(r){let e,l,t;return l=new ue({props:{$$slots:{default:[du]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function vl(r){let e,l;return e=new Ue({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function bu(r){let e,l,t,n=Math.abs(r[5].gradient)/100+"",s,o;return{c(){e=C("p"),l=v("Gradient: "),t=C("b"),s=v(n),o=v(`
        %`)},m(u,a){$(u,e,a),h(e,l),h(e,t),h(t,s),h(e,o)},p(u,a){a&32&&n!==(n=Math.abs(u[5].gradient)/100+"")&&z(s,n)},d(u){u&&p(e)}}}function ku(r){let e,l;return e=new fe({props:{$$slots:{default:[bu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function wu(r){let e,l,t,n;const s=[H(Ze),{sourceLayer:Ze},{manageHoverState:!0},{paint:{"line-color":Se(["/",["abs",["get","gradient"]],100],r[2],r[1]),"line-width":Ge,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let o={$$slots:{default:[ku]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=ee(o,s[i]);e=new ye({props:o});const u=[H(Ze+"_arrows"),{sourceLayer:Ze},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new hn({props:a}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(i,f){k(e,i,f),$(i,l,f),k(t,i,f),n=!0},p(i,f){const c=f&7?te(s,[f&0&&oe(H(Ze)),f&0&&{sourceLayer:Ze},s[2],f&6&&{paint:{"line-color":Se(["/",["abs",["get","gradient"]],100],i[2],i[1]),"line-width":Ge,"line-opacity":X(1,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};f&64&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&1?te(u,[f&0&&oe(H(Ze+"_arrows")),f&0&&{sourceLayer:Ze},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function vu(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[hu],default:[_u]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0]&&vl(r);return s=new de({props:{url:`pmtiles://${_e()}/v1/${Ze}.pmtiles`,$$slots:{default:[wu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=vl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Ze="gradient";function yu(r,e,l){let t,n=Q.gradient_flat_to_steep,s=[0,3,5,8,10,20,100],o=Ce(Ze);E(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class Su extends J{constructor(e){super(),V(this,e,yu,vu,Y,{})}}function Cu(r){let e,l,t;return{c(){e=C("img"),t=v(`
  Cycle parking`),en(e.src,l=ws)||B(e,"src",l),B(e,"alt","a logo representing cycle parking")},m(n,s){$(n,e,s),$(n,t,s)},p:x,d(n){n&&(p(e),p(t))}}}function Lu(r){let e;return{c(){e=v("OpenStreetMap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Tu(r){let e;return{c(){e=v("OpenStreetMap Carto")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Mu(r){let e,l,t,n,s,o,u,a,i,f,c;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Lu]},$$scope:{ctx:r}}}),a=new Z({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Tu]},$$scope:{ctx:r}}}),f=new nt({}),{c(){e=C("p"),l=v("Cycle parking, according to "),b(t.$$.fragment),n=v(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),s=T(),o=C("p"),u=v("Icon from "),b(a.$$.fragment),i=T(),b(f.$$.fragment)},m(m,d){$(m,e,d),h(e,l),k(t,e,null),h(e,n),$(m,s,d),$(m,o,d),h(o,u),k(a,o,null),$(m,i,d),k(f,m,d),c=!0},p(m,d){const L={};d&16&&(L.$$scope={dirty:d,ctx:m}),t.$set(L);const y={};d&16&&(y.$$scope={dirty:d,ctx:m}),a.$set(y)},i(m){c||(_(t.$$.fragment,m),_(a.$$.fragment,m),_(f.$$.fragment,m),c=!0)},o(m){g(t.$$.fragment,m),g(a.$$.fragment,m),g(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(s),p(o),p(i)),w(t),w(a),w(f,m)}}}function Nu(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Pu(r){let e,l,t,n=(r[3].capacity??"unknown")+"",s;return{c(){e=C("p"),l=v("Capacity: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&8&&n!==(n=(o[3].capacity??"unknown")+"")&&z(s,n)},d(o){o&&p(e)}}}function Ou(r){let e,l;return e=new fe({props:{$$slots:{default:[Pu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Iu(r){let e,l;const t=[H(jt),{sourceLayer:jt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Ou]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new hn({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&oe(H(jt)),o&0&&{sourceLayer:jt},o&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ru(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[Nu],default:[Cu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new de({props:{url:`pmtiles://${_e()}/v1/${jt}.pmtiles`,$$slots:{default:[Iu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let jt="cycle_parking";function Du(r,e,l){let t,n=Ce(jt);E(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Au extends J{constructor(e){super(),V(this,e,Du,Ru,Y,{})}}function Fu(r){let e;return{c(){e=v("Education")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function qu(r){let e,l,t,n;return t=new nt({}),{c(){e=C("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,l=T(),b(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),k(t,s,o),n=!0},p:x,i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){g(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function zu(r){let e,l,t;return l=new ue({props:{$$slots:{default:[qu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function yl(r){let e,l,t;return l=new ct({props:{$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(l.$$.fragment),ge(e,"border","1px solid black"),ge(e,"padding","8px")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2049&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ju(r){let e,l,t;return e=new qe({props:{color:Q.education.schools}}),{c(){b(e.$$.fragment),l=v(`
        Schools`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Hu(r){let e,l,t;return e=new qe({props:{color:Q.education.colleges}}),{c(){b(e.$$.fragment),l=v(`
        Colleges`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Bu(r){let e,l,t;return e=new qe({props:{color:Q.education.universities}}),{c(){b(e.$$.fragment),l=v(`
        Universities`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Gu(r){let e,l,t,n,s,o,u,a,i;function f(S){r[4](S)}let c={$$slots:{default:[ju]},$$scope:{ctx:r}};r[0].school!==void 0&&(c.checked=r[0].school),e=new re({props:c}),G.push(()=>U(e,"checked",f));function m(S){r[5](S)}let d={$$slots:{default:[Hu]},$$scope:{ctx:r}};r[0].college!==void 0&&(d.checked=r[0].college),n=new re({props:d}),G.push(()=>U(n,"checked",m));function L(S){r[6](S)}let y={$$slots:{default:[Bu]},$$scope:{ctx:r}};return r[0].university!==void 0&&(y.checked=r[0].university),u=new re({props:y}),G.push(()=>U(u,"checked",L)),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment),o=T(),b(u.$$.fragment)},m(S,P){k(e,S,P),$(S,t,P),k(n,S,P),$(S,o,P),k(u,S,P),i=!0},p(S,P){const F={};P&2048&&(F.$$scope={dirty:P,ctx:S}),!l&&P&1&&(l=!0,F.checked=S[0].school,W(()=>l=!1)),e.$set(F);const D={};P&2048&&(D.$$scope={dirty:P,ctx:S}),!s&&P&1&&(s=!0,D.checked=S[0].college,W(()=>s=!1)),n.$set(D);const I={};P&2048&&(I.$$scope={dirty:P,ctx:S}),!a&&P&1&&(a=!0,I.checked=S[0].university,W(()=>a=!1)),u.$set(I)},i(S){i||(_(e.$$.fragment,S),_(n.$$.fragment,S),_(u.$$.fragment,S),i=!0)},o(S){g(e.$$.fragment,S),g(n.$$.fragment,S),g(u.$$.fragment,S),i=!1},d(S){S&&(p(t),p(o)),w(e,S),w(n,S),w(u,S)}}}function Eu(r){let e,l=(r[10].name??"Unnamed institution")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&z(t,l)},d(n){n&&p(e)}}}function Uu(r){let e,l;return e=new fe({props:{$$slots:{default:[Eu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&3072&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Wu(r){let e,l;const t=[H(Ht),{sourceLayer:Ht},{paint:{"fill-color":tt(["get","type"],{school:Q.education.schools,college:Q.education.colleges,university:Q.education.universities},"grey"),"fill-opacity":X(.7,1)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[2](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Uu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new Ee({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&5?te(t,[o&0&&oe(H(Ht)),o&0&&{sourceLayer:Ht},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&5&&{filter:s[2](s[0])},t[5],t[6]]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Yu(r){let e,l,t,n,s,o;function u(f){r[3](f)}let a={$$slots:{right:[zu],default:[Fu]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0].show&&yl(r);return s=new de({props:{url:`pmtiles://${_e()}/v1/${Ht}.pmtiles`,$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=yl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&2049&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Ht="education";function Ju(r){return{show:!0,school:r.includes("school"),college:r.includes("college"),university:r.includes("university")}}function Vu(r,e,l){let t,n=["school","college","university"],s={show:!1,school:!0,college:!0,university:!0};function o(d){return d.show?n.filter(L=>d[L]).join(","):null}let u=vt(Ht,s,o,Ju);E(r,u,d=>l(0,t=d));function a(d){let L=n.filter(y=>d[y]);return["in",["get","type"],["literal",L]]}function i(d){r.$$.not_equal(t.show,d)&&(t.show=d,u.set(t))}function f(d){r.$$.not_equal(t.school,d)&&(t.school=d,u.set(t))}function c(d){r.$$.not_equal(t.college,d)&&(t.college=d,u.set(t))}function m(d){r.$$.not_equal(t.university,d)&&(t.university=d,u.set(t))}return[t,u,a,i,f,c,m]}class Qu extends J{constructor(e){super(),V(this,e,Vu,Yu,Y,{})}}function Ku(r){let e,l,t,n;return e=new qe({props:{color:r[4]}}),{c(){b(e.$$.fragment),l=T(),t=v(r[2])},m(s,o){k(e,s,o),$(s,l,o),$(s,t,o),n=!0},p(s,o){(!n||o&4)&&z(t,s[2])},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Zu(r){let e;const l=r[6].default,t=_t(l,r,r[8],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&256)&&gt(t,l,n,n[8],e?ht(l,n[8],s,null):dt(n[8]),null)},i(n){e||(_(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Xu(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Zu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&256&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function xu(r){let e,l=(r[9].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&514&&l!==(l=(n[9].name??`Unnamed ${n[1]}`)+"")&&z(t,l)},d(n){n&&p(e)}}}function ec(r){let e,l;return e=new fe({props:{$$slots:{default:[xu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&770&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function tc(r){let e,l;const t=[H(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":X(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ec]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new Ee({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&25?te(t,[o&1&&oe(H(s[0])),o&1&&{sourceLayer:s[0]},o&16&&{paint:{"fill-color":s[4],"fill-opacity":X(.7,1)}},o&8&&{layout:{visibility:s[3]?"visible":"none"}},t[4],t[5]]):{};o&258&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function nc(r){let e,l,t,n,s;function o(a){r[7](a)}let u={$$slots:{right:[Xu],default:[Ku]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new de({props:{url:`pmtiles://${_e()}/v1/${r[0]}.pmtiles`,$$slots:{default:[tc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};i&260&&(f.$$scope={dirty:i,ctx:a}),!l&&i&8&&(l=!0,f.checked=a[3],W(()=>l=!1)),e.$set(f);const c={};i&1&&(c.url=`pmtiles://${_e()}/v1/${a[0]}.pmtiles`),i&267&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}function lc(r,e,l){let t,{$$slots:n={},$$scope:s}=e,{name:o}=e,{singularNoun:u}=e,{pluralNoun:a}=e,i=Q[o],f=Ce(o);E(r,f,m=>l(3,t=m));function c(m){t=m,f.set(t)}return r.$$set=m=>{"name"in m&&l(0,o=m.name),"singularNoun"in m&&l(1,u=m.singularNoun),"pluralNoun"in m&&l(2,a=m.pluralNoun),"$$scope"in m&&l(8,s=m.$$scope)},[o,u,a,t,i,f,n,c,s]}class _s extends J{constructor(e){super(),V(this,e,lc,nc,Y,{name:0,singularNoun:1,pluralNoun:2})}}function sc(r){let e;return{c(){e=v("hospital")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function rc(r){let e,l,t,n,s,o,u;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[sc]},$$scope:{ctx:r}}}),o=new nt({}),{c(){e=C("p"),l=v("This shows "),b(t.$$.fragment),n=v(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),s=T(),b(o.$$.fragment)},m(a,i){$(a,e,i),h(e,l),k(t,e,null),h(e,n),$(a,s,i),k(o,a,i),u=!0},p(a,i){const f={};i&1&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){g(t.$$.fragment,a),g(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function oc(r){let e,l;return e=new _s({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}class ic extends J{constructor(e){super(),V(this,e,null,oc,Y,{})}}function ac(r){let e,l,t;return{c(){e=C("img"),t=v(`
  Railway Stations`),en(e.src,l=vs)||B(e,"src",l),B(e,"alt","A logo representing a train")},m(n,s){$(n,e,s),$(n,t,s)},p:x,d(n){n&&(p(e),p(t))}}}function fc(r){let e;return{c(){e=v("railway station")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function uc(r){let e;return{c(){e=v(`National Rail
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function cc(r){let e,l,t,n,s,o,u,a,i,f,c,m;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[fc]},$$scope:{ctx:r}}}),a=new Z({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[uc]},$$scope:{ctx:r}}}),c=new nt({}),{c(){e=C("p"),l=v("This shows "),b(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=T(),o=C("p"),u=v("Icon from "),b(a.$$.fragment),i=v(". (Note that not all stations shown are National Rail.)"),f=T(),b(c.$$.fragment)},m(d,L){$(d,e,L),h(e,l),k(t,e,null),h(e,n),$(d,s,L),$(d,o,L),h(o,u),k(a,o,null),h(o,i),$(d,f,L),k(c,d,L),m=!0},p(d,L){const y={};L&16&&(y.$$scope={dirty:L,ctx:d}),t.$set(y);const S={};L&16&&(S.$$scope={dirty:L,ctx:d}),a.$set(S)},i(d){m||(_(t.$$.fragment,d),_(a.$$.fragment,d),_(c.$$.fragment,d),m=!0)},o(d){g(t.$$.fragment,d),g(a.$$.fragment,d),g(c.$$.fragment,d),m=!1},d(d){d&&(p(e),p(s),p(o),p(f)),w(t),w(a),w(c,d)}}}function $c(r){let e,l,t;return l=new ue({props:{$$slots:{default:[cc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function pc(r){let e,l=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&z(t,l)},d(n){n&&p(e)}}}function mc(r){let e,l;return e=new fe({props:{$$slots:{default:[pc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function _c(r){let e,l;const t=[H(nn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[mc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new hn({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?te(t,[o&0&&oe(H(nn)),o&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function gc(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[$c],default:[ac]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new wt({props:{data:`${_e()}/v1/${nn}.geojson`,$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let nn="railway_stations";function dc(r,e,l){let t,n=Ce(nn);E(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class hc extends J{constructor(e){super(),V(this,e,dc,gc,Y,{})}}function bc(r){let e;return{c(){e=v("sports pitches")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function kc(r){let e;return{c(){e=v("sports centres")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function wc(r){let e,l,t,n,s,o,u,a,i;return t=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[bc]},$$scope:{ctx:r}}}),s=new Z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[kc]},$$scope:{ctx:r}}}),a=new nt({}),{c(){e=C("p"),l=v("This shows "),b(t.$$.fragment),n=v(" and "),b(s.$$.fragment),o=v(" data from OpenStreetMap (as of 9 August 2023)."),u=T(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),$(f,u,c),k(a,f,c),i=!0},p(f,c){const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){i||(_(t.$$.fragment,f),_(s.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){g(t.$$.fragment,f),g(s.$$.fragment,f),g(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(s),w(a,f)}}}function vc(r){let e,l;return e=new _s({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[wc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}class yc extends J{constructor(e){super(),V(this,e,null,vc,Y,{})}}function Sc(r){let e;return{c(){e=v("Stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Cc(r){let e;return{c(){e=v("DfT stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Lc(r){let e;return{c(){e=v("documented by DfT")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Tc(r){let e,l,t,n,s,o,u,a,i,f,c,m,d,L,y,S,P,F,D,I,M,O,R;return t=new Z({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),P=new Z({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Lc]},$$scope:{ctx:r}}}),O=new ze({}),{c(){e=C("p"),l=v("This layer shows collisions recorded in the "),b(t.$$.fragment),n=v(" dataset. Please note these limitations:"),s=T(),o=C("ul"),u=C("li"),u.textContent="Only collisions between 2017 and 2022 are included",a=T(),i=C("li"),i.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=T(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,m=T(),d=C("li"),d.textContent='The "pedestrians" category also include mobility scooters',L=T(),y=C("li"),S=v("All limitations "),b(P.$$.fragment),F=v(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),D=T(),I=C("p"),I.textContent="You can click a point to open the full report, thanks to CycleStreets.",M=T(),b(O.$$.fragment)},m(N,q){$(N,e,q),h(e,l),k(t,e,null),h(e,n),$(N,s,q),$(N,o,q),h(o,u),h(o,a),h(o,i),h(o,f),h(o,c),h(o,m),h(o,d),h(o,L),h(o,y),h(y,S),k(P,y,null),h(y,F),$(N,D,q),$(N,I,q),$(N,M,q),k(O,N,q),R=!0},p(N,q){const ne={};q&4194304&&(ne.$$scope={dirty:q,ctx:N}),t.$set(ne);const ie={};q&4194304&&(ie.$$scope={dirty:q,ctx:N}),P.$set(ie)},i(N){R||(_(t.$$.fragment,N),_(P.$$.fragment,N),_(O.$$.fragment,N),R=!0)},o(N){g(t.$$.fragment,N),g(P.$$.fragment,N),g(O.$$.fragment,N),R=!1},d(N){N&&(p(e),p(s),p(o),p(D),p(I),p(M)),w(t),w(P),w(O,N)}}}function Mc(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&4194304&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Sl(r){let e,l,t,n,s,o,u,a,i,f,c,m,d;return l=new ct({props:{small:!0,$$slots:{default:[Rc]},$$scope:{ctx:r}}}),f=new rn({props:{rows:r[9]}}),{c(){e=C("div"),b(l.$$.fragment),t=T(),n=C("div"),s=v(`Filter years:
      `),o=C("input"),u=v(`
      -
      `),a=C("input"),i=T(),b(f.$$.fragment),B(o,"type","number"),B(o,"min",2017),B(o,"max",2022),B(o,"class","svelte-1ft65rw"),B(a,"type","number"),B(a,"min",2017),B(a,"max",2022),B(a,"class","svelte-1ft65rw"),ge(e,"border","1px solid black"),ge(e,"padding","8px")},m(L,y){$(L,e,y),k(l,e,null),h(e,t),h(e,n),h(n,s),h(n,o),xe(o,r[0].minYear),h(n,u),h(n,a),xe(a,r[0].maxYear),h(e,i),k(f,e,null),c=!0,m||(d=[st(o,"input",r[15]),st(a,"input",r[16])],m=!0)},p(L,y){const S={};y&4194305&&(S.$$scope={dirty:y,ctx:L}),l.$set(S),y&1&&Zt(o.value)!==L[0].minYear&&xe(o,L[0].minYear),y&1&&Zt(a.value)!==L[0].maxYear&&xe(a,L[0].maxYear)},i(L){c||(_(l.$$.fragment,L),_(f.$$.fragment,L),c=!0)},o(L){g(l.$$.fragment,L),g(f.$$.fragment,L),c=!1},d(L){L&&p(e),w(l),w(f),m=!1,$s(d)}}}function Nc(r){let e;return{c(){e=v("Pedestrians")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Pc(r){let e;return{c(){e=v("Cyclists")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Oc(r){let e;return{c(){e=v("Horse riders")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ic(r){let e;return{c(){e=v("Other")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Rc(r){let e,l,t,n,s,o,u,a,i,f,c,m;function d(M){r[11](M)}let L={$$slots:{default:[Nc]},$$scope:{ctx:r}};r[0].pedestrians!==void 0&&(L.checked=r[0].pedestrians),e=new re({props:L}),G.push(()=>U(e,"checked",d));function y(M){r[12](M)}let S={$$slots:{default:[Pc]},$$scope:{ctx:r}};r[0].cyclists!==void 0&&(S.checked=r[0].cyclists),n=new re({props:S}),G.push(()=>U(n,"checked",y));function P(M){r[13](M)}let F={$$slots:{default:[Oc]},$$scope:{ctx:r}};r[0].horseRiders!==void 0&&(F.checked=r[0].horseRiders),u=new re({props:F}),G.push(()=>U(u,"checked",P));function D(M){r[14](M)}let I={$$slots:{default:[Ic]},$$scope:{ctx:r}};return r[0].other!==void 0&&(I.checked=r[0].other),f=new re({props:I}),G.push(()=>U(f,"checked",D)),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment),o=T(),b(u.$$.fragment),i=T(),b(f.$$.fragment)},m(M,O){k(e,M,O),$(M,t,O),k(n,M,O),$(M,o,O),k(u,M,O),$(M,i,O),k(f,M,O),m=!0},p(M,O){const R={};O&4194304&&(R.$$scope={dirty:O,ctx:M}),!l&&O&1&&(l=!0,R.checked=M[0].pedestrians,W(()=>l=!1)),e.$set(R);const N={};O&4194304&&(N.$$scope={dirty:O,ctx:M}),!s&&O&1&&(s=!0,N.checked=M[0].cyclists,W(()=>s=!1)),n.$set(N);const q={};O&4194304&&(q.$$scope={dirty:O,ctx:M}),!a&&O&1&&(a=!0,q.checked=M[0].horseRiders,W(()=>a=!1)),u.$set(q);const ne={};O&4194304&&(ne.$$scope={dirty:O,ctx:M}),!c&&O&1&&(c=!0,ne.checked=M[0].other,W(()=>c=!1)),f.$set(ne)},i(M){m||(_(e.$$.fragment,M),_(n.$$.fragment,M),_(u.$$.fragment,M),_(f.$$.fragment,M),m=!0)},o(M){g(e.$$.fragment,M),g(n.$$.fragment,M),g(u.$$.fragment,M),g(f.$$.fragment,M),m=!1},d(M){M&&(p(t),p(o),p(i)),w(e,M),w(n,M),w(u,M),w(f,M)}}}function Cl(r){let e,l,t,n=r[3][r[21].pedestrian_location]+"",s;return{c(){e=C("p"),l=v("Pedestrian location: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&2097152&&n!==(n=o[3][o[21].pedestrian_location]+"")&&z(s,n)},d(o){o&&p(e)}}}function Ll(r){let e,l,t,n=r[4][r[21].pedestrian_movement]+"",s;return{c(){e=C("p"),l=v("Pedestrian movement: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&2097152&&n!==(n=o[4][o[21].pedestrian_movement]+"")&&z(s,n)},d(o){o&&p(e)}}}function Dc(r){let e,l,t,n=r[21].year+"",s,o,u,a,i,f=r[5][r[21].severity]+"",c,m,d,L,y,S=Tl(r[21])+"",P,F,D,I,M,O=r[21].pedestrian_location&&Cl(r),R=r[21].pedestrian_movement&&Ll(r);return{c(){e=C("p"),l=v("Year: "),t=C("b"),s=v(n),o=T(),u=C("p"),a=v("Severity: "),i=C("b"),c=v(f),m=T(),d=C("p"),L=v("Casualties: "),y=C("b"),P=v(S),F=T(),O&&O.c(),D=T(),R&&R.c(),I=T(),M=C("p"),M.textContent="Click to open full report in CycleStreets"},m(N,q){$(N,e,q),h(e,l),h(e,t),h(t,s),$(N,o,q),$(N,u,q),h(u,a),h(u,i),h(i,c),$(N,m,q),$(N,d,q),h(d,L),h(d,y),h(y,P),$(N,F,q),O&&O.m(N,q),$(N,D,q),R&&R.m(N,q),$(N,I,q),$(N,M,q)},p(N,q){q&2097152&&n!==(n=N[21].year+"")&&z(s,n),q&2097152&&f!==(f=N[5][N[21].severity]+"")&&z(c,f),q&2097152&&S!==(S=Tl(N[21])+"")&&z(P,S),N[21].pedestrian_location?O?O.p(N,q):(O=Cl(N),O.c(),O.m(D.parentNode,D)):O&&(O.d(1),O=null),N[21].pedestrian_movement?R?R.p(N,q):(R=Ll(N),R.c(),R.m(I.parentNode,I)):R&&(R.d(1),R=null)},d(N){N&&(p(e),p(o),p(u),p(m),p(d),p(F),p(D),p(I),p(M)),O&&O.d(N),R&&R.d(N)}}}function Ac(r){let e,l;return e=new fe({props:{$$slots:{default:[Dc,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&6291456&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Fc(r){let e,l;const t=[H(Bt),{sourceLayer:Bt},{paint:{"circle-color":Se(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[1]},{layout:{visibility:r[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ac]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new bt({props:n}),e.$on("click",jc),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&451?te(t,[o&0&&oe(H(Bt)),o&0&&{sourceLayer:Bt},o&448&&{paint:{"circle-color":Se(["get","severity"],[1,2,3],[s[6],s[7],s[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&2&&{filter:s[1]},o&1&&{layout:{visibility:s[0].show?"visible":"none"}},t[5],t[6]]):{};o&4194304&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function qc(r){let e,l,t,n,s,o;function u(f){r[10](f)}let a={$$slots:{right:[Mc],default:[Sc]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0].show&&Sl(r);return s=new de({props:{url:`pmtiles://${_e()}/v1/${Bt}.pmtiles`,$$slots:{default:[Fc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&4194304&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,W(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=Sl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&4194307&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Bt="stats19";function zc(r){let[e,l,t]=r.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Tl(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function jc(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function Hc(r,e,l){let t,n,s=["pedestrians","cyclists","horseRiders","other"],o={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function u(N){return N.show?`${s.filter(ne=>N[ne]).join(",")}/${N.minYear}/${N.maxYear}`:null}let a=vt(Bt,o,u,zc);E(r,a,N=>l(0,n=N));function i(N,q,ne,ie,A,K){let Ne=["any"];return n.pedestrians&&Ne.push(["get","pedestrian"]),n.cyclists&&Ne.push(["get","cyclist"]),n.horseRiders&&Ne.push(["get","horse_rider"]),n.other&&Ne.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],Ne]}let f={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},m={1:"Fatal",2:"Serious",3:"Slight"},d=Q.sequential_low_to_high[4],L=Q.sequential_low_to_high[2],y=Q.sequential_low_to_high[0],S=[["Fatal",d],["Serious",L],["Slight",y]];function P(N){r.$$.not_equal(n.show,N)&&(n.show=N,a.set(n))}function F(N){r.$$.not_equal(n.pedestrians,N)&&(n.pedestrians=N,a.set(n))}function D(N){r.$$.not_equal(n.cyclists,N)&&(n.cyclists=N,a.set(n))}function I(N){r.$$.not_equal(n.horseRiders,N)&&(n.horseRiders=N,a.set(n))}function M(N){r.$$.not_equal(n.other,N)&&(n.other=N,a.set(n))}function O(){n.minYear=Zt(this.value),a.set(n)}function R(){n.maxYear=Zt(this.value),a.set(n)}return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=i(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,a,f,c,m,d,L,y,S,P,F,D,I,M,O,R]}class Bc extends J{constructor(e){super(),V(this,e,Hc,qc,Y,{})}}function Gc(r){let e;return{c(){e=v("Vehicle counts")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ec(r){let e;return{c(){e=v(`DfT road statistics
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Uc(r){let e;return{c(){e=v("methodology")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Wc(r){let e,l,t,n,s,o,u,a,i,f,c;return t=new Z({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Ec]},$$scope:{ctx:r}}}),s=new Z({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Uc]},$$scope:{ctx:r}}}),f=new ze({}),{c(){e=C("p"),l=v("AADF (annual average daily flow) data from "),b(t.$$.fragment),n=v(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(s.$$.fragment),o=v(" for details and caveats about the measurements."),u=T(),a=C("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,i=T(),b(f.$$.fragment)},m(m,d){$(m,e,d),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),$(m,u,d),$(m,a,d),$(m,i,d),k(f,m,d),c=!0},p(m,d){const L={};d&128&&(L.$$scope={dirty:d,ctx:m}),t.$set(L);const y={};d&128&&(y.$$scope={dirty:d,ctx:m}),s.$set(y)},i(m){c||(_(t.$$.fragment,m),_(s.$$.fragment,m),_(f.$$.fragment,m),c=!0)},o(m){g(t.$$.fragment,m),g(s.$$.fragment,m),g(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(u),p(a),p(i)),w(t),w(s),w(f,m)}}}function Yc(r){let e,l,t;return l=new ue({props:{$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&128&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ml(r){let e,l;return e=new Ue({props:{colorScale:r[1],limits:r[3]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Jc(r){let e,l=r[6].location+"",t,n,s,o,u=r[6].year+"",a,i,f,c=r[6].motor_vehicles.toLocaleString()+"",m,d,L,y,S=r[6].year+"",P,F,D,I=r[6].pedal_cycles.toLocaleString()+"",M,O,R,N,q,ne=r[6].method+"",ie;return{c(){e=C("h2"),t=v(l),n=T(),s=C("p"),o=v("Total motor vehicles ("),a=v(u),i=v(` AADF):
        `),f=C("b"),m=v(c),d=T(),L=C("p"),y=v("Total pedal cycles ("),P=v(S),F=v(` AADF):
        `),D=C("b"),M=v(I),O=T(),R=C("p"),N=v("Count method: "),q=C("b"),ie=v(ne)},m(A,K){$(A,e,K),h(e,t),$(A,n,K),$(A,s,K),h(s,o),h(s,a),h(s,i),h(s,f),h(f,m),$(A,d,K),$(A,L,K),h(L,y),h(L,P),h(L,F),h(L,D),h(D,M),$(A,O,K),$(A,R,K),h(R,N),h(R,q),h(q,ie)},p(A,K){K&64&&l!==(l=A[6].location+"")&&z(t,l),K&64&&u!==(u=A[6].year+"")&&z(a,u),K&64&&c!==(c=A[6].motor_vehicles.toLocaleString()+"")&&z(m,c),K&64&&S!==(S=A[6].year+"")&&z(P,S),K&64&&I!==(I=A[6].pedal_cycles.toLocaleString()+"")&&z(M,I),K&64&&ne!==(ne=A[6].method+"")&&z(ie,ne)},d(A){A&&(p(e),p(n),p(s),p(d),p(L),p(O),p(R))}}}function Vc(r){let e,l;return e=new fe({props:{$$slots:{default:[Jc,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Qc(r){let e,l;const t=[H(Gt),{sourceLayer:Gt},{paint:{"circle-color":Se(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Vc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new bt({props:n}),e.$on("click",Zc),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?te(t,[o&0&&oe(H(Gt)),o&0&&{sourceLayer:Gt},o&6&&{paint:{"circle-color":Se(["get","motor_vehicles"],s[2],s[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&128&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Kc(r){let e,l,t,n,s,o;function u(f){r[5](f)}let a={$$slots:{right:[Yc],default:[Gc]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0]&&Ml(r);return s=new de({props:{url:`pmtiles://${_e()}/v1/${Gt}.pmtiles`,$$slots:{default:[Qc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&128&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=Ml(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&129&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Gt="vehicle_counts";function Zc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Xc(r,e,l){let t,n=Q.sequential_low_to_high,s=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],u=Ce(Gt);E(r,u,i=>l(0,t=i));function a(i){t=i,u.set(t)}return[t,n,s,o,u,a]}class xc extends J{constructor(e){super(),V(this,e,Xc,Kc,Y,{})}}function Nl(r,e,l){const t=r.slice();return t[6]=e[l],t}function e$(r){let e;return{c(){e=v("Issues & Conflicts")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function t$(r){let e,l,t;return{c(){e=C("p"),e.textContent=`Critical issues and policy conflicts from the Design Assistance Log.
        This is internally collected data.`,l=T(),t=C("p"),t.textContent=`This layer is manually copied from a copy of the DA Log. The data is
        recent as of 10 June 2024.`},m(n,s){$(n,e,s),$(n,l,s),$(n,t,s)},p:x,d(n){n&&(p(e),p(l),p(t))}}}function n$(r){let e,l,t;return l=new ue({props:{$$slots:{default:[t$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Pl(r){let e,l;return e=new rn({props:{rows:r[3]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function l$(r){let e,l=r[5]["Issue ID"]+"",t,n,s=r[5].Code+"",o,u,a,i=r[5]["Issue Stage"]+"",f;return{c(){e=C("h2"),t=v(l),n=v(" - "),o=v(s),u=T(),a=C("p"),f=v(i)},m(c,m){$(c,e,m),h(e,t),h(e,n),h(e,o),$(c,u,m),$(c,a,m),h(a,f)},p(c,m){m&32&&l!==(l=c[5]["Issue ID"]+"")&&z(t,l),m&32&&s!==(s=c[5].Code+"")&&z(o,s),m&32&&i!==(i=c[5]["Issue Stage"]+"")&&z(f,i)},d(c){c&&(p(e),p(u),p(a))}}}function Ol(r){let e,l=r[6]+"",t,n,s,o=r[5][r[6]]+"",u,a;return{c(){e=C("p"),t=v(l),n=v(`:
            `),s=C("b"),u=v(o),a=T()},m(i,f){$(i,e,f),h(e,t),h(e,n),h(e,s),h(s,u),h(e,a)},p(i,f){f&32&&o!==(o=i[5][i[6]]+"")&&z(u,o)},d(i){i&&p(e)}}}function s$(r){let e,l=Fe(r[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Ol(Nl(r,l,n));return{c(){e=C("div");for(let n=0;n<t.length;n+=1)t[n].c();ge(e,"max-width","30vw"),ge(e,"max-height","60vh"),ge(e,"overflow","auto")},m(n,s){$(n,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,s){if(s&36){l=Fe(n[2]);let o;for(o=0;o<l.length;o+=1){const u=Nl(n,l,o);t[o]?t[o].p(u,s):(t[o]=Ol(u),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&p(e),at(t,n)}}}function r$(r){let e,l,t,n;return e=new fe({props:{openOn:"hover",$$slots:{default:[l$,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[s$,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(s,o){k(e,s,o),$(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&544&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&544&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function o$(r){let e,l;const t=[H(pn),{paint:{"circle-color":tt(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[r$]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new bt({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&9?te(t,[o&0&&oe(H(pn)),o&8&&{paint:{"circle-color":tt(["get","Design Review Status"],Object.fromEntries(s[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[3],t[4]]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function i$(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[n$],default:[e$]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),G.push(()=>U(e,"checked",u));let i=r[0]&&Pl(r);return s=new wt({props:{data:`${Xt()}/v1/problems.geojson.gz`,$$slots:{default:[o$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),i&&i.c(),n=T(),b(s.$$.fragment)},m(f,c){k(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),k(s,f,c),o=!0},p(f,[c]){const m={};c&512&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],W(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=Pl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const d={};c&513&&(d.$$scope={dirty:c,ctx:f}),s.$set(d)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(i),g(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let pn="problems";function a$(r,e,l){let t,n=Ce(pn);E(r,n,a=>l(0,t=a));let s=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],o=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function u(a){t=a,n.set(t)}return[t,n,s,o,u]}class f$ extends J{constructor(e){super(),V(this,e,a$,i$,Y,{})}}function u$(r){let e;function l(s,o){return s[2]<=100?p$:$$}let t=l(r),n=t(r);return{c(){n.c(),e=Ie()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},i:x,o:x,d(s){s&&p(e),n.d(s)}}}function c$(r){let e,l;return e=new rt({props:{$$slots:{default:[m$]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function $$(r){let e;return{c(){e=C("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){$(l,e,t)},p:x,d(l){l&&p(e)}}}function p$(r){let e,l,t;return{c(){e=C("label"),l=v(`Downloading scheme data
      `),t=C("progress"),t.value=r[2],B(t,"class","svelte-q3473n")},m(n,s){$(n,e,s),h(e,l),h(e,t)},p(n,s){s&4&&(t.value=n[2])},d(n){n&&p(e)}}}function m$(r){let e;return{c(){e=v("Load latest scheme data")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function _$(r){let e,l,t,n;const s=[c$,u$],o=[];function u(a,i){return a[0]?a[1]?1:-1:0}return~(e=u(r))&&(l=o[e]=s[e](r)),{c(){l&&l.c(),t=Ie()},m(a,i){~e&&o[e].m(a,i),$(a,t,i),n=!0},p(a,[i]){let f=e;e=u(a),e===f?~e&&o[e].p(a,i):(l&&(ce(),g(o[f],1,1,()=>{o[f]=null}),$e()),~e?(l=o[e],l?l.p(a,i):(l=o[e]=s[e](a),l.c()),_(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(_(l),n=!0)},o(a){g(l),n=!1},d(a){a&&p(t),~e&&o[e].d(a)}}}function g$(r,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),s=!0,o=0;async function u(){let i=await ys(`${Xt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,o=c)});l(2,o=100);let f=new TextDecoder().decode(i);t("all_schemes_output.geojson",f),l(1,s=!1)}gn(async()=>{n&&await u()});async function a(){l(0,n=!0),await u()}return r.$$set=i=>{"loadFile"in i&&l(4,t=i.loadFile)},[n,s,o,a,t]}class d$ extends J{constructor(e){super(),V(this,e,g$,_$,Y,{loadFile:4})}}function h$(r){return tt(["get","intervention_type"],{area:et.area,route:et.route,crossing:et.crossing,other:et.other},"white")}function b$(r){return[["Areas",et.area],["Routes",et.route],["Crossings",et.crossing],["Other",et.other]]}function k$(r){let e,l;return e=new rn({props:{rows:r[1]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&2&&(s.rows=t[1]),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function w$(r){let e,l,t,n,s;function o(a){r[3](a)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new pt({props:u}),G.push(()=>U(e,"value",o)),e.$on("change",r[2]),n=new Xe({props:{label:"Legend",$$slots:{default:[k$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,[i]){const f={};!l&&i&1&&(l=!0,f.value=a[0],W(()=>l=!1)),e.$set(f);const c={};i&66&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}function v$(r,e,l){let t;E(r,sn,i=>l(4,t=i));let n="fundingProgramme",[s,o]=$n();function u(){let i;n=="interventionType"?(i=h$(),l(1,o=b$())):n=="fundingProgramme"?l(1,[i,o]=$n(),o):n=="currentMilestone"&&l(1,[i,o]=vr(),o),t.setPaintProperty("interventions-points","circle-color",i),t.setPaintProperty("interventions-lines","line-color",i),t.setPaintProperty("interventions-polygons","fill-color",i),t.setPaintProperty("interventions-polygons-outlines","line-color",i)}function a(i){n=i,l(0,n)}return[n,o,u,a]}class y$ extends J{constructor(e){super(),V(this,e,v$,w$,Y,{})}}const kt=ut({type:"FeatureCollection",features:[],schemes:{}}),ln=ut(new Map),Il=ut(!0),Qt=ut(""),Kt=ut("");let mn=ut(null);function S$(r){let e;return{c(){e=v("Filters")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function C$(r){let e;return{c(){e=v("Reset all filters")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function L$(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function T$(r){let e,l,t,n,s,o;return t=new rt({props:{$$slots:{default:[L$]},$$scope:{ctx:r}}}),t.$on("click",r[20]),{c(){e=C("input"),l=T(),b(t.$$.fragment),B(e,"type","text"),B(e,"class","govuk-input govuk-input--width-10"),B(e,"id","filterInterventionText")},m(u,a){$(u,e,a),xe(e,r[5]),$(u,l,a),k(t,u,a),n=!0,s||(o=st(e,"input",r[19]),s=!0)},p(u,a){a&32&&e.value!==u[5]&&xe(e,u[5]);const i={};a&536870912&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){n||(_(t.$$.fragment,u),n=!0)},o(u){g(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(l)),w(t,u),s=!1,o()}}}function M$(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function N$(r){let e,l,t,n,s,o;return t=new rt({props:{$$slots:{default:[M$]},$$scope:{ctx:r}}}),t.$on("click",r[22]),{c(){e=C("input"),l=T(),b(t.$$.fragment),B(e,"type","text"),B(e,"class","govuk-input govuk-input--width-10"),B(e,"id","filterSchemeText")},m(u,a){$(u,e,a),xe(e,r[4]),$(u,l,a),k(t,u,a),n=!0,s||(o=st(e,"input",r[21]),s=!0)},p(u,a){a&16&&e.value!==u[4]&&xe(e,u[4]);const i={};a&536870912&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){n||(_(t.$$.fragment,u),n=!0)},o(u){g(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(l)),w(t,u),s=!1,o()}}}function P$(r){let e;return{c(){e=v("Done")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function O$(r){let e,l,t,n,s=r[8].interventions.toLocaleString()+"",o,u,a,i,f=r[7].size.toLocaleString()+"",c,m,d,L,y,S=Rl(r[8].totalLength).toFixed(1)+"",P,F,D,I,M,O,R,N,q,ne,ie,A,K,Ne,Pe,ae,We,Re,je,Te,He,me,De,Be,Oe;I=new rt({props:{$$slots:{default:[C$]},$$scope:{ctx:r}}}),I.$on("click",r[13]);function pe(j){r[15](j)}let ke={label:"Authority or region",choices:r[9],emptyOption:!0};r[0]!==void 0&&(ke.value=r[0]),O=new pt({props:ke}),G.push(()=>U(O,"value",pe));function ve(j){r[16](j)}let he={label:"Funding programme",choices:r[10],emptyOption:!0};r[1]!==void 0&&(he.value=r[1]),q=new pt({props:he}),G.push(()=>U(q,"value",ve));function Me(j){r[17](j)}let Le={label:"Current milestone",choices:r[11],emptyOption:!0};r[2]!==void 0&&(Le.value=r[2]),A=new pt({props:Le}),G.push(()=>U(A,"value",Me));function we(j){r[18](j)}let ot={label:"Sketch source",choices:r[12],emptyOption:!0};return r[3]!==void 0&&(ot.value=r[3]),Pe=new pt({props:ot}),G.push(()=>U(Pe,"value",we)),Re=new yn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[T$]},$$scope:{ctx:r}}}),Te=new yn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[N$]},$$scope:{ctx:r}}}),me=new y$({}),Be=new Ss({props:{$$slots:{default:[P$]},$$scope:{ctx:r}}}),Be.$on("click",r[23]),{c(){e=C("p"),e.textContent="Showing:",l=T(),t=C("ul"),n=C("li"),o=v(s),u=v(" interventions"),a=T(),i=C("li"),c=v(f),m=v(" schemes"),d=T(),L=C("li"),y=v("total route length of "),P=v(S),F=v(" miles"),D=T(),b(I.$$.fragment),M=T(),b(O.$$.fragment),N=T(),b(q.$$.fragment),ie=T(),b(A.$$.fragment),Ne=T(),b(Pe.$$.fragment),We=T(),b(Re.$$.fragment),je=T(),b(Te.$$.fragment),He=T(),b(me.$$.fragment),De=T(),b(Be.$$.fragment)},m(j,le){$(j,e,le),$(j,l,le),$(j,t,le),h(t,n),h(n,o),h(n,u),h(t,a),h(t,i),h(i,c),h(i,m),h(t,d),h(t,L),h(L,y),h(L,P),h(L,F),$(j,D,le),k(I,j,le),$(j,M,le),k(O,j,le),$(j,N,le),k(q,j,le),$(j,ie,le),k(A,j,le),$(j,Ne,le),k(Pe,j,le),$(j,We,le),k(Re,j,le),$(j,je,le),k(Te,j,le),$(j,He,le),k(me,j,le),$(j,De,le),k(Be,j,le),Oe=!0},p(j,le){(!Oe||le&256)&&s!==(s=j[8].interventions.toLocaleString()+"")&&z(o,s),(!Oe||le&128)&&f!==(f=j[7].size.toLocaleString()+"")&&z(c,f),(!Oe||le&256)&&S!==(S=Rl(j[8].totalLength).toFixed(1)+"")&&z(P,S);const Et={};le&536870912&&(Et.$$scope={dirty:le,ctx:j}),I.$set(Et);const se={};le&512&&(se.choices=j[9]),!R&&le&1&&(R=!0,se.value=j[0],W(()=>R=!1)),O.$set(se);const be={};le&1024&&(be.choices=j[10]),!ne&&le&2&&(ne=!0,be.value=j[1],W(()=>ne=!1)),q.$set(be);const yt={};le&2048&&(yt.choices=j[11]),!K&&le&4&&(K=!0,yt.value=j[2],W(()=>K=!1)),A.$set(yt);const Ut={};!ae&&le&8&&(ae=!0,Ut.value=j[3],W(()=>ae=!1)),Pe.$set(Ut);const Wt={};le&536870944&&(Wt.$$scope={dirty:le,ctx:j}),Re.$set(Wt);const Yt={};le&536870928&&(Yt.$$scope={dirty:le,ctx:j}),Te.$set(Yt);const Jt={};le&536870912&&(Jt.$$scope={dirty:le,ctx:j}),Be.$set(Jt)},i(j){Oe||(_(I.$$.fragment,j),_(O.$$.fragment,j),_(q.$$.fragment,j),_(A.$$.fragment,j),_(Pe.$$.fragment,j),_(Re.$$.fragment,j),_(Te.$$.fragment,j),_(me.$$.fragment,j),_(Be.$$.fragment,j),Oe=!0)},o(j){g(I.$$.fragment,j),g(O.$$.fragment,j),g(q.$$.fragment,j),g(A.$$.fragment,j),g(Pe.$$.fragment,j),g(Re.$$.fragment,j),g(Te.$$.fragment,j),g(me.$$.fragment,j),g(Be.$$.fragment,j),Oe=!1},d(j){j&&(p(e),p(l),p(t),p(D),p(M),p(N),p(ie),p(Ne),p(We),p(je),p(He),p(De)),w(I,j),w(O,j),w(q,j),w(A,j),w(Pe,j),w(Re,j),w(Te,j),w(me,j),w(Be,j)}}}function I$(r){let e,l,t,n,s;e=new rt({props:{$$slots:{default:[S$]},$$scope:{ctx:r}}}),e.$on("click",r[14]);function o(a){r[24](a)}let u={title:"Filter schemes",$$slots:{default:[O$]},$$scope:{ctx:r}};return r[6]!==void 0&&(u.open=r[6]),t=new os({props:u}),G.push(()=>U(t,"open",o)),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(a,i){k(e,a,i),$(a,l,i),k(t,a,i),s=!0},p(a,[i]){const f={};i&536870912&&(f.$$scope={dirty:i,ctx:a}),e.$set(f);const c={};i&536875007&&(c.$$scope={dirty:i,ctx:a}),!n&&i&64&&(n=!0,c.open=a[6],W(()=>n=!1)),t.$set(c)},i(a){s||(_(e.$$.fragment,a),_(t.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),s=!1},d(a){a&&p(l),w(e,a),w(t,a)}}}function Rl(r){return r*621371e-9}function R$(r,e,l){let t,n,s,o;E(r,Kt,ae=>l(4,t=ae)),E(r,Qt,ae=>l(5,n=ae)),E(r,kt,ae=>l(25,s=ae)),E(r,ln,ae=>l(26,o=ae));let u=!1,a=new Set,i={interventions:0,totalLength:0},f=[],c="",m=[],d=new Set(cn.slice(0,-1)),L="",y=[],S="",P=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],F="";gn(()=>{var je,Te,He;let ae=new Set,We=new Set,Re=new Set;for(let me of o.values())(je=me.browse)!=null&&je.authority_or_region&&ae.add(me.browse.authority_or_region),(Te=me.browse)!=null&&Te.funding_programme&&We.add(me.browse.funding_programme),(He=me.browse)!=null&&He.current_milestone&&Re.add(me.browse.current_milestone);l(9,f=Array.from(ae.entries())),f.sort(),l(10,m=cn.map(me=>[me,me])),l(11,y=Array.from(Re.entries())),y.sort()});function D(ae,We,Re,je,Te,He){let me=We.toLowerCase(),De=Re.toLowerCase(),Be=pe=>{var ke,ve,he,Me,Le,we,ot;if(me&&!((ke=pe.properties.name)!=null&&ke.toLowerCase().includes(me))&&!((ve=pe.properties.description)!=null&&ve.toLowerCase().includes(me)))return!1;if(ae||De||je||Te||He){let j=o.get(pe.properties.scheme_reference);if(je&&((he=j.browse)==null?void 0:he.authority_or_region)!=je||Te&&Te!=="Other"&&((Me=j.browse)==null?void 0:Me.funding_programme)!=Te||Te==="Other"&&d.has(((Le=j.browse)==null?void 0:Le.funding_programme)??"")||He&&((we=j.browse)==null?void 0:we.current_milestone)!=He||De&&!j.scheme_reference.toLowerCase().includes(De)&&!(j.scheme_name??"").toLowerCase().includes(De)||ae&&ae!=="Both"&&ae!==((ot=j.browse)==null?void 0:ot.sketch_source))return!1}return!0};l(7,a=new Set(s.features.filter(Be).map(pe=>pe.properties.scheme_reference))),l(8,i={interventions:0,totalLength:0});let Oe=pe=>{var ke,ve;return!(!a.has(pe.properties.scheme_reference)||me&&!((ke=pe.properties.name)!=null&&ke.toLowerCase().includes(me))&&!((ve=pe.properties.description)!=null&&ve.toLowerCase().includes(me)))};for(let pe of s.features)Oe(pe)?(delete pe.properties.hide_while_editing,l(8,i.interventions++,i),pe.geometry.type=="LineString"&&pe.properties.length_meters&&l(8,i.totalLength+=pe.properties.length_meters,i)):pe.properties.hide_while_editing=!0;kt.set(s),l(8,i)}function I(){l(3,F=""),l(0,c=""),l(1,L=""),l(2,S=""),Ae(Qt,n="",n),Ae(Kt,t="",t)}const M=()=>l(6,u=!0);function O(ae){c=ae,l(0,c)}function R(ae){L=ae,l(1,L)}function N(ae){S=ae,l(2,S)}function q(ae){F=ae,l(3,F)}function ne(){n=this.value,Qt.set(n)}const ie=()=>Ae(Qt,n="",n);function A(){t=this.value,Kt.set(t)}const K=()=>Ae(Kt,t="",t),Ne=()=>l(6,u=!1);function Pe(ae){u=ae,l(6,u)}return r.$$.update=()=>{r.$$.dirty&63&&D(F,n,t,c,L,S)},[c,L,S,F,t,n,u,a,i,f,m,y,P,I,M,O,R,N,q,ne,ie,A,K,Ne,Pe]}class D$ extends J{constructor(e){super(),V(this,e,R$,I$,Y,{})}}function Dl(r){let e,l,t,n=r[0].status+"",s;return{c(){e=C("p"),l=v("Status: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[0].status+"")&&z(s,n)},d(o){o&&p(e)}}}function Al(r){let e,l,t,n=r[0].timescale+"",s;return{c(){e=C("p"),l=v("Timescale: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[0].timescale+"")&&z(s,n)},d(o){o&&p(e)}}}function Fl(r){let e,l,t,n=r[0].timescale_year+"",s;return{c(){e=C("p"),l=v("Estimated completion year: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[0].timescale_year+"")&&z(s,n)},d(o){o&&p(e)}}}function ql(r){let e,l,t,n=r[0].year_published+"",s;return{c(){e=C("p"),l=v("Scheme most recently published: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[0].year_published+"")&&z(s,n)},d(o){o&&p(e)}}}function zl(r){let e,l,t,n=r[0].year_consulted+"",s;return{c(){e=C("p"),l=v("Scheme most recently consulted on: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[0].year_consulted+"")&&z(s,n)},d(o){o&&p(e)}}}function A$(r){let e,l,t,n,s,o=r[0].status&&Dl(r),u=r[0].timescale&&Al(r),a=r[0].timescale_year&&Fl(r),i=r[0].year_published&&ql(r),f=r[0].year_consulted&&zl(r);return{c(){o&&o.c(),e=T(),u&&u.c(),l=T(),a&&a.c(),t=T(),i&&i.c(),n=T(),f&&f.c(),s=Ie()},m(c,m){o&&o.m(c,m),$(c,e,m),u&&u.m(c,m),$(c,l,m),a&&a.m(c,m),$(c,t,m),i&&i.m(c,m),$(c,n,m),f&&f.m(c,m),$(c,s,m)},p(c,[m]){c[0].status?o?o.p(c,m):(o=Dl(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[0].timescale?u?u.p(c,m):(u=Al(c),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),c[0].timescale_year?a?a.p(c,m):(a=Fl(c),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),c[0].year_published?i?i.p(c,m):(i=ql(c),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),c[0].year_consulted?f?f.p(c,m):(f=zl(c),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null)},i:x,o:x,d(c){c&&(p(e),p(l),p(t),p(n),p(s)),o&&o.d(c),u&&u.d(c),a&&a.d(c),i&&i.d(c),f&&f.d(c)}}}function F$(r,e,l){let{props:t}=e;return r.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class gs extends J{constructor(e){super(),V(this,e,F$,A$,Y,{props:0})}}function jl(r){let e,l,t,n=r[0].budget.toLocaleString()+"",s,o;return{c(){e=C("p"),l=v("Cost: "),t=C("b"),s=v(n),o=v(`
    GBP`)},m(u,a){$(u,e,a),h(e,l),h(e,t),h(t,s),h(e,o)},p(u,a){a&1&&n!==(n=u[0].budget.toLocaleString()+"")&&z(s,n)},d(u){u&&p(e)}}}function Hl(r){let e;return{c(){e=C("p"),e.textContent="Development is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Bl(r){let e;return{c(){e=C("p"),e.textContent="Construction is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Gl(r){let e,l,t,n;return{c(){e=C("p"),l=v("Funding sources: "),t=C("b"),n=v(r[1])},m(s,o){$(s,e,o),h(e,l),h(e,t),h(t,n)},p(s,o){o&2&&z(n,s[1])},d(s){s&&p(e)}}}function q$(r){let e,l,t,n,s=r[0].budget&&jl(r),o=r[0].development_funded&&Hl(),u=r[0].construction_funded&&Bl(),a=r[1]&&Gl(r);return{c(){s&&s.c(),e=T(),o&&o.c(),l=T(),u&&u.c(),t=T(),a&&a.c(),n=Ie()},m(i,f){s&&s.m(i,f),$(i,e,f),o&&o.m(i,f),$(i,l,f),u&&u.m(i,f),$(i,t,f),a&&a.m(i,f),$(i,n,f)},p(i,[f]){i[0].budget?s?s.p(i,f):(s=jl(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),i[0].development_funded?o||(o=Hl(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),i[0].construction_funded?u||(u=Bl(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),i[1]?a?a.p(i,f):(a=Gl(i),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:x,o:x,d(i){i&&(p(e),p(l),p(t),p(n)),s&&s.d(i),o&&o.d(i),u&&u.d(i),a&&a.d(i)}}}function z$(r){if(!r.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])r.funding_sources[l]&&e.push(l.toUpperCase());return r.funding_sources.other&&e.push(r.funding_sources.other),e.join(", ")}function j$(r,e,l){let t,{props:n}=e;return r.$$set=s=>{"props"in s&&l(0,n=s.props)},r.$$.update=()=>{r.$$.dirty&1&&l(1,t=z$(n))},[n,t]}class ds extends J{constructor(e){super(),V(this,e,j$,q$,Y,{props:0})}}function on(r){const e=r.slice(),l=e[1].pipeline;return e[9]=l,e}function an(r){const e=r.slice(),l=e[0].pipeline;return e[9]=l,e}function El(r){let e,l,t,n=Cn(r[0].length_meters)+"",s;return{c(){e=C("p"),l=v("Length: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=Cn(o[0].length_meters)+"")&&z(s,n)},d(o){o&&p(e)}}}function Ul(r){let e,l=it(r[0].description,r[2])+"";return{c(){e=C("p")},m(t,n){$(t,e,n),e.innerHTML=l},p(t,n){n&5&&l!==(l=it(t[0].description,t[2])+"")&&(e.innerHTML=l)},d(t){t&&p(e)}}}function Wl(r){let e,l,t,n,s,o,u,a=r[9].atf4_type&&Yl(r),i=r[9].accuracy&&Jl(r),f=r[9].is_alternative&&Vl();return n=new ds({props:{props:r[9]}}),o=new gs({props:{props:r[9]}}),{c(){a&&a.c(),e=T(),i&&i.c(),l=T(),f&&f.c(),t=T(),b(n.$$.fragment),s=T(),b(o.$$.fragment)},m(c,m){a&&a.m(c,m),$(c,e,m),i&&i.m(c,m),$(c,l,m),f&&f.m(c,m),$(c,t,m),k(n,c,m),$(c,s,m),k(o,c,m),u=!0},p(c,m){c[9].atf4_type?a?a.p(c,m):(a=Yl(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[9].accuracy?i?i.p(c,m):(i=Jl(c),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),c[9].is_alternative?f||(f=Vl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const d={};m&1&&(d.props=c[9]),n.$set(d);const L={};m&1&&(L.props=c[9]),o.$set(L)},i(c){u||(_(n.$$.fragment,c),_(o.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),u=!1},d(c){c&&(p(e),p(l),p(t),p(s)),a&&a.d(c),i&&i.d(c),f&&f.d(c),w(n,c),w(o,c)}}}function Yl(r){let e,l,t,n=r[9].atf4_type+"",s;return{c(){e=C("p"),l=v("ATF4 type: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[9].atf4_type+"")&&z(s,n)},d(o){o&&p(e)}}}function Jl(r){let e,l,t,n=r[9].accuracy+"",s;return{c(){e=C("p"),l=v("Accuracy: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&1&&n!==(n=o[9].accuracy+"")&&z(s,n)},d(o){o&&p(e)}}}function Vl(r){let e;return{c(){e=C("p"),e.textContent="Represents an alternative route"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ql(r){var o;let e,l,t,n=((o=r[1].browse)==null?void 0:o.capital_scheme_id)+"",s;return{c(){e=C("p"),l=v("Capital scheme ID: "),t=C("b"),s=v(n)},m(u,a){$(u,e,a),h(e,l),h(e,t),h(t,s)},p(u,a){var i;a&2&&n!==(n=((i=u[1].browse)==null?void 0:i.capital_scheme_id)+"")&&z(s,n)},d(u){u&&p(e)}}}function Kl(r){var o;let e,l,t,n=((o=r[1].browse)==null?void 0:o.current_milestone)+"",s;return{c(){e=C("p"),l=v("Current milestone: "),t=C("b"),s=v(n)},m(u,a){$(u,e,a),h(e,l),h(e,t),h(t,s)},p(u,a){var i;a&2&&n!==(n=((i=u[1].browse)==null?void 0:i.current_milestone)+"")&&z(s,n)},d(u){u&&p(e)}}}function Zl(r){let e,l,t,n,s,o,u,a=r[9].scheme_type&&Xl(r),i=r[9].atf4_lead_type&&xl(r),f=r[9].scheme_description&&es(r);return n=new ds({props:{props:r[9]}}),o=new gs({props:{props:r[9]}}),{c(){a&&a.c(),e=T(),i&&i.c(),l=T(),f&&f.c(),t=T(),b(n.$$.fragment),s=T(),b(o.$$.fragment)},m(c,m){a&&a.m(c,m),$(c,e,m),i&&i.m(c,m),$(c,l,m),f&&f.m(c,m),$(c,t,m),k(n,c,m),$(c,s,m),k(o,c,m),u=!0},p(c,m){c[9].scheme_type?a?a.p(c,m):(a=Xl(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[9].atf4_lead_type?i?i.p(c,m):(i=xl(c),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),c[9].scheme_description?f?f.p(c,m):(f=es(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const d={};m&2&&(d.props=c[9]),n.$set(d);const L={};m&2&&(L.props=c[9]),o.$set(L)},i(c){u||(_(n.$$.fragment,c),_(o.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),u=!1},d(c){c&&(p(e),p(l),p(t),p(s)),a&&a.d(c),i&&i.d(c),f&&f.d(c),w(n,c),w(o,c)}}}function Xl(r){let e,l,t,n=r[9].scheme_type+"",s;return{c(){e=C("p"),l=v("Scheme type: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&2&&n!==(n=o[9].scheme_type+"")&&z(s,n)},d(o){o&&p(e)}}}function xl(r){let e,l,t,n=r[9].atf4_lead_type+"",s;return{c(){e=C("p"),l=v("ATF4 lead type: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&2&&n!==(n=o[9].atf4_lead_type+"")&&z(s,n)},d(o){o&&p(e)}}}function es(r){let e,l,t=r[9].scheme_description+"",n;return{c(){e=C("p"),l=v("Descripton: "),n=v(t)},m(s,o){$(s,e,o),h(e,l),h(e,n)},p(s,o){o&2&&t!==(t=s[9].scheme_description+"")&&z(n,t)},d(s){s&&p(e)}}}function H$(r){let e;return{c(){e=v("Zoom to show entire scheme")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function B$(r){let e;return{c(){e=v("Edit a copy of this scheme")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function G$(r){var ot,j,le,Et;let e,l,t,n=it(r[0].name,r[2])+"",s,o=r[0].intervention_type+"",u,a,i,f,c,m,d,L,y,S,P,F=it(r[1].scheme_name??"",r[3])+"",D,I,M=it(r[0].scheme_reference,r[3])+"",O,R,N,q,ne,ie=((ot=r[1].browse)==null?void 0:ot.authority_or_region)+"",A,K,Ne,Pe,ae,We,Re=((j=r[1].browse)==null?void 0:j.funding_programme)+"",je,Te,He,me,De,Be,Oe,pe,ke=r[0].length_meters&&El(r),ve=r[0].description&&Ul(r),he=r[0].pipeline&&Wl(an(r)),Me=((le=r[1].browse)==null?void 0:le.capital_scheme_id)&&Ql(r),Le=((Et=r[1].browse)==null?void 0:Et.current_milestone)&&Kl(r),we=r[1].pipeline&&Zl(on(r));return De=new rt({props:{$$slots:{default:[H$]},$$scope:{ctx:r}}}),De.$on("click",r[4]),Oe=new rt({props:{$$slots:{default:[B$]},$$scope:{ctx:r}}}),Oe.$on("click",r[5]),{c(){e=C("div"),l=C("h2"),t=new mt(!1),s=v(" ("),u=v(o),a=v(")"),i=T(),ke&&ke.c(),f=T(),ve&&ve.c(),c=T(),he&&he.c(),m=T(),d=C("hr"),L=T(),y=C("p"),S=v("Part of scheme: "),P=new mt(!1),D=v(" ("),I=new mt(!1),O=v(")"),R=T(),N=C("p"),q=v("Authority or region: "),ne=C("b"),A=v(ie),K=T(),Me&&Me.c(),Ne=T(),Pe=C("p"),ae=v("Funding programme: "),We=C("b"),je=v(Re),Te=T(),Le&&Le.c(),He=T(),we&&we.c(),me=T(),b(De.$$.fragment),Be=T(),b(Oe.$$.fragment),t.a=s,P.a=D,I.a=O,ge(e,"max-width","30vw"),ge(e,"max-height","60vh"),ge(e,"overflow","auto")},m(se,be){$(se,e,be),h(e,l),t.m(n,l),h(l,s),h(l,u),h(l,a),h(e,i),ke&&ke.m(e,null),h(e,f),ve&&ve.m(e,null),h(e,c),he&&he.m(e,null),h(e,m),h(e,d),h(e,L),h(e,y),h(y,S),P.m(F,y),h(y,D),I.m(M,y),h(y,O),h(e,R),h(e,N),h(N,q),h(N,ne),h(ne,A),h(e,K),Me&&Me.m(e,null),h(e,Ne),h(e,Pe),h(Pe,ae),h(Pe,We),h(We,je),h(e,Te),Le&&Le.m(e,null),h(e,He),we&&we.m(e,null),h(e,me),k(De,e,null),h(e,Be),k(Oe,e,null),pe=!0},p(se,[be]){var Wt,Yt,Jt,kn;(!pe||be&5)&&n!==(n=it(se[0].name,se[2])+"")&&t.p(n),(!pe||be&1)&&o!==(o=se[0].intervention_type+"")&&z(u,o),se[0].length_meters?ke?ke.p(se,be):(ke=El(se),ke.c(),ke.m(e,f)):ke&&(ke.d(1),ke=null),se[0].description?ve?ve.p(se,be):(ve=Ul(se),ve.c(),ve.m(e,c)):ve&&(ve.d(1),ve=null),se[0].pipeline?he?(he.p(an(se),be),be&1&&_(he,1)):(he=Wl(an(se)),he.c(),_(he,1),he.m(e,m)):he&&(ce(),g(he,1,1,()=>{he=null}),$e()),(!pe||be&10)&&F!==(F=it(se[1].scheme_name??"",se[3])+"")&&P.p(F),(!pe||be&9)&&M!==(M=it(se[0].scheme_reference,se[3])+"")&&I.p(M),(!pe||be&2)&&ie!==(ie=((Wt=se[1].browse)==null?void 0:Wt.authority_or_region)+"")&&z(A,ie),(Yt=se[1].browse)!=null&&Yt.capital_scheme_id?Me?Me.p(se,be):(Me=Ql(se),Me.c(),Me.m(e,Ne)):Me&&(Me.d(1),Me=null),(!pe||be&2)&&Re!==(Re=((Jt=se[1].browse)==null?void 0:Jt.funding_programme)+"")&&z(je,Re),(kn=se[1].browse)!=null&&kn.current_milestone?Le?Le.p(se,be):(Le=Kl(se),Le.c(),Le.m(e,He)):Le&&(Le.d(1),Le=null),se[1].pipeline?we?(we.p(on(se),be),be&2&&_(we,1)):(we=Zl(on(se)),we.c(),_(we,1),we.m(e,me)):we&&(ce(),g(we,1,1,()=>{we=null}),$e());const yt={};be&1024&&(yt.$$scope={dirty:be,ctx:se}),De.$set(yt);const Ut={};be&1024&&(Ut.$$scope={dirty:be,ctx:se}),Oe.$set(Ut)},i(se){pe||(_(he),_(we),_(De.$$.fragment,se),_(Oe.$$.fragment,se),pe=!0)},o(se){g(he),g(we),g(De.$$.fragment,se),g(Oe.$$.fragment,se),pe=!1},d(se){se&&p(e),ke&&ke.d(),ve&&ve.d(),he&&he.d(),Me&&Me.d(),Le&&Le.d(),we&&we.d(),w(De),w(Oe)}}}function it(r,e){return e?r.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):r}function E$(r,e,l){let t,n,s,o,u,a;E(r,kt,m=>l(7,n=m)),E(r,sn,m=>l(8,s=m)),E(r,ln,m=>l(6,o=m)),E(r,Qt,m=>l(2,u=m)),E(r,Kt,m=>l(3,a=m));let{props:i}=e;function f(){let m={type:"FeatureCollection",features:n.features.filter(d=>d.properties.scheme_reference==t.scheme_reference)};s==null||s.fitBounds(As(m),{padding:20,animate:!1})}function c(){var L,y;let m={type:"FeatureCollection",features:n.features.filter(S=>S.properties.scheme_reference==t.scheme_reference)},d=((L=t.browse)==null?void 0:L.authority_or_region)||"unknown authority";Cs(d,JSON.stringify(m)),window.open(`scheme.html?authority=${(y=t.browse)==null?void 0:y.authority_or_region}`,"_blank")}return r.$$set=m=>{"props"in m&&l(0,i=m.props)},r.$$.update=()=>{r.$$.dirty&65&&l(1,t=o.get(i.scheme_reference))},[i,t,u,a,f,c,o]}class bn extends J{constructor(e){super(),V(this,e,E$,G$,Y,{props:0})}}function U$(r){let e,l=r[6].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&64&&l!==(l=n[6].name+"")&&z(t,l)},d(n){n&&p(e)}}}function W$(r){let e,l;return e=new bn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.props=t[6]),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Y$(r){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[U$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[W$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(s,o){k(e,s,o),$(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function J$(r){let e,l=r[6].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&64&&l!==(l=n[6].name+"")&&z(t,l)},d(n){n&&p(e)}}}function V$(r){let e,l;return e=new bn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.props=t[6]),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Q$(r){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[J$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[V$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(s,o){k(e,s,o),$(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function K$(r){let e,l=r[6].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&64&&l!==(l=n[6].name+"")&&z(t,l)},d(n){n&&p(e)}}}function Z$(r){let e,l;return e=new bn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.props=t[6]),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function X$(r){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[K$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Z$,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(s,o){k(e,s,o),$(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function x$(r){let e,l,t,n,s,o,u,a,i,f;const c=[H("interventions-points"),{filter:["all",Ln,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Tn,"circle-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let m={$$slots:{default:[Y$]},$$scope:{ctx:r}};for(let M=0;M<c.length;M+=1)m=ee(m,c[M]);e=new bt({props:m});const d=[H("interventions-lines"),{filter:["all",Mn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Vt,"line-opacity":X(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let L={$$slots:{default:[Q$]},$$scope:{ctx:r}};for(let M=0;M<d.length;M+=1)L=ee(L,d[M]);t=new ye({props:L});const y=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Vt,"circle-opacity":0,"circle-stroke-color":et.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let S={};for(let M=0;M<y.length;M+=1)S=ee(S,y[M]);s=new bt({props:S});const P=[H("interventions-polygons"),{filter:["all",xt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":X(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let F={$$slots:{default:[X$]},$$scope:{ctx:r}};for(let M=0;M<P.length;M+=1)F=ee(F,P[M]);u=new Ee({props:F});const D=[H("interventions-polygons-outlines"),{filter:["all",xt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Vt}},{layout:{visibility:r[0]?"visible":"none"}}];let I={};for(let M=0;M<D.length;M+=1)I=ee(I,D[M]);return i=new ye({props:I}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment),n=T(),b(s.$$.fragment),o=T(),b(u.$$.fragment),a=T(),b(i.$$.fragment)},m(M,O){k(e,M,O),$(M,l,O),k(t,M,O),$(M,n,O),k(s,M,O),$(M,o,O),k(u,M,O),$(M,a,O),k(i,M,O),f=!0},p(M,O){const R=O&29?te(c,[c[0],O&24&&{filter:["all",Ln,M[3],M[4]]},c[2],c[3],O&4&&{paint:{"circle-color":M[2],"circle-radius":Tn,"circle-opacity":X(1,.5)}},O&1&&{layout:{visibility:M[0]?"visible":"none"}},c[6]]):{};O&128&&(R.$$scope={dirty:O,ctx:M}),e.$set(R);const N=O&13?te(d,[d[0],O&8&&{filter:["all",Mn,M[3]]},d[2],d[3],O&4&&{paint:{"line-color":M[2],"line-width":Vt,"line-opacity":X(1,.5)}},O&1&&{layout:{visibility:M[0]?"visible":"none"}},d[6]]):{};O&128&&(N.$$scope={dirty:O,ctx:M}),t.$set(N);const q=O&1?te(y,[y[0],y[1],y[2],{layout:{visibility:M[0]?"visible":"none"}}]):{};s.$set(q);const ne=O&13?te(P,[P[0],O&8&&{filter:["all",xt,M[3]]},P[2],P[3],O&4&&{paint:{"fill-color":M[2],"fill-opacity":X(.2,.5)}},O&1&&{layout:{visibility:M[0]?"visible":"none"}},P[6]]):{};O&128&&(ne.$$scope={dirty:O,ctx:M}),u.$set(ne);const ie=O&13?te(D,[D[0],O&8&&{filter:["all",xt,M[3]]},O&4&&{paint:{"line-color":M[2],"line-opacity":.5,"line-width":.7*Vt}},O&1&&{layout:{visibility:M[0]?"visible":"none"}}]):{};i.$set(ie)},i(M){f||(_(e.$$.fragment,M),_(t.$$.fragment,M),_(s.$$.fragment,M),_(u.$$.fragment,M),_(i.$$.fragment,M),f=!0)},o(M){g(e.$$.fragment,M),g(t.$$.fragment,M),g(s.$$.fragment,M),g(u.$$.fragment,M),g(i.$$.fragment,M),f=!1},d(M){M&&(p(l),p(n),p(o),p(a)),w(e,M),w(t,M),w(s,M),w(u,M),w(i,M)}}}function ep(r){let e,l;return e=new wt({props:{data:r[1],$$slots:{default:[x$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&2&&(s.data=t[1]),n&129&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function tp(r,e,l){let t,n;E(r,kt,i=>l(5,n=i));let{show:s}=e,[o]=$n();const u=["!=",["get","hide_while_editing"],!0],a=["!=",["get","endpoint"],!0];return r.$$set=i=>{"show"in i&&l(0,s=i.show)},r.$$.update=()=>{r.$$.dirty&32&&l(1,t=Fs(n))},[s,t,o,u,a,n]}class np extends J{constructor(e){super(),V(this,e,tp,ep,Y,{show:0})}}function ts(r,e,l){const t=r.slice();return t[6]=e[l],t}function lp(r){let e,l;return e=new d$({props:{loadFile:r[4]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ns(r){let e,l,t,n,s;function o(a){r[5](a)}let u={$$slots:{right:[op],default:[sp]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),G.push(()=>U(e,"checked",o)),n=new D$({}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,i){const f={};i&516&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],W(()=>l=!1)),e.$set(f)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}function sp(r){let e;return{c(){e=v("ATF and LCWIP schemes")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ls(r){let e,l=Fe(r[2].notes),t=[];for(let n=0;n<l.length;n+=1)t[n]=ss(ts(r,l,n));return{c(){e=C("ul");for(let n=0;n<t.length;n+=1)t[n].c()},m(n,s){$(n,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,s){if(s&4){l=Fe(n[2].notes);let o;for(o=0;o<l.length;o+=1){const u=ts(n,l,o);t[o]?t[o].p(u,s):(t[o]=ss(u),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&p(e),at(t,n)}}}function ss(r){let e,l,t=r[6]+"",n;return{c(){e=C("li"),l=C("p"),n=v(t)},m(s,o){$(s,e,o),h(e,l),h(l,n)},p(s,o){o&4&&t!==(t=s[6]+"")&&z(n,t)},d(s){s&&p(e)}}}function rp(r){let e,l,t,n=r[2].notes&&ls(r);return{c(){e=C("p"),e.textContent="Please note there are data quality caveats for all scheme data:",l=T(),n&&n.c(),t=Ie()},m(s,o){$(s,e,o),$(s,l,o),n&&n.m(s,o),$(s,t,o)},p(s,o){s[2].notes?n?n.p(s,o):(n=ls(s),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(s){s&&(p(e),p(l),p(t)),n&&n.d(s)}}}function op(r){let e,l,t;return l=new ue({props:{$$slots:{default:[rp]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),B(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&516&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ip(r){let e=dn()=="Private (development)",l,t,n,s,o,u,a=e&&lp(r),i=r[3].size>0&&ns(r);return n=new Ls({props:{label:"Load schemes from GeoJSON",onLoad:r[4]}}),o=new Ts({props:{errorMessage:r[1]}}),{c(){a&&a.c(),l=T(),i&&i.c(),t=T(),b(n.$$.fragment),s=T(),b(o.$$.fragment)},m(f,c){a&&a.m(f,c),$(f,l,c),i&&i.m(f,c),$(f,t,c),k(n,f,c),$(f,s,c),k(o,f,c),u=!0},p(f,c){e&&a.p(f,c),f[3].size>0?i?(i.p(f,c),c&8&&_(i,1)):(i=ns(f),i.c(),_(i,1),i.m(t.parentNode,t)):i&&(ce(),g(i,1,1,()=>{i=null}),$e());const m={};c&2&&(m.errorMessage=f[1]),o.$set(m)},i(f){u||(_(a),_(i),_(n.$$.fragment,f),_(o.$$.fragment,f),u=!0)},o(f){g(a),g(i),g(n.$$.fragment,f),g(o.$$.fragment,f),u=!1},d(f){f&&(p(l),p(t),p(s)),a&&a.d(f),i&&i.d(f),w(n,f),w(o,f)}}}function ap(r){let e,l,t,n;return e=new Xe({props:{label:"Schemes",$$slots:{default:[ip]},$$scope:{ctx:r}}}),t=new np({props:{show:r[0]}}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(s,o){k(e,s,o),$(s,l,o),k(t,s,o),n=!0},p(s,[o]){const u={};o&527&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&1&&(a.show=s[0]),t.$set(a)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function fp(r,e,l){let t,n;E(r,kt,i=>l(2,t=i)),E(r,ln,i=>l(3,n=i));let s=!0,o="";function u(i,f){try{kt.set(JSON.parse(f)),ln.set(kr(t)),l(1,o="")}catch(c){l(1,o=`The file you loaded is broken: ${c}`)}}function a(i){s=i,l(0,s)}return[s,o,t,n,u,a]}class up extends J{constructor(e){super(),V(this,e,fp,ap,Y,{})}}function cp(r){let e,l,t,n,s,o,u,a;return e=new Qu({}),t=new ic({}),s=new yc({}),u=new hc({}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment),n=T(),b(s.$$.fragment),o=T(),b(u.$$.fragment)},m(i,f){k(e,i,f),$(i,l,f),k(t,i,f),$(i,n,f),k(s,i,f),$(i,o,f),k(u,i,f),a=!0},i(i){a||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),_(u.$$.fragment,i),a=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),g(u.$$.fragment,i),a=!1},d(i){i&&(p(l),p(n),p(o)),w(e,i),w(t,i),w(s,i),w(u,i)}}}function $p(r){let e,l;return e=new ct({props:{small:!0,$$slots:{default:[cp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function pp(r){let e,l,t,n,s,o,u,a,i,f,c,m;return e=new ua({}),t=new Ha({}),s=new ka({}),u=new Pa({}),i=new Au({}),c=new mu({}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment),n=T(),b(s.$$.fragment),o=T(),b(u.$$.fragment),a=T(),b(i.$$.fragment),f=T(),b(c.$$.fragment)},m(d,L){k(e,d,L),$(d,l,L),k(t,d,L),$(d,n,L),k(s,d,L),$(d,o,L),k(u,d,L),$(d,a,L),k(i,d,L),$(d,f,L),k(c,d,L),m=!0},i(d){m||(_(e.$$.fragment,d),_(t.$$.fragment,d),_(s.$$.fragment,d),_(u.$$.fragment,d),_(i.$$.fragment,d),_(c.$$.fragment,d),m=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(s.$$.fragment,d),g(u.$$.fragment,d),g(i.$$.fragment,d),g(c.$$.fragment,d),m=!1},d(d){d&&(p(l),p(n),p(o),p(a),p(f)),w(e,d),w(t,d),w(s,d),w(u,d),w(i,d),w(c,d)}}}function mp(r){let e,l;return e=new ct({props:{small:!0,$$slots:{default:[pp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function _p(r){let e,l,t,n,s,o;return e=new Ki({}),t=new Jf({}),s=new lu({}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment),n=T(),b(s.$$.fragment)},m(u,a){k(e,u,a),$(u,l,a),k(t,u,a),$(u,n,a),k(s,u,a),o=!0},i(u){o||(_(e.$$.fragment,u),_(t.$$.fragment,u),_(s.$$.fragment,u),o=!0)},o(u){g(e.$$.fragment,u),g(t.$$.fragment,u),g(s.$$.fragment,u),o=!1},d(u){u&&(p(l),p(n)),w(e,u),w(t,u),w(s,u)}}}function gp(r){let e,l,t,n,s,o,u,a,i,f;return e=new ri({}),t=new Fi({}),s=new co({}),u=new Do({}),i=new Vo({}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment),n=T(),b(s.$$.fragment),o=T(),b(u.$$.fragment),a=T(),b(i.$$.fragment)},m(c,m){k(e,c,m),$(c,l,m),k(t,c,m),$(c,n,m),k(s,c,m),$(c,o,m),k(u,c,m),$(c,a,m),k(i,c,m),f=!0},i(c){f||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(s.$$.fragment,c),_(u.$$.fragment,c),_(i.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(s.$$.fragment,c),g(u.$$.fragment,c),g(i.$$.fragment,c),f=!1},d(c){c&&(p(l),p(n),p(o),p(a)),w(e,c),w(t,c),w(s,c),w(u,c),w(i,c)}}}function dp(r){let e,l;return e=new ct({props:{small:!0,$$slots:{default:[gp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function hp(r){let e,l,t,n;return e=new eo({}),t=new yo({}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment)},m(s,o){k(e,s,o),$(s,l,o),k(t,s,o),n=!0},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function bp(r){let e,l;return e=new ct({props:{small:!0,$$slots:{default:[hp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function kp(r){let e,l,t,n,s,o,u,a;return e=new jf({}),t=new xa({}),s=new Nf({}),u=new f$({}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment),n=T(),b(s.$$.fragment),o=T(),b(u.$$.fragment)},m(i,f){k(e,i,f),$(i,l,f),k(t,i,f),$(i,n,f),k(s,i,f),$(i,o,f),k(u,i,f),a=!0},i(i){a||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),_(u.$$.fragment,i),a=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),g(u.$$.fragment,i),a=!1},d(i){i&&(p(l),p(n),p(o)),w(e,i),w(t,i),w(s,i),w(u,i)}}}function wp(r){let e,l,t,n,s,o,u,a,i=dn()=="Private (development)",f,c,m,d,L;e=new xc({}),t=new Bc({}),s=new gf({}),u=new Su({});let y=i&&kp();return c=new _i({}),d=new Ci({}),{c(){b(e.$$.fragment),l=T(),b(t.$$.fragment),n=T(),b(s.$$.fragment),o=T(),b(u.$$.fragment),a=T(),y&&y.c(),f=T(),b(c.$$.fragment),m=T(),b(d.$$.fragment)},m(S,P){k(e,S,P),$(S,l,P),k(t,S,P),$(S,n,P),k(s,S,P),$(S,o,P),k(u,S,P),$(S,a,P),y&&y.m(S,P),$(S,f,P),k(c,S,P),$(S,m,P),k(d,S,P),L=!0},p:x,i(S){L||(_(e.$$.fragment,S),_(t.$$.fragment,S),_(s.$$.fragment,S),_(u.$$.fragment,S),_(y),_(c.$$.fragment,S),_(d.$$.fragment,S),L=!0)},o(S){g(e.$$.fragment,S),g(t.$$.fragment,S),g(s.$$.fragment,S),g(u.$$.fragment,S),g(y),g(c.$$.fragment,S),g(d.$$.fragment,S),L=!1},d(S){S&&(p(l),p(n),p(o),p(a),p(f),p(m)),w(e,S),w(t,S),w(s,S),w(u,S),y&&y.d(S),w(c,S),w(d,S)}}}function vp(r){let e,l;return e=new ct({props:{small:!0,$$slots:{default:[wp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function yp(r){let e,l,t,n,s;function o(a){r[6](a)}let u={cfg:r[5],map:r[3]};return r[0]!==void 0&&(u.enabled=r[0]),e=new zs({props:u}),G.push(()=>U(e,"enabled",o)),n=new br({}),{c(){b(e.$$.fragment),t=T(),b(n.$$.fragment)},m(a,i){k(e,a,i),$(a,t,i),k(n,a,i),s=!0},p(a,i){const f={};i&8&&(f.map=a[3]),!l&&i&1&&(l=!0,f.enabled=a[0],W(()=>l=!1)),e.$set(f)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}function Sp(r){let e,l;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let n={};for(let s=0;s<t.length;s+=1)n=ee(n,t[s]);return e=new Ee({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&2?te(t,[t[0],t[1],{layout:{visibility:s[1]?"none":"visible"}}]):{};e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Cp(r){let e,l,t,n,s,o,u,a,i,f,c,m,d,L,y,S,P,F,D,I,M;return l=new up({}),n=new Xe({props:{label:"Trip generators",$$slots:{default:[$p]},$$scope:{ctx:r}}}),o=new Xe({props:{label:"Existing infrastructure",$$slots:{default:[mp]},$$scope:{ctx:r}}}),a=new Xe({props:{label:"Public transport",$$slots:{default:[_p]},$$scope:{ctx:r}}}),f=new Xe({props:{label:"Boundaries",$$slots:{default:[dp]},$$scope:{ctx:r}}}),m=new Xe({props:{label:"Census",$$slots:{default:[bp]},$$scope:{ctx:r}}}),L=new Xe({props:{label:"Other",$$slots:{default:[vp]},$$scope:{ctx:r}}}),S=new Xe({props:{label:"Tools",$$slots:{default:[yp]},$$scope:{ctx:r}}}),F=new qs({props:{disabled:!r[1]}}),I=new wt({props:{data:r[4],$$slots:{default:[Sp]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(l.$$.fragment),t=T(),b(n.$$.fragment),s=T(),b(o.$$.fragment),u=T(),b(a.$$.fragment),i=T(),b(f.$$.fragment),c=T(),b(m.$$.fragment),d=T(),b(L.$$.fragment),y=T(),b(S.$$.fragment),P=T(),b(F.$$.fragment),D=T(),b(I.$$.fragment)},m(O,R){$(O,e,R),k(l,e,null),h(e,t),k(n,e,null),h(e,s),k(o,e,null),h(e,u),k(a,e,null),h(e,i),k(f,e,null),h(e,c),k(m,e,null),h(e,d),k(L,e,null),h(e,y),k(S,e,null),h(e,P),k(F,e,null),r[7](e),$(O,D,R),k(I,O,R),M=!0},p(O,[R]){const N={};R&256&&(N.$$scope={dirty:R,ctx:O}),n.$set(N);const q={};R&256&&(q.$$scope={dirty:R,ctx:O}),o.$set(q);const ne={};R&256&&(ne.$$scope={dirty:R,ctx:O}),a.$set(ne);const ie={};R&256&&(ie.$$scope={dirty:R,ctx:O}),f.$set(ie);const A={};R&256&&(A.$$scope={dirty:R,ctx:O}),m.$set(A);const K={};R&256&&(K.$$scope={dirty:R,ctx:O}),L.$set(K);const Ne={};R&265&&(Ne.$$scope={dirty:R,ctx:O}),S.$set(Ne);const Pe={};R&2&&(Pe.disabled=!O[1]),F.$set(Pe);const ae={};R&258&&(ae.$$scope={dirty:R,ctx:O}),I.$set(ae)},i(O){M||(_(l.$$.fragment,O),_(n.$$.fragment,O),_(o.$$.fragment,O),_(a.$$.fragment,O),_(f.$$.fragment,O),_(m.$$.fragment,O),_(L.$$.fragment,O),_(S.$$.fragment,O),_(F.$$.fragment,O),_(I.$$.fragment,O),M=!0)},o(O){g(l.$$.fragment,O),g(n.$$.fragment,O),g(o.$$.fragment,O),g(a.$$.fragment,O),g(f.$$.fragment,O),g(m.$$.fragment,O),g(L.$$.fragment,O),g(S.$$.fragment,O),g(F.$$.fragment,O),g(I.$$.fragment,O),M=!1},d(O){O&&(p(e),p(D)),w(l),w(n),w(o),w(a),w(f),w(m),w(L),w(S),w(F),r[7](null),w(I,O)}}}function Lp(r,e,l){let t,n,s,o;E(r,Il,c=>l(1,n=c)),E(r,mn,c=>l(2,s=c)),E(r,sn,c=>l(3,o=c));let u={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},a={getStreetViewRoadLayerNames:c=>js(c,Ms(un))};function i(c){t=c,l(0,t),l(1,n)}function f(c){G[c?"unshift":"push"](()=>{s=c,mn.set(s)})}return r.$$.update=()=>{r.$$.dirty&2&&l(0,t=!n),r.$$.dirty&1&&Il.set(!t)},[t,n,s,o,u,a,i,f]}class Tp extends J{constructor(e){super(),V(this,e,Lp,Cp,Y,{})}}function Mp(r){let e,l,t,n,s,o,u,a,i,f,c,m,d,L;return l=new Hs({}),u=new Bs({props:{boundaryGeojson:r[3]}}),i=new Ns({}),{c(){e=C("div"),b(l.$$.fragment),t=T(),n=C("div"),s=C("h1"),s.textContent="Browse schemes",o=T(),b(u.$$.fragment),a=T(),b(i.$$.fragment),f=T(),c=C("p"),c.textContent=`App version: ${dn()}`,m=T(),d=C("div"),ge(n,"display","flex"),ge(n,"justify-content","space-between"),B(e,"slot","sidebar"),B(e,"class","govuk-prose")},m(y,S){$(y,e,S),k(l,e,null),h(e,t),h(e,n),h(n,s),h(n,o),k(u,n,null),h(e,a),k(i,e,null),h(e,f),h(e,c),h(e,m),h(e,d),r[6](d),L=!0},p(y,S){const P={};S&8&&(P.boundaryGeojson=y[3]),u.$set(P)},i(y){L||(_(l.$$.fragment,y),_(u.$$.fragment,y),_(i.$$.fragment,y),L=!0)},o(y){g(l.$$.fragment,y),g(u.$$.fragment,y),g(i.$$.fragment,y),L=!1},d(y){y&&p(e),w(l),w(u),w(i),r[6](null)}}}function rs(r){let e,l,t;return l=new Tp({}),{c(){e=C("div"),b(l.$$.fragment),B(e,"class","top-right svelte-u44ed2")},m(n,s){$(n,e,s),k(l,e,null),t=!0},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Np(r){let e,l,t,n;e=new Gs({});let s=r[2]&&rs();return{c(){b(e.$$.fragment),l=T(),s&&s.c(),t=Ie()},m(o,u){k(e,o,u),$(o,l,u),s&&s.m(o,u),$(o,t,u),n=!0},p(o,u){o[2]?s?u&4&&_(s,1):(s=rs(),s.c(),_(s,1),s.m(t.parentNode,t)):s&&(ce(),g(s,1,1,()=>{s=null}),$e())},i(o){n||(_(e.$$.fragment,o),_(s),n=!0)},o(o){g(e.$$.fragment,o),g(s),n=!1},d(o){o&&(p(l),p(t)),w(e,o),s&&s.d(o)}}}function Pp(r){let e,l,t;return l=new Ps({props:{style:r[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Np]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(l.$$.fragment),B(e,"slot","main")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2&&(o.style=n[1]),s&260&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Op(r){let e,l;return e=new xs({props:{$$slots:{main:[Pp],sidebar:[Mp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&271&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ip(r,e,l){let t,n,s,o,u;E(r,mn,c=>l(4,t=c)),E(r,sn,c=>l(5,n=c)),E(r,un,c=>l(1,s=c)),E(r,Nn,c=>l(2,o=c)),E(r,kt,c=>l(3,u=c)),gn(()=>{Os()});const a=new URLSearchParams(window.location.search);un.set(a.get("style")||"dataviz");let i;function f(c){G[c?"unshift":"push"](()=>{i=c,l(0,i),l(4,t)})}return r.$$.update=()=>{r.$$.dirty&32&&n&&Nn.set(n),r.$$.dirty&17&&i&&t&&(l(0,i.innerHTML="",i),i.appendChild(t))},[i,s,o,u,t,n,f]}class Rp extends J{constructor(e){super(),V(this,e,Ip,Op,Y,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Rp({target:document.getElementById("app")});
