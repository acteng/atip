import{S as Q,i as K,s as J,e as C,b as z,ax as _e,c as $,n as x,d as p,aT as Ls,g as H,h as E,a as L,k as b,p as k,z as He,q as B,t as g,r as d,u as w,P as mt,Q as _t,T as gt,U as dt,b4 as jn,o as h,al as ve,a8 as ae,a9 as ue,au as Ke,x as v,O as G,a7 as ye,aa as gn,ab as Is,v as Z,ac as Ms,ad as Ns,ae as Ae,af as Os,ag as Ps,b5 as zs,V as St,b6 as Rn,b7 as Hs,G as kt,aP as fn,Y as le,K as de,f as Ee,aR as Es,b3 as ee,a5 as Fe,b8 as me,J as ne,I as Ge,_ as se,as as re,a6 as xt,y as je,X as js,b0 as Vt,b9 as Qt,ba as pt,R as Rs,bb as Bs,bc as Us,w as Ds,bd as Ws,D as Ys,F as Jt,b2 as dn,be as Js,H as Vs,m as hn,j as Qs,E as Ks,aU as Zs,aV as an,L as Xs,M as xs,A as er}from"./index-77999501.js";import{e as Dn,s as q,u as Qe,t as tr,q as nt,M as nr,a as oe,v as he,k as ht,R as lr,h as Ze,C as st,f as bt,b as sr,p as An,g as rr,d as Fn,w as Gn,c as qn,x as Yt,i as Xt,B as or,S as ir,n as fr,H as ar,Z as ur,G as cr,m as zn}from"./ZoomOutMap-85870ff3.js";import{P as ce}from"./Popup-3b3ffff2.js";function $r(r){let e;return{c(){e=C("span"),z(e,"class","svelte-kzgqtg"),_e(e,"background",r[0])},m(l,t){$(l,e,t)},p(l,[t]){t&1&&_e(e,"background",l[0])},i:x,o:x,d(l){l&&p(e)}}}function pr(r,e,l){let{color:t}=e;return r.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Te extends Q{constructor(e){super(),K(this,e,pr,$r,J,{color:0})}}const mr="/atip/browse_layout_v3/assets/help-d011708a.svg";function _r(r){let e,l;const t=r[1].default,n=mt(t,r,r[4],null);return{c(){e=C("div"),n&&n.c(),z(e,"class","govuk-prose")},m(s,o){$(s,e,o),n&&n.m(e,null),l=!0},p(s,o){n&&n.p&&(!l||o&16)&&_t(n,t,s,s[4],l?dt(t,s[4],o,null):gt(s[4]),null)},i(s){l||(g(n,s),l=!0)},o(s){d(n,s),l=!1},d(s){s&&p(e),n&&n.d(s)}}}function gr(r){let e,l,t,n,s,o,u;function i(a){r[3](a)}let f={title:"Help",$$slots:{default:[_r]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.open=r[0]),t=new Ls({props:f}),H.push(()=>E(t,"open",i)),{c(){e=C("button"),e.innerHTML=`<img src="${mr}" title="Help" alt="Help"/>`,l=L(),b(t.$$.fragment),z(e,"class","svelte-7d9d1l")},m(a,c){$(a,e,c),$(a,l,c),k(t,a,c),s=!0,o||(u=He(e,"click",r[2]),o=!0)},p(a,[c]){const m={};c&16&&(m.$$scope={dirty:c,ctx:a}),!n&&c&1&&(n=!0,m.open=a[0],B(()=>n=!1)),t.$set(m)},i(a){s||(g(t.$$.fragment,a),s=!0)},o(a){d(t.$$.fragment,a),s=!1},d(a){a&&(p(e),p(l)),w(t,a),o=!1,u()}}}function dr(r,e,l){let{$$slots:t={},$$scope:n}=e,s=!1;const o=()=>l(0,s=!0);function u(i){s=i,l(0,s)}return r.$$set=i=>{"$$scope"in i&&l(4,n=i.$$scope)},[s,t,o,u,n]}class $e extends Q{constructor(e){super(),K(this,e,dr,gr,J,{})}}const hr=r=>({}),Hn=r=>({}),br=r=>({}),En=r=>({});function kr(r){let e,l,t,n,s,o,u,i,f,a,c;const m=r[4].sidebar,_=mt(m,r,r[3],En),S=r[4].main,y=mt(S,r,r[3],Hn);return{c(){e=C("div"),l=C("aside"),t=C("div"),_&&_.c(),n=L(),s=C("button"),s.textContent="→",u=L(),i=C("main"),y&&y.c(),z(t,"class","sidebar-content content-container svelte-1n0etgd"),z(s,"type","button"),z(s,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),z(l,"class",o=jn(r[1]?"":"collapsed")+" svelte-1n0etgd"),_e(l,"--sidebarWidth",r[0]),z(i,"class","svelte-1n0etgd"),z(e,"class","overall-layout svelte-1n0etgd")},m(T,P){$(T,e,P),h(e,l),h(l,t),_&&_.m(t,null),h(l,n),h(l,s),h(e,u),h(e,i),y&&y.m(i,null),f=!0,a||(c=He(s,"click",r[2]),a=!0)},p(T,[P]){_&&_.p&&(!f||P&8)&&_t(_,m,T,T[3],f?dt(m,T[3],P,br):gt(T[3]),En),(!f||P&2&&o!==(o=jn(T[1]?"":"collapsed")+" svelte-1n0etgd"))&&z(l,"class",o),(!f||P&1)&&_e(l,"--sidebarWidth",T[0]),y&&y.p&&(!f||P&8)&&_t(y,S,T,T[3],f?dt(S,T[3],P,hr):gt(T[3]),Hn)},i(T){f||(g(_,T),g(y,T),f=!0)},o(T){d(_,T),d(y,T),f=!1},d(T){T&&p(e),_&&_.d(T),y&&y.d(T),a=!1,c()}}}function wr(r,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:s="25rem"}=e,o=!0;function u(){l(1,o=!o)}return r.$$set=i=>{"sidebarWidth"in i&&l(0,s=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[s,o,u,n,t]}class vr extends Q{constructor(e){super(),K(this,e,wr,kr,J,{sidebarWidth:0})}}function Bn(r,e,l){const t=r.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Un(r){let e,l,t,n=r[1]+"",s,o,u;return l=new Te({props:{color:r[2]}}),{c(){e=C("li"),b(l.$$.fragment),t=L(),s=v(n),o=L()},m(i,f){$(i,e,f),k(l,e,null),h(e,t),h(e,s),h(e,o),u=!0},p(i,f){const a={};f&1&&(a.color=i[2]),l.$set(a),(!u||f&1)&&n!==(n=i[1]+"")&&G(s,n)},i(i){u||(g(l.$$.fragment,i),u=!0)},o(i){d(l.$$.fragment,i),u=!1},d(i){i&&p(e),w(l)}}}function yr(r){let e,l,t=ve(r[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Un(Bn(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){e=C("ul");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,u){$(o,e,u);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(o,[u]){if(u&1){t=ve(o[0]);let i;for(i=0;i<t.length;i+=1){const f=Bn(o,t,i);n[i]?(n[i].p(f,u),g(n[i],1)):(n[i]=Un(f),n[i].c(),g(n[i],1),n[i].m(e,null))}for(ae(),i=t.length;i<n.length;i+=1)s(i);ue()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)g(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&p(e),Ke(n,o)}}}function Sr(r,e,l){let{rows:t}=e;return r.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Kt extends Q{constructor(e){super(),K(this,e,Sr,yr,J,{rows:0})}}function Wn(r){let e=r[0],l,t,n=Yn(r);return{c(){n.c(),l=ye()},m(s,o){n.m(s,o),$(s,l,o),t=!0},p(s,o){o&1&&J(e,e=s[0])?(ae(),d(n,1,1,x),ue(),n=Yn(s),n.c(),g(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(g(n),t=!0)},o(s){d(n),t=!1},d(s){s&&p(l),n.d(s)}}}function Yn(r){let e;const l=r[16].default,t=mt(l,r,r[15],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&32768)&&_t(t,l,n,n[15],e?dt(l,n[15],s,null):gt(n[15]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function Cr(r){let e,l,t=r[0]&&Wn(r);return{c(){t&&t.c(),e=ye()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&g(t,1)):(t=Wn(n),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ae(),d(t,1,1,()=>{t=null}),ue())},i(n){l||(g(t),l=!0)},o(n){d(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function Tr(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=gn("raster-source")}=e,{tiles:i}=e,{tileSize:f=void 0}=e,{bounds:a=null}=e,{scheme:c=null}=e,{attribution:m=null}=e,{minzoom:_=null}=e,{maxzoom:S=null}=e,{volatile:y=null}=e;const{map:T,self:P}=Is();Z(r,T,N=>l(14,n=N)),Z(r,P,N=>l(0,t=N));let F,D=!0;return Ms(()=>{t&&F&&n&&(Ns(T,t,F),Ae(P,t=null,t),l(12,F=void 0))}),r.$$set=N=>{"id"in N&&l(3,u=N.id),"tiles"in N&&l(4,i=N.tiles),"tileSize"in N&&l(5,f=N.tileSize),"bounds"in N&&l(6,a=N.bounds),"scheme"in N&&l(7,c=N.scheme),"attribution"in N&&l(8,m=N.attribution),"minzoom"in N&&l(9,_=N.minzoom),"maxzoom"in N&&l(10,S=N.maxzoom),"volatile"in N&&l(11,y=N.volatile),"$$scope"in N&&l(15,o=N.$$scope)},r.$$.update=()=>{r.$$.dirty&24569&&n&&t!==u&&(Ae(P,t=u,t),Os(n,t,Ps({type:"raster",tiles:i,tileSize:f,bounds:a,scheme:c,attribution:m,minzoom:_,maxzoom:S,volatile:y}),N=>n&&N===t,()=>{t&&(l(12,F=n==null?void 0:n.getSource(t)),l(13,D=!0))})),r.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,F=n==null?void 0:n.getSource(u))})),r.$$.dirty&12304&&F&&(D?l(13,D=!1):F.setTiles(i))},[t,T,P,u,i,f,a,c,m,_,S,y,F,D,n,o,s]}class Lr extends Q{constructor(e){super(),K(this,e,Tr,Cr,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function Ir(r){let e;const l=r[16].default,t=mt(l,r,r[24],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16777216)&&_t(t,l,n,n[24],e?dt(l,n[24],s,null):gt(n[24]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function Mr(r){let e,l,t;function n(o){r[17](o)}let s={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Ir]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.hovered=r[0]),e=new zs({props:s}),H.push(()=>E(e,"hovered",n)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){b(e.$$.fragment)},m(o,u){k(e,o,u),t=!0},p(o,[u]){const i={};u&2&&(i.id=o[1]),u&4&&(i.source=o[2]),u&8&&(i.sourceLayer=o[3]),u&16&&(i.beforeId=o[4]),u&32&&(i.beforeLayerType=o[5]),u&64&&(i.paint=o[6]),u&128&&(i.layout=o[7]),u&256&&(i.filter=o[8]),u&512&&(i.applyToClusters=o[9]),u&1024&&(i.minzoom=o[10]),u&2048&&(i.maxzoom=o[11]),u&4096&&(i.hoverCursor=o[12]),u&8192&&(i.manageHoverState=o[13]),u&16384&&(i.eventsIfTopMost=o[14]),u&32768&&(i.interactive=o[15]),u&16777216&&(i.$$scope={dirty:u,ctx:o}),!l&&u&1&&(l=!0,i.hovered=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function Nr(r,e,l){let{$$slots:t={},$$scope:n}=e,{id:s=gn("symbol")}=e,{source:o=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:a=void 0}=e,{layout:c=void 0}=e,{filter:m=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:S=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:P=!1}=e,{hovered:F=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:N=!0}=e;function M(A){F=A,l(0,F)}function O(A){St.call(this,r,A)}function R(A){St.call(this,r,A)}function I(A){St.call(this,r,A)}function j(A){St.call(this,r,A)}function U(A){St.call(this,r,A)}function X(A){St.call(this,r,A)}return r.$$set=A=>{"id"in A&&l(1,s=A.id),"source"in A&&l(2,o=A.source),"sourceLayer"in A&&l(3,u=A.sourceLayer),"beforeId"in A&&l(4,i=A.beforeId),"beforeLayerType"in A&&l(5,f=A.beforeLayerType),"paint"in A&&l(6,a=A.paint),"layout"in A&&l(7,c=A.layout),"filter"in A&&l(8,m=A.filter),"applyToClusters"in A&&l(9,_=A.applyToClusters),"minzoom"in A&&l(10,S=A.minzoom),"maxzoom"in A&&l(11,y=A.maxzoom),"hoverCursor"in A&&l(12,T=A.hoverCursor),"manageHoverState"in A&&l(13,P=A.manageHoverState),"hovered"in A&&l(0,F=A.hovered),"eventsIfTopMost"in A&&l(14,D=A.eventsIfTopMost),"interactive"in A&&l(15,N=A.interactive),"$$scope"in A&&l(24,n=A.$$scope)},[F,s,o,u,i,f,a,c,m,_,S,y,T,P,D,N,t,M,O,R,I,j,U,X,n]}class bn extends Q{constructor(e){super(),K(this,e,Nr,Mr,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Jn(r){let e=r[0],l,t,n=Vn(r);return{c(){n.c(),l=ye()},m(s,o){n.m(s,o),$(s,l,o),t=!0},p(s,o){o&1&&J(e,e=s[0])?(ae(),d(n,1,1,x),ue(),n=Vn(s),n.c(),g(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(g(n),t=!0)},o(s){d(n),t=!1},d(s){s&&p(l),n.d(s)}}}function Vn(r){let e;const l=r[15].default,t=mt(l,r,r[14],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16384)&&_t(t,l,n,n[14],e?dt(l,n[14],s,null):gt(n[14]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function Or(r){let e,l,t=r[0]&&Jn(r);return{c(){t&&t.c(),e=ye()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&g(t,1)):(t=Jn(n),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ae(),d(t,1,1,()=>{t=null}),ue())},i(n){l||(g(t),l=!0)},o(n){d(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function Pr(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=gn("vector")}=e,{url:i=null}=e,{tiles:f=null}=e,{promoteId:a=null}=e,{bounds:c=null}=e,{scheme:m=null}=e,{attribution:_=null}=e,{minzoom:S=null}=e,{maxzoom:y=null}=e,{volatile:T=null}=e;if(i&&i.includes("pmtiles://")&&!Rn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let N=new Hs;Rn.addProtocol("pmtiles",N.tile)}const{map:P,self:F}=Is();Z(r,P,N=>l(13,n=N)),Z(r,F,N=>l(0,t=N));let D;return Ms(()=>{t&&n&&(Ns(P,t,D),Ae(F,t=null,t),D=void 0)}),r.$$set=N=>{"id"in N&&l(3,u=N.id),"url"in N&&l(4,i=N.url),"tiles"in N&&l(5,f=N.tiles),"promoteId"in N&&l(6,a=N.promoteId),"bounds"in N&&l(7,c=N.bounds),"scheme"in N&&l(8,m=N.scheme),"attribution"in N&&l(9,_=N.attribution),"minzoom"in N&&l(10,S=N.minzoom),"maxzoom"in N&&l(11,y=N.maxzoom),"volatile"in N&&l(12,T=N.volatile),"$$scope"in N&&l(14,o=N.$$scope)},r.$$.update=()=>{r.$$.dirty&16377&&n&&t!==u&&(Ae(F,t=u,t),Os(n,t,Ps({type:"vector",url:i,tiles:f,promoteId:a,bounds:c,scheme:m,attribution:_,minzoom:S,maxzoom:y,volatile:T}),N=>n&&N===t,()=>{t&&(D=n==null?void 0:n.getSource(t))})),r.$$.dirty&8200&&(n==null||n.on("style.load",()=>{D=n==null?void 0:n.getSource(u)}))},[t,P,F,u,i,f,a,c,m,_,S,y,T,n,o,s]}class ge extends Q{constructor(e){super(),K(this,e,Pr,Or,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function Qn(r,e,l){const t=r.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function jr(r){let e,l,t;return l=new Ee({props:{$$slots:{default:[Dr]},$$scope:{ctx:r}}}),l.$on("click",r[9]),{c(){e=C("div"),b(l.$$.fragment)},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16384&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Rr(r){let e,l,t,n,s,o,u,i,f,a;l=new Ee({props:{$$slots:{default:[Ar]},$$scope:{ctx:r}}}),l.$on("click",r[4]);let c=r[2]&&Kn(r);s=new nt({props:{label:"Help",$$slots:{default:[Fr]},$$scope:{ctx:r}}}),u=new Es({}),u.$on("click",r[3]);let m=ve(r[0]),_=[];for(let y=0;y<m.length;y+=1)_[y]=Zn(Qn(r,m,y));const S=y=>d(_[y],1,1,()=>{_[y]=null});return{c(){e=C("div"),b(l.$$.fragment),t=L(),c&&c.c(),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment),i=L();for(let y=0;y<_.length;y+=1)_[y].c();f=ye()},m(y,T){$(y,e,T),k(l,e,null),$(y,t,T),c&&c.m(y,T),$(y,n,T),k(s,y,T),$(y,o,T),k(u,y,T),$(y,i,T);for(let P=0;P<_.length;P+=1)_[P]&&_[P].m(y,T);$(y,f,T),a=!0},p(y,T){const P={};T&16384&&(P.$$scope={dirty:T,ctx:y}),l.$set(P),y[2]?c?c.p(y,T):(c=Kn(y),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const F={};if(T&16384&&(F.$$scope={dirty:T,ctx:y}),s.$set(F),T&65){m=ve(y[0]);let D;for(D=0;D<m.length;D+=1){const N=Qn(y,m,D);_[D]?(_[D].p(N,T),g(_[D],1)):(_[D]=Zn(N),_[D].c(),g(_[D],1),_[D].m(f.parentNode,f))}for(ae(),D=m.length;D<_.length;D+=1)S(D);ue()}},i(y){if(!a){g(l.$$.fragment,y),g(s.$$.fragment,y),g(u.$$.fragment,y);for(let T=0;T<m.length;T+=1)g(_[T]);a=!0}},o(y){d(l.$$.fragment,y),d(s.$$.fragment,y),d(u.$$.fragment,y),_=_.filter(Boolean);for(let T=0;T<_.length;T+=1)d(_[T]);a=!1},d(y){y&&(p(e),p(t),p(n),p(o),p(i),p(f)),w(l),c&&c.d(y),w(s,y),w(u,y),Ke(_,y)}}}function Dr(r){let e;return{c(){e=v("Measure lines")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ar(r){let e;return{c(){e=v("Stop measuring")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Kn(r){let e,l,t=r[2].toFixed(2)+"",n,s;return{c(){e=C("p"),l=v("Length: "),n=v(t),s=v(" meters")},m(o,u){$(o,e,u),h(e,l),h(e,n),h(e,s)},p(o,u){u&4&&t!==(t=o[2].toFixed(2)+"")&&G(n,t)},d(o){o&&p(e)}}}function Fr(r){let e;return{c(){e=C("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){$(l,e,t)},p:x,d(l){l&&p(e)}}}function Gr(r){let e,l;return{c(){e=C("span"),l=L(),z(e,"class","dot svelte-1tzt432")},m(t,n){$(t,e,n),$(t,l,n)},p:x,d(t){t&&(p(e),p(l))}}}function Zn(r){let e,l,t;function n(u){r[7](u,r[11],r[12],r[13])}function s(){return r[8](r[13])}let o={draggable:!0,$$slots:{default:[Gr]},$$scope:{ctx:r}};return r[11]!==void 0&&(o.lngLat=r[11]),e=new nr({props:o}),H.push(()=>E(e,"lngLat",n)),e.$on("click",s),{c(){b(e.$$.fragment)},m(u,i){k(e,u,i),t=!0},p(u,i){r=u;const f={};i&16384&&(f.$$scope={dirty:i,ctx:r}),!l&&i&1&&(l=!0,f.lngLat=r[11],B(()=>l=!1)),e.$set(f)},i(u){t||(g(e.$$.fragment,u),t=!0)},o(u){d(e.$$.fragment,u),t=!1},d(u){w(e,u)}}}function qr(r){let e,l;const t=[q("measurement-line"),{paint:{"line-color":Qe.measuringLine,"line-width":5}}];let n={};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u={};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function zr(r){let e,l,t,n,s,o,u;const i=[Rr,jr],f=[];function a(c,m){return c[1]?0:1}return e=a(r),l=f[e]=i[e](r),n=new kt({props:{data:r[0].length<2?Dn():fn(r[0]),$$slots:{default:[qr]},$$scope:{ctx:r}}}),{c(){l.c(),t=L(),b(n.$$.fragment)},m(c,m){f[e].m(c,m),$(c,t,m),k(n,c,m),s=!0,o||(u=He(window,"keydown",r[5]),o=!0)},p(c,[m]){let _=e;e=a(c),e===_?f[e].p(c,m):(ae(),d(f[_],1,1,()=>{f[_]=null}),ue(),l=f[e],l?l.p(c,m):(l=f[e]=i[e](c),l.c()),g(l,1),l.m(t.parentNode,t));const S={};m&1&&(S.data=c[0].length<2?Dn():fn(c[0])),m&16384&&(S.$$scope={dirty:m,ctx:c}),n.$set(S)},i(c){s||(g(l),g(n.$$.fragment,c),s=!0)},o(c){d(l),d(n.$$.fragment,c),s=!1},d(c){c&&p(t),f[e].d(c),w(n,c),o=!1,u()}}}function Hr(r,e,l){let t,n=!1,s=[];function o(S){return S.length<2?null:1e3*tr(fn(S),{units:"kilometers"})}function u(S){l(0,s=[...s,S.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,s=[])}function f(S){n&&S.key==="Escape"&&(S.stopPropagation(),i())}function a(S){s.splice(S,1),l(0,s)}function c(S,y,T,P){T[P]=S,l(0,s)}const m=S=>a(S),_=()=>l(1,n=!0);return r.$$.update=()=>{r.$$.dirty&1&&l(2,t=o(s))},[s,n,t,u,i,f,a,c,m,_]}class Er extends Q{constructor(e){super(),K(this,e,Hr,zr,J,{})}}const te={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Re=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Br(r){let e;return{c(){e=v(`Open Government License
  `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ur(r){let e,l,t,n,s;return t=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Br]},$$scope:{ctx:r}}}),{c(){e=C("p"),l=v("License: "),b(t.$$.fragment),n=v(`. Contains OS data © Crown copyright and database right
  2023.`)},m(o,u){$(o,e,u),h(e,l),k(t,e,null),h(e,n),s=!0},p(o,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:o}),t.$set(i)},i(o){s||(g(t.$$.fragment,o),s=!0)},o(o){d(t.$$.fragment,o),s=!1},d(o){o&&p(e),w(t)}}}class Le extends Q{constructor(e){super(),K(this,e,null,Ur,J,{})}}function Xn(r,e,l){const t=r.slice();return t[2]=e[l],t}function xn(r,e,l){const t=r.slice();return t[5]=e[l],t}function el(r){let e,l;return{c(){e=C("span"),l=v(` 
    `),_e(e,"background",r[5]),_e(e,"width","100%"),_e(e,"border","1px solid black")},m(t,n){$(t,e,n),h(e,l)},p(t,n){n&1&&_e(e,"background",t[5])},d(t){t&&p(e)}}}function tl(r){let e,l=r[2]+"",t;return{c(){e=C("span"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&2&&l!==(l=n[2]+"")&&G(t,l)},d(n){n&&p(e)}}}function Wr(r){let e,l,t,n=ve(r[0]),s=[];for(let i=0;i<n.length;i+=1)s[i]=el(xn(r,n,i));let o=ve(r[1]),u=[];for(let i=0;i<o.length;i+=1)u[i]=tl(Xn(r,o,i));return{c(){e=C("div");for(let i=0;i<s.length;i+=1)s[i].c();l=L(),t=C("div");for(let i=0;i<u.length;i+=1)u[i].c();_e(e,"display","flex"),_e(t,"display","flex"),_e(t,"justify-content","space-between")},m(i,f){$(i,e,f);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);$(i,l,f),$(i,t,f);for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(t,null)},p(i,[f]){if(f&1){n=ve(i[0]);let a;for(a=0;a<n.length;a+=1){const c=xn(i,n,a);s[a]?s[a].p(c,f):(s[a]=el(c),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=n.length}if(f&2){o=ve(i[1]);let a;for(a=0;a<o.length;a+=1){const c=Xn(i,o,a);u[a]?u[a].p(c,f):(u[a]=tl(c),u[a].c(),u[a].m(t,null))}for(;a<u.length;a+=1)u[a].d(1);u.length=o.length}},i:x,o:x,d(i){i&&(p(e),p(l),p(t)),Ke(s,i),Ke(u,i)}}}function Yr(r,e,l){let{colorScale:t}=e,{limits:n}=e;return r.$$set=s=>{"colorScale"in s&&l(0,t=s.colorScale),"limits"in s&&l(1,n=s.limits)},[t,n]}class qe extends Q{constructor(e){super(),K(this,e,Yr,Wr,J,{colorScale:0,limits:1})}}function be(r){let e=new URLSearchParams(window.location.search).has(r),l=Fe(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(r,"1"):n.searchParams.delete(r),window.history.replaceState(null,"",n.toString())}),l}function wt(r,e,l,t){let n=e,s=new URLSearchParams(window.location.search).get(r);if(s!=null)try{n=t(s)}catch(u){console.warn(`Parsing URL parameter ${r}=${s} failed, using default value: ${u}`)}let o=Fe(n);return o.subscribe(u=>{let i=new URL(window.location.href),f=l(u);f==null?i.searchParams.delete(r):i.searchParams.set(r,f),window.history.replaceState(null,"",i.toString())}),o}function nl(r){const e=r[14].OA21CD;r[15]=e;const l=r[14][r[3].kind];r[16]=l}function Jr(r){let e;return{c(){e=v("Percent of households with a car")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Vr(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Qr(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Kr(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Zr(r){let e,l,t,n,s,o,u,i,f,a,c,m;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Vr]},$$scope:{ctx:r}}}),s=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Qr]},$$scope:{ctx:r}}}),a=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Kr]},$$scope:{ctx:r}}}),{c(){e=C("p"),l=v("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),n=v(". Output area boundaries from "),b(s.$$.fragment),o=v("."),u=L(),i=C("p"),f=v("License: "),b(a.$$.fragment),c=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(_,S){$(_,e,S),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),$(_,u,S),$(_,i,S),h(i,f),k(a,i,null),h(i,c),m=!0},p(_,S){const y={};S&131072&&(y.$$scope={dirty:S,ctx:_}),t.$set(y);const T={};S&131072&&(T.$$scope={dirty:S,ctx:_}),s.$set(T);const P={};S&131072&&(P.$$scope={dirty:S,ctx:_}),a.$set(P)},i(_){m||(g(t.$$.fragment,_),g(s.$$.fragment,_),g(a.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(s.$$.fragment,_),d(a.$$.fragment,_),m=!1},d(_){_&&(p(e),p(u),p(i)),w(t),w(s),w(a)}}}function Xr(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Zr]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ll(r){let e,l;return e=new qe({props:{colorScale:r[4],limits:at(r[3].kind)}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=at(t[3].kind)),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function xr(r){let e;return{c(){e=v("Average cars per household")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function eo(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function to(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function no(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function lo(r){let e,l,t,n,s,o,u,i,f,a,c,m,_,S;return s=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[eo]},$$scope:{ctx:r}}}),u=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[to]},$$scope:{ctx:r}}}),m=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[no]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=C("p"),n=v("Car/van availability data is from the 2021 census, via "),b(s.$$.fragment),o=v(". Output area boundaries from "),b(u.$$.fragment),i=v("."),f=L(),a=C("p"),c=v("License: "),b(m.$$.fragment),_=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(y,T){$(y,e,T),$(y,l,T),$(y,t,T),h(t,n),k(s,t,null),h(t,o),k(u,t,null),h(t,i),$(y,f,T),$(y,a,T),h(a,c),k(m,a,null),h(a,_),S=!0},p(y,T){const P={};T&131072&&(P.$$scope={dirty:T,ctx:y}),s.$set(P);const F={};T&131072&&(F.$$scope={dirty:T,ctx:y}),u.$set(F);const D={};T&131072&&(D.$$scope={dirty:T,ctx:y}),m.$set(D)},i(y){S||(g(s.$$.fragment,y),g(u.$$.fragment,y),g(m.$$.fragment,y),S=!0)},o(y){d(s.$$.fragment,y),d(u.$$.fragment,y),d(m.$$.fragment,y),S=!1},d(y){y&&(p(e),p(l),p(t),p(f),p(a)),w(s),w(u),w(m)}}}function so(r){let e,l,t;return l=new $e({props:{$$slots:{default:[lo]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function sl(r){let e,l;return e=new qe({props:{colorScale:r[4],limits:at(r[3].kind)}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=at(t[3].kind)),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ro(r){let e;return{c(){e=v("Population density")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function oo(r){let e;return{c(){e=v(`NOMIS TS006
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function io(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function fo(r){let e,l,t,n,s,o,u,i,f;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[oo]},$$scope:{ctx:r}}}),s=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[io]},$$scope:{ctx:r}}}),i=new Le({}),{c(){e=C("p"),l=v("Population density data is from the 2021 census, via "),b(t.$$.fragment),n=v(". Output area boundaries from "),b(s.$$.fragment),o=v("."),u=L(),b(i.$$.fragment)},m(a,c){$(a,e,c),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),$(a,u,c),k(i,a,c),f=!0},p(a,c){const m={};c&131072&&(m.$$scope={dirty:c,ctx:a}),t.$set(m);const _={};c&131072&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){f||(g(t.$$.fragment,a),g(s.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(p(e),p(u)),w(t),w(s),w(i,a)}}}function ao(r){let e,l,t;return l=new $e({props:{$$slots:{default:[fo]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function rl(r){let e,l,t,n;return t=new qe({props:{colorScale:r[4],limits:at(r[3].kind).map(ol)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",l=L(),b(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&8&&(u.limits=at(s[3].kind).map(ol)),t.$set(u)},i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function uo(r){let e,l,t,n=r[16].toLocaleString()+"",s,o,u=r[15]+"",i;return{c(){e=C("p"),l=v("There are "),t=C("b"),s=v(n),o=v(`
          people per square kilometre in `),i=v(u)},m(f,a){$(f,e,a),h(e,l),h(e,t),h(t,s),h(e,o),h(e,i)},p(f,a){a&16392&&n!==(n=f[16].toLocaleString()+"")&&G(s,n),a&16384&&u!==(u=f[15]+"")&&G(i,u)},d(f){f&&p(e)}}}function co(r){let e,l,t=r[15]+"",n,s,o,u=r[16]+"",i,f;return{c(){e=C("p"),l=v("Households in "),n=v(t),s=v(` have an average of
          `),o=C("b"),i=v(u),f=v(`
          cars`)},m(a,c){$(a,e,c),h(e,l),h(e,n),h(e,s),h(e,o),h(o,i),h(e,f)},p(a,c){c&16384&&t!==(t=a[15]+"")&&G(n,t),c&16392&&u!==(u=a[16]+"")&&G(i,u)},d(a){a&&p(e)}}}function $o(r){let e,l,t=r[16]+"",n,s,o,u=r[15]+"",i,f;return{c(){e=C("p"),l=C("b"),n=v(t),s=v("%"),o=v(`
          of households in `),i=v(u),f=v(" have 1 or more cars")},m(a,c){$(a,e,c),h(e,l),h(l,n),h(l,s),h(e,o),h(e,i),h(e,f)},p(a,c){c&16392&&t!==(t=a[16]+"")&&G(n,t),c&16384&&u!==(u=a[15]+"")&&G(i,u)},d(a){a&&p(e)}}}function po(r){nl(r);let e;function l(s,o){return s[3].kind=="percent_households_with_car"?$o:s[3].kind=="average_cars_per_household"?co:uo}let t=l(r),n=t(r);return{c(){n.c(),e=ye()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){nl(s),t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function mo(r){let e,l;return e=new ce({props:{$$slots:{default:[po,({props:t})=>({14:t}),({props:t})=>t?16384:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&147464&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function _o(r){let e,l,t,n;const s=[q(Be),{sourceLayer:Be},{paint:{"fill-color":he(["get",r[3].kind],at(r[3].kind),r[4]),"fill-opacity":ne(.5,.7)}},{layout:{visibility:r[3].kind!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[mo]},$$scope:{ctx:r}};for(let f=0;f<s.length;f+=1)o=le(o,s[f]);e=new Ge({props:o}),e.$on("click",r[6]);const u=[q(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3].kind!=""?"visible":"none"}}];let i={};for(let f=0;f<u.length;f+=1)i=le(i,u[f]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(f,a){k(e,f,a),$(f,l,a),k(t,f,a),n=!0},p(f,a){const c=a&24?se(s,[a&0&&re(q(Be)),a&0&&{sourceLayer:Be},a&24&&{paint:{"fill-color":he(["get",f[3].kind],at(f[3].kind),f[4]),"fill-opacity":ne(.5,.7)}},a&8&&{layout:{visibility:f[3].kind!=""?"visible":"none"}},s[4],s[5],s[6]]):{};a&131080&&(c.$$scope={dirty:a,ctx:f}),e.$set(c);const m=a&8?se(u,[a&0&&re(q(`${Be}-outline`)),a&0&&{sourceLayer:Be},u[2],a&8&&{layout:{visibility:f[3].kind!=""?"visible":"none"}}]):{};t.$set(m)},i(f){n||(g(e.$$.fragment,f),g(t.$$.fragment,f),n=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function go(r){let e,l,t,n,s,o,u,i,f,a,c,m,_,S;function y(I){r[7](I)}let T={$$slots:{right:[Xr],default:[Jr]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new oe({props:T}),H.push(()=>E(e,"checked",y)),e.$on("change",r[8]);let P=r[3].kind=="percent_households_with_car"&&ll(r);function F(I){r[9](I)}let D={$$slots:{right:[so],default:[xr]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),s=new oe({props:D}),H.push(()=>E(s,"checked",F)),s.$on("change",r[10]);let N=r[3].kind=="average_cars_per_household"&&sl(r);function M(I){r[11](I)}let O={$$slots:{right:[ao],default:[ro]},$$scope:{ctx:r}};r[2]!==void 0&&(O.checked=r[2]),f=new oe({props:O}),H.push(()=>E(f,"checked",M)),f.$on("change",r[12]);let R=r[3].kind=="population_density"&&rl(r);return _=new ge({props:{url:`pmtiles://${me()}/v1/${Be}.pmtiles`,$$slots:{default:[_o]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),P&&P.c(),n=L(),b(s.$$.fragment),u=L(),N&&N.c(),i=L(),b(f.$$.fragment),c=L(),R&&R.c(),m=L(),b(_.$$.fragment)},m(I,j){k(e,I,j),$(I,t,j),P&&P.m(I,j),$(I,n,j),k(s,I,j),$(I,u,j),N&&N.m(I,j),$(I,i,j),k(f,I,j),$(I,c,j),R&&R.m(I,j),$(I,m,j),k(_,I,j),S=!0},p(I,[j]){const U={};j&131072&&(U.$$scope={dirty:j,ctx:I}),!l&&j&1&&(l=!0,U.checked=I[0],B(()=>l=!1)),e.$set(U),I[3].kind=="percent_households_with_car"?P?(P.p(I,j),j&8&&g(P,1)):(P=ll(I),P.c(),g(P,1),P.m(n.parentNode,n)):P&&(ae(),d(P,1,1,()=>{P=null}),ue());const X={};j&131072&&(X.$$scope={dirty:j,ctx:I}),!o&&j&2&&(o=!0,X.checked=I[1],B(()=>o=!1)),s.$set(X),I[3].kind=="average_cars_per_household"?N?(N.p(I,j),j&8&&g(N,1)):(N=sl(I),N.c(),g(N,1),N.m(i.parentNode,i)):N&&(ae(),d(N,1,1,()=>{N=null}),ue());const A={};j&131072&&(A.$$scope={dirty:j,ctx:I}),!a&&j&4&&(a=!0,A.checked=I[2],B(()=>a=!1)),f.$set(A),I[3].kind=="population_density"?R?(R.p(I,j),j&8&&g(R,1)):(R=rl(I),R.c(),g(R,1),R.m(m.parentNode,m)):R&&(ae(),d(R,1,1,()=>{R=null}),ue());const Y={};j&131080&&(Y.$$scope={dirty:j,ctx:I}),_.$set(Y)},i(I){S||(g(e.$$.fragment,I),g(P),g(s.$$.fragment,I),g(N),g(f.$$.fragment,I),g(R),g(_.$$.fragment,I),S=!0)},o(I){d(e.$$.fragment,I),d(P),d(s.$$.fragment,I),d(N),d(f.$$.fragment,I),d(R),d(_.$$.fragment,I),S=!1},d(I){I&&(p(t),p(n),p(u),p(i),p(c),p(m)),w(e,I),P&&P.d(I),w(s,I),N&&N.d(I),w(f,I),R&&R.d(I),w(_,I)}}}let Be="census_output_areas";function ho(r){return r.show?r.kind:null}function bo(r){return{show:!0,kind:r}}function at(r){return r=="percent_households_with_car"?[0,20,40,60,80,100]:r=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const ol=r=>r.toLocaleString();function ko(r,e,l){let t,n=te.sequential_low_to_high,o=wt(Be,{show:!1,kind:""},ho,bo);Z(r,o,P=>l(3,t=P));let u=t.kind=="percent_households_with_car",i=t.kind=="average_cars_per_household",f=t.kind=="population_density";function a(P){let F=P.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${F}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${F}`,"_blank")}function c(P){u=P,l(0,u)}const m=()=>{l(1,i=!1),l(2,f=!1)};function _(P){i=P,l(1,i)}const S=()=>{l(0,u=!1),l(2,f=!1)};function y(P){f=P,l(2,f)}const T=()=>{l(0,u=!1),l(1,i=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(u?(Ae(o,t.show=!0,t),Ae(o,t.kind="percent_households_with_car",t)):i?(Ae(o,t.show=!0,t),Ae(o,t.kind="average_cars_per_household",t)):f?(Ae(o,t.show=!0,t),Ae(o,t.kind="population_density",t)):(Ae(o,t.show=!1,t),Ae(o,t.kind="",t)))},[u,i,f,t,n,o,a,c,m,_,S,y,T]}class wo extends Q{constructor(e){super(),K(this,e,ko,go,J,{})}}function vo(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Combined authorities`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function yo(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function So(r){let e,l,t,n,s,o,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[yo]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=C("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of December 2022."),s=L(),b(o.$$.fragment)},m(i,f){$(i,e,f),h(e,l),k(t,e,null),h(e,n),$(i,s,f),k(o,i,f),u=!0},p(i,f){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),t.$set(a)},i(i){u||(g(t.$$.fragment,i),g(o.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(o.$$.fragment,i),u=!1},d(i){i&&(p(e),p(s)),w(t),w(o,i)}}}function Co(r){let e,l,t;return l=new $e({props:{$$slots:{default:[So]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function To(r){let e,l=r[4].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&p(e)}}}function Lo(r){let e,l;return e=new ce({props:{$$slots:{default:[To,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Io(r){let e,l,t,n;const s=[q(Ct),{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Lo]},$$scope:{ctx:r}};for(let f=0;f<s.length;f+=1)o=le(o,s[f]);e=new Ge({props:o}),e.$on("click",No);const u=[q(`${Ct}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let f=0;f<u.length;f+=1)i=le(i,u[f]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(f,a){k(e,f,a),$(f,l,a),k(t,f,a),n=!0},p(f,a){const c=a&3?se(s,[a&0&&re(q(Ct)),a&2&&{paint:{"fill-color":f[1],"fill-opacity":ne(0,.5)}},a&1&&{layout:{visibility:f[0]?"visible":"none"}},s[3],s[4],s[5]]):{};a&32&&(c.$$scope={dirty:a,ctx:f}),e.$set(c);const m=a&3?se(u,[a&0&&re(q(`${Ct}-outline`)),a&2&&{paint:{"line-color":f[1],"line-width":2.5}},a&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(m)},i(f){n||(g(e.$$.fragment,f),g(t.$$.fragment,f),n=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function Mo(r){let e,l,t,n,s;function o(i){r[3](i)}let u={$$slots:{right:[Co],default:[vo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),H.push(()=>E(e,"checked",o)),n=new kt({props:{data:`${me()}/v1/${Ct}.geojson`,$$slots:{default:[Io]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!l&&f&1&&(l=!0,a.checked=i[0],B(()=>l=!1)),e.$set(a);const c={};f&33&&(c.$$scope={dirty:f,ctx:i}),n.$set(c)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}let Ct="combined_authorities";function No(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Oo(r,e,l){let t,n=te.combined_authorities,s=be(Ct);Z(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Po extends Q{constructor(e){super(),K(this,e,Oo,Mo,J,{})}}function jo(r){let e;return{c(){e=v("Indices of Multiple Deprivation")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ro(r){let e;return{c(){e=v(`DLUCH GIS
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Do(r){let e;return{c(){e=v(`here
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ao(r){let e,l,t,n,s,o,u,i,f;return t=new ee({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Ro]},$$scope:{ctx:r}}}),s=new ee({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Do]},$$scope:{ctx:r}}}),i=new Le({}),{c(){e=C("p"),l=v("The 2019 English IMD scores come from "),b(t.$$.fragment),n=v(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(s.$$.fragment),o=v("."),u=L(),b(i.$$.fragment)},m(a,c){$(a,e,c),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),$(a,u,c),k(i,a,c),f=!0},p(a,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:a}),t.$set(m);const _={};c&64&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){f||(g(t.$$.fragment,a),g(s.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(p(e),p(u)),w(t),w(s),w(i,a)}}}function Fo(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Ao]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function il(r){let e,l;return e=new qe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Go(r){let e,l=r[5].LSOA11CD+"",t,n,s,o=r[5].score+"",u,i,f,a,c,m=r[5].rank.toLocaleString()+"",_,S;return{c(){e=C("p"),t=v(l),n=v(` has an IMD score of
        `),s=C("b"),u=v(o),i=L(),f=C("p"),a=v("Rank: "),c=C("b"),_=v(m),S=v(`
        / 32,844 LSOAs`)},m(y,T){$(y,e,T),h(e,t),h(e,n),h(e,s),h(s,u),$(y,i,T),$(y,f,T),h(f,a),h(f,c),h(c,_),h(f,S)},p(y,T){T&32&&l!==(l=y[5].LSOA11CD+"")&&G(t,l),T&32&&o!==(o=y[5].score+"")&&G(u,o),T&32&&m!==(m=y[5].rank.toLocaleString()+"")&&G(_,m)},d(y){y&&(p(e),p(i),p(f))}}}function qo(r){let e,l;return e=new ce({props:{$$slots:{default:[Go,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function zo(r){let e,l,t,n;const s=[q(Ue),{sourceLayer:Ue},{paint:{"fill-color":he(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":ne(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[qo]},$$scope:{ctx:r}};for(let f=0;f<s.length;f+=1)o=le(o,s[f]);e=new Ge({props:o});const u=[q(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let f=0;f<u.length;f+=1)i=le(i,u[f]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(f,a){k(e,f,a),$(f,l,a),k(t,f,a),n=!0},p(f,a){const c=a&7?se(s,[a&0&&re(q(Ue)),a&0&&{sourceLayer:Ue},a&6&&{paint:{"fill-color":he(["-",10,["get","decile"]],f[2],f[1]),"fill-opacity":ne(.5,.7)}},a&1&&{layout:{visibility:f[0]?"visible":"none"}},s[4],s[5]]):{};a&64&&(c.$$scope={dirty:a,ctx:f}),e.$set(c);const m=a&1?se(u,[a&0&&re(q(`${Ue}-outline`)),a&0&&{sourceLayer:Ue},u[2],a&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(m)},i(f){n||(g(e.$$.fragment,f),g(t.$$.fragment,f),n=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function Ho(r){let e,l,t,n,s,o;function u(a){r[4](a)}let i={$$slots:{right:[Fo],default:[jo]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0]&&il(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${Ue}.pmtiles`,$$slots:{default:[zo]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0],B(()=>l=!1)),e.$set(m),a[0]?f?(f.p(a,c),c&1&&g(f,1)):(f=il(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&65&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}let Ue="imd";function Eo(r,e,l){let t,n=te.sequential_low_to_high,s=[0,2,4,6,8,10],o=be(Ue);Z(r,o,i=>l(0,t=i));function u(i){t=i,o.set(t)}return[t,n,s,o,u]}class Bo extends Q{constructor(e){super(),K(this,e,Eo,Ho,J,{})}}function Uo(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Local Authority Districts`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Wo(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Yo(r){let e,l,t,n,s,o,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Wo]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=C("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of January 2024."),s=L(),b(o.$$.fragment)},m(i,f){$(i,e,f),h(e,l),k(t,e,null),h(e,n),$(i,s,f),k(o,i,f),u=!0},p(i,f){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),t.$set(a)},i(i){u||(g(t.$$.fragment,i),g(o.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(o.$$.fragment,i),u=!1},d(i){i&&(p(e),p(s)),w(t),w(o,i)}}}function Jo(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Yo]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Vo(r){let e,l=r[4].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&p(e)}}}function Qo(r){let e,l;return e=new ce({props:{$$slots:{default:[Vo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ko(r){let e,l,t,n;const s=[q(Tt),{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Qo]},$$scope:{ctx:r}};for(let f=0;f<s.length;f+=1)o=le(o,s[f]);e=new Ge({props:o}),e.$on("click",Xo);const u=[q(`${Tt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let f=0;f<u.length;f+=1)i=le(i,u[f]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(f,a){k(e,f,a),$(f,l,a),k(t,f,a),n=!0},p(f,a){const c=a&3?se(s,[a&0&&re(q(Tt)),a&2&&{paint:{"fill-color":f[1],"fill-opacity":ne(0,.5)}},a&1&&{layout:{visibility:f[0]?"visible":"none"}},s[3],s[4],s[5]]):{};a&32&&(c.$$scope={dirty:a,ctx:f}),e.$set(c);const m=a&3?se(u,[a&0&&re(q(`${Tt}-outline`)),a&2&&{paint:{"line-color":f[1],"line-width":2.5}},a&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(m)},i(f){n||(g(e.$$.fragment,f),g(t.$$.fragment,f),n=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function Zo(r){let e,l,t,n,s;function o(i){r[3](i)}let u={$$slots:{right:[Jo],default:[Uo]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),H.push(()=>E(e,"checked",o)),n=new kt({props:{data:`${me()}/v1/${Tt}.geojson`,$$slots:{default:[Ko]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!l&&f&1&&(l=!0,a.checked=i[0],B(()=>l=!1)),e.$set(a);const c={};f&33&&(c.$$scope={dirty:f,ctx:i}),n.$set(c)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}let Tt="local_authority_districts";function Xo(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function xo(r,e,l){let t,n=te.local_authority_districts,s=be(Tt);Z(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class ei extends Q{constructor(e){super(),K(this,e,xo,Zo,J,{})}}function ti(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Local Planning Authorities`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function ni(r){let e;return{c(){e=v(`local authority
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function li(r){let e;return{c(){e=v(`national park authorit
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function si(r){let e;return{c(){e=v(`development corporation
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ri(r){let e;return{c(){e=v("this map")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function oi(r){let e;return{c(){e=v(`planning.data.gov.uk
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ii(r){let e,l,t,n,s,o,u,i,f,a,c,m,_,S,y,T,P,F,D,N,M,O;return t=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ni]},$$scope:{ctx:r}}}),s=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[li]},$$scope:{ctx:r}}}),u=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[si]},$$scope:{ctx:r}}}),_=new ee({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ri]},$$scope:{ctx:r}}}),F=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[oi]},$$scope:{ctx:r}}}),M=new Le({}),{c(){e=C("p"),l=v("LPAs may be a "),b(t.$$.fragment),n=v(", "),b(s.$$.fragment),o=v("y, or "),b(u.$$.fragment),i=v("."),f=L(),a=C("p"),c=C("strong"),m=v(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(_.$$.fragment),S=v(" to get more details."),y=L(),T=C("p"),P=v("Data from ONS Geography via "),b(F.$$.fragment),D=v(", as of November 2022."),N=L(),b(M.$$.fragment)},m(R,I){$(R,e,I),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),k(u,e,null),h(e,i),$(R,f,I),$(R,a,I),h(a,c),h(c,m),k(_,c,null),h(c,S),$(R,y,I),$(R,T,I),h(T,P),k(F,T,null),h(T,D),$(R,N,I),k(M,R,I),O=!0},p(R,I){const j={};I&32&&(j.$$scope={dirty:I,ctx:R}),t.$set(j);const U={};I&32&&(U.$$scope={dirty:I,ctx:R}),s.$set(U);const X={};I&32&&(X.$$scope={dirty:I,ctx:R}),u.$set(X);const A={};I&32&&(A.$$scope={dirty:I,ctx:R}),_.$set(A);const Y={};I&32&&(Y.$$scope={dirty:I,ctx:R}),F.$set(Y)},i(R){O||(g(t.$$.fragment,R),g(s.$$.fragment,R),g(u.$$.fragment,R),g(_.$$.fragment,R),g(F.$$.fragment,R),g(M.$$.fragment,R),O=!0)},o(R){d(t.$$.fragment,R),d(s.$$.fragment,R),d(u.$$.fragment,R),d(_.$$.fragment,R),d(F.$$.fragment,R),d(M.$$.fragment,R),O=!1},d(R){R&&(p(e),p(f),p(a),p(y),p(T),p(N)),w(t),w(s),w(u),w(_),w(F),w(M,R)}}}function fi(r){let e,l,t;return l=new $e({props:{$$slots:{default:[ii]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ai(r){let e,l=r[4].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&p(e)}}}function ui(r){let e,l;return e=new ce({props:{$$slots:{default:[ai,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ci(r){let e,l,t,n;const s=[q(We),{sourceLayer:We},{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[ui]},$$scope:{ctx:r}};for(let f=0;f<s.length;f+=1)o=le(o,s[f]);e=new Ge({props:o});const u=[q(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let f=0;f<u.length;f+=1)i=le(i,u[f]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(f,a){k(e,f,a),$(f,l,a),k(t,f,a),n=!0},p(f,a){const c=a&3?se(s,[a&0&&re(q(We)),a&0&&{sourceLayer:We},a&2&&{paint:{"fill-color":f[1],"fill-opacity":ne(0,.5)}},a&1&&{layout:{visibility:f[0]?"visible":"none"}},s[4],s[5]]):{};a&32&&(c.$$scope={dirty:a,ctx:f}),e.$set(c);const m=a&3?se(u,[a&0&&re(q(`${We}-outline`)),a&0&&{sourceLayer:We},a&2&&{paint:{"line-color":f[1],"line-width":2.5}},a&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(m)},i(f){n||(g(e.$$.fragment,f),g(t.$$.fragment,f),n=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function $i(r){let e,l,t,n,s;function o(i){r[3](i)}let u={$$slots:{right:[fi],default:[ti]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),H.push(()=>E(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${We}.pmtiles`,$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!l&&f&1&&(l=!0,a.checked=i[0],B(()=>l=!1)),e.$set(a);const c={};f&33&&(c.$$scope={dirty:f,ctx:i}),n.$set(c)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}let We="local_planning_authorities";function pi(r,e,l){let t,n=te.local_planning_authorities,s=be(We);Z(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class mi extends Q{constructor(e){super(),K(this,e,pi,$i,J,{})}}function _i(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Parliamentary constituencies`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function gi(r){let e;return{c(){e=v(`Ordnance Survey Boundary-Line
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function di(r){let e,l,t,n,s,o,u;return t=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[gi]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=C("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of May 2023."),s=L(),b(o.$$.fragment)},m(i,f){$(i,e,f),h(e,l),k(t,e,null),h(e,n),$(i,s,f),k(o,i,f),u=!0},p(i,f){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),t.$set(a)},i(i){u||(g(t.$$.fragment,i),g(o.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(o.$$.fragment,i),u=!1},d(i){i&&(p(e),p(s)),w(t),w(o,i)}}}function hi(r){let e,l,t;return l=new $e({props:{$$slots:{default:[di]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function bi(r){let e,l=r[4].Name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].Name+"")&&G(t,l)},d(n){n&&p(e)}}}function ki(r){let e,l;return e=new ce({props:{$$slots:{default:[bi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function wi(r){let e,l,t,n;const s=[q(Ye),{sourceLayer:Ye},{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[ki]},$$scope:{ctx:r}};for(let f=0;f<s.length;f+=1)o=le(o,s[f]);e=new Ge({props:o}),e.$on("click",yi);const u=[q(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let f=0;f<u.length;f+=1)i=le(i,u[f]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(f,a){k(e,f,a),$(f,l,a),k(t,f,a),n=!0},p(f,a){const c=a&3?se(s,[a&0&&re(q(Ye)),a&0&&{sourceLayer:Ye},a&2&&{paint:{"fill-color":f[1],"fill-opacity":ne(0,.5)}},a&1&&{layout:{visibility:f[0]?"visible":"none"}},s[4],s[5],s[6]]):{};a&32&&(c.$$scope={dirty:a,ctx:f}),e.$set(c);const m=a&3?se(u,[a&0&&re(q(`${Ye}-outline`)),a&0&&{sourceLayer:Ye},a&2&&{paint:{"line-color":f[1],"line-width":5}},a&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(m)},i(f){n||(g(e.$$.fragment,f),g(t.$$.fragment,f),n=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function vi(r){let e,l,t,n,s;function o(i){r[3](i)}let u={$$slots:{right:[hi],default:[_i]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),H.push(()=>E(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${Ye}.pmtiles`,$$slots:{default:[wi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!l&&f&1&&(l=!0,a.checked=i[0],B(()=>l=!1)),e.$set(a);const c={};f&33&&(c.$$scope={dirty:f,ctx:i}),n.$set(c)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}let Ye="parliamentary_constituencies";function yi(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Si(r,e,l){let t,n=te.parliamentary_constituencies,s=be(Ye);Z(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Ci extends Q{constructor(e){super(),K(this,e,Si,vi,J,{})}}function Ti(r){let e;return{c(){e=v("Pollution")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Li(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ii(r){let e,l,t,n,s,o,u,i,f;return t=new ee({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Li]},$$scope:{ctx:r}}}),i=new Le({}),{c(){e=C("p"),l=v("Most layers show air quality data from "),b(t.$$.fragment),n=v(`. The measurements are annual means, in units of
        µgm
        `),s=C("sup"),s.textContent="3",o=v(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=L(),b(i.$$.fragment)},m(a,c){$(a,e,c),h(e,l),k(t,e,null),h(e,n),h(e,s),h(e,o),$(a,u,c),k(i,a,c),f=!0},p(a,c){const m={};c&4096&&(m.$$scope={dirty:c,ctx:a}),t.$set(m)},i(a){f||(g(t.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(t.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(p(e),p(u)),w(t),w(i,a)}}}function Mi(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Ii]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&4096&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function fl(r){let e,l,t,n,s=r[3](r[0].pollutant)+"",o,u,i,f,a,c,m,_,S,y,T,P,F;function D(M){r[6](M)}let N={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return r[0].pollutant!==void 0&&(N.value=r[0].pollutant),e=new ht({props:N}),H.push(()=>E(e,"value",D)),{c(){b(e.$$.fragment),t=L(),n=C("p"),o=v(s),u=L(),i=C("div"),f=C("label"),a=v(`Opacity
      `),c=C("input"),m=L(),_=C("img"),z(c,"type","range"),z(c,"min","0"),z(c,"max","100"),xt(_.src,S=r[4](r[0].pollutant))||z(_,"src",S),z(_,"width",150),z(_,"alt",y=`Legend for ${r[0].pollutant} layer`)},m(M,O){k(e,M,O),$(M,t,O),$(M,n,O),h(n,o),$(M,u,O),$(M,i,O),h(i,f),h(f,a),h(f,c),je(c,r[0].opacity),$(M,m,O),$(M,_,O),T=!0,P||(F=[He(c,"change",r[7]),He(c,"input",r[7])],P=!0)},p(M,O){const R={};!l&&O&1&&(l=!0,R.value=M[0].pollutant,B(()=>l=!1)),e.$set(R),(!T||O&1)&&s!==(s=M[3](M[0].pollutant)+"")&&G(o,s),O&1&&je(c,M[0].opacity),(!T||O&1&&!xt(_.src,S=M[4](M[0].pollutant)))&&z(_,"src",S),(!T||O&1&&y!==(y=`Legend for ${M[0].pollutant} layer`))&&z(_,"alt",y)},i(M){T||(g(e.$$.fragment,M),T=!0)},o(M){d(e.$$.fragment,M),T=!1},d(M){M&&(p(t),p(n),p(u),p(i),p(m),p(_)),w(e,M),P=!1,js(F)}}}function Ni(r){let e,l;const t=[q("pollution"),{paint:{"raster-opacity":r[0].opacity/100}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new lr({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?se(t,[t[0],{paint:{"raster-opacity":s[0].opacity/100}},{layout:{visibility:s[0].show?"visible":"none"}}]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Oi(r){let e,l,t,n,s,o;function u(a){r[5](a)}let i={$$slots:{right:[Mi],default:[Ti]},$$scope:{ctx:r}};r[0].show!==void 0&&(i.checked=r[0].show),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0].show&&fl(r);return s=new Lr({props:{tiles:[r[1]],tileSize:256,$$slots:{default:[Ni]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&4096&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0].show,B(()=>l=!1)),e.$set(m),a[0].show?f?(f.p(a,c),c&1&&g(f,1)):(f=fl(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&2&&(_.tiles=[a[1]]),c&4097&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}function Pi(r){return r.show?`${r.pollutant}/${r.opacity}`:null}function ji(r){let[e,l]=r.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function Ri(r,e,l){let t,n,s,u=wt("pollution",{show:!1,pollutant:"PM25_viridis",opacity:50},Pi,ji);Z(r,u,y=>l(0,s=y));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s.pollutant}/MapServer/WMSServer`}function f(y){return t[1]}function a(y){let T=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${T}`}function c(y){let T=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${T}`}function m(y){r.$$.not_equal(s.show,y)&&(s.show=y,u.set(s))}function _(y){r.$$.not_equal(s.pollutant,y)&&(s.pollutant=y,u.set(s))}function S(){s.opacity=Vt(this.value),u.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s.pollutant]),r.$$.dirty&1&&l(1,n=a(s.pollutant))},[s,n,u,f,c,m,_,S]}class Di extends Q{constructor(e){super(),K(this,e,Ri,Oi,J,{})}}function Ai(r){let e;return{c(){e=v("Road noise")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Fi(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Gi(r){let e,l,t,n,s,o,u,i,f;return s=new ee({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Fi]},$$scope:{ctx:r}}}),i=new Le({}),{c(){e=C("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,l=L(),t=C("p"),n=v("Data from June 2019, produced by "),b(s.$$.fragment),o=v(". See there for methodology details"),u=L(),b(i.$$.fragment)},m(a,c){$(a,e,c),$(a,l,c),$(a,t,c),h(t,n),k(s,t,null),h(t,o),$(a,u,c),k(i,a,c),f=!0},p(a,c){const m={};c&32&&(m.$$scope={dirty:c,ctx:a}),s.$set(m)},i(a){f||(g(s.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(s.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(p(e),p(l),p(t),p(u)),w(s),w(i,a)}}}function qi(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Gi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function al(r){let e,l;return e=new qe({props:{colorScale:r[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function zi(r){let e,l=r[4].noiseclass+"",t,n,s=ul(r[4].noiseclass)+"",o,u;return{c(){e=C("p"),t=v(l),n=v(" dB ("),o=v(s),u=v(")")},m(i,f){$(i,e,f),h(e,t),h(e,n),h(e,o),h(e,u)},p(i,f){f&16&&l!==(l=i[4].noiseclass+"")&&G(t,l),f&16&&s!==(s=ul(i[4].noiseclass)+"")&&G(o,s)},d(i){i&&p(e)}}}function Hi(r){let e,l;return e=new ce({props:{$$slots:{default:[zi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ei(r){let e,l;const t=[q(Lt),{sourceLayer:Lt},{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":ne(.5,.8)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Hi]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new Ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?se(t,[o&0&&re(q(Lt)),o&0&&{sourceLayer:Lt},o&2&&{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":s[1][0],"60.0-64.9":s[1][0],"65.0-69.9":s[1][1],"70.0-74.9":s[1][1],">=75.0":s[1][2]},"red"),"fill-opacity":ne(.5,.8)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Bi(r){let e,l,t,n,s,o;function u(a){r[3](a)}let i={$$slots:{right:[qi],default:[Ai]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0]&&al(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${Lt}.pmtiles`,$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0],B(()=>l=!1)),e.$set(m),a[0]?f?(f.p(a,c),c&1&&g(f,1)):(f=al(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&33&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}let Lt="road_noise";function ul(r){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[r]}function Ui(r,e,l){let t,n=[te.sequential_low_to_high[0],te.sequential_low_to_high[2],te.sequential_low_to_high[4]],s=be(Lt);Z(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Wi extends Q{constructor(e){super(),K(this,e,Ui,Bi,J,{})}}function Yi(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Wards`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Ji(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Vi(r){let e,l,t,n,s,o,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ji]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=C("p"),l=v("Data from "),b(t.$$.fragment),n=v(", as of May 2023."),s=L(),b(o.$$.fragment)},m(i,f){$(i,e,f),h(e,l),k(t,e,null),h(e,n),$(i,s,f),k(o,i,f),u=!0},p(i,f){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),t.$set(a)},i(i){u||(g(t.$$.fragment,i),g(o.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(o.$$.fragment,i),u=!1},d(i){i&&(p(e),p(s)),w(t),w(o,i)}}}function Qi(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Vi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ki(r){let e,l=r[4].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&p(e)}}}function Zi(r){let e,l;return e=new ce({props:{$$slots:{default:[Ki,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Xi(r){let e,l,t,n;const s=[q(Je),{sourceLayer:Je},{paint:{"fill-color":r[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Zi]},$$scope:{ctx:r}};for(let f=0;f<s.length;f+=1)o=le(o,s[f]);e=new Ge({props:o}),e.$on("click",ef);const u=[q(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let f=0;f<u.length;f+=1)i=le(i,u[f]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(f,a){k(e,f,a),$(f,l,a),k(t,f,a),n=!0},p(f,a){const c=a&3?se(s,[a&0&&re(q(Je)),a&0&&{sourceLayer:Je},a&2&&{paint:{"fill-color":f[1],"fill-opacity":ne(0,.5)}},a&1&&{layout:{visibility:f[0]?"visible":"none"}},s[4],s[5],s[6]]):{};a&32&&(c.$$scope={dirty:a,ctx:f}),e.$set(c);const m=a&3?se(u,[a&0&&re(q(`${Je}-outline`)),a&0&&{sourceLayer:Je},a&2&&{paint:{"line-color":f[1],"line-width":2.5}},a&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};t.$set(m)},i(f){n||(g(e.$$.fragment,f),g(t.$$.fragment,f),n=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function xi(r){let e,l,t,n,s;function o(i){r[3](i)}let u={$$slots:{right:[Qi],default:[Yi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),H.push(()=>E(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${Je}.pmtiles`,$$slots:{default:[Xi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!l&&f&1&&(l=!0,a.checked=i[0],B(()=>l=!1)),e.$set(a);const c={};f&33&&(c.$$scope={dirty:f,ctx:i}),n.$set(c)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}let Je="wards";function ef(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function tf(r,e,l){let t,n=te.wards,s=be(Je);Z(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class nf extends Q{constructor(e){super(),K(this,e,tf,xi,J,{})}}function lf(r){let e;return{c(){e=v("Open Data Commons Open Database License")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function sf(r){let e,l,t,n;return t=new ee({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[lf]},$$scope:{ctx:r}}}),{c(){e=C("p"),l=v("License: "),b(t.$$.fragment)},m(s,o){$(s,e,o),h(e,l),k(t,e,null),n=!0},p(s,[o]){const u={};o&1&&(u.$$scope={dirty:o,ctx:s}),t.$set(u)},i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&p(e),w(t)}}}class Xe extends Q{constructor(e){super(),K(this,e,null,sf,J,{})}}function rf(r){let e,l,t;return e=new Te({props:{color:te.bus_route_with_lane}}),{c(){b(e.$$.fragment),l=v(`
  Bus routes`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function of(r){let e;return{c(){e=v(`GTFS
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ff(r){let e,l,t,n,s,o,u,i,f;return s=new ee({props:{href:"https://gtfs.org",$$slots:{default:[of]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,l=L(),t=C("p"),n=v("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(s.$$.fragment),o=v(`, and doesn't include which routes are run or the
        frequency of service.`),u=L(),b(i.$$.fragment)},m(a,c){$(a,e,c),$(a,l,c),$(a,t,c),h(t,n),k(s,t,null),h(t,o),$(a,u,c),k(i,a,c),f=!0},p(a,c){const m={};c&16&&(m.$$scope={dirty:c,ctx:a}),s.$set(m)},i(a){f||(g(s.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(s.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(p(e),p(l),p(t),p(u)),w(s),w(i,a)}}}function af(r){let e,l,t;return l=new $e({props:{$$slots:{default:[ff]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function uf(r){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function cf(r){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $f(r){let e;function l(s,o){return s[3].has_bus_lane?cf:uf}let t=l(r),n=t(r);return{c(){n.c(),e=ye()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t!==(t=l(s))&&(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function pf(r){let e,l;return e=new ce({props:{$$slots:{default:[$f,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function mf(r){let e,l;const t=[q(It),{sourceLayer:It},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],te.bus_route_with_lane,te.bus_route_without_lane],"line-width":5,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[pf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?se(t,[o&0&&re(q(It)),o&0&&{sourceLayer:It},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function _f(r){let e,l,t,n,s;function o(i){r[2](i)}let u={$$slots:{right:[af],default:[rf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),H.push(()=>E(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${It}.pmtiles`,$$slots:{default:[mf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,[f]){const a={};f&16&&(a.$$scope={dirty:f,ctx:i}),!l&&f&1&&(l=!0,a.checked=i[0],B(()=>l=!1)),e.$set(a);const c={};f&17&&(c.$$scope={dirty:f,ctx:i}),n.$set(c)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}let It="bus_routes";function gf(r,e,l){let t,n=be(It);Z(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class df extends Q{constructor(e){super(),K(this,e,gf,_f,J,{})}}function cl(r){const e=If(r[9]);r[10]=e[0],r[11]=e[1],r[12]=e[2]}function $l(r,e,l){const t=r.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function hf(r){let e;return{c(){e=v("Cycle paths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function bf(r){let e,l,t,n,s,o,u,i;return u=new Xe({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,l=L(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,n=L(),s=C("p"),s.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,o=L(),b(u.$$.fragment)},m(f,a){$(f,e,a),$(f,l,a),$(f,t,a),$(f,n,a),$(f,s,a),$(f,o,a),k(u,f,a),i=!0},p:x,i(f){i||(g(u.$$.fragment,f),i=!0)},o(f){d(u.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(t),p(n),p(s),p(o)),w(u,f)}}}function kf(r){let e,l,t;return l=new $e({props:{$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function pl(r){let e,l,t;return l=new st({props:{$$slots:{default:[vf]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(l.$$.fragment),_e(e,"border","1px solid black"),_e(e,"padding","8px")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&131073&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function wf(r){let e,l,t=r[13]+"",n,s,o;return e=new Te({props:{color:r[14]}}),{c(){b(e.$$.fragment),l=L(),n=v(t),s=L()},m(u,i){k(e,u,i),$(u,l,i),$(u,n,i),$(u,s,i),o=!0},p:x,i(u){o||(g(e.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),o=!1},d(u){u&&(p(l),p(n),p(s)),w(e,u)}}}function ml(r){let e,l,t;function n(o){r[5](o,r[10])}let s={$$slots:{default:[wf]},$$scope:{ctx:r}};return r[0][r[10]]!==void 0&&(s.checked=r[0][r[10]]),e=new oe({props:s}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(o,u){k(e,o,u),t=!0},p(o,u){r=o;const i={};u&131072&&(i.$$scope={dirty:u,ctx:r}),!l&&u&5&&(l=!0,i.checked=r[0][r[10]],B(()=>l=!1)),e.$set(i)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function vf(r){let e,l,t=ve(r[2]),n=[];for(let o=0;o<t.length;o+=1)n[o]=ml($l(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ye()},m(o,u){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(o,u);$(o,e,u),l=!0},p(o,u){if(u&5){t=ve(o[2]);let i;for(i=0;i<t.length;i+=1){const f=$l(o,t,i);n[i]?(n[i].p(f,u),g(n[i],1)):(n[i]=ml(f),n[i].c(),g(n[i],1),n[i].m(e.parentNode,e))}for(ae(),i=t.length;i<n.length;i+=1)s(i);ue()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)g(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&p(e),Ke(n,o)}}}function yf(r){cl(r);let e,l=r[10]+"",t,n,s,o,u,i=r[11]+"",f,a,c,m,_=r[12]+"",S;return{c(){e=C("h2"),t=v(l),n=L(),s=C("p"),o=v("Direction: "),u=C("b"),f=L(),a=C("p"),c=v("Width: "),m=C("b"),S=v(_)},m(y,T){$(y,e,T),h(e,t),$(y,n,T),$(y,s,T),h(s,o),h(s,u),u.innerHTML=i,$(y,f,T),$(y,a,T),h(a,c),h(a,m),h(m,S)},p(y,T){cl(y),T&512&&l!==(l=y[10]+"")&&G(t,l),T&512&&i!==(i=y[11]+"")&&(u.innerHTML=i),T&512&&_!==(_=y[12]+"")&&G(S,_)},d(y){y&&(p(e),p(n),p(s),p(f),p(a))}}}function Sf(r){let e,l;return e=new ce({props:{$$slots:{default:[yf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&131584&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Cf(r){let e,l;const t=[q(Mt),{sourceLayer:Mt},{paint:{"line-color":Ze(["get","kind"],{track:te.cycle_paths.track,lane:te.cycle_paths.lane,shared_use_segregated:te.cycle_paths.shared_use_segregated,shared_use_unsegregated:te.cycle_paths.shared_use_unsegregated},"red"),"line-width":Re,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[3](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[Sf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new de({props:n}),e.$on("click",Mf),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&9?se(t,[o&0&&re(q(Mt)),o&0&&{sourceLayer:Mt},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&9&&{filter:s[3](s[0])},t[5],t[6],t[7]]):{};o&131072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Tf(r){let e,l,t,n,s,o;function u(a){r[4](a)}let i={$$slots:{right:[kf],default:[hf]},$$scope:{ctx:r}};r[0].show!==void 0&&(i.checked=r[0].show),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0].show&&pl(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${Mt}.pmtiles`,$$slots:{default:[Cf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&131072&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0].show,B(()=>l=!1)),e.$set(m),a[0].show?f?(f.p(a,c),c&1&&g(f,1)):(f=pl(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&131073&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}let Mt="cycle_paths";function Lf(r){return{show:!0,track:r.includes("track"),lane:r.includes("lane"),shared_use_segregated:r.includes("shared_use_segregated"),shared_use_unsegregated:r.includes("shared_use_unsegregated")}}function If(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${l} ${r.direction}`,t]}function Mf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Nf(r,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],s={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function o(m){return m.show?n.filter(_=>m[_]).join(","):null}let u=wt(Mt,s,o,Lf);Z(r,u,m=>l(0,t=m));let i=[["track","Separated tracks",te.cycle_paths.track],["lane","Unprotected lanes",te.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",te.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",te.cycle_paths.shared_use_unsegregated]];function f(m){let _=n.filter(S=>m[S]);return["in",["get","kind"],["literal",_]]}function a(m){r.$$.not_equal(t.show,m)&&(t.show=m,u.set(t))}function c(m,_){r.$$.not_equal(t[_],m)&&(t[_]=m,u.set(t))}return[t,u,i,f,a,c]}class Of extends Q{constructor(e){super(),K(this,e,Nf,Tf,J,{})}}function Pf(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Major Road Network`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function jf(r){let e;return{c(){e=v(`Major Road Network
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Rf(r){let e,l,t,n,s,o,u;return t=new ee({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[jf]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=C("p"),l=v("Data from the "),b(t.$$.fragment),n=v(", as of September 2021."),s=L(),b(o.$$.fragment)},m(i,f){$(i,e,f),h(e,l),k(t,e,null),h(e,n),$(i,s,f),k(o,i,f),u=!0},p(i,f){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),t.$set(a)},i(i){u||(g(t.$$.fragment,i),g(o.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(o.$$.fragment,i),u=!1},d(i){i&&(p(e),p(s)),w(t),w(o,i)}}}function Df(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Rf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Af(r){let e,l=(r[4].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&G(t,l)},d(n){n&&p(e)}}}function Ff(r){let e,l;return e=new ce({props:{$$slots:{default:[Af,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Gf(r){let e,l;const t=[q(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Ff]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?se(t,[o&0&&re(q(Nt)),o&0&&{sourceLayer:Nt},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function qf(r){let e,l,t,n,s;function o(i){r[3](i)}let u={$$slots:{right:[Df],default:[Pf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),H.push(()=>E(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${Nt}.pmtiles`,$$slots:{default:[Gf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!l&&f&1&&(l=!0,a.checked=i[0],B(()=>l=!1)),e.$set(a);const c={};f&33&&(c.$$scope={dirty:f,ctx:i}),n.$set(c)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}let Nt="mrn";function zf(r,e,l){let t,n=te.mrn,s=be(Nt);Z(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Hf extends Q{constructor(e){super(),K(this,e,zf,qf,J,{})}}function Ef(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  Strategic Road Network`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Bf(r){let e;return{c(){e=v(`OS Open Roads
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Uf(r){let e,l,t,n,s,o,u;return t=new ee({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=C("p"),l=v("Data from "),b(t.$$.fragment),n=v(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),s=L(),b(o.$$.fragment)},m(i,f){$(i,e,f),h(e,l),k(t,e,null),h(e,n),$(i,s,f),k(o,i,f),u=!0},p(i,f){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),t.$set(a)},i(i){u||(g(t.$$.fragment,i),g(o.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(o.$$.fragment,i),u=!1},d(i){i&&(p(e),p(s)),w(t),w(o,i)}}}function Wf(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Yf(r){let e,l=(r[4].name??"Unknown SRN road")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&G(t,l)},d(n){n&&p(e)}}}function Jf(r){let e,l;return e=new ce({props:{$$slots:{default:[Yf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Vf(r){let e,l;const t=[q(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Jf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?se(t,[o&0&&re(q(Ot)),o&0&&{sourceLayer:Ot},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Qf(r){let e,l,t,n,s;function o(i){r[3](i)}let u={$$slots:{right:[Wf],default:[Ef]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),H.push(()=>E(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${Ot}.pmtiles`,$$slots:{default:[Vf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!l&&f&1&&(l=!0,a.checked=i[0],B(()=>l=!1)),e.$set(a);const c={};f&33&&(c.$$scope={dirty:f,ctx:i}),n.$set(c)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}let Ot="srn";function Kf(r,e,l){let t,n=te.srn,s=be(Ot);Z(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Zf extends Q{constructor(e){super(),K(this,e,Kf,Qf,J,{})}}function Xf(r){let e,l,t;return e=new Te({props:{color:r[1]}}),{c(){b(e.$$.fragment),l=v(`
  National Cycle Network`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function xf(r){let e;return{c(){e=v(`National Cycle Network
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ea(r){let e,l,t,n,s,o,u;return t=new ee({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[xf]},$$scope:{ctx:r}}}),o=new Le({}),{c(){e=C("p"),l=v("Data from Sustrans about the "),b(t.$$.fragment),n=v(", downloaded on 22/01/2024."),s=L(),b(o.$$.fragment)},m(i,f){$(i,e,f),h(e,l),k(t,e,null),h(e,n),$(i,s,f),k(o,i,f),u=!0},p(i,f){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),t.$set(a)},i(i){u||(g(t.$$.fragment,i),g(o.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(o.$$.fragment,i),u=!1},d(i){i&&(p(e),p(s)),w(t),w(o,i)}}}function ta(r){let e,l,t;return l=new $e({props:{$$slots:{default:[ea]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function _l(r){let e,l,t,n=r[4].Desc_+"",s;return{c(){e=C("li"),l=v("Description: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Desc_+"")&&G(s,n)},d(o){o&&p(e)}}}function gl(r){let e,l,t,n=r[4].Greenway+"",s;return{c(){e=C("li"),l=v("Is greenway: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Greenway+"")&&G(s,n)},d(o){o&&p(e)}}}function dl(r){let e,l,t,n=r[4].RouteType+"",s;return{c(){e=C("li"),l=v("Route type: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteType+"")&&G(s,n)},d(o){o&&p(e)}}}function hl(r){let e,l,t,n=r[4].RouteNo+"",s;return{c(){e=C("li"),l=v("Route number: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteNo+"")&&G(s,n)},d(o){o&&p(e)}}}function bl(r){let e,l,t,n=r[4].RouteCat+"",s;return{c(){e=C("li"),l=v("Route Category: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteCat+"")&&G(s,n)},d(o){o&&p(e)}}}function kl(r){let e,l,t,n=r[4].OpenStatus+"",s;return{c(){e=C("li"),l=v("Open Status: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].OpenStatus+"")&&G(s,n)},d(o){o&&p(e)}}}function wl(r){let e,l,t,n=r[4].Surface+"",s;return{c(){e=C("li"),l=v("Surface: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Surface+"")&&G(s,n)},d(o){o&&p(e)}}}function vl(r){let e,l,t,n=r[4].Quality+"",s;return{c(){e=C("li"),l=v("Quality: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].Quality+"")&&G(s,n)},d(o){o&&p(e)}}}function yl(r){let e,l,t,n=r[4].RoadClass+"",s;return{c(){e=C("li"),l=v("Road Class: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&16&&n!==(n=o[4].RoadClass+"")&&G(s,n)},d(o){o&&p(e)}}}function na(r){let e,l,t,n,s,o,u,i,f,a=r[4].Desc_&&_l(r),c=r[4].Greenway&&gl(r),m=r[4].RouteType&&dl(r),_=r[4].RouteNo&&hl(r),S=r[4].RouteCat&&bl(r),y=r[4].OpenStatus&&kl(r),T=r[4].Surface&&wl(r),P=r[4].Quality&&vl(r),F=r[4].RoadClass&&yl(r);return{c(){e=C("ul"),a&&a.c(),l=L(),c&&c.c(),t=L(),m&&m.c(),n=L(),_&&_.c(),s=L(),S&&S.c(),o=L(),y&&y.c(),u=L(),T&&T.c(),i=L(),P&&P.c(),f=L(),F&&F.c()},m(D,N){$(D,e,N),a&&a.m(e,null),h(e,l),c&&c.m(e,null),h(e,t),m&&m.m(e,null),h(e,n),_&&_.m(e,null),h(e,s),S&&S.m(e,null),h(e,o),y&&y.m(e,null),h(e,u),T&&T.m(e,null),h(e,i),P&&P.m(e,null),h(e,f),F&&F.m(e,null)},p(D,N){D[4].Desc_?a?a.p(D,N):(a=_l(D),a.c(),a.m(e,l)):a&&(a.d(1),a=null),D[4].Greenway?c?c.p(D,N):(c=gl(D),c.c(),c.m(e,t)):c&&(c.d(1),c=null),D[4].RouteType?m?m.p(D,N):(m=dl(D),m.c(),m.m(e,n)):m&&(m.d(1),m=null),D[4].RouteNo?_?_.p(D,N):(_=hl(D),_.c(),_.m(e,s)):_&&(_.d(1),_=null),D[4].RouteCat?S?S.p(D,N):(S=bl(D),S.c(),S.m(e,o)):S&&(S.d(1),S=null),D[4].OpenStatus?y?y.p(D,N):(y=kl(D),y.c(),y.m(e,u)):y&&(y.d(1),y=null),D[4].Surface?T?T.p(D,N):(T=wl(D),T.c(),T.m(e,i)):T&&(T.d(1),T=null),D[4].Quality?P?P.p(D,N):(P=vl(D),P.c(),P.m(e,f)):P&&(P.d(1),P=null),D[4].RoadClass?F?F.p(D,N):(F=yl(D),F.c(),F.m(e,null)):F&&(F.d(1),F=null)},d(D){D&&p(e),a&&a.d(),c&&c.d(),m&&m.d(),_&&_.d(),S&&S.d(),y&&y.d(),T&&T.d(),P&&P.d(),F&&F.d()}}}function la(r){let e,l;return e=new ce({props:{$$slots:{default:[na,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function sa(r){let e,l;const t=[q(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[la]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&3?se(t,[o&0&&re(q(Pt)),o&0&&{sourceLayer:Pt},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":4,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ra(r){let e,l,t,n,s;function o(i){r[3](i)}let u={$$slots:{right:[ta],default:[Xf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),H.push(()=>E(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${Pt}.pmtiles`,$$slots:{default:[sa]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),!l&&f&1&&(l=!0,a.checked=i[0],B(()=>l=!1)),e.$set(a);const c={};f&33&&(c.$$scope={dirty:f,ctx:i}),n.$set(c)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}let Pt="national_cycle_network";function oa(r,e,l){let t,n=te.national_cycle_network,s=be(Pt);Z(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class ia extends Q{constructor(e){super(),K(this,e,oa,ra,J,{})}}function Sl(r,e,l){const t=r.slice();return t[6]=e[l][0],t[7]=e[l][1],t[8]=e[l][2],t}function fa(r){let e;return{c(){e=v("OS Pavement widths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function aa(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ua(r){let e,l,t,n,s,o,u,i,f,a,c;return f=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[aa]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,l=L(),t=C("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,n=L(),s=C("p"),s.textContent="Data valid as of 1 January, 2024",o=L(),u=C("p"),i=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),a=v(".")},m(m,_){$(m,e,_),$(m,l,_),$(m,t,_),$(m,n,_),$(m,s,_),$(m,o,_),$(m,u,_),h(u,i),k(f,u,null),h(u,a),c=!0},p(m,_){const S={};_&2048&&(S.$$scope={dirty:_,ctx:m}),f.$set(S)},i(m){c||(g(f.$$.fragment,m),c=!0)},o(m){d(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(l),p(t),p(n),p(s),p(o),p(u)),w(f)}}}function ca(r){let e,l,t;return l=new $e({props:{$$slots:{default:[ua]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Cl(r){let e,l;return e=new qe({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function $a(r){let e,l,t=en(r[5].angle+r[8])+"",n;return{c(){e=C("p"),l=new pt(!1),n=v(` side of the road: no pavement
          `),l.a=n},m(s,o){$(s,e,o),l.m(t,e),h(e,n)},p(s,o){o&32&&t!==(t=en(s[5].angle+s[8])+"")&&l.p(t)},d(s){s&&p(e)}}}function pa(r){let e,l,t=en(r[5].angle+r[8])+"",n,s,o=r[6]+"",u,i,f,a=r[7]+"",c,m;return{c(){e=C("p"),l=new pt(!1),n=v(` side of the road:
            `),s=C("b"),u=v(o),i=v(`
            m average,
            `),f=C("b"),c=v(a),m=v(`
            m minimum
          `),l.a=n},m(_,S){$(_,e,S),l.m(t,e),h(e,n),h(e,s),h(s,u),h(e,i),h(e,f),h(f,c),h(e,m)},p(_,S){S&32&&t!==(t=en(_[5].angle+_[8])+"")&&l.p(t),S&32&&o!==(o=_[6]+"")&&G(u,o),S&32&&a!==(a=_[7]+"")&&G(c,a)},d(_){_&&p(e)}}}function Tl(r){let e;function l(s,o){return s[6]?pa:$a}let t=l(r),n=t(r);return{c(){n.c(),e=ye()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function ma(r){let e,l=ve([[r[5].left_average,r[5].left_minimum,-90],[r[5].right_average,r[5].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Tl(Sl(r,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ye()},m(n,s){for(let o=0;o<2;o+=1)t[o]&&t[o].m(n,s);$(n,e,s)},p(n,s){if(s&32){l=ve([[n[5].left_average,n[5].left_minimum,-90],[n[5].right_average,n[5].right_minimum,90]]);let o;for(o=0;o<2;o+=1){const u=Sl(n,l,o);t[o]?t[o].p(u,s):(t[o]=Tl(u),t[o].c(),t[o].m(e.parentNode,e))}for(;o<2;o+=1)t[o].d(1)}},d(n){n&&p(e),Ke(t,n)}}}function _a(r){let e,l;return e=new ce({props:{openOn:"hover",$$slots:{default:[ma,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&2080&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ga(r){let e,l;const t=[q(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Re,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[_a]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&re(q(jt)),o&0&&{sourceLayer:jt},t[2],t[3],o&6&&{paint:{"line-color":he(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],s[2],s[1]),"line-width":Re,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function da(r){let e,l,t,n,s,o;function u(a){r[4](a)}let i={$$slots:{right:[ca],default:[fa]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0]&&Cl(r);return s=new ge({props:{url:`pmtiles://${Qt()}/v1/${jt}.pmtiles`,$$slots:{default:[ga]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0],B(()=>l=!1)),e.$set(m),a[0]?f?(f.p(a,c),c&1&&g(f,1)):(f=Cl(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&2049&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}let jt="pavement_widths";function ha(r){let e=Math.floor((r+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function en(r){return`${ha(r)} <span style="display: inline-block; rotate: ${r}deg">⬆</span>`}function ba(r,e,l){let t,n=te.sequential_low_to_high,s=[0,2,4,6,8,13],o=be(jt);Z(r,o,i=>l(0,t=i));function u(i){t=i,o.set(t)}return[t,n,s,o,u]}class ka extends Q{constructor(e){super(),K(this,e,ba,da,J,{})}}function wa(r){let e;return{c(){e=v("Propensity to Cycle Tool")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function va(r){let e;return{c(){e=v("the PCT website")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ya(r){let e;return{c(){e=v("2017 journal article")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Sa(r){let e,l,t,n,s,o,u,i,f,a,c;return u=new ee({props:{href:"https://www.pct.bike",$$slots:{default:[va]},$$scope:{ctx:r}}}),f=new ee({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[ya]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,l=L(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,n=L(),s=C("p"),o=v("See "),b(u.$$.fragment),i=v(" and "),b(f.$$.fragment),a=v(" for details on methodology and data sources.")},m(m,_){$(m,e,_),$(m,l,_),$(m,t,_),$(m,n,_),$(m,s,_),h(s,o),k(u,s,null),h(s,i),k(f,s,null),h(s,a),c=!0},p(m,_){const S={};_&1024&&(S.$$scope={dirty:_,ctx:m}),u.$set(S);const y={};_&1024&&(y.$$scope={dirty:_,ctx:m}),f.$set(y)},i(m){c||(g(u.$$.fragment,m),g(f.$$.fragment,m),c=!0)},o(m){d(u.$$.fragment,m),d(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(l),p(t),p(n),p(s)),w(u),w(f)}}}function Ca(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Sa]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&1024&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ll(r){let e,l,t,n,s,o,u,i;e=new qe({props:{colorScale:r[1],limits:r[2]}});function f(_){r[6](_)}let a={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0].tripPurpose!==void 0&&(a.value=r[0].tripPurpose),t=new Rs({props:a}),H.push(()=>E(t,"value",f));function c(_){r[7](_)}let m={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[0].scenario!==void 0&&(m.value=r[0].scenario),o=new ht({props:m}),H.push(()=>E(o,"value",c)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),s=L(),b(o.$$.fragment)},m(_,S){k(e,_,S),$(_,l,S),k(t,_,S),$(_,s,S),k(o,_,S),i=!0},p(_,S){const y={};!n&&S&1&&(n=!0,y.value=_[0].tripPurpose,B(()=>n=!1)),t.$set(y);const T={};!u&&S&1&&(u=!0,T.value=_[0].scenario,B(()=>u=!1)),o.$set(T)},i(_){i||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),i=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(o.$$.fragment,_),i=!1},d(_){_&&(p(l),p(s)),w(e,_),w(t,_),w(o,_)}}}function Ta(r){let e,l=r[4](r[9])+"",t;return{c(){e=new pt(!1),t=ye(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function La(r){let e,l;return e=new ce({props:{$$slots:{default:[Ta,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ia(r){let e,l;const t=[q(lt),{sourceLayer:lt},{paint:{"line-color":he(["get",r[0].scenario],r[2],r[1]),"line-width":Re,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==lt?"visible":"none"}}];let n={$$slots:{default:[La]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&re(q(lt)),o&0&&{sourceLayer:lt},o&7&&{paint:{"line-color":he(["get",s[0].scenario],s[2],s[1]),"line-width":Re,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==lt?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ma(r){let e,l=r[4](r[9])+"",t;return{c(){e=new pt(!1),t=ye(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function Na(r){let e,l;return e=new ce({props:{$$slots:{default:[Ma,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Oa(r){let e,l;const t=[q($t),{sourceLayer:$t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["get",r[0].scenario],r[2],r[1]),"line-width":Re,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==$t?"visible":"none"}}];let n={$$slots:{default:[Na]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&re(q($t)),o&0&&{sourceLayer:$t},t[2],t[3],o&7&&{paint:{"line-color":he(["get",s[0].scenario],s[2],s[1]),"line-width":Re,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==$t?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Pa(r){let e,l,t,n,s,o,u,i;function f(m){r[5](m)}let a={$$slots:{right:[Ca],default:[wa]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new oe({props:a}),H.push(()=>E(e,"checked",f));let c=r[0].show&&Ll(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${lt}.pmtiles`,$$slots:{default:[Ia]},$$scope:{ctx:r}}}),u=new ge({props:{url:`pmtiles://${me()}/v1/${$t}.pmtiles`,$$slots:{default:[Oa]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),c&&c.c(),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment)},m(m,_){k(e,m,_),$(m,t,_),c&&c.m(m,_),$(m,n,_),k(s,m,_),$(m,o,_),k(u,m,_),i=!0},p(m,[_]){const S={};_&1024&&(S.$$scope={dirty:_,ctx:m}),!l&&_&1&&(l=!0,S.checked=m[0].show,B(()=>l=!1)),e.$set(S),m[0].show?c?(c.p(m,_),_&1&&g(c,1)):(c=Ll(m),c.c(),g(c,1),c.m(n.parentNode,n)):c&&(ae(),d(c,1,1,()=>{c=null}),ue());const y={};_&1025&&(y.$$scope={dirty:_,ctx:m}),s.$set(y);const T={};_&1025&&(T.$$scope={dirty:_,ctx:m}),u.$set(T)},i(m){i||(g(e.$$.fragment,m),g(c),g(s.$$.fragment,m),g(u.$$.fragment,m),i=!0)},o(m){d(e.$$.fragment,m),d(c),d(s.$$.fragment,m),d(u.$$.fragment,m),i=!1},d(m){m&&(p(t),p(n),p(o)),w(e,m),c&&c.d(m),w(s,m),w(u,m)}}}let lt="pct_commute",$t="pct_school";function ja(r){return r.show?`${r.tripPurpose}/${r.scenario}`:null}function Ra(r){let[e,l]=r.split("/");return{show:!0,tripPurpose:e,scenario:l}}function Da(r,e,l){let t,n=te.sequential_low_to_high,s=[0,50,100,500,1e3,2e3],u=wt("pct",{show:!1,tripPurpose:lt,scenario:"baseline"},ja,Ra);Z(r,u,m=>l(0,t=m));function i(m){let _=m.baseline,S=m.gov_target,y=m.go_dutch,T=`<h2>Trip purpose: ${t.tripPurpose==lt?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)T+=`<p>Government target (2025): <b>${S.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${y.toLocaleString()}</b></p>`;else{let P=(S/_).toFixed(1),F=(y/_).toFixed(1);T+=`<p>Government target (2025): ${S.toLocaleString()} (<b>${P}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${y.toLocaleString()} (<b>${F}x</b> of baseline)</p>`}return T}function f(m){r.$$.not_equal(t.show,m)&&(t.show=m,u.set(t))}function a(m){r.$$.not_equal(t.tripPurpose,m)&&(t.tripPurpose=m,u.set(t))}function c(m){r.$$.not_equal(t.scenario,m)&&(t.scenario=m,u.set(t))}return[t,n,s,u,i,f,a,c]}class Aa extends Q{constructor(e){super(),K(this,e,Da,Pa,J,{})}}function Fa(r){let e;return{c(){e=v("OS Speeds")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ga(r){let e;return{c(){e=v("Basemap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function qa(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function za(r){let e,l,t,n,s,o,u,i,f,a,c,m;return t=new ee({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Ga]},$$scope:{ctx:r}}}),a=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[qa]},$$scope:{ctx:r}}}),{c(){e=C("p"),l=v("The average speed data is collected over a six-month period by "),b(t.$$.fragment),n=v(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),s=L(),o=C("p"),o.textContent="Data valid as of 1 September, 2023",u=L(),i=C("p"),f=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(a.$$.fragment),c=v(".")},m(_,S){$(_,e,S),h(e,l),k(t,e,null),h(e,n),$(_,s,S),$(_,o,S),$(_,u,S),$(_,i,S),h(i,f),k(a,i,null),h(i,c),m=!0},p(_,S){const y={};S&512&&(y.$$scope={dirty:S,ctx:_}),t.$set(y);const T={};S&512&&(T.$$scope={dirty:S,ctx:_}),a.$set(T)},i(_){m||(g(t.$$.fragment,_),g(a.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(a.$$.fragment,_),m=!1},d(_){_&&(p(e),p(s),p(o),p(u),p(i)),w(t),w(a)}}}function Ha(r){let e,l,t;return l=new $e({props:{$$slots:{default:[za]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Il(r){let e,l,t,n,s;e=new qe({props:{colorScale:r[1],limits:r[2]}});function o(i){r[6](i)}let u={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0].kind!==void 0&&(u.value=r[0].kind),t=new Rs({props:u}),H.push(()=>E(t,"value",o)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,f){k(e,i,f),$(i,l,f),k(t,i,f),s=!0},p(i,f){const a={};!n&&f&1&&(n=!0,a.value=i[0].kind,B(()=>n=!1)),t.$set(a)},i(i){s||(g(e.$$.fragment,i),g(t.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),s=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function Ea(r){let e,l,t=r[8].indicative_mph+"",n,s,o,u,i,f=r[8].highest_mph+"",a,c,m=r[4][r[8].highest_description]+"",_,S;return{c(){e=C("p"),l=v("Posted speed limit: "),n=v(t),s=v(" mph"),o=L(),u=C("p"),i=v("Highest average speed: "),a=v(f),c=v(" mph (during "),_=v(m),S=v(")")},m(y,T){$(y,e,T),h(e,l),h(e,n),h(e,s),$(y,o,T),$(y,u,T),h(u,i),h(u,a),h(u,c),h(u,_),h(u,S)},p(y,T){T&256&&t!==(t=y[8].indicative_mph+"")&&G(n,t),T&256&&f!==(f=y[8].highest_mph+"")&&G(a,f),T&256&&m!==(m=y[4][y[8].highest_description]+"")&&G(_,m)},d(y){y&&(p(e),p(o),p(u))}}}function Ba(r){let e,l;return e=new ce({props:{$$slots:{default:[Ea,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&768&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ua(r){let e,l;const t=[q(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["get",r[0].kind],r[2],r[1]),"line-width":Re,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={$$slots:{default:[Ba]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&re(q(Rt)),o&0&&{sourceLayer:Rt},t[2],t[3],o&7&&{paint:{"line-color":he(["get",s[0].kind],s[2],s[1]),"line-width":Re,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0].show?"visible":"none"}}]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Wa(r){let e,l,t,n,s,o;function u(a){r[5](a)}let i={$$slots:{right:[Ha],default:[Fa]},$$scope:{ctx:r}};r[0].show!==void 0&&(i.checked=r[0].show),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0].show&&Il(r);return s=new ge({props:{url:`pmtiles://${Qt()}/v1/${Rt}.pmtiles`,$$slots:{default:[Ua]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&512&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0].show,B(()=>l=!1)),e.$set(m),a[0].show?f?(f.p(a,c),c&1&&g(f,1)):(f=Il(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&513&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}let Rt="road_speeds";function Ya(r){return r.show?r.kind:null}function Ja(r){return{show:!0,kind:r}}function Va(r,e,l){let t,n=te.sequential_low_to_high,s=[0,20,30,40,50,90],u=wt(Rt,{show:!1,kind:"indicative_mph"},Ya,Ja);Z(r,u,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function f(c){r.$$.not_equal(t.show,c)&&(t.show=c,u.set(t))}function a(c){r.$$.not_equal(t.kind,c)&&(t.kind=c,u.set(t))}return[t,n,s,u,i,f,a]}class Qa extends Q{constructor(e){super(),K(this,e,Va,Wa,J,{})}}function Ka(r){let e;return{c(){e=v("OS Road widths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Za(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Xa(r){let e,l,t,n,s,o,u,i,f;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Za]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,l=L(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",n=L(),s=C("p"),o=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=v(".")},m(a,c){$(a,e,c),$(a,l,c),$(a,t,c),$(a,n,c),$(a,s,c),h(s,o),k(u,s,null),h(s,i),f=!0},p(a,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:a}),u.$set(m)},i(a){f||(g(u.$$.fragment,a),f=!0)},o(a){d(u.$$.fragment,a),f=!1},d(a){a&&(p(e),p(l),p(t),p(n),p(s)),w(u)}}}function xa(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Xa]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ml(r){let e,l;return e=new qe({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function eu(r){let e,l,t,n=r[5].average+"",s,o,u,i,f,a,c=r[5].minimum+"",m,_;return{c(){e=C("p"),l=v("Average width: "),t=C("b"),s=v(n),o=v(`
        meters`),u=L(),i=C("p"),f=v("Minimum width: "),a=C("b"),m=v(c),_=v(`
        meters`)},m(S,y){$(S,e,y),h(e,l),h(e,t),h(t,s),h(e,o),$(S,u,y),$(S,i,y),h(i,f),h(i,a),h(a,m),h(i,_)},p(S,y){y&32&&n!==(n=S[5].average+"")&&G(s,n),y&32&&c!==(c=S[5].minimum+"")&&G(m,c)},d(S){S&&(p(e),p(u),p(i))}}}function tu(r){let e,l;return e=new ce({props:{$$slots:{default:[eu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function nu(r){let e,l;const t=[q(Dt),{sourceLayer:Dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["get","average"],r[2],r[1]),"line-width":Re,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[tu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&re(q(Dt)),o&0&&{sourceLayer:Dt},t[2],t[3],o&6&&{paint:{"line-color":he(["get","average"],s[2],s[1]),"line-width":Re,"line-opacity":ne(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function lu(r){let e,l,t,n,s,o;function u(a){r[4](a)}let i={$$slots:{right:[xa],default:[Ka]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0]&&Ml(r);return s=new ge({props:{url:`pmtiles://${Qt()}/v1/${Dt}.pmtiles`,$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0],B(()=>l=!1)),e.$set(m),a[0]?f?(f.p(a,c),c&1&&g(f,1)):(f=Ml(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&65&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}let Dt="road_widths";function su(r,e,l){let t,n=te.sequential_low_to_high,s=[0,5,10,15,20,100],o=be(Dt);Z(r,o,i=>l(0,t=i));function u(i){t=i,o.set(t)}return[t,n,s,o,u]}class ru extends Q{constructor(e){super(),K(this,e,su,lu,J,{})}}function ou(r){let e,l,t;return e=new Te({props:{color:te.trams}}),{c(){b(e.$$.fragment),l=v(`
  Trams`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function iu(r){let e,l,t,n;return t=new Xe({}),{c(){e=C("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,l=L(),b(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),k(t,s,o),n=!0},p:x,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function fu(r){let e,l,t;return l=new $e({props:{$$slots:{default:[iu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&8&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function au(r){let e,l;const t=[q(At),{sourceLayer:At},{paint:{"line-color":te.trams,"line-width":5,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new de({props:n}),e.$on("click",cu),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?se(t,[o&0&&re(q(At)),o&0&&{sourceLayer:At},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function uu(r){let e,l,t,n,s;function o(i){r[2](i)}let u={$$slots:{right:[fu],default:[ou]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),H.push(()=>E(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${At}.pmtiles`,$$slots:{default:[au]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,[f]){const a={};f&8&&(a.$$scope={dirty:f,ctx:i}),!l&&f&1&&(l=!0,a.checked=i[0],B(()=>l=!1)),e.$set(a);const c={};f&9&&(c.$$scope={dirty:f,ctx:i}),n.$set(c)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}let At="trams";function cu(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function $u(r,e,l){let t,n=be(At);Z(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class pu extends Q{constructor(e){super(),K(this,e,$u,uu,J,{})}}function mu(r){let e;return{c(){e=v("Bus stops")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function _u(r){let e;return{c(){e=v(`Bus Open Data Service
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function gu(r){let e,l,t,n,s,o,u,i,f;return t=new ee({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[_u]},$$scope:{ctx:r}}}),i=new Le({}),{c(){e=C("p"),l=v("Data from the "),b(t.$$.fragment),n=v(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),s=L(),o=C("p"),o.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=L(),b(i.$$.fragment)},m(a,c){$(a,e,c),h(e,l),k(t,e,null),h(e,n),$(a,s,c),$(a,o,c),$(a,u,c),k(i,a,c),f=!0},p(a,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:a}),t.$set(m)},i(a){f||(g(t.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(t.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(p(e),p(s),p(o),p(u)),w(t),w(i,a)}}}function du(r){let e,l,t;return l=new $e({props:{$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Nl(r){let e,l,t,n;return t=new qe({props:{colorScale:r[1],limits:r[2]}}),{c(){e=C("p"),e.textContent="Peak hourly frequency:",l=L(),b(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),k(t,s,o),n=!0},p:x,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function hu(r){let e,l,t,n=r[5].stop_name+"",s,o,u,i,f,a=r[5].peak+"",c,m,_,S,y,T=r[5].peak_description+"",P,F,D,N,M,O=r[5].total+"",R,I,j=r[5].total_description+"",U,X;return{c(){e=C("p"),l=v("Stop name: "),t=C("b"),s=v(n),o=L(),u=C("p"),i=v("Peak: "),f=C("b"),c=v(a),m=v(`
        buses during the busiest hour of any day`),_=L(),S=C("p"),y=v("The peak hour is "),P=v(T),F=L(),D=C("p"),N=v("Total buses per day: "),M=C("b"),R=v(O),I=v(`
        (for `),U=v(j),X=v(", the busiest day of the week)")},m(A,Y){$(A,e,Y),h(e,l),h(e,t),h(t,s),$(A,o,Y),$(A,u,Y),h(u,i),h(u,f),h(f,c),h(u,m),$(A,_,Y),$(A,S,Y),h(S,y),h(S,P),$(A,F,Y),$(A,D,Y),h(D,N),h(D,M),h(M,R),h(D,I),h(D,U),h(D,X)},p(A,Y){Y&32&&n!==(n=A[5].stop_name+"")&&G(s,n),Y&32&&a!==(a=A[5].peak+"")&&G(c,a),Y&32&&T!==(T=A[5].peak_description+"")&&G(P,T),Y&32&&O!==(O=A[5].total+"")&&G(R,O),Y&32&&j!==(j=A[5].total_description+"")&&G(U,j)},d(A){A&&(p(e),p(o),p(u),p(_),p(S),p(F),p(D))}}}function bu(r){let e,l;return e=new ce({props:{$$slots:{default:[hu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ku(r){let e,l;const t=[q(Ft),{sourceLayer:Ft},{paint:{"circle-color":he(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[bu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new bt({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&re(q(Ft)),o&0&&{sourceLayer:Ft},o&6&&{paint:{"circle-color":he(["get","peak"],s[2],s[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function wu(r){let e,l,t,n,s,o;function u(a){r[4](a)}let i={$$slots:{right:[du],default:[mu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0]&&Nl(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${Ft}.pmtiles`,$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0],B(()=>l=!1)),e.$set(m),a[0]?f?(f.p(a,c),c&1&&g(f,1)):(f=Nl(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&65&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}let Ft="bus_stops";function vu(r,e,l){let t,n=te.sequential_low_to_high,s=[0,3,10,20,30,100],o=be(Ft);Z(r,o,i=>l(0,t=i));function u(i){t=i,o.set(t)}return[t,n,s,o,u]}class yu extends Q{constructor(e){super(),K(this,e,vu,wu,J,{})}}function Su(r){let e;return{c(){e=v("Crossings")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Cu(r){let e;return{c(){e=v("crossing")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Tu(r){let e,l,t,n,s,o,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Cu]},$$scope:{ctx:r}}}),o=new Xe({}),{c(){e=C("p"),l=v("This shows "),b(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=L(),b(o.$$.fragment)},m(i,f){$(i,e,f),h(e,l),k(t,e,null),h(e,n),$(i,s,f),k(o,i,f),u=!0},p(i,f){const a={};f&32&&(a.$$scope={dirty:f,ctx:i}),t.$set(a)},i(i){u||(g(t.$$.fragment,i),g(o.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(o.$$.fragment,i),u=!1},d(i){i&&(p(e),p(s)),w(t),w(o,i)}}}function Lu(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ol(r){let e,l;return e=new Kt({props:{rows:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Iu(r){let e,l=Pl(r[4])+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&16&&l!==(l=Pl(n[4])+"")&&G(t,l)},d(n){n&&p(e)}}}function Mu(r){let e,l;return e=new ce({props:{$$slots:{default:[Iu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Nu(r){let e,l;const t=[q(Gt),{sourceLayer:Gt},{paint:{"circle-color":Ze(["get","crossing"],{traffic_signals:te.signalized_crossing},te.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Mu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new bt({props:n}),e.$on("click",Pu),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?se(t,[o&0&&re(q(Gt)),o&0&&{sourceLayer:Gt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ou(r){let e,l,t,n,s,o;function u(a){r[3](a)}let i={$$slots:{right:[Lu],default:[Su]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0]&&Ol(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${Gt}.pmtiles`,$$slots:{default:[Nu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0],B(()=>l=!1)),e.$set(m),a[0]?f?(f.p(a,c),c&1&&g(f,1)):(f=Ol(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&33&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}let Gt="crossings";function Pl(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Pu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function ju(r,e,l){let t,n=be(Gt);Z(r,n,u=>l(0,t=u));let s=[["Signalized",te.signalized_crossing],["Other",te.other_crossing]];function o(u){t=u,n.set(t)}return[t,n,s,o]}class Ru extends Q{constructor(e){super(),K(this,e,ju,Ou,J,{})}}function Du(r){let e;return{c(){e=v("Gradients")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Au(r){let e;return{c(){e=v("OS Terrain 50")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Fu(r){let e,l,t,n,s,o,u,i,f,a,c,m,_;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Au]},$$scope:{ctx:r}}}),a=new Le({}),m=new Xe({}),{c(){e=C("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,l=L(),t=C("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,n=L(),s=C("p"),o=v("This layer is built from "),b(u.$$.fragment),i=v(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),f=L(),b(a.$$.fragment),c=L(),b(m.$$.fragment)},m(S,y){$(S,e,y),$(S,l,y),$(S,t,y),$(S,n,y),$(S,s,y),h(s,o),k(u,s,null),h(s,i),$(S,f,y),k(a,S,y),$(S,c,y),k(m,S,y),_=!0},p(S,y){const T={};y&64&&(T.$$scope={dirty:y,ctx:S}),u.$set(T)},i(S){_||(g(u.$$.fragment,S),g(a.$$.fragment,S),g(m.$$.fragment,S),_=!0)},o(S){d(u.$$.fragment,S),d(a.$$.fragment,S),d(m.$$.fragment,S),_=!1},d(S){S&&(p(e),p(l),p(t),p(n),p(s),p(f),p(c)),w(u),w(a,S),w(m,S)}}}function Gu(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function jl(r){let e,l;return e=new qe({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function qu(r){let e,l,t,n=Math.abs(r[5].gradient)/100+"",s,o;return{c(){e=C("p"),l=v("Gradient: "),t=C("b"),s=v(n),o=v(`
        %`)},m(u,i){$(u,e,i),h(e,l),h(e,t),h(t,s),h(e,o)},p(u,i){i&32&&n!==(n=Math.abs(u[5].gradient)/100+"")&&G(s,n)},d(u){u&&p(e)}}}function zu(r){let e,l;return e=new ce({props:{$$slots:{default:[qu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Hu(r){let e,l,t,n;const s=[q(Ve),{sourceLayer:Ve},{manageHoverState:!0},{paint:{"line-color":he(["/",["abs",["get","gradient"]],100],r[2],r[1]),"line-width":Re,"line-opacity":ne(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let o={$$slots:{default:[zu]},$$scope:{ctx:r}};for(let f=0;f<s.length;f+=1)o=le(o,s[f]);e=new de({props:o});const u=[q(Ve+"_arrows"),{sourceLayer:Ve},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:r[0]?"visible":"none"}}];let i={};for(let f=0;f<u.length;f+=1)i=le(i,u[f]);return t=new bn({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(f,a){k(e,f,a),$(f,l,a),k(t,f,a),n=!0},p(f,a){const c=a&7?se(s,[a&0&&re(q(Ve)),a&0&&{sourceLayer:Ve},s[2],a&6&&{paint:{"line-color":he(["/",["abs",["get","gradient"]],100],f[2],f[1]),"line-width":Re,"line-opacity":ne(1,.5)}},a&1&&{layout:{visibility:f[0]?"visible":"none"}}]):{};a&64&&(c.$$scope={dirty:a,ctx:f}),e.$set(c);const m=a&1?se(u,[a&0&&re(q(Ve+"_arrows")),a&0&&{sourceLayer:Ve},u[2],u[3],a&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:f[0]?"visible":"none"}}]):{};t.$set(m)},i(f){n||(g(e.$$.fragment,f),g(t.$$.fragment,f),n=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),n=!1},d(f){f&&p(l),w(e,f),w(t,f)}}}function Eu(r){let e,l,t,n,s,o;function u(a){r[4](a)}let i={$$slots:{right:[Gu],default:[Du]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0]&&jl(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${Ve}.pmtiles`,$$slots:{default:[Hu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0],B(()=>l=!1)),e.$set(m),a[0]?f?(f.p(a,c),c&1&&g(f,1)):(f=jl(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&65&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}let Ve="gradient";function Bu(r,e,l){let t,n=te.gradient_flat_to_steep,s=[0,3,5,8,10,20,100],o=be(Ve);Z(r,o,i=>l(0,t=i));function u(i){t=i,o.set(t)}return[t,n,s,o,u]}class Uu extends Q{constructor(e){super(),K(this,e,Bu,Eu,J,{})}}function Wu(r){let e,l,t;return{c(){e=C("img"),t=v(`
  Cycle parking`),xt(e.src,l=Bs)||z(e,"src",l),z(e,"alt","a logo representing cycle parking")},m(n,s){$(n,e,s),$(n,t,s)},p:x,d(n){n&&(p(e),p(t))}}}function Yu(r){let e;return{c(){e=v("OpenStreetMap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ju(r){let e;return{c(){e=v("OpenStreetMap Carto")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Vu(r){let e,l,t,n,s,o,u,i,f,a,c;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Yu]},$$scope:{ctx:r}}}),i=new ee({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Ju]},$$scope:{ctx:r}}}),a=new Xe({}),{c(){e=C("p"),l=v("Cycle parking, according to "),b(t.$$.fragment),n=v(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),s=L(),o=C("p"),u=v("Icon from "),b(i.$$.fragment),f=L(),b(a.$$.fragment)},m(m,_){$(m,e,_),h(e,l),k(t,e,null),h(e,n),$(m,s,_),$(m,o,_),h(o,u),k(i,o,null),$(m,f,_),k(a,m,_),c=!0},p(m,_){const S={};_&16&&(S.$$scope={dirty:_,ctx:m}),t.$set(S);const y={};_&16&&(y.$$scope={dirty:_,ctx:m}),i.$set(y)},i(m){c||(g(t.$$.fragment,m),g(i.$$.fragment,m),g(a.$$.fragment,m),c=!0)},o(m){d(t.$$.fragment,m),d(i.$$.fragment,m),d(a.$$.fragment,m),c=!1},d(m){m&&(p(e),p(s),p(o),p(f)),w(t),w(i),w(a,m)}}}function Qu(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Vu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ku(r){let e,l,t,n=(r[3].capacity??"unknown")+"",s;return{c(){e=C("p"),l=v("Capacity: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&8&&n!==(n=(o[3].capacity??"unknown")+"")&&G(s,n)},d(o){o&&p(e)}}}function Zu(r){let e,l;return e=new ce({props:{$$slots:{default:[Ku,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Xu(r){let e,l;const t=[q(qt),{sourceLayer:qt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Zu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new bn({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?se(t,[o&0&&re(q(qt)),o&0&&{sourceLayer:qt},o&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function xu(r){let e,l,t,n,s;function o(i){r[2](i)}let u={$$slots:{right:[Qu],default:[Wu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),H.push(()=>E(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${qt}.pmtiles`,$$slots:{default:[Xu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,[f]){const a={};f&16&&(a.$$scope={dirty:f,ctx:i}),!l&&f&1&&(l=!0,a.checked=i[0],B(()=>l=!1)),e.$set(a);const c={};f&17&&(c.$$scope={dirty:f,ctx:i}),n.$set(c)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}let qt="cycle_parking";function ec(r,e,l){let t,n=be(qt);Z(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class tc extends Q{constructor(e){super(),K(this,e,ec,xu,J,{})}}function nc(r){let e;return{c(){e=v("Education")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function lc(r){let e,l,t,n;return t=new Xe({}),{c(){e=C("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,l=L(),b(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),k(t,s,o),n=!0},p:x,i(s){n||(g(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function sc(r){let e,l,t;return l=new $e({props:{$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Rl(r){let e,l,t;return l=new st({props:{$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(l.$$.fragment),_e(e,"border","1px solid black"),_e(e,"padding","8px")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2049&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function rc(r){let e,l,t;return e=new Te({props:{color:te.education.schools}}),{c(){b(e.$$.fragment),l=v(`
        Schools`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function oc(r){let e,l,t;return e=new Te({props:{color:te.education.colleges}}),{c(){b(e.$$.fragment),l=v(`
        Colleges`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function ic(r){let e,l,t;return e=new Te({props:{color:te.education.universities}}),{c(){b(e.$$.fragment),l=v(`
        Universities`)},m(n,s){k(e,n,s),$(n,l,s),t=!0},p:x,i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function fc(r){let e,l,t,n,s,o,u,i,f;function a(T){r[4](T)}let c={$$slots:{default:[rc]},$$scope:{ctx:r}};r[0].school!==void 0&&(c.checked=r[0].school),e=new oe({props:c}),H.push(()=>E(e,"checked",a));function m(T){r[5](T)}let _={$$slots:{default:[oc]},$$scope:{ctx:r}};r[0].college!==void 0&&(_.checked=r[0].college),n=new oe({props:_}),H.push(()=>E(n,"checked",m));function S(T){r[6](T)}let y={$$slots:{default:[ic]},$$scope:{ctx:r}};return r[0].university!==void 0&&(y.checked=r[0].university),u=new oe({props:y}),H.push(()=>E(u,"checked",S)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),o=L(),b(u.$$.fragment)},m(T,P){k(e,T,P),$(T,t,P),k(n,T,P),$(T,o,P),k(u,T,P),f=!0},p(T,P){const F={};P&2048&&(F.$$scope={dirty:P,ctx:T}),!l&&P&1&&(l=!0,F.checked=T[0].school,B(()=>l=!1)),e.$set(F);const D={};P&2048&&(D.$$scope={dirty:P,ctx:T}),!s&&P&1&&(s=!0,D.checked=T[0].college,B(()=>s=!1)),n.$set(D);const N={};P&2048&&(N.$$scope={dirty:P,ctx:T}),!i&&P&1&&(i=!0,N.checked=T[0].university,B(()=>i=!1)),u.$set(N)},i(T){f||(g(e.$$.fragment,T),g(n.$$.fragment,T),g(u.$$.fragment,T),f=!0)},o(T){d(e.$$.fragment,T),d(n.$$.fragment,T),d(u.$$.fragment,T),f=!1},d(T){T&&(p(t),p(o)),w(e,T),w(n,T),w(u,T)}}}function ac(r){let e,l=(r[10].name??"Unnamed institution")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&G(t,l)},d(n){n&&p(e)}}}function uc(r){let e,l;return e=new ce({props:{$$slots:{default:[ac,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&3072&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function cc(r){let e,l;const t=[q(zt),{sourceLayer:zt},{paint:{"fill-color":Ze(["get","type"],{school:te.education.schools,college:te.education.colleges,university:te.education.universities},"grey"),"fill-opacity":ne(.7,1)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[2](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[uc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new Ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&5?se(t,[o&0&&re(q(zt)),o&0&&{sourceLayer:zt},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&5&&{filter:s[2](s[0])},t[5],t[6]]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function $c(r){let e,l,t,n,s,o;function u(a){r[3](a)}let i={$$slots:{right:[sc],default:[nc]},$$scope:{ctx:r}};r[0].show!==void 0&&(i.checked=r[0].show),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0].show&&Rl(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${zt}.pmtiles`,$$slots:{default:[cc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0].show,B(()=>l=!1)),e.$set(m),a[0].show?f?(f.p(a,c),c&1&&g(f,1)):(f=Rl(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&2049&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}let zt="education";function pc(r){return{show:!0,school:r.includes("school"),college:r.includes("college"),university:r.includes("university")}}function mc(r,e,l){let t,n=["school","college","university"],s={show:!1,school:!0,college:!0,university:!0};function o(_){return _.show?n.filter(S=>_[S]).join(","):null}let u=wt(zt,s,o,pc);Z(r,u,_=>l(0,t=_));function i(_){let S=n.filter(y=>_[y]);return["in",["get","type"],["literal",S]]}function f(_){r.$$.not_equal(t.show,_)&&(t.show=_,u.set(t))}function a(_){r.$$.not_equal(t.school,_)&&(t.school=_,u.set(t))}function c(_){r.$$.not_equal(t.college,_)&&(t.college=_,u.set(t))}function m(_){r.$$.not_equal(t.university,_)&&(t.university=_,u.set(t))}return[t,u,i,f,a,c,m]}class _c extends Q{constructor(e){super(),K(this,e,mc,$c,J,{})}}function gc(r){let e,l,t,n;return e=new Te({props:{color:r[4]}}),{c(){b(e.$$.fragment),l=L(),t=v(r[2])},m(s,o){k(e,s,o),$(s,l,o),$(s,t,o),n=!0},p(s,o){(!n||o&4)&&G(t,s[2])},i(s){n||(g(e.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function dc(r){let e;const l=r[6].default,t=mt(l,r,r[8],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&256)&&_t(t,l,n,n[8],e?dt(l,n[8],s,null):gt(n[8]),null)},i(n){e||(g(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function hc(r){let e,l,t;return l=new $e({props:{$$slots:{default:[dc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&256&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function bc(r){let e,l=(r[9].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&514&&l!==(l=(n[9].name??`Unnamed ${n[1]}`)+"")&&G(t,l)},d(n){n&&p(e)}}}function kc(r){let e,l;return e=new ce({props:{$$slots:{default:[bc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&770&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function wc(r){let e,l;const t=[q(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":ne(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[kc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new Ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&25?se(t,[o&1&&re(q(s[0])),o&1&&{sourceLayer:s[0]},o&16&&{paint:{"fill-color":s[4],"fill-opacity":ne(.7,1)}},o&8&&{layout:{visibility:s[3]?"visible":"none"}},t[4],t[5]]):{};o&258&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function vc(r){let e,l,t,n,s;function o(i){r[7](i)}let u={$$slots:{right:[hc],default:[gc]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new oe({props:u}),H.push(()=>E(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${r[0]}.pmtiles`,$$slots:{default:[wc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,[f]){const a={};f&260&&(a.$$scope={dirty:f,ctx:i}),!l&&f&8&&(l=!0,a.checked=i[3],B(()=>l=!1)),e.$set(a);const c={};f&1&&(c.url=`pmtiles://${me()}/v1/${i[0]}.pmtiles`),f&267&&(c.$$scope={dirty:f,ctx:i}),n.$set(c)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}function yc(r,e,l){let t,{$$slots:n={},$$scope:s}=e,{name:o}=e,{singularNoun:u}=e,{pluralNoun:i}=e,f=te[o],a=be(o);Z(r,a,m=>l(3,t=m));function c(m){t=m,a.set(t)}return r.$$set=m=>{"name"in m&&l(0,o=m.name),"singularNoun"in m&&l(1,u=m.singularNoun),"pluralNoun"in m&&l(2,i=m.pluralNoun),"$$scope"in m&&l(8,s=m.$$scope)},[o,u,i,t,f,a,n,c,s]}class As extends Q{constructor(e){super(),K(this,e,yc,vc,J,{name:0,singularNoun:1,pluralNoun:2})}}function Sc(r){let e;return{c(){e=v("hospital")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Cc(r){let e,l,t,n,s,o,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Sc]},$$scope:{ctx:r}}}),o=new Xe({}),{c(){e=C("p"),l=v("This shows "),b(t.$$.fragment),n=v(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),s=L(),b(o.$$.fragment)},m(i,f){$(i,e,f),h(e,l),k(t,e,null),h(e,n),$(i,s,f),k(o,i,f),u=!0},p(i,f){const a={};f&1&&(a.$$scope={dirty:f,ctx:i}),t.$set(a)},i(i){u||(g(t.$$.fragment,i),g(o.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(o.$$.fragment,i),u=!1},d(i){i&&(p(e),p(s)),w(t),w(o,i)}}}function Tc(r){let e,l;return e=new As({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}class Lc extends Q{constructor(e){super(),K(this,e,null,Tc,J,{})}}function Ic(r){let e,l,t;return{c(){e=C("img"),t=v(`
  Railway Stations`),xt(e.src,l=Us)||z(e,"src",l),z(e,"alt","A logo representing a train")},m(n,s){$(n,e,s),$(n,t,s)},p:x,d(n){n&&(p(e),p(t))}}}function Mc(r){let e;return{c(){e=v("railway station")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Nc(r){let e;return{c(){e=v(`National Rail
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Oc(r){let e,l,t,n,s,o,u,i,f,a,c,m;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Mc]},$$scope:{ctx:r}}}),i=new ee({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Nc]},$$scope:{ctx:r}}}),c=new Xe({}),{c(){e=C("p"),l=v("This shows "),b(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=L(),o=C("p"),u=v("Icon from "),b(i.$$.fragment),f=v(". (Note that not all stations shown are National Rail.)"),a=L(),b(c.$$.fragment)},m(_,S){$(_,e,S),h(e,l),k(t,e,null),h(e,n),$(_,s,S),$(_,o,S),h(o,u),k(i,o,null),h(o,f),$(_,a,S),k(c,_,S),m=!0},p(_,S){const y={};S&16&&(y.$$scope={dirty:S,ctx:_}),t.$set(y);const T={};S&16&&(T.$$scope={dirty:S,ctx:_}),i.$set(T)},i(_){m||(g(t.$$.fragment,_),g(i.$$.fragment,_),g(c.$$.fragment,_),m=!0)},o(_){d(t.$$.fragment,_),d(i.$$.fragment,_),d(c.$$.fragment,_),m=!1},d(_){_&&(p(e),p(s),p(o),p(a)),w(t),w(i),w(c,_)}}}function Pc(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Oc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function jc(r){let e,l=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&G(t,l)},d(n){n&&p(e)}}}function Rc(r){let e,l;return e=new ce({props:{$$slots:{default:[jc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Dc(r){let e,l;const t=[q(tn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Rc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new bn({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&1?se(t,[o&0&&re(q(tn)),o&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ac(r){let e,l,t,n,s;function o(i){r[2](i)}let u={$$slots:{right:[Pc],default:[Ic]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),H.push(()=>E(e,"checked",o)),n=new kt({props:{data:`${me()}/v1/${tn}.geojson`,$$slots:{default:[Dc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,[f]){const a={};f&16&&(a.$$scope={dirty:f,ctx:i}),!l&&f&1&&(l=!0,a.checked=i[0],B(()=>l=!1)),e.$set(a);const c={};f&17&&(c.$$scope={dirty:f,ctx:i}),n.$set(c)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}let tn="railway_stations";function Fc(r,e,l){let t,n=be(tn);Z(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Gc extends Q{constructor(e){super(),K(this,e,Fc,Ac,J,{})}}function qc(r){let e;return{c(){e=v("sports pitches")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function zc(r){let e;return{c(){e=v("sports centres")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Hc(r){let e,l,t,n,s,o,u,i,f;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[qc]},$$scope:{ctx:r}}}),s=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[zc]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=C("p"),l=v("This shows "),b(t.$$.fragment),n=v(" and "),b(s.$$.fragment),o=v(" data from OpenStreetMap (as of 9 August 2023)."),u=L(),b(i.$$.fragment)},m(a,c){$(a,e,c),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),$(a,u,c),k(i,a,c),f=!0},p(a,c){const m={};c&1&&(m.$$scope={dirty:c,ctx:a}),t.$set(m);const _={};c&1&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){f||(g(t.$$.fragment,a),g(s.$$.fragment,a),g(i.$$.fragment,a),f=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),d(i.$$.fragment,a),f=!1},d(a){a&&(p(e),p(u)),w(t),w(s),w(i,a)}}}function Ec(r){let e,l;return e=new As({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Hc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}class Bc extends Q{constructor(e){super(),K(this,e,null,Ec,J,{})}}function Uc(r){let e;return{c(){e=v("Stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Wc(r){let e;return{c(){e=v("DfT stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Yc(r){let e;return{c(){e=v("documented by DfT")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Jc(r){let e,l,t,n,s,o,u,i,f,a,c,m,_,S,y,T,P,F,D,N,M,O,R;return t=new ee({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Wc]},$$scope:{ctx:r}}}),P=new ee({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Yc]},$$scope:{ctx:r}}}),O=new Le({}),{c(){e=C("p"),l=v("This layer shows collisions recorded in the "),b(t.$$.fragment),n=v(" dataset. Please note these limitations:"),s=L(),o=C("ul"),u=C("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=L(),f=C("li"),f.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,a=L(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,m=L(),_=C("li"),_.textContent='The "pedestrians" category also include mobility scooters',S=L(),y=C("li"),T=v("All limitations "),b(P.$$.fragment),F=v(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),D=L(),N=C("p"),N.textContent="You can click a point to open the full report, thanks to CycleStreets.",M=L(),b(O.$$.fragment)},m(I,j){$(I,e,j),h(e,l),k(t,e,null),h(e,n),$(I,s,j),$(I,o,j),h(o,u),h(o,i),h(o,f),h(o,a),h(o,c),h(o,m),h(o,_),h(o,S),h(o,y),h(y,T),k(P,y,null),h(y,F),$(I,D,j),$(I,N,j),$(I,M,j),k(O,I,j),R=!0},p(I,j){const U={};j&4194304&&(U.$$scope={dirty:j,ctx:I}),t.$set(U);const X={};j&4194304&&(X.$$scope={dirty:j,ctx:I}),P.$set(X)},i(I){R||(g(t.$$.fragment,I),g(P.$$.fragment,I),g(O.$$.fragment,I),R=!0)},o(I){d(t.$$.fragment,I),d(P.$$.fragment,I),d(O.$$.fragment,I),R=!1},d(I){I&&(p(e),p(s),p(o),p(D),p(N),p(M)),w(t),w(P),w(O,I)}}}function Vc(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Jc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&4194304&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Dl(r){let e,l,t,n,s,o,u,i,f,a,c,m,_;return l=new st({props:{small:!0,$$slots:{default:[xc]},$$scope:{ctx:r}}}),a=new Kt({props:{rows:r[9]}}),{c(){e=C("div"),b(l.$$.fragment),t=L(),n=C("div"),s=v(`Filter years:
      `),o=C("input"),u=v(`
      -
      `),i=C("input"),f=L(),b(a.$$.fragment),z(o,"type","number"),z(o,"min",2017),z(o,"max",2022),z(o,"class","svelte-1ft65rw"),z(i,"type","number"),z(i,"min",2017),z(i,"max",2022),z(i,"class","svelte-1ft65rw"),_e(e,"border","1px solid black"),_e(e,"padding","8px")},m(S,y){$(S,e,y),k(l,e,null),h(e,t),h(e,n),h(n,s),h(n,o),je(o,r[0].minYear),h(n,u),h(n,i),je(i,r[0].maxYear),h(e,f),k(a,e,null),c=!0,m||(_=[He(o,"input",r[15]),He(i,"input",r[16])],m=!0)},p(S,y){const T={};y&4194305&&(T.$$scope={dirty:y,ctx:S}),l.$set(T),y&1&&Vt(o.value)!==S[0].minYear&&je(o,S[0].minYear),y&1&&Vt(i.value)!==S[0].maxYear&&je(i,S[0].maxYear)},i(S){c||(g(l.$$.fragment,S),g(a.$$.fragment,S),c=!0)},o(S){d(l.$$.fragment,S),d(a.$$.fragment,S),c=!1},d(S){S&&p(e),w(l),w(a),m=!1,js(_)}}}function Qc(r){let e;return{c(){e=v("Pedestrians")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Kc(r){let e;return{c(){e=v("Cyclists")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Zc(r){let e;return{c(){e=v("Horse riders")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Xc(r){let e;return{c(){e=v("Other")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function xc(r){let e,l,t,n,s,o,u,i,f,a,c,m;function _(M){r[11](M)}let S={$$slots:{default:[Qc]},$$scope:{ctx:r}};r[0].pedestrians!==void 0&&(S.checked=r[0].pedestrians),e=new oe({props:S}),H.push(()=>E(e,"checked",_));function y(M){r[12](M)}let T={$$slots:{default:[Kc]},$$scope:{ctx:r}};r[0].cyclists!==void 0&&(T.checked=r[0].cyclists),n=new oe({props:T}),H.push(()=>E(n,"checked",y));function P(M){r[13](M)}let F={$$slots:{default:[Zc]},$$scope:{ctx:r}};r[0].horseRiders!==void 0&&(F.checked=r[0].horseRiders),u=new oe({props:F}),H.push(()=>E(u,"checked",P));function D(M){r[14](M)}let N={$$slots:{default:[Xc]},$$scope:{ctx:r}};return r[0].other!==void 0&&(N.checked=r[0].other),a=new oe({props:N}),H.push(()=>E(a,"checked",D)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),o=L(),b(u.$$.fragment),f=L(),b(a.$$.fragment)},m(M,O){k(e,M,O),$(M,t,O),k(n,M,O),$(M,o,O),k(u,M,O),$(M,f,O),k(a,M,O),m=!0},p(M,O){const R={};O&4194304&&(R.$$scope={dirty:O,ctx:M}),!l&&O&1&&(l=!0,R.checked=M[0].pedestrians,B(()=>l=!1)),e.$set(R);const I={};O&4194304&&(I.$$scope={dirty:O,ctx:M}),!s&&O&1&&(s=!0,I.checked=M[0].cyclists,B(()=>s=!1)),n.$set(I);const j={};O&4194304&&(j.$$scope={dirty:O,ctx:M}),!i&&O&1&&(i=!0,j.checked=M[0].horseRiders,B(()=>i=!1)),u.$set(j);const U={};O&4194304&&(U.$$scope={dirty:O,ctx:M}),!c&&O&1&&(c=!0,U.checked=M[0].other,B(()=>c=!1)),a.$set(U)},i(M){m||(g(e.$$.fragment,M),g(n.$$.fragment,M),g(u.$$.fragment,M),g(a.$$.fragment,M),m=!0)},o(M){d(e.$$.fragment,M),d(n.$$.fragment,M),d(u.$$.fragment,M),d(a.$$.fragment,M),m=!1},d(M){M&&(p(t),p(o),p(f)),w(e,M),w(n,M),w(u,M),w(a,M)}}}function Al(r){let e,l,t,n=r[3][r[21].pedestrian_location]+"",s;return{c(){e=C("p"),l=v("Pedestrian location: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&2097152&&n!==(n=o[3][o[21].pedestrian_location]+"")&&G(s,n)},d(o){o&&p(e)}}}function Fl(r){let e,l,t,n=r[4][r[21].pedestrian_movement]+"",s;return{c(){e=C("p"),l=v("Pedestrian movement: "),t=C("b"),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(t,s)},p(o,u){u&2097152&&n!==(n=o[4][o[21].pedestrian_movement]+"")&&G(s,n)},d(o){o&&p(e)}}}function e$(r){let e,l,t,n=r[21].year+"",s,o,u,i,f,a=r[5][r[21].severity]+"",c,m,_,S,y,T=Gl(r[21])+"",P,F,D,N,M,O=r[21].pedestrian_location&&Al(r),R=r[21].pedestrian_movement&&Fl(r);return{c(){e=C("p"),l=v("Year: "),t=C("b"),s=v(n),o=L(),u=C("p"),i=v("Severity: "),f=C("b"),c=v(a),m=L(),_=C("p"),S=v("Casualties: "),y=C("b"),P=v(T),F=L(),O&&O.c(),D=L(),R&&R.c(),N=L(),M=C("p"),M.textContent="Click to open full report in CycleStreets"},m(I,j){$(I,e,j),h(e,l),h(e,t),h(t,s),$(I,o,j),$(I,u,j),h(u,i),h(u,f),h(f,c),$(I,m,j),$(I,_,j),h(_,S),h(_,y),h(y,P),$(I,F,j),O&&O.m(I,j),$(I,D,j),R&&R.m(I,j),$(I,N,j),$(I,M,j)},p(I,j){j&2097152&&n!==(n=I[21].year+"")&&G(s,n),j&2097152&&a!==(a=I[5][I[21].severity]+"")&&G(c,a),j&2097152&&T!==(T=Gl(I[21])+"")&&G(P,T),I[21].pedestrian_location?O?O.p(I,j):(O=Al(I),O.c(),O.m(D.parentNode,D)):O&&(O.d(1),O=null),I[21].pedestrian_movement?R?R.p(I,j):(R=Fl(I),R.c(),R.m(N.parentNode,N)):R&&(R.d(1),R=null)},d(I){I&&(p(e),p(o),p(u),p(m),p(_),p(F),p(D),p(N),p(M)),O&&O.d(I),R&&R.d(I)}}}function t$(r){let e,l;return e=new ce({props:{$$slots:{default:[e$,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&6291456&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function n$(r){let e,l;const t=[q(Ht),{sourceLayer:Ht},{paint:{"circle-color":he(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[1]},{layout:{visibility:r[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[t$]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new bt({props:n}),e.$on("click",r$),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&451?se(t,[o&0&&re(q(Ht)),o&0&&{sourceLayer:Ht},o&448&&{paint:{"circle-color":he(["get","severity"],[1,2,3],[s[6],s[7],s[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&2&&{filter:s[1]},o&1&&{layout:{visibility:s[0].show?"visible":"none"}},t[5],t[6]]):{};o&4194304&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function l$(r){let e,l,t,n,s,o;function u(a){r[10](a)}let i={$$slots:{right:[Vc],default:[Uc]},$$scope:{ctx:r}};r[0].show!==void 0&&(i.checked=r[0].show),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0].show&&Dl(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${Ht}.pmtiles`,$$slots:{default:[n$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&4194304&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0].show,B(()=>l=!1)),e.$set(m),a[0].show?f?(f.p(a,c),c&1&&g(f,1)):(f=Dl(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&4194307&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}let Ht="stats19";function s$(r){let[e,l,t]=r.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Gl(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function r$(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function o$(r,e,l){let t,n,s=["pedestrians","cyclists","horseRiders","other"],o={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function u(I){return I.show?`${s.filter(U=>I[U]).join(",")}/${I.minYear}/${I.maxYear}`:null}let i=wt(Ht,o,u,s$);Z(r,i,I=>l(0,n=I));function f(I,j,U,X,A,Y){let V=["any"];return n.pedestrians&&V.push(["get","pedestrian"]),n.cyclists&&V.push(["get","cyclist"]),n.horseRiders&&V.push(["get","horse_rider"]),n.other&&V.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],V]}let a={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},m={1:"Fatal",2:"Serious",3:"Slight"},_=te.sequential_low_to_high[4],S=te.sequential_low_to_high[2],y=te.sequential_low_to_high[0],T=[["Fatal",_],["Serious",S],["Slight",y]];function P(I){r.$$.not_equal(n.show,I)&&(n.show=I,i.set(n))}function F(I){r.$$.not_equal(n.pedestrians,I)&&(n.pedestrians=I,i.set(n))}function D(I){r.$$.not_equal(n.cyclists,I)&&(n.cyclists=I,i.set(n))}function N(I){r.$$.not_equal(n.horseRiders,I)&&(n.horseRiders=I,i.set(n))}function M(I){r.$$.not_equal(n.other,I)&&(n.other=I,i.set(n))}function O(){n.minYear=Vt(this.value),i.set(n)}function R(){n.maxYear=Vt(this.value),i.set(n)}return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=f(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,a,c,m,_,S,y,T,P,F,D,N,M,O,R]}class i$ extends Q{constructor(e){super(),K(this,e,o$,l$,J,{})}}function f$(r){let e;return{c(){e=v("Vehicle counts")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function a$(r){let e;return{c(){e=v(`DfT road statistics
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function u$(r){let e;return{c(){e=v("methodology")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function c$(r){let e,l,t,n,s,o,u,i,f,a,c;return t=new ee({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[a$]},$$scope:{ctx:r}}}),s=new ee({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[u$]},$$scope:{ctx:r}}}),a=new Le({}),{c(){e=C("p"),l=v("AADF (annual average daily flow) data from "),b(t.$$.fragment),n=v(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(s.$$.fragment),o=v(" for details and caveats about the measurements."),u=L(),i=C("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,f=L(),b(a.$$.fragment)},m(m,_){$(m,e,_),h(e,l),k(t,e,null),h(e,n),k(s,e,null),h(e,o),$(m,u,_),$(m,i,_),$(m,f,_),k(a,m,_),c=!0},p(m,_){const S={};_&128&&(S.$$scope={dirty:_,ctx:m}),t.$set(S);const y={};_&128&&(y.$$scope={dirty:_,ctx:m}),s.$set(y)},i(m){c||(g(t.$$.fragment,m),g(s.$$.fragment,m),g(a.$$.fragment,m),c=!0)},o(m){d(t.$$.fragment,m),d(s.$$.fragment,m),d(a.$$.fragment,m),c=!1},d(m){m&&(p(e),p(u),p(i),p(f)),w(t),w(s),w(a,m)}}}function $$(r){let e,l,t;return l=new $e({props:{$$slots:{default:[c$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&128&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ql(r){let e,l;return e=new qe({props:{colorScale:r[1],limits:r[3]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function p$(r){let e,l=r[6].location+"",t,n,s,o,u=r[6].year+"",i,f,a,c=r[6].motor_vehicles.toLocaleString()+"",m,_,S,y,T=r[6].year+"",P,F,D,N=r[6].pedal_cycles.toLocaleString()+"",M,O,R,I,j,U=r[6].method+"",X;return{c(){e=C("h2"),t=v(l),n=L(),s=C("p"),o=v("Total motor vehicles ("),i=v(u),f=v(` AADF):
        `),a=C("b"),m=v(c),_=L(),S=C("p"),y=v("Total pedal cycles ("),P=v(T),F=v(` AADF):
        `),D=C("b"),M=v(N),O=L(),R=C("p"),I=v("Count method: "),j=C("b"),X=v(U)},m(A,Y){$(A,e,Y),h(e,t),$(A,n,Y),$(A,s,Y),h(s,o),h(s,i),h(s,f),h(s,a),h(a,m),$(A,_,Y),$(A,S,Y),h(S,y),h(S,P),h(S,F),h(S,D),h(D,M),$(A,O,Y),$(A,R,Y),h(R,I),h(R,j),h(j,X)},p(A,Y){Y&64&&l!==(l=A[6].location+"")&&G(t,l),Y&64&&u!==(u=A[6].year+"")&&G(i,u),Y&64&&c!==(c=A[6].motor_vehicles.toLocaleString()+"")&&G(m,c),Y&64&&T!==(T=A[6].year+"")&&G(P,T),Y&64&&N!==(N=A[6].pedal_cycles.toLocaleString()+"")&&G(M,N),Y&64&&U!==(U=A[6].method+"")&&G(X,U)},d(A){A&&(p(e),p(n),p(s),p(_),p(S),p(O),p(R))}}}function m$(r){let e,l;return e=new ce({props:{$$slots:{default:[p$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function _$(r){let e,l;const t=[q(Et),{sourceLayer:Et},{paint:{"circle-color":he(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[m$]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new bt({props:n}),e.$on("click",d$),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&re(q(Et)),o&0&&{sourceLayer:Et},o&6&&{paint:{"circle-color":he(["get","motor_vehicles"],s[2],s[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&128&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function g$(r){let e,l,t,n,s,o;function u(a){r[5](a)}let i={$$slots:{right:[$$],default:[f$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0]&&ql(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${Et}.pmtiles`,$$slots:{default:[_$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&128&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0],B(()=>l=!1)),e.$set(m),a[0]?f?(f.p(a,c),c&1&&g(f,1)):(f=ql(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&129&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}let Et="vehicle_counts";function d$(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function h$(r,e,l){let t,n=te.sequential_low_to_high,s=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],u=be(Et);Z(r,u,f=>l(0,t=f));function i(f){t=f,u.set(t)}return[t,n,s,o,u,i]}class b$ extends Q{constructor(e){super(),K(this,e,h$,g$,J,{})}}function zl(r,e,l){const t=r.slice();return t[6]=e[l],t}function k$(r){let e;return{c(){e=v("Issues & Conflicts")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function w$(r){let e,l,t;return{c(){e=C("p"),e.textContent=`Critical issues and policy conflicts from the Design Assistance Log.
        This is internally collected data.`,l=L(),t=C("p"),t.textContent=`This layer is manually copied from a copy of the DA Log. The data is
        recent as of 10 June 2024.`},m(n,s){$(n,e,s),$(n,l,s),$(n,t,s)},p:x,d(n){n&&(p(e),p(l),p(t))}}}function v$(r){let e,l,t;return l=new $e({props:{$$slots:{default:[w$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Hl(r){let e,l;return e=new Kt({props:{rows:r[3]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function y$(r){let e,l=r[5]["Issue ID"]+"",t,n,s=r[5].Code+"",o,u,i,f=r[5]["Issue Stage"]+"",a;return{c(){e=C("h2"),t=v(l),n=v(" - "),o=v(s),u=L(),i=C("p"),a=v(f)},m(c,m){$(c,e,m),h(e,t),h(e,n),h(e,o),$(c,u,m),$(c,i,m),h(i,a)},p(c,m){m&32&&l!==(l=c[5]["Issue ID"]+"")&&G(t,l),m&32&&s!==(s=c[5].Code+"")&&G(o,s),m&32&&f!==(f=c[5]["Issue Stage"]+"")&&G(a,f)},d(c){c&&(p(e),p(u),p(i))}}}function El(r){let e,l=r[6]+"",t,n,s,o=r[5][r[6]]+"",u,i;return{c(){e=C("p"),t=v(l),n=v(`:
            `),s=C("b"),u=v(o),i=L()},m(f,a){$(f,e,a),h(e,t),h(e,n),h(e,s),h(s,u),h(e,i)},p(f,a){a&32&&o!==(o=f[5][f[6]]+"")&&G(u,o)},d(f){f&&p(e)}}}function S$(r){let e,l=ve(r[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=El(zl(r,l,n));return{c(){e=C("div");for(let n=0;n<t.length;n+=1)t[n].c();_e(e,"max-width","30vw"),_e(e,"max-height","60vh"),_e(e,"overflow","auto")},m(n,s){$(n,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,s){if(s&36){l=ve(n[2]);let o;for(o=0;o<l.length;o+=1){const u=zl(n,l,o);t[o]?t[o].p(u,s):(t[o]=El(u),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&p(e),Ke(t,n)}}}function C$(r){let e,l,t,n;return e=new ce({props:{openOn:"hover",$$slots:{default:[y$,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[S$,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(s,o){k(e,s,o),$(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&544&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const i={};o&544&&(i.$$scope={dirty:o,ctx:s}),t.$set(i)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function T$(r){let e,l;const t=[q(un),{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[C$]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new bt({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&9?se(t,[o&0&&re(q(un)),o&8&&{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(s[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[3],t[4]]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function L$(r){let e,l,t,n,s,o;function u(a){r[4](a)}let i={$$slots:{right:[v$],default:[k$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),H.push(()=>E(e,"checked",u));let f=r[0]&&Hl(r);return s=new kt({props:{data:`${Qt()}/v1/problems.geojson.gz`,$$slots:{default:[T$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),f&&f.c(),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,t,c),f&&f.m(a,c),$(a,n,c),k(s,a,c),o=!0},p(a,[c]){const m={};c&512&&(m.$$scope={dirty:c,ctx:a}),!l&&c&1&&(l=!0,m.checked=a[0],B(()=>l=!1)),e.$set(m),a[0]?f?(f.p(a,c),c&1&&g(f,1)):(f=Hl(a),f.c(),g(f,1),f.m(n.parentNode,n)):f&&(ae(),d(f,1,1,()=>{f=null}),ue());const _={};c&513&&(_.$$scope={dirty:c,ctx:a}),s.$set(_)},i(a){o||(g(e.$$.fragment,a),g(f),g(s.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(f),d(s.$$.fragment,a),o=!1},d(a){a&&(p(t),p(n)),w(e,a),f&&f.d(a),w(s,a)}}}let un="problems";function I$(r,e,l){let t,n=be(un);Z(r,n,i=>l(0,t=i));let s=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],o=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function u(i){t=i,n.set(t)}return[t,n,s,o,u]}class M$ extends Q{constructor(e){super(),K(this,e,I$,L$,J,{})}}function N$(r){let e;function l(s,o){return s[2]<=100?j$:P$}let t=l(r),n=t(r);return{c(){n.c(),e=ye()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},i:x,o:x,d(s){s&&p(e),n.d(s)}}}function O$(r){let e,l;return e=new Ee({props:{$$slots:{default:[R$]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function P$(r){let e;return{c(){e=C("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){$(l,e,t)},p:x,d(l){l&&p(e)}}}function j$(r){let e,l,t;return{c(){e=C("label"),l=v(`Downloading scheme data
      `),t=C("progress"),t.value=r[2],z(t,"class","svelte-q3473n")},m(n,s){$(n,e,s),h(e,l),h(e,t)},p(n,s){s&4&&(t.value=n[2])},d(n){n&&p(e)}}}function R$(r){let e;return{c(){e=v("Load latest scheme data")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function D$(r){let e,l,t,n;const s=[O$,N$],o=[];function u(i,f){return i[0]?i[1]?1:-1:0}return~(e=u(r))&&(l=o[e]=s[e](r)),{c(){l&&l.c(),t=ye()},m(i,f){~e&&o[e].m(i,f),$(i,t,f),n=!0},p(i,[f]){let a=e;e=u(i),e===a?~e&&o[e].p(i,f):(l&&(ae(),d(o[a],1,1,()=>{o[a]=null}),ue()),~e?(l=o[e],l?l.p(i,f):(l=o[e]=s[e](i),l.c()),g(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(g(l),n=!0)},o(i){d(l),n=!1},d(i){i&&p(t),~e&&o[e].d(i)}}}function A$(r,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),s=!0,o=0;async function u(){let f=await Ws(`${Qt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,o=c)});l(2,o=100);let a=new TextDecoder().decode(f);t("all_schemes_output.geojson",a),l(1,s=!1)}Ds(async()=>{n&&await u()});async function i(){l(0,n=!0),await u()}return r.$$set=f=>{"loadFile"in f&&l(4,t=f.loadFile)},[n,s,o,i,t]}class F$ extends Q{constructor(e){super(),K(this,e,A$,D$,J,{loadFile:4})}}const nn=Fe({type:"FeatureCollection",features:[],schemes:{}}),cn=Fe(new Map),Bl=Fe(""),Ul=Fe(""),$n=Fe({type:"FeatureCollection",features:[],schemes:{}}),pn=Fe(new Map),Wl=Fe(""),Yl=Fe("");function G$(r){let e={type:"FeatureCollection",features:[],schemes:{},notes:r.notes},l=new Map,t={type:"FeatureCollection",features:[],schemes:{},notes:r.notes},n=new Map;for(let[s,o]of Object.entries(r.schemes))o.pipeline?(n.set(s,o),t.schemes[s]=o):(l.set(s,o),e.schemes[s]=o);for(let s of r.features){if(!q$(s))continue;let o=s.properties.scheme_reference,u=l.has(o),f=(u?l:n).get(o);f.browse&&(s.properties.funding_programme=f.browse.funding_programme,s.properties.current_milestone=f.browse.current_milestone);let a=u?e:t;s.id=a.features.length+1,a.features.push(s)}nn.set(e),cn.set(l),$n.set(t),pn.set(n)}function q$(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}let Bt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},mn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function Jl(r,e,l){const t=r.slice();return t[30]=e[l],t[31]=e,t[32]=l,t}function z$(r){let e;return{c(){e=v("Filters")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function H$(r){let e;return{c(){e=v("Reset all filters")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function E$(r){let e,l,t,n,s,o,u;e=new Jt({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[W$]},$$scope:{ctx:r}}}),t=new Jt({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[J$]},$$scope:{ctx:r}}});function i(a){r[26](a)}let f={label:"Authority or region",choices:r[9],emptyOption:!0};return r[3]!==void 0&&(f.value=r[3]),s=new ht({props:f}),H.push(()=>E(s,"value",i)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment)},m(a,c){k(e,a,c),$(a,l,c),k(t,a,c),$(a,n,c),k(s,a,c),u=!0},p(a,c){const m={};c[0]&2|c[1]&4&&(m.$$scope={dirty:c,ctx:a}),e.$set(m);const _={};c[0]&1|c[1]&4&&(_.$$scope={dirty:c,ctx:a}),t.$set(_);const S={};c[0]&512&&(S.choices=a[9]),!o&&c[0]&8&&(o=!0,S.value=a[3],B(()=>o=!1)),s.$set(S)},i(a){u||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(l),p(n)),w(e,a),w(t,a),w(s,a)}}}function B$(r){let e,l,t,n,s,o,u,i,f,a,c,m,_,S,y;t=new Jt({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Q$]},$$scope:{ctx:r}}}),s=new Jt({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Z$]},$$scope:{ctx:r}}});function T(N){r[19](N)}let P={label:"Authority or region",choices:r[9],emptyOption:!0};r[3]!==void 0&&(P.value=r[3]),u=new ht({props:P}),H.push(()=>E(u,"value",T)),c=new Jt({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[ep]},$$scope:{ctx:r}}});function F(N){r[21](N)}let D={label:"Current milestone",choices:r[10],emptyOption:!0};return r[5]!==void 0&&(D.value=r[5]),_=new ht({props:D}),H.push(()=>E(_,"value",F)),{c(){e=C("div"),l=C("div"),b(t.$$.fragment),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment),f=L(),a=C("div"),b(c.$$.fragment),m=L(),b(_.$$.fragment),z(l,"class","govuk-grid-column-one-half"),z(a,"class","govuk-grid-column-one-half"),z(e,"class","govuk-grid-row")},m(N,M){$(N,e,M),h(e,l),k(t,l,null),h(l,n),k(s,l,null),h(l,o),k(u,l,null),h(e,f),h(e,a),k(c,a,null),h(a,m),k(_,a,null),y=!0},p(N,M){const O={};M[0]&2|M[1]&4&&(O.$$scope={dirty:M,ctx:N}),t.$set(O);const R={};M[0]&1|M[1]&4&&(R.$$scope={dirty:M,ctx:N}),s.$set(R);const I={};M[0]&512&&(I.choices=N[9]),!i&&M[0]&8&&(i=!0,I.value=N[3],B(()=>i=!1)),u.$set(I);const j={};M[0]&16|M[1]&4&&(j.$$scope={dirty:M,ctx:N}),c.$set(j);const U={};!S&&M[0]&32&&(S=!0,U.value=N[5],B(()=>S=!1)),_.$set(U)},i(N){y||(g(t.$$.fragment,N),g(s.$$.fragment,N),g(u.$$.fragment,N),g(c.$$.fragment,N),g(_.$$.fragment,N),y=!0)},o(N){d(t.$$.fragment,N),d(s.$$.fragment,N),d(u.$$.fragment,N),d(c.$$.fragment,N),d(_.$$.fragment,N),y=!1},d(N){N&&p(e),w(t),w(s),w(u),w(c),w(_)}}}function U$(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function W$(r){let e,l,t,n,s,o;return t=new Ee({props:{$$slots:{default:[U$]},$$scope:{ctx:r}}}),t.$on("click",r[23]),{c(){e=C("input"),l=L(),b(t.$$.fragment),z(e,"type","text"),z(e,"class","govuk-input govuk-input--width-10"),z(e,"id","filterInterventionText")},m(u,i){$(u,e,i),je(e,r[1]),$(u,l,i),k(t,u,i),n=!0,s||(o=He(e,"input",r[22]),s=!0)},p(u,i){i[0]&2&&e.value!==u[1]&&je(e,u[1]);const f={};i[1]&4&&(f.$$scope={dirty:i,ctx:u}),t.$set(f)},i(u){n||(g(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(l)),w(t,u),s=!1,o()}}}function Y$(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function J$(r){let e,l,t,n,s,o;return t=new Ee({props:{$$slots:{default:[Y$]},$$scope:{ctx:r}}}),t.$on("click",r[25]),{c(){e=C("input"),l=L(),b(t.$$.fragment),z(e,"type","text"),z(e,"class","govuk-input govuk-input--width-10"),z(e,"id","filterSchemeText")},m(u,i){$(u,e,i),je(e,r[0]),$(u,l,i),k(t,u,i),n=!0,s||(o=He(e,"input",r[24]),s=!0)},p(u,i){i[0]&1&&e.value!==u[0]&&je(e,u[0]);const f={};i[1]&4&&(f.$$scope={dirty:i,ctx:u}),t.$set(f)},i(u){n||(g(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(l)),w(t,u),s=!1,o()}}}function V$(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Q$(r){let e,l,t,n,s,o;return t=new Ee({props:{$$slots:{default:[V$]},$$scope:{ctx:r}}}),t.$on("click",r[16]),{c(){e=C("input"),l=L(),b(t.$$.fragment),z(e,"type","text"),z(e,"class","govuk-input govuk-input--width-10"),z(e,"id","filterInterventionText")},m(u,i){$(u,e,i),je(e,r[1]),$(u,l,i),k(t,u,i),n=!0,s||(o=He(e,"input",r[15]),s=!0)},p(u,i){i[0]&2&&e.value!==u[1]&&je(e,u[1]);const f={};i[1]&4&&(f.$$scope={dirty:i,ctx:u}),t.$set(f)},i(u){n||(g(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(l)),w(t,u),s=!1,o()}}}function K$(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Z$(r){let e,l,t,n,s,o;return t=new Ee({props:{$$slots:{default:[K$]},$$scope:{ctx:r}}}),t.$on("click",r[18]),{c(){e=C("input"),l=L(),b(t.$$.fragment),z(e,"type","text"),z(e,"class","govuk-input govuk-input--width-10"),z(e,"id","filterSchemeText")},m(u,i){$(u,e,i),je(e,r[0]),$(u,l,i),k(t,u,i),n=!0,s||(o=He(e,"input",r[17]),s=!0)},p(u,i){i[0]&1&&e.value!==u[0]&&je(e,u[0]);const f={};i[1]&4&&(f.$$scope={dirty:i,ctx:u}),t.$set(f)},i(u){n||(g(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(l)),w(t,u),s=!1,o()}}}function X$(r){let e=r[30]+"",l,t;return{c(){l=v(e),t=L()},m(n,s){$(n,l,s),$(n,t,s)},p:x,d(n){n&&(p(l),p(t))}}}function Vl(r){let e,l,t;function n(o){r[20](o,r[30])}let s={$$slots:{default:[X$]},$$scope:{ctx:r}};return r[4][r[30]]!==void 0&&(s.checked=r[4][r[30]]),e=new oe({props:s}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(o,u){k(e,o,u),t=!0},p(o,u){r=o;const i={};u[1]&4&&(i.$$scope={dirty:u,ctx:r}),!l&&u[0]&16&&(l=!0,i.checked=r[4][r[30]],B(()=>l=!1)),e.$set(i)},i(o){t||(g(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function x$(r){let e,l,t=ve(Object.keys(Bt)),n=[];for(let o=0;o<t.length;o+=1)n[o]=Vl(Jl(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ye()},m(o,u){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(o,u);$(o,e,u),l=!0},p(o,u){if(u[0]&16){t=ve(Object.keys(Bt));let i;for(i=0;i<t.length;i+=1){const f=Jl(o,t,i);n[i]?(n[i].p(f,u),g(n[i],1)):(n[i]=Vl(f),n[i].c(),g(n[i],1),n[i].m(e.parentNode,e))}for(ae(),i=t.length;i<n.length;i+=1)s(i);ue()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)g(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&p(e),Ke(n,o)}}}function ep(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[x$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n[0]&16|n[1]&4&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function tp(r){let e;return{c(){e=v("Done")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function np(r){let e,l,t,n,s=r[8].interventions.toLocaleString()+"",o,u,i,f,a=r[7].size.toLocaleString()+"",c,m,_,S,y,T=Ql(r[8].totalLength).toFixed(1)+"",P,F,D,N,M,O,R,I,j,U;N=new Ee({props:{$$slots:{default:[H$]},$$scope:{ctx:r}}}),N.$on("click",r[11]);const X=[B$,E$],A=[];function Y(V,pe){return V[2]=="ATF"?0:1}return O=Y(r),R=A[O]=X[O](r),j=new Ys({props:{$$slots:{default:[tp]},$$scope:{ctx:r}}}),j.$on("click",r[27]),{c(){e=C("p"),e.textContent="Showing:",l=L(),t=C("ul"),n=C("li"),o=v(s),u=v(" interventions"),i=L(),f=C("li"),c=v(a),m=v(" schemes"),_=L(),S=C("li"),y=v("total route length of "),P=v(T),F=v(" miles"),D=L(),b(N.$$.fragment),M=L(),R.c(),I=L(),b(j.$$.fragment)},m(V,pe){$(V,e,pe),$(V,l,pe),$(V,t,pe),h(t,n),h(n,o),h(n,u),h(t,i),h(t,f),h(f,c),h(f,m),h(t,_),h(t,S),h(S,y),h(S,P),h(S,F),$(V,D,pe),k(N,V,pe),$(V,M,pe),A[O].m(V,pe),$(V,I,pe),k(j,V,pe),U=!0},p(V,pe){(!U||pe[0]&256)&&s!==(s=V[8].interventions.toLocaleString()+"")&&G(o,s),(!U||pe[0]&128)&&a!==(a=V[7].size.toLocaleString()+"")&&G(c,a),(!U||pe[0]&256)&&T!==(T=Ql(V[8].totalLength).toFixed(1)+"")&&G(P,T);const De={};pe[1]&4&&(De.$$scope={dirty:pe,ctx:V}),N.$set(De);let ie=O;O=Y(V),O===ie?A[O].p(V,pe):(ae(),d(A[ie],1,1,()=>{A[ie]=null}),ue(),R=A[O],R?R.p(V,pe):(R=A[O]=X[O](V),R.c()),g(R,1),R.m(I.parentNode,I));const W={};pe[1]&4&&(W.$$scope={dirty:pe,ctx:V}),j.$set(W)},i(V){U||(g(N.$$.fragment,V),g(R),g(j.$$.fragment,V),U=!0)},o(V){d(N.$$.fragment,V),d(R),d(j.$$.fragment,V),U=!1},d(V){V&&(p(e),p(l),p(t),p(D),p(M),p(I)),w(N,V),A[O].d(V),w(j,V)}}}function lp(r){let e,l,t,n,s;e=new Ee({props:{$$slots:{default:[z$]},$$scope:{ctx:r}}}),e.$on("click",r[14]);function o(i){r[28](i)}let u={title:`Filter ${r[2]} schemes`,$$slots:{default:[np]},$$scope:{ctx:r}};return r[6]!==void 0&&(u.open=r[6]),t=new Ls({props:u}),H.push(()=>E(t,"open",o)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,f){k(e,i,f),$(i,l,f),k(t,i,f),s=!0},p(i,f){const a={};f[1]&4&&(a.$$scope={dirty:f,ctx:i}),e.$set(a);const c={};f[0]&4&&(c.title=`Filter ${i[2]} schemes`),f[0]&1023|f[1]&4&&(c.$$scope={dirty:f,ctx:i}),!n&&f[0]&64&&(n=!0,c.open=i[6],B(()=>n=!1)),t.$set(c)},i(i){s||(g(e.$$.fragment,i),g(t.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),s=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function sp(r){var t;let e=new Set;for(let n of r.values())(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Ql(r){return r*621371e-9}function rp(r,e,l){let t,{source:n}=e,{schemes:s}=e,{schemesGj:o}=e,{filterSchemeText:u}=e,{filterInterventionText:i}=e,f=!1,a=new Set,c={interventions:0,totalLength:0},m=Object.keys(mn).map(ie=>[ie,ie]),_="",S=Object.fromEntries(Object.keys(Bt).map(ie=>[ie,!0])),y="";function T(ie,W,ut,xe,vt){let et=ie.toLowerCase(),rt=W.toLowerCase(),Ut=we=>{var tt,Wt,ct,yt;if(et&&!((tt=we.properties.name)!=null&&tt.toLowerCase().includes(et))&&!((Wt=we.properties.description)!=null&&Wt.toLowerCase().includes(et)))return!1;let Ie=s.get(we.properties.scheme_reference);return!(ut&&((ct=Ie.browse)==null?void 0:ct.authority_or_region)!=ut||n=="ATF"&&!xe[Ie.browse.funding_programme]||vt&&((yt=Ie.browse)==null?void 0:yt.current_milestone)!=vt||rt&&!Ie.scheme_reference.toLowerCase().includes(rt)&&!(Ie.scheme_name??"").toLowerCase().includes(rt))};l(7,a=new Set(o.features.filter(Ut).map(we=>we.properties.scheme_reference))),l(8,c={interventions:0,totalLength:0});let Zt=we=>{var Ie,tt;return!(!a.has(we.properties.scheme_reference)||et&&!((Ie=we.properties.name)!=null&&Ie.toLowerCase().includes(et))&&!((tt=we.properties.description)!=null&&tt.toLowerCase().includes(et)))};for(let we of o.features)Zt(we)?(delete we.properties.hide_while_editing,l(8,c.interventions++,c),we.geometry.type=="LineString"&&we.properties.length_meters&&l(8,c.totalLength+=we.properties.length_meters,c)):we.properties.hide_while_editing=!0;l(12,o),l(8,c)}function P(){l(3,_=""),l(4,S=Object.fromEntries(Object.keys(Bt).map(ie=>[ie,!0]))),l(5,y=""),l(1,i=""),l(0,u="")}const F=()=>l(6,f=!0);function D(){i=this.value,l(1,i)}const N=()=>l(1,i="");function M(){u=this.value,l(0,u)}const O=()=>l(0,u="");function R(ie){_=ie,l(3,_)}function I(ie,W){r.$$.not_equal(S[W],ie)&&(S[W]=ie,l(4,S))}function j(ie){y=ie,l(5,y)}function U(){i=this.value,l(1,i)}const X=()=>l(1,i="");function A(){u=this.value,l(0,u)}const Y=()=>l(0,u="");function V(ie){_=ie,l(3,_)}const pe=()=>l(6,f=!1);function De(ie){f=ie,l(6,f)}return r.$$set=ie=>{"source"in ie&&l(2,n=ie.source),"schemes"in ie&&l(13,s=ie.schemes),"schemesGj"in ie&&l(12,o=ie.schemesGj),"filterSchemeText"in ie&&l(0,u=ie.filterSchemeText),"filterInterventionText"in ie&&l(1,i=ie.filterInterventionText)},r.$$.update=()=>{r.$$.dirty[0]&8192&&l(9,t=sp(s)),r.$$.dirty[0]&59&&T(i,u,_,S,y)},[u,i,n,_,S,y,f,a,c,t,m,P,o,s,F,D,N,M,O,R,I,j,U,X,A,Y,V,pe,De]}class Fs extends Q{constructor(e){super(),K(this,e,rp,lp,J,{source:2,schemes:13,schemesGj:12,filterSchemeText:0,filterInterventionText:1},null,[-1,-1])}}function Kl(r){let e,l,t,n=r[0].status+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Status",t=v(`
    : `),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&1&&n!==(n=o[0].status+"")&&G(s,n)},d(o){o&&p(e)}}}function Zl(r){let e,l,t,n=r[0].timescale+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Timescale",t=v(`
    : `),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&1&&n!==(n=o[0].timescale+"")&&G(s,n)},d(o){o&&p(e)}}}function Xl(r){let e,l,t,n=r[0].timescale_year+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Estimated completion year",t=v(`
    : `),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&1&&n!==(n=o[0].timescale_year+"")&&G(s,n)},d(o){o&&p(e)}}}function xl(r){let e,l,t,n=r[0].year_published+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Scheme most recently published",t=v(`
    : `),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&1&&n!==(n=o[0].year_published+"")&&G(s,n)},d(o){o&&p(e)}}}function es(r){let e,l,t,n=r[0].year_consulted+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Scheme most recently consulted on",t=v(`
    : `),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&1&&n!==(n=o[0].year_consulted+"")&&G(s,n)},d(o){o&&p(e)}}}function op(r){let e,l,t,n,s,o=r[0].status&&Kl(r),u=r[0].timescale&&Zl(r),i=r[0].timescale_year&&Xl(r),f=r[0].year_published&&xl(r),a=r[0].year_consulted&&es(r);return{c(){o&&o.c(),e=L(),u&&u.c(),l=L(),i&&i.c(),t=L(),f&&f.c(),n=L(),a&&a.c(),s=ye()},m(c,m){o&&o.m(c,m),$(c,e,m),u&&u.m(c,m),$(c,l,m),i&&i.m(c,m),$(c,t,m),f&&f.m(c,m),$(c,n,m),a&&a.m(c,m),$(c,s,m)},p(c,[m]){c[0].status?o?o.p(c,m):(o=Kl(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[0].timescale?u?u.p(c,m):(u=Zl(c),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),c[0].timescale_year?i?i.p(c,m):(i=Xl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?f?f.p(c,m):(f=xl(c),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null),c[0].year_consulted?a?a.p(c,m):(a=es(c),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},i:x,o:x,d(c){c&&(p(e),p(l),p(t),p(n),p(s)),o&&o.d(c),u&&u.d(c),i&&i.d(c),f&&f.d(c),a&&a.d(c)}}}function ip(r,e,l){let{props:t}=e;return r.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Gs extends Q{constructor(e){super(),K(this,e,ip,op,J,{props:0})}}function ts(r){let e,l,t,n=r[0].budget.toLocaleString()+"",s,o;return{c(){e=C("p"),l=C("b"),l.textContent="Cost",t=v(`
    : `),s=v(n),o=v(`
    GBP`)},m(u,i){$(u,e,i),h(e,l),h(e,t),h(e,s),h(e,o)},p(u,i){i&1&&n!==(n=u[0].budget.toLocaleString()+"")&&G(s,n)},d(u){u&&p(e)}}}function ns(r){let e;return{c(){e=C("p"),e.textContent="Development is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ls(r){let e;return{c(){e=C("p"),e.textContent="Construction is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ss(r){let e,l,t,n;return{c(){e=C("p"),l=C("b"),l.textContent="Funding sources",t=v(`
    : `),n=v(r[1])},m(s,o){$(s,e,o),h(e,l),h(e,t),h(e,n)},p(s,o){o&2&&G(n,s[1])},d(s){s&&p(e)}}}function fp(r){let e,l,t,n,s=r[0].budget&&ts(r),o=r[0].development_funded&&ns(),u=r[0].construction_funded&&ls(),i=r[1]&&ss(r);return{c(){s&&s.c(),e=L(),o&&o.c(),l=L(),u&&u.c(),t=L(),i&&i.c(),n=ye()},m(f,a){s&&s.m(f,a),$(f,e,a),o&&o.m(f,a),$(f,l,a),u&&u.m(f,a),$(f,t,a),i&&i.m(f,a),$(f,n,a)},p(f,[a]){f[0].budget?s?s.p(f,a):(s=ts(f),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),f[0].development_funded?o||(o=ns(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),f[0].construction_funded?u||(u=ls(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),f[1]?i?i.p(f,a):(i=ss(f),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:x,o:x,d(f){f&&(p(e),p(l),p(t),p(n)),s&&s.d(f),o&&o.d(f),u&&u.d(f),i&&i.d(f)}}}function ap(r){if(!r.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])r.funding_sources[l]&&e.push(l.toUpperCase());return r.funding_sources.other&&e.push(r.funding_sources.other),e.join(", ")}function up(r,e,l){let t,{props:n}=e;return r.$$set=s=>{"props"in s&&l(0,n=s.props)},r.$$.update=()=>{r.$$.dirty&1&&l(1,t=ap(n))},[n,t]}class qs extends Q{constructor(e){super(),K(this,e,up,fp,J,{props:0})}}function rn(r){const e=r.slice(),l=e[5].pipeline;return e[12]=l,e}function on(r){const e=r.slice(),l=e[1].pipeline;return e[12]=l,e}function rs(r){let e,l,t,n=An(r[1].length_meters)+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Length",t=v(`
        : `),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&2&&n!==(n=An(o[1].length_meters)+"")&&G(s,n)},d(o){o&&p(e)}}}function os(r){let e,l=ft(r[1].description,r[3])+"";return{c(){e=C("p")},m(t,n){$(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=ft(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&p(e)}}}function is(r){let e,l,t,n,s,o,u,i=r[12].atf4_type&&fs(r),f=r[12].accuracy&&as(r),a=r[12].is_alternative&&us();return n=new qs({props:{props:r[12]}}),o=new Gs({props:{props:r[12]}}),{c(){i&&i.c(),e=L(),f&&f.c(),l=L(),a&&a.c(),t=L(),b(n.$$.fragment),s=L(),b(o.$$.fragment)},m(c,m){i&&i.m(c,m),$(c,e,m),f&&f.m(c,m),$(c,l,m),a&&a.m(c,m),$(c,t,m),k(n,c,m),$(c,s,m),k(o,c,m),u=!0},p(c,m){c[12].atf4_type?i?i.p(c,m):(i=fs(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].accuracy?f?f.p(c,m):(f=as(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[12].is_alternative?a||(a=us(),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null);const _={};m&2&&(_.props=c[12]),n.$set(_);const S={};m&2&&(S.props=c[12]),o.$set(S)},i(c){u||(g(n.$$.fragment,c),g(o.$$.fragment,c),u=!0)},o(c){d(n.$$.fragment,c),d(o.$$.fragment,c),u=!1},d(c){c&&(p(e),p(l),p(t),p(s)),i&&i.d(c),f&&f.d(c),a&&a.d(c),w(n,c),w(o,c)}}}function fs(r){let e,l,t,n=r[12].atf4_type+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="ATF4 type",t=v(`
          : `),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&2&&n!==(n=o[12].atf4_type+"")&&G(s,n)},d(o){o&&p(e)}}}function as(r){let e,l,t,n=r[12].accuracy+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Accuracy",t=v(`
          : `),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&2&&n!==(n=o[12].accuracy+"")&&G(s,n)},d(o){o&&p(e)}}}function us(r){let e;return{c(){e=C("p"),e.textContent="Represents an alternative route"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function cs(r){var o;let e,l,t,n=((o=r[5].browse)==null?void 0:o.capital_scheme_id)+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Capital scheme ID",t=v(`
        : `),s=v(n)},m(u,i){$(u,e,i),h(e,l),h(e,t),h(e,s)},p(u,i){var f;i&32&&n!==(n=((f=u[5].browse)==null?void 0:f.capital_scheme_id)+"")&&G(s,n)},d(u){u&&p(e)}}}function $s(r){var o;let e,l,t,n=((o=r[5].browse)==null?void 0:o.current_milestone)+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Current milestone",t=v(`
        : `),s=v(n)},m(u,i){$(u,e,i),h(e,l),h(e,t),h(e,s)},p(u,i){var f;i&32&&n!==(n=((f=u[5].browse)==null?void 0:f.current_milestone)+"")&&G(s,n)},d(u){u&&p(e)}}}function ps(r){let e,l,t,n,s,o,u,i=r[12].scheme_type&&ms(r),f=r[12].atf4_lead_type&&_s(r),a=r[12].scheme_description&&gs(r);return n=new qs({props:{props:r[12]}}),o=new Gs({props:{props:r[12]}}),{c(){i&&i.c(),e=L(),f&&f.c(),l=L(),a&&a.c(),t=L(),b(n.$$.fragment),s=L(),b(o.$$.fragment)},m(c,m){i&&i.m(c,m),$(c,e,m),f&&f.m(c,m),$(c,l,m),a&&a.m(c,m),$(c,t,m),k(n,c,m),$(c,s,m),k(o,c,m),u=!0},p(c,m){c[12].scheme_type?i?i.p(c,m):(i=ms(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].atf4_lead_type?f?f.p(c,m):(f=_s(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[12].scheme_description?a?a.p(c,m):(a=gs(c),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null);const _={};m&32&&(_.props=c[12]),n.$set(_);const S={};m&32&&(S.props=c[12]),o.$set(S)},i(c){u||(g(n.$$.fragment,c),g(o.$$.fragment,c),u=!0)},o(c){d(n.$$.fragment,c),d(o.$$.fragment,c),u=!1},d(c){c&&(p(e),p(l),p(t),p(s)),i&&i.d(c),f&&f.d(c),a&&a.d(c),w(n,c),w(o,c)}}}function ms(r){let e,l,t,n=r[12].scheme_type+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Scheme type",t=v(`
          : `),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&32&&n!==(n=o[12].scheme_type+"")&&G(s,n)},d(o){o&&p(e)}}}function _s(r){let e,l,t,n=r[12].atf4_lead_type+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="ATF4 lead type",t=v(`
          : `),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&32&&n!==(n=o[12].atf4_lead_type+"")&&G(s,n)},d(o){o&&p(e)}}}function gs(r){let e,l,t,n=r[12].scheme_description+"",s;return{c(){e=C("p"),l=C("b"),l.textContent="Descripton",t=v(`
          : `),s=v(n)},m(o,u){$(o,e,u),h(e,l),h(e,t),h(e,s)},p(o,u){u&32&&n!==(n=o[12].scheme_description+"")&&G(s,n)},d(o){o&&p(e)}}}function cp(r){let e;return{c(){e=v("Zoom to show entire scheme")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $p(r){let e;return{c(){e=v("Edit a copy of this scheme")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ds(r){var yn,Sn,Cn,Tn;let e,l,t,n,s,o,u,i=ft(r[1].name,r[3])+"",f,a=r[1].intervention_type+"",c,m,_,S,y,T,P,F,D,N=r[0].toUpperCase()+"",M,O,R,I,j,U,X,A=ft(r[5].scheme_name??"",r[2])+"",Y,V,pe,De,ie,W=ft(r[1].scheme_reference,r[2])+"",ut,xe,vt,et,rt=((yn=r[5].browse)==null?void 0:yn.authority_or_region)+"",Ut,Zt,we,Ie,tt,Wt,ct=((Sn=r[5].browse)==null?void 0:Sn.funding_programme)+"",yt,wn,ln,sn,ot,vn,it,ze,Me=r[1].length_meters&&rs(r),Ne=r[1].description&&os(r),Se=r[1].pipeline&&is(on(r)),Oe=((Cn=r[5].browse)==null?void 0:Cn.capital_scheme_id)&&cs(r),Pe=((Tn=r[5].browse)==null?void 0:Tn.current_milestone)&&$s(r),Ce=r[5].pipeline&&ps(rn(r));return ot=new Ee({props:{$$slots:{default:[cp]},$$scope:{ctx:r}}}),ot.$on("click",r[6]),it=new Ee({props:{$$slots:{default:[$p]},$$scope:{ctx:r}}}),it.$on("click",r[7]),{c(){e=C("div"),l=C("h2"),l.textContent="Intervention",t=L(),n=C("p"),s=C("b"),s.textContent="Name",o=v(`
      : `),u=new pt(!1),f=v(" ("),c=v(a),m=v(")"),_=L(),Me&&Me.c(),S=L(),Ne&&Ne.c(),y=L(),Se&&Se.c(),T=L(),P=C("hr"),F=L(),D=C("h2"),M=v(N),O=v(" Scheme"),R=L(),I=C("p"),j=C("b"),j.textContent="Scheme name",U=v(`
      : `),X=new pt(!1),Y=L(),V=C("p"),pe=C("b"),pe.textContent="Scheme reference",De=v(`
      : `),ie=new pt(!1),ut=L(),xe=C("p"),vt=C("b"),vt.textContent="Authority or region",et=v(`
      : `),Ut=v(rt),Zt=L(),Oe&&Oe.c(),we=L(),Ie=C("p"),tt=C("b"),tt.textContent="Funding programme",Wt=v(`
      : `),yt=v(ct),wn=L(),Pe&&Pe.c(),ln=L(),Ce&&Ce.c(),sn=L(),b(ot.$$.fragment),vn=L(),b(it.$$.fragment),u.a=f,X.a=null,ie.a=null,_e(e,"max-width","30vw"),_e(e,"max-height","60vh"),_e(e,"overflow","auto")},m(fe,ke){$(fe,e,ke),h(e,l),h(e,t),h(e,n),h(n,s),h(n,o),u.m(i,n),h(n,f),h(n,c),h(n,m),h(e,_),Me&&Me.m(e,null),h(e,S),Ne&&Ne.m(e,null),h(e,y),Se&&Se.m(e,null),h(e,T),h(e,P),h(e,F),h(e,D),h(D,M),h(D,O),h(e,R),h(e,I),h(I,j),h(I,U),X.m(A,I),h(e,Y),h(e,V),h(V,pe),h(V,De),ie.m(W,V),h(e,ut),h(e,xe),h(xe,vt),h(xe,et),h(xe,Ut),h(e,Zt),Oe&&Oe.m(e,null),h(e,we),h(e,Ie),h(Ie,tt),h(Ie,Wt),h(Ie,yt),h(e,wn),Pe&&Pe.m(e,null),h(e,ln),Ce&&Ce.m(e,null),h(e,sn),k(ot,e,null),h(e,vn),k(it,e,null),r[10](e),ze=!0},p(fe,ke){var Mn,Nn,On,Pn;(!ze||ke&10)&&i!==(i=ft(fe[1].name,fe[3])+"")&&u.p(i),(!ze||ke&2)&&a!==(a=fe[1].intervention_type+"")&&G(c,a),fe[1].length_meters?Me?Me.p(fe,ke):(Me=rs(fe),Me.c(),Me.m(e,S)):Me&&(Me.d(1),Me=null),fe[1].description?Ne?Ne.p(fe,ke):(Ne=os(fe),Ne.c(),Ne.m(e,y)):Ne&&(Ne.d(1),Ne=null),fe[1].pipeline?Se?(Se.p(on(fe),ke),ke&2&&g(Se,1)):(Se=is(on(fe)),Se.c(),g(Se,1),Se.m(e,T)):Se&&(ae(),d(Se,1,1,()=>{Se=null}),ue()),(!ze||ke&1)&&N!==(N=fe[0].toUpperCase()+"")&&G(M,N),(!ze||ke&36)&&A!==(A=ft(fe[5].scheme_name??"",fe[2])+"")&&X.p(A),(!ze||ke&6)&&W!==(W=ft(fe[1].scheme_reference,fe[2])+"")&&ie.p(W),(!ze||ke&32)&&rt!==(rt=((Mn=fe[5].browse)==null?void 0:Mn.authority_or_region)+"")&&G(Ut,rt),(Nn=fe[5].browse)!=null&&Nn.capital_scheme_id?Oe?Oe.p(fe,ke):(Oe=cs(fe),Oe.c(),Oe.m(e,we)):Oe&&(Oe.d(1),Oe=null),(!ze||ke&32)&&ct!==(ct=((On=fe[5].browse)==null?void 0:On.funding_programme)+"")&&G(yt,ct),(Pn=fe[5].browse)!=null&&Pn.current_milestone?Pe?Pe.p(fe,ke):(Pe=$s(fe),Pe.c(),Pe.m(e,ln)):Pe&&(Pe.d(1),Pe=null),fe[5].pipeline?Ce?(Ce.p(rn(fe),ke),ke&32&&g(Ce,1)):(Ce=ps(rn(fe)),Ce.c(),g(Ce,1),Ce.m(e,sn)):Ce&&(ae(),d(Ce,1,1,()=>{Ce=null}),ue());const Ln={};ke&8192&&(Ln.$$scope={dirty:ke,ctx:fe}),ot.$set(Ln);const In={};ke&8192&&(In.$$scope={dirty:ke,ctx:fe}),it.$set(In)},i(fe){ze||(g(Se),g(Ce),g(ot.$$.fragment,fe),g(it.$$.fragment,fe),ze=!0)},o(fe){d(Se),d(Ce),d(ot.$$.fragment,fe),d(it.$$.fragment,fe),ze=!1},d(fe){fe&&p(e),Me&&Me.d(),Ne&&Ne.d(),Se&&Se.d(),Oe&&Oe.d(),Pe&&Pe.d(),Ce&&Ce.d(),w(ot),w(it),r[10](null)}}}function pp(r){let e=r[1],l,t,n=ds(r);return{c(){n.c(),l=ye()},m(s,o){n.m(s,o),$(s,l,o),t=!0},p(s,[o]){o&2&&J(e,e=s[1])?(ae(),d(n,1,1,x),ue(),n=ds(s),n.c(),g(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(g(n),t=!0)},o(s){d(n),t=!1},d(s){s&&p(l),n.d(s)}}}function ft(r,e){return e?r.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):r}function mp(r,e,l){let t,n;Z(r,dn,y=>l(11,n=y));let{source:s}=e,{props:o}=e,{schemes:u}=e,{schemesGj:i}=e,{filterSchemeText:f}=e,{filterInterventionText:a}=e,c;Js(()=>{c&&l(4,c.scrollTop=0,c)});function m(){let y={type:"FeatureCollection",features:i.features.filter(T=>T.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(sr(y),{padding:20,animate:!1})}function _(){var F,D;let y={type:"FeatureCollection",features:i.features.filter(N=>N.properties.scheme_reference==t.scheme_reference),schemes:{}};y.schemes[t.scheme_reference]=t;let T=((F=t.browse)==null?void 0:F.authority_or_region)||"unknown authority",P=t.pipeline?"pipeline":"v1";P=="pipeline"&&(T+="_pipeline"),Vs(T,JSON.stringify(y)),window.open(`scheme.html?authority=${(D=t.browse)==null?void 0:D.authority_or_region}&schema=${P}`,"_blank")}function S(y){H[y?"unshift":"push"](()=>{c=y,l(4,c)})}return r.$$set=y=>{"source"in y&&l(0,s=y.source),"props"in y&&l(1,o=y.props),"schemes"in y&&l(8,u=y.schemes),"schemesGj"in y&&l(9,i=y.schemesGj),"filterSchemeText"in y&&l(2,f=y.filterSchemeText),"filterInterventionText"in y&&l(3,a=y.filterInterventionText)},r.$$.update=()=>{r.$$.dirty&258&&l(5,t=u.get(o.scheme_reference))},[s,o,f,a,c,t,m,_,u,i,S]}class kn extends Q{constructor(e){super(),K(this,e,mp,pp,J,{source:0,props:1,schemes:8,schemesGj:9,filterSchemeText:2,filterInterventionText:3})}}function _p(r){let e,l=r[10].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&p(e)}}}function gp(r){let e,l;return e=new kn({props:{source:r[0],props:r[10],schemesGj:r[3],schemes:r[2],filterSchemeText:r[4],filterInterventionText:r[5]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.source=t[0]),n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function dp(r){let e,l,t,n;return e=new ce({props:{popupClass:"border-popup",$$slots:{default:[_p,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[gp,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(s,o){k(e,s,o),$(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&3072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const i={};o&3133&&(i.$$scope={dirty:o,ctx:s}),t.$set(i)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function hp(r){let e,l=r[10].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&p(e)}}}function bp(r){let e,l;return e=new kn({props:{source:r[0],props:r[10],schemesGj:r[3],schemes:r[2],filterSchemeText:r[4],filterInterventionText:r[5]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.source=t[0]),n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function kp(r){let e,l,t,n;return e=new ce({props:{popupClass:"border-popup",$$slots:{default:[hp,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[bp,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(s,o){k(e,s,o),$(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&3072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const i={};o&3133&&(i.$$scope={dirty:o,ctx:s}),t.$set(i)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function wp(r){let e,l=r[10].name+"",t;return{c(){e=C("p"),t=v(l)},m(n,s){$(n,e,s),h(e,t)},p(n,s){s&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&p(e)}}}function vp(r){let e,l;return e=new kn({props:{source:r[0],props:r[10],schemesGj:r[3],schemes:r[2],filterSchemeText:r[4],filterInterventionText:r[5]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.source=t[0]),n&1024&&(s.props=t[10]),n&8&&(s.schemesGj=t[3]),n&4&&(s.schemes=t[2]),n&16&&(s.filterSchemeText=t[4]),n&32&&(s.filterInterventionText=t[5]),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function yp(r){let e,l,t,n;return e=new ce({props:{popupClass:"border-popup",$$slots:{default:[wp,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[vp,({props:s})=>({10:s}),({props:s})=>s?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(s,o){k(e,s,o),$(s,l,o),k(t,s,o),n=!0},p(s,o){const u={};o&3072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const i={};o&3133&&(i.$$scope={dirty:o,ctx:s}),t.$set(i)},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function Sp(r){let e,l,t,n,s,o,u,i,f,a;const c=[q(`${r[0]}-interventions-points`),{filter:["all",Fn,r[8],r[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[6],"circle-radius":Gn,"circle-opacity":ne(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let m={$$slots:{default:[dp]},$$scope:{ctx:r}};for(let M=0;M<c.length;M+=1)m=le(m,c[M]);e=new bt({props:m});const _=[q(`${r[0]}-interventions-lines`),{filter:["all",qn,r[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[6],"line-width":Yt,"line-opacity":ne(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let S={$$slots:{default:[kp]},$$scope:{ctx:r}};for(let M=0;M<_.length;M+=1)S=le(S,_[M]);t=new de({props:S});const y=[q(`${r[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Yt,"circle-opacity":0,"circle-stroke-color":Qe.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[1]?"visible":"none"}}];let T={};for(let M=0;M<y.length;M+=1)T=le(T,y[M]);s=new bt({props:T});const P=[q(`${r[0]}-interventions-polygons`),{filter:["all",Xt,r[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[6],"fill-opacity":ne(.2,.5)}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let F={$$slots:{default:[yp]},$$scope:{ctx:r}};for(let M=0;M<P.length;M+=1)F=le(F,P[M]);u=new Ge({props:F});const D=[q(`${r[0]}-interventions-polygons-outlines`),{filter:["all",Xt,r[8]]},{paint:{"line-color":r[6],"line-opacity":.5,"line-width":.7*Yt}},{layout:{visibility:r[1]?"visible":"none"}}];let N={};for(let M=0;M<D.length;M+=1)N=le(N,D[M]);return f=new de({props:N}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment),i=L(),b(f.$$.fragment)},m(M,O){k(e,M,O),$(M,l,O),k(t,M,O),$(M,n,O),k(s,M,O),$(M,o,O),k(u,M,O),$(M,i,O),k(f,M,O),a=!0},p(M,O){const R=O&835?se(c,[O&1&&re(q(`${M[0]}-interventions-points`)),O&768&&{filter:["all",Fn,M[8],M[9]]},c[2],c[3],O&64&&{paint:{"circle-color":M[6],"circle-radius":Gn,"circle-opacity":ne(1,.5)}},O&2&&{layout:{visibility:M[1]?"visible":"none"}},c[6]]):{};O&2109&&(R.$$scope={dirty:O,ctx:M}),e.$set(R);const I=O&323?se(_,[O&1&&re(q(`${M[0]}-interventions-lines`)),O&256&&{filter:["all",qn,M[8]]},_[2],_[3],O&64&&{paint:{"line-color":M[6],"line-width":Yt,"line-opacity":ne(1,.5)}},O&2&&{layout:{visibility:M[1]?"visible":"none"}},_[6]]):{};O&2109&&(I.$$scope={dirty:O,ctx:M}),t.$set(I);const j=O&3?se(y,[O&1&&re(q(`${M[0]}-interventions-lines-endpoints`)),y[1],y[2],O&2&&{layout:{visibility:M[1]?"visible":"none"}}]):{};s.$set(j);const U=O&323?se(P,[O&1&&re(q(`${M[0]}-interventions-polygons`)),O&256&&{filter:["all",Xt,M[8]]},P[2],P[3],O&64&&{paint:{"fill-color":M[6],"fill-opacity":ne(.2,.5)}},O&2&&{layout:{visibility:M[1]?"visible":"none"}},P[6]]):{};O&2109&&(U.$$scope={dirty:O,ctx:M}),u.$set(U);const X=O&323?se(D,[O&1&&re(q(`${M[0]}-interventions-polygons-outlines`)),O&256&&{filter:["all",Xt,M[8]]},O&64&&{paint:{"line-color":M[6],"line-opacity":.5,"line-width":.7*Yt}},O&2&&{layout:{visibility:M[1]?"visible":"none"}}]):{};f.$set(X)},i(M){a||(g(e.$$.fragment,M),g(t.$$.fragment,M),g(s.$$.fragment,M),g(u.$$.fragment,M),g(f.$$.fragment,M),a=!0)},o(M){d(e.$$.fragment,M),d(t.$$.fragment,M),d(s.$$.fragment,M),d(u.$$.fragment,M),d(f.$$.fragment,M),a=!1},d(M){M&&(p(l),p(n),p(o),p(i)),w(e,M),w(t,M),w(s,M),w(u,M),w(f,M)}}}function Cp(r){let e,l;return e=new kt({props:{data:r[7],$$slots:{default:[Sp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&128&&(s.data=t[7]),n&2175&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Tp(r,e,l){let t,{source:n}=e,{show:s}=e,{schemes:o}=e,{schemesGj:u}=e,{filterSchemeText:i}=e,{filterInterventionText:f}=e,{color:a}=e;const c=["!=",["get","hide_while_editing"],!0],m=["!=",["get","endpoint"],!0];return r.$$set=_=>{"source"in _&&l(0,n=_.source),"show"in _&&l(1,s=_.show),"schemes"in _&&l(2,o=_.schemes),"schemesGj"in _&&l(3,u=_.schemesGj),"filterSchemeText"in _&&l(4,i=_.filterSchemeText),"filterInterventionText"in _&&l(5,f=_.filterInterventionText),"color"in _&&l(6,a=_.color)},r.$$.update=()=>{r.$$.dirty&8&&l(7,t=rr(u))},[n,s,o,u,i,f,a,t,c,m]}class hs extends Q{constructor(e){super(),K(this,e,Tp,Cp,J,{source:0,show:1,schemes:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function Lp(r){return Ze(["get","intervention_type"],{area:Qe.area,route:Qe.route,crossing:Qe.crossing,other:Qe.other},"white")}function Ip(r){return[["Areas",Qe.area],["Routes",Qe.route],["Crossings",Qe.crossing],["Other",Qe.other]]}function bs(r,e,l){const t=r.slice();return t[31]=e[l],t}function ks(r,e,l){const t=r.slice();return t[31]=e[l],t}function Mp(r){let e,l;return e=new F$({props:{loadFile:r[17]}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p:x,i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ws(r){let e,l,t,n,s,o,u,i,f,a,c,m,_,S;function y(I){r[18](I)}let T={$$slots:{right:[Pp],default:[Np]},$$scope:{ctx:r}};r[3]!==void 0&&(T.checked=r[3]),e=new oe({props:T}),H.push(()=>E(e,"checked",y));function P(I){r[19](I)}function F(I){r[20](I)}function D(I){r[21](I)}function N(I){r[22](I)}let M={source:"ATF"};r[10]!==void 0&&(M.schemesGj=r[10]),r[9]!==void 0&&(M.schemes=r[9]),r[11]!==void 0&&(M.filterSchemeText=r[11]),r[12]!==void 0&&(M.filterInterventionText=r[12]),n=new Fs({props:M}),H.push(()=>E(n,"schemesGj",P)),H.push(()=>E(n,"schemes",F)),H.push(()=>E(n,"filterSchemeText",D)),H.push(()=>E(n,"filterInterventionText",N));function O(I){r[23](I)}let R={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(R.value=r[0]),a=new ht({props:R}),H.push(()=>E(a,"value",O)),_=new Kt({props:{rows:r[7]}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),f=L(),b(a.$$.fragment),m=L(),b(_.$$.fragment)},m(I,j){k(e,I,j),$(I,t,j),k(n,I,j),$(I,f,j),k(a,I,j),$(I,m,j),k(_,I,j),S=!0},p(I,j){const U={};j[0]&1024|j[1]&32&&(U.$$scope={dirty:j,ctx:I}),!l&&j[0]&8&&(l=!0,U.checked=I[3],B(()=>l=!1)),e.$set(U);const X={};!s&&j[0]&1024&&(s=!0,X.schemesGj=I[10],B(()=>s=!1)),!o&&j[0]&512&&(o=!0,X.schemes=I[9],B(()=>o=!1)),!u&&j[0]&2048&&(u=!0,X.filterSchemeText=I[11],B(()=>u=!1)),!i&&j[0]&4096&&(i=!0,X.filterInterventionText=I[12],B(()=>i=!1)),n.$set(X);const A={};!c&&j[0]&1&&(c=!0,A.value=I[0],B(()=>c=!1)),a.$set(A);const Y={};j[0]&128&&(Y.rows=I[7]),_.$set(Y)},i(I){S||(g(e.$$.fragment,I),g(n.$$.fragment,I),g(a.$$.fragment,I),g(_.$$.fragment,I),S=!0)},o(I){d(e.$$.fragment,I),d(n.$$.fragment,I),d(a.$$.fragment,I),d(_.$$.fragment,I),S=!1},d(I){I&&(p(t),p(f),p(m)),w(e,I),w(n,I),w(a,I),w(_,I)}}}function Np(r){let e;return{c(){e=v("ATF schemes")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function vs(r){let e,l,t=r[31]+"",n;return{c(){e=C("li"),l=C("p"),n=v(t)},m(s,o){$(s,e,o),h(e,l),h(l,n)},p(s,o){o[0]&1024&&t!==(t=s[31]+"")&&G(n,t)},d(s){s&&p(e)}}}function Op(r){let e,l,t,n=ve(r[10].notes??[]),s=[];for(let o=0;o<n.length;o+=1)s[o]=vs(ks(r,n,o));return{c(){e=C("p"),e.textContent="Please note there are data quality caveats for all scheme data:",l=L(),t=C("ul");for(let o=0;o<s.length;o+=1)s[o].c()},m(o,u){$(o,e,u),$(o,l,u),$(o,t,u);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(t,null)},p(o,u){if(u[0]&1024){n=ve(o[10].notes??[]);let i;for(i=0;i<n.length;i+=1){const f=ks(o,n,i);s[i]?s[i].p(f,u):(s[i]=vs(f),s[i].c(),s[i].m(t,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=n.length}},d(o){o&&(p(e),p(l),p(t)),Ke(s,o)}}}function Pp(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Op]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s[0]&1024|s[1]&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ys(r){let e,l,t,n,s,o,u,i,f,a,c,m,_,S;function y(I){r[24](I)}let T={$$slots:{right:[Dp],default:[jp]},$$scope:{ctx:r}};r[4]!==void 0&&(T.checked=r[4]),e=new oe({props:T}),H.push(()=>E(e,"checked",y));function P(I){r[25](I)}function F(I){r[26](I)}function D(I){r[27](I)}function N(I){r[28](I)}let M={source:"LCWIP"};r[14]!==void 0&&(M.schemesGj=r[14]),r[13]!==void 0&&(M.schemes=r[13]),r[15]!==void 0&&(M.filterSchemeText=r[15]),r[16]!==void 0&&(M.filterInterventionText=r[16]),n=new Fs({props:M}),H.push(()=>E(n,"schemesGj",P)),H.push(()=>E(n,"schemes",F)),H.push(()=>E(n,"filterSchemeText",D)),H.push(()=>E(n,"filterInterventionText",N));function O(I){r[29](I)}let R={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return r[1]!==void 0&&(R.value=r[1]),a=new ht({props:R}),H.push(()=>E(a,"value",O)),_=new Kt({props:{rows:r[5]}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),f=L(),b(a.$$.fragment),m=L(),b(_.$$.fragment)},m(I,j){k(e,I,j),$(I,t,j),k(n,I,j),$(I,f,j),k(a,I,j),$(I,m,j),k(_,I,j),S=!0},p(I,j){const U={};j[0]&16384|j[1]&32&&(U.$$scope={dirty:j,ctx:I}),!l&&j[0]&16&&(l=!0,U.checked=I[4],B(()=>l=!1)),e.$set(U);const X={};!s&&j[0]&16384&&(s=!0,X.schemesGj=I[14],B(()=>s=!1)),!o&&j[0]&8192&&(o=!0,X.schemes=I[13],B(()=>o=!1)),!u&&j[0]&32768&&(u=!0,X.filterSchemeText=I[15],B(()=>u=!1)),!i&&j[0]&65536&&(i=!0,X.filterInterventionText=I[16],B(()=>i=!1)),n.$set(X);const A={};!c&&j[0]&2&&(c=!0,A.value=I[1],B(()=>c=!1)),a.$set(A);const Y={};j[0]&32&&(Y.rows=I[5]),_.$set(Y)},i(I){S||(g(e.$$.fragment,I),g(n.$$.fragment,I),g(a.$$.fragment,I),g(_.$$.fragment,I),S=!0)},o(I){d(e.$$.fragment,I),d(n.$$.fragment,I),d(a.$$.fragment,I),d(_.$$.fragment,I),S=!1},d(I){I&&(p(t),p(f),p(m)),w(e,I),w(n,I),w(a,I),w(_,I)}}}function jp(r){let e;return{c(){e=v("LCWIP schemes")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ss(r){let e,l,t=r[31]+"",n;return{c(){e=C("li"),l=C("p"),n=v(t)},m(s,o){$(s,e,o),h(e,l),h(l,n)},p(s,o){o[0]&16384&&t!==(t=s[31]+"")&&G(n,t)},d(s){s&&p(e)}}}function Rp(r){let e,l,t,n=ve(r[14].notes??[]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Ss(bs(r,n,o));return{c(){e=C("p"),e.textContent="Please note there are data quality caveats for all scheme data:",l=L(),t=C("ul");for(let o=0;o<s.length;o+=1)s[o].c()},m(o,u){$(o,e,u),$(o,l,u),$(o,t,u);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(t,null)},p(o,u){if(u[0]&16384){n=ve(o[14].notes??[]);let i;for(i=0;i<n.length;i+=1){const f=bs(o,n,i);s[i]?s[i].p(f,u):(s[i]=Ss(f),s[i].c(),s[i].m(t,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=n.length}},d(o){o&&(p(e),p(l),p(t)),Ke(s,o)}}}function Dp(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Rp]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(l.$$.fragment),z(e,"slot","right")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s[0]&16384|s[1]&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ap(r){let e=hn()=="Private (development)",l,t,n,s,o,u,i,f=e&&Mp(r),a=r[9].size>0&&ws(r),c=r[13].size>0&&ys(r);return s=new Qs({props:{label:"Load schemes from GeoJSON",onLoad:r[17]}}),u=new Ks({props:{errorMessage:r[2]}}),{c(){f&&f.c(),l=L(),a&&a.c(),t=L(),c&&c.c(),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment)},m(m,_){f&&f.m(m,_),$(m,l,_),a&&a.m(m,_),$(m,t,_),c&&c.m(m,_),$(m,n,_),k(s,m,_),$(m,o,_),k(u,m,_),i=!0},p(m,_){e&&f.p(m,_),m[9].size>0?a?(a.p(m,_),_[0]&512&&g(a,1)):(a=ws(m),a.c(),g(a,1),a.m(t.parentNode,t)):a&&(ae(),d(a,1,1,()=>{a=null}),ue()),m[13].size>0?c?(c.p(m,_),_[0]&8192&&g(c,1)):(c=ys(m),c.c(),g(c,1),c.m(n.parentNode,n)):c&&(ae(),d(c,1,1,()=>{c=null}),ue());const S={};_[0]&4&&(S.errorMessage=m[2]),u.$set(S)},i(m){i||(g(f),g(a),g(c),g(s.$$.fragment,m),g(u.$$.fragment,m),i=!0)},o(m){d(f),d(a),d(c),d(s.$$.fragment,m),d(u.$$.fragment,m),i=!1},d(m){m&&(p(l),p(t),p(n),p(o)),f&&f.d(m),a&&a.d(m),c&&c.d(m),w(s,m),w(u,m)}}}function Fp(r){let e,l,t,n,s,o;return e=new nt({props:{label:"Schemes",open:!0,$$slots:{default:[Ap]},$$scope:{ctx:r}}}),t=new hs({props:{source:"atf",show:r[3],schemesGj:r[10],schemes:r[9],filterSchemeText:r[11],filterInterventionText:r[12],color:r[8]}}),s=new hs({props:{source:"lcwip",show:r[4],schemesGj:r[14],schemes:r[13],filterSchemeText:r[15],filterInterventionText:r[16],color:r[6]}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment)},m(u,i){k(e,u,i),$(u,l,i),k(t,u,i),$(u,n,i),k(s,u,i),o=!0},p(u,i){const f={};i[0]&130751|i[1]&32&&(f.$$scope={dirty:i,ctx:u}),e.$set(f);const a={};i[0]&8&&(a.show=u[3]),i[0]&1024&&(a.schemesGj=u[10]),i[0]&512&&(a.schemes=u[9]),i[0]&2048&&(a.filterSchemeText=u[11]),i[0]&4096&&(a.filterInterventionText=u[12]),i[0]&256&&(a.color=u[8]),t.$set(a);const c={};i[0]&16&&(c.show=u[4]),i[0]&16384&&(c.schemesGj=u[14]),i[0]&8192&&(c.schemes=u[13]),i[0]&32768&&(c.filterSchemeText=u[15]),i[0]&65536&&(c.filterInterventionText=u[16]),i[0]&64&&(c.color=u[6]),s.$set(c)},i(u){o||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(s.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(s.$$.fragment,u),o=!1},d(u){u&&(p(l),p(n)),w(e,u),w(t,u),w(s,u)}}}function Gp(r,e,l){let t,n,s,o,u,i,f,a,c,m,_,S;Z(r,cn,W=>l(9,u=W)),Z(r,nn,W=>l(10,i=W)),Z(r,Ul,W=>l(11,f=W)),Z(r,Bl,W=>l(12,a=W)),Z(r,pn,W=>l(13,c=W)),Z(r,$n,W=>l(14,m=W)),Z(r,Yl,W=>l(15,_=W)),Z(r,Wl,W=>l(16,S=W));let y="",T=!0,P=!0,F="fundingProgramme",D="interventionType";function N(W,ut){try{G$(JSON.parse(ut)),l(2,y="")}catch(xe){l(2,y=`The file you loaded is broken: ${xe}`)}}function M(W){return W=="interventionType"?[Lp(),Ip()]:W=="fundingProgramme"?[Ze(["get","funding_programme"],Bt,"grey"),Object.entries(Bt)]:W=="currentMilestone"?[Ze(["get","current_milestone"],mn,"grey"),Object.entries(mn)]:["red",[]]}function O(W){T=W,l(3,T)}function R(W){i=W,nn.set(i)}function I(W){u=W,cn.set(u)}function j(W){f=W,Ul.set(f)}function U(W){a=W,Bl.set(a)}function X(W){F=W,l(0,F)}function A(W){P=W,l(4,P)}function Y(W){m=W,$n.set(m)}function V(W){c=W,pn.set(c)}function pe(W){_=W,Yl.set(_)}function De(W){S=W,Wl.set(S)}function ie(W){D=W,l(1,D)}return r.$$.update=()=>{r.$$.dirty[0]&1&&l(8,[t,n]=M(F),t,(l(7,n),l(0,F))),r.$$.dirty[0]&2&&l(6,[s,o]=M(D),s,(l(5,o),l(1,D)))},[F,D,y,T,P,o,s,n,t,u,i,f,a,c,m,_,S,N,O,R,I,j,U,X,A,Y,V,pe,De,ie]}class qp extends Q{constructor(e){super(),K(this,e,Gp,Fp,J,{},null,[-1,-1])}}const Cs=Fe(!0);let _n=Fe(null);function zp(r){let e,l,t,n,s,o,u,i;return e=new _c({}),t=new Lc({}),s=new Bc({}),u=new Gc({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment)},m(f,a){k(e,f,a),$(f,l,a),k(t,f,a),$(f,n,a),k(s,f,a),$(f,o,a),k(u,f,a),i=!0},i(f){i||(g(e.$$.fragment,f),g(t.$$.fragment,f),g(s.$$.fragment,f),g(u.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(s.$$.fragment,f),d(u.$$.fragment,f),i=!1},d(f){f&&(p(l),p(n),p(o)),w(e,f),w(t,f),w(s,f),w(u,f)}}}function Hp(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[zp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ep(r){let e,l,t,n,s,o,u,i,f,a,c,m;return e=new Of({}),t=new ia({}),s=new Hf({}),u=new Zf({}),f=new tc({}),c=new Ru({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment),i=L(),b(f.$$.fragment),a=L(),b(c.$$.fragment)},m(_,S){k(e,_,S),$(_,l,S),k(t,_,S),$(_,n,S),k(s,_,S),$(_,o,S),k(u,_,S),$(_,i,S),k(f,_,S),$(_,a,S),k(c,_,S),m=!0},i(_){m||(g(e.$$.fragment,_),g(t.$$.fragment,_),g(s.$$.fragment,_),g(u.$$.fragment,_),g(f.$$.fragment,_),g(c.$$.fragment,_),m=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(s.$$.fragment,_),d(u.$$.fragment,_),d(f.$$.fragment,_),d(c.$$.fragment,_),m=!1},d(_){_&&(p(l),p(n),p(o),p(i),p(a)),w(e,_),w(t,_),w(s,_),w(u,_),w(f,_),w(c,_)}}}function Bp(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[Ep]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Up(r){let e,l,t,n,s,o;return e=new df({}),t=new pu({}),s=new yu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment)},m(u,i){k(e,u,i),$(u,l,i),k(t,u,i),$(u,n,i),k(s,u,i),o=!0},i(u){o||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(s.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(s.$$.fragment,u),o=!1},d(u){u&&(p(l),p(n)),w(e,u),w(t,u),w(s,u)}}}function Wp(r){let e,l,t,n,s,o,u,i,f,a;return e=new Ci({}),t=new nf({}),s=new Po({}),u=new ei({}),f=new mi({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment),i=L(),b(f.$$.fragment)},m(c,m){k(e,c,m),$(c,l,m),k(t,c,m),$(c,n,m),k(s,c,m),$(c,o,m),k(u,c,m),$(c,i,m),k(f,c,m),a=!0},i(c){a||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(s.$$.fragment,c),g(u.$$.fragment,c),g(f.$$.fragment,c),a=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(s.$$.fragment,c),d(u.$$.fragment,c),d(f.$$.fragment,c),a=!1},d(c){c&&(p(l),p(n),p(o),p(i)),w(e,c),w(t,c),w(s,c),w(u,c),w(f,c)}}}function Yp(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[Wp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Jp(r){let e,l,t,n;return e=new wo({}),t=new Bo({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(s,o){k(e,s,o),$(s,l,o),k(t,s,o),n=!0},i(s){n||(g(e.$$.fragment,s),g(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function Vp(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[Jp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Qp(r){let e,l,t,n,s,o,u,i;return e=new ru({}),t=new ka({}),s=new Qa({}),u=new M$({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment)},m(f,a){k(e,f,a),$(f,l,a),k(t,f,a),$(f,n,a),k(s,f,a),$(f,o,a),k(u,f,a),i=!0},i(f){i||(g(e.$$.fragment,f),g(t.$$.fragment,f),g(s.$$.fragment,f),g(u.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(s.$$.fragment,f),d(u.$$.fragment,f),i=!1},d(f){f&&(p(l),p(n),p(o)),w(e,f),w(t,f),w(s,f),w(u,f)}}}function Kp(r){let e,l,t,n,s,o,u,i,f=hn()=="Private (development)",a,c,m,_,S;e=new b$({}),t=new i$({}),s=new Aa({}),u=new Uu({});let y=f&&Qp();return c=new Di({}),_=new Wi({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(s.$$.fragment),o=L(),b(u.$$.fragment),i=L(),y&&y.c(),a=L(),b(c.$$.fragment),m=L(),b(_.$$.fragment)},m(T,P){k(e,T,P),$(T,l,P),k(t,T,P),$(T,n,P),k(s,T,P),$(T,o,P),k(u,T,P),$(T,i,P),y&&y.m(T,P),$(T,a,P),k(c,T,P),$(T,m,P),k(_,T,P),S=!0},p:x,i(T){S||(g(e.$$.fragment,T),g(t.$$.fragment,T),g(s.$$.fragment,T),g(u.$$.fragment,T),g(y),g(c.$$.fragment,T),g(_.$$.fragment,T),S=!0)},o(T){d(e.$$.fragment,T),d(t.$$.fragment,T),d(s.$$.fragment,T),d(u.$$.fragment,T),d(y),d(c.$$.fragment,T),d(_.$$.fragment,T),S=!1},d(T){T&&(p(l),p(n),p(o),p(i),p(a),p(m)),w(e,T),w(t,T),w(s,T),w(u,T),y&&y.d(T),w(c,T),w(_,T)}}}function Zp(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[Kp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,n){const s={};n&256&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Xp(r){let e,l,t,n,s;function o(i){r[6](i)}let u={cfg:r[5],map:r[3]};return r[0]!==void 0&&(u.enabled=r[0]),e=new ir({props:u}),H.push(()=>E(e,"enabled",o)),n=new Er({}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,f){k(e,i,f),$(i,t,f),k(n,i,f),s=!0},p(i,f){const a={};f&8&&(a.map=i[3]),!l&&f&1&&(l=!0,a.enabled=i[0],B(()=>l=!1)),e.$set(a)},i(i){s||(g(e.$$.fragment,i),g(n.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(n.$$.fragment,i),s=!1},d(i){i&&p(t),w(e,i),w(n,i)}}}function xp(r){let e,l;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let n={};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new Ge({props:n}),{c(){b(e.$$.fragment)},m(s,o){k(e,s,o),l=!0},p(s,o){const u=o&2?se(t,[t[0],t[1],{layout:{visibility:s[1]?"none":"visible"}}]):{};e.$set(u)},i(s){l||(g(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function em(r){let e,l,t,n,s,o,u,i,f,a,c,m,_,S,y,T,P,F,D,N,M;return l=new qp({}),n=new nt({props:{label:"Trip generators",$$slots:{default:[Hp]},$$scope:{ctx:r}}}),o=new nt({props:{label:"Existing infrastructure",$$slots:{default:[Bp]},$$scope:{ctx:r}}}),i=new nt({props:{label:"Public transport",$$slots:{default:[Up]},$$scope:{ctx:r}}}),a=new nt({props:{label:"Boundaries",$$slots:{default:[Yp]},$$scope:{ctx:r}}}),m=new nt({props:{label:"Census",$$slots:{default:[Vp]},$$scope:{ctx:r}}}),S=new nt({props:{label:"Other",$$slots:{default:[Zp]},$$scope:{ctx:r}}}),T=new nt({props:{label:"Tools",$$slots:{default:[Xp]},$$scope:{ctx:r}}}),F=new or({props:{disabled:!r[1]}}),N=new kt({props:{data:r[4],$$slots:{default:[xp]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(o.$$.fragment),u=L(),b(i.$$.fragment),f=L(),b(a.$$.fragment),c=L(),b(m.$$.fragment),_=L(),b(S.$$.fragment),y=L(),b(T.$$.fragment),P=L(),b(F.$$.fragment),D=L(),b(N.$$.fragment)},m(O,R){$(O,e,R),k(l,e,null),h(e,t),k(n,e,null),h(e,s),k(o,e,null),h(e,u),k(i,e,null),h(e,f),k(a,e,null),h(e,c),k(m,e,null),h(e,_),k(S,e,null),h(e,y),k(T,e,null),h(e,P),k(F,e,null),r[7](e),$(O,D,R),k(N,O,R),M=!0},p(O,[R]){const I={};R&256&&(I.$$scope={dirty:R,ctx:O}),n.$set(I);const j={};R&256&&(j.$$scope={dirty:R,ctx:O}),o.$set(j);const U={};R&256&&(U.$$scope={dirty:R,ctx:O}),i.$set(U);const X={};R&256&&(X.$$scope={dirty:R,ctx:O}),a.$set(X);const A={};R&256&&(A.$$scope={dirty:R,ctx:O}),m.$set(A);const Y={};R&256&&(Y.$$scope={dirty:R,ctx:O}),S.$set(Y);const V={};R&265&&(V.$$scope={dirty:R,ctx:O}),T.$set(V);const pe={};R&2&&(pe.disabled=!O[1]),F.$set(pe);const De={};R&258&&(De.$$scope={dirty:R,ctx:O}),N.$set(De)},i(O){M||(g(l.$$.fragment,O),g(n.$$.fragment,O),g(o.$$.fragment,O),g(i.$$.fragment,O),g(a.$$.fragment,O),g(m.$$.fragment,O),g(S.$$.fragment,O),g(T.$$.fragment,O),g(F.$$.fragment,O),g(N.$$.fragment,O),M=!0)},o(O){d(l.$$.fragment,O),d(n.$$.fragment,O),d(o.$$.fragment,O),d(i.$$.fragment,O),d(a.$$.fragment,O),d(m.$$.fragment,O),d(S.$$.fragment,O),d(T.$$.fragment,O),d(F.$$.fragment,O),d(N.$$.fragment,O),M=!1},d(O){O&&(p(e),p(D)),w(l),w(n),w(o),w(i),w(a),w(m),w(S),w(T),w(F),r[7](null),w(N,O)}}}function tm(r,e,l){let t,n,s,o;Z(r,Cs,c=>l(1,n=c)),Z(r,_n,c=>l(2,s=c)),Z(r,dn,c=>l(3,o=c));let u={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>fr(c,Zs(an))};function f(c){t=c,l(0,t),l(1,n)}function a(c){H[c?"unshift":"push"](()=>{s=c,_n.set(s)})}return r.$$.update=()=>{r.$$.dirty&2&&l(0,t=!n),r.$$.dirty&1&&Cs.set(!t)},[t,n,s,o,u,i,f,a]}class nm extends Q{constructor(e){super(),K(this,e,tm,em,J,{})}}function lm(r){let e,l,t,n,s,o,u,i,f,a,c,m,_,S;return l=new ar({}),u=new ur({props:{boundaryGeojson:r[3]}}),f=new Xs({}),{c(){e=C("div"),b(l.$$.fragment),t=L(),n=C("div"),s=C("h1"),s.textContent="Browse schemes",o=L(),b(u.$$.fragment),i=L(),b(f.$$.fragment),a=L(),c=C("p"),c.textContent=`App version: ${hn()}`,m=L(),_=C("div"),_e(n,"display","flex"),_e(n,"justify-content","space-between"),z(e,"slot","sidebar"),z(e,"class","govuk-prose")},m(y,T){$(y,e,T),k(l,e,null),h(e,t),h(e,n),h(n,s),h(n,o),k(u,n,null),h(e,i),k(f,e,null),h(e,a),h(e,c),h(e,m),h(e,_),r[6](_),S=!0},p(y,T){const P={};T&8&&(P.boundaryGeojson=y[3]),u.$set(P)},i(y){S||(g(l.$$.fragment,y),g(u.$$.fragment,y),g(f.$$.fragment,y),S=!0)},o(y){d(l.$$.fragment,y),d(u.$$.fragment,y),d(f.$$.fragment,y),S=!1},d(y){y&&p(e),w(l),w(u),w(f),r[6](null)}}}function Ts(r){let e,l;return e=new nm({}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function sm(r){let e,l,t,n;e=new cr({});let s=r[2]&&Ts();return{c(){b(e.$$.fragment),l=L(),s&&s.c(),t=ye()},m(o,u){k(e,o,u),$(o,l,u),s&&s.m(o,u),$(o,t,u),n=!0},p(o,u){o[2]?s?u&4&&g(s,1):(s=Ts(),s.c(),g(s,1),s.m(t.parentNode,t)):s&&(ae(),d(s,1,1,()=>{s=null}),ue())},i(o){n||(g(e.$$.fragment,o),g(s),n=!0)},o(o){d(e.$$.fragment,o),d(s),n=!1},d(o){o&&(p(l),p(t)),w(e,o),s&&s.d(o)}}}function rm(r){let e,l,t;return l=new xs({props:{style:r[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[sm]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(l.$$.fragment),z(e,"slot","main")},m(n,s){$(n,e,s),k(l,e,null),t=!0},p(n,s){const o={};s&2&&(o.style=n[1]),s&260&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(g(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function om(r){let e,l;return e=new vr({props:{$$slots:{main:[rm],sidebar:[lm]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,n){k(e,t,n),l=!0},p(t,[n]){const s={};n&271&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(g(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function im(r,e,l){let t,n,s,o,u;Z(r,_n,c=>l(4,t=c)),Z(r,dn,c=>l(5,n=c)),Z(r,an,c=>l(1,s=c)),Z(r,zn,c=>l(2,o=c)),Z(r,nn,c=>l(3,u=c)),Ds(()=>{er()});const i=new URLSearchParams(window.location.search);an.set(i.get("style")||"dataviz");let f;function a(c){H[c?"unshift":"push"](()=>{f=c,l(0,f),l(4,t)})}return r.$$.update=()=>{r.$$.dirty&32&&n&&zn.set(n),r.$$.dirty&17&&f&&t&&(l(0,f.innerHTML="",f),f.appendChild(t))},[f,s,o,u,t,n,a]}class fm extends Q{constructor(e){super(),K(this,e,im,om,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new fm({target:document.getElementById("app")});
