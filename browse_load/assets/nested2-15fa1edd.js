import{S as J,i as K,s as V,e as C,h as U,$ as Ce,j as $,W as ne,o as p,aP as el,b as W,c as X,d as L,g as b,m as v,w as st,l as Y,t as _,n as d,p as w,X as Bt,Y as Ht,Z as zt,_ as Gt,a7 as Pe,J as _e,K as ge,aQ as Ot,u as k,k as h,D as R,I as Ie,N as hn,O as tl,q as be,P as nl,Q as rl,T as Lt,U as ll,V as ol,aX as Ll,aY as ct,a4 as An,aZ as Al,f as bn,aO as Il,ar as Kt,aj as Ut,ae as vn,r as wn,F as cn,a as Zt,v as Ve,aW as Q,a_ as we,a$ as ye,B as x,ah as ee,C as Se,ak as te,b0 as oe,G as It,H as sl,aS as Et,ab as In,b1 as nn,R as il,b2 as Nt,E as al,as as Pl,ag as Ml,aU as Pn,al as Nl,am as Mn,an as Nn,ao as Vt,aV as Dn,L as Dl,M as El,y as Fl}from"./index-b7d95ac6.js";import{d as xe,j as Tt,C as Fe,f as tt,h as se,l as H,c as xt,k as jl,S as Rl,B as Bl,b as Pt,G as Hl}from"./StreetViewTool-c41d933f.js";import{a as Ye,F as zl}from"./Popup-4fdc76f8.js";import{P as fe}from"./Popup-a7ab8908.js";import{R as Gl,C as et,Z as Ul}from"./ZoomOutMap-7abf5d92.js";import{L as ql,a as Wl}from"./LineMeasureController-c63e11da.js";function Vl(r){let e;return{c(){e=C("span"),U(e,"class","svelte-kzgqtg"),Ce(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Ce(e,"background",n[0])},i:ne,o:ne,d(n){n&&p(e)}}}function Xl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class Oe extends J{constructor(e){super(),K(this,e,Xl,Vl,V,{color:0})}}const Yl="/atip/browse_load/assets/help-d011708a.svg";function Ql(r){let e,n;const t=r[1].default,l=Bt(t,r,r[4],null);return{c(){e=C("div"),l&&l.c(),U(e,"class","govuk-prose")},m(o,s){$(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&Ht(l,t,o,o[4],n?Gt(t,o[4],s,null):zt(o[4]),null)},i(o){n||(_(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function Jl(r){let e,n,t,l,o,s,f;function i(u){r[3](u)}let a={title:"Help",$$slots:{default:[Ql]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new el({props:a}),W.push(()=>X(t,"open",i)),{c(){e=C("button"),e.innerHTML=`<img src="${Yl}" title="Help" alt="Help"/>`,n=L(),b(t.$$.fragment),U(e,"class","svelte-7d9d1l")},m(u,c){$(u,e,c),$(u,n,c),v(t,u,c),o=!0,s||(f=st(e,"click",r[2]),s=!0)},p(u,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,g.open=u[0],Y(()=>l=!1)),t.$set(g)},i(u){o||(_(t.$$.fragment,u),o=!0)},o(u){d(t.$$.fragment,u),o=!1},d(u){u&&(p(e),p(n)),w(t,u),s=!1,f()}}}function Kl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function f(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,f,l]}class me extends J{constructor(e){super(),K(this,e,Kl,Jl,V,{})}}function En(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Fn(r){let e,n,t,l=r[1]+"",o,s,f;return n=new Oe({props:{color:r[2]}}),{c(){e=C("li"),b(n.$$.fragment),t=L(),o=k(l),s=L()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),n.$set(u),(!f||a&1)&&l!==(l=i[1]+"")&&R(o,l)},i(i){f||(_(n.$$.fragment,i),f=!0)},o(i){d(n.$$.fragment,i),f=!1},d(i){i&&p(e),w(n)}}}function Zl(r){let e,n,t=Pe(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Fn(En(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){e=C("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,f){$(s,e,f);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[f]){if(f&1){t=Pe(s[0]);let i;for(i=0;i<t.length;i+=1){const a=En(s,t,i);l[i]?(l[i].p(a,f),_(l[i],1)):(l[i]=Fn(a),l[i].c(),_(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)o(i);ge()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)_(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)d(l[f]);n=!1},d(s){s&&p(e),Ot(l,s)}}}function xl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class fl extends J{constructor(e){super(),K(this,e,xl,Zl,V,{rows:0})}}function jn(r){let e=r[0],n,t,l=Rn(r);return{c(){l.c(),n=Ie()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&V(e,e=o[0])?(_e(),d(l,1,1,ne),ge(),l=Rn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Rn(r){let e;const n=r[10].default,t=Bt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Ht(t,n,l,l[9],e?Gt(n,l[9],o,null):zt(l[9]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function eo(r){let e,n,t=r[0]&&jn(r);return{c(){t&&t.c(),e=Ie()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=jn(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(_e(),d(t,1,1,()=>{t=null}),ge())},i(l){n||(_(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function to(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=hn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:u,self:c}=tl();be(r,u,y=>n(8,l=y)),be(r,c,y=>n(0,t=y));let g,m=!0;return nl(()=>{t&&g&&l&&(rl(u,t,g),Lt(c,t=null,t),n(6,g=void 0))}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==f&&(Lt(c,t=f,t),ll(l,t,ol({type:"raster",tiles:i,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,g=l==null?void 0:l.getSource(t)),n(7,m=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,g=l==null?void 0:l.getSource(f))})),r.$$.dirty&208&&g&&(m?n(7,m=!1):g.setTiles(i))},[t,u,c,f,i,a,g,m,l,s,o]}class no extends J{constructor(e){super(),K(this,e,to,eo,V,{id:3,tiles:4,tileSize:5})}}function ro(r){let e;const n=r[16].default,t=Bt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Ht(t,n,l,l[24],e?Gt(n,l[24],o,null):zt(l[24]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function lo(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[ro]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Ll({props:o}),W.push(()=>X(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,i.hovered=s[0],Y(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function oo(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=hn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:P=void 0}=e,{manageHoverState:T=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:F=!1}=e,{interactive:E=!0}=e;function I(j){D=j,n(0,D)}function A(j){ct.call(this,r,j)}function M(j){ct.call(this,r,j)}function O(j){ct.call(this,r,j)}function N(j){ct.call(this,r,j)}function G(j){ct.call(this,r,j)}function B(j){ct.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,f=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,u=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,g=j.filter),"applyToClusters"in j&&n(9,m=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,S=j.maxzoom),"hoverCursor"in j&&n(12,P=j.hoverCursor),"manageHoverState"in j&&n(13,T=j.manageHoverState),"hovered"in j&&n(0,D=j.hovered),"eventsIfTopMost"in j&&n(14,F=j.eventsIfTopMost),"interactive"in j&&n(15,E=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[D,o,s,f,i,a,u,c,g,m,y,S,P,T,F,E,t,I,A,M,O,N,G,B,l]}class so extends J{constructor(e){super(),K(this,e,oo,lo,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Bn(r){let e=r[0],n,t,l=Hn(r);return{c(){l.c(),n=Ie()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&V(e,e=o[0])?(_e(),d(l,1,1,ne),ge(),l=Hn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Hn(r){let e;const n=r[9].default,t=Bt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Ht(t,n,l,l[8],e?Gt(n,l[8],o,null):zt(l[8]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function io(r){let e,n,t=r[0]&&Bn(r);return{c(){t&&t.c(),e=Ie()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=Bn(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(_e(),d(t,1,1,()=>{t=null}),ge())},i(l){n||(_(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function ao(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=hn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e;if(i&&i.includes("pmtiles://")&&!An.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Al;An.addProtocol("pmtiles",y.tile)}const{map:c,self:g}=tl();be(r,c,y=>n(7,l=y)),be(r,g,y=>n(0,t=y));let m;return nl(()=>{t&&l&&(rl(c,t,m),Lt(g,t=null,t),m=void 0)}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,u=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==f&&(Lt(g,t=f,t),ll(l,t,ol({type:"vector",url:i,tiles:a,promoteId:u}),y=>l&&y===t,()=>{t&&(m=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{m=l==null?void 0:l.getSource(f)}))},[t,c,g,f,i,a,u,l,s,o]}class ke extends J{constructor(e){super(),K(this,e,ao,io,V,{id:3,url:4,tiles:5,promoteId:6})}}function fo(r){let e;return{c(){e=C("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uo(r){let e,n,t=r[0]=="Private (development)"&&fo();return{c(){t&&t.c(),e=L(),n=C("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),$(l,e,o),$(l,n,o)},p:ne,d(l){l&&(p(e),p(n)),t&&t.d(l)}}}function co(r){let e,n,t,l,o,s;return o=new me({props:{$$slots:{default:[uo]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("App version: "),t=k(r[0]),l=L(),b(o.$$.fragment)},m(f,i){$(f,e,i),h(e,n),h(e,t),h(e,l),v(o,e,null),s=!0},p(f,[i]){const a={};i&2&&(a.$$scope={dirty:i,ctx:f}),o.$set(a)},i(f){s||(_(o.$$.fragment,f),s=!0)},o(f){d(o.$$.fragment,f),s=!1},d(f){f&&p(e),w(o)}}}function $o(r){return[bn()]}class po extends J{constructor(e){super(),K(this,e,$o,co,V,{})}}const mo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Le=Uint8Array,ft=Uint16Array,ul=Uint32Array,cl=new Le([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$l=new Le([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_o=new Le([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pl=function(r,e){for(var n=new ft(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new ul(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},ml=pl(cl,2),_l=ml[0],go=ml[1];_l[28]=258,go[258]=28;var ho=pl($l,0),bo=ho[0],$n=new ft(32768);for(var pe=0;pe<32768;++pe){var rt=(pe&43690)>>>1|(pe&21845)<<1;rt=(rt&52428)>>>2|(rt&13107)<<2,rt=(rt&61680)>>>4|(rt&3855)<<4,$n[pe]=((rt&65280)>>>8|(rt&255)<<8)>>>1}var Dt=function(r,e,n){for(var t=r.length,l=0,o=new ft(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new ft(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var f;if(n){f=new ft(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],u=e-r[l],c=s[r[l]-1]++<<u,g=c|(1<<u)-1;c<=g;++c)f[$n[c]>>>i]=a}else for(f=new ft(t),l=0;l<t;++l)r[l]&&(f[l]=$n[s[r[l]-1]++]>>>15-r[l]);return f},qt=new Le(288);for(var pe=0;pe<144;++pe)qt[pe]=8;for(var pe=144;pe<256;++pe)qt[pe]=9;for(var pe=256;pe<280;++pe)qt[pe]=7;for(var pe=280;pe<288;++pe)qt[pe]=8;var gl=new Le(32);for(var pe=0;pe<32;++pe)gl[pe]=5;var vo=Dt(qt,9,1),wo=Dt(gl,5,1),rn=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},De=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},ln=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},ko=function(r){return(r+7)/8|0},kn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?ft:r.BYTES_PER_ELEMENT==4?ul:Le)(n-e);return t.set(r.subarray(e,n)),t},yo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ee=function(r,e,n){var t=new Error(e||yo[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Ee),!n)throw t;return t},So=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Le(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Le(t*3));var s=function(Je){var Be=e.length;if(Je>Be){var Ke=new Le(Math.max(Be*2,Je));Ke.set(e),e=Ke}},f=n.f||0,i=n.p||0,a=n.b||0,u=n.l,c=n.d,g=n.m,m=n.n,y=t*8;do{if(!u){f=De(r,i,1);var S=De(r,i+1,3);if(i+=3,S)if(S==1)u=vo,c=wo,g=9,m=5;else if(S==2){var F=De(r,i,31)+257,E=De(r,i+10,15)+4,I=F+De(r,i+5,31)+1;i+=14;for(var A=new Le(I),M=new Le(19),O=0;O<E;++O)M[_o[O]]=De(r,i+O*3,7);i+=E*3;for(var N=rn(M),G=(1<<N)-1,B=Dt(M,N,1),O=0;O<I;){var j=B[De(r,i,G)];i+=j&15;var P=j>>>4;if(P<16)A[O++]=P;else{var z=0,q=0;for(P==16?(q=3+De(r,i,3),i+=2,z=A[O-1]):P==17?(q=3+De(r,i,7),i+=3):P==18&&(q=11+De(r,i,127),i+=7);q--;)A[O++]=z}}var Z=A.subarray(0,F),ie=A.subarray(F);g=rn(Z),m=rn(ie),u=Dt(Z,g,1),c=Dt(ie,m,1)}else Ee(1);else{var P=ko(i)+4,T=r[P-4]|r[P-3]<<8,D=P+T;if(D>t){o&&Ee(0);break}l&&s(a+T),e.set(r.subarray(P,D),a),n.b=a+=T,n.p=i=D*8,n.f=f;continue}if(i>y){o&&Ee(0);break}}l&&s(a+131072);for(var Te=(1<<g)-1,ae=(1<<m)-1,ve=i;;ve=i){var z=u[ln(r,i)&Te],de=z>>>4;if(i+=z&15,i>y){o&&Ee(0);break}if(z||Ee(2),de<256)e[a++]=de;else if(de==256){ve=i,u=null;break}else{var Ne=de-254;if(de>264){var O=de-257,ce=cl[O];Ne=De(r,i,(1<<ce)-1)+_l[O],i+=ce}var $e=c[ln(r,i)&ae],ue=$e>>>4;$e||Ee(3),i+=$e&15;var ie=bo[ue];if(ue>3){var ce=$l[ue];ie+=ln(r,i)&(1<<ce)-1,i+=ce}if(i>y){o&&Ee(0);break}l&&s(a+131072);for(var nt=a+Ne;a<nt;a+=4)e[a]=e[a-ie],e[a+1]=e[a+1-ie],e[a+2]=e[a+2-ie],e[a+3]=e[a+3-ie];a=nt}}n.l=u,n.p=ve,n.b=a,n.f=f,u&&(f=1,n.m=g,n.d=c,n.n=m)}while(!f);return a==e.length?e:kn(e,0,a)},Co=new Le(0),We=function(r,e){return r[e]|r[e+1]<<8},je=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},on=function(r,e){return je(r,e)+je(r,e+4)*4294967296};function To(r,e){return So(r,e)}var pn=typeof TextDecoder<"u"&&new TextDecoder,Oo=0;try{pn.decode(Co,{stream:!0}),Oo=1}catch{}var Lo=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,kn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function dl(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(pn)return pn.decode(r);var l=Lo(r),o=l[0],s=l[1];return s.length&&Ee(8),o}}var Ao=function(r,e){return e+30+We(r,e+26)+We(r,e+28)},Io=function(r,e,n){var t=We(r,e+28),l=dl(r.subarray(e+46,e+46+t),!(We(r,e+8)&2048)),o=e+46+t,s=je(r,e+20),f=n&&s==4294967295?Po(r,o):[s,je(r,e+24),je(r,e+42)],i=f[0],a=f[1],u=f[2];return[We(r,e+10),i,a,l,o+We(r,e+30)+We(r,e+32),u]},Po=function(r,e){for(;We(r,e)!=1;e+=4+We(r,e+2));return[on(r,e+12),on(r,e+4),on(r,e+20)]};function Mo(r,e){for(var n={},t=r.length-22;je(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Ee(13);var l=We(r,t+8);if(!l)return{};var o=je(r,t+16),s=o==4294967295||l==65535;if(s){var f=je(r,t-12);s=je(r,f)==101075792,s&&(l=je(r,f+32),o=je(r,f+48))}for(var i=e&&e.filter,a=0;a<l;++a){var u=Io(r,o,s),c=u[0],g=u[1],m=u[2],y=u[3],S=u[4],P=u[5],T=Ao(r,P);o=S,(!i||i({name:y,size:g,originalSize:m,compression:c}))&&(c?c==8?n[y]=To(r.subarray(T,T+g),new Le(m)):Ee(14,"unknown compression type "+c):n[y]=kn(r,T,T+g))}return n}function No(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(sn):sn(r)}function sn(r){var e=new Uint8Array(r),n=Mo(e);return Promise.resolve(Do(n))}function Do(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=dl(r[l])}return e}function Xe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&ut(t)===e)return t;n++}}function Wt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&ut(l)===e&&n.push(l),t++}return n}function en(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&ut(l)===e&&n(l,t):n(l,t),t++}}function Eo(r,e,n){var t=[];return en(r,e,function(l,o){t.push(n(l,o))}),t}var Fo=/.+\:/;function ut(r){return r.tagName.replace(Fo,"")}function hl(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+ut(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=hl(r.childNodes[t]),t++;return e+="</"+ut(r)+">",e}function jo(r){var e=r.documentElement,n=Xe(e,"sheetData"),t=[];return en(n,"row",function(l){en(l,"c",function(o){t.push(o)})}),t}function Ro(r,e){return Xe(e,"v")}function Bo(r,e){if(e.firstChild&&ut(e.firstChild)==="is"&&e.firstChild.firstChild&&ut(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Ho(r){var e=r.documentElement,n=Xe(e,"dimension");if(n)return n.getAttribute("ref")}function zo(r){var e=r.documentElement,n=Xe(e,"cellStyleXfs");return n?Wt(n,"xf"):[]}function Go(r){var e=r.documentElement,n=Xe(e,"cellXfs");return n?Wt(n,"xf"):[]}function Uo(r){var e=r.documentElement,n=Xe(e,"numFmts");return n?Wt(n,"numFmt"):[]}function qo(r){var e=r.documentElement;return Eo(e,"si",function(n){var t=Xe(n,"t");if(t)return t.textContent;var l="";return en(n,"r",function(o){l+=Xe(o,"t").textContent}),l})}function Wo(r){var e=r.documentElement;return Xe(e,"workbookPr")}function Vo(r){var e=r.documentElement;return Wt(e,"Relationship")}function Xo(r){var e=r.documentElement,n=Xe(e,"sheets");return Wt(n,"sheet")}function Yo(r,e){var n=e.createDocument(r),t={},l=Wo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(f){f.getAttribute("name")&&t.sheets.push({id:f.getAttribute("sheetId"),name:f.getAttribute("name"),relationId:f.getAttribute("r:id")})};return Xo(n).forEach(o),t}function Qo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var f=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=an(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=an(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=an(f);break}};return Vo(n).forEach(l),t}function an(r){return r[0]==="/"?r.slice(1):"xl/"+r}function zn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Gn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zn(Object(n),!0).forEach(function(t){Jo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Jo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ko(r,e){if(!r)return{};var n=e.createDocument(r),t=zo(n).map(fn),l=Uo(n).map(Zo).reduce(function(s,f){return s[f.id]=f,s},[]),o=function(f){return f.hasAttribute("xfId")?Gn(Gn({},t[f.xfId]),fn(f,l)):fn(f,l)};return Go(n).map(o)}function Zo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function fn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function xo(r,e){return r?qo(e.createDocument(r)):[]}function bl(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function es(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ts(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ts(r,e){if(r){if(typeof r=="string")return Un(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(r,e)}}function Un(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ns(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(rs.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&ss(l.numberFormat.template))return!0}}var rs=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],ls=/^\[\$-414\]/,os=/;@$/;function ss(r){r=r.toLowerCase(),r=r.replace(ls,""),r=r.replace(os,"");for(var e=r.split(/\W+/),n=es(e),t;!(t=n()).done;){var l=t.value;if(is.indexOf(l)<0)return!1}return!0}var is=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function as(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,f=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=un(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=un(r,a);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=f.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=f[u],r=un(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=fs(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var g=Number(r);if(isNaN(g))throw new Error('Invalid "numeric" cell value: '.concat(r));r=g,ns(r,o(),s,a)&&(r=bl(r,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function fs(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function un(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var us=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function cs(r){var e=function(a,u){return a-u},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],f=t[t.length-1];return[{row:l,column:s},{row:o,column:f}]}function $s(r){for(var e=0,n=0;n<r.length;)e*=26,e+=us.indexOf(r[n]),n++;return e}function vl(r){return r=r.split(/(\d+)/),[parseInt(r[1]),$s(r[0].trim())]}function ps(r,e,n,t,l,o,s){var f=vl(r.getAttribute("r")),i=Ro(e,r),a=i&&i.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:f[0],column:f[1],value:as(a,u,{getInlineStringValue:function(){return Bo(e,r)},getInlineStringXml:function(){return hl(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function ms(r,e,n,t,l,o){var s=jo(r);return s.length===0?[]:s.map(function(f){return ps(f,r,e,n,t,l,o)})}function _s(r,e){return bs(r)||hs(r,e)||ds(r,e)||gs()}function gs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ds(r,e){if(r){if(typeof r=="string")return qn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(r,e)}}function qn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function hs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function bs(r){if(Array.isArray(r))return r}function vs(r){var e=Ho(r);if(e)return e=e.split(":").map(vl).map(function(n){var t=_s(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function ws(r,e,n,t,l,o){var s=e.createDocument(r),f=ms(s,e,n,t,l,o),i=vs(s)||cs(f);return{cells:f,dimensions:i}}function ks(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ys(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ys(r,e){if(r){if(typeof r=="string")return Wn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wn(r,e)}}function Wn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ss(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var f=!0,i=ks(r[s]),a;!(a=i()).done;){var u=a.value;if(l(u)!==null){f=!1;break}}if(f)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function Cs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ts(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ts(r,e){if(r){if(typeof r=="string")return Vn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(r,e)}}function Vn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Os(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,f=Cs(r),i;!(i=f()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var u=0;u<r.length;)r[u].splice(o,1),u++;else if(l)break;o--}return r}function Ls(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=wl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function As(r,e){return Ms(r)||Ps(r,e)||wl(r,e)||Is()}function Is(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wl(r,e){if(r){if(typeof r=="string")return Xn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xn(r,e)}}function Xn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ps(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Ms(r){if(Array.isArray(r))return r}function Ns(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=As(n,2);l[0];for(var o=l[1],s=o.column,f=o.row,i=new Array(f),a=0;a<f;){i[a]=new Array(s);for(var u=0;u<s;)i[a][u]=null,u++;a++}for(var c=Ls(t),g;!(g=c()).done;){var m=g.value,y=m.row-1,S=m.column-1;S<s&&y<f&&(i[y][S]=m.value)}var P=e.rowMap;if(P)for(var T=0;T<i.length;)P[T]=T,T++;return i=Ss(Os(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:P}),e.transformData&&(i=e.transformData(i)),i}function Ds(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Es(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Es(r,e){if(r){if(typeof r=="string")return Yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(r,e)}}function Yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Qn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Fs(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qn(Object(n),!0).forEach(function(t){js(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function js(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Rs(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Fs({sheet:1},n));var t=function(g){if(!r[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return r[g]},l=Qo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?xo(t(l.sharedStrings),e):[],s=l.styles?Ko(t(l.styles),e):{},f=Yo(t("xl/workbook.xml"),e);if(n.getSheets)return f.sheets.map(function(c){var g=c.name;return{name:g}});var i=Bs(n.sheet,f.sheets);if(!i||!l.sheets[i])throw Hs(n.sheet,f.sheets);var a=ws(t(l.sheets[i]),e,o,s,f,n),u=Ns(a,n);return n.properties?{data:u,properties:f}:u}function Bs(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Ds(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Hs(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function mn(r){"@babel/helpers - typeof";return mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(r)}function Jn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function zs(r,e,n){return e&&Jn(r.prototype,e),n&&Jn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Gs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Us(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ft(r,e)}function qs(r){var e=kl();return function(){var t=jt(r),l;if(e){var o=jt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return Ws(this,l)}}function Ws(r,e){if(e&&(mn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vs(r)}function Vs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function _n(r){var e=typeof Map=="function"?new Map:void 0;return _n=function(t){if(t===null||!Xs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Yt(t,arguments,jt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ft(l,t)},_n(r)}function Yt(r,e,n){return kl()?Yt=Reflect.construct:Yt=function(l,o,s){var f=[null];f.push.apply(f,o);var i=Function.bind.apply(l,f),a=new i;return s&&Ft(a,s.prototype),a},Yt.apply(null,arguments)}function kl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xs(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ft(r,e){return Ft=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Ft(r,e)}function jt(r){return jt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},jt(r)}var Ae=function(r){Us(n,r);var e=qs(n);function n(t){var l;return Gs(this,n),l=e.call(this,"invalid"),l.reason=t,l}return zs(n)}(_n(Error));function Ys(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Ae("not_a_number")}if(typeof r!="number")throw new Ae("not_a_number");if(isNaN(r))throw new Ae("invalid_number");if(!isFinite(r))throw new Ae("out_of_bounds");return r}function Qs(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Ae("invalid_number");if(!isFinite(r))throw new Ae("out_of_bounds");return String(r)}throw new Ae("not_a_string")}function Js(r){if(typeof r=="boolean")return r;throw new Ae("not_a_boolean")}function Ks(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Ae("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Ae("invalid_number");if(!isFinite(r))throw new Ae("out_of_bounds");var t=bl(r,n);if(isNaN(t.valueOf()))throw new Ae("out_of_bounds");return t}throw new Ae("not_a_date")}function Zs(r,e){return ti(r)||ei(r,e)||yl(r,e)||xs()}function xs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ei(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function ti(r){if(Array.isArray(r))return r}function gn(r){"@babel/helpers - typeof";return gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(r)}function ni(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=yl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yl(r,e){if(r){if(typeof r=="string")return Kn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(r,e)}}function Kn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Zn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function xn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zn(Object(n),!0).forEach(function(t){ri(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ri(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var er={isColumnOriented:!1};function li(r,e,n){n?n=xn(xn({},er),n):n=er;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ai(e),l&&(r=ii(r));for(var f=r[0],i=[],a=[],u=1;u<r.length;u++){var c=Sl(e,r[u],u,f,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=ni(a),m;!(m=g()).done;){var y=m.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function Sl(r,e,n,t,l,o){for(var s={},f=!0,i=function(){var g=u[a],m=r[g],y=gn(m.type)==="object"&&!Array.isArray(m.type),S=e[t.indexOf(g)];S===void 0&&(S=null);var P=void 0,T=void 0,D=void 0;if(y)P=Sl(m.type,e,n,t,l,o);else if(S===null)P=null;else if(Array.isArray(m.type)){var F=!1,E=si(S).map(function(A){var M=tr(A,m,o);return M.error&&(P=A,T=M.error,D=M.reason),M.value!==null&&(F=!0),M.value});T||(P=F?E:null)}else{var I=tr(S,m,o);T=I.error,D=I.reason,P=T?S:I.value}!T&&P===null&&m.required&&(T="required"),T?(T={error:T,row:n+1,column:g,value:P},D&&(T.reason=D),m.type&&(T.type=m.type),l.push(T)):(f&&P!==null&&(f=!1),(P!==null||o.includeNullValues)&&(s[m.prop]=P))},a=0,u=Object.keys(r);a<u.length;a++)i();return f?null:s}function tr(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=$t(r,e.parse):e.type?t=oi(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function $t(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function oi(r,e,n){switch(e){case String:return $t(r,Qs);case Number:return $t(r,Ys);case Date:return $t(r,function(t){return Ks(t,{properties:n.properties})});case Boolean:return $t(r,Js);default:if(typeof e=="function")return $t(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Cl(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=Cl(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function si(r){for(var e=[],n=0;n<r.length;){var t=Cl(r,",",n),l=Zs(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var ii=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function ai(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function dn(r){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(r)}function Tl(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;dn(o)==="object"&&(o=Object.keys(r[l])[0],s=Tl(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var fi=["schema","map"];function nr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Xt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nr(Object(n),!0).forEach(function(t){ui(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ui(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ci(r,e){if(r==null)return{};var n=$i(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function $i(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function pi(r,e,n){var t=n.schema,l=n.map,o=ci(n,fi);!t&&l&&(t=Tl(l));var s=Rs(r,e,Xt(Xt({},o),{},{properties:t||o.properties}));return t?li(s.data,t,Xt(Xt({},o),{},{properties:s.properties})):s}function mi(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return No(r).then(function(n){return pi(n,mo,e)})}function _i(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>gi(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function gi(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function di(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await mi(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Il(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function Ol(r){return Kt(["get","intervention_type"],{area:xe.area,route:xe.route,crossing:xe.crossing,other:xe.other},"white")}function rr(r){return[["Areas",xe.area],["Routes",xe.route],["Crossings",xe.crossing],["Other",xe.other]]}const le={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},Re=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20],At=Ut({type:"FeatureCollection",features:[],schemes:{},notes:[]}),Rt=Ut(new Map),lr=Ut(!0),Qt=Ut(""),Jt=Ut("");function hi(r){let e,n;return e=new fl({props:{rows:r[1]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function bi(r){let e,n,t,l,o;function s(i){r[3](i)}let f={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(f.value=r[0]),e=new Tt({props:f}),W.push(()=>X(e,"value",s)),e.$on("change",r[2]),l=new Fe({props:{label:"Legend",$$slots:{default:[hi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};!n&&a&1&&(n=!0,u.value=i[0],Y(()=>n=!1)),e.$set(u);const c={};a&258&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function or(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function vi(r,e,n){let t,l;be(r,Rt,c=>n(4,t=c)),be(r,vn,c=>n(5,l=c));let o="interventionType",s=rr();function f(){let c;o=="interventionType"?(c=Ol(),n(1,s=rr())):o=="fundingProgramme"?c=i():o=="currentMilestone"&&(c=a()),l.setPaintProperty("interventions-points","circle-color",c),l.setPaintProperty("interventions-lines","line-color",c),l.setPaintProperty("interventions-polygons","fill-color",c),l.setPaintProperty("interventions-polygons-outlines","line-color",c)}function i(){var P;let c=new Set;for(let T of t.values())(P=T.browse)!=null&&P.funding_programme&&c.add(T.browse.funding_programme);let g=Array.from(c);g.sort();let[m,y]=or(g,le.funding_programmes),S=Kt(["get","funding_programme"],m,"grey");return n(1,s=y),S}function a(){let c=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[g,m]=or(c,le.current_milestone),y=Kt(["get","current_milestone"],g,"grey");return n(1,s=m),y}function u(c){o=c,n(0,o)}return[o,s,f,u]}class wi extends J{constructor(e){super(),K(this,e,vi,bi,V,{})}}function ki(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yi(r){let e,n,t,l,o,s;return t=new Zt({props:{$$slots:{default:[ki]},$$scope:{ctx:r}}}),t.$on("click",r[15]),{c(){e=C("input"),n=L(),b(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterInterventionText")},m(f,i){$(f,e,i),Ve(e,r[6]),$(f,n,i),v(t,f,i),l=!0,o||(s=st(e,"input",r[14]),o=!0)},p(f,i){i&64&&e.value!==f[6]&&Ve(e,f[6]);const a={};i&4194304&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(_(t.$$.fragment,f),l=!0)},o(f){d(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function Si(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ci(r){let e,n,t,l,o,s;return t=new Zt({props:{$$slots:{default:[Si]},$$scope:{ctx:r}}}),t.$on("click",r[17]),{c(){e=C("input"),n=L(),b(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterSchemeText")},m(f,i){$(f,e,i),Ve(e,r[5]),$(f,n,i),v(t,f,i),l=!0,o||(s=st(e,"input",r[16]),o=!0)},p(f,i){i&32&&e.value!==f[5]&&Ve(e,f[5]);const a={};i&4194304&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(_(t.$$.fragment,f),l=!0)},o(f){d(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function Ti(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S;function P(A){r[11](A)}let T={label:"Authority or region",id:"filterAuthority",choices:r[7],emptyOption:!0};r[2]!==void 0&&(T.value=r[2]),e=new Tt({props:T}),W.push(()=>X(e,"value",P));function D(A){r[12](A)}let F={label:"Funding programme",id:"filterFundingProgramme",choices:r[8],emptyOption:!0};r[3]!==void 0&&(F.value=r[3]),l=new Tt({props:F}),W.push(()=>X(l,"value",D));function E(A){r[13](A)}let I={label:"Current milestone",id:"filterCurrentMilestone",choices:r[9],emptyOption:!0};return r[4]!==void 0&&(I.value=r[4]),f=new Tt({props:I}),W.push(()=>X(f,"value",E)),u=new cn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[yi]},$$scope:{ctx:r}}}),g=new cn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Ci]},$$scope:{ctx:r}}}),y=new wi({}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment),s=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment),c=L(),b(g.$$.fragment),m=L(),b(y.$$.fragment)},m(A,M){v(e,A,M),$(A,t,M),v(l,A,M),$(A,s,M),v(f,A,M),$(A,a,M),v(u,A,M),$(A,c,M),v(g,A,M),$(A,m,M),v(y,A,M),S=!0},p(A,M){const O={};M&128&&(O.choices=A[7]),!n&&M&4&&(n=!0,O.value=A[2],Y(()=>n=!1)),e.$set(O);const N={};M&256&&(N.choices=A[8]),!o&&M&8&&(o=!0,N.value=A[3],Y(()=>o=!1)),l.$set(N);const G={};M&512&&(G.choices=A[9]),!i&&M&16&&(i=!0,G.value=A[4],Y(()=>i=!1)),f.$set(G);const B={};M&4194368&&(B.$$scope={dirty:M,ctx:A}),u.$set(B);const j={};M&4194336&&(j.$$scope={dirty:M,ctx:A}),g.$set(j)},i(A){S||(_(e.$$.fragment,A),_(l.$$.fragment,A),_(f.$$.fragment,A),_(u.$$.fragment,A),_(g.$$.fragment,A),_(y.$$.fragment,A),S=!0)},o(A){d(e.$$.fragment,A),d(l.$$.fragment,A),d(f.$$.fragment,A),d(u.$$.fragment,A),d(g.$$.fragment,A),d(y.$$.fragment,A),S=!1},d(A){A&&(p(t),p(s),p(a),p(c),p(m)),w(e,A),w(l,A),w(f,A),w(u,A),w(g,A),w(y,A)}}}function Oi(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[10].route.toLocaleString()+"",s,f,i=r[10].area.toLocaleString()+"",a,u,c=r[10].crossing.toLocaleString()+"",g,m,y=r[10].other.toLocaleString()+"",S,P,T=sr(r[10].totalLength).toFixed(1)+"",D,F;return{c(){e=k("Showing "),t=k(n),l=k(" schemes ("),s=k(o),f=k(`
    routes, `),a=k(i),u=k(` areas,
    `),g=k(c),m=k(" crossings, "),S=k(y),P=k(`
    other, with total LineString length of `),D=k(T),F=k(" miles)")},m(E,I){$(E,e,I),$(E,t,I),$(E,l,I),$(E,s,I),$(E,f,I),$(E,a,I),$(E,u,I),$(E,g,I),$(E,m,I),$(E,S,I),$(E,P,I),$(E,D,I),$(E,F,I)},p(E,I){I&1&&n!==(n=E[0].size.toLocaleString()+"")&&R(t,n),I&1024&&o!==(o=E[10].route.toLocaleString()+"")&&R(s,o),I&1024&&i!==(i=E[10].area.toLocaleString()+"")&&R(a,i),I&1024&&c!==(c=E[10].crossing.toLocaleString()+"")&&R(g,c),I&1024&&y!==(y=E[10].other.toLocaleString()+"")&&R(S,y),I&1024&&T!==(T=sr(E[10].totalLength).toFixed(1)+"")&&R(D,T)},d(E){E&&(p(e),p(t),p(l),p(s),p(f),p(a),p(u),p(g),p(m),p(S),p(P),p(D),p(F))}}}function Li(r){let e,n,t;function l(s){r[18](s)}let o={id:"show-schemes",$$slots:{default:[Oi]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),W.push(()=>X(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&4195329&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],Y(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ai(r){let e,n,t,l;return e=new Fe({props:{label:"Filters",$$slots:{default:[Ti]},$$scope:{ctx:r}}}),t=new tt({props:{small:!0,$$slots:{default:[Li]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&4195324&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&4195331&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function sr(r){return r*621371e-9}function Ii(r,e,n){let t,l,o,s;be(r,Jt,N=>n(5,t=N)),be(r,Qt,N=>n(6,l=N)),be(r,At,N=>n(19,o=N)),be(r,Rt,N=>n(20,s=N));let{schemesToBeShown:f=new Set}=e,{show:i=!0}=e,a=[],u="",c=[],g="",m=[],y="",S={area:0,route:0,crossing:0,other:0,totalLength:0};wn(()=>{var j,z,q;let N=new Set,G=new Set,B=new Set;for(let Z of s.values())(j=Z.browse)!=null&&j.authority_or_region&&N.add(Z.browse.authority_or_region),(z=Z.browse)!=null&&z.funding_programme&&G.add(Z.browse.funding_programme),(q=Z.browse)!=null&&q.current_milestone&&B.add(Z.browse.current_milestone);n(7,a=Array.from(N.entries())),a.sort(),n(8,c=Array.from(G.entries())),c.sort(),n(9,m=Array.from(B.entries())),m.sort()});function P(N,G,B,j,z){let q=N.toLowerCase(),Z=G.toLowerCase(),ie=ae=>{var ve,de,Ne,ce,$e;if(q&&!((ve=ae.properties.name)!=null&&ve.toLowerCase().includes(q))&&!((de=ae.properties.description)!=null&&de.toLowerCase().includes(q)))return!1;if(Z||B||j||z){let ue=s.get(ae.properties.scheme_reference);if(B&&((Ne=ue.browse)==null?void 0:Ne.authority_or_region)!=B||j&&((ce=ue.browse)==null?void 0:ce.funding_programme)!=j||z&&(($e=ue.browse)==null?void 0:$e.current_milestone)!=z||Z&&!ue.scheme_reference.toLowerCase().includes(Z)&&!(ue.scheme_name??"").toLowerCase().includes(Z))return!1}return!0};n(0,f=new Set(o.features.filter(ie).map(ae=>ae.properties.scheme_reference))),n(10,S={area:0,route:0,crossing:0,other:0,totalLength:0});let Te=ae=>{var ve,de;return!(!f.has(ae.properties.scheme_reference)||q&&!((ve=ae.properties.name)!=null&&ve.toLowerCase().includes(q))&&!((de=ae.properties.description)!=null&&de.toLowerCase().includes(q)))};for(let ae of o.features)Te(ae)?(delete ae.properties.hide_while_editing,n(10,S[ae.properties.intervention_type]++,S),ae.geometry.type=="LineString"&&ae.properties.length_meters&&n(10,S.totalLength+=ae.properties.length_meters,S)):ae.properties.hide_while_editing=!0;At.set(o),n(10,S)}function T(N){u=N,n(2,u)}function D(N){g=N,n(3,g)}function F(N){y=N,n(4,y)}function E(){l=this.value,Qt.set(l)}const I=()=>Lt(Qt,l="",l);function A(){t=this.value,Jt.set(t)}const M=()=>Lt(Jt,t="",t);function O(N){i=N,n(1,i)}return r.$$set=N=>{"schemesToBeShown"in N&&n(0,f=N.schemesToBeShown),"show"in N&&n(1,i=N.show)},r.$$.update=()=>{r.$$.dirty&124&&P(l,t,u,g,y)},[f,i,u,g,y,t,l,a,c,m,S,T,D,F,E,I,A,M,O]}class Pi extends J{constructor(e){super(),K(this,e,Ii,Ai,V,{schemesToBeShown:0,show:1})}}function Mi(r){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ni(r){let e,n,t,l,o;return t=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Mi]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("License: "),b(t.$$.fragment),l=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,f){$(s,e,f),h(e,n),v(t,e,null),h(e,l),o=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){o||(_(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class Me extends J{constructor(e){super(),K(this,e,null,Ni,V,{})}}function ir(r,e,n){const t=r.slice();return t[2]=e[n],t}function ar(r,e,n){const t=r.slice();return t[5]=e[n],t}function fr(r){let e,n;return{c(){e=C("span"),n=k(`
    `),Ce(e,"background",r[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,l){$(t,e,l),h(e,n)},p(t,l){l&1&&Ce(e,"background",t[5])},d(t){t&&p(e)}}}function ur(r){let e,n=r[2]+"",t;return{c(){e=C("span"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&R(t,n)},d(l){l&&p(e)}}}function Di(r){let e,n,t,l=Pe(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=fr(ar(r,l,i));let s=Pe(r[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=ur(ir(r,s,i));return{c(){e=C("div");for(let i=0;i<o.length;i+=1)o[i].c();n=L(),t=C("div");for(let i=0;i<f.length;i+=1)f[i].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);$(i,n,a),$(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){l=Pe(i[0]);let u;for(u=0;u<l.length;u+=1){const c=ar(i,l,u);o[u]?o[u].p(c,a):(o[u]=fr(c),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}if(a&2){s=Pe(i[1]);let u;for(u=0;u<s.length;u+=1){const c=ir(i,s,u);f[u]?f[u].p(c,a):(f[u]=ur(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:ne,o:ne,d(i){i&&(p(e),p(n),p(t)),Ot(o,i),Ot(f,i)}}}function Ei(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Qe extends J{constructor(e){super(),K(this,e,Ei,Di,V,{colorScale:0,limits:1})}}function cr(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Fi(r){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ji(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ri(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bi(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hi(r){let e,n,t,l,o,s,f,i,a,u,c,g;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ji]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ri]},$$scope:{ctx:r}}}),u=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Bi]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=L(),i=C("p"),a=k("License: "),b(u.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(m,f,y),$(m,i,y),h(i,a),v(u,i,null),h(i,c),g=!0},p(m,y){const S={};y&65536&&(S.$$scope={dirty:y,ctx:m}),t.$set(S);const P={};y&65536&&(P.$$scope={dirty:y,ctx:m}),o.$set(P);const T={};y&65536&&(T.$$scope={dirty:y,ctx:m}),u.$set(T)},i(m){g||(_(t.$$.fragment,m),_(o.$$.fragment,m),_(u.$$.fragment,m),g=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),g=!1},d(m){m&&(p(e),p(f),p(i)),w(t),w(o),w(u)}}}function zi(r){let e,n,t;return n=new me({props:{$$slots:{default:[Hi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function $r(r){let e,n;return e=new Qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gi(r){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ui(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y;return o=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[qi]},$$scope:{ctx:r}}}),g=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Wi]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=C("p"),l=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(f.$$.fragment),i=k("."),a=L(),u=C("p"),c=k("License: "),b(g.$$.fragment),m=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(S,P){$(S,e,P),$(S,n,P),$(S,t,P),h(t,l),v(o,t,null),h(t,s),v(f,t,null),h(t,i),$(S,a,P),$(S,u,P),h(u,c),v(g,u,null),h(u,m),y=!0},p(S,P){const T={};P&65536&&(T.$$scope={dirty:P,ctx:S}),o.$set(T);const D={};P&65536&&(D.$$scope={dirty:P,ctx:S}),f.$set(D);const F={};P&65536&&(F.$$scope={dirty:P,ctx:S}),g.$set(F)},i(S){y||(_(o.$$.fragment,S),_(f.$$.fragment,S),_(g.$$.fragment,S),y=!0)},o(S){d(o.$$.fragment,S),d(f.$$.fragment,S),d(g.$$.fragment,S),y=!1},d(S){S&&(p(e),p(n),p(t),p(a),p(u)),w(o),w(f),w(g)}}}function Xi(r){let e,n,t;return n=new me({props:{$$slots:{default:[Vi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function pr(r){let e,n;return e=new Qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Yi(r){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qi(r){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ji(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ki(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Qi]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ji]},$$scope:{ctx:r}}}),i=new Me({}),{c(){e=C("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=L(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const m={};c&65536&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function Zi(r){let e,n,t;return n=new me({props:{$$slots:{default:[Ki]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function mr(r){let e,n,t,l;return t=new Qe({props:{colorScale:r[4],limits:r[6]().map(sa)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",n=L(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:ne,i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function xi(r){let e,n,t,l=r[15].toLocaleString()+"",o,s,f=r[14]+"",i;return{c(){e=C("p"),n=k("There are "),t=C("b"),o=k(l),s=k(`
          people per square kilometre in `),i=k(f)},m(a,u){$(a,e,u),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,u){u&8200&&l!==(l=a[15].toLocaleString()+"")&&R(o,l),u&8192&&f!==(f=a[14]+"")&&R(i,f)},d(a){a&&p(e)}}}function ea(r){let e,n,t=r[14]+"",l,o,s,f=r[15]+"",i,a;return{c(){e=C("p"),n=k("Households in "),l=k(t),o=k(` have an average of
          `),s=C("b"),i=k(f),a=k(`
          cars`)},m(u,c){$(u,e,c),h(e,n),h(e,l),h(e,o),h(e,s),h(s,i),h(e,a)},p(u,c){c&8192&&t!==(t=u[14]+"")&&R(l,t),c&8200&&f!==(f=u[15]+"")&&R(i,f)},d(u){u&&p(e)}}}function ta(r){let e,n,t=r[15]+"",l,o,s,f=r[14]+"",i,a;return{c(){e=C("p"),n=C("b"),l=k(t),o=k("%"),s=k(`
          of households in `),i=k(f),a=k(" have 1 or more cars")},m(u,c){$(u,e,c),h(e,n),h(n,l),h(n,o),h(e,s),h(e,i),h(e,a)},p(u,c){c&8200&&t!==(t=u[15]+"")&&R(l,t),c&8192&&f!==(f=u[14]+"")&&R(i,f)},d(u){u&&p(e)}}}function na(r){cr(r);let e;function n(o,s){return o[3]=="percent_households_with_car"?ta:o[3]=="average_cars_per_household"?ea:xi}let t=n(r),l=t(r);return{c(){l.c(),e=Ie()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){cr(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function ra(r){let e,n;return e=new fe({props:{$$slots:{default:[na,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function la(r){let e,n,t,l;const o=[H(Ze),{sourceLayer:Ze},{paint:{"fill-color":ye(["get",r[3]],r[6](),r[4]),"fill-opacity":x(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ra]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s}),e.$on("click",r[5]);const f=[H(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&88?te(o,[u&0&&oe(H(Ze)),u&0&&{sourceLayer:Ze},u&88&&{paint:{"fill-color":ye(["get",a[3]],a[6](),a[4]),"fill-opacity":x(.5,.7)}},u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};u&65544&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&8?te(f,[u&0&&oe(H(`${Ze}-outline`)),u&0&&{sourceLayer:Ze},f[2],u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function oa(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y;function S(O){r[7](O)}let P={id:"percent_households_with_car",$$slots:{right:[zi],default:[Fi]},$$scope:{ctx:r}};r[0]!==void 0&&(P.checked=r[0]),e=new se({props:P}),W.push(()=>X(e,"checked",S)),e.$on("change",r[8]);let T=r[3]=="percent_households_with_car"&&$r(r);function D(O){r[9](O)}let F={id:"average_cars_per_household",$$slots:{right:[Xi],default:[Gi]},$$scope:{ctx:r}};r[1]!==void 0&&(F.checked=r[1]),o=new se({props:F}),W.push(()=>X(o,"checked",D)),o.$on("change",r[10]);let E=r[3]=="average_cars_per_household"&&pr(r);function I(O){r[11](O)}let A={id:"population_density",$$slots:{right:[Zi],default:[Yi]},$$scope:{ctx:r}};r[2]!==void 0&&(A.checked=r[2]),a=new se({props:A}),W.push(()=>X(a,"checked",I)),a.$on("change",r[12]);let M=r[3]=="population_density"&&mr(r);return m=new ke({props:{url:`pmtiles://${we()}/v1/${Ze}.pmtiles`,$$slots:{default:[la]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),T&&T.c(),l=L(),b(o.$$.fragment),f=L(),E&&E.c(),i=L(),b(a.$$.fragment),c=L(),M&&M.c(),g=L(),b(m.$$.fragment)},m(O,N){v(e,O,N),$(O,t,N),T&&T.m(O,N),$(O,l,N),v(o,O,N),$(O,f,N),E&&E.m(O,N),$(O,i,N),v(a,O,N),$(O,c,N),M&&M.m(O,N),$(O,g,N),v(m,O,N),y=!0},p(O,[N]){const G={};N&65536&&(G.$$scope={dirty:N,ctx:O}),!n&&N&1&&(n=!0,G.checked=O[0],Y(()=>n=!1)),e.$set(G),O[3]=="percent_households_with_car"?T?(T.p(O,N),N&8&&_(T,1)):(T=$r(O),T.c(),_(T,1),T.m(l.parentNode,l)):T&&(_e(),d(T,1,1,()=>{T=null}),ge());const B={};N&65536&&(B.$$scope={dirty:N,ctx:O}),!s&&N&2&&(s=!0,B.checked=O[1],Y(()=>s=!1)),o.$set(B),O[3]=="average_cars_per_household"?E?(E.p(O,N),N&8&&_(E,1)):(E=pr(O),E.c(),_(E,1),E.m(i.parentNode,i)):E&&(_e(),d(E,1,1,()=>{E=null}),ge());const j={};N&65536&&(j.$$scope={dirty:N,ctx:O}),!u&&N&4&&(u=!0,j.checked=O[2],Y(()=>u=!1)),a.$set(j),O[3]=="population_density"?M?(M.p(O,N),N&8&&_(M,1)):(M=mr(O),M.c(),_(M,1),M.m(g.parentNode,g)):M&&(_e(),d(M,1,1,()=>{M=null}),ge());const z={};N&65544&&(z.$$scope={dirty:N,ctx:O}),m.$set(z)},i(O){y||(_(e.$$.fragment,O),_(T),_(o.$$.fragment,O),_(E),_(a.$$.fragment,O),_(M),_(m.$$.fragment,O),y=!0)},o(O){d(e.$$.fragment,O),d(T),d(o.$$.fragment,O),d(E),d(a.$$.fragment,O),d(M),d(m.$$.fragment,O),y=!1},d(O){O&&(p(t),p(l),p(f),p(i),p(c),p(g)),w(e,O),T&&T.d(O),w(o,O),E&&E.d(O),w(a,O),M&&M.d(O),w(m,O)}}}let Ze="census_output_areas";const sa=r=>r.toLocaleString();function ia(r,e,n){let t=le.sequential_low_to_high,l=!1,o=!1,s=!1,f="";function i(P){let T=P.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${T}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${T}`,"_blank")}function a(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function u(P){l=P,n(0,l)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(P){o=P,n(1,o)}const m=()=>{n(0,l=!1),n(2,s=!1)};function y(P){s=P,n(2,s)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,f="percent_households_with_car"):o?n(3,f="average_cars_per_household"):s?n(3,f="population_density"):n(3,f=""))},[l,o,s,f,t,i,a,u,c,g,m,y,S]}class aa extends J{constructor(e){super(),K(this,e,ia,oa,V,{})}}function fa(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function ua(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ca(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ua]},$$scope:{ctx:r}}}),s=new Me({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of December 2022."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function $a(r){let e,n,t;return n=new me({props:{$$slots:{default:[ca]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function pa(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function ma(r){let e,n;return e=new fe({props:{$$slots:{default:[pa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _a(r){let e,n,t,l;const o=[H(pt),{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ma]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s}),e.$on("click",da);const f=[H(`${pt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&oe(H(pt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&oe(H(`${pt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function ga(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:pt,$$slots:{right:[$a],default:[fa]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>X(e,"checked",s)),l=new It({props:{data:`${we()}/v1/${pt}.geojson`,$$slots:{default:[_a]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],Y(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let pt="combined_authorities";function da(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function ha(r,e,n){let t=le.combined_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ba extends J{constructor(e){super(),K(this,e,ha,ga,V,{})}}function va(r){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wa(r){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ka(r){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ya(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[wa]},$$scope:{ctx:r}}}),o=new Q({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ka]},$$scope:{ctx:r}}}),i=new Me({}),{c(){e=C("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),l=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),f=L(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const m={};c&32&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function Sa(r){let e,n,t;return n=new me({props:{$$slots:{default:[ya]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function _r(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ca(r){let e,n=r[4].LSOA11CD+"",t,l,o,s=r[4].score+"",f,i,a,u,c,g=r[4].rank.toLocaleString()+"",m,y;return{c(){e=C("p"),t=k(n),l=k(` has an IMD score of
        `),o=C("b"),f=k(s),i=L(),a=C("p"),u=k("Rank: "),c=C("b"),m=k(g),y=k(`
        / 32,844 LSOAs`)},m(S,P){$(S,e,P),h(e,t),h(e,l),h(e,o),h(o,f),$(S,i,P),$(S,a,P),h(a,u),h(a,c),h(c,m),h(a,y)},p(S,P){P&16&&n!==(n=S[4].LSOA11CD+"")&&R(t,n),P&16&&s!==(s=S[4].score+"")&&R(f,s),P&16&&g!==(g=S[4].rank.toLocaleString()+"")&&R(m,g)},d(S){S&&(p(e),p(i),p(a))}}}function Ta(r){let e,n;return e=new fe({props:{$$slots:{default:[Ca,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Oa(r){let e,n,t,l;const o=[H(He),{sourceLayer:He},{paint:{"fill-color":ye(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":x(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ta]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s});const f=[H(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&7?te(o,[u&0&&oe(H(He)),u&0&&{sourceLayer:He},u&6&&{paint:{"fill-color":ye(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":x(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&1?te(f,[u&0&&oe(H(`${He}-outline`)),u&0&&{sourceLayer:He},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function La(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:He,$$slots:{right:[Sa],default:[va]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),W.push(()=>X(e,"checked",f));let a=r[0]&&_r(r);return o=new ke({props:{url:`pmtiles://${we()}/v1/${He}.pmtiles`,$$slots:{default:[Oa]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],Y(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=_r(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let He="imd";function Aa(r,e,n){let t=le.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class Ia extends J{constructor(e){super(),K(this,e,Aa,La,V,{})}}function Pa(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Ma(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Na(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Ma]},$$scope:{ctx:r}}}),s=new Me({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Da(r){let e,n,t;return n=new me({props:{$$slots:{default:[Na]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Ea(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Fa(r){let e,n;return e=new fe({props:{$$slots:{default:[Ea,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ja(r){let e,n,t,l;const o=[H(mt),{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Fa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s}),e.$on("click",Ba);const f=[H(`${mt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&oe(H(mt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&oe(H(`${mt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Ra(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:mt,$$slots:{right:[Da],default:[Pa]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>X(e,"checked",s)),l=new It({props:{data:`${we()}/v1/${mt}.geojson`,$$slots:{default:[ja]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],Y(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let mt="local_authority_districts";function Ba(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Ha(r,e,n){let t=le.local_authority_districts,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class za extends J{constructor(e){super(),K(this,e,Ha,Ra,V,{})}}function Ga(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Ua(r){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qa(r){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wa(r){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Va(r){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xa(r){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ya(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S,P,T,D,F,E,I,A;return t=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ua]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[qa]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Wa]},$$scope:{ctx:r}}}),m=new Q({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Va]},$$scope:{ctx:r}}}),D=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),I=new Me({}),{c(){e=C("p"),n=k("LPAs may be a "),b(t.$$.fragment),l=k(", "),b(o.$$.fragment),s=k("y, or "),b(f.$$.fragment),i=k("."),a=L(),u=C("p"),c=C("strong"),g=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(m.$$.fragment),y=k(" to get more details."),S=L(),P=C("p"),T=k("Data from ONS Geography via "),b(D.$$.fragment),F=k(", as of November 2022."),E=L(),b(I.$$.fragment)},m(M,O){$(M,e,O),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),v(f,e,null),h(e,i),$(M,a,O),$(M,u,O),h(u,c),h(c,g),v(m,c,null),h(c,y),$(M,S,O),$(M,P,O),h(P,T),v(D,P,null),h(P,F),$(M,E,O),v(I,M,O),A=!0},p(M,O){const N={};O&16&&(N.$$scope={dirty:O,ctx:M}),t.$set(N);const G={};O&16&&(G.$$scope={dirty:O,ctx:M}),o.$set(G);const B={};O&16&&(B.$$scope={dirty:O,ctx:M}),f.$set(B);const j={};O&16&&(j.$$scope={dirty:O,ctx:M}),m.$set(j);const z={};O&16&&(z.$$scope={dirty:O,ctx:M}),D.$set(z)},i(M){A||(_(t.$$.fragment,M),_(o.$$.fragment,M),_(f.$$.fragment,M),_(m.$$.fragment,M),_(D.$$.fragment,M),_(I.$$.fragment,M),A=!0)},o(M){d(t.$$.fragment,M),d(o.$$.fragment,M),d(f.$$.fragment,M),d(m.$$.fragment,M),d(D.$$.fragment,M),d(I.$$.fragment,M),A=!1},d(M){M&&(p(e),p(a),p(u),p(S),p(P),p(E)),w(t),w(o),w(f),w(m),w(D),w(I,M)}}}function Qa(r){let e,n,t;return n=new me({props:{$$slots:{default:[Ya]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Ja(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Ka(r){let e,n;return e=new fe({props:{$$slots:{default:[Ja,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Za(r){let e,n,t,l;const o=[H(ze),{sourceLayer:ze},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ka]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s});const f=[H(`${ze}-outline`),{sourceLayer:ze},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&oe(H(ze)),u&0&&{sourceLayer:ze},u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&oe(H(`${ze}-outline`)),u&0&&{sourceLayer:ze},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function xa(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:ze,$$slots:{right:[Qa],default:[Ga]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>X(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${ze}.pmtiles`,$$slots:{default:[Za]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],Y(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let ze="local_planning_authorities";function ef(r,e,n){let t=le.local_planning_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class tf extends J{constructor(e){super(),K(this,e,ef,xa,V,{})}}function nf(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function rf(r){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[rf]},$$scope:{ctx:r}}}),s=new Me({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function of(r){let e,n,t;return n=new me({props:{$$slots:{default:[lf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function sf(r){let e,n=r[3].Name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&R(t,n)},d(l){l&&p(e)}}}function af(r){let e,n;return e=new fe({props:{$$slots:{default:[sf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ff(r){let e,n,t,l;const o=[H(Ge),{sourceLayer:Ge},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[af]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s}),e.$on("click",cf);const f=[H(`${Ge}-outline`),{sourceLayer:Ge},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&oe(H(Ge)),u&0&&{sourceLayer:Ge},u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&oe(H(`${Ge}-outline`)),u&0&&{sourceLayer:Ge},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function uf(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Ge,$$slots:{right:[of],default:[nf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>X(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${Ge}.pmtiles`,$$slots:{default:[ff]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],Y(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ge="parliamentary_constituencies";function cf(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function $f(r,e,n){let t=le.parliamentary_constituencies,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class pf extends J{constructor(e){super(),K(this,e,$f,uf,V,{})}}function mf(r){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _f(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gf(r){let e;return{c(){e=k(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function df(r){let e;return{c(){e=k(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hf(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S,P;return t=new Q({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[_f]},$$scope:{ctx:r}}}),u=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[gf]},$$scope:{ctx:r}}}),g=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[df]},$$scope:{ctx:r}}}),S=new Me({}),{c(){e=C("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),l=k(`. The measurements are annual means, in units of
        gm
        `),o=C("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),f=L(),i=C("p"),a=k("The noise layer is from "),b(u.$$.fragment),c=k(", using 2017 data. See their "),b(g.$$.fragment),m=k("."),y=L(),b(S.$$.fragment)},m(T,D){$(T,e,D),h(e,n),v(t,e,null),h(e,l),h(e,o),h(e,s),$(T,f,D),$(T,i,D),h(i,a),v(u,i,null),h(i,c),v(g,i,null),h(i,m),$(T,y,D),v(S,T,D),P=!0},p(T,D){const F={};D&2048&&(F.$$scope={dirty:D,ctx:T}),t.$set(F);const E={};D&2048&&(E.$$scope={dirty:D,ctx:T}),u.$set(E);const I={};D&2048&&(I.$$scope={dirty:D,ctx:T}),g.$set(I)},i(T){P||(_(t.$$.fragment,T),_(u.$$.fragment,T),_(g.$$.fragment,T),_(S.$$.fragment,T),P=!0)},o(T){d(t.$$.fragment,T),d(u.$$.fragment,T),d(g.$$.fragment,T),d(S.$$.fragment,T),P=!1},d(T){T&&(p(e),p(f),p(i),p(y)),w(t),w(u),w(g),w(S,T)}}}function bf(r){let e,n,t;return n=new me({props:{$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function gr(r){let e,n,t,l,o=r[3](r[0])+"",s,f,i,a,u,c,g,m,y,S,P,T,D;function F(O){r[7](O)}let E={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(E.value=r[0]),e=new Tt({props:E}),W.push(()=>X(e,"value",F));const I=[wf,vf],A=[];function M(O,N){return O[0]=="Noise"?0:1}return m=M(r),y=A[m]=I[m](r),{c(){b(e.$$.fragment),t=L(),l=C("p"),s=k(o),f=L(),i=C("div"),a=C("label"),u=k(`Opacity
      `),c=C("input"),g=L(),y.c(),S=Ie(),U(c,"type","range"),U(c,"min","0"),U(c,"max","100")},m(O,N){v(e,O,N),$(O,t,N),$(O,l,N),h(l,s),$(O,f,N),$(O,i,N),h(i,a),h(a,u),h(a,c),Ve(c,r[2]),$(O,g,N),A[m].m(O,N),$(O,S,N),P=!0,T||(D=[st(c,"change",r[8]),st(c,"input",r[8])],T=!0)},p(O,N){const G={};!n&&N&1&&(n=!0,G.value=O[0],Y(()=>n=!1)),e.$set(G),(!P||N&1)&&o!==(o=O[3](O[0])+"")&&R(s,o),N&4&&Ve(c,O[2]);let B=m;m=M(O),m===B?A[m].p(O,N):(_e(),d(A[B],1,1,()=>{A[B]=null}),ge(),y=A[m],y?y.p(O,N):(y=A[m]=I[m](O),y.c()),_(y,1),y.m(S.parentNode,S))},i(O){P||(_(e.$$.fragment,O),_(y),P=!0)},o(O){d(e.$$.fragment,O),d(y),P=!1},d(O){O&&(p(t),p(l),p(f),p(i),p(g),p(S)),w(e,O),A[m].d(O),T=!1,sl(D)}}}function vf(r){let e,n,t;return{c(){e=C("img"),In(e.src,n=r[5](r[0]))||U(e,"src",n),U(e,"width",150),U(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!In(e.src,n=l[5](l[0]))&&U(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&U(e,"alt",t)},i:ne,o:ne,d(l){l&&p(e)}}}function wf(r){let e,n;return e=new Qe({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function kf(r){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Gl({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function yf(r){let e,n,t,l,o,s;function f(u){r[6](u)}let i={id:"pollution",$$slots:{right:[bf],default:[mf]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new se({props:i}),W.push(()=>X(e,"checked",f));let a=r[1]&&gr(r);return o=new no({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[kf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,g.checked=u[1],Y(()=>n=!1)),e.$set(g),u[1]?a?(a.p(u,c),c&2&&_(a,1)):(a=gr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&1&&(m.tiles=[u[4](u[0])]),c&2054&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}function Sf(r,e,n){let t,l=!1,o=50,s="PM25_viridis";function f(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${f()}?bbox={bbox-epsg-3857}&${S}`}function u(y){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${f()}?${S}`}function c(y){l=y,n(1,l)}function g(y){s=y,n(0,s)}function m(){o=Et(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,l,o,i,a,u,c,g,m]}class Cf extends J{constructor(e){super(),K(this,e,Sf,yf,V,{})}}function Tf(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Of(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lf(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Of]},$$scope:{ctx:r}}}),s=new Me({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Af(r){let e,n,t;return n=new me({props:{$$slots:{default:[Lf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function If(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Pf(r){let e,n;return e=new fe({props:{$$slots:{default:[If,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Mf(r){let e,n,t,l;const o=[H(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Pf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s}),e.$on("click",Df);const f=[H(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&oe(H(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&oe(H(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Nf(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Ue,$$slots:{right:[Af],default:[Tf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>X(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${Ue}.pmtiles`,$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],Y(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ue="wards";function Df(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Ef(r,e,n){let t=le.wards,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Ff extends J{constructor(e){super(),K(this,e,Ef,Nf,V,{})}}function jf(r){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rf(r){let e,n,t,l;return t=new Q({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[jf]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),l=!0},p(o,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:o}),t.$set(f)},i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&p(e),w(t)}}}class it extends J{constructor(e){super(),K(this,e,null,Rf,V,{})}}function Bf(r){let e,n,t;return e=new Oe({props:{color:le.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Hf(r){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zf(r){let e,n,t,l,o,s,f,i,a;return o=new Q({props:{href:"https://gtfs.org",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),i=new it({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=C("p"),l=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),f=L(),b(i.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),h(t,l),v(o,t,null),h(t,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:u}),o.$set(g)},i(u){a||(_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(f)),w(o),w(i,u)}}}function Gf(r){let e,n,t;return n=new me({props:{$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Uf(r){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qf(r){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wf(r){let e;function n(o,s){return o[2].has_bus_lane?qf:Uf}let t=n(r),l=t(r);return{c(){l.c(),e=Ie()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Vf(r){let e,n;return e=new fe({props:{$$slots:{default:[Wf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Xf(r){let e,n;const t=[H(_t),{sourceLayer:_t},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],le.bus_route_with_lane,le.bus_route_without_lane],"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Vf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?te(t,[s&0&&oe(H(_t)),s&0&&{sourceLayer:_t},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Yf(r){let e,n,t,l,o;function s(i){r[1](i)}let f={id:_t,$$slots:{right:[Gf],default:[Bf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>X(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${_t}.pmtiles`,$$slots:{default:[Xf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],Y(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let _t="bus_routes";function Qf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Jf extends J{constructor(e){super(),K(this,e,Qf,Yf,V,{})}}function dr(r){const e=su(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function hr(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function Kf(r){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zf(r){let e,n,t,l,o,s,f,i;return f=new it({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=L(),o=C("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=L(),b(f.$$.fragment)},m(a,u){$(a,e,u),$(a,n,u),$(a,t,u),$(a,l,u),$(a,o,u),$(a,s,u),v(f,a,u),i=!0},p:ne,i(a){i||(_(f.$$.fragment,a),i=!0)},o(a){d(f.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(s)),w(f,a)}}}function xf(r){let e,n,t;return n=new me({props:{$$slots:{default:[Zf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function br(r){let e,n,t;return n=new tt({props:{$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function eu(r){let e,n,t=r[9]+"",l,o,s;return e=new Oe({props:{color:r[10]}}),{c(){b(e.$$.fragment),n=L(),l=k(t),o=L()},m(f,i){v(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p:ne,i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),w(e,f)}}}function vr(r){let e,n,t;function l(s){r[4](s,r[6])}let o={id:r[6],$$slots:{default:[eu]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new se({props:o}),W.push(()=>X(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){r=s;const i={};f&8192&&(i.$$scope={dirty:f,ctx:r}),!n&&f&6&&(n=!0,i.checked=r[1][r[6]],Y(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function tu(r){let e,n,t=Pe(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=vr(hr(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Ie()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);$(s,e,f),n=!0},p(s,f){if(f&6){t=Pe(s[2]);let i;for(i=0;i<t.length;i+=1){const a=hr(s,t,i);l[i]?(l[i].p(a,f),_(l[i],1)):(l[i]=vr(a),l[i].c(),_(l[i],1),l[i].m(e.parentNode,e))}for(_e(),i=t.length;i<l.length;i+=1)o(i);ge()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)_(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)d(l[f]);n=!1},d(s){s&&p(e),Ot(l,s)}}}function nu(r){dr(r);let e,n=r[6]+"",t,l,o,s,f,i=r[7]+"",a,u,c,g,m=r[8]+"",y;return{c(){e=C("h2"),t=k(n),l=L(),o=C("p"),s=k("Direction: "),f=C("b"),a=L(),u=C("p"),c=k("Width: "),g=C("b"),y=k(m)},m(S,P){$(S,e,P),h(e,t),$(S,l,P),$(S,o,P),h(o,s),h(o,f),f.innerHTML=i,$(S,a,P),$(S,u,P),h(u,c),h(u,g),h(g,y)},p(S,P){dr(S),P&32&&n!==(n=S[6]+"")&&R(t,n),P&32&&i!==(i=S[7]+"")&&(f.innerHTML=i),P&32&&m!==(m=S[8]+"")&&R(y,m)},d(S){S&&(p(e),p(l),p(o),p(a),p(u))}}}function ru(r){let e,n;return e=new fe({props:{$$slots:{default:[nu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function lu(r){let e,n;const t=[H(gt),{sourceLayer:gt},{paint:{"line-color":Kt(["get","kind"],{track:le.cycle_paths.track,lane:le.cycle_paths.lane,shared_use_segregated:le.cycle_paths.shared_use_segregated,shared_use_unsegregated:le.cycle_paths.shared_use_unsegregated},"red"),"line-width":Re,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:wr(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[ru]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),e.$on("click",iu),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&oe(H(gt)),s&0&&{sourceLayer:gt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:wr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ou(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:gt,$$slots:{right:[xf],default:[Kf]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),W.push(()=>X(e,"checked",f));let a=r[0]&&br(r);return o=new ke({props:{url:`pmtiles://${we()}/v1/${gt}.pmtiles`,$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],Y(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=br(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&8195&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let gt="cycle_paths";function su(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function iu(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function wr(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function au(r,e,n){let t=[["track","Separated tracks",le.cycle_paths.track],["lane","Unprotected lanes",le.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",le.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",le.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){l=i,n(0,l)}function f(i,a){r.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[l,o,t,s,f]}class fu extends J{constructor(e){super(),K(this,e,au,ou,V,{})}}function uu(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function cu(r){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $u(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[cu]},$$scope:{ctx:r}}}),s=new Me({}),{c(){e=C("p"),n=k("Data from the "),b(t.$$.fragment),l=k(", as of September 2021."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function pu(r){let e,n,t;return n=new me({props:{$$slots:{default:[$u]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function mu(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&R(t,n)},d(l){l&&p(e)}}}function _u(r){let e,n;return e=new fe({props:{$$slots:{default:[mu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gu(r){let e,n;const t=[H(dt),{sourceLayer:dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[_u]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&oe(H(dt)),s&0&&{sourceLayer:dt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function du(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:dt,$$slots:{right:[pu],default:[uu]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>X(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${dt}.pmtiles`,$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],Y(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let dt="mrn";function hu(r,e,n){let t=le.mrn,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class bu extends J{constructor(e){super(),K(this,e,hu,du,V,{})}}function vu(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function wu(r){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ku(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[wu]},$$scope:{ctx:r}}}),s=new Me({}),{c(){e=C("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),l=k(", downloaded on 22/01/2024."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function yu(r){let e,n,t;return n=new me({props:{$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function kr(r){let e,n,t,l=r[3].Desc_+"",o;return{c(){e=C("li"),n=k("Description: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Desc_+"")&&R(o,l)},d(s){s&&p(e)}}}function yr(r){let e,n,t,l=r[3].Greenway+"",o;return{c(){e=C("li"),n=k("Is greenway: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Greenway+"")&&R(o,l)},d(s){s&&p(e)}}}function Sr(r){let e,n,t,l=r[3].RouteType+"",o;return{c(){e=C("li"),n=k("Route type: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteType+"")&&R(o,l)},d(s){s&&p(e)}}}function Cr(r){let e,n,t,l=r[3].RouteNo+"",o;return{c(){e=C("li"),n=k("Route number: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteNo+"")&&R(o,l)},d(s){s&&p(e)}}}function Tr(r){let e,n,t,l=r[3].RouteCat+"",o;return{c(){e=C("li"),n=k("Route Category: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteCat+"")&&R(o,l)},d(s){s&&p(e)}}}function Or(r){let e,n,t,l=r[3].OpenStatus+"",o;return{c(){e=C("li"),n=k("Open Status: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].OpenStatus+"")&&R(o,l)},d(s){s&&p(e)}}}function Lr(r){let e,n,t,l=r[3].Surface+"",o;return{c(){e=C("li"),n=k("Surface: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Surface+"")&&R(o,l)},d(s){s&&p(e)}}}function Ar(r){let e,n,t,l=r[3].Quality+"",o;return{c(){e=C("li"),n=k("Quality: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Quality+"")&&R(o,l)},d(s){s&&p(e)}}}function Ir(r){let e,n,t,l=r[3].RoadClass+"",o;return{c(){e=C("li"),n=k("Road Class: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RoadClass+"")&&R(o,l)},d(s){s&&p(e)}}}function Su(r){let e,n,t,l,o,s,f,i,a,u=r[3].Desc_&&kr(r),c=r[3].Greenway&&yr(r),g=r[3].RouteType&&Sr(r),m=r[3].RouteNo&&Cr(r),y=r[3].RouteCat&&Tr(r),S=r[3].OpenStatus&&Or(r),P=r[3].Surface&&Lr(r),T=r[3].Quality&&Ar(r),D=r[3].RoadClass&&Ir(r);return{c(){e=C("ul"),u&&u.c(),n=L(),c&&c.c(),t=L(),g&&g.c(),l=L(),m&&m.c(),o=L(),y&&y.c(),s=L(),S&&S.c(),f=L(),P&&P.c(),i=L(),T&&T.c(),a=L(),D&&D.c()},m(F,E){$(F,e,E),u&&u.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),g&&g.m(e,null),h(e,l),m&&m.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),S&&S.m(e,null),h(e,f),P&&P.m(e,null),h(e,i),T&&T.m(e,null),h(e,a),D&&D.m(e,null)},p(F,E){F[3].Desc_?u?u.p(F,E):(u=kr(F),u.c(),u.m(e,n)):u&&(u.d(1),u=null),F[3].Greenway?c?c.p(F,E):(c=yr(F),c.c(),c.m(e,t)):c&&(c.d(1),c=null),F[3].RouteType?g?g.p(F,E):(g=Sr(F),g.c(),g.m(e,l)):g&&(g.d(1),g=null),F[3].RouteNo?m?m.p(F,E):(m=Cr(F),m.c(),m.m(e,o)):m&&(m.d(1),m=null),F[3].RouteCat?y?y.p(F,E):(y=Tr(F),y.c(),y.m(e,s)):y&&(y.d(1),y=null),F[3].OpenStatus?S?S.p(F,E):(S=Or(F),S.c(),S.m(e,f)):S&&(S.d(1),S=null),F[3].Surface?P?P.p(F,E):(P=Lr(F),P.c(),P.m(e,i)):P&&(P.d(1),P=null),F[3].Quality?T?T.p(F,E):(T=Ar(F),T.c(),T.m(e,a)):T&&(T.d(1),T=null),F[3].RoadClass?D?D.p(F,E):(D=Ir(F),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(F){F&&p(e),u&&u.d(),c&&c.d(),g&&g.d(),m&&m.d(),y&&y.d(),S&&S.d(),P&&P.d(),T&&T.d(),D&&D.d()}}}function Cu(r){let e,n;return e=new fe({props:{$$slots:{default:[Su,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Tu(r){let e,n;const t=[H(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Cu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&oe(H(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Ou(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:ht,$$slots:{right:[yu],default:[vu]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>X(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${ht}.pmtiles`,$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],Y(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let ht="national_cycle_network";function Lu(r,e,n){let t=le.national_cycle_network,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Au extends J{constructor(e){super(),K(this,e,Lu,Ou,V,{})}}function Iu(r){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pu(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mu(r){let e,n,t,l,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Pu]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=L(),t=C("p"),t.textContent="Data valid as of 1 January, 2024",l=L(),o=C("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),h(o,s),v(f,o,null),h(o,i),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),f.$set(g)},i(u){a||(_(f.$$.fragment,u),a=!0)},o(u){d(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),w(f)}}}function Nu(r){let e,n,t;return n=new me({props:{$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Pr(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Du(r){let e,n,t,l=r[4].side+"",o,s,f,i,a,u=r[4].average+"",c,g,m,y,S,P,T=r[4].minimum+"",D,F;return{c(){e=C("p"),n=k("Side of the road: "),t=C("b"),o=k(l),s=L(),f=C("p"),i=k("Average width: "),a=C("b"),c=k(u),g=k(`
        meters`),m=L(),y=C("p"),S=k("Minimum width: "),P=C("b"),D=k(T),F=k(`
        meters`)},m(E,I){$(E,e,I),h(e,n),h(e,t),h(t,o),$(E,s,I),$(E,f,I),h(f,i),h(f,a),h(a,c),h(f,g),$(E,m,I),$(E,y,I),h(y,S),h(y,P),h(P,D),h(y,F)},p(E,I){I&16&&l!==(l=E[4].side+"")&&R(o,l),I&16&&u!==(u=E[4].average+"")&&R(c,u),I&16&&T!==(T=E[4].minimum+"")&&R(D,T)},d(E){E&&(p(e),p(s),p(f),p(m),p(y))}}}function Eu(r){let e,n;return e=new fe({props:{$$slots:{default:[Du,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Fu(r){let e,n;const t=[H(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get","average"],r[2],r[1]),"line-width":Re,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Eu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&oe(H(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&6&&{paint:{"line-color":ye(["get","average"],o[2],o[1]),"line-width":Re,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ju(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:bt,$$slots:{right:[Nu],default:[Iu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),W.push(()=>X(e,"checked",f));let a=r[0]&&Pr(r);return o=new ke({props:{url:`pmtiles://${nn()}/v1/${bt}.pmtiles`,$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],Y(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Pr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let bt="pavement_widths";function Ru(r,e,n){let t=le.sequential_low_to_high,l=[0,2,4,6,8,13],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class Bu extends J{constructor(e){super(),K(this,e,Ru,ju,V,{})}}function Hu(r){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zu(r){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gu(r){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uu(r){let e,n,t,l,o,s,f,i,a,u,c;return f=new Q({props:{href:"https://www.pct.bike",$$slots:{default:[zu]},$$scope:{ctx:r}}}),a=new Q({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=L(),o=C("p"),s=k("See "),b(f.$$.fragment),i=k(" and "),b(a.$$.fragment),u=k(" for details on methodology and data sources.")},m(g,m){$(g,e,m),$(g,n,m),$(g,t,m),$(g,l,m),$(g,o,m),h(o,s),v(f,o,null),h(o,i),v(a,o,null),h(o,u),c=!0},p(g,m){const y={};m&1024&&(y.$$scope={dirty:m,ctx:g}),f.$set(y);const S={};m&1024&&(S.$$scope={dirty:m,ctx:g}),a.$set(S)},i(g){c||(_(f.$$.fragment,g),_(a.$$.fragment,g),c=!0)},o(g){d(f.$$.fragment,g),d(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(l),p(o)),w(f),w(a)}}}function qu(r){let e,n,t;return n=new me({props:{$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Mr(r){let e,n,t,l,o,s,f,i;e=new Qe({props:{colorScale:r[3],limits:r[4]}});function a(m){r[7](m)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(u.value=r[0]),t=new il({props:u}),W.push(()=>X(t,"value",a));function c(m){r[8](m)}let g={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(g.value=r[1]),s=new Tt({props:g}),W.push(()=>X(s,"value",c)),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),o=L(),b(s.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,o,y),v(s,m,y),i=!0},p(m,y){const S={};!l&&y&1&&(l=!0,S.value=m[0],Y(()=>l=!1)),t.$set(S);const P={};!f&&y&2&&(f=!0,P.value=m[1],Y(()=>f=!1)),s.$set(P)},i(m){i||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(s.$$.fragment,m),i=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(s.$$.fragment,m),i=!1},d(m){m&&(p(n),p(o)),w(e,m),w(t,m),w(s,m)}}}function Wu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Nt(!1),t=Ie(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Vu(r){let e,n;return e=new fe({props:{$$slots:{default:[Wu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Xu(r){let e,n;const t=[H(qe),{sourceLayer:qe},{paint:{"line-color":ye(["get",r[1]],r[4],r[3]),"line-width":Re,"line-opacity":x(1,.5)}},{layout:{visibility:r[2]&&r[0]==qe?"visible":"none"}}];let l={$$slots:{default:[Vu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&31?te(t,[s&0&&oe(H(qe)),s&0&&{sourceLayer:qe},s&26&&{paint:{"line-color":ye(["get",o[1]],o[4],o[3]),"line-width":Re,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==qe?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Yu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Nt(!1),t=Ie(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Qu(r){let e,n;return e=new fe({props:{$$slots:{default:[Yu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ju(r){let e,n;const t=[H(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get",r[1]],r[4],r[3]),"line-width":Re,"line-opacity":x(1,.5)}},{layout:{visibility:r[2]&&r[0]==at?"visible":"none"}}];let l={$$slots:{default:[Qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&31?te(t,[s&0&&oe(H(at)),s&0&&{sourceLayer:at},t[2],t[3],s&26&&{paint:{"line-color":ye(["get",o[1]],o[4],o[3]),"line-width":Re,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==at?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Ku(r){let e,n,t,l,o,s,f,i;function a(g){r[6](g)}let u={id:qe,$$slots:{right:[qu],default:[Hu]},$$scope:{ctx:r}};r[2]!==void 0&&(u.checked=r[2]),e=new se({props:u}),W.push(()=>X(e,"checked",a));let c=r[2]&&Mr(r);return o=new ke({props:{url:`pmtiles://${we()}/v1/${qe}.pmtiles`,$$slots:{default:[Xu]},$$scope:{ctx:r}}}),f=new ke({props:{url:`pmtiles://${we()}/v1/${at}.pmtiles`,$$slots:{default:[Ju]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),c&&c.c(),l=L(),b(o.$$.fragment),s=L(),b(f.$$.fragment)},m(g,m){v(e,g,m),$(g,t,m),c&&c.m(g,m),$(g,l,m),v(o,g,m),$(g,s,m),v(f,g,m),i=!0},p(g,[m]){const y={};m&1024&&(y.$$scope={dirty:m,ctx:g}),!n&&m&4&&(n=!0,y.checked=g[2],Y(()=>n=!1)),e.$set(y),g[2]?c?(c.p(g,m),m&4&&_(c,1)):(c=Mr(g),c.c(),_(c,1),c.m(l.parentNode,l)):c&&(_e(),d(c,1,1,()=>{c=null}),ge());const S={};m&1031&&(S.$$scope={dirty:m,ctx:g}),o.$set(S);const P={};m&1031&&(P.$$scope={dirty:m,ctx:g}),f.$set(P)},i(g){i||(_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(f.$$.fragment,g),i=!0)},o(g){d(e.$$.fragment,g),d(c),d(o.$$.fragment,g),d(f.$$.fragment,g),i=!1},d(g){g&&(p(t),p(l),p(s)),w(e,g),c&&c.d(g),w(o,g),w(f,g)}}}let qe="pct_commute",at="pct_school";function Zu(r,e,n){let t=le.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=qe,s="baseline",f=!1;function i(g){let m=g.baseline,y=g.gov_target,S=g.go_dutch,P=`<h2>Trip purpose: ${o==qe?"commuting":"school"}</h2>`;if(P+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)P+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,P+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let T=(y/m).toFixed(1),D=(S/m).toFixed(1);P+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${T}x</b> of baseline)</p>`,P+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return P}function a(g){f=g,n(2,f)}function u(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,f,t,l,i,a,u,c]}class xu extends J{constructor(e){super(),K(this,e,Zu,Ku,V,{})}}function ec(r){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tc(r){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nc(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rc(r){let e,n,t,l,o,s,f,i,a,u,c,g;return t=new Q({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[tc]},$$scope:{ctx:r}}}),u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),l=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),s=C("p"),s.textContent="Data valid as of 1 September, 2023",f=L(),i=C("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),c=k(".")},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,l),$(m,o,y),$(m,s,y),$(m,f,y),$(m,i,y),h(i,a),v(u,i,null),h(i,c),g=!0},p(m,y){const S={};y&256&&(S.$$scope={dirty:y,ctx:m}),t.$set(S);const P={};y&256&&(P.$$scope={dirty:y,ctx:m}),u.$set(P)},i(m){g||(_(t.$$.fragment,m),_(u.$$.fragment,m),g=!0)},o(m){d(t.$$.fragment,m),d(u.$$.fragment,m),g=!1},d(m){m&&(p(e),p(o),p(s),p(f),p(i)),w(t),w(u)}}}function lc(r){let e,n,t;return n=new me({props:{$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Nr(r){let e,n,t,l,o;e=new Qe({props:{colorScale:r[2],limits:r[3]}});function s(i){r[6](i)}let f={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(f.value=r[0]),t=new il({props:f}),W.push(()=>X(t,"value",s)),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const u={};!l&&a&1&&(l=!0,u.value=i[0],Y(()=>l=!1)),t.$set(u)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function oc(r){let e,n,t=r[7].indicative_mph+"",l,o,s,f,i,a=r[7].highest_mph+"",u,c,g=r[4][r[7].highest_description]+"",m,y;return{c(){e=C("p"),n=k("Posted speed limit: "),l=k(t),o=k(" mph"),s=L(),f=C("p"),i=k("Highest average speed: "),u=k(a),c=k(" mph (during "),m=k(g),y=k(")")},m(S,P){$(S,e,P),h(e,n),h(e,l),h(e,o),$(S,s,P),$(S,f,P),h(f,i),h(f,u),h(f,c),h(f,m),h(f,y)},p(S,P){P&128&&t!==(t=S[7].indicative_mph+"")&&R(l,t),P&128&&a!==(a=S[7].highest_mph+"")&&R(u,a),P&128&&g!==(g=S[4][S[7].highest_description]+"")&&R(m,g)},d(S){S&&(p(e),p(s),p(f))}}}function sc(r){let e,n;return e=new fe({props:{$$slots:{default:[oc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ic(r){let e,n;const t=[H(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get",r[0]],r[3],r[2]),"line-width":Re,"line-opacity":x(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[sc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&15?te(t,[s&0&&oe(H(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&13&&{paint:{"line-color":ye(["get",o[0]],o[3],o[2]),"line-width":Re,"line-opacity":x(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ac(r){let e,n,t,l,o,s;function f(u){r[5](u)}let i={id:vt,$$slots:{right:[lc],default:[ec]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new se({props:i}),W.push(()=>X(e,"checked",f));let a=r[1]&&Nr(r);return o=new ke({props:{url:`pmtiles://${nn()}/v1/${vt}.pmtiles`,$$slots:{default:[ic]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,g.checked=u[1],Y(()=>n=!1)),e.$set(g),u[1]?a?(a.p(u,c),c&2&&_(a,1)):(a=Nr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&259&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let vt="road_speeds";function fc(r,e,n){let t=le.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",s=!1,f={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(u){s=u,n(1,s)}function a(u){o=u,n(0,o)}return[o,s,t,l,f,i,a]}class uc extends J{constructor(e){super(),K(this,e,fc,ac,V,{})}}function cc(r){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $c(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pc(r){let e,n,t,l,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",l=L(),o=C("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),h(o,s),v(f,o,null),h(o,i),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),f.$set(g)},i(u){a||(_(f.$$.fragment,u),a=!0)},o(u){d(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),w(f)}}}function mc(r){let e,n,t;return n=new me({props:{$$slots:{default:[pc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Dr(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _c(r){let e,n,t,l=r[4].average+"",o,s,f,i,a,u,c=r[4].minimum+"",g,m;return{c(){e=C("p"),n=k("Average width: "),t=C("b"),o=k(l),s=k(`
        meters`),f=L(),i=C("p"),a=k("Minimum width: "),u=C("b"),g=k(c),m=k(`
        meters`)},m(y,S){$(y,e,S),h(e,n),h(e,t),h(t,o),h(e,s),$(y,f,S),$(y,i,S),h(i,a),h(i,u),h(u,g),h(i,m)},p(y,S){S&16&&l!==(l=y[4].average+"")&&R(o,l),S&16&&c!==(c=y[4].minimum+"")&&R(g,c)},d(y){y&&(p(e),p(f),p(i))}}}function gc(r){let e,n;return e=new fe({props:{$$slots:{default:[_c,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function dc(r){let e,n;const t=[H(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get","average"],r[2],r[1]),"line-width":Re,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[gc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&oe(H(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&6&&{paint:{"line-color":ye(["get","average"],o[2],o[1]),"line-width":Re,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function hc(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:wt,$$slots:{right:[mc],default:[cc]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),W.push(()=>X(e,"checked",f));let a=r[0]&&Dr(r);return o=new ke({props:{url:`pmtiles://${nn()}/v1/${wt}.pmtiles`,$$slots:{default:[dc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],Y(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Dr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let wt="road_widths";function bc(r,e,n){let t=le.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class vc extends J{constructor(e){super(),K(this,e,bc,hc,V,{})}}function wc(r){let e,n,t;return{c(){e=C("input"),U(e,"class","govuk-file-upload"),U(e,"id","load-criticals"),U(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=st(e,"change",r[5]),n=!0)},p:ne,d(l){l&&p(e),r[7](null),n=!1,t()}}}function Er(r){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[yc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function kc(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new Oe({props:{color:Mt}}),{c(){b(e.$$.fragment),n=k(`
        Show `),l=k(t),o=k(" issues")},m(f,i){v(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p(f,i){(!s||i&4)&&t!==(t=f[2].toLocaleString()+"")&&R(l,t)},i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),w(e,f)}}}function yc(r){let e,n,t;function l(s){r[8](s)}let o={id:"show-criticals",$$slots:{default:[kc]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),W.push(()=>X(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&2052&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],Y(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Sc(r){let e,n,t,l,o,s;e=new cn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[wc]},$$scope:{ctx:r}}}),t=new al({props:{errorMessage:r[3]}});let f=r[2]>0&&Er(r);return{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),f&&f.c(),o=Ie()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),f&&f.m(i,a),$(i,o,a),s=!0},p(i,a){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?f?(f.p(i,a),a&4&&_(f,1)):(f=Er(i),f.c(),_(f,1),f.m(o.parentNode,o)):f&&(_e(),d(f,1,1,()=>{f=null}),ge())},i(i){s||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(f),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(f),s=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),f&&f.d(i)}}}function Cc(r){let e,n,t=r[10].critical_type+"",l,o,s,f,i,a=r[10].location_description+"",u,c,g,m,y,S=r[10].notes+"",P,T,D,F,E,I,A,M=r[10].id+"",O,N,G,B,j,z=(r[10].inspector??"???")+"",q,Z,ie,Te=r[10].submission_time+"",ae,ve,de,Ne,ce,$e=r[10].scheme_reference+"",ue,nt,Je,Be=r[10].current_design_stage+"",Ke;return{c(){e=C("div"),n=C("h2"),l=k(t),o=L(),s=C("p"),f=C("u"),f.textContent="Location",i=k(`
          : `),u=k(a),c=L(),g=C("p"),m=C("u"),m.textContent="Notes",y=k(`
          : `),P=k(S),T=L(),D=C("hr"),F=L(),E=C("p"),I=k("Critical issue ID: "),A=C("b"),O=k(M),N=L(),G=C("p"),B=k("Submitted by "),j=C("b"),q=k(z),Z=k(`
          at
          `),ie=C("b"),ae=k(Te),ve=L(),de=C("p"),Ne=k("For scheme "),ce=C("b"),ue=k($e),nt=k(`
          in stage
          `),Je=C("b"),Ke=k(Be),Ce(e,"max-width","30vw")},m(re,he){$(re,e,he),h(e,n),h(n,l),h(e,o),h(e,s),h(s,f),h(s,i),h(s,u),h(e,c),h(e,g),h(g,m),h(g,y),h(g,P),h(e,T),h(e,D),h(e,F),h(e,E),h(E,I),h(E,A),h(A,O),h(e,N),h(e,G),h(G,B),h(G,j),h(j,q),h(G,Z),h(G,ie),h(ie,ae),h(e,ve),h(e,de),h(de,Ne),h(de,ce),h(ce,ue),h(de,nt),h(de,Je),h(Je,Ke)},p(re,he){he&1024&&t!==(t=re[10].critical_type+"")&&R(l,t),he&1024&&a!==(a=re[10].location_description+"")&&R(u,a),he&1024&&S!==(S=re[10].notes+"")&&R(P,S),he&1024&&M!==(M=re[10].id+"")&&R(O,M),he&1024&&z!==(z=(re[10].inspector??"???")+"")&&R(q,z),he&1024&&Te!==(Te=re[10].submission_time+"")&&R(ae,Te),he&1024&&$e!==($e=re[10].scheme_reference+"")&&R(ue,$e),he&1024&&Be!==(Be=re[10].current_design_stage+"")&&R(Ke,Be)},d(re){re&&p(e)}}}function Tc(r){let e,n;return e=new fe({props:{$$slots:{default:[Cc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Oc(r){let e,n,t,l,o,s;const f=[H(`${lt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Mt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let m=0;m<f.length;m+=1)i=ee(i,f[m]);e=new et({props:i}),e.$on("click",r[6]);const a=[H(`${lt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let u={};for(let m=0;m<a.length;m+=1)u=ee(u,a[m]);t=new so({props:u});const c=[H(`${lt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Mt,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let g={$$slots:{default:[Tc]},$$scope:{ctx:r}};for(let m=0;m<c.length;m+=1)g=ee(g,c[m]);return o=new et({props:g}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,l,y),v(o,m,y),s=!0},p(m,y){const S=y&2?te(f,[y&0&&oe(H(`${lt}-clusters`)),f[1],y&0&&{paint:{"circle-color":Mt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:m[1]?"visible":"none"}},f[4]]):{};e.$set(S);const P=y&2?te(a,[y&0&&oe(H(`${lt}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:m[1]?"visible":"none"}}]):{};t.$set(P);const T=y&2?te(c,[y&0&&oe(H(`${lt}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":Mt,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:m[1]?"visible":"none"}}]):{};y&2048&&(T.$$scope={dirty:y,ctx:m}),o.$set(T)},i(m){s||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(o.$$.fragment,m),s=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),s=!1},d(m){m&&(p(n),p(l)),w(e,m),w(t,m),w(o,m)}}}function Lc(r){let e,n,t,l;return e=new Fe({props:{label:"Critical Issues",$$slots:{default:[Sc]},$$scope:{ctx:r}}}),t=new It({props:{id:lt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Oc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&2063&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let lt="criticals",Mt="red";function Ac(r,e,n){let t;be(r,vn,m=>n(9,t=m));let l,o=!0,s=0,f="",i=Pl();async function a(m){try{n(4,i=await di(l.files[0])),n(2,s=i.features.length),n(3,f="")}catch(y){n(3,f=`The file you loaded is broken: ${y}`)}}function u(m){t.getSource(lt).getClusterExpansionZoom(m.detail.features[0].properties.cluster_id,(y,S)=>{y||t.easeTo({center:m.detail.features[0].geometry.coordinates,zoom:S})})}function c(m){W[m?"unshift":"push"](()=>{l=m,n(0,l)})}function g(m){o=m,n(1,o)}return[l,o,s,f,i,a,u,c,g]}class Ic extends J{constructor(e){super(),K(this,e,Ac,Lc,V,{})}}function Pc(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Crossings`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Mc(r){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nc(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Mc]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Dc(r){let e,n,t;return n=new me({props:{$$slots:{default:[Nc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Ec(r){let e,n=Fr(r[3])+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=Fr(l[3])+"")&&R(t,n)},d(l){l&&p(e)}}}function Fc(r){let e,n;return e=new fe({props:{$$slots:{default:[Ec,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function jc(r){let e,n;const t=[H(kt),{sourceLayer:kt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Fc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new et({props:l}),e.$on("click",Bc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&oe(H(kt)),s&0&&{sourceLayer:kt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Rc(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:kt,$$slots:{right:[Dc],default:[Pc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>X(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${kt}.pmtiles`,$$slots:{default:[jc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],Y(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let kt="crossings";function Fr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Bc(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Hc(r,e,n){let t=le.crossings,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class zc extends J{constructor(e){super(),K(this,e,Hc,Rc,V,{})}}function Gc(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Cycle parking`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Uc(r){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qc(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Uc]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=C("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),l=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Wc(r){let e,n,t;return n=new me({props:{$$slots:{default:[qc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Vc(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=C("p"),n=k("Capacity: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=(s[3].capacity??"unknown")+"")&&R(o,l)},d(s){s&&p(e)}}}function Xc(r){let e,n;return e=new fe({props:{$$slots:{default:[Vc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Yc(r){let e,n;const t=[H(yt),{sourceLayer:yt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Xc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new et({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&oe(H(yt)),s&0&&{sourceLayer:yt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Qc(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:yt,$$slots:{right:[Wc],default:[Gc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>X(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${yt}.pmtiles`,$$slots:{default:[Yc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],Y(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let yt="cycle_parking";function Jc(r,e,n){let t=le.cycle_parking,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Kc extends J{constructor(e){super(),K(this,e,Jc,Qc,V,{})}}function Zc(r){let e,n,t,l;return e=new Oe({props:{color:r[4]}}),{c(){b(e.$$.fragment),n=L(),t=k(r[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),l=!0},p(o,s){(!l||s&4)&&R(t,o[2])},i(o){l||(_(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function xc(r){let e;const n=r[5].default,t=Bt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Ht(t,n,l,l[7],e?Gt(n,l[7],o,null):zt(l[7]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function e$(r){let e,n,t;return n=new me({props:{$$slots:{default:[xc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function t$(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&R(t,n)},d(l){l&&p(e)}}}function n$(r){let e,n;return e=new fe({props:{$$slots:{default:[t$,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function r$(r){let e,n;const t=[H(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":x(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[n$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&25?te(t,[s&1&&oe(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":x(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function l$(r){let e,n,t,l,o;function s(i){r[6](i)}let f={id:r[0],$$slots:{right:[e$],default:[Zc]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.checked=r[3]),e=new se({props:f}),W.push(()=>X(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${r[0]}.pmtiles`,$$slots:{default:[r$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&1&&(u.id=i[0]),a&132&&(u.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,u.checked=i[3],Y(()=>n=!1)),e.$set(u);const c={};a&1&&(c.url=`pmtiles://${we()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function o$(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:f}=e,i=le[o],a=!1;function u(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,f=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,s,f,a,i,t,u,l]}class yn extends J{constructor(e){super(),K(this,e,o$,l$,V,{name:0,singularNoun:1,pluralNoun:2})}}function s$(r){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function i$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[s$]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function a$(r){let e,n;return e=new yn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[i$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class f$ extends J{constructor(e){super(),K(this,e,null,a$,V,{})}}function u$(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Railway Stations`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function c$(r){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[c$]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function p$(r){let e,n,t;return n=new me({props:{$$slots:{default:[$$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function m$(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&R(t,n)},d(l){l&&p(e)}}}function _$(r){let e,n;return e=new fe({props:{$$slots:{default:[m$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function g$(r){let e,n;const t=[H(tn),{paint:{"circle-color":r[1],"circle-radius":xt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[_$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new et({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&oe(H(tn)),s&2&&{paint:{"circle-color":o[1],"circle-radius":xt/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function d$(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:tn,$$slots:{right:[p$],default:[u$]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>X(e,"checked",s)),l=new It({props:{data:`${we()}/v1/${tn}.geojson`,$$slots:{default:[g$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],Y(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let tn="railway_stations";function h$(r,e,n){let t=le.railway_stations,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class b$ extends J{constructor(e){super(),K(this,e,h$,d$,V,{})}}function v$(r){let e;return{c(){e=k("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function w$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[v$]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function k$(r){let e,n;return e=new yn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[w$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class y$ extends J{constructor(e){super(),K(this,e,null,k$,V,{})}}function S$(r){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function C$(r){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function T$(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[S$]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[C$]},$$scope:{ctx:r}}}),i=new it({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),f=L(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const m={};c&1&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function O$(r){let e,n;return e=new yn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[T$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class L$ extends J{constructor(e){super(),K(this,e,null,O$,V,{})}}function A$(r){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function I$(r){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function P$(r){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function M$(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S,P,T,D,F,E,I,A,M;return t=new Q({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[I$]},$$scope:{ctx:r}}}),T=new Q({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[P$]},$$scope:{ctx:r}}}),A=new Me({}),{c(){e=C("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),l=k(" dataset. Please note these limitations:"),o=L(),s=C("ul"),f=C("li"),f.textContent="Only collisions between 2017 and 2022 are included",i=L(),a=C("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,u=L(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=L(),m=C("li"),m.textContent='The "pedestrians" category also include mobility scooters',y=L(),S=C("li"),P=k("All limitations "),b(T.$$.fragment),D=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),F=L(),E=C("p"),E.textContent="You can click a point to open the full report, thanks to CycleStreets.",I=L(),b(A.$$.fragment)},m(O,N){$(O,e,N),h(e,n),v(t,e,null),h(e,l),$(O,o,N),$(O,s,N),h(s,f),h(s,i),h(s,a),h(s,u),h(s,c),h(s,g),h(s,m),h(s,y),h(s,S),h(S,P),v(T,S,null),h(S,D),$(O,F,N),$(O,E,N),$(O,I,N),v(A,O,N),M=!0},p(O,N){const G={};N&16777216&&(G.$$scope={dirty:N,ctx:O}),t.$set(G);const B={};N&16777216&&(B.$$scope={dirty:N,ctx:O}),T.$set(B)},i(O){M||(_(t.$$.fragment,O),_(T.$$.fragment,O),_(A.$$.fragment,O),M=!0)},o(O){d(t.$$.fragment,O),d(T.$$.fragment,O),d(A.$$.fragment,O),M=!1},d(O){O&&(p(e),p(o),p(s),p(F),p(E),p(I)),w(t),w(T),w(A,O)}}}function N$(r){let e,n,t;return n=new me({props:{$$slots:{default:[M$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function jr(r){let e,n,t,l,o,s,f,i,a,u,c,g,m;return n=new tt({props:{small:!0,$$slots:{default:[R$]},$$scope:{ctx:r}}}),u=new fl({props:{rows:r[14]}}),{c(){e=C("div"),b(n.$$.fragment),t=L(),l=C("div"),o=k(`Filter years:
      `),s=C("input"),f=k(`
      -
      `),i=C("input"),a=L(),b(u.$$.fragment),U(s,"type","number"),U(s,"min",2017),U(s,"max",2022),U(s,"class","svelte-1ft65rw"),U(i,"type","number"),U(i,"min",2017),U(i,"max",2022),U(i,"class","svelte-1ft65rw"),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(y,S){$(y,e,S),v(n,e,null),h(e,t),h(e,l),h(l,o),h(l,s),Ve(s,r[4]),h(l,f),h(l,i),Ve(i,r[5]),h(e,a),v(u,e,null),c=!0,g||(m=[st(s,"input",r[20]),st(i,"input",r[21])],g=!0)},p(y,S){const P={};S&16777231&&(P.$$scope={dirty:S,ctx:y}),n.$set(P),S&16&&Et(s.value)!==y[4]&&Ve(s,y[4]),S&32&&Et(i.value)!==y[5]&&Ve(i,y[5])},i(y){c||(_(n.$$.fragment,y),_(u.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(u.$$.fragment,y),c=!1},d(y){y&&p(e),w(n),w(u),g=!1,sl(m)}}}function D$(r){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function E$(r){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function F$(r){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function j$(r){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function R$(r){let e,n,t,l,o,s,f,i,a,u,c,g;function m(I){r[16](I)}let y={id:"stats19-pedestrians",$$slots:{default:[D$]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new se({props:y}),W.push(()=>X(e,"checked",m));function S(I){r[17](I)}let P={id:"stats19-cyclists",$$slots:{default:[E$]},$$scope:{ctx:r}};r[1]!==void 0&&(P.checked=r[1]),l=new se({props:P}),W.push(()=>X(l,"checked",S));function T(I){r[18](I)}let D={id:"stats19-horse-riders",$$slots:{default:[F$]},$$scope:{ctx:r}};r[2]!==void 0&&(D.checked=r[2]),f=new se({props:D}),W.push(()=>X(f,"checked",T));function F(I){r[19](I)}let E={id:"stats19-other",$$slots:{default:[j$]},$$scope:{ctx:r}};return r[3]!==void 0&&(E.checked=r[3]),u=new se({props:E}),W.push(()=>X(u,"checked",F)),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment),s=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment)},m(I,A){v(e,I,A),$(I,t,A),v(l,I,A),$(I,s,A),v(f,I,A),$(I,a,A),v(u,I,A),g=!0},p(I,A){const M={};A&16777216&&(M.$$scope={dirty:A,ctx:I}),!n&&A&1&&(n=!0,M.checked=I[0],Y(()=>n=!1)),e.$set(M);const O={};A&16777216&&(O.$$scope={dirty:A,ctx:I}),!o&&A&2&&(o=!0,O.checked=I[1],Y(()=>o=!1)),l.$set(O);const N={};A&16777216&&(N.$$scope={dirty:A,ctx:I}),!i&&A&4&&(i=!0,N.checked=I[2],Y(()=>i=!1)),f.$set(N);const G={};A&16777216&&(G.$$scope={dirty:A,ctx:I}),!c&&A&8&&(c=!0,G.checked=I[3],Y(()=>c=!1)),u.$set(G)},i(I){g||(_(e.$$.fragment,I),_(l.$$.fragment,I),_(f.$$.fragment,I),_(u.$$.fragment,I),g=!0)},o(I){d(e.$$.fragment,I),d(l.$$.fragment,I),d(f.$$.fragment,I),d(u.$$.fragment,I),g=!1},d(I){I&&(p(t),p(s),p(a)),w(e,I),w(l,I),w(f,I),w(u,I)}}}function Rr(r){let e,n,t,l=r[8][r[23].pedestrian_location]+"",o;return{c(){e=C("p"),n=k("Pedestrian location: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8388608&&l!==(l=s[8][s[23].pedestrian_location]+"")&&R(o,l)},d(s){s&&p(e)}}}function Br(r){let e,n,t,l=r[9][r[23].pedestrian_movement]+"",o;return{c(){e=C("p"),n=k("Pedestrian movement: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8388608&&l!==(l=s[9][s[23].pedestrian_movement]+"")&&R(o,l)},d(s){s&&p(e)}}}function B$(r){let e,n,t,l=r[23].year+"",o,s,f,i,a,u=r[10][r[23].severity]+"",c,g,m,y,S,P=Hr(r[23])+"",T,D,F,E,I,A=r[23].pedestrian_location&&Rr(r),M=r[23].pedestrian_movement&&Br(r);return{c(){e=C("p"),n=k("Year: "),t=C("b"),o=k(l),s=L(),f=C("p"),i=k("Severity: "),a=C("b"),c=k(u),g=L(),m=C("p"),y=k("Casualties: "),S=C("b"),T=k(P),D=L(),A&&A.c(),F=L(),M&&M.c(),E=L(),I=C("p"),I.textContent="Click to open full report in CycleStreets"},m(O,N){$(O,e,N),h(e,n),h(e,t),h(t,o),$(O,s,N),$(O,f,N),h(f,i),h(f,a),h(a,c),$(O,g,N),$(O,m,N),h(m,y),h(m,S),h(S,T),$(O,D,N),A&&A.m(O,N),$(O,F,N),M&&M.m(O,N),$(O,E,N),$(O,I,N)},p(O,N){N&8388608&&l!==(l=O[23].year+"")&&R(o,l),N&8388608&&u!==(u=O[10][O[23].severity]+"")&&R(c,u),N&8388608&&P!==(P=Hr(O[23])+"")&&R(T,P),O[23].pedestrian_location?A?A.p(O,N):(A=Rr(O),A.c(),A.m(F.parentNode,F)):A&&(A.d(1),A=null),O[23].pedestrian_movement?M?M.p(O,N):(M=Br(O),M.c(),M.m(E.parentNode,E)):M&&(M.d(1),M=null)},d(O){O&&(p(e),p(s),p(f),p(g),p(m),p(D),p(F),p(E),p(I)),A&&A.d(O),M&&M.d(O)}}}function H$(r){let e,n;return e=new fe({props:{$$slots:{default:[B$,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&25165824&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function z$(r){let e,n;const t=[H(St),{sourceLayer:St},{paint:{"circle-color":ye(["get","severity"],[1,2,3],[r[11],r[12],r[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[7]},{layout:{visibility:r[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[H$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new et({props:l}),e.$on("click",U$),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&14528?te(t,[s&0&&oe(H(St)),s&0&&{sourceLayer:St},s&14336&&{paint:{"circle-color":ye(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function G$(r){let e,n,t,l,o,s;function f(u){r[15](u)}let i={id:St,$$slots:{right:[N$],default:[A$]},$$scope:{ctx:r}};r[6]!==void 0&&(i.checked=r[6]),e=new se({props:i}),W.push(()=>X(e,"checked",f));let a=r[6]&&jr(r);return o=new ke({props:{url:`pmtiles://${we()}/v1/${St}.pmtiles`,$$slots:{default:[z$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:u}),!n&&c&64&&(n=!0,g.checked=u[6],Y(()=>n=!1)),e.$set(g),u[6]?a?(a.p(u,c),c&64&&_(a,1)):(a=jr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&16777408&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let St="stats19";function Hr(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function U$(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function q$(r,e,n){let t,l=!1,o=!0,s=!0,f=!0,i=!1,a=2017,u=2022;function c(G,B,j,z,q,Z){let ie=["any"];return o&&ie.push(["get","pedestrian"]),s&&ie.push(["get","cyclist"]),f&&ie.push(["get","horse_rider"]),i&&ie.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],u],ie]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},m={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},S=le.sequential_low_to_high[4],P=le.sequential_low_to_high[2],T=le.sequential_low_to_high[0],D=[["Fatal",S],["Serious",P],["Slight",T]];function F(G){l=G,n(6,l)}function E(G){o=G,n(0,o)}function I(G){s=G,n(1,s)}function A(G){f=G,n(2,f)}function M(G){i=G,n(3,i)}function O(){a=Et(this.value),n(4,a)}function N(){u=Et(this.value),n(5,u)}return r.$$.update=()=>{r.$$.dirty&63&&n(7,t=c())},[o,s,f,i,a,u,l,t,g,m,y,S,P,T,D,F,E,I,A,M,O,N]}class W$ extends J{constructor(e){super(),K(this,e,q$,G$,V,{})}}function V$(r){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function X$(r){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Y$(r){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Q$(r){let e,n,t,l,o,s,f,i,a,u,c;return t=new Q({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[X$]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Y$]},$$scope:{ctx:r}}}),u=new Me({}),{c(){e=C("p"),n=k("2022 AADF (annual average daily flow) data from "),b(t.$$.fragment),l=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),f=L(),i=C("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=L(),b(u.$$.fragment)},m(g,m){$(g,e,m),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(g,f,m),$(g,i,m),$(g,a,m),v(u,g,m),c=!0},p(g,m){const y={};m&64&&(y.$$scope={dirty:m,ctx:g}),t.$set(y);const S={};m&64&&(S.$$scope={dirty:m,ctx:g}),o.$set(S)},i(g){c||(_(t.$$.fragment,g),_(o.$$.fragment,g),_(u.$$.fragment,g),c=!0)},o(g){d(t.$$.fragment,g),d(o.$$.fragment,g),d(u.$$.fragment,g),c=!1},d(g){g&&(p(e),p(f),p(i),p(a)),w(t),w(o),w(u,g)}}}function J$(r){let e,n,t;return n=new me({props:{$$slots:{default:[Q$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function zr(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:r[3]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function K$(r){let e,n=r[5].location+"",t,l,o,s,f,i=r[5].motor_vehicles_2022.toLocaleString()+"",a,u,c,g,m,y=r[5].pedal_cycles_2022.toLocaleString()+"",S,P,T,D,F,E=r[5].method+"",I;return{c(){e=C("h2"),t=k(n),l=L(),o=C("p"),s=k("Total motor vehicles (2022 AADF): "),f=C("b"),a=k(i),u=L(),c=C("p"),g=k("Total pedal cycles (2022 AADF): "),m=C("b"),S=k(y),P=L(),T=C("p"),D=k("Count method: "),F=C("b"),I=k(E)},m(A,M){$(A,e,M),h(e,t),$(A,l,M),$(A,o,M),h(o,s),h(o,f),h(f,a),$(A,u,M),$(A,c,M),h(c,g),h(c,m),h(m,S),$(A,P,M),$(A,T,M),h(T,D),h(T,F),h(F,I)},p(A,M){M&32&&n!==(n=A[5].location+"")&&R(t,n),M&32&&i!==(i=A[5].motor_vehicles_2022.toLocaleString()+"")&&R(a,i),M&32&&y!==(y=A[5].pedal_cycles_2022.toLocaleString()+"")&&R(S,y),M&32&&E!==(E=A[5].method+"")&&R(I,E)},d(A){A&&(p(e),p(l),p(o),p(u),p(c),p(P),p(T))}}}function Z$(r){let e,n;return e=new fe({props:{$$slots:{default:[K$,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function x$(r){let e,n;const t=[H(Ct),{sourceLayer:Ct},{paint:{"circle-color":ye(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Z$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new et({props:l}),e.$on("click",tp),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&oe(H(Ct)),s&0&&{sourceLayer:Ct},s&6&&{paint:{"circle-color":ye(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ep(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={id:Ct,$$slots:{right:[J$],default:[V$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),W.push(()=>X(e,"checked",f));let a=r[0]&&zr(r);return o=new ke({props:{url:`pmtiles://${we()}/v1/${Ct}.pmtiles`,$$slots:{default:[x$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],Y(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=zr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&65&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Ct="vehicle_counts";function tp(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function np(r,e,n){let t=le.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function f(i){s=i,n(0,s)}return[s,t,l,o,f]}class rp extends J{constructor(e){super(),K(this,e,np,ep,V,{})}}function lp(r){let e,n,t,l,o,s,f,i;return e=new y$({}),t=new f$({}),o=new L$({}),f=new b$({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),$(a,l,u),v(o,a,u),$(a,s,u),v(f,a,u),i=!0},i(a){i||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(p(n),p(l),p(s)),w(e,a),w(t,a),w(o,a),w(f,a)}}}function op(r){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[lp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function sp(r){let e,n,t,l,o,s,f,i,a,u,c,g;return e=new fu({}),t=new Au({}),o=new bu({}),f=new Jf({}),a=new Kc({}),c=new zc({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),u=L(),b(c.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,l,y),v(o,m,y),$(m,s,y),v(f,m,y),$(m,i,y),v(a,m,y),$(m,u,y),v(c,m,y),g=!0},i(m){g||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(o.$$.fragment,m),_(f.$$.fragment,m),_(a.$$.fragment,m),_(c.$$.fragment,m),g=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),d(a.$$.fragment,m),d(c.$$.fragment,m),g=!1},d(m){m&&(p(n),p(l),p(s),p(i),p(u)),w(e,m),w(t,m),w(o,m),w(f,m),w(a,m),w(c,m)}}}function ip(r){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[sp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ap(r){let e,n,t,l,o,s,f,i,a,u;return e=new pf({}),t=new Ff({}),o=new ba({}),f=new za({}),a=new tf({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(c,g){v(e,c,g),$(c,n,g),v(t,c,g),$(c,l,g),v(o,c,g),$(c,s,g),v(f,c,g),$(c,i,g),v(a,c,g),u=!0},i(c){u||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(f.$$.fragment,c),d(a.$$.fragment,c),u=!1},d(c){c&&(p(n),p(l),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(f,c),w(a,c)}}}function fp(r){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[ap]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function up(r){let e,n,t,l;return e=new aa({}),t=new Ia({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function cp(r){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[up]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $p(r){let e,n,t,l,o,s;return e=new vc({}),t=new Bu({}),o=new uc({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment)},m(f,i){v(e,f,i),$(f,n,i),v(t,f,i),$(f,l,i),v(o,f,i),s=!0},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l)),w(e,f),w(t,f),w(o,f)}}}function pp(r){let e,n,t,l,o,s,f=bn()=="Private (development)",i,a,u;e=new rp({}),t=new W$({}),o=new xu({});let c=f&&$p();return a=new Cf({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),c&&c.c(),i=L(),b(a.$$.fragment)},m(g,m){v(e,g,m),$(g,n,m),v(t,g,m),$(g,l,m),v(o,g,m),$(g,s,m),c&&c.m(g,m),$(g,i,m),v(a,g,m),u=!0},p:ne,i(g){u||(_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),_(c),_(a.$$.fragment,g),u=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),d(c),d(a.$$.fragment,g),u=!1},d(g){g&&(p(n),p(l),p(s),p(i)),w(e,g),w(t,g),w(o,g),c&&c.d(g),w(a,g)}}}function mp(r){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[pp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _p(r){let e,n,t,l,o;function s(i){r[3](i)}let f={};return r[0]!==void 0&&(f.enabled=r[0]),e=new Rl({props:f}),W.push(()=>X(e,"enabled",s)),l=new ql({}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,a){const u={};!n&&a&1&&(n=!0,u.enabled=i[0],Y(()=>n=!1)),e.$set(u)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function gp(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S,P;return e=new Ic({}),t=new Fe({props:{label:"Trip generators",$$slots:{default:[op]},$$scope:{ctx:r}}}),o=new Fe({props:{label:"Existing infrastructure",$$slots:{default:[ip]},$$scope:{ctx:r}}}),f=new Fe({props:{label:"Boundaries",$$slots:{default:[fp]},$$scope:{ctx:r}}}),a=new Fe({props:{label:"Census",$$slots:{default:[cp]},$$scope:{ctx:r}}}),c=new Fe({props:{label:"Other",$$slots:{default:[mp]},$$scope:{ctx:r}}}),m=new Fe({props:{label:"Tools",$$slots:{default:[_p]},$$scope:{ctx:r}}}),S=new jl({props:{disabled:!r[1]}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),u=L(),b(c.$$.fragment),g=L(),b(m.$$.fragment),y=L(),b(S.$$.fragment)},m(T,D){v(e,T,D),$(T,n,D),v(t,T,D),$(T,l,D),v(o,T,D),$(T,s,D),v(f,T,D),$(T,i,D),v(a,T,D),$(T,u,D),v(c,T,D),$(T,g,D),v(m,T,D),$(T,y,D),v(S,T,D),P=!0},p(T,D){const F={};D&16&&(F.$$scope={dirty:D,ctx:T}),t.$set(F);const E={};D&16&&(E.$$scope={dirty:D,ctx:T}),o.$set(E);const I={};D&16&&(I.$$scope={dirty:D,ctx:T}),f.$set(I);const A={};D&16&&(A.$$scope={dirty:D,ctx:T}),a.$set(A);const M={};D&16&&(M.$$scope={dirty:D,ctx:T}),c.$set(M);const O={};D&17&&(O.$$scope={dirty:D,ctx:T}),m.$set(O);const N={};D&2&&(N.disabled=!T[1]),S.$set(N)},i(T){P||(_(e.$$.fragment,T),_(t.$$.fragment,T),_(o.$$.fragment,T),_(f.$$.fragment,T),_(a.$$.fragment,T),_(c.$$.fragment,T),_(m.$$.fragment,T),_(S.$$.fragment,T),P=!0)},o(T){d(e.$$.fragment,T),d(t.$$.fragment,T),d(o.$$.fragment,T),d(f.$$.fragment,T),d(a.$$.fragment,T),d(c.$$.fragment,T),d(m.$$.fragment,T),d(S.$$.fragment,T),P=!1},d(T){T&&(p(n),p(l),p(s),p(i),p(u),p(g),p(y)),w(e,T),w(t,T),w(o,T),w(f,T),w(a,T),w(c,T),w(m,T),w(S,T)}}}function dp(r){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function hp(r){let e,n,t,l;return e=new Fe({props:{label:"Layers",open:!0,$$slots:{default:[gp]},$$scope:{ctx:r}}}),t=new It({props:{data:r[2],$$slots:{default:[dp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&19&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function bp(r,e,n){let t,l;be(r,lr,f=>n(1,l=f));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(f){t=f,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&lr.set(!t)},[t,l,o,s]}class vp extends J{constructor(e){super(),K(this,e,bp,hp,V,{})}}function Gr(r){let e;return{c(){e=C("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wp(r){let e,n=r[0]&&Gr();return{c(){n&&n.c(),e=Ie()},m(t,l){n&&n.m(t,l),$(t,e,l)},p(t,[l]){t[0]?n||(n=Gr(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(t){t&&p(e),n&&n.d(t)}}}function kp(r,e,n){let{loadFile:t}=e,l=!0;return wn(async()=>{let s=await(await fetch(`${nn()}/v1/random_schemes.geojson`)).text();t(s),n(0,l=!1)}),r.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[l,t]}class yp extends J{constructor(e){super(),K(this,e,kp,wp,V,{loadFile:1})}}function Ur(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=C("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),h(e,n),h(e,l)},p(s,f){var i;f&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&R(l,t)},d(s){s&&p(e)}}}function Sp(r){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cp(r){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tp(r){let e,n,t,l;return e=new Zt({props:{$$slots:{default:[Sp]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Zt({props:{$$slots:{default:[Cp]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Op(r){var N,G,B,j;let e,n,t=r[0].scheme_reference+"",l,o,s,f,i=((N=r[0].browse)==null?void 0:N.authority_or_region)+"",a,u,c,g,m=((G=r[0].browse)==null?void 0:G.capital_scheme_id)+"",y,S,P,T,D=((B=r[0].browse)==null?void 0:B.funding_programme)+"",F,E,I,A,M,O=((j=r[0].browse)==null?void 0:j.current_milestone)&&Ur(r);return A=new Bl({props:{$$slots:{default:[Tp]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("Scheme reference: "),l=k(t),o=L(),s=C("p"),f=k("Authority or region: "),a=k(i),u=L(),c=C("p"),g=k("Capital scheme ID: "),y=k(m),S=L(),P=C("p"),T=k("Funding programme: "),F=k(D),E=L(),O&&O.c(),I=L(),b(A.$$.fragment)},m(z,q){$(z,e,q),h(e,n),h(e,l),$(z,o,q),$(z,s,q),h(s,f),h(s,a),$(z,u,q),$(z,c,q),h(c,g),h(c,y),$(z,S,q),$(z,P,q),h(P,T),h(P,F),$(z,E,q),O&&O.m(z,q),$(z,I,q),v(A,z,q),M=!0},p(z,q){var ie,Te,ae,ve;(!M||q&1)&&t!==(t=z[0].scheme_reference+"")&&R(l,t),(!M||q&1)&&i!==(i=((ie=z[0].browse)==null?void 0:ie.authority_or_region)+"")&&R(a,i),(!M||q&1)&&m!==(m=((Te=z[0].browse)==null?void 0:Te.capital_scheme_id)+"")&&R(y,m),(!M||q&1)&&D!==(D=((ae=z[0].browse)==null?void 0:ae.funding_programme)+"")&&R(F,D),(ve=z[0].browse)!=null&&ve.current_milestone?O?O.p(z,q):(O=Ur(z),O.c(),O.m(I.parentNode,I)):O&&(O.d(1),O=null);const Z={};q&32&&(Z.$$scope={dirty:q,ctx:z}),A.$set(Z)},i(z){M||(_(A.$$.fragment,z),M=!0)},o(z){d(A.$$.fragment,z),M=!1},d(z){z&&(p(e),p(o),p(s),p(u),p(c),p(S),p(P),p(E),p(I)),O&&O.d(z),w(A,z)}}}function Lp(r){let e,n;return e=new Fe({props:{label:`${r[0].scheme_name}`,$$slots:{default:[Op]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_name}`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ap(r,e,n){let t,l;be(r,At,i=>n(3,t=i)),be(r,vn,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(Ml(i),{padding:20,animate:!1})}function f(){var u,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((u=o.browse)==null?void 0:u.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,f]}class Ip extends J{constructor(e){super(),K(this,e,Ap,Lp,V,{scheme:0})}}function qr(r){let e,n,t=Pn(r[0].length_meters)+"",l;return{c(){e=C("p"),n=k("Length: "),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,l)},p(o,s){s&1&&t!==(t=Pn(o[0].length_meters)+"")&&R(l,t)},d(o){o&&p(e)}}}function Wr(r){let e,n=ot(r[0].description,r[2])+"";return{c(){e=C("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&5&&n!==(n=ot(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Vr(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=C("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),h(e,n),h(e,l)},p(s,f){var i;f&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&R(l,t)},d(s){s&&p(e)}}}function Pp(r){var nt,Je,Be,Ke;let e,n,t,l=ot(r[0].name,r[2])+"",o,s=r[0].intervention_type+"",f,i,a,u,c,g,m,y,S,P,T=ot(r[1].scheme_name??"",r[3])+"",D,F,E=ot(r[0].scheme_reference,r[3])+"",I,A,M,O,N=((nt=r[1].browse)==null?void 0:nt.authority_or_region)+"",G,B,j,z,q=((Je=r[1].browse)==null?void 0:Je.capital_scheme_id)+"",Z,ie,Te,ae,ve=((Be=r[1].browse)==null?void 0:Be.funding_programme)+"",de,Ne,ce=r[0].length_meters&&qr(r),$e=r[0].description&&Wr(r),ue=((Ke=r[1].browse)==null?void 0:Ke.current_milestone)&&Vr(r);return{c(){e=C("div"),n=C("h2"),t=new Nt(!1),o=k(" ("),f=k(s),i=k(")"),a=L(),ce&&ce.c(),u=L(),$e&&$e.c(),c=L(),g=C("hr"),m=L(),y=C("p"),S=k("Part of scheme: "),P=new Nt(!1),D=k(" ("),F=new Nt(!1),I=k(")"),A=L(),M=C("p"),O=k("Authority or region: "),G=k(N),B=L(),j=C("p"),z=k("Capital scheme ID: "),Z=k(q),ie=L(),Te=C("p"),ae=k("Funding programme: "),de=k(ve),Ne=L(),ue&&ue.c(),t.a=o,P.a=D,F.a=I,Ce(e,"max-width","30vw")},m(re,he){$(re,e,he),h(e,n),t.m(l,n),h(n,o),h(n,f),h(n,i),h(e,a),ce&&ce.m(e,null),h(e,u),$e&&$e.m(e,null),h(e,c),h(e,g),h(e,m),h(e,y),h(y,S),P.m(T,y),h(y,D),F.m(E,y),h(y,I),h(e,A),h(e,M),h(M,O),h(M,G),h(e,B),h(e,j),h(j,z),h(j,Z),h(e,ie),h(e,Te),h(Te,ae),h(Te,de),h(e,Ne),ue&&ue.m(e,null)},p(re,[he]){var Cn,Tn,On,Ln;he&5&&l!==(l=ot(re[0].name,re[2])+"")&&t.p(l),he&1&&s!==(s=re[0].intervention_type+"")&&R(f,s),re[0].length_meters?ce?ce.p(re,he):(ce=qr(re),ce.c(),ce.m(e,u)):ce&&(ce.d(1),ce=null),re[0].description?$e?$e.p(re,he):($e=Wr(re),$e.c(),$e.m(e,c)):$e&&($e.d(1),$e=null),he&10&&T!==(T=ot(re[1].scheme_name??"",re[3])+"")&&P.p(T),he&9&&E!==(E=ot(re[0].scheme_reference,re[3])+"")&&F.p(E),he&2&&N!==(N=((Cn=re[1].browse)==null?void 0:Cn.authority_or_region)+"")&&R(G,N),he&2&&q!==(q=((Tn=re[1].browse)==null?void 0:Tn.capital_scheme_id)+"")&&R(Z,q),he&2&&ve!==(ve=((On=re[1].browse)==null?void 0:On.funding_programme)+"")&&R(de,ve),(Ln=re[1].browse)!=null&&Ln.current_milestone?ue?ue.p(re,he):(ue=Vr(re),ue.c(),ue.m(e,null)):ue&&(ue.d(1),ue=null)},i:ne,o:ne,d(re){re&&p(e),ce&&ce.d(),$e&&$e.d(),ue&&ue.d()}}}function ot(r,e){return e?r.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):r}function Mp(r,e,n){let t,l,o,s;be(r,Rt,i=>n(4,l=i)),be(r,Qt,i=>n(2,o=i)),be(r,Jt,i=>n(3,s=i));let{props:f}=e;return r.$$set=i=>{"props"in i&&n(0,f=i.props)},r.$$.update=()=>{r.$$.dirty&17&&n(1,t=l.get(f.scheme_reference))},[f,t,o,s,l]}class Sn extends J{constructor(e){super(),K(this,e,Mp,Pp,V,{props:0})}}function Np(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Dp(r){let e,n;return e=new Sn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ep(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Np,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Dp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Fp(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function jp(r){let e,n;return e=new Sn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Rp(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Fp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[jp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Bp(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Hp(r){let e,n;return e=new Sn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zp(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Bp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Hp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Gp(r){let e,n,t,l,o,s,f,i,a,u;const c=[H("interventions-points"),{filter:["all",Mn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":xt,"circle-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[Ep]},$$scope:{ctx:r}};for(let I=0;I<c.length;I+=1)g=ee(g,c[I]);e=new et({props:g});const m=[H("interventions-lines"),{filter:["all",Nn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Pt,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[Rp]},$$scope:{ctx:r}};for(let I=0;I<m.length;I+=1)y=ee(y,m[I]);t=new Se({props:y});const S=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Pt,"circle-opacity":0,"circle-stroke-color":xe.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let P={};for(let I=0;I<S.length;I+=1)P=ee(P,S[I]);o=new et({props:P});const T=[H("interventions-polygons"),{filter:["all",Vt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":x(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[zp]},$$scope:{ctx:r}};for(let I=0;I<T.length;I+=1)D=ee(D,T[I]);f=new Ye({props:D});const F=[H("interventions-polygons-outlines"),{filter:["all",Vt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Pt}},{layout:{visibility:r[0]?"visible":"none"}}];let E={};for(let I=0;I<F.length;I+=1)E=ee(E,F[I]);return a=new Se({props:E}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(I,A){v(e,I,A),$(I,n,A),v(t,I,A),$(I,l,A),v(o,I,A),$(I,s,A),v(f,I,A),$(I,i,A),v(a,I,A),u=!0},p(I,A){const M=A&29?te(c,[c[0],A&24&&{filter:["all",Mn,I[3],I[4]]},c[2],c[3],A&4&&{paint:{"circle-color":I[2],"circle-radius":xt,"circle-opacity":x(1,.5)}},A&1&&{layout:{visibility:I[0]?"visible":"none"}},c[6]]):{};A&128&&(M.$$scope={dirty:A,ctx:I}),e.$set(M);const O=A&13?te(m,[m[0],A&8&&{filter:["all",Nn,I[3]]},m[2],m[3],A&4&&{paint:{"line-color":I[2],"line-width":Pt,"line-opacity":x(1,.5)}},A&1&&{layout:{visibility:I[0]?"visible":"none"}},m[6]]):{};A&128&&(O.$$scope={dirty:A,ctx:I}),t.$set(O);const N=A&1?te(S,[S[0],S[1],S[2],{layout:{visibility:I[0]?"visible":"none"}}]):{};o.$set(N);const G=A&13?te(T,[T[0],A&8&&{filter:["all",Vt,I[3]]},T[2],T[3],A&4&&{paint:{"fill-color":I[2],"fill-opacity":x(.2,.5)}},A&1&&{layout:{visibility:I[0]?"visible":"none"}},T[6]]):{};A&128&&(G.$$scope={dirty:A,ctx:I}),f.$set(G);const B=A&13?te(F,[F[0],A&8&&{filter:["all",Vt,I[3]]},A&4&&{paint:{"line-color":I[2],"line-opacity":.5,"line-width":.7*Pt}},A&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};a.$set(B)},i(I){u||(_(e.$$.fragment,I),_(t.$$.fragment,I),_(o.$$.fragment,I),_(f.$$.fragment,I),_(a.$$.fragment,I),u=!0)},o(I){d(e.$$.fragment,I),d(t.$$.fragment,I),d(o.$$.fragment,I),d(f.$$.fragment,I),d(a.$$.fragment,I),u=!1},d(I){I&&(p(n),p(l),p(s),p(i)),w(e,I),w(t,I),w(o,I),w(f,I),w(a,I)}}}function Up(r){let e,n;return e=new It({props:{data:r[1],$$slots:{default:[Gp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qp(r,e,n){let t,l;be(r,At,a=>n(5,l=a));let{showSchemes:o}=e,s=Ol();const f=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=Nl(l))},[o,t,s,f,i,l]}class Wp extends J{constructor(e){super(),K(this,e,qp,Up,V,{showSchemes:0})}}function Xr(r,e,n){const t=r.slice();return t[12]=e[n],t}function Yr(r,e,n){const t=r.slice();return t[15]=e[n],t}function Vp(r){let e,n;return e=new yp({props:{loadFile:r[7]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:ne,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qr(r){let e,n,t;function l(s){r[8](s)}let o={title:"About this scheme data",$$slots:{default:[Xp]},$$scope:{ctx:r}};return r[3]!==void 0&&(o.open=r[3]),e=new el({props:o}),W.push(()=>X(e,"open",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&262160&&(i.$$scope={dirty:f,ctx:s}),!n&&f&8&&(n=!0,i.open=s[3],Y(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Jr(r){let e,n=r[15]+"",t;return{c(){e=C("li"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=l[15]+"")&&R(t,n)},d(l){l&&p(e)}}}function Xp(r){let e,n,t=Pe(r[4].notes),l=[];for(let o=0;o<t.length;o+=1)l[o]=Jr(Yr(r,t,o));return{c(){e=C("div"),n=C("ul");for(let o=0;o<l.length;o+=1)l[o].c();U(e,"class","govuk-prose")},m(o,s){$(o,e,s),h(e,n);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(n,null)},p(o,s){if(s&16){t=Pe(o[4].notes);let f;for(f=0;f<t.length;f+=1){const i=Yr(o,t,f);l[f]?l[f].p(i,s):(l[f]=Jr(i),l[f].c(),l[f].m(n,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=t.length}},d(o){o&&p(e),Ot(l,o)}}}function Kr(r){let e,n,t,l;function o(i){r[9](i)}function s(i){r[10](i)}let f={};return r[1]!==void 0&&(f.schemesToBeShown=r[1]),r[2]!==void 0&&(f.show=r[2]),e=new Pi({props:f}),W.push(()=>X(e,"schemesToBeShown",o)),W.push(()=>X(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),l=!0},p(i,a){const u={};!n&&a&2&&(n=!0,u.schemesToBeShown=i[1],Y(()=>n=!1)),!t&&a&4&&(t=!0,u.show=i[2],Y(()=>t=!1)),e.$set(u)},i(i){l||(_(e.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),l=!1},d(i){w(e,i)}}}function Zr(r){let e,n;return e=new Ip({props:{scheme:r[12]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.scheme=t[12]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xr(r){let e=r[1].has(r[12].scheme_reference),n,t,l=e&&Zr(r);return{c(){l&&l.c(),n=Ie()},m(o,s){l&&l.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[12].scheme_reference)),e?l?(l.p(o,s),s&66&&_(l,1)):(l=Zr(o),l.c(),_(l,1),l.m(n.parentNode,n)):l&&(_e(),d(l,1,1,()=>{l=null}),ge())},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function Yp(r){let e,n,t,l,o,s,f,i,a,u,c=bn()=="Private (development)",g,m,y,S,P,T,D,F,E;o=new Ul({props:{boundaryGeojson:r[4]}}),f=new po({}),a=new Dl({});let I=c&&Vp(r),A=r[4].notes&&Qr(r);y=new zl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),P=new al({props:{errorMessage:r[0]}});let M=r[6].size>0&&Kr(r),O=Pe(r[6].values()),N=[];for(let B=0;B<O.length;B+=1)N[B]=xr(Xr(r,O,B));const G=B=>d(N[B],1,1,()=>{N[B]=null});return{c(){e=C("div"),n=C("div"),t=C("h1"),t.textContent="Browse schemes",l=L(),b(o.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),u=L(),I&&I.c(),g=L(),A&&A.c(),m=L(),b(y.$$.fragment),S=L(),b(P.$$.fragment),T=L(),M&&M.c(),D=L(),F=C("ul");for(let B=0;B<N.length;B+=1)N[B].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),U(e,"slot","sidebar"),U(e,"class","govuk-prose")},m(B,j){$(B,e,j),h(e,n),h(n,t),h(n,l),v(o,n,null),h(e,s),v(f,e,null),h(e,i),v(a,e,null),h(e,u),I&&I.m(e,null),h(e,g),A&&A.m(e,null),h(e,m),v(y,e,null),h(e,S),v(P,e,null),h(e,T),M&&M.m(e,null),h(e,D),h(e,F);for(let z=0;z<N.length;z+=1)N[z]&&N[z].m(F,null);E=!0},p(B,j){const z={};j&16&&(z.boundaryGeojson=B[4]),o.$set(z),c&&I.p(B,j),B[4].notes?A?(A.p(B,j),j&16&&_(A,1)):(A=Qr(B),A.c(),_(A,1),A.m(e,m)):A&&(_e(),d(A,1,1,()=>{A=null}),ge());const q={};if(j&1&&(q.errorMessage=B[0]),P.$set(q),B[6].size>0?M?(M.p(B,j),j&64&&_(M,1)):(M=Kr(B),M.c(),_(M,1),M.m(e,D)):M&&(_e(),d(M,1,1,()=>{M=null}),ge()),j&66){O=Pe(B[6].values());let Z;for(Z=0;Z<O.length;Z+=1){const ie=Xr(B,O,Z);N[Z]?(N[Z].p(ie,j),_(N[Z],1)):(N[Z]=xr(ie),N[Z].c(),_(N[Z],1),N[Z].m(F,null))}for(_e(),Z=O.length;Z<N.length;Z+=1)G(Z);ge()}},i(B){if(!E){_(o.$$.fragment,B),_(f.$$.fragment,B),_(a.$$.fragment,B),_(I),_(A),_(y.$$.fragment,B),_(P.$$.fragment,B),_(M);for(let j=0;j<O.length;j+=1)_(N[j]);E=!0}},o(B){d(o.$$.fragment,B),d(f.$$.fragment,B),d(a.$$.fragment,B),d(I),d(A),d(y.$$.fragment,B),d(P.$$.fragment,B),d(M),N=N.filter(Boolean);for(let j=0;j<N.length;j+=1)d(N[j]);E=!1},d(B){B&&p(e),w(o),w(f),w(a),I&&I.d(),A&&A.d(),w(y),w(P),M&&M.d(),Ot(N,B)}}}function Qp(r){let e,n,t,l,o,s,f;return e=new Hl({}),t=new Wp({props:{showSchemes:r[2]}}),s=new vp({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),o=C("div"),b(s.$$.fragment),U(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),$(i,o,a),v(s,o,null),f=!0},p(i,a){const u={};a&4&&(u.showSchemes=i[2]),t.$set(u)},i(i){f||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),w(s)}}}function Jp(r){let e,n,t;return n=new El({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Qp]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(n.$$.fragment),U(e,"slot","main")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.style=l[5]),o&262148&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Kp(r){let e,n;return e=new Wl({props:{$$slots:{main:[Jp],sidebar:[Yp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&262271&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Zp(r,e,n){let t,l,o;be(r,At,S=>n(4,t=S)),be(r,Dn,S=>n(5,l=S)),be(r,Rt,S=>n(6,o=S)),wn(()=>{Fl()});const s=new URLSearchParams(window.location.search);Dn.set(s.get("style")||"dataviz");let f="",i=new Set,a=!0,u=!1;function c(S){try{At.set(JSON.parse(S)),Rt.set(_i(t)),n(0,f="")}catch(P){n(0,f=`The file you loaded is broken: ${P}`)}}function g(S){u=S,n(3,u)}function m(S){i=S,n(1,i)}function y(S){a=S,n(2,a)}return[f,i,a,u,t,l,o,c,g,m,y]}class xp extends J{constructor(e){super(),K(this,e,Zp,Kp,V,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new xp({target:document.getElementById("app")});
