import{S as J,i as K,s as Y,e as T,h as U,$ as Ce,j as $,W as re,o as p,aP as el,b as W,c as V,d as A,g as b,m as v,w as st,l as X,t as _,n as d,p as w,X as Ht,Y as zt,Z as Gt,_ as Ut,a7 as Pe,J as me,K as _e,aQ as Ot,u as k,k as h,D as R,I as Ie,N as bn,O as tl,q as be,P as nl,Q as rl,T as Lt,U as ll,V as ol,aX as Ll,aY as ct,a4 as An,aZ as Al,aO as Il,ar as Zt,aj as qt,ae as vn,r as wn,F as cn,a as Et,v as Ve,aW as Q,a_ as we,a$ as ye,B as x,ah as ee,C as Se,ak as te,b0 as oe,G as It,H as sl,aS as Ft,ab as In,b1 as nn,R as il,b2 as Nt,E as al,as as Pl,f as $n,ag as Ml,aU as Pn,al as Nl,am as Mn,an as Nn,ao as Xt,aV as Dn,L as Dl,M as El,y as Fl}from"./index-b7d95ac6.js";import{d as xe,j as Tt,C as Fe,f as tt,h as se,l as H,c as xt,k as jl,S as Rl,B as Bl,b as Pt,G as Hl}from"./StreetViewTool-c41d933f.js";import{a as Ye,F as zl}from"./Popup-4fdc76f8.js";import{P as fe}from"./Popup-a7ab8908.js";import{R as Gl,C as et,Z as Ul}from"./ZoomOutMap-7abf5d92.js";import{L as ql,a as Wl}from"./LineMeasureController-c63e11da.js";function Vl(r){let e;return{c(){e=T("span"),U(e,"class","svelte-kzgqtg"),Ce(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Ce(e,"background",n[0])},i:re,o:re,d(n){n&&p(e)}}}function Xl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class Oe extends J{constructor(e){super(),K(this,e,Xl,Vl,Y,{color:0})}}const Yl="/atip/browse_load/assets/help-d011708a.svg";function Ql(r){let e,n;const t=r[1].default,l=Ht(t,r,r[4],null);return{c(){e=T("div"),l&&l.c(),U(e,"class","govuk-prose")},m(o,s){$(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&zt(l,t,o,o[4],n?Ut(t,o[4],s,null):Gt(o[4]),null)},i(o){n||(_(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function Jl(r){let e,n,t,l,o,s,f;function i(u){r[3](u)}let a={title:"Help",$$slots:{default:[Ql]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new el({props:a}),W.push(()=>V(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${Yl}" title="Help" alt="Help"/>`,n=A(),b(t.$$.fragment),U(e,"class","svelte-7d9d1l")},m(u,c){$(u,e,c),$(u,n,c),v(t,u,c),o=!0,s||(f=st(e,"click",r[2]),s=!0)},p(u,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,g.open=u[0],X(()=>l=!1)),t.$set(g)},i(u){o||(_(t.$$.fragment,u),o=!0)},o(u){d(t.$$.fragment,u),o=!1},d(u){u&&(p(e),p(n)),w(t,u),s=!1,f()}}}function Kl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function f(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,f,l]}class ge extends J{constructor(e){super(),K(this,e,Kl,Jl,Y,{})}}function En(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Fn(r){let e,n,t,l=r[1]+"",o,s,f;return n=new Oe({props:{color:r[2]}}),{c(){e=T("li"),b(n.$$.fragment),t=A(),o=k(l),s=A()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),n.$set(u),(!f||a&1)&&l!==(l=i[1]+"")&&R(o,l)},i(i){f||(_(n.$$.fragment,i),f=!0)},o(i){d(n.$$.fragment,i),f=!1},d(i){i&&p(e),w(n)}}}function Zl(r){let e,n,t=Pe(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Fn(En(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){e=T("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,f){$(s,e,f);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[f]){if(f&1){t=Pe(s[0]);let i;for(i=0;i<t.length;i+=1){const a=En(s,t,i);l[i]?(l[i].p(a,f),_(l[i],1)):(l[i]=Fn(a),l[i].c(),_(l[i],1),l[i].m(e,null))}for(me(),i=t.length;i<l.length;i+=1)o(i);_e()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)_(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)d(l[f]);n=!1},d(s){s&&p(e),Ot(l,s)}}}function xl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class fl extends J{constructor(e){super(),K(this,e,xl,Zl,Y,{rows:0})}}function jn(r){let e=r[0],n,t,l=Rn(r);return{c(){l.c(),n=Ie()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?(me(),d(l,1,1,re),_e(),l=Rn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Rn(r){let e;const n=r[10].default,t=Ht(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&zt(t,n,l,l[9],e?Ut(n,l[9],o,null):Gt(l[9]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function eo(r){let e,n,t=r[0]&&jn(r);return{c(){t&&t.c(),e=Ie()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=jn(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(me(),d(t,1,1,()=>{t=null}),_e())},i(l){n||(_(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function to(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=bn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:u,self:c}=tl();be(r,u,y=>n(8,l=y)),be(r,c,y=>n(0,t=y));let g,m=!0;return nl(()=>{t&&g&&l&&(rl(u,t,g),Lt(c,t=null,t),n(6,g=void 0))}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==f&&(Lt(c,t=f,t),ll(l,t,ol({type:"raster",tiles:i,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,g=l==null?void 0:l.getSource(t)),n(7,m=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,g=l==null?void 0:l.getSource(f))})),r.$$.dirty&208&&g&&(m?n(7,m=!1):g.setTiles(i))},[t,u,c,f,i,a,g,m,l,s,o]}class no extends J{constructor(e){super(),K(this,e,to,eo,Y,{id:3,tiles:4,tileSize:5})}}function ro(r){let e;const n=r[16].default,t=Ht(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&zt(t,n,l,l[24],e?Ut(n,l[24],o,null):Gt(l[24]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function lo(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[ro]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Ll({props:o}),W.push(()=>V(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function oo(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=bn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:O=void 0}=e,{manageHoverState:C=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:F=!1}=e,{interactive:E=!0}=e;function P(j){D=j,n(0,D)}function I(j){ct.call(this,r,j)}function M(j){ct.call(this,r,j)}function L(j){ct.call(this,r,j)}function N(j){ct.call(this,r,j)}function G(j){ct.call(this,r,j)}function B(j){ct.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,f=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,u=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,g=j.filter),"applyToClusters"in j&&n(9,m=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,S=j.maxzoom),"hoverCursor"in j&&n(12,O=j.hoverCursor),"manageHoverState"in j&&n(13,C=j.manageHoverState),"hovered"in j&&n(0,D=j.hovered),"eventsIfTopMost"in j&&n(14,F=j.eventsIfTopMost),"interactive"in j&&n(15,E=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[D,o,s,f,i,a,u,c,g,m,y,S,O,C,F,E,t,P,I,M,L,N,G,B,l]}class so extends J{constructor(e){super(),K(this,e,oo,lo,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Bn(r){let e=r[0],n,t,l=Hn(r);return{c(){l.c(),n=Ie()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?(me(),d(l,1,1,re),_e(),l=Hn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Hn(r){let e;const n=r[9].default,t=Ht(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&zt(t,n,l,l[8],e?Ut(n,l[8],o,null):Gt(l[8]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function io(r){let e,n,t=r[0]&&Bn(r);return{c(){t&&t.c(),e=Ie()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=Bn(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(me(),d(t,1,1,()=>{t=null}),_e())},i(l){n||(_(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function ao(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=bn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e;if(i&&i.includes("pmtiles://")&&!An.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Al;An.addProtocol("pmtiles",y.tile)}const{map:c,self:g}=tl();be(r,c,y=>n(7,l=y)),be(r,g,y=>n(0,t=y));let m;return nl(()=>{t&&l&&(rl(c,t,m),Lt(g,t=null,t),m=void 0)}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,u=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==f&&(Lt(g,t=f,t),ll(l,t,ol({type:"vector",url:i,tiles:a,promoteId:u}),y=>l&&y===t,()=>{t&&(m=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{m=l==null?void 0:l.getSource(f)}))},[t,c,g,f,i,a,u,l,s,o]}class ke extends J{constructor(e){super(),K(this,e,ao,io,Y,{id:3,url:4,tiles:5,promoteId:6})}}const fo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Le=Uint8Array,ft=Uint16Array,ul=Uint32Array,cl=new Le([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$l=new Le([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uo=new Le([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pl=function(r,e){for(var n=new ft(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new ul(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},ml=pl(cl,2),_l=ml[0],co=ml[1];_l[28]=258,co[258]=28;var $o=pl($l,0),po=$o[0],pn=new ft(32768);for(var pe=0;pe<32768;++pe){var rt=(pe&43690)>>>1|(pe&21845)<<1;rt=(rt&52428)>>>2|(rt&13107)<<2,rt=(rt&61680)>>>4|(rt&3855)<<4,pn[pe]=((rt&65280)>>>8|(rt&255)<<8)>>>1}var Dt=function(r,e,n){for(var t=r.length,l=0,o=new ft(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new ft(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var f;if(n){f=new ft(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],u=e-r[l],c=s[r[l]-1]++<<u,g=c|(1<<u)-1;c<=g;++c)f[pn[c]>>>i]=a}else for(f=new ft(t),l=0;l<t;++l)r[l]&&(f[l]=pn[s[r[l]-1]++]>>>15-r[l]);return f},Wt=new Le(288);for(var pe=0;pe<144;++pe)Wt[pe]=8;for(var pe=144;pe<256;++pe)Wt[pe]=9;for(var pe=256;pe<280;++pe)Wt[pe]=7;for(var pe=280;pe<288;++pe)Wt[pe]=8;var gl=new Le(32);for(var pe=0;pe<32;++pe)gl[pe]=5;var mo=Dt(Wt,9,1),_o=Dt(gl,5,1),rn=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},De=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},ln=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},go=function(r){return(r+7)/8|0},kn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?ft:r.BYTES_PER_ELEMENT==4?ul:Le)(n-e);return t.set(r.subarray(e,n)),t},ho=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ee=function(r,e,n){var t=new Error(e||ho[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Ee),!n)throw t;return t},bo=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Le(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Le(t*3));var s=function(Je){var Be=e.length;if(Je>Be){var Ke=new Le(Math.max(Be*2,Je));Ke.set(e),e=Ke}},f=n.f||0,i=n.p||0,a=n.b||0,u=n.l,c=n.d,g=n.m,m=n.n,y=t*8;do{if(!u){f=De(r,i,1);var S=De(r,i+1,3);if(i+=3,S)if(S==1)u=mo,c=_o,g=9,m=5;else if(S==2){var F=De(r,i,31)+257,E=De(r,i+10,15)+4,P=F+De(r,i+5,31)+1;i+=14;for(var I=new Le(P),M=new Le(19),L=0;L<E;++L)M[uo[L]]=De(r,i+L*3,7);i+=E*3;for(var N=rn(M),G=(1<<N)-1,B=Dt(M,N,1),L=0;L<P;){var j=B[De(r,i,G)];i+=j&15;var O=j>>>4;if(O<16)I[L++]=O;else{var z=0,q=0;for(O==16?(q=3+De(r,i,3),i+=2,z=I[L-1]):O==17?(q=3+De(r,i,7),i+=3):O==18&&(q=11+De(r,i,127),i+=7);q--;)I[L++]=z}}var Z=I.subarray(0,F),ie=I.subarray(F);g=rn(Z),m=rn(ie),u=Dt(Z,g,1),c=Dt(ie,m,1)}else Ee(1);else{var O=go(i)+4,C=r[O-4]|r[O-3]<<8,D=O+C;if(D>t){o&&Ee(0);break}l&&s(a+C),e.set(r.subarray(O,D),a),n.b=a+=C,n.p=i=D*8,n.f=f;continue}if(i>y){o&&Ee(0);break}}l&&s(a+131072);for(var Te=(1<<g)-1,ae=(1<<m)-1,ve=i;;ve=i){var z=u[ln(r,i)&Te],de=z>>>4;if(i+=z&15,i>y){o&&Ee(0);break}if(z||Ee(2),de<256)e[a++]=de;else if(de==256){ve=i,u=null;break}else{var Ne=de-254;if(de>264){var L=de-257,ce=cl[L];Ne=De(r,i,(1<<ce)-1)+_l[L],i+=ce}var $e=c[ln(r,i)&ae],ue=$e>>>4;$e||Ee(3),i+=$e&15;var ie=po[ue];if(ue>3){var ce=$l[ue];ie+=ln(r,i)&(1<<ce)-1,i+=ce}if(i>y){o&&Ee(0);break}l&&s(a+131072);for(var nt=a+Ne;a<nt;a+=4)e[a]=e[a-ie],e[a+1]=e[a+1-ie],e[a+2]=e[a+2-ie],e[a+3]=e[a+3-ie];a=nt}}n.l=u,n.p=ve,n.b=a,n.f=f,u&&(f=1,n.m=g,n.d=c,n.n=m)}while(!f);return a==e.length?e:kn(e,0,a)},vo=new Le(0),We=function(r,e){return r[e]|r[e+1]<<8},je=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},on=function(r,e){return je(r,e)+je(r,e+4)*4294967296};function wo(r,e){return bo(r,e)}var mn=typeof TextDecoder<"u"&&new TextDecoder,ko=0;try{mn.decode(vo,{stream:!0}),ko=1}catch{}var yo=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,kn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function dl(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(mn)return mn.decode(r);var l=yo(r),o=l[0],s=l[1];return s.length&&Ee(8),o}}var So=function(r,e){return e+30+We(r,e+26)+We(r,e+28)},Co=function(r,e,n){var t=We(r,e+28),l=dl(r.subarray(e+46,e+46+t),!(We(r,e+8)&2048)),o=e+46+t,s=je(r,e+20),f=n&&s==4294967295?To(r,o):[s,je(r,e+24),je(r,e+42)],i=f[0],a=f[1],u=f[2];return[We(r,e+10),i,a,l,o+We(r,e+30)+We(r,e+32),u]},To=function(r,e){for(;We(r,e)!=1;e+=4+We(r,e+2));return[on(r,e+12),on(r,e+4),on(r,e+20)]};function Oo(r,e){for(var n={},t=r.length-22;je(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Ee(13);var l=We(r,t+8);if(!l)return{};var o=je(r,t+16),s=o==4294967295||l==65535;if(s){var f=je(r,t-12);s=je(r,f)==101075792,s&&(l=je(r,f+32),o=je(r,f+48))}for(var i=e&&e.filter,a=0;a<l;++a){var u=Co(r,o,s),c=u[0],g=u[1],m=u[2],y=u[3],S=u[4],O=u[5],C=So(r,O);o=S,(!i||i({name:y,size:g,originalSize:m,compression:c}))&&(c?c==8?n[y]=wo(r.subarray(C,C+g),new Le(m)):Ee(14,"unknown compression type "+c):n[y]=kn(r,C,C+g))}return n}function Lo(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(sn):sn(r)}function sn(r){var e=new Uint8Array(r),n=Oo(e);return Promise.resolve(Ao(n))}function Ao(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=dl(r[l])}return e}function Xe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&ut(t)===e)return t;n++}}function Vt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&ut(l)===e&&n.push(l),t++}return n}function en(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&ut(l)===e&&n(l,t):n(l,t),t++}}function Io(r,e,n){var t=[];return en(r,e,function(l,o){t.push(n(l,o))}),t}var Po=/.+\:/;function ut(r){return r.tagName.replace(Po,"")}function hl(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+ut(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=hl(r.childNodes[t]),t++;return e+="</"+ut(r)+">",e}function Mo(r){var e=r.documentElement,n=Xe(e,"sheetData"),t=[];return en(n,"row",function(l){en(l,"c",function(o){t.push(o)})}),t}function No(r,e){return Xe(e,"v")}function Do(r,e){if(e.firstChild&&ut(e.firstChild)==="is"&&e.firstChild.firstChild&&ut(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Eo(r){var e=r.documentElement,n=Xe(e,"dimension");if(n)return n.getAttribute("ref")}function Fo(r){var e=r.documentElement,n=Xe(e,"cellStyleXfs");return n?Vt(n,"xf"):[]}function jo(r){var e=r.documentElement,n=Xe(e,"cellXfs");return n?Vt(n,"xf"):[]}function Ro(r){var e=r.documentElement,n=Xe(e,"numFmts");return n?Vt(n,"numFmt"):[]}function Bo(r){var e=r.documentElement;return Io(e,"si",function(n){var t=Xe(n,"t");if(t)return t.textContent;var l="";return en(n,"r",function(o){l+=Xe(o,"t").textContent}),l})}function Ho(r){var e=r.documentElement;return Xe(e,"workbookPr")}function zo(r){var e=r.documentElement;return Vt(e,"Relationship")}function Go(r){var e=r.documentElement,n=Xe(e,"sheets");return Vt(n,"sheet")}function Uo(r,e){var n=e.createDocument(r),t={},l=Ho(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(f){f.getAttribute("name")&&t.sheets.push({id:f.getAttribute("sheetId"),name:f.getAttribute("name"),relationId:f.getAttribute("r:id")})};return Go(n).forEach(o),t}function qo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var f=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=an(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=an(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=an(f);break}};return zo(n).forEach(l),t}function an(r){return r[0]==="/"?r.slice(1):"xl/"+r}function zn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Gn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zn(Object(n),!0).forEach(function(t){Wo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Wo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Vo(r,e){if(!r)return{};var n=e.createDocument(r),t=Fo(n).map(fn),l=Ro(n).map(Xo).reduce(function(s,f){return s[f.id]=f,s},[]),o=function(f){return f.hasAttribute("xfId")?Gn(Gn({},t[f.xfId]),fn(f,l)):fn(f,l)};return jo(n).map(o)}function Xo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function fn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Yo(r,e){return r?Bo(e.createDocument(r)):[]}function bl(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Qo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Jo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jo(r,e){if(r){if(typeof r=="string")return Un(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(r,e)}}function Un(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ko(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Zo.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&ts(l.numberFormat.template))return!0}}var Zo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],xo=/^\[\$-414\]/,es=/;@$/;function ts(r){r=r.toLowerCase(),r=r.replace(xo,""),r=r.replace(es,"");for(var e=r.split(/\W+/),n=Qo(e),t;!(t=n()).done;){var l=t.value;if(ns.indexOf(l)<0)return!1}return!0}var ns=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function rs(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,f=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=un(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=un(r,a);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=f.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=f[u],r=un(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=ls(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var g=Number(r);if(isNaN(g))throw new Error('Invalid "numeric" cell value: '.concat(r));r=g,Ko(r,o(),s,a)&&(r=bl(r,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function ls(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function un(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var os=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function ss(r){var e=function(a,u){return a-u},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],f=t[t.length-1];return[{row:l,column:s},{row:o,column:f}]}function is(r){for(var e=0,n=0;n<r.length;)e*=26,e+=os.indexOf(r[n]),n++;return e}function vl(r){return r=r.split(/(\d+)/),[parseInt(r[1]),is(r[0].trim())]}function as(r,e,n,t,l,o,s){var f=vl(r.getAttribute("r")),i=No(e,r),a=i&&i.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:f[0],column:f[1],value:rs(a,u,{getInlineStringValue:function(){return Do(e,r)},getInlineStringXml:function(){return hl(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function fs(r,e,n,t,l,o){var s=Mo(r);return s.length===0?[]:s.map(function(f){return as(f,r,e,n,t,l,o)})}function us(r,e){return ms(r)||ps(r,e)||$s(r,e)||cs()}function cs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $s(r,e){if(r){if(typeof r=="string")return qn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(r,e)}}function qn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ps(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function ms(r){if(Array.isArray(r))return r}function _s(r){var e=Eo(r);if(e)return e=e.split(":").map(vl).map(function(n){var t=us(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function gs(r,e,n,t,l,o){var s=e.createDocument(r),f=fs(s,e,n,t,l,o),i=_s(s)||ss(f);return{cells:f,dimensions:i}}function ds(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=hs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hs(r,e){if(r){if(typeof r=="string")return Wn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wn(r,e)}}function Wn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function bs(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var f=!0,i=ds(r[s]),a;!(a=i()).done;){var u=a.value;if(l(u)!==null){f=!1;break}}if(f)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function vs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ws(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ws(r,e){if(r){if(typeof r=="string")return Vn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(r,e)}}function Vn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ks(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,f=vs(r),i;!(i=f()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var u=0;u<r.length;)r[u].splice(o,1),u++;else if(l)break;o--}return r}function ys(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=wl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ss(r,e){return Os(r)||Ts(r,e)||wl(r,e)||Cs()}function Cs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wl(r,e){if(r){if(typeof r=="string")return Xn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xn(r,e)}}function Xn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ts(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Os(r){if(Array.isArray(r))return r}function Ls(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Ss(n,2);l[0];for(var o=l[1],s=o.column,f=o.row,i=new Array(f),a=0;a<f;){i[a]=new Array(s);for(var u=0;u<s;)i[a][u]=null,u++;a++}for(var c=ys(t),g;!(g=c()).done;){var m=g.value,y=m.row-1,S=m.column-1;S<s&&y<f&&(i[y][S]=m.value)}var O=e.rowMap;if(O)for(var C=0;C<i.length;)O[C]=C,C++;return i=bs(ks(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:O}),e.transformData&&(i=e.transformData(i)),i}function As(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Is(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Is(r,e){if(r){if(typeof r=="string")return Yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(r,e)}}function Yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Qn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Ps(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qn(Object(n),!0).forEach(function(t){Ms(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ms(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ns(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Ps({sheet:1},n));var t=function(g){if(!r[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return r[g]},l=qo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Yo(t(l.sharedStrings),e):[],s=l.styles?Vo(t(l.styles),e):{},f=Uo(t("xl/workbook.xml"),e);if(n.getSheets)return f.sheets.map(function(c){var g=c.name;return{name:g}});var i=Ds(n.sheet,f.sheets);if(!i||!l.sheets[i])throw Es(n.sheet,f.sheets);var a=gs(t(l.sheets[i]),e,o,s,f,n),u=Ls(a,n);return n.properties?{data:u,properties:f}:u}function Ds(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=As(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Es(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function _n(r){"@babel/helpers - typeof";return _n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(r)}function Jn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Fs(r,e,n){return e&&Jn(r.prototype,e),n&&Jn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function js(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Rs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&jt(r,e)}function Bs(r){var e=kl();return function(){var t=Rt(r),l;if(e){var o=Rt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return Hs(this,l)}}function Hs(r,e){if(e&&(_n(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zs(r)}function zs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function gn(r){var e=typeof Map=="function"?new Map:void 0;return gn=function(t){if(t===null||!Gs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Qt(t,arguments,Rt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),jt(l,t)},gn(r)}function Qt(r,e,n){return kl()?Qt=Reflect.construct:Qt=function(l,o,s){var f=[null];f.push.apply(f,o);var i=Function.bind.apply(l,f),a=new i;return s&&jt(a,s.prototype),a},Qt.apply(null,arguments)}function kl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gs(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function jt(r,e){return jt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},jt(r,e)}function Rt(r){return Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Rt(r)}var Ae=function(r){Rs(n,r);var e=Bs(n);function n(t){var l;return js(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Fs(n)}(gn(Error));function Us(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Ae("not_a_number")}if(typeof r!="number")throw new Ae("not_a_number");if(isNaN(r))throw new Ae("invalid_number");if(!isFinite(r))throw new Ae("out_of_bounds");return r}function qs(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Ae("invalid_number");if(!isFinite(r))throw new Ae("out_of_bounds");return String(r)}throw new Ae("not_a_string")}function Ws(r){if(typeof r=="boolean")return r;throw new Ae("not_a_boolean")}function Vs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Ae("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Ae("invalid_number");if(!isFinite(r))throw new Ae("out_of_bounds");var t=bl(r,n);if(isNaN(t.valueOf()))throw new Ae("out_of_bounds");return t}throw new Ae("not_a_date")}function Xs(r,e){return Js(r)||Qs(r,e)||yl(r,e)||Ys()}function Ys(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Js(r){if(Array.isArray(r))return r}function dn(r){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(r)}function Ks(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=yl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yl(r,e){if(r){if(typeof r=="string")return Kn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(r,e)}}function Kn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Zn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function xn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zn(Object(n),!0).forEach(function(t){Zs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Zs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var er={isColumnOriented:!1};function xs(r,e,n){n?n=xn(xn({},er),n):n=er;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ri(e),l&&(r=ni(r));for(var f=r[0],i=[],a=[],u=1;u<r.length;u++){var c=Sl(e,r[u],u,f,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=Ks(a),m;!(m=g()).done;){var y=m.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function Sl(r,e,n,t,l,o){for(var s={},f=!0,i=function(){var g=u[a],m=r[g],y=dn(m.type)==="object"&&!Array.isArray(m.type),S=e[t.indexOf(g)];S===void 0&&(S=null);var O=void 0,C=void 0,D=void 0;if(y)O=Sl(m.type,e,n,t,l,o);else if(S===null)O=null;else if(Array.isArray(m.type)){var F=!1,E=ti(S).map(function(I){var M=tr(I,m,o);return M.error&&(O=I,C=M.error,D=M.reason),M.value!==null&&(F=!0),M.value});C||(O=F?E:null)}else{var P=tr(S,m,o);C=P.error,D=P.reason,O=C?S:P.value}!C&&O===null&&m.required&&(C="required"),C?(C={error:C,row:n+1,column:g,value:O},D&&(C.reason=D),m.type&&(C.type=m.type),l.push(C)):(f&&O!==null&&(f=!1),(O!==null||o.includeNullValues)&&(s[m.prop]=O))},a=0,u=Object.keys(r);a<u.length;a++)i();return f?null:s}function tr(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=$t(r,e.parse):e.type?t=ei(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function $t(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ei(r,e,n){switch(e){case String:return $t(r,qs);case Number:return $t(r,Us);case Date:return $t(r,function(t){return Vs(t,{properties:n.properties})});case Boolean:return $t(r,Ws);default:if(typeof e=="function")return $t(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Cl(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=Cl(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function ti(r){for(var e=[],n=0;n<r.length;){var t=Cl(r,",",n),l=Xs(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var ni=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function ri(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function hn(r){"@babel/helpers - typeof";return hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(r)}function Tl(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;hn(o)==="object"&&(o=Object.keys(r[l])[0],s=Tl(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var li=["schema","map"];function nr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Yt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nr(Object(n),!0).forEach(function(t){oi(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function oi(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function si(r,e){if(r==null)return{};var n=ii(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ii(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function ai(r,e,n){var t=n.schema,l=n.map,o=si(n,li);!t&&l&&(t=Tl(l));var s=Ns(r,e,Yt(Yt({},o),{},{properties:t||o.properties}));return t?xs(s.data,t,Yt(Yt({},o),{},{properties:s.properties})):s}function fi(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Lo(r).then(function(n){return ai(n,fo,e)})}function ui(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>ci(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function ci(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function $i(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await fi(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Il(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function Ol(r){return Zt(["get","intervention_type"],{area:xe.area,route:xe.route,crossing:xe.crossing,other:xe.other},"white")}function rr(r){return[["Areas",xe.area],["Routes",xe.route],["Crossings",xe.crossing],["Other",xe.other]]}const le={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},Re=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20],At=qt({type:"FeatureCollection",features:[],schemes:{}}),Bt=qt(new Map),lr=qt(!0),Jt=qt(""),Kt=qt("");function pi(r){let e,n;return e=new fl({props:{rows:r[1]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mi(r){let e,n,t,l,o;function s(i){r[3](i)}let f={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(f.value=r[0]),e=new Tt({props:f}),W.push(()=>V(e,"value",s)),e.$on("change",r[2]),l=new Fe({props:{label:"Legend",$$slots:{default:[pi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};!n&&a&1&&(n=!0,u.value=i[0],X(()=>n=!1)),e.$set(u);const c={};a&258&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function or(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function _i(r,e,n){let t,l;be(r,Bt,c=>n(4,t=c)),be(r,vn,c=>n(5,l=c));let o="interventionType",s=rr();function f(){let c;o=="interventionType"?(c=Ol(),n(1,s=rr())):o=="fundingProgramme"?c=i():o=="currentMilestone"&&(c=a()),l.setPaintProperty("interventions-points","circle-color",c),l.setPaintProperty("interventions-lines","line-color",c),l.setPaintProperty("interventions-polygons","fill-color",c),l.setPaintProperty("interventions-polygons-outlines","line-color",c)}function i(){var O;let c=new Set;for(let C of t.values())(O=C.browse)!=null&&O.funding_programme&&c.add(C.browse.funding_programme);let g=Array.from(c);g.sort();let[m,y]=or(g,le.funding_programmes),S=Zt(["get","funding_programme"],m,"grey");return n(1,s=y),S}function a(){let c=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[g,m]=or(c,le.current_milestone),y=Zt(["get","current_milestone"],g,"grey");return n(1,s=m),y}function u(c){o=c,n(0,o)}return[o,s,f,u]}class gi extends J{constructor(e){super(),K(this,e,_i,mi,Y,{})}}function di(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hi(r){let e,n,t,l,o,s;return t=new Et({props:{$$slots:{default:[di]},$$scope:{ctx:r}}}),t.$on("click",r[15]),{c(){e=T("input"),n=A(),b(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterInterventionText")},m(f,i){$(f,e,i),Ve(e,r[6]),$(f,n,i),v(t,f,i),l=!0,o||(s=st(e,"input",r[14]),o=!0)},p(f,i){i&64&&e.value!==f[6]&&Ve(e,f[6]);const a={};i&4194304&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(_(t.$$.fragment,f),l=!0)},o(f){d(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function bi(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vi(r){let e,n,t,l,o,s;return t=new Et({props:{$$slots:{default:[bi]},$$scope:{ctx:r}}}),t.$on("click",r[17]),{c(){e=T("input"),n=A(),b(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterSchemeText")},m(f,i){$(f,e,i),Ve(e,r[5]),$(f,n,i),v(t,f,i),l=!0,o||(s=st(e,"input",r[16]),o=!0)},p(f,i){i&32&&e.value!==f[5]&&Ve(e,f[5]);const a={};i&4194304&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(_(t.$$.fragment,f),l=!0)},o(f){d(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function wi(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S;function O(I){r[11](I)}let C={label:"Authority or region",id:"filterAuthority",choices:r[7],emptyOption:!0};r[2]!==void 0&&(C.value=r[2]),e=new Tt({props:C}),W.push(()=>V(e,"value",O));function D(I){r[12](I)}let F={label:"Funding programme",id:"filterFundingProgramme",choices:r[8],emptyOption:!0};r[3]!==void 0&&(F.value=r[3]),l=new Tt({props:F}),W.push(()=>V(l,"value",D));function E(I){r[13](I)}let P={label:"Current milestone",id:"filterCurrentMilestone",choices:r[9],emptyOption:!0};return r[4]!==void 0&&(P.value=r[4]),f=new Tt({props:P}),W.push(()=>V(f,"value",E)),u=new cn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[hi]},$$scope:{ctx:r}}}),g=new cn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[vi]},$$scope:{ctx:r}}}),y=new gi({}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment),s=A(),b(f.$$.fragment),a=A(),b(u.$$.fragment),c=A(),b(g.$$.fragment),m=A(),b(y.$$.fragment)},m(I,M){v(e,I,M),$(I,t,M),v(l,I,M),$(I,s,M),v(f,I,M),$(I,a,M),v(u,I,M),$(I,c,M),v(g,I,M),$(I,m,M),v(y,I,M),S=!0},p(I,M){const L={};M&128&&(L.choices=I[7]),!n&&M&4&&(n=!0,L.value=I[2],X(()=>n=!1)),e.$set(L);const N={};M&256&&(N.choices=I[8]),!o&&M&8&&(o=!0,N.value=I[3],X(()=>o=!1)),l.$set(N);const G={};M&512&&(G.choices=I[9]),!i&&M&16&&(i=!0,G.value=I[4],X(()=>i=!1)),f.$set(G);const B={};M&4194368&&(B.$$scope={dirty:M,ctx:I}),u.$set(B);const j={};M&4194336&&(j.$$scope={dirty:M,ctx:I}),g.$set(j)},i(I){S||(_(e.$$.fragment,I),_(l.$$.fragment,I),_(f.$$.fragment,I),_(u.$$.fragment,I),_(g.$$.fragment,I),_(y.$$.fragment,I),S=!0)},o(I){d(e.$$.fragment,I),d(l.$$.fragment,I),d(f.$$.fragment,I),d(u.$$.fragment,I),d(g.$$.fragment,I),d(y.$$.fragment,I),S=!1},d(I){I&&(p(t),p(s),p(a),p(c),p(m)),w(e,I),w(l,I),w(f,I),w(u,I),w(g,I),w(y,I)}}}function ki(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[10].route.toLocaleString()+"",s,f,i=r[10].area.toLocaleString()+"",a,u,c=r[10].crossing.toLocaleString()+"",g,m,y=r[10].other.toLocaleString()+"",S,O,C=sr(r[10].totalLength).toFixed(1)+"",D,F;return{c(){e=k("Showing "),t=k(n),l=k(" schemes ("),s=k(o),f=k(`
    routes, `),a=k(i),u=k(` areas,
    `),g=k(c),m=k(" crossings, "),S=k(y),O=k(`
    other, with total LineString length of `),D=k(C),F=k(" miles)")},m(E,P){$(E,e,P),$(E,t,P),$(E,l,P),$(E,s,P),$(E,f,P),$(E,a,P),$(E,u,P),$(E,g,P),$(E,m,P),$(E,S,P),$(E,O,P),$(E,D,P),$(E,F,P)},p(E,P){P&1&&n!==(n=E[0].size.toLocaleString()+"")&&R(t,n),P&1024&&o!==(o=E[10].route.toLocaleString()+"")&&R(s,o),P&1024&&i!==(i=E[10].area.toLocaleString()+"")&&R(a,i),P&1024&&c!==(c=E[10].crossing.toLocaleString()+"")&&R(g,c),P&1024&&y!==(y=E[10].other.toLocaleString()+"")&&R(S,y),P&1024&&C!==(C=sr(E[10].totalLength).toFixed(1)+"")&&R(D,C)},d(E){E&&(p(e),p(t),p(l),p(s),p(f),p(a),p(u),p(g),p(m),p(S),p(O),p(D),p(F))}}}function yi(r){let e,n,t;function l(s){r[18](s)}let o={id:"show-schemes",$$slots:{default:[ki]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&4195329&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Si(r){let e,n,t,l;return e=new Fe({props:{label:"Filters",$$slots:{default:[wi]},$$scope:{ctx:r}}}),t=new tt({props:{small:!0,$$slots:{default:[yi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&4195324&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&4195331&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function sr(r){return r*621371e-9}function Ci(r,e,n){let t,l,o,s;be(r,Kt,N=>n(5,t=N)),be(r,Jt,N=>n(6,l=N)),be(r,At,N=>n(19,o=N)),be(r,Bt,N=>n(20,s=N));let{schemesToBeShown:f=new Set}=e,{show:i=!0}=e,a=[],u="",c=[],g="",m=[],y="",S={area:0,route:0,crossing:0,other:0,totalLength:0};wn(()=>{var j,z,q;let N=new Set,G=new Set,B=new Set;for(let Z of s.values())(j=Z.browse)!=null&&j.authority_or_region&&N.add(Z.browse.authority_or_region),(z=Z.browse)!=null&&z.funding_programme&&G.add(Z.browse.funding_programme),(q=Z.browse)!=null&&q.current_milestone&&B.add(Z.browse.current_milestone);n(7,a=Array.from(N.entries())),a.sort(),n(8,c=Array.from(G.entries())),c.sort(),n(9,m=Array.from(B.entries())),m.sort()});function O(N,G,B,j,z){let q=N.toLowerCase(),Z=G.toLowerCase(),ie=ae=>{var ve,de,Ne,ce,$e;if(q&&!((ve=ae.properties.name)!=null&&ve.toLowerCase().includes(q))&&!((de=ae.properties.description)!=null&&de.toLowerCase().includes(q)))return!1;if(Z||B||j||z){let ue=s.get(ae.properties.scheme_reference);if(B&&((Ne=ue.browse)==null?void 0:Ne.authority_or_region)!=B||j&&((ce=ue.browse)==null?void 0:ce.funding_programme)!=j||z&&(($e=ue.browse)==null?void 0:$e.current_milestone)!=z||Z&&!ue.scheme_reference.toLowerCase().includes(Z)&&!(ue.scheme_name??"").toLowerCase().includes(Z))return!1}return!0};n(0,f=new Set(o.features.filter(ie).map(ae=>ae.properties.scheme_reference))),n(10,S={area:0,route:0,crossing:0,other:0,totalLength:0});let Te=ae=>{var ve,de;return!(!f.has(ae.properties.scheme_reference)||q&&!((ve=ae.properties.name)!=null&&ve.toLowerCase().includes(q))&&!((de=ae.properties.description)!=null&&de.toLowerCase().includes(q)))};for(let ae of o.features)Te(ae)?(delete ae.properties.hide_while_editing,n(10,S[ae.properties.intervention_type]++,S),ae.geometry.type=="LineString"&&ae.properties.length_meters&&n(10,S.totalLength+=ae.properties.length_meters,S)):ae.properties.hide_while_editing=!0;At.set(o),n(10,S)}function C(N){u=N,n(2,u)}function D(N){g=N,n(3,g)}function F(N){y=N,n(4,y)}function E(){l=this.value,Jt.set(l)}const P=()=>Lt(Jt,l="",l);function I(){t=this.value,Kt.set(t)}const M=()=>Lt(Kt,t="",t);function L(N){i=N,n(1,i)}return r.$$set=N=>{"schemesToBeShown"in N&&n(0,f=N.schemesToBeShown),"show"in N&&n(1,i=N.show)},r.$$.update=()=>{r.$$.dirty&124&&O(l,t,u,g,y)},[f,i,u,g,y,t,l,a,c,m,S,C,D,F,E,P,I,M,L]}class Ti extends J{constructor(e){super(),K(this,e,Ci,Si,Y,{schemesToBeShown:0,show:1})}}function Oi(r){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Li(r){let e,n,t,l,o;return t=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Oi]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment),l=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,f){$(s,e,f),h(e,n),v(t,e,null),h(e,l),o=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){o||(_(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class Me extends J{constructor(e){super(),K(this,e,null,Li,Y,{})}}function ir(r,e,n){const t=r.slice();return t[2]=e[n],t}function ar(r,e,n){const t=r.slice();return t[5]=e[n],t}function fr(r){let e,n;return{c(){e=T("span"),n=k(`
    `),Ce(e,"background",r[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,l){$(t,e,l),h(e,n)},p(t,l){l&1&&Ce(e,"background",t[5])},d(t){t&&p(e)}}}function ur(r){let e,n=r[2]+"",t;return{c(){e=T("span"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&R(t,n)},d(l){l&&p(e)}}}function Ai(r){let e,n,t,l=Pe(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=fr(ar(r,l,i));let s=Pe(r[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=ur(ir(r,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=A(),t=T("div");for(let i=0;i<f.length;i+=1)f[i].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);$(i,n,a),$(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){l=Pe(i[0]);let u;for(u=0;u<l.length;u+=1){const c=ar(i,l,u);o[u]?o[u].p(c,a):(o[u]=fr(c),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}if(a&2){s=Pe(i[1]);let u;for(u=0;u<s.length;u+=1){const c=ir(i,s,u);f[u]?f[u].p(c,a):(f[u]=ur(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:re,o:re,d(i){i&&(p(e),p(n),p(t)),Ot(o,i),Ot(f,i)}}}function Ii(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Qe extends J{constructor(e){super(),K(this,e,Ii,Ai,Y,{colorScale:0,limits:1})}}function cr(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Pi(r){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mi(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ni(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Di(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ei(r){let e,n,t,l,o,s,f,i,a,u,c,g;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Mi]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ni]},$$scope:{ctx:r}}}),u=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Di]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=A(),i=T("p"),a=k("License: "),b(u.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(m,f,y),$(m,i,y),h(i,a),v(u,i,null),h(i,c),g=!0},p(m,y){const S={};y&65536&&(S.$$scope={dirty:y,ctx:m}),t.$set(S);const O={};y&65536&&(O.$$scope={dirty:y,ctx:m}),o.$set(O);const C={};y&65536&&(C.$$scope={dirty:y,ctx:m}),u.$set(C)},i(m){g||(_(t.$$.fragment,m),_(o.$$.fragment,m),_(u.$$.fragment,m),g=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),g=!1},d(m){m&&(p(e),p(f),p(i)),w(t),w(o),w(u)}}}function Fi(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function $r(r){let e,n;return e=new Qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ji(r){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ri(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hi(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zi(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y;return o=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ri]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Bi]},$$scope:{ctx:r}}}),g=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=A(),t=T("p"),l=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(f.$$.fragment),i=k("."),a=A(),u=T("p"),c=k("License: "),b(g.$$.fragment),m=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(S,O){$(S,e,O),$(S,n,O),$(S,t,O),h(t,l),v(o,t,null),h(t,s),v(f,t,null),h(t,i),$(S,a,O),$(S,u,O),h(u,c),v(g,u,null),h(u,m),y=!0},p(S,O){const C={};O&65536&&(C.$$scope={dirty:O,ctx:S}),o.$set(C);const D={};O&65536&&(D.$$scope={dirty:O,ctx:S}),f.$set(D);const F={};O&65536&&(F.$$scope={dirty:O,ctx:S}),g.$set(F)},i(S){y||(_(o.$$.fragment,S),_(f.$$.fragment,S),_(g.$$.fragment,S),y=!0)},o(S){d(o.$$.fragment,S),d(f.$$.fragment,S),d(g.$$.fragment,S),y=!1},d(S){S&&(p(e),p(n),p(t),p(a),p(u)),w(o),w(f),w(g)}}}function Gi(r){let e,n,t;return n=new ge({props:{$$slots:{default:[zi]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function pr(r){let e,n;return e=new Qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ui(r){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qi(r){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[qi]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Wi]},$$scope:{ctx:r}}}),i=new Me({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=A(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const m={};c&65536&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function Xi(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Vi]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function mr(r){let e,n,t,l;return t=new Qe({props:{colorScale:r[4],limits:r[6]().map(ta)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=A(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:re,i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function Yi(r){let e,n,t,l=r[15].toLocaleString()+"",o,s,f=r[14]+"",i;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(l),s=k(`
          people per square kilometre in `),i=k(f)},m(a,u){$(a,e,u),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,u){u&8200&&l!==(l=a[15].toLocaleString()+"")&&R(o,l),u&8192&&f!==(f=a[14]+"")&&R(i,f)},d(a){a&&p(e)}}}function Qi(r){let e,n,t=r[14]+"",l,o,s,f=r[15]+"",i,a;return{c(){e=T("p"),n=k("Households in "),l=k(t),o=k(` have an average of
          `),s=T("b"),i=k(f),a=k(`
          cars`)},m(u,c){$(u,e,c),h(e,n),h(e,l),h(e,o),h(e,s),h(s,i),h(e,a)},p(u,c){c&8192&&t!==(t=u[14]+"")&&R(l,t),c&8200&&f!==(f=u[15]+"")&&R(i,f)},d(u){u&&p(e)}}}function Ji(r){let e,n,t=r[15]+"",l,o,s,f=r[14]+"",i,a;return{c(){e=T("p"),n=T("b"),l=k(t),o=k("%"),s=k(`
          of households in `),i=k(f),a=k(" have 1 or more cars")},m(u,c){$(u,e,c),h(e,n),h(n,l),h(n,o),h(e,s),h(e,i),h(e,a)},p(u,c){c&8200&&t!==(t=u[15]+"")&&R(l,t),c&8192&&f!==(f=u[14]+"")&&R(i,f)},d(u){u&&p(e)}}}function Ki(r){cr(r);let e;function n(o,s){return o[3]=="percent_households_with_car"?Ji:o[3]=="average_cars_per_household"?Qi:Yi}let t=n(r),l=t(r);return{c(){l.c(),e=Ie()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){cr(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Zi(r){let e,n;return e=new fe({props:{$$slots:{default:[Ki,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xi(r){let e,n,t,l;const o=[H(Ze),{sourceLayer:Ze},{paint:{"fill-color":ye(["get",r[3]],r[6](),r[4]),"fill-opacity":x(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Zi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s}),e.$on("click",r[5]);const f=[H(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&88?te(o,[u&0&&oe(H(Ze)),u&0&&{sourceLayer:Ze},u&88&&{paint:{"fill-color":ye(["get",a[3]],a[6](),a[4]),"fill-opacity":x(.5,.7)}},u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};u&65544&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&8?te(f,[u&0&&oe(H(`${Ze}-outline`)),u&0&&{sourceLayer:Ze},f[2],u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function ea(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y;function S(L){r[7](L)}let O={id:"percent_households_with_car",$$slots:{right:[Fi],default:[Pi]},$$scope:{ctx:r}};r[0]!==void 0&&(O.checked=r[0]),e=new se({props:O}),W.push(()=>V(e,"checked",S)),e.$on("change",r[8]);let C=r[3]=="percent_households_with_car"&&$r(r);function D(L){r[9](L)}let F={id:"average_cars_per_household",$$slots:{right:[Gi],default:[ji]},$$scope:{ctx:r}};r[1]!==void 0&&(F.checked=r[1]),o=new se({props:F}),W.push(()=>V(o,"checked",D)),o.$on("change",r[10]);let E=r[3]=="average_cars_per_household"&&pr(r);function P(L){r[11](L)}let I={id:"population_density",$$slots:{right:[Xi],default:[Ui]},$$scope:{ctx:r}};r[2]!==void 0&&(I.checked=r[2]),a=new se({props:I}),W.push(()=>V(a,"checked",P)),a.$on("change",r[12]);let M=r[3]=="population_density"&&mr(r);return m=new ke({props:{url:`pmtiles://${we()}/v1/${Ze}.pmtiles`,$$slots:{default:[xi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),C&&C.c(),l=A(),b(o.$$.fragment),f=A(),E&&E.c(),i=A(),b(a.$$.fragment),c=A(),M&&M.c(),g=A(),b(m.$$.fragment)},m(L,N){v(e,L,N),$(L,t,N),C&&C.m(L,N),$(L,l,N),v(o,L,N),$(L,f,N),E&&E.m(L,N),$(L,i,N),v(a,L,N),$(L,c,N),M&&M.m(L,N),$(L,g,N),v(m,L,N),y=!0},p(L,[N]){const G={};N&65536&&(G.$$scope={dirty:N,ctx:L}),!n&&N&1&&(n=!0,G.checked=L[0],X(()=>n=!1)),e.$set(G),L[3]=="percent_households_with_car"?C?(C.p(L,N),N&8&&_(C,1)):(C=$r(L),C.c(),_(C,1),C.m(l.parentNode,l)):C&&(me(),d(C,1,1,()=>{C=null}),_e());const B={};N&65536&&(B.$$scope={dirty:N,ctx:L}),!s&&N&2&&(s=!0,B.checked=L[1],X(()=>s=!1)),o.$set(B),L[3]=="average_cars_per_household"?E?(E.p(L,N),N&8&&_(E,1)):(E=pr(L),E.c(),_(E,1),E.m(i.parentNode,i)):E&&(me(),d(E,1,1,()=>{E=null}),_e());const j={};N&65536&&(j.$$scope={dirty:N,ctx:L}),!u&&N&4&&(u=!0,j.checked=L[2],X(()=>u=!1)),a.$set(j),L[3]=="population_density"?M?(M.p(L,N),N&8&&_(M,1)):(M=mr(L),M.c(),_(M,1),M.m(g.parentNode,g)):M&&(me(),d(M,1,1,()=>{M=null}),_e());const z={};N&65544&&(z.$$scope={dirty:N,ctx:L}),m.$set(z)},i(L){y||(_(e.$$.fragment,L),_(C),_(o.$$.fragment,L),_(E),_(a.$$.fragment,L),_(M),_(m.$$.fragment,L),y=!0)},o(L){d(e.$$.fragment,L),d(C),d(o.$$.fragment,L),d(E),d(a.$$.fragment,L),d(M),d(m.$$.fragment,L),y=!1},d(L){L&&(p(t),p(l),p(f),p(i),p(c),p(g)),w(e,L),C&&C.d(L),w(o,L),E&&E.d(L),w(a,L),M&&M.d(L),w(m,L)}}}let Ze="census_output_areas";const ta=r=>r.toLocaleString();function na(r,e,n){let t=le.sequential_low_to_high,l=!1,o=!1,s=!1,f="";function i(O){let C=O.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${C}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${C}`,"_blank")}function a(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function u(O){l=O,n(0,l)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(O){o=O,n(1,o)}const m=()=>{n(0,l=!1),n(2,s=!1)};function y(O){s=O,n(2,s)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,f="percent_households_with_car"):o?n(3,f="average_cars_per_household"):s?n(3,f="population_density"):n(3,f=""))},[l,o,s,f,t,i,a,u,c,g,m,y,S]}class ra extends J{constructor(e){super(),K(this,e,na,ea,Y,{})}}function la(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function oa(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sa(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[oa]},$$scope:{ctx:r}}}),s=new Me({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of December 2022."),o=A(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function ia(r){let e,n,t;return n=new ge({props:{$$slots:{default:[sa]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function aa(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function fa(r){let e,n;return e=new fe({props:{$$slots:{default:[aa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ua(r){let e,n,t,l;const o=[H(pt),{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[fa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s}),e.$on("click",$a);const f=[H(`${pt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&oe(H(pt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&oe(H(`${pt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function ca(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:pt,$$slots:{right:[ia],default:[la]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>V(e,"checked",s)),l=new It({props:{data:`${we()}/v1/${pt}.geojson`,$$slots:{default:[ua]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let pt="combined_authorities";function $a(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function pa(r,e,n){let t=le.combined_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ma extends J{constructor(e){super(),K(this,e,pa,ca,Y,{})}}function _a(r){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ga(r){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function da(r){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ha(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[ga]},$$scope:{ctx:r}}}),o=new Q({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[da]},$$scope:{ctx:r}}}),i=new Me({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),l=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),f=A(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const m={};c&32&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function ba(r){let e,n,t;return n=new ge({props:{$$slots:{default:[ha]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function _r(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function va(r){let e,n=r[4].LSOA11CD+"",t,l,o,s=r[4].score+"",f,i,a,u,c,g=r[4].rank.toLocaleString()+"",m,y;return{c(){e=T("p"),t=k(n),l=k(` has an IMD score of
        `),o=T("b"),f=k(s),i=A(),a=T("p"),u=k("Rank: "),c=T("b"),m=k(g),y=k(`
        / 32,844 LSOAs`)},m(S,O){$(S,e,O),h(e,t),h(e,l),h(e,o),h(o,f),$(S,i,O),$(S,a,O),h(a,u),h(a,c),h(c,m),h(a,y)},p(S,O){O&16&&n!==(n=S[4].LSOA11CD+"")&&R(t,n),O&16&&s!==(s=S[4].score+"")&&R(f,s),O&16&&g!==(g=S[4].rank.toLocaleString()+"")&&R(m,g)},d(S){S&&(p(e),p(i),p(a))}}}function wa(r){let e,n;return e=new fe({props:{$$slots:{default:[va,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ka(r){let e,n,t,l;const o=[H(He),{sourceLayer:He},{paint:{"fill-color":ye(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":x(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[wa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s});const f=[H(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&7?te(o,[u&0&&oe(H(He)),u&0&&{sourceLayer:He},u&6&&{paint:{"fill-color":ye(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":x(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&1?te(f,[u&0&&oe(H(`${He}-outline`)),u&0&&{sourceLayer:He},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function ya(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:He,$$slots:{right:[ba],default:[_a]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&_r(r);return o=new ke({props:{url:`pmtiles://${we()}/v1/${He}.pmtiles`,$$slots:{default:[ka]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),a&&a.c(),l=A(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=_r(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let He="imd";function Sa(r,e,n){let t=le.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class Ca extends J{constructor(e){super(),K(this,e,Sa,ya,Y,{})}}function Ta(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Oa(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function La(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Oa]},$$scope:{ctx:r}}}),s=new Me({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=A(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Aa(r){let e,n,t;return n=new ge({props:{$$slots:{default:[La]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Ia(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Pa(r){let e,n;return e=new fe({props:{$$slots:{default:[Ia,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ma(r){let e,n,t,l;const o=[H(mt),{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Pa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s}),e.$on("click",Da);const f=[H(`${mt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&oe(H(mt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&oe(H(`${mt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Na(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:mt,$$slots:{right:[Aa],default:[Ta]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>V(e,"checked",s)),l=new It({props:{data:`${we()}/v1/${mt}.geojson`,$$slots:{default:[Ma]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let mt="local_authority_districts";function Da(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Ea(r,e,n){let t=le.local_authority_districts,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Fa extends J{constructor(e){super(),K(this,e,Ea,Na,Y,{})}}function ja(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Ra(r){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ba(r){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ha(r){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function za(r){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ga(r){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ua(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S,O,C,D,F,E,P,I;return t=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ra]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Ba]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ha]},$$scope:{ctx:r}}}),m=new Q({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[za]},$$scope:{ctx:r}}}),D=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ga]},$$scope:{ctx:r}}}),P=new Me({}),{c(){e=T("p"),n=k("LPAs may be a "),b(t.$$.fragment),l=k(", "),b(o.$$.fragment),s=k("y, or "),b(f.$$.fragment),i=k("."),a=A(),u=T("p"),c=T("strong"),g=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(m.$$.fragment),y=k(" to get more details."),S=A(),O=T("p"),C=k("Data from ONS Geography via "),b(D.$$.fragment),F=k(", as of November 2022."),E=A(),b(P.$$.fragment)},m(M,L){$(M,e,L),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),v(f,e,null),h(e,i),$(M,a,L),$(M,u,L),h(u,c),h(c,g),v(m,c,null),h(c,y),$(M,S,L),$(M,O,L),h(O,C),v(D,O,null),h(O,F),$(M,E,L),v(P,M,L),I=!0},p(M,L){const N={};L&16&&(N.$$scope={dirty:L,ctx:M}),t.$set(N);const G={};L&16&&(G.$$scope={dirty:L,ctx:M}),o.$set(G);const B={};L&16&&(B.$$scope={dirty:L,ctx:M}),f.$set(B);const j={};L&16&&(j.$$scope={dirty:L,ctx:M}),m.$set(j);const z={};L&16&&(z.$$scope={dirty:L,ctx:M}),D.$set(z)},i(M){I||(_(t.$$.fragment,M),_(o.$$.fragment,M),_(f.$$.fragment,M),_(m.$$.fragment,M),_(D.$$.fragment,M),_(P.$$.fragment,M),I=!0)},o(M){d(t.$$.fragment,M),d(o.$$.fragment,M),d(f.$$.fragment,M),d(m.$$.fragment,M),d(D.$$.fragment,M),d(P.$$.fragment,M),I=!1},d(M){M&&(p(e),p(a),p(u),p(S),p(O),p(E)),w(t),w(o),w(f),w(m),w(D),w(P,M)}}}function qa(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Ua]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Wa(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Va(r){let e,n;return e=new fe({props:{$$slots:{default:[Wa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Xa(r){let e,n,t,l;const o=[H(ze),{sourceLayer:ze},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Va]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s});const f=[H(`${ze}-outline`),{sourceLayer:ze},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&oe(H(ze)),u&0&&{sourceLayer:ze},u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&oe(H(`${ze}-outline`)),u&0&&{sourceLayer:ze},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Ya(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:ze,$$slots:{right:[qa],default:[ja]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>V(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${ze}.pmtiles`,$$slots:{default:[Xa]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let ze="local_planning_authorities";function Qa(r,e,n){let t=le.local_planning_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Ja extends J{constructor(e){super(),K(this,e,Qa,Ya,Y,{})}}function Ka(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Za(r){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Za]},$$scope:{ctx:r}}}),s=new Me({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=A(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function ef(r){let e,n,t;return n=new ge({props:{$$slots:{default:[xa]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function tf(r){let e,n=r[3].Name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&R(t,n)},d(l){l&&p(e)}}}function nf(r){let e,n;return e=new fe({props:{$$slots:{default:[tf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rf(r){let e,n,t,l;const o=[H(Ge),{sourceLayer:Ge},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[nf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s}),e.$on("click",of);const f=[H(`${Ge}-outline`),{sourceLayer:Ge},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&oe(H(Ge)),u&0&&{sourceLayer:Ge},u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&oe(H(`${Ge}-outline`)),u&0&&{sourceLayer:Ge},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function lf(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Ge,$$slots:{right:[ef],default:[Ka]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>V(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${Ge}.pmtiles`,$$slots:{default:[rf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ge="parliamentary_constituencies";function of(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function sf(r,e,n){let t=le.parliamentary_constituencies,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class af extends J{constructor(e){super(),K(this,e,sf,lf,Y,{})}}function ff(r){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uf(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(r){let e;return{c(){e=k(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(r){let e;return{c(){e=k(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pf(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S,O;return t=new Q({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[uf]},$$scope:{ctx:r}}}),u=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[cf]},$$scope:{ctx:r}}}),g=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[$f]},$$scope:{ctx:r}}}),S=new Me({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),l=k(`. The measurements are annual means, in units of
        gm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),f=A(),i=T("p"),a=k("The noise layer is from "),b(u.$$.fragment),c=k(", using 2017 data. See their "),b(g.$$.fragment),m=k("."),y=A(),b(S.$$.fragment)},m(C,D){$(C,e,D),h(e,n),v(t,e,null),h(e,l),h(e,o),h(e,s),$(C,f,D),$(C,i,D),h(i,a),v(u,i,null),h(i,c),v(g,i,null),h(i,m),$(C,y,D),v(S,C,D),O=!0},p(C,D){const F={};D&2048&&(F.$$scope={dirty:D,ctx:C}),t.$set(F);const E={};D&2048&&(E.$$scope={dirty:D,ctx:C}),u.$set(E);const P={};D&2048&&(P.$$scope={dirty:D,ctx:C}),g.$set(P)},i(C){O||(_(t.$$.fragment,C),_(u.$$.fragment,C),_(g.$$.fragment,C),_(S.$$.fragment,C),O=!0)},o(C){d(t.$$.fragment,C),d(u.$$.fragment,C),d(g.$$.fragment,C),d(S.$$.fragment,C),O=!1},d(C){C&&(p(e),p(f),p(i),p(y)),w(t),w(u),w(g),w(S,C)}}}function mf(r){let e,n,t;return n=new ge({props:{$$slots:{default:[pf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function gr(r){let e,n,t,l,o=r[3](r[0])+"",s,f,i,a,u,c,g,m,y,S,O,C,D;function F(L){r[7](L)}let E={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(E.value=r[0]),e=new Tt({props:E}),W.push(()=>V(e,"value",F));const P=[gf,_f],I=[];function M(L,N){return L[0]=="Noise"?0:1}return m=M(r),y=I[m]=P[m](r),{c(){b(e.$$.fragment),t=A(),l=T("p"),s=k(o),f=A(),i=T("div"),a=T("label"),u=k(`Opacity
      `),c=T("input"),g=A(),y.c(),S=Ie(),U(c,"type","range"),U(c,"min","0"),U(c,"max","100")},m(L,N){v(e,L,N),$(L,t,N),$(L,l,N),h(l,s),$(L,f,N),$(L,i,N),h(i,a),h(a,u),h(a,c),Ve(c,r[2]),$(L,g,N),I[m].m(L,N),$(L,S,N),O=!0,C||(D=[st(c,"change",r[8]),st(c,"input",r[8])],C=!0)},p(L,N){const G={};!n&&N&1&&(n=!0,G.value=L[0],X(()=>n=!1)),e.$set(G),(!O||N&1)&&o!==(o=L[3](L[0])+"")&&R(s,o),N&4&&Ve(c,L[2]);let B=m;m=M(L),m===B?I[m].p(L,N):(me(),d(I[B],1,1,()=>{I[B]=null}),_e(),y=I[m],y?y.p(L,N):(y=I[m]=P[m](L),y.c()),_(y,1),y.m(S.parentNode,S))},i(L){O||(_(e.$$.fragment,L),_(y),O=!0)},o(L){d(e.$$.fragment,L),d(y),O=!1},d(L){L&&(p(t),p(l),p(f),p(i),p(g),p(S)),w(e,L),I[m].d(L),C=!1,sl(D)}}}function _f(r){let e,n,t;return{c(){e=T("img"),In(e.src,n=r[5](r[0]))||U(e,"src",n),U(e,"width",150),U(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!In(e.src,n=l[5](l[0]))&&U(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&U(e,"alt",t)},i:re,o:re,d(l){l&&p(e)}}}function gf(r){let e,n;return e=new Qe({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function df(r){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Gl({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function hf(r){let e,n,t,l,o,s;function f(u){r[6](u)}let i={id:"pollution",$$slots:{right:[mf],default:[ff]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new se({props:i}),W.push(()=>V(e,"checked",f));let a=r[1]&&gr(r);return o=new no({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[df]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),a&&a.c(),l=A(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,g.checked=u[1],X(()=>n=!1)),e.$set(g),u[1]?a?(a.p(u,c),c&2&&_(a,1)):(a=gr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&1&&(m.tiles=[u[4](u[0])]),c&2054&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}function bf(r,e,n){let t,l=!1,o=50,s="PM25_viridis";function f(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${f()}?bbox={bbox-epsg-3857}&${S}`}function u(y){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${f()}?${S}`}function c(y){l=y,n(1,l)}function g(y){s=y,n(0,s)}function m(){o=Ft(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,l,o,i,a,u,c,g,m]}class vf extends J{constructor(e){super(),K(this,e,bf,hf,Y,{})}}function wf(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function kf(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yf(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[kf]},$$scope:{ctx:r}}}),s=new Me({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=A(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Sf(r){let e,n,t;return n=new ge({props:{$$slots:{default:[yf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Cf(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Tf(r){let e,n;return e=new fe({props:{$$slots:{default:[Cf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Of(r){let e,n,t,l;const o=[H(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Tf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ye({props:s}),e.$on("click",Af);const f=[H(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&oe(H(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&oe(H(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Lf(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Ue,$$slots:{right:[Sf],default:[wf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>V(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${Ue}.pmtiles`,$$slots:{default:[Of]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ue="wards";function Af(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function If(r,e,n){let t=le.wards,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Pf extends J{constructor(e){super(),K(this,e,If,Lf,Y,{})}}function Mf(r){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nf(r){let e,n,t,l;return t=new Q({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),l=!0},p(o,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:o}),t.$set(f)},i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&p(e),w(t)}}}class it extends J{constructor(e){super(),K(this,e,null,Nf,Y,{})}}function Df(r){let e,n,t;return e=new Oe({props:{color:le.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Ef(r){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ff(r){let e,n,t,l,o,s,f,i,a;return o=new Q({props:{href:"https://gtfs.org",$$slots:{default:[Ef]},$$scope:{ctx:r}}}),i=new it({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=A(),t=T("p"),l=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),f=A(),b(i.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),h(t,l),v(o,t,null),h(t,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:u}),o.$set(g)},i(u){a||(_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(f)),w(o),w(i,u)}}}function jf(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Ff]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Rf(r){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bf(r){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hf(r){let e;function n(o,s){return o[2].has_bus_lane?Bf:Rf}let t=n(r),l=t(r);return{c(){l.c(),e=Ie()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function zf(r){let e,n;return e=new fe({props:{$$slots:{default:[Hf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gf(r){let e,n;const t=[H(_t),{sourceLayer:_t},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],le.bus_route_with_lane,le.bus_route_without_lane],"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[zf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?te(t,[s&0&&oe(H(_t)),s&0&&{sourceLayer:_t},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Uf(r){let e,n,t,l,o;function s(i){r[1](i)}let f={id:_t,$$slots:{right:[jf],default:[Df]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>V(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${_t}.pmtiles`,$$slots:{default:[Gf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let _t="bus_routes";function qf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Wf extends J{constructor(e){super(),K(this,e,qf,Uf,Y,{})}}function dr(r){const e=tu(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function hr(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function Vf(r){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xf(r){let e,n,t,l,o,s,f,i;return f=new it({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=A(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=A(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=A(),b(f.$$.fragment)},m(a,u){$(a,e,u),$(a,n,u),$(a,t,u),$(a,l,u),$(a,o,u),$(a,s,u),v(f,a,u),i=!0},p:re,i(a){i||(_(f.$$.fragment,a),i=!0)},o(a){d(f.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(s)),w(f,a)}}}function Yf(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Xf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function br(r){let e,n,t;return n=new tt({props:{$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Qf(r){let e,n,t=r[9]+"",l,o,s;return e=new Oe({props:{color:r[10]}}),{c(){b(e.$$.fragment),n=A(),l=k(t),o=A()},m(f,i){v(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p:re,i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),w(e,f)}}}function vr(r){let e,n,t;function l(s){r[4](s,r[6])}let o={id:r[6],$$slots:{default:[Qf]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new se({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){r=s;const i={};f&8192&&(i.$$scope={dirty:f,ctx:r}),!n&&f&6&&(n=!0,i.checked=r[1][r[6]],X(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Jf(r){let e,n,t=Pe(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=vr(hr(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Ie()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);$(s,e,f),n=!0},p(s,f){if(f&6){t=Pe(s[2]);let i;for(i=0;i<t.length;i+=1){const a=hr(s,t,i);l[i]?(l[i].p(a,f),_(l[i],1)):(l[i]=vr(a),l[i].c(),_(l[i],1),l[i].m(e.parentNode,e))}for(me(),i=t.length;i<l.length;i+=1)o(i);_e()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)_(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)d(l[f]);n=!1},d(s){s&&p(e),Ot(l,s)}}}function Kf(r){dr(r);let e,n=r[6]+"",t,l,o,s,f,i=r[7]+"",a,u,c,g,m=r[8]+"",y;return{c(){e=T("h2"),t=k(n),l=A(),o=T("p"),s=k("Direction: "),f=T("b"),a=A(),u=T("p"),c=k("Width: "),g=T("b"),y=k(m)},m(S,O){$(S,e,O),h(e,t),$(S,l,O),$(S,o,O),h(o,s),h(o,f),f.innerHTML=i,$(S,a,O),$(S,u,O),h(u,c),h(u,g),h(g,y)},p(S,O){dr(S),O&32&&n!==(n=S[6]+"")&&R(t,n),O&32&&i!==(i=S[7]+"")&&(f.innerHTML=i),O&32&&m!==(m=S[8]+"")&&R(y,m)},d(S){S&&(p(e),p(l),p(o),p(a),p(u))}}}function Zf(r){let e,n;return e=new fe({props:{$$slots:{default:[Kf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xf(r){let e,n;const t=[H(gt),{sourceLayer:gt},{paint:{"line-color":Zt(["get","kind"],{track:le.cycle_paths.track,lane:le.cycle_paths.lane,shared_use_segregated:le.cycle_paths.shared_use_segregated,shared_use_unsegregated:le.cycle_paths.shared_use_unsegregated},"red"),"line-width":Re,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:wr(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Zf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),e.$on("click",nu),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&oe(H(gt)),s&0&&{sourceLayer:gt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:wr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function eu(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:gt,$$slots:{right:[Yf],default:[Vf]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&br(r);return o=new ke({props:{url:`pmtiles://${we()}/v1/${gt}.pmtiles`,$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),a&&a.c(),l=A(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=br(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&8195&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let gt="cycle_paths";function tu(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function nu(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function wr(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function ru(r,e,n){let t=[["track","Separated tracks",le.cycle_paths.track],["lane","Unprotected lanes",le.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",le.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",le.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){l=i,n(0,l)}function f(i,a){r.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[l,o,t,s,f]}class lu extends J{constructor(e){super(),K(this,e,ru,eu,Y,{})}}function ou(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function su(r){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[su]},$$scope:{ctx:r}}}),s=new Me({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),l=k(", as of September 2021."),o=A(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function au(r){let e,n,t;return n=new ge({props:{$$slots:{default:[iu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function fu(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&R(t,n)},d(l){l&&p(e)}}}function uu(r){let e,n;return e=new fe({props:{$$slots:{default:[fu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cu(r){let e,n;const t=[H(dt),{sourceLayer:dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[uu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&oe(H(dt)),s&0&&{sourceLayer:dt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function $u(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:dt,$$slots:{right:[au],default:[ou]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>V(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${dt}.pmtiles`,$$slots:{default:[cu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let dt="mrn";function pu(r,e,n){let t=le.mrn,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class mu extends J{constructor(e){super(),K(this,e,pu,$u,Y,{})}}function _u(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function gu(r){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function du(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[gu]},$$scope:{ctx:r}}}),s=new Me({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),l=k(", downloaded on 22/01/2024."),o=A(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function hu(r){let e,n,t;return n=new ge({props:{$$slots:{default:[du]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function kr(r){let e,n,t,l=r[3].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Desc_+"")&&R(o,l)},d(s){s&&p(e)}}}function yr(r){let e,n,t,l=r[3].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Greenway+"")&&R(o,l)},d(s){s&&p(e)}}}function Sr(r){let e,n,t,l=r[3].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteType+"")&&R(o,l)},d(s){s&&p(e)}}}function Cr(r){let e,n,t,l=r[3].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteNo+"")&&R(o,l)},d(s){s&&p(e)}}}function Tr(r){let e,n,t,l=r[3].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteCat+"")&&R(o,l)},d(s){s&&p(e)}}}function Or(r){let e,n,t,l=r[3].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].OpenStatus+"")&&R(o,l)},d(s){s&&p(e)}}}function Lr(r){let e,n,t,l=r[3].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Surface+"")&&R(o,l)},d(s){s&&p(e)}}}function Ar(r){let e,n,t,l=r[3].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Quality+"")&&R(o,l)},d(s){s&&p(e)}}}function Ir(r){let e,n,t,l=r[3].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RoadClass+"")&&R(o,l)},d(s){s&&p(e)}}}function bu(r){let e,n,t,l,o,s,f,i,a,u=r[3].Desc_&&kr(r),c=r[3].Greenway&&yr(r),g=r[3].RouteType&&Sr(r),m=r[3].RouteNo&&Cr(r),y=r[3].RouteCat&&Tr(r),S=r[3].OpenStatus&&Or(r),O=r[3].Surface&&Lr(r),C=r[3].Quality&&Ar(r),D=r[3].RoadClass&&Ir(r);return{c(){e=T("ul"),u&&u.c(),n=A(),c&&c.c(),t=A(),g&&g.c(),l=A(),m&&m.c(),o=A(),y&&y.c(),s=A(),S&&S.c(),f=A(),O&&O.c(),i=A(),C&&C.c(),a=A(),D&&D.c()},m(F,E){$(F,e,E),u&&u.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),g&&g.m(e,null),h(e,l),m&&m.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),S&&S.m(e,null),h(e,f),O&&O.m(e,null),h(e,i),C&&C.m(e,null),h(e,a),D&&D.m(e,null)},p(F,E){F[3].Desc_?u?u.p(F,E):(u=kr(F),u.c(),u.m(e,n)):u&&(u.d(1),u=null),F[3].Greenway?c?c.p(F,E):(c=yr(F),c.c(),c.m(e,t)):c&&(c.d(1),c=null),F[3].RouteType?g?g.p(F,E):(g=Sr(F),g.c(),g.m(e,l)):g&&(g.d(1),g=null),F[3].RouteNo?m?m.p(F,E):(m=Cr(F),m.c(),m.m(e,o)):m&&(m.d(1),m=null),F[3].RouteCat?y?y.p(F,E):(y=Tr(F),y.c(),y.m(e,s)):y&&(y.d(1),y=null),F[3].OpenStatus?S?S.p(F,E):(S=Or(F),S.c(),S.m(e,f)):S&&(S.d(1),S=null),F[3].Surface?O?O.p(F,E):(O=Lr(F),O.c(),O.m(e,i)):O&&(O.d(1),O=null),F[3].Quality?C?C.p(F,E):(C=Ar(F),C.c(),C.m(e,a)):C&&(C.d(1),C=null),F[3].RoadClass?D?D.p(F,E):(D=Ir(F),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(F){F&&p(e),u&&u.d(),c&&c.d(),g&&g.d(),m&&m.d(),y&&y.d(),S&&S.d(),O&&O.d(),C&&C.d(),D&&D.d()}}}function vu(r){let e,n;return e=new fe({props:{$$slots:{default:[bu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function wu(r){let e,n;const t=[H(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[vu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&oe(H(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ku(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:ht,$$slots:{right:[hu],default:[_u]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>V(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${ht}.pmtiles`,$$slots:{default:[wu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let ht="national_cycle_network";function yu(r,e,n){let t=le.national_cycle_network,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Su extends J{constructor(e){super(),K(this,e,yu,ku,Y,{})}}function Cu(r){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tu(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ou(r){let e,n,t,l,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=A(),t=T("p"),t.textContent="Data valid as of 1 January, 2024",l=A(),o=T("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),h(o,s),v(f,o,null),h(o,i),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),f.$set(g)},i(u){a||(_(f.$$.fragment,u),a=!0)},o(u){d(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),w(f)}}}function Lu(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Ou]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Pr(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Au(r){let e,n,t,l=r[4].side+"",o,s,f,i,a,u=r[4].average+"",c,g,m,y,S,O,C=r[4].minimum+"",D,F;return{c(){e=T("p"),n=k("Side of the road: "),t=T("b"),o=k(l),s=A(),f=T("p"),i=k("Average width: "),a=T("b"),c=k(u),g=k(`
        meters`),m=A(),y=T("p"),S=k("Minimum width: "),O=T("b"),D=k(C),F=k(`
        meters`)},m(E,P){$(E,e,P),h(e,n),h(e,t),h(t,o),$(E,s,P),$(E,f,P),h(f,i),h(f,a),h(a,c),h(f,g),$(E,m,P),$(E,y,P),h(y,S),h(y,O),h(O,D),h(y,F)},p(E,P){P&16&&l!==(l=E[4].side+"")&&R(o,l),P&16&&u!==(u=E[4].average+"")&&R(c,u),P&16&&C!==(C=E[4].minimum+"")&&R(D,C)},d(E){E&&(p(e),p(s),p(f),p(m),p(y))}}}function Iu(r){let e,n;return e=new fe({props:{$$slots:{default:[Au,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Pu(r){let e,n;const t=[H(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get","average"],r[2],r[1]),"line-width":Re,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Iu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&oe(H(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&6&&{paint:{"line-color":ye(["get","average"],o[2],o[1]),"line-width":Re,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Mu(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:bt,$$slots:{right:[Lu],default:[Cu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&Pr(r);return o=new ke({props:{url:`pmtiles://${nn()}/v1/${bt}.pmtiles`,$$slots:{default:[Pu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),a&&a.c(),l=A(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Pr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let bt="pavement_widths";function Nu(r,e,n){let t=le.sequential_low_to_high,l=[0,2,4,6,8,13],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class Du extends J{constructor(e){super(),K(this,e,Nu,Mu,Y,{})}}function Eu(r){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fu(r){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ju(r){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ru(r){let e,n,t,l,o,s,f,i,a,u,c;return f=new Q({props:{href:"https://www.pct.bike",$$slots:{default:[Fu]},$$scope:{ctx:r}}}),a=new Q({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[ju]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=A(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=A(),o=T("p"),s=k("See "),b(f.$$.fragment),i=k(" and "),b(a.$$.fragment),u=k(" for details on methodology and data sources.")},m(g,m){$(g,e,m),$(g,n,m),$(g,t,m),$(g,l,m),$(g,o,m),h(o,s),v(f,o,null),h(o,i),v(a,o,null),h(o,u),c=!0},p(g,m){const y={};m&1024&&(y.$$scope={dirty:m,ctx:g}),f.$set(y);const S={};m&1024&&(S.$$scope={dirty:m,ctx:g}),a.$set(S)},i(g){c||(_(f.$$.fragment,g),_(a.$$.fragment,g),c=!0)},o(g){d(f.$$.fragment,g),d(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(l),p(o)),w(f),w(a)}}}function Bu(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Ru]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Mr(r){let e,n,t,l,o,s,f,i;e=new Qe({props:{colorScale:r[3],limits:r[4]}});function a(m){r[7](m)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(u.value=r[0]),t=new il({props:u}),W.push(()=>V(t,"value",a));function c(m){r[8](m)}let g={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(g.value=r[1]),s=new Tt({props:g}),W.push(()=>V(s,"value",c)),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment),o=A(),b(s.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,o,y),v(s,m,y),i=!0},p(m,y){const S={};!l&&y&1&&(l=!0,S.value=m[0],X(()=>l=!1)),t.$set(S);const O={};!f&&y&2&&(f=!0,O.value=m[1],X(()=>f=!1)),s.$set(O)},i(m){i||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(s.$$.fragment,m),i=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(s.$$.fragment,m),i=!1},d(m){m&&(p(n),p(o)),w(e,m),w(t,m),w(s,m)}}}function Hu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Nt(!1),t=Ie(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function zu(r){let e,n;return e=new fe({props:{$$slots:{default:[Hu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gu(r){let e,n;const t=[H(qe),{sourceLayer:qe},{paint:{"line-color":ye(["get",r[1]],r[4],r[3]),"line-width":Re,"line-opacity":x(1,.5)}},{layout:{visibility:r[2]&&r[0]==qe?"visible":"none"}}];let l={$$slots:{default:[zu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&31?te(t,[s&0&&oe(H(qe)),s&0&&{sourceLayer:qe},s&26&&{paint:{"line-color":ye(["get",o[1]],o[4],o[3]),"line-width":Re,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==qe?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Uu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Nt(!1),t=Ie(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function qu(r){let e,n;return e=new fe({props:{$$slots:{default:[Uu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Wu(r){let e,n;const t=[H(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get",r[1]],r[4],r[3]),"line-width":Re,"line-opacity":x(1,.5)}},{layout:{visibility:r[2]&&r[0]==at?"visible":"none"}}];let l={$$slots:{default:[qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&31?te(t,[s&0&&oe(H(at)),s&0&&{sourceLayer:at},t[2],t[3],s&26&&{paint:{"line-color":ye(["get",o[1]],o[4],o[3]),"line-width":Re,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==at?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Vu(r){let e,n,t,l,o,s,f,i;function a(g){r[6](g)}let u={id:qe,$$slots:{right:[Bu],default:[Eu]},$$scope:{ctx:r}};r[2]!==void 0&&(u.checked=r[2]),e=new se({props:u}),W.push(()=>V(e,"checked",a));let c=r[2]&&Mr(r);return o=new ke({props:{url:`pmtiles://${we()}/v1/${qe}.pmtiles`,$$slots:{default:[Gu]},$$scope:{ctx:r}}}),f=new ke({props:{url:`pmtiles://${we()}/v1/${at}.pmtiles`,$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),c&&c.c(),l=A(),b(o.$$.fragment),s=A(),b(f.$$.fragment)},m(g,m){v(e,g,m),$(g,t,m),c&&c.m(g,m),$(g,l,m),v(o,g,m),$(g,s,m),v(f,g,m),i=!0},p(g,[m]){const y={};m&1024&&(y.$$scope={dirty:m,ctx:g}),!n&&m&4&&(n=!0,y.checked=g[2],X(()=>n=!1)),e.$set(y),g[2]?c?(c.p(g,m),m&4&&_(c,1)):(c=Mr(g),c.c(),_(c,1),c.m(l.parentNode,l)):c&&(me(),d(c,1,1,()=>{c=null}),_e());const S={};m&1031&&(S.$$scope={dirty:m,ctx:g}),o.$set(S);const O={};m&1031&&(O.$$scope={dirty:m,ctx:g}),f.$set(O)},i(g){i||(_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(f.$$.fragment,g),i=!0)},o(g){d(e.$$.fragment,g),d(c),d(o.$$.fragment,g),d(f.$$.fragment,g),i=!1},d(g){g&&(p(t),p(l),p(s)),w(e,g),c&&c.d(g),w(o,g),w(f,g)}}}let qe="pct_commute",at="pct_school";function Xu(r,e,n){let t=le.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=qe,s="baseline",f=!1;function i(g){let m=g.baseline,y=g.gov_target,S=g.go_dutch,O=`<h2>Trip purpose: ${o==qe?"commuting":"school"}</h2>`;if(O+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)O+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,O+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let C=(y/m).toFixed(1),D=(S/m).toFixed(1);O+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${C}x</b> of baseline)</p>`,O+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return O}function a(g){f=g,n(2,f)}function u(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,f,t,l,i,a,u,c]}class Yu extends J{constructor(e){super(),K(this,e,Xu,Vu,Y,{})}}function Qu(r){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ju(r){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ku(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zu(r){let e,n,t,l,o,s,f,i,a,u,c,g;return t=new Q({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Ju]},$$scope:{ctx:r}}}),u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ku]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),l=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=A(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",f=A(),i=T("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),c=k(".")},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,l),$(m,o,y),$(m,s,y),$(m,f,y),$(m,i,y),h(i,a),v(u,i,null),h(i,c),g=!0},p(m,y){const S={};y&256&&(S.$$scope={dirty:y,ctx:m}),t.$set(S);const O={};y&256&&(O.$$scope={dirty:y,ctx:m}),u.$set(O)},i(m){g||(_(t.$$.fragment,m),_(u.$$.fragment,m),g=!0)},o(m){d(t.$$.fragment,m),d(u.$$.fragment,m),g=!1},d(m){m&&(p(e),p(o),p(s),p(f),p(i)),w(t),w(u)}}}function xu(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Zu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Nr(r){let e,n,t,l,o;e=new Qe({props:{colorScale:r[2],limits:r[3]}});function s(i){r[6](i)}let f={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(f.value=r[0]),t=new il({props:f}),W.push(()=>V(t,"value",s)),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const u={};!l&&a&1&&(l=!0,u.value=i[0],X(()=>l=!1)),t.$set(u)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function ec(r){let e,n,t=r[7].indicative_mph+"",l,o,s,f,i,a=r[7].highest_mph+"",u,c,g=r[4][r[7].highest_description]+"",m,y;return{c(){e=T("p"),n=k("Posted speed limit: "),l=k(t),o=k(" mph"),s=A(),f=T("p"),i=k("Highest average speed: "),u=k(a),c=k(" mph (during "),m=k(g),y=k(")")},m(S,O){$(S,e,O),h(e,n),h(e,l),h(e,o),$(S,s,O),$(S,f,O),h(f,i),h(f,u),h(f,c),h(f,m),h(f,y)},p(S,O){O&128&&t!==(t=S[7].indicative_mph+"")&&R(l,t),O&128&&a!==(a=S[7].highest_mph+"")&&R(u,a),O&128&&g!==(g=S[4][S[7].highest_description]+"")&&R(m,g)},d(S){S&&(p(e),p(s),p(f))}}}function tc(r){let e,n;return e=new fe({props:{$$slots:{default:[ec,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function nc(r){let e,n;const t=[H(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get",r[0]],r[3],r[2]),"line-width":Re,"line-opacity":x(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[tc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&15?te(t,[s&0&&oe(H(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&13&&{paint:{"line-color":ye(["get",o[0]],o[3],o[2]),"line-width":Re,"line-opacity":x(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function rc(r){let e,n,t,l,o,s;function f(u){r[5](u)}let i={id:vt,$$slots:{right:[xu],default:[Qu]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new se({props:i}),W.push(()=>V(e,"checked",f));let a=r[1]&&Nr(r);return o=new ke({props:{url:`pmtiles://${nn()}/v1/${vt}.pmtiles`,$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),a&&a.c(),l=A(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,g.checked=u[1],X(()=>n=!1)),e.$set(g),u[1]?a?(a.p(u,c),c&2&&_(a,1)):(a=Nr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&259&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let vt="road_speeds";function lc(r,e,n){let t=le.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",s=!1,f={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(u){s=u,n(1,s)}function a(u){o=u,n(0,o)}return[o,s,t,l,f,i,a]}class oc extends J{constructor(e){super(),K(this,e,lc,rc,Y,{})}}function sc(r){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ic(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ac(r){let e,n,t,l,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ic]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=A(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",l=A(),o=T("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),h(o,s),v(f,o,null),h(o,i),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),f.$set(g)},i(u){a||(_(f.$$.fragment,u),a=!0)},o(u){d(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),w(f)}}}function fc(r){let e,n,t;return n=new ge({props:{$$slots:{default:[ac]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Dr(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function uc(r){let e,n,t,l=r[4].average+"",o,s,f,i,a,u,c=r[4].minimum+"",g,m;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(l),s=k(`
        meters`),f=A(),i=T("p"),a=k("Minimum width: "),u=T("b"),g=k(c),m=k(`
        meters`)},m(y,S){$(y,e,S),h(e,n),h(e,t),h(t,o),h(e,s),$(y,f,S),$(y,i,S),h(i,a),h(i,u),h(u,g),h(i,m)},p(y,S){S&16&&l!==(l=y[4].average+"")&&R(o,l),S&16&&c!==(c=y[4].minimum+"")&&R(g,c)},d(y){y&&(p(e),p(f),p(i))}}}function cc(r){let e,n;return e=new fe({props:{$$slots:{default:[uc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $c(r){let e,n;const t=[H(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get","average"],r[2],r[1]),"line-width":Re,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[cc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&oe(H(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&6&&{paint:{"line-color":ye(["get","average"],o[2],o[1]),"line-width":Re,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function pc(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:wt,$$slots:{right:[fc],default:[sc]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&Dr(r);return o=new ke({props:{url:`pmtiles://${nn()}/v1/${wt}.pmtiles`,$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),a&&a.c(),l=A(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Dr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let wt="road_widths";function mc(r,e,n){let t=le.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class _c extends J{constructor(e){super(),K(this,e,mc,pc,Y,{})}}function gc(r){let e,n,t;return{c(){e=T("input"),U(e,"class","govuk-file-upload"),U(e,"id","load-criticals"),U(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=st(e,"change",r[5]),n=!0)},p:re,d(l){l&&p(e),r[7](null),n=!1,t()}}}function Er(r){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[hc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function dc(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new Oe({props:{color:Mt}}),{c(){b(e.$$.fragment),n=k(`
        Show `),l=k(t),o=k(" issues")},m(f,i){v(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p(f,i){(!s||i&4)&&t!==(t=f[2].toLocaleString()+"")&&R(l,t)},i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),w(e,f)}}}function hc(r){let e,n,t;function l(s){r[8](s)}let o={id:"show-criticals",$$slots:{default:[dc]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&2052&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function bc(r){let e,n,t,l,o,s;e=new cn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[gc]},$$scope:{ctx:r}}}),t=new al({props:{errorMessage:r[3]}});let f=r[2]>0&&Er(r);return{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment),l=A(),f&&f.c(),o=Ie()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),f&&f.m(i,a),$(i,o,a),s=!0},p(i,a){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?f?(f.p(i,a),a&4&&_(f,1)):(f=Er(i),f.c(),_(f,1),f.m(o.parentNode,o)):f&&(me(),d(f,1,1,()=>{f=null}),_e())},i(i){s||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(f),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(f),s=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),f&&f.d(i)}}}function vc(r){let e,n,t=r[10].critical_type+"",l,o,s,f,i,a=r[10].location_description+"",u,c,g,m,y,S=r[10].notes+"",O,C,D,F,E,P,I,M=r[10].id+"",L,N,G,B,j,z=(r[10].inspector??"???")+"",q,Z,ie,Te=r[10].submission_time+"",ae,ve,de,Ne,ce,$e=r[10].scheme_reference+"",ue,nt,Je,Be=r[10].current_design_stage+"",Ke;return{c(){e=T("div"),n=T("h2"),l=k(t),o=A(),s=T("p"),f=T("u"),f.textContent="Location",i=k(`
          : `),u=k(a),c=A(),g=T("p"),m=T("u"),m.textContent="Notes",y=k(`
          : `),O=k(S),C=A(),D=T("hr"),F=A(),E=T("p"),P=k("Critical issue ID: "),I=T("b"),L=k(M),N=A(),G=T("p"),B=k("Submitted by "),j=T("b"),q=k(z),Z=k(`
          at
          `),ie=T("b"),ae=k(Te),ve=A(),de=T("p"),Ne=k("For scheme "),ce=T("b"),ue=k($e),nt=k(`
          in stage
          `),Je=T("b"),Ke=k(Be),Ce(e,"max-width","30vw")},m(ne,he){$(ne,e,he),h(e,n),h(n,l),h(e,o),h(e,s),h(s,f),h(s,i),h(s,u),h(e,c),h(e,g),h(g,m),h(g,y),h(g,O),h(e,C),h(e,D),h(e,F),h(e,E),h(E,P),h(E,I),h(I,L),h(e,N),h(e,G),h(G,B),h(G,j),h(j,q),h(G,Z),h(G,ie),h(ie,ae),h(e,ve),h(e,de),h(de,Ne),h(de,ce),h(ce,ue),h(de,nt),h(de,Je),h(Je,Ke)},p(ne,he){he&1024&&t!==(t=ne[10].critical_type+"")&&R(l,t),he&1024&&a!==(a=ne[10].location_description+"")&&R(u,a),he&1024&&S!==(S=ne[10].notes+"")&&R(O,S),he&1024&&M!==(M=ne[10].id+"")&&R(L,M),he&1024&&z!==(z=(ne[10].inspector??"???")+"")&&R(q,z),he&1024&&Te!==(Te=ne[10].submission_time+"")&&R(ae,Te),he&1024&&$e!==($e=ne[10].scheme_reference+"")&&R(ue,$e),he&1024&&Be!==(Be=ne[10].current_design_stage+"")&&R(Ke,Be)},d(ne){ne&&p(e)}}}function wc(r){let e,n;return e=new fe({props:{$$slots:{default:[vc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function kc(r){let e,n,t,l,o,s;const f=[H(`${lt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Mt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let m=0;m<f.length;m+=1)i=ee(i,f[m]);e=new et({props:i}),e.$on("click",r[6]);const a=[H(`${lt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let u={};for(let m=0;m<a.length;m+=1)u=ee(u,a[m]);t=new so({props:u});const c=[H(`${lt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Mt,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let g={$$slots:{default:[wc]},$$scope:{ctx:r}};for(let m=0;m<c.length;m+=1)g=ee(g,c[m]);return o=new et({props:g}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment),l=A(),b(o.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,l,y),v(o,m,y),s=!0},p(m,y){const S=y&2?te(f,[y&0&&oe(H(`${lt}-clusters`)),f[1],y&0&&{paint:{"circle-color":Mt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:m[1]?"visible":"none"}},f[4]]):{};e.$set(S);const O=y&2?te(a,[y&0&&oe(H(`${lt}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:m[1]?"visible":"none"}}]):{};t.$set(O);const C=y&2?te(c,[y&0&&oe(H(`${lt}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":Mt,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:m[1]?"visible":"none"}}]):{};y&2048&&(C.$$scope={dirty:y,ctx:m}),o.$set(C)},i(m){s||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(o.$$.fragment,m),s=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),s=!1},d(m){m&&(p(n),p(l)),w(e,m),w(t,m),w(o,m)}}}function yc(r){let e,n,t,l;return e=new Fe({props:{label:"Critical Issues",$$slots:{default:[bc]},$$scope:{ctx:r}}}),t=new It({props:{id:lt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[kc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&2063&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let lt="criticals",Mt="red";function Sc(r,e,n){let t;be(r,vn,m=>n(9,t=m));let l,o=!0,s=0,f="",i=Pl();async function a(m){try{n(4,i=await $i(l.files[0])),n(2,s=i.features.length),n(3,f="")}catch(y){n(3,f=`The file you loaded is broken: ${y}`)}}function u(m){t.getSource(lt).getClusterExpansionZoom(m.detail.features[0].properties.cluster_id,(y,S)=>{y||t.easeTo({center:m.detail.features[0].geometry.coordinates,zoom:S})})}function c(m){W[m?"unshift":"push"](()=>{l=m,n(0,l)})}function g(m){o=m,n(1,o)}return[l,o,s,f,i,a,u,c,g]}class Cc extends J{constructor(e){super(),K(this,e,Sc,yc,Y,{})}}function Tc(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Crossings`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Oc(r){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lc(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Oc]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=A(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Ac(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Ic(r){let e,n=Fr(r[3])+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=Fr(l[3])+"")&&R(t,n)},d(l){l&&p(e)}}}function Pc(r){let e,n;return e=new fe({props:{$$slots:{default:[Ic,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Mc(r){let e,n;const t=[H(kt),{sourceLayer:kt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Pc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new et({props:l}),e.$on("click",Dc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&oe(H(kt)),s&0&&{sourceLayer:kt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Nc(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:kt,$$slots:{right:[Ac],default:[Tc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>V(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${kt}.pmtiles`,$$slots:{default:[Mc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let kt="crossings";function Fr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Dc(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Ec(r,e,n){let t=le.crossings,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Fc extends J{constructor(e){super(),K(this,e,Ec,Nc,Y,{})}}function jc(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Cycle parking`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Rc(r){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bc(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Rc]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=T("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),l=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=A(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Hc(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Bc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function zc(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=(s[3].capacity??"unknown")+"")&&R(o,l)},d(s){s&&p(e)}}}function Gc(r){let e,n;return e=new fe({props:{$$slots:{default:[zc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Uc(r){let e,n;const t=[H(yt),{sourceLayer:yt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Gc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new et({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&oe(H(yt)),s&0&&{sourceLayer:yt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function qc(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:yt,$$slots:{right:[Hc],default:[jc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>V(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${yt}.pmtiles`,$$slots:{default:[Uc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let yt="cycle_parking";function Wc(r,e,n){let t=le.cycle_parking,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Vc extends J{constructor(e){super(),K(this,e,Wc,qc,Y,{})}}function Xc(r){let e,n,t,l;return e=new Oe({props:{color:r[4]}}),{c(){b(e.$$.fragment),n=A(),t=k(r[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),l=!0},p(o,s){(!l||s&4)&&R(t,o[2])},i(o){l||(_(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function Yc(r){let e;const n=r[5].default,t=Ht(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&zt(t,n,l,l[7],e?Ut(n,l[7],o,null):Gt(l[7]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Qc(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Yc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Jc(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&R(t,n)},d(l){l&&p(e)}}}function Kc(r){let e,n;return e=new fe({props:{$$slots:{default:[Jc,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Zc(r){let e,n;const t=[H(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":x(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Kc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&25?te(t,[s&1&&oe(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":x(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function xc(r){let e,n,t,l,o;function s(i){r[6](i)}let f={id:r[0],$$slots:{right:[Qc],default:[Xc]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.checked=r[3]),e=new se({props:f}),W.push(()=>V(e,"checked",s)),l=new ke({props:{url:`pmtiles://${we()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Zc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&1&&(u.id=i[0]),a&132&&(u.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,u.checked=i[3],X(()=>n=!1)),e.$set(u);const c={};a&1&&(c.url=`pmtiles://${we()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function e$(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:f}=e,i=le[o],a=!1;function u(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,f=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,s,f,a,i,t,u,l]}class yn extends J{constructor(e){super(),K(this,e,e$,xc,Y,{name:0,singularNoun:1,pluralNoun:2})}}function t$(r){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function n$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[t$]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=A(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function r$(r){let e,n;return e=new yn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[n$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class l$ extends J{constructor(e){super(),K(this,e,null,r$,Y,{})}}function o$(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Railway Stations`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function s$(r){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function i$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[s$]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=A(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function a$(r){let e,n,t;return n=new ge({props:{$$slots:{default:[i$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function f$(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&R(t,n)},d(l){l&&p(e)}}}function u$(r){let e,n;return e=new fe({props:{$$slots:{default:[f$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function c$(r){let e,n;const t=[H(tn),{paint:{"circle-color":r[1],"circle-radius":xt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[u$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new et({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&oe(H(tn)),s&2&&{paint:{"circle-color":o[1],"circle-radius":xt/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function $$(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:tn,$$slots:{right:[a$],default:[o$]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),W.push(()=>V(e,"checked",s)),l=new It({props:{data:`${we()}/v1/${tn}.geojson`,$$slots:{default:[c$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let tn="railway_stations";function p$(r,e,n){let t=le.railway_stations,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class m$ extends J{constructor(e){super(),K(this,e,p$,$$,Y,{})}}function _$(r){let e;return{c(){e=k("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function g$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[_$]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=A(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function d$(r){let e,n;return e=new yn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[g$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class h$ extends J{constructor(e){super(),K(this,e,null,d$,Y,{})}}function b$(r){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function v$(r){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function w$(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[b$]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[v$]},$$scope:{ctx:r}}}),i=new it({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),f=A(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const m={};c&1&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function k$(r){let e,n;return e=new yn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[w$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class y$ extends J{constructor(e){super(),K(this,e,null,k$,Y,{})}}function S$(r){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function C$(r){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function T$(r){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function O$(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S,O,C,D,F,E,P,I,M;return t=new Q({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[C$]},$$scope:{ctx:r}}}),C=new Q({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[T$]},$$scope:{ctx:r}}}),I=new Me({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),l=k(" dataset. Please note these limitations:"),o=A(),s=T("ul"),f=T("li"),f.textContent="Only collisions between 2017 and 2022 are included",i=A(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,u=A(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=A(),m=T("li"),m.textContent='The "pedestrians" category also include mobility scooters',y=A(),S=T("li"),O=k("All limitations "),b(C.$$.fragment),D=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),F=A(),E=T("p"),E.textContent="You can click a point to open the full report, thanks to CycleStreets.",P=A(),b(I.$$.fragment)},m(L,N){$(L,e,N),h(e,n),v(t,e,null),h(e,l),$(L,o,N),$(L,s,N),h(s,f),h(s,i),h(s,a),h(s,u),h(s,c),h(s,g),h(s,m),h(s,y),h(s,S),h(S,O),v(C,S,null),h(S,D),$(L,F,N),$(L,E,N),$(L,P,N),v(I,L,N),M=!0},p(L,N){const G={};N&16777216&&(G.$$scope={dirty:N,ctx:L}),t.$set(G);const B={};N&16777216&&(B.$$scope={dirty:N,ctx:L}),C.$set(B)},i(L){M||(_(t.$$.fragment,L),_(C.$$.fragment,L),_(I.$$.fragment,L),M=!0)},o(L){d(t.$$.fragment,L),d(C.$$.fragment,L),d(I.$$.fragment,L),M=!1},d(L){L&&(p(e),p(o),p(s),p(F),p(E),p(P)),w(t),w(C),w(I,L)}}}function L$(r){let e,n,t;return n=new ge({props:{$$slots:{default:[O$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function jr(r){let e,n,t,l,o,s,f,i,a,u,c,g,m;return n=new tt({props:{small:!0,$$slots:{default:[N$]},$$scope:{ctx:r}}}),u=new fl({props:{rows:r[14]}}),{c(){e=T("div"),b(n.$$.fragment),t=A(),l=T("div"),o=k(`Filter years:
      `),s=T("input"),f=k(`
      -
      `),i=T("input"),a=A(),b(u.$$.fragment),U(s,"type","number"),U(s,"min",2017),U(s,"max",2022),U(s,"class","svelte-1ft65rw"),U(i,"type","number"),U(i,"min",2017),U(i,"max",2022),U(i,"class","svelte-1ft65rw"),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(y,S){$(y,e,S),v(n,e,null),h(e,t),h(e,l),h(l,o),h(l,s),Ve(s,r[4]),h(l,f),h(l,i),Ve(i,r[5]),h(e,a),v(u,e,null),c=!0,g||(m=[st(s,"input",r[20]),st(i,"input",r[21])],g=!0)},p(y,S){const O={};S&16777231&&(O.$$scope={dirty:S,ctx:y}),n.$set(O),S&16&&Ft(s.value)!==y[4]&&Ve(s,y[4]),S&32&&Ft(i.value)!==y[5]&&Ve(i,y[5])},i(y){c||(_(n.$$.fragment,y),_(u.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(u.$$.fragment,y),c=!1},d(y){y&&p(e),w(n),w(u),g=!1,sl(m)}}}function A$(r){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function I$(r){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function P$(r){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function M$(r){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function N$(r){let e,n,t,l,o,s,f,i,a,u,c,g;function m(P){r[16](P)}let y={id:"stats19-pedestrians",$$slots:{default:[A$]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new se({props:y}),W.push(()=>V(e,"checked",m));function S(P){r[17](P)}let O={id:"stats19-cyclists",$$slots:{default:[I$]},$$scope:{ctx:r}};r[1]!==void 0&&(O.checked=r[1]),l=new se({props:O}),W.push(()=>V(l,"checked",S));function C(P){r[18](P)}let D={id:"stats19-horse-riders",$$slots:{default:[P$]},$$scope:{ctx:r}};r[2]!==void 0&&(D.checked=r[2]),f=new se({props:D}),W.push(()=>V(f,"checked",C));function F(P){r[19](P)}let E={id:"stats19-other",$$slots:{default:[M$]},$$scope:{ctx:r}};return r[3]!==void 0&&(E.checked=r[3]),u=new se({props:E}),W.push(()=>V(u,"checked",F)),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment),s=A(),b(f.$$.fragment),a=A(),b(u.$$.fragment)},m(P,I){v(e,P,I),$(P,t,I),v(l,P,I),$(P,s,I),v(f,P,I),$(P,a,I),v(u,P,I),g=!0},p(P,I){const M={};I&16777216&&(M.$$scope={dirty:I,ctx:P}),!n&&I&1&&(n=!0,M.checked=P[0],X(()=>n=!1)),e.$set(M);const L={};I&16777216&&(L.$$scope={dirty:I,ctx:P}),!o&&I&2&&(o=!0,L.checked=P[1],X(()=>o=!1)),l.$set(L);const N={};I&16777216&&(N.$$scope={dirty:I,ctx:P}),!i&&I&4&&(i=!0,N.checked=P[2],X(()=>i=!1)),f.$set(N);const G={};I&16777216&&(G.$$scope={dirty:I,ctx:P}),!c&&I&8&&(c=!0,G.checked=P[3],X(()=>c=!1)),u.$set(G)},i(P){g||(_(e.$$.fragment,P),_(l.$$.fragment,P),_(f.$$.fragment,P),_(u.$$.fragment,P),g=!0)},o(P){d(e.$$.fragment,P),d(l.$$.fragment,P),d(f.$$.fragment,P),d(u.$$.fragment,P),g=!1},d(P){P&&(p(t),p(s),p(a)),w(e,P),w(l,P),w(f,P),w(u,P)}}}function Rr(r){let e,n,t,l=r[8][r[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8388608&&l!==(l=s[8][s[23].pedestrian_location]+"")&&R(o,l)},d(s){s&&p(e)}}}function Br(r){let e,n,t,l=r[9][r[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8388608&&l!==(l=s[9][s[23].pedestrian_movement]+"")&&R(o,l)},d(s){s&&p(e)}}}function D$(r){let e,n,t,l=r[23].year+"",o,s,f,i,a,u=r[10][r[23].severity]+"",c,g,m,y,S,O=Hr(r[23])+"",C,D,F,E,P,I=r[23].pedestrian_location&&Rr(r),M=r[23].pedestrian_movement&&Br(r);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(l),s=A(),f=T("p"),i=k("Severity: "),a=T("b"),c=k(u),g=A(),m=T("p"),y=k("Casualties: "),S=T("b"),C=k(O),D=A(),I&&I.c(),F=A(),M&&M.c(),E=A(),P=T("p"),P.textContent="Click to open full report in CycleStreets"},m(L,N){$(L,e,N),h(e,n),h(e,t),h(t,o),$(L,s,N),$(L,f,N),h(f,i),h(f,a),h(a,c),$(L,g,N),$(L,m,N),h(m,y),h(m,S),h(S,C),$(L,D,N),I&&I.m(L,N),$(L,F,N),M&&M.m(L,N),$(L,E,N),$(L,P,N)},p(L,N){N&8388608&&l!==(l=L[23].year+"")&&R(o,l),N&8388608&&u!==(u=L[10][L[23].severity]+"")&&R(c,u),N&8388608&&O!==(O=Hr(L[23])+"")&&R(C,O),L[23].pedestrian_location?I?I.p(L,N):(I=Rr(L),I.c(),I.m(F.parentNode,F)):I&&(I.d(1),I=null),L[23].pedestrian_movement?M?M.p(L,N):(M=Br(L),M.c(),M.m(E.parentNode,E)):M&&(M.d(1),M=null)},d(L){L&&(p(e),p(s),p(f),p(g),p(m),p(D),p(F),p(E),p(P)),I&&I.d(L),M&&M.d(L)}}}function E$(r){let e,n;return e=new fe({props:{$$slots:{default:[D$,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&25165824&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function F$(r){let e,n;const t=[H(St),{sourceLayer:St},{paint:{"circle-color":ye(["get","severity"],[1,2,3],[r[11],r[12],r[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[7]},{layout:{visibility:r[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[E$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new et({props:l}),e.$on("click",R$),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&14528?te(t,[s&0&&oe(H(St)),s&0&&{sourceLayer:St},s&14336&&{paint:{"circle-color":ye(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function j$(r){let e,n,t,l,o,s;function f(u){r[15](u)}let i={id:St,$$slots:{right:[L$],default:[S$]},$$scope:{ctx:r}};r[6]!==void 0&&(i.checked=r[6]),e=new se({props:i}),W.push(()=>V(e,"checked",f));let a=r[6]&&jr(r);return o=new ke({props:{url:`pmtiles://${we()}/v1/${St}.pmtiles`,$$slots:{default:[F$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),a&&a.c(),l=A(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:u}),!n&&c&64&&(n=!0,g.checked=u[6],X(()=>n=!1)),e.$set(g),u[6]?a?(a.p(u,c),c&64&&_(a,1)):(a=jr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&16777408&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let St="stats19";function Hr(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function R$(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function B$(r,e,n){let t,l=!1,o=!0,s=!0,f=!0,i=!1,a=2017,u=2022;function c(G,B,j,z,q,Z){let ie=["any"];return o&&ie.push(["get","pedestrian"]),s&&ie.push(["get","cyclist"]),f&&ie.push(["get","horse_rider"]),i&&ie.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],u],ie]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},m={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},S=le.sequential_low_to_high[4],O=le.sequential_low_to_high[2],C=le.sequential_low_to_high[0],D=[["Fatal",S],["Serious",O],["Slight",C]];function F(G){l=G,n(6,l)}function E(G){o=G,n(0,o)}function P(G){s=G,n(1,s)}function I(G){f=G,n(2,f)}function M(G){i=G,n(3,i)}function L(){a=Ft(this.value),n(4,a)}function N(){u=Ft(this.value),n(5,u)}return r.$$.update=()=>{r.$$.dirty&63&&n(7,t=c())},[o,s,f,i,a,u,l,t,g,m,y,S,O,C,D,F,E,P,I,M,L,N]}class H$ extends J{constructor(e){super(),K(this,e,B$,j$,Y,{})}}function z$(r){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function G$(r){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function U$(r){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function q$(r){let e,n,t,l,o,s,f,i,a,u,c;return t=new Q({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[G$]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[U$]},$$scope:{ctx:r}}}),u=new Me({}),{c(){e=T("p"),n=k("2022 AADF (annual average daily flow) data from "),b(t.$$.fragment),l=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),f=A(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=A(),b(u.$$.fragment)},m(g,m){$(g,e,m),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(g,f,m),$(g,i,m),$(g,a,m),v(u,g,m),c=!0},p(g,m){const y={};m&64&&(y.$$scope={dirty:m,ctx:g}),t.$set(y);const S={};m&64&&(S.$$scope={dirty:m,ctx:g}),o.$set(S)},i(g){c||(_(t.$$.fragment,g),_(o.$$.fragment,g),_(u.$$.fragment,g),c=!0)},o(g){d(t.$$.fragment,g),d(o.$$.fragment,g),d(u.$$.fragment,g),c=!1},d(g){g&&(p(e),p(f),p(i),p(a)),w(t),w(o),w(u,g)}}}function W$(r){let e,n,t;return n=new ge({props:{$$slots:{default:[q$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function zr(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:r[3]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function V$(r){let e,n=r[5].location+"",t,l,o,s,f,i=r[5].motor_vehicles_2022.toLocaleString()+"",a,u,c,g,m,y=r[5].pedal_cycles_2022.toLocaleString()+"",S,O,C,D,F,E=r[5].method+"",P;return{c(){e=T("h2"),t=k(n),l=A(),o=T("p"),s=k("Total motor vehicles (2022 AADF): "),f=T("b"),a=k(i),u=A(),c=T("p"),g=k("Total pedal cycles (2022 AADF): "),m=T("b"),S=k(y),O=A(),C=T("p"),D=k("Count method: "),F=T("b"),P=k(E)},m(I,M){$(I,e,M),h(e,t),$(I,l,M),$(I,o,M),h(o,s),h(o,f),h(f,a),$(I,u,M),$(I,c,M),h(c,g),h(c,m),h(m,S),$(I,O,M),$(I,C,M),h(C,D),h(C,F),h(F,P)},p(I,M){M&32&&n!==(n=I[5].location+"")&&R(t,n),M&32&&i!==(i=I[5].motor_vehicles_2022.toLocaleString()+"")&&R(a,i),M&32&&y!==(y=I[5].pedal_cycles_2022.toLocaleString()+"")&&R(S,y),M&32&&E!==(E=I[5].method+"")&&R(P,E)},d(I){I&&(p(e),p(l),p(o),p(u),p(c),p(O),p(C))}}}function X$(r){let e,n;return e=new fe({props:{$$slots:{default:[V$,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Y$(r){let e,n;const t=[H(Ct),{sourceLayer:Ct},{paint:{"circle-color":ye(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[X$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new et({props:l}),e.$on("click",J$),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&oe(H(Ct)),s&0&&{sourceLayer:Ct},s&6&&{paint:{"circle-color":ye(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Q$(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={id:Ct,$$slots:{right:[W$],default:[z$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&zr(r);return o=new ke({props:{url:`pmtiles://${we()}/v1/${Ct}.pmtiles`,$$slots:{default:[Y$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=A(),a&&a.c(),l=A(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=zr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&65&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Ct="vehicle_counts";function J$(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function K$(r,e,n){let t=le.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function f(i){s=i,n(0,s)}return[s,t,l,o,f]}class Z$ extends J{constructor(e){super(),K(this,e,K$,Q$,Y,{})}}function x$(r){let e,n,t,l,o,s,f,i;return e=new h$({}),t=new l$({}),o=new y$({}),f=new m$({}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment),l=A(),b(o.$$.fragment),s=A(),b(f.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),$(a,l,u),v(o,a,u),$(a,s,u),v(f,a,u),i=!0},i(a){i||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(p(n),p(l),p(s)),w(e,a),w(t,a),w(o,a),w(f,a)}}}function ep(r){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[x$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function tp(r){let e,n,t,l,o,s,f,i,a,u,c,g;return e=new lu({}),t=new Su({}),o=new mu({}),f=new Wf({}),a=new Vc({}),c=new Fc({}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment),l=A(),b(o.$$.fragment),s=A(),b(f.$$.fragment),i=A(),b(a.$$.fragment),u=A(),b(c.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,l,y),v(o,m,y),$(m,s,y),v(f,m,y),$(m,i,y),v(a,m,y),$(m,u,y),v(c,m,y),g=!0},i(m){g||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(o.$$.fragment,m),_(f.$$.fragment,m),_(a.$$.fragment,m),_(c.$$.fragment,m),g=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),d(a.$$.fragment,m),d(c.$$.fragment,m),g=!1},d(m){m&&(p(n),p(l),p(s),p(i),p(u)),w(e,m),w(t,m),w(o,m),w(f,m),w(a,m),w(c,m)}}}function np(r){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[tp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rp(r){let e,n,t,l,o,s,f,i,a,u;return e=new af({}),t=new Pf({}),o=new ma({}),f=new Fa({}),a=new Ja({}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment),l=A(),b(o.$$.fragment),s=A(),b(f.$$.fragment),i=A(),b(a.$$.fragment)},m(c,g){v(e,c,g),$(c,n,g),v(t,c,g),$(c,l,g),v(o,c,g),$(c,s,g),v(f,c,g),$(c,i,g),v(a,c,g),u=!0},i(c){u||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(f.$$.fragment,c),d(a.$$.fragment,c),u=!1},d(c){c&&(p(n),p(l),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(f,c),w(a,c)}}}function lp(r){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[rp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function op(r){let e,n,t,l;return e=new ra({}),t=new Ca({}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function sp(r){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[op]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ip(r){let e,n,t,l,o,s;return e=new _c({}),t=new Du({}),o=new oc({}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment),l=A(),b(o.$$.fragment)},m(f,i){v(e,f,i),$(f,n,i),v(t,f,i),$(f,l,i),v(o,f,i),s=!0},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l)),w(e,f),w(t,f),w(o,f)}}}function ap(r){let e,n,t,l,o,s,f=$n()=="Private (development)",i,a,u;e=new Z$({}),t=new H$({}),o=new Yu({});let c=f&&ip();return a=new vf({}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment),l=A(),b(o.$$.fragment),s=A(),c&&c.c(),i=A(),b(a.$$.fragment)},m(g,m){v(e,g,m),$(g,n,m),v(t,g,m),$(g,l,m),v(o,g,m),$(g,s,m),c&&c.m(g,m),$(g,i,m),v(a,g,m),u=!0},p:re,i(g){u||(_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),_(c),_(a.$$.fragment,g),u=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),d(c),d(a.$$.fragment,g),u=!1},d(g){g&&(p(n),p(l),p(s),p(i)),w(e,g),w(t,g),w(o,g),c&&c.d(g),w(a,g)}}}function fp(r){let e,n;return e=new tt({props:{small:!0,$$slots:{default:[ap]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function up(r){let e,n,t,l,o;function s(i){r[3](i)}let f={};return r[0]!==void 0&&(f.enabled=r[0]),e=new Rl({props:f}),W.push(()=>V(e,"enabled",s)),l=new ql({}),{c(){b(e.$$.fragment),t=A(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,a){const u={};!n&&a&1&&(n=!0,u.enabled=i[0],X(()=>n=!1)),e.$set(u)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function cp(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,S,O;return e=new Cc({}),t=new Fe({props:{label:"Trip generators",$$slots:{default:[ep]},$$scope:{ctx:r}}}),o=new Fe({props:{label:"Existing infrastructure",$$slots:{default:[np]},$$scope:{ctx:r}}}),f=new Fe({props:{label:"Boundaries",$$slots:{default:[lp]},$$scope:{ctx:r}}}),a=new Fe({props:{label:"Census",$$slots:{default:[sp]},$$scope:{ctx:r}}}),c=new Fe({props:{label:"Other",$$slots:{default:[fp]},$$scope:{ctx:r}}}),m=new Fe({props:{label:"Tools",$$slots:{default:[up]},$$scope:{ctx:r}}}),S=new jl({props:{disabled:!r[1]}}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment),l=A(),b(o.$$.fragment),s=A(),b(f.$$.fragment),i=A(),b(a.$$.fragment),u=A(),b(c.$$.fragment),g=A(),b(m.$$.fragment),y=A(),b(S.$$.fragment)},m(C,D){v(e,C,D),$(C,n,D),v(t,C,D),$(C,l,D),v(o,C,D),$(C,s,D),v(f,C,D),$(C,i,D),v(a,C,D),$(C,u,D),v(c,C,D),$(C,g,D),v(m,C,D),$(C,y,D),v(S,C,D),O=!0},p(C,D){const F={};D&16&&(F.$$scope={dirty:D,ctx:C}),t.$set(F);const E={};D&16&&(E.$$scope={dirty:D,ctx:C}),o.$set(E);const P={};D&16&&(P.$$scope={dirty:D,ctx:C}),f.$set(P);const I={};D&16&&(I.$$scope={dirty:D,ctx:C}),a.$set(I);const M={};D&16&&(M.$$scope={dirty:D,ctx:C}),c.$set(M);const L={};D&17&&(L.$$scope={dirty:D,ctx:C}),m.$set(L);const N={};D&2&&(N.disabled=!C[1]),S.$set(N)},i(C){O||(_(e.$$.fragment,C),_(t.$$.fragment,C),_(o.$$.fragment,C),_(f.$$.fragment,C),_(a.$$.fragment,C),_(c.$$.fragment,C),_(m.$$.fragment,C),_(S.$$.fragment,C),O=!0)},o(C){d(e.$$.fragment,C),d(t.$$.fragment,C),d(o.$$.fragment,C),d(f.$$.fragment,C),d(a.$$.fragment,C),d(c.$$.fragment,C),d(m.$$.fragment,C),d(S.$$.fragment,C),O=!1},d(C){C&&(p(n),p(l),p(s),p(i),p(u),p(g),p(y)),w(e,C),w(t,C),w(o,C),w(f,C),w(a,C),w(c,C),w(m,C),w(S,C)}}}function $p(r){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function pp(r){let e,n,t,l;return e=new Fe({props:{label:"Layers",open:!0,$$slots:{default:[cp]},$$scope:{ctx:r}}}),t=new It({props:{data:r[2],$$slots:{default:[$p]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&19&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function mp(r,e,n){let t,l;be(r,lr,f=>n(1,l=f));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(f){t=f,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&lr.set(!t)},[t,l,o,s]}class _p extends J{constructor(e){super(),K(this,e,mp,pp,Y,{})}}function Gr(r){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gp(r){let e,n=r[0]&&Gr();return{c(){n&&n.c(),e=Ie()},m(t,l){n&&n.m(t,l),$(t,e,l)},p(t,[l]){t[0]?n||(n=Gr(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:re,o:re,d(t){t&&p(e),n&&n.d(t)}}}function dp(r,e,n){let{loadFile:t}=e,l=!0;return wn(async()=>{let s=await(await fetch(`${nn()}/v1/random_schemes.geojson`)).text();t(s),n(0,l=!1)}),r.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[l,t]}class hp extends J{constructor(e){super(),K(this,e,dp,gp,Y,{loadFile:1})}}function Ur(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=T("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),h(e,n),h(e,l)},p(s,f){var i;f&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&R(l,t)},d(s){s&&p(e)}}}function bp(r){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vp(r){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wp(r){let e,n,t,l;return e=new Et({props:{$$slots:{default:[bp]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Et({props:{$$slots:{default:[vp]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function kp(r){var N,G,B,j;let e,n,t=r[0].scheme_reference+"",l,o,s,f,i=((N=r[0].browse)==null?void 0:N.authority_or_region)+"",a,u,c,g,m=((G=r[0].browse)==null?void 0:G.capital_scheme_id)+"",y,S,O,C,D=((B=r[0].browse)==null?void 0:B.funding_programme)+"",F,E,P,I,M,L=((j=r[0].browse)==null?void 0:j.current_milestone)&&Ur(r);return I=new Bl({props:{$$slots:{default:[wp]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("Scheme reference: "),l=k(t),o=A(),s=T("p"),f=k("Authority or region: "),a=k(i),u=A(),c=T("p"),g=k("Capital scheme ID: "),y=k(m),S=A(),O=T("p"),C=k("Funding programme: "),F=k(D),E=A(),L&&L.c(),P=A(),b(I.$$.fragment)},m(z,q){$(z,e,q),h(e,n),h(e,l),$(z,o,q),$(z,s,q),h(s,f),h(s,a),$(z,u,q),$(z,c,q),h(c,g),h(c,y),$(z,S,q),$(z,O,q),h(O,C),h(O,F),$(z,E,q),L&&L.m(z,q),$(z,P,q),v(I,z,q),M=!0},p(z,q){var ie,Te,ae,ve;(!M||q&1)&&t!==(t=z[0].scheme_reference+"")&&R(l,t),(!M||q&1)&&i!==(i=((ie=z[0].browse)==null?void 0:ie.authority_or_region)+"")&&R(a,i),(!M||q&1)&&m!==(m=((Te=z[0].browse)==null?void 0:Te.capital_scheme_id)+"")&&R(y,m),(!M||q&1)&&D!==(D=((ae=z[0].browse)==null?void 0:ae.funding_programme)+"")&&R(F,D),(ve=z[0].browse)!=null&&ve.current_milestone?L?L.p(z,q):(L=Ur(z),L.c(),L.m(P.parentNode,P)):L&&(L.d(1),L=null);const Z={};q&32&&(Z.$$scope={dirty:q,ctx:z}),I.$set(Z)},i(z){M||(_(I.$$.fragment,z),M=!0)},o(z){d(I.$$.fragment,z),M=!1},d(z){z&&(p(e),p(o),p(s),p(u),p(c),p(S),p(O),p(E),p(P)),L&&L.d(z),w(I,z)}}}function yp(r){let e,n;return e=new Fe({props:{label:`${r[0].scheme_name}`,$$slots:{default:[kp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_name}`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Sp(r,e,n){let t,l;be(r,At,i=>n(3,t=i)),be(r,vn,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(Ml(i),{padding:20,animate:!1})}function f(){var u,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((u=o.browse)==null?void 0:u.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,f]}class Cp extends J{constructor(e){super(),K(this,e,Sp,yp,Y,{scheme:0})}}function qr(r){let e,n,t=Pn(r[0].length_meters)+"",l;return{c(){e=T("p"),n=k("Length: "),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,l)},p(o,s){s&1&&t!==(t=Pn(o[0].length_meters)+"")&&R(l,t)},d(o){o&&p(e)}}}function Wr(r){let e,n=ot(r[0].description,r[2])+"";return{c(){e=T("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&5&&n!==(n=ot(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Vr(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=T("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),h(e,n),h(e,l)},p(s,f){var i;f&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&R(l,t)},d(s){s&&p(e)}}}function Tp(r){var nt,Je,Be,Ke;let e,n,t,l=ot(r[0].name,r[2])+"",o,s=r[0].intervention_type+"",f,i,a,u,c,g,m,y,S,O,C=ot(r[1].scheme_name??"",r[3])+"",D,F,E=ot(r[0].scheme_reference,r[3])+"",P,I,M,L,N=((nt=r[1].browse)==null?void 0:nt.authority_or_region)+"",G,B,j,z,q=((Je=r[1].browse)==null?void 0:Je.capital_scheme_id)+"",Z,ie,Te,ae,ve=((Be=r[1].browse)==null?void 0:Be.funding_programme)+"",de,Ne,ce=r[0].length_meters&&qr(r),$e=r[0].description&&Wr(r),ue=((Ke=r[1].browse)==null?void 0:Ke.current_milestone)&&Vr(r);return{c(){e=T("div"),n=T("h2"),t=new Nt(!1),o=k(" ("),f=k(s),i=k(")"),a=A(),ce&&ce.c(),u=A(),$e&&$e.c(),c=A(),g=T("hr"),m=A(),y=T("p"),S=k("Part of scheme: "),O=new Nt(!1),D=k(" ("),F=new Nt(!1),P=k(")"),I=A(),M=T("p"),L=k("Authority or region: "),G=k(N),B=A(),j=T("p"),z=k("Capital scheme ID: "),Z=k(q),ie=A(),Te=T("p"),ae=k("Funding programme: "),de=k(ve),Ne=A(),ue&&ue.c(),t.a=o,O.a=D,F.a=P,Ce(e,"max-width","30vw")},m(ne,he){$(ne,e,he),h(e,n),t.m(l,n),h(n,o),h(n,f),h(n,i),h(e,a),ce&&ce.m(e,null),h(e,u),$e&&$e.m(e,null),h(e,c),h(e,g),h(e,m),h(e,y),h(y,S),O.m(C,y),h(y,D),F.m(E,y),h(y,P),h(e,I),h(e,M),h(M,L),h(M,G),h(e,B),h(e,j),h(j,z),h(j,Z),h(e,ie),h(e,Te),h(Te,ae),h(Te,de),h(e,Ne),ue&&ue.m(e,null)},p(ne,[he]){var Cn,Tn,On,Ln;he&5&&l!==(l=ot(ne[0].name,ne[2])+"")&&t.p(l),he&1&&s!==(s=ne[0].intervention_type+"")&&R(f,s),ne[0].length_meters?ce?ce.p(ne,he):(ce=qr(ne),ce.c(),ce.m(e,u)):ce&&(ce.d(1),ce=null),ne[0].description?$e?$e.p(ne,he):($e=Wr(ne),$e.c(),$e.m(e,c)):$e&&($e.d(1),$e=null),he&10&&C!==(C=ot(ne[1].scheme_name??"",ne[3])+"")&&O.p(C),he&9&&E!==(E=ot(ne[0].scheme_reference,ne[3])+"")&&F.p(E),he&2&&N!==(N=((Cn=ne[1].browse)==null?void 0:Cn.authority_or_region)+"")&&R(G,N),he&2&&q!==(q=((Tn=ne[1].browse)==null?void 0:Tn.capital_scheme_id)+"")&&R(Z,q),he&2&&ve!==(ve=((On=ne[1].browse)==null?void 0:On.funding_programme)+"")&&R(de,ve),(Ln=ne[1].browse)!=null&&Ln.current_milestone?ue?ue.p(ne,he):(ue=Vr(ne),ue.c(),ue.m(e,null)):ue&&(ue.d(1),ue=null)},i:re,o:re,d(ne){ne&&p(e),ce&&ce.d(),$e&&$e.d(),ue&&ue.d()}}}function ot(r,e){return e?r.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):r}function Op(r,e,n){let t,l,o,s;be(r,Bt,i=>n(4,l=i)),be(r,Jt,i=>n(2,o=i)),be(r,Kt,i=>n(3,s=i));let{props:f}=e;return r.$$set=i=>{"props"in i&&n(0,f=i.props)},r.$$.update=()=>{r.$$.dirty&17&&n(1,t=l.get(f.scheme_reference))},[f,t,o,s,l]}class Sn extends J{constructor(e){super(),K(this,e,Op,Tp,Y,{props:0})}}function Lp(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Ap(r){let e,n;return e=new Sn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ip(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Lp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Ap,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Pp(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Mp(r){let e,n;return e=new Sn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Np(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Pp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Mp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Dp(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Ep(r){let e,n;return e=new Sn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Fp(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Dp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Ep,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function jp(r){let e,n,t,l,o,s,f,i,a,u;const c=[H("interventions-points"),{filter:["all",Mn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":xt,"circle-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[Ip]},$$scope:{ctx:r}};for(let P=0;P<c.length;P+=1)g=ee(g,c[P]);e=new et({props:g});const m=[H("interventions-lines"),{filter:["all",Nn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Pt,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[Np]},$$scope:{ctx:r}};for(let P=0;P<m.length;P+=1)y=ee(y,m[P]);t=new Se({props:y});const S=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Pt,"circle-opacity":0,"circle-stroke-color":xe.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let O={};for(let P=0;P<S.length;P+=1)O=ee(O,S[P]);o=new et({props:O});const C=[H("interventions-polygons"),{filter:["all",Xt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":x(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[Fp]},$$scope:{ctx:r}};for(let P=0;P<C.length;P+=1)D=ee(D,C[P]);f=new Ye({props:D});const F=[H("interventions-polygons-outlines"),{filter:["all",Xt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Pt}},{layout:{visibility:r[0]?"visible":"none"}}];let E={};for(let P=0;P<F.length;P+=1)E=ee(E,F[P]);return a=new Se({props:E}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment),l=A(),b(o.$$.fragment),s=A(),b(f.$$.fragment),i=A(),b(a.$$.fragment)},m(P,I){v(e,P,I),$(P,n,I),v(t,P,I),$(P,l,I),v(o,P,I),$(P,s,I),v(f,P,I),$(P,i,I),v(a,P,I),u=!0},p(P,I){const M=I&29?te(c,[c[0],I&24&&{filter:["all",Mn,P[3],P[4]]},c[2],c[3],I&4&&{paint:{"circle-color":P[2],"circle-radius":xt,"circle-opacity":x(1,.5)}},I&1&&{layout:{visibility:P[0]?"visible":"none"}},c[6]]):{};I&128&&(M.$$scope={dirty:I,ctx:P}),e.$set(M);const L=I&13?te(m,[m[0],I&8&&{filter:["all",Nn,P[3]]},m[2],m[3],I&4&&{paint:{"line-color":P[2],"line-width":Pt,"line-opacity":x(1,.5)}},I&1&&{layout:{visibility:P[0]?"visible":"none"}},m[6]]):{};I&128&&(L.$$scope={dirty:I,ctx:P}),t.$set(L);const N=I&1?te(S,[S[0],S[1],S[2],{layout:{visibility:P[0]?"visible":"none"}}]):{};o.$set(N);const G=I&13?te(C,[C[0],I&8&&{filter:["all",Xt,P[3]]},C[2],C[3],I&4&&{paint:{"fill-color":P[2],"fill-opacity":x(.2,.5)}},I&1&&{layout:{visibility:P[0]?"visible":"none"}},C[6]]):{};I&128&&(G.$$scope={dirty:I,ctx:P}),f.$set(G);const B=I&13?te(F,[F[0],I&8&&{filter:["all",Xt,P[3]]},I&4&&{paint:{"line-color":P[2],"line-opacity":.5,"line-width":.7*Pt}},I&1&&{layout:{visibility:P[0]?"visible":"none"}}]):{};a.$set(B)},i(P){u||(_(e.$$.fragment,P),_(t.$$.fragment,P),_(o.$$.fragment,P),_(f.$$.fragment,P),_(a.$$.fragment,P),u=!0)},o(P){d(e.$$.fragment,P),d(t.$$.fragment,P),d(o.$$.fragment,P),d(f.$$.fragment,P),d(a.$$.fragment,P),u=!1},d(P){P&&(p(n),p(l),p(s),p(i)),w(e,P),w(t,P),w(o,P),w(f,P),w(a,P)}}}function Rp(r){let e,n;return e=new It({props:{data:r[1],$$slots:{default:[jp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Bp(r,e,n){let t,l;be(r,At,a=>n(5,l=a));let{showSchemes:o}=e,s=Ol();const f=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=Nl(l))},[o,t,s,f,i,l]}class Hp extends J{constructor(e){super(),K(this,e,Bp,Rp,Y,{showSchemes:0})}}function Xr(r,e,n){const t=r.slice();return t[13]=e[n],t}function Yr(r,e,n){const t=r.slice();return t[16]=e[n],t}function zp(r){let e,n;return e=new hp({props:{loadFile:r[7]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qr(r){let e,n,t,l,o;e=new Et({props:{$$slots:{default:[Gp]},$$scope:{ctx:r}}}),e.$on("click",r[8]);function s(i){r[9](i)}let f={title:"About this scheme data",$$slots:{default:[Up]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.open=r[3]),t=new el({props:f}),W.push(()=>V(t,"open",s)),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const u={};a&524288&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!l&&a&8&&(l=!0,c.open=i[3],X(()=>l=!1)),t.$set(c)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Gp(r){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jr(r){let e,n=r[16]+"",t;return{c(){e=T("li"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&16&&n!==(n=l[16]+"")&&R(t,n)},d(l){l&&p(e)}}}function Up(r){let e,n,t=Pe(r[4].notes),l=[];for(let o=0;o<t.length;o+=1)l[o]=Jr(Yr(r,t,o));return{c(){e=T("div"),n=T("ul");for(let o=0;o<l.length;o+=1)l[o].c();U(e,"class","govuk-prose")},m(o,s){$(o,e,s),h(e,n);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(n,null)},p(o,s){if(s&16){t=Pe(o[4].notes);let f;for(f=0;f<t.length;f+=1){const i=Yr(o,t,f);l[f]?l[f].p(i,s):(l[f]=Jr(i),l[f].c(),l[f].m(n,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=t.length}},d(o){o&&p(e),Ot(l,o)}}}function Kr(r){let e,n,t,l;function o(i){r[10](i)}function s(i){r[11](i)}let f={};return r[1]!==void 0&&(f.schemesToBeShown=r[1]),r[2]!==void 0&&(f.show=r[2]),e=new Ti({props:f}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),l=!0},p(i,a){const u={};!n&&a&2&&(n=!0,u.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,u.show=i[2],X(()=>t=!1)),e.$set(u)},i(i){l||(_(e.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),l=!1},d(i){w(e,i)}}}function Zr(r){let e,n;return e=new Cp({props:{scheme:r[13]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xr(r){let e=r[1].has(r[13].scheme_reference),n,t,l=e&&Zr(r);return{c(){l&&l.c(),n=Ie()},m(o,s){l&&l.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?l?(l.p(o,s),s&66&&_(l,1)):(l=Zr(o),l.c(),_(l,1),l.m(n.parentNode,n)):l&&(me(),d(l,1,1,()=>{l=null}),_e())},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function qp(r){let e,n,t,l,o,s,f,i,a,u,c=$n()=="Private (development)",g,m,y,S,O,C,D,F,E;o=new Ul({props:{boundaryGeojson:r[4]}}),a=new Dl({});let P=c&&zp(r),I=r[4].notes&&Qr(r);y=new zl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),O=new al({props:{errorMessage:r[0]}});let M=r[6].size>0&&Kr(r),L=Pe(r[6].values()),N=[];for(let B=0;B<L.length;B+=1)N[B]=xr(Xr(r,L,B));const G=B=>d(N[B],1,1,()=>{N[B]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",l=A(),b(o.$$.fragment),s=A(),f=T("p"),f.textContent=`App version: ${$n()}`,i=A(),b(a.$$.fragment),u=A(),P&&P.c(),g=A(),I&&I.c(),m=A(),b(y.$$.fragment),S=A(),b(O.$$.fragment),C=A(),M&&M.c(),D=A(),F=T("ul");for(let B=0;B<N.length;B+=1)N[B].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),U(e,"slot","sidebar"),U(e,"class","govuk-prose")},m(B,j){$(B,e,j),h(e,n),h(n,t),h(n,l),v(o,n,null),h(e,s),h(e,f),h(e,i),v(a,e,null),h(e,u),P&&P.m(e,null),h(e,g),I&&I.m(e,null),h(e,m),v(y,e,null),h(e,S),v(O,e,null),h(e,C),M&&M.m(e,null),h(e,D),h(e,F);for(let z=0;z<N.length;z+=1)N[z]&&N[z].m(F,null);E=!0},p(B,j){const z={};j&16&&(z.boundaryGeojson=B[4]),o.$set(z),c&&P.p(B,j),B[4].notes?I?(I.p(B,j),j&16&&_(I,1)):(I=Qr(B),I.c(),_(I,1),I.m(e,m)):I&&(me(),d(I,1,1,()=>{I=null}),_e());const q={};if(j&1&&(q.errorMessage=B[0]),O.$set(q),B[6].size>0?M?(M.p(B,j),j&64&&_(M,1)):(M=Kr(B),M.c(),_(M,1),M.m(e,D)):M&&(me(),d(M,1,1,()=>{M=null}),_e()),j&66){L=Pe(B[6].values());let Z;for(Z=0;Z<L.length;Z+=1){const ie=Xr(B,L,Z);N[Z]?(N[Z].p(ie,j),_(N[Z],1)):(N[Z]=xr(ie),N[Z].c(),_(N[Z],1),N[Z].m(F,null))}for(me(),Z=L.length;Z<N.length;Z+=1)G(Z);_e()}},i(B){if(!E){_(o.$$.fragment,B),_(a.$$.fragment,B),_(P),_(I),_(y.$$.fragment,B),_(O.$$.fragment,B),_(M);for(let j=0;j<L.length;j+=1)_(N[j]);E=!0}},o(B){d(o.$$.fragment,B),d(a.$$.fragment,B),d(P),d(I),d(y.$$.fragment,B),d(O.$$.fragment,B),d(M),N=N.filter(Boolean);for(let j=0;j<N.length;j+=1)d(N[j]);E=!1},d(B){B&&p(e),w(o),w(a),P&&P.d(),I&&I.d(),w(y),w(O),M&&M.d(),Ot(N,B)}}}function Wp(r){let e,n,t,l,o,s,f;return e=new Hl({}),t=new Hp({props:{showSchemes:r[2]}}),s=new _p({}),{c(){b(e.$$.fragment),n=A(),b(t.$$.fragment),l=A(),o=T("div"),b(s.$$.fragment),U(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),$(i,o,a),v(s,o,null),f=!0},p(i,a){const u={};a&4&&(u.showSchemes=i[2]),t.$set(u)},i(i){f||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),w(s)}}}function Vp(r){let e,n,t;return n=new El({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Wp]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(n.$$.fragment),U(e,"slot","main")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.style=l[5]),o&524292&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Xp(r){let e,n;return e=new Wl({props:{$$slots:{main:[Vp],sidebar:[qp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&524415&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Yp(r,e,n){let t,l,o;be(r,At,O=>n(4,t=O)),be(r,Dn,O=>n(5,l=O)),be(r,Bt,O=>n(6,o=O)),wn(()=>{Fl()});const s=new URLSearchParams(window.location.search);Dn.set(s.get("style")||"dataviz");let f="",i=new Set,a=!0,u=!1;function c(O){try{At.set(JSON.parse(O)),Bt.set(ui(t)),n(0,f="")}catch(C){n(0,f=`The file you loaded is broken: ${C}`)}}const g=()=>n(3,u=!0);function m(O){u=O,n(3,u)}function y(O){i=O,n(1,i)}function S(O){a=O,n(2,a)}return[f,i,a,u,t,l,o,c,g,m,y,S]}class Qp extends J{constructor(e){super(),K(this,e,Yp,Xp,Y,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Qp({target:document.getElementById("app")});
