import{S as Y,i as Q,s as U,e as T,h as G,$ as Ce,j as p,W as te,o as m,aP as wl,b as q,c as V,d as L,g as b,m as v,w as at,l as X,t as _,n as d,p as w,X as jt,Y as Rt,Z as Bt,_ as Ht,a7 as qe,J as pe,K as me,aQ as Pt,u as k,k as h,D as B,I as Ie,N as mn,O as Xr,q as he,P as Yr,Q as Qr,T as Mt,U as Jr,V as Kr,aX as kl,aY as ut,a4 as On,aZ as yl,f as _n,aO as Sl,ar as Xt,aj as Kt,ae as gn,r as dn,F as Zr,a as sn,v as lt,aW as W,a_ as ge,a$ as we,B as Z,ah as x,C as ke,ak as ee,b0 as le,G as Tt,H as xr,aS as Nt,ab as Tn,b1 as Zt,R as el,b2 as hn,E as tl,as as Cl,ag as Ol,aU as An,al as Tl,am as Ln,an as In,ao as Ut,aV as Pn,L as Al,M as Ll,y as Il}from"./index-071d1dc5.js";import{d as Ke,j as Ct,C as De,f as xe,h as oe,l as z,c as Yt,k as Pl,S as Ml,B as Nl,b as At,G as Dl}from"./StreetViewTool-26cafe52.js";import{a as Ve,F as El}from"./Popup-efe02c59.js";import{P as se}from"./Popup-65709c56.js";import{R as Fl,C as Ze,Z as jl}from"./ZoomOutMap-6cbcc349.js";import{L as Rl,a as Bl}from"./LineMeasureController-7b84898e.js";function Hl(r){let e;return{c(){e=T("span"),G(e,"class","svelte-kzgqtg"),Ce(e,"background",r[0])},m(n,t){p(n,e,t)},p(n,[t]){t&1&&Ce(e,"background",n[0])},i:te,o:te,d(n){n&&m(e)}}}function zl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class Oe extends Y{constructor(e){super(),Q(this,e,zl,Hl,U,{color:0})}}const Gl="/atip/browse_show_diff_stuff/assets/help-d011708a.svg";function Ul(r){let e,n;const t=r[1].default,l=jt(t,r,r[4],null);return{c(){e=T("div"),l&&l.c(),G(e,"class","govuk-prose")},m(o,s){p(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&Rt(l,t,o,o[4],n?Ht(t,o[4],s,null):Bt(o[4]),null)},i(o){n||(_(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&m(e),l&&l.d(o)}}}function ql(r){let e,n,t,l,o,s,u;function i(f){r[3](f)}let a={title:"Help",$$slots:{default:[Ul]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new wl({props:a}),q.push(()=>V(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${Gl}" title="Help" alt="Help"/>`,n=L(),b(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){p(f,e,c),p(f,n,c),v(t,f,c),o=!0,s||(u=at(e,"click",r[2]),s=!0)},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,g.open=f[0],X(()=>l=!1)),t.$set(g)},i(f){o||(_(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(m(e),m(n)),w(t,f),s=!1,u()}}}function Wl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,u,l]}class fe extends Y{constructor(e){super(),Q(this,e,Wl,ql,U,{})}}function Mn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Nn(r){let e,n,t,l=r[1]+"",o,s,u;return n=new Oe({props:{color:r[2]}}),{c(){e=T("li"),b(n.$$.fragment),t=L(),o=k(l),s=L()},m(i,a){p(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&l!==(l=i[1]+"")&&B(o,l)},i(i){u||(_(n.$$.fragment,i),u=!0)},o(i){d(n.$$.fragment,i),u=!1},d(i){i&&m(e),w(n)}}}function Vl(r){let e,n,t=qe(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Nn(Mn(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){e=T("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,u){p(s,e,u);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=qe(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Mn(s,t,i);l[i]?(l[i].p(a,u),_(l[i],1)):(l[i]=Nn(a),l[i].c(),_(l[i],1),l[i].m(e,null))}for(pe(),i=t.length;i<l.length;i+=1)o(i);me()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)_(l[u]);n=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)d(l[u]);n=!1},d(s){s&&m(e),Pt(l,s)}}}function Xl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class nl extends Y{constructor(e){super(),Q(this,e,Xl,Vl,U,{rows:0})}}function Dn(r){let e=r[0],n,t,l=En(r);return{c(){l.c(),n=Ie()},m(o,s){l.m(o,s),p(o,n,s),t=!0},p(o,s){s&1&&U(e,e=o[0])?(pe(),d(l,1,1,te),me(),l=En(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&m(n),l.d(o)}}}function En(r){let e;const n=r[10].default,t=jt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Rt(t,n,l,l[9],e?Ht(n,l[9],o,null):Bt(l[9]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Yl(r){let e,n,t=r[0]&&Dn(r);return{c(){t&&t.c(),e=Ie()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=Dn(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(pe(),d(t,1,1,()=>{t=null}),me())},i(l){n||(_(t),n=!0)},o(l){d(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function Ql(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:u=mn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=Xr();he(r,f,y=>n(8,l=y)),he(r,c,y=>n(0,t=y));let g,$=!0;return Yr(()=>{t&&g&&l&&(Qr(f,t,g),Mt(c,t=null,t),n(6,g=void 0))}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Mt(c,t=u,t),Jr(l,t,Kr({type:"raster",tiles:i,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,g=l==null?void 0:l.getSource(t)),n(7,$=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,g=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&g&&($?n(7,$=!1):g.setTiles(i))},[t,f,c,u,i,a,g,$,l,s,o]}class Jl extends Y{constructor(e){super(),Q(this,e,Ql,Yl,U,{id:3,tiles:4,tileSize:5})}}function Kl(r){let e;const n=r[16].default,t=jt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Rt(t,n,l,l[24],e?Ht(n,l[24],o,null):Bt(l[24]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Zl(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Kl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new kl({props:o}),q.push(()=>V(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function xl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=mn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:$=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:O=void 0}=e,{hoverCursor:I=void 0}=e,{manageHoverState:C=!1}=e,{hovered:E=null}=e,{eventsIfTopMost:F=!1}=e,{interactive:P=!0}=e;function S(R){E=R,n(0,E)}function M(R){ut.call(this,r,R)}function N(R){ut.call(this,r,R)}function A(R){ut.call(this,r,R)}function D(R){ut.call(this,r,R)}function H(R){ut.call(this,r,R)}function K(R){ut.call(this,r,R)}return r.$$set=R=>{"id"in R&&n(1,o=R.id),"source"in R&&n(2,s=R.source),"sourceLayer"in R&&n(3,u=R.sourceLayer),"beforeId"in R&&n(4,i=R.beforeId),"beforeLayerType"in R&&n(5,a=R.beforeLayerType),"paint"in R&&n(6,f=R.paint),"layout"in R&&n(7,c=R.layout),"filter"in R&&n(8,g=R.filter),"applyToClusters"in R&&n(9,$=R.applyToClusters),"minzoom"in R&&n(10,y=R.minzoom),"maxzoom"in R&&n(11,O=R.maxzoom),"hoverCursor"in R&&n(12,I=R.hoverCursor),"manageHoverState"in R&&n(13,C=R.manageHoverState),"hovered"in R&&n(0,E=R.hovered),"eventsIfTopMost"in R&&n(14,F=R.eventsIfTopMost),"interactive"in R&&n(15,P=R.interactive),"$$scope"in R&&n(24,l=R.$$scope)},[E,o,s,u,i,a,f,c,g,$,y,O,I,C,F,P,t,S,M,N,A,D,H,K,l]}class eo extends Y{constructor(e){super(),Q(this,e,xl,Zl,U,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Fn(r){let e=r[0],n,t,l=jn(r);return{c(){l.c(),n=Ie()},m(o,s){l.m(o,s),p(o,n,s),t=!0},p(o,s){s&1&&U(e,e=o[0])?(pe(),d(l,1,1,te),me(),l=jn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&m(n),l.d(o)}}}function jn(r){let e;const n=r[9].default,t=jt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Rt(t,n,l,l[8],e?Ht(n,l[8],o,null):Bt(l[8]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function to(r){let e,n,t=r[0]&&Fn(r);return{c(){t&&t.c(),e=Ie()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=Fn(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(pe(),d(t,1,1,()=>{t=null}),me())},i(l){n||(_(t),n=!0)},o(l){d(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function no(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:u=mn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!On.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new yl;On.addProtocol("pmtiles",y.tile)}const{map:c,self:g}=Xr();he(r,c,y=>n(7,l=y)),he(r,g,y=>n(0,t=y));let $;return Yr(()=>{t&&l&&(Qr(c,t,$),Mt(g,t=null,t),$=void 0)}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Mt(g,t=u,t),Jr(l,t,Kr({type:"vector",url:i,tiles:a,promoteId:f}),y=>l&&y===t,()=>{t&&($=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{$=l==null?void 0:l.getSource(u)}))},[t,c,g,u,i,a,f,l,s,o]}class be extends Y{constructor(e){super(),Q(this,e,no,to,U,{id:3,url:4,tiles:5,promoteId:6})}}function ro(r){let e;return{c(){e=T("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function lo(r){let e,n,t=r[0]=="Private (development)"&&ro();return{c(){t&&t.c(),e=L(),n=T("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),p(l,e,o),p(l,n,o)},p:te,d(l){l&&(m(e),m(n)),t&&t.d(l)}}}function oo(r){let e,n,t,l,o,s;return o=new fe({props:{$$slots:{default:[lo]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("App version: "),t=k(r[0]),l=L(),b(o.$$.fragment)},m(u,i){p(u,e,i),h(e,n),h(e,t),h(e,l),v(o,e,null),s=!0},p(u,[i]){const a={};i&2&&(a.$$scope={dirty:i,ctx:u}),o.$set(a)},i(u){s||(_(o.$$.fragment,u),s=!0)},o(u){d(o.$$.fragment,u),s=!1},d(u){u&&m(e),w(o)}}}function so(r){return[_n()]}class io extends Y{constructor(e){super(),Q(this,e,so,oo,U,{})}}const ao={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ae=Uint8Array,it=Uint16Array,rl=Uint32Array,ll=new Ae([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ol=new Ae([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fo=new Ae([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sl=function(r,e){for(var n=new it(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new rl(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},il=sl(ll,2),al=il[0],uo=il[1];al[28]=258,uo[258]=28;var co=sl(ol,0),$o=co[0],an=new it(32768);for(var ae=0;ae<32768;++ae){var nt=(ae&43690)>>>1|(ae&21845)<<1;nt=(nt&52428)>>>2|(nt&13107)<<2,nt=(nt&61680)>>>4|(nt&3855)<<4,an[ae]=((nt&65280)>>>8|(nt&255)<<8)>>>1}var It=function(r,e,n){for(var t=r.length,l=0,o=new it(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new it(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var u;if(n){u=new it(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=s[r[l]-1]++<<f,g=c|(1<<f)-1;c<=g;++c)u[an[c]>>>i]=a}else for(u=new it(t),l=0;l<t;++l)r[l]&&(u[l]=an[s[r[l]-1]++]>>>15-r[l]);return u},zt=new Ae(288);for(var ae=0;ae<144;++ae)zt[ae]=8;for(var ae=144;ae<256;++ae)zt[ae]=9;for(var ae=256;ae<280;++ae)zt[ae]=7;for(var ae=280;ae<288;++ae)zt[ae]=8;var fl=new Ae(32);for(var ae=0;ae<32;++ae)fl[ae]=5;var po=It(zt,9,1),mo=It(fl,5,1),xt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Me=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},en=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},_o=function(r){return(r+7)/8|0},bn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?it:r.BYTES_PER_ELEMENT==4?rl:Ae)(n-e);return t.set(r.subarray(e,n)),t},go=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ne=function(r,e,n){var t=new Error(e||go[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Ne),!n)throw t;return t},ho=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Ae(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ae(t*3));var s=function(Ye){var je=e.length;if(Ye>je){var Qe=new Ae(Math.max(je*2,Ye));Qe.set(e),e=Qe}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,g=n.m,$=n.n,y=t*8;do{if(!f){u=Me(r,i,1);var O=Me(r,i+1,3);if(i+=3,O)if(O==1)f=po,c=mo,g=9,$=5;else if(O==2){var F=Me(r,i,31)+257,P=Me(r,i+10,15)+4,S=F+Me(r,i+5,31)+1;i+=14;for(var M=new Ae(S),N=new Ae(19),A=0;A<P;++A)N[fo[A]]=Me(r,i+A*3,7);i+=P*3;for(var D=xt(N),H=(1<<D)-1,K=It(N,D,1),A=0;A<S;){var R=K[Me(r,i,H)];i+=R&15;var I=R>>>4;if(I<16)M[A++]=I;else{var j=0,J=0;for(I==16?(J=3+Me(r,i,3),i+=2,j=M[A-1]):I==17?(J=3+Me(r,i,7),i+=3):I==18&&(J=11+Me(r,i,127),i+=7);J--;)M[A++]=j}}var de=M.subarray(0,F),ie=M.subarray(F);g=xt(de),$=xt(ie),f=It(de,g,1),c=It(ie,$,1)}else Ne(1);else{var I=_o(i)+4,C=r[I-4]|r[I-3]<<8,E=I+C;if(E>t){o&&Ne(0);break}l&&s(a+C),e.set(r.subarray(I,E),a),n.b=a+=C,n.p=i=E*8,n.f=u;continue}if(i>y){o&&Ne(0);break}}l&&s(a+131072);for(var ye=(1<<g)-1,Te=(1<<$)-1,ve=i;;ve=i){var j=f[en(r,i)&ye],Se=j>>>4;if(i+=j&15,i>y){o&&Ne(0);break}if(j||Ne(2),Se<256)e[a++]=Se;else if(Se==256){ve=i,f=null;break}else{var et=Se-254;if(Se>264){var A=Se-257,ue=ll[A];et=Me(r,i,(1<<ue)-1)+al[A],i+=ue}var ce=c[en(r,i)&Te],_e=ce>>>4;ce||Ne(3),i+=ce&15;var ie=$o[_e];if(_e>3){var ue=ol[_e];ie+=en(r,i)&(1<<ue)-1,i+=ue}if(i>y){o&&Ne(0);break}l&&s(a+131072);for(var tt=a+et;a<tt;a+=4)e[a]=e[a-ie],e[a+1]=e[a+1-ie],e[a+2]=e[a+2-ie],e[a+3]=e[a+3-ie];a=tt}}n.l=f,n.p=ve,n.b=a,n.f=u,f&&(u=1,n.m=g,n.d=c,n.n=$)}while(!u);return a==e.length?e:bn(e,0,a)},bo=new Ae(0),Ue=function(r,e){return r[e]|r[e+1]<<8},Ee=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},tn=function(r,e){return Ee(r,e)+Ee(r,e+4)*4294967296};function vo(r,e){return ho(r,e)}var fn=typeof TextDecoder<"u"&&new TextDecoder,wo=0;try{fn.decode(bo,{stream:!0}),wo=1}catch{}var ko=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,bn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function ul(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(fn)return fn.decode(r);var l=ko(r),o=l[0],s=l[1];return s.length&&Ne(8),o}}var yo=function(r,e){return e+30+Ue(r,e+26)+Ue(r,e+28)},So=function(r,e,n){var t=Ue(r,e+28),l=ul(r.subarray(e+46,e+46+t),!(Ue(r,e+8)&2048)),o=e+46+t,s=Ee(r,e+20),u=n&&s==4294967295?Co(r,o):[s,Ee(r,e+24),Ee(r,e+42)],i=u[0],a=u[1],f=u[2];return[Ue(r,e+10),i,a,l,o+Ue(r,e+30)+Ue(r,e+32),f]},Co=function(r,e){for(;Ue(r,e)!=1;e+=4+Ue(r,e+2));return[tn(r,e+12),tn(r,e+4),tn(r,e+20)]};function Oo(r,e){for(var n={},t=r.length-22;Ee(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Ne(13);var l=Ue(r,t+8);if(!l)return{};var o=Ee(r,t+16),s=o==4294967295||l==65535;if(s){var u=Ee(r,t-12);s=Ee(r,u)==101075792,s&&(l=Ee(r,u+32),o=Ee(r,u+48))}for(var i=e&&e.filter,a=0;a<l;++a){var f=So(r,o,s),c=f[0],g=f[1],$=f[2],y=f[3],O=f[4],I=f[5],C=yo(r,I);o=O,(!i||i({name:y,size:g,originalSize:$,compression:c}))&&(c?c==8?n[y]=vo(r.subarray(C,C+g),new Ae($)):Ne(14,"unknown compression type "+c):n[y]=bn(r,C,C+g))}return n}function To(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(nn):nn(r)}function nn(r){var e=new Uint8Array(r),n=Oo(e);return Promise.resolve(Ao(n))}function Ao(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=ul(r[l])}return e}function We(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&ft(t)===e)return t;n++}}function Gt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&ft(l)===e&&n.push(l),t++}return n}function Qt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&ft(l)===e&&n(l,t):n(l,t),t++}}function Lo(r,e,n){var t=[];return Qt(r,e,function(l,o){t.push(n(l,o))}),t}var Io=/.+\:/;function ft(r){return r.tagName.replace(Io,"")}function cl(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+ft(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=cl(r.childNodes[t]),t++;return e+="</"+ft(r)+">",e}function Po(r){var e=r.documentElement,n=We(e,"sheetData"),t=[];return Qt(n,"row",function(l){Qt(l,"c",function(o){t.push(o)})}),t}function Mo(r,e){return We(e,"v")}function No(r,e){if(e.firstChild&&ft(e.firstChild)==="is"&&e.firstChild.firstChild&&ft(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Do(r){var e=r.documentElement,n=We(e,"dimension");if(n)return n.getAttribute("ref")}function Eo(r){var e=r.documentElement,n=We(e,"cellStyleXfs");return n?Gt(n,"xf"):[]}function Fo(r){var e=r.documentElement,n=We(e,"cellXfs");return n?Gt(n,"xf"):[]}function jo(r){var e=r.documentElement,n=We(e,"numFmts");return n?Gt(n,"numFmt"):[]}function Ro(r){var e=r.documentElement;return Lo(e,"si",function(n){var t=We(n,"t");if(t)return t.textContent;var l="";return Qt(n,"r",function(o){l+=We(o,"t").textContent}),l})}function Bo(r){var e=r.documentElement;return We(e,"workbookPr")}function Ho(r){var e=r.documentElement;return Gt(e,"Relationship")}function zo(r){var e=r.documentElement,n=We(e,"sheets");return Gt(n,"sheet")}function Go(r,e){var n=e.createDocument(r),t={},l=Bo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return zo(n).forEach(o),t}function Uo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=rn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=rn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=rn(u);break}};return Ho(n).forEach(l),t}function rn(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Rn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Bn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(t){qo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function qo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Wo(r,e){if(!r)return{};var n=e.createDocument(r),t=Eo(n).map(ln),l=jo(n).map(Vo).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?Bn(Bn({},t[u.xfId]),ln(u,l)):ln(u,l)};return Fo(n).map(o)}function Vo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function ln(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Xo(r,e){return r?Ro(e.createDocument(r)):[]}function $l(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Yo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Qo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qo(r,e){if(r){if(typeof r=="string")return Hn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hn(r,e)}}function Hn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Jo(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Ko.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&es(l.numberFormat.template))return!0}}var Ko=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Zo=/^\[\$-414\]/,xo=/;@$/;function es(r){r=r.toLowerCase(),r=r.replace(Zo,""),r=r.replace(xo,"");for(var e=r.split(/\W+/),n=Yo(e),t;!(t=n()).done;){var l=t.value;if(ts.indexOf(l)<0)return!1}return!0}var ts=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function ns(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=on(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=on(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=on(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=rs(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var g=Number(r);if(isNaN(g))throw new Error('Invalid "numeric" cell value: '.concat(r));r=g,Jo(r,o(),s,a)&&(r=$l(r,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function rs(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function on(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var ls=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function os(r){var e=function(a,f){return a-f},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:l,column:s},{row:o,column:u}]}function ss(r){for(var e=0,n=0;n<r.length;)e*=26,e+=ls.indexOf(r[n]),n++;return e}function pl(r){return r=r.split(/(\d+)/),[parseInt(r[1]),ss(r[0].trim())]}function is(r,e,n,t,l,o,s){var u=pl(r.getAttribute("r")),i=Mo(e,r),a=i&&i.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:ns(a,f,{getInlineStringValue:function(){return No(e,r)},getInlineStringXml:function(){return cl(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function as(r,e,n,t,l,o){var s=Po(r);return s.length===0?[]:s.map(function(u){return is(u,r,e,n,t,l,o)})}function fs(r,e){return ps(r)||$s(r,e)||cs(r,e)||us()}function us(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cs(r,e){if(r){if(typeof r=="string")return zn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zn(r,e)}}function zn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function $s(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ps(r){if(Array.isArray(r))return r}function ms(r){var e=Do(r);if(e)return e=e.split(":").map(pl).map(function(n){var t=fs(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function _s(r,e,n,t,l,o){var s=e.createDocument(r),u=as(s,e,n,t,l,o),i=ms(s)||os(u);return{cells:u,dimensions:i}}function gs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ds(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ds(r,e){if(r){if(typeof r=="string")return Gn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(r,e)}}function Gn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function hs(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var u=!0,i=gs(r[s]),a;!(a=i()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function bs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=vs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vs(r,e){if(r){if(typeof r=="string")return Un(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(r,e)}}function Un(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ws(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,u=bs(r),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function ks(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ml(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ys(r,e){return Os(r)||Cs(r,e)||ml(r,e)||Ss()}function Ss(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ml(r,e){if(r){if(typeof r=="string")return qn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(r,e)}}function qn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Cs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Os(r){if(Array.isArray(r))return r}function Ts(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=ys(n,2);l[0];for(var o=l[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=ks(t),g;!(g=c()).done;){var $=g.value,y=$.row-1,O=$.column-1;O<s&&y<u&&(i[y][O]=$.value)}var I=e.rowMap;if(I)for(var C=0;C<i.length;)I[C]=C,C++;return i=hs(ws(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:I}),e.transformData&&(i=e.transformData(i)),i}function As(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ls(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ls(r,e){if(r){if(typeof r=="string")return Wn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wn(r,e)}}function Wn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Vn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Is(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vn(Object(n),!0).forEach(function(t){Ps(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ps(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ms(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Is({sheet:1},n));var t=function(g){if(!r[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return r[g]},l=Uo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Xo(t(l.sharedStrings),e):[],s=l.styles?Wo(t(l.styles),e):{},u=Go(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var g=c.name;return{name:g}});var i=Ns(n.sheet,u.sheets);if(!i||!l.sheets[i])throw Ds(n.sheet,u.sheets);var a=_s(t(l.sheets[i]),e,o,s,u,n),f=Ts(a,n);return n.properties?{data:f,properties:u}:f}function Ns(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=As(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Ds(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function un(r){"@babel/helpers - typeof";return un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(r)}function Xn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Es(r,e,n){return e&&Xn(r.prototype,e),n&&Xn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Fs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function js(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Dt(r,e)}function Rs(r){var e=_l();return function(){var t=Et(r),l;if(e){var o=Et(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return Bs(this,l)}}function Bs(r,e){if(e&&(un(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hs(r)}function Hs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function cn(r){var e=typeof Map=="function"?new Map:void 0;return cn=function(t){if(t===null||!zs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Wt(t,arguments,Et(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Dt(l,t)},cn(r)}function Wt(r,e,n){return _l()?Wt=Reflect.construct:Wt=function(l,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(l,u),a=new i;return s&&Dt(a,s.prototype),a},Wt.apply(null,arguments)}function _l(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zs(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Dt(r,e){return Dt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Dt(r,e)}function Et(r){return Et=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Et(r)}var Le=function(r){js(n,r);var e=Rs(n);function n(t){var l;return Fs(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Es(n)}(cn(Error));function Gs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Le("not_a_number")}if(typeof r!="number")throw new Le("not_a_number");if(isNaN(r))throw new Le("invalid_number");if(!isFinite(r))throw new Le("out_of_bounds");return r}function Us(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Le("invalid_number");if(!isFinite(r))throw new Le("out_of_bounds");return String(r)}throw new Le("not_a_string")}function qs(r){if(typeof r=="boolean")return r;throw new Le("not_a_boolean")}function Ws(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Le("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Le("invalid_number");if(!isFinite(r))throw new Le("out_of_bounds");var t=$l(r,n);if(isNaN(t.valueOf()))throw new Le("out_of_bounds");return t}throw new Le("not_a_date")}function Vs(r,e){return Qs(r)||Ys(r,e)||gl(r,e)||Xs()}function Xs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ys(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Qs(r){if(Array.isArray(r))return r}function $n(r){"@babel/helpers - typeof";return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(r)}function Js(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=gl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gl(r,e){if(r){if(typeof r=="string")return Yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(r,e)}}function Yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Qn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Jn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qn(Object(n),!0).forEach(function(t){Ks(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ks(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Kn={isColumnOriented:!1};function Zs(r,e,n){n?n=Jn(Jn({},Kn),n):n=Kn;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ni(e),l&&(r=ti(r));for(var u=r[0],i=[],a=[],f=1;f<r.length;f++){var c=dl(e,r[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=Js(a),$;!($=g()).done;){var y=$.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function dl(r,e,n,t,l,o){for(var s={},u=!0,i=function(){var g=f[a],$=r[g],y=$n($.type)==="object"&&!Array.isArray($.type),O=e[t.indexOf(g)];O===void 0&&(O=null);var I=void 0,C=void 0,E=void 0;if(y)I=dl($.type,e,n,t,l,o);else if(O===null)I=null;else if(Array.isArray($.type)){var F=!1,P=ei(O).map(function(M){var N=Zn(M,$,o);return N.error&&(I=M,C=N.error,E=N.reason),N.value!==null&&(F=!0),N.value});C||(I=F?P:null)}else{var S=Zn(O,$,o);C=S.error,E=S.reason,I=C?O:S.value}!C&&I===null&&$.required&&(C="required"),C?(C={error:C,row:n+1,column:g,value:I},E&&(C.reason=E),$.type&&(C.type=$.type),l.push(C)):(u&&I!==null&&(u=!1),(I!==null||o.includeNullValues)&&(s[$.prop]=I))},a=0,f=Object.keys(r);a<f.length;a++)i();return u?null:s}function Zn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=ct(r,e.parse):e.type?t=xs(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function ct(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function xs(r,e,n){switch(e){case String:return ct(r,Us);case Number:return ct(r,Gs);case Date:return ct(r,function(t){return Ws(t,{properties:n.properties})});case Boolean:return ct(r,qs);default:if(typeof e=="function")return ct(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function hl(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=hl(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function ei(r){for(var e=[],n=0;n<r.length;){var t=hl(r,",",n),l=Vs(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var ti=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function ni(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function pn(r){"@babel/helpers - typeof";return pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(r)}function bl(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;pn(o)==="object"&&(o=Object.keys(r[l])[0],s=bl(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var ri=["schema","map"];function xn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function qt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xn(Object(n),!0).forEach(function(t){li(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function li(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function oi(r,e){if(r==null)return{};var n=si(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function si(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function ii(r,e,n){var t=n.schema,l=n.map,o=oi(n,ri);!t&&l&&(t=bl(l));var s=Ms(r,e,qt(qt({},o),{},{properties:t||o.properties}));return t?Zs(s.data,t,qt(qt({},o),{},{properties:s.properties})):s}function ai(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return To(r).then(function(n){return ii(n,ao,e)})}function fi(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>ui(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function ui(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function ci(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await ai(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Sl(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function vl(r){return Xt(["get","intervention_type"],{area:Ke.area,route:Ke.route,crossing:Ke.crossing,other:Ke.other},"white")}function er(r){return[["Areas",Ke.area],["Routes",Ke.route],["Crossings",Ke.crossing],["Other",Ke.other]]}const re={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},Fe=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20],Ot=Kt({type:"FeatureCollection",features:[],schemes:{}}),Ft=Kt(new Map),tr=Kt(!0),Vt=Kt("");function $i(r){let e,n;return e=new nl({props:{rows:r[1]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pi(r){let e,n,t,l,o;function s(i){r[3](i)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Ct({props:u}),q.push(()=>V(e,"value",s)),e.$on("change",r[2]),l=new De({props:{label:"Legend",$$slots:{default:[$i]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],X(()=>n=!1)),e.$set(f);const c={};a&258&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}function nr(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function mi(r,e,n){let t,l;he(r,Ft,c=>n(4,t=c)),he(r,gn,c=>n(5,l=c));let o="interventionType",s=er();function u(){let c;o=="interventionType"?(c=vl(),n(1,s=er())):o=="fundingProgramme"?c=i():o=="currentMilestone"&&(c=a()),l.setPaintProperty("interventions-points","circle-color",c),l.setPaintProperty("interventions-lines","line-color",c),l.setPaintProperty("interventions-polygons","fill-color",c),l.setPaintProperty("interventions-polygons-outlines","line-color",c)}function i(){var I;let c=new Set;for(let C of t.values())(I=C.browse)!=null&&I.funding_programme&&c.add(C.browse.funding_programme);let g=Array.from(c);g.sort();let[$,y]=nr(g,re.funding_programmes),O=Xt(["get","funding_programme"],$,"grey");return n(1,s=y),O}function a(){let c=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[g,$]=nr(c,re.current_milestone),y=Xt(["get","current_milestone"],g,"grey");return n(1,s=$),y}function f(c){o=c,n(0,o)}return[o,s,u,f]}class _i extends Y{constructor(e){super(),Q(this,e,mi,pi,U,{})}}function gi(r){let e;return{c(){e=k("Clear")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function di(r){let e,n,t,l,o,s;return t=new sn({props:{$$slots:{default:[gi]},$$scope:{ctx:r}}}),t.$on("click",r[14]),{c(){e=T("input"),n=L(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterText")},m(u,i){p(u,e,i),lt(e,r[5]),p(u,n,i),v(t,u,i),l=!0,o||(s=at(e,"input",r[13]),o=!0)},p(u,i){i&32&&e.value!==u[5]&&lt(e,u[5]);const a={};i&524288&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){l||(_(t.$$.fragment,u),l=!0)},o(u){d(t.$$.fragment,u),l=!1},d(u){u&&(m(e),m(n)),w(t,u),o=!1,s()}}}function hi(r){let e,n,t,l,o,s,u,i,a,f,c,g,$;function y(P){r[10](P)}let O={label:"Authority or region",id:"filterAuthority",choices:r[6],emptyOption:!0};r[2]!==void 0&&(O.value=r[2]),e=new Ct({props:O}),q.push(()=>V(e,"value",y));function I(P){r[11](P)}let C={label:"Funding programme",id:"filterFundingProgramme",choices:r[7],emptyOption:!0};r[3]!==void 0&&(C.value=r[3]),l=new Ct({props:C}),q.push(()=>V(l,"value",I));function E(P){r[12](P)}let F={label:"Current milestone",id:"filterCurrentMilestone",choices:r[8],emptyOption:!0};return r[4]!==void 0&&(F.value=r[4]),u=new Ct({props:F}),q.push(()=>V(u,"value",E)),f=new Zr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[di]},$$scope:{ctx:r}}}),g=new _i({}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment),s=L(),b(u.$$.fragment),a=L(),b(f.$$.fragment),c=L(),b(g.$$.fragment)},m(P,S){v(e,P,S),p(P,t,S),v(l,P,S),p(P,s,S),v(u,P,S),p(P,a,S),v(f,P,S),p(P,c,S),v(g,P,S),$=!0},p(P,S){const M={};S&64&&(M.choices=P[6]),!n&&S&4&&(n=!0,M.value=P[2],X(()=>n=!1)),e.$set(M);const N={};S&128&&(N.choices=P[7]),!o&&S&8&&(o=!0,N.value=P[3],X(()=>o=!1)),l.$set(N);const A={};S&256&&(A.choices=P[8]),!i&&S&16&&(i=!0,A.value=P[4],X(()=>i=!1)),u.$set(A);const D={};S&524320&&(D.$$scope={dirty:S,ctx:P}),f.$set(D)},i(P){$||(_(e.$$.fragment,P),_(l.$$.fragment,P),_(u.$$.fragment,P),_(f.$$.fragment,P),_(g.$$.fragment,P),$=!0)},o(P){d(e.$$.fragment,P),d(l.$$.fragment,P),d(u.$$.fragment,P),d(f.$$.fragment,P),d(g.$$.fragment,P),$=!1},d(P){P&&(m(t),m(s),m(a),m(c)),w(e,P),w(l,P),w(u,P),w(f,P),w(g,P)}}}function bi(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[9].route.toLocaleString()+"",s,u,i=r[9].area.toLocaleString()+"",a,f,c=r[9].crossing.toLocaleString()+"",g,$,y=r[9].other.toLocaleString()+"",O,I,C=rr(r[9].totalLength).toFixed(1)+"",E,F;return{c(){e=k("Showing "),t=k(n),l=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),g=k(c),$=k(" crossings, "),O=k(y),I=k(`
    other, with total LineString length of `),E=k(C),F=k(" miles)")},m(P,S){p(P,e,S),p(P,t,S),p(P,l,S),p(P,s,S),p(P,u,S),p(P,a,S),p(P,f,S),p(P,g,S),p(P,$,S),p(P,O,S),p(P,I,S),p(P,E,S),p(P,F,S)},p(P,S){S&1&&n!==(n=P[0].size.toLocaleString()+"")&&B(t,n),S&512&&o!==(o=P[9].route.toLocaleString()+"")&&B(s,o),S&512&&i!==(i=P[9].area.toLocaleString()+"")&&B(a,i),S&512&&c!==(c=P[9].crossing.toLocaleString()+"")&&B(g,c),S&512&&y!==(y=P[9].other.toLocaleString()+"")&&B(O,y),S&512&&C!==(C=rr(P[9].totalLength).toFixed(1)+"")&&B(E,C)},d(P){P&&(m(e),m(t),m(l),m(s),m(u),m(a),m(f),m(g),m($),m(O),m(I),m(E),m(F))}}}function vi(r){let e,n,t;function l(s){r[15](s)}let o={id:"show-schemes",$$slots:{default:[bi]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new oe({props:o}),q.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&524801&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function wi(r){let e,n,t,l;return e=new De({props:{label:"Filters",$$slots:{default:[hi]},$$scope:{ctx:r}}}),t=new xe({props:{small:!0,$$slots:{default:[vi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),p(o,n,s),v(t,o,s),l=!0},p(o,[s]){const u={};s&524796&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&524803&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),w(e,o),w(t,o)}}}function rr(r){return r*621371e-9}function ki(r,e,n){let t,l,o;he(r,Vt,M=>n(5,t=M)),he(r,Ot,M=>n(16,l=M)),he(r,Ft,M=>n(17,o=M));let{schemesToBeShown:s=new Set}=e,{show:u=!0}=e,i=[],a="",f=[],c="",g=[],$="",y={area:0,route:0,crossing:0,other:0,totalLength:0};dn(()=>{var D,H,K;let M=new Set,N=new Set,A=new Set;for(let R of o.values())(D=R.browse)!=null&&D.authority_or_region&&M.add(R.browse.authority_or_region),(H=R.browse)!=null&&H.funding_programme&&N.add(R.browse.funding_programme),(K=R.browse)!=null&&K.current_milestone&&A.add(R.browse.current_milestone);n(6,i=Array.from(M.entries())),i.sort(),n(7,f=Array.from(N.entries())),f.sort(),n(8,g=Array.from(A.entries())),g.sort()});function O(M,N,A,D){let H=M.toLowerCase(),K=j=>{var J,de,ie,ye,Te;if(H&&!((J=j.properties.name)!=null&&J.toLowerCase().includes(H))&&!((de=j.properties.description)!=null&&de.toLowerCase().includes(H)))return!1;if(N||A||D){let ve=o.get(j.properties.scheme_reference);if(N&&((ie=ve.browse)==null?void 0:ie.authority_or_region)!=N||A&&((ye=ve.browse)==null?void 0:ye.funding_programme)!=A||D&&((Te=ve.browse)==null?void 0:Te.current_milestone)!=D)return!1}return!0};n(0,s=new Set(l.features.filter(K).map(j=>j.properties.scheme_reference))),n(9,y={area:0,route:0,crossing:0,other:0,totalLength:0});let R=j=>{var J,de;return!(!s.has(j.properties.scheme_reference)||H&&!((J=j.properties.name)!=null&&J.toLowerCase().includes(H))&&!((de=j.properties.description)!=null&&de.toLowerCase().includes(H)))};for(let j of l.features)R(j)?(delete j.properties.hide_while_editing,n(9,y[j.properties.intervention_type]++,y),j.geometry.type=="LineString"&&j.properties.length_meters&&n(9,y.totalLength+=j.properties.length_meters,y)):j.properties.hide_while_editing=!0;Ot.set(l),n(9,y)}function I(M){a=M,n(2,a)}function C(M){c=M,n(3,c)}function E(M){$=M,n(4,$)}function F(){t=this.value,Vt.set(t)}const P=()=>Mt(Vt,t="",t);function S(M){u=M,n(1,u)}return r.$$set=M=>{"schemesToBeShown"in M&&n(0,s=M.schemesToBeShown),"show"in M&&n(1,u=M.show)},r.$$.update=()=>{r.$$.dirty&60&&O(t,a,c,$)},[s,u,a,c,$,t,i,f,g,y,I,C,E,F,P,S]}class yi extends Y{constructor(e){super(),Q(this,e,ki,wi,U,{schemesToBeShown:0,show:1})}}function Si(r){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ci(r){let e,n,t,l,o;return t=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Si]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment),l=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,u){p(s,e,u),h(e,n),v(t,e,null),h(e,l),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(_(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&m(e),w(t)}}}class Pe extends Y{constructor(e){super(),Q(this,e,null,Ci,U,{})}}function lr(r,e,n){const t=r.slice();return t[2]=e[n],t}function or(r,e,n){const t=r.slice();return t[5]=e[n],t}function sr(r){let e,n;return{c(){e=T("span"),n=k(`
    `),Ce(e,"background",r[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,l){p(t,e,l),h(e,n)},p(t,l){l&1&&Ce(e,"background",t[5])},d(t){t&&m(e)}}}function ir(r){let e,n=r[2]+"",t;return{c(){e=T("span"),t=k(n)},m(l,o){p(l,e,o),h(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&B(t,n)},d(l){l&&m(e)}}}function Oi(r){let e,n,t,l=qe(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=sr(or(r,l,i));let s=qe(r[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=ir(lr(r,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=L(),t=T("div");for(let i=0;i<u.length;i+=1)u[i].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(i,a){p(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);p(i,n,a),p(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){l=qe(i[0]);let f;for(f=0;f<l.length;f+=1){const c=or(i,l,f);o[f]?o[f].p(c,a):(o[f]=sr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){s=qe(i[1]);let f;for(f=0;f<s.length;f+=1){const c=lr(i,s,f);u[f]?u[f].p(c,a):(u[f]=ir(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:te,o:te,d(i){i&&(m(e),m(n),m(t)),Pt(o,i),Pt(u,i)}}}function Ti(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Xe extends Y{constructor(e){super(),Q(this,e,Ti,Oi,U,{colorScale:0,limits:1})}}function ar(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Ai(r){let e;return{c(){e=k("Percent of households with a car")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Li(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ii(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pi(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Mi(r){let e,n,t,l,o,s,u,i,a,f,c,g;return t=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Li]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ii]},$$scope:{ctx:r}}}),f=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Pi]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=L(),i=T("p"),a=k("License: "),b(f.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m($,y){p($,e,y),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),p($,u,y),p($,i,y),h(i,a),v(f,i,null),h(i,c),g=!0},p($,y){const O={};y&65536&&(O.$$scope={dirty:y,ctx:$}),t.$set(O);const I={};y&65536&&(I.$$scope={dirty:y,ctx:$}),o.$set(I);const C={};y&65536&&(C.$$scope={dirty:y,ctx:$}),f.$set(C)},i($){g||(_(t.$$.fragment,$),_(o.$$.fragment,$),_(f.$$.fragment,$),g=!0)},o($){d(t.$$.fragment,$),d(o.$$.fragment,$),d(f.$$.fragment,$),g=!1},d($){$&&(m(e),m(u),m(i)),w(t),w(o),w(f)}}}function Ni(r){let e,n,t;return n=new fe({props:{$$slots:{default:[Mi]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function fr(r){let e,n;return e=new Xe({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Di(r){let e;return{c(){e=k("Average cars per household")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ei(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Fi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ji(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ri(r){let e,n,t,l,o,s,u,i,a,f,c,g,$,y;return o=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ei]},$$scope:{ctx:r}}}),u=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Fi]},$$scope:{ctx:r}}}),g=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ji]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=T("p"),l=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(u.$$.fragment),i=k("."),a=L(),f=T("p"),c=k("License: "),b(g.$$.fragment),$=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(O,I){p(O,e,I),p(O,n,I),p(O,t,I),h(t,l),v(o,t,null),h(t,s),v(u,t,null),h(t,i),p(O,a,I),p(O,f,I),h(f,c),v(g,f,null),h(f,$),y=!0},p(O,I){const C={};I&65536&&(C.$$scope={dirty:I,ctx:O}),o.$set(C);const E={};I&65536&&(E.$$scope={dirty:I,ctx:O}),u.$set(E);const F={};I&65536&&(F.$$scope={dirty:I,ctx:O}),g.$set(F)},i(O){y||(_(o.$$.fragment,O),_(u.$$.fragment,O),_(g.$$.fragment,O),y=!0)},o(O){d(o.$$.fragment,O),d(u.$$.fragment,O),d(g.$$.fragment,O),y=!1},d(O){O&&(m(e),m(n),m(t),m(a),m(f)),w(o),w(u),w(g)}}}function Bi(r){let e,n,t;return n=new fe({props:{$$slots:{default:[Ri]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function ur(r){let e,n;return e=new Xe({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hi(r){let e;return{c(){e=k("Population density")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function zi(r){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Gi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ui(r){let e,n,t,l,o,s,u,i,a;return t=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[zi]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Gi]},$$scope:{ctx:r}}}),i=new Pe({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=L(),b(i.$$.fragment)},m(f,c){p(f,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),p(f,u,c),v(i,f,c),a=!0},p(f,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const $={};c&65536&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),w(t),w(o),w(i,f)}}}function qi(r){let e,n,t;return n=new fe({props:{$$slots:{default:[Ui]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function cr(r){let e,n,t,l;return t=new Xe({props:{colorScale:r[4],limits:r[6]().map(Zi)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=L(),b(t.$$.fragment)},m(o,s){p(o,e,s),p(o,n,s),v(t,o,s),l=!0},p:te,i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),w(t,o)}}}function Wi(r){let e,n,t,l=r[15].toLocaleString()+"",o,s,u=r[14]+"",i;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(l),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){p(a,e,f),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&B(o,l),f&8192&&u!==(u=a[14]+"")&&B(i,u)},d(a){a&&m(e)}}}function Vi(r){let e,n,t=r[14]+"",l,o,s,u=r[15]+"",i,a;return{c(){e=T("p"),n=k("Households in "),l=k(t),o=k(` have an average of
          `),s=T("b"),i=k(u),a=k(`
          cars`)},m(f,c){p(f,e,c),h(e,n),h(e,l),h(e,o),h(e,s),h(s,i),h(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(l,t),c&8200&&u!==(u=f[15]+"")&&B(i,u)},d(f){f&&m(e)}}}function Xi(r){let e,n,t=r[15]+"",l,o,s,u=r[14]+"",i,a;return{c(){e=T("p"),n=T("b"),l=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){p(f,e,c),h(e,n),h(n,l),h(n,o),h(e,s),h(e,i),h(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(l,t),c&8192&&u!==(u=f[14]+"")&&B(i,u)},d(f){f&&m(e)}}}function Yi(r){ar(r);let e;function n(o,s){return o[3]=="percent_households_with_car"?Xi:o[3]=="average_cars_per_household"?Vi:Wi}let t=n(r),l=t(r);return{c(){l.c(),e=Ie()},m(o,s){l.m(o,s),p(o,e,s)},p(o,s){ar(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function Qi(r){let e,n;return e=new se({props:{$$slots:{default:[Yi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ji(r){let e,n,t,l;const o=[z(Je),{sourceLayer:Je},{paint:{"fill-color":we(["get",r[3]],r[6](),r[4]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Qi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ve({props:s}),e.$on("click",r[5]);const u=[z(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ke({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),p(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&88?ee(o,[f&0&&le(z(Je)),f&0&&{sourceLayer:Je},f&88&&{paint:{"fill-color":we(["get",a[3]],a[6](),a[4]),"fill-opacity":Z(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&8?ee(u,[f&0&&le(z(`${Je}-outline`)),f&0&&{sourceLayer:Je},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),w(e,a),w(t,a)}}}function Ki(r){let e,n,t,l,o,s,u,i,a,f,c,g,$,y;function O(A){r[7](A)}let I={id:"percent_households_with_car",$$slots:{right:[Ni],default:[Ai]},$$scope:{ctx:r}};r[0]!==void 0&&(I.checked=r[0]),e=new oe({props:I}),q.push(()=>V(e,"checked",O)),e.$on("change",r[8]);let C=r[3]=="percent_households_with_car"&&fr(r);function E(A){r[9](A)}let F={id:"average_cars_per_household",$$slots:{right:[Bi],default:[Di]},$$scope:{ctx:r}};r[1]!==void 0&&(F.checked=r[1]),o=new oe({props:F}),q.push(()=>V(o,"checked",E)),o.$on("change",r[10]);let P=r[3]=="average_cars_per_household"&&ur(r);function S(A){r[11](A)}let M={id:"population_density",$$slots:{right:[qi],default:[Hi]},$$scope:{ctx:r}};r[2]!==void 0&&(M.checked=r[2]),a=new oe({props:M}),q.push(()=>V(a,"checked",S)),a.$on("change",r[12]);let N=r[3]=="population_density"&&cr(r);return $=new be({props:{url:`pmtiles://${ge()}/v1/${Je}.pmtiles`,$$slots:{default:[Ji]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),C&&C.c(),l=L(),b(o.$$.fragment),u=L(),P&&P.c(),i=L(),b(a.$$.fragment),c=L(),N&&N.c(),g=L(),b($.$$.fragment)},m(A,D){v(e,A,D),p(A,t,D),C&&C.m(A,D),p(A,l,D),v(o,A,D),p(A,u,D),P&&P.m(A,D),p(A,i,D),v(a,A,D),p(A,c,D),N&&N.m(A,D),p(A,g,D),v($,A,D),y=!0},p(A,[D]){const H={};D&65536&&(H.$$scope={dirty:D,ctx:A}),!n&&D&1&&(n=!0,H.checked=A[0],X(()=>n=!1)),e.$set(H),A[3]=="percent_households_with_car"?C?(C.p(A,D),D&8&&_(C,1)):(C=fr(A),C.c(),_(C,1),C.m(l.parentNode,l)):C&&(pe(),d(C,1,1,()=>{C=null}),me());const K={};D&65536&&(K.$$scope={dirty:D,ctx:A}),!s&&D&2&&(s=!0,K.checked=A[1],X(()=>s=!1)),o.$set(K),A[3]=="average_cars_per_household"?P?(P.p(A,D),D&8&&_(P,1)):(P=ur(A),P.c(),_(P,1),P.m(i.parentNode,i)):P&&(pe(),d(P,1,1,()=>{P=null}),me());const R={};D&65536&&(R.$$scope={dirty:D,ctx:A}),!f&&D&4&&(f=!0,R.checked=A[2],X(()=>f=!1)),a.$set(R),A[3]=="population_density"?N?(N.p(A,D),D&8&&_(N,1)):(N=cr(A),N.c(),_(N,1),N.m(g.parentNode,g)):N&&(pe(),d(N,1,1,()=>{N=null}),me());const j={};D&65544&&(j.$$scope={dirty:D,ctx:A}),$.$set(j)},i(A){y||(_(e.$$.fragment,A),_(C),_(o.$$.fragment,A),_(P),_(a.$$.fragment,A),_(N),_($.$$.fragment,A),y=!0)},o(A){d(e.$$.fragment,A),d(C),d(o.$$.fragment,A),d(P),d(a.$$.fragment,A),d(N),d($.$$.fragment,A),y=!1},d(A){A&&(m(t),m(l),m(u),m(i),m(c),m(g)),w(e,A),C&&C.d(A),w(o,A),P&&P.d(A),w(a,A),N&&N.d(A),w($,A)}}}let Je="census_output_areas";const Zi=r=>r.toLocaleString();function xi(r,e,n){let t=re.sequential_low_to_high,l=!1,o=!1,s=!1,u="";function i(I){let C=I.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${C}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${C}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(I){l=I,n(0,l)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(I){o=I,n(1,o)}const $=()=>{n(0,l=!1),n(2,s=!1)};function y(I){s=I,n(2,s)}const O=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[l,o,s,u,t,i,a,f,c,g,$,y,O]}class ea extends Y{constructor(e){super(),Q(this,e,xi,Ki,U,{})}}function ta(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(l,o){v(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),w(e,l)}}}function na(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ra(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[na]},$$scope:{ctx:r}}}),s=new Pe({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of December 2022."),o=L(),b(s.$$.fragment)},m(i,a){p(i,e,a),h(e,n),v(t,e,null),h(e,l),p(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),w(t),w(s,i)}}}function la(r){let e,n,t;return n=new fe({props:{$$slots:{default:[ra]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function oa(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function sa(r){let e,n;return e=new se({props:{$$slots:{default:[oa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ia(r){let e,n,t,l;const o=[z($t),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[sa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ve({props:s}),e.$on("click",fa);const u=[z(`${$t}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ke({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),p(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ee(o,[f&0&&le(z($t)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ee(u,[f&0&&le(z(`${$t}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),w(e,a),w(t,a)}}}function aa(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:$t,$$slots:{right:[la],default:[ta]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),q.push(()=>V(e,"checked",s)),l=new Tt({props:{data:`${ge()}/v1/${$t}.geojson`,$$slots:{default:[ia]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}let $t="combined_authorities";function fa(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function ua(r,e,n){let t=re.combined_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ca extends Y{constructor(e){super(),Q(this,e,ua,aa,U,{})}}function $a(r){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function pa(r){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ma(r){let e;return{c(){e=k(`here
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function _a(r){let e,n,t,l,o,s,u,i,a;return t=new W({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[pa]},$$scope:{ctx:r}}}),o=new W({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ma]},$$scope:{ctx:r}}}),i=new Pe({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),l=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),u=L(),b(i.$$.fragment)},m(f,c){p(f,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),p(f,u,c),v(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const $={};c&32&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),w(t),w(o),w(i,f)}}}function ga(r){let e,n,t;return n=new fe({props:{$$slots:{default:[_a]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function $r(r){let e,n;return e=new Xe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function da(r){let e,n=r[4].LSOA11CD+"",t,l,o,s=r[4].score+"",u,i,a,f,c,g=r[4].rank.toLocaleString()+"",$,y;return{c(){e=T("p"),t=k(n),l=k(` has an IMD score of
        `),o=T("b"),u=k(s),i=L(),a=T("p"),f=k("Rank: "),c=T("b"),$=k(g),y=k(`
        / 32,844 LSOAs`)},m(O,I){p(O,e,I),h(e,t),h(e,l),h(e,o),h(o,u),p(O,i,I),p(O,a,I),h(a,f),h(a,c),h(c,$),h(a,y)},p(O,I){I&16&&n!==(n=O[4].LSOA11CD+"")&&B(t,n),I&16&&s!==(s=O[4].score+"")&&B(u,s),I&16&&g!==(g=O[4].rank.toLocaleString()+"")&&B($,g)},d(O){O&&(m(e),m(i),m(a))}}}function ha(r){let e,n;return e=new se({props:{$$slots:{default:[da,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ba(r){let e,n,t,l;const o=[z(Re),{sourceLayer:Re},{paint:{"fill-color":we(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[ha]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ve({props:s});const u=[z(`${Re}-outline`),{sourceLayer:Re},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ke({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),p(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&7?ee(o,[f&0&&le(z(Re)),f&0&&{sourceLayer:Re},f&6&&{paint:{"fill-color":we(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Z(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?ee(u,[f&0&&le(z(`${Re}-outline`)),f&0&&{sourceLayer:Re},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),w(e,a),w(t,a)}}}function va(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:Re,$$slots:{right:[ga],default:[$a]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),q.push(()=>V(e,"checked",u));let a=r[0]&&$r(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${Re}.pmtiles`,$$slots:{default:[ba]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],X(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=$r(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(pe(),d(a,1,1,()=>{a=null}),me());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),w(e,f),a&&a.d(f),w(o,f)}}}let Re="imd";function wa(r,e,n){let t=re.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class ka extends Y{constructor(e){super(),Q(this,e,wa,va,U,{})}}function ya(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(l,o){v(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),w(e,l)}}}function Sa(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ca(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Sa]},$$scope:{ctx:r}}}),s=new Pe({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=L(),b(s.$$.fragment)},m(i,a){p(i,e,a),h(e,n),v(t,e,null),h(e,l),p(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),w(t),w(s,i)}}}function Oa(r){let e,n,t;return n=new fe({props:{$$slots:{default:[Ca]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Ta(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function Aa(r){let e,n;return e=new se({props:{$$slots:{default:[Ta,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function La(r){let e,n,t,l;const o=[z(pt),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Aa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ve({props:s}),e.$on("click",Pa);const u=[z(`${pt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ke({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),p(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ee(o,[f&0&&le(z(pt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ee(u,[f&0&&le(z(`${pt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),w(e,a),w(t,a)}}}function Ia(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:pt,$$slots:{right:[Oa],default:[ya]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),q.push(()=>V(e,"checked",s)),l=new Tt({props:{data:`${ge()}/v1/${pt}.geojson`,$$slots:{default:[La]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}let pt="local_authority_districts";function Pa(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Ma(r,e,n){let t=re.local_authority_districts,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Na extends Y{constructor(e){super(),Q(this,e,Ma,Ia,U,{})}}function Da(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(l,o){v(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),w(e,l)}}}function Ea(r){let e;return{c(){e=k(`local authority
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Fa(r){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ja(r){let e;return{c(){e=k(`development corporation
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ra(r){let e;return{c(){e=k("this map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ba(r){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ha(r){let e,n,t,l,o,s,u,i,a,f,c,g,$,y,O,I,C,E,F,P,S,M;return t=new W({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ea]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Fa]},$$scope:{ctx:r}}}),u=new W({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ja]},$$scope:{ctx:r}}}),$=new W({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Ra]},$$scope:{ctx:r}}}),E=new W({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ba]},$$scope:{ctx:r}}}),S=new Pe({}),{c(){e=T("p"),n=k("LPAs may be a "),b(t.$$.fragment),l=k(", "),b(o.$$.fragment),s=k("y, or "),b(u.$$.fragment),i=k("."),a=L(),f=T("p"),c=T("strong"),g=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b($.$$.fragment),y=k(" to get more details."),O=L(),I=T("p"),C=k("Data from ONS Geography via "),b(E.$$.fragment),F=k(", as of November 2022."),P=L(),b(S.$$.fragment)},m(N,A){p(N,e,A),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),v(u,e,null),h(e,i),p(N,a,A),p(N,f,A),h(f,c),h(c,g),v($,c,null),h(c,y),p(N,O,A),p(N,I,A),h(I,C),v(E,I,null),h(I,F),p(N,P,A),v(S,N,A),M=!0},p(N,A){const D={};A&16&&(D.$$scope={dirty:A,ctx:N}),t.$set(D);const H={};A&16&&(H.$$scope={dirty:A,ctx:N}),o.$set(H);const K={};A&16&&(K.$$scope={dirty:A,ctx:N}),u.$set(K);const R={};A&16&&(R.$$scope={dirty:A,ctx:N}),$.$set(R);const j={};A&16&&(j.$$scope={dirty:A,ctx:N}),E.$set(j)},i(N){M||(_(t.$$.fragment,N),_(o.$$.fragment,N),_(u.$$.fragment,N),_($.$$.fragment,N),_(E.$$.fragment,N),_(S.$$.fragment,N),M=!0)},o(N){d(t.$$.fragment,N),d(o.$$.fragment,N),d(u.$$.fragment,N),d($.$$.fragment,N),d(E.$$.fragment,N),d(S.$$.fragment,N),M=!1},d(N){N&&(m(e),m(a),m(f),m(O),m(I),m(P)),w(t),w(o),w(u),w($),w(E),w(S,N)}}}function za(r){let e,n,t;return n=new fe({props:{$$slots:{default:[Ha]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Ga(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function Ua(r){let e,n;return e=new se({props:{$$slots:{default:[Ga,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qa(r){let e,n,t,l;const o=[z(Be),{sourceLayer:Be},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ua]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ve({props:s});const u=[z(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ke({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),p(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ee(o,[f&0&&le(z(Be)),f&0&&{sourceLayer:Be},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ee(u,[f&0&&le(z(`${Be}-outline`)),f&0&&{sourceLayer:Be},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),w(e,a),w(t,a)}}}function Wa(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:Be,$$slots:{right:[za],default:[Da]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),q.push(()=>V(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${Be}.pmtiles`,$$slots:{default:[qa]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}let Be="local_planning_authorities";function Va(r,e,n){let t=re.local_planning_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Xa extends Y{constructor(e){super(),Q(this,e,Va,Wa,U,{})}}function Ya(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(l,o){v(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),w(e,l)}}}function Qa(r){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ja(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Qa]},$$scope:{ctx:r}}}),s=new Pe({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=L(),b(s.$$.fragment)},m(i,a){p(i,e,a),h(e,n),v(t,e,null),h(e,l),p(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),w(t),w(s,i)}}}function Ka(r){let e,n,t;return n=new fe({props:{$$slots:{default:[Ja]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Za(r){let e,n=r[3].Name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&B(t,n)},d(l){l&&m(e)}}}function xa(r){let e,n;return e=new se({props:{$$slots:{default:[Za,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ef(r){let e,n,t,l;const o=[z(He),{sourceLayer:He},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[xa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ve({props:s}),e.$on("click",nf);const u=[z(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ke({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),p(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ee(o,[f&0&&le(z(He)),f&0&&{sourceLayer:He},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ee(u,[f&0&&le(z(`${He}-outline`)),f&0&&{sourceLayer:He},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),w(e,a),w(t,a)}}}function tf(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:He,$$slots:{right:[Ka],default:[Ya]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),q.push(()=>V(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${He}.pmtiles`,$$slots:{default:[ef]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}let He="parliamentary_constituencies";function nf(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function rf(r,e,n){let t=re.parliamentary_constituencies,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class lf extends Y{constructor(e){super(),Q(this,e,rf,tf,U,{})}}function of(r){let e;return{c(){e=k("Pollution")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function sf(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function af(r){let e;return{c(){e=k(`Extrium
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ff(r){let e;return{c(){e=k(`FAQ
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function uf(r){let e,n,t,l,o,s,u,i,a,f,c,g,$,y,O,I;return t=new W({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[sf]},$$scope:{ctx:r}}}),f=new W({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[af]},$$scope:{ctx:r}}}),g=new W({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[ff]},$$scope:{ctx:r}}}),O=new Pe({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),l=k(`. The measurements are annual means, in units of
        gm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=L(),i=T("p"),a=k("The noise layer is from "),b(f.$$.fragment),c=k(", using 2017 data. See their "),b(g.$$.fragment),$=k("."),y=L(),b(O.$$.fragment)},m(C,E){p(C,e,E),h(e,n),v(t,e,null),h(e,l),h(e,o),h(e,s),p(C,u,E),p(C,i,E),h(i,a),v(f,i,null),h(i,c),v(g,i,null),h(i,$),p(C,y,E),v(O,C,E),I=!0},p(C,E){const F={};E&2048&&(F.$$scope={dirty:E,ctx:C}),t.$set(F);const P={};E&2048&&(P.$$scope={dirty:E,ctx:C}),f.$set(P);const S={};E&2048&&(S.$$scope={dirty:E,ctx:C}),g.$set(S)},i(C){I||(_(t.$$.fragment,C),_(f.$$.fragment,C),_(g.$$.fragment,C),_(O.$$.fragment,C),I=!0)},o(C){d(t.$$.fragment,C),d(f.$$.fragment,C),d(g.$$.fragment,C),d(O.$$.fragment,C),I=!1},d(C){C&&(m(e),m(u),m(i),m(y)),w(t),w(f),w(g),w(O,C)}}}function cf(r){let e,n,t;return n=new fe({props:{$$slots:{default:[uf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function pr(r){let e,n,t,l,o=r[3](r[0])+"",s,u,i,a,f,c,g,$,y,O,I,C,E;function F(A){r[7](A)}let P={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(P.value=r[0]),e=new Ct({props:P}),q.push(()=>V(e,"value",F));const S=[pf,$f],M=[];function N(A,D){return A[0]=="Noise"?0:1}return $=N(r),y=M[$]=S[$](r),{c(){b(e.$$.fragment),t=L(),l=T("p"),s=k(o),u=L(),i=T("div"),a=T("label"),f=k(`Opacity
      `),c=T("input"),g=L(),y.c(),O=Ie(),G(c,"type","range"),G(c,"min","0"),G(c,"max","100")},m(A,D){v(e,A,D),p(A,t,D),p(A,l,D),h(l,s),p(A,u,D),p(A,i,D),h(i,a),h(a,f),h(a,c),lt(c,r[2]),p(A,g,D),M[$].m(A,D),p(A,O,D),I=!0,C||(E=[at(c,"change",r[8]),at(c,"input",r[8])],C=!0)},p(A,D){const H={};!n&&D&1&&(n=!0,H.value=A[0],X(()=>n=!1)),e.$set(H),(!I||D&1)&&o!==(o=A[3](A[0])+"")&&B(s,o),D&4&&lt(c,A[2]);let K=$;$=N(A),$===K?M[$].p(A,D):(pe(),d(M[K],1,1,()=>{M[K]=null}),me(),y=M[$],y?y.p(A,D):(y=M[$]=S[$](A),y.c()),_(y,1),y.m(O.parentNode,O))},i(A){I||(_(e.$$.fragment,A),_(y),I=!0)},o(A){d(e.$$.fragment,A),d(y),I=!1},d(A){A&&(m(t),m(l),m(u),m(i),m(g),m(O)),w(e,A),M[$].d(A),C=!1,xr(E)}}}function $f(r){let e,n,t;return{c(){e=T("img"),Tn(e.src,n=r[5](r[0]))||G(e,"src",n),G(e,"width",150),G(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){p(l,e,o)},p(l,o){o&1&&!Tn(e.src,n=l[5](l[0]))&&G(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&G(e,"alt",t)},i:te,o:te,d(l){l&&m(e)}}}function pf(r){let e,n;return e=new Xe({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mf(r){let e,n;const t=[z("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Fl({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&6?ee(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function _f(r){let e,n,t,l,o,s;function u(f){r[6](f)}let i={id:"pollution",$$slots:{right:[cf],default:[of]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new oe({props:i}),q.push(()=>V(e,"checked",u));let a=r[1]&&pr(r);return o=new Jl({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[mf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],X(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&_(a,1)):(a=pr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(pe(),d(a,1,1,()=>{a=null}),me());const $={};c&1&&($.tiles=[f[4](f[0])]),c&2054&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),w(e,f),a&&a.d(f),w(o,f)}}}function gf(r,e,n){let t,l=!1,o=50,s="PM25_viridis";function u(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let O=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${O}`}function f(y){let O=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${O}`}function c(y){l=y,n(1,l)}function g(y){s=y,n(0,s)}function $(){o=Nt(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,l,o,i,a,f,c,g,$]}class df extends Y{constructor(e){super(),Q(this,e,gf,_f,U,{})}}function hf(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(l,o){v(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),w(e,l)}}}function bf(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function vf(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[bf]},$$scope:{ctx:r}}}),s=new Pe({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=L(),b(s.$$.fragment)},m(i,a){p(i,e,a),h(e,n),v(t,e,null),h(e,l),p(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),w(t),w(s,i)}}}function wf(r){let e,n,t;return n=new fe({props:{$$slots:{default:[vf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function kf(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function yf(r){let e,n;return e=new se({props:{$$slots:{default:[kf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Sf(r){let e,n,t,l;const o=[z(ze),{sourceLayer:ze},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[yf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Ve({props:s}),e.$on("click",Of);const u=[z(`${ze}-outline`),{sourceLayer:ze},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new ke({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),p(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ee(o,[f&0&&le(z(ze)),f&0&&{sourceLayer:ze},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ee(u,[f&0&&le(z(`${ze}-outline`)),f&0&&{sourceLayer:ze},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),w(e,a),w(t,a)}}}function Cf(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:ze,$$slots:{right:[wf],default:[hf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),q.push(()=>V(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${ze}.pmtiles`,$$slots:{default:[Sf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}let ze="wards";function Of(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Tf(r,e,n){let t=re.wards,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Af extends Y{constructor(e){super(),Q(this,e,Tf,Cf,U,{})}}function Lf(r){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function If(r){let e,n,t,l;return t=new W({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Lf]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){p(o,e,s),h(e,n),v(t,e,null),l=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&m(e),w(t)}}}class ot extends Y{constructor(e){super(),Q(this,e,null,If,U,{})}}function Pf(r){let e,n,t;return e=new Oe({props:{color:re.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(l,o){v(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),w(e,l)}}}function Mf(r){let e;return{c(){e=k(`GTFS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Nf(r){let e,n,t,l,o,s,u,i,a;return o=new W({props:{href:"https://gtfs.org",$$slots:{default:[Mf]},$$scope:{ctx:r}}}),i=new ot({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=T("p"),l=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=L(),b(i.$$.fragment)},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),h(t,l),v(o,t,null),h(t,s),p(f,u,c),v(i,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(_(o.$$.fragment,f),_(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(u)),w(o),w(i,f)}}}function Df(r){let e,n,t;return n=new fe({props:{$$slots:{default:[Nf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Ef(r){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ff(r){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function jf(r){let e;function n(o,s){return o[2].has_bus_lane?Ff:Ef}let t=n(r),l=t(r);return{c(){l.c(),e=Ie()},m(o,s){l.m(o,s),p(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function Rf(r){let e,n;return e=new se({props:{$$slots:{default:[jf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Bf(r){let e,n;const t=[z(mt),{sourceLayer:mt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],re.bus_route_with_lane,re.bus_route_without_lane],"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Rf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ee(t,[s&0&&le(z(mt)),s&0&&{sourceLayer:mt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Hf(r){let e,n,t,l,o;function s(i){r[1](i)}let u={id:mt,$$slots:{right:[Df],default:[Pf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),q.push(()=>V(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${mt}.pmtiles`,$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}let mt="bus_routes";function zf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Gf extends Y{constructor(e){super(),Q(this,e,zf,Hf,U,{})}}function mr(r){const e=Zf(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function _r(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function Uf(r){let e;return{c(){e=k("Cycle paths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function qf(r){let e,n,t,l,o,s,u,i;return u=new ot({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=L(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=L(),b(u.$$.fragment)},m(a,f){p(a,e,f),p(a,n,f),p(a,t,f),p(a,l,f),p(a,o,f),p(a,s,f),v(u,a,f),i=!0},p:te,i(a){i||(_(u.$$.fragment,a),i=!0)},o(a){d(u.$$.fragment,a),i=!1},d(a){a&&(m(e),m(n),m(t),m(l),m(o),m(s)),w(u,a)}}}function Wf(r){let e,n,t;return n=new fe({props:{$$slots:{default:[qf]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function gr(r){let e,n,t;return n=new xe({props:{$$slots:{default:[Xf]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Vf(r){let e,n,t=r[9]+"",l,o,s;return e=new Oe({props:{color:r[10]}}),{c(){b(e.$$.fragment),n=L(),l=k(t),o=L()},m(u,i){v(e,u,i),p(u,n,i),p(u,l,i),p(u,o,i),s=!0},p:te,i(u){s||(_(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(m(n),m(l),m(o)),w(e,u)}}}function dr(r){let e,n,t;function l(s){r[4](s,r[6])}let o={id:r[6],$$slots:{default:[Vf]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new oe({props:o}),q.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){r=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:r}),!n&&u&6&&(n=!0,i.checked=r[1][r[6]],X(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Xf(r){let e,n,t=qe(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=dr(_r(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Ie()},m(s,u){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,u);p(s,e,u),n=!0},p(s,u){if(u&6){t=qe(s[2]);let i;for(i=0;i<t.length;i+=1){const a=_r(s,t,i);l[i]?(l[i].p(a,u),_(l[i],1)):(l[i]=dr(a),l[i].c(),_(l[i],1),l[i].m(e.parentNode,e))}for(pe(),i=t.length;i<l.length;i+=1)o(i);me()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)_(l[u]);n=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)d(l[u]);n=!1},d(s){s&&m(e),Pt(l,s)}}}function Yf(r){mr(r);let e,n=r[6]+"",t,l,o,s,u,i=r[7]+"",a,f,c,g,$=r[8]+"",y;return{c(){e=T("h2"),t=k(n),l=L(),o=T("p"),s=k("Direction: "),u=T("b"),a=L(),f=T("p"),c=k("Width: "),g=T("b"),y=k($)},m(O,I){p(O,e,I),h(e,t),p(O,l,I),p(O,o,I),h(o,s),h(o,u),u.innerHTML=i,p(O,a,I),p(O,f,I),h(f,c),h(f,g),h(g,y)},p(O,I){mr(O),I&32&&n!==(n=O[6]+"")&&B(t,n),I&32&&i!==(i=O[7]+"")&&(u.innerHTML=i),I&32&&$!==($=O[8]+"")&&B(y,$)},d(O){O&&(m(e),m(l),m(o),m(a),m(f))}}}function Qf(r){let e,n;return e=new se({props:{$$slots:{default:[Yf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jf(r){let e,n;const t=[z(_t),{sourceLayer:_t},{paint:{"line-color":Xt(["get","kind"],{track:re.cycle_paths.track,lane:re.cycle_paths.lane,shared_use_segregated:re.cycle_paths.shared_use_segregated,shared_use_unsegregated:re.cycle_paths.shared_use_unsegregated},"red"),"line-width":Fe,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:hr(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Qf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),e.$on("click",xf),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ee(t,[s&0&&le(z(_t)),s&0&&{sourceLayer:_t},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:hr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Kf(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:_t,$$slots:{right:[Wf],default:[Uf]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),q.push(()=>V(e,"checked",u));let a=r[0]&&gr(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${_t}.pmtiles`,$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],X(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=gr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(pe(),d(a,1,1,()=>{a=null}),me());const $={};c&8195&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),w(e,f),a&&a.d(f),w(o,f)}}}let _t="cycle_paths";function Zf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function xf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function hr(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function eu(r,e,n){let t=[["track","Separated tracks",re.cycle_paths.track],["lane","Unprotected lanes",re.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",re.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",re.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){l=i,n(0,l)}function u(i,a){r.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[l,o,t,s,u]}class tu extends Y{constructor(e){super(),Q(this,e,eu,Kf,U,{})}}function nu(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(l,o){v(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),w(e,l)}}}function ru(r){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function lu(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[ru]},$$scope:{ctx:r}}}),s=new Pe({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),l=k(", as of September 2021."),o=L(),b(s.$$.fragment)},m(i,a){p(i,e,a),h(e,n),v(t,e,null),h(e,l),p(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),w(t),w(s,i)}}}function ou(r){let e,n,t;return n=new fe({props:{$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function su(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&B(t,n)},d(l){l&&m(e)}}}function iu(r){let e,n;return e=new se({props:{$$slots:{default:[su,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function au(r){let e,n;const t=[z(gt),{sourceLayer:gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[iu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ee(t,[s&0&&le(z(gt)),s&0&&{sourceLayer:gt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function fu(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:gt,$$slots:{right:[ou],default:[nu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),q.push(()=>V(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${gt}.pmtiles`,$$slots:{default:[au]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}let gt="mrn";function uu(r,e,n){let t=re.mrn,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class cu extends Y{constructor(e){super(),Q(this,e,uu,fu,U,{})}}function $u(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(l,o){v(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),w(e,l)}}}function pu(r){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function mu(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[pu]},$$scope:{ctx:r}}}),s=new Pe({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),l=k(", downloaded on 22/01/2024."),o=L(),b(s.$$.fragment)},m(i,a){p(i,e,a),h(e,n),v(t,e,null),h(e,l),p(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),w(t),w(s,i)}}}function _u(r){let e,n,t;return n=new fe({props:{$$slots:{default:[mu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function br(r){let e,n,t,l=r[3].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(l)},m(s,u){p(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].Desc_+"")&&B(o,l)},d(s){s&&m(e)}}}function vr(r){let e,n,t,l=r[3].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(l)},m(s,u){p(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].Greenway+"")&&B(o,l)},d(s){s&&m(e)}}}function wr(r){let e,n,t,l=r[3].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(l)},m(s,u){p(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].RouteType+"")&&B(o,l)},d(s){s&&m(e)}}}function kr(r){let e,n,t,l=r[3].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(l)},m(s,u){p(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].RouteNo+"")&&B(o,l)},d(s){s&&m(e)}}}function yr(r){let e,n,t,l=r[3].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(l)},m(s,u){p(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].RouteCat+"")&&B(o,l)},d(s){s&&m(e)}}}function Sr(r){let e,n,t,l=r[3].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(l)},m(s,u){p(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].OpenStatus+"")&&B(o,l)},d(s){s&&m(e)}}}function Cr(r){let e,n,t,l=r[3].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(l)},m(s,u){p(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].Surface+"")&&B(o,l)},d(s){s&&m(e)}}}function Or(r){let e,n,t,l=r[3].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(l)},m(s,u){p(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].Quality+"")&&B(o,l)},d(s){s&&m(e)}}}function Tr(r){let e,n,t,l=r[3].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(l)},m(s,u){p(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].RoadClass+"")&&B(o,l)},d(s){s&&m(e)}}}function gu(r){let e,n,t,l,o,s,u,i,a,f=r[3].Desc_&&br(r),c=r[3].Greenway&&vr(r),g=r[3].RouteType&&wr(r),$=r[3].RouteNo&&kr(r),y=r[3].RouteCat&&yr(r),O=r[3].OpenStatus&&Sr(r),I=r[3].Surface&&Cr(r),C=r[3].Quality&&Or(r),E=r[3].RoadClass&&Tr(r);return{c(){e=T("ul"),f&&f.c(),n=L(),c&&c.c(),t=L(),g&&g.c(),l=L(),$&&$.c(),o=L(),y&&y.c(),s=L(),O&&O.c(),u=L(),I&&I.c(),i=L(),C&&C.c(),a=L(),E&&E.c()},m(F,P){p(F,e,P),f&&f.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),g&&g.m(e,null),h(e,l),$&&$.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),O&&O.m(e,null),h(e,u),I&&I.m(e,null),h(e,i),C&&C.m(e,null),h(e,a),E&&E.m(e,null)},p(F,P){F[3].Desc_?f?f.p(F,P):(f=br(F),f.c(),f.m(e,n)):f&&(f.d(1),f=null),F[3].Greenway?c?c.p(F,P):(c=vr(F),c.c(),c.m(e,t)):c&&(c.d(1),c=null),F[3].RouteType?g?g.p(F,P):(g=wr(F),g.c(),g.m(e,l)):g&&(g.d(1),g=null),F[3].RouteNo?$?$.p(F,P):($=kr(F),$.c(),$.m(e,o)):$&&($.d(1),$=null),F[3].RouteCat?y?y.p(F,P):(y=yr(F),y.c(),y.m(e,s)):y&&(y.d(1),y=null),F[3].OpenStatus?O?O.p(F,P):(O=Sr(F),O.c(),O.m(e,u)):O&&(O.d(1),O=null),F[3].Surface?I?I.p(F,P):(I=Cr(F),I.c(),I.m(e,i)):I&&(I.d(1),I=null),F[3].Quality?C?C.p(F,P):(C=Or(F),C.c(),C.m(e,a)):C&&(C.d(1),C=null),F[3].RoadClass?E?E.p(F,P):(E=Tr(F),E.c(),E.m(e,null)):E&&(E.d(1),E=null)},d(F){F&&m(e),f&&f.d(),c&&c.d(),g&&g.d(),$&&$.d(),y&&y.d(),O&&O.d(),I&&I.d(),C&&C.d(),E&&E.d()}}}function du(r){let e,n;return e=new se({props:{$$slots:{default:[gu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function hu(r){let e,n;const t=[z(dt),{sourceLayer:dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[du]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ee(t,[s&0&&le(z(dt)),s&0&&{sourceLayer:dt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function bu(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:dt,$$slots:{right:[_u],default:[$u]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),q.push(()=>V(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${dt}.pmtiles`,$$slots:{default:[hu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}let dt="national_cycle_network";function vu(r,e,n){let t=re.national_cycle_network,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class wu extends Y{constructor(e){super(),Q(this,e,vu,bu,U,{})}}function ku(r){let e;return{c(){e=k("OS Pavement widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function yu(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Su(r){let e,n,t,l,o,s,u,i,a;return u=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[yu]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=L(),t=T("p"),t.textContent="Data valid as of 1 January, 2024",l=L(),o=T("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),p(f,l,c),p(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(_(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(l),m(o)),w(u)}}}function Cu(r){let e,n,t;return n=new fe({props:{$$slots:{default:[Su]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Ar(r){let e,n;return e=new Xe({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ou(r){let e,n,t,l=r[4].side+"",o,s,u,i,a,f=r[4].average+"",c,g,$,y,O,I,C=r[4].minimum+"",E,F;return{c(){e=T("p"),n=k("Side of the road: "),t=T("b"),o=k(l),s=L(),u=T("p"),i=k("Average width: "),a=T("b"),c=k(f),g=k(`
        meters`),$=L(),y=T("p"),O=k("Minimum width: "),I=T("b"),E=k(C),F=k(`
        meters`)},m(P,S){p(P,e,S),h(e,n),h(e,t),h(t,o),p(P,s,S),p(P,u,S),h(u,i),h(u,a),h(a,c),h(u,g),p(P,$,S),p(P,y,S),h(y,O),h(y,I),h(I,E),h(y,F)},p(P,S){S&16&&l!==(l=P[4].side+"")&&B(o,l),S&16&&f!==(f=P[4].average+"")&&B(c,f),S&16&&C!==(C=P[4].minimum+"")&&B(E,C)},d(P){P&&(m(e),m(s),m(u),m($),m(y))}}}function Tu(r){let e,n;return e=new se({props:{$$slots:{default:[Ou,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Au(r){let e,n;const t=[z(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],r[2],r[1]),"line-width":Fe,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Tu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ee(t,[s&0&&le(z(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Fe,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Lu(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:ht,$$slots:{right:[Cu],default:[ku]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),q.push(()=>V(e,"checked",u));let a=r[0]&&Ar(r);return o=new be({props:{url:`pmtiles://${Zt()}/v1/${ht}.pmtiles`,$$slots:{default:[Au]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],X(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=Ar(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(pe(),d(a,1,1,()=>{a=null}),me());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),w(e,f),a&&a.d(f),w(o,f)}}}let ht="pavement_widths";function Iu(r,e,n){let t=re.sequential_low_to_high,l=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class Pu extends Y{constructor(e){super(),Q(this,e,Iu,Lu,U,{})}}function Mu(r){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Nu(r){let e;return{c(){e=k("the PCT website")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Du(r){let e;return{c(){e=k("2017 journal article")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Eu(r){let e,n,t,l,o,s,u,i,a,f,c;return u=new W({props:{href:"https://www.pct.bike",$$slots:{default:[Nu]},$$scope:{ctx:r}}}),a=new W({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Du]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=L(),o=T("p"),s=k("See "),b(u.$$.fragment),i=k(" and "),b(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(g,$){p(g,e,$),p(g,n,$),p(g,t,$),p(g,l,$),p(g,o,$),h(o,s),v(u,o,null),h(o,i),v(a,o,null),h(o,f),c=!0},p(g,$){const y={};$&1024&&(y.$$scope={dirty:$,ctx:g}),u.$set(y);const O={};$&1024&&(O.$$scope={dirty:$,ctx:g}),a.$set(O)},i(g){c||(_(u.$$.fragment,g),_(a.$$.fragment,g),c=!0)},o(g){d(u.$$.fragment,g),d(a.$$.fragment,g),c=!1},d(g){g&&(m(e),m(n),m(t),m(l),m(o)),w(u),w(a)}}}function Fu(r){let e,n,t;return n=new fe({props:{$$slots:{default:[Eu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Lr(r){let e,n,t,l,o,s,u,i;e=new Xe({props:{colorScale:r[3],limits:r[4]}});function a($){r[7]($)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new el({props:f}),q.push(()=>V(t,"value",a));function c($){r[8]($)}let g={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(g.value=r[1]),s=new Ct({props:g}),q.push(()=>V(s,"value",c)),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),o=L(),b(s.$$.fragment)},m($,y){v(e,$,y),p($,n,y),v(t,$,y),p($,o,y),v(s,$,y),i=!0},p($,y){const O={};!l&&y&1&&(l=!0,O.value=$[0],X(()=>l=!1)),t.$set(O);const I={};!u&&y&2&&(u=!0,I.value=$[1],X(()=>u=!1)),s.$set(I)},i($){i||(_(e.$$.fragment,$),_(t.$$.fragment,$),_(s.$$.fragment,$),i=!0)},o($){d(e.$$.fragment,$),d(t.$$.fragment,$),d(s.$$.fragment,$),i=!1},d($){$&&(m(n),m(o)),w(e,$),w(t,$),w(s,$)}}}function ju(r){let e,n=r[5](r[9])+"",t;return{c(){e=new hn(!1),t=Ie(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Ru(r){let e,n;return e=new se({props:{$$slots:{default:[ju,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Bu(r){let e,n;const t=[z(Ge),{sourceLayer:Ge},{paint:{"line-color":we(["get",r[1]],r[4],r[3]),"line-width":Fe,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ge?"visible":"none"}}];let l={$$slots:{default:[Ru]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?ee(t,[s&0&&le(z(Ge)),s&0&&{sourceLayer:Ge},s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Fe,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==Ge?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Hu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new hn(!1),t=Ie(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function zu(r){let e,n;return e=new se({props:{$$slots:{default:[Hu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gu(r){let e,n;const t=[z(st),{sourceLayer:st},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",r[1]],r[4],r[3]),"line-width":Fe,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==st?"visible":"none"}}];let l={$$slots:{default:[zu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?ee(t,[s&0&&le(z(st)),s&0&&{sourceLayer:st},t[2],t[3],s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Fe,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==st?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Uu(r){let e,n,t,l,o,s,u,i;function a(g){r[6](g)}let f={id:Ge,$$slots:{right:[Fu],default:[Mu]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new oe({props:f}),q.push(()=>V(e,"checked",a));let c=r[2]&&Lr(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${Ge}.pmtiles`,$$slots:{default:[Bu]},$$scope:{ctx:r}}}),u=new be({props:{url:`pmtiles://${ge()}/v1/${st}.pmtiles`,$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),c&&c.c(),l=L(),b(o.$$.fragment),s=L(),b(u.$$.fragment)},m(g,$){v(e,g,$),p(g,t,$),c&&c.m(g,$),p(g,l,$),v(o,g,$),p(g,s,$),v(u,g,$),i=!0},p(g,[$]){const y={};$&1024&&(y.$$scope={dirty:$,ctx:g}),!n&&$&4&&(n=!0,y.checked=g[2],X(()=>n=!1)),e.$set(y),g[2]?c?(c.p(g,$),$&4&&_(c,1)):(c=Lr(g),c.c(),_(c,1),c.m(l.parentNode,l)):c&&(pe(),d(c,1,1,()=>{c=null}),me());const O={};$&1031&&(O.$$scope={dirty:$,ctx:g}),o.$set(O);const I={};$&1031&&(I.$$scope={dirty:$,ctx:g}),u.$set(I)},i(g){i||(_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(u.$$.fragment,g),i=!0)},o(g){d(e.$$.fragment,g),d(c),d(o.$$.fragment,g),d(u.$$.fragment,g),i=!1},d(g){g&&(m(t),m(l),m(s)),w(e,g),c&&c.d(g),w(o,g),w(u,g)}}}let Ge="pct_commute",st="pct_school";function qu(r,e,n){let t=re.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ge,s="baseline",u=!1;function i(g){let $=g.baseline,y=g.gov_target,O=g.go_dutch,I=`<h2>Trip purpose: ${o==Ge?"commuting":"school"}</h2>`;if(I+=`<p>Baseline (2011): <b>${$.toLocaleString()}</b></p>`,$==0)I+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,I+=`<p>Go Dutch: <b>${O.toLocaleString()}</b></p>`;else{let C=(y/$).toFixed(1),E=(O/$).toFixed(1);I+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${C}x</b> of baseline)</p>`,I+=`<p>Go Dutch: ${O.toLocaleString()} (<b>${E}x</b> of baseline)</p>`}return I}function a(g){u=g,n(2,u)}function f(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,u,t,l,i,a,f,c]}class Wu extends Y{constructor(e){super(),Q(this,e,qu,Uu,U,{})}}function Vu(r){let e;return{c(){e=k("OS Speeds")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Xu(r){let e;return{c(){e=k("Basemap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Yu(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qu(r){let e,n,t,l,o,s,u,i,a,f,c,g;return t=new W({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Xu]},$$scope:{ctx:r}}}),f=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),l=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",u=L(),i=T("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),c=k(".")},m($,y){p($,e,y),h(e,n),v(t,e,null),h(e,l),p($,o,y),p($,s,y),p($,u,y),p($,i,y),h(i,a),v(f,i,null),h(i,c),g=!0},p($,y){const O={};y&256&&(O.$$scope={dirty:y,ctx:$}),t.$set(O);const I={};y&256&&(I.$$scope={dirty:y,ctx:$}),f.$set(I)},i($){g||(_(t.$$.fragment,$),_(f.$$.fragment,$),g=!0)},o($){d(t.$$.fragment,$),d(f.$$.fragment,$),g=!1},d($){$&&(m(e),m(o),m(s),m(u),m(i)),w(t),w(f)}}}function Ju(r){let e,n,t;return n=new fe({props:{$$slots:{default:[Qu]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Ir(r){let e,n,t,l,o;e=new Xe({props:{colorScale:r[2],limits:r[3]}});function s(i){r[6](i)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new el({props:u}),q.push(()=>V(t,"value",s)),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(i,a){v(e,i,a),p(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};!l&&a&1&&(l=!0,f.value=i[0],X(()=>l=!1)),t.$set(f)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&m(n),w(e,i),w(t,i)}}}function Ku(r){let e,n,t=r[7].indicative_mph+"",l,o,s,u,i,a=r[7].highest_mph+"",f,c,g=r[4][r[7].highest_description]+"",$,y;return{c(){e=T("p"),n=k("Posted speed limit: "),l=k(t),o=k(" mph"),s=L(),u=T("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),$=k(g),y=k(")")},m(O,I){p(O,e,I),h(e,n),h(e,l),h(e,o),p(O,s,I),p(O,u,I),h(u,i),h(u,f),h(u,c),h(u,$),h(u,y)},p(O,I){I&128&&t!==(t=O[7].indicative_mph+"")&&B(l,t),I&128&&a!==(a=O[7].highest_mph+"")&&B(f,a),I&128&&g!==(g=O[4][O[7].highest_description]+"")&&B($,g)},d(O){O&&(m(e),m(s),m(u))}}}function Zu(r){let e,n;return e=new se({props:{$$slots:{default:[Ku,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xu(r){let e,n;const t=[z(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",r[0]],r[3],r[2]),"line-width":Fe,"line-opacity":Z(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[Zu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&15?ee(t,[s&0&&le(z(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&13&&{paint:{"line-color":we(["get",o[0]],o[3],o[2]),"line-width":Fe,"line-opacity":Z(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ec(r){let e,n,t,l,o,s;function u(f){r[5](f)}let i={id:bt,$$slots:{right:[Ju],default:[Vu]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new oe({props:i}),q.push(()=>V(e,"checked",u));let a=r[1]&&Ir(r);return o=new be({props:{url:`pmtiles://${Zt()}/v1/${bt}.pmtiles`,$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],X(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&_(a,1)):(a=Ir(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(pe(),d(a,1,1,()=>{a=null}),me());const $={};c&259&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),w(e,f),a&&a.d(f),w(o,f)}}}let bt="road_speeds";function tc(r,e,n){let t=re.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,l,u,i,a]}class nc extends Y{constructor(e){super(),Q(this,e,tc,ec,U,{})}}function rc(r){let e;return{c(){e=k("OS Road widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function lc(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function oc(r){let e,n,t,l,o,s,u,i,a;return u=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",l=L(),o=T("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),p(f,l,c),p(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(_(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(l),m(o)),w(u)}}}function sc(r){let e,n,t;return n=new fe({props:{$$slots:{default:[oc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Pr(r){let e,n;return e=new Xe({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ic(r){let e,n,t,l=r[4].average+"",o,s,u,i,a,f,c=r[4].minimum+"",g,$;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(l),s=k(`
        meters`),u=L(),i=T("p"),a=k("Minimum width: "),f=T("b"),g=k(c),$=k(`
        meters`)},m(y,O){p(y,e,O),h(e,n),h(e,t),h(t,o),h(e,s),p(y,u,O),p(y,i,O),h(i,a),h(i,f),h(f,g),h(i,$)},p(y,O){O&16&&l!==(l=y[4].average+"")&&B(o,l),O&16&&c!==(c=y[4].minimum+"")&&B(g,c)},d(y){y&&(m(e),m(u),m(i))}}}function ac(r){let e,n;return e=new se({props:{$$slots:{default:[ic,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function fc(r){let e,n;const t=[z(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],r[2],r[1]),"line-width":Fe,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[ac]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ee(t,[s&0&&le(z(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Fe,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function uc(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:vt,$$slots:{right:[sc],default:[rc]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),q.push(()=>V(e,"checked",u));let a=r[0]&&Pr(r);return o=new be({props:{url:`pmtiles://${Zt()}/v1/${vt}.pmtiles`,$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],X(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=Pr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(pe(),d(a,1,1,()=>{a=null}),me());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),w(e,f),a&&a.d(f),w(o,f)}}}let vt="road_widths";function cc(r,e,n){let t=re.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class $c extends Y{constructor(e){super(),Q(this,e,cc,uc,U,{})}}function pc(r){let e,n,t;return{c(){e=T("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(l,o){p(l,e,o),r[7](e),n||(t=at(e,"change",r[5]),n=!0)},p:te,d(l){l&&m(e),r[7](null),n=!1,t()}}}function Mr(r){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mc(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new Oe({props:{color:Lt}}),{c(){b(e.$$.fragment),n=k(`
        Show `),l=k(t),o=k(" issues")},m(u,i){v(e,u,i),p(u,n,i),p(u,l,i),p(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&B(l,t)},i(u){s||(_(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(m(n),m(l),m(o)),w(e,u)}}}function _c(r){let e,n,t;function l(s){r[8](s)}let o={id:"show-criticals",$$slots:{default:[mc]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new oe({props:o}),q.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function gc(r){let e,n,t,l,o,s;e=new Zr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[pc]},$$scope:{ctx:r}}}),t=new tl({props:{errorMessage:r[3]}});let u=r[2]>0&&Mr(r);return{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),u&&u.c(),o=Ie()},m(i,a){v(e,i,a),p(i,n,a),v(t,i,a),p(i,l,a),u&&u.m(i,a),p(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&_(u,1)):(u=Mr(i),u.c(),_(u,1),u.m(o.parentNode,o)):u&&(pe(),d(u,1,1,()=>{u=null}),me())},i(i){s||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(u),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(u),s=!1},d(i){i&&(m(n),m(l),m(o)),w(e,i),w(t,i),u&&u.d(i)}}}function dc(r){let e,n,t=r[10].critical_type+"",l,o,s,u,i,a=r[10].location_description+"",f,c,g,$,y,O=r[10].notes+"",I,C,E,F,P,S,M,N=r[10].id+"",A,D,H,K,R,j=(r[10].inspector??"???")+"",J,de,ie,ye=r[10].submission_time+"",Te,ve,Se,et,ue,ce=r[10].scheme_reference+"",_e,tt,Ye,je=r[10].current_design_stage+"",Qe;return{c(){e=T("div"),n=T("h2"),l=k(t),o=L(),s=T("p"),u=T("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=L(),g=T("p"),$=T("u"),$.textContent="Notes",y=k(`
          : `),I=k(O),C=L(),E=T("hr"),F=L(),P=T("p"),S=k("Critical issue ID: "),M=T("b"),A=k(N),D=L(),H=T("p"),K=k("Submitted by "),R=T("b"),J=k(j),de=k(`
          at
          `),ie=T("b"),Te=k(ye),ve=L(),Se=T("p"),et=k("For scheme "),ue=T("b"),_e=k(ce),tt=k(`
          in stage
          `),Ye=T("b"),Qe=k(je),Ce(e,"max-width","30vw")},m(ne,$e){p(ne,e,$e),h(e,n),h(n,l),h(e,o),h(e,s),h(s,u),h(s,i),h(s,f),h(e,c),h(e,g),h(g,$),h(g,y),h(g,I),h(e,C),h(e,E),h(e,F),h(e,P),h(P,S),h(P,M),h(M,A),h(e,D),h(e,H),h(H,K),h(H,R),h(R,J),h(H,de),h(H,ie),h(ie,Te),h(e,ve),h(e,Se),h(Se,et),h(Se,ue),h(ue,_e),h(Se,tt),h(Se,Ye),h(Ye,Qe)},p(ne,$e){$e&1024&&t!==(t=ne[10].critical_type+"")&&B(l,t),$e&1024&&a!==(a=ne[10].location_description+"")&&B(f,a),$e&1024&&O!==(O=ne[10].notes+"")&&B(I,O),$e&1024&&N!==(N=ne[10].id+"")&&B(A,N),$e&1024&&j!==(j=(ne[10].inspector??"???")+"")&&B(J,j),$e&1024&&ye!==(ye=ne[10].submission_time+"")&&B(Te,ye),$e&1024&&ce!==(ce=ne[10].scheme_reference+"")&&B(_e,ce),$e&1024&&je!==(je=ne[10].current_design_stage+"")&&B(Qe,je)},d(ne){ne&&m(e)}}}function hc(r){let e,n;return e=new se({props:{$$slots:{default:[dc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function bc(r){let e,n,t,l,o,s;const u=[z(`${rt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Lt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let $=0;$<u.length;$+=1)i=x(i,u[$]);e=new Ze({props:i}),e.$on("click",r[6]);const a=[z(`${rt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let $=0;$<a.length;$+=1)f=x(f,a[$]);t=new eo({props:f});const c=[z(`${rt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Lt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let g={$$slots:{default:[hc]},$$scope:{ctx:r}};for(let $=0;$<c.length;$+=1)g=x(g,c[$]);return o=new Ze({props:g}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment)},m($,y){v(e,$,y),p($,n,y),v(t,$,y),p($,l,y),v(o,$,y),s=!0},p($,y){const O=y&2?ee(u,[y&0&&le(z(`${rt}-clusters`)),u[1],y&0&&{paint:{"circle-color":Lt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:$[1]?"visible":"none"}},u[4]]):{};e.$set(O);const I=y&2?ee(a,[y&0&&le(z(`${rt}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:$[1]?"visible":"none"}}]):{};t.$set(I);const C=y&2?ee(c,[y&0&&le(z(`${rt}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":Lt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:$[1]?"visible":"none"}}]):{};y&2048&&(C.$$scope={dirty:y,ctx:$}),o.$set(C)},i($){s||(_(e.$$.fragment,$),_(t.$$.fragment,$),_(o.$$.fragment,$),s=!0)},o($){d(e.$$.fragment,$),d(t.$$.fragment,$),d(o.$$.fragment,$),s=!1},d($){$&&(m(n),m(l)),w(e,$),w(t,$),w(o,$)}}}function vc(r){let e,n,t,l;return e=new De({props:{label:"Critical Issues",$$slots:{default:[gc]},$$scope:{ctx:r}}}),t=new Tt({props:{id:rt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),p(o,n,s),v(t,o,s),l=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),w(e,o),w(t,o)}}}let rt="criticals",Lt="red";function wc(r,e,n){let t;he(r,gn,$=>n(9,t=$));let l,o=!0,s=0,u="",i=Cl();async function a($){try{n(4,i=await ci(l.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f($){t.getSource(rt).getClusterExpansionZoom($.detail.features[0].properties.cluster_id,(y,O)=>{y||t.easeTo({center:$.detail.features[0].geometry.coordinates,zoom:O})})}function c($){q[$?"unshift":"push"](()=>{l=$,n(0,l)})}function g($){o=$,n(1,o)}return[l,o,s,u,i,a,f,c,g]}class kc extends Y{constructor(e){super(),Q(this,e,wc,vc,U,{})}}function yc(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Crossings`)},m(l,o){v(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),w(e,l)}}}function Sc(r){let e;return{c(){e=k("crossing")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Cc(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Sc]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),b(s.$$.fragment)},m(i,a){p(i,e,a),h(e,n),v(t,e,null),h(e,l),p(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),w(t),w(s,i)}}}function Oc(r){let e,n,t;return n=new fe({props:{$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Tc(r){let e,n=Nr(r[3])+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=Nr(l[3])+"")&&B(t,n)},d(l){l&&m(e)}}}function Ac(r){let e,n;return e=new se({props:{$$slots:{default:[Tc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Lc(r){let e,n;const t=[z(wt),{sourceLayer:wt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Ac]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ze({props:l}),e.$on("click",Pc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ee(t,[s&0&&le(z(wt)),s&0&&{sourceLayer:wt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Ic(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:wt,$$slots:{right:[Oc],default:[yc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),q.push(()=>V(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${wt}.pmtiles`,$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}let wt="crossings";function Nr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Pc(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Mc(r,e,n){let t=re.crossings,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Nc extends Y{constructor(e){super(),Q(this,e,Mc,Ic,U,{})}}function Dc(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Cycle parking`)},m(l,o){v(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),w(e,l)}}}function Ec(r){let e;return{c(){e=k("OpenStreetMap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Fc(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Ec]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=T("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),l=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),b(s.$$.fragment)},m(i,a){p(i,e,a),h(e,n),v(t,e,null),h(e,l),p(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),w(t),w(s,i)}}}function jc(r){let e,n,t;return n=new fe({props:{$$slots:{default:[Fc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Rc(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(l)},m(s,u){p(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=(s[3].capacity??"unknown")+"")&&B(o,l)},d(s){s&&m(e)}}}function Bc(r){let e,n;return e=new se({props:{$$slots:{default:[Rc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hc(r){let e,n;const t=[z(kt),{sourceLayer:kt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Bc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ze({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ee(t,[s&0&&le(z(kt)),s&0&&{sourceLayer:kt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function zc(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:kt,$$slots:{right:[jc],default:[Dc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),q.push(()=>V(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${kt}.pmtiles`,$$slots:{default:[Hc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}let kt="cycle_parking";function Gc(r,e,n){let t=re.cycle_parking,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Uc extends Y{constructor(e){super(),Q(this,e,Gc,zc,U,{})}}function qc(r){let e,n,t,l;return e=new Oe({props:{color:r[4]}}),{c(){b(e.$$.fragment),n=L(),t=k(r[2])},m(o,s){v(e,o,s),p(o,n,s),p(o,t,s),l=!0},p(o,s){(!l||s&4)&&B(t,o[2])},i(o){l||(_(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(m(n),m(t)),w(e,o)}}}function Wc(r){let e;const n=r[5].default,t=jt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Rt(t,n,l,l[7],e?Ht(n,l[7],o,null):Bt(l[7]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Vc(r){let e,n,t;return n=new fe({props:{$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Xc(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),h(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&B(t,n)},d(l){l&&m(e)}}}function Yc(r){let e,n;return e=new se({props:{$$slots:{default:[Xc,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qc(r){let e,n;const t=[z(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Z(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Yc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ve({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&25?ee(t,[s&1&&le(z(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Z(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Jc(r){let e,n,t,l,o;function s(i){r[6](i)}let u={id:r[0],$$slots:{right:[Vc],default:[qc]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new oe({props:u}),q.push(()=>V(e,"checked",s)),l=new be({props:{url:`pmtiles://${ge()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Qc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&1&&(f.id=i[0]),a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],X(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${ge()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}function Kc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=re[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,s,u,a,i,t,f,l]}class vn extends Y{constructor(e){super(),Q(this,e,Kc,Jc,U,{name:0,singularNoun:1,pluralNoun:2})}}function Zc(r){let e;return{c(){e=k("hospital")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xc(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Zc]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),b(s.$$.fragment)},m(i,a){p(i,e,a),h(e,n),v(t,e,null),h(e,l),p(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),w(t),w(s,i)}}}function e$(r){let e,n;return e=new vn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[xc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class t$ extends Y{constructor(e){super(),Q(this,e,null,e$,U,{})}}function n$(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Railway Stations`)},m(l,o){v(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),w(e,l)}}}function r$(r){let e;return{c(){e=k("railway station")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function l$(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[r$]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),b(s.$$.fragment)},m(i,a){p(i,e,a),h(e,n),v(t,e,null),h(e,l),p(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),w(t),w(s,i)}}}function o$(r){let e,n,t;return n=new fe({props:{$$slots:{default:[l$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function s$(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&B(t,n)},d(l){l&&m(e)}}}function i$(r){let e,n;return e=new se({props:{$$slots:{default:[s$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function a$(r){let e,n;const t=[z(Jt),{paint:{"circle-color":r[1],"circle-radius":Yt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[i$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ze({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ee(t,[s&0&&le(z(Jt)),s&2&&{paint:{"circle-color":o[1],"circle-radius":Yt/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function f$(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:Jt,$$slots:{right:[o$],default:[n$]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),q.push(()=>V(e,"checked",s)),l=new Tt({props:{data:`${ge()}/v1/${Jt}.geojson`,$$slots:{default:[a$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}let Jt="railway_stations";function u$(r,e,n){let t=re.railway_stations,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class c$ extends Y{constructor(e){super(),Q(this,e,u$,f$,U,{})}}function $$(r){let e;return{c(){e=k("primary and secondary schools")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function p$(r){let e,n,t,l,o,s,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[$$]},$$scope:{ctx:r}}}),s=new ot({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=L(),b(s.$$.fragment)},m(i,a){p(i,e,a),h(e,n),v(t,e,null),h(e,l),p(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),w(t),w(s,i)}}}function m$(r){let e,n;return e=new vn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[p$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class _$ extends Y{constructor(e){super(),Q(this,e,null,m$,U,{})}}function g$(r){let e;return{c(){e=k("sports pitches")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function d$(r){let e;return{c(){e=k("sports centres")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function h$(r){let e,n,t,l,o,s,u,i,a;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[g$]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[d$]},$$scope:{ctx:r}}}),i=new ot({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),l=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=L(),b(i.$$.fragment)},m(f,c){p(f,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),p(f,u,c),v(i,f,c),a=!0},p(f,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const $={};c&1&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),w(t),w(o),w(i,f)}}}function b$(r){let e,n;return e=new vn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[h$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class v$ extends Y{constructor(e){super(),Q(this,e,null,b$,U,{})}}function w$(r){let e;return{c(){e=k("Stats19")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function k$(r){let e;return{c(){e=k("DfT stats19")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function y$(r){let e;return{c(){e=k("documented by DfT")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function S$(r){let e,n,t,l,o,s,u,i,a,f,c,g,$,y,O,I,C,E,F,P,S,M,N;return t=new W({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[k$]},$$scope:{ctx:r}}}),C=new W({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[y$]},$$scope:{ctx:r}}}),M=new Pe({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),l=k(" dataset. Please note these limitations:"),o=L(),s=T("ul"),u=T("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=L(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=L(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=L(),$=T("li"),$.textContent='The "pedestrians" category also include mobility scooters',y=L(),O=T("li"),I=k("All limitations "),b(C.$$.fragment),E=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),F=L(),P=T("p"),P.textContent="You can click a point to open the full report, thanks to CycleStreets.",S=L(),b(M.$$.fragment)},m(A,D){p(A,e,D),h(e,n),v(t,e,null),h(e,l),p(A,o,D),p(A,s,D),h(s,u),h(s,i),h(s,a),h(s,f),h(s,c),h(s,g),h(s,$),h(s,y),h(s,O),h(O,I),v(C,O,null),h(O,E),p(A,F,D),p(A,P,D),p(A,S,D),v(M,A,D),N=!0},p(A,D){const H={};D&16777216&&(H.$$scope={dirty:D,ctx:A}),t.$set(H);const K={};D&16777216&&(K.$$scope={dirty:D,ctx:A}),C.$set(K)},i(A){N||(_(t.$$.fragment,A),_(C.$$.fragment,A),_(M.$$.fragment,A),N=!0)},o(A){d(t.$$.fragment,A),d(C.$$.fragment,A),d(M.$$.fragment,A),N=!1},d(A){A&&(m(e),m(o),m(s),m(F),m(P),m(S)),w(t),w(C),w(M,A)}}}function C$(r){let e,n,t;return n=new fe({props:{$$slots:{default:[S$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Dr(r){let e,n,t,l,o,s,u,i,a,f,c,g,$;return n=new xe({props:{small:!0,$$slots:{default:[I$]},$$scope:{ctx:r}}}),f=new nl({props:{rows:r[14]}}),{c(){e=T("div"),b(n.$$.fragment),t=L(),l=T("div"),o=k(`Filter years:
      `),s=T("input"),u=k(`
      -
      `),i=T("input"),a=L(),b(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(y,O){p(y,e,O),v(n,e,null),h(e,t),h(e,l),h(l,o),h(l,s),lt(s,r[4]),h(l,u),h(l,i),lt(i,r[5]),h(e,a),v(f,e,null),c=!0,g||($=[at(s,"input",r[20]),at(i,"input",r[21])],g=!0)},p(y,O){const I={};O&16777231&&(I.$$scope={dirty:O,ctx:y}),n.$set(I),O&16&&Nt(s.value)!==y[4]&&lt(s,y[4]),O&32&&Nt(i.value)!==y[5]&&lt(i,y[5])},i(y){c||(_(n.$$.fragment,y),_(f.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(f.$$.fragment,y),c=!1},d(y){y&&m(e),w(n),w(f),g=!1,xr($)}}}function O$(r){let e;return{c(){e=k("Pedestrians")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function T$(r){let e;return{c(){e=k("Cyclists")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function A$(r){let e;return{c(){e=k("Horse riders")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function L$(r){let e;return{c(){e=k("Other")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function I$(r){let e,n,t,l,o,s,u,i,a,f,c,g;function $(S){r[16](S)}let y={id:"stats19-pedestrians",$$slots:{default:[O$]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new oe({props:y}),q.push(()=>V(e,"checked",$));function O(S){r[17](S)}let I={id:"stats19-cyclists",$$slots:{default:[T$]},$$scope:{ctx:r}};r[1]!==void 0&&(I.checked=r[1]),l=new oe({props:I}),q.push(()=>V(l,"checked",O));function C(S){r[18](S)}let E={id:"stats19-horse-riders",$$slots:{default:[A$]},$$scope:{ctx:r}};r[2]!==void 0&&(E.checked=r[2]),u=new oe({props:E}),q.push(()=>V(u,"checked",C));function F(S){r[19](S)}let P={id:"stats19-other",$$slots:{default:[L$]},$$scope:{ctx:r}};return r[3]!==void 0&&(P.checked=r[3]),f=new oe({props:P}),q.push(()=>V(f,"checked",F)),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment),s=L(),b(u.$$.fragment),a=L(),b(f.$$.fragment)},m(S,M){v(e,S,M),p(S,t,M),v(l,S,M),p(S,s,M),v(u,S,M),p(S,a,M),v(f,S,M),g=!0},p(S,M){const N={};M&16777216&&(N.$$scope={dirty:M,ctx:S}),!n&&M&1&&(n=!0,N.checked=S[0],X(()=>n=!1)),e.$set(N);const A={};M&16777216&&(A.$$scope={dirty:M,ctx:S}),!o&&M&2&&(o=!0,A.checked=S[1],X(()=>o=!1)),l.$set(A);const D={};M&16777216&&(D.$$scope={dirty:M,ctx:S}),!i&&M&4&&(i=!0,D.checked=S[2],X(()=>i=!1)),u.$set(D);const H={};M&16777216&&(H.$$scope={dirty:M,ctx:S}),!c&&M&8&&(c=!0,H.checked=S[3],X(()=>c=!1)),f.$set(H)},i(S){g||(_(e.$$.fragment,S),_(l.$$.fragment,S),_(u.$$.fragment,S),_(f.$$.fragment,S),g=!0)},o(S){d(e.$$.fragment,S),d(l.$$.fragment,S),d(u.$$.fragment,S),d(f.$$.fragment,S),g=!1},d(S){S&&(m(t),m(s),m(a)),w(e,S),w(l,S),w(u,S),w(f,S)}}}function Er(r){let e,n,t,l=r[8][r[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(l)},m(s,u){p(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&l!==(l=s[8][s[23].pedestrian_location]+"")&&B(o,l)},d(s){s&&m(e)}}}function Fr(r){let e,n,t,l=r[9][r[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(l)},m(s,u){p(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&l!==(l=s[9][s[23].pedestrian_movement]+"")&&B(o,l)},d(s){s&&m(e)}}}function P$(r){let e,n,t,l=r[23].year+"",o,s,u,i,a,f=r[10][r[23].severity]+"",c,g,$,y,O,I=jr(r[23])+"",C,E,F,P,S,M=r[23].pedestrian_location&&Er(r),N=r[23].pedestrian_movement&&Fr(r);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(l),s=L(),u=T("p"),i=k("Severity: "),a=T("b"),c=k(f),g=L(),$=T("p"),y=k("Casualties: "),O=T("b"),C=k(I),E=L(),M&&M.c(),F=L(),N&&N.c(),P=L(),S=T("p"),S.textContent="Click to open full report in CycleStreets"},m(A,D){p(A,e,D),h(e,n),h(e,t),h(t,o),p(A,s,D),p(A,u,D),h(u,i),h(u,a),h(a,c),p(A,g,D),p(A,$,D),h($,y),h($,O),h(O,C),p(A,E,D),M&&M.m(A,D),p(A,F,D),N&&N.m(A,D),p(A,P,D),p(A,S,D)},p(A,D){D&8388608&&l!==(l=A[23].year+"")&&B(o,l),D&8388608&&f!==(f=A[10][A[23].severity]+"")&&B(c,f),D&8388608&&I!==(I=jr(A[23])+"")&&B(C,I),A[23].pedestrian_location?M?M.p(A,D):(M=Er(A),M.c(),M.m(F.parentNode,F)):M&&(M.d(1),M=null),A[23].pedestrian_movement?N?N.p(A,D):(N=Fr(A),N.c(),N.m(P.parentNode,P)):N&&(N.d(1),N=null)},d(A){A&&(m(e),m(s),m(u),m(g),m($),m(E),m(F),m(P),m(S)),M&&M.d(A),N&&N.d(A)}}}function M$(r){let e,n;return e=new se({props:{$$slots:{default:[P$,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&25165824&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function N$(r){let e,n;const t=[z(yt),{sourceLayer:yt},{paint:{"circle-color":we(["get","severity"],[1,2,3],[r[11],r[12],r[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[7]},{layout:{visibility:r[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[M$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ze({props:l}),e.$on("click",E$),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&14528?ee(t,[s&0&&le(z(yt)),s&0&&{sourceLayer:yt},s&14336&&{paint:{"circle-color":we(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function D$(r){let e,n,t,l,o,s;function u(f){r[15](f)}let i={id:yt,$$slots:{right:[C$],default:[w$]},$$scope:{ctx:r}};r[6]!==void 0&&(i.checked=r[6]),e=new oe({props:i}),q.push(()=>V(e,"checked",u));let a=r[6]&&Dr(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${yt}.pmtiles`,$$slots:{default:[N$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,g.checked=f[6],X(()=>n=!1)),e.$set(g),f[6]?a?(a.p(f,c),c&64&&_(a,1)):(a=Dr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(pe(),d(a,1,1,()=>{a=null}),me());const $={};c&16777408&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),w(e,f),a&&a.d(f),w(o,f)}}}let yt="stats19";function jr(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function E$(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function F$(r,e,n){let t,l=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(H,K,R,j,J,de){let ie=["any"];return o&&ie.push(["get","pedestrian"]),s&&ie.push(["get","cyclist"]),u&&ie.push(["get","horse_rider"]),i&&ie.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],ie]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},$={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},O=re.sequential_low_to_high[4],I=re.sequential_low_to_high[2],C=re.sequential_low_to_high[0],E=[["Fatal",O],["Serious",I],["Slight",C]];function F(H){l=H,n(6,l)}function P(H){o=H,n(0,o)}function S(H){s=H,n(1,s)}function M(H){u=H,n(2,u)}function N(H){i=H,n(3,i)}function A(){a=Nt(this.value),n(4,a)}function D(){f=Nt(this.value),n(5,f)}return r.$$.update=()=>{r.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,l,t,g,$,y,O,I,C,E,F,P,S,M,N,A,D]}class j$ extends Y{constructor(e){super(),Q(this,e,F$,D$,U,{})}}function R$(r){let e;return{c(){e=k("Vehicle counts")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function B$(r){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function H$(r){let e;return{c(){e=k("methodology")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function z$(r){let e,n,t,l,o,s,u,i,a,f,c;return t=new W({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[B$]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[H$]},$$scope:{ctx:r}}}),f=new Pe({}),{c(){e=T("p"),n=k("2022 AADF (annual average daily flow) data from "),b(t.$$.fragment),l=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=L(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=L(),b(f.$$.fragment)},m(g,$){p(g,e,$),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),p(g,u,$),p(g,i,$),p(g,a,$),v(f,g,$),c=!0},p(g,$){const y={};$&64&&(y.$$scope={dirty:$,ctx:g}),t.$set(y);const O={};$&64&&(O.$$scope={dirty:$,ctx:g}),o.$set(O)},i(g){c||(_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),c=!0)},o(g){d(t.$$.fragment,g),d(o.$$.fragment,g),d(f.$$.fragment,g),c=!1},d(g){g&&(m(e),m(u),m(i),m(a)),w(t),w(o),w(f,g)}}}function G$(r){let e,n,t;return n=new fe({props:{$$slots:{default:[z$]},$$scope:{ctx:r}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function Rr(r){let e,n;return e=new Xe({props:{colorScale:r[1],limits:r[3]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function U$(r){let e,n=r[5].location+"",t,l,o,s,u,i=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,g,$,y=r[5].pedal_cycles_2022.toLocaleString()+"",O,I,C,E,F,P=r[5].method+"",S;return{c(){e=T("h2"),t=k(n),l=L(),o=T("p"),s=k("Total motor vehicles (2022 AADF): "),u=T("b"),a=k(i),f=L(),c=T("p"),g=k("Total pedal cycles (2022 AADF): "),$=T("b"),O=k(y),I=L(),C=T("p"),E=k("Count method: "),F=T("b"),S=k(P)},m(M,N){p(M,e,N),h(e,t),p(M,l,N),p(M,o,N),h(o,s),h(o,u),h(u,a),p(M,f,N),p(M,c,N),h(c,g),h(c,$),h($,O),p(M,I,N),p(M,C,N),h(C,E),h(C,F),h(F,S)},p(M,N){N&32&&n!==(n=M[5].location+"")&&B(t,n),N&32&&i!==(i=M[5].motor_vehicles_2022.toLocaleString()+"")&&B(a,i),N&32&&y!==(y=M[5].pedal_cycles_2022.toLocaleString()+"")&&B(O,y),N&32&&P!==(P=M[5].method+"")&&B(S,P)},d(M){M&&(m(e),m(l),m(o),m(f),m(c),m(I),m(C))}}}function q$(r){let e,n;return e=new se({props:{$$slots:{default:[U$,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function W$(r){let e,n;const t=[z(St),{sourceLayer:St},{paint:{"circle-color":we(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[q$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ze({props:l}),e.$on("click",X$),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ee(t,[s&0&&le(z(St)),s&0&&{sourceLayer:St},s&6&&{paint:{"circle-color":we(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function V$(r){let e,n,t,l,o,s;function u(f){r[4](f)}let i={id:St,$$slots:{right:[G$],default:[R$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new oe({props:i}),q.push(()=>V(e,"checked",u));let a=r[0]&&Rr(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${St}.pmtiles`,$$slots:{default:[W$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],X(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=Rr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(pe(),d(a,1,1,()=>{a=null}),me());const $={};c&65&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),w(e,f),a&&a.d(f),w(o,f)}}}let St="vehicle_counts";function X$(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Y$(r,e,n){let t=re.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,l,o,u]}class Q$ extends Y{constructor(e){super(),Q(this,e,Y$,V$,U,{})}}function J$(r){let e,n,t,l,o,s,u,i;return e=new _$({}),t=new t$({}),o=new v$({}),u=new c$({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(u.$$.fragment)},m(a,f){v(e,a,f),p(a,n,f),v(t,a,f),p(a,l,f),v(o,a,f),p(a,s,f),v(u,a,f),i=!0},i(a){i||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),i=!1},d(a){a&&(m(n),m(l),m(s)),w(e,a),w(t,a),w(o,a),w(u,a)}}}function K$(r){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[J$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Z$(r){let e,n,t,l,o,s,u,i,a,f,c,g;return e=new tu({}),t=new wu({}),o=new cu({}),u=new Gf({}),a=new Uc({}),c=new Nc({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(u.$$.fragment),i=L(),b(a.$$.fragment),f=L(),b(c.$$.fragment)},m($,y){v(e,$,y),p($,n,y),v(t,$,y),p($,l,y),v(o,$,y),p($,s,y),v(u,$,y),p($,i,y),v(a,$,y),p($,f,y),v(c,$,y),g=!0},i($){g||(_(e.$$.fragment,$),_(t.$$.fragment,$),_(o.$$.fragment,$),_(u.$$.fragment,$),_(a.$$.fragment,$),_(c.$$.fragment,$),g=!0)},o($){d(e.$$.fragment,$),d(t.$$.fragment,$),d(o.$$.fragment,$),d(u.$$.fragment,$),d(a.$$.fragment,$),d(c.$$.fragment,$),g=!1},d($){$&&(m(n),m(l),m(s),m(i),m(f)),w(e,$),w(t,$),w(o,$),w(u,$),w(a,$),w(c,$)}}}function x$(r){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[Z$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ep(r){let e,n,t,l,o,s,u,i,a,f;return e=new lf({}),t=new Af({}),o=new ca({}),u=new Na({}),a=new Xa({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(u.$$.fragment),i=L(),b(a.$$.fragment)},m(c,g){v(e,c,g),p(c,n,g),v(t,c,g),p(c,l,g),v(o,c,g),p(c,s,g),v(u,c,g),p(c,i,g),v(a,c,g),f=!0},i(c){f||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(s),m(i)),w(e,c),w(t,c),w(o,c),w(u,c),w(a,c)}}}function tp(r){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[ep]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function np(r){let e,n,t,l;return e=new ea({}),t=new ka({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),p(o,n,s),v(t,o,s),l=!0},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),w(e,o),w(t,o)}}}function rp(r){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[np]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function lp(r){let e,n,t,l,o,s;return e=new $c({}),t=new Pu({}),o=new nc({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment)},m(u,i){v(e,u,i),p(u,n,i),v(t,u,i),p(u,l,i),v(o,u,i),s=!0},i(u){s||(_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(m(n),m(l)),w(e,u),w(t,u),w(o,u)}}}function op(r){let e,n,t,l,o,s,u=_n()=="Private (development)",i,a,f;e=new Q$({}),t=new j$({}),o=new Wu({});let c=u&&lp();return a=new df({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),c&&c.c(),i=L(),b(a.$$.fragment)},m(g,$){v(e,g,$),p(g,n,$),v(t,g,$),p(g,l,$),v(o,g,$),p(g,s,$),c&&c.m(g,$),p(g,i,$),v(a,g,$),f=!0},p:te,i(g){f||(_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),_(c),_(a.$$.fragment,g),f=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),d(c),d(a.$$.fragment,g),f=!1},d(g){g&&(m(n),m(l),m(s),m(i)),w(e,g),w(t,g),w(o,g),c&&c.d(g),w(a,g)}}}function sp(r){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[op]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ip(r){let e,n,t,l,o;function s(i){r[3](i)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new Ml({props:u}),q.push(()=>V(e,"enabled",s)),l=new Rl({}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),p(i,t,a),v(l,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],X(()=>n=!1)),e.$set(f)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&m(t),w(e,i),w(l,i)}}}function ap(r){let e,n,t,l,o,s,u,i,a,f,c,g,$,y,O,I;return e=new kc({}),t=new De({props:{label:"Trip generators",$$slots:{default:[K$]},$$scope:{ctx:r}}}),o=new De({props:{label:"Existing infrastructure",$$slots:{default:[x$]},$$scope:{ctx:r}}}),u=new De({props:{label:"Boundaries",$$slots:{default:[tp]},$$scope:{ctx:r}}}),a=new De({props:{label:"Census",$$slots:{default:[rp]},$$scope:{ctx:r}}}),c=new De({props:{label:"Other",$$slots:{default:[sp]},$$scope:{ctx:r}}}),$=new De({props:{label:"Tools",$$slots:{default:[ip]},$$scope:{ctx:r}}}),O=new Pl({props:{disabled:!r[1]}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(u.$$.fragment),i=L(),b(a.$$.fragment),f=L(),b(c.$$.fragment),g=L(),b($.$$.fragment),y=L(),b(O.$$.fragment)},m(C,E){v(e,C,E),p(C,n,E),v(t,C,E),p(C,l,E),v(o,C,E),p(C,s,E),v(u,C,E),p(C,i,E),v(a,C,E),p(C,f,E),v(c,C,E),p(C,g,E),v($,C,E),p(C,y,E),v(O,C,E),I=!0},p(C,E){const F={};E&16&&(F.$$scope={dirty:E,ctx:C}),t.$set(F);const P={};E&16&&(P.$$scope={dirty:E,ctx:C}),o.$set(P);const S={};E&16&&(S.$$scope={dirty:E,ctx:C}),u.$set(S);const M={};E&16&&(M.$$scope={dirty:E,ctx:C}),a.$set(M);const N={};E&16&&(N.$$scope={dirty:E,ctx:C}),c.$set(N);const A={};E&17&&(A.$$scope={dirty:E,ctx:C}),$.$set(A);const D={};E&2&&(D.disabled=!C[1]),O.$set(D)},i(C){I||(_(e.$$.fragment,C),_(t.$$.fragment,C),_(o.$$.fragment,C),_(u.$$.fragment,C),_(a.$$.fragment,C),_(c.$$.fragment,C),_($.$$.fragment,C),_(O.$$.fragment,C),I=!0)},o(C){d(e.$$.fragment,C),d(t.$$.fragment,C),d(o.$$.fragment,C),d(u.$$.fragment,C),d(a.$$.fragment,C),d(c.$$.fragment,C),d($.$$.fragment,C),d(O.$$.fragment,C),I=!1},d(C){C&&(m(n),m(l),m(s),m(i),m(f),m(g),m(y)),w(e,C),w(t,C),w(o,C),w(u,C),w(a,C),w(c,C),w($,C),w(O,C)}}}function fp(r){let e,n;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ve({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&2?ee(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function up(r){let e,n,t,l;return e=new De({props:{label:"Layers",open:!0,$$slots:{default:[ap]},$$scope:{ctx:r}}}),t=new Tt({props:{data:r[2],$$slots:{default:[fp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),p(o,n,s),v(t,o,s),l=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),w(e,o),w(t,o)}}}function cp(r,e,n){let t,l;he(r,tr,u=>n(1,l=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&tr.set(!t)},[t,l,o,s]}class $p extends Y{constructor(e){super(),Q(this,e,cp,up,U,{})}}function pp(r,e,n){let{loadFile:t}=e;return dn(async()=>{let o=await(await fetch(`${Zt()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class mp extends Y{constructor(e){super(),Q(this,e,pp,null,U,{loadFile:0})}}function Br(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=T("p"),n=k("Current milestone: "),l=k(t)},m(s,u){p(s,e,u),h(e,n),h(e,l)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&B(l,t)},d(s){s&&m(e)}}}function _p(r){let e;return{c(){e=k("Show on map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function gp(r){let e;return{c(){e=k("Edit scheme locally")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function dp(r){let e,n,t,l;return e=new sn({props:{$$slots:{default:[_p]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new sn({props:{$$slots:{default:[gp]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),p(o,n,s),v(t,o,s),l=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),w(e,o),w(t,o)}}}function hp(r){var D,H,K,R;let e,n,t=r[0].scheme_reference+"",l,o,s,u,i=((D=r[0].browse)==null?void 0:D.authority_or_region)+"",a,f,c,g,$=((H=r[0].browse)==null?void 0:H.capital_scheme_id)+"",y,O,I,C,E=((K=r[0].browse)==null?void 0:K.funding_programme)+"",F,P,S,M,N,A=((R=r[0].browse)==null?void 0:R.current_milestone)&&Br(r);return M=new Nl({props:{$$slots:{default:[dp]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("Scheme reference: "),l=k(t),o=L(),s=T("p"),u=k("Authority or region: "),a=k(i),f=L(),c=T("p"),g=k("Capital scheme ID: "),y=k($),O=L(),I=T("p"),C=k("Funding programme: "),F=k(E),P=L(),A&&A.c(),S=L(),b(M.$$.fragment)},m(j,J){p(j,e,J),h(e,n),h(e,l),p(j,o,J),p(j,s,J),h(s,u),h(s,a),p(j,f,J),p(j,c,J),h(c,g),h(c,y),p(j,O,J),p(j,I,J),h(I,C),h(I,F),p(j,P,J),A&&A.m(j,J),p(j,S,J),v(M,j,J),N=!0},p(j,J){var ie,ye,Te,ve;(!N||J&1)&&t!==(t=j[0].scheme_reference+"")&&B(l,t),(!N||J&1)&&i!==(i=((ie=j[0].browse)==null?void 0:ie.authority_or_region)+"")&&B(a,i),(!N||J&1)&&$!==($=((ye=j[0].browse)==null?void 0:ye.capital_scheme_id)+"")&&B(y,$),(!N||J&1)&&E!==(E=((Te=j[0].browse)==null?void 0:Te.funding_programme)+"")&&B(F,E),(ve=j[0].browse)!=null&&ve.current_milestone?A?A.p(j,J):(A=Br(j),A.c(),A.m(S.parentNode,S)):A&&(A.d(1),A=null);const de={};J&32&&(de.$$scope={dirty:J,ctx:j}),M.$set(de)},i(j){N||(_(M.$$.fragment,j),N=!0)},o(j){d(M.$$.fragment,j),N=!1},d(j){j&&(m(e),m(o),m(s),m(f),m(c),m(O),m(I),m(P),m(S)),A&&A.d(j),w(M,j)}}}function bp(r){let e,n;return e=new De({props:{label:`${r[0].scheme_name}`,$$slots:{default:[hp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_name}`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vp(r,e,n){let t,l;he(r,Ot,i=>n(3,t=i)),he(r,gn,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(Ol(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class wp extends Y{constructor(e){super(),Q(this,e,vp,bp,U,{scheme:0})}}function Hr(r){let e,n,t=An(r[0].length_meters)+"",l;return{c(){e=T("p"),n=k("Length: "),l=k(t)},m(o,s){p(o,e,s),h(e,n),h(e,l)},p(o,s){s&1&&t!==(t=An(o[0].length_meters)+"")&&B(l,t)},d(o){o&&m(e)}}}function zr(r){let e,n=r[2](r[0].description)+"";return{c(){e=T("p")},m(t,l){p(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[2](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&m(e)}}}function Gr(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=T("p"),n=k("Current milestone: "),l=k(t)},m(s,u){p(s,e,u),h(e,n),h(e,l)},p(s,u){var i;u&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&B(l,t)},d(s){s&&m(e)}}}function kp(r){var tt,Ye,je,Qe;let e,n,t,l=r[2](r[0].name)+"",o,s=r[0].intervention_type+"",u,i,a,f,c,g,$,y,O,I=r[1].scheme_name+"",C,E,F=r[0].scheme_reference+"",P,S,M,N,A,D=((tt=r[1].browse)==null?void 0:tt.authority_or_region)+"",H,K,R,j,J=((Ye=r[1].browse)==null?void 0:Ye.capital_scheme_id)+"",de,ie,ye,Te,ve=((je=r[1].browse)==null?void 0:je.funding_programme)+"",Se,et,ue=r[0].length_meters&&Hr(r),ce=r[0].description&&zr(r),_e=((Qe=r[1].browse)==null?void 0:Qe.current_milestone)&&Gr(r);return{c(){e=T("div"),n=T("h2"),t=new hn(!1),o=k(" ("),u=k(s),i=k(")"),a=L(),ue&&ue.c(),f=L(),ce&&ce.c(),c=L(),g=T("hr"),$=L(),y=T("p"),O=k("Part of scheme: "),C=k(I),E=k(" ("),P=k(F),S=k(")"),M=L(),N=T("p"),A=k("Authority or region: "),H=k(D),K=L(),R=T("p"),j=k("Capital scheme ID: "),de=k(J),ie=L(),ye=T("p"),Te=k("Funding programme: "),Se=k(ve),et=L(),_e&&_e.c(),t.a=o,Ce(e,"max-width","30vw")},m(ne,$e){p(ne,e,$e),h(e,n),t.m(l,n),h(n,o),h(n,u),h(n,i),h(e,a),ue&&ue.m(e,null),h(e,f),ce&&ce.m(e,null),h(e,c),h(e,g),h(e,$),h(e,y),h(y,O),h(y,C),h(y,E),h(y,P),h(y,S),h(e,M),h(e,N),h(N,A),h(N,H),h(e,K),h(e,R),h(R,j),h(R,de),h(e,ie),h(e,ye),h(ye,Te),h(ye,Se),h(e,et),_e&&_e.m(e,null)},p(ne,[$e]){var kn,yn,Sn,Cn;$e&1&&l!==(l=ne[2](ne[0].name)+"")&&t.p(l),$e&1&&s!==(s=ne[0].intervention_type+"")&&B(u,s),ne[0].length_meters?ue?ue.p(ne,$e):(ue=Hr(ne),ue.c(),ue.m(e,f)):ue&&(ue.d(1),ue=null),ne[0].description?ce?ce.p(ne,$e):(ce=zr(ne),ce.c(),ce.m(e,c)):ce&&(ce.d(1),ce=null),$e&2&&I!==(I=ne[1].scheme_name+"")&&B(C,I),$e&1&&F!==(F=ne[0].scheme_reference+"")&&B(P,F),$e&2&&D!==(D=((kn=ne[1].browse)==null?void 0:kn.authority_or_region)+"")&&B(H,D),$e&2&&J!==(J=((yn=ne[1].browse)==null?void 0:yn.capital_scheme_id)+"")&&B(de,J),$e&2&&ve!==(ve=((Sn=ne[1].browse)==null?void 0:Sn.funding_programme)+"")&&B(Se,ve),(Cn=ne[1].browse)!=null&&Cn.current_milestone?_e?_e.p(ne,$e):(_e=Gr(ne),_e.c(),_e.m(e,null)):_e&&(_e.d(1),_e=null)},i:te,o:te,d(ne){ne&&m(e),ue&&ue.d(),ce&&ce.d(),_e&&_e.d()}}}function yp(r,e,n){let t,l,o;he(r,Vt,i=>n(4,l=i)),he(r,Ft,i=>n(3,o=i));let{props:s}=e;function u(i){return l?i.replace(new RegExp(l,"gi"),a=>`<mark>${a}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,s=i.props)},r.$$.update=()=>{r.$$.dirty&9&&n(1,t=o.get(s.scheme_reference))},[s,t,u,o]}class wn extends Y{constructor(e){super(),Q(this,e,yp,kp,U,{props:0})}}function Sp(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&m(e)}}}function Cp(r){let e,n;return e=new wn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Op(r){let e,n,t,l;return e=new se({props:{popupClass:"border-popup",$$slots:{default:[Sp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new se({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Cp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),p(o,n,s),v(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),w(e,o),w(t,o)}}}function Tp(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&m(e)}}}function Ap(r){let e,n;return e=new wn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Lp(r){let e,n,t,l;return e=new se({props:{popupClass:"border-popup",$$slots:{default:[Tp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new se({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Ap,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),p(o,n,s),v(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),w(e,o),w(t,o)}}}function Ip(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&m(e)}}}function Pp(r){let e,n;return e=new wn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Mp(r){let e,n,t,l;return e=new se({props:{popupClass:"border-popup",$$slots:{default:[Ip,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new se({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Pp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),p(o,n,s),v(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),w(e,o),w(t,o)}}}function Np(r){let e,n,t,l,o,s,u,i,a,f;const c=[z("interventions-points"),{filter:["all",Ln,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Yt,"circle-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[Op]},$$scope:{ctx:r}};for(let S=0;S<c.length;S+=1)g=x(g,c[S]);e=new Ze({props:g});const $=[z("interventions-lines"),{filter:["all",In,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":At,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[Lp]},$$scope:{ctx:r}};for(let S=0;S<$.length;S+=1)y=x(y,$[S]);t=new ke({props:y});const O=[z("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*At,"circle-opacity":0,"circle-stroke-color":Ke.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let I={};for(let S=0;S<O.length;S+=1)I=x(I,O[S]);o=new Ze({props:I});const C=[z("interventions-polygons"),{filter:["all",Ut,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":Z(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let E={$$slots:{default:[Mp]},$$scope:{ctx:r}};for(let S=0;S<C.length;S+=1)E=x(E,C[S]);u=new Ve({props:E});const F=[z("interventions-polygons-outlines"),{filter:["all",Ut,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*At}},{layout:{visibility:r[0]?"visible":"none"}}];let P={};for(let S=0;S<F.length;S+=1)P=x(P,F[S]);return a=new ke({props:P}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(u.$$.fragment),i=L(),b(a.$$.fragment)},m(S,M){v(e,S,M),p(S,n,M),v(t,S,M),p(S,l,M),v(o,S,M),p(S,s,M),v(u,S,M),p(S,i,M),v(a,S,M),f=!0},p(S,M){const N=M&29?ee(c,[c[0],M&24&&{filter:["all",Ln,S[3],S[4]]},c[2],c[3],M&4&&{paint:{"circle-color":S[2],"circle-radius":Yt,"circle-opacity":Z(1,.5)}},M&1&&{layout:{visibility:S[0]?"visible":"none"}},c[6]]):{};M&128&&(N.$$scope={dirty:M,ctx:S}),e.$set(N);const A=M&13?ee($,[$[0],M&8&&{filter:["all",In,S[3]]},$[2],$[3],M&4&&{paint:{"line-color":S[2],"line-width":At,"line-opacity":Z(1,.5)}},M&1&&{layout:{visibility:S[0]?"visible":"none"}},$[6]]):{};M&128&&(A.$$scope={dirty:M,ctx:S}),t.$set(A);const D=M&1?ee(O,[O[0],O[1],O[2],{layout:{visibility:S[0]?"visible":"none"}}]):{};o.$set(D);const H=M&13?ee(C,[C[0],M&8&&{filter:["all",Ut,S[3]]},C[2],C[3],M&4&&{paint:{"fill-color":S[2],"fill-opacity":Z(.2,.5)}},M&1&&{layout:{visibility:S[0]?"visible":"none"}},C[6]]):{};M&128&&(H.$$scope={dirty:M,ctx:S}),u.$set(H);const K=M&13?ee(F,[F[0],M&8&&{filter:["all",Ut,S[3]]},M&4&&{paint:{"line-color":S[2],"line-opacity":.5,"line-width":.7*At}},M&1&&{layout:{visibility:S[0]?"visible":"none"}}]):{};a.$set(K)},i(S){f||(_(e.$$.fragment,S),_(t.$$.fragment,S),_(o.$$.fragment,S),_(u.$$.fragment,S),_(a.$$.fragment,S),f=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(o.$$.fragment,S),d(u.$$.fragment,S),d(a.$$.fragment,S),f=!1},d(S){S&&(m(n),m(l),m(s),m(i)),w(e,S),w(t,S),w(o,S),w(u,S),w(a,S)}}}function Dp(r){let e,n;return e=new Tt({props:{data:r[1],$$slots:{default:[Np]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ep(r,e,n){let t,l;he(r,Ot,a=>n(5,l=a));let{showSchemes:o}=e,s=vl();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=Tl(l))},[o,t,s,u,i,l]}class Fp extends Y{constructor(e){super(),Q(this,e,Ep,Dp,U,{showSchemes:0})}}function Ur(r,e,n){const t=r.slice();return t[10]=e[n],t}function jp(r){let e,n;return e=new mp({props:{loadFile:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:te,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qr(r){let e,n,t,l;function o(i){r[7](i)}function s(i){r[8](i)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new yi({props:u}),q.push(()=>V(e,"schemesToBeShown",o)),q.push(()=>V(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),l=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],X(()=>t=!1)),e.$set(f)},i(i){l||(_(e.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),l=!1},d(i){w(e,i)}}}function Wr(r){let e,n;return e=new wp({props:{scheme:r[10]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.scheme=t[10]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Vr(r){let e=r[1].has(r[10].scheme_reference),n,t,l=e&&Wr(r);return{c(){l&&l.c(),n=Ie()},m(o,s){l&&l.m(o,s),p(o,n,s),t=!0},p(o,s){s&34&&(e=o[1].has(o[10].scheme_reference)),e?l?(l.p(o,s),s&34&&_(l,1)):(l=Wr(o),l.c(),_(l,1),l.m(n.parentNode,n)):l&&(pe(),d(l,1,1,()=>{l=null}),me())},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&m(n),l&&l.d(o)}}}function Rp(r){let e,n,t,l,o,s,u,i,a,f,c=_n()=="Private (development)",g,$,y,O,I,C,E,F;o=new jl({props:{boundaryGeojson:r[3]}}),u=new io({}),a=new Al({});let P=c&&jp(r);$=new El({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[6]}}),O=new tl({props:{errorMessage:r[0]}});let S=r[5].size>0&&qr(r),M=qe(r[5].values()),N=[];for(let D=0;D<M.length;D+=1)N[D]=Vr(Ur(r,M,D));const A=D=>d(N[D],1,1,()=>{N[D]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",l=L(),b(o.$$.fragment),s=L(),b(u.$$.fragment),i=L(),b(a.$$.fragment),f=L(),P&&P.c(),g=L(),b($.$$.fragment),y=L(),b(O.$$.fragment),I=L(),S&&S.c(),C=L(),E=T("ul");for(let D=0;D<N.length;D+=1)N[D].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(D,H){p(D,e,H),h(e,n),h(n,t),h(n,l),v(o,n,null),h(e,s),v(u,e,null),h(e,i),v(a,e,null),h(e,f),P&&P.m(e,null),h(e,g),v($,e,null),h(e,y),v(O,e,null),h(e,I),S&&S.m(e,null),h(e,C),h(e,E);for(let K=0;K<N.length;K+=1)N[K]&&N[K].m(E,null);F=!0},p(D,H){const K={};H&8&&(K.boundaryGeojson=D[3]),o.$set(K),c&&P.p(D,H);const R={};if(H&1&&(R.errorMessage=D[0]),O.$set(R),D[5].size>0?S?(S.p(D,H),H&32&&_(S,1)):(S=qr(D),S.c(),_(S,1),S.m(e,C)):S&&(pe(),d(S,1,1,()=>{S=null}),me()),H&34){M=qe(D[5].values());let j;for(j=0;j<M.length;j+=1){const J=Ur(D,M,j);N[j]?(N[j].p(J,H),_(N[j],1)):(N[j]=Vr(J),N[j].c(),_(N[j],1),N[j].m(E,null))}for(pe(),j=M.length;j<N.length;j+=1)A(j);me()}},i(D){if(!F){_(o.$$.fragment,D),_(u.$$.fragment,D),_(a.$$.fragment,D),_(P),_($.$$.fragment,D),_(O.$$.fragment,D),_(S);for(let H=0;H<M.length;H+=1)_(N[H]);F=!0}},o(D){d(o.$$.fragment,D),d(u.$$.fragment,D),d(a.$$.fragment,D),d(P),d($.$$.fragment,D),d(O.$$.fragment,D),d(S),N=N.filter(Boolean);for(let H=0;H<N.length;H+=1)d(N[H]);F=!1},d(D){D&&m(e),w(o),w(u),w(a),P&&P.d(),w($),w(O),S&&S.d(),Pt(N,D)}}}function Bp(r){let e,n,t,l,o,s,u;return e=new Dl({}),t=new Fp({props:{showSchemes:r[2]}}),s=new $p({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),o=T("div"),b(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),p(i,n,a),v(t,i,a),p(i,l,a),p(i,o,a),v(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(m(n),m(l),m(o)),w(e,i),w(t,i),w(s)}}}function Hp(r){let e,n,t;return n=new Ll({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Bp]},$$scope:{ctx:r}}}),{c(){e=T("div"),b(n.$$.fragment),G(e,"slot","main")},m(l,o){p(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.style=l[4]),o&8196&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),w(n)}}}function zp(r){let e,n;return e=new Bl({props:{$$slots:{main:[Hp],sidebar:[Rp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&8255&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gp(r,e,n){let t,l,o;he(r,Ot,$=>n(3,t=$)),he(r,Pn,$=>n(4,l=$)),he(r,Ft,$=>n(5,o=$)),dn(()=>{Il()});const s=new URLSearchParams(window.location.search);Pn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0;function f($){try{Ot.set(JSON.parse($)),Ft.set(fi(t)),n(0,u="")}catch(y){n(0,u=`The file you loaded is broken: ${y}`)}}function c($){i=$,n(1,i)}function g($){a=$,n(2,a)}return[u,i,a,t,l,o,f,c,g]}class Up extends Y{constructor(e){super(),Q(this,e,Gp,zp,U,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Up({target:document.getElementById("app")});
