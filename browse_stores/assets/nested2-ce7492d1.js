import{S as z,i as q,s as H,e as A,h as U,$ as he,j as p,W as te,o as m,aP as qr,b as V,c as Z,d as C,g as h,m as b,w as kt,l as J,t as $,n as _,p as v,X as At,Y as Lt,Z as It,_ as Pt,a7 as je,J as ie,K as ae,aQ as yt,u as w,k as y,D as B,I as we,N as ln,O as dr,q as Oe,P as hr,Q as br,T as St,U as vr,V as wr,aX as Wr,aY as rt,a4 as _n,aZ as Vr,f as on,aO as Xr,ar as sn,ae as an,aj as kr,r as fn,F as yr,a as Yt,v as Gt,aW as W,a_ as fe,a$ as pe,B as K,ah as Y,C as ue,ak as Q,b0 as ne,G as Mt,H as Kr,aS as Zr,ab as gn,R as Sr,b1 as un,b2 as cn,E as Tr,as as Jr,ag as Yr,aU as dn,al as Qr,am as hn,an as bn,ao as Nt,aV as vn,L as xr,M as el,y as tl}from"./index-8186201e.js";import{C as Se,d as De,j as Tt,f as jt,h as le,l as R,c as Ht,k as nl,S as rl,B as ll,b as bt,G as ol}from"./StreetViewTool-c3015bcd.js";import{a as Be,F as sl}from"./Popup-60c72185.js";import{P as oe}from"./Popup-43390098.js";import{R as il,C as We,Z as al}from"./ZoomOutMap-820f2dc4.js";import{L as fl,a as ul}from"./LineMeasureController-deb5ae94.js";function cl(r){let e;return{c(){e=A("span"),U(e,"class","svelte-kzgqtg"),he(e,"background",r[0])},m(n,t){p(n,e,t)},p(n,[t]){t&1&&he(e,"background",n[0])},i:te,o:te,d(n){n&&m(e)}}}function $l(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class me extends z{constructor(e){super(),q(this,e,$l,cl,H,{color:0})}}const pl="/atip/browse_stores/assets/help-d011708a.svg";function ml(r){let e,n;const t=r[1].default,l=At(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),U(e,"class","govuk-prose")},m(o,i){p(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Lt(l,t,o,o[4],n?Pt(t,o[4],i,null):It(o[4]),null)},i(o){n||($(l,o),n=!0)},o(o){_(l,o),n=!1},d(o){o&&m(e),l&&l.d(o)}}}function _l(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[ml]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new qr({props:a}),V.push(()=>Z(t,"open",s)),{c(){e=A("button"),e.innerHTML=`<img src="${pl}" title="Help" alt="Help"/>`,n=C(),h(t.$$.fragment),U(e,"class","svelte-7d9d1l")},m(f,c){p(f,e,c),p(f,n,c),b(t,f,c),o=!0,i||(u=kt(e,"click",r[2]),i=!0)},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,g.open=f[0],J(()=>l=!1)),t.$set(g)},i(f){o||($(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){f&&(m(e),m(n)),v(t,f),i=!1,u()}}}function gl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class se extends z{constructor(e){super(),q(this,e,gl,_l,H,{})}}function wn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function kn(r){let e,n,t,l=r[1]+"",o,i,u;return n=new me({props:{color:r[2]}}),{c(){e=A("li"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){p(s,e,a),b(n,e,null),y(e,t),y(e,o),y(e,i),u=!0},p(s,a){const f={};a&1&&(f.color=s[2]),n.$set(f),(!u||a&1)&&l!==(l=s[1]+"")&&B(o,l)},i(s){u||($(n.$$.fragment,s),u=!0)},o(s){_(n.$$.fragment,s),u=!1},d(s){s&&m(e),v(n)}}}function dl(r){let e,n,t=je(r[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=kn(wn(r,t,i));const o=i=>_(l[i],1,1,()=>{l[i]=null});return{c(){e=A("ul");for(let i=0;i<l.length;i+=1)l[i].c()},m(i,u){p(i,e,u);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);n=!0},p(i,u){if(u&1){t=je(i[0]);let s;for(s=0;s<t.length;s+=1){const a=wn(i,t,s);l[s]?(l[s].p(a,u),$(l[s],1)):(l[s]=kn(a),l[s].c(),$(l[s],1),l[s].m(e,null))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)$(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)_(l[u]);n=!1},d(i){i&&m(e),yt(l,i)}}}function hl(r){let e,n;return e=new Se({props:{label:"Legend",$$slots:{default:[dl]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class vl extends z{constructor(e){super(),q(this,e,bl,hl,H,{rows:0})}}function yn(r){let e=r[0],n,t,l=Sn(r);return{c(){l.c(),n=we()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&H(e,e=o[0])?(ie(),_(l,1,1,te),ae(),l=Sn(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){_(l),t=!1},d(o){o&&m(n),l.d(o)}}}function Sn(r){let e;const n=r[10].default,t=At(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Lt(t,n,l,l[9],e?Pt(n,l[9],o,null):It(l[9]),null)},i(l){e||($(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function wl(r){let e,n,t=r[0]&&yn(r);return{c(){t&&t.c(),e=we()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=yn(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),_(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){_(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function kl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=ln("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=dr();Oe(r,f,k=>n(8,l=k)),Oe(r,c,k=>n(0,t=k));let g,d=!0;return hr(()=>{t&&g&&l&&(br(f,t,g),St(c,t=null,t),n(6,g=void 0))}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"tiles"in k&&n(4,s=k.tiles),"tileSize"in k&&n(5,a=k.tileSize),"$$scope"in k&&n(9,i=k.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(St(c,t=u,t),vr(l,t,wr({type:"raster",tiles:s,tileSize:a}),k=>l&&k===t,()=>{t&&(n(6,g=l==null?void 0:l.getSource(t)),n(7,d=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,g=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&g&&(d?n(7,d=!1):g.setTiles(s))},[t,f,c,u,s,a,g,d,l,i,o]}class yl extends z{constructor(e){super(),q(this,e,kl,wl,H,{id:3,tiles:4,tileSize:5})}}function Sl(r){let e;const n=r[16].default,t=At(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Lt(t,n,l,l[24],e?Pt(n,l[24],o,null):It(l[24]),null)},i(l){e||($(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Tl(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Sl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Wr({props:o}),V.push(()=>Z(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],J(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ol(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=ln("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:O=void 0}=e,{manageHoverState:T=!1}=e,{hovered:P=null}=e,{eventsIfTopMost:E=!1}=e,{interactive:N=!0}=e;function L(D){P=D,n(0,P)}function F(D){rt.call(this,r,D)}function M(D){rt.call(this,r,D)}function I(D){rt.call(this,r,D)}function j(D){rt.call(this,r,D)}function G(D){rt.call(this,r,D)}function x(D){rt.call(this,r,D)}return r.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,i=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,s=D.beforeId),"beforeLayerType"in D&&n(5,a=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,g=D.filter),"applyToClusters"in D&&n(9,d=D.applyToClusters),"minzoom"in D&&n(10,k=D.minzoom),"maxzoom"in D&&n(11,S=D.maxzoom),"hoverCursor"in D&&n(12,O=D.hoverCursor),"manageHoverState"in D&&n(13,T=D.manageHoverState),"hovered"in D&&n(0,P=D.hovered),"eventsIfTopMost"in D&&n(14,E=D.eventsIfTopMost),"interactive"in D&&n(15,N=D.interactive),"$$scope"in D&&n(24,l=D.$$scope)},[P,o,i,u,s,a,f,c,g,d,k,S,O,T,E,N,t,L,F,M,I,j,G,x,l]}class Cl extends z{constructor(e){super(),q(this,e,Ol,Tl,H,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Tn(r){let e=r[0],n,t,l=On(r);return{c(){l.c(),n=we()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&H(e,e=o[0])?(ie(),_(l,1,1,te),ae(),l=On(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){_(l),t=!1},d(o){o&&m(n),l.d(o)}}}function On(r){let e;const n=r[9].default,t=At(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Lt(t,n,l,l[8],e?Pt(n,l[8],o,null):It(l[8]),null)},i(l){e||($(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Al(r){let e,n,t=r[0]&&Tn(r);return{c(){t&&t.c(),e=we()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=Tn(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),_(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){_(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function Ll(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=ln("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!_n.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let k=new Vr;_n.addProtocol("pmtiles",k.tile)}const{map:c,self:g}=dr();Oe(r,c,k=>n(7,l=k)),Oe(r,g,k=>n(0,t=k));let d;return hr(()=>{t&&l&&(br(c,t,d),St(g,t=null,t),d=void 0)}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"url"in k&&n(4,s=k.url),"tiles"in k&&n(5,a=k.tiles),"promoteId"in k&&n(6,f=k.promoteId),"$$scope"in k&&n(8,i=k.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(St(g,t=u,t),vr(l,t,wr({type:"vector",url:s,tiles:a,promoteId:f}),k=>l&&k===t,()=>{t&&(d=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{d=l==null?void 0:l.getSource(u)}))},[t,c,g,u,s,a,f,l,i,o]}class ce extends z{constructor(e){super(),q(this,e,Ll,Al,H,{id:3,url:4,tiles:5,promoteId:6})}}function Il(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pl(r){let e,n,t=r[0]=="Private (development)"&&Il();return{c(){t&&t.c(),e=C(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),p(l,e,o),p(l,n,o)},p:te,d(l){l&&(m(e),m(n)),t&&t.d(l)}}}function Ml(r){let e,n,t,l,o,i;return o=new se({props:{$$slots:{default:[Pl]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=C(),h(o.$$.fragment)},m(u,s){p(u,e,s),y(e,n),y(e,t),y(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||($(o.$$.fragment,u),i=!0)},o(u){_(o.$$.fragment,u),i=!1},d(u){u&&m(e),v(o)}}}function jl(r){return[on()]}class Fl extends z{constructor(e){super(),q(this,e,jl,Ml,H,{})}}const El={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var ge=Uint8Array,Ye=Uint16Array,Or=Uint32Array,Cr=new ge([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ar=new ge([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Nl=new ge([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Lr=function(r,e){for(var n=new Ye(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Or(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Ir=Lr(Cr,2),Pr=Ir[0],Dl=Ir[1];Pr[28]=258,Dl[258]=28;var Rl=Lr(Ar,0),Bl=Rl[0],Qt=new Ye(32768);for(var re=0;re<32768;++re){var Ue=(re&43690)>>>1|(re&21845)<<1;Ue=(Ue&52428)>>>2|(Ue&13107)<<2,Ue=(Ue&61680)>>>4|(Ue&3855)<<4,Qt[re]=((Ue&65280)>>>8|(Ue&255)<<8)>>>1}var wt=function(r,e,n){for(var t=r.length,l=0,o=new Ye(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Ye(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Ye(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,g=c|(1<<f)-1;c<=g;++c)u[Qt[c]>>>s]=a}else for(u=new Ye(t),l=0;l<t;++l)r[l]&&(u[l]=Qt[i[r[l]-1]++]>>>15-r[l]);return u},Ft=new ge(288);for(var re=0;re<144;++re)Ft[re]=8;for(var re=144;re<256;++re)Ft[re]=9;for(var re=256;re<280;++re)Ft[re]=7;for(var re=280;re<288;++re)Ft[re]=8;var Mr=new ge(32);for(var re=0;re<32;++re)Mr[re]=5;var Gl=wt(Ft,9,1),Hl=wt(Mr,5,1),qt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},ke=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Wt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Ul=function(r){return(r+7)/8|0},$n=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Ye:r.BYTES_PER_ELEMENT==4?Or:ge)(n-e);return t.set(r.subarray(e,n)),t},zl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ye=function(r,e,n){var t=new Error(e||zl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,ye),!n)throw t;return t},ql=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new ge(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new ge(t*3));var i=function(tt){var Ke=e.length;if(tt>Ke){var nt=new ge(Math.max(Ke*2,tt));nt.set(e),e=nt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,g=n.m,d=n.n,k=t*8;do{if(!f){u=ke(r,s,1);var S=ke(r,s+1,3);if(s+=3,S)if(S==1)f=Gl,c=Hl,g=9,d=5;else if(S==2){var E=ke(r,s,31)+257,N=ke(r,s+10,15)+4,L=E+ke(r,s+5,31)+1;s+=14;for(var F=new ge(L),M=new ge(19),I=0;I<N;++I)M[Nl[I]]=ke(r,s+I*3,7);s+=N*3;for(var j=qt(M),G=(1<<j)-1,x=wt(M,j,1),I=0;I<L;){var D=x[ke(r,s,G)];s+=D&15;var O=D>>>4;if(O<16)F[I++]=O;else{var X=0,$e=0;for(O==16?($e=3+ke(r,s,3),s+=2,X=F[I-1]):O==17?($e=3+ke(r,s,7),s+=3):O==18&&($e=11+ke(r,s,127),s+=7);$e--;)F[I++]=X}}var _t=F.subarray(0,E),be=F.subarray(E);g=qt(_t),d=qt(be),f=wt(_t,g,1),c=wt(be,d,1)}else ye(1);else{var O=Ul(s)+4,T=r[O-4]|r[O-3]<<8,P=O+T;if(P>t){o&&ye(0);break}l&&i(a+T),e.set(r.subarray(O,P),a),n.b=a+=T,n.p=s=P*8,n.f=u;continue}if(s>k){o&&ye(0);break}}l&&i(a+131072);for(var xe=(1<<g)-1,gt=(1<<d)-1,et=s;;et=s){var X=f[Wt(r,s)&xe],_e=X>>>4;if(s+=X&15,s>k){o&&ye(0);break}if(X||ye(2),_e<256)e[a++]=_e;else if(_e==256){et=s,f=null;break}else{var dt=_e-254;if(_e>264){var I=_e-257,Ne=Cr[I];dt=ke(r,s,(1<<Ne)-1)+Pr[I],s+=Ne}var He=c[Wt(r,s)&gt],Xe=He>>>4;He||ye(3),s+=He&15;var be=Bl[Xe];if(Xe>3){var Ne=Ar[Xe];be+=Wt(r,s)&(1<<Ne)-1,s+=Ne}if(s>k){o&&ye(0);break}l&&i(a+131072);for(var ht=a+dt;a<ht;a+=4)e[a]=e[a-be],e[a+1]=e[a+1-be],e[a+2]=e[a+2-be],e[a+3]=e[a+3-be];a=ht}}n.l=f,n.p=et,n.b=a,n.f=u,f&&(u=1,n.m=g,n.d=c,n.n=d)}while(!u);return a==e.length?e:$n(e,0,a)},Wl=new ge(0),Me=function(r,e){return r[e]|r[e+1]<<8},Te=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Vt=function(r,e){return Te(r,e)+Te(r,e+4)*4294967296};function Vl(r,e){return ql(r,e)}var xt=typeof TextDecoder<"u"&&new TextDecoder,Xl=0;try{xt.decode(Wl,{stream:!0}),Xl=1}catch{}var Kl=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,$n(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function jr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(xt)return xt.decode(r);var l=Kl(r),o=l[0],i=l[1];return i.length&&ye(8),o}}var Zl=function(r,e){return e+30+Me(r,e+26)+Me(r,e+28)},Jl=function(r,e,n){var t=Me(r,e+28),l=jr(r.subarray(e+46,e+46+t),!(Me(r,e+8)&2048)),o=e+46+t,i=Te(r,e+20),u=n&&i==4294967295?Yl(r,o):[i,Te(r,e+24),Te(r,e+42)],s=u[0],a=u[1],f=u[2];return[Me(r,e+10),s,a,l,o+Me(r,e+30)+Me(r,e+32),f]},Yl=function(r,e){for(;Me(r,e)!=1;e+=4+Me(r,e+2));return[Vt(r,e+12),Vt(r,e+4),Vt(r,e+20)]};function Ql(r,e){for(var n={},t=r.length-22;Te(r,t)!=101010256;--t)(!t||r.length-t>65558)&&ye(13);var l=Me(r,t+8);if(!l)return{};var o=Te(r,t+16),i=o==4294967295||l==65535;if(i){var u=Te(r,t-12);i=Te(r,u)==101075792,i&&(l=Te(r,u+32),o=Te(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=Jl(r,o,i),c=f[0],g=f[1],d=f[2],k=f[3],S=f[4],O=f[5],T=Zl(r,O);o=S,(!s||s({name:k,size:g,originalSize:d,compression:c}))&&(c?c==8?n[k]=Vl(r.subarray(T,T+g),new ge(d)):ye(14,"unknown compression type "+c):n[k]=$n(r,T,T+g))}return n}function xl(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Xt):Xt(r)}function Xt(r){var e=new Uint8Array(r),n=Ql(e);return Promise.resolve(eo(n))}function eo(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=jr(r[l])}return e}function Fe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Qe(t)===e)return t;n++}}function Et(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Qe(l)===e&&n.push(l),t++}return n}function Ut(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Qe(l)===e&&n(l,t):n(l,t),t++}}function to(r,e,n){var t=[];return Ut(r,e,function(l,o){t.push(n(l,o))}),t}var no=/.+\:/;function Qe(r){return r.tagName.replace(no,"")}function Fr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Qe(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Fr(r.childNodes[t]),t++;return e+="</"+Qe(r)+">",e}function ro(r){var e=r.documentElement,n=Fe(e,"sheetData"),t=[];return Ut(n,"row",function(l){Ut(l,"c",function(o){t.push(o)})}),t}function lo(r,e){return Fe(e,"v")}function oo(r,e){if(e.firstChild&&Qe(e.firstChild)==="is"&&e.firstChild.firstChild&&Qe(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function so(r){var e=r.documentElement,n=Fe(e,"dimension");if(n)return n.getAttribute("ref")}function io(r){var e=r.documentElement,n=Fe(e,"cellStyleXfs");return n?Et(n,"xf"):[]}function ao(r){var e=r.documentElement,n=Fe(e,"cellXfs");return n?Et(n,"xf"):[]}function fo(r){var e=r.documentElement,n=Fe(e,"numFmts");return n?Et(n,"numFmt"):[]}function uo(r){var e=r.documentElement;return to(e,"si",function(n){var t=Fe(n,"t");if(t)return t.textContent;var l="";return Ut(n,"r",function(o){l+=Fe(o,"t").textContent}),l})}function co(r){var e=r.documentElement;return Fe(e,"workbookPr")}function $o(r){var e=r.documentElement;return Et(e,"Relationship")}function po(r){var e=r.documentElement,n=Fe(e,"sheets");return Et(n,"sheet")}function mo(r,e){var n=e.createDocument(r),t={},l=co(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return po(n).forEach(o),t}function _o(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Kt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Kt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Kt(u);break}};return $o(n).forEach(l),t}function Kt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Cn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function An(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cn(Object(n),!0).forEach(function(t){go(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function go(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ho(r,e){if(!r)return{};var n=e.createDocument(r),t=io(n).map(Zt),l=fo(n).map(bo).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?An(An({},t[u.xfId]),Zt(u,l)):Zt(u,l)};return ao(n).map(o)}function bo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Zt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function vo(r,e){return r?uo(e.createDocument(r)):[]}function Er(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function wo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ko(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ko(r,e){if(r){if(typeof r=="string")return Ln(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(r,e)}}function Ln(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function yo(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(So.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&Co(l.numberFormat.template))return!0}}var So=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],To=/^\[\$-414\]/,Oo=/;@$/;function Co(r){r=r.toLowerCase(),r=r.replace(To,""),r=r.replace(Oo,"");for(var e=r.split(/\W+/),n=wo(e),t;!(t=n()).done;){var l=t.value;if(Ao.indexOf(l)<0)return!1}return!0}var Ao=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Lo(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Jt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Jt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Jt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Io(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var g=Number(r);if(isNaN(g))throw new Error('Invalid "numeric" cell value: '.concat(r));r=g,yo(r,o(),i,a)&&(r=Er(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Io(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Jt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Po=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Mo(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function jo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Po.indexOf(r[n]),n++;return e}function Nr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),jo(r[0].trim())]}function Fo(r,e,n,t,l,o,i){var u=Nr(r.getAttribute("r")),s=lo(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:Lo(a,f,{getInlineStringValue:function(){return oo(e,r)},getInlineStringXml:function(){return Fr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function Eo(r,e,n,t,l,o){var i=ro(r);return i.length===0?[]:i.map(function(u){return Fo(u,r,e,n,t,l,o)})}function No(r,e){return Go(r)||Bo(r,e)||Ro(r,e)||Do()}function Do(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ro(r,e){if(r){if(typeof r=="string")return In(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(r,e)}}function In(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Bo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Go(r){if(Array.isArray(r))return r}function Ho(r){var e=so(r);if(e)return e=e.split(":").map(Nr).map(function(n){var t=No(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Uo(r,e,n,t,l,o){var i=e.createDocument(r),u=Eo(i,e,n,t,l,o),s=Ho(i)||Mo(u);return{cells:u,dimensions:s}}function zo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=qo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qo(r,e){if(r){if(typeof r=="string")return Pn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(r,e)}}function Pn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Wo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=zo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Vo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Xo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xo(r,e){if(r){if(typeof r=="string")return Mn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(r,e)}}function Mn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ko(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Vo(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Zo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Dr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jo(r,e){return xo(r)||Qo(r,e)||Dr(r,e)||Yo()}function Yo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dr(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Qo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function xo(r){if(Array.isArray(r))return r}function es(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Jo(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=Zo(t),g;!(g=c()).done;){var d=g.value,k=d.row-1,S=d.column-1;S<i&&k<u&&(s[k][S]=d.value)}var O=e.rowMap;if(O)for(var T=0;T<s.length;)O[T]=T,T++;return s=Wo(Ko(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:O}),e.transformData&&(s=e.transformData(s)),s}function ts(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ns(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ns(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function En(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function rs(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?En(Object(n),!0).forEach(function(t){ls(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ls(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function os(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=rs({sheet:1},n));var t=function(g){if(!r[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return r[g]},l=_o(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?vo(t(l.sharedStrings),e):[],i=l.styles?ho(t(l.styles),e):{},u=mo(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var g=c.name;return{name:g}});var s=ss(n.sheet,u.sheets);if(!s||!l.sheets[s])throw is(n.sheet,u.sheets);var a=Uo(t(l.sheets[s]),e,o,i,u,n),f=es(a,n);return n.properties?{data:f,properties:u}:f}function ss(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=ts(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function is(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function en(r){"@babel/helpers - typeof";return en=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(r)}function Nn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function as(r,e,n){return e&&Nn(r.prototype,e),n&&Nn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function fs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function us(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ot(r,e)}function cs(r){var e=Rr();return function(){var t=Ct(r),l;if(e){var o=Ct(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return $s(this,l)}}function $s(r,e){if(e&&(en(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ps(r)}function ps(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function tn(r){var e=typeof Map=="function"?new Map:void 0;return tn=function(t){if(t===null||!ms(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Rt(t,arguments,Ct(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ot(l,t)},tn(r)}function Rt(r,e,n){return Rr()?Rt=Reflect.construct:Rt=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Ot(a,i.prototype),a},Rt.apply(null,arguments)}function Rr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ms(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ot(r,e){return Ot=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Ot(r,e)}function Ct(r){return Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ct(r)}var de=function(r){us(n,r);var e=cs(n);function n(t){var l;return fs(this,n),l=e.call(this,"invalid"),l.reason=t,l}return as(n)}(tn(Error));function _s(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new de("not_a_number")}if(typeof r!="number")throw new de("not_a_number");if(isNaN(r))throw new de("invalid_number");if(!isFinite(r))throw new de("out_of_bounds");return r}function gs(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new de("invalid_number");if(!isFinite(r))throw new de("out_of_bounds");return String(r)}throw new de("not_a_string")}function ds(r){if(typeof r=="boolean")return r;throw new de("not_a_boolean")}function hs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new de("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new de("invalid_number");if(!isFinite(r))throw new de("out_of_bounds");var t=Er(r,n);if(isNaN(t.valueOf()))throw new de("out_of_bounds");return t}throw new de("not_a_date")}function bs(r,e){return ks(r)||ws(r,e)||Br(r,e)||vs()}function vs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ws(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ks(r){if(Array.isArray(r))return r}function nn(r){"@babel/helpers - typeof";return nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(r)}function ys(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Br(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Br(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Rn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Bn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(t){Ss(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ss(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Gn={isColumnOriented:!1};function Ts(r,e,n){n?n=Bn(Bn({},Gn),n):n=Gn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;Ls(e),l&&(r=As(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Gr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var g=ys(a),d;!(d=g()).done;){var k=d.value;k.row=o[k.row-1]+1}return{rows:s,errors:a}}function Gr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var g=f[a],d=r[g],k=nn(d.type)==="object"&&!Array.isArray(d.type),S=e[t.indexOf(g)];S===void 0&&(S=null);var O=void 0,T=void 0,P=void 0;if(k)O=Gr(d.type,e,n,t,l,o);else if(S===null)O=null;else if(Array.isArray(d.type)){var E=!1,N=Cs(S).map(function(F){var M=Hn(F,d,o);return M.error&&(O=F,T=M.error,P=M.reason),M.value!==null&&(E=!0),M.value});T||(O=E?N:null)}else{var L=Hn(S,d,o);T=L.error,P=L.reason,O=T?S:L.value}!T&&O===null&&d.required&&(T="required"),T?(T={error:T,row:n+1,column:g,value:O},P&&(T.reason=P),d.type&&(T.type=d.type),l.push(T)):(u&&O!==null&&(u=!1),(O!==null||o.includeNullValues)&&(i[d.prop]=O))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function Hn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=lt(r,e.parse):e.type?t=Os(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function lt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Os(r,e,n){switch(e){case String:return lt(r,gs);case Number:return lt(r,_s);case Date:return lt(r,function(t){return hs(t,{properties:n.properties})});case Boolean:return lt(r,ds);default:if(typeof e=="function")return lt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Hr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Hr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function Cs(r){for(var e=[],n=0;n<r.length;){var t=Hr(r,",",n),l=bs(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var As=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Ls(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function rn(r){"@babel/helpers - typeof";return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(r)}function Ur(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;rn(o)==="object"&&(o=Object.keys(r[l])[0],i=Ur(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var Is=["schema","map"];function Un(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Dt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Un(Object(n),!0).forEach(function(t){Ps(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ps(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ms(r,e){if(r==null)return{};var n=js(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function js(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Fs(r,e,n){var t=n.schema,l=n.map,o=Ms(n,Is);!t&&l&&(t=Ur(l));var i=os(r,e,Dt(Dt({},o),{},{properties:t||o.properties}));return t?Ts(i.data,t,Dt(Dt({},o),{},{properties:i.properties})):i}function Es(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return xl(r).then(function(n){return Fs(n,El,e)})}function Ns(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>Ds(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(l.browse.num_features=l.browse.num_features!==void 0?l.browse.num_features+1:1,t.properties.funding_programme=l.funding_programme,t.id=n++)}return e}function Ds(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Rs(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Es(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Xr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function zr(r){return sn(["get","intervention_type"],{area:De.area,route:De.route,crossing:De.crossing,other:De.other},"white")}function zn(r){return[["Areas",De.area],["Routes",De.route],["Crossings",De.crossing],["Other",De.other]]}const ee={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Re=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Bs(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Tt({props:u}),V.push(()=>Z(e,"value",i)),e.$on("change",r[2]),l=new vl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],J(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Gs(r,e,n){let t;Oe(r,an,s=>n(4,t=s));let l="interventionType",o=zn();function i(){let s;l=="interventionType"?(s=zr(),n(1,o=zn())):(s=sn(["get","funding_programme"],{ATF2:ee.atf2,ATF3:ee.atf3,ATF4:ee.atf4},"grey"),n(1,o=[["ATF2",ee.atf2],["ATF3",ee.atf3],["ATF4",ee.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class Hs extends z{constructor(e){super(),q(this,e,Gs,Bs,H,{})}}const qn=kr(!0),Bt=kr("");function Us(r){let e;return{c(){e=w("Clear")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function zs(r){let e,n,t,l,o,i;return t=new Yt({props:{$$slots:{default:[Us]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=A("input"),n=C(),h(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterText")},m(u,s){p(u,e,s),Gt(e,r[4]),p(u,n,s),b(t,u,s),l=!0,o||(i=kt(e,"input",r[12]),o=!0)},p(u,s){s&16&&e.value!==u[4]&&Gt(e,u[4]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||($(t.$$.fragment,u),l=!0)},o(u){_(t.$$.fragment,u),l=!1},d(u){u&&(m(e),m(n)),v(t,u),o=!1,i()}}}function qs(r){let e,n,t,l,o,i,u,s,a,f;function c(S){r[10](S)}let g={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(g.value=r[2]),e=new Tt({props:g}),V.push(()=>Z(e,"value",c));function d(S){r[11](S)}let k={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(k.value=r[3]),l=new Tt({props:k}),V.push(()=>Z(l,"value",d)),u=new yr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[zs]},$$scope:{ctx:r}}}),a=new Hs({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(S,O){b(e,S,O),p(S,t,O),b(l,S,O),p(S,i,O),b(u,S,O),p(S,s,O),b(a,S,O),f=!0},p(S,O){const T={};O&32&&(T.choices=S[5]),!n&&O&4&&(n=!0,T.value=S[2],J(()=>n=!1)),e.$set(T);const P={};O&64&&(P.choices=S[6]),!o&&O&8&&(o=!0,P.value=S[3],J(()=>o=!1)),l.$set(P);const E={};O&65552&&(E.$$scope={dirty:O,ctx:S}),u.$set(E)},i(S){f||($(e.$$.fragment,S),$(l.$$.fragment,S),$(u.$$.fragment,S),$(a.$$.fragment,S),f=!0)},o(S){_(e.$$.fragment,S),_(l.$$.fragment,S),_(u.$$.fragment,S),_(a.$$.fragment,S),f=!1},d(S){S&&(m(t),m(i),m(s)),v(e,S),v(l,S),v(u,S),v(a,S)}}}function Ws(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",g,d,k=r[7].other.toLocaleString()+"",S,O;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),g=w(c),d=w(" crossings, "),S=w(k),O=w(`
    other)`)},m(T,P){p(T,e,P),p(T,t,P),p(T,l,P),p(T,i,P),p(T,u,P),p(T,a,P),p(T,f,P),p(T,g,P),p(T,d,P),p(T,S,P),p(T,O,P)},p(T,P){P&1&&n!==(n=T[0].size.toLocaleString()+"")&&B(t,n),P&128&&o!==(o=T[7].route.toLocaleString()+"")&&B(i,o),P&128&&s!==(s=T[7].area.toLocaleString()+"")&&B(a,s),P&128&&c!==(c=T[7].crossing.toLocaleString()+"")&&B(g,c),P&128&&k!==(k=T[7].other.toLocaleString()+"")&&B(S,k)},d(T){T&&(m(e),m(t),m(l),m(i),m(u),m(a),m(f),m(g),m(d),m(S),m(O))}}}function Vs(r){let e,n,t;function l(i){r[14](i)}let o={id:"show-schemes",$$slots:{default:[Ws]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),V.push(()=>Z(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65665&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],J(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Xs(r){let e,n,t,l;return e=new Se({props:{label:"Filters",$$slots:{default:[qs]},$$scope:{ctx:r}}}),t=new jt({props:{small:!0,$$slots:{default:[Vs]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65660&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65667&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Ks(r,e,n){let t;Oe(r,Bt,E=>n(4,t=E));let{schemesGj:l}=e,{schemes:o}=e,{schemesToBeShown:i=new Set}=e,{show:u=!0}=e,s=[],a="",f=[],c="",g={area:0,route:0,crossing:0,other:0};fn(()=>{var L,F;let E=new Set,N=new Set;for(let M of o.values())(L=M.browse)!=null&&L.authority_or_region&&E.add(M.browse.authority_or_region),(F=M.browse)!=null&&F.funding_programme&&N.add(M.browse.funding_programme);n(5,s=Array.from(E.entries())),s.sort(),n(6,f=Array.from(N.entries())),f.sort()});function d(E,N,L){let F=E.toLowerCase(),M=j=>{var G,x,D,X;if(F&&!((G=j.properties.name)!=null&&G.toLowerCase().includes(F))&&!((x=j.properties.description)!=null&&x.toLowerCase().includes(F)))return!1;if(N||L){let $e=o.get(j.properties.scheme_reference);if(N&&((D=$e.browse)==null?void 0:D.authority_or_region)!=N||L&&((X=$e.browse)==null?void 0:X.funding_programme)!=L)return!1}return!0};n(0,i=new Set(l.features.filter(M).map(j=>j.properties.scheme_reference))),n(7,g={area:0,route:0,crossing:0,other:0});let I=j=>{var G,x;return!(!i.has(j.properties.scheme_reference)||F&&!((G=j.properties.name)!=null&&G.toLowerCase().includes(F))&&!((x=j.properties.description)!=null&&x.toLowerCase().includes(F)))};for(let j of l.features)I(j)?(delete j.properties.hide_while_editing,n(7,g[j.properties.intervention_type]++,g)):j.properties.hide_while_editing=!0;n(8,l),n(7,g)}function k(E){a=E,n(2,a)}function S(E){c=E,n(3,c)}function O(){t=this.value,Bt.set(t)}const T=()=>St(Bt,t="",t);function P(E){u=E,n(1,u)}return r.$$set=E=>{"schemesGj"in E&&n(8,l=E.schemesGj),"schemes"in E&&n(9,o=E.schemes),"schemesToBeShown"in E&&n(0,i=E.schemesToBeShown),"show"in E&&n(1,u=E.show)},r.$$.update=()=>{r.$$.dirty&28&&d(t,a,c)},[i,u,a,c,t,s,f,g,l,o,k,S,O,T,P]}class Zs extends z{constructor(e){super(),q(this,e,Ks,Xs,H,{schemesGj:8,schemes:9,schemesToBeShown:0,show:1})}}function Js(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ys(r){let e,n,t,l,o;return t=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Js]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data  Crown copyright and database right
  2023.`)},m(i,u){p(i,e,u),y(e,n),b(t,e,null),y(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||($(t.$$.fragment,i),o=!0)},o(i){_(t.$$.fragment,i),o=!1},d(i){i&&m(e),v(t)}}}class Ee extends z{constructor(e){super(),q(this,e,null,Ys,H,{})}}function Wn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Vn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Xn(r){let e,n;return{c(){e=A("span"),n=w(`
    `),he(e,"background",r[5]),he(e,"width","100%"),he(e,"border","1px solid black")},m(t,l){p(t,e,l),y(e,n)},p(t,l){l&1&&he(e,"background",t[5])},d(t){t&&m(e)}}}function Kn(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&B(t,n)},d(l){l&&m(e)}}}function Qs(r){let e,n,t,l=je(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Xn(Vn(r,l,s));let i=je(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Kn(Wn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=C(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();he(e,"display","flex"),he(t,"display","flex"),he(t,"justify-content","space-between")},m(s,a){p(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);p(s,n,a),p(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=je(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Vn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Xn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=je(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Wn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Kn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:te,o:te,d(s){s&&(m(e),m(n),m(t)),yt(o,s),yt(u,s)}}}function xs(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ge extends z{constructor(e){super(),q(this,e,xs,Qs,H,{colorScale:0,limits:1})}}function Zn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function ei(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ti(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ni(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ri(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function li(r){let e,n,t,l,o,i,u,s,a,f,c,g;return t=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ti]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ni]},$$scope:{ctx:r}}}),f=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ri]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),s=A("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(d,k){p(d,e,k),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(d,u,k),p(d,s,k),y(s,a),b(f,s,null),y(s,c),g=!0},p(d,k){const S={};k&65536&&(S.$$scope={dirty:k,ctx:d}),t.$set(S);const O={};k&65536&&(O.$$scope={dirty:k,ctx:d}),o.$set(O);const T={};k&65536&&(T.$$scope={dirty:k,ctx:d}),f.$set(T)},i(d){g||($(t.$$.fragment,d),$(o.$$.fragment,d),$(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(m(e),m(u),m(s)),v(t),v(o),v(f)}}}function oi(r){let e,n,t;return n=new se({props:{$$slots:{default:[li]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Jn(r){let e,n;return e=new Ge({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function si(r){let e;return{c(){e=w("Average cars per household")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ii(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ai(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fi(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ui(r){let e,n,t,l,o,i,u,s,a,f,c,g,d,k;return o=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ii]},$$scope:{ctx:r}}}),u=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ai]},$$scope:{ctx:r}}}),g=new W({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[fi]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=C(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=w("License: "),h(g.$$.fragment),d=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(S,O){p(S,e,O),p(S,n,O),p(S,t,O),y(t,l),b(o,t,null),y(t,i),b(u,t,null),y(t,s),p(S,a,O),p(S,f,O),y(f,c),b(g,f,null),y(f,d),k=!0},p(S,O){const T={};O&65536&&(T.$$scope={dirty:O,ctx:S}),o.$set(T);const P={};O&65536&&(P.$$scope={dirty:O,ctx:S}),u.$set(P);const E={};O&65536&&(E.$$scope={dirty:O,ctx:S}),g.$set(E)},i(S){k||($(o.$$.fragment,S),$(u.$$.fragment,S),$(g.$$.fragment,S),k=!0)},o(S){_(o.$$.fragment,S),_(u.$$.fragment,S),_(g.$$.fragment,S),k=!1},d(S){S&&(m(e),m(n),m(t),m(a),m(f)),v(o),v(u),v(g)}}}function ci(r){let e,n,t;return n=new se({props:{$$slots:{default:[ui]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Yn(r){let e,n;return e=new Ge({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $i(r){let e;return{c(){e=w("Population density")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function pi(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function mi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function _i(r){let e,n,t,l,o,i,u,s,a;return t=new W({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[pi]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[mi]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function gi(r){let e,n,t;return n=new se({props:{$$slots:{default:[_i]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Qn(r){let e,n,t,l;return t=new Ge({props:{colorScale:r[4],limits:r[6]().map(Si)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=C(),h(t.$$.fragment)},m(o,i){p(o,e,i),p(o,n,i),b(t,o,i),l=!0},p:te,i(o){l||($(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),v(t,o)}}}function di(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){p(a,e,f),y(e,n),y(e,t),y(t,o),y(e,i),y(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&B(o,l),f&8192&&u!==(u=a[14]+"")&&B(s,u)},d(a){a&&m(e)}}}function hi(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=A("b"),s=w(u),a=w(`
          cars`)},m(f,c){p(f,e,c),y(e,n),y(e,l),y(e,o),y(e,i),y(i,s),y(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(l,t),c&8200&&u!==(u=f[15]+"")&&B(s,u)},d(f){f&&m(e)}}}function bi(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){p(f,e,c),y(e,n),y(n,l),y(n,o),y(e,i),y(e,s),y(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(l,t),c&8192&&u!==(u=f[14]+"")&&B(s,u)},d(f){f&&m(e)}}}function vi(r){Zn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?bi:o[3]=="average_cars_per_household"?hi:di}let t=n(r),l=t(r);return{c(){l.c(),e=we()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){Zn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function wi(r){let e,n;return e=new oe({props:{$$slots:{default:[vi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ki(r){let e,n,t,l;const o=[R(Ze),{sourceLayer:Ze},{paint:{"fill-color":pe(["get",r[3]],r[6](),r[4]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[wi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i}),e.$on("click",r[5]);const u=[R(`${Ze}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Q(o,[f&0&&ne(R(Ze)),f&0&&{sourceLayer:Ze},f&88&&{paint:{"fill-color":pe(["get",a[3]],a[6](),a[4]),"fill-opacity":K(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&8?Q(u,[f&0&&ne(R(`${Ze}-outline`)),u[1],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function yi(r){let e,n,t,l,o,i,u,s,a,f,c,g,d,k;function S(I){r[7](I)}let O={id:"percent_households_with_car",$$slots:{right:[oi],default:[ei]},$$scope:{ctx:r}};r[0]!==void 0&&(O.checked=r[0]),e=new le({props:O}),V.push(()=>Z(e,"checked",S)),e.$on("change",r[8]);let T=r[3]=="percent_households_with_car"&&Jn(r);function P(I){r[9](I)}let E={id:"average_cars_per_household",$$slots:{right:[ci],default:[si]},$$scope:{ctx:r}};r[1]!==void 0&&(E.checked=r[1]),o=new le({props:E}),V.push(()=>Z(o,"checked",P)),o.$on("change",r[10]);let N=r[3]=="average_cars_per_household"&&Yn(r);function L(I){r[11](I)}let F={id:"population_density",$$slots:{right:[gi],default:[$i]},$$scope:{ctx:r}};r[2]!==void 0&&(F.checked=r[2]),a=new le({props:F}),V.push(()=>Z(a,"checked",L)),a.$on("change",r[12]);let M=r[3]=="population_density"&&Qn(r);return d=new ce({props:{url:`pmtiles://${fe()}/v1/${Ze}.pmtiles`,$$slots:{default:[ki]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),T&&T.c(),l=C(),h(o.$$.fragment),u=C(),N&&N.c(),s=C(),h(a.$$.fragment),c=C(),M&&M.c(),g=C(),h(d.$$.fragment)},m(I,j){b(e,I,j),p(I,t,j),T&&T.m(I,j),p(I,l,j),b(o,I,j),p(I,u,j),N&&N.m(I,j),p(I,s,j),b(a,I,j),p(I,c,j),M&&M.m(I,j),p(I,g,j),b(d,I,j),k=!0},p(I,[j]){const G={};j&65536&&(G.$$scope={dirty:j,ctx:I}),!n&&j&1&&(n=!0,G.checked=I[0],J(()=>n=!1)),e.$set(G),I[3]=="percent_households_with_car"?T?(T.p(I,j),j&8&&$(T,1)):(T=Jn(I),T.c(),$(T,1),T.m(l.parentNode,l)):T&&(ie(),_(T,1,1,()=>{T=null}),ae());const x={};j&65536&&(x.$$scope={dirty:j,ctx:I}),!i&&j&2&&(i=!0,x.checked=I[1],J(()=>i=!1)),o.$set(x),I[3]=="average_cars_per_household"?N?(N.p(I,j),j&8&&$(N,1)):(N=Yn(I),N.c(),$(N,1),N.m(s.parentNode,s)):N&&(ie(),_(N,1,1,()=>{N=null}),ae());const D={};j&65536&&(D.$$scope={dirty:j,ctx:I}),!f&&j&4&&(f=!0,D.checked=I[2],J(()=>f=!1)),a.$set(D),I[3]=="population_density"?M?(M.p(I,j),j&8&&$(M,1)):(M=Qn(I),M.c(),$(M,1),M.m(g.parentNode,g)):M&&(ie(),_(M,1,1,()=>{M=null}),ae());const X={};j&65544&&(X.$$scope={dirty:j,ctx:I}),d.$set(X)},i(I){k||($(e.$$.fragment,I),$(T),$(o.$$.fragment,I),$(N),$(a.$$.fragment,I),$(M),$(d.$$.fragment,I),k=!0)},o(I){_(e.$$.fragment,I),_(T),_(o.$$.fragment,I),_(N),_(a.$$.fragment,I),_(M),_(d.$$.fragment,I),k=!1},d(I){I&&(m(t),m(l),m(u),m(s),m(c),m(g)),v(e,I),T&&T.d(I),v(o,I),N&&N.d(I),v(a,I),M&&M.d(I),v(d,I)}}}let Ze="census_output_areas";const Si=r=>r.toLocaleString();function Ti(r,e,n){let t=ee.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(O){let T=O.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${T}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${T}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(O){l=O,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function g(O){o=O,n(1,o)}const d=()=>{n(0,l=!1),n(2,i=!1)};function k(O){i=O,n(2,i)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,g,d,k,S]}class Oi extends z{constructor(e){super(),q(this,e,Ti,yi,H,{})}}function Ci(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ai(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Li(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Ai]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Ii(r){let e,n,t;return n=new se({props:{$$slots:{default:[Li]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Pi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function Mi(r){let e,n;return e=new oe({props:{$$slots:{default:[Pi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ji(r){let e,n,t,l;const o=[R(ot),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Mi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i}),e.$on("click",Ei);const u=[R(`${ot}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(ot)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Q(u,[f&0&&ne(R(`${ot}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Fi(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ot,$$slots:{right:[Ii],default:[Ci]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new Mt({props:{data:`${fe()}/v1/${ot}.geojson`,$$slots:{default:[ji]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ot="combined_authorities";function Ei(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ni(r,e,n){let t=ee.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Di extends z{constructor(e){super(),q(this,e,Ni,Fi,H,{})}}function Ri(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Bi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Gi(r){let e;return{c(){e=w(`here
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hi(r){let e,n,t,l,o,i,u,s,a;return t=new W({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Bi]},$$scope:{ctx:r}}}),o=new W({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Gi]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function Ui(r){let e,n,t;return n=new se({props:{$$slots:{default:[Hi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function xn(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zi(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,g=r[4].rank.toLocaleString()+"",d,k;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(i),s=C(),a=A("p"),f=w("Rank: "),c=A("b"),d=w(g),k=w(`
        / 32,844 LSOAs`)},m(S,O){p(S,e,O),y(e,t),y(e,l),y(e,o),y(o,u),p(S,s,O),p(S,a,O),y(a,f),y(a,c),y(c,d),y(a,k)},p(S,O){O&16&&n!==(n=S[4].LSOA11CD+"")&&B(t,n),O&16&&i!==(i=S[4].score+"")&&B(u,i),O&16&&g!==(g=S[4].rank.toLocaleString()+"")&&B(d,g)},d(S){S&&(m(e),m(s),m(a))}}}function qi(r){let e,n;return e=new oe({props:{$$slots:{default:[zi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wi(r){let e,n,t,l;const o=[R(ze),{sourceLayer:ze},{paint:{"fill-color":pe(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[qi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i});const u=[R(`${ze}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Q(o,[f&0&&ne(R(ze)),f&0&&{sourceLayer:ze},f&6&&{paint:{"fill-color":pe(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":K(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?Q(u,[f&0&&ne(R(`${ze}-outline`)),u[1],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Vi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ze,$$slots:{right:[Ui],default:[Ri]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[0]&&xn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${ze}.pmtiles`,$$slots:{default:[Wi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],J(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=xn(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ze="imd";function Xi(r,e,n){let t=ee.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Ki extends z{constructor(e){super(),q(this,e,Xi,Vi,H,{})}}function Zi(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ji(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Yi(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Ji]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Qi(r){let e,n,t;return n=new se({props:{$$slots:{default:[Yi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function xi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function ea(r){let e,n;return e=new oe({props:{$$slots:{default:[xi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ta(r){let e,n,t,l;const o=[R(st),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ea]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i}),e.$on("click",ra);const u=[R(`${st}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(st)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Q(u,[f&0&&ne(R(`${st}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function na(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:st,$$slots:{right:[Qi],default:[Zi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new Mt({props:{data:`${fe()}/v1/${st}.geojson`,$$slots:{default:[ta]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let st="local_authority_districts";function ra(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function la(r,e,n){let t=ee.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class oa extends z{constructor(e){super(),q(this,e,la,na,H,{})}}function sa(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function ia(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function aa(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fa(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ua(r){let e;return{c(){e=w("this map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ca(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function $a(r){let e,n,t,l,o,i,u,s,a,f,c,g,d,k,S,O,T,P,E,N,L,F;return t=new W({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ia]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[aa]},$$scope:{ctx:r}}}),u=new W({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[fa]},$$scope:{ctx:r}}}),d=new W({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ua]},$$scope:{ctx:r}}}),P=new W({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ca]},$$scope:{ctx:r}}}),L=new Ee({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=A("strong"),g=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),k=w(" to get more details."),S=C(),O=A("p"),T=w("Data from ONS Geography via "),h(P.$$.fragment),E=w(", as of November 2022."),N=C(),h(L.$$.fragment)},m(M,I){p(M,e,I),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),b(u,e,null),y(e,s),p(M,a,I),p(M,f,I),y(f,c),y(c,g),b(d,c,null),y(c,k),p(M,S,I),p(M,O,I),y(O,T),b(P,O,null),y(O,E),p(M,N,I),b(L,M,I),F=!0},p(M,I){const j={};I&16&&(j.$$scope={dirty:I,ctx:M}),t.$set(j);const G={};I&16&&(G.$$scope={dirty:I,ctx:M}),o.$set(G);const x={};I&16&&(x.$$scope={dirty:I,ctx:M}),u.$set(x);const D={};I&16&&(D.$$scope={dirty:I,ctx:M}),d.$set(D);const X={};I&16&&(X.$$scope={dirty:I,ctx:M}),P.$set(X)},i(M){F||($(t.$$.fragment,M),$(o.$$.fragment,M),$(u.$$.fragment,M),$(d.$$.fragment,M),$(P.$$.fragment,M),$(L.$$.fragment,M),F=!0)},o(M){_(t.$$.fragment,M),_(o.$$.fragment,M),_(u.$$.fragment,M),_(d.$$.fragment,M),_(P.$$.fragment,M),_(L.$$.fragment,M),F=!1},d(M){M&&(m(e),m(a),m(f),m(S),m(O),m(N)),v(t),v(o),v(u),v(d),v(P),v(L,M)}}}function pa(r){let e,n,t;return n=new se({props:{$$slots:{default:[$a]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ma(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function _a(r){let e,n;return e=new oe({props:{$$slots:{default:[ma,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ga(r){let e,n,t,l;const o=[R(Ae),{sourceLayer:Ae},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[_a]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i});const u=[R(`${Ae}-outline`),{sourceLayer:Ae},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(Ae)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Q(u,[f&0&&ne(R(`${Ae}-outline`)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function da(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ae,$$slots:{right:[pa],default:[sa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ae}.pmtiles`,$$slots:{default:[ga]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ae="local_planning_authorities";function ha(r,e,n){let t=ee.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ba extends z{constructor(e){super(),q(this,e,ha,da,H,{})}}function va(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function wa(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ka(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[wa]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function ya(r){let e,n,t;return n=new se({props:{$$slots:{default:[ka]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Sa(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&B(t,n)},d(l){l&&m(e)}}}function Ta(r){let e,n;return e=new oe({props:{$$slots:{default:[Sa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oa(r){let e,n,t,l;const o=[R(Le),{sourceLayer:Le},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ta]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i}),e.$on("click",Aa);const u=[R(`${Le}-outline`),{sourceLayer:Le},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(Le)),f&0&&{sourceLayer:Le},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Q(u,[f&0&&ne(R(`${Le}-outline`)),f&0&&{sourceLayer:Le},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Ca(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Le,$$slots:{right:[ya],default:[va]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Le}.pmtiles`,$$slots:{default:[Oa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Le="parliamentary_constituencies";function Aa(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function La(r,e,n){let t=ee.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ia extends z{constructor(e){super(),q(this,e,La,Ca,H,{})}}function Pa(r){let e;return{c(){e=w("Pollution")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ma(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ja(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Fa(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ea(r){let e,n,t,l,o,i,u,s,a,f,c,g,d,k,S,O;return t=new W({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ma]},$$scope:{ctx:r}}}),f=new W({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[ja]},$$scope:{ctx:r}}}),g=new W({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Fa]},$$scope:{ctx:r}}}),S=new Ee({}),{c(){e=A("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        gm
        `),o=A("sup"),o.textContent="3",i=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=C(),s=A("p"),a=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(g.$$.fragment),d=w("."),k=C(),h(S.$$.fragment)},m(T,P){p(T,e,P),y(e,n),b(t,e,null),y(e,l),y(e,o),y(e,i),p(T,u,P),p(T,s,P),y(s,a),b(f,s,null),y(s,c),b(g,s,null),y(s,d),p(T,k,P),b(S,T,P),O=!0},p(T,P){const E={};P&2048&&(E.$$scope={dirty:P,ctx:T}),t.$set(E);const N={};P&2048&&(N.$$scope={dirty:P,ctx:T}),f.$set(N);const L={};P&2048&&(L.$$scope={dirty:P,ctx:T}),g.$set(L)},i(T){O||($(t.$$.fragment,T),$(f.$$.fragment,T),$(g.$$.fragment,T),$(S.$$.fragment,T),O=!0)},o(T){_(t.$$.fragment,T),_(f.$$.fragment,T),_(g.$$.fragment,T),_(S.$$.fragment,T),O=!1},d(T){T&&(m(e),m(u),m(s),m(k)),v(t),v(f),v(g),v(S,T)}}}function Na(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ea]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function er(r){let e,n,t,l,o=r[3](r[0])+"",i,u,s,a,f,c,g,d,k,S,O,T,P;function E(I){r[7](I)}let N={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(N.value=r[0]),e=new Tt({props:N}),V.push(()=>Z(e,"value",E));const L=[Ra,Da],F=[];function M(I,j){return I[0]=="Noise"?0:1}return d=M(r),k=F[d]=L[d](r),{c(){h(e.$$.fragment),t=C(),l=A("p"),i=w(o),u=C(),s=A("div"),a=A("label"),f=w(`Opacity
      `),c=A("input"),g=C(),k.c(),S=we(),U(c,"type","range"),U(c,"min","0"),U(c,"max","100")},m(I,j){b(e,I,j),p(I,t,j),p(I,l,j),y(l,i),p(I,u,j),p(I,s,j),y(s,a),y(a,f),y(a,c),Gt(c,r[2]),p(I,g,j),F[d].m(I,j),p(I,S,j),O=!0,T||(P=[kt(c,"change",r[8]),kt(c,"input",r[8])],T=!0)},p(I,j){const G={};!n&&j&1&&(n=!0,G.value=I[0],J(()=>n=!1)),e.$set(G),(!O||j&1)&&o!==(o=I[3](I[0])+"")&&B(i,o),j&4&&Gt(c,I[2]);let x=d;d=M(I),d===x?F[d].p(I,j):(ie(),_(F[x],1,1,()=>{F[x]=null}),ae(),k=F[d],k?k.p(I,j):(k=F[d]=L[d](I),k.c()),$(k,1),k.m(S.parentNode,S))},i(I){O||($(e.$$.fragment,I),$(k),O=!0)},o(I){_(e.$$.fragment,I),_(k),O=!1},d(I){I&&(m(t),m(l),m(u),m(s),m(g),m(S)),v(e,I),F[d].d(I),T=!1,Kr(P)}}}function Da(r){let e,n,t;return{c(){e=A("img"),gn(e.src,n=r[5](r[0]))||U(e,"src",n),U(e,"width",150),U(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){p(l,e,o)},p(l,o){o&1&&!gn(e.src,n=l[5](l[0]))&&U(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&U(e,"alt",t)},i:te,o:te,d(l){l&&m(e)}}}function Ra(r){let e,n;return e=new Ge({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ba(r){let e,n;const t=[R("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new il({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&6?Q(t,[t[0],i&4&&{paint:{"raster-opacity":o[2]/100}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ga(r){let e,n,t,l,o,i;function u(f){r[6](f)}let s={id:"pollution",$$slots:{right:[Na],default:[Pa]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[1]&&er(r);return o=new yl({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Ba]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],J(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&$(a,1)):(a=er(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const d={};c&1&&(d.tiles=[f[4](f[0])]),c&2054&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}function Ha(r,e,n){let t,l=!1,o=50,i="PM25_viridis";function u(){return i=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${i}/MapServer/WMSServer`}function s(k){return t[1]}function a(k){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${S}`}function f(k){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${S}`}function c(k){l=k,n(1,l)}function g(k){i=k,n(0,i)}function d(){o=Zr(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[i])},[i,l,o,s,a,f,c,g,d]}class Ua extends z{constructor(e){super(),q(this,e,Ha,Ga,H,{})}}function za(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function qa(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Wa(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[qa]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Va(r){let e,n,t;return n=new se({props:{$$slots:{default:[Wa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Xa(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function Ka(r){let e,n;return e=new oe({props:{$$slots:{default:[Xa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Za(r){let e,n,t,l;const o=[R(Ie),{sourceLayer:Ie},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ka]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i}),e.$on("click",Ya);const u=[R(`${Ie}-outline`),{sourceLayer:Ie},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&ne(R(Ie)),f&0&&{sourceLayer:Ie},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Q(u,[f&0&&ne(R(`${Ie}-outline`)),f&0&&{sourceLayer:Ie},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Ja(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ie,$$slots:{right:[Va],default:[za]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ie}.pmtiles`,$$slots:{default:[Za]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ie="wards";function Ya(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Qa(r,e,n){let t=ee.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class xa extends z{constructor(e){super(),q(this,e,Qa,Ja,H,{})}}function ef(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function tf(r){let e,n,t,l;return t=new W({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[ef]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){p(o,e,i),y(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||($(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&m(e),v(t)}}}class Ve extends z{constructor(e){super(),q(this,e,null,tf,H,{})}}function nf(r){let e,n,t;return e=new me({props:{color:ee.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function rf(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function lf(r){let e,n,t,l,o,i,u,s,a;return o=new W({props:{href:"https://gtfs.org",$$slots:{default:[rf]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=C(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),y(t,l),b(o,t,null),y(t,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(u)),v(o),v(s,f)}}}function of(r){let e,n,t;return n=new se({props:{$$slots:{default:[lf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function sf(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function af(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ff(r){let e;function n(o,i){return o[2].has_bus_lane?af:sf}let t=n(r),l=t(r);return{c(){l.c(),e=we()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function uf(r){let e,n;return e=new oe({props:{$$slots:{default:[ff,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cf(r){let e,n;const t=[R(it),{sourceLayer:it},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ee.bus_route_with_lane,ee.bus_route_without_lane],"line-width":5,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[uf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Q(t,[i&0&&ne(R(it)),i&0&&{sourceLayer:it},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function $f(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:it,$$slots:{right:[of],default:[nf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${it}.pmtiles`,$$slots:{default:[cf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let it="bus_routes";function pf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class mf extends z{constructor(e){super(),q(this,e,pf,$f,H,{})}}function tr(r){const e=kf(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function nr(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function _f(r){let e;return{c(){e=w("Cycle paths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function gf(r){let e,n,t,l,o,i,u,s;return u=new Ve({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=C(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=C(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=C(),h(u.$$.fragment)},m(a,f){p(a,e,f),p(a,n,f),p(a,t,f),p(a,l,f),p(a,o,f),p(a,i,f),b(u,a,f),s=!0},p:te,i(a){s||($(u.$$.fragment,a),s=!0)},o(a){_(u.$$.fragment,a),s=!1},d(a){a&&(m(e),m(n),m(t),m(l),m(o),m(i)),v(u,a)}}}function df(r){let e,n,t;return n=new se({props:{$$slots:{default:[gf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function rr(r){let e,n,t=je(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=lr(nr(r,t,i));const o=i=>_(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=we()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);p(i,e,u),n=!0},p(i,u){if(u&2){t=je(i[1]);let s;for(s=0;s<t.length;s+=1){const a=nr(i,t,s);l[s]?(l[s].p(a,u),$(l[s],1)):(l[s]=lr(a),l[s].c(),$(l[s],1),l[s].m(e.parentNode,e))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)$(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)_(l[u]);n=!1},d(i){i&&m(e),yt(l,i)}}}function lr(r){let e,n,t,l=r[7]+"",o,i,u;return n=new me({props:{color:r[8]}}),{c(){e=A("div"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){p(s,e,a),b(n,e,null),y(e,t),y(e,o),y(e,i),u=!0},p:te,i(s){u||($(n.$$.fragment,s),u=!0)},o(s){_(n.$$.fragment,s),u=!1},d(s){s&&m(e),v(n)}}}function hf(r){tr(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,g,d=r[6]+"",k;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Direction: "),u=A("b"),a=C(),f=A("p"),c=w("Width: "),g=A("b"),k=w(d)},m(S,O){p(S,e,O),y(e,t),p(S,l,O),p(S,o,O),y(o,i),y(o,u),u.innerHTML=s,p(S,a,O),p(S,f,O),y(f,c),y(f,g),y(g,k)},p(S,O){tr(S),O&8&&n!==(n=S[4]+"")&&B(t,n),O&8&&s!==(s=S[5]+"")&&(u.innerHTML=s),O&8&&d!==(d=S[6]+"")&&B(k,d)},d(S){S&&(m(e),m(l),m(o),m(a),m(f))}}}function bf(r){let e,n;return e=new oe({props:{$$slots:{default:[hf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vf(r){let e,n;const t=[R(at),{sourceLayer:at},{paint:{"line-color":sn(["get","kind"],{track:ee.cycle_paths.track,lane:ee.cycle_paths.lane,shared_use_segregated:ee.cycle_paths.shared_use_segregated,shared_use_unsegregated:ee.cycle_paths.shared_use_unsegregated},"red"),"line-width":Re,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[bf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),e.$on("click",yf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Q(t,[i&0&&ne(R(at)),i&0&&{sourceLayer:at},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function wf(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:at,$$slots:{right:[df],default:[_f]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[0]&&rr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${at}.pmtiles`,$$slots:{default:[vf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],J(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=rr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const d={};c&2049&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let at="cycle_paths";function kf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function yf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Sf(r,e,n){let t=[["Separated tracks",ee.cycle_paths.track],["Unprotected lanes",ee.cycle_paths.lane],["Shared-use (segregated)",ee.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",ee.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Tf extends z{constructor(e){super(),q(this,e,Sf,wf,H,{})}}function Of(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Cf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Af(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Cf]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Lf(r){let e,n,t;return n=new se({props:{$$slots:{default:[Af]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function If(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&B(t,n)},d(l){l&&m(e)}}}function Pf(r){let e,n;return e=new oe({props:{$$slots:{default:[If,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mf(r){let e,n;const t=[R(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Pf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&ne(R(ft)),i&0&&{sourceLayer:ft},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function jf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ft,$$slots:{right:[Lf],default:[Of]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${ft}.pmtiles`,$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ft="mrn";function Ff(r,e,n){let t=ee.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ef extends z{constructor(e){super(),q(this,e,Ff,jf,H,{})}}function Nf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Df(r){let e;return{c(){e=w("the PCT website")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Rf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Bf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new W({props:{href:"https://www.pct.bike",$$slots:{default:[Df]},$$scope:{ctx:r}}}),a=new W({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Rf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=C(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=C(),o=A("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(g,d){p(g,e,d),p(g,n,d),p(g,t,d),p(g,l,d),p(g,o,d),y(o,i),b(u,o,null),y(o,s),b(a,o,null),y(o,f),c=!0},p(g,d){const k={};d&1024&&(k.$$scope={dirty:d,ctx:g}),u.$set(k);const S={};d&1024&&(S.$$scope={dirty:d,ctx:g}),a.$set(S)},i(g){c||($(u.$$.fragment,g),$(a.$$.fragment,g),c=!0)},o(g){_(u.$$.fragment,g),_(a.$$.fragment,g),c=!1},d(g){g&&(m(e),m(n),m(t),m(l),m(o)),v(u),v(a)}}}function Gf(r){let e,n,t;return n=new se({props:{$$slots:{default:[Bf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function or(r){let e,n,t,l,o,i,u,s;e=new Ge({props:{colorScale:r[3],limits:r[4]}});function a(d){r[7](d)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new Sr({props:f}),V.push(()=>Z(t,"value",a));function c(d){r[8](d)}let g={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(g.value=r[1]),i=new Tt({props:g}),V.push(()=>Z(i,"value",c)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),o=C(),h(i.$$.fragment)},m(d,k){b(e,d,k),p(d,n,k),b(t,d,k),p(d,o,k),b(i,d,k),s=!0},p(d,k){const S={};!l&&k&1&&(l=!0,S.value=d[0],J(()=>l=!1)),t.$set(S);const O={};!u&&k&2&&(u=!0,O.value=d[1],J(()=>u=!1)),i.$set(O)},i(d){s||($(e.$$.fragment,d),$(t.$$.fragment,d),$(i.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(i.$$.fragment,d),s=!1},d(d){d&&(m(n),m(o)),v(e,d),v(t,d),v(i,d)}}}function Hf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new un(!1),t=we(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Uf(r){let e,n;return e=new oe({props:{$$slots:{default:[Hf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zf(r){let e,n;const t=[R(Pe),{sourceLayer:Pe},{paint:{"line-color":pe(["get",r[1]],r[4],r[3]),"line-width":Re,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Pe?"visible":"none"}}];let l={$$slots:{default:[Uf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Q(t,[i&0&&ne(R(Pe)),i&0&&{sourceLayer:Pe},i&26&&{paint:{"line-color":pe(["get",o[1]],o[4],o[3]),"line-width":Re,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Pe?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function qf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new un(!1),t=we(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Wf(r){let e,n;return e=new oe({props:{$$slots:{default:[qf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vf(r){let e,n;const t=[R(Je),{sourceLayer:Je},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":pe(["get",r[1]],r[4],r[3]),"line-width":Re,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Je?"visible":"none"}}];let l={$$slots:{default:[Wf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Q(t,[i&0&&ne(R(Je)),i&0&&{sourceLayer:Je},t[2],t[3],i&26&&{paint:{"line-color":pe(["get",o[1]],o[4],o[3]),"line-width":Re,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Je?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Xf(r){let e,n,t,l,o,i,u,s;function a(g){r[6](g)}let f={id:Pe,$$slots:{right:[Gf],default:[Nf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new le({props:f}),V.push(()=>Z(e,"checked",a));let c=r[2]&&or(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Pe}.pmtiles`,$$slots:{default:[zf]},$$scope:{ctx:r}}}),u=new ce({props:{url:`pmtiles://${fe()}/v1/${Je}.pmtiles`,$$slots:{default:[Vf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),c&&c.c(),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(g,d){b(e,g,d),p(g,t,d),c&&c.m(g,d),p(g,l,d),b(o,g,d),p(g,i,d),b(u,g,d),s=!0},p(g,[d]){const k={};d&1024&&(k.$$scope={dirty:d,ctx:g}),!n&&d&4&&(n=!0,k.checked=g[2],J(()=>n=!1)),e.$set(k),g[2]?c?(c.p(g,d),d&4&&$(c,1)):(c=or(g),c.c(),$(c,1),c.m(l.parentNode,l)):c&&(ie(),_(c,1,1,()=>{c=null}),ae());const S={};d&1031&&(S.$$scope={dirty:d,ctx:g}),o.$set(S);const O={};d&1031&&(O.$$scope={dirty:d,ctx:g}),u.$set(O)},i(g){s||($(e.$$.fragment,g),$(c),$(o.$$.fragment,g),$(u.$$.fragment,g),s=!0)},o(g){_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(u.$$.fragment,g),s=!1},d(g){g&&(m(t),m(l),m(i)),v(e,g),c&&c.d(g),v(o,g),v(u,g)}}}let Pe="pct_commute",Je="pct_school";function Kf(r,e,n){let t=ee.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Pe,i="baseline",u=!1;function s(g){let d=g.baseline,k=g.gov_target,S=g.go_dutch,O=`<h2>Trip purpose: ${o==Pe?"commuting":"school"}</h2>`;if(O+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)O+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,O+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let T=(k/d).toFixed(1),P=(S/d).toFixed(1);O+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${T}x</b> of baseline)</p>`,O+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${P}x</b> of baseline)</p>`}return O}function a(g){u=g,n(2,u)}function f(g){o=g,n(0,o)}function c(g){i=g,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class Zf extends z{constructor(e){super(),q(this,e,Kf,Xf,H,{})}}function Jf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Yf(r){let e;return{c(){e=w("Basemap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xf(r){let e,n,t,l,o,i,u,s,a,f,c,g;return t=new W({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Yf]},$$scope:{ctx:r}}}),f=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Qf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=C(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=C(),s=A("p"),a=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(d,k){p(d,e,k),y(e,n),b(t,e,null),y(e,l),p(d,o,k),p(d,i,k),p(d,u,k),p(d,s,k),y(s,a),b(f,s,null),y(s,c),g=!0},p(d,k){const S={};k&256&&(S.$$scope={dirty:k,ctx:d}),t.$set(S);const O={};k&256&&(O.$$scope={dirty:k,ctx:d}),f.$set(O)},i(d){g||($(t.$$.fragment,d),$(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(m(e),m(o),m(i),m(u),m(s)),v(t),v(f)}}}function eu(r){let e,n,t;return n=new se({props:{$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function sr(r){let e,n,t,l,o;e=new Ge({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new Sr({props:u}),V.push(()=>Z(t,"value",i)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],J(()=>l=!1)),t.$set(f)},i(s){o||($(e.$$.fragment,s),$(t.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),o=!1},d(s){s&&m(n),v(e,s),v(t,s)}}}function tu(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,g=r[4][r[7].highest_description]+"",d,k;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=C(),u=A("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),d=w(g),k=w(")")},m(S,O){p(S,e,O),y(e,n),y(e,l),y(e,o),p(S,i,O),p(S,u,O),y(u,s),y(u,f),y(u,c),y(u,d),y(u,k)},p(S,O){O&128&&t!==(t=S[7].indicative_mph+"")&&B(l,t),O&128&&a!==(a=S[7].highest_mph+"")&&B(f,a),O&128&&g!==(g=S[4][S[7].highest_description]+"")&&B(d,g)},d(S){S&&(m(e),m(i),m(u))}}}function nu(r){let e,n;return e=new oe({props:{$$slots:{default:[tu,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ru(r){let e,n;const t=[R(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":pe(["get",r[0]],r[3],r[2]),"line-width":Re,"line-opacity":K(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[nu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Q(t,[i&0&&ne(R(ut)),i&0&&{sourceLayer:ut},t[2],t[3],i&13&&{paint:{"line-color":pe(["get",o[0]],o[3],o[2]),"line-width":Re,"line-opacity":K(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function lu(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ut,$$slots:{right:[eu],default:[Jf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[1]&&sr(r);return o=new ce({props:{url:`pmtiles://${cn()}/v1/${ut}.pmtiles`,$$slots:{default:[ru]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],J(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&$(a,1)):(a=sr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="road_speeds";function ou(r,e,n){let t=ee.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class su extends z{constructor(e){super(),q(this,e,ou,lu,H,{})}}function iu(r){let e;return{c(){e=w("OS Road widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function au(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fu(r){let e,n,t,l,o,i,u,s,a;return u=new W({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[au]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=C(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=C(),o=A("p"),i=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),p(f,l,c),p(f,o,c),y(o,i),b(u,o,null),y(o,s),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||($(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(l),m(o)),v(u)}}}function uu(r){let e,n,t;return n=new se({props:{$$slots:{default:[fu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ir(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cu(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",g,d;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),i=w(`
        meters`),u=C(),s=A("p"),a=w("Minimum width: "),f=A("b"),g=w(c),d=w(`
        meters`)},m(k,S){p(k,e,S),y(e,n),y(e,t),y(t,o),y(e,i),p(k,u,S),p(k,s,S),y(s,a),y(s,f),y(f,g),y(s,d)},p(k,S){S&16&&l!==(l=k[4].average+"")&&B(o,l),S&16&&c!==(c=k[4].minimum+"")&&B(g,c)},d(k){k&&(m(e),m(u),m(s))}}}function $u(r){let e,n;return e=new oe({props:{$$slots:{default:[cu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pu(r){let e,n;const t=[R(ct),{sourceLayer:ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":pe(["get","average"],r[2],r[1]),"line-width":Re,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[$u]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Q(t,[i&0&&ne(R(ct)),i&0&&{sourceLayer:ct},t[2],t[3],i&6&&{paint:{"line-color":pe(["get","average"],o[2],o[1]),"line-width":Re,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function mu(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ct,$$slots:{right:[uu],default:[iu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[0]&&ir(r);return o=new ce({props:{url:`pmtiles://${cn()}/v1/${ct}.pmtiles`,$$slots:{default:[pu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],J(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=ir(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ct="road_widths";function _u(r,e,n){let t=ee.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class gu extends z{constructor(e){super(),q(this,e,_u,mu,H,{})}}function du(r){let e,n,t;return{c(){e=A("input"),U(e,"class","govuk-file-upload"),U(e,"id","load-criticals"),U(e,"type","file")},m(l,o){p(l,e,o),r[7](e),n||(t=kt(e,"change",r[5]),n=!0)},p:te,d(l){l&&m(e),r[7](null),n=!1,t()}}}function ar(r){let e,n;return e=new jt({props:{small:!0,$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hu(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new me({props:{color:vt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),p(u,n,s),p(u,l,s),p(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&B(l,t)},i(u){i||($(e.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),i=!1},d(u){u&&(m(n),m(l),m(o)),v(e,u)}}}function bu(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[hu]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),V.push(()=>Z(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],J(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function vu(r){let e,n,t,l,o,i;e=new yr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[du]},$$scope:{ctx:r}}}),t=new Tr({props:{errorMessage:r[3]}});let u=r[2]>0&&ar(r);return{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),u&&u.c(),o=we()},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),u&&u.m(s,a),p(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&$(u,1)):(u=ar(s),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(ie(),_(u,1,1,()=>{u=null}),ae())},i(s){i||($(e.$$.fragment,s),$(t.$$.fragment,s),$(u),i=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(u),i=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),u&&u.d(s)}}}function wu(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,g,d,k,S=r[10].notes+"",O,T,P,E,N,L,F,M=r[10].id+"",I,j,G,x,D,X=(r[10].inspector??"???")+"",$e,_t,be,xe=r[10].submission_time+"",gt,et,_e,dt,Ne,He=r[10].scheme_reference+"",Xe,ht,tt,Ke=r[10].current_design_stage+"",nt;return{c(){e=A("div"),n=A("h2"),l=w(t),o=C(),i=A("p"),u=A("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=C(),g=A("p"),d=A("u"),d.textContent="Notes",k=w(`
          : `),O=w(S),T=C(),P=A("hr"),E=C(),N=A("p"),L=w("Critical issue ID: "),F=A("b"),I=w(M),j=C(),G=A("p"),x=w("Submitted by "),D=A("b"),$e=w(X),_t=w(`
          at
          `),be=A("b"),gt=w(xe),et=C(),_e=A("p"),dt=w("For scheme "),Ne=A("b"),Xe=w(He),ht=w(`
          in stage
          `),tt=A("b"),nt=w(Ke),he(e,"max-width","30vw")},m(ve,Ce){p(ve,e,Ce),y(e,n),y(n,l),y(e,o),y(e,i),y(i,u),y(i,s),y(i,f),y(e,c),y(e,g),y(g,d),y(g,k),y(g,O),y(e,T),y(e,P),y(e,E),y(e,N),y(N,L),y(N,F),y(F,I),y(e,j),y(e,G),y(G,x),y(G,D),y(D,$e),y(G,_t),y(G,be),y(be,gt),y(e,et),y(e,_e),y(_e,dt),y(_e,Ne),y(Ne,Xe),y(_e,ht),y(_e,tt),y(tt,nt)},p(ve,Ce){Ce&1024&&t!==(t=ve[10].critical_type+"")&&B(l,t),Ce&1024&&a!==(a=ve[10].location_description+"")&&B(f,a),Ce&1024&&S!==(S=ve[10].notes+"")&&B(O,S),Ce&1024&&M!==(M=ve[10].id+"")&&B(I,M),Ce&1024&&X!==(X=(ve[10].inspector??"???")+"")&&B($e,X),Ce&1024&&xe!==(xe=ve[10].submission_time+"")&&B(gt,xe),Ce&1024&&He!==(He=ve[10].scheme_reference+"")&&B(Xe,He),Ce&1024&&Ke!==(Ke=ve[10].current_design_stage+"")&&B(nt,Ke)},d(ve){ve&&m(e)}}}function ku(r){let e,n;return e=new oe({props:{$$slots:{default:[wu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yu(r){let e,n,t,l,o,i;const u=[R(`${qe}-clusters`),{applyToClusters:!0},{paint:{"circle-color":vt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let d=0;d<u.length;d+=1)s=Y(s,u[d]);e=new We({props:s}),e.$on("click",r[6]);const a=[R(`${qe}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=Y(f,a[d]);t=new Cl({props:f});const c=[R(`${qe}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":vt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let g={$$slots:{default:[ku]},$$scope:{ctx:r}};for(let d=0;d<c.length;d+=1)g=Y(g,c[d]);return o=new We({props:g}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment)},m(d,k){b(e,d,k),p(d,n,k),b(t,d,k),p(d,l,k),b(o,d,k),i=!0},p(d,k){const S=k&2?Q(u,[k&0&&ne(R(`${qe}-clusters`)),u[1],k&0&&{paint:{"circle-color":vt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},k&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(S);const O=k&2?Q(a,[k&0&&ne(R(`${qe}-counts`)),a[1],k&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(O);const T=k&2?Q(c,[k&0&&ne(R(`${qe}-points`)),c[1],c[2],c[3],k&0&&{paint:{"circle-color":vt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},k&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};k&2048&&(T.$$scope={dirty:k,ctx:d}),o.$set(T)},i(d){i||($(e.$$.fragment,d),$(t.$$.fragment,d),$(o.$$.fragment,d),i=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),i=!1},d(d){d&&(m(n),m(l)),v(e,d),v(t,d),v(o,d)}}}function Su(r){let e,n,t,l;return e=new Se({props:{label:"Critical Issues",$$slots:{default:[vu]},$$scope:{ctx:r}}}),t=new Mt({props:{id:qe,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[yu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}let qe="criticals",vt="red";function Tu(r,e,n){let t;Oe(r,an,d=>n(9,t=d));let l,o=!0,i=0,u="",s=Jr();async function a(d){try{n(4,s=await Rs(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(k){n(3,u=`The file you loaded is broken: ${k}`)}}function f(d){t.getSource(qe).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id,(k,S)=>{k||t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:S})})}function c(d){V[d?"unshift":"push"](()=>{l=d,n(0,l)})}function g(d){o=d,n(1,o)}return[l,o,i,u,s,a,f,c,g]}class Ou extends z{constructor(e){super(),q(this,e,Tu,Su,H,{})}}function Cu(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Au(r){let e;return{c(){e=w("crossing")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Lu(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Au]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Iu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Lu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Pu(r){let e,n=fr(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=fr(l[3])+"")&&B(t,n)},d(l){l&&m(e)}}}function Mu(r){let e,n;return e=new oe({props:{$$slots:{default:[Pu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ju(r){let e,n;const t=[R($t),{sourceLayer:$t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Mu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new We({props:l}),e.$on("click",Eu),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&ne(R($t)),i&0&&{sourceLayer:$t},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Fu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:$t,$$slots:{right:[Iu],default:[Cu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${$t}.pmtiles`,$$slots:{default:[ju]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let $t="crossings";function fr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Eu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Nu(r,e,n){let t=ee.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Du extends z{constructor(e){super(),q(this,e,Nu,Fu,H,{})}}function Ru(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Bu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Gu(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Bu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Hu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Uu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(i,u){p(i,e,u),y(e,n),y(e,t),y(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&B(o,l)},d(i){i&&m(e)}}}function zu(r){let e,n;return e=new oe({props:{$$slots:{default:[Uu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qu(r){let e,n;const t=[R(pt),{sourceLayer:pt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[zu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new We({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&ne(R(pt)),i&0&&{sourceLayer:pt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Wu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:pt,$$slots:{right:[Hu],default:[Ru]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${pt}.pmtiles`,$$slots:{default:[qu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let pt="cycle_parking";function Vu(r,e,n){let t=ee.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Xu extends z{constructor(e){super(),q(this,e,Vu,Wu,H,{})}}function Ku(r){let e,n,t,l;return e=new me({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=C(),t=w(r[2])},m(o,i){b(e,o,i),p(o,n,i),p(o,t,i),l=!0},p(o,i){(!l||i&4)&&B(t,o[2])},i(o){l||($(e.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),l=!1},d(o){o&&(m(n),m(t)),v(e,o)}}}function Zu(r){let e;const n=r[5].default,t=At(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Lt(t,n,l,l[7],e?Pt(n,l[7],o,null):It(l[7]),null)},i(l){e||($(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Ju(r){let e,n,t;return n=new se({props:{$$slots:{default:[Zu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Yu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&B(t,n)},d(l){l&&m(e)}}}function Qu(r){let e,n;return e=new oe({props:{$$slots:{default:[Yu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xu(r){let e,n;const t=[R(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":K(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Be({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Q(t,[i&1&&ne(R(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":K(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ec(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[Ju],default:[Ku]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],J(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${fe()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function tc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=ee[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class pn extends z{constructor(e){super(),q(this,e,tc,ec,H,{name:0,singularNoun:1,pluralNoun:2})}}function nc(r){let e;return{c(){e=w("hospital")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function rc(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[nc]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function lc(r){let e,n;return e=new pn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class oc extends z{constructor(e){super(),q(this,e,null,lc,H,{})}}function sc(r){let e,n,t;return e=new me({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function ic(r){let e;return{c(){e=w("railway station")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ac(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[ic]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function fc(r){let e,n,t;return n=new se({props:{$$slots:{default:[ac]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function uc(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&B(t,n)},d(l){l&&m(e)}}}function cc(r){let e,n;return e=new oe({props:{$$slots:{default:[uc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $c(r){let e,n;const t=[R(zt),{paint:{"circle-color":r[1],"circle-radius":Ht/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[cc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new We({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&ne(R(zt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Ht/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function pc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:zt,$$slots:{right:[fc],default:[sc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new Mt({props:{data:`${fe()}/v1/${zt}.geojson`,$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let zt="railway_stations";function mc(r,e,n){let t=ee.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class _c extends z{constructor(e){super(),q(this,e,mc,pc,H,{})}}function gc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function dc(r){let e,n,t,l,o,i,u;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[gc]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function hc(r){let e,n;return e=new pn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[dc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class bc extends z{constructor(e){super(),q(this,e,null,hc,H,{})}}function vc(r){let e;return{c(){e=w("sports pitches")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function wc(r){let e;return{c(){e=w("sports centres")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function kc(r){let e,n,t,l,o,i,u,s,a;return t=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[vc]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[wc]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function yc(r){let e,n;return e=new pn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[kc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Sc extends z{constructor(e){super(),q(this,e,null,yc,H,{})}}function Tc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Oc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Cc(r){let e;return{c(){e=w("methodology")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ac(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new W({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Oc]},$$scope:{ctx:r}}}),o=new W({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),f=new Ee({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=C(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=C(),h(f.$$.fragment)},m(g,d){p(g,e,d),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(g,u,d),p(g,s,d),p(g,a,d),b(f,g,d),c=!0},p(g,d){const k={};d&64&&(k.$$scope={dirty:d,ctx:g}),t.$set(k);const S={};d&64&&(S.$$scope={dirty:d,ctx:g}),o.$set(S)},i(g){c||($(t.$$.fragment,g),$(o.$$.fragment,g),$(f.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),c=!1},d(g){g&&(m(e),m(u),m(s),m(a)),v(t),v(o),v(f,g)}}}function Lc(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ac]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ur(r){let e,n;return e=new Ge({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ic(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,g,d,k=r[5].pedal_cycles_2022.toLocaleString()+"",S,O,T,P,E,N=r[5].method+"",L;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(s),f=C(),c=A("p"),g=w("Total pedal cycles (2022 AADF): "),d=A("b"),S=w(k),O=C(),T=A("p"),P=w("Count method: "),E=A("b"),L=w(N)},m(F,M){p(F,e,M),y(e,t),p(F,l,M),p(F,o,M),y(o,i),y(o,u),y(u,a),p(F,f,M),p(F,c,M),y(c,g),y(c,d),y(d,S),p(F,O,M),p(F,T,M),y(T,P),y(T,E),y(E,L)},p(F,M){M&32&&n!==(n=F[5].location+"")&&B(t,n),M&32&&s!==(s=F[5].motor_vehicles_2022.toLocaleString()+"")&&B(a,s),M&32&&k!==(k=F[5].pedal_cycles_2022.toLocaleString()+"")&&B(S,k),M&32&&N!==(N=F[5].method+"")&&B(L,N)},d(F){F&&(m(e),m(l),m(o),m(f),m(c),m(O),m(T))}}}function Pc(r){let e,n;return e=new oe({props:{$$slots:{default:[Ic,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mc(r){let e,n;const t=[R(mt),{sourceLayer:mt},{paint:{"circle-color":pe(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Pc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new We({props:l}),e.$on("click",Fc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Q(t,[i&0&&ne(R(mt)),i&0&&{sourceLayer:mt},i&6&&{paint:{"circle-color":pe(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function jc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:mt,$$slots:{right:[Lc],default:[Tc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[0]&&ur(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${mt}.pmtiles`,$$slots:{default:[Mc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],J(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=ur(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let mt="vehicle_counts";function Fc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Ec(r,e,n){let t=ee.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class Nc extends z{constructor(e){super(),q(this,e,Ec,jc,H,{})}}function Dc(r){let e,n,t,l,o,i,u,s;return e=new bc({}),t=new oc({}),o=new Sc({}),u=new _c({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),p(a,l,f),b(o,a,f),p(a,i,f),b(u,a,f),s=!0},i(a){s||($(e.$$.fragment,a),$(t.$$.fragment,a),$(o.$$.fragment,a),$(u.$$.fragment,a),s=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),s=!1},d(a){a&&(m(n),m(l),m(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Rc(r){let e,n;return e=new jt({props:{small:!0,$$slots:{default:[Dc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Tf({}),t=new Ef({}),o=new mf({}),u=new Xu({}),a=new Du({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,g){b(e,c,g),p(c,n,g),b(t,c,g),p(c,l,g),b(o,c,g),p(c,i,g),b(u,c,g),p(c,s,g),b(a,c,g),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Gc(r){let e,n;return e=new jt({props:{small:!0,$$slots:{default:[Bc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Ia({}),t=new xa({}),o=new Di({}),u=new oa({}),a=new ba({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,g){b(e,c,g),p(c,n,g),b(t,c,g),p(c,l,g),b(o,c,g),p(c,i,g),b(u,c,g),p(c,s,g),b(a,c,g),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Uc(r){let e,n;return e=new jt({props:{small:!0,$$slots:{default:[Hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zc(r){let e,n,t,l;return e=new Oi({}),t=new Ki({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function qc(r){let e,n,t,l;return e=new gu({}),t=new su({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Wc(r){let e,n,t,l,o=on()=="Private (development)",i,u,s;e=new Nc({}),t=new Zf({});let a=o&&qc();return u=new Ua({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),a&&a.c(),i=C(),h(u.$$.fragment)},m(f,c){b(e,f,c),p(f,n,c),b(t,f,c),p(f,l,c),a&&a.m(f,c),p(f,i,c),b(u,f,c),s=!0},p:te,i(f){s||($(e.$$.fragment,f),$(t.$$.fragment,f),$(a),$(u.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(a),_(u.$$.fragment,f),s=!1},d(f){f&&(m(n),m(l),m(i)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function Vc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new rl({props:u}),V.push(()=>Z(e,"enabled",i)),l=new fl({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],J(()=>n=!1)),e.$set(f)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Xc(r){let e,n,t,l,o,i,u,s,a,f,c,g,d,k,S,O;return e=new Ou({}),t=new Se({props:{label:"Trip generators",$$slots:{default:[Rc]},$$scope:{ctx:r}}}),o=new Se({props:{label:"Existing infrastructure",$$slots:{default:[Gc]},$$scope:{ctx:r}}}),u=new Se({props:{label:"Boundaries",$$slots:{default:[Uc]},$$scope:{ctx:r}}}),a=new Se({props:{label:"Census",$$slots:{default:[zc]},$$scope:{ctx:r}}}),c=new Se({props:{label:"Other",$$slots:{default:[Wc]},$$scope:{ctx:r}}}),d=new Se({props:{label:"Tools",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),S=new nl({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),h(c.$$.fragment),g=C(),h(d.$$.fragment),k=C(),h(S.$$.fragment)},m(T,P){b(e,T,P),p(T,n,P),b(t,T,P),p(T,l,P),b(o,T,P),p(T,i,P),b(u,T,P),p(T,s,P),b(a,T,P),p(T,f,P),b(c,T,P),p(T,g,P),b(d,T,P),p(T,k,P),b(S,T,P),O=!0},p(T,P){const E={};P&8&&(E.$$scope={dirty:P,ctx:T}),t.$set(E);const N={};P&8&&(N.$$scope={dirty:P,ctx:T}),o.$set(N);const L={};P&8&&(L.$$scope={dirty:P,ctx:T}),u.$set(L);const F={};P&8&&(F.$$scope={dirty:P,ctx:T}),a.$set(F);const M={};P&8&&(M.$$scope={dirty:P,ctx:T}),c.$set(M);const I={};P&9&&(I.$$scope={dirty:P,ctx:T}),d.$set(I);const j={};P&2&&(j.disabled=!T[1]),S.$set(j)},i(T){O||($(e.$$.fragment,T),$(t.$$.fragment,T),$(o.$$.fragment,T),$(u.$$.fragment,T),$(a.$$.fragment,T),$(c.$$.fragment,T),$(d.$$.fragment,T),$(S.$$.fragment,T),O=!0)},o(T){_(e.$$.fragment,T),_(t.$$.fragment,T),_(o.$$.fragment,T),_(u.$$.fragment,T),_(a.$$.fragment,T),_(c.$$.fragment,T),_(d.$$.fragment,T),_(S.$$.fragment,T),O=!1},d(T){T&&(m(n),m(l),m(i),m(s),m(f),m(g),m(k)),v(e,T),v(t,T),v(o,T),v(u,T),v(a,T),v(c,T),v(d,T),v(S,T)}}}function Kc(r){let e,n;return e=new Se({props:{label:"Layers",open:!0,$$slots:{default:[Xc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zc(r,e,n){let t,l;Oe(r,qn,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&qn.set(!t)},[t,l,o]}class Jc extends z{constructor(e){super(),q(this,e,Zc,Kc,H,{})}}function Yc(r,e,n){let{loadFile:t}=e;return fn(async()=>{let o=await(await fetch(`${cn()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class Qc extends z{constructor(e){super(),q(this,e,Yc,null,H,{loadFile:0})}}function xc(r){let e;return{c(){e=w("Show on map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function e$(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function t$(r){let e,n,t,l;return e=new Yt({props:{$$slots:{default:[xc]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Yt({props:{$$slots:{default:[e$]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&32&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function n$(r){var P,E,N;let e,n,t=((P=r[0].browse)==null?void 0:P.authority_or_region)+"",l,o,i,u,s=((E=r[0].browse)==null?void 0:E.capital_scheme_id)+"",a,f,c,g,d=((N=r[0].browse)==null?void 0:N.funding_programme)+"",k,S,O,T;return O=new ll({props:{$$slots:{default:[t$]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=C(),i=A("p"),u=w("Capital scheme ID: "),a=w(s),f=C(),c=A("p"),g=w("Funding programme: "),k=w(d),S=C(),h(O.$$.fragment)},m(L,F){p(L,e,F),y(e,n),y(e,l),p(L,o,F),p(L,i,F),y(i,u),y(i,a),p(L,f,F),p(L,c,F),y(c,g),y(c,k),p(L,S,F),b(O,L,F),T=!0},p(L,F){var I,j,G;(!T||F&1)&&t!==(t=((I=L[0].browse)==null?void 0:I.authority_or_region)+"")&&B(l,t),(!T||F&1)&&s!==(s=((j=L[0].browse)==null?void 0:j.capital_scheme_id)+"")&&B(a,s),(!T||F&1)&&d!==(d=((G=L[0].browse)==null?void 0:G.funding_programme)+"")&&B(k,d);const M={};F&32&&(M.$$scope={dirty:F,ctx:L}),O.$set(M)},i(L){T||($(O.$$.fragment,L),T=!0)},o(L){_(O.$$.fragment,L),T=!1},d(L){L&&(m(e),m(o),m(i),m(f),m(c),m(S)),v(O,L)}}}function r$(r){var t;let e,n;return e=new Se({props:{label:`${r[0].scheme_reference}: ${(t=r[0].browse)==null?void 0:t.num_features} features`,$$slots:{default:[n$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),n=!0},p(l,[o]){var u;const i={};o&1&&(i.label=`${l[0].scheme_reference}: ${(u=l[0].browse)==null?void 0:u.num_features} features`),o&33&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function l$(r,e,n){let t;Oe(r,an,s=>n(4,t=s));let{schemesGj:l}=e,{scheme:o}=e;function i(){let s={type:"FeatureCollection",features:l.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(Yr(s),{padding:20,animate:!1})}function u(){var f,c;let s={type:"FeatureCollection",features:l.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(s)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=s=>{"schemesGj"in s&&n(3,l=s.schemesGj),"scheme"in s&&n(0,o=s.scheme)},[o,i,u,l]}class o$ extends z{constructor(e){super(),q(this,e,l$,r$,H,{schemesGj:3,scheme:0})}}function cr(r){let e,n,t=dn(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,i){p(o,e,i),y(e,n),y(e,l)},p(o,i){i&1&&t!==(t=dn(o[0].length_meters)+"")&&B(l,t)},d(o){o&&m(e)}}}function $r(r){let e,n=r[1](r[0].description)+"";return{c(){e=A("p")},m(t,l){p(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&m(e)}}}function s$(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,g=r[0].scheme_reference+"",d,k,S,O=r[0].length_meters&&cr(r),T=r[0].description&&$r(r);return{c(){e=A("div"),n=A("h2"),t=new un(!1),o=w(" ("),u=w(i),s=w(")"),a=C(),f=A("p"),c=w("Scheme reference: "),d=w(g),k=C(),O&&O.c(),S=C(),T&&T.c(),t.a=o,he(e,"max-width","30vw")},m(P,E){p(P,e,E),y(e,n),t.m(l,n),y(n,o),y(n,u),y(n,s),y(e,a),y(e,f),y(f,c),y(f,d),y(e,k),O&&O.m(e,null),y(e,S),T&&T.m(e,null)},p(P,[E]){E&1&&l!==(l=P[1](P[0].name)+"")&&t.p(l),E&1&&i!==(i=P[0].intervention_type+"")&&B(u,i),E&1&&g!==(g=P[0].scheme_reference+"")&&B(d,g),P[0].length_meters?O?O.p(P,E):(O=cr(P),O.c(),O.m(e,S)):O&&(O.d(1),O=null),P[0].description?T?T.p(P,E):(T=$r(P),T.c(),T.m(e,null)):T&&(T.d(1),T=null)},i:te,o:te,d(P){P&&m(e),O&&O.d(),T&&T.d()}}}function i$(r,e,n){let t;Oe(r,Bt,i=>n(2,t=i));let{props:l}=e;function o(i){return t?i.replace(new RegExp(t,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,l=i.props)},[l,o]}class mn extends z{constructor(e){super(),q(this,e,i$,s$,H,{props:0})}}function a$(r){let e,n;return e=new mn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function f$(r){let e,n;return e=new oe({props:{$$slots:{default:[a$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&192&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function u$(r){let e,n;return e=new mn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function c$(r){let e,n;return e=new oe({props:{$$slots:{default:[u$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&192&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $$(r){let e,n;return e=new mn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function p$(r){let e,n;return e=new oe({props:{$$slots:{default:[$$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&192&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function m$(r){let e,n,t,l,o,i,u,s,a,f;const c=[R("interventions-points"),{filter:["all",hn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Ht,"circle-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let g={$$slots:{default:[f$]},$$scope:{ctx:r}};for(let L=0;L<c.length;L+=1)g=Y(g,c[L]);e=new We({props:g});const d=[R("interventions-lines"),{filter:["all",bn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":bt,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let k={$$slots:{default:[c$]},$$scope:{ctx:r}};for(let L=0;L<d.length;L+=1)k=Y(k,d[L]);t=new ue({props:k});const S=[R("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*bt,"circle-opacity":0,"circle-stroke-color":De.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let O={};for(let L=0;L<S.length;L+=1)O=Y(O,S[L]);o=new We({props:O});const T=[R("interventions-polygons"),{filter:["all",Nt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":K(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let P={$$slots:{default:[p$]},$$scope:{ctx:r}};for(let L=0;L<T.length;L+=1)P=Y(P,T[L]);u=new Be({props:P});const E=[R("interventions-polygons-outlines"),{filter:["all",Nt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*bt}},{layout:{visibility:r[0]?"visible":"none"}}];let N={};for(let L=0;L<E.length;L+=1)N=Y(N,E[L]);return a=new ue({props:N}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(L,F){b(e,L,F),p(L,n,F),b(t,L,F),p(L,l,F),b(o,L,F),p(L,i,F),b(u,L,F),p(L,s,F),b(a,L,F),f=!0},p(L,F){const M=F&29?Q(c,[c[0],F&24&&{filter:["all",hn,L[3],L[4]]},c[2],c[3],F&4&&{paint:{"circle-color":L[2],"circle-radius":Ht,"circle-opacity":K(1,.5)}},F&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};F&128&&(M.$$scope={dirty:F,ctx:L}),e.$set(M);const I=F&13?Q(d,[d[0],F&8&&{filter:["all",bn,L[3]]},d[2],d[3],F&4&&{paint:{"line-color":L[2],"line-width":bt,"line-opacity":K(1,.5)}},F&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};F&128&&(I.$$scope={dirty:F,ctx:L}),t.$set(I);const j=F&1?Q(S,[S[0],S[1],S[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(j);const G=F&13?Q(T,[T[0],F&8&&{filter:["all",Nt,L[3]]},T[2],T[3],F&4&&{paint:{"fill-color":L[2],"fill-opacity":K(.2,.5)}},F&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};F&128&&(G.$$scope={dirty:F,ctx:L}),u.$set(G);const x=F&13?Q(E,[E[0],F&8&&{filter:["all",Nt,L[3]]},F&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*bt}},F&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(x)},i(L){f||($(e.$$.fragment,L),$(t.$$.fragment,L),$(o.$$.fragment,L),$(u.$$.fragment,L),$(a.$$.fragment,L),f=!0)},o(L){_(e.$$.fragment,L),_(t.$$.fragment,L),_(o.$$.fragment,L),_(u.$$.fragment,L),_(a.$$.fragment,L),f=!1},d(L){L&&(m(n),m(l),m(i),m(s)),v(e,L),v(t,L),v(o,L),v(u,L),v(a,L)}}}function _$(r){let e,n;return e=new Mt({props:{data:r[1],$$slots:{default:[m$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function g$(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,i=zr();const u=["!=",["get","hide_while_editing"],!0],s=["!=",["get","endpoint"],!0];return r.$$set=a=>{"schemesGj"in a&&n(5,l=a.schemesGj),"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=Qr(l))},[o,t,i,u,s,l]}class d$ extends z{constructor(e){super(),q(this,e,g$,_$,H,{schemesGj:5,showSchemes:0})}}function pr(r,e,n){const t=r.slice();return t[11]=e[n],t}function h$(r){let e,n;return e=new Qc({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mr(r){let e,n,t,l,o;function i(f){r[7](f)}function u(f){r[8](f)}function s(f){r[9](f)}let a={schemes:r[2]};return r[1]!==void 0&&(a.schemesGj=r[1]),r[3]!==void 0&&(a.schemesToBeShown=r[3]),r[4]!==void 0&&(a.show=r[4]),e=new Zs({props:a}),V.push(()=>Z(e,"schemesGj",i)),V.push(()=>Z(e,"schemesToBeShown",u)),V.push(()=>Z(e,"show",s)),{c(){h(e.$$.fragment)},m(f,c){b(e,f,c),o=!0},p(f,c){const g={};c&4&&(g.schemes=f[2]),!n&&c&2&&(n=!0,g.schemesGj=f[1],J(()=>n=!1)),!t&&c&8&&(t=!0,g.schemesToBeShown=f[3],J(()=>t=!1)),!l&&c&16&&(l=!0,g.show=f[4],J(()=>l=!1)),e.$set(g)},i(f){o||($(e.$$.fragment,f),o=!0)},o(f){_(e.$$.fragment,f),o=!1},d(f){v(e,f)}}}function _r(r){let e,n;return e=new o$({props:{schemesGj:r[1],scheme:r[11]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[11]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gr(r){let e=r[3].has(r[11].scheme_reference),n,t,l=e&&_r(r);return{c(){l&&l.c(),n=we()},m(o,i){l&&l.m(o,i),p(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[11].scheme_reference)),e?l?(l.p(o,i),i&12&&$(l,1)):(l=_r(o),l.c(),$(l,1),l.m(n.parentNode,n)):l&&(ie(),_(l,1,1,()=>{l=null}),ae())},i(o){t||($(l),t=!0)},o(o){_(l),t=!1},d(o){o&&m(n),l&&l.d(o)}}}function b$(r){let e,n,t,l,o,i,u,s,a,f,c=on()=="Private (development)",g,d,k,S,O,T,P,E;o=new al({props:{boundaryGeojson:r[1]}}),u=new Fl({}),a=new xr({});let N=c&&h$(r);d=new sl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[6]}}),S=new Tr({props:{errorMessage:r[0]}});let L=r[2].size>0&&mr(r),F=je(r[2].values()),M=[];for(let j=0;j<F.length;j+=1)M[j]=gr(pr(r,F,j));const I=j=>_(M[j],1,1,()=>{M[j]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),N&&N.c(),g=C(),h(d.$$.fragment),k=C(),h(S.$$.fragment),O=C(),L&&L.c(),T=C(),P=A("ul");for(let j=0;j<M.length;j+=1)M[j].c();he(n,"display","flex"),he(n,"justify-content","space-between"),U(e,"slot","sidebar"),U(e,"class","govuk-prose")},m(j,G){p(j,e,G),y(e,n),y(n,t),y(n,l),b(o,n,null),y(e,i),b(u,e,null),y(e,s),b(a,e,null),y(e,f),N&&N.m(e,null),y(e,g),b(d,e,null),y(e,k),b(S,e,null),y(e,O),L&&L.m(e,null),y(e,T),y(e,P);for(let x=0;x<M.length;x+=1)M[x]&&M[x].m(P,null);E=!0},p(j,G){const x={};G&2&&(x.boundaryGeojson=j[1]),o.$set(x),c&&N.p(j,G);const D={};if(G&1&&(D.errorMessage=j[0]),S.$set(D),j[2].size>0?L?(L.p(j,G),G&4&&$(L,1)):(L=mr(j),L.c(),$(L,1),L.m(e,T)):L&&(ie(),_(L,1,1,()=>{L=null}),ae()),G&14){F=je(j[2].values());let X;for(X=0;X<F.length;X+=1){const $e=pr(j,F,X);M[X]?(M[X].p($e,G),$(M[X],1)):(M[X]=gr($e),M[X].c(),$(M[X],1),M[X].m(P,null))}for(ie(),X=F.length;X<M.length;X+=1)I(X);ae()}},i(j){if(!E){$(o.$$.fragment,j),$(u.$$.fragment,j),$(a.$$.fragment,j),$(N),$(d.$$.fragment,j),$(S.$$.fragment,j),$(L);for(let G=0;G<F.length;G+=1)$(M[G]);E=!0}},o(j){_(o.$$.fragment,j),_(u.$$.fragment,j),_(a.$$.fragment,j),_(N),_(d.$$.fragment,j),_(S.$$.fragment,j),_(L),M=M.filter(Boolean);for(let G=0;G<M.length;G+=1)_(M[G]);E=!1},d(j){j&&m(e),v(o),v(u),v(a),N&&N.d(),v(d),v(S),L&&L.d(),yt(M,j)}}}function v$(r){let e,n,t,l,o,i,u;return e=new ol({}),t=new d$({props:{schemesGj:r[1],showSchemes:r[4]}}),i=new Jc({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),o=A("div"),h(i.$$.fragment),U(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),p(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&2&&(f.schemesGj=s[1]),a&16&&(f.showSchemes=s[4]),t.$set(f)},i(s){u||($(e.$$.fragment,s),$(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),v(i)}}}function w$(r){let e,n,t;return n=new el({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[v$]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),U(e,"slot","main")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.style=l[5]),o&16402&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function k$(r){let e,n;return e=new ul({props:{$$slots:{main:[w$],sidebar:[b$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&16447&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function y$(r,e,n){let t;Oe(r,vn,k=>n(5,t=k)),fn(()=>{tl()});const l=new URLSearchParams(window.location.search);vn.set(l.get("style")||"dataviz");let o="",i={type:"FeatureCollection",features:[],schemes:{}},u=new Map,s=new Set,a=!0;function f(k){try{n(1,i=JSON.parse(k)),n(2,u=Ns(i)),n(0,o="")}catch(S){n(0,o=`The file you loaded is broken: ${S}`)}}function c(k){i=k,n(1,i)}function g(k){s=k,n(3,s)}function d(k){a=k,n(4,a)}return[o,i,u,s,a,t,f,c,g,d]}class S$ extends z{constructor(e){super(),q(this,e,y$,k$,H,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new S$({target:document.getElementById("app")});
